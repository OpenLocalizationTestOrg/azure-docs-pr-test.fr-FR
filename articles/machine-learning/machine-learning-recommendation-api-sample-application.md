---
title: "Opérations courantes dans l'API Machine Learning Recommendations | Microsoft Docs"
description: Exemple d'application Azure ML Recommendation
services: machine-learning
documentationcenter: 
author: LuisCabrer
manager: jhubbard
editor: cgronlun
ms.assetid: 0220bc17-3315-47d7-84a3-ef490263a343
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/31/2017
ms.author: luisca
ROBOTS: NOINDEX
redirect_url: machine-learning-datamarket-deprecation
redirect_document_id: TRUE
ms.openlocfilehash: 8d8efa93e820f4a745ed93c0f4d13b2438dfa1eb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="recommendations-api-sample-application-walkthrough"></a><span data-ttu-id="30e12-103">Procédure pas à pas d’exemple d’application d’API Recommendations</span><span class="sxs-lookup"><span data-stu-id="30e12-103">Recommendations API Sample Application Walkthrough</span></span>
> [!NOTE]
> <span data-ttu-id="30e12-104">Vous devez commencer à utiliser le Service cognitif de l’API Recommandations au lieu de cette version.</span><span class="sxs-lookup"><span data-stu-id="30e12-104">You should start using the Recommendations API Cognitive Service instead of this version.</span></span> <span data-ttu-id="30e12-105">Le Service cognitif de l’API Recommandations remplacera ce service et toutes les nouvelles fonctionnalités y seront développées.</span><span class="sxs-lookup"><span data-stu-id="30e12-105">The Recommendations Cognitive Service will be replacing this service, and all the new features will be developed there.</span></span> <span data-ttu-id="30e12-106">Il propose de nouvelles fonctionnalités telles que la prise en charge du traitement par lot, un meilleur Explorateur d’API, une surface d’API plus propre, une expérience d’inscription/de facturation plus cohérente, etc.</span><span class="sxs-lookup"><span data-stu-id="30e12-106">It has new capabilities like batching support, a better API Explorer, a cleaner API surface, more consistent signup/billing experience, etc.</span></span>
> <span data-ttu-id="30e12-107">En savoir plus sur la [migration vers le nouveau Service cognitif](http://aka.ms/recomigrate)</span><span class="sxs-lookup"><span data-stu-id="30e12-107">Learn more about [Migrating to the new Cognitive Service](http://aka.ms/recomigrate)</span></span>
> 
> 

## <a name="purpose"></a><span data-ttu-id="30e12-108">Objectif</span><span class="sxs-lookup"><span data-stu-id="30e12-108">Purpose</span></span>
<span data-ttu-id="30e12-109">Ce document illustre l’utilisation de l’API d’Azure Machine Learning Recommendations, via une [version d’évaluation de l’application](https://code.msdn.microsoft.com/Recommendations-144df403).</span><span class="sxs-lookup"><span data-stu-id="30e12-109">This document shows the usage of the Azure Machine Learning Recommendations API via a [sample application](https://code.msdn.microsoft.com/Recommendations-144df403).</span></span>

<span data-ttu-id="30e12-110">Cette application n’est pas conçue pour inclure toutes les fonctionnalités ou pour utiliser toutes les API.</span><span class="sxs-lookup"><span data-stu-id="30e12-110">This application is not intended to include full functionality, nor does it use all the APIs.</span></span> <span data-ttu-id="30e12-111">Elle présente quelques unes des opérations courantes à effectuer lorsque vous souhaitez vous familiariser avec le service de recommandations de Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="30e12-111">It demonstrates some common operations to perform when you first want to play with the Machine Learning recommendation service.</span></span> 

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="introduction-to-machine-learning-recommendation-service"></a><span data-ttu-id="30e12-112">Introduction au service de recommandation de Machine Learning</span><span class="sxs-lookup"><span data-stu-id="30e12-112">Introduction to Machine Learning recommendation service</span></span>
<span data-ttu-id="30e12-113">Recommandations via le service de recommandations d’Azure Machine Learning est activé lorsque vous créez un modèle de recommandation basé sur les données suivantes :</span><span class="sxs-lookup"><span data-stu-id="30e12-113">Recommendations via the Machine Learning recommendation service are enabled when you build a recommendation model based on the following data:</span></span>

* <span data-ttu-id="30e12-114">Un référentiel des éléments que vous souhaitez recommander, autrement dit, un catalogue</span><span class="sxs-lookup"><span data-stu-id="30e12-114">A repository of the items you want to recommend, also known as a catalog</span></span>
* <span data-ttu-id="30e12-115">Les données représentant l’utilisation des éléments par session ou utilisateur (vous pouvez progressivement acquérir ces données via l’acquisition de données ; ne fait pas partie de la version d’évaluation de l’application.)</span><span class="sxs-lookup"><span data-stu-id="30e12-115">Data representing the usage of items per user or session (this can be acquired over time via data acquisition, not as part of the sample app)</span></span>

<span data-ttu-id="30e12-116">Une fois qu’un modèle de recommandation a été généré, vous pouvez l’utiliser pour prédire des éléments qui pourraient intéresser un utilisateur, selon un ensemble d’éléments (ou un élément unique) qu’il a sélectionné.</span><span class="sxs-lookup"><span data-stu-id="30e12-116">After a recommendation model is built, you can use it to predict items that a user might be interested in, according to a set of items (or a single item) the user selects.</span></span>

<span data-ttu-id="30e12-117">Afin de permettre le scénario ci-dessus, procédez comme suit dans le service Machine Learning Recommandation :</span><span class="sxs-lookup"><span data-stu-id="30e12-117">To enable the previous scenario, do the following in the Machine Learning recommendation service:</span></span>

* <span data-ttu-id="30e12-118">Créez un modèle : il s’agit d’un conteneur logique qui contient les données (de catalogue et d’utilisation) et le ou les modèles de prévision.</span><span class="sxs-lookup"><span data-stu-id="30e12-118">Create a model: This is a logical container that holds the data (catalog and usage) and the prediction model(s).</span></span> <span data-ttu-id="30e12-119">Chaque conteneur de modèle est identifié par un identifiant unique attribué lors de sa création.</span><span class="sxs-lookup"><span data-stu-id="30e12-119">Each model container is identified via a unique ID, which is allocated when it is created.</span></span> <span data-ttu-id="30e12-120">Cet identifiant, appelé identifiant de modèle, est utilisé par la plupart des API.</span><span class="sxs-lookup"><span data-stu-id="30e12-120">This ID is called the model ID, and it is used by most of the APIs.</span></span> 
* <span data-ttu-id="30e12-121">Téléchargez un catalogue : une fois qu’un conteneur de modèle est créé, vous pouvez lui associer un catalogue.</span><span class="sxs-lookup"><span data-stu-id="30e12-121">Upload to catalog: When a model container is created, you can associate to it a catalog.</span></span>

<span data-ttu-id="30e12-122">**Remarque**: les étapes de création d’un modèle et de téléchargement dans un catalogue sont généralement effectuées une fois pendant le cycle de vie du modèle.</span><span class="sxs-lookup"><span data-stu-id="30e12-122">**Note**: Creating a model and uploading to a catalog are usually performed once for the model lifecycle.</span></span>

* <span data-ttu-id="30e12-123">Téléchargez l’utilisation : pour ajouter des données d’utilisation au conteneur du modèle.</span><span class="sxs-lookup"><span data-stu-id="30e12-123">Upload usage: This adds usage data to the model container.</span></span>
* <span data-ttu-id="30e12-124">Générez le modèle de recommandation : une fois que vous avez suffisamment de données, vous pouvez générer un modèle de recommandation.</span><span class="sxs-lookup"><span data-stu-id="30e12-124">Build a recommendation model: After you have enough data, you can build the recommendation model.</span></span> <span data-ttu-id="30e12-125">Cette opération utilise des algorithmes d’apprentissage automatique très performants pour créer un modèle de recommandation.</span><span class="sxs-lookup"><span data-stu-id="30e12-125">This operation uses the top Machine Learning algorithms to create a recommendation model.</span></span> <span data-ttu-id="30e12-126">Chaque génération est associée à un identifiant unique.</span><span class="sxs-lookup"><span data-stu-id="30e12-126">Each build is associated with a unique ID.</span></span> <span data-ttu-id="30e12-127">Vous devez conserver un enregistrement de cet identifiant, car il est nécessaire au fonctionnement de certaines API.</span><span class="sxs-lookup"><span data-stu-id="30e12-127">You need to keep a record of this ID because it is necessary for the functionality of some APIs.</span></span>
* <span data-ttu-id="30e12-128">Surveillez le processus de génération : la génération d’un modèle de recommandation est une opération asynchrone et peut prendre de quelques minutes à plusieurs heures selon la quantité de données (de catalogue et d’utilisation) et les paramètres de génération.</span><span class="sxs-lookup"><span data-stu-id="30e12-128">Monitor the building process: A recommendation model build is an asynchronous operation, and it can take from several minutes to several hours, depending on the amount of data (catalog and usage) and the build parameters.</span></span> <span data-ttu-id="30e12-129">Vous devez donc surveiller la génération.</span><span class="sxs-lookup"><span data-stu-id="30e12-129">Therefore, you need to monitor the build.</span></span> <span data-ttu-id="30e12-130">Un modèle de recommandation est créé uniquement si sa génération associée est réalisée avec succès.</span><span class="sxs-lookup"><span data-stu-id="30e12-130">A recommendation model is created only if its associated build completes successfully.</span></span>
* <span data-ttu-id="30e12-131">(Facultatif) Choisissez la génération active d’un modèle de recommandation. Cette étape est nécessaire uniquement si vous avez associé plusieurs modèles de recommandation à votre conteneur de modèle.</span><span class="sxs-lookup"><span data-stu-id="30e12-131">(Optional) Choose an active recommendation model build: This step is only necessary if you have more than one recommendation model built in your model container.</span></span> <span data-ttu-id="30e12-132">Toute demande d’obtention de recommandation sans indiquer le modèle de recommandation actif sera automatiquement redirigée par le système vers la génération active par défaut.</span><span class="sxs-lookup"><span data-stu-id="30e12-132">Any request to get recommendations without indicating the active recommendation model is redirected automatically by the system to the default active build.</span></span> 

<span data-ttu-id="30e12-133">**Remarque**: un modèle de recommandation actif est prêt pour la production et est conçu pour une charge de production.</span><span class="sxs-lookup"><span data-stu-id="30e12-133">**Note**: An active recommendation model is production ready and it is built for production workload.</span></span> <span data-ttu-id="30e12-134">Il diffère d’un modèle de recommandation non actif, qui reste dans un environnement similaire à celui d’un test (parfois appelé intermédiaire).</span><span class="sxs-lookup"><span data-stu-id="30e12-134">This differs from a non-active recommendation model, which stays in a test-like environment (sometimes called staging).</span></span>

* <span data-ttu-id="30e12-135">Obtenez la recommandation : une fois que vous disposez d’un modèle de recommandation, vous pouvez déclencher la recommandation pour un seul élément ou pour une liste d’éléments que vous avez sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="30e12-135">Get recommendations: After you have a recommendation model, you can trigger recommendations for a single item or a list of items that you select.</span></span> 

<span data-ttu-id="30e12-136">En général, l'appel de la fonction Obtenez une recommandation dure un certain temps.</span><span class="sxs-lookup"><span data-stu-id="30e12-136">You will usually invoke Get Recommendation for a certain period of time.</span></span> <span data-ttu-id="30e12-137">En attendant, vous pouvez rediriger les données d’utilisation vers le système de recommandation de Machine Learning qui les ajoutera au conteneur de modèle spécifié.</span><span class="sxs-lookup"><span data-stu-id="30e12-137">During that period of time, you can redirect usage data to the Machine Learning recommendation system, which adds this data to the specified model container.</span></span> <span data-ttu-id="30e12-138">Lorsque vous avez suffisamment de données d’utilisation, vous pouvez déclencher une nouvelle génération de modèle de recommandation qui intègre les données d’utilisation supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="30e12-138">When you have enough usage data, you can build a new recommendation model that incorporates the additional usage data.</span></span> 

## <a name="prerequisites"></a><span data-ttu-id="30e12-139">Composants requis</span><span class="sxs-lookup"><span data-stu-id="30e12-139">Prerequisites</span></span>
* <span data-ttu-id="30e12-140">Visual Studio 2013 ou une version ultérieure</span><span class="sxs-lookup"><span data-stu-id="30e12-140">Visual Studio 2013 or later</span></span>
* <span data-ttu-id="30e12-141">Accès à Internet</span><span class="sxs-lookup"><span data-stu-id="30e12-141">Internet access</span></span> 
* <span data-ttu-id="30e12-142">Abonnement à l'API Recommandations (https://datamarket.azure.com/dataset/amla/recommendations).</span><span class="sxs-lookup"><span data-stu-id="30e12-142">Subscription to the Recommendations API (https://datamarket.azure.com/dataset/amla/recommendations).</span></span>

## <a name="azure-machine-learning-sample-app-solution"></a><span data-ttu-id="30e12-143">Solution de la version d’évaluation de l’application Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="30e12-143">Azure Machine Learning sample app solution</span></span>
<span data-ttu-id="30e12-144">Cette solution contient le code source, les fichiers d’utilisation et de catalogue en version d’évaluation, ainsi que des directives pour télécharger les packages requis pour la compilation.</span><span class="sxs-lookup"><span data-stu-id="30e12-144">This solution contains the source code, sample usage, catalog file, and directives to download the packages that are required for compilation.</span></span>

## <a name="the-apis-used"></a><span data-ttu-id="30e12-145">API utilisées</span><span class="sxs-lookup"><span data-stu-id="30e12-145">The APIs used</span></span>
<span data-ttu-id="30e12-146">L’application utilise la fonctionnalité de recommandation de Machine Learning via un sous-ensemble des API disponibles.</span><span class="sxs-lookup"><span data-stu-id="30e12-146">The application uses Machine Learning recommendation functionality via a subset of available APIs.</span></span> <span data-ttu-id="30e12-147">Les API suivantes sont illustrées dans l'application :</span><span class="sxs-lookup"><span data-stu-id="30e12-147">The following APIs are demonstrated in the application:</span></span>

* <span data-ttu-id="30e12-148">Créez un modèle : créez le conteneur logique pour les modèles de recommandation et les données.</span><span class="sxs-lookup"><span data-stu-id="30e12-148">Create model: Create a logical container to hold data and recommendation models.</span></span> <span data-ttu-id="30e12-149">Un modèle est identifié par un nom. Vous ne pouvez pas créer deux modèles portant le même nom.</span><span class="sxs-lookup"><span data-stu-id="30e12-149">A model is identified by a name, and you  cannot create more than one model with the same name.</span></span>
* <span data-ttu-id="30e12-150">Téléchargez le fichier de catalogue : pour télécharger les données de catalogue.</span><span class="sxs-lookup"><span data-stu-id="30e12-150">Upload catalog file: Use to upload catalog data.</span></span>
* <span data-ttu-id="30e12-151">Téléchargez le fichier d’utilisation : pour télécharger les données d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="30e12-151">Upload usage file: Use to upload usage data.</span></span>
* <span data-ttu-id="30e12-152">Déclenchez la génération : pour créer un modèle de recommandation.</span><span class="sxs-lookup"><span data-stu-id="30e12-152">Trigger build: Use to create a recommendation model.</span></span>
* <span data-ttu-id="30e12-153">Surveillez l’exécution de la génération : surveillez l’état d’une génération de modèle de recommandation.</span><span class="sxs-lookup"><span data-stu-id="30e12-153">Monitor build execution: Use to monitor the status of a recommendation model build.</span></span>
* <span data-ttu-id="30e12-154">Choisissez un modèle de recommandation généré : pour indiquer quel modèle de recommandation utiliser par défaut pour un certain conteneur de modèle.</span><span class="sxs-lookup"><span data-stu-id="30e12-154">Choose a built model for recommendation: Use to indicate which recommendation model to use by default for a certain model container.</span></span> <span data-ttu-id="30e12-155">Cette étape est nécessaire uniquement si vous avez plusieurs modèles de recommandation et si vous souhaitez configurer une génération non active comme modèle de recommandation actif.</span><span class="sxs-lookup"><span data-stu-id="30e12-155">This step is necessary only if you have more than one recommendation model and you want to activate a non-active build as the active recommendation model.</span></span>
* <span data-ttu-id="30e12-156">Obtenez la recommandation : pour récupérer un élément recommandé en fonction d’un élément unique ou d’un ensemble d’éléments.</span><span class="sxs-lookup"><span data-stu-id="30e12-156">Get recommendation: Use to retrieve recommended items according to a given single item or a set of items.</span></span> 

<span data-ttu-id="30e12-157">Pour une description complète de l’API, consultez la documentation de Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="30e12-157">For a complete description of the APIs, please see the Microsoft Azure Marketplace documentation.</span></span> 

<span data-ttu-id="30e12-158">**Remarque**: un modèle peut posséder plusieurs générations au fil du temps (pas simultanément).</span><span class="sxs-lookup"><span data-stu-id="30e12-158">**Note**: A model can have several builds over time (not simultaneously).</span></span> <span data-ttu-id="30e12-159">Chaque génération a été créée avec le même catalogue ou un catalogue mis à jour et des données d'utilisation supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="30e12-159">Each build is created with the same or an updated catalog and additional usage data.</span></span>

## <a name="common-pitfalls"></a><span data-ttu-id="30e12-160">Pièges courants</span><span class="sxs-lookup"><span data-stu-id="30e12-160">Common pitfalls</span></span>
* <span data-ttu-id="30e12-161">Vous devez fournir votre nom d’utilisateur et votre clé de compte principal Microsoft Azure Marketplace pour exécuter la version d’évaluation.</span><span class="sxs-lookup"><span data-stu-id="30e12-161">You need to provide your user name and your Microsoft Azure Marketplace primary account key to run the sample app.</span></span>
* <span data-ttu-id="30e12-162">La version d'évaluation de l'application ne peut pas exécuter des étapes consécutives.</span><span class="sxs-lookup"><span data-stu-id="30e12-162">Running the sample app consecutively will fail.</span></span> <span data-ttu-id="30e12-163">Le flux d’application comprend la création, le téléchargement, la surveillance de la génération et l’obtention de recommandations à partir d’un modèle prédéfini. Par conséquent, elle échouera à exécuter des étapes consécutives si vous ne modifiez pas le nom du modèle entre les appels.</span><span class="sxs-lookup"><span data-stu-id="30e12-163">The application flow includes creating, uploading, building the monitor, and getting recommendations from a predefined model; therefore, it will fail on consecutive execution if you do not change the model name between invocations.</span></span>
* <span data-ttu-id="30e12-164">Recommandation peut ne pas renvoyer de données.</span><span class="sxs-lookup"><span data-stu-id="30e12-164">Recommendations might return without data.</span></span> <span data-ttu-id="30e12-165">La version d’évaluation de l’application utilise un très petit catalogue et fichier d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="30e12-165">The sample app uses a very small catalog and usage file.</span></span> <span data-ttu-id="30e12-166">Certains éléments du catalogue n’ont donc aucun élément recommandé.</span><span class="sxs-lookup"><span data-stu-id="30e12-166">Therefore, some items from the catalog will have no recommended items.</span></span>

## <a name="disclaimer"></a><span data-ttu-id="30e12-167">Clause d'exclusion de responsabilité</span><span class="sxs-lookup"><span data-stu-id="30e12-167">Disclaimer</span></span>
<span data-ttu-id="30e12-168">La version d’évaluation n’est pas conçue pour être exécutée dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="30e12-168">The sample app is not intended to be run in a production environment.</span></span> <span data-ttu-id="30e12-169">Les données fournies dans le catalogue ne sont pas nombreuses et ne fournissent pas un modèle de recommandation éloquent.</span><span class="sxs-lookup"><span data-stu-id="30e12-169">The data provided in the catalog is very small, and it will not provide a meaningful recommendation model.</span></span> <span data-ttu-id="30e12-170">Elles sont seulement fournies à titre de démonstration.</span><span class="sxs-lookup"><span data-stu-id="30e12-170">The data is provided as a demonstration.</span></span> 

