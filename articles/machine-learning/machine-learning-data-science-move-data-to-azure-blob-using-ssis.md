---
title: "Déplacer des données vers ou depuis le stockage d’objets blobs Azure à l’aide de connecteurs SSIS | Microsoft Docs"
description: "Déplacer des données vers ou depuis le stockage d’objets blobs Azure à l’aide de connecteurs SSIS"
services: machine-learning,storage
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 96a1b5fb-34d1-4b9b-8d99-2bb8289e0398
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: bradsev
ms.openlocfilehash: 575beaea5443919bd9728016bf100b43de8e4aab
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="move-data-to-or-from-azure-blob-storage-using-ssis-connectors"></a><span data-ttu-id="aa308-103">Déplacer des données vers ou depuis Stockage Blob Azure à l’aide de connecteurs SSIS</span><span class="sxs-lookup"><span data-stu-id="aa308-103">Move data to or from Azure Blob Storage using SSIS connectors</span></span>
<span data-ttu-id="aa308-104">Le [Feature Pack SQL Server Integration Services pour Azure](https://msdn.microsoft.com/library/mt146770.aspx) fournit des composants permettant de se connecter à Azure, de transférer des données entre des sources de données Azure et des sources de données sur site et de traiter les données stockées dans Azure.</span><span class="sxs-lookup"><span data-stu-id="aa308-104">The [SQL Server Integration Services Feature Pack for Azure](https://msdn.microsoft.com/library/mt146770.aspx) provides components to connect to Azure, transfer data between Azure and on-premises data sources, and process data stored in Azure.</span></span>

[!INCLUDE [blob-storage-tool-selector](../../includes/machine-learning-blob-storage-tool-selector.md)]

<span data-ttu-id="aa308-105">Une fois que les clients ont déplacé les données locales dans le cloud, ils peuvent y accéder à partir de n’importe quel service Azure pour mettre à profit la totalité des performances de la suite de technologies Azure.</span><span class="sxs-lookup"><span data-stu-id="aa308-105">Once customers have moved on-premises data into the cloud, they can access it from any Azure service to leverage the full power of the suite of Azure technologies.</span></span> <span data-ttu-id="aa308-106">Il peut être utilisé, par exemple, dans Machine Learning ou sur un cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="aa308-106">It may be used, for example, in Azure Machine Learning or on an HDInsight cluster.</span></span>

<span data-ttu-id="aa308-107">Il s’agit généralement de la première étape pour les procédures pas à pas [SQL](machine-learning-data-science-process-sql-walkthrough.md) et [HDInsight](machine-learning-data-science-process-hive-walkthrough.md).</span><span class="sxs-lookup"><span data-stu-id="aa308-107">This is typically be the first step for the [SQL](machine-learning-data-science-process-sql-walkthrough.md) and [HDInsight](machine-learning-data-science-process-hive-walkthrough.md) walkthroughs.</span></span>

<span data-ttu-id="aa308-108">Pour une présentation de scénarios canoniques utilisant SSIS pour répondre aux besoins de l’entreprise communs dans les scénarios d’intégration hybrides, reportez-vous à la section [En faire plus avec le Feature Pack SQL Server Integration Services pour Azure](http://blogs.msdn.com/b/ssis/archive/2015/06/25/doing-more-with-sql-server-integration-services-feature-pack-for-azure.aspx) .</span><span class="sxs-lookup"><span data-stu-id="aa308-108">For a discussion of canonical scenarios that use SSIS to accomplish business needs common in hybrid data integration scenarios, see [Doing more with SQL Server Integration Services Feature Pack for Azure](http://blogs.msdn.com/b/ssis/archive/2015/06/25/doing-more-with-sql-server-integration-services-feature-pack-for-azure.aspx) blog.</span></span>

> [!NOTE]
> <span data-ttu-id="aa308-109">Pour une présentation complète du stockage d’objets blob Azure, consultez les articles [Fonctionnalités de base des objets blob Azure](../storage/blobs/storage-dotnet-how-to-use-blobs.md) et [Service Blob Azure](https://msdn.microsoft.com/library/azure/dd179376.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa308-109">For a complete introduction to Azure blob storage, refer to [Azure Blob Basics](../storage/blobs/storage-dotnet-how-to-use-blobs.md) and to [Azure Blob Service](https://msdn.microsoft.com/library/azure/dd179376.aspx).</span></span>
> 
> 

## <a name="prerequisites"></a><span data-ttu-id="aa308-110">Composants requis</span><span class="sxs-lookup"><span data-stu-id="aa308-110">Prerequisites</span></span>
<span data-ttu-id="aa308-111">Pour exécuter les tâches décrites dans cet article, vous devez disposer d’un abonnement Azure et configurer un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="aa308-111">To perform the tasks described in this article, you must have an Azure subscription and an Azure storage account set up.</span></span> <span data-ttu-id="aa308-112">Pour charger ou télécharger des données, vous devez connaître le nom et la clé de votre compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="aa308-112">You must know your Azure storage account name and account key to upload or download data.</span></span>

* <span data-ttu-id="aa308-113">Pour configurer un **abonnement Azure**, consultez la section [Essai gratuit pendant un mois](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="aa308-113">To set up an **Azure subscription**, see [Free one-month trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="aa308-114">Pour obtenir des instructions sur la création d’ **un compte de stockage** et obtenir des informations sur le compte et la clé, consultez la section [À propos des comptes de stockage Azure](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="aa308-114">For instructions on creating a **storage account** and for getting account and key information, see [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>

<span data-ttu-id="aa308-115">Pour utiliser les **connecteurs SSIS**vous devez télécharger :</span><span class="sxs-lookup"><span data-stu-id="aa308-115">To use the **SSIS connectors**, you must download:</span></span>

* <span data-ttu-id="aa308-116">**SQL Server 2014 ou 2016 Standard (ou version ultérieure)**: l’installation inclut SQL Server Integration Services.</span><span class="sxs-lookup"><span data-stu-id="aa308-116">**SQL Server 2014 or 2016 Standard (or above)**: Install includes SQL Server Integration Services.</span></span>
* <span data-ttu-id="aa308-117">**Microsoft SQL Server 2014 ou 2016 Integration Services Feature Pack for Azure** peuvent être téléchargés respectivement depuis les pages [SQL Server 2014 Integration Services](http://www.microsoft.com/download/details.aspx?id=47366) et [SQL Server 2016 Integration Services](https://www.microsoft.com/download/details.aspx?id=49492).</span><span class="sxs-lookup"><span data-stu-id="aa308-117">**Microsoft SQL Server 2014 or 2016 Integration Services Feature Pack for Azure**: These can be downloaded, respectively, from the [SQL Server 2014 Integration Services](http://www.microsoft.com/download/details.aspx?id=47366) and [SQL Server 2016 Integration Services](https://www.microsoft.com/download/details.aspx?id=49492) pages.</span></span>

> [!NOTE]
> <span data-ttu-id="aa308-118">SSIS est installé avec SQL Server, mais n’est pas inclus dans la version Express.</span><span class="sxs-lookup"><span data-stu-id="aa308-118">SSIS is installed with SQL Server, but is not included in the Express version.</span></span> <span data-ttu-id="aa308-119">Pour plus d'informations sur les applications incluses dans les différentes éditions de SQL Server, consultez [Éditions de SQL Server](http://www.microsoft.com/en-us/server-cloud/products/sql-server-editions/)</span><span class="sxs-lookup"><span data-stu-id="aa308-119">For information on what applications are included in various editions of SQL Server, see [SQL Server Editions](http://www.microsoft.com/en-us/server-cloud/products/sql-server-editions/)</span></span>
> 
> 

<span data-ttu-id="aa308-120">Pour les supports de formation sur SSIS, consultez la [formation pratique SSIS](http://www.microsoft.com/download/details.aspx?id=20766)</span><span class="sxs-lookup"><span data-stu-id="aa308-120">For training materials on SSIS, see [Hands On Training for SSIS](http://www.microsoft.com/download/details.aspx?id=20766)</span></span>

<span data-ttu-id="aa308-121">Pour plus d'informations sur la mise en service à l'aide de SISS pour la création des packages d'extraction, de transformation et de chargement (ETL), consultez [Didacticiel SSIS : création d'un Package ETL Simple](https://msdn.microsoft.com/library/ms169917.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa308-121">For information on how to get up-and-running using SISS to build simple extraction, transformation, and load (ETL) packages, see [SSIS Tutorial: Creating a Simple ETL Package](https://msdn.microsoft.com/library/ms169917.aspx).</span></span>

## <a name="download-nyc-taxi-dataset"></a><span data-ttu-id="aa308-122">Télécharger l’ensemble de données Taxi NYC</span><span class="sxs-lookup"><span data-stu-id="aa308-122">Download NYC Taxi dataset</span></span>
<span data-ttu-id="aa308-123">L'exemple décrit ici utilise un groupe de données disponible au public (l'ensemble de données [Courses taxi NYC](http://www.andresmh.com/nyctaxitrips/) ).</span><span class="sxs-lookup"><span data-stu-id="aa308-123">The example described here use a publicly available dataset -- the [NYC Taxi Trips](http://www.andresmh.com/nyctaxitrips/) dataset.</span></span> <span data-ttu-id="aa308-124">Le groupe de données se compose d’environ 173 millions de courses en taxi à New York dans l’année 2013.</span><span class="sxs-lookup"><span data-stu-id="aa308-124">The dataset consists of about 173 million taxi rides in NYC in the year 2013.</span></span> <span data-ttu-id="aa308-125">Il existe deux types de données : les données détaillées relatives aux voyages et celles relatives aux tarifs des courses.</span><span class="sxs-lookup"><span data-stu-id="aa308-125">There are two types of data: trip details data and fare data.</span></span> <span data-ttu-id="aa308-126">Comme il existe un fichier par élément pour chaque mois, nous avons 24 fichiers, chacun d’eux d’un volume de 2 Go avant compression.</span><span class="sxs-lookup"><span data-stu-id="aa308-126">As there is a file for each month, we have 24 files in all, each of which is approximately 2GB uncompressed.</span></span>

## <a name="upload-data-to-azure-blob-storage"></a><span data-ttu-id="aa308-127">Téléchargement de données vers le stockage d’objets blob Azure</span><span class="sxs-lookup"><span data-stu-id="aa308-127">Upload data to Azure blob storage</span></span>
<span data-ttu-id="aa308-128">Pour déplacer des données à l’aide du pack de fonctionnalités du site local pour le stockage d’objets blobs Azure, nous utilisons une instance de la [**tâche de téléchargement d’objets blobs Azure**](https://msdn.microsoft.com/library/mt146776.aspx), comme illustré ici :</span><span class="sxs-lookup"><span data-stu-id="aa308-128">To move data using the SSIS feature pack from on-premises to Azure blob storage, we use an instance of the [**Azure Blob Upload Task**](https://msdn.microsoft.com/library/mt146776.aspx), shown here:</span></span>

![configure-data-science-vm](./media/machine-learning-data-science-move-data-to-azure-blob-using-ssis/ssis-azure-blob-upload-task.png)

<span data-ttu-id="aa308-130">Les paramètres que la tâche utilise sont décrits ici :</span><span class="sxs-lookup"><span data-stu-id="aa308-130">The parameters that the task uses are described here:</span></span>

| <span data-ttu-id="aa308-131">Champ</span><span class="sxs-lookup"><span data-stu-id="aa308-131">Field</span></span> | <span data-ttu-id="aa308-132">Description</span><span class="sxs-lookup"><span data-stu-id="aa308-132">Description</span></span> |
| --- | --- |
| <span data-ttu-id="aa308-133">**AzureStorageConnection**</span><span class="sxs-lookup"><span data-stu-id="aa308-133">**AzureStorageConnection**</span></span> |<span data-ttu-id="aa308-134">Spécifie un gestionnaire de connexions de stockage Azure existant ou en crée un nouveau faisant référence à un compte de stockage Azure qui pointe vers l’endroit où les fichiers de l’objet blob sont hébergés.</span><span class="sxs-lookup"><span data-stu-id="aa308-134">Specifies an existing Azure Storage Connection Manager or creates a new one that refers to an Azure storage account that points to where the blob files are hosted.</span></span> |
| <span data-ttu-id="aa308-135">**BlobContainer**</span><span class="sxs-lookup"><span data-stu-id="aa308-135">**BlobContainer**</span></span> |<span data-ttu-id="aa308-136">Spécifie le nom du conteneur d’objets blobs qui contient les fichiers téléchargés en tant qu’objets blobs.</span><span class="sxs-lookup"><span data-stu-id="aa308-136">Specifies the name of the blob container that hold the uploaded files as blobs.</span></span> |
| <span data-ttu-id="aa308-137">**BlobDirectory**</span><span class="sxs-lookup"><span data-stu-id="aa308-137">**BlobDirectory**</span></span> |<span data-ttu-id="aa308-138">Spécifie le répertoire blob où le fichier téléchargé est stocké en tant qu’objet blob de bloc.</span><span class="sxs-lookup"><span data-stu-id="aa308-138">Specifies the blob directory where the uploaded file is stored as a block blob.</span></span> <span data-ttu-id="aa308-139">Le répertoire d’objet blob est une structure hiérarchique virtuelle.</span><span class="sxs-lookup"><span data-stu-id="aa308-139">The blob directory is a virtual hierarchical structure.</span></span> <span data-ttu-id="aa308-140">Si l’objet blob existe déjà, il est remplacé.</span><span class="sxs-lookup"><span data-stu-id="aa308-140">If the blob already exists, it ia replaced.</span></span> |
| <span data-ttu-id="aa308-141">**LocalDirectory**</span><span class="sxs-lookup"><span data-stu-id="aa308-141">**LocalDirectory**</span></span> |<span data-ttu-id="aa308-142">Spécifie le répertoire local qui contient les fichiers à télécharger.</span><span class="sxs-lookup"><span data-stu-id="aa308-142">Specifies the local directory that contains the files to be uploaded.</span></span> |
| <span data-ttu-id="aa308-143">**FileName**</span><span class="sxs-lookup"><span data-stu-id="aa308-143">**FileName**</span></span> |<span data-ttu-id="aa308-144">Spécifie un filtre de nom pour sélectionner des fichiers obéissant à un schéma de nom spécifié.</span><span class="sxs-lookup"><span data-stu-id="aa308-144">Specifies a name filter to select files with the specified name pattern.</span></span> <span data-ttu-id="aa308-145">Par exemple, MySheet\*.xls\* inclut des fichiers tels que MySheet001.xls et MySheetABC.xlsx</span><span class="sxs-lookup"><span data-stu-id="aa308-145">For example, MySheet\*.xls\* includes files such as MySheet001.xls and MySheetABC.xlsx</span></span> |
| <span data-ttu-id="aa308-146">**TimeRangeFrom/TimeRangeTo**</span><span class="sxs-lookup"><span data-stu-id="aa308-146">**TimeRangeFrom/TimeRangeTo**</span></span> |<span data-ttu-id="aa308-147">Spécifie une plage de temps pour appliquer un filtre.</span><span class="sxs-lookup"><span data-stu-id="aa308-147">Specifies a time range filter.</span></span> <span data-ttu-id="aa308-148">Les fichiers modifiés après *TimeRangeFrom* et avant *TimeRangeTo* sont inclus.</span><span class="sxs-lookup"><span data-stu-id="aa308-148">Files modified after *TimeRangeFrom* and before *TimeRangeTo* are included.</span></span> |

> [!NOTE]
> <span data-ttu-id="aa308-149">Les informations d’identification **AzureStorageConnection** doivent être correctes et **BlobContainer** doit exister avant que le transfert soit tenté.</span><span class="sxs-lookup"><span data-stu-id="aa308-149">The **AzureStorageConnection** credentials need to be correct and the **BlobContainer** must exist before the transfer is attempted.</span></span>
> 
> 

## <a name="download-data-from-azure-blob-storage"></a><span data-ttu-id="aa308-150">Télécharger les données depuis le stockage d’objets blobs Azure</span><span class="sxs-lookup"><span data-stu-id="aa308-150">Download data from Azure blob storage</span></span>
<span data-ttu-id="aa308-151">Pour télécharger des données depuis le stockage d’objets blobs Azure vers le stockage sur site avec SSIS, utilisez une instance de la [tâche de téléchargement d’objets blobs Azure](https://msdn.microsoft.com/library/mt146779.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa308-151">To download data from Azure blob storage to on-premises storage with SSIS, use an instance of the [Azure Blob Upload Task](https://msdn.microsoft.com/library/mt146779.aspx).</span></span>

## <a name="more-advanced-ssis-azure-scenarios"></a><span data-ttu-id="aa308-152">Scénarios SSIS-Azure plus élaborés</span><span class="sxs-lookup"><span data-stu-id="aa308-152">More advanced SSIS-Azure scenarios</span></span>
<span data-ttu-id="aa308-153">Le pack de fonctionnalités SSIS permet de gérer des flux de données plus complexes en regroupant plusieurs tâches.</span><span class="sxs-lookup"><span data-stu-id="aa308-153">The SSIS feature pack allows for more complex flows to be handled by packaging tasks together.</span></span> <span data-ttu-id="aa308-154">Par exemple, les données d’objets blobs peuvent alimenter directement un cluster HDInsight dont le résultat peut être de nouveau téléchargé vers un objet blob, puis dans un espace de stockage local.</span><span class="sxs-lookup"><span data-stu-id="aa308-154">For example, the blob data could feed directly into an HDInsight cluster, whose output could be downloaded back to a blob and then to on-premises storage.</span></span> <span data-ttu-id="aa308-155">SSIS peut exécuter des tâches Hive et Pig sur un cluster HDInsight à l’aide de connecteurs SSIS supplémentaires :</span><span class="sxs-lookup"><span data-stu-id="aa308-155">SSIS can run Hive and Pig jobs on an HDInsight cluster using additional SSIS connectors:</span></span>

* <span data-ttu-id="aa308-156">Pour exécuter un script Hive sur un cluster Azure HDInsight avec SSIS, utilisez la [tâche Azure HDInsight Hive](https://msdn.microsoft.com/library/mt146771.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa308-156">To run a Hive script on an Azure HDInsight cluster with SSIS, use [Azure HDInsight Hive Task](https://msdn.microsoft.com/library/mt146771.aspx).</span></span>
* <span data-ttu-id="aa308-157">Pour exécuter un script Pig sur un cluster Azure HDInsight avec SSIS, utilisez la [tâche Azure HDInsight Pig](https://msdn.microsoft.com/library/mt146781.aspx).</span><span class="sxs-lookup"><span data-stu-id="aa308-157">To run a Pig script on an Azure HDInsight cluster with SSIS, use [Azure HDInsight Pig Task](https://msdn.microsoft.com/library/mt146781.aspx).</span></span>

