---
title: Optimiser les algorithmes dans Azure Machine Learning | Microsoft Docs
description: "Explique comment choisir l’ensemble de paramètres optimal pour un algorithme dans Microsoft Azure Machine Learning."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6717e30e-b8d8-4cc1-ad0b-1d4727928d32
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: b3be7f31ac31c656744fb809e3972af0ac4ad4f1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="choose-parameters-to-optimize-your-algorithms-in-azure-machine-learning"></a><span data-ttu-id="6ca28-103">Sélection des paramètres permettant d’optimiser des algorithmes dans Microsoft Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="6ca28-103">Choose parameters to optimize your algorithms in Azure Machine Learning</span></span>
<span data-ttu-id="6ca28-104">Cette rubrique explique comment choisir le bon ensemble d’hyperparamètres pour un algorithme dans Microsoft Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="6ca28-104">This topic describes how to choose the right hyperparameter set for an algorithm in Azure Machine Learning.</span></span> <span data-ttu-id="6ca28-105">La plupart des algorithmes Machine Learning ont des paramètres qui doivent être définis.</span><span class="sxs-lookup"><span data-stu-id="6ca28-105">Most machine learning algorithms have parameters to set.</span></span> <span data-ttu-id="6ca28-106">Lorsque vous gérez l’apprentissage d’un modèle, vous devez fournir des valeurs pour ces paramètres.</span><span class="sxs-lookup"><span data-stu-id="6ca28-106">When you train a model, you need to provide values for those parameters.</span></span> <span data-ttu-id="6ca28-107">L’efficacité du modèle formé dépend des paramètres de modèle choisis.</span><span class="sxs-lookup"><span data-stu-id="6ca28-107">The efficacy of the trained model depends on the model parameters that you choose.</span></span> <span data-ttu-id="6ca28-108">Le processus de recherche de l’ensemble optimal de paramètres est connu sous le nom de *sélection du modèle*.</span><span class="sxs-lookup"><span data-stu-id="6ca28-108">The process of finding the optimal set of parameters is known as *model selection*.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="6ca28-109">Il existe différentes manières d’effectuer une sélection de modèle.</span><span class="sxs-lookup"><span data-stu-id="6ca28-109">There are various ways to do model selection.</span></span> <span data-ttu-id="6ca28-110">Dans ML, la méthode de validation croisée est l’une des plus largement utilisées pour la sélection de modèle. Il s’agit du mécanisme par défaut utilisé à cette fin dans Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="6ca28-110">In machine learning, cross-validation is one of the most widely used methods for model selection, and it is the default model selection mechanism in Azure Machine Learning.</span></span> <span data-ttu-id="6ca28-111">Comme les langages R et Python sont pris en charge par Azure Machine Learning, vous pouvez toujours implémenter votre propre mécanisme de sélection de modèle, via l’un ou l’autre de ces langages.</span><span class="sxs-lookup"><span data-stu-id="6ca28-111">Because Azure Machine Learning supports both R and Python, you can always implement their own model selection mechanisms by using either R or Python.</span></span>

<span data-ttu-id="6ca28-112">Le processus de recherche de l’ensemble de paramètres idéal comprend quatre étapes :</span><span class="sxs-lookup"><span data-stu-id="6ca28-112">There are four steps in the process of finding the best parameter set:</span></span>

1. <span data-ttu-id="6ca28-113">**Définir l’espace de paramètre** : pour l’algorithme, vous devez d’abord déterminer les valeurs de paramètres exactes que vous souhaitez prendre en compte.</span><span class="sxs-lookup"><span data-stu-id="6ca28-113">**Define the parameter space**: For the algorithm, first decide the exact parameter values you want to consider.</span></span>
2. <span data-ttu-id="6ca28-114">**Définir les paramètres de validation croisée** : déterminez comment choisir les plis de validation croisée pour le jeu de données.</span><span class="sxs-lookup"><span data-stu-id="6ca28-114">**Define the cross-validation settings**: Decide how to choose cross-validation folds for the dataset.</span></span>
3. <span data-ttu-id="6ca28-115">**Définir la mesure** : déterminez la mesure à utiliser pour évaluer l’ensemble de paramètres le plus approprié (exactitude, erreur quadratique moyenne, précision, rappel ou f-score).</span><span class="sxs-lookup"><span data-stu-id="6ca28-115">**Define the metric**: Decide what metric to use for determining the best set of parameters, such as accuracy, root mean squared error, precision, recall, or f-score.</span></span>
4. <span data-ttu-id="6ca28-116">**Apprentissage, évaluation et comparaison** : pour chaque combinaison unique de valeurs de paramètres, la validation croisée est effectuée selon la mesure d’erreur que vous définissez.</span><span class="sxs-lookup"><span data-stu-id="6ca28-116">**Train, evaluate, and compare**: For each unique combination of the parameter values, cross-validation is carried out by and based on the error metric you define.</span></span> <span data-ttu-id="6ca28-117">Après évaluation et comparaison, vous pouvez choisir le modèle le plus performant.</span><span class="sxs-lookup"><span data-stu-id="6ca28-117">After evaluation and comparison, you can choose the best-performing model.</span></span>

<span data-ttu-id="6ca28-118">L’image ci-dessous illustre cette opération dans Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="6ca28-118">The following image illustrates shows how this can be achieved in Azure Machine Learning.</span></span>

![Trouver l’ensemble de paramètres idéal](./media/machine-learning-algorithm-parameters-optimize/fig1.png)

## <a name="define-the-parameter-space"></a><span data-ttu-id="6ca28-120">Définir l’espace de paramètre</span><span class="sxs-lookup"><span data-stu-id="6ca28-120">Define the parameter space</span></span>
<span data-ttu-id="6ca28-121">L’ensemble de paramètres peut être défini lors de l’étape d’initialisation du modèle.</span><span class="sxs-lookup"><span data-stu-id="6ca28-121">You can define the parameter set at the model initialization step.</span></span> <span data-ttu-id="6ca28-122">Le volet de paramètres de l’ensemble des algorithmes ML propose deux modes de formation : *Paramètre unique* et *Plage de paramètres*.</span><span class="sxs-lookup"><span data-stu-id="6ca28-122">The parameter pane of all machine learning algorithms has two trainer modes: *Single Parameter* and *Parameter Range*.</span></span> <span data-ttu-id="6ca28-123">Choisissez le mode Plage de paramètres.</span><span class="sxs-lookup"><span data-stu-id="6ca28-123">Choose Parameter Range mode.</span></span> <span data-ttu-id="6ca28-124">En mode Plage de paramètres, vous pouvez entrer plusieurs valeurs pour chaque paramètre.</span><span class="sxs-lookup"><span data-stu-id="6ca28-124">In Parameter Range mode, you can enter multiple values for each parameter.</span></span> <span data-ttu-id="6ca28-125">Vous pouvez entrer des valeurs séparées par des virgules dans la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="6ca28-125">You can enter comma-separated values in the text box.</span></span>

![Arbre de décision optimisé à deux classes, paramètre unique](./media/machine-learning-algorithm-parameters-optimize/fig2.png)

 <span data-ttu-id="6ca28-127">Vous pouvez également définir les points minimum et maximum de la grille et le nombre total de points à générer à l’aide de l’option **Utiliser le générateur de plage**.</span><span class="sxs-lookup"><span data-stu-id="6ca28-127">Alternately, you can define the maximum and minimum points of the grid and the total number of points to be generated with **Use Range Builder**.</span></span> <span data-ttu-id="6ca28-128">Par défaut, les valeurs de paramètre sont générées sur une échelle linéaire.</span><span class="sxs-lookup"><span data-stu-id="6ca28-128">By default, the parameter values are generated on a linear scale.</span></span> <span data-ttu-id="6ca28-129">Cependant, si l’option **Échelle logarithmique** est activée, les valeurs sont générées sur une échelle logarithmique (selon laquelle le rapport entre les points adjacents est constant, et non leur différence).</span><span class="sxs-lookup"><span data-stu-id="6ca28-129">But if **Log Scale** is checked, the values are generated in the log scale (that is, the ratio of the adjacent points is constant instead of their difference).</span></span> <span data-ttu-id="6ca28-130">Pour les paramètres entiers, vous pouvez définir une plage à l’aide d’un trait d’union.</span><span class="sxs-lookup"><span data-stu-id="6ca28-130">For integer parameters, you can define a range by using a hyphen.</span></span> <span data-ttu-id="6ca28-131">Par exemple, « 1-10 » signifie que tous les entiers compris entre 1 et 10 (tous deux inclus) forment le jeu de paramètres.</span><span class="sxs-lookup"><span data-stu-id="6ca28-131">For example, “1-10” means that all integers between 1 and 10 (both inclusive) form the parameter set.</span></span> <span data-ttu-id="6ca28-132">Un mode mixte est également pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6ca28-132">A mixed mode is also supported.</span></span> <span data-ttu-id="6ca28-133">Par exemple, l’ensemble de paramètres « 1-10, 20, 50 » inclut les entiers 1-10, 20 et 50.</span><span class="sxs-lookup"><span data-stu-id="6ca28-133">For example, the parameter set “1-10, 20, 50” would include integers 1-10, 20, and 50.</span></span>

![Arbre de décision optimisé à deux classes, plage de paramètres](./media/machine-learning-algorithm-parameters-optimize/fig3.png)

## <a name="define-cross-validation-folds"></a><span data-ttu-id="6ca28-135">Définir les plis de validation croisée</span><span class="sxs-lookup"><span data-stu-id="6ca28-135">Define cross-validation folds</span></span>
<span data-ttu-id="6ca28-136">Le module [Partition et échantillon][partition-and-sample] peut être utilisé pour affecter des plis aux données, de manière aléatoire.</span><span class="sxs-lookup"><span data-stu-id="6ca28-136">The [Partition and Sample][partition-and-sample] module can be used to randomly assign folds to the data.</span></span> <span data-ttu-id="6ca28-137">Dans l’exemple de configuration suivant pour ce module, nous allons définir cinq plis et affecter au hasard le nombre de plis aux exemples d’instances.</span><span class="sxs-lookup"><span data-stu-id="6ca28-137">In the following sample configuration for the module, we define five folds and randomly assign a fold number to the sample instances.</span></span>

![Partition et échantillon](./media/machine-learning-algorithm-parameters-optimize/fig4.png)

## <a name="define-the-metric"></a><span data-ttu-id="6ca28-139">Définir la mesure</span><span class="sxs-lookup"><span data-stu-id="6ca28-139">Define the metric</span></span>
<span data-ttu-id="6ca28-140">Le module [Tune Model Hyperparameters][tune-model-hyperparameters] assure la prise en charge de la sélection empirique du meilleur ensemble de paramètres pour un algorithme et un jeu de données spécifiques.</span><span class="sxs-lookup"><span data-stu-id="6ca28-140">The [Tune Model Hyperparameters][tune-model-hyperparameters] module provides support for empirically choosing the best set of parameters for a given algorithm and dataset.</span></span> <span data-ttu-id="6ca28-141">En plus d’autres informations concernant l’apprentissage du modèle, le volet des **propriétés** de ce module comprend la mesure à utiliser pour déterminer le meilleur ensemble de paramètres.</span><span class="sxs-lookup"><span data-stu-id="6ca28-141">In addition to other information regarding training the model, the **Properties** pane of this module includes the metric for determining the best parameter set.</span></span> <span data-ttu-id="6ca28-142">Il présente deux listes déroulantes différentes pour les algorithmes de classification et de régression, respectivement.</span><span class="sxs-lookup"><span data-stu-id="6ca28-142">It has two different drop-down list boxes for classification and regression algorithms, respectively.</span></span> <span data-ttu-id="6ca28-143">Si l’algorithme en question est un algorithme de classification, la mesure de régression est ignorée, et vice versa.</span><span class="sxs-lookup"><span data-stu-id="6ca28-143">If the algorithm under consideration is a classification algorithm, the regression metric is ignored and vice versa.</span></span> <span data-ttu-id="6ca28-144">Dans cet exemple, la mesure est **Exactitude** .</span><span class="sxs-lookup"><span data-stu-id="6ca28-144">In this specific example, the metric is **Accuracy**.</span></span>   

![Paramètres de balayage](./media/machine-learning-algorithm-parameters-optimize/fig5.png)

## <a name="train-evaluate-and-compare"></a><span data-ttu-id="6ca28-146">Apprentissage, évaluation et comparaison</span><span class="sxs-lookup"><span data-stu-id="6ca28-146">Train, evaluate, and compare</span></span>
<span data-ttu-id="6ca28-147">Le même module [Tune Model Hyperparameters][tune-model-hyperparameters] gère l’apprentissage de tous les modèles correspondant à l’ensemble de paramètres, évalue diverses mesures et crée ensuite le meilleur modèle formé en fonction de la mesure choisie.</span><span class="sxs-lookup"><span data-stu-id="6ca28-147">The same [Tune Model Hyperparameters][tune-model-hyperparameters] module trains all the models that correspond to the parameter set, evaluates various metrics, and then creates the best-trained model based on the metric you choose.</span></span> <span data-ttu-id="6ca28-148">Ce module dispose de deux entrées obligatoires :</span><span class="sxs-lookup"><span data-stu-id="6ca28-148">This module has two mandatory inputs:</span></span>

* <span data-ttu-id="6ca28-149">Apprenant non formé</span><span class="sxs-lookup"><span data-stu-id="6ca28-149">The untrained learner</span></span>
* <span data-ttu-id="6ca28-150">Jeu de données</span><span class="sxs-lookup"><span data-stu-id="6ca28-150">The dataset</span></span>

<span data-ttu-id="6ca28-151">Le module dispose également d’un jeu de données d’entrée facultatif.</span><span class="sxs-lookup"><span data-stu-id="6ca28-151">The module also has an optional dataset input.</span></span> <span data-ttu-id="6ca28-152">Connectez le jeu de données incluant des informations sur les plis au jeu de données en entrée obligatoire.</span><span class="sxs-lookup"><span data-stu-id="6ca28-152">Connect the dataset with fold information to the mandatory dataset input.</span></span> <span data-ttu-id="6ca28-153">Si le jeu de données n’est associé à aucune information sur les plis, une validation croisée de 10 plis est exécutée automatiquement, par défaut.</span><span class="sxs-lookup"><span data-stu-id="6ca28-153">If the dataset is not assigned any fold information, then a 10-fold cross-validation is automatically executed by default.</span></span> <span data-ttu-id="6ca28-154">Si l’affectation de plis n’est pas effectuée et si un jeu de données de validation est fourni au port de jeu de données facultatif, un mode de test de formation est sélectionné et le premier jeu de données est utilisé pour gérer l’apprentissage du modèle pour chaque combinaison de paramètres.</span><span class="sxs-lookup"><span data-stu-id="6ca28-154">If the fold assignment is not done and a validation dataset is provided at the optional dataset port, then a train-test mode is chosen and the first dataset is used to train the model for each parameter combination.</span></span>

![Classifieur d’arbre de décision optimisé](./media/machine-learning-algorithm-parameters-optimize/fig6a.png)

<span data-ttu-id="6ca28-156">Le modèle est ensuite évalué sur le jeu de données de validation.</span><span class="sxs-lookup"><span data-stu-id="6ca28-156">The model is then evaluated on the validation dataset.</span></span> <span data-ttu-id="6ca28-157">Le port de sortie de gauche du module affiche des mesures différentes comme fonctions des valeurs de paramètres.</span><span class="sxs-lookup"><span data-stu-id="6ca28-157">The left output port of the module shows different metrics as functions of parameter values.</span></span> <span data-ttu-id="6ca28-158">Le port de sortie de droite indique le modèle formé correspondant au modèle le plus performant, en fonction de la mesure choisie (dans ce cas, l’**exactitude**).</span><span class="sxs-lookup"><span data-stu-id="6ca28-158">The right output port gives the trained model that corresponds to the best-performing model according to the chosen metric (**Accuracy** in this case).</span></span>  

![Jeu de données de validation](./media/machine-learning-algorithm-parameters-optimize/fig6b.png)

<span data-ttu-id="6ca28-160">Vous pouvez voir les paramètres exacts choisis en visualisant le port de sortie de droite.</span><span class="sxs-lookup"><span data-stu-id="6ca28-160">You can see the exact parameters chosen by visualizing the right output port.</span></span> <span data-ttu-id="6ca28-161">Ce modèle peut être utilisé lors du calcul de la notation d’un ensemble de test ou dans un service web mis en œuvre après l’enregistrement en tant que modèle formé.</span><span class="sxs-lookup"><span data-stu-id="6ca28-161">This model can be used in scoring a test set or in an operationalized web service after saving as a trained model.</span></span>

<!-- Module References -->
[partition-and-sample]: https://msdn.microsoft.com/library/azure/a8726e34-1b3e-4515-b59a-3e4a475654b8/
[tune-model-hyperparameters]: https://msdn.microsoft.com/library/azure/038d91b6-c2f2-42a1-9215-1f2c20ed1b40/
