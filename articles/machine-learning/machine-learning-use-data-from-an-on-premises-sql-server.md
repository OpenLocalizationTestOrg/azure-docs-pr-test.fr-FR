---
title: Utiliser un serveur SQL Server local dans Azure Machine Learning | Microsoft Docs
description: "Utilisez les données d’une base de données SQL Server locale pour effectuer des analyses avancées avec Azure Machine Learning."
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 08e4610d-02b6-4071-aad7-a2340ad8e2ea
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/13/2017
ms.author: garye;krishnan
ms.openlocfilehash: ec1620be2aaf4339ba9d22540ffb2239d0678b70
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="perform-advanced-analytics-with-azure-machine-learning-using-data-from-an-on-premises-sql-server-database"></a><span data-ttu-id="7fe19-103">Effectuer des analyses avancées avec Azure Machine Learning en utilisant les données d’une base de données SQL Server locale</span><span class="sxs-lookup"><span data-stu-id="7fe19-103">Perform advanced analytics with Azure Machine Learning using data from an on-premises SQL Server database</span></span>

[!INCLUDE [import-data-into-aml-studio-selector](../../includes/machine-learning-import-data-into-aml-studio.md)]

<span data-ttu-id="7fe19-104">Souvent, les entreprises qui travaillent avec des données locales souhaitent tirer parti de l’échelle et de l’agilité du cloud pour leurs charges de travail d’apprentissage automatique.</span><span class="sxs-lookup"><span data-stu-id="7fe19-104">Often enterprises that work with on-premises data would like to take advantage of the scale and agility of the cloud for their machine learning workloads.</span></span> <span data-ttu-id="7fe19-105">Mais elles ne souhaitent pas perturber leurs processus métier et leurs flux de travail actuels en déplaçant leurs données locales vers le cloud.</span><span class="sxs-lookup"><span data-stu-id="7fe19-105">But they don't want to disrupt their current business processes and workflows by moving their on-premises data to the cloud.</span></span> <span data-ttu-id="7fe19-106">Azure Machine Learning prend désormais en charge la lecture de vos données à partir d’une base de données SQL Server locale, puis l’apprentissage et l’évaluation d’un modèle avec ces données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-106">Azure Machine Learning now supports reading your data from an on-premises SQL Server database and then training and scoring a model with this data.</span></span> <span data-ttu-id="7fe19-107">Vous n’avez plus à copier et à synchroniser manuellement les données entre le cloud et votre serveur local.</span><span class="sxs-lookup"><span data-stu-id="7fe19-107">You no longer have to manually copy and sync the data between the cloud and your on-premises server.</span></span> <span data-ttu-id="7fe19-108">Au lieu de cela, le module **Importer des données** dans Azure Machine Learning Studio peut maintenant lire directement dans votre base de données SQL Server locale pour vos travaux d’apprentissage et d’évaluation.</span><span class="sxs-lookup"><span data-stu-id="7fe19-108">Instead, the **Import Data** module in Azure Machine Learning Studio can now read directly from your on-premises SQL Server database for your training and scoring jobs.</span></span>

<span data-ttu-id="7fe19-109">Cet article fournit une vue d’ensemble de l’intégration de données SQL Server locales dans Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="7fe19-109">This article provides an overview of how to ingress on-premises SQL server data into Azure Machine Learning.</span></span> <span data-ttu-id="7fe19-110">Il part du principe que vous êtes familiarisé avec les concepts d’Azure Machine Learning, comme les espaces de travail, les modules, les jeux de données, les expériences, *etc*.</span><span class="sxs-lookup"><span data-stu-id="7fe19-110">It assumes that you're familiar with Azure Machine Learning concepts like workspaces, modules, datasets, experiments, *etc.*.</span></span>

> [!NOTE]
> <span data-ttu-id="7fe19-111">Cette fonctionnalité n’est pas disponible pour les espaces de travail gratuits.</span><span class="sxs-lookup"><span data-stu-id="7fe19-111">This feature is not available for free workspaces.</span></span> <span data-ttu-id="7fe19-112">Pour plus d’informations sur la tarification et les niveaux de Machine Learning, consultez la [Tarification d’Azure Machine Learning](https://azure.microsoft.com/pricing/details/machine-learning/).</span><span class="sxs-lookup"><span data-stu-id="7fe19-112">For more information about Machine Learning pricing and tiers, see [Azure Machine Learning Pricing](https://azure.microsoft.com/pricing/details/machine-learning/).</span></span>
>
>

<!-- -->

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="install-the-microsoft-data-management-gateway"></a><span data-ttu-id="7fe19-113">Installer la passerelle de gestion des données de Microsoft</span><span class="sxs-lookup"><span data-stu-id="7fe19-113">Install the Microsoft Data Management Gateway</span></span>
<span data-ttu-id="7fe19-114">Pour accéder à une base de données SQL Server locale dans Azure Machine Learning, vous devez télécharger et installer la passerelle de gestion des données de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="7fe19-114">To access an on-premises SQL Server database in Azure Machine Learning, you need to download and install the Microsoft Data Management Gateway.</span></span> <span data-ttu-id="7fe19-115">Quand vous configurez la connexion de passerelle dans Machine Learning Studio, vous avez la possibilité de télécharger et d’installer la passerelle à l’aide de la boîte de dialogue **Télécharger et inscrire la passerelle de données** décrite ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="7fe19-115">When you configure the gateway connection in Machine Learning Studio, you have the opportunity to download and install the gateway using the **Download and register data gateway** dialog described below.</span></span>

<span data-ttu-id="7fe19-116">Vous pouvez également installer la passerelle de gestion des données à l’avance en téléchargeant et en exécutant le package d’installation MSI dans le [Centre de téléchargement Microsoft](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="7fe19-116">You also can install the Data Management Gateway ahead of time by downloading and running the MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>
<span data-ttu-id="7fe19-117">Choisissez la version la plus récente, en sélectionnant 32 bits ou 64 bits en fonction de votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7fe19-117">Choose the latest version, selecting either 32-bit or 64-bit as appropriate for your computer.</span></span> <span data-ttu-id="7fe19-118">Le fichier MSI peut également servir à mettre à niveau une passerelle de gestion des données existante vers la version la plus récente, en conservant tous les paramètres.</span><span class="sxs-lookup"><span data-stu-id="7fe19-118">The MSI can also be used to upgrade an existing Data Management Gateway to the latest version, with all settings preserved.</span></span>

<span data-ttu-id="7fe19-119">La passerelle nécessite les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="7fe19-119">The gateway has the following prerequisites:</span></span>

* <span data-ttu-id="7fe19-120">Les versions de système d’exploitation Windows prises en charge sont les suivantes : Windows 7, Windows 8/8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012 et Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="7fe19-120">The supported Windows operating system versions are Windows 7, Windows 8/8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012, and Windows Server 2012 R2.</span></span>
* <span data-ttu-id="7fe19-121">La configuration recommandée pour l’ordinateur de passerelle est la suivante : au moins 2 GHz, 4 cœurs, 8 Go de RAM et 80 Go d’espace disque.</span><span class="sxs-lookup"><span data-stu-id="7fe19-121">The recommended configuration for the gateway machine is at least 2 GHz, 4 cores, 8GB RAM, and 80GB disk.</span></span>
* <span data-ttu-id="7fe19-122">Si l’ordinateur hôte est en veille prolongée, la passerelle ne répond pas aux demandes de données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-122">If the host machine hibernates, the gateway won’t respond to data requests.</span></span> <span data-ttu-id="7fe19-123">Vous devez donc configurer un plan de gestion de l'alimentation approprié sur l'ordinateur avant d'installer la passerelle.</span><span class="sxs-lookup"><span data-stu-id="7fe19-123">Therefore, configure an appropriate power plan on the computer before installing the gateway.</span></span> <span data-ttu-id="7fe19-124">Si l’ordinateur est configuré pour se mettre en veille prolongée, l’installation de la passerelle affiche un message.</span><span class="sxs-lookup"><span data-stu-id="7fe19-124">If the machine is configured to hibernate, the gateway installation displays a message.</span></span>
* <span data-ttu-id="7fe19-125">Étant donné que l’activité de copie se déroule selon une fréquence spécifique, l’utilisation des ressources (processeur, mémoire) sur l’ordinateur suit également le même modèle avec des périodes de pointe et d’inactivité.</span><span class="sxs-lookup"><span data-stu-id="7fe19-125">Because copy activity occurs at a specific frequency, the resource usage (CPU, memory) on the machine also follows the same pattern with peak and idle times.</span></span> <span data-ttu-id="7fe19-126">L'utilisation des ressources dépend également en grande partie de la quantité de données déplacées.</span><span class="sxs-lookup"><span data-stu-id="7fe19-126">Resource utilization also depends heavily on the amount of data being moved.</span></span> <span data-ttu-id="7fe19-127">Quand plusieurs travaux de copie sont en cours, vous constaterez une augmentation des ressources utilisées pendant les heures de pointe.</span><span class="sxs-lookup"><span data-stu-id="7fe19-127">When multiple copy jobs are in progress, you'll observe resource usage go up during peak times.</span></span> <span data-ttu-id="7fe19-128">Si la configuration minimale listée ci-dessus est techniquement suffisante, vous pouvez choisir d’avoir une configuration avec plus de ressources que la configuration minimale en fonction de votre charge spécifique pour le déplacement des données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-128">While the minimum configuration listed above is technically sufficient, you may want to have a configuration with more resources than the minimum configuration depending on your specific load for data movement.</span></span>

<span data-ttu-id="7fe19-129">Prenez en compte ce qui suit lors de la configuration et de l’utilisation d’une passerelle de gestion des données :</span><span class="sxs-lookup"><span data-stu-id="7fe19-129">Consider the following when setting up and using a Data Management Gateway:</span></span>

* <span data-ttu-id="7fe19-130">Vous ne pouvez installer qu’une seule instance de la passerelle de gestion des données sur un même ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7fe19-130">You can install only one instance of Data Management Gateway on a single computer.</span></span>
* <span data-ttu-id="7fe19-131">Vous pouvez utiliser une seule passerelle pour plusieurs sources de données locales.</span><span class="sxs-lookup"><span data-stu-id="7fe19-131">You can use a single gateway for multiple on-premises data sources.</span></span>
* <span data-ttu-id="7fe19-132">Vous pouvez connecter plusieurs passerelles sur différents ordinateurs à la même source de données locale.</span><span class="sxs-lookup"><span data-stu-id="7fe19-132">You can connect multiple gateways on different computers to the same on-premises data source.</span></span>
* <span data-ttu-id="7fe19-133">Vous ne configurez une passerelle que pour un seul espace de travail à la fois.</span><span class="sxs-lookup"><span data-stu-id="7fe19-133">You configure a gateway for only one workspace at a time.</span></span> <span data-ttu-id="7fe19-134">Pour le moment, les passerelles ne peuvent pas être partagées entre plusieurs espaces de travail.</span><span class="sxs-lookup"><span data-stu-id="7fe19-134">Currently, gateways can’t be shared across workspaces.</span></span>
* <span data-ttu-id="7fe19-135">Vous pouvez configurer plusieurs passerelles pour un espace de travail unique.</span><span class="sxs-lookup"><span data-stu-id="7fe19-135">You can configure multiple gateways for a single workspace.</span></span> <span data-ttu-id="7fe19-136">Par exemple, vous pouvez choisir d’utiliser une passerelle connectée à vos sources de données de test lors du développement et une passerelle de production lorsque vous êtes prêt pour l’opérationnalisation.</span><span class="sxs-lookup"><span data-stu-id="7fe19-136">For example, you may want to use a gateway that's connected to your test data sources during development and a production gateway when you're ready to operationalize.</span></span>
* <span data-ttu-id="7fe19-137">La passerelle n’a pas besoin d’être sur le même ordinateur que la source de données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-137">The gateway does not need to be on the same machine as the data source.</span></span> <span data-ttu-id="7fe19-138">Toutefois, le fait d’avoir une passerelle plus proche de la source de données réduit le temps de connexion de la passerelle à la source de données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-138">But staying closer to the data source reduces the time for the gateway to connect to the data source.</span></span> <span data-ttu-id="7fe19-139">Nous vous recommandons d’installer la passerelle sur un ordinateur différent de celui qui héberge la source de données locale, afin que la passerelle et la source de données ne soient pas en concurrence pour l’attribution de ressources.</span><span class="sxs-lookup"><span data-stu-id="7fe19-139">We recommend that you install the gateway on a machine that's different from the one that hosts the on-premises data source so that the gateway and data source don't compete for resources.</span></span>
* <span data-ttu-id="7fe19-140">Si une passerelle est déjà installée sur votre ordinateur desservant des scénarios Power BI ou Azure Data Factory, installez une passerelle distincte pour Azure Machine Learning sur un autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7fe19-140">If you already have a gateway installed on your computer serving Power BI or Azure Data Factory scenarios, install a separate gateway for Azure Machine Learning on another computer.</span></span>

  > [!NOTE]
  > <span data-ttu-id="7fe19-141">Vous ne pouvez pas exécuter la passerelle de gestion des données et la passerelle Power BI sur le même ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7fe19-141">You can't run Data Management Gateway and Power BI Gateway on the same computer.</span></span>
  >
  >
* <span data-ttu-id="7fe19-142">Vous devez utiliser la passerelle de gestion des données pour Azure Machine Learning, même si vous utilisez Azure ExpressRoute pour d’autres données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-142">You need to use the Data Management Gateway for Azure Machine Learning even if you are using Azure ExpressRoute for other data.</span></span> <span data-ttu-id="7fe19-143">Traitez votre source de données comme une source de données locale (derrière un pare-feu), même quand vous utilisez ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="7fe19-143">You should treat your data source as an on-premises data source (that's behind a firewall) even when you use ExpressRoute.</span></span> <span data-ttu-id="7fe19-144">Utilisez la passerelle de gestion des données pour établir la connectivité entre Machine Learning et la source de données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-144">Use the Data Management Gateway to establish connectivity between Machine Learning and the data source.</span></span>

<span data-ttu-id="7fe19-145">Vous trouverez des informations détaillées sur les prérequis pour l’installation, des étapes d’installation et des conseils de dépannage dans l’article [Passerelle de gestion des données](../data-factory/data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="7fe19-145">You can find detailed information on installation prerequisites, installation steps, and troubleshooting tips in the article [Data Management Gateway](../data-factory/data-factory-data-management-gateway.md).</span></span>

## <a name="span-idusing-the-data-gateway-step-by-step-walk-classanchorspan-idtoc450838866-classanchorspanspaningress-data-from-your-on-premises-sql-server-database-into-azure-machine-learning"></a><span data-ttu-id="7fe19-146"><span id="using-the-data-gateway-step-by-step-walk" class="anchor"><span id="_Toc450838866" class="anchor"></span></span>Intégrer des données de votre base de données SQL Server locale dans Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="7fe19-146"><span id="using-the-data-gateway-step-by-step-walk" class="anchor"><span id="_Toc450838866" class="anchor"></span></span>Ingress data from your on-premises SQL Server database into Azure Machine Learning</span></span>
<span data-ttu-id="7fe19-147">Dans cette procédure pas à pas, vous allez configurer une passerelle de gestion des données dans un espace de travail Azure Machine Learning, la configurer, puis lire les données à partir d’une base de données SQL Server locale.</span><span class="sxs-lookup"><span data-stu-id="7fe19-147">In this walkthrough, you will set up a Data Management Gateway in an Azure Machine Learning workspace, configure it, and then read data from an on-premises SQL Server database.</span></span>

> [!TIP]
> <span data-ttu-id="7fe19-148">Avant de commencer, désactivez le bloqueur de fenêtres publicitaires de votre navigateur pour `studio.azureml.net`.</span><span class="sxs-lookup"><span data-stu-id="7fe19-148">Before you start, disable your browser’s pop-up blocker for `studio.azureml.net`.</span></span> <span data-ttu-id="7fe19-149">Si vous utilisez le navigateur Google Chrome, téléchargez et installez l’un des modules disponibles sur le WebStore de Google Chrome [Extension de l’application Click Once](https://chrome.google.com/webstore/search/clickonce?_category=extensions).</span><span class="sxs-lookup"><span data-stu-id="7fe19-149">If you're using the Google Chrome browser, download and install one of the several plug-ins available at Google Chrome WebStore [Click Once App Extension](https://chrome.google.com/webstore/search/clickonce?_category=extensions).</span></span>
>
>

### <a name="step-1-create-a-gateway"></a><span data-ttu-id="7fe19-150">Étape 1 : Créer une passerelle</span><span class="sxs-lookup"><span data-stu-id="7fe19-150">Step 1: Create a gateway</span></span>
<span data-ttu-id="7fe19-151">La première étape consiste à créer et à configurer la passerelle pour accéder à votre base de données SQL locale.</span><span class="sxs-lookup"><span data-stu-id="7fe19-151">The first step is to create and set up the gateway to access your on-premises SQL database.</span></span>

1. <span data-ttu-id="7fe19-152">Connectez-vous à [Azure Machine Learning Studio](https://studio.azureml.net/Home/) et sélectionnez l’espace de travail dans lequel vous souhaitez travailler.</span><span class="sxs-lookup"><span data-stu-id="7fe19-152">Log in to [Azure Machine Learning  Studio](https://studio.azureml.net/Home/) and select the workspace  that you want to work in.</span></span>
2. <span data-ttu-id="7fe19-153">Cliquez sur le panneau **PARAMÈTRES** sur la gauche, puis cliquez sur l’onglet **PASSERELLES DE DONNÉES** en haut.</span><span class="sxs-lookup"><span data-stu-id="7fe19-153">Click the **SETTINGS** blade on the left, and then click the **DATA  GATEWAYS** tab at the top.</span></span>
3. <span data-ttu-id="7fe19-154">Cliquez sur **NOUVELLE PASSERELLE DE DONNÉES** en bas de l’écran.</span><span class="sxs-lookup"><span data-stu-id="7fe19-154">Click **NEW DATA GATEWAY** at the bottom of the screen.</span></span>

    ![Nouvelle passerelle de données](media/machine-learning-use-data-from-an-on-premises-sql-server/new-data-gateway-button.png)
4. <span data-ttu-id="7fe19-156">Dans la boîte de dialogue **Nouvelle passerelle de données**, entrez le **Nom de la passerelle** et ajoutez éventuellement une **Description**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-156">In the **New data gateway** dialog, enter the **Gateway Name** and optionally add a **Description**.</span></span> <span data-ttu-id="7fe19-157">Cliquez sur la flèche située dans l’angle inférieur droit pour accéder à l’étape suivante de la configuration.</span><span class="sxs-lookup"><span data-stu-id="7fe19-157">Click the arrow on the bottom right-hand corner to go to the next step of the configuration.</span></span>

    ![Entrez la description et le nom de la passerelle](media/machine-learning-use-data-from-an-on-premises-sql-server/new-data-gateway-dialog-enter-name.png)
5. <span data-ttu-id="7fe19-159">Dans la boîte de dialogue Télécharger et inscrire une passerelle de données, copiez la CLÉ D’INSCRIPTION DE LA PASSERELLE dans le presse-papiers.</span><span class="sxs-lookup"><span data-stu-id="7fe19-159">In the Download and register data gateway dialog, copy the GATEWAY  REGISTRATION KEY to the clipboard.</span></span>

    ![Téléchargez et enregistrez la passerelle de données](media/machine-learning-use-data-from-an-on-premises-sql-server/download-and-register-data-gateway.png)
6. <span data-ttu-id="7fe19-161"><span id="note-1" class="anchor"></span>Si vous n’avez pas encore téléchargé et installé la passerelle de gestion des données de Microsoft, cliquez sur **Télécharger la passerelle de gestion des données**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-161"><span id="note-1" class="anchor"></span>If you have not yet downloaded and installed the Microsoft Data Management Gateway, then click **Download data management gateway**.</span></span> <span data-ttu-id="7fe19-162">Vous accéderez au Centre de téléchargement Microsoft, où vous pourrez sélectionner la version de la passerelle dont vous avez besoin, la télécharger et l’installer.</span><span class="sxs-lookup"><span data-stu-id="7fe19-162">This takes you to the Microsoft Download Center where you can select the gateway version you need, download it, and install it.</span></span> <span data-ttu-id="7fe19-163">Vous trouverez des informations détaillées sur les conditions préalables à l’installation, des étapes d’installation et des conseils de dépannage dans les sections du début de l’article [Déplacer des données entre des sources locales et le cloud à l’aide de la passerelle de gestion des données](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span><span class="sxs-lookup"><span data-stu-id="7fe19-163">You can find detailed information on installation prerequisites, installation steps, and troubleshooting tips in the beginning sections of the article [Move data between on-premises sources and cloud with Data Management Gateway](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span></span>
7. <span data-ttu-id="7fe19-164">Une fois la passerelle installée, le Gestionnaire de configuration de la passerelle de gestion des données s’ouvre et la boîte de dialogue **Inscrire la passerelle** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="7fe19-164">After the gateway is installed, the Data Management Gateway Configuration Manager will open and the **Register gateway** dialog is displayed.</span></span> <span data-ttu-id="7fe19-165">Collez la **Clé d’inscription de la passerelle** que vous avez copiée dans le presse-papiers et cliquez sur **Inscrire**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-165">Paste the **Gateway Registration Key** that you copied to the clipboard and click **Register**.</span></span>
8. <span data-ttu-id="7fe19-166">Si vous avez déjà installé une passerelle, exécutez le Gestionnaire de configuration de la passerelle de gestion des données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-166">If you already have a gateway installed, run the Data Management Gateway Configuration Manager.</span></span> <span data-ttu-id="7fe19-167">Cliquez sur **Modifier la clé**, collez la **Clé d’inscription de la passerelle** que vous avez copiée dans le Presse-papiers à l’étape précédente, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-167">Click **Change key**, paste the **Gateway Registration Key** that you copied to the clipboard in the previous step, and click **OK**.</span></span>
9. <span data-ttu-id="7fe19-168">Une fois l’installation terminée, la boîte de dialogue **Inscrire la passerelle** du Gestionnaire de configuration de la passerelle de gestion des données de Microsoft s’affiche.</span><span class="sxs-lookup"><span data-stu-id="7fe19-168">When the installation is complete, the **Register gateway** dialog for Microsoft Data Management Gateway Configuration Manager is displayed.</span></span> <span data-ttu-id="7fe19-169">Collez la CLÉ D’INSCRIPTION DE LA PASSERELLE que vous avez copiée dans le Presse-papiers lors d’une étape précédente et cliquez sur **Inscrire**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-169">Paste the GATEWAY REGISTRATION KEY that you copied to the clipboard in a previous step and click **Register**.</span></span>

    ![Inscrivez la passerelle](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-register-gateway.png)
10. <span data-ttu-id="7fe19-171">La configuration de la passerelle est terminée lorsque les valeurs suivantes sont définies sur l’onglet **Accueil** dans le Gestionnaire de configuration de la passerelle de gestion des données de Microsoft :</span><span class="sxs-lookup"><span data-stu-id="7fe19-171">The gateway configuration is complete when the following values are set on the **Home** tab in Microsoft Data Management Gateway Configuration Manager:</span></span>

    * <span data-ttu-id="7fe19-172">**Nom de la passerelle** et **Nom de l’instance** sont définis sur le nom de la passerelle.</span><span class="sxs-lookup"><span data-stu-id="7fe19-172">**Gateway name** and **Instance name** are set to the name of   the gateway.</span></span>
    * <span data-ttu-id="7fe19-173">**Inscription** est défini sur **Inscrit**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-173">**Registration** is set to **Registered**.</span></span>
    * <span data-ttu-id="7fe19-174">**État** est défini sur **Démarré**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-174">**Status** is set to **Started**.</span></span>
    * <span data-ttu-id="7fe19-175">La barre d’état située au bas de l’écran affiche le message **Connecté au service cloud de la passerelle de gestion des données** accompagné d’une coche verte.</span><span class="sxs-lookup"><span data-stu-id="7fe19-175">The status bar at the bottom displays **Connected to Data   Management Gateway Cloud Service** along with a green   check mark.</span></span>

      ![Gestionnaire de passerelle de gestion de données](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-registered.png)

      <span data-ttu-id="7fe19-177">Azure Machine Learning Studio se met également à jour lorsque l’inscription réussit.</span><span class="sxs-lookup"><span data-stu-id="7fe19-177">Azure Machine Learning Studio also gets updated when the registration is successful.</span></span>

    ![Inscription de la passerelle réussie](media/machine-learning-use-data-from-an-on-premises-sql-server/gateway-registered.png)
11. <span data-ttu-id="7fe19-179">Dans la boîte de dialogue **Télécharger et inscrire la passerelle de données** , cliquez sur la coche pour terminer l’installation.</span><span class="sxs-lookup"><span data-stu-id="7fe19-179">In the **Download and register data gateway** dialog, click the check mark to complete the setup.</span></span> <span data-ttu-id="7fe19-180">La page **Paramètres** affiche l’état « En ligne » pour la passerelle.</span><span class="sxs-lookup"><span data-stu-id="7fe19-180">The **Settings** page displays the gateway status as "Online".</span></span> <span data-ttu-id="7fe19-181">Dans le volet de droite, vous trouverez l’état et d’autres informations utiles.</span><span class="sxs-lookup"><span data-stu-id="7fe19-181">In the right-hand pane, you'll find status and other useful information.</span></span>

    ![Paramètres de la passerelle](media/machine-learning-use-data-from-an-on-premises-sql-server/gateway-status.png)
12. <span data-ttu-id="7fe19-183">Dans le Gestionnaire de configuration de la passerelle de gestion des données de Microsoft, basculez vers l’onglet **Certificat** .</span><span class="sxs-lookup"><span data-stu-id="7fe19-183">In the Microsoft Data Management Gateway Configuration Manager switch to the **Certificate** tab.</span></span> <span data-ttu-id="7fe19-184">Le certificat spécifié dans cet onglet sert à chiffrer/déchiffrer les informations d’identification pour le magasin de données local que vous spécifiez dans le portail.</span><span class="sxs-lookup"><span data-stu-id="7fe19-184">The certificate specified on this tab is used to encrypt/decrypt credentials for the on-premises data store that you specify in the portal.</span></span> <span data-ttu-id="7fe19-185">Il s’agit du certificat par défaut.</span><span class="sxs-lookup"><span data-stu-id="7fe19-185">This certificate is the default certificate.</span></span> <span data-ttu-id="7fe19-186">Microsoft recommande de le modifier pour spécifier votre propre certificat, que vous sauvegardez dans votre système de gestion des certificats.</span><span class="sxs-lookup"><span data-stu-id="7fe19-186">Microsoft recommends changing this to your own certificate that you back up in your certificate management system.</span></span> <span data-ttu-id="7fe19-187">Cliquez sur **Modifier** pour utiliser votre propre certificat à la place.</span><span class="sxs-lookup"><span data-stu-id="7fe19-187">Click **Change** to use your own certificate instead.</span></span>

    ![Changez le certificat de la passerelle](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-certificate.png)
13. <span data-ttu-id="7fe19-189">(Facultatif) Si vous souhaitez activer la journalisation détaillée pour résoudre les problèmes de passerelle, dans le Gestionnaire de configuration de la passerelle de gestion des données de Microsoft, basculez sur l’onglet **Diagnostics** et cochez l’option **Activer la journalisation détaillée pour résoudre des problèmes**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-189">(optional) If you want to enable verbose logging in order to troubleshoot issues with the gateway, in the Microsoft Data Management Gateway Configuration Manager switch to the **Diagnostics** tab and check the **Enable verbose logging for troubleshooting purposes** option.</span></span> <span data-ttu-id="7fe19-190">Vous trouverez les informations de journalisation dans l’Observateur d’événements Windows sous le nœud **Journaux des applications et des services** -&gt; **Passerelle de gestion des données**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-190">The logging information can be found in the Windows Event Viewer under the **Applications and Services Logs** -&gt; **Data Management Gateway** node.</span></span> <span data-ttu-id="7fe19-191">Vous pouvez également utiliser l’onglet **Diagnostics** pour tester la connexion à une source de données locale à l’aide de la passerelle.</span><span class="sxs-lookup"><span data-stu-id="7fe19-191">You can also use the **Diagnostics** tab to test the connection to an on-premises data source using the gateway.</span></span>

    ![Activez la journalisation commentée](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-verbose-logging.png)

<span data-ttu-id="7fe19-193">Le processus de configuration de la passerelle dans Azure Machine Learning est terminé.</span><span class="sxs-lookup"><span data-stu-id="7fe19-193">This completes the gateway setup process in Azure Machine Learning.</span></span>
<span data-ttu-id="7fe19-194">Vous êtes maintenant prêt à utiliser vos données locales.</span><span class="sxs-lookup"><span data-stu-id="7fe19-194">You're now ready to use your on-premises data.</span></span>

<span data-ttu-id="7fe19-195">Vous pouvez créer et configurer plusieurs passerelles dans Studio pour chaque espace de travail.</span><span class="sxs-lookup"><span data-stu-id="7fe19-195">You can create and set up multiple gateways in Studio for each workspace.</span></span> <span data-ttu-id="7fe19-196">Par exemple, vous pouvez avoir une passerelle que vous souhaitez connecter à vos sources de données de test pendant le développement et une passerelle distincte pour vos sources de données en production.</span><span class="sxs-lookup"><span data-stu-id="7fe19-196">For example, you may have a gateway that you want to connect to your test data sources during development, and a different gateway for your production data sources.</span></span> <span data-ttu-id="7fe19-197">Azure Machine Learning vous donne la possibilité de configurer plusieurs passerelles en fonction de votre environnement d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="7fe19-197">Azure Machine Learning gives you the flexibility to set up multiple gateways depending upon your corporate environment.</span></span> <span data-ttu-id="7fe19-198">Actuellement, vous ne pouvez pas partager une passerelle entre différents espaces de travail et une seule passerelle peut être installée sur un même ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7fe19-198">Currently you can’t share a gateway between workspaces and only one gateway can be installed on a single computer.</span></span> <span data-ttu-id="7fe19-199">Pour plus d’informations, consultez [Déplacement de données entre des sources locales et le cloud à l’aide de la passerelle de gestion des données](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span><span class="sxs-lookup"><span data-stu-id="7fe19-199">For more information, see [Move data between on-premises sources and cloud with Data Management Gateway](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span></span>

### <a name="step-2-use-the-gateway-to-read-data-from-an-on-premises-data-source"></a><span data-ttu-id="7fe19-200">Étape 2 : Utiliser la passerelle pour lire des données à partir d’une source de données locale</span><span class="sxs-lookup"><span data-stu-id="7fe19-200">Step 2: Use the gateway to read data from an on-premises data source</span></span>
<span data-ttu-id="7fe19-201">Après avoir configuré la passerelle, vous pouvez ajouter un module **Importer des données** à une expérience qui prend en entrée les données de la base de données SQL Server locale.</span><span class="sxs-lookup"><span data-stu-id="7fe19-201">After you set up the gateway, you can add an **Import Data** module to an experiment that inputs the data from the on-premises SQL Server database.</span></span>

1. <span data-ttu-id="7fe19-202">Dans Machine Learning Studio, sélectionnez l’onglet **EXPÉRIENCES** cliquez sur **+NOUVELLE** dans le coin inférieur gauche, puis sélectionnez **Expérience vide** (ou sélectionnez l’un des exemples d’expérimentations disponibles).</span><span class="sxs-lookup"><span data-stu-id="7fe19-202">In Machine Learning Studio, select the **EXPERIMENTS** tab, click **+NEW** in the lower-left corner, and select **Blank Experiment** (or select one of several sample experiments available).</span></span>
2. <span data-ttu-id="7fe19-203">Recherchez et faites glisser le module **Importer des données** jusqu’à la zone de dessin de l’expérience.</span><span class="sxs-lookup"><span data-stu-id="7fe19-203">Find and drag the **Import Data** module to the experiment canvas.</span></span>
3. <span data-ttu-id="7fe19-204">Cliquez sur **Enregistrer sous** sous le canevas.</span><span class="sxs-lookup"><span data-stu-id="7fe19-204">Click **Save as** below the canvas.</span></span> <span data-ttu-id="7fe19-205">Entrez « Didacticiel SQL Server local Azure Machine Learning » comme nom de l’expérience, sélectionnez l’espace de travail, puis cochez la case **OK** .</span><span class="sxs-lookup"><span data-stu-id="7fe19-205">Enter "Azure Machine Learning On-Premises SQL Server Tutorial" for the experiment name, select the workspace, and click the **OK** check mark.</span></span>

   ![Enregistrez l’expérience sous un nouveau nom](media/machine-learning-use-data-from-an-on-premises-sql-server/experiment-save-as.png)
4. <span data-ttu-id="7fe19-207">Cliquez sur le module **Importer des données** pour le sélectionner puis, dans le volet **Propriétés** à droite de la zone de dessin, sélectionnez « Base de données SQL locale » dans la liste déroulante **Source de données**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-207">Click the **Import Data** module to select it, then in the **Properties** pane to the right of the canvas, select "On-Premises SQL Database" in the **Data source** dropdown list.</span></span>
5. <span data-ttu-id="7fe19-208">Sélectionnez la **Passerelle de données** que vous avez installée et inscrite.</span><span class="sxs-lookup"><span data-stu-id="7fe19-208">Select the **Data gateway** you installed and registered.</span></span> <span data-ttu-id="7fe19-209">Vous pouvez configurer une autre passerelle en sélectionnant « (ajouter une nouvelle passerelle de données...) ».</span><span class="sxs-lookup"><span data-stu-id="7fe19-209">You can set up another gateway by selecting "(add new Data Gateway…)".</span></span>

   ![Sélectionnez une passerelle de données pour le module d’importation de données](media/machine-learning-use-data-from-an-on-premises-sql-server/import-data-select-on-premises-data-source.png)
6. <span data-ttu-id="7fe19-211">Entrez le **Nom du serveur de base de données** et le **Nom de la base de données** SQL, ainsi que la **Requête de base de données** SQL que vous souhaitez exécuter.</span><span class="sxs-lookup"><span data-stu-id="7fe19-211">Enter the SQL **Database server name** and **Database name**, along with the SQL **Database query** you want to execute.</span></span>
7. <span data-ttu-id="7fe19-212">Cliquez sur **Entrer des valeurs** sous **Nom d’utilisateur et mot de passe** et entrez vos informations d’identification de base de données.</span><span class="sxs-lookup"><span data-stu-id="7fe19-212">Click **Enter values** under **User name and password** and enter your database credentials.</span></span> <span data-ttu-id="7fe19-213">Vous pouvez utiliser l’authentification intégrée Windows ou l’authentification SQL Server en fonction de la configuration de votre serveur local SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7fe19-213">You can use Windows Integrated Authentication or SQL Server Authentication depending upon how your on-premises SQL Server is configured.</span></span>

   ![Entrez les informations d’identification de la base de données](media/machine-learning-use-data-from-an-on-premises-sql-server/database-credentials.png)

   <span data-ttu-id="7fe19-215">Le message « valeurs requises » devient « valeurs définies » avec une coche verte.</span><span class="sxs-lookup"><span data-stu-id="7fe19-215">The message "values required" changes to "values set" with a green check mark.</span></span> <span data-ttu-id="7fe19-216">Il vous suffit d’entrer les informations d’identification une seule fois, sauf si les informations de base de données ou de mot de passe changent.</span><span class="sxs-lookup"><span data-stu-id="7fe19-216">You only need to enter the credentials once unless the database information or password changes.</span></span> <span data-ttu-id="7fe19-217">Azure Machine Learning utilise le certificat que vous avez fourni lors de l’installation de la passerelle pour chiffrer les informations d’identification dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="7fe19-217">Azure Machine Learning uses the certificate you provided when you installed the gateway to encrypt the credentials in the cloud.</span></span> <span data-ttu-id="7fe19-218">Azure ne stocke jamais d’informations d’identification locales sans chiffrement.</span><span class="sxs-lookup"><span data-stu-id="7fe19-218">Azure never stores on-premises credentials without encryption.</span></span>

   ![Importez les propriétés du module de données](media/machine-learning-use-data-from-an-on-premises-sql-server/import-data-properties-entered.png)
8. <span data-ttu-id="7fe19-220">Cliquez sur **EXÉCUTER** pour lancer l’expérience.</span><span class="sxs-lookup"><span data-stu-id="7fe19-220">Click **RUN** to run the experiment.</span></span>

<span data-ttu-id="7fe19-221">Une fois l’expérimentation terminée, vous pouvez visualiser les données que vous avez importées à partir de la base de données en cliquant sur le port de sortie du module **Importer des données** et en sélectionnant **Visualiser**.</span><span class="sxs-lookup"><span data-stu-id="7fe19-221">Once the experiment finishes running, you can visualize the data you imported from the database by clicking the output port of the **Import Data** module and selecting **Visualize**.</span></span>

<span data-ttu-id="7fe19-222">Une fois que vous avez terminé le développement de votre expérience, vous pouvez déployer et opérationnaliser votre modèle.</span><span class="sxs-lookup"><span data-stu-id="7fe19-222">Once you finish developing your experiment, you can deploy and operationalize your model.</span></span> <span data-ttu-id="7fe19-223">Grâce au service d’exécution de lots, les données de la base de données SQL Server locale configurées dans le module **Importer des données** seront lues et utilisées pour l’évaluation.</span><span class="sxs-lookup"><span data-stu-id="7fe19-223">Using the Batch Execution Service, data from the on-premises SQL Server database configured in the **Import Data** module will be read and used for scoring.</span></span> <span data-ttu-id="7fe19-224">Vous pouvez utiliser le service de réponse aux demandes pour l’évaluation des données locales, mais Microsoft recommande d’utiliser plutôt le [complément Excel](machine-learning-excel-add-in-for-web-services.md) .</span><span class="sxs-lookup"><span data-stu-id="7fe19-224">While you can use the Request Response Service for scoring on-premises data, Microsoft recommends using the [Excel Add-in](machine-learning-excel-add-in-for-web-services.md) instead.</span></span> <span data-ttu-id="7fe19-225">Actuellement, l’écriture dans une base de données SQL Server locale avec **Exporter des données** n’est pas prise en charge dans vos expériences ou dans les services web publiés.</span><span class="sxs-lookup"><span data-stu-id="7fe19-225">Currently, writing to an on-premises SQL Server database through **Export Data** is not supported either in your experiments or published web services.</span></span>
