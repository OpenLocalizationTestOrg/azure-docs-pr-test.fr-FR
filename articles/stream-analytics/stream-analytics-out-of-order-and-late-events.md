---
title: "aaaHandling ordre des événements et lateness avec Analytique de flux de données Azure | Documents Microsoft"
description: "Découvrez le fonctionnement de Stream Analytics avec des événements en retard ou en désordre dans les flux de données."
keywords: "Événements en désordre, en retard"
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 87c028662fbafbf4f72f57f215d017f65bb649f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-stream-analytics-event-order-handling"></a><span data-ttu-id="2e0bc-104">Traitement de l’ordre des événements Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2e0bc-104">Azure Stream Analytics event order handling</span></span>

<span data-ttu-id="2e0bc-105">Dans un flux de données temporelles des événements, chaque événement est enregistré avec le temps hello cet événement hello est reçu.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-105">In a temporal data stream of events, each event is recorded with hello time that hello event is received.</span></span> <span data-ttu-id="2e0bc-106">Certaines conditions peuvent provoquer des flux d’événements toooccasionally recevoir certains événements dans un ordre différent, au-delà de laquelle ils ont été envoyés.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-106">Some conditions might cause event streams toooccasionally receive some events in a different order than which they were sent.</span></span> <span data-ttu-id="2e0bc-107">Un simple TCP retransmettre, ou même un décalage horaire entre hello envoi hello réception concentrateur d’événements et des appareils susceptibles de provoquer cette toooccur.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-107">A simple TCP retransmit, or even a clock skew between hello sending device and hello receiving event hub might cause this toooccur.</span></span> <span data-ttu-id="2e0bc-108">Les événements « Ponctuation » sont ajoutés les flux d’événements tooreceived, heure de hello tooadvance en absence de hello d’arrivée des événements.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-108">“Punctuation” events also are added tooreceived event streams, tooadvance hello time in hello absence of event arrivals.</span></span> <span data-ttu-id="2e0bc-109">Ils sont nécessaires dans des scénarios tels que « M’informer lorsque aucune connexion ne se produit pendant 3 minutes ».</span><span class="sxs-lookup"><span data-stu-id="2e0bc-109">These are needed in scenarios like “Notify me when no logins occur for 3 minutes."</span></span>

<span data-ttu-id="2e0bc-110">Les flux d’entrée qui ne sont pas dans l’ordre sont :</span><span class="sxs-lookup"><span data-stu-id="2e0bc-110">Input streams that are not in order are either:</span></span>
* <span data-ttu-id="2e0bc-111">Triés (et par conséquent **retardés**).</span><span class="sxs-lookup"><span data-stu-id="2e0bc-111">Sorted (and therefore **delayed**).</span></span>
* <span data-ttu-id="2e0bc-112">Ajusté par système hello, selon la stratégie de tooa spécifié par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-112">Adjusted by hello system, according tooa user-specified policy.</span></span>


## <a name="lateness-tolerance"></a><span data-ttu-id="2e0bc-113">Tolérance de retard</span><span class="sxs-lookup"><span data-stu-id="2e0bc-113">Lateness tolerance</span></span>
<span data-ttu-id="2e0bc-114">Stream Analytics tolère les types de scénarios suivants.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-114">Stream Analytics tolerates these types of scenarios.</span></span> <span data-ttu-id="2e0bc-115">Le service Stream Analytics dispose d’une gestion des événements « en désordre » et « en retard ».</span><span class="sxs-lookup"><span data-stu-id="2e0bc-115">Stream Analytics has handling for "out-of-order" and "late" events.</span></span> <span data-ttu-id="2e0bc-116">Il gère ces événements Bonjour suivant façons :</span><span class="sxs-lookup"><span data-stu-id="2e0bc-116">It handles these events in hello following ways:</span></span>

* <span data-ttu-id="2e0bc-117">Les événements qui arrivent dans le désordre, mais dans hello définir la tolérance de panne sont **réorganisées par horodatage**.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-117">Events that arrive out of order but within hello set tolerance are **reordered by timestamp**.</span></span>
* <span data-ttu-id="2e0bc-118">Les événements qui arrivent plus tard que la tolérance sont **supprimés ou ajustés**.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-118">Events that arrive later than tolerance are **dropped or adjusted**.</span></span>
    * <span data-ttu-id="2e0bc-119">**Ajustée**: tooappear ajustée toohave est arrivé à hello acceptable heure la plus récente.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-119">**Adjusted**: Adjusted tooappear toohave arrived at hello latest acceptable time.</span></span>
    * <span data-ttu-id="2e0bc-120">**Supprimés** : ignorés.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-120">**Dropped**: Discarded.</span></span>

![Traitement des événements Stream Analytics](media/stream-analytics-event-handling/stream-analytics-event-handling.png)

## <a name="reduce-hello-number-of-out-of-order-events"></a><span data-ttu-id="2e0bc-122">Réduire la quantité, hello pour les événements non ordonnés</span><span class="sxs-lookup"><span data-stu-id="2e0bc-122">Reduce hello number of out-of-order events</span></span>

<span data-ttu-id="2e0bc-123">Comme Stream Analytics applique une transformation temporelle lorsqu’il traite les événements entrants (par exemple, pour les agrégats fenêtrés ou les jointures temporelles), Stream Analytics trie les événements entrants par ordre d’horodatage.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-123">Because Stream Analytics applies a temporal transformation when it processes incoming events (for example, for windowed aggregates or temporal joins), Stream Analytics sorts incoming events by timestamp order.</span></span>

<span data-ttu-id="2e0bc-124">Lorsque le mot clé d’horodatage hello » par » est **pas** utilisé, heure de file d’attente d’événement hello Azure Event Hubs est utilisé par défaut.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-124">When hello “timestamp by” keyword is **not** used, hello Azure Event Hubs event enqueue time is used by default.</span></span> <span data-ttu-id="2e0bc-125">Concentrateurs d’événements garantit unitonicité de timestamp hello sur chaque partition du concentrateur d’événements hello.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-125">Event Hubs guarantees monotonicity of hello timestamp on each partition of hello event hub.</span></span> <span data-ttu-id="2e0bc-126">Il garantit également que les événements de toutes les partitions sont fusionnés dans l’ordre d’horodatage.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-126">It also guarantees that events from all partitions will be merged in timestamp order.</span></span> <span data-ttu-id="2e0bc-127">Ces garanties Event Hubs permettent d’éviter les événement en désordre.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-127">These two Event Hubs guarantees ensure no out-of-order events.</span></span>

<span data-ttu-id="2e0bc-128">Parfois, il est important pour l’horodatage de vous toouse hello l’expéditeur.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-128">Sometimes, it’s important for you toouse hello sender’s timestamp.</span></span> <span data-ttu-id="2e0bc-129">Dans ce cas, un horodatage à partir de la charge utile d’événement hello est choisi à l’aide de « timestamp par ».</span><span class="sxs-lookup"><span data-stu-id="2e0bc-129">In that case, a timestamp from hello event payload is chosen by using “timestamp by.”</span></span> <span data-ttu-id="2e0bc-130">Dans ces scénarios, une ou plusieurs sources du désordre des événements peuvent être introduites :</span><span class="sxs-lookup"><span data-stu-id="2e0bc-130">In these scenarios, one or more sources of event misorder might be introduced:</span></span>

* <span data-ttu-id="2e0bc-131">Les producteurs d’événements ont des décalages d’horloge.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-131">Event producers have clock skews.</span></span> <span data-ttu-id="2e0bc-132">Cela est courant lorsque les producteurs proviennent de différents ordinateurs et qu’ils ont donc des horloges différentes.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-132">This is common when producers are from different computers, so they have different clocks.</span></span>
* <span data-ttu-id="2e0bc-133">Il existe un délai de réseau à partir de la source hello du concentrateur d’événements hello événements toohello destination.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-133">There's a network delay from hello source of hello events toohello destination event hub.</span></span>
* <span data-ttu-id="2e0bc-134">Les décalages d’horloge existent entre les partitions du Event Hub.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-134">Clock skews exist between event hub partitions.</span></span> <span data-ttu-id="2e0bc-135">Stream Analytics trie tout d’abord les événements de toutes les partitions du Event Hub par heure de mise en file d’attente des événements.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-135">Stream Analytics first sorts events from all event hub partitions by event enqueue time.</span></span> <span data-ttu-id="2e0bc-136">Ensuite, il examine les flux de données hello pour les événements dans un ordre incorrect.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-136">Then, it examines hello data stream for misordered events.</span></span>

<span data-ttu-id="2e0bc-137">Sur l’onglet de configuration hello, vous voyez hello suivant par défaut :</span><span class="sxs-lookup"><span data-stu-id="2e0bc-137">On hello configuration tab, you see hello following defaults:</span></span>

![Traitement des événements désordonnés dans Stream Analytics](media/stream-analytics-event-handling/stream-analytics-out-of-order-handling.png)

<span data-ttu-id="2e0bc-139">Si vous utilisez 0 seconde comme hello ordonnés plage de tolérance, vous déclarez que tous les événements sont dans l’ordre toutes les périodes de hello.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-139">If you use 0 seconds as hello out-of-order tolerance window, you are asserting that all events are in order all hello time.</span></span> <span data-ttu-id="2e0bc-140">Sources de hello trois d’événements de dans un ordre incorrect, il est peu probable que cela est vrai.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-140">Given hello three sources of misordered events, it’s unlikely that this is true.</span></span> 

<span data-ttu-id="2e0bc-141">toocorrect du flux de données Analytique tooallow un misorder d’événement, vous pouvez spécifier une plage de tolérance non nulle non ordonnés.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-141">tooallow Stream Analytics toocorrect an event misorder, you can specify a non-zero out-of-order tolerance window.</span></span> <span data-ttu-id="2e0bc-142">Événements de mémoires tampons flux Analytique toothat fenêtre, puis les à l’aide de hello timestamp que vous avez choisi de nouvelles commandes.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-142">Stream Analytics buffers events up toothat window, and then reorders them by using hello timestamp you chose.</span></span> <span data-ttu-id="2e0bc-143">Il applique ensuite la transformation temporelle de hello.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-143">It then applies hello temporal transformation.</span></span> <span data-ttu-id="2e0bc-144">Vous pouvez commencer par une fenêtre de 3 secondes et ajuster hello valeur tooreduce hello nombre d’événements qui sont ajustées à la fois.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-144">You can start with a 3-second window, and tune hello value tooreduce hello number of events that are time-adjusted.</span></span> 

<span data-ttu-id="2e0bc-145">Un effet secondaire de la mise en mémoire tampon hello est sortie de hello **retardé hello même durée**.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-145">A side effect of hello buffering is that hello output is **delayed by hello same amount of time**.</span></span> <span data-ttu-id="2e0bc-146">Vous pouvez ajuster hello valeur tooreduce hello nombre d’événements de non ordonnés et limiter la latence du travail hello.</span><span class="sxs-lookup"><span data-stu-id="2e0bc-146">You can tune hello value tooreduce hello number of out-of-order events, and keep hello job latency low.</span></span>

## <a name="get-help"></a><span data-ttu-id="2e0bc-147">Obtenir de l’aide</span><span class="sxs-lookup"><span data-stu-id="2e0bc-147">Get help</span></span>
<span data-ttu-id="2e0bc-148">Pour une assistance supplémentaire, essayez notre [forum Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="2e0bc-148">For additional assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="2e0bc-149">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="2e0bc-149">Next steps</span></span>
* [<span data-ttu-id="2e0bc-150">Introduction tooStream Analytique</span><span class="sxs-lookup"><span data-stu-id="2e0bc-150">Introduction tooStream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="2e0bc-151">Prise en main de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2e0bc-151">Get started with Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="2e0bc-152">Mise à l’échelle des travaux Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2e0bc-152">Scale Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="2e0bc-153">Informations de référence sur le langage de requête Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2e0bc-153">Stream Analytics query language reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="2e0bc-154">Références sur l’API REST de gestion de Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2e0bc-154">Stream Analytics management REST API reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)