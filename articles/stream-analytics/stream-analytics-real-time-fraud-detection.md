# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="60aa2-101">Prise en main de l’utilisation d’Azure Stream Analytics : détection des fraudes en temps réel</span><span class="sxs-lookup"><span data-stu-id="60aa2-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="60aa2-102">Ce didacticiel fournit une illustration de bout en bout de la toouse Analytique de flux de données Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="60aa2-103">Vous allez apprendre à effectuer les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="60aa2-103">You learn how to:</span></span> 

* <span data-ttu-id="60aa2-104">Insérer des événements de flux dans une instance d’Azure Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="60aa2-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="60aa2-105">Dans ce didacticiel, vous allez utiliser une application que nous fournissons pour simuler un flux d’enregistrements de métadonnées de téléphone mobile.</span><span class="sxs-lookup"><span data-stu-id="60aa2-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="60aa2-106">Écrire des données de tootransform requêtes Analytique de flux de données de type SQL, les informations d’agrégation ou de recherche des modèles.</span><span class="sxs-lookup"><span data-stu-id="60aa2-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="60aa2-107">Vous verrez comment toouse un tooexamine requête hello flux entrant et recherchez les appels qui peuvent être frauduleuses.</span><span class="sxs-lookup"><span data-stu-id="60aa2-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="60aa2-108">Envoyer hello résultats tooan récepteur de sortie (stockage) que vous pouvez analyser des informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="60aa2-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="60aa2-109">Dans ce cas, vous allez envoyer le stockage Blob tooAzure hello appel suspectes données.</span><span class="sxs-lookup"><span data-stu-id="60aa2-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="60aa2-110">Dans ce didacticiel, nous utilisons exemple hello de la détection des fraudes en temps réel en fonction des données d’appel téléphonique.</span><span class="sxs-lookup"><span data-stu-id="60aa2-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="60aa2-111">Mais technique hello que nous illustrent est également adapté pour les autres types de détection des fraudes, comme l’usurpation d’identité ou de fraude carte de crédit.</span><span class="sxs-lookup"><span data-stu-id="60aa2-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="60aa2-112">Scénario : détection des fraudes de télécommunication et SIM en temps réel</span><span class="sxs-lookup"><span data-stu-id="60aa2-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="60aa2-113">Une société de télécommunication dispose d’un volume important de données pour les appels entrants.</span><span class="sxs-lookup"><span data-stu-id="60aa2-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="60aa2-114">société de Hello veut toodetect frauduleux appelle en temps réel afin qu’ils peuvent informe les clients ou l’arrêt du service pour un nombre spécifique.</span><span class="sxs-lookup"><span data-stu-id="60aa2-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="60aa2-115">Un type de fraude de carte SIM implique plusieurs appels à partir de hello même identité autour hello même moment mais dans des emplacements géographiquement différentes.</span><span class="sxs-lookup"><span data-stu-id="60aa2-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="60aa2-116">toodetect ce type de fraude, hello les enregistrements entrants téléphone société besoins tooexamine et rechercher des modèles spécifiques, dans ce cas, pour les appels effectués autour hello simultanément dans différents pays.</span><span class="sxs-lookup"><span data-stu-id="60aa2-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="60aa2-117">Tous les enregistrements de téléphone qui appartiennent à cette catégorie sont écrites toostorage pour une analyse ultérieure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="60aa2-118">Composants requis</span><span class="sxs-lookup"><span data-stu-id="60aa2-118">Prerequisites</span></span>

<span data-ttu-id="60aa2-119">Dans ce didacticiel, vous allez simuler des données d’appels téléphoniques à l’aide d’une application cliente générant un exemple de métadonnées d’appel téléphonique.</span><span class="sxs-lookup"><span data-stu-id="60aa2-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="60aa2-120">Certains des enregistrements hello hello application produit ressemblent à des appels frauduleuses.</span><span class="sxs-lookup"><span data-stu-id="60aa2-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="60aa2-121">Avant de commencer, assurez-vous que vous avez hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="60aa2-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="60aa2-122">Un compte Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-122">An Azure account.</span></span>
* <span data-ttu-id="60aa2-123">application de générateur Hello événement d’appel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-123">hello call-event generator app.</span></span> <span data-ttu-id="60aa2-124">Vous pouvez l’obtenir en le téléchargeant hello [TelcoGenerator.zip fichier](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) de hello Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="60aa2-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="60aa2-125">Décompressez ce package dans un dossier de votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="60aa2-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="60aa2-126">Si vous souhaitez que le code source de hello toosee et application hello exécution dans un débogueur, vous pouvez obtenir le code source des application hello de [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="60aa2-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="60aa2-127">Windows peut bloquer le fichier .zip de hello téléchargé.</span><span class="sxs-lookup"><span data-stu-id="60aa2-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="60aa2-128">Si vous ne pouvez pas décompresser, cliquez sur le fichier de hello et sélectionnez **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="60aa2-129">Si vous voyez hello message « ce fichier provient d’un autre ordinateur et peut être bloqué toohelp protéger cet ordinateur », sélectionnez hello **Unblock** option, puis cliquez sur **appliquer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="60aa2-130">Si vous souhaitez que les résultats de hello tooexamine du travail de diffusion en continu d’Analytique hello, vous devez également un outil pour afficher le contenu de hello d’un conteneur de stockage d’objets Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="60aa2-131">Si vous utilisez Visual Studio, vous pouvez utiliser [Azure Tools pour Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) ou [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="60aa2-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="60aa2-132">Vous pouvez également installer des outils autonomes comme [Explorateur de stockage Azure](http://storageexplorer.com/) ou [Explorateur Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="60aa2-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="60aa2-133">Créer un événement Azure événements tooingest de concentrateurs</span><span class="sxs-lookup"><span data-stu-id="60aa2-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="60aa2-134">tooanalyze un flux de données, vous *réception* dans Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="60aa2-135">Un moyen le plus simple de données de tooingest est toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), ce qui permet la réception des millions d’événements par seconde, puis traiter et stocker des informations sur les événements hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="60aa2-136">Pour ce didacticiel, vous créez un hub d’événements, puis hello événement d’appel générateur application envoi appel données toothat concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="60aa2-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="60aa2-137">Pour plus d’informations sur les concentrateurs d’événements, consultez hello [documentation d’Azure Service Bus](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="60aa2-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="60aa2-138">Pour obtenir une version plus détaillée de cette procédure, consultez [créer un espace de noms de concentrateurs d’événements et un concentrateur d’événements à l’aide de hello Azure portal](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="60aa2-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="60aa2-139">Créer un concentrateur Event Hub et un espace de noms</span><span class="sxs-lookup"><span data-stu-id="60aa2-139">Create a namespace and event hub</span></span>
<span data-ttu-id="60aa2-140">Dans cette procédure, vous créez un espace de noms de concentrateur d’événements et vous ajoutez ensuite un namepsace de toothat événements hub.</span><span class="sxs-lookup"><span data-stu-id="60aa2-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="60aa2-141">Espaces de noms de concentrateur événement toologically groupe relatives des instances de bus d’événements.</span><span class="sxs-lookup"><span data-stu-id="60aa2-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="60aa2-142">Ouvrez une session hello portail Azure, puis cliquez sur **nouveau** > **Internet of Things** > **concentrateur d’événements**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="60aa2-143">Bonjour **créer l’espace de noms** panneau, entrez un nom d’espace de noms tels que `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="60aa2-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="60aa2-144">Vous pouvez utiliser n’importe quel nom pour l’espace de noms hello, mais le nom de hello doit être valide pour une URL et il doit être unique dans Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="60aa2-145">Sélectionnez un abonnement, créez ou choisissez un groupe de ressources, puis cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Créer un espace de noms Event Hub](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="60aa2-147">Lors de l’espace de noms hello a terminé le déploiement, trouver hello événement hub espace de noms dans votre liste de ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="60aa2-148">Cliquez sur le nouvel espace de noms hello et dans le panneau espace de noms de hello, cliquez sur  **+ &nbsp;concentrateur d’événements**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="60aa2-149">bouton de concentrateur d’événements ajouter Hello pour la création d’un concentrateur d’événements</span><span class="sxs-lookup"><span data-stu-id="60aa2-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="60aa2-150">Hub d’événements de nom hello `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="60aa2-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="60aa2-151">Vous pouvez utiliser un autre nom.</span><span class="sxs-lookup"><span data-stu-id="60aa2-151">You can use a different name.</span></span> <span data-ttu-id="60aa2-152">Si vous le faites, prenez note de celui-ci, car vous devez les nom hello plus tard.</span><span class="sxs-lookup"><span data-stu-id="60aa2-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="60aa2-153">Vous n’avez pas besoin tooset d’autres options pour le concentrateur d’événements hello dès maintenant.</span><span class="sxs-lookup"><span data-stu-id="60aa2-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Panneau de création d’un concentrateur Event Hub](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="60aa2-155">Cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="60aa2-156">Accordez le concentrateur d’événements toohello accès et obtenir une chaîne de connexion</span><span class="sxs-lookup"><span data-stu-id="60aa2-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="60aa2-157">Avant d’un processus peut envoyer le concentrateur d’événements de données tooan, concentrateur d’événements hello doit avoir une stratégie qui autorise l’accès approprié.</span><span class="sxs-lookup"><span data-stu-id="60aa2-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="60aa2-158">stratégie d’accès Hello génère une chaîne de connexion qui inclut les informations d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="60aa2-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="60aa2-159">Dans le panneau d’espace de noms des événements du hello, cliquez sur **concentrateurs d’événements** puis cliquez sur nom hello de votre hub d’événements.</span><span class="sxs-lookup"><span data-stu-id="60aa2-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="60aa2-160">Dans le panneau de concentrateur d’événements de hello, cliquez sur **les stratégies d’accès partagé** puis cliquez sur  **+ &nbsp;ajouter**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="60aa2-161">Assurez-vous que vous travaillez avec un concentrateur d’événements hello, pas hello événement hub espace de noms.</span><span class="sxs-lookup"><span data-stu-id="60aa2-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="60aa2-162">Ajoutez la stratégie nommée `sa-policy-manage-demo` et, pour **Revendication**, sélectionnez **Gérer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Panneau de création d’une stratégie d’accès au concentrateur Event Hub](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="60aa2-164">Cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-164">Click **Create**.</span></span>

5.  <span data-ttu-id="60aa2-165">Après le déploiement de stratégie de hello, sélectionnez-la dans la liste hello des stratégies d’accès partagé.</span><span class="sxs-lookup"><span data-stu-id="60aa2-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="60aa2-166">Case de hello rechercher **la clé primaire de la chaîne de connexion** et cliquez sur la chaîne de connexion toohello suivant hello copie bouton.</span><span class="sxs-lookup"><span data-stu-id="60aa2-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Copie la clé de chaîne de connexion principale hello à partir de la stratégie d’accès hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="60aa2-168">Collez la chaîne de connexion hello dans un éditeur de texte.</span><span class="sxs-lookup"><span data-stu-id="60aa2-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="60aa2-169">Vous devez cette chaîne de connexion pour la section suivante de hello, après avoir apporté quelques tooit de petites modifications.</span><span class="sxs-lookup"><span data-stu-id="60aa2-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="60aa2-170">chaîne de connexion Hello ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="60aa2-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="60aa2-171">Notez que chaîne de connexion hello contient plusieurs paires clé-valeur, séparées par des points-virgules : `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, et `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="60aa2-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="60aa2-172">Configurer et démarrer l’application de générateur d’événements hello</span><span class="sxs-lookup"><span data-stu-id="60aa2-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="60aa2-173">Avant de commencer, hello TelcoGenerator application, configurez-le afin qu’il enverra un concentrateur d’événements toohello enregistrements appel que vous venez de créer.</span><span class="sxs-lookup"><span data-stu-id="60aa2-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="60aa2-174">Configurer hello TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="60aa2-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="60aa2-175">Dans l’éditeur de hello où vous avez copié la chaîne de connexion hello, prenez note de hello `EntityPath` valeur et supprimez hello `EntityPath` paire (n’oubliez pas point-virgule hello tooremove qui le précède).</span><span class="sxs-lookup"><span data-stu-id="60aa2-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="60aa2-176">Dans le dossier hello où vous avez décompressé les fichiers de TelcoGenerator.zip hello, ouvrez le fichier de telcodatagen.exe.config de hello dans un éditeur.</span><span class="sxs-lookup"><span data-stu-id="60aa2-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="60aa2-177">(Il existe plus d’un fichier .config, assurez-vous que vous ouvrez droite hello).</span><span class="sxs-lookup"><span data-stu-id="60aa2-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="60aa2-178">Bonjour `<appSettings>` élément, cela :</span><span class="sxs-lookup"><span data-stu-id="60aa2-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="60aa2-179">La valeur hello Hello `EventHubName` nom de hub d’événements toohello clé (autrement dit, toohello de valeur du chemin d’accès de hello entité).</span><span class="sxs-lookup"><span data-stu-id="60aa2-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="60aa2-180">La valeur hello Hello `Microsoft.ServiceBus.ConnectionString` la clé de chaîne de connexion toohello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="60aa2-181">Hello `<appSettings>` section ressemblera à hello l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="60aa2-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="60aa2-182">(Pour plus de clarté, nous hello lignes avec et supprimer des caractères à partir du jeton d’autorisation de hello.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![Fichier de configuration d’application TelcoGenerator affichant la chaîne de connexion et de nom de hub d’événement hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="60aa2-184">Enregistrez le fichier de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="60aa2-185">Démarrer l’application hello</span><span class="sxs-lookup"><span data-stu-id="60aa2-185">Start hello app</span></span>
1.  <span data-ttu-id="60aa2-186">Ouvrez une fenêtre de commande et modifier le dossier toohello où hello TelcoGenerator application est décompressée.</span><span class="sxs-lookup"><span data-stu-id="60aa2-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="60aa2-187">Entrez hello de commande suivante :</span><span class="sxs-lookup"><span data-stu-id="60aa2-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="60aa2-188">paramètres de Hello sont :</span><span class="sxs-lookup"><span data-stu-id="60aa2-188">hello parameters are:</span></span> 

    * <span data-ttu-id="60aa2-189">Nombre d’enregistrements des détails des appels par heure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="60aa2-190">Probabilité de fraude de carte SIM : Fréquence, en pourcentage de tous les appels, cette application hello doit simuler un appel frauduleux.</span><span class="sxs-lookup"><span data-stu-id="60aa2-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="60aa2-191">valeur de Hello.2 signifie qu’environ 20 % des enregistrements d’appel hello apparaîtront frauduleuses.</span><span class="sxs-lookup"><span data-stu-id="60aa2-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="60aa2-192">Durée en heures.</span><span class="sxs-lookup"><span data-stu-id="60aa2-192">Duration in hours.</span></span> <span data-ttu-id="60aa2-193">nombre de Hello d’heures hello application doit s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="60aa2-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="60aa2-194">Vous pouvez également arrêter application hello tout moment en appuyant sur Ctrl + C à la ligne de commande hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="60aa2-195">Après quelques secondes, application hello démarre l’affichage des enregistrements de l’appel téléphonique sur l’écran hello comme il les envoie le concentrateur d’événements toohello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="60aa2-196">Certains des champs de clé hello que vous utiliserez dans cette application de la détection des fraudes en temps réel sont suivant de hello :</span><span class="sxs-lookup"><span data-stu-id="60aa2-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="60aa2-197">**Enregistrement**</span><span class="sxs-lookup"><span data-stu-id="60aa2-197">**Record**</span></span>|<span data-ttu-id="60aa2-198">**Définition**</span><span class="sxs-lookup"><span data-stu-id="60aa2-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="60aa2-199">heure de début timestamp Hello pour l’appel de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="60aa2-200">commutateur de téléphone Hello utilisé appel de hello tooconnect.</span><span class="sxs-lookup"><span data-stu-id="60aa2-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="60aa2-201">Pour cet exemple, les commutateurs hello sont des chaînes qui représentent des pays hello d’origine (des États-Unis, en Chine, Royaume-Uni, en Allemagne ou Australie).</span><span class="sxs-lookup"><span data-stu-id="60aa2-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="60aa2-202">numéro de téléphone de Hello d’appelant de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="60aa2-203">Hello identité imsi (International Mobile Subscriber Identity).</span><span class="sxs-lookup"><span data-stu-id="60aa2-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="60aa2-204">Il s’agit d’identificateur Unique de hello de l’appelant de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="60aa2-205">numéro de téléphone Hello du destinataire de l’appel hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="60aa2-206">Identité de l'abonné mobile international (IMSI).</span><span class="sxs-lookup"><span data-stu-id="60aa2-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="60aa2-207">Il s’agit d’identificateur unique de hello du destinataire de l’appel hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="60aa2-208">Créer un toomanage de travail Analytique de flux en continu de données</span><span class="sxs-lookup"><span data-stu-id="60aa2-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="60aa2-209">Maintenant que vous disposez d’un flux des événements d’appel, vous pouvez configurer un travail Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="60aa2-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="60aa2-210">travail de Hello lisent les données de concentrateur d’événements hello que vous avez configurée.</span><span class="sxs-lookup"><span data-stu-id="60aa2-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="60aa2-211">Créer le travail de hello</span><span class="sxs-lookup"><span data-stu-id="60aa2-211">Create hello job</span></span> 

1. <span data-ttu-id="60aa2-212">Bonjour portail Azure, cliquez sur **nouveau** > **Internet of Things** > **tâche de flux de données Analytique**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="60aa2-213">Nom du travail hello `sa_frauddetection_job_demo`, spécifiez un abonnement, le groupe de ressources et l’emplacement.</span><span class="sxs-lookup"><span data-stu-id="60aa2-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="60aa2-214">Il s’agit d’une bonne idée tooplace hello hello et travail de concentrateur d’événements Bonjour même région pour meilleures performances et que vous ne payez tootransfer données entre les régions.</span><span class="sxs-lookup"><span data-stu-id="60aa2-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Créer un travail Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="60aa2-216">Cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-216">Click **Create**.</span></span>

    <span data-ttu-id="60aa2-217">Hello travail est créé et le portail de hello affiche les détails de la tâche.</span><span class="sxs-lookup"><span data-stu-id="60aa2-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="60aa2-218">Rien n’est en cours d’exécution, cependant, vous avez une tâche de hello tooconfigure avant de pouvoir être démarré.</span><span class="sxs-lookup"><span data-stu-id="60aa2-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="60aa2-219">Configurer les entrées du travail</span><span class="sxs-lookup"><span data-stu-id="60aa2-219">Configure job input</span></span>

1. <span data-ttu-id="60aa2-220">Dans le tableau de bord hello ou hello **toutes les ressources** panneau, recherchez et sélectionnez hello `sa_frauddetection_job_demo` tâche de flux de données Analytique.</span><span class="sxs-lookup"><span data-stu-id="60aa2-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="60aa2-221">Bonjour **travail topologie** section Hello Panneau de tâche Analytique de flux de données, cliquez sur hello **entrée** boîte.</span><span class="sxs-lookup"><span data-stu-id="60aa2-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Zone d’entrée sous la topologie dans le panneau de tâche hello Analytique de diffusion en continu](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="60aa2-223">Cliquez sur  **+ &nbsp;ajouter** puis remplissez panneau hello avec ces valeurs :</span><span class="sxs-lookup"><span data-stu-id="60aa2-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="60aa2-224">**Alias d’entrée**: utiliser le nom hello `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="60aa2-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="60aa2-225">Si vous utilisez un autre nom, prenez-en note, car vous en aurez besoin ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="60aa2-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="60aa2-226">**Type de source** : sélectionnez **Flux de données**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="60aa2-227">(**Données de référence** fait référence à des données de recherche de toostatic, que vous n’utilisez pas dans ce didacticiel.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="60aa2-228">**Source** : sélectionnez **Event Hub**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="60aa2-229">**Option d’importation** : sélectionnez **Utiliser le hub d’événements de l’abonnement actuel**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="60aa2-230">**Espace de noms service bus**: sélectionnez hello événement hub namespace que vous avez créé précédemment (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="60aa2-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="60aa2-231">**Concentrateur d’événements**: concentrateur d’événements hello Select que vous avez créé précédemment (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="60aa2-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="60aa2-232">**Nom de la stratégie hub événement**: sélectionnez la stratégie d’accès hello que vous avez créé précédemment (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="60aa2-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Créer une entrée pour le travail Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="60aa2-234">Cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="60aa2-235">Créer des requêtes tootransform des données en temps réel</span><span class="sxs-lookup"><span data-stu-id="60aa2-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="60aa2-236">À ce stade, vous avez une tâche de flux de données Analytique configurer tooread un flux de données entrantes.</span><span class="sxs-lookup"><span data-stu-id="60aa2-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="60aa2-237">étape suivante de Hello est toocreate une transformation qui analyse les données hello en temps réel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="60aa2-238">Pour ce faire, créez une requête.</span><span class="sxs-lookup"><span data-stu-id="60aa2-238">You do this by creating a query.</span></span> <span data-ttu-id="60aa2-239">Stream Analytics prend en charge un modèle de requête simple et déclaratif pour la description des transformations dans le cadre du traitement en temps réel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="60aa2-240">les requêtes de Hello utilisent un langage de type SQL qui a certaines analytique de toostream spécifique d’extensions.</span><span class="sxs-lookup"><span data-stu-id="60aa2-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="60aa2-241">Une requête très simple peut-être lire simplement toutes les données entrantes hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="60aa2-242">Toutefois, vous souvent créez des requêtes qui recherchent des données spécifiques ou pour les relations dans les données de salutation.</span><span class="sxs-lookup"><span data-stu-id="60aa2-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="60aa2-243">Dans cette section du didacticiel de hello, vous créer et tester plusieurs requêtes toolearn dans lequel vous pouvez transformer un flux d’entrée pour l’analyse de plusieurs façons.</span><span class="sxs-lookup"><span data-stu-id="60aa2-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="60aa2-244">vous créez ici des requêtes Hello affiche simplement écran de toohello de données transformées hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="60aa2-245">Dans une section ultérieure, vous allez configurer un récepteur de sortie et une requête qui écrit hello données transformées toothat récepteur.</span><span class="sxs-lookup"><span data-stu-id="60aa2-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="60aa2-246">toolearn en savoir plus sur le langage de hello, consultez hello [référence du langage de requête Azure Stream Analytique](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="60aa2-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="60aa2-247">Obtenir des exemples de données pour tester des requêtes</span><span class="sxs-lookup"><span data-stu-id="60aa2-247">Get sample data for testing queries</span></span>

<span data-ttu-id="60aa2-248">application de TelcoGenerator Hello envoie concentrateur d’événements toohello appel enregistrements, et votre tâche de flux de données Analytique est tooread configuré à partir du concentrateur d’événements hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="60aa2-249">Vous pouvez utiliser un toomake de travail requête tootest hello certain lire correctement.</span><span class="sxs-lookup"><span data-stu-id="60aa2-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="60aa2-250">trop de tester une requête Bonjour console Azure, vous avez besoin d’exemples de données.</span><span class="sxs-lookup"><span data-stu-id="60aa2-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="60aa2-251">Pour cette procédure pas à pas, vous allez extraire les exemples de données à partir de flux hello qui sera disponible dans le concentrateur d’événements hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="60aa2-252">Assurez-vous que cette application de TelcoGenerator hello est en cours d’exécution et produire des enregistrements de l’appel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="60aa2-253">Dans le portail hello, retourner le panneau de tâche toohello Analytique de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="60aa2-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="60aa2-254">(Si vous avez fermé le panneau de hello, recherchez `sa_frauddetection_job_demo` Bonjour **toutes les ressources** panneau.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="60aa2-255">Cliquez sur hello **requête** boîte.</span><span class="sxs-lookup"><span data-stu-id="60aa2-255">Click hello **Query** box.</span></span> <span data-ttu-id="60aa2-256">Azure répertorie les entrées hello et sorties qui sont configurés pour la tâche de hello et vous permet de créer une requête qui vous permet de transforment les flux d’entrée hello lors de leur envoi toohello sortie.</span><span class="sxs-lookup"><span data-stu-id="60aa2-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="60aa2-257">Bonjour **requête** panneau, cliquez sur toohello suivant de points hello `CallStream` d’entrée, puis sélectionnez **les exemples de données à partir de l’entrée**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Menu options toouse exemples de données pour hello Analytique de diffusion en continu de la tâche entrée, « Exemples de données à partir de l’entrée « sélectionné](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="60aa2-259">Cette opération ouvre un panneau qui vous permet de spécifier la quantité tooget de données d’exemple, définie en termes de la durée pendant laquelle le flux d’entrée tooread hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="60aa2-260">Définissez **Minutes** too3 puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Options d’échantillonnage de flux d’entrée de hello, avec « 3 minutes » sélectionnées.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="60aa2-262">Azure échantillonne les données du flux d’entrée de hello sur 3 minutes et vous avertit lorsque les données d’exemple hello sont prêtes.</span><span class="sxs-lookup"><span data-stu-id="60aa2-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="60aa2-263">(Cette opération prend quelques instants.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-263">(This takes a short while.)</span></span> 

<span data-ttu-id="60aa2-264">Hello exemples de données sont stockées temporairement et sont disponibles tant que fenêtre de requête hello ouvert.</span><span class="sxs-lookup"><span data-stu-id="60aa2-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="60aa2-265">Si vous fermez la fenêtre de requête hello, les données d’exemple hello sont ignorées, et vous aurez toocreate un nouvel ensemble d’exemples de données.</span><span class="sxs-lookup"><span data-stu-id="60aa2-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="60aa2-266">En guise d’alternative, vous pouvez obtenir un fichier .json qui comporte des exemples de données en [à partir de GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), puis téléchargez ce toouse de fichier .json en tant qu’exemples de données pour hello `CallStream` d’entrée.</span><span class="sxs-lookup"><span data-stu-id="60aa2-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="60aa2-267">Procéder à un test à l’aide d’une requête directe</span><span class="sxs-lookup"><span data-stu-id="60aa2-267">Test using a pass-through query</span></span>

<span data-ttu-id="60aa2-268">Si vous souhaitez tooarchive chaque événement, vous pouvez utiliser une requête directe de tooread tous les champs hello dans la charge utile de hello d’événement de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="60aa2-269">Dans la fenêtre de requête hello, entrez cette requête :</span><span class="sxs-lookup"><span data-stu-id="60aa2-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="60aa2-270">Comme dans SQL, les mots clés ne respectent pas la casse, et les espaces blancs ne sont pas significatifs.</span><span class="sxs-lookup"><span data-stu-id="60aa2-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="60aa2-271">Dans cette requête, `CallStream` est hello alias que vous avez spécifié lorsque vous avez créé l’entrée de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="60aa2-272">Si vous en avez utilisé un autre, utilisez plutôt ce nom.</span><span class="sxs-lookup"><span data-stu-id="60aa2-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="60aa2-273">Cliquez sur **Test**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-273">Click **Test**.</span></span>

    <span data-ttu-id="60aa2-274">tâche de flux de données Analytique Hello exécute la requête de hello sur des données d’exemple hello et affiche la sortie de hello bas hello de fenêtre hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="60aa2-275">Vous pouvez en déduire que concentrateur d’événements hello et le travail de diffusion en continu d’Analytique hello sont correctement configurés.</span><span class="sxs-lookup"><span data-stu-id="60aa2-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="60aa2-276">(Comme indiqué, plus tard vous allez créer un récepteur de sortie que hello requête peut écrire les données.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Sortie du travail Stream Analytics, affichant 73 enregistrements générés](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="60aa2-278">nombre exact de Hello d’enregistrements que vous voyez dépend du nombre d’enregistrements qui ont été capturé dans votre exemple de 3 minutes.</span><span class="sxs-lookup"><span data-stu-id="60aa2-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="60aa2-279">Réduire le nombre de hello de champs à l’aide d’une projection de colonne</span><span class="sxs-lookup"><span data-stu-id="60aa2-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="60aa2-280">Dans de nombreux cas, l’analyse n’a pas besoin de toutes les colonnes hello hello flux d’entrée.</span><span class="sxs-lookup"><span data-stu-id="60aa2-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="60aa2-281">Vous pouvez utiliser un tooproject requête un plus petit jeu de retourné de champs que dans les requêtes pass-through hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="60aa2-282">Modifier la requête hello dans hello code éditeur toohello suivant :</span><span class="sxs-lookup"><span data-stu-id="60aa2-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="60aa2-283">Cliquez de nouveau sur **Test**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-283">Click **Test** again.</span></span> 

    ![Sortie du travail Stream Analytics pour la projection, affichant 25 enregistrements générés](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="60aa2-285">Compter les appels entrants par région : fenêtre bascule avec agrégation</span><span class="sxs-lookup"><span data-stu-id="60aa2-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="60aa2-286">Supposons que vous souhaitiez toocount hello quantité, pour les appels entrants par région.</span><span class="sxs-lookup"><span data-stu-id="60aa2-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="60aa2-287">Dans le flux de données, lorsque vous souhaitez tooperform les fonctions d’agrégation telles que l’inventaire, il faut toosegment hello flux en unités temporelles (étant donné que les flux de données hello lui-même est efficacement sans fin).</span><span class="sxs-lookup"><span data-stu-id="60aa2-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="60aa2-288">Pour ce faire, utilisez une [fonction de fenêtre](stream-analytics-window-functions.md) Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="60aa2-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="60aa2-289">Ensuite, vous pouvez travailler avec des données à l’intérieur de cette fenêtre hello en tant qu’unité.</span><span class="sxs-lookup"><span data-stu-id="60aa2-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="60aa2-290">Pour cette transformation, vous souhaitez une séquence de fenêtres temporelles ne se chevauchant pas ; chaque fenêtre contient un ensemble distinct de données que vous pouvez regrouper et agréger.</span><span class="sxs-lookup"><span data-stu-id="60aa2-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="60aa2-291">Ce type de fenêtre est tooas auxquels un *fenêtre bascule* .</span><span class="sxs-lookup"><span data-stu-id="60aa2-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="60aa2-292">Dans la fenêtre bascule de hello, vous pouvez obtenir un nombre d’appels entrants à hello regroupés par `SwitchNum`, qui représente hello du pays où les appels hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="60aa2-293">Modifier la requête hello dans hello code éditeur toohello suivant :</span><span class="sxs-lookup"><span data-stu-id="60aa2-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="60aa2-294">Cette requête utilise hello `Timestamp By` mot clé Bonjour `FROM` toospecify clause quel champ timestamp Bonjour d’entrée de fenêtre bascule de flux toouse toodefine hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="60aa2-295">Dans ce cas, fenêtre hello divise les données de salutation en segments par hello `CallRecTime` champ dans chaque enregistrement.</span><span class="sxs-lookup"><span data-stu-id="60aa2-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="60aa2-296">(Si aucun champ n’est spécifié, opération de fenêtrage hello utilise heure hello que chaque événement arrive sur le concentrateur d’événements hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="60aa2-297">Voir « Heure d’arrivée par rapport à l’heure de l’application » dans [Informations de référence sur le langage de requête Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="60aa2-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="60aa2-298">projection de Hello inclut `System.Timestamp`, qui retourne un horodatage de fin hello de chaque fenêtre.</span><span class="sxs-lookup"><span data-stu-id="60aa2-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="60aa2-299">toospecify que vous souhaitez toouse une fenêtre bascule, vous utilisez hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) fonction Bonjour `GROUP BY `clause.</span><span class="sxs-lookup"><span data-stu-id="60aa2-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="60aa2-300">Dans la fonction hello, vous spécifiez une unité de temps (n’importe où à partir d’un jour de tooa microsecondes) et une taille de fenêtre (le nombre d’unités).</span><span class="sxs-lookup"><span data-stu-id="60aa2-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="60aa2-301">Dans cet exemple, la fenêtre bascule de hello se compose d’intervalles de 5 secondes, afin de vous obtiendrez un nombre par pays pour la valeur de chaque 5 secondes d’appels.</span><span class="sxs-lookup"><span data-stu-id="60aa2-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="60aa2-302">Cliquez de nouveau sur **Test**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-302">Click **Test** again.</span></span> <span data-ttu-id="60aa2-303">Dans les résultats de hello, notez que des horodateurs hello sous **WindowEnd** sont présentés par incréments de 5 secondes.</span><span class="sxs-lookup"><span data-stu-id="60aa2-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Sortie du travail Stream Analytics pour l’agrégation, affichant 13 enregistrements générés](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="60aa2-305">Détecter une fraude à la carte SIM à l’aide d’une jointure réflexive</span><span class="sxs-lookup"><span data-stu-id="60aa2-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="60aa2-306">Pour cet exemple, nous pouvons envisager l’utilisation frauduleuse toobe appels provenant de hello même utilisateur, mais dans différents emplacements dans les 5 secondes, une de l’autre.</span><span class="sxs-lookup"><span data-stu-id="60aa2-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="60aa2-307">Par exemple, hello même utilisateur ne peut pas légitimement effectuer un appel à partir de hello des États-Unis et de l’Australie au hello même temps.</span><span class="sxs-lookup"><span data-stu-id="60aa2-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="60aa2-308">toocheck pour ces cas, vous pouvez utiliser une jointure réflexive de hello de diffusion en continu de données toojoin hello flux tooitself selon hello `CallRecTime` valeur.</span><span class="sxs-lookup"><span data-stu-id="60aa2-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="60aa2-309">Vous pouvez ensuite rechercher pour l’appel des enregistrements où hello `CallingIMSI` valeur (hello numéro d’origine) est hello identiques, mais hello `SwitchNum` valeur (pays d’origine) n’est pas hello identiques.</span><span class="sxs-lookup"><span data-stu-id="60aa2-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="60aa2-310">Lorsque vous utilisez une jointure avec la diffusion en continu de données, jointure de hello doit fournir des limitations hello décalage qui correspondent aux lignes peuvent être séparées dans le temps.</span><span class="sxs-lookup"><span data-stu-id="60aa2-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="60aa2-311">(Comme indiqué précédemment, hello de diffusion en continu de données est effectivement sans fin.) limites de temps Hello pour la relation de hello sont spécifiés à l’intérieur de hello `ON` clause de jointure hello, à l’aide de hello `DATEDIFF` (fonction).</span><span class="sxs-lookup"><span data-stu-id="60aa2-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="60aa2-312">Dans ce cas, jointure de hello est basée sur un intervalle de 5 secondes de données d’appel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="60aa2-313">Modifier la requête hello dans hello code éditeur toohello suivant :</span><span class="sxs-lookup"><span data-stu-id="60aa2-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="60aa2-314">Cette requête est comme toute autre jointure SQL à l’exception de hello `DATEDIFF` fonction dans la jointure de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="60aa2-315">Il s’agit d’une version de `DATEDIFF` tooStreaming spécifique Analytique, et il doit s’afficher dans hello `ON...BETWEEN` clause.</span><span class="sxs-lookup"><span data-stu-id="60aa2-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="60aa2-316">paramètres de Hello sont une unité de temps (en secondes dans cet exemple) et les alias de hello de deux sources de hello pour la jointure de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="60aa2-317">(Ceci diffère hello SQL standard `DATEDIFF` fonction.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="60aa2-318">Hello `WHERE` clause inclut condition hello qui signale les appel frauduleux hello : les commutateurs d’origine hello ne sont pas hello identiques.</span><span class="sxs-lookup"><span data-stu-id="60aa2-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="60aa2-319">Cliquez de nouveau sur **Test**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-319">Click **Test** again.</span></span> 

    ![Sortie du travail Stream Analytics pour la jointure réflexive, affichant 6 enregistrements générés](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="60aa2-321">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-321">Click **Save**.</span></span> <span data-ttu-id="60aa2-322">Cela enregistre la requête de jointure réflexive hello en tant que partie du travail de diffusion en continu d’Analytique hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="60aa2-323">(Il n’enregistre pas les données d’exemple hello).</span><span class="sxs-lookup"><span data-stu-id="60aa2-323">(It doesn't save hello sample data.)</span></span>

    ![Enregistrer un travail Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="60aa2-325">Créer un récepteur de sortie transformé de toostore données</span><span class="sxs-lookup"><span data-stu-id="60aa2-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="60aa2-326">Vous avez défini un flux d’événements, un tooingest d’entrée de concentrateur d’événements et une requête de tooperform une transformation sur les flux hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="60aa2-327">dernière étape de Hello est toodefine récepteur de sortie pour le travail de hello : autrement dit, un Bonjour de toowrite place transformés flux à.</span><span class="sxs-lookup"><span data-stu-id="60aa2-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="60aa2-328">Vous pouvez utiliser de nombreuses ressources comme récepteurs de sortie : une base de données SQL Server, le stockage Table, le stockage Data Lake, Power BI et même un autre concentrateur Event Hub.</span><span class="sxs-lookup"><span data-stu-id="60aa2-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="60aa2-329">Pour ce didacticiel, vous allez écrire hello flux tooAzure stockage d’objets Blob, qui est un choix par défaut pour la collecte des informations sur les événements pour une analyse ultérieure, car il prend en charge des données non structurées.</span><span class="sxs-lookup"><span data-stu-id="60aa2-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="60aa2-330">Si vous possédez déjà un compte de stockage d’objets blob, vous pouvez l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="60aa2-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="60aa2-331">Pour ce didacticiel, nous allons vous montrer comment toocreate un nouveau compte de stockage juste pour ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="60aa2-332">Créer un compte de stockage Blob Azure</span><span class="sxs-lookup"><span data-stu-id="60aa2-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="60aa2-333">Bonjour portail Azure, retourner le panneau de tâche toohello Analytique de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="60aa2-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="60aa2-334">(Si vous avez fermé le panneau de hello, recherchez `sa_frauddetection_job_demo` Bonjour **toutes les ressources** panneau.)</span><span class="sxs-lookup"><span data-stu-id="60aa2-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="60aa2-335">Bonjour **travail topologie** , cliquez sur hello **sortie** boîte.</span><span class="sxs-lookup"><span data-stu-id="60aa2-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="60aa2-336">Bonjour **sorties** panneau, cliquez sur  **+ &nbsp;ajouter** puis remplissez panneau hello avec ces valeurs :</span><span class="sxs-lookup"><span data-stu-id="60aa2-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="60aa2-337">**Alias de sortie**: utiliser le nom hello `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="60aa2-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="60aa2-338">**Sink** : sélectionnez **Stockage d’objets blob**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="60aa2-339">**Options d’importation** : sélectionnez **Utiliser l’objet blob de stockage de l’abonnement actuel**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="60aa2-340">**Compte de stockage** :</span><span class="sxs-lookup"><span data-stu-id="60aa2-340">**Storage account**.</span></span> <span data-ttu-id="60aa2-341">sélectionnez **Créer un compte de stockage**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="60aa2-342">**Compte de stockage** (seconde zone) :</span><span class="sxs-lookup"><span data-stu-id="60aa2-342">**Storage account** (second box).</span></span> <span data-ttu-id="60aa2-343">entrez `YOURNAMEsademo`, où `YOURNAME` représente votre nom ou une autre chaîne unique.</span><span class="sxs-lookup"><span data-stu-id="60aa2-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="60aa2-344">nom de Hello peut utiliser que des lettres minuscules et des chiffres, et il doit être unique dans Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="60aa2-345">**Conteneur** :</span><span class="sxs-lookup"><span data-stu-id="60aa2-345">**Container**.</span></span> <span data-ttu-id="60aa2-346">Entrez `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="60aa2-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="60aa2-347">nom de compte de stockage Hello et le nom de conteneur sont tooprovide ensemble utilisé un URI pour le stockage d’objets blob hello, comme suit :</span><span class="sxs-lookup"><span data-stu-id="60aa2-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Panneau Nouvelle sortie pour le travail Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="60aa2-349">Cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-349">Click **Create**.</span></span> 

    <span data-ttu-id="60aa2-350">Azure crée le compte de stockage hello et génère une clé automatiquement.</span><span class="sxs-lookup"><span data-stu-id="60aa2-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="60aa2-351">Fermer hello **sorties** panneau.</span><span class="sxs-lookup"><span data-stu-id="60aa2-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="60aa2-352">Démarrer le travail de diffusion en continu d’Analytique hello</span><span class="sxs-lookup"><span data-stu-id="60aa2-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="60aa2-353">Hello travail est maintenant configuré.</span><span class="sxs-lookup"><span data-stu-id="60aa2-353">hello job is now configured.</span></span> <span data-ttu-id="60aa2-354">Vous avez spécifié une entrée (concentrateur d’événements hello), une transformation (toolook de requête hello pour les appels frauduleux) et une sortie (stockage d’objets blob).</span><span class="sxs-lookup"><span data-stu-id="60aa2-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="60aa2-355">Vous pouvez maintenant démarrer le travail de hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="60aa2-356">Vérifiez que hello TelcoGenerator application est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="60aa2-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="60aa2-357">Dans le panneau de tâche hello, cliquez sur **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-357">In hello job blade, click **Start**.</span></span>

    ![Démarrer la tâche de flux de données Analytique hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="60aa2-359">Bonjour **Start job** panneau, pour le travail sortie heure de début, sélectionnez **maintenant**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="60aa2-360">Cliquez sur **Start**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-360">Click **Start**.</span></span> 

    ![Panneau de « Démarrer le travail » pour la tâche de flux de données Analytique hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="60aa2-362">Azure vous avertit de hello le travail a démarré, et dans le panneau de tâche hello, hello état affiché est **en cours d’exécution**.</span><span class="sxs-lookup"><span data-stu-id="60aa2-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![État du travail Stream Analytics En cours d’exécution](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="60aa2-364">Examiner les données de hello transformé</span><span class="sxs-lookup"><span data-stu-id="60aa2-364">Examine hello transformed data</span></span>

<span data-ttu-id="60aa2-365">À présent, vous disposez d’un travail Stream Analytics complet.</span><span class="sxs-lookup"><span data-stu-id="60aa2-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="60aa2-366">Hello tâche est examen d’un flux de métadonnées de l’appel téléphonique, recherchez les appels téléphoniques frauduleux en temps réel et l’écriture des informations sur ces toostorage appels frauduleuses.</span><span class="sxs-lookup"><span data-stu-id="60aa2-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="60aa2-367">toocomplete ce didacticiel, vous souhaiterez peut-être toolook données hello capturés par le travail de diffusion en continu d’Analytique hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="60aa2-368">les données de salutation sont écrit tooAzure stockage d’objets BLOB en segments (fichiers).</span><span class="sxs-lookup"><span data-stu-id="60aa2-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="60aa2-369">Vous pouvez utiliser n’importe quel outil pour lire Stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="60aa2-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="60aa2-370">Comme indiqué dans la section conditions préalables de hello, vous pouvez utiliser des extensions Azure dans Visual Studio, ou vous pouvez utiliser un outil tel que [Azure Storage Explorer](http://storageexplorer.com/) ou [Explorateur Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="60aa2-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="60aa2-371">Lorsque vous examinez le contenu de hello d’un fichier dans le stockage blob, vous voyez quelque chose comme hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="60aa2-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Stockage d’objets blob Azure avec sortie Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="60aa2-373">Supprimer des ressources</span><span class="sxs-lookup"><span data-stu-id="60aa2-373">Clean up resources</span></span>

<span data-ttu-id="60aa2-374">Nous avons des articles supplémentaires qu’elles restent avec le scénario de détection des fraudes hello et qui utilisent des ressources hello que vous avez créé dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="60aa2-375">Si vous souhaitez toocontinue, consultez les suggestions hello sous **étapes** plus tard.</span><span class="sxs-lookup"><span data-stu-id="60aa2-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="60aa2-376">Toutefois, si vous avez terminé et que vous n’avez pas besoin des ressources hello que vous avez créé, vous pouvez les supprimer afin que vous ne subissez inutiles Azure facture.</span><span class="sxs-lookup"><span data-stu-id="60aa2-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="60aa2-377">Dans ce cas, nous vous suggérons de que vous hello suivant :</span><span class="sxs-lookup"><span data-stu-id="60aa2-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="60aa2-378">Arrêter le travail de diffusion en continu d’Analytique hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="60aa2-379">Bonjour **travaux** panneau, cliquez sur **arrêter** haut hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="60aa2-380">Arrêt de l’application du Générateur de télécommunications hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="60aa2-381">Dans la fenêtre de commande hello où vous avez démarré l’application hello, appuyez sur Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="60aa2-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="60aa2-382">Si vous avez créé un compte de stockage d’objets blob pour ce didacticiel, supprimez-le.</span><span class="sxs-lookup"><span data-stu-id="60aa2-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="60aa2-383">Supprimer le travail de diffusion en continu d’Analytique hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="60aa2-384">Supprimer un concentrateur d’événements hello.</span><span class="sxs-lookup"><span data-stu-id="60aa2-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="60aa2-385">Supprimer l’espace de noms hello événement hub.</span><span class="sxs-lookup"><span data-stu-id="60aa2-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="60aa2-386">Obtenir de l'aide</span><span class="sxs-lookup"><span data-stu-id="60aa2-386">Get support</span></span>

<span data-ttu-id="60aa2-387">Pour obtenir une assistance, consultez le [forum Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics)</span><span class="sxs-lookup"><span data-stu-id="60aa2-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="60aa2-388">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="60aa2-388">Next steps</span></span>

<span data-ttu-id="60aa2-389">Vous pouvez poursuivre ce didacticiel hello suivant des articles :</span><span class="sxs-lookup"><span data-stu-id="60aa2-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="60aa2-390">[Stream Analytics et Power BI : tableau de bord d’analyse en temps réel pour les données de streaming](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="60aa2-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="60aa2-391">Cet article vous explique comment toosend hello sortie télécommunications de hello Analytique de flux de travail tooPower BI pour l’analyse et de visualisation en temps réel.</span><span class="sxs-lookup"><span data-stu-id="60aa2-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="60aa2-392">[Comment toostore des données à partir de l’Analytique des flux de données Azure dans un Cache Redis Azure à l’aide des fonctions d’Azure](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="60aa2-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="60aa2-393">Cet article explique comment toowrite des fonctions d’Azure toouse frauduleux appelle tooan Azure Redis cache via une file d’attente Service Bus.</span><span class="sxs-lookup"><span data-stu-id="60aa2-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="60aa2-394">Pour plus d’informations sur Stream Analytics en général, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="60aa2-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="60aa2-395">Introduction tooAzure Analytique de flux de données</span><span class="sxs-lookup"><span data-stu-id="60aa2-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="60aa2-396">Mise à l'échelle des travaux Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="60aa2-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="60aa2-397">Références sur le langage des requêtes d'Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="60aa2-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="60aa2-398">Références sur l’API REST de gestion d’Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="60aa2-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
