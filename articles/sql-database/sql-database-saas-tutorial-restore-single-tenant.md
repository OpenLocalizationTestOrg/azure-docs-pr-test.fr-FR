---
title: "aaaRestore une base de données SQL Azure dans une application mutualisée | Documents Microsoft"
description: "Découvrez comment toorestore un seul locataires SQL la base de données après la suppression accidentelle de données"
keywords: "didacticiel sur les bases de données SQL"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="5f91f-104">Restaurer une base de données SQL de clients SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="5f91f-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="5f91f-105">application de Wingtip SaaS Hello est construite à l’aide d’un modèle de base de données pour chaque locataire, où chaque client a sa propre base de données.</span><span class="sxs-lookup"><span data-stu-id="5f91f-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="5f91f-106">Un des avantages de hello de ce modèle est qu’il est facile toorestore les données d’un seul client de manière isolée sans affecter d’autres clients.</span><span class="sxs-lookup"><span data-stu-id="5f91f-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="5f91f-107">Dans ce didacticiel, vous allez découvrir deux modèles de récupération des données :</span><span class="sxs-lookup"><span data-stu-id="5f91f-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="5f91f-108">Restaurer une base de données dans une base de données parallèle (côte à côte)</span><span class="sxs-lookup"><span data-stu-id="5f91f-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="5f91f-109">Restaurer une base de données sur place</span><span class="sxs-lookup"><span data-stu-id="5f91f-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="5f91f-110">**Restaurer le locataire tooa antérieur dans le temps, dans une base de données parallèle**</span><span class="sxs-lookup"><span data-stu-id="5f91f-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="5f91f-111">Ce modèle peut être utilisé par le client hello pour révision, l’audit, la conformité, hello et etc.-base de données d’origine reste inchangée et en ligne.</span><span class="sxs-lookup"><span data-stu-id="5f91f-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="5f91f-112">**Restaurer un client sur place**</span><span class="sxs-lookup"><span data-stu-id="5f91f-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="5f91f-113">Ce modèle est généralement utilisé toorecover un locataire tooa état antérieur dans le temps, une fois un client supprime accidentellement des données.</span><span class="sxs-lookup"><span data-stu-id="5f91f-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="5f91f-114">Hello de base de données d’origine est mis hors connexion et remplacé par la base de données restaurée hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="5f91f-115">toocomplete ce didacticiel, assurez-vous que hello est suivant des conditions préalables requises sont effectuées :</span><span class="sxs-lookup"><span data-stu-id="5f91f-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="5f91f-116">Hello Wingtip SaaS application est déployée.</span><span class="sxs-lookup"><span data-stu-id="5f91f-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="5f91f-117">toodeploy en moins de cinq minutes, consultez [déployer et Explorer hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="5f91f-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="5f91f-118">Azure PowerShell est installé.</span><span class="sxs-lookup"><span data-stu-id="5f91f-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="5f91f-119">Pour plus d’informations, consultez [Bien démarrer avec Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="5f91f-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="5f91f-120">Modèle de restauration locataire introduction toohello SaaS</span><span class="sxs-lookup"><span data-stu-id="5f91f-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="5f91f-121">Pour le client de hello rétablir le modèle, il existe deux modèles simples pour la restauration des données d’un locataire individuel.</span><span class="sxs-lookup"><span data-stu-id="5f91f-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="5f91f-122">Étant donné que les bases de données des clients sont isolées les unes des autres, la restauration d’un client n’a aucun impact sur les données des autres clients.</span><span class="sxs-lookup"><span data-stu-id="5f91f-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="5f91f-123">Dans le premier modèle d’hello, les données sont restaurées dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="5f91f-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="5f91f-124">client de Hello reçoit ensuite base de données access toothis en même temps que leurs données de production.</span><span class="sxs-lookup"><span data-stu-id="5f91f-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="5f91f-125">Ce modèle permet à un locataire des données de hello restaurée de tooreview admin et potentiellement l’utiliser tooselectively remplacer les valeurs de données actuelles.</span><span class="sxs-lookup"><span data-stu-id="5f91f-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="5f91f-126">C’est toohello SaaS application concepteur toodetermine quel sophistiquée hello options à la récupération des données.</span><span class="sxs-lookup"><span data-stu-id="5f91f-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="5f91f-127">Simplement tooreview en mesure des données dans l’état où qu'elle était à un moment donné dans le temps hello est tout ce qui est nécessaire dans certains scénarios.</span><span class="sxs-lookup"><span data-stu-id="5f91f-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="5f91f-128">Si la base de données hello utilise [géo-réplication](sql-database-geo-replication-overview.md), nous vous recommandons de copier les données de hello requis à partir de la copie de hello restauré dans la base de données d’origine hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="5f91f-129">Si vous remplacez la base de données d’origine hello avec base de données hello restaurée, vous devez tooreconfigure et resynchronisez les géo-réplication.</span><span class="sxs-lookup"><span data-stu-id="5f91f-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="5f91f-130">Dans hello second modèle, qui suppose que ce client hello a subi une perte ou l’altération de données, de la restauration de base de données de production du locataire hello tooa le point antérieur dans le temps.</span><span class="sxs-lookup"><span data-stu-id="5f91f-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="5f91f-131">Restauration hello dans le modèle de la place, dans le locataire de hello est mis hors connexion pendant un bref instant pendant que la base de données hello est restauré et remis en ligne.</span><span class="sxs-lookup"><span data-stu-id="5f91f-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="5f91f-132">Hello base de données d’origine est supprimé, mais peuvent toujours être restauré à partir si vous avez besoin tooan de retour toogo antérieur même point dans le temps.</span><span class="sxs-lookup"><span data-stu-id="5f91f-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="5f91f-133">Une variante de ce modèle pourrait renommer des hello de base de données au lieu de sa suppression, bien que la base de données de changement de nom hello n’offre aucun avantage supplémentaire en termes de sécurité des données.</span><span class="sxs-lookup"><span data-stu-id="5f91f-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="5f91f-134">Obtenir les scripts d’application hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="5f91f-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="5f91f-135">Hello Wingtip SaaS scripts et code source d’applications sont disponibles dans hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) référentiel github.</span><span class="sxs-lookup"><span data-stu-id="5f91f-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="5f91f-136">[Étapes de scripts de Wingtip SaaS hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="5f91f-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="5f91f-137">Simuler la suppression accidentelle des données par le client</span><span class="sxs-lookup"><span data-stu-id="5f91f-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="5f91f-138">toodemonstrate ces scénarios de récupération, nous devons trop*accidentellement* supprimer certaines données de l’une des bases de données clientes hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="5f91f-139">Pendant que vous pouvez supprimer n’importe quel enregistrement, hello prochaine étape configure hello démonstration toonot bloquées par des violations d’intégrité référentielle !</span><span class="sxs-lookup"><span data-stu-id="5f91f-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="5f91f-140">Il ajoute également des données d’achat de ticket que vous pouvez utiliser ultérieurement dans hello *les didacticiels Wingtip SaaS Analytique*.</span><span class="sxs-lookup"><span data-stu-id="5f91f-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="5f91f-141">Exécutez le script de génération de ticket hello et créer des données supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="5f91f-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="5f91f-142">Générateur de ticket Hello n’intentionnellement pas acheter les tickets pour chaque événement dernière locataires.</span><span class="sxs-lookup"><span data-stu-id="5f91f-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="5f91f-143">Ouvrir... \\Modules d’apprentissage\\utilitaires\\*TicketGenerator.ps1 de démonstration* Bonjour *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="5f91f-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="5f91f-144">Appuyez sur **F5** toorun hello script et générer des clients et les données de ventes de ticket.</span><span class="sxs-lookup"><span data-stu-id="5f91f-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="5f91f-145">Ouvrez hello événements tooreview hello actuels événements de l’application</span><span class="sxs-lookup"><span data-stu-id="5f91f-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="5f91f-146">Ouvrez hello *concentrateur d’événements* (http://events.wtp.&lt; utilisateur&gt;. trafficmanager.net) et cliquez sur **salle de Concert Contoso**:</span><span class="sxs-lookup"><span data-stu-id="5f91f-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![events hub](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="5f91f-148">Faites défiler la liste des événements hello et prenez note du dernier événement de hello dans la liste de hello :</span><span class="sxs-lookup"><span data-stu-id="5f91f-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![dernier événement](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="5f91f-150">Exécutez hello démonstration scénario tooaccidentally hello dernier événement delete</span><span class="sxs-lookup"><span data-stu-id="5f91f-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="5f91f-151">Ouvrir... \\Modules d’apprentissage\\continuité des activités et récupération d’urgence\\RestoreTenant\\*RestoreTenant.ps1 de démonstration* Bonjour *PowerShell ISE*, et ensemble hello de valeur suivante :</span><span class="sxs-lookup"><span data-stu-id="5f91f-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="5f91f-152">**$DemoScenario** = **1**, définissez trop**1** -supprimer des événements sans ventes de ticket.</span><span class="sxs-lookup"><span data-stu-id="5f91f-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="5f91f-153">Appuyez sur **F5** toorun hello script et supprimer le dernier événement de hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="5f91f-154">Vous devez voir s’afficher une confirmation message similaire toohello :</span><span class="sxs-lookup"><span data-stu-id="5f91f-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="5f91f-155">page événements de Contoso Hello s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="5f91f-155">hello Contoso events page opens.</span></span> <span data-ttu-id="5f91f-156">Faites défiler la liste et vérifiez les événements hello a disparu.</span><span class="sxs-lookup"><span data-stu-id="5f91f-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="5f91f-157">Si l’événement de hello est toujours dans la liste de hello, cliquez sur Actualiser et vérifiez qu’il a disparu.</span><span class="sxs-lookup"><span data-stu-id="5f91f-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![dernier événement](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="5f91f-159">Restaurer une base de données client en parallèle avec la base de données de production hello</span><span class="sxs-lookup"><span data-stu-id="5f91f-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="5f91f-160">Cet exercice restaure le point de tooa de base de données de salle de Concert Contoso hello dans le temps avant l’événement de hello a été supprimé.</span><span class="sxs-lookup"><span data-stu-id="5f91f-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="5f91f-161">Après la suppression des événements de hello dans les étapes précédentes hello, toorecover et de voir les données de salutation supprimée.</span><span class="sxs-lookup"><span data-stu-id="5f91f-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="5f91f-162">Vous n’avez pas besoin toorestore votre base de données de production avec l’enregistrement de hello supprimé, mais vous devez toorecover hello ancienne base de données tooaccess hello anciennes données pour d’autres raisons de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="5f91f-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="5f91f-163">Hello *restauration-TenantInParallel.ps1* script crée un parallèle client de base de données et une entrée de catalogue parallèle à la fois nommée *ContosoConcertHall\_ancien*.</span><span class="sxs-lookup"><span data-stu-id="5f91f-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="5f91f-164">Ce modèle de restauration convient davantage dans le cas d’une récupération après une perte de données mineure ou dans des scénarios de récupération de conformité et d’audit.</span><span class="sxs-lookup"><span data-stu-id="5f91f-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="5f91f-165">Il est également hello approche recommandée lorsque vous utilisez [géo-réplication](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5f91f-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="5f91f-166">Hello complète [simuler un utilisateur de supprimer accidentellement des données](#simulate-a-tenant-accidentally-deleting-data) section.</span><span class="sxs-lookup"><span data-stu-id="5f91f-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="5f91f-167">Ouvrir... \\Modules d’apprentissage\\continuité des activités et récupération d’urgence\\RestoreTenant\\_RestoreTenant.ps1 de démonstration_ Bonjour *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="5f91f-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="5f91f-168">Définissez **$DemoScenario** = **2**, définissez cette propriété trop**2** trop*client de restauration en parallèle*.</span><span class="sxs-lookup"><span data-stu-id="5f91f-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="5f91f-169">Appuyez sur **F5** script de hello toorun.</span><span class="sxs-lookup"><span data-stu-id="5f91f-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="5f91f-170">script de Hello restaure hello client de base de données (base de données tooa parallèle) tooa point dans le temps avant la suppression des événements hello dans la section précédente de hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="5f91f-171">Il crée une deuxième base de données, supprime toutes les métadonnées de catalogue existantes qui existe dans cette base de données et ajoute hello de base de données de catalogue toohello sous hello *ContosoConcertHall\_ancien* entrée.</span><span class="sxs-lookup"><span data-stu-id="5f91f-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="5f91f-172">script de démo Hello ouvre la page des événements hello dans votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="5f91f-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="5f91f-173">Note de l’URL de hello : ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` que cela est affichant les données de base de données restaurée de hello où *_old* est ajouté toohello nom.</span><span class="sxs-lookup"><span data-stu-id="5f91f-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="5f91f-174">Défilement hello événements répertoriés dans hello navigateur tooconfirm hello événements supprimés dans la section précédente de hello a été restaurée.</span><span class="sxs-lookup"><span data-stu-id="5f91f-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="5f91f-175">Notez ce client hello restauré exposition comme un client supplémentaire, avec ses propres tickets de toobrowse événements application, est peu probable toobe comment vous octroyez à qu'un locataire accéder aux toorestored données, mais sert tooeasily illustre le modèle de restauration hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="5f91f-176">En réalité, mieux vaudrait probablement conserver cette base de données restaurée pendant une période définie uniquement.</span><span class="sxs-lookup"><span data-stu-id="5f91f-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="5f91f-177">Vous pouvez supprimer la saisie du locataire hello restaurée une fois que vous avez terminé en appelant hello *Remove-RestoredTenant.ps1* script.</span><span class="sxs-lookup"><span data-stu-id="5f91f-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="5f91f-178">Définissez **$DemoScenario** trop**4** tooselect hello *supprimer restauré locataire* scénario.</span><span class="sxs-lookup"><span data-stu-id="5f91f-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="5f91f-179">**Appuyez****sur****F5** pour exécuter le script.</span><span class="sxs-lookup"><span data-stu-id="5f91f-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="5f91f-180">Hello *ContosoConcertHall\_ancien* entrée est supprimée de catalogue de hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="5f91f-181">Pour commencer, fermez la page des événements hello pour ce client dans votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="5f91f-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="5f91f-182">Restauration d’un client en place, en remplaçant la base de données de client existant hello</span><span class="sxs-lookup"><span data-stu-id="5f91f-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="5f91f-183">Cet exercice restaure point tooa de hello salle de Concert Contoso client dans le temps avant que l’événement de hello a été supprimé.</span><span class="sxs-lookup"><span data-stu-id="5f91f-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="5f91f-184">Hello *TenantInPlace de restauration* script restaure hello actuel locataire tooa nouvelle base de données pointant tooa les point précédent dans le temps, et suppressions hello de base de données d’origine.</span><span class="sxs-lookup"><span data-stu-id="5f91f-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="5f91f-185">Ce modèle de restauration est la mieux adapté pour la récupération à partir de grave corruption des données comme il peuvent y avoir des pertes de données importantes qui hello client aurait tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="5f91f-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="5f91f-186">Ouvrez le fichier **Demo-RestoreTenant.ps1** dans PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="5f91f-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="5f91f-187">Définissez **$DemoScenario** trop**5** tooselect hello *restauration du client dans un scénario sur place*.</span><span class="sxs-lookup"><span data-stu-id="5f91f-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="5f91f-188">Appuyez sur **F5** pour exécuter le script.</span><span class="sxs-lookup"><span data-stu-id="5f91f-188">Execute using **F5**.</span></span>

<span data-ttu-id="5f91f-189">script de Hello restaure point tooa de hello client de base de données de cinq minutes avant l’événement de hello a été supprimé.</span><span class="sxs-lookup"><span data-stu-id="5f91f-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="5f91f-190">Pour cela d’abord prendre hello Contoso salle de client en mode hors connexion et présentent donc aucune autre met à jour de données de toohello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="5f91f-191">Ensuite, une base de données parallèle est créée par la restauration à partir du point de restauration hello et nommé avec un horodateur de nom de base de données tooensure hello n'est pas en conflit avec le nom de base de données client existantes hello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="5f91f-192">Ensuite, hello ancienne base de données est supprimé et base de données restaurée hello est le nom de base de données d’origine renommée toohello.</span><span class="sxs-lookup"><span data-stu-id="5f91f-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="5f91f-193">Enfin, salle de Concert Contoso est remise à base de données en ligne tooallow hello application access toohello restaurée.</span><span class="sxs-lookup"><span data-stu-id="5f91f-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="5f91f-194">Vous avez restauré avec succès hello de base de données tooa point dans le temps avant l’événement de hello a été supprimé.</span><span class="sxs-lookup"><span data-stu-id="5f91f-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="5f91f-195">Hello s’ouvre le page événements, par conséquent, vérifiez les événements dernière hello a été restaurée.</span><span class="sxs-lookup"><span data-stu-id="5f91f-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="5f91f-196">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="5f91f-196">Next steps</span></span>

<span data-ttu-id="5f91f-197">Dans ce didacticiel, vous avez appris à :</span><span class="sxs-lookup"><span data-stu-id="5f91f-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="5f91f-198">Restaurer une base de données dans une base de données parallèle (côte à côte)</span><span class="sxs-lookup"><span data-stu-id="5f91f-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="5f91f-199">Restaurer une base de données sur place</span><span class="sxs-lookup"><span data-stu-id="5f91f-199">Restore a database in place</span></span>

[<span data-ttu-id="5f91f-200">Gérer le schéma de base de données client</span><span class="sxs-lookup"><span data-stu-id="5f91f-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="5f91f-201">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="5f91f-201">Additional resources</span></span>

* <span data-ttu-id="5f91f-202">Supplémentaires [didacticiels qui reposent sur hello application Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="5f91f-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="5f91f-203">Vue d’ensemble de la continuité de l’activité avec la base de données Azure SQL</span><span class="sxs-lookup"><span data-stu-id="5f91f-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="5f91f-204">En savoir plus sur les sauvegardes SQL Database</span><span class="sxs-lookup"><span data-stu-id="5f91f-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
