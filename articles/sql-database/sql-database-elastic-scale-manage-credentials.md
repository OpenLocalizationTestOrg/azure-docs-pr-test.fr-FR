---
title: "Gestion des informations d’identification dans la bibliothèque cliente de la base de données élastique | Microsoft Docs"
description: "Définition du niveau d’informations d’identification, de celui d’administrateur à celui de la lecture seule, pour les applications de base de données élastique."
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
editor: 
ms.assetid: 72e0edaf-795e-4856-84a5-6594f735fb7e
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 46908be2846062a0520d21e06db3091a4d711b0b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="credentials-used-to-access-the-elastic-database-client-library"></a><span data-ttu-id="ed31d-103">Informations d’identification utilisées pour accéder à la bibliothèque cliente de la base de données élastique</span><span class="sxs-lookup"><span data-stu-id="ed31d-103">Credentials used to access the Elastic Database client library</span></span>
<span data-ttu-id="ed31d-104">La [bibliothèque cliente de la base de données élastique](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) utilise trois types d’informations d’identification différents pour accéder au [gestionnaire des cartes de partitions](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="ed31d-104">The [Elastic Database client library](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) uses three different kinds  of credentials to access the [shard map manager](sql-database-elastic-scale-shard-map-management.md).</span></span> <span data-ttu-id="ed31d-105">En fonction du besoin, utilisez les informations d’identification avec le niveau d’accès le plus faible possible.</span><span class="sxs-lookup"><span data-stu-id="ed31d-105">Depending on the need, use the credential with  the lowest level of access possible.</span></span>

* <span data-ttu-id="ed31d-106">**Informations d'identification d'administration**: pour créer ou manipuler un gestionnaire des cartes de partitions.</span><span class="sxs-lookup"><span data-stu-id="ed31d-106">**Management credentials**: for creating or manipulating a shard map manager.</span></span> <span data-ttu-id="ed31d-107">(Voir le [glossaire](sql-database-elastic-scale-glossary.md).)</span><span class="sxs-lookup"><span data-stu-id="ed31d-107">(See the [glossary](sql-database-elastic-scale-glossary.md).)</span></span> 
* <span data-ttu-id="ed31d-108">**Informations d’identification d’accès**: pour accéder à un gestionnaire des cartes de partitions existant afin d’obtenir des informations sur les partitions.</span><span class="sxs-lookup"><span data-stu-id="ed31d-108">**Access credentials**: to access an existing shard map manager to obtain information about shards.</span></span>
* <span data-ttu-id="ed31d-109">**Informations d'identification de connexion**: pour se connecter à des partitions.</span><span class="sxs-lookup"><span data-stu-id="ed31d-109">**Connection credentials**: to connect to shards.</span></span> 

<span data-ttu-id="ed31d-110">Consultez également la section [Gestion des bases de données et des connexions dans la base de données Azure SQL](sql-database-manage-logins.md)</span><span class="sxs-lookup"><span data-stu-id="ed31d-110">See also [Managing databases and logins in Azure SQL Database](sql-database-manage-logins.md).</span></span> 

## <a name="about-management-credentials"></a><span data-ttu-id="ed31d-111">À propos des informations d'identification d'administration</span><span class="sxs-lookup"><span data-stu-id="ed31d-111">About management credentials</span></span>
<span data-ttu-id="ed31d-112">Les informations d’identification de gestion sont utilisées lors de la création d’un objet [**ShardMapManager**](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx) pour les applications qui manipulent des cartes de partitions.</span><span class="sxs-lookup"><span data-stu-id="ed31d-112">Management credentials are used to create a [**ShardMapManager**](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx) object for applications that manipulate shard maps.</span></span> <span data-ttu-id="ed31d-113">(Par exemple, consultez [Ajout d’une partition à l’aide des outils de base de données élastique](sql-database-elastic-scale-add-a-shard.md) et [Routage dépendant des données](sql-database-elastic-scale-data-dependent-routing.md).) L’utilisateur de la bibliothèque cliente de l’infrastructure élastique crée les utilisateurs et les connexions SQL nécessaires et s’assure qu’ils sont dotés des autorisations en lecture/écriture pour la base de données de cartes de partitions globale et pour toutes les bases de données de partitions.</span><span class="sxs-lookup"><span data-stu-id="ed31d-113">(For example, see [Adding a shard using Elastic Database tools](sql-database-elastic-scale-add-a-shard.md) and [Data dependent routing](sql-database-elastic-scale-data-dependent-routing.md)) The user of the elastic scale client library creates the SQL users and SQL logins and makes sure each is granted the read/write permissions on the global shard map database and all shard databases as well.</span></span> <span data-ttu-id="ed31d-114">Ces informations d'identification sont utilisées pour mettre à jour la carte de partitions globale et les cartes de partitions locales lorsque des modifications sont apportées à la carte de partitions.</span><span class="sxs-lookup"><span data-stu-id="ed31d-114">These credentials are used to maintain the global shard map and the local shard maps when changes to the shard map are performed.</span></span> <span data-ttu-id="ed31d-115">Par exemple, utilisez les informations d'identification de gestion pour créer l'objet de gestionnaire des cartes de partitions (en utilisant [**GetSqlShardMapManager**](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)) :</span><span class="sxs-lookup"><span data-stu-id="ed31d-115">For instance, use the management credentials to create the shard map manager object (using [**GetSqlShardMapManager**](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx):</span></span> 

    // Obtain a shard map manager. 
    ShardMapManager shardMapManager = ShardMapManagerFactory.GetSqlShardMapManager( 
            smmAdminConnectionString, 
            ShardMapManagerLoadPolicy.Lazy 
    ); 

<span data-ttu-id="ed31d-116">La variable **smmAdminConnectionString** est une chaîne de connexion qui comporte les informations d’identification de gestion.</span><span class="sxs-lookup"><span data-stu-id="ed31d-116">The variable **smmAdminConnectionString** is a connection string that contains the management credentials.</span></span> <span data-ttu-id="ed31d-117">L'identifiant utilisateur et le mot de passe fournissent l'accès en lecture/écriture à la base de données de cartes de partitions et aux partitions individuelles.</span><span class="sxs-lookup"><span data-stu-id="ed31d-117">The user ID and password provides read/write access to both shard map database and individual shards.</span></span> <span data-ttu-id="ed31d-118">La chaîne de connexion de gestion inclut également le nom du serveur et le nom de la base de données afin d'identifier la base de données de cartes de partitions globale.</span><span class="sxs-lookup"><span data-stu-id="ed31d-118">The management connection string also includes the server name and database name to identify the global shard map database.</span></span> <span data-ttu-id="ed31d-119">Voici une chaîne de connexion classique à cet effet :</span><span class="sxs-lookup"><span data-stu-id="ed31d-119">Here is a typical connection string for that purpose:</span></span>

     "Server=<yourserver>.database.windows.net;Database=<yourdatabase>;User ID=<yourmgmtusername>;Password=<yourmgmtpassword>;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;” 

<span data-ttu-id="ed31d-120">N’utilisez pas les valeurs sous la forme de «username@server», à la place utiliser simplement la valeur « username ».</span><span class="sxs-lookup"><span data-stu-id="ed31d-120">Do not use values in the form of "username@server"—instead just use the "username" value.</span></span>  <span data-ttu-id="ed31d-121">Cela vient du fait que les informations d’identification doivent fonctionner avec la base de données du gestionnaire de cartes de partitions et les partitions, qui peuvent se trouver sur différents serveurs.</span><span class="sxs-lookup"><span data-stu-id="ed31d-121">This is because credentials must work against both the shard map manager database and individual shards, which may be on different servers.</span></span>

## <a name="access-credentials"></a><span data-ttu-id="ed31d-122">Informations d’identification d’accès</span><span class="sxs-lookup"><span data-stu-id="ed31d-122">Access credentials</span></span>
<span data-ttu-id="ed31d-123">Lorsque vous créez un gestionnaire des cartes de partitions dans une application qui ne gère pas les cartes de partitions, utilisez les informations d'identification dotées des autorisations en lecture seule pour la carte de partitions globale.</span><span class="sxs-lookup"><span data-stu-id="ed31d-123">When creating a shard map manager in an application that does not administer shard maps, use credentials that have read-only permissions on the global shard map.</span></span> <span data-ttu-id="ed31d-124">Les informations extraites de la carte de partitions globale avec ces informations d’identification sont utilisées pour le [routage dépendant des données](sql-database-elastic-scale-data-dependent-routing.md) et pour remplir le cache de la carte de partitions sur le client.</span><span class="sxs-lookup"><span data-stu-id="ed31d-124">The information retrieved from the global shard map under these credentials are used for [data-dependent routing](sql-database-elastic-scale-data-dependent-routing.md) and to populate the shard map cache on the client.</span></span> <span data-ttu-id="ed31d-125">Les informations d’identification sont fournies via le même modèle d’appel à **GetSqlShardMapManager** que celui indiqué ci-dessus :</span><span class="sxs-lookup"><span data-stu-id="ed31d-125">The credentials are provided through the same call pattern to **GetSqlShardMapManager** as shown above:</span></span> 

    // Obtain shard map manager. 
    ShardMapManager shardMapManager = ShardMapManagerFactory.GetSqlShardMapManager( 
            smmReadOnlyConnectionString, 
            ShardMapManagerLoadPolicy.Lazy
    );  

<span data-ttu-id="ed31d-126">Notez l’utilisation de **smmReadOnlyConnectionString** afin de refléter l’utilisation d’informations d’identification différentes pour l’accès des utilisateurs **non-administrateurs** : ces informations d’identification ne doivent pas fournir d’autorisations d’écriture sur la carte de partitions globale.</span><span class="sxs-lookup"><span data-stu-id="ed31d-126">Note the use of the **smmReadOnlyConnectionString** to reflect the use of different credentials for this access on behalf of **non-admin** users: these credentials should not provide write permissions on the global shard map.</span></span> 

## <a name="connection-credentials"></a><span data-ttu-id="ed31d-127">Informations d'identification de connexion</span><span class="sxs-lookup"><span data-stu-id="ed31d-127">Connection credentials</span></span>
<span data-ttu-id="ed31d-128">Des informations d'identification supplémentaires sont requises lorsque vous utilisez la méthode [**OpenConnectionForKey**](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx) pour accéder à une partition associée à une clé.</span><span class="sxs-lookup"><span data-stu-id="ed31d-128">Additional credentials are needed when using the [**OpenConnectionForKey**](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx) method to access a shard associated with a sharding key.</span></span> <span data-ttu-id="ed31d-129">Ces informations d'identification doivent fournir des autorisations d'accès en lecture seule aux tables de la carte de partitions locale résidant sur la partition.</span><span class="sxs-lookup"><span data-stu-id="ed31d-129">These credentials need to provide permissions for read-only access to the local shard map tables residing on the shard.</span></span> <span data-ttu-id="ed31d-130">Cela est nécessaire pour effectuer une validation de connexion pour le routage dépendant des données sur la partition.</span><span class="sxs-lookup"><span data-stu-id="ed31d-130">This is needed to perform connection validation for data-dependent routing on the shard.</span></span> <span data-ttu-id="ed31d-131">Cet extrait de code permet l'accès à des données dans le contexte d’un routage dépendant des données :</span><span class="sxs-lookup"><span data-stu-id="ed31d-131">This code snippet allows data access in the context of data dependent routing:</span></span> 

    using (SqlConnection conn = rangeMap.OpenConnectionForKey<int>( 
    targetWarehouse, smmUserConnectionString, ConnectionOptions.Validate)) 

<span data-ttu-id="ed31d-132">Dans cet exemple, **smmUserConnectionString** comporte la chaîne de connexion correspondant aux informations d’identification de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ed31d-132">In this example, **smmUserConnectionString** holds the connection string for the user credentials.</span></span> <span data-ttu-id="ed31d-133">Pour la base de données SQL Azure, voici une chaîne de connexion classique pour les informations d'identification de l'utilisateur :</span><span class="sxs-lookup"><span data-stu-id="ed31d-133">For Azure SQL DB, here is a typical connection string for user credentials:</span></span> 

    "User ID=<yourusername>; Password=<youruserpassword>; Trusted_Connection=False; Encrypt=True; Connection Timeout=30;”  

<span data-ttu-id="ed31d-134">Comme avec les informations d’identification admin, ne pas valeurs sous la forme de «username@server».</span><span class="sxs-lookup"><span data-stu-id="ed31d-134">As with the admin credentials, do not values in the form of "username@server".</span></span> <span data-ttu-id="ed31d-135">Utilisez simplement « username ».</span><span class="sxs-lookup"><span data-stu-id="ed31d-135">Instead, just use "username".</span></span>  <span data-ttu-id="ed31d-136">Notez également que la chaîne de connexion ne comporte pas de nom de serveur et de nom de base de données.</span><span class="sxs-lookup"><span data-stu-id="ed31d-136">Also note that the connection string does not contain a server name and database name.</span></span> <span data-ttu-id="ed31d-137">En effet, l’appel de **OpenConnectionForKey** dirige automatiquement la connexion vers la partition appropriée en fonction de la clé.</span><span class="sxs-lookup"><span data-stu-id="ed31d-137">That is because the **OpenConnectionForKey** call will automatically direct the connection to the correct shard based on the key.</span></span> <span data-ttu-id="ed31d-138">Par conséquent, il n'est pas nécessaire de fournir les noms de la base de données et du serveur.</span><span class="sxs-lookup"><span data-stu-id="ed31d-138">Hence, the database name and server name are not provided.</span></span> 

## <a name="see-also"></a><span data-ttu-id="ed31d-139">Consultez également la section </span><span class="sxs-lookup"><span data-stu-id="ed31d-139">See also</span></span>
[<span data-ttu-id="ed31d-140">Gestion des bases de données et des connexions dans Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="ed31d-140">Managing databases and logins in Azure SQL Database</span></span>](sql-database-manage-logins.md)

[<span data-ttu-id="ed31d-141">Sécurisation de votre base de données SQL</span><span class="sxs-lookup"><span data-stu-id="ed31d-141">Securing your SQL Database</span></span>](sql-database-security-overview.md)

[<span data-ttu-id="ed31d-142">Prise en main de Tâches de bases de données élastiques</span><span class="sxs-lookup"><span data-stu-id="ed31d-142">Getting started with Elastic Database jobs</span></span>](sql-database-elastic-jobs-getting-started.md)

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

