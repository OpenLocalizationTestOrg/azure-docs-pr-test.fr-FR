---
title: "conseils de réglage des performances de base de données SQL aaaAzure | Documents Microsoft"
description: "Cet article peut vous aider à déterminer quels toochoose de niveau de service pour votre application. Il recommande également des méthodes tootune votre hello de tooget application plus à partir de la base de données SQL Azure."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="cbeb3-104">Optimisation des performances dans Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="cbeb3-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="cbeb3-105">Base de données SQL Azure fournit [recommandations](sql-database-advisor.md) que vous pouvez utiliser tooimprove les performances de votre base de données, ou vous pouvez laisser la base de données SQL Azure [automatiquement adapter tooyour application](sql-database-automatic-tuning.md) et appliquer les modifications qui améliore les performances de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="cbeb3-106">Vous n’avez pas de recommandations applicables et vous rencontrez toujours des problèmes de performances, vous pouvez utiliser hello suivant performances tooimprove de méthodes :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="cbeb3-107">Augmenter [niveaux de service](sql-database-service-tiers.md) et fournir la base de données de plusieurs ressources tooyour.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="cbeb3-108">Paramétrez votre application et appliquez quelques meilleures pratiques susceptibles d’améliorer les performances.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="cbeb3-109">Paramétrer la base de données de hello en modifiant des index et des requêtes toomore travailler efficacement avec des données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="cbeb3-110">Il s’agit des méthodes manuelles, car vous devez toodecide que [niveaux de service](sql-database-service-tiers.md) vous choisiriez ou que vous avez besoin de toorewrite application ou le code de base de données et deply des modifications de hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="cbeb3-111">Augmentation du niveau de performance de votre base de données</span><span class="sxs-lookup"><span data-stu-id="cbeb3-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="cbeb3-112">Azure SQL Database propose quatre [niveaux de service](sql-database-service-tiers.md) : De base, Standard, Premium et Premium RS. Les performances sont mesurées en unités de débit de base de données, ou [DTU](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="cbeb3-113">Chaque niveau de service isole strictement ressources hello que votre base de données SQL peut utiliser et de garantie des performances prévisibles pour ce niveau de service.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="cbeb3-114">Dans cet article, nous vous proposons des conseils qui peuvent vous aider à choisir le niveau de service hello pour votre application.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="cbeb3-115">Nous abordons également les méthodes que vous pouvez paramétrer votre hello de tooget application plus à partir de la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="cbeb3-116">Cet article se concentre sur les recommandations de performances pour les bases de données uniques dans Microsoft Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="cbeb3-117">Pour obtenir des conseils de performances des pools de tooelastic connexes, consultez [considérations de prix et de performances pour les pools élastiques](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="cbeb3-118">Notez, cependant, que vous pouvez appliquer un grand nombre de recommandations dans ce toodatabases article dans un pool élastique de paramétrage de hello et obtenir les avantages de performances similaires.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="cbeb3-119">**Base**: hello du service de base niveau offres bonne prévisibilité de performance pour chaque base de données, à l’heure sur l’heure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="cbeb3-120">Dans une base de données De base, des ressources suffisantes prennent en charge de bonnes performances au sein d’une petite instance qui ne présente pas plusieurs requêtes simultanées.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="cbeb3-121">Voici quelques cas d’usage classiques pour lesquels vous devez utiliser le niveau de service De base :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="cbeb3-122">**Vous débutez juste avec Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="cbeb3-123">Bien souvent, les applications en cours de développement ne requièrent pas de hauts niveaux de performances.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="cbeb3-124">Les bases de données De base constituent un environnement idéal pour le développement ou le test des bases de données, et ce, à moindre coût.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="cbeb3-125">**Vous disposez d’une base de données avec un utilisateur unique**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-125">**You have a database with a single user**.</span></span> <span data-ttu-id="cbeb3-126">Généralement, les applications qui associent un seul utilisateur à une base de données n’ont pas des exigences élevées en matière d’accès concurrentiel et de performances.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="cbeb3-127">Ces applications sont des candidats pour le niveau de service Basic de hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="cbeb3-128">**Standard**: niveau de service Standard hello offre prévisibilité des performances améliorées et fournit de bonnes performances pour les bases de données qui ont plusieurs demandes simultanées, telles que les applications web et de groupe de travail.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="cbeb3-129">Lorsque vous choisissez une base de données de niveau de service Standard, vous pouvez dimensionner votre application de base de données en fonction de performances prévisibles, minute après minute.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="cbeb3-130">**Votre base de données présente de multiples requêtes simultanées**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="cbeb3-131">Les applications utilisées simultanément par plusieurs utilisateurs requièrent généralement des niveaux de performances plus élevés.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="cbeb3-132">Par exemple, les applications web ou de groupe de travail qui ont des exigences de trafic d’e/s toomedium basse prenant en charge plusieurs requêtes simultanées sont idéales pour un niveau de service Standard hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="cbeb3-133">**Premium**: niveau de service Premium hello fournit des performances prévisibles, deuxième par seconde, pour chaque base de données Premium.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="cbeb3-134">Lorsque vous choisissez le niveau de service Premium hello, vous pouvez redimensionner votre application de base de données basée sur les pics de charge hello pour cette base de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="cbeb3-135">plan de Hello supprime un cas dans lequel écart de performances peut entraîner des tootake de petites requêtes plus longtemps que prévu dans des opérations sensibles.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="cbeb3-136">Ce modèle peut considérablement simplifier cycles hello développement et de produit de la validation pour les applications qui doivent toomake des instructions fortes sur les besoins en ressources pointe, écart de performance ou latence de la requête.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="cbeb3-137">La plupart des cas d’utilisation du niveau de service Premium présentent une ou plusieurs de ces caractéristiques :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="cbeb3-138">**Pic de charge élevés**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-138">**High peak load**.</span></span> <span data-ttu-id="cbeb3-139">Une application qui nécessite d’importante UC, la mémoire ou entrée/sortie (e/s) toocomplete ses opérations requiert un niveau de dédié, hautes performances.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="cbeb3-140">Par exemple, une opération de base de données appelée tooconsume plusieurs cœurs d’UC pendant une période prolongée est un candidat pour la couche de service Premium hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="cbeb3-141">**Plusieurs requêtes simultanées**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-141">**Many concurrent requests**.</span></span> <span data-ttu-id="cbeb3-142">Certaines applications de base de données gèrent de nombreuses demandes simultanées, par exemple un site web avec un volume de trafic élevé.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="cbeb3-143">Base et Standard niveaux de service de limitent le nombre de hello de demandes simultanées par base de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="cbeb3-144">Les applications qui nécessitent des connexions plus doivent toochoose un réservation appropriée taille toohandle hello nombre maximal de demandes nécessaires.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="cbeb3-145">**Latence faible**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-145">**Low latency**.</span></span> <span data-ttu-id="cbeb3-146">Certaines applications ont besoin tooguarantee une réponse à partir de la base de données hello dans un minimum de temps.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="cbeb3-147">Si une procédure stockée spécifique est appelée dans le cadre d’une opération de client plus large, vous pouvez avoir une exigence toohave un retour de cet appel dans pas plus de 20 millisecondes, 99 % du temps de hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="cbeb3-148">Ce type d’avantages des applications à partir de la couche de service Premium hello, toomake, vérifiez que ce hello nécessaires de puissance de calcul est disponible.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="cbeb3-149">**Premium RS**: hello de niveau Premium RS est conçu pour les charges de travail gourmandes en e/s qui ne nécessitent pas hello garanties de disponibilité le plus élevés.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="cbeb3-150">Exemples incluent le test des charges de travail hautes performances, ou une charge de travail analytique où la base de données hello n’est pas système hello d’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="cbeb3-151">niveau de service Hello dont vous avez besoin pour votre base de données SQL varie selon les conditions de charge maximale hello pour chaque dimension de ressource.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="cbeb3-152">Certaines applications utilisent une quantité insignifiante pour une ressource mais ont des exigences considérables pour d’autres.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="cbeb3-153">Capacités et limites des niveaux de service</span><span class="sxs-lookup"><span data-stu-id="cbeb3-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="cbeb3-154">À chaque niveau de service, vous définissez les niveaux de performances hello afin que vous ayez toopay de flexibilité hello uniquement pour la capacité de hello que nécessaire.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="cbeb3-155">Vous pouvez [ajuster la capacité](sql-database-service-tiers.md), en l’augmentant ou en la diminuant, en fonction de l’évolution de la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="cbeb3-156">Par exemple, si votre charge de travail de base de données est élevée pendant la saison d’achat de hello précédent à l’école, vous pouvez augmenter le niveau de performance hello pour la base de données hello pendant une période définie, juillet à septembre.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="cbeb3-157">Il est ensuite possible de le réduire à la fin de la période chargée.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="cbeb3-158">Vous pouvez réduire les frais en optimisant votre saisonnalité de toohello environnement cloud de votre entreprise.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="cbeb3-159">Ce modèle fonctionne également bien pour les cycles de version de logiciels.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="cbeb3-160">Une équipe de test peut allouer de la capacité pendant des séries de test, et libérer cette capacité une fois les tests terminés.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="cbeb3-161">Dans un modèle de requête de capacité, vous payez uniquement la capacité nécessaire, en évitant de financer des ressources dédiées que vous n’utiliseriez que rarement.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="cbeb3-162">Pourquoi des niveaux de service ?</span><span class="sxs-lookup"><span data-stu-id="cbeb3-162">Why service tiers?</span></span>
<span data-ttu-id="cbeb3-163">Bien que chaque charge de travail de base de données peut être différentes, hello des niveaux de service vise tooprovide prévisibilité des performances à différents niveaux de performances.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="cbeb3-164">Les clients présentant des exigences d’envergure en matière de ressources de bases de données peuvent opérer dans un environnement informatique davantage dédié.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="cbeb3-165">Paramétrer votre application</span><span class="sxs-lookup"><span data-stu-id="cbeb3-165">Tune your application</span></span>
<span data-ttu-id="cbeb3-166">Dans SQL Server local traditionnel, hello processus de planification de la capacité initiale souvent est distinct hello processus d’exécution d’une application en production.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="cbeb3-167">Le matériel et les licences de produit sont achetés dans un premier temps, tandis que le paramétrage des performances est exécuté ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="cbeb3-168">Lorsque vous utilisez la base de données SQL Azure, il est un processus de hello toointerweave bonne idée de l’exécution d’une application et son paramétrage.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="cbeb3-169">Avec le modèle hello de paiement pour la capacité à la demande, vous pouvez paramétrer votre application toouse hello ressources minimales maintenant, au lieu de ressources matérielles en fonction de conjectures de plans de croissance future pour une application, qui sont souvent incorrects.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="cbeb3-170">Certains clients peuvent choisir tootune pas une application et choisissez plutôt toooverprovision des ressources matérielles.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="cbeb3-171">Cette approche peut s’avérer utile si vous ne souhaitez pas toochange une clé de l’application pendant une période d’activité.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="cbeb3-172">Toutefois, le paramétrage d’une application peut réduire les besoins en ressources et les factures mensuelles lorsque vous utilisez des niveaux de service hello dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="cbeb3-173">Caractéristiques des applications</span><span class="sxs-lookup"><span data-stu-id="cbeb3-173">Application characteristics</span></span>
<span data-ttu-id="cbeb3-174">Bien que les niveaux de service de base de données SQL Azure de configuration et la stabilité des performances tooimprove conçu pour une application, certaines meilleures pratiques peuvent vous aider à optimiser votre toobetter tirer parti des applications de ressources hello à un niveau de performances.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="cbeb3-175">Bien que de nombreuses applications ont des gains de performances significatifs simplement en commutation tooa plus élevé de niveau de performance ou de service de niveau, certaines applications ont besoin réglage toobenefit à partir d’un niveau plus élevé de service supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="cbeb3-176">Pour améliorer les performances, envisagez de procéder à un paramétrage supplémentaire sur les applications présentant ces caractéristiques :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="cbeb3-177">**Les applications dont les performances sont lentes en raison d’un comportement bavard**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="cbeb3-178">Applications bavardes effectuer des opérations d’accès aux données excessive qui sont sensibles toonetwork latence.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="cbeb3-179">Vous devrez peut-être toomodify ces types de nombre de hello tooreduce applications de base de données de données access operations toohello SQL.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="cbeb3-180">Par exemple, vous pouvez améliorer les performances de l’application à l’aide de techniques telles que le traitement par lot des requêtes ad hoc ou déplacement hello interroge toostored procédures.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="cbeb3-181">Pour plus d’informations, consultez la section [Traitement par lot des requêtes](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="cbeb3-182">**Bases de données présentant une charge de travail intensive ne pouvant pas être prise en charge par un seul ordinateur**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="cbeb3-183">Bases de données qui dépassent les ressources hello de plus haut niveau de performance Premium hello peuvent tirer parti de la montée en charge de travail hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="cbeb3-184">Pour plus d’informations, consultez les sections [Partitionnement entre plusieurs bases de données](#cross-database-sharding) et [Partitionnement fonctionnel](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="cbeb3-185">**Applications présentant des requêtes non optimales**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="cbeb3-186">Applications, particulièrement celles qui sont dans la couche d’accès aux données hello, qui ont des requêtes mal paramétrées ne peuvent pas bénéficier d’un niveau de performance supérieur.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="cbeb3-187">Cela inclut les requêtes dépourvues d’une clause WHERE et les requêtes présentant des index manquants ou des statistiques obsolètes.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="cbeb3-188">Ces applications bénéficient des techniques de paramétrage des performances de requête standard.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="cbeb3-189">For more information, consultez les sections [Index manquants](#identifying-and-adding-missing-indexes) et [Paramétrage/Compréhension de requêtes](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="cbeb3-190">**Les applications dotées d’un accès aux données non optimal**.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="cbeb3-191">Les applications qui rencontrent des problèmes inhérents de concurrence d’accès aux données, par exemple d’interblocage, peuvent ne pas tirer parti d’un niveau de performances supérieur.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="cbeb3-192">Envisagez de réduire les allers-retours sur hello base de données SQL Azure en cache des données côté client de hello avec hello service Caching de Azure ou une autre technologie de mise en cache.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="cbeb3-193">Consultez la section [Mise en cache de la couche Application](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="cbeb3-194">Optimiser votre base de données</span><span class="sxs-lookup"><span data-stu-id="cbeb3-194">Tune your database</span></span>
<span data-ttu-id="cbeb3-195">Dans cette section, nous examiner quelques techniques que vous pouvez utiliser les meilleures performances tootune base de données SQL Azure toogain hello pour votre application et l’exécuter au niveau de performances possibles hello plus bas.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="cbeb3-196">Certaines de ces techniques correspondent aux meilleures pratiques de paramétrage de traditionnel SQL Server, mais d’autres sont spécifique tooAzure de base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="cbeb3-197">Dans certains cas, vous pouvez examiner les ressources hello consommée pour un paramétrage de base de données toofind zones toofurther et étendre toowork de techniques traditionnel SQL Server dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="cbeb3-198">Identifier les problèmes de performances à l’aide du portail Azure</span><span class="sxs-lookup"><span data-stu-id="cbeb3-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="cbeb3-199">Hello suivant outils Bonjour portail Azure peut vous aider à analyser et résoudre les problèmes de performances avec votre base de données SQL :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="cbeb3-200">Query Performance Insight</span><span class="sxs-lookup"><span data-stu-id="cbeb3-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="cbeb3-201">SQL Database Advisor</span><span class="sxs-lookup"><span data-stu-id="cbeb3-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="cbeb3-202">portail Azure Hello a plus d’informations sur ces deux outils et comment toouse les.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="cbeb3-203">tooefficiently diagnostiquer et corriger les problèmes, nous vous recommandons d’essayer les outils hello Bonjour portail Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="cbeb3-204">Nous vous recommandons d’utiliser manuel hello approches que nous avons abordées ensuite, index et paramétrage des requêtes, dans certains cas manquent de paramétrage.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="cbeb3-205">Découvrez plus d’informations sur l’identification des problèmes dans Azure SQL Database dans l’article [Analyse des performances](sql-database-single-database-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="cbeb3-206">Identification et ajout d’index manquants</span><span class="sxs-lookup"><span data-stu-id="cbeb3-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="cbeb3-207">Un problème courant dans les performances de base de données OLTP concerne la conception de base de données physique toohello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="cbeb3-208">Souvent, les schémas de base de données sont conçus et livrés sans test de mise à l’échelle (en charge ou en volume de données).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="cbeb3-209">Malheureusement, les performances de hello d’un plan de requête peuvent être acceptables à petite échelle, mais dégrader considérablement sous les volumes de données au niveau de la production.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="cbeb3-210">Hello plus courante de ce problème est le manque de hello de filtres de toosatisfy index appropriés ou d’autres restrictions dans une requête.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="cbeb3-211">Souvent, cela se manifeste comme une analyse de table là où une recherche d’index pourrait suffire.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="cbeb3-212">Dans cet exemple, le plan de requête sélectionné hello utilise une analyse lorsqu’une recherche suffit :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Un plan de requête avec index manquants](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="cbeb3-214">Azure SQL Database peut vous aider à rechercher et à corriger les conditions communes d’index manquants.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="cbeb3-215">Vues de gestion dynamique qui sont intégrées à la base de données SQL Azure examiner de compilations de requête dans laquelle un index réduit de manière significative hello estimé coût toorun une requête.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="cbeb3-216">Pendant l’exécution de la requête SQL de base de données effectue le suivi de la fréquence à laquelle chaque plan de requête est exécutée, et hello de pistes estimé écart entre hello hello et plan de requête d’exécution imaginer un où cet index existait.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="cbeb3-217">Vous pouvez utiliser ces estimation de tooquickly DMV quelle conception de base de données physique tooyour modifications peut améliorer le coût de la charge de travail global pour une base de données et sa charge de travail réelle.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="cbeb3-218">Vous pouvez utiliser ce potentiel tooevaluate de requête index manquants :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="cbeb3-219">Dans cet exemple, hello requête a généré cette suggestion :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="cbeb3-220">Après sa création, cette même instruction SELECT sélectionne un autre plan, qui utilise une recherche au lieu d’une analyse, puis exécute le plan de hello plus efficacement :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Un plan de requête avec index corrigés](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="cbeb3-222">un aperçu de la clé de Hello est cette capacité d’e/s d’une salutation, système est plus limitée que celle d’un ordinateur serveur dédié.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="cbeb3-223">Il est primordial de réduire inutile d’e/s tootake au mieux les capacités du système hello Bonjour DTU de chaque niveau de performance des niveaux de service de base de données SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="cbeb3-224">Choix de conception physique appropriée de la base de données peut considérablement améliorer la latence hello pour les requêtes individuelles, améliorer le débit hello de demandes simultanées traitées par unité d’échelle et réduire la requête de hello hello coûts toosatisfy requis.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="cbeb3-225">Pour plus d’informations sur hello manquant index DMV, consultez [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="cbeb3-226">Paramétrage/Compréhension de requêtes</span><span class="sxs-lookup"><span data-stu-id="cbeb3-226">Query tuning and hinting</span></span>
<span data-ttu-id="cbeb3-227">optimiseur de requête Hello dans la base de données SQL Azure est semblable toohello optimiseur de requête SQL Server traditionnel.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="cbeb3-228">La plupart des méthodes conseillées pour le paramétrage des requêtes et hello compréhension raisonnement également les limitations du modèle pour l’optimiseur de requête hello hello s’appliquent tooAzure base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="cbeb3-229">Si vous ajustez les requêtes dans la base de données SQL Azure, vous pouvez obtenir l’avantage supplémentaire de hello de réduire les besoins de ressources globales.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="cbeb3-230">Votre application peut être en mesure de toorun à un coût inférieur à un équivalent non paramétré, car il s’exécute à un niveau de performances inférieur.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="cbeb3-231">Un exemple qui est courant dans SQL Server et qui s’applique également tooAzure base de données SQL est comment hello optimiseur « espionne » des paramètres de requête.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="cbeb3-232">Lors de la compilation, optimiseur de requête hello renvoie la valeur actuelle de hello d’un paramètre de toodetermine si elle peut générer un plan de requête plus optimal.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="cbeb3-233">Bien que cette stratégie mène souvent plan de requête tooa beaucoup plus rapide qu’un plan compilé sans valeurs de paramètre connus, il fonctionne actuellement pourtour à la fois dans SQL Server et dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="cbeb3-234">Parfois, le paramètre hello n’est pas surveillé et parfois paramètre hello est surveillé, mais les plan généré hello est optimal pour hello les ensemble de valeurs de paramètre dans une charge de travail.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="cbeb3-235">Microsoft inclut des indicateurs de requête (directives) afin que vous pouvez spécifier l’intention plus délibérément et remplacer le comportement par défaut de hello de détection de paramètres.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="cbeb3-236">Souvent, si vous utilisez des indicateurs, vous pouvez corriger le cas dans lesquels le comportement de SQL Server ou de la base de données SQL Azure hello par défaut est imparfait pour une charge de travail client spécifique.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="cbeb3-237">Hello l’exemple suivant montre comment processeur de requêtes hello peut générer un plan qui n’est pas optimal pour les performances et besoins en ressources.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="cbeb3-238">Cet exemple vous montre que si vous utilisez un indicateur de requête, vous pouvez réduire la durée d’exécution et le nombre de ressources requises pour votre base de données SQL :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="cbeb3-239">le code de configuration Hello crée une table qui a dévié distribution des données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="cbeb3-240">requête optimal de Hello diffère de plan basés sur le paramètre est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="cbeb3-241">Malheureusement, comportement de mise en cache de plan de hello ne recompilez toujours requête hello en fonction de la valeur du paramètre hello plus courantes.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="cbeb3-242">Par conséquent, il est possible pour un toobe de plans non optimaux en cache et utilisé pour de nombreuses valeurs, même si un autre plan peut être un meilleur choix de plan en moyenne.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="cbeb3-243">Plan de requête hello crée ensuite deux procédures stockées qui sont identiques, sauf qu’un a un indicateur de requête spéciaux.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="cbeb3-244">**Exemple, partie 1**</span><span class="sxs-lookup"><span data-stu-id="cbeb3-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="cbeb3-245">**Exemple, partie 2**</span><span class="sxs-lookup"><span data-stu-id="cbeb3-245">**Example, part 2**</span></span>

<span data-ttu-id="cbeb3-246">(Nous vous recommandons de patienter au moins 10 minutes avant de commencer la partie 2 de l’exemple de hello, afin que les résultats de hello sont distinctes dans hello résultant des données de télémétrie.)</span><span class="sxs-lookup"><span data-stu-id="cbeb3-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="cbeb3-247">Chaque partie de cet exemple tente toorun une instruction insert paramétrable 1 000 fois (toogenerate un toouse charge suffisante comme un jeu de données de test).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="cbeb3-248">Lorsqu’il exécute des procédures stockées, processeur de requêtes hello examine la valeur de paramètre hello est passé toohello procédure lors de sa première compilation (« détection des paramètres »).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="cbeb3-249">processeur de Hello met en cache de plan obtenu de hello et utilise pour les appels ultérieurs, même si la valeur du paramètre hello est différente.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="cbeb3-250">plan optimal de Hello ne peut pas être utilisé dans tous les cas.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="cbeb3-251">Vous devez parfois tooguide hello optimiseur toopick un plan qui est préférable pour les cas moyen hello plutôt que des cas hello de lorsque hello a été tout d’abord de compiler la requête.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="cbeb3-252">Dans cet exemple, le plan initial de hello génère un plan de « analyse » qui lit toutes les lignes toofind chaque valeur qui correspond au paramètre hello :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Optimisation des requêtes à l’aide d’un plan d’analyse](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="cbeb3-254">Étant donné que nous avons exécuté la procédure de hello à l’aide de la valeur de hello 1, hello le plan obtenu était optimal pour la valeur de hello 1 mais était optimal pour toutes les autres valeurs dans la table de hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="cbeb3-255">résultat de Hello probable n’est pas ce que vous pouvez si vous étiez toopick chaque plan de façon aléatoire, car le plan de hello s’exécute plus lentement et utilise davantage de ressources.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="cbeb3-256">Si vous exécutez le test hello avec `SET STATISTICS IO` défini trop`ON`, le travail d’analyse logique de hello dans cet exemple est effectué coulisses hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="cbeb3-257">Vous pouvez voir qu’il y 1,148 lectures effectuées par plan hello (ce qui est inefficace, si les cas moyen hello est tooreturn une seule ligne) :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Optimisation des requêtes à l’aide d’une analyse logique](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="cbeb3-259">Hello deuxième partie de hello exemple utilise un toouse de l’optimiseur de requête indicateur tootell hello une valeur spécifique au cours du processus de compilation hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="cbeb3-260">Dans ce cas, il force hello processeur tooignore hello valeur de requête qui est passée comme paramètre de hello, et à la place tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="cbeb3-261">Valeur tooa ayant une fréquence moyenne de hello dans la table hello (en ignorant l’inclinaison) fait référence.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="cbeb3-262">plan obtenu de Hello est un plan en fonction de recherche qui est plus rapide et utilise moins de ressources, en moyenne, que le plan de hello dans la partie 1 de cet exemple :</span><span class="sxs-lookup"><span data-stu-id="cbeb3-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Optimisation des requêtes à l’aide d’un indicateur de requête](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="cbeb3-264">Vous pouvez voir effet hello Bonjour **sys.resource_stats** table (il existe un délai entre hello que vous exécutez un test de hello et lorsque les données de salutation remplissent la table de hello).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="cbeb3-265">Pour cet exemple, partie 1 exécutées au cours de la fenêtre de temps 22:25:00 hello et partie 2 exécutée à 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="cbeb3-266">Hello fenêtre temporelle a utilisé plus de ressources dans cette fenêtre de temps que hello une version ultérieure (en raison de l’amélioration de l’efficacité du plan).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Résultats des exemples de paramétrage des requêtes](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="cbeb3-268">Bien que le volume de hello dans cet exemple est intentionnellement petit, effet hello des paramètres non optimaux peut être substantiel, notamment sur les bases de données volumineuses.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="cbeb3-269">différence de Hello, dans les cas extrêmes, peut être comprise entre secondes pour les cas rapides et des heures pour les cas lentes.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="cbeb3-270">Vous pouvez examiner **sys.resource_stats** toodetermine si la ressource hello pour un test utilise plus ou moins de ressources qu’un autre test.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="cbeb3-271">Lorsque vous comparez des données, séparez minutage hello de tests afin qu’ils ne soient pas hello même fenêtre de 5 minutes dans hello **sys.resource_stats** vue.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="cbeb3-272">Hello exercice de hello vise toominimize hello quantité de ressources utilisées et pas toominimize hello ressources.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="cbeb3-273">En règle générale, l’optimisation d’une partie de code pour la latence permet également de réduire l’utilisation des ressources.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="cbeb3-274">Vérifiez que hello modifications tooan application sont nécessaires, et que les modifications de hello n’affectent à l’expérience utilisateur hello pour une personne qui peut être à l’aide des indicateurs de requête dans une application hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="cbeb3-275">Si une charge de travail est un ensemble de répétition des requêtes, souvent il rend le sens toocapture et valider l’Optimalité de hello de votre choix de plan car elle détermine hello minimale des ressources taille unité toohost requis hello base de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="cbeb3-276">Une fois que vous le validez, parfois réexaminer les plans hello que toohelp pour vous assurer qu’ils se ne sont pas dégradés.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="cbeb3-277">Pour plus d’informations, consultez la page [Indicateurs de requête (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="cbeb3-278">Partitionnement entre plusieurs bases de données</span><span class="sxs-lookup"><span data-stu-id="cbeb3-278">Cross-database sharding</span></span>
<span data-ttu-id="cbeb3-279">Étant donné que la base de données SQL Azure s’exécute sur du matériel, les limites de capacité hello pour une base de données sont plus faible que pour une installation de SQL Server locale traditionnelle.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="cbeb3-280">Certains clients utilisent des opérations de base de données de partitionnement techniques toospread sur plusieurs bases de données lors des opérations de hello ne correspondent pas à l’intérieur des limites de hello d’une base de données dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="cbeb3-281">La plupart des clients utilisant des techniques de partitionnement dans Microsoft Azure SQL Database fractionnent leurs données dans une seule dimension sur plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="cbeb3-282">Pour cette approche, vous devez toounderstand que les applications OLTP exécutent souvent les transactions qui s’appliquent tooonly un tooa petit groupe de lignes ou de lignes de schéma de hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="cbeb3-283">Base de données SQL fournit désormais une tooassist bibliothèque avec le partitionnement.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="cbeb3-284">Pour en savoir plus, consultez [Vue d'ensemble de la bibliothèque cliente de bases de données élastiques](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="cbeb3-285">Par exemple, si une base de données a le nom du client, l’ordre et les détails de commande (par exemple hello de base de données exemple Northwind fournie avec SQL Server), vous pourriez fractionner ces données dans plusieurs bases de données en regroupant un client avec hello liées order et order detail plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="cbeb3-286">Vous pouvez garantir que les données de ce client hello restent dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="cbeb3-287">application Hello fractionne différents clients entre les bases de données, en répartissant efficacement hello charge entre plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="cbeb3-288">Avec le partitionnement, les clients non seulement peuvent éviter de limite de taille maximale de la base de données hello, mais la base de données SQL Azure peut également traiter des charges de travail qui sont beaucoup plus importantes que les limites de hello de hello différents niveaux de performance, tant que chaque base de données s’adapte à son DTU.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="cbeb3-289">Partitionnement de base de données ne réduit la capacité des ressources globales hello pour une solution, mais il est très efficace au niveau de la prise en charge de très grandes solutions qui sont réparties sur plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="cbeb3-290">Chaque base de données peut exécuter à un autre performances au niveau toosupport très volumineux, des bases de données « efficaces » avec des besoins importants en ressources.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="cbeb3-291">Partitionnement fonctionnel</span><span class="sxs-lookup"><span data-stu-id="cbeb3-291">Functional partitioning</span></span>
<span data-ttu-id="cbeb3-292">Les utilisateurs SQL Server combinent bien souvent de nombreuses fonctions dans une seule base de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="cbeb3-293">Par exemple, si une application possède un inventaire de toomanage logique d’un magasin, cette base de données peut avoir la logique associée à l’inventaire, le suivi des bons de commande, des procédures stockées et vues indexées ou matérialisées qui gèrent la création de rapports de fin de mois.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="cbeb3-294">Cette technique rend plus facile tooadminister hello base de données pour les opérations telles que la sauvegarde, mais elle nécessite également vous toosize hello matériel toohandle hello pics de charge toutes les fonctions d’une application.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="cbeb3-295">Si vous utilisez une architecture de montée en puissance parallèle dans la base de données SQL Azure, il est une bonne idée toosplit différentes fonctions d’une application dans différentes bases de données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="cbeb3-296">En appliquant cette technique, chaque application est mise à l’échelle indépendamment.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="cbeb3-297">Comme une application devient plus occupée (et hello charge sur les augmentations de base de données hello), administrateur de hello peut choisir des niveaux de performance indépendants pour chaque fonction dans l’application hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="cbeb3-298">La limite hello, avec cette architecture, une application peut être plus grande qu’un seul ordinateur peut gérer, car la charge de hello est répartie sur plusieurs ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="cbeb3-299">Traitement par lot des requêtes</span><span class="sxs-lookup"><span data-stu-id="cbeb3-299">Batch queries</span></span>
<span data-ttu-id="cbeb3-300">Pour les applications qui accèdent aux données à l’aide de haut volume, fréquentes, ad hoc d’interrogation, une quantité substantielle de temps de réponse est passée sur la communication réseau entre les couches d’application de hello et base de données SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="cbeb3-301">Même si les deux hello d’application et de base de données SQL Azure sont Bonjour même centre de données, latence du réseau hello entre hello deux peut être accru par un grand nombre d’opérations d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="cbeb3-302">réseau de hello tooreduce round voyages pour les données de salutation opérations d’accès, envisagez d’utiliser des requêtes ad hoc hello du lot tooeither hello option ou toocompile en tant que procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="cbeb3-303">Si les requêtes ad hoc hello par lot, vous pouvez envoyer plusieurs requêtes comme un lot volumineux dans une base de données SQL de tooAzure voyage unique.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="cbeb3-304">Si vous compilez les requêtes ad hoc dans une procédure stockée, vous pourriez obtenir hello que même résultat comme si leur traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="cbeb3-305">Utiliser une procédure stockée également donne vous hello avantage d’augmenter les possibilités de hello de mise en cache des plans de requête hello dans la base de données SQL Azure afin de pouvoir utiliser hello procédure stockée à nouveau.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="cbeb3-306">Certaines applications sont gourmandes en écriture.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-306">Some applications are write-intensive.</span></span> <span data-ttu-id="cbeb3-307">Parfois, vous pouvez réduire les charge e/s total hello sur une base de données en considérant comment toobatch écrit ensemble.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="cbeb3-308">Souvent, cela est aussi simple que d’utiliser des transactions explicites au lieu des transactions de validation automatique dans les procédures stockées et les lots ad hoc.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="cbeb3-309">Vous trouverez une évaluation des différentes techniques utilisables à la page [Comment utiliser le traitement par lots pour améliorer les performances des applications de base de données SQL](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="cbeb3-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="cbeb3-310">Faites des essais avec votre propre charge de travail toofind hello bon modèle pour le traitement par lot.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="cbeb3-311">Soient vraiment toounderstand susceptibles de présenter un modèle garantit la cohérence transactionnelle différentes.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="cbeb3-312">Recherche de hello charge de travail qui réduit l’utilisation des ressources exige de trouver hello bonne combinaison entre cohérence et les performances des compromis.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="cbeb3-313">Mise en cache de la couche Application</span><span class="sxs-lookup"><span data-stu-id="cbeb3-313">Application-tier caching</span></span>
<span data-ttu-id="cbeb3-314">Certaines applications de base de données contiennent des charges de travail à lecture intensive.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="cbeb3-315">La mise en cache des couches peut réduire la charge de hello sur la base de données hello et peut réduire potentiellement toosupport requis au niveau de performances de hello une base de données à l’aide de base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="cbeb3-316">Avec [Cache Redis Azure](https://azure.microsoft.com/services/cache/), si vous avez une charge de travail de lectures, vous pouvez lire les données de hello qu’une seule fois (ou peut-être une fois par les ordinateurs de couche application, selon la façon dont il est configuré), puis à stocker ces données à l’extérieur de votre base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="cbeb3-317">Il s’agit d’une charge de base de données tooreduce moyen (UC et la lecture d’e/s), mais il existe une incidence sur la cohérence transactionnelle, car les données hello lues à partir du cache de hello peuvent être synchronisées avec des données dans la base de données hello hello.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="cbeb3-318">Si un certain niveau d’incohérence est acceptable dans de nombreuses applications, cela ne se vérifie pas pour l’ensemble des charges de travail.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="cbeb3-319">Assurez-vous de comprendre pleinement les exigences d’une application avant d’utiliser une stratégie de mise en cache de couche Application.</span><span class="sxs-lookup"><span data-stu-id="cbeb3-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cbeb3-320">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cbeb3-320">Next steps</span></span>
* <span data-ttu-id="cbeb3-321">Pour plus d’informations sur les niveaux de service, consultez la section [Options et performances de la base de données SQL](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="cbeb3-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="cbeb3-322">Pour de plus amples informations sur les pools élastiques, consultez la page [Qu’est-ce qu’un pool élastique Azure ?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="cbeb3-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="cbeb3-323">Pour plus d’informations sur les pools élastiques et de performances, consultez [lorsque tooconsider un pool élastique](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="cbeb3-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

