---
title: "bases de données à grande échelle cloud aaaManaging | Documents Microsoft"
description: "Illustre le service de travail de base de données élastique hello"
metakeywords: azure sql database elastic databases
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 6fa47cf2-1162-4534-a206-6e2d95b78580
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: b6d330cd712421b8cba781e835830772e6e5b77e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="managing-scaled-out-cloud-databases"></a><span data-ttu-id="52631-103">Gestion des bases de données cloud avec montée en charge</span><span class="sxs-lookup"><span data-stu-id="52631-103">Managing scaled-out cloud databases</span></span>
<span data-ttu-id="52631-104">bases de données partitionnée toomanage à grande échelle, hello **des travaux de base de données élastique** fonctionnalité active (version préliminaire) tooreliably vous exécutez un script Transact-SQL (T-SQL) dans un groupe de bases de données, y compris :</span><span class="sxs-lookup"><span data-stu-id="52631-104">toomanage scaled-out sharded databases, hello **Elastic Database jobs** feature (preview) enables you tooreliably execute a Transact-SQL (T-SQL) script across a group of databases, including:</span></span>

* <span data-ttu-id="52631-105">une collection personnalisée des bases de données (voir ci-après)</span><span class="sxs-lookup"><span data-stu-id="52631-105">a custom-defined collection of databases (explained below)</span></span>
* <span data-ttu-id="52631-106">toutes les bases de données dans un [pool élastique](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="52631-106">all databases in an [elastic pool](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="52631-107">un ensemble de partitions (créé à l’aide d’une [bibliothèque client de base de données élastique](sql-database-elastic-database-client-library.md)).</span><span class="sxs-lookup"><span data-stu-id="52631-107">a shard set (created using [Elastic Database client library](sql-database-elastic-database-client-library.md)).</span></span> 

## <a name="documentation"></a><span data-ttu-id="52631-108">Documentation</span><span class="sxs-lookup"><span data-stu-id="52631-108">Documentation</span></span>
* <span data-ttu-id="52631-109">[Installer les composants de travail de base de données élastique hello](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="52631-109">[Install hello Elastic Database job components](sql-database-elastic-jobs-service-installation.md).</span></span> 
* <span data-ttu-id="52631-110">[Prise en main des tâches de base de données élastique](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="52631-110">[Get started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>
* <span data-ttu-id="52631-111">[Créer et gérer des tâches avec PowerShell](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="52631-111">[Create and manage jobs using PowerShell](sql-database-elastic-jobs-powershell.md).</span></span>
* [<span data-ttu-id="52631-112">Créer et gérer des bases de données SQL Azure avec montée en charge</span><span class="sxs-lookup"><span data-stu-id="52631-112">Create and manage scaled out Azure SQL Databases</span></span>](sql-database-elastic-jobs-getting-started.md)

<span data-ttu-id="52631-113">**Les travaux de base de données élastiques** est actuellement un Service hébergé par le client de Cloud Azure qui permet l’exécution de hello d’ad hoc et tâches administratives planifiées, appelées **travaux**.</span><span class="sxs-lookup"><span data-stu-id="52631-113">**Elastic Database jobs** is currently a customer-hosted Azure Cloud Service that enables hello execution of ad-hoc and scheduled administrative tasks, which are called **jobs**.</span></span> <span data-ttu-id="52631-114">Des travaux, vous pouvez facilement et gérez de manière fiable des grands groupes de bases de données SQL Azure en exécutant les opérations d’administration de tooperform de scripts Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="52631-114">With jobs, you can easily and reliably manage large groups of Azure SQL Databases by running Transact-SQL scripts tooperform administrative operations.</span></span> 

![Service de tâche de base de données élastique][1]

## <a name="why-use-jobs"></a><span data-ttu-id="52631-116">Pourquoi utiliser les tâches ?</span><span class="sxs-lookup"><span data-stu-id="52631-116">Why use jobs?</span></span>
<span data-ttu-id="52631-117">**Gérer**</span><span class="sxs-lookup"><span data-stu-id="52631-117">**Manage**</span></span>

<span data-ttu-id="52631-118">Effectuer facilement des modifications de schéma, la gestion des informations d’identification, les mises à jour de données de référence, la collecte des données de performances ou la collecte télémétrique du locataire (client).</span><span class="sxs-lookup"><span data-stu-id="52631-118">Easily do schema changes, credentials management, reference data updates, performance data collection or tenant (customer) telemetry collection.</span></span>

<span data-ttu-id="52631-119">**Rapports**</span><span class="sxs-lookup"><span data-stu-id="52631-119">**Reports**</span></span>

<span data-ttu-id="52631-120">Agréger des données à partir d’une collection de bases de données SQL Azure dans un tableau de destination unique.</span><span class="sxs-lookup"><span data-stu-id="52631-120">Aggregate data from a collection of Azure SQL Databases into a single destination table.</span></span>

<span data-ttu-id="52631-121">**Réduction de la surcharge**</span><span class="sxs-lookup"><span data-stu-id="52631-121">**Reduce overhead**</span></span>

<span data-ttu-id="52631-122">En règle générale, vous devez connecter tooeach de base de données de façon indépendante aux instructions de commande toorun Transact-SQL ou effectuer d’autres tâches d’administration.</span><span class="sxs-lookup"><span data-stu-id="52631-122">Normally, you must connect tooeach database independently in order toorun Transact-SQL statements or perform other administrative tasks.</span></span> <span data-ttu-id="52631-123">Un travail gère la tâche hello de la journalisation dans la base de données tooeach dans le groupe cible de hello.</span><span class="sxs-lookup"><span data-stu-id="52631-123">A job handles hello task of logging in tooeach database in hello target group.</span></span> <span data-ttu-id="52631-124">Vous également définissez, gérez et conserver toobe de scripts Transact-SQL exécutée sur un groupe de bases de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="52631-124">You also define, maintain and persist Transact-SQL scripts toobe executed across a group of Azure SQL Databases.</span></span>

<span data-ttu-id="52631-125">**Gestion des comptes**</span><span class="sxs-lookup"><span data-stu-id="52631-125">**Accounting**</span></span>

<span data-ttu-id="52631-126">Les travaux exécutés hello script et journal hello l’état de l’exécution pour chaque base de données.</span><span class="sxs-lookup"><span data-stu-id="52631-126">Jobs run hello script and log hello status of execution for each database.</span></span> <span data-ttu-id="52631-127">De plus, une nouvelle tentative est lancée automatiquement en cas d’échec.</span><span class="sxs-lookup"><span data-stu-id="52631-127">You also get automatic retry when failures occur.</span></span>

<span data-ttu-id="52631-128">**Flexibilité**</span><span class="sxs-lookup"><span data-stu-id="52631-128">**Flexibility**</span></span>

<span data-ttu-id="52631-129">Définir des groupes personnalisés de bases de données SQL Azure, ainsi que des planifications pour l'exécution d’une tâche.</span><span class="sxs-lookup"><span data-stu-id="52631-129">Define custom groups of Azure SQL Databases, and define schedules for running a job.</span></span>

> [!NOTE]
> <span data-ttu-id="52631-130">Bonjour portail Azure, un jeu réduit de fonctionnalités limité tooSQL Azure élastique pools n’est disponible.</span><span class="sxs-lookup"><span data-stu-id="52631-130">In hello Azure portal, only a reduced set of functions limited tooSQL Azure elastic pools is available.</span></span> <span data-ttu-id="52631-131">Utilisez hello PowerShell APIs tooaccess hello ensemble de fonctionnalités en cours.</span><span class="sxs-lookup"><span data-stu-id="52631-131">Use hello PowerShell APIs tooaccess hello full set of current functionality.</span></span>
> 
> 

## <a name="applications"></a><span data-ttu-id="52631-132">Applications</span><span class="sxs-lookup"><span data-stu-id="52631-132">Applications</span></span>
* <span data-ttu-id="52631-133">Réaliser des tâches administratives, par exemple le déploiement d'un nouveau schéma.</span><span class="sxs-lookup"><span data-stu-id="52631-133">Perform administrative tasks, such as deploying a new schema.</span></span>
* <span data-ttu-id="52631-134">Mettre à jour les informations données-produits de référence sur toutes les bases de données.</span><span class="sxs-lookup"><span data-stu-id="52631-134">Update reference data-product information common across all databases.</span></span> <span data-ttu-id="52631-135">Ou planifier des mises à jour automatiques tous les jours ouvrables, après les heures de travail.</span><span class="sxs-lookup"><span data-stu-id="52631-135">Or schedules automatic updates every weekday, after hours.</span></span>
* <span data-ttu-id="52631-136">Reconstruire les performances des requêtes tooimprove index.</span><span class="sxs-lookup"><span data-stu-id="52631-136">Rebuild indexes tooimprove query performance.</span></span> <span data-ttu-id="52631-137">Hello reconstruction peut être configuré tooexecute sur une collection de bases de données sur une base périodique, comme pendant les heures creuses.</span><span class="sxs-lookup"><span data-stu-id="52631-137">hello rebuilding can be configured tooexecute across a collection of databases on a recurring basis, such as during off-peak hours.</span></span>
* <span data-ttu-id="52631-138">Collecter les résultats de la requête à partir d'un ensemble de bases de données dans une table centrale sur une base continue.</span><span class="sxs-lookup"><span data-stu-id="52631-138">Collect query results from a set of databases into a central table on an on-going basis.</span></span> <span data-ttu-id="52631-139">Les requêtes de performances peuvent être exécutées en permanence et configuré tootrigger des tâches supplémentaires toobe est exécutée.</span><span class="sxs-lookup"><span data-stu-id="52631-139">Performance queries can be continually executed and configured tootrigger additional tasks toobe executed.</span></span>
* <span data-ttu-id="52631-140">Exécuter des requêtes de traitement des données plus en cours d’exécution sur un grand ensemble de bases de données, par exemple hello collection de télémétrie de client.</span><span class="sxs-lookup"><span data-stu-id="52631-140">Execute longer running data processing queries across a large set of databases, for example hello collection of customer telemetry.</span></span> <span data-ttu-id="52631-141">Les résultats sont rassemblés dans une table de destination unique pour une analyse ultérieure.</span><span class="sxs-lookup"><span data-stu-id="52631-141">Results are collected into a single destination table for further analysis.</span></span>

## <a name="elastic-database-jobs-end-to-end"></a><span data-ttu-id="52631-142">Travaux de base de données élastique : de bout en bout</span><span class="sxs-lookup"><span data-stu-id="52631-142">Elastic Database jobs: end-to-end</span></span>
1. <span data-ttu-id="52631-143">Installer hello **des travaux de base de données élastique** composants.</span><span class="sxs-lookup"><span data-stu-id="52631-143">Install hello **Elastic Database jobs** components.</span></span> <span data-ttu-id="52631-144">Pour en savoir plus, consultez [Installation des tâches de bases de données élastiques](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="52631-144">For more information, see [Installing Elastic Database jobs](sql-database-elastic-jobs-service-installation.md).</span></span> <span data-ttu-id="52631-145">Cas d’échec de l’installation de hello, voir [comment toouninstall](sql-database-elastic-jobs-uninstall.md).</span><span class="sxs-lookup"><span data-stu-id="52631-145">If hello installation fails, see [how toouninstall](sql-database-elastic-jobs-uninstall.md).</span></span>
2. <span data-ttu-id="52631-146">Utilisez hello PowerShell APIs tooaccess plus de fonctionnalités, par exemple créer des collections personnalisées de la base de données, ajout de planifications et/ou la collecte des jeux de résultats.</span><span class="sxs-lookup"><span data-stu-id="52631-146">Use hello PowerShell APIs tooaccess more functionality, for example creating custom-defined database collections, adding schedules and/or gathering results sets.</span></span> <span data-ttu-id="52631-147">Utilisez hello portail installation simple et/contrôle de la création de travaux limitée tooexecution par rapport à un **pool élastique**.</span><span class="sxs-lookup"><span data-stu-id="52631-147">Use hello portal for simple installation and creation/monitoring of jobs limited tooexecution against a **elastic pool**.</span></span> 
3. <span data-ttu-id="52631-148">Créer des informations d’identification chiffrées pour l’exécution du travail et [ajouter hello utilisateur (ou rôle) tooeach base de données dans le groupe de hello](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="52631-148">Create encrypted credentials for job execution and [add hello user (or role) tooeach database in hello group](sql-database-security-overview.md).</span></span>
4. <span data-ttu-id="52631-149">Créer un script T-SQL qui peut être exécuté sur chaque base de données dans le groupe de hello idempotent.</span><span class="sxs-lookup"><span data-stu-id="52631-149">Create an idempotent T-SQL script that can be run against every database in hello group.</span></span> 
5. <span data-ttu-id="52631-150">Suivez ces travaux de toocreate étapes à l’aide de hello portail Azure : [création et la gestion des travaux de base de données élastique](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="52631-150">Follow these steps toocreate jobs using hello Azure portal: [Creating and managing Elastic Database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> 
6. <span data-ttu-id="52631-151">Ou utilisez des scripts PowerShell : [Création et gestion des travaux de base de données SQL élastiques à l’aide de PowerShell (version préliminaire)](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="52631-151">Or use PowerShell scripts: [Create and manage a SQL Database elastic database jobs using PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span></span>

## <a name="idempotent-scripts"></a><span data-ttu-id="52631-152">Scripts idempotents</span><span class="sxs-lookup"><span data-stu-id="52631-152">Idempotent scripts</span></span>
<span data-ttu-id="52631-153">les scripts Hello doivent être [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span><span class="sxs-lookup"><span data-stu-id="52631-153">hello scripts must be [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span></span> <span data-ttu-id="52631-154">En termes simples, « idempotent » signifie que si le script de hello réussit, et il est exécuté à nouveau, hello même résultat se produit.</span><span class="sxs-lookup"><span data-stu-id="52631-154">In simple terms, "idempotent" means that if hello script succeeds, and it is run again, hello same result occurs.</span></span> <span data-ttu-id="52631-155">Un script peut échouer en raison de problèmes de réseau tootransient.</span><span class="sxs-lookup"><span data-stu-id="52631-155">A script may fail due tootransient network issues.</span></span> <span data-ttu-id="52631-156">Dans ce cas, le travail de hello réessaiera automatiquement script hello en cours d’exécution un nombre prédéfini de fois avant desisting.</span><span class="sxs-lookup"><span data-stu-id="52631-156">In that case, hello job will automatically retry running hello script a preset number of times before desisting.</span></span> <span data-ttu-id="52631-157">Un script idempotent a hello même résultat même si a été correctement exécuté deux fois.</span><span class="sxs-lookup"><span data-stu-id="52631-157">An idempotent script has hello same result even if has been successfully run twice.</span></span> 

<span data-ttu-id="52631-158">Une solution simple est tootest existence hello d’un objet avant sa création.</span><span class="sxs-lookup"><span data-stu-id="52631-158">A simple tactic is tootest for hello existence of an object before creating it.</span></span>  

    IF NOT EXIST (some_object)
    -- Create hello object 
    -- If it exists, drop hello object before recreating it.

<span data-ttu-id="52631-159">De même, un script doit être en mesure de tooexecute correctement en testant logiquement et contrecarrer toutes les conditions de recherche.</span><span class="sxs-lookup"><span data-stu-id="52631-159">Similarly, a script must be able tooexecute successfully by logically testing for and countering any conditions it finds.</span></span>

## <a name="failures-and-logs"></a><span data-ttu-id="52631-160">Échecs et journaux</span><span class="sxs-lookup"><span data-stu-id="52631-160">Failures and logs</span></span>
<span data-ttu-id="52631-161">Si un script échoue après plusieurs tentatives, le travail de hello consigne hello erreur et continue.</span><span class="sxs-lookup"><span data-stu-id="52631-161">If a script fails after multiple attempts, hello job logs hello error and continues.</span></span> <span data-ttu-id="52631-162">Après la fin d’un travail (c'est-à-dire une exécution sur toutes les bases de données dans le groupe de hello), vous pouvez vérifier sa liste de tentatives ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="52631-162">After a job ends (meaning a run against all databases in hello group), you can check its list of failed attempts.</span></span> <span data-ttu-id="52631-163">les journaux Hello fournissent des détails toodebug des scripts est défectueux.</span><span class="sxs-lookup"><span data-stu-id="52631-163">hello logs provide details toodebug faulty scripts.</span></span> 

## <a name="group-types-and-creation"></a><span data-ttu-id="52631-164">Types de groupe et création</span><span class="sxs-lookup"><span data-stu-id="52631-164">Group types and creation</span></span>
<span data-ttu-id="52631-165">Il existe deux types de groupes :</span><span class="sxs-lookup"><span data-stu-id="52631-165">There are two kinds of groups:</span></span> 

1. <span data-ttu-id="52631-166">Ensemble de partitions</span><span class="sxs-lookup"><span data-stu-id="52631-166">Shard sets</span></span>
2. <span data-ttu-id="52631-167">Groupes personnalisés</span><span class="sxs-lookup"><span data-stu-id="52631-167">Custom groups</span></span>

<span data-ttu-id="52631-168">Groupes d’ensembles de partitions sont créés à l’aide de hello [outils de base de données élastique](sql-database-elastic-scale-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="52631-168">Shard set groups are created using hello [Elastic Database tools](sql-database-elastic-scale-introduction.md).</span></span> <span data-ttu-id="52631-169">Lorsque vous créez un groupe de jeu de partitions, bases de données sont ajoutées ou supprimées automatiquement à partir du groupe de hello.</span><span class="sxs-lookup"><span data-stu-id="52631-169">When you create a shard set group, databases are added or removed from hello group automatically.</span></span> <span data-ttu-id="52631-170">Par exemple, une nouvelle partition sera automatiquement dans le groupe de hello lorsque vous l’ajoutez carte de partitions toohello.</span><span class="sxs-lookup"><span data-stu-id="52631-170">For example, a new shard will be automatically in hello group when you add it toohello shard map.</span></span> <span data-ttu-id="52631-171">Un travail peut ensuite être exécuté sur le groupe de hello.</span><span class="sxs-lookup"><span data-stu-id="52631-171">A job can then be run against hello group.</span></span>

<span data-ttu-id="52631-172">Les groupes personnalisés, on hello d’autre part, sont définies de façon rigide.</span><span class="sxs-lookup"><span data-stu-id="52631-172">Custom groups, on hello other hand, are rigidly defined.</span></span> <span data-ttu-id="52631-173">Vous devez explicitement ajouter ou supprimer des bases de données à partir de groupes personnalisés.</span><span class="sxs-lookup"><span data-stu-id="52631-173">You must explicitly add or remove databases from custom groups.</span></span> <span data-ttu-id="52631-174">Si une base de données dans le groupe de hello est supprimée, les travaux hello va tenter de script hello toorun entraîne un échec éventuel de la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="52631-174">If a database in hello group is dropped, hello job will attempt toorun hello script against hello database resulting in an eventual failure.</span></span> <span data-ttu-id="52631-175">Les groupes créés à l’aide de hello portail Azure en sont des groupes personnalisés.</span><span class="sxs-lookup"><span data-stu-id="52631-175">Groups created using hello Azure portal currently are custom groups.</span></span> 

## <a name="components-and-pricing"></a><span data-ttu-id="52631-176">Composants et tarification</span><span class="sxs-lookup"><span data-stu-id="52631-176">Components and pricing</span></span>
<span data-ttu-id="52631-177">Hello suivants composants fonctionnent ensemble toocreate un service Cloud Azure qui permet l’exécution d’ad-hoc des tâches d’administration.</span><span class="sxs-lookup"><span data-stu-id="52631-177">hello following components work together toocreate an Azure Cloud service that enables ad-hoc execution of administrative jobs.</span></span> <span data-ttu-id="52631-178">Hello composants sont installés et configurés automatiquement pendant l’installation, dans votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="52631-178">hello components are installed and configured automatically during setup, in your subscription.</span></span> <span data-ttu-id="52631-179">Vous pouvez identifier les services hello comme elles ont hello même généré automatiquement nom.</span><span class="sxs-lookup"><span data-stu-id="52631-179">You can identify hello services as they all have hello same auto-generated name.</span></span> <span data-ttu-id="52631-180">nom de Hello est unique et se compose d’un préfixe « edj hello » suivi de 21 caractères générés de manière aléatoire.</span><span class="sxs-lookup"><span data-stu-id="52631-180">hello name is unique, and consists of hello prefix "edj" followed by 21 randomly generated characters.</span></span>

* <span data-ttu-id="52631-181">**Le Service Cloud Azure**: travaux de base de données élastique (version préliminaire) sont fournies sous la forme d’un Cloud de Azure hébergé par le client l’exécution du service tooperform de hello les tâches demandées.</span><span class="sxs-lookup"><span data-stu-id="52631-181">**Azure Cloud Service**: elastic database jobs (preview) is delivered as a customer-hosted Azure Cloud service tooperform execution of hello requested tasks.</span></span> <span data-ttu-id="52631-182">À partir du portail de hello, service de hello est déployé et hébergé dans votre abonnement Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="52631-182">From hello portal, hello service is deployed and hosted in your Microsoft Azure subscription.</span></span> <span data-ttu-id="52631-183">service de valeur par défaut déployé Hello s’exécute avec au minimum deux rôles de travail pour la haute disponibilité hello.</span><span class="sxs-lookup"><span data-stu-id="52631-183">hello default deployed service runs with hello minimum of two worker roles for high availability.</span></span> <span data-ttu-id="52631-184">taille par défaut de Hello de chaque rôle de travail (ElasticDatabaseJobWorker) s’exécute sur une instance A0.</span><span class="sxs-lookup"><span data-stu-id="52631-184">hello default size of each worker role (ElasticDatabaseJobWorker) runs on an A0 instance.</span></span> <span data-ttu-id="52631-185">Pour la tarification, voir [Tarification des services cloud](https://azure.microsoft.com/pricing/details/cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="52631-185">For pricing, see [Cloud services pricing](https://azure.microsoft.com/pricing/details/cloud-services/).</span></span> 
* <span data-ttu-id="52631-186">**Base de données SQL Azure**: service de hello utilise une base de données SQL Azure appelé hello **base de données contrôle** toostore toutes les métadonnées de tâche hello.</span><span class="sxs-lookup"><span data-stu-id="52631-186">**Azure SQL Database**: hello service uses an Azure SQL Database known as hello **control database** toostore all of hello job metadata.</span></span> <span data-ttu-id="52631-187">niveau de service par défaut Hello est un S0.</span><span class="sxs-lookup"><span data-stu-id="52631-187">hello default service tier is a S0.</span></span> <span data-ttu-id="52631-188">Pour en savoir plus, voir [Tarification - SQL Database](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="52631-188">For pricing, see [SQL Database Pricing](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
* <span data-ttu-id="52631-189">**Azure Service Bus**: un Bus des services Azure est pour la coordination de travail hello en hello Azure Cloud Service.</span><span class="sxs-lookup"><span data-stu-id="52631-189">**Azure Service Bus**: An Azure Service Bus is for coordination of hello work within hello Azure Cloud Service.</span></span> <span data-ttu-id="52631-190">Voir [Tarification de Service Bus](https://azure.microsoft.com/pricing/details/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="52631-190">See [Service Bus Pricing](https://azure.microsoft.com/pricing/details/service-bus/).</span></span>
* <span data-ttu-id="52631-191">**Le stockage Azure**: compte d’un stockage Azure est utilisé toostore diagnostic sortie de journalisation dans l’événement de hello un problème nécessite un débogage supplémentaire (consultez [activation des Diagnostics dans Azure Cloud Services et Machines virtuelles](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span><span class="sxs-lookup"><span data-stu-id="52631-191">**Azure Storage**: An Azure Storage account is used toostore diagnostic output logging in hello event that an issue requires further debugging (see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span></span> <span data-ttu-id="52631-192">Pour la tarification, voir [Tarification Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="52631-192">For pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>

## <a name="how-elastic-database-jobs-work"></a><span data-ttu-id="52631-193">Fonctionnement des tâches de bases de données élastiques</span><span class="sxs-lookup"><span data-stu-id="52631-193">How Elastic Database jobs work</span></span>
1. <span data-ttu-id="52631-194">Une base de données SQL Azure est conçue comme une **base de données de contrôle** qui stocke toutes les métadonnées et les données d’état.</span><span class="sxs-lookup"><span data-stu-id="52631-194">An Azure SQL Database is designated a **control database** which stores all meta-data and state data.</span></span>
2. <span data-ttu-id="52631-195">base de données de contrôle Hello est accessible par hello **de la tâche service** toolaunch et suivre le tooexecute de travaux.</span><span class="sxs-lookup"><span data-stu-id="52631-195">hello control database is accessed by hello **job service** toolaunch and track jobs tooexecute.</span></span>
3. <span data-ttu-id="52631-196">Deux rôles qui communiquent avec la base de données de contrôle hello :</span><span class="sxs-lookup"><span data-stu-id="52631-196">Two different roles communicate with hello control database:</span></span> 
   * <span data-ttu-id="52631-197">Contrôleur : Détermine les tâches qui requièrent hello tooperform de tâches demandées du travail et nouvelles tentatives des travaux ayant échoué en créant de nouvelles tâches.</span><span class="sxs-lookup"><span data-stu-id="52631-197">Controller: Determines which jobs require tasks tooperform hello requested job, and retries failed jobs by creating new job tasks.</span></span>
   * <span data-ttu-id="52631-198">Exécution de la tâche travail : Exécute les tâches hello.</span><span class="sxs-lookup"><span data-stu-id="52631-198">Job Task Execution: Carries out hello job tasks.</span></span>

### <a name="job-task-types"></a><span data-ttu-id="52631-199">Types de tâches de travail</span><span class="sxs-lookup"><span data-stu-id="52631-199">Job task types</span></span>
<span data-ttu-id="52631-200">Il existe plusieurs types de tâches qui effectuent l'exécution des tâches :</span><span class="sxs-lookup"><span data-stu-id="52631-200">There are multiple types of job tasks that carry out execution of jobs:</span></span>

* <span data-ttu-id="52631-201">ShardMapRefresh : Requêtes hello toodetermine de carte de partitions toutes les bases de données hello utilisés en tant que partitions</span><span class="sxs-lookup"><span data-stu-id="52631-201">ShardMapRefresh: Queries hello shard map toodetermine all hello databases used as shards</span></span>
* <span data-ttu-id="52631-202">ScriptSplit : Script de hello fractionnements entre les instructions 'GO' en lots</span><span class="sxs-lookup"><span data-stu-id="52631-202">ScriptSplit: Splits hello script across ‘GO’ statements into batches</span></span>
* <span data-ttu-id="52631-203">ExpandJob : crée des tâches enfants pour chaque base de données à partir d'une tâche qui cible un groupe de bases de données</span><span class="sxs-lookup"><span data-stu-id="52631-203">ExpandJob: Creates child jobs for each database from a job that targets a group of databases</span></span>
* <span data-ttu-id="52631-204">ScriptExecution : exécute un script sur une base de données spécifique à l'aide des informations d'identification définies</span><span class="sxs-lookup"><span data-stu-id="52631-204">ScriptExecution: Executes a script against a particular database using defined credentials</span></span>
* <span data-ttu-id="52631-205">Dacpac : S’applique à un DACPAC tooa base de données spécifique à l’aide des informations d’identification spécifiques</span><span class="sxs-lookup"><span data-stu-id="52631-205">Dacpac: Applies a DACPAC tooa particular database using particular credentials</span></span>

## <a name="end-to-end-job-execution-work-flow"></a><span data-ttu-id="52631-206">Flux de travail de l'exécution de tâche de bout en bout</span><span class="sxs-lookup"><span data-stu-id="52631-206">End-to-end job execution work-flow</span></span>
1. <span data-ttu-id="52631-207">Utilisez hello portail ou hello API PowerShell, un travail est inséré à hello **base de données de contrôle**.</span><span class="sxs-lookup"><span data-stu-id="52631-207">Using either hello Portal or hello PowerShell API, a job is inserted into hello  **control database**.</span></span> <span data-ttu-id="52631-208">travail de Hello demande l’exécution d’un script Transact-SQL par rapport à un groupe de bases de données à l’aide des informations d’identification spécifiques.</span><span class="sxs-lookup"><span data-stu-id="52631-208">hello job requests execution of a Transact-SQL script against a group of databases using specific credentials.</span></span>
2. <span data-ttu-id="52631-209">contrôleur de Hello identifie la nouvelle tâche de hello.</span><span class="sxs-lookup"><span data-stu-id="52631-209">hello controller identifies hello new job.</span></span> <span data-ttu-id="52631-210">Tâches de travail sont créés et exécuté le script de hello toosplit et bases de données du groupe toorefresh hello.</span><span class="sxs-lookup"><span data-stu-id="52631-210">Job tasks are created and executed toosplit hello script and toorefresh hello group’s databases.</span></span> <span data-ttu-id="52631-211">Enfin, un nouveau travail est créé et exécuté la tâche de hello tooexpand et créer des travaux, où chaque tâche enfant est spécifié tooexecute hello script Transact-SQL sur une base de données individuel dans le groupe de hello nouvel enfant.</span><span class="sxs-lookup"><span data-stu-id="52631-211">Lastly, a new job is created and executed tooexpand hello job and create new child jobs where each child job is specified tooexecute hello Transact-SQL script against an individual database in hello group.</span></span>
3. <span data-ttu-id="52631-212">contrôleur de Hello identifie hello créé des tâches enfants.</span><span class="sxs-lookup"><span data-stu-id="52631-212">hello controller identifies hello created child jobs.</span></span> <span data-ttu-id="52631-213">Pour chaque tâche, le contrôleur de hello crée et déclenche un script hello de travail tâche tooexecute par rapport à une base de données.</span><span class="sxs-lookup"><span data-stu-id="52631-213">For each job, hello controller creates and triggers a job task tooexecute hello script against a database.</span></span> 
4. <span data-ttu-id="52631-214">Une fois que toutes les tâches terminées, le contrôleur de hello met à jour l’état de tooa terminé de travaux de hello.</span><span class="sxs-lookup"><span data-stu-id="52631-214">After all job tasks have completed, hello controller updates hello jobs tooa completed state.</span></span> 
   <span data-ttu-id="52631-215">À tout moment pendant l’exécution du travail, hello API PowerShell peut être utilisé tooview hello l’état actuel de l’exécution du travail.</span><span class="sxs-lookup"><span data-stu-id="52631-215">At any point during job execution, hello PowerShell API can be used tooview hello current state of job execution.</span></span> <span data-ttu-id="52631-216">Toutes les heures retourné par hello APIs PowerShell sont représentés au format UTC.</span><span class="sxs-lookup"><span data-stu-id="52631-216">All times returned by hello PowerShell APIs are represented in UTC.</span></span> <span data-ttu-id="52631-217">Si vous le souhaitez, une demande d’annulation peut être toostop initiée par un travail.</span><span class="sxs-lookup"><span data-stu-id="52631-217">If desired, a cancellation request can be initiated toostop a job.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="52631-218">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="52631-218">Next steps</span></span>
<span data-ttu-id="52631-219">[Installer les composants de hello](sql-database-elastic-jobs-service-installation.md), puis [créer et ajouter un journal de base de données tooeach groupe hello des bases de données](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="52631-219">[Install hello components](sql-database-elastic-jobs-service-installation.md), then [create and add a log in tooeach database in hello group of databases](sql-database-manage-logins.md).</span></span> <span data-ttu-id="52631-220">toofurther comprendre la gestion et création de tâche, consultez [créer et gérer des travaux de base de données élastique](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="52631-220">toofurther understand job creation and management, see [creating and managing elastic database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> <span data-ttu-id="52631-221">Consultez également [Prise en main des tâches de base de données élastique](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="52631-221">See also [Getting started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-jobs-overview/elastic-jobs.png
<!--anchors-->


