---
title: "règles de pare-feu de base de données SQL aaaAzure | Documents Microsoft"
description: "Découvrez comment tooconfigure SQL de base de données du pare-feu avec accès de toomanage de règles de pare-feu au niveau du serveur et au niveau de la base de données."
keywords: "pare-feu de base de données"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 6a8cdf629d0d0e55421a5e9f9b894a21371be568
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="7e7e1-104">Règles de pare-feu au niveau du serveur et de la base de données d’Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="7e7e1-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="7e7e1-105">Microsoft Azure SQL Database fournit un service de base de données relationnelle pour Azure et d’autres applications basées sur Internet.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="7e7e1-106">toohelp protéger vos données, les pare-feu empêchent le serveur de base de données de tous les accès tooyour jusqu'à ce que vous spécifiez les ordinateurs sur lesquels l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-106">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="7e7e1-107">les pare-feu Hello accorde toodatabases d’accès basé sur hello adresse IP de chaque demande d’origine.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-107">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="7e7e1-108">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="7e7e1-108">Overview</span></span>

<span data-ttu-id="7e7e1-109">Au départ, tous les Transact-SQL accès tooyour Azure SQL server est bloqué par le pare-feu hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-109">Initially, all Transact-SQL access tooyour Azure SQL server is blocked by hello firewall.</span></span> <span data-ttu-id="7e7e1-110">toobegin à l’aide de votre serveur SQL Azure, vous devez spécifier une ou plusieurs règles de pare-feu de niveau serveur qui permettent l’accès tooyour SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-110">toobegin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access tooyour Azure SQL server.</span></span> <span data-ttu-id="7e7e1-111">Utilisez toospecify de règles de pare-feu hello quelle adresse IP comprise entre hello Internet sont autorisées, et si des applications Azure peuvent essayer de serveur SQL Azure de tooyour tooconnect.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-111">Use hello firewall rules toospecify which IP address ranges from hello Internet are allowed, and whether Azure applications can attempt tooconnect tooyour Azure SQL server.</span></span>

<span data-ttu-id="7e7e1-112">grant tooselectively toojust accès une des bases de données hello dans votre serveur SQL Azure, vous devez créer une règle de niveau base de données pour la base de données requis hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-112">tooselectively grant access toojust one of hello databases in your Azure SQL server, you must create a database-level rule for hello required database.</span></span> <span data-ttu-id="7e7e1-113">Spécifiez une plage d’adresses IP pour la règle de pare-feu de base de données hello dépasse hello spécifiée dans la règle de pare-feu de niveau serveur hello de plage d’adresses IP et vérifiez que l’adresse IP de hello du client de hello est comprise dans la plage hello spécifiée dans la règle de niveau base de données hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-113">Specify an IP address range for hello database firewall rule that is beyond hello IP address range specified in hello server-level firewall rule, and ensure that hello IP address of hello client falls in hello range specified in hello database-level rule.</span></span>

<span data-ttu-id="7e7e1-114">Les tentatives de connexion à partir de hello Internet et Azure doit traverser le pare-feu hello avant de pouvoir atteindre votre serveur SQL Azure ou une base de données SQL, comme indiqué dans hello suivant schéma :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-114">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your Azure SQL server or SQL Database, as shown in hello following diagram:</span></span>

   ![Diagramme décrivant la configuration de pare-feu.][1]

* <span data-ttu-id="7e7e1-116">**Les règles de pare-feu de niveau serveur :** ces règles permettent les clients tooaccess l’intégralité du serveur SQL Azure, autrement dit, toutes les bases de données hello dans hello même serveur logique.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-116">**Server-level firewall rules:** These rules enable clients tooaccess your entire Azure SQL server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="7e7e1-117">Ces règles sont stockées dans hello **master** base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-117">These rules are stored in hello **master** database.</span></span> <span data-ttu-id="7e7e1-118">Les règles de pare-feu de niveau serveur peuvent être configurées à l’aide du portail de hello ou à l’aide d’instructions Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-118">Server-level firewall rules can be configured by using hello portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="7e7e1-119">toocreate règles de pare-feu de niveau serveur à l’aide de hello portail Azure ou PowerShell, vous devez être propriétaire de l’abonnement hello ou un collaborateur de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-119">toocreate server-level firewall rules using hello Azure portal or PowerShell, you must be hello subscription owner or a subscription contributor.</span></span> <span data-ttu-id="7e7e1-120">toocreate une règle de pare-feu de niveau serveur à l’aide de Transact-SQL, vous devez vous connecter instance de base de données SQL toohello en tant que connexion du principal au niveau du serveur hello ou un administrateur d’Azure Active Directory hello (ce qui signifie qu’une règle de pare-feu de niveau serveur doit tout d’abord être créée. par un utilisateur disposant des autorisations au niveau de Azure).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-120">toocreate a server-level firewall rule using Transact-SQL, you must connect toohello SQL Database instance as hello server-level principal login or hello Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="7e7e1-121">**Règles de pare-feu de niveau de base de données :** ces règles permettent les clients tooaccess certains (sécurisé) des bases de données au sein de hello même serveur logique.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-121">**Database-level firewall rules:** These rules enable clients tooaccess certain (secure) databases within hello same logical server.</span></span> <span data-ttu-id="7e7e1-122">Vous pouvez créer ces règles pour chaque base de données (y compris hello **master** database0) et elles sont stockées dans les bases de données individuelles hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-122">You can create these rules for each database (including hello **master** database0) and they are stored in hello individual databases.</span></span> <span data-ttu-id="7e7e1-123">Règles de pare-feu de niveau base de données peuvent uniquement être configurés à l’aide d’instructions Transact-SQL et uniquement après avoir configuré hello premier pare-feu au niveau du serveur.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured hello first server-level firewall.</span></span> <span data-ttu-id="7e7e1-124">Si vous spécifiez une plage d’adresses IP dans la règle de pare-feu de niveau base de données hello plage hello externe spécifiée dans la règle de pare-feu de niveau serveur hello, seuls les clients qui ont des adresses IP dans la plage de niveau de base de données hello peuvent accéder à base de données hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-124">If you specify an IP address range in hello database-level firewall rule that is outside hello range specified in hello server-level firewall rule, only those clients that have IP addresses in hello database-level range can access hello database.</span></span> <span data-ttu-id="7e7e1-125">Vous pouvez avoir un maximum de 128 règles de pare-feu au niveau de la base de données par base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="7e7e1-126">Les règles de pare-feu au niveau de la base données pour les bases de données MASTER et utilisateur peuvent uniquement être créées et gérées via Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="7e7e1-127">Pour plus d’informations sur la configuration des règles de pare-feu de niveau base de données, consultez l’exemple de hello plus loin dans ce article et consultez [sp_set_database_firewall_rule (bases de données de SQL Azure)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-127">For more information on configuring database-level firewall rules, see hello example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="7e7e1-128">**Recommandation :** Microsoft recommande d’utiliser des règles de pare-feu de niveau base de données chaque fois que possible tooenhance sécurité et toomake votre base de données plus portable.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="7e7e1-129">Utiliser les règles de pare-feu de niveau serveur pour les administrateurs et lorsque vous disposez de plusieurs bases de données qui ont hello mêmes exigences d’accès et que vous ne souhaitez pas temps toospend configuration individuellement de chaque base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-129">Use server-level firewall rules for administrators and when you have many databases that have hello same access requirements and you don't want toospend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="7e7e1-130">Pour plus d’informations sur les bases de données portables dans le contexte de hello de continuité des activités, consultez [exigences d’authentification pour la récupération d’urgence](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-130">For information about portable databases in hello context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-hello-internet"></a><span data-ttu-id="7e7e1-131">Connexion à partir de hello Internet</span><span class="sxs-lookup"><span data-stu-id="7e7e1-131">Connecting from hello Internet</span></span>

<span data-ttu-id="7e7e1-132">Lorsqu’un ordinateur tente de serveur de base de données tooconnect tooyour de hello Internet, pare-feu de hello vérifie d’abord hello adresse IP de demande hello par rapport aux règles de pare-feu de niveau base de données hello, pour une base de données hello que la demande de connexion de hello d’origine :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-132">When a computer attempts tooconnect tooyour database server from hello Internet, hello firewall first checks hello originating IP address of hello request against hello database-level firewall rules, for hello database that hello connection is requesting:</span></span>

* <span data-ttu-id="7e7e1-133">Si l’adresse IP de hello de demande de hello est dans une des plages de hello spécifiées dans les règles de pare-feu de niveau base de données de hello, connexion de hello est accordée toohello de base de données SQL qui contient la règle de hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-133">If hello IP address of hello request is within one of hello ranges specified in hello database-level firewall rules, hello connection is granted toohello SQL Database that contains hello rule.</span></span>
* <span data-ttu-id="7e7e1-134">Si l’adresse IP de hello de demande de hello n’est pas dans une des plages de hello spécifiées dans la règle de pare-feu de niveau base de données hello, les règles de pare-feu de niveau serveur hello sont vérifiées.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-134">If hello IP address of hello request is not within one of hello ranges specified in hello database-level firewall rule, hello server-level firewall rules are checked.</span></span> <span data-ttu-id="7e7e1-135">Si l’adresse IP de hello de demande de hello est dans une des plages de hello spécifiées dans les règles de pare-feu de niveau serveur hello, connexion de hello est accordée.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-135">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span> <span data-ttu-id="7e7e1-136">Les règles de pare-feu de niveau serveur s’appliquent les bases de données SQL tooall sur hello Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-136">Server-level firewall rules apply tooall SQL databases on hello Azure SQL server.</span></span>  
* <span data-ttu-id="7e7e1-137">Si l’adresse IP de hello de demande de hello n’est pas dans les plages de hello spécifiées dans un des hello au niveau de la base de données ou règles de pare-feu de niveau serveur, demande de connexion hello échoue.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-137">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="7e7e1-138">tooaccess base de données SQL Azure à partir de votre ordinateur local, assurez-vous que le pare-feu hello sur votre réseau et l’ordinateur local autorise les communications sortantes sur le port TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-138">tooaccess Azure SQL Database from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="7e7e1-139">Connexion à partir d’Azure</span><span class="sxs-lookup"><span data-stu-id="7e7e1-139">Connecting from Azure</span></span>
<span data-ttu-id="7e7e1-140">applications tooallow tooconnect Azure tooyour Azure SQL server, les connexions Azure doivent être activées.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-140">tooallow applications from Azure tooconnect tooyour Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="7e7e1-141">Lorsqu’une application à partir de Azure essaie de serveur de base de données tooconnect tooyour, le pare-feu hello vérifie que les connexions Azure sont autorisées.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-141">When an application from Azure attempts tooconnect tooyour database server, hello firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="7e7e1-142">Un paramètre de pare-feu avec début et de fin too0.0.0.0 égal d’adresse indique que ces connexions sont autorisées.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-142">A firewall setting with starting and ending address equal too0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="7e7e1-143">Si la tentative de connexion hello n’est pas autorisée, demande de hello n’atteint pas le serveur de base de données SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-143">If hello connection attempt is not allowed, hello request does not reach hello Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7e7e1-144">Cette option configure hello pare-feu tooallow toutes les connexions à partir de connexions, y comprises Azure à partir d’abonnements hello d’autres clients.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-144">This option configures hello firewall tooallow all connections from Azure including connections from hello subscriptions of other customers.</span></span> <span data-ttu-id="7e7e1-145">Lorsque cette option, assurez-vous que votre connexion et limitent les autorisations utilisateur tooonly d’accès aux utilisateurs autorisés.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-145">When selecting this option, make sure your login and user permissions limit access tooonly authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="7e7e1-146">Création et gestion des règles de pare-feu</span><span class="sxs-lookup"><span data-stu-id="7e7e1-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="7e7e1-147">premier paramètre de pare-feu de niveau serveur Hello peut être créé à l’aide de hello [portail Azure](https://portal.azure.com/) ou par programmation à l’aide [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [CLI d’Azure](/cli/azure/sql/server/firewall-rule#create), ou hello [API REST](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-147">hello first server-level firewall setting can be created using hello [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="7e7e1-148">Les règles de pare-feu au niveau du serveur suivantes peuvent être créées et gérées à l’aide de ces méthodes, et par le biais de Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="7e7e1-149">Les règles de pare-feu au niveau de la base de données ne peuvent être créées et gérées qu’avec Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="7e7e1-150">tooimprove des performances, les règles sont temporairement mis en cache au niveau de base de données hello de pare-feu de niveau serveur.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-150">tooimprove performance, server-level firewall rules are temporarily cached at hello database level.</span></span> <span data-ttu-id="7e7e1-151">cache de hello toorefresh, consultez [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-151">toorefresh hello cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="7e7e1-152">Vous pouvez utiliser [l’audit de base de données SQL](sql-database-auditing.md) modifications de pare-feu au niveau du serveur et au niveau de la base de données tooaudit.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-152">You can use [SQL Database Auditing](sql-database-auditing.md) tooaudit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="7e7e1-153">Portail Azure</span><span class="sxs-lookup"><span data-stu-id="7e7e1-153">Azure portal</span></span>

<span data-ttu-id="7e7e1-154">tooset une règle de pare-feu de niveau serveur Bonjour portail Azure, vous pouvez visiter page Vue d’ensemble de toohello pour votre page de vue d’ensemble de base de données ou hello SQL Azure pour votre serveur logique de base de données Azure.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-154">tooset a server-level firewall rule in hello Azure portal, you can either go toohello Overview page for your Azure SQL database or hello Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="7e7e1-155">Pour obtenir un didacticiel, consultez [créer une base de données à l’aide de hello Azure portal](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-155">For a tutorial, see [Create a DB using hello Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="7e7e1-156">**À partir de la page de présentation de la base de données**</span><span class="sxs-lookup"><span data-stu-id="7e7e1-156">**From database overview page**</span></span>

1. <span data-ttu-id="7e7e1-157">tooset une règle de pare-feu de niveau serveur à partir de la page de vue d’ensemble de base de données hello, cliquez sur **définir serveur pare-feu** barre d’outils hello comme indiqué dans hello suivant image : hello **des paramètres de pare-feu** page hello SQL Serveur de base de données s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-157">tooset a server-level firewall rule from hello database overview page, click **Set server firewall** on hello toolbar as shown in hello following image: hello **Firewall settings** page for hello SQL Database server opens.</span></span>

      ![règle de pare-feu de serveur](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="7e7e1-159">Cliquez sur **ajouter l’adresse IP du client** sur hello barre d’outils tooadd hello adresse IP de hello ordinateur, vous utilisez actuellement, puis sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-159">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="7e7e1-160">Une règle de pare-feu au niveau du serveur est créée pour votre adresse IP actuelle.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![définir la règle de pare-feu de serveur](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="7e7e1-162">**À partir de la page de présentation du serveur**</span><span class="sxs-lookup"><span data-stu-id="7e7e1-162">**From server overview page**</span></span>

<span data-ttu-id="7e7e1-163">nom de serveur complet Hello page Vue d’ensemble de votre serveur ouvre, affichant vous hello entièrement (tel que **mynewserver20170403.database.windows.net**) et fournit des options de configuration supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-163">hello overview page for your server opens, showing you hello fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="7e7e1-164">tooset une règle au niveau du serveur à partir de la page Vue d’ensemble du serveur, cliquez sur **pare-feu** dans le menu de gauche hello sous Paramètres, comme montré dans hello suivant image :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-164">tooset a server-level rule from server overview page, click **Firewall** in hello left-hand menu under Settings as showed in hello following image:</span></span> 

     ![présentation du serveur logique](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="7e7e1-166">Cliquez sur **ajouter l’adresse IP du client** sur hello barre d’outils tooadd hello adresse IP de hello ordinateur, vous utilisez actuellement, puis sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-166">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="7e7e1-167">Une règle de pare-feu au niveau du serveur est créée pour votre adresse IP actuelle.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![définir la règle de pare-feu de serveur](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="7e7e1-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="7e7e1-169">Transact-SQL</span></span>
| <span data-ttu-id="7e7e1-170">Vue de catalogue ou procédure stockée</span><span class="sxs-lookup"><span data-stu-id="7e7e1-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="7e7e1-171">Niveau</span><span class="sxs-lookup"><span data-stu-id="7e7e1-171">Level</span></span> | <span data-ttu-id="7e7e1-172">Description</span><span class="sxs-lookup"><span data-stu-id="7e7e1-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="7e7e1-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="7e7e1-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="7e7e1-174">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-174">Server</span></span> |<span data-ttu-id="7e7e1-175">Affiche les règles de pare-feu de niveau serveur actuelles hello</span><span class="sxs-lookup"><span data-stu-id="7e7e1-175">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="7e7e1-177">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-177">Server</span></span> |<span data-ttu-id="7e7e1-178">Crée ou met à jour les règles de pare-feu au niveau du serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="7e7e1-180">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-180">Server</span></span> |<span data-ttu-id="7e7e1-181">Supprime des règles de pare-feu au niveau du serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="7e7e1-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="7e7e1-183">Base de données</span><span class="sxs-lookup"><span data-stu-id="7e7e1-183">Database</span></span> |<span data-ttu-id="7e7e1-184">Affiche les règles de pare-feu de niveau base de données en cours de hello</span><span class="sxs-lookup"><span data-stu-id="7e7e1-184">Displays hello current database-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="7e7e1-186">Base de données</span><span class="sxs-lookup"><span data-stu-id="7e7e1-186">Database</span></span> |<span data-ttu-id="7e7e1-187">Crée ou met à jour les règles de pare-feu de niveau base de données de hello</span><span class="sxs-lookup"><span data-stu-id="7e7e1-187">Creates or updates hello database-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="7e7e1-189">Bases de données</span><span class="sxs-lookup"><span data-stu-id="7e7e1-189">Databases</span></span> |<span data-ttu-id="7e7e1-190">Supprime les règles de pare-feu au niveau de la base de données</span><span class="sxs-lookup"><span data-stu-id="7e7e1-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="7e7e1-191">Hello exemples suivants passez en revue les règles existantes hello, activez une plage d’adresses IP sur le serveur hello Contoso et supprime une règle de pare-feu :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-191">hello following examples review hello existing rules, enable a range of IP addresses on hello server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="7e7e1-192">Ensuite, ajoutez une règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="7e7e1-193">toodelete une règle de pare-feu de niveau serveur, exécutez la procédure de sp_delete_firewall_rule stockées de hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-193">toodelete a server-level firewall rule, execute hello sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="7e7e1-194">Hello exemple suivant supprime règle hello contosofirewallrule :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-194">hello following example deletes hello rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="7e7e1-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="7e7e1-195">Azure PowerShell</span></span>
| <span data-ttu-id="7e7e1-196">Applet de commande</span><span class="sxs-lookup"><span data-stu-id="7e7e1-196">Cmdlet</span></span> | <span data-ttu-id="7e7e1-197">Niveau</span><span class="sxs-lookup"><span data-stu-id="7e7e1-197">Level</span></span> | <span data-ttu-id="7e7e1-198">Description</span><span class="sxs-lookup"><span data-stu-id="7e7e1-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="7e7e1-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="7e7e1-200">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-200">Server</span></span> |<span data-ttu-id="7e7e1-201">Retourne les règles de pare-feu de niveau serveur actuelles hello</span><span class="sxs-lookup"><span data-stu-id="7e7e1-201">Returns hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="7e7e1-203">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-203">Server</span></span> |<span data-ttu-id="7e7e1-204">Crée une règle de pare-feu au niveau du serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="7e7e1-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="7e7e1-206">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-206">Server</span></span> |<span data-ttu-id="7e7e1-207">Propriétés de hello mises à jour d’une règle de pare-feu de niveau serveur existante</span><span class="sxs-lookup"><span data-stu-id="7e7e1-207">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="7e7e1-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="7e7e1-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="7e7e1-209">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-209">Server</span></span> |<span data-ttu-id="7e7e1-210">Supprime des règles de pare-feu au niveau du serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="7e7e1-211">Bonjour à l’exemple suivant définit une règle de pare-feu de niveau serveur à l’aide de PowerShell :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-211">hello following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="7e7e1-212">Pour obtenir des exemples de PowerShell dans le contexte de hello d’un démarrage rapide, consultez [créer base de données - PowerShell](sql-database-get-started-powershell.md) et [créer une base de données et de configurer une règle de pare-feu à l’aide de PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="7e7e1-212">For PowerShell examples in hello context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="7e7e1-213">Interface de ligne de commande Azure</span><span class="sxs-lookup"><span data-stu-id="7e7e1-213">Azure CLI</span></span>
| <span data-ttu-id="7e7e1-214">Applet de commande</span><span class="sxs-lookup"><span data-stu-id="7e7e1-214">Cmdlet</span></span> | <span data-ttu-id="7e7e1-215">Niveau</span><span class="sxs-lookup"><span data-stu-id="7e7e1-215">Level</span></span> | <span data-ttu-id="7e7e1-216">Description</span><span class="sxs-lookup"><span data-stu-id="7e7e1-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="7e7e1-217">az sql server firewall create</span><span class="sxs-lookup"><span data-stu-id="7e7e1-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="7e7e1-218">Crée un tooall dans pare-feu règle tooallow accès aux bases de données SQL sur le serveur hello à partir de la plage d’adresses IP hello entré.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-218">Creates a firewall rule tooallow access tooall SQL Databases on hello server from hello entered IP address range.</span></span>|
| [<span data-ttu-id="7e7e1-219">az sql server firewall delete</span><span class="sxs-lookup"><span data-stu-id="7e7e1-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="7e7e1-220">Supprime une règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="7e7e1-221">az sql server firewall list</span><span class="sxs-lookup"><span data-stu-id="7e7e1-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="7e7e1-222">Répertorie les règles de pare-feu hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-222">Lists hello firewall rules.</span></span>|
| [<span data-ttu-id="7e7e1-223">az sql server firewall rule show</span><span class="sxs-lookup"><span data-stu-id="7e7e1-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="7e7e1-224">Affiche les détails de hello d’une règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-224">Shows hello details of a firewall rule.</span></span>|
| [<span data-ttu-id="7e7e1-225">ax sql server firewall rule update</span><span class="sxs-lookup"><span data-stu-id="7e7e1-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="7e7e1-226">Met à jour une règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-226">Updates a firewall rule.</span></span>

<span data-ttu-id="7e7e1-227">Bonjour à l’exemple suivant définit une règle de pare-feu de niveau serveur à l’aide de hello CLI d’Azure :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-227">hello following example sets a server-level firewall rule using hello Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="7e7e1-228">Pour obtenir un exemple de CLI d’Azure dans le contexte de hello d’un démarrage rapide, consultez [créer DDB - CLI d’Azure](sql-database-get-started-cli.md) et [créer une base de données et de configurer une règle de pare-feu à l’aide de hello CLI d’Azure](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="7e7e1-228">For an Azure CLI example in hello context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="7e7e1-229">API REST</span><span class="sxs-lookup"><span data-stu-id="7e7e1-229">REST API</span></span>
| <span data-ttu-id="7e7e1-230">API</span><span class="sxs-lookup"><span data-stu-id="7e7e1-230">API</span></span> | <span data-ttu-id="7e7e1-231">Niveau</span><span class="sxs-lookup"><span data-stu-id="7e7e1-231">Level</span></span> | <span data-ttu-id="7e7e1-232">Description</span><span class="sxs-lookup"><span data-stu-id="7e7e1-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="7e7e1-233">Répertorier les règles de pare-feu</span><span class="sxs-lookup"><span data-stu-id="7e7e1-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="7e7e1-234">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-234">Server</span></span> |<span data-ttu-id="7e7e1-235">Affiche les règles de pare-feu de niveau serveur actuelles hello</span><span class="sxs-lookup"><span data-stu-id="7e7e1-235">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-236">Créer une règle de pare-feu</span><span class="sxs-lookup"><span data-stu-id="7e7e1-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="7e7e1-237">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-237">Server</span></span> |<span data-ttu-id="7e7e1-238">Crée ou met à jour les règles de pare-feu au niveau du serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="7e7e1-239">Obtenir une règle de pare-feu</span><span class="sxs-lookup"><span data-stu-id="7e7e1-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="7e7e1-240">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-240">Server</span></span> |<span data-ttu-id="7e7e1-241">Propriétés de hello mises à jour d’une règle de pare-feu de niveau serveur existante</span><span class="sxs-lookup"><span data-stu-id="7e7e1-241">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="7e7e1-242">Supprimer une règle de pare-feu</span><span class="sxs-lookup"><span data-stu-id="7e7e1-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="7e7e1-243">Serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-243">Server</span></span> |<span data-ttu-id="7e7e1-244">Supprime des règles de pare-feu au niveau du serveur</span><span class="sxs-lookup"><span data-stu-id="7e7e1-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="7e7e1-245">Règle de pare-feu au niveau du serveur par rapport à une règle de pare-feu au niveau de la base de données</span><span class="sxs-lookup"><span data-stu-id="7e7e1-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="7e7e1-246">Q :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-246">Q.</span></span> <span data-ttu-id="7e7e1-247">Les utilisateurs d’une base de données doivent-ils être totalement isolés d’une autre base de données ?</span><span class="sxs-lookup"><span data-stu-id="7e7e1-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="7e7e1-248">Si oui, accordez l’accès à l’aide de règles de pare-feu au niveau de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="7e7e1-249">Cela évite à l’aide de règles de pare-feu de niveau serveur, qui autorisent l’accès via le pare-feu hello tooall bases de données, ce qui réduit la profondeur de hello de vos défenses.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-249">This avoids using server-level firewall rules, which permit access through hello firewall tooall databases, reducing hello depth of your defenses.</span></span>   
 
<span data-ttu-id="7e7e1-250">Q :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-250">Q.</span></span> <span data-ttu-id="7e7e1-251">Les utilisateurs à l’adresse IP d’hello besoin d’accès tooall de bases de données ?</span><span class="sxs-lookup"><span data-stu-id="7e7e1-251">Do users at hello IP address’s need access tooall databases?</span></span>   
  <span data-ttu-id="7e7e1-252">Utilisez des pare-feu de niveau serveur règles tooreduce hello le nombre de fois où que vous devez configurer des règles de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-252">Use server-level firewall rules tooreduce hello number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="7e7e1-253">Q :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-253">Q.</span></span> <span data-ttu-id="7e7e1-254">Hello personne ou une équipe de configuration des règles de pare-feu hello uniquement puissent y accéder via hello portail Azure, PowerShell ou hello API REST ?</span><span class="sxs-lookup"><span data-stu-id="7e7e1-254">Does hello person or team configuring hello firewall rules only have access through hello Azure portal, PowerShell, or hello REST API?</span></span>   
  <span data-ttu-id="7e7e1-255">Vous devez utiliser des règles de pare-feu au niveau du serveur.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="7e7e1-256">Les règles de pare-feu au niveau de la base de données ne peuvent être configurées qu’avec Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="7e7e1-257">Q :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-257">Q.</span></span> <span data-ttu-id="7e7e1-258">Hello personne ou une équipe de configuration des règles de pare-feu hello est interdit d’ayant l’autorisation de niveau supérieur au niveau de base de données hello ?</span><span class="sxs-lookup"><span data-stu-id="7e7e1-258">Is hello person or team configuring hello firewall rules prohibited from having high-level permission at hello database level?</span></span>   
  <span data-ttu-id="7e7e1-259">Utilisez des règles de pare-feu au niveau du serveur.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-259">Use server-level firewall rules.</span></span> <span data-ttu-id="7e7e1-260">La configuration de règles de pare-feu de niveau base de données à l’aide de Transact-SQL, requiert au moins `CONTROL DATABASE` autorisation au niveau de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at hello database level.</span></span>  

<span data-ttu-id="7e7e1-261">Q :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-261">Q.</span></span> <span data-ttu-id="7e7e1-262">Est hello personne ou une équipe de configuration ou de l’audit des règles de pare-feu hello, centraliser la gestion des règles de pare-feu pour un grand nombre (peut-être par 100) des bases de données ?</span><span class="sxs-lookup"><span data-stu-id="7e7e1-262">Is hello person or team configuring or auditing hello firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="7e7e1-263">Cette sélection dépend de vos besoins et de votre environnement.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="7e7e1-264">Les règles de pare-feu de niveau serveur peuvent être tooconfigure plus facile, mais de script peut configurer des règles à hello au niveau de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-264">Server-level firewall rules might be easier tooconfigure, but scripting can configure rules at hello database-level.</span></span> <span data-ttu-id="7e7e1-265">Même si vous utilisez les règles de pare-feu de niveau serveur, vous devrez peut-être les règles de pare-feu de base de données tooaudit hello, toosee si les utilisateurs avec `CONTROL` sur base de données hello ont créé les règles de pare-feu de niveau base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-265">And even if you use server-level firewall rules, you might need tooaudit hello database-firewall rules, toosee if users with `CONTROL` permission on hello database have created database-level firewall rules.</span></span>   

<span data-ttu-id="7e7e1-266">Q :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-266">Q.</span></span> <span data-ttu-id="7e7e1-267">Puis-je utiliser à la fois des règles de pare-feu au niveau du serveur et des règles de pare-feu au niveau de la base de données ?</span><span class="sxs-lookup"><span data-stu-id="7e7e1-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="7e7e1-268">Oui.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-268">Yes.</span></span> <span data-ttu-id="7e7e1-269">Certains utilisateurs, par exemple les administrateurs, peuvent avoir besoin des règles de pare-feu au niveau du serveur.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="7e7e1-270">D’autres utilisateurs, tels que les utilisateurs d’une application de base de données, peuvent avoir besoin de règles de pare-feu au niveau de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="7e7e1-271">Dépannage du pare-feu de base de données hello</span><span class="sxs-lookup"><span data-stu-id="7e7e1-271">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="7e7e1-272">Tenez compte des hello lors de l’accès toohello service de base de données SQL Microsoft Azure ne se comporte pas comme prévu les points suivants :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-272">Consider hello following points when access toohello Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="7e7e1-273">**Configuration du pare-feu local :** avant que votre ordinateur peut accéder à base de données SQL Azure, vous devrez peut-être toocreate une exception de pare-feu sur votre ordinateur pour le port TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need toocreate a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="7e7e1-274">Si vous effectuez des connexions à l’intérieur des limites de cloud computing Azure hello, vous avez peut-être tooopen des ports supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-274">If you are making connections inside hello Azure cloud boundary, you may have tooopen additional ports.</span></span> <span data-ttu-id="7e7e1-275">Pour plus d’informations, consultez hello **base de données SQL : en dehors de Visual Studio à l’intérieur de** section de [Ports au-delà de 1433 pour ADO.NET 4.5 et de la base de données SQL](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-275">For more information, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="7e7e1-276">**Traduction d’adresses réseau (NAT) :** tooNAT échéance, adresse IP de hello utilisé par votre tooAzure de tooconnect ordinateur base de données SQL peut être différente de l’adresse IP de hello indiqué dans les paramètres de configuration IP de votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-276">**Network address translation (NAT):** Due tooNAT, hello IP address used by your computer tooconnect tooAzure SQL Database may be different than hello IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="7e7e1-277">adresse IP de tooview hello est de votre ordinateur à l’aide de tooconnect tooAzure, connectez-vous au portail de toohello et accédez toohello **configurer** onglet sur serveur hello qui héberge votre base de données.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-277">tooview hello IP address your computer is using tooconnect tooAzure, log in toohello portal and navigate toohello **Configure** tab on hello server that hosts your database.</span></span> <span data-ttu-id="7e7e1-278">Sous hello **adresses IP autorisées** section hello **adresse IP du Client actuel** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-278">Under hello **Allowed IP Addresses** section, hello **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="7e7e1-279">Cliquez sur **ajouter** toohello **adresses IP autorisées** tooallow ce serveur tooaccess hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-279">Click **Add** toohello **Allowed IP Addresses** tooallow this computer tooaccess hello server.</span></span>
* <span data-ttu-id="7e7e1-280">**Liste verte de modifications toohello n'ont pas encore entrées en vigueur :** il peut y avoir autant qu’un délai de cinq minutes pour modifie l’effet de tootake toohello base de données SQL Azure pare-feu configuration.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-280">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure SQL Database firewall configuration tootake effect.</span></span>
* <span data-ttu-id="7e7e1-281">**la connexion Hello n’est pas autorisée ou un mot de passe incorrect a été utilisée :** si une connexion n’a pas d’autorisations sur le serveur de base de données SQL Azure hello ou hello mot de passe est incorrect, le serveur de base de données SQL Azure hello connexion toohello est refusé.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-281">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure SQL Database server or hello password used is incorrect, hello connection toohello Azure SQL Database server is denied.</span></span> <span data-ttu-id="7e7e1-282">Création d’un paramètre de pare-feu fournit uniquement les clients avec un tooattempt opportunité connexion tooyour serveur ; chaque client doit fournir les informations d’identification de sécurité nécessaires hello.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-282">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span> <span data-ttu-id="7e7e1-283">Pour plus d’informations sur la préparation des connexions, consultez Gestion des bases de données, des connexions et des utilisateurs dans Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="7e7e1-284">**Adresse IP dynamique :** si vous avez une connexion Internet avec adressage IP dynamique et que vous rencontrez des problèmes de mise en route à travers le pare-feu hello, vous pouvez tenter de hello suivant solutions :</span><span class="sxs-lookup"><span data-stu-id="7e7e1-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>
  
  * <span data-ttu-id="7e7e1-285">Demandez à votre fournisseur de Service Internet (ISP) pour la plage d’adresses IP hello affecté tooyour les ordinateurs clients de ce serveur de base de données SQL Azure hello accès et puis ajoutez plage d’adresses IP hello comme une règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-285">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure SQL Database server, and then add hello IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="7e7e1-286">Obtenir l’adressage IP statique à la place pour vos ordinateurs clients et ajoutez des adresses IP hello en tant que règles de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="7e7e1-286">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7e7e1-287">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="7e7e1-287">Next steps</span></span>

- <span data-ttu-id="7e7e1-288">Pour obtenir un démarrage rapide sur la création d’une base de données et d’une règle de pare-feu au niveau du serveur, consultez [Créer une base de données Azure SQL Database](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="7e7e1-289">Pour obtenir de connexion de base de données SQL Azure de tooan à partir de la source ouverte ou des applications tierces, consultez [tooSQL base de données des exemples de code de démarrage rapide de Client](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e7e1-289">For help in connecting tooan Azure SQL database from open source or third-party applications, see [Client quick-start code samples tooSQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="7e7e1-290">Pour plus d’informations sur les ports supplémentaires que vous pouvez être amené à tooopen, consultez hello **base de données SQL : en dehors de Visual Studio à l’intérieur de** section [Ports au-delà de 1433 pour ADO.NET 4.5 et de la base de données SQL](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="7e7e1-290">For information on additional ports that you may need tooopen, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="7e7e1-291">Pour obtenir une vue d’ensemble de la sécurité Azure SQL Database, consultez [Sécurisation de votre base de données](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="7e7e1-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
