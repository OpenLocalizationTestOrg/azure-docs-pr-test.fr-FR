---
title: "aaaData dépendant de routage avec la base de données SQL Azure | Documents Microsoft"
description: "Comment toouse hello classe ShardMapManager dans les applications .NET pour une fonctionnalité de bases de données partitionnées dans base de données SQL Azure, le routage dépendant des données"
services: sql-database
documentationcenter: 
manager: jhubbard
author: torsteng
editor: 
ms.assetid: cad09e15-5561-4448-aa18-b38f54cda004
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/27/2017
ms.author: ddove
ms.openlocfilehash: 34014508ae01905686791fe096bb275cb84f53b4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="data-dependent-routing"></a><span data-ttu-id="7e603-103">Routage dépendant des données</span><span class="sxs-lookup"><span data-stu-id="7e603-103">Data dependent routing</span></span>
<span data-ttu-id="7e603-104">**Routage dépendant des données** hello capacité toouse hello données dans une requête tooroute hello demande tooan base de données appropriée.</span><span class="sxs-lookup"><span data-stu-id="7e603-104">**Data dependent routing** is hello ability toouse hello data in a query tooroute hello request tooan appropriate database.</span></span> <span data-ttu-id="7e603-105">Il s’agit d’un modèle fondamental quand vous travaillez avec des bases de données partitionnées.</span><span class="sxs-lookup"><span data-stu-id="7e603-105">This is a fundamental pattern when working with sharded databases.</span></span> <span data-ttu-id="7e603-106">contexte de requête Hello peut-être également être utilisés tooroute demande de hello, surtout si la clé de partitionnement hello n’est pas partie de la requête de hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-106">hello request context may also be used tooroute hello request, especially if hello sharding key is not part of hello query.</span></span> <span data-ttu-id="7e603-107">Chaque requête spécifique ou une transaction dans une application à l’aide de routage dépendant des données est limitée tooaccessing une base de données par requête.</span><span class="sxs-lookup"><span data-stu-id="7e603-107">Each specific query or transaction in an application using data dependent routing is restricted tooaccessing a single database per request.</span></span> <span data-ttu-id="7e603-108">Pour les outils élastique de base de données de SQL Azure hello, cet acheminement s’effectue par hello  **[ShardMapManager classe](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx)**  dans les applications ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="7e603-108">For hello Azure SQL Database Elastic tools, this routing is accomplished with hello **[ShardMapManager class](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx)** in ADO.NET applications.</span></span>

<span data-ttu-id="7e603-109">application Hello n’a pas besoin tootrack différentes chaînes de connexion ou les emplacements de base de données associés à différentes tranches de données dans un environnement de partitionnée hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-109">hello application does not need tootrack various connection strings or DB locations associated with different slices of data in hello sharded environment.</span></span> <span data-ttu-id="7e603-110">Au lieu de cela, hello [Gestionnaire de carte de partitions](sql-database-elastic-scale-shard-map-management.md) ouvre les connexions toohello correct bases de données si nécessaire, en fonction des données de hello dans la carte de partitions hello et valeur hello de clé de partitionnement hello qui est la cible de hello de demande de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-110">Instead, hello [Shard Map Manager](sql-database-elastic-scale-shard-map-management.md) opens connections toohello correct databases when needed, based on hello data in hello shard map and hello value of hello sharding key that is hello target of hello application’s request.</span></span> <span data-ttu-id="7e603-111">Hello clé est généralement hello *customer_id*, *tenant_id*, *date_key*, ou tout autre identificateur spécifique qui est un paramètre fondamentaux de la demande de base de données hello).</span><span class="sxs-lookup"><span data-stu-id="7e603-111">hello key is typically hello *customer_id*, *tenant_id*, *date_key*, or some other specific identifier that is a fundamental parameter of hello database request).</span></span> 

<span data-ttu-id="7e603-112">Pour plus d’informations, consultez [Augmentation de la taille des instances SQL Server avec le routage dépendant des données](https://technet.microsoft.com/library/cc966448.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e603-112">For more information, see [Scaling Out SQL Server with Data Dependent Routing](https://technet.microsoft.com/library/cc966448.aspx).</span></span>

## <a name="download-hello-client-library"></a><span data-ttu-id="7e603-113">Télécharger la bibliothèque cliente de hello</span><span class="sxs-lookup"><span data-stu-id="7e603-113">Download hello client library</span></span>
<span data-ttu-id="7e603-114">classe de hello tooget, installation hello [bibliothèque cliente de base de données élastique](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="7e603-114">tooget hello class, install hello [Elastic Database Client Library](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span> 

## <a name="using-a-shardmapmanager-in-a-data-dependent-routing-application"></a><span data-ttu-id="7e603-115">Utilisation d’une classe ShardMapManager dans une application de routage dépendant des données</span><span class="sxs-lookup"><span data-stu-id="7e603-115">Using a ShardMapManager in a data dependent routing application</span></span>
<span data-ttu-id="7e603-116">Les applications doivent instancier hello **ShardMapManager** pendant l’initialisation, à l’aide d’appel de fabrique hello  **[GetSQLShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)**.</span><span class="sxs-lookup"><span data-stu-id="7e603-116">Applications should instantiate hello **ShardMapManager** during initialization, using hello factory call **[GetSQLShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)**.</span></span> <span data-ttu-id="7e603-117">Dans cet exemple, une classe **ShardMapManager** et un objet **ShardMap** spécifique qu’elle contient sont initialisés.</span><span class="sxs-lookup"><span data-stu-id="7e603-117">In this example, both a **ShardMapManager** and a specific **ShardMap** that it contains are initialized.</span></span> <span data-ttu-id="7e603-118">Cet exemple affiche hello GetSqlShardMapManager et [GetRangeShardMap](https://msdn.microsoft.com/library/azure/dn824173.aspx) méthodes.</span><span class="sxs-lookup"><span data-stu-id="7e603-118">This example shows hello GetSqlShardMapManager and [GetRangeShardMap](https://msdn.microsoft.com/library/azure/dn824173.aspx) methods.</span></span>

    ShardMapManager smm = ShardMapManagerFactory.GetSqlShardMapManager(smmConnnectionString, 
                      ShardMapManagerLoadPolicy.Lazy);
    RangeShardMap<int> customerShardMap = smm.GetRangeShardMap<int>("customerMap"); 

### <a name="use-lowest-privilege-credentials-possible-for-getting-hello-shard-map"></a><span data-ttu-id="7e603-119">Utilisez la plus faible privilège d’informations d’identification possibles pour l’obtention de carte de partitions hello</span><span class="sxs-lookup"><span data-stu-id="7e603-119">Use lowest privilege credentials possible for getting hello shard map</span></span>
<span data-ttu-id="7e603-120">Si une application est la manipulation pas de carte de partitions hello lui-même, informations d’identification de hello utilisées dans la méthode de fabrique hello doivent avoir des autorisations uniquement en lecture seule sur hello **carte de partitions globales** base de données.</span><span class="sxs-lookup"><span data-stu-id="7e603-120">If an application is not manipulating hello shard map itself, hello credentials used in hello factory method should have just read-only permissions on hello **Global Shard Map** database.</span></span> <span data-ttu-id="7e603-121">Ces informations d’identification sont en général différentes de gestionnaire de carte de partitions informations d’identification utilisées tooopen connexions toohello.</span><span class="sxs-lookup"><span data-stu-id="7e603-121">These credentials are typically different from credentials used tooopen connections toohello shard map manager.</span></span> <span data-ttu-id="7e603-122">Voir aussi [informations d’identification utilisées bibliothèque du client de base de données élastique tooaccess hello](sql-database-elastic-scale-manage-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="7e603-122">See also [Credentials used tooaccess hello Elastic Database client library](sql-database-elastic-scale-manage-credentials.md).</span></span> 

## <a name="call-hello-openconnectionforkey-method"></a><span data-ttu-id="7e603-123">Appelez la méthode de OpenConnectionForKey hello</span><span class="sxs-lookup"><span data-stu-id="7e603-123">Call hello OpenConnectionForKey method</span></span>
<span data-ttu-id="7e603-124">Hello  **[ShardMap.OpenConnectionForKey méthode](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx)**  retourne une connexion ADO.Net prêt pour l’émission de commandes toohello base de données appropriée en fonction de valeur hello Hello **clé**paramètre.</span><span class="sxs-lookup"><span data-stu-id="7e603-124">hello **[ShardMap.OpenConnectionForKey method](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx)** returns an ADO.Net connection ready for issuing commands toohello appropriate database based on hello value of hello **key** parameter.</span></span> <span data-ttu-id="7e603-125">Les informations de partition sont mis en cache dans une application hello en hello **ShardMapManager**, de sorte que ces demandes n’impliquent généralement une recherche de base de données par rapport à hello **carte de partitions globales** base de données.</span><span class="sxs-lookup"><span data-stu-id="7e603-125">Shard information is cached in hello application by hello **ShardMapManager**, so these requests do not typically involve a database lookup against hello **Global Shard Map** database.</span></span> 

    // Syntax: 
    public SqlConnection OpenConnectionForKey<TKey>(
        TKey key,
        string connectionString,
        ConnectionOptions options
    )


* <span data-ttu-id="7e603-126">Hello **clé** paramètre est utilisé comme clé de recherche dans hello partition carte toodetermine hello base de données appropriée pour la demande de hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-126">hello **key** parameter is used as a lookup key into hello shard map toodetermine hello appropriate database for hello request.</span></span> 
* <span data-ttu-id="7e603-127">Hello **connectionString** est toopass utilisées seules informations d’identification utilisateur hello pour les connexions hello souhaité.</span><span class="sxs-lookup"><span data-stu-id="7e603-127">hello **connectionString** is used toopass only hello user credentials for hello desired connection.</span></span> <span data-ttu-id="7e603-128">Aucun nom de base de données ou le nom du serveur sont inclus dans ce *connectionString* étant donné que la méthode hello déterminera la base de données hello et serveur à l’aide de hello **ShardMap**.</span><span class="sxs-lookup"><span data-stu-id="7e603-128">No database name or server name are included in this *connectionString* since hello method will determine hello database and server using hello **ShardMap**.</span></span> 
* <span data-ttu-id="7e603-129">Hello  **[connectionOptions](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.connectionoptions.aspx)**  doit être défini trop**ConnectionOptions.Validate** si un environnement où mappe les partitions peut changer et les lignes peuvent déplacer des bases de données tooother comme un résultat des opérations de fractionnement ou de fusion.</span><span class="sxs-lookup"><span data-stu-id="7e603-129">hello **[connectionOptions](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.connectionoptions.aspx)** should be set too**ConnectionOptions.Validate** if an environment where shard maps may change and rows may move tooother databases as a result of split or merge operations.</span></span> <span data-ttu-id="7e603-130">Cela implique une carte de partitions local de toohello de requête brève sur hello base de données cible (pas un mappage de partitions globales toohello) avant la connexion de hello est remis toohello application.</span><span class="sxs-lookup"><span data-stu-id="7e603-130">This involves a brief query toohello local shard map on hello target database (not toohello global shard map) before hello connection is delivered toohello application.</span></span> 

<span data-ttu-id="7e603-131">Si la validation par rapport à la carte de partitions local de hello hello échoue (indiquant que le cache de hello est incorrecte), hello Gestionnaire de carte de partitions interroge hello global partition carte tooobtain hello nouvelle valeur correcte pour la recherche de hello, mettre à jour le cache de hello et obtenir et de retour hello connexion de base de données appropriée.</span><span class="sxs-lookup"><span data-stu-id="7e603-131">If hello validation against hello local shard map fails (indicating that hello cache is incorrect), hello Shard Map Manager will query hello global shard map tooobtain hello new correct value for hello lookup, update hello cache, and obtain and return hello appropriate database connection.</span></span> 

<span data-ttu-id="7e603-132">Utilisez **ConnectionOptions.None** uniquement quand aucune modification de mappage de carte n’est prévue pendant qu’une application est en ligne.</span><span class="sxs-lookup"><span data-stu-id="7e603-132">Use **ConnectionOptions.None** only when shard mapping changes are not expected while an application is online.</span></span> <span data-ttu-id="7e603-133">Dans ce cas, hello mis en cache les valeurs peuvent être considérées comme tooalways soit correct, et la base de données hello validation supplémentaire aller-retour appel toohello cible peut être ignorée en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="7e603-133">In that case, hello cached values can be assumed tooalways be correct, and hello extra round-trip validation call toohello target database can be safely skipped.</span></span> <span data-ttu-id="7e603-134">Cela réduit le trafic de base de données.</span><span class="sxs-lookup"><span data-stu-id="7e603-134">That reduces database traffic.</span></span> <span data-ttu-id="7e603-135">Hello **connectionOptions** peut également être définie par une valeur dans un tooindicate de fichier de configuration, si des modifications de partitionnement sont prévues ou non pendant une période donnée.</span><span class="sxs-lookup"><span data-stu-id="7e603-135">hello **connectionOptions** may also be set via a value in a configuration file tooindicate whether sharding changes are expected or not during a period of time.</span></span>  

<span data-ttu-id="7e603-136">Cet exemple utilise la valeur hello de clé entière **CustomerID**, en utilisant un **ShardMap** objet nommé **customerShardMap**.</span><span class="sxs-lookup"><span data-stu-id="7e603-136">This example uses hello value of an integer key **CustomerID**, using a **ShardMap** object named **customerShardMap**.</span></span>  

    int customerId = 12345; 
    int newPersonId = 4321; 

    // Connect toohello shard for that customer ID. No need toocall a SqlConnection 
    // constructor followed by hello Open method.
    using (SqlConnection conn = customerShardMap.OpenConnectionForKey(customerId, 
        Configuration.GetCredentialsConnectionString(), ConnectionOptions.Validate)) 
    { 
        // Execute a simple command. 
        SqlCommand cmd = conn.CreateCommand(); 
        cmd.CommandText = @"UPDATE Sales.Customer 
                            SET PersonID = @newPersonID 
                            WHERE CustomerID = @customerID"; 

        cmd.Parameters.AddWithValue("@customerID", customerId); 
        cmd.Parameters.AddWithValue("@newPersonID", newPersonId); 
        cmd.ExecuteNonQuery(); 
    }  

<span data-ttu-id="7e603-137">Hello **OpenConnectionForKey** méthode retourne un nouveau déjà ouvert connexion toohello base de données correcte.</span><span class="sxs-lookup"><span data-stu-id="7e603-137">hello **OpenConnectionForKey** method returns a new already-open connection toohello correct database.</span></span> <span data-ttu-id="7e603-138">Les connexions utilisées de cette manière tirent pleinement parti du regroupement de connexions ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="7e603-138">Connections utilized in this way still take full advantage of ADO.Net connection pooling.</span></span> <span data-ttu-id="7e603-139">Tant que les transactions et les demandes peuvent être satisfaites en une seule partition à la fois, ce doit être la seule modification hello nécessaire dans une application déjà à l’aide d’ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="7e603-139">As long as transactions and requests can be satisfied by one shard at a time, this should be hello only modification necessary in an application already using ADO.Net.</span></span> 

<span data-ttu-id="7e603-140">Hello  **[OpenConnectionForKeyAsync méthode](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkeyasync.aspx)**  est également disponible si votre application permet d’utiliser la programmation asynchrone avec ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="7e603-140">hello **[OpenConnectionForKeyAsync method](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkeyasync.aspx)** is also available if your application makes use asynchronous programming with ADO.Net.</span></span> <span data-ttu-id="7e603-141">Son comportement est données hello dépendantes routage équivalent de l’objet ADO. De NET  **[Connection.OpenAsync](https://msdn.microsoft.com/library/hh223688\(v=vs.110\).aspx)**  (méthode).</span><span class="sxs-lookup"><span data-stu-id="7e603-141">Its behavior is hello data dependent routing equivalent of ADO.Net's **[Connection.OpenAsync](https://msdn.microsoft.com/library/hh223688\(v=vs.110\).aspx)** method.</span></span>

## <a name="integrating-with-transient-fault-handling"></a><span data-ttu-id="7e603-142">Intégration de la gestion des erreurs temporaires</span><span class="sxs-lookup"><span data-stu-id="7e603-142">Integrating with transient fault handling</span></span>
<span data-ttu-id="7e603-143">Une meilleure pratique du développement d’applications d’accès aux données dans le cloud de hello est tooensure que transitoires sont interceptées par application hello et que les opérations de hello sont retentées plusieurs fois avant de lever une erreur.</span><span class="sxs-lookup"><span data-stu-id="7e603-143">A best practice in developing data access applications in hello cloud is tooensure that transient faults are caught by hello app, and that hello operations are retried several times before throwing an error.</span></span> <span data-ttu-id="7e603-144">La gestion des erreurs temporaires pour les applications cloud est traitée à la page [Gestion des erreurs temporaires](https://msdn.microsoft.com/library/dn440719\(v=pandp.60\).aspx).</span><span class="sxs-lookup"><span data-stu-id="7e603-144">Transient fault handling for cloud applications is discussed at [Transient Fault Handling](https://msdn.microsoft.com/library/dn440719\(v=pandp.60\).aspx).</span></span> 

<span data-ttu-id="7e603-145">Gestion d’erreurs transitoires peut coexister naturellement avec le modèle de routage dépendant des données hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-145">Transient fault handling can coexist naturally with hello Data Dependent Routing pattern.</span></span> <span data-ttu-id="7e603-146">demande d’accès données hello tooretry notamment hello est Hello primordiale **à l’aide de** bloc qui a obtenu la connexion de routage dépendant des données hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-146">hello key requirement is tooretry hello entire data access request including hello **using** block that obtained hello data-dependent routing connection.</span></span> <span data-ttu-id="7e603-147">exemple Hello ci-dessus peut être réécrit comme suit (Notez le changement en surbrillance).</span><span class="sxs-lookup"><span data-stu-id="7e603-147">hello example above could be rewritten as follows (note highlighted change).</span></span> 

### <a name="example---data-dependent-routing-with-transient-fault-handling"></a><span data-ttu-id="7e603-148">Exemple : routage dépendant des données avec gestion des erreurs temporaires</span><span class="sxs-lookup"><span data-stu-id="7e603-148">Example - data dependent routing with transient fault handling</span></span>
<pre><code>int customerId = 12345; 
int newPersonId = 4321; 

<span style="background-color:  #FFFF00">Configuration.SqlRetryPolicy.ExecuteAction(() =&gt; </span> 
<span style="background-color:  #FFFF00">    { </span>
        // Connect toohello shard for a customer ID. 
        using (SqlConnection conn = customerShardMap.OpenConnectionForKey(customerId,  
        Configuration.GetCredentialsConnectionString(), ConnectionOptions.Validate)) 
        { 
            // Execute a simple command 
            SqlCommand cmd = conn.CreateCommand(); 

            cmd.CommandText = @&quot;UPDATE Sales.Customer 
                            SET PersonID = @newPersonID 
                            WHERE CustomerID = @customerID&quot;; 

            cmd.Parameters.AddWithValue(&quot;@customerID&quot;, customerId); 
            cmd.Parameters.AddWithValue(&quot;@newPersonID&quot;, newPersonId); 
            cmd.ExecuteNonQuery(); 

            Console.WriteLine(&quot;Update completed&quot;); 
        } 
<span style="background-color:  #FFFF00">    }); </span> 
</code></pre>


<span data-ttu-id="7e603-149">Packages de gestion d’erreurs transitoires tooimplement nécessaires sont téléchargés automatiquement lorsque vous générez l’application d’exemple hello élastique de base de données.</span><span class="sxs-lookup"><span data-stu-id="7e603-149">Packages necessary tooimplement transient fault handling are downloaded automatically when you build hello elastic database sample application.</span></span> <span data-ttu-id="7e603-150">Les packages sont également disponibles séparément dans [Enterprise Library - Bloc des applications de gestion des erreurs temporaires](http://www.nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/).</span><span class="sxs-lookup"><span data-stu-id="7e603-150">Packages are also available separately at [Enterprise Library - Transient Fault Handling Application Block](http://www.nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/).</span></span> <span data-ttu-id="7e603-151">Utilisez la version 6.0 ou ultérieure.</span><span class="sxs-lookup"><span data-stu-id="7e603-151">Use version 6.0 or later.</span></span> 

## <a name="transactional-consistency"></a><span data-ttu-id="7e603-152">Cohérence transactionnelle</span><span class="sxs-lookup"><span data-stu-id="7e603-152">Transactional consistency</span></span>
<span data-ttu-id="7e603-153">Propriétés transactionnelles sont garanties pour toutes les partitions de tooa local d’opérations.</span><span class="sxs-lookup"><span data-stu-id="7e603-153">Transactional properties are guaranteed for all operations local tooa shard.</span></span> <span data-ttu-id="7e603-154">Par exemple, les transactions soumises via le routage dépendant des données s’exécuter dans hello étendue de partition cible de hello pour la connexion de hello.</span><span class="sxs-lookup"><span data-stu-id="7e603-154">For example, transactions submitted through data-dependent routing execute within hello scope of hello target shard for hello connection.</span></span> <span data-ttu-id="7e603-155">À ce stade, il n'existe aucune fonctionnalité fournie pour l'inscription de plusieurs connexions dans une transaction, et par conséquent, il n'existe aucune garantie transactionnelle lors des opérations effectuées sur les partitions.</span><span class="sxs-lookup"><span data-stu-id="7e603-155">At this time, there are no capabilities provided for enlisting multiple connections into a transaction, and therefore there are no transactional guarantees for operations performed across shards.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7e603-156">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="7e603-156">Next steps</span></span>
<span data-ttu-id="7e603-157">Voir toodetach une partition ou une partition, de tooreattach [à l’aide des problèmes du mappage de partitions hello RecoveryManager classe toofix](sql-database-elastic-database-recovery-manager.md)</span><span class="sxs-lookup"><span data-stu-id="7e603-157">toodetach a shard, or tooreattach a shard, see [Using hello RecoveryManager class toofix shard map problems](sql-database-elastic-database-recovery-manager.md)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

