---
title: aaaPerformance les compteurs pour le Gestionnaire de carte de partitions
description: "Classe ShardMapManager et compteurs de performances pour le routage dépendant des données"
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
editor: 
ms.assetid: b090aba0-2e30-454c-96b3-dffa281f539a
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: ddove
ms.openlocfilehash: d24198563d9fa88d12e6c464dbe89bc300e72ca0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="performance-counters-for-shard-map-manager"></a><span data-ttu-id="633af-103">Compteurs de performance pour le Gestionnaire de cartes de partitions</span><span class="sxs-lookup"><span data-stu-id="633af-103">Performance counters for shard map manager</span></span>
<span data-ttu-id="633af-104">Vous pouvez capturer des performances hello d’un [Gestionnaire de carte de partitions](sql-database-elastic-scale-shard-map-management.md), surtout lorsque vous utilisez [routage dépendant des données](sql-database-elastic-scale-data-dependent-routing.md).</span><span class="sxs-lookup"><span data-stu-id="633af-104">You can capture hello performance of a [shard map manager](sql-database-elastic-scale-shard-map-management.md), especially when using [data dependent routing](sql-database-elastic-scale-data-dependent-routing.md).</span></span> <span data-ttu-id="633af-105">Les compteurs sont créés avec des méthodes de hello Microsoft.Azure.SqlDatabase.ElasticScale.Client classe.</span><span class="sxs-lookup"><span data-stu-id="633af-105">Counters are created with methods of hello Microsoft.Azure.SqlDatabase.ElasticScale.Client class.</span></span>  

<span data-ttu-id="633af-106">Les compteurs sont utilisés tootrack les performances de hello de [routage dépendant des données](sql-database-elastic-scale-data-dependent-routing.md) operations.</span><span class="sxs-lookup"><span data-stu-id="633af-106">Counters are used tootrack hello performance of [data dependent routing](sql-database-elastic-scale-data-dependent-routing.md) operations.</span></span> <span data-ttu-id="633af-107">Ces compteurs sont accessibles dans hello Analyseur de performances, sous la catégorie de « Élastique de base de données : partition gestion » hello.</span><span class="sxs-lookup"><span data-stu-id="633af-107">These counters are accessible in hello Performance Monitor, under hello "Elastic Database: Shard Management" category.</span></span>

<span data-ttu-id="633af-108">**Pour la version la plus récente hello :** accédez trop[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="633af-108">**For hello latest version:** Go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span> <span data-ttu-id="633af-109">Voir aussi [mise à niveau d’une bibliothèque cliente de base de données élastique plus récente d’application toouse hello](sql-database-elastic-scale-upgrade-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="633af-109">See also [Upgrade an app toouse hello latest elastic database client library](sql-database-elastic-scale-upgrade-client-library.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="633af-110">Composants requis</span><span class="sxs-lookup"><span data-stu-id="633af-110">Prerequisites</span></span>
* <span data-ttu-id="633af-111">catégorie de performance toocreate hello et des compteurs hello utilisateur doit faire partie de hello local **administrateurs** groupe sur l’ordinateur hello hébergeant l’application hello.</span><span class="sxs-lookup"><span data-stu-id="633af-111">toocreate hello performance category and counters, hello user must be a part of hello local **Administrators** group on hello machine hosting hello application.</span></span>  
* <span data-ttu-id="633af-112">toocreate performances instance de compteur et mettre à jour les compteurs de hello, utilisateur de hello doit être un membre de deux hello **administrateurs** ou **utilisateurs de l’Analyseur de performances** groupe.</span><span class="sxs-lookup"><span data-stu-id="633af-112">toocreate a performance counter instance and update hello counters, hello user must be a member of either hello **Administrators** or **Performance Monitor Users** group.</span></span> 

## <a name="create-performance-category-and-counters"></a><span data-ttu-id="633af-113">Création de catégories et de compteurs de performances</span><span class="sxs-lookup"><span data-stu-id="633af-113">Create performance category and counters</span></span>
<span data-ttu-id="633af-114">les compteurs de hello toocreate, appelez la méthode de CreatePeformanceCategoryAndCounters de hello Hello [ShardMapManagmentFactory classe](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.aspx).</span><span class="sxs-lookup"><span data-stu-id="633af-114">toocreate hello counters, call hello CreatePeformanceCategoryAndCounters method of hello [ShardMapManagmentFactory class](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.aspx).</span></span> <span data-ttu-id="633af-115">Seul un administrateur peut exécuter la méthode hello :</span><span class="sxs-lookup"><span data-stu-id="633af-115">Only an administrator can execute hello method:</span></span> 

    ShardMapManagerFactory.CreatePerformanceCategoryAndCounters()  

<span data-ttu-id="633af-116">Vous pouvez également utiliser [cela](https://gallery.technet.microsoft.com/scriptcenter/Elastic-DB-Tools-for-Azure-17e3d283) méthode hello de PowerShell script tooexecute.</span><span class="sxs-lookup"><span data-stu-id="633af-116">You can also use [this](https://gallery.technet.microsoft.com/scriptcenter/Elastic-DB-Tools-for-Azure-17e3d283) PowerShell script tooexecute hello method.</span></span> <span data-ttu-id="633af-117">méthode Hello crée hello suivant des compteurs de performances :</span><span class="sxs-lookup"><span data-stu-id="633af-117">hello method creates hello following performance counters:</span></span>  

* <span data-ttu-id="633af-118">**Mise en cache des mappages**: nombre de mappages mis en cache pour la carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-118">**Cached mappings**: Number of mappings cached for hello shard map.</span></span>
* <span data-ttu-id="633af-119">**DDR opérations/s**: taux d’opérations routage dépendant des données pour la carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-119">**DDR operations/sec**: Rate of data dependent routing operations for hello shard map.</span></span> <span data-ttu-id="633af-120">Ce compteur est mis à jour lorsqu’un appel trop[OpenConnectionForKey()](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx) entraîne une partition de destination toohello connexion réussie.</span><span class="sxs-lookup"><span data-stu-id="633af-120">This counter is  updated when a call too[OpenConnectionForKey()](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx) results in a successful connection toohello destination shard.</span></span> 
* <span data-ttu-id="633af-121">**Mappage des présences dans le cache de recherche/s**: taux d’opérations de recherche du cache réussi pour les mappages dans la carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-121">**Mapping lookup cache hits/sec**: Rate of successful cache lookup operations for mappings in hello shard map.</span></span> 
* <span data-ttu-id="633af-122">**Mappage des absences dans le cache de recherche/s**: taux d’opérations de recherche de cache ayant échoué pour les mappages dans la carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-122">**Mapping lookup cache misses/sec**: Rate of failed cache lookup operations for mappings in hello shard map.</span></span>
* <span data-ttu-id="633af-123">**Mappages ajoutés ou mis à jour dans le cache/s**: taux lesquelles mappages sont ajoutés ou mis à jour de cache pour la carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-123">**Mappings added or updated in cache/sec**: Rate at which mappings are being added or updated in cache for hello shard map.</span></span> 
* <span data-ttu-id="633af-124">**Les mappages supprimés du cache/s**: vitesse à laquelle les mappages sont supprimés du cache pour la carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-124">**Mappings removed from cache/sec**: Rate at which mappings are being removed from cache for hello shard map.</span></span> 

<span data-ttu-id="633af-125">Les compteurs de performances sont créés pour chaque carte de partitions mises en cache par processus.</span><span class="sxs-lookup"><span data-stu-id="633af-125">Performance counters are created for each cached shard map per process.</span></span>  

## <a name="notes"></a><span data-ttu-id="633af-126">Remarques</span><span class="sxs-lookup"><span data-stu-id="633af-126">Notes</span></span>
<span data-ttu-id="633af-127">Hello événements suivants déclenchent la création de hello hello des compteurs de performances :</span><span class="sxs-lookup"><span data-stu-id="633af-127">hello following events trigger hello creation of hello performance counters:</span></span>  

* <span data-ttu-id="633af-128">L’initialisation de hello [ShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx) avec [chargement hâtif](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerloadpolicy.aspx), si hello ShardMapManager contient toutes les cartes de partitions.</span><span class="sxs-lookup"><span data-stu-id="633af-128">Initialization of hello [ShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx) with [eager loading](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerloadpolicy.aspx), if hello ShardMapManager contains any shard maps.</span></span> <span data-ttu-id="633af-129">Ceux-ci incluent hello [GetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx?f=255&MSPPError=-2147217396#M:Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerFactory.GetSqlShardMapManager%28System.String,Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerLoadPolicy%29) et hello [TryGetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.trygetsqlshardmapmanager.aspx) méthodes.</span><span class="sxs-lookup"><span data-stu-id="633af-129">These include hello [GetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx?f=255&MSPPError=-2147217396#M:Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerFactory.GetSqlShardMapManager%28System.String,Microsoft.Azure.SqlDatabase.ElasticScale.ShardManagement.ShardMapManagerLoadPolicy%29) and hello [TryGetSqlShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.trygetsqlshardmapmanager.aspx) methods.</span></span>
* <span data-ttu-id="633af-130">Recherche réussie d’une carte de partitions (à l’aide de [GetShardMap()](https://msdn.microsoft.com/library/azure/dn824215.aspx), [GetListShardMap()](https://msdn.microsoft.com/library/azure/dn824212.aspx) ou [GetRangeShardMap()](https://msdn.microsoft.com/library/azure/dn824173.aspx)).</span><span class="sxs-lookup"><span data-stu-id="633af-130">Successful lookup of a shard map (using [GetShardMap()](https://msdn.microsoft.com/library/azure/dn824215.aspx), [GetListShardMap()](https://msdn.microsoft.com/library/azure/dn824212.aspx) or [GetRangeShardMap()](https://msdn.microsoft.com/library/azure/dn824173.aspx)).</span></span> 
* <span data-ttu-id="633af-131">Création réussie de la carte de partitions à l’aide de CreateShardMap().</span><span class="sxs-lookup"><span data-stu-id="633af-131">Successful creation of shard map using CreateShardMap().</span></span>

<span data-ttu-id="633af-132">les compteurs de performance Hello mettra à jour toutes les opérations de cache effectuées sur les mappages et de carte de partitions hello.</span><span class="sxs-lookup"><span data-stu-id="633af-132">hello performance counters will be updated by all cache operations performed on hello shard map and mappings.</span></span> <span data-ttu-id="633af-133">Suppression réussie de la carte de partitions hello à l’aide de DeleteShardMap () reults à la suppression de l’instance des compteurs de performance hello.</span><span class="sxs-lookup"><span data-stu-id="633af-133">Successful removal of hello shard map using DeleteShardMap()reults in deletion of hello performance counters instance.</span></span>  

## <a name="best-practices"></a><span data-ttu-id="633af-134">Meilleures pratiques</span><span class="sxs-lookup"><span data-stu-id="633af-134">Best practices</span></span>
* <span data-ttu-id="633af-135">La création de compteurs et de la catégorie de performance hello doit être effectuée qu’une seule fois avant la création de hello de ShardMapManager objet.</span><span class="sxs-lookup"><span data-stu-id="633af-135">Creation of hello performance category and counters should be performed only once before hello creation of ShardMapManager object.</span></span> <span data-ttu-id="633af-136">Chaque exécution de la commande hello CreatePerformanceCategoryAndCounters() efface les compteurs précédents hello (perte de données signalées par toutes les instances) et crée de nouvelles.</span><span class="sxs-lookup"><span data-stu-id="633af-136">Every execution of hello command CreatePerformanceCategoryAndCounters() clears hello previous counters (losing data reported by all instances) and creates new ones.</span></span>  
* <span data-ttu-id="633af-137">Des instances de compteurs de performances sont créées pour chaque processus.</span><span class="sxs-lookup"><span data-stu-id="633af-137">Performance counter instances are created per process.</span></span> <span data-ttu-id="633af-138">Tout blocage d’application ou la suppression d’une carte de partitions à partir du cache de hello entraîne la suppression des instances de compteurs de performances hello.</span><span class="sxs-lookup"><span data-stu-id="633af-138">Any application crash or removal of a shard map from hello cache will result in deletion of hello performance counters instances.</span></span>  

### <a name="see-also"></a><span data-ttu-id="633af-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="633af-139">See also</span></span>
[<span data-ttu-id="633af-140">Vue d’ensemble des fonctionnalités de base de données élastique</span><span class="sxs-lookup"><span data-stu-id="633af-140">Elastic Database features overview</span></span>](sql-database-elastic-scale-introduction.md)  

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->

