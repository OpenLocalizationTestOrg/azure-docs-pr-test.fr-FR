---
title: "vue d’ensemble de requête élastique de base de données SQL aaaAzure | Documents Microsoft"
description: "Vue d’ensemble de la fonctionnalité de requête élastique hello"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="3da72-103">Vue d’ensemble de la requête élastique Azure SQL Database (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="3da72-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="3da72-104">fonctionnalité de requête élastique Hello (en version préliminaire) vous permet de toorun une requête Transact-SQL qui s’étend sur plusieurs bases de données dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="3da72-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="3da72-105">Il vous permet de requêtes de bases de données croisées tooperform tooaccess des tables distantes et tooquery d’Outils (Excel, Power BI, Tableau, etc.) de Microsoft et tiers tooconnect entre les couches de données avec plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="3da72-106">À l’aide de cette fonctionnalité, vous pouvez mettre à l’échelle des niveaux de données toolarge de requêtes dans la base de données SQL et visualiser les résultats de hello dans les rapports de business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="3da72-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="3da72-107">Pourquoi utiliser les requêtes élastiques ?</span><span class="sxs-lookup"><span data-stu-id="3da72-107">Why use elastic queries?</span></span>

<span data-ttu-id="3da72-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="3da72-108">**Azure SQL Database**</span></span>

<span data-ttu-id="3da72-109">Interrogez plusieurs bases de données SQL Azure entièrement dans T-SQL.</span><span class="sxs-lookup"><span data-stu-id="3da72-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="3da72-110">Il est ainsi possible d’interroger en lecture seule des bases de données distantes.</span><span class="sxs-lookup"><span data-stu-id="3da72-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="3da72-111">Cela permet une locale à l’aide des noms de trois et quatre parties ou de serveur lié tooSQL DB les applications toomigrate clients SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3da72-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="3da72-112">**Disponible au niveau standard**</span><span class="sxs-lookup"><span data-stu-id="3da72-112">**Available on standard tier**</span></span>

<span data-ttu-id="3da72-113">Requête élastique est pris en charge sur le niveau de performances Standard hello dans le niveau de performances plus toohello Premium.</span><span class="sxs-lookup"><span data-stu-id="3da72-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="3da72-114">Consultez les section hello sur les limites d’aperçu ci-dessous sur les limitations de performances pour les niveaux de performances inférieurs.</span><span class="sxs-lookup"><span data-stu-id="3da72-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="3da72-115">**Bases de données push tooremote**</span><span class="sxs-lookup"><span data-stu-id="3da72-115">**Push tooremote databases**</span></span>

<span data-ttu-id="3da72-116">Requêtes élastiques peuvent désormais distribuer les paramètres toohello distants bases de données SQL pour l’exécution.</span><span class="sxs-lookup"><span data-stu-id="3da72-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="3da72-117">**Exécution d’une procédure stockée**</span><span class="sxs-lookup"><span data-stu-id="3da72-117">**Stored procedure execution**</span></span>

<span data-ttu-id="3da72-118">Exécutez des appels de procédures stockées ou de fonctions distantes avec [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="3da72-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="3da72-119">**Flexibilité**</span><span class="sxs-lookup"><span data-stu-id="3da72-119">**Flexibility**</span></span>

<span data-ttu-id="3da72-120">Tables externes dont la requête élastique peuvent maintenant faire référence à des tables de tooremote avec un schéma différent ou le nom de la table.</span><span class="sxs-lookup"><span data-stu-id="3da72-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="3da72-121">Scénarios de requête élastique</span><span class="sxs-lookup"><span data-stu-id="3da72-121">Elastic query scenarios</span></span>

<span data-ttu-id="3da72-122">Hello vise toofacilitate interrogation des scénarios où plusieurs bases de données contribuent les lignes en un seul résultat global.</span><span class="sxs-lookup"><span data-stu-id="3da72-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="3da72-123">requête de Hello peut soit être composée en hello utilisateur ou l’application directement ou indirectement via des outils qui sont connectés toohello de base de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="3da72-124">Ceci est particulièrement utile lors de la création de rapports, à l’aide des outils commerciaux d’intégration BI ou de données, ou toute application qui ne peut pas être modifiée.</span><span class="sxs-lookup"><span data-stu-id="3da72-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="3da72-125">Une requête élastique, vous pouvez interroger sur plusieurs bases de données à l’aide d’expérience de connectivité de SQL Server familière hello dans des outils tels que Excel, Power BI, Tableau ou Cognos.</span><span class="sxs-lookup"><span data-stu-id="3da72-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="3da72-126">Une requête élastique permet un accès facile tooan ensemble de la collection de bases de données via des requêtes émises par SQL Server Management Studio ou Visual Studio et facilite l’interrogation des bases de données croisées d’Entity Framework ou d’autres environnements ORM.</span><span class="sxs-lookup"><span data-stu-id="3da72-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="3da72-127">La figure 1 illustre un scénario où un existant cloud des applications (qui utilise hello [bibliothèque cliente de base de données élastique](sql-database-elastic-database-client-library.md)) s’appuie sur une montée en charge de données de couche, et une requête élastique est utilisée pour les rapports des bases de données croisées.</span><span class="sxs-lookup"><span data-stu-id="3da72-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="3da72-128">**Figure 1** Requête élastique utilisée sur la couche de données mise à l’échelle</span><span class="sxs-lookup"><span data-stu-id="3da72-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Requête élastique utilisée sur la couche de données mise à l’échelle][1]

<span data-ttu-id="3da72-130">Scénarios de client pour une requête élastique sont caractérisent par hello suivant topologies :</span><span class="sxs-lookup"><span data-stu-id="3da72-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="3da72-131">**Le partitionnement vertical - requêtes de bases de données croisées** (topologie 1) : les données de salutation sont partitionnées verticalement entre plusieurs bases de données dans une couche de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="3da72-132">En règle générale, les différents ensembles de tables résident sur des bases de données différentes.</span><span class="sxs-lookup"><span data-stu-id="3da72-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="3da72-133">Cela signifie que ce schéma hello est différent sur les différentes bases de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="3da72-134">Par exemple, toutes les tables d’inventaire se trouvent sur une base de données alors que toutes les tables liées à la comptabilité se trouvent dans une seconde base de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="3da72-135">Cas d’utilisation courants avec cette topologie nécessitent un tooquery entre ou rapports toocompile dans des tables dans plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="3da72-136">**Partitionnement horizontal - partitionnement** (topologie 2) : les données sont partitionnées horizontalement les lignes toodistribute entre une montée en puissance parallèle de données de niveau.</span><span class="sxs-lookup"><span data-stu-id="3da72-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="3da72-137">Avec cette approche, le schéma de hello est identique sur toutes les bases de données participantes.</span><span class="sxs-lookup"><span data-stu-id="3da72-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="3da72-138">Cette approche est également appelée « partitionnement ».</span><span class="sxs-lookup"><span data-stu-id="3da72-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="3da72-139">Partitionnement peut être effectué et gérés à l’aide des bibliothèques d’outils de base de données élastique hello (1) ou (2) partitionnement automatique.</span><span class="sxs-lookup"><span data-stu-id="3da72-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="3da72-140">Une requête élastique est utilisé des rapports tooquery ou de la compilation sur plusieurs partitions.</span><span class="sxs-lookup"><span data-stu-id="3da72-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="3da72-141">Requête élastique fonctionne mieux pour les scénarios de création de rapports occasionnelles où la plupart du traitement de hello peut être effectuée sur la couche de données hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="3da72-142">Pour les charges de travail de création de rapports intensive ou les scénarios d’entreposage de données avec des requêtes plus complexes, pensez à utiliser [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="3da72-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="3da72-143">Le partitionnement vertical - requêtes de bases de données croisées</span><span class="sxs-lookup"><span data-stu-id="3da72-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="3da72-144">toobegin de codage, consultez [mise en route de la requête de bases de données croisées (partitionnement vertical)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="3da72-145">Une requête élastique peut être des données de toomake utilisé situées dans la base de données disponible tooother SQL bases de données SQL.</span><span class="sxs-lookup"><span data-stu-id="3da72-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="3da72-146">Cela permet des requêtes à partir d’un tootables toorefer de base de données dans n’importe quel autre SQL base de données distante.</span><span class="sxs-lookup"><span data-stu-id="3da72-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="3da72-147">première étape de Hello est toodefine une source de données externe pour chaque base de données distante.</span><span class="sxs-lookup"><span data-stu-id="3da72-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="3da72-148">source de données externe Hello est défini dans la base de données locale hello à partir de laquelle vous souhaitez tootables d’accès toogain situé sur la base de données distante hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="3da72-149">Aucune modification n’est nécessaire sur la base de données distante hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="3da72-150">Pour verticales partitionnement scénarios classiques où les bases de données différentes ont des schémas différents, élastiques vous pouvez tooimplement utilisé cas d’utilisation courants tels que d’accéder à des données tooreference et interrogation des bases de données croisées.</span><span class="sxs-lookup"><span data-stu-id="3da72-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3da72-151">Vous devez posséder l’autorisation ALTER ANY EXTERNAL DATA SOURCE.</span><span class="sxs-lookup"><span data-stu-id="3da72-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="3da72-152">Cette autorisation est incluse avec l’autorisation ALTER DATABASE hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="3da72-153">Les autorisations ALTER ANY EXTERNAL DATA SOURCE sont toohello nécessaires toorefer source de données sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="3da72-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="3da72-154">**Données de référence**: topologie de hello est utilisé pour la gestion des données de référence.</span><span class="sxs-lookup"><span data-stu-id="3da72-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="3da72-155">Dans la figure hello ci-dessous, deux tables (T1 et T2) avec les données de référence sont conservées sur une base de données dédié.</span><span class="sxs-lookup"><span data-stu-id="3da72-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="3da72-156">À l’aide d’une requête élastique, vous pouvez désormais accéder aux tables T1 et T2 à distance à partir d’autres bases de données, comme indiqué dans la figure hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="3da72-157">Utilisez Topologie 1 si les tables de référence sont des requêtes de petite taille ou distantes se trouvant dans la table de référence et ayant des prédicats sélectifs.</span><span class="sxs-lookup"><span data-stu-id="3da72-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="3da72-158">**Figure 2** partitionnement Vertical - l’à l’aide de données de référence de requête élastique tooquery</span><span class="sxs-lookup"><span data-stu-id="3da72-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Partitionnement vertical - l’à l’aide de données de référence de requête élastique tooquery][3]

<span data-ttu-id="3da72-160">**Interrogation des bases de données croisées**: les requêtes élastiques permettent d’utiliser des cas nécessitant l’interrogation de plusieurs bases de données SQL.</span><span class="sxs-lookup"><span data-stu-id="3da72-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="3da72-161">La figure 3 représente quatre bases de données différentes : Gestion de la relation client (CRM), Inventaire, Ressources humaines (RH) et Produits.</span><span class="sxs-lookup"><span data-stu-id="3da72-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="3da72-162">Les requêtes effectuées dans une des bases de données hello également besoin d’accès tooone ou tous les hello autres bases de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="3da72-163">À l’aide d’une requête élastique, vous pouvez configurer votre base de données pour ce cas en exécutant des instructions DDL simples quelques sur chacun des quatre bases de données hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="3da72-164">Après cette configuration à usage unique, table distante de l’accès tooa est aussi simple que vous faites référence tooa des tables locales à partir de vos requêtes T-SQL ou de vos outils BI.</span><span class="sxs-lookup"><span data-stu-id="3da72-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="3da72-165">Cette approche est recommandée si les requêtes distantes hello ne retournent pas de résultats volumineux.</span><span class="sxs-lookup"><span data-stu-id="3da72-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="3da72-166">**Figure 3** partitionnement Vertical - l’à l’aide de la requête élastique tooquery entre les différentes bases de données</span><span class="sxs-lookup"><span data-stu-id="3da72-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Partitionnement vertical - l’à l’aide de la requête élastique tooquery entre les différentes bases de données][4]

<span data-ttu-id="3da72-168">requêtes de base de données élastique pour des scénarios de partitionnement verticales qui requièrent la table de tooa access situés sur des bases de données SQL à distance avec hello même configurer Hello suit schéma :</span><span class="sxs-lookup"><span data-stu-id="3da72-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="3da72-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="3da72-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="3da72-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="3da72-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="3da72-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource de **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="3da72-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="3da72-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="3da72-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="3da72-173">Après l’exécution des instructions DDL de hello, vous pouvez accéder table distante de hello « mytable » comme s’il s’agissait d’une table locale.</span><span class="sxs-lookup"><span data-stu-id="3da72-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="3da72-174">Base de données SQL Azure ouvre automatiquement une base de données du toohello de connexion à distance, traite votre demande sur la base de données distante hello et retourne des résultats hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="3da72-175">Partitionnement horizontal - partitionnement</span><span class="sxs-lookup"><span data-stu-id="3da72-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="3da72-176">Requiert de couche données à l’aide de tooperform requête élastique confondues tâches partitionnée, c'est-à-dire horizontalement partitionnée, un [carte de partitions de base de données élastique](sql-database-elastic-scale-shard-map-management.md) bases de données toorepresent hello de couche de données hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="3da72-177">En règle générale, uniquement un mappage de partition unique est utilisé dans ce scénario, et une base de données dédié avec des fonctions de requête élastique (nœud principal) sert de point d’entrée hello pour les requêtes de rapport.</span><span class="sxs-lookup"><span data-stu-id="3da72-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="3da72-178">Cette base de données dédiée uniquement doit carte de partitions toohello accès.</span><span class="sxs-lookup"><span data-stu-id="3da72-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="3da72-179">La figure 4 illustre cette topologie et sa configuration avec la carte de base de données et les partitions de la requête élastique hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="3da72-180">bases de données Hello dans la couche de données hello peuvent être de toute base de données SQL Azure version ou édition.</span><span class="sxs-lookup"><span data-stu-id="3da72-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="3da72-181">Pour plus d’informations sur la bibliothèque cliente de base de données élastique hello et en créant des cartes de partitions, consultez [gestion de carte de partitions](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="3da72-182">**Figure 4** partitionnement horizontal : utilisation d’une requête élastique pour les rapports sur les couches de données partitionnées</span><span class="sxs-lookup"><span data-stu-id="3da72-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![partitionnement horizontal : utilisation d’une requête élastique pour les rapports sur les couches de données partitionnées][5]

> [!NOTE]
> <span data-ttu-id="3da72-184">Requête base de données élastique (nœud principal) peut être la base de données distincte, ou il peut être hello même cette carte de partitions hello hôtes de la base de données.</span><span class="sxs-lookup"><span data-stu-id="3da72-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="3da72-185">Configuration que vous choisissez, assurez-vous que ce niveau de service et les performances de cette base de données est suffisamment élevée toohandle hello attendu/demandes de connexion.</span><span class="sxs-lookup"><span data-stu-id="3da72-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="3da72-186">Hello suit configure des requêtes de base de données élastique pour horizontales partitionnement des scénarios qui requièrent l’ensemble de tooa d’accès de la table qui sont trouvent sur (généralement) plusieurs SQL bases de données distantes :</span><span class="sxs-lookup"><span data-stu-id="3da72-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="3da72-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="3da72-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="3da72-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="3da72-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="3da72-189">Créer un [carte de partitions](sql-database-elastic-scale-shard-map-management.md) représentant votre couche de données à l’aide de la bibliothèque cliente de base de données élastique hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="3da72-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource de type **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="3da72-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="3da72-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="3da72-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="3da72-192">Une fois que vous avez effectué ces étapes, vous pouvez accéder à table partitionnée horizontalement de hello « mytable » comme s’il s’agissait d’une table locale.</span><span class="sxs-lookup"><span data-stu-id="3da72-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="3da72-193">Base de données SQL Azure automatiquement ouvre plusieurs connexions parallèles toohello bases de données où les tables de hello sont stockées physiquement, traite les demandes de hello sur les bases de données distantes hello et retourne les résultats de hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="3da72-194">Plus d’informations sur les étapes de hello requis pour le scénario de partitionnement horizontal hello se trouvent dans [élastique requête pour le partitionnement horizontal](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="3da72-195">toobegin de codage, consultez [mise en route de la requête élastique pour le partitionnement horizontal (partitionnement)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="3da72-196">Requêtes T-SQL</span><span class="sxs-lookup"><span data-stu-id="3da72-196">T-SQL querying</span></span>
<span data-ttu-id="3da72-197">Une fois que vous avez défini vos sources de données externes et des tables externes, vous pouvez utiliser SQL Server connexion chaînes tooconnect toohello bases de données normales où vous avez défini vos tables externes.</span><span class="sxs-lookup"><span data-stu-id="3da72-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="3da72-198">Vous pouvez ensuite exécuter des instructions T-SQL sur des tables externes sur cette connexion avec les limitations de hello décrites ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="3da72-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="3da72-199">Vous trouverez plus d’informations et des exemples de requêtes T-SQL dans les rubriques de la documentation hello pour [partitionnement horizontal](sql-database-elastic-query-horizontal-partitioning.md) et [le partitionnement vertical](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="3da72-200">Connectivité des outils</span><span class="sxs-lookup"><span data-stu-id="3da72-200">Connectivity for tools</span></span>
<span data-ttu-id="3da72-201">Vous pouvez utiliser tooconnect de chaînes de connexion SQL Server standard pour vos applications et BI ou données toodatabases outils intégration qui ont des tables externes.</span><span class="sxs-lookup"><span data-stu-id="3da72-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="3da72-202">Assurez-vous que SQL Server est pris en charge comme source de données pour votre outil.</span><span class="sxs-lookup"><span data-stu-id="3da72-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="3da72-203">Une fois connecté, consultez toohello requête élastique de base de données et hello tables externes dans cette base de données comme vous le feriez avec toute autre base de données SQL Server que vous vous connectez à toowith votre outil.</span><span class="sxs-lookup"><span data-stu-id="3da72-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3da72-204">L’authentification à l’aide d’Azure Active Directory avec des requêtes élastiques n’est pas prise en charge actuellement.</span><span class="sxs-lookup"><span data-stu-id="3da72-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="3da72-205">Coût</span><span class="sxs-lookup"><span data-stu-id="3da72-205">Cost</span></span>
<span data-ttu-id="3da72-206">Requête élastique est inclus dans le coût de hello des bases de données de base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="3da72-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="3da72-207">Notez que les topologies où se trouvent vos bases de données à distance dans un autre centre de données que hello du point de terminaison de requête élastique sont pris en charge, mais la sortie de données à partir de bases de données distantes sont facturés regular [taux Azure](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="3da72-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="3da72-208">Limitations de la version préliminaire</span><span class="sxs-lookup"><span data-stu-id="3da72-208">Preview limitations</span></span>
* <span data-ttu-id="3da72-209">Votre première requête élastique en cours d’exécution peuvent occuper tooa quelques minutes sur le niveau de performances Standard hello.</span><span class="sxs-lookup"><span data-stu-id="3da72-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="3da72-210">Ce temps est une fonctionnalité de requête élastique de hello tooload nécessaires ; améliore les performances de chargement avec les niveaux de performance supérieurs.</span><span class="sxs-lookup"><span data-stu-id="3da72-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="3da72-211">La rédaction de script de sources de données externes ou de tables externes à partir de SSMS ou SSDT n’est pas encore prise en charge.</span><span class="sxs-lookup"><span data-stu-id="3da72-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="3da72-212">L’importation/exportation de base de données de SQL ne prend pas en charge les tables et sources de données externes.</span><span class="sxs-lookup"><span data-stu-id="3da72-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="3da72-213">Si vous devez toouse Import/Export, supprimer ces objets avant l’exportation et puis de les recréer après l’importation.</span><span class="sxs-lookup"><span data-stu-id="3da72-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="3da72-214">Requête élastique prend actuellement en charge uniquement les tables de tooexternal d’accès en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="3da72-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="3da72-215">Vous pouvez toutefois utiliser toutes les fonctionnalités T-SQL sur la base de données hello où une table externe hello est définie.</span><span class="sxs-lookup"><span data-stu-id="3da72-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="3da72-216">Cela peut être utile pour, par exemple, conserver les résultats temporaires, par exemple, sélectionnez < column_list > dans < local_table > ou toodefine des procédures stockées sur hello requête élastique de base de données qui font référence à des tables de tooexternal.</span><span class="sxs-lookup"><span data-stu-id="3da72-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="3da72-217">À l’exception de nvarchar (max), les types métier ne sont pas pris en charge dans les définitions de table externes.</span><span class="sxs-lookup"><span data-stu-id="3da72-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="3da72-218">Comme solution de contournement, vous pouvez créer une vue sur hello à distance de base de données qui effectue un cast de type LOB de hello en nvarchar (max), définissez votre table externe sur vue hello au lieu de la table de base hello et puis effectuer un cast vers le type LOB d’origine de hello dans vos requêtes.</span><span class="sxs-lookup"><span data-stu-id="3da72-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="3da72-219">Les statistiques des colonnes via les tables externes ne sont pas prises en charge actuellement.</span><span class="sxs-lookup"><span data-stu-id="3da72-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="3da72-220">Statistiques des tables sont prises en charge, mais doivent toobe créée manuellement.</span><span class="sxs-lookup"><span data-stu-id="3da72-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="3da72-221">Commentaires</span><span class="sxs-lookup"><span data-stu-id="3da72-221">Feedback</span></span>
<span data-ttu-id="3da72-222">Veuillez partager des commentaires sur votre expérience avec les requêtes élastiques avec nous sur Disqus ci-dessous, les forums MSDN hello, ou sur Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="3da72-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="3da72-223">Nous sommes intéressés par tous les types de commentaires sur service hello (erreurs, les bords, les écarts de fonctionnalité).</span><span class="sxs-lookup"><span data-stu-id="3da72-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="3da72-224">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3da72-224">Next steps</span></span>

* <span data-ttu-id="3da72-225">Pour le didacticiel sur le partitionnement vertical, consultez [Prise en main des requêtes de bases de données croisées (partitionnement vertical)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="3da72-226">Pour la syntaxe et des exemples de requêtes pour des données partitionnées verticalement, consultez [Requêtes sur des données partitionnées verticalement](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="3da72-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="3da72-227">Pour commencer le didacticiel sur le partitionnement horizontal (sharding), consultez [Prise en main des requêtes élastiques pour le partitionnement horizontal (sharding)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="3da72-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="3da72-228">Pour la syntaxe et des exemples de requêtes pour des données partitionnées horizontalement, consultez [Requêtes sur des données partitionnées horizontalement](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="3da72-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="3da72-229">Consultez [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) pour une procédure stockée qui exécute une instruction Transact-SQL sur une seule base de données Azure SQL distante ou un ensemble de bases de données servant de partitions dans un schéma de partitionnement horizontal.</span><span class="sxs-lookup"><span data-stu-id="3da72-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
