---
title: "SQL Database - Réglage automatique | Microsoft Docs"
description: "SQL Database analyse la requête SQL et s’adapte automatiquement aux charges de travail utilisateur."
services: sql-database
documentationcenter: 
author: jovanpop-msft
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/05/2017
ms.author: jovanpop
ms.openlocfilehash: f5552793db2d89542782b7d9e8f996314f62e429
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="automatic-tuning"></a><span data-ttu-id="482cf-103">Réglage automatique</span><span class="sxs-lookup"><span data-stu-id="482cf-103">Automatic tuning</span></span>

<span data-ttu-id="482cf-104">Azure SQL Database est un service de données entièrement géré qui surveille les requêtes qui sont exécutées sur la base de données et qui peut automatiquement améliorer les performances de la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-104">Azure SQL Database is a fully managed data service that monitors the queries that are executed on the database and can automatically improve performance of the workload.</span></span> <span data-ttu-id="482cf-105">Azure SQL Database dispose d’un mécanisme d’intelligence intégré qui peut automatiquement régler et améliorer les performances de vos requêtes en adaptant de manière dynamique la base de données à votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-105">Azure SQL Database has a built-in intelligence mechanism that can automatically tune and improve performance of your queries by dynamically adapting the database to your workload.</span></span> <span data-ttu-id="482cf-106">Le réglage automatique dans Azure SQL Database est peut-être l’une des fonctionnalités les plus importantes que vous pouvez activer dans Azure SQL Database en vue d’optimiser les performances de vos requêtes.</span><span class="sxs-lookup"><span data-stu-id="482cf-106">Automatic tuning in Azure SQL Database might be one of the most important features that you can enable on Azure SQL Database to optimize performance of your queries.</span></span>

<span data-ttu-id="482cf-107">Consultez cet article pour découvrir comment [activer le réglage automatique](sql-database-automatic-tuning-enable.md) via le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="482cf-107">See this article for the steps to [enable automatic tuning](sql-database-automatic-tuning-enable.md) using the Azure portal.</span></span>

## <a name="why-automatic-tuning"></a><span data-ttu-id="482cf-108">À quoi sert le réglage automatique ?</span><span class="sxs-lookup"><span data-stu-id="482cf-108">Why automatic tuning?</span></span>

<span data-ttu-id="482cf-109">L’une des principales tâches d’administration classique d’une base de données consiste à surveiller la charge de travail, à identifier les requêtes SQL critiques, les index qui doivent être ajoutés pour améliorer les performances et les index rarement utilisés.</span><span class="sxs-lookup"><span data-stu-id="482cf-109">One of the main tasks in classic database administration is monitoring the workload, identifying critical SQL queries, indexes that should be added to improve performance, and rarely used indexes.</span></span> <span data-ttu-id="482cf-110">Azure SQL Database fournit des informations détaillées sur les requêtes et les index que vous devez surveiller.</span><span class="sxs-lookup"><span data-stu-id="482cf-110">Azure SQL Database provides detailed insight into the queries and indexes that you need to monitor.</span></span> <span data-ttu-id="482cf-111">Toutefois, la surveillance permanente de la base de données est une tâche difficile et fastidieuse, en particulier lors du traitement de plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="482cf-111">However, constantly monitoring database is a hard and tedious task, especially when dealing with many databases.</span></span> <span data-ttu-id="482cf-112">La gestion efficace d’un très grand nombre de bases de données peut s’avérer impossible même avec tous les rapports et outils disponibles avec Azure SQL Database et le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="482cf-112">Managing a huge number of databases might be impossible to do efficiently even with all available tools and reports that Azure SQL Database and Azure portal provide.</span></span> <span data-ttu-id="482cf-113">Au lieu de surveiller et de régler votre base de données manuellement, vous pouvez envisager de déléguer certaines actions de surveillance et de réglage à Azure SQL Database grâce à la fonctionnalité de réglage automatique.</span><span class="sxs-lookup"><span data-stu-id="482cf-113">Instead of monitoring and tuning your database manually, you might consider delegating some of the monitoring and tuning actions to Azure SQL Database using automatic tuning feature.</span></span> 


> [!VIDEO https://channel9.msdn.com/Blogs/Azure-in-the-Enterprise/Enabling-Azure-SQL-Database-Auto-Tuning-at-Scale-for-Microsoft-IT/player]
>

## <a name="how-does-automatic-tuning-work"></a><span data-ttu-id="482cf-114">Comment fonctionne le réglage automatique ?</span><span class="sxs-lookup"><span data-stu-id="482cf-114">How does automatic tuning work?</span></span>

<span data-ttu-id="482cf-115">Azure SQL Database intègre un processus de surveillance et d’analyse des performances en continu, qui en apprend sans cesse davantage sur les caractéristiques de votre charge de travail et identifie des problèmes et améliorations potentiels.</span><span class="sxs-lookup"><span data-stu-id="482cf-115">Azure SQL Database has a continuous performance monitoring and analysis process that constantly learns about the characteristic of your workload and identify potential issues and improvements.</span></span>

![Processus de réglage automatique](./media/sql-database-automatic-tuning/tuning-process.png)

<span data-ttu-id="482cf-117">Ce processus permet à Azure SQL Database de s’adapter de manière dynamique à votre charge de travail en recherchant les plans et les index qui peuvent améliorer les performances de vos charges de travail et les index qui affectent vos charges de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-117">This process enables Azure SQL Database to dynamically adapt to your workload by finding what indexes and plans might improve performance of your workloads and what indexes affect your workloads.</span></span> <span data-ttu-id="482cf-118">En fonction de ces résultats, le réglage automatique effectue des actions de réglage qui améliorent les performances de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-118">Based on these findings, automatic tuning applies tuning actions that improve performance of your workload.</span></span> <span data-ttu-id="482cf-119">En outre, Azure SQL Database surveille en permanence les performances après toute modification apportée par le réglage automatique, pour s’assurer qu’elle améliore les performances de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-119">In addition, Azure SQL Database continuously monitors performance after any change made by automatic tuning to ensure that it improves performance of your workload.</span></span> <span data-ttu-id="482cf-120">Toute action qui n’a pas amélioré les performances est automatiquement annulée.</span><span class="sxs-lookup"><span data-stu-id="482cf-120">Any action that didn’t improve performance is automatically reverted.</span></span> <span data-ttu-id="482cf-121">Ce processus de vérification est une fonctionnalité clé qui permet de s’assurer que les modifications apportées par le réglage automatique ne diminuent pas les performances de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-121">This verification process is a key feature that ensures that any change made by automatic tuning does not decrease the performance of your workload.</span></span>

<span data-ttu-id="482cf-122">Deux aspects de réglage automatique sont disponibles dans Azure SQL Database :</span><span class="sxs-lookup"><span data-stu-id="482cf-122">There are two automatic tuning aspects that are available in Azure SQL Database:</span></span>

 -  <span data-ttu-id="482cf-123">La **gestion automatique des index**, qui identifie les index qui doivent être ajoutés à votre base de données et ceux qui doivent être supprimés.</span><span class="sxs-lookup"><span data-stu-id="482cf-123">**Automatic index management** that identifies indexes that should be added in your database, and indexes that should be removed.</span></span>
 -  <span data-ttu-id="482cf-124">La **correction du plan automatique** (déployée prochainement, déjà disponible dans SQL Server 2017), qui identifie les plans problématiques et résout les problèmes de performances du plan SQL.</span><span class="sxs-lookup"><span data-stu-id="482cf-124">**Automatic plan correction** (coming soon, already available in SQL Server 2017) that identifies problematic plans and fixes SQL plan performance problems.</span></span>

## <a name="automatic-index-management"></a><span data-ttu-id="482cf-125">Gestion automatique des index</span><span class="sxs-lookup"><span data-stu-id="482cf-125">Automatic index management</span></span>

<span data-ttu-id="482cf-126">Dans Azure SQL Database, la gestion des index est facile, car Azure SQL Database s’informe sur votre charge de travail et s’assure que vos données sont toujours indexées de manière optimale.</span><span class="sxs-lookup"><span data-stu-id="482cf-126">In Azure SQL Database, index management is easy because Azure SQL Database learns about your workload and ensures that your data is always optimally indexed.</span></span> <span data-ttu-id="482cf-127">Pour assurer des performances optimales de votre charge de travail, l’index doit être correctement conçu. La gestion automatique des index peut vous aider à les optimiser.</span><span class="sxs-lookup"><span data-stu-id="482cf-127">Proper index design is crucial for optimal performance of your workload, and automatic index management can help you optimize your indexes.</span></span> <span data-ttu-id="482cf-128">La gestion automatique des index permet de résoudre les problèmes de performances dans les bases de données indexées de manière incorrecte, ou de conserver et d’améliorer les index dans la structure de base de données existante.</span><span class="sxs-lookup"><span data-stu-id="482cf-128">Automatic index management can either fix performance issues in incorrectly indexed databases, or maintain and improve indexes on the existing database schema.</span></span> 

### <a name="why-do-you-need-index-management"></a><span data-ttu-id="482cf-129">Pourquoi utiliser la gestion des index ?</span><span class="sxs-lookup"><span data-stu-id="482cf-129">Why do you need index management?</span></span>

<span data-ttu-id="482cf-130">Les index accélèrent certaines de vos requêtes qui lisent les données à partir des tables ; cependant, ils peuvent ralentir les requêtes qui mettent à jour les données.</span><span class="sxs-lookup"><span data-stu-id="482cf-130">Indexes speed up some of your queries that read data from the tables; however, they can slow down the queries that update data.</span></span> <span data-ttu-id="482cf-131">Vous devez analyser soigneusement quand créer un index et les colonnes que vous devez inclure dans l’index.</span><span class="sxs-lookup"><span data-stu-id="482cf-131">You need to carefully analyze when to create an index and what columns you need to include in the index.</span></span> <span data-ttu-id="482cf-132">Certains index peuvent ne plus être nécessaires après un certain temps.</span><span class="sxs-lookup"><span data-stu-id="482cf-132">Some indexes might not be needed after some time.</span></span> <span data-ttu-id="482cf-133">Par conséquent, vous devez régulièrement identifier et supprimer les index qui n’apportent aucun avantage.</span><span class="sxs-lookup"><span data-stu-id="482cf-133">Therefore, you would need to periodically identify and drop the indexes that do not bring any benefits.</span></span> <span data-ttu-id="482cf-134">Si vous ignorez les index non utilisés, les performances des requêtes qui mettent à jour les données diminuent sans aucun avantage pour les requêtes qui lisent les données.</span><span class="sxs-lookup"><span data-stu-id="482cf-134">If you ignore the unused indexes, performance of the queries that update data would be decreased without any benefit on the queries that read data.</span></span> <span data-ttu-id="482cf-135">Les index inutilisés affectent également les performances globales du système, car les mises à jour supplémentaires impliquent une journalisation inutile.</span><span class="sxs-lookup"><span data-stu-id="482cf-135">Unused indexes also affect overall performance of the system because additional updates require unnecessary logging.</span></span>

<span data-ttu-id="482cf-136">Pour trouver l’ensemble optimal d’index qui améliore les performances des requêtes qui lisent les données de vos tables et ont un impact minimal sur les mises à jour, vous aurez peut-être besoin d’une analyse continue complexe.</span><span class="sxs-lookup"><span data-stu-id="482cf-136">Finding the optimal set of indexes that improve performance of the queries that read data from your tables and have minimal impact on updates might require continuous and complex analysis.</span></span>

<span data-ttu-id="482cf-137">Azure SQL Database utilise l’intelligence intégrée et des règles avancées pour analyser vos requêtes, identifier les index qui seraient optimaux pour vos charges de travail actuelles et les index qui peuvent être supprimés.</span><span class="sxs-lookup"><span data-stu-id="482cf-137">Azure SQL Database uses built-in intelligence and advanced rules that analyze your queries, identify indexes that would be optimal for your current workloads, and the indexes might be removed.</span></span> <span data-ttu-id="482cf-138">Azure SQL Database permet de s’assurer que vous disposez de l’ensemble d’index minimal nécessaire à l’optimisation des requêtes qui lisent les données, avec un impact réduit sur les autres requêtes.</span><span class="sxs-lookup"><span data-stu-id="482cf-138">Azure SQL Database ensures that you have a minimal necessary set of indexes that optimize the queries that read data, with the minimized impact on the other queries.</span></span>

### <a name="how-to-identify-indexes-that-need-to-be-changed-in-your-database"></a><span data-ttu-id="482cf-139">Comment identifier les index qui doivent être modifiés dans votre base de données ?</span><span class="sxs-lookup"><span data-stu-id="482cf-139">How to identify indexes that need to be changed in your database?</span></span>

<span data-ttu-id="482cf-140">Azure SQL Database facilite le processus de gestion des index.</span><span class="sxs-lookup"><span data-stu-id="482cf-140">Azure SQL Database makes index management process easy.</span></span> <span data-ttu-id="482cf-141">Plutôt que d’utiliser un système manuel fastidieux pour l’analyse de la charge de travail et la surveillance de l’index, Azure SQL Database analyse votre charge de travail, identifie les requêtes qui pourraient s’exécuter plus rapidement avec un nouvel index, et identifie les index non utilisés ou en double.</span><span class="sxs-lookup"><span data-stu-id="482cf-141">Instead of the tedious process of manual workload analysis and index monitoring, Azure SQL Database analyzes your workload, identifies the queries that could be executed faster with a new index, and identifies unused or duplicated indexes.</span></span> <span data-ttu-id="482cf-142">Pour plus d’informations sur l’identification des index à modifier, voir [Rechercher des recommandations d’index dans le portail Azure](sql-database-advisor-portal.md).</span><span class="sxs-lookup"><span data-stu-id="482cf-142">Find more information about identification of indexes that should be changed at [Find index recommendations in Azure portal](sql-database-advisor-portal.md).</span></span>

### <a name="automatic-index-management-considerations"></a><span data-ttu-id="482cf-143">Considérations sur la gestion automatique des index</span><span class="sxs-lookup"><span data-stu-id="482cf-143">Automatic index management considerations</span></span>

<span data-ttu-id="482cf-144">Si vous constatez que les règles intégrées améliorent les performances de votre base de données, vous pouvez laisser Azure SQL Database gérer automatiquement vos index.</span><span class="sxs-lookup"><span data-stu-id="482cf-144">If you find that the built-in rules improve the performance of your database, you might let Azure SQL database automatically manage your indexes.</span></span>

<span data-ttu-id="482cf-145">Les actions requises pour créer les index nécessaires dans Azure SQL Database peuvent consommer des ressources et affecter temporairement les performances en termes de charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-145">Actions required to create necessary indexes in Azure SQL Databases might consume resources and temporally affect workload performance.</span></span> <span data-ttu-id="482cf-146">Pour minimiser l’impact de la création d’index sur les performances en termes de charge de travail, Azure SQL Database recherche la période appropriée pour chaque opération de gestion des index.</span><span class="sxs-lookup"><span data-stu-id="482cf-146">To minimize the impact of index creation on workload performance, Azure SQL Database finds the appropriate time window for any index management operation.</span></span> <span data-ttu-id="482cf-147">Le réglage est reporté à plus tard si la base de données a besoin de ressources pour exécuter votre charge de travail. Il démarre lorsque la base de données dispose de suffisamment de ressources inutilisées qui peuvent être exploitées pour la tâche de maintenance.</span><span class="sxs-lookup"><span data-stu-id="482cf-147">Tuning action is postponed if the database needs resources to execute your workload, and started when the database has enough unused resources that can be used for the maintenance task.</span></span> <span data-ttu-id="482cf-148">Une fonctionnalité importante dans la gestion automatique des index est la vérification des actions.</span><span class="sxs-lookup"><span data-stu-id="482cf-148">One important feature in automatic index management is a verification of the actions.</span></span> <span data-ttu-id="482cf-149">Lorsqu’Azure SQL Database crée ou supprime des index, un processus de surveillance analyse les performances de votre charge de travail pour vérifier que l’action les a améliorées.</span><span class="sxs-lookup"><span data-stu-id="482cf-149">When Azure SQL Database creates or drops index, a monitoring process analyzes performance of your workload to verify that the action improved the performance.</span></span> <span data-ttu-id="482cf-150">Si l’amélioration n’est pas significative, l’action est immédiatement annulée.</span><span class="sxs-lookup"><span data-stu-id="482cf-150">If it didn’t bring significant improvement – the action is immediately reverted.</span></span> <span data-ttu-id="482cf-151">De cette manière, Azure SQL Database s’assure que les actions automatiques ne nuisent pas aux performances de votre charge de travail.</span><span class="sxs-lookup"><span data-stu-id="482cf-151">This way, Azure SQL Database ensures that automatic actions do not negatively impact performance of your workload.</span></span> <span data-ttu-id="482cf-152">Les index créés par le réglage automatique sont transparents pour l’opération de maintenance sur le schéma sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="482cf-152">Indexes created by automatic tuning are transparent for the maintenance operation on the underlying schema.</span></span> <span data-ttu-id="482cf-153">Les modifications du schéma, par exemple le fait de supprimer ou de renommer des colonnes, ne sont pas bloquées par la présence d’index créés automatiquement.</span><span class="sxs-lookup"><span data-stu-id="482cf-153">Schema changes such as dropping or renaming columns are not blocked by the presence of automatically created indexes.</span></span> <span data-ttu-id="482cf-154">Les index créés automatiquement par Azure SQL Database sont immédiatement supprimés lorsque la table ou les colonnes liées sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="482cf-154">Indexes that are automatically created by Azure SQL Database are immediately dropped when related table or columns is dropped.</span></span>

## <a name="automatic-plan-choice-correction"></a><span data-ttu-id="482cf-155">Correction automatique du choix de plan</span><span class="sxs-lookup"><span data-stu-id="482cf-155">Automatic plan choice correction</span></span>

<span data-ttu-id="482cf-156">La correction automatique du plan est une nouvelle fonctionnalité de réglage automatique ajoutée dans SQL Server 2017 CTP2.0. Elle identifie les plans SQL qui ne se comportent pas de manière adéquate.</span><span class="sxs-lookup"><span data-stu-id="482cf-156">Automatic plan correction is a new automatic tuning feature added in SQL Server 2017 CTP2.0 that identifies SQL plans that misbehave.</span></span> <span data-ttu-id="482cf-157">Cette option de réglage automatique sera bientôt disponible sur Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="482cf-157">This automatic tuning option is coming soon on Azure SQL Database.</span></span> <span data-ttu-id="482cf-158">Pour en savoir plus, voir [Réglage automatique dans SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span><span class="sxs-lookup"><span data-stu-id="482cf-158">Find more information at [Automatic tuning in SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span></span>

## <a name="next-steps"></a><span data-ttu-id="482cf-159">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="482cf-159">Next steps</span></span>

- <span data-ttu-id="482cf-160">Pour activer le réglage automatique dans Azure SQL Database et permettre à cette fonction de gérer entièrement votre charge de travail, consultez [Activer le réglage automatique](sql-database-automatic-tuning-enable.md).</span><span class="sxs-lookup"><span data-stu-id="482cf-160">To enable automatic tuning in Azure SQL Database and let automatic tuning feature fully manage your workload, see [Enable automatic tuning](sql-database-automatic-tuning-enable.md).</span></span>
- <span data-ttu-id="482cf-161">Pour utiliser le réglage manuel, vous pouvez consulter les [recommandations de réglage dans le portail Azure](sql-database-advisor-portal.md) et appliquer manuellement les recommandations qui amélioreront les performances de vos requêtes.</span><span class="sxs-lookup"><span data-stu-id="482cf-161">To use manual tuning, you can review [Tuning recommendations in Azure portal](sql-database-advisor-portal.md) and manually apply the ones that improve performance of your queries.</span></span>
