---
title: "authentification d’Azure Active Directory aaaConfigure - SQL | Documents Microsoft"
description: "Découvrez comment tooconnect tooSQL base de données et de l’entrepôt de données SQL à l’aide de l’authentification Azure Active Directory."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: d6222da0b840f96d4bcfbc02964dc7c54d5ea1ee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="28cf2-103">Configurer et gérer l’authentification Azure Active Directory avec SQL Database ou SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="28cf2-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="28cf2-104">Cet article vous montre comment toocreate remplir Azure AD et ensuite utiliser Azure AD avec la base de données SQL Azure et SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-104">This article shows you how toocreate and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="28cf2-105">Pour obtenir une vue d’ensemble, consultez [Authentification Azure Active Directory](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="28cf2-106">Connexion tooSQL Server s’exécutant sur une machine virtuelle Azure n’est pas prise en charge d’à l’aide d’un compte Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="28cf2-106">Connecting tooSQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="28cf2-107">Utilisez plutôt un compte Active Directory du domaine.</span><span class="sxs-lookup"><span data-stu-id="28cf2-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="28cf2-108">Créer et renseigner un répertoire Azure AD</span><span class="sxs-lookup"><span data-stu-id="28cf2-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="28cf2-109">Créez un annuaire Azure AD et renseignez-le avec les utilisateurs et les groupes.</span><span class="sxs-lookup"><span data-stu-id="28cf2-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="28cf2-110">Azure AD peut être le domaine géré de hello initiale de domaine Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-110">Azure AD can be hello initial domain Azure AD managed domain.</span></span> <span data-ttu-id="28cf2-111">Azure AD peut également être un Services de domaine Active Directory local est fédéré avec hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with hello Azure AD.</span></span>

<span data-ttu-id="28cf2-112">Pour plus d’informations, consultez [intégrer vos identités locales avec Azure Active Directory](../active-directory/active-directory-aadconnect.md), [ajouter vos propres tooAzure de nom de domaine Active Directory](../active-directory/active-directory-add-domain.md), [Microsoft Azure prend désormais en charge la fédération avec Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [administrer votre annuaire Azure AD](https://msdn.microsoft.com/library/azure/hh967611.aspx), [gérer Azure Active Directory à l’aide de Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), et [identité hybride Ports et protocoles requis](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-hello-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="28cf2-113">Associer facultatif : Ou modifier hello active directory qui est associé à votre abonnement Azure</span><span class="sxs-lookup"><span data-stu-id="28cf2-113">Optional: Associate or change hello active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="28cf2-114">tooassociate votre base de données avec le répertoire hello Azure AD pour votre organisation, sélectionnez hello répertoire un approuvé pour la base de données hello hébergement hello abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="28cf2-114">tooassociate your database with hello Azure AD directory for your organization, make hello directory a trusted directory for hello Azure subscription hosting hello database.</span></span> <span data-ttu-id="28cf2-115">Pour plus d’informations, consultez la page [Comment sont associés les abonnements Azure et Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="28cf2-116">**Additional information :** chaque abonnement Azure dispose d’une relation d’approbation avec une instance Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="28cf2-117">Cela signifie qu’il approuve ce tooauthenticate Active les utilisateurs, les services et les périphériques.</span><span class="sxs-lookup"><span data-stu-id="28cf2-117">This means that it trusts that directory tooauthenticate users, services, and devices.</span></span> <span data-ttu-id="28cf2-118">Plusieurs abonnements peuvent approuver hello même répertoire, mais un abonnement fait confiance à un seul répertoire.</span><span class="sxs-lookup"><span data-stu-id="28cf2-118">Multiple subscriptions can trust hello same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="28cf2-119">Vous pouvez voir l’annuaire approuvé par votre abonnement sous hello **paramètres** onglet à [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="28cf2-119">You can see which directory is trusted by your subscription under hello **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="28cf2-120">Cette relation de confiance possédant un abonnement à un annuaire diffère de la relation hello ayant un abonnement avec toutes les autres ressources dans Azure (sites Web, bases de données et ainsi de suite), qui sont apparentent à des ressources enfants d’un abonnement.</span><span class="sxs-lookup"><span data-stu-id="28cf2-120">This trust relationship that a subscription has with a directory is unlike hello relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="28cf2-121">Si un abonnement arrive à expiration, puis accéder à toothose autres ressources associés hello abonnement s’arrête également.</span><span class="sxs-lookup"><span data-stu-id="28cf2-121">If a subscription expires, then access toothose other resources associated with hello subscription also stops.</span></span> <span data-ttu-id="28cf2-122">Répertoire de hello reste dans Azure, mais vous pouvez associer un autre abonnement à ce répertoire et continuer d’utilisateurs Active Directory toomanage hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-122">But hello directory remains in Azure, and you can associate another subscription with that directory and continue toomanage hello directory users.</span></span> <span data-ttu-id="28cf2-123">Pour plus d’informations sur les ressources, consultez [Comprendre l’accès aux ressources dans Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="28cf2-124">Hello procédures suivantes vous montrent comment toochange hello associés active pour un abonnement donné.</span><span class="sxs-lookup"><span data-stu-id="28cf2-124">hello following procedures show you how toochange hello associated directory for a given subscription.</span></span>
1. <span data-ttu-id="28cf2-125">Se connecter tooyour [portail classique Azure](https://manage.windowsazure.com/) à l’aide d’un administrateur d’abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="28cf2-125">Connect tooyour [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="28cf2-126">Dans la bannière de gauche hello, sélectionnez **paramètres**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-126">On hello left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="28cf2-127">Vos abonnements s’affichent dans l’écran des paramètres de hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-127">Your subscriptions appear in hello settings screen.</span></span> <span data-ttu-id="28cf2-128">Hello éventuellement abonnement n’apparaît pas, cliquez sur **abonnements** en haut hello, liste déroulante hello **filtre par répertoire** zone et sélectionnez hello répertoire qui contient vos abonnements, puis cliquez sur **Appliquer**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-128">If hello desired subscription does not appear, click **Subscriptions** at hello top, drop down hello **FILTER BY DIRECTORY** box and select hello directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![sélectionner l'abonnement][4]
4. <span data-ttu-id="28cf2-130">Bonjour **paramètres** zone, cliquez sur votre abonnement, puis cliquez sur **modifier l’annuaire** bas hello de page de hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-130">In hello **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at hello bottom of hello page.</span></span>
   
    ![portail-paramètres-ad][5]
5. <span data-ttu-id="28cf2-132">Bonjour **modifier l’annuaire** zone hello Azure Active Directory qui est associé à votre SQL Server ou d’un entrepôt de données SQL et sélectionnez puis cliquez sur la flèche suivant hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-132">In hello **EDIT DIRECTORY** box, select hello Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click hello arrow for next.</span></span>
   
    ![edit-directory-select][6]
6. <span data-ttu-id="28cf2-134">Bonjour **confirmer** répertoire boîte de dialogue mappage, vérifiez que «**tous les coadministrateurs seront supprimés.**»</span><span class="sxs-lookup"><span data-stu-id="28cf2-134">In hello **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![edit-directory-confirm][7]
7. <span data-ttu-id="28cf2-136">Cliquez sur le portail de hello cocher tooreload hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-136">Click hello check tooreload hello portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="28cf2-137">Lorsque vous modifiez le répertoire de hello, coadministrateurs de tooall accès, Azure AD utilisateurs et groupes et reposant sur le répertoire des ressources utilisateurs sont supprimés et ils n’ont plus accès toothis abonnement ou ses ressources.</span><span class="sxs-lookup"><span data-stu-id="28cf2-137">When you change hello directory, access tooall co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access toothis subscription or its resources.</span></span> <span data-ttu-id="28cf2-138">Uniquement, en tant qu’un administrateur de service, de configurer l’accès pour les principaux basés sur le nouveau répertoire de hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-138">Only you, as a service administrator, can configure access for principals based on hello new directory.</span></span> <span data-ttu-id="28cf2-139">Cette modification peut prendre beaucoup de ressources de tooall toopropagate de temps.</span><span class="sxs-lookup"><span data-stu-id="28cf2-139">This change might take a substantial amount of time toopropagate tooall resources.</span></span> <span data-ttu-id="28cf2-140">Passage du répertoire de hello, également modifications hello administrateur Azure AD pour la base de données SQL et SQL Data Warehouse et interdire l’accès de base de données pour les utilisateurs Azure AD existants.</span><span class="sxs-lookup"><span data-stu-id="28cf2-140">Changing hello directory, also changes hello Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="28cf2-141">Hello Azure AD admin doit être réinitialisation (comme décrit ci-dessous) et Azure nouveaux utilisateurs d’Active Directory doivent être créés.</span><span class="sxs-lookup"><span data-stu-id="28cf2-141">hello Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="28cf2-142">Créer un administrateur d’Azure AD pour le serveur SQL Azure</span><span class="sxs-lookup"><span data-stu-id="28cf2-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="28cf2-143">Chaque serveur SQL Azure (qui héberge la base de données SQL ou SQL Data Warehouse) démarre avec un compte d’administrateur de serveur unique qui est administrateur hello d’ensemble du serveur SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is hello administrator of hello entire Azure SQL server.</span></span> <span data-ttu-id="28cf2-144">Un deuxième administrateur SQL Server doit être créé. Il s’agit d’un compte Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="28cf2-145">Cette entité de sécurité est créée en tant qu’un utilisateur de base de données contenue dans la base de données master hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-145">This principal is created as a contained database user in hello master database.</span></span> <span data-ttu-id="28cf2-146">En tant qu’administrateurs, comptes d’administrateur serveur hello sont membres de hello **db_owner** rôle dans tous les utilisateurs de base de données et entrez chaque base de données utilisateur hello **dbo** utilisateur.</span><span class="sxs-lookup"><span data-stu-id="28cf2-146">As administrators, hello server administrator accounts are members of hello **db_owner** role in every user database, and enter each user database as hello **dbo** user.</span></span> <span data-ttu-id="28cf2-147">Pour plus d’informations sur les comptes d’administrateur serveur hello, consultez [gérer les bases de données et des connexions dans base de données SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-147">For more information about hello server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="28cf2-148">Lorsque vous utilisez Azure Active Directory avec la géo-réplication, administrateur de hello Azure Active Directory doit être configuré pour hello principal et les serveurs secondaires hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-148">When using Azure Active Directory with geo-replication, hello Azure Active Directory administrator must be configured for both hello primary and hello secondary servers.</span></span> <span data-ttu-id="28cf2-149">Si un serveur n’a pas un administrateur Azure Active Directory, puis les utilisateurs et les connexions d’accès Azure Active Directory une erreur « Impossible de se connecter » tooserver.</span><span class="sxs-lookup"><span data-stu-id="28cf2-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" tooserver error.</span></span>

> [!NOTE]
> <span data-ttu-id="28cf2-150">Les utilisateurs qui ne sont pas basées sur un compte Azure AD (y compris le compte d’administrateur hello Azure SQL server), ne peut pas créer Azure AD les utilisateurs, car ils n’ont pas toovalidate autorisation proposé aux utilisateurs de base de données avec Azure AD de hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-150">Users that are not based on an Azure AD account (including hello Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission toovalidate proposed database users with hello Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="28cf2-151">Approvisionner un administrateur d’Azure Active Directory pour votre serveur Azure SQL</span><span class="sxs-lookup"><span data-stu-id="28cf2-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="28cf2-152">Hello deux procédures suivantes vous montrent comment tooprovision un administrateur Azure Active Directory pour votre serveur SQL Azure Bonjour portail Azure et à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="28cf2-152">hello following two procedures show you how tooprovision an Azure Active Directory administrator for your Azure SQL server in hello Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="28cf2-153">Portail Azure</span><span class="sxs-lookup"><span data-stu-id="28cf2-153">Azure portal</span></span>
1. <span data-ttu-id="28cf2-154">Bonjour [portail Azure](https://portal.azure.com/)hello coin supérieur droit, cliquez sur dans votre toodrop de connexion vers le bas d’une liste de répertoires Active possibles.</span><span class="sxs-lookup"><span data-stu-id="28cf2-154">In hello [Azure portal](https://portal.azure.com/), in hello upper-right corner, click your connection toodrop down a list of possible Active Directories.</span></span> <span data-ttu-id="28cf2-155">Choisissez hello corriger Active Directory comme valeur par défaut de hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-155">Choose hello correct Active Directory as hello default Azure AD.</span></span> <span data-ttu-id="28cf2-156">Cette étape liens hello abonnement association avec Active Directory avec Azure SQL server assurant que hello même abonnement est utilisée pour Azure AD et SQL Server.</span><span class="sxs-lookup"><span data-stu-id="28cf2-156">This step links hello subscription association with Active Directory with Azure SQL server making sure that hello same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="28cf2-157">(hello Azure SQL server peut héberger de base de données SQL Azure ou d’entrepôt de données SQL Azure.)</span><span class="sxs-lookup"><span data-stu-id="28cf2-157">(hello Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="28cf2-158">![choose-ad][8]</span><span class="sxs-lookup"><span data-stu-id="28cf2-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="28cf2-159">Bonjour, sélectionnez de bannière de gauche **serveurs SQL**, sélectionnez votre **SQL server**, puis dans hello **SQL Server** panneau, cliquez sur **l’administrateur Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-159">In hello left banner select **SQL servers**, select your **SQL server**, and then in hello **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="28cf2-160">Bonjour **administrateur Active Directory** panneau, cliquez sur **définition de l’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-160">In hello **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="28cf2-161">![sélectionner active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="28cf2-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="28cf2-162">Bonjour **ajouter admin** panneau, rechercher un utilisateur, sélectionnez hello ou d’un groupe toobe un administrateur, puis cliquez sur **sélectionnez**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-162">In hello **Add admin** blade, search for a user, select hello user or group toobe an administrator, and then click **Select**.</span></span> <span data-ttu-id="28cf2-163">(le panneau d’administration hello Active Directory affiche tous les membres et les groupes de votre annuaire Active Directory.</span><span class="sxs-lookup"><span data-stu-id="28cf2-163">(hello Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="28cf2-164">Les utilisateurs ou les groupes grisés ne peuvent être sélectionnés, car ils ne sont pas pris en charge en tant qu’administrateurs Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="28cf2-165">(Voir liste hello des administrateurs pris en charge dans hello **Azure AD fonctionnalités et Limitations** section de [utilisez authentification Azure Active Directory pour l’authentification de base de données SQL ou SQL Data Warehouse](sql-database-aad-authentication.md).) Contrôle d’accès basé sur un rôle (RBAC) s’applique uniquement toohello portal et n’est pas propagé tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="28cf2-165">(See hello list of supported admins in hello **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only toohello portal and is not propagated tooSQL Server.</span></span>   
    <span data-ttu-id="28cf2-166">![sélectionner l’administrateur](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="28cf2-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="28cf2-167">En haut de hello Hello **administrateur Active Directory** panneau, cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-167">At hello top of hello **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="28cf2-168">![enregistrer l’administrateur](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="28cf2-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="28cf2-169">processus Hello de la modification d’administrateur de hello peut prendre plusieurs minutes.</span><span class="sxs-lookup"><span data-stu-id="28cf2-169">hello process of changing hello administrator may take several minutes.</span></span> <span data-ttu-id="28cf2-170">Nouvel administrateur de hello s’affiche dans hello **administrateur Active Directory** boîte.</span><span class="sxs-lookup"><span data-stu-id="28cf2-170">Then hello new administrator appears in hello **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="28cf2-171">Lorsque vous configurez hello Azure AD admin, hello nouveau nom d’administrateur (utilisateur ou groupe) ne peut pas déjà être présente dans la base de données master virtuelle hello en tant qu’un utilisateur de l’authentification SQL Server.</span><span class="sxs-lookup"><span data-stu-id="28cf2-171">When setting up hello Azure AD admin, hello new admin name (user or group) cannot already be present in hello virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="28cf2-172">Le cas échéant, le programme d’installation de hello Azure AD admin échoue ; annulation de sa création et en indiquant que cet un administrateur (nom) de déjà existent.</span><span class="sxs-lookup"><span data-stu-id="28cf2-172">If present, hello Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="28cf2-173">Dans la mesure où un tel utilisateur de l’authentification de SQL Server n’est pas partie de hello Azure AD, tout effort tooconnect toohello à l’aide de l’authentification Azure AD échoue.</span><span class="sxs-lookup"><span data-stu-id="28cf2-173">Since such a SQL Server authentication user is not part of hello Azure AD, any effort tooconnect toohello server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="28cf2-174">toolater supprimer un administrateur, en haut de hello Hello **administrateur Active Directory** panneau, cliquez sur **supprimer l’administrateur**, puis cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-174">toolater remove an Admin, at hello top of hello **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="28cf2-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="28cf2-175">PowerShell</span></span>
<span data-ttu-id="28cf2-176">toorun applets de commande PowerShell, vous devez toohave Azure PowerShell installé et en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="28cf2-176">toorun PowerShell cmdlets, you need toohave Azure PowerShell installed and running.</span></span> <span data-ttu-id="28cf2-177">Pour plus d’informations, consultez [comment tooinstall et configurer Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="28cf2-177">For detailed information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="28cf2-178">tooprovision administrateur Azure AD, exécutez hello suivant de commandes Azure PowerShell :</span><span class="sxs-lookup"><span data-stu-id="28cf2-178">tooprovision an Azure AD admin, execute hello following Azure PowerShell commands:</span></span>

* <span data-ttu-id="28cf2-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="28cf2-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="28cf2-180">Select-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="28cf2-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="28cf2-181">Applets de commande utilisé tooprovision et gérer Azure AD admin :</span><span class="sxs-lookup"><span data-stu-id="28cf2-181">Cmdlets used tooprovision and manage Azure AD admin:</span></span>

| <span data-ttu-id="28cf2-182">Nom de l’applet de commande</span><span class="sxs-lookup"><span data-stu-id="28cf2-182">Cmdlet name</span></span> | <span data-ttu-id="28cf2-183">Description</span><span class="sxs-lookup"><span data-stu-id="28cf2-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="28cf2-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="28cf2-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="28cf2-185">Approvisionne un administrateur Azure Active Directory pour le serveur Azure SQL Server ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="28cf2-186">(Doit être de l’abonnement actuel de hello.)</span><span class="sxs-lookup"><span data-stu-id="28cf2-186">(Must be from hello current subscription.)</span></span> |
| [<span data-ttu-id="28cf2-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="28cf2-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="28cf2-188">Supprime un administrateur Azure Active Directory pour le serveur Azure SQL Server ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="28cf2-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="28cf2-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="28cf2-190">Retourne des informations à propos d’un administrateur d’Azure Active Directory actuellement configurée pour le serveur SQL Azure de hello ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-190">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="28cf2-191">Utilisation de PowerShell de commande get-help toosee plus en détail pour chacune de ces commandes, par exemple ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="28cf2-191">Use PowerShell command get-help toosee more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="28cf2-192">Hello suivant les dispositions de script nommé d’un groupe d’administrateur Azure AD **DBA_Group** (id d’objet `40b79501-b343-44ed-9ce7-da4c8cc7353f`) pour hello **demo_server** serveur dans un groupe de ressources nommé **23-groupe** :</span><span class="sxs-lookup"><span data-stu-id="28cf2-192">hello following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for hello **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="28cf2-193">Hello **DisplayName** paramètre d’entrée accepte le nom d’affichage hello Azure AD ou hello nom d’utilisateur Principal.</span><span class="sxs-lookup"><span data-stu-id="28cf2-193">hello **DisplayName** input parameter accepts either hello Azure AD display name or hello User Principal Name.</span></span> <span data-ttu-id="28cf2-194">Par exemple, ``DisplayName="John Smith"`` et ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="28cf2-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="28cf2-195">Nom d’affichage est prise en charge pour hello uniquement de groupes Azure AD Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-195">For Azure AD groups only hello Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="28cf2-196">Hello commande Azure PowerShell ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` ne vous empêche pas de l’approvisionnement des administrateurs d’Azure AD pour les utilisateurs non pris en charge.</span><span class="sxs-lookup"><span data-stu-id="28cf2-196">hello Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="28cf2-197">Un utilisateur non pris en charge peut être configuré, mais ne peut pas se connecter à tooa de base de données.</span><span class="sxs-lookup"><span data-stu-id="28cf2-197">An unsupported user can be provisioned, but can not connect tooa database.</span></span> 
> 

<span data-ttu-id="28cf2-198">exemple Hello utilise hello facultatif **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="28cf2-198">hello following example uses hello optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="28cf2-199">Bonjour Azure AD **ObjectID** est requis lorsque hello **DisplayName** n’est pas unique.</span><span class="sxs-lookup"><span data-stu-id="28cf2-199">hello Azure AD **ObjectID** is required when hello **DisplayName** is not unique.</span></span> <span data-ttu-id="28cf2-200">tooretrieve hello **ObjectID** et **DisplayName** valeurs, utilisez la section Active Directory de hello du portail classique Azure et affichez les propriétés de hello d’un utilisateur ou un groupe.</span><span class="sxs-lookup"><span data-stu-id="28cf2-200">tooretrieve hello **ObjectID** and **DisplayName** values, use hello Active Directory section of Azure Classic Portal, and view hello properties of a user or group.</span></span>
> 

<span data-ttu-id="28cf2-201">Hello l’exemple suivant retourne des informations sur l’administration hello actuelle Azure AD pour le serveur SQL Azure :</span><span class="sxs-lookup"><span data-stu-id="28cf2-201">hello following example returns information about hello current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="28cf2-202">Bonjour à l’exemple suivant supprime un administrateur Azure AD :</span><span class="sxs-lookup"><span data-stu-id="28cf2-202">hello following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="28cf2-203">Vous pouvez également configurer un administrateur d’Active Directory Azure à l’aide des API REST de hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-203">You can also provision an Azure Active Directory Administrator by using hello REST APIs.</span></span> <span data-ttu-id="28cf2-204">Pour plus d’informations, consultez [Référence de l’API REST de gestion des services et Opérations sur les bases de données SQL Azure](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="28cf2-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="28cf2-205">Interface de ligne de commande</span><span class="sxs-lookup"><span data-stu-id="28cf2-205">CLI</span></span>  
<span data-ttu-id="28cf2-206">Vous pouvez également configurer un administrateur Azure AD en appelant hello suivant des commandes CLI :</span><span class="sxs-lookup"><span data-stu-id="28cf2-206">You can also provision an Azure AD admin by calling hello following CLI commands:</span></span>
| <span data-ttu-id="28cf2-207">Commande</span><span class="sxs-lookup"><span data-stu-id="28cf2-207">Command</span></span> | <span data-ttu-id="28cf2-208">Description</span><span class="sxs-lookup"><span data-stu-id="28cf2-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="28cf2-209">az sql server ad-admin create</span><span class="sxs-lookup"><span data-stu-id="28cf2-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="28cf2-210">Approvisionne un administrateur Azure Active Directory pour le serveur Azure SQL Server ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="28cf2-211">(Doit être de l’abonnement actuel de hello.)</span><span class="sxs-lookup"><span data-stu-id="28cf2-211">(Must be from hello current subscription.)</span></span> |
|[<span data-ttu-id="28cf2-212">az sql server ad-admin delete</span><span class="sxs-lookup"><span data-stu-id="28cf2-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="28cf2-213">Supprime un administrateur Azure Active Directory pour le serveur Azure SQL Server ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="28cf2-214">az sql server ad-admin list</span><span class="sxs-lookup"><span data-stu-id="28cf2-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="28cf2-215">Retourne des informations à propos d’un administrateur d’Azure Active Directory actuellement configurée pour le serveur SQL Azure de hello ou Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-215">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="28cf2-216">az sql server ad-admin update</span><span class="sxs-lookup"><span data-stu-id="28cf2-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="28cf2-217">Met à jour administrateur d’Active Directory hello pour un serveur SQL Azure ou d’un entrepôt de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="28cf2-217">Updates hello Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="28cf2-218">Pour plus d’informations sur les commandes CLI, consultez [SQL Server - az sql server](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="28cf2-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="28cf2-219">Configurer vos ordinateurs clients</span><span class="sxs-lookup"><span data-stu-id="28cf2-219">Configure your client computers</span></span>
<span data-ttu-id="28cf2-220">Sur tous les ordinateurs clients, à partir de laquelle vos applications ou les utilisateurs se connectent tooAzure base de données SQL ou entrepôt de données SQL Azure à l’aide des identités d’Azure AD, vous devez installer hello suivant logicielle :</span><span class="sxs-lookup"><span data-stu-id="28cf2-220">On all client machines, from which your applications or users connect tooAzure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install hello following software:</span></span>

* <span data-ttu-id="28cf2-221">.NET Framework version 4.6 ou ultérieure de [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="28cf2-222">Bibliothèque d’authentification Azure Active Directory pour SQL Server (**ADALSQL. DLL**) est disponible dans plusieurs langues (x86 et amd64) à partir du centre de téléchargement hello [Microsoft Active Directory Authentication Library pour Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="28cf2-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from hello download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="28cf2-223">Vous pouvez répondre à ces exigences en procédant comme suit :</span><span class="sxs-lookup"><span data-stu-id="28cf2-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="28cf2-224">L’installation soit [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) ou [SQL Server Data Tools pour Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) répond aux hello exigence de .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="28cf2-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets hello .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="28cf2-225">SSMS installe la version de hello x86 de **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-225">SSMS installs hello x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="28cf2-226">SSDT installe la version d’amd64 hello de **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-226">SSDT installs hello amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="28cf2-227">Hello plus récente de Visual Studio à partir de [téléchargements Visual Studio](https://www.visualstudio.com/downloads/download-visual-studio-vs) répond aux exigences de hello .NET Framework 4.6, mais n’installe pas la version d’amd64 requis hello de **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-227">hello latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets hello .NET Framework 4.6 requirement, but does not install hello required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-tooazure-ad-identities"></a><span data-ttu-id="28cf2-228">Créer des utilisateurs de base de données dans votre base de données mappée de tooAzure identités AD</span><span class="sxs-lookup"><span data-stu-id="28cf2-228">Create contained database users in your database mapped tooAzure AD identities</span></span>

<span data-ttu-id="28cf2-229">L’authentification Active Directory Azure nécessite toobe d’utilisateurs de base de données créé en tant qu’utilisateurs de base de données.</span><span class="sxs-lookup"><span data-stu-id="28cf2-229">Azure Active Directory authentication requires database users toobe created as contained database users.</span></span> <span data-ttu-id="28cf2-230">Un utilisateur de base de données basé sur une identité Azure AD, est un utilisateur de base de données qui ne dispose pas d’une connexion dans la base de données master hello et quelle identité tooan de mappages dans hello annuaire Azure AD qui est associé à la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in hello master database, and which maps tooan identity in hello Azure AD directory that is associated with hello database.</span></span> <span data-ttu-id="28cf2-231">Bonjour Azure AD identity peut être un compte d’utilisateur ou un groupe.</span><span class="sxs-lookup"><span data-stu-id="28cf2-231">hello Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="28cf2-232">Pour plus d'informations sur les utilisateurs de base de données à relation contenant-contenu, consultez [Utilisateurs de base de données - Rendre votre base de données portable](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="28cf2-233">Les utilisateurs de base de données (à l’exception de hello des administrateurs) ne peut pas être créés à l’aide de portail.</span><span class="sxs-lookup"><span data-stu-id="28cf2-233">Database users (with hello exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="28cf2-234">Rôles RBAC ne sont pas propagé tooSQL serveur, base de données SQL ou SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-234">RBAC roles are not propagated tooSQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="28cf2-235">Les rôles RBAC Azure sont utilisés pour la gestion des ressources Azure et ne s’appliquent pas les autorisations toodatabase.</span><span class="sxs-lookup"><span data-stu-id="28cf2-235">Azure RBAC roles are used for managing Azure Resources, and do not apply toodatabase permissions.</span></span> <span data-ttu-id="28cf2-236">Par exemple, hello **SQL Server collaborateur** rôle n’accorde pas d’accès tooconnect toohello base de données SQL ou SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="28cf2-236">For example, hello **SQL Server Contributor** role does not grant access tooconnect toohello SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="28cf2-237">autorisation d’accès de Hello doit être accordée directement dans la base de données hello à l’aide d’instructions Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="28cf2-237">hello access permission must be granted directly in hello database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="28cf2-238">toocreate un utilisateur de base de données de contenu basée sur Active Directory Azure (autres que hello administrateur du serveur qui est propriétaire de la base de données hello), se connecter toohello de base de données avec une identité Azure AD, en tant qu’utilisateur au moins hello **ALTER ANY USER** autorisation.</span><span class="sxs-lookup"><span data-stu-id="28cf2-238">toocreate an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity, as a user with at least hello **ALTER ANY USER** permission.</span></span> <span data-ttu-id="28cf2-239">Utilisez ensuite hello selon la syntaxe Transact-SQL :</span><span class="sxs-lookup"><span data-stu-id="28cf2-239">Then use hello following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="28cf2-240">*Azure_AD_principal_name* peut être hello nom d’utilisateur principal un nom Azure AD utilisateur ou hello complet pour un groupe d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-240">*Azure_AD_principal_name* can be hello user principal name of an Azure AD user or hello display name for an Azure AD group.</span></span>

<span data-ttu-id="28cf2-241">**Exemples :** toocreate un utilisateur de base de données qui représente un répertoire Azure AD fédéré ou géré d’utilisateur de domaine :</span><span class="sxs-lookup"><span data-stu-id="28cf2-241">**Examples:** toocreate a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="28cf2-242">toocreate un utilisateur de base de données représentant un répertoire Azure AD ou fédéré de groupe de domaine, fournir de nom d’affichage hello un groupe de sécurité :</span><span class="sxs-lookup"><span data-stu-id="28cf2-242">toocreate a contained database user representing an Azure AD or federated domain group, provide hello display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="28cf2-243">toocreate un utilisateur de base de données qui représente une application qui se connecte à l’aide d’un jeton Azure AD :</span><span class="sxs-lookup"><span data-stu-id="28cf2-243">toocreate a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="28cf2-244">Vous ne peut pas créer directement un utilisateur à partir d’Azure Active Directory que hello Azure Active Directory qui est associé à votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="28cf2-244">You cannot directly create a user from an Azure Active Directory other than hello Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="28cf2-245">Toutefois, les membres d’autres annuaires Active Directory qui sont les utilisateurs importés Bonjour associées à Active Directory (appelés utilisateurs externes) peuvent être ajoutées tooan groupe d’Active Directory dans le locataire hello Active Directory.</span><span class="sxs-lookup"><span data-stu-id="28cf2-245">However, members of other Active Directories that are imported users in hello associated Active Directory (known as external users) can be added tooan Active Directory group in hello tenant Active Directory.</span></span> <span data-ttu-id="28cf2-246">En créant un utilisateur de base de données pour ce groupe Active Directory, hello utilisateurs à partir de hello externe Active Directory peuvent avoir accès tooSQL de base de données.</span><span class="sxs-lookup"><span data-stu-id="28cf2-246">By creating a contained database user for that AD group, hello users from hello external Active Directory can gain access tooSQL Database.</span></span>   

<span data-ttu-id="28cf2-247">Pour plus d’informations sur la création d’utilisateurs de base de données à relation contenant-contenu basés sur des identités Azure Active Directory, voir [CRÉER UN UTILISATEUR (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="28cf2-248">Administrateur d’Azure Active Directory hello suppression pour le serveur SQL Azure empêche tout utilisateur de l’authentification Azure AD de se connecter de toohello server.</span><span class="sxs-lookup"><span data-stu-id="28cf2-248">Removing hello Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting toohello server.</span></span> <span data-ttu-id="28cf2-249">Si nécessaire, des utilisateurs Azure AD inutilisables peuvent être supprimés manuellement par un administrateur du service Base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="28cf2-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="28cf2-250">Si vous recevez un **expiration de connexion**, vous devrez peut-être tooset hello `TransparentNetworkIPResolution` paramètre de toofalse de chaîne de connexion hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-250">If you receive a **Connection Timeout Expired**, you may need tooset hello `TransparentNetworkIPResolution` parameter of hello connection string toofalse.</span></span> <span data-ttu-id="28cf2-251">Pour plus d’informations, consultez [Problème lié au délai d’expiration de la connexion avec .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="28cf2-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="28cf2-252">Lorsque vous créez un utilisateur de base de données, que l’utilisateur reçoit hello **CONNECT** autorisation et peuvent se connecter toothat de base de données en tant que membre de hello **PUBLIC** rôle.</span><span class="sxs-lookup"><span data-stu-id="28cf2-252">When you create a database user, that user receives hello **CONNECT** permission and can connect toothat database as a member of hello **PUBLIC** role.</span></span> <span data-ttu-id="28cf2-253">Initialement hello uniquement les autorisations utilisateur de toohello disponibles sont les autorisations accordées toohello **PUBLIC** rôle ou des autorisations accordées tooany des groupes Windows qu’ils sont membres de.</span><span class="sxs-lookup"><span data-stu-id="28cf2-253">Initially hello only permissions available toohello user are any permissions granted toohello **PUBLIC** role, or any permissions granted tooany Windows groups that they are a member of.</span></span> <span data-ttu-id="28cf2-254">Une fois que vous devez configurer un utilisateur de base de données Azure contenus basée sur Active Directory, vous pouvez accorder des autorisations supplémentaires de l’utilisateur hello, hello même façon que vous accordez l’autorisation tooany autre type d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="28cf2-254">Once you provision an Azure AD-based contained database user, you can grant hello user additional permissions, hello same way as you grant permission tooany other type of user.</span></span> <span data-ttu-id="28cf2-255">En général, accorder des autorisations des rôles de toodatabase et ajoutez les utilisateurs tooroles.</span><span class="sxs-lookup"><span data-stu-id="28cf2-255">Typically grant permissions toodatabase roles, and add users tooroles.</span></span> <span data-ttu-id="28cf2-256">Pour plus d’informations, consultez [Notions de base sur les autorisations de moteur de base de données](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="28cf2-257">Pour plus d'informations sur les rôles de base de données SQL, consultez [Gestion des bases de données et des connexions dans la base de données SQL Azure](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="28cf2-258">Un domaine fédéré qui sont importées dans un domaine de gestion, vous devez utiliser hello géré l’identité de domaine.</span><span class="sxs-lookup"><span data-stu-id="28cf2-258">A federated domain user that is imported into a manage domain, must use hello managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="28cf2-259">Les utilisateurs Active Directory Azure sont marquées dans les métadonnées de base de données hello avec type E (EXTERNAL_USER) et pour les groupes avec type X (EXTERNAL_GROUPS).</span><span class="sxs-lookup"><span data-stu-id="28cf2-259">Azure AD users are marked in hello database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="28cf2-260">Pour plus d’informations, consultez [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-toohello-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="28cf2-261">Se connecter toohello utilisateur de base de données ou du data warehouse à l’aide de SSMS ou SSDT</span><span class="sxs-lookup"><span data-stu-id="28cf2-261">Connect toohello user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="28cf2-262">tooconfirm hello Azure AD administrateur est correctement configuré, connectez-vous toohello **master** base de données à l’aide du compte d’administrateur hello Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28cf2-262">tooconfirm hello Azure AD administrator is properly set up, connect toohello **master** database using hello Azure AD administrator account.</span></span>
<span data-ttu-id="28cf2-263">tooprovision un utilisateur de base de données de contenu basée sur Active Directory Azure (autres que hello administrateur du serveur qui est propriétaire de la base de données hello), se connecter à base de données toohello avec une identité Azure AD qui a la base de données access toohello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-263">tooprovision an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity that has access toohello database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="28cf2-264">La prise en charge de l’authentification Azure Active Directory est disponible avec [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) et [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) dans Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="28cf2-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="28cf2-265">Hello version d’août 2016 de SSMS prend également en charge Universal l’authentification Active Directory, qui permet aux administrateurs toorequire multi-Factor Authentication à l’aide d’un appel téléphonique, message texte, les cartes à puce avec code confidentiel ou notification d’application mobile.</span><span class="sxs-lookup"><span data-stu-id="28cf2-265">hello August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators toorequire Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-tooconnect-using-ssms-or-ssdt"></a><span data-ttu-id="28cf2-266">À l’aide d’un tooconnect d’identité Azure AD à l’aide de SSMS ou SSDT</span><span class="sxs-lookup"><span data-stu-id="28cf2-266">Using an Azure AD identity tooconnect using SSMS or SSDT</span></span>  

<span data-ttu-id="28cf2-267">Hello procédures suivantes vous montre comment tooconnect tooa SQL de base de données avec une identité Azure AD à l’aide de SQL Server Management Studio ou les outils de base de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="28cf2-267">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="28cf2-268">Authentification intégrée d'Active Directory</span><span class="sxs-lookup"><span data-stu-id="28cf2-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="28cf2-269">Utilisez cette méthode si vous êtes connecté dans tooWindows à l’aide de vos informations d’identification Azure Active Directory à partir d’un domaine fédéré.</span><span class="sxs-lookup"><span data-stu-id="28cf2-269">Use this method if you are logged in tooWindows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="28cf2-270">Démarrez Management Studio ou les outils de données et Bonjour **connecter tooServer** (ou **connecter tooDatabase moteur**) la boîte de dialogue hello **authentification** , sélectionnez **Intégrées à active Directory -**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-270">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="28cf2-271">Aucun mot de passe est nécessaire ou peut être entré, car vos informations d’identification existantes seront présentées pour la connexion de hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-271">No password is needed or can be entered because your existing credentials will be presented for hello connection.</span></span>   

    ![Sélectionner l’authentification intégrée AD][11]
2. <span data-ttu-id="28cf2-273">Cliquez sur hello **Options** bouton, hello et **propriétés de connexion** page hello **connecter toodatabase** zone, entrez un nom hello de base de données utilisateur hello souhaité tooconnect À.</span><span class="sxs-lookup"><span data-stu-id="28cf2-273">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="28cf2-274">(hello **ID de client ou le nom de domaine AD**» option est uniquement prise en charge pour **universel avec la connexion de l’authentification Multifacteur** options, dans le cas contraire elle est grisée.)</span><span class="sxs-lookup"><span data-stu-id="28cf2-274">(hello **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Sélectionnez le nom de base de données hello][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="28cf2-276">Authentification par mot de passe Active Directory</span><span class="sxs-lookup"><span data-stu-id="28cf2-276">Active Directory password authentication</span></span>

<span data-ttu-id="28cf2-277">Utilisez cette méthode lorsque la connexion avec un nom de principal de Azure AD à l’aide d’Azure AD de hello géré de domaine.</span><span class="sxs-lookup"><span data-stu-id="28cf2-277">Use this method when connecting with an Azure AD principal name using hello Azure AD managed domain.</span></span> <span data-ttu-id="28cf2-278">Vous pouvez également l’utiliser pour un compte fédéré sans domaine toohello d’accès, par exemple, lorsque vous travaillez à distance.</span><span class="sxs-lookup"><span data-stu-id="28cf2-278">You can also use it for federated account without access toohello domain, for example when working remotely.</span></span>

<span data-ttu-id="28cf2-279">Utilisez cette méthode si vous êtes connecté en tooWindows à l’aide des informations d’identification d’un domaine qui n’est pas fédéré avec Azure, ou lorsque vous utilisez Azure AD à l’aide de l’authentification Azure AD selon hello initiale ou hello domaine client.</span><span class="sxs-lookup"><span data-stu-id="28cf2-279">Use this method if you are logged in tooWindows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on hello initial or hello client domain.</span></span>

1. <span data-ttu-id="28cf2-280">Démarrez Management Studio ou les outils de données et Bonjour **connecter tooServer** (ou **connecter tooDatabase moteur**) la boîte de dialogue hello **authentification** , sélectionnez **Active Directory - mot de passe**.</span><span class="sxs-lookup"><span data-stu-id="28cf2-280">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="28cf2-281">Bonjour **nom d’utilisateur** , tapez votre nom d’utilisateur Azure Active Directory dans le format de hello  **username@domain.com** . Cela doit être un compte à partir de hello Azure Active Directory ou un compte à partir d’un domaine fédérer avec hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="28cf2-281">In hello **User name** box, type your Azure Active Directory user name in hello format **username@domain.com**. This must be an account from hello Azure Active Directory or an account from a domain federate with hello Azure Active Directory.</span></span>
3. <span data-ttu-id="28cf2-282">Bonjour **mot de passe** , tapez votre mot de passe utilisateur pour le compte de hello Azure Active Directory ou compte de domaine fédéré.</span><span class="sxs-lookup"><span data-stu-id="28cf2-282">In hello **Password** box, type your user password for hello Azure Active Directory account or federated domain account.</span></span>

    ![Sélectionner l’authentification par mot de passe AD][12]
4. <span data-ttu-id="28cf2-284">Cliquez sur hello **Options** bouton, hello et **propriétés de connexion** page hello **connecter toodatabase** zone, entrez un nom hello de base de données utilisateur hello souhaité tooconnect À.</span><span class="sxs-lookup"><span data-stu-id="28cf2-284">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="28cf2-285">(Consultez le graphique de hello dans l’option précédente de hello.)</span><span class="sxs-lookup"><span data-stu-id="28cf2-285">(See hello graphic in hello previous option.)</span></span>

## <a name="using-an-azure-ad-identity-tooconnect-from-a-client-application"></a><span data-ttu-id="28cf2-286">À l’aide d’un tooconnect d’identité Azure AD à partir d’une application cliente</span><span class="sxs-lookup"><span data-stu-id="28cf2-286">Using an Azure AD identity tooconnect from a client application</span></span>

<span data-ttu-id="28cf2-287">Hello procédures suivantes vous montre comment tooconnect tooa SQL de base de données avec une identité Azure AD à partir d’une application cliente.</span><span class="sxs-lookup"><span data-stu-id="28cf2-287">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="28cf2-288">Authentification intégrée d'Active Directory</span><span class="sxs-lookup"><span data-stu-id="28cf2-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="28cf2-289">toouse l’authentification intégrée Windows, Active Directory de votre domaine doit être fédéré avec Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="28cf2-289">toouse integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="28cf2-290">Votre application cliente (ou un service de connexion de base de données toohello) doit être en cours d’exécution sur un ordinateur joint au domaine sous les informations d’identification de domaine d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="28cf2-290">Your client application (or a service) connecting toohello database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="28cf2-291">à l’aide de base de données tooconnect tooa intégré l’authentification et une identité Azure AD, mot clé d’authentification de hello dans la chaîne de connexion de base de données hello doit avoir la valeur tooActive intégrée active.</span><span class="sxs-lookup"><span data-stu-id="28cf2-291">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword in hello database connection string must be set tooActive Directory Integrated.</span></span> <span data-ttu-id="28cf2-292">Hello exemple de code c# suivant utilise ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="28cf2-292">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="28cf2-293">mot clé de chaîne de connexion de Hello ``Integrated Security=True`` n’est pas prise en charge pour la connexion tooAzure base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="28cf2-293">hello connection string keyword ``Integrated Security=True`` is not supported for connecting tooAzure SQL Database.</span></span> <span data-ttu-id="28cf2-294">Lors de l’établissement d’une connexion ODBC, vous devez tooremove espaces et définir l’authentification too'ActiveDirectoryIntegrated'.</span><span class="sxs-lookup"><span data-stu-id="28cf2-294">When making an ODBC connection, you will need tooremove spaces and set Authentication too'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="28cf2-295">Authentification par mot de passe Active Directory</span><span class="sxs-lookup"><span data-stu-id="28cf2-295">Active Directory password authentication</span></span>

<span data-ttu-id="28cf2-296">à l’aide de base de données tooconnect tooa intégré l’authentification et une identité Azure AD, mot clé d’authentification de hello doit avoir la valeur tooActive mot de passe active.</span><span class="sxs-lookup"><span data-stu-id="28cf2-296">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword must be set tooActive Directory Password.</span></span> <span data-ttu-id="28cf2-297">chaîne de connexion Hello doit contenir des ID d’utilisateur/UID et mots clés de mot de passe/PWD et de valeurs.</span><span class="sxs-lookup"><span data-stu-id="28cf2-297">hello connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="28cf2-298">Hello exemple de code c# suivant utilise ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="28cf2-298">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="28cf2-299">En savoir plus sur les méthodes d’authentification Azure AD à l’aide des exemples de code de démonstration hello disponibles à l’adresse [Azure AD d’authentification GitHub démonstration](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="28cf2-299">Learn more about Azure AD authentication methods using hello demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="28cf2-300">Jeton Azure AD</span><span class="sxs-lookup"><span data-stu-id="28cf2-300">Azure AD token</span></span>
<span data-ttu-id="28cf2-301">Cette méthode d’authentification permet de services de couche intermédiaire tooconnect tooAzure base de données SQL ou d’entrepôt de données SQL Azure en obtenant un jeton d’Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="28cf2-301">This authentication method allows middle-tier services tooconnect tooAzure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="28cf2-302">Elle permet l’utilisation de scénarios complexes, notamment l’authentification par certificat.</span><span class="sxs-lookup"><span data-stu-id="28cf2-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="28cf2-303">Vous devez effectuer quatre étapes de base toouse jeton l’authentification Azure AD :</span><span class="sxs-lookup"><span data-stu-id="28cf2-303">You must complete four basic steps toouse Azure AD token authentication:</span></span>

1. <span data-ttu-id="28cf2-304">Inscrire votre application avec Azure Active Directory et obtenir l’id de client hello pour votre code.</span><span class="sxs-lookup"><span data-stu-id="28cf2-304">Register your application with Azure Active Directory and get hello client id for your code.</span></span> 
2. <span data-ttu-id="28cf2-305">Créez une application hello représentant de base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="28cf2-305">Create a database user representing hello application.</span></span> <span data-ttu-id="28cf2-306">(Effectué à l’étape 6.)</span><span class="sxs-lookup"><span data-stu-id="28cf2-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="28cf2-307">Créez un certificat sur les exécutions d’ordinateur hello client application hello.</span><span class="sxs-lookup"><span data-stu-id="28cf2-307">Create a certificate on hello client computer runs hello application.</span></span>
4. <span data-ttu-id="28cf2-308">Ajouter le certificat de hello en tant que clé pour votre application.</span><span class="sxs-lookup"><span data-stu-id="28cf2-308">Add hello certificate as a key for your application.</span></span>

<span data-ttu-id="28cf2-309">Exemple de chaîne de connexion :</span><span class="sxs-lookup"><span data-stu-id="28cf2-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="28cf2-310">Pour plus d’informations, consultez le [Blog de sécurité de SQL Server](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="28cf2-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="28cf2-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="28cf2-311">sqlcmd</span></span>

<span data-ttu-id="28cf2-312">Bonjour suivant les instructions, connectez-vous à l’aide de la version 13.1 de sqlcmd, qui est disponible à partir de hello [centre de téléchargement](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="28cf2-312">hello following statements, connect using version 13.1 of sqlcmd, which is available from hello [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="28cf2-313">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="28cf2-313">Next steps</span></span>
- <span data-ttu-id="28cf2-314">Pour obtenir une vue d’ensemble de l’accès et du contrôle dans la base de données SQL, voir [Accès à la base de données SQL et contrôle](sql-database-control-access.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="28cf2-315">Pour une vue d’ensemble des connexions, des utilisateurs et des rôles de base de données dans la base de données SQL, voir [Connexions, utilisateurs et rôles de base de données](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="28cf2-316">Pour en savoir plus sur les principaux de base de données, voir [Principaux](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="28cf2-317">Pour en savoir plus sur les rôles de base de données, voir [Rôles de base de données](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="28cf2-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="28cf2-318">Pour en savoir plus sur les règles de pare-feu dans la base de données SQL, voir [Règles de pare-feu de la base de données SQL](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="28cf2-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

