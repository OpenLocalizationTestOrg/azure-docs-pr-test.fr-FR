---
title: "schéma de base de données SQL Azure aaaManage dans une application mutualisée | Documents Microsoft"
description: "Gérer un schéma pour plusieurs locataires dans une application mutualisée qui utilise Azure SQL Database"
keywords: "didacticiel sur les bases de données SQL"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="72e5f-104">Gérer le schéma pour plusieurs clients Bonjour application Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="72e5f-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="72e5f-105">Hello [premier didacticiel Wingtip SaaS](sql-database-saas-tutorial.md) montre comment application hello peut configurer une base de données client et l’enregistrer dans le catalogue de hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="72e5f-106">Comme n’importe quelle application, hello application Wingtip SaaS évolue au fil du temps et parfois nécessitera toohello de base de données les modifications.</span><span class="sxs-lookup"><span data-stu-id="72e5f-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="72e5f-107">Modifications peuvent inclure en schéma nouvel ou modifié, les données de référence de nouveaux ou modifiés et les routines de la base de données Gestion des tâches tooensure optimal performances de l’application.</span><span class="sxs-lookup"><span data-stu-id="72e5f-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="72e5f-108">Avec une application SaaS, ces modifications doivent toobe déployée de façon coordonnée entre un parc potentiellement massif de bases de données client.</span><span class="sxs-lookup"><span data-stu-id="72e5f-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="72e5f-109">Pour ces toobe de modifications de client dans les futures bases de données, ils ont besoin toobe intégré hello processus de configuration.</span><span class="sxs-lookup"><span data-stu-id="72e5f-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="72e5f-110">Ce didacticiel explore les deux scénarios - déploiement de mises à jour des données de référence pour tous les locataires, et un index sur hello impliquait de nouveaux réglages de table contenant des données référence hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="72e5f-111">Hello [travaux élastique](sql-database-elastic-jobs-overview.md) fonctionnalité est utilisée tooexecute ces opérations sur tous les locataires et hello *or* base de données client qui est utilisé comme modèle pour les nouvelles bases de données.</span><span class="sxs-lookup"><span data-stu-id="72e5f-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="72e5f-112">Ce didacticiel vous explique comment effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="72e5f-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="72e5f-113">Créer un compte de travail</span><span class="sxs-lookup"><span data-stu-id="72e5f-113">Create a job account</span></span>
> * <span data-ttu-id="72e5f-114">Interroger plusieurs clients</span><span class="sxs-lookup"><span data-stu-id="72e5f-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="72e5f-115">Mettre à jour les données dans toutes les bases de données de locataire</span><span class="sxs-lookup"><span data-stu-id="72e5f-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="72e5f-116">Créer un index sur une table dans toutes les bases de données de locataire</span><span class="sxs-lookup"><span data-stu-id="72e5f-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="72e5f-117">toocomplete ce didacticiel, assurez-vous que hello est suivant les conditions préalables sont remplies :</span><span class="sxs-lookup"><span data-stu-id="72e5f-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="72e5f-118">Hello Wingtip SaaS application est déployée.</span><span class="sxs-lookup"><span data-stu-id="72e5f-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="72e5f-119">toodeploy en moins de cinq minutes, consultez [déployer et Explorer hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="72e5f-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="72e5f-120">Azure PowerShell est installé.</span><span class="sxs-lookup"><span data-stu-id="72e5f-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="72e5f-121">Pour plus d’informations, consultez [Bien démarrer avec Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="72e5f-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="72e5f-122">version la plus récente Hello de SQL Server Management Studio (SSMS) est installée.</span><span class="sxs-lookup"><span data-stu-id="72e5f-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="72e5f-123">Télécharger et installer SSMS</span><span class="sxs-lookup"><span data-stu-id="72e5f-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="72e5f-124">*Ce didacticiel utilise des fonctionnalités de hello service de base de données SQL qui se trouvent dans une version d’évaluation limitée (travaux de base de données élastique). Si vous souhaitez toodo de ce didacticiel, fournissez votre id d’abonnement tooSaaSFeedback@microsoft.com associé au sujet = élastique aperçu de travaux. Après avoir reçu la confirmation que votre abonnement a été activé, [télécharger et installer les applets de commande hello dernière version préliminaire travaux](https://github.com/jaredmoo/azure-powershell/releases). Cette version préliminaire est limitée. Contactez SaaSFeedback@microsoft.com pour toute question ou demande de prise en charge associées.*</span><span class="sxs-lookup"><span data-stu-id="72e5f-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="72e5f-125">Introduction tooSaaS modèles de gestion des schémas</span><span class="sxs-lookup"><span data-stu-id="72e5f-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="72e5f-126">Hello client unique par base de données SaaS de modèle avantages dans nombreuses façons d’isolation des données hello qui résulte, mais à hello simultanément présente une complexité supplémentaire hello de maintenance et la gestion de bases de données.</span><span class="sxs-lookup"><span data-stu-id="72e5f-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="72e5f-127">[Travaux élastique](sql-database-elastic-jobs-overview.md) facilite l’administration et la gestion de la couche de données SQL hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="72e5f-128">Travaux vous toosecurely et fiable, exécuter des tâches (scripts T-SQL) indépendamment d’intervention de l’utilisateur ou d’entrée, par rapport à un groupe de bases de données.</span><span class="sxs-lookup"><span data-stu-id="72e5f-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="72e5f-129">Cette méthode peut être utilisé toodeploy schéma et des modifications de données de référence communes sur tous les locataires dans une application.</span><span class="sxs-lookup"><span data-stu-id="72e5f-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="72e5f-130">Travaux élastique peut également être utilisé toomaintain un *or* copie de base de données hello utilisée toocreate nouveaux clients, en vous assurant qu’il a toujours hello dernières référence de schéma et des données.</span><span class="sxs-lookup"><span data-stu-id="72e5f-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![Écran](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="72e5f-132">Préversion limitée des travaux élastiques</span><span class="sxs-lookup"><span data-stu-id="72e5f-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="72e5f-133">Il existe une nouvelle version des travaux élastiques qui est désormais une fonctionnalité intégrée d’Azure SQL Database (qui ne nécessite pas de services ou de composants supplémentaires).</span><span class="sxs-lookup"><span data-stu-id="72e5f-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="72e5f-134">Cette nouvelle version des travaux élastiques est pour le moment en préversion limitée.</span><span class="sxs-lookup"><span data-stu-id="72e5f-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="72e5f-135">Actuellement, cette version d’évaluation limitée prend en charge les comptes de travail PowerShell toocreate et toocreate de T-SQL et gérer des tâches.</span><span class="sxs-lookup"><span data-stu-id="72e5f-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="72e5f-136">*Ce didacticiel utilise des fonctionnalités de hello service de base de données SQL qui se trouvent dans une version d’évaluation limitée (travaux de base de données élastique). Si vous souhaitez toodo de ce didacticiel, fournissez votre id d’abonnement tooSaaSFeedback@microsoft.com associé au sujet = élastique aperçu de travaux. Après avoir reçu la confirmation que votre abonnement a été activé, [télécharger et installer les applets de commande hello dernière version préliminaire travaux](https://github.com/jaredmoo/azure-powershell/releases). Cette version préliminaire est limitée. Contactez SaaSFeedback@microsoft.com pour toute question ou demande de prise en charge associées.*</span><span class="sxs-lookup"><span data-stu-id="72e5f-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="72e5f-137">Obtenir les scripts d’application hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="72e5f-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="72e5f-138">Hello Wingtip SaaS scripts et code source d’applications sont disponibles dans hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) référentiel github.</span><span class="sxs-lookup"><span data-stu-id="72e5f-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="72e5f-139">[Étapes de scripts de Wingtip SaaS hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="72e5f-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="72e5f-140">Créer une base de données de compte de travail et un compte de travail</span><span class="sxs-lookup"><span data-stu-id="72e5f-140">Create a job account database and new job account</span></span>

<span data-ttu-id="72e5f-141">Ce didacticiel nécessite que vous utilisez PowerShell toocreate hello travail de base de données et le travail de compte.</span><span class="sxs-lookup"><span data-stu-id="72e5f-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="72e5f-142">Comme MSDB et l’Agent SQL, les travaux élastique utilise SQL Azure base de données toostore les définitions de travail, état du travail et l’historique.</span><span class="sxs-lookup"><span data-stu-id="72e5f-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="72e5f-143">Une fois que le compte de travail hello est créé, vous pouvez créer et surveiller les travaux immédiatement.</span><span class="sxs-lookup"><span data-stu-id="72e5f-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="72e5f-144">Ouvrir... \\Modules d’apprentissage\\gestion du schéma\\*SchemaManagement.ps1 de démonstration* Bonjour **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="72e5f-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="72e5f-145">Appuyez sur **F5** script de hello toorun.</span><span class="sxs-lookup"><span data-stu-id="72e5f-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="72e5f-146">Hello *SchemaManagement.ps1 de démonstration* script appelle hello *déployer-SchemaManagement.ps1* toocreate de script un *S2* base de données nommée **jobaccount** sur le serveur de catalogue hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="72e5f-147">Il crée ensuite le compte de travail hello, en passant de la base de données jobaccount hello comme un appel de création de compte de travail paramètre toohello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="72e5f-148">Créer un travail de toodeploy nouveaux référence données tooall clients</span><span class="sxs-lookup"><span data-stu-id="72e5f-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="72e5f-149">Chaque base de données client inclut un ensemble de types lieu qui définissent le type hello d’événements qui sont hébergés au niveau d’un lieu.</span><span class="sxs-lookup"><span data-stu-id="72e5f-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="72e5f-150">Dans cet exercice, vous déployez un types lieu supplémentaires de mise à jour tooall hello client bases de données tooadd deux : *Moto course* et *natation Club*.</span><span class="sxs-lookup"><span data-stu-id="72e5f-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="72e5f-151">Ces types de lieu correspondent image d’arrière-plan toohello que vous voyez dans l’application d’événements hello client.</span><span class="sxs-lookup"><span data-stu-id="72e5f-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="72e5f-152">Cliquez sur hello lieu Type menu déroulant et valider que des options de type lieu seulement 10 sont disponibles, et plus précisément que 'Moto course' et 'Natation Club' ne figurent pas dans la liste de hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="72e5f-153">Maintenant nous allons créer un Bonjour tooupdate de travail *VenueTypes* table dans toutes les bases de données de client hello et ajouter de nouveaux types de salle hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="72e5f-154">toocreate une nouvelle tâche, nous utilisons un ensemble de tâches créées dans la base de données jobaccount hello lors de la création de compte de travail hello des procédures stockées système.</span><span class="sxs-lookup"><span data-stu-id="72e5f-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="72e5f-155">Ouvrez SSMS et connecter le serveur de catalogue toohello : catalogue -\<utilisateur\>. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="72e5f-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="72e5f-156">Également connecter toohello client serveur : tenants1 -\<utilisateur\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="72e5f-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="72e5f-157">Parcourir toohello *contosoconcerthall* base de données sur hello *tenants1* serveur et requête hello *VenueTypes* tooconfirm de table qui *Moto course*  et *natation Club* **ne sont pas** dans la liste des résultats hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="72e5f-158">Fichier ouvert hello... \\Modules d’apprentissage\\gestion du schéma\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="72e5f-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="72e5f-159">Modifier l’instruction de hello : définissez @wtpUser = &lt;utilisateur&gt; et le remplacer par une valeur utilisateur hello utilisée lorsque vous avez déployé l’application de Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="72e5f-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="72e5f-160">Assurez-vous que vous êtes connecté toohello jobaccount base de données, puis appuyez sur **F5** pour exécuter le script de hello</span><span class="sxs-lookup"><span data-stu-id="72e5f-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="72e5f-161">**SP\_ajouter\_cible\_groupe** crée le nom du groupe cible hello DemoServerGroup, maintenant nous avons besoin de membres de cibles tooadd.</span><span class="sxs-lookup"><span data-stu-id="72e5f-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="72e5f-162">**SP\_ajouter\_cible\_groupe\_membre** ajoute un *server* cibler un type de membre qui juge toutes les bases de données dans le serveur (Notez il s’agit de hello tenants1-&lt; Utilisateur&gt; serveur contenant les bases de données clientes hello) au moment du travail de l’exécution doit être incluse dans la tâche de hello, hello deuxième consiste à ajouter un *base de données* cibler un type de membre, en particulier hello () 'or' de la base de données basetenantdb) qui réside sur le catalogue -&lt;utilisateur&gt; server et enfin une autre *base de données* groupe membre type tooinclude hello adhocanalytics base de données cible qui est utilisé dans un prochain didacticiel.</span><span class="sxs-lookup"><span data-stu-id="72e5f-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="72e5f-163">**sp\_add\_job** crée une tâche appelée « Reference Data Deployment » (Déploiement des données de référence).</span><span class="sxs-lookup"><span data-stu-id="72e5f-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="72e5f-164">**SP\_ajouter\_jobstep** crée l’étape de travail hello contenant T-SQL commande texte tooupdate hello table de référence, VenueTypes</span><span class="sxs-lookup"><span data-stu-id="72e5f-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="72e5f-165">vues restantes de Hello dans le script de hello affichent existence hello d’objets de hello et de surveiller l’exécution du travail.</span><span class="sxs-lookup"><span data-stu-id="72e5f-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="72e5f-166">Utilisez ces valeur d’état requêtes tooreview hello Bonjour **cycle de vie** toodetermine colonne lors de la tâche de hello terminée avec succès sur toutes les bases de données client et les bases de données supplémentaires hello deux contenant la table de référence hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="72e5f-167">Dans SSMS, recherchez toohello *contosoconcerthall* base de données sur hello *tenants1* serveur et requête hello *VenueTypes* tooconfirm de table qui *Moto Course* et *natation Club* **sont** maintenant dans la liste des résultats hello.</span><span class="sxs-lookup"><span data-stu-id="72e5f-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="72e5f-168">Créer un index de table de référence de projet toomanage hello</span><span class="sxs-lookup"><span data-stu-id="72e5f-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="72e5f-169">Exercice précédent toohello similaire cet exercice crée un index de hello de toorebuild de travail sur la clé primaire de la table de référence hello, une opération de gestion de base de données par défaut un administrateur peut s’exécuter après un chargement de données volumineux dans une table.</span><span class="sxs-lookup"><span data-stu-id="72e5f-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="72e5f-170">Créer un travail à l’aide de hello même travaux « système » des procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="72e5f-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="72e5f-171">Ouvrez SSMS et se connecter toohello catalogue -&lt;utilisateur&gt;. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="72e5f-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="72e5f-172">Fichier ouvert hello... \\Modules d’apprentissage\\gestion du schéma\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="72e5f-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="72e5f-173">Clic droit et sélectionnez connexion connect toohello catalogue -&lt;utilisateur&gt;. database.windows.net server, si vous êtes pas déjà connecté</span><span class="sxs-lookup"><span data-stu-id="72e5f-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="72e5f-174">Vérifiez que vous sont la base de données connectée toohello jobaccount, appuyez sur le script de hello toorun F5</span><span class="sxs-lookup"><span data-stu-id="72e5f-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="72e5f-175">sp\_add\_job crée un travail appelé « Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885 ».</span><span class="sxs-lookup"><span data-stu-id="72e5f-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="72e5f-176">SP\_ajouter\_jobstep crée l’étape de travail hello contenant l’index de T-SQL commande texte tooupdate hello</span><span class="sxs-lookup"><span data-stu-id="72e5f-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="72e5f-177">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="72e5f-177">Next steps</span></span>

<span data-ttu-id="72e5f-178">Dans ce tutoriel, vous avez appris à effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="72e5f-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="72e5f-179">Créer un tooquery de compte de travail sur plusieurs locataires</span><span class="sxs-lookup"><span data-stu-id="72e5f-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="72e5f-180">Mettre à jour les données dans toutes les bases de données de locataire</span><span class="sxs-lookup"><span data-stu-id="72e5f-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="72e5f-181">Créer un index sur une table dans toutes les bases de données de locataire</span><span class="sxs-lookup"><span data-stu-id="72e5f-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="72e5f-182">Didacticiel sur les analyses ad hoc</span><span class="sxs-lookup"><span data-stu-id="72e5f-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="72e5f-183">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="72e5f-183">Additional resources</span></span>

* [<span data-ttu-id="72e5f-184">D’autres didacticiels qui reposent sur hello déploiement d’application Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="72e5f-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="72e5f-185">Gestion des bases de données cloud avec montée en charge</span><span class="sxs-lookup"><span data-stu-id="72e5f-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="72e5f-186">Créer et gérer des bases de données cloud avec montée en charge</span><span class="sxs-lookup"><span data-stu-id="72e5f-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
