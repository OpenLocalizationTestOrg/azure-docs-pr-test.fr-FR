---
title: "bibliothèque de client de base de données élastique dernière aaaUpgrade toohello | Documents Microsoft"
description: "Mettre à niveau des applications et des bibliothèques à l’aide de Nuget"
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 0a546510-76e7-465e-9271-f15ff0cfa959
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: ddove
ms.openlocfilehash: cc2c9179be4c53ca59cd24d832127cf277c6e695
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-an-app-toouse-hello-latest-elastic-database-client-library"></a><span data-ttu-id="622c2-103">Mise à niveau d’une bibliothèque cliente de base de données élastique plus récente d’application toouse hello</span><span class="sxs-lookup"><span data-stu-id="622c2-103">Upgrade an app toouse hello latest elastic database client library</span></span>
<span data-ttu-id="622c2-104">Nouvelles versions de hello [bibliothèque cliente de base de données élastique](sql-database-elastic-database-client-library.md) sont disponibles via l’interface de gestionnaire de NuGetPackage NuGetand hello dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="622c2-104">New versions of hello [Elastic Database client library](sql-database-elastic-database-client-library.md) are  available through NuGetand hello NuGetPackage Manager interface in Visual Studio.</span></span> <span data-ttu-id="622c2-105">Mises à niveau contiennent des correctifs de bogues et prise en charge de nouvelles fonctionnalités de la bibliothèque cliente de hello.</span><span class="sxs-lookup"><span data-stu-id="622c2-105">Upgrades contain bug fixes and support for new capabilities of hello client library.</span></span>

<span data-ttu-id="622c2-106">**Pour la version la plus récente hello :** accédez trop[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="622c2-106">**For hello latest version:** Go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span>

<span data-ttu-id="622c2-107">Régénérez votre application avec la nouvelle bibliothèque de hello, ainsi que de modifier votre gestionnaire de carte de partitions les métadonnées existantes stockées dans votre toosupport nouvelles fonctionnalités de bases de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="622c2-107">Rebuild your application with hello new library, as well as change your existing Shard Map Manager metadata stored in your Azure SQL Databases toosupport new features.</span></span>

<span data-ttu-id="622c2-108">Effectuez ces étapes dans l’ordre garantit que des versions anciennes de la bibliothèque cliente de hello ne sont plus présentes dans votre environnement lorsque des objets de métadonnées sont mises à jour, ce qui signifie que les objets de métadonnées de l’ancienne version ne sont pas créées après la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="622c2-108">Performing these steps in order ensures that old versions of hello client library are no longer present in your environment when metadata objects are updated, which means that old-version metadata objects won’t be created after upgrade.</span></span>   

## <a name="upgrade-steps"></a><span data-ttu-id="622c2-109">Étapes de la mise à niveau</span><span class="sxs-lookup"><span data-stu-id="622c2-109">Upgrade steps</span></span>
<span data-ttu-id="622c2-110">**1. Mettez à niveau vos applications.**</span><span class="sxs-lookup"><span data-stu-id="622c2-110">**1. Upgrade your applications.**</span></span> <span data-ttu-id="622c2-111">Dans Visual Studio, de téléchargement et de référence hello client bibliothèque version la plus récente dans l’ensemble de vos projets de développement qui utilisent la bibliothèque de hello ; reconstruire, puis déployer.</span><span class="sxs-lookup"><span data-stu-id="622c2-111">In Visual Studio, download and reference hello latest client library version into all of your development projects that use hello library; then rebuild and deploy.</span></span> 

* <span data-ttu-id="622c2-112">Dans votre solution Visual Studio, sélectionnez **Outils** --> **Gestionnaire de package NuGet** -->  **Gérer les packages NuGet pour la solution**.</span><span class="sxs-lookup"><span data-stu-id="622c2-112">In your Visual Studio solution, select **Tools** --> **NuGet Package Manager** -->  **Manage NuGet Packages for Solution**.</span></span> 
* <span data-ttu-id="622c2-113">(Visual Studio 2013) Dans le volet gauche de hello, sélectionnez **mises à jour**, puis sélectionnez hello **mise à jour** bouton sur le package de hello **bibliothèque cliente élastique montée en puissance d’Azure SQL de base de données** qui s’affiche dans hello fenêtre.</span><span class="sxs-lookup"><span data-stu-id="622c2-113">(Visual Studio 2013) In hello left panel, select **Updates**, and then select hello **Update** button on hello package **Azure SQL Database Elastic Scale Client Library** that appears in hello window.</span></span>
* <span data-ttu-id="622c2-114">(Visual Studio 2015) Définir trop de zone de filtre hello**mise à niveau disponible**.</span><span class="sxs-lookup"><span data-stu-id="622c2-114">(Visual Studio 2015) Set hello Filter box too**Upgrade available**.</span></span> <span data-ttu-id="622c2-115">Hello package tooupdate, puis cliquez sur hello **mise à jour** bouton.</span><span class="sxs-lookup"><span data-stu-id="622c2-115">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="622c2-116">(Visual Studio 2017) Haut hello de boîte de dialogue hello, sélectionnez **mises à jour**.</span><span class="sxs-lookup"><span data-stu-id="622c2-116">(Visual Studio 2017) At hello top of hello dialog, select **Updates**.</span></span> <span data-ttu-id="622c2-117">Hello package tooupdate, puis cliquez sur hello **mise à jour** bouton.</span><span class="sxs-lookup"><span data-stu-id="622c2-117">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="622c2-118">Générez et déployez les applications.</span><span class="sxs-lookup"><span data-stu-id="622c2-118">Build and Deploy.</span></span> 

<span data-ttu-id="622c2-119">**2. Mettez à niveau vos scripts.**</span><span class="sxs-lookup"><span data-stu-id="622c2-119">**2. Upgrade your scripts.**</span></span> <span data-ttu-id="622c2-120">Si vous utilisez **PowerShell** toomanage de partitions, les scripts [télécharger la version de la nouvelle bibliothèque hello](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) et copiez-le dans le répertoire hello à partir de laquelle vous exécutez des scripts.</span><span class="sxs-lookup"><span data-stu-id="622c2-120">If you are using **PowerShell** scripts toomanage shards, [download hello new library version](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) and copy it into hello directory from which you execute scripts.</span></span> 

<span data-ttu-id="622c2-121">**3. Mettez à niveau votre service de fractionnement/fusion.**</span><span class="sxs-lookup"><span data-stu-id="622c2-121">**3. Upgrade your split-merge service.**</span></span> <span data-ttu-id="622c2-122">Si vous utilisez hello élastique de base de données outil de fusion et fractionnement tooreorganize données partitionné, [télécharger et déployer la version la plus récente de l’outil de hello hello](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span><span class="sxs-lookup"><span data-stu-id="622c2-122">If you use hello elastic database split-merge tool tooreorganize sharded data, [download and deploy hello latest version of hello tool](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span></span> <span data-ttu-id="622c2-123">Mise à niveau une procédure détaillée pour hello Service peut être trouvé [ici](sql-database-elastic-scale-overview-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="622c2-123">Detailed upgrade steps for hello Service can be found [here](sql-database-elastic-scale-overview-split-and-merge.md).</span></span> 

<span data-ttu-id="622c2-124">**4. Mettez à niveau vos bases de données du Gestionnaire de cartes de partitions**.</span><span class="sxs-lookup"><span data-stu-id="622c2-124">**4. Upgrade your Shard Map Manager databases**.</span></span> <span data-ttu-id="622c2-125">Mettre à niveau les métadonnées hello prise en charge de vos cartes de partitions dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="622c2-125">Upgrade hello metadata supporting your Shard Maps in Azure SQL Database.</span></span>  <span data-ttu-id="622c2-126">Vous pouvez effectuer cette opération avec PowerShell ou C#.</span><span class="sxs-lookup"><span data-stu-id="622c2-126">There are two ways you can accomplish this, using PowerShell or C#.</span></span> <span data-ttu-id="622c2-127">Ces deux options sont expliquées ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="622c2-127">Both options are shown below.</span></span>

<span data-ttu-id="622c2-128">***Option 1 : mise à niveau des métadonnées à l’aide de PowerShell***</span><span class="sxs-lookup"><span data-stu-id="622c2-128">***Option 1: Upgrade metadata using PowerShell***</span></span>

1. <span data-ttu-id="622c2-129">Téléchargement hello dernière version de ligne de commande pour NuGet à partir de [ici](http://nuget.org/nuget.exe) et enregistrer tooa dossier.</span><span class="sxs-lookup"><span data-stu-id="622c2-129">Download hello latest command-line utility for NuGet from [here](http://nuget.org/nuget.exe) and save tooa folder.</span></span> 
2. <span data-ttu-id="622c2-130">Ouvrez une invite de commandes, accédez toohello même dossier et problème hello commande :`nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span><span class="sxs-lookup"><span data-stu-id="622c2-130">Open a Command Prompt, navigate toohello same folder, and issue hello command: `nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span></span>
3. <span data-ttu-id="622c2-131">Recherchez le sous-dossier toohello contenant hello nouvelle DLL version du client que vous avez simplement téléchargé, par exemple :`cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span><span class="sxs-lookup"><span data-stu-id="622c2-131">Navigate toohello subfolder containing hello new client DLL version you have just downloaded, for example: `cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span></span>
4. <span data-ttu-id="622c2-132">Télécharger scriptlet mise à niveau du client de base de données élastique hello de hello [centre de scripts](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), et enregistrez-le dans hello même dossier contenant hello DLL.</span><span class="sxs-lookup"><span data-stu-id="622c2-132">Download hello elastic database client upgrade scriptlet from hello [Script Center](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), and save it into hello same folder containing hello DLL.</span></span>
5. <span data-ttu-id="622c2-133">À partir de ce dossier, exécutez « PowerShell.\upgrade.ps1 » à partir de l’invite de commandes hello et suivez les invites de hello.</span><span class="sxs-lookup"><span data-stu-id="622c2-133">From that folder, run “PowerShell .\upgrade.ps1” from hello command prompt and follow hello prompts.</span></span>

<span data-ttu-id="622c2-134">***Option 2 : mise à niveau des métadonnées à l’aide de C#***</span><span class="sxs-lookup"><span data-stu-id="622c2-134">***Option 2: Upgrade metadata using C#***</span></span>

<span data-ttu-id="622c2-135">Vous pouvez également créer une application Visual Studio qui ouvre votre ShardMapManager, effectue une itération sur toutes les partitions et effectue la mise à jour des métadonnées hello en appelant des méthodes de hello [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) et [ UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) comme dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="622c2-135">Alternatively, create a Visual Studio application that opens your ShardMapManager, iterates over all shards, and performs hello metadata upgrade by calling hello methods [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) and [UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) as in this example:</span></span> 

    ShardMapManager smm =
       ShardMapManagerFactory.GetSqlShardMapManager
       (connStr, ShardMapManagerLoadPolicy.Lazy); 
    smm.UpgradeGlobalStore(); 

    foreach (ShardLocation loc in
     smm.GetDistinctShardLocations()) 
    {   
       smm.UpgradeLocalStore(loc); 
    } 

<span data-ttu-id="622c2-136">Ces méthodes de mise à niveau des métadonnées peuvent être appliquées plusieurs fois sans risque.</span><span class="sxs-lookup"><span data-stu-id="622c2-136">These techniques for metadata upgrades can be applied multiple times without harm.</span></span> <span data-ttu-id="622c2-137">Par exemple, si une version antérieure du client crée par inadvertance une partition une fois que vous avez déjà mis à jour, vous pouvez réexécuter mise à niveau sur toutes les partitions tooensure que hello dernière version de métadonnées est présente dans l’ensemble de votre infrastructure.</span><span class="sxs-lookup"><span data-stu-id="622c2-137">For example, if an older client version inadvertently creates a shard after you have already updated, you can run upgrade again across all shards tooensure that hello latest metadata version is present throughout your infrastructure.</span></span> 

<span data-ttu-id="622c2-138">**Remarque :** à-date de publication de nouvelles versions de la bibliothèque cliente de hello continuer toowork avec les versions antérieures de métadonnées du Gestionnaire de carte de partitions hello sur la base de données SQL Azure et vice versa.</span><span class="sxs-lookup"><span data-stu-id="622c2-138">**Note:**  New versions of hello client library published to-date continue toowork with prior versions of hello Shard Map Manager metadata on Azure SQL DB, and vice-versa.</span></span>   <span data-ttu-id="622c2-139">Toutefois, parti tootake de certaines des nouvelles fonctionnalités de hello dans hello dernière version du client, métadonnées doit toobe mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="622c2-139">However tootake advantage of some of hello new features in hello latest client, metadata needs toobe upgraded.</span></span>   <span data-ttu-id="622c2-140">Notez que les mises à niveau de métadonnées n’affectera pas les données utilisateur ou les données spécifiques à l’application, seuls les objets créés et utilisés par hello Gestionnaire de carte de partitions.</span><span class="sxs-lookup"><span data-stu-id="622c2-140">Note that metadata upgrades will not affect any user-data or application-specific data, only objects created and used by hello Shard Map Manager.</span></span>  <span data-ttu-id="622c2-141">Et applications continuent toooperate via la séquence de mise à niveau hello décrite ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="622c2-141">And applications continue toooperate through hello upgrade sequence described above.</span></span> 

## <a name="elastic-database-client-version-history"></a><span data-ttu-id="622c2-142">Historique des versions du client des bases de données élastiques</span><span class="sxs-lookup"><span data-stu-id="622c2-142">Elastic database client version history</span></span>
<span data-ttu-id="622c2-143">Pour l’historique de version, accédez trop[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span><span class="sxs-lookup"><span data-stu-id="622c2-143">For version history, go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]:./media/sql-database-elastic-scale-upgrade-client-library/nuget-upgrade.png

