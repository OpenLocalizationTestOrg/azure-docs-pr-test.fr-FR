---
title: "aaaFailover géo-réplication active - base de données SQL Azure et les groupes | Documents Microsoft"
description: "Groupes de basculement automatique avec la géo-réplication active permet toosetup 4 réplicas de base de données dans des centres de données Azure de hello et basculement autoomatically dans l’événement hello d’une indisponibilité."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="d0a00-103">Vue d’ensemble : groupes de basculement et géo-réplication active</span><span class="sxs-lookup"><span data-stu-id="d0a00-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="d0a00-104">Géo-réplication Active vous permet de tooconfigure toofour lisible secondaire bases de données Bonjour emplacements (régions) du centre de données identiques ou différentes.</span><span class="sxs-lookup"><span data-stu-id="d0a00-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="d0a00-105">Bases de données secondaires sont disponibles pour l’interrogation et de basculement en cas de hello de données center hello ou une interruption incapacité tooconnect toohello base de données primaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="d0a00-106">Hello basculement doit être lancée manuellement par l’application hello d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="d0a00-107">Après le basculement, primaire hello possède un point de terminaison de connexion différents.</span><span class="sxs-lookup"><span data-stu-id="d0a00-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="d0a00-108">La géo-réplication active est disponible pour toutes les bases de données de tous les niveaux de service, dans toutes les régions.</span><span class="sxs-lookup"><span data-stu-id="d0a00-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="d0a00-109">Groupes de basculement automatique de la base de données SQL Azure (en version préliminaire) est un tooautomatically fonctionnalité conçue de base de données SQL gérer la relation de géo-réplication, la connectivité et le basculement à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="d0a00-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="d0a00-110">Avec elle, hello clients gain hello capacité tooautomatically récupérer plusieurs bases de données associées dans la région secondaire hello après défaillance régional ou d’autres événements non planifiés qui entraînent une perte complète ou partielle de hello du service de base de données SQL disponibilité dans la région principale de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="d0a00-111">En outre, ils peuvent utiliser hello des bases de données secondaires lisibles toooffload en lecture seule les charges de travail.</span><span class="sxs-lookup"><span data-stu-id="d0a00-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="d0a00-112">Étant donné que les groupes de basculement automatique impliquant plusieurs bases de données que doivent être configurés sur le serveur principal de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="d0a00-113">Les serveurs principaux et secondaires doivent être Bonjour même abonnement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="d0a00-114">Groupes de basculement automatique prend en charge la réplication de toutes les bases de données dans hello groupe tooonly un serveur secondaire dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="d0a00-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="d0a00-115">Géo-réplication Active, sans les groupes de basculement automatique, permet des bases de données secondaires too4 dans n’importe quelle région.</span><span class="sxs-lookup"><span data-stu-id="d0a00-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="d0a00-116">Si vous utilisez la géo-réplication active et pour tout échec de la base de données primaire, ou simplement les toobe besoins mis hors connexion, vous pouvez lancer tooany de basculement de vos bases de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="d0a00-117">Lorsque le basculement est activé tooone de bases de données secondaires hello, toutes les autres bases de données secondaires sont automatiquement lié toohello nouveau réplica principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="d0a00-118">Si vous utilisez un basculement automatique regroupe toute coupure de courant qui a un impact sur une ou plusieurs des bases de données hello dans les résultats du groupe hello dans le basculement automatique et de récupération de base de données (en version préliminaire) toomanage.</span><span class="sxs-lookup"><span data-stu-id="d0a00-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="d0a00-119">Vous pouvez configurer la stratégie de basculement automatique hello qui répond le mieux aux besoins de votre application, ou vous pouvez annuler l’abonnement et utiliser l’activation manuelle.</span><span class="sxs-lookup"><span data-stu-id="d0a00-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="d0a00-120">D’autre part, les groupes de basculement automatique (en préversion) fournissent des points de terminaison d’écouteur de lecture-écriture et de lecture seule qui restent inchangés lors des basculements.</span><span class="sxs-lookup"><span data-stu-id="d0a00-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="d0a00-121">Si vous utilisez l’activation du basculement manuel ou automatique, le basculement bascule toutes les bases de données secondaires dans hello groupe tooprimary.</span><span class="sxs-lookup"><span data-stu-id="d0a00-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="d0a00-122">Une fois le basculement de base de données hello est terminée, un enregistrement DNS hello est automatiquement mis à jour tooredirect hello points d’arrêt toohello nouvelle zone de.</span><span class="sxs-lookup"><span data-stu-id="d0a00-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="d0a00-123">Vous pouvez gérer la réplication et le basculement d’une base de données individuelle ou d’un ensemble de bases de données sur un serveur ou dans un pool élastique à l’aide de la géo-réplication active.</span><span class="sxs-lookup"><span data-stu-id="d0a00-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="d0a00-124">Vous pouvez effectuer à l’aide de ce hello [portail Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), ou hello [API REST](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="d0a00-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="d0a00-125">Après le basculement, vérifiez les conditions d’authentification hello pour votre serveur et de la base de données sont configurées sur le nouveau réplica principal de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="d0a00-126">Pour plus d’informations, consultez [Gestion de la sécurité de la base de données SQL Azure après la récupération d’urgence](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="d0a00-127">Cela s’applique les deux groupes de géo-réplication et le basculement automatique des tooactive (en version préliminaire).</span><span class="sxs-lookup"><span data-stu-id="d0a00-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="d0a00-128">Hello tire parti de géo-réplication Active [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technologie de SQL Server tooasynchronously répliquer les transactions validées sur hello principal de la base de données tooa base de données secondaire à l’aide d’isolement d’instantané de lecture validée (RCSI).</span><span class="sxs-lookup"><span data-stu-id="d0a00-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="d0a00-129">Les groupes de basculement automatique fournissent une sémantique de groupe hello au-dessus de géo-réplication active mais hello même mécanisme de réplication asynchrone est utilisé.</span><span class="sxs-lookup"><span data-stu-id="d0a00-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="d0a00-130">Tout en n’importe quel point donné, base de données secondaire hello peut être légèrement derrière la base de données primaire hello, hello de données secondaire est garantie toonever que les transactions partielles.</span><span class="sxs-lookup"><span data-stu-id="d0a00-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="d0a00-131">La redondance entre régions permet de récupérer de tooquickly applications à partir d’une perte permanente d’un centre de données entière ou des parties d’un centre de données provoquée par des catastrophes naturelles, une erreur humaine grave ou un acte malveillant.</span><span class="sxs-lookup"><span data-stu-id="d0a00-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="d0a00-132">données RPO Hello spécifiques, consultez [vue d’ensemble de continuité des activités](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="d0a00-133">Hello figure suivante montre un exemple de géo-réplication active configurée avec un serveur principal dans la région de hello Amérique du Nord et secondaire dans la région de hello Amérique du Sud.</span><span class="sxs-lookup"><span data-stu-id="d0a00-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![Relation de géo-réplication](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="d0a00-135">Étant donné que les bases de données secondaires hello sont lisibles, ils peuvent être toooffload utilisé en lecture seule des charges de travail tels que travaux de création de rapports.</span><span class="sxs-lookup"><span data-stu-id="d0a00-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="d0a00-136">Si vous utilisez la géo-réplication active, il est de base de données secondaire toocreate possible hello Bonjour même région avec hello principal, mais elle n’augmente pas de défaillances de l’application hello résilience toocatastrophic.</span><span class="sxs-lookup"><span data-stu-id="d0a00-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="d0a00-137">Si vous utilisez des groupes de basculement automatique (en préversion), votre base de données secondaire est toujours créée dans une région différente.</span><span class="sxs-lookup"><span data-stu-id="d0a00-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="d0a00-138">En outre toodisaster récupération géo-réplication active est utilisable dans hello les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="d0a00-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="d0a00-139">**Migration de base de données**: vous pouvez utiliser la géo-réplication active toomigrate tooanother d’un serveur en ligne une base de données avec un temps mort minimal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="d0a00-140">**Mises à niveau de l’application**: vous pouvez créer une base de données secondaire supplémentaire faisant office de copie de restauration automatique lors des mises à niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="d0a00-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="d0a00-141">tooachieve véritable continuité, ajout d’une redondance de base de données entre les centres de données n'est qu’une partie de la solution de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="d0a00-142">Récupération d’une application (service) de bout en bout après qu’une défaillance catastrophique requiert la récupération de tous les composants qui constituent le service de hello et tous les services dépendants.</span><span class="sxs-lookup"><span data-stu-id="d0a00-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="d0a00-143">Le logiciel client hello (par exemple, un navigateur avec un code JavaScript personnalisé), de serveurs web frontaux, stockage et DNS sont des exemples de ces composants.</span><span class="sxs-lookup"><span data-stu-id="d0a00-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="d0a00-144">Il est essentiel que tous les composants sont résilient toohello mêmes défaillances et redeviennent disponibles dans hello temps de récupération (RTO) de votre application.</span><span class="sxs-lookup"><span data-stu-id="d0a00-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="d0a00-145">Par conséquent, vous devez tooidentify tous les services dépendants et comprenez les garanties de hello et de fonctionnalités qu’ils fournissent.</span><span class="sxs-lookup"><span data-stu-id="d0a00-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="d0a00-146">Puis, vous devez prendre les mesures appropriées tooensure que vos fonctions de service au cours de hello basculement des services hello dont il dépend.</span><span class="sxs-lookup"><span data-stu-id="d0a00-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="d0a00-147">Pour plus d’informations sur la conception de solutions pour la récupération d’urgence, consultez la page [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md) (Conception de solutions cloud pour la récupération d’urgence à l’aide de la géo-réplication active).</span><span class="sxs-lookup"><span data-stu-id="d0a00-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="d0a00-148">Fonctionnalités de la géo-réplication active</span><span class="sxs-lookup"><span data-stu-id="d0a00-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="d0a00-149">fonctionnalité de géo-réplication active Hello fournit hello suivant des fonctions essentielles :</span><span class="sxs-lookup"><span data-stu-id="d0a00-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="d0a00-150">**Réplication asynchrone automatique**: vous ne pouvez créer une base de données secondaire en ajoutant tooan de base de données existante.</span><span class="sxs-lookup"><span data-stu-id="d0a00-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="d0a00-151">Hello secondaire peut être créé dans n’importe quel serveur de base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="d0a00-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="d0a00-152">Une fois créé, base de données secondaire hello est remplie avec les données hello copiées à partir de la base de données primaire hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="d0a00-153">Ce processus est appelé amorçage.</span><span class="sxs-lookup"><span data-stu-id="d0a00-153">This process is known as seeding.</span></span> <span data-ttu-id="d0a00-154">Une fois que la base de données secondaire a été créée et amorcée, mises à jour de la base de données primaire toohello sont en mode asynchrone répliquées automatiquement toohello de base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="d0a00-155">Réplication asynchrone signifie que les transactions sont validées sur la base de données primaire hello avant qu’elles soient répliquées toohello de base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="d0a00-156">**Bases de données secondaires lisibles**: une application peut accéder à une base de données secondaire pour les opérations en lecture seule à l’aide de hello identiques ou différentes entités de sécurité utilisé pour accéder à la base de données primaire hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="d0a00-157">Hello bases de données secondaires fonctionnent en isolement d’instantané en mode tooensure la réplication de mises à jour hello Hello principal (relecture du journal) n’est pas retardée par les requêtes exécutées sur hello secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="d0a00-158">la relecture du journal Hello est retardée sur une base de données secondaire hello s’il n’y met à jour de schéma qu’il reçoit de hello principal qui nécessitent un verrou de schéma sur la base de données secondaire hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="d0a00-159">**Plusieurs bases de données secondaires lisibles**: deux ou plusieurs bases de données secondaires augmentent la redondance et niveau de protection de la base de données primaire hello et application.</span><span class="sxs-lookup"><span data-stu-id="d0a00-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="d0a00-160">Si plusieurs bases de données secondaire existent, application hello reste protégée, même si une des bases de données secondaires hello échoue.</span><span class="sxs-lookup"><span data-stu-id="d0a00-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="d0a00-161">Si seule la base de données secondaire, et qu’il échoue, l’application hello est exposée risque toohigher avant la création d’une base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="d0a00-162">Si vous utilisez toobuild de géo-réplication active une application distribuée globalement et besoin d’accès en lecture seule de tooprovide toodata dans des régions plus de 4, vous pouvez créer secondaire d’une base de données secondaire (processus appelé chaînage).</span><span class="sxs-lookup"><span data-stu-id="d0a00-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="d0a00-163">De cette manière, vous pouvez assurer une mise à l’échelle quasiment illimitée pour la réplication de base de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="d0a00-164">En outre, chaînage réduit la charge de hello de réplication à partir de la base de données primaire hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="d0a00-165">trouver un compromis Hello est hello un retard de réplication plus important sur les bases de données secondaires hello la plupart de la feuille.</span><span class="sxs-lookup"><span data-stu-id="d0a00-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="d0a00-166">.</span><span class="sxs-lookup"><span data-stu-id="d0a00-166">.</span></span> 
   >

* <span data-ttu-id="d0a00-167">**Prise en charge des bases de données de pool élastique** : la géo-réplication active peut être configurée pour toute base de données faisant partie d’un pool élastique.</span><span class="sxs-lookup"><span data-stu-id="d0a00-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="d0a00-168">base de données secondaire Hello peut être dans un autre pool élastique.</span><span class="sxs-lookup"><span data-stu-id="d0a00-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="d0a00-169">Pour les bases de données normales, hello secondaire peut être un pool élastique et vice versa, que les niveaux de service hello sont hello même.</span><span class="sxs-lookup"><span data-stu-id="d0a00-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="d0a00-170">**Niveau de performance configurables de base de données secondaire hello**: une base de données secondaire peut être créée avec un niveau de performance inférieur à hello principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="d0a00-171">Bases de données primaires et secondaire sont nécessaires toohave hello même niveau de service.</span><span class="sxs-lookup"><span data-stu-id="d0a00-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="d0a00-172">Cette option n’est pas recommandée pour les applications avec l’activité d’écriture de la base de données haute, car le décalage de réplication plus important hello augmente le risque de hello de perte de données après un basculement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="d0a00-173">En outre, une fois les performances de l’application hello de basculement sont affectée tant que hello nouveau principal sont tooa mis à niveau des performances supérieures au niveau.</span><span class="sxs-lookup"><span data-stu-id="d0a00-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="d0a00-174">graphique de pourcentage journal e/s sur le portail Azure Hello fournit un bon moyen tooestimate hello au niveau minimal de performances de hello secondaire qui est la charge de la réplication hello toosustain requis.</span><span class="sxs-lookup"><span data-stu-id="d0a00-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="d0a00-175">Par exemple, si votre base de données primaire est P6 (1000 DTU) et son journal % d’e/s est hello 50 % secondaire a besoin au moins toobe P4 (DTU 500).</span><span class="sxs-lookup"><span data-stu-id="d0a00-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="d0a00-176">Vous pouvez également récupérer les données d’à l’aide d’e/s hello journal [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) ou [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) des vues de base de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="d0a00-177">Pour plus d’informations sur les niveaux de performance de base de données SQL hello, consultez [les options de base de données SQL et les performances](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="d0a00-178">**Contrôlée par l’utilisateur de basculement et de restauration**: une base de données secondaire peut être explicitement le rôle principal de toohello commuté à tout moment par application hello ou un utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="d0a00-179">Pendant un Bonjour pannes réelles option « non planifiée » doit être utilisée, ce qui promeut immédiatement toobe secondaire hello principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="d0a00-180">Lorsque les principal défaillant hello récupère et est disponible à nouveau, hello système automatiquement hello de marques récupérée principal comme un serveur secondaire et mettre à jour avec le nouveau réplica principal de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="d0a00-181">En raison de la nature asynchrone de toohello de réplication, une petite quantité de données peut être perdue lors des basculements non planifiés si un serveur principal échoue avant sa réplication toohello modifications hello plus récent secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="d0a00-182">Lorsqu’un principal avec plusieurs serveurs secondaires et bascule, système de hello reconfigure automatiquement les relations de réplication hello et hello liens restant toohello de bases de données secondaires nouvellement promu principal sans aucune intervention de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d0a00-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="d0a00-183">Une fois la panne hello qui a provoqué le basculement de hello est atténuée, il peut être région primaire du toohello application hello tooreturn souhaitable.</span><span class="sxs-lookup"><span data-stu-id="d0a00-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="d0a00-184">toodo que, la commande de basculement hello doit être appelée avec hello option « planifié ».</span><span class="sxs-lookup"><span data-stu-id="d0a00-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="d0a00-185">**Synchronisation des informations d’identification et les règles de pare-feu**: nous vous recommandons d’utiliser [règles de pare-feu de base de données](sql-database-firewall-configure.md) pour les bases de données de géo-répliquées pour ces règles peuvent être répliquées avec tooensure de base de données hello toutes les bases de données secondaires ont Bonjour les mêmes règles de pare-feu que hello principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="d0a00-186">Cette approche évite de hello pour les clients toomanually configurer et gérer des règles de pare-feu sur les serveurs hébergeant les bases de données primaire et secondaire hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="d0a00-187">De même, à l’aide de [contenait des utilisateurs de base de données](sql-database-manage-logins.md) données accès garantit l’unicité de bases de données primaires et secondaire ont toujours hello même utilisateur des informations d’identification lors d’un basculement, il n’existe aucune interruption due toomismatches avec des connexions et mots de passe.</span><span class="sxs-lookup"><span data-stu-id="d0a00-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="d0a00-188">Ajout de hello de [Azure Active Directory](../active-directory/active-directory-whatis.md), les clients peuvent gérer l’accès tooboth principaux et secondaires bases de données utilisateur et en éliminant hello besoin pour la gestion des informations d’identification dans les bases de données complètement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="d0a00-189">Fonctionnalités des groupes de basculement automatique</span><span class="sxs-lookup"><span data-stu-id="d0a00-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="d0a00-190">La fonction de groupes de basculement automatique fournit une abstraction puissante de la géo-réplication active en prenant en charge la réplication et le basculement automatique au niveau du groupe.</span><span class="sxs-lookup"><span data-stu-id="d0a00-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="d0a00-191">En outre, il supprime chaîne de connexion SQL hello nécessité toochange hello après le basculement en fournissant des points de terminaison hello écouteur supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="d0a00-192">**Groupe de basculement** : un ou plusieurs groupes de basculement peuvent être créés entre deux serveurs situés dans des régions différentes (serveurs primaire et secondaire).</span><span class="sxs-lookup"><span data-stu-id="d0a00-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="d0a00-193">Chaque groupe peut inclure un ou plusieurs bases de données qui sont récupérées en tant qu’unité dans le cas où toutes ou certaines bases de données primaires deviennent indisponibles en raison de la panne tooan dans la région principale de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="d0a00-194">**Serveur principal**: un serveur qui héberge les bases de données primaires hello dans le groupe de basculement hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="d0a00-195">**Serveur secondaire**: un serveur qui héberge les bases de données secondaires hello dans le groupe de basculement hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="d0a00-196">serveur secondaire de Hello ne peut pas être Bonjour même région que le serveur principal de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="d0a00-197">**Ajout du groupe toofailover bases de données**: vous pouvez placer plusieurs bases de données au sein d’un serveur ou dans un élastique pool dans hello même groupe de basculement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="d0a00-198">Si vous ajoutez un groupe de toohello de base de données autonome, il crée automatiquement une base de données secondaire à l’aide de hello même niveau d’édition et les performances.</span><span class="sxs-lookup"><span data-stu-id="d0a00-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="d0a00-199">Si la base de données primaire hello est dans un pool élastique, hello secondaire est automatiquement créé dans le pool élastique de hello avec hello même nom.</span><span class="sxs-lookup"><span data-stu-id="d0a00-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="d0a00-200">Si vous ajoutez une base de données qui a déjà une base de données secondaire dans le serveur secondaire de hello, géo-réplication est héritée par groupe de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="d0a00-201">Lorsque vous ajoutez une base de données qui a déjà une base de données secondaire sur un serveur qui ne fait pas partie du groupe de basculement hello, une nouvelle base de données secondaire est créée dans le serveur secondaire de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="d0a00-202">**Écouteur du groupe de basculement en lecture-écriture**: la forme d’enregistrement CNAME DNS  **&lt;basculement-group-name&gt;. database.windows.net** qui pointe l’URL de serveur principal actuel toohello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="d0a00-203">Il permet de hello en lecture-écriture d’applications SQL tootransparently reconnecter toohello la base de données principale lorsque hello principale est modifiée après le basculement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="d0a00-204">**Écouteur de groupe de basculement en lecture seule**: la forme d’enregistrement CNAME DNS  **&lt;basculement-group-name&gt;. secondary.database.windows.net** qui pointe l’URL du serveur secondaire toohello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="d0a00-205">Il permet de hello en lecture seule des applications SQL tootransparently se connecter à l’aide de hello de la base de données toohello secondaire spécifiés les règles de l’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="d0a00-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="d0a00-206">Si vous le souhaitez, vous pouvez spécifier si vous souhaitez hello en lecture seule le trafic toobe automatiquement redirigés vers les serveur principal toohello lorsque le serveur secondaire de hello n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="d0a00-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="d0a00-207">**Stratégie de basculement automatique**: par défaut, le groupe de basculement hello est configuré avec une stratégie de basculement automatique.</span><span class="sxs-lookup"><span data-stu-id="d0a00-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="d0a00-208">Hello système déclencheurs basculement dès que hello défaillance est détectée.</span><span class="sxs-lookup"><span data-stu-id="d0a00-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="d0a00-209">Si vous souhaitez que le flux de travail de toocontrol hello basculement à partir de l’application hello, vous pouvez désactiver le basculement automatique.</span><span class="sxs-lookup"><span data-stu-id="d0a00-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="d0a00-210">**Basculement manuel**: vous pouvez opérer le basculement manuellement à tout moment, quelle que soit la configuration du basculement automatique hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="d0a00-211">Si la stratégie de basculement automatique n’est pas configuré le basculement manuel est requis toorecover des bases de données dans le groupe de basculement hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="d0a00-212">Vous pouvez lancer un basculement forcé ou convivial (avec synchronisation complète des données).</span><span class="sxs-lookup"><span data-stu-id="d0a00-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="d0a00-213">Hello ce dernier peut être utilisé toorelocate hello active toohello principal la région du serveur.</span><span class="sxs-lookup"><span data-stu-id="d0a00-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="d0a00-214">Lorsque le basculement est effectué les enregistrements DNS hello sont automatiquement mis à jour tooensure connectivité toohello correcte du serveur.</span><span class="sxs-lookup"><span data-stu-id="d0a00-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="d0a00-215">**Période de grâce avec perte de données**: étant donné que les bases de données hello principal et secondaire sont synchronisées à l’aide de la réplication asynchrone hello basculement peut entraîner une perte de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="d0a00-216">Vous pouvez personnaliser tooreflect de stratégie de basculement automatique hello toodata une perte de la tolérance de panne de votre application.</span><span class="sxs-lookup"><span data-stu-id="d0a00-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="d0a00-217">En configurant **GracePeriodWithDataLossHours**, vous pouvez contrôler la durée d’attente de système de hello avant de lancer le basculement de hello tooresult probablement une perte de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="d0a00-218">Lorsque système détecte que hello bases de données hello groupe sont toujours en ligne (par exemple, panne de hello uniquement affectées plan de contrôle de service hello), il active immédiatement un basculement hello avec la synchronisation complète des données (basculement convivial), quelle que soit la valeur de hello définir **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="d0a00-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="d0a00-219">Ce comportement garantit qu’il n’existe aucune perte de données lors de la récupération de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="d0a00-220">période de grâce de Hello prend effet uniquement quand un basculement convivial n’est pas possible.</span><span class="sxs-lookup"><span data-stu-id="d0a00-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="d0a00-221">Si la panne de hello est atténuée avant l’expiration de la période de grâce de hello, hello basculement n’est pas activée.</span><span class="sxs-lookup"><span data-stu-id="d0a00-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="d0a00-222">**Plusieurs groupes de basculement**: vous pouvez configurer plusieurs groupes de basculement pour hello même paire de mise à l’échelle de serveurs toocontrol hello des basculements.</span><span class="sxs-lookup"><span data-stu-id="d0a00-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="d0a00-223">Chaque groupe bascule indépendamment.</span><span class="sxs-lookup"><span data-stu-id="d0a00-223">Each group fails over independently.</span></span> <span data-ttu-id="d0a00-224">Si votre application mutualisée utilise des pools élastiques, vous pouvez utiliser cette fonctionnalité toomix principaux et secondaires bases de données dans chaque pool.</span><span class="sxs-lookup"><span data-stu-id="d0a00-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="d0a00-225">Cette façon, vous pouvez réduire l’impact de hello d’une panne de tooonly la moitié des locataires de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="d0a00-226">Meilleures pratiques de création de service hautement disponible</span><span class="sxs-lookup"><span data-stu-id="d0a00-226">Best practices of building highly available service</span></span>

<span data-ttu-id="d0a00-227">toobuild un service hautement disponible qui utilise des clients de hello de base de données SQL Azure doit respecter les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="d0a00-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="d0a00-228">**Utiliser un groupe de basculement** : un ou plusieurs groupes de basculement peuvent être créés entre deux serveurs situés dans des régions différentes (serveurs primaires et secondaires).</span><span class="sxs-lookup"><span data-stu-id="d0a00-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="d0a00-229">Chaque groupe peut inclure un ou plusieurs bases de données qui sont récupérées en tant qu’unité dans le cas où toutes ou certaines bases de données primaires deviennent indisponibles en raison de la panne tooan dans la région principale de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="d0a00-230">groupe de basculement Hello crée la base de données de géo-réplication secondaire par hello même objectif que hello principal de service.</span><span class="sxs-lookup"><span data-stu-id="d0a00-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="d0a00-231">Si vous ajoutez qu'un existant géo-réplication relation toohello basculement groupe Vérifiez que hello géo-secondaire est configuré avec hello même comme objectif de niveau de service hello principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="d0a00-232">**Utiliser le port d’écoute en lecture-écriture pour la charge de travail OLTP**: lorsque vous effectuez l’utilisation d’opérations OLTP  **&lt;basculement-group-name&gt;. database.windows.net** comme URL du serveur hello et les connexions hello seront toohello automatiquement dirigé principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="d0a00-233">Cette URL n’est pas modifié après le basculement de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="d0a00-234">Remarque hello basculement implique la mise à jour hello d’enregistrement DNS pour que les connexions clientes hello soit redirigé toohello nouveau cache DNS principal uniquement après les client hello est actualisé.</span><span class="sxs-lookup"><span data-stu-id="d0a00-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="d0a00-235">**Utilisez écouteur en lecture seule pour les charges de travail en lecture seule**: Si vous avez un logiquement isolée en lecture seule charge de travail péremption toocertain à tolérance de panne de données, vous pouvez utiliser la base de données secondaire hello dans l’application hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="d0a00-236">Pour utilisent des sessions en lecture seule  **&lt;basculement-group-name&gt;. secondary.database.windows.net** comme URL du serveur hello et connexion de hello sera automatiquement dirigé toohello secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="d0a00-237">Il est également recommandé d’indiquer dans la tentative de lecture de la chaîne de connexion à l’aide de **ApplicationIntent = ReadOnly**.</span><span class="sxs-lookup"><span data-stu-id="d0a00-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="d0a00-238">**Attendez-vous à une dégradation des performances**: la décision de basculement SQL est indépendante de rest hello d’application hello ou d’autres services utilisés.</span><span class="sxs-lookup"><span data-stu-id="d0a00-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="d0a00-239">application Hello peut être « mixed » avec certains composants dans une région et d’autres dans un autre.</span><span class="sxs-lookup"><span data-stu-id="d0a00-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="d0a00-240">dégradation de hello tooavoid, le déploiement redondant application hello dans la région de hello récupération d’urgence et suivez les instructions de hello dans cet article.</span><span class="sxs-lookup"><span data-stu-id="d0a00-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="d0a00-241">Remarque hello application dans la région de récupération d’urgence hello n’a pas de toouse une chaîne de connexion différents.</span><span class="sxs-lookup"><span data-stu-id="d0a00-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="d0a00-242">**Préparer la perte de données**: si une panne est détectée, SQL déclenche automatiquement en lecture-écriture de basculement s’il existe zéro toohello de perte de données de notre base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="d0a00-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="d0a00-243">Dans le cas contraire, il attend hello délai vous **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="d0a00-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="d0a00-244">Si vous avez spécifié **GracePeriodWithDataLossHours**, attendez-vous à une perte de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="d0a00-245">En général, en cas de panne, Azure favorise la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d0a00-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="d0a00-246">Si vous ne pouvez pas vous permettre de perte de données, assurez-vous que tooset **GracePeriodWithDataLossHours** tooa suffisamment grand nombre, tels que des dernières 24 heures.</span><span class="sxs-lookup"><span data-stu-id="d0a00-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="d0a00-247">Mise à niveau ou rétrogradation d’une base de données primaire</span><span class="sxs-lookup"><span data-stu-id="d0a00-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="d0a00-248">Vous pouvez mettre à niveau ou rétrograder un niveau de performance différents de tooa de base de données primaire (dans hello même niveau de service) sans déconnecter toutes les bases de données secondaires.</span><span class="sxs-lookup"><span data-stu-id="d0a00-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="d0a00-249">Lors de la mise à niveau, nous vous recommandons que vous mettre à niveau de base de données secondaire hello tout d’abord, puis mettez à niveau hello principal.</span><span class="sxs-lookup"><span data-stu-id="d0a00-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="d0a00-250">Lorsque vous rétrogradez, inverser l’ordre de hello : rétrograder hello principal tout d’abord, puis passer hello secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="d0a00-251">Lorsque vous mettez à niveau ou passer le niveau de service différents tooa hello cette recommandation est appliquée.</span><span class="sxs-lookup"><span data-stu-id="d0a00-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="d0a00-252">Si vous avez créé la base de données secondaire dans le cadre de la configuration du groupe de basculement hello il n’est pas base de données secondaire toodowngrade recommandée hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="d0a00-253">Il s’agit de tooensure votre couche données a suffisamment capacité tooprocess votre charge de travail normale après le basculement est activé.</span><span class="sxs-lookup"><span data-stu-id="d0a00-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="d0a00-254">Prévention des pertes de données critiques de hello</span><span class="sxs-lookup"><span data-stu-id="d0a00-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="d0a00-255">En raison de toohello une latence élevée des réseaux étendus, copie continue utilise un mécanisme de réplication asynchrone.</span><span class="sxs-lookup"><span data-stu-id="d0a00-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="d0a00-256">La perte de certaines données reste donc inévitable en cas de défaillance.</span><span class="sxs-lookup"><span data-stu-id="d0a00-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="d0a00-257">Or, pour certaines applications, une perte de données est inacceptable.</span><span class="sxs-lookup"><span data-stu-id="d0a00-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="d0a00-258">tooprotect ces mises à jour critiques, un développeur d’applications peuvent appeler hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) procédure système immédiatement après avoir validé la transaction de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="d0a00-259">Appel de **sp_wait_for_database_copy_sync** hello blocs thread appelant jusqu'à ce que hello dernière transaction a été transmis toohello de base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="d0a00-260">Toutefois, il n’attend pas hello transmis transactions toobe relus et validée sur hello secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="d0a00-261">**sp_wait_for_database_copy_sync** est le lien de copie continue spécifique tooa étendue.</span><span class="sxs-lookup"><span data-stu-id="d0a00-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="d0a00-262">Tout utilisateur disposant de hello connexion droits toohello base de données primaire peut appeler cette procédure.</span><span class="sxs-lookup"><span data-stu-id="d0a00-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="d0a00-263">**sp_wait_for_database_copy_sync** empêchera la perte de données après un basculement, mais il ne garantira pas la synchronisation complète pour l’accès en lecture.</span><span class="sxs-lookup"><span data-stu-id="d0a00-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="d0a00-264">Hello délai causé par une **sp_wait_for_database_copy_sync** appel de procédure peut être significatif et dépend de la taille de hello hello du journal des transactions au moment de l’appel de hello hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="d0a00-265">Gestion de la géo-réplication active et des groupes de basculement par programmation</span><span class="sxs-lookup"><span data-stu-id="d0a00-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="d0a00-266">Comme indiqué précédemment, les groupes de basculement automatique (en version préliminaire) et active géo-réplication peut également être gérée par programme à l’aide d’Azure PowerShell et hello API REST.</span><span class="sxs-lookup"><span data-stu-id="d0a00-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="d0a00-267">Hello les tableaux suivants décrire ensemble hello des commandes disponibles.</span><span class="sxs-lookup"><span data-stu-id="d0a00-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="d0a00-268">**API de gestion de ressources Azure et en fonction du rôle de sécurité**: géo-réplication Active comprend un ensemble d’API du Gestionnaire de ressources Azure pour la gestion, y compris hello [API REST de Azure SQL Database](https://docs.microsoft.com/rest/api/sql/) et [Azure Applets de commande PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="d0a00-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="d0a00-269">Ces API nécessite utilisation hello des groupes de ressources et prendre en charge la sécurité basée sur les rôles (RBAC).</span><span class="sxs-lookup"><span data-stu-id="d0a00-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="d0a00-270">Pour plus d’informations sur la façon dont tooimplement accéder aux rôles, consultez [du contrôle d’accès](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="d0a00-271">Parmi les nouvelles fonctionnalités de géo-réplication active, plusieurs sont uniquement prises en charge avec [l’API REST de SQL Azure](https://msdn.microsoft.com/library/azure/mt163571.aspx) et les [applets de commande PowerShell d’Azure SQL Database](https://msdn.microsoft.com/library/azure/mt574084.aspx), basées sur [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="d0a00-272">Hello [(classique) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) et [applets de commande de base de données SQL Azure (classique)](https://msdn.microsoft.com/library/azure/dn546723.aspx) sont pris en charge pour la compatibilité descendante à l’aide de hello API Azure Resource Manager sont recommandées.</span><span class="sxs-lookup"><span data-stu-id="d0a00-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="d0a00-273">Gérer SQL de base de données de basculement à l’aide à l’aide de Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="d0a00-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="d0a00-274">Commande</span><span class="sxs-lookup"><span data-stu-id="d0a00-274">Command</span></span> | <span data-ttu-id="d0a00-275">Description</span><span class="sxs-lookup"><span data-stu-id="d0a00-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="d0a00-276">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="d0a00-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="d0a00-277">Utilisez Ajouter un serveur secondaire ON argument toocreate une base de données secondaire pour une base de données existante et démarre la réplication de données</span><span class="sxs-lookup"><span data-stu-id="d0a00-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="d0a00-278">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="d0a00-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="d0a00-279">Utiliser le basculement ou FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch un basculement de tooinitiate principal de base de données secondaire toobe</span><span class="sxs-lookup"><span data-stu-id="d0a00-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="d0a00-280">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="d0a00-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="d0a00-281">Utilisez tooterminate de supprimer le serveur secondaire sur une réplication de données entre une base de données SQL et de la base de données secondaire hello spécifié.</span><span class="sxs-lookup"><span data-stu-id="d0a00-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="d0a00-282">sys.geo_replication_links (base de données SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="d0a00-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="d0a00-283">Retourne des informations sur tous les liens de réplication existante pour chaque base de données sur le serveur logique de base de données SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="d0a00-284">sys.dm_geo_replication_link_status (base de données SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="d0a00-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="d0a00-285">Obtient hello dernière heure de la réplication, dernier décalage de réplication et autres informations sur le lien de réplication hello pour une base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="d0a00-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="d0a00-286">sys.dm_operation_status (base de données SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="d0a00-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="d0a00-287">Affiche l’état de hello pour toutes les opérations de base de données y compris l’état hello hello des liens de réplication.</span><span class="sxs-lookup"><span data-stu-id="d0a00-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="d0a00-288">sp_wait_for_database_copy_sync (base de données SQL Azure)</span><span class="sxs-lookup"><span data-stu-id="d0a00-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="d0a00-289">provoque la hello application toowait jusqu'à ce que toutes les transactions validées sont répliquées et acceptées par la base de données secondaire active hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="d0a00-290">Gérer SQL de base de données de basculement à l’aide de l’aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="d0a00-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="d0a00-291">Applet de commande</span><span class="sxs-lookup"><span data-stu-id="d0a00-291">Cmdlet</span></span> | <span data-ttu-id="d0a00-292">Description</span><span class="sxs-lookup"><span data-stu-id="d0a00-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="d0a00-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="d0a00-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="d0a00-294">Obtient une ou plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="d0a00-295">New-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="d0a00-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="d0a00-296">Crée une base de données secondaire pour une base de données existante puis lance la réplication des données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="d0a00-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="d0a00-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="d0a00-298">Bascule un basculement de principal tooinitiate toobe base de données secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="d0a00-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="d0a00-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="d0a00-300">Met fin à la réplication des données entre une base de données SQL et de la base de données secondaire hello spécifié.</span><span class="sxs-lookup"><span data-stu-id="d0a00-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="d0a00-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="d0a00-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="d0a00-302">Obtient les liens de géo-réplication hello entre une base de données SQL Azure et un groupe de ressources ou SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d0a00-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="d0a00-303">New-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="d0a00-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="d0a00-304">Cette commande crée un groupe de basculement et l’enregistre dans les serveurs primaire et secondaire</span><span class="sxs-lookup"><span data-stu-id="d0a00-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="d0a00-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="d0a00-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="d0a00-306">Supprime le groupe de basculement hello à partir du serveur de hello, ainsi que tous les groupe hello de bases de données secondaires inclus</span><span class="sxs-lookup"><span data-stu-id="d0a00-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="d0a00-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="d0a00-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="d0a00-308">Récupère la configuration du groupe de basculement hello</span><span class="sxs-lookup"><span data-stu-id="d0a00-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="d0a00-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="d0a00-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="d0a00-310">Modifie la configuration hello du groupe de basculement hello</span><span class="sxs-lookup"><span data-stu-id="d0a00-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="d0a00-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="d0a00-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="d0a00-312">Basculement de déclencheurs de serveur secondaire toohello groupe de basculement hello</span><span class="sxs-lookup"><span data-stu-id="d0a00-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="d0a00-313">Pour plus d’exemples de scripts, consultez [Configurer et basculer une base de données unique à l’aide de la géoréplication active](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configurer et basculer une base de données regroupée à l’aide de la géoréplication active](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), et [Configurer et basculer un groupe de basculement pour une base de données unique (préversion)] (scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="d0a00-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="d0a00-314">Gérer le basculement de base de données SQL à l’aide des API REST de hello</span><span class="sxs-lookup"><span data-stu-id="d0a00-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="d0a00-315">API</span><span class="sxs-lookup"><span data-stu-id="d0a00-315">API</span></span> | <span data-ttu-id="d0a00-316">Description</span><span class="sxs-lookup"><span data-stu-id="d0a00-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="d0a00-317">.Créer ou mettre à jour la base de données (createMode=Restore)</span><span class="sxs-lookup"><span data-stu-id="d0a00-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="d0a00-318">Crée, met à jour ou restaure une base de données principale ou secondaire.</span><span class="sxs-lookup"><span data-stu-id="d0a00-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="d0a00-319">Créer ou mettre à jour l’état de la base de données</span><span class="sxs-lookup"><span data-stu-id="d0a00-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="d0a00-320">État de hello retourne pendant une opération de création.</span><span class="sxs-lookup"><span data-stu-id="d0a00-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="d0a00-321">Définir la base de données secondaire comme principale (basculement planifié)</span><span class="sxs-lookup"><span data-stu-id="d0a00-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="d0a00-322">Définit la base de données du réplica principal en basculant à partir de la base de données de réplica principal actuel hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="d0a00-323">Définir la base de données secondaire comme principale (basculement non planifié)</span><span class="sxs-lookup"><span data-stu-id="d0a00-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="d0a00-324">Définit la base de données du réplica principal en basculant à partir de la base de données de réplica principal actuel hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="d0a00-325">Cette opération peut entraîner une perte de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="d0a00-326">Obtenir un lien de réplication</span><span class="sxs-lookup"><span data-stu-id="d0a00-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="d0a00-327">Obtient un liens de réplication spécifique pour une base de données SQL particulière dans un partenariat de géo-réplication.</span><span class="sxs-lookup"><span data-stu-id="d0a00-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="d0a00-328">Il récupère les informations de hello visibles dans la vue de catalogue sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="d0a00-329">Liens de réplication - Liste par base de données</span><span class="sxs-lookup"><span data-stu-id="d0a00-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="d0a00-330">Obtient tous les liens de réplication pour une base de données SQL donnée dans un partenariat de géo-réplication.</span><span class="sxs-lookup"><span data-stu-id="d0a00-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="d0a00-331">Il récupère les informations de hello visibles dans la vue de catalogue sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="d0a00-332">Supprimer un lien de réplication</span><span class="sxs-lookup"><span data-stu-id="d0a00-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="d0a00-333">Supprime un lien de réplication de base de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-333">Deletes a database replication link.</span></span> <span data-ttu-id="d0a00-334">Opération impossible pendant le basculement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="d0a00-335">[Créer ou mettre à jour un groupe de basculement]/rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="d0a00-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="d0a00-336">Crée ou met à jour un groupe de basculement</span><span class="sxs-lookup"><span data-stu-id="d0a00-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="d0a00-337">Supprimer un groupe de basculement</span><span class="sxs-lookup"><span data-stu-id="d0a00-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="d0a00-338">Supprime le groupe de basculement hello à partir du serveur de hello</span><span class="sxs-lookup"><span data-stu-id="d0a00-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="d0a00-339">Basculement (planifié)</span><span class="sxs-lookup"><span data-stu-id="d0a00-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="d0a00-340">Bascule du serveur toothis serveur principal actuel de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="d0a00-341">Forcer le basculement et autoriser la perte de données</span><span class="sxs-lookup"><span data-stu-id="d0a00-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="d0a00-342">ails sur serveur toothis serveur principal actuel de hello.</span><span class="sxs-lookup"><span data-stu-id="d0a00-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="d0a00-343">Cette opération peut entraîner une perte de données.</span><span class="sxs-lookup"><span data-stu-id="d0a00-343">This operation might result in data loss.</span></span> |
| <span data-ttu-id="d0a00-344">[Get Failover Group](/rest/api/sql/failovergroups/get) (Obtenir un groupe de basculement)</span><span class="sxs-lookup"><span data-stu-id="d0a00-344">[Get Failover Group](/rest/api/sql/failovergroups/get)</span></span> | <span data-ttu-id="d0a00-345">Obtient un groupe de basculement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="d0a00-346">Répertorier les groupes de basculement par serveur</span><span class="sxs-lookup"><span data-stu-id="d0a00-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="d0a00-347">Répertorie les groupes de basculement hello dans un serveur.</span><span class="sxs-lookup"><span data-stu-id="d0a00-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="d0a00-348">Mettre à jour un groupe de basculement</span><span class="sxs-lookup"><span data-stu-id="d0a00-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="d0a00-349">Met à jour un groupe de basculement.</span><span class="sxs-lookup"><span data-stu-id="d0a00-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="d0a00-350">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="d0a00-350">Next steps</span></span>
* <span data-ttu-id="d0a00-351">Pour obtenir des exemples de scripts, consultez :</span><span class="sxs-lookup"><span data-stu-id="d0a00-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="d0a00-352">Configurer et basculer une base de données unique à l’aide de la géoréplication active</span><span class="sxs-lookup"><span data-stu-id="d0a00-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="d0a00-353">Configurer et basculer une base de données regroupée à l’aide de la géoréplication active</span><span class="sxs-lookup"><span data-stu-id="d0a00-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="d0a00-354">Configurer et basculer un groupe de basculement pour une base de données unique (préversion)</span><span class="sxs-lookup"><span data-stu-id="d0a00-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="d0a00-355">Pour une vue d’ensemble de la continuité des activités et des scénarios, consultez [Vue d’ensemble de la continuité des activités](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="d0a00-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="d0a00-356">toolearn sur les sauvegardes de base de données SQL Azure automatisée, consultez [base de données SQL des sauvegardes automatisées](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="d0a00-357">toolearn sur l’utilisation des sauvegardes automatisées pour la récupération, consultez [restaurer une base de données à partir de sauvegardes de hello initiées par le service](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="d0a00-358">toolearn sur les exigences d’authentification pour un nouveau serveur principal et de la base de données, consultez [sécurité de base de données SQL après la récupération d’urgence](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="d0a00-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

