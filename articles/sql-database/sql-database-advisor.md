---
title: "recommandations aaaPerformance - base de données SQL Azure | Documents Microsoft"
description: "Hello, base de données SQL Azure fournit des recommandations pour vos bases de données SQL qui peut améliorer les performances des requêtes en cours."
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 77db338a0a395aec78c9e02849ae5ba4f2d01680
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="d6690-103">Recommandations en matière de performances</span><span class="sxs-lookup"><span data-stu-id="d6690-103">Performance recommendations</span></span>

<span data-ttu-id="d6690-104">Base de données SQL Azure apprend et s’adapte à votre application et fournit des recommandations personnalisées, ce qui vous toomaximize hello vos bases de données SQL.</span><span class="sxs-lookup"><span data-stu-id="d6690-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you toomaximize hello performance of your SQL databases.</span></span> <span data-ttu-id="d6690-105">Vos performances sont évaluées en permanence grâce à l’analyse de votre historique d’utilisation de SQL Database.</span><span class="sxs-lookup"><span data-stu-id="d6690-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="d6690-106">recommandations Hello fournis sont basées sur un modèle de charge de travail unique de base de données et d’améliorer ses performances.</span><span class="sxs-lookup"><span data-stu-id="d6690-106">hello recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="d6690-107">Il est conseillé d’utiliser les recommandations en activant l’option de réglage automatique sur votre base de données.</span><span class="sxs-lookup"><span data-stu-id="d6690-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="d6690-108">Pour en savoir plus, consultez la page [Réglage automatique](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="d6690-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="d6690-109">Recommandations relatives à la création d’un index</span><span class="sxs-lookup"><span data-stu-id="d6690-109">Create index recommendations</span></span>
<span data-ttu-id="d6690-110">Base de données SQL Azure surveille les requêtes hello en cours d’exécution et identifie les index hello qui peut améliorer les performances de hello en continu.</span><span class="sxs-lookup"><span data-stu-id="d6690-110">Azure SQL Database continuously monitors hello queries being executed and identifies hello indexes that could improve hello performance.</span></span> <span data-ttu-id="d6690-111">Dès que la base de données estime qu’un index manque, une recommandation **Créer un index** est créée.</span><span class="sxs-lookup"><span data-stu-id="d6690-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="d6690-112">Confiance de builds de la base de données SQL Azure en estimant index hello du gain de performances se traduirait par heure.</span><span class="sxs-lookup"><span data-stu-id="d6690-112">Azure SQL Database builds confidence by estimating performance gain hello index would bring through time.</span></span> <span data-ttu-id="d6690-113">Selon le gain de performances hello estimé, les recommandations sont classées comme haute, moyenne ou faible.</span><span class="sxs-lookup"><span data-stu-id="d6690-113">Depending on hello estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="d6690-114">Les index créés à l’aide de recommandations portent toujours l’indicateur auto_created.</span><span class="sxs-lookup"><span data-stu-id="d6690-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="d6690-115">Vous pouvez voir quels index possèdent l’indicateur auto_created en examinant la vue sys.indexes.</span><span class="sxs-lookup"><span data-stu-id="d6690-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="d6690-116">Les index créés automatiquement ne bloquent pas les commandes ALTER/RENAME.</span><span class="sxs-lookup"><span data-stu-id="d6690-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="d6690-117">Si vous essayez de colonne hello toodrop ayant une automatique créée des index sur celle-ci, commande hello passe et auto hello créé l’index est supprimé avec la commande hello ainsi.</span><span class="sxs-lookup"><span data-stu-id="d6690-117">If you try toodrop hello column that has an auto created index over it, hello command passes and hello auto created index is dropped with hello command as well.</span></span> <span data-ttu-id="d6690-118">Index classiques sont sont de bloquer commande ALTER/changement de nom de hello sur les colonnes qui sont indexées.</span><span class="sxs-lookup"><span data-stu-id="d6690-118">Regular indexes would block hello ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="d6690-119">Une fois la création de hello recommandation d’index est appliquée, base de données SQL Azure seront comparer les performances des requêtes de hello aux performances de ligne de base hello.</span><span class="sxs-lookup"><span data-stu-id="d6690-119">Once hello create index recommendation is applied, Azure SQL Database will compare performance of hello queries with hello baseline performance.</span></span> <span data-ttu-id="d6690-120">Si le nouvel index de remise des améliorations des performances hello, recommandation est signalée comme réussie et impact sur le rapport sera disponible.</span><span class="sxs-lookup"><span data-stu-id="d6690-120">If new index brought improvements in hello performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="d6690-121">En cas d’index de hello n’a pas été avantageux hello, il vont être annulée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="d6690-121">In case hello index didn’t bring hello benefits, it will be automatically reverted.</span></span> <span data-ttu-id="d6690-122">Cette base de données SQL Azure de façon garantit qu’à l’aide des recommandations uniquement améliorera les performances de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="d6690-122">This way Azure SQL Database ensures that using recommendations will only improve hello database performance.</span></span>

<span data-ttu-id="d6690-123">N’importe quel **Create index** a une stratégie qui empêche l’application de la recommandation de hello si l’usage de DTU de base de données ou un pool hello était supérieure à 80 % en derniers 20 minutes ou si le stockage de hello est supérieure à 90 % de l’utilisation d’interruption.</span><span class="sxs-lookup"><span data-stu-id="d6690-123">Any **Create index** recommendation has a back off policy that won’t allow applying hello recommendation if hello database or pool DTU usage was above 80% in last 20 minutes or if hello storage is above 90% of usage.</span></span> <span data-ttu-id="d6690-124">Dans ce cas, la recommandation de hello sera suspendue.</span><span class="sxs-lookup"><span data-stu-id="d6690-124">In this case, hello recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="d6690-125">Recommandations relatives à la suppression d’index</span><span class="sxs-lookup"><span data-stu-id="d6690-125">Drop index recommendations</span></span>
<span data-ttu-id="d6690-126">En outre toodetecting un index manquant, Azure SQL Database en permanence analyse des performances de hello des index existants.</span><span class="sxs-lookup"><span data-stu-id="d6690-126">In addition toodetecting a missing index, Azure SQL Database continuously analyzes hello performance of existing indexes.</span></span> <span data-ttu-id="d6690-127">Si l’index n’est pas utilisé, Azure SQL Database recommande sa suppression.</span><span class="sxs-lookup"><span data-stu-id="d6690-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="d6690-128">Il est recommandé de supprimer un index dans deux cas :</span><span class="sxs-lookup"><span data-stu-id="d6690-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="d6690-129">L’index est un doublon d’un autre index (même colonne, schéma de partition et filtres indexés et inclus)</span><span class="sxs-lookup"><span data-stu-id="d6690-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="d6690-130">L’index n’est pas utilisé pendant une période prolongée (93 jours)</span><span class="sxs-lookup"><span data-stu-id="d6690-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="d6690-131">DROP index recommandations également passent par vérification hello après l’implémentation.</span><span class="sxs-lookup"><span data-stu-id="d6690-131">Drop index recommendations also go through hello verification after implementation.</span></span> <span data-ttu-id="d6690-132">Si les performances de hello impact hello améliorée rapport seront disponible.</span><span class="sxs-lookup"><span data-stu-id="d6690-132">If hello performance is improved hello impact report will be available.</span></span> <span data-ttu-id="d6690-133">Si une dégradation du niveau de performance est détectée, la recommandation est restaurée.</span><span class="sxs-lookup"><span data-stu-id="d6690-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="d6690-134">Recommandations de paramétrage de requêtes</span><span class="sxs-lookup"><span data-stu-id="d6690-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="d6690-135">**Paramétrez des requêtes** recommandations s’affichent lorsque vous en avez un ou plusieurs requêtes qui sont recompilées en permanence, mais au finissent hello même plan d’exécution de requête.</span><span class="sxs-lookup"><span data-stu-id="d6690-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with hello same query execution plan.</span></span> <span data-ttu-id="d6690-136">Cette condition ouvre une tooapply opportunité forcé de paramétrage, ce qui permettra de plans de requête toobe mis en cache et réutilisée Bonjour futures améliore les performances et réduire l’utilisation des ressources.</span><span class="sxs-lookup"><span data-stu-id="d6690-136">This condition opens up an opportunity tooapply forced parameterization, which will allow query plans toobe cached and reused in hello future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="d6690-137">Chaque requête adressée à SQL Server initialement doit toobe compilé toogenerate un plan d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d6690-137">Every query issued against SQL Server initially needs toobe compiled toogenerate an execution plan.</span></span> <span data-ttu-id="d6690-138">Chaque plan généré est ajouté toohello mémoire cache des plans et les exécutions ultérieures de hello même requête peut réutiliser ce plan à partir du cache de hello, hello évite une compilation supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="d6690-138">Each generated plan is added toohello plan cache and subsequent executions of hello same query can reuse this plan from hello cache, eliminating hello need for additional compilation.</span></span> 

<span data-ttu-id="d6690-139">Les applications qui envoient des requêtes, y compris les valeurs non paramétrée, peuvent entraîner des tooa surcharge de performances, où pour chaque requête de ce type avec différentes valeurs de paramètre hello l’exécution du plan est compilé à nouveau.</span><span class="sxs-lookup"><span data-stu-id="d6690-139">Applications that send queries, which include non-parameterized values, can lead tooa performance overhead, where for every such query with different parameter values hello execution plan is compiled again.</span></span> <span data-ttu-id="d6690-140">Dans nombreux hello de cas mêmes requêtes avec des paramètres différents génèrent des valeurs hello même plans d’exécution, mais ces plans sont ajoutés toujours séparément le cache du plan de toohello.</span><span class="sxs-lookup"><span data-stu-id="d6690-140">In many cases hello same queries with different parameter values generate hello same execution plans, but these plans are still separately added toohello plan cache.</span></span> <span data-ttu-id="d6690-141">Recompilation des plans d’exécution utilisent des ressources de base de données, augmentez hello durée temps et dépassement de capacité hello plan de requête à l’origine de la mémoire cache des plans toobe supprimé du cache de hello.</span><span class="sxs-lookup"><span data-stu-id="d6690-141">Recompiling execution plans use database resources, increase hello query duration time and overflow hello plan cache causing plans toobe evicted from hello cache.</span></span> <span data-ttu-id="d6690-142">Ce comportement de SQL Server peut être modifié en définissant hello forcé option parameterization sur la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="d6690-142">This behavior of SQL Server can be altered by setting hello forced parameterization option on hello database.</span></span> 

<span data-ttu-id="d6690-143">toohelp vous estimez impact hello de cette recommandation, vous sont fournies avec une comparaison entre les UC réel hello hello et l’utilisation projetée l’utilisation du processeur (comme si la recommandation de hello a été appliquée).</span><span class="sxs-lookup"><span data-stu-id="d6690-143">toohelp you estimate hello impact of this recommendation, you are provided with a comparison between hello actual CPU usage and hello projected CPU usage (as if hello recommendation was applied).</span></span> <span data-ttu-id="d6690-144">En outre les économies tooCPU, votre durée de requête diminue pour hello temps de compilation.</span><span class="sxs-lookup"><span data-stu-id="d6690-144">In addition tooCPU savings, your query duration decreases for hello time spent in compilation.</span></span> <span data-ttu-id="d6690-145">Il sera également beaucoup moins de surcharge sur le cache du plan, autorisant la majorité des hello toostay dans le cache des plans et être réutilisée.</span><span class="sxs-lookup"><span data-stu-id="d6690-145">There will also be much less overhead on plan cache, allowing majority of hello plans toostay in cache and be reused.</span></span> <span data-ttu-id="d6690-146">Vous pouvez appliquer cette recommandation rapidement et facilement en cliquant sur hello **appliquer** commande.</span><span class="sxs-lookup"><span data-stu-id="d6690-146">You can apply this recommendation quickly and easily by clicking on hello **Apply** command.</span></span> 

<span data-ttu-id="d6690-147">Une fois que vous appliquez cette recommandation, il active le paramétrage forcé dans les minutes sur votre base de données et démarre hello analyse des processus qui dure environ 24 heures.</span><span class="sxs-lookup"><span data-stu-id="d6690-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts hello monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="d6690-148">Après cette période, vous allez être en mesure de toosee hello validation rapport qui affiche l’utilisation du processeur de votre base de données des dernières 24 heures avant et après avoir appliqué la recommandation de hello.</span><span class="sxs-lookup"><span data-stu-id="d6690-148">After this period, you will be able toosee hello validation report that shows CPU usage of your database 24 hours before and after hello recommendation has been applied.</span></span> <span data-ttu-id="d6690-149">Assistant de base de données SQL utilise un mécanisme de sécurité qui revient automatiquement la recommandation de hello appliqué au cas où une régression des performances a été détectée.</span><span class="sxs-lookup"><span data-stu-id="d6690-149">SQL Database Advisor has a safety mechanism that automatically reverts hello applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="d6690-150">Recommandations de résolution des problèmes de schéma</span><span class="sxs-lookup"><span data-stu-id="d6690-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="d6690-151">**Résoudre les problèmes de schéma** recommandations s’affichent lorsque hello notifications de service de base de données SQL d’anomalie dans nombre hello d’erreurs SQL liées au schéma qui se passe sur votre base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="d6690-151">**Fix schema issues** recommendations appear when hello SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="d6690-152">Cette recommandation s’affiche généralement lorsque votre base de données rencontre plusieurs erreurs liées au schéma (nom de colonne non valide, nom d’objet non valide, etc.) dans la même heure.</span><span class="sxs-lookup"><span data-stu-id="d6690-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="d6690-153">« Problèmes de schéma » sont une classe d’erreurs de syntaxe dans SQL Server qui se produisent lors de la définition de hello de la requête SQL hello et la définition de hello du schéma de base de données hello ne sont pas alignées.</span><span class="sxs-lookup"><span data-stu-id="d6690-153">“Schema issues” are a class of syntax errors in SQL Server that happen when hello definition of hello SQL query and hello definition of hello database schema are not aligned.</span></span> <span data-ttu-id="d6690-154">Par exemple, une des colonnes hello attendus par la requête de hello est peut-être manquante dans la table cible de hello, ou vice versa.</span><span class="sxs-lookup"><span data-stu-id="d6690-154">For example, one of hello columns expected by hello query may be missing in hello target table, or vice versa.</span></span> 

<span data-ttu-id="d6690-155">Recommandation de « Corriger le problème de schéma » s’affiche lorsque le service de base de données SQL Azure avis d’anomalie dans nombre hello d’erreurs SQL liées au schéma qui se passe sur votre base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="d6690-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="d6690-156">Hello table affiche hello erreurs qui sont les problèmes connexes tooschema suivantes :</span><span class="sxs-lookup"><span data-stu-id="d6690-156">hello following table shows hello errors that are related tooschema issues:</span></span>

| <span data-ttu-id="d6690-157">Code d'erreur SQL</span><span class="sxs-lookup"><span data-stu-id="d6690-157">SQL Error Code</span></span> | <span data-ttu-id="d6690-158">Message</span><span class="sxs-lookup"><span data-stu-id="d6690-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="d6690-159">201</span><span class="sxs-lookup"><span data-stu-id="d6690-159">201</span></span> |<span data-ttu-id="d6690-160">La procédure ou fonction '*’ attend le paramètre ’*', qui n’a pas été fourni.</span><span class="sxs-lookup"><span data-stu-id="d6690-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="d6690-161">207</span><span class="sxs-lookup"><span data-stu-id="d6690-161">207</span></span> |<span data-ttu-id="d6690-162">Nom de colonne non valide '*'.</span><span class="sxs-lookup"><span data-stu-id="d6690-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="d6690-163">208</span><span class="sxs-lookup"><span data-stu-id="d6690-163">208</span></span> |<span data-ttu-id="d6690-164">Nom d'objet non valide ’*’.</span><span class="sxs-lookup"><span data-stu-id="d6690-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="d6690-165">213</span><span class="sxs-lookup"><span data-stu-id="d6690-165">213</span></span> |<span data-ttu-id="d6690-166">Le nom de la colonne ou le nombre de valeurs fournies ne correspond pas à la définition de la table.</span><span class="sxs-lookup"><span data-stu-id="d6690-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="d6690-167">2812</span><span class="sxs-lookup"><span data-stu-id="d6690-167">2812</span></span> |<span data-ttu-id="d6690-168">Impossible de trouver la procédure stockée '*'.</span><span class="sxs-lookup"><span data-stu-id="d6690-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="d6690-169">8144</span><span class="sxs-lookup"><span data-stu-id="d6690-169">8144</span></span> |<span data-ttu-id="d6690-170">La procédure ou la fonction * a trop d’arguments spécifiés.</span><span class="sxs-lookup"><span data-stu-id="d6690-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="d6690-171">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="d6690-171">Next steps</span></span>
<span data-ttu-id="d6690-172">Surveiller vos recommandations et continuer tooapply les performances de toorefine.</span><span class="sxs-lookup"><span data-stu-id="d6690-172">Monitor your recommendations and continue tooapply them toorefine performance.</span></span> <span data-ttu-id="d6690-173">Les charges de travail d’une base de données sont dynamiques et évoluent en permanence.</span><span class="sxs-lookup"><span data-stu-id="d6690-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="d6690-174">Conseiller de la base de données SQL continue toomonitor et fournir des recommandations qui peuvent permettre d’améliorer les performances de votre base de données.</span><span class="sxs-lookup"><span data-stu-id="d6690-174">SQL Database advisor continues toomonitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="d6690-175">Consultez [recommandations relatives aux performances Bonjour Azure portal](sql-database-advisor-portal.md) pour savoir comment les recommandations relatives aux performances de toouse dans hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="d6690-175">See [Performance recommendations in hello Azure portal](sql-database-advisor-portal.md) for steps on how toouse performance recommendations in hello Azure portal.</span></span>
* <span data-ttu-id="d6690-176">Consultez [analyse des performances des requêtes](sql-database-query-performance.md) toolearn sur et vue hello impact sur les performances de vos requêtes principales.</span><span class="sxs-lookup"><span data-stu-id="d6690-176">See [Query Performance Insights](sql-database-query-performance.md) toolearn about and view hello performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d6690-177">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="d6690-177">Additional resources</span></span>
* [<span data-ttu-id="d6690-178">Magasin de requêtes</span><span class="sxs-lookup"><span data-stu-id="d6690-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="d6690-179">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="d6690-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="d6690-180">Contrôle d’accès en fonction du rôle</span><span class="sxs-lookup"><span data-stu-id="d6690-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)

