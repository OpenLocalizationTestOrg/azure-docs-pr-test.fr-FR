---
title: "Flux de code d’autorisation - Azure AD B2C | Microsoft Docs"
description: "Découvrez comment créer des applications web à l’aide d’Azure AD B2C et du protocole d’authentification OpenID Connect."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: dfc4f2e84704307ccbea6141c0dbc8d089733b22
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="c318d-103">Azure Active Directory B2C : flux de code d’autorisation OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="c318d-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="c318d-104">Vous pouvez utiliser l’octroi de code d’autorisation OAuth 2.0 dans les applications qui sont installées sur un appareil pour accéder à des ressources protégées, comme des API web.</span><span class="sxs-lookup"><span data-stu-id="c318d-104">You can use the OAuth 2.0 authorization code grant in apps installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="c318d-105">Grâce à l’implémentation Azure Active Directory B2C (Azure AD B2C) d’OAuth 2.0, vous pouvez ajouter l’inscription, la connexion et d’autres tâches de gestion d’identité à vos applications mobiles et applications de bureau.</span><span class="sxs-lookup"><span data-stu-id="c318d-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks to your mobile and desktop apps.</span></span> <span data-ttu-id="c318d-106">Cet article est indépendant du langage.</span><span class="sxs-lookup"><span data-stu-id="c318d-106">This article is language-independent.</span></span> <span data-ttu-id="c318d-107">Il décrit comment envoyer et recevoir des messages HTTP sans utiliser de bibliothèque open source.</span><span class="sxs-lookup"><span data-stu-id="c318d-107">In the article, we describe how to send and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link to libraries -->

<span data-ttu-id="c318d-108">Le flux de code d’autorisation OAuth 2.0 est décrit dans la [section 4.1 des spécifications OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="c318d-108">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="c318d-109">Vous pouvez l’utiliser pour les activités d’authentification et d’autorisation avec la plupart des types d’applications, notamment les [applications web](active-directory-b2c-apps.md#web-apps) et les [applications installées de façon native](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="c318d-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="c318d-110">Vous pouvez utiliser le flux de code d’autorisation OAuth 2.0 pour acquérir en toute sécurité des *jetons d’accès* pour vos applications, qui peuvent être utilisés pour accéder à des ressources sécurisés par un [serveur d’autorisation](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="c318d-110">You can use the OAuth 2.0 authorization code flow to securely acquire *access tokens* for your apps, which can be used to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="c318d-111">Cet article est axé sur le flux de code d’autorisation OAuth 2.0 pour les **clients publics**.</span><span class="sxs-lookup"><span data-stu-id="c318d-111">This article focuses on the **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="c318d-112">Un client public est une application cliente qui ne peut pas être approuvée pour maintenir de façon sécurisée l'intégrité d’un mot de passe secret.</span><span class="sxs-lookup"><span data-stu-id="c318d-112">A public client is any client application that cannot be trusted to securely maintain the integrity of a secret password.</span></span> <span data-ttu-id="c318d-113">Cela comprend les applications mobiles, les applications de bureau et quasiment toutes les applications qui s’exécutent sur un appareil et qui ont besoin d’obtenir des jetons d’accès.</span><span class="sxs-lookup"><span data-stu-id="c318d-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs to get access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="c318d-114">Pour ajouter la gestion d’identité à une application web à l’aide d’Azure AD B2C, utilisez [OpenID Connect](active-directory-b2c-reference-oidc.md) plutôt qu’OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c318d-114">To add identity management to a web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="c318d-115">Azure AD B2C étend les flux OAuth 2.0 standard pour proposer plus qu’une simple authentification et une simple autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-115">Azure AD B2C extends the standard OAuth 2.0 flows to do more than simple authentication and authorization.</span></span> <span data-ttu-id="c318d-116">Il introduit le [paramètre de stratégie](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="c318d-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="c318d-117">Avec les stratégies intégrées, vous pouvez utiliser OAuth 2.0 pour ajouter des expériences utilisateur à votre application, comme l’inscription, la connexion et la gestion des profils.</span><span class="sxs-lookup"><span data-stu-id="c318d-117">With built-in policies, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="c318d-118">Dans cet article, nous allons vous montrer comment utiliser OAuth 2.0 et des stratégies pour implémenter chacune de ces expériences dans vos applications natives.</span><span class="sxs-lookup"><span data-stu-id="c318d-118">In this article, we show you how to use OAuth 2.0 and policies to implement each of these experiences in your native applications.</span></span> <span data-ttu-id="c318d-119">Vous verrez également comment obtenir des jetons d’accès afin d’accéder à des API web.</span><span class="sxs-lookup"><span data-stu-id="c318d-119">We also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="c318d-120">Dans les exemples de demandes HTTP de cet article, nous utilisons notre exemple d’annuaire Azure AD B2C, **fabrikamb2c.onmicrosoft.com**. Nous utilisons également nos exemples d’application et de stratégies.</span><span class="sxs-lookup"><span data-stu-id="c318d-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="c318d-121">Vous pouvez essayer les demandes par vous-même en utilisant ces valeurs ou bien en les remplaçant par les vôtres.</span><span class="sxs-lookup"><span data-stu-id="c318d-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="c318d-122">Découvrez comment [obtenir vos propres stratégies, application et annuaire Azure AD B2C](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="c318d-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="c318d-123">1. Obtention d’un code d’autorisation</span><span class="sxs-lookup"><span data-stu-id="c318d-123">1. Get an authorization code</span></span>
<span data-ttu-id="c318d-124">Le flux de code d'autorisation commence par le client dirigeant l'utilisateur vers le point de terminaison `/authorize` .</span><span class="sxs-lookup"><span data-stu-id="c318d-124">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="c318d-125">Il s’agit de la partie interactive du flux, dans laquelle l’utilisateur agit réellement.</span><span class="sxs-lookup"><span data-stu-id="c318d-125">This is the interactive part of the flow, where the user takes action.</span></span> <span data-ttu-id="c318d-126">Dans cette demande, le client indique dans le paramètre `scope` les autorisations qu’il doit obtenir auprès de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c318d-126">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="c318d-127">Dans le paramètre `p`, il indique la stratégie à exécuter.</span><span class="sxs-lookup"><span data-stu-id="c318d-127">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="c318d-128">Les trois exemples suivants (avec sauts de ligne pour faciliter la lecture) utilisent chacun une stratégie différente.</span><span class="sxs-lookup"><span data-stu-id="c318d-128">The following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="c318d-129">Utilisation d’une stratégie de connexion</span><span class="sxs-lookup"><span data-stu-id="c318d-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="c318d-130">Utilisation d’une stratégie d’inscription</span><span class="sxs-lookup"><span data-stu-id="c318d-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="c318d-131">Utilisation d’une stratégie de modification de profil</span><span class="sxs-lookup"><span data-stu-id="c318d-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="c318d-132">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-132">Parameter</span></span> | <span data-ttu-id="c318d-133">Requis ?</span><span class="sxs-lookup"><span data-stu-id="c318d-133">Required?</span></span> | <span data-ttu-id="c318d-134">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c318d-135">client_id</span><span class="sxs-lookup"><span data-stu-id="c318d-135">client_id</span></span> |<span data-ttu-id="c318d-136">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-136">Required</span></span> |<span data-ttu-id="c318d-137">ID d’application affecté à votre application dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c318d-137">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="c318d-138">response_type</span><span class="sxs-lookup"><span data-stu-id="c318d-138">response_type</span></span> |<span data-ttu-id="c318d-139">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-139">Required</span></span> |<span data-ttu-id="c318d-140">Le type de réponse, qui doit inclure `code` pour le flux de code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-140">The response type, which must include `code` for the authorization code flow.</span></span> |
| <span data-ttu-id="c318d-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c318d-141">redirect_uri</span></span> |<span data-ttu-id="c318d-142">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-142">Required</span></span> |<span data-ttu-id="c318d-143">URI de redirection de votre application, où votre application envoie et reçoit des réponses d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c318d-143">The redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="c318d-144">Il doit correspondre exactement à l’un des URI de redirection que vous avez enregistrés dans le portail, sauf qu’il doit être encodé au format URL.</span><span class="sxs-lookup"><span data-stu-id="c318d-144">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="c318d-145">scope</span><span class="sxs-lookup"><span data-stu-id="c318d-145">scope</span></span> |<span data-ttu-id="c318d-146">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-146">Required</span></span> |<span data-ttu-id="c318d-147">Une liste d’étendues séparées par des espaces.</span><span class="sxs-lookup"><span data-stu-id="c318d-147">A space-separated list of scopes.</span></span> <span data-ttu-id="c318d-148">Une valeur d’étendue unique indique à Azure Active Directory (Azure AD) les deux autorisations qui sont demandées.</span><span class="sxs-lookup"><span data-stu-id="c318d-148">A single scope value indicates to Azure Active Directory (Azure AD) both of the permissions that are being requested.</span></span> <span data-ttu-id="c318d-149">Utiliser l’ID de client comme étendue indique que votre application a besoin d’un jeton d’accès qui peut être utilisé avec votre propre service ou API web, représenté par le même ID de client.</span><span class="sxs-lookup"><span data-stu-id="c318d-149">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="c318d-150">L’étendue `offline_access` indique que votre application a besoin d’un jeton d’actualisation pour un accès durable aux ressources.</span><span class="sxs-lookup"><span data-stu-id="c318d-150">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span> <span data-ttu-id="c318d-151">Vous pouvez également utiliser l’étendue `openid` pour demander un jeton d’ID à partir d’Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c318d-151">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="c318d-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="c318d-152">response_mode</span></span> |<span data-ttu-id="c318d-153">Recommandé</span><span class="sxs-lookup"><span data-stu-id="c318d-153">Recommended</span></span> |<span data-ttu-id="c318d-154">Méthode à utiliser pour renvoyer le code d’autorisation résultant à votre application.</span><span class="sxs-lookup"><span data-stu-id="c318d-154">The method that you use to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="c318d-155">Il peut s’agir de `query`, `form_post` ou `fragment`.</span><span class="sxs-lookup"><span data-stu-id="c318d-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="c318d-156">state</span><span class="sxs-lookup"><span data-stu-id="c318d-156">state</span></span> |<span data-ttu-id="c318d-157">Recommandé</span><span class="sxs-lookup"><span data-stu-id="c318d-157">Recommended</span></span> |<span data-ttu-id="c318d-158">Une valeur incluse dans la requête qui est également renvoyée dans la réponse de jeton.</span><span class="sxs-lookup"><span data-stu-id="c318d-158">A value included in the request that is returned in the token response.</span></span> <span data-ttu-id="c318d-159">Il peut s’agir d’une chaîne de n’importe quel contenu que vous voulez utiliser.</span><span class="sxs-lookup"><span data-stu-id="c318d-159">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="c318d-160">Généralement, une valeur unique générée de manière aléatoire est utilisée, pour empêcher les attaques par falsification de requête intersites.</span><span class="sxs-lookup"><span data-stu-id="c318d-160">Usually, a randomly generated unique value is  used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="c318d-161">L’état est également utilisé pour coder les informations sur l’état de l’utilisateur dans l’application avant la demande d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c318d-161">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="c318d-162">Par exemple, la page dans laquelle l’utilisateur se trouvait ou la stratégie en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="c318d-162">For example, the page the user was on, or the policy that was being executed.</span></span> |
| <span data-ttu-id="c318d-163">p</span><span class="sxs-lookup"><span data-stu-id="c318d-163">p</span></span> |<span data-ttu-id="c318d-164">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-164">Required</span></span> |<span data-ttu-id="c318d-165">Stratégie exécutée.</span><span class="sxs-lookup"><span data-stu-id="c318d-165">The policy that is executed.</span></span> <span data-ttu-id="c318d-166">Il s’agit du nom d’une stratégie créée dans votre annuaire Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c318d-166">It's the name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="c318d-167">La valeur du nom de la stratégie doit commencer par **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="c318d-167">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="c318d-168">Pour en savoir plus sur les stratégies, consultez [Stratégies intégrées d’Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="c318d-168">To learn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="c318d-169">prompt</span><span class="sxs-lookup"><span data-stu-id="c318d-169">prompt</span></span> |<span data-ttu-id="c318d-170">Facultatif</span><span class="sxs-lookup"><span data-stu-id="c318d-170">Optional</span></span> |<span data-ttu-id="c318d-171">Type d’interaction utilisateur requis.</span><span class="sxs-lookup"><span data-stu-id="c318d-171">The type of user interaction that is required.</span></span> <span data-ttu-id="c318d-172">Actuellement, la seule valeur valide est `login`, ce qui oblige l’utilisateur à entrer ses informations d’identification sur cette demande.</span><span class="sxs-lookup"><span data-stu-id="c318d-172">Currently, the only valid value is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="c318d-173">L’authentification unique ne prendra pas effet.</span><span class="sxs-lookup"><span data-stu-id="c318d-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="c318d-174">À ce stade, il est demandé à l’utilisateur d’effectuer le flux de travail de la stratégie.</span><span class="sxs-lookup"><span data-stu-id="c318d-174">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="c318d-175">Il est possible que l’utilisateur doive entrer son nom d’utilisateur et son mot de passe, se connecter avec une identité sociale, s’inscrire à l’annuaire, etc.</span><span class="sxs-lookup"><span data-stu-id="c318d-175">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="c318d-176">Les actions de l’utilisateur dépendent de la façon dont la stratégie est définie.</span><span class="sxs-lookup"><span data-stu-id="c318d-176">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="c318d-177">Une fois que l’utilisateur a terminé la stratégie, Azure AD retourne une réponse à votre application avec la valeur que vous avez utilisée pour `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="c318d-177">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="c318d-178">Il utilise la méthode spécifiée dans le paramètre `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="c318d-178">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="c318d-179">La réponse est exactement la même pour chacun des scénarios d’actions utilisateur, indépendamment de la stratégie exécutée.</span><span class="sxs-lookup"><span data-stu-id="c318d-179">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

<span data-ttu-id="c318d-180">Une réponse correcte utilisant `response_mode=query` se présente ainsi :</span><span class="sxs-lookup"><span data-stu-id="c318d-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| <span data-ttu-id="c318d-181">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-181">Parameter</span></span> | <span data-ttu-id="c318d-182">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c318d-183">code</span><span class="sxs-lookup"><span data-stu-id="c318d-183">code</span></span> |<span data-ttu-id="c318d-184">Le code d’autorisation demandé par l’application.</span><span class="sxs-lookup"><span data-stu-id="c318d-184">The authorization code that the app requested.</span></span> <span data-ttu-id="c318d-185">L’application peut utiliser le code d’autorisation pour demander un jeton d’accès pour une ressource cible.</span><span class="sxs-lookup"><span data-stu-id="c318d-185">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="c318d-186">Les codes d’autorisation ont des durées de vie très courtes.</span><span class="sxs-lookup"><span data-stu-id="c318d-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="c318d-187">Généralement, ils expirent au bout de 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="c318d-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="c318d-188">state</span><span class="sxs-lookup"><span data-stu-id="c318d-188">state</span></span> |<span data-ttu-id="c318d-189">Consultez la description complète dans le tableau de la section précédente.</span><span class="sxs-lookup"><span data-stu-id="c318d-189">See the full description in the table in the preceding section.</span></span> <span data-ttu-id="c318d-190">Si un paramètre `state` est inclus dans la demande, la même valeur doit apparaître dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="c318d-190">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="c318d-191">L’application doit vérifier que les valeurs `state` de la demande et de la réponse sont identiques.</span><span class="sxs-lookup"><span data-stu-id="c318d-191">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="c318d-192">Les réponses d’erreur peuvent également être envoyées à l’URI de redirection, pour que l’application puisse les traiter de façon appropriée :</span><span class="sxs-lookup"><span data-stu-id="c318d-192">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="c318d-193">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-193">Parameter</span></span> | <span data-ttu-id="c318d-194">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c318d-195">error</span><span class="sxs-lookup"><span data-stu-id="c318d-195">error</span></span> |<span data-ttu-id="c318d-196">Chaîne de code d’erreur que vous pouvez utiliser pour classer les types d’erreurs se produisant.</span><span class="sxs-lookup"><span data-stu-id="c318d-196">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="c318d-197">Vous pouvez également utiliser la chaîne pour réagir aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="c318d-197">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="c318d-198">error_description</span><span class="sxs-lookup"><span data-stu-id="c318d-198">error_description</span></span> |<span data-ttu-id="c318d-199">Un message d’erreur spécifique qui peut vous aider à identifier la cause principale d’une erreur d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c318d-199">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="c318d-200">state</span><span class="sxs-lookup"><span data-stu-id="c318d-200">state</span></span> |<span data-ttu-id="c318d-201">Consultez la description complète dans le tableau précédent.</span><span class="sxs-lookup"><span data-stu-id="c318d-201">See the full description in the preceding table.</span></span> <span data-ttu-id="c318d-202">Si un paramètre `state` est inclus dans la demande, la même valeur doit apparaître dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="c318d-202">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="c318d-203">L’application doit vérifier que les valeurs `state` de la demande et de la réponse sont identiques.</span><span class="sxs-lookup"><span data-stu-id="c318d-203">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="c318d-204">2. Obtention d’un jeton</span><span class="sxs-lookup"><span data-stu-id="c318d-204">2. Get a token</span></span>
<span data-ttu-id="c318d-205">Un code d’autorisation étant acquis, vous pouvez maintenant échanger `code` contre un jeton sur la ressource prévue en envoyant une demande POST au point de terminaison `/token`.</span><span class="sxs-lookup"><span data-stu-id="c318d-205">Now that you've acquired an authorization code, you can redeem the `code` for a token to the intended resource by sending a POST request to the `/token` endpoint.</span></span> <span data-ttu-id="c318d-206">Dans Azure AD B2C, la seule ressource pour laquelle vous pouvez demander un jeton est l’API web principale de votre application.</span><span class="sxs-lookup"><span data-stu-id="c318d-206">In Azure AD B2C, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="c318d-207">La convention utilisée pour demander un jeton à vous-même consiste à utiliser votre ID de client d’application en tant qu’étendue :</span><span class="sxs-lookup"><span data-stu-id="c318d-207">The convention that's used for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="c318d-208">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-208">Parameter</span></span> | <span data-ttu-id="c318d-209">Requis ?</span><span class="sxs-lookup"><span data-stu-id="c318d-209">Required?</span></span> | <span data-ttu-id="c318d-210">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c318d-211">p</span><span class="sxs-lookup"><span data-stu-id="c318d-211">p</span></span> |<span data-ttu-id="c318d-212">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-212">Required</span></span> |<span data-ttu-id="c318d-213">La stratégie qui a été utilisée pour obtenir le code d'autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-213">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="c318d-214">Vous ne pouvez pas utiliser une autre stratégie dans cette demande.</span><span class="sxs-lookup"><span data-stu-id="c318d-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="c318d-215">Notez que vous ajoutez ce paramètre à la *chaîne de requête*, et non au corps POST.</span><span class="sxs-lookup"><span data-stu-id="c318d-215">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="c318d-216">client_id</span><span class="sxs-lookup"><span data-stu-id="c318d-216">client_id</span></span> |<span data-ttu-id="c318d-217">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-217">Required</span></span> |<span data-ttu-id="c318d-218">ID d’application affecté à votre application dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c318d-218">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="c318d-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="c318d-219">grant_type</span></span> |<span data-ttu-id="c318d-220">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-220">Required</span></span> |<span data-ttu-id="c318d-221">Type d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-221">The type of grant.</span></span> <span data-ttu-id="c318d-222">Pour le flux de code d’autorisation, le type d’autorisation doit être `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="c318d-222">For the authorization code flow, the grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="c318d-223">scope</span><span class="sxs-lookup"><span data-stu-id="c318d-223">scope</span></span> |<span data-ttu-id="c318d-224">Recommandé</span><span class="sxs-lookup"><span data-stu-id="c318d-224">Recommended</span></span> |<span data-ttu-id="c318d-225">Une liste d’étendues séparées par des espaces.</span><span class="sxs-lookup"><span data-stu-id="c318d-225">A space-separated list of scopes.</span></span> <span data-ttu-id="c318d-226">Une valeur d’étendue unique indique à Azure AD les deux autorisations qui sont demandées.</span><span class="sxs-lookup"><span data-stu-id="c318d-226">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="c318d-227">Utiliser l’ID de client comme étendue indique que votre application a besoin d’un jeton d’accès qui peut être utilisé avec votre propre service ou API web, représenté par le même ID de client.</span><span class="sxs-lookup"><span data-stu-id="c318d-227">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="c318d-228">L’étendue `offline_access` indique que votre application a besoin d’un jeton d’actualisation pour un accès durable aux ressources.</span><span class="sxs-lookup"><span data-stu-id="c318d-228">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="c318d-229">Vous pouvez également utiliser l’étendue `openid` pour demander un jeton d’ID à partir d’Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c318d-229">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="c318d-230">code</span><span class="sxs-lookup"><span data-stu-id="c318d-230">code</span></span> |<span data-ttu-id="c318d-231">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-231">Required</span></span> |<span data-ttu-id="c318d-232">Code d’autorisation acquis dans le premier tronçon du flux.</span><span class="sxs-lookup"><span data-stu-id="c318d-232">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="c318d-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c318d-233">redirect_uri</span></span> |<span data-ttu-id="c318d-234">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-234">Required</span></span> |<span data-ttu-id="c318d-235">URI de redirection de l’application où vous avez reçu le code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-235">The redirect URI of the application where you received the authorization code.</span></span> |

<span data-ttu-id="c318d-236">Un jeton de réponse correct se présente ainsi :</span><span class="sxs-lookup"><span data-stu-id="c318d-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="c318d-237">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-237">Parameter</span></span> | <span data-ttu-id="c318d-238">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c318d-239">not_before</span><span class="sxs-lookup"><span data-stu-id="c318d-239">not_before</span></span> |<span data-ttu-id="c318d-240">Heure à laquelle le jeton est considéré comme valide, en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="c318d-240">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="c318d-241">token_type</span><span class="sxs-lookup"><span data-stu-id="c318d-241">token_type</span></span> |<span data-ttu-id="c318d-242">Valeur du type de jeton.</span><span class="sxs-lookup"><span data-stu-id="c318d-242">The token type value.</span></span> <span data-ttu-id="c318d-243">Le seul type de jeton pris en charge par Azure AD est le jeton porteur.</span><span class="sxs-lookup"><span data-stu-id="c318d-243">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="c318d-244">access_token</span><span class="sxs-lookup"><span data-stu-id="c318d-244">access_token</span></span> |<span data-ttu-id="c318d-245">JSON Web Token (JWT) signé que vous avez demandé.</span><span class="sxs-lookup"><span data-stu-id="c318d-245">The signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="c318d-246">scope</span><span class="sxs-lookup"><span data-stu-id="c318d-246">scope</span></span> |<span data-ttu-id="c318d-247">Étendues de validité du jeton.</span><span class="sxs-lookup"><span data-stu-id="c318d-247">The scopes that the token is valid for.</span></span> <span data-ttu-id="c318d-248">Vous pouvez également utiliser des étendues pour mettre en cache des jetons pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="c318d-248">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="c318d-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="c318d-249">expires_in</span></span> |<span data-ttu-id="c318d-250">La durée de validité du jeton (en secondes).</span><span class="sxs-lookup"><span data-stu-id="c318d-250">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="c318d-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="c318d-251">refresh_token</span></span> |<span data-ttu-id="c318d-252">Un jeton d’actualisation OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c318d-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="c318d-253">L’application peut utiliser ce jeton pour acquérir des jetons supplémentaires après l’expiration du jeton actuel.</span><span class="sxs-lookup"><span data-stu-id="c318d-253">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="c318d-254">Les jetons d’actualisation sont de longue durée.</span><span class="sxs-lookup"><span data-stu-id="c318d-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="c318d-255">Vous pouvez les utiliser pour conserver l’accès aux ressources pendant de longues périodes.</span><span class="sxs-lookup"><span data-stu-id="c318d-255">You can use them to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="c318d-256">Pour plus d’informations, consultez la [référence sur les jetons Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c318d-256">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="c318d-257">Les réponses d’erreur ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="c318d-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="c318d-258">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-258">Parameter</span></span> | <span data-ttu-id="c318d-259">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c318d-260">error</span><span class="sxs-lookup"><span data-stu-id="c318d-260">error</span></span> |<span data-ttu-id="c318d-261">Chaîne de code d’erreur que vous pouvez utiliser pour classer les types d’erreurs se produisant.</span><span class="sxs-lookup"><span data-stu-id="c318d-261">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="c318d-262">Vous pouvez également utiliser la chaîne pour réagir aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="c318d-262">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="c318d-263">error_description</span><span class="sxs-lookup"><span data-stu-id="c318d-263">error_description</span></span> |<span data-ttu-id="c318d-264">Un message d’erreur spécifique qui peut vous aider à identifier la cause principale d’une erreur d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c318d-264">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="3-use-the-token"></a><span data-ttu-id="c318d-265">3. Utilisation du jeton</span><span class="sxs-lookup"><span data-stu-id="c318d-265">3. Use the token</span></span>
<span data-ttu-id="c318d-266">Un jeton d’accès étant acquis, vous pouvez maintenant l’utiliser dans les demandes dirigées vers vos API web principales en l’incluant dans l’en-tête `Authorization` :</span><span class="sxs-lookup"><span data-stu-id="c318d-266">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a><span data-ttu-id="c318d-267">4. Actualisation du jeton</span><span class="sxs-lookup"><span data-stu-id="c318d-267">4. Refresh the token</span></span>
<span data-ttu-id="c318d-268">Les jetons d’accès et les jetons d’ID ont une courte durée de vie.</span><span class="sxs-lookup"><span data-stu-id="c318d-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="c318d-269">Après leur expiration, vous devez les actualiser pour continuer à accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="c318d-269">After they expire, you must refresh them to continue to access resources.</span></span> <span data-ttu-id="c318d-270">Pour cela, envoyez une autre demande POST au point de terminaison `/token`.</span><span class="sxs-lookup"><span data-stu-id="c318d-270">To do this, submit another POST request to the `/token` endpoint.</span></span> <span data-ttu-id="c318d-271">Cette fois, fournissez l’élément `refresh_token` au lieu de l’élément `code` :</span><span class="sxs-lookup"><span data-stu-id="c318d-271">This time, provide the `refresh_token` instead of the `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="c318d-272">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-272">Parameter</span></span> | <span data-ttu-id="c318d-273">Requis ?</span><span class="sxs-lookup"><span data-stu-id="c318d-273">Required?</span></span> | <span data-ttu-id="c318d-274">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c318d-275">p</span><span class="sxs-lookup"><span data-stu-id="c318d-275">p</span></span> |<span data-ttu-id="c318d-276">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-276">Required</span></span> |<span data-ttu-id="c318d-277">Stratégie utilisée pour obtenir le jeton d’actualisation d’origine.</span><span class="sxs-lookup"><span data-stu-id="c318d-277">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="c318d-278">Vous ne pouvez pas utiliser une autre stratégie dans cette demande.</span><span class="sxs-lookup"><span data-stu-id="c318d-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="c318d-279">Notez que vous ajoutez ce paramètre à la *chaîne de requête*, et non au corps POST.</span><span class="sxs-lookup"><span data-stu-id="c318d-279">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="c318d-280">client_id</span><span class="sxs-lookup"><span data-stu-id="c318d-280">client_id</span></span> |<span data-ttu-id="c318d-281">Recommandé</span><span class="sxs-lookup"><span data-stu-id="c318d-281">Recommended</span></span> |<span data-ttu-id="c318d-282">ID d’application affecté à votre application dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c318d-282">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="c318d-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="c318d-283">grant_type</span></span> |<span data-ttu-id="c318d-284">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-284">Required</span></span> |<span data-ttu-id="c318d-285">Type d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-285">The type of grant.</span></span> <span data-ttu-id="c318d-286">Pour ce tronçon du flux de code d’autorisation, le type d’autorisation doit être `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="c318d-286">For this leg of the authorization code flow, the grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="c318d-287">scope</span><span class="sxs-lookup"><span data-stu-id="c318d-287">scope</span></span> |<span data-ttu-id="c318d-288">Recommandé</span><span class="sxs-lookup"><span data-stu-id="c318d-288">Recommended</span></span> |<span data-ttu-id="c318d-289">Une liste d’étendues séparées par des espaces.</span><span class="sxs-lookup"><span data-stu-id="c318d-289">A space-separated list of scopes.</span></span> <span data-ttu-id="c318d-290">Une valeur d’étendue unique indique à Azure AD les deux autorisations qui sont demandées.</span><span class="sxs-lookup"><span data-stu-id="c318d-290">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="c318d-291">Utiliser l’ID de client comme étendue indique que votre application a besoin d’un jeton d’accès qui peut être utilisé avec votre propre service ou API web, représenté par le même ID de client.</span><span class="sxs-lookup"><span data-stu-id="c318d-291">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="c318d-292">L’étendue `offline_access` indique que votre application a besoin d’un jeton d’actualisation pour un accès durable aux ressources.</span><span class="sxs-lookup"><span data-stu-id="c318d-292">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="c318d-293">Vous pouvez également utiliser l’étendue `openid` pour demander un jeton d’ID à partir d’Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c318d-293">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="c318d-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c318d-294">redirect_uri</span></span> |<span data-ttu-id="c318d-295">Facultatif</span><span class="sxs-lookup"><span data-stu-id="c318d-295">Optional</span></span> |<span data-ttu-id="c318d-296">URI de redirection de l’application où vous avez reçu le code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="c318d-296">The redirect URI of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="c318d-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="c318d-297">refresh_token</span></span> |<span data-ttu-id="c318d-298">Requis</span><span class="sxs-lookup"><span data-stu-id="c318d-298">Required</span></span> |<span data-ttu-id="c318d-299">Jeton d’actualisation d’origine que vous avez acquis dans le second tronçon du flux.</span><span class="sxs-lookup"><span data-stu-id="c318d-299">The original refresh token that you acquired in the second leg of the flow.</span></span> |

<span data-ttu-id="c318d-300">Un jeton de réponse correct se présente ainsi :</span><span class="sxs-lookup"><span data-stu-id="c318d-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="c318d-301">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-301">Parameter</span></span> | <span data-ttu-id="c318d-302">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c318d-303">not_before</span><span class="sxs-lookup"><span data-stu-id="c318d-303">not_before</span></span> |<span data-ttu-id="c318d-304">Heure à laquelle le jeton est considéré comme valide, en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="c318d-304">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="c318d-305">token_type</span><span class="sxs-lookup"><span data-stu-id="c318d-305">token_type</span></span> |<span data-ttu-id="c318d-306">Valeur du type de jeton.</span><span class="sxs-lookup"><span data-stu-id="c318d-306">The token type value.</span></span> <span data-ttu-id="c318d-307">Le seul type de jeton pris en charge par Azure AD est le jeton porteur.</span><span class="sxs-lookup"><span data-stu-id="c318d-307">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="c318d-308">access_token</span><span class="sxs-lookup"><span data-stu-id="c318d-308">access_token</span></span> |<span data-ttu-id="c318d-309">Jeton JWT signé que vous avez demandé.</span><span class="sxs-lookup"><span data-stu-id="c318d-309">The signed JWT that you requested.</span></span> |
| <span data-ttu-id="c318d-310">scope</span><span class="sxs-lookup"><span data-stu-id="c318d-310">scope</span></span> |<span data-ttu-id="c318d-311">Étendues de validité du jeton.</span><span class="sxs-lookup"><span data-stu-id="c318d-311">The scopes that the token is valid for.</span></span> <span data-ttu-id="c318d-312">Vous pouvez également utiliser les étendues pour mettre en cache des jetons pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="c318d-312">You also can use the scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="c318d-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="c318d-313">expires_in</span></span> |<span data-ttu-id="c318d-314">La durée de validité du jeton (en secondes).</span><span class="sxs-lookup"><span data-stu-id="c318d-314">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="c318d-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="c318d-315">refresh_token</span></span> |<span data-ttu-id="c318d-316">Un jeton d’actualisation OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c318d-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="c318d-317">L’application peut utiliser ce jeton pour acquérir des jetons supplémentaires après l’expiration du jeton actuel.</span><span class="sxs-lookup"><span data-stu-id="c318d-317">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="c318d-318">Les jetons d’actualisation sont durables, et peuvent être utilisés pour conserver l’accès aux ressources pendant des périodes prolongées.</span><span class="sxs-lookup"><span data-stu-id="c318d-318">Refresh tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="c318d-319">Pour plus d’informations, consultez la [référence sur les jetons Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c318d-319">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="c318d-320">Les réponses d’erreur ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="c318d-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="c318d-321">Paramètre</span><span class="sxs-lookup"><span data-stu-id="c318d-321">Parameter</span></span> | <span data-ttu-id="c318d-322">Description</span><span class="sxs-lookup"><span data-stu-id="c318d-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c318d-323">error</span><span class="sxs-lookup"><span data-stu-id="c318d-323">error</span></span> |<span data-ttu-id="c318d-324">Chaîne de code d’erreur que vous pouvez utiliser pour classer les types d’erreurs qui se produisent.</span><span class="sxs-lookup"><span data-stu-id="c318d-324">An error code string that you can use to classify types of errors that occur.</span></span> <span data-ttu-id="c318d-325">Vous pouvez également utiliser la chaîne pour réagir aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="c318d-325">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="c318d-326">error_description</span><span class="sxs-lookup"><span data-stu-id="c318d-326">error_description</span></span> |<span data-ttu-id="c318d-327">Un message d’erreur spécifique qui peut vous aider à identifier la cause principale d’une erreur d’authentification.</span><span class="sxs-lookup"><span data-stu-id="c318d-327">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="c318d-328">Utiliser votre propre annuaire Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="c318d-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="c318d-329">Pour essayer vous-même ces demandes, effectuez les étapes suivantes.</span><span class="sxs-lookup"><span data-stu-id="c318d-329">To try these requests yourself, complete the following steps.</span></span> <span data-ttu-id="c318d-330">Remplacez les exemples de valeurs que nous utilisons dans cet article par vos propres valeurs.</span><span class="sxs-lookup"><span data-stu-id="c318d-330">Replace the example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="c318d-331">[Créez un annuaire Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="c318d-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="c318d-332">Utilisez le nom de votre annuaire dans les demandes.</span><span class="sxs-lookup"><span data-stu-id="c318d-332">Use the name of your directory in the requests.</span></span>
2. <span data-ttu-id="c318d-333">[Créez une application](active-directory-b2c-app-registration.md) pour obtenir un ID d’application et un URI de redirection.</span><span class="sxs-lookup"><span data-stu-id="c318d-333">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a redirect URI.</span></span> <span data-ttu-id="c318d-334">Incluez un client natif dans votre application.</span><span class="sxs-lookup"><span data-stu-id="c318d-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="c318d-335">[Créez vos stratégies](active-directory-b2c-reference-policies.md) pour obtenir les noms de vos stratégies.</span><span class="sxs-lookup"><span data-stu-id="c318d-335">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

