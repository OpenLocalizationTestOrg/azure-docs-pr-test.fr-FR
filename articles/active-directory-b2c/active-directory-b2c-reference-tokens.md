---
title: "Azure Active Directory B2C : informations de référence sur les jetons | Microsoft Docs"
description: "Types de jetons émis dans Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 39cfbc1c6dea138fe2f1eb3190770606f3895d40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="c5f7f-103">Azure AD B2C: références sur les jetons</span><span class="sxs-lookup"><span data-stu-id="c5f7f-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="c5f7f-104">Azure Active Directory B2C (Azure AD B2C) émet plusieurs types de jetons de sécurité lors du traitement de chaque [flux d’authentification](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="c5f7f-105">Ce document décrit le format, les caractéristiques en matière de sécurité et le contenu de chaque type de jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="c5f7f-106">Types de jetons</span><span class="sxs-lookup"><span data-stu-id="c5f7f-106">Types of tokens</span></span>
<span data-ttu-id="c5f7f-107">Azure AD B2C prend en charge le [protocole d’autorisation OAuth 2.0](active-directory-b2c-reference-protocols.md)qui utilise à la fois les jetons d’accès et les jetons d’actualisation.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-107">Azure AD B2C supports the [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="c5f7f-108">Il prend également en charge l’authentification et la connexion via [OpenID Connect](active-directory-b2c-reference-protocols.md), ce qui introduit un troisième type de jeton : le jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: the ID token.</span></span> <span data-ttu-id="c5f7f-109">Chacun de ces jetons est représenté en tant que jeton du porteur.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="c5f7f-110">Un jeton du porteur est un jeton de sécurité léger qui octroie l’accès à une ressource protégée au « porteur ».</span><span class="sxs-lookup"><span data-stu-id="c5f7f-110">A bearer token is a lightweight security token that grants the "bearer" access to a protected resource.</span></span> <span data-ttu-id="c5f7f-111">En ce sens, le porteur désigne toute partie qui peut présenter le jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-111">The bearer is any party that can present the token.</span></span> <span data-ttu-id="c5f7f-112">Une partie doit d’abord s’authentifier auprès d’Azure AD pour recevoir un jeton du porteur,</span><span class="sxs-lookup"><span data-stu-id="c5f7f-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="c5f7f-113">mais si les mécanismes nécessaires à la sécurité du jeton lors de la transmission et du stockage ne sont pas en place, il peut être intercepté et utilisé par une partie non autorisée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-113">But if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="c5f7f-114">Bien que certains jetons de sécurité intègrent un mécanisme de protection contre l’utilisation par des parties non autorisées, les jetons du porteur n’en sont pas dotés et</span><span class="sxs-lookup"><span data-stu-id="c5f7f-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="c5f7f-115">doivent donc être acheminés sur un canal sécurisé, par exemple à l’aide du protocole TLS (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="c5f7f-116">Si un jeton du porteur est transmis en dehors d’un canal sécurisé, une partie malveillante peut utiliser une attaque d’intercepteur afin de s’approprier le jeton et de l’utiliser pour accéder sans autorisation à une ressource protégée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack to acquire the token and use it to gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="c5f7f-117">Les mêmes principes de sécurité s’appliquent au stockage ou à la mise en cache des jetons du porteur pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-117">The same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="c5f7f-118">Veillez systématiquement à ce que votre application transmette et stocke les jetons porteurs de manière sécurisée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="c5f7f-119">Pour en savoir plus sur les aspects de sécurité des jetons du porteur, consultez [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="c5f7f-120">La plupart des jetons émis par Azure AD B2C sont implémentés en tant que jetons web JSON (JWT).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-120">Many of the tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="c5f7f-121">Un jeton JWT constitue un moyen compact et sécurisé pour les URL de transférer des informations entre deux parties.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="c5f7f-122">Les jetons JWT contiennent des informations appelées revendications.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="c5f7f-123">Il s’agit des assertions d’informations concernant le porteur et le sujet du jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-123">These are assertions of information about the bearer and the subject of the token.</span></span> <span data-ttu-id="c5f7f-124">Les revendications dans les jetons JWT sont des objets JSON codés et sérialisés pour la transmission.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-124">The claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="c5f7f-125">Étant donné que les jetons JWT émis par Azure AD B2C sont signés, mais pas chiffrés, vous pouvez facilement inspecter le contenu d’un jeton JWT à des fins de débogage.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-125">Because the JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect the contents of a JWT to debug it.</span></span> <span data-ttu-id="c5f7f-126">Pour ce faire, plusieurs outils sont à votre disposition, y compris [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="c5f7f-127">Pour plus d’informations sur les jetons JWT, consultez les [spécifications des jetons JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-127">For more information about JWTs, refer to [JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="c5f7f-128">Jetons d’ID</span><span class="sxs-lookup"><span data-stu-id="c5f7f-128">ID tokens</span></span>
<span data-ttu-id="c5f7f-129">Les jetons d’ID constituent une forme de jeton de sécurité que votre application reçoit des points de terminaison `authorize` et `token` d’Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-129">An ID token is a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="c5f7f-130">Ils sont représentés en tant que [jetons JWT](#types-of-tokens)et contiennent des revendications que vous pouvez utiliser pour identifier l’utilisateur dans votre application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify users in your app.</span></span> <span data-ttu-id="c5f7f-131">Lorsqu’ils sont acquis à partir du point de terminaison `authorize` , ils sont souvent utilisés pour connecter les utilisateurs à des applications web.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-131">When ID tokens are acquired from the `authorize` endpoint, they are often used to sign in users to web applications.</span></span> <span data-ttu-id="c5f7f-132">Lorsqu’ils sont acquis à partir du point de terminaison `token` , ils peuvent être envoyés dans les demandes HTTP lors de la communication entre deux composants de la même application ou du même service.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-132">When ID tokens are acquired from the `token` endpoint, they can be sent in HTTP requests during communication between two components of the same application or service.</span></span> <span data-ttu-id="c5f7f-133">Vous pouvez utiliser les revendications dans un jeton d’ID comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-133">You can use the claims in an ID token as you see fit.</span></span> <span data-ttu-id="c5f7f-134">Ils sont souvent utilisés pour afficher les informations de compte ou pour prendre des décisions de contrôle d’accès dans une application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-134">They are commonly used to display account information or to make access control decisions in an app.</span></span>  

<span data-ttu-id="c5f7f-135">Les jetons d’ID sont signés, mais ils ne sont actuellement pas chiffrés.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="c5f7f-136">Lorsque votre application ou votre API reçoit un jeton d’ID, elle doit [valider la signature](#token-validation) pour prouver que le jeton est authentique.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-136">When your app or API receives an ID token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="c5f7f-137">Votre application ou votre API doit également valider certaines revendications du jeton pour prouver qu’il est valide.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-137">Your app or API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="c5f7f-138">Les revendications validées par une application varient selon les spécifications du scénario, mais il existe certaines [validations de revendication communes](#token-validation) auxquelles votre application doit procéder dans chaque scénario.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-138">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="c5f7f-139">Exemple de jeton d’ID</span><span class="sxs-lookup"><span data-stu-id="c5f7f-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="c5f7f-140">Jetons d’accès</span><span class="sxs-lookup"><span data-stu-id="c5f7f-140">Access tokens</span></span>
<span data-ttu-id="c5f7f-141">Les jetons d’accès constituent également une forme de jeton de sécurité que votre application reçoit des points de terminaison `authorize` et `token` d’Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-141">An access token is also a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="c5f7f-142">Ils sont également représentés en tant que [jetons JWT](#types-of-tokens) et contiennent des revendications que vous pouvez utiliser pour identifier les autorisations octroyées à vos API.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify the granted permissions to your APIs.</span></span> <span data-ttu-id="c5f7f-143">Les jetons d’accès sont signés, mais ils ne sont actuellement pas chiffrés.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="c5f7f-144">Les jetons d’accès permettent de fournir l’accès aux API et serveurs de ressources.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-144">Access tokens should be used to provide access to APIs and resource servers.</span></span> <span data-ttu-id="c5f7f-145">Découvrez plus d’informations sur [l’utilisation des jetons d’accès](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-145">Learn more about how to [use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="c5f7f-146">Lorsque votre API reçoit un jeton d’accès, elle doit [valider la signature](#token-validation) pour prouver que le jeton est authentique.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-146">When your API receives an access token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="c5f7f-147">Votre API doit également valider certaines revendications du jeton pour prouver qu’il est valide.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-147">Your API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="c5f7f-148">Les revendications validées par une application varient selon les spécifications du scénario, mais il existe certaines [validations de revendication communes](#token-validation) auxquelles votre application doit procéder dans chaque scénario.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-148">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="c5f7f-149">Revendications dans les jetons d’ID et d’accès</span><span class="sxs-lookup"><span data-stu-id="c5f7f-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="c5f7f-150">Lorsque vous utilisez Azure AD B2C, vous disposez d’un contrôle affiné du contenu de vos jetons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-150">When you use Azure AD B2C, you have fine-grained control over the content of your tokens.</span></span> <span data-ttu-id="c5f7f-151">Vous pouvez configurer des [stratégies](active-directory-b2c-reference-policies.md) pour envoyer certains ensembles de données utilisateur dans les revendications dont votre application a besoin pour ses opérations.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-151">You can configure [policies](active-directory-b2c-reference-policies.md) to send certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="c5f7f-152">Ces revendications peuvent inclure des propriétés standard telles que `displayName` et `emailAddress` de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-152">These claims can include standard properties such as the user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="c5f7f-153">Elles peuvent également inclure des [attributs d’utilisateur personnalisés](active-directory-b2c-reference-custom-attr.md) que vous pouvez définir dans votre répertoire B2C.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="c5f7f-154">Chaque jeton d’ID et d’accès que vous recevez contient un certain ensemble de revendications relatives à la sécurité.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="c5f7f-155">Vos applications peuvent utiliser ces revendications pour authentifier de manière sécurisée les utilisateurs et les demandes.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-155">Your applications can use these claims to securely authenticate users and requests.</span></span>

<span data-ttu-id="c5f7f-156">Les revendications dans les jetons d’ID ne sont pas retournées dans un ordre particulier.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-156">Note that the claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="c5f7f-157">En outre, de nouvelles revendications peuvent être introduites dans les jetons d’ID à tout moment.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="c5f7f-158">Votre application ne doit pas s’arrêter lors de l’ajout de nouvelles revendications.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="c5f7f-159">Voici les revendications qui doivent exister dans les jetons d’ID et d’accès émis par Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-159">Here are the claims that you expect to exist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="c5f7f-160">Les éventuelles revendications supplémentaires sont déterminées par des stratégies.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="c5f7f-161">Pour vous entraîner, essayez d’inspecter les revendications dans l’exemple de jeton d’ID en le collant dans [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-161">For practice, try inspecting the claims in the sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="c5f7f-162">Vous trouverez des informations supplémentaires dans les [spécifications OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-162">Further details can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="c5f7f-163">Nom</span><span class="sxs-lookup"><span data-stu-id="c5f7f-163">Name</span></span> | <span data-ttu-id="c5f7f-164">Revendication</span><span class="sxs-lookup"><span data-stu-id="c5f7f-164">Claim</span></span> | <span data-ttu-id="c5f7f-165">Exemple de valeur</span><span class="sxs-lookup"><span data-stu-id="c5f7f-165">Example value</span></span> | <span data-ttu-id="c5f7f-166">Description</span><span class="sxs-lookup"><span data-stu-id="c5f7f-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c5f7f-167">Audience</span><span class="sxs-lookup"><span data-stu-id="c5f7f-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="c5f7f-168">Une revendication d’audience identifie le destinataire du jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-168">An audience claim identifies the intended recipient of the token.</span></span> <span data-ttu-id="c5f7f-169">Dans Azure AD B2C, l’audience est l’ID attribué à votre application dans le portail d’inscription de l’application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-169">For Azure AD B2C, the audience is your app's application ID, as assigned to your app in the app registration portal.</span></span> <span data-ttu-id="c5f7f-170">Votre application doit valider cette valeur et rejeter le jeton s’il ne correspond pas.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-170">Your app should validate this value and reject the token if it does not match.</span></span> |
| <span data-ttu-id="c5f7f-171">Émetteur</span><span class="sxs-lookup"><span data-stu-id="c5f7f-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="c5f7f-172">La revendication identifie le service d’émission de jeton de sécurité (STS) qui construit et retourne le jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-172">This claim identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="c5f7f-173">Elle identifie également le répertoire Azure AD dans lequel l’utilisateur a été authentifié.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-173">It also identifies the Azure AD directory in which the user was authenticated.</span></span> <span data-ttu-id="c5f7f-174">Votre application doit valider la revendication de l’émetteur de manière à s’assurer que le jeton provient bien du point de terminaison Azure Active Directory v2.0.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-174">Your app should validate the issuer claim to ensure that the token came from the Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="c5f7f-175">Émis à</span><span class="sxs-lookup"><span data-stu-id="c5f7f-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="c5f7f-176">Cette revendication est l’heure à laquelle le jeton a été émis, représentée en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-176">This claim is the time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="c5f7f-177">Heure d’expiration</span><span class="sxs-lookup"><span data-stu-id="c5f7f-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="c5f7f-178">Cette revendication d’heure d’expiration est l’heure à laquelle le jeton n’est plus valide, représentée en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-178">The expiration time claim is the time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="c5f7f-179">Votre application doit utiliser cette revendication pour vérifier la validité de la durée de vie du jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-179">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="c5f7f-180">Pas avant</span><span class="sxs-lookup"><span data-stu-id="c5f7f-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="c5f7f-181">Cette revendication est l’heure à laquelle le jeton devient valide, représentée en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-181">This claim is the time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="c5f7f-182">Cela correspond généralement à l’heure à laquelle le jeton a été émis.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-182">This is usually the same as the time the token was issued.</span></span> <span data-ttu-id="c5f7f-183">Votre application doit utiliser cette revendication pour vérifier la validité de la durée de vie du jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-183">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="c5f7f-184">Version</span><span class="sxs-lookup"><span data-stu-id="c5f7f-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="c5f7f-185">Version du jeton d’ID, telle que définie par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-185">This is the version of the ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="c5f7f-186">Hachage de code</span><span class="sxs-lookup"><span data-stu-id="c5f7f-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="c5f7f-187">Le hachage de code n’est inclus dans un jeton d’ID que si ce dernier est émis en même temps qu’un code d’autorisation OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-187">A code hash is included in an ID token only when the token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="c5f7f-188">Il peut servir à valider l’authenticité d’un code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-188">A code hash can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="c5f7f-189">Pour plus d’informations sur la façon d’effectuer cette validation, consultez la [spécification OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-189">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="c5f7f-190">Hachage de jeton d’accès</span><span class="sxs-lookup"><span data-stu-id="c5f7f-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="c5f7f-191">Le hachage de jeton d’accès n’est inclus dans un jeton d’ID que si ce dernier est émis en même temps qu’un jeton d’accès OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-191">An access token hash is included in an ID token only when the token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="c5f7f-192">Un hachage de jeton d’accès peut servir à valider l’authenticité d’un jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-192">An access token hash can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="c5f7f-193">Pour plus d’informations sur la façon d’effectuer cette validation, consultez la [spécification OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-193">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="c5f7f-194">Valeur à usage unique</span><span class="sxs-lookup"><span data-stu-id="c5f7f-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="c5f7f-195">La valeur à usage unique est une stratégie d’atténuation des attaques par relecture de jetons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-195">A nonce is a strategy used to mitigate token replay attacks.</span></span> <span data-ttu-id="c5f7f-196">Votre application peut spécifier une valeur à usage unique dans une demande d’autorisation à l’aide du paramètre de requête `nonce` .</span><span class="sxs-lookup"><span data-stu-id="c5f7f-196">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="c5f7f-197">La valeur que vous fournissez dans la demande est émise sans aucune modification dans la revendication `nonce` du jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-197">The value you provide in the request will be emitted unmodified in the `nonce` claim of an ID token only.</span></span> <span data-ttu-id="c5f7f-198">Cela permet à votre application de comparer la valeur à celle spécifiée dans la demande et d’associer la session de l’application à un jeton d’ID donné.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-198">This allows your app to verify the value against the value it specified on the request, which associates the app's session with a given ID token.</span></span> <span data-ttu-id="c5f7f-199">Votre application doit effectuer cette validation au cours du processus de validation du jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-199">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="c5f7f-200">Objet</span><span class="sxs-lookup"><span data-stu-id="c5f7f-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="c5f7f-201">Principal sur lequel portent les informations d’assertion du jeton, comme l’utilisateur d’une application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-201">This is the principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="c5f7f-202">Cette valeur est immuable et ne peut pas être réattribuée ou réutilisée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="c5f7f-203">Vous pouvez l’utiliser pour effectuer des vérifications d’autorisation en toute sécurité, comme lorsque le jeton est utilisé pour accéder à une ressource.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-203">It can be used to perform authorization checks safely, such as when the token is used to access a resource.</span></span> <span data-ttu-id="c5f7f-204">Par défaut, la revendication de l’objet est remplie avec l’ID d’objet de l’utilisateur dans le répertoire.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-204">By default, the subject claim is populated with the object ID of the user in the directory.</span></span> <span data-ttu-id="c5f7f-205">Pour plus d’informations, consultez [Azure Active Directory B2C : configuration du jeton, de la session et de l’authentification unique](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-205">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="c5f7f-206">Référence de classe du contexte d’authentification</span><span class="sxs-lookup"><span data-stu-id="c5f7f-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="c5f7f-207">Non applicable</span><span class="sxs-lookup"><span data-stu-id="c5f7f-207">Not applicable</span></span> |<span data-ttu-id="c5f7f-208">Non utilisé actuellement, sauf dans le cas de stratégies plus anciennes.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-208">Not used currently, except in the case of older policies.</span></span> <span data-ttu-id="c5f7f-209">Pour plus d’informations, consultez [Azure Active Directory B2C : configuration du jeton, de la session et de l’authentification unique](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-209">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="c5f7f-210">Stratégie d’infrastructure de confiance</span><span class="sxs-lookup"><span data-stu-id="c5f7f-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="c5f7f-211">Nom de la stratégie utilisée pour acquérir le jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-211">This is the name of the policy that was used to acquire the ID token.</span></span> |
| <span data-ttu-id="c5f7f-212">Moment de l’authentification</span><span class="sxs-lookup"><span data-stu-id="c5f7f-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="c5f7f-213">Cette revendication est l’heure à laquelle l’utilisateur a entré ses informations d’identification pour la dernière fois, représentée en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-213">This claim is the time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="c5f7f-214">Jetons d’actualisation</span><span class="sxs-lookup"><span data-stu-id="c5f7f-214">Refresh tokens</span></span>
<span data-ttu-id="c5f7f-215">Les jetons d’actualisation sont des jetons de sécurité que votre application peut utiliser pour acquérir de nouveaux jetons d’ID et d’accès dans un flux OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-215">Refresh tokens are security tokens that your app can use to acquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="c5f7f-216">Ils permettent à votre application d’obtenir un accès à long terme à des ressources au nom d’un utilisateur, et ce sans nécessiter l’intervention de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-216">They provide your app with long-term access to resources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="c5f7f-217">Pour recevoir un jeton d’actualisation dans une réponse de jeton, votre application doit demander l’étendue `offline_acesss` .</span><span class="sxs-lookup"><span data-stu-id="c5f7f-217">To receive a refresh token in a token response, your app must request the `offline_acesss` scope.</span></span> <span data-ttu-id="c5f7f-218">Pour en savoir plus sur les étendues `offline_access` , reportez-vous à la [référence du protocole Azure AD B2C](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-218">To learn more about the `offline_access` scope, refer to the [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="c5f7f-219">Les jetons d’actualisation sont, et seront toujours, entièrement opaques pour votre application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-219">Refresh tokens are, and will always be, completely opaque to your app.</span></span> <span data-ttu-id="c5f7f-220">Ils sont émis par Azure AD et ne peuvent être inspectés et interprétés que par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="c5f7f-221">Les jetons d’actualisation sont de longue durée. Toutefois, quand vous écrivez votre application, faites en sorte qu’elle n’attende pas un jeton d’actualisation d’une durée particulière.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-221">They are long-lived, but your app should not be written with the expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="c5f7f-222">Les jetons d’actualisation peuvent être rendus non valides à tout moment, et ce pour diverses raisons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="c5f7f-223">Pour savoir si un jeton d'actualisation est valide, votre application doit tenter de l'échanger en faisant une demande de jeton auprès d'Azure AD. C'est la seule façon de faire.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-223">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD.</span></span>

<span data-ttu-id="c5f7f-224">Quand vous échangez un jeton d’actualisation contre un nouveau jeton (et si l’étendue `offline_access` a été accordée à votre application), vous recevez un nouveau jeton d’actualisation dans la réponse du jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-224">When you redeem a refresh token for a new token (and if your app has been granted the `offline_access` scope), you will receive a new refresh token in the token response.</span></span> <span data-ttu-id="c5f7f-225">Vous devez enregistrer le jeton d’actualisation qui vient d’être émis.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-225">You should save the newly issued refresh token.</span></span> <span data-ttu-id="c5f7f-226">Il doit remplacer le jeton d’actualisation utilisé précédemment dans la demande.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-226">It should replace the refresh token you previously used in the request.</span></span> <span data-ttu-id="c5f7f-227">Vous avez ainsi la garantie que vos jetons d’actualisation resteront valides le plus longtemps possible.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="c5f7f-228">Validation du jeton</span><span class="sxs-lookup"><span data-stu-id="c5f7f-228">Token validation</span></span>
<span data-ttu-id="c5f7f-229">Pour valider un jeton, votre application doit valider la signature et les revendications de ce jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-229">To validate a token, your app should check both the signature and claims of the token.</span></span>

<span data-ttu-id="c5f7f-230">Il existe de nombreuses bibliothèques open source pour valider les jetons JWT en fonction de votre langage préféré.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="c5f7f-231">Nous vous recommandons d’explorer ces options plutôt que d’implémenter votre propre logique de validation.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="c5f7f-232">Les informations contenues dans ce guide peuvent vous apprendre à utiliser correctement ces bibliothèques.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-232">The information in this guide can help you learn how to properly use those libraries.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="c5f7f-233">valider la signature</span><span class="sxs-lookup"><span data-stu-id="c5f7f-233">Validate the signature</span></span>
<span data-ttu-id="c5f7f-234">Un jeton JWT contient trois segments séparés par le caractère `.` .</span><span class="sxs-lookup"><span data-stu-id="c5f7f-234">A JWT contains three segments, separated by the `.` character.</span></span> <span data-ttu-id="c5f7f-235">Le premier segment est appelé *l’en-tête*, le deuxième le *corps* et le troisième la *signature*.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-235">The first segment is the *header*, the second is the *body*, and the third is the *signature*.</span></span> <span data-ttu-id="c5f7f-236">Le segment de signature peut être utilisé pour valider l’authenticité du jeton afin qu’il soit approuvé par votre application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-236">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="c5f7f-237">Les jetons Azure AD B2C sont signés à l’aide d’algorithmes de chiffrement asymétrique standard, tels que RSA 256.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="c5f7f-238">L’en-tête du jeton contient des informations sur la clé et la méthode de chiffrement utilisées pour signer le jeton :</span><span class="sxs-lookup"><span data-stu-id="c5f7f-238">The header of the token contains information about the key and encryption method used to sign the token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="c5f7f-239">La revendication `alg` indique l’algorithme utilisé pour signer le jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-239">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="c5f7f-240">La revendication `kid` indique la clé publique utilisée pour signer le jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-240">The `kid` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="c5f7f-241">À tout moment, Azure AD peut signer un jeton à l’aide de l’un des ensembles de paires de clés publique-privée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="c5f7f-242">Étant donné qu’Azure AD alterne le jeu de clés possible de façon périodique, votre application doit être écrite de manière à gérer automatiquement ces changements de clés.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-242">Azure AD rotates the possible set of keys periodically, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="c5f7f-243">Pour vérifier les mises à jour apportées aux clés publiques utilisées par Azure AD, spécifiez une fréquence raisonnable d’environ 24 heures.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-243">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="c5f7f-244">Azure AD B2C a un point de terminaison des métadonnées OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="c5f7f-245">Cela permet aux applications d’extraire des informations sur Azure AD B2C lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-245">This allows apps to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="c5f7f-246">Ces informations incluent les points de terminaison, le contenu des jetons et les clés de signature de jetons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="c5f7f-247">Votre répertoire B2C contient un document de métadonnées JSON pour chaque stratégie.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="c5f7f-248">Par exemple, le document de métadonnées pour la stratégie `b2c_1_sign_in` dans `fabrikamb2c.onmicrosoft.com` se trouve à l’emplacement suivant :</span><span class="sxs-lookup"><span data-stu-id="c5f7f-248">For example, the metadata document for the `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="c5f7f-249">où `fabrikamb2c.onmicrosoft.com` est le répertoire B2C utilisé pour authentifier l’utilisateur et `b2c_1_sign_in` est la stratégie utilisée pour acquérir le jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-249">`fabrikamb2c.onmicrosoft.com` is the B2C directory used to authenticate the user, and `b2c_1_sign_in` is the policy used to acquire the token.</span></span> <span data-ttu-id="c5f7f-250">Afin de déterminer la stratégie utilisée pour signer un jeton (et l’emplacement à partir duquel extraire les métadonnées), deux options sont possibles.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-250">To determine which policy was used to sign a token (and where to go to fetch the metadata), you have two options.</span></span> <span data-ttu-id="c5f7f-251">Tout d’abord, le nom de la stratégie est inclus dans la revendication `acr` du jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-251">First, the policy name is included in the `acr` claim in the token.</span></span> <span data-ttu-id="c5f7f-252">Vous pouvez analyser les revendications contenues dans le corps du jeton JWT par le biais d’un décodage base-64 du corps et la désérialisation de la chaîne JSON résultante.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-252">You can parse claims out of the body of the JWT by base-64 decoding the body and deserializing the JSON string that results.</span></span> <span data-ttu-id="c5f7f-253">La revendication `acr` sera le nom de la stratégie qui a été utilisée pour émettre le jeton.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-253">The `acr` claim will be the name of the policy that was used to issue the token.</span></span>  <span data-ttu-id="c5f7f-254">L'autre option consiste à coder la stratégie dans la valeur du paramètre `state` lors de l'émission de la requête, puis à la décoder pour déterminer la stratégie qui a été utilisée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-254">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="c5f7f-255">Les 2 méthodes sont valides.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-255">Either method is valid.</span></span>

<span data-ttu-id="c5f7f-256">Le document de métadonnées est un objet JSON qui contient plusieurs informations utiles.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-256">The metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="c5f7f-257">Celles-ci incluent l’emplacement des points de terminaison requis pour effectuer l’authentification OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-257">These include the location of the endpoints required to perform OpenID Connect authentication.</span></span> <span data-ttu-id="c5f7f-258">Elles comprennent également un `jwks_uri`qui indique l’emplacement de l’ensemble des clés publiques utilisées pour signer les jetons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-258">They also include `jwks_uri`, which gives the location of the set of public keys that are used to sign tokens.</span></span> <span data-ttu-id="c5f7f-259">Cet emplacement est fourni ici, mais il est préférable d’extraire cet emplacement de manière dynamique à l’aide du document de métadonnées et d’analyser `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="c5f7f-259">That location is provided here, but it is best to fetch the location dynamically by using the metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="c5f7f-260">Le document JSON situé à cette URL contient toutes les informations sur les clés publiques utilisées à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-260">The JSON document located at this URL contains all the public key information in use at a particular moment.</span></span> <span data-ttu-id="c5f7f-261">Votre application peut utiliser les revendications `kid` dans l’en-tête JWT pour sélectionner la clé publique utilisée dans le document JSON pour signer un jeton donné.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-261">Your app can use the `kid` claim in the JWT header to select the public key in the JSON document that is used to sign a particular token.</span></span> <span data-ttu-id="c5f7f-262">Elle peut ensuite procéder à la validation des signatures à l’aide de la clé publique correcte et de l’algorithme indiqué.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-262">It can then perform signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="c5f7f-263">Ce document ne contient pas la description de la procédure de validation de la signature.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-263">A description of how to perform signature validation is outside the scope of this document.</span></span> <span data-ttu-id="c5f7f-264">De nombreuses bibliothèques open source sont disponibles pour vous aider à ce sujet si vous en avez besoin.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-264">Many open source libraries are available to help you with this if you need it.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="c5f7f-265">Valider les revendications</span><span class="sxs-lookup"><span data-stu-id="c5f7f-265">Validate the claims</span></span>
<span data-ttu-id="c5f7f-266">Quand votre application ou API reçoit un jeton d’ID, elle doit également procéder à plusieurs vérifications sur les revendications dans le jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-266">When your app or API receives an ID token, it should also perform several checks against the claims in the ID token.</span></span> <span data-ttu-id="c5f7f-267">Ces vérifications portent notamment sur les revendications suivantes :</span><span class="sxs-lookup"><span data-stu-id="c5f7f-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="c5f7f-268">Revendication **Audience** : vérifie que le jeton d’ID était bien destiné à votre application.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-268">The **audience** claim: This verifies that the ID token was intended to be given to your app.</span></span>
* <span data-ttu-id="c5f7f-269">Revendications **Pas avant** et **Heure d’expiration** : vérifient que le jeton d’ID n’est pas arrivé à expiration.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-269">The **not before** and **expiration time** claims: These verify that the ID token has not expired.</span></span>
* <span data-ttu-id="c5f7f-270">Revendication **Émetteur** : vérifie que le jeton a effectivement été émis à votre application par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-270">The **issuer** claim: This verifies that the token was issued to your app by Azure AD.</span></span>
* <span data-ttu-id="c5f7f-271">**Valeur à usage unique**: stratégie d’atténuation des attaques par relecture de jetons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-271">The **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="c5f7f-272">Pour obtenir une liste complète des validations que votre application doit effectuer, reportez-vous à la [spécification OpenID Connect](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-272">For a full list of validations your app should perform, refer to the [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="c5f7f-273">Les valeurs attendues pour ces revendications sont détaillées dans la [section Jetons](#types-of-tokens)ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-273">Details of the expected values for these claims are included in the preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="c5f7f-274">Durées de vie des jetons</span><span class="sxs-lookup"><span data-stu-id="c5f7f-274">Token lifetimes</span></span>
<span data-ttu-id="c5f7f-275">Les durées de vie du jeton suivantes sont fournies afin d’approfondir vos connaissances.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-275">The following token lifetimes are provided to further your knowledge.</span></span> <span data-ttu-id="c5f7f-276">Elles peuvent vous être utiles lorsque vous développez et déboguez des applications.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="c5f7f-277">Quand vous écrivez vos applications, faites en sorte qu’elles n’attendent pas des durées de vie constantes,</span><span class="sxs-lookup"><span data-stu-id="c5f7f-277">Note that your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="c5f7f-278">car celles-ci sont amenées à changer à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-278">They can and will change.</span></span> <span data-ttu-id="c5f7f-279">Découvrez plus d’informations sur la [personnalisation des durées de vie des jetons](active-directory-b2c-token-session-sso.md) dans Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-279">Read more about the [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="c5f7f-280">Jeton</span><span class="sxs-lookup"><span data-stu-id="c5f7f-280">Token</span></span> | <span data-ttu-id="c5f7f-281">Durée de vie</span><span class="sxs-lookup"><span data-stu-id="c5f7f-281">Lifetime</span></span> | <span data-ttu-id="c5f7f-282">Description</span><span class="sxs-lookup"><span data-stu-id="c5f7f-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c5f7f-283">Jetons d’ID</span><span class="sxs-lookup"><span data-stu-id="c5f7f-283">ID tokens</span></span> |<span data-ttu-id="c5f7f-284">1 heure</span><span class="sxs-lookup"><span data-stu-id="c5f7f-284">One hour</span></span> |<span data-ttu-id="c5f7f-285">Les jetons d’ID sont généralement valides 1 heure.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="c5f7f-286">Votre application web peut utiliser cette durée de vie pour conserver ses propres sessions avec les utilisateurs (recommandé).</span><span class="sxs-lookup"><span data-stu-id="c5f7f-286">Your web app can use this lifetime to maintain its own sessions with users (recommended).</span></span> <span data-ttu-id="c5f7f-287">Vous pouvez également choisir une durée de vie de session différente.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="c5f7f-288">Si votre application a besoin d’obtenir un nouveau jeton d’ID, elle doit simplement faire une nouvelle demande de connexion auprès d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-288">If your app needs to get a new ID token, it simply needs to make a new sign-in request to Azure AD.</span></span> <span data-ttu-id="c5f7f-289">Si l’utilisateur a une session de navigateur valide avec Azure AD, il est possible qu’il ne doive pas entrer à nouveau ses informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-289">If a user has a valid browser session with Azure AD, that user might not be required to enter credentials again.</span></span> |
| <span data-ttu-id="c5f7f-290">Jetons d’actualisation</span><span class="sxs-lookup"><span data-stu-id="c5f7f-290">Refresh tokens</span></span> |<span data-ttu-id="c5f7f-291">Jusqu’à 14 jours</span><span class="sxs-lookup"><span data-stu-id="c5f7f-291">Up to 14 days</span></span> |<span data-ttu-id="c5f7f-292">Un jeton d’actualisation est valide pendant 14 jours au maximum.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="c5f7f-293">Cependant, un jeton d’actualisation peut devenir non valide à tout moment pour différentes raisons.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="c5f7f-294">Votre application doit continuer à essayer d’utiliser un jeton d’actualisation jusqu’à ce que la demande échoue, ou jusqu’à ce que votre application remplace le jeton d’actualisation par un autre.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-294">Your app should continue to try to use a refresh token until the request fails, or until your app replaces the refresh token with a new one.</span></span> <span data-ttu-id="c5f7f-295">Un jeton d’actualisation peut devenir non valide si 90 jours se sont écoulés depuis que l’utilisateur a entré ses informations d’identification pour la dernière fois.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-295">A refresh token can also become invalid if 90 days have passed since the user last entered credentials.</span></span> |
| <span data-ttu-id="c5f7f-296">Codes d’autorisation</span><span class="sxs-lookup"><span data-stu-id="c5f7f-296">Authorization codes</span></span> |<span data-ttu-id="c5f7f-297">5 minutes</span><span class="sxs-lookup"><span data-stu-id="c5f7f-297">Five minutes</span></span> |<span data-ttu-id="c5f7f-298">La durée de vie des codes d’autorisation est intentionnellement limitée.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="c5f7f-299">Ils doivent être utilisés immédiatement après réception pour les jetons d’accès, les jetons d’ID ou les jetons d’actualisation.</span><span class="sxs-lookup"><span data-stu-id="c5f7f-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

