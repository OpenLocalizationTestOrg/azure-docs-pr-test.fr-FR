---
title: Connexion web avec OpenID Connect - Azure AD B2C | Microsoft Docs
description: "Création d’applications web à l’aide de l’implémentation du protocole d’authentification OpenID Connect d’Azure Active Directory"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="b9615-103">Azure Active Directory B2C : connexion web avec OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="b9615-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="b9615-104">OpenID Connect est un protocole d’authentification basé sur OAuth 2.0, qui peut être utilisé pour connecter de façon sécurisée des utilisateurs à des applications web.</span><span class="sxs-lookup"><span data-stu-id="b9615-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="b9615-105">En utilisant l’implémentation d’OpenID Connect d’Azure Active Directory B2C (Azure AD B2C), vous pouvez sous-traiter l’inscription, la connexion et d’autres tâches de gestion des identités de vos applications web à Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b9615-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="b9615-106">Ce guide explique comment procéder, indépendamment du langage.</span><span class="sxs-lookup"><span data-stu-id="b9615-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="b9615-107">Il explique comment envoyer et recevoir des messages HTTP sans utiliser l’une de nos bibliothèques open source.</span><span class="sxs-lookup"><span data-stu-id="b9615-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="b9615-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) étend le protocole *d’autorisation* OAuth 2.0 pour l’utiliser en tant que protocole *d’authentification*.</span><span class="sxs-lookup"><span data-stu-id="b9615-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="b9615-109">Vous pouvez ainsi procéder à une authentification unique à l’aide d’OAuth.</span><span class="sxs-lookup"><span data-stu-id="b9615-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="b9615-110">Il introduit le concept de *jeton d’ID*, qui est un jeton de sécurité permettant au client de vérifier l’identité de l’utilisateur et d’obtenir des informations de base sur son profil.</span><span class="sxs-lookup"><span data-stu-id="b9615-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="b9615-111">Comme il étend OAuth 2.0, les applications peuvent acquérir de façon sécurisée des *jetons d’accès*.</span><span class="sxs-lookup"><span data-stu-id="b9615-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="b9615-112">Vous pouvez utiliser des jetons d’accès access_tokens pour accéder aux ressources qui sont sécurisées par un [serveur d’autorisation](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="b9615-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="b9615-113">Nous recommandons OpenID Connect si vous concevez une application web hébergée sur un serveur et accessible par le biais d’un navigateur.</span><span class="sxs-lookup"><span data-stu-id="b9615-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="b9615-114">Si vous souhaitez ajouter la gestion des identités à votre application mobile ou à votre application de bureau à l’aide d’Azure AD B2C, vous devez utiliser [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) au lieu d’OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="b9615-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="b9615-115">Azure AD B2C étend le protocole OpenID Connect standard pour proposer plus qu’une simple authentification et une simple autorisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="b9615-116">Il introduit le [paramètre de stratégie](active-directory-b2c-reference-policies.md), grâce auquel vous pouvez utiliser OpenID Connect pour ajouter à votre application des expériences utilisateur comme l’inscription, la connexion et la gestion des profils.</span><span class="sxs-lookup"><span data-stu-id="b9615-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="b9615-117">Vous pouvez découvrir ici comment utiliser OpenID Connect et des stratégies pour implémenter chacune de ces expériences dans vos applications web.</span><span class="sxs-lookup"><span data-stu-id="b9615-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="b9615-118">Vous voyez également comment obtenir des jetons d’accès pour accéder à des API web.</span><span class="sxs-lookup"><span data-stu-id="b9615-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="b9615-119">Les exemples de demandes HTTP de la section suivante utilisent notre exemple d’annuaire B2C, fabrikamb2c.onmicrosoft.com, ainsi que notre exemple d’application, https://aadb2cplayground.azurewebsites.net, et nos exemples de stratégies.</span><span class="sxs-lookup"><span data-stu-id="b9615-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="b9615-120">Vous êtes libre de tester ces demandes vous-même à l’aide de ces valeurs, ou de les remplacer par les vôtres.</span><span class="sxs-lookup"><span data-stu-id="b9615-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="b9615-121">Découvrez comment [obtenir votre propre client B2C, votre application et vos stratégies](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="b9615-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="b9615-122">Envoi de demandes d’authentification</span><span class="sxs-lookup"><span data-stu-id="b9615-122">Send authentication requests</span></span>
<span data-ttu-id="b9615-123">Lorsque votre application Web a besoin d’authentifier l’utilisateur et d’exécuter une stratégie, elle peut le diriger vers le point de terminaison `/authorize` .</span><span class="sxs-lookup"><span data-stu-id="b9615-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="b9615-124">Il s’agit de la partie interactive du flux, dans laquelle l’utilisateur agit en fonction de la stratégie.</span><span class="sxs-lookup"><span data-stu-id="b9615-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="b9615-125">Dans cette demande, le client indique les autorisations qu’il a besoin d’acquérir de l’utilisateur dans le paramètre `scope` et la stratégie à exécuter dans le paramètre `p`.</span><span class="sxs-lookup"><span data-stu-id="b9615-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="b9615-126">Trois exemples sont fournis dans les sections suivantes (avec des sauts de ligne pour une meilleure lisibilité), chacun utilisant une stratégie différente.</span><span class="sxs-lookup"><span data-stu-id="b9615-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="b9615-127">Pour avoir une idée du fonctionnement de chaque demande, essayez de coller la demande dans un navigateur et exécutez-la.</span><span class="sxs-lookup"><span data-stu-id="b9615-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="b9615-128">Utilisation d’une stratégie de connexion</span><span class="sxs-lookup"><span data-stu-id="b9615-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="b9615-129">Utilisation d’une stratégie d’inscription</span><span class="sxs-lookup"><span data-stu-id="b9615-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="b9615-130">Utilisation d’une stratégie de modification de profil</span><span class="sxs-lookup"><span data-stu-id="b9615-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="b9615-131">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-131">Parameter</span></span> | <span data-ttu-id="b9615-132">Requis ?</span><span class="sxs-lookup"><span data-stu-id="b9615-132">Required?</span></span> | <span data-ttu-id="b9615-133">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b9615-134">client_id</span><span class="sxs-lookup"><span data-stu-id="b9615-134">client_id</span></span> |<span data-ttu-id="b9615-135">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-135">Required</span></span> |<span data-ttu-id="b9615-136">L’ID d’application que le [portail Azure](https://portal.azure.com/) a affecté à votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="b9615-137">response_type</span><span class="sxs-lookup"><span data-stu-id="b9615-137">response_type</span></span> |<span data-ttu-id="b9615-138">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-138">Required</span></span> |<span data-ttu-id="b9615-139">Type de réponse, qui doit inclure un jeton d’ID pour OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="b9615-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="b9615-140">Si votre application web a également besoin de jetons pour appeler une API web, vous pouvez utiliser `code+id_token`, comme nous l’avons fait ici.</span><span class="sxs-lookup"><span data-stu-id="b9615-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="b9615-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b9615-141">redirect_uri</span></span> |<span data-ttu-id="b9615-142">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-142">Recommended</span></span> |<span data-ttu-id="b9615-143">Paramètre `redirect_uri` de votre application, où les réponses d’authentification peuvent être envoyées et reçues par votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="b9615-144">Il doit correspondre exactement à un des paramètres `redirect_uri` que vous avez inscrits dans le portail, excepté qu’il doit être codé dans une URL.</span><span class="sxs-lookup"><span data-stu-id="b9615-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="b9615-145">scope</span><span class="sxs-lookup"><span data-stu-id="b9615-145">scope</span></span> |<span data-ttu-id="b9615-146">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-146">Required</span></span> |<span data-ttu-id="b9615-147">Une liste d’étendues séparées par des espaces.</span><span class="sxs-lookup"><span data-stu-id="b9615-147">A space-separated list of scopes.</span></span> <span data-ttu-id="b9615-148">Une valeur d’étendue unique indique à Azure AD les deux autorisations qui sont demandées.</span><span class="sxs-lookup"><span data-stu-id="b9615-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="b9615-149">L’étendue `openid` indique une autorisation de connecter l’utilisateur et d’obtenir des données relatives à l’utilisateur sous la forme de jetons d’ID (vous pouvez trouver plus d’informations à ce sujet plus loin dans l’article).</span><span class="sxs-lookup"><span data-stu-id="b9615-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="b9615-150">L’étendue `offline_access` est facultative pour les applications Web.</span><span class="sxs-lookup"><span data-stu-id="b9615-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="b9615-151">Elle indique que votre application a besoin d’un *jeton d’actualisation* pour un accès de longue durée aux ressources.</span><span class="sxs-lookup"><span data-stu-id="b9615-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="b9615-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="b9615-152">response_mode</span></span> |<span data-ttu-id="b9615-153">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-153">Recommended</span></span> |<span data-ttu-id="b9615-154">Méthode à utiliser pour renvoyer le code d’autorisation résultant à votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="b9615-155">Il peut s’agir de `query`, `form_post` ou `fragment`.</span><span class="sxs-lookup"><span data-stu-id="b9615-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="b9615-156">Le mode de réponse `form_post` est recommandé pour une sécurité optimale.</span><span class="sxs-lookup"><span data-stu-id="b9615-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="b9615-157">state</span><span class="sxs-lookup"><span data-stu-id="b9615-157">state</span></span> |<span data-ttu-id="b9615-158">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-158">Recommended</span></span> |<span data-ttu-id="b9615-159">Une valeur incluse dans la requête qui est également renvoyée dans la réponse de jeton.</span><span class="sxs-lookup"><span data-stu-id="b9615-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="b9615-160">Il peut s’agir d’une chaîne du contenu de votre choix.</span><span class="sxs-lookup"><span data-stu-id="b9615-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="b9615-161">Une valeur unique générée de manière aléatoire est généralement utilisée pour empêcher les falsifications de requête intersite.</span><span class="sxs-lookup"><span data-stu-id="b9615-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="b9615-162">La valeur d’état est également utilisée pour coder les informations sur l’état de l’utilisateur dans l’application avant la requête d’authentification, comme la page sur laquelle il était positionné.</span><span class="sxs-lookup"><span data-stu-id="b9615-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="b9615-163">nonce</span><span class="sxs-lookup"><span data-stu-id="b9615-163">nonce</span></span> |<span data-ttu-id="b9615-164">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-164">Required</span></span> |<span data-ttu-id="b9615-165">Valeur incluse dans la demande (générée par l’application), qui sera intégrée dans le jeton d’ID résultant en tant que revendication.</span><span class="sxs-lookup"><span data-stu-id="b9615-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="b9615-166">L’application peut ensuite vérifier cette valeur afin de contrer les attaques par relecture de jetons.</span><span class="sxs-lookup"><span data-stu-id="b9615-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="b9615-167">La valeur est généralement une valeur unique aléatoire qui peut être utilisée pour identifier l’origine de la demande.</span><span class="sxs-lookup"><span data-stu-id="b9615-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="b9615-168">p</span><span class="sxs-lookup"><span data-stu-id="b9615-168">p</span></span> |<span data-ttu-id="b9615-169">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-169">Required</span></span> |<span data-ttu-id="b9615-170">Stratégie à exécuter.</span><span class="sxs-lookup"><span data-stu-id="b9615-170">The policy that will be executed.</span></span> <span data-ttu-id="b9615-171">Il s’agit du nom d’une stratégie qui est créée dans votre client B2C.</span><span class="sxs-lookup"><span data-stu-id="b9615-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="b9615-172">La valeur du nom de la stratégie doit commencer par `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="b9615-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="b9615-173">Découvrez plus d’informations sur les stratégies et [l’infrastructure de stratégie extensible](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="b9615-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="b9615-174">prompt</span><span class="sxs-lookup"><span data-stu-id="b9615-174">prompt</span></span> |<span data-ttu-id="b9615-175">Facultatif</span><span class="sxs-lookup"><span data-stu-id="b9615-175">Optional</span></span> |<span data-ttu-id="b9615-176">Type d’interaction utilisateur requis.</span><span class="sxs-lookup"><span data-stu-id="b9615-176">The type of user interaction that is required.</span></span> <span data-ttu-id="b9615-177">La seule valeur valide pour l’instant est `login`, qui oblige l’utilisateur à saisir ses informations d’identification sur cette demande.</span><span class="sxs-lookup"><span data-stu-id="b9615-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="b9615-178">L’authentification unique ne prendra pas effet.</span><span class="sxs-lookup"><span data-stu-id="b9615-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="b9615-179">À ce stade, il est demandé à l’utilisateur d’effectuer le flux de travail de la stratégie.</span><span class="sxs-lookup"><span data-stu-id="b9615-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="b9615-180">Il est possible que l’utilisateur doive entrer son nom d’utilisateur et son mot de passe, se connecter avec une identité sociale, s’inscrire à l’annuaire ou effectuer d’autres actions, en fonction de la façon dont la stratégie est définie.</span><span class="sxs-lookup"><span data-stu-id="b9615-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="b9615-181">Une fois que l’utilisateur a terminé la stratégie, Azure AD retourne une réponse à votre application dans le paramètre `redirect_uri` indiqué, en utilisant la méthode spécifiée dans le paramètre `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="b9615-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="b9615-182">La réponse est la même pour chacun des cas ci-dessus, indépendamment de la stratégie qui est exécutée.</span><span class="sxs-lookup"><span data-stu-id="b9615-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="b9615-183">Une réponse réussie utilisant `response_mode=fragment` se présenterait ainsi :</span><span class="sxs-lookup"><span data-stu-id="b9615-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="b9615-184">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-184">Parameter</span></span> | <span data-ttu-id="b9615-185">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b9615-186">id_token</span><span class="sxs-lookup"><span data-stu-id="b9615-186">id_token</span></span> |<span data-ttu-id="b9615-187">Le jeton d'ID que l’application a demandé.</span><span class="sxs-lookup"><span data-stu-id="b9615-187">The ID token that the app requested.</span></span> <span data-ttu-id="b9615-188">Vous pouvez utiliser le jeton d'ID pour vérifier l’identité de l’utilisateur et démarrer une session avec lui.</span><span class="sxs-lookup"><span data-stu-id="b9615-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="b9615-189">Pour plus d’informations sur les jetons d’ID et leur contenu, consultez les [Informations de référence sur les jetons Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b9615-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="b9615-190">code</span><span class="sxs-lookup"><span data-stu-id="b9615-190">code</span></span> |<span data-ttu-id="b9615-191">Le code d’autorisation demandé par l’application, si vous avez utilisé `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="b9615-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="b9615-192">L’application peut utiliser ce code d’autorisation afin de demander un jeton d’accès pour une ressource cible.</span><span class="sxs-lookup"><span data-stu-id="b9615-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="b9615-193">Les codes d’autorisation ont des durées de vie très courtes.</span><span class="sxs-lookup"><span data-stu-id="b9615-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="b9615-194">Généralement, ils expirent au bout de 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="b9615-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="b9615-195">state</span><span class="sxs-lookup"><span data-stu-id="b9615-195">state</span></span> |<span data-ttu-id="b9615-196">Si un paramètre `state` est inclus dans la demande, la même valeur doit apparaître dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="b9615-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="b9615-197">L’application doit vérifier que les valeurs `state` de la demande et de la réponse sont identiques.</span><span class="sxs-lookup"><span data-stu-id="b9615-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="b9615-198">Les réponses d’erreur peuvent également être envoyées au paramètre `redirect_uri`, pour que l’application puisse les traiter de façon appropriée :</span><span class="sxs-lookup"><span data-stu-id="b9615-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="b9615-199">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-199">Parameter</span></span> | <span data-ttu-id="b9615-200">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b9615-201">error</span><span class="sxs-lookup"><span data-stu-id="b9615-201">error</span></span> |<span data-ttu-id="b9615-202">Chaîne de code d’erreur qui peut être utilisée pour classer les types d’erreur qui se produisent, et aussi pour réagir aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="b9615-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="b9615-203">error_description</span><span class="sxs-lookup"><span data-stu-id="b9615-203">error_description</span></span> |<span data-ttu-id="b9615-204">Un message d’erreur spécifique qui peut aider un développeur à identifier la cause principale d’une erreur d’authentification.</span><span class="sxs-lookup"><span data-stu-id="b9615-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="b9615-205">state</span><span class="sxs-lookup"><span data-stu-id="b9615-205">state</span></span> |<span data-ttu-id="b9615-206">Consultez la description complète dans le premier tableau de cette section.</span><span class="sxs-lookup"><span data-stu-id="b9615-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="b9615-207">Si un paramètre `state` est inclus dans la demande, la même valeur doit apparaître dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="b9615-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="b9615-208">L’application doit vérifier que les valeurs `state` de la demande et de la réponse sont identiques.</span><span class="sxs-lookup"><span data-stu-id="b9615-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="b9615-209">Validation du jeton d’ID</span><span class="sxs-lookup"><span data-stu-id="b9615-209">Validate the ID token</span></span>
<span data-ttu-id="b9615-210">La réception d’un jeton d’ID à elle seule n’est pas suffisante pour authentifier l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9615-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="b9615-211">Vous devez valider la signature du jeton d’ID et vérifier les revendications du jeton selon les exigences de votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="b9615-212">Azure AD B2C utilise les [jetons Web JSON (JWT)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) et le chiffrement de clés publiques pour signer les jetons et vérifier leur validité.</span><span class="sxs-lookup"><span data-stu-id="b9615-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="b9615-213">Il existe de nombreuses bibliothèques open source pour valider les jetons JWT en fonction de votre langage préféré.</span><span class="sxs-lookup"><span data-stu-id="b9615-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="b9615-214">Nous vous recommandons d’explorer ces options plutôt que d’implémenter votre propre logique de validation.</span><span class="sxs-lookup"><span data-stu-id="b9615-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="b9615-215">Ces informations sont utiles pour savoir comment utiliser correctement ces bibliothèques.</span><span class="sxs-lookup"><span data-stu-id="b9615-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="b9615-216">Azure AD B2C présente un point de terminaison de métadonnées OpenID Connect, qui permet à une application de récupérer les informations relatives à Azure AD B2C lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="b9615-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="b9615-217">Ces informations incluent les points de terminaison, le contenu des jetons et les clés de signature de jetons.</span><span class="sxs-lookup"><span data-stu-id="b9615-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="b9615-218">Il existe un document de métadonnées JSON pour chaque stratégie dans votre client B2C.</span><span class="sxs-lookup"><span data-stu-id="b9615-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="b9615-219">Par exemple, le document de métadonnées pour la stratégie `b2c_1_sign_in` dans `fabrikamb2c.onmicrosoft.com` se trouve à l’emplacement suivant :</span><span class="sxs-lookup"><span data-stu-id="b9615-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="b9615-220">Une des propriétés de ce document de configuration est `jwks_uri`, dont la valeur pour la même stratégie serait :</span><span class="sxs-lookup"><span data-stu-id="b9615-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="b9615-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="b9615-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="b9615-222">Pour déterminer la stratégie utilisée pour la connexion d’un jeton d’ID (et d’où extraire les métadonnées), deux options sont possibles.</span><span class="sxs-lookup"><span data-stu-id="b9615-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="b9615-223">Tout d’abord, le nom de la stratégie est inclus dans la revendication `acr` du jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="b9615-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="b9615-224">Pour plus d’informations sur la façon d’analyser les revendications à partir d’un jeton d’ID, consultez les [Informations de référence sur les jetons Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b9615-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="b9615-225">L'autre option consiste à coder la stratégie dans la valeur du paramètre `state` lors de l'émission de la requête, puis à la décoder pour déterminer la stratégie qui a été utilisée.</span><span class="sxs-lookup"><span data-stu-id="b9615-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="b9615-226">Les 2 méthodes sont valides.</span><span class="sxs-lookup"><span data-stu-id="b9615-226">Either method is valid.</span></span>

<span data-ttu-id="b9615-227">Après avoir acquis le document de métadonnées auprès du point de terminaison de métadonnées OpenID Connect, vous pouvez utiliser les clés publiques RSA 256 (qui se trouvent sur ce point de terminaison) pour valider la signature du jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="b9615-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="b9615-228">Ce point de terminaison peut comporter plusieurs clés à tout moment, chacune étant identifiée par une revendication `kid`.</span><span class="sxs-lookup"><span data-stu-id="b9615-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="b9615-229">L’en-tête de ce jeton d’ID contient également une revendication `kid`, qui indique quelle clé a été utilisée pour signer le jeton d’ID.</span><span class="sxs-lookup"><span data-stu-id="b9615-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="b9615-230">Pour plus d’informations, consultez les [Informations de référence sur les jetons Azure AD B2C](active-directory-b2c-reference-tokens.md) (en particulier la section sur la [validation des jetons](active-directory-b2c-reference-tokens.md#token-validation)).</span><span class="sxs-lookup"><span data-stu-id="b9615-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="b9615-231">Après avoir validé la signature du jeton d’ID, vous devez vérifier plusieurs revendications.</span><span class="sxs-lookup"><span data-stu-id="b9615-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="b9615-232">Exemple :</span><span class="sxs-lookup"><span data-stu-id="b9615-232">For instance:</span></span>

* <span data-ttu-id="b9615-233">Vous devez valider la revendication `nonce` afin d’empêcher les attaques par relecture de jetons.</span><span class="sxs-lookup"><span data-stu-id="b9615-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="b9615-234">Sa valeur doit correspondre à ce que vous avez spécifié dans la requête de connexion.</span><span class="sxs-lookup"><span data-stu-id="b9615-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="b9615-235">Vous devez valider la revendication `aud` afin de vérifier que le jeton d’ID a été émis pour votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="b9615-236">Sa valeur doit correspondre à l’ID d’application de votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="b9615-237">Vous devez valider les revendications `iat` et `exp` afin de vérifier que le jeton d’ID n’est pas expiré.</span><span class="sxs-lookup"><span data-stu-id="b9615-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="b9615-238">Vous devez également effectuer plusieurs autres validations.</span><span class="sxs-lookup"><span data-stu-id="b9615-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="b9615-239">Celles-ci sont décrites en détail dans les [Spécifications principales d’OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).  En fonction de votre scénario, vous pouvez également valider des revendications supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="b9615-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="b9615-240">Voici quelques validations courantes :</span><span class="sxs-lookup"><span data-stu-id="b9615-240">Some common validations include:</span></span>

* <span data-ttu-id="b9615-241">Vérifier que l’utilisateur/l’organisation s’est inscrit pour l’application.</span><span class="sxs-lookup"><span data-stu-id="b9615-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="b9615-242">Vérifier que l’utilisateur dispose de l’autorisation/des privilèges appropriés.</span><span class="sxs-lookup"><span data-stu-id="b9615-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="b9615-243">S’assurer de l’utilisation d’une force certaine d’authentification, comme Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="b9615-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="b9615-244">Pour plus d’informations sur les revendications dans un jeton d’ID, consultez les [Informations de référence sur les jetons Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b9615-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="b9615-245">Une fois que vous avez validé le jeton d’ID, vous pouvez démarrer une session avec l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9615-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="b9615-246">Vous pouvez utiliser les revendications du jeton d’ID pour obtenir des informations sur l’utilisateur dans votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="b9615-247">Les utilisations de ces informations sont notamment l’affichage, les enregistrements et les autorisations.</span><span class="sxs-lookup"><span data-stu-id="b9615-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="b9615-248">Obtention d’un jeton</span><span class="sxs-lookup"><span data-stu-id="b9615-248">Get a token</span></span>
<span data-ttu-id="b9615-249">Si votre application web doit seulement exécuter des stratégies, vous pouvez ignorer les quelques sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="b9615-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="b9615-250">Ces sections s’appliquent seulement aux applications web qui doivent effectuer des appels authentifiés à une API web et qui sont également protégées par Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="b9615-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="b9615-251">Vous pouvez échanger le code d’autorisation que vous avez acquis (en utilisant `response_type=code+id_token`) contre un jeton sur la ressource souhaitée en envoyant une demande `POST` au point de terminaison `/token`.</span><span class="sxs-lookup"><span data-stu-id="b9615-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="b9615-252">Actuellement, la seule ressource pour laquelle vous pouvez demander un jeton est l’API web principale de votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="b9615-253">La convention pour demander un jeton à vous-même consiste à utiliser votre ID de client d’application en tant qu’étendue :</span><span class="sxs-lookup"><span data-stu-id="b9615-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="b9615-254">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-254">Parameter</span></span> | <span data-ttu-id="b9615-255">Requis ?</span><span class="sxs-lookup"><span data-stu-id="b9615-255">Required?</span></span> | <span data-ttu-id="b9615-256">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b9615-257">p</span><span class="sxs-lookup"><span data-stu-id="b9615-257">p</span></span> |<span data-ttu-id="b9615-258">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-258">Required</span></span> |<span data-ttu-id="b9615-259">La stratégie qui a été utilisée pour obtenir le code d'autorisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="b9615-260">Vous ne pouvez pas utiliser une autre stratégie dans cette demande.</span><span class="sxs-lookup"><span data-stu-id="b9615-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="b9615-261">Notez que vous ajoutez ce paramètre à la chaîne de requête, et non pas au corps de `POST`.</span><span class="sxs-lookup"><span data-stu-id="b9615-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="b9615-262">client_id</span><span class="sxs-lookup"><span data-stu-id="b9615-262">client_id</span></span> |<span data-ttu-id="b9615-263">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-263">Required</span></span> |<span data-ttu-id="b9615-264">L’ID d’application que le [portail Azure](https://portal.azure.com/) a affecté à votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="b9615-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="b9615-265">grant_type</span></span> |<span data-ttu-id="b9615-266">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-266">Required</span></span> |<span data-ttu-id="b9615-267">Le type d’octroi, qui doit être `authorization_code` pour le flux de code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="b9615-268">scope</span><span class="sxs-lookup"><span data-stu-id="b9615-268">scope</span></span> |<span data-ttu-id="b9615-269">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-269">Recommended</span></span> |<span data-ttu-id="b9615-270">Une liste d’étendues séparées par des espaces.</span><span class="sxs-lookup"><span data-stu-id="b9615-270">A space-separated list of scopes.</span></span> <span data-ttu-id="b9615-271">Une valeur d’étendue unique indique à Azure AD les deux autorisations qui sont demandées.</span><span class="sxs-lookup"><span data-stu-id="b9615-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="b9615-272">L’étendue `openid` indique une autorisation pour connecter l’utilisateur et obtenir des données relatives à l’utilisateur sous la forme de paramètres id_token.</span><span class="sxs-lookup"><span data-stu-id="b9615-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="b9615-273">Elle peut être utilisée afin d’obtenir des jetons pour l’API web principale de votre application, qui est représentée par le même ID d’application que le client.</span><span class="sxs-lookup"><span data-stu-id="b9615-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="b9615-274">L’étendue `offline_access` indique que votre application a besoin d’un jeton d’actualisation pour un accès de longue durée aux ressources.</span><span class="sxs-lookup"><span data-stu-id="b9615-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="b9615-275">code</span><span class="sxs-lookup"><span data-stu-id="b9615-275">code</span></span> |<span data-ttu-id="b9615-276">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-276">Required</span></span> |<span data-ttu-id="b9615-277">Code d’autorisation acquis dans le premier tronçon du flux.</span><span class="sxs-lookup"><span data-stu-id="b9615-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="b9615-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b9615-278">redirect_uri</span></span> |<span data-ttu-id="b9615-279">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-279">Required</span></span> |<span data-ttu-id="b9615-280">Le paramètre `redirect_uri` de l’application où vous avez reçu le code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="b9615-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="b9615-281">client_secret</span></span> |<span data-ttu-id="b9615-282">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-282">Required</span></span> |<span data-ttu-id="b9615-283">Le secret d'application que vous avez généré dans le [portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="b9615-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="b9615-284">Ce secret d’application est un artefact de sécurité important.</span><span class="sxs-lookup"><span data-stu-id="b9615-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="b9615-285">Vous devez le stocker sur votre serveur de manière sécurisée.</span><span class="sxs-lookup"><span data-stu-id="b9615-285">You should store it securely on your server.</span></span> <span data-ttu-id="b9615-286">Vous devez également veiller à renouveler ce secret du client régulièrement.</span><span class="sxs-lookup"><span data-stu-id="b9615-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="b9615-287">Un jeton de réponse de réussite se présente ainsi :</span><span class="sxs-lookup"><span data-stu-id="b9615-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="b9615-288">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-288">Parameter</span></span> | <span data-ttu-id="b9615-289">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b9615-290">not_before</span><span class="sxs-lookup"><span data-stu-id="b9615-290">not_before</span></span> |<span data-ttu-id="b9615-291">Heure à laquelle le jeton est considéré comme valide, en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="b9615-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="b9615-292">token_type</span><span class="sxs-lookup"><span data-stu-id="b9615-292">token_type</span></span> |<span data-ttu-id="b9615-293">Valeur du type de jeton.</span><span class="sxs-lookup"><span data-stu-id="b9615-293">The token type value.</span></span> <span data-ttu-id="b9615-294">Le seul type de jeton pris en charge par Azure AD est `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="b9615-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="b9615-295">access_token</span><span class="sxs-lookup"><span data-stu-id="b9615-295">access_token</span></span> |<span data-ttu-id="b9615-296">Le jeton JWT signé que vous avez demandé.</span><span class="sxs-lookup"><span data-stu-id="b9615-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="b9615-297">scope</span><span class="sxs-lookup"><span data-stu-id="b9615-297">scope</span></span> |<span data-ttu-id="b9615-298">Étendues pour lesquelles le jeton est valide.</span><span class="sxs-lookup"><span data-stu-id="b9615-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="b9615-299">Elles peuvent être utilisées pour mettre en cache des jetons pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="b9615-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="b9615-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="b9615-300">expires_in</span></span> |<span data-ttu-id="b9615-301">Durée de validité du jeton d’accès (en secondes).</span><span class="sxs-lookup"><span data-stu-id="b9615-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="b9615-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="b9615-302">refresh_token</span></span> |<span data-ttu-id="b9615-303">Un jeton d’actualisation OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="b9615-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="b9615-304">L’application peut utiliser ce jeton pour acquérir des jetons supplémentaires après l’expiration du jeton actuel.</span><span class="sxs-lookup"><span data-stu-id="b9615-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="b9615-305">Les jetons d’actualisation ont une durée de vie longue et peuvent être utilisés pour conserver l’accès aux ressources pendant des périodes de temps étendues.</span><span class="sxs-lookup"><span data-stu-id="b9615-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="b9615-306">Pour plus d’informations, consultez les [Informations de référence sur les jetons B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b9615-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="b9615-307">Notez que vous devez avoir utilisé l’étendue `offline_access` dans les demandes d’autorisation et de jeton pour recevoir un jeton d’actualisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="b9615-308">Les réponses d’erreur se présentent comme ceci :</span><span class="sxs-lookup"><span data-stu-id="b9615-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="b9615-309">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-309">Parameter</span></span> | <span data-ttu-id="b9615-310">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b9615-311">error</span><span class="sxs-lookup"><span data-stu-id="b9615-311">error</span></span> |<span data-ttu-id="b9615-312">Chaîne de code d’erreur qui peut être utilisée pour classer les types d’erreur qui se produisent, et aussi pour réagir aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="b9615-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="b9615-313">error_description</span><span class="sxs-lookup"><span data-stu-id="b9615-313">error_description</span></span> |<span data-ttu-id="b9615-314">Un message d’erreur spécifique qui peut aider un développeur à identifier la cause principale d’une erreur d’authentification.</span><span class="sxs-lookup"><span data-stu-id="b9615-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="b9615-315">Utilisation du jeton</span><span class="sxs-lookup"><span data-stu-id="b9615-315">Use the token</span></span>
<span data-ttu-id="b9615-316">Un jeton d’accès étant acquis, vous pouvez maintenant l’utiliser dans les demandes effectuées à vos API web principales en l’incluant dans l’en-tête `Authorization` :</span><span class="sxs-lookup"><span data-stu-id="b9615-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="b9615-317">Actualisation du jeton</span><span class="sxs-lookup"><span data-stu-id="b9615-317">Refresh the token</span></span>
<span data-ttu-id="b9615-318">Les jetons d’ID ont une durée de vie courte.</span><span class="sxs-lookup"><span data-stu-id="b9615-318">ID tokens are short-lived.</span></span> <span data-ttu-id="b9615-319">Vous devez les actualiser après leur expiration pour continuer à accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="b9615-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="b9615-320">Pour ce faire, envoyez une nouvelle demande `POST` au point de terminaison `/token`.</span><span class="sxs-lookup"><span data-stu-id="b9615-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="b9615-321">Cette fois-ci, spécifiez le paramètre `refresh_token` au lieu du paramètre `code` :</span><span class="sxs-lookup"><span data-stu-id="b9615-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="b9615-322">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-322">Parameter</span></span> | <span data-ttu-id="b9615-323">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-323">Required</span></span> | <span data-ttu-id="b9615-324">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b9615-325">p</span><span class="sxs-lookup"><span data-stu-id="b9615-325">p</span></span> |<span data-ttu-id="b9615-326">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-326">Required</span></span> |<span data-ttu-id="b9615-327">Stratégie utilisée pour obtenir le jeton d’actualisation d’origine.</span><span class="sxs-lookup"><span data-stu-id="b9615-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="b9615-328">Vous ne pouvez pas utiliser une autre stratégie dans cette demande.</span><span class="sxs-lookup"><span data-stu-id="b9615-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="b9615-329">Notez que vous ajoutez ce paramètre à la chaîne de requête, et non pas au corps de POST.</span><span class="sxs-lookup"><span data-stu-id="b9615-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="b9615-330">client_id</span><span class="sxs-lookup"><span data-stu-id="b9615-330">client_id</span></span> |<span data-ttu-id="b9615-331">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-331">Required</span></span> |<span data-ttu-id="b9615-332">L’ID d’application que le [portail Azure](https://portal.azure.com/) a affecté à votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="b9615-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="b9615-333">grant_type</span></span> |<span data-ttu-id="b9615-334">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-334">Required</span></span> |<span data-ttu-id="b9615-335">Le type d’octroi, qui doit être un jeton d’actualisation pour ce tronçon du flux de code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="b9615-336">scope</span><span class="sxs-lookup"><span data-stu-id="b9615-336">scope</span></span> |<span data-ttu-id="b9615-337">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-337">Recommended</span></span> |<span data-ttu-id="b9615-338">Une liste d’étendues séparées par des espaces.</span><span class="sxs-lookup"><span data-stu-id="b9615-338">A space-separated list of scopes.</span></span> <span data-ttu-id="b9615-339">Une valeur d’étendue unique indique à Azure AD les deux autorisations qui sont demandées.</span><span class="sxs-lookup"><span data-stu-id="b9615-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="b9615-340">L’étendue `openid` indique une autorisation pour connecter l’utilisateur et obtenir des données relatives à l’utilisateur sous la forme de jetons d’ID.</span><span class="sxs-lookup"><span data-stu-id="b9615-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="b9615-341">Elle peut être utilisée afin d’obtenir des jetons pour l’API web principale de votre application, qui est représentée par le même ID d’application que le client.</span><span class="sxs-lookup"><span data-stu-id="b9615-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="b9615-342">L’étendue `offline_access` indique que votre application a besoin d’un jeton d’actualisation pour un accès de longue durée aux ressources.</span><span class="sxs-lookup"><span data-stu-id="b9615-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="b9615-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b9615-343">redirect_uri</span></span> |<span data-ttu-id="b9615-344">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-344">Recommended</span></span> |<span data-ttu-id="b9615-345">Le paramètre `redirect_uri` de l’application où vous avez reçu le code d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="b9615-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="b9615-346">refresh_token</span></span> |<span data-ttu-id="b9615-347">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-347">Required</span></span> |<span data-ttu-id="b9615-348">Jeton d’actualisation d’origine que vous avez acquis dans le second tronçon du flux.</span><span class="sxs-lookup"><span data-stu-id="b9615-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="b9615-349">Notez que vous devez avoir utilisé l’étendue `offline_access` dans les demandes d’autorisation et de jeton pour recevoir un jeton d’actualisation.</span><span class="sxs-lookup"><span data-stu-id="b9615-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="b9615-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="b9615-350">client_secret</span></span> |<span data-ttu-id="b9615-351">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-351">Required</span></span> |<span data-ttu-id="b9615-352">Le secret d'application que vous avez généré dans le [portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="b9615-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="b9615-353">Ce secret d’application est un artefact de sécurité important.</span><span class="sxs-lookup"><span data-stu-id="b9615-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="b9615-354">Vous devez le stocker sur votre serveur de manière sécurisée.</span><span class="sxs-lookup"><span data-stu-id="b9615-354">You should store it securely on your server.</span></span> <span data-ttu-id="b9615-355">Vous devez également veiller à renouveler ce secret du client régulièrement.</span><span class="sxs-lookup"><span data-stu-id="b9615-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="b9615-356">Un jeton de réponse de réussite se présente ainsi :</span><span class="sxs-lookup"><span data-stu-id="b9615-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="b9615-357">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-357">Parameter</span></span> | <span data-ttu-id="b9615-358">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b9615-359">not_before</span><span class="sxs-lookup"><span data-stu-id="b9615-359">not_before</span></span> |<span data-ttu-id="b9615-360">Heure à laquelle le jeton est considéré comme valide, en heure epoch.</span><span class="sxs-lookup"><span data-stu-id="b9615-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="b9615-361">token_type</span><span class="sxs-lookup"><span data-stu-id="b9615-361">token_type</span></span> |<span data-ttu-id="b9615-362">Valeur du type de jeton.</span><span class="sxs-lookup"><span data-stu-id="b9615-362">The token type value.</span></span> <span data-ttu-id="b9615-363">Le seul type de jeton pris en charge par Azure AD est `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="b9615-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="b9615-364">access_token</span><span class="sxs-lookup"><span data-stu-id="b9615-364">access_token</span></span> |<span data-ttu-id="b9615-365">Le jeton JWT signé que vous avez demandé.</span><span class="sxs-lookup"><span data-stu-id="b9615-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="b9615-366">scope</span><span class="sxs-lookup"><span data-stu-id="b9615-366">scope</span></span> |<span data-ttu-id="b9615-367">Les étendues pour lesquelles le jeton est valide, qui peuvent être utilisées afin de mettre en cache des jetons pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="b9615-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="b9615-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="b9615-368">expires_in</span></span> |<span data-ttu-id="b9615-369">Durée de validité du jeton d’accès (en secondes).</span><span class="sxs-lookup"><span data-stu-id="b9615-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="b9615-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="b9615-370">refresh_token</span></span> |<span data-ttu-id="b9615-371">Un jeton d’actualisation OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="b9615-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="b9615-372">L’application peut utiliser ce jeton pour acquérir des jetons supplémentaires après l’expiration du jeton actuel.</span><span class="sxs-lookup"><span data-stu-id="b9615-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="b9615-373">Les jetons d’actualisation ont une durée de vie longue et peuvent être utilisés pour conserver l’accès aux ressources pendant des périodes de temps étendues.</span><span class="sxs-lookup"><span data-stu-id="b9615-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="b9615-374">Pour plus d’informations, consultez la page de [référence des jetons B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b9615-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="b9615-375">Les réponses d’erreur se présentent comme ceci :</span><span class="sxs-lookup"><span data-stu-id="b9615-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="b9615-376">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-376">Parameter</span></span> | <span data-ttu-id="b9615-377">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b9615-378">error</span><span class="sxs-lookup"><span data-stu-id="b9615-378">error</span></span> |<span data-ttu-id="b9615-379">Chaîne de code d’erreur qui peut être utilisée pour classer les types d’erreur qui se produisent, et aussi pour réagir aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="b9615-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="b9615-380">error_description</span><span class="sxs-lookup"><span data-stu-id="b9615-380">error_description</span></span> |<span data-ttu-id="b9615-381">Un message d’erreur spécifique qui peut aider un développeur à identifier la cause principale d’une erreur d’authentification.</span><span class="sxs-lookup"><span data-stu-id="b9615-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="b9615-382">Envoi d’une demande de déconnexion</span><span class="sxs-lookup"><span data-stu-id="b9615-382">Send a sign-out request</span></span>
<span data-ttu-id="b9615-383">Quand vous souhaitez déconnecter l’utilisateur de l’application, la suppression des cookies de votre application ou l’arrêt de la session de l’utilisateur ne suffisent pas.</span><span class="sxs-lookup"><span data-stu-id="b9615-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="b9615-384">Vous devez également rediriger l’utilisateur vers Azure AD. Si vous n’y parvenez pas, l’utilisateur peut être en mesure de se ré-authentifier auprès de votre application, sans entrer ses informations d’identification à nouveau.</span><span class="sxs-lookup"><span data-stu-id="b9615-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="b9615-385">En effet, il dispose d’une session d’authentification unique valide avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b9615-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="b9615-386">Vous pouvez simplement rediriger l’utilisateur vers le point de terminaison `end_session` qui est répertorié dans le document de métadonnées OpenID Connect précédemment décrit dans la section « Validation du jeton d’ID » :</span><span class="sxs-lookup"><span data-stu-id="b9615-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="b9615-387">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b9615-387">Parameter</span></span> | <span data-ttu-id="b9615-388">Requis ?</span><span class="sxs-lookup"><span data-stu-id="b9615-388">Required?</span></span> | <span data-ttu-id="b9615-389">Description</span><span class="sxs-lookup"><span data-stu-id="b9615-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b9615-390">p</span><span class="sxs-lookup"><span data-stu-id="b9615-390">p</span></span> |<span data-ttu-id="b9615-391">Requis</span><span class="sxs-lookup"><span data-stu-id="b9615-391">Required</span></span> |<span data-ttu-id="b9615-392">Stratégie que vous voulez utiliser pour déconnecter l’utilisateur de votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="b9615-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="b9615-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="b9615-394">Recommandé</span><span class="sxs-lookup"><span data-stu-id="b9615-394">Recommended</span></span> |<span data-ttu-id="b9615-395">URL vers laquelle l’utilisateur doit être redirigé après la déconnexion. Si elle n’est pas incluse, Azure AD B2C affiche un message générique à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9615-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="b9615-396">Bien que la redirection de l’utilisateur vers le point de terminaison `end_session` efface en partie l’état d’authentification unique de l’utilisateur auprès d’Azure AD B2C, elle ne déconnecte pas l’utilisateur de la session du fournisseur d’identité sociale.</span><span class="sxs-lookup"><span data-stu-id="b9615-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="b9615-397">Si l’utilisateur sélectionne le même IDP pendant une connexion ultérieure, il est de nouveau authentifié sans entrer ses informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="b9615-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="b9615-398">Si un utilisateur veut se déconnecter de votre application B2C, cela ne signifie pas nécessairement qu’il souhaite se déconnecter de son compte Facebook.</span><span class="sxs-lookup"><span data-stu-id="b9615-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="b9615-399">Toutefois, dans le cas de comptes locaux, la session de l’utilisateur sera terminée correctement.</span><span class="sxs-lookup"><span data-stu-id="b9615-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="b9615-400">Utilisation de votre propre client B2C</span><span class="sxs-lookup"><span data-stu-id="b9615-400">Use your own B2C tenant</span></span>
<span data-ttu-id="b9615-401">Si vous voulez tester ces demandes par vous-même, vous devez effectuer ces trois étapes puis remplacer les exemples de valeurs décrites précédemment par les vôtres :</span><span class="sxs-lookup"><span data-stu-id="b9615-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="b9615-402">[Créez un client B2C](active-directory-b2c-get-started.md)et utilisez le nom de votre client dans les demandes.</span><span class="sxs-lookup"><span data-stu-id="b9615-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="b9615-403">[Créez une application](active-directory-b2c-app-registration.md) pour obtenir un ID d’application.</span><span class="sxs-lookup"><span data-stu-id="b9615-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="b9615-404">Incluez une application web/API web dans votre application.</span><span class="sxs-lookup"><span data-stu-id="b9615-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="b9615-405">Si vous le souhaitez, créez un secret d’application.</span><span class="sxs-lookup"><span data-stu-id="b9615-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="b9615-406">[Créez vos stratégies](active-directory-b2c-reference-policies.md) pour obtenir les noms de vos stratégies.</span><span class="sxs-lookup"><span data-stu-id="b9615-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

