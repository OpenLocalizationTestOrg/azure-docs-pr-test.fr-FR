---
title: "Conservation d’une adresse IP virtuelle constante pour un service cloud Azure | Microsoft Docs"
description: "Découvrez comment vous assurer que l’adresse IP virtuelle de votre service cloud Azure ne change pas."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 4a58e2c6-7a79-4051-8a2c-99182ff8b881
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 03/21/2017
ms.author: kraigb
ms.openlocfilehash: a76bcba5ab4ca8e1a4899e4aa28f734c09af2aa9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="retain-a-constant-virtual-ip-address-for-an-azure-cloud-service"></a><span data-ttu-id="b30e2-103">Conserver une adresse IP virtuelle constante pour un service cloud Azure</span><span class="sxs-lookup"><span data-stu-id="b30e2-103">Retain a constant virtual IP address for an Azure cloud service</span></span>
<span data-ttu-id="b30e2-104">Lors de la mise à jour d’un service cloud hébergé dans Azure, vérifiez que l’adresse IP virtuelle du service n’est pas modifiée.</span><span class="sxs-lookup"><span data-stu-id="b30e2-104">When you update a cloud service that's hosted in Azure, you might need to ensure that the virtual IP address (VIP) of the service doesn't change.</span></span> <span data-ttu-id="b30e2-105">De nombreux services de gestion de domaine utilisent la méthode DNS (Domain Name System), une méthode d’enregistrement pour stocker des noms de domaine</span><span class="sxs-lookup"><span data-stu-id="b30e2-105">Many domain management services use the Domain Name System (DNS) for registering domain names.</span></span> <span data-ttu-id="b30e2-106">et qui fonctionne uniquement si l’adresse IP virtuelle est inchangée.</span><span class="sxs-lookup"><span data-stu-id="b30e2-106">DNS works only if the VIP remains the same.</span></span> <span data-ttu-id="b30e2-107">Utilisez l’**Assistant Publication** dans Azure Tools pour garantir que l’adresse IP virtuelle de votre service cloud ne change pas lors de sa mise à jour.</span><span class="sxs-lookup"><span data-stu-id="b30e2-107">You can use the **Publish Wizard** in Azure Tools to ensure that the VIP of your cloud service doesn’t change when you update it.</span></span> <span data-ttu-id="b30e2-108">Pour plus d’informations sur l’utilisation de la gestion de domaine DNS pour les services cloud, consultez [Configuration d’un nom de domaine personnalisé pour un service cloud Azure](cloud-services/cloud-services-custom-domain-name.md).</span><span class="sxs-lookup"><span data-stu-id="b30e2-108">For more information about how to use DNS domain management for cloud services, see [Configuring a custom domain name for an Azure cloud service](cloud-services/cloud-services-custom-domain-name.md).</span></span>

## <a name="publish-a-cloud-service-without-changing-its-vip"></a><span data-ttu-id="b30e2-109">Publier un service cloud sans modifier son adresse IP virtuelle</span><span class="sxs-lookup"><span data-stu-id="b30e2-109">Publish a cloud service without changing its VIP</span></span>
<span data-ttu-id="b30e2-110">L’adresse IP virtuelle d’un service cloud est allouée la première fois que vous la déployez dans Azure dans un environnement spécifique, tel que l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b30e2-110">The VIP of a cloud service is allocated when you first deploy it to Azure in a particular environment, such as the production environment.</span></span> <span data-ttu-id="b30e2-111">L’adresse IP virtuelle est modifiée uniquement si vous supprimez le déploiement explicitement ou s’il est supprimé implicitement par le processus de mise à jour de déploiement.</span><span class="sxs-lookup"><span data-stu-id="b30e2-111">The VIP changes only if you delete the deployment explicitly or the deployment is implicitly deleted by the deployment update process.</span></span> <span data-ttu-id="b30e2-112">Pour conserver l’adresse IP virtuelle, vous ne devez pas supprimer votre déploiement, et vous devez vous assurer qu’il n’est pas supprimé automatiquement par Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b30e2-112">To retain the VIP, you must not delete your deployment, and you must make sure that Visual Studio doesn’t delete your deployment automatically.</span></span> 

<span data-ttu-id="b30e2-113">Vous pouvez spécifier les paramètres de déploiement dans l’**Assistant Publication**, qui prend en charge plusieurs options de déploiement.</span><span class="sxs-lookup"><span data-stu-id="b30e2-113">You can specify deployment settings in the **Publish Wizard**, which supports several deployment options.</span></span> <span data-ttu-id="b30e2-114">Vous pouvez spécifier un nouveau déploiement ou une mise à jour de déploiement, qui peut être incrémentielle ou simultanée.</span><span class="sxs-lookup"><span data-stu-id="b30e2-114">You can specify a fresh deployment or an update deployment, which can be incremental or simultaneous.</span></span> <span data-ttu-id="b30e2-115">Dans ces deux types de mise à jour, l’adresse IP virtuelle est conservée.</span><span class="sxs-lookup"><span data-stu-id="b30e2-115">Both kinds of update deployment retain the VIP.</span></span> <span data-ttu-id="b30e2-116">Pour les définitions de ces différents types de déploiement, consultez [Assistant Publication d’application Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="b30e2-116">For definitions of these different types of deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span> <span data-ttu-id="b30e2-117">De plus, vous pouvez contrôler si une erreur se produit, dans le cas de la suppression du déploiement précédent d’un service cloud.</span><span class="sxs-lookup"><span data-stu-id="b30e2-117">In addition, you can control whether the previous deployment of a cloud service is deleted if an error occurs.</span></span> <span data-ttu-id="b30e2-118">L’adresse IP virtuelle peut être modifiée de façon inattendue si cette option n’est pas définie correctement.</span><span class="sxs-lookup"><span data-stu-id="b30e2-118">If you don't set that option correctly, the VIP might change unexpectedly.</span></span>

## <a name="update-a-cloud-service-without-changing-its-vip"></a><span data-ttu-id="b30e2-119">Mettre à jour un service cloud sans modifier son adresse IP virtuelle</span><span class="sxs-lookup"><span data-stu-id="b30e2-119">Update a cloud service without changing its VIP</span></span>
1. <span data-ttu-id="b30e2-120">Créez ou ouvrez un projet de service cloud Azure dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b30e2-120">Create or open an Azure cloud service project in Visual Studio.</span></span> 

2. <span data-ttu-id="b30e2-121">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le projet.</span><span class="sxs-lookup"><span data-stu-id="b30e2-121">In **Solution Explorer**, right-click the project.</span></span> <span data-ttu-id="b30e2-122">Dans le menu contextuel, sélectionnez **Publier**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-122">On the shortcut menu, select **Publish**.</span></span>

    ![Publish menu](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/solution-explorer-publish-menu.png)

3. <span data-ttu-id="b30e2-124">Dans la boîte de dialogue **Publication d’application Azure**, sélectionnez l’abonnement Azure vers lequel vous souhaitez effectuer le déploiement.</span><span class="sxs-lookup"><span data-stu-id="b30e2-124">In the **Publish Azure Application** dialog box, select the Azure subscription to which you want to deploy.</span></span> <span data-ttu-id="b30e2-125">Connectez-vous si nécessaire, puis sélectionnez **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-125">Sign in if necessary, and select **Next**.</span></span>

    ![Publication d’application Azure : page de connexion](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-signin.png)

4. <span data-ttu-id="b30e2-127">Dans l’onglet **Paramètres communs**, vérifiez que le nom du service cloud vers lequel vous souhaitez effectuer le déploiement, **l’environnement**, la **configuration de build** et la **configuration du service** sont corrects.</span><span class="sxs-lookup"><span data-stu-id="b30e2-127">On the **Common Settings** tab, verify that the name of the cloud service to which you’re deploying, the **Environment**, the **Build configuration**, and the **Service configuration** are all correct.</span></span>

    ![Publication d’application Azure : onglet Paramètres communs](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-common-settings.png)

5. <span data-ttu-id="b30e2-129">Dans l’onglet **Paramètres avancés**, vérifiez que l’**étiquette de déploiement** et le **compte de stockage** sont corrects.</span><span class="sxs-lookup"><span data-stu-id="b30e2-129">On the **Advanced Settings** tab, verify that the **Deployment label** and the **Storage account** are correct.</span></span> <span data-ttu-id="b30e2-130">Vérifiez que la case **Supprimer le déploiement en cas d’échec** n’est pas cochée et que la case **Mise à jour du déploiement** est cochée.</span><span class="sxs-lookup"><span data-stu-id="b30e2-130">Verify that the **Delete deployment on failure** check box is cleared, and verify that the **Deployment update** check box is selected.</span></span> <span data-ttu-id="b30e2-131">Décocher la case **Supprimer le déploiement en cas d’échec** vous garantit que votre adresse IP virtuelle ne sera pas perdue si une erreur se produit pendant le déploiement.</span><span class="sxs-lookup"><span data-stu-id="b30e2-131">By clearing the **Delete deployment on failure** check box, you ensure that your VIP isn't lost if an error occurs during deployment.</span></span> <span data-ttu-id="b30e2-132">Cocher la case **Mise à jour du déploiement** vous garantit que votre déploiement ne sera pas supprimé et que votre adresse IP virtuelle ne sera pas perdue lorsque vous republierez votre application.</span><span class="sxs-lookup"><span data-stu-id="b30e2-132">By selecting the **Deployment update** check box, you ensure that your deployment isn't deleted and your VIP isn't lost when you republish your application.</span></span> 

    ![Publication d’application Azure : onglet Paramètres avancés](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-advanced-settings.png)

6. <span data-ttu-id="b30e2-134">Pour préciser davantage comment vous souhaitez mettre à jour les rôles, sélectionnez **Paramètres** en regard de **Mise à jour du déploiement**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-134">To further specify how you want the roles to be updated, select **Settings** next to **Deployment update**.</span></span> <span data-ttu-id="b30e2-135">Sélectionnez **Mise à jour incrémentielle** ou **Mise à jour simultanée** et sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-135">Select either **Incremental update** or **Simultaneous update**, and select **OK**.</span></span> <span data-ttu-id="b30e2-136">Choisissez **Mise à jour incrémentielle** pour mettre à jour les instances de votre application l’une après l’autre afin que l’application soit toujours disponible.</span><span class="sxs-lookup"><span data-stu-id="b30e2-136">Choose **Incremental update** to update each instance of your application, one after another, so that the application is always available.</span></span> <span data-ttu-id="b30e2-137">Choisissez **Mise à jour simultanée** pour mettre à jour toutes les instances de votre application en même temps.</span><span class="sxs-lookup"><span data-stu-id="b30e2-137">Choose **Simultaneous update** to update all instances of your application at the same time.</span></span> <span data-ttu-id="b30e2-138">La mise à jour simultanée est plus rapide, mais votre service risque de ne pas être disponible pendant la durée du processus de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="b30e2-138">Simultaneous updating is faster, but your service might not be available during the update process.</span></span> <span data-ttu-id="b30e2-139">Quand vous avez terminé, cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-139">When you are finished, select **Next**.</span></span>

    ![Publication d’application Azure : page Paramètres du déploiement](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-deployment-update-settings.png)

7. <span data-ttu-id="b30e2-141">Dans la boîte de dialogue **Publication d’application Azure**, sélectionnez **Suivant** jusqu’à l’affichage de la page **Résumé**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-141">In the **Publish Azure Application** dialog box, select **Next** until the **Summary** page is displayed.</span></span> <span data-ttu-id="b30e2-142">Vérifiez vos paramètres, puis sélectionnez **Publier**.</span><span class="sxs-lookup"><span data-stu-id="b30e2-142">Verify your settings, and then select **Publish**.</span></span>
   
    ![Publication d’application Azure : page Résumé](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-summary.png)

## <a name="next-steps"></a><span data-ttu-id="b30e2-144">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b30e2-144">Next steps</span></span>
- [<span data-ttu-id="b30e2-145">Utilisation de l’Assistant Publication d’application Azure dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b30e2-145">Using the Visual Studio Publish Azure Application Wizard</span></span>](vs-azure-tools-publish-azure-application-wizard.md)

