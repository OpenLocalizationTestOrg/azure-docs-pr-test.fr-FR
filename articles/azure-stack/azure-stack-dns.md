---
title: DNS dans Azure Stack | Microsoft Docs
description: DNS dans Azure Stack
services: azure-stack
documentationcenter: 
author: ScottNapolitan
manager: byronr
editor: 
ms.assetid: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/27/2017
ms.author: victorh
ms.openlocfilehash: 61a9955c5ee65ccbe9a8231fa394eab01cda584f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="dns-in-azure-stack"></a><span data-ttu-id="6e80d-103">DNS dans Azure Stack</span><span class="sxs-lookup"><span data-stu-id="6e80d-103">DNS in Azure Stack</span></span>
<span data-ttu-id="6e80d-104">Azure Stack inclut les fonctionnalités DNS suivantes :</span><span class="sxs-lookup"><span data-stu-id="6e80d-104">Azure Stack includes the following DNS features:</span></span>
* <span data-ttu-id="6e80d-105">Prise en charge de la résolution de nom d’hôte DNS</span><span class="sxs-lookup"><span data-stu-id="6e80d-105">Support for DNS hostname resolution</span></span>
* <span data-ttu-id="6e80d-106">Création et gestion des enregistrements et zones DNS à l’aide d’API</span><span class="sxs-lookup"><span data-stu-id="6e80d-106">Create and manage DNS zones and records using API</span></span>

## <a name="support-for-dns-hostname-resolution"></a><span data-ttu-id="6e80d-107">Prise en charge de la résolution de nom d’hôte DNS</span><span class="sxs-lookup"><span data-stu-id="6e80d-107">Support for DNS hostname resolution</span></span>
<span data-ttu-id="6e80d-108">Vous pouvez spécifier une étiquette de nom de domaine DNS pour une ressource IP publique, qui crée un mappage pour l’élément *domainnamelabel.location*.cloudapp.azurestack.external vers l’adresse IP publique sur les serveurs DNS gérés par Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="6e80d-108">You can specify a DNS domain name label for a public IP resource, which creates a mapping for *domainnamelabel.location*.cloudapp.azurestack.external to the public IP address in the Azure Stack managed DNS servers.</span></span>  

<span data-ttu-id="6e80d-109">Par exemple, si vous créez une ressource IP publique avec **contoso** comme étiquette de nom de domaine à l’emplacement Azure Stack local, le nom de domaine complet (FQDN) **contoso.local.cloudapp.azurestack.external** est résolu à l’adresse IP publique de la ressource.</span><span class="sxs-lookup"><span data-stu-id="6e80d-109">For example, if you create a public IP resource with **contoso** as a domain name label in the Local Azure Stack location, the fully qualified domain name (FQDN) **contoso.local.cloudapp.azurestack.external** resolves to the public IP address of the resource.</span></span> <span data-ttu-id="6e80d-110">Vous pouvez utiliser ce nom de domaine complet pour créer un enregistrement CNAME de domaine personnalisé qui pointe vers l’adresse IP publique dans Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="6e80d-110">You can use this FQDN to create a custom domain CNAME record that points to the public IP address in Azure Stack.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6e80d-111">Chaque étiquette de nom de domaine créée doit être unique dans son emplacement Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="6e80d-111">Each domain name label created must be unique within its Azure Stack location.</span></span>

<span data-ttu-id="6e80d-112">Si vous créez l’adresse IP publique à l’aide du portail, elle ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="6e80d-112">If you create the public IP address using the portal, it looks like this:</span></span>

![Création d’une adresse IP publique](media/azure-stack-whats-new-dns/image01.png)

<span data-ttu-id="6e80d-114">Cette configuration est utile si vous souhaitez associer une adresse IP publique avec une ressource à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="6e80d-114">This configuration is useful if you want to associate a public IP address with a load-balanced resource.</span></span> <span data-ttu-id="6e80d-115">Par exemple, vous pouvez avoir un équilibreur de charge traitant les demandes à partir d’une application web.</span><span class="sxs-lookup"><span data-stu-id="6e80d-115">For example, you might have a load balancer processing requests from a web application.</span></span> <span data-ttu-id="6e80d-116">Derrière l’équilibreur de charge se trouve un site web installé sur une ou plusieurs machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="6e80d-116">Behind the load balancer is a web site located  on one or more virtual machines.</span></span> <span data-ttu-id="6e80d-117">Maintenant vous pouvez accéder au site web avec équilibrage de charge à l’aide d’un nom DNS plutôt qu’une adresse IP.</span><span class="sxs-lookup"><span data-stu-id="6e80d-117">Now you can access the load-balanced web site by a DNS name, rather than by an IP address.</span></span>

## <a name="create-and-manage-dns-zones-and-records-using-api"></a><span data-ttu-id="6e80d-118">Créer et gérer des enregistrements et zones DNS à l’aide d’API</span><span class="sxs-lookup"><span data-stu-id="6e80d-118">Create and manage DNS zones and records using API</span></span>
<span data-ttu-id="6e80d-119">Vous pouvez créer et gérer des enregistrements et des zones DNS dans Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="6e80d-119">You can create and manage DNS zones and records in Azure Stack.</span></span>  

<span data-ttu-id="6e80d-120">Azure Stack fournit un service DNS comme celui d’Azure, à l’aide d’API qui sont cohérentes avec les API DNS Azure.</span><span class="sxs-lookup"><span data-stu-id="6e80d-120">Azure Stack provides a DNS service like Azure’s, using APIs that are consistent with Azure’s DNS APIs.</span></span>  <span data-ttu-id="6e80d-121">En hébergeant vos domaines dans le système DNS Azure Stack, vous pouvez gérer vos enregistrements DNS avec les mêmes éléments que vos autres services Azure : informations d’identification, API, outils, facturation et support.</span><span class="sxs-lookup"><span data-stu-id="6e80d-121">By hosting your domains in Azure Stack DNS, you can manage your DNS records with the same credentials, APIs, tools, billing, and support as your other Azure services.</span></span> 

<span data-ttu-id="6e80d-122">Pour des raisons évidentes, l’infrastructure DNS Azure Stack est plus compacte que celle d’Azure.</span><span class="sxs-lookup"><span data-stu-id="6e80d-122">For obvious reasons, the Azure Stack DNS infrastructure is more compact than Azure's.</span></span> <span data-ttu-id="6e80d-123">La portée, l’échelle et les performances dépendent donc de l’échelle du déploiement Azure Stack et de l’environnement dans lequel il est déployé.</span><span class="sxs-lookup"><span data-stu-id="6e80d-123">Thus, the scope, scale, and performance depend on the scale of the Azure Stack deployment and the environment where it is deployed.</span></span>  <span data-ttu-id="6e80d-124">Ainsi, des éléments tels que les performances, la disponibilité, la distribution globale et la haute disponibilité peuvent varier d’un déploiement à l’autre.</span><span class="sxs-lookup"><span data-stu-id="6e80d-124">So, things like performance, availability, global distribution, and High-Availability (HA) can vary from deployment to deployment.</span></span>

## <a name="comparison-with-azure-dns"></a><span data-ttu-id="6e80d-125">Comparaison avec le système DNS Azure</span><span class="sxs-lookup"><span data-stu-id="6e80d-125">Comparison with Azure DNS</span></span>
<span data-ttu-id="6e80d-126">Le système DNS dans Azure Stack est semblable au système DNS dans Azure, avec deux exceptions majeures :</span><span class="sxs-lookup"><span data-stu-id="6e80d-126">DNS in Azure Stack is similar to DNS in Azure, with two major exceptions:</span></span>
* <span data-ttu-id="6e80d-127">**Il ne prend pas en charge les enregistrements AAAA**</span><span class="sxs-lookup"><span data-stu-id="6e80d-127">**It does not support AAAA records**</span></span>

    <span data-ttu-id="6e80d-128">Azure Stack ne prend pas en charge les enregistrements AAAA, car il ne prend pas en charge les adresses IPv6.</span><span class="sxs-lookup"><span data-stu-id="6e80d-128">Azure Stack does NOT support AAAA records because Azure Stack does not support IPv6 addresses.</span></span>  <span data-ttu-id="6e80d-129">Il s’agit d’une différence essentielle entre les systèmes DNS Azure et Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="6e80d-129">This is a key difference between DNS in Azure and Azure Stack.</span></span>
* <span data-ttu-id="6e80d-130">**Il n’est pas multilocataire**</span><span class="sxs-lookup"><span data-stu-id="6e80d-130">**It is not multi-tenant**</span></span>

    <span data-ttu-id="6e80d-131">Contrairement à Azure, le service DNS dans Azure Stack n’est pas multilocataire.</span><span class="sxs-lookup"><span data-stu-id="6e80d-131">Unlike Azure, the DNS Service in Azure Stack is not multi-tenant.</span></span> <span data-ttu-id="6e80d-132">Par conséquent, chaque client ne peut pas créer la même zone DNS.</span><span class="sxs-lookup"><span data-stu-id="6e80d-132">So each tenant cannot create the same DNS zone.</span></span> <span data-ttu-id="6e80d-133">Seul le premier abonnement qui tente de créer la zone y parvient, et les requêtes suivantes échouent.</span><span class="sxs-lookup"><span data-stu-id="6e80d-133">Only the first subscription that attempts to create the zone succeeds, and subsequent requests fail.</span></span>  <span data-ttu-id="6e80d-134">Il s’agit d’un problème connu et d’une différence essentielle entre le système DNS dans Azure et dans Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="6e80d-134">It is a known issue, and a key difference between Azure and Azure Stack DNS.</span></span> <span data-ttu-id="6e80d-135">Ce problème sera résolu dans une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="6e80d-135">This issue will be resolved in a future release.</span></span>

<span data-ttu-id="6e80d-136">En outre, il existe des différences mineures dans la façon dont le système DNS Azure Stack implémente les balises, les métadonnées, les ETags et les limites.</span><span class="sxs-lookup"><span data-stu-id="6e80d-136">In addition, there are some minor differences in how Azure Stack DNS implements Tags, Metadata, Etags, and Limits.</span></span>

<span data-ttu-id="6e80d-137">Les informations suivantes s’appliquent spécifiquement au système DNS Azure Stack, et varient légèrement par rapport à Azure.</span><span class="sxs-lookup"><span data-stu-id="6e80d-137">The following information applies specifically to Azure Stack DNS and varies slightly from Azure DNS.</span></span> <span data-ttu-id="6e80d-138">Pour en savoir plus sur le système DNS Azure, consultez [Zones et enregistrements Etags](../dns/dns-zones-records.md) sur le site de documentation de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6e80d-138">To learn more about Azure DNS, see [DNS zones and records](../dns/dns-zones-records.md) at the Microsoft Azure documentation site.</span></span>

### <a name="tags-metadata-and-etags"></a><span data-ttu-id="6e80d-139">Balises, métadonnées et ETags</span><span class="sxs-lookup"><span data-stu-id="6e80d-139">Tags, metadata, and Etags</span></span>

<span data-ttu-id="6e80d-140">**Balises**</span><span class="sxs-lookup"><span data-stu-id="6e80d-140">**Tags**</span></span>

<span data-ttu-id="6e80d-141">Le système DNS Azure Stack prend en charge l’utilisation de balises Azure Resource Manager sur des ressources de zone DNS.</span><span class="sxs-lookup"><span data-stu-id="6e80d-141">Azure Stack DNS supports using Azure Resource Manager tags on DNS zone resources.</span></span> <span data-ttu-id="6e80d-142">Il ne prend pas en charge les balises sur les jeux d’enregistrements DNS, bien que l’alternative « métadonnées » soit prise en charge sur les jeux d’enregistrements DNS comme expliqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="6e80d-142">It does not support tags on DNS record sets, although as an alternative 'metadata' is supported on DNS record sets as explained next.</span></span>

<span data-ttu-id="6e80d-143">**Métadonnées**</span><span class="sxs-lookup"><span data-stu-id="6e80d-143">**Metadata**</span></span>

<span data-ttu-id="6e80d-144">À la place de balises de jeu d’enregistrements, le système DNS Azure Stack prend en charge l’annotation des jeux d’enregistrements à l’aide de « métadonnées ».</span><span class="sxs-lookup"><span data-stu-id="6e80d-144">As an alternative to record set tags, Azure Stack DNS supports annotating record sets using 'metadata'.</span></span> <span data-ttu-id="6e80d-145">Comme des balises, les métadonnées permettent d’associer des paires nom-valeur à chaque jeu d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="6e80d-145">Similar to tags, metadata enables you to associate name-value pairs with each record set.</span></span> <span data-ttu-id="6e80d-146">Cela peut être utile, par exemple pour indiquer l’objectif de chaque jeu d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="6e80d-146">For example, this can be useful to record the purpose of each record set.</span></span> <span data-ttu-id="6e80d-147">Contrairement aux balises, vous ne pouvez pas utiliser les métadonnées pour produire une vue filtrée de votre facture Azure. Et vous ne pouvez pas non plus en spécifier dans une stratégie Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="6e80d-147">Unlike tags, metadata cannot be used to provide a filtered view of your Azure bill and cannot be specified in an Azure Resource Manager policy.</span></span>

<span data-ttu-id="6e80d-148">**ETags**</span><span class="sxs-lookup"><span data-stu-id="6e80d-148">**Etags**</span></span>

<span data-ttu-id="6e80d-149">Supposons que deux personnes ou deux processus tentent de modifier un enregistrement DNS en même temps.</span><span class="sxs-lookup"><span data-stu-id="6e80d-149">Suppose two people or two processes try to modify a DNS record at the same time.</span></span> <span data-ttu-id="6e80d-150">Lequel gagne ?</span><span class="sxs-lookup"><span data-stu-id="6e80d-150">Which one wins?</span></span> <span data-ttu-id="6e80d-151">Et le gagnant sait-il qu’il a remplacé les modifications créées par quelqu’un d’autre ?</span><span class="sxs-lookup"><span data-stu-id="6e80d-151">And does the winner know that they've overwritten changes created by someone else?</span></span>

<span data-ttu-id="6e80d-152">Le système DNS Azure Stack utilise des ETags pour gérer les modifications simultanées de la même ressource en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="6e80d-152">Azure Stack DNS uses Etags to handle concurrent changes to the same resource safely.</span></span> <span data-ttu-id="6e80d-153">Les ETags sont différents des « Balises » Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="6e80d-153">Etags are separate from Azure Resource Manager 'Tags'.</span></span> <span data-ttu-id="6e80d-154">Chaque ressource DNS (zone ou jeu d’enregistrements) est associée à un Etag.</span><span class="sxs-lookup"><span data-stu-id="6e80d-154">Each DNS resource (zone or record set) has an Etag associated with it.</span></span> <span data-ttu-id="6e80d-155">Chaque fois qu’une ressource est récupérée, son Etag l’est également.</span><span class="sxs-lookup"><span data-stu-id="6e80d-155">Whenever a resource is retrieved, its Etag is also retrieved.</span></span> <span data-ttu-id="6e80d-156">Lors de la mise à jour d’une ressource, vous pouvez choisir de retransmettre l’ETag pour que le système DNS Azure Stack vérifie que l’ETag qui se trouve sur le serveur correspond.</span><span class="sxs-lookup"><span data-stu-id="6e80d-156">When updating a resource, you can choose to pass back the Etag so Azure Stack DNS can verify that the Etag on the server matches.</span></span> <span data-ttu-id="6e80d-157">Étant donné que chaque mise à jour d’une ressource entraîne la régénération de l’Etag, l’absence de concordance entre les Etags indique qu’une modification simultanée a eu lieu.</span><span class="sxs-lookup"><span data-stu-id="6e80d-157">Since each update to a resource results in the Etag being regenerated, an Etag mismatch indicates a concurrent change has occurred.</span></span> <span data-ttu-id="6e80d-158">Les Etags sont également utilisés lorsque vous créez une ressource pour vous assurer que la ressource n’existe pas déjà.</span><span class="sxs-lookup"><span data-stu-id="6e80d-158">Etags can also be used when creating a new resource to ensure that the resource does not already exist.</span></span>

<span data-ttu-id="6e80d-159">Par défaut, PowerShell dans le système DNS Azure Stack utilise des ETags pour bloquer les modifications simultanées apportées à des zones et des jeux d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="6e80d-159">By default, Azure Stack DNS PowerShell uses Etags to block concurrent changes to zones and record sets.</span></span> <span data-ttu-id="6e80d-160">Le commutateur facultatif *-Overwrite* peut être utilisé pour supprimer les vérifications d’Etags, auquel cas toutes les modifications simultanées qui se sont produites sont remplacées.</span><span class="sxs-lookup"><span data-stu-id="6e80d-160">The optional *-Overwrite* switch can be used to suppress Etag checks, in which case any concurrent changes that have occurred are overwritten.</span></span>

<span data-ttu-id="6e80d-161">Au niveau de l’API REST du système DNS Azure Stack, les ETags sont spécifiés à l’aide d’en-têtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="6e80d-161">At the level of the Azure Stack DNS REST API, Etags are specified using HTTP headers.</span></span> <span data-ttu-id="6e80d-162">Leur comportement est indiqué dans le tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="6e80d-162">Their behavior is given in the following table:</span></span>

| <span data-ttu-id="6e80d-163">En-tête</span><span class="sxs-lookup"><span data-stu-id="6e80d-163">Header</span></span> | <span data-ttu-id="6e80d-164">Comportement</span><span class="sxs-lookup"><span data-stu-id="6e80d-164">Behavior</span></span>|
|--------|---------|
| <span data-ttu-id="6e80d-165">Aucun</span><span class="sxs-lookup"><span data-stu-id="6e80d-165">None</span></span>   | <span data-ttu-id="6e80d-166">PUT réussit toujours (aucune vérification Etag)</span><span class="sxs-lookup"><span data-stu-id="6e80d-166">PUT always succeeds (no Etag checks)</span></span>|
| <span data-ttu-id="6e80d-167">If-match</span><span class="sxs-lookup"><span data-stu-id="6e80d-167">If-match</span></span>| <span data-ttu-id="6e80d-168">PUT ne réussit que si la ressource existe et que l’Etag correspond</span><span class="sxs-lookup"><span data-stu-id="6e80d-168">PUT only succeeds if resource exists and Etag matches</span></span>|
| <span data-ttu-id="6e80d-169">If-match *</span><span class="sxs-lookup"><span data-stu-id="6e80d-169">If-match *</span></span>| <span data-ttu-id="6e80d-170">PUT réussit seulement si la ressource existe</span><span class="sxs-lookup"><span data-stu-id="6e80d-170">PUT only succeeds if resource exists</span></span>|
| <span data-ttu-id="6e80d-171">If-none-match *</span><span class="sxs-lookup"><span data-stu-id="6e80d-171">If-none-match *</span></span>| <span data-ttu-id="6e80d-172">PUT réussit seulement si la ressource n’existe pas</span><span class="sxs-lookup"><span data-stu-id="6e80d-172">PUT only succeeds if resource does not exist</span></span>|

### <a name="limits"></a><span data-ttu-id="6e80d-173">limites</span><span class="sxs-lookup"><span data-stu-id="6e80d-173">Limits</span></span>

<span data-ttu-id="6e80d-174">Les limites par défaut suivantes s’appliquent lors de l’utilisation du système DNS Azure Stack :</span><span class="sxs-lookup"><span data-stu-id="6e80d-174">The following default limits apply when using Azure Stack DNS:</span></span>

| <span data-ttu-id="6e80d-175">Ressource</span><span class="sxs-lookup"><span data-stu-id="6e80d-175">Resource</span></span>| <span data-ttu-id="6e80d-176">Limite par défaut</span><span class="sxs-lookup"><span data-stu-id="6e80d-176">Default limit</span></span>|
|---------|--------------|
| <span data-ttu-id="6e80d-177">Zones par abonnement</span><span class="sxs-lookup"><span data-stu-id="6e80d-177">Zones per subscription</span></span>| <span data-ttu-id="6e80d-178">100</span><span class="sxs-lookup"><span data-stu-id="6e80d-178">100</span></span>|
| <span data-ttu-id="6e80d-179">Jeux d’enregistrements par zone</span><span class="sxs-lookup"><span data-stu-id="6e80d-179">Record sets per zone</span></span>| <span data-ttu-id="6e80d-180">5 000</span><span class="sxs-lookup"><span data-stu-id="6e80d-180">5000</span></span>|
| <span data-ttu-id="6e80d-181">Enregistrements par jeu d’enregistrements</span><span class="sxs-lookup"><span data-stu-id="6e80d-181">Records per record set</span></span>| <span data-ttu-id="6e80d-182">20</span><span class="sxs-lookup"><span data-stu-id="6e80d-182">20</span></span>|

## <a name="next-steps"></a><span data-ttu-id="6e80d-183">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="6e80d-183">Next steps</span></span>
[<span data-ttu-id="6e80d-184">Introduction aux noms de domaine internationaux (IDN) pour Azure Stack</span><span class="sxs-lookup"><span data-stu-id="6e80d-184">Introducing iDNS for Azure Stack</span></span>](azure-stack-understanding-dns.md)
