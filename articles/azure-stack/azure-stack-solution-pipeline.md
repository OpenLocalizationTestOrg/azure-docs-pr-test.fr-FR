---
title: aaaDeploy votre application tooAzure et la pile de Azure | Documents Microsoft
description: "Découvrez comment toodeploy applications tooAzure et pile Azure avec un élément de configuration/CD hybride de pipeline."
services: azure-stack
documentationcenter: 
author: HeathL17
manager: byronr
editor: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: helaw
ms.custom: mvc
ms.openlocfilehash: a468d7da6f34d04809ee98463a8c4146da581015
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="deploy-apps-tooazure-and-azure-stack"></a><span data-ttu-id="28ba2-103">Déployer des applications tooAzure et la pile de Azure</span><span class="sxs-lookup"><span data-stu-id="28ba2-103">Deploy apps tooAzure and Azure Stack</span></span>
<span data-ttu-id="28ba2-104">Un hybride [intégration continue](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[livraison continue](https://www.visualstudio.com/learn/what-is-continuous-delivery/)pipeline de (l’élément de configuration/CD) vous permet de toobuild, tester et déployer vos clouds de toomultiple d’application.</span><span class="sxs-lookup"><span data-stu-id="28ba2-104">A hybrid [continuous integration](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[continuous delivery](https://www.visualstudio.com/learn/what-is-continuous-delivery/)(CI/CD) pipeline enables you toobuild, test, and deploy your app toomultiple clouds.</span></span>  <span data-ttu-id="28ba2-105">Dans ce didacticiel, vous générez un toolearn d’environnement exemple comment un pipeline de l’élément de configuration/CD hybride peut vous aider à :</span><span class="sxs-lookup"><span data-stu-id="28ba2-105">In this tutorial, you build a sample environment toolearn how a hybrid CI/CD pipeline can help you:</span></span>
 
> [!div class="checklist"]
> * <span data-ttu-id="28ba2-106">Lancer une nouvelle build basée sur un référentiel de code validations tooyour Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="28ba2-106">Initiate a new build based on code commits tooyour Visual Studio Team Services (VSTS) repository.</span></span>
> * <span data-ttu-id="28ba2-107">Déployer automatiquement votre tooAzure code nouvellement généré pour le test d’acceptation utilisateur.</span><span class="sxs-lookup"><span data-stu-id="28ba2-107">Automatically deploy your newly built code tooAzure for user acceptance testing.</span></span>
> * <span data-ttu-id="28ba2-108">Une fois que votre code a passé les tests, déployer automatiquement tooAzure pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-108">Once your code has passed testing, automatically deploy tooAzure Stack.</span></span> 


## <a name="prerequisites"></a><span data-ttu-id="28ba2-109">Composants requis</span><span class="sxs-lookup"><span data-stu-id="28ba2-109">Prerequisites</span></span>
<span data-ttu-id="28ba2-110">Quelques composants sont requis toobuild un pipeline de l’élément de configuration/CD hybride et peuvent prendre quelques tooprepare de temps.</span><span class="sxs-lookup"><span data-stu-id="28ba2-110">A few components are required toobuild a hybrid CI/CD pipeline, and may take some time tooprepare.</span></span>  <span data-ttu-id="28ba2-111">Si vous avez déjà certains de ces composants, assurez-vous que ceux-ci répondent aux exigences de hello avant de commencer.</span><span class="sxs-lookup"><span data-stu-id="28ba2-111">If you already have some of these components, make sure they meet hello requirements before beginning.</span></span>

<span data-ttu-id="28ba2-112">Cette rubrique suppose également que vous connaissez déjà Azure et Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="28ba2-112">This topic also assumes that you have some knowledge of Azure and Azure Stack.</span></span> <span data-ttu-id="28ba2-113">Si vous souhaitez toolearn plus avant de continuer, être toostart que les rubriques suivantes :</span><span class="sxs-lookup"><span data-stu-id="28ba2-113">If you want toolearn more before proceeding, be sure toostart with these topics:</span></span>

- [<span data-ttu-id="28ba2-114">Introduction tooAzure</span><span class="sxs-lookup"><span data-stu-id="28ba2-114">Introduction tooAzure</span></span>](https://docs.microsoft.com/azure/fundamentals-introduction-to-azure)
- [<span data-ttu-id="28ba2-115">Concepts clés d’Azure Stack</span><span class="sxs-lookup"><span data-stu-id="28ba2-115">Azure Stack Key Concepts</span></span>](azure-stack-key-features.md)

### <a name="azure"></a><span data-ttu-id="28ba2-116">Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="28ba2-116">Azure</span></span>
 - <span data-ttu-id="28ba2-117">Si vous n’avez pas d’abonnement Azure, créez un [compte gratuit](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) avant de commencer.</span><span class="sxs-lookup"><span data-stu-id="28ba2-117">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
 - <span data-ttu-id="28ba2-118">Créez une [application web](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md), puis configurez-la pour la [publication FTP](../app-service-web/app-service-deploy-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="28ba2-118">Create a [Web App](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md), and configure it for [FTP publishing](../app-service-web/app-service-deploy-ftp.md).</span></span>  <span data-ttu-id="28ba2-119">Prenez note de hello nouvelle URL de l’application Web, tel qu’il est utilisé ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="28ba2-119">Make note of hello new Web App URL, as it is used later.</span></span>


### <a name="azure-stack"></a><span data-ttu-id="28ba2-120">Azure Stack</span><span class="sxs-lookup"><span data-stu-id="28ba2-120">Azure Stack</span></span>
 - <span data-ttu-id="28ba2-121">[Déployez Azure Stack](azure-stack-run-powershell-script.md).</span><span class="sxs-lookup"><span data-stu-id="28ba2-121">[Deploy Azure Stack](azure-stack-run-powershell-script.md).</span></span>  <span data-ttu-id="28ba2-122">installation de Hello prend généralement quelques heures toocomplete, donc planifier en conséquence.</span><span class="sxs-lookup"><span data-stu-id="28ba2-122">hello installation usually takes a few hours toocomplete, so plan accordingly.</span></span>
 - <span data-ttu-id="28ba2-123">Déployer [du Service d’applications](azure-stack-app-service-deploy.md) tooAzure pile des services PaaS.</span><span class="sxs-lookup"><span data-stu-id="28ba2-123">Deploy [App Service](azure-stack-app-service-deploy.md) PaaS services tooAzure Stack.</span></span>
 - <span data-ttu-id="28ba2-124">Créez une application web, puis configurez-la pour la [publication FTP](azure-stack-app-service-enable-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="28ba2-124">Create a Web App and configure it for [FTP publishing](azure-stack-app-service-enable-ftp.md).</span></span>  <span data-ttu-id="28ba2-125">Prenez note de hello nouvelle URL de l’application Web, tel qu’il est utilisé ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="28ba2-125">Make note of hello new Web App URL, as it is used later.</span></span>  

### <a name="developer-tools"></a><span data-ttu-id="28ba2-126">Outils de développeur</span><span class="sxs-lookup"><span data-stu-id="28ba2-126">Developer tools</span></span>
 - <span data-ttu-id="28ba2-127">Créez un [espace de travail VSTS](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).</span><span class="sxs-lookup"><span data-stu-id="28ba2-127">Create a [VSTS workspace](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).</span></span>  <span data-ttu-id="28ba2-128">le processus d’inscription Hello crée un projet nommé « MyFirstProject ».</span><span class="sxs-lookup"><span data-stu-id="28ba2-128">hello sign-up process creates a project named "MyFirstProject."</span></span>  
 - <span data-ttu-id="28ba2-129">[Installer Visual Studio 2017](https://docs.microsoft.com/visualstudio/install/install-visual-studio) et [tooVSTS de connexion](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="28ba2-129">[Install Visual Studio 2017](https://docs.microsoft.com/visualstudio/install/install-visual-studio) and [sign-in tooVSTS](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)</span></span>
 - <span data-ttu-id="28ba2-130">Connecter toohello projet et [cloner localement](https://www.visualstudio.com/docs/git/gitquickstart).</span><span class="sxs-lookup"><span data-stu-id="28ba2-130">Connect toohello project and [clone locally](https://www.visualstudio.com/docs/git/gitquickstart).</span></span>
 - <span data-ttu-id="28ba2-131">Créez un [pool d’agents](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) dans VSTS.</span><span class="sxs-lookup"><span data-stu-id="28ba2-131">Create an [agent pool](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) in VSTS.</span></span>
 - <span data-ttu-id="28ba2-132">Installer Visual Studio et déployer un [l’agent de build VSTS](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) virtuels tooa sur la pile de Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-132">Install Visual Studio and deploy a [VSTS build agent](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) tooa virtual machine on Azure Stack.</span></span> 
 

## <a name="create-app--push-toovsts"></a><span data-ttu-id="28ba2-133">Créer tooVSTS & par émission de données d’application</span><span class="sxs-lookup"><span data-stu-id="28ba2-133">Create app & push tooVSTS</span></span>

### <a name="create-application"></a><span data-ttu-id="28ba2-134">Créer une application</span><span class="sxs-lookup"><span data-stu-id="28ba2-134">Create application</span></span>
<span data-ttu-id="28ba2-135">Dans cette section, vous créez une application ASP.NET simple et poussez tooVSTS.</span><span class="sxs-lookup"><span data-stu-id="28ba2-135">In this section, you create a simple ASP.NET application and push it tooVSTS.</span></span>  <span data-ttu-id="28ba2-136">Ces étapes représentent le flux de travail de développeur normal hello et pourrait être adaptés pour les langages et outils de développement.</span><span class="sxs-lookup"><span data-stu-id="28ba2-136">These steps represent hello normal developer workflow, and could be adapted for developer tools and languages.</span></span> 

1.  <span data-ttu-id="28ba2-137">Ouvrez Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="28ba2-137">Open Visual Studio.</span></span>
2.  <span data-ttu-id="28ba2-138">À partir de hello espace de Team Explorer et **Solutions...**  zone, cliquez sur **nouveau**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-138">From hello Team Explorer space and **Solutions...** area, click **New**.</span></span>
3.  <span data-ttu-id="28ba2-139">Sélectionnez **Visual C#** > **Web** > **Application web ASP.NET (.NET Framework)**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-139">Select **Visual C#** > **Web** > **ASP.NET Web Application (.NET Framework)**.</span></span>
4.  <span data-ttu-id="28ba2-140">Fournissez un nom pour l’application hello et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-140">Provide a name for hello application and click **OK**.</span></span>
5.  <span data-ttu-id="28ba2-141">Sur l’écran suivant de hello, conservez les valeurs par défaut de hello (Web forms), puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-141">On hello next screen, keep hello defaults (Web forms) and click **OK**.</span></span>

### <a name="commit-and-push-changes-toovsts"></a><span data-ttu-id="28ba2-142">Validez et envoyez des modifications tooVSTS</span><span class="sxs-lookup"><span data-stu-id="28ba2-142">Commit and push changes tooVSTS</span></span>
1.  <span data-ttu-id="28ba2-143">À l’aide de Team Explorer dans Visual Studio, sélectionnez la liste déroulante de hello et cliquez sur **modifications**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-143">Using Team Explorer in Visual Studio, select hello dropdown and click **Changes**.</span></span>
2.  <span data-ttu-id="28ba2-144">Indiquez un message de validation, puis sélectionnez **Valider tout**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-144">Provide a commit message and select **Commit all**.</span></span> <span data-ttu-id="28ba2-145">Vous pouvez soit être invité à toosave hello solution fichier, cliquez sur Oui toosave de tous les.</span><span class="sxs-lookup"><span data-stu-id="28ba2-145">You may be prompted toosave hello solution file, click yes toosave all.</span></span>
3.  <span data-ttu-id="28ba2-146">Une fois validées, Visual Studio propose des projets de tooyour toosync modifications.</span><span class="sxs-lookup"><span data-stu-id="28ba2-146">Once committed, Visual Studio offers toosync changes tooyour project.</span></span> <span data-ttu-id="28ba2-147">Sélectionnez **Synchroniser**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-147">Select **Sync**.</span></span>

    ![écran de validation de hello image montrant une fois que la fin de la validation](./media/azure-stack-solution-pipeline/image1.png)

4.  <span data-ttu-id="28ba2-149">Dans l’onglet synchronisation hello sous *sortant*, vous voyez votre nouvelle validation.</span><span class="sxs-lookup"><span data-stu-id="28ba2-149">In hello synchronization tab, under *Outgoing*, you see your new commit.</span></span>  <span data-ttu-id="28ba2-150">Sélectionnez **Push** toosynchronize hello modifier tooVSTS.</span><span class="sxs-lookup"><span data-stu-id="28ba2-150">Select **Push** toosynchronize hello change tooVSTS.</span></span>

    ![image montrant les étapes de la synchronisation](./media/azure-stack-solution-pipeline/image2.png)

### <a name="review-code-in-vsts"></a><span data-ttu-id="28ba2-152">Revoir le code dans VSTS</span><span class="sxs-lookup"><span data-stu-id="28ba2-152">Review code in VSTS</span></span>
<span data-ttu-id="28ba2-153">Une fois vous avez validé une modification et envoyée tooVSTS, vérifiez que votre code à partir du portail VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-153">Once you've committed a change and pushed tooVSTS, check your code from hello VSTS portal.</span></span>  <span data-ttu-id="28ba2-154">Sélectionnez **Code**, puis **fichiers** à partir du menu déroulant de hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-154">Select **Code**, and then **Files** from hello dropdown menu.</span></span>  <span data-ttu-id="28ba2-155">Vous pouvez voir des solutions hello que vous avez créé.</span><span class="sxs-lookup"><span data-stu-id="28ba2-155">You can see hello solution you created.</span></span>

## <a name="create-build-definition"></a><span data-ttu-id="28ba2-156">Création d’une définition de build</span><span class="sxs-lookup"><span data-stu-id="28ba2-156">Create build definition</span></span>
<span data-ttu-id="28ba2-157">processus de génération Hello définit la manière dont votre application est créée et empaquetée pour le déploiement sur chaque validation des modifications du code.</span><span class="sxs-lookup"><span data-stu-id="28ba2-157">hello build process defines how your application is built and packaged for deployment on each commit of code changes.</span></span> <span data-ttu-id="28ba2-158">Dans notre exemple, nous utiliser des processus de génération de hello inclus modèle tooconfigure hello pour une application ASP.NET, bien que cette configuration peut être adaptée en fonction de votre application.</span><span class="sxs-lookup"><span data-stu-id="28ba2-158">In our example, we use hello included template tooconfigure hello build process for an ASP.NET app, though this configuration could be adapted depending on your application.</span></span>

1.  <span data-ttu-id="28ba2-159">Se connecter tooyour espace de travail VSTS à partir d’un navigateur web.</span><span class="sxs-lookup"><span data-stu-id="28ba2-159">Sign in tooyour VSTS workspace from a web browser.</span></span>
2.  <span data-ttu-id="28ba2-160">Dans la bannière de hello, sélectionnez **générer & version** , puis **génère**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-160">From hello banner, select **Build & Release**  and then **Builds**.</span></span>
3.  <span data-ttu-id="28ba2-161">Sélectionnez **+ Nouvelle définition**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-161">Click **+ New definition**.</span></span>
4.  <span data-ttu-id="28ba2-162">Dans la liste hello des modèles, sélectionnez **ASP.NET (version préliminaire)** et sélectionnez **appliquer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-162">From hello list of templates, select **ASP.NET (Preview)** and select **Apply**.</span></span>
5.  <span data-ttu-id="28ba2-163">Modifier hello *Arguments MSBuild* champ *générer la Solution* à l’étape :</span><span class="sxs-lookup"><span data-stu-id="28ba2-163">Modify hello *MSBuild Arguments* field in *Build Solution* step to:</span></span>

    `/p:DeployOnBuild=True /p:WebPublishMethod=FileSystem /p:DeployDefaultTarget=WebPublish /p:publishUrl="$(build.artifactstagingdirectory)\\"`

6.  <span data-ttu-id="28ba2-164">Sélectionnez hello **Options** onglet file d’attente et sélectionnez hello agent pourquoi l’agent de build vous déployé tooa une machine virtuelle sur Azure pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-164">Select hello **Options** tab, and select hello agent queue for hello build agent you deployed tooa virtual machine on Azure Stack.</span></span> 
7.  <span data-ttu-id="28ba2-165">Sélectionnez hello **déclencheurs** onglet et activer **intégration continue**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-165">Select hello **Triggers** tab, and enable **Continuous Integration**.</span></span>
7.  <span data-ttu-id="28ba2-166">Cliquez sur **enregistrer et de file d’attente** , puis sélectionnez **enregistrer** à partir de la liste déroulante de hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-166">Click **Save & queue** and then select **Save** from hello dropdown.</span></span> 

## <a name="create-release-definition"></a><span data-ttu-id="28ba2-167">Création d’une définition de mise en production</span><span class="sxs-lookup"><span data-stu-id="28ba2-167">Create release definition</span></span>
<span data-ttu-id="28ba2-168">processus de mise en production Hello définit comment les générations à partir de l’étape précédente de hello sont déployés tooan environnement.</span><span class="sxs-lookup"><span data-stu-id="28ba2-168">hello release process defines how builds from hello previous step are deployed tooan environment.</span></span>  <span data-ttu-id="28ba2-169">Dans ce didacticiel, nous publions notre application ASP.NET avec FTP tooan application Web Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-169">In this tutorial, we publish our ASP.NET app with FTP tooan Azure Web App.</span></span> <span data-ttu-id="28ba2-170">tooconfigure un tooAzure mise en production, utilisez hello comme suit :</span><span class="sxs-lookup"><span data-stu-id="28ba2-170">tooconfigure a release tooAzure, use hello following steps:</span></span>

1.  <span data-ttu-id="28ba2-171">Dans la bannière de VSTS hello, sélectionnez **générer & version** , puis **versions**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-171">From hello VSTS banner, select **Build & Release**  and then **Releases**.</span></span>
2.  <span data-ttu-id="28ba2-172">Cliquez sur hello verte **+ nouvelle définition**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-172">Click hello green **+ New definition**.</span></span>
3.  <span data-ttu-id="28ba2-173">Sélectionnez **Vide** et cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-173">Select **Empty** and click **Next**.</span></span>
4.  <span data-ttu-id="28ba2-174">Case de hello pour *déploiement continu*, puis cliquez sur **créer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-174">Check hello box for *Continuous deployment*, and then click **Create**.</span></span>

<span data-ttu-id="28ba2-175">Maintenant que vous avez créé une définition de version vide et il liée toohello build, nous ajoutons des étapes pour hello environnement Azure :</span><span class="sxs-lookup"><span data-stu-id="28ba2-175">Now that you've created an empty release definition and tied it toohello build, we add steps for hello Azure environment:</span></span>

1.  <span data-ttu-id="28ba2-176">Cliquez sur hello verte  **+**  tooadd tâches.</span><span class="sxs-lookup"><span data-stu-id="28ba2-176">Click hello green **+** tooadd tasks.</span></span>
2.  <span data-ttu-id="28ba2-177">Sélectionnez **tous les**, puis à partir de la liste de hello, ajoutez **de téléchargement FTP** et sélectionnez **fermer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-177">Select **All**, and then from hello list, add **FTP Upload** and select **Close**.</span></span>
3.  <span data-ttu-id="28ba2-178">Sélectionnez hello **de téléchargement FTP** tâche que vous venez d’ajouter et configurer les paramètres suivants de hello :</span><span class="sxs-lookup"><span data-stu-id="28ba2-178">Select hello **FTP Upload** task you just added, and configure hello following parameters:</span></span>
    
    | <span data-ttu-id="28ba2-179">Paramètre</span><span class="sxs-lookup"><span data-stu-id="28ba2-179">Parameter</span></span> | <span data-ttu-id="28ba2-180">Valeur</span><span class="sxs-lookup"><span data-stu-id="28ba2-180">Value</span></span> |
    | ----- | ----- |
    |<span data-ttu-id="28ba2-181">Méthode d'authentification</span><span class="sxs-lookup"><span data-stu-id="28ba2-181">Authentication Method</span></span>| <span data-ttu-id="28ba2-182">Entrer les informations d’identification</span><span class="sxs-lookup"><span data-stu-id="28ba2-182">Enter Credentials</span></span>|
    |<span data-ttu-id="28ba2-183">URL du serveur</span><span class="sxs-lookup"><span data-stu-id="28ba2-183">Server URL</span></span> | <span data-ttu-id="28ba2-184">URL FTP de l’application web récupérée à partir du portail Azure</span><span class="sxs-lookup"><span data-stu-id="28ba2-184">Web App FTP URL retrieved from Azure portal</span></span> |
    |<span data-ttu-id="28ba2-185">Nom d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="28ba2-185">Username</span></span> | <span data-ttu-id="28ba2-186">Nom d’utilisateur que vous avez configuré lors de la création des informations d’identification FTP pour l’application web</span><span class="sxs-lookup"><span data-stu-id="28ba2-186">Username you configured when creating FTP Credentials for Web App</span></span> |
    |<span data-ttu-id="28ba2-187">Mot de passe</span><span class="sxs-lookup"><span data-stu-id="28ba2-187">Password</span></span> | <span data-ttu-id="28ba2-188">Mot de passe que vous avez créé lors de la définition des informations d’identification FTP pour l’application web</span><span class="sxs-lookup"><span data-stu-id="28ba2-188">Password you created when establishing FTP credentials for Web App</span></span>|
    |<span data-ttu-id="28ba2-189">Répertoire source</span><span class="sxs-lookup"><span data-stu-id="28ba2-189">Source Directory</span></span> | <span data-ttu-id="28ba2-190">$(System.DefaultWorkingDirectory)\**\\</span><span class="sxs-lookup"><span data-stu-id="28ba2-190">$(System.DefaultWorkingDirectory)\**\\</span></span> |
    |<span data-ttu-id="28ba2-191">Répertoire distant</span><span class="sxs-lookup"><span data-stu-id="28ba2-191">Remote Directory</span></span> | <span data-ttu-id="28ba2-192">/site/wwwroot/</span><span class="sxs-lookup"><span data-stu-id="28ba2-192">/site/wwwroot/</span></span> |
    |<span data-ttu-id="28ba2-193">Conserver les chemins de fichiers</span><span class="sxs-lookup"><span data-stu-id="28ba2-193">Preserve file paths</span></span> | <span data-ttu-id="28ba2-194">Activé (coché)</span><span class="sxs-lookup"><span data-stu-id="28ba2-194">Enabled (checked)</span></span>|

4.  <span data-ttu-id="28ba2-195">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-195">Click **Save**</span></span>

<span data-ttu-id="28ba2-196">Enfin, vous configurer hello version définition toouse hello pool d’agents contenant agent hello déployé à l’aide de hello comme suit :</span><span class="sxs-lookup"><span data-stu-id="28ba2-196">Finally, you configure hello release definition toouse hello agent pool containing hello agent deployed using hello following steps:</span></span>
1.  <span data-ttu-id="28ba2-197">Sélectionnez la définition de la version hello et cliquez sur **modifier**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-197">Select hello release definition and click **Edit**.</span></span>
2.  <span data-ttu-id="28ba2-198">Sélectionnez **s’exécutent sur l’agent** à partir de la colonne du milieu hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-198">Select **Run on agent** from hello middle column.</span></span>  <span data-ttu-id="28ba2-199">Dans la colonne de droite hello, sélectionnez la file d’attente de l’agent hello contenant l’agent de build hello en cours d’exécution sur la pile de Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-199">In hello right column, select hello agent queue containing hello build agent running on Azure Stack.</span></span>  
    <span data-ttu-id="28ba2-200">![configuration d’affichant l’image de file d’attente spécifique version définition toouse](./media/azure-stack-solution-pipeline/image3.png)</span><span class="sxs-lookup"><span data-stu-id="28ba2-200">![image showing configuration of release definition toouse specific queue](./media/azure-stack-solution-pipeline/image3.png)</span></span>


## <a name="deploy-your-app-tooazure"></a><span data-ttu-id="28ba2-201">Déployer votre application tooAzure</span><span class="sxs-lookup"><span data-stu-id="28ba2-201">Deploy your app tooAzure</span></span>
<span data-ttu-id="28ba2-202">Cette étape utilise votre nouvellement créé l’élément de configuration/CD pipeline toodeploy hello ASP.NET application tooa application Web sur Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-202">This step uses your newly built CI/CD pipeline toodeploy hello ASP.NET app tooa Web App on Azure.</span></span> 

1.  <span data-ttu-id="28ba2-203">Dans la bannière de hello dans VSTS, sélectionnez **générer & version**, puis sélectionnez **génère**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-203">From hello banner in VSTS, select **Build & Release**, and then select **Builds**.</span></span>
2.  <span data-ttu-id="28ba2-204">Cliquez sur **...**  sur hello créée précédemment de définition de build, puis sélectionnez **nouvelle build en file d’attente**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-204">Click **...** on hello build definition previously created, and select **Queue new build**.</span></span>
3.  <span data-ttu-id="28ba2-205">Acceptez les valeurs par défaut hello et cliquez sur **Ok**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-205">Accept hello defaults and click **Ok**.</span></span>  <span data-ttu-id="28ba2-206">génération de Hello commence et affiche la progression.</span><span class="sxs-lookup"><span data-stu-id="28ba2-206">hello build begins and displays progress.</span></span>
4.  <span data-ttu-id="28ba2-207">Une fois la génération de hello est terminée, vous pouvez suivre l’état de hello en sélectionnant **générer & version** et en sélectionnant **versions**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-207">Once hello build is complete, you can track hello status by selecting **Build & Release** and selecting **Releases**.</span></span>
5.  <span data-ttu-id="28ba2-208">Une fois la génération de hello est terminée, le site hello à l’aide des URL hello indiqué lors de la création de hello Web App.</span><span class="sxs-lookup"><span data-stu-id="28ba2-208">After hello build is complete, visit hello website using hello URL noted when creating hello Web App.</span></span>    


## <a name="add-azure-stack-toopipeline"></a><span data-ttu-id="28ba2-209">Ajouter Azure pile toopipeline</span><span class="sxs-lookup"><span data-stu-id="28ba2-209">Add Azure Stack toopipeline</span></span>
<span data-ttu-id="28ba2-210">Maintenant que vous avez testé votre pipeline de l’élément de configuration/CD en déployant tooAzure, il est temps tooadd pipeline toohello de pile de Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-210">Now that you've tested your CI/CD pipeline by deploying tooAzure, it's time tooadd Azure Stack toohello pipeline.</span></span>  <span data-ttu-id="28ba2-211">Bonjour comme suit, vous créez un environnement et ajoutez un toodeploy de tâche FTP télécharger votre tooAzure application pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-211">In hello following steps, you create a new environment and add an FTP Upload task toodeploy your app tooAzure Stack.</span></span>  <span data-ttu-id="28ba2-212">Vous ajoutez également un approbateur de version, qui sert d’un toosimulate de façon « approbation » sur un tooAzure de version du code pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-212">You also add a release approver, which serves as a way toosimulate "signing off" on a code release tooAzure Stack.</span></span>  

1.  <span data-ttu-id="28ba2-213">Dans la définition de la version de hello, sélectionnez **+ ajouter un environnement** et **créer un nouvel environnement**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-213">In hello Release definition, select **+ Add Environment** and **Create new environment**.</span></span>
2.  <span data-ttu-id="28ba2-214">Sélectionnez **Vide** et cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-214">Select **Empty**, click **Next**.</span></span>
3.  <span data-ttu-id="28ba2-215">Sélectionnez **Utilisateurs spécifiques** et spécifiez votre compte.</span><span class="sxs-lookup"><span data-stu-id="28ba2-215">Select **Specific users** and specify your account.</span></span>  <span data-ttu-id="28ba2-216">Sélectionnez **Créer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-216">Select **Create**.</span></span>
4.  <span data-ttu-id="28ba2-217">Renommer l’environnement de hello en sélectionnant nom existant de hello et en tapant *Azure pile*.</span><span class="sxs-lookup"><span data-stu-id="28ba2-217">Rename hello environment by selecting hello existing name and typing *Azure Stack*.</span></span>
5.  <span data-ttu-id="28ba2-218">À présent, sélection hello environnement Azure pile, puis sélectionnez **ajouter des tâches**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-218">Now, selection hello Azure Stack environment, then select **Add tasks**.</span></span>
6.  <span data-ttu-id="28ba2-219">Sélectionnez hello **de téléchargement FTP** de tâches et sélectionnez **ajouter**, puis sélectionnez **fermer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-219">Select hello **FTP Upload** task and select **Add**, then select **Close**.</span></span>


### <a name="configure-ftp-task"></a><span data-ttu-id="28ba2-220">Configurer une tâche FTP</span><span class="sxs-lookup"><span data-stu-id="28ba2-220">Configure FTP task</span></span>
<span data-ttu-id="28ba2-221">Maintenant que vous avez créé une mise en production, vous allez configurer les étapes de hello requises pour la publication toohello application Web sur la pile de Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-221">Now that you've created a release, you'll configure hello steps required for publishing toohello Web App on Azure Stack.</span></span>  <span data-ttu-id="28ba2-222">Tout comme vous avez configuré la tâche de téléchargement FTP hello pour Azure, vous configurez tâche hello pour la pile de Azure :</span><span class="sxs-lookup"><span data-stu-id="28ba2-222">Just like you configured hello FTP Upload task for Azure, you configure hello task for Azure Stack:</span></span>

1.  <span data-ttu-id="28ba2-223">Sélectionnez hello **de téléchargement FTP** tâche que vous venez d’ajouter et configurer les paramètres suivants de hello :</span><span class="sxs-lookup"><span data-stu-id="28ba2-223">Select hello **FTP Upload** task you just added, and configure hello following parameters:</span></span>
    
    | <span data-ttu-id="28ba2-224">Paramètre</span><span class="sxs-lookup"><span data-stu-id="28ba2-224">Parameter</span></span> | <span data-ttu-id="28ba2-225">Valeur</span><span class="sxs-lookup"><span data-stu-id="28ba2-225">Value</span></span> |
    | -----     | ----- |
    |<span data-ttu-id="28ba2-226">Méthode d'authentification</span><span class="sxs-lookup"><span data-stu-id="28ba2-226">Authentication Method</span></span>| <span data-ttu-id="28ba2-227">Entrer les informations d’identification</span><span class="sxs-lookup"><span data-stu-id="28ba2-227">Enter Credentials</span></span>|
    |<span data-ttu-id="28ba2-228">URL du serveur</span><span class="sxs-lookup"><span data-stu-id="28ba2-228">Server URL</span></span> | <span data-ttu-id="28ba2-229">URL FTP de l’application web récupérée à partir du portail Azure Stack</span><span class="sxs-lookup"><span data-stu-id="28ba2-229">Web App FTP URL retrieved from Azure Stack portal</span></span> |
    |<span data-ttu-id="28ba2-230">Nom d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="28ba2-230">Username</span></span> | <span data-ttu-id="28ba2-231">Nom d’utilisateur que vous avez configuré lors de la création des informations d’identification FTP pour l’application web</span><span class="sxs-lookup"><span data-stu-id="28ba2-231">Username you configured when creating FTP Credentials for Web App</span></span> |
    |<span data-ttu-id="28ba2-232">Mot de passe</span><span class="sxs-lookup"><span data-stu-id="28ba2-232">Password</span></span> | <span data-ttu-id="28ba2-233">Mot de passe que vous avez créé lors de la définition des informations d’identification FTP pour l’application web</span><span class="sxs-lookup"><span data-stu-id="28ba2-233">Password you created when establishing FTP credentials for Web App</span></span>|
    |<span data-ttu-id="28ba2-234">Répertoire source</span><span class="sxs-lookup"><span data-stu-id="28ba2-234">Source Directory</span></span> | <span data-ttu-id="28ba2-235">$(System.DefaultWorkingDirectory)\**\\</span><span class="sxs-lookup"><span data-stu-id="28ba2-235">$(System.DefaultWorkingDirectory)\**\\</span></span> |
    |<span data-ttu-id="28ba2-236">Répertoire distant</span><span class="sxs-lookup"><span data-stu-id="28ba2-236">Remote Directory</span></span> | <span data-ttu-id="28ba2-237">/site/wwwroot/</span><span class="sxs-lookup"><span data-stu-id="28ba2-237">/site/wwwroot/</span></span>|
    |<span data-ttu-id="28ba2-238">Conserver les chemins de fichiers</span><span class="sxs-lookup"><span data-stu-id="28ba2-238">Preserve file paths</span></span> | <span data-ttu-id="28ba2-239">Activé (coché)</span><span class="sxs-lookup"><span data-stu-id="28ba2-239">Enabled (checked)</span></span>|

2.  <span data-ttu-id="28ba2-240">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-240">Click **Save**</span></span>

<span data-ttu-id="28ba2-241">Enfin, configurez hello version définition toouse hello pool d’agents contenant agent hello déployé à l’aide de hello comme suit :</span><span class="sxs-lookup"><span data-stu-id="28ba2-241">Finally, configure hello release definition toouse hello agent pool containing hello agent deployed using hello following steps:</span></span>
1.  <span data-ttu-id="28ba2-242">Sélectionnez la définition de la version hello et cliquez sur **modifier**</span><span class="sxs-lookup"><span data-stu-id="28ba2-242">Select hello release definition and click **Edit**</span></span>
2.  <span data-ttu-id="28ba2-243">Sélectionnez **s’exécutent sur l’agent** à partir de la colonne du milieu hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-243">Select **Run on agent** from hello middle column.</span></span> <span data-ttu-id="28ba2-244">Dans la colonne de droite hello, sélectionnez la file d’attente de l’agent hello contenant l’agent de build hello en cours d’exécution sur la pile de Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-244">In hello right column, select hello agent queue containing hello build agent running on Azure Stack.</span></span>  
    <span data-ttu-id="28ba2-245">![configuration d’affichant l’image de file d’attente spécifique version définition toouse](./media/azure-stack-solution-pipeline/image3.png)</span><span class="sxs-lookup"><span data-stu-id="28ba2-245">![image showing configuration of release definition toouse specific queue](./media/azure-stack-solution-pipeline/image3.png)</span></span>

## <a name="deploy-new-code"></a><span data-ttu-id="28ba2-246">Déployer un nouveau code</span><span class="sxs-lookup"><span data-stu-id="28ba2-246">Deploy new code</span></span>
<span data-ttu-id="28ba2-247">Vous pouvez désormais tester le pipeline de l’élément de configuration/CD hello hybride, avec tooAzure publication de l’étape finale de hello pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-247">You can now test hello hybrid CI/CD pipeline, with hello final step publishing tooAzure Stack.</span></span>  <span data-ttu-id="28ba2-248">Dans cette section, vous modifiez le pied de page du site hello et démarrez le déploiement via le pipeline de hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-248">In this section, you modify hello site's footer and start deployment through hello pipeline.</span></span>  <span data-ttu-id="28ba2-249">Une fois terminé, vous verrez les modifications déploiement tooAzure pour révision, puis une fois que vous approuvez la mise en production hello, ils sont publié tooAzure pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-249">Once complete, you will see your changes deployed tooAzure for review, then once you approve hello release, they are published tooAzure Stack.</span></span>

1. <span data-ttu-id="28ba2-250">Dans Visual Studio, ouvrez hello *site.master* de fichiers et de modifier cette ligne :</span><span class="sxs-lookup"><span data-stu-id="28ba2-250">In Visual Studio, open hello *site.master* file and change this line:</span></span>
    
    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application</p>
    `

    <span data-ttu-id="28ba2-251">toothis :</span><span class="sxs-lookup"><span data-stu-id="28ba2-251">toothis:</span></span>

    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application delivered by VSTS, Azure, and Azure Stack</p>
    `
3.  <span data-ttu-id="28ba2-252">La synchronisation tooVSTS et valider les modifications de hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-252">Commit hello changes and sync tooVSTS.</span></span>  
4.  <span data-ttu-id="28ba2-253">À partir de l’espace de travail hello VSTS, vérifier l’état de la build hello en sélectionnant **générer & version** > **générer**</span><span class="sxs-lookup"><span data-stu-id="28ba2-253">From hello VSTS workspace, check hello build status by selecting **Build & Release** > **Build**</span></span>
5.  <span data-ttu-id="28ba2-254">Vous voyez une build en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="28ba2-254">You will see a build in progress.</span></span>  <span data-ttu-id="28ba2-255">Double-cliquez sur l’état de hello, et vous pouvez surveiller la progression de la génération hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-255">Double-click hello status, and you can watch hello build progress.</span></span>  <span data-ttu-id="28ba2-256">Une fois que vous voyez « Build terminée » dans la console hello, déplacer sur la version de hello toocheck à partir de **générer & version** > **version**.</span><span class="sxs-lookup"><span data-stu-id="28ba2-256">Once you see "Finished build" in hello console, move on toocheck hello release from **Build & Release** > **Release**.</span></span>  <span data-ttu-id="28ba2-257">Double-cliquez sur mise en production hello.</span><span class="sxs-lookup"><span data-stu-id="28ba2-257">Double-click hello release.</span></span>
6.  <span data-ttu-id="28ba2-258">Vous recevrez une notification indiquant qu’une mise en production doit être examinée.</span><span class="sxs-lookup"><span data-stu-id="28ba2-258">You will receive notification that a release requires review.</span></span> <span data-ttu-id="28ba2-259">Vérifiez hello URL de l’application Web et les nouvelles modifications de hello sont présentes.</span><span class="sxs-lookup"><span data-stu-id="28ba2-259">Check hello Web App URL and verify hello new changes are present.</span></span>  <span data-ttu-id="28ba2-260">Approuver la mise en production hello dans VSTS.</span><span class="sxs-lookup"><span data-stu-id="28ba2-260">Approve hello release in VSTS.</span></span>
    <span data-ttu-id="28ba2-261">![configuration d’affichant l’image de file d’attente spécifique version définition toouse](./media/azure-stack-solution-pipeline/image4.png)</span><span class="sxs-lookup"><span data-stu-id="28ba2-261">![image showing configuration of release definition toouse specific queue](./media/azure-stack-solution-pipeline/image4.png)</span></span>
    
7.  <span data-ttu-id="28ba2-262">Vérifiez la publication tooAzure que pile est terminée en visitant le site Web de hello à l’aide des URL hello indiqué lors de la création de hello Web App.</span><span class="sxs-lookup"><span data-stu-id="28ba2-262">Verify publishing tooAzure Stack is complete by visiting hello website using hello URL noted when creating hello Web App.</span></span>
    <span data-ttu-id="28ba2-263">![image montrant l’application ASP.NET avec le pied de page modifié](./media/azure-stack-solution-pipeline/image5.png)</span><span class="sxs-lookup"><span data-stu-id="28ba2-263">![image showing ASP.NEt app with footer changed](./media/azure-stack-solution-pipeline/image5.png)</span></span>


<span data-ttu-id="28ba2-264">Vous pouvez maintenant utiliser votre nouveau pipeline CI/CD hybride comme bloc de construction pour d’autres modèles de cloud hybrides.</span><span class="sxs-lookup"><span data-stu-id="28ba2-264">You can now use your new hybrid CI/CD pipeline as a building block for other hybrid cloud patterns.</span></span>

## <a name="next-steps"></a><span data-ttu-id="28ba2-265">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="28ba2-265">Next steps</span></span>
<span data-ttu-id="28ba2-266">Dans ce didacticiel, vous avez appris comment toobuild un élément de configuration/CD hybride de pipeline qui :</span><span class="sxs-lookup"><span data-stu-id="28ba2-266">In this tutorial, you learned how toobuild a hybrid CI/CD pipeline that:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="28ba2-267">Initialise une nouvelle build basée sur un référentiel de code validations tooyour Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="28ba2-267">Initiates a new build based on code commits tooyour Visual Studio Team Services (VSTS) repository.</span></span>
> * <span data-ttu-id="28ba2-268">Déploie automatiquement votre tooAzure code nouvellement généré pour le test d’acceptation utilisateur.</span><span class="sxs-lookup"><span data-stu-id="28ba2-268">Automatically deploys your newly built code tooAzure for user acceptance testing.</span></span>
> * <span data-ttu-id="28ba2-269">Une fois que votre code a passé les tests, déploie automatiquement tooAzure pile.</span><span class="sxs-lookup"><span data-stu-id="28ba2-269">Once your code has passed testing, automatically deploys tooAzure Stack.</span></span> 

<span data-ttu-id="28ba2-270">Maintenant que vous avez un pipeline de l’élément de configuration/CD hybride, continuez en apprentissage comment toodevelop des applications pour la pile de Azure.</span><span class="sxs-lookup"><span data-stu-id="28ba2-270">Now that you have a hybrid CI/CD pipeline, continue by learning how toodevelop apps for Azure Stack.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="28ba2-271">Développer pour Azure Stack</span><span class="sxs-lookup"><span data-stu-id="28ba2-271">Develop for Azure Stack</span></span>](azure-stack-developer.md)


