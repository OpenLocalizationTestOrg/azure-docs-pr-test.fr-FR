---
title: "Surveillance d’un service cloud | Microsoft Docs"
description: "Découvrez comment surveiller des services cloud dans le portail Azure Classic."
services: cloud-services
documentationcenter: 
author: thraka
manager: timlt
editor: 
ms.assetid: 5c48d2fb-b8ea-420f-80df-7aebe2b66b1b
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/07/2015
ms.author: adegeo
ms.openlocfilehash: c369b22cf068a473343b006eb1b06fdd350d31db
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="how-to-monitor-cloud-services"></a><span data-ttu-id="b8780-103">Surveillance des services cloud</span><span class="sxs-lookup"><span data-stu-id="b8780-103">How to Monitor Cloud Services</span></span>
[!INCLUDE [disclaimer](../../includes/disclaimer.md)]

<span data-ttu-id="b8780-104">Vous pouvez surveiller les métriques de performance `key` de vos services cloud dans le portail Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="b8780-104">You can monitor `key` performance metrics for your cloud services in the Azure classic portal.</span></span> <span data-ttu-id="b8780-105">Vous pouvez régler un niveau de surveillance minimal ou détaillé pour chaque rôle de service, et vous pouvez personnaliser les affichages de la surveillance.</span><span class="sxs-lookup"><span data-stu-id="b8780-105">You can set the level of monitoring to minimal and verbose for each service role, and can customize the monitoring displays.</span></span> <span data-ttu-id="b8780-106">Les données de la surveillance détaillée sont stockées dans un compte de stockage, auquel vous pouvez accéder en dehors du portail.</span><span class="sxs-lookup"><span data-stu-id="b8780-106">Verbose monitoring data is stored in a storage account, which you can access outside the portal.</span></span> 

<span data-ttu-id="b8780-107">Les affichages de surveillance du portail Azure Classic sont configurables à loisir.</span><span class="sxs-lookup"><span data-stu-id="b8780-107">Monitoring displays in the Azure classic portal are highly configurable.</span></span> <span data-ttu-id="b8780-108">Vous pouvez choisir les mesures à surveiller dans la liste des mesures de la page **Surveiller**, et choisir les mesures à afficher dans les graphiques sur la page **Surveiller** et dans le tableau de bord.</span><span class="sxs-lookup"><span data-stu-id="b8780-108">You can choose the metrics you want to monitor in the metrics list on the **Monitor** page, and you can choose which metrics to plot in metrics charts on the **Monitor** page and the dashboard.</span></span> 

## <a name="concepts"></a><span data-ttu-id="b8780-109">Concepts</span><span class="sxs-lookup"><span data-stu-id="b8780-109">Concepts</span></span>
<span data-ttu-id="b8780-110">Par défaut, une surveillance minimale est fournie pour le nouveau service cloud à l'aide de compteurs de performances récupérés sur le système d'exploitation hôte pour les instances de rôle (machines virtuelles).</span><span class="sxs-lookup"><span data-stu-id="b8780-110">By default, minimal monitoring is provided for a new cloud service using performance counters gathered from the host operating system for the roles instances (virtual machines).</span></span> <span data-ttu-id="b8780-111">Les mesures minimales sont limitées au pourcentage processeur, aux données entrantes, aux données sortantes, au débit d'écriture sur le disque et au débit de lecture sur le disque.</span><span class="sxs-lookup"><span data-stu-id="b8780-111">The minimal metrics are limited to CPU Percentage, Data In, Data Out, Disk Read Throughput, and Disk Write Throughput.</span></span> <span data-ttu-id="b8780-112">En configurant la surveillance détaillée, vous obtenez des mesures supplémentaires basées sur les données de performances dans les machines virtuelles (instances de rôle).</span><span class="sxs-lookup"><span data-stu-id="b8780-112">By configuring verbose monitoring, you can receive additional metrics based on performance data within the virtual machines (role instances).</span></span> <span data-ttu-id="b8780-113">Les mesures détaillées offrent une analyse plus fine des problèmes qui surviennent au cours du fonctionnement de l'application.</span><span class="sxs-lookup"><span data-stu-id="b8780-113">The verbose metrics enable closer analysis of issues that occur during application operations.</span></span>

<span data-ttu-id="b8780-114">Par défaut, les données des compteurs de performances des instances de rôle sont échantillonnées et transférées à partir de l'instance de rôle toutes les 3 minutes.</span><span class="sxs-lookup"><span data-stu-id="b8780-114">By default performance counter data from role instances is sampled and transferred from the role instance at 3-minute intervals.</span></span> <span data-ttu-id="b8780-115">Lorsque vous activez la surveillance détaillée, les données brutes des compteurs de performances sont consolidées pour chaque instance de rôle et pour toutes les instances de rôle de chaque rôle toutes les 5 minutes, toutes les heures et toutes les 12 heures.</span><span class="sxs-lookup"><span data-stu-id="b8780-115">When you enable verbose monitoring, the raw performance counter data is aggregated for each role instance and across role instances for each role at intervals of 5 minutes, 1 hour, and 12 hours.</span></span> <span data-ttu-id="b8780-116">Les données consolidées sont purgées tous les 10 jours.</span><span class="sxs-lookup"><span data-stu-id="b8780-116">The aggregated data is purged after 10 days.</span></span>

<span data-ttu-id="b8780-117">Une fois la surveillance détaillée activée, les données de surveillance consolidées sont stockées dans des tables dans votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8780-117">After you enable verbose monitoring, the aggregated monitoring data is stored in tables in your storage account.</span></span> <span data-ttu-id="b8780-118">Avant d'activer la surveillance détaillée d'un rôle, vous devez configurer une chaîne de connexion de diagnostic qui assure la liaison avec le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8780-118">To enable verbose monitoring for a role, you must configure a diagnostics connection string that links to the storage account.</span></span> <span data-ttu-id="b8780-119">Vous pouvez utiliser différents comptes de stockage pour différents rôles.</span><span class="sxs-lookup"><span data-stu-id="b8780-119">You can use different storage accounts for different roles.</span></span>

<span data-ttu-id="b8780-120">L’activation de la surveillance détaillée augmente les coûts de stockage liés au stockage des données, au transfert des données et aux transactions de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8780-120">Enabling verbose monitoring increases your storage costs related to data storage, data transfer, and storage transactions.</span></span> <span data-ttu-id="b8780-121">La surveillance minimale ne nécessite pas de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8780-121">Minimal monitoring does not require a storage account.</span></span> <span data-ttu-id="b8780-122">Les données des mesures exposées au niveau minimal ne sont pas stockées dans votre compte de stockage, même si vous sélectionnez le niveau de surveillance détaillé.</span><span class="sxs-lookup"><span data-stu-id="b8780-122">The data for the metrics that are exposed at the minimal monitoring level are not stored in your storage account, even if you set the monitoring level to verbose.</span></span>

## <a name="how-to-configure-monitoring-for-cloud-services"></a><span data-ttu-id="b8780-123">Procédure de configuration de la surveillance des services cloud</span><span class="sxs-lookup"><span data-stu-id="b8780-123">How to: Configure monitoring for cloud services</span></span>
<span data-ttu-id="b8780-124">Les procédures suivantes permettent de configurer la surveillance minimale ou détaillée dans le portail Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="b8780-124">Use the following procedures to configure verbose or minimal monitoring in the Azure classic portal.</span></span> 

### <a name="before-you-begin"></a><span data-ttu-id="b8780-125">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="b8780-125">Before you begin</span></span>
* <span data-ttu-id="b8780-126">Créez un compte de stockage *classique* pour stocker les données de surveillance.</span><span class="sxs-lookup"><span data-stu-id="b8780-126">Create a *classic* storage account to store the monitoring data.</span></span> <span data-ttu-id="b8780-127">Vous pouvez utiliser différents comptes de stockage pour différents rôles.</span><span class="sxs-lookup"><span data-stu-id="b8780-127">You can use different storage accounts for different roles.</span></span> <span data-ttu-id="b8780-128">Pour plus d’informations, consultez [Création d’un compte de stockage](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span><span class="sxs-lookup"><span data-stu-id="b8780-128">For more information, see [How to create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span></span>
* <span data-ttu-id="b8780-129">Activez le diagnostic Azure pour vos rôles de service cloud.</span><span class="sxs-lookup"><span data-stu-id="b8780-129">Enable Azure Diagnostics for your cloud service roles.</span></span> <span data-ttu-id="b8780-130">Consultez [Configuration des diagnostics pour les services cloud](cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="b8780-130">See [Configuring Diagnostics for Cloud Services](cloud-services-dotnet-diagnostics.md).</span></span>

<span data-ttu-id="b8780-131">Assurez-vous que la chaîne de connexion de diagnostic est présente dans la configuration du rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-131">Ensure that the diagnostics connection string is present in the Role configuration.</span></span> <span data-ttu-id="b8780-132">Vous ne pouvez pas activer la surveillance détaillée avant d'activer Azure Diagnostics d’inclure une chaîne de connexion de diagnostic dans la configuration du rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-132">You cannot turn on verbose monitoring until you enable Azure Diagnostics and include a diagnostics connection string in the Role configuration.</span></span>   

> [!NOTE]
> <span data-ttu-id="b8780-133">Les projets ciblant le Kit de développement logiciel (SDK) Azure 2.5 n’incluent pas automatiquement la chaîne de connexion de diagnostic dans le modèle de projet.</span><span class="sxs-lookup"><span data-stu-id="b8780-133">Projects targeting Azure SDK 2.5 did not automatically include the diagnostics connection string in the project template.</span></span> <span data-ttu-id="b8780-134">Pour ces projets, vous devez ajouter manuellement la chaîne de connexion de diagnostic à la configuration du rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-134">For these projects, you need to manually add the diagnostics connection string to the Role configuration.</span></span>
> 
> 

<span data-ttu-id="b8780-135">**Pour ajouter manuellement la chaîne de connexion de diagnostic à la configuration de rôle**</span><span class="sxs-lookup"><span data-stu-id="b8780-135">**To manually add diagnostics connection string to Role configuration**</span></span>

1. <span data-ttu-id="b8780-136">Ouvrez le projet Cloud Service dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b8780-136">Open the Cloud Service project in Visual Studio</span></span>
2. <span data-ttu-id="b8780-137">Double-cliquez sur le **rôle** pour ouvrir le concepteur de rôle et sélectionnez l’onglet **Paramètres**</span><span class="sxs-lookup"><span data-stu-id="b8780-137">Double-click on the **Role** to open the Role designer and select the **Settings** tab</span></span>
3. <span data-ttu-id="b8780-138">Recherchez un paramètre appelé **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**.</span><span class="sxs-lookup"><span data-stu-id="b8780-138">Look for a setting named **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**.</span></span> 
4. <span data-ttu-id="b8780-139">Si ce paramètre n’est pas présent, cliquez sur le bouton **Ajouter un paramètre** pour l’ajouter à la configuration et modifier le type pour le nouveau paramètre sur **ConnectionString**</span><span class="sxs-lookup"><span data-stu-id="b8780-139">If this setting is not present, click on the **Add Setting** button to add it to the configuration and change the type for the new setting to **ConnectionString**</span></span>
5. <span data-ttu-id="b8780-140">Définissez la valeur de chaîne de connexion en cliquant sur le bouton **...** .</span><span class="sxs-lookup"><span data-stu-id="b8780-140">Set the value for connection string the by clicking on the **...** button.</span></span> <span data-ttu-id="b8780-141">Ceci ouvrira une boîte de dialogue qui vous permet de sélectionner un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8780-141">This will open up a dialog allowing you to select a storage account.</span></span>
   
    ![Paramètres Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioDiagnosticsConnectionString.png)

### <a name="to-change-the-monitoring-level-to-verbose-or-minimal"></a><span data-ttu-id="b8780-143">Pour modifier le niveau de surveillance détaillée ou minimale</span><span class="sxs-lookup"><span data-stu-id="b8780-143">To change the monitoring level to verbose or minimal</span></span>
1. <span data-ttu-id="b8780-144">Dans le [portail Azure Classic](https://manage.windowsazure.com/), ouvrez la page **Configurer** du déploiement du service cloud.</span><span class="sxs-lookup"><span data-stu-id="b8780-144">In the [Azure classic portal](https://manage.windowsazure.com/), open the **Configure** page for the cloud service deployment.</span></span>
2. <span data-ttu-id="b8780-145">Dans **Niveau**, cliquez sur **Détaillé** ou **Minimal**.</span><span class="sxs-lookup"><span data-stu-id="b8780-145">In **Level**, click **Verbose** or **Minimal**.</span></span> 
3. <span data-ttu-id="b8780-146">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="b8780-146">Click **Save**.</span></span>

<span data-ttu-id="b8780-147">Une fois la surveillance détaillée activée, vous devez commencer à voir les données de surveillance dans le portail Azure Classic dans l’heure qui suit.</span><span class="sxs-lookup"><span data-stu-id="b8780-147">After you turn on verbose monitoring, you should start seeing the monitoring data in the Azure classic portal within the hour.</span></span>

<span data-ttu-id="b8780-148">Les données des compteurs de performances brutes et les données de surveillance consolidées sont stockées dans le compte de stockage dans les tables définies par l'ID de déploiement pour les rôles.</span><span class="sxs-lookup"><span data-stu-id="b8780-148">The raw performance counter data and aggregated monitoring data are stored in the storage account in tables qualified by the deployment ID for the roles.</span></span> 

## <a name="how-to-receive-alerts-for-cloud-service-metrics"></a><span data-ttu-id="b8780-149">Procédure de réception d’alertes pour les mesures des services cloud</span><span class="sxs-lookup"><span data-stu-id="b8780-149">How to: Receive alerts for cloud service metrics</span></span>
<span data-ttu-id="b8780-150">Vous pouvez recevoir des alertes en fonction des mesures de surveillance de votre service cloud.</span><span class="sxs-lookup"><span data-stu-id="b8780-150">You can receive alerts based on your cloud service monitoring metrics.</span></span> <span data-ttu-id="b8780-151">Dans la page **Services de gestion** du portail Azure Classic, vous pouvez créer une règle pour déclencher une alerte lorsque la mesure de votre choix atteint une valeur définie.</span><span class="sxs-lookup"><span data-stu-id="b8780-151">On the **Management Services** page of the Azure classic portal, you can create a rule to trigger an alert when the metric you choose reaches a value that you specify.</span></span> <span data-ttu-id="b8780-152">Vous pouvez également paramétrer l'envoi d'un courrier électronique lorsque l'alerte est déclenchée.</span><span class="sxs-lookup"><span data-stu-id="b8780-152">You can also choose to have email sent when the alert is triggered.</span></span> <span data-ttu-id="b8780-153">Pour plus d’informations, consultez la page [Réception de notifications d’alerte et gestion des règles d’alerte dans Azure](http://go.microsoft.com/fwlink/?LinkId=309356).</span><span class="sxs-lookup"><span data-stu-id="b8780-153">For more information, see [How to: Receive Alert Notifications and Manage Alert Rules in Azure](http://go.microsoft.com/fwlink/?LinkId=309356).</span></span>

## <a name="how-to-add-metrics-to-the-metrics-table"></a><span data-ttu-id="b8780-154">Ajout de mesures au tableau des mesures</span><span class="sxs-lookup"><span data-stu-id="b8780-154">How to: Add metrics to the metrics table</span></span>
1. <span data-ttu-id="b8780-155">Dans le [portail Azure Classic](http://manage.windowsazure.com/), ouvrez la page **Surveiller** du service cloud.</span><span class="sxs-lookup"><span data-stu-id="b8780-155">In the [Azure classic portal](http://manage.windowsazure.com/), open the **Monitor** page for the cloud service.</span></span>
   
    <span data-ttu-id="b8780-156">Par défaut, la table des mesures affiche un sous-ensemble des mesures disponibles.</span><span class="sxs-lookup"><span data-stu-id="b8780-156">By default, the metrics table displays a subset of the available metrics.</span></span> <span data-ttu-id="b8780-157">Cette illustration présente les mesures détaillées par défaut d'un service cloud, qui sont limitées au compteur de performances Memory\Available MBytes, avec les données consolidées au niveau du rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-157">The illustration shows the default verbose metrics for a cloud service, which is limited to the Memory\Available MBytes performance counter, with data aggregated at the role level.</span></span> <span data-ttu-id="b8780-158">Utilisez **Ajouter des métriques** pour sélectionner les données consolidées et les données au niveau du rôle à surveiller dans le portail Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="b8780-158">Use **Add Metrics** to select additional aggregate and role-level metrics to monitor in the Azure classic portal.</span></span>
   
    ![Affichage détaillé](./media/cloud-services-how-to-monitor/CloudServices_DefaultVerboseDisplay.png)
2. <span data-ttu-id="b8780-160">Pour ajouter des mesures à la table des mesures :</span><span class="sxs-lookup"><span data-stu-id="b8780-160">To add metrics to the metrics table:</span></span>
   
   1. <span data-ttu-id="b8780-161">Cliquez sur **Ajouter des métriques** pour ouvrir **Choisir des métriques**, comme illustré ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b8780-161">Click **Add Metrics** to open **Choose Metrics**, shown below.</span></span>
      
       <span data-ttu-id="b8780-162">La première mesure disponible est développée, afin de présenter les options disponibles.</span><span class="sxs-lookup"><span data-stu-id="b8780-162">The first available metric is expanded to show options that are available.</span></span> <span data-ttu-id="b8780-163">Pour chaque mesure, l'option du haut affiche les données de surveillance consolidées pour tous les rôles.</span><span class="sxs-lookup"><span data-stu-id="b8780-163">For each metric, the top option displays aggregated monitoring data for all roles.</span></span> <span data-ttu-id="b8780-164">De plus, vous pouvez choisir des rôles supplémentaires pour lesquels afficher des données.</span><span class="sxs-lookup"><span data-stu-id="b8780-164">In addition, you can choose individual roles to display data for.</span></span>
      
       ![Ajouter des métriques](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics.png)
   2. <span data-ttu-id="b8780-166">Pour sélectionner les métriques à afficher</span><span class="sxs-lookup"><span data-stu-id="b8780-166">To select metrics to display</span></span>
      
      * <span data-ttu-id="b8780-167">Cliquez sur la flèche vers le bas à côté de la mesure pour développer les options de surveillance.</span><span class="sxs-lookup"><span data-stu-id="b8780-167">Click the down arrow by the metric to expand the monitoring options.</span></span>
      * <span data-ttu-id="b8780-168">Activez la case à cocher de chaque option de surveillance à afficher.</span><span class="sxs-lookup"><span data-stu-id="b8780-168">Select the check box for each monitoring option you want to display.</span></span>
        
        <span data-ttu-id="b8780-169">Vous pouvez afficher jusqu'à 50 mesures dans la table des mesures.</span><span class="sxs-lookup"><span data-stu-id="b8780-169">You can display up to 50 metrics in the metrics table.</span></span>
        
        > [!TIP]
        > <span data-ttu-id="b8780-170">Dans le cas de la surveillance détaillée, la liste des mesures peut contenir des dizaines de mesures.</span><span class="sxs-lookup"><span data-stu-id="b8780-170">In verbose monitoring, the metrics list can contain dozens of metrics.</span></span> <span data-ttu-id="b8780-171">Pour afficher une barre de défilement, passez la souris sur la partie droite de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="b8780-171">To display a scrollbar, hover over the right side of the dialog box.</span></span> <span data-ttu-id="b8780-172">Pour filtrer la liste, cliquez sur l'icône de recherche, puis entrez du texte dans la zone de recherche comme illustré ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b8780-172">To filter the list, click the search icon, and enter text in the search box, as shown below.</span></span>
        > 
        > 
        
        ![Add metrics search](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics_Search.png)
3. <span data-ttu-id="b8780-174">Une fois que vous avez terminé de sélectionner les mesures, cliquez sur OK (coche).</span><span class="sxs-lookup"><span data-stu-id="b8780-174">After you finish selecting metrics, click OK (checkmark).</span></span>
   
    <span data-ttu-id="b8780-175">Les mesures sélectionnées sont ajoutées à la table des mesures, comme illustré ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b8780-175">The selected metrics are added to the metrics table, as shown below.</span></span>
   
    ![mesures de surveillance](./media/cloud-services-how-to-monitor/CloudServices_Monitor_UpdatedMetrics.png)
4. <span data-ttu-id="b8780-177">Pour supprimer une mesure de la table, cliquez sur la mesure pour la sélectionner, puis sur **Delete Metric**.</span><span class="sxs-lookup"><span data-stu-id="b8780-177">To delete a metric from the metrics table, click the metric to select it, and then click **Delete Metric**.</span></span> <span data-ttu-id="b8780-178">( **Delete Metric** ne s'affiche que si une mesure est sélectionnée.)</span><span class="sxs-lookup"><span data-stu-id="b8780-178">(You only see **Delete Metric** when you have a metric selected.)</span></span>

### <a name="to-add-custom-metrics-to-the-metrics-table"></a><span data-ttu-id="b8780-179">Pour ajouter des mesures personnalisées au tableau des mesures</span><span class="sxs-lookup"><span data-stu-id="b8780-179">To add custom metrics to the metrics table</span></span>
<span data-ttu-id="b8780-180">Le niveau de surveillance **détaillée** fournit une liste des mesures par défaut que vous pouvez surveiller sur le portail.</span><span class="sxs-lookup"><span data-stu-id="b8780-180">The **Verbose** monitoring level provides a list of default metrics that you can monitor on the portal.</span></span> <span data-ttu-id="b8780-181">De plus, vous pouvez surveiller toute mesure personnalisée ou tout compteur de performance définis par votre application via le portail.</span><span class="sxs-lookup"><span data-stu-id="b8780-181">In addition to these you can monitor any custom metrics or performance counters defined by your application through the portal.</span></span>

<span data-ttu-id="b8780-182">Les étapes suivantes supposent que vous avez activé le niveau de surveillance **détaillée** et que vous avez configuré votre application pour collecter et transférer des compteurs de performance personnalisés.</span><span class="sxs-lookup"><span data-stu-id="b8780-182">The following steps assume that you have turned on **Verbose** monitoring level and have configured your application to collect and transfer custom performance counters.</span></span> 

<span data-ttu-id="b8780-183">Pour afficher les compteurs de performance personnalisés dans le portail, vous devez mettre à jour la configuration dans wad-control-container :</span><span class="sxs-lookup"><span data-stu-id="b8780-183">To display the custom performance counters in the portal you need to update the configuration in wad-control-container:</span></span>

1. <span data-ttu-id="b8780-184">Ouvrez l'objet blob wad-control-container dans votre compte de stockage de diagnostics.</span><span class="sxs-lookup"><span data-stu-id="b8780-184">Open the wad-control-container blob in your diagnostics storage account.</span></span> <span data-ttu-id="b8780-185">Pour cela, vous pouvez utiliser Visual Studio ou tout autre explorateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8780-185">You can use Visual Studio or any other storage explorer to do this.</span></span>
   
    ![Explorateur de serveurs Visual Studio.](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioBlobExplorer.png)
2. <span data-ttu-id="b8780-187">Accédez au chemin d'accès de l'objet blob à l'aide du modèle **DeploymentId/RoleName/RoleInstance** pour trouver la configuration de votre instance de rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-187">Navigate the blob path using the pattern **DeploymentId/RoleName/RoleInstance** to find the configuration for your role instance.</span></span> 
   
    ![Explorateur de stockage Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioStorage.png)
3. <span data-ttu-id="b8780-189">Téléchargez le fichier de configuration pour votre instance de rôle et mettez-le à jour pour inclure des compteurs de performance personnalisés.</span><span class="sxs-lookup"><span data-stu-id="b8780-189">Download the configuration file for your role instance and update it to include any custom performance counters.</span></span> <span data-ttu-id="b8780-190">Par exemple, pour surveiller le *nombre d’octets d’écriture de disque/s* pour le *lecteur C*, ajoutez ce qui suit sous le nœud **PerformanceCounters\Subscriptions**.</span><span class="sxs-lookup"><span data-stu-id="b8780-190">For example to monitor *Disk Write Bytes/sec* for the *C drive* add the following under **PerformanceCounters\Subscriptions** node</span></span>
   
    ```xml
    <PerformanceCounterConfiguration>
    <CounterSpecifier>\LogicalDisk(C:)\Disk Write Bytes/sec</CounterSpecifier>
    <SampleRateInSeconds>180</SampleRateInSeconds>
    </PerformanceCounterConfiguration>
    ```
4. <span data-ttu-id="b8780-191">Enregistrez les modifications et téléchargez le fichier de configuration au même emplacement en remplaçant le fichier existant dans l'objet blob.</span><span class="sxs-lookup"><span data-stu-id="b8780-191">Save the changes and upload the configuration file back to the same location overwriting the existing file in the blob.</span></span>
5. <span data-ttu-id="b8780-192">Passez au mode détaillé dans la configuration du portail Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="b8780-192">Toggle to Verbose mode in the Azure classic portal configuration.</span></span> <span data-ttu-id="b8780-193">Si vous étiez déjà en mode détaillé, vous devez passer au niveau minimum puis de nouveau en mode détaillé.</span><span class="sxs-lookup"><span data-stu-id="b8780-193">If you were in Verbose mode already you will have to toggle to minimal and back to verbose.</span></span>
6. <span data-ttu-id="b8780-194">Le compteur de performance personnalisé sera alors disponible dans la boîte de dialogue **Ajouter des mesures** .</span><span class="sxs-lookup"><span data-stu-id="b8780-194">The custom performance counter will now be available in the **Add Metrics** dialog box.</span></span> 

## <a name="how-to-customize-the-metrics-chart"></a><span data-ttu-id="b8780-195">Procédure de personnalisation des graphiques de mesures</span><span class="sxs-lookup"><span data-stu-id="b8780-195">How to: Customize the metrics chart</span></span>
1. <span data-ttu-id="b8780-196">Dans la table des mesures, sélectionnez jusqu'à 6 mesures à afficher dans le graphique.</span><span class="sxs-lookup"><span data-stu-id="b8780-196">In the metrics table, select up to 6 metrics to plot on the metrics chart.</span></span> <span data-ttu-id="b8780-197">Pour sélectionner une mesure, cliquez sur la case à cocher à sa gauche.</span><span class="sxs-lookup"><span data-stu-id="b8780-197">To select a metric, click the check box on its left side.</span></span> <span data-ttu-id="b8780-198">Pour supprimer une mesure du graphique, désactivez sa case à cocher dans la table des mesures.</span><span class="sxs-lookup"><span data-stu-id="b8780-198">To remove a metric from the metrics chart, clear its check box in the metrics table.</span></span>
   
    <span data-ttu-id="b8780-199">Au fur et à mesure que vous sélectionnez des mesures dans la table des mesures, elles sont ajoutées au graphique.</span><span class="sxs-lookup"><span data-stu-id="b8780-199">As you select metrics in the metrics table, the metrics are added to the metrics chart.</span></span> <span data-ttu-id="b8780-200">Sur un écran étroit, une liste déroulante **n more** contient les en-têtes des mesures qui ne peuvent pas être affichées à l'écran.</span><span class="sxs-lookup"><span data-stu-id="b8780-200">On a narrow display, an **n more** drop-down list contains metric headers that won't fit the display.</span></span>
2. <span data-ttu-id="b8780-201">Pour passer de l'affichage des valeurs relatives (valeur finale uniquement pour chaque mesure) à l'affichage des valeurs absolues (Axe Y affiché), sélectionnez Relative ou Absolute en haut du graphique.</span><span class="sxs-lookup"><span data-stu-id="b8780-201">To switch between displaying relative values (final value only for each metric) and absolute values (Y axis displayed), select Relative or Absolute at the top of the chart.</span></span>
   
    ![Relative ou Absolute](./media/cloud-services-how-to-monitor/CloudServices_Monitor_RelativeAbsolute.png)
3. <span data-ttu-id="b8780-203">Pour modifier la plage horaire des mesures affichées dans le graphique, sélectionnez 1 heure, 24 heures ou 7 jours en haut du graphique.</span><span class="sxs-lookup"><span data-stu-id="b8780-203">To change the time range the metrics chart displays, select 1 hour, 24 hours, or 7 days at the top of the chart.</span></span>
   
    ![Période d'affichage de la surveillance](./media/cloud-services-how-to-monitor/CloudServices_Monitor_DisplayPeriod.png)
   
    <span data-ttu-id="b8780-205">Dans le graphique des mesures du tableau de bord, la méthode de traçage des mesures est différente.</span><span class="sxs-lookup"><span data-stu-id="b8780-205">On the dashboard metrics chart, the method for plotting metrics is different.</span></span> <span data-ttu-id="b8780-206">Un jeu standard de mesures est disponible et des mesures peuvent y être ajoutées ou en être supprimées en sélectionnant l'en-tête des mesures.</span><span class="sxs-lookup"><span data-stu-id="b8780-206">A standard set of metrics is available, and metrics are added or removed by selecting the metric header.</span></span>

### <a name="to-customize-the-metrics-chart-on-the-dashboard"></a><span data-ttu-id="b8780-207">Pour personnaliser les graphiques de mesure dans le tableau de bord</span><span class="sxs-lookup"><span data-stu-id="b8780-207">To customize the metrics chart on the dashboard</span></span>
1. <span data-ttu-id="b8780-208">Ouvrez le tableau de bord du service cloud.</span><span class="sxs-lookup"><span data-stu-id="b8780-208">Open the dashboard for the cloud service.</span></span>
2. <span data-ttu-id="b8780-209">Ajoutez ou supprimez des mesures du graphique :</span><span class="sxs-lookup"><span data-stu-id="b8780-209">Add or remove metrics from the chart:</span></span>
   
   * <span data-ttu-id="b8780-210">Pour tracer une mesure, activez la case à cocher correspondante dans les en-têtes du graphique.</span><span class="sxs-lookup"><span data-stu-id="b8780-210">To plot a new metric, select the check box for the metric in the chart headers.</span></span> <span data-ttu-id="b8780-211">Sur un écran étroit, cliquez sur la flèche vers le bas à côté de ***n*??metrics** pour créer le graphique d’une métrique que la zone d’en-tête du graphique ne peut pas afficher.</span><span class="sxs-lookup"><span data-stu-id="b8780-211">On a narrow display, click the down arrow by ***n*??metrics** to plot a metric the chart header area can't display.</span></span>
   * <span data-ttu-id="b8780-212">Pour supprimer une mesure du graphique, désactivez la case à cocher à côté de son en-tête.</span><span class="sxs-lookup"><span data-stu-id="b8780-212">To delete a metric that is plotted on the chart, clear the check box by its header.</span></span>
   
3. <span data-ttu-id="b8780-213">Basculez entre les affichages **Relative** et **Absolute**.</span><span class="sxs-lookup"><span data-stu-id="b8780-213">Switch between **Relative** and **Absolute** displays.</span></span>
4. <span data-ttu-id="b8780-214">Choisissez 1 heure, 24 heures ou 7 jours de données à afficher.</span><span class="sxs-lookup"><span data-stu-id="b8780-214">Choose 1 hour, 24 hours, or 7 days of data to display.</span></span>

## <a name="how-to-access-verbose-monitoring-data-outside-the-azure-classic-portal"></a><span data-ttu-id="b8780-215">Accès aux données de la surveillance détaillée en dehors du portail Azure Classic</span><span class="sxs-lookup"><span data-stu-id="b8780-215">How to: Access verbose monitoring data outside the Azure classic portal</span></span>
<span data-ttu-id="b8780-216">Les données de la surveillance détaillée sont stockées dans des tables dans les comptes de stockage que vous avez spécifiés pour chaque rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-216">Verbose monitoring data is stored in tables in the storage accounts that you specify for each role.</span></span> <span data-ttu-id="b8780-217">Pour chaque déploiement de service cloud, six tables sont créées pour le rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-217">For each cloud service deployment, six tables are created for the role.</span></span> <span data-ttu-id="b8780-218">Deux tables sont créées toutes les (5 minutes, 1 heure et 12 heures).</span><span class="sxs-lookup"><span data-stu-id="b8780-218">Two tables are created for each (5 minutes, 1 hour, and 12 hours).</span></span> <span data-ttu-id="b8780-219">Une de ces tables stocke les consolidations au niveau du rôle, et l'autre table stocke les consolidations pour les instances de rôle.</span><span class="sxs-lookup"><span data-stu-id="b8780-219">One of these tables stores role-level aggregations; the other table stores aggregations for role instances.</span></span> 

<span data-ttu-id="b8780-220">Les noms de table suivent ce format :</span><span class="sxs-lookup"><span data-stu-id="b8780-220">The table names have the following format:</span></span>

```
WAD*deploymentID*PT*aggregation_interval*[R|RI]Table
```

<span data-ttu-id="b8780-221">où :</span><span class="sxs-lookup"><span data-stu-id="b8780-221">where:</span></span>

* <span data-ttu-id="b8780-222">*deploymentID* est le GUID attribué au déploiement du service cloud</span><span class="sxs-lookup"><span data-stu-id="b8780-222">*deploymentID* is the GUID assigned to the cloud service deployment</span></span>
* <span data-ttu-id="b8780-223">*aggregation_interval* = 5 m, 1 h ou 12 h</span><span class="sxs-lookup"><span data-stu-id="b8780-223">*aggregation_interval* = 5M, 1H, or 12H</span></span>
* <span data-ttu-id="b8780-224">consolidations au niveau du rôle = R</span><span class="sxs-lookup"><span data-stu-id="b8780-224">role-level aggregations = R</span></span>
* <span data-ttu-id="b8780-225">consolidations pour les instances de rôle = RI</span><span class="sxs-lookup"><span data-stu-id="b8780-225">aggregations for role instances = RI</span></span>

<span data-ttu-id="b8780-226">Par exemple, les tables suivantes stockent les données de la surveillance détaillée consolidées toutes les heures :</span><span class="sxs-lookup"><span data-stu-id="b8780-226">For example, the following tables would store verbose monitoring data aggregated at 1-hour intervals:</span></span>

```
WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRTable (hourly aggregations for the role)

WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRITable (hourly aggregations for role instances)
```
