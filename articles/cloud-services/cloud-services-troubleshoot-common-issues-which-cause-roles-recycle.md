---
title: "aaaCommon provoque des rôles de Service Cloud recyclage | Documents Microsoft"
description: "Le recyclage soudain d’un rôle de service cloud peut entraîner d’importants temps d’arrêt. Voici quelques problèmes courants qui provoquent toobe rôles recyclé, ce qui peut aider à réduire le temps mort."
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: 8fa152b33d2b22a8a02f834d4bc38519b4272f7b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="common-issues-that-cause-roles-toorecycle"></a><span data-ttu-id="a3413-104">Problèmes courants pouvant provoquer des rôles toorecycle</span><span class="sxs-lookup"><span data-stu-id="a3413-104">Common issues that cause roles toorecycle</span></span>
<span data-ttu-id="a3413-105">Cet article présente certaines des causes courantes de hello des problèmes de déploiement et fournit la résolution des problèmes de conseils toohelp vous résolvez ces problèmes.</span><span class="sxs-lookup"><span data-stu-id="a3413-105">This article discusses some of hello common causes of deployment problems and provides troubleshooting tips toohelp you resolve these problems.</span></span> <span data-ttu-id="a3413-106">Indique qu’un problème existe avec une application est lorsque l’instance de rôle hello échoue toostart, ou lorsqu’elle bascule entre les États initialisation, occupé et arrêt hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-106">An indication that a problem exists with an application is when hello role instance fails toostart, or it cycles between hello initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="a3413-107">Dépendances d'exécution manquantes</span><span class="sxs-lookup"><span data-stu-id="a3413-107">Missing runtime dependencies</span></span>
<span data-ttu-id="a3413-108">Si un rôle dans votre application s’appuie sur un assembly qui ne fait pas partie de hello bibliothèque managée de .NET Framework ou hello Azure, vous devez inclure explicitement cet assembly dans le package d’application hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-108">If a role in your application relies on any assembly that is not part of hello .NET Framework or hello Azure managed library, you must explicitly include that assembly in hello application package.</span></span> <span data-ttu-id="a3413-109">N'oubliez pas que les autres infrastructures Microsoft ne sont pas disponibles par défaut dans Azure.</span><span class="sxs-lookup"><span data-stu-id="a3413-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="a3413-110">Si votre rôle repose sur une telle infrastructure, vous devez ajouter le package d’application ces assemblys toohello.</span><span class="sxs-lookup"><span data-stu-id="a3413-110">If your role relies on such a framework, you must add those assemblies toohello application package.</span></span>

<span data-ttu-id="a3413-111">Avant de générer et empaqueter votre application, vérifiez les suivant hello :</span><span class="sxs-lookup"><span data-stu-id="a3413-111">Before you build and package your application, verify hello following:</span></span>

* <span data-ttu-id="a3413-112">Si vous utilisez Visual studio, assurez-vous que hello **copie locale** propriété a la valeur trop**True** pour chaque assembly dans votre projet qui ne fait pas partie de hello Azure SDK référencé ou hello .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a3413-112">If using Visual studio, make sure hello **Copy Local** property is set too**True** for each referenced assembly in your project that is not part of hello Azure SDK or hello .NET Framework.</span></span>
* <span data-ttu-id="a3413-113">Assurez-vous que le fichier web.config de hello ne fait pas référence à tous les assemblys inutilisés dans l’élément de compilation hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-113">Make sure hello web.config file does not reference any unused assemblies in hello compilation element.</span></span>
* <span data-ttu-id="a3413-114">Hello **Action de génération** de chaque .cshtml fichier est défini trop**contenu**.</span><span class="sxs-lookup"><span data-stu-id="a3413-114">hello **Build Action** of every .cshtml file is set too**Content**.</span></span> <span data-ttu-id="a3413-115">Cela garantit que les fichiers hello s’affichent correctement dans le package de hello et permet des autres tooappear fichiers référencés dans le package de hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-115">This ensures that hello files will appear correctly in hello package and enables other referenced files tooappear in hello package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="a3413-116">L’assembly cible la mauvaise plateforme</span><span class="sxs-lookup"><span data-stu-id="a3413-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="a3413-117">Azure est un environnement 64 bits.</span><span class="sxs-lookup"><span data-stu-id="a3413-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="a3413-118">Par conséquent, les assemblys .NET compilés pour une cible 32 bits ne fonctionneront pas sur Azure.</span><span class="sxs-lookup"><span data-stu-id="a3413-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="a3413-119">Le rôle génère des exceptions non gérées lors de l'initialisation ou de l'arrêt</span><span class="sxs-lookup"><span data-stu-id="a3413-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="a3413-120">Toutes les exceptions levées par des méthodes hello Hello [RoleEntryPoint] (classe), qui inclut hello [OnStart], [OnStop], et [exécuter]méthodes, sont des exceptions non gérées.</span><span class="sxs-lookup"><span data-stu-id="a3413-120">Any exceptions that are thrown by hello methods of hello [RoleEntryPoint] class, which includes hello [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="a3413-121">Si une exception non gérée se produit dans un de ces méthodes, le rôle de hello sera recyclé.</span><span class="sxs-lookup"><span data-stu-id="a3413-121">If an unhandled exception occurs in one of these methods, hello role will recycle.</span></span> <span data-ttu-id="a3413-122">Si le rôle de hello est recyclé de façon répétée, il peut lever une exception non gérée chaque fois qu’il tentera de toostart.</span><span class="sxs-lookup"><span data-stu-id="a3413-122">If hello role is recycling repeatedly, it may be throwing an unhandled exception each time it tries toostart.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="a3413-123">Le rôle est renvoyé à partir de la méthode Run</span><span class="sxs-lookup"><span data-stu-id="a3413-123">Role returns from Run method</span></span>
<span data-ttu-id="a3413-124">Hello [exécuter] méthode est prévue toorun indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="a3413-124">hello [Run] method is intended toorun indefinitely.</span></span> <span data-ttu-id="a3413-125">Si votre code remplace hello [exécuter] (méthode), il doit être en veille indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="a3413-125">If your code overrides hello [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="a3413-126">Si hello [exécuter] méthode est retournée, hello rôle est recyclé.</span><span class="sxs-lookup"><span data-stu-id="a3413-126">If hello [Run] method returns, hello role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="a3413-127">Chaîne DiagnosticsConnectionString incorrecte</span><span class="sxs-lookup"><span data-stu-id="a3413-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="a3413-128">Si l’application utilise des Diagnostics Windows Azure, votre fichier de configuration de service doit spécifier hello `DiagnosticsConnectionString` paramètre de configuration.</span><span class="sxs-lookup"><span data-stu-id="a3413-128">If application uses Azure Diagnostics, your service configuration file must specify hello `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="a3413-129">Ce paramètre doit spécifier un compte de stockage tooyour connexion HTTPS dans Azure.</span><span class="sxs-lookup"><span data-stu-id="a3413-129">This setting should specify an HTTPS connection tooyour storage account in Azure.</span></span>

<span data-ttu-id="a3413-130">tooensure que votre `DiagnosticsConnectionString` paramètre est correct avant de déployer votre tooAzure de package d’application, vérifiez hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="a3413-130">tooensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package tooAzure, verify hello following:</span></span>  

* <span data-ttu-id="a3413-131">Hello `DiagnosticsConnectionString` définissant des points de compte de stockage valide tooa dans Azure.</span><span class="sxs-lookup"><span data-stu-id="a3413-131">hello `DiagnosticsConnectionString` setting points tooa valid storage account in Azure.</span></span>  
  <span data-ttu-id="a3413-132">Par défaut, ce paramètre pointe compte de stockage toohello émulée, donc vous devez modifier explicitement ce paramètre avant de déployer votre package d’application.</span><span class="sxs-lookup"><span data-stu-id="a3413-132">By default, this setting points toohello emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="a3413-133">Si vous ne modifiez pas ce paramètre, une exception est levée lorsque l’instance de rôle hello tente de moniteur de diagnostic toostart hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-133">If you do not change this setting, an exception is thrown when hello role instance attempts toostart hello diagnostic monitor.</span></span> <span data-ttu-id="a3413-134">Cela peut entraîner hello rôle instance toorecycle indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="a3413-134">This may cause hello role instance toorecycle indefinitely.</span></span>
* <span data-ttu-id="a3413-135">chaîne de connexion Hello est spécifiée dans les suivant hello [format](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="a3413-135">hello connection string is specified in hello following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="a3413-136">(le protocole de hello doit être spécifié en tant que HTTPS). Remplacez *MyAccountName* avec nom hello de votre compte de stockage et *MyAccountKey* avec votre clé d’accès :</span><span class="sxs-lookup"><span data-stu-id="a3413-136">(hello protocol must be specified as HTTPS.) Replace *MyAccountName* with hello name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="a3413-137">Si vous développez votre application à l’aide de Windows Azure Tools pour Microsoft Visual Studio, vous pouvez utiliser cette valeur tooset de pages de propriété hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use hello property pages tooset this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="a3413-138">Le certificat exporté ne contient aucune clé privée</span><span class="sxs-lookup"><span data-stu-id="a3413-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="a3413-139">toorun un rôle web sous SSL, vous devez vous assurer que votre certificat de gestion exporté inclut la clé privée de hello.</span><span class="sxs-lookup"><span data-stu-id="a3413-139">toorun a web role under SSL, you must ensure that your exported management certificate includes hello private key.</span></span> <span data-ttu-id="a3413-140">Si vous utilisez hello *Gestionnaire de certificats Windows* tooexport certificat de hello, être vraiment tooselect **Oui** pour hello **clé privée de hello exportation** option.</span><span class="sxs-lookup"><span data-stu-id="a3413-140">If you use hello *Windows Certificate Manager* tooexport hello certificate, be sure tooselect **Yes** for hello **Export hello private key** option.</span></span> <span data-ttu-id="a3413-141">certificat de Hello doit être exporté au format PFX hello, qui est hello seul format pris en charge actuellement.</span><span class="sxs-lookup"><span data-stu-id="a3413-141">hello certificate must be exported in hello PFX format, which is hello only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a3413-142">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a3413-142">Next steps</span></span>
<span data-ttu-id="a3413-143">Affichez plus d’ [articles de résolution des problèmes](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) liés aux services cloud.</span><span class="sxs-lookup"><span data-stu-id="a3413-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="a3413-144">Affichez d’autres scénarios de recyclage des rôles dans la [série du blog de Kevin Williamson](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="a3413-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[exécuter]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx
