---
title: "disponibilité aaaHigh avec la passerelle de gestion des données dans Azure Data Factory | Documents Microsoft"
description: "Cet article explique comment augmenter le nombre d’instances (scale out) d’une passerelle de gestion des données en ajoutant des nœuds et comment augmenter la taille des instances (scale up) en augmentant le nombre de travaux simultanés pouvant s’exécuter sur un nœud."
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: 
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: abnarain
ms.openlocfilehash: 925f63728e23596bca2655636f6535b509fce0b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="9c20f-103">Passerelle de gestion des données - Haute disponibilité et scalabilité (préversion)</span><span class="sxs-lookup"><span data-stu-id="9c20f-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
<span data-ttu-id="9c20f-104">Cet article vous aide à configurer la solution Haute disponibilité et scalabilité avec la passerelle de gestion des données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-104">This article helps you configure high availability and scalability solution with Data Management Gateway.</span></span>    

> [!NOTE]
> <span data-ttu-id="9c20f-105">Cet article part du principe que vous connaissez déjà les bases de la passerelle de gestion des données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-105">This article assumes that you are already familiar with basics of Data Management Gateway.</span></span> <span data-ttu-id="9c20f-106">Si ce n’est pas le cas, consultez [Passerelle de gestion des données](data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="9c20f-106">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="9c20f-107">**Cette fonctionnalité en version préliminaire est officiellement prise en charge sur les versions 2.12.xxxx.x et ultérieures de la passerelle de gestion des données**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-107">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="9c20f-108">Assurez-vous que vous utilisez la version 2.12.xxxx.x ou une version supérieure.</span><span class="sxs-lookup"><span data-stu-id="9c20f-108">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="9c20f-109">Télécharger la version la plus récente de la passerelle de gestion des données hello [ici](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="9c20f-109">Download hello latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="9c20f-110">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="9c20f-110">Overview</span></span>
<span data-ttu-id="9c20f-111">Vous pouvez associer des passerelles de gestion de données qui sont installés sur plusieurs ordinateurs locaux avec une seule passerelle logique à partir du portail de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-111">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from hello portal.</span></span> <span data-ttu-id="9c20f-112">Ces ordinateurs sont appelés **nœuds**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-112">These machines are called **nodes**.</span></span> <span data-ttu-id="9c20f-113">Vous pouvez utiliser jusqu'à trop**quatre nœuds** associé à une passerelle logique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-113">You can have up too**four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="9c20f-114">avantages de Hello d’avoir plusieurs nœuds (machines locales avec la passerelle installée) pour une passerelle logique sont :</span><span class="sxs-lookup"><span data-stu-id="9c20f-114">hello benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="9c20f-115">Les performances du déplacement des données entre les magasins de données locaux et dans le cloud sont améliorées.</span><span class="sxs-lookup"><span data-stu-id="9c20f-115">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="9c20f-116">Si un des nœuds de hello tombe en panne pour une raison quelconque, les autres nœuds sont toujours disponibles pour le déplacement des données de salutation.</span><span class="sxs-lookup"><span data-stu-id="9c20f-116">If one of hello nodes goes down for some reason, other nodes are still available for moving hello data.</span></span> 
- <span data-ttu-id="9c20f-117">Si un des nœuds de hello devez toobe hors connexion pour maintenance, les autres nœuds sont toujours disponibles pour le déplacement des données de salutation.</span><span class="sxs-lookup"><span data-stu-id="9c20f-117">If one of hello nodes need toobe taken offline for maintenance, other nodes are still available for moving hello data.</span></span>

<span data-ttu-id="9c20f-118">Vous pouvez également configurer le nombre de hello de **tâches de déplacement de données simultanées** qui peut s’exécuter sur un tooscale nœud capacité hello de déplacement de données locaux et cloud banques de données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-118">You can also configure hello number of **concurrent data movement jobs** that can run on a node tooscale up hello capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="9c20f-119">À l’aide de hello portail Azure, vous pouvez surveiller l’état hello de ces nœuds, ce qui vous permet de décider si tooadd ou supprimer un nœud à partir de la passerelle de logique hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-119">Using hello Azure portal, you can monitor hello status of these nodes, which helps you decide whether tooadd or remove a node from hello logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="9c20f-120">Architecture</span><span class="sxs-lookup"><span data-stu-id="9c20f-120">Architecture</span></span> 
<span data-ttu-id="9c20f-121">Hello diagramme suivant présente hello architecture l’évolutivité et des fonctionnalités de disponibilité de hello passerelle de gestion des données :</span><span class="sxs-lookup"><span data-stu-id="9c20f-121">hello following diagram provides hello architecture overview of scalability and availability feature of hello Data Management Gateway:</span></span> 

![Passerelle de gestion des données - Haute disponibilité et scalabilité](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="9c20f-123">A **passerelle logique** passerelle hello ajouter de fabrique de données tooa Bonjour portail Azure.</span><span class="sxs-lookup"><span data-stu-id="9c20f-123">A **logical gateway** is hello gateway you add tooa data factory in hello Azure portal.</span></span> <span data-ttu-id="9c20f-124">Avant, vous ne pouviez associer qu’un seul ordinateur Windows local doté d’une passerelle de gestion des données installée avec une passerelle logique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-124">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="9c20f-125">Cet ordinateur passerelle local est appelé nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-125">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="9c20f-126">Vous pouvez maintenant associer des trop**quatre nœuds physiques** avec une passerelle logique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-126">Now, you can associate up too**four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="9c20f-127">Une passerelle logique dotée de plusieurs nœuds est appelée **passerelle à plusieurs nœuds**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-127">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="9c20f-128">Tous ces nœuds sont **actifs**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-128">All these nodes are **active**.</span></span> <span data-ttu-id="9c20f-129">Tous les peuvent traiter les données de toomove de travaux de déplacement des données entre locaux et cloud banques de données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-129">They all can process data movement jobs toomove data between on-premises and cloud data stores.</span></span> <span data-ttu-id="9c20f-130">Un des nœuds de hello agissent en tant que le répartiteur et de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-130">One of hello nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="9c20f-131">Autres nœuds dans les groupes de hello sont des nœuds de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-131">Other nodes in hello groups are worker nodes.</span></span> <span data-ttu-id="9c20f-132">A **répartiteur** nœud extrait des tâches/travaux de déplacement de données à partir du service de cloud computing hello et distribue les nœuds tooworker (y compris lui-même).</span><span class="sxs-lookup"><span data-stu-id="9c20f-132">A **dispatcher** node pulls data movement tasks/jobs from hello cloud service and dispatches them tooworker nodes (including itself).</span></span> <span data-ttu-id="9c20f-133">A **travail** nœud exécute le déplacement des travaux toomove de données entre locaux et cloud banques de données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-133">A **worker** node executes data movement jobs toomove data between on-premises and cloud data stores.</span></span> <span data-ttu-id="9c20f-134">Tous les nœuds sont des rôles de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-134">All nodes are workers.</span></span> <span data-ttu-id="9c20f-135">Un seul nœud peut être à la fois répartiteur et rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-135">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="9c20f-136">Vous pouvez commencent généralement par un seul nœud et **montée en puissance parallèle** tooadd plus de nœuds hello ou des nœuds existants sont submergés par la charge de déplacement des données hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-136">You may typically start with one node and **scale out** tooadd more nodes as hello existing node(s) are overwhelmed with hello data movement load.</span></span> <span data-ttu-id="9c20f-137">Vous pouvez également **montée en puissance** hello la fonctionnalité de déplacement des données d’un nœud de passerelle en augmentant le nombre de hello de travaux simultanés autorisés toorun sur le nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-137">You can also **scale up** hello data movement capability of a gateway node by increasing hello number of concurrent jobs that are allowed toorun on hello node.</span></span> <span data-ttu-id="9c20f-138">Cette fonctionnalité est également disponible avec une passerelle à un seul nœud (même quand la fonctionnalité de l’évolutivité et disponibilité hello n’est pas activée).</span><span class="sxs-lookup"><span data-stu-id="9c20f-138">This capability is also available with a single-node gateway (even when hello scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="9c20f-139">Une passerelle avec plusieurs nœuds conserve les informations d’identification de magasin de données hello synchronisés sur tous les nœuds.</span><span class="sxs-lookup"><span data-stu-id="9c20f-139">A gateway with multiple nodes keeps hello data store credentials in sync across all nodes.</span></span> <span data-ttu-id="9c20f-140">S’il existe un problème de connectivité du nœud à l’autre, les informations d’identification hello peuvent être synchronisées. Lorsque vous définissez les informations d’identification pour un magasin de données local qui utilise une passerelle, il enregistre les informations d’identification sur le nœud de répartiteur/de travail hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-140">If there is a node-to-node connectivity issue, hello credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on hello dispatcher/worker node.</span></span> <span data-ttu-id="9c20f-141">Hello répartiteur nœud se synchronise avec les autres nœuds de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-141">hello dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="9c20f-142">Ce processus est appelé **synchronisation des informations d’identification**. le canal de communication hello entre les nœuds peut être **chiffrées** par un certificat SSL/TLS publique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-142">This process is known as **credentials sync**. hello communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="9c20f-143">Configurer une passerelle à plusieurs nœuds</span><span class="sxs-lookup"><span data-stu-id="9c20f-143">Set up a multi-node gateway</span></span>
<span data-ttu-id="9c20f-144">Cette section part du principe que vous avez parcouru hello suivant deux articles ou familiarisés avec les concepts dans les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="9c20f-144">This section assumes that you have gone through hello following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="9c20f-145">[Passerelle de gestion des données](data-factory-data-management-gateway.md) -fournit une vue d’ensemble détaillée de la passerelle de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-145">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of hello gateway.</span></span>
- <span data-ttu-id="9c20f-146">[Déplacer des données entre des magasins de données locaux et dans le cloud](data-factory-move-data-between-onprem-and-cloud.md) - contient une procédure pas à pas donnant des instructions sur l’utilisation d’une passerelle à nœud unique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-146">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="9c20f-147">Avant d’installer une passerelle de gestion des données sur un ordinateur local, Windows, consultez la configuration requise indiquée dans [article principal de hello](data-factory-data-management-gateway.md#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="9c20f-147">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [hello main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="9c20f-148">Bonjour [procédure pas à pas](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), lors de la création d’une passerelle logique, activer hello **haute disponibilité et évolutivité** fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="9c20f-148">In hello [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable hello **High Availability & Scalability** feature.</span></span> 

    ![Passerelle de gestion des données - Haute disponibilité et scalabilité](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="9c20f-150">Bonjour **configurer** page, utilisez **le programme d’installation Express** ou **le programme d’installation manuelle** lien tooinstall une passerelle sur le nœud de premier hello (un ordinateur local, Windows).</span><span class="sxs-lookup"><span data-stu-id="9c20f-150">In hello **Configure** page, use either **Express Setup** or **Manual Setup** link tooinstall a gateway on hello first node (an on-premises Windows machine).</span></span>

    ![Passerelle de gestion des données - Installation rapide ou manuelle](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="9c20f-152">Si vous utilisez option d’installation rapide hello, la communication de nœud à nœud hello est effectuée sans chiffrement.</span><span class="sxs-lookup"><span data-stu-id="9c20f-152">If you use hello express setup option, hello node-to-node communication is done without encryption.</span></span> <span data-ttu-id="9c20f-153">nom du nœud Hello est identique au nom de l’ordinateur hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-153">hello node name is same as hello machine name.</span></span> <span data-ttu-id="9c20f-154">Utilisez le programme d’installation manuelle si la communication de nœud à nœud de hello doit toobe chiffré ou que vous souhaitiez toospecify un nom de nœud de votre choix.</span><span class="sxs-lookup"><span data-stu-id="9c20f-154">Use manual setup if hello node-node communication needs toobe encrypted or you want toospecify a node name of your choice.</span></span> <span data-ttu-id="9c20f-155">Il n’est pas possible de modifier les noms de nœuds ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="9c20f-155">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="9c20f-156">Si vous choisissez **Installation rapide** :</span><span class="sxs-lookup"><span data-stu-id="9c20f-156">If you choose **express setup**</span></span>
    1. <span data-ttu-id="9c20f-157">Vous consultez hello suivant message une fois la passerelle de hello est correctement installé :</span><span class="sxs-lookup"><span data-stu-id="9c20f-157">You see hello following message after hello gateway is successfully installed:</span></span>

        ![Passerelle de gestion des données - Installation rapide terminée](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="9c20f-159">Lancez le Gestionnaire de Configuration de gestion de données pour la passerelle de hello en suivant [ces instructions](data-factory-data-management-gateway.md#configuration-manager).</span><span class="sxs-lookup"><span data-stu-id="9c20f-159">Launch Data Management Configuration Manager for hello gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="9c20f-160">Vous consultez le nom de la passerelle hello, nom de nœud, état, etc..</span><span class="sxs-lookup"><span data-stu-id="9c20f-160">You see hello gateway name, node name, status, etc.</span></span>

        ![Passerelle de gestion des données - Installation terminée](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="9c20f-162">Si vous choisissez **Installation manuelle** :</span><span class="sxs-lookup"><span data-stu-id="9c20f-162">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="9c20f-163">Télécharger le package d’installation hello de hello Microsoft Download Center, tooinstall passerelle l’exécuter sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="9c20f-163">Download hello installation package from hello Microsoft Download Center, run it tooinstall gateway on your machine.</span></span>
    2. <span data-ttu-id="9c20f-164">Hello d’utilisation **clé d’authentification** de hello **configurer** passerelle de page tooregister hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-164">Use hello **authentication key** from hello **Configure** page tooregister hello gateway.</span></span>
    
        ![Passerelle de gestion des données - Installation terminée](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="9c20f-166">Bonjour **nouveau nœud de passerelle** page, vous pouvez fournir une personnalisée **nom** nœud de passerelle toohello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-166">In hello **New gateway node** page, you can provide a custom **name** toohello gateway node.</span></span> <span data-ttu-id="9c20f-167">Par défaut, le nom du nœud est identique au nom de l’ordinateur hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-167">By default, node name is same as hello machine name.</span></span>    

        ![Passerelle de gestion des données - Spécifier un nom](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="9c20f-169">Dans la page suivante de hello, vous pouvez choisir si trop**activer le chiffrement pour la communication de nœud à l’autre**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-169">In hello next page, you can choose whether too**enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="9c20f-170">Cliquez sur **ignorer** toodisable chiffrement (par défaut).</span><span class="sxs-lookup"><span data-stu-id="9c20f-170">Click **Skip** toodisable encryption (default).</span></span>

        ![Passerelle de gestion des données - Activer le chiffrement](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="9c20f-172">La modification du mode de chiffrement est uniquement pris en charge lorsque vous avez un nœud de passerelle unique dans la passerelle de logique hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-172">Changing of encryption mode is only supported when you have a single gateway node in hello logical gateway.</span></span> <span data-ttu-id="9c20f-173">mode de chiffrement toochange hello lorsqu’une passerelle a plusieurs nœuds, hello comme suit : supprimez tous les nœuds de hello, à l’exception d’un seul nœud, modifier le mode de chiffrement hello et puis ajoutez de nouveau les nœuds hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-173">toochange hello encryption mode when a gateway has multiple nodes, do hello following steps: delete all hello nodes except one node, change hello encryption mode, and then add hello nodes again.</span></span>
        > 
        > <span data-ttu-id="9c20f-174">Consultez la section [Configuration requise des certificats TSL/SSL](#tlsssl-certificate-requirements) pour obtenir la liste des conditions préalables à l’utilisation d’un certificat TLS/SSL.</span><span class="sxs-lookup"><span data-stu-id="9c20f-174">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="9c20f-175">Une fois la passerelle de hello est correctement installé, cliquez sur lancer le Gestionnaire de Configuration :</span><span class="sxs-lookup"><span data-stu-id="9c20f-175">After hello gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![Installation manuelle - Lancer le Gestionnaire de configuration](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="9c20f-177">vous voyez le Gestionnaire de Configuration de passerelle de gestion de données sur le nœud hello (ordinateur local, Windows), qui affiche l’état de connectivité, **nom de la passerelle**, et **nom de nœud**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-177">you see Data Management Gateway Configuration Manager on hello node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![Passerelle de gestion des données - Installation terminée](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="9c20f-179">Si vous configurez une passerelle hello sur une machine virtuelle Azure, vous pouvez utiliser [ce modèle Azure Resource Manager sur GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="9c20f-179">If you are provisioning hello gateway on an Azure VM, you can use [this Azure Resource Manager template on GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span></span> <span data-ttu-id="9c20f-180">Ce script crée une passerelle logique, configure les ordinateurs virtuels équipés de logiciels de passerelle de gestion des données et les inscrit avec la passerelle de logique hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-180">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with hello logical gateway.</span></span> 
6. <span data-ttu-id="9c20f-181">Dans le portail Azure, lancez hello **passerelle** page :</span><span class="sxs-lookup"><span data-stu-id="9c20f-181">In Azure portal, launch hello **Gateway** page:</span></span> 
    1. <span data-ttu-id="9c20f-182">Dans la page d’accueil fabrique hello données dans le portail de hello, cliquez sur **Services liés**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-182">On hello data factory home page in hello portal, click **Linked Services**.</span></span>
    
        ![Page d'accueil Data Factory](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="9c20f-184">Sélectionnez hello **passerelle** toosee hello **passerelle** page :</span><span class="sxs-lookup"><span data-stu-id="9c20f-184">select hello **gateway** toosee hello **Gateway** page:</span></span>
    
        ![Page d'accueil Data Factory](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="9c20f-186">Vous consultez hello **passerelle** page :</span><span class="sxs-lookup"><span data-stu-id="9c20f-186">You see hello **Gateway** page:</span></span>   

        ![Affichage de la passerelle à nœud unique](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="9c20f-188">Cliquez sur **ajouter un nœud** sur la barre d’outils de hello tooadd une passerelle logique toohello de nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-188">Click **Add Node** on hello toolbar tooadd a node toohello logical gateway.</span></span> <span data-ttu-id="9c20f-189">Si vous envisagez de l’installation rapide toouse, effectuez cette étape à partir de la machine locale hello qui est ajouté en tant que nœud toohello passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-189">If you are planning toouse express setup, do this step from hello on-premises machine that will be added as a node toohello gateway.</span></span> 

    ![Passerelle de gestion des données - Menu Ajouter un nœud](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="9c20f-191">Étapes sont semblables toosetting nœud de premier hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-191">Steps are similar toosetting up hello first node.</span></span> <span data-ttu-id="9c20f-192">Hello Configuration Manager UI vous permet de définir le nom du nœud hello si vous choisissez l’option d’installation manuelle de hello :</span><span class="sxs-lookup"><span data-stu-id="9c20f-192">hello Configuration Manager UI lets you set hello node name if you choose hello manual installation option:</span></span> 

    ![Gestionnaire de configuration - Installer une deuxième passerelle](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="9c20f-194">Une fois la passerelle de hello est correctement installé sur le nœud de hello, outil de Configuration Manager hello affiche hello suivant d’écran :</span><span class="sxs-lookup"><span data-stu-id="9c20f-194">After hello gateway is installed successfully on hello node, hello Configuration Manager tool displays hello following screen:</span></span>  

    ![Gestionnaire de configuration - Installation de la deuxième passerelle terminée](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="9c20f-196">Si vous ouvrez hello **passerelle** page dans le portail hello, vous voyez maintenant deux nœuds de passerelle :</span><span class="sxs-lookup"><span data-stu-id="9c20f-196">If you open hello **Gateway** page in hello portal, you see two gateway nodes now:</span></span> 

    ![Passerelle avec deux nœuds dans le portail de hello](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="9c20f-198">toodelete un nœud de passerelle, cliquez sur **supprimer un nœud** sur la barre d’outils de hello, sélectionnez le nœud de hello vous souhaitez toodelete, puis cliquez sur **supprimer** à partir de la barre d’outils hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-198">toodelete a gateway node, click **Delete Node** on hello toolbar, select hello node you want toodelete, and then click **Delete** from hello toolbar.</span></span> <span data-ttu-id="9c20f-199">Cette action supprime le nœud sélectionné de hello du groupe de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-199">This action deletes hello selected node from hello group.</span></span> <span data-ttu-id="9c20f-200">Notez que cette action ne désinstalle pas le logiciel de passerelle de gestion de données hello à partir du nœud de hello (ordinateur local, Windows).</span><span class="sxs-lookup"><span data-stu-id="9c20f-200">Note that this action does not uninstall hello data management gateway software from hello node (on-premises Windows machine).</span></span> <span data-ttu-id="9c20f-201">Utilisez **ajouter ou supprimer des programmes** dans le panneau de configuration sur la passerelle de hello toouninstall hello localement.</span><span class="sxs-lookup"><span data-stu-id="9c20f-201">Use **Add or remove programs** in Control Panel on hello on-premises toouninstall hello gateway.</span></span> <span data-ttu-id="9c20f-202">Lorsque vous désinstallez la passerelle à partir du nœud de hello, elle est automatiquement supprimée dans le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-202">When you uninstall gateway from hello node, it's automatically deleted in hello portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="9c20f-203">Mettre à niveau une passerelle existante</span><span class="sxs-lookup"><span data-stu-id="9c20f-203">Upgrade an existing gateway</span></span>
<span data-ttu-id="9c20f-204">Vous pouvez mettre à niveau un existant passerelle toouse hello haute disponibilité et la fonctionnalité d’extensibilité.</span><span class="sxs-lookup"><span data-stu-id="9c20f-204">You can upgrade an existing gateway toouse hello high availability and scalability feature.</span></span> <span data-ttu-id="9c20f-205">Cette fonctionnalité fonctionne uniquement avec les nœuds ayant une passerelle de gestion des données hello de version > = 2.12.xxxx.</span><span class="sxs-lookup"><span data-stu-id="9c20f-205">This feature works only with nodes that have hello data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="9c20f-206">Vous pouvez voir version hello de passerelle de gestion des données installé sur un ordinateur de hello **aide** onglet Hello Gestionnaire de Configuration de passerelle de gestion de données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-206">You can see hello version of data management gateway installed on a machine in hello **Help** tab of hello Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="9c20f-207">Hello local machine toohello version la plus récente en suivant la passerelle hello mise à jour en téléchargeant et en exécutant un package d’installation MSI de hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="9c20f-207">Update hello gateway on hello on-premises machine toohello latest version by following by downloading and running an MSI setup package from hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="9c20f-208">Consultez la section [Installation](data-factory-data-management-gateway.md#installation) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="9c20f-208">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="9c20f-209">Accédez toohello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="9c20f-209">Navigate toohello Azure portal.</span></span> <span data-ttu-id="9c20f-210">Lancez hello **page de la fabrique de données** de votre fabrique de données.</span><span class="sxs-lookup"><span data-stu-id="9c20f-210">Launch hello **Data Factory page** for your data factory.</span></span> <span data-ttu-id="9c20f-211">Cliquez sur lié services vignette toolaunch hello **page des services liés**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-211">Click Linked services tile toolaunch hello **linked services page**.</span></span> <span data-ttu-id="9c20f-212">Hello de hello sélectionnez passerelle toolaunch **page de la passerelle**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-212">Select hello gateway toolaunch hello **gateway page**.</span></span> <span data-ttu-id="9c20f-213">Cliquez sur et activer **fonctionnalité en version préliminaire** comme indiqué dans hello suivant image :</span><span class="sxs-lookup"><span data-stu-id="9c20f-213">Click and enable **Preview Feature** as shown in hello following image:</span></span> 

    ![Passerelle de gestion des données - Activer la fonctionnalité en préversion](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="9c20f-215">Une fois que la fonctionnalité d’aperçu hello est activée dans le portail de hello, fermez toutes les pages.</span><span class="sxs-lookup"><span data-stu-id="9c20f-215">Once hello preview feature is enabled in hello portal, close all pages.</span></span> <span data-ttu-id="9c20f-216">Rouvrez hello **page de la passerelle** toosee hello nouvelle interface utilisateur d’aperçu (IU).</span><span class="sxs-lookup"><span data-stu-id="9c20f-216">Reopen hello **gateway page** toosee hello new preview user interface (UI).</span></span>
 
    ![Passerelle de gestion des données - Activation de la fonctionnalité en préversion terminée](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![Passerelle de gestion des données - Interface utilisateur en préversion](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="9c20f-219">Au cours de la mise à niveau de hello, nom du nœud de premier hello désigne hello machine de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-219">During hello upgrade, name of hello first node is hello name of hello machine.</span></span> 
3. <span data-ttu-id="9c20f-220">Maintenant, ajoutez un nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-220">Now, add a node.</span></span> <span data-ttu-id="9c20f-221">Bonjour **passerelle** , cliquez sur **ajouter un nœud**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-221">In hello **Gateway** page, click **Add Node**.</span></span>  

    ![Passerelle de gestion des données - Menu Ajouter un nœud](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="9c20f-223">Suivez les instructions de hello précédente section tooset nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-223">Follow instructions from hello previous section tooset up hello node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="9c20f-224">Bonnes pratiques d’installation</span><span class="sxs-lookup"><span data-stu-id="9c20f-224">Installation best practices</span></span>

- <span data-ttu-id="9c20f-225">Configurer le mode d’alimentation sur l’ordinateur hôte de hello pour la passerelle de hello afin que hello machine ne pas en veille prolongée.</span><span class="sxs-lookup"><span data-stu-id="9c20f-225">Configure power plan on hello host machine for hello gateway so that hello machine does not hibernate.</span></span> <span data-ttu-id="9c20f-226">Si l’ordinateur hôte de hello en veille prolongée, passerelle de hello ne répond pas les demandes toodata.</span><span class="sxs-lookup"><span data-stu-id="9c20f-226">If hello host machine hibernates, hello gateway does not respond toodata requests.</span></span>
- <span data-ttu-id="9c20f-227">Sauvegardez le certificat hello associé hello passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-227">Back up hello certificate associated with hello gateway.</span></span>
- <span data-ttu-id="9c20f-228">Vérifiez que la configuration de tous les nœuds est similaire pour atteindre les performances idéales (recommandé).</span><span class="sxs-lookup"><span data-stu-id="9c20f-228">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="9c20f-229">Ajoutez une disponibilité élevée tooensure au moins deux nœuds.</span><span class="sxs-lookup"><span data-stu-id="9c20f-229">Add at least two nodes tooensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="9c20f-230">Configuration requise des certificats TLS/SSL</span><span class="sxs-lookup"><span data-stu-id="9c20f-230">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="9c20f-231">Voici les exigences hello pour certificat TLS/SSL hello qui est utilisé pour sécuriser les communications entre les nœuds de la passerelle :</span><span class="sxs-lookup"><span data-stu-id="9c20f-231">Here are hello requirements for hello TLS/SSL certificate that is used for securing communications between gateway nodes:</span></span>

- <span data-ttu-id="9c20f-232">certificat de Hello doit être un X509 approuvée publiquement certificat v3.</span><span class="sxs-lookup"><span data-stu-id="9c20f-232">hello certificate must be a publicly trusted X509 v3 certificate.</span></span>
- <span data-ttu-id="9c20f-233">Tous les nœuds de passerelle doivent approuver ce certificat.</span><span class="sxs-lookup"><span data-stu-id="9c20f-233">All gateway nodes must trust this certificate.</span></span> 
- <span data-ttu-id="9c20f-234">Nous vous recommandons d’utiliser des certificats émis par une autorité de certification (tierce) publique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-234">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="9c20f-235">Prise en charge de toutes les tailles de clé prises en charge par Windows Server 2012 R2 pour les certificats SSL.</span><span class="sxs-lookup"><span data-stu-id="9c20f-235">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="9c20f-236">Non-prise en charge des certificats qui utilisent des clés CNG.</span><span class="sxs-lookup"><span data-stu-id="9c20f-236">Does not support certificates that use CNG keys.</span></span>
- <span data-ttu-id="9c20f-237">Les certificats utilisant des caractères génériques sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="9c20f-237">Wild-card certificates are supported.</span></span> 


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="9c20f-238">Surveiller une passerelle à plusieurs nœuds</span><span class="sxs-lookup"><span data-stu-id="9c20f-238">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="9c20f-239">Surveillance d’une passerelle à plusieurs nœuds</span><span class="sxs-lookup"><span data-stu-id="9c20f-239">Multi-node gateway monitoring</span></span>
<span data-ttu-id="9c20f-240">Bonjour portail Azure, vous pouvez afficher l’instantané quasiment en temps réel de l’utilisation des ressources (processeur, mémoire, network(in/out), etc.) sur chaque nœud, ainsi que les États des nœuds de la passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-240">In hello Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![Passerelle de gestion des données - Surveillance de plusieurs nœuds](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="9c20f-242">Vous pouvez activer **paramètres avancés** Bonjour **passerelle** toosee avancé des métriques telles que la page **réseau**(entrée/sortie), **rôle et l’état d’informations d’identification**, qui est utile pour résoudre les problèmes de passerelle, et **travaux simultanés** (en cours d’exécution / limite) qui peut être modifié / modifié en conséquence lors de l’optimisation des performances.</span><span class="sxs-lookup"><span data-stu-id="9c20f-242">You can enable **Advanced Settings** in hello **Gateway** page toosee advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="9c20f-243">Hello tableau suivant fournit des descriptions des colonnes Bonjour **passerelle nœuds** liste :</span><span class="sxs-lookup"><span data-stu-id="9c20f-243">hello following table provides descriptions of columns in hello **Gateway Nodes** list:</span></span>  

<span data-ttu-id="9c20f-244">Propriété de surveillance</span><span class="sxs-lookup"><span data-stu-id="9c20f-244">Monitoring Property</span></span> | <span data-ttu-id="9c20f-245">Description</span><span class="sxs-lookup"><span data-stu-id="9c20f-245">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="9c20f-246">Nom</span><span class="sxs-lookup"><span data-stu-id="9c20f-246">Name</span></span> | <span data-ttu-id="9c20f-247">Nom de la passerelle de logique de hello et les nœuds associés hello passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-247">Name of hello logical gateway and nodes associated with hello gateway.</span></span>  
<span data-ttu-id="9c20f-248">État</span><span class="sxs-lookup"><span data-stu-id="9c20f-248">Status</span></span> | <span data-ttu-id="9c20f-249">État de la passerelle de logique de hello et les nœuds de passerelle hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-249">Status of hello logical gateway and hello gateway nodes.</span></span> <span data-ttu-id="9c20f-250">Exemple : En ligne/Hors connexion/Limité/etc. Pour plus d’informations sur ces états, consultez la section [État de la passerelle](#gateway-status).</span><span class="sxs-lookup"><span data-stu-id="9c20f-250">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="9c20f-251">Version</span><span class="sxs-lookup"><span data-stu-id="9c20f-251">Version</span></span> | <span data-ttu-id="9c20f-252">Affiche la version hello de passerelle de logique hello et chaque nœud de passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-252">Shows hello version of hello logical gateway and each gateway node.</span></span> <span data-ttu-id="9c20f-253">version Hello de passerelle de logique hello est déterminée en fonction de la version de la majorité des nœuds dans le groupe de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-253">hello version of hello logical gateway is determined based on version of majority of nodes in hello group.</span></span> <span data-ttu-id="9c20f-254">S’il existe des nœuds avec différentes versions dans le programme d’installation de la passerelle logique hello, seuls les nœuds hello avec hello même numéro de version en tant que fonction de passerelle logique hello correctement.</span><span class="sxs-lookup"><span data-stu-id="9c20f-254">If there are nodes with different versions in hello logical gateway setup, only hello nodes with hello same version number as hello logical gateway function properly.</span></span> <span data-ttu-id="9c20f-255">D’autres sont en mode limité de hello et doivent toobe mis à jour manuellement (uniquement au cas où la mise à jour automatique échoue).</span><span class="sxs-lookup"><span data-stu-id="9c20f-255">Others are in hello limited mode and need toobe manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="9c20f-256">Mémoire disponible</span><span class="sxs-lookup"><span data-stu-id="9c20f-256">Available memory</span></span> | <span data-ttu-id="9c20f-257">Mémoire disponible sur un nœud de passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-257">Available memory on a gateway node.</span></span> <span data-ttu-id="9c20f-258">Cette valeur est un instantané en quasi temps réel.</span><span class="sxs-lookup"><span data-stu-id="9c20f-258">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="9c20f-259">Utilisation du processeur</span><span class="sxs-lookup"><span data-stu-id="9c20f-259">CPU utilization</span></span> | <span data-ttu-id="9c20f-260">Utilisation du processeur d’un nœud de passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-260">CPU utilization of a gateway node.</span></span> <span data-ttu-id="9c20f-261">Cette valeur est un instantané en quasi temps réel.</span><span class="sxs-lookup"><span data-stu-id="9c20f-261">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="9c20f-262">Réseau (entrée/sortie)</span><span class="sxs-lookup"><span data-stu-id="9c20f-262">Networking (In/Out)</span></span> | <span data-ttu-id="9c20f-263">Utilisation du réseau d’un nœud de passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-263">Network utilization of a gateway node.</span></span> <span data-ttu-id="9c20f-264">Cette valeur est un instantané en quasi temps réel.</span><span class="sxs-lookup"><span data-stu-id="9c20f-264">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="9c20f-265">Tâches simultanées (en cours d’exécution/limite)</span><span class="sxs-lookup"><span data-stu-id="9c20f-265">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="9c20f-266">Nombre de travaux ou tâches qui s’exécutent sur chaque nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-266">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="9c20f-267">Cette valeur est un instantané en quasi temps réel.</span><span class="sxs-lookup"><span data-stu-id="9c20f-267">This value is a near real-time snapshot.</span></span> <span data-ttu-id="9c20f-268">Limite signifie travaux simultanés de hello maximal pour chaque nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-268">Limit signifies hello maximum concurrent jobs for each node.</span></span> <span data-ttu-id="9c20f-269">Cette valeur est définie en fonction de la taille de la machine hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-269">This value is defined based on hello machine size.</span></span> <span data-ttu-id="9c20f-270">Vous pouvez augmenter tooscale de limite hello de l’exécution de travaux simultanés dans les scénarios avancés, où processeur / mémoire / réseau est sous-utilisée, mais les activités dépassent ce délai. Cette fonctionnalité est également disponible avec une passerelle à un seul nœud (même quand la fonctionnalité de l’évolutivité et disponibilité hello n’est pas activée).</span><span class="sxs-lookup"><span data-stu-id="9c20f-270">You can increase hello limit tooscale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when hello scalability and availability feature is not enabled).</span></span> <span data-ttu-id="9c20f-271">Pour plus d’informations, consultez la section [Considérations d’échelle](#scale-considerations).</span><span class="sxs-lookup"><span data-stu-id="9c20f-271">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="9c20f-272">Rôle</span><span class="sxs-lookup"><span data-stu-id="9c20f-272">Role</span></span> | <span data-ttu-id="9c20f-273">Il existe deux types de rôles : répartiteur et rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-273">There are two types of roles – Dispatcher and worker.</span></span> <span data-ttu-id="9c20f-274">Tous les nœuds sont employés, ce qui signifie qu’ils peuvent tous être utilisés tooexecute travaux.</span><span class="sxs-lookup"><span data-stu-id="9c20f-274">All nodes are workers, which means they can all be used tooexecute jobs.</span></span> <span data-ttu-id="9c20f-275">Il n'existe qu’un seul nœud de répartiteur, ce qui est utilisé toopull tâches/tâches à partir des services de cloud computing et les distribuer des nœuds de travail toodifferent (y compris lui-même).</span><span class="sxs-lookup"><span data-stu-id="9c20f-275">There is only one dispatcher node, which is used toopull tasks/jobs from cloud services and dispatch them toodifferent worker nodes (including itself).</span></span> 

![Passerelle de gestion des données - Surveillance avancée de plusieurs nœuds](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="9c20f-277">État de la passerelle</span><span class="sxs-lookup"><span data-stu-id="9c20f-277">Gateway status</span></span>

<span data-ttu-id="9c20f-278">Hello tableau suivant fournit les états possibles d’un **nœud passerelle**:</span><span class="sxs-lookup"><span data-stu-id="9c20f-278">hello following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="9c20f-279">État</span><span class="sxs-lookup"><span data-stu-id="9c20f-279">Status</span></span>  | <span data-ttu-id="9c20f-280">Commentaires/Scénarios</span><span class="sxs-lookup"><span data-stu-id="9c20f-280">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="9c20f-281">En ligne</span><span class="sxs-lookup"><span data-stu-id="9c20f-281">Online</span></span> | <span data-ttu-id="9c20f-282">Nœud connecté service de fabrique tooData.</span><span class="sxs-lookup"><span data-stu-id="9c20f-282">Node connected tooData Factory service.</span></span>
<span data-ttu-id="9c20f-283">Hors ligne</span><span class="sxs-lookup"><span data-stu-id="9c20f-283">Offline</span></span> | <span data-ttu-id="9c20f-284">Le nœud est hors connexion.</span><span class="sxs-lookup"><span data-stu-id="9c20f-284">Node is offline.</span></span>
<span data-ttu-id="9c20f-285">Mise à niveau</span><span class="sxs-lookup"><span data-stu-id="9c20f-285">Upgrading</span></span> | <span data-ttu-id="9c20f-286">nœud de Hello est en cours de la mise à jour automatique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-286">hello node is being auto-updated.</span></span>
<span data-ttu-id="9c20f-287">Limité</span><span class="sxs-lookup"><span data-stu-id="9c20f-287">Limited</span></span> | <span data-ttu-id="9c20f-288">En raison du problème de tooConnectivity.</span><span class="sxs-lookup"><span data-stu-id="9c20f-288">Due tooConnectivity issue.</span></span> <span data-ttu-id="9c20f-289">Peut être dû à problème de port 8050 tooHTTP, problème de connectivité de bus de service ou un problème de synchronisation d’informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="9c20f-289">May be due tooHTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="9c20f-290">Inactif</span><span class="sxs-lookup"><span data-stu-id="9c20f-290">Inactive</span></span> | <span data-ttu-id="9c20f-291">Nœud est dans une configuration différente de la configuration hello d’autres nœuds majoritaire.</span><span class="sxs-lookup"><span data-stu-id="9c20f-291">Node is in a configuration different from hello configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="9c20f-292">Un nœud peut être inactif lorsqu’il ne peut pas se connecter à des nœuds de tooother.</span><span class="sxs-lookup"><span data-stu-id="9c20f-292">A node can be inactive when it cannot connect tooother nodes.</span></span> 


<span data-ttu-id="9c20f-293">Hello tableau suivant fournit les états possibles d’un **passerelle logique**.</span><span class="sxs-lookup"><span data-stu-id="9c20f-293">hello following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="9c20f-294">état de la passerelle Hello dépend des États des nœuds de passerelle hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-294">hello gateway status depends on statuses of hello gateway nodes.</span></span> 

<span data-ttu-id="9c20f-295">État</span><span class="sxs-lookup"><span data-stu-id="9c20f-295">Status</span></span> | <span data-ttu-id="9c20f-296">Commentaires</span><span class="sxs-lookup"><span data-stu-id="9c20f-296">Comments</span></span>
:----- | :-------
<span data-ttu-id="9c20f-297">Doit être inscrite</span><span class="sxs-lookup"><span data-stu-id="9c20f-297">Needs Registration</span></span> | <span data-ttu-id="9c20f-298">Aucun nœud n’est encore inscrit toothis logique passerelle</span><span class="sxs-lookup"><span data-stu-id="9c20f-298">No node is yet registered toothis logical gateway</span></span>
<span data-ttu-id="9c20f-299">En ligne</span><span class="sxs-lookup"><span data-stu-id="9c20f-299">Online</span></span> | <span data-ttu-id="9c20f-300">Les nœuds de passerelle sont en ligne.</span><span class="sxs-lookup"><span data-stu-id="9c20f-300">Gateway Nodes are online</span></span>
<span data-ttu-id="9c20f-301">Hors ligne</span><span class="sxs-lookup"><span data-stu-id="9c20f-301">Offline</span></span> | <span data-ttu-id="9c20f-302">Aucun nœud n’est en ligne.</span><span class="sxs-lookup"><span data-stu-id="9c20f-302">No node in online status.</span></span>
<span data-ttu-id="9c20f-303">Limité</span><span class="sxs-lookup"><span data-stu-id="9c20f-303">Limited</span></span> | <span data-ttu-id="9c20f-304">Tous les nœuds inclus dans cette passerelle ne sont pas dans un état intègre.</span><span class="sxs-lookup"><span data-stu-id="9c20f-304">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="9c20f-305">Cet état est un avertissement pouvant indiquer que certains nœuds sont en panne !</span><span class="sxs-lookup"><span data-stu-id="9c20f-305">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="9c20f-306">Peut être dû à problème de synchronisation toocredential sur le nœud de répartiteur/de travail.</span><span class="sxs-lookup"><span data-stu-id="9c20f-306">Could be due toocredential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="9c20f-307">Surveillance de pipeline/des activités</span><span class="sxs-lookup"><span data-stu-id="9c20f-307">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="9c20f-308">Hello portail Azure fournit un expérience avec les détails au niveau du nœud granulaire de surveillance de pipeline.</span><span class="sxs-lookup"><span data-stu-id="9c20f-308">hello Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="9c20f-309">Par exemple, il indique quelles activités se sont exécutées sur quel nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-309">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="9c20f-310">Ces informations peuvent être utiles pour comprendre les problèmes de performances sur un nœud particulier, par exemple en raison de la limitation de toonetwork.</span><span class="sxs-lookup"><span data-stu-id="9c20f-310">This information can be helpful in understanding performance issues on a particular node, say due toonetwork throttling.</span></span> 

![Passerelle de gestion des données - Surveillance de plusieurs nœuds pour les pipelines](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![Passerelle de gestion des données - Détails de pipeline](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="9c20f-313">Considérations d’échelle</span><span class="sxs-lookup"><span data-stu-id="9c20f-313">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="9c20f-314">Montée en charge</span><span class="sxs-lookup"><span data-stu-id="9c20f-314">Scale out</span></span>
<span data-ttu-id="9c20f-315">Hello lorsque **mémoire disponible est faible** et hello **l’utilisation du processeur est élevée**, ajoutez un nouveau nœud permet de montée en puissance parallèle hello charge sur plusieurs ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="9c20f-315">When hello **available memory is low** and hello **CPU usage is high**, adding a new node helps scale out hello load across machines.</span></span> <span data-ttu-id="9c20f-316">Si des activités échouent en raison de nœud tootime-out ou la passerelle est hors connexion, il est utile si vous ajoutez une passerelle toohello de nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-316">If activities are failing due tootime-out or gateway node being offline, it helps if you add a node toohello gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="9c20f-317">Monter en puissance</span><span class="sxs-lookup"><span data-stu-id="9c20f-317">Scale up</span></span>
<span data-ttu-id="9c20f-318">Lorsque la mémoire disponible hello et processeur ne sont pas utilisées correctement, mais capacité d’inactivité hello est de 0, vous devez mettre à l’échelle vers le haut en augmentant le nombre de hello de travaux simultanés pouvant s’exécuter sur un nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-318">When hello available memory and CPU are not utilized well, but hello idle capacity is 0, you should scale up by increasing hello number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="9c20f-319">Vous pouvez également tooscale haut lorsque les activités dépassent ce délai, car la passerelle de hello est surchargé.</span><span class="sxs-lookup"><span data-stu-id="9c20f-319">You may also want tooscale up when activities are timing out because hello gateway is overloaded.</span></span> <span data-ttu-id="9c20f-320">Comme indiqué dans hello suivant l’image, vous pouvez augmenter la capacité maximale de hello pour un nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-320">As shown in hello following image, you can increase hello maximum capacity for a node.</span></span> <span data-ttu-id="9c20f-321">Nous vous suggérons doublant toostart avec.</span><span class="sxs-lookup"><span data-stu-id="9c20f-321">We suggest doubling it toostart with.</span></span>  

![Passerelle de gestion des données - Considérations d’échelle](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="9c20f-323">Problèmes connus/nouveautés</span><span class="sxs-lookup"><span data-stu-id="9c20f-323">Known issues/breaking changes</span></span>

- <span data-ttu-id="9c20f-324">Actuellement, vous pouvez avoir des nœuds de passerelle physique toofour pour une passerelle logique unique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-324">Currently, you can have up toofour physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="9c20f-325">Si vous avez besoin de plus de quatre nœuds pour des raisons de performances, envoyer un courrier électronique trop[DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="9c20f-325">If you need more than four nodes for performance reasons, send an email too[DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="9c20f-326">Vous ne peut pas réenregistrer un nœud de passerelle avec la clé d’authentification hello à partir d’un autre tooswitch passerelle logique à partir de la passerelle de logique actuelle hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-326">You cannot re-register a gateway node with hello authentication key from another logical gateway tooswitch from hello current logical gateway.</span></span> <span data-ttu-id="9c20f-327">dans le Registre toore, désinstaller hello passerelle nœud de hello, réinstallez hello passerelle et l’enregistrer avec la clé d’authentification hello pour hello autres passerelle logique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-327">toore-register, uninstall hello gateway from hello node, reinstall hello gateway, and register it with hello authentication key for hello other logical gateway.</span></span> 
- <span data-ttu-id="9c20f-328">Si le proxy HTTP est requis pour tous les nœuds de votre passerelle, la définition de proxy de hello dans diahost.exe.config et diawp.exe.config et utiliser hello server manager toomake que tous les nœuds ont hello même diahost.exe.config et diawip.exe.config. Consultez la section [Configurer les paramètres du proxy](data-factory-data-management-gateway.md#configure-proxy-server-settings) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="9c20f-328">If HTTP proxy is required for all your gateway nodes, set hello proxy in diahost.exe.config and diawp.exe.config, and use hello server manager toomake sure all nodes have hello same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="9c20f-329">toochange en mode de chiffrement pour la communication de nœud à l’autre dans le Gestionnaire de Configuration de passerelle, supprimez tous les nœuds de hello dans portail hello sauf un.</span><span class="sxs-lookup"><span data-stu-id="9c20f-329">toochange encryption mode for node-to-node communication in Gateway Configuration Manager, delete all hello nodes in hello portal except one.</span></span> <span data-ttu-id="9c20f-330">Ajoutez ensuite les nœuds après la modification du mode de chiffrement hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-330">Then, add nodes back after changing hello encryption mode.</span></span>
- <span data-ttu-id="9c20f-331">Utiliser un certificat SSL officiel si vous choisissez le canal de communication de nœud à nœud tooencrypt hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-331">Use an official SSL certificate if you choose tooencrypt hello node-to-node communication channel.</span></span> <span data-ttu-id="9c20f-332">Certificat auto-signé peut entraîner des problèmes de connectivité comme hello même certificat ne peut pas être approuvé dans la liste des autorités de certification sur d’autres ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="9c20f-332">Self-signed certificate may cause connectivity issues as hello same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="9c20f-333">Impossible d’inscrire une passerelle nœud tooa logique lors de la version du nœud hello est inférieure à la version de la passerelle logique hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-333">You cannot register a gateway node tooa logical gateway when hello node version is lower than hello logical gateway version.</span></span> <span data-ttu-id="9c20f-334">Supprimez tous les nœuds de passerelle de logique hello portail afin que vous pouvez inscrire un node(downgrade) version inférieure il.</span><span class="sxs-lookup"><span data-stu-id="9c20f-334">Delete all nodes of hello logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="9c20f-335">Si vous supprimez tous les nœuds d’une passerelle logique, installer et enregistrer manuellement nouvelle passerelle logique toothat de nœuds.</span><span class="sxs-lookup"><span data-stu-id="9c20f-335">If you delete all nodes of a logical gateway, manually install and register new nodes toothat logical gateway.</span></span> <span data-ttu-id="9c20f-336">L’installation rapide n’est pas prise en charge dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="9c20f-336">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="9c20f-337">Vous ne pouvez pas utiliser le programme d’installation express tooinstall nœuds tooan logique passerelle existante, qui utilise toujours les informations d’identification du cloud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-337">You cannot use express setup tooinstall nodes tooan existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="9c20f-338">Vous pouvez vérifier où les informations d’identification de hello sont stockées à partir de hello Gestionnaire de Configuration de passerelle sur l’onglet Paramètres de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-338">You can check where hello credentials are stored from hello Gateway Configuration Manager on hello Settings tab.</span></span>
- <span data-ttu-id="9c20f-339">Vous ne pouvez pas utiliser le programme d’installation express tooinstall nœuds tooan logique passerelle existante, qui a le chiffrement de nœud à l’autre est activé.</span><span class="sxs-lookup"><span data-stu-id="9c20f-339">You cannot use express setup tooinstall nodes tooan existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="9c20f-340">Comme paramètre de mode de chiffrement hello implique l’ajout manuel des certificats, installation express n’est pas plus d’une option.</span><span class="sxs-lookup"><span data-stu-id="9c20f-340">As setting hello encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="9c20f-341">Pour effectuer une copie de fichiers à partir d’un environnement local, vous ne devez plus utiliser \\localhost ni C:\fichiers car localhost ou le lecteur local ne sont peut-être pas accessibles par le biais de tous les nœuds.</span><span class="sxs-lookup"><span data-stu-id="9c20f-341">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="9c20f-342">Au lieu de cela, utilisez \\emplacement des fichiers ServerName\files toospecify.</span><span class="sxs-lookup"><span data-stu-id="9c20f-342">Instead, use \\ServerName\files toospecify files’ location.</span></span>


## <a name="rolling-back-from-hello-preview"></a><span data-ttu-id="9c20f-343">Restauration de la version préliminaire de hello</span><span class="sxs-lookup"><span data-stu-id="9c20f-343">Rolling back from hello preview</span></span> 
<span data-ttu-id="9c20f-344">tooroll à partir de la version préliminaire de hello, supprimez tous les nœuds, mais un seul nœud.</span><span class="sxs-lookup"><span data-stu-id="9c20f-344">tooroll back from hello preview, delete all nodes but one node.</span></span> <span data-ttu-id="9c20f-345">Peu importe quels nœuds vous supprimer, mais assurez-vous de qu'avoir au moins un nœud dans la passerelle de logique hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-345">It doesn’t matter which nodes you delete, but ensure you have at least one node in hello logical gateway.</span></span> <span data-ttu-id="9c20f-346">Vous pouvez supprimer un nœud en désinstallant la passerelle sur l’ordinateur de hello ou à l’aide de hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="9c20f-346">You can delete a node either by uninstalling gateway on hello machine or by using hello Azure portal.</span></span> <span data-ttu-id="9c20f-347">Bonjour portail Azure, Bonjour **Data Factory** , cliquez sur hello de toolaunch services lié **services liés** page.</span><span class="sxs-lookup"><span data-stu-id="9c20f-347">In hello Azure portal, in hello **Data Factory** page, click Linked services toolaunch hello **Linked services** page.</span></span> <span data-ttu-id="9c20f-348">Hello de hello sélectionnez passerelle toolaunch **passerelle** page.</span><span class="sxs-lookup"><span data-stu-id="9c20f-348">Select hello gateway toolaunch hello **Gateway** page.</span></span> <span data-ttu-id="9c20f-349">Dans la page de la passerelle hello, vous pouvez voir les nœuds hello associés hello passerelle.</span><span class="sxs-lookup"><span data-stu-id="9c20f-349">In hello Gateway page, you can see hello nodes associated with hello gateway.</span></span> <span data-ttu-id="9c20f-350">page de Hello vous permet de supprimer un nœud à partir de la passerelle de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-350">hello page lets you delete a node from hello gateway.</span></span>
 
<span data-ttu-id="9c20f-351">Après la suppression, cliquez sur **fonctionnalités en version préliminaire** hello même page du portail Azure et désactiver la fonctionnalité d’aperçu hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-351">After deleting, click **preview features** in hello same Azure portal page, and disable hello preview feature.</span></span> <span data-ttu-id="9c20f-352">Vous avez réinitialisé votre passerelle tooone nœud GA (disponibilité générale).</span><span class="sxs-lookup"><span data-stu-id="9c20f-352">You have reset your gateway tooone node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="9c20f-353">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="9c20f-353">Next steps</span></span>
<span data-ttu-id="9c20f-354">Passez en revue hello suivant des articles :</span><span class="sxs-lookup"><span data-stu-id="9c20f-354">Review hello following articles:</span></span>
- <span data-ttu-id="9c20f-355">[Passerelle de gestion des données](data-factory-data-management-gateway.md) -fournit une vue d’ensemble détaillée de la passerelle de hello.</span><span class="sxs-lookup"><span data-stu-id="9c20f-355">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of hello gateway.</span></span>
- <span data-ttu-id="9c20f-356">[Déplacer des données entre des magasins de données locaux et dans le cloud](data-factory-move-data-between-onprem-and-cloud.md) - contient une procédure pas à pas donnant des instructions sur l’utilisation d’une passerelle à nœud unique.</span><span class="sxs-lookup"><span data-stu-id="9c20f-356">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 
