---
title: "Modèle de conception Azure Cosmos DB : applications de réseaux sociaux | Microsoft Docs"
description: "Découvrez un modèle de conception destiné aux réseaux sociaux et tirant parti de la souplesse du stockage d’Azure Cosmos DB et d’autres services Azure."
keywords: "applications de réseaux sociaux"
services: cosmos-db
author: ealsur
manager: jhubbard
editor: 
documentationcenter: 
ms.assetid: 2dbf83a7-512a-4993-bf1b-ea7d72e095d9
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/29/2017
ms.author: mimig
ms.openlocfilehash: 43025adeaf954fedfbcee32e636fb30935f2126b
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="going-social-with-azure-cosmos-db"></a><span data-ttu-id="87d8d-104">Réseaux sociaux avec Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="87d8d-104">Going social with Azure Cosmos DB</span></span>
<span data-ttu-id="87d8d-105">Vivre dans une société massivement interconnectée signifie qu’à un moment donné, vous intégrerez forcément un **réseau social**.</span><span class="sxs-lookup"><span data-stu-id="87d8d-105">Living in a massively-interconnected society means that, at some point in life, you become part of a **social network**.</span></span> <span data-ttu-id="87d8d-106">Nous utilisons les réseaux sociaux pour rester en contact avec nos amis, nos collègues, notre famille ou parfois pour partager notre passion avec des personnes ayant des intérêts communs.</span><span class="sxs-lookup"><span data-stu-id="87d8d-106">We use social networks to keep in touch with friends, colleagues, family, or sometimes to share our passion with people with common interests.</span></span>

<span data-ttu-id="87d8d-107">En tant qu’ingénieurs ou développeurs, vous vous êtes sans doute demandé comment ces réseaux sociaux stockent et interconnectent nos données. Vous avez peut-être aussi décidé de créer ou de concevoir vous-même un nouveau réseau social pour un marché spécifique.</span><span class="sxs-lookup"><span data-stu-id="87d8d-107">As engineers or developers, we might have wondered how do these networks store and interconnect our data, or might have even been tasked to create or architect a new social network for a specific niche market yourselves.</span></span> <span data-ttu-id="87d8d-108">C’est à ce moment que la question se pose : comment sont stockées toutes ces données ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-108">That’s when the big question arises: How is all this data stored?</span></span>

<span data-ttu-id="87d8d-109">Supposons que nous avons décidé de créer un nouveau réseau social, où nos utilisateurs peuvent publier des articles accompagnés de contenu multimédia tel que des images, des vidéos ou même de la musique.</span><span class="sxs-lookup"><span data-stu-id="87d8d-109">Let’s suppose that we are creating a new and shiny social network, where our users can post articles with related media like, pictures, videos, or even music.</span></span> <span data-ttu-id="87d8d-110">Les utilisateurs peuvent commenter les publications et attribuer des points pour créer des classements.</span><span class="sxs-lookup"><span data-stu-id="87d8d-110">Users can comment on posts and give points for ratings.</span></span> <span data-ttu-id="87d8d-111">Les utilisateurs peuvent afficher un flux de messages avec lequel ils peuvent interagir sur la page d’accueil du site Web principal.</span><span class="sxs-lookup"><span data-stu-id="87d8d-111">There will be a feed of posts that users will see and be able to interact with on the main website landing page.</span></span> <span data-ttu-id="87d8d-112">Cela ne semble pas très complexe (au début), mais par souci de simplicité, arrêtons-nous là (nous pourrions nous intéresser aux flux utilisateur personnalisés influencés par les relations, mais cela dépasse l’objectif de cet article).</span><span class="sxs-lookup"><span data-stu-id="87d8d-112">This doesn’t sound really complex (at first), but for the sake of simplicity, let’s stop there (we could delve into custom user feeds affected by relationships, but it exceeds the goal of this article).</span></span>

<span data-ttu-id="87d8d-113">Alors, comment et où stockons-nous ces données ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-113">So, how do we store this and where?</span></span>

<span data-ttu-id="87d8d-114">Beaucoup d’entre vous ont sans doute une expérience d’utilisation des bases de données SQL ou disposent au moins de connaissances de base sur la [modélisation relationnelle des données](https://en.wikipedia.org/wiki/Relational_model) et vous pourriez être tentés de commencer à concevoir quelque chose comme ceci :</span><span class="sxs-lookup"><span data-stu-id="87d8d-114">Many of you might have experience on SQL databases or at least have notion of [relational modeling of data](https://en.wikipedia.org/wiki/Relational_model) and you might be tempted to start drawing something like this:</span></span>

![Diagramme illustrant un modèle relationnel relatif](./media/social-media-apps/social-media-apps-sql.png) 

<span data-ttu-id="87d8d-116">Une structure de données tout à fait normalisée et agréable...</span><span class="sxs-lookup"><span data-stu-id="87d8d-116">A perfectly normalized and pretty data structure…</span></span> <span data-ttu-id="87d8d-117">qui n’est pas extensible.</span><span class="sxs-lookup"><span data-stu-id="87d8d-117">that doesn't scale.</span></span> 

<span data-ttu-id="87d8d-118">Ne vous méprenez pas, j’utilise des bases de données SQL depuis très longtemps, elles sont parfaites, mais comme tout modèle, pratique et plateforme logicielle, elles ne sont pas adaptées à tous les scénarios.</span><span class="sxs-lookup"><span data-stu-id="87d8d-118">Don’t get me wrong, I’ve worked with SQL databases all my life, they are great, but like every pattern, practice and software platform, it’s not perfect for every scenario.</span></span>

<span data-ttu-id="87d8d-119">Pourquoi SQL n’est-il pas le meilleur choix dans ce scénario ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-119">Why isn't SQL the best choice in this scenario?</span></span> <span data-ttu-id="87d8d-120">Examinons la structure d’une publication unique. Si je voulais afficher celle-ci dans un site web ou une application, je devrais faire une requête avec…</span><span class="sxs-lookup"><span data-stu-id="87d8d-120">Let’s look at the structure of a single post, if I wanted to show that post in a website or application, I’d have to do a query with…</span></span> <span data-ttu-id="87d8d-121">8 jointures de tables... Pour une seule publication ! À présent, imaginez un flux de publications qui se chargent et s’affichent de façon dynamique, et vous verrez peut-être où je veux en venir.</span><span class="sxs-lookup"><span data-stu-id="87d8d-121">8 table joins (!) just to show one single post, now, picture a stream of posts that dynamically load and appear on the screen and you might see where I am going.</span></span>

<span data-ttu-id="87d8d-122">Nous pourrions, bien sûr, utiliser une instance SQL volumineuse avec suffisamment de puissance pour résoudre des milliers de requêtes avec ces nombreuses jointures pour présenter notre contenu, mais pourquoi procéder ainsi alors qu’une solution plus simple existe ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-122">We could, of course, use a humongous SQL instance with enough power to solve thousands of queries with these many joins to serve our content, but truly, why would we when a simpler solution exists?</span></span>

## <a name="the-nosql-road"></a><span data-ttu-id="87d8d-123">L’utilisation de NoSQL</span><span class="sxs-lookup"><span data-stu-id="87d8d-123">The NoSQL road</span></span>
<span data-ttu-id="87d8d-124">Cet article vous explique comment modéliser les données de votre plateforme sociale avec la base de données NoSQL [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) à moindre frais tout en exploitant d’autres fonctionnalités Azure Cosmos DB, telles que [l’API Graph Gremlin](../cosmos-db/graph-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-124">This article will guide you into modeling your social platform's data with Azure's NoSQL database [Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/) in a cost-effective way while leveraging other Azure Cosmos DB features like the  [Gremlin Graph API](../cosmos-db/graph-introduction.md).</span></span> <span data-ttu-id="87d8d-125">Avec une approche [NoSQL](https://en.wikipedia.org/wiki/NoSQL), le stockage des données au format JSON et l’application de la [dénormalisation](https://en.wikipedia.org/wiki/Denormalization), notre publication si compliquée auparavant peut être transformée en un seul [document](https://en.wikipedia.org/wiki/Document-oriented_database) :</span><span class="sxs-lookup"><span data-stu-id="87d8d-125">Using a [NoSQL](https://en.wikipedia.org/wiki/NoSQL) approach, storing data in JSON format and applying [denormalization](https://en.wikipedia.org/wiki/Denormalization), our previously complicated post can be transformed into a single [Document](https://en.wikipedia.org/wiki/Document-oriented_database):</span></span>


    {
        "id":"ew12-res2-234e-544f",
        "title":"post title",
        "date":"2016-01-01",
        "body":"this is an awesome post stored on NoSQL",
        "createdBy":User,
        "images":["http://myfirstimage.png","http://mysecondimage.png"],
        "videos":[
            {"url":"http://myfirstvideo.mp4", "title":"The first video"},
            {"url":"http://mysecondvideo.mp4", "title":"The second video"}
        ],
        "audios":[
            {"url":"http://myfirstaudio.mp3", "title":"The first audio"},
            {"url":"http://mysecondaudio.mp3", "title":"The second audio"}
        ]
    }

<span data-ttu-id="87d8d-126">Et il peut être obtenu avec une seule requête, sans jointure.</span><span class="sxs-lookup"><span data-stu-id="87d8d-126">And it can be obtained with a single query, and with no joins.</span></span> <span data-ttu-id="87d8d-127">Cette approche est beaucoup plus simple et directe. Elle nécessite moins de ressources pour un meilleur résultat, ce qui est parfait du point de vue du budget.</span><span class="sxs-lookup"><span data-stu-id="87d8d-127">This is much more simple and straightforward, and, budget-wise, it requires fewer resources to achieve a better result.</span></span>

<span data-ttu-id="87d8d-128">Azure Cosmos DB s’assure que toutes les propriétés sont indexées avec son indexation automatique, qui peut même être [personnalisée](indexing-policies.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-128">Azure Cosmos DB makes sure that all the properties are indexed with its automatic indexing, which can even be [customized](indexing-policies.md).</span></span> <span data-ttu-id="87d8d-129">L’approche sans schéma nous permet de stocker des documents avec des structures différentes et dynamiques. Peut-être que demain nous voudrons avoir des publications avec une liste de catégories ou des hashtags associés. Cosmos DB gérera les nouveaux documents avec les attributs ajoutés sans aucun travail supplémentaire de notre part.</span><span class="sxs-lookup"><span data-stu-id="87d8d-129">The schema-free approach lets us store Documents with different and dynamic structures, maybe tomorrow we want posts to have a list of categories or hashtags associated with them, Cosmos DB will handle the new Documents with the added attributes with no extra work required by us.</span></span>

<span data-ttu-id="87d8d-130">Les commentaires sur une publication peuvent être traités comme n’importe quelle autre publication avec une propriété parente (cela simplifie le mappage d’objets).</span><span class="sxs-lookup"><span data-stu-id="87d8d-130">Comments on a post can be treated as just other posts with a parent property (this simplifies our object mapping).</span></span> 

    {
        "id":"1234-asd3-54ts-199a",
        "title":"Awesome post!",
        "date":"2016-01-02",
        "createdBy":User2,
        "parent":"ew12-res2-234e-544f"
    }

    {
        "id":"asd2-fee4-23gc-jh67",
        "title":"Ditto!",
        "date":"2016-01-03",
        "createdBy":User3,
        "parent":"ew12-res2-234e-544f"
    }

<span data-ttu-id="87d8d-131">Et toutes les interactions sociales peuvent être stockées sur un objet distinct en tant que compteurs :</span><span class="sxs-lookup"><span data-stu-id="87d8d-131">And all social interactions can be stored on a separate object as counters:</span></span>

    {
        "id":"dfe3-thf5-232s-dse4",
        "post":"ew12-res2-234e-544f",
        "comments":2,
        "likes":10,
        "points":200
    }

<span data-ttu-id="87d8d-132">La création de flux consiste simplement à créer des documents qui peuvent contenir une liste des ID des publications avec un ordre de pertinence donné :</span><span class="sxs-lookup"><span data-stu-id="87d8d-132">Creating feeds is just a matter of creating documents that can hold a list of post ids with a given relevance order:</span></span>

    [
        {"relevance":9, "post":"ew12-res2-234e-544f"},
        {"relevance":8, "post":"fer7-mnb6-fgh9-2344"},
        {"relevance":7, "post":"w34r-qeg6-ref6-8565"}
    ]

<span data-ttu-id="87d8d-133">Nous pourrions avoir un flux « récent » avec les publications classées par date de création, un flux « populaire » regroupant les publications ayant obtenu le plus grand nombre de J’aime dans les dernières 24 heures, nous pourrions même implémenter un flux personnalisé pour chaque utilisateur basé sur la logique, comme ses abonnés et ses centres d’intérêt, et cela sera toujours considéré comme une liste de publications.</span><span class="sxs-lookup"><span data-stu-id="87d8d-133">We could have a “latest” stream with posts ordered by creation date, a “hottest” stream with those posts with more likes in the last 24 hours, we could even implement a custom stream for each user based on logic like followers and interests, and it would still be a list of posts.</span></span> <span data-ttu-id="87d8d-134">Le plus compliqué est de créer ces listes, mais les performances de lecture ne sont pas affectées.</span><span class="sxs-lookup"><span data-stu-id="87d8d-134">It’s a matter of how to build these lists, but the reading performance remains unhindered.</span></span> <span data-ttu-id="87d8d-135">Une fois que nous avons obtenu l’une de ces listes, nous émettons une requête unique à Cosmos DB avec l’[opérateur IN](documentdb-sql-query.md#WhereClause) pour obtenir des pages de publications simultanément.</span><span class="sxs-lookup"><span data-stu-id="87d8d-135">Once we acquire one of these lists, we issue a single query to Cosmos DB using the [IN operator](documentdb-sql-query.md#WhereClause) to obtain pages of posts at a time.</span></span>

<span data-ttu-id="87d8d-136">Les flux de commentaires peuvent être créés à l’aide des processus d’arrière-plan d’[Azure App Services](https://azure.microsoft.com/services/app-service/) : [Webjobs](../app-service-web/web-sites-create-web-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-136">The feed streams could be built using [Azure App Services’](https://azure.microsoft.com/services/app-service/) background processes: [Webjobs](../app-service-web/web-sites-create-web-jobs.md).</span></span> <span data-ttu-id="87d8d-137">Lorsqu’une publication est créée, le traitement en arrière-plan peut être déclenché à l’aide de [files d’attente](../storage/queues/storage-dotnet-how-to-use-queues.md) de [Stockage Azure](https://azure.microsoft.com/services/storage/) et de tâches webjobs déclenchées avec le [Kit de développement logiciel (SDK) Azure WebJobs](../app-service-web/websites-dotnet-webjobs-sdk.md), implémentant la propagation ultérieure dans les flux basée sur notre propre logique personnalisée.</span><span class="sxs-lookup"><span data-stu-id="87d8d-137">Once a post is created, background processing can be triggered by using [Azure Storage](https://azure.microsoft.com/services/storage/) [Queues](../storage/queues/storage-dotnet-how-to-use-queues.md) and Webjobs triggered using the [Azure Webjobs SDK](../app-service-web/websites-dotnet-webjobs-sdk.md), implementing the post propagation inside streams based on our own custom logic.</span></span> 

<span data-ttu-id="87d8d-138">Les points et les J’aime attribués à une publication peuvent être traités de manière différée à l’aide de cette même technique pour créer un environnement cohérent.</span><span class="sxs-lookup"><span data-stu-id="87d8d-138">Points and likes over a post can be processed in a deferred manner using this same technique to create an eventually consistent environment.</span></span>

<span data-ttu-id="87d8d-139">Cela est plus compliqué pour les abonnés.</span><span class="sxs-lookup"><span data-stu-id="87d8d-139">Followers are trickier.</span></span> <span data-ttu-id="87d8d-140">Cosmos DB a une taille de document limite, donc la lecture ou l’écriture de documents volumineux peuvent avoir une incidence sur la scalabilité de votre application.</span><span class="sxs-lookup"><span data-stu-id="87d8d-140">Cosmos DB has a maximum document size limit, and reading/writing large documents can impact the scalability of your application.</span></span> <span data-ttu-id="87d8d-141">Vous pouvez envisager de stocker les abonnés dans un document avec cette structure :</span><span class="sxs-lookup"><span data-stu-id="87d8d-141">So you may think about storing followers as a document with this structure:</span></span>

    {
        "id":"234d-sd23-rrf2-552d",
        "followersOf": "dse4-qwe2-ert4-aad2",
        "followers":[
            "ewr5-232d-tyrg-iuo2",
            "qejh-2345-sdf1-ytg5",
            //...
            "uie0-4tyg-3456-rwjh"
        ]
    }

<span data-ttu-id="87d8d-142">Cela peut fonctionner pour un utilisateur avec quelques milliers d’abonnés, mais si des célébrités rejoignent nos rangs, cette opération donnera lieu à un document volumineux et atteindra forcément la limite de taille du document.</span><span class="sxs-lookup"><span data-stu-id="87d8d-142">This might work for a user with a few thousands followers, but if some celebrity joins our ranks, this approach will lead to a large document size, and might eventually hit the document size cap.</span></span>

<span data-ttu-id="87d8d-143">Pour résoudre ce problème, nous pouvons utiliser une approche mixte.</span><span class="sxs-lookup"><span data-stu-id="87d8d-143">To solve this, we can use a mixed approach.</span></span> <span data-ttu-id="87d8d-144">Dans le cadre du document Statistiques de l’utilisateur, nous pouvons stocker le nombre d’abonnés :</span><span class="sxs-lookup"><span data-stu-id="87d8d-144">As part of the User Statistics document we can store the number of followers:</span></span>

    {
        "id":"234d-sd23-rrf2-552d",
        "user": "dse4-qwe2-ert4-aad2",
        "followers":55230,
        "totalPosts":452,
        "totalPoints":11342
    }

<span data-ttu-id="87d8d-145">Et le graphe réel d’abonnés peut être stocké à l’aide de [l’API Graph Gremlin](../cosmos-db/graph-introduction.md) d’Azure Cosmos DB pour créer des [sommets](http://mathworld.wolfram.com/GraphVertex.html) pour chaque utilisateur et des [arêtes](http://mathworld.wolfram.com/GraphEdge.html) qui gèrent les relations de type « A-suit-B ».</span><span class="sxs-lookup"><span data-stu-id="87d8d-145">And the actual graph of followers can be stored using Azure Cosmos DB [Gremlin Graph API](../cosmos-db/graph-introduction.md), to create [vertexes](http://mathworld.wolfram.com/GraphVertex.html) for each user and [edges](http://mathworld.wolfram.com/GraphEdge.html) that maintain the "A-follows-B" relationships.</span></span> <span data-ttu-id="87d8d-146">L’API Graph vous permet non seulement d’obtenir les abonnés d’un utilisateur donné, mais également de créer des requêtes plus complexes pour même suggérer des personnes en commun.</span><span class="sxs-lookup"><span data-stu-id="87d8d-146">The Graph API let's you not only obtain the followers of a certain user but create more complex queries to even suggest people in common.</span></span> <span data-ttu-id="87d8d-147">Si nous ajoutons au graphe les catégories de contenus que les personnes aiment ou apprécient, nous pouvons commencer à tisser des expériences qui incluent la détection de contenu intelligente, la suggestion de contenu aimé par les personnes que nous suivons ou la recherche de personnes avec lesquelles nous pourrions avoir beaucoup en commun.</span><span class="sxs-lookup"><span data-stu-id="87d8d-147">If we add to the graph the Content Categories that people like or enjoy, we can start weaving experiences that include smart content discovery, suggesting content that those we follow like, or finding people with whom we might have much in common.</span></span>

<span data-ttu-id="87d8d-148">Le document sur les statistiques utilisateur peut toujours servir à créer des cartes dans l’interface utilisateur ou des préversions de profil rapides.</span><span class="sxs-lookup"><span data-stu-id="87d8d-148">The User Statistics document can still be used to create cards in the UI or quick profile previews.</span></span>

## <a name="the-ladder-pattern-and-data-duplication"></a><span data-ttu-id="87d8d-149">Duplication des données et modèle « Échelle »</span><span class="sxs-lookup"><span data-stu-id="87d8d-149">The “Ladder” pattern and data duplication</span></span>
<span data-ttu-id="87d8d-150">Comme vous l’avez peut-être remarqué dans le document JSON qui fait référence à une publication, il existe plusieurs occurrences d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="87d8d-150">As you might have noticed in the JSON document that references a post, there are multiple occurrences of a user.</span></span> <span data-ttu-id="87d8d-151">Et vous auriez raison. Cela signifie que les informations qui représentent un utilisateur peuvent être présentes à plusieurs endroits, en raison de la dénormalisation.</span><span class="sxs-lookup"><span data-stu-id="87d8d-151">And you’d have guessed right, this means that the information that represents a user, given this denormalization, might be present in more than one place.</span></span>

<span data-ttu-id="87d8d-152">Pour obtenir des requêtes plus rapides, nous engendrons la duplication des données.</span><span class="sxs-lookup"><span data-stu-id="87d8d-152">In order to allow for faster queries, we incur data duplication.</span></span> <span data-ttu-id="87d8d-153">Le problème de cet effet secondaire est que si les données d’un utilisateur changent, nous devrons trouver toutes les activités auxquelles il a participé et les mettre toutes à jour.</span><span class="sxs-lookup"><span data-stu-id="87d8d-153">The problem with this side-effect is that if by some action, a user’s data changes, we need to find all the activities he ever did and update them all.</span></span> <span data-ttu-id="87d8d-154">Cela ne semble pas très pratique, n’est-ce pas ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-154">Doesn’t sound very practical, right?</span></span>

<span data-ttu-id="87d8d-155">Nous allons le résoudre en identifiant les attributs clés d’un utilisateur que nous affichons dans notre application pour chaque activité.</span><span class="sxs-lookup"><span data-stu-id="87d8d-155">We are going to solve it by identifying the Key attributes of a user that we show in our application for each activity.</span></span> <span data-ttu-id="87d8d-156">Si nous affichons visuellement une publication dans notre application et n’affichons que le nom et la photo du créateur, pourquoi stocker toutes les données de l’utilisateur dans l’attribut « createdBy » ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-156">If we visually show a post in our application and show just the creator’s name and picture, why store all of the user’s data in the “createdBy” attribute?</span></span> <span data-ttu-id="87d8d-157">Si, pour chaque commentaire, nous affichons uniquement la photo de l’utilisateur, nous n’avons pas vraiment besoin des autres informations le concernant.</span><span class="sxs-lookup"><span data-stu-id="87d8d-157">If for each comment we just show the user’s picture, we don’t really need the rest of his information.</span></span> <span data-ttu-id="87d8d-158">C’est là que ce que j’appelle le « modèle Échelle » entre en jeu.</span><span class="sxs-lookup"><span data-stu-id="87d8d-158">That’s where something I call the “Ladder pattern” comes into play.</span></span>

<span data-ttu-id="87d8d-159">Prenons comme exemple les informations utilisateur :</span><span class="sxs-lookup"><span data-stu-id="87d8d-159">Let’s take user information as an example:</span></span>

    {
        "id":"dse4-qwe2-ert4-aad2",
        "name":"John",
        "surname":"Doe",
        "address":"742 Evergreen Terrace",
        "birthday":"1983-05-07",
        "email":"john@doe.com",
        "twitterHandle":"@john",
        "username":"johndoe",
        "password":"some_encrypted_phrase",
        "totalPoints":100,
        "totalPosts":24
    }

<span data-ttu-id="87d8d-160">En examinant ces informations, nous pouvons rapidement détecter les informations essentielles et celles qui ne le sont pas, créant ainsi une « échelle » :</span><span class="sxs-lookup"><span data-stu-id="87d8d-160">By looking at this information, we can quickly detect which is critical information and which isn’t, thus creating a “Ladder”:</span></span>

![Diagramme d’un modèle d’échelle](./media/social-media-apps/social-media-apps-ladder.png)

<span data-ttu-id="87d8d-162">L’étape la plus petite est appelée UserChunk, l’information minimale qui identifie un utilisateur et qui est utilisée pour la duplication des données.</span><span class="sxs-lookup"><span data-stu-id="87d8d-162">The smallest step is called a UserChunk, the minimal piece of information that identifies a user and it’s used for data duplication.</span></span> <span data-ttu-id="87d8d-163">En limitant la taille des données dupliquées uniquement aux informations que nous allons « afficher », nous réduisons la possibilité de mises à jour massives.</span><span class="sxs-lookup"><span data-stu-id="87d8d-163">By reducing the size of the duplicated data to only the information we will “show”, we reduce the possibility of massive updates.</span></span>

<span data-ttu-id="87d8d-164">L’étape intermédiaire est appelée Utilisateur. Ce sont les données complètes qui seront employées pour les requêtes qui dépendent le plus des performances sur Cosmos DB, les données les plus consultées et les plus essentielles.</span><span class="sxs-lookup"><span data-stu-id="87d8d-164">The middle step is called the user, it’s the full data that will be used on most performance-dependent queries on Cosmos DB, the most accessed and critical.</span></span> <span data-ttu-id="87d8d-165">Elles incluent les informations représentées par un UserChunk.</span><span class="sxs-lookup"><span data-stu-id="87d8d-165">It includes the information represented by a UserChunk.</span></span>

<span data-ttu-id="87d8d-166">L’étape la plus importante est appelée Utilisateur étendu.</span><span class="sxs-lookup"><span data-stu-id="87d8d-166">The largest is the Extended User.</span></span> <span data-ttu-id="87d8d-167">Elle inclut toutes les informations utilisateur essentielles, ainsi que d’autres données qui ne nécessitent pas vraiment d’être lues rapidement ou dont l’utilisation est finale (par exemple, le processus de connexion).</span><span class="sxs-lookup"><span data-stu-id="87d8d-167">It includes all the critical user information plus other data that doesn’t really require to be read quickly or it’s usage is eventual (like the login process).</span></span> <span data-ttu-id="87d8d-168">Ces données peuvent être stockées en dehors de Cosmos DB, dans Azure SQL Database ou des tables Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="87d8d-168">This data can be stored outside of Cosmos DB, in Azure SQL Database or Azure Storage Tables.</span></span>

<span data-ttu-id="87d8d-169">Pourquoi fractionner l’utilisateur et même stocker ces informations dans des endroits différents ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-169">Why would we split the user and even store this information in different places?</span></span> <span data-ttu-id="87d8d-170">Parce que du point de vue du niveau de performance, plus les documents sont volumineux, plus les requêtes sont coûteuses.</span><span class="sxs-lookup"><span data-stu-id="87d8d-170">Because from a performance point of view, the bigger the documents, the costlier the queries.</span></span> <span data-ttu-id="87d8d-171">Maintenez les documents à une taille minimale, avec les informations correctes pour exécuter toutes vos requêtes dépendantes des performances pour votre réseau social, et stockez les informations supplémentaires pour des scénarios éventuels comme les modifications de profil complètes, les connexions, et même l’exploration des données pour l’analyse de l’utilisation et les initiatives de Big Data.</span><span class="sxs-lookup"><span data-stu-id="87d8d-171">Keep documents slim, with the right information to do all your performance-dependent queries for your social network, and store the other extra information for eventual scenarios like, full profile edits, logins, even data mining for usage analytics and Big Data initiatives.</span></span> <span data-ttu-id="87d8d-172">Peu importe que la collecte de données pour l’analyse soit plus lente parce qu’elle est exécutée sur Azure SQL Database, ce qui nous importe c’est que nos utilisateurs bénéficient d’une expérience rapide et compacte.</span><span class="sxs-lookup"><span data-stu-id="87d8d-172">We really don’t care if the data gathering for data mining is slower because it’s running on Azure SQL Database, we do have concern though that our users have a fast and slim experience.</span></span> <span data-ttu-id="87d8d-173">Un utilisateur, stocké sur Cosmos DB, ressemblerait à ceci :</span><span class="sxs-lookup"><span data-stu-id="87d8d-173">A user, stored on Cosmos DB, would look like this:</span></span>

    {
        "id":"dse4-qwe2-ert4-aad2",
        "name":"John",
        "surname":"Doe",
        "username":"johndoe"
        "email":"john@doe.com",
        "twitterHandle":"@john"
    }

<span data-ttu-id="87d8d-174">Et une publication ressemblerait à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="87d8d-174">And a Post would look like:</span></span>

    {
        "id":"1234-asd3-54ts-199a",
        "title":"Awesome post!",
        "date":"2016-01-02",
        "createdBy":{
            "id":"dse4-qwe2-ert4-aad2",
            "username":"johndoe"
        }
    }

<span data-ttu-id="87d8d-175">Et en cas de modification où l’un des attributs du segment est affecté, il est facile de trouver les documents affectés à l’aide de requêtes qui pointent vers les attributs indexés (SELECT * FROM posts p WHERE p.createdBy.id == “edited_user_id”), puis de mettre les segments à jour.</span><span class="sxs-lookup"><span data-stu-id="87d8d-175">And when an edit arises where one of the attributes of the chunk is affected, it’s easy to find the affected documents by using queries that point to the indexed attributes (SELECT * FROM posts p WHERE p.createdBy.id == “edited_user_id”) and then updating the chunks.</span></span>

## <a name="the-search-box"></a><span data-ttu-id="87d8d-176">La zone de recherche</span><span class="sxs-lookup"><span data-stu-id="87d8d-176">The search box</span></span>
<span data-ttu-id="87d8d-177">Heureusement, les utilisateurs génèrent beaucoup de contenu.</span><span class="sxs-lookup"><span data-stu-id="87d8d-177">Users will generate, luckily, a lot of content.</span></span> <span data-ttu-id="87d8d-178">Et nous devrions être en mesure de fournir la possibilité de rechercher et de trouver du contenu qui n’est peut-être pas directement dans leur flux de contenu, parce qu’ils ne suivent pas les créateurs ou qu’ils essayent simplement de trouver une publication créée il y a 6 mois.</span><span class="sxs-lookup"><span data-stu-id="87d8d-178">And we should be able to provide the ability to search and find content that might not be directly in their content streams, maybe because we don’t follow the creators, or maybe we are just trying to find that old post we did 6 months ago.</span></span>

<span data-ttu-id="87d8d-179">Heureusement, et grâce à l’utilisation d’Azure Cosmos DB, nous pouvons facilement implémenter un moteur de recherche à l’aide de [Recherche Azure](https://azure.microsoft.com/services/search/) en quelques minutes et sans taper une seule ligne de code (à part le processus de recherche et l’interface utilisateur, bien entendu).</span><span class="sxs-lookup"><span data-stu-id="87d8d-179">Thankfully, and because we are using Azure Cosmos DB, we can easily implement a search engine using [Azure Search](https://azure.microsoft.com/services/search/) in a couple of minutes and without typing a single line of code (other than obviously, the search process and UI).</span></span>

<span data-ttu-id="87d8d-180">Pourquoi est-ce si facile ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-180">Why is this so easy?</span></span>

<span data-ttu-id="87d8d-181">Le service Recherche Azure implémente des [indexeurs](https://msdn.microsoft.com/library/azure/dn946891.aspx). Ce sont des processus d’arrière-plan intégrés dans vos référentiels de données et qui ajoutent, mettent à jour ou suppriment automatiquement vos objets dans les index.</span><span class="sxs-lookup"><span data-stu-id="87d8d-181">Azure Search implements what they call [Indexers](https://msdn.microsoft.com/library/azure/dn946891.aspx), background processes that hook in your data repositories and automagically add, update or remove your objects in the indexes.</span></span> <span data-ttu-id="87d8d-182">Ils prennent en charge les [indexeurs Azure SQL Database](https://blogs.msdn.microsoft.com/kaevans/2015/03/06/indexing-azure-sql-database-with-azure-search/), les [indexeurs d’objets blob Azure](../search/search-howto-indexing-azure-blob-storage.md) et les [indexeurs Azure Cosmos DB](../search/search-howto-index-documentdb.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-182">They support an [Azure SQL Database indexers](https://blogs.msdn.microsoft.com/kaevans/2015/03/06/indexing-azure-sql-database-with-azure-search/), [Azure Blobs indexers](../search/search-howto-indexing-azure-blob-storage.md) and thankfully, [Azure Cosmos DB indexers](../search/search-howto-index-documentdb.md).</span></span> <span data-ttu-id="87d8d-183">Le passage des informations de Cosmos DB à Recherche Azure est simple, car ils stockent tous les deux les informations au format JSON. Nous devons simplement [créer notre index](../search/search-create-index-portal.md) et mapper les attributs de nos documents à indexer et voilà, en quelques minutes (selon la taille des données), tout notre contenu sera disponible à la recherche, grâce à la meilleure solution Search-as-a-Service de l’infrastructure cloud.</span><span class="sxs-lookup"><span data-stu-id="87d8d-183">The transition of information from Cosmos DB to Azure Search is straightforward, as both store information in JSON format, we just need to [create our Index](../search/search-create-index-portal.md) and map which attributes from our Documents we want indexed and that’s it, in a matter of minutes (depends on the size of our data), all our content will be available to be searched upon, by the best Search-as-a-Service solution in cloud infrastructure.</span></span> 

<span data-ttu-id="87d8d-184">Pour plus d’informations sur Recherche Azure, vous pouvez consulter le document [Hitchhiker’s Guide to Search](https://blogs.msdn.microsoft.com/mvpawardprogram/2016/02/02/a-hitchhikers-guide-to-search/).</span><span class="sxs-lookup"><span data-stu-id="87d8d-184">For more information about Azure Search, you can visit the [Hitchhiker’s Guide to Search](https://blogs.msdn.microsoft.com/mvpawardprogram/2016/02/02/a-hitchhikers-guide-to-search/).</span></span>

## <a name="the-underlying-knowledge"></a><span data-ttu-id="87d8d-185">Les connaissances sous-jacentes</span><span class="sxs-lookup"><span data-stu-id="87d8d-185">The underlying knowledge</span></span>
<span data-ttu-id="87d8d-186">Après avoir stocké ce contenu dont la taille augmente chaque jour, nous pourrions penser : que puis-je faire avec toutes ces informations de mes utilisateurs ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-186">After storing all this content that grows and grows every day, we might find ourselves thinking: What can I do with all this stream of information from my users?</span></span>

<span data-ttu-id="87d8d-187">La réponse est simple : exploitez-les.</span><span class="sxs-lookup"><span data-stu-id="87d8d-187">The answer is straightforward: Put it to work and learn from it.</span></span>

<span data-ttu-id="87d8d-188">Mais, que pouvons-nous apprendre ?</span><span class="sxs-lookup"><span data-stu-id="87d8d-188">But, what can we learn?</span></span> <span data-ttu-id="87d8d-189">Quelques exemples simples incluent l’ [analyse des sentiments](https://en.wikipedia.org/wiki/Sentiment_analysis), les recommandations de contenu basées sur les préférences d’un utilisateur ou même un modérateur de contenu automatique qui garantit que tout le contenu publié par notre réseau social est adapté à toute la famille.</span><span class="sxs-lookup"><span data-stu-id="87d8d-189">A few easy examples include [sentiment analysis](https://en.wikipedia.org/wiki/Sentiment_analysis), content recommendations based on a user’s preferences or even an automated content moderator that ensures that all the content published by our social network is safe for the family.</span></span>

<span data-ttu-id="87d8d-190">Maintenant que j’ai votre attention, vous pensez sans doute qu’il vous faut un doctorat en sciences mathématiques pour extraire ces modèles et ces informations de fichiers et de bases de données simples, mais vous avez tort.</span><span class="sxs-lookup"><span data-stu-id="87d8d-190">Now that I got you hooked, you’ll probably think you need some PhD in math science to extract these patterns and information out of simple databases and files, but you’d be wrong.</span></span>

<span data-ttu-id="87d8d-191">[Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/), composant de [Cortana Intelligence Suite](https://www.microsoft.com/en/server-cloud/cortana-analytics-suite/overview.aspx), est un service cloud entièrement géré qui vous permet de créer des workflows à l’aide d’algorithmes dans une simple interface de type glisser-déposer, de coder vos propres algorithmes en [R](https://en.wikipedia.org/wiki/R_\(programming_language\)) ou d’utiliser certaines des API déjà créées et prêtes à l’utilisation, comme : [Analyse de texte](https://gallery.cortanaanalytics.com/MachineLearningAPI/Text-Analytics-2), [Modérateur de contenu](https://www.microsoft.com/moderator) ou [Recommandations](https://gallery.cortanaanalytics.com/MachineLearningAPI/Recommendations-2).</span><span class="sxs-lookup"><span data-stu-id="87d8d-191">[Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/), part of the [Cortana Intelligence Suite](https://www.microsoft.com/en/server-cloud/cortana-analytics-suite/overview.aspx), is the a fully managed cloud service that lets you create workflows using algorithms in a simple drag-and-drop interface, code your own algorithms in [R](https://en.wikipedia.org/wiki/R_\(programming_language\)) or use some of the already-built and ready to use APIs such as: [Text Analytics](https://gallery.cortanaanalytics.com/MachineLearningAPI/Text-Analytics-2),  [Content Moderator](https://www.microsoft.com/moderator) or [Recommendations](https://gallery.cortanaanalytics.com/MachineLearningAPI/Recommendations-2).</span></span>

<span data-ttu-id="87d8d-192">Pour réaliser l’un de ces scénarios d’apprentissage, nous pouvons utiliser [Azure Data Lake](https://azure.microsoft.com/services/data-lake-store/) pour ingérer les informations de différentes sources et utiliser [U-SQL](https://azure.microsoft.com/documentation/videos/data-lake-u-sql-query-execution/) pour traiter les informations et générer une sortie qui peut être traitée par Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="87d8d-192">To achieve any of these Machine Learning scenarios, we can use [Azure Data Lake](https://azure.microsoft.com/services/data-lake-store/) to ingest the information from different sources, and use [U-SQL](https://azure.microsoft.com/documentation/videos/data-lake-u-sql-query-execution/) to process the information and generate an output that can be processed by Azure Machine Learning.</span></span>

<span data-ttu-id="87d8d-193">Une autre possibilité consiste à utiliser [Microsoft Cognitive Services](https://www.microsoft.com/cognitive-services) pour analyser le contenu de nos utilisateurs ; non seulement nous les comprenons mieux (en analysant ce qu’ils écrivent avec l’[API d’analyse de texte](https://www.microsoft.com/cognitive-services/en-us/text-analytics-api)), mais nous pouvons également détecter le contenu indésirable ou réservé aux adultes et agir en conséquence avec l’[API Vision par ordinateur](https://www.microsoft.com/cognitive-services/en-us/computer-vision-api).</span><span class="sxs-lookup"><span data-stu-id="87d8d-193">Another available option is to use [Microsoft Cognitive Services](https://www.microsoft.com/cognitive-services) to analyze our users content; not only can we understand them better (through analyzing what they write with [Text Analytics API](https://www.microsoft.com/cognitive-services/en-us/text-analytics-api)) , but we could also detect unwanted or mature content and act accordingly with [Computer Vision API](https://www.microsoft.com/cognitive-services/en-us/computer-vision-api).</span></span> <span data-ttu-id="87d8d-194">Cognitive Services inclut un grand nombre de solutions prêtes à l’emploi ne nécessitant aucune connaissance Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="87d8d-194">Cognitive Services include a lot of out-of-the-box solutions that don't require any kind of Machine Learning knowledge to use.</span></span>

## <a name="a-planet-scale-social-experience"></a><span data-ttu-id="87d8d-195">Une expérience sociale à l’échelle de la planète</span><span class="sxs-lookup"><span data-stu-id="87d8d-195">A planet-scale social experience</span></span>
<span data-ttu-id="87d8d-196">Il existe un dernier sujet tout aussi important à traiter : **l’évolutivité**.</span><span class="sxs-lookup"><span data-stu-id="87d8d-196">There is a last, but not least, important topic I must address: **scalability**.</span></span> <span data-ttu-id="87d8d-197">Lors de la conception d’une architecture, il est essentiel que chaque composant puisse évoluer de manière autonome, soit parce que nous devons traiter plus de données ou que nous voulons une plus grande couverture géographique (voire les deux).</span><span class="sxs-lookup"><span data-stu-id="87d8d-197">When designing an architecture it's crucial that each component can scale on its own, either because we need to process more data or because we want to have a bigger geographical coverage (or both!).</span></span> <span data-ttu-id="87d8d-198">Heureusement, Cosmos DB offre une **solution clé en main** pour gérer une tâche aussi complexe.</span><span class="sxs-lookup"><span data-stu-id="87d8d-198">Thankfully, achieving such a complex task is a **turnkey experience** with Cosmos DB.</span></span>

<span data-ttu-id="87d8d-199">Cosmos DB prend en charge nativement le [partitionnement dynamique](https://azure.microsoft.com/blog/10-things-to-know-about-documentdb-partitioned-collections/) en créant automatiquement des partitions basées sur une **clé de partition** donnée (définie comme l’un des attributs dans vos documents).</span><span class="sxs-lookup"><span data-stu-id="87d8d-199">Cosmos DB supports [dynamic partitioning](https://azure.microsoft.com/blog/10-things-to-know-about-documentdb-partitioned-collections/) out-of-the-box by automatically creating partitions based on a given **partition key** (defined as one of the attributes in your documents).</span></span> <span data-ttu-id="87d8d-200">La définition de la clé de partition correcte doit être effectuée au moment de la conception et en tenant compte des [meilleures pratiques](../cosmos-db/partition-data.md#designing-for-partitioning) disponibles ; dans le cas d’une expérience sociale, votre stratégie de partitionnement doit être alignée avec la manière dont vous interrogez (des lectures dans la même partition sont souhaitables) et écrivez (évitez les « zones réactives » en répartissant les écritures sur plusieurs partitions).</span><span class="sxs-lookup"><span data-stu-id="87d8d-200">Defining the correct partition key must be done at design time and keeping in mind the [best practices](../cosmos-db/partition-data.md#designing-for-partitioning) available; in the case of a social experience, your partitioning strategy must be aligned with the way you query (reads within the same partition are desirable) and write (avoid "hot spots" by spreading writes on multiple partitions).</span></span> <span data-ttu-id="87d8d-201">Options disponibles : partitions basées sur une clé temporaire (jour/mois/semaine), par catégorie de contenu, par région géographique, par utilisateur ; tout cela dépend de la façon dont vous allez interroger les données et les présenter dans votre expérience sociale.</span><span class="sxs-lookup"><span data-stu-id="87d8d-201">Some options are: partitions based on a temporal key (day/month/week), by content category, by geographical region, by user; it all really depends on how you will query the data and show it in your social experience.</span></span> 

<span data-ttu-id="87d8d-202">Cosmos DB exécute vos requêtes (y compris les [agrégats](https://azure.microsoft.com/blog/planet-scale-aggregates-with-azure-documentdb/)) de façon transparente sur toutes vos partitions, et vous n’avez pas besoin d’ajouter de logique à mesure que vos données augmentent.</span><span class="sxs-lookup"><span data-stu-id="87d8d-202">One interesting point worth mentioning is that Cosmos DB will run your queries (including [aggregates](https://azure.microsoft.com/blog/planet-scale-aggregates-with-azure-documentdb/)) across all your partitions transparently, you don't need to add any logic as your data grows.</span></span>

<span data-ttu-id="87d8d-203">Avec le temps, le trafic et la consommation des ressources augmenteront (mesurés en unité de requête ou [RU](request-units.md)).</span><span class="sxs-lookup"><span data-stu-id="87d8d-203">With time, you will eventually grow in traffic and your resource consumption (measured in [RUs](request-units.md), or Request Units) will increase.</span></span> <span data-ttu-id="87d8d-204">Vous lirez et écrirez plus fréquemment à mesure que votre base d’utilisateurs se développe et ces utilisateurs créeront et liront plus de contenus ; la possibilité de **mise à l’échelle de votre débit** est donc indispensable.</span><span class="sxs-lookup"><span data-stu-id="87d8d-204">You will read and write more frequently as your userbase grows and they will start creating and reading more content; the ability of **scaling your throughput** is vital.</span></span> <span data-ttu-id="87d8d-205">Augmenter vos RU est très facile : nous pouvons le faire en quelques clics sur le portail Azure ou en [émettant des commandes via l’API](https://docs.microsoft.com/rest/api/documentdb/replace-an-offer).</span><span class="sxs-lookup"><span data-stu-id="87d8d-205">Increasing our RUs is very easy, we can do it with a few clicks on the Azure Portal or by [issuing commands through the API](https://docs.microsoft.com/rest/api/documentdb/replace-an-offer).</span></span>

![Mise à l’échelle et définition d’une clé de partition](./media/social-media-apps/social-media-apps-scaling.png)

<span data-ttu-id="87d8d-207">Imaginez que les choses continuent de s’améliorer et que des utilisateurs d’une autre région, d’un autre pays ou d’un autre continent découvrent votre plateforme et l’utilisent ? Quelle bonne surprise !</span><span class="sxs-lookup"><span data-stu-id="87d8d-207">What happens if things keep getting better and users from another region, country or continent, notice your platform and start using it, what a great surprise!</span></span>

<span data-ttu-id="87d8d-208">Mais vous constatez rapidement que leur expérience avec votre plate-forme n’est pas optimale car ils sont si éloignés de votre région opérationnelle que la latence est catastrophique et risquerait de les dissuader d’utiliser votre plate-forme.</span><span class="sxs-lookup"><span data-stu-id="87d8d-208">But wait... you soon realize their experience with your platform is not optimal; they are so far away from your operational region that the latency is terrible, and you obviously don't want them to quit.</span></span> <span data-ttu-id="87d8d-209">Mais il existe un moyen facile de **développer votre visibilité globale** !</span><span class="sxs-lookup"><span data-stu-id="87d8d-209">If only there was an easy way of **extending your global reach**... but there is!</span></span>

<span data-ttu-id="87d8d-210">Cosmos DB vous permet de [répliquer vos données globalement](../cosmos-db/tutorial-global-distribution-documentdb.md) et de manière transparente en quelques clics, mais aussi de choisir automatiquement parmi les régions disponibles à partir de votre [code client](../cosmos-db/tutorial-global-distribution-documentdb.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-210">Cosmos DB lets you [replicate your data globally](../cosmos-db/tutorial-global-distribution-documentdb.md) and transparently with a couple of clicks and automatically select among the available regions from your [client code](../cosmos-db/tutorial-global-distribution-documentdb.md).</span></span> <span data-ttu-id="87d8d-211">Cela signifie également que vous pouvez avoir [plusieurs régions de basculement](regional-failover.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-211">This also means that you can have [multiple failover regions](regional-failover.md).</span></span> 

<span data-ttu-id="87d8d-212">Lorsque vous répliquez vos données globalement, vous devez vous assurer que vos clients peuvent en tirer parti.</span><span class="sxs-lookup"><span data-stu-id="87d8d-212">When you replicate your data globally, you need to make sure that your clients can take advantage of it.</span></span> <span data-ttu-id="87d8d-213">Si vous utilisez un serveur web frontal ou accédez aux API à partir de clients mobiles, vous pouvez déployer [Azure Traffic Manager](https://azure.microsoft.com/services/traffic-manager/) et cloner votre Azure App Service sur toutes les régions de votre choix en utilisant une [configuration des performances](../app-service-web/web-sites-traffic-manager.md) pour prendre en charge votre couverture étendue globale.</span><span class="sxs-lookup"><span data-stu-id="87d8d-213">If you are using a web frontend or accesing APIs from mobile clients, you can deploy [Azure Traffic Manager](https://azure.microsoft.com/services/traffic-manager/) and clone your Azure App Service on all the desired regions, using a [Performance configuration](../app-service-web/web-sites-traffic-manager.md) to support your extended global coverage.</span></span> <span data-ttu-id="87d8d-214">Quand vos clients accèdent à votre serveur frontal ou API, ils sont redirigés vers l’instance App Service la plus proche qui, à son tour, se connecte au réplica Cosmos DB local.</span><span class="sxs-lookup"><span data-stu-id="87d8d-214">When your clients access your frontend or APIs, they will be routed to the closest App Service, which in turn, will connect to the local Cosmos DB replica.</span></span>

![Ajout d’une couverture globale à votre plate-forme sociale](./media/social-media-apps/social-media-apps-global-replicate.png)

## <a name="conclusion"></a><span data-ttu-id="87d8d-216">Conclusion</span><span class="sxs-lookup"><span data-stu-id="87d8d-216">Conclusion</span></span>
<span data-ttu-id="87d8d-217">Cet article tente de vous éclairer sur les alternatives de création de réseaux sociaux sur Azure avec des services à faible coût et offrant de bons résultats, avec l’utilisation d’une solution de stockage à plusieurs niveaux et une distribution des données appelée « Échelle ».</span><span class="sxs-lookup"><span data-stu-id="87d8d-217">This article tries to shed some light into the alternatives of creating social networks completely on Azure with low-cost services and providing great results by encouraging the use of a multi-layered storage solution and data distribution called “Ladder”.</span></span>

![Diagramme de l’interaction entre les services Azure pour les réseaux sociaux](./media/social-media-apps/social-media-apps-azure-solution.png)

<span data-ttu-id="87d8d-219">En réalité, il n’existe aucune solution parfaite pour ce type de scénario. C’est la synergie créée par la combinaison d’excellents services qui nous permet de concevoir des expériences exceptionnelles  : la rapidité et la liberté d’Azure Cosmos DB pour une application sociale intéressante, l’intelligence d’une solution de recherche de premier ordre comme Recherche Azure, la flexibilité d’Azure App Services pour héberger non pas des applications indépendantes du langage, mais des processus d’arrière-plan puissants, ainsi que les outils de stockage Azure et Azure SQL Database extensibles pour le stockage de grandes quantités de données et la puissance d’analyse d’Azure Machine Learning pour créer les connaissances et l’intelligence décisionnelle capables de fournir des commentaires à nos processus et de nous aider à présenter le bon contenu aux bons utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="87d8d-219">The truth is that there is no silver bullet for this kind of scenarios, it’s the synergy created by the combination of great services that allow us to build great experiences: the speed and freedom of Azure Cosmos DB to provide a great social application, the intelligence behind a first-class search solution like Azure Search, the flexibility of Azure App Services to host not even language-agnostic applications but powerful background processes and the expandable Azure Storage and Azure SQL Database for storing massive amounts of data and the analytic power of Azure Machine Learning to create knowledge and intelligence that can provide feedback to our processes and help us deliver the right content to the right users.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87d8d-220">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="87d8d-220">Next steps</span></span>
<span data-ttu-id="87d8d-221">Pour en savoir plus sur les cas d’usage de Cosmos DB, consultez [Cas d’utilisation courants et scénarios pour Cosmos DB](use-cases.md).</span><span class="sxs-lookup"><span data-stu-id="87d8d-221">To learn more about use cases for Cosmos DB, see [Common Cosmos DB use cases](use-cases.md).</span></span>