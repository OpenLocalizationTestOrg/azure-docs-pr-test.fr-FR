---
title: "Automatisation Azure Cosmos DB - Gestion avec Powershell | Microsoft Docs"
description: "Utilisez Azure Powershell pour gérer vos comptes Azure Cosmos DB."
services: cosmos-db
author: dmakwana
manager: jhubbard
editor: 
tags: azure-resource-manager
documentationcenter: 
ms.assetid: 
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/21/2017
ms.author: dimakwan
ms.openlocfilehash: 25c543528119410dff0684845a713dcb0d6151d6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="create-an-azure-cosmos-db-account-using-powershell"></a><span data-ttu-id="2f866-103">Créer un compte Azure Cosmos DB à l’aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="2f866-103">Create an Azure Cosmos DB account using PowerShell</span></span>

<span data-ttu-id="2f866-104">Le guide suivant décrit les commandes permettant d’automatiser la gestion de vos comptes de base de données Azure Cosmos DB à l’aide d’Azure Powershell.</span><span class="sxs-lookup"><span data-stu-id="2f866-104">The following guide describes commands to automate management of your Azure Cosmos DB database accounts using Azure Powershell.</span></span> <span data-ttu-id="2f866-105">Il inclut également des commandes dédiées à la gestion des clés de comptes et des priorités de basculement dans des [comptes de base de données multi-régions][scaling-globally].</span><span class="sxs-lookup"><span data-stu-id="2f866-105">It also includes commands to manage account keys and failover priorities in [multi-region database accounts][scaling-globally].</span></span> <span data-ttu-id="2f866-106">La mise à jour de votre compte de base de données vous permet de modifier les stratégies de cohérence et d’ajouter/de supprimer des régions.</span><span class="sxs-lookup"><span data-stu-id="2f866-106">Updating your database account allows you to modify consistency policies and add/remove regions.</span></span> <span data-ttu-id="2f866-107">Pour une gestion multiplateforme de votre compte de base de données Azure Cosmos DB, vous pouvez utiliser l’interface [Azure CLI](cli-samples.md), [l’API REST Resource Provider][rp-rest-api] ou le [portail Azure](create-documentdb-dotnet.md#create-account).</span><span class="sxs-lookup"><span data-stu-id="2f866-107">For cross-platform management of your Azure Cosmos DB account, you can use either [Azure CLI](cli-samples.md), the [Resource Provider REST API][rp-rest-api], or the [Azure portal](create-documentdb-dotnet.md#create-account).</span></span>

## <a name="getting-started"></a><span data-ttu-id="2f866-108">Mise en route</span><span class="sxs-lookup"><span data-stu-id="2f866-108">Getting Started</span></span>

<span data-ttu-id="2f866-109">Suivez les instructions de la page [Installation et configuration d’Azure PowerShell][powershell-install-configure] pour procéder à l’installation et vous connecter à votre compte Azure Resource Manager dans PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2f866-109">Follow the instructions in [How to install and configure Azure PowerShell][powershell-install-configure] to install and log in to your Azure Resource Manager account in Powershell.</span></span>

### <a name="notes"></a><span data-ttu-id="2f866-110">Remarques</span><span class="sxs-lookup"><span data-stu-id="2f866-110">Notes</span></span>

* <span data-ttu-id="2f866-111">Si vous voulez exécuter les commandes suivantes sans demander la confirmation de l’utilisateur, ajoutez l’indicateur `-Force` à la commande.</span><span class="sxs-lookup"><span data-stu-id="2f866-111">If you would like to execute the following commands without requiring user confirmation, append the `-Force` flag to the command.</span></span>
* <span data-ttu-id="2f866-112">L’ensemble des commandes suivantes sont synchrones.</span><span class="sxs-lookup"><span data-stu-id="2f866-112">All the following commands are synchronous.</span></span>

## <span data-ttu-id="2f866-113"><a id="create-documentdb-account-powershell"></a> Créer un compte Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2f866-113"><a id="create-documentdb-account-powershell"></a> Create an Azure Cosmos DB Account</span></span>

<span data-ttu-id="2f866-114">Cette commande vous permet de créer un compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-114">This command allows you to create an Azure Cosmos DB database account.</span></span> <span data-ttu-id="2f866-115">Configurez votre nouveau compte de base de données pour une seule ou [plusieurs régions][scaling-globally] avec une [stratégie de cohérence](consistency-levels.md) déterminée.</span><span class="sxs-lookup"><span data-stu-id="2f866-115">Configure your new database account as either single-region or [multi-region][scaling-globally] with a certain [consistency policy](consistency-levels.md).</span></span>

    $locations = @(@{"locationName"="<write-region-location>"; "failoverPriority"=0}, @{"locationName"="<read-region-location>"; "failoverPriority"=1})
    $iprangefilter = "<ip-range-filter>"
    $consistencyPolicy = @{"defaultConsistencyLevel"="<default-consistency-level>"; "maxIntervalInSeconds"="<max-interval>"; "maxStalenessPrefix"="<max-staleness-prefix>"}
    $CosmosDBProperties = @{"databaseAccountOfferType"="Standard"; "locations"=$locations; "consistencyPolicy"=$consistencyPolicy; "ipRangeFilter"=$iprangefilter}
    New-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName <resource-group-name>  -Location "<resource-group-location>" -Name <database-account-name> -Properties $CosmosDBProperties
    
* <span data-ttu-id="2f866-116">`<write-region-location>` Le nom d’emplacement de la région d’écriture du compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-116">`<write-region-location>` The location name of the write region of the database account.</span></span> <span data-ttu-id="2f866-117">Cet emplacement doit présenter une valeur de priorité de basculement de 0.</span><span class="sxs-lookup"><span data-stu-id="2f866-117">This location is required to have a failover priority value of 0.</span></span> <span data-ttu-id="2f866-118">Il doit y avoir exactement une région d’écriture par compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-118">There must be exactly one write region per database account.</span></span>
* <span data-ttu-id="2f866-119">`<read-region-location>` Le nom d’emplacement de la région de lecture du compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-119">`<read-region-location>` The location name of the read region of the database account.</span></span> <span data-ttu-id="2f866-120">L’emplacement doit présenter une valeur de priorité de basculement supérieure à 0.</span><span class="sxs-lookup"><span data-stu-id="2f866-120">This location is required to have a failover priority value of greater than 0.</span></span> <span data-ttu-id="2f866-121">Un compte de base de données peut présenter plusieurs régions de lecture.</span><span class="sxs-lookup"><span data-stu-id="2f866-121">There can be more than one read regions per database account.</span></span>
* <span data-ttu-id="2f866-122">`<ip-range-filter>` Spécifie le jeu d’adresses IP ou des plages d’adresses IP au format CIDR pour les ajouter à la liste d’adresses IP clientes autorisées pour un compte de base de données particulier.</span><span class="sxs-lookup"><span data-stu-id="2f866-122">`<ip-range-filter>` Specifies the set of IP addresses or IP address ranges in CIDR form to be included as the allowed list of client IPs for a given database account.</span></span> <span data-ttu-id="2f866-123">Les plages/adresses IP doivent être séparées par des virgules et ne doivent pas contenir d’espaces.</span><span class="sxs-lookup"><span data-stu-id="2f866-123">IP addresses/ranges must be comma separated and must not contain any spaces.</span></span> <span data-ttu-id="2f866-124">Pour plus d’informations, consultez [Prise en charge du pare-feu dans Azure Cosmos DB](firewall-support.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-124">For more information, see [Azure Cosmos DB Firewall Support](firewall-support.md)</span></span>
* <span data-ttu-id="2f866-125">`<default-consistency-level>` Niveau de cohérence par défaut du compte Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-125">`<default-consistency-level>` The default consistency level of the Azure Cosmos DB account.</span></span> <span data-ttu-id="2f866-126">Pour plus d’informations, consultez [Niveaux de cohérence dans Azure Cosmos DB](consistency-levels.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-126">For more information, see [Consistency Levels in Azure Cosmos DB](consistency-levels.md).</span></span>
* <span data-ttu-id="2f866-127">`<max-interval>` Utilisée avec la cohérence en fonction de l’obsolescence, cette valeur représente la durée (en secondes) d’obsolescence tolérée.</span><span class="sxs-lookup"><span data-stu-id="2f866-127">`<max-interval>` When used with Bounded Staleness consistency, this value represents the time amount of staleness (in seconds) tolerated.</span></span> <span data-ttu-id="2f866-128">Les valeurs acceptables sont comprises entre 1 et 100.</span><span class="sxs-lookup"><span data-stu-id="2f866-128">Accepted range for this value is 1 - 100.</span></span>
* <span data-ttu-id="2f866-129">`<max-staleness-prefix>` Utilisée avec la cohérence en fonction de l’obsolescence, cette valeur représente le nombre de requêtes d’obsolescence tolérées.</span><span class="sxs-lookup"><span data-stu-id="2f866-129">`<max-staleness-prefix>` When used with Bounded Staleness consistency, this value represents the number of stale requests tolerated.</span></span> <span data-ttu-id="2f866-130">Les valeurs acceptables sont 1-2, 147, 483 et 647.</span><span class="sxs-lookup"><span data-stu-id="2f866-130">Accepted range for this value is 1 – 2,147,483,647.</span></span>
* <span data-ttu-id="2f866-131">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-131">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-132">`<resource-group-location>` Emplacement du groupe de ressources Azure auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-132">`<resource-group-location>` The location of the Azure Resource Group to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-133">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB à créer.</span><span class="sxs-lookup"><span data-stu-id="2f866-133">`<database-account-name>` The name of the Azure Cosmos DB database account to be created.</span></span> <span data-ttu-id="2f866-134">Cette valeur accepte uniquement les lettres minuscules, les nombres, le caractère « - », et doit présenter entre 3 et 50 caractères.</span><span class="sxs-lookup"><span data-stu-id="2f866-134">It can only use lowercase letters, numbers, the '-' character, and must be between 3 and 50 characters.</span></span>

<span data-ttu-id="2f866-135">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-135">Example:</span></span> 

    $locations = @(@{"locationName"="West US"; "failoverPriority"=0}, @{"locationName"="East US"; "failoverPriority"=1})
    $iprangefilter = ""
    $consistencyPolicy = @{"defaultConsistencyLevel"="BoundedStaleness"; "maxIntervalInSeconds"=5; "maxStalenessPrefix"=100}
    $CosmosDBProperties = @{"databaseAccountOfferType"="Standard"; "locations"=$locations; "consistencyPolicy"=$consistencyPolicy; "ipRangeFilter"=$iprangefilter}
    New-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Location "West US" -Name "docdb-test" -Properties $CosmosDBProperties

### <a name="notes"></a><span data-ttu-id="2f866-136">Remarques</span><span class="sxs-lookup"><span data-stu-id="2f866-136">Notes</span></span>
* <span data-ttu-id="2f866-137">L’exemple précédent crée un compte de base de données avec deux régions.</span><span class="sxs-lookup"><span data-stu-id="2f866-137">The preceding example creates a database account with two regions.</span></span> <span data-ttu-id="2f866-138">Il est également possible de créer un compte de base de données avec l’une des régions (désignée comme la région d’écriture, elle présente une valeur de priorité de basculement de 0) ou plus de deux régions.</span><span class="sxs-lookup"><span data-stu-id="2f866-138">It is also possible to create a database account with either one region (which is designated as the write region and have a failover priority value of 0) or more than two regions.</span></span> <span data-ttu-id="2f866-139">Pour plus d’informations, consultez la section des [comptes de base de données multi-régions][scaling-globally].</span><span class="sxs-lookup"><span data-stu-id="2f866-139">For more information, see [multi-region database accounts][scaling-globally].</span></span>
* <span data-ttu-id="2f866-140">Les emplacements doivent correspondre à des régions dans lesquelles Azure Cosmos DB est généralement disponible.</span><span class="sxs-lookup"><span data-stu-id="2f866-140">The locations must be regions in which Azure Cosmos DB is generally available.</span></span> <span data-ttu-id="2f866-141">La liste actuelle des régions est présentée sur la [page Régions Azure](https://azure.microsoft.com/regions/#services).</span><span class="sxs-lookup"><span data-stu-id="2f866-141">The current list of regions is provided on the [Azure Regions page](https://azure.microsoft.com/regions/#services).</span></span>

## <span data-ttu-id="2f866-142"><a id="update-documentdb-account-powershell"></a> Mise à jour d’un compte de base de données DocumentDB</span><span class="sxs-lookup"><span data-stu-id="2f866-142"><a id="update-documentdb-account-powershell"></a> Update a DocumentDB Database Account</span></span>

<span data-ttu-id="2f866-143">Cette commande vous permet de mettre à jour les propriétés de votre compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-143">This command allows you to update your Azure Cosmos DB database account properties.</span></span> <span data-ttu-id="2f866-144">Les informations mises à jour sont notamment la stratégie de cohérence et les emplacements hébergeant le compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-144">This includes the consistency policy and the locations which the database account exists in.</span></span>

> [!NOTE]
> <span data-ttu-id="2f866-145">Cette commande, qui vous permet d’ajouter ou de supprimer des régions, ne prend aucunement en charge la modification des priorités de basculement.</span><span class="sxs-lookup"><span data-stu-id="2f866-145">This command allows you to add and remove regions but does not allow you to modify failover priorities.</span></span> <span data-ttu-id="2f866-146">Pour modifier les priorités de basculement, consultez la section [ci-dessous](#modify-failover-priority-powershell).</span><span class="sxs-lookup"><span data-stu-id="2f866-146">To modify failover priorities, see [below](#modify-failover-priority-powershell).</span></span>

    $locations = @(@{"locationName"="<write-region-location>"; "failoverPriority"=0}, @{"locationName"="<read-region-location>"; "failoverPriority"=1})
    $iprangefilter = "<ip-range-filter>"
    $consistencyPolicy = @{"defaultConsistencyLevel"="<default-consistency-level>"; "maxIntervalInSeconds"="<max-interval>"; "maxStalenessPrefix"="<max-staleness-prefix>"}
    $CosmosDBProperties = @{"databaseAccountOfferType"="Standard"; "locations"=$locations; "consistencyPolicy"=$consistencyPolicy; "ipRangeFilter"=$iprangefilter}
    Set-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName <resource-group-name> -Name <database-account-name> -Properties $CosmosDBProperties
    
* <span data-ttu-id="2f866-147">`<write-region-location>` Le nom d’emplacement de la région d’écriture du compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-147">`<write-region-location>` The location name of the write region of the database account.</span></span> <span data-ttu-id="2f866-148">Cet emplacement doit présenter une valeur de priorité de basculement de 0.</span><span class="sxs-lookup"><span data-stu-id="2f866-148">This location is required to have a failover priority value of 0.</span></span> <span data-ttu-id="2f866-149">Il doit y avoir exactement une région d’écriture par compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-149">There must be exactly one write region per database account.</span></span>
* <span data-ttu-id="2f866-150">`<read-region-location>` Le nom d’emplacement de la région de lecture du compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-150">`<read-region-location>` The location name of the read region of the database account.</span></span> <span data-ttu-id="2f866-151">L’emplacement doit présenter une valeur de priorité de basculement supérieure à 0.</span><span class="sxs-lookup"><span data-stu-id="2f866-151">This location is required to have a failover priority value of greater than 0.</span></span> <span data-ttu-id="2f866-152">Un compte de base de données peut présenter plusieurs régions de lecture.</span><span class="sxs-lookup"><span data-stu-id="2f866-152">There can be more than one read regions per database account.</span></span>
* <span data-ttu-id="2f866-153">`<default-consistency-level>` Niveau de cohérence par défaut du compte Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-153">`<default-consistency-level>` The default consistency level of the Azure Cosmos DB account.</span></span> <span data-ttu-id="2f866-154">Pour plus d’informations, consultez [Niveaux de cohérence dans Azure Cosmos DB](consistency-levels.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-154">For more information, see [Consistency Levels in Azure Cosmos DB](consistency-levels.md).</span></span>
* <span data-ttu-id="2f866-155">`<ip-range-filter>` Spécifie le jeu d’adresses IP ou des plages d’adresses IP au format CIDR pour les ajouter à la liste d’adresses IP clientes autorisées pour un compte de base de données particulier.</span><span class="sxs-lookup"><span data-stu-id="2f866-155">`<ip-range-filter>` Specifies the set of IP addresses or IP address ranges in CIDR form to be included as the allowed list of client IPs for a given database account.</span></span> <span data-ttu-id="2f866-156">Les plages/adresses IP doivent être séparées par des virgules et ne doivent pas contenir d’espaces.</span><span class="sxs-lookup"><span data-stu-id="2f866-156">IP addresses/ranges must be comma separated and must not contain any spaces.</span></span> <span data-ttu-id="2f866-157">Pour plus d’informations, consultez [Prise en charge du pare-feu dans Azure Cosmos DB](firewall-support.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-157">For more information, see [Azure Cosmos DB Firewall Support](firewall-support.md)</span></span>
* <span data-ttu-id="2f866-158">`<max-interval>` Utilisée avec la cohérence en fonction de l’obsolescence, cette valeur représente la durée (en secondes) d’obsolescence tolérée.</span><span class="sxs-lookup"><span data-stu-id="2f866-158">`<max-interval>` When used with Bounded Staleness consistency, this value represents the time amount of staleness (in seconds) tolerated.</span></span> <span data-ttu-id="2f866-159">Les valeurs acceptables sont comprises entre 1 et 100.</span><span class="sxs-lookup"><span data-stu-id="2f866-159">Accepted range for this value is 1 - 100.</span></span>
* <span data-ttu-id="2f866-160">`<max-staleness-prefix>` Utilisée avec la cohérence en fonction de l’obsolescence, cette valeur représente le nombre de requêtes d’obsolescence tolérées.</span><span class="sxs-lookup"><span data-stu-id="2f866-160">`<max-staleness-prefix>` When used with Bounded Staleness consistency, this value represents the number of stale requests tolerated.</span></span> <span data-ttu-id="2f866-161">Les valeurs acceptables sont 1-2, 147, 483 et 647.</span><span class="sxs-lookup"><span data-stu-id="2f866-161">Accepted range for this value is 1 – 2,147,483,647.</span></span>
* <span data-ttu-id="2f866-162">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-162">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-163">`<resource-group-location>` Emplacement du groupe de ressources Azure auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-163">`<resource-group-location>` The location of the Azure Resource Group to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-164">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB à mettre à jour.</span><span class="sxs-lookup"><span data-stu-id="2f866-164">`<database-account-name>` The name of the Azure Cosmos DB database account to be updated.</span></span>

<span data-ttu-id="2f866-165">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-165">Example:</span></span> 

    $locations = @(@{"locationName"="West US"; "failoverPriority"=0}, @{"locationName"="East US"; "failoverPriority"=1})
    $iprangefilter = ""
    $consistencyPolicy = @{"defaultConsistencyLevel"="BoundedStaleness"; "maxIntervalInSeconds"=5; "maxStalenessPrefix"=100}
    $CosmosDBProperties = @{"databaseAccountOfferType"="Standard"; "locations"=$locations; "consistencyPolicy"=$consistencyPolicy; "ipRangeFilter"=$iprangefilter}
    Set-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test" -Properties $CosmosDBProperties

## <span data-ttu-id="2f866-166"><a id="delete-documentdb-account-powershell"></a> Suppression d’un compte de base de données DocumentDB</span><span class="sxs-lookup"><span data-stu-id="2f866-166"><a id="delete-documentdb-account-powershell"></a> Delete a DocumentDB Database Account</span></span>

<span data-ttu-id="2f866-167">Cette commande vous permet de supprimer un compte existant de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-167">This command allows you to delete an existing Azure Cosmos DB database account.</span></span>

    Remove-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "<resource-group-name>" -Name "<database-account-name>"
    
* <span data-ttu-id="2f866-168">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-168">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-169">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB à supprimer.</span><span class="sxs-lookup"><span data-stu-id="2f866-169">`<database-account-name>` The name of the Azure Cosmos DB database account to be deleted.</span></span>

<span data-ttu-id="2f866-170">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-170">Example:</span></span>

    Remove-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test"

## <span data-ttu-id="2f866-171"><a id="get-documentdb-properties-powershell"></a> Obtention des propriétés d’un compte de base de données DocumentDB</span><span class="sxs-lookup"><span data-stu-id="2f866-171"><a id="get-documentdb-properties-powershell"></a> Get Properties of a DocumentDB Database Account</span></span>

<span data-ttu-id="2f866-172">Cette commande vous permet d’obtenir les propriétés d’un compte existant de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-172">This command allows you to get the properties of an existing Azure Cosmos DB database account.</span></span>

    Get-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "<resource-group-name>" -Name "<database-account-name>"

* <span data-ttu-id="2f866-173">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-173">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-174">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-174">`<database-account-name>` The name of the Azure Cosmos DB database account.</span></span>

<span data-ttu-id="2f866-175">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-175">Example:</span></span>

    Get-AzureRmResource -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test"

## <span data-ttu-id="2f866-176"><a id="update-tags-powershell"></a> Mettre à jour les balises d’un compte de base de données Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2f866-176"><a id="update-tags-powershell"></a> Update Tags of an Azure Cosmos DB Database Account</span></span>

<span data-ttu-id="2f866-177">L’exemple suivant vous explique comment définir les [balises des ressources Azure][azure-resource-tags] pour votre compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-177">The following example describes how to set [Azure resource tags][azure-resource-tags] for your Azure Cosmos DB database account.</span></span>

> [!NOTE]
> <span data-ttu-id="2f866-178">Cette commande peut être combinée aux commandes de création ou de mise à jour, via l’ajout de l’indicateur `-Tags` avec le paramètre correspondant.</span><span class="sxs-lookup"><span data-stu-id="2f866-178">This command can be combined with the create or update commands by appending the `-Tags` flag with the corresponding parameter.</span></span>

<span data-ttu-id="2f866-179">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-179">Example:</span></span>

    $tags = @{"dept" = "Finance”; environment = “Production”}
    Set-AzureRmResource -ResourceType “Microsoft.DocumentDB/databaseAccounts”  -ResourceGroupName "rg-test" -Name "docdb-test" -Tags $tags

## <span data-ttu-id="2f866-180"><a id="list-account-keys-powershell"></a> Liste des clés de comptes</span><span class="sxs-lookup"><span data-stu-id="2f866-180"><a id="list-account-keys-powershell"></a> List Account Keys</span></span>

<span data-ttu-id="2f866-181">Lorsque vous créez un compte Azure Cosmos DB, le service génère deux clés d’accès maître qui peuvent être utilisées pour l’authentification lors de l’accès au compte Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-181">When you create an Azure Cosmos DB account, the service generates two master access keys that can be used for authentication when the Azure Cosmos DB account is accessed.</span></span> <span data-ttu-id="2f866-182">En fournissant deux clés d’accès, Azure Cosmos DB vous permet de régénérer les clés sans interruption de votre compte Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-182">By providing two access keys, Azure Cosmos DB enables you to regenerate the keys with no interruption to your Azure Cosmos DB account.</span></span> <span data-ttu-id="2f866-183">Des clés en lecture seule pour l’authentification des opérations en lecture seule sont également disponibles.</span><span class="sxs-lookup"><span data-stu-id="2f866-183">Read-only keys for authenticating read-only operations are also available.</span></span> <span data-ttu-id="2f866-184">Il existe deux clés en lecture et écriture (primaire et secondaire) et deux clés en lecture seule (primaire et secondaire).</span><span class="sxs-lookup"><span data-stu-id="2f866-184">There are two read-write keys (primary and secondary) and two read-only keys (primary and secondary).</span></span>

    $keys = Invoke-AzureRmResourceAction -Action listKeys -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "<resource-group-name>" -Name "<database-account-name>"

* <span data-ttu-id="2f866-185">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-185">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-186">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-186">`<database-account-name>` The name of the Azure Cosmos DB database account.</span></span>

<span data-ttu-id="2f866-187">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-187">Example:</span></span>

    $keys = Invoke-AzureRmResourceAction -Action listKeys -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test"

## <span data-ttu-id="2f866-188"><a id="list-connection-strings-powershell"></a> Répertorier les chaînes de connexion</span><span class="sxs-lookup"><span data-stu-id="2f866-188"><a id="list-connection-strings-powershell"></a> List Connection Strings</span></span>

<span data-ttu-id="2f866-189">Pour les comptes MongoDB, vous pouvez récupérer la chaîne de connexion pour connecter votre application MongoDB au compte de base de données à l’aide de la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="2f866-189">For MongoDB accounts, the connection string to connect your MongoDB app to the database account can be retrieved using the following command.</span></span>

    $keys = Invoke-AzureRmResourceAction -Action listConnectionStrings -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "<resource-group-name>" -Name "<database-account-name>"

* <span data-ttu-id="2f866-190">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-190">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-191">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-191">`<database-account-name>` The name of the Azure Cosmos DB database account.</span></span>

<span data-ttu-id="2f866-192">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-192">Example:</span></span>

    $keys = Invoke-AzureRmResourceAction -Action listConnectionStrings -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test"

## <span data-ttu-id="2f866-193"><a id="regenerate-account-key-powershell"></a> Régénération de la clé de compte</span><span class="sxs-lookup"><span data-stu-id="2f866-193"><a id="regenerate-account-key-powershell"></a> Regenerate Account Key</span></span>

<span data-ttu-id="2f866-194">Vous devez modifier périodiquement les clés d'accès à votre compte Azure Cosmos DB pour garantir la sécurité des connexions.</span><span class="sxs-lookup"><span data-stu-id="2f866-194">You should change the access keys to your Azure Cosmos DB account periodically to help keep your connections more secure.</span></span> <span data-ttu-id="2f866-195">Deux clés d’accès vous sont affectées afin de vous permettre de conserver des connexions au compte Azure Cosmos DB à l’aide d’une clé d’accès lorsque vous régénérez l’autre clé.</span><span class="sxs-lookup"><span data-stu-id="2f866-195">Two access keys are assigned to enable you to maintain connections to the Azure Cosmos DB account using one access key while you regenerate the other access key.</span></span>

    Invoke-AzureRmResourceAction -Action regenerateKey -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "<resource-group-name>" -Name "<database-account-name>" -Parameters @{"keyKind"="<key-kind>"}

* <span data-ttu-id="2f866-196">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-196">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-197">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-197">`<database-account-name>` The name of the Azure Cosmos DB database account.</span></span>
* <span data-ttu-id="2f866-198">`<key-kind>` L’un des quatre types de clés : ["Primary"|"Secondary"|"PrimaryReadonly"|"SecondaryReadonly"] que vous souhaitez régénérer.</span><span class="sxs-lookup"><span data-stu-id="2f866-198">`<key-kind>` One of the four types of keys: ["Primary"|"Secondary"|"PrimaryReadonly"|"SecondaryReadonly"] that you would like to regenerate.</span></span>

<span data-ttu-id="2f866-199">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-199">Example:</span></span>

    Invoke-AzureRmResourceAction -Action regenerateKey -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test" -Parameters @{"keyKind"="Primary"}

## <span data-ttu-id="2f866-200"><a id="modify-failover-priority-powershell"></a> Modifier la priorité de basculement d’un compte de base de données Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="2f866-200"><a id="modify-failover-priority-powershell"></a> Modify Failover Priority of an Azure Cosmos DB Database Account</span></span>

<span data-ttu-id="2f866-201">Pour les comptes de base de données multirégions, vous pouvez modifier la priorité de basculement des différentes régions dans lesquelles existe le compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-201">For multi-region database accounts, you can change the failover priority of the various regions which the Azure Cosmos DB database account exists in.</span></span> <span data-ttu-id="2f866-202">Pour plus d’informations sur le basculement dans votre compte de base de données Azure Cosmos DB, consultez la section [Azure Cosmos DB, un service de base de données mondialement distribué sur Azure][distribute-data-globally].</span><span class="sxs-lookup"><span data-stu-id="2f866-202">For more information on failover in your Azure Cosmos DB database account, see [Distribute data globally with Azure Cosmos DB][distribute-data-globally].</span></span>

    $failoverPolicies = @(@{"locationName"="<write-region-location>"; "failoverPriority"=0},@{"locationName"="<read-region-location>"; "failoverPriority"=1})
    Invoke-AzureRmResourceAction -Action failoverPriorityChange -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "<resource-group-name>" -Name "<database-account-name>" -Parameters @{"failoverPolicies"=$failoverPolicies}

* <span data-ttu-id="2f866-203">`<write-region-location>` Le nom d’emplacement de la région d’écriture du compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-203">`<write-region-location>` The location name of the write region of the database account.</span></span> <span data-ttu-id="2f866-204">Cet emplacement doit présenter une valeur de priorité de basculement de 0.</span><span class="sxs-lookup"><span data-stu-id="2f866-204">This location is required to have a failover priority value of 0.</span></span> <span data-ttu-id="2f866-205">Il doit y avoir exactement une région d’écriture par compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-205">There must be exactly one write region per database account.</span></span>
* <span data-ttu-id="2f866-206">`<read-region-location>` Le nom d’emplacement de la région de lecture du compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="2f866-206">`<read-region-location>` The location name of the read region of the database account.</span></span> <span data-ttu-id="2f866-207">L’emplacement doit présenter une valeur de priorité de basculement supérieure à 0.</span><span class="sxs-lookup"><span data-stu-id="2f866-207">This location is required to have a failover priority value of greater than 0.</span></span> <span data-ttu-id="2f866-208">Un compte de base de données peut présenter plusieurs régions de lecture.</span><span class="sxs-lookup"><span data-stu-id="2f866-208">There can be more than one read regions per database account.</span></span>
* <span data-ttu-id="2f866-209">`<resource-group-name>` Nom du [groupe de ressources Azure][azure-resource-groups] auquel appartient le nouveau compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-209">`<resource-group-name>` The name of the [Azure Resource Group][azure-resource-groups] to which the new Azure Cosmos DB database account belongs to.</span></span>
* <span data-ttu-id="2f866-210">`<database-account-name>` Nom du compte de base de données Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="2f866-210">`<database-account-name>` The name of the Azure Cosmos DB database account.</span></span>

<span data-ttu-id="2f866-211">Exemple :</span><span class="sxs-lookup"><span data-stu-id="2f866-211">Example:</span></span>

    $failoverPolicies = @(@{"locationName"="East US"; "failoverPriority"=0},@{"locationName"="West US"; "failoverPriority"=1})
    Invoke-AzureRmResourceAction -Action failoverPriorityChange -ResourceType "Microsoft.DocumentDb/databaseAccounts" -ApiVersion "2015-04-08" -ResourceGroupName "rg-test" -Name "docdb-test" -Parameters @{"failoverPolicies"=$failoverPolicies}

## <a name="next-steps"></a><span data-ttu-id="2f866-212">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="2f866-212">Next steps</span></span>

* <span data-ttu-id="2f866-213">Pour vous connecter avec .NET, consultez la page [Connect and query with .NET (Se connecter et effectuer des requêtes avec .NET)](create-documentdb-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-213">To connect using .NET, see [Connect and query with .NET](create-documentdb-dotnet.md).</span></span>
* <span data-ttu-id="2f866-214">Pour vous connecter avec .NET Core, consultez la page [Connect and query with .NET Core (Se connecter et effectuer des requêtes avec .NET Core)](create-documentdb-dotnet-core.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-214">To connect using .NET Core, see [Connect and query with .NET Core](create-documentdb-dotnet-core.md).</span></span>
* <span data-ttu-id="2f866-215">Pour vous connecter avec Node.js, consultez [Connect and query with Node.js and a MongoDB app (Se connecter et exécuter des requêtes avec Node.js et une application MongoDB)](create-mongodb-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="2f866-215">To connect using Node.js, see [Connect and query with Node.js and a MongoDB app](create-mongodb-nodejs.md).</span></span>

<!--Reference style links - using these makes the source content way more readable than using inline links-->
[powershell-install-configure]: https://docs.microsoft.com/azure/powershell-install-configure
[scaling-globally]: distribute-data-globally.md#EnableGlobalDistribution
[distribute-data-globally]: distribute-data-globally.md
[azure-resource-groups]: https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview#resource-groups
[azure-resource-tags]: https://docs.microsoft.com/azure/azure-resource-manager/resource-group-using-tags
[rp-rest-api]: https://docs.microsoft.com/rest/api/documentdbresourceprovider/
