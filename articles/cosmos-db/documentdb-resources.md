---
title: "aaaAzure Cosmos DB modèle de ressource et concepts | Documents Microsoft"
description: "En savoir plus sur le modèle hiérarchique de Azure Cosmos DB des bases de données, des collections, une fonction définie par l’utilisateur (UDF), des documents, des ressources de toomanage autorisations et plus."
keywords: "Modèle hiérarchique, cosmosdb, azure, Microsoft azure"
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: fc3642232b86cc27901ebd97456c386829324632
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="91af4-104">Concepts clés et modèle de ressource hiérarchiques Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="91af4-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="91af4-105">les entités de base de données qui gère de la base de données Azure Cosmos Hello sont visées tooas **ressources**.</span><span class="sxs-lookup"><span data-stu-id="91af4-105">hello database entities that Azure Cosmos DB manages are referred tooas **resources**.</span></span> <span data-ttu-id="91af4-106">Chaque ressource est identifiée de manière unique par un URI logique.</span><span class="sxs-lookup"><span data-stu-id="91af4-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="91af4-107">Vous pouvez interagir avec les ressources de hello à l’aide de verbes HTTP standard, les en-têtes de demande/réponse et les codes d’état.</span><span class="sxs-lookup"><span data-stu-id="91af4-107">You can interact with hello resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="91af4-108">La lecture de cet article, vous serez hello en mesure de tooanswer suivant questions :</span><span class="sxs-lookup"><span data-stu-id="91af4-108">By reading this article, you'll be able tooanswer hello following questions:</span></span>

* <span data-ttu-id="91af4-109">Qu’est-ce que le modèle de ressource de Cosmos DB ?</span><span class="sxs-lookup"><span data-stu-id="91af4-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="91af4-110">Quels sont le système défini des ressources en tant que ressources de toouser opposés défini ?</span><span class="sxs-lookup"><span data-stu-id="91af4-110">What are system defined resources as opposed toouser defined resources?</span></span>
* <span data-ttu-id="91af4-111">Comment adresser une ressource ?</span><span class="sxs-lookup"><span data-stu-id="91af4-111">How do I address a resource?</span></span>
* <span data-ttu-id="91af4-112">Comment travailler avec des collections ?</span><span class="sxs-lookup"><span data-stu-id="91af4-112">How do I work with collections?</span></span>
* <span data-ttu-id="91af4-113">Comment utiliser les procédures stockées, les déclencheurs et les fonctions définies par l’utilisateur ?</span><span class="sxs-lookup"><span data-stu-id="91af4-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="91af4-114">Modèle de ressource hiérarchique</span><span class="sxs-lookup"><span data-stu-id="91af4-114">Hierarchical resource model</span></span>
<span data-ttu-id="91af4-115">Comme hello diagramme suivant illustre, hello DB Cosmos hiérarchique **modèle de ressource** se compose d’ensembles de ressources sous un compte de base de données, chaque adressable via un URI logique et stable.</span><span class="sxs-lookup"><span data-stu-id="91af4-115">As hello following diagram illustrates, hello Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="91af4-116">Un ensemble de ressources sera tooas auxquels un **flux** dans cet article.</span><span class="sxs-lookup"><span data-stu-id="91af4-116">A set of resources will be referred tooas a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="91af4-117">Base de données Cosmos Azure offre un protocole TCP hautement efficace qui se trouve également RESTful dans son modèle de communication, disponible via hello [API cliente DocumentDB .NET](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through hello [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="91af4-118">![Modèle de ressource hiérarchique Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="91af4-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="91af4-119">**Modèle de ressource hiérarchique**</span><span class="sxs-lookup"><span data-stu-id="91af4-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="91af4-120">toostart utilisation des ressources, vous devez [créer un compte de base de données](create-documentdb-dotnet.md) à l’aide de votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="91af4-120">toostart working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="91af4-121">Un compte de base de données se compose d’un ensemble de **bases de données**. Chacune d’elles contient plusieurs **collections** et chaque collection contient des **procédures stockées, des déclencheurs, des fonctions définies par l’utilisateur, des documents** et les **pièces jointes** associées.</span><span class="sxs-lookup"><span data-stu-id="91af4-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="91af4-122">Une base de données a également associés **utilisateurs**, chacun avec un ensemble de **autorisations** tooaccess collections, procédures stockées, déclencheurs, UDF, documents ou des pièces jointes.</span><span class="sxs-lookup"><span data-stu-id="91af4-122">A database also has associated **users**, each with a set of **permissions** tooaccess collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="91af4-123">Les bases de données, les utilisateurs, les autorisations et les collections sont des ressources définies par le système avec des schémas connus, tandis que les documents et les pièces jointes contiennent du contenu JSON arbitraire défini par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="91af4-124">Ressource</span><span class="sxs-lookup"><span data-stu-id="91af4-124">Resource</span></span> | <span data-ttu-id="91af4-125">Description</span><span class="sxs-lookup"><span data-stu-id="91af4-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="91af4-126">Compte de base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-126">Database account</span></span> |<span data-ttu-id="91af4-127">Le compte de base de données est associé à un jeu de bases de données et à une quantité fixe de stockage d’objets blob pour les pièces jointes.</span><span class="sxs-lookup"><span data-stu-id="91af4-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="91af4-128">Vous pouvez créer un ou plusieurs comptes de base de données à l’aide de votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="91af4-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="91af4-129">Pour plus d’informations, consultez notre [page de tarification](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="91af4-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="91af4-130">Base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-130">Database</span></span> |<span data-ttu-id="91af4-131">Une base de données est un conteneur logique de stockage de documents partitionné entre des collections.</span><span class="sxs-lookup"><span data-stu-id="91af4-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="91af4-132">Elle sert également de conteneur pour les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="91af4-132">It is also a users container.</span></span> |
| <span data-ttu-id="91af4-133">Utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-133">User</span></span> |<span data-ttu-id="91af4-134">espace de noms logique Hello pour fixer l’étendue des autorisations.</span><span class="sxs-lookup"><span data-stu-id="91af4-134">hello logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="91af4-135">Autorisation</span><span class="sxs-lookup"><span data-stu-id="91af4-135">Permission</span></span> |<span data-ttu-id="91af4-136">Un jeton d’autorisation associé à un utilisateur pour la ressource spécifique de tooa accès.</span><span class="sxs-lookup"><span data-stu-id="91af4-136">An authorization token associated with a user for access tooa specific resource.</span></span> |
| <span data-ttu-id="91af4-137">Collection</span><span class="sxs-lookup"><span data-stu-id="91af4-137">Collection</span></span> |<span data-ttu-id="91af4-138">Une collection est un conteneur de documents JSON et hello associés logique d’application JavaScript.</span><span class="sxs-lookup"><span data-stu-id="91af4-138">A collection is a container of JSON documents and hello associated JavaScript application logic.</span></span> <span data-ttu-id="91af4-139">Une collection est une entité facturable, où hello [coût](performance-levels.md) est déterminé par le niveau de performance hello associé hello collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-139">A collection is a billable entity, where hello [cost](performance-levels.md) is determined by hello performance level associated with hello collection.</span></span> <span data-ttu-id="91af4-140">Collections peut couvrir une ou plusieurs partitions/serveurs et peut évoluer toohandle quasi illimitée des volumes de stockage ou de débit.</span><span class="sxs-lookup"><span data-stu-id="91af4-140">Collections can span one or more partitions/servers and can scale toohandle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="91af4-141">Procédure stockée</span><span class="sxs-lookup"><span data-stu-id="91af4-141">Stored Procedure</span></span> |<span data-ttu-id="91af4-142">Logique d’application écrite en JavaScript qui est inscrit auprès d’une collection et exécutée de façon transactionnelle au sein du moteur de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within hello database engine.</span></span> |
| <span data-ttu-id="91af4-143">Déclencheur</span><span class="sxs-lookup"><span data-stu-id="91af4-143">Trigger</span></span> |<span data-ttu-id="91af4-144">Logique d'application écrite en JavaScript exécutée avant ou après une opération d'insertion, de remplacement ou de suppression.</span><span class="sxs-lookup"><span data-stu-id="91af4-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="91af4-145">Fonctions définies par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-145">UDF</span></span> |<span data-ttu-id="91af4-146">Logique d'application écrite en JavaScript.</span><span class="sxs-lookup"><span data-stu-id="91af4-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="91af4-147">UDF activer toomodel un opérateur de requête personnalisée et ainsi étendent le langage de requête API DocumentDB hello principal.</span><span class="sxs-lookup"><span data-stu-id="91af4-147">UDFs enable you toomodel a custom query operator and thereby extend hello core DocumentDB API query language.</span></span> |
| <span data-ttu-id="91af4-148">Document</span><span class="sxs-lookup"><span data-stu-id="91af4-148">Document</span></span> |<span data-ttu-id="91af4-149">Contenu JSON (arbitraire) défini par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="91af4-150">Par défaut, aucun schéma ne doit toobe défini ni index secondaire doivent-elles toobe fournies pour hello tous les documents ajoutés tooa collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-150">By default, no schema needs toobe defined nor do secondary indices need toobe provided for all hello documents added tooa collection.</span></span> |
| <span data-ttu-id="91af4-151">Pièce jointe</span><span class="sxs-lookup"><span data-stu-id="91af4-151">Attachment</span></span> |<span data-ttu-id="91af4-152">Les pièces jointes sont des documents spéciaux contenant des références et les métadonnées associées pour un élément multimédia/objet blob externe.</span><span class="sxs-lookup"><span data-stu-id="91af4-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="91af4-153">développeur de Hello peut choisir de blob de hello toohave géré par la base de données Cosmos ou stocker chez un fournisseur de service blob externes tels que OneDrive, Dropbox, etc..</span><span class="sxs-lookup"><span data-stu-id="91af4-153">hello developer can choose toohave hello blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="91af4-154">Ressources système ou ressources définies par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-154">System vs. user defined resources</span></span>
<span data-ttu-id="91af4-155">Les ressources (telles que les comptes de base de données, les bases de données, les collections, les utilisateurs, les autorisations, les procédures stockées, les déclencheurs et les fonctions définies par l'utilisateur) ont toutes un schéma fixe et sont nommées « ressources système ».</span><span class="sxs-lookup"><span data-stu-id="91af4-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="91af4-156">En revanche, les ressources telles que les documents et les pièces jointes n’ont aucune restriction sur le schéma de hello et sont des exemples de ressources de défini par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-156">In contrast, resources such as documents and attachments have no restrictions on hello schema and are examples of user defined resources.</span></span> <span data-ttu-id="91af4-157">Dans Cosmos DB, les ressources système et définies par l’utilisateur sont représentées et gérées en tant qu’éléments JSON standard.</span><span class="sxs-lookup"><span data-stu-id="91af4-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="91af4-158">Toutes les ressources, système ou définies par l’utilisateur ont hello propriétés courantes suivantes.</span><span class="sxs-lookup"><span data-stu-id="91af4-158">All resources, system or user defined, have hello following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="91af4-159">Toutes les propriétés générées par le système dans une ressource ont comme préfixe un trait de soulignement (_) dans leur représentation JSON.</span><span class="sxs-lookup"><span data-stu-id="91af4-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-160"><strong>Propriété</strong></span><span class="sxs-lookup"><span data-stu-id="91af4-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-161"><strong>Définie par l’utilisateur ou générée par le système ?</strong></span><span class="sxs-lookup"><span data-stu-id="91af4-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-162"><strong>Objectif</strong></span><span class="sxs-lookup"><span data-stu-id="91af4-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-163">_rid</span><span class="sxs-lookup"><span data-stu-id="91af4-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-164">Générée par le système</span><span class="sxs-lookup"><span data-stu-id="91af4-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-165">Identificateur unique et hiérarchique de ressource de hello système généré</span><span class="sxs-lookup"><span data-stu-id="91af4-165">System generated, unique and hierarchical identifier of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-166">_etag</span><span class="sxs-lookup"><span data-stu-id="91af4-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-167">Générée par le système</span><span class="sxs-lookup"><span data-stu-id="91af4-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-168">eTag de ressource hello requise pour le contrôle d’accès concurrentiel optimiste</span><span class="sxs-lookup"><span data-stu-id="91af4-168">etag of hello resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-169">_ts</span><span class="sxs-lookup"><span data-stu-id="91af4-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-170">Générée par le système</span><span class="sxs-lookup"><span data-stu-id="91af4-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-171">Horodateur de la dernière mise à jour de ressource de hello</span><span class="sxs-lookup"><span data-stu-id="91af4-171">Last updated timestamp of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-172">_self</span><span class="sxs-lookup"><span data-stu-id="91af4-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-173">Générée par le système</span><span class="sxs-lookup"><span data-stu-id="91af4-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-174">URI adressable unique de la ressource de hello</span><span class="sxs-lookup"><span data-stu-id="91af4-174">Unique addressable URI of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-175">id</span><span class="sxs-lookup"><span data-stu-id="91af4-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-176">Générée par le système</span><span class="sxs-lookup"><span data-stu-id="91af4-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-177">Nom unique de la ressource de hello défini par l’utilisateur (avec hello même partition valeur de clé).</span><span class="sxs-lookup"><span data-stu-id="91af4-177">User defined unique name of hello resource (with hello same partition key value).</span></span> <span data-ttu-id="91af4-178">Si l’utilisateur de hello ne spécifie pas un id, un id sera générée par le système</span><span class="sxs-lookup"><span data-stu-id="91af4-178">If hello user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="91af4-179">Représentation en réseau des ressources</span><span class="sxs-lookup"><span data-stu-id="91af4-179">Wire representation of resources</span></span>
<span data-ttu-id="91af4-180">COSMOS DB n’impose pas de toutes les extensions exclusives toohello standard ou spéciales encodages JSON ; il fonctionne avec des documents JSON conformes standards.</span><span class="sxs-lookup"><span data-stu-id="91af4-180">Cosmos DB does not mandate any proprietary extensions toohello JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="91af4-181">Adressage d'une ressource</span><span class="sxs-lookup"><span data-stu-id="91af4-181">Addressing a resource</span></span>
<span data-ttu-id="91af4-182">Toutes les ressources sont adressables via des URI.</span><span class="sxs-lookup"><span data-stu-id="91af4-182">All resources are URI addressable.</span></span> <span data-ttu-id="91af4-183">Hello valeur Hello **_self** propriété d’une ressource représente hello URI relatif de la ressource de hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-183">hello value of hello **_self** property of a resource represents hello relative URI of hello resource.</span></span> <span data-ttu-id="91af4-184">Hello format Hello URI se compose de hello /\<flux\>/ segments de chemin d’accès de {_rid} :</span><span class="sxs-lookup"><span data-stu-id="91af4-184">hello format of hello URI consists of hello /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="91af4-185">Valeur de hello _self</span><span class="sxs-lookup"><span data-stu-id="91af4-185">Value of hello _self</span></span> | <span data-ttu-id="91af4-186">Description</span><span class="sxs-lookup"><span data-stu-id="91af4-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="91af4-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="91af4-187">/dbs</span></span> |<span data-ttu-id="91af4-188">Flux de bases de données sous un compte de base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="91af4-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="91af4-189">/dbs/{dbName}</span></span> |<span data-ttu-id="91af4-190">Base de données avec l’id correspondant hello valeur {dbName}</span><span class="sxs-lookup"><span data-stu-id="91af4-190">Database with an id matching hello value {dbName}</span></span> |
| <span data-ttu-id="91af4-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="91af4-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="91af4-192">Flux de collections dans une base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="91af4-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="91af4-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="91af4-194">Collection avec l’id correspondant hello valeur {collName}</span><span class="sxs-lookup"><span data-stu-id="91af4-194">Collection with an id matching hello value {collName}</span></span> |
| <span data-ttu-id="91af4-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="91af4-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="91af4-196">Flux de documents dans une collection</span><span class="sxs-lookup"><span data-stu-id="91af4-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="91af4-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="91af4-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="91af4-198">Le document ayant l’id correspondant hello valeur {doc}</span><span class="sxs-lookup"><span data-stu-id="91af4-198">Document with an id matching hello value {doc}</span></span> |
| <span data-ttu-id="91af4-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="91af4-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="91af4-200">Flux d'utilisateurs d'une base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-200">Feed of users under a database</span></span> |
| <span data-ttu-id="91af4-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="91af4-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="91af4-202">Utilisateur avec l’id correspondant hello valeur {user}</span><span class="sxs-lookup"><span data-stu-id="91af4-202">User with an id matching hello value {user}</span></span> |
| <span data-ttu-id="91af4-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="91af4-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="91af4-204">Flux d'autorisations d'un utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="91af4-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="91af4-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="91af4-206">Autorisation avec l’id correspondant hello valeur {permission}</span><span class="sxs-lookup"><span data-stu-id="91af4-206">Permission with an id matching hello value {permission}</span></span> |

<span data-ttu-id="91af4-207">Chaque ressource a un nom d’unique définie par l’utilisateur exposé via la propriété d’id hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-207">Each resource has a unique user defined name exposed via hello id property.</span></span> <span data-ttu-id="91af4-208">Remarque : pour les documents, si l’utilisateur de hello ne spécifie pas un id, nos kits de développement logiciel pris en charge génère automatiquement un id unique pour le document de hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-208">Note: for documents, if hello user does not specify an id, our supported SDKs will automatically generate a unique id for hello document.</span></span> <span data-ttu-id="91af4-209">id de Hello est une chaîne définie par l’utilisateur, des caractères too256 qui est unique dans le contexte de hello d’une ressource parent spécifique.</span><span class="sxs-lookup"><span data-stu-id="91af4-209">hello id is a user defined string, of up too256 characters that is unique within hello context of a specific parent resource.</span></span> 

<span data-ttu-id="91af4-210">Chaque ressource a également un identificateur de ressource hiérarchique générée par le système (également désignée tooas un RID), qui est disponible via la propriété _rid de hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-210">Each resource also has a system generated hierarchical resource identifier (also referred tooas an RID), which is available via hello _rid property.</span></span> <span data-ttu-id="91af4-211">Hello RID encode hello ensemble de la hiérarchie d’une ressource donnée, et il s’agit de qu'une représentation interne pratique utilisé tooenforce l’intégrité référentielle de façon distribuée.</span><span class="sxs-lookup"><span data-stu-id="91af4-211">hello RID encodes hello entire hierarchy of a given resource and it is a convenient internal representation used tooenforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="91af4-212">Hello RID est unique au sein d’un compte de base de données et il est utilisé en interne par la base de données Cosmos pour un routage efficace sans nécessiter de recherches de partition croisée.</span><span class="sxs-lookup"><span data-stu-id="91af4-212">hello RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="91af4-213">valeurs Hello hello _self et les propriétés de _rid hello sont des représentations de remplacement et canoniques d’une ressource.</span><span class="sxs-lookup"><span data-stu-id="91af4-213">hello values of hello _self and hello  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="91af4-214">Hello API REST prise en charge l’adressage des ressources et le routage des demandes par id de hello et propriétés de _rid hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-214">hello REST APIs support addressing of resources and routing of requests by both hello id and hello _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="91af4-215">Comptes de base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-215">Database accounts</span></span>
<span data-ttu-id="91af4-216">Votre abonnement Azure vous permet d’approvisionner un ou plusieurs comptes de base de données Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="91af4-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="91af4-217">Vous pouvez créer et gérer les comptes de base de données Cosmos DB via hello portail Azure à [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="91af4-217">You can create and manage Cosmos DB database accounts via hello Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="91af4-218">La création et la gestion d’un compte de base de données requièrent un accès administrateur et peuvent uniquement être effectuées avec votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="91af4-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="91af4-219">Propriétés des comptes de base de données</span><span class="sxs-lookup"><span data-stu-id="91af4-219">Database account properties</span></span>
<span data-ttu-id="91af4-220">Dans le cadre de la configuration et la gestion d’un compte de base de données, vous pouvez configurer et lire hello propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="91af4-220">As part of provisioning and managing a database account you can configure and read hello following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-221"><strong>Nom de la propriété</strong></span><span class="sxs-lookup"><span data-stu-id="91af4-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-222"><strong>Description</strong></span><span class="sxs-lookup"><span data-stu-id="91af4-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-223">Stratégie de cohérence</span><span class="sxs-lookup"><span data-stu-id="91af4-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-224">Définir ce niveau de cohérence de propriété tooconfigure hello par défaut pour toutes les collections hello sous votre compte de base de données.</span><span class="sxs-lookup"><span data-stu-id="91af4-224">Set this property tooconfigure hello default consistency level for all hello collections under your database account.</span></span> <span data-ttu-id="91af4-225">Vous pouvez remplacer le niveau de cohérence hello sur la base de chaque demande à l’aide d’en-tête de demande hello [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="91af4-225">You can override hello consistency level on a per request basis using hello [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="91af4-226">Notez que cette propriété s’applique uniquement toohello <i>ressources définies par l’utilisateur</i>.</span><span class="sxs-lookup"><span data-stu-id="91af4-226">Note that this property only applies toohello <i>user defined resources</i>.</span></span> <span data-ttu-id="91af4-227">Toutes les ressources définies par le système sont configurés toosupport lectures/requêtes à forte cohérence.</span><span class="sxs-lookup"><span data-stu-id="91af4-227">All system defined resources are configured toosupport reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="91af4-228">Clés d’autorisation</span><span class="sxs-lookup"><span data-stu-id="91af4-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="91af4-229">Voici hello principal et secondaire clés principale et en lecture seule qui fournissent d’administration accéder tooall des ressources hello sous le compte de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-229">These are hello primary and secondary master and readonly keys that provide administrative access tooall of hello resources under hello database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="91af4-230">Notez que dans Ajout tooprovisioning, configuration et la gestion de votre compte de base de données à partir de hello portail Azure, vous pouvez également programmer créer et gérer des comptes de base de données de base de données Cosmos à l’aide de hello [API REST de Azure Cosmos DB](/rest/api/documentdb/) en tant que Bien que [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-230">Note that in addition tooprovisioning, configuring and managing your database account from hello Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using hello [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="91af4-231">Bases de données</span><span class="sxs-lookup"><span data-stu-id="91af4-231">Databases</span></span>
<span data-ttu-id="91af4-232">Une base de données de la base de données Cosmos est un conteneur logique d’un ou plusieurs collections et d’utilisateurs, comme indiqué dans hello suivant schéma.</span><span class="sxs-lookup"><span data-stu-id="91af4-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in hello following diagram.</span></span> <span data-ttu-id="91af4-233">Vous pouvez créer n’importe quel nombre de bases de données sous un toooffer de sujet de compte de base de données Cosmos DB limites.</span><span class="sxs-lookup"><span data-stu-id="91af4-233">You can create any number of databases under a Cosmos DB database account subject toooffer limits.</span></span>  

<span data-ttu-id="91af4-234">![Compte de base de données et modèle hiérarchique de regroupements][2]</span><span class="sxs-lookup"><span data-stu-id="91af4-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="91af4-235">**Une base de données est un conteneur logique d’utilisateurs et de collections**</span><span class="sxs-lookup"><span data-stu-id="91af4-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="91af4-236">Une base de données peut contenir un stockage de documents presque illimité partitionné dans des collections.</span><span class="sxs-lookup"><span data-stu-id="91af4-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="91af4-237">Évolutivité flexible d’une base de données Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="91af4-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="91af4-238">Une base de données de la base de données Cosmos est élastique par défaut – allant de quelques toopetabytes Go de stockage de documents SSD sauvegardé et débit approvisionné.</span><span class="sxs-lookup"><span data-stu-id="91af4-238">A Cosmos DB database is elastic by default – ranging from a few GB toopetabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="91af4-239">Contrairement à une base de données SGBDR traditionnel, une base de données dans la base de données Cosmos n’est pas étendue tooa un seul ordinateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped tooa single machine.</span></span> <span data-ttu-id="91af4-240">Avec Cosmos DB, comme la mise à l’échelle de votre application doit toogrow, vous pouvez créer d’autres collections, les bases de données ou les deux.</span><span class="sxs-lookup"><span data-stu-id="91af4-240">With Cosmos DB, as your application’s scale needs toogrow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="91af4-241">En effet, plusieurs applications de Microsoft utilisent Cosmos DB à l’échelle du client en créant des bases de données Cosmos DB très volumineuses, contenant chacune des milliers de collections qui regroupent des téraoctets de stockage de documents.</span><span class="sxs-lookup"><span data-stu-id="91af4-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="91af4-242">Vous pouvez augmenter ou réduire une base de données en ajoutant ou supprimant des collections toomeet spécifications de mise à l’échelle de votre application.</span><span class="sxs-lookup"><span data-stu-id="91af4-242">You can grow or shrink a database by adding or removing collections toomeet your application’s scale requirements.</span></span> 

<span data-ttu-id="91af4-243">Vous pouvez créer n’importe quel nombre de regroupements au sein d’une offre de toohello d’objet de base de données.</span><span class="sxs-lookup"><span data-stu-id="91af4-243">You can create any number of collections within a database subject toohello offer.</span></span> <span data-ttu-id="91af4-244">Chaque collection a stockage SSD sauvegardé et débit approvisionné pour vous en fonction du niveau de performances sélectionnés hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-244">Each collection has SSD backed storage and throughput provisioned for you depending on hello selected performance tier.</span></span>

<span data-ttu-id="91af4-245">Une base de données Cosmos DB est également un conteneur d’utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="91af4-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="91af4-246">Un utilisateur, à leur tour, est un espace de noms logique pour un jeu d’autorisations qui fournit les pièces jointes, documents et affinées toocollections d’accès et d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="91af4-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access toocollections, documents and attachments.</span></span>  

<span data-ttu-id="91af4-247">Comme avec d’autres ressources dans le modèle de ressource de base de données Cosmos hello, bases de données peuvent être créés, remplacé, supprimer, lire ou énumérées facilement à l’aide soit hello [API REST](/rest/api/documentdb/) ou l’une des hello [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-247">As with other resources in hello Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="91af4-248">COSMOS DB garantit la cohérence forte pour la lecture ou l’interrogation des métadonnées hello d’une ressource de base de données.</span><span class="sxs-lookup"><span data-stu-id="91af4-248">Cosmos DB guarantees strong consistency for reading or querying hello metadata of a database resource.</span></span> <span data-ttu-id="91af4-249">Suppression d’une base de données automatiquement garantit que vous ne peut pas accéder à une des collections de hello ou qu’il contient des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="91af4-249">Deleting a database automatically ensures that you cannot access any of hello collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="91af4-250">Collections</span><span class="sxs-lookup"><span data-stu-id="91af4-250">Collections</span></span>
<span data-ttu-id="91af4-251">Une collection Cosmos DB est un conteneur pour vos documents JSON.</span><span class="sxs-lookup"><span data-stu-id="91af4-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="91af4-252">Stockage de documents SSD flexible</span><span class="sxs-lookup"><span data-stu-id="91af4-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="91af4-253">Une collection est intrinsèquement flexible : elle augmente ou diminue à mesure que vous ajoutez ou supprimez des documents.</span><span class="sxs-lookup"><span data-stu-id="91af4-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="91af4-254">Les collections sont des ressources logiques. Elles peuvent s’étendre sur plusieurs partitions physiques ou serveurs.</span><span class="sxs-lookup"><span data-stu-id="91af4-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="91af4-255">nombre de Hello de partitions dans une collection est déterminé par DB Cosmos en fonction de la taille de stockage hello et débit approvisionné de hello de votre collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-255">hello number of partitions within a collection is determined by Cosmos DB based on hello storage size and hello provisioned throughput of your collection.</span></span> <span data-ttu-id="91af4-256">Chaque partition dans Azure Cosmos DB dispose d’une quantité fixe de stockage SSD associé. Elle est également répliquée pour offrir une haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="91af4-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="91af4-257">Gestion des partitions est entièrement gérée par la base de données Azure Cosmos, et ne pas avoir un code complexe toowrite ou de gérer vos partitions.</span><span class="sxs-lookup"><span data-stu-id="91af4-257">Partition management is fully managed by Azure Cosmos DB, and you do not have toowrite complex code or manage your partitions.</span></span> <span data-ttu-id="91af4-258">Les collections Cosmos DB sont **pratiquement illimitées** en termes de débit et de stockage.</span><span class="sxs-lookup"><span data-stu-id="91af4-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="91af4-259">Indexation automatique des collections</span><span class="sxs-lookup"><span data-stu-id="91af4-259">Automatic indexing of collections</span></span>
<span data-ttu-id="91af4-260">Cosmos DB est un véritable système de base de données sans schéma.</span><span class="sxs-lookup"><span data-stu-id="91af4-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="91af4-261">Il ne pas supposer ou nécessitent un schéma pour les documents JSON hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-261">It does not assume or require any schema for hello JSON documents.</span></span> <span data-ttu-id="91af4-262">Lorsque vous ajoutez la collection de documents tooa, Cosmos DB les indexe automatiquement et sont disponibles pour vous tooquery.</span><span class="sxs-lookup"><span data-stu-id="91af4-262">As you add documents tooa collection, Cosmos DB automatically indexes them and they are available for you tooquery.</span></span> <span data-ttu-id="91af4-263">L’indexation automatique de documents sans schéma ou index secondaire est une fonctionnalité clé de Cosmos DB. Elle est rendue possible par des techniques offrant une maintenance d’index structurée par des journaux, sans verrouillage et optimisée pour l’écriture.</span><span class="sxs-lookup"><span data-stu-id="91af4-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="91af4-264">Cosmos DB prend en charge des volumes soutenus d’écriture très rapides, tout en continuant de servir des requêtes cohérentes.</span><span class="sxs-lookup"><span data-stu-id="91af4-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="91af4-265">Stockage de documents et les index sont utilisé toocalculate hello stockage est consommé par chaque collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-265">Both document and index storage are used toocalculate hello storage consumed by each collection.</span></span> <span data-ttu-id="91af4-266">Vous pouvez contrôler hello stockage et les performances des compromis associés à l’indexation en configurant la stratégie d’indexation hello pour une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-266">You can control hello storage and performance trade-offs associated with indexing by configuring hello indexing policy for a collection.</span></span> 

### <a name="configuring-hello-indexing-policy-of-a-collection"></a><span data-ttu-id="91af4-267">Configuration de la stratégie d’indexation hello d’une collection</span><span class="sxs-lookup"><span data-stu-id="91af4-267">Configuring hello indexing policy of a collection</span></span>
<span data-ttu-id="91af4-268">Hello indexation de stratégie de chaque collection vous permet de toomake performances et stockage des compromis associés à l’indexation.</span><span class="sxs-lookup"><span data-stu-id="91af4-268">hello indexing policy of each collection allows you toomake performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="91af4-269">Hello options suivantes sont disponible tooyou dans le cadre de la configuration de l’indexation :</span><span class="sxs-lookup"><span data-stu-id="91af4-269">hello following options are available tooyou as part of indexing configuration:</span></span>  

* <span data-ttu-id="91af4-270">Choisissez si la collection de hello indexe automatiquement tous les documents hello ou non.</span><span class="sxs-lookup"><span data-stu-id="91af4-270">Choose whether hello collection automatically indexes all of hello documents or not.</span></span> <span data-ttu-id="91af4-271">Par défaut, tous les documents sont automatiquement indexés.</span><span class="sxs-lookup"><span data-stu-id="91af4-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="91af4-272">Vous pouvez choisir tooturn désactiver l’indexation automatique et ajouter de manière sélective uniquement les index toohello des documents spécifiques.</span><span class="sxs-lookup"><span data-stu-id="91af4-272">You can choose tooturn off automatic indexing and selectively add only specific documents toohello index.</span></span> <span data-ttu-id="91af4-273">À l’inverse, vous pouvez choisir de façon sélective tooexclude uniquement des documents spécifiques.</span><span class="sxs-lookup"><span data-stu-id="91af4-273">Conversely, you can selectively choose tooexclude only specific documents.</span></span> <span data-ttu-id="91af4-274">Vous pouvez y parvenir en définissant des toobe de propriété automatique hello true ou false sur indexingPolicy hello d’une collection, à l’aide d’en-tête de demande hello [x-ms-indexingdirective] lors de l’insertion, de remplacement ou de suppression d’un document.</span><span class="sxs-lookup"><span data-stu-id="91af4-274">You can achieve this by setting hello automatic property toobe true or false on hello indexingPolicy of a collection and using hello [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="91af4-275">Choisissez si tooinclude ou exclure des chemins spécifiques ou des modèles dans vos documents à partir de hello index.</span><span class="sxs-lookup"><span data-stu-id="91af4-275">Choose whether tooinclude or exclude specific paths or patterns in your documents from hello index.</span></span> <span data-ttu-id="91af4-276">Vous pouvez y parvenir en paramètre includedPaths et excludedPaths sur indexingPolicy hello d’une collection respectivement.</span><span class="sxs-lookup"><span data-stu-id="91af4-276">You can achieve this by setting includedPaths and excludedPaths on hello indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="91af4-277">Vous pouvez également configurer hello stockage et les performances des compromis pour la plage et hachage de requêtes pour les modèles de chemin d’accès spécifique.</span><span class="sxs-lookup"><span data-stu-id="91af4-277">You can also configure hello storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="91af4-278">Choisissez entre des mises à jour d'index synchrones (cohérentes) ou asynchrones (différées).</span><span class="sxs-lookup"><span data-stu-id="91af4-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="91af4-279">Par défaut, les index hello est mise à jour synchrone sur chaque insertion, de remplacer ou de suppression d’une collection de toohello du document.</span><span class="sxs-lookup"><span data-stu-id="91af4-279">By default, hello index is updated synchronously on each insert, replace or delete of a document toohello collection.</span></span> <span data-ttu-id="91af4-280">Ainsi, les requêtes hello toohonor hello même niveau de cohérence que celui de lectures de document hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-280">This enables hello queries toohonor hello same consistency level as that of hello document reads.</span></span> <span data-ttu-id="91af4-281">Bien que Cosmos DB est optimisé en écriture et prend en charge des volumes maintenus d’écritures de document, ainsi que la maintenance d’index synchrones et traiter les requêtes de cohérence, vous pouvez configurer certaine tooupdate collections leur index tardivement.</span><span class="sxs-lookup"><span data-stu-id="91af4-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections tooupdate their index lazily.</span></span> <span data-ttu-id="91af4-282">Indexation différée améliore davantage les performances d’écriture hello et est idéale pour les scénarios d’ingestion en bloc pour les collections de lectures principalement.</span><span class="sxs-lookup"><span data-stu-id="91af4-282">Lazy indexing boosts hello write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="91af4-283">stratégie d’indexation de Hello peut être modifié en exécutant une commande PUT sur la collection de hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-283">hello indexing policy can be changed by executing a PUT on hello collection.</span></span> <span data-ttu-id="91af4-284">Cela peut être obtenue via hello [client SDK](documentdb-sdk-dotnet.md), hello [Azure Portal](https://portal.azure.com) ou hello [API REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="91af4-284">This can be achieved either through hello [client SDK](documentdb-sdk-dotnet.md), hello [Azure Portal](https://portal.azure.com) or hello [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="91af4-285">Interrogation d'une collection</span><span class="sxs-lookup"><span data-stu-id="91af4-285">Querying a collection</span></span>
<span data-ttu-id="91af4-286">documents Hello au sein d’une collection peuvent avoir des schémas arbitraires et vous pouvez interroger des documents d’une collection sans fournir n’importe quel schéma ou un index secondaire dès le départ.</span><span class="sxs-lookup"><span data-stu-id="91af4-286">hello documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="91af4-287">Vous pouvez interroger la collection de hello à l’aide de hello [API de DocumentDB de base de données Azure Cosmos : référence de la syntaxe SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), qui fournit des opérateurs spatiales, relationnelles et hiérarchiques riches et extensibilité via des UDFs JavaScript.</span><span class="sxs-lookup"><span data-stu-id="91af4-287">You can query hello collection using hello [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="91af4-288">Permet de grammaire JSON pour la modélisation des documents JSON en tant qu’arborescences avec étiquettes en tant que nœuds d’arbre hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-288">JSON grammar allows for modeling JSON documents as trees with labels as hello tree nodes.</span></span> <span data-ttu-id="91af4-289">Cette capacité est exploitée par les techniques d’indexation automatique de l’API DocumentDB et par le dialecte SQL de l’API DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="91af4-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="91af4-290">Hello langage de requête DocumetDB API se compose de trois aspects principaux :</span><span class="sxs-lookup"><span data-stu-id="91af4-290">hello DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="91af4-291">Un petit ensemble d’opérations de requête qui mappent naturellement arborescence toohello, y compris les projections et les requêtes hiérarchiques.</span><span class="sxs-lookup"><span data-stu-id="91af4-291">A small set of query operations that map naturally toohello tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="91af4-292">Un sous-ensemble d'opérations relationnelles incluant la composition, le filtrage, les projections, les agrégations et les jointures réflexives.</span><span class="sxs-lookup"><span data-stu-id="91af4-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="91af4-293">Des fonctions définies par l'utilisateur JavaScript pures, qui fonctionnent avec (1) et (2).</span><span class="sxs-lookup"><span data-stu-id="91af4-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="91af4-294">modèle de requête de base de données Cosmos Hello tentatives toostrike un équilibre entre les fonctionnalités, l’efficacité et la simplicité.</span><span class="sxs-lookup"><span data-stu-id="91af4-294">hello Cosmos DB query model attempts toostrike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="91af4-295">en mode natif, moteur de base de données de base de données Cosmos Hello compile et exécute les instructions de requête SQL hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-295">hello Cosmos DB database engine natively compiles and executes hello SQL query statements.</span></span> <span data-ttu-id="91af4-296">Vous pouvez interroger une collection à l’aide de hello [API REST](/rest/api/documentdb/) ou l’une des hello [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-296">You can query a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="91af4-297">Hello .NET SDK est fourni avec un fournisseur LINQ.</span><span class="sxs-lookup"><span data-stu-id="91af4-297">hello .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="91af4-298">Vous pouvez essayer de hello API DocumentDB et exécuter des requêtes SQL sur notre jeu de données Bonjour [Query Playground](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="91af4-298">You can try out hello DocumentDB API and run SQL queries against our dataset in hello [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="91af4-299">Transactions multi-documents</span><span class="sxs-lookup"><span data-stu-id="91af4-299">Multi-document transactions</span></span>
<span data-ttu-id="91af4-300">Transactions de base de données fournissent un modèle de programmation sûr et prévisible pour traiter les données de toohello de modifications simultanées.</span><span class="sxs-lookup"><span data-stu-id="91af4-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes toohello data.</span></span> <span data-ttu-id="91af4-301">Dans le système SGBDR, logique métier de hello méthode traditionnelle toowrite est toowrite **des procédures stockées** et/ou **déclencheurs** et expédiez le serveur de base de données toohello pour l’exécution transactionnelle.</span><span class="sxs-lookup"><span data-stu-id="91af4-301">In RDBMS, hello traditional way toowrite business logic is toowrite **stored-procedures** and/or **triggers** and ship it toohello database server for transactional execution.</span></span> <span data-ttu-id="91af4-302">Dans un système SGBDR, programmeur de l’application hello est toodeal requis avec les deux langages de programmation différents :</span><span class="sxs-lookup"><span data-stu-id="91af4-302">In RDBMS, hello application programmer is required toodeal with two disparate programming languages:</span></span> 

* <span data-ttu-id="91af4-303">Hello (non transactionnelle) application langage de programmation (par exemple, JavaScript, Python, c#, Java, etc.)</span><span class="sxs-lookup"><span data-stu-id="91af4-303">hello (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="91af4-304">T-SQL, hello transactionnelle langage de programmation qui est exécuté en mode natif par base de données hello</span><span class="sxs-lookup"><span data-stu-id="91af4-304">T-SQL, hello transactional programming language which is natively executed by hello database</span></span>

<span data-ttu-id="91af4-305">En vertu de son engagement profond tooJavaScript et de JSON directement dans le moteur de base de données hello, Cosmos DB fournit un modèle de programmation intuitif pour JavaScript en cours d’exécution en fonction de la logique d’application directement sur des collections de hello en termes de procédures stockées et déclencheurs.</span><span class="sxs-lookup"><span data-stu-id="91af4-305">By virtue of its deep commitment tooJavaScript and JSON directly within hello database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on hello collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="91af4-306">Ainsi, les deux éléments suivants de hello :</span><span class="sxs-lookup"><span data-stu-id="91af4-306">This allows for both of hello following:</span></span>

* <span data-ttu-id="91af4-307">Contrôler la mise en œuvre efficace de l’accès concurrentiel, restauration automatique de l’indexation de graphiques d’objets JSON hello directement dans le moteur de base de données hello</span><span class="sxs-lookup"><span data-stu-id="91af4-307">Efficient implementation of concurrency control, recovery, automatic indexing of hello JSON object graphs directly in hello database engine</span></span>
* <span data-ttu-id="91af4-308">Exprimer naturellement les flux de contrôle, variable de portée, l’attribution et l’intégration de gestion des exceptions de primitives avec des transactions de base de données directement en termes de langage de programmation JavaScript hello</span><span class="sxs-lookup"><span data-stu-id="91af4-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of hello JavaScript programming language</span></span>

<span data-ttu-id="91af4-309">logique de JavaScript Hello inscrite à un niveau de la collection peut alors émettre des opérations de base de données sur des documents de hello Hello étant donné la collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-309">hello JavaScript logic registered at a collection level can then issue database operations on hello documents of hello given collection.</span></span> <span data-ttu-id="91af4-310">COSMOS DB implicitement hello encapsule que JavaScript en fonction des procédures stockées et déclencheurs au sein d’un ambiante les transactions ACID avec l’isolement d’instantané entre les documents dans une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-310">Cosmos DB implicitly wraps hello JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="91af4-311">Pendant son exécution, hello si hello JavaScript lève une exception, hello puis la totalité de la transaction est abandonnée.</span><span class="sxs-lookup"><span data-stu-id="91af4-311">During hello course of its execution, if hello JavaScript throws an exception, then hello entire transaction is aborted.</span></span> <span data-ttu-id="91af4-312">Bonjour modèle de programmation qui en résulte est très simple mais puissants.</span><span class="sxs-lookup"><span data-stu-id="91af4-312">hello resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="91af4-313">Les développeurs JavaScript obtiennent un modèle de programmation « durable » tout en continuant d'utiliser les constructions de langage et les primitives de bibliothèques qui leurs sont familières.</span><span class="sxs-lookup"><span data-stu-id="91af4-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="91af4-314">Hello capacité tooexecute JavaScript directement dans la base de données hello moteur Bonjour même espace d’adressage comme pool de mémoires tampons hello performant et l’exécution transactionnelle des opérations de base de données par rapport aux documents de hello d’une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-314">hello ability tooexecute JavaScript directly within hello database engine in hello same address space as hello buffer pool enables performant and transactional execution of database operations against hello documents of a collection.</span></span> <span data-ttu-id="91af4-315">En outre, moteur de base de données de base de données Cosmos rend un toohello profond engagement JSON et JavaScript élimine toute impédance entre les systèmes de type hello d’application et de la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-315">Furthermore, Cosmos DB database engine makes a deep commitment toohello JSON and JavaScript eliminates any impedance mismatch between hello type systems of application and hello database.</span></span>   

<span data-ttu-id="91af4-316">Après avoir créé une collection, vous pouvez inscrire des procédures stockées, déclencheurs et UDF avec une collection à l’aide de hello [API REST](/rest/api/documentdb/) ou l’une des hello [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="91af4-317">Après l'enregistrement, vous pouvez les référencer et les exécuter.</span><span class="sxs-lookup"><span data-stu-id="91af4-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="91af4-318">Envisagez suivant de hello entièrement écrit dans JavaScript, code hello ci-dessous prend deux arguments (nom de livre et nom de l’auteur) de procédure stockée et crée un nouveau document, les requêtes pour un document et puis met à jour – toutes les tâches dans une transaction ACID implicite.</span><span class="sxs-lookup"><span data-stu-id="91af4-318">Consider hello following stored procedure written entirely in JavaScript, hello code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="91af4-319">À tout moment pendant l’exécution de hello, si une exception JavaScript est levée, toute transaction de hello est abandonnée.</span><span class="sxs-lookup"><span data-stu-id="91af4-319">At any point during hello execution, if a JavaScript exception is thrown, hello entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace hello author name for all documents that satisfied hello query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need tooexecute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="91af4-320">client de Hello peut « expédition » hello ci-dessus JavaScript logique toohello base de données pour l’exécution transactionnelle via HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="91af4-320">hello client can “ship” hello above JavaScript logic toohello database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="91af4-321">Pour plus d’informations sur l’utilisation de méthodes HTTP, consultez l’article [RESTful interactions with Azure Cosmos DB resources (Interactions RESTful avec les ressources Azure Cosmos DB)](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="91af4-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="91af4-322">Notez qu’étant donné que la base de données hello comprend naturellement JSON et JavaScript, il existe aucune incompatibilité de type de système sans « Mappage OR » ou magique de génération de code nécessaires.</span><span class="sxs-lookup"><span data-stu-id="91af4-322">Notice that because hello database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="91af4-323">Déclencheurs et procédures stockées interagissent avec les documents dans une collection via un modèle d’objet bien défini, qui expose le contexte actuel de la collecte de hello hello et de la collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-323">Stored procedures and triggers interact with a collection and hello documents in a collection through a well-defined object model, which exposes hello current collection context.</span></span>  

<span data-ttu-id="91af4-324">Collections Bonjour API DocumentDB peuvent être créé, supprimés, lire ou énumérées facilement à l’aide soit hello [API REST](/rest/api/documentdb/) ou l’une des hello [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-324">Collections in hello DocumentDB API can be created, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="91af4-325">Hello API DocumentDB fournit toujours à forte cohérence pour la lecture ou l’interrogation des métadonnées hello d’une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-325">hello DocumentDB API always provides strong consistency for reading or querying hello metadata of a collection.</span></span> <span data-ttu-id="91af4-326">Suppression d’un regroupement automatiquement garantit que vous ne peut pas accéder aux documents de hello, les pièces jointes, procédures stockées, déclencheurs et UDF qu’il contient.</span><span class="sxs-lookup"><span data-stu-id="91af4-326">Deleting a collection automatically ensures that you cannot access any of hello documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="91af4-327">Procédures stockées, déclencheurs et fonctions définies par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="91af4-328">Comme décrit dans la section précédente de hello, vous pouvez écrire toorun de logique d’application directement dans une transaction à l’intérieur du moteur de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-328">As described in hello previous section, you can write application logic toorun directly within a transaction inside of hello database engine.</span></span> <span data-ttu-id="91af4-329">logique de l’application Hello peut être entièrement écrit en JavaScript et peut être modélisée comme une procédure stockée, déclencheur ou un fichier UDF.</span><span class="sxs-lookup"><span data-stu-id="91af4-329">hello application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="91af4-330">Hello du code JavaScript au sein d’une procédure stockée ou un déclencheur peut insérer, remplacer, supprimer, des documents de lecture ou de la requête dans une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-330">hello JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="91af4-331">Sur hello autre part, hello JavaScript dans un fichier UDF ne peut pas insérer, remplacer ou supprimer des documents.</span><span class="sxs-lookup"><span data-stu-id="91af4-331">On hello other hand, hello JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="91af4-332">UDF énumérer les documents hello du jeu de résultats d’une requête et produisent un autre jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="91af4-332">UDFs enumerate hello documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="91af4-333">Cosmos DB applique une gouvernance des ressources basée sur une réservation stricte aux architectures mutualisées.</span><span class="sxs-lookup"><span data-stu-id="91af4-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="91af4-334">Chaque procédure stockée, déclencheur ou un fichier UDF Obtient un quantum fixe de toodo de ressources de système d’exploitation son travail.</span><span class="sxs-lookup"><span data-stu-id="91af4-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources toodo its work.</span></span> <span data-ttu-id="91af4-335">En outre, les procédures stockées, des déclencheurs ou des UDF ne peut pas lier les bibliothèques JavaScript externes et sur liste noire si elles dépassent les budgets de ressources hello allouées toothem.</span><span class="sxs-lookup"><span data-stu-id="91af4-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed hello resource budgets allocated toothem.</span></span> <span data-ttu-id="91af4-336">Vous pouvez inscrire, annuler l’inscription des procédures stockées, des déclencheurs ou des UDF avec une collection à l’aide de hello API REST.</span><span class="sxs-lookup"><span data-stu-id="91af4-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using hello REST APIs.</span></span>  <span data-ttu-id="91af4-337">Une fois enregistrés, ils sont précompilés et stockés en tant que codes d'octets et sont exécutés ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="91af4-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="91af4-338">Hello après section illustre comment vous pouvez utiliser hello Cosmos DB JavaScript SDK tooregister, exécuter et annuler l’inscription d’une procédure stockée, déclencheur et un fichier UDF.</span><span class="sxs-lookup"><span data-stu-id="91af4-338">hello following section illustrate how you can use hello Cosmos DB JavaScript SDK tooregister, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="91af4-339">Hello SDK JavaScript est un simple wrapper sur hello [API REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="91af4-339">hello JavaScript SDK is a simple wrapper over hello [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="91af4-340">Enregistrement d'une procédure stockée</span><span class="sxs-lookup"><span data-stu-id="91af4-340">Registering a stored procedure</span></span>
<span data-ttu-id="91af4-341">L'enregistrement d'une procédure stockée crée une ressource de procédure stockée dans une collection via HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="91af4-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="91af4-342">Exécution d'une procédure stockée</span><span class="sxs-lookup"><span data-stu-id="91af4-342">Executing a stored procedure</span></span>
<span data-ttu-id="91af4-343">L’exécution d’une procédure stockée est effectuée en émettant une requête HTTP POST par rapport à une ressource de procédure stockée existante en passant les paramètres toohello procédure dans le corps de la demande hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters toohello procedure in hello request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="91af4-344">Annulation de l'enregistrement d'une procédure stockée</span><span class="sxs-lookup"><span data-stu-id="91af4-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="91af4-345">Pour annuler l’enregistrement d’une procédure stockée, il suffit d’émettre une instruction HTTP DELETE sur une ressource de procédure stockée existante.</span><span class="sxs-lookup"><span data-stu-id="91af4-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="91af4-346">Enregistrement d'un pré-déclencheur</span><span class="sxs-lookup"><span data-stu-id="91af4-346">Registering a pre-trigger</span></span>
<span data-ttu-id="91af4-347">L'enregistrement d'un déclencheur s'effectue en créant une ressource de déclencheur dans une collection via HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="91af4-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="91af4-348">Vous pouvez spécifier si déclencheur de hello est un antérieur ou un type de déclencheur et hello post d’opération peut être associée à (par exemple, créer, remplacer, supprimer ou tous).</span><span class="sxs-lookup"><span data-stu-id="91af4-348">You can specify if hello trigger is a pre or a post trigger and hello type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="91af4-349">Exécution d'un pré-déclencheur</span><span class="sxs-lookup"><span data-stu-id="91af4-349">Executing a pre-trigger</span></span>
<span data-ttu-id="91af4-350">L’exécution d’un déclencheur est effectuée en spécifiant le nom hello d’un déclencheur existant au moment de hello d’émettre la demande POST ou PUT/suppression de hello d’une ressource de document via l’en-tête de demande hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-350">Execution of a trigger is done by specifying hello name of an existing trigger at hello time of issuing hello POST/PUT/DELETE request of a document resource via hello request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in hello Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="91af4-351">Annulation de l'enregistrement d'un pré-déclencheur</span><span class="sxs-lookup"><span data-stu-id="91af4-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="91af4-352">Pour annuler l’enregistrement d’un déclencheur, il suffit d’émettre une instruction HTTP DELETE sur une ressource de déclencheur existante.</span><span class="sxs-lookup"><span data-stu-id="91af4-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="91af4-353">Enregistrement d'une fonction définie par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-353">Registering a UDF</span></span>
<span data-ttu-id="91af4-354">L'enregistrement d'une fonction définie par l'utilisateur s'effectue en créant une ressource de fonction définie par l'utilisateur dans une collection via HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="91af4-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-hello-query"></a><span data-ttu-id="91af4-355">L’exécution d’une UDF dans le cadre de la requête de hello</span><span class="sxs-lookup"><span data-stu-id="91af4-355">Executing a UDF as part of hello query</span></span>
<span data-ttu-id="91af4-356">Un fichier UDF peut être spécifié dans le cadre de la requête SQL hello et est utilisé comme un cœur de hello moyen tooextend [langage de requête SQL hello API DocumentDB](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="91af4-356">A UDF can be specified as part of hello SQL query and is used as a way tooextend hello core [SQL query language for hello DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="91af4-357">Annulation de l'enregistrement d'une fonction définie par l'utilisateur</span><span class="sxs-lookup"><span data-stu-id="91af4-357">Unregistering a UDF</span></span>
<span data-ttu-id="91af4-358">Pour annuler l’enregistrement d’une fonction définie par l’utilisateur, il suffit d’émettre une instruction HTTP DELETE sur une ressource de fonction définie par l’utilisateur existante.</span><span class="sxs-lookup"><span data-stu-id="91af4-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="91af4-359">Bien que des extraits de code hello ci-dessus a montré l’inscription de hello (POST), d’annulation d’inscription (PUT), liste/lecture (GET) et l’exécution (POST) via hello [SDK JavaScript](https://github.com/Azure/azure-documentdb-js), vous pouvez également utiliser hello [API REST](/rest/api/documentdb/) ou autres [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-359">Although hello snippets above showed hello registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via hello [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use hello [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="91af4-360">Documents</span><span class="sxs-lookup"><span data-stu-id="91af4-360">Documents</span></span>
<span data-ttu-id="91af4-361">Vous pouvez insérer, remplacer, supprimer, lire, énumérer et interroger arbitrairement des documents JSON dans une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="91af4-362">COSMOS DB n’impose pas de n’importe quel schéma et ne nécessite pas d’index secondaires dans toosupport commande interrogation sur des documents dans une collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order toosupport querying over documents in a collection.</span></span> <span data-ttu-id="91af4-363">taille maximale de Hello pour un document est 2 Mo.</span><span class="sxs-lookup"><span data-stu-id="91af4-363">hello maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="91af4-364">En étant un service de base de données véritablement ouvert, Cosmos DB n’invente pas de types de données spécialisés (par exemple, les valeurs de date et heure) ou d’encodage spécifique pour les documents JSON.</span><span class="sxs-lookup"><span data-stu-id="91af4-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="91af4-365">Notez que Cosmos DB ne requiert pas de n’importe quel spéciaux JSON conventions toocodify hello des relations entre les divers documents ; Hello SQL syntaxe de base de données Cosmos fournit des opérateurs de requête très puissante de relationnelle et hiérarchique tooquery et projet des documents sans annotations spéciales ou des relations de toocodify nécessaire entre les documents à l’aide des propriétés distinctives.</span><span class="sxs-lookup"><span data-stu-id="91af4-365">Note that Cosmos DB does not require any special JSON conventions toocodify hello relationships among various documents; hello SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators tooquery and project documents without any special annotations or need toocodify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="91af4-366">Comme avec toutes les autres ressources, vous pouvez créer des documents, remplacées, supprimé, lire, énumérées et interrogé facilement à l’aide des API REST ou des hello [client SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="91af4-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="91af4-367">Suppression d’un document instantanément libère tooall correspondante de quota hello de pièces jointes de hello imbriqué.</span><span class="sxs-lookup"><span data-stu-id="91af4-367">Deleting a document instantly frees up hello quota corresponding tooall of hello nested attachments.</span></span> <span data-ttu-id="91af4-368">Hello en lecture au niveau de la cohérence des documents suit la règle de cohérence hello sur le compte de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-368">hello read consistency level of documents follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="91af4-369">Vous pouvez remplacer cette stratégie en fonction de la demande, selon les besoins de cohérence des données de votre application.</span><span class="sxs-lookup"><span data-stu-id="91af4-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="91af4-370">Lors de l’interrogation de documents, hello lire cohérence suit hello est définie sur la collection de hello de mode d’indexation.</span><span class="sxs-lookup"><span data-stu-id="91af4-370">When querying documents, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="91af4-371">Pour « cohérent », il suit la règle de cohérence du compte hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-371">For “consistent”, this follows hello account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="91af4-372">Pièces jointes et éléments multimédias</span><span class="sxs-lookup"><span data-stu-id="91af4-372">Attachments and media</span></span>
<span data-ttu-id="91af4-373">COSMOS DB vous permet de toostore binaire BLOB/média avec Cosmos DB (maximum de 2 Go par compte) ou tooyour multimédias à distance propre magasin.</span><span class="sxs-lookup"><span data-stu-id="91af4-373">Cosmos DB allows you toostore binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or tooyour own remote media store.</span></span> <span data-ttu-id="91af4-374">Il vous permet également métadonnées de hello toorepresent d’un support en termes d’un document spécial appelé pièce jointe.</span><span class="sxs-lookup"><span data-stu-id="91af4-374">It also allows you toorepresent hello metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="91af4-375">Une pièce jointe dans la base de données Cosmos est un document (JSON) spécial références hello multimédia/objet blob stocké ailleurs.</span><span class="sxs-lookup"><span data-stu-id="91af4-375">An attachment in Cosmos DB is a special (JSON) document that references hello media/blob stored elsewhere.</span></span> <span data-ttu-id="91af4-376">Une pièce jointe est simplement un document spécial qui capture des métadonnées hello (emplacement, auteur, etc.) d’un support stocké dans un stockage à distance.</span><span class="sxs-lookup"><span data-stu-id="91af4-376">An attachment is simply a special document that captures hello metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="91af4-377">Considérons une application de lecture social qui utilise des annotations manuscrites de toostore Cosmos de base de données et métadonnées, y compris les commentaires, met en surbrillance, signets, les évaluations, aime/goûts etc. associés pour un livre électronique d’un utilisateur donné.</span><span class="sxs-lookup"><span data-stu-id="91af4-377">Consider a social reading application which uses Cosmos DB toostore ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="91af4-378">Hello contenu du livre hello lui-même est stocké dans le stockage des supports hello soit disponible en tant que partie d’un compte de base de données de base de données Cosmos ou d’un magasin de support à distance.</span><span class="sxs-lookup"><span data-stu-id="91af4-378">hello content of hello book itself is stored in hello media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="91af4-379">Une application peut stocker chaque métadonnée de l'utilisateur dans un document distinct (par exemple, les métadonnées de Jean pour le livre1 sont stockées dans un document référencé par le chemin /colls/jean/docs/livre1).</span><span class="sxs-lookup"><span data-stu-id="91af4-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="91af4-380">Les pièces jointes pointant vers les pages de contenu toohello d’un livre donné d’un utilisateur sont stockés dans le document correspondant de hello /colls/joe/docs/book1/chapter1, par exemple, /colls/joe/docs/book1/chapter2 etc..</span><span class="sxs-lookup"><span data-stu-id="91af4-380">Attachments pointing toohello content pages of a given book of a user are stored under hello corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="91af4-381">Notez que les exemples hello répertoriés ci-dessus utilisent la hiérarchie des ressources ID convivial tooconvey hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-381">Note that hello examples listed above use friendly ids tooconvey hello resource hierarchy.</span></span> <span data-ttu-id="91af4-382">Ressources accessibles via des API REST de hello via l’ID de ressource unique.</span><span class="sxs-lookup"><span data-stu-id="91af4-382">Resources are accessed via hello REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="91af4-383">Pour les supports hello qui est géré par la base de données Cosmos, propriété _media de hello de pièce jointe de hello référence media hello par son URI.</span><span class="sxs-lookup"><span data-stu-id="91af4-383">For hello media that is managed by Cosmos DB, hello _media property of hello attachment will reference hello media by its URI.</span></span> <span data-ttu-id="91af4-384">COSMOS DB garantit media de collecter hello toogarbage lorsque toutes les références en suspens hello sont supprimés.</span><span class="sxs-lookup"><span data-stu-id="91af4-384">Cosmos DB will ensure toogarbage collect hello media when all of hello outstanding references are dropped.</span></span> <span data-ttu-id="91af4-385">COSMOS DB génère la pièce jointe de hello lorsque vous téléchargez de nouveau support de sauvegarde hello et renseigne automatiquement des hello _media toopoint toohello nouvellement ajoutée media.</span><span class="sxs-lookup"><span data-stu-id="91af4-385">Cosmos DB automatically generates hello attachment when you upload hello new media and populates hello _media toopoint toohello newly added media.</span></span> <span data-ttu-id="91af4-386">Si vous choisissez le support de hello toostore dans un magasin d’objets blob distants géré par vous (par exemple OneDrive, le stockage Azure, DropBox etc.), vous pouvez toujours utiliser le support de pièces jointes tooreference hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-386">If you choose toostore hello media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments tooreference hello media.</span></span> <span data-ttu-id="91af4-387">Dans ce cas, vous serez créer vous-même les pièces jointes de hello et remplissez sa propriété _media.</span><span class="sxs-lookup"><span data-stu-id="91af4-387">In this case, you will create hello attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="91af4-388">Comme avec toutes les autres ressources, les pièces jointes peuvent être créés, remplacé, supprimer, lire ou énumérées facilement à l’aide des API REST ou des clients de hello kits de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="91af4-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="91af4-389">Comme des documents, hello lire le niveau de cohérence de pièces jointes suit la règle de cohérence hello sur le compte de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-389">As with documents, hello read consistency level of attachments follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="91af4-390">Vous pouvez remplacer cette stratégie en fonction de la demande, selon les besoins de cohérence des données de votre application.</span><span class="sxs-lookup"><span data-stu-id="91af4-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="91af4-391">Lors de l’interrogation pour les pièces jointes, hello lire cohérence suit hello est définie sur la collection de hello de mode d’indexation.</span><span class="sxs-lookup"><span data-stu-id="91af4-391">When querying for attachments, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="91af4-392">Pour « cohérent », il suit la règle de cohérence du compte hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-392">For “consistent”, this follows hello account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="91af4-393">Utilisateurs</span><span class="sxs-lookup"><span data-stu-id="91af4-393">Users</span></span>
<span data-ttu-id="91af4-394">Un utilisateur de Cosmos DB correspond à un espace de noms logique pour le regroupement des autorisations.</span><span class="sxs-lookup"><span data-stu-id="91af4-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="91af4-395">Un utilisateur de base de données Cosmos peut-être correspondre tooa utilisateur dans un système de gestion d’identité ou un rôle d’application prédéfinie.</span><span class="sxs-lookup"><span data-stu-id="91af4-395">A Cosmos DB user may correspond tooa user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="91af4-396">Pour la base de données Cosmos, un utilisateur représente simplement un toogroup abstraction un jeu d’autorisations dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="91af4-396">For Cosmos DB, a user simply represents an abstraction toogroup a set of permissions under a database.</span></span>   

<span data-ttu-id="91af4-397">Pour implémenter une architecture mutualisée dans votre application, vous pouvez créer des utilisateurs dans DB Cosmos correspondant utilisateurs réels de tooyour ou locataires hello de votre application.</span><span class="sxs-lookup"><span data-stu-id="91af4-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds tooyour actual users or hello tenants of your application.</span></span> <span data-ttu-id="91af4-398">Vous pouvez ensuite créer des autorisations pour un utilisateur donné qui correspondent toohello le contrôle d’accès sur les différentes collections, documents, pièces jointes, etc..</span><span class="sxs-lookup"><span data-stu-id="91af4-398">You can then create permissions for a given user that correspond toohello access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="91af4-399">Comme vos applications ont besoin tooscale avec la croissance de l’utilisateur, vous pouvez adopter différentes méthodes tooshard vos données.</span><span class="sxs-lookup"><span data-stu-id="91af4-399">As your applications need tooscale with your user growth, you can adopt various ways tooshard your data.</span></span> <span data-ttu-id="91af4-400">Vous pouvez modéliser chacun de vos utilisateurs comme suit :</span><span class="sxs-lookup"><span data-stu-id="91af4-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="91af4-401">Chaque utilisateur est mappé à tooa de base de données.</span><span class="sxs-lookup"><span data-stu-id="91af4-401">Each user maps tooa database.</span></span>
* <span data-ttu-id="91af4-402">Chaque utilisateur est mappé à tooa collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-402">Each user maps tooa collection.</span></span> 
* <span data-ttu-id="91af4-403">Les documents correspondant aux utilisateurs de toomultiple accédez tooa dédiée de collection.</span><span class="sxs-lookup"><span data-stu-id="91af4-403">Documents corresponding toomultiple users go tooa dedicated collection.</span></span> 
* <span data-ttu-id="91af4-404">Les documents correspondant aux utilisateurs de toomultiple accédez jeu tooa de collections.</span><span class="sxs-lookup"><span data-stu-id="91af4-404">Documents corresponding toomultiple users go tooa set of collections.</span></span>   

<span data-ttu-id="91af4-405">Quel que soit le choix de la stratégie de partitionnement spécifique de hello, vous pouvez modéliser vos utilisateurs réels en tant qu’utilisateurs de base de données de la base de données Cosmos et associer des autorisations de granularité fine tooeach utilisateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-405">Regardless of hello specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions tooeach user.</span></span>  

<span data-ttu-id="91af4-406">![Regroupements d’utilisateurs][3]</span><span class="sxs-lookup"><span data-stu-id="91af4-406">![User collections][3]</span></span>  
<span data-ttu-id="91af4-407">**Stratégies de partitionnement et modélisation des utilisateurs**</span><span class="sxs-lookup"><span data-stu-id="91af4-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="91af4-408">Comme toutes les autres ressources, les utilisateurs de base de données Cosmos peuvent être créés, remplacé, supprimer, lire ou énumérées facilement à l’aide des API REST ou des clients de hello kits de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="91af4-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="91af4-409">COSMOS DB fournit toujours à forte cohérence pour la lecture ou l’interrogation des métadonnées hello d’une ressource de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-409">Cosmos DB always provides strong consistency for reading or querying hello metadata of a user resource.</span></span> <span data-ttu-id="91af4-410">Il est important de noter que la suppression d’un utilisateur automatiquement garantit que les autorisations hello qu’il contient ne peut pas accéder à.</span><span class="sxs-lookup"><span data-stu-id="91af4-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of hello permissions contained within it.</span></span> <span data-ttu-id="91af4-411">Même si hello Cosmos DB récupère quota hello d’autorisations de hello dans le cadre de l’utilisateur hello supprimé en arrière-plan de hello, les autorisations hello supprimé est instantanément à nouveau disponible pour vous toouse.</span><span class="sxs-lookup"><span data-stu-id="91af4-411">Even though hello Cosmos DB reclaims hello quota of hello permissions as part of hello deleted user in hello background, hello deleted permissions is available instantly again for you toouse.</span></span>  

## <a name="permissions"></a><span data-ttu-id="91af4-412">Autorisations</span><span class="sxs-lookup"><span data-stu-id="91af4-412">Permissions</span></span>
<span data-ttu-id="91af4-413">Pour le contrôle des accès, les ressources telles que les comptes de base de données, les bases de données, les utilisateurs et les autorisations sont considérées comme des ressources d’ *administration* , car elles requièrent des privilèges d’administrateur.</span><span class="sxs-lookup"><span data-stu-id="91af4-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="91af4-414">Sur hello autre part, y compris les collections hello, documents, pièces jointes, procédures stockées, déclencheurs, des ressources et UDF sont limitent sous une base de données et considérées comme *ressources d’application*.</span><span class="sxs-lookup"><span data-stu-id="91af4-414">On hello other hand, resources including hello collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="91af4-415">Correspondant toohello deux types de ressources et rôles hello y accéder (à savoir un administrateur de hello et utilisateur), le modèle d’autorisation de hello définit deux types de *clés d’accès*: *clé principale* et *clé de ressource*.</span><span class="sxs-lookup"><span data-stu-id="91af4-415">Corresponding toohello two types of resources and hello roles that access them (namely hello administrator and user), hello authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="91af4-416">clé principale de Hello fait partie d’un compte de base de données hello et est fournie toohello développeur (ou l’administrateur) qui est mise en service de compte de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-416">hello master key is a part of hello database account and is provided toohello developer (or administrator) who is provisioning hello database account.</span></span> <span data-ttu-id="91af4-417">Cette clé principale intègre la sémantique de l’administrateur, dans la mesure où il peut être utilisé tooauthorize tooboth de l’accès d’administration et les ressources d’application.</span><span class="sxs-lookup"><span data-stu-id="91af4-417">This master key has administrator semantics, in that it can be used tooauthorize access tooboth administrative and application resources.</span></span> <span data-ttu-id="91af4-418">En revanche, une clé de ressource est une clé d’accès granulaires qui permet l’accès tooa *spécifique* ressource d’application.</span><span class="sxs-lookup"><span data-stu-id="91af4-418">In contrast, a resource key is a granular access key that allows access tooa *specific* application resource.</span></span> <span data-ttu-id="91af4-419">Par conséquent, il capture relation hello entre une base de données utilisateur hello et hello autorisations hello utilisateur dispose d’une ressource spécifique (par exemple, collection, document, pièce jointe, procédure stockée, déclencheur ou UDF).</span><span class="sxs-lookup"><span data-stu-id="91af4-419">Thus, it captures hello relationship between hello user of a database and hello permissions hello user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="91af4-420">Hello tooobtain de façon uniquement qu'une clé de ressource est en créant une ressource d’autorisation sous un utilisateur donné.</span><span class="sxs-lookup"><span data-stu-id="91af4-420">hello only way tooobtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="91af4-421">Notez que, dans l’ordre toocreate ou récupérer une autorisation, une clé principale doit être présentée dans l’en-tête d’autorisation hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-421">Note that In order toocreate or retrieve a permission, a master key must be presented in hello authorization header.</span></span> <span data-ttu-id="91af4-422">Une ressource autorisation lie un utilisateur de ressources, accès et hello hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-422">A permission resource ties hello resource, its access and hello user.</span></span> <span data-ttu-id="91af4-423">Après avoir créé une ressource d’autorisation, utilisateur de hello doit uniquement toopresent clé de ressource associée hello dans l’ordre toogain accès toohello ressource.</span><span class="sxs-lookup"><span data-stu-id="91af4-423">After creating a permission resource, hello user only needs toopresent hello associated resource key in order toogain access toohello relevant resource.</span></span> <span data-ttu-id="91af4-424">Par conséquent, une clé de ressource peut être considérée comme une représentation logique et compacte de ressource d’autorisation hello.</span><span class="sxs-lookup"><span data-stu-id="91af4-424">Hence, a resource key can be viewed as a logical and compact representation of hello permission resource.</span></span>  

<span data-ttu-id="91af4-425">Comme avec toutes les autres ressources, autorisations dans la base de données Cosmos peuvent être créées, remplacé, supprimer, lire ou énumérées facilement à l’aide des API REST ou des clients de hello kits de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="91af4-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="91af4-426">COSMOS DB fournit toujours à forte cohérence pour la lecture ou l’interrogation des métadonnées hello d’une autorisation.</span><span class="sxs-lookup"><span data-stu-id="91af4-426">Cosmos DB always provides strong consistency for reading or querying hello metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="91af4-427">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="91af4-427">Next steps</span></span>
<span data-ttu-id="91af4-428">Pour en savoir plus sur l’utilisation des ressources avec des commandes HTTP, consultez l’article [RESTful interactions with Cosmos DB resources (Interactions RESTful avec les ressources Cosmos DB)](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="91af4-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

