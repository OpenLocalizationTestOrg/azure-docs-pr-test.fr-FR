---
title: "aaaAccess le coffre de clés derrière un pare-feu | Documents Microsoft"
description: "Découvrez comment tooaccess Azure Key Vault à partir d’une application derrière un pare-feu"
services: key-vault
documentationcenter: 
author: amitbapat
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: 50d21774-2ee1-4212-8995-570c9de603c5
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 01/07/2017
ms.author: ambapat
ms.openlocfilehash: ab4bb0c27a41fef878a20dace6cab203df04e579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="access-azure-key-vault-behind-a-firewall"></a><span data-ttu-id="bd09c-103">Accès à Azure Key Vault derrière un pare-feu</span><span class="sxs-lookup"><span data-stu-id="bd09c-103">Access Azure Key Vault behind a firewall</span></span>
### <a name="q-my-key-vault-client-application-needs-toobe-behind-a-firewall-what-ports-hosts-or-ip-addresses-should-i-open-tooenable-access-tooa-key-vault"></a><span data-ttu-id="bd09c-104">Q : mon application cliente de coffre de clés doit toobe derrière un pare-feu.</span><span class="sxs-lookup"><span data-stu-id="bd09c-104">Q: My key vault client application needs toobe behind a firewall.</span></span> <span data-ttu-id="bd09c-105">Les ports, les hôtes ou des adresses IP dois-je ouvrir le coffre de clés tooenable accès tooa ?</span><span class="sxs-lookup"><span data-stu-id="bd09c-105">What ports, hosts, or IP addresses should I open tooenable access tooa key vault?</span></span>
<span data-ttu-id="bd09c-106">tooaccess un coffre de clés, votre application cliente de coffre de clés a tooaccess plusieurs points de terminaison pour diverses fonctionnalités :</span><span class="sxs-lookup"><span data-stu-id="bd09c-106">tooaccess a key vault, your key vault client application has tooaccess multiple endpoints for various functionalities:</span></span>

* <span data-ttu-id="bd09c-107">Authentification via Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="bd09c-107">Authentication via Azure Active Directory (Azure AD).</span></span>
* <span data-ttu-id="bd09c-108">Gestion d’un coffre Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="bd09c-108">Management of Azure Key Vault.</span></span> <span data-ttu-id="bd09c-109">Cela inclut la création, la lecture, la mise à jour, la suppression et la définition de stratégies d’accès par le biais d’Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="bd09c-109">This includes creating, reading, updating, deleting, and setting access policies through Azure Resource Manager.</span></span>
* <span data-ttu-id="bd09c-110">Accès et gestion des objets (clés et les secrets) stockés dans le coffre de clés lui-même, traverser hello de point de terminaison spécifique de coffre de clé (par exemple, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span><span class="sxs-lookup"><span data-stu-id="bd09c-110">Accessing and managing objects (keys and secrets) stored in Key Vault itself, going through hello Key Vault-specific endpoint (for example, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span></span>  

<span data-ttu-id="bd09c-111">Il existe des variantes selon votre configuration et l’environnement.</span><span class="sxs-lookup"><span data-stu-id="bd09c-111">Depending on your configuration and environment, there are some variations.</span></span>   

## <a name="ports"></a><span data-ttu-id="bd09c-112">Ports</span><span class="sxs-lookup"><span data-stu-id="bd09c-112">Ports</span></span>
<span data-ttu-id="bd09c-113">Tous les coffre de clés de tooa le trafic pour les trois fonctions (accès de plan d’authentification, de gestion et de données) passe via le protocole HTTPS : le port 443.</span><span class="sxs-lookup"><span data-stu-id="bd09c-113">All traffic tooa key vault for all three functions (authentication, management, and data plane access) goes over HTTPS: port 443.</span></span> <span data-ttu-id="bd09c-114">Cependant, il faut compter occasionnellement sur un trafic HTTP (port 80) pour les CRL.</span><span class="sxs-lookup"><span data-stu-id="bd09c-114">However, there will occasionally be HTTP (port 80) traffic for CRL.</span></span> <span data-ttu-id="bd09c-115">Les clients qui prennent en charge le protocole OCSP ne doivent pas atteindre les CRL, mais peuvent occasionnellement atteindre [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span><span class="sxs-lookup"><span data-stu-id="bd09c-115">Clients that support OCSP shouldn't reach CRL, but may occasionally reach [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span></span>  

## <a name="authentication"></a><span data-ttu-id="bd09c-116">Authentification</span><span class="sxs-lookup"><span data-stu-id="bd09c-116">Authentication</span></span>
<span data-ttu-id="bd09c-117">Applications clientes de coffre de clés doivent tooaccess points de terminaison Azure Active Directory pour l’authentification.</span><span class="sxs-lookup"><span data-stu-id="bd09c-117">Key vault client applications will need tooaccess Azure Active Directory endpoints for authentication.</span></span> <span data-ttu-id="bd09c-118">point de terminaison Hello utilisé dépend de la configuration de client Azure AD hello, de type hello du principal (UPN ou principal de service) et hello type de compte--par exemple, un compte Microsoft ou un professionnel ou scolaire compte.</span><span class="sxs-lookup"><span data-stu-id="bd09c-118">hello endpoint used depends on hello Azure AD tenant configuration, hello type of principal (user principal or service principal), and hello type of account--for example, a Microsoft account or a work or school account.</span></span>  

| <span data-ttu-id="bd09c-119">Type de principal</span><span class="sxs-lookup"><span data-stu-id="bd09c-119">Principal type</span></span> | <span data-ttu-id="bd09c-120">Point de terminaison:port</span><span class="sxs-lookup"><span data-stu-id="bd09c-120">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="bd09c-121">Utilisateur utilisant un compte Microsoft</span><span class="sxs-lookup"><span data-stu-id="bd09c-121">User using Microsoft account</span></span><br> <span data-ttu-id="bd09c-122">(par exemple, user@hotmail.com)</span><span class="sxs-lookup"><span data-stu-id="bd09c-122">(for example, user@hotmail.com)</span></span> |<span data-ttu-id="bd09c-123">**Mondial :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-123">**Global:**</span></span><br> <span data-ttu-id="bd09c-124">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-124">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="bd09c-125">**Azure en Chine :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-125">**Azure China:**</span></span><br> <span data-ttu-id="bd09c-126">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-126">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="bd09c-127">**Azure US Government :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-127">**Azure US Government:**</span></span><br> <span data-ttu-id="bd09c-128">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-128">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="bd09c-129">**Azure Germany :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-129">**Azure Germany:**</span></span><br> <span data-ttu-id="bd09c-130">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-130">login.microsoftonline.de:443</span></span><br><br> <span data-ttu-id="bd09c-131">and</span><span class="sxs-lookup"><span data-stu-id="bd09c-131">and</span></span> <br><span data-ttu-id="bd09c-132">login.live.com:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-132">login.live.com:443</span></span> |
| <span data-ttu-id="bd09c-133">Utilisateur ou au principal de service à l’aide d’un compte professionnel ou scolaire avec Azure AD (par exemple, user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="bd09c-133">User or service principal using a work or school account with Azure AD (for example, user@contoso.com)</span></span> |<span data-ttu-id="bd09c-134">**Mondial :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-134">**Global:**</span></span><br> <span data-ttu-id="bd09c-135">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-135">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="bd09c-136">**Azure en Chine :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-136">**Azure China:**</span></span><br> <span data-ttu-id="bd09c-137">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-137">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="bd09c-138">**Azure US Government :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-138">**Azure US Government:**</span></span><br> <span data-ttu-id="bd09c-139">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-139">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="bd09c-140">**Azure Germany :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-140">**Azure Germany:**</span></span><br> <span data-ttu-id="bd09c-141">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-141">login.microsoftonline.de:443</span></span> |
| <span data-ttu-id="bd09c-142">Utilisateur ou au principal de service à l’aide d’un travail ou compte scolaire, ainsi que les Services de fédération Active Directory (AD FS) ou autre point de terminaison fédéré (par exemple, user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="bd09c-142">User or service principal using a work or school account, plus Active Directory Federation Services (AD FS) or other federated endpoint (for example, user@contoso.com)</span></span> |<span data-ttu-id="bd09c-143">Tous les points de terminaison correspondant à un compte professionnel ou scolaire, plus AD FS ou d’autres points de terminaison fédérés</span><span class="sxs-lookup"><span data-stu-id="bd09c-143">All endpoints for a work or school account, plus AD FS or other federated endpoints</span></span> |

<span data-ttu-id="bd09c-144">D’autres scénarios complexes sont possibles.</span><span class="sxs-lookup"><span data-stu-id="bd09c-144">There are other possible complex scenarios.</span></span> <span data-ttu-id="bd09c-145">Consultez trop[Active Directory flux d’authentification Azure](/documentation/articles/active-directory-authentication-scenarios/), [intégration d’Applications avec Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), et [des protocoles d’authentification Active Directory](https://msdn.microsoft.com/library/azure/dn151124.aspx) Pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="bd09c-145">Refer too[Azure Active Directory Authentication Flow](/documentation/articles/active-directory-authentication-scenarios/), [Integrating Applications with Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), and [Active Directory Authentication Protocols](https://msdn.microsoft.com/library/azure/dn151124.aspx) for additional information.</span></span>  

## <a name="key-vault-management"></a><span data-ttu-id="bd09c-146">Gestion de Key Vault</span><span class="sxs-lookup"><span data-stu-id="bd09c-146">Key Vault management</span></span>
<span data-ttu-id="bd09c-147">Pour la gestion de coffre de clés (CRUD et la définition de la stratégie d’accès), application cliente de coffre de clés hello doit tooaccess un point de terminaison Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="bd09c-147">For Key Vault management (CRUD and setting access policy), hello key vault client application needs tooaccess an Azure Resource Manager endpoint.</span></span>  

| <span data-ttu-id="bd09c-148">Type d’opération</span><span class="sxs-lookup"><span data-stu-id="bd09c-148">Type of operation</span></span> | <span data-ttu-id="bd09c-149">Point de terminaison:port</span><span class="sxs-lookup"><span data-stu-id="bd09c-149">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="bd09c-150">Opérations du plan de contrôle Key Vault</span><span class="sxs-lookup"><span data-stu-id="bd09c-150">Key Vault control plane operations</span></span><br> <span data-ttu-id="bd09c-151">via Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="bd09c-151">via Azure Resource Manager</span></span> |<span data-ttu-id="bd09c-152">**Mondial :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-152">**Global:**</span></span><br> <span data-ttu-id="bd09c-153">management.azure.com:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-153">management.azure.com:443</span></span><br><br> <span data-ttu-id="bd09c-154">**Azure China :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-154">**Azure China:**</span></span><br> <span data-ttu-id="bd09c-155">management.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-155">management.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="bd09c-156">**Azure US Government :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-156">**Azure US Government:**</span></span><br> <span data-ttu-id="bd09c-157">management.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-157">management.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="bd09c-158">**Azure Germany :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-158">**Azure Germany:**</span></span><br> <span data-ttu-id="bd09c-159">management.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-159">management.microsoftazure.de:443</span></span> |
| <span data-ttu-id="bd09c-160">API Graph Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="bd09c-160">Azure Active Directory Graph API</span></span> |<span data-ttu-id="bd09c-161">**Mondial :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-161">**Global:**</span></span><br> <span data-ttu-id="bd09c-162">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-162">graph.windows.net:443</span></span><br><br> <span data-ttu-id="bd09c-163">**Azure en Chine :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-163">**Azure China:**</span></span><br> <span data-ttu-id="bd09c-164">graph.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-164">graph.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="bd09c-165">**Azure US Government :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-165">**Azure US Government:**</span></span><br> <span data-ttu-id="bd09c-166">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-166">graph.windows.net:443</span></span><br><br> <span data-ttu-id="bd09c-167">**Azure Germany :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-167">**Azure Germany:**</span></span><br> <span data-ttu-id="bd09c-168">graph.cloudapi.de:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-168">graph.cloudapi.de:443</span></span> |

## <a name="key-vault-operations"></a><span data-ttu-id="bd09c-169">Opérations Key Vault</span><span class="sxs-lookup"><span data-stu-id="bd09c-169">Key Vault operations</span></span>
<span data-ttu-id="bd09c-170">Pour toute la gestion d’objet (clés et les secrets) de coffre de clés et opérations de chiffrement, client de coffre de clés de hello nécessite un point de terminaison tooaccess hello coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="bd09c-170">For all key vault object (keys and secrets) management and cryptographic operations, hello key vault client needs tooaccess hello key vault endpoint.</span></span> <span data-ttu-id="bd09c-171">suffixe DNS de point de terminaison Hello varie en fonction de l’emplacement de hello de votre coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="bd09c-171">hello endpoint DNS suffix varies depending on hello location of your key vault.</span></span> <span data-ttu-id="bd09c-172">point de terminaison de coffre de clés Hello est hello format *-nom du coffre*. *spécifique à la région-suffixe dns*, comme décrit dans hello tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="bd09c-172">hello key vault endpoint is of hello format *vault-name*.*region-specific-dns-suffix*, as described in hello following table.</span></span>  

| <span data-ttu-id="bd09c-173">Type d’opération</span><span class="sxs-lookup"><span data-stu-id="bd09c-173">Type of operation</span></span> | <span data-ttu-id="bd09c-174">Point de terminaison:port</span><span class="sxs-lookup"><span data-stu-id="bd09c-174">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="bd09c-175">Opérations telles que le chiffrement sur les clés, création/lecture/mise à jour/suppression de clés et de secrets, définition/obtention de mots-clés et autres attributs sur objets de coffre de clés (clés ou secrets)</span><span class="sxs-lookup"><span data-stu-id="bd09c-175">Operations including cryptographic operations on keys; creating, reading, updating, and deleting keys and secrets; setting or getting tags and other attributes on key vault objects (keys or secrets)</span></span> |<span data-ttu-id="bd09c-176">**Mondial :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-176">**Global:**</span></span><br> <span data-ttu-id="bd09c-177">&lt;nom du coffre&gt;.vault.azure.net:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-177">&lt;vault-name&gt;.vault.azure.net:443</span></span><br><br> <span data-ttu-id="bd09c-178">**Azure China :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-178">**Azure China:**</span></span><br> <span data-ttu-id="bd09c-179">&lt;nom du coffre&gt;.vault.azure.cn:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-179">&lt;vault-name&gt;.vault.azure.cn:443</span></span><br><br> <span data-ttu-id="bd09c-180">**Azure US Government :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-180">**Azure US Government:**</span></span><br> <span data-ttu-id="bd09c-181">&lt;nom du coffre&gt;.vault.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-181">&lt;vault-name&gt;.vault.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="bd09c-182">**Azure Germany :**</span><span class="sxs-lookup"><span data-stu-id="bd09c-182">**Azure Germany:**</span></span><br> <span data-ttu-id="bd09c-183">&lt;nom du coffre&gt;.vault.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="bd09c-183">&lt;vault-name&gt;.vault.microsoftazure.de:443</span></span> |

## <a name="ip-address-ranges"></a><span data-ttu-id="bd09c-184">Plages d’adresse IP</span><span class="sxs-lookup"><span data-stu-id="bd09c-184">IP address ranges</span></span>
<span data-ttu-id="bd09c-185">Hello service Key Vault utilise d’autres ressources Azure comme infrastructure de PaaS.</span><span class="sxs-lookup"><span data-stu-id="bd09c-185">hello Key Vault service uses other Azure resources like PaaS infrastructure.</span></span> <span data-ttu-id="bd09c-186">Il est donc pas possible de tooprovide un spécifique plage d’adresses IP que le coffre de clés auront des points de terminaison de service à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="bd09c-186">So it's not possible tooprovide a specific range of IP addresses that Key Vault service endpoints will have at any particular time.</span></span> <span data-ttu-id="bd09c-187">Si votre pare-feu prend en charge uniquement les plages d’adresses IP, consultez toohello [plages d’adresses IP Microsoft Azure Datacenter](https://www.microsoft.com/download/details.aspx?id=41653) document.</span><span class="sxs-lookup"><span data-stu-id="bd09c-187">If your firewall supports only IP address ranges, refer toohello [Microsoft Azure Datacenter IP Ranges](https://www.microsoft.com/download/details.aspx?id=41653) document.</span></span> <span data-ttu-id="bd09c-188">Pour l’authentification et l’identité (Azure Active Directory), votre application doit être en mesure de tooconnect points de terminaison de toohello décrites dans [l’authentification et identité des adresses](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="bd09c-188">For authentication and identity (Azure Active Directory), your application must be able tooconnect toohello endpoints described in [Authentication and identity addresses](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span>

## <a name="next-steps"></a><span data-ttu-id="bd09c-189">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="bd09c-189">Next steps</span></span>
<span data-ttu-id="bd09c-190">Si vous avez des questions sur le coffre de clés, visitez hello [Azure Key Vault Forums](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span><span class="sxs-lookup"><span data-stu-id="bd09c-190">If you have questions about Key Vault, visit hello [Azure Key Vault Forums](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span></span>

