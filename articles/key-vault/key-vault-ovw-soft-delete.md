---
ms.assetid: 
title: "suppression réversible de coffre de clés aaaAzure | Documents Microsoft"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="f3a9d-102">Vue d’ensemble de la suppression réversible d’Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="f3a9d-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="f3a9d-103">Fonctionnalité de suppression réversible du coffre de clés permet de récupérer des coffres de hello supprimé et les objets de coffre, appelés soft-suppression.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-103">Key Vault's soft delete feature allows recovery of hello deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="f3a9d-104">Plus précisément, nous adresser hello les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="f3a9d-104">Specifically, we address hello following scenarios:</span></span>

- <span data-ttu-id="f3a9d-105">Prise en charge de la suppression récupérable d’un coffre de clés</span><span class="sxs-lookup"><span data-stu-id="f3a9d-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="f3a9d-106">Prise en charge de la suppression récupérable d’objets Key Vault (par exemple,</span><span class="sxs-lookup"><span data-stu-id="f3a9d-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="f3a9d-107">clés, secrets et certificats)</span><span class="sxs-lookup"><span data-stu-id="f3a9d-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="f3a9d-108">Prise en charge des interfaces</span><span class="sxs-lookup"><span data-stu-id="f3a9d-108">Supporting interfaces</span></span>

<span data-ttu-id="f3a9d-109">Hello soft-suppression fonctionnalité est disponible via hello REST, .NET / C# et PowerShell d’interfaces.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-109">hello soft-delete feature is initially available through hello REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="f3a9d-110">Pour ces valeurs pour plus d’informations, consultez le toohello références [clé de coffre référence](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="f3a9d-110">Refer toohello references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="f3a9d-111">Scénarios</span><span class="sxs-lookup"><span data-stu-id="f3a9d-111">Scenarios</span></span>

<span data-ttu-id="f3a9d-112">Les coffres Azure Key Vault désignent des ressources suivies, gérées par Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="f3a9d-113">Azure Resource Manager spécifie également un comportement bien défini pour la suppression, qui suppose qu’une opération DELETE correctement exécutée sur une ressource ne permet plus d’accéder à cette ressource.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="f3a9d-114">adresses de fonctionnalité de soft-suppression Hello hello récupération de l’objet de hello supprimée, si la suppression de hello était accidentelle ou intentionnelle.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-114">hello soft-delete feature addresses hello recovery of hello deleted object, whether hello deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="f3a9d-115">Dans ce scénario hello, un utilisateur a peut-être accidentellement supprimé un coffre de clés ou un objet de coffre de clés ; Si ce coffre de clés ou une clé de coffre objet ont été toobe récupérables pendant une période prédéterminée, utilisateur de hello peut annuler la suppression de hello et récupérer leurs données.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-115">In hello typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were toobe recoverable for a predetermined period, hello user may undo hello deletion and recover their data.</span></span>

2. <span data-ttu-id="f3a9d-116">Dans un autre scénario, un utilisateur non autorisé peut tenter de toodelete un coffre de clés ou un objet de coffre de clés, telle qu’une clé à l’intérieur d’un coffre, toocause une interruption de service.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-116">In a different scenario, a rogue user may attempt toodelete a key vault or a key vault object, such as a key inside a vault, toocause a business disruption.</span></span> <span data-ttu-id="f3a9d-117">Séparation de suppression hello de coffre de clés hello ou un objet de coffre de clés à partir de la suppression effective de hello Hello les données sous-jacentes utilisable comme une mesure de sécurité en limitant les autorisations tooa de suppression de données différent, par exemple, approuvés rôle.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-117">Separating hello deletion of hello key vault or key vault object from hello actual deletion of hello underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion tooa different, trusted role.</span></span> <span data-ttu-id="f3a9d-118">Cette approche suppose d’appliquer un quorum à une opération donnée qui pourrait, dans d’autres circonstances, se traduire par une perte de données immédiate.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="f3a9d-119">Comportement de la suppression réversible</span><span class="sxs-lookup"><span data-stu-id="f3a9d-119">Soft-delete behavior</span></span>

<span data-ttu-id="f3a9d-120">Avec cette fonctionnalité, hello opération DELETE sur un coffre de clés ou un objet de coffre de clés est une soft-suppression contiennent efficacement des ressources de hello pour une période de rétention donnée, alors que donnant apparence de hello cet objet hello est supprimé.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-120">With this feature, hello DELETE operation on a key vault or key vault object is a soft-delete, effectively holding hello resources for a given retention period, while giving hello appearance that hello object is deleted.</span></span> <span data-ttu-id="f3a9d-121">service Hello plus fournit un mécanisme pour récupérer l’objet hello supprimé, essentiellement annuler la suppression hello.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-121">hello service further provides a mechanism for recovering hello deleted object, essentially undoing hello deletion.</span></span> 

<span data-ttu-id="f3a9d-122">La suppression réversible est un comportement facultatif de Key Vault et **n’est pas activée par défaut** dans cette version.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="f3a9d-123">Pour plus d’informations sur l’activation de soft-suppression de votre coffre de clés, consultez les conseils spécifiques de hello dans référence hello pour interface hello de votre choix, [clé de coffre référence](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="f3a9d-123">For details on enabling soft-delete for your key vault, see hello specific guidance in hello reference for hello interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="f3a9d-124">Récupération d’un Key Vault</span><span class="sxs-lookup"><span data-stu-id="f3a9d-124">Key vault recovery</span></span>

<span data-ttu-id="f3a9d-125">Lors de la suppression d’un coffre de clés, service de hello crée une ressource de proxy sous abonnement hello, ajout de suffisamment de métadonnées pour la récupération.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-125">Upon deleting a key vault, hello service creates a proxy resource under hello subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="f3a9d-126">ressource de proxy Hello est un objet stocké, disponible dans hello même emplacement que le coffre de clés hello supprimé.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-126">hello proxy resource is a stored object, available in hello same location as hello deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="f3a9d-127">Récupération d’objets Key Vault</span><span class="sxs-lookup"><span data-stu-id="f3a9d-127">Key vault object recovery</span></span>

<span data-ttu-id="f3a9d-128">Lors de la suppression d’un objet de coffre de clés, comme une clé de service de hello placera les objet hello dans un état supprimé, ce qui rend les opérations d’extraction tooany inaccessible.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-128">Upon deleting a key vault object, such as a key, hello service will place hello object in a deleted state, thus making it inaccessible tooany retrieval operations.</span></span> <span data-ttu-id="f3a9d-129">Dans cet état, objet de coffre de clés hello ne peut figurer, récupérés, ou forcer/définitivement supprimés.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-129">While in this state, hello key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="f3a9d-130">À hello même coffre de clés, en temps planifierez suppression hello Hello sous-jacent toohello correspondantes de données supprimée coffre de clés ou un objet de coffre de clés pour l’exécution après un intervalle de rétention prédéterminée.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-130">At hello same time, Key Vault will schedule hello deletion of hello underlying data corresponding toohello deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="f3a9d-131">Hello DNS record toohello coffre correspondant est également conservé pendant l’intervalle de conservation hello hello.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-131">hello DNS record corresponding toohello vault is also retained for hello duration of hello retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="f3a9d-132">Période de rétention de la suppression réversible</span><span class="sxs-lookup"><span data-stu-id="f3a9d-132">Soft-delete retention period</span></span>

<span data-ttu-id="f3a9d-133">Les ressources ayant fait l’objet d’une suppression réversible sont conservées pendant une durée fixée à 90 jours.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="f3a9d-134">Au cours de l’intervalle de conservation de soft-suppression hello suivant de hello s’appliquent :</span><span class="sxs-lookup"><span data-stu-id="f3a9d-134">During hello soft-delete retention interval, hello following apply:</span></span>

- <span data-ttu-id="f3a9d-135">Vous pouvez répertorier toutes les coffres de clé hello et objets de coffre de clés dans l’état soft-suppression de hello pour votre abonnement, ainsi que les accès suppression et la récupération d’informations sur les.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-135">You may list all of hello key vaults and key vault objects in hello soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="f3a9d-136">Seuls les utilisateurs disposant d’autorisations spéciales peuvent répertorier des coffres supprimés.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="f3a9d-137">Nous recommandons à nos utilisateurs de créer un rôle personnalisé avec ces autorisations spéciales pour le traitement des coffres supprimés.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="f3a9d-138">Un coffre de clés avec le même nom ne peut pas être créé dans hello de hello même emplacement. en conséquence, un objet de coffre de clés ne peut pas être créé dans un coffre-fort donné si ce coffre de clés contient un objet avec hello même nom et qui se trouve dans un état supprimé</span><span class="sxs-lookup"><span data-stu-id="f3a9d-138">A key vault with hello same name cannot be created in hello same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with hello same name and which is in a deleted state</span></span> 
- <span data-ttu-id="f3a9d-139">Seul un utilisateur privilégié spécifiquement peut restaurer un coffre de clés ou un objet de coffre de clés en exécutant une commande de récupération sur la ressource de proxy hello correspondante.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on hello corresponding proxy resource.</span></span>
    - <span data-ttu-id="f3a9d-140">utilisateur de Hello, membre de rôle personnalisée hello disposant hello privilège toocreate un coffre de clés de groupe de ressources hello peut restaurer le coffre hello.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-140">hello user, member of hello custom role, who has hello privilege toocreate a key vault under hello resource group can restore hello vault.</span></span>
- <span data-ttu-id="f3a9d-141">Seul un utilisateur privilégié spécifiquement peut supprimer de force un coffre de clés ou un objet de coffre de clés en émettant une commande delete sur la ressource de proxy hello correspondante.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on hello corresponding proxy resource.</span></span>

<span data-ttu-id="f3a9d-142">Sauf si un coffre de clés ou un objet de coffre de clés est récupérée, hello fin du service de hello rétention intervalle hello effectue un vidage de coffre de clés hello supprimé ou un objet de coffre de clés et son contenu.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-142">Unless a key vault or key vault object is recovered, at hello end of hello retention interval hello service performs a purge of hello soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="f3a9d-143">La suppression de la ressource ne peut pas être replanifiée.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="f3a9d-144">Vidage autorisé</span><span class="sxs-lookup"><span data-stu-id="f3a9d-144">Permitted purge</span></span>

<span data-ttu-id="f3a9d-145">Supprimer définitivement, de purge, un coffre de clés est possible grâce à une opération POST sur la ressource de proxy hello et nécessite des privilèges spéciaux.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-145">Permanently deleting, purging, a key vault is possible via a POST operation on hello proxy resource and requires special privileges.</span></span> <span data-ttu-id="f3a9d-146">En général, seul hello propriétaire sera en mesure de toopurge un coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-146">Generally, only hello subscription owner will be able toopurge a key vault.</span></span> <span data-ttu-id="f3a9d-147">déclencheurs d’opération Hello POST hello immédiate et irrécupérable suppression de ce coffre.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-147">hello POST operation triggers hello immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="f3a9d-148">Une exception toothis arrive hello lorsque hello abonnement Azure a été marquée comme étant *impossible à supprimer*.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-148">An exception toothis is hello case when hello Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="f3a9d-149">Dans ce cas, uniquement les service hello peut effectuer puis suppression effective de hello et fait un processus planifié.</span><span class="sxs-lookup"><span data-stu-id="f3a9d-149">In this case, only hello service may then perform hello actual deletion, and does so as a scheduled process.</span></span> 



