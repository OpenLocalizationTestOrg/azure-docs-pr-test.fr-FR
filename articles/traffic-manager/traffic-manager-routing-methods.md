---
title: "les méthodes de routage du trafic aaaAzure Traffic Manager - | Documents Microsoft"
description: "Cela permet de que comprendre les méthodes de routage de trafic différents hello utilisées par le Gestionnaire de trafic les articles"
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="0a7f3-103">Méthodes de routage de Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="0a7f3-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="0a7f3-104">Azure Traffic Manager prend en charge quatre le routage du trafic méthodes toodetermine comment tooroute réseau toohello de trafic différents points de terminaison de service.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="0a7f3-105">Traffic Manager applique hello-le routage du trafic méthode tooeach requête DNS qu’il reçoit.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="0a7f3-106">méthode de routage du trafic Hello détermine quel point de terminaison retourné dans la réponse DNS hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="0a7f3-107">Quatre méthodes de routage du trafic sont disponibles dans Traffic Manager :</span><span class="sxs-lookup"><span data-stu-id="0a7f3-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="0a7f3-108">**[Priorité](#priority):** sélectionnez **priorité** lorsque vous souhaitez toouse un point de terminaison de service principal pour tout le trafic et fournir des sauvegardes en cas de hello principal ou les points de terminaison de sauvegarde hello ne sont pas disponibles.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="0a7f3-109">**[Weighted](#weighted):** sélectionnez **Weighted** lorsque vous souhaitez toodistribute trafic sur un ensemble de points de terminaison, soit uniformément ou tooweights correspondants, que vous définissez.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="0a7f3-110">**[Performances](#performance):** sélectionnez **performances** lorsque vous avez des points de terminaison dans différents emplacements géographiques et que vous souhaitez que les utilisateurs finaux toouse hello le plus proche » » point de terminaison en termes de latence réseau la plus faible de hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="0a7f3-111">**[Géographique](#geographic):** sélectionnez **géographique** afin que les utilisateurs toospecific dirigée points de terminaison (Azure, externe ou imbriquées) basés quel emplacement géographique leur requête DNS provient.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="0a7f3-112">Cela permet des scénarios de tooenable clients Traffic Manager où connaître la région géographique de l’utilisateur et le routage en fonction de qui sont important.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="0a7f3-113">Exemples : respect des obligations en matière de souveraineté des données, localisation de contenu et d’expérience utilisateur, mesure du trafic en provenance de différentes régions.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="0a7f3-114">Tous les profils Traffic Manager incluent une surveillance de l’intégrité des points de terminaison et un basculement de point de terminaison automatique.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="0a7f3-115">Pour plus d’informations, consultez la rubrique relative à la [surveillance des points de terminaison avec Traffic Manager](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="0a7f3-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="0a7f3-116">Un profil Traffic Manager donné ne peut utiliser qu’une seule méthode de routage du trafic.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="0a7f3-117">Vous pouvez sélectionner une méthode de routage du trafic différente pour votre profil à tout moment.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="0a7f3-118">Les modifications sont appliquées dans la minute, sans aucun temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="0a7f3-119">Les méthodes de routage du trafic peuvent être combinées dans des profils Traffic Manager imbriqués.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="0a7f3-120">Imbrication Active flexibles et élaborées configurations de routage du trafic qui répondent aux besoins hello des applications plus volumineux et complexes.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="0a7f3-121">Pour plus d’informations, consultez [Profils Traffic Manager imbriqués](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="0a7f3-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="0a7f3-122"><a name = "priority"></a>Méthode de routage du trafic basé sur la priorité</span><span class="sxs-lookup"><span data-stu-id="0a7f3-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="0a7f3-123">Souvent, une organisation souhaite fiabilité tooprovide pour ses services en déployant un ou plusieurs services de sauvegarde au cas où leur service principal tombe en panne.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="0a7f3-124">méthode Hello 'Priority'-le routage du trafic permet Azure clients tooeasily implémenter ce modèle de basculement.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Méthode de routage du trafic « Priorité » d’Azure Traffic Manager][1]

<span data-ttu-id="0a7f3-126">Hello profil Traffic Manager contient une liste hiérarchisée de points de terminaison de service.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="0a7f3-127">Par défaut, Traffic Manager envoie tout le trafic toohello (priorité la plus élevée) point de terminaison principal.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="0a7f3-128">Si le point de terminaison principal hello n’est pas disponible, les itinéraires de Traffic Manager hello trafic toohello deuxième point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="0a7f3-129">Si les deux points de terminaison principal et secondaire de hello ne sont pas disponibles, le trafic de hello va toohello troisième, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="0a7f3-130">Disponibilité du point de terminaison hello est basée sur état hello configuré (activé ou désactivé) et hello du point de terminaison en cours d’analyse.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="0a7f3-131">Configuration de points de terminaison</span><span class="sxs-lookup"><span data-stu-id="0a7f3-131">Configuring endpoints</span></span>

<span data-ttu-id="0a7f3-132">Avec Azure Resource Manager, vous définissez la priorité de point de terminaison hello explicitement à l’aide de propriété de 'priority' hello pour chaque point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="0a7f3-133">Cette propriété est une valeur comprise entre 1 et 1000.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="0a7f3-134">Plus la valeur est basse, plus la priorité est élevée.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="0a7f3-135">Des points de terminaison ne peuvent pas partager des valeurs de priorité.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="0a7f3-136">Définition de propriété de hello est facultative.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-136">Setting hello property is optional.</span></span> <span data-ttu-id="0a7f3-137">Il est omis, une priorité par défaut basée sur l’ordre de point de terminaison hello est utilisée.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="0a7f3-138"><a name = "weighted"></a>Méthode de routage du trafic basé sur la pondération</span><span class="sxs-lookup"><span data-stu-id="0a7f3-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="0a7f3-139">Hello « Weighted »-le routage du trafic méthode vous permet de toodistribute trafic uniformément ou toouse une pondération prédéfinie.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Méthode de routage du trafic « Pondéré » d’Azure Traffic Manager][2]

<span data-ttu-id="0a7f3-141">Dans la méthode de routage du trafic pondérée hello, vous affectez un point de terminaison tooeach poids dans la configuration du profil Traffic Manager hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="0a7f3-142">poids de Hello est un entier compris entre 1 too1000.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="0a7f3-143">Ce paramètre est facultatif.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-143">This parameter is optional.</span></span> <span data-ttu-id="0a7f3-144">En cas d’omission, Traffic Manager utilise la pondération par défaut « 1 ».</span><span class="sxs-lookup"><span data-stu-id="0a7f3-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="0a7f3-145">Pour chaque requête DNS reçue, Traffic Manager choisit au hasard un point de terminaison disponible.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="0a7f3-146">probabilité Hello de choisir un point de terminaison est basée sur le poids hello affectés tooall les points de terminaison disponibles.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="0a7f3-147">À l’aide de hello même poids entre tous les points de terminaison entraîne une distribution du trafic même.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="0a7f3-148">Sur les points de terminaison spécifiques à l’aide de poids supérieur ou inférieurs provoque ces toobe de points de terminaison renvoyé plus ou moins fréquemment dans les réponses DNS hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="0a7f3-149">méthode Hello pondérée permet des scénarios utiles :</span><span class="sxs-lookup"><span data-stu-id="0a7f3-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="0a7f3-150">Mise à niveau progressive d’application : allouez un pourcentage de trafic tooroute tooa nouveau point de terminaison et augmentez progressivement le trafic de hello sur too100 % du temps.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="0a7f3-151">TooAzure de migration d’application : créer un profil avec des points de terminaison Azure et externes.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="0a7f3-152">Ajustez le poids hello hello points de terminaison tooprefer hello nouveaux points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="0a7f3-153">Éclatement de cloud pour une capacité supplémentaire : étendez rapidement un déploiement local dans le cloud de hello en le plaçant derrière un profil Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="0a7f3-154">Lorsque vous avez besoin d’une capacité supplémentaire dans le cloud de hello, vous pouvez ajouter ou activer plusieurs points de terminaison et spécifier quelle portion du trafic passe tooeach le point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="0a7f3-155">Hello portail Gestionnaire de ressources Azure prend en charge la configuration hello de routage du trafic pondéré.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="0a7f3-156">Vous pouvez configurer le poids à l’aide de versions de gestionnaire de ressources hello hello API REST Azure PowerShell et CLI.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="0a7f3-157">Il est important toounderstand que les réponses DNS sont mis en cache par les clients et par les serveurs DNS hello récursive qui hello les clients utilisent les noms DNS tooresolve.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="0a7f3-158">Cette mise en cache peut avoir une incidence sur les distributions de trafic pondérées.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="0a7f3-159">Si nombre hello de clients et les serveurs DNS récursive est élevé, la distribution du trafic fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="0a7f3-160">Toutefois, lorsque le nombre hello de clients ou aux serveurs DNS récursive est faible, la mise en cache peut fausser distribution du trafic hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="0a7f3-161">Les cas d’utilisation courants sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="0a7f3-161">Common use cases include:</span></span>

* <span data-ttu-id="0a7f3-162">les environnements de développement et de test ;</span><span class="sxs-lookup"><span data-stu-id="0a7f3-162">Development and testing environments</span></span>
* <span data-ttu-id="0a7f3-163">les communications d’application à application ;</span><span class="sxs-lookup"><span data-stu-id="0a7f3-163">Application-to-application communications</span></span>
* <span data-ttu-id="0a7f3-164">les applications destinées à une base étroite d’utilisateurs qui partagent une infrastructure DNS récursive commune (par exemple, des employés d’une entreprise se connectant via un proxy).</span><span class="sxs-lookup"><span data-stu-id="0a7f3-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="0a7f3-165">Ces effets de mise en cache DNS sont tooall le trafic DNS routage systèmes courants, pas seulement Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="0a7f3-166">Dans certains cas, l’explicitement effacement hello cache DNS peut fournir une solution de contournement.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="0a7f3-167">Dans d’autres cas, une autre méthode de routage du trafic peut être plus appropriée.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="0a7f3-168"><a name = "performance"></a>Méthode de routage du trafic basé sur les performances</span><span class="sxs-lookup"><span data-stu-id="0a7f3-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="0a7f3-169">Déploiement des points de terminaison de deux ou plusieurs emplacements de monde hello peut améliorer la réactivité de hello de nombreuses applications par le routage du trafic toohello emplacement tooyou « le plus proche ».</span><span class="sxs-lookup"><span data-stu-id="0a7f3-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="0a7f3-170">méthode de routage du trafic « Performance » de Hello offre cette possibilité.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Méthode de routage du trafic « Performance » d’Azure Traffic Manager][3]

<span data-ttu-id="0a7f3-172">point de terminaison « le plus proche » Hello n’est pas nécessairement le plus proche, mesurée avec la distance géographique.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="0a7f3-173">Au lieu de cela, hello méthode de routage du trafic « Performance » détermine le point de terminaison le plus proche hello en mesurant la latence du réseau.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="0a7f3-174">Traffic Manager gère une Table de latence Internet tootrack hello temps d’aller-retour entre les plages d’adresses IP et chaque centre de données Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="0a7f3-175">Traffic Manager recherche adresse hello source de la requête DNS entrante hello Bonjour Table de latence Internet.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="0a7f3-176">Traffic Manager choisit un point de terminaison disponible dans hello centre de données Azure qui a la latence la plus faible de hello pour la plage d’adresses IP, puis renvoie ce point de terminaison Bonjour réponse DNS.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="0a7f3-177">Comme expliqué dans [Fonctionnement de Traffic Manager](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager ne reçoit pas de requêtes DNS provenant directement de clients.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="0a7f3-178">Au lieu de cela, les requêtes DNS proviennent que les clients de hello sont toouse configuré le service DNS récursive hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="0a7f3-179">Par conséquent, hello adresse utilisée toodetermine hello « le plus proche » point de terminaison IP n’est pas hello adresse IP du client, mais il s’agit d’adresse IP de hello du service DNS récursive hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="0a7f3-180">Dans la pratique, cette adresse IP est un bon proxy pour les clients hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="0a7f3-181">Traffic Manager régulièrement mises à jour hello tooaccount de Table de latence Internet les modifications apportées à hello global Internet et nouvelles régions Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="0a7f3-182">Toutefois, des performances des applications varient en fonction des variations en temps réel de la charge entre hello Internet.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="0a7f3-183">Le routage du trafic Performance ne surveille pas la charge sur un point de terminaison de service donné.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="0a7f3-184">En revanche, si un point de terminaison devient indisponible, Traffic Manager ne l’inclut pas dans les réponses aux requêtes DNS.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="0a7f3-185">Points toonote :</span><span class="sxs-lookup"><span data-stu-id="0a7f3-185">Points toonote:</span></span>

* <span data-ttu-id="0a7f3-186">Si votre profil contient plusieurs points de terminaison dans hello même région Azure, puis Traffic Manager distribue le trafic uniformément entre les points de terminaison disponibles hello dans cette région.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="0a7f3-187">Si vous préférez une distribution de trafic différente au sein d’une région, vous pouvez utiliser des [profils Traffic Manager imbriqués](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="0a7f3-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="0a7f3-188">Si toutes activées de points de terminaison le plus proche de Bonjour région Azure sont dégradées, Traffic Manager déplace les points de terminaison du trafic toohello dans la région Azure hello le plus proche suivante.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="0a7f3-189">Si vous souhaitez toodefine une séquence de basculement par défaut, utilisez [imbriqués profils Traffic Manager](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="0a7f3-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="0a7f3-190">Lors de l’utilisation de méthode de routage du trafic hello performances avec les points de terminaison externes ou imbriquées, vous avez besoin d’emplacement de hello toospecify de ces points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="0a7f3-191">Choisissez le déploiement de tooyour le plus proche hello région Azure.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="0a7f3-192">Ces emplacements sont des valeurs hello pris en charge par hello Table de latence Internet.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="0a7f3-193">algorithme Hello qui choisit de point de terminaison hello est déterministe.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="0a7f3-194">Répéter les requêtes DNS à partir de hello même client est dirigées vers toohello même point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="0a7f3-195">En règle générale, les clients utilisent des serveurs DNS récursifs différents quand ils se déplacent.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="0a7f3-196">client de Hello peut être routé tooa autre point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="0a7f3-197">Le routage peut aussi être affecté par les mises à jour toohello Table de latence Internet.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="0a7f3-198">Par conséquent, hello performances méthode de routage du trafic ne garantit pas qu’un client est toujours routé toohello même point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="0a7f3-199">Lorsque hello Table de latence Internet change, vous pouvez remarquer que certains clients sont dirigées tooa autre point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="0a7f3-200">La précision de ce changement de routage varie en fonction des données de latence en cours.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="0a7f3-201">Ces mises à jour sont la précision de hello toomaintain essentielles de performances-le routage du trafic comme hello Qu'internet évolue en permanence.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="0a7f3-202"><a name = "geographic"></a>Méthode de routage du trafic Geographic (Géographique)</span><span class="sxs-lookup"><span data-stu-id="0a7f3-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="0a7f3-203">Profils Traffic Manager peuvent être hello toouse configuré provient de l’emplacement géographique de la méthode de routage pour que les utilisateurs sont dirigés de points de terminaison toospecific (Azure, externe ou imbriquées) basées sur quel emplacement géographique, leur requête DNS.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="0a7f3-204">Cela permet des scénarios de tooenable clients Traffic Manager où connaître la région géographique de l’utilisateur et le routage en fonction de qui sont important.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="0a7f3-205">Exemples : respect des obligations en matière de souveraineté des données, localisation de contenu et d’expérience utilisateur, mesure du trafic en provenance de différentes régions.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="0a7f3-206">Lorsqu’un profil est configuré pour le routage géographique, chaque point de terminaison associé à ce que le profil doit toohave un ensemble de régions géographiques affectées tooit.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="0a7f3-207">Une région géographique peut présenter les niveaux de granularité suivants :</span><span class="sxs-lookup"><span data-stu-id="0a7f3-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="0a7f3-208">World (Monde) : n’importe quelle région</span><span class="sxs-lookup"><span data-stu-id="0a7f3-208">World– any region</span></span>
- <span data-ttu-id="0a7f3-209">Regional Grouping (Regroupement régional) : Afrique, Moyen-Orient, Australie/Pacifique, etc.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="0a7f3-210">Country/Region (Pays/Région) : Irlande, Pérou, Hong Kong (R.A.S.), etc.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="0a7f3-211">State/Province (État/Province) : États-Unis-Californie, Australie-Queensland, Canada-Alberta, etc. (Remarque : ce niveau de granularité est pris en charge uniquement pour les états/provinces de l’Australie, du Canada, du Royaume-Uni et des États-Unis.)</span><span class="sxs-lookup"><span data-stu-id="0a7f3-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="0a7f3-212">Lorsqu’une région ou un ensemble de régions est assigné tooan le point de terminaison, toutes les demandes de ces régions obtient acheminés point de terminaison toothat uniquement.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="0a7f3-213">Traffic Manager utilise hello source IP adresse hello DNS toodetermine hello zone de la requête à partir de laquelle un utilisateur effectue une requête à partir de : il s’agit généralement hello adresseIP de résolution DNS local hello effectuant la requête hello pour le compte d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Méthode de routage du trafic « Geographic » (Géographique) d’Azure Traffic Manager](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="0a7f3-215">Traffic Manager lit l’adresse hello source de la requête DNS de hello et décide de la région géographique d’origine.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="0a7f3-216">Il recherche ensuite toosee s’il existe un point de terminaison a tooit de cette région géographique mappée.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="0a7f3-217">Cette recherche commence au niveau de granularité le plus bas (État/Province où il est pris en charge, sinon au niveau de pays/région hello) hello et passe toutes les hello atteindre toohello plus haut niveau, qui est **World**.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="0a7f3-218">Hello première correspondance trouvée à l’aide de ce parcours est désignée comme tooreturn de point de terminaison hello en réponse à la requête hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="0a7f3-219">En cas de correspondance avec un point de terminaison de type imbriqué, un point de terminaison de ce profil enfant est renvoyé en fonction de sa méthode de routage.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="0a7f3-220">Hello les points suivants est applicables toothis comportement :</span><span class="sxs-lookup"><span data-stu-id="0a7f3-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="0a7f3-221">Une région géographique peut être mappé uniquement tooone point de terminaison dans un profil Traffic Manager lorsque le type de routage hello est routage géographique.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="0a7f3-222">Cela garantit un routage déterministe du trafic des utilisateurs et permet aux clients de mettre en œuvre des scénarios nécessitant des limites géographiques claires.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="0a7f3-223">Si la région d’un utilisateur vient mise en correspondance des sous deux différents points de terminaison géographique, Traffic Manager sélectionne un point de terminaison hello avec une granularité plus faible hello et ne tient pas compte acheminer les demandes à partir de ce toohello région autre point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="0a7f3-224">Par exemple, considérons un profil présentant le type de routage Geographic (Géographique) et deux points de terminaison, Endpoint1 et Endpoint2.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="0a7f3-225">Endpoint1 est configuré trafic tooreceive irlandais et Endpoint2 est configuré trafic tooreceive d’Europe.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="0a7f3-226">Si une demande provient d’Irlande, il est toujours tooEndpoint1 routé.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="0a7f3-227">Dans la mesure où une région peut être mappé uniquement point de terminaison tooone, Traffic Manager retourne indépendamment de si le point de terminaison hello est sain ou non.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="0a7f3-228">Il est fortement recommandé que les clients à l’aide de la méthode de routage géographique hello associez-le hello Nested type points de terminaison a profils enfants contenant au moins deux points de terminaison au sein de chaque.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="0a7f3-229">Si une point de terminaison correspondance est trouvée, et ce point de terminaison est Bonjour **arrêté** d’état, Traffic Manager renvoie une réponse NODATA.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="0a7f3-230">Dans ce cas, aucune autres recherches n’est effectuée plus haut dans la hiérarchie de zone géographique hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="0a7f3-231">Ce comportement est également applicable pour les types de point de terminaison imbriquées lorsque le profil enfant hello est Bonjour **arrêté** ou **désactivé** état.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="0a7f3-232">Si un point de terminaison affiche un **désactivé** état, il ne seront pas incluse dans la région de hello processus de correspondance.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="0a7f3-233">Ce comportement est applicable pour les types de point de terminaison imbriquées lorsque le point de terminaison hello est hello **désactivé** état.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="0a7f3-234">Si une requête provient d’une région géographique qui n’a aucun mappage dans ce profil, Traffic Manager renvoie une réponse NODATA.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="0a7f3-235">Par conséquent, il est recommandé aux clients d’utiliser le routage géographique avec un point de terminaison, l’idéal est de type imbriqué avec au moins deux points de terminaison dans le profil enfant hello, avec la région de hello **World** affecté tooit.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="0a7f3-236">Cela garantit également que les adresses IP qui ne sont pas mappent tooa région sont gérées.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="0a7f3-237">Comme expliqué dans [Fonctionnement de Traffic Manager](traffic-manager-how-traffic-manager-works.md), Traffic Manager ne reçoit pas de requêtes DNS provenant directement de clients.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="0a7f3-238">Au lieu de cela, les requêtes DNS proviennent que les clients de hello sont toouse configuré le service DNS récursive hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="0a7f3-239">Par conséquent, hello IP adresse utilisée toodetermine hello région n’est pas hello l’adresse IP du client, mais il s’agit d’adresse IP de hello du service DNS récursive hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="0a7f3-240">Dans la pratique, cette adresse IP est un bon proxy pour les clients hello.</span><span class="sxs-lookup"><span data-stu-id="0a7f3-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="0a7f3-241">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="0a7f3-241">Next steps</span></span>

<span data-ttu-id="0a7f3-242">Découvrez comment toodevelop applications de haute disponibilité à l’aide de [surveillance de point de terminaison Traffic Manager](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="0a7f3-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="0a7f3-243">Découvrez comment trop[créer un profil Traffic Manager](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="0a7f3-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



