---
title: "Comment configurer la géoréplication pour Cache Redis Azure | Microsoft Docs"
description: "Découvrez comment répliquer vos instances Cache Redis Azure dans des régions géographiques."
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 375643dc-dbac-4bab-8004-d9ae9570440d
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/06/2017
ms.author: sdanie
ms.openlocfilehash: 71b0d4add7e642487f6d67cda692c500ee78b0e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-configure-geo-replication-for-azure-redis-cache"></a><span data-ttu-id="1755b-103">Comment configurer la géoréplication pour Cache Redis Azure</span><span class="sxs-lookup"><span data-stu-id="1755b-103">How to configure Geo-replication for Azure Redis Cache</span></span>

<span data-ttu-id="1755b-104">La géoréplication fournit un mécanisme permettant de lier deux instances Cache Redis Azure de niveau Premium.</span><span class="sxs-lookup"><span data-stu-id="1755b-104">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="1755b-105">Un cache est désigné comme cache lié principal et l’autre comme cache lié secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-105">One cache is designated as the primary linked cache, and the other as the secondary linked cache.</span></span> <span data-ttu-id="1755b-106">Le cache lié secondaire est en lecture seule et les données écrites dans le cache principal sont répliquées vers le cache lié secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-106">The secondary linked cache becomes read-only, and data written to the primary cache is replicated to the secondary linked cache.</span></span> <span data-ttu-id="1755b-107">Cette fonctionnalité peut être utilisée pour répliquer un cache entre des régions Azure.</span><span class="sxs-lookup"><span data-stu-id="1755b-107">This functionality can be used to replicate a cache across Azure regions.</span></span> <span data-ttu-id="1755b-108">Cet article fournit un guide de configuration de la géoréplication pour vos instances Cache Redis Azure de niveau Premium.</span><span class="sxs-lookup"><span data-stu-id="1755b-108">This article provides a guide to configuring Geo-replication for your Premium tier Azure Redis Cache instances.</span></span>

## <a name="geo-replication-prerequisites"></a><span data-ttu-id="1755b-109">Conditions préalables à la géoréplication</span><span class="sxs-lookup"><span data-stu-id="1755b-109">Geo-replication prerequisites</span></span>

<span data-ttu-id="1755b-110">Pour configurer la géoréplication entre deux caches, les conditions préalables suivantes doivent être remplies :</span><span class="sxs-lookup"><span data-stu-id="1755b-110">To configure Geo-replication between two caches, the following prerequisites must be met:</span></span>

- <span data-ttu-id="1755b-111">Les deux caches doivent être de [niveau Premium](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="1755b-111">Both caches must be [Premium tier](cache-premium-tier-intro.md) caches.</span></span>
- <span data-ttu-id="1755b-112">Les deux caches doivent figurer dans le même abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="1755b-112">Both caches must be in the same Azure subscription.</span></span>
- <span data-ttu-id="1755b-113">Le niveau tarifaire du cache lié secondaire doit être égal ou supérieur à celui du cache lié principal.</span><span class="sxs-lookup"><span data-stu-id="1755b-113">The secondary linked cache must be either the same pricing tier or a larger pricing tier than the primary linked cache.</span></span>
- <span data-ttu-id="1755b-114">Si le clustering est activé sur le cache lié principal, il doit également l’être sur le cache lié secondaire, avec le même nombre de partitions que sur le cache lié principal.</span><span class="sxs-lookup"><span data-stu-id="1755b-114">If the primary linked cache has clustering enabled, the secondary linked cache must have clustering enabled with the same number of shards as the primary linked cache.</span></span>
- <span data-ttu-id="1755b-115">Les deux caches doivent être créés et en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="1755b-115">Both caches must be created and in a running state.</span></span>
- <span data-ttu-id="1755b-116">La persistance ne doit être activée sur aucun des caches.</span><span class="sxs-lookup"><span data-stu-id="1755b-116">Persistence must not be enabled on either cache.</span></span>
- <span data-ttu-id="1755b-117">La géoréplication entre caches figurant dans un même réseau virtuel est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="1755b-117">Geo-replication between caches in the same VNET is supported.</span></span> <span data-ttu-id="1755b-118">La géoréplication entre caches figurant dans des réseaux virtuels différents est également prise en charge pour autant que les deux réseaux soient configurés de telle sorte que leurs ressources soient en mesure de s’atteindre mutuellement via des connexions TCP.</span><span class="sxs-lookup"><span data-stu-id="1755b-118">Geo-replication between caches in different VNETs is also supported, as long as the two VNETs are configured in such a way that resources in the VNETs are able to reach each other via TCP connections.</span></span>

<span data-ttu-id="1755b-119">Une fois la géoréplication configurée, les restrictions suivantes s’appliquent à votre paire de caches liés :</span><span class="sxs-lookup"><span data-stu-id="1755b-119">After Geo-replication is configured, the following restrictions apply to your linked cache pair:</span></span>

- <span data-ttu-id="1755b-120">Le cache lié secondaire est en lecture seule. Il n’est pas possible d’y écrire des données.</span><span class="sxs-lookup"><span data-stu-id="1755b-120">The secondary linked cache is read-only; you can read from it, but you can't write any data to it.</span></span> 
- <span data-ttu-id="1755b-121">Toutes les données présentes dans le cache lié secondaire avant l’ajout du lien sont supprimées.</span><span class="sxs-lookup"><span data-stu-id="1755b-121">Any data that was in the secondary linked cache before the link was added is removed.</span></span> <span data-ttu-id="1755b-122">Toutefois, en cas de suppression de la géoréplication par la suite, les données répliquées restent dans le cache lié secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-122">If the Geo-replication is subsequently removed however, the replicated data remains in the secondary linked cache.</span></span>
- <span data-ttu-id="1755b-123">Vous ne pouvez pas lancer une [opération de mise à l’échelle](cache-how-to-scale.md) sur un cache ou en [modifier le nombre de partitions](cache-how-to-premium-clustering.md) si le clustering est activé sur celui-ci.</span><span class="sxs-lookup"><span data-stu-id="1755b-123">You can't initiate a [scaling operation](cache-how-to-scale.md) on either cache or [change the number of shards](cache-how-to-premium-clustering.md) if the cache has clustering enabled.</span></span>
- <span data-ttu-id="1755b-124">Vous ne pouvez activer la persistance sur aucun des caches.</span><span class="sxs-lookup"><span data-stu-id="1755b-124">You can't enable persistence on either cache.</span></span>
- <span data-ttu-id="1755b-125">Vous pouvez [Exporter](cache-how-to-import-export-data.md#export) à partir de chaque cache, mais vous ne pouvez pas [Importer](cache-how-to-import-export-data.md#import) dans le cache lié principal.</span><span class="sxs-lookup"><span data-stu-id="1755b-125">You can use [Export](cache-how-to-import-export-data.md#export) with either cache, but you can only [Import](cache-how-to-import-export-data.md#import) into the primary linked cache.</span></span>
- <span data-ttu-id="1755b-126">Vous ne pouvez pas supprimer les caches liés ou le groupe de ressources qui les contient aussi longtemps que le lien de géoréplication existe.</span><span class="sxs-lookup"><span data-stu-id="1755b-126">You can't delete either linked cache, or the resource group that contains them, until you remove the Geo-replication link.</span></span> <span data-ttu-id="1755b-127">Pour plus d’informations, consultez [Pourquoi ma tentative de suppression de mon cache lié a-t-elle échoué ?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)</span><span class="sxs-lookup"><span data-stu-id="1755b-127">For more information, see [Why did the operation fail when I tried to delete my linked cache?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)</span></span>
- <span data-ttu-id="1755b-128">Si les deux caches se trouvent dans des régions différentes, des frais de sortie de réseau s’appliquent aux données répliquées entre des régions sur le cache lié secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-128">If the two caches are in different regions, network egress costs will apply to the data replicated across regions to the secondary linked cache.</span></span> <span data-ttu-id="1755b-129">Pour plus d’informations, consultez [Combien coûte la réplication de mes données entre des régions Azure ?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)</span><span class="sxs-lookup"><span data-stu-id="1755b-129">For more information, see [How much does it cost to replicate my data across Azure regions?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)</span></span>
- <span data-ttu-id="1755b-130">Aucun basculement automatique vers le cache lié secondaire n’a lieu si le cache lié principal (et son réplica) sont défaillants.</span><span class="sxs-lookup"><span data-stu-id="1755b-130">There is no automatic failover to the secondary linked cache if the primary cache (and its replica) go down.</span></span> <span data-ttu-id="1755b-131">Pour basculer des applications clientes, vous devez supprimer manuellement le lien de géoréplication et pointer les applications clientes sur l’ancien cache lié secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-131">In order to failover client applications, you would need to manually remove the Geo-replication link and point the client applications to the cache that was formerly the secondary linked cache.</span></span> <span data-ttu-id="1755b-132">Pour plus d’informations, consultez [Comment fonctionne le basculement vers le cache lié secondaire ?](#how-does-failing-over-to-the-secondary-linked-cache-work)</span><span class="sxs-lookup"><span data-stu-id="1755b-132">For more information, see [How does failing over to the secondary linked cache work?](#how-does-failing-over-to-the-secondary-linked-cache-work)</span></span>

## <a name="add-a-geo-replication-link"></a><span data-ttu-id="1755b-133">Ajouter un lien de géoréplication</span><span class="sxs-lookup"><span data-stu-id="1755b-133">Add a Geo-replication link</span></span>

1. <span data-ttu-id="1755b-134">Pour lier deux caches Premium à des fins de géoréplication, dans le menu Ressource du cache prévu en tant que cache lié principal, cliquez sur **Géoréplication**, puis, dans le panneau **Géoréplication**, cliquez sur **Ajouter un lien de réplication du cache**.</span><span class="sxs-lookup"><span data-stu-id="1755b-134">To link two premium caches together for geo-replication, click **Geo-replication** from the Resource menu of the cache intended as the primary linked cache, and then click **Add cache replication link** from the **Geo-replication** blade.</span></span>

    ![Ajouter un lien](./media/cache-how-to-geo-replication/cache-geo-location-menu.png)

2. <span data-ttu-id="1755b-136">Dans la liste **Caches compatibles**, cliquez sur le nom du cache secondaire souhaité.</span><span class="sxs-lookup"><span data-stu-id="1755b-136">Click the name of the desired secondary cache from the **Compatible caches** list.</span></span> <span data-ttu-id="1755b-137">Si le cache souhaité ne figure pas dans la liste, vérifiez que les [conditions préalables à la géoréplication](#geo-replication-prerequisites) pour le cache secondaire souhaité sont remplies.</span><span class="sxs-lookup"><span data-stu-id="1755b-137">If your desired cache isn't displayed in the list, verify that the [Geo-replication prerequisites](#geo-replication-prerequisites) for the desired secondary cache are met.</span></span> <span data-ttu-id="1755b-138">Pour filtrer les caches par région, cliquez sur la région souhaitée dans la carte pour afficher uniquement les caches figurant dans la liste **Caches compatibles**.</span><span class="sxs-lookup"><span data-stu-id="1755b-138">To filter the caches by region, click the desired region in the map to display only those caches in the **Compatible caches** list.</span></span>

    ![Caches compatibles avec la géoréplication](./media/cache-how-to-geo-replication/cache-geo-location-select-link.png)
    
    <span data-ttu-id="1755b-140">Vous pouvez également lancer le processus de liaison ou afficher des détails sur le cache secondaire à l’aide du menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="1755b-140">You can also initiate the linking process or view details about the secondary cache by using the context menu.</span></span>

    ![Menu contextuel de la géoréplication](./media/cache-how-to-geo-replication/cache-geo-location-select-link-context-menu.png)

3. <span data-ttu-id="1755b-142">Cliquez sur **Lier** pour lier les deux caches et commencer le processus de réplication.</span><span class="sxs-lookup"><span data-stu-id="1755b-142">Click **Link** to link the two caches together and begin the replication process.</span></span>

    ![Lier des caches](./media/cache-how-to-geo-replication/cache-geo-location-confirm-link.png)

4. <span data-ttu-id="1755b-144">Vous pouvez voir la progression du processus de réplication sur le panneau **Géoréplication**.</span><span class="sxs-lookup"><span data-stu-id="1755b-144">You can view the progress of the replication process on the **Geo-replication** blade.</span></span>

    ![État du lien](./media/cache-how-to-geo-replication/cache-geo-location-linking.png)

    <span data-ttu-id="1755b-146">Vous pouvez également voir l’état du lien dans le panneau **Vue d’ensemble** des caches principal et secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-146">You can also view the linking status on the **Overview** blade for both the primary and secondary caches.</span></span>

    ![État du cache](./media/cache-how-to-geo-replication/cache-geo-location-link-status.png)

    <span data-ttu-id="1755b-148">Une fois le processus de réplication terminé, l’**État du lien** devient **Réussi**.</span><span class="sxs-lookup"><span data-stu-id="1755b-148">Once the replication process is complete, the **Link status** changes to **Succeeded**.</span></span>

    ![État du cache](./media/cache-how-to-geo-replication/cache-geo-location-link-successful.png)

    <span data-ttu-id="1755b-150">Pendant le processus de liaison, le cache lié principal reste disponible, mais le cache lié secondaire ne l’est pas tant que le processus de liaison n’est pas terminé.</span><span class="sxs-lookup"><span data-stu-id="1755b-150">During the linking process, the primary linked cache remains available for use but the secondary linked cache is not available until the linking process completes.</span></span>

## <a name="remove-a-geo-replication-link"></a><span data-ttu-id="1755b-151">Supprimer un lien de géoréplication</span><span class="sxs-lookup"><span data-stu-id="1755b-151">Remove a Geo-replication link</span></span>

1. <span data-ttu-id="1755b-152">Pour supprimer le lien entre deux caches et arrêter la géoréplication, dans le panneau **Géoréplication**, cliquez sur **Dissocier les caches**.</span><span class="sxs-lookup"><span data-stu-id="1755b-152">To remove the link between two caches and stop Geo-replication, click **Unlink caches** from the **Geo-replication** blade.</span></span>
    
    ![Dissocier les caches](./media/cache-how-to-geo-replication/cache-geo-location-unlink.png)

    <span data-ttu-id="1755b-154">Une fois le processus de dissociation terminé, le cache secondaire est disponible tant en lecture qu’en écriture.</span><span class="sxs-lookup"><span data-stu-id="1755b-154">When the unlinking process completes, the secondary cache is available for both reads and writes.</span></span>

>[!NOTE]
><span data-ttu-id="1755b-155">En cas de suppression du lien de géoréplication, les données répliquées à partir du cache lié principal restent dans le cache secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-155">When the Geo-replication link is removed, the replicated data from the primary linked cache remains in the secondary cache.</span></span>
>
>

## <a name="geo-replication-faq"></a><span data-ttu-id="1755b-156">FAQ concernant la géoréplication</span><span class="sxs-lookup"><span data-stu-id="1755b-156">Geo-replication FAQ</span></span>

- [<span data-ttu-id="1755b-157">Puis-je utiliser la géoréplication avec un cache de niveau Standard ou De base ?</span><span class="sxs-lookup"><span data-stu-id="1755b-157">Can I use Geo-replication with a Standard or Basic tier cache?</span></span>](#can-i-use-geo-replication-with-a-standard-or-basic-tier-cache)
- [<span data-ttu-id="1755b-158">Mon cache est-il disponible pendant le processus de liaison ou de dissociation ?</span><span class="sxs-lookup"><span data-stu-id="1755b-158">Is my cache available for use during the linking or unlinking process?</span></span>](#is-my-cache-available-for-use-during-the-linking-or-unlinking-process)
- [<span data-ttu-id="1755b-159">Puis-je lier plus de deux caches ?</span><span class="sxs-lookup"><span data-stu-id="1755b-159">Can I link more than two caches together?</span></span>](#can-i-link-more-than-two-caches-together)
- [<span data-ttu-id="1755b-160">Puis-je lier deux caches d’abonnements Azure différents ?</span><span class="sxs-lookup"><span data-stu-id="1755b-160">Can I link two caches from different Azure subscriptions?</span></span>](#can-i-link-two-caches-from-different-azure-subscriptions)
- [<span data-ttu-id="1755b-161">Puis-je lier deux caches de tailles différentes ?</span><span class="sxs-lookup"><span data-stu-id="1755b-161">Can I link two caches with different sizes?</span></span>](#can-i-link-two-caches-with-different-sizes)
- [<span data-ttu-id="1755b-162">Puis-je utiliser la géoréplication quand le clustering est activé ?</span><span class="sxs-lookup"><span data-stu-id="1755b-162">Can I use Geo-replication with clustering enabled?</span></span>](#can-i-use-geo-replication-with-clustering-enabled)
- [<span data-ttu-id="1755b-163">Puis-je utiliser la géoréplication avec mes caches dans un réseau virtuel ?</span><span class="sxs-lookup"><span data-stu-id="1755b-163">Can I use Geo-replication with my caches in a VNET?</span></span>](#can-i-use-geo-replication-with-my-caches-in-a-vnet)
- [<span data-ttu-id="1755b-164">Puis-je utiliser PowerShell ou Azure CLI pour gérer la géoréplication ?</span><span class="sxs-lookup"><span data-stu-id="1755b-164">Can I use PowerShell or Azure CLI to manage Geo-replication?</span></span>](#can-i-use-powershell-or-azure-cli-to-manage-geo-replication)
- [<span data-ttu-id="1755b-165">Combien coûte la réplication de mes données entre des régions Azure ?</span><span class="sxs-lookup"><span data-stu-id="1755b-165">How much does it cost to replicate my data across Azure regions?</span></span>](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)
- [<span data-ttu-id="1755b-166">Pourquoi ma tentative de suppression de mon cache lié a-t-elle échoué ?</span><span class="sxs-lookup"><span data-stu-id="1755b-166">Why did the operation fail when I tried to delete my linked cache?</span></span>](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)
- [<span data-ttu-id="1755b-167">Quelle région dois-je utiliser pour mon cache lié secondaire ?</span><span class="sxs-lookup"><span data-stu-id="1755b-167">What region should I use for my secondary linked cache?</span></span>](#what-region-should-i-use-for-my-secondary-linked-cache)
- [<span data-ttu-id="1755b-168">Comment fonctionne le basculement vers le cache lié secondaire ?</span><span class="sxs-lookup"><span data-stu-id="1755b-168">How does failing over to the secondary linked cache work?</span></span>](#how-does-failing-over-to-the-secondary-linked-cache-work)

### <a name="can-i-use-geo-replication-with-a-standard-or-basic-tier-cache"></a><span data-ttu-id="1755b-169">Puis-je utiliser la géoréplication avec un cache de niveau Standard ou De base ?</span><span class="sxs-lookup"><span data-stu-id="1755b-169">Can I use Geo-replication with a Standard or Basic tier cache?</span></span>

<span data-ttu-id="1755b-170">Non, la géoréplication est disponible uniquement pour des caches de niveau Premium.</span><span class="sxs-lookup"><span data-stu-id="1755b-170">No, Geo-replication is only available for Premium tier caches.</span></span>

### <a name="is-my-cache-available-for-use-during-the-linking-or-unlinking-process"></a><span data-ttu-id="1755b-171">Mon cache est-il disponible pendant le processus de liaison ou de dissociation ?</span><span class="sxs-lookup"><span data-stu-id="1755b-171">Is my cache available for use during the linking or unlinking process?</span></span>

- <span data-ttu-id="1755b-172">Lorsque vous liez deux caches à des fins de géoréplication, le cache lié principal reste disponible, mais le cache lié secondaire ne l’est pas tant que le processus de liaison n’est pas terminé.</span><span class="sxs-lookup"><span data-stu-id="1755b-172">When linking two caches together for Geo-replication, the primary linked cache remains available for use but the secondary linked cache is not available until the linking process completes.</span></span>
- <span data-ttu-id="1755b-173">Lorsque vous supprimez le lien de géoréplication entre deux caches, ceux-ci restent disponibles.</span><span class="sxs-lookup"><span data-stu-id="1755b-173">When removing the Geo-replication link between two caches, both caches remain available for use.</span></span>

### <a name="can-i-link-more-than-two-caches-together"></a><span data-ttu-id="1755b-174">Puis-je lier plus de deux caches ?</span><span class="sxs-lookup"><span data-stu-id="1755b-174">Can I link more than two caches together?</span></span>

<span data-ttu-id="1755b-175">Non, lors de l’utilisation de la géoréplication, vous ne pouvez pas lier plus de deux caches.</span><span class="sxs-lookup"><span data-stu-id="1755b-175">No, when using Geo-replication you can only link two caches together.</span></span>

### <a name="can-i-link-two-caches-from-different-azure-subscriptions"></a><span data-ttu-id="1755b-176">Puis-je lier deux caches d’abonnements Azure différents ?</span><span class="sxs-lookup"><span data-stu-id="1755b-176">Can I link two caches from different Azure subscriptions?</span></span>

<span data-ttu-id="1755b-177">Non, les deux caches doivent figurer dans le même abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="1755b-177">No, both caches must be in the same Azure subscription.</span></span>

### <a name="can-i-link-two-caches-with-different-sizes"></a><span data-ttu-id="1755b-178">Puis-je lier deux caches de tailles différentes ?</span><span class="sxs-lookup"><span data-stu-id="1755b-178">Can I link two caches with different sizes?</span></span>

<span data-ttu-id="1755b-179">Oui, pour autant que le cache lié secondaire soit plus grand que le cache lié principal.</span><span class="sxs-lookup"><span data-stu-id="1755b-179">Yes, as long as the secondary linked cache is larger than the primary linked cache.</span></span>

### <a name="can-i-use-geo-replication-with-clustering-enabled"></a><span data-ttu-id="1755b-180">Puis-je utiliser la géoréplication quand le clustering est activé ?</span><span class="sxs-lookup"><span data-stu-id="1755b-180">Can I use Geo-replication with clustering enabled?</span></span>

<span data-ttu-id="1755b-181">Oui, pour autant que les deux caches aient le même nombre de partitions.</span><span class="sxs-lookup"><span data-stu-id="1755b-181">Yes, as long as both caches have the same number of shards.</span></span>

### <a name="can-i-use-geo-replication-with-my-caches-in-a-vnet"></a><span data-ttu-id="1755b-182">Puis-je utiliser la géoréplication avec mes caches dans un réseau virtuel ?</span><span class="sxs-lookup"><span data-stu-id="1755b-182">Can I use Geo-replication with my caches in a VNET?</span></span>

<span data-ttu-id="1755b-183">Oui, la géoréplication de caches dans des réseaux virtuels est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="1755b-183">Yes, Geo-replication of caches in VNETs are supported.</span></span> 

- <span data-ttu-id="1755b-184">La géoréplication entre caches figurant dans un même réseau virtuel est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="1755b-184">Geo-replication between caches in the same VNET is supported.</span></span>
- <span data-ttu-id="1755b-185">La géoréplication entre caches figurant dans des réseaux virtuels différents est également prise en charge pour autant que les deux réseaux soient configurés de telle sorte que leurs ressources soient en mesure de s’atteindre mutuellement via des connexions TCP.</span><span class="sxs-lookup"><span data-stu-id="1755b-185">Geo-replication between caches in different VNETs is also supported, as long as the two VNETs are configured in such a way that resources in the VNETs are able to reach each other via TCP connections.</span></span>

### <a name="can-i-use-powershell-or-azure-cli-to-manage-geo-replication"></a><span data-ttu-id="1755b-186">Puis-je utiliser PowerShell ou Azure CLI pour gérer la géoréplication ?</span><span class="sxs-lookup"><span data-stu-id="1755b-186">Can I use PowerShell or Azure CLI to manage Geo-replication?</span></span>

<span data-ttu-id="1755b-187">Actuellement, vous pouvez gérer la géoréplication uniquement par le biais du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="1755b-187">At this time you can only manage Geo-replication using the Azure portal.</span></span>

### <a name="how-much-does-it-cost-to-replicate-my-data-across-azure-regions"></a><span data-ttu-id="1755b-188">Combien coûte la réplication de mes données entre régions Azure ?</span><span class="sxs-lookup"><span data-stu-id="1755b-188">How much does it cost to replicate my data across Azure regions?</span></span>

<span data-ttu-id="1755b-189">Lorsque vous utilisez la géoréplication, les données du cache lié principal sont répliquées vers le cache lié secondaire.</span><span class="sxs-lookup"><span data-stu-id="1755b-189">When using Geo-replication, data from the primary linked cache is replicated to the secondary linked cache.</span></span> <span data-ttu-id="1755b-190">Si les deux caches liés figurent dans la même région Azure, le transfert de données est gratuit.</span><span class="sxs-lookup"><span data-stu-id="1755b-190">If the two linked caches are in the same Azure region, there is no charge for the data transfer.</span></span> <span data-ttu-id="1755b-191">Si les deux caches liés se trouvent dans des régions Azure différentes, les frais de transfert des données de géoréplication correspondent au coût de la bande passante pour la réplication des données vers l’autre région Azure.</span><span class="sxs-lookup"><span data-stu-id="1755b-191">If the two linked caches are in different Azure regions, the Geo-Replication data transfer charge is the bandwidth cost of replicating that data to the other Azure region.</span></span> <span data-ttu-id="1755b-192">Pour plus d'informations, consultez [Détails de la tarification de la bande passante](https://azure.microsoft.com/pricing/details/bandwidth/).</span><span class="sxs-lookup"><span data-stu-id="1755b-192">For more information, see [Bandwidth Pricing Details](https://azure.microsoft.com/pricing/details/bandwidth/).</span></span>

### <a name="why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache"></a><span data-ttu-id="1755b-193">Pourquoi ma tentative de suppression de mon cache lié a-t-elle échoué ?</span><span class="sxs-lookup"><span data-stu-id="1755b-193">Why did the operation fail when I tried to delete my linked cache?</span></span>

<span data-ttu-id="1755b-194">Lorsque deux caches sont liés, vous ne pouvez pas supprimer les caches ou le groupe de ressources qui les contient aussi longtemps que le lien de géoréplication existe.</span><span class="sxs-lookup"><span data-stu-id="1755b-194">When two caches are linked together, you can't delete either cache or the resource group that contains them until you remove the Geo-replication link.</span></span> <span data-ttu-id="1755b-195">Si vous tentez de supprimer le groupe de ressources contenant l’un des caches liés ou les deux, les autres ressources du groupe sont supprimées, mais le groupe de ressources reste dans l’état `deleting` et les caches liés dans le groupe de ressources restent dans l’état `running`.</span><span class="sxs-lookup"><span data-stu-id="1755b-195">If you attempt to delete the resource group that contains one or both of the linked caches, the other resources in the resource group are deleted, but the resource group stays in the `deleting` state and any linked caches in the resource group remain in the `running` state.</span></span> <span data-ttu-id="1755b-196">Pour achever la suppression du groupe de ressources et des caches liés qu’il contient, vous devez rompre le lien de géoréplication comme décrit dans [Supprimer un lien de géoréplication](#remove-a-geo-replication-link).</span><span class="sxs-lookup"><span data-stu-id="1755b-196">To complete the deletion of the resource group and the linked caches within it, break the Geo-replication link as described in [Remove a Geo-replication link](#remove-a-geo-replication-link).</span></span>

### <a name="what-region-should-i-use-for-my-secondary-linked-cache"></a><span data-ttu-id="1755b-197">Quelle région dois-je utiliser pour mon cache lié secondaire ?</span><span class="sxs-lookup"><span data-stu-id="1755b-197">What region should I use for my secondary linked cache?</span></span>

<span data-ttu-id="1755b-198">En règle générale, il est recommandé que votre cache existe dans la même région Azure que l’application qui y accède.</span><span class="sxs-lookup"><span data-stu-id="1755b-198">In general, it is recommended for your cache to exist in the same Azure region as the application that accesses it.</span></span> <span data-ttu-id="1755b-199">Si votre application dispose d’une région primaire et d’une région de secours, vos caches principal et secondaire doivent exister dans ces mêmes régions.</span><span class="sxs-lookup"><span data-stu-id="1755b-199">If your application has a primary and fallback region, then your primary and secondary caches should exist in those same regions.</span></span> <span data-ttu-id="1755b-200">Pour plus d’informations sur les régions liées, consultez [Meilleures pratiques : régions Azure liées](../best-practices-availability-paired-regions.md).</span><span class="sxs-lookup"><span data-stu-id="1755b-200">For more information about paired regions, see [Best Practices – Azure Paired regions](../best-practices-availability-paired-regions.md).</span></span>

### <a name="how-does-failing-over-to-the-secondary-linked-cache-work"></a><span data-ttu-id="1755b-201">Comment fonctionne le basculement vers le cache lié secondaire ?</span><span class="sxs-lookup"><span data-stu-id="1755b-201">How does failing over to the secondary linked cache work?</span></span>

<span data-ttu-id="1755b-202">Dans la version initiale de la géoréplication, Cache Redis Azure ne prend pas en charge le basculement automatique entre régions Azure.</span><span class="sxs-lookup"><span data-stu-id="1755b-202">In the initial release of Geo-replication, Azure Redis Cache does not support automatic failover across Azure regions.</span></span> <span data-ttu-id="1755b-203">La géoréplication est utilisée principalement dans un scénario de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="1755b-203">Geo-replication is used primarily in a disaster recovery scenario.</span></span> <span data-ttu-id="1755b-204">Dans un scénario de récupération d’urgence, les clients doivent activer la pile d’applications entière dans une région de sauvegarde de manière coordonnée, plutôt que de laisser des composants d’application individuels décider du moment auquel basculer vers leurs sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="1755b-204">In a distater recovery scenario, customers should bring up the entire application stack in a backup region in a coordinated manner rather than letting individual application components decide when to switch to their backups on their own.</span></span> <span data-ttu-id="1755b-205">Cela est particulièrement pertinent pour Redis.</span><span class="sxs-lookup"><span data-stu-id="1755b-205">This is especially relevant to Redis.</span></span> <span data-ttu-id="1755b-206">L’un des principaux avantages de Redis est qu’il s’agit d’un magasin dont la latence est très basse.</span><span class="sxs-lookup"><span data-stu-id="1755b-206">One of the key benefits of Redis is that it is a very low-latency store.</span></span> <span data-ttu-id="1755b-207">Si un Redis utilisé par une application bascule vers une autre région Azure sans que la couche de calcul suive, la durée ajoutée des boucles a un impact perceptible sur les performances.</span><span class="sxs-lookup"><span data-stu-id="1755b-207">If Redis used by an application fails over to a different Azure region but the compute tier does not, the added round trip time would have a noticeable impact on performance.</span></span> <span data-ttu-id="1755b-208">Nous souhaitons donc éviter que Redis bascule automatiquement en raison des problèmes temporaires de disponibilité que cela engendrerait.</span><span class="sxs-lookup"><span data-stu-id="1755b-208">For this reason, we would like to avoid Redis failing over automatically due to transient availability issues.</span></span>

<span data-ttu-id="1755b-209">Actuellement, pour lancer le basculement, vous devez supprimer le lien de géoréplication dans le portail Azure, puis modifier le point de terminaison de connexion dans le client Redis du cache lié principal au cache secondaire (précédemment lié).</span><span class="sxs-lookup"><span data-stu-id="1755b-209">Currently, to initiate the failover, you need to remove the Geo-replication link in the Azure portal, and then change the connection end-point in the Redis client from the primary linked cache to the (formerly linked) secondary cache.</span></span> <span data-ttu-id="1755b-210">Une fois les deux caches dissociés, le réplica redevient un cache en lecture-écriture normal, et accepte directement les demandes des clients Redis.</span><span class="sxs-lookup"><span data-stu-id="1755b-210">When the two caches are disassociated, the replica becomes a regular read-write cache again and accepts requests directly from Redis clients.</span></span>


## <a name="next-steps"></a><span data-ttu-id="1755b-211">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="1755b-211">Next steps</span></span>

<span data-ttu-id="1755b-212">En savoir plus sur le [Niveau Premium de Cache Redis Azure](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="1755b-212">Learn more about the [Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

