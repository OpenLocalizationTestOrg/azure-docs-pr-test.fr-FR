---
title: "aaaMigrate tooRedis applications de Service de Cache géré - Azure | Documents Microsoft"
description: "Découvrez comment les applications de Service de Cache géré et In-Role Cache toomigrate tooAzure Cache Redis"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="0d5e1-103">Migrer à partir du Service de Cache géré tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="0d5e1-104">Migration de vos applications qui utilisent le Service de Cache géré Azure tooAzure Cache Redis peut être accomplie à l’application de tooyour des modifications minimes, selon les fonctionnalités du Service de Cache géré hello utilisées par votre application de mise en cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="0d5e1-105">Alors que hello API ne sont pas exactement hello même, ils sont similaires, et une grande partie de votre code existant qui utilise le Service de Cache géré tooaccess un cache peut être réutilisée avec des modifications minimes.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="0d5e1-106">Cette rubrique montre comment application et configuration requise de toomake hello change toomigrate votre toouse d’applications de Service de Cache géré Azure Redis Cache et montre comment certaines des fonctionnalités de hello de Cache Redis Azure peuvent être utilisés tooimplement hello fonctionnalités d’un cache de Service de Cache géré.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="0d5e1-107">Le service de cache géré et le In-Role Cache ont été [supprimés](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) le 30 novembre 2016.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="0d5e1-108">Si vous disposez de tous les déploiements de Cache dans le rôle que vous souhaitez toomigrate tooAzure Cache Redis, vous pouvez suivre les étapes de hello dans cet article.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="0d5e1-109">Étapes de la migration</span><span class="sxs-lookup"><span data-stu-id="0d5e1-109">Migration Steps</span></span>
<span data-ttu-id="0d5e1-110">Hello suit est requis toomigrate un toouse d’application de Service de Cache géré Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="0d5e1-111">Mapper les fonctionnalités de Service de Cache géré tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="0d5e1-112">Sélection d’une offre de cache</span><span class="sxs-lookup"><span data-stu-id="0d5e1-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="0d5e1-113">Création d’un cache</span><span class="sxs-lookup"><span data-stu-id="0d5e1-113">Create a Cache</span></span>
* <span data-ttu-id="0d5e1-114">Configurer les Clients de Cache hello</span><span class="sxs-lookup"><span data-stu-id="0d5e1-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="0d5e1-115">Supprimer hello Configuration de Service de Cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="0d5e1-116">Configurer un client de cache à l’aide de hello NuGet Package StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="0d5e1-117">Migration du code du Service de cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="0d5e1-118">Connecter le cache de toohello à l’aide de la classe ConnectionMultiplexer de hello</span><span class="sxs-lookup"><span data-stu-id="0d5e1-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="0d5e1-119">Types de données primitifs d’accès dans le cache de hello</span><span class="sxs-lookup"><span data-stu-id="0d5e1-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="0d5e1-120">Utiliser des objets .NET dans le cache de hello</span><span class="sxs-lookup"><span data-stu-id="0d5e1-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="0d5e1-121">Migrer l’état de Session ASP.NET et la sortie mise en cache tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="0d5e1-122">Mapper les fonctionnalités de Service de Cache géré tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="0d5e1-123">Bien que similaires, le Service de cache géré Azure et le Cache Redis Azure implémentent certaines de leurs fonctionnalités de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="0d5e1-124">Cette section décrit quelques-unes des différences de hello et fournit des conseils sur l’implémentation des fonctionnalités de hello du Service de Cache géré dans le Cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="0d5e1-125">Fonctionnalité du Service de cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-125">Managed Cache Service feature</span></span> | <span data-ttu-id="0d5e1-126">Prise en charge du Service de cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-126">Managed Cache Service support</span></span> | <span data-ttu-id="0d5e1-127">Prise en charge du Cache Redis Azure</span><span class="sxs-lookup"><span data-stu-id="0d5e1-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0d5e1-128">Caches nommés</span><span class="sxs-lookup"><span data-stu-id="0d5e1-128">Named caches</span></span> |<span data-ttu-id="0d5e1-129">Un cache par défaut est configuré et Bonjour Standard et Premium offres de cache, les toonine supplémentaire cache nommés peuvent être configurés si vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="0d5e1-130">Les caches Redis Azure ont un nombre configurable de bases de données (valeur par défaut de 16) qui peuvent être utilisé tooimplement un toonamed de fonctionnalités similaires met en cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="0d5e1-131">Pour plus d’informations, consultez les sections [What are Redis databases?](cache-faq.md#what-are-redis-databases) (Que sont les bases de données Redis ?) et [Configuration du serveur Redis par défaut](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="0d5e1-132">Haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="0d5e1-132">High Availability</span></span> |<span data-ttu-id="0d5e1-133">Fournit une haute disponibilité pour les éléments dans le cache dans les offres de cache Standard et Premium hello hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="0d5e1-134">Si les éléments sont perdues en raison de l’échec de tooa, les copies de sauvegarde des éléments hello dans le cache de hello sont toujours disponibles.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="0d5e1-135">Écrit le cache secondaire de toohello sont effectuées de façon synchrone.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="0d5e1-136">Haute disponibilité est disponible dans hello Standard et Premium offres de cache, qui ont une configuration de principal/réplica à deux nœuds (chaque partition dans un cache Premium a une paire principal/réplica).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="0d5e1-137">Écritures toohello réplica sont effectuées de façon asynchrone.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="0d5e1-138">Pour plus d’informations, consultez [Tarification - Cache Redis Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="0d5e1-139">Notifications</span><span class="sxs-lookup"><span data-stu-id="0d5e1-139">Notifications</span></span> |<span data-ttu-id="0d5e1-140">Autorise les clients tooreceive recevoir des notifications asynchrones lorsque diverses opérations de cache surviennent sur un cache nommé.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="0d5e1-141">Applications clientes peuvent utiliser Redis pub/sub ou [notifications d’espace de clés](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve une toonotifications de fonctionnalités similaires.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="0d5e1-142">Cache local</span><span class="sxs-lookup"><span data-stu-id="0d5e1-142">Local cache</span></span> |<span data-ttu-id="0d5e1-143">Stocke une copie des objets mis en cache localement sur le client hello pour un accès très rapide.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="0d5e1-144">Les applications clientes doivent tooimplement cette fonctionnalité à l’aide d’un dictionnaire ou une structure de données similaire.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="0d5e1-145">Stratégie d’éviction</span><span class="sxs-lookup"><span data-stu-id="0d5e1-145">Eviction Policy</span></span> |<span data-ttu-id="0d5e1-146">Aucune ou LRU.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-146">None or LRU.</span></span> <span data-ttu-id="0d5e1-147">stratégie par défaut de Hello est LRU.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-147">hello default policy is LRU.</span></span> |<span data-ttu-id="0d5e1-148">Cache Redis Azure prend en charge hello suivant des stratégies d’éviction : volatile-lru, allkeys-lru, volatile aléatoire, aléatoire allkeys-volatile-durée de vie, noeviction.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="0d5e1-149">stratégie par défaut de Hello est volatile-lru.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="0d5e1-150">Pour plus d’informations, consultez la section [Configuration du serveur Redis par défaut](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="0d5e1-151">Stratégie d’expiration</span><span class="sxs-lookup"><span data-stu-id="0d5e1-151">Expiration Policy</span></span> |<span data-ttu-id="0d5e1-152">stratégie d’expiration par défaut des Hello est absolue et intervalle d’expiration hello par défaut est de dix minutes.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="0d5e1-153">Les stratégies « Fenêtre coulissante » et « Jamais » sont également disponibles.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="0d5e1-154">Par défaut des éléments dans le cache de hello n’expirent pas, mais un délai d’expiration peut être configuré sur une base par écriture à l’aide de surcharges d’ensemble de cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="0d5e1-155">Pour plus d’informations, consultez [ajouter et récupérer des objets à partir du cache de hello](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="0d5e1-156">Régions et balisage</span><span class="sxs-lookup"><span data-stu-id="0d5e1-156">Regions and Tagging</span></span> |<span data-ttu-id="0d5e1-157">Les régions sont des sous-groupes d’éléments mis en cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="0d5e1-158">Régions prennent également en charge l’annotation hello des éléments mis en cache avec les chaînes descriptives supplémentaires appelées « balises ».</span><span class="sxs-lookup"><span data-stu-id="0d5e1-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="0d5e1-159">Régions prennent en charge les opérations de recherche hello capacité tooperform sur n’importe quel élément balisé dans cette région.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="0d5e1-160">Tous les éléments dans une région sont situés dans un seul nœud du cluster de cache hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="0d5e1-161">Un cache Redis se compose d’un seul nœud (sauf si le cluster Redis est activé) afin de concept hello des régions de Service de Cache géré ne s’applique pas.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="0d5e1-162">Redis prend en charge la recherche et les opérations génériques lors de la récupération de clés afin de balises descriptives peuvent être incorporés dans les noms de clés hello et utilisé des éléments tooretrieve hello plus tard.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="0d5e1-163">Pour obtenir un exemple d’implémentation d’une solution de balisage à l’aide de Redis, voir la page relative à l’ [implémentation de balisage de cache avec Redis](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="0d5e1-164">Sérialisation</span><span class="sxs-lookup"><span data-stu-id="0d5e1-164">Serialization</span></span> |<span data-ttu-id="0d5e1-165">Cache géré prend en charge NetDataContractSerializer, BinaryFormatter et utilisation de hello de sérialiseurs personnalisés.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="0d5e1-166">valeur par défaut Hello est NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="0d5e1-167">Il incombe hello hello client tooserialize .NET des objets d’application avant de les placer dans le cache hello avec choix hello du sérialiseur hello de développeur d’applications client toohello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="0d5e1-168">Pour plus d’informations et des exemples de code, consultez [travailler avec des objets .NET dans le cache de hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="0d5e1-169">Émulateur de cache</span><span class="sxs-lookup"><span data-stu-id="0d5e1-169">Cache emulator</span></span> |<span data-ttu-id="0d5e1-170">Le cache géré fournit un émulateur de cache local.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="0d5e1-171">Cache Redis Azure n’a pas d’un émulateur, mais vous pouvez [exécuter localement de génération de MSOpenTech hello de redis-server.exe](cache-faq.md#cache-emulator) tooprovide une expérience d’émulateur.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="0d5e1-172">Sélection d’une offre de cache</span><span class="sxs-lookup"><span data-stu-id="0d5e1-172">Choose a Cache Offering</span></span>
<span data-ttu-id="0d5e1-173">Le Cache Redis Microsoft Azure est disponible dans hello suivant niveaux :</span><span class="sxs-lookup"><span data-stu-id="0d5e1-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="0d5e1-174">**De base** , avec un seul nœud.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-174">**Basic** – Single node.</span></span> <span data-ttu-id="0d5e1-175">Plusieurs tailles de too53 go.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="0d5e1-176">**Standard** : avec deux nœuds, principal et réplica.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="0d5e1-177">Plusieurs tailles de too53 go.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="0d5e1-178">Un contrat SLA de 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-178">99.9% SLA.</span></span>
* <span data-ttu-id="0d5e1-179">**Premium** – deux nœuds principal/réplica avec les partitions de too10.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="0d5e1-180">Tailles multiples de 6 Go too530 go.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="0d5e1-181">Toutes les fonctionnalités du niveau Standard et d’autres, y compris la prise en charge du [cluster Redis](cache-how-to-premium-clustering.md), la [persistance Redis](cache-how-to-premium-persistence.md) et le [réseau virtuel Azure](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="0d5e1-182">Un contrat SLA de 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-182">99.9% SLA.</span></span>

<span data-ttu-id="0d5e1-183">Chaque option diffère en termes de fonctionnalités et de tarification.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="0d5e1-184">Hello fonctionnalités sont abordées plus loin dans ce guide et pour plus d’informations sur la tarification, consultez [détails de la tarification du Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="0d5e1-185">Un point de départ pour la migration est toopick hello taille qui correspond à la taille de hello de votre cache de Service de Cache géré précédente, puis augmenter ou diminuer en fonction des besoins hello de votre application.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="0d5e1-186">Pour plus d’informations sur le choix d’offre de Cache Redis Azure hello appropriée, consultez [offre de Cache Redis et de la taille dois-je utiliser ?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="0d5e1-187">Création d’un cache</span><span class="sxs-lookup"><span data-stu-id="0d5e1-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="0d5e1-188">Configurer les Clients de Cache hello</span><span class="sxs-lookup"><span data-stu-id="0d5e1-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="0d5e1-189">Une fois que le cache de hello est créé et configuré, étape suivante de hello est la configuration de Service de Cache géré tooremove hello et ajouter hello ajouter la configuration du Cache Redis Azure hello et les références afin que les clients de cache peuvent accéder au cache de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="0d5e1-190">Supprimer hello Configuration de Service de Cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="0d5e1-191">Configurer un client de cache à l’aide de hello NuGet Package StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="0d5e1-192">Supprimer hello Configuration de Service de Cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="0d5e1-193">Avant de hello les applications clientes peuvent être configurées pour Azure Redis Cache, configuration de Service de Cache géré existante hello et références d’assembly doivent être supprimées en désinstallant le package NuGet de Service de Cache géré de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="0d5e1-194">toouninstall hello package NuGet de Service de Cache géré avec le bouton droit de projet de client hello dans **l’Explorateur de solutions** et choisissez **gérer les Packages NuGet**.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="0d5e1-195">Sélectionnez hello **les packages installés** nœud et type W**indowsAzure.Caching** dans hello recherche installé, boîte de packages.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="0d5e1-196">Sélectionnez **Windows** **Azure Cache** (ou **Windows** **mise en cache Azure** selon la version de hello du package NuGet de hello), cliquez sur  **Désinstaller**, puis cliquez sur **fermer**.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Désinstaller le package NuGet du Service de cache géré Azure](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="0d5e1-198">Package de NuGet de Service de Cache géré hello désinstallation supprime les assemblys de Service de Cache géré hello et les entrées du Service de Cache géré hello dans hello app.config ou web.config de l’application cliente de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="0d5e1-199">Étant donné que certains paramètres personnalisés ne peuvent pas être supprimés lors de la désinstallation du package NuGet de hello, ouvrez le fichier web.config ou app.config et assurez-vous que hello suivant d’éléments sont complètement supprimés.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="0d5e1-200">Vérifiez que hello `dataCacheClients` est supprimée de hello `configSections` élément.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="0d5e1-201">Ne supprimez pas l’ensemble de hello `configSections` élément ; simplement supprimer hello `dataCacheClients` entrée, si elle est présente.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="0d5e1-202">Vérifiez que hello `dataCacheClients` section est supprimée.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="0d5e1-203">Hello `dataCacheClients` section sera similaire toohello l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="0d5e1-204">Une fois la configuration du Service de Cache géré hello est supprimée, vous pouvez configurer client de cache hello comme décrit dans hello suivant la section.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="0d5e1-205">Configurer un client de cache à l’aide de hello NuGet Package StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="0d5e1-206">Migration du code du Service de cache géré</span><span class="sxs-lookup"><span data-stu-id="0d5e1-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="0d5e1-207">API de Hello pour le client de cache StackExchange.Redis hello est similaire toohello Service de Cache géré.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="0d5e1-208">Cette section fournit une vue d’ensemble des différences de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="0d5e1-209">Connecter le cache de toohello à l’aide de la classe ConnectionMultiplexer de hello</span><span class="sxs-lookup"><span data-stu-id="0d5e1-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="0d5e1-210">Dans le Service de Cache géré, cache toohello de connexions ont été traitées par hello `DataCacheFactory` et `DataCache` classes.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="0d5e1-211">Dans le Cache Redis Azure, ces connexions sont gérées par hello `ConnectionMultiplexer` classe.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="0d5e1-212">Ajoutez hello qui suit à l’aide du haut de toohello d’instruction d’un fichier à partir de laquelle vous souhaitez tooaccess hello du cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="0d5e1-213">Si cet espace de noms ne résout pas, assurez-vous que vous avez ajouté hello package StackExchange.Redis NuGet comme décrit dans [configurer les clients de cache hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="0d5e1-214">Notez que le client StackExchange.Redis hello nécessite .NET Framework 4 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="0d5e1-215">instance de Cache Redis Azure tooconnect tooan, appel hello statique `ConnectionMultiplexer.Connect` méthode et passe dans le point de terminaison hello et la clé.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="0d5e1-216">Une approche toosharing un `ConnectionMultiplexer` instance dans votre application est toohave une propriété statique qui retourne une instance connectée, toohello similaire, l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="0d5e1-217">Cela fournit un tooinitialize de façon thread-safe qu’un seul connecté `ConnectionMultiplexer` instance.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="0d5e1-218">Dans cet exemple `abortConnect` est toofalse ensemble, ce qui signifie que les appels hello réussira même si un cache de toohello de connexion n’est pas établi.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="0d5e1-219">Une fonction clé `ConnectionMultiplexer` est qu’elle restaure automatiquement du cache de connectivité toohello une fois le problème de réseau hello ou d’autres causes sont résolus.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="0d5e1-220">Hello point de terminaison du cache, les clés et les ports peuvent être obtenus à partir de hello **Cache Redis** panneau pour votre instance de cache.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="0d5e1-221">Pour plus d’informations, consultez les [propriétés du Cache Redis](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="0d5e1-222">Une fois que hello est établie, retourner une base de données de référence toohello Redis cache en appelant hello `ConnectionMultiplexer.GetDatabase` (méthode).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="0d5e1-223">objet de Hello retourné par hello `GetDatabase` méthode est un objet léger transmis directement et n’a pas besoin toobe stockée.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="0d5e1-224">client de StackExchange.Redis Hello utilise hello `RedisKey` et `RedisValue` types pour l’accès aux éléments et les stocker dans le cache de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="0d5e1-225">Ces types correspondent aux types de langages les plus primitifs, y compris les chaînes, et sont rarement utilisés directement.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="0d5e1-226">Redis chaînes sont plus simples au type hello de valeur et peuvent contenir de nombreux types de données, y compris les flux de données binaires sérialisées, alors que vous ne pouvez pas utiliser directement les type hello, vous allez utiliser les méthodes qui contiennent des `String` dans le nom de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="0d5e1-227">Pour les types de données primitifs plus vous stocker et extraire des éléments de cache de hello à l’aide de hello `StringSet` et `StringGet` méthodes, sauf si vous stockez les collections ou autres types de données Redis dans le cache de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="0d5e1-228">`StringSet`et `StringGet` sont très similaire toohello Service de Cache géré `Put` et `Get` méthodes, principale différence étant qu’avant de définir et obtenir un objet .NET dans le cache de hello vous devez d’abord sérialiser.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="0d5e1-229">Lors de l’appel `StringGet`, si l’objet de hello existe, elle est retournée, et si elle n’est pas le cas, la valeur null est retournée.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="0d5e1-230">Dans ce cas, vous pouvez récupérer la valeur de hello à partir de la source de données souhaitée hello et stockez-le dans le cache de hello pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="0d5e1-231">Il s’agit en tant que modèle de type cache-aside hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="0d5e1-232">expiration de hello toospecify d’un élément dans le cache de hello, utilisez hello `TimeSpan` paramètre de `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="0d5e1-233">Le Cache Redis Azure est compatible aussi bien avec les objets .NET qu’avec les types de données primitifs, mais avant qu’un objet .NET puisse être mis en cache, il doit être sérialisé.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="0d5e1-234">Il s’agit de responsabilité hello hello développeur d’applications.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="0d5e1-235">Flexibilité hello développeur dans le choix de hello du sérialiseur de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="0d5e1-236">Pour plus d’informations et des exemples de code, consultez [travailler avec des objets .NET dans le cache de hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="0d5e1-237">Migrer l’état de Session ASP.NET et la sortie mise en cache tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="0d5e1-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="0d5e1-238">Le Cache Redis Azure dispose de fournisseurs pour l’état de session ASP.NET et pour la mise en cache de sortie de pages.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="0d5e1-239">toomigrate votre application qui utilise les versions de Service de Cache géré hello de ces fournisseurs, supprimez d’abord hello sections existantes de votre fichier web.config, puis configurez les versions de Cache Redis Azure hello des fournisseurs de hello.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="0d5e1-240">Pour obtenir des instructions sur l’utilisation de hello fournisseurs Azure Redis Cache ASP.NET, consultez [fournisseur d’état de Session ASP.NET pour le Cache Redis Azure](cache-aspnet-session-state-provider.md) et [fournisseur de Cache de sortie ASP.NET pour le Cache Redis Azure](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="0d5e1-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0d5e1-241">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="0d5e1-241">Next steps</span></span>
<span data-ttu-id="0d5e1-242">Explorer hello [documentation du Cache Redis Azure](https://azure.microsoft.com/documentation/services/cache/) pour les didacticiels, des exemples, des vidéos et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="0d5e1-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

