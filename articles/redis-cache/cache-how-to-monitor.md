---
title: "Surveillance du Cache Redis Azure | Microsoft Docs"
description: "Découvrez comment surveiller l’état et les performances de vos instances de cache Redis Azure"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 7e70b153-9c87-4290-85af-2228f31df118
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: sdanie
ms.openlocfilehash: 8996f5ce03e39557d9cc9c3de1ec214f5cd664b4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="how-to-monitor-azure-redis-cache"></a><span data-ttu-id="5e4ee-103">Surveillance du cache Redis Azure</span><span class="sxs-lookup"><span data-stu-id="5e4ee-103">How to monitor Azure Redis Cache</span></span>
<span data-ttu-id="5e4ee-104">Le cache Redis Azure utilise [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) afin d’offrir plusieurs possibilités de surveillance de vos instances de cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-104">Azure Redis Cache uses [Azure Monitor](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) to provide several options for monitoring your cache instances.</span></span> <span data-ttu-id="5e4ee-105">Vous pouvez afficher les mesures, épingler des graphiques de mesure au Tableau d’accueil, personnaliser la plage de date et d’heure des graphiques de surveillance, ajouter et supprimer des mesures dans les graphiques et définir des alertes lorsque certaines conditions sont remplies.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-105">You can view metrics, pin metrics charts to the Startboard, customize the date and time range of monitoring charts, add and remove metrics from the charts, and set alerts when certain conditions are met.</span></span> <span data-ttu-id="5e4ee-106">Ces outils vous permettent de surveiller l’intégrité de vos instances Cache Redis Azure et vous aident à gérer vos applications de mise en cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-106">These tools enable you to monitor the health of your Azure Redis Cache instances and help you manage your caching applications.</span></span>

<span data-ttu-id="5e4ee-107">Les mesures des instances de Cache Redis Azure sont collectées à l’aide de la commande Redis [INFO](http://redis.io/commands/info) environ deux fois par minute et sont stockées automatiquement pendant 30 jours (consultez [Exporter des mesures de cache](#export-cache-metrics) pour configurer une stratégie de rétention différente) de façon à pouvoir être affichées dans les graphiques de mesures et évaluées par des règles d’alerte.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-107">Metrics for Azure Redis Cache instances are collected using the Redis [INFO](http://redis.io/commands/info) command approximately twice per minute and automatically stored for 30 days (see [Export cache metrics](#export-cache-metrics) to configure a different retention policy) so they can be displayed in the metrics charts and evaluated by alert rules.</span></span> <span data-ttu-id="5e4ee-108">Pour plus d’informations sur les différentes valeurs INFO utilisées pour chaque mesure de cache, consultez la section [Mesures disponibles et intervalles de création des rapports](#available-metrics-and-reporting-intervals).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-108">For more information about the different INFO values used for each cache metric, see [Available metrics and reporting intervals](#available-metrics-and-reporting-intervals).</span></span>

<a name="view-cache-metrics"></a>

<span data-ttu-id="5e4ee-109">Pour voir les mesures de cache, [accédez](cache-configure.md#configure-redis-cache-settings) à votre instance de cache dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-109">To view cache metrics, [browse](cache-configure.md#configure-redis-cache-settings) to your cache instance in the [Azure portal](https://portal.azure.com).</span></span>  <span data-ttu-id="5e4ee-110">Le Cache Redis Azure fournit des graphiques intégrés sur le **Panneau de vue d’ensemble** et le **Panneau de mesures Redis** .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-110">Azure Redis Cache provides some built-in charts on the **Overview** blade and the **Redis metrics** blade.</span></span> <span data-ttu-id="5e4ee-111">Chaque graphique peut être personnalisé en ajoutant ou en supprimant des mesures et en modifiant l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-111">Each chart can be customized by adding or removing metrics and changing the reporting interval.</span></span>

![Mesures Redis](./media/cache-how-to-monitor/redis-cache-redis-metrics-blade.png)

## <a name="view-pre-configured-metrics-charts"></a><span data-ttu-id="5e4ee-113">Afficher des graphiques de mesures préconfigurés</span><span class="sxs-lookup"><span data-stu-id="5e4ee-113">View pre-configured metrics charts</span></span>

<span data-ttu-id="5e4ee-114">Le **Panneau de vue d’ensemble** comporte les graphiques de surveillance préconfigurés suivants.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-114">The **Overview** blade has the following pre-configured monitoring charts.</span></span>

* [<span data-ttu-id="5e4ee-115">Graphiques de surveillance</span><span class="sxs-lookup"><span data-stu-id="5e4ee-115">Monitoring charts</span></span>](#monitoring-charts)
* [<span data-ttu-id="5e4ee-116">Graphiques d’utilisation</span><span class="sxs-lookup"><span data-stu-id="5e4ee-116">Usage charts</span></span>](#usage-charts)

### <a name="monitoring-charts"></a><span data-ttu-id="5e4ee-117">Graphiques de surveillance</span><span class="sxs-lookup"><span data-stu-id="5e4ee-117">Monitoring charts</span></span>
<span data-ttu-id="5e4ee-118">La **Section surveillance** du **Panneau de vue d’ensemble** affiche des **Correspondances et des absences**, des **Obtentions et des définitions**, des **Connexions** et des graphiques de **Commandes totales** .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-118">The **Monitoring** section in the **Overview** blade has **Hits and Misses**, **Gets and Sets**, **Connections**, and **Total Commands** charts.</span></span>

![Graphiques de surveillance](./media/cache-how-to-monitor/redis-cache-monitoring-part.png)

### <a name="usage-charts"></a><span data-ttu-id="5e4ee-120">Graphiques d’utilisation</span><span class="sxs-lookup"><span data-stu-id="5e4ee-120">Usage charts</span></span>
<span data-ttu-id="5e4ee-121">La **Section utilisation** du **Panneau de vue d’ensemble** affiche **la charge du serveur Redis**, **la Mémoire utilisée**, **la Bande passante réseau**, les graphiques **d’utilisation de l’UC** et affiche également le **Niveau tarifaire** de l’instance de cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-121">The **Usage** section in the **Overview** blade has **Redis Server Load**, **Memory Usage**, **Network Bandwith**, and **CPU Usage** charts, and also displays the **Pricing tier** for the cache instance.</span></span>

![Graphiques d’utilisation](./media/cache-how-to-monitor/redis-cache-usage-part.png)

<span data-ttu-id="5e4ee-123">**Niveau tarifaire** affiche le niveau tarifaire du cache et peut être utilisé pour la [mise à l’échelle](cache-how-to-scale.md) du cache à un autre niveau tarifaire.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-123">The **Pricing tier** displays the cache pricing tier, and can be used to [scale](cache-how-to-scale.md) the cache to a different pricing tier.</span></span>

## <a name="view-metrics-with-azure-monitor"></a><span data-ttu-id="5e4ee-124">Afficher les mesures avec Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="5e4ee-124">View metrics with Azure monitor</span></span>
<span data-ttu-id="5e4ee-125">Pour afficher les mesures Redis et créer des graphiques personnalisés à l’aide d’Azure Monitor, cliquez sur **Mesures** depuis le **menu Ressource**et personnalisez votre graphique à l’aide des mesures souhaitées, de l’intervalle de consignation désiré, du type de graphique voulu et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-125">To view Redis metrics and create custom charts using Azure Monitor, click **Metrics** from the **Resource menu**, and customize your chart using the desired metrics, reporting interval, chart type, and more.</span></span>

![Mesures Redis](./media/cache-how-to-monitor/redis-cache-monitor.png)

<span data-ttu-id="5e4ee-127">Pour plus d’informations sur l’utilisation des mesures à l’aide d’Azure Monitor, consultez [Vue d’ensemble des mesures dans Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-127">For more information on working with metrics using Azure Monitor, see [Overview of metrics in Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).</span></span>

<a name="how-to-view-metrics-and-customize-chart"></a>
<a name="enable-cache-diagnostics"></a>
## <a name="export-cache-metrics"></a><span data-ttu-id="5e4ee-128">Exporter les mesures de cache</span><span class="sxs-lookup"><span data-stu-id="5e4ee-128">Export cache metrics</span></span>
<span data-ttu-id="5e4ee-129">Par défaut, les mesures de cache dans Azure Monitor sont [stockées pendant 30 jours](../monitoring-and-diagnostics/monitoring-overview-azure-monitor.md#store-and-archive) , puis supprimées.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-129">By default, cache metrics in Azure Monitor are [stored for 30 days](../monitoring-and-diagnostics/monitoring-overview-azure-monitor.md#store-and-archive) and then deleted.</span></span> <span data-ttu-id="5e4ee-130">Pour conserver vos mesures de cache pendant plus de 30 jours, vous pouvez [désigner un compte de stockage](../monitoring-and-diagnostics/monitoring-archive-diagnostic-logs.md) et spécifiez une stratégie de **Rétention (jours)** pour vos mesures de cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-130">To persist your cache metrics for longer than 30 days, you can [designate a storage account](../monitoring-and-diagnostics/monitoring-archive-diagnostic-logs.md) and specify a **Retention (days)** policy for your cache metrics.</span></span> 

<span data-ttu-id="5e4ee-131">Pour configurer un compte de stockage pour vos mesures de cache :</span><span class="sxs-lookup"><span data-stu-id="5e4ee-131">To configure a storage account for your cache metrics:</span></span>

1. <span data-ttu-id="5e4ee-132">Cliquez sur **Diagnostics** depuis le **menu Ressource** du panneau **Cache Redis** .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-132">Click **Diagnostics** from the **Resource menu** in the **Redis Cache** blade.</span></span>
2. <span data-ttu-id="5e4ee-133">Cliquez **Sur**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-133">Click **On**.</span></span>
3. <span data-ttu-id="5e4ee-134">Cochez **Archive vers un compte de stockage**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-134">Check **Archive to a storage account**.</span></span>
4. <span data-ttu-id="5e4ee-135">Sélectionnez le compte de stockage dans lequel stocker les mesures de cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-135">Select the storage account in which to store the cache metrics.</span></span>
5. <span data-ttu-id="5e4ee-136">Cochez la case **1 minute** et spécifiez une stratégie de **Rétention (jours)** .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-136">Check the **1 minute** checkbox and specify a **Retention (days)** policy.</span></span> <span data-ttu-id="5e4ee-137">Si vous ne souhaitez appliquer aucune stratégie de rétention et que vous souhaitez conserver les données indéfiniment, réglez **Rétention (jours)** à **0**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-137">If you do not want to apply any retention policy and retain data forever, set **Retention (days)** to **0**.</span></span>
6. <span data-ttu-id="5e4ee-138">Cliquez sur **Save**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-138">Click **Save**.</span></span>

![Diagnostics Redis](./media/cache-how-to-monitor/redis-cache-diagnostics.png)

>[!NOTE]
><span data-ttu-id="5e4ee-140">En plus d’archiver vos mesures de cache vers le stockage, vous pouvez également [les diffuser en continu vers un Hub d’événements ou les envoyer vers Log Analytics](../monitoring-and-diagnostics/monitoring-overview-metrics.md#export-metrics).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-140">In addition to archiving your cache metrics to storage, you can also [stream them to an Event hub or send them to Log Analytics](../monitoring-and-diagnostics/monitoring-overview-metrics.md#export-metrics).</span></span>
>
>

<span data-ttu-id="5e4ee-141">Pour accéder à vos mesures, vous pouvez les afficher dans le portail Azure, comme décrit précédemment dans cet article. Vous pouvez également y accéder à l’aide de l’ [API REST Azure Monitor Metrics](../monitoring-and-diagnostics/monitoring-overview-metrics.md#access-metrics-via-the-rest-api).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-141">To access your metrics, you can view them in the Azure portal as previously described in this article, and you can also access them using the [Azure Monitor Metrics REST API](../monitoring-and-diagnostics/monitoring-overview-metrics.md#access-metrics-via-the-rest-api).</span></span>

> [!NOTE]
> <span data-ttu-id="5e4ee-142">Si vous changez de compte de stockage, les données du compte de stockage configuré précédemment restent disponibles en téléchargement, mais elles ne sont pas affichées dans le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-142">If you change storage accounts, the data in the previously configured storage account remains available for download, but it is not displayed in the Azure portal.</span></span>  
> 
> 

## <a name="available-metrics-and-reporting-intervals"></a><span data-ttu-id="5e4ee-143">Mesures disponibles et intervalles de création des rapports</span><span class="sxs-lookup"><span data-stu-id="5e4ee-143">Available metrics and reporting intervals</span></span>
<span data-ttu-id="5e4ee-144">Les mesures de cache font l’objet de rapports à différents intervalles : **Dernière heure**, **Aujourd’hui**, **Semaine dernière** et **Personnalisé**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-144">Cache metrics are reported using several reporting intervals, including **Past hour**, **Today**, **Past week**, and **Custom**.</span></span> <span data-ttu-id="5e4ee-145">Le panneau **Mesure** de chaque mesure affiche les valeurs moyennes, minimales et maximales de chaque mesure du graphique et certaines mesures affichent le total pour l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-145">The **Metric** blade for each metrics chart displays the average, minimum, and maximum values for each metric in the chart, and some metrics display a total for the reporting interval.</span></span> 

<span data-ttu-id="5e4ee-146">Chaque mesure inclut deux versions.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-146">Each metric includes two versions.</span></span> <span data-ttu-id="5e4ee-147">Une première mesure évalue les performances de la totalité du cache et, pour les caches qui utilisent le [clustering](cache-how-to-premium-clustering.md), une deuxième version de la mesure dont le nom inclut `(Shard 0-9)` évalue les performances d’une seule partition d’un cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-147">One metric measures performance for the entire cache, and for caches that use [clustering](cache-how-to-premium-clustering.md), a second version of the metric that includes `(Shard 0-9)` in the name measures performance for a single shard in a cache.</span></span> <span data-ttu-id="5e4ee-148">Par exemple, si un cache comporte 4 partitions, `Cache Hits` est la quantité totale d’accès pour le cache entier, tandis que `Cache Hits (Shard 3)` est simplement le nombre d’accès à cette partition du cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-148">For example if a cache has 4 shards, `Cache Hits` is the total amount of hits for the entire cache, and `Cache Hits (Shard 3)` is just the hits for that shard of the cache.</span></span>

> [!NOTE]
> <span data-ttu-id="5e4ee-149">Même lorsque le cache est inactif sans applications clientes actives connectées, vous pouvez constater une certaine activité du cache, par exemple les opérations en cours d’exécution, l’utilisation de la mémoire et les clients connectés.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-149">Even when the cache is idle with no connected active client applications, you may see some cache activity, such as connected clients, memory usage, and operations being performed.</span></span> <span data-ttu-id="5e4ee-150">Cette activité est normale dans le cadre du fonctionnement d’une instance de cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-150">This activity is normal during the operation of an Azure Redis Cache instance.</span></span>
> 
> 

| <span data-ttu-id="5e4ee-151">Mesure</span><span class="sxs-lookup"><span data-stu-id="5e4ee-151">Metric</span></span> | <span data-ttu-id="5e4ee-152">Description</span><span class="sxs-lookup"><span data-stu-id="5e4ee-152">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5e4ee-153">Présences dans le cache</span><span class="sxs-lookup"><span data-stu-id="5e4ee-153">Cache Hits</span></span> |<span data-ttu-id="5e4ee-154">Nombre de recherches clés réussies au cours de l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-154">The number of successful key lookups during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-155">Celle-ci mappe à [ à partir de la commande Redis ](http://redis.io/commands/info)INFO`keyspace_hits`.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-155">This maps to `keyspace_hits` from the Redis [INFO](http://redis.io/commands/info) command.</span></span> |
| <span data-ttu-id="5e4ee-156">Absences dans le cache</span><span class="sxs-lookup"><span data-stu-id="5e4ee-156">Cache Misses</span></span> |<span data-ttu-id="5e4ee-157">Nombre de recherches clés non réussies au cours de l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-157">The number of failed key lookups during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-158">Cette valeur correspond à la commande Redis INFO `keyspace_misses` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-158">This maps to `keyspace_misses` from the Redis INFO command.</span></span> <span data-ttu-id="5e4ee-159">Les absences dans le cache ne signifient pas nécessairement qu’il y a un problème dans le cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-159">Cache misses do not necessarily mean there is an issue with the cache.</span></span> <span data-ttu-id="5e4ee-160">Par exemple, en cas d’utilisation du mode de programmation de type cache-aside, une application recherche d’abord l’élément dans le cache.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-160">For example, when using the cache-aside programming pattern, an application looks first in the cache for an item.</span></span> <span data-ttu-id="5e4ee-161">Si cet élément ne s’y trouve pas (Absence dans le cache), il est récupéré dans la base de données et ajouté au cache pour la prochaine fois.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-161">If the item is not there (cache miss), the item is retrieved from the database and added to the cache for next time.</span></span> <span data-ttu-id="5e4ee-162">Les absences dans le cache sont un comportement normal pour le mode de programmation de type cache-aside.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-162">Cache misses are normal behavior for the cache-aside programming pattern.</span></span> <span data-ttu-id="5e4ee-163">Si le nombre d’absences dans le cache est plus élevé que prévu, examinez la logique d’application qui remplit le cache et y lit les informations.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-163">If the number of cache misses is higher than expected, examine the application logic that populates and reads from the cache.</span></span> <span data-ttu-id="5e4ee-164">Si des éléments sont supprimés du cache en raison d’une trop grande sollicitation de la mémoire, des absences dans le cache peuvent se produire, mais `Used Memory` ou `Evicted Keys` sont de meilleures mesures pour surveiller la pression sur la mémoire.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-164">If items are being evicted from the cache due to memory pressure then there may be some cache misses, but a better metric to monitor for memory pressure would be `Used Memory` or `Evicted Keys`.</span></span> |
| <span data-ttu-id="5e4ee-165">Clients connectés</span><span class="sxs-lookup"><span data-stu-id="5e4ee-165">Connected Clients</span></span> |<span data-ttu-id="5e4ee-166">Nombre de connexions client au cache au cours de l’intervalle de création des rapports spécifié.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-166">The number of client connections to the cache during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-167">Cette valeur correspond à la commande Redis INFO `connected_clients` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-167">This maps to `connected_clients` from the Redis INFO command.</span></span> <span data-ttu-id="5e4ee-168">Une fois la [limite de connexions](cache-configure.md#default-redis-server-configuration) atteinte, les tentatives de connexion ultérieures au cache échouent.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-168">Once the [connection limit](cache-configure.md#default-redis-server-configuration) is reached subsequent connection attempts to the cache will fail.</span></span> <span data-ttu-id="5e4ee-169">Notez que même s’il n’y a aucune application cliente active, il peut rester quelques instances de clients connectés en raison de connexions et processus internes.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-169">Note that even if there are no active client application, there may still be a few instances of connected clients due to internal processes and connections.</span></span> |
| <span data-ttu-id="5e4ee-170">Clés exclues</span><span class="sxs-lookup"><span data-stu-id="5e4ee-170">Evicted Keys</span></span> |<span data-ttu-id="5e4ee-171">Nombre d’éléments supprimés du cache au cours de l’intervalle de création des rapports, en raison de la limite `maxmemory` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-171">The number of items evicted from the cache during the specified reporting interval due to the `maxmemory` limit.</span></span> <span data-ttu-id="5e4ee-172">Cette valeur correspond à la commande Redis INFO `evicted_keys` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-172">This maps to `evicted_keys` from the Redis INFO command.</span></span> |
| <span data-ttu-id="5e4ee-173">Clés expirées</span><span class="sxs-lookup"><span data-stu-id="5e4ee-173">Expired Keys</span></span> |<span data-ttu-id="5e4ee-174">Nombre d’éléments expirés dans le cache au cours de l’intervalle de création des rapports spécifié.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-174">The number of items expired from the cache during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-175">Cette valeur correspond à la commande Redis INFO `expired_keys` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-175">This value maps to `expired_keys` from the Redis INFO command.</span></span> |
| <span data-ttu-id="5e4ee-176">Nombre total de clés</span><span class="sxs-lookup"><span data-stu-id="5e4ee-176">Total Keys</span></span>  | <span data-ttu-id="5e4ee-177">Le nombre maximal de clés dans le cache pendant la dernière période de rapport.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-177">The maximum number of keys in the cache during the past reporting time period.</span></span> <span data-ttu-id="5e4ee-178">Cette valeur correspond à la commande Redis INFO `keyspace` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-178">This maps to `keyspace` from the Redis INFO command.</span></span> <span data-ttu-id="5e4ee-179">En raison d’une limitation du système de mesures sous-jacent, pour les caches avec le clustering activé, Nombre total de clés retourne le nombre maximal de clés de la partition ayant eu le nombre maximal de clés pendant l’intervalle de consignation.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-179">Due to a limitation of the underlying metrics system, for caches with clustering enabled, Total Keys returns the maximum number of keys of the shard that had the maximum number of keys during the reporting interval.</span></span>  |
| <span data-ttu-id="5e4ee-180">Gets</span><span class="sxs-lookup"><span data-stu-id="5e4ee-180">Gets</span></span> |<span data-ttu-id="5e4ee-181">Nombre d’opérations get dans le cache au cours de l’intervalle de création des rapports spécifié.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-181">The number of get operations from the cache during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-182">Cette valeur est la somme des valeurs suivantes obtenues de toutes les commandes Redis INFO : `cmdstat_get`, `cmdstat_hget`, `cmdstat_hgetall`, `cmdstat_hmget`, `cmdstat_mget`, `cmdstat_getbit` et `cmdstat_getrange`. Elle est équivalente à la somme du nombre de présences et d’absences au cours de l’intervalle de création du rapport.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-182">This value is the sum of the following values from the Redis INFO all command: `cmdstat_get`, `cmdstat_hget`, `cmdstat_hgetall`, `cmdstat_hmget`, `cmdstat_mget`, `cmdstat_getbit`, and `cmdstat_getrange`, and is equivalent to the sum of cache hits and misses during the reporting interval.</span></span> |
| <span data-ttu-id="5e4ee-183">Charge du serveur Redis</span><span class="sxs-lookup"><span data-stu-id="5e4ee-183">Redis Server Load</span></span> |<span data-ttu-id="5e4ee-184">Pourcentage de cycles dans lesquels le serveur Redis est occupé par le traitement et n’est pas inactif, en attente de messages.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-184">The percentage of cycles in which the Redis server is busy processing and not waiting idle for messages.</span></span> <span data-ttu-id="5e4ee-185">Si ce compteur atteint 100, c’est que le serveur Redis a atteint un plafond de performances et que le processeur ne peut pas fonctionner plus rapidement.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-185">If this counter reaches 100 it means the Redis server has hit a performance ceiling and the CPU can't process work any faster.</span></span> <span data-ttu-id="5e4ee-186">Si vous voyez une forte charge de serveur Redis, des exceptions d’expiration seront levées dans le client.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-186">If you are seeing high Redis Server Load then you will see timeout exceptions in the client.</span></span> <span data-ttu-id="5e4ee-187">Dans ce cas, vous devez envisager d’effectuer une mise à l’échelle ou bien de partitionner vos données sur plusieurs caches.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-187">In this case you should consider scaling up or partitioning your data into multiple caches.</span></span> |
| <span data-ttu-id="5e4ee-188">Sets</span><span class="sxs-lookup"><span data-stu-id="5e4ee-188">Sets</span></span> |<span data-ttu-id="5e4ee-189">Nombre d’opérations set dans le cache au cours de l’intervalle de création des rapports spécifié.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-189">The number of set operations to the cache during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-190">Cette valeur est la somme des valeurs suivantes obtenues de toutes les commandes Redis INFO : `cmdstat_set`, `cmdstat_hset`, `cmdstat_hmset`, `cmdstat_hsetnx`, `cmdstat_lset`, `cmdstat_mset`, `cmdstat_msetnx`, `cmdstat_setbit`, `cmdstat_setex`, `cmdstat_setrange` et `cmdstat_setnx`.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-190">This value is the sum of the following values from the Redis INFO all command: `cmdstat_set`, `cmdstat_hset`, `cmdstat_hmset`, `cmdstat_hsetnx`, `cmdstat_lset`, `cmdstat_mset`, `cmdstat_msetnx`, `cmdstat_setbit`, `cmdstat_setex`, `cmdstat_setrange`, and `cmdstat_setnx`.</span></span> |
| <span data-ttu-id="5e4ee-191">Total des opérations</span><span class="sxs-lookup"><span data-stu-id="5e4ee-191">Total Operations</span></span> |<span data-ttu-id="5e4ee-192">Nombre total de commandes traitées par le serveur de cache au cours de l’intervalle spécifié.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-192">The total number of commands processed by the cache server during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-193">Cette valeur correspond à la commande Redis INFO `total_commands_processed` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-193">This value maps to `total_commands_processed` from the Redis INFO command.</span></span> <span data-ttu-id="5e4ee-194">Notez que lorsque le cache Redis Azure est uniquement utilisé pour publication et téléchargement, il n’y a aucune mesure pour `Cache Hits`, `Cache Misses`, `Gets` ou `Sets`, mais il y aura des mesures de `Total Operations` qui reflètent l’utilisation du cache pour ces opérations.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-194">Note that when Azure Redis Cache is used purely for pub/sub there will be no metrics for `Cache Hits`, `Cache Misses`, `Gets`, or `Sets`, but there will be `Total Operations` metrics that reflect the cache usage for pub/sub operations.</span></span> |
| <span data-ttu-id="5e4ee-195">Mémoire utilisée</span><span class="sxs-lookup"><span data-stu-id="5e4ee-195">Used Memory</span></span> |<span data-ttu-id="5e4ee-196">Quantité de mémoire cache, exprimée en Mo, utilisée pour les paires clé/valeur dans le cache au cours de l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-196">The amount of cache memory used for key/value pairs in the cache in MB during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-197">Cette valeur correspond à la commande Redis INFO `used_memory` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-197">This value maps to `used_memory` from the Redis INFO command.</span></span> <span data-ttu-id="5e4ee-198">Elle n’inclut pas les métadonnées ou la fragmentation.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-198">This does not include metadata or fragmentation.</span></span> |
| <span data-ttu-id="5e4ee-199">Taille de la mémoire résidente utilisée</span><span class="sxs-lookup"><span data-stu-id="5e4ee-199">Used Memory RSS</span></span> |<span data-ttu-id="5e4ee-200">Quantité de mémoire cache utilisée (exprimée en Mo) au cours de l’intervalle de création des rapports, fragmentation et métadonnées comprises.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-200">The amount of cache memory used in MB during the specified reporting interval, including fragmentation and metadata.</span></span> <span data-ttu-id="5e4ee-201">Cette valeur correspond à la commande Redis INFO `used_memory_rss` .</span><span class="sxs-lookup"><span data-stu-id="5e4ee-201">This value maps to `used_memory_rss` from the Redis INFO command.</span></span> |
| <span data-ttu-id="5e4ee-202">UC</span><span class="sxs-lookup"><span data-stu-id="5e4ee-202">CPU</span></span> |<span data-ttu-id="5e4ee-203">Utilisation du processeur du serveur de cache Redis Azure sous forme de pourcentage au cours de l’intervalle de création des rapports spécifiée.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-203">The CPU utilization of the Azure Redis Cache server as a percentage during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-204">Cette valeur correspond au compteur de performances `\Processor(_Total)\% Processor Time` du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-204">This value maps to the operating system `\Processor(_Total)\% Processor Time` performance counter.</span></span> |
| <span data-ttu-id="5e4ee-205">Lecture du cache</span><span class="sxs-lookup"><span data-stu-id="5e4ee-205">Cache Read</span></span> |<span data-ttu-id="5e4ee-206">Quantité de données lues dans le cache en mégaoctets par seconde (Mo/s) au cours de l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-206">The amount of data read from the cache in Megabytes per second (MB/s) during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-207">Cette valeur est dérivée des cartes réseau qui prennent en charge la machine virtuelle qui héberge le cache. Elle n’est pas spécifique de Redis.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-207">This value is derived from the network interface cards that support the virtual machine that hosts the cache and is not Redis specific.</span></span> <span data-ttu-id="5e4ee-208">**Cette valeur correspond à la bande passante réseau utilisée par ce cache. Si vous souhaitez configurer des alertes pour des limites de bande passante réseau côté serveur, vous pouvez les créer à l’aide de ce compteur `Cache Read`. Pour connaître les limites de bande passante observées pour les différents niveaux de tarification et tailles de cache, voir [ce tableau](cache-faq.md#cache-performance).**</span><span class="sxs-lookup"><span data-stu-id="5e4ee-208">**This value corresponds to the network bandwidth used by this cache. If you want to set up alerts for server side network bandwidth limits, then create it using this `Cache Read` counter. See [this table](cache-faq.md#cache-performance) for the observed bandwidth limits for various cache pricing tiers and sizes.**</span></span> |
| <span data-ttu-id="5e4ee-209">Cache d’écriture</span><span class="sxs-lookup"><span data-stu-id="5e4ee-209">Cache Write</span></span> |<span data-ttu-id="5e4ee-210">Quantité de données écrites dans le cache en mégaoctets par seconde (Mo/s) au cours de l’intervalle de création des rapports.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-210">The amount of data written to the cache in Megabytes per second (MB/s) during the specified reporting interval.</span></span> <span data-ttu-id="5e4ee-211">Cette valeur est dérivée des cartes réseau qui prennent en charge la machine virtuelle qui héberge le cache. Elle n’est pas spécifique de Redis.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-211">This value is derived from the network interface cards that support the virtual machine that hosts the cache and is not Redis specific.</span></span> <span data-ttu-id="5e4ee-212">Cette valeur correspond à la bande passante réseau des données envoyées au cache depuis le client.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-212">This value corresponds to the network bandwidth of data sent to the cache from the client.</span></span> |

<a name="operations-and-alerts"></a>
## <a name="alerts"></a><span data-ttu-id="5e4ee-213">Alertes</span><span class="sxs-lookup"><span data-stu-id="5e4ee-213">Alerts</span></span>
<span data-ttu-id="5e4ee-214">Vous pouvez configurer les paramètres pour recevoir des alertes en fonction des mesures et des journaux d’activité.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-214">You can configure to receive alerts based on metrics and activity logs.</span></span> <span data-ttu-id="5e4ee-215">Azure Monitor vous permet de configurer une alerte pour effectuer les opérations suivantes lors de son déclenchement :</span><span class="sxs-lookup"><span data-stu-id="5e4ee-215">Azure Monitor allows you to configure an alert to do the following when it triggers:</span></span>

* <span data-ttu-id="5e4ee-216">Envoyer un e-mail de notification</span><span class="sxs-lookup"><span data-stu-id="5e4ee-216">Send an email notification</span></span>
* <span data-ttu-id="5e4ee-217">Appeler un webhook</span><span class="sxs-lookup"><span data-stu-id="5e4ee-217">Call a webhook</span></span>
* <span data-ttu-id="5e4ee-218">Appeler une application logique Azure</span><span class="sxs-lookup"><span data-stu-id="5e4ee-218">Invoke an Azure Logic App</span></span>

<span data-ttu-id="5e4ee-219">Pour configurer les Règles d’alerte de votre cache, cliquez sur **Règles d’alerte** depuis le **menu Ressource**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-219">To configure Alert rules for your cache, click **Alert rules** from the **Resource menu**.</span></span>

![Surveillance](./media/cache-how-to-monitor/redis-cache-monitoring.png)

<span data-ttu-id="5e4ee-221">Pour plus d’informations sur la configuration et l’utilisation des Alertes, consultez [Vue d’ensemble des Alertes](../monitoring-and-diagnostics/insights-alerts-portal.md).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-221">For more information about configuring and using Alerts, see [Overview of Alerts](../monitoring-and-diagnostics/insights-alerts-portal.md).</span></span>

## <a name="activity-logs"></a><span data-ttu-id="5e4ee-222">Journaux d’activité</span><span class="sxs-lookup"><span data-stu-id="5e4ee-222">Activity Logs</span></span>
<span data-ttu-id="5e4ee-223">Le journal d’activité fournit des informations sur les opérations qui ont été effectuées sur vos instances de Cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-223">Activity logs provide insight into the operations that were performed on your Azure Redis Cache instances.</span></span> <span data-ttu-id="5e4ee-224">Ils étaient auparavant nommés « Journaux d’audit » ou « Journaux des opérations ».</span><span class="sxs-lookup"><span data-stu-id="5e4ee-224">It was previously known as "audit logs" or "operational logs".</span></span> <span data-ttu-id="5e4ee-225">À l’aide des journaux d’activité, vous pouvez déterminer « qui, quand et quoi » pour toutes les opérations d’écriture (PUT, POST, DELETE) sur vos instances de Cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-225">Using activity logs, you can determine the "what, who, and when" for any write operations (PUT, POST, DELETE) taken on your Azure Redis Cache instances.</span></span> 

> [!NOTE]
> <span data-ttu-id="5e4ee-226">Les journaux d’activité n’incluent pas les opérations (GET) de lecture.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-226">Activity logs do not include read (GET) operations.</span></span>
>
>

<span data-ttu-id="5e4ee-227">Pour afficher les journaux d’activité de votre cache, cliquez sur **Journaux d’activité** depuis le **menu Ressource**.</span><span class="sxs-lookup"><span data-stu-id="5e4ee-227">To view activity logs for your cache, click **Activity logs** from the **Resource menu**.</span></span>

<span data-ttu-id="5e4ee-228">Pour plus d’informations à propos des Journaux d’activité, consultez [Vue d’ensemble des Journaux d’activité Azure](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md).</span><span class="sxs-lookup"><span data-stu-id="5e4ee-228">For more information about Activity logs, see [Overview of the Azure Activity Log](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md).</span></span>











