---
title: aaaHow tooconfigure Redis clustering Premium Azure Redis cache | Documents Microsoft
description: "Découvrez comment toocreate et gérer Redis clustering pour vos instances de Cache Redis Azure"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 44d520facb9d1af145b69f1b58f082aabb655d4a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="dcabd-103">Comment tooconfigure Redis clustering Premium Azure Redis cache</span><span class="sxs-lookup"><span data-stu-id="dcabd-103">How tooconfigure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="dcabd-104">Cache Redis Azure a différentes offres de cache, qui fournissent une certaine flexibilité hello les choix de la taille du cache et de fonctionnalités, y compris les fonctionnalités de niveau Premium telles que le clustering, la persistance et la prise en charge du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="dcabd-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="dcabd-105">Cet article décrit comment tooconfigure clustering dans une prime Cache Redis Azure instance.</span><span class="sxs-lookup"><span data-stu-id="dcabd-105">This article describes how tooconfigure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="dcabd-106">Pour plus d’informations sur d’autres fonctionnalités de cache premium, consultez [couche de présentation toohello Azure Redis Cache Premium](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="dcabd-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="dcabd-107">Qu’est-ce que le cluster Redis ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-107">What is Redis Cluster?</span></span>
<span data-ttu-id="dcabd-108">Le Cache Redis Azure propose le cluster Redis tel qu' [implémenté dans Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="dcabd-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="dcabd-109">Avec le Cluster Redis, vous obtenez hello avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="dcabd-109">With Redis Cluster, you get hello following benefits:</span></span> 

* <span data-ttu-id="dcabd-110">Bonjour tooautomatically possibilité fractionner votre jeu de données entre plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="dcabd-110">hello ability tooautomatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="dcabd-111">opérations toocontinue Hello possibilité lorsqu’un sous-ensemble de nœuds de hello connaît des échecs ou sont toocommunicate impossible avec rest hello du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="dcabd-111">hello ability toocontinue operations when a subset of hello nodes is experiencing failures or are unable toocommunicate with hello rest of hello cluster.</span></span> 
* <span data-ttu-id="dcabd-112">Plus grand débit : débit augmente de façon linéaire lorsque vous augmentez le nombre de hello de partitions.</span><span class="sxs-lookup"><span data-stu-id="dcabd-112">More throughput: Throughput increases linearly as you increase hello number of shards.</span></span> 
* <span data-ttu-id="dcabd-113">Taille de la mémoire : augmente de façon linéaire lorsque vous augmentez le nombre de hello de partitions.</span><span class="sxs-lookup"><span data-stu-id="dcabd-113">More memory size: Increases linearly as you increase hello number of shards.</span></span>  

<span data-ttu-id="dcabd-114">Pour plus d’informations sur la taille, le débit et la bande passante des caches Premium, consultez [Que propose Cache Redis et quelle taille dois-je utiliser ?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="dcabd-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="dcabd-115">Dans Azure, le cluster Redis est proposé en tant que principal/réplica modèle où chaque partition a une paire principal/réplica avec la réplication dans lequel la réplication hello est gérée par le service de Cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="dcabd-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where hello replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="dcabd-116">Clustering</span><span class="sxs-lookup"><span data-stu-id="dcabd-116">Clustering</span></span>
<span data-ttu-id="dcabd-117">Le clustering est activé sur hello **nouveau Cache Redis** panneau lors de la création du cache.</span><span class="sxs-lookup"><span data-stu-id="dcabd-117">Clustering is enabled on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="dcabd-118">Gestion de clusters est configurée sur hello **Redis de Cluster** panneau.</span><span class="sxs-lookup"><span data-stu-id="dcabd-118">Clustering is configured on hello **Redis Cluster** blade.</span></span>

![Clustering][redis-cache-clustering]

<span data-ttu-id="dcabd-120">Vous pouvez utiliser jusqu'à too10 des partitions dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="dcabd-120">You can have up too10 shards in hello cluster.</span></span> <span data-ttu-id="dcabd-121">Cliquez sur **activé** et faites glisser le curseur de hello ou tapez un nombre compris entre 1 et 10 pour **nombre de partitions** et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="dcabd-121">Click **Enabled** and slide hello slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="dcabd-122">Chaque partition est une paire de cache principal/réplica gérée par Azure, et taille totale de hello du cache de hello est calculée en multipliant le nombre hello de partitions par taille de cache de hello sélectionné Bonjour niveau tarifaire.</span><span class="sxs-lookup"><span data-stu-id="dcabd-122">Each shard is a primary/replica cache pair managed by Azure, and hello total size of hello cache is calculated by multiplying hello number of shards by hello cache size selected in hello pricing tier.</span></span> 

![Clustering][redis-cache-clustering-selected]

<span data-ttu-id="dcabd-124">Après la création d’un cache de hello vous vous connectez tooit et utiliser simplement comme un cache non cluster et Redis distribue des données de hello dans l’ensemble de partitions du Cache hello.</span><span class="sxs-lookup"><span data-stu-id="dcabd-124">Once hello cache is created you connect tooit and use it just like a non-clustered cache, and Redis distributes hello data throughout hello Cache shards.</span></span> <span data-ttu-id="dcabd-125">Si les diagnostics sont [activé](cache-how-to-monitor.md#enable-cache-diagnostics), métriques sont capturés séparément pour chaque partition et peut être [affichés](cache-how-to-monitor.md) dans le panneau de Cache Redis hello.</span><span class="sxs-lookup"><span data-stu-id="dcabd-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in hello Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="dcabd-126">Il doit exister quelques différences mineures dans votre application cliente lorsque le clustering est configuré.</span><span class="sxs-lookup"><span data-stu-id="dcabd-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="dcabd-127">Pour plus d’informations, consultez [dois-je toomake tout toouse d’application de modifications toomy client clustering ?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="dcabd-127">For more information, see [Do I need toomake any changes toomy client application toouse clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="dcabd-128">Pour un exemple de code sur l’utilisation de la gestion de clusters avec le client StackExchange.Redis de hello, consultez hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) partie Hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) exemple.</span><span class="sxs-lookup"><span data-stu-id="dcabd-128">For sample code on working with clustering with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-hello-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="dcabd-129">Modifier la taille de cluster hello sur en cours d’exécution cache premium</span><span class="sxs-lookup"><span data-stu-id="dcabd-129">Change hello cluster size on a running premium cache</span></span>
<span data-ttu-id="dcabd-130">taille du cluster toochange hello sur une prime en cours d’exécution du cache avec le clustering des activé, cliquez sur **taille de Cluster Redis** de hello **menu ressource**.</span><span class="sxs-lookup"><span data-stu-id="dcabd-130">toochange hello cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from hello **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="dcabd-131">Alors que hello Azure Redis Cache Premium couche a été publié tooGeneral disponibilité, hello taille de Cluster Redis fonctionnalité est actuellement en version préliminaire.</span><span class="sxs-lookup"><span data-stu-id="dcabd-131">While hello Azure Redis Cache Premium tier has been released tooGeneral Availability, hello Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Taille du cluster Redis][redis-cache-redis-cluster-size]

<span data-ttu-id="dcabd-133">taille de cluster toochange hello, utilisez hello curseur ou tapez un nombre compris entre 1 et 10 dans hello **nombre de partitions** zone de texte et cliquez sur **OK** toosave.</span><span class="sxs-lookup"><span data-stu-id="dcabd-133">toochange hello cluster size, use hello slider or type a number between 1 and 10 in hello **Shard count** text box and click **OK** toosave.</span></span>

> [!NOTE]
> <span data-ttu-id="dcabd-134">Mise à l’échelle d’un cluster s’exécute hello [migration](https://redis.io/commands/migrate) commande, qui est une commande coûteuse, par conséquent, pour minimiser l’impact, envisagez d’exécuter cette opération pendant les heures creuses.</span><span class="sxs-lookup"><span data-stu-id="dcabd-134">Scaling a cluster runs hello [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="dcabd-135">Au cours du processus de migration hello, vous verrez un pic de charge du serveur.</span><span class="sxs-lookup"><span data-stu-id="dcabd-135">During hello migration process, you will see a spike in server load.</span></span> <span data-ttu-id="dcabd-136">Mise à l’échelle d’un cluster est un entier long en cours d’exécution processus et durée hello de varie selon le nombre de hello de clés et la taille des valeurs hello associés à ces clés.</span><span class="sxs-lookup"><span data-stu-id="dcabd-136">Scaling a cluster is a long running process and hello amount of time taken depends on hello number of keys and size of hello values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="dcabd-137">Forum aux questions sur le clustering</span><span class="sxs-lookup"><span data-stu-id="dcabd-137">Clustering FAQ</span></span>
<span data-ttu-id="dcabd-138">Hello liste suivante contient toocommonly des réponses aux questions sur les clusters de Cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="dcabd-138">hello following list contains answers toocommonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="dcabd-139">Dois-je toomake tout toouse d’application de modifications toomy client clustering ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-139">Do I need toomake any changes toomy client application toouse clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="dcabd-140">Comment les clés sont-elles distribuées dans un cluster ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="dcabd-141">Quelle est la plus grande taille du cache Bonjour, que je peux créer ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-141">What is hello largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="dcabd-142">Tous les clients Redis prennent-ils en charge le clustering ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="dcabd-143">Comment connecter toomy cache lors de la mise en cluster est activé ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-143">How do I connect toomy cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="dcabd-144">Puis-je connecter directement toohello différentes partitions de mon cache ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-144">Can I directly connect toohello individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="dcabd-145">Puis-je configurer le clustering pour un cache créé précédemment ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="dcabd-146">Puis-je configurer le clustering pour un cache De base ou Standard ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="dcabd-147">Puis-je utiliser le clustering avec les fournisseurs d’état de Session ASP.NET Redis et la mise en cache de sortie hello ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-147">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="dcabd-148">J’obtiens des exceptions MOVE lorsque j’utilise StackExchange.Redis et le clustering, que dois-je faire ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-toomake-any-changes-toomy-client-application-toouse-clustering"></a><span data-ttu-id="dcabd-149">Dois-je toomake tout toouse d’application de modifications toomy client clustering ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-149">Do I need toomake any changes toomy client application toouse clustering?</span></span>
* <span data-ttu-id="dcabd-150">Lorsque le clustering est activé, seule la base de données 0 est disponible.</span><span class="sxs-lookup"><span data-stu-id="dcabd-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="dcabd-151">Si votre application cliente utilise plusieurs bases de données et il tente de base de données tooread ou écriture tooa différente de 0, hello exception suivante est levée.</span><span class="sxs-lookup"><span data-stu-id="dcabd-151">If your client application uses multiple databases and it tries tooread or write tooa database other than 0, hello following exception is thrown.</span></span> <span data-ttu-id="dcabd-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->``StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span><span class="sxs-lookup"><span data-stu-id="dcabd-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span></span>
  
  <span data-ttu-id="dcabd-153">Pour plus d’informations, consultez [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset)(Spécification de cluster Redis - Implémentation de jeu de données).</span><span class="sxs-lookup"><span data-stu-id="dcabd-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="dcabd-154">Si vous utilisez [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), vous devez utiliser la version 1.0.481 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="dcabd-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="dcabd-155">Vous vous connectez toohello cache à l’aide de hello même [clés, les ports et les points de terminaison](cache-configure.md#properties) que vous utilisez lors de la connexion tooa cache qui n’a pas l’activation des clusters.</span><span class="sxs-lookup"><span data-stu-id="dcabd-155">You connect toohello cache using hello same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="dcabd-156">Hello seule différence est que toutes les lectures et écritures doivent être effectuées toodatabase 0.</span><span class="sxs-lookup"><span data-stu-id="dcabd-156">hello only difference is that all reads and writes must be done toodatabase 0.</span></span>
  
  * <span data-ttu-id="dcabd-157">D’autres clients peuvent avoir des exigences différentes.</span><span class="sxs-lookup"><span data-stu-id="dcabd-157">Other clients may have different requirements.</span></span> <span data-ttu-id="dcabd-158">Consultez [Tous les clients Redis prennent-ils en charge le clustering ?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="dcabd-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="dcabd-159">Si votre application utilise plusieurs opérations traitées par lot dans une commande unique, toutes les clés doivent se trouver dans hello même ID de partition.</span><span class="sxs-lookup"><span data-stu-id="dcabd-159">If your application uses multiple key operations batched into a single command, all keys must be located in hello same shard.</span></span> <span data-ttu-id="dcabd-160">les clés toolocate dans hello même ID de partition, consultez [comment les clés sont distribuées dans un cluster ?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="dcabd-160">toolocate keys in hello same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="dcabd-161">Si vous utilisez un fournisseur d’état de session ASP.NET Redis, vous devez utiliser la version 2.0.1 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="dcabd-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="dcabd-162">Consultez [puis-je utiliser le clustering avec les fournisseurs d’état de Session ASP.NET Redis et la mise en cache de sortie hello ?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="dcabd-162">See [Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="dcabd-163">Comment les clés sont-elles distribuées dans un cluster ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="dcabd-164">Par hello Redis [modèle de distribution de clés](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation : espace de clé hello est fractionnée en 16384 emplacements.</span><span class="sxs-lookup"><span data-stu-id="dcabd-164">Per hello Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: hello key space is split into 16384 slots.</span></span> <span data-ttu-id="dcabd-165">Chaque clé est haché et affecté tooone de ces emplacements, qui sont réparties entre les nœuds hello du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="dcabd-165">Each key is hashed and assigned tooone of these slots, which are distributed across hello nodes of hello cluster.</span></span> <span data-ttu-id="dcabd-166">Vous pouvez configurer la partie de la clé de hello est haché tooensure appartenant à plusieurs clés hello même ID de partition à l’aide de balises de hachage.</span><span class="sxs-lookup"><span data-stu-id="dcabd-166">You can configure which part of hello key is hashed tooensure that multiple keys are located in hello same shard using hash tags.</span></span>

* <span data-ttu-id="dcabd-167">Si une partie de la clé de hello est placé entre des clés avec une balise de hachage - `{` et `}`, seule la partie de clé de hello est hachée à des fins hello permettant de déterminer l’emplacement de hachage hello d’une clé.</span><span class="sxs-lookup"><span data-stu-id="dcabd-167">Keys with a hash tag - if any part of hello key is enclosed in `{` and `}`, only that part of hello key is hashed for hello purposes of determining hello hash slot of a key.</span></span> <span data-ttu-id="dcabd-168">Par exemple, hello suivant 3 clés se trouvent dans hello même ID de partition : `{key}1`, `{key}2`, et `{key}3` depuis uniquement hello `key` partie du nom de hello est haché.</span><span class="sxs-lookup"><span data-stu-id="dcabd-168">For example, hello following 3 keys would be located in hello same shard: `{key}1`, `{key}2`, and `{key}3` since only hello `key` part of hello name is hashed.</span></span> <span data-ttu-id="dcabd-169">Pour obtenir une liste complète des spécifications de balises de hachage de clés, consultez [Balises de hachage de clés](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="dcabd-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="dcabd-170">Clés sans une balise de hachage - nom de la clé entière hello est utilisé pour le hachage.</span><span class="sxs-lookup"><span data-stu-id="dcabd-170">Keys without a hash tag - hello entire key name is used for hashing.</span></span> <span data-ttu-id="dcabd-171">Cela entraîne une répartition statistiquement entre les partitions hello du cache de hello.</span><span class="sxs-lookup"><span data-stu-id="dcabd-171">This results in a statistically even distribution across hello shards of hello cache.</span></span>

<span data-ttu-id="dcabd-172">Pour meilleures performances et le débit, nous vous recommandons de distribuer les clés de hello uniformément.</span><span class="sxs-lookup"><span data-stu-id="dcabd-172">For best performance and throughput, we recommend distributing hello keys evenly.</span></span> <span data-ttu-id="dcabd-173">Si vous utilisez des clés avec une balise de hachage, il est responsabilité tooensure hello les clés de l’application hello sont distribuées uniformément.</span><span class="sxs-lookup"><span data-stu-id="dcabd-173">If you are using keys with a hash tag it is hello application's responsibility tooensure hello keys are distributed evenly.</span></span>

<span data-ttu-id="dcabd-174">Pour plus d’informations, consultez [Modèle de distribution de clés](http://redis.io/topics/cluster-spec#keys-distribution-model), [Partitionnement de données de cluster Redis](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding) et [Balises de hachage de clés](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="dcabd-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="dcabd-175">Pour un exemple de code sur l’utilisation avec le clustering et la localisation des clés dans hello même ID de partition avec le client StackExchange.Redis de hello, consultez hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) partie Hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) exemple.</span><span class="sxs-lookup"><span data-stu-id="dcabd-175">For sample code on working with clustering and locating keys in hello same shard with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-hello-largest-cache-size-i-can-create"></a><span data-ttu-id="dcabd-176">Quelle est la plus grande taille du cache Bonjour, que je peux créer ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-176">What is hello largest cache size I can create?</span></span>
<span data-ttu-id="dcabd-177">plus grande taille de cache premium Hello est 53 go.</span><span class="sxs-lookup"><span data-stu-id="dcabd-177">hello largest premium cache size is 53 GB.</span></span> <span data-ttu-id="dcabd-178">Vous pouvez créer des partitions too10 ce qui vous donne une taille maximale de 530 Go.</span><span class="sxs-lookup"><span data-stu-id="dcabd-178">You can create up too10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="dcabd-179">Si vous avez besoin d’une plus grande taille, vous pouvez en [faire la demande](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="dcabd-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="dcabd-180">Pour plus d'informations, consultez [Tarification - Cache Redis Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="dcabd-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="dcabd-181">Tous les clients Redis prennent-ils en charge le clustering ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="dcabd-182">À hello actuellement que pas tous les clients prennent en charge Redis clustering.</span><span class="sxs-lookup"><span data-stu-id="dcabd-182">At hello present time not all clients support Redis clustering.</span></span> <span data-ttu-id="dcabd-183">StackExchange.Redis est l’un de ceux qui le prennent en charge.</span><span class="sxs-lookup"><span data-stu-id="dcabd-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="dcabd-184">Pour plus d’informations sur d’autres clients, consultez hello [lecture avec un cluster de hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section Hello [didacticiel de cluster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="dcabd-184">For more information on other clients, see hello [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="dcabd-185">Si vous utilisez StackExchange.Redis comme client, assurez-vous de vous utilisez la version la plus récente de hello [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 ou version ultérieure pour le clustering toowork correctement.</span><span class="sxs-lookup"><span data-stu-id="dcabd-185">If you are using StackExchange.Redis as your client, ensure you are using hello latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering toowork correctly.</span></span> <span data-ttu-id="dcabd-186">Si vous rencontrez des problèmes avec les exceptions MOVE, consultez la [section consacrée aux exceptions MOVE](#move-exceptions) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="dcabd-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-toomy-cache-when-clustering-is-enabled"></a><span data-ttu-id="dcabd-187">Comment connecter toomy cache lors de la mise en cluster est activé ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-187">How do I connect toomy cache when clustering is enabled?</span></span>
<span data-ttu-id="dcabd-188">Vous pouvez vous connecter tooyour cache à l’aide de hello même [points de terminaison](cache-configure.md#properties), [ports](cache-configure.md#properties), et [clés](cache-configure.md#access-keys) que vous utilisez lors de la connexion tooa cache qui n’a pas l’activation des clusters.</span><span class="sxs-lookup"><span data-stu-id="dcabd-188">You can connect tooyour cache using hello same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="dcabd-189">Redis gère hello clustering sur hello principal, vous n’avez pas toomanage à partir de votre client.</span><span class="sxs-lookup"><span data-stu-id="dcabd-189">Redis manages hello clustering on hello backend so you don't have toomanage it from your client.</span></span>

### <a name="can-i-directly-connect-toohello-individual-shards-of-my-cache"></a><span data-ttu-id="dcabd-190">Puis-je connecter directement toohello différentes partitions de mon cache ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-190">Can I directly connect toohello individual shards of my cache?</span></span>
<span data-ttu-id="dcabd-191">Cela n’est pas officiellement pris en charge.</span><span class="sxs-lookup"><span data-stu-id="dcabd-191">This is not officially supported.</span></span> <span data-ttu-id="dcabd-192">Ceci étant dit, chaque partition composée d’une paire de caches principal/réplica désignés collectivement sous le nom d’« instance de cache ».</span><span class="sxs-lookup"><span data-stu-id="dcabd-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="dcabd-193">Vous pouvez vous connecter à l’aide d’utilitaire de redis-cli hello Bonjour des instances de cache toothese [instable](http://redis.io/download) branche du référentiel de Redis hello dans GitHub.</span><span class="sxs-lookup"><span data-stu-id="dcabd-193">You can connect toothese cache instances using hello redis-cli utility in hello [unstable](http://redis.io/download) branch of hello Redis repository at GitHub.</span></span> <span data-ttu-id="dcabd-194">Cette version implémente la prise en charge de base lors de la main hello `-c` basculer.</span><span class="sxs-lookup"><span data-stu-id="dcabd-194">This version implements basic support when started with hello `-c` switch.</span></span> <span data-ttu-id="dcabd-195">Pour plus d’informations, consultez [lecture avec un cluster de hello](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) sur [http://redis.io](http://redis.io) Bonjour [didacticiel de cluster Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="dcabd-195">For more information see [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="dcabd-196">Non-SSL, utilisez hello suivant les commandes.</span><span class="sxs-lookup"><span data-stu-id="dcabd-196">For non-ssl, use hello following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (tooconnect tooinstance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (tooconnect tooinstance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (tooconnect tooinstance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (tooconnect tooinstance N)

<span data-ttu-id="dcabd-197">Avec SSL, remplacez `1300N` par `1500N`.</span><span class="sxs-lookup"><span data-stu-id="dcabd-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="dcabd-198">Puis-je configurer le clustering pour un cache créé précédemment ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="dcabd-199">Actuellement, vous pouvez activer le clustering uniquement quand vous créez un cache.</span><span class="sxs-lookup"><span data-stu-id="dcabd-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="dcabd-200">Vous pouvez modifier la taille de cluster hello après hello cache est créé, mais Impossible d’ajouter du cache de clustering tooa premium ou de supprimer les clusters à partir d’un cache premium après que hello cache est créé.</span><span class="sxs-lookup"><span data-stu-id="dcabd-200">You can change hello cluster size after hello cache is created, but you can't add clustering tooa premium cache or remove clustering from a premium cache after hello cache is created.</span></span> <span data-ttu-id="dcabd-201">Un cache premium avec activation des clusters et qu’une seule partition est différent de celle d’un cache premium Hello même taille avec aucun des clusters.</span><span class="sxs-lookup"><span data-stu-id="dcabd-201">A premium cache with clustering enabled and only one shard is different than a premium cache of hello same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="dcabd-202">Puis-je configurer le clustering pour un cache De base ou Standard ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="dcabd-203">Le clustering est disponible uniquement pour les caches de niveau Premium.</span><span class="sxs-lookup"><span data-stu-id="dcabd-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-hello-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="dcabd-204">Puis-je utiliser le clustering avec les fournisseurs d’état de Session ASP.NET Redis et la mise en cache de sortie hello ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-204">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="dcabd-205">**Fournisseur de caches de sortie Redis** : aucune modification requise.</span><span class="sxs-lookup"><span data-stu-id="dcabd-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="dcabd-206">**Fournisseur d’état de Session redis** -toouse clustering, vous devez utiliser [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 ou plus élevé ou une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="dcabd-206">**Redis Session State provider** - toouse clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="dcabd-207">Il s’agit d’une modification avec rupture. Pour plus d’informations, consultez [Détails de la modification avec rupture pour la version 2.0.0](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="dcabd-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="dcabd-208">J’obtiens des exceptions MOVE lorsque j’utilise StackExchange.Redis et le clustering, que dois-je faire ?</span><span class="sxs-lookup"><span data-stu-id="dcabd-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="dcabd-209">Si vous utilisez StackExchange.Redis et recevez des exceptions `MOVE` lors du clustering, assurez-vous que vous utilisez [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="dcabd-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="dcabd-210">Pour obtenir des instructions sur la configuration de votre toouse d’applications .NET StackExchange.Redis, consultez [configurer les clients de cache hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="dcabd-210">For instructions on configuring your .NET applications toouse StackExchange.Redis, see [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="dcabd-211">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="dcabd-211">Next steps</span></span>
<span data-ttu-id="dcabd-212">Découvrez comment mettre en cache des fonctionnalités par toouse plus premium.</span><span class="sxs-lookup"><span data-stu-id="dcabd-212">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="dcabd-213">Couche de présentation toohello Azure Redis Cache Premium</span><span class="sxs-lookup"><span data-stu-id="dcabd-213">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png







