---
title: "Bonnes pratiques pour la sécurité Azure Service Fabric | Microsoft Docs"
description: "Cet article fournit un ensemble de bonnes pratiques pour la sécurité Azure Service Fabric."
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/04/2017
ms.author: tomsh
ms.openlocfilehash: 3132e42aac72c0132c7526ac56d80bc5eec269e7
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="azure-service-fabric-security-best-practices"></a><span data-ttu-id="c300d-103">Bonnes pratiques pour la sécurité Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c300d-103">Azure Service Fabric security best practices</span></span>
<span data-ttu-id="c300d-104">Le déploiement d’une application sur Azure est rapide, simple et rentable.</span><span class="sxs-lookup"><span data-stu-id="c300d-104">Deploying an application on Azure is fast, easy, and cost-effective.</span></span> <span data-ttu-id="c300d-105">Avant de déployer une application cloud en production, il peut être judicieux d’évaluer votre application par rapport à une liste de bonnes pratiques essentielles et recommandées.</span><span class="sxs-lookup"><span data-stu-id="c300d-105">Before deploying cloud application in production useful to have a best practice to assist in evaluating your application against a list of essential and recommended best practices.</span></span>

<span data-ttu-id="c300d-106">Azure Service Fabric est une plateforme de systèmes distribués qui permet d’empaqueter, de déployer et de gérer facilement des microservices scalables et fiables.</span><span class="sxs-lookup"><span data-stu-id="c300d-106">Azure Service Fabric is a distributed systems platform that makes it easy to package, deploy, and manage scalable and reliable microservices.</span></span> <span data-ttu-id="c300d-107">Service Fabric résout également les problèmes non négligeables du développement et de la gestion des applications cloud.</span><span class="sxs-lookup"><span data-stu-id="c300d-107">Service Fabric also addresses the significant challenges in developing and managing cloud applications.</span></span> <span data-ttu-id="c300d-108">Les développeurs et administrateurs sont en mesure d’éviter les problèmes d’infrastructure complexes et peuvent se concentrer sur l’implémentation de charges de travail stratégiques et exigeantes, évolutives, fiables et faciles à gérer.</span><span class="sxs-lookup"><span data-stu-id="c300d-108">Developers and administrators can avoid complex infrastructure problems and focus on implementing mission-critical, demanding workloads that are scalable, reliable, and manageable.</span></span> 

<span data-ttu-id="c300d-109">Pour chaque bonne pratique, nous détaillons les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="c300d-109">For each best practice, we explain:</span></span>

-   <span data-ttu-id="c300d-110">Nature de la bonne pratique</span><span class="sxs-lookup"><span data-stu-id="c300d-110">What the best practice is</span></span>
-   <span data-ttu-id="c300d-111">Raison pour laquelle activer cette bonne pratique</span><span class="sxs-lookup"><span data-stu-id="c300d-111">Why you want to enable that best practice</span></span>
-   <span data-ttu-id="c300d-112">Conséquence possible en cas de non-utilisation de la bonne pratique</span><span class="sxs-lookup"><span data-stu-id="c300d-112">What might be the result if you fail to enable the best practice</span></span>
-   <span data-ttu-id="c300d-113">Comment apprendre à utiliser la bonne pratique</span><span class="sxs-lookup"><span data-stu-id="c300d-113">How you can learn to enable the best practice</span></span>

<span data-ttu-id="c300d-114">Nous disposons des bonnes pratiques suivantes pour la sécurité Azure Service Fabric :</span><span class="sxs-lookup"><span data-stu-id="c300d-114">We currently have the following Azure Service Fabric security best practices:</span></span>

-   <span data-ttu-id="c300d-115">Utiliser un modèle Azure Resource Manager (ARM) et le module Azure PowerShell Service Fabric pour créer le cluster sécurisé</span><span class="sxs-lookup"><span data-stu-id="c300d-115">Use Azure Resource Manager(ARM) template and Service Fabric Azure PowerShell Module to create secure cluster</span></span>
-   <span data-ttu-id="c300d-116">Utiliser des certificats X.509</span><span class="sxs-lookup"><span data-stu-id="c300d-116">Use X.509 certificates</span></span>
-   <span data-ttu-id="c300d-117">Configurer des stratégies de sécurité</span><span class="sxs-lookup"><span data-stu-id="c300d-117">Configure security policies</span></span>
-   <span data-ttu-id="c300d-118">Configurer la sécurité de Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="c300d-118">Reliable Actors security configuration</span></span>
-   <span data-ttu-id="c300d-119">Configurer SSL pour Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c300d-119">Configure SSL for Azure Service Fabric</span></span>
-   <span data-ttu-id="c300d-120">Sécurité/isolement réseau avec Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c300d-120">Network Isolation/Security with Azure Service Fabric</span></span>
-   <span data-ttu-id="c300d-121">Configurer un coffre de clés pour la sécurité</span><span class="sxs-lookup"><span data-stu-id="c300d-121">Set up a key vault for security</span></span>
-   <span data-ttu-id="c300d-122">Affecter des utilisateurs aux rôles</span><span class="sxs-lookup"><span data-stu-id="c300d-122">Assign users to roles</span></span>


## <a name="best-practices-for-securing-your-cluster"></a><span data-ttu-id="c300d-123">Bonnes pratiques pour sécuriser votre cluster</span><span class="sxs-lookup"><span data-stu-id="c300d-123">Best practices for securing your cluster</span></span>

<span data-ttu-id="c300d-124">**Grandes lignes**</span><span class="sxs-lookup"><span data-stu-id="c300d-124">**Big Picture**</span></span>

<span data-ttu-id="c300d-125">Utiliser toujours un cluster sécurisé</span><span class="sxs-lookup"><span data-stu-id="c300d-125">Always use a secure cluster</span></span>
-   <span data-ttu-id="c300d-126">Sécurité du cluster : utiliser des certificats</span><span class="sxs-lookup"><span data-stu-id="c300d-126">Cluster security – use Certificates</span></span>
-   <span data-ttu-id="c300d-127">Accès client (admin et en lecture seule) : utiliser AAD</span><span class="sxs-lookup"><span data-stu-id="c300d-127">Client access (Admin and Read only) – use AAD</span></span>

<span data-ttu-id="c300d-128">Utiliser des déploiements automatisés</span><span class="sxs-lookup"><span data-stu-id="c300d-128">Use automated deployments</span></span>
-   <span data-ttu-id="c300d-129">Utiliser des scripts pour générer, déployer et substituer les secrets</span><span class="sxs-lookup"><span data-stu-id="c300d-129">Use scripts to generate, deploy and, roll over secrets</span></span>
-   <span data-ttu-id="c300d-130">Conserver les secrets dans un coffre de clés, utiliser AD pour tous les autres accès client</span><span class="sxs-lookup"><span data-stu-id="c300d-130">Keep the secrets in KV, use AD for all other client access</span></span>
-   <span data-ttu-id="c300d-131">Personne ne doit y avoir accès sans authentification.</span><span class="sxs-lookup"><span data-stu-id="c300d-131">No human should have access to them without authentication.</span></span>

<span data-ttu-id="c300d-132">En outre, tenez compte des points suivants :</span><span class="sxs-lookup"><span data-stu-id="c300d-132">Additionally, consider the following:</span></span>
-   <span data-ttu-id="c300d-133">Créer des zones DMZ à l’aide des groupes de sécurité réseau (NSG)</span><span class="sxs-lookup"><span data-stu-id="c300d-133">Create DMZs using Network Security Groups (NSGs)</span></span>
-   <span data-ttu-id="c300d-134">Utiliser des serveurs de rebond (« jump ») pour accéder au moyen du protocole RDP aux machines virtuelles du cluster ou pour gérer votre cluster</span><span class="sxs-lookup"><span data-stu-id="c300d-134">Use Jump servers to RDP into cluster VMs or to manage your cluster</span></span>

<span data-ttu-id="c300d-135">Les clusters doivent être sécurisés pour empêcher les utilisateurs non autorisés de se connecter à votre cluster, surtout quand des charges de travail sont en cours d’exécution sur ce dernier.</span><span class="sxs-lookup"><span data-stu-id="c300d-135">Clusters must be secured to prevent unauthorized users from connecting to your cluster, especially when it has production workloads running on it.</span></span> <span data-ttu-id="c300d-136">Bien qu’il soit possible de créer un cluster non sécurisé, cela permet à tout utilisateur anonyme de s’y connecter si les points de terminaison de gestion sur l’Internet public.</span><span class="sxs-lookup"><span data-stu-id="c300d-136">Although it is possible to create an unsecured cluster, doing so allows anonymous users to connect to it, if it exposes management endpoints to the public Internet.</span></span>

<span data-ttu-id="c300d-137">Technologies utilisées pour implémenter ces scénarios.</span><span class="sxs-lookup"><span data-stu-id="c300d-137">Technologies used to implement those scenarios.</span></span> <span data-ttu-id="c300d-138">Les [scénarios de sécurité des clusters](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security) sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="c300d-138">The [cluster security scenarios](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security) are:</span></span>

-   <span data-ttu-id="c300d-139">Sécurité nœud à nœud : sécurise les communications entre les machines virtuelles et les ordinateurs du cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-139">Node-to-node security- This secures communication between the VMs and computers in the cluster.</span></span> <span data-ttu-id="c300d-140">Cette sécurité garantit que seuls les ordinateurs qui sont autorisés à rejoindre le cluster peuvent participer à l’hébergement des applications et des services dans le cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-140">This ensures that only computers that are authorized to join the cluster can participate in hosting applications and services in the cluster.</span></span>
<span data-ttu-id="c300d-141">Les clusters qui s’exécutent sur Azure ou les clusters autonomes sur Windows peuvent utiliser la [Sécurité par certificat](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security) ou la [Sécurité Windows](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security) pour les ordinateurs Windows Server.</span><span class="sxs-lookup"><span data-stu-id="c300d-141">Clusters running on Azure or standalone clusters running on Windows can use either [Certificate Security](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security) or [Windows Security](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security) for Windows Server machines.</span></span>
-   <span data-ttu-id="c300d-142">Sécurité client à nœud : sécurise la communication entre un client Service Fabric et des nœuds individuels du cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-142">Client-to-node security- This secures communication between a Service Fabric client and individual nodes in the cluster.</span></span>
-   <span data-ttu-id="c300d-143">Contrôle d’accès en fonction du rôle (RBAC) : vous spécifiez les rôles client utilisateur et administrateur au moment de la création du cluster en fournissant des identités distinctes (certificats, AAD, etc.) pour chacun.</span><span class="sxs-lookup"><span data-stu-id="c300d-143">Role-based access control (RBAC) - You specify the administrator and user client roles at the time of cluster creation by providing separate identities (certificates, AAD etc.) for each.</span></span>
-   <span data-ttu-id="c300d-144">Recommandations pour sécurité : pour les clusters Azure, nous vous recommandons d’utiliser la sécurité AAD pour authentifier les clients et les certificats pour la sécurité nœud à nœud.</span><span class="sxs-lookup"><span data-stu-id="c300d-144">Security Recommendations-For Azure clusters, it is recommended that you use AAD security to authenticate clients and certificates for node-to-node security.</span></span>

<span data-ttu-id="c300d-145">Pour configurer le cluster Windows autonome, consultez [Paramètres de configuration pour un cluster Windows autonome](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest).</span><span class="sxs-lookup"><span data-stu-id="c300d-145">To configure the standalone Windows cluster, see [configure settings for standalone windows cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest).</span></span>

<span data-ttu-id="c300d-146">Utilisez des modèles Azure Resource Manager et le module Azure PowerShell Service Fabric pour créer le cluster sécurisé.</span><span class="sxs-lookup"><span data-stu-id="c300d-146">Use Azure Resource Manager templates and Service Fabric Azure PowerShell Module to create secure cluster.</span></span>
<span data-ttu-id="c300d-147">Un guide vous montrant pas à pas comment configurer un cluster Azure Service Fabric sécurisé dans Azure à l’aide d’Azure Resource Manager est disponible [ici](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm).</span><span class="sxs-lookup"><span data-stu-id="c300d-147">A step-by-step guide walks you through setting up a secure Azure Service Fabric cluster in Azure by using Azure Resource Manager is available [here](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm).</span></span>

<span data-ttu-id="c300d-148">Utiliser le modèle Azure Resource Manager pour personnaliser votre cluster</span><span class="sxs-lookup"><span data-stu-id="c300d-148">Use the Azure Resource Manager template to customize your cluster</span></span>
-   <span data-ttu-id="c300d-149">Stockage des VHD de machine virtuelle géré par le programme d’installation</span><span class="sxs-lookup"><span data-stu-id="c300d-149">Setup-managed storage for VM VHDs</span></span>

<span data-ttu-id="c300d-150">Utiliser le modèle Azure Resource Manager pour piloter les changements dans votre groupe de ressources</span><span class="sxs-lookup"><span data-stu-id="c300d-150">Use the Azure Resource Manager template to drive changes to your Resource Group</span></span>
-   <span data-ttu-id="c300d-151">Gestion des configurations aisée</span><span class="sxs-lookup"><span data-stu-id="c300d-151">Easy configuration management</span></span>
-   <span data-ttu-id="c300d-152">Audit</span><span class="sxs-lookup"><span data-stu-id="c300d-152">Auditing</span></span>

<span data-ttu-id="c300d-153">Traiter la configuration du cluster comme du code</span><span class="sxs-lookup"><span data-stu-id="c300d-153">Treat your cluster configuration as Code</span></span>
-   <span data-ttu-id="c300d-154">Vérifiez minutieusement les configurations que vous choisissez de déployer</span><span class="sxs-lookup"><span data-stu-id="c300d-154">Be thorough in checking the configurations you choose to deploy</span></span>
-   <span data-ttu-id="c300d-155">Évitez d’utiliser des commandes implicites pour optimiser vos ressources directement</span><span class="sxs-lookup"><span data-stu-id="c300d-155">Avoid using implicit commands to tweak your resources directly</span></span>

<span data-ttu-id="c300d-156">Plusieurs aspects du [cycle de vie des applications Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle) peuvent être automatisés.</span><span class="sxs-lookup"><span data-stu-id="c300d-156">Many aspects of the [Service Fabric application lifecycle](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle) can be automated.</span></span> <span data-ttu-id="c300d-157">Le [module Azure PowerShell Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package) automatise les tâches courantes de déploiement, de mise à niveau, de suppression et de test des applications Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c300d-157">[Service Fabric Azure PowerShell Module](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package) automates common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span> <span data-ttu-id="c300d-158">Des API gérées et HTTP pour la gestion de l’application sont également disponibles.</span><span class="sxs-lookup"><span data-stu-id="c300d-158">Managed and HTTP APIs for app management are also available.</span></span>

## <a name="use-x509-certificates"></a><span data-ttu-id="c300d-159">Utiliser des certificats X.509</span><span class="sxs-lookup"><span data-stu-id="c300d-159">Use X.509 certificates</span></span>
<span data-ttu-id="c300d-160">Les clusters doivent toujours être sécurisés à l’aide de certificats X.509 ou de la sécurité Windows.</span><span class="sxs-lookup"><span data-stu-id="c300d-160">Clusters should always be secured using X.509 certificates or Windows security.</span></span> <span data-ttu-id="c300d-161">La sécurité peut uniquement être configurée au moment de la création du cluster et il n’est pas possible d’activer la sécurité une fois le cluster créé.</span><span class="sxs-lookup"><span data-stu-id="c300d-161">Security is only configured at cluster creation time and it is not possible to enable security after the cluster is created.</span></span>

<span data-ttu-id="c300d-162">Si vous spécifiez un [certificat de cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security), affectez à ClusterCredentialType la valeur X509.</span><span class="sxs-lookup"><span data-stu-id="c300d-162">If you are specifying a [cluster certificate](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security), set the value of ClusterCredentialType to X509.</span></span> <span data-ttu-id="c300d-163">Si vous spécifiez un certificat de serveur pour des connexions externes, donnez à ServerCredentialType la valeur X509.</span><span class="sxs-lookup"><span data-stu-id="c300d-163">If you are specifying server certificate for outside connections, set the ServerCredentialType to X509.</span></span>

-   <span data-ttu-id="c300d-164">Les certificats utilisés dans les clusters qui exécutent des charges de travail de production doivent être créés en utilisant un service de certificats Windows Server correctement configuré ou obtenus auprès d’une autorité de certification approuvée.</span><span class="sxs-lookup"><span data-stu-id="c300d-164">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span>
-   <span data-ttu-id="c300d-165">En production, n’utilisez jamais de certificats temporaires ou de test créés avec des outils comme MakeCert.exe.</span><span class="sxs-lookup"><span data-stu-id="c300d-165">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe.</span></span>
-   <span data-ttu-id="c300d-166">Vous pouvez utiliser un certificat auto-signé, mais seulement pour les clusters de test et non en production.</span><span class="sxs-lookup"><span data-stu-id="c300d-166">You can use a self-signed certificate, but should only do so for test clusters and not in production.</span></span>

<span data-ttu-id="c300d-167">Si le cluster n’est pas sécurisé.</span><span class="sxs-lookup"><span data-stu-id="c300d-167">If the cluster is unsecure.</span></span> <span data-ttu-id="c300d-168">N’importe qui peut se connecter anonymement et effectuer des opérations de gestion. Les clusters de production doivent donc toujours être sécurisés à l’aide de certificats X.509 ou via la sécurité Windows.</span><span class="sxs-lookup"><span data-stu-id="c300d-168">Anyone can connect anonymously and perform management operations, so production clusters should always be secured using X.509 certificates or Windows security.</span></span>

<span data-ttu-id="c300d-169">Pour plus d’informations sur la façon d’activer des certificats dans le cluster Service Fabric, consultez [Ajouter ou supprimer des certificats pour un cluster Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure).</span><span class="sxs-lookup"><span data-stu-id="c300d-169">To learn more how to enable certificates in service fabric cluster see, [add or remove certificates for a service fabric cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure).</span></span>

## <a name="configure-security-policies"></a><span data-ttu-id="c300d-170">Configurer des stratégies de sécurité</span><span class="sxs-lookup"><span data-stu-id="c300d-170">Configure security policies</span></span>
<span data-ttu-id="c300d-171">Service Fabric permet également de sécuriser les ressources utilisées par des applications au moment du déploiement sous les comptes utilisateurs, par exemple les fichiers, les annuaires et les certificats.</span><span class="sxs-lookup"><span data-stu-id="c300d-171">Service Fabric also helps secure the resources that are used by applications at the time of deployment under the user accounts--for example, files, directories, and certificates.</span></span> <span data-ttu-id="c300d-172">Ainsi, les applications en cours d’exécution sont plus sécurisées, même dans un environnement hébergé partagé.</span><span class="sxs-lookup"><span data-stu-id="c300d-172">This makes running applications, even in a shared hosted environment, more secure from one another.</span></span>

-   <span data-ttu-id="c300d-173">Utiliser un utilisateur ou un groupe de domaine Active Directory : vous pouvez exécuter le service sous les informations d’identification d’un compte d’utilisateur ou de groupe Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c300d-173">Use an Active Directory domain group or user: You can run the service under the credentials for an Active Directory user or group account.</span></span> <span data-ttu-id="c300d-174">Il s’agit d’Active Directory en local au sein de votre domaine et non avec Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="c300d-174">This is Active Directory on-premises within your domain and is not with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="c300d-175">En utilisant un groupe ou un utilisateur de domaine, vous pouvez accéder à d’autres ressources dans le domaine (par exemple, les partages de fichiers) qui disposent d’autorisations.</span><span class="sxs-lookup"><span data-stu-id="c300d-175">By using a domain user or group, you can then access other resources in the domain (for example, file shares) that have been granted permissions.</span></span>

-   <span data-ttu-id="c300d-176">Assigner une stratégie d’accès de sécurité pour des points de terminaison HTTP et HTTPS : si vous appliquez une stratégie RunAs à un service et que le manifeste de service déclare des ressources de point de terminaison avec le protocole HTTP, vous devez spécifier une stratégie SecurityAccessPolicy pour vous assurer que les ports affectés à ces points de terminaison sont bien au format ACL pour le compte utilisateur RunAs sous lequel le service est exécuté.</span><span class="sxs-lookup"><span data-stu-id="c300d-176">Assign a security access policy for HTTP and HTTPS endpoints: If you apply a RunAs policy to a service and the service manifest declares endpoint resources with the HTTP protocol, you must specify a SecurityAccessPolicy to ensure that ports allocated to these endpoints are correctly access-controlled listed for the RunAs user account that the service runs under.</span></span> <span data-ttu-id="c300d-177">Sinon, http.sys n’a pas accès au service et les appels en provenance du client échouent.</span><span class="sxs-lookup"><span data-stu-id="c300d-177">Otherwise, http.sys does not have access to the service, and you get failures with calls from the client.</span></span>
<span data-ttu-id="c300d-178">Pour en savoir plus sur l’activation des stratégies de sécurité dans Service Fabric, consultez [Configurer les stratégies de sécurité de votre application](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security).</span><span class="sxs-lookup"><span data-stu-id="c300d-178">To learn more enable security policies in service fabric see, [configure security policies for your application](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security).</span></span>

## <a name="reliable-actors-security-configuration"></a><span data-ttu-id="c300d-179">Configurer la sécurité de Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="c300d-179">Reliable Actors security configuration</span></span>
<span data-ttu-id="c300d-180">Service Fabric Reliable Actors est une implémentation du modèle de conception d’acteurs.</span><span class="sxs-lookup"><span data-stu-id="c300d-180">Service Fabric Reliable Actors is an implementation of the actor design pattern.</span></span> <span data-ttu-id="c300d-181">Comme pour n’importe quel modèle de conception de logiciels, le choix de l’utilisation d’un modèle spécifique dépend de son degré d’adéquation avec le problème de conception du logiciel.</span><span class="sxs-lookup"><span data-stu-id="c300d-181">As with any software design pattern, the decision whether to use a specific pattern is made based on whether or not a software design problem fits the pattern.</span></span>

<span data-ttu-id="c300d-182">En règle générale, vous pouvez envisager d’utiliser le modèle d’acteur pour modéliser votre problème ou votre scénario si :</span><span class="sxs-lookup"><span data-stu-id="c300d-182">As general guidance, consider the actor pattern to model your problem or scenario if:</span></span>
-   <span data-ttu-id="c300d-183">Votre espace de problème implique un nombre élevé (plusieurs milliers) de petites unités d’état et de logique indépendantes et isolées.</span><span class="sxs-lookup"><span data-stu-id="c300d-183">Your problem space involves a large number (thousands or more) of small, independent, and isolated units of state and logic.</span></span>
-   <span data-ttu-id="c300d-184">Vous souhaitez travailler avec des objets monothread ne nécessitant aucune interaction significative avec des composants externes, par exemple l’interrogation de l’état sur un ensemble d’acteurs.</span><span class="sxs-lookup"><span data-stu-id="c300d-184">You want to work with single-threaded objects that do not require significant interaction from external components, including querying state across a set of actors.</span></span>
-   <span data-ttu-id="c300d-185">Vos instances d’acteurs ne bloquent pas les appelants avec des retards inattendus en exécutant des opérations d’E/S.</span><span class="sxs-lookup"><span data-stu-id="c300d-185">Your actor instances won't block callers with unpredictable delays by issuing I/O operations.</span></span>

<span data-ttu-id="c300d-186">Dans Service Fabric, les acteurs sont implémentés dans l’infrastructure Reliable Actors, une infrastructure d’application basée sur un modèle d’acteurs et s’appuyant sur [Service Fabric Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction).</span><span class="sxs-lookup"><span data-stu-id="c300d-186">In Service Fabric, actors are implemented in the Reliable Actors framework: An actor-pattern-based application framework built on top of [Service Fabric Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction).</span></span> <span data-ttu-id="c300d-187">Chaque service Reliable Actor que vous écrivez correspond en fait à une instance Reliable Service partitionnée avec état.</span><span class="sxs-lookup"><span data-stu-id="c300d-187">Each Reliable Actor service you write is actually a partitioned, stateful Reliable Service.</span></span>
<span data-ttu-id="c300d-188">Chaque acteur se définit comme une instance d’un type d’acteur, de la même façon qu’un objet .NET est une instance d’un type .NET.</span><span class="sxs-lookup"><span data-stu-id="c300d-188">Every actor is defined as an instance of an actor type, identical to the way a .NET object is an instance of a .NET type.</span></span> <span data-ttu-id="c300d-189">Par exemple, un type d'acteur peut implémenter les fonctionnalités d'une calculatrice, et plusieurs acteurs de ce type peuvent être distribués sur différents nœuds d'un cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-189">For example, there may be an actor type that implements the functionality of a calculator and there could be many actors of that type that are distributed on various nodes across a cluster.</span></span> <span data-ttu-id="c300d-190">Chaque acteur de ce type est identifié de façon unique par un ID d'acteur.</span><span class="sxs-lookup"><span data-stu-id="c300d-190">Each such actor is uniquely identified by an actor ID.</span></span>

<span data-ttu-id="c300d-191">Les [configurations de sécurité du réplicateur](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration) sont utilisées pour sécuriser le canal de communication utilisé durant la réplication.</span><span class="sxs-lookup"><span data-stu-id="c300d-191">[Replicator security configurations](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration) are used to secure the communication channel that is used during replication.</span></span> <span data-ttu-id="c300d-192">Un service ne peut donc pas afficher le trafic de réplication d’un autre service, ce qui garantit la sécurité des données rendues hautement disponibles.</span><span class="sxs-lookup"><span data-stu-id="c300d-192">This means that services cannot see each other's replication traffic, ensuring that the data that is made highly available is also secure.</span></span> <span data-ttu-id="c300d-193">Par défaut, une section de configuration de sécurité vide empêche de sécuriser la réplication.</span><span class="sxs-lookup"><span data-stu-id="c300d-193">By default, an empty security configuration section prevents replication security.</span></span>
<span data-ttu-id="c300d-194">Les configurations de réplicateur servent à configurer le réplicateur responsable de la haute fiabilité de l’état du fournisseur d’état d’acteur.</span><span class="sxs-lookup"><span data-stu-id="c300d-194">Replicator configurations configure the replicator that is responsible for making the Actor State Provider state highly reliable.</span></span>

## <a name="configure-ssl-for-azure-service-fabric"></a><span data-ttu-id="c300d-195">Configurer SSL pour Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c300d-195">Configure SSL for Azure Service Fabric</span></span>

<span data-ttu-id="c300d-196">Authentification du serveur : [authentifie](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) les points de terminaison de gestion du cluster sur un client de gestion, afin que le client de gestion sache qu’il communique avec le véritable cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-196">Server authentication: [Authenticates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) the cluster management endpoints to a management client, so that the management client knows it is talking to the real cluster.</span></span> <span data-ttu-id="c300d-197">Ce certificat fournit également un certificat [SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) pour l’API de gestion HTTPS et Service Fabric Explorer par le biais de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c300d-197">This certificate also provides an [SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) for the HTTPS management API and for Service Fabric Explorer over HTTPS.</span></span>
<span data-ttu-id="c300d-198">Vous devez obtenir un nom de domaine personnalisé pour votre cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-198">You must obtain a custom domain name for your cluster.</span></span> <span data-ttu-id="c300d-199">Lorsque vous demandez un certificat auprès d’une autorité de certification, le nom de sujet du certificat doit correspondre au nom de domaine personnalisé utilisé pour votre cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-199">When you request a certificate from a CA, the certificate's subject name must match the custom domain name that you use for your cluster.</span></span>

<span data-ttu-id="c300d-200">Pour configurer le chiffrement SSL pour une application, vous devez d’abord obtenir un certificat SSL signé par une autorité de certification, un tiers approuvé qui émet des certificats à cet effet.</span><span class="sxs-lookup"><span data-stu-id="c300d-200">To configure SSL for an application, you first need to get an SSL certificate that has been signed by a Certificate Authority (CA), a trusted third party who issues certificates for this purpose.</span></span> <span data-ttu-id="c300d-201">Si vous n’en possédez pas, vous devez en obtenir un auprès de la société qui vend des certificats SSL.</span><span class="sxs-lookup"><span data-stu-id="c300d-201">If you do not already have one, you need to obtain one from a company that sells SSL certificates.</span></span>

<span data-ttu-id="c300d-202">Le certificat SSL doit répondre aux prérequis suivants dans Azure :</span><span class="sxs-lookup"><span data-stu-id="c300d-202">The certificate must meet the following requirements for SSL certificates in Azure:</span></span>
-   <span data-ttu-id="c300d-203">Le certificat doit contenir une clé privée.</span><span class="sxs-lookup"><span data-stu-id="c300d-203">The certificate must contain a private key.</span></span>
-   <span data-ttu-id="c300d-204">Le certificat doit être créé pour l'échange de clés et pouvoir faire l'objet d'un export au format Personal Information Exchange (.pfx).</span><span class="sxs-lookup"><span data-stu-id="c300d-204">The certificate must be created for key exchange, exportable to a Personal Information Exchange (.pfx) file.</span></span>
-   <span data-ttu-id="c300d-205">Le nom d'objet du certificat doit correspondre au domaine servant à accéder au service cloud.</span><span class="sxs-lookup"><span data-stu-id="c300d-205">The certificate's subject name must match the domain used to access the cloud service.</span></span> <span data-ttu-id="c300d-206">Vous ne pouvez pas obtenir de certificat SSL d'une autorité de certification pour le domaine cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="c300d-206">You cannot obtain an SSL certificate from a certificate authority (CA) for the cloudapp.net domain.</span></span> <span data-ttu-id="c300d-207">Vous devez acquérir un nom de domaine personnalisé à utiliser pour accéder à votre service.</span><span class="sxs-lookup"><span data-stu-id="c300d-207">You must acquire a custom domain name to use when access your service.</span></span> <span data-ttu-id="c300d-208">Lorsque vous demandez un certificat auprès d’une autorité de certification, le nom d’objet du certificat doit correspondre au nom de domaine personnalisé que vous utilisez pour accéder à votre application.</span><span class="sxs-lookup"><span data-stu-id="c300d-208">When you request a certificate from a CA, the certificate's subject name must match the custom domain name used to access your application.</span></span> <span data-ttu-id="c300d-209">Par exemple, si votre nom de domaine personnalisé est contoso.com, vous demandez un certificat auprès de votre autorité de certification pour **.contoso.com** ou **www.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="c300d-209">For example, if your custom domain name is contoso.com you would request a certificate from your CA for **.contoso.com** or **www.contoso.com.**</span></span>
-   <span data-ttu-id="c300d-210">Le certificat doit utiliser au minimum un chiffrement à 2048 bits.</span><span class="sxs-lookup"><span data-stu-id="c300d-210">The certificate must use a minimum of 2048-bit encryption.</span></span>

<span data-ttu-id="c300d-211">HTTP n’est pas sécurisé et est soumis à des attaques d’écoute clandestine, car les données transférées à partir du navigateur web sur le serveur web ou entre les autres points de terminaison sont transmises en texte en clair.</span><span class="sxs-lookup"><span data-stu-id="c300d-211">HTTP is insecure and is subject to eavesdropping attacks because the data being transferred from the web browser to the web server or between other endpoints, is transmitted in plaintext.</span></span> <span data-ttu-id="c300d-212">Cela signifie que des attaquants peuvent intercepter et afficher des données sensibles, telles que les détails d’une carte de crédit et des informations de connexion de compte.</span><span class="sxs-lookup"><span data-stu-id="c300d-212">This means attackers can intercept and view sensitive data, such as credit card details and account logins.</span></span> <span data-ttu-id="c300d-213">Quand les données sont envoyées ou publiées par le biais d’un navigateur via HTTPS, SSL garantit que ces informations sont chiffrées et protégées contre une interception.</span><span class="sxs-lookup"><span data-stu-id="c300d-213">When data is sent or posted through a browser using HTTPS, SSL ensures that such information is encrypted and secure from interception.</span></span>

<span data-ttu-id="c300d-214">Pour plus d’informations, consultez [Configuration de SSL pour une application dans Azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate).</span><span class="sxs-lookup"><span data-stu-id="c300d-214">To learn more, see, [Configure SSL for azure application](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate).</span></span>

## <a name="network-isolationsecurity-with-azure-service-fabric"></a><span data-ttu-id="c300d-215">Sécurité/isolement réseau avec Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c300d-215">Network Isolation/Security with Azure Service Fabric</span></span>
<span data-ttu-id="c300d-216">Utilisez un [modèle Azure Resource Manager (ARM)](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) comme exemple pour définir un cluster sécurisé à trois types de nœud et pour contrôler le trafic réseau entrant et sortant à l’aide de groupes de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="c300d-216">Use [Azure Resource Manager (ARM) template](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) as a sample for setting up a three nodetype secure cluster and to control the inbound and outbound network traffic using Network Security Groups.</span></span>

<span data-ttu-id="c300d-217">Le modèle a un groupe de sécurité réseau pour chacun des groupes de machines virtuelles identiques afin de contrôler le trafic vers et depuis chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="c300d-217">The template has a Network Security Group for each of the virtual machine scale set(VMSS) to control the traffic in and out of the VMSS.</span></span> <span data-ttu-id="c300d-218">Par défaut, les règles sont configurées pour autoriser tout le trafic requis par les services système et les ports d’application spécifiés dans le modèle.</span><span class="sxs-lookup"><span data-stu-id="c300d-218">As a default, the rules are set up to allow all the traffic needed by the system services and the application ports specified in the template.</span></span> <span data-ttu-id="c300d-219">Passez en revue ces règles et apportez les modifications nécessaires, y compris en ajoutant de nouvelles règles pour vos applications.</span><span class="sxs-lookup"><span data-stu-id="c300d-219">Review those rules and make changes to fit your needs, including add any new ones for your applications.</span></span>

<span data-ttu-id="c300d-220">Pour plus d’informations, consultez [Azure Service Fabric – scénarios de mise en réseau courants](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking).</span><span class="sxs-lookup"><span data-stu-id="c300d-220">For more information, see [Azure Service Fabric – Common Networking Scenarios](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking).</span></span>

## <a name="set-up-a-key-vault-for-security"></a><span data-ttu-id="c300d-221">Configurer un coffre de clés pour la sécurité</span><span class="sxs-lookup"><span data-stu-id="c300d-221">Set up a key vault for security</span></span>
<span data-ttu-id="c300d-222">Les certificats sont utilisés dans Service Fabric à des fins d’authentification et de chiffrement pour sécuriser les divers aspects d’un cluster et de ses applications.</span><span class="sxs-lookup"><span data-stu-id="c300d-222">Certificates are used in Service Fabric to provide authentication and encryption to secure various aspects of a cluster and its applications.</span></span>

<span data-ttu-id="c300d-223">Service Fabric utilise des certificats X.509 pour sécuriser un cluster et fournir des fonctionnalités de sécurité d’applications.</span><span class="sxs-lookup"><span data-stu-id="c300d-223">Service Fabric uses X.509 certificates to secure a cluster and provide application security features.</span></span> <span data-ttu-id="c300d-224">Key Vault sert à [gérer des certificats](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure) pour des clusters Service Fabric dans Azure.</span><span class="sxs-lookup"><span data-stu-id="c300d-224">You use Key Vault to [manage certificates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure) for Service Fabric clusters in Azure.</span></span> <span data-ttu-id="c300d-225">Lorsqu’un cluster est déployé dans Azure, le fournisseur de ressources Azure chargé de la création des clusters Service Fabric extrait les certificats de Key Vault et les installe sur les machines virtuelles du cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-225">When a cluster is deployed in Azure, the Azure resource provider that's responsible for creating Service Fabric clusters pulls certificates from Key Vault and installs them on the cluster VMs.</span></span>

<span data-ttu-id="c300d-226">La relation entre [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault), un cluster Service Fabric et le fournisseur de ressources Azure utilise des certificats stockés dans un coffre de clés quand il crée un cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-226">The relationship between [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault), a service fabric cluster, and the Azure resource provider that uses certificates stored in a key vault when it creates a cluster.</span></span>

<span data-ttu-id="c300d-227">**Créer un groupe de ressources** La première étape consiste à créer un groupe de ressources dédié à votre coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="c300d-227">**Create a resource group** The first step is to create a resource group specifically for your key vault.</span></span> <span data-ttu-id="c300d-228">Nous vous recommandons de placer ce coffre de clés dans son propre groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="c300d-228">We recommend that you put the key vault into its own resource group.</span></span> <span data-ttu-id="c300d-229">Vous pouvez ainsi supprimer les groupes de ressources de calcul et de stockage, y compris le groupe de ressources contenant votre cluster Service Fabric, sans risquer de perdre vos clés et secrets.</span><span class="sxs-lookup"><span data-stu-id="c300d-229">This action lets you remove the compute and storage resource groups, including the resource group that contains your Service Fabric cluster, without losing your keys and secrets.</span></span> <span data-ttu-id="c300d-230">Le groupe de ressources qui contient votre coffre de clés doit se trouver dans la même région que le cluster qui l’utilise.</span><span class="sxs-lookup"><span data-stu-id="c300d-230">The resource group that contains your key vault must be in the same region as the cluster that is using it.</span></span>

<span data-ttu-id="c300d-231">**Créer un coffre de clés dans le nouveau groupe de ressources** Le coffre de clés doit être activé pour le déploiement afin d’autoriser le fournisseur de ressources de calcul à obtenir des certificats à partir de ce coffre de clés et à les installer sur les instances de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="c300d-231">**Create a key vault in the new resource group** The key vault must be enabled for deployment to allow the compute resource provider to get certificates from it and install it on virtual machine instances.</span></span>
<span data-ttu-id="c300d-232">Pour plus d’informations sur la configuration du coffre de clés Azure, consultez [Bien démarrer avec Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-get-started).</span><span class="sxs-lookup"><span data-stu-id="c300d-232">To learn more how to set up Azure key vault see, [Get started with Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-get-started).</span></span>

## <a name="assign-users-roles"></a><span data-ttu-id="c300d-233">Assigner des rôles aux utilisateurs</span><span class="sxs-lookup"><span data-stu-id="c300d-233">Assign users roles</span></span>
<span data-ttu-id="c300d-234">Une fois que vous avez créé les applications pour représenter votre cluster, affectez les utilisateurs aux rôles pris en charge par Service Fabric : lecture seule et administrateur. Vous pouvez assigner ces rôles à l’aide du portail Azure Classic.</span><span class="sxs-lookup"><span data-stu-id="c300d-234">After you have created the applications to represent your cluster, assign your users to the roles supported by Service Fabric: read-only and admin. You can assign the roles by using the Azure classic portal.</span></span>

>[!Note]
> <span data-ttu-id="c300d-235">Pour plus d’informations sur les rôles dans Service Fabric, consultez [Contrôle d’accès en fonction du rôle pour les clients de Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).</span><span class="sxs-lookup"><span data-stu-id="c300d-235">For more information about roles in Service Fabric, see [Role-based access control for Service Fabric clients](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).</span></span>

<span data-ttu-id="c300d-236">Azure Service Fabric prend en charge deux types de contrôle d’accès différents pour les clients qui sont connectés à un [cluster Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) : administrateur et utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c300d-236">Azure Service Fabric supports two different access control types for clients that are connected to a [Service Fabric cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm): administrator and user.</span></span> <span data-ttu-id="c300d-237">Le contrôle d'accès permet à l'administrateur du cluster de limiter l'accès à certaines opérations de cluster pour différents groupes d'utilisateurs, renforçant ainsi la sécurité du cluster.</span><span class="sxs-lookup"><span data-stu-id="c300d-237">Access control allows the cluster administrator to limit access to certain cluster operations for different groups of users, making the cluster more secure.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c300d-238">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="c300d-238">Next steps</span></span>
- <span data-ttu-id="c300d-239">Configuration de votre [environnement de développement](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started) Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c300d-239">Setting up your Service Fabric [development environment](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started).</span></span>
- <span data-ttu-id="c300d-240">Découvrez les [options de support de Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="c300d-240">Learn about [Service Fabric support options](https://docs.microsoft.com/azure/service-fabric/service-fabric-support).</span></span>

