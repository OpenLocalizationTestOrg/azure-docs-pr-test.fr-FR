---
title: "aaaInput Validation - outil de modélisation des menaces Microsoft - Azure | Documents Microsoft"
description: "mesures d’atténuation des menaces exposé Bonjour outil de modélisation des menaces"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 823503881f4bae292ef021834d5e64acf2a0f54a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="cec1e-103">Infrastructure de sécurité : validation des entrées | Mesures de correction</span><span class="sxs-lookup"><span data-stu-id="cec1e-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="cec1e-104">Produit/Service</span><span class="sxs-lookup"><span data-stu-id="cec1e-104">Product/Service</span></span> | <span data-ttu-id="cec1e-105">Article</span><span class="sxs-lookup"><span data-stu-id="cec1e-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="cec1e-106">**Application web**</span><span class="sxs-lookup"><span data-stu-id="cec1e-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="cec1e-107">Désactiver les scripts XSLT pour toutes les transformations à l’aide de feuilles de style non approuvées</span><span class="sxs-lookup"><span data-stu-id="cec1e-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="cec1e-108">S’assurer que chaque page susceptible de comporter du contenu contrôlable par l’utilisateur refuse la détection MIME automatique</span><span class="sxs-lookup"><span data-stu-id="cec1e-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="cec1e-109">Renforcer ou désactiver la résolution d’entité XML</span><span class="sxs-lookup"><span data-stu-id="cec1e-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="cec1e-110">Les applications utilisant http.sys doivent procéder à la vérification de la canonisation des URL</span><span class="sxs-lookup"><span data-stu-id="cec1e-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="cec1e-111">S’assurer que les contrôles appropriés sont en place lors de l’acceptation de fichiers provenant d’utilisateurs</span><span class="sxs-lookup"><span data-stu-id="cec1e-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="cec1e-112">S’assurer que des paramètres de type sécurisé sont utilisés dans une application web pour l’accès aux données</span><span class="sxs-lookup"><span data-stu-id="cec1e-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="cec1e-113">Utilisez les classes de liaison de modèle distinct ou une vulnérabilité de tooprevent MVC attribution en masse de listes de filtres de liaison</span><span class="sxs-lookup"><span data-stu-id="cec1e-113">Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="cec1e-114">Encoder toorendering préalable de sortie web non fiable</span><span class="sxs-lookup"><span data-stu-id="cec1e-114">Encode untrusted web output prior toorendering</span></span>](#rendering)</li><li>[<span data-ttu-id="cec1e-115">Procéder à la validation et au filtrage des entrées sur les propriétés de modèle de tous types de chaînes</span><span class="sxs-lookup"><span data-stu-id="cec1e-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="cec1e-116">Les champs de formulaire acceptant tous les caractères, par exemple dans un éditeur de texte enrichi, doivent être nettoyés</span><span class="sxs-lookup"><span data-stu-id="cec1e-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="cec1e-117">N’affectez pas toosinks d’éléments DOM qui n’ont pas de codage intégrés</span><span class="sxs-lookup"><span data-stu-id="cec1e-117">Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="cec1e-118">Valider toutes les redirections au sein de l’application hello sont fermées ou terminées en toute sécurité</span><span class="sxs-lookup"><span data-stu-id="cec1e-118">Validate all redirects within hello application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="cec1e-119">Implémenter la validation des entrées sur tous les paramètres de type de chaîne acceptés par les méthodes de contrôleur</span><span class="sxs-lookup"><span data-stu-id="cec1e-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="cec1e-120">Définir le délai d’expiration de la limite supérieure pour le traitement DoS tooprevent en raison des expressions régulières toobad d’expressions régulières</span><span class="sxs-lookup"><span data-stu-id="cec1e-120">Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="cec1e-121">Éviter l’utilisation de Html.Raw dans les vues Razor</span><span class="sxs-lookup"><span data-stu-id="cec1e-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="cec1e-122">**Base de données**</span><span class="sxs-lookup"><span data-stu-id="cec1e-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="cec1e-123">Ne pas utiliser les requêtes dynamiques dans les procédures stockées</span><span class="sxs-lookup"><span data-stu-id="cec1e-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="cec1e-124">**API Web**</span><span class="sxs-lookup"><span data-stu-id="cec1e-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="cec1e-125">S’assurer que la validation du modèle est effectuée sur les méthodes d’API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="cec1e-126">Implémenter la validation des entrées sur tous les paramètres de type de chaîne acceptés par les méthodes d’API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="cec1e-127">S’assurer que les paramètres de type sécurisé sont utilisés dans une API Web pour l’accès aux données</span><span class="sxs-lookup"><span data-stu-id="cec1e-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="cec1e-128">**Azure Document DB**</span><span class="sxs-lookup"><span data-stu-id="cec1e-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="cec1e-129">Utiliser des requêtes SQL paramétrables pour DocumentDB</span><span class="sxs-lookup"><span data-stu-id="cec1e-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="cec1e-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="cec1e-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="cec1e-131">Validation des entrées WCF par le biais de la liaison de schéma</span><span class="sxs-lookup"><span data-stu-id="cec1e-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="cec1e-132">WCF - Validation des entrées par le biais des inspecteurs de paramètres</span><span class="sxs-lookup"><span data-stu-id="cec1e-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="cec1e-133"><a id="disable-xslt"></a>Désactiver les scripts XSLT pour toutes les transformations à l’aide de feuilles de style non approuvées</span><span class="sxs-lookup"><span data-stu-id="cec1e-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="cec1e-134">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-134">Title</span></span>                   | <span data-ttu-id="cec1e-135">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-136">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-136">**Component**</span></span>               | <span data-ttu-id="cec1e-137">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-137">Web Application</span></span> | 
| <span data-ttu-id="cec1e-138">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-138">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-139">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-139">Build</span></span> |  
| <span data-ttu-id="cec1e-140">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-140">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-141">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-141">Generic</span></span> |
| <span data-ttu-id="cec1e-142">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-142">**Attributes**</span></span>              | <span data-ttu-id="cec1e-143">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-143">N/A</span></span>  |
| <span data-ttu-id="cec1e-144">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-144">**References**</span></span>              | <span data-ttu-id="cec1e-145">[Sécurité XSLT](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [Propriété XsltSettings.EnableScript](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="cec1e-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="cec1e-146">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-146">**Steps**</span></span> | <span data-ttu-id="cec1e-147">XSLT prend en charge l’écriture de scripts à l’intérieur des feuilles de style à l’aide de hello `<msxml:script>` élément.</span><span class="sxs-lookup"><span data-stu-id="cec1e-147">XSLT supports scripting inside style sheets using hello `<msxml:script>` element.</span></span> <span data-ttu-id="cec1e-148">Cela permet de toobe des fonctions personnalisées utilisée dans une transformation XSLT.</span><span class="sxs-lookup"><span data-stu-id="cec1e-148">This allows custom functions toobe used in an XSLT transformation.</span></span> <span data-ttu-id="cec1e-149">Hello est exécuté sous le contexte de hello du processus de hello hello transformation.</span><span class="sxs-lookup"><span data-stu-id="cec1e-149">hello script is executed under hello context of hello process performing hello transform.</span></span> <span data-ttu-id="cec1e-150">Script XSLT doit être désactivé dans une exécution de tooprevent d’environnement non fiable de code non fiable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-150">XSLT script must be disabled when in an untrusted environment tooprevent execution of untrusted code.</span></span> <span data-ttu-id="cec1e-151">*Si vous utilisez .NET :* script XSLT est désactivé par défaut ; Toutefois, vous devez vous assurer qu’elle n'a pas été explicitement activée via hello `XsltSettings.EnableScript` propriété.</span><span class="sxs-lookup"><span data-stu-id="cec1e-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="cec1e-152">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="cec1e-153">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-153">Example</span></span>
<span data-ttu-id="cec1e-154">Si vous n’utilisez pas l’utilisation de MSXML 6.0, le script XSLT est désactivé par défaut. Toutefois, vous devez vous assurer qu’elle n'a pas été explicitement activée via la propriété de l’objet DOM XML hello AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="cec1e-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="cec1e-155">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-155">Example</span></span>
<span data-ttu-id="cec1e-156">Si vous utilisez MSXML 5 ou une version antérieure, les scripts XSLT sont activés par défaut et vous devez les désactiver explicitement.</span><span class="sxs-lookup"><span data-stu-id="cec1e-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="cec1e-157">Définissez hello DOM XML objet propriété AllowXsltScript toofalse.</span><span class="sxs-lookup"><span data-stu-id="cec1e-157">Set hello XML DOM object property AllowXsltScript toofalse.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting toofalse disables XSLT scripting.
```

## <span data-ttu-id="cec1e-158"><a id="out-sniffing"></a>S’assurer que chaque page susceptible de comporter du contenu contrôlable par l’utilisateur refuse la détection MIME automatique</span><span class="sxs-lookup"><span data-stu-id="cec1e-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="cec1e-159">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-159">Title</span></span>                   | <span data-ttu-id="cec1e-160">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-161">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-161">**Component**</span></span>               | <span data-ttu-id="cec1e-162">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-162">Web Application</span></span> | 
| <span data-ttu-id="cec1e-163">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-163">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-164">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-164">Build</span></span> |  
| <span data-ttu-id="cec1e-165">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-165">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-166">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-166">Generic</span></span> |
| <span data-ttu-id="cec1e-167">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-167">**Attributes**</span></span>              | <span data-ttu-id="cec1e-168">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-168">N/A</span></span>  |
| <span data-ttu-id="cec1e-169">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-169">**References**</span></span>              | [<span data-ttu-id="cec1e-170">IE8 Security Part V - Comprehensive Protection (Sécurité IE8 Partie V - Protection complète)</span><span class="sxs-lookup"><span data-stu-id="cec1e-170">IE8 Security Part V - Comprehensive Protection</span></span>](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)  |
| <span data-ttu-id="cec1e-171">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-171">**Steps**</span></span> | <p><span data-ttu-id="cec1e-172">Pour chaque page peut contenir du contenu contrôlable par l’utilisateur, vous devez utiliser hello en-tête HTTP `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="cec1e-172">For each page that could contain user controllable content, you must use hello HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="cec1e-173">toocomply à cette exigence, vous pouvez soit hello requis en-tête de page par page pour que les pages qui peuvent contenir des informations contrôlable à l’utilisateur, ou définies globalement pour toutes les pages de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-173">toocomply with this requirement, you can either set hello required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in hello application.</span></span></p><p><span data-ttu-id="cec1e-174">Chaque type de fichier provenant d’un serveur web est associé à un [type MIME](http://en.wikipedia.org/wiki/Mime_type) (également appelé un *type de contenu*) qui décrit la nature hello du contenu hello (autrement dit, image, texte, application, etc.)</span><span class="sxs-lookup"><span data-stu-id="cec1e-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes hello nature of hello content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="cec1e-175">en-tête de Hello X-contenu-Type-Options est un en-tête HTTP qui permet aux développeurs toospecify que leur contenu ne doit pas être détectées de MIME.</span><span class="sxs-lookup"><span data-stu-id="cec1e-175">hello X-Content-Type-Options header is an HTTP header that allows developers toospecify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="cec1e-176">Cet en-tête est conçue toomitigate détection MIME sur les attaques.</span><span class="sxs-lookup"><span data-stu-id="cec1e-176">This header is designed toomitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="cec1e-177">La prise en charge de cet en-tête a été ajoutée dans Internet Explorer 8 (IE8).</span><span class="sxs-lookup"><span data-stu-id="cec1e-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="cec1e-178">Seuls les utilisateurs d’Internet Explorer 8 (IE8) bénéficient de l’en-tête X-Content-Type-Options.</span><span class="sxs-lookup"><span data-stu-id="cec1e-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="cec1e-179">Les versions antérieures d’Internet Explorer ne respectent pas actuellement l’en-tête X-contenu-Type-Options de hello</span><span class="sxs-lookup"><span data-stu-id="cec1e-179">Previous versions of Internet Explorer do not currently respect hello X-Content-Type-Options header</span></span></p><p><span data-ttu-id="cec1e-180">Internet Explorer 8 (et versions ultérieur) sont hello uniquement les fonctionnalités d’annulations principaux navigateurs tooimplement une détection MIME.</span><span class="sxs-lookup"><span data-stu-id="cec1e-180">Internet Explorer 8 (and later) are hello only major browsers tooimplement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="cec1e-181">Si et quand les autres principaux navigateurs (Firefox, Safari, Chrome) implémentent des fonctionnalités similaires, cette recommandation sera syntaxe tooinclude mis à jour pour ces navigateurs aussi</span><span class="sxs-lookup"><span data-stu-id="cec1e-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated tooinclude syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="cec1e-182">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-182">Example</span></span>
<span data-ttu-id="cec1e-183">en-tête requis du hello tooenable globalement pour toutes les pages de l’application hello, vous pouvez effectuer hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="cec1e-183">tooenable hello required header globally for all pages in hello application, you can do one of hello following:</span></span> 

* <span data-ttu-id="cec1e-184">Ajouter l’en-tête de hello dans le fichier web.config de hello si l’application hello est hébergée par Internet Information Services (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="cec1e-184">Add hello header in hello web.config file if hello application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="cec1e-185">Ajouter un en-tête hello via hello Application globale\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="cec1e-185">Add hello header through hello global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="cec1e-186">Implémentez le module HTTP personnalisé</span><span class="sxs-lookup"><span data-stu-id="cec1e-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="cec1e-187">Vous pouvez activer l’en-tête requis de hello uniquement pour les pages spécifiques en ajoutant des réponses de tooindividual :</span><span class="sxs-lookup"><span data-stu-id="cec1e-187">You can enable hello required header only for specific pages by adding it tooindividual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="cec1e-188"><a id="xml-resolution"></a>Renforcer ou désactiver la résolution d’entité XML</span><span class="sxs-lookup"><span data-stu-id="cec1e-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="cec1e-189">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-189">Title</span></span>                   | <span data-ttu-id="cec1e-190">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-191">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-191">**Component**</span></span>               | <span data-ttu-id="cec1e-192">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-192">Web Application</span></span> | 
| <span data-ttu-id="cec1e-193">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-193">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-194">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-194">Build</span></span> |  
| <span data-ttu-id="cec1e-195">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-195">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-196">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-196">Generic</span></span> |
| <span data-ttu-id="cec1e-197">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-197">**Attributes**</span></span>              | <span data-ttu-id="cec1e-198">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-198">N/A</span></span>  |
| <span data-ttu-id="cec1e-199">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-199">**References**</span></span>              | <span data-ttu-id="cec1e-200">[XML Entity Expansion (Extension d’entité XML)](http://capec.mitre.org/data/definitions/197.html), [Attaques par déni de service XML et moyens de défense](http://msdn.microsoft.com/magazine/ee335713.aspx), [Vue d’ensemble de la sécurité MSXML](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Meilleures pratiques pour la sécurisation du Code MSXML](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [Référence de protocole NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Résolution des ressources externes](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="cec1e-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="cec1e-201">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-201">**Steps**</span></span>| <p><span data-ttu-id="cec1e-202">Bien qu’il n’est pas largement utilisé, il existe une fonctionnalité de XML qui permet des entités de macro hello XML parser tooexpand avec les valeurs définies dans le document hello lui-même ou à partir de sources externes.</span><span class="sxs-lookup"><span data-stu-id="cec1e-202">Although it is not widely used, there is a feature of XML that allows hello XML parser tooexpand macro entities with values defined either within hello document itself or from external sources.</span></span> <span data-ttu-id="cec1e-203">Par exemple, les documents hello peuvent définir une entité « companyname » avec la valeur de hello « Microsoft », afin que chaque fois hello texte «&companyname;» s’affiche dans le document de hello, il est automatiquement remplacé par le texte hello Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cec1e-203">For example, hello document might define an entity "companyname" with hello value "Microsoft," so that every time hello text "&companyname;" appears in hello document, it is automatically replaced with hello text Microsoft.</span></span> <span data-ttu-id="cec1e-204">Ou bien, le document de hello peut définir une entité « MSFTStock » qui fait référence à une web externe service toofetch hello valeur actuelle du stock de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="cec1e-204">Or, hello document might define an entity "MSFTStock" that references an external web service toofetch hello current value of Microsoft stock.</span></span></p><p><span data-ttu-id="cec1e-205">Puis à tout moment «&MSFTStock;» s’affiche dans le document de hello, il est automatiquement remplacé par hello cours.</span><span class="sxs-lookup"><span data-stu-id="cec1e-205">Then any time "&MSFTStock;" appears in hello document, it is automatically replaced with hello current stock price.</span></span> <span data-ttu-id="cec1e-206">Toutefois, cette fonctionnalité peut être outrepassés toocreate des attaques de déni de service (DoS).</span><span class="sxs-lookup"><span data-stu-id="cec1e-206">However, this functionality can be abused toocreate denial of service (DoS) conditions.</span></span> <span data-ttu-id="cec1e-207">Une personne malveillante peut imbriquer plusieurs entités toocreate une limite d’expansion exponentielle XML qui consomme toute la mémoire disponible sur le système de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-207">An attacker can nest multiple entities toocreate an exponential expansion XML bomb that consumes all available memory on hello system.</span></span> </p><p><span data-ttu-id="cec1e-208">Ou bien, il peut créer une référence externe qui diffuse en continu différée une quantité infinie de données ou qui se simplement bloque le thread de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs hello thread.</span></span> <span data-ttu-id="cec1e-209">Par conséquent, toutes les équipes doivent désactiver la résolution d’entité XML interne ou externe entièrement si leur application ne pas utiliser, ou manuellement limiter hello de mémoire et l’heure auxquelles l’application hello peut consommer pour la résolution d’entité, si cette fonctionnalité est C’est absolument nécessaire.</span><span class="sxs-lookup"><span data-stu-id="cec1e-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit hello amount of memory and time that hello application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="cec1e-210">Si la résolution d’entité n’est pas requise par votre application, désactivez-la.</span><span class="sxs-lookup"><span data-stu-id="cec1e-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="cec1e-211">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-211">Example</span></span>
<span data-ttu-id="cec1e-212">Pour le code .NET Framework, vous pouvez utiliser hello méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="cec1e-212">For .NET Framework code, you can use hello following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="cec1e-213">Notez cette valeur par défaut hello `ProhibitDtd` dans `XmlReaderSettings` est true, mais dans `XmlTextReader` a la valeur false.</span><span class="sxs-lookup"><span data-stu-id="cec1e-213">Note that hello default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="cec1e-214">Si vous utilisez XmlReaderSettings, vous n’avez pas besoin tooset ProhibitDtd tootrue explicitement, mais il est recommandé pour des raisons de sécurité que vous effectuez.</span><span class="sxs-lookup"><span data-stu-id="cec1e-214">If you are using XmlReaderSettings, you do not need tooset ProhibitDtd tootrue explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="cec1e-215">Notez que hello classe XmlDocument permet également la résolution d’entité par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-215">Also note that hello XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="cec1e-216">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-216">Example</span></span>
<span data-ttu-id="cec1e-217">résolution d’entité toodisable pour XmlDocument, utilisez hello `XmlDocument.Load(XmlReader)` surcharge de hello Load (méthode) et définissez hello propriétés appropriées dans la résolution de toodisable XmlReader argument hello, comme illustré dans hello suivant de code :</span><span class="sxs-lookup"><span data-stu-id="cec1e-217">toodisable entity resolution for XmlDocuments, use hello `XmlDocument.Load(XmlReader)` overload of hello Load method and set hello appropriate properties in hello XmlReader argument toodisable resolution, as illustrated in hello following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="cec1e-218">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-218">Example</span></span>
<span data-ttu-id="cec1e-219">Si la désactivation de la résolution d’entité n’est pas possible pour votre application, valeur hello XmlReaderSettings.MaxCharactersFromEntities propriété tooa raisonnable en fonction des besoins de l’application tooyour.</span><span class="sxs-lookup"><span data-stu-id="cec1e-219">If disabling entity resolution is not possible for your application, set hello XmlReaderSettings.MaxCharactersFromEntities property tooa reasonable value according tooyour application's needs.</span></span> <span data-ttu-id="cec1e-220">Cela limite impact hello d’attaques de déni de service potentielles exponentielle d’extension.</span><span class="sxs-lookup"><span data-stu-id="cec1e-220">This will limit hello impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="cec1e-221">Hello suivant code fournit un exemple de cette approche :</span><span class="sxs-lookup"><span data-stu-id="cec1e-221">hello following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="cec1e-222">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-222">Example</span></span>
<span data-ttu-id="cec1e-223">Si vous devez tooresolve inline entités mais que vous n’avez pas besoin de tooresolve des entités externes, définissez hello XmlReaderSettings.XmlResolver propriété toonull.</span><span class="sxs-lookup"><span data-stu-id="cec1e-223">If you need tooresolve inline entities but do not need tooresolve external entities, set hello XmlReaderSettings.XmlResolver property toonull.</span></span> <span data-ttu-id="cec1e-224">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="cec1e-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="cec1e-225">Notez que dans MSXML6, ProhibitDTD a la valeur tootrue (désactiver le traitement des DTD) par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-225">Note that in MSXML6, ProhibitDTD is set tootrue (disabling DTD processing) by default.</span></span> <span data-ttu-id="cec1e-226">Pour le code Apple OSX/iOS, vous pouvez utiliser deux analyseurs XML : NSXMLParser et libXML2.</span><span class="sxs-lookup"><span data-stu-id="cec1e-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="cec1e-227"><a id="app-verification"></a>Les applications utilisant http.sys doivent procéder à la vérification de la canonisation des URL</span><span class="sxs-lookup"><span data-stu-id="cec1e-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="cec1e-228">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-228">Title</span></span>                   | <span data-ttu-id="cec1e-229">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-230">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-230">**Component**</span></span>               | <span data-ttu-id="cec1e-231">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-231">Web Application</span></span> | 
| <span data-ttu-id="cec1e-232">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-232">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-233">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-233">Build</span></span> |  
| <span data-ttu-id="cec1e-234">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-234">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-235">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-235">Generic</span></span> |
| <span data-ttu-id="cec1e-236">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-236">**Attributes**</span></span>              | <span data-ttu-id="cec1e-237">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-237">N/A</span></span>  |
| <span data-ttu-id="cec1e-238">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-238">**References**</span></span>              | <span data-ttu-id="cec1e-239">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-239">N/A</span></span>  |
| <span data-ttu-id="cec1e-240">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-240">**Steps**</span></span> | <p><span data-ttu-id="cec1e-241">Toutes les applications utilisant http.sys doivent suivre ces instructions :</span><span class="sxs-lookup"><span data-stu-id="cec1e-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="cec1e-242">Limitez hello URL longueur toono plus de 16 384 caractères (Unicode ou ASCII).</span><span class="sxs-lookup"><span data-stu-id="cec1e-242">Limit hello URL length toono more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="cec1e-243">Il s’agit de hello absolue longueur maximale des URL basée sur la configuration d’Internet Information Services (IIS) 6 hello par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-243">This is hello absolute maximum URL length based on hello default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="cec1e-244">Les sites web doivent, dans la mesure du possible, proposer une longueur inférieure</span><span class="sxs-lookup"><span data-stu-id="cec1e-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="cec1e-245">Utiliser des classes de fichier d’e/s de .NET Framework standards hello (par exemple, FileStream) comme ces tirera parti d’hello règles de canonisation Bonjour .NET FX</span><span class="sxs-lookup"><span data-stu-id="cec1e-245">Use hello standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of hello canonicalization rules in hello .NET FX</span></span></li><li><span data-ttu-id="cec1e-246">Créez explicitement une liste verte des noms de fichiers connus</span><span class="sxs-lookup"><span data-stu-id="cec1e-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="cec1e-247">Refusez explicitement les types de fichiers connus qui ne vous serviront pas et qu’UrlScan refuse : exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol et dat</span><span class="sxs-lookup"><span data-stu-id="cec1e-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="cec1e-248">Intercepter hello suivant des exceptions :</span><span class="sxs-lookup"><span data-stu-id="cec1e-248">Catch hello following exceptions:</span></span><ul><li><span data-ttu-id="cec1e-249">System.ArgumentException (pour les noms d’appareils)</span><span class="sxs-lookup"><span data-stu-id="cec1e-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="cec1e-250">System.NotSupportedException (pour les flux de données)</span><span class="sxs-lookup"><span data-stu-id="cec1e-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="cec1e-251">System.IO.FileNotFoundException (pour les noms de fichiers avec séquence d’échappement non valide)</span><span class="sxs-lookup"><span data-stu-id="cec1e-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="cec1e-252">System.IO.FileNotFoundException (pour les noms de répertoires avec séquence d’échappement non valide)</span><span class="sxs-lookup"><span data-stu-id="cec1e-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="cec1e-253">*Ne le faites pas* appeler tooWin32 fichier I/O APIs.</span><span class="sxs-lookup"><span data-stu-id="cec1e-253">*Do not* call out tooWin32 file I/O APIs.</span></span> <span data-ttu-id="cec1e-254">Sur une URL non valide normalement retourner une 400 erreur toohello et journaux d’erreur réelle de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-254">On an invalid URL gracefully return a 400 error toohello user, and log hello real error.</span></span></li></ul>|

## <span data-ttu-id="cec1e-255"><a id="controls-users"></a>S’assurer que les contrôles appropriés sont en place lors de l’acceptation de fichiers provenant d’utilisateurs</span><span class="sxs-lookup"><span data-stu-id="cec1e-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="cec1e-256">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-256">Title</span></span>                   | <span data-ttu-id="cec1e-257">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-258">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-258">**Component**</span></span>               | <span data-ttu-id="cec1e-259">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-259">Web Application</span></span> | 
| <span data-ttu-id="cec1e-260">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-260">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-261">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-261">Build</span></span> |  
| <span data-ttu-id="cec1e-262">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-262">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-263">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-263">Generic</span></span> |
| <span data-ttu-id="cec1e-264">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-264">**Attributes**</span></span>              | <span data-ttu-id="cec1e-265">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-265">N/A</span></span>  |
| <span data-ttu-id="cec1e-266">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-266">**References**</span></span>              | <span data-ttu-id="cec1e-267">[Unrestricted File Upload (Chargement de fichiers sans restriction)](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table (Table de signatures de fichier)](http://www.garykessler.net/library/file_sigs.html)</span><span class="sxs-lookup"><span data-stu-id="cec1e-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="cec1e-268">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-268">**Steps**</span></span> | <p><span data-ttu-id="cec1e-269">Les fichiers téléchargés représentent une risque tooapplications.</span><span class="sxs-lookup"><span data-stu-id="cec1e-269">Uploaded files represent a significant risk tooapplications.</span></span></p><p><span data-ttu-id="cec1e-270">Hello première étape de nombreuses attaques est tooget certaines toobe de système de code toohello une attaque.</span><span class="sxs-lookup"><span data-stu-id="cec1e-270">hello first step in many attacks is tooget some code toohello system toobe attacked.</span></span> <span data-ttu-id="cec1e-271">Attaque de hello doit ensuite uniquement toofind un façon, le code hello tooget exécuté.</span><span class="sxs-lookup"><span data-stu-id="cec1e-271">Then hello attack only needs toofind a way tooget hello code executed.</span></span> <span data-ttu-id="cec1e-272">Chargement d’un fichier aide les intrus hello accomplir la première étape de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-272">Using a file upload helps hello attacker accomplish hello first step.</span></span> <span data-ttu-id="cec1e-273">conséquences Hello de téléchargement du fichier illimitée peuvent varier, notamment la prise en charge complète du système, un système de fichiers surchargée ou de la base de données, systèmes tooback attaques et dégradation simple de transfert.</span><span class="sxs-lookup"><span data-stu-id="cec1e-273">hello consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks tooback-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="cec1e-274">Il varie selon quelle application hello fait avec les fichiers hello téléchargé et en particulier où il est stocké.</span><span class="sxs-lookup"><span data-stu-id="cec1e-274">It depends on what hello application does with hello uploaded file and especially where it is stored.</span></span> <span data-ttu-id="cec1e-275">Il manque la validation des téléchargements de fichiers côté serveur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="cec1e-276">Le suivi des contrôles de sécurité doit être implémenté pour la fonctionnalité de téléchargement de fichiers :</span><span class="sxs-lookup"><span data-stu-id="cec1e-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="cec1e-277">Vérification de l’extension du fichier (seul un ensemble valide de types de fichiers autorisés doit être accepté)</span><span class="sxs-lookup"><span data-stu-id="cec1e-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="cec1e-278">Taille maximale du fichier</span><span class="sxs-lookup"><span data-stu-id="cec1e-278">Maximum file size limit</span></span></li><li><span data-ttu-id="cec1e-279">Fichier ne doit pas être téléchargée toowebroot ; emplacement de Hello doit être un répertoire sur un lecteur non système</span><span class="sxs-lookup"><span data-stu-id="cec1e-279">File should not be uploaded toowebroot; hello location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="cec1e-280">Convention d’affectation de noms doit être suivie, telles que hello nom du fichier téléchargé avoir certains aléatoire, donc en tant que tooprevent remplace les fichiers</span><span class="sxs-lookup"><span data-stu-id="cec1e-280">Naming convention should be followed, such that hello uploaded file name have some randomness, so as tooprevent file overwrites</span></span></li><li><span data-ttu-id="cec1e-281">Fichiers doivent être analysés pour la protection antivirus avant d’écrire toohello disque</span><span class="sxs-lookup"><span data-stu-id="cec1e-281">Files should be scanned for anti-virus before writing toohello disk</span></span></li><li><span data-ttu-id="cec1e-282">Vous assurer que le nom de fichier hello et d’autres métadonnées (par exemple, chemin d’accès de fichier) sont validées pour des caractères nuisibles</span><span class="sxs-lookup"><span data-stu-id="cec1e-282">Ensure that hello file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="cec1e-283">Signature de format de fichier doit être vérifiée, tooprevent un utilisateur de télécharger un fichier masquée (par exemple, en téléchargeant un fichier exe en modifiant l’extension tootxt)</span><span class="sxs-lookup"><span data-stu-id="cec1e-283">File format signature should be checked, tooprevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension tootxt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="cec1e-284">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-284">Example</span></span>
<span data-ttu-id="cec1e-285">Pour hello dernier point concernant la validation de signature de format de fichier, consultez la classe toohello ci-dessous pour plus d’informations :</span><span class="sxs-lookup"><span data-stu-id="cec1e-285">For hello last point regarding file format signature validation, refer toohello class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="cec1e-286"><a id="typesafe"></a>S’assurer que des paramètres de type sécurisé sont utilisés dans une application web pour l’accès aux données</span><span class="sxs-lookup"><span data-stu-id="cec1e-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="cec1e-287">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-287">Title</span></span>                   | <span data-ttu-id="cec1e-288">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-289">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-289">**Component**</span></span>               | <span data-ttu-id="cec1e-290">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-290">Web Application</span></span> | 
| <span data-ttu-id="cec1e-291">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-291">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-292">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-292">Build</span></span> |  
| <span data-ttu-id="cec1e-293">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-293">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-294">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-294">Generic</span></span> |
| <span data-ttu-id="cec1e-295">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-295">**Attributes**</span></span>              | <span data-ttu-id="cec1e-296">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-296">N/A</span></span>  |
| <span data-ttu-id="cec1e-297">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-297">**References**</span></span>              | <span data-ttu-id="cec1e-298">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-298">N/A</span></span>  |
| <span data-ttu-id="cec1e-299">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-299">**Steps**</span></span> | <p><span data-ttu-id="cec1e-300">Si vous utilisez la collection de paramètres hello, SQL traite hello entrée est comme une valeur littérale et non en tant que code exécutable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-300">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="cec1e-301">collection de paramètres de Hello peut être tooenforce utilisé les contraintes de type et la longueur des données d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-301">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="cec1e-302">Les valeurs en dehors de la plage de hello déclenchent une exception.</span><span class="sxs-lookup"><span data-stu-id="cec1e-302">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="cec1e-303">Si les paramètres SQL de type sécurisé ne sont pas utilisés, des personnes malveillantes peuvent être en mesure de tooexecute les attaques par injection sont incorporés dans l’entrée de hello non filtré.</span><span class="sxs-lookup"><span data-stu-id="cec1e-303">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="cec1e-304">Utiliser les paramètres de type sécurisé lors de la construction SQL interroge tooavoid possibles attaques par injection SQL qui peuvent se produire avec des entrées non filtrées.</span><span class="sxs-lookup"><span data-stu-id="cec1e-304">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="cec1e-305">Vous pouvez utiliser des paramètres de type sécurisé avec des procédures stockées et des instructions SQL dynamiques.</span><span class="sxs-lookup"><span data-stu-id="cec1e-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="cec1e-306">Les paramètres sont traités comme des valeurs littérales par base de données hello et non en tant que code exécutable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-306">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="cec1e-307">Le type et la longueur sont également vérifiés pour les paramètres.</span><span class="sxs-lookup"><span data-stu-id="cec1e-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="cec1e-308">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-308">Example</span></span> 
<span data-ttu-id="cec1e-309">Hello de code suivant montre comment toouse paramètres de type sécurisés avec hello SqlParameterCollection lors de l’appel d’une procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-309">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="cec1e-310">Bonjour précédant l’exemple de code, la valeur d’entrée de hello ne peut pas être supérieure à 11 caractères.</span><span class="sxs-lookup"><span data-stu-id="cec1e-310">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="cec1e-311">Si les données de salutation n’est pas conforme toohello type ou la longueur définie par le paramètre hello, hello SqlParameter, classe lève une exception.</span><span class="sxs-lookup"><span data-stu-id="cec1e-311">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="cec1e-312"><a id="binding-mvc"></a>Utilisez les classes de liaison de modèle distinct ou une vulnérabilité de tooprevent MVC attribution en masse de listes de filtres de liaison</span><span class="sxs-lookup"><span data-stu-id="cec1e-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="cec1e-313">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-313">Title</span></span>                   | <span data-ttu-id="cec1e-314">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-315">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-315">**Component**</span></span>               | <span data-ttu-id="cec1e-316">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-316">Web Application</span></span> | 
| <span data-ttu-id="cec1e-317">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-317">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-318">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-318">Build</span></span> |  
| <span data-ttu-id="cec1e-319">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-319">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-320">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="cec1e-321">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-321">**Attributes**</span></span>              | <span data-ttu-id="cec1e-322">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-322">N/A</span></span>  |
| <span data-ttu-id="cec1e-323">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-323">**References**</span></span>              | <span data-ttu-id="cec1e-324">[Les attributs de métadonnées](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public clé sécurité vulnérabilité et atténuation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Guide complet tooMass affectation dans ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [prise en main d’EF à l’aide de MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="cec1e-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide tooMass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="cec1e-325">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-325">**Steps**</span></span> | <ul><li><span data-ttu-id="cec1e-326">**Quand dois-je rechercher les vulnérabilités de survalidation ? -** Les vulnérabilités de survalidation peuvent se produire partout où vous liez des classes de modèle à partir d’entrées utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="cec1e-327">Les infrastructures telles que MVC peuvent représenter des données utilisateur dans des classes .NET personnalisées, y compris les objets CLR traditionnels (OCT).</span><span class="sxs-lookup"><span data-stu-id="cec1e-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="cec1e-328">MVC remplit automatiquement ces classes de modèle avec des données à partir de la demande de hello, fournissant une représentation pratique pour traiter les entrées d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-328">MVC automatically populates these model classes with data from hello request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="cec1e-329">Lorsque ces classes incluent des propriétés qui ne doivent pas être définies par l’utilisateur de hello, application hello peut être vulnérable attaques tooover-validation, qui permettent le contrôle utilisateur de données application hello jamais prévue.</span><span class="sxs-lookup"><span data-stu-id="cec1e-329">When these classes include properties that should not be set by hello user, hello application can be vulnerable tooover-posting attacks, which allow user control of data that hello application never intended.</span></span> <span data-ttu-id="cec1e-330">Comme la liaison du modèle MVC, les technologies d’accès de base de données tels que les mappeurs objet/relationnel comme Entity Framework souvent également prend en charge POCO objets toorepresent base de données.</span><span class="sxs-lookup"><span data-stu-id="cec1e-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects toorepresent database data.</span></span> <span data-ttu-id="cec1e-331">Ces classes de modèle de données fournissent hello même simplifier la gestion des données de base de données comme MVC dans le traitement des entrées d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-331">These data model classes provide hello same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="cec1e-332">Étant donné que MVC et hello de base de données prend en charge des modèles similaires, telles que les objets POCO, il semble hello tooreuse facile même des classes pour les deux fonctions.</span><span class="sxs-lookup"><span data-stu-id="cec1e-332">Because both MVC and hello database support similar models, like POCO objects, it seems easy tooreuse hello same classes for both purposes.</span></span> <span data-ttu-id="cec1e-333">Cette échoue pratique toopreserve la séparation des problèmes et il est fréquemment où des propriétés sont exposées toomodel liaison, l’activation des attaques de validation excessive.</span><span class="sxs-lookup"><span data-stu-id="cec1e-333">This practice fails toopreserve separation of concerns, and it is one common area where unintended properties are exposed toomodel binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="cec1e-334">**Pourquoi ne dois-je pas utiliser mes classes de modèle de base de données non filtrées en tant qu’actions de MVC toomy paramètres ? -** Liaison de modèle MVC car rien liera dans cette classe.</span><span class="sxs-lookup"><span data-stu-id="cec1e-334">**Why shouldn't I use my unfiltered database model classes as parameters toomy MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="cec1e-335">Même si hello données n’apparaissent pas dans votre affichage, qu'un utilisateur malveillant peut envoyer une demande HTTP avec ces données incluses et MVC prêts liera il car votre action indique que la classe de base de données est de forme hello des données, il doit accepter pour l’entrée d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-335">Even if hello data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is hello shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="cec1e-336">**Pourquoi devez-vous vous soucier forme hello utilisé pour la liaison de modèle ? -** Liaison de modèle à l’aide de ASP.NET MVC avec des modèles trop larges expose un attaques de validation tooover d’application.</span><span class="sxs-lookup"><span data-stu-id="cec1e-336">**Why should I care about hello shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application tooover-posting attacks.</span></span> <span data-ttu-id="cec1e-337">Validation excessive pourrait permettre des données d’application des personnes malveillantes toochange au-delà de ce que développeur hello destiné, telles que la substitution de prix hello pour un élément ou hello des privilèges de sécurité d’un compte.</span><span class="sxs-lookup"><span data-stu-id="cec1e-337">Over-posting could enable attackers toochange application data beyond what hello developer intended, such as overriding hello price for an item or hello security privileges for an account.</span></span> <span data-ttu-id="cec1e-338">Applications doivent utiliser tooprovide de modèles (ou les listes de filtres de propriétés autorisés spécifique) de liaison spécifiques à certaines actions un contrat explicite pour le tooallow d’entrée non approuvé via la liaison de modèle.</span><span class="sxs-lookup"><span data-stu-id="cec1e-338">Applications should use action-specific binding models (or specific allowed property filter lists) tooprovide an explicit contract for what untrusted input tooallow via model binding.</span></span></li><li><span data-ttu-id="cec1e-339">**Le fait de disposer de modèles de liaison distincts équivaut-il simplement à une duplication de code ? -** Non, c’est une question de séparation des intérêts.</span><span class="sxs-lookup"><span data-stu-id="cec1e-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="cec1e-340">Si vous réutilisez les modèles de base de données dans les méthodes d’action, vous dites toute propriété (ou la sous-propriété) qu’une classe peut être définie par l’utilisateur hello dans une requête HTTP.</span><span class="sxs-lookup"><span data-stu-id="cec1e-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by hello user in an HTTP request.</span></span> <span data-ttu-id="cec1e-341">Si ce n’est pas ce que vous voulez toodo MVC, vous devez une liste de filtres ou un tooshow de forme classe distincte MVC, les données peuvent provenir d’utilisateur d’entrée à la place.</span><span class="sxs-lookup"><span data-stu-id="cec1e-341">If that is not what you want MVC toodo, you need a filter list or a separate class shape tooshow MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="cec1e-342">**Si j’utilise des modèles de liaison distincte pour l’entrée d’utilisateur, dois-je tooduplicate tous les attributs d’annotations mes données ? -** N’est pas nécessairement.</span><span class="sxs-lookup"><span data-stu-id="cec1e-342">**If I have separate binding models for user input, do I have tooduplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="cec1e-343">Vous pouvez utiliser MetadataTypeAttribute sur hello de base de données classe toolink toohello métadonnées du modèle sur une classe de liaison de modèle.</span><span class="sxs-lookup"><span data-stu-id="cec1e-343">You can use MetadataTypeAttribute on hello database model class toolink toohello metadata on a model binding class.</span></span> <span data-ttu-id="cec1e-344">Simplement hello type référencé par hello MetadataTypeAttribute doivent être un sous-ensemble de hello référençant le type de (il peut avoir moins de propriétés, mais pas plus).</span><span class="sxs-lookup"><span data-stu-id="cec1e-344">Just note that hello type referenced by hello MetadataTypeAttribute must be a subset of hello referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="cec1e-345">**Le déplacement des données entre les modèles d’entrée utilisateur et les modèles de base de données s’avère fastidieux. Puis-je simplement copier toutes les propriétés par réflexion ? -** Oui.</span><span class="sxs-lookup"><span data-stu-id="cec1e-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="cec1e-346">Hello uniquement les propriétés qui apparaissent dans les modèles de liaison hello sont hello ceux que vous avez déterminé toobe sécurisé pour l’entrée d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-346">hello only properties that appear in hello binding models are hello ones you have determined toobe safe for user input.</span></span> <span data-ttu-id="cec1e-347">Il n’existe aucune raison de sécurité qui empêche l’utilisation de la réflexion toocopy sur toutes les propriétés qui existent en commun entre ces deux modèles.</span><span class="sxs-lookup"><span data-stu-id="cec1e-347">There is no security reason that prevents using reflection toocopy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="cec1e-348">**Qu’en est-il de [Bind(Exclude ="â€¦")] ? Puis-je l’utiliser à la place de modèles de liaison distincts ? -** Cette approche n’est pas recommandée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="cec1e-349">L’utilisation de [Bind(Exclude ="â€¦")] indique que toute nouvelle propriété peut être liée par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="cec1e-350">Lorsque vous ajoutez une nouvelle propriété, un choses de tookeep tooremember étape supplémentaire est sécurisée, plutôt que conception de hello être sécurisé par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-350">When a new property is added, there is an extra step tooremember tookeep things secure, rather than having hello design be secure by default.</span></span> <span data-ttu-id="cec1e-351">En fonction de développeur de hello il est risquée de la vérification de cette liste chaque fois qu’une propriété est ajoutée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-351">Depending on hello developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="cec1e-352">**[Bind(Include ="â€¦")] est-il utile pour les opérations de modification ? -** Non.</span><span class="sxs-lookup"><span data-stu-id="cec1e-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="cec1e-353">[Bind(Include ="â€¦")] convient uniquement aux opérations de style INSERT (ajout de nouvelles données).</span><span class="sxs-lookup"><span data-stu-id="cec1e-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="cec1e-354">Pour les opérations de mise à jour-style (revoir les données existantes), utilisez une autre approche, comme ayant des modèles de liaison distincts ou en passant une liste explicite des propriétés autorisées tooUpdateModel ou TryUpdateModel.</span><span class="sxs-lookup"><span data-stu-id="cec1e-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties tooUpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="cec1e-355">Ajout d’un [lier (Include = "¦ d’â€ »)] l’attribut sur une opération de modification signifie que MVC crée une instance d’objet et définir uniquement hello répertoriés propriétés, en laissant toutes les autres valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only hello listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="cec1e-356">Lorsque les données de salutation sont rendu persistant, il remplace entièrement entité existante hello, réinitialisation des valeurs hello pour toutes les valeurs par défaut de propriétés omises tootheir.</span><span class="sxs-lookup"><span data-stu-id="cec1e-356">When hello data is persisted, it will entirely replace hello existing entity, resetting hello values for any omitted properties tootheir defaults.</span></span> <span data-ttu-id="cec1e-357">Par exemple, si IsAdmin a été omis d’un [lier (Include = « ¦ d’â€ »)] l’attribut sur une opération de modification, tout utilisateur dont le nom a été modifié par cette action serait réinitialisation tooIsAdmin = false (n’importe quel utilisateur modifié perdrait le statut d’administrateur).</span><span class="sxs-lookup"><span data-stu-id="cec1e-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset tooIsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="cec1e-358">Tooprevent met à jour les propriétés de toocertain, utilisez une des hello autres approches ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="cec1e-358">If you want tooprevent updates toocertain properties, use one of hello other approaches above.</span></span> <span data-ttu-id="cec1e-359">Certaines versions des outils MVC génèrent des classes de contrôleur avec [Bind(Include ="â€¦")] sur les actions de modification et impliquent que la suppression d’une propriété de cette liste empêche les attaques par survalidation.</span><span class="sxs-lookup"><span data-stu-id="cec1e-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="cec1e-360">Toutefois, comme décrit ci-dessus, cette approche ne fonctionne pas comme prévu et réinitialise à la place des données dans les propriétés tootheir hello omis par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-360">However, as described above, that approach does not work as intended and instead will reset any data in hello omitted properties tootheir default values.</span></span></li><li><span data-ttu-id="cec1e-361">**Pour les opérations de création, des mises en garde utilisent-elles [Bind(Include ="â€¦")] au lieu de modèles de liaison distincts ? -** Oui.</span><span class="sxs-lookup"><span data-stu-id="cec1e-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="cec1e-362">Tout d’abord, cette approche ne fonctionne pas pour les scénarios de modification, qui nécessitent le maintien de deux approches distinctes afin de limiter toutes les vulnérabilités de survalidation.</span><span class="sxs-lookup"><span data-stu-id="cec1e-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="cec1e-363">Séparation des responsabilités entre la forme hello utilisé pour la forme d’entrée et hello utilisateur utilisée pour la persistance, appliquent des modèles de la deuxième liaison quelque chose [lier (Include = "¦ de €â »)] ne fait pas.</span><span class="sxs-lookup"><span data-stu-id="cec1e-363">Second, separate binding models enforce separation of concerns between hello shape used for user input and hello shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="cec1e-364">Enfin, notez que [lier (Include = « ¦ de €â »)] peut uniquement gérer les propriétés de niveau supérieur ; Vous ne peut pas autoriser uniquement les parties des sous-propriétés (par exemple, « Details.Name ») dans l’attribut de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in hello attribute.</span></span> <span data-ttu-id="cec1e-365">Enfin et, éventuellement, plus important encore, à l’aide de [lier (Include = "¦ de €â »)] ajoute une étape supplémentaire qui doit être mémorisée n’importe quelle classe hello de temps utilisée pour la liaison de modèle.</span><span class="sxs-lookup"><span data-stu-id="cec1e-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time hello class is used for model binding.</span></span> <span data-ttu-id="cec1e-366">Si une méthode d’action lie directement des classes de données toohello et oublie tooinclude un [lier (Include = « ¦ d’â€ »)] attribut, il peut être vulnérable tooover-validation attaques, par conséquent, hello [lier (Include = « ¦ d’â€ »)] approche est un peu moins sécurisée par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-366">If a new action method binds toohello data class directly and forgets tooinclude a [Bind(Include ="â€¦")] attribute, it can be vulnerable tooover-posting attacks, so hello [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="cec1e-367">Si vous utilisez [lier (Include = "¦ de €â »)], veillez à toujours tooremember toospecify il chaque fois que vos classes de données s’affichent en tant que paramètres de méthode d’action.</span><span class="sxs-lookup"><span data-stu-id="cec1e-367">If you use [Bind(Include ="â€¦")], take care always tooremember toospecify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="cec1e-368">**Des opérations de création, ce que sur l’intégration de hello [lier (Include = « ¦ de €â »)] l’attribut sur la classe de modèle hello elle-même ? Ne pas cette approche éviter hello besoin tooremember mise hello attribut sur chaque méthode d’action ? -** Cette approche fonctionne dans certains cas.</span><span class="sxs-lookup"><span data-stu-id="cec1e-368">**For Create operations, what about putting hello [Bind(Include ="â€¦")] attribute on hello model class itself? Does not this approach avoid hello need tooremember putting hello attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="cec1e-369">À l’aide de [lier (Include = « ¦ de €â »)] sur le type de modèle hello lui-même (et non sur les paramètres d’action à l’aide de cette classe), éviter Bonjour besoin tooremember tooinclude Bonjour [lier (Include = « ¦ de €â »)] l’attribut sur chaque méthode d’action.</span><span class="sxs-lookup"><span data-stu-id="cec1e-369">Using [Bind(Include ="â€¦")] on hello model type itself (rather than on action parameters using this class), does avoid hello need tooremember tooinclude hello [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="cec1e-370">Utilisation efficace des attributs de hello directement sur la classe hello crée une surface d’exposition distincte de cette classe pour à des fins de liaison de modèle.</span><span class="sxs-lookup"><span data-stu-id="cec1e-370">Using hello attribute directly on hello class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="cec1e-371">Toutefois, cette approche ne permet qu’une seule forme de liaison de modèle par classe de modèle.</span><span class="sxs-lookup"><span data-stu-id="cec1e-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="cec1e-372">Si une méthode d’action doit tooallow liaison de modèle d’un champ (par exemple, un administrateur uniquement action qui met à jour des rôles d’utilisateur) et autres actions doivent tooprevent liaison de modèle de ce champ, cette approche ne fonctionnera pas.</span><span class="sxs-lookup"><span data-stu-id="cec1e-372">If one action method needs tooallow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need tooprevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="cec1e-373">Chaque classe peut avoir qu’une seule forme de liaison de modèle ; Si des actions différentes doivent les formes de liaison de modèle différent, ils doivent toorepresent ces formes à l’aide de deux classes de liaison de modèle distinct de séparer ou séparent [lier (Include = "¦ de €â »)] attributs sur les méthodes d’action hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need toorepresent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on hello action methods.</span></span></li><li><span data-ttu-id="cec1e-374">**Ce que sont les modèles de liaison ? Sont qu'elles hello identique à afficher les modèles ? -** Ce sont deux concepts connexes.</span><span class="sxs-lookup"><span data-stu-id="cec1e-374">**What are binding models? Are they hello same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="cec1e-375">terme de Hello tooa classe de modèle utilisé dans une action fait référence au modèle de liaison est la liste de paramètres (forme hello passé à partir de la méthode d’action MVC modèle liaison toohello).</span><span class="sxs-lookup"><span data-stu-id="cec1e-375">hello term binding model refers tooa model class used in an action is parameter list (hello shape passed from MVC model binding toohello action method).</span></span> <span data-ttu-id="cec1e-376">modèle d’affichage Hello terme fait référence tooa classe de modèle passée à partir d’une vue de tooa méthode action.</span><span class="sxs-lookup"><span data-stu-id="cec1e-376">hello term view model refers tooa model class passed from an action method tooa view.</span></span> <span data-ttu-id="cec1e-377">À l’aide d’un modèle spécifique à la vue est une approche commune pour passer des données à partir d’une vue de tooa méthode action.</span><span class="sxs-lookup"><span data-stu-id="cec1e-377">Using a view-specific model is a common approach for passing data from an action method tooa view.</span></span> <span data-ttu-id="cec1e-378">Souvent, cette forme peut également être utilisée pour la liaison de modèle et le modèle de vue hello terme peut être hello toorefer utilisés même modèle utilisé dans les deux emplacements.</span><span class="sxs-lookup"><span data-stu-id="cec1e-378">Often, this shape is also suitable for model binding, and hello term view model can be used toorefer hello same model used in both places.</span></span> <span data-ttu-id="cec1e-379">toobe précise, cette procédure traite spécifiquement sur la liaison de modèles, en mettant l’accent sur la forme hello passé toohello action, ce qui est important pour des raisons d’attribution en masse.</span><span class="sxs-lookup"><span data-stu-id="cec1e-379">toobe precise, this procedure talks specifically about binding models, focusing on hello shape passed toohello action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="cec1e-380"><a id="rendering"></a>Encoder toorendering préalable de sortie web non fiable</span><span class="sxs-lookup"><span data-stu-id="cec1e-380"><a id="rendering"></a>Encode untrusted web output prior toorendering</span></span>

| <span data-ttu-id="cec1e-381">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-381">Title</span></span>                   | <span data-ttu-id="cec1e-382">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-383">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-383">**Component**</span></span>               | <span data-ttu-id="cec1e-384">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-384">Web Application</span></span> | 
| <span data-ttu-id="cec1e-385">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-385">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-386">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-386">Build</span></span> |  
| <span data-ttu-id="cec1e-387">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-387">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-388">Générique, Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="cec1e-389">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-389">**Attributes**</span></span>              | <span data-ttu-id="cec1e-390">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-390">N/A</span></span>  |
| <span data-ttu-id="cec1e-391">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-391">**References**</span></span>              | <span data-ttu-id="cec1e-392">[Comment tooprevent Cross-site scripting dans ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (XSS) prévention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="cec1e-392">[How tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="cec1e-393">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-393">**Steps**</span></span> | <span data-ttu-id="cec1e-394">Les scripts entre sites (XSS généralement abrégé) sont un vecteur d’attaque pour les services en ligne ou n’importe quel/composant d’application qui consomme l’entrée à partir du web de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from hello web.</span></span> <span data-ttu-id="cec1e-395">Vulnérabilités XSS peuvent permettre à un attaquant tooexecute script sur l’ordinateur d’un autre utilisateur via une application web vulnérable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-395">XSS vulnerabilities may allow an attacker tooexecute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="cec1e-396">Les scripts malveillants vous pouvez les cookies utilisés toosteal et sinon falsifier un ordinateur cible via JavaScript.</span><span class="sxs-lookup"><span data-stu-id="cec1e-396">Malicious scripts can be used toosteal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="cec1e-397">Pour empêcher les scripts intersites, il faut procéder à la validation des entrées utilisateur, en s’assurant que la forme et l’encodage sont corrects avant le rendu sur une page web.</span><span class="sxs-lookup"><span data-stu-id="cec1e-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="cec1e-398">La validation des entrées et l’encodage des sorties peuvent se faire au moyen de Web Protection Library.</span><span class="sxs-lookup"><span data-stu-id="cec1e-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="cec1e-399">Pour du code managé (C\#, VB.net, etc.), utilisez une ou plus approprié de méthodes d’encodage à partir de hello bibliothèque Web Protection (Anti-XSS), selon le contexte hello où obtient explicitée hello l’entrée d’utilisateur :</span><span class="sxs-lookup"><span data-stu-id="cec1e-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from hello Web Protection (Anti-XSS) Library, depending on hello context where hello user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="cec1e-400">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="cec1e-401"><a id="typemodel"></a>Procéder à la validation et au filtrage des entrées sur les propriétés de modèle de tous types de chaînes</span><span class="sxs-lookup"><span data-stu-id="cec1e-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="cec1e-402">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-402">Title</span></span>                   | <span data-ttu-id="cec1e-403">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-404">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-404">**Component**</span></span>               | <span data-ttu-id="cec1e-405">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-405">Web Application</span></span> | 
| <span data-ttu-id="cec1e-406">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-406">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-407">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-407">Build</span></span> |  
| <span data-ttu-id="cec1e-408">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-408">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-409">Générique, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="cec1e-410">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-410">**Attributes**</span></span>              | <span data-ttu-id="cec1e-411">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-411">N/A</span></span>  |
| <span data-ttu-id="cec1e-412">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-412">**References**</span></span>              | <span data-ttu-id="cec1e-413">[Adding Validation (Ajout d’une validation)](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application (Validation des données de modèle dans une application MVC)](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Principes directeurs pour vos applications ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="cec1e-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="cec1e-414">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-414">**Steps**</span></span> | <p><span data-ttu-id="cec1e-415">Tous les paramètres d’entrée hello doivent être validées avant d’être utilisées dans hello application tooensure que l’application hello est sauvegardée sur les entrées utilisateur malveillant.</span><span class="sxs-lookup"><span data-stu-id="cec1e-415">All hello input parameters must be validated before they are used in hello application tooensure that hello application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="cec1e-416">Valider les valeurs d’entrée hello côté serveur avec une stratégie de contrôle d’autorisation à l’aide de validations d’expression régulière.</span><span class="sxs-lookup"><span data-stu-id="cec1e-416">Validate hello input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="cec1e-417">Unsanitized des entrées d’utilisateur / paramètres passés toohello méthodes peuvent entraîner les vulnérabilités d’injection du code.</span><span class="sxs-lookup"><span data-stu-id="cec1e-417">Unsanitized user inputs / parameters passed toohello methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="cec1e-418">Pour les applications web, les points d’entrée peuvent également inclure des champs de formulaire, des chaînes de requête, des cookies, des en-têtes HTTP et des paramètres de service web.</span><span class="sxs-lookup"><span data-stu-id="cec1e-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="cec1e-419">Hello les contrôles de validation d’entrée suivant doivent être effectuées sur la liaison de modèle :</span><span class="sxs-lookup"><span data-stu-id="cec1e-419">hello following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="cec1e-420">Propriétés du modèle Hello doivent être annotées avec l’annotation RegularExpression, permettant d’accepter les caractères autorisés et la longueur maximale autorisée</span><span class="sxs-lookup"><span data-stu-id="cec1e-420">hello model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="cec1e-421">les méthodes de contrôleur Hello doivent effectuer ModelState validité</span><span class="sxs-lookup"><span data-stu-id="cec1e-421">hello controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="cec1e-422"><a id="richtext"></a>Les champs de formulaire acceptant tous les caractères, par exemple dans un éditeur de texte enrichi, doivent être nettoyés</span><span class="sxs-lookup"><span data-stu-id="cec1e-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="cec1e-423">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-423">Title</span></span>                   | <span data-ttu-id="cec1e-424">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-425">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-425">**Component**</span></span>               | <span data-ttu-id="cec1e-426">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-426">Web Application</span></span> | 
| <span data-ttu-id="cec1e-427">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-427">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-428">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-428">Build</span></span> |  
| <span data-ttu-id="cec1e-429">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-429">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-430">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-430">Generic</span></span> |
| <span data-ttu-id="cec1e-431">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-431">**Attributes**</span></span>              | <span data-ttu-id="cec1e-432">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-432">N/A</span></span>  |
| <span data-ttu-id="cec1e-433">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-433">**References**</span></span>              | <span data-ttu-id="cec1e-434">[Encode Unsafe Input (Encodage d’entrées à risque)](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="cec1e-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="cec1e-435">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-435">**Steps**</span></span> | <p><span data-ttu-id="cec1e-436">Identifier toutes les balises que vous souhaitez toouse statique.</span><span class="sxs-lookup"><span data-stu-id="cec1e-436">Identify all static markup tags that you want toouse.</span></span> <span data-ttu-id="cec1e-437">Une pratique courante est mise en forme des éléments de toosafe HTML, tels que des toorestrict `<b>` (gras) et `<i>` (en italique).</span><span class="sxs-lookup"><span data-stu-id="cec1e-437">A common practice is toorestrict formatting toosafe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="cec1e-438">Avant d’écrire des données hello, encoder en HTML il.</span><span class="sxs-lookup"><span data-stu-id="cec1e-438">Before writing hello data, HTML-encode it.</span></span> <span data-ttu-id="cec1e-439">Cela rend n’importe quel script malveillant sécurisé en lui faisant toobe géré comme du texte, pas comme du code exécutable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-439">This makes any malicious script safe by causing it toobe handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="cec1e-440">Désactiver la demande ASP.NET validation en ajoutant des hello hello ValidateRequest = toohello d’attribut « false » directive @ Page</span><span class="sxs-lookup"><span data-stu-id="cec1e-440">Disable ASP.NET request validation by hello adding hello ValidateRequest="false" attribute toohello @ Page directive</span></span></li><li><span data-ttu-id="cec1e-441">Encoder l’entrée de chaîne hello avec la méthode de HtmlEncode hello</span><span class="sxs-lookup"><span data-stu-id="cec1e-441">Encode hello string input with hello HtmlEncode method</span></span></li><li><span data-ttu-id="cec1e-442">Utiliser un StringBuilder et l’appel de ses tooselectively de la méthode Replace supprimer hello encodage sur les éléments de hello HTML que vous souhaitez toopermit</span><span class="sxs-lookup"><span data-stu-id="cec1e-442">Use a StringBuilder and call its Replace method tooselectively remove hello encoding on hello HTML elements that you want toopermit</span></span></li></ol><p><span data-ttu-id="cec1e-443">Hello hello dans page références désactive la validation de la demande ASP.NET en définissant `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="cec1e-443">hello page-in hello references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="cec1e-444">Il encode au format HTML de hello d’entrée et permet de manière sélective hello `<b>` et `<i>` également une bibliothèque .NET pour le nettoyage du HTML peut également être utilisée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-444">It HTML-encodes hello input and selectively allows hello `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="cec1e-445">HtmlSanitizer est une bibliothèque .NET pour le nettoyage des fragments HTML et les constructions qui peuvent entraîner des attaques de tooXSS des documents.</span><span class="sxs-lookup"><span data-stu-id="cec1e-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead tooXSS attacks.</span></span> <span data-ttu-id="cec1e-446">Il utilise AngleSharp tooparse, manipuler et effectuer le rendu HTML et CSS.</span><span class="sxs-lookup"><span data-stu-id="cec1e-446">It uses AngleSharp tooparse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="cec1e-447">HtmlSanitizer peut être installé comme un package NuGet et hello l’entrée d’utilisateur peut être passée aux méthodes le nettoyage du code HTML ou CSS, le cas échéant, sur le côté du serveur hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-447">HtmlSanitizer can be installed as a NuGet package, and hello user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on hello server side.</span></span> <span data-ttu-id="cec1e-448">Dans le cadre du contrôle de sécurité, le nettoyage doit être envisagé uniquement en dernier recours.</span><span class="sxs-lookup"><span data-stu-id="cec1e-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="cec1e-449">La validation des entrées et l’encodage des sorties sont considérés comme de meilleurs contrôles de sécurité.</span><span class="sxs-lookup"><span data-stu-id="cec1e-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="cec1e-450"><a id="inbuilt-encode"></a>N’affectez pas toosinks d’éléments DOM qui n’ont pas de codage intégrés</span><span class="sxs-lookup"><span data-stu-id="cec1e-450"><a id="inbuilt-encode"></a>Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="cec1e-451">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-451">Title</span></span>                   | <span data-ttu-id="cec1e-452">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-453">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-453">**Component**</span></span>               | <span data-ttu-id="cec1e-454">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-454">Web Application</span></span> | 
| <span data-ttu-id="cec1e-455">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-455">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-456">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-456">Build</span></span> |  
| <span data-ttu-id="cec1e-457">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-457">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-458">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-458">Generic</span></span> |
| <span data-ttu-id="cec1e-459">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-459">**Attributes**</span></span>              | <span data-ttu-id="cec1e-460">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-460">N/A</span></span>  |
| <span data-ttu-id="cec1e-461">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-461">**References**</span></span>              | <span data-ttu-id="cec1e-462">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-462">N/A</span></span>  |
| <span data-ttu-id="cec1e-463">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-463">**Steps**</span></span> | <span data-ttu-id="cec1e-464">De nombreuses fonctions JavaScript ne procèdent pas à l’encodage par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="cec1e-465">Lorsque vous affectez des éléments tooDOM d’entrée non fiable par le biais de ces fonctions, peut entraîner entre les exécutions de script (XSS) de site.</span><span class="sxs-lookup"><span data-stu-id="cec1e-465">When assigning untrusted input tooDOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="cec1e-466">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-466">Example</span></span>
<span data-ttu-id="cec1e-467">Voici quelques exemples non sécurisés :</span><span class="sxs-lookup"><span data-stu-id="cec1e-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="cec1e-468">N’utilisez pas `innerHtml`. Utilisez plutôt `innerText`.</span><span class="sxs-lookup"><span data-stu-id="cec1e-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="cec1e-469">De même, au lieu de `$("#elm").html()`, utilisez`$("#elm").text()`</span><span class="sxs-lookup"><span data-stu-id="cec1e-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="cec1e-470"><a id="redirect-safe"></a>Valider toutes les redirections au sein de l’application hello sont fermées ou terminées en toute sécurité</span><span class="sxs-lookup"><span data-stu-id="cec1e-470"><a id="redirect-safe"></a>Validate all redirects within hello application are closed or done safely</span></span>

| <span data-ttu-id="cec1e-471">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-471">Title</span></span>                   | <span data-ttu-id="cec1e-472">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-473">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-473">**Component**</span></span>               | <span data-ttu-id="cec1e-474">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-474">Web Application</span></span> | 
| <span data-ttu-id="cec1e-475">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-475">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-476">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-476">Build</span></span> |  
| <span data-ttu-id="cec1e-477">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-477">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-478">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-478">Generic</span></span> |
| <span data-ttu-id="cec1e-479">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-479">**Attributes**</span></span>              | <span data-ttu-id="cec1e-480">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-480">N/A</span></span>  |
| <span data-ttu-id="cec1e-481">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-481">**References**</span></span>              | [<span data-ttu-id="cec1e-482">Hello OAuth 2.0 Authorization Framework - redirecteurs ouvert</span><span class="sxs-lookup"><span data-stu-id="cec1e-482">hello OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="cec1e-483">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-483">**Steps**</span></span> | <p><span data-ttu-id="cec1e-484">Conception d’applications nécessitant l’emplacement de fourni par l’utilisateur tooa redirection doit limiter hello redirection possibles cibles tooa « sécurisée » liste prédéfinie de sites ou domaines.</span><span class="sxs-lookup"><span data-stu-id="cec1e-484">Application design requiring redirection tooa user-supplied location must constrain hello possible redirection targets tooa predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="cec1e-485">Toutes les redirections dans une application hello doivent être fermé/safe.</span><span class="sxs-lookup"><span data-stu-id="cec1e-485">All redirects in hello application must be closed/safe.</span></span></p><p><span data-ttu-id="cec1e-486">toodo cela :</span><span class="sxs-lookup"><span data-stu-id="cec1e-486">toodo this:</span></span></p><ul><li><span data-ttu-id="cec1e-487">Identifiez toutes les redirections</span><span class="sxs-lookup"><span data-stu-id="cec1e-487">Identify all redirects</span></span></li><li><span data-ttu-id="cec1e-488">Implémentez une mesure de correction appropriée pour chaque redirection.</span><span class="sxs-lookup"><span data-stu-id="cec1e-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="cec1e-489">Les mesures de correction appropriées incluent la confirmation utilisateur ou les listes blanches de redirection.</span><span class="sxs-lookup"><span data-stu-id="cec1e-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="cec1e-490">Si un site web ou un service avec vulnérabilité par redirection ouverte utilise les fournisseurs d’identité Facebook/OAuth/OpenID, une personne malveillante peut voler le jeton d’ouverture de session d’un utilisateur et emprunter l’identité de cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="cec1e-491">Il s’agit d’un risque à prendre lors de l’utilisation de OAuth, qui est décrit dans la RFC 6749 « hello OAuth 2.0 Authorization Framework », Section 10.15 « ouvrir redirige » de la même façon, informations d’identification des utilisateurs peuvent être compromises par des attaques d’hameçonnage spear à l’aide de redirections ouvertes</span><span class="sxs-lookup"><span data-stu-id="cec1e-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "hello OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="cec1e-492"><a id="string-method"></a>Implémenter la validation des entrées sur tous les paramètres de type de chaîne acceptés par les méthodes de contrôleur</span><span class="sxs-lookup"><span data-stu-id="cec1e-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="cec1e-493">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-493">Title</span></span>                   | <span data-ttu-id="cec1e-494">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-495">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-495">**Component**</span></span>               | <span data-ttu-id="cec1e-496">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-496">Web Application</span></span> | 
| <span data-ttu-id="cec1e-497">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-497">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-498">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-498">Build</span></span> |  
| <span data-ttu-id="cec1e-499">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-499">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-500">Générique, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="cec1e-501">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-501">**Attributes**</span></span>              | <span data-ttu-id="cec1e-502">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-502">N/A</span></span>  |
| <span data-ttu-id="cec1e-503">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-503">**References**</span></span>              | <span data-ttu-id="cec1e-504">[Validating Model Data in an MVC Application (Validation des données de modèle dans une application MVC)](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Principes directeurs pour vos applications ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="cec1e-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="cec1e-505">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-505">**Steps**</span></span> | <span data-ttu-id="cec1e-506">Pour les méthodes qui acceptent uniquement un type de données primitif, et non les modèles en tant qu’argument, la validation des entrées doit être effectuée à l’aide d’expressions régulières.</span><span class="sxs-lookup"><span data-stu-id="cec1e-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="cec1e-507">Dans le cas présent, Regex.IsMatch doit être utilisé avec un modèle d’expression régulière valide.</span><span class="sxs-lookup"><span data-stu-id="cec1e-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="cec1e-508">Si hello entrée ne correspond pas à hello d’Expression régulière spécifiée, contrôle ne doit pas poursuivre et un avertissement adéquat concernant l’échec de la validation doit être affiché.</span><span class="sxs-lookup"><span data-stu-id="cec1e-508">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="cec1e-509"><a id="dos-expression"></a>Définir le délai d’expiration de la limite supérieure pour le traitement DoS tooprevent en raison des expressions régulières toobad d’expressions régulières</span><span class="sxs-lookup"><span data-stu-id="cec1e-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>

| <span data-ttu-id="cec1e-510">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-510">Title</span></span>                   | <span data-ttu-id="cec1e-511">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-512">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-512">**Component**</span></span>               | <span data-ttu-id="cec1e-513">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-513">Web Application</span></span> | 
| <span data-ttu-id="cec1e-514">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-514">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-515">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-515">Build</span></span> |  
| <span data-ttu-id="cec1e-516">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-516">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-517">Générique, Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="cec1e-518">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-518">**Attributes**</span></span>              | <span data-ttu-id="cec1e-519">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-519">N/A</span></span>  |
| <span data-ttu-id="cec1e-520">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-520">**References**</span></span>              | [<span data-ttu-id="cec1e-521">Propriété DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="cec1e-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="cec1e-522">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-522">**Steps**</span></span> | <span data-ttu-id="cec1e-523">tooensure attaques par déni de service contre mal créé des expressions régulières qui entraînent un grand nombre de la rétroaction, définir le délai d’attente de hello global par défaut.</span><span class="sxs-lookup"><span data-stu-id="cec1e-523">tooensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set hello global default timeout.</span></span> <span data-ttu-id="cec1e-524">Si le temps de traitement hello prend plus de temps que hello défini par la limite supérieure, elle lève une exception de délai d’attente.</span><span class="sxs-lookup"><span data-stu-id="cec1e-524">If hello processing time takes longer than hello defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="cec1e-525">Si rien n’est configuré, délai d’attente hello serait infinie.</span><span class="sxs-lookup"><span data-stu-id="cec1e-525">If nothing is configured, hello timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="cec1e-526">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-526">Example</span></span>
<span data-ttu-id="cec1e-527">Par exemple, hello de configuration suivant lève une RegexMatchTimeoutException, si le traitement de hello prend plus de 5 secondes :</span><span class="sxs-lookup"><span data-stu-id="cec1e-527">For example, hello following configuration will throw a RegexMatchTimeoutException, if hello processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="cec1e-528"><a id="html-razor"></a>Éviter l’utilisation de Html.Raw dans les vues Razor</span><span class="sxs-lookup"><span data-stu-id="cec1e-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="cec1e-529">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-529">Title</span></span>                   | <span data-ttu-id="cec1e-530">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-531">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-531">**Component**</span></span>               | <span data-ttu-id="cec1e-532">Application web</span><span class="sxs-lookup"><span data-stu-id="cec1e-532">Web Application</span></span> | 
| <span data-ttu-id="cec1e-533">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-533">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-534">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-534">Build</span></span> |  
| <span data-ttu-id="cec1e-535">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-535">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-536">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="cec1e-537">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-537">**Attributes**</span></span>              | <span data-ttu-id="cec1e-538">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-538">N/A</span></span>  |
| <span data-ttu-id="cec1e-539">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-539">**References**</span></span>              | <span data-ttu-id="cec1e-540">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-540">N/A</span></span>  |
| <span data-ttu-id="cec1e-541">Étape</span><span class="sxs-lookup"><span data-stu-id="cec1e-541">Step</span></span> | <span data-ttu-id="cec1e-542">ASP.Net WebPages (Razor) procède à un encodage HTML automatique.</span><span class="sxs-lookup"><span data-stu-id="cec1e-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="cec1e-543">Toutes les chaînes imprimées par des pépites, ou nuggets, de code (blocs @) sont automatiquement encodées au format HTML.</span><span class="sxs-lookup"><span data-stu-id="cec1e-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="cec1e-544">Toutefois, lorsque la méthode `HtmlHelper.Raw` est appelée, elle renvoie un balisage qui n’est pas encodé au format HTML.</span><span class="sxs-lookup"><span data-stu-id="cec1e-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="cec1e-545">Si `Html.Raw()` méthode d’assistance est utilisé, il ignore hello encodage protection automatique qui fournit de Razor.</span><span class="sxs-lookup"><span data-stu-id="cec1e-545">If `Html.Raw()` helper method is used, it bypasses hello automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="cec1e-546">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-546">Example</span></span>
<span data-ttu-id="cec1e-547">Voici un exemple non sécurisé :</span><span class="sxs-lookup"><span data-stu-id="cec1e-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="cec1e-548">N’utilisez pas `Html.Raw()` sauf si vous avez besoin toodisplay balisage.</span><span class="sxs-lookup"><span data-stu-id="cec1e-548">Do not use `Html.Raw()` unless you need toodisplay markup.</span></span> <span data-ttu-id="cec1e-549">Cette méthode n’effectue pas de codage implicite en sortie.</span><span class="sxs-lookup"><span data-stu-id="cec1e-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="cec1e-550">Utilisez d’autres aides ASP.NET, comme `@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="cec1e-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="cec1e-551"><a id="stored-proc"></a>Ne pas utiliser les requêtes dynamiques dans les procédures stockées</span><span class="sxs-lookup"><span data-stu-id="cec1e-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="cec1e-552">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-552">Title</span></span>                   | <span data-ttu-id="cec1e-553">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-554">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-554">**Component**</span></span>               | <span data-ttu-id="cec1e-555">Base de données</span><span class="sxs-lookup"><span data-stu-id="cec1e-555">Database</span></span> | 
| <span data-ttu-id="cec1e-556">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-556">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-557">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-557">Build</span></span> |  
| <span data-ttu-id="cec1e-558">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-558">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-559">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-559">Generic</span></span> |
| <span data-ttu-id="cec1e-560">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-560">**Attributes**</span></span>              | <span data-ttu-id="cec1e-561">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-561">N/A</span></span>  |
| <span data-ttu-id="cec1e-562">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-562">**References**</span></span>              | <span data-ttu-id="cec1e-563">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-563">N/A</span></span>  |
| <span data-ttu-id="cec1e-564">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-564">**Steps**</span></span> | <p><span data-ttu-id="cec1e-565">Une attaque d’injection SQL exploite les vulnérabilités de validation d’entrée toorun des commandes arbitraires dans la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-565">A SQL injection attack exploits vulnerabilities in input validation toorun arbitrary commands in hello database.</span></span> <span data-ttu-id="cec1e-566">Il peut se produire lorsque votre application utilise tooconstruct d’entrée dynamique tooaccess d’instructions SQL hello de base de données.</span><span class="sxs-lookup"><span data-stu-id="cec1e-566">It can occur when your application uses input tooconstruct dynamic SQL statements tooaccess hello database.</span></span> <span data-ttu-id="cec1e-567">Cela peut également se produire si votre code utilise des procédures stockées contenant des chaînes transmises qui comportent des entrées utilisateur brutes.</span><span class="sxs-lookup"><span data-stu-id="cec1e-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="cec1e-568">À l’aide de hello attaque par injection SQL, les intrus hello peuvent exécuter des commandes arbitraires dans la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-568">Using hello SQL injection attack, hello attacker can execute arbitrary commands in hello database.</span></span> <span data-ttu-id="cec1e-569">Toutes les instructions SQL (y compris les instructions SQL hello dans les procédures stockées) doivent être paramétrables.</span><span class="sxs-lookup"><span data-stu-id="cec1e-569">All SQL statements (including hello SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="cec1e-570">Instructions SQL paramétrées accepte les caractères ayant tooSQL une signification particulière (par exemple, le guillemet simple) sans problème, car ils sont fortement typées.</span><span class="sxs-lookup"><span data-stu-id="cec1e-570">Parameterized SQL statements will accept characters that have special meaning tooSQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="cec1e-571">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-571">Example</span></span>
<span data-ttu-id="cec1e-572">Voici un exemple de procédure stockée dynamique non sécurisée :</span><span class="sxs-lookup"><span data-stu-id="cec1e-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="cec1e-573">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-573">Example</span></span>
<span data-ttu-id="cec1e-574">Voici hello même procédure stockée a été implémentée en toute sécurité :</span><span class="sxs-lookup"><span data-stu-id="cec1e-574">Following is hello same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="cec1e-575"><a id="validation-api"></a>S’assurer que la validation du modèle est effectuée sur les méthodes d’API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="cec1e-576">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-576">Title</span></span>                   | <span data-ttu-id="cec1e-577">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-578">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-578">**Component**</span></span>               | <span data-ttu-id="cec1e-579">API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-579">Web API</span></span> | 
| <span data-ttu-id="cec1e-580">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-580">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-581">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-581">Build</span></span> |  
| <span data-ttu-id="cec1e-582">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-582">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-583">MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="cec1e-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="cec1e-584">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-584">**Attributes**</span></span>              | <span data-ttu-id="cec1e-585">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-585">N/A</span></span>  |
| <span data-ttu-id="cec1e-586">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-586">**References**</span></span>              | [<span data-ttu-id="cec1e-587">Model Validation in ASP.NET Web API (Validation du modèle dans l’API Web ASP.NET)</span><span class="sxs-lookup"><span data-stu-id="cec1e-587">Model Validation in ASP.NET Web API </span></span>](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) |
| <span data-ttu-id="cec1e-588">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-588">**Steps**</span></span> | <span data-ttu-id="cec1e-589">Lorsqu’un client envoie des API web de tooa données, ce sont des données de hello toovalidate obligatoire avant de procéder à un traitement.</span><span class="sxs-lookup"><span data-stu-id="cec1e-589">When a client sends data tooa web API, it is mandatory toovalidate hello data before doing any processing.</span></span> <span data-ttu-id="cec1e-590">Pour les API Web ASP.NET qui acceptent des modèles en tant qu’entrée, utiliser des annotations de données sur les règles de validation de modèles tooset sur les propriétés hello du modèle de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-590">For ASP.NET Web APIs which accept models as input, use data annotations on models tooset validation rules on hello properties of hello model.</span></span>|

### <a name="example"></a><span data-ttu-id="cec1e-591">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-591">Example</span></span>
<span data-ttu-id="cec1e-592">Hello suivant de code montre hello même :</span><span class="sxs-lookup"><span data-stu-id="cec1e-592">hello following code demonstrates hello same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="cec1e-593">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-593">Example</span></span>
<span data-ttu-id="cec1e-594">Dans la méthode d’action hello de contrôleurs d’API hello, la validité du modèle de hello a toobe vérifié de façon explicite comme indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="cec1e-594">In hello action method of hello API controllers, validity of hello model has toobe explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with hello product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="cec1e-595"><a id="string-api"></a>Implémenter la validation des entrées sur tous les paramètres de type de chaîne acceptés par les méthodes d’API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="cec1e-596">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-596">Title</span></span>                   | <span data-ttu-id="cec1e-597">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-598">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-598">**Component**</span></span>               | <span data-ttu-id="cec1e-599">API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-599">Web API</span></span> | 
| <span data-ttu-id="cec1e-600">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-600">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-601">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-601">Build</span></span> |  
| <span data-ttu-id="cec1e-602">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-602">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-603">Générique, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="cec1e-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="cec1e-604">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-604">**Attributes**</span></span>              | <span data-ttu-id="cec1e-605">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-605">N/A</span></span>  |
| <span data-ttu-id="cec1e-606">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-606">**References**</span></span>              | <span data-ttu-id="cec1e-607">[Validating Model Data in an MVC Application (Validation des données de modèle dans une application MVC)](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Principes directeurs pour vos applications ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="cec1e-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="cec1e-608">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-608">**Steps**</span></span> | <span data-ttu-id="cec1e-609">Pour les méthodes qui acceptent uniquement un type de données primitif, et non les modèles en tant qu’argument, la validation des entrées doit être effectuée à l’aide d’expressions régulières.</span><span class="sxs-lookup"><span data-stu-id="cec1e-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="cec1e-610">Dans le cas présent, Regex.IsMatch doit être utilisé avec un modèle d’expression régulière valide.</span><span class="sxs-lookup"><span data-stu-id="cec1e-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="cec1e-611">Si hello entrée ne correspond pas à hello d’Expression régulière spécifiée, contrôle ne doit pas poursuivre et un avertissement adéquat concernant l’échec de la validation doit être affiché.</span><span class="sxs-lookup"><span data-stu-id="cec1e-611">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="cec1e-612"><a id="typesafe-api"></a>S’assurer que les paramètres de type sécurisé sont utilisés dans une API Web pour l’accès aux données</span><span class="sxs-lookup"><span data-stu-id="cec1e-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="cec1e-613">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-613">Title</span></span>                   | <span data-ttu-id="cec1e-614">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-615">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-615">**Component**</span></span>               | <span data-ttu-id="cec1e-616">API Web</span><span class="sxs-lookup"><span data-stu-id="cec1e-616">Web API</span></span> | 
| <span data-ttu-id="cec1e-617">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-617">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-618">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-618">Build</span></span> |  
| <span data-ttu-id="cec1e-619">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-619">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-620">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-620">Generic</span></span> |
| <span data-ttu-id="cec1e-621">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-621">**Attributes**</span></span>              | <span data-ttu-id="cec1e-622">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-622">N/A</span></span>  |
| <span data-ttu-id="cec1e-623">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-623">**References**</span></span>              | <span data-ttu-id="cec1e-624">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-624">N/A</span></span>  |
| <span data-ttu-id="cec1e-625">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-625">**Steps**</span></span> | <p><span data-ttu-id="cec1e-626">Si vous utilisez la collection de paramètres hello, SQL traite hello entrée est comme une valeur littérale et non en tant que code exécutable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-626">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="cec1e-627">collection de paramètres de Hello peut être tooenforce utilisé les contraintes de type et la longueur des données d’entrée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-627">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="cec1e-628">Les valeurs en dehors de la plage de hello déclenchent une exception.</span><span class="sxs-lookup"><span data-stu-id="cec1e-628">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="cec1e-629">Si les paramètres SQL de type sécurisé ne sont pas utilisés, des personnes malveillantes peuvent être en mesure de tooexecute les attaques par injection sont incorporés dans l’entrée de hello non filtré.</span><span class="sxs-lookup"><span data-stu-id="cec1e-629">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="cec1e-630">Utiliser les paramètres de type sécurisé lors de la construction SQL interroge tooavoid possibles attaques par injection SQL qui peuvent se produire avec des entrées non filtrées.</span><span class="sxs-lookup"><span data-stu-id="cec1e-630">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="cec1e-631">Vous pouvez utiliser des paramètres de type sécurisé avec des procédures stockées et des instructions SQL dynamiques.</span><span class="sxs-lookup"><span data-stu-id="cec1e-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="cec1e-632">Les paramètres sont traités comme des valeurs littérales par base de données hello et non en tant que code exécutable.</span><span class="sxs-lookup"><span data-stu-id="cec1e-632">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="cec1e-633">Le type et la longueur sont également vérifiés pour les paramètres.</span><span class="sxs-lookup"><span data-stu-id="cec1e-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="cec1e-634">Exemple</span><span class="sxs-lookup"><span data-stu-id="cec1e-634">Example</span></span>
<span data-ttu-id="cec1e-635">Hello de code suivant montre comment toouse paramètres de type sécurisés avec hello SqlParameterCollection lors de l’appel d’une procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="cec1e-635">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="cec1e-636">Bonjour précédant l’exemple de code, la valeur d’entrée de hello ne peut pas être supérieure à 11 caractères.</span><span class="sxs-lookup"><span data-stu-id="cec1e-636">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="cec1e-637">Si les données de salutation n’est pas conforme toohello type ou la longueur définie par le paramètre hello, hello SqlParameter, classe lève une exception.</span><span class="sxs-lookup"><span data-stu-id="cec1e-637">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="cec1e-638"><a id="sql-docdb"></a>Utiliser des requêtes SQL paramétrables pour Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="cec1e-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="cec1e-639">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-639">Title</span></span>                   | <span data-ttu-id="cec1e-640">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-641">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-641">**Component**</span></span>               | <span data-ttu-id="cec1e-642">Azure Document DB</span><span class="sxs-lookup"><span data-stu-id="cec1e-642">Azure Document DB</span></span> | 
| <span data-ttu-id="cec1e-643">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-643">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-644">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-644">Build</span></span> |  
| <span data-ttu-id="cec1e-645">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-645">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-646">Générique</span><span class="sxs-lookup"><span data-stu-id="cec1e-646">Generic</span></span> |
| <span data-ttu-id="cec1e-647">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-647">**Attributes**</span></span>              | <span data-ttu-id="cec1e-648">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-648">N/A</span></span>  |
| <span data-ttu-id="cec1e-649">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-649">**References**</span></span>              | [<span data-ttu-id="cec1e-650">Announcing SQL Parameterization in DocumentDB (Annonce de paramétrage SQL dans DocumentDB)</span><span class="sxs-lookup"><span data-stu-id="cec1e-650">Announcing SQL Parameterization in DocumentDB</span></span>](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) |
| <span data-ttu-id="cec1e-651">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-651">**Steps**</span></span> | <span data-ttu-id="cec1e-652">Bien que DocumentDB prenne uniquement en charge les requêtes en lecture seule, l’injection de code SQL reste possible si les requêtes sont construites par concaténation avec les entrées utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="cec1e-653">Il est possible pour un toodata de l’accès utilisateur toogain qu’ils ne doivent pas être y accéder à hello même collection, en créant des requêtes SQL malveillantes.</span><span class="sxs-lookup"><span data-stu-id="cec1e-653">It might be possible for a user toogain access toodata they shouldn’t be accessing within hello same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="cec1e-654">Utilisez des requêtes SQL paramétrables si les requêtes sont créées à partir d’entrées utilisateur.</span><span class="sxs-lookup"><span data-stu-id="cec1e-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="cec1e-655"><a id="schema-binding"></a>Validation des entrées WCF par le biais de la liaison de schéma</span><span class="sxs-lookup"><span data-stu-id="cec1e-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="cec1e-656">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-656">Title</span></span>                   | <span data-ttu-id="cec1e-657">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-658">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-658">**Component**</span></span>               | <span data-ttu-id="cec1e-659">WCF</span><span class="sxs-lookup"><span data-stu-id="cec1e-659">WCF</span></span> | 
| <span data-ttu-id="cec1e-660">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-660">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-661">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-661">Build</span></span> |  
| <span data-ttu-id="cec1e-662">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-662">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-663">Générique, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="cec1e-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="cec1e-664">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-664">**Attributes**</span></span>              | <span data-ttu-id="cec1e-665">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-665">N/A</span></span>  |
| <span data-ttu-id="cec1e-666">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-666">**References**</span></span>              | [<span data-ttu-id="cec1e-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="cec1e-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="cec1e-668">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-668">**Steps**</span></span> | <p><span data-ttu-id="cec1e-669">Un manque de validation entraîne toodifferent type d’attaques par injection de code.</span><span class="sxs-lookup"><span data-stu-id="cec1e-669">Lack of validation leads toodifferent type injection attacks.</span></span></p><p><span data-ttu-id="cec1e-670">Validation de message représente une ligne de défense dans la protection de votre application WCF hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-670">Message validation represents one line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="cec1e-671">Avec cette approche, vous validez des messages à l’aide des opérations de service WCF schémas tooprotect contre une attaque par un client malveillant.</span><span class="sxs-lookup"><span data-stu-id="cec1e-671">With this approach, you validate messages using schemas tooprotect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="cec1e-672">Valider tous les messages reçus par le client de hello tooprotect hello client contre les attaques par un service malveillant.</span><span class="sxs-lookup"><span data-stu-id="cec1e-672">Validate all messages received by hello client tooprotect hello client from attack by a malicious service.</span></span> <span data-ttu-id="cec1e-673">Validation de message rend possible toovalidate messages quand opérations consomment des contrats de message ou des contrats de données, ce qui ne peut pas être effectuées à l’aide de la validation de paramètre.</span><span class="sxs-lookup"><span data-stu-id="cec1e-673">Message validation makes it possible toovalidate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="cec1e-674">Validation des messages vous permet de toocreate la logique de validation à l’intérieur des schémas, pour une plus grande flexibilité et réduire les temps de développement.</span><span class="sxs-lookup"><span data-stu-id="cec1e-674">Message validation allows you toocreate validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="cec1e-675">Les schémas peuvent être réutilisées entre différentes applications au sein de l’organisation hello, la création de normes pour la représentation sous forme de données.</span><span class="sxs-lookup"><span data-stu-id="cec1e-675">Schemas can be reused across different applications inside hello organization, creating standards for data representation.</span></span> <span data-ttu-id="cec1e-676">En outre, validation des messages vous permet des opérations tooprotect quand ils consomment des types de données plus complexes impliquant des contrats de logique métier.</span><span class="sxs-lookup"><span data-stu-id="cec1e-676">Additionally, message validation allows you tooprotect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="cec1e-677">validation de message tooperform vous tout d’abord créez un schéma qui représente les opérations de hello votre service hello types de données et consommées par ces opérations.</span><span class="sxs-lookup"><span data-stu-id="cec1e-677">tooperform message validation, you first build a schema that represents hello operations of your service and hello data types consumed by those operations.</span></span> <span data-ttu-id="cec1e-678">Vous créez ensuite une classe .NET qui implémente un inspecteur de message client personnalisé et personnalisée de répartiteur de messages inspecteur toovalidate hello messages envoyés/reçus à partir de service de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector toovalidate hello messages sent/received to/from hello service.</span></span> <span data-ttu-id="cec1e-679">Ensuite, vous implémentez une validation de message de point de terminaison personnalisé comportement tooenable sur hello client et le service de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-679">Next, you implement a custom endpoint behavior tooenable message validation on both hello client and hello service.</span></span> <span data-ttu-id="cec1e-680">Enfin, vous implémentez un élément de configuration personnalisée sur une classe hello qui permet de vous hello de tooexpose étendu de comportement de point de terminaison personnalisé dans le fichier de configuration hello du service de hello ou du client de hello »</span><span class="sxs-lookup"><span data-stu-id="cec1e-680">Finally, you implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client"</span></span></p>|

## <span data-ttu-id="cec1e-681"><a id="parameters"></a>WCF - Validation des entrées par le biais des inspecteurs de paramètres</span><span class="sxs-lookup"><span data-stu-id="cec1e-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="cec1e-682">Intitulé</span><span class="sxs-lookup"><span data-stu-id="cec1e-682">Title</span></span>                   | <span data-ttu-id="cec1e-683">Détails</span><span class="sxs-lookup"><span data-stu-id="cec1e-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="cec1e-684">**Composant**</span><span class="sxs-lookup"><span data-stu-id="cec1e-684">**Component**</span></span>               | <span data-ttu-id="cec1e-685">WCF</span><span class="sxs-lookup"><span data-stu-id="cec1e-685">WCF</span></span> | 
| <span data-ttu-id="cec1e-686">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="cec1e-686">**SDL Phase**</span></span>               | <span data-ttu-id="cec1e-687">Créer</span><span class="sxs-lookup"><span data-stu-id="cec1e-687">Build</span></span> |  
| <span data-ttu-id="cec1e-688">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="cec1e-688">**Applicable Technologies**</span></span> | <span data-ttu-id="cec1e-689">Générique, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="cec1e-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="cec1e-690">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="cec1e-690">**Attributes**</span></span>              | <span data-ttu-id="cec1e-691">N/A</span><span class="sxs-lookup"><span data-stu-id="cec1e-691">N/A</span></span>  |
| <span data-ttu-id="cec1e-692">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="cec1e-692">**References**</span></span>              | [<span data-ttu-id="cec1e-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="cec1e-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="cec1e-694">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="cec1e-694">**Steps**</span></span> | <p><span data-ttu-id="cec1e-695">Entrée et validation de données représente une ligne importante de défense dans la protection de votre application WCF hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-695">Input and data validation represents one important line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="cec1e-696">Vous devez valider tous les paramètres sont exposés dans le service WCF service operations tooprotect hello contre une attaque par un client malveillant.</span><span class="sxs-lookup"><span data-stu-id="cec1e-696">You should validate all parameters exposed in WCF service operations tooprotect hello service from attack by a malicious client.</span></span> <span data-ttu-id="cec1e-697">À l’inverse, vous devez également valider toutes les valeurs de retour reçues par le client de hello tooprotect hello client contre les attaques par un service malveillant</span><span class="sxs-lookup"><span data-stu-id="cec1e-697">Conversely, you should also validate all return values received by hello client tooprotect hello client from attack by a malicious service</span></span></p><p><span data-ttu-id="cec1e-698">WCF fournit des points d’extensibilité différents qui vous permettent de comportement d’exécution WCF toocustomize hello en créant des extensions personnalisées.</span><span class="sxs-lookup"><span data-stu-id="cec1e-698">WCF provides different extensibility points that allow you toocustomize hello WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="cec1e-699">Les inspecteurs de paramètre et les inspecteurs sont deux mécanismes d’extensibilité utilisée toogain plus grand contrôle sur les données de salutation passage entre un client et un service.</span><span class="sxs-lookup"><span data-stu-id="cec1e-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used toogain greater control over hello data passing between a client and a service.</span></span> <span data-ttu-id="cec1e-700">Vous devez utiliser des inspecteurs de paramètre pour la validation d’entrée et utiliser des inspecteurs de message uniquement lorsque vous devez tooinspect hello intégralité du message entrants et sortants d’un service.</span><span class="sxs-lookup"><span data-stu-id="cec1e-700">You should use parameter inspectors for input validation and use message inspectors only when you need tooinspect hello entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="cec1e-701">validation des entrées tooperform, vous allez créer une classe .NET et implémenter un inspecteur de paramètre personnalisé dans les paramètres de toovalidate de commande sur les opérations dans votre service.</span><span class="sxs-lookup"><span data-stu-id="cec1e-701">tooperform input validation, you will build a .NET class and implement a custom parameter inspector in order toovalidate parameters on operations in your service.</span></span> <span data-ttu-id="cec1e-702">Vous allez ensuite implémenter une validation de tooenable de comportement de point de terminaison personnalisé sur hello client et le service de hello.</span><span class="sxs-lookup"><span data-stu-id="cec1e-702">You will then implement a custom endpoint behavior tooenable validation on both hello client and hello service.</span></span> <span data-ttu-id="cec1e-703">Enfin, vous allez implémenter un élément de configuration personnalisé sur une classe hello qui permet de vous hello de tooexpose étendu de comportement de point de terminaison personnalisé dans le fichier de configuration hello du service de hello ou du client de hello</span><span class="sxs-lookup"><span data-stu-id="cec1e-703">Finally, you will implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client</span></span></p>|
