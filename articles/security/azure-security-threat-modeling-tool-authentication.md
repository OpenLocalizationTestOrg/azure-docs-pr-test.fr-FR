---
title: "Authentification - Outil Microsoft de modélisation des menaces - Azure | Microsoft Docs"
description: "mesures de correction des menaces exposées dans l’outil de modélisation des menaces"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: e547469dc61eddd1d772571ab0919532ac91f128
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-authentication--mitigations"></a><span data-ttu-id="be5d6-103">Infrastructure de sécurité : Authentification | Mesures de correction</span><span class="sxs-lookup"><span data-stu-id="be5d6-103">Security Frame: Authentication | Mitigations</span></span> 
| <span data-ttu-id="be5d6-104">Produit/Service</span><span class="sxs-lookup"><span data-stu-id="be5d6-104">Product/Service</span></span> | <span data-ttu-id="be5d6-105">Article</span><span class="sxs-lookup"><span data-stu-id="be5d6-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="be5d6-106">**Application web**</span><span class="sxs-lookup"><span data-stu-id="be5d6-106">**Web Application**</span></span>    | <ul><li>[<span data-ttu-id="be5d6-107">Envisager d’utiliser un mécanisme d’authentification standard pour l’application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-107">Consider using a standard authentication mechanism to authenticate to Web Application</span></span>](#standard-authn-web-app)</li><li>[<span data-ttu-id="be5d6-108">Les applications doivent gérer les scénarios d’authentification ayant échoué en toute sécurité </span><span class="sxs-lookup"><span data-stu-id="be5d6-108">Applications must handle failed authentication scenarios securely</span></span>](#handle-failed-authn)</li><li>[<span data-ttu-id="be5d6-109">Activer l’authentification adaptative ou avancée</span><span class="sxs-lookup"><span data-stu-id="be5d6-109">Enable step up or adaptive authentication</span></span>](#step-up-adaptive-authn)</li><li>[<span data-ttu-id="be5d6-110">Garantir que les interfaces d’administration sont correctement verrouillées</span><span class="sxs-lookup"><span data-stu-id="be5d6-110">Ensure that administrative interfaces are appropriately locked down</span></span>](#admin-interface-lockdown)</li><li>[<span data-ttu-id="be5d6-111">Implémenter des fonctionnalités de mot de passe oublié en toute sécurité</span><span class="sxs-lookup"><span data-stu-id="be5d6-111">Implement forgot password functionalities securely</span></span>](#forgot-pword-fxn)</li><li>[<span data-ttu-id="be5d6-112">Garantir que la stratégie de compte et de mot de passe est implémentée</span><span class="sxs-lookup"><span data-stu-id="be5d6-112">Ensure that password and account policy are implemented</span></span>](#pword-account-policy)</li><li>[<span data-ttu-id="be5d6-113">Implémenter des contrôles pour empêcher l’énumération de nom d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="be5d6-113">Implement controls to prevent username enumeration</span></span>](#controls-username-enum)</li></ul> |
| <span data-ttu-id="be5d6-114">**Base de données**</span><span class="sxs-lookup"><span data-stu-id="be5d6-114">**Database**</span></span> | <ul><li>[<span data-ttu-id="be5d6-115">Si possible, utiliser l’authentification Windows pour la connexion à SQL Server</span><span class="sxs-lookup"><span data-stu-id="be5d6-115">When possible, use Windows Authentication for connecting to SQL Server</span></span>](#win-authn-sql)</li><li>[<span data-ttu-id="be5d6-116">Si possible, utiliser l’authentification Azure Active Directory pour la connexion à SQL Database</span><span class="sxs-lookup"><span data-stu-id="be5d6-116">When possible use Azure Active Directory Authentication for Connecting to SQL Database</span></span>](#aad-authn-sql)</li><li>[<span data-ttu-id="be5d6-117">Lorsque le mode d’authentification SQL est utilisé, garantir que la stratégie de compte et de mot de passe est appliquée sur SQL Server</span><span class="sxs-lookup"><span data-stu-id="be5d6-117">When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>](#authn-account-pword)</li><li>[<span data-ttu-id="be5d6-118">Ne pas utiliser l’authentification SQL dans des bases de données à relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="be5d6-118">Do not use SQL Authentication in contained databases</span></span>](#autn-contained-db)</li></ul> |
| <span data-ttu-id="be5d6-119">**Hub d'événement d'Azure**</span><span class="sxs-lookup"><span data-stu-id="be5d6-119">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="be5d6-120">Utiliser les informations d’authentification par appareil à l’aide des jetons SAP</span><span class="sxs-lookup"><span data-stu-id="be5d6-120">Use per device authentication credentials using SaS tokens</span></span>](#authn-sas-tokens)</li></ul> |
| <span data-ttu-id="be5d6-121">**Délimitation d’approbation Azure**</span><span class="sxs-lookup"><span data-stu-id="be5d6-121">**Azure Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="be5d6-122">Activer Azure Multi-Factor Authentication pour les administrateurs Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-122">Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>](#multi-factor-azure-admin)</li></ul> |
| <span data-ttu-id="be5d6-123">**Délimitation d’approbation Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="be5d6-123">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="be5d6-124">Restreindre l’accès anonyme au cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-124">Restrict anonymous access to Service Fabric Cluster</span></span>](#anon-access-cluster)</li><li>[<span data-ttu-id="be5d6-125">Garantir que le certificat client à nœud Service Fabric est différent du certificat nœud à nœud</span><span class="sxs-lookup"><span data-stu-id="be5d6-125">Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>](#fabric-cn-nn)</li><li>[<span data-ttu-id="be5d6-126">Utiliser AAD pour authentifier les clients sur les clusters Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-126">Use AAD to authenticate clients to service fabric clusters</span></span>](#aad-client-fabric)</li><li>[<span data-ttu-id="be5d6-127">Garantir que les certificats Service Fabric proviennent d’une autorité de certification approuvée</span><span class="sxs-lookup"><span data-stu-id="be5d6-127">Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>](#fabric-cert-ca)</li></ul> |
| <span data-ttu-id="be5d6-128">**Serveur d’identité**</span><span class="sxs-lookup"><span data-stu-id="be5d6-128">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="be5d6-129">Utiliser des scénarios d’authentification standard pris en charge par IdentityServer</span><span class="sxs-lookup"><span data-stu-id="be5d6-129">Use standard authentication scenarios supported by Identity Server</span></span>](#standard-authn-id)</li><li>[<span data-ttu-id="be5d6-130">Remplacer le cache de jetons IdentityServer par défaut par une solution évolutive</span><span class="sxs-lookup"><span data-stu-id="be5d6-130">Override the default Identity Server token cache with a scalable alternative</span></span>](#override-token)</li></ul> |
| <span data-ttu-id="be5d6-131">**Délimitation d’approbation machine**</span><span class="sxs-lookup"><span data-stu-id="be5d6-131">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="be5d6-132">Garantir que les fichiers binaires de l’application déployée sont signés numériquement</span><span class="sxs-lookup"><span data-stu-id="be5d6-132">Ensure that deployed application's binaries are digitally signed</span></span>](#binaries-signed)</li></ul> |
| <span data-ttu-id="be5d6-133">**WCF**</span><span class="sxs-lookup"><span data-stu-id="be5d6-133">**WCF**</span></span> | <ul><li>[<span data-ttu-id="be5d6-134">Activer l’authentification lors de la connexion aux files d’attente MSMQ dans WCF</span><span class="sxs-lookup"><span data-stu-id="be5d6-134">Enable authentication when connecting to MSMQ queues in WCF</span></span>](#msmq-queues)</li><li>[<span data-ttu-id="be5d6-135">WCF - Ne pas définir clientCredentialType du message sur la valeur « aucun »</span><span class="sxs-lookup"><span data-stu-id="be5d6-135">WCF-Do not set Message clientCredentialType to none</span></span>](#message-none)</li><li>[<span data-ttu-id="be5d6-136">WCF - Ne pas définir clientCredentialType du transport sur la valeur « aucun »</span><span class="sxs-lookup"><span data-stu-id="be5d6-136">WCF-Do not set Transport clientCredentialType to none</span></span>](#transport-none)</li></ul> |
| <span data-ttu-id="be5d6-137">**API Web**</span><span class="sxs-lookup"><span data-stu-id="be5d6-137">**Web API**</span></span> | <ul><li>[<span data-ttu-id="be5d6-138">Garantir que les techniques d’authentification standard sont utilisées pour sécuriser les API Web</span><span class="sxs-lookup"><span data-stu-id="be5d6-138">Ensure that standard authentication techniques are used to secure Web APIs</span></span>](#authn-secure-api)</li></ul> |
| <span data-ttu-id="be5d6-139">**Azure AD**</span><span class="sxs-lookup"><span data-stu-id="be5d6-139">**Azure AD**</span></span> | <ul><li>[<span data-ttu-id="be5d6-140">Utiliser des scénarios d’authentification standard pris en charge par Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="be5d6-140">Use standard authentication scenarios supported by Azure Active Directory</span></span>](#authn-aad)</li><li>[<span data-ttu-id="be5d6-141">Remplacer le cache de jetons ADAL par défaut par une solution évolutive</span><span class="sxs-lookup"><span data-stu-id="be5d6-141">Override the default ADAL token cache with a scalable alternative</span></span>](#adal-scalable)</li><li>[<span data-ttu-id="be5d6-142">Garantir que TokenReplayCache est utilisé pour empêcher la relecture de jetons d’authentification ADAL</span><span class="sxs-lookup"><span data-stu-id="be5d6-142">Ensure that TokenReplayCache is used to prevent the replay of ADAL authentication tokens</span></span>](#tokenreplaycache-adal)</li><li>[<span data-ttu-id="be5d6-143">Utiliser les bibliothèques ADAL pour gérer les demandes de jeton des clients OAuth2 vers AAD (ou Active Directory local)</span><span class="sxs-lookup"><span data-stu-id="be5d6-143">Use ADAL libraries to manage token requests from OAuth2 clients to AAD (or on-premises AD)</span></span>](#adal-oauth2)</li></ul> |
| <span data-ttu-id="be5d6-144">**Passerelle de champ IoT**</span><span class="sxs-lookup"><span data-stu-id="be5d6-144">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="be5d6-145">Authentifier les appareils se connectant à la passerelle de champ</span><span class="sxs-lookup"><span data-stu-id="be5d6-145">Authenticate devices connecting to the Field Gateway</span></span>](#authn-devices-field)</li></ul> |
| <span data-ttu-id="be5d6-146">**Passerelle de cloud IoT**</span><span class="sxs-lookup"><span data-stu-id="be5d6-146">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="be5d6-147">Garantir que les appareils se connectant à la passerelle de cloud sont authentifiés</span><span class="sxs-lookup"><span data-stu-id="be5d6-147">Ensure that devices connecting to Cloud gateway are authenticated</span></span>](#authn-devices-cloud)</li><li>[<span data-ttu-id="be5d6-148">Utiliser les informations d’authentification par appareil</span><span class="sxs-lookup"><span data-stu-id="be5d6-148">Use per-device authentication credentials</span></span>](#authn-cred)</li></ul> |
| <span data-ttu-id="be5d6-149">**Azure Storage**</span><span class="sxs-lookup"><span data-stu-id="be5d6-149">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="be5d6-150">Garantir que seuls les conteneurs et blobs requis disposent d’un accès en lecture anonyme</span><span class="sxs-lookup"><span data-stu-id="be5d6-150">Ensure that only the required containers and blobs are given anonymous read access</span></span>](#req-containers-anon)</li><li>[<span data-ttu-id="be5d6-151">Accorder un accès limité aux objets dans le stockage Azure à l’aide de SAS ou SAP</span><span class="sxs-lookup"><span data-stu-id="be5d6-151">Grant limited access to objects in Azure storage using SAS or SAP</span></span>](#limited-access-sas)</li></ul> |

## <span data-ttu-id="be5d6-152"><a id="standard-authn-web-app"></a>Envisager d’utiliser un mécanisme d’authentification standard pour l’application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-152"><a id="standard-authn-web-app"></a>Consider using a standard authentication mechanism to authenticate to Web Application</span></span>

| <span data-ttu-id="be5d6-153">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-153">Title</span></span>                   | <span data-ttu-id="be5d6-154">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-154">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-155">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-155">**Component**</span></span>               | <span data-ttu-id="be5d6-156">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-156">Web Application</span></span> | 
| <span data-ttu-id="be5d6-157">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-157">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-158">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-158">Build</span></span> |  
| <span data-ttu-id="be5d6-159">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-159">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-160">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-160">Generic</span></span> |
| <span data-ttu-id="be5d6-161">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-161">**Attributes**</span></span>              | <span data-ttu-id="be5d6-162">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-162">N/A</span></span>  |
| <span data-ttu-id="be5d6-163">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-163">**References**</span></span>              | <span data-ttu-id="be5d6-164">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-164">N/A</span></span>  |
| <span data-ttu-id="be5d6-165">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-165">Details</span></span> | <p><span data-ttu-id="be5d6-166">L’authentification désigne le processus dans lequel une entité prouve son identité, généralement par le biais d’informations d’identification, comme le nom d’utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="be5d6-166">Authentication is the process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="be5d6-167">Il existe plusieurs protocoles d’authentification disponibles qui peuvent vous être utiles.</span><span class="sxs-lookup"><span data-stu-id="be5d6-167">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="be5d6-168">Certains d’entre eux sont répertoriés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="be5d6-168">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="be5d6-169">Certificats clients</span><span class="sxs-lookup"><span data-stu-id="be5d6-169">Client certificates</span></span></li><li><span data-ttu-id="be5d6-170">Basé sur Windows</span><span class="sxs-lookup"><span data-stu-id="be5d6-170">Windows based</span></span></li><li><span data-ttu-id="be5d6-171">Basé sur des formulaires</span><span class="sxs-lookup"><span data-stu-id="be5d6-171">Forms based</span></span></li><li><span data-ttu-id="be5d6-172">Fédération - ADFS</span><span class="sxs-lookup"><span data-stu-id="be5d6-172">Federation - ADFS</span></span></li><li><span data-ttu-id="be5d6-173">Fédération - Azure AD</span><span class="sxs-lookup"><span data-stu-id="be5d6-173">Federation - Azure AD</span></span></li><li><span data-ttu-id="be5d6-174">Fédération - IdentityServer</span><span class="sxs-lookup"><span data-stu-id="be5d6-174">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="be5d6-175">Envisagez d’utiliser un mécanisme d’authentification standard pour identifier le processus source.</span><span class="sxs-lookup"><span data-stu-id="be5d6-175">Consider using a standard authentication mechanism to identify the source process</span></span></p>|

## <span data-ttu-id="be5d6-176"><a id="handle-failed-authn"></a>Les applications doivent gérer les scénarios d’authentification ayant échoué en toute sécurité </span><span class="sxs-lookup"><span data-stu-id="be5d6-176"><a id="handle-failed-authn"></a>Applications must handle failed authentication scenarios securely</span></span>

| <span data-ttu-id="be5d6-177">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-177">Title</span></span>                   | <span data-ttu-id="be5d6-178">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-178">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-179">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-179">**Component**</span></span>               | <span data-ttu-id="be5d6-180">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-180">Web Application</span></span> | 
| <span data-ttu-id="be5d6-181">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-181">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-182">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-182">Build</span></span> |  
| <span data-ttu-id="be5d6-183">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-183">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-184">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-184">Generic</span></span> |
| <span data-ttu-id="be5d6-185">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-185">**Attributes**</span></span>              | <span data-ttu-id="be5d6-186">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-186">N/A</span></span>  |
| <span data-ttu-id="be5d6-187">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-187">**References**</span></span>              | <span data-ttu-id="be5d6-188">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-188">N/A</span></span>  |
| <span data-ttu-id="be5d6-189">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-189">Details</span></span> | <p><span data-ttu-id="be5d6-190">Les applications qui authentifient explicitement les utilisateurs doivent gérer des scénarios d’authentification ayant échoué en toute sécurité. Le mécanisme d’authentification doit :</span><span class="sxs-lookup"><span data-stu-id="be5d6-190">Applications that explicitly authenticate users must handle failed authentication scenarios securely.The authentication mechanism must:</span></span></p><ul><li><span data-ttu-id="be5d6-191">Refuser l’accès aux ressources avec des privilèges lorsque l’authentification échoue.</span><span class="sxs-lookup"><span data-stu-id="be5d6-191">Deny access to privileged resources when authentication fails</span></span></li><li><span data-ttu-id="be5d6-192">Afficher un message d’erreur générique après l’échec d’authentification et le refus de l’accès.</span><span class="sxs-lookup"><span data-stu-id="be5d6-192">Display a generic error message after failed authentication and access denied occurs</span></span></li></ul><p><span data-ttu-id="be5d6-193">Test des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="be5d6-193">Test for:</span></span></p><ul><li><span data-ttu-id="be5d6-194">Protection des ressources avec des privilèges après les échecs de connexion.</span><span class="sxs-lookup"><span data-stu-id="be5d6-194">Protection of privileged resources after failed logins</span></span></li><li><span data-ttu-id="be5d6-195">Un message d’erreur générique est affiché après les événements d’échec d’authentification et de refus de l’accès.</span><span class="sxs-lookup"><span data-stu-id="be5d6-195">A generic error message is displayed on failed authentication and access denied event(s)</span></span></li><li><span data-ttu-id="be5d6-196">Les comptes sont désactivés après un nombre excessif d’échecs.</span><span class="sxs-lookup"><span data-stu-id="be5d6-196">Accounts are disabled after an excessive number of failed attempts</span></span></li><ul>|

## <span data-ttu-id="be5d6-197"><a id="step-up-adaptive-authn"></a>Activer l’authentification adaptative ou avancée</span><span class="sxs-lookup"><span data-stu-id="be5d6-197"><a id="step-up-adaptive-authn"></a>Enable step up or adaptive authentication</span></span>

| <span data-ttu-id="be5d6-198">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-198">Title</span></span>                   | <span data-ttu-id="be5d6-199">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-199">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-200">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-200">**Component**</span></span>               | <span data-ttu-id="be5d6-201">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-201">Web Application</span></span> | 
| <span data-ttu-id="be5d6-202">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-202">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-203">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-203">Build</span></span> |  
| <span data-ttu-id="be5d6-204">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-204">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-205">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-205">Generic</span></span> |
| <span data-ttu-id="be5d6-206">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-206">**Attributes**</span></span>              | <span data-ttu-id="be5d6-207">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-207">N/A</span></span>  |
| <span data-ttu-id="be5d6-208">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-208">**References**</span></span>              | <span data-ttu-id="be5d6-209">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-209">N/A</span></span>  |
| <span data-ttu-id="be5d6-210">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-210">Details</span></span> | <p><span data-ttu-id="be5d6-211">Vérifiez que l’application dispose d’une autorisation supplémentaire (telle qu’une authentification adaptative ou avancée via l’authentification multifacteur comme l’envoi d’OTP par SMS, e-mail, etc. ou une demande de nouvelle authentification) pour que l’utilisateur soit interrogé avant d’obtenir l’accès aux informations sensibles.</span><span class="sxs-lookup"><span data-stu-id="be5d6-211">Verify the application has additional authorization (such as step up or adaptive authentication, via multi-factor authentication such as sending OTP in SMS, email etc. or prompting for re-authentication) so the user is challenged before being granted access to sensitive information.</span></span> <span data-ttu-id="be5d6-212">Cette règle s’applique également pour les modifications critiques d’une action ou d’un compte.</span><span class="sxs-lookup"><span data-stu-id="be5d6-212">This rule also applies for making critical changes to an account or action</span></span></p><p><span data-ttu-id="be5d6-213">Cela signifie également que l’adaptation de l’authentification doit être implémentée de manière que l’application applique correctement l’autorisation sensible au contexte pour interdire les manipulations non autorisées via la falsification de paramètres par exemple.</span><span class="sxs-lookup"><span data-stu-id="be5d6-213">This also means that the adaptation of authentication has to be implemented in such a manner that the application correctly enforces context-sensitive authorization so as to not allow unauthorized manipulation by means of in example, parameter tampering</span></span></p>|

## <span data-ttu-id="be5d6-214"><a id="admin-interface-lockdown"></a>Garantir que les interfaces d’administration sont correctement verrouillées</span><span class="sxs-lookup"><span data-stu-id="be5d6-214"><a id="admin-interface-lockdown"></a>Ensure that administrative interfaces are appropriately locked down</span></span>

| <span data-ttu-id="be5d6-215">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-215">Title</span></span>                   | <span data-ttu-id="be5d6-216">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-216">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-217">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-217">**Component**</span></span>               | <span data-ttu-id="be5d6-218">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-218">Web Application</span></span> | 
| <span data-ttu-id="be5d6-219">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-219">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-220">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-220">Build</span></span> |  
| <span data-ttu-id="be5d6-221">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-221">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-222">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-222">Generic</span></span> |
| <span data-ttu-id="be5d6-223">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-223">**Attributes**</span></span>              | <span data-ttu-id="be5d6-224">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-224">N/A</span></span>  |
| <span data-ttu-id="be5d6-225">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-225">**References**</span></span>              | <span data-ttu-id="be5d6-226">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-226">N/A</span></span>  |
| <span data-ttu-id="be5d6-227">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-227">Details</span></span> | <span data-ttu-id="be5d6-228">La première solution consiste à accorder l’accès uniquement à partir d’une certaine plage d’adresses IP source à l’interface d’administration.</span><span class="sxs-lookup"><span data-stu-id="be5d6-228">The first solution is to grant access only from a certain source IP range to the administrative interface.</span></span> <span data-ttu-id="be5d6-229">Si cette solution n’est pas envisageable, il est toujours recommandé d’appliquer une authentification adaptative ou avancée pour la connexion à l’interface d’administration.</span><span class="sxs-lookup"><span data-stu-id="be5d6-229">If that solution would not be possible than it is always recommended to enforce a step-up or adaptive authentication for logging in into the administrative interface</span></span> |

## <span data-ttu-id="be5d6-230"><a id="forgot-pword-fxn"></a>Implémenter des fonctionnalités de mot de passe oublié en toute sécurité</span><span class="sxs-lookup"><span data-stu-id="be5d6-230"><a id="forgot-pword-fxn"></a>Implement forgot password functionalities securely</span></span>

| <span data-ttu-id="be5d6-231">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-231">Title</span></span>                   | <span data-ttu-id="be5d6-232">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-232">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-233">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-233">**Component**</span></span>               | <span data-ttu-id="be5d6-234">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-234">Web Application</span></span> | 
| <span data-ttu-id="be5d6-235">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-235">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-236">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-236">Build</span></span> |  
| <span data-ttu-id="be5d6-237">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-237">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-238">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-238">Generic</span></span> |
| <span data-ttu-id="be5d6-239">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-239">**Attributes**</span></span>              | <span data-ttu-id="be5d6-240">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-240">N/A</span></span>  |
| <span data-ttu-id="be5d6-241">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-241">**References**</span></span>              | <span data-ttu-id="be5d6-242">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-242">N/A</span></span>  |
| <span data-ttu-id="be5d6-243">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-243">Details</span></span> | <p><span data-ttu-id="be5d6-244">La première chose consiste à vérifier que les chemins de mot de passe oublié ou autres chemins de récupération envoient un lien incluant un jeton d’activation à durée limitée plutôt que le mot de passe lui-même.</span><span class="sxs-lookup"><span data-stu-id="be5d6-244">The first thing is to verify that forgot password and other recovery paths send a link including a time-limited activation token rather than the password itself.</span></span> <span data-ttu-id="be5d6-245">Une authentification supplémentaire basée sur les jetons logiciels (par exemple, jeton SMS, applications mobiles natives, etc.) peut être utilisée avant l’envoi du lien.</span><span class="sxs-lookup"><span data-stu-id="be5d6-245">Additional authentication based on soft-tokens (e.g. SMS token, native mobile applications, etc.) can be required as well before the link is sent over.</span></span> <span data-ttu-id="be5d6-246">Ensuite, vous ne devez pas verrouiller les comptes des utilisateurs tant que le processus d’obtention d’un nouveau mot de passe est en cours.</span><span class="sxs-lookup"><span data-stu-id="be5d6-246">Second, you should not lock out the users account whilst the process of getting a new password is in progress.</span></span></p><p><span data-ttu-id="be5d6-247">Cela peut entraîner une attaque par déni de service lorsqu’un pirate décide de verrouiller intentionnellement les utilisateurs avec une attaque automatisée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-247">This could lead to a Denial of service attack whenever an attacker decides to intentionally lock out the users with an automated attack.</span></span> <span data-ttu-id="be5d6-248">Puis, lorsque la demande de nouveau mot de passe est en cours, le message que vous affichez doit être généralisé afin d’éviter l’énumération de nom d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="be5d6-248">Third, whenever the new password request was set in progress, the message you display should be generalized in order to prevent username enumeration.</span></span> <span data-ttu-id="be5d6-249">Enfin, interdisez toujours l’utilisation des anciens mots de passe et implémentez une stratégie de mot de passe forte.</span><span class="sxs-lookup"><span data-stu-id="be5d6-249">Fourth, always disallow the use of old passwords and implement a strong password policy.</span></span></p> |

## <span data-ttu-id="be5d6-250"><a id="pword-account-policy"></a>Garantir que la stratégie de compte et de mot de passe est implémentée</span><span class="sxs-lookup"><span data-stu-id="be5d6-250"><a id="pword-account-policy"></a>Ensure that password and account policy are implemented</span></span>

| <span data-ttu-id="be5d6-251">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-251">Title</span></span>                   | <span data-ttu-id="be5d6-252">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-253">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-253">**Component**</span></span>               | <span data-ttu-id="be5d6-254">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-254">Web Application</span></span> | 
| <span data-ttu-id="be5d6-255">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-255">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-256">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-256">Build</span></span> |  
| <span data-ttu-id="be5d6-257">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-257">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-258">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-258">Generic</span></span> |
| <span data-ttu-id="be5d6-259">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-259">**Attributes**</span></span>              | <span data-ttu-id="be5d6-260">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-260">N/A</span></span>  |
| <span data-ttu-id="be5d6-261">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-261">**References**</span></span>              | <span data-ttu-id="be5d6-262">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-262">N/A</span></span>  |
| <span data-ttu-id="be5d6-263">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-263">Details</span></span> | <p><span data-ttu-id="be5d6-264">Une stratégie de compte et de mot de passe conforme à la stratégie et aux bonnes pratiques de l’organisation doit être implémentée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-264">Password and account policy in compliance with organizational policy and best practices should be implemented.</span></span></p><p><span data-ttu-id="be5d6-265">Pour se défendre contre les attaques en force brute et les vols basés sur le dictionnaire : une stratégie de mot de passe forte doit être implémentée pour garantir que les utilisateurs créent des mots de passe complexes (par exemple, longueur minimale de 12 caractères, caractères spéciaux et alphanumériques).</span><span class="sxs-lookup"><span data-stu-id="be5d6-265">To defend against brute-force and dictionary based guessing: Strong password policy must be implemented to ensure that users create complex password (e.g., 12 characters minimum length, alphanumeric and special characters).</span></span></p><p><span data-ttu-id="be5d6-266">Les stratégies de verrouillage de compte peuvent être implémentées de la manière suivante :</span><span class="sxs-lookup"><span data-stu-id="be5d6-266">Account lockout policies may be implemented in the following manner:</span></span></p><ul><li><span data-ttu-id="be5d6-267">**Verrouillage léger :** il peut s’agir d’une bonne option pour protéger vos utilisateurs des attaques en force brute.</span><span class="sxs-lookup"><span data-stu-id="be5d6-267">**Soft lock-out:** This can be a good option for protecting your users against brute force attacks.</span></span> <span data-ttu-id="be5d6-268">Par exemple, lorsque l’utilisateur entre un mot de passe incorrect trois fois de suite, l’application peut verrouiller le compte pendant une minute pour ralentir le processus d’attaque en force brute de son mot de passe, réduisant le champ d’action du pirate.</span><span class="sxs-lookup"><span data-stu-id="be5d6-268">For example, whenever the user enters a wrong password three times the application could lock down the account for a minute in order to slow down the process of brute forcing his password making it less profitable for the attacker to proceed.</span></span> <span data-ttu-id="be5d6-269">Si vous souhaitez implémenter des contre-mesures de verrouillage fort pour cet exemple, vous obtenez un « Dos » en verrouillant les comptes de manière permanente.</span><span class="sxs-lookup"><span data-stu-id="be5d6-269">If u were to implement hard lock-out countermeasures for this example you would achieve a "Dos" by permanently locking out accounts.</span></span> <span data-ttu-id="be5d6-270">Une application peut également générer un OTP (mot de passe à usage unique) et l’envoyer hors bande (par e-mail, sms, etc.) à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="be5d6-270">Alternatively, application may generate an OTP (One Time Password) and send it out-of-band (through email, sms etc.) to the user.</span></span> <span data-ttu-id="be5d6-271">Une autre approche peut consister à implémenter CAPTCHA après qu’un nombre maximum de tentatives est atteint.</span><span class="sxs-lookup"><span data-stu-id="be5d6-271">Another approach may be to implement CAPTCHA after a threshold number of failed attempts is reached.</span></span></li><li><span data-ttu-id="be5d6-272">**Verrouillage fort :** ce type de verrouillage doit être appliqué lorsque vous détectez qu’un utilisateur attaque votre application. Il est contré au moyen d’un verrouillage permanent de son compte jusqu’à ce qu’une équipe de réponse ait le temps de traiter le problème.</span><span class="sxs-lookup"><span data-stu-id="be5d6-272">**Hard lock-out:** This type of lockout should be applied whenever you detect a user attacking your application and counter him by means of permanently locking out his account until a response team had time to do their forensics.</span></span> <span data-ttu-id="be5d6-273">Après ce processus, vous pouvez décider de rendre son compte à l’utilisateur ou d’entamer des poursuites contre lui.</span><span class="sxs-lookup"><span data-stu-id="be5d6-273">After this process you can decide to give the user back his account or take further legal actions against him.</span></span> <span data-ttu-id="be5d6-274">Ce type d’approche empêche le pirate de pénétrer davantage dans votre application et infrastructure.</span><span class="sxs-lookup"><span data-stu-id="be5d6-274">This type of approach prevents the attacker from further penetrating your application and infrastructure.</span></span></li></ul><p><span data-ttu-id="be5d6-275">Pour se défendre contre les attaques sur les comptes par défaut et prévisibles, vérifiez que toutes les clés et que tous les mots de passe sont remplaçables et qu’ils sont générés ou remplacés après l’installation.</span><span class="sxs-lookup"><span data-stu-id="be5d6-275">To defend against attacks on default and predictable accounts, verify that all keys and passwords are replaceable, and are generated or replaced after installation time.</span></span></p><p><span data-ttu-id="be5d6-276">Si l’application doit générer automatiquement des mots de passe, assurez-vous que les mots de passe générés sont aléatoires et ont une entropie élevée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-276">If the application has to auto-generate passwords, ensure that the generated passwords are random and have high entropy.</span></span></p>|

## <span data-ttu-id="be5d6-277"><a id="controls-username-enum"></a>Implémenter des contrôles pour empêcher l’énumération de nom d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="be5d6-277"><a id="controls-username-enum"></a>Implement controls to prevent username enumeration</span></span>

| <span data-ttu-id="be5d6-278">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-278">Title</span></span>                   | <span data-ttu-id="be5d6-279">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-279">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-280">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-280">**Component**</span></span>               | <span data-ttu-id="be5d6-281">Application web</span><span class="sxs-lookup"><span data-stu-id="be5d6-281">Web Application</span></span> | 
| <span data-ttu-id="be5d6-282">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-282">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-283">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-283">Build</span></span> |  
| <span data-ttu-id="be5d6-284">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-284">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-285">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-285">Generic</span></span> |
| <span data-ttu-id="be5d6-286">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-286">**Attributes**</span></span>              | <span data-ttu-id="be5d6-287">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-287">N/A</span></span>  |
| <span data-ttu-id="be5d6-288">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-288">**References**</span></span>              | <span data-ttu-id="be5d6-289">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-289">N/A</span></span>  |
| <span data-ttu-id="be5d6-290">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-290">**Steps**</span></span> | <span data-ttu-id="be5d6-291">Tous les messages d’erreur doivent être généralisés afin d’éviter l’énumération de nom d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="be5d6-291">All error messages should be generalized in order to prevent username enumeration.</span></span> <span data-ttu-id="be5d6-292">En outre, parfois vous ne pouvez pas éviter une fuite d’informations dans des fonctionnalités comme une page d’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="be5d6-292">Also sometimes you cannot avoid information leaking in functionalities such as a registration page.</span></span> <span data-ttu-id="be5d6-293">Ici, vous devez utiliser des méthodes de limite de débit comme CAPTCHA pour empêcher une attaque automatisée par un pirate.</span><span class="sxs-lookup"><span data-stu-id="be5d6-293">Here you need to use rate-limiting methods like CAPTCHA to prevent an automated attack by an attacker.</span></span> |

## <span data-ttu-id="be5d6-294"><a id="win-authn-sql"></a>Si possible, utiliser l’authentification Windows pour la connexion à SQL Server</span><span class="sxs-lookup"><span data-stu-id="be5d6-294"><a id="win-authn-sql"></a>When possible, use Windows Authentication for connecting to SQL Server</span></span>

| <span data-ttu-id="be5d6-295">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-295">Title</span></span>                   | <span data-ttu-id="be5d6-296">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-296">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-297">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-297">**Component**</span></span>               | <span data-ttu-id="be5d6-298">Base de données</span><span class="sxs-lookup"><span data-stu-id="be5d6-298">Database</span></span> | 
| <span data-ttu-id="be5d6-299">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-299">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-300">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-300">Build</span></span> |  
| <span data-ttu-id="be5d6-301">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-301">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-302">Local</span><span class="sxs-lookup"><span data-stu-id="be5d6-302">OnPrem</span></span> |
| <span data-ttu-id="be5d6-303">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-303">**Attributes**</span></span>              | <span data-ttu-id="be5d6-304">Version SQL - Toutes</span><span class="sxs-lookup"><span data-stu-id="be5d6-304">SQL Version - All</span></span> |
| <span data-ttu-id="be5d6-305">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-305">**References**</span></span>              | [<span data-ttu-id="be5d6-306">SQL Server - Choisir un mode d’authentification</span><span class="sxs-lookup"><span data-stu-id="be5d6-306">SQL Server - Choose an Authentication Mode</span></span>](https://msdn.microsoft.com/library/ms144284.aspx) |
| <span data-ttu-id="be5d6-307">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-307">**Steps**</span></span> | <span data-ttu-id="be5d6-308">L’authentification Windows utilise le protocole de sécurité Kerberos, fournit une application des stratégies de mot de passe relative à la validation de la complexité des mots de passe forts, prend en charge le verrouillage de compte, ainsi que l’expiration du mot de passe.</span><span class="sxs-lookup"><span data-stu-id="be5d6-308">Windows Authentication uses Kerberos security protocol, provides password policy enforcement with regard to complexity validation for strong passwords, provides support for account lockout, and supports password expiration.</span></span>|

## <span data-ttu-id="be5d6-309"><a id="aad-authn-sql"></a>Si possible, utiliser l’authentification Azure Active Directory pour la connexion à SQL Database</span><span class="sxs-lookup"><span data-stu-id="be5d6-309"><a id="aad-authn-sql"></a>When possible use Azure Active Directory Authentication for Connecting to SQL Database</span></span>

| <span data-ttu-id="be5d6-310">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-310">Title</span></span>                   | <span data-ttu-id="be5d6-311">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-311">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-312">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-312">**Component**</span></span>               | <span data-ttu-id="be5d6-313">Base de données</span><span class="sxs-lookup"><span data-stu-id="be5d6-313">Database</span></span> | 
| <span data-ttu-id="be5d6-314">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-314">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-315">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-315">Build</span></span> |  
| <span data-ttu-id="be5d6-316">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-316">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-317">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-317">SQL Azure</span></span> |
| <span data-ttu-id="be5d6-318">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-318">**Attributes**</span></span>              | <span data-ttu-id="be5d6-319">Version SQL - V12</span><span class="sxs-lookup"><span data-stu-id="be5d6-319">SQL Version - V12</span></span> |
| <span data-ttu-id="be5d6-320">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-320">**References**</span></span>              | [<span data-ttu-id="be5d6-321">Connexion à SQL Database avec l’authentification Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="be5d6-321">Connecting to SQL Database By Using Azure Active Directory Authentication</span></span>](https://azure.microsoft.com/documentation/articles/sql-database-aad-authentication/) |
| <span data-ttu-id="be5d6-322">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-322">**Steps**</span></span> | <span data-ttu-id="be5d6-323">**Version minimum :** Azure SQL Database V12 est nécessaire pour autoriser Azure SQL Database à utiliser l’authentification AAD par rapport à Microsoft Directory.</span><span class="sxs-lookup"><span data-stu-id="be5d6-323">**Minimum version:** Azure SQL Database V12 required to allow Azure SQL Database to use AAD Authentication against the Microsoft Directory</span></span> |

## <span data-ttu-id="be5d6-324"><a id="authn-account-pword"></a>Lorsque le mode d’authentification SQL est utilisé, garantir que la stratégie de compte et de mot de passe est appliquée sur SQL Server</span><span class="sxs-lookup"><span data-stu-id="be5d6-324"><a id="authn-account-pword"></a>When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>

| <span data-ttu-id="be5d6-325">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-325">Title</span></span>                   | <span data-ttu-id="be5d6-326">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-326">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-327">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-327">**Component**</span></span>               | <span data-ttu-id="be5d6-328">Base de données</span><span class="sxs-lookup"><span data-stu-id="be5d6-328">Database</span></span> | 
| <span data-ttu-id="be5d6-329">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-329">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-330">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-330">Build</span></span> |  
| <span data-ttu-id="be5d6-331">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-331">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-332">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-332">Generic</span></span> |
| <span data-ttu-id="be5d6-333">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-333">**Attributes**</span></span>              | <span data-ttu-id="be5d6-334">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-334">N/A</span></span>  |
| <span data-ttu-id="be5d6-335">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-335">**References**</span></span>              | <span data-ttu-id="be5d6-336">[Stratégie de mot de passe SQL Server](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="be5d6-336">[SQL Server password policy](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span></span> |
| <span data-ttu-id="be5d6-337">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-337">**Steps**</span></span> | <span data-ttu-id="be5d6-338">Lorsque vous utilisez l’authentification SQL Server, les connexions sont créées dans SQL Server et ne sont pas basées sur les comptes d’utilisateur Windows.</span><span class="sxs-lookup"><span data-stu-id="be5d6-338">When using SQL Server Authentication, logins are created in SQL Server that are not based on Windows user accounts.</span></span> <span data-ttu-id="be5d6-339">Le nom d’utilisateur et le mot de passe sont créés à l’aide de SQL Server et stockés dans SQL Server.</span><span class="sxs-lookup"><span data-stu-id="be5d6-339">Both the user name and the password are created by using SQL Server and stored in SQL Server.</span></span> <span data-ttu-id="be5d6-340">SQL Server peut utiliser des mécanismes de stratégie de mot de passe Windows.</span><span class="sxs-lookup"><span data-stu-id="be5d6-340">SQL Server can use Windows password policy mechanisms.</span></span> <span data-ttu-id="be5d6-341">Il peut appliquer la même complexité et les mêmes stratégies d’expiration utilisées dans Windows pour les mots de passe utilisés dans SQL Server.</span><span class="sxs-lookup"><span data-stu-id="be5d6-341">It can apply the same complexity and expiration policies used in Windows to passwords used inside SQL Server.</span></span> |

## <span data-ttu-id="be5d6-342"><a id="autn-contained-db"></a>Ne pas utiliser l’authentification SQL dans des bases de données à relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="be5d6-342"><a id="autn-contained-db"></a>Do not use SQL Authentication in contained databases</span></span>

| <span data-ttu-id="be5d6-343">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-343">Title</span></span>                   | <span data-ttu-id="be5d6-344">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-344">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-345">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-345">**Component**</span></span>               | <span data-ttu-id="be5d6-346">Base de données</span><span class="sxs-lookup"><span data-stu-id="be5d6-346">Database</span></span> | 
| <span data-ttu-id="be5d6-347">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-347">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-348">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-348">Build</span></span> |  
| <span data-ttu-id="be5d6-349">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-349">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-350">Local, SQL Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-350">OnPrem, SQL Azure</span></span> |
| <span data-ttu-id="be5d6-351">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-351">**Attributes**</span></span>              | <span data-ttu-id="be5d6-352">Version SQL - MSSQL2012, Version SQL - V12</span><span class="sxs-lookup"><span data-stu-id="be5d6-352">SQL Version - MSSQL2012, SQL Version - V12</span></span> |
| <span data-ttu-id="be5d6-353">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-353">**References**</span></span>              | [<span data-ttu-id="be5d6-354">Meilleures pratiques de sécurité recommandées avec les bases de données à relation contenant-contenu</span><span class="sxs-lookup"><span data-stu-id="be5d6-354">Security Best Practices with Contained Databases</span></span>](http://msdn.microsoft.com/library/ff929055.aspx) |
| <span data-ttu-id="be5d6-355">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-355">**Steps**</span></span> | <span data-ttu-id="be5d6-356">L’absence d’une stratégie de mot de passe appliquée peut augmenter la probabilité d’une information d’identification faible établie dans une base de données à relation contenant-contenu.</span><span class="sxs-lookup"><span data-stu-id="be5d6-356">The absence of an enforced password policy may increase the likelihood of a weak credential being established in a contained database.</span></span> <span data-ttu-id="be5d6-357">Utilisez l’authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="be5d6-357">Leverage Windows Authentication.</span></span> |

## <span data-ttu-id="be5d6-358"><a id="authn-sas-tokens"></a>Utiliser les informations d’authentification par appareil à l’aide des jetons SAP</span><span class="sxs-lookup"><span data-stu-id="be5d6-358"><a id="authn-sas-tokens"></a>Use per device authentication credentials using SaS tokens</span></span>

| <span data-ttu-id="be5d6-359">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-359">Title</span></span>                   | <span data-ttu-id="be5d6-360">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-360">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-361">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-361">**Component**</span></span>               | <span data-ttu-id="be5d6-362">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="be5d6-362">Azure Event Hub</span></span> | 
| <span data-ttu-id="be5d6-363">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-363">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-364">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-364">Build</span></span> |  
| <span data-ttu-id="be5d6-365">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-365">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-366">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-366">Generic</span></span> |
| <span data-ttu-id="be5d6-367">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-367">**Attributes**</span></span>              | <span data-ttu-id="be5d6-368">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-368">N/A</span></span>  |
| <span data-ttu-id="be5d6-369">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-369">**References**</span></span>              | [<span data-ttu-id="be5d6-370">Présentation du modèle de sécurité et de l’authentification Event Hubs</span><span class="sxs-lookup"><span data-stu-id="be5d6-370">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="be5d6-371">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-371">**Steps**</span></span> | <p><span data-ttu-id="be5d6-372">Le modèle de sécurité Event Hubs est basé sur une combinaison de jetons de signature d’accès partagé (SAP) et d’éditeurs d’événements.</span><span class="sxs-lookup"><span data-stu-id="be5d6-372">The Event Hubs security model is based on a combination of Shared Access Signature (SAS) tokens and event publishers.</span></span> <span data-ttu-id="be5d6-373">Le nom de l’éditeur représente l’ID de l’appareil qui reçoit le jeton.</span><span class="sxs-lookup"><span data-stu-id="be5d6-373">The publisher name represents the DeviceID that receives the token.</span></span> <span data-ttu-id="be5d6-374">Cela permet d’associer les jetons générés aux appareils respectifs.</span><span class="sxs-lookup"><span data-stu-id="be5d6-374">This would help associate the tokens generated with the respective devices.</span></span></p><p><span data-ttu-id="be5d6-375">Tous les messages sont marqués avec le donneur d’ordre côté service autorisant la détection de tentatives d’usurpation d’origine en charge utile.</span><span class="sxs-lookup"><span data-stu-id="be5d6-375">All messages are tagged with originator on service side allowing detection of in-payload origin spoofing attempts.</span></span> <span data-ttu-id="be5d6-376">Lors de l’authentification des appareils, générez un jeton SAP par appareil limité à un éditeur unique.</span><span class="sxs-lookup"><span data-stu-id="be5d6-376">When authenticating devices, generate a per device SaS token scoped to a unique publisher.</span></span></p>|

## <span data-ttu-id="be5d6-377"><a id="multi-factor-azure-admin"></a>Activer Azure Multi-Factor Authentication pour les administrateurs Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-377"><a id="multi-factor-azure-admin"></a>Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>

| <span data-ttu-id="be5d6-378">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-378">Title</span></span>                   | <span data-ttu-id="be5d6-379">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-379">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-380">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-380">**Component**</span></span>               | <span data-ttu-id="be5d6-381">Délimitation d’approbation Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-381">Azure Trust Boundary</span></span> | 
| <span data-ttu-id="be5d6-382">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-382">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-383">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-383">Deployment</span></span> |  
| <span data-ttu-id="be5d6-384">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-384">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-385">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-385">Generic</span></span> |
| <span data-ttu-id="be5d6-386">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-386">**Attributes**</span></span>              | <span data-ttu-id="be5d6-387">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-387">N/A</span></span>  |
| <span data-ttu-id="be5d6-388">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-388">**References**</span></span>              | [<span data-ttu-id="be5d6-389">Présentation d'Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="be5d6-389">What is Azure Multi-Factor Authentication?</span></span>](https://azure.microsoft.com/documentation/articles/multi-factor-authentication/) |
| <span data-ttu-id="be5d6-390">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-390">**Steps**</span></span> | <p><span data-ttu-id="be5d6-391">L’authentification multi-facteur est une méthode d’authentification qui nécessite plusieurs méthodes de vérification et ajoute une deuxième couche critique de sécurité aux connexions et transactions des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="be5d6-391">Multi-factor authentication (MFA) is a method of authentication that requires more than one verification method and adds a critical second layer of security to user sign-ins and transactions.</span></span> <span data-ttu-id="be5d6-392">Cette authentification fonctionne en nécessitant au minimum deux des méthodes de vérification suivantes :</span><span class="sxs-lookup"><span data-stu-id="be5d6-392">It works by requiring any two or more of the following verification methods:</span></span></p><ul><li><span data-ttu-id="be5d6-393">Un élément que vous connaissez (généralement un mot de passe)</span><span class="sxs-lookup"><span data-stu-id="be5d6-393">Something you know (typically a password)</span></span></li><li><span data-ttu-id="be5d6-394">Un élément que vous possédez (un appareil de confiance qui n'est pas facilement dupliqué, comme un téléphone)</span><span class="sxs-lookup"><span data-stu-id="be5d6-394">Something you have (a trusted device that is not easily duplicated, like a phone)</span></span></li><li><span data-ttu-id="be5d6-395">Un élément vous concernant particulièrement (biométrie)</span><span class="sxs-lookup"><span data-stu-id="be5d6-395">Something you are (biometrics)</span></span></li><ul>|

## <span data-ttu-id="be5d6-396"><a id="anon-access-cluster"></a>Restreindre l’accès anonyme au cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-396"><a id="anon-access-cluster"></a>Restrict anonymous access to Service Fabric Cluster</span></span>

| <span data-ttu-id="be5d6-397">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-397">Title</span></span>                   | <span data-ttu-id="be5d6-398">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-398">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-399">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-399">**Component**</span></span>               | <span data-ttu-id="be5d6-400">Délimitation d’approbation Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-400">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="be5d6-401">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-401">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-402">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-402">Deployment</span></span> |  
| <span data-ttu-id="be5d6-403">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-403">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-404">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-404">Generic</span></span> |
| <span data-ttu-id="be5d6-405">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-405">**Attributes**</span></span>              | <span data-ttu-id="be5d6-406">Environnement - Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-406">Environment - Azure</span></span>  |
| <span data-ttu-id="be5d6-407">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-407">**References**</span></span>              | [<span data-ttu-id="be5d6-408">Scénarios de sécurité d’un cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-408">Service Fabric cluster security scenarios</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security) |
| <span data-ttu-id="be5d6-409">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-409">**Steps**</span></span> | <p><span data-ttu-id="be5d6-410">Les clusters doivent toujours être sécurisés pour empêcher les utilisateurs non autorisés de se connecter à votre cluster, surtout quand des charges de travail sont en cours d’exécution sur ce dernier.</span><span class="sxs-lookup"><span data-stu-id="be5d6-410">Clusters should always be secured to prevent unauthorized users from connecting to your cluster, especially when it has production workloads running on it.</span></span></p><p><span data-ttu-id="be5d6-411">Lors de la création d’un cluster Service Fabric, assurez-vous que le mode de sécurité est défini sur la valeur « sécurisé » et configurez le certificat de serveur X.509 requis.</span><span class="sxs-lookup"><span data-stu-id="be5d6-411">While creating a service fabric cluster, ensure that the security mode is set to "secure" and configure the required X.509 server certificate.</span></span> <span data-ttu-id="be5d6-412">La création d’un cluster « non sécurisé » permettra à tout utilisateur anonyme de s’y connecter si les points de terminaison de gestion sont exposés sur l’Internet public.</span><span class="sxs-lookup"><span data-stu-id="be5d6-412">Creating an "insecure" cluster will allow any anonymous user to connect to it if it exposes management endpoints to the public Internet.</span></span></p>|

## <span data-ttu-id="be5d6-413"><a id="fabric-cn-nn"></a>Garantir que le certificat client à nœud Service Fabric est différent du certificat nœud à nœud</span><span class="sxs-lookup"><span data-stu-id="be5d6-413"><a id="fabric-cn-nn"></a>Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>

| <span data-ttu-id="be5d6-414">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-414">Title</span></span>                   | <span data-ttu-id="be5d6-415">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-415">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-416">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-416">**Component**</span></span>               | <span data-ttu-id="be5d6-417">Délimitation d’approbation Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-417">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="be5d6-418">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-418">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-419">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-419">Deployment</span></span> |  
| <span data-ttu-id="be5d6-420">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-420">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-421">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-421">Generic</span></span> |
| <span data-ttu-id="be5d6-422">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-422">**Attributes**</span></span>              | <span data-ttu-id="be5d6-423">Environnement - Azure, environnement - Autonome</span><span class="sxs-lookup"><span data-stu-id="be5d6-423">Environment - Azure, Environment - Stand alone</span></span> |
| <span data-ttu-id="be5d6-424">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-424">**References**</span></span>              | <span data-ttu-id="be5d6-425">[Sécurité par certificat de client à nœud](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Se connecter à un cluster sécurisé à l’aide d’un certificat client](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span><span class="sxs-lookup"><span data-stu-id="be5d6-425">[Service Fabric Client-to-node certificate security](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Connect to a secure cluster using client certificate](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span></span> |
| <span data-ttu-id="be5d6-426">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-426">**Steps**</span></span> | <p><span data-ttu-id="be5d6-427">La configuration de la sécurité par certificat de client à nœud s’effectue lors de la création du cluster (par le biais du Portail Azure, des modèles Resource Manager ou d’un modèle JSON autonome) en spécifiant un certificat client d’administration et/ou un certificat de client utilisateur.</span><span class="sxs-lookup"><span data-stu-id="be5d6-427">Client-to-node certificate security is configured while creating the cluster either through the Azure portal, Resource Manager templates or a standalone JSON template by specifying an admin client certificate and/or a user client certificate.</span></span></p><p><span data-ttu-id="be5d6-428">Les certificats client d’administration et client utilisateur que vous spécifiez doivent être différents des certificats primaires et secondaires que vous spécifiez pour la sécurité de nœud à nœud.</span><span class="sxs-lookup"><span data-stu-id="be5d6-428">The admin client and user client certificates you specify should be different than the primary and secondary certificates you specify for Node-to-node security.</span></span></p>|

## <span data-ttu-id="be5d6-429"><a id="aad-client-fabric"></a>Utiliser AAD pour authentifier les clients sur les clusters Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-429"><a id="aad-client-fabric"></a>Use AAD to authenticate clients to service fabric clusters</span></span>

| <span data-ttu-id="be5d6-430">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-430">Title</span></span>                   | <span data-ttu-id="be5d6-431">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-431">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-432">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-432">**Component**</span></span>               | <span data-ttu-id="be5d6-433">Délimitation d’approbation Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-433">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="be5d6-434">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-434">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-435">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-435">Deployment</span></span> |  
| <span data-ttu-id="be5d6-436">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-436">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-437">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-437">Generic</span></span> |
| <span data-ttu-id="be5d6-438">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-438">**Attributes**</span></span>              | <span data-ttu-id="be5d6-439">Environnement - Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-439">Environment - Azure</span></span> |
| <span data-ttu-id="be5d6-440">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-440">**References**</span></span>              | [<span data-ttu-id="be5d6-441">Scénarios de sécurité d’un cluster - Recommandations en matière de sécurité</span><span class="sxs-lookup"><span data-stu-id="be5d6-441">Cluster security scenarios - Security Recommendations</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#security-recommendations) |
| <span data-ttu-id="be5d6-442">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-442">**Steps**</span></span> | <span data-ttu-id="be5d6-443">Les clusters s’exécutant sur Azure peuvent également sécuriser l’accès aux points de terminaison de gestion à l’aide d’Azure Active Directory (AAD), en plus des certificats client.</span><span class="sxs-lookup"><span data-stu-id="be5d6-443">Clusters running on Azure can also secure access to the management endpoints using Azure Active Directory (AAD), apart from client certificates.</span></span> <span data-ttu-id="be5d6-444">Pour les clusters Azure, nous vous recommandons d’utiliser la sécurité AAD pour authentifier les clients et les certificats pour la sécurité de nœud à nœud.</span><span class="sxs-lookup"><span data-stu-id="be5d6-444">For Azure clusters, it is recommended that you use AAD security to authenticate clients and certificates for node-to-node security.</span></span>|

## <span data-ttu-id="be5d6-445"><a id="fabric-cert-ca"></a>Garantir que les certificats Service Fabric proviennent d’une autorité de certification approuvée</span><span class="sxs-lookup"><span data-stu-id="be5d6-445"><a id="fabric-cert-ca"></a>Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>

| <span data-ttu-id="be5d6-446">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-446">Title</span></span>                   | <span data-ttu-id="be5d6-447">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-447">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-448">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-448">**Component**</span></span>               | <span data-ttu-id="be5d6-449">Délimitation d’approbation Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-449">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="be5d6-450">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-450">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-451">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-451">Deployment</span></span> |  
| <span data-ttu-id="be5d6-452">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-452">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-453">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-453">Generic</span></span> |
| <span data-ttu-id="be5d6-454">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-454">**Attributes**</span></span>              | <span data-ttu-id="be5d6-455">Environnement - Azure</span><span class="sxs-lookup"><span data-stu-id="be5d6-455">Environment - Azure</span></span> |
| <span data-ttu-id="be5d6-456">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-456">**References**</span></span>              | [<span data-ttu-id="be5d6-457">Certificats X.509 et Service Fabric</span><span class="sxs-lookup"><span data-stu-id="be5d6-457">X.509 certificates and Service Fabric</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#x509-certificates-and-service-fabric) |
| <span data-ttu-id="be5d6-458">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-458">**Steps**</span></span> | <p><span data-ttu-id="be5d6-459">Service Fabric utilise des certificats de serveur X.509 pour l’authentification des clients et des nœuds.</span><span class="sxs-lookup"><span data-stu-id="be5d6-459">Service Fabric uses X.509 server certificates for authenticating nodes and clients.</span></span></p><p><span data-ttu-id="be5d6-460">Voici quelques éléments importants à prendre en compte lors de l’utilisation de certificats dans Service Fabric :</span><span class="sxs-lookup"><span data-stu-id="be5d6-460">Some important things to consider while using certificates in service fabrics:</span></span></p><ul><li><span data-ttu-id="be5d6-461">Les certificats utilisés dans les clusters qui exécutent des charges de travail de production doivent être créés en utilisant un service de certificats Windows Server correctement configuré ou obtenus auprès d’une autorité de certification approuvée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-461">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span> <span data-ttu-id="be5d6-462">L’autorité de certification peut être une autorité de certification externe approuvée ou une infrastructure de clé publique interne correctement gérée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-462">The CA can be an approved external CA or a properly managed internal Public Key Infrastructure (PKI)</span></span></li><li><span data-ttu-id="be5d6-463">En production, n’utilisez jamais de certificats temporaires ou de test créés avec des outils comme MakeCert.exe.</span><span class="sxs-lookup"><span data-stu-id="be5d6-463">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe</span></span></li><li><span data-ttu-id="be5d6-464">Vous pouvez utiliser un certificat auto-signé, mais seulement pour les clusters de test et non en production.</span><span class="sxs-lookup"><span data-stu-id="be5d6-464">You can use a self-signed certificate, but should only do so for test clusters and not in production</span></span></li></ul>|

## <span data-ttu-id="be5d6-465"><a id="standard-authn-id"></a>Utiliser des scénarios d’authentification standard pris en charge par IdentityServer</span><span class="sxs-lookup"><span data-stu-id="be5d6-465"><a id="standard-authn-id"></a>Use standard authentication scenarios supported by Identity Server</span></span>

| <span data-ttu-id="be5d6-466">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-466">Title</span></span>                   | <span data-ttu-id="be5d6-467">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-467">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-468">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-468">**Component**</span></span>               | <span data-ttu-id="be5d6-469">IdentityServer</span><span class="sxs-lookup"><span data-stu-id="be5d6-469">Identity Server</span></span> | 
| <span data-ttu-id="be5d6-470">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-470">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-471">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-471">Build</span></span> |  
| <span data-ttu-id="be5d6-472">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-472">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-473">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-473">Generic</span></span> |
| <span data-ttu-id="be5d6-474">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-474">**Attributes**</span></span>              | <span data-ttu-id="be5d6-475">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-475">N/A</span></span>  |
| <span data-ttu-id="be5d6-476">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-476">**References**</span></span>              | <span data-ttu-id="be5d6-477">[IdentityServer3 - The Big Picture](https://identityserver.github.io/Documentation/docsv2/overview/bigPicture.html) (IdentityServer3 - Vue d’ensemble)</span><span class="sxs-lookup"><span data-stu-id="be5d6-477">[IdentityServer3 - The Big Picture](https://identityserver.github.io/Documentation/docsv2/overview/bigPicture.html)</span></span> |
| <span data-ttu-id="be5d6-478">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-478">**Steps**</span></span> | <p><span data-ttu-id="be5d6-479">Vous trouverez ci-dessous les interactions classiques prises en charge par IdentityServer :</span><span class="sxs-lookup"><span data-stu-id="be5d6-479">Below are the typical interactions supported by Identity Server:</span></span></p><ul><li><span data-ttu-id="be5d6-480">Les navigateurs communiquent avec les applications web.</span><span class="sxs-lookup"><span data-stu-id="be5d6-480">Browsers communicate with web applications</span></span></li><li><span data-ttu-id="be5d6-481">Les applications web communiquent avec les API web (parfois pour elles-mêmes, parfois pour le compte d’un utilisateur).</span><span class="sxs-lookup"><span data-stu-id="be5d6-481">Web applications communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li><li><span data-ttu-id="be5d6-482">Les applications basées sur un navigateur communiquent avec les API web.</span><span class="sxs-lookup"><span data-stu-id="be5d6-482">Browser-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="be5d6-483">Les applications natives communiquent avec les API web.</span><span class="sxs-lookup"><span data-stu-id="be5d6-483">Native applications communicate with web APIs</span></span></li><li><span data-ttu-id="be5d6-484">Les applications basées sur un serveur communiquent avec les API web.</span><span class="sxs-lookup"><span data-stu-id="be5d6-484">Server-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="be5d6-485">Les API web communiquent avec les API web (parfois pour elles-mêmes, parfois pour le compte d’un utilisateur).</span><span class="sxs-lookup"><span data-stu-id="be5d6-485">Web APIs communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li></ul>|

## <span data-ttu-id="be5d6-486"><a id="override-token"></a>Remplacer le cache de jetons IdentityServer par défaut par une solution évolutive</span><span class="sxs-lookup"><span data-stu-id="be5d6-486"><a id="override-token"></a>Override the default Identity Server token cache with a scalable alternative</span></span>

| <span data-ttu-id="be5d6-487">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-487">Title</span></span>                   | <span data-ttu-id="be5d6-488">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-488">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-489">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-489">**Component**</span></span>               | <span data-ttu-id="be5d6-490">IdentityServer</span><span class="sxs-lookup"><span data-stu-id="be5d6-490">Identity Server</span></span> | 
| <span data-ttu-id="be5d6-491">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-491">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-492">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-492">Deployment</span></span> |  
| <span data-ttu-id="be5d6-493">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-493">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-494">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-494">Generic</span></span> |
| <span data-ttu-id="be5d6-495">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-495">**Attributes**</span></span>              | <span data-ttu-id="be5d6-496">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-496">N/A</span></span>  |
| <span data-ttu-id="be5d6-497">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-497">**References**</span></span>              | <span data-ttu-id="be5d6-498">[Identity Server Deployment - Caching](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html) (Déploiement d’IdentityServer - Mise en cache)</span><span class="sxs-lookup"><span data-stu-id="be5d6-498">[Identity Server Deployment - Caching](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html)</span></span> |
| <span data-ttu-id="be5d6-499">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-499">**Steps**</span></span> | <p><span data-ttu-id="be5d6-500">IdentityServer a un cache en mémoire intégré simple.</span><span class="sxs-lookup"><span data-stu-id="be5d6-500">IdentityServer has a simple built-in in-memory cache.</span></span> <span data-ttu-id="be5d6-501">Bien que cette fonction soit utile pour les applications natives à petite échelle, elle n’est pas adaptée pour les applications de serveur principal et de niveau intermédiaire pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="be5d6-501">While this is good for small scale native apps, it does not scale for mid tier and backend applications for the following reasons:</span></span></p><ul><li><span data-ttu-id="be5d6-502">Ces applications sont accessibles par plusieurs utilisateurs simultanément.</span><span class="sxs-lookup"><span data-stu-id="be5d6-502">These applications are accessed by many users at once.</span></span> <span data-ttu-id="be5d6-503">L’enregistrement de tous les jetons d’accès dans le même magasin crée des problèmes d’isolation et présente des défis lors du fonctionnement à l’échelle : beaucoup d’utilisateurs, chacun avec autant de jetons que de ressources auxquelles l’application accède pour leur compte, peut entraîner un nombre très élevé d’opérations de recherche très coûteuses.</span><span class="sxs-lookup"><span data-stu-id="be5d6-503">Saving all access tokens in the same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as the resources the app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="be5d6-504">Ces applications sont généralement déployées sur des topologies distribuées, où plusieurs nœuds doivent accéder au même cache.</span><span class="sxs-lookup"><span data-stu-id="be5d6-504">These applications are typically deployed on distributed topologies, where multiple nodes must have access to the same cache</span></span></li><li><span data-ttu-id="be5d6-505">Les jetons mis en cache doivent survivre aux désactivations et recyclages de processus.</span><span class="sxs-lookup"><span data-stu-id="be5d6-505">Cached tokens must survive process recycles and deactivations</span></span></li><li><span data-ttu-id="be5d6-506">Pour toutes les raisons susmentionnées, lors de l’implémentation des applications web, il est recommandé de remplacer le cache de jeton d’IdentityServer par défaut avec une solution évolutive telle que le cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="be5d6-506">For all the above reasons, while implementing web apps, it is recommended to override the default Identity Server's token cache with a scalable alternative such as Azure Redis cache</span></span></li></ul>|

## <span data-ttu-id="be5d6-507"><a id="binaries-signed"></a>Garantir que les fichiers binaires de l’application déployée sont signés numériquement</span><span class="sxs-lookup"><span data-stu-id="be5d6-507"><a id="binaries-signed"></a>Ensure that deployed application's binaries are digitally signed</span></span>

| <span data-ttu-id="be5d6-508">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-508">Title</span></span>                   | <span data-ttu-id="be5d6-509">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-509">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-510">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-510">**Component**</span></span>               | <span data-ttu-id="be5d6-511">Délimitation d’approbation machine</span><span class="sxs-lookup"><span data-stu-id="be5d6-511">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="be5d6-512">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-512">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-513">Déploiement</span><span class="sxs-lookup"><span data-stu-id="be5d6-513">Deployment</span></span> |  
| <span data-ttu-id="be5d6-514">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-514">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-515">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-515">Generic</span></span> |
| <span data-ttu-id="be5d6-516">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-516">**Attributes**</span></span>              | <span data-ttu-id="be5d6-517">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-517">N/A</span></span>  |
| <span data-ttu-id="be5d6-518">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-518">**References**</span></span>              | <span data-ttu-id="be5d6-519">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-519">N/A</span></span>  |
| <span data-ttu-id="be5d6-520">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-520">**Steps**</span></span> | <span data-ttu-id="be5d6-521">Assurez-vous que les fichiers binaires de l’application déployée sont signés numériquement afin que l’intégrité des fichiers binaires puisse être vérifiée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-521">Ensure that deployed application's binaries are digitally signed so that the integrity of the binaries can be verified</span></span>|

## <span data-ttu-id="be5d6-522"><a id="msmq-queues"></a>Activer l’authentification lors de la connexion aux files d’attente MSMQ dans WCF</span><span class="sxs-lookup"><span data-stu-id="be5d6-522"><a id="msmq-queues"></a>Enable authentication when connecting to MSMQ queues in WCF</span></span>

| <span data-ttu-id="be5d6-523">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-523">Title</span></span>                   | <span data-ttu-id="be5d6-524">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-524">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-525">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-525">**Component**</span></span>               | <span data-ttu-id="be5d6-526">WCF</span><span class="sxs-lookup"><span data-stu-id="be5d6-526">WCF</span></span> | 
| <span data-ttu-id="be5d6-527">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-527">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-528">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-528">Build</span></span> |  
| <span data-ttu-id="be5d6-529">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-529">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-530">Générique, NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="be5d6-530">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="be5d6-531">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-531">**Attributes**</span></span>              | <span data-ttu-id="be5d6-532">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-532">N/A</span></span> |
| <span data-ttu-id="be5d6-533">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-533">**References**</span></span>              | [<span data-ttu-id="be5d6-534">MSDN</span><span class="sxs-lookup"><span data-stu-id="be5d6-534">MSDN</span></span>](https://msdn.microsoft.com/library/ff648500.aspx) |
| <span data-ttu-id="be5d6-535">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-535">**Steps**</span></span> | <span data-ttu-id="be5d6-536">Le programme ne parvient pas à activer l’authentification lors de la connexion aux files d’attente MSMQ, un pirate peut envoyer anonymement des messages à la file d’attente pour traitement.</span><span class="sxs-lookup"><span data-stu-id="be5d6-536">Program fails to enable authentication when connecting to MSMQ queues, an attacker can anonymously submit messages to the queue for processing.</span></span> <span data-ttu-id="be5d6-537">Si l’authentification n’est pas utilisée pour se connecter à une file d’attente MSMQ pour remettre un message à un autre programme, un pirate pourrait envoyer un message malveillant anonyme.</span><span class="sxs-lookup"><span data-stu-id="be5d6-537">If authentication is not used to connect to an MSMQ queue used to deliver a message to another program, an attacker could submit an anonymous message that is malicious.</span></span>|

### <a name="example"></a><span data-ttu-id="be5d6-538">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-538">Example</span></span>
<span data-ttu-id="be5d6-539">L’élément `<netMsmqBinding/>` du fichier de configuration WCF ci-dessous indique à WCF de désactiver l’authentification lors de la connexion à une file d’attente MSMQ pour la remise du message.</span><span class="sxs-lookup"><span data-stu-id="be5d6-539">The `<netMsmqBinding/>` element of the WCF configuration file below instructs WCF to disable authentication when connecting to an MSMQ queue for message delivery.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""None"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```
<span data-ttu-id="be5d6-540">Configurez MSMQ pour exiger l’authentification de certificat ou de domaine Windows à tout moment pour les messages entrants ou sortants.</span><span class="sxs-lookup"><span data-stu-id="be5d6-540">Configure MSMQ to require Windows Domain or Certificate authentication at all times for any incoming or outgoing messages.</span></span>

### <a name="example"></a><span data-ttu-id="be5d6-541">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-541">Example</span></span>
<span data-ttu-id="be5d6-542">L’élément `<netMsmqBinding/>` du fichier de configuration WCF ci-dessous indique à WCF d’activer l’authentification de certificat lors de la connexion à une file d’attente MSMQ.</span><span class="sxs-lookup"><span data-stu-id="be5d6-542">The `<netMsmqBinding/>` element of the WCF configuration file below instructs WCF to enable certificate authentication when connecting to an MSMQ queue.</span></span> <span data-ttu-id="be5d6-543">Le client est authentifié à l’aide de certificats X.509.</span><span class="sxs-lookup"><span data-stu-id="be5d6-543">The client is authenticated using X.509 certificates.</span></span> <span data-ttu-id="be5d6-544">Le certificat client doit être présent dans le magasin de certificats du serveur.</span><span class="sxs-lookup"><span data-stu-id="be5d6-544">The client certificate must be present in the certificate store of the server.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""Certificate"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```

## <span data-ttu-id="be5d6-545"><a id="message-none"></a>WCF - Ne pas définir clientCredentialType du message sur la valeur « aucun »</span><span class="sxs-lookup"><span data-stu-id="be5d6-545"><a id="message-none"></a>WCF-Do not set Message clientCredentialType to none</span></span>

| <span data-ttu-id="be5d6-546">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-546">Title</span></span>                   | <span data-ttu-id="be5d6-547">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-547">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-548">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-548">**Component**</span></span>               | <span data-ttu-id="be5d6-549">WCF</span><span class="sxs-lookup"><span data-stu-id="be5d6-549">WCF</span></span> | 
| <span data-ttu-id="be5d6-550">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-550">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-551">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-551">Build</span></span> |  
| <span data-ttu-id="be5d6-552">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-552">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-553">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="be5d6-553">.NET Framework 3</span></span> |
| <span data-ttu-id="be5d6-554">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-554">**Attributes**</span></span>              | <span data-ttu-id="be5d6-555">Type d’informations d’identification client - Aucun</span><span class="sxs-lookup"><span data-stu-id="be5d6-555">Client Credential Type - None</span></span> |
| <span data-ttu-id="be5d6-556">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-556">**References**</span></span>              | <span data-ttu-id="be5d6-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="be5d6-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="be5d6-558">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-558">**Steps**</span></span> | <span data-ttu-id="be5d6-559">L’absence d’authentification signifie que tout le monde peut accéder à ce service.</span><span class="sxs-lookup"><span data-stu-id="be5d6-559">The absence of authentication means everyone is able to access this service.</span></span> <span data-ttu-id="be5d6-560">Un service qui n’authentifie pas ses clients autorise l’accès à tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="be5d6-560">A service that does not authenticate its clients allows access to all users.</span></span> <span data-ttu-id="be5d6-561">Configurez l’application pour une authentification en fonction des informations d’identification du client.</span><span class="sxs-lookup"><span data-stu-id="be5d6-561">Configure the application to authenticate against client credentials.</span></span> <span data-ttu-id="be5d6-562">Cela est possible en définissant le clientCredentialType du message sur Windows ou Certificat.</span><span class="sxs-lookup"><span data-stu-id="be5d6-562">This can be done by setting the message clientCredentialType to Windows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="be5d6-563">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-563">Example</span></span>
```
<message clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="be5d6-564"><a id="transport-none"></a>WCF - Ne pas définir clientCredentialType du transport sur la valeur « aucun »</span><span class="sxs-lookup"><span data-stu-id="be5d6-564"><a id="transport-none"></a>WCF-Do not set Transport clientCredentialType to none</span></span>

| <span data-ttu-id="be5d6-565">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-565">Title</span></span>                   | <span data-ttu-id="be5d6-566">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-566">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-567">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-567">**Component**</span></span>               | <span data-ttu-id="be5d6-568">WCF</span><span class="sxs-lookup"><span data-stu-id="be5d6-568">WCF</span></span> | 
| <span data-ttu-id="be5d6-569">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-569">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-570">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-570">Build</span></span> |  
| <span data-ttu-id="be5d6-571">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-571">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-572">Générique, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="be5d6-572">Generic, .NET Framework 3</span></span> |
| <span data-ttu-id="be5d6-573">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-573">**Attributes**</span></span>              | <span data-ttu-id="be5d6-574">Type d’informations d’identification client - Aucun</span><span class="sxs-lookup"><span data-stu-id="be5d6-574">Client Credential Type - None</span></span> |
| <span data-ttu-id="be5d6-575">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-575">**References**</span></span>              | <span data-ttu-id="be5d6-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="be5d6-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="be5d6-577">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-577">**Steps**</span></span> | <span data-ttu-id="be5d6-578">L’absence d’authentification signifie que tout le monde peut accéder à ce service.</span><span class="sxs-lookup"><span data-stu-id="be5d6-578">The absence of authentication means everyone is able to access this service.</span></span> <span data-ttu-id="be5d6-579">Un service qui n’authentifie pas ses clients autorise tous les utilisateurs à accéder à ses fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="be5d6-579">A service that does not authenticate its clients allows all users to access its functionality.</span></span> <span data-ttu-id="be5d6-580">Configurez l’application pour une authentification en fonction des informations d’identification du client.</span><span class="sxs-lookup"><span data-stu-id="be5d6-580">Configure the application to authenticate against client credentials.</span></span> <span data-ttu-id="be5d6-581">Cela est possible en définissant le clientCredentialType du transport sur Windows ou Certificat.</span><span class="sxs-lookup"><span data-stu-id="be5d6-581">This can be done by setting the transport clientCredentialType to Windows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="be5d6-582">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-582">Example</span></span>
```
<transport clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="be5d6-583"><a id="authn-secure-api"></a>Garantir que les techniques d’authentification standard sont utilisées pour sécuriser les API Web</span><span class="sxs-lookup"><span data-stu-id="be5d6-583"><a id="authn-secure-api"></a>Ensure that standard authentication techniques are used to secure Web APIs</span></span>

| <span data-ttu-id="be5d6-584">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-584">Title</span></span>                   | <span data-ttu-id="be5d6-585">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-585">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-586">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-586">**Component**</span></span>               | <span data-ttu-id="be5d6-587">API Web</span><span class="sxs-lookup"><span data-stu-id="be5d6-587">Web API</span></span> | 
| <span data-ttu-id="be5d6-588">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-588">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-589">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-589">Build</span></span> |  
| <span data-ttu-id="be5d6-590">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-590">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-591">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-591">Generic</span></span> |
| <span data-ttu-id="be5d6-592">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-592">**Attributes**</span></span>              | <span data-ttu-id="be5d6-593">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-593">N/A</span></span>  |
| <span data-ttu-id="be5d6-594">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-594">**References**</span></span>              | <span data-ttu-id="be5d6-595">[Authentication and Authorization in ASP.NET Web API](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api) (Authentification et autorisation dans l’API web ASP.NET), [External Authentication Services with ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services) (Services d’authentification externe avec l’API web ASP.NET (C#))</span><span class="sxs-lookup"><span data-stu-id="be5d6-595">[Authentication and Authorization in ASP.NET Web API](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [External Authentication Services with ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span></span> |
| <span data-ttu-id="be5d6-596">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-596">**Steps**</span></span> | <p><span data-ttu-id="be5d6-597">L’authentification désigne le processus dans lequel une entité prouve son identité, généralement par le biais d’informations d’identification, comme le nom d’utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="be5d6-597">Authentication is the process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="be5d6-598">Il existe plusieurs protocoles d’authentification disponibles qui peuvent vous être utiles.</span><span class="sxs-lookup"><span data-stu-id="be5d6-598">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="be5d6-599">Certains d’entre eux sont répertoriés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="be5d6-599">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="be5d6-600">Certificats clients</span><span class="sxs-lookup"><span data-stu-id="be5d6-600">Client certificates</span></span></li><li><span data-ttu-id="be5d6-601">Basé sur Windows</span><span class="sxs-lookup"><span data-stu-id="be5d6-601">Windows based</span></span></li><li><span data-ttu-id="be5d6-602">Basé sur des formulaires</span><span class="sxs-lookup"><span data-stu-id="be5d6-602">Forms based</span></span></li><li><span data-ttu-id="be5d6-603">Fédération - ADFS</span><span class="sxs-lookup"><span data-stu-id="be5d6-603">Federation - ADFS</span></span></li><li><span data-ttu-id="be5d6-604">Fédération - Azure AD</span><span class="sxs-lookup"><span data-stu-id="be5d6-604">Federation - Azure AD</span></span></li><li><span data-ttu-id="be5d6-605">Fédération - IdentityServer</span><span class="sxs-lookup"><span data-stu-id="be5d6-605">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="be5d6-606">Les liens dans la section Références fournissent des informations de bas niveau sur la façon dont les schémas d’authentification peuvent être implémentés pour sécuriser une API web.</span><span class="sxs-lookup"><span data-stu-id="be5d6-606">Links in the references section provide low-level details on how each of the authentication schemes can be implemented to secure a Web API.</span></span></p>|

## <span data-ttu-id="be5d6-607"><a id="authn-aad"></a>Utiliser des scénarios d’authentification standard pris en charge par Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="be5d6-607"><a id="authn-aad"></a>Use standard authentication scenarios supported by Azure Active Directory</span></span>

| <span data-ttu-id="be5d6-608">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-608">Title</span></span>                   | <span data-ttu-id="be5d6-609">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-609">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-610">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-610">**Component**</span></span>               | <span data-ttu-id="be5d6-611">Azure AD</span><span class="sxs-lookup"><span data-stu-id="be5d6-611">Azure AD</span></span> | 
| <span data-ttu-id="be5d6-612">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-612">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-613">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-613">Build</span></span> |  
| <span data-ttu-id="be5d6-614">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-614">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-615">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-615">Generic</span></span> |
| <span data-ttu-id="be5d6-616">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-616">**Attributes**</span></span>              | <span data-ttu-id="be5d6-617">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-617">N/A</span></span>  |
| <span data-ttu-id="be5d6-618">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-618">**References**</span></span>              | <span data-ttu-id="be5d6-619">[Scénarios d’authentification pour Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Exemples de code Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Guide du développeur Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span><span class="sxs-lookup"><span data-stu-id="be5d6-619">[Authentication Scenarios for Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Azure Active Directory Code Samples](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Azure Active Directory developer's guide](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span></span> |
| <span data-ttu-id="be5d6-620">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-620">**Steps**</span></span> | <p><span data-ttu-id="be5d6-621">Azure Active Directory (Azure AD) simplifie l’authentification pour les développeurs en fournissant l’identité en tant que service, avec la prise en charge des protocoles standard tels que OAuth 2.0 et OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="be5d6-621">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="be5d6-622">Vous trouverez ci-dessous les cinq principaux scénarios d’application pris en charge par Azure AD :</span><span class="sxs-lookup"><span data-stu-id="be5d6-622">Below are the five primary application scenarios supported by Azure AD:</span></span></p><ul><li><span data-ttu-id="be5d6-623">Navigateur web vers application web : un utilisateur doit se connecter à une application web sécurisée par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="be5d6-623">Web Browser to Web Application: A user needs to sign in to a web application that is secured by Azure AD</span></span></li><li><span data-ttu-id="be5d6-624">Application à page unique : un utilisateur doit se connecter à une application à page unique sécurisée par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="be5d6-624">Single Page Application (SPA): A user needs to sign in to a single page application that is secured by Azure AD</span></span></li><li><span data-ttu-id="be5d6-625">Application native vers API web : une application native qui s’exécute sur un téléphone, une tablette ou un PC doit authentifier un utilisateur pour obtenir des ressources d’une API web sécurisée par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="be5d6-625">Native Application to Web API: A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD</span></span></li><li><span data-ttu-id="be5d6-626">Application web vers API web : une application web doit obtenir des ressources d’une API web sécurisée par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="be5d6-626">Web Application to Web API: A web application needs to get resources from a web API secured by Azure AD</span></span></li><li><span data-ttu-id="be5d6-627">Application démon ou serveur vers API web : une application démon ou une application serveur sans interface utilisateur web doit obtenir des ressources d’une API web sécurisée par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="be5d6-627">Daemon or Server Application to Web API: A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD</span></span></li></ul><p><span data-ttu-id="be5d6-628">Consultez les liens dans la section Références pour en savoir plus sur l’implémentation de bas niveau.</span><span class="sxs-lookup"><span data-stu-id="be5d6-628">Please refer to the links in the references section for low-level implementation details</span></span></p>|

## <span data-ttu-id="be5d6-629"><a id="adal-scalable"></a>Remplacer le cache de jetons ADAL par défaut par une solution évolutive</span><span class="sxs-lookup"><span data-stu-id="be5d6-629"><a id="adal-scalable"></a>Override the default ADAL token cache with a scalable alternative</span></span>

| <span data-ttu-id="be5d6-630">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-630">Title</span></span>                   | <span data-ttu-id="be5d6-631">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-631">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-632">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-632">**Component**</span></span>               | <span data-ttu-id="be5d6-633">Azure AD</span><span class="sxs-lookup"><span data-stu-id="be5d6-633">Azure AD</span></span> | 
| <span data-ttu-id="be5d6-634">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-634">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-635">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-635">Build</span></span> |  
| <span data-ttu-id="be5d6-636">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-636">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-637">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-637">Generic</span></span> |
| <span data-ttu-id="be5d6-638">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-638">**Attributes**</span></span>              | <span data-ttu-id="be5d6-639">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-639">N/A</span></span>  |
| <span data-ttu-id="be5d6-640">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-640">**References**</span></span>              | <span data-ttu-id="be5d6-641">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) (Authentification moderne avec Azure Active Directory pour les applications web), [Using Redis as ADAL token cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/) (Utilisation de Redis en tant que cache de jeton ADAL)</span><span class="sxs-lookup"><span data-stu-id="be5d6-641">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [Using Redis as ADAL token cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)</span></span>  |
| <span data-ttu-id="be5d6-642">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-642">**Steps**</span></span> | <p><span data-ttu-id="be5d6-643">Le cache par défaut utilisé par ADAL (bibliothèque d’authentification Active Directory) est un cache en mémoire qui s’appuie sur un magasin statique, disponible au niveau du processus.</span><span class="sxs-lookup"><span data-stu-id="be5d6-643">The default cache that ADAL (Active Directory Authentication Library) uses is an in-memory cache that relies on a static store, available process-wide.</span></span> <span data-ttu-id="be5d6-644">Bien que cela fonctionne pour les applications natives, cela n’est pas adapté pour les applications de serveur principal et de niveau intermédiaire pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="be5d6-644">While this works for native applications, it does not scale for mid tier and backend applications for the following reasons:</span></span></p><ul><li><span data-ttu-id="be5d6-645">Ces applications sont accessibles par plusieurs utilisateurs simultanément.</span><span class="sxs-lookup"><span data-stu-id="be5d6-645">These applications are accessed by many users at once.</span></span> <span data-ttu-id="be5d6-646">L’enregistrement de tous les jetons d’accès dans le même magasin crée des problèmes d’isolation et présente des défis lors du fonctionnement à l’échelle : beaucoup d’utilisateurs, chacun avec autant de jetons que de ressources auxquelles l’application accède pour leur compte, peut entraîner un nombre très élevé d’opérations de recherche très coûteuses.</span><span class="sxs-lookup"><span data-stu-id="be5d6-646">Saving all access tokens in the same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as the resources the app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="be5d6-647">Ces applications sont généralement déployées sur des topologies distribuées, où plusieurs nœuds doivent accéder au même cache.</span><span class="sxs-lookup"><span data-stu-id="be5d6-647">These applications are typically deployed on distributed topologies, where multiple nodes must have access to the same cache</span></span></li><li><span data-ttu-id="be5d6-648">Les jetons mis en cache doivent survivre aux désactivations et recyclages de processus.</span><span class="sxs-lookup"><span data-stu-id="be5d6-648">Cached tokens must survive process recycles and deactivations</span></span></li></ul><p><span data-ttu-id="be5d6-649">Pour toutes les raisons susmentionnées, lors de l’implémentation des applications web, il est recommandé de remplacer le cache de jeton ADAL par défaut avec une solution évolutive telle que le cache Redis Azure.</span><span class="sxs-lookup"><span data-stu-id="be5d6-649">For all the above reasons, while implementing web apps, it is recommended to override the default ADAL token cache with a scalable alternative such as Azure Redis cache.</span></span></p>|

## <span data-ttu-id="be5d6-650"><a id="tokenreplaycache-adal"></a>Garantir que TokenReplayCache est utilisé pour empêcher la relecture de jetons d’authentification ADAL</span><span class="sxs-lookup"><span data-stu-id="be5d6-650"><a id="tokenreplaycache-adal"></a>Ensure that TokenReplayCache is used to prevent the replay of ADAL authentication tokens</span></span>

| <span data-ttu-id="be5d6-651">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-651">Title</span></span>                   | <span data-ttu-id="be5d6-652">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-652">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-653">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-653">**Component**</span></span>               | <span data-ttu-id="be5d6-654">Azure AD</span><span class="sxs-lookup"><span data-stu-id="be5d6-654">Azure AD</span></span> | 
| <span data-ttu-id="be5d6-655">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-655">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-656">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-656">Build</span></span> |  
| <span data-ttu-id="be5d6-657">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-657">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-658">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-658">Generic</span></span> |
| <span data-ttu-id="be5d6-659">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-659">**Attributes**</span></span>              | <span data-ttu-id="be5d6-660">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-660">N/A</span></span>  |
| <span data-ttu-id="be5d6-661">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-661">**References**</span></span>              | <span data-ttu-id="be5d6-662">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) (Authentification moderne avec Azure Active Directory pour les applications web)</span><span class="sxs-lookup"><span data-stu-id="be5d6-662">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/)</span></span> |
| <span data-ttu-id="be5d6-663">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-663">**Steps**</span></span> | <p><span data-ttu-id="be5d6-664">La propriété TokenReplayCache permet aux développeurs de définir un cache de relecture de jetons, un magasin qui peut être utilisé pour enregistrer les jetons afin de vérifier qu’aucun jeton ne peut être utilisé plusieurs fois.</span><span class="sxs-lookup"><span data-stu-id="be5d6-664">The TokenReplayCache property allows developers to define a token replay cache, a store that can be used for saving tokens for the purpose of verifying that no token can be used more than once.</span></span></p><p><span data-ttu-id="be5d6-665">Il s’agit d’une mesure contre une attaque courante, l’attaque judicieusement appelée relecture de jetons : un pirate interceptant le jeton envoyé à la connexion peut tenter de l’envoyer à nouveau à l’application (le « relire ») pour établir une nouvelle session.</span><span class="sxs-lookup"><span data-stu-id="be5d6-665">This is a measure against a common attack, the aptly called token replay attack: an attacker intercepting the token sent at sign-in might try to send it to the app again (“replay” it) for establishing a new session.</span></span> <span data-ttu-id="be5d6-666">Par exemple, dans le flux d’octroi de code d’OIDC, après une authentification utilisateur réussie, une demande vers le point de terminaison « /signin-oidc » de la partie de confiance est réalisée avec les paramètres « id_token », « code » et « état ».</span><span class="sxs-lookup"><span data-stu-id="be5d6-666">E.g., In OIDC code-grant flow, after successful user authentication, a request to "/signin-oidc" endpoint of the relying party is made with "id_token", "code" and "state" parameters.</span></span></p><p><span data-ttu-id="be5d6-667">La partie de confiance valide cette demande et établit une nouvelle session.</span><span class="sxs-lookup"><span data-stu-id="be5d6-667">The relying party validates this request and establishes a new session.</span></span> <span data-ttu-id="be5d6-668">Si un adversaire capture cette demande et la relit, il peut réussir à établir une session et tromper l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="be5d6-668">If an adversary captures this request and replays it, he/she can establish a successful session and spoof the user.</span></span> <span data-ttu-id="be5d6-669">La présence de la valeur à usage unique dans OpenID Connect peut limiter mais pas complètement éliminer les circonstances dans lesquelles l’attaque peut être mise en œuvre correctement.</span><span class="sxs-lookup"><span data-stu-id="be5d6-669">The presence of the nonce in OpenID Connect can limit but not fully eliminate the circumstances in which the attack can be successfully enacted.</span></span> <span data-ttu-id="be5d6-670">Pour protéger leurs applications, les développeurs peuvent fournir une implémentation de ITokenReplayCache et assigner une instance à TokenReplayCache.</span><span class="sxs-lookup"><span data-stu-id="be5d6-670">To protect their applications, developers can provide an implementation of ITokenReplayCache and assign an instance to TokenReplayCache.</span></span></p>|

### <a name="example"></a><span data-ttu-id="be5d6-671">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-671">Example</span></span>
```C#
// ITokenReplayCache defined in ADAL
public interface ITokenReplayCache
{
bool TryAdd(string securityToken, DateTime expiresOn);
bool TryFind(string securityToken);
}
```

### <a name="example"></a><span data-ttu-id="be5d6-672">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-672">Example</span></span>
<span data-ttu-id="be5d6-673">Voici un exemple d’implémentation de l’interface ITokenReplayCache.</span><span class="sxs-lookup"><span data-stu-id="be5d6-673">Here is a sample implementation of the ITokenReplayCache interface.</span></span> <span data-ttu-id="be5d6-674">(Veuillez personnaliser et mettre en œuvre votre infrastructure de mise en cache spécifique au projet)</span><span class="sxs-lookup"><span data-stu-id="be5d6-674">(Please customize and implement your project-specific caching framework)</span></span>
```C#
public class TokenReplayCache : ITokenReplayCache
{
    private readonly ICacheProvider cache; // Your project-specific cache provider
    public TokenReplayCache(ICacheProvider cache)
    {
        this.cache = cache;
    }
    public bool TryAdd(string securityToken, DateTime expiresOn)
    {
        if (this.cache.Get<string>(securityToken) == null)
        {
            this.cache.Set(securityToken, securityToken);
            return true;
        }
        return false;
    }
    public bool TryFind(string securityToken)
    {
        return this.cache.Get<string>(securityToken) != null;
    }
}
```
<span data-ttu-id="be5d6-675">Le cache implémenté doit être référencé dans les options OIDC via la propriété « TokenValidationParameters » comme suit.</span><span class="sxs-lookup"><span data-stu-id="be5d6-675">The implemented cache has to be referenced in OIDC options via the "TokenValidationParameters" property as follows.</span></span>
```C#
OpenIdConnectOptions openIdConnectOptions = new OpenIdConnectOptions
{
    AutomaticAuthenticate = true,
    ... // other configuration properties follow..
    TokenValidationParameters = new TokenValidationParameters
    {
        TokenReplayCache = new TokenReplayCache(/*Inject your cache provider*/);
    }
}
```

<span data-ttu-id="be5d6-676">Notez que pour tester l’efficacité de cette configuration, vous devez vous connecter à votre application protégée par OIDC locale et capturer la demande vers le point de terminaison `"/signin-oidc"` dans fiddler.</span><span class="sxs-lookup"><span data-stu-id="be5d6-676">Please note that to test the effectiveness of this configuration, login into your local OIDC-protected application and capture the request to `"/signin-oidc"` endpoint in fiddler.</span></span> <span data-ttu-id="be5d6-677">Lorsque la protection n’est pas en place, la relecture de cette demande dans fiddler définira un nouveau cookie de session.</span><span class="sxs-lookup"><span data-stu-id="be5d6-677">When the protection is not in place, replaying this request in fiddler will set a new session cookie.</span></span> <span data-ttu-id="be5d6-678">Lors de la relecture de la demande après avoir ajouté la protection TokenReplayCache, l’application lève une exception comme suit :`SecurityTokenReplayDetectedException: IDX10228: The securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span><span class="sxs-lookup"><span data-stu-id="be5d6-678">When the request is replayed after the TokenReplayCache protection is added, the application will throw an exception as follows: `SecurityTokenReplayDetectedException: IDX10228: The securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span></span>

## <span data-ttu-id="be5d6-679"><a id="adal-oauth2"></a>Utiliser les bibliothèques ADAL pour gérer les demandes de jeton des clients OAuth2 vers AAD (ou Active Directory local)</span><span class="sxs-lookup"><span data-stu-id="be5d6-679"><a id="adal-oauth2"></a>Use ADAL libraries to manage token requests from OAuth2 clients to AAD (or on-premises AD)</span></span>

| <span data-ttu-id="be5d6-680">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-680">Title</span></span>                   | <span data-ttu-id="be5d6-681">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-681">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-682">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-682">**Component**</span></span>               | <span data-ttu-id="be5d6-683">Azure AD</span><span class="sxs-lookup"><span data-stu-id="be5d6-683">Azure AD</span></span> | 
| <span data-ttu-id="be5d6-684">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-684">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-685">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-685">Build</span></span> |  
| <span data-ttu-id="be5d6-686">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-686">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-687">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-687">Generic</span></span> |
| <span data-ttu-id="be5d6-688">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-688">**Attributes**</span></span>              | <span data-ttu-id="be5d6-689">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-689">N/A</span></span>  |
| <span data-ttu-id="be5d6-690">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-690">**References**</span></span>              | [<span data-ttu-id="be5d6-691">ADAL</span><span class="sxs-lookup"><span data-stu-id="be5d6-691">ADAL</span></span>](https://azure.microsoft.com/documentation/articles/active-directory-authentication-libraries/) |
| <span data-ttu-id="be5d6-692">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-692">**Steps**</span></span> | <p><span data-ttu-id="be5d6-693">La bibliothèque d'authentification Azure AD (ADAL) permet aux développeurs d’applications clientes d’authentifier facilement les utilisateurs sur Active Directory (AD) en local ou sur le cloud, puis d'obtenir des jetons d'accès pour sécuriser les appels d'API.</span><span class="sxs-lookup"><span data-stu-id="be5d6-693">The Azure AD authentication Library (ADAL) enables client application developers to easily authenticate users to cloud or on-premises Active Directory (AD), and then obtain access tokens for securing API calls.</span></span></p><p><span data-ttu-id="be5d6-694">ADAL possède de nombreuses fonctionnalités qui facilitent l'authentification aux développeurs, notamment la prise en charge asynchrone, un cache de jeton configurable qui stocke les jetons d'accès et les jetons d'actualisation, l'actualisation automatique des jetons lorsqu'un jeton d'accès expire et qu’un jeton d'actualisation est disponible, et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="be5d6-694">ADAL has many features that make authentication easier for developers, such as asynchronous support, a configurable token cache that stores access tokens and refresh tokens, automatic token refresh when an access token expires and a refresh token is available, and more.</span></span></p><p><span data-ttu-id="be5d6-695">En gérant l’essentiel de la complexité, la bibliothèque ADAL peut aider les développeurs à se concentrer sur la logique métier dans leur application et à sécuriser facilement les ressources sans être un expert de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="be5d6-695">By handling most of the complexity, ADAL can help a developer focus on business logic in their application and easily secure resources without being an expert on security.</span></span> <span data-ttu-id="be5d6-696">Des bibliothèques distinctes sont disponibles pour .NET, JavaScript (client et Node.js), iOS, Android et Java.</span><span class="sxs-lookup"><span data-stu-id="be5d6-696">Separate libraries are available for .NET, JavaScript (client and Node.js), iOS, Android and Java.</span></span></p>|

## <span data-ttu-id="be5d6-697"><a id="authn-devices-field"></a>Authentifier les appareils se connectant à la passerelle de champ</span><span class="sxs-lookup"><span data-stu-id="be5d6-697"><a id="authn-devices-field"></a>Authenticate devices connecting to the Field Gateway</span></span>

| <span data-ttu-id="be5d6-698">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-698">Title</span></span>                   | <span data-ttu-id="be5d6-699">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-699">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-700">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-700">**Component**</span></span>               | <span data-ttu-id="be5d6-701">Passerelle de champ IoT</span><span class="sxs-lookup"><span data-stu-id="be5d6-701">IoT Field Gateway</span></span> | 
| <span data-ttu-id="be5d6-702">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-702">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-703">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-703">Build</span></span> |  
| <span data-ttu-id="be5d6-704">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-704">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-705">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-705">Generic</span></span> |
| <span data-ttu-id="be5d6-706">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-706">**Attributes**</span></span>              | <span data-ttu-id="be5d6-707">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-707">N/A</span></span>  |
| <span data-ttu-id="be5d6-708">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-708">**References**</span></span>              | <span data-ttu-id="be5d6-709">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-709">N/A</span></span>  |
| <span data-ttu-id="be5d6-710">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-710">**Steps**</span></span> | <span data-ttu-id="be5d6-711">Assurez-vous que chaque appareil est authentifié par la passerelle de champ avant d’accepter des données provenant de ceux-ci et de faciliter les communications en amont avec la passerelle de cloud.</span><span class="sxs-lookup"><span data-stu-id="be5d6-711">Ensure that each device is authenticated by the Field Gateway before accepting data from them and before facilitating upstream communications with the Cloud Gateway.</span></span> <span data-ttu-id="be5d6-712">En outre, assurez-vous que les appareils se connectent avec des informations d’identification par appareil, afin que chaque appareil puisse être identifié de manière unique.</span><span class="sxs-lookup"><span data-stu-id="be5d6-712">Also, ensure that devices connect with a per device credential so that individual devices can be uniquely identified.</span></span>|

## <span data-ttu-id="be5d6-713"><a id="authn-devices-cloud"></a>Garantir que les appareils se connectant à la passerelle de cloud sont authentifiés</span><span class="sxs-lookup"><span data-stu-id="be5d6-713"><a id="authn-devices-cloud"></a>Ensure that devices connecting to Cloud gateway are authenticated</span></span>

| <span data-ttu-id="be5d6-714">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-714">Title</span></span>                   | <span data-ttu-id="be5d6-715">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-715">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-716">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-716">**Component**</span></span>               | <span data-ttu-id="be5d6-717">Passerelle de cloud IoT</span><span class="sxs-lookup"><span data-stu-id="be5d6-717">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="be5d6-718">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-718">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-719">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-719">Build</span></span> |  
| <span data-ttu-id="be5d6-720">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-720">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-721">Générique, C#, Node.JS</span><span class="sxs-lookup"><span data-stu-id="be5d6-721">Generic, C#, Node.JS,</span></span>  |
| <span data-ttu-id="be5d6-722">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-722">**Attributes**</span></span>              | <span data-ttu-id="be5d6-723">N/A, choix de passerelle - Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="be5d6-723">N/A, Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="be5d6-724">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-724">**References**</span></span>              | <span data-ttu-id="be5d6-725">N/A, [Mise en route d’Azure IoT Hub (.NET)](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Mise en route d’Azure IoT Hub (Node)](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Contrôler l’accès à IoT Hub](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [référentiel Git](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span><span class="sxs-lookup"><span data-stu-id="be5d6-725">N/A, [Azure IoT hub with .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Getting Started wih IoT hub and Node JS](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Securing IoT with SAS and certificates](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Git repository](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span></span> |
| <span data-ttu-id="be5d6-726">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-726">**Steps**</span></span> | <ul><li><span data-ttu-id="be5d6-727">**Générique :** authentifiez l’appareil à l’aide du protocole TLS (Transport Layer Security) ou IPSec.</span><span class="sxs-lookup"><span data-stu-id="be5d6-727">**Generic:** Authenticate the device using Transport Layer Security (TLS) or IPSec.</span></span> <span data-ttu-id="be5d6-728">L’infrastructure doit prendre en charge l’utilisation d’une clé prépartagée (PSK) sur les périphériques qui ne peuvent pas gérer le chiffrement asymétrique complet.</span><span class="sxs-lookup"><span data-stu-id="be5d6-728">Infrastructure should support using pre-shared key (PSK) on those devices that cannot handle full asymmetric cryptography.</span></span> <span data-ttu-id="be5d6-729">Utilisez Azure AD, OAuth.</span><span class="sxs-lookup"><span data-stu-id="be5d6-729">Leverage Azure AD, Oauth.</span></span></li><li><span data-ttu-id="be5d6-730">**C# :** par défaut, la méthode de création Create crée une instance DeviceClient qui utilise le protocole AMQP pour communiquer avec IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="be5d6-730">**C#:** When creating a DeviceClient instance, by default, the Create method creates a DeviceClient instance that uses the AMQP protocol to communicate with IoT Hub.</span></span> <span data-ttu-id="be5d6-731">Pour utiliser le protocole HTTPS, remplacez la méthode Create afin de pouvoir spécifier le protocole.</span><span class="sxs-lookup"><span data-stu-id="be5d6-731">To use the HTTPS protocol, use the override of the Create method that enables you to specify the protocol.</span></span> <span data-ttu-id="be5d6-732">Si vous utilisez le protocole HTTPS, vous devez également ajouter le package NuGet `Microsoft.AspNet.WebApi.Client` à votre projet de manière à inclure l’espace de noms `System.Net.Http.Formatting`.</span><span class="sxs-lookup"><span data-stu-id="be5d6-732">If you use the HTTPS protocol, you should also add the `Microsoft.AspNet.WebApi.Client` NuGet package to your project to include the `System.Net.Http.Formatting` namespace.</span></span></li></ul>|

### <a name="example"></a><span data-ttu-id="be5d6-733">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-733">Example</span></span>
```C#
static DeviceClient deviceClient;

static string deviceKey = "{device key}";
static string iotHubUri = "{iot hub hostname}";

var messageString = "{message in string format}";
var message = new Message(Encoding.ASCII.GetBytes(messageString));

deviceClient = DeviceClient.Create(iotHubUri, new DeviceAuthenticationWithRegistrySymmetricKey("myFirstDevice", deviceKey));

await deviceClient.SendEventAsync(message);
```

### <a name="example"></a><span data-ttu-id="be5d6-734">Exemple</span><span class="sxs-lookup"><span data-stu-id="be5d6-734">Example</span></span>
<span data-ttu-id="be5d6-735">**Node.JS : authentification**</span><span class="sxs-lookup"><span data-stu-id="be5d6-735">**Node.JS: Authentication**</span></span>
#### <a name="symmetric-key"></a><span data-ttu-id="be5d6-736">Clé symétrique</span><span class="sxs-lookup"><span data-stu-id="be5d6-736">Symmetric key</span></span>
* <span data-ttu-id="be5d6-737">Créez un IoT Hub sur Azure.</span><span class="sxs-lookup"><span data-stu-id="be5d6-737">Create a IoT hub on azure</span></span>
* <span data-ttu-id="be5d6-738">Créez une entrée dans le registre des identités de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="be5d6-738">Create an entry in the device identity registry</span></span>
    ```javascript
    var device = new iothub.Device(null);
    device.deviceId = <DeviceId >
    registry.create(device, function(err, deviceInfo, res) {})
    ```
* <span data-ttu-id="be5d6-739">Créez un appareil simulé.</span><span class="sxs-lookup"><span data-stu-id="be5d6-739">Create a simulated device</span></span>
    ```javascript
    var clientFromConnectionString = require('azure-iot-device-amqp').clientFromConnectionString;
    var Message = require('azure-iot-device').Message;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>SharedAccessKey=<SharedAccessKey>';
    var client = clientFromConnectionString(connectionString);
    ```
#### <a name="sas-token"></a><span data-ttu-id="be5d6-740">Jeton SAP</span><span class="sxs-lookup"><span data-stu-id="be5d6-740">SAS Token</span></span>
* <span data-ttu-id="be5d6-741">Généré en interne lors de l’utilisation de la clé symétrique, mais nous pouvons le générer et l’utiliser explicitement également.</span><span class="sxs-lookup"><span data-stu-id="be5d6-741">Gets internally generated when using symmetric key but we can generate and use it explicitly as well</span></span>
* <span data-ttu-id="be5d6-742">Définissez un protocole : `var Http = require('azure-iot-device-http').Http;`.</span><span class="sxs-lookup"><span data-stu-id="be5d6-742">Define a protocol : `var Http = require('azure-iot-device-http').Http;`</span></span>
* <span data-ttu-id="be5d6-743">Créez un jeton SAP :</span><span class="sxs-lookup"><span data-stu-id="be5d6-743">Create a sas token :</span></span>
    ```javascript
    resourceUri = encodeURIComponent(resourceUri.toLowerCase()).toLowerCase();
    var deviceName = "<deviceName >";
    var expires = (Date.now() / 1000) + expiresInMins * 60;
    var toSign = resourceUri + '\n' + expires;
    // using crypto
    var decodedPassword = new Buffer(signingKey, 'base64').toString('binary');
    const hmac = crypto.createHmac('sha256', decodedPassword);
    hmac.update(toSign);
    var base64signature = hmac.digest('base64');
    var base64UriEncoded = encodeURIComponent(base64signature);
    // construct authorization string
    var token = "SharedAccessSignature sr=" + resourceUri + "%2fdevices%2f"+deviceName+"&sig="
    + base64UriEncoded + "&se=" + expires;
    if (policyName) token += "&skn="+policyName;
    return token;
    ```
* <span data-ttu-id="be5d6-744">Connectez-vous à l’aide du jeton SAP :</span><span class="sxs-lookup"><span data-stu-id="be5d6-744">Connect using sas token:</span></span> 
    ```javascript
    Client.fromSharedAccessSignature(sas, Http); 
    ```
#### <a name="certificates"></a><span data-ttu-id="be5d6-745">Certificats</span><span class="sxs-lookup"><span data-stu-id="be5d6-745">Certificates</span></span>
* <span data-ttu-id="be5d6-746">Générez un certificat X509 auto-signé à l’aide d’un outil tel qu’OpenSSL pour créer des fichiers .cert et .key pour stocker respectivement le certificat et la clé.</span><span class="sxs-lookup"><span data-stu-id="be5d6-746">Generate a self signed X509 certificate using any tool such as OpenSSL to generate a .cert and .key files to store the certificate and the key respectively</span></span>
* <span data-ttu-id="be5d6-747">Approvisionnez un appareil qui accepte une connexion sécurisée à l’aide de certificats.</span><span class="sxs-lookup"><span data-stu-id="be5d6-747">Provision a device that accepts secured connection using certificates.</span></span>
    ```javascript
    var connectionString = '<connectionString>';
    var registry = iothub.Registry.fromConnectionString(connectionString);
    var deviceJSON = {deviceId:"<deviceId>",
    authentication: {
        x509Thumbprint: {
        primaryThumbprint: "<PrimaryThumbprint>",
        secondaryThumbprint: "<SecondaryThumbprint>"
        }
    }}
    var device = deviceJSON;
    registry.create(device, function (err) {});
    ```
* <span data-ttu-id="be5d6-748">Connectez un appareil à l’aide d’un certificat.</span><span class="sxs-lookup"><span data-stu-id="be5d6-748">Connect a device using a certificate</span></span>
    ```javascript
    var Protocol = require('azure-iot-device-http').Http;
    var Client = require('azure-iot-device').Client;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>x509=true';
    var client = Client.fromConnectionString(connectionString, Protocol);
    var options = {
        key: fs.readFileSync('./key.pem', 'utf8'),
        cert: fs.readFileSync('./server.crt', 'utf8')
    }; 
    // Calling setOptions with the x509 certificate and key (and optionally, passphrase) will configure the client //transport to use x509 when connecting to IoT Hub
    client.setOptions(options);
    //call fn to execute after the connection is set up
    client.open(fn);
    ```

## <span data-ttu-id="be5d6-749"><a id="authn-cred"></a>Utiliser les informations d’authentification par appareil</span><span class="sxs-lookup"><span data-stu-id="be5d6-749"><a id="authn-cred"></a>Use per-device authentication credentials</span></span>

| <span data-ttu-id="be5d6-750">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-750">Title</span></span>                   | <span data-ttu-id="be5d6-751">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-751">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-752">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-752">**Component**</span></span>               | <span data-ttu-id="be5d6-753">Passerelle de cloud IoT</span><span class="sxs-lookup"><span data-stu-id="be5d6-753">IoT Cloud Gateway</span></span>  | 
| <span data-ttu-id="be5d6-754">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-754">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-755">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-755">Build</span></span> |  
| <span data-ttu-id="be5d6-756">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-756">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-757">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-757">Generic</span></span> |
| <span data-ttu-id="be5d6-758">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-758">**Attributes**</span></span>              | <span data-ttu-id="be5d6-759">Choix de passerelle - Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="be5d6-759">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="be5d6-760">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-760">**References**</span></span>              | [<span data-ttu-id="be5d6-761">Contrôler l’accès à IoT Hub</span><span class="sxs-lookup"><span data-stu-id="be5d6-761">Azure IoT Hub Security Tokens</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/) |
| <span data-ttu-id="be5d6-762">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-762">**Steps**</span></span> | <span data-ttu-id="be5d6-763">Utilisez des informations d’authentification par appareil à l’aide des jetons SAP en fonction de la clé d’appareil ou du certificat de client plutôt que des stratégies d’accès partagé au niveau d’IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="be5d6-763">Use per device authentication credentials using SaS tokens based on Device key or Client Certificate, instead of IoT Hub-level shared access policies.</span></span> <span data-ttu-id="be5d6-764">Cela empêche la réutilisation des jetons d’authentification d’une passerelle de champ ou d’un appareil par un autre.</span><span class="sxs-lookup"><span data-stu-id="be5d6-764">This prevents the reuse of authentication tokens of one device or field gateway by another</span></span> |

## <span data-ttu-id="be5d6-765"><a id="req-containers-anon"></a>Garantir que seuls les conteneurs et blobs requis disposent d’un accès en lecture anonyme</span><span class="sxs-lookup"><span data-stu-id="be5d6-765"><a id="req-containers-anon"></a>Ensure that only the required containers and blobs are given anonymous read access</span></span>

| <span data-ttu-id="be5d6-766">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-766">Title</span></span>                   | <span data-ttu-id="be5d6-767">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-767">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-768">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-768">**Component**</span></span>               | <span data-ttu-id="be5d6-769">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="be5d6-769">Azure Storage</span></span> | 
| <span data-ttu-id="be5d6-770">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-770">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-771">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-771">Build</span></span> |  
| <span data-ttu-id="be5d6-772">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-772">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-773">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-773">Generic</span></span> |
| <span data-ttu-id="be5d6-774">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-774">**Attributes**</span></span>              | <span data-ttu-id="be5d6-775">StorageType - Blob</span><span class="sxs-lookup"><span data-stu-id="be5d6-775">StorageType - Blob</span></span> |
| <span data-ttu-id="be5d6-776">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-776">**References**</span></span>              | <span data-ttu-id="be5d6-777">[Gestion de l’accès en lecture anonyme aux conteneurs et aux objets blob](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Utilisation des signatures d’accès partagé (SAP)](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span><span class="sxs-lookup"><span data-stu-id="be5d6-777">[Manage anonymous read access to containers and blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Shared Access Signatures, Part 1: Understanding the SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span></span> |
| <span data-ttu-id="be5d6-778">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-778">**Steps**</span></span> | <p><span data-ttu-id="be5d6-779">Par défaut, un conteneur et tous les objets blob qu'il contient sont accessibles uniquement par le propriétaire du compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="be5d6-779">By default, a container and any blobs within it may be accessed only by the owner of the storage account.</span></span> <span data-ttu-id="be5d6-780">Pour fournir aux utilisateurs anonymes des autorisations de lecture sur un conteneur et ses blobs, il est possible de configurer les autorisations du conteneur afin d’autoriser l’accès public.</span><span class="sxs-lookup"><span data-stu-id="be5d6-780">To give anonymous users read permissions to a container and its blobs, one can set the container permissions to allow public access.</span></span> <span data-ttu-id="be5d6-781">Les utilisateurs anonymes peuvent lire les objets blob d’un conteneur accessible publiquement sans avoir à authentifier la demande.</span><span class="sxs-lookup"><span data-stu-id="be5d6-781">Anonymous users can read blobs within a publicly accessible container without authenticating the request.</span></span></p><p><span data-ttu-id="be5d6-782">Les conteneurs fournissent les options suivantes pour gérer leur accès :</span><span class="sxs-lookup"><span data-stu-id="be5d6-782">Containers provide the following options for managing container access:</span></span></p><ul><li><span data-ttu-id="be5d6-783">Accès public en lecture : les données de conteneur et de blob peuvent être lues via une demande anonyme.</span><span class="sxs-lookup"><span data-stu-id="be5d6-783">Full public read access: Container and blob data can be read via anonymous request.</span></span> <span data-ttu-id="be5d6-784">Les clients peuvent énumérer les objets blob à l’intérieur du conteneur via une demande anonyme, mais ne peuvent pas énumérer les conteneurs dans le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="be5d6-784">Clients can enumerate blobs within the container via anonymous request, but cannot enumerate containers within the storage account.</span></span></li><li><span data-ttu-id="be5d6-785">Accès public en lecture pour les blobs uniquement : les données de blobs à l’intérieur de ce conteneur peuvent être lues via une demande anonyme, mais les données du conteneur ne sont pas disponibles.</span><span class="sxs-lookup"><span data-stu-id="be5d6-785">Public read access for blobs only: Blob data within this container can be read via anonymous request, but container data is not available.</span></span> <span data-ttu-id="be5d6-786">Les clients ne peuvent pas énumérer les blobs à l’intérieur du conteneur via une demande anonyme.</span><span class="sxs-lookup"><span data-stu-id="be5d6-786">Clients cannot enumerate blobs within the container via anonymous request</span></span></li><li><span data-ttu-id="be5d6-787">Pas d’accès public en lecture : les données de conteneur et de blob ne peuvent être lues que par le propriétaire du compte.</span><span class="sxs-lookup"><span data-stu-id="be5d6-787">No public read access: Container and blob data can be read by the account owner only</span></span></li></ul><p><span data-ttu-id="be5d6-788">L’accès anonyme est idéal dans les situations où certains blobs doivent toujours être disponibles pour l’accès en lecture anonyme.</span><span class="sxs-lookup"><span data-stu-id="be5d6-788">Anonymous access is best for scenarios where certain blobs should always be available for anonymous read access.</span></span> <span data-ttu-id="be5d6-789">Pour un contrôle plus fin, il est possible de créer une signature d’accès partagé de manière à déléguer un accès restreint en utilisant des autorisations différentes sur un intervalle de temps spécifié.</span><span class="sxs-lookup"><span data-stu-id="be5d6-789">For finer-grained control, one can create a shared access signature, which enables to delegate restricted access using different permissions and over a specified time interval.</span></span> <span data-ttu-id="be5d6-790">Garantissez que les conteneurs et les blobs, qui peuvent éventuellement contenir des données sensibles, ne bénéficient pas d’un accès anonyme accidentellement.</span><span class="sxs-lookup"><span data-stu-id="be5d6-790">Ensure that containers and blobs, which may potentially contain sensitive data, are not given anonymous access accidentally</span></span></p>|

## <span data-ttu-id="be5d6-791"><a id="limited-access-sas"></a>Accorder un accès limité aux objets dans le stockage Azure à l’aide de SAS ou SAP</span><span class="sxs-lookup"><span data-stu-id="be5d6-791"><a id="limited-access-sas"></a>Grant limited access to objects in Azure storage using SAS or SAP</span></span>

| <span data-ttu-id="be5d6-792">Intitulé</span><span class="sxs-lookup"><span data-stu-id="be5d6-792">Title</span></span>                   | <span data-ttu-id="be5d6-793">Détails</span><span class="sxs-lookup"><span data-stu-id="be5d6-793">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="be5d6-794">**Composant**</span><span class="sxs-lookup"><span data-stu-id="be5d6-794">**Component**</span></span>               | <span data-ttu-id="be5d6-795">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="be5d6-795">Azure Storage</span></span> | 
| <span data-ttu-id="be5d6-796">**Phase SDL**</span><span class="sxs-lookup"><span data-stu-id="be5d6-796">**SDL Phase**</span></span>               | <span data-ttu-id="be5d6-797">Créer</span><span class="sxs-lookup"><span data-stu-id="be5d6-797">Build</span></span> |  
| <span data-ttu-id="be5d6-798">**Technologies applicables**</span><span class="sxs-lookup"><span data-stu-id="be5d6-798">**Applicable Technologies**</span></span> | <span data-ttu-id="be5d6-799">Générique</span><span class="sxs-lookup"><span data-stu-id="be5d6-799">Generic</span></span> |
| <span data-ttu-id="be5d6-800">**Attributs**</span><span class="sxs-lookup"><span data-stu-id="be5d6-800">**Attributes**</span></span>              | <span data-ttu-id="be5d6-801">N/A</span><span class="sxs-lookup"><span data-stu-id="be5d6-801">N/A</span></span> |
| <span data-ttu-id="be5d6-802">**Informations de référence**</span><span class="sxs-lookup"><span data-stu-id="be5d6-802">**References**</span></span>              | <span data-ttu-id="be5d6-803">[Utilisation des signatures d’accès partagé (SAP)](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Signatures d’accès partagé, partie 2 : créer et utiliser une signature d’accès partagé avec Blob Storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [Comment déléguer l’accès aux objets dans votre compte à l’aide de signatures d’accès partagé et stratégies d’accès stockées](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span><span class="sxs-lookup"><span data-stu-id="be5d6-803">[Shared Access Signatures, Part 1: Understanding the SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Shared Access Signatures, Part 2: Create and use a SAS with Blob storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [How to delegate access to objects in your account using Shared Access Signatures and Stored Access Policies](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span></span> |
| <span data-ttu-id="be5d6-804">**Étapes**</span><span class="sxs-lookup"><span data-stu-id="be5d6-804">**Steps**</span></span> | <p><span data-ttu-id="be5d6-805">Une signature d’accès partagé (SAP) constitue un moyen efficace pour octroyer aux autres clients un accès limité aux blobs dans un compte de stockage, sans exposer de clé d’accès de compte.</span><span class="sxs-lookup"><span data-stu-id="be5d6-805">Using a shared access signature (SAS) is a powerful way to grant limited access to objects in a storage account to other clients, without having to expose account access key.</span></span> <span data-ttu-id="be5d6-806">La signature d'accès partagé est un URI qui englobe dans ses paramètres de requête toutes les informations nécessaires pour un accès authentifié à une ressource de stockage.</span><span class="sxs-lookup"><span data-stu-id="be5d6-806">The SAS is a URI that encompasses in its query parameters all of the information necessary for authenticated access to a storage resource.</span></span> <span data-ttu-id="be5d6-807">Pour accéder aux ressources de stockage avec la signature d'accès partagé, il suffit au client de transmettre cette dernière à la méthode ou au constructeur approprié.</span><span class="sxs-lookup"><span data-stu-id="be5d6-807">To access storage resources with the SAS, the client only needs to pass in the SAS to the appropriate constructor or method.</span></span></p><p><span data-ttu-id="be5d6-808">Vous pouvez utiliser une signature d'accès partagé lorsque vous voulez fournir un accès aux ressources dans votre compte de stockage à un client qui ne peut pas être approuvé avec la clé du compte.</span><span class="sxs-lookup"><span data-stu-id="be5d6-808">You can use a SAS when you want to provide access to resources in your storage account to a client that can't be trusted with the account key.</span></span> <span data-ttu-id="be5d6-809">Vos clés de compte de stockage incluent une clé primaire et une clé secondaire, qui octroient toutes deux un accès administratif à votre compte et à toutes ses ressources.</span><span class="sxs-lookup"><span data-stu-id="be5d6-809">Your storage account keys include both a primary and secondary key, both of which grant administrative access to your account and all of the resources in it.</span></span> <span data-ttu-id="be5d6-810">En exposant l'une ou l'autre des clés de votre compte, vous courez le risque d'une utilisation malveillante ou négligente de ce dernier.</span><span class="sxs-lookup"><span data-stu-id="be5d6-810">Exposing either of your account keys opens your account to the possibility of malicious or negligent use.</span></span> <span data-ttu-id="be5d6-811">Les signatures d'accès partagé offrent une alternative sûre qui permet aux autres clients de lire, d'écrire et de supprimer des données dans votre compte de stockage en fonction des autorisations que vous avez octroyées, sans avoir besoin de la clé du compte.</span><span class="sxs-lookup"><span data-stu-id="be5d6-811">Shared access signatures provide a safe alternative that allows other clients to read, write, and delete data in your storage account according to the permissions you've granted, and without need for the account key.</span></span></p><p><span data-ttu-id="be5d6-812">Si vous avez un ensemble logique de paramètres qui sont chaque fois similaires, il est plus judicieux d’utiliser une stratégie d’accès stockée.</span><span class="sxs-lookup"><span data-stu-id="be5d6-812">If you have a logical set of parameters that are similar each time, using a Stored Access Policy (SAP) is a better idea.</span></span> <span data-ttu-id="be5d6-813">Comme l’utilisation d’une signature d’accès partagé dérivée d’une stratégie d’accès stockée vous permet de révoquer immédiatement cette signature d’accès partagé, il est recommandé de toujours utiliser des stratégies d’accès stockées quand cela est possible.</span><span class="sxs-lookup"><span data-stu-id="be5d6-813">Because using a SAS derived from a Stored Access Policy gives you the ability to revoke that SAS immediately, it is the recommended best practice to always use Stored Access Policies when possible.</span></span></p>|