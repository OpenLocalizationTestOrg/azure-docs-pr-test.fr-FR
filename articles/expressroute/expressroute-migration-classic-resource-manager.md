---
title: "Migrer des ExpressRoute associé des réseaux virtuels à partir de tooResource classique Manager : Azure : PowerShell | Documents Microsoft"
description: "Cette page décrit comment toomigrate associé des réseaux virtuels tooResource Manager après le déplacement de votre circuit."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="fcbe0-103">Migrer des ExpressRoute associé des réseaux virtuels à partir de tooResource classique Manager</span><span class="sxs-lookup"><span data-stu-id="fcbe0-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="fcbe0-104">Cet article explique comment toomigrate Azure ExpressRoute associé des réseaux virtuels à partir du modèle de déploiement du modèle toohello Azure Resource Manager hello déploiement classique après le déplacement de votre circuit ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="fcbe0-105">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="fcbe0-105">Before you begin</span></span>
* <span data-ttu-id="fcbe0-106">Vérifiez que vous disposez de version la plus récente des modules d’Azure PowerShell hello hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="fcbe0-107">Pour plus d’informations, consultez [comment tooinstall et configurer Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="fcbe0-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="fcbe0-108">Assurez-vous que vous avez consulté hello [conditions préalables](expressroute-prerequisites.md), [exigences routage](expressroute-routing.md), et [workflows](expressroute-workflows.md) avant de commencer la configuration.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="fcbe0-109">Passez en revue les informations hello qui sont fournies sous [déplacement d’un circuit ExpressRoute de tooResource classique Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="fcbe0-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="fcbe0-110">Assurez-vous de bien comprendre les limites de hello et limitations.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="fcbe0-111">Vérifiez que le circuit de hello est complètement opérationnel dans le modèle de déploiement classique hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="fcbe0-112">Assurez-vous que vous disposez d’un groupe de ressources qui a été créé dans le modèle de déploiement du Gestionnaire de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="fcbe0-113">Passez en revue hello suivant la documentation de la migration de la ressource :</span><span class="sxs-lookup"><span data-stu-id="fcbe0-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="fcbe0-114">Plateforme prise en charge la migration des ressources IaaS de classique tooAzure Gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="fcbe0-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="fcbe0-115">Techniques détaillées sur la plateforme prise en charge la migration à partir de tooAzure classique Gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="fcbe0-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="fcbe0-116">FAQ : Plateforme prise en charge la migration des ressources IaaS de classique tooAzure Gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="fcbe0-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="fcbe0-117">Passer en revue les erreurs les plus courantes de la migration et leur prévention</span><span class="sxs-lookup"><span data-stu-id="fcbe0-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="fcbe0-118">Scénarios pris en charge et non pris en charge</span><span class="sxs-lookup"><span data-stu-id="fcbe0-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="fcbe0-119">Un circuit ExpressRoute peut être déplacé d’environnement de gestionnaire de ressources hello toohello classique sans interruption de service.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="fcbe0-120">Vous pouvez déplacer un circuit ExpressRoute de toohello classique de hello environnement du Gestionnaire de ressources sans interruption.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="fcbe0-121">Suivez les instructions de hello dans [déplacement des circuits ExpressRoute à partir du modèle de déploiement de gestionnaire de ressources hello toohello classique à l’aide de PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="fcbe0-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="fcbe0-122">Il s’agit d’un réseau virtuel de prérequis toomove ressources toohello connecté.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="fcbe0-123">Réseaux virtuels, les passerelles et les déploiements associés au sein du réseau virtuel de hello qui sont attaché tooan circuit ExpressRoute Bonjour même abonnement peut être migrés environnement du Gestionnaire de ressources toohello sans interruption de service.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="fcbe0-124">Vous pouvez suivre hello étapes décrites plus loin toomigrate ressources telles que les réseaux virtuels, les passerelles et les ordinateurs virtuels déployés dans le réseau virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="fcbe0-125">Vous devez vous assurer que les réseaux virtuels hello sont configurés correctement avant leur migration.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="fcbe0-126">Réseaux virtuels, les passerelles et les déploiements associés au sein du réseau virtuel hello qui ne sont pas dans hello même abonnement comme hello circuit ExpressRoute nécessiter la migration de hello toocomplete des temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="fcbe0-127">Hello dernière section du document de hello décrit hello étapes toobe suivi toomigrate ressources.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="fcbe0-128">Un réseau virtuel doté d’une passerelle ExpressRoute et d’une passerelle VPN ne peut pas être migré.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="fcbe0-129">Déplacer un circuit ExpressRoute de tooResource classique Manager</span><span class="sxs-lookup"><span data-stu-id="fcbe0-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="fcbe0-130">Vous devez déplacer un circuit ExpressRoute de toohello classique de hello environnement Gestionnaire de ressources avant d’essayer de toomigrate des ressources qui sont attachés circuit ExpressRoute de toohello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="fcbe0-131">tooaccomplish cette tâche, consultez hello suivant des articles :</span><span class="sxs-lookup"><span data-stu-id="fcbe0-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="fcbe0-132">Passez en revue les informations hello qui sont fournies sous [déplacement d’un circuit ExpressRoute de tooResource classique Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="fcbe0-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="fcbe0-133">[Déplacer un circuit de tooResource classique Manager à l’aide d’Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="fcbe0-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="fcbe0-134">Utilisez le portail de gestion des services Azure hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="fcbe0-135">Vous pouvez suivre les flux de travail hello trop[créer un circuit ExpressRoute nouveau](expressroute-howto-circuit-portal-resource-manager.md) et sélectionnez l’option d’importation hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="fcbe0-136">Cette opération n’implique pas de temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-136">This operation does not involve downtime.</span></span> <span data-ttu-id="fcbe0-137">Vous pouvez continuer tootransfer des données entre votre site et de Microsoft pour la migration de hello est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="fcbe0-138">Migrer des réseaux virtuels, des passerelles et les déploiements associés</span><span class="sxs-lookup"><span data-stu-id="fcbe0-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="fcbe0-139">Hello procédure vous suivez toomigrate varie selon que vos ressources sont Bonjour même abonnement, des abonnements différents ou les deux.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="fcbe0-140">Migrer des passerelles, des réseaux virtuels et les déploiements associés dans hello même abonnement que hello circuit ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="fcbe0-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="fcbe0-141">Cette section décrit hello étapes toobe suivi toomigrate un réseau virtuel, la passerelle et les déploiements associés dans hello même abonnement que hello circuit ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="fcbe0-142">Cette migration n’implique aucun temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="fcbe0-143">Vous pouvez continuer à toouse toutes les ressources via le processus de migration hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="fcbe0-144">plan de gestion Hello est verrouillée pendant la migration de hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="fcbe0-145">Assurez-vous que le circuit ExpressRoute de hello ont été déplacée à partir de l’environnement de gestionnaire de ressources hello toohello classique.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="fcbe0-146">Assurez-vous que ce réseau virtuel hello a été préparé correctement pour la migration de hello.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="fcbe0-147">Inscrivez votre abonnement pour la migration de ressources.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="fcbe0-148">tooregister votre abonnement pour la migration de la ressource, hello utilisation suivante extrait de code PowerShell :</span><span class="sxs-lookup"><span data-stu-id="fcbe0-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="fcbe0-149">Effectuez la validation, la préparation et la migration.</span><span class="sxs-lookup"><span data-stu-id="fcbe0-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="fcbe0-150">réseau virtuel toomove hello hello utilisation suivante extrait de code PowerShell :</span><span class="sxs-lookup"><span data-stu-id="fcbe0-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="fcbe0-151">Vous pouvez également annuler la migration en exécutant hello suivant l’applet de commande PowerShell :</span><span class="sxs-lookup"><span data-stu-id="fcbe0-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="fcbe0-152">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="fcbe0-152">Next steps</span></span>
* [<span data-ttu-id="fcbe0-153">Plateforme prise en charge la migration des ressources IaaS de classique tooAzure Gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="fcbe0-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="fcbe0-154">Techniques détaillées sur la plateforme prise en charge la migration à partir de tooAzure classique Gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="fcbe0-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="fcbe0-155">FAQ : Plateforme prise en charge la migration des ressources IaaS de classique tooAzure Gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="fcbe0-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="fcbe0-156">Passer en revue les erreurs les plus courantes de la migration et leur prévention</span><span class="sxs-lookup"><span data-stu-id="fcbe0-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
