---
title: "les files d’attente aaaService mortes Bus | Documents Microsoft"
description: "Vue d’ensemble des files d’attente de lettres mortes Azure Service Bus"
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 68b2aa38-dba7-491a-9c26-0289bc15d397
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/17/2017
ms.author: clemensv;sethm
ms.openlocfilehash: 1638272085b8a3a59e8814f6f943caee35a2bfdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="overview-of-service-bus-dead-letter-queues"></a><span data-ttu-id="08d61-103">Vue d’ensemble des files d’attente de lettres mortes Service Bus</span><span class="sxs-lookup"><span data-stu-id="08d61-103">Overview of Service Bus dead-letter queues</span></span>

<span data-ttu-id="08d61-104">Les files d’attente Service Bus et les abonnements aux rubriques fournissent une sous-file d’attente secondaire, appelée *file d’attente de lettres mortes*.</span><span class="sxs-lookup"><span data-stu-id="08d61-104">Service Bus queues and topic subscriptions provide a secondary sub-queue, called a *dead-letter queue* (DLQ).</span></span> <span data-ttu-id="08d61-105">file d’attente de lettres mortes Hello n’a pas besoin toobe explicitement créé et ne peut pas être supprimée ou indépendants gérés de l’entité principale de hello.</span><span class="sxs-lookup"><span data-stu-id="08d61-105">hello dead-letter queue does not need toobe explicitly created and cannot be deleted or otherwise managed independent of hello main entity.</span></span>

<span data-ttu-id="08d61-106">Cet article traite des files d’attente de lettres mortes dans Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="08d61-106">This article discusses dead-letter queues in Azure Service Bus.</span></span> <span data-ttu-id="08d61-107">Une grande partie de la discussion de hello est illustrée par hello [exemple de files d’attente de lettres mortes](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) sur GitHub.</span><span class="sxs-lookup"><span data-stu-id="08d61-107">Much of hello discussion is illustrated by hello [Dead-Letter Queues sample](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) on GitHub.</span></span>
 
## <a name="hello-dead-letter-queue"></a><span data-ttu-id="08d61-108">file d’attente de lettres mortes Hello</span><span class="sxs-lookup"><span data-stu-id="08d61-108">hello dead-letter queue</span></span>

<span data-ttu-id="08d61-109">Hello de file d’attente de lettres mortes hello vise toohold les messages qui ne peut pas être remis tooany récepteur ou des messages qui n’a pas pu être traitées..</span><span class="sxs-lookup"><span data-stu-id="08d61-109">hello purpose of hello dead-letter queue is toohold messages that cannot be delivered tooany receiver, or messages that could not be processed.</span></span> <span data-ttu-id="08d61-110">Les messages pouvant être supprimés de hello DLQ et inspectés.</span><span class="sxs-lookup"><span data-stu-id="08d61-110">Messages can then be removed from hello DLQ and inspected.</span></span> <span data-ttu-id="08d61-111">Une application peut, à l’aide d’un opérateur, corriger les problèmes et soumettez à nouveau le message de type hello, fait hello qu’une erreur s’est produite et prendre des mesures correctives.</span><span class="sxs-lookup"><span data-stu-id="08d61-111">An application might, with help of an operator, correct issues and resubmit hello message, log hello fact that there was an error, and take corrective action.</span></span> 

<span data-ttu-id="08d61-112">Une API et le protocole du point de vue, hello DLQ est principalement similaire tooany autre file d’attente, à ceci près que les messages ne peuvent être envoyées via des mouvements de lettres mortes hello de l’entité parente de hello.</span><span class="sxs-lookup"><span data-stu-id="08d61-112">From an API and protocol perspective, hello DLQ is mostly similar tooany other queue, except that messages can only be submitted via hello dead-letter gesture of hello parent entity.</span></span> <span data-ttu-id="08d61-113">En outre, la durée de vie n’est pas observée, et vous ne pouvez pas supprimer un message d’une file d’attente de lettres mortes.</span><span class="sxs-lookup"><span data-stu-id="08d61-113">In addition, time-to-live is not observed, and you can't dead-letter a message from a DLQ.</span></span> <span data-ttu-id="08d61-114">file d’attente de lettres mortes Hello prend entièrement en charge la remise de verrou de lecture et d’opérations transactionnelles.</span><span class="sxs-lookup"><span data-stu-id="08d61-114">hello dead-letter queue fully supports peek-lock delivery and transactional operations.</span></span>

<span data-ttu-id="08d61-115">Notez qu’il n’y a aucun nettoyage automatique de hello DLQ.</span><span class="sxs-lookup"><span data-stu-id="08d61-115">Note that there is no automatic cleanup of hello DLQ.</span></span> <span data-ttu-id="08d61-116">Les messages demeurent dans hello DLQ jusqu'à ce que vous les récupérer à partir de hello DLQ et appelez [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) sur les messages de lettres mortes hello.</span><span class="sxs-lookup"><span data-stu-id="08d61-116">Messages remain in hello DLQ until you explicitly retrieve them from hello DLQ and call [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) on hello dead-letter message.</span></span>

## <a name="moving-messages-toohello-dlq"></a><span data-ttu-id="08d61-117">Déplacement des messages toohello DLQ</span><span class="sxs-lookup"><span data-stu-id="08d61-117">Moving messages toohello DLQ</span></span>

<span data-ttu-id="08d61-118">Il existe plusieurs activités dans Service Bus qui provoquent tooget messages envoyée toohello DLQ à partir de hello moteur de messagerie.</span><span class="sxs-lookup"><span data-stu-id="08d61-118">There are several activities in Service Bus that cause messages tooget pushed toohello DLQ from within hello messaging engine itself.</span></span> <span data-ttu-id="08d61-119">Une application peut également explicitement déplacer des messages toohello DLQ.</span><span class="sxs-lookup"><span data-stu-id="08d61-119">An application can also explicitly move messages toohello DLQ.</span></span> 

<span data-ttu-id="08d61-120">Comme le message de type hello est déplacé par service broker de hello, deux propriétés sont ajoutées toohello message comme service broker de hello appelle sa version interne de hello [lettres mortes](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) méthode sur le message de type hello : `DeadLetterReason` et `DeadLetterErrorDescription`.</span><span class="sxs-lookup"><span data-stu-id="08d61-120">As hello message gets moved by hello broker, two properties are added toohello message as hello broker calls its internal version of hello [DeadLetter](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) method on hello message: `DeadLetterReason` and `DeadLetterErrorDescription`.</span></span>

<span data-ttu-id="08d61-121">Les applications peuvent définir leurs propres codes de hello `DeadLetterReason` propriété mais hello système jeux hello valeurs suivantes.</span><span class="sxs-lookup"><span data-stu-id="08d61-121">Applications can define their own codes for hello `DeadLetterReason` property, but hello system sets hello following values.</span></span>

| <span data-ttu-id="08d61-122">Condition</span><span class="sxs-lookup"><span data-stu-id="08d61-122">Condition</span></span> | <span data-ttu-id="08d61-123">DeadLetterReason</span><span class="sxs-lookup"><span data-stu-id="08d61-123">DeadLetterReason</span></span> | <span data-ttu-id="08d61-124">DeadLetterErrorDescription</span><span class="sxs-lookup"><span data-stu-id="08d61-124">DeadLetterErrorDescription</span></span> |
| --- | --- | --- |
| <span data-ttu-id="08d61-125">Toujours</span><span class="sxs-lookup"><span data-stu-id="08d61-125">Always</span></span> |<span data-ttu-id="08d61-126">HeaderSizeExceeded</span><span class="sxs-lookup"><span data-stu-id="08d61-126">HeaderSizeExceeded</span></span> |<span data-ttu-id="08d61-127">le quota de taille Hello pour ce flux a été dépassé.</span><span class="sxs-lookup"><span data-stu-id="08d61-127">hello size quota for this stream has been exceeded.</span></span> |
| <span data-ttu-id="08d61-128">!TopicDescription.</span><span class="sxs-lookup"><span data-stu-id="08d61-128">!TopicDescription.</span></span><br /><span data-ttu-id="08d61-129">EnableFilteringMessagesBeforePublishing et SubscriptionDescription.</span><span class="sxs-lookup"><span data-stu-id="08d61-129">EnableFilteringMessagesBeforePublishing and SubscriptionDescription.</span></span><br /><span data-ttu-id="08d61-130">EnableDeadLetteringOnFilterEvaluationExceptions</span><span class="sxs-lookup"><span data-stu-id="08d61-130">EnableDeadLetteringOnFilterEvaluationExceptions</span></span> |<span data-ttu-id="08d61-131">exception.GetType().Name</span><span class="sxs-lookup"><span data-stu-id="08d61-131">exception.GetType().Name</span></span> |<span data-ttu-id="08d61-132">exception.Message</span><span class="sxs-lookup"><span data-stu-id="08d61-132">exception.Message</span></span> |
| <span data-ttu-id="08d61-133">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="08d61-133">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="08d61-134">TTLExpiredException</span><span class="sxs-lookup"><span data-stu-id="08d61-134">TTLExpiredException</span></span> |<span data-ttu-id="08d61-135">message de type Hello expiré et a été d morts.</span><span class="sxs-lookup"><span data-stu-id="08d61-135">hello message expired and was dead lettered.</span></span> |
| <span data-ttu-id="08d61-136">SubscriptionDescription.RequiresSession</span><span class="sxs-lookup"><span data-stu-id="08d61-136">SubscriptionDescription.RequiresSession</span></span> |<span data-ttu-id="08d61-137">L’ID de session a la valeur null.</span><span class="sxs-lookup"><span data-stu-id="08d61-137">Session id is null.</span></span> |<span data-ttu-id="08d61-138">L’entité activée dans la session n’autorise pas les messages dont l’identificateur de session a la valeur null.</span><span class="sxs-lookup"><span data-stu-id="08d61-138">Session enabled entity doesn't allow a message whose session identifier is null.</span></span> |
| <span data-ttu-id="08d61-139">!dead letter queue</span><span class="sxs-lookup"><span data-stu-id="08d61-139">!dead letter queue</span></span> |<span data-ttu-id="08d61-140">MaxTransferHopCountExceeded</span><span class="sxs-lookup"><span data-stu-id="08d61-140">MaxTransferHopCountExceeded</span></span> |<span data-ttu-id="08d61-141">Null</span><span class="sxs-lookup"><span data-stu-id="08d61-141">Null</span></span> |
| <span data-ttu-id="08d61-142">Mise en file d’attente de lettres mortes explicite par l’application</span><span class="sxs-lookup"><span data-stu-id="08d61-142">Application explicit dead lettering</span></span> |<span data-ttu-id="08d61-143">Spécifié par l’application</span><span class="sxs-lookup"><span data-stu-id="08d61-143">Specified by application</span></span> |<span data-ttu-id="08d61-144">Spécifié par l’application</span><span class="sxs-lookup"><span data-stu-id="08d61-144">Specified by application</span></span> |

## <a name="exceeding-maxdeliverycount"></a><span data-ttu-id="08d61-145">Dépassement de MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="08d61-145">Exceeding MaxDeliveryCount</span></span>
<span data-ttu-id="08d61-146">Les files d’attente et les abonnements ont un [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) et [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) propriété respectivement ; hello valeur par défaut est 10.</span><span class="sxs-lookup"><span data-stu-id="08d61-146">Queues and subscriptions each have a [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) and [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) property respectively; hello default value is 10.</span></span> <span data-ttu-id="08d61-147">Chaque fois qu’un message a été remis sous un verrou ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), mais a été explicitement abandonné ou un verrou hello a expiré, du message de type hello [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) est incrémenté.</span><span class="sxs-lookup"><span data-stu-id="08d61-147">Whenever a message has been delivered under a lock ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), but has been either explicitly abandoned or hello lock has expired, hello message's [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) is incremented.</span></span> <span data-ttu-id="08d61-148">Lorsque [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) dépasse [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), message de type hello est déplacé toohello DLQ, en spécifiant hello `MaxDeliveryCountExceeded` code motif.</span><span class="sxs-lookup"><span data-stu-id="08d61-148">When [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) exceeds [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), hello message is moved toohello DLQ, specifying hello `MaxDeliveryCountExceeded` reason code.</span></span>

<span data-ttu-id="08d61-149">Ce comportement ne peut pas être désactivé, mais vous pouvez définir [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) tooa très grand nombre.</span><span class="sxs-lookup"><span data-stu-id="08d61-149">This behavior cannot be disabled, but you can set [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) tooa very large number.</span></span>

## <a name="exceeding-timetolive"></a><span data-ttu-id="08d61-150">Dépassement de TimeToLive</span><span class="sxs-lookup"><span data-stu-id="08d61-150">Exceeding TimeToLive</span></span>
<span data-ttu-id="08d61-151">Hello lorsque [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) ou [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) propriété a la valeur trop**lavaleurtrue** (valeur par défaut hello est **false**), tous les messages arrivant à expiration sont déplacé toohello DLQ, en spécifiant hello `TTLExpiredException` code motif.</span><span class="sxs-lookup"><span data-stu-id="08d61-151">When hello [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) or [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) property is set too**true** (hello default is **false**), all expiring messages are moved toohello DLQ, specifying hello  `TTLExpiredException` reason code.</span></span>

<span data-ttu-id="08d61-152">Notez que les messages arrivés à expiration sont purgés uniquement et par conséquent déplacé toohello DLQ lorsqu’il existe au moins un destinataire active tirant sur la file d’attente principale de hello ou un abonnement ; Ce comportement est normal.</span><span class="sxs-lookup"><span data-stu-id="08d61-152">Note that expired messages are only purged and therefore moved toohello DLQ when there is at least one active receiver pulling on hello main queue or subscription; that behavior is by design.</span></span>

## <a name="errors-while-processing-subscription-rules"></a><span data-ttu-id="08d61-153">Erreurs pendant le traitement des règles d’abonnement</span><span class="sxs-lookup"><span data-stu-id="08d61-153">Errors while processing subscription rules</span></span>
<span data-ttu-id="08d61-154">Hello lorsque [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) propriété est activée pour un abonnement, toutes les erreurs qui se produisent pendant l’exécution de la règle de filtre d’un abonnement SQL sont capturées dans hello DLQ en même temps que hello incriminée du message.</span><span class="sxs-lookup"><span data-stu-id="08d61-154">When hello [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) property is enabled for a subscription, any errors that occur while a subscription's SQL filter rule executes are captured in hello DLQ along with hello offending message.</span></span>

## <a name="application-level-dead-lettering"></a><span data-ttu-id="08d61-155">Mise en file d’attente de lettres mortes au niveau de l’application</span><span class="sxs-lookup"><span data-stu-id="08d61-155">Application-level dead-lettering</span></span>
<span data-ttu-id="08d61-156">Dans Ajout toohello fournie par le système lettres mortes à des fonctionnalités, les applications peuvent utiliser hello DLQ tooexplicitly rejeter inacceptable les messages.</span><span class="sxs-lookup"><span data-stu-id="08d61-156">In addition toohello system-provided dead-lettering features, applications can use hello DLQ tooexplicitly reject unacceptable messages.</span></span> <span data-ttu-id="08d61-157">Cela peut inclure des messages qui ne peut pas être traités correctement en raison de tri tooany de problème système, les messages qui contiennent des charges utiles mal formés ou des messages que l’authentification échoueront lorsque certains modèle de sécurité de niveau message est utilisé.</span><span class="sxs-lookup"><span data-stu-id="08d61-157">This may include messages that cannot be properly processed due tooany sort of system issue, messages that hold malformed payloads, or messages that fail authentication when some message-level security scheme is used.</span></span>

## <a name="dead-lettering-in-forwardto-or-sendvia-scenarios"></a><span data-ttu-id="08d61-158">Mise en file d’attente de lettres mortes dans des scénarios ForwardTo ou SendVia</span><span class="sxs-lookup"><span data-stu-id="08d61-158">Dead-lettering in ForwardTo or SendVia scenarios</span></span>

<span data-ttu-id="08d61-159">Les messages seront file d’attente de lettres mortes de transfert toohello envoyé sous hello conditions suivantes :</span><span class="sxs-lookup"><span data-stu-id="08d61-159">Messages will be sent toohello transfer dead-letter queue under hello following conditions:</span></span>

- <span data-ttu-id="08d61-160">Un message passe par plus de 3 files d’attente ou rubriques [enchaînées](service-bus-auto-forwarding.md).</span><span class="sxs-lookup"><span data-stu-id="08d61-160">A message passes through more than 3 queues or topics that are [chained together](service-bus-auto-forwarding.md).</span></span>
- <span data-ttu-id="08d61-161">file d’attente de destination Hello ou une rubrique est désactivé ou supprimé.</span><span class="sxs-lookup"><span data-stu-id="08d61-161">hello destination queue or topic is disabled or deleted.</span></span>
- <span data-ttu-id="08d61-162">file d’attente de destination Hello ou une rubrique dépasse la taille d’entité maximale hello.</span><span class="sxs-lookup"><span data-stu-id="08d61-162">hello destination queue or topic exceeds hello maximum entity size.</span></span>

<span data-ttu-id="08d61-163">tooretrieve ces messages représentées par des lettres mortes, vous pouvez créer un récepteur à l’aide de hello [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) méthode utilitaire.</span><span class="sxs-lookup"><span data-stu-id="08d61-163">tooretrieve these dead-lettered messages, you can create a receiver using hello [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) utility method.</span></span>

## <a name="example"></a><span data-ttu-id="08d61-164">Exemple</span><span class="sxs-lookup"><span data-stu-id="08d61-164">Example</span></span>
<span data-ttu-id="08d61-165">Hello suivant extrait de code crée un récepteur de message.</span><span class="sxs-lookup"><span data-stu-id="08d61-165">hello following code snippet creates a message receiver.</span></span> <span data-ttu-id="08d61-166">Bonjour, recevoir une boucle pour la file d’attente principale de hello, code de hello récupère le message de type hello avec [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), qui vous demande tooinstantly de broker hello retour tout message prête ou tooreturn aucun résultat.</span><span class="sxs-lookup"><span data-stu-id="08d61-166">In hello receive loop for hello main queue, hello code retrieves hello message with [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), which asks hello broker tooinstantly return any message readily available, or tooreturn with no result.</span></span> <span data-ttu-id="08d61-167">Si le code de hello reçoit un message, il immédiatement abandonne, qui incrémente hello `DeliveryCount`.</span><span class="sxs-lookup"><span data-stu-id="08d61-167">If hello code receives a message, it immediately abandons it, which increments hello  `DeliveryCount`.</span></span> <span data-ttu-id="08d61-168">Une fois que le système de hello déplace hello message toohello DLQ, file d’attente principale de hello est vide et hello issues de la boucle, comme [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) retourne **null**.</span><span class="sxs-lookup"><span data-stu-id="08d61-168">Once hello system moves hello message toohello DLQ, hello main queue is empty and hello loop exits, as [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) returns **null**.</span></span>

```csharp
var receiver = await receiverFactory.CreateMessageReceiverAsync(queueName, ReceiveMode.PeekLock);
while(true)
{
    var msg = await receiver.ReceiveAsync(TimeSpan.Zero);
    if (msg != null)
    {
        Console.WriteLine("Picked up message; DeliveryCount {0}", msg.DeliveryCount);
        await msg.AbandonAsync();
    }
    else
    {
        break;
    }
}
```

## <a name="next-steps"></a><span data-ttu-id="08d61-169">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="08d61-169">Next steps</span></span>
<span data-ttu-id="08d61-170">Consultez hello suivant des articles pour plus d’informations sur les files d’attente Service Bus :</span><span class="sxs-lookup"><span data-stu-id="08d61-170">See hello following articles for more information about Service Bus queues:</span></span>

* [<span data-ttu-id="08d61-171">Prise en main des files d’attente Service Bus</span><span class="sxs-lookup"><span data-stu-id="08d61-171">Get started with Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="08d61-172">Comparaison des files d’attente Azure et Service Bus</span><span class="sxs-lookup"><span data-stu-id="08d61-172">Azure Queues and Service Bus queues compared</span></span>](service-bus-azure-and-service-bus-queues-compared-contrasted.md)

