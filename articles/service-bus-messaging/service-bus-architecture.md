---
title: "Présentation de l’architecture de traitement des messages d’Azure Service Bus | Microsoft Docs"
description: "Décrit l’architecture de traitement de message d’Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: baf94c2d-0e58-4d5d-a588-767f996ccf7f
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 83456d775c5ff2a2476ba46e9c78a8dc1bb482e8
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="service-bus-architecture"></a><span data-ttu-id="4e6f4-103">Architecture de Service Bus</span><span class="sxs-lookup"><span data-stu-id="4e6f4-103">Service Bus architecture</span></span>
<span data-ttu-id="4e6f4-104">Cet article décrit l’architecture de traitement de message d’Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-104">This article describes the message processing architecture of Azure Service Bus.</span></span>

## <a name="service-bus-scale-units"></a><span data-ttu-id="4e6f4-105">Unités d'échelle de Service Bus</span><span class="sxs-lookup"><span data-stu-id="4e6f4-105">Service Bus scale units</span></span>
<span data-ttu-id="4e6f4-106">Service Bus est organisé par *unités d'échelle*.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-106">Service Bus is organized by *scale units*.</span></span> <span data-ttu-id="4e6f4-107">Une unité d'échelle est une unité de déploiement et contient tous les composants requis pour exécuter le service.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-107">A scale unit is a unit of deployment and contains all components required run the service.</span></span> <span data-ttu-id="4e6f4-108">Chaque région déploie une ou plusieurs unités d'échelle Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-108">Each region deploys one or more Service Bus scale units.</span></span>

<span data-ttu-id="4e6f4-109">Un espace de noms Service Bus est mappé à une unité d'échelle.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-109">A Service Bus namespace is mapped to a scale unit.</span></span> <span data-ttu-id="4e6f4-110">L’unité d’échelle gère tous les types d’entités Service Bus : files d’attente, rubriques, abonnements.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-110">The scale unit handles all types of Service Bus entities (queues, topics, subscriptions).</span></span> <span data-ttu-id="4e6f4-111">Une unité d'échelle Service Bus est constituée des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="4e6f4-111">A Service Bus scale unit consists of the following components:</span></span>

* <span data-ttu-id="4e6f4-112">**Un ensemble de nœuds de passerelle.**</span><span class="sxs-lookup"><span data-stu-id="4e6f4-112">**A set of gateway nodes.**</span></span> <span data-ttu-id="4e6f4-113">Les nœuds de passerelle authentifient les requêtes entrantes.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-113">Gateway nodes authenticate incoming requests.</span></span> <span data-ttu-id="4e6f4-114">Chaque nœud de passerelle a une adresse IP publique.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-114">Each gateway node has a public IP address.</span></span>
* <span data-ttu-id="4e6f4-115">**Un ensemble de nœuds de broker de messagerie.**</span><span class="sxs-lookup"><span data-stu-id="4e6f4-115">**A set of messaging broker nodes.**</span></span> <span data-ttu-id="4e6f4-116">Les nœuds de broker de messagerie traitent les requêtes concernant les entités de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-116">Messaging broker nodes process requests concerning messaging entities.</span></span>
* <span data-ttu-id="4e6f4-117">**Une banque de passerelle.**</span><span class="sxs-lookup"><span data-stu-id="4e6f4-117">**One gateway store.**</span></span> <span data-ttu-id="4e6f4-118">La banque de passerelle conserve les données pour chaque entité définie dans cette unité d'échelle.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-118">The gateway store holds the data for every entity that is defined in this scale unit.</span></span> <span data-ttu-id="4e6f4-119">La banque de passerelle est implémentée sur une base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-119">The gateway store is implemented on top of a SQL Azure database.</span></span>
* <span data-ttu-id="4e6f4-120">**Plusieurs banques de messagerie.**</span><span class="sxs-lookup"><span data-stu-id="4e6f4-120">**Multiple messaging stores.**</span></span> <span data-ttu-id="4e6f4-121">Les banques de messagerie conservent les messages de l’ensemble des files d’attente, rubriques et abonnements qui sont définis dans cette unité d’échelle.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-121">Messaging stores hold the messages of all queues, topics and subscriptions that are defined in this scale unit.</span></span> <span data-ttu-id="4e6f4-122">Elles contiennent également toutes les données d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-122">It also contains all subscription data.</span></span> <span data-ttu-id="4e6f4-123">Une file d’attente ou une rubrique est mappée à une banque de messagerie, sauf si l’option [Partitionnement des entités de messagerie](service-bus-partitioning.md) est activée.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-123">Unless [partitioning messaging entities](service-bus-partitioning.md) is enabled, a queue or topic is mapped to one messaging store.</span></span> <span data-ttu-id="4e6f4-124">Les abonnements sont stockés dans la même banque de messagerie que leur rubrique parent.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-124">Subscriptions are stored in the same messaging store as their parent topic.</span></span> <span data-ttu-id="4e6f4-125">Sauf pour Service Bus [Premium Messaging](service-bus-premium-messaging.md), les banques de messagerie sont implémentées sur des bases de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-125">Except for Service Bus [Premium Messaging](service-bus-premium-messaging.md), the messaging stores are implemented on top of SQL Azure databases.</span></span>

## <a name="containers"></a><span data-ttu-id="4e6f4-126">Conteneurs</span><span class="sxs-lookup"><span data-stu-id="4e6f4-126">Containers</span></span>
<span data-ttu-id="4e6f4-127">Un conteneur spécifique est assigné à chaque entité de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-127">Each messaging entity is assigned a specific container.</span></span> <span data-ttu-id="4e6f4-128">Un conteneur est une construction logique qui utilise exactement une banque de messagerie pour stocker toutes les données pertinentes pour ce conteneur.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-128">A container is a logical construct that uses exactly one messaging store to store all relevant data for this container.</span></span> <span data-ttu-id="4e6f4-129">Chaque conteneur est affecté à un nœud de broker de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-129">Each container is assigned to a messaging broker node.</span></span> <span data-ttu-id="4e6f4-130">En règle générale, il existe plus de conteneurs que de nœuds de broker de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-130">Typically, there are more containers than messaging broker nodes.</span></span> <span data-ttu-id="4e6f4-131">Par conséquent, chaque nœud de broker de messagerie charge plusieurs conteneurs.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-131">Therefore, each messaging broker node loads multiple containers.</span></span> <span data-ttu-id="4e6f4-132">La distribution de conteneurs sur un nœud de broker de messagerie est organisée de façon à ce que tous les nœuds de broker de messagerie soient chargés de façon égale.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-132">The distribution of containers to a messaging broker node is organized such that all messaging broker nodes are equally loaded.</span></span> <span data-ttu-id="4e6f4-133">Si le modèle de charge change (par exemple, un des conteneurs devient très occupé) ou si un nœud de broker de messagerie devient temporairement indisponible, les conteneurs sont redistribués entre les nœuds de broker de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-133">If the load pattern changes (for example, one of the containers gets very busy), or if a messaging broker node becomes temporarily unavailable, the containers are redistributed among the messaging broker nodes.</span></span>

## <a name="processing-of-incoming-messaging-requests"></a><span data-ttu-id="4e6f4-134">Traitement des requêtes de messagerie entrantes</span><span class="sxs-lookup"><span data-stu-id="4e6f4-134">Processing of incoming messaging requests</span></span>
<span data-ttu-id="4e6f4-135">Lorsqu'un client envoie une requête à Service Bus, l'équilibrage de charge Azure la transmet à l'un des nœuds de passerelle.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-135">When a client sends a request to Service Bus, the Azure load balancer routes it to any of the gateway nodes.</span></span> <span data-ttu-id="4e6f4-136">Le nœud de passerelle autorise la requête.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-136">The gateway node authorizes the request.</span></span> <span data-ttu-id="4e6f4-137">Si la requête concerne une entité de messagerie (file d’attente, rubrique, abonnement), le nœud de passerelle recherche l’entité dans le magasin de passerelle et détermine dans quelle banque de messagerie se trouve l’entité.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-137">If the request concerns a messaging entity (queue, topic, subscription), the gateway node looks up the entity in the gateway store and determines in which messaging store the entity is located.</span></span> <span data-ttu-id="4e6f4-138">Il recherche ensuite quel nœud de broker de messagerie traite actuellement ce conteneur et envoie la requête à ce nœud de broker de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-138">It then looks up which messaging broker node is currently servicing this container, and sends the request to that messaging broker node.</span></span> <span data-ttu-id="4e6f4-139">Le nœud de broker de messagerie traite la requête et met à jour l'état de l'entité dans le magasin de conteneur.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-139">The messaging broker node processes the request and updates the entity state in the container store.</span></span> <span data-ttu-id="4e6f4-140">Le nœud de broker de messagerie envoie ensuite la réponse au nœud de passerelle, qui envoie une réponse appropriée au client qui a émis la requête d'origine.</span><span class="sxs-lookup"><span data-stu-id="4e6f4-140">The messaging broker node then sends the response back to the gateway node, which sends an appropriate response back to the client that issued the original request.</span></span>

![Traitement des requêtes de messagerie entrantes](./media/service-bus-architecture/ic690644.png)

## <a name="next-steps"></a><span data-ttu-id="4e6f4-142">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="4e6f4-142">Next steps</span></span>
<span data-ttu-id="4e6f4-143">Maintenant que vous avez une vue d'ensemble de l’architecture Service Bus, consultez les liens suivants pour plus d'informations :</span><span class="sxs-lookup"><span data-stu-id="4e6f4-143">Now that you've read an overview of Service Bus architecture, visit the following links for more information:</span></span>

* [<span data-ttu-id="4e6f4-144">Présentation de la messagerie Service Bus</span><span class="sxs-lookup"><span data-stu-id="4e6f4-144">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="4e6f4-145">Concepts de base de Service Bus</span><span class="sxs-lookup"><span data-stu-id="4e6f4-145">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="4e6f4-146">Solution de messages de file d’attente utilisant les files d’attente Service Bus</span><span class="sxs-lookup"><span data-stu-id="4e6f4-146">A queued messaging solution using Service Bus queues</span></span>](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)


