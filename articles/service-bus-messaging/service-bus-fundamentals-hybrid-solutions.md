---
title: "Vue d’ensemble des notions de base d’Azure Service Bus | Microsoft Docs"
description: "Présentation de l’utilisation de Service Bus pour connecter les applications Azure à d’autres logiciels."
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 12654cdd-82ab-4b95-b56f-08a5a8bbc6f9
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/15/2017
ms.author: sethm
ms.openlocfilehash: af8b10f0a460e695a39879718174e81f78934ef8
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-service-bus"></a><span data-ttu-id="bb45e-103">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="bb45e-103">Azure Service Bus</span></span>

<span data-ttu-id="bb45e-104">Que l’application ou le service s’exécute dans le cloud ou localement, il est souvent en interaction avec d’autres applications ou services.</span><span class="sxs-lookup"><span data-stu-id="bb45e-104">Whether an application or service runs in the cloud or on premises, it often needs to interact with other applications or services.</span></span> <span data-ttu-id="bb45e-105">Afin de répondre à ce besoin de façon globale, Microsoft Azure contient Service Bus.</span><span class="sxs-lookup"><span data-stu-id="bb45e-105">To provide a broadly useful way to do this, Microsoft Azure offers Service Bus.</span></span> <span data-ttu-id="bb45e-106">Cet article aborde la technologie Service Bus, décrit ce qu’elle fait et présente des exemples d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="bb45e-106">This article looks at this technology, describing what it is and why you might want to use it.</span></span>

## <a name="service-bus-fundamentals"></a><span data-ttu-id="bb45e-107">Concepts de base de Service Bus</span><span class="sxs-lookup"><span data-stu-id="bb45e-107">Service Bus fundamentals</span></span>

<span data-ttu-id="bb45e-108">À chaque situation correspond un style de communication.</span><span class="sxs-lookup"><span data-stu-id="bb45e-108">Different situations call for different styles of communication.</span></span> <span data-ttu-id="bb45e-109">Parfois, laisser les applications envoyer et recevoir des messages via une simple file d’attente suffit.</span><span class="sxs-lookup"><span data-stu-id="bb45e-109">Sometimes, letting applications send and receive messages through a simple queue is the best solution.</span></span> <span data-ttu-id="bb45e-110">Dans d’autres situations, une file d’attente ordinaire n’est pas suffisante et une file avec mécanisme de publication et d’abonnement est une meilleure solution.</span><span class="sxs-lookup"><span data-stu-id="bb45e-110">In other situations, an ordinary queue isn't enough; a queue with a publish-and-subscribe mechanism is better.</span></span> <span data-ttu-id="bb45e-111">Dans certains cas, vous avez simplement besoin d’une connexion entre les applications, sans file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bb45e-111">In some cases, all that's needed is a connection between applications, and queues are not required.</span></span> <span data-ttu-id="bb45e-112">Service Bus offre ces trois options, ce qui permet à vos applications d’interagir de différentes manières.</span><span class="sxs-lookup"><span data-stu-id="bb45e-112">Service Bus provides all three options, enabling your applications to interact in several different ways.</span></span>

<span data-ttu-id="bb45e-113">Service Bus est un service cloud mutualisé, ce qui signifie que le service est partagé par plusieurs utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="bb45e-113">Service Bus is a multi-tenant cloud service, which means that the service is shared by multiple users.</span></span> <span data-ttu-id="bb45e-114">Chaque utilisateur, par exemple un développeur d’applications, crée un *espace de noms*, puis définit les mécanismes de communication nécessaires au sein de ce dernier.</span><span class="sxs-lookup"><span data-stu-id="bb45e-114">Each user, such as an application developer, creates a *namespace*, then defines the communication mechanisms needed within that namespace.</span></span> <span data-ttu-id="bb45e-115">La figure 1 montre à quoi ressemble cette architecture.</span><span class="sxs-lookup"><span data-stu-id="bb45e-115">Figure 1 shows how this architecture looks.</span></span>

![][1]

<span data-ttu-id="bb45e-116">**Figure 1 : Service Bus est un service mutualisé permettant la connexion d’applications via le cloud.**</span><span class="sxs-lookup"><span data-stu-id="bb45e-116">**Figure 1: Service Bus provides a multi-tenant service for connecting applications through the cloud.**</span></span>

<span data-ttu-id="bb45e-117">Dans un espace de noms, vous pouvez utiliser une ou plusieurs instances de trois mécanismes de communication distincts, chacun se connectant de manière différente à l’application.</span><span class="sxs-lookup"><span data-stu-id="bb45e-117">Within a namespace, you can use one or more instances of three different communication mechanisms, each of which connects applications in a different way.</span></span> <span data-ttu-id="bb45e-118">Les choix sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="bb45e-118">The choices are:</span></span>

* <span data-ttu-id="bb45e-119">Les *files d’attente* permettent la communication unidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="bb45e-119">*Queues*, which allow one-directional communication.</span></span> <span data-ttu-id="bb45e-120">Chacune agit comme un intermédiaire (ou *broker*) qui stocke les messages envoyés jusqu’à leur réception.</span><span class="sxs-lookup"><span data-stu-id="bb45e-120">Each queue acts as an intermediary (sometimes called a *broker*) that stores sent messages until they are received.</span></span> <span data-ttu-id="bb45e-121">Chaque message est reçu par un destinataire unique.</span><span class="sxs-lookup"><span data-stu-id="bb45e-121">Each message is received by a single recipient.</span></span>
* <span data-ttu-id="bb45e-122">Les *rubriques* fournissent une communication unidirectionnelle à l’aide *d’abonnements* : une seule rubrique peut avoir plusieurs abonnements.</span><span class="sxs-lookup"><span data-stu-id="bb45e-122">*Topics*, which provide one-directional communication using *subscriptions*-a single topic can have multiple subscriptions.</span></span> <span data-ttu-id="bb45e-123">À l’instar d’une file d’attente, une rubrique agit comme un intermédiaire, mais chaque abonnement peut utiliser un filtre pour recevoir uniquement les messages correspondant à un critère spécifique.</span><span class="sxs-lookup"><span data-stu-id="bb45e-123">Like a queue, a topic acts as a broker, but each subscription can optionally use a filter to receive only messages that match specific criteria.</span></span>
* <span data-ttu-id="bb45e-124">Les *relais* permettent la communication bidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="bb45e-124">*Relays*, which provide bi-directional communication.</span></span> <span data-ttu-id="bb45e-125">À l’inverse des files d’attente et des rubriques, le relais ne stocke pas les messages en transit ; il ne s’agit pas d’un intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="bb45e-125">Unlike queues and topics, a relay doesn't store in-flight messages; it's not a broker.</span></span> <span data-ttu-id="bb45e-126">Il ne fait que les transférer vers l’application de destination.</span><span class="sxs-lookup"><span data-stu-id="bb45e-126">Instead, it just passes them on to the destination application.</span></span>

<span data-ttu-id="bb45e-127">Lorsque vous créez une file d'attente, une rubrique ou un relais, vous lui donnez un nom.</span><span class="sxs-lookup"><span data-stu-id="bb45e-127">When you create a queue, topic, or relay, you give it a name.</span></span> <span data-ttu-id="bb45e-128">Ce nom, combiné à celui de votre espace de noms, donne un identificateur unique à l’objet.</span><span class="sxs-lookup"><span data-stu-id="bb45e-128">Combined with whatever you called your namespace, this name creates a unique identifier for the object.</span></span> <span data-ttu-id="bb45e-129">Les applications peuvent fournir ce nom à Service Bus, puis utiliser cette file d’attente, cette rubrique ou ce relais pour communiquer entre elles.</span><span class="sxs-lookup"><span data-stu-id="bb45e-129">Applications can provide this name to Service Bus, then use that queue, topic, or relay to communicate with one another.</span></span> 

<span data-ttu-id="bb45e-130">Pour utiliser ces objets dans le scénario de relais, les applications Windows peuvent utiliser Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="bb45e-130">To use any of these objects in the relay scenario, Windows applications can use Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="bb45e-131">Ce service est appelé [Relais WCF](../service-bus-relay/relay-what-is-it.md).</span><span class="sxs-lookup"><span data-stu-id="bb45e-131">This service is known as [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span></span> <span data-ttu-id="bb45e-132">Pour les files d’attente et les rubriques, les applications Windows peuvent utiliser des API de messagerie définie par Service Bus.</span><span class="sxs-lookup"><span data-stu-id="bb45e-132">For queues and topics, Windows applications can use Service Bus-defined messaging APIs.</span></span> <span data-ttu-id="bb45e-133">Pour faciliter l’utilisation de ces objets à partir d’applications non-Windows, Microsoft fournit des Kits de développement logiciel (SDK) pour Java, Node.js et d’autres langages.</span><span class="sxs-lookup"><span data-stu-id="bb45e-133">To make these objects easier to use from non-Windows applications, Microsoft provides SDKs for Java, Node.js, and other languages.</span></span> <span data-ttu-id="bb45e-134">Vous pouvez également accéder aux files d’attente et aux rubriques à l’aide des [API REST](/rest/api/servicebus/) sur HTTP(s).</span><span class="sxs-lookup"><span data-stu-id="bb45e-134">You can also access queues and topics using [REST APIs](/rest/api/servicebus/) over HTTP(s).</span></span> 

<span data-ttu-id="bb45e-135">Il est important de comprendre que même si Service Bus fonctionne dans le cloud (c'est-à-dire dans les centres de données Microsoft Azure), les applications qui y ont recours peuvent s'exécuter n'importe où.</span><span class="sxs-lookup"><span data-stu-id="bb45e-135">It's important to understand that even though Service Bus itself runs in the cloud (that is, in Microsoft's Azure datacenters), applications that use it can run anywhere.</span></span> <span data-ttu-id="bb45e-136">Vous pouvez utiliser Service Bus pour connecter des applications qui s’exécutent sous Azure, par exemple, ou des applications qui s’exécutent dans votre centre de données.</span><span class="sxs-lookup"><span data-stu-id="bb45e-136">You can use Service Bus to connect applications running on Azure, for example, or applications running inside your own datacenter.</span></span> <span data-ttu-id="bb45e-137">Vous pouvez également l’utiliser pour connecter une application qui s’exécute sous Azure ou une autre plateforme cloud avec une application locale ou avec des tablettes et des téléphones.</span><span class="sxs-lookup"><span data-stu-id="bb45e-137">You can also use it to connect an application running on Azure or another cloud platform with an on-premises application or with tablets and phones.</span></span> <span data-ttu-id="bb45e-138">Il est également possible de connecter des appareils électroménagers, des capteurs ou d’autres appareils à une application centrale ou bien de les connecter entre eux.</span><span class="sxs-lookup"><span data-stu-id="bb45e-138">It's even possible to connect household appliances, sensors, and other devices to a central application or to one other.</span></span> <span data-ttu-id="bb45e-139">Service Bus est un mécanisme de communication générique dans le cloud, accessible quasiment partout.</span><span class="sxs-lookup"><span data-stu-id="bb45e-139">Service Bus is a communication mechanism in the cloud that's accessible from pretty much anywhere.</span></span> <span data-ttu-id="bb45e-140">La façon dont vous l’utilisez dépend des besoins de vos applications.</span><span class="sxs-lookup"><span data-stu-id="bb45e-140">How you use it depends on what your applications need to do.</span></span>

## <a name="queues"></a><span data-ttu-id="bb45e-141">files d’attente</span><span class="sxs-lookup"><span data-stu-id="bb45e-141">Queues</span></span>

<span data-ttu-id="bb45e-142">Supposons que vous décidiez de connecter deux applications à l'aide d'une file d'attente Service Bus.</span><span class="sxs-lookup"><span data-stu-id="bb45e-142">Suppose you decide to connect two applications using a Service Bus queue.</span></span> <span data-ttu-id="bb45e-143">La figure 2 illustre cette situation.</span><span class="sxs-lookup"><span data-stu-id="bb45e-143">Figure 2 illustrates this situation.</span></span>

![][2]

<span data-ttu-id="bb45e-144">**Figure 2 : les files d’attente Service Bus offrent un système de files d’attente unidirectionnelles asynchrones.**</span><span class="sxs-lookup"><span data-stu-id="bb45e-144">**Figure 2: Service Bus queues provide one-way asynchronous queuing.**</span></span>

<span data-ttu-id="bb45e-145">La procédure est simple : l’expéditeur envoie un message à une file d’attente Service Bus et le destinataire le récupère plus tard.</span><span class="sxs-lookup"><span data-stu-id="bb45e-145">The process is simple: A sender sends a message to a Service Bus queue, and a receiver picks up that message at some later time.</span></span> <span data-ttu-id="bb45e-146">Une file d’attente peut avoir un seul destinataire, comme l’indique la Figure 2,</span><span class="sxs-lookup"><span data-stu-id="bb45e-146">A queue can have just a single receiver, as Figure 2 shows.</span></span> <span data-ttu-id="bb45e-147">ou plusieurs applications peuvent lire à partir de la même file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bb45e-147">Or, multiple applications can read from the same queue.</span></span> <span data-ttu-id="bb45e-148">Dans ce dernier cas, chaque message est lu par un seul destinataire.</span><span class="sxs-lookup"><span data-stu-id="bb45e-148">In the latter situation, each message is read by just one receiver.</span></span> <span data-ttu-id="bb45e-149">Dans le cas d’un service de multidiffusion, utilisez plutôt une rubrique.</span><span class="sxs-lookup"><span data-stu-id="bb45e-149">For a multi-cast service, you should use a topic instead.</span></span>

<span data-ttu-id="bb45e-150">Chaque message se compose de deux parties : un jeu de propriétés (chacun de type paire clé/valeur) et une charge utile de message.</span><span class="sxs-lookup"><span data-stu-id="bb45e-150">Each message has two parts: a set of properties, each a key/value pair, and a message payload.</span></span> <span data-ttu-id="bb45e-151">La charge utile peut être de type binaire, texte, voire XML.</span><span class="sxs-lookup"><span data-stu-id="bb45e-151">The payload can be binary, text, or even XML.</span></span> <span data-ttu-id="bb45e-152">La façon dont les messages sont utilisés dépend de ce que tente de faire l’application.</span><span class="sxs-lookup"><span data-stu-id="bb45e-152">How they're used depends on what an application is trying to do.</span></span> <span data-ttu-id="bb45e-153">Par exemple, une application qui envoie un message à propos d’une vente récente peut mentionner les propriétés **Seller="Ava"** et **Amount=10000**.</span><span class="sxs-lookup"><span data-stu-id="bb45e-153">For example, an application sending a message about a recent sale might include the properties **Seller="Ava"** and **Amount=10000**.</span></span> <span data-ttu-id="bb45e-154">Le corps du message peut contenir une image numérisée du contrat signé ou rester vide s’il n’y en a pas.</span><span class="sxs-lookup"><span data-stu-id="bb45e-154">The message body might contain a scanned image of the sale's signed contract or, if there isn't one, remain empty.</span></span>

<span data-ttu-id="bb45e-155">Le destinataire peut lire le message de file d’attente Service Bus de deux façons.</span><span class="sxs-lookup"><span data-stu-id="bb45e-155">A receiver can read a message from a Service Bus queue in two different ways.</span></span> <span data-ttu-id="bb45e-156">La première option, appelée *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, retire un message de la file d’attente et le supprime immédiatement.</span><span class="sxs-lookup"><span data-stu-id="bb45e-156">The first option, called *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, removes a message from the queue and immediately deletes it.</span></span> <span data-ttu-id="bb45e-157">C’est simple, mais si le destinataire rencontre un problème avant d’avoir fini de traiter le message, ce dernier est perdu.</span><span class="sxs-lookup"><span data-stu-id="bb45e-157">This option is simple, but if the receiver crashes before it finishes processing the message, the message is lost.</span></span> <span data-ttu-id="bb45e-158">Comme il est retiré de la file d’attente, aucun autre destinataire ne peut y accéder.</span><span class="sxs-lookup"><span data-stu-id="bb45e-158">Because it's been removed from the queue, no other receiver can access it.</span></span> 

<span data-ttu-id="bb45e-159">La deuxième option, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, a pour but de résoudre ce problème.</span><span class="sxs-lookup"><span data-stu-id="bb45e-159">The second option, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, is meant to help with this problem.</span></span> <span data-ttu-id="bb45e-160">Comme dans le cas de **ReceiveAndDelete**, la lecture **PeekLock** retire le message de la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bb45e-160">Like **ReceiveAndDelete**, a **PeekLock** read removes a message from the queue.</span></span> <span data-ttu-id="bb45e-161">Par contre, le message n’est pas supprimé.</span><span class="sxs-lookup"><span data-stu-id="bb45e-161">It doesn't delete the message, however.</span></span> <span data-ttu-id="bb45e-162">Il est verrouillé, et donc désormais invisible par les autres destinataires. Il attend ensuite un des trois événements suivants :</span><span class="sxs-lookup"><span data-stu-id="bb45e-162">Instead, it locks the message, making it invisible to other receivers, then waits for one of three events:</span></span>

* <span data-ttu-id="bb45e-163">Si le destinataire traite correctement le message, il appelle la méthode [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), et la file d’attente supprime le message.</span><span class="sxs-lookup"><span data-stu-id="bb45e-163">If the receiver processes the message successfully, it calls [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), and the queue deletes the message.</span></span> 
* <span data-ttu-id="bb45e-164">Si le destinataire décide qu’il ne peut pas traiter correctement le message, il appelle la méthode [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span><span class="sxs-lookup"><span data-stu-id="bb45e-164">If the receiver decides that it can't process the message successfully, it calls [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span></span> <span data-ttu-id="bb45e-165">La file d’attente déverrouille le message et le remet à disposition des autres destinataires.</span><span class="sxs-lookup"><span data-stu-id="bb45e-165">The queue then removes the lock from the message and makes it available to other receivers.</span></span>
* <span data-ttu-id="bb45e-166">Si le destinataire n’appelle aucune de ces méthodes pendant une période réglable (60 secondes par défaut), la file d’attente part du principe que le destinataire a échoué.</span><span class="sxs-lookup"><span data-stu-id="bb45e-166">If the receiver calls neither of these methods within a configurable period of time (by default, 60 seconds), the queue assumes the receiver has failed.</span></span> <span data-ttu-id="bb45e-167">Dans ce cas, elle se comporte comme si le destinataire avait passé l’appel **Abandon**, rendant le message accessible aux autres destinataires.</span><span class="sxs-lookup"><span data-stu-id="bb45e-167">In this case, it behaves as if the receiver had called **Abandon**, making the message available to other receivers.</span></span>

<span data-ttu-id="bb45e-168">Notez ce qui peut se produire ici : le même message risque d’être remis deux fois, peut-être à deux destinataires différents.</span><span class="sxs-lookup"><span data-stu-id="bb45e-168">Notice what can happen here: the same message might be delivered twice, perhaps to two different receivers.</span></span> <span data-ttu-id="bb45e-169">Les applications qui utilisent des files d’attente Service Bus doivent pouvoir faire face à cet événement.</span><span class="sxs-lookup"><span data-stu-id="bb45e-169">Applications using Service Bus queues must be prepared for this event.</span></span> <span data-ttu-id="bb45e-170">Afin de faciliter la détection des doublons, chaque message comporte une propriété [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) unique, qui reste la même par défaut quel que soit le nombre de lectures du message dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bb45e-170">To make duplicate detection easier, each message has a unique [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property that by default stays the same no matter how many times the message is read from a queue.</span></span> 

<span data-ttu-id="bb45e-171">Les files d’attente sont utiles dans de nombreuses situations.</span><span class="sxs-lookup"><span data-stu-id="bb45e-171">Queues are useful in quite a few situations.</span></span> <span data-ttu-id="bb45e-172">Elles permettent aux applications de communiquer, même si elles ne s’exécutent pas toutes les deux en même temps, ce qui peut s’avérer utile avec les applications mobiles et les applications de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="bb45e-172">They enable applications to communicate even when both aren't running at the same time, something that's especially handy with batch and mobile applications.</span></span> <span data-ttu-id="bb45e-173">Une file d'attente avec plusieurs destinataires assure aussi un équilibrage automatique de la charge, car les messages sont répartis vers ces différents destinataires.</span><span class="sxs-lookup"><span data-stu-id="bb45e-173">A queue with multiple receivers also provides automatic load balancing, since sent messages are spread across these receivers.</span></span>

## <a name="topics"></a><span data-ttu-id="bb45e-174">Rubriques</span><span class="sxs-lookup"><span data-stu-id="bb45e-174">Topics</span></span>

<span data-ttu-id="bb45e-175">Même si elles sont utiles, les files d'attente ne sont pas toujours la bonne solution.</span><span class="sxs-lookup"><span data-stu-id="bb45e-175">Useful as they are, queues aren't always the right solution.</span></span> <span data-ttu-id="bb45e-176">Parfois, les rubriques Service Bus sont plus utiles.</span><span class="sxs-lookup"><span data-stu-id="bb45e-176">Sometimes, Service Bus topics are better.</span></span> <span data-ttu-id="bb45e-177">La figure 3 illustre cette idée.</span><span class="sxs-lookup"><span data-stu-id="bb45e-177">Figure 3 illustrates this idea.</span></span>

![][3]

<span data-ttu-id="bb45e-178">**Figure 3 : en fonction du filtre spécifié par l’application, celle-ci peut recevoir certains messages ou tous les messages envoyés à une rubrique Service Bus.**</span><span class="sxs-lookup"><span data-stu-id="bb45e-178">**Figure 3: Based on the filter a subscribing application specifies, it can receive some or all the messages sent to a Service Bus topic.**</span></span>

<span data-ttu-id="bb45e-179">Les *rubriques* sont assez similaires aux files d’attente.</span><span class="sxs-lookup"><span data-stu-id="bb45e-179">A *topic* is similar in many ways to a queue.</span></span> <span data-ttu-id="bb45e-180">Les expéditeurs envoient les messages à la rubrique de la même façon qu’ils envoient des messages dans la file d’attente. Ces messages ont le même aspect que dans la file d’attente.</span><span class="sxs-lookup"><span data-stu-id="bb45e-180">Senders submit messages to a topic in the same way that they submit messages to a queue, and those messages look the same as with queues.</span></span> <span data-ttu-id="bb45e-181">La différence est que les rubriques permettent à chaque application réceptrice de créer son propre *abonnement* en définissant un *filtre*.</span><span class="sxs-lookup"><span data-stu-id="bb45e-181">The difference is that topics enable each receiving application to create its own *subscription* by defining a *filter*.</span></span> <span data-ttu-id="bb45e-182">L’abonné ne voit alors que les messages correspondant à ce filtre.</span><span class="sxs-lookup"><span data-stu-id="bb45e-182">A subscriber then sees only the messages that match that filter.</span></span> <span data-ttu-id="bb45e-183">Par exemple, la figure 3 présente un expéditeur et une rubrique avec trois abonnés, chacun disposant de son propre filtre :</span><span class="sxs-lookup"><span data-stu-id="bb45e-183">For example, Figure 3 shows a sender and a topic with three subscribers, each with its own filter:</span></span>

* <span data-ttu-id="bb45e-184">L’abonné 1 ne reçoit que les messages contenant la propriété *Seller="Ava"*.</span><span class="sxs-lookup"><span data-stu-id="bb45e-184">Subscriber 1 receives only messages that contain the property *Seller="Ava"*.</span></span>
* <span data-ttu-id="bb45e-185">L’abonné 2 reçoit les messages qui contiennent la propriété *Seller="Ruby"* et/ou la propriété *Amount* avec une valeur de 100 000 ou plus.</span><span class="sxs-lookup"><span data-stu-id="bb45e-185">Subscriber 2 receives messages that contain the property *Seller="Ruby"* and/or contain an *Amount* property whose value is greater than 100,000.</span></span> <span data-ttu-id="bb45e-186">Si Ruby est la directrice des ventes, elle souhaite peut-être pouvoir afficher ses propres ventes, ainsi que toutes les ventes importantes, quel que soit le vendeur.</span><span class="sxs-lookup"><span data-stu-id="bb45e-186">Perhaps Ruby is the sales manager, so she wants to see both her own sales and all large sales regardless of who makes them.</span></span>
* <span data-ttu-id="bb45e-187">L’abonné 3 a défini son filtre sur *True*, ce qui veut dire qu’il reçoit tous les messages.</span><span class="sxs-lookup"><span data-stu-id="bb45e-187">Subscriber 3 has set its filter to *True*, which means that it receives all messages.</span></span> <span data-ttu-id="bb45e-188">Par exemple, cette application peut être chargée de maintenir une piste d’audit et doit donc voir tous les messages.</span><span class="sxs-lookup"><span data-stu-id="bb45e-188">For example, this application might be responsible for maintaining an audit trail and therefore it needs to see all the messages.</span></span>

<span data-ttu-id="bb45e-189">Comme pour les files d’attente, les abonnés d’une rubrique peuvent lire les messages à l’aide de l’option [ReceiveAndDelete ou PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span><span class="sxs-lookup"><span data-stu-id="bb45e-189">As with queues, subscribers to a topic can read messages using either [ReceiveAndDelete or PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span></span> <span data-ttu-id="bb45e-190">À l’inverse des files d’attente cependant, un message unique envoyé à une rubrique peut être reçu par plusieurs abonnements.</span><span class="sxs-lookup"><span data-stu-id="bb45e-190">Unlike queues, however, a single message sent to a topic can be received by multiple subscriptions.</span></span> <span data-ttu-id="bb45e-191">Cette approche, communément appelée *publication et abonnement* (ou *pub/sub*), est utile quand plusieurs applications sont intéressées par les mêmes messages.</span><span class="sxs-lookup"><span data-stu-id="bb45e-191">This approach, commonly called *publish and subscribe* (or *pub/sub*), is useful whenever multiple applications are interested in the same messages.</span></span> <span data-ttu-id="bb45e-192">En définissant le filtre approprié, chaque abonné peut récupérer la partie du flux de messages qu’il souhaite voir.</span><span class="sxs-lookup"><span data-stu-id="bb45e-192">By defining the right filter, each subscriber can tap into just the part of the message stream that it needs to see.</span></span>

## <a name="relays"></a><span data-ttu-id="bb45e-193">relais</span><span class="sxs-lookup"><span data-stu-id="bb45e-193">Relays</span></span>

<span data-ttu-id="bb45e-194">Les files d’attente et les rubriques permettent la communication asynchrone unidirectionnelle via un intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="bb45e-194">Both queues and topics provide one-way asynchronous communication through a broker.</span></span> <span data-ttu-id="bb45e-195">Le trafic circule dans une seule direction, et il n’y a pas de connexion directe entre expéditeur et destinataire.</span><span class="sxs-lookup"><span data-stu-id="bb45e-195">Traffic flows in just one direction, and there's no direct connection between senders and receivers.</span></span> <span data-ttu-id="bb45e-196">Mais que faire si vous ne voulez pas de cette connexion ?</span><span class="sxs-lookup"><span data-stu-id="bb45e-196">But what if you don't want this connection?</span></span> <span data-ttu-id="bb45e-197">Supposons que vos applications doivent aussi bien envoyer que recevoir des messages, ou bien que vous souhaitiez disposer d’une liaison directe entre elles et que vous n’avez pas besoin d’un intermédiaire pour stocker les messages.</span><span class="sxs-lookup"><span data-stu-id="bb45e-197">Suppose your applications need to both send and receive messages, or perhaps you want a direct link between them and you don't need a broker to store messages.</span></span> <span data-ttu-id="bb45e-198">Pour ce genre de scénarios, Service Bus fournit des *relais*, comme illustré dans la figure 4.</span><span class="sxs-lookup"><span data-stu-id="bb45e-198">To address scenarios such as this, Service Bus provides *relays*, as Figure 4 shows.</span></span>

![][4]

<span data-ttu-id="bb45e-199">**Figure 4 : le relais Service Bus permet la communication bidirectionnelle synchrone entre applications.**</span><span class="sxs-lookup"><span data-stu-id="bb45e-199">**Figure 4: Service Bus relay provides synchronous, two-way communication between applications.**</span></span>

<span data-ttu-id="bb45e-200">La question évidente à poser à propos des relais est la suivante : pourquoi y recourir ?</span><span class="sxs-lookup"><span data-stu-id="bb45e-200">The obvious question to ask about relays is this: why would I use one?</span></span> <span data-ttu-id="bb45e-201">Même si je n’ai pas besoin de files d’attente, pourquoi faire communiquer les applications via un service cloud au lieu de les faire interagir directement ?</span><span class="sxs-lookup"><span data-stu-id="bb45e-201">Even if I don't need queues, why make applications communicate via a cloud service rather than just interact directly?</span></span> <span data-ttu-id="bb45e-202">La réponse est que de les faire communiquer directement peut s’avérer plus compliqué qu’il n’y paraît.</span><span class="sxs-lookup"><span data-stu-id="bb45e-202">The answer is that talking directly can be harder than you might think.</span></span>

<span data-ttu-id="bb45e-203">Supposons que vous souhaitiez connecter deux applications locales s’exécutant dans les centres de données de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="bb45e-203">Suppose you want to connect two on-premises applications, both running inside corporate datacenters.</span></span> <span data-ttu-id="bb45e-204">Chaque application se trouve derrière un pare-feu et chaque centre de données utilise probablement la traduction d’adresses réseau.</span><span class="sxs-lookup"><span data-stu-id="bb45e-204">Each of these applications sits behind a firewall, and each datacenter probably uses network address translation (NAT).</span></span> <span data-ttu-id="bb45e-205">Le pare-feu bloque les données entrantes sur presque tous les ports, et la traduction d’adresses réseau indique que les ordinateurs sur lesquels s’exécutent les applications ne disposent pas d’une adresse IP fixe que vous pouvez joindre directement depuis l’extérieur du centre de données.</span><span class="sxs-lookup"><span data-stu-id="bb45e-205">The firewall blocks incoming data on all but a few ports, and NAT implies that the machine each application is running on doesn't have a fixed IP address that you can reach directly from outside the datacenter.</span></span> <span data-ttu-id="bb45e-206">Sans aide supplémentaire, la connexion de ces applications via Internet public pose problème.</span><span class="sxs-lookup"><span data-stu-id="bb45e-206">Without some extra help, connecting these applications over the public internet is problematic.</span></span>

<span data-ttu-id="bb45e-207">Un Service Bus Relay peut être utile.</span><span class="sxs-lookup"><span data-stu-id="bb45e-207">A Service Bus relay can help.</span></span> <span data-ttu-id="bb45e-208">Afin d’établir une communication bidirectionnelle via un relais, chaque application établit une connexion TCP sortante avec Service Bus, et la maintient ouverte.</span><span class="sxs-lookup"><span data-stu-id="bb45e-208">To communicate bi-directionally through a relay, each application establishes an outbound TCP connection with Service Bus, then keeps it open.</span></span> <span data-ttu-id="bb45e-209">Toutes les communications entre les deux applications transitent par ces connexions.</span><span class="sxs-lookup"><span data-stu-id="bb45e-209">All communication between the two applications travels over these connections.</span></span> <span data-ttu-id="bb45e-210">Comme chaque connexion a été établie depuis le centre de données, le pare-feu autorise le trafic entrant vers chaque application sans ouvrir de nouveaux ports.</span><span class="sxs-lookup"><span data-stu-id="bb45e-210">Because each connection was established from inside the datacenter, the firewall allows incoming traffic to each application without opening new ports.</span></span> <span data-ttu-id="bb45e-211">Cette approche contourne également le problème de la traduction d’adresses réseau, car chaque application dispose d’un point de terminaison constant dans le cloud pendant toute la durée de la communication.</span><span class="sxs-lookup"><span data-stu-id="bb45e-211">This approach also gets around the NAT problem, because each application has a consistent endpoint in the cloud throughout the communication.</span></span> <span data-ttu-id="bb45e-212">En échangeant des données via le relais, les applications peuvent éviter les problèmes qui pourraient rendre la communication difficile.</span><span class="sxs-lookup"><span data-stu-id="bb45e-212">By exchanging data through the relay, the applications can avoid the problems that would otherwise make communication difficult.</span></span> 

<span data-ttu-id="bb45e-213">Pour utiliser les relais Service Bus, les applications s’appuient sur Windows Communication Foundation (WCF) Service Bus comporte des liaisons WCF qui simplifient l’interaction des applications Windows via les relais.</span><span class="sxs-lookup"><span data-stu-id="bb45e-213">To use Service Bus relays, applications rely on the Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="bb45e-214">Les applications qui utilisent déjà WCF peuvent normalement ne spécifier qu’une seule de ces liaisons, puis ensuite communiquer via un relais.</span><span class="sxs-lookup"><span data-stu-id="bb45e-214">Service Bus provides WCF bindings that make it straightforward for Windows applications to interact via relays.</span></span> <span data-ttu-id="bb45e-215">Cependant, à l’inverse des files d’attente et des rubriques, et même si elle reste possible, l’utilisation de relais à partir d’applications non-Windows demande un effort de programmation certain.</span><span class="sxs-lookup"><span data-stu-id="bb45e-215">Applications that already use WCF can typically specify one of these bindings, then talk to each other through a relay.</span></span> <span data-ttu-id="bb45e-216">En effet, aucune bibliothèque standard n’est fournie.</span><span class="sxs-lookup"><span data-stu-id="bb45e-216">Unlike queues and topics, however, using relays from non-Windows applications, while possible, requires some programming effort; no standard libraries are provided.</span></span>

<span data-ttu-id="bb45e-217">Contrairement aux files d’attente et aux rubriques, les applications ne créent pas de relais de façon explicite.</span><span class="sxs-lookup"><span data-stu-id="bb45e-217">Unlike queues and topics, applications don't explicitly create relays.</span></span> <span data-ttu-id="bb45e-218">Lorsqu’une application qui souhaite recevoir des messages établit une connexion TCP avec Service Bus, un relais est automatiquement créé.</span><span class="sxs-lookup"><span data-stu-id="bb45e-218">Instead, when an application that wishes to receive messages establishes a TCP connection with Service Bus, a relay is created automatically.</span></span> <span data-ttu-id="bb45e-219">Ce dernier est supprimé une fois la connexion abandonnée.</span><span class="sxs-lookup"><span data-stu-id="bb45e-219">When the connection is dropped, the relay is deleted.</span></span> <span data-ttu-id="bb45e-220">Pour qu’une application trouve le relais créé par un écouteur spécifique, Service Bus fournit un registre qui permet aux applications de retrouver un relais grâce à son nom.</span><span class="sxs-lookup"><span data-stu-id="bb45e-220">To enable an application to find the relay created by a specific listener, Service Bus provides a registry that enables applications to locate a specific relay by name.</span></span>

<span data-ttu-id="bb45e-221">Lorsque vous avez besoin d’une communication directe entre les applications, les relais constituent la meilleure solution.</span><span class="sxs-lookup"><span data-stu-id="bb45e-221">Relays are the right solution when you need direct communication between applications.</span></span> <span data-ttu-id="bb45e-222">Prenons par exemple le système de réservation d’une compagnie aérienne qui s’exécute sur un centre de données local qui peut être accessible à partir de bornes d’enregistrement, d’appareils mobiles et d’ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="bb45e-222">For example, consider an airline reservation system running in an on-premises datacenter that must be accessed from check-in kiosks, mobile devices, and other computers.</span></span> <span data-ttu-id="bb45e-223">Les applications qui s’exécutent sur tous ces systèmes peuvent s’appuyer sur les relais Service Bus dans le cloud pour communiquer, quel que soit l’endroit où elles s’exécutent.</span><span class="sxs-lookup"><span data-stu-id="bb45e-223">Applications running on all these systems could rely on Service Bus relays in the cloud to communicate, wherever they might be running.</span></span>

## <a name="summary"></a><span data-ttu-id="bb45e-224">Résumé</span><span class="sxs-lookup"><span data-stu-id="bb45e-224">Summary</span></span>

<span data-ttu-id="bb45e-225">La connexion d’applications a toujours fait partie de l’assemblage de solutions complètes, et l’éventail de scénarios qui requièrent des services et des applications pour communiquer entre eux augmentera, étant donné que de plus en plus d’applications et de périphériques sont connectés à Internet.</span><span class="sxs-lookup"><span data-stu-id="bb45e-225">Connecting applications has always been part of building complete solutions, and the range of scenarios that require applications and services to communicate with each other is set to increase as more applications and devices are connected to the internet.</span></span> <span data-ttu-id="bb45e-226">En fournissant pour cela des technologies cloud comme les files d’attente, les rubriques et les relais, Service Bus vise à rendre cette fonction essentielle encore plus simple à implémenter et plus largement accessible.</span><span class="sxs-lookup"><span data-stu-id="bb45e-226">By providing cloud-based technologies for achieving communication through queues, topics, and relays, Service Bus aims to make this essential function easier to implement and more broadly available.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bb45e-227">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="bb45e-227">Next steps</span></span>

<span data-ttu-id="bb45e-228">Maintenant que vous avez appris les principes de base d’Azure Service Bus, consultez ces liens pour en savoir plus :</span><span class="sxs-lookup"><span data-stu-id="bb45e-228">Now that you've learned the fundamentals of Azure Service Bus, follow these links to learn more.</span></span>

* <span data-ttu-id="bb45e-229">Utilisation des [files d’attente Service Bus](service-bus-dotnet-get-started-with-queues.md)</span><span class="sxs-lookup"><span data-stu-id="bb45e-229">How to use [Service Bus queues](service-bus-dotnet-get-started-with-queues.md)</span></span>
* <span data-ttu-id="bb45e-230">Utilisation des [rubriques Service Bus](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span><span class="sxs-lookup"><span data-stu-id="bb45e-230">How to use [Service Bus topics](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span></span>
* <span data-ttu-id="bb45e-231">Utilisation des [relais Service Bus](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span><span class="sxs-lookup"><span data-stu-id="bb45e-231">How to use [Service Bus relay](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span></span>
* [<span data-ttu-id="bb45e-232">Exemples Service Bus</span><span class="sxs-lookup"><span data-stu-id="bb45e-232">Service Bus samples</span></span>](service-bus-samples.md)

[1]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_01_architecture.png
[2]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_02_queues.png
[3]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_03_topicsandsubscriptions.png
[4]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_04_relay.png
