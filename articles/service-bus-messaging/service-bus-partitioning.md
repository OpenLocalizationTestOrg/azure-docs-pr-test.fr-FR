---
title: "aaaCreate les files d’attente Azure Service Bus et les rubriques partitionnés | Documents Microsoft"
description: "Décrit comment les files d’attente de toopartition Service Bus et des rubriques à l’aide de plusieurs messages fournit."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a0c7d5a2-4876-42cb-8344-a1fc988746e7
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm;hillaryc
ms.openlocfilehash: 6d42556a0714d6a012dc319f662521c8b0bb958b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="partitioned-queues-and-topics"></a><span data-ttu-id="29540-103">Files d’attente et rubriques partitionnées</span><span class="sxs-lookup"><span data-stu-id="29540-103">Partitioned queues and topics</span></span>
<span data-ttu-id="29540-104">Azure Service Bus utilise plusieurs messages de tooprocess courtiers et messagerie plusieurs stocke les messages de toostore.</span><span class="sxs-lookup"><span data-stu-id="29540-104">Azure Service Bus employs multiple message brokers tooprocess messages and multiple messaging stores toostore messages.</span></span> <span data-ttu-id="29540-105">Une file d’attente ou une rubrique classique est gérée par un seul courtier de messages et stockée dans une seule banque de messagerie.</span><span class="sxs-lookup"><span data-stu-id="29540-105">A conventional queue or topic is handled by a single message broker and stored in one messaging store.</span></span> <span data-ttu-id="29540-106">Service Bus *partitions* activer les files d’attente et rubriques, ou *des entités de messagerie*, toobe partitionnée entre plusieurs brokers et banques de messages.</span><span class="sxs-lookup"><span data-stu-id="29540-106">Service Bus *partitions* enable queues and topics, or *messaging entities*, toobe partitioned across multiple message brokers and messaging stores.</span></span> <span data-ttu-id="29540-107">Cela signifie que hello le débit global d’une entité partitionnée n’est plus limitée par des performances d’un seul broker ou de la banque de messages hello.</span><span class="sxs-lookup"><span data-stu-id="29540-107">This means that hello overall throughput of a partitioned entity is no longer limited by hello performance of a single message broker or messaging store.</span></span> <span data-ttu-id="29540-108">En outre, la panne temporaire d’une banque de messagerie ne rend pas une rubrique ou une file d’attente partitionnée indisponible.</span><span class="sxs-lookup"><span data-stu-id="29540-108">In addition, a temporary outage of a messaging store does not render a partitioned queue or topic unavailable.</span></span> <span data-ttu-id="29540-109">Les rubriques et les files d’attente partitionnées peuvent contenir toutes les fonctionnalités avancées de Service Bus, comme la prise en charge des transactions et des sessions.</span><span class="sxs-lookup"><span data-stu-id="29540-109">Partitioned queues and topics can contain all advanced Service Bus features, such as support for transactions and sessions.</span></span>

<span data-ttu-id="29540-110">Pour plus d’informations sur les mécanismes internes de Service Bus, consultez hello [architecture de Service Bus] [ Service Bus architecture] l’article.</span><span class="sxs-lookup"><span data-stu-id="29540-110">For information about Service Bus internals, see hello [Service Bus architecture][Service Bus architecture] article.</span></span>

<span data-ttu-id="29540-111">Le partitionnement est activé par défaut lors de la création d’entités sur toutes les files d’attente et rubriques à la fois dans la messagerie Standard et Premium.</span><span class="sxs-lookup"><span data-stu-id="29540-111">Partitioning is enabled by default at entity creation on all queues and topics in both Standard and Premium messaging.</span></span> <span data-ttu-id="29540-112">Vous pouvez créer des entités de niveau de messagerie Standard sans partitionnement, mais les files d’attente et les rubriques dans un espace de noms Premium sont toujours partitionnées ; cette option ne peut pas être désactivée.</span><span class="sxs-lookup"><span data-stu-id="29540-112">You can create Standard messaging tier entities without partitioning, but queues and topics in a Premium namespace are always partitioned; this option cannot be disabled.</span></span> 

<span data-ttu-id="29540-113">Il n’est pas possible de toochange hello option sur une file d’attente existante ou une rubrique dans les niveaux Standard ou Premium de partitionnement, vous pouvez uniquement définir hello option lorsque vous créez des entités de hello.</span><span class="sxs-lookup"><span data-stu-id="29540-113">It is not possible toochange hello partitioning option on an existing queue or topic in either Standard or Premium tiers, you can only set hello option when you create hello entity.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="29540-114">Fonctionnement</span><span class="sxs-lookup"><span data-stu-id="29540-114">How it works</span></span>

<span data-ttu-id="29540-115">Chaque file d’attente ou rubrique partitionnée est constituée de plusieurs fragments.</span><span class="sxs-lookup"><span data-stu-id="29540-115">Each partitioned queue or topic consists of multiple fragments.</span></span> <span data-ttu-id="29540-116">Chaque fragment est stocké dans une banque de messagerie différente et géré par un courtier de messages différent.</span><span class="sxs-lookup"><span data-stu-id="29540-116">Each fragment is stored in a different messaging store and handled by a different message broker.</span></span> <span data-ttu-id="29540-117">Lorsqu’un message est envoyé tooa la file d’attente partitionnée ou une rubrique, Service Bus assigne tooone de message hello de fragments de hello.</span><span class="sxs-lookup"><span data-stu-id="29540-117">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="29540-118">sélection de Hello est effectuée de façon aléatoire par Service Bus ou à l’aide d’une clé de partition qui hello expéditeur peut spécifier.</span><span class="sxs-lookup"><span data-stu-id="29540-118">hello selection is done randomly by Service Bus or by using a partition key that hello sender can specify.</span></span>

<span data-ttu-id="29540-119">Quand un client veut tooreceive un message à partir d’une file d’attente partitionnée ou à partir d’une rubrique partitionnée tooa d’abonnement, Service Bus interroge tous les fragments de messages, puis retourne hello premier message qui est obtenue à partir des hello magasins toohello destinataire de messagerie.</span><span class="sxs-lookup"><span data-stu-id="29540-119">When a client wants tooreceive a message from a partitioned queue, or from a subscription tooa partitioned topic, Service Bus queries all fragments for messages, then returns hello first message that is obtained from any of hello messaging stores toohello receiver.</span></span> <span data-ttu-id="29540-120">Les caches de service Bus hello autres messages et les retourne les lorsqu’il reçoit plus les demandes de réception.</span><span class="sxs-lookup"><span data-stu-id="29540-120">Service Bus caches hello other messages and returns them when it receives additional receive requests.</span></span> <span data-ttu-id="29540-121">Un client récepteur n’est pas informé de hello partitionnement ; Hello le comportement des clients d’une file d’attente partitionnée ou une rubrique (par exemple, lire, exécuter, différez, de lettres mortes, la prérécupération) est le comportement toohello identiques d’une entité normale.</span><span class="sxs-lookup"><span data-stu-id="29540-121">A receiving client is not aware of hello partitioning; hello client-facing behavior of a partitioned queue or topic (for example, read, complete, defer, deadletter, prefetching) is identical toohello behavior of a regular entity.</span></span>

<span data-ttu-id="29540-122">Il n’existe aucun coût supplémentaire lors de l’envoi d’un message à, ou lors de la réception d’un message depuis, une file d’attente ou une rubrique partitionnée.</span><span class="sxs-lookup"><span data-stu-id="29540-122">There is no additional cost when sending a message to, or receiving a message from, a partitioned queue or topic.</span></span>

## <a name="enable-partitioning"></a><span data-ttu-id="29540-123">Activation du partitionnement</span><span class="sxs-lookup"><span data-stu-id="29540-123">Enable partitioning</span></span>

<span data-ttu-id="29540-124">toouse partitionné les files d’attente et rubriques avec Azure Service Bus, utilisez hello Azure SDK version 2.2 ou version ultérieure, ou spécifiez `api-version=2013-10` dans vos requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="29540-124">toouse partitioned queues and topics with Azure Service Bus, use hello Azure SDK version 2.2 or later, or specify `api-version=2013-10` in your HTTP requests.</span></span>

### <a name="standard"></a><span data-ttu-id="29540-125">Standard</span><span class="sxs-lookup"><span data-stu-id="29540-125">Standard</span></span>

<span data-ttu-id="29540-126">Dans la couche de messagerie Standard hello, vous pouvez créer des files d’attente Service Bus et les rubriques de tailles de 1, 2, 3, 4 ou 5 Go (valeur par défaut hello est 1 Go).</span><span class="sxs-lookup"><span data-stu-id="29540-126">In hello Standard messaging tier, you can create Service Bus queues and topics in 1, 2, 3, 4, or 5 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="29540-127">Avec le partitionnement est activé, Service Bus crée 16 copies (16 partitions) de l’entité de hello pour chaque Go que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="29540-127">With partitioning enabled, Service Bus creates 16 copies (16 partitions) of hello entity for each GB you specify.</span></span> <span data-ttu-id="29540-128">Par conséquent, si vous créez une file d’attente est de 5 Go de taille, avec 16 partitions taille de file d’attente maximale hello devient (5 \* 16) = 80 Go.</span><span class="sxs-lookup"><span data-stu-id="29540-128">As such, if you create a queue that's 5 GB in size, with 16 partitions hello maximum queue size becomes (5 \* 16) = 80 GB.</span></span> <span data-ttu-id="29540-129">Vous pouvez voir la taille maximale de hello de votre file d’attente partitionnée ou une rubrique en examinant son entrée sur hello [portail Azure][Azure portal], Bonjour **vue d’ensemble** panneau pour cette entité.</span><span class="sxs-lookup"><span data-stu-id="29540-129">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

### <a name="premium"></a><span data-ttu-id="29540-130">Premium</span><span class="sxs-lookup"><span data-stu-id="29540-130">Premium</span></span>

<span data-ttu-id="29540-131">Dans un espace de noms de niveau Premium, vous pouvez créer des files d’attente Service Bus et les rubriques de tailles de 1, 2, 3, 4, 5, 10, 20, 40 ou 80 Go (valeur par défaut hello est 1 Go).</span><span class="sxs-lookup"><span data-stu-id="29540-131">In a Premium tier namespace, you can create Service Bus queues and topics in 1, 2, 3, 4, 5, 10, 20, 40, or 80 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="29540-132">Avec le partitionnement activé par défaut, Service Bus crée deux partitions par entité.</span><span class="sxs-lookup"><span data-stu-id="29540-132">With partitioning enabled by default, Service Bus creates two partitions per entity.</span></span> <span data-ttu-id="29540-133">Vous pouvez voir la taille maximale de hello de votre file d’attente partitionnée ou une rubrique en examinant son entrée sur hello [portail Azure][Azure portal], Bonjour **vue d’ensemble** panneau pour cette entité.</span><span class="sxs-lookup"><span data-stu-id="29540-133">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

<span data-ttu-id="29540-134">Pour plus d’informations sur le partitionnement dans la couche de messagerie hello Premium, consultez [Premium de Bus de Service et les niveaux de messagerie Standard](service-bus-premium-messaging.md).</span><span class="sxs-lookup"><span data-stu-id="29540-134">For more information about partitioning in hello Premium messaging tier, see [Service Bus Premium and Standard messaging tiers](service-bus-premium-messaging.md).</span></span> 

### <a name="create-a-partitioned-entity"></a><span data-ttu-id="29540-135">Créer une entité partitionnée</span><span class="sxs-lookup"><span data-stu-id="29540-135">Create a partitioned entity</span></span>

<span data-ttu-id="29540-136">Il existe plusieurs façons toocreate une file d’attente partitionnée ou une rubrique.</span><span class="sxs-lookup"><span data-stu-id="29540-136">There are several ways toocreate a partitioned queue or topic.</span></span> <span data-ttu-id="29540-137">Lorsque vous créez une file d’attente hello ou une rubrique à partir de votre application, vous pouvez activer le partitionnement de la file d’attente hello ou une rubrique en hello de paramètre respectivement [QueueDescription.EnablePartitioning] [ QueueDescription.EnablePartitioning] ou [TopicDescription.EnablePartitioning] [ TopicDescription.EnablePartitioning] propriété trop**true**.</span><span class="sxs-lookup"><span data-stu-id="29540-137">When you create hello queue or topic from your application, you can enable partitioning for hello queue or topic by respectively setting hello [QueueDescription.EnablePartitioning][QueueDescription.EnablePartitioning] or [TopicDescription.EnablePartitioning][TopicDescription.EnablePartitioning] property too**true**.</span></span> <span data-ttu-id="29540-138">Ces propriétés doivent être définies à hello délai hello file d’attente ou rubrique est créée.</span><span class="sxs-lookup"><span data-stu-id="29540-138">These properties must be set at hello time hello queue or topic is created.</span></span> <span data-ttu-id="29540-139">Comme indiqué précédemment, il est impossible toochange ces propriétés sur une file d’attente existante ou une rubrique.</span><span class="sxs-lookup"><span data-stu-id="29540-139">As stated previously, it is not possible toochange these properties on an existing queue or topic.</span></span> <span data-ttu-id="29540-140">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="29540-140">For example:</span></span>

```csharp
// Create partitioned topic
NamespaceManager ns = NamespaceManager.CreateFromConnectionString(myConnectionString);
TopicDescription td = new TopicDescription(TopicName);
td.EnablePartitioning = true;
ns.CreateTopic(td);
```

<span data-ttu-id="29540-141">Vous pouvez également créer une file d’attente partitionnée ou une rubrique Bonjour [portail Azure] [ Azure portal] ou dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="29540-141">Alternatively, you can create a partitioned queue or topic in hello [Azure portal][Azure portal] or in Visual Studio.</span></span> <span data-ttu-id="29540-142">Lorsque vous créez une file d’attente ou une rubrique dans le portail de hello, hello **activer leur partitionnement** option dans la file d’attente hello ou une rubrique **créer** lame est activée par défaut.</span><span class="sxs-lookup"><span data-stu-id="29540-142">When you create a queue or topic in hello portal, hello **Enable partitioning** option in hello queue or topic **Create** blade is checked by default.</span></span> <span data-ttu-id="29540-143">Vous pouvez uniquement désactiver cette option dans une entité de niveau Standard ; Bonjour partitionnement de niveau Premium est toujours activé.</span><span class="sxs-lookup"><span data-stu-id="29540-143">You can only disable this option in a Standard tier entity; in hello Premium tier partitioning is always enabled.</span></span> <span data-ttu-id="29540-144">Dans Visual Studio, cliquez sur hello **activer le partitionnement** case à cocher Bonjour **nouvelle file d’attente** ou **nouvelle rubrique** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="29540-144">In Visual Studio, click hello **Enable Partitioning** checkbox in hello **New Queue** or **New Topic** dialog box.</span></span>

## <a name="use-of-partition-keys"></a><span data-ttu-id="29540-145">Utilisation de clés de partition</span><span class="sxs-lookup"><span data-stu-id="29540-145">Use of partition keys</span></span>
<span data-ttu-id="29540-146">Lorsqu’un message est envoyé vers une file d’attente partitionnée ou une rubrique, Service Bus vérifie présence hello d’une clé de partition.</span><span class="sxs-lookup"><span data-stu-id="29540-146">When a message is enqueued into a partitioned queue or topic, Service Bus checks for hello presence of a partition key.</span></span> <span data-ttu-id="29540-147">S’il en trouve, il sélectionne le fragment de hello basé sur cette clé.</span><span class="sxs-lookup"><span data-stu-id="29540-147">If it finds one, it selects hello fragment based on that key.</span></span> <span data-ttu-id="29540-148">S’il ne trouve pas une clé de partition, il sélectionne le fragment hello selon un algorithme interne.</span><span class="sxs-lookup"><span data-stu-id="29540-148">If it does not find a partition key, it selects hello fragment based on an internal algorithm.</span></span>

### <a name="using-a-partition-key"></a><span data-ttu-id="29540-149">Utilisation d’une clé de partition</span><span class="sxs-lookup"><span data-stu-id="29540-149">Using a partition key</span></span>
<span data-ttu-id="29540-150">Certains scénarios, tels que les sessions ou les transactions, nécessitent toobe messages stocké dans un fragment spécifique.</span><span class="sxs-lookup"><span data-stu-id="29540-150">Some scenarios, such as sessions or transactions, require messages toobe stored in a specific fragment.</span></span> <span data-ttu-id="29540-151">Tous ces scénarios requièrent l’utilisation hello d’une clé de partition.</span><span class="sxs-lookup"><span data-stu-id="29540-151">All these scenarios require hello use of a partition key.</span></span> <span data-ttu-id="29540-152">Tous les messages que hello utilisez même clé de partition sont affectés toohello même fragment.</span><span class="sxs-lookup"><span data-stu-id="29540-152">All messages that use hello same partition key are assigned toohello same fragment.</span></span> <span data-ttu-id="29540-153">Si le fragment de hello est temporairement indisponible, Service Bus renvoie une erreur.</span><span class="sxs-lookup"><span data-stu-id="29540-153">If hello fragment is temporarily unavailable, Service Bus returns an error.</span></span>

<span data-ttu-id="29540-154">Selon le scénario de hello, les propriétés de message différents sont utilisées comme clé de partition :</span><span class="sxs-lookup"><span data-stu-id="29540-154">Depending on hello scenario, different message properties are used as a partition key:</span></span>

<span data-ttu-id="29540-155">**SessionId**: si un message hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] propriété définie, puis le Service Bus utilise cette propriété en tant que clé de partition hello.</span><span class="sxs-lookup"><span data-stu-id="29540-155">**SessionId**: If a message has hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses this property as hello partition key.</span></span> <span data-ttu-id="29540-156">De cette manière, tous les messages appartenant toohello même session sont gérés par hello même service broker de message.</span><span class="sxs-lookup"><span data-stu-id="29540-156">This way, all messages that belong toohello same session are handled by hello same message broker.</span></span> <span data-ttu-id="29540-157">Ainsi, le message de tooguarantee Service Bus classement, ainsi que la cohérence de hello des États de session.</span><span class="sxs-lookup"><span data-stu-id="29540-157">This enables Service Bus tooguarantee message ordering as well as hello consistency of session states.</span></span>

<span data-ttu-id="29540-158">**PartitionKey**: si un message hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propriété mais pas hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] propriété définie, puis Service Bus utilise hello [PartitionKey] [ PartitionKey] propriété en tant que clé de partition hello.</span><span class="sxs-lookup"><span data-stu-id="29540-158">**PartitionKey**: If a message has hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property but not hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses hello [PartitionKey][PartitionKey] property as hello partition key.</span></span> <span data-ttu-id="29540-159">Si le message de salutation a deux hello [SessionId] [ SessionId] et hello [PartitionKey] [ PartitionKey] jeu de propriétés, les deux propriétés doivent être identiques.</span><span class="sxs-lookup"><span data-stu-id="29540-159">If hello message has both hello [SessionId][SessionId] and hello [PartitionKey][PartitionKey] properties set, both properties must be identical.</span></span> <span data-ttu-id="29540-160">Si hello [PartitionKey] [ PartitionKey] propriété a une valeur différente tooa hello [SessionId] [ SessionId] propriété, Service Bus retourne non valide exception de l’opération.</span><span class="sxs-lookup"><span data-stu-id="29540-160">If hello [PartitionKey][PartitionKey] property is set tooa different value than hello [SessionId][SessionId] property, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="29540-161">Hello [PartitionKey] [ PartitionKey] propriété doit être utilisée si un expéditeur envoie des messages transactionnelles prenant en charge de session non.</span><span class="sxs-lookup"><span data-stu-id="29540-161">hello [PartitionKey][PartitionKey] property should be used if a sender sends non-session aware transactional messages.</span></span> <span data-ttu-id="29540-162">Hello clé de partition garantit que tous les messages sont envoyés dans une transaction sont gérés par hello que même broker de messagerie.</span><span class="sxs-lookup"><span data-stu-id="29540-162">hello partition key ensures that all messages that are sent within a transaction are handled by hello same messaging broker.</span></span>

<span data-ttu-id="29540-163">**MessageId**: si la file d’attente de hello ou une rubrique a hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] propriété trop**true** et hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] ou [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propriétés ne sont pas définies, puis hello [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] propriété sert de clé de partition hello.</span><span class="sxs-lookup"><span data-stu-id="29540-163">**MessageId**: If hello queue or topic has hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property set too**true** and hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] or [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] properties are not set, then hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] property serves as hello partition key.</span></span> <span data-ttu-id="29540-164">(Notez que les bibliothèques Microsoft .NET et AMQP hello attribuer automatiquement un ID de message n’est pas le cas de l’application d’expédition hello). Dans ce cas, toutes les copies de hello même message sont gérées par Bonjour même service broker de message.</span><span class="sxs-lookup"><span data-stu-id="29540-164">(Note that hello Microsoft .NET and AMQP libraries automatically assign a message ID if hello sending application does not.) In this case, all copies of hello same message are handled by hello same message broker.</span></span> <span data-ttu-id="29540-165">Cela permet à Service Bus toodetect et éliminer les messages en double.</span><span class="sxs-lookup"><span data-stu-id="29540-165">This enables Service Bus toodetect and eliminate duplicate messages.</span></span> <span data-ttu-id="29540-166">Si hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] propriété n’est pas définie trop**true**, Service Bus ne tient pas compte hello [MessageId] [ MessageId] propriété comme clé de partition.</span><span class="sxs-lookup"><span data-stu-id="29540-166">If hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property is not set too**true**, Service Bus does not consider hello [MessageId][MessageId] property as a partition key.</span></span>

### <a name="not-using-a-partition-key"></a><span data-ttu-id="29540-167">Non utilisation d'une clé de partition</span><span class="sxs-lookup"><span data-stu-id="29540-167">Not using a partition key</span></span>
<span data-ttu-id="29540-168">En absence de hello d’une clé de partition, Service Bus distribue les messages dans un tourniquet tooall hello des fragments de file d’attente partitionnée de hello ou une rubrique.</span><span class="sxs-lookup"><span data-stu-id="29540-168">In hello absence of a partition key, Service Bus distributes messages in a round-robin fashion tooall hello fragments of hello partitioned queue or topic.</span></span> <span data-ttu-id="29540-169">Si le fragment de hello choisi n’est pas disponible, Service Bus affecte autre fragment hello message tooa.</span><span class="sxs-lookup"><span data-stu-id="29540-169">If hello chosen fragment is not available, Service Bus assigns hello message tooa different fragment.</span></span> <span data-ttu-id="29540-170">De cette manière, opération d’envoi hello réussit en dépit de l’indisponibilité temporaire d’une banque de messages hello.</span><span class="sxs-lookup"><span data-stu-id="29540-170">This way, hello send operation succeeds despite hello temporary unavailability of a messaging store.</span></span> <span data-ttu-id="29540-171">Toutefois, vous n’obtiendrez pas hello classement qu’une clé de partition fournit garanti.</span><span class="sxs-lookup"><span data-stu-id="29540-171">However, you will not achieve hello guaranteed ordering that a partition key provides.</span></span>

<span data-ttu-id="29540-172">Pour obtenir une explication plus approfondie des compromis hello entre la disponibilité (aucune clé de partition) et la cohérence (à l’aide d’une clé de partition), consultez [cet article](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="29540-172">For a more in-depth discussion of hello tradeoff between availability (no partition key) and consistency (using a partition key), see [this article](../event-hubs/event-hubs-availability-and-consistency.md).</span></span> <span data-ttu-id="29540-173">Ces informations s’appliquent également les entités de Service Bus toopartitioned et les partitions de concentrateurs d’événements.</span><span class="sxs-lookup"><span data-stu-id="29540-173">This information applies equally toopartitioned Service Bus entities and Event Hubs partitions.</span></span>

<span data-ttu-id="29540-174">toogive Service Bus suffisamment message de type hello tooenqueue temps dans un fragment différent, hello [MessagingFactorySettings.OperationTimeout] [ MessagingFactorySettings.OperationTimeout] valeur spécifiée par le client hello qui envoie le message de type hello doit être supérieure à 15 secondes.</span><span class="sxs-lookup"><span data-stu-id="29540-174">toogive Service Bus enough time tooenqueue hello message into a different fragment, hello [MessagingFactorySettings.OperationTimeout][MessagingFactorySettings.OperationTimeout] value specified by hello client that sends hello message must be greater than 15 seconds.</span></span> <span data-ttu-id="29540-175">Il est recommandé de définir hello [OperationTimeout] [ OperationTimeout] propriété toohello par défaut de 60 secondes.</span><span class="sxs-lookup"><span data-stu-id="29540-175">It is recommended that you set hello [OperationTimeout][OperationTimeout] property toohello default value of 60 seconds.</span></span>

<span data-ttu-id="29540-176">Notez qu’une clé de partition « épingle » un fragment spécifique tooa de message.</span><span class="sxs-lookup"><span data-stu-id="29540-176">Note that a partition key "pins" a message tooa specific fragment.</span></span> <span data-ttu-id="29540-177">Si la banque de messages hello qui détient ce fragment n’est pas disponible, Service Bus renvoie une erreur.</span><span class="sxs-lookup"><span data-stu-id="29540-177">If hello messaging store that holds this fragment is unavailable, Service Bus returns an error.</span></span> <span data-ttu-id="29540-178">En absence de hello d’une clé de partition, Service Bus peut choisir un autre fragment et hello réussit.</span><span class="sxs-lookup"><span data-stu-id="29540-178">In hello absence of a partition key, Service Bus can choose a different fragment and hello operation succeeds.</span></span> <span data-ttu-id="29540-179">Par conséquent, il est recommandé de ne pas fournir de clé de partition, sauf si elle est requise.</span><span class="sxs-lookup"><span data-stu-id="29540-179">Therefore, it is recommended that you do not supply a partition key unless it is required.</span></span>

## <a name="advanced-topics-use-transactions-with-partitioned-entities"></a><span data-ttu-id="29540-180">Rubriques avancées : utiliser des transactions avec des entités partitionnées</span><span class="sxs-lookup"><span data-stu-id="29540-180">Advanced topics: use transactions with partitioned entities</span></span>
<span data-ttu-id="29540-181">Les messages envoyés dans le cadre d’une transaction doivent spécifier une clé de partition.</span><span class="sxs-lookup"><span data-stu-id="29540-181">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="29540-182">Cela peut être une des propriétés suivantes de hello : [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], ou [ BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span><span class="sxs-lookup"><span data-stu-id="29540-182">This can be one of hello following properties: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], or [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span></span> <span data-ttu-id="29540-183">Tous les messages sont envoyés dans le cadre de hello même transaction doive spécifier hello la même clé de partition.</span><span class="sxs-lookup"><span data-stu-id="29540-183">All messages that are sent as part of hello same transaction must specify hello same partition key.</span></span> <span data-ttu-id="29540-184">Si vous essayez de toosend un message sans clé de partition dans une transaction, Service Bus renvoie une exception d’opération non valide.</span><span class="sxs-lookup"><span data-stu-id="29540-184">If you attempt toosend a message without a partition key within a transaction, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="29540-185">Si vous essayez de toosend plusieurs messages dans hello même transaction qui ont différentes clés de partition, Service Bus renvoie une exception d’opération non valide.</span><span class="sxs-lookup"><span data-stu-id="29540-185">If you attempt toosend multiple messages within hello same transaction that have different partition keys, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="29540-186">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="29540-186">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.PartitionKey = "myPartitionKey";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

<span data-ttu-id="29540-187">Si une des propriétés hello servir de clé de partition sont définie, codes confidentiels de Service Bus hello fragments de message tooa spécifique.</span><span class="sxs-lookup"><span data-stu-id="29540-187">If any of hello properties that serve as a partition key are set, Service Bus pins hello message tooa specific fragment.</span></span> <span data-ttu-id="29540-188">Ce comportement se produit qu'une transaction soit utilisée ou non.</span><span class="sxs-lookup"><span data-stu-id="29540-188">This behavior occurs whether or not a transaction is used.</span></span> <span data-ttu-id="29540-189">Il est recommandé de ne pas spécifier de clé de partition si elle n'est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="29540-189">It is recommended that you do not specify a partition key if it is not necessary.</span></span>

## <a name="using-sessions-with-partitioned-entities"></a><span data-ttu-id="29540-190">Utilisation de sessions avec les entités partitionnées</span><span class="sxs-lookup"><span data-stu-id="29540-190">Using sessions with partitioned entities</span></span>
<span data-ttu-id="29540-191">toosend une rubrique en charge la session de message transactionnel tooa ou file d’attente, message de salutation doit avoir hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] jeu de propriétés.</span><span class="sxs-lookup"><span data-stu-id="29540-191">toosend a transactional message tooa session-aware topic or queue, hello message must have hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set.</span></span> <span data-ttu-id="29540-192">Si hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] propriété est également spécifiée, elle doit être identique toohello [SessionId] [ SessionId] propriété.</span><span class="sxs-lookup"><span data-stu-id="29540-192">If hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property is specified as well, it must be identical toohello [SessionId][SessionId] property.</span></span> <span data-ttu-id="29540-193">Si ces propriétés diffèrent, Service Bus renvoie une exception d’opération non valide.</span><span class="sxs-lookup"><span data-stu-id="29540-193">If they differ, Service Bus returns an invalid operation exception.</span></span>

<span data-ttu-id="29540-194">Contrairement à standards (non partitionnée) les files d’attente ou rubriques, il n’est pas possible toouse un toosend transaction unique plusieurs sessions de toodifferent de messages.</span><span class="sxs-lookup"><span data-stu-id="29540-194">Unlike regular (non-partitioned) queues or topics, it is not possible toouse a single transaction toosend multiple messages toodifferent sessions.</span></span> <span data-ttu-id="29540-195">En cas de tentative, Service Bus renvoie une exception d’opération non valide.</span><span class="sxs-lookup"><span data-stu-id="29540-195">If attempted, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="29540-196">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="29540-196">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.SessionId = "mySession";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

## <a name="automatic-message-forwarding-with-partitioned-entities"></a><span data-ttu-id="29540-197">Transfert automatique des messages avec des entités partitionnées</span><span class="sxs-lookup"><span data-stu-id="29540-197">Automatic message forwarding with partitioned entities</span></span>
<span data-ttu-id="29540-198">Service Bus prend en charge le transfert automatique des messages à partir de, vers ou entre les entités partitionnées.</span><span class="sxs-lookup"><span data-stu-id="29540-198">Service Bus supports automatic message forwarding from, to, or between partitioned entities.</span></span> <span data-ttu-id="29540-199">tooenable transfert automatique de messages, définissez hello [QueueDescription.ForwardTo] [ QueueDescription.ForwardTo] propriété sur la file d’attente de la source hello ou un abonnement.</span><span class="sxs-lookup"><span data-stu-id="29540-199">tooenable automatic message forwarding, set hello [QueueDescription.ForwardTo][QueueDescription.ForwardTo] property on hello source queue or subscription.</span></span> <span data-ttu-id="29540-200">Si le message de type hello spécifie une clé de partition ([SessionId][SessionId], [PartitionKey][PartitionKey], ou [MessageId] [ MessageId]), cette clé de partition est utilisée pour l’entité de destination hello.</span><span class="sxs-lookup"><span data-stu-id="29540-200">If hello message specifies a partition key ([SessionId][SessionId], [PartitionKey][PartitionKey], or [MessageId][MessageId]), that partition key is used for hello destination entity.</span></span>

## <a name="considerations-and-guidelines"></a><span data-ttu-id="29540-201">Considérations et recommandations</span><span class="sxs-lookup"><span data-stu-id="29540-201">Considerations and guidelines</span></span>
* <span data-ttu-id="29540-202">**Fonctionnalités de cohérence haute**: si une entité utilise des fonctionnalités telles que des sessions, détection des doublons ou un contrôle explicite de la clé de partitionnement, les opérations de messagerie hello sont toujours toospecific routé fragments.</span><span class="sxs-lookup"><span data-stu-id="29540-202">**High consistency features**: If an entity uses features such as sessions, duplicate detection, or explicit control of partitioning key, then hello messaging operations are always routed toospecific fragments.</span></span> <span data-ttu-id="29540-203">Si un des fragments de hello rencontrer un trafic élevé ou le magasin sous-jacent hello est défectueux, ces opérations échouent et la disponibilité est réduite.</span><span class="sxs-lookup"><span data-stu-id="29540-203">If any of hello fragments experience high traffic or hello underlying store is unhealthy, those operations fail and availability is reduced.</span></span> <span data-ttu-id="29540-204">En général, la cohérence de hello est bien plue importante que les entités non partitionnée ; uniquement un sous-ensemble du trafic rencontre des problèmes, comme le trafic de hello tooall exécutée.</span><span class="sxs-lookup"><span data-stu-id="29540-204">Overall, hello consistency is still much higher than non-partitioned entities; only a subset of traffic is experiencing issues, as opposed tooall hello traffic.</span></span> <span data-ttu-id="29540-205">Pour plus d’informations, consultez cette [discussion sur la disponibilité et la cohérence](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="29540-205">For more information, see this [discussion of availability and consistency](../event-hubs/event-hubs-availability-and-consistency.md).</span></span>
* <span data-ttu-id="29540-206">**Gestion**: opérations telles que Create, Update et Delete doivent être exécutées sur tous les fragments de hello d’entité de hello.</span><span class="sxs-lookup"><span data-stu-id="29540-206">**Management**: Operations such as Create, Update and Delete must be performed on all hello fragments of hello entity.</span></span> <span data-ttu-id="29540-207">Si un fragment est défectueux, cela peut entraîner l’échec de ces opérations.</span><span class="sxs-lookup"><span data-stu-id="29540-207">If any fragment is unhealthy it could result in failures for these operations.</span></span> <span data-ttu-id="29540-208">Pour une opération d’obtention de hello, des informations telles que des nombres de messages doivent être agrégées à partir de tous les fragments.</span><span class="sxs-lookup"><span data-stu-id="29540-208">For hello Get operation, information such as message counts must be aggregated from all fragments.</span></span> <span data-ttu-id="29540-209">Si un fragment est défectueux, état de disponibilité d’entité hello est signalée comme limitée.</span><span class="sxs-lookup"><span data-stu-id="29540-209">If any fragment is unhealthy, hello entity availability status is reported as limited.</span></span>
* <span data-ttu-id="29540-210">**Scénarios de message de volume à faible**: dans ce cas, surtout lorsque vous utilisez le protocole de hello HTTP, vous avez peut-être tooperform plusieurs opérations de réception dans l’ordre tooobtain tous les messages de type hello.</span><span class="sxs-lookup"><span data-stu-id="29540-210">**Low volume message scenarios**: For such scenarios, especially when using hello HTTP protocol, you may have tooperform multiple receive operations in order tooobtain all hello messages.</span></span> <span data-ttu-id="29540-211">Pour les demandes de réception, serveur frontal hello effectue une opération de réception sur tous les fragments hello et met en cache toutes les réponses hello reçues.</span><span class="sxs-lookup"><span data-stu-id="29540-211">For receive requests, hello front end performs a receive on all hello fragments and caches all hello responses received.</span></span> <span data-ttu-id="29540-212">Une demande de réception suivantes sur la même connexion serait tirer parti de cette mise en cache et recevoir des latences de hello sera inférieure.</span><span class="sxs-lookup"><span data-stu-id="29540-212">A subsequent receive request on hello same connection would benefit from this caching and receive latencies will be lower.</span></span> <span data-ttu-id="29540-213">Toutefois, si vous disposez de plusieurs connexions ou si vous utilisez HTTP, une nouvelle connexion est établie pour chaque demande.</span><span class="sxs-lookup"><span data-stu-id="29540-213">However, if you have multiple connections or use HTTP, that establishes a new connection for each request.</span></span> <span data-ttu-id="29540-214">Par conséquent, il n’existe aucune garantie qu’il serait arriver sur hello même nœud.</span><span class="sxs-lookup"><span data-stu-id="29540-214">As such, there is no guarantee that it would land on hello same node.</span></span> <span data-ttu-id="29540-215">Si tous les messages existants sont verrouillés et mis en cache dans un autre serveur frontal, hello retourne de l’opération de réception **null**.</span><span class="sxs-lookup"><span data-stu-id="29540-215">If all existing messages are locked and cached in another front end, hello receive operation returns **null**.</span></span> <span data-ttu-id="29540-216">Les messages peuvent arriver à expiration et vous pouvez les recevoir à nouveau.</span><span class="sxs-lookup"><span data-stu-id="29540-216">Messages eventually expire and you can receive them again.</span></span> <span data-ttu-id="29540-217">La persistance du protocole HTTP est recommandée.</span><span class="sxs-lookup"><span data-stu-id="29540-217">HTTP keep-alive is recommended.</span></span>
* <span data-ttu-id="29540-218">**Parcourir/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) ne retourne pas toujours le nombre de hello de messages spécifiés dans hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) propriété.</span><span class="sxs-lookup"><span data-stu-id="29540-218">**Browse/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) does not always return hello number of messages specified in hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) property.</span></span> <span data-ttu-id="29540-219">Il existe deux raisons courantes à cela.</span><span class="sxs-lookup"><span data-stu-id="29540-219">There are two common reasons for this.</span></span> <span data-ttu-id="29540-220">L’une des raisons sont que hello agrégées de collection hello de messages dépasse hello maximale de 256 Ko.</span><span class="sxs-lookup"><span data-stu-id="29540-220">One reason is that hello aggregated size of hello collection of messages exceeds hello maximum size of 256KB.</span></span> <span data-ttu-id="29540-221">Une autre raison est que si la file d’attente de hello ou une rubrique a hello [EnablePartitioning propriété](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) défini trop**true**, une partition ne peut pas avoir suffisamment de messages toocomplete hello a demandé le nombre de messages.</span><span class="sxs-lookup"><span data-stu-id="29540-221">Another reason is that if hello queue or topic has hello [EnablePartitioning property](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) set too**true**, a partition may not have enough messages toocomplete hello requested number of messages.</span></span> <span data-ttu-id="29540-222">En règle générale, si une application veut tooreceive un certain nombre de messages, il doit appeler [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) à plusieurs reprises jusqu'à ce qu’il obtient le nombre de messages, ou il n’y aucun toopeek plus de messages.</span><span class="sxs-lookup"><span data-stu-id="29540-222">In general, if an application wants tooreceive a specific number of messages, it should call [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repeatedly until it gets that number of messages, or there are no more messages toopeek.</span></span> <span data-ttu-id="29540-223">Pour plus d’informations, y compris pour obtenir des exemples de code, consultez [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) ou [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span><span class="sxs-lookup"><span data-stu-id="29540-223">For more information, including code samples, see [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) or [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span></span>

## <a name="latest-added-features"></a><span data-ttu-id="29540-224">Dernières fonctionnalités ajoutées</span><span class="sxs-lookup"><span data-stu-id="29540-224">Latest added features</span></span>
* <span data-ttu-id="29540-225">L’ajout ou la suppression de règles est désormais pris en charge avec les entités partitionnées.</span><span class="sxs-lookup"><span data-stu-id="29540-225">Add or remove rule is now supported with partitioned entities.</span></span> <span data-ttu-id="29540-226">À la différence des entités non partitionnée, ces opérations ne sont pas prises en charge dans le cadre des transactions.</span><span class="sxs-lookup"><span data-stu-id="29540-226">Different from non-partitioned entities, these operations are not supported under transactions.</span></span> 
* <span data-ttu-id="29540-227">AMQP est désormais pris en charge pour envoyer et recevoir des messages tooand d’une entité partitionnée.</span><span class="sxs-lookup"><span data-stu-id="29540-227">AMQP is now supported for sending and receiving messages tooand from a partitioned entity.</span></span>
* <span data-ttu-id="29540-228">AMQP est désormais pris en charge pour hello opérations suivantes : [envoyer de lot](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [lot recevoir](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [réception par numéro de séquence](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [aperçu](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [ Renouveler le verrou](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [planifier Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Annuler Message planifiée](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [ajouter une règle](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [supprimer la règle](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Verrou de renouvellement de session](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [définir l’état de Session](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [obtenir l’état de Session](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), et [énumérer les Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span><span class="sxs-lookup"><span data-stu-id="29540-228">AMQP is now supported for hello following operations: [Batch Send](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch Receive](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive by Sequence Number](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [Renew Lock](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [Schedule Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancel Scheduled Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Add Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Remove Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Session Renew Lock](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [Set Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), and [Enumerate Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span></span>

## <a name="partitioned-entities-limitations"></a><span data-ttu-id="29540-229">Limites des entités partitionnées</span><span class="sxs-lookup"><span data-stu-id="29540-229">Partitioned entities limitations</span></span>
<span data-ttu-id="29540-230">Actuellement, Service Bus impose hello limites suivantes sur les rubriques et files d’attente partitionnées :</span><span class="sxs-lookup"><span data-stu-id="29540-230">Currently Service Bus imposes hello following limitations on partitioned queues and topics:</span></span>

* <span data-ttu-id="29540-231">Celles-ci ne gèrent pas d’envoi de messages appartenant toodifferent sessions dans une transaction unique.</span><span class="sxs-lookup"><span data-stu-id="29540-231">Partitioned queues and topics do not support sending messages that belong toodifferent sessions in a single transaction.</span></span>
* <span data-ttu-id="29540-232">Service Bus permet actuellement too100 partitionné les files d’attente ou rubriques par espace de noms.</span><span class="sxs-lookup"><span data-stu-id="29540-232">Service Bus currently allows up too100 partitioned queues or topics per namespace.</span></span> <span data-ttu-id="29540-233">Chaque file d’attente partitionnée ou une rubrique compte dans le quota de hello de 10 000 entités par espace de noms (ne s’applique pas tooPremium couche).</span><span class="sxs-lookup"><span data-stu-id="29540-233">Each partitioned queue or topic counts towards hello quota of 10,000 entities per namespace (does not apply tooPremium tier).</span></span>

## <a name="next-steps"></a><span data-ttu-id="29540-234">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="29540-234">Next steps</span></span>
<span data-ttu-id="29540-235">Consultez la discussion hello de [prise en charge d’AMQP 1.0 pour Service Bus partitionnée files d’attente et rubriques] [ AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn plus d’informations sur le partitionnement des entités de messagerie.</span><span class="sxs-lookup"><span data-stu-id="29540-235">See hello discussion of [AMQP 1.0 support for Service Bus partitioned queues and topics][AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn more about partitioning messaging entities.</span></span> 

[Service Bus architecture]: service-bus-architecture.md
[Azure portal]: https://portal.azure.com
[QueueDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[TopicDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.topicdescription#Microsoft_ServiceBus_Messaging_TopicDescription_EnablePartitioning
[BrokeredMessage.SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[BrokeredMessage.PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[QueueDescription.RequiresDuplicateDetection]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_RequiresDuplicateDetection
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessagingFactorySettings.OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[QueueDescription.ForwardTo]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_ForwardTo
[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md
