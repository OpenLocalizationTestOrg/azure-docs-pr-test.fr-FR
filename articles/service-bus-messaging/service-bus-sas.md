---
title: "l’authentification de Service Bus aaaAzure avec des Signatures d’accès partagé | Documents Microsoft"
description: "Vue d’ensemble de l’authentification de Service Bus à l’aide des signatures d’accès partagé, plus d’informations sur l’authentification SAP avec Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 773bb11720384d7245820b56dc25b8e064ffa746
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="4b7ef-103">Authentification de Service Bus avec les signatures d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="4b7ef-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="4b7ef-104">*Signatures d’accès partagé* (SAP) est hello principal mécanisme de sécurité pour la messagerie Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-104">*Shared Access Signatures* (SAS) are hello primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="4b7ef-105">Cet article traite de SAS, comment ils fonctionnent et comment toouse dans un moyen indépendant de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-105">This article discusses SAS, how they work, and how toouse them in a platform-agnostic way.</span></span>

<span data-ttu-id="4b7ef-106">L’authentification SAP permet des applications tooauthenticate tooService Bus à l’aide d’une clé d’accès configurée sur l’espace de noms hello, ou sur hello messagerie entité (file d’attente ou rubrique) avec les droits spécifiques sont associés.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-106">SAS authentication enables applications tooauthenticate tooService Bus using an access key configured on hello namespace, or on hello messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="4b7ef-107">Vous pouvez ensuite utiliser cette clé toogenerate un jeton SAP que les clients peuvent utiliser ensuite tooauthenticate tooService Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-107">You can then use this key toogenerate a SAS token that clients can in turn use tooauthenticate tooService Bus.</span></span>

<span data-ttu-id="4b7ef-108">L’authentification SAP est inclus dans hello Azure SDK version 2.0 et versions ultérieure.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-108">SAS authentication support is included in hello Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="4b7ef-109">Présentation des signatures d’accès partagé (SAS)</span><span class="sxs-lookup"><span data-stu-id="4b7ef-109">Overview of SAS</span></span>

<span data-ttu-id="4b7ef-110">Les signatures d’accès partagé sont un mécanisme d’authentification basé sur des hachages sécurisés SHA-256 ou des URI.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="4b7ef-111">Les signatures d’accès partagé sont un mécanisme extrêmement puissant qui est utilisé par tous les services Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="4b7ef-112">En fait, les SAP ont deux composants : une *stratégie d’accès partagé* et une *signature d’accès partagé* (souvent appelée *jeton*).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="4b7ef-113">L’authentification SAP dans le Bus de Service implique une configuration de hello d’une clé de chiffrement avec les droits correspondants sur une ressource de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-113">SAS authentication in Service Bus involves hello configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="4b7ef-114">Les clients revendication accès tooService Bus ressources à l’aide d’un jeton SAP.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-114">Clients claim access tooService Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="4b7ef-115">Ce jeton se compose de l’URI en cours d’accès de la ressource hello et un délai d’expiration signé avec hello configuré la clé.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-115">This token consists of hello resource URI being accessed, and an expiry signed with hello configured key.</span></span>

<span data-ttu-id="4b7ef-116">Vous pouvez configurer des règles d’autorisation de signature d’accès partagé sur des [relais](service-bus-fundamentals-hybrid-solutions.md#relays), des [files d’attente](service-bus-fundamentals-hybrid-solutions.md#queues) et des [rubriques](service-bus-fundamentals-hybrid-solutions.md#topics) Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="4b7ef-117">L’authentification SAP utilise hello suivant d’éléments :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-117">SAS authentication uses hello following elements:</span></span>

* <span data-ttu-id="4b7ef-118">[Règle d’autorisation d’accès partagée](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) : clé de chiffrement principale cryptée en Base64 à 256 bits, une clé secondaire facultative et un nom de clé et des droits associés (une collection de droits *écouter*, *envoyer* ou *gérer*).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="4b7ef-119">[Signature d’accès partagé](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) jeton : généré à l’aide de hello HMAC-SHA256 d’une chaîne de ressource, consistant à hello URI de ressource hello qui est accessible et d’expiration, avec la clé de chiffrement hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using hello HMAC-SHA256 of a resource string, consisting of hello URI of hello resource that is accessed and an expiry, with hello cryptographic key.</span></span> <span data-ttu-id="4b7ef-120">signature de Hello et autres éléments décrits dans les sections suivantes de hello sont mis en forme dans un Bonjour de tooform chaîne jeton SAP.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-120">hello signature and other elements described in hello following sections are formatted into a string tooform hello SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="4b7ef-121">Stratégie d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="4b7ef-121">Shared access policy</span></span>

<span data-ttu-id="4b7ef-122">Un toounderstand plus important sur les associations de sécurité est qu’elle démarre avec une stratégie.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-122">An important thing toounderstand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="4b7ef-123">Pour chaque stratégie, vous choisissez trois éléments d’information : le **nom**, l’**étendue** et les **autorisations**.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="4b7ef-124">Hello **nom** est simplement que ; un nom unique dans cette étendue.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-124">hello **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="4b7ef-125">Hello étendue est assez facile : hello son URI de ressource hello en question.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-125">hello scope is easy enough: it's hello URI of hello resource in question.</span></span> <span data-ttu-id="4b7ef-126">Pour un espace de noms Service Bus, hello porte le nom de domaine complet hello (FQDN), tel que `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-126">For a Service Bus namespace, hello scope is hello fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="4b7ef-127">les autorisations disponibles Hello pour une stratégie sont en grande partie explicites :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-127">hello available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="4b7ef-128">Envoyer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-128">Send</span></span>
* <span data-ttu-id="4b7ef-129">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-129">Listen</span></span>
* <span data-ttu-id="4b7ef-130">Gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-130">Manage</span></span>

<span data-ttu-id="4b7ef-131">Après avoir créé la stratégie de hello, il est attribué un *clé primaire* et un *clé secondaire*.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-131">After you create hello policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="4b7ef-132">Il s’agit de clés de chiffrement fortes.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="4b7ef-133">Ne pas perdre les ou les fuites - ils soient toujours disponibles dans hello [portail Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="4b7ef-133">Don't lose them or leak them - they'll always be available in hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="4b7ef-134">Vous pouvez utiliser une des clés de hello généré, et vous pouvez les régénérer à tout moment.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-134">You can use either of hello generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="4b7ef-135">Toutefois, si vous régénérez ou modifiez la clé primaire de hello dans la stratégie de hello, toutes les Signatures d’accès partagé créé à partir de celui-ci sont invalidés.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-135">However, if you regenerate or change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="4b7ef-136">Lorsque vous créez un espace de noms Service Bus, une stratégie est automatiquement créée pour l’espace de noms complet hello appelé **RootManageSharedAccessKey**, et cette stratégie a toutes les autorisations.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-136">When you create a Service Bus namespace, a policy is automatically created for hello entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="4b7ef-137">Étant donné que vous ne vous connectez pas en tant que **racine**, n’utilisez cette stratégie que si vous avez une très bonne raison de le faire.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="4b7ef-138">Vous pouvez créer des stratégies supplémentaires Bonjour **configurer** onglet de l’espace de noms hello dans le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-138">You can create additional policies in hello **Configure** tab for hello namespace in hello portal.</span></span> <span data-ttu-id="4b7ef-139">Il est important toonote qui a un niveau d’arborescence unique dans Service Bus (espace de noms, file d’attente, etc.) peut uniquement avoir des too12 stratégies jointes tooit.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-139">It's important toonote that a single tree level in Service Bus (namespace, queue, etc.) can only have up too12 policies attached tooit.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="4b7ef-140">Configuration de l’authentification de signature d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="4b7ef-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="4b7ef-141">Vous pouvez configurer hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) règle sur les espaces de noms Service Bus, les files d’attente ou rubriques.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-141">You can configure hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="4b7ef-142">Configuration d’un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) sur un Bus de Service d’abonnement est actuellement pas pris en charge, mais vous pouvez utiliser les règles configurées sur une toosubscriptions d’accès toosecure espace de noms ou une rubrique.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic toosecure access toosubscriptions.</span></span> <span data-ttu-id="4b7ef-143">Pour obtenir un exemple fonctionnel qui illustre cette procédure, consultez hello [l’authentification à l’aide de l’accès Signature partagé (SAS) avec les abonnements Service Bus](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) exemple.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-143">For a working sample that illustrates this procedure, see hello [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="4b7ef-144">Un maximum de 12 règles de ce type peut être configuré sur un espace de noms, une file d’attente ou une rubrique Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="4b7ef-145">Les règles qui sont configurés sur un espace de noms Service Bus s’appliquent tooall des entités dans cet espace de noms.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-145">Rules that are configured on a Service Bus namespace apply tooall entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="4b7ef-147">Dans cette figure, hello *manageRuleNS*, *sendRuleNS*, et *listenRuleNS* les règles d’autorisation s’appliquent à la file d’attente de tooboth Q1 et rubrique T1, tandis que *listenRuleQ*  et *sendRuleQ* s’appliquent uniquement tooqueue Q1 et *sendRuleT* s’applique uniquement tootopic T1.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-147">In this figure, hello *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply tooboth queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only tooqueue Q1 and *sendRuleT* applies only tootopic T1.</span></span>

<span data-ttu-id="4b7ef-148">Hello principaux paramètres d’un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-148">hello key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="4b7ef-149">Paramètre</span><span class="sxs-lookup"><span data-stu-id="4b7ef-149">Parameter</span></span> | <span data-ttu-id="4b7ef-150">Description</span><span class="sxs-lookup"><span data-stu-id="4b7ef-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="4b7ef-151">*Nom de clé*</span><span class="sxs-lookup"><span data-stu-id="4b7ef-151">*KeyName*</span></span> |<span data-ttu-id="4b7ef-152">Chaîne qui décrit la règle d’autorisation hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-152">A string that describes hello authorization rule.</span></span> |
| <span data-ttu-id="4b7ef-153">*Clé primaire*</span><span class="sxs-lookup"><span data-stu-id="4b7ef-153">*PrimaryKey*</span></span> |<span data-ttu-id="4b7ef-154">Une codée en base64 256 bits clé primaire pour signer et valider un jeton SAS hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-154">A base64-encoded 256-bit primary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="4b7ef-155">*Clé secondaire*</span><span class="sxs-lookup"><span data-stu-id="4b7ef-155">*SecondaryKey*</span></span> |<span data-ttu-id="4b7ef-156">Une codée en base64 256 bits clé secondaire pour signer et valider un jeton SAS hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-156">A base64-encoded 256-bit secondary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="4b7ef-157">*Droits d’accès*</span><span class="sxs-lookup"><span data-stu-id="4b7ef-157">*AccessRights*</span></span> |<span data-ttu-id="4b7ef-158">Liste des droits d’accès accordées par la règle d’autorisation hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-158">A list of access rights granted by hello authorization rule.</span></span> <span data-ttu-id="4b7ef-159">Ces droits peuvent être n’importe quel ensemble contenant les droits d’écoute, d’envoi et de gestion.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="4b7ef-160">Lorsqu’un espace de noms Service Bus est configuré, un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), avec [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) défini trop**RootManageSharedAccessKey**, est créé par défaut.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set too**RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="4b7ef-161">Création d’une signature d’accès partagé (jeton)</span><span class="sxs-lookup"><span data-stu-id="4b7ef-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="4b7ef-162">stratégie Hello proprement dite n’est pas jeton d’accès hello pour Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-162">hello policy itself is not hello access token for Service Bus.</span></span> <span data-ttu-id="4b7ef-163">Il s’agit d’objet hello à partir de quels hello jeton d’accès est généré - à l’aide de la clé primaire ou secondaire hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-163">It is hello object from which hello access token is generated - using either hello primary or secondary key.</span></span> <span data-ttu-id="4b7ef-164">Tout client qui a toohello d’accès spécifiés dans la règle de l’autorisation d’accès partagé hello des clés de signature peut générer un jeton SAS hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-164">Any client that has access toohello signing keys specified in hello shared access authorization rule can generate hello SAS token.</span></span> <span data-ttu-id="4b7ef-165">jeton de Hello est généré en soigneusement en créant une chaîne Bonjour suivant le format :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-165">hello token is generated by carefully crafting a string in hello following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="4b7ef-166">Où `signature-string` est étendue hello du jeton de hello hachage hello SHA-256 (**étendue** comme décrit dans la section précédente de hello) avec un CRLF ajouté et un délai d’expiration (en secondes depuis l’époque de hello : `00:00:00 UTC` 1er janvier 1970).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-166">Where `signature-string` is hello SHA-256 hash of hello scope of hello token (**scope** as described in hello previous section) with a CRLF appended and an expiry time (in seconds since hello epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="4b7ef-167">tooavoid une heure d’expiration du jeton court, il est recommandé que vous codez une durée d’expiration de hello en tant qu’au moins un entier non signé 32 bits, ou, de préférence un entier long (64 bits).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-167">tooavoid a short token expiry time, it is recommended that you encode hello expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="4b7ef-168">hachage de Hello semble similaire toohello suivant pseudo-code et retourne 32 octets.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-168">hello hash looks similar toohello following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="4b7ef-169">les valeurs non hachées Hello sont Bonjour **SharedAccessSignature** afin que hello destinataire peut calculer hello hachage de chaîne hello avec les mêmes paramètres, toobe sûr qu’il retourne hello même résultat.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-169">hello non-hashed values are in hello **SharedAccessSignature** string so that hello recipient can compute hello hash with hello same parameters, toobe sure that it returns hello same result.</span></span> <span data-ttu-id="4b7ef-170">Hello URI Spécifie l’étendue de hello et nom de la clé hello identifie le hachage hello toocompute hello stratégie toobe utilisé.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-170">hello URI specifies hello scope, and hello key name identifies hello policy toobe used toocompute hello hash.</span></span> <span data-ttu-id="4b7ef-171">Ceci est important du point de vue de la sécurité.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-171">This is important from a security standpoint.</span></span> <span data-ttu-id="4b7ef-172">Si la signature de hello ne correspond pas au destinataire hello (Service Bus) calcule, l’accès est refusé.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-172">If hello signature doesn't match that which hello recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="4b7ef-173">À ce stade, vous pouvez être que cet expéditeur hello avait la clé d’accès toohello et doit disposer des autorisations hello spécifiées dans la stratégie de hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-173">At this point you can be sure that hello sender had access toohello key and should be granted hello rights specified in hello policy.</span></span>

<span data-ttu-id="4b7ef-174">Notez que vous devez utiliser l’URI de ressource hello codée pour cette opération.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-174">Note that you should use hello encoded resource URI for this operation.</span></span> <span data-ttu-id="4b7ef-175">URI de ressource Hello est hello QU'URI complet de hello toowhich accès aux ressources de Service Bus est revendiqué.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-175">hello resource URI is hello full URI of hello Service Bus resource toowhich access is claimed.</span></span> <span data-ttu-id="4b7ef-176">Par exemple, `http://<namespace>.servicebus.windows.net/<entityPath>` ou `sb://<namespace>.servicebus.windows.net/<entityPath>` ; qui est, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="4b7ef-177">règle d’autorisation de Hello accès partagé utilisé pour la signature doit être configuré sur l’entité hello spécifiée par cet URI, ou par un de ses parents hiérarchiques.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-177">hello shared access authorization rule used for signing must be configured on hello entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="4b7ef-178">Par exemple, `http://contoso.servicebus.windows.net/contosoTopics/T1` ou `http://contoso.servicebus.windows.net` dans l’exemple précédent de hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in hello previous example.</span></span>

<span data-ttu-id="4b7ef-179">Un jeton SAP est valable pour toutes les ressources sous hello `<resourceURI>` utilisé Bonjour `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-179">A SAS token is valid for all resources under hello `<resourceURI>` used in hello `signature-string`.</span></span>

<span data-ttu-id="4b7ef-180">Hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) Bonjour SAS jeton fait référence toohello **keyName** Hello règle d’autorisation d’accès partagé utilisé le jeton de hello toogenerate.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-180">hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in hello SAS token refers toohello **keyName** of hello shared access authorization rule used toogenerate hello token.</span></span>

<span data-ttu-id="4b7ef-181">Hello *URL-encoded-resourceURI* doit être identique à celle de l’URI utilisé dans la chaîne de signature hello lors du calcul de hello de signature de hello de hello hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-181">hello *URL-encoded-resourceURI* must be hello same as hello URI used in hello string-to-sign during hello computation of hello signature.</span></span> <span data-ttu-id="4b7ef-182">Elle doit être [encodée en pourcentage](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="4b7ef-183">Il est recommandé de régénérer régulièrement les clés de hello utilisées dans hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objet.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-183">It is recommended that you periodically regenerate hello keys used in hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="4b7ef-184">Les applications doivent utiliser généralement hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate un jeton SAP.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-184">Applications should generally use hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate a SAS token.</span></span> <span data-ttu-id="4b7ef-185">Lors de la régénération des clés de hello, vous devez remplacer hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) avec l’ancien serveur principal de hello de clé et générer une nouvelle clé en tant que clé primaire hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-185">When regenerating hello keys, you should replace hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with hello old primary key, and generate a new key as hello new primary key.</span></span> <span data-ttu-id="4b7ef-186">Cela vous permet de toocontinue à l’aide des jetons d’autorisation qui ont été émis avec une clé primaire de hello ancien, et qui n’ont pas encore expiré.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-186">This enables you toocontinue using tokens for authorization that were issued with hello old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="4b7ef-187">Si une clé est compromise et que vous avez toorevoke hello clés, vous pouvez régénérer les deux hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) et hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) d’un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), en les remplaçant avec de nouvelles clés.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-187">If a key is compromised and you have toorevoke hello keys, you can regenerate both hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="4b7ef-188">Cette procédure annule tous les jetons signés avec les anciennes clés de hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-188">This procedure invalidates all tokens signed with hello old keys.</span></span>

## <a name="how-toouse-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="4b7ef-189">Comment toouse l’authentification de Signature d’accès partagé avec Service Bus</span><span class="sxs-lookup"><span data-stu-id="4b7ef-189">How toouse Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="4b7ef-190">Hello les scénarios suivants inclure la configuration des règles d’autorisation, de la génération de jetons SAP et l’autorisation du client.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-190">hello following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="4b7ef-191">Pour un complet exemple fonctionnel d’une application de Service Bus qui illustre hello configuration et l’autorisation SAP, consultez [l’authentification de Signature d’accès partagé avec Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-191">For a full working sample of a Service Bus application that illustrates hello configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="4b7ef-192">Un exemple qui montre comment utiliser les règles de d’autorisation SAP configurées sur les espaces de noms ou des rubriques d’abonnements de Service Bus toosecure hello est disponible ici : [l’authentification à l’aide de l’accès Signature partagé (SAS) avec les abonnements Service Bus ](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-192">A related sample that illustrates hello use of SAS authorization rules configured on namespaces or topics toosecure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="4b7ef-193">Accès aux règles d’autorisation d’accès partagé sur un espace des noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="4b7ef-194">Opérations sur la racine d’espace de noms hello Bus de Service requièrent l’authentification par certificat.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-194">Operations on hello Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="4b7ef-195">Vous devez charger un certificat de gestion pour votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="4b7ef-196">tooupload un certificat de gestion, suivez les étapes de hello [ici](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), à l’aide de hello [portail Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="4b7ef-196">tooupload a management certificate, follow hello steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="4b7ef-197">Pour plus d’informations sur les certificats de gestion Azure, consultez hello [vue d’ensemble de certificats Azure](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-197">For more information about Azure management certificates, see hello [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="4b7ef-198">point de terminaison Hello pour accéder aux règles de d’autorisation d’accès partagé sur un espace de noms Service Bus est la suivante :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-198">hello endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="4b7ef-199">toocreate un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objet sur un espace de noms Service Bus, exécuter une opération POST sur ce point de terminaison avec les informations de règle hello sérialisées en tant que JSON ou XML.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-199">toocreate a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with hello rule information serialized as JSON or XML.</span></span> <span data-ttu-id="4b7ef-200">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on hello Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access hello management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on hello baseAddress above toocreate an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="4b7ef-201">De même, utilisez une opération GET sur les règles d’autorisation hello point de terminaison tooread hello configuré sur l’espace de noms hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-201">Similarly, use a GET operation on hello endpoint tooread hello authorization rules configured on hello namespace.</span></span>

<span data-ttu-id="4b7ef-202">tooupdate ou supprimer une règle d’autorisation spécifique, utilisez hello après le point de terminaison :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-202">tooupdate or delete a specific authorization rule, use hello following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="4b7ef-203">Accès aux règles d’autorisation d’accès partagé sur une entité</span><span class="sxs-lookup"><span data-stu-id="4b7ef-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="4b7ef-204">Vous pouvez accéder à un [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objet configuré sur une file d’attente du Bus de Service ou une rubrique via hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection Bonjour correspondant [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) ou [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in hello corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="4b7ef-205">Hello suivant de code montre le fonctionnement des règles de l’autorisation de tooadd pour une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-205">hello following code shows how tooadd authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for hello operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it toohello queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create hello queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="4b7ef-206">Utilisation de l’autorisation de la signature d’accès partagé (SAP)</span><span class="sxs-lookup"><span data-stu-id="4b7ef-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="4b7ef-207">Les applications à l’aide de hello Azure .NET SDK avec les bibliothèques .NET Service Bus hello peuvent utiliser une autorisation SAP via hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) classe.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-207">Applications using hello Azure .NET SDK with hello Service Bus .NET libraries can use SAS authorization through hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="4b7ef-208">Hello de code suivant illustre utilisation hello de file d’attente hello fournisseur de jetons toosend messages tooa Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-208">hello following code illustrates hello use of hello token provider toosend messages tooa Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message tooqueue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="4b7ef-209">Les applications peuvent également utiliser des associations de sécurité pour l’authentification en utilisant une chaîne de connexion dans les méthodes qui acceptent des chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="4b7ef-210">Notez que toouse une autorisation SAP avec relais Service Bus, vous pouvez utiliser des clés SAP configurées sur l’espace de noms Service Bus hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-210">Note that toouse SAS authorization with Service Bus relays, you can use SAS keys configured on hello Service Bus namespace.</span></span> <span data-ttu-id="4b7ef-211">Si vous créez explicitement un relais sur l’espace de noms hello ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) avec un [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) de l’objet, vous pouvez définir des règles de SAP hello pour ce relais.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-211">If you explicitly create a relay on hello namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set hello SAS rules just for that relay.</span></span> <span data-ttu-id="4b7ef-212">toouse une autorisation SAP avec les abonnements Service Bus, vous pouvez utiliser des clés SAP configurées sur un espace de noms Service Bus ou sur une rubrique.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-212">toouse SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-hello-shared-access-signature-at-http-level"></a><span data-ttu-id="4b7ef-213">Utilisez hello Signature d’accès partagé (au niveau HTTP)</span><span class="sxs-lookup"><span data-stu-id="4b7ef-213">Use hello Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="4b7ef-214">Maintenant que vous savez comment toocreate Signatures d’accès partagé pour toutes les entités de Service Bus, vous êtes prêt à tooperform une requête HTTP POST :</span><span class="sxs-lookup"><span data-stu-id="4b7ef-214">Now that you know how toocreate Shared Access Signatures for any entities in Service Bus, you are ready tooperform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="4b7ef-215">N’oubliez pas que cela fonctionne pour tout.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-215">Remember, this works for everything.</span></span> <span data-ttu-id="4b7ef-216">Vous pouvez créer une signature d’accès partagé pour une file d’attente, une rubrique ou un abonnement.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="4b7ef-217">Si vous donnez à un expéditeur ou un client un jeton SAP, ils n’ont pas la clé de hello directement, et ils ne peuvent pas inverser hello hachage tooobtain il.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-217">If you give a sender or client a SAS token, they don't have hello key directly, and they cannot reverse hello hash tooobtain it.</span></span> <span data-ttu-id="4b7ef-218">Ainsi, vous contrôlez le contenu auquel il peut accéder et pour quelle durée.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="4b7ef-219">Un tooremember point essentiel est que si vous modifiez la clé primaire de hello dans la stratégie de hello, toutes les Signatures d’accès partagé créé à partir de celui-ci sera invalidés.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-219">An important thing tooremember is that if you change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-hello-shared-access-signature-at-amqp-level"></a><span data-ttu-id="4b7ef-220">Utilisez hello Signature d’accès partagé (au niveau AMQP)</span><span class="sxs-lookup"><span data-stu-id="4b7ef-220">Use hello Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="4b7ef-221">Dans la section précédente de hello, vous avez vu comment toouse hello jeton SAS avec une requête HTTP POST pour envoyer des données toohello Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-221">In hello previous section, you saw how toouse hello SAS token with an HTTP POST request for sending data toohello Service Bus.</span></span> <span data-ttu-id="4b7ef-222">Comme vous le savez, vous pouvez accéder à des Bus de Service à l’aide de hello avancé protocole AMQP (Message Queuing) qui est toouse de protocole hello préféré pour des raisons de performances, dans de nombreux scénarios.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-222">As you know, you can access Service Bus using hello Advanced Message Queuing Protocol (AMQP) that is hello preferred protocol toouse for performance reasons, in many scenarios.</span></span> <span data-ttu-id="4b7ef-223">Hello d’utilisation de jeton SAS avec AMQP est décrite dans le document de hello [AMQP Claim-Based sécurité Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) qui est en brouillon de travail depuis 2013, mais il est bien pris en charge par Azure aujourd'hui.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-223">hello SAS token usage with AMQP is described in hello document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="4b7ef-224">Avant de commencer toosend données tooService Bus, serveur de publication hello doit envoyer un jeton SAS hello à l’intérieur d’un AMQP message tooa bien défini AMQP nœud nommé **$cbs** (vous pouvez voir « spécial » file d’attente utilisée par hello service tooacquire et valider l’ensemble jetons SAP Hello).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-224">Before starting toosend data tooService Bus, hello publisher must send hello SAS token inside an AMQP message tooa well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by hello service tooacquire and validate all hello SAS tokens).</span></span> <span data-ttu-id="4b7ef-225">serveur de publication Hello doit spécifier hello **ReplyTo** champ à l’intérieur du message AMQP hello ; il s’agit de nœud hello dans le hello service répond toohello le serveur de publication avec un résultat de validation du jeton (un modèle de demande/réponse simple entre hello hello serveur de publication et de service).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-225">hello publisher must specify hello **ReplyTo** field inside hello AMQP message; this is hello node in which hello service replies toohello publisher with hello result of hello token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="4b7ef-226">Création de ce nœud de la réponse « volée hello, « parler de « création dynamique de nœud distant » comme décrit dans la spécification de hello AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-226">This reply node is created "on hello fly," speaking about "dynamic creation of remote node" as described by hello AMQP 1.0 specification.</span></span> <span data-ttu-id="4b7ef-227">Après avoir vérifié le que jeton SAS hello est valid, serveur de publication hello peut avancer et démarrer le service de toohello toosend données.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-227">After checking that hello SAS token is valid, hello publisher can go forward and start toosend data toohello service.</span></span>

<span data-ttu-id="4b7ef-228">Hello étapes suivantes montrent comment toosend hello jeton SAS avec le protocole AMQP à l’aide de hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-228">hello following steps show how toosend hello SAS token with AMQP protocol using hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="4b7ef-229">Cela est utile si vous ne pouvez pas utiliser officielle de hello SDK du Bus de Service (par exemple sur WinRT, .net Compact Framework, le .net Framework de Micro et Mono) développement en C\#.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-229">This is useful if you can't use hello official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="4b7ef-230">Bien entendu, cette bibliothèque est utile toohelp comprendre la sécurité basée sur les revendications fonctionne au niveau AMQP de hello, comme vous l’avez vu comment il fonctionne au niveau de hello HTTP (avec un HTTP POST demande et hello SAS jeton hello envoyé à l’intérieur d’en-tête « Authorization »).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-230">Of course, this library is useful toohelp understand how claims-based security works at hello AMQP level, as you saw how it works at hello HTTP level (with an HTTP POST request and hello SAS token sent inside hello "Authorization" header).</span></span> <span data-ttu-id="4b7ef-231">Si vous n’avez pas besoin ces connaissances approfondies sur AMQP, vous pouvez utiliser officielle de hello SDK du Bus de Service avec .net applications Framework, qui fera pour vous.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-231">If you don't need such deep knowledge about AMQP, you can use hello official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="4b7ef-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="4b7ef-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) toosend</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct hello put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive hello response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // hello sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="4b7ef-233">Hello `PutCbsToken()` méthode reçoit hello *connexion* (instance de la classe connexion AMQP tel que fourni par hello [bibliothèque AMQP .NET Lite](https://github.com/Azure/amqpnetlite)) qui représente le service de toohello de connexion TCP hello et hello *sasToken* paramètre toosend de jeton SAS hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-233">hello `PutCbsToken()` method receives hello *connection* (AMQP connection class instance as provided by hello [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents hello TCP connection toohello service and hello *sasToken* parameter that is hello SAS token toosend.</span></span> 

> [!NOTE]
> <span data-ttu-id="4b7ef-234">Il est important que la connexion de hello est créée avec **le mécanisme d’authentification SASL définie tooEXTERNAL** (et pas hello brut par défaut avec le nom d’utilisateur et mot de passe utilisé lorsque vous n’avez pas besoin d’un jeton SAS toosend hello).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-234">It's important that hello connection is created with **SASL authentication mechanism set tooEXTERNAL** (and not hello default PLAIN with username and password used when you don't need toosend hello SAS token).</span></span>
> 
> 

<span data-ttu-id="4b7ef-235">Ensuite, le serveur de publication hello crée deux liens AMQP pour envoyer un jeton SAS hello et la réception de réponse de hello (résultats de validation du jeton hello) à partir du service de hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-235">Next, hello publisher creates two AMQP links for sending hello SAS token and receiving hello reply (hello token validation result) from hello service.</span></span>

<span data-ttu-id="4b7ef-236">message de type Hello AMQP contient un ensemble de propriétés et plus d’informations qu’un message simple.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-236">hello AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="4b7ef-237">un jeton SAS Hello est corps hello de message de type hello (à l’aide de son constructeur).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-237">hello SAS token is hello body of hello message (using its constructor).</span></span> <span data-ttu-id="4b7ef-238">Hello **« ReplyTo »** propriété a la valeur nom du nœud toohello pour la réception du résultat de la validation hello sur lien du récepteur hello (vous pouvez modifier son nom si vous voulez, et elle est créée dynamiquement par le service de hello).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-238">hello **"ReplyTo"** property is set toohello node name for receiving hello validation result on hello receiver link (you can change its name if you want, and it will be created dynamically by hello service).</span></span> <span data-ttu-id="4b7ef-239">trois propriétés d’application/custom Hello sont utilisées par hello service tooindicate quel type d’opération, il a tooexecute.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-239">hello last three application/custom properties are used by hello service tooindicate what kind of operation it has tooexecute.</span></span> <span data-ttu-id="4b7ef-240">Comme décrit par hello spécification préliminaire CBS, ils doivent être hello **nom de l’opération** (« put-jeton »), hello **type de jeton** (dans ce cas, un « servicebus.windows.net:sastoken ») et hello **» nom » de l’audience de hello** jeton de hello toowhich s’applique (entité toute entière de hello).</span><span class="sxs-lookup"><span data-stu-id="4b7ef-240">As described by hello CBS draft specification, they must be hello **operation name** ("put-token"), hello **type of token** (in this case, a "servicebus.windows.net:sastoken"), and hello **"name" of hello audience** toowhich hello token applies (hello entire entity).</span></span>

<span data-ttu-id="4b7ef-241">Après l’envoi d’un jeton SAS hello sur le lien de l’expéditeur hello, serveur de publication hello doit lire réponse hello sur lien du récepteur hello.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-241">After sending hello SAS token on hello sender link, hello publisher must read hello reply on hello receiver link.</span></span> <span data-ttu-id="4b7ef-242">réponse de Hello est un simple message AMQP avec une propriété d’application nommé **« code d’état »** qui peut contenir hello même valeurs sous la forme d’un code d’état HTTP.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-242">hello reply is a simple AMQP message with an application property named **"status-code"** that can contain hello same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="4b7ef-243">Droits requis pour les opérations Service Bus</span><span class="sxs-lookup"><span data-stu-id="4b7ef-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="4b7ef-244">Hello tableau suivant montre les droits d’accès hello requis pour effectuer diverses opérations sur les ressources Service Bus.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-244">hello following table shows hello access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="4b7ef-245">Opération</span><span class="sxs-lookup"><span data-stu-id="4b7ef-245">Operation</span></span> | <span data-ttu-id="4b7ef-246">Revendication obligatoire</span><span class="sxs-lookup"><span data-stu-id="4b7ef-246">Claim Required</span></span> | <span data-ttu-id="4b7ef-247">Étendue de la revendication</span><span class="sxs-lookup"><span data-stu-id="4b7ef-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4b7ef-248">**Espace de noms**</span><span class="sxs-lookup"><span data-stu-id="4b7ef-248">**Namespace**</span></span> | | |
| <span data-ttu-id="4b7ef-249">Configure une règle d’autorisation dans un espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="4b7ef-250">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-250">Manage</span></span> |<span data-ttu-id="4b7ef-251">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-251">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-252">**Registre de service**</span><span class="sxs-lookup"><span data-stu-id="4b7ef-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="4b7ef-253">Énumération des stratégies privées</span><span class="sxs-lookup"><span data-stu-id="4b7ef-253">Enumerate Private Policies</span></span> |<span data-ttu-id="4b7ef-254">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-254">Manage</span></span> |<span data-ttu-id="4b7ef-255">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-255">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-256">Commencer à écouter sur un espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-256">Begin listening on a namespace</span></span> |<span data-ttu-id="4b7ef-257">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-257">Listen</span></span> |<span data-ttu-id="4b7ef-258">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-258">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-259">Écouteur de tooa de messages d’envoi à un espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-259">Send messages tooa listener at a namespace</span></span> |<span data-ttu-id="4b7ef-260">Envoyer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-260">Send</span></span> |<span data-ttu-id="4b7ef-261">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-261">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-262">**File d'attente**</span><span class="sxs-lookup"><span data-stu-id="4b7ef-262">**Queue**</span></span> | | |
| <span data-ttu-id="4b7ef-263">Création d’une file d’attente</span><span class="sxs-lookup"><span data-stu-id="4b7ef-263">Create a queue</span></span> |<span data-ttu-id="4b7ef-264">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-264">Manage</span></span> |<span data-ttu-id="4b7ef-265">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-265">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-266">Suppression d'une file d'attente</span><span class="sxs-lookup"><span data-stu-id="4b7ef-266">Delete a queue</span></span> |<span data-ttu-id="4b7ef-267">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-267">Manage</span></span> |<span data-ttu-id="4b7ef-268">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-268">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-269">Énumérer les files d’attente</span><span class="sxs-lookup"><span data-stu-id="4b7ef-269">Enumerate queues</span></span> |<span data-ttu-id="4b7ef-270">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-270">Manage</span></span> |<span data-ttu-id="4b7ef-271">/$Resources/Queues</span><span class="sxs-lookup"><span data-stu-id="4b7ef-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="4b7ef-272">Obtenir la description de file d’attente hello</span><span class="sxs-lookup"><span data-stu-id="4b7ef-272">Get hello queue description</span></span> |<span data-ttu-id="4b7ef-273">Gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-273">Manage</span></span> |<span data-ttu-id="4b7ef-274">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-274">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-275">Configure une règle d’autorisation pour une file d’attente</span><span class="sxs-lookup"><span data-stu-id="4b7ef-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="4b7ef-276">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-276">Manage</span></span> |<span data-ttu-id="4b7ef-277">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-277">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-278">Envoyer en file d’attente toohello</span><span class="sxs-lookup"><span data-stu-id="4b7ef-278">Send into toohello queue</span></span> |<span data-ttu-id="4b7ef-279">Envoyer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-279">Send</span></span> |<span data-ttu-id="4b7ef-280">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-280">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-281">Réception des messages d'une file d'attente</span><span class="sxs-lookup"><span data-stu-id="4b7ef-281">Receive messages from a queue</span></span> |<span data-ttu-id="4b7ef-282">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-282">Listen</span></span> |<span data-ttu-id="4b7ef-283">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-283">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-284">Abandonner ou terminer les messages après avoir reçu le message de type hello en mode de verrou de lecture</span><span class="sxs-lookup"><span data-stu-id="4b7ef-284">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="4b7ef-285">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-285">Listen</span></span> |<span data-ttu-id="4b7ef-286">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-286">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-287">Différer un message pour une récupération ultérieure</span><span class="sxs-lookup"><span data-stu-id="4b7ef-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="4b7ef-288">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-288">Listen</span></span> |<span data-ttu-id="4b7ef-289">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-289">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-290">Mettre un message au rebut</span><span class="sxs-lookup"><span data-stu-id="4b7ef-290">Deadletter a message</span></span> |<span data-ttu-id="4b7ef-291">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-291">Listen</span></span> |<span data-ttu-id="4b7ef-292">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-292">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-293">Obtenir l’état hello associé à une session de file d’attente de messages</span><span class="sxs-lookup"><span data-stu-id="4b7ef-293">Get hello state associated with a message queue session</span></span> |<span data-ttu-id="4b7ef-294">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-294">Listen</span></span> |<span data-ttu-id="4b7ef-295">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-295">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-296">Définir l’état hello associé à une session de file d’attente de messages</span><span class="sxs-lookup"><span data-stu-id="4b7ef-296">Set hello state associated with a message queue session</span></span> |<span data-ttu-id="4b7ef-297">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-297">Listen</span></span> |<span data-ttu-id="4b7ef-298">N’importe quelle adresse de file d’attente valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-298">Any valid queue address</span></span> |
| <span data-ttu-id="4b7ef-299">**Rubrique**</span><span class="sxs-lookup"><span data-stu-id="4b7ef-299">**Topic**</span></span> | | |
| <span data-ttu-id="4b7ef-300">Création d'une rubrique</span><span class="sxs-lookup"><span data-stu-id="4b7ef-300">Create a topic</span></span> |<span data-ttu-id="4b7ef-301">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-301">Manage</span></span> |<span data-ttu-id="4b7ef-302">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-302">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-303">Supprimer une rubrique</span><span class="sxs-lookup"><span data-stu-id="4b7ef-303">Delete a topic</span></span> |<span data-ttu-id="4b7ef-304">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-304">Manage</span></span> |<span data-ttu-id="4b7ef-305">N’importe quelle adresse de rubrique valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-305">Any valid topic address</span></span> |
| <span data-ttu-id="4b7ef-306">Énumérer les rubriques</span><span class="sxs-lookup"><span data-stu-id="4b7ef-306">Enumerate topics</span></span> |<span data-ttu-id="4b7ef-307">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-307">Manage</span></span> |<span data-ttu-id="4b7ef-308">/$Resources/Topics</span><span class="sxs-lookup"><span data-stu-id="4b7ef-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="4b7ef-309">Obtenir la description de la rubrique hello</span><span class="sxs-lookup"><span data-stu-id="4b7ef-309">Get hello topic description</span></span> |<span data-ttu-id="4b7ef-310">Gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-310">Manage</span></span> |<span data-ttu-id="4b7ef-311">N’importe quelle adresse de rubrique valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-311">Any valid topic address</span></span> |
| <span data-ttu-id="4b7ef-312">Configure une règle d’autorisation pour une rubrique</span><span class="sxs-lookup"><span data-stu-id="4b7ef-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="4b7ef-313">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-313">Manage</span></span> |<span data-ttu-id="4b7ef-314">N’importe quelle adresse de rubrique valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-314">Any valid topic address</span></span> |
| <span data-ttu-id="4b7ef-315">Envoyer toohello rubrique</span><span class="sxs-lookup"><span data-stu-id="4b7ef-315">Send toohello topic</span></span> |<span data-ttu-id="4b7ef-316">Envoyer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-316">Send</span></span> |<span data-ttu-id="4b7ef-317">N’importe quelle adresse de rubrique valide</span><span class="sxs-lookup"><span data-stu-id="4b7ef-317">Any valid topic address</span></span> |
| <span data-ttu-id="4b7ef-318">**Abonnement**</span><span class="sxs-lookup"><span data-stu-id="4b7ef-318">**Subscription**</span></span> | | |
| <span data-ttu-id="4b7ef-319">Création d'un abonnement</span><span class="sxs-lookup"><span data-stu-id="4b7ef-319">Create a subscription</span></span> |<span data-ttu-id="4b7ef-320">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-320">Manage</span></span> |<span data-ttu-id="4b7ef-321">N’importe quelle adresse d’espace de noms</span><span class="sxs-lookup"><span data-stu-id="4b7ef-321">Any namespace address</span></span> |
| <span data-ttu-id="4b7ef-322">Supprimer l’abonnement</span><span class="sxs-lookup"><span data-stu-id="4b7ef-322">Delete subscription</span></span> |<span data-ttu-id="4b7ef-323">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-323">Manage</span></span> |<span data-ttu-id="4b7ef-324">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-325">Énumérer les abonnements</span><span class="sxs-lookup"><span data-stu-id="4b7ef-325">Enumerate subscriptions</span></span> |<span data-ttu-id="4b7ef-326">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-326">Manage</span></span> |<span data-ttu-id="4b7ef-327">../myTopic/Subscriptions</span><span class="sxs-lookup"><span data-stu-id="4b7ef-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="4b7ef-328">Obtenir la description de l’abonnement</span><span class="sxs-lookup"><span data-stu-id="4b7ef-328">Get subscription description</span></span> |<span data-ttu-id="4b7ef-329">Gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-329">Manage</span></span> |<span data-ttu-id="4b7ef-330">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-331">Abandonner ou terminer les messages après avoir reçu le message de type hello en mode de verrou de lecture</span><span class="sxs-lookup"><span data-stu-id="4b7ef-331">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="4b7ef-332">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-332">Listen</span></span> |<span data-ttu-id="4b7ef-333">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-334">Différer un message pour une récupération ultérieure</span><span class="sxs-lookup"><span data-stu-id="4b7ef-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="4b7ef-335">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-335">Listen</span></span> |<span data-ttu-id="4b7ef-336">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-337">Mettre un message au rebut</span><span class="sxs-lookup"><span data-stu-id="4b7ef-337">Deadletter a message</span></span> |<span data-ttu-id="4b7ef-338">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-338">Listen</span></span> |<span data-ttu-id="4b7ef-339">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-340">Obtenir l’état hello associé à une session de rubrique</span><span class="sxs-lookup"><span data-stu-id="4b7ef-340">Get hello state associated with a topic session</span></span> |<span data-ttu-id="4b7ef-341">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-341">Listen</span></span> |<span data-ttu-id="4b7ef-342">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-343">Définir l’état hello associé à une session de rubrique</span><span class="sxs-lookup"><span data-stu-id="4b7ef-343">Set hello state associated with a topic session</span></span> |<span data-ttu-id="4b7ef-344">Écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-344">Listen</span></span> |<span data-ttu-id="4b7ef-345">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-346">**Règles**</span><span class="sxs-lookup"><span data-stu-id="4b7ef-346">**Rules**</span></span> | | |
| <span data-ttu-id="4b7ef-347">Créer une règle</span><span class="sxs-lookup"><span data-stu-id="4b7ef-347">Create a rule</span></span> |<span data-ttu-id="4b7ef-348">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-348">Manage</span></span> |<span data-ttu-id="4b7ef-349">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-350">Supprimer une règle</span><span class="sxs-lookup"><span data-stu-id="4b7ef-350">Delete a rule</span></span> |<span data-ttu-id="4b7ef-351">gérer</span><span class="sxs-lookup"><span data-stu-id="4b7ef-351">Manage</span></span> |<span data-ttu-id="4b7ef-352">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="4b7ef-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="4b7ef-353">Énumérer des règles</span><span class="sxs-lookup"><span data-stu-id="4b7ef-353">Enumerate rules</span></span> |<span data-ttu-id="4b7ef-354">Gérer ou écouter</span><span class="sxs-lookup"><span data-stu-id="4b7ef-354">Manage or Listen</span></span> |<span data-ttu-id="4b7ef-355">.. /myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="4b7ef-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="4b7ef-356">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="4b7ef-356">Next steps</span></span>

<span data-ttu-id="4b7ef-357">toolearn en savoir plus sur le Bus des services de messagerie, consultez hello rubriques suivantes.</span><span class="sxs-lookup"><span data-stu-id="4b7ef-357">toolearn more about Service Bus messaging, see hello following topics.</span></span>

* [<span data-ttu-id="4b7ef-358">Concepts de base de Service Bus</span><span class="sxs-lookup"><span data-stu-id="4b7ef-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="4b7ef-359">Files d’attente, rubriques et abonnements Service Bus</span><span class="sxs-lookup"><span data-stu-id="4b7ef-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="4b7ef-360">Comment les files d’attente de toouse Service Bus</span><span class="sxs-lookup"><span data-stu-id="4b7ef-360">How toouse Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="4b7ef-361">Comment toouse Service Bus rubriques et abonnements</span><span class="sxs-lookup"><span data-stu-id="4b7ef-361">How toouse Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com