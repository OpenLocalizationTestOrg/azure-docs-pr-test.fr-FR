---
title: "aaaAzure Service Bus associé d’espaces de noms | Documents Microsoft"
description: "Détails sur l'implémentation de l'espace de noms associé et coût"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2440c8d3-ed2e-47e0-93cf-ab7fbb855d2e
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: 4c44b2b95d2228e1ad8075b52634d88a1593d3b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="paired-namespace-implementation-details-and-cost-implications"></a><span data-ttu-id="59b86-103">Détails sur l'implémentation de l'espace de noms associé et implications en termes de coût</span><span class="sxs-lookup"><span data-stu-id="59b86-103">Paired namespace implementation details and cost implications</span></span>
<span data-ttu-id="59b86-104">Hello [PairNamespaceAsync] [ PairNamespaceAsync] (méthode), à l’aide un [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] d’une instance, effectue des tâches visibles à votre place.</span><span class="sxs-lookup"><span data-stu-id="59b86-104">hello [PairNamespaceAsync][PairNamespaceAsync] method, using a [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] instance, performs visible tasks on your behalf.</span></span> <span data-ttu-id="59b86-105">Coût lorsque vous utilisez la fonctionnalité de hello, il est utile toounderstand ces tâches afin que vous attendez le comportement de hello lorsque cela se produit.</span><span class="sxs-lookup"><span data-stu-id="59b86-105">Because there are cost considerations when using hello feature, it is useful toounderstand those tasks so that you expect hello behavior when it happens.</span></span> <span data-ttu-id="59b86-106">Hello API engage hello suivant comportement automatique à votre place :</span><span class="sxs-lookup"><span data-stu-id="59b86-106">hello API engages hello following automatic behavior on your behalf:</span></span>

* <span data-ttu-id="59b86-107">Création de files d'attente de travaux en souffrance.</span><span class="sxs-lookup"><span data-stu-id="59b86-107">Creation of backlog queues.</span></span>
* <span data-ttu-id="59b86-108">La création d’un [MessageSender] [ MessageSender] objet qui communique avec tooqueues ou aux rubriques.</span><span class="sxs-lookup"><span data-stu-id="59b86-108">Creation of a [MessageSender][MessageSender] object that talks tooqueues or topics.</span></span>
* <span data-ttu-id="59b86-109">Lorsqu’une entité de messagerie devient indisponible, envoie messages ping toohello entité dans un toodetect tentative lorsque cette entité est à nouveau disponible.</span><span class="sxs-lookup"><span data-stu-id="59b86-109">When a messaging entity becomes unavailable, sends ping messages toohello entity in an attempt toodetect when that entity becomes available again.</span></span>
* <span data-ttu-id="59b86-110">Création éventuelle d’un ensemble de « pompes de messages » que déplacer les messages à partir de hello files d’attente du backlog files d’attente toohello principal.</span><span class="sxs-lookup"><span data-stu-id="59b86-110">Optionally creates of a set of “message pumps” that move messages from hello backlog queues toohello primary queues.</span></span>
* <span data-ttu-id="59b86-111">Coordonne la clôture/défaillance de hello principaux et secondaire [MessagingFactory] [ MessagingFactory] instances.</span><span class="sxs-lookup"><span data-stu-id="59b86-111">Coordinates closing/faulting of hello primary and secondary [MessagingFactory][MessagingFactory] instances.</span></span>

<span data-ttu-id="59b86-112">À un niveau élevé, la fonctionnalité de hello fonctionne comme suit : lors de l’entité principale de hello est intègre, aucun changement de comportement se produit.</span><span class="sxs-lookup"><span data-stu-id="59b86-112">At a high level, hello feature works as follows: when hello primary entity is healthy, no behavior changes occur.</span></span> <span data-ttu-id="59b86-113">Hello lorsque [FailoverInterval] [ FailoverInterval] durée écoulée, et entité principale de hello ne voit aucun envoi réussi après non temporaire [MessagingException] [ MessagingException] ou un [TimeoutException][TimeoutException], hello suivant comportement se produit :</span><span class="sxs-lookup"><span data-stu-id="59b86-113">When hello [FailoverInterval][FailoverInterval] duration elapses, and hello primary entity sees no successful sends after a non-transient [MessagingException][MessagingException] or a [TimeoutException][TimeoutException], hello following behavior occurs:</span></span>

1. <span data-ttu-id="59b86-114">Envoyer des opérations toohello principal entité sont désactivées et les tests ping système hello hello entité principale jusqu'à ce que les commandes ping aboutissent correctement.</span><span class="sxs-lookup"><span data-stu-id="59b86-114">Send operations toohello primary entity are disabled and hello system pings hello primary entity until pings can be successfully delivered.</span></span>
2. <span data-ttu-id="59b86-115">Une file d'attente de travaux en souffrance aléatoire est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="59b86-115">A random backlog queue is selected.</span></span>
3. <span data-ttu-id="59b86-116">[BrokeredMessage] [ BrokeredMessage] objets sont routé toohello choisi de file d’attente.</span><span class="sxs-lookup"><span data-stu-id="59b86-116">[BrokeredMessage][BrokeredMessage] objects are routed toohello chosen backlog queue.</span></span>
4. <span data-ttu-id="59b86-117">Si un toohello d’opération envoi choisi de file d’attente échoue, cette file d’attente est extraite de la rotation de hello et une file d’attente est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="59b86-117">If a send operation toohello chosen backlog queue fails, that queue is pulled from hello rotation and a new queue is selected.</span></span> <span data-ttu-id="59b86-118">Tous les expéditeurs sur hello [MessagingFactory] [ MessagingFactory] instance apprendre de défaillance de hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-118">All senders on hello [MessagingFactory][MessagingFactory] instance learn of hello failure.</span></span>

<span data-ttu-id="59b86-119">Hello suivant chiffres représentent séquence de hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-119">hello following figures depict hello sequence.</span></span> <span data-ttu-id="59b86-120">Tout d’abord, l’expéditeur de hello envoie des messages.</span><span class="sxs-lookup"><span data-stu-id="59b86-120">First, hello sender sends messages.</span></span>

![Espaces de noms associés][0]

<span data-ttu-id="59b86-122">Sur la file d’attente de la fonctionnalité principale de toohello d’échec toosend, l’expéditeur de hello commence à envoyer des tooa messages sélectionné aléatoire de file d’attente.</span><span class="sxs-lookup"><span data-stu-id="59b86-122">Upon failure toosend toohello primary queue, hello sender begins sending messages tooa randomly chosen backlog queue.</span></span> <span data-ttu-id="59b86-123">Simultanément, il démarre une tâche ping.</span><span class="sxs-lookup"><span data-stu-id="59b86-123">Simultaneously, it starts a ping task.</span></span>

![Espaces de noms associés][1]

<span data-ttu-id="59b86-125">À ce stade, les messages hello sont toujours dans la file d’attente secondaire de hello et toohello la file d’attente principale n’ont pas été remis.</span><span class="sxs-lookup"><span data-stu-id="59b86-125">At this point hello messages are still in hello secondary queue and have not been delivered toohello primary queue.</span></span> <span data-ttu-id="59b86-126">Une fois que la file d’attente principale de hello est à nouveau intègre, au moins un processus doit être exécuté SIPHON de hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-126">Once hello primary queue is healthy again, at least one process should be running hello syphon.</span></span> <span data-ttu-id="59b86-127">SIPHON de Hello remet les messages de hello de hello toutes les différentes backlog entités de destination appropriées de files d’attente toohello (files d’attente et rubriques).</span><span class="sxs-lookup"><span data-stu-id="59b86-127">hello syphon delivers hello messages from all hello various backlog queues toohello proper destination entities (queues and topics).</span></span>

![Espaces de noms associés][2]

<span data-ttu-id="59b86-129">Hello reste de cette rubrique présente des détails spécifiques hello du fonctionnement de ces éléments.</span><span class="sxs-lookup"><span data-stu-id="59b86-129">hello remainder of this topic discusses hello specific details of how these pieces work.</span></span>

## <a name="creation-of-backlog-queues"></a><span data-ttu-id="59b86-130">Création de files d'attente de travaux en souffrance</span><span class="sxs-lookup"><span data-stu-id="59b86-130">Creation of backlog queues</span></span>
<span data-ttu-id="59b86-131">Hello [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] objet passé toohello [PairNamespaceAsync] [ PairNamespaceAsync] méthode indique hello nombre de file d’attente des files d’attente vous souhaitez toouse.</span><span class="sxs-lookup"><span data-stu-id="59b86-131">hello [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] object passed toohello [PairNamespaceAsync][PairNamespaceAsync] method indicates hello number of backlog queues you want toouse.</span></span> <span data-ttu-id="59b86-132">Chaque file d’attente est alors créée avec hello propriétés suivantes explicitement défini (toutes les autres valeurs sont définies toohello [QueueDescription] [ QueueDescription] par défaut) :</span><span class="sxs-lookup"><span data-stu-id="59b86-132">Each backlog queue is then created with hello following properties explicitly set (all other values are set toohello [QueueDescription][QueueDescription] defaults):</span></span>

| <span data-ttu-id="59b86-133">Chemin</span><span class="sxs-lookup"><span data-stu-id="59b86-133">Path</span></span> | <span data-ttu-id="59b86-134">[primary namespace]/x-servicebus-transfer/[index] où [index] est une valeur dans [0, BacklogQueueCount)</span><span class="sxs-lookup"><span data-stu-id="59b86-134">[primary namespace]/x-servicebus-transfer/[index] where [index] is a value in [0, BacklogQueueCount)</span></span> |
| --- | --- |
| <span data-ttu-id="59b86-135">MaxSizeInMegabytes</span><span class="sxs-lookup"><span data-stu-id="59b86-135">MaxSizeInMegabytes</span></span> |<span data-ttu-id="59b86-136">5120</span><span class="sxs-lookup"><span data-stu-id="59b86-136">5120</span></span> |
| <span data-ttu-id="59b86-137">MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="59b86-137">MaxDeliveryCount</span></span> |<span data-ttu-id="59b86-138">int.MaxValue</span><span class="sxs-lookup"><span data-stu-id="59b86-138">int.MaxValue</span></span> |
| <span data-ttu-id="59b86-139">DefaultMessageTimeToLive</span><span class="sxs-lookup"><span data-stu-id="59b86-139">DefaultMessageTimeToLive</span></span> |<span data-ttu-id="59b86-140">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="59b86-140">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="59b86-141">AutoDeleteOnIdle</span><span class="sxs-lookup"><span data-stu-id="59b86-141">AutoDeleteOnIdle</span></span> |<span data-ttu-id="59b86-142">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="59b86-142">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="59b86-143">LockDuration</span><span class="sxs-lookup"><span data-stu-id="59b86-143">LockDuration</span></span> |<span data-ttu-id="59b86-144">1 minute</span><span class="sxs-lookup"><span data-stu-id="59b86-144">1 minute</span></span> |
| <span data-ttu-id="59b86-145">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="59b86-145">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="59b86-146">true</span><span class="sxs-lookup"><span data-stu-id="59b86-146">true</span></span> |
| <span data-ttu-id="59b86-147">EnableBatchedOperations</span><span class="sxs-lookup"><span data-stu-id="59b86-147">EnableBatchedOperations</span></span> |<span data-ttu-id="59b86-148">true</span><span class="sxs-lookup"><span data-stu-id="59b86-148">true</span></span> |

<span data-ttu-id="59b86-149">Par exemple, hello première file d’attente créée pour l’espace de noms **contoso** est nommé `contoso/x-servicebus-transfer/0`.</span><span class="sxs-lookup"><span data-stu-id="59b86-149">For example, hello first backlog queue created for namespace **contoso** is named `contoso/x-servicebus-transfer/0`.</span></span>

<span data-ttu-id="59b86-150">Lors de la création des files d’attente hello, code de hello vérifie d’abord toosee si une file d’attente existe.</span><span class="sxs-lookup"><span data-stu-id="59b86-150">When creating hello queues, hello code first checks toosee if such a queue exists.</span></span> <span data-ttu-id="59b86-151">Si la file d’attente hello n’existe pas, la file d’attente hello est créé.</span><span class="sxs-lookup"><span data-stu-id="59b86-151">If hello queue does not exist, then hello queue is created.</span></span> <span data-ttu-id="59b86-152">n’est pas le cas du code de Hello nettoyer les files d’attente de la file d’attente « supplémentaire ».</span><span class="sxs-lookup"><span data-stu-id="59b86-152">hello code does not clean up "extra" backlog queues.</span></span> <span data-ttu-id="59b86-153">Plus précisément, si hello application hello espace de noms principal **contoso** demande cinq files d’attente du backlog, mais une file d’attente du backlog avec le chemin d’accès hello `contoso/x-servicebus-transfer/7` existe, cette file d’attente excédentaire reste présente, mais n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="59b86-153">Specifically, if hello application with hello primary namespace **contoso** requests five backlog queues but a backlog queue with hello path `contoso/x-servicebus-transfer/7` exists, that extra backlog queue is still present but is not used.</span></span> <span data-ttu-id="59b86-154">système de Hello autorise explicitement tooexist de files d’attente du backlog supplémentaires qui ne serait utilisée.</span><span class="sxs-lookup"><span data-stu-id="59b86-154">hello system explicitly allows extra backlog queues tooexist that would not be used.</span></span> <span data-ttu-id="59b86-155">En tant que propriétaire d’espace de noms hello, vous êtes chargé de nettoyer les files d’attente de la file d’attente inutilisées ou indésirables.</span><span class="sxs-lookup"><span data-stu-id="59b86-155">As hello namespace owner, you are responsible for cleaning up any unused/unwanted backlog queues.</span></span> <span data-ttu-id="59b86-156">Hello pour prendre cette décision parce que le Service Bus ne peut pas savoir quelles fins existent pour toutes les files d’attente de hello dans votre espace de noms.</span><span class="sxs-lookup"><span data-stu-id="59b86-156">hello reason for this decision is that Service Bus cannot know what purposes exist for all hello queues in your namespace.</span></span> <span data-ttu-id="59b86-157">En outre, si une file d’attente existe avec le nom donné de hello mais ne répond pas aux hello supposé [QueueDescription][QueueDescription], puis votre raisons sont les vôtre pour modification par défaut hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-157">Furthermore, if a queue exists with hello given name but does not meet hello assumed [QueueDescription][QueueDescription], then your reasons are your own for changing hello default behavior.</span></span> <span data-ttu-id="59b86-158">Ne sont nullement garanties pour les files d’attente du backlog de modifications toohello par votre code.</span><span class="sxs-lookup"><span data-stu-id="59b86-158">No guarantees are made for modifications toohello backlog queues by your code.</span></span> <span data-ttu-id="59b86-159">Modifiez tootest vraiment soigneusement.</span><span class="sxs-lookup"><span data-stu-id="59b86-159">Make sure tootest your changes thoroughly.</span></span>

## <a name="custom-messagesender"></a><span data-ttu-id="59b86-160">MessageSender personnalisé</span><span class="sxs-lookup"><span data-stu-id="59b86-160">Custom MessageSender</span></span>
<span data-ttu-id="59b86-161">Lors de l’envoi, tous les messages passent par interne [MessageSender] [ MessageSender] objet qui se comporte normalement lorsque tout fonctionne et redirige les files d’attente du backlog toohello en «. »</span><span class="sxs-lookup"><span data-stu-id="59b86-161">When sending, all messages go through an internal [MessageSender][MessageSender] object that behaves normally when everything works, and redirects toohello backlog queues when things "break."</span></span> <span data-ttu-id="59b86-162">Lors de la réception d'une défaillance non temporaire, une minuterie démarre.</span><span class="sxs-lookup"><span data-stu-id="59b86-162">Upon receiving a non-transient failure, a timer starts.</span></span> <span data-ttu-id="59b86-163">Après un [TimeSpan] [ TimeSpan] période consistant à hello [FailoverInterval] [ FailoverInterval] au cours de laquelle aucun message de réussite est envoyé de valeur de propriété , hello basculement est engagé.</span><span class="sxs-lookup"><span data-stu-id="59b86-163">After a [TimeSpan][TimeSpan] period consisting of hello [FailoverInterval][FailoverInterval] property value during which no successful messages are sent, hello failover is engaged.</span></span> <span data-ttu-id="59b86-164">À ce stade, hello événements suivants se produisent pour chaque entité :</span><span class="sxs-lookup"><span data-stu-id="59b86-164">At this point, hello following things happen for each entity:</span></span>

* <span data-ttu-id="59b86-165">Une tâche ping exécute chaque [PingPrimaryInterval] [ PingPrimaryInterval] toocheck si l’entité de hello est disponible.</span><span class="sxs-lookup"><span data-stu-id="59b86-165">A ping task executes every [PingPrimaryInterval][PingPrimaryInterval] toocheck if hello entity is available.</span></span> <span data-ttu-id="59b86-166">Une fois cette tâche accomplie, tout le code client qui utilise les entités hello immédiatement commence à envoyer de nouveaux messages toohello espace de noms principal.</span><span class="sxs-lookup"><span data-stu-id="59b86-166">Once this task succeeds, all client code that uses hello entity immediately starts sending new messages toohello primary namespace.</span></span>
* <span data-ttu-id="59b86-167">Toothat toosend de futures demandes même entité à partir de n’importe quel autre expéditeur entraîne hello [BrokeredMessage] [ BrokeredMessage] envoyé toobe modifié toosit dans la file d’attente du backlog hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-167">Future requests toosend toothat same entity from any other senders will result in hello [BrokeredMessage][BrokeredMessage] being sent toobe modified toosit in hello backlog queue.</span></span> <span data-ttu-id="59b86-168">modification de Hello supprime certaines propriétés hello [BrokeredMessage] [ BrokeredMessage] de l’objet et les stocke ailleurs.</span><span class="sxs-lookup"><span data-stu-id="59b86-168">hello modification removes some properties from hello [BrokeredMessage][BrokeredMessage] object and stores them elsewhere.</span></span> <span data-ttu-id="59b86-169">Hello propriétés suivantes sont effacées et ajoutées sous un nouvel alias, ce qui permet Service Bus et hello SDK tooprocess messages uniformément :</span><span class="sxs-lookup"><span data-stu-id="59b86-169">hello following properties are cleared and added under a new alias, allowing Service Bus and hello SDK tooprocess messages uniformly:</span></span>

| <span data-ttu-id="59b86-170">Nom de l'ancienne propriété</span><span class="sxs-lookup"><span data-stu-id="59b86-170">Old Property Name</span></span> | <span data-ttu-id="59b86-171">Nom de la nouvelle propriété</span><span class="sxs-lookup"><span data-stu-id="59b86-171">New Property Name</span></span> |
| --- | --- |
| <span data-ttu-id="59b86-172">SessionId</span><span class="sxs-lookup"><span data-stu-id="59b86-172">SessionId</span></span> |<span data-ttu-id="59b86-173">x-ms-sessionid</span><span class="sxs-lookup"><span data-stu-id="59b86-173">x-ms-sessionid</span></span> |
| <span data-ttu-id="59b86-174">TimeToLive</span><span class="sxs-lookup"><span data-stu-id="59b86-174">TimeToLive</span></span> |<span data-ttu-id="59b86-175">x-ms-timetolive</span><span class="sxs-lookup"><span data-stu-id="59b86-175">x-ms-timetolive</span></span> |
| <span data-ttu-id="59b86-176">ScheduledEnqueueTimeUtc</span><span class="sxs-lookup"><span data-stu-id="59b86-176">ScheduledEnqueueTimeUtc</span></span> |<span data-ttu-id="59b86-177">x-ms-path</span><span class="sxs-lookup"><span data-stu-id="59b86-177">x-ms-path</span></span> |

<span data-ttu-id="59b86-178">chemin d’accès de destination d’origine Hello est également stockée dans le message de type hello en tant que propriété nommée x-ms-chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="59b86-178">hello original destination path is also stored within hello message as a property named x-ms-path.</span></span> <span data-ttu-id="59b86-179">Cette conception permet de messages pour nombreuses entités toocoexist dans une file d’attente unique.</span><span class="sxs-lookup"><span data-stu-id="59b86-179">This design allows messages for many entities toocoexist in a single backlog queue.</span></span> <span data-ttu-id="59b86-180">propriétés de Hello sont traduites par SIPHON de hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-180">hello properties are translated back by hello syphon.</span></span>

<span data-ttu-id="59b86-181">Hello personnalisé [MessageSender] [ MessageSender] objet peut rencontrer des problèmes lorsque les messages approchent de limite de 256 Ko hello et le basculement est activé.</span><span class="sxs-lookup"><span data-stu-id="59b86-181">hello custom [MessageSender][MessageSender] object can encounter issues when messages approach hello 256-KB limit and failover is engaged.</span></span> <span data-ttu-id="59b86-182">Hello personnalisé [MessageSender] [ MessageSender] objet stocke des messages pour toutes les files d’attente et rubriques dans les files d’attente du backlog hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-182">hello custom [MessageSender][MessageSender] object stores messages for all queues and topics together in hello backlog queues.</span></span> <span data-ttu-id="59b86-183">Cet objet combine des messages à partir de nombreuses couleurs primaires ensemble dans les files d’attente du backlog hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-183">This object mixes messages from many primaries together within hello backlog queues.</span></span> <span data-ttu-id="59b86-184">toohandle équilibrage de charge entre plusieurs clients qui ne connaissez pas chaque hello autre, Kit de développement logiciel de façon aléatoire choisit une file d’attente du backlog pour chaque [QueueClient] [ QueueClient] ou [TopicClient] [ TopicClient] vous créez dans le code.</span><span class="sxs-lookup"><span data-stu-id="59b86-184">toohandle load balancing among many clients that do not know each other, hello SDK randomly picks one backlog queue for each [QueueClient][QueueClient] or [TopicClient][TopicClient] you create in code.</span></span>

## <a name="pings"></a><span data-ttu-id="59b86-185">Tests ping</span><span class="sxs-lookup"><span data-stu-id="59b86-185">Pings</span></span>
<span data-ttu-id="59b86-186">Un message ping est vide [BrokeredMessage] [ BrokeredMessage] avec son [ContentType] [ ContentType] propriété définie tooapplication/vnd.ms-servicebus-ping et un [TimeToLive] [ TimeToLive] valeur de 1 seconde.</span><span class="sxs-lookup"><span data-stu-id="59b86-186">A ping message is an empty [BrokeredMessage][BrokeredMessage] with its [ContentType][ContentType] property set tooapplication/vnd.ms-servicebus-ping and a [TimeToLive][TimeToLive] value of 1 second.</span></span> <span data-ttu-id="59b86-187">Cette commande ping présente une caractéristique particulière dans Service Bus : hello serveur ne remet jamais une commande ping quand un appelant demande une [BrokeredMessage][BrokeredMessage].</span><span class="sxs-lookup"><span data-stu-id="59b86-187">This ping has one special characteristic in Service Bus: hello server never delivers a ping when any caller requests a [BrokeredMessage][BrokeredMessage].</span></span> <span data-ttu-id="59b86-188">Par conséquent, vous n’avez jamais toolearn comment tooreceive et ignorer ces messages.</span><span class="sxs-lookup"><span data-stu-id="59b86-188">Thus, you never have toolearn how tooreceive and ignore these messages.</span></span> <span data-ttu-id="59b86-189">Chaque entité (file d’attente unique ou rubrique) par [MessagingFactory] [ MessagingFactory] sera être exécutée sur une instance par le client lorsqu’ils sont considérées toobe indisponible.</span><span class="sxs-lookup"><span data-stu-id="59b86-189">Each entity (unique queue or topic) per [MessagingFactory][MessagingFactory] instance per client will be pinged when they are considered toobe unavailable.</span></span> <span data-ttu-id="59b86-190">Par défaut, cela se produit une fois par minute.</span><span class="sxs-lookup"><span data-stu-id="59b86-190">By default, this happens once per minute.</span></span> <span data-ttu-id="59b86-191">Messages ping sont considérés comme des messages de Service Bus toobe standard et peuvent entraîner des frais liés à la bande passante et les messages.</span><span class="sxs-lookup"><span data-stu-id="59b86-191">Ping messages are considered toobe regular Service Bus messages, and can result in charges for bandwidth and messages.</span></span> <span data-ttu-id="59b86-192">Dès que les clients de hello détectent que le système de hello est disponible, les messages de type hello arrêtent.</span><span class="sxs-lookup"><span data-stu-id="59b86-192">As soon as hello clients detect that hello system is available, hello messages stop.</span></span>

## <a name="hello-syphon"></a><span data-ttu-id="59b86-193">SIPHON de Hello</span><span class="sxs-lookup"><span data-stu-id="59b86-193">hello syphon</span></span>
<span data-ttu-id="59b86-194">Au moins un programme exécutable de l’application hello doit exécuter activement SIPHON de hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-194">At least one executable program in hello application should be actively running hello syphon.</span></span> <span data-ttu-id="59b86-195">SIPHON de Hello effectue un long réception d’interrogation qui dure 15 minutes.</span><span class="sxs-lookup"><span data-stu-id="59b86-195">hello syphon performs a long poll receive that lasts 15 minutes.</span></span> <span data-ttu-id="59b86-196">Lorsque toutes les entités sont disponibles et que vous avez 10 files d’attente du backlog, hello application qui héberge les appels de siphon hello hello réception opération 40 fois par heure, 960 fois par jour et 28 800 fois en 30 jours.</span><span class="sxs-lookup"><span data-stu-id="59b86-196">When all entities are available and you have 10 backlog queues, hello application that hosts hello syphon calls hello receive operation 40 times per hour, 960 times per day, and 28800 times in 30 days.</span></span> <span data-ttu-id="59b86-197">Lorsque le siphon de hello déplace activement des messages à partir de la file d’attente principale hello backlog toohello, chaque message occasionne hello suivant frais (frais standards de taille des messages et la bande passante s’appliquent à toutes les étapes) :</span><span class="sxs-lookup"><span data-stu-id="59b86-197">When hello syphon is actively moving messages from hello backlog toohello primary queue, each message experiences hello following charges (standard charges for message size and bandwidth apply in all stages):</span></span>

1. <span data-ttu-id="59b86-198">Toohello file d’attente d’envoi.</span><span class="sxs-lookup"><span data-stu-id="59b86-198">Send toohello backlog.</span></span>
2. <span data-ttu-id="59b86-199">Réception à partir de la file d’attente hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-199">Receive from hello backlog.</span></span>
3. <span data-ttu-id="59b86-200">Envoyer toohello principal.</span><span class="sxs-lookup"><span data-stu-id="59b86-200">Send toohello primary.</span></span>
4. <span data-ttu-id="59b86-201">Réception de hello principal.</span><span class="sxs-lookup"><span data-stu-id="59b86-201">Receive from hello primary.</span></span>

## <a name="closefault-behavior"></a><span data-ttu-id="59b86-202">Comportement de fermeture/erreur</span><span class="sxs-lookup"><span data-stu-id="59b86-202">Close/fault behavior</span></span>
<span data-ttu-id="59b86-203">Dans une application qui héberge le siphon de hello, une fois les hello principal ou secondaire [MessagingFactory] [ MessagingFactory] défaillance ou est fermée sans son partenaire également est défaillant ou fermé et le hello SIPHON détecte cet état , fait Office de siphon de hello.</span><span class="sxs-lookup"><span data-stu-id="59b86-203">Within an application that hosts hello syphon, once hello primary or secondary [MessagingFactory][MessagingFactory] faults or is closed without its partner also being faulted/closed and hello syphon detects this state, hello syphon acts.</span></span> <span data-ttu-id="59b86-204">Si des autres hello [MessagingFactory] [ MessagingFactory] n’est pas fermée dans les 5 secondes, SIPHON de hello entraîne une défaillance hello encore ouverte [MessagingFactory] [ MessagingFactory] .</span><span class="sxs-lookup"><span data-stu-id="59b86-204">If hello other [MessagingFactory][MessagingFactory] is not closed within 5 seconds, hello syphon will fault hello still open [MessagingFactory][MessagingFactory].</span></span>

## <a name="next-steps"></a><span data-ttu-id="59b86-205">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="59b86-205">Next steps</span></span>
<span data-ttu-id="59b86-206">Consultez [Modèles de messagerie asynchrone et haute disponibilité][Asynchronous messaging patterns and high availability] pour une discussion détaillée sur la messagerie asynchrone de Service Bus.</span><span class="sxs-lookup"><span data-stu-id="59b86-206">See [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability] for a detailed discussion of Service Bus asynchronous messaging.</span></span> 

[PairNamespaceAsync]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_PairNamespaceAsync_Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_
[SendAvailabilityPairedNamespaceOptions]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[FailoverInterval]: /dotnet/api/microsoft.servicebus.messaging.pairednamespaceoptions#Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_FailoverInterval
[MessagingException]: /dotnet/api/microsoft.servicebus.messaging.messagingexception
[TimeoutException]: https://msdn.microsoft.com/library/azure/system.timeoutexception.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage
[QueueDescription]: /dotnet/api/microsoft.servicebus.messaging.queuedescription
[TimeSpan]: https://msdn.microsoft.com/library/azure/system.timespan.aspx
[PingPrimaryInterval]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions#Microsoft_ServiceBus_Messaging_SendAvailabilityPairedNamespaceOptions_PingPrimaryInterval
[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[TopicClient]: /dotnet/api/microsoft.servicebus.messaging.topicclient
[ContentType]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_ContentType
[TimeToLive]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md
[0]: ./media/service-bus-paired-namespaces/IC673405.png
[1]: ./media/service-bus-paired-namespaces/IC673406.png
[2]: ./media/service-bus-paired-namespaces/IC673407.png
