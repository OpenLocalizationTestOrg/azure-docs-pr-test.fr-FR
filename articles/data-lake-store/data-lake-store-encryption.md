---
title: aaaEncryption dans Azure Data Lake Store | Documents Microsoft
description: "Comprendre le fonctionnement du chiffrement et de la rotation des clés dans Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="10592-103">Chiffrement des données dans Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="10592-104">Le chiffrement dans Azure Data Lake Store vous permet de protéger vos données, de mettre en œuvre des stratégies de sécurité d’entreprise et de répondre aux exigences de conformité réglementaire.</span><span class="sxs-lookup"><span data-stu-id="10592-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="10592-105">Cet article fournit une vue d’ensemble de la conception de hello et traite des aspects techniques de hello d’implémentation.</span><span class="sxs-lookup"><span data-stu-id="10592-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="10592-106">Data Lake Store prend en charge le chiffrement des données au repos et en transit.</span><span class="sxs-lookup"><span data-stu-id="10592-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="10592-107">Pour les données au repos, Data Lake Store s’appuie sur un chiffrement transparent « activé par défaut ».</span><span class="sxs-lookup"><span data-stu-id="10592-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="10592-108">Voici, plus en détails, ce que ces termes signifient :</span><span class="sxs-lookup"><span data-stu-id="10592-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="10592-109">**Sur par défaut**: lorsque vous créez un nouveau compte Data Lake Store, le paramètre par défaut de hello Active le chiffrement.</span><span class="sxs-lookup"><span data-stu-id="10592-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="10592-110">Par la suite, données qui sont stockées dans Data Lake Store sont toujours chiffrée toostoring préalable sur un support permanent.</span><span class="sxs-lookup"><span data-stu-id="10592-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="10592-111">Il s’agit comportement hello pour toutes les données et il ne peut pas être modifié après la création d’un compte.</span><span class="sxs-lookup"><span data-stu-id="10592-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="10592-112">**Transparent**: Data Lake Store chiffre toopersisting préalable des données automatiquement et déchiffre tooretrieval préalable des données.</span><span class="sxs-lookup"><span data-stu-id="10592-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="10592-113">le chiffrement Hello est configuré et géré à hello au niveau de Data Lake Store par un administrateur.</span><span class="sxs-lookup"><span data-stu-id="10592-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="10592-114">Aucune modification n’est apportée toohello données accéder aux API.</span><span class="sxs-lookup"><span data-stu-id="10592-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="10592-115">Aucune modification n’est donc requise dans les applications et services qui interagissent avec Data Lake Store en raison du chiffrement.</span><span class="sxs-lookup"><span data-stu-id="10592-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="10592-116">Les données en transit (ou données en mouvement) sont également toujours chiffrées dans Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="10592-117">En outre tooencrypting données toostoring préalable toopersistent média, les données de salutation sont également toujours protégées en transit à l’aide de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="10592-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="10592-118">HTTPS est hello seul protocole pris en charge pour hello que REST de magasin de données Lake interfaces.</span><span class="sxs-lookup"><span data-stu-id="10592-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="10592-119">Hello diagramme suivant montre comment les données sont chiffrées dans Data Lake Store :</span><span class="sxs-lookup"><span data-stu-id="10592-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagramme du chiffrement des données dans Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="10592-121">Configuration du chiffrement avec Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="10592-122">Le chiffrement pour Data Lake Store est configuré lors de la création de compte et est toujours activé par défaut.</span><span class="sxs-lookup"><span data-stu-id="10592-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="10592-123">Vous pouvez gérer les clés de hello ou autoriser Data Lake Store toomanage pour vous (il s’agit par défaut de hello).</span><span class="sxs-lookup"><span data-stu-id="10592-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="10592-124">Pour plus d’informations, consultez [Prise en main](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="10592-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="10592-125">Fonctionnement du chiffrement dans Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="10592-126">Hello informations suivantes couvrent comment les clés de chiffrement principale toomanage et elle explique hello trois différents types de clés que vous pouvez utiliser dans le chiffrement des données pour Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="10592-127">Clés de chiffrement principales</span><span class="sxs-lookup"><span data-stu-id="10592-127">Master encryption keys</span></span>

<span data-ttu-id="10592-128">Data Lake Store propose deux modes de gestion des clés de chiffrement principales (MEK).</span><span class="sxs-lookup"><span data-stu-id="10592-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="10592-129">Pour le moment, supposons que cette clé de chiffrement principale hello est la clé de niveau supérieur hello.</span><span class="sxs-lookup"><span data-stu-id="10592-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="10592-130">Clé de chiffrement principale accès toohello est requis toodecrypt toutes les données stockées dans Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="10592-131">modes de Hello deux pour la gestion de clé de chiffrement principale hello sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="10592-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="10592-132">Clés gérées par le service</span><span class="sxs-lookup"><span data-stu-id="10592-132">Service managed keys</span></span>
*   <span data-ttu-id="10592-133">Clés gérées par le client</span><span class="sxs-lookup"><span data-stu-id="10592-133">Customer managed keys</span></span>

<span data-ttu-id="10592-134">Dans les deux modes, la clé de chiffrement principale hello est sécurisée en les stockant dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="10592-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="10592-135">Le coffre de clés est un service entièrement géré, hautement sécurisé sur Azure qui peut être des clés de chiffrement toosafeguard utilisé.</span><span class="sxs-lookup"><span data-stu-id="10592-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="10592-136">Pour plus d’informations, consultez [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="10592-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="10592-137">Voici une brève comparaison des fonctions fournies par hello deux modes de gestion hello MEKs.</span><span class="sxs-lookup"><span data-stu-id="10592-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="10592-138">Clés gérées par le service</span><span class="sxs-lookup"><span data-stu-id="10592-138">Service managed keys</span></span> | <span data-ttu-id="10592-139">Clés gérées par le client</span><span class="sxs-lookup"><span data-stu-id="10592-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="10592-140">Comment les données sont stockées ?</span><span class="sxs-lookup"><span data-stu-id="10592-140">How is data stored?</span></span>|<span data-ttu-id="10592-141">Toobeing préalable toujours chiffrée stockée.</span><span class="sxs-lookup"><span data-stu-id="10592-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="10592-142">Toobeing préalable toujours chiffrée stockée.</span><span class="sxs-lookup"><span data-stu-id="10592-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="10592-143">Où est stockée les hello clé de chiffrement principale ?</span><span class="sxs-lookup"><span data-stu-id="10592-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="10592-144">Key Vault</span><span class="sxs-lookup"><span data-stu-id="10592-144">Key Vault</span></span>|<span data-ttu-id="10592-145">Key Vault</span><span class="sxs-lookup"><span data-stu-id="10592-145">Key Vault</span></span>|
|<span data-ttu-id="10592-146">Sont toutes les clés stockées dans hello désactivez le chiffrement en dehors du coffre de clés ?</span><span class="sxs-lookup"><span data-stu-id="10592-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="10592-147">Non</span><span class="sxs-lookup"><span data-stu-id="10592-147">No</span></span>|<span data-ttu-id="10592-148">Non</span><span class="sxs-lookup"><span data-stu-id="10592-148">No</span></span>|
|<span data-ttu-id="10592-149">Hello MEK peut être récupérée par le coffre de clés ?</span><span class="sxs-lookup"><span data-stu-id="10592-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="10592-150">Non.</span><span class="sxs-lookup"><span data-stu-id="10592-150">No.</span></span> <span data-ttu-id="10592-151">Après avoir hello que MEK est stocké dans le coffre de clés, il peut être utilisé uniquement pour le chiffrement et le déchiffrement.</span><span class="sxs-lookup"><span data-stu-id="10592-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="10592-152">Non.</span><span class="sxs-lookup"><span data-stu-id="10592-152">No.</span></span> <span data-ttu-id="10592-153">Après avoir hello que MEK est stocké dans le coffre de clés, il peut être utilisé uniquement pour le chiffrement et le déchiffrement.</span><span class="sxs-lookup"><span data-stu-id="10592-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="10592-154">Qui est propriétaire d’instance de coffre de clés hello et hello MEK ?</span><span class="sxs-lookup"><span data-stu-id="10592-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="10592-155">Hello les service Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-155">hello Data Lake Store service</span></span>|<span data-ttu-id="10592-156">Vous êtes propriétaire d’instance de coffre de clés hello, qui appartienne à votre propre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="10592-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="10592-157">Hello MEK dans le coffre de clés peut être géré par un logiciel ou matériel.</span><span class="sxs-lookup"><span data-stu-id="10592-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="10592-158">Vous pouvez révoquer l’accès toohello MEK pourquoi les service Data Lake Store ?</span><span class="sxs-lookup"><span data-stu-id="10592-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="10592-159">Non</span><span class="sxs-lookup"><span data-stu-id="10592-159">No</span></span>|<span data-ttu-id="10592-160">Oui.</span><span class="sxs-lookup"><span data-stu-id="10592-160">Yes.</span></span> <span data-ttu-id="10592-161">Vous pouvez gérer des listes de contrôle d’accès dans le coffre de clés et supprimer l’identité du service accès contrôle entrées toohello pourquoi les service Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="10592-162">Peut supprimer définitivement hello MEK ?</span><span class="sxs-lookup"><span data-stu-id="10592-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="10592-163">Non</span><span class="sxs-lookup"><span data-stu-id="10592-163">No</span></span>|<span data-ttu-id="10592-164">Oui.</span><span class="sxs-lookup"><span data-stu-id="10592-164">Yes.</span></span> <span data-ttu-id="10592-165">Si vous supprimez hello MEK de coffre de clés, ne peut pas déchiffrer les données de hello Bonjour compte Data Lake Store par tout le monde, y compris hello Data Lake Store service.</span><span class="sxs-lookup"><span data-stu-id="10592-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="10592-166">Si vous avez explicitement sauvegardé toodeleting préalable de MEK hello il à partir du coffre de clés, hello MEK peut être restaurée et les données de salutation peuvent ensuite être récupérées.</span><span class="sxs-lookup"><span data-stu-id="10592-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="10592-167">Toutefois, si vous n'avez pas sauvegardé toodeleting préalable de hello MEK il à partir du coffre de clés, données hello Bonjour compte Data Lake Store peuvent jamais être déchiffrées par la suite.</span><span class="sxs-lookup"><span data-stu-id="10592-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="10592-168">À part cette différence de qui gère les hello MEK et instance coffre de clés hello dans lequel il réside, reste hello de conception de hello est hello même pour les deux modes.</span><span class="sxs-lookup"><span data-stu-id="10592-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="10592-169">Il est suivant de hello tooremember important lorsque vous choisissez mode hello hello pour les clés de chiffrement principale :</span><span class="sxs-lookup"><span data-stu-id="10592-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="10592-170">Vous pouvez choisir si toouse client géré clés ou les clés de service géré lorsque vous configurez un compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="10592-171">Une fois configuré, un compte Data Lake Store ne peuvent pas modifier le mode de hello.</span><span class="sxs-lookup"><span data-stu-id="10592-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="10592-172">Chiffrement et déchiffrement des données</span><span class="sxs-lookup"><span data-stu-id="10592-172">Encryption and decryption of data</span></span>

<span data-ttu-id="10592-173">Il existe trois types de clés qui sont utilisées dans la conception de hello du chiffrement des données.</span><span class="sxs-lookup"><span data-stu-id="10592-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="10592-174">Hello tableau suivant fournit un résumé :</span><span class="sxs-lookup"><span data-stu-id="10592-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="10592-175">Clé</span><span class="sxs-lookup"><span data-stu-id="10592-175">Key</span></span>                   | <span data-ttu-id="10592-176">Abréviation</span><span class="sxs-lookup"><span data-stu-id="10592-176">Abbreviation</span></span> | <span data-ttu-id="10592-177">Associée à</span><span class="sxs-lookup"><span data-stu-id="10592-177">Associated with</span></span> | <span data-ttu-id="10592-178">Emplacement de stockage</span><span class="sxs-lookup"><span data-stu-id="10592-178">Storage location</span></span>                             | <span data-ttu-id="10592-179">Type</span><span class="sxs-lookup"><span data-stu-id="10592-179">Type</span></span>       | <span data-ttu-id="10592-180">Remarques</span><span class="sxs-lookup"><span data-stu-id="10592-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="10592-181">Clé de chiffrement principale</span><span class="sxs-lookup"><span data-stu-id="10592-181">Master Encryption Key</span></span> | <span data-ttu-id="10592-182">MEK</span><span class="sxs-lookup"><span data-stu-id="10592-182">MEK</span></span>          | <span data-ttu-id="10592-183">Compte Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-183">A Data Lake Store account</span></span> | <span data-ttu-id="10592-184">Key Vault</span><span class="sxs-lookup"><span data-stu-id="10592-184">Key Vault</span></span>                              | <span data-ttu-id="10592-185">Asymétrique</span><span class="sxs-lookup"><span data-stu-id="10592-185">Asymmetric</span></span> | <span data-ttu-id="10592-186">Peut être gérée par Data Lake Store ou par vous.</span><span class="sxs-lookup"><span data-stu-id="10592-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="10592-187">Clé de chiffrement des données</span><span class="sxs-lookup"><span data-stu-id="10592-187">Data Encryption Key</span></span>   | <span data-ttu-id="10592-188">DEK</span><span class="sxs-lookup"><span data-stu-id="10592-188">DEK</span></span>          | <span data-ttu-id="10592-189">Compte Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-189">A Data Lake Store account</span></span> | <span data-ttu-id="10592-190">Stockage permanent, géré par le service Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="10592-191">Symétrique</span><span class="sxs-lookup"><span data-stu-id="10592-191">Symmetric</span></span>  | <span data-ttu-id="10592-192">Hello DEK est chiffré par hello MEK.</span><span class="sxs-lookup"><span data-stu-id="10592-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="10592-193">Hello que DEK chiffré est ce qui est stocké sur un support permanent.</span><span class="sxs-lookup"><span data-stu-id="10592-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="10592-194">Clé de chiffrement de bloc</span><span class="sxs-lookup"><span data-stu-id="10592-194">Block Encryption Key</span></span>  | <span data-ttu-id="10592-195">BEK</span><span class="sxs-lookup"><span data-stu-id="10592-195">BEK</span></span>          | <span data-ttu-id="10592-196">Un bloc de données</span><span class="sxs-lookup"><span data-stu-id="10592-196">A block of data</span></span> | <span data-ttu-id="10592-197">Aucun</span><span class="sxs-lookup"><span data-stu-id="10592-197">None</span></span>                                         | <span data-ttu-id="10592-198">Symétrique</span><span class="sxs-lookup"><span data-stu-id="10592-198">Symmetric</span></span>  | <span data-ttu-id="10592-199">Hello BEK est dérivée de hello DEK et bloc de données hello.</span><span class="sxs-lookup"><span data-stu-id="10592-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="10592-200">Hello suivant le diagramme illustre ces concepts :</span><span class="sxs-lookup"><span data-stu-id="10592-200">hello following diagram illustrates these concepts:</span></span>

![Clés dans le chiffrement des données](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="10592-202">Algorithme de pseudo lorsqu’un fichier est toobe déchiffré :</span><span class="sxs-lookup"><span data-stu-id="10592-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="10592-203">Vérifiez si hello DEK compte Data Lake Store de hello est mis en cache et prête pour utilisation.</span><span class="sxs-lookup"><span data-stu-id="10592-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="10592-204">Si ce n’est pas le cas, lire hello chiffré DEK à partir d’un stockage persistant et envoyez-le toobe de coffre tooKey déchiffré.</span><span class="sxs-lookup"><span data-stu-id="10592-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="10592-205">Hello du cache déchiffrer la clé DEK en mémoire.</span><span class="sxs-lookup"><span data-stu-id="10592-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="10592-206">Il est maintenant prêt toouse.</span><span class="sxs-lookup"><span data-stu-id="10592-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="10592-207">Pour chaque bloc de données dans le fichier de hello :</span><span class="sxs-lookup"><span data-stu-id="10592-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="10592-208">Lecture hello chiffrée du bloc de données à partir d’un stockage persistant.</span><span class="sxs-lookup"><span data-stu-id="10592-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="10592-209">Générer hello BEK de hello DEK et bloc de chiffrées hello de données.</span><span class="sxs-lookup"><span data-stu-id="10592-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="10592-210">Utiliser des données de toodecrypt BEK hello.</span><span class="sxs-lookup"><span data-stu-id="10592-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="10592-211">Algorithme de pseudo lorsqu’un bloc de données est toobe chiffrée :</span><span class="sxs-lookup"><span data-stu-id="10592-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="10592-212">Vérifiez si hello DEK compte Data Lake Store de hello est mis en cache et prête pour utilisation.</span><span class="sxs-lookup"><span data-stu-id="10592-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="10592-213">Si ce n’est pas le cas, lire hello chiffré DEK à partir d’un stockage persistant et envoyez-le toobe de coffre tooKey déchiffré.</span><span class="sxs-lookup"><span data-stu-id="10592-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="10592-214">Hello du cache déchiffrer la clé DEK en mémoire.</span><span class="sxs-lookup"><span data-stu-id="10592-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="10592-215">Il est maintenant prêt toouse.</span><span class="sxs-lookup"><span data-stu-id="10592-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="10592-216">Générer un BEK unique pour le bloc hello de données à partir de hello DEK.</span><span class="sxs-lookup"><span data-stu-id="10592-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="10592-217">Chiffrer le bloc de données hello avec hello BEK, à l’aide du chiffrement AES-256.</span><span class="sxs-lookup"><span data-stu-id="10592-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="10592-218">Bloc de données chiffrées magasin hello des données sur le stockage persistant.</span><span class="sxs-lookup"><span data-stu-id="10592-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="10592-219">Pour des raisons de performances, hello DEK Bonjour effacer est mis en cache en mémoire pendant une courte période et est effacé immédiatement après.</span><span class="sxs-lookup"><span data-stu-id="10592-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="10592-220">Sur un support persistant, il est toujours chiffrée par hello MEK.</span><span class="sxs-lookup"><span data-stu-id="10592-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="10592-221">Rotation des clés</span><span class="sxs-lookup"><span data-stu-id="10592-221">Key rotation</span></span>

<span data-ttu-id="10592-222">Lorsque vous utilisez des clés de gérée par le client, vous pouvez faire pivoter hello MEK.</span><span class="sxs-lookup"><span data-stu-id="10592-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="10592-223">toolearn tooset d’un compte Data Lake Store avec des clés gérée par le client, voir [mise en route](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="10592-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="10592-224">Composants requis</span><span class="sxs-lookup"><span data-stu-id="10592-224">Prerequisites</span></span>

<span data-ttu-id="10592-225">Lorsque vous configurez hello compte Data Lake Store, vous avez choisi toouse vos propres clés.</span><span class="sxs-lookup"><span data-stu-id="10592-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="10592-226">Cette option ne peut pas être modifiée une fois hello compte a été créé.</span><span class="sxs-lookup"><span data-stu-id="10592-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="10592-227">Hello étapes suivantes supposent que vous utilisez des clés de gérée par le client (autrement dit, vous avez choisi vos propres clés de coffre de clés).</span><span class="sxs-lookup"><span data-stu-id="10592-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="10592-228">Notez que si vous utilisez les options par défaut de hello pour le chiffrement, vos données sont toujours chiffrées à l’aide de clés gérés par Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="10592-229">Dans cette option, vous n’avez les clés de capacité toorotate hello, qu’ils sont gérés par Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="10592-230">Comment toorotate hello MEK dans Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="10592-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="10592-231">Connectez-vous à toohello [portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="10592-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="10592-232">Parcourir l’instance de coffre de clés toohello qui stocke vos clés associés à votre compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="10592-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="10592-233">Sélectionnez **Clés**.</span><span class="sxs-lookup"><span data-stu-id="10592-233">Select **Keys**.</span></span>

    ![Capture d’écran de Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="10592-235">Sélectionnez la clé hello associée à votre compte Data Lake Store et créer une nouvelle version de cette clé.</span><span class="sxs-lookup"><span data-stu-id="10592-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="10592-236">Notez que Data Lake Store actuellement prend uniquement en charge la rotation des clés tooa nouvelle version d’une clé.</span><span class="sxs-lookup"><span data-stu-id="10592-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="10592-237">Il ne prend en charge la rotation tooa autre clé.</span><span class="sxs-lookup"><span data-stu-id="10592-237">It doesn't support rotating tooa different key.</span></span>

   ![Capture d’écran de la fenêtre Clés, avec Nouvelle version en surbrillance](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="10592-239">Recherchez le compte de stockage toohello Data Lake Store, puis sélectionnez **chiffrement**.</span><span class="sxs-lookup"><span data-stu-id="10592-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Capture d’écran de la fenêtre du compte de stockage Data Lake Store, avec Chiffrement en surbrillance](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="10592-241">Un message vous avertit qu’une nouvelle version de clé de la clé de hello est disponible.</span><span class="sxs-lookup"><span data-stu-id="10592-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="10592-242">Cliquez sur **pivoter une clé** nouvelle version tooupdate hello toohello clé.</span><span class="sxs-lookup"><span data-stu-id="10592-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![Capture d’écran de la fenêtre Data Lake Store avec le message et Rotation de clé en surbrillance](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="10592-244">Cette opération doit prendre moins de deux minutes, et il n’existe aucun temps d’indisponibilité attendu en raison de la rotation de tookey.</span><span class="sxs-lookup"><span data-stu-id="10592-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="10592-245">Une fois hello terminée, hello nouvelle version de clé de hello est en cours d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="10592-245">After hello operation is complete, hello new version of hello key is in use.</span></span>
