---
title: Chiffrement dans Azure Data Lake Store | Microsoft Docs
description: "Comprendre le fonctionnement du chiffrement et de la rotation des clés dans Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: 20444d368c568ee716ff242e33323b91ffd198eb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="76f90-103">Chiffrement des données dans Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="76f90-104">Le chiffrement dans Azure Data Lake Store vous permet de protéger vos données, de mettre en œuvre des stratégies de sécurité d’entreprise et de répondre aux exigences de conformité réglementaire.</span><span class="sxs-lookup"><span data-stu-id="76f90-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="76f90-105">Cet article fournit une vue d’ensemble de la conception et présente certains aspects techniques de la mise en œuvre.</span><span class="sxs-lookup"><span data-stu-id="76f90-105">This article provides an overview of the design, and discusses some of the technical aspects of implementation.</span></span>

<span data-ttu-id="76f90-106">Data Lake Store prend en charge le chiffrement des données au repos et en transit.</span><span class="sxs-lookup"><span data-stu-id="76f90-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="76f90-107">Pour les données au repos, Data Lake Store s’appuie sur un chiffrement transparent « activé par défaut ».</span><span class="sxs-lookup"><span data-stu-id="76f90-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="76f90-108">Voici, plus en détails, ce que ces termes signifient :</span><span class="sxs-lookup"><span data-stu-id="76f90-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="76f90-109">**Activé par défaut** : lorsque vous créez un nouveau compte Data Lake Store, le paramètre par défaut active le chiffrement.</span><span class="sxs-lookup"><span data-stu-id="76f90-109">**On by default**: When you create a new Data Lake Store account, the default setting enables encryption.</span></span> <span data-ttu-id="76f90-110">Ainsi, les données stockées dans Data Lake Store sont toujours chiffrées avant d’être stockées sur un support permanent.</span><span class="sxs-lookup"><span data-stu-id="76f90-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior to storing on persistent media.</span></span> <span data-ttu-id="76f90-111">Ce comportement s’applique à toutes les données et ne peut pas être modifié après la création d’un compte.</span><span class="sxs-lookup"><span data-stu-id="76f90-111">This is the behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="76f90-112">**Transparent** : Data Lake Store chiffre automatiquement les données avant le stockage permanent et déchiffre les données avant la récupération.</span><span class="sxs-lookup"><span data-stu-id="76f90-112">**Transparent**: Data Lake Store automatically encrypts data prior to persisting, and decrypts data prior to retrieval.</span></span> <span data-ttu-id="76f90-113">Le chiffrement est configuré et géré au niveau Data Lake Store par un administrateur.</span><span class="sxs-lookup"><span data-stu-id="76f90-113">The encryption is configured and managed at the Data Lake Store level by an administrator.</span></span> <span data-ttu-id="76f90-114">Aucune modification n’est apportée aux API d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="76f90-114">No changes are made to the data access APIs.</span></span> <span data-ttu-id="76f90-115">Aucune modification n’est donc requise dans les applications et services qui interagissent avec Data Lake Store en raison du chiffrement.</span><span class="sxs-lookup"><span data-stu-id="76f90-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="76f90-116">Les données en transit (ou données en mouvement) sont également toujours chiffrées dans Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="76f90-117">Outre le chiffrement des données avant le stockage sur un support permanent, les données sont également toujours sécurisées en transit à l’aide du protocole HTTPS.</span><span class="sxs-lookup"><span data-stu-id="76f90-117">In addition to encrypting data prior to storing to persistent media, the data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="76f90-118">HTTPS est le seul protocole pris en charge pour les interfaces REST Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-118">HTTPS is the only protocol that is supported for the Data Lake Store REST interfaces.</span></span> <span data-ttu-id="76f90-119">Le diagramme suivant illustre le mode de chiffrement des données dans Data Lake Store :</span><span class="sxs-lookup"><span data-stu-id="76f90-119">The following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagramme du chiffrement des données dans Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="76f90-121">Configuration du chiffrement avec Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="76f90-122">Le chiffrement pour Data Lake Store est configuré lors de la création de compte et est toujours activé par défaut.</span><span class="sxs-lookup"><span data-stu-id="76f90-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="76f90-123">Vous pouvez gérer les clés vous-même ou autoriser Data Lake Store à les gérer pour vous (option par défaut).</span><span class="sxs-lookup"><span data-stu-id="76f90-123">You can either manage the keys yourself, or allow Data Lake Store to manage them for you (this is the default).</span></span>

<span data-ttu-id="76f90-124">Pour plus d’informations, consultez [Prise en main](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="76f90-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="76f90-125">Fonctionnement du chiffrement dans Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="76f90-126">Les informations suivantes traitent de la gestion des clés de chiffrement principales, et décrivent les trois types de clés que vous pouvez utiliser dans le chiffrement des données pour Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-126">The following information covers how to manage master encryption keys, and it explains the three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="76f90-127">Clés de chiffrement principales</span><span class="sxs-lookup"><span data-stu-id="76f90-127">Master encryption keys</span></span>

<span data-ttu-id="76f90-128">Data Lake Store propose deux modes de gestion des clés de chiffrement principales (MEK).</span><span class="sxs-lookup"><span data-stu-id="76f90-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="76f90-129">À ce stade, supposons que la clé de chiffrement principale est la clé de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="76f90-129">For now, assume that the master encryption key is the top-level key.</span></span> <span data-ttu-id="76f90-130">Un accès à la clé de chiffrement principale est requis pour déchiffrer les données stockées dans Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-130">Access to the master encryption key is required to decrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="76f90-131">Les deux modes de gestion de la clé de chiffrement principale sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="76f90-131">The two modes for managing the master encryption key are as follows:</span></span>

*   <span data-ttu-id="76f90-132">Clés gérées par le service</span><span class="sxs-lookup"><span data-stu-id="76f90-132">Service managed keys</span></span>
*   <span data-ttu-id="76f90-133">Clés gérées par le client</span><span class="sxs-lookup"><span data-stu-id="76f90-133">Customer managed keys</span></span>

<span data-ttu-id="76f90-134">Dans ces deux modes, la clé de chiffrement principale est sécurisée en la stockant dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="76f90-134">In both modes, the master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="76f90-135">Key Vault est un service hautement sécurisé entièrement géré sur Azure qui peut être utilisé pour protéger les clés cryptographiques.</span><span class="sxs-lookup"><span data-stu-id="76f90-135">Key Vault is a fully managed, highly secure service on Azure that can be used to safeguard cryptographic keys.</span></span> <span data-ttu-id="76f90-136">Pour plus d’informations, consultez [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="76f90-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="76f90-137">Voici une brève comparaison des fonctionnalités fournies par les deux modes de gestion des MEK.</span><span class="sxs-lookup"><span data-stu-id="76f90-137">Here is a brief comparison of capabilities provided by the two modes of managing the MEKs.</span></span>

|  | <span data-ttu-id="76f90-138">Clés gérées par le service</span><span class="sxs-lookup"><span data-stu-id="76f90-138">Service managed keys</span></span> | <span data-ttu-id="76f90-139">Clés gérées par le client</span><span class="sxs-lookup"><span data-stu-id="76f90-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="76f90-140">Comment les données sont stockées ?</span><span class="sxs-lookup"><span data-stu-id="76f90-140">How is data stored?</span></span>|<span data-ttu-id="76f90-141">Toujours chiffrées avant d’être stockées.</span><span class="sxs-lookup"><span data-stu-id="76f90-141">Always encrypted prior to being stored.</span></span>|<span data-ttu-id="76f90-142">Toujours chiffrées avant d’être stockées.</span><span class="sxs-lookup"><span data-stu-id="76f90-142">Always encrypted prior to being stored.</span></span>|
|<span data-ttu-id="76f90-143">Où est stockée la clé de chiffrement principale ?</span><span class="sxs-lookup"><span data-stu-id="76f90-143">Where is the Master Encryption Key stored?</span></span>|<span data-ttu-id="76f90-144">Key Vault</span><span class="sxs-lookup"><span data-stu-id="76f90-144">Key Vault</span></span>|<span data-ttu-id="76f90-145">Key Vault</span><span class="sxs-lookup"><span data-stu-id="76f90-145">Key Vault</span></span>|
|<span data-ttu-id="76f90-146">Des clés de chiffrement sont-elles stockées en dehors de Key Vault ?</span><span class="sxs-lookup"><span data-stu-id="76f90-146">Are any encryption keys stored in the clear outside of Key Vault?</span></span> |<span data-ttu-id="76f90-147">Non</span><span class="sxs-lookup"><span data-stu-id="76f90-147">No</span></span>|<span data-ttu-id="76f90-148">Non</span><span class="sxs-lookup"><span data-stu-id="76f90-148">No</span></span>|
|<span data-ttu-id="76f90-149">La MEK peut-elle être récupérée dans Key Vault ?</span><span class="sxs-lookup"><span data-stu-id="76f90-149">Can the MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="76f90-150">Non.</span><span class="sxs-lookup"><span data-stu-id="76f90-150">No.</span></span> <span data-ttu-id="76f90-151">Une fois la MEK stockée dans Key Vault, elle peut uniquement être utilisée pour le chiffrement et le déchiffrement.</span><span class="sxs-lookup"><span data-stu-id="76f90-151">After the MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="76f90-152">Non.</span><span class="sxs-lookup"><span data-stu-id="76f90-152">No.</span></span> <span data-ttu-id="76f90-153">Une fois la MEK stockée dans Key Vault, elle peut uniquement être utilisée pour le chiffrement et le déchiffrement.</span><span class="sxs-lookup"><span data-stu-id="76f90-153">After the MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="76f90-154">Qui possède l’instance Key Vault et la MEK ?</span><span class="sxs-lookup"><span data-stu-id="76f90-154">Who owns the Key Vault instance and the MEK?</span></span>|<span data-ttu-id="76f90-155">Service Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-155">The Data Lake Store service</span></span>|<span data-ttu-id="76f90-156">Vous possédez l’instance Key Vault, qui appartient à votre propre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="76f90-156">You own the Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="76f90-157">La MEK dans Key Vault peut être gérée par logiciel ou matériel.</span><span class="sxs-lookup"><span data-stu-id="76f90-157">The MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="76f90-158">Pouvez-vous révoquer l’accès à la MEK pour le service Data Lake Store ?</span><span class="sxs-lookup"><span data-stu-id="76f90-158">Can you revoke access to the MEK for the Data Lake Store service?</span></span>|<span data-ttu-id="76f90-159">Non</span><span class="sxs-lookup"><span data-stu-id="76f90-159">No</span></span>|<span data-ttu-id="76f90-160">Oui.</span><span class="sxs-lookup"><span data-stu-id="76f90-160">Yes.</span></span> <span data-ttu-id="76f90-161">Vous pouvez gérer des listes de contrôle d’accès sur Key Vault et supprimer des entrées de contrôle d’accès à l’identité de service pour le service Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-161">You can manage access control lists in Key Vault, and remove access control entries to the service identity for the Data Lake Store service.</span></span>|
|<span data-ttu-id="76f90-162">Pouvez-vous supprimer définitivement la MEK ?</span><span class="sxs-lookup"><span data-stu-id="76f90-162">Can you permanently delete the MEK?</span></span>|<span data-ttu-id="76f90-163">Non</span><span class="sxs-lookup"><span data-stu-id="76f90-163">No</span></span>|<span data-ttu-id="76f90-164">Oui.</span><span class="sxs-lookup"><span data-stu-id="76f90-164">Yes.</span></span> <span data-ttu-id="76f90-165">Si le client supprime la MEK de Key Vault, les données dans le compte Data Lake Store ne peuvent pas être déchiffrées par quiconque, y compris le service Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-165">If you delete the MEK from Key Vault, the data in the Data Lake Store account cannot be decrypted by anyone, including the Data Lake Store service.</span></span> <br><br> <span data-ttu-id="76f90-166">Si vous avez explicitement sauvegardé la MEK avant de la supprimer de Key Vault, elle peut être restaurée et les données peuvent ensuite être récupérées.</span><span class="sxs-lookup"><span data-stu-id="76f90-166">If you have explicitly backed up the MEK prior to deleting it from Key Vault, the MEK can be restored, and the data can then be recovered.</span></span> <span data-ttu-id="76f90-167">Toutefois, si vous n’avez pas sauvegardé la MEK avant de la supprimer de Key Vault, les données dans le compte Data Lake Store ne peuvent jamais être déchiffrées ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="76f90-167">However, if you have not backed up the MEK prior to deleting it from Key Vault, the data in the Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="76f90-168">Hormis la différence entre l’utilisateur qui gère la MEK et l’instance Key Vault dans lequel elle se trouve, les autres éléments de conception sont les mêmes pour les deux modes.</span><span class="sxs-lookup"><span data-stu-id="76f90-168">Aside from this difference of who manages the MEK and the Key Vault instance in which it resides, the rest of the design is the same for both modes.</span></span>

<span data-ttu-id="76f90-169">Il est important de se rappeler ce qui suit lors du choix du mode des clés de chiffrement principales :</span><span class="sxs-lookup"><span data-stu-id="76f90-169">It's important to remember the following when you choose the mode for the master encryption keys:</span></span>

*   <span data-ttu-id="76f90-170">Vous pouvez choisir d’utiliser des clés gérées par le client ou des clés gérées par le service au moment de la configuration d’un compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-170">You can choose whether to use customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="76f90-171">Une fois qu’un compte Data Lake Store a été configuré, le mode ne peut pas être modifié.</span><span class="sxs-lookup"><span data-stu-id="76f90-171">After a Data Lake Store account is provisioned, the mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="76f90-172">Chiffrement et déchiffrement des données</span><span class="sxs-lookup"><span data-stu-id="76f90-172">Encryption and decryption of data</span></span>

<span data-ttu-id="76f90-173">Trois types de clés sont utilisées dans la conception du chiffrement des données.</span><span class="sxs-lookup"><span data-stu-id="76f90-173">There are three types of keys that are used in the design of data encryption.</span></span> <span data-ttu-id="76f90-174">Le tableau suivant présente une synthèse :</span><span class="sxs-lookup"><span data-stu-id="76f90-174">The following table provides a summary:</span></span>

| <span data-ttu-id="76f90-175">Clé</span><span class="sxs-lookup"><span data-stu-id="76f90-175">Key</span></span>                   | <span data-ttu-id="76f90-176">Abréviation</span><span class="sxs-lookup"><span data-stu-id="76f90-176">Abbreviation</span></span> | <span data-ttu-id="76f90-177">Associée à</span><span class="sxs-lookup"><span data-stu-id="76f90-177">Associated with</span></span> | <span data-ttu-id="76f90-178">Emplacement de stockage</span><span class="sxs-lookup"><span data-stu-id="76f90-178">Storage location</span></span>                             | <span data-ttu-id="76f90-179">Type</span><span class="sxs-lookup"><span data-stu-id="76f90-179">Type</span></span>       | <span data-ttu-id="76f90-180">Remarques</span><span class="sxs-lookup"><span data-stu-id="76f90-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="76f90-181">Clé de chiffrement principale</span><span class="sxs-lookup"><span data-stu-id="76f90-181">Master Encryption Key</span></span> | <span data-ttu-id="76f90-182">MEK</span><span class="sxs-lookup"><span data-stu-id="76f90-182">MEK</span></span>          | <span data-ttu-id="76f90-183">Compte Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-183">A Data Lake Store account</span></span> | <span data-ttu-id="76f90-184">Key Vault</span><span class="sxs-lookup"><span data-stu-id="76f90-184">Key Vault</span></span>                              | <span data-ttu-id="76f90-185">Asymétrique</span><span class="sxs-lookup"><span data-stu-id="76f90-185">Asymmetric</span></span> | <span data-ttu-id="76f90-186">Peut être gérée par Data Lake Store ou par vous.</span><span class="sxs-lookup"><span data-stu-id="76f90-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="76f90-187">Clé de chiffrement des données</span><span class="sxs-lookup"><span data-stu-id="76f90-187">Data Encryption Key</span></span>   | <span data-ttu-id="76f90-188">DEK</span><span class="sxs-lookup"><span data-stu-id="76f90-188">DEK</span></span>          | <span data-ttu-id="76f90-189">Compte Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-189">A Data Lake Store account</span></span> | <span data-ttu-id="76f90-190">Stockage permanent, géré par le service Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="76f90-191">Symétrique</span><span class="sxs-lookup"><span data-stu-id="76f90-191">Symmetric</span></span>  | <span data-ttu-id="76f90-192">La DEK est chiffrée par la MEK.</span><span class="sxs-lookup"><span data-stu-id="76f90-192">The DEK is encrypted by the MEK.</span></span> <span data-ttu-id="76f90-193">La DEK chiffrée est stockée sur un support permanent.</span><span class="sxs-lookup"><span data-stu-id="76f90-193">The encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="76f90-194">Clé de chiffrement de bloc</span><span class="sxs-lookup"><span data-stu-id="76f90-194">Block Encryption Key</span></span>  | <span data-ttu-id="76f90-195">BEK</span><span class="sxs-lookup"><span data-stu-id="76f90-195">BEK</span></span>          | <span data-ttu-id="76f90-196">Un bloc de données</span><span class="sxs-lookup"><span data-stu-id="76f90-196">A block of data</span></span> | <span data-ttu-id="76f90-197">Aucun</span><span class="sxs-lookup"><span data-stu-id="76f90-197">None</span></span>                                         | <span data-ttu-id="76f90-198">Symétrique</span><span class="sxs-lookup"><span data-stu-id="76f90-198">Symmetric</span></span>  | <span data-ttu-id="76f90-199">La BEK est dérivée de la DEK et du bloc de données.</span><span class="sxs-lookup"><span data-stu-id="76f90-199">The BEK is derived from the DEK and the data block.</span></span>                                                      |

<span data-ttu-id="76f90-200">Le schéma suivant illustre ces concepts :</span><span class="sxs-lookup"><span data-stu-id="76f90-200">The following diagram illustrates these concepts:</span></span>

![Clés dans le chiffrement des données](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-to-be-decrypted"></a><span data-ttu-id="76f90-202">Pseudo-algorithme lorsqu’un fichier doit être déchiffré :</span><span class="sxs-lookup"><span data-stu-id="76f90-202">Pseudo algorithm when a file is to be decrypted:</span></span>
1.  <span data-ttu-id="76f90-203">Vérifiez si la DEK du compte Data Lake Store est mise en cache et prête à être utilisée.</span><span class="sxs-lookup"><span data-stu-id="76f90-203">Check if the DEK for the Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="76f90-204">Si ce n’est pas le cas, lisez alors la DEK chiffrée à partir d’un stockage permanent et envoyez-la vers Key Vault pour être déchiffrée.</span><span class="sxs-lookup"><span data-stu-id="76f90-204">If not, then read the encrypted DEK from persistent storage, and send it to Key Vault to be decrypted.</span></span> <span data-ttu-id="76f90-205">Mettez la DEK déchiffrée en mémoire cache.</span><span class="sxs-lookup"><span data-stu-id="76f90-205">Cache the decrypted DEK in memory.</span></span> <span data-ttu-id="76f90-206">Elle est maintenant prête à utiliser.</span><span class="sxs-lookup"><span data-stu-id="76f90-206">It is now ready to use.</span></span>
2.  <span data-ttu-id="76f90-207">Pour chaque bloc de données du fichier :</span><span class="sxs-lookup"><span data-stu-id="76f90-207">For every block of data in the file:</span></span>
    - <span data-ttu-id="76f90-208">Lire le bloc de données chiffré sur un stockage permanent.</span><span class="sxs-lookup"><span data-stu-id="76f90-208">Read the encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="76f90-209">Générer la BEK à partir de la DEK et du bloc de données chiffré.</span><span class="sxs-lookup"><span data-stu-id="76f90-209">Generate the BEK from the DEK and the encrypted block of data.</span></span>
    - <span data-ttu-id="76f90-210">Utiliser la BEK pour déchiffrer des données.</span><span class="sxs-lookup"><span data-stu-id="76f90-210">Use the BEK to decrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-to-be-encrypted"></a><span data-ttu-id="76f90-211">Pseudo-algorithme lorsqu’un bloc de données doit être chiffré :</span><span class="sxs-lookup"><span data-stu-id="76f90-211">Pseudo algorithm when a block of data is to be encrypted:</span></span>
1.  <span data-ttu-id="76f90-212">Vérifiez si la DEK du compte Data Lake Store est mise en cache et prête à être utilisée.</span><span class="sxs-lookup"><span data-stu-id="76f90-212">Check if the DEK for the Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="76f90-213">Si ce n’est pas le cas, lisez alors la DEK chiffrée à partir d’un stockage permanent et envoyez-la vers Key Vault pour être déchiffrée.</span><span class="sxs-lookup"><span data-stu-id="76f90-213">If not, then read the encrypted DEK from persistent storage, and send it to Key Vault to be decrypted.</span></span> <span data-ttu-id="76f90-214">Mettez la DEK déchiffrée en mémoire cache.</span><span class="sxs-lookup"><span data-stu-id="76f90-214">Cache the decrypted DEK in memory.</span></span> <span data-ttu-id="76f90-215">Elle est maintenant prête à utiliser.</span><span class="sxs-lookup"><span data-stu-id="76f90-215">It is now ready to use.</span></span>
2.  <span data-ttu-id="76f90-216">Générez une BEK unique pour le bloc de données à partir de la DEK.</span><span class="sxs-lookup"><span data-stu-id="76f90-216">Generate a unique BEK for the block of data from the DEK.</span></span>
3.  <span data-ttu-id="76f90-217">Chiffrez le bloc de données avec la BEK à l’aide du chiffrement AES-256.</span><span class="sxs-lookup"><span data-stu-id="76f90-217">Encrypt the data block with the BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="76f90-218">Stockez le bloc de données chiffré sur un stockage permanent.</span><span class="sxs-lookup"><span data-stu-id="76f90-218">Store the encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="76f90-219">Pour des raisons de performances, la DEK est temporairement mise en mémoire cache, puis est immédiatement effacée.</span><span class="sxs-lookup"><span data-stu-id="76f90-219">For performance reasons, the DEK in the clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="76f90-220">Sur un support permanent, elle est toujours stockée chiffrée par la MEK.</span><span class="sxs-lookup"><span data-stu-id="76f90-220">On persistent media, it is always stored encrypted by the MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="76f90-221">Rotation des clés</span><span class="sxs-lookup"><span data-stu-id="76f90-221">Key rotation</span></span>

<span data-ttu-id="76f90-222">Lorsque vous utilisez des clés gérées par le client, vous pouvez effectuer une rotation de la MEK.</span><span class="sxs-lookup"><span data-stu-id="76f90-222">When you are using customer-managed keys, you can rotate the MEK.</span></span> <span data-ttu-id="76f90-223">Pour savoir comment configurer un compte Data Lake Store avec des clés gérées par le client, consultez [Prise en main](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="76f90-223">To learn how to set up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="76f90-224">Composants requis</span><span class="sxs-lookup"><span data-stu-id="76f90-224">Prerequisites</span></span>

<span data-ttu-id="76f90-225">Lorsque vous avez configuré le compte Data Lake Store, vous avez choisi d’utiliser vos propres clés.</span><span class="sxs-lookup"><span data-stu-id="76f90-225">When you set up the Data Lake Store account, you have chosen to use your own keys.</span></span> <span data-ttu-id="76f90-226">Cette option ne peut pas être modifiée une fois le compte créé.</span><span class="sxs-lookup"><span data-stu-id="76f90-226">This option cannot be changed after the account has been created.</span></span> <span data-ttu-id="76f90-227">Les étapes ci-dessous supposent que vous utilisez des clés gérées par le client (c’est-à-dire que vous avez choisi vos propres clés dans Key Vault).</span><span class="sxs-lookup"><span data-stu-id="76f90-227">The following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="76f90-228">Notez que si vous utilisez les options par défaut pour le chiffrement, vos données seront toujours chiffrées à l’aide des clés gérées par Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-228">Note that if you use the default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="76f90-229">Dans cette option, vous ne pouvez pas effectuer une rotation des clés, car elles sont gérées par Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="76f90-229">In this option, you don't have the ability to rotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-to-rotate-the-mek-in-data-lake-store"></a><span data-ttu-id="76f90-230">Comment effectuer une rotation de la MEK dans Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="76f90-230">How to rotate the MEK in Data Lake Store</span></span>

1. <span data-ttu-id="76f90-231">Connectez-vous au [portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="76f90-231">Sign in to the [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="76f90-232">Accédez à l’instance Key Vault dans laquelle sont stockées vos clés associées à votre compte Data Lake Store, puis sélectionnez des clés.</span><span class="sxs-lookup"><span data-stu-id="76f90-232">Browse to the Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="76f90-233">Sélectionner **Clés**.</span><span class="sxs-lookup"><span data-stu-id="76f90-233">Select **Keys**.</span></span>

    ![Capture d’écran de Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="76f90-235">Sélectionnez la clé associée à votre compte Data Lake Store et créez une nouvelle version de cette clé.</span><span class="sxs-lookup"><span data-stu-id="76f90-235">Select the key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="76f90-236">Notez que pour le moment Data Lake Store prend uniquement en charge la rotation des clés vers une nouvelle version d’une clé.</span><span class="sxs-lookup"><span data-stu-id="76f90-236">Note that Data Lake Store currently only supports key rotation to a new version of a key.</span></span> <span data-ttu-id="76f90-237">Il ne prend en charge la rotation vers une autre clé.</span><span class="sxs-lookup"><span data-stu-id="76f90-237">It doesn't support rotating to a different key.</span></span>

   ![Capture d’écran de la fenêtre Clés, avec Nouvelle version en surbrillance](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="76f90-239">Accédez au compte de stockage Data Lake Store et sélectionnez **Chiffrement**.</span><span class="sxs-lookup"><span data-stu-id="76f90-239">Browse to the Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Capture d’écran de la fenêtre du compte de stockage Data Lake Store, avec Chiffrement en surbrillance](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="76f90-241">Un message vous informe qu’une nouvelle version de clé de la clé est disponible.</span><span class="sxs-lookup"><span data-stu-id="76f90-241">A message notifies you that a new key version of the key is available.</span></span> <span data-ttu-id="76f90-242">Cliquez sur **Rotation de clé** pour mettre à jour la clé vers la nouvelle version.</span><span class="sxs-lookup"><span data-stu-id="76f90-242">Click **Rotate Key** to update the key to the new version.</span></span>

    ![Capture d’écran de la fenêtre Data Lake Store avec le message et Rotation de clé en surbrillance](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="76f90-244">Cette opération doit prendre moins de deux minutes et aucune interruption de service due à la rotation des clés n’est attendue.</span><span class="sxs-lookup"><span data-stu-id="76f90-244">This operation should take less than two minutes, and there is no expected downtime due to key rotation.</span></span> <span data-ttu-id="76f90-245">Une fois l’opération terminée, la nouvelle version de la clé est utilisée.</span><span class="sxs-lookup"><span data-stu-id="76f90-245">After the operation is complete, the new version of the key is in use.</span></span>
