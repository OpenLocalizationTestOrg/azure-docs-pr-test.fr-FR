---
title: "Utiliser le portail Azure pour créer des clusters Azure HDInsight avec Data Lake Store | Microsoft Docs"
description: "Utiliser le portail Azure pour créer et utiliser les clusters HDInsight avec Azure Data Lake Store"
services: data-lake-store,hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: a8c45a83-a8e3-4227-8b02-1bc1e1de6767
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 08/14/2017
ms.author: nitinme
ms.openlocfilehash: 9dd56efb89e07ea61ae431d1ea2accd721cd6502
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="create-hdinsight-clusters-with-data-lake-store-by-using-the-azure-portal"></a><span data-ttu-id="b640e-103">Créer des clusters HDInsight avec Data Lake Store à l'aide du portail Azure</span><span class="sxs-lookup"><span data-stu-id="b640e-103">Create HDInsight clusters with Data Lake Store by using the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="b640e-104">Utiliser le portail Azure</span><span class="sxs-lookup"><span data-stu-id="b640e-104">Use the Azure portal</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
> * [<span data-ttu-id="b640e-105">Utiliser PowerShell (pour le stockage par défaut)</span><span class="sxs-lookup"><span data-stu-id="b640e-105">Use PowerShell (for default storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell-for-default-storage.md)
> * [<span data-ttu-id="b640e-106">Utiliser PowerShell (pour le stockage supplémentaire)</span><span class="sxs-lookup"><span data-stu-id="b640e-106">Use PowerShell (for additional storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)
> * [<span data-ttu-id="b640e-107">Utiliser Resource Manager</span><span class="sxs-lookup"><span data-stu-id="b640e-107">Use Resource Manager</span></span>](data-lake-store-hdinsight-hadoop-use-resource-manager-template.md)
>
>

<span data-ttu-id="b640e-108">Découvrez comment utiliser le portail Azure pour créer un cluster HDInsight avec un compte Azure Data Lake Store en tant que stockage par défaut ou stockage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="b640e-108">Learn how to use the Azure portal to create a HDInsight cluster with an Azure Data Lake Store account as the default storage or an additional storage.</span></span> <span data-ttu-id="b640e-109">Bien que le stockage supplémentaire soit facultatif pour les clusters HDInsight, il est recommandé de stocker vos données d’entreprise dans les comptes de stockage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="b640e-109">Even though additional storage is optional for a HDInsight cluster, it is recommended to store your business data in the additional storage accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b640e-110">Composants requis</span><span class="sxs-lookup"><span data-stu-id="b640e-110">Prerequisites</span></span>
<span data-ttu-id="b640e-111">Avant de commencer le didacticiel, veillez à ce que vos mots de passe répondent aux exigences suivantes :</span><span class="sxs-lookup"><span data-stu-id="b640e-111">Before you begin this tutorial, ensure that you've met the following requirements:</span></span>

* <span data-ttu-id="b640e-112">**Un abonnement Azure**.</span><span class="sxs-lookup"><span data-stu-id="b640e-112">**An Azure subscription**.</span></span> <span data-ttu-id="b640e-113">Consultez [Créez votre compte Azure gratuit](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="b640e-113">Go to [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="b640e-114">**Un compte Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="b640e-114">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="b640e-115">Suivez les instructions indiquées dans [Prise en main d’Azure Data Lake Store avec le portail Azure](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b640e-115">Follow the instructions from [Get started with Azure Data Lake Store by using the Azure portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="b640e-116">Vous devez également créer un dossier racine sur le compte.</span><span class="sxs-lookup"><span data-stu-id="b640e-116">You must also create a root folder on the account.</span></span>  <span data-ttu-id="b640e-117">Dans ce didacticiel, un dossier racine appelé __/clusters__ est utilisé.</span><span class="sxs-lookup"><span data-stu-id="b640e-117">In this tutorial, a root folder called __/clusters__ is used.</span></span>
* <span data-ttu-id="b640e-118">**Un principal de service Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="b640e-118">**An Azure Active Directory service principal**.</span></span> <span data-ttu-id="b640e-119">Ce didacticiel montre comment créer un principal de service dans Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="b640e-119">This tutorial provides instructions on how to create a service principal in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="b640e-120">Toutefois, vous devez être administrateur Azure AD pour pouvoir créer un principal du service.</span><span class="sxs-lookup"><span data-stu-id="b640e-120">However, to create a service principal, you must be an Azure AD administrator.</span></span> <span data-ttu-id="b640e-121">Si vous êtes administrateur, vous pouvez ignorer ce prérequis et poursuivre le didacticiel.</span><span class="sxs-lookup"><span data-stu-id="b640e-121">If you are an administrator, you can skip this prerequisite and proceed with the tutorial.</span></span>

    >[!NOTE]
    ><span data-ttu-id="b640e-122">Vous pouvez créer un principal de service uniquement si vous être administrateur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b640e-122">You can create a service principal only if you are an Azure AD administrator.</span></span> <span data-ttu-id="b640e-123">Votre administrateur Azure AD doit créer un principal de service. Vous pouvez ensuite créer un cluster HDInsight avec Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-123">Your Azure AD administrator must create a service principal before you can create an HDInsight cluster with Data Lake Store.</span></span> <span data-ttu-id="b640e-124">En outre, le principal de service doit être créé à l’aide d’un certificat, comme décrit dans [Créer un principal du service avec un certificat](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span><span class="sxs-lookup"><span data-stu-id="b640e-124">Also, the service principal must be created with a certificate, as described at [Create a service principal with certificate](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span></span>
    >

## <a name="create-an-hdinsight-cluster"></a><span data-ttu-id="b640e-125">Création d'un cluster HDInsight</span><span class="sxs-lookup"><span data-stu-id="b640e-125">Create an HDInsight cluster</span></span>

<span data-ttu-id="b640e-126">Dans cette section, vous allez créer un cluster HDInsight avec des comptes Data Lake Store comme stockage par défaut ou stockage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="b640e-126">In this section, you create a HDInsight cluster with Data Lake Store accounts as the default or the additional storage.</span></span> <span data-ttu-id="b640e-127">Cet article traite uniquement de la configuration des comptes Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-127">This article only focuses the part of configuring Data Lake Store accounts.</span></span>  <span data-ttu-id="b640e-128">Pour obtenir des informations générales sur la création de clusters et les procédures associées, consultez la page [Création de clusters Hadoop dans HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="b640e-128">For the general cluster creation information and procedures, see [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span>

### <a name="create-a-cluster-with-data-lake-store-as-default-storage"></a><span data-ttu-id="b640e-129">Création d’un cluster avec Data Lake Store en tant que stockage par défaut</span><span class="sxs-lookup"><span data-stu-id="b640e-129">Create a cluster with Data Lake Store as default storage</span></span>

<span data-ttu-id="b640e-130">**Créer un cluster HDInsight avec Data Lake Store comme compte de stockage par défaut**</span><span class="sxs-lookup"><span data-stu-id="b640e-130">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="b640e-131">Connectez-vous au [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b640e-131">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="b640e-132">Suivez les indications présentées dans [Créer des clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) pour obtenir des informations générales sur la création de clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b640e-132">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="b640e-133">Sur le panneau **Stockage**, sous **Type de stockage principal**, sélectionnez **Data Lake Store**, puis entrez les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="b640e-133">On the **Storage** blade, under **Primary storage type**, select **Data Lake Store**, and then enter the following information:</span></span>

    <span data-ttu-id="b640e-134">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-134">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="b640e-135">**Sélectionner un compte Data Lake Store** : sélectionnez un compte Data Lake Store existant.</span><span class="sxs-lookup"><span data-stu-id="b640e-135">**Select Data Lake Store account**: Select an existing Data Lake Store account.</span></span> <span data-ttu-id="b640e-136">Un compte Data Lake Store existant est requis.</span><span class="sxs-lookup"><span data-stu-id="b640e-136">An existing Data Lake Store account is required.</span></span>  <span data-ttu-id="b640e-137">Consultez les [Conditions préalables](#prereuisites).</span><span class="sxs-lookup"><span data-stu-id="b640e-137">See [Prerequisites](#prereuisites).</span></span>
    - <span data-ttu-id="b640e-138">**Chemin racine** : entrez un chemin d’accès où les fichiers spécifiques d’un cluster doivent être stockés.</span><span class="sxs-lookup"><span data-stu-id="b640e-138">**Root path**: Enter a path where the cluster-specific files are to be stored.</span></span> <span data-ttu-id="b640e-139">Sur la capture d’écran, il s’agit de __/clusters/myhdiadlcluster/__, qui doit comporter le dossier __/clusters__. Le portail crée alors un dossier *myhdicluster*.</span><span class="sxs-lookup"><span data-stu-id="b640e-139">On the screenshot, it is __/clusters/myhdiadlcluster/__, in which the __/clusters__ folder must exist, and the Portal creates *myhdicluster* folder.</span></span>  <span data-ttu-id="b640e-140">*myhdicluster* désigne le nom du cluster.</span><span class="sxs-lookup"><span data-stu-id="b640e-140">The *myhdicluster* is the cluster name.</span></span>
    - <span data-ttu-id="b640e-141">**Accès à Data Lake Store** : configurez l’accès entre le compte Data Lake Store et le cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b640e-141">**Data Lake Store access**: Configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="b640e-142">Pour obtenir des instructions, consultez [Configurer l’accès aux données Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="b640e-142">For instructions, see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>
    - <span data-ttu-id="b640e-143">**Comptes de stockage supplémentaire** : ajoutez des comptes de stockage Azure en tant que comptes de stockage supplémentaire pour le cluster.</span><span class="sxs-lookup"><span data-stu-id="b640e-143">**Additional storage accounts**: Add Azure Storage Accounts as additional storage accounts for the cluster.</span></span> <span data-ttu-id="b640e-144">Pour ajouter d’autres magasins Data Lake Store, attribuez des autorisations de cluster sur les données de plusieurs comptes Data Lake Store lors de la configuration d’un compte Data Lake Store comme type de stockage principal.</span><span class="sxs-lookup"><span data-stu-id="b640e-144">To add additional Data Lake Stores is done by giving the cluster permissions on data in more Data Lake Store accounts while configuring a Data Lake Store account as the primary storage type.</span></span> <span data-ttu-id="b640e-145">Consultez [Configurer l’accès à Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="b640e-145">See [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

4. <span data-ttu-id="b640e-146">Cliquez sur **Sélectionner** dans les panneaux **Accès à Data Lake Store** et poursuivez la création du cluster comme décrit dans [Création de clusters Hadoop dans HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span><span class="sxs-lookup"><span data-stu-id="b640e-146">On the **Data Lake Store access**, click **Select**, and then continue with cluster creation as described in [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span></span>


### <a name="create-a-cluster-with-data-lake-store-as-additional-storage"></a><span data-ttu-id="b640e-147">Création d’un cluster avec Data Lake Store en tant que stockage supplémentaire</span><span class="sxs-lookup"><span data-stu-id="b640e-147">Create a cluster with Data Lake Store as additional storage</span></span>

<span data-ttu-id="b640e-148">Procédez comme suit pour créer un cluster HDInsight avec un compte de stockage Azure en tant que stockage par défaut, et un compte Data Lake Store en tant que stockage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="b640e-148">The following instructions create a HDInsight cluster with an Azure Storage account as the default storage, and a Data Lake Store account as an additional storage.</span></span>
<span data-ttu-id="b640e-149">**Créer un cluster HDInsight avec Data Lake Store comme compte de stockage par défaut**</span><span class="sxs-lookup"><span data-stu-id="b640e-149">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="b640e-150">Connectez-vous au [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="b640e-150">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="b640e-151">Suivez les indications présentées dans [Créer des clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) pour obtenir des informations générales sur la création de clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b640e-151">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="b640e-152">Sur le panneau **Stockage**, sous **Type de stockage principal**, sélectionnez **Stockage Azure**, puis entrez les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="b640e-152">On the **Storage** blade, under **Primary storage type**, select **Azure Storage**, and then enter the following information:</span></span>

    <span data-ttu-id="b640e-153">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-153">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="b640e-154">**Méthode de sélection** : utilisez l’une des options suivantes :</span><span class="sxs-lookup"><span data-stu-id="b640e-154">**Selection method**: use one of the following options:</span></span>

        * <span data-ttu-id="b640e-155">Pour spécifier un compte de stockage qui fait partie de votre abonnement Azure, sélectionnez **Mes abonnements**, puis le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b640e-155">To specify a storage account that is part of your Azure subscription, select **My subscriptions**, and then select the storage account.</span></span>
        * <span data-ttu-id="b640e-156">Pour spécifier un compte de stockage qui est en dehors de votre abonnement Azure, sélectionnez **Clé d’accès**, puis fournissez les informations du compte de stockage externe.</span><span class="sxs-lookup"><span data-stu-id="b640e-156">To specify a storage account that is outside your Azure subscription, select **Access key**, and then provide the information for the outside storage account.</span></span>

    - <span data-ttu-id="b640e-157">**Conteneur par défaut** : utilisez la valeur par défaut ou spécifiez votre propre nom.</span><span class="sxs-lookup"><span data-stu-id="b640e-157">**Default container**: use either the default value or specify your own name.</span></span>

    - <span data-ttu-id="b640e-158">Comptes de stockage supplémentaire : ajoutez des comptes de stockage Azure en tant que stockage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="b640e-158">Additional Storage accounts: add more Azure Storage accounts as the additional storage.</span></span>
    - <span data-ttu-id="b640e-159">Accès à Data Lake Store : configurez l’accès entre le compte Data Lake Store et le cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b640e-159">Data Lake Store access: configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="b640e-160">Pour obtenir des instructions, consultez [Configurer l’accès aux données Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="b640e-160">For instructions see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

## <a name="configure-data-lake-store-access"></a><span data-ttu-id="b640e-161">Configurer l’accès aux données Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b640e-161">Configure Data Lake Store access</span></span> 

<span data-ttu-id="b640e-162">Dans cette section, vous configurez l’accès à Data Lake Store à partir des clusters HDInsight au moyen d’un principal du service Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b640e-162">In this section, you configure Data Lake Store access from HDInsight clusters using an Azure Active Directory service principal.</span></span> 

### <a name="specify-a-service-principal"></a><span data-ttu-id="b640e-163">Spécifier un principal du service</span><span class="sxs-lookup"><span data-stu-id="b640e-163">Specify a service principal</span></span>

<span data-ttu-id="b640e-164">Dans le portail Azure, vous pouvez utiliser un principal du service existant ou en créer un.</span><span class="sxs-lookup"><span data-stu-id="b640e-164">From the Azure portal, you can either use an existing service principal or create a new one.</span></span>

<span data-ttu-id="b640e-165">**Créer un principal du service dans le portail Azure**</span><span class="sxs-lookup"><span data-stu-id="b640e-165">**To create a service principal from the Azure portal**</span></span>

1. <span data-ttu-id="b640e-166">Cliquez sur **Accès à Data Lake Store** à partir du panneau Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-166">Click **Data Lake Store access** from the Store blade.</span></span>
2. <span data-ttu-id="b640e-167">Sur le panneau **Accès à Data Lake Store**, cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="b640e-167">On the **Data Lake Store access** blade, click **Create new**.</span></span>
3. <span data-ttu-id="b640e-168">Cliquez sur **Principal du service**, puis suivez les instructions pour créer un principal du service.</span><span class="sxs-lookup"><span data-stu-id="b640e-168">Click **Service Principal**, and then follow the instructions to create a service principal.</span></span>
4. <span data-ttu-id="b640e-169">Téléchargez le certificat si vous souhaitez l’utiliser à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="b640e-169">Download the certificate if you decide to use it again in the future.</span></span> <span data-ttu-id="b640e-170">Le téléchargement du certificat est utile si vous souhaitez utiliser le même principal de service lorsque vous allez créer des clusters HDInsight supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="b640e-170">Downloading the certificate is useful if you want to use the same service principal when you create additional HDInsight clusters.</span></span>

    <span data-ttu-id="b640e-171">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-171">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="b640e-172">Cliquez sur **Accès** pour configurer l’accès au dossier.</span><span class="sxs-lookup"><span data-stu-id="b640e-172">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="b640e-173">Reportez-vous à [Configurer les autorisations des fichiers](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="b640e-173">See [Configure file permissions](#configure-file-permissions).</span></span>


<span data-ttu-id="b640e-174">**Utiliser un principal du service existant dans le portail Azure**</span><span class="sxs-lookup"><span data-stu-id="b640e-174">**To use an existing service principal from the Azure portal**</span></span>

1. <span data-ttu-id="b640e-175">Cliquez sur **Accès à Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="b640e-175">Click **Data Lake Store access**.</span></span>
1. <span data-ttu-id="b640e-176">Dans le panneau **Accès à Data Lake Store**, cliquez sur **Utiliser existant**.</span><span class="sxs-lookup"><span data-stu-id="b640e-176">On the **Data Lake Store access** blade, click **Use existing**.</span></span>
2. <span data-ttu-id="b640e-177">Cliquez sur **Principal du service**, puis sélectionnez un principal du service.</span><span class="sxs-lookup"><span data-stu-id="b640e-177">Click **Service Principal**, and then select a service principal.</span></span> 
3. <span data-ttu-id="b640e-178">Chargez le certificat (fichier .pfx) associé au principal du service sélectionné, puis indiquez le mot de passe du certificat.</span><span class="sxs-lookup"><span data-stu-id="b640e-178">Upload the certificate (.pfx file) that's associated with your selected service principal, and then enter the certificate password.</span></span>

    <span data-ttu-id="b640e-179">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-179">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="b640e-180">Cliquez sur **Accès** pour configurer l’accès au dossier.</span><span class="sxs-lookup"><span data-stu-id="b640e-180">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="b640e-181">Reportez-vous à [Configurer les autorisations des fichiers](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="b640e-181">See [Configure file permissions](#configure-file-permissions).</span></span>


### <span data-ttu-id="b640e-182"><a name="configure-file-permissions"></a>Configurer les autorisations des fichiers</span><span class="sxs-lookup"><span data-stu-id="b640e-182"><a name="configure-file-permissions"></a>Configure file permissions</span></span>

<span data-ttu-id="b640e-183">La configuration diffère selon que le compte est utilisé en tant que compte de stockage par défaut ou compte de stockage supplémentaire :</span><span class="sxs-lookup"><span data-stu-id="b640e-183">The configures are different depending on whether the account is used as the default storage or an additional storage account:</span></span>

- <span data-ttu-id="b640e-184">Utilisation en tant que stockage par défaut</span><span class="sxs-lookup"><span data-stu-id="b640e-184">Used as default storage</span></span>

    - <span data-ttu-id="b640e-185">Autorisation au niveau racine du compte Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b640e-185">permission at the root level of the Data Lake Store account</span></span>
    - <span data-ttu-id="b640e-186">Autorisation au niveau racine du stockage de cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b640e-186">permission at the root level of the HDInsight cluster storage.</span></span> <span data-ttu-id="b640e-187">Exemple : dossier __/clusters__ utilisé précédemment dans le didacticiel.</span><span class="sxs-lookup"><span data-stu-id="b640e-187">For example, the __/clusters__ folder used earlier in the tutorial.</span></span>
- <span data-ttu-id="b640e-188">Utilisation en tant que stockage supplémentaire</span><span class="sxs-lookup"><span data-stu-id="b640e-188">Use as an additional storage</span></span>

    - <span data-ttu-id="b640e-189">Autorisation au niveau des dossiers pour lesquels vous avez besoin d’un accès aux fichiers.</span><span class="sxs-lookup"><span data-stu-id="b640e-189">Permission at the folders where you need file access.</span></span>

<span data-ttu-id="b640e-190">**Assigner des autorisations au niveau racine du compte Data Lake Store**</span><span class="sxs-lookup"><span data-stu-id="b640e-190">**To assign permission at the Data Lake Store account root level**</span></span>

1. <span data-ttu-id="b640e-191">Dans le panneau **Accès Data Lake Store**, cliquez sur **Accès**.</span><span class="sxs-lookup"><span data-stu-id="b640e-191">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="b640e-192">Le panneau **Sélectionner des autorisations de fichiers** s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="b640e-192">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="b640e-193">Il répertorie les comptes Data Lake Store dans votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="b640e-193">It lists all the Data Lake Store accounts in your subscription.</span></span>
2. <span data-ttu-id="b640e-194">Placez le pointeur de la souris (sans cliquer) sur le nom du compte Data Lake Store pour afficher la case à cocher, puis cochez cette case.</span><span class="sxs-lookup"><span data-stu-id="b640e-194">Hover (do not click) the mouse over the name of the Data Lake Store account to make the check box visible, then select the check box.</span></span>

    <span data-ttu-id="b640e-195">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-195">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Add service principal to HDInsight cluster")</span></span>

  <span data-ttu-id="b640e-196">Par défaut, __READ__, __WRITE__ ET __EXECUTE__ sont tous sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="b640e-196">By default, __READ__, __WRITE__, AND __EXECUTE__ are all selected.</span></span>

3. <span data-ttu-id="b640e-197">Cliquez sur **Sélectionner** en bas de la page.</span><span class="sxs-lookup"><span data-stu-id="b640e-197">Click **Select** on the bottom of the page.</span></span>
4. <span data-ttu-id="b640e-198">Cliquez sur **Exécuter** pour assigner des autorisations.</span><span class="sxs-lookup"><span data-stu-id="b640e-198">Click **Run** to assign permission.</span></span>
5. <span data-ttu-id="b640e-199">Cliquez sur **Done**.</span><span class="sxs-lookup"><span data-stu-id="b640e-199">Click **Done**.</span></span>

<span data-ttu-id="b640e-200">**Assigner des autorisations au niveau racine du cluster HDInsight**</span><span class="sxs-lookup"><span data-stu-id="b640e-200">**To assign permission at the HDInsight cluster root level**</span></span>

1. <span data-ttu-id="b640e-201">Dans le panneau **Accès Data Lake Store**, cliquez sur **Accès**.</span><span class="sxs-lookup"><span data-stu-id="b640e-201">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="b640e-202">Le panneau **Sélectionner des autorisations de fichiers** s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="b640e-202">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="b640e-203">Il répertorie les comptes Data Lake Store dans votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="b640e-203">It lists all the Data Lake Store accounts in your subscription.</span></span>
1. <span data-ttu-id="b640e-204">Dans le panneau **Sélectionner des autorisations de fichiers**, cliquez sur le nom du Data Lake Store pour afficher son contenu.</span><span class="sxs-lookup"><span data-stu-id="b640e-204">From the **Select file permissions** blade, click the Data Lake Store name to show its content.</span></span>
2. <span data-ttu-id="b640e-205">Sélectionnez la racine de stockage du cluster HDInsight en cochant la case située à gauche du dossier.</span><span class="sxs-lookup"><span data-stu-id="b640e-205">Select the HDInsight cluster storage root by selecting the checkbox on the left of the folder.</span></span> <span data-ttu-id="b640e-206">Comme indiqué sur la capture d’écran précédente, la racine de stockage du cluster est le dossier __/clusters__ que vous avez spécifié lors de la sélection de Data Lake Store comme stockage par défaut.</span><span class="sxs-lookup"><span data-stu-id="b640e-206">According to the screenshot earlier, the cluster storage root is __/clusters__ folder that you specified while selecting the Data Lake Store as default storage.</span></span>
3. <span data-ttu-id="b640e-207">Définissez les autorisations sur le dossier.</span><span class="sxs-lookup"><span data-stu-id="b640e-207">Set the permissions on the folder.</span></span>  <span data-ttu-id="b640e-208">Par défaut, les autorisations en lecture, écriture et exécution sont toutes sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="b640e-208">By default, read, write, and execute are all selected.</span></span>
4. <span data-ttu-id="b640e-209">Cliquez sur **Sélectionner** en bas de la page.</span><span class="sxs-lookup"><span data-stu-id="b640e-209">Click **Select** on the bottom of the page.</span></span>
5. <span data-ttu-id="b640e-210">Cliquez sur **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="b640e-210">Click **Run**.</span></span>
6. <span data-ttu-id="b640e-211">Cliquez sur **Done**.</span><span class="sxs-lookup"><span data-stu-id="b640e-211">Click **Done**.</span></span>

<span data-ttu-id="b640e-212">Si vous utilisez Data Lake Store en tant que stockage supplémentaire, vous devez assigner des autorisations uniquement pour les dossiers auxquels vous souhaitez accéder à partir du cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="b640e-212">If you are using Data Lake Store as additional storage, you must assign permission only for the folders that you want to access from the HDInsight cluster.</span></span> <span data-ttu-id="b640e-213">Par exemple, sur la capture d’écran ci-dessous, vous donnez uniquement accès au dossier **hdiaddonstorage** dans un compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-213">For example, in the screenshot below, you provide access only to **hdiaddonstorage** folder in a Data Lake Store account.</span></span>

<span data-ttu-id="b640e-214">![Affecter des autorisations de principal de service au cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Affecter des autorisations de principal de service au cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-214">![Assign service principal permissions to the HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assign service principal permissions to the HDInsight cluster")</span></span>


## <a name="verify-cluster-set-up"></a><span data-ttu-id="b640e-215">Vérification de la configuration de cluster</span><span class="sxs-lookup"><span data-stu-id="b640e-215">Verify cluster set up</span></span>

<span data-ttu-id="b640e-216">Une fois que l’installation du cluster est terminée, accédez au panneau du cluster pour vérifier vos résultats en effectuant l’une des opérations suivantes, ou les deux :</span><span class="sxs-lookup"><span data-stu-id="b640e-216">After the cluster setup is complete, on the cluster blade, verify your results by doing either or both of the following steps:</span></span>

* <span data-ttu-id="b640e-217">Pour vérifier que le stockage associé au cluster est le compte Data Lake Store que vous avez spécifié, cliquez sur **Comptes de stockage** dans le panneau gauche.</span><span class="sxs-lookup"><span data-stu-id="b640e-217">To verify that the associated storage for the cluster is the Data Lake Store account that you specified, click **Storage accounts** in the left pane.</span></span>

    <span data-ttu-id="b640e-218">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-218">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Add service principal to HDInsight cluster")</span></span>

* <span data-ttu-id="b640e-219">Pour vérifier que le principal de service est correctement associé au cluster HDInsight, cliquez sur **Accès à Data Lake Store** dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="b640e-219">To verify that the service principal is correctly associated with the HDInsight cluster, click **Data Lake Store access** in the left pane.</span></span>

    <span data-ttu-id="b640e-220">![Ajouter un principal du service à un cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Ajouter un principal du service à un cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="b640e-220">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Add service principal to HDInsight cluster")</span></span>


## <a name="examples"></a><span data-ttu-id="b640e-221">Exemples</span><span class="sxs-lookup"><span data-stu-id="b640e-221">Examples</span></span>

<span data-ttu-id="b640e-222">Une fois que vous avez configuré le cluster avec Data Lake Store comme stockage, voici quelques exemples de l’utilisation du cluster HDInsight pour analyser les données stockées dans Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-222">After you have set up the cluster with Data Lake Store as your storage, refer to these examples of how to use HDInsight cluster to analyze the data that's stored in Data Lake Store.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-primary-storage"></a><span data-ttu-id="b640e-223">Exécuter une requête Hive sur des données stockées dans Data Lake Store (comme stockage principal)</span><span class="sxs-lookup"><span data-stu-id="b640e-223">Run a Hive query against data in a Data Lake Store (as primary storage)</span></span>

<span data-ttu-id="b640e-224">Pour exécuter une requête Hive, utilisez l’interface des vues Hive du portail Ambari.</span><span class="sxs-lookup"><span data-stu-id="b640e-224">To run a Hive query, use the Hive views interface in the Ambari portal.</span></span> <span data-ttu-id="b640e-225">Pour obtenir des instructions sur l'utilisation des vues Hive Ambari, consultez [Utiliser la vue Hive avec Hadoop dans HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span><span class="sxs-lookup"><span data-stu-id="b640e-225">For instructions on how to use Ambari Hive views, see [Use the Hive View with Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span></span>

<span data-ttu-id="b640e-226">Lorsque vous utilisez les données dans Data Lake Store, quelques modifications doivent être apportées.</span><span class="sxs-lookup"><span data-stu-id="b640e-226">When you work with data in a Data Lake Store, there are a few strings to change.</span></span>

<span data-ttu-id="b640e-227">Si vous utilisez, par exemple, le cluster que vous avez créé avec Data Lake Store comme stockage principal, le chemin d’accès aux données est le suivant : *adl://<nom_compte_Data_Lake_Store>/azuredatalakestore.net/path/to/file*.</span><span class="sxs-lookup"><span data-stu-id="b640e-227">If you use, for example, the cluster that you created with Data Lake Store as primary storage, the path to the data is: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span></span> <span data-ttu-id="b640e-228">Une requête Hive permettant de créer une table à partir des exemples de données stockés dans le compte Data Lake Store ressemble à l’instruction suivante :</span><span class="sxs-lookup"><span data-stu-id="b640e-228">A Hive query to create a table from sample data that's stored in the Data Lake Store account looks like the following statement:</span></span>

    CREATE EXTERNAL TABLE websitelog (str string) LOCATION 'adl://hdiadlsstorage.azuredatalakestore.net/clusters/myhdiadlcluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/'

<span data-ttu-id="b640e-229">Descriptions :</span><span class="sxs-lookup"><span data-stu-id="b640e-229">Descriptions:</span></span>
* <span data-ttu-id="b640e-230">`adl://hdiadlstorage.azuredatalakestore.net/` est la racine du compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-230">`adl://hdiadlstorage.azuredatalakestore.net/` is the root of the Data Lake Store account.</span></span>
* <span data-ttu-id="b640e-231">`/clusters/myhdiadlcluster` est la racine des données du cluster que vous avez spécifiée lors de la création du cluster.</span><span class="sxs-lookup"><span data-stu-id="b640e-231">`/clusters/myhdiadlcluster` is the root of the cluster data that you specified while creating the cluster.</span></span>
* <span data-ttu-id="b640e-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` est l’emplacement de l’exemple de fichier que vous utilisez dans la requête.</span><span class="sxs-lookup"><span data-stu-id="b640e-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` is the location of the sample file that you used in the query.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-additional-storage"></a><span data-ttu-id="b640e-233">Exécuter une requête Hive sur des données dans Data Lake Store (comme stockage supplémentaire)</span><span class="sxs-lookup"><span data-stu-id="b640e-233">Run a Hive query against data in a Data Lake Store (as additional storage)</span></span>

<span data-ttu-id="b640e-234">Si le cluster que vous avez créé utilise Stockage Blob comme stockage par défaut, les exemples de données ne se trouvent pas dans le compte Azure Data Lake Store utilisé en tant que stockage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="b640e-234">If the cluster that you created uses Blob storage as default storage, the sample data is not contained in the Azure Data Lake Store account that's used as additional storage.</span></span> <span data-ttu-id="b640e-235">Dans ce cas, commencez par transférer les données de Stockage Blob vers Data Lake Store, puis exécutez les requêtes selon la procédure décrite ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="b640e-235">In such a case, first transfer the data from Blob storage to the Data Lake Store, and then run the queries as shown in the preceding example.</span></span>

<span data-ttu-id="b640e-236">Pour plus d’informations sur la copie de données de Stockage Blob vers Data Lake Store, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="b640e-236">For information on how to copy data from Blob storage to a Data Lake Store, see the following articles:</span></span>

* [<span data-ttu-id="b640e-237">Utiliser Distcp pour copier des données entre Stockage Blob Azure et Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b640e-237">Use Distcp to copy data between Azure Storage blobs and Data Lake Store</span></span>](data-lake-store-copy-data-wasb-distcp.md)
* [<span data-ttu-id="b640e-238">Copier des données de Stockage Blob Azure vers Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b640e-238">Use AdlCopy to copy data from Azure Storage blobs to Data Lake Store</span></span>](data-lake-store-copy-data-azure-storage-blob.md)

### <a name="use-data-lake-store-with-a-spark-cluster"></a><span data-ttu-id="b640e-239">Utiliser Data Lake Store avec un cluster Spark</span><span class="sxs-lookup"><span data-stu-id="b640e-239">Use Data Lake Store with a Spark cluster</span></span>
<span data-ttu-id="b640e-240">Vous pouvez utiliser un cluster Spark pour exécuter des tâches Spark sur des données stockées dans Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="b640e-240">You can use a Spark cluster to run Spark jobs on data that is stored in a Data Lake Store.</span></span> <span data-ttu-id="b640e-241">Pour plus d’informations, consultez [Utiliser le cluster HDInsight Spark pour analyser les données dans Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="b640e-241">For more information, see [Use HDInsight Spark cluster to analyze data in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span></span>


### <a name="use-data-lake-store-in-a-storm-topology"></a><span data-ttu-id="b640e-242">Utiliser Data Lake Store dans une topologie Storm</span><span class="sxs-lookup"><span data-stu-id="b640e-242">Use Data Lake Store in a Storm topology</span></span>
<span data-ttu-id="b640e-243">Vous pouvez utiliser le Data Lake Store pour écrire des données à partir d’une topologie Storm.</span><span class="sxs-lookup"><span data-stu-id="b640e-243">You can use the Data Lake Store to write data from a Storm topology.</span></span> <span data-ttu-id="b640e-244">Pour obtenir des instructions sur la réalisation de ce scénario, consultez [Utilisation d’Azure Data Lake Store avec Apache Storm sur HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="b640e-244">For instructions on how to achieve this scenario, see [Use Azure Data Lake Store with Apache Storm with HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="b640e-245">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b640e-245">See also</span></span>
* [<span data-ttu-id="b640e-246">PowerShell : Créer un cluster HDInsight pour utiliser Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="b640e-246">PowerShell: Create an HDInsight cluster to use Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)

[makecert]: https://msdn.microsoft.com/library/windows/desktop/ff548309(v=vs.85).aspx
[pvk2pfx]: https://msdn.microsoft.com/library/windows/desktop/ff550672(v=vs.85).aspx
