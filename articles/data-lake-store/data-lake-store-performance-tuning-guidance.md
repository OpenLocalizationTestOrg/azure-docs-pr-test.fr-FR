---
title: "aaaAzure instructions de réglage des performances données Lake Store | Documents Microsoft"
description: "Recommandations en matière d’optimisation des performances d’Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="83744-103">Paramétrage d’Azure Data Lake Store pour les performances</span><span class="sxs-lookup"><span data-stu-id="83744-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="83744-104">Data Lake Store prend en charge un débit élevé pour l’analyse intensive des E/S et le déplacement des données.</span><span class="sxs-lookup"><span data-stu-id="83744-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="83744-105">Dans Azure Data Lake Store, à l’aide de débit disponible : quantité de hello de données qui peuvent être lues ou écrites par seconde – est tooget importante des performances optimales hello.</span><span class="sxs-lookup"><span data-stu-id="83744-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="83744-106">Pour cela, il convient d’effectuer le plus possible de lectures et d’écritures en parallèle.</span><span class="sxs-lookup"><span data-stu-id="83744-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Performances de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="83744-108">Azure Data Lake Store peut évoluer tooprovide hello nécessaires de débit pour tout scénario d’analytique.</span><span class="sxs-lookup"><span data-stu-id="83744-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="83744-109">Par défaut, un compte Azure Data Lake Store fournit automatiquement suffisamment de débit besoins hello toomeet une vaste catégorie de cas d’usage.</span><span class="sxs-lookup"><span data-stu-id="83744-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="83744-110">Pour les cas de hello où les clients exécutent dans la limite par défaut hello, hello compte ADLS peut être configuré tooprovide plus grand débit en contactant le support technique de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="83744-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="83744-111">Ingestion de données</span><span class="sxs-lookup"><span data-stu-id="83744-111">Data ingestion</span></span>

<span data-ttu-id="83744-112">Lors de la réception des données à partir d’un tooADLS du système source, il est important de tooconsider qui hello matériel de la source, le matériel de réseau source et tooADLS de connectivité réseau peut être le goulet d’étranglement hello.</span><span class="sxs-lookup"><span data-stu-id="83744-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Performances de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="83744-114">Il est important de tooensure qui hello le déplacement des données n’est pas affectée par ces facteurs.</span><span class="sxs-lookup"><span data-stu-id="83744-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="83744-115">Matériel source</span><span class="sxs-lookup"><span data-stu-id="83744-115">Source Hardware</span></span>

<span data-ttu-id="83744-116">Si vous utilisez des ordinateurs locaux ou des machines virtuelles dans Azure, vous devez choisir avec soin matériel approprié de hello.</span><span class="sxs-lookup"><span data-stu-id="83744-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="83744-117">Pour le matériel du disque Source, préférez les disques SSD tooHDDs et choisir les disques physiques avec des piles de disques plus rapides.</span><span class="sxs-lookup"><span data-stu-id="83744-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="83744-118">Pour le matériel de réseau Source, utilisez possible de cartes réseau hello plus rapide.</span><span class="sxs-lookup"><span data-stu-id="83744-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="83744-119">Sur Azure, nous vous recommandons de machines virtuelles de D14 Azure qui présentent le disque correctement puissant de hello et matériel réseau.</span><span class="sxs-lookup"><span data-stu-id="83744-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="83744-120">Réseau de connectivité tooAzure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="83744-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="83744-121">Hello connectivité entre vos données sources et le magasin d’Azure Data Lake peut parfois être goulot d’étranglement hello.</span><span class="sxs-lookup"><span data-stu-id="83744-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="83744-122">Lorsque vos données sources sont locales, envisagez d’utiliser une liaison dédiée avec [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="83744-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="83744-123">Si vos données sources dans Azure, les performances de hello convient le mieux lorsque les données de salutation sont Bonjour même région Azure que hello Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="83744-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="83744-124">Configuration des outils d’ingestion des données pour une parallélisation maximale</span><span class="sxs-lookup"><span data-stu-id="83744-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="83744-125">Une fois que vous avez traité matériel de source de hello réseau et les goulots d’étranglement de la connectivité ci-dessus, vous êtes prêt tooconfigure vos outils de réception.</span><span class="sxs-lookup"><span data-stu-id="83744-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="83744-126">Hello tableau suivant résume les paramètres de clé hello pour plusieurs outils d’ingestion populaires et fournit détaillées de réglage des performances articles pour eux.</span><span class="sxs-lookup"><span data-stu-id="83744-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="83744-127">toolearn plus d’informations sur les outils toouse pour votre scénario, visitez ce [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="83744-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="83744-128">Outil</span><span class="sxs-lookup"><span data-stu-id="83744-128">Tool</span></span>               | <span data-ttu-id="83744-129">Paramètres</span><span class="sxs-lookup"><span data-stu-id="83744-129">Settings</span></span>     | <span data-ttu-id="83744-130">Détails supplémentaires</span><span class="sxs-lookup"><span data-stu-id="83744-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="83744-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="83744-131">Powershell</span></span>       | <span data-ttu-id="83744-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="83744-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="83744-133">Lien</span><span class="sxs-lookup"><span data-stu-id="83744-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="83744-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="83744-134">AdlCopy</span></span>    | <span data-ttu-id="83744-135">Unités Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="83744-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="83744-136">Lien</span><span class="sxs-lookup"><span data-stu-id="83744-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="83744-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="83744-137">DistCp</span></span>            | <span data-ttu-id="83744-138">-m (mappeur)</span><span class="sxs-lookup"><span data-stu-id="83744-138">-m (mapper)</span></span>   | [<span data-ttu-id="83744-139">Lien</span><span class="sxs-lookup"><span data-stu-id="83744-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="83744-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="83744-140">Azure Data Factory</span></span>| <span data-ttu-id="83744-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="83744-141">parallelCopies</span></span>    | [<span data-ttu-id="83744-142">Lien</span><span class="sxs-lookup"><span data-stu-id="83744-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="83744-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="83744-143">Sqoop</span></span>           | <span data-ttu-id="83744-144">fs.azure.block.size, -m (mappeur)</span><span class="sxs-lookup"><span data-stu-id="83744-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="83744-145">Lien</span><span class="sxs-lookup"><span data-stu-id="83744-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="83744-146">Structure de votre jeu de données</span><span class="sxs-lookup"><span data-stu-id="83744-146">Structure your data set</span></span>

<span data-ttu-id="83744-147">Lorsque les données stockées dans Data Lake Store, la taille du fichier hello, nombre de fichiers et la structure de dossiers ont un impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="83744-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="83744-148">Hello section suivante décrit les meilleures pratiques dans ces domaines.</span><span class="sxs-lookup"><span data-stu-id="83744-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="83744-149">Taille du fichier</span><span class="sxs-lookup"><span data-stu-id="83744-149">File size</span></span>

<span data-ttu-id="83744-150">En règle générale, les moteurs d’analytique comme HDInsight et Azure Data Lake Analytics affichent une surcharge par fichier.</span><span class="sxs-lookup"><span data-stu-id="83744-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="83744-151">Si vous stockez vos données sous forme de petits fichiers nombreux, cela peut nuire aux performances.</span><span class="sxs-lookup"><span data-stu-id="83744-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="83744-152">De manière générale, organisez vos données dans de grands fichiers pour des performances optimales.</span><span class="sxs-lookup"><span data-stu-id="83744-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="83744-153">Il convient d’organiser les jeux de données dans des fichiers de 256 Mo ou plus.</span><span class="sxs-lookup"><span data-stu-id="83744-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="83744-154">Dans certains cas, comme des images et des données binaires, il n’est pas possible de tooprocess leur en parallèle.</span><span class="sxs-lookup"><span data-stu-id="83744-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="83744-155">Dans ces cas, il est recommandé de tookeep des fichiers individuels moins de 2 Go.</span><span class="sxs-lookup"><span data-stu-id="83744-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="83744-156">Parfois, des pipelines de données ont un contrôle limité sur les données brutes hello qui possède un grand nombre de petits fichiers.</span><span class="sxs-lookup"><span data-stu-id="83744-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="83744-157">Il est recommandé de toohave un processus « cuisine » qui génère la plus grande fichiers toouse pour les applications en aval.</span><span class="sxs-lookup"><span data-stu-id="83744-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="83744-158">Organisation des données de série chronologique dans des dossiers</span><span class="sxs-lookup"><span data-stu-id="83744-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="83744-159">Pour les charges de travail Hive et ADLA, nettoyage de partition de données de série chronologique peut aider à certaines requêtes uniquement un sous-ensemble des données hello qui améliore les performances de lecture.</span><span class="sxs-lookup"><span data-stu-id="83744-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="83744-160">Ces pipelines d’ingestion des données de série chronologique, organisent souvent leurs fichiers selon une structure d’appellation très structurée pour les fichiers et les dossiers.</span><span class="sxs-lookup"><span data-stu-id="83744-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="83744-161">Découvrez ci-après un exemple très courant de données structurées par date :</span><span class="sxs-lookup"><span data-stu-id="83744-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="83744-162">Notez que les informations de date/heure hello apparaissent à la fois en tant que dossiers et nom de fichier hello.</span><span class="sxs-lookup"><span data-stu-id="83744-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="83744-163">Date et heure, hello Voici un modèle commun</span><span class="sxs-lookup"><span data-stu-id="83744-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="83744-164">Là encore, choix hello avec l’organisation de fichiers et de dossiers hello conseillé d’optimiser les tailles de fichiers supérieures hello et un nombre raisonnable de fichiers dans chaque dossier.</span><span class="sxs-lookup"><span data-stu-id="83744-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="83744-165">Optimisation des tâches à usage intensif d’E/S sur les charges de travail Hadoop et Spark sur HDInsight</span><span class="sxs-lookup"><span data-stu-id="83744-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="83744-166">Travaux se répartissent dans hello suivant trois catégories :</span><span class="sxs-lookup"><span data-stu-id="83744-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="83744-167">**Usage intensif du processeur.**</span><span class="sxs-lookup"><span data-stu-id="83744-167">**CPU intensive.**</span></span>  <span data-ttu-id="83744-168">Ces tâches nécessitent de longues heures de calcul avec un minimum de temps d’E/S.</span><span class="sxs-lookup"><span data-stu-id="83744-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="83744-169">L’exemple inclut les tâches de traitement en langage naturel et Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="83744-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="83744-170">**Utilisation intensive de la mémoire.**</span><span class="sxs-lookup"><span data-stu-id="83744-170">**Memory intensive.**</span></span>  <span data-ttu-id="83744-171">Ces tâches utilisent beaucoup de mémoire.</span><span class="sxs-lookup"><span data-stu-id="83744-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="83744-172">Exemples : PageRank et travaux d’analytique en temps réel.</span><span class="sxs-lookup"><span data-stu-id="83744-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="83744-173">**Usage intensif des E/S.**</span><span class="sxs-lookup"><span data-stu-id="83744-173">**I/O intensive.**</span></span>  <span data-ttu-id="83744-174">La plus grande partie du temps de ces tâches est consacrée aux E/S.</span><span class="sxs-lookup"><span data-stu-id="83744-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="83744-175">Exemple courant : tâche de copie qui ne traite que les opérations de lecture et écriture.</span><span class="sxs-lookup"><span data-stu-id="83744-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="83744-176">D’autres exemples incluent les travaux de préparation de données lire une grande quantité de données, effectue une transformation de données, et puis écritures hello magasin de données toohello précédent.</span><span class="sxs-lookup"><span data-stu-id="83744-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="83744-177">Hello suivant instructions est uniquement applicables travaux intensifs tooI/O.</span><span class="sxs-lookup"><span data-stu-id="83744-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="83744-178">Considérations générales pour les clusters HDInsight</span><span class="sxs-lookup"><span data-stu-id="83744-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="83744-179">**Versions HDInsight.**</span><span class="sxs-lookup"><span data-stu-id="83744-179">**HDInsight versions.**</span></span> <span data-ttu-id="83744-180">Pour de meilleures performances, utilisez hello dernière version de HDInsight.</span><span class="sxs-lookup"><span data-stu-id="83744-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="83744-181">**Régions.**</span><span class="sxs-lookup"><span data-stu-id="83744-181">**Regions.**</span></span> <span data-ttu-id="83744-182">Placez hello Data Lake Store Bonjour même région que le cluster HDInsight de hello.</span><span class="sxs-lookup"><span data-stu-id="83744-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="83744-183">Un cluster HDInsight est composé de deux nœuds principaux et de nœuds Worker.</span><span class="sxs-lookup"><span data-stu-id="83744-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="83744-184">Chaque nœud de travail fournit un nombre spécifique de cœurs et la mémoire, ce qui est déterminé par hello type d’ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="83744-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="83744-185">Lorsque vous exécutez une tâche, fils est négociateur de ressource hello qui alloue la mémoire disponible hello et conteneurs toocreate de cœurs.</span><span class="sxs-lookup"><span data-stu-id="83744-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="83744-186">Chaque conteneur s’exécute la tâche de hello hello tâches toocomplete nécessaires.</span><span class="sxs-lookup"><span data-stu-id="83744-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="83744-187">Conteneurs sont exécutés dans des tâches parallèles tooprocess rapidement.</span><span class="sxs-lookup"><span data-stu-id="83744-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="83744-188">Par conséquent, l’exécution du plus grand nombre possible de conteneurs en parallèle permet d’améliorer les performances.</span><span class="sxs-lookup"><span data-stu-id="83744-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="83744-189">Il existe trois couches au sein d’un cluster HDInsight qui peut être analysé tooincrease hello le nombre de conteneurs et utilisent débit toutes disponible.</span><span class="sxs-lookup"><span data-stu-id="83744-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="83744-190">**Couche physique**</span><span class="sxs-lookup"><span data-stu-id="83744-190">**Physical layer**</span></span>
* <span data-ttu-id="83744-191">**Couche YARN**</span><span class="sxs-lookup"><span data-stu-id="83744-191">**YARN layer**</span></span>
* <span data-ttu-id="83744-192">**Couche de charge de travail**</span><span class="sxs-lookup"><span data-stu-id="83744-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="83744-193">Couche physique</span><span class="sxs-lookup"><span data-stu-id="83744-193">Physical Layer</span></span>

<span data-ttu-id="83744-194">**Exécutez le cluster avec le plus de nœuds et/ou les plus grosses machines virtuelles.**</span><span class="sxs-lookup"><span data-stu-id="83744-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="83744-195">Un cluster plus grand activera vous toorun plusieurs conteneurs fils comme indiqué dans l’image hello ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="83744-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Performances de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="83744-197">**Utilisez des machines virtuelles avec davantage de bande passante réseau.**</span><span class="sxs-lookup"><span data-stu-id="83744-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="83744-198">bande passante Hello peut être un goulot d’étranglement s’il existe moins de bande passante réseau que le débit de Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="83744-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="83744-199">La taille de la bande passante réseau varie en fonction des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="83744-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="83744-200">Choisissez un type de machine virtuelle qui a hello plus grand possible la bande passante réseau.</span><span class="sxs-lookup"><span data-stu-id="83744-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="83744-201">Couche YARN</span><span class="sxs-lookup"><span data-stu-id="83744-201">YARN Layer</span></span>

<span data-ttu-id="83744-202">**Utilisez des conteneurs YARN plus petits.**</span><span class="sxs-lookup"><span data-stu-id="83744-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="83744-203">Réduire la taille de hello de chaque toocreate de conteneur fils plusieurs conteneurs avec hello même quantité de ressources.</span><span class="sxs-lookup"><span data-stu-id="83744-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Performances de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="83744-205">En fonction de votre charge de travail, il y aura toujours une taille de conteneur YARN minimale requise.</span><span class="sxs-lookup"><span data-stu-id="83744-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="83744-206">Si vous sélectionnez un conteneur trop petit, vos tâches rencontreront des problèmes de mémoire insuffisante.</span><span class="sxs-lookup"><span data-stu-id="83744-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="83744-207">En général, les conteneurs YARN ne doivent pas être inférieurs à 1 Go.</span><span class="sxs-lookup"><span data-stu-id="83744-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="83744-208">Il s’agit des conteneurs de fils de 3 Go toosee communs.</span><span class="sxs-lookup"><span data-stu-id="83744-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="83744-209">Pour certaines charges de travail, des conteneurs YARN plus grands peuvent être nécessaires.</span><span class="sxs-lookup"><span data-stu-id="83744-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="83744-210">**Augmentez le nombre de cœurs par conteneur YARN.**</span><span class="sxs-lookup"><span data-stu-id="83744-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="83744-211">Augmentez le nombre hello de cœurs alloué tooeach conteneur tooincrease hello nombre de tâches parallèles qui s’exécutent dans chaque conteneur.</span><span class="sxs-lookup"><span data-stu-id="83744-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="83744-212">Cela fonctionne pour des applications comme Spark qui exécutent plusieurs tâches par conteneur.</span><span class="sxs-lookup"><span data-stu-id="83744-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="83744-213">Pour les applications telles que la ruche qui exécutent un seul thread dans chaque conteneur, il est mieux toohave plusieurs conteneurs plutôt que davantage de cœurs par conteneur.</span><span class="sxs-lookup"><span data-stu-id="83744-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="83744-214">Couche de charge de travail</span><span class="sxs-lookup"><span data-stu-id="83744-214">Workload Layer</span></span>

<span data-ttu-id="83744-215">**Utilisez tous les conteneurs disponibles.**</span><span class="sxs-lookup"><span data-stu-id="83744-215">**Use all available containers.**</span></span>  <span data-ttu-id="83744-216">Définir nombre hello de tâches toobe égal ou supérieur au nombre de hello de conteneurs disponibles afin que toutes les ressources sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="83744-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Performances de Data Lake Store](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="83744-218">**L’échec des tâches est coûteux.**</span><span class="sxs-lookup"><span data-stu-id="83744-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="83744-219">Si chaque tâche possède une grande quantité de données tooprocess, échec d’une tâche entraîne une nouvelle tentative coûteuse.</span><span class="sxs-lookup"><span data-stu-id="83744-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="83744-220">Par conséquent, il est mieux toocreate davantage de tâches, chacun traitant une petite quantité de données.</span><span class="sxs-lookup"><span data-stu-id="83744-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="83744-221">Dans Ajout toohello indications ci-dessus, chaque application possède des paramètres différents de tootune disponibles pour cette application spécifique.</span><span class="sxs-lookup"><span data-stu-id="83744-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="83744-222">Hello ci-dessous répertorie certaines des hello tooget paramètres et des liens en main de réglage des performances pour chaque application.</span><span class="sxs-lookup"><span data-stu-id="83744-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="83744-223">Charge de travail</span><span class="sxs-lookup"><span data-stu-id="83744-223">Workload</span></span>               | <span data-ttu-id="83744-224">Tâches tooset de paramètre</span><span class="sxs-lookup"><span data-stu-id="83744-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="83744-225">Spark sur HDInsight</span><span class="sxs-lookup"><span data-stu-id="83744-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="83744-226">Num-executors</span><span class="sxs-lookup"><span data-stu-id="83744-226">Num-executors</span></span></li><li><span data-ttu-id="83744-227">Executor-memory</span><span class="sxs-lookup"><span data-stu-id="83744-227">Executor-memory</span></span></li><li><span data-ttu-id="83744-228">Executor-cores</span><span class="sxs-lookup"><span data-stu-id="83744-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="83744-229">Hive sur HDInsight</span><span class="sxs-lookup"><span data-stu-id="83744-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="83744-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="83744-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="83744-231">MapReduce sur HDInsight</span><span class="sxs-lookup"><span data-stu-id="83744-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="83744-232">Mapreduce.map.memory</span><span class="sxs-lookup"><span data-stu-id="83744-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="83744-233">Mapreduce.job.maps</span><span class="sxs-lookup"><span data-stu-id="83744-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="83744-234">Mapreduce.reduce.memory</span><span class="sxs-lookup"><span data-stu-id="83744-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="83744-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="83744-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="83744-236">Storm sur HDInsight</span><span class="sxs-lookup"><span data-stu-id="83744-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="83744-237">Nombre de processus de travail</span><span class="sxs-lookup"><span data-stu-id="83744-237">Number of worker processes</span></span></li><li><span data-ttu-id="83744-238">Nombre d’instances d’exécuteur de spout</span><span class="sxs-lookup"><span data-stu-id="83744-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="83744-239">Nombre d’instances d’exécuteur de bolt</span><span class="sxs-lookup"><span data-stu-id="83744-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="83744-240">Nombre de tâches de spout</span><span class="sxs-lookup"><span data-stu-id="83744-240">Number of spout tasks</span></span></li><li><span data-ttu-id="83744-241">Nombre de tâches de bolt</span><span class="sxs-lookup"><span data-stu-id="83744-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="83744-242">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="83744-242">See also</span></span>
* [<span data-ttu-id="83744-243">Présentation d’Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="83744-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="83744-244">Prise en main d'Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="83744-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
