---
title: "intégration aaaContinuous dans Visual Studio Team Services à l’aide de projets de groupe de ressources Azure | Documents Microsoft"
description: "Décrit comment les projets tooset créer une intégration continue dans Visual Studio Team Services à l’aide de déploiement de groupe de ressources Azure dans Visual Studio."
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: 0fe4a4b8989ee323e8ef2206fa4ebed503025670
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="a1184-103">Intégration continue dans Visual Studio Team Services à l’aide de projets de déploiement de groupe de ressources Azure</span><span class="sxs-lookup"><span data-stu-id="a1184-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="a1184-104">toodeploy un modèle Azure, vous effectuez des tâches dans différents stades : créer, de Test, tooAzure de copie (également appelé « Étape intermédiaire ») et le modèle de déploiement.</span><span class="sxs-lookup"><span data-stu-id="a1184-104">toodeploy an Azure template, you perform tasks in various stages: Build, Test, Copy tooAzure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="a1184-105">Il existe deux façons différentes toodeploy modèles tooVisual Studio Team Services (Visual Studio Team Services).</span><span class="sxs-lookup"><span data-stu-id="a1184-105">There are two different ways toodeploy templates tooVisual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="a1184-106">Les deux méthodes fournissent hello mêmes résultats, appuyez sur hello qui répond le mieux à votre flux de travail.</span><span class="sxs-lookup"><span data-stu-id="a1184-106">Both methods provide hello same results, so choose hello one that best fits your workflow.</span></span>

1. <span data-ttu-id="a1184-107">Ajouter une définition de build tooyour seule étape qui exécute le script PowerShell hello qui est inclus dans le projet de déploiement de groupe de ressources Azure hello (Deploy-azureresourcegroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="a1184-107">Add a single step tooyour build definition that runs hello PowerShell script that’s included in hello Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="a1184-108">script de Hello copie des artefacts et déploie ensuite le modèle de hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-108">hello script copies artifacts and then deploys hello template.</span></span>
2. <span data-ttu-id="a1184-109">Ajouter plusieurs étapes de build à Visual Studio Team Services, chacune effectuant une tâche intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="a1184-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="a1184-110">Cet article présente les deux options.</span><span class="sxs-lookup"><span data-stu-id="a1184-110">This article demonstrates both options.</span></span> <span data-ttu-id="a1184-111">option de première Hello a parti hello utilisant hello script utilisé par les développeurs dans Visual Studio et la spécification de cohérence tout au long du cycle de vie hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-111">hello first option has hello advantage of using hello same script used by developers in Visual Studio and providing consistency throughout hello lifecycle.</span></span> <span data-ttu-id="a1184-112">Hello offre un script intégré toohello autre pratique.</span><span class="sxs-lookup"><span data-stu-id="a1184-112">hello second option offers a convenient alternative toohello built-in script.</span></span> <span data-ttu-id="a1184-113">Les deux procédures partent du principe que vous disposez déjà d’un projet de déploiement Visual Studio contrôlé dans Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="a1184-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-tooazure"></a><span data-ttu-id="a1184-114">Copiez les artefacts tooAzure</span><span class="sxs-lookup"><span data-stu-id="a1184-114">Copy artifacts tooAzure</span></span>
<span data-ttu-id="a1184-115">Quel que soit le scénario de hello, si vous disposez de tous les artefacts qui sont nécessaires pour le déploiement de modèle, vous devez donner toothem d’accès Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a1184-115">Regardless of hello scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access toothem.</span></span> <span data-ttu-id="a1184-116">Ces artefacts peuvent inclure des fichiers tels que :</span><span class="sxs-lookup"><span data-stu-id="a1184-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="a1184-117">des modèles imbriqués</span><span class="sxs-lookup"><span data-stu-id="a1184-117">Nested templates</span></span>
* <span data-ttu-id="a1184-118">des scripts de configuration et DSC</span><span class="sxs-lookup"><span data-stu-id="a1184-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="a1184-119">fichiers binaires d’application</span><span class="sxs-lookup"><span data-stu-id="a1184-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="a1184-120">Modèles imbriqués et les scripts de configuration</span><span class="sxs-lookup"><span data-stu-id="a1184-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="a1184-121">Lorsque vous utilisez des modèles de hello fournis par Visual Studio (ou générée à l’aide des extraits de code Visual Studio), hello script PowerShell ne prépare pas uniquement les artefacts hello, il est également hello URI pour les ressources hello de différents déploiements.</span><span class="sxs-lookup"><span data-stu-id="a1184-121">When you use hello templates provided by Visual Studio (or built with Visual Studio snippets), hello PowerShell script not only stages hello artifacts, it also parameterizes hello URI for hello resources for different deployments.</span></span> <span data-ttu-id="a1184-122">Hello script puis copie le conteneur de hello artefacts tooa sécurisé dans Azure, crée un jeton SAP pour ce conteneur et puis il transmet ces informations sur le déploiement d’un modèle toohello.</span><span class="sxs-lookup"><span data-stu-id="a1184-122">hello script then copies hello artifacts tooa secure container in Azure, creates a SaS token for that container, and then passes that information on toohello template deployment.</span></span> <span data-ttu-id="a1184-123">Consultez [créer un modèle de déploiement](https://msdn.microsoft.com/library/azure/dn790564.aspx) toolearn savoir plus sur les modèles imbriqués.</span><span class="sxs-lookup"><span data-stu-id="a1184-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) toolearn more about nested templates.</span></span>  <span data-ttu-id="a1184-124">Lorsque vous utilisez des tâches dans Visual Studio Team Services, vous devez sélectionner les tâches appropriées hello pour votre déploiement de modèle et si nécessaire, passer des valeurs de paramètre hello étape toohello modèle déploiement intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="a1184-124">When using tasks in VS Team Services, you must select hello appropriate tasks for your template deployment and if necessary, pass parameter values from hello staging step toohello template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="a1184-125">Configurer le déploiement continu dans Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="a1184-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="a1184-126">toocall le script PowerShell hello dans Visual Studio Team Services, vous devez tooupdate votre définition de build.</span><span class="sxs-lookup"><span data-stu-id="a1184-126">toocall hello PowerShell script in VS Team Services, you need tooupdate your build definition.</span></span> <span data-ttu-id="a1184-127">En bref, les étapes de hello sont :</span><span class="sxs-lookup"><span data-stu-id="a1184-127">In brief, hello steps are:</span></span> 

1. <span data-ttu-id="a1184-128">Modifier la définition de build hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-128">Edit hello build definition.</span></span>
2. <span data-ttu-id="a1184-129">la définition de l’autorisation Azure dans Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="a1184-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="a1184-130">Ajoutez une étape de génération d’Azure PowerShell qui fait référence à script PowerShell de hello dans le projet de déploiement de groupe de ressources Azure hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-130">Add an Azure PowerShell build step that references hello PowerShell script in hello Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="a1184-131">La valeur hello Hello *- ArtifactsStagingDirectory* toowork de paramètre avec un projet créé dans Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="a1184-131">Set hello value of hello *-ArtifactsStagingDirectory* parameter toowork with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="a1184-132">Procédure pas à pas pour l’option 1</span><span class="sxs-lookup"><span data-stu-id="a1184-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="a1184-133">Hello procédures suivantes vous guident tout déploiement continu nécessaire tooconfigure étapes hello dans Visual Studio Team Services à l’aide d’une tâche qui exécute le script PowerShell de hello dans votre projet.</span><span class="sxs-lookup"><span data-stu-id="a1184-133">hello following procedures walk you through hello steps necessary tooconfigure continuous deployment in VS Team Services using a single task that runs hello PowerShell script in your project.</span></span> 

1. <span data-ttu-id="a1184-134">Modifiez votre définition de build de Visual Studio Team Services et ajoutez une étape de build Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1184-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="a1184-135">Choisissez la définition de build hello sous hello **des définitions de Build** catégorie, puis choisissez hello **modifier** lien.</span><span class="sxs-lookup"><span data-stu-id="a1184-135">Choose hello build definition under hello **Build definitions** category and then choose hello **Edit** link.</span></span>
   
   ![Modifier la définition de build][0]
2. <span data-ttu-id="a1184-137">Ajouter un nouveau **Azure PowerShell** étape toohello build définition de build, puis choisissez hello **étape de génération ajouter...**</span><span class="sxs-lookup"><span data-stu-id="a1184-137">Add a new **Azure PowerShell** build step toohello build definition and then choose hello **Add build step…**</span></span> <span data-ttu-id="a1184-138">.</span><span class="sxs-lookup"><span data-stu-id="a1184-138">button.</span></span>
   
   ![Ajouter une étape de génération][1]
3. <span data-ttu-id="a1184-140">Choisissez hello **tâche Deploy** catégorie, sélectionnez hello **Azure PowerShell** de tâches, puis son **ajouter** bouton.</span><span class="sxs-lookup"><span data-stu-id="a1184-140">Choose hello **Deploy task** category, select hello **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Ajouter des tâches][2]
4. <span data-ttu-id="a1184-142">Choisissez hello **Azure PowerShell** étape de génération et puis remplir ses valeurs.</span><span class="sxs-lookup"><span data-stu-id="a1184-142">Choose hello **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="a1184-143">Si vous disposez déjà d’un point de terminaison de service Azure ajouté tooVS Team Services, choisissez un abonnement de hello Bonjour **abonnement Azure** zone de liste déroulante, puis ignorer toohello prochaine section.</span><span class="sxs-lookup"><span data-stu-id="a1184-143">If you already have an Azure service endpoint added tooVS Team Services, choose hello subscription in hello **Azure Subscription** drop-down list box and then skip toohello next section.</span></span> 
      
      <span data-ttu-id="a1184-144">Si vous n’avez pas un point de terminaison de service Azure dans Visual Studio Team Services, vous devez tooadd une.</span><span class="sxs-lookup"><span data-stu-id="a1184-144">If you don’t have an Azure service endpoint in VS Team Services, you need tooadd one.</span></span> <span data-ttu-id="a1184-145">Cette sous-section vous guide tout au long des processus de hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-145">This subsection takes you through hello process.</span></span> <span data-ttu-id="a1184-146">Si votre compte Azure utilise un compte Microsoft (tel que Hotmail), vous devez prendre hello suivant les étapes tooget un Principal du Service d’authentification.</span><span class="sxs-lookup"><span data-stu-id="a1184-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take hello following steps tooget a Service Principal authentication.</span></span>
   2. <span data-ttu-id="a1184-147">Choisissez hello **gérer** lien suivant toohello **abonnement Azure** zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a1184-147">Choose hello **Manage** link next toohello **Azure Subscription** drop-down list box.</span></span>
      
      ![Gérer les abonnements Azure][3]
   3. <span data-ttu-id="a1184-149">Choisissez **Azure** Bonjour **nouveau point de terminaison de Service** zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a1184-149">Choose **Azure** in hello **New Service Endpoint** drop-down list box.</span></span>
      
      ![Nouveau point de terminaison de service][4]
   4. <span data-ttu-id="a1184-151">Bonjour **ajouter un abonnement Azure** boîte de dialogue, sélectionnez hello **Principal du Service** option.</span><span class="sxs-lookup"><span data-stu-id="a1184-151">In hello **Add Azure Subscription** dialog box, select hello **Service Principal** option.</span></span>
      
      ![Option du principal de service][5]
   5. <span data-ttu-id="a1184-153">Ajouter votre toohello de plus d’informations d’abonnement Azure **ajouter un abonnement Azure** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="a1184-153">Add your Azure subscription information toohello **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="a1184-154">Vous devez hello tooprovide éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="a1184-154">You need tooprovide hello following items:</span></span>
      
      * <span data-ttu-id="a1184-155">ID d’abonnement</span><span class="sxs-lookup"><span data-stu-id="a1184-155">Subscription Id</span></span>
      * <span data-ttu-id="a1184-156">Nom d'abonnement</span><span class="sxs-lookup"><span data-stu-id="a1184-156">Subscription Name</span></span>
      * <span data-ttu-id="a1184-157">ID de principal de service</span><span class="sxs-lookup"><span data-stu-id="a1184-157">Service Principal Id</span></span>
      * <span data-ttu-id="a1184-158">Clé de principal de service</span><span class="sxs-lookup"><span data-stu-id="a1184-158">Service Principal Key</span></span>
      * <span data-ttu-id="a1184-159">ID client</span><span class="sxs-lookup"><span data-stu-id="a1184-159">Tenant Id</span></span>
   6. <span data-ttu-id="a1184-160">Ajouter un nom de votre choix de toohello **abonnement** zone Nom.</span><span class="sxs-lookup"><span data-stu-id="a1184-160">Add a name of your choice toohello **Subscription** name box.</span></span> <span data-ttu-id="a1184-161">Cette valeur s’affiche plus loin dans hello **abonnement Azure** liste déroulante dans Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="a1184-161">This value appears later in hello **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="a1184-162">Si vous ne connaissez pas votre ID d’abonnement Azure, vous pouvez utiliser une des hello suivant de commandes tooretrieve il.</span><span class="sxs-lookup"><span data-stu-id="a1184-162">If you don’t know your Azure subscription ID, you can use one of hello following commands tooretrieve it.</span></span>
      
      <span data-ttu-id="a1184-163">Pour les scripts PowerShell, utilisez :</span><span class="sxs-lookup"><span data-stu-id="a1184-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="a1184-164">Pour l’interface de ligne de commande Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="a1184-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="a1184-165">tooget un ID de Principal du Service, clé de Principal du Service et l’ID de locataire, suivez la procédure hello dans [application créer Active Directory et principal du service à l’aide du portail](resource-group-create-service-principal-portal.md) ou [l’authentification d’un principal de service avec Le Gestionnaire de ressources Azure](resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="a1184-165">tooget a Service Principal ID, Service Principal Key, and Tenant ID, follow hello procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="a1184-166">Ajouter hello toohello de valeurs ID de Principal du Service, clé de Principal du Service et ID de client **ajouter un abonnement Azure** boîte de dialogue zone, puis choisissez hello **OK** bouton.</span><span class="sxs-lookup"><span data-stu-id="a1184-166">Add hello Service Principal ID, Service Principal Key, and Tenant ID values toohello **Add Azure Subscription** dialog box and then choose hello **OK** button.</span></span>
      
      <span data-ttu-id="a1184-167">Vous avez maintenant un Bonjour de toorun toouse de Principal du Service valide script Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1184-167">You now have a valid Service Principal toouse toorun hello Azure PowerShell script.</span></span>
5. <span data-ttu-id="a1184-168">Modifier la définition de build hello et choisissez hello **Azure PowerShell** étape de génération.</span><span class="sxs-lookup"><span data-stu-id="a1184-168">Edit hello build definition and choose hello **Azure PowerShell** build step.</span></span> <span data-ttu-id="a1184-169">Sélectionnez l’abonnement de hello Bonjour **abonnement Azure** zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a1184-169">Select hello subscription in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="a1184-170">(Si l’abonnement de hello n’apparaît pas, choisissez hello **Actualiser** hello suivant du bouton **gérer** lien.)</span><span class="sxs-lookup"><span data-stu-id="a1184-170">(If hello subscription doesn't appear, choose hello **Refresh** button next hello **Manage** link.)</span></span> 
   
   ![Configurer une tâche de génération Azure PowerShell][8]
6. <span data-ttu-id="a1184-172">Fournir un chemin d’accès de toohello script Deploy-azureresourcegroup.ps1 PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1184-172">Provide a path toohello Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="a1184-173">toodo, choisissez toohello suivant du bouton points de suspension (...) hello **chemin d’accès du Script** , accédez toohello Deploy-azureresourcegroup.ps1 PowerShell script hello **Scripts** dossier de votre projet, sélectionnez-le, puis choisissez hello **OK** bouton.</span><span class="sxs-lookup"><span data-stu-id="a1184-173">toodo this, choose hello ellipsis (…) button next toohello **Script Path** box, navigate toohello Deploy-AzureResourceGroup.ps1 PowerShell script in hello **Scripts** folder of your project, select it, and then choose hello **OK** button.</span></span>    
   
   ![Sélectionnez le chemin d’accès tooscript][9]
7. <span data-ttu-id="a1184-175">Après avoir sélectionné le script de hello, mettre à jour hello chemin d’accès toohello script afin qu’il est exécuté à partir de hello Build.StagingDirectory (hello même répertoire que *ArtifactsLocation* a la valeur).</span><span class="sxs-lookup"><span data-stu-id="a1184-175">After you select hello script, update hello path toohello script so that it’s run from hello Build.StagingDirectory (hello same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="a1184-176">Ce faire, vous pouvez ajouter « $(Build.StagingDirectory)/ « toohello début du chemin d’accès du script hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-176">You can do this by adding “$(Build.StagingDirectory)/” toohello beginning of hello script path.</span></span>
   
    ![Modifier le chemin d’accès tooscript][10]
8. <span data-ttu-id="a1184-178">Bonjour **Arguments de Script** , entrez hello suivant les paramètres (dans une seule ligne).</span><span class="sxs-lookup"><span data-stu-id="a1184-178">In hello **Script Arguments** box, enter hello following parameters (in a single line).</span></span> <span data-ttu-id="a1184-179">Lorsque vous exécutez le script de hello dans Visual Studio, vous pouvez voir comment les utilisations VS hello paramètres Bonjour **sortie** fenêtre.</span><span class="sxs-lookup"><span data-stu-id="a1184-179">When you run hello script in Visual Studio, you can see how VS uses hello parameters in hello **Output** window.</span></span> <span data-ttu-id="a1184-180">Vous pouvez utiliser cela comme point de départ pour définir les valeurs de paramètre hello dans votre étape de génération.</span><span class="sxs-lookup"><span data-stu-id="a1184-180">You can use this as a starting point for setting hello parameter values in your build step.</span></span>
   
   | <span data-ttu-id="a1184-181">Paramètre</span><span class="sxs-lookup"><span data-stu-id="a1184-181">Parameter</span></span> | <span data-ttu-id="a1184-182">Description</span><span class="sxs-lookup"><span data-stu-id="a1184-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="a1184-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="a1184-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="a1184-184">Hello valeur emplacement géographique où le groupe de ressources hello se trouve, telles que **eastus** ou **'États-Unis'**.</span><span class="sxs-lookup"><span data-stu-id="a1184-184">hello geo-location value where hello resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="a1184-185">(Ajouter des guillemets simples s’il existe un espace dans le nom de hello). Consultez les [Régions Azure](https://azure.microsoft.com/en-us/regions/) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="a1184-185">(Add single quotes if there's a space in hello name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="a1184-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="a1184-186">-ResourceGroupName</span></span> |<span data-ttu-id="a1184-187">nom Hello hello du groupe de ressources pour ce déploiement.</span><span class="sxs-lookup"><span data-stu-id="a1184-187">hello name of hello resource group used for this deployment.</span></span> |
   | <span data-ttu-id="a1184-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="a1184-188">-UploadArtifacts</span></span> |<span data-ttu-id="a1184-189">Ce paramètre, lorsqu’il est présent, spécifie que les artefacts qui doivent toobe téléchargement tooAzure à partir du système local de hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-189">This parameter, when present, specifies that artifacts that need toobe uploaded tooAzure from hello local system.</span></span> <span data-ttu-id="a1184-190">Vous ne devez tooset ce commutateur si votre déploiement de modèle requiert des artefacts supplémentaires que vous souhaitez toostage à l’aide du script PowerShell de hello (tels que les scripts de configuration ou les modèles imbriqués).</span><span class="sxs-lookup"><span data-stu-id="a1184-190">You only need tooset this switch if your template deployment requires extra artifacts that you want toostage using hello PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="a1184-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="a1184-191">-StorageAccountName</span></span> |<span data-ttu-id="a1184-192">nom de Hello hello du compte de stockage utilisé toostage artefacts pour ce déploiement.</span><span class="sxs-lookup"><span data-stu-id="a1184-192">hello name of hello storage account used toostage artifacts for this deployment.</span></span> <span data-ttu-id="a1184-193">Ce paramètre est utilisé uniquement si vous mettez en place des artefacts pour le déploiement.</span><span class="sxs-lookup"><span data-stu-id="a1184-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="a1184-194">Si ce paramètre est fourni, un compte de stockage est créé si le script de hello n’a pas créé une au cours d’un déploiement précédent.</span><span class="sxs-lookup"><span data-stu-id="a1184-194">If this parameter is supplied, a new storage account is created if hello script has not created one during a previous deployment.</span></span> <span data-ttu-id="a1184-195">Si le paramètre hello est spécifié, compte de stockage hello doit déjà exister.</span><span class="sxs-lookup"><span data-stu-id="a1184-195">If hello parameter is specified, hello storage account must already exist.</span></span> |
   | <span data-ttu-id="a1184-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="a1184-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="a1184-197">nom Hello hello du groupe de ressources associé au compte de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-197">hello name of hello resource group associated with hello storage account.</span></span> <span data-ttu-id="a1184-198">Ce paramètre est obligatoire uniquement si vous fournissez une valeur pour le paramètre de StorageAccountName hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-198">This parameter is required only if you provide a value for hello StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="a1184-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="a1184-199">-TemplateFile</span></span> |<span data-ttu-id="a1184-200">fichier de modèle toohello Hello chemin d’accès dans le projet de déploiement de groupe de ressources Azure hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-200">hello path toohello template file in hello Azure Resource Group deployment project.</span></span> <span data-ttu-id="a1184-201">flexibilité de tooenhance, utilisez un chemin d’accès pour ce paramètre est l’emplacement relatif toohello Hello script PowerShell au lieu d’un chemin d’accès absolu.</span><span class="sxs-lookup"><span data-stu-id="a1184-201">tooenhance flexibility, use a path for this parameter that is relative toohello location of hello PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="a1184-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="a1184-202">-TemplateParametersFile</span></span> |<span data-ttu-id="a1184-203">fichier de paramètres toohello Hello chemin d’accès dans le projet de déploiement de groupe de ressources Azure hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-203">hello path toohello parameters file in hello Azure Resource Group deployment project.</span></span> <span data-ttu-id="a1184-204">flexibilité de tooenhance, utilisez un chemin d’accès pour ce paramètre est l’emplacement relatif toohello Hello script PowerShell au lieu d’un chemin d’accès absolu.</span><span class="sxs-lookup"><span data-stu-id="a1184-204">tooenhance flexibility, use a path for this parameter that is relative toohello location of hello PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="a1184-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="a1184-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="a1184-206">Ce paramètre permet de script PowerShell hello connaître le dossier de hello à partir duquel les fichiers binaires du projet hello doivent être copiés.</span><span class="sxs-lookup"><span data-stu-id="a1184-206">This parameter lets hello PowerShell script know hello folder from where hello project’s binary files should be copied.</span></span> <span data-ttu-id="a1184-207">Cette valeur remplace la valeur par défaut de hello utilisé par hello script PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1184-207">This value overrides hello default value used by hello PowerShell script.</span></span> <span data-ttu-id="a1184-208">Pour utiliser de Visual Studio Team Services, valeur hello : ArtifactStagingDirectory - $(Build.StagingDirectory)</span><span class="sxs-lookup"><span data-stu-id="a1184-208">For VS Team Services use, set hello value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="a1184-209">Voici un exemple d’arguments de script (ligne divisée pour une meilleure lisibilité) :</span><span class="sxs-lookup"><span data-stu-id="a1184-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="a1184-210">Lorsque vous avez terminé, hello **Arguments de Script** zone devrait ressembler à hello suivant liste :</span><span class="sxs-lookup"><span data-stu-id="a1184-210">When you’re finished, hello **Script Arguments** box should resemble hello following list:</span></span>
   
   ![Arguments de script][11]
9. <span data-ttu-id="a1184-212">Une fois que vous avez ajouté tous les hello toohello éléments requis Azure PowerShell étape de génération, choisissez hello **file d’attente** générer bouton toobuild hello projet.</span><span class="sxs-lookup"><span data-stu-id="a1184-212">After you’ve added all hello required items toohello Azure PowerShell build step, choose hello **Queue** build button toobuild hello project.</span></span> <span data-ttu-id="a1184-213">Hello **générer** écran montre la sortie de hello de hello script PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a1184-213">hello **Build** screen shows hello output from hello PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="a1184-214">Procédure pas à pas pour l’option 2</span><span class="sxs-lookup"><span data-stu-id="a1184-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="a1184-215">Hello procédures suivantes vous guident tout déploiement continu nécessaire tooconfigure étapes hello dans Visual Studio Team Services à l’aide de tâches intégrées de hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-215">hello following procedures walk you through hello steps necessary tooconfigure continuous deployment in VS Team Services using hello built-in tasks.</span></span>

1. <span data-ttu-id="a1184-216">Modifier votre VS Team Services build définition tooadd deux nouvelles étapes de génération.</span><span class="sxs-lookup"><span data-stu-id="a1184-216">Edit your VS Team Services build definition tooadd two new build steps.</span></span> <span data-ttu-id="a1184-217">Choisissez la définition de build hello sous hello **des définitions de Build** catégorie, puis choisissez hello **modifier** lien.</span><span class="sxs-lookup"><span data-stu-id="a1184-217">Choose hello build definition under hello **Build definitions** category and then choose hello **Edit** link.</span></span>
   
   ![Modifier la définition de build][12]
2. <span data-ttu-id="a1184-219">Étapes de génération hello ajouter nouvelle définition de build toohello hello **étape de génération ajouter...**</span><span class="sxs-lookup"><span data-stu-id="a1184-219">Add hello new build steps toohello build definition using hello **Add build step…**</span></span> <span data-ttu-id="a1184-220">.</span><span class="sxs-lookup"><span data-stu-id="a1184-220">button.</span></span>
   
   ![Ajouter une étape de génération][13]
3. <span data-ttu-id="a1184-222">Choisissez hello **déployer** catégorie de tâche, sélectionnez hello **Azure File Copy** de tâches, puis son **ajouter** bouton.</span><span class="sxs-lookup"><span data-stu-id="a1184-222">Choose hello **Deploy** task category, select hello **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Ajouter la tâche Copie de fichiers Azure][14]
4. <span data-ttu-id="a1184-224">Choisissez hello **déploiement de groupe de ressources Azure** de tâches, puis cliquez sur son **ajouter** bouton, puis **fermer** hello **tâche catalogue**.</span><span class="sxs-lookup"><span data-stu-id="a1184-224">Choose hello **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** hello **Task Catalog**.</span></span>
   
   ![Ajouter une tâche Déploiement de groupes de ressources Azure][15]
5. <span data-ttu-id="a1184-226">Choisissez hello **Azure File Copy** remplir ses valeurs et de la tâche.</span><span class="sxs-lookup"><span data-stu-id="a1184-226">Choose hello **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="a1184-227">Si vous disposez déjà d’un point de terminaison de service Azure ajouté tooVS Team Services, choisissez un abonnement de hello Bonjour **abonnement Azure** zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a1184-227">If you already have an Azure service endpoint added tooVS Team Services, choose hello subscription in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="a1184-228">Si vous n’avez pas d’abonnement, consultez les instructions pour en configurer un dans Visual Studio Team Services décrites dans la section [Option 1](#detailed-walkthrough-for-option-1).</span><span class="sxs-lookup"><span data-stu-id="a1184-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="a1184-229">Source : entrez **$(Build.StagingDirectory)**.</span><span class="sxs-lookup"><span data-stu-id="a1184-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="a1184-230">Type de connexion Azure : sélectionnez **Azure Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="a1184-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="a1184-231">Abonnement RM Azure - abonnement hello sélectionnez hello compte de stockage souhaité toouse Bonjour **abonnement Azure** zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a1184-231">Azure RM Subscription - select hello subscription for hello storage account you want toouse in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="a1184-232">Si l’abonnement de hello n’apparaît pas, choisissez hello **Actualiser** hello suivant du bouton **gérer** lien.</span><span class="sxs-lookup"><span data-stu-id="a1184-232">If hello subscription doesn't appear, choose hello **Refresh** button next hello **Manage** link.</span></span>
   * <span data-ttu-id="a1184-233">Type de destination : sélectionnez **Objet blob Azure**.</span><span class="sxs-lookup"><span data-stu-id="a1184-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="a1184-234">Compte de stockage RM - sélectionner compte de stockage de hello vous aimeriez toouse pour les artefacts de mise en lots</span><span class="sxs-lookup"><span data-stu-id="a1184-234">RM Storage Account - select hello storage account you would like toouse for staging artifacts</span></span>
   * <span data-ttu-id="a1184-235">Nom de conteneur - entrez hello nom du conteneur de hello vous aimeriez toouse pour la mise en lots ; Il peut être n’importe quel nom de conteneur valide, mais utiliser une définition de build toothis dédié</span><span class="sxs-lookup"><span data-stu-id="a1184-235">Container Name - enter hello name of hello container you would like toouse for staging; it can be any valid container name, but use one dedicated toothis build definition</span></span>
   
   <span data-ttu-id="a1184-236">Pour les valeurs de sortie hello :</span><span class="sxs-lookup"><span data-stu-id="a1184-236">For hello output values:</span></span>
   
   * <span data-ttu-id="a1184-237">URI du conteneur de stockage : entrez **artifactsLocation**</span><span class="sxs-lookup"><span data-stu-id="a1184-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="a1184-238">Jeton SAS du conteneur de stockage : entrez **artifactsLocationSasToken**</span><span class="sxs-lookup"><span data-stu-id="a1184-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Configurer la tâche Copie de fichiers Azure][16]
6. <span data-ttu-id="a1184-240">Choisissez hello **déploiement de groupe de ressources Azure** étape de génération et puis remplir ses valeurs.</span><span class="sxs-lookup"><span data-stu-id="a1184-240">Choose hello **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="a1184-241">Type de connexion Azure : sélectionnez **Azure Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="a1184-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="a1184-242">Abonnement RM Azure - abonnement sélectionnez hello pour le déploiement dans hello **abonnement Azure** zone de liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a1184-242">Azure RM Subscription - select hello subscription for deployment in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="a1184-243">Il s’agit généralement de hello même abonnement utilisé à l’étape précédente de hello</span><span class="sxs-lookup"><span data-stu-id="a1184-243">This will usually be hello same subscription used in hello previous step</span></span>
   * <span data-ttu-id="a1184-244">Action : sélectionnez **Créer ou mettre à jour un groupe de ressources**.</span><span class="sxs-lookup"><span data-stu-id="a1184-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="a1184-245">Groupe de ressources - sélectionner un groupe de ressources ou entrez le nom hello d’un nouveau groupe de ressources pour le déploiement de hello</span><span class="sxs-lookup"><span data-stu-id="a1184-245">Resource Group - select a resource group or enter hello name of a new resource group for hello deployment</span></span>
   * <span data-ttu-id="a1184-246">Emplacement - emplacement sélectionnez hello pour le groupe de ressources hello</span><span class="sxs-lookup"><span data-stu-id="a1184-246">Location - select hello location for hello resource group</span></span>
   * <span data-ttu-id="a1184-247">Modèle - Entrez le chemin d’accès de hello et de hello modèle toobe déployé ajoutant **$(Build.StagingDirectory)**, par exemple : **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="a1184-247">Template - enter hello path and name of hello template toobe deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="a1184-248">Paramètres de modèle - Entrez le chemin d’accès de hello et de hello toobe de paramètres utilisé, ajoutant **$(Build.StagingDirectory)**, par exemple : **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="a1184-248">Template Parameters - enter hello path and name of hello parameters toobe used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="a1184-249">Remplacer les paramètres de modèle : entrez ou copier- coller hello suivant de code :</span><span class="sxs-lookup"><span data-stu-id="a1184-249">Override Template Parameters - enter or copy and paste hello following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Configurer une tâche Déploiement de groupes de ressources Azure][17]
7. <span data-ttu-id="a1184-251">Une fois que vous avez ajouté tous les éléments requis de hello, enregistrer la définition de build hello et choisissez **nouvelle build en file d’attente** haut hello.</span><span class="sxs-lookup"><span data-stu-id="a1184-251">After you’ve added all hello required items, save hello build definition and choose **Queue new build** at hello top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a1184-252">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a1184-252">Next steps</span></span>
<span data-ttu-id="a1184-253">Lecture [vue d’ensemble du Gestionnaire de ressources Azure](azure-resource-manager/resource-group-overview.md) toolearn plus d’informations sur le Gestionnaire de ressources Azure et les groupes de ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="a1184-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) toolearn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png
