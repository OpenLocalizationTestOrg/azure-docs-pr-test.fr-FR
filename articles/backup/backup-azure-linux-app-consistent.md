---
title: "Sauvegarde Azure : sauvegarde cohérente des applications des machines virtuelles Linux | Microsoft Docs"
description: "Utilisez des scripts pour garantir des sauvegardes cohérentes des applications sur Azure pour vos machines virtuelles Linux. Les scripts s’appliquent uniquement aux machines virtuelles Linux dans un déploiement de Gestionnaire de ressources. Les scripts ne s’appliquent pas aux machines virtuelles Windows ou aux déploiements de Service Manager. Cet article passe en revue les étapes de configuration des scripts, y compris la résolution des problèmes."
services: backup
documentationcenter: dev-center-name
author: anuragmehrotra
manager: shivamg
keywords: "sauvegarde cohérente des applications ; sauvegarde cohérente des applications de la machine virtuelle Azure ; sauvegarde de la machine virtuelle Linux ; sauvegarde Azure"
ms.assetid: bbb99cf2-d8c7-4b3d-8b29-eadc0fed3bef
ms.service: backup
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 4/12/2017
ms.author: anuragm;markgal
ms.openlocfilehash: 378c65bec8fd1f880ed459e76f5e4b5d85e49d2a
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="application-consistent-backup-of-azure-linux-vms-preview"></a><span data-ttu-id="64a39-106">Sauvegarde cohérente des applications des machines virtuelles Linux Azure (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="64a39-106">Application-consistent backup of Azure Linux VMs (preview)</span></span>

<span data-ttu-id="64a39-107">Cet article traite de la structure de pré-scripts et post-scripts de Linux, ainsi que de la façon dont elle peut être utilisée pour effectuer des sauvegardes cohérentes d’applications de machines virtuelles Linux Azure.</span><span class="sxs-lookup"><span data-stu-id="64a39-107">This article talks about the Linux pre-script and post-script framework, and how it can be used to take application-consistent backups of Azure Linux VMs.</span></span>

> [!Note]
> <span data-ttu-id="64a39-108">La structure de pré-scripts et post-scripts est prise en charge uniquement pour les machines virtuelles déployées par Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="64a39-108">The pre-script and post-script framework is supported only for Azure Resource Manager-deployed Linux virtual machines.</span></span> <span data-ttu-id="64a39-109">Les scripts pour la cohérence d’application ne sont pas pris en charge pour les machines virtuelles déployées par Service Manager ou les machines virtuelles Windows.</span><span class="sxs-lookup"><span data-stu-id="64a39-109">Scripts for application consistency are not supported for Service Manager-deployed virtual machines or Windows virtual machines.</span></span>
>

## <a name="how-the-framework-works"></a><span data-ttu-id="64a39-110">Fonctionnement de l’infrastructure</span><span class="sxs-lookup"><span data-stu-id="64a39-110">How the framework works</span></span>

<span data-ttu-id="64a39-111">L’infrastructure fournit une option permettant d’exécuter des pré/post-scripts personnalisés lors de la capture d’instantanés de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="64a39-111">The framework provides an option to run custom pre-scripts and post-scripts while you're taking VM snapshots.</span></span> <span data-ttu-id="64a39-112">Les pré-scripts sont exécutés juste avant la capture d’instantané de machine virtuelle, et les post-scripts juste après la capture.</span><span class="sxs-lookup"><span data-stu-id="64a39-112">Pre-scripts are run just before you take the VM snapshot, and post-scripts are run immediately after you take the VM snapshot.</span></span> <span data-ttu-id="64a39-113">Cela vous permet de contrôler votre environnement et l’application lorsque vous prenez des instantanés de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="64a39-113">This gives you the flexibility to control your application and environment while you're taking VM snapshots.</span></span>

<span data-ttu-id="64a39-114">Dans ce scénario, il est important d’assurer la sauvegarde cohérente des applications de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="64a39-114">In this scenario, it's important to ensure application-consistent VM backup.</span></span> <span data-ttu-id="64a39-115">Le pré-script peut appeler les API natives de l’application pour suspendre les E/S et vider le contenu de la mémoire sur le disque.</span><span class="sxs-lookup"><span data-stu-id="64a39-115">The pre-script can invoke application-native APIs to quiesce the IOs and flush in-memory content to the disk.</span></span> <span data-ttu-id="64a39-116">Cela garantit que l’instantané est cohérent avec l’application (autrement dit, que l’application est lancée lorsque la machine virtuelle est démarrée après la restauration).</span><span class="sxs-lookup"><span data-stu-id="64a39-116">This ensures that the snapshot is application-consistent (that is, that the application comes up when the VM is booted post-restore).</span></span> <span data-ttu-id="64a39-117">Le post-script permet de libérer les E/S.</span><span class="sxs-lookup"><span data-stu-id="64a39-117">Post-script can be used to thaw the IOs.</span></span> <span data-ttu-id="64a39-118">Il effectue cela à l’aide des API d’applications natives, afin que l’application puisse reprendre son fonctionnement normal après la capture instantanée de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="64a39-118">It does this by using application-native APIs so that the application can resume normal operations post-VM snapshot.</span></span>

## <a name="steps-to-configure-pre-script-and-post-script"></a><span data-ttu-id="64a39-119">Procédure de configuration du pré-script et du post-script</span><span class="sxs-lookup"><span data-stu-id="64a39-119">Steps to configure pre-script and post-script</span></span>

1. <span data-ttu-id="64a39-120">Connectez-vous en tant qu’utilisateur root de la machine virtuelle Linux que vous souhaitez sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="64a39-120">Sign in as the root user to the Linux VM that you want to back up.</span></span>

2. <span data-ttu-id="64a39-121">Téléchargez **VMSnapshotScriptPluginConfig.json** à partir de [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig) et copiez-le dans le dossier **/etc/azure** sur toutes les machines virtuelles que vous prévoyez de sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="64a39-121">Download **VMSnapshotScriptPluginConfig.json** from [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig), and then copy it to the **/etc/azure** folder on all the VMs that you're going to back up.</span></span> <span data-ttu-id="64a39-122">Créez le répertoire **/etc/azure** s’il n’existe pas.</span><span class="sxs-lookup"><span data-stu-id="64a39-122">Create the **/etc/azure** directory if it doesn't exist already.</span></span>

3. <span data-ttu-id="64a39-123">Copiez le pré-script et le post-script de votre application sur toutes les machines virtuelles que vous prévoyez de sauvegarder.</span><span class="sxs-lookup"><span data-stu-id="64a39-123">Copy the pre-script and post-script for your application on all the VMs that you plan to back up.</span></span> <span data-ttu-id="64a39-124">Vous pouvez copier les scripts vers n’importe quel emplacement sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="64a39-124">You can copy the scripts to any location on the VM.</span></span> <span data-ttu-id="64a39-125">Veillez à mettre à jour le chemin d’accès complet des fichiers de script dans le fichier **VMSnapshotScriptPluginConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="64a39-125">Be sure to update the full path of the script files in the **VMSnapshotScriptPluginConfig.json** file.</span></span>

4. <span data-ttu-id="64a39-126">Vérifiez les autorisations suivantes pour ces fichiers :</span><span class="sxs-lookup"><span data-stu-id="64a39-126">Ensure the following permissions for these files:</span></span>

   - <span data-ttu-id="64a39-127">**VMSnapshotScriptPluginConfig.json** : autorisation « 600 ».</span><span class="sxs-lookup"><span data-stu-id="64a39-127">**VMSnapshotScriptPluginConfig.json**: Permission “600.”</span></span> <span data-ttu-id="64a39-128">Par exemple, seul l’utilisateur « racine » doit avoir des autorisations de « lecture » et « d’écriture » pour ce fichier, et aucun utilisateur ne doit disposer des autorisations « d’exécution ».</span><span class="sxs-lookup"><span data-stu-id="64a39-128">For example, only “root” user should have “read” and “write” permissions to this file, and no user should have “execute” permissions.</span></span>

   - <span data-ttu-id="64a39-129">**Fichier de pré-script** : autorisation « 700 ».</span><span class="sxs-lookup"><span data-stu-id="64a39-129">**Pre-script file**: Permission “700.”</span></span>  <span data-ttu-id="64a39-130">Par exemple, seul l’utilisateur « racine » doit avoir les autorisations de « lecture », « d’écriture » et « d’exécution » pour ce fichier.</span><span class="sxs-lookup"><span data-stu-id="64a39-130">For example, only “root” user should have “read”, “write”, and “execute” permissions to this file.</span></span>
  
   - <span data-ttu-id="64a39-131">**Post-script** : autorisation « 700 ».</span><span class="sxs-lookup"><span data-stu-id="64a39-131">**Post-script** Permission “700.”</span></span> <span data-ttu-id="64a39-132">Par exemple, seul l’utilisateur « racine » doit avoir les autorisations de « lecture », « d’écriture » et « d’exécution » pour ce fichier.</span><span class="sxs-lookup"><span data-stu-id="64a39-132">For example, only “root” user should have “read”, “write”, and “execute” permissions to this file.</span></span>

   > [!Important]
   > <span data-ttu-id="64a39-133">L’infrastructure offre beaucoup de puissance aux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="64a39-133">The framework gives users a lot of power.</span></span> <span data-ttu-id="64a39-134">Il est donc important qu’il soit sécurisé et que seul l’utilisateur « root » ait accès aux fichiers critiques de JSON et de script.</span><span class="sxs-lookup"><span data-stu-id="64a39-134">It’s important that it's secure and that only “root” user has access to critical JSON and script files.</span></span>
   > <span data-ttu-id="64a39-135">Si les conditions précédentes ne sont pas remplies, le script ne s’exécute pas.</span><span class="sxs-lookup"><span data-stu-id="64a39-135">If the previous requirements aren't met, the script doesn't run.</span></span> <span data-ttu-id="64a39-136">Cela entraîne une sauvegarde du système de fichiers/point cohérent d’incident.</span><span class="sxs-lookup"><span data-stu-id="64a39-136">This results in file system/crash consistent backup.</span></span>
   >

5. <span data-ttu-id="64a39-137">Configurez **VMSnapshoScriptPluginConfig.json** comme décrit ici :</span><span class="sxs-lookup"><span data-stu-id="64a39-137">Configure **VMSnapshotScriptPluginConfig.json** as described here:</span></span>
    - <span data-ttu-id="64a39-138">**pluginName** : laissez ce champ tel quel, sans quoi vos scripts ne fonctionneront pas comme prévu.</span><span class="sxs-lookup"><span data-stu-id="64a39-138">**pluginName**: Leave this field as is or your scripts might not work as expected.</span></span>

    - <span data-ttu-id="64a39-139">**preScriptLocation** : fournissez le chemin d’accès complet du pré-script sur la machine virtuelle qui sera sauvegardée.</span><span class="sxs-lookup"><span data-stu-id="64a39-139">**preScriptLocation**: Provide the full path of the pre-script on the VM that's going to be backed up.</span></span>

    - <span data-ttu-id="64a39-140">**postScriptLocation** : fournissez le chemin d’accès complet du post-script sur la machine virtuelle qui sera sauvegardée.</span><span class="sxs-lookup"><span data-stu-id="64a39-140">**postScriptLocation**: Provide the full path of the post-script on the VM that's going to be backed up.</span></span>

    - <span data-ttu-id="64a39-141">**preScriptParams** : fournissez les paramètres facultatifs qui doivent être transmis au pré-script.</span><span class="sxs-lookup"><span data-stu-id="64a39-141">**preScriptParams**: Provide the optional parameters that need to be passed to the pre-script.</span></span> <span data-ttu-id="64a39-142">Tous les paramètres doivent être entre guillemets et être séparés par des virgules s’il existe plusieurs paramètres.</span><span class="sxs-lookup"><span data-stu-id="64a39-142">All parameters should be in quotes, and should be comma-separated if there are multiple parameters.</span></span>

    - <span data-ttu-id="64a39-143">**postScriptParams** : fournissez les paramètres facultatifs qui doivent être transmis au post-script.</span><span class="sxs-lookup"><span data-stu-id="64a39-143">**postScriptParams**: Provide the optional parameters that need to be passed to the post-script.</span></span> <span data-ttu-id="64a39-144">Tous les paramètres doivent être entre guillemets et être séparés par des virgules s’il existe plusieurs paramètres.</span><span class="sxs-lookup"><span data-stu-id="64a39-144">All parameters should be in quotes, and should be comma-separated if there are multiple parameters.</span></span>

    - <span data-ttu-id="64a39-145">**preScriptNoOfRetries** : définissez le nombre de fois où le pré-script doit être traité à nouveau en cas d’erreur avant de terminer.</span><span class="sxs-lookup"><span data-stu-id="64a39-145">**preScriptNoOfRetries**: Set the number of times the pre-script should be retried if there is any error before terminating.</span></span> <span data-ttu-id="64a39-146">Zéro signifie qu’une seule tentative a lieu et qu’aucune nouvelle tentative n’a lieu en cas d’échec.</span><span class="sxs-lookup"><span data-stu-id="64a39-146">Zero means only one try and no retry if there is a failure.</span></span>

    - <span data-ttu-id="64a39-147">**postScriptNoOfRetries** : définissez le nombre de fois où le post-script doit être traité à nouveau en cas d’erreur avant de terminer.</span><span class="sxs-lookup"><span data-stu-id="64a39-147">**postScriptNoOfRetries**:  Set the number of times the post-script should be retried if there is any error before terminating.</span></span> <span data-ttu-id="64a39-148">Zéro signifie qu’une seule tentative a lieu et qu’aucune nouvelle tentative n’a lieu en cas d’échec.</span><span class="sxs-lookup"><span data-stu-id="64a39-148">Zero means only one try and no retry if there is a failure.</span></span>
    
    - <span data-ttu-id="64a39-149">**timeoutInSeconds** : spécifiez des délais d’attente individuels pour le pré-script et le post-script.</span><span class="sxs-lookup"><span data-stu-id="64a39-149">**timeoutInSeconds**: Specify individual timeouts for the pre-script and the post-script.</span></span>

    - <span data-ttu-id="64a39-150">**continueBackupOnFailure** : définissez cette valeur sur **true** si vous voulez que la sauvegarde Azure effectue une restauration vers une sauvegarde cohérente en cas d’incident/cohérente de système de fichiers en cas d’échec du pré-script ou du post-script.</span><span class="sxs-lookup"><span data-stu-id="64a39-150">**continueBackupOnFailure**: Set this value to **true** if you want Azure Backup to fall back to a file system consistent/crash consistent backup if pre-script or post-script fails.</span></span> <span data-ttu-id="64a39-151">Définir cette valeur sur **false** fait échouer la sauvegarde en cas d’échec du script (sauf en cas de machine virtuelle à un seul disque où la restauration est effectuée vers une sauvegarde cohérente en cas d’incident, indépendamment de ce paramètre).</span><span class="sxs-lookup"><span data-stu-id="64a39-151">Setting this to **false** fails the backup in case of script failure (except when you have single-disk VM that falls back to crash-consistent backup regardless of this setting).</span></span>

    - <span data-ttu-id="64a39-152">**fsFreezeEnabled** : spécifiez si fsfreeze Linux doit être appelé pendant la capture instantanée de la machine virtuelle pour garantir la cohérence du système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="64a39-152">**fsFreezeEnabled**: Specify whether Linux fsfreeze should be called while you're taking the VM snapshot to ensure file system consistency.</span></span> <span data-ttu-id="64a39-153">Nous vous recommandons de laisser cette valeur définie sur **true**, sauf si votre application comporte des dépendances sur la désactivation de fsfreeze.</span><span class="sxs-lookup"><span data-stu-id="64a39-153">We recommend keeping this setting set to **true** unless your application has a dependency on disabling fsfreeze.</span></span>

6. <span data-ttu-id="64a39-154">L’infrastructure de script est désormais configurée.</span><span class="sxs-lookup"><span data-stu-id="64a39-154">The script framework is now configured.</span></span> <span data-ttu-id="64a39-155">Si la sauvegarde de la machine virtuelle est déjà configurée, la sauvegarde suivante appelle les scripts et déclenche la sauvegarde cohérente avec les applications.</span><span class="sxs-lookup"><span data-stu-id="64a39-155">If the VM backup is already configured, the next backup invokes the scripts and triggers application-consistent backup.</span></span> <span data-ttu-id="64a39-156">Si la sauvegarde de machine virtuelle n’est pas configurée, faites-le à l’aide de [Sauvegarde de machines virtuelles Azure dans des coffres Recovery Services.](https://docs.microsoft.com/azure/backup/backup-azure-vms-first-look-arm)</span><span class="sxs-lookup"><span data-stu-id="64a39-156">If the VM backup is not configured, configure it by using [Back up Azure virtual machines to Recovery Services vaults.](https://docs.microsoft.com/azure/backup/backup-azure-vms-first-look-arm)</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="64a39-157">Résolution de problèmes</span><span class="sxs-lookup"><span data-stu-id="64a39-157">Troubleshooting</span></span>

<span data-ttu-id="64a39-158">Veillez à ajouter un enregistrement approprié lors de l’écriture de votre pré-script et post-script et passez en revue vos journaux de script pour résoudre les problèmes de script.</span><span class="sxs-lookup"><span data-stu-id="64a39-158">Make sure you add appropriate logging while writing your pre-script and post-script, and review your script logs to fix any script issues.</span></span> <span data-ttu-id="64a39-159">Si vous rencontrez toujours des problèmes pour exécuter des scripts, reportez-vous au tableau suivant pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="64a39-159">If you still have problems running scripts, refer to the following table for more information.</span></span>

| <span data-ttu-id="64a39-160">Erreur</span><span class="sxs-lookup"><span data-stu-id="64a39-160">Error</span></span> | <span data-ttu-id="64a39-161">Message d’erreur</span><span class="sxs-lookup"><span data-stu-id="64a39-161">Error message</span></span> | <span data-ttu-id="64a39-162">Action recommandée</span><span class="sxs-lookup"><span data-stu-id="64a39-162">Recommended action</span></span> |
| ------------------------ | -------------- | ------------------ |
| <span data-ttu-id="64a39-163">Pre-ScriptExecutionFailed</span><span class="sxs-lookup"><span data-stu-id="64a39-163">Pre-ScriptExecutionFailed</span></span> |<span data-ttu-id="64a39-164">Le pré-script a renvoyé une erreur ; la sauvegarde peut ne pas être cohérente avec les applications.</span><span class="sxs-lookup"><span data-stu-id="64a39-164">The pre-script returned an error, so backup might not be application-consistent.</span></span>   | <span data-ttu-id="64a39-165">Examinez les journaux d’erreur de votre script pour résoudre le problème.</span><span class="sxs-lookup"><span data-stu-id="64a39-165">Look at the failure logs for your script to fix the issue.</span></span>|  
|   <span data-ttu-id="64a39-166">Post-ScriptExecutionFailed</span><span class="sxs-lookup"><span data-stu-id="64a39-166">Post-ScriptExecutionFailed</span></span> |    <span data-ttu-id="64a39-167">Le post-script a renvoyé une erreur qui peut affecter l’état de l’application.</span><span class="sxs-lookup"><span data-stu-id="64a39-167">The post-script returned an error that might impact application state.</span></span> |    <span data-ttu-id="64a39-168">Examinez les journaux d’erreur de votre script pour résoudre le problème et vérifiez l’état de l’application.</span><span class="sxs-lookup"><span data-stu-id="64a39-168">Look at the failure logs for your script to fix the issue and check the application state.</span></span> |
| <span data-ttu-id="64a39-169">Pre-ScriptNotFound</span><span class="sxs-lookup"><span data-stu-id="64a39-169">Pre-ScriptNotFound</span></span> |  <span data-ttu-id="64a39-170">Le pré-script est introuvable à l’emplacement spécifié dans le fichier de configuration **VMSnapshotScriptPluginConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="64a39-170">The pre-script was not found at the location that's specified in the **VMSnapshotScriptPluginConfig.json** config file.</span></span> |   <span data-ttu-id="64a39-171">Assurez-vous que ce pré-script est présent au niveau du chemin d’accès spécifié dans le fichier de configuration pour garantir la sauvegarde cohérente des applications.</span><span class="sxs-lookup"><span data-stu-id="64a39-171">Make sure that pre-script is present at the path that's specified in the config file to ensure application-consistent backup.</span></span>|
| <span data-ttu-id="64a39-172">Post-ScriptNotFound</span><span class="sxs-lookup"><span data-stu-id="64a39-172">Post-ScriptNotFound</span></span> | <span data-ttu-id="64a39-173">Le post-script est introuvable à l’emplacement spécifié dans le fichier de configuration **VMSnapshotScriptPluginConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="64a39-173">The post-script wasn't found at the location that's specified in the **VMSnapshotScriptPluginConfig.json** config file.</span></span> |   <span data-ttu-id="64a39-174">Assurez-vous que ce post-script est présent au niveau du chemin d’accès spécifié dans le fichier de configuration pour garantir la sauvegarde cohérente des applications.</span><span class="sxs-lookup"><span data-stu-id="64a39-174">Make sure that post-script is present at the path that's specified in the config file to ensure application-consistent backup.</span></span>|
| <span data-ttu-id="64a39-175">IncorrectPluginhostFile</span><span class="sxs-lookup"><span data-stu-id="64a39-175">IncorrectPluginhostFile</span></span> | <span data-ttu-id="64a39-176">Le fichier **Pluginhost** fourni avec l’extension VmSnapshotLinux est endommagé. Le pré-script et le post-script ne peuvent donc pas être exécutés et la sauvegarde ne sera pas cohérente avec les applications.</span><span class="sxs-lookup"><span data-stu-id="64a39-176">The **Pluginhost** file, which comes with the VmSnapshotLinux extension, is corrupted, so pre-script and post-script cannot run and the backup won't be application-consistent.</span></span> | <span data-ttu-id="64a39-177">Désinstallez l’extension **VmSnapshotLinux**, et elle sera automatiquement réinstallée avec la sauvegarde suivante pour résoudre le problème.</span><span class="sxs-lookup"><span data-stu-id="64a39-177">Uninstall the **VmSnapshotLinux** extension, and it will automatically be reinstalled with the next backup to fix the problem.</span></span> |
| <span data-ttu-id="64a39-178">IncorrectJSONConfigFile</span><span class="sxs-lookup"><span data-stu-id="64a39-178">IncorrectJSONConfigFile</span></span> | <span data-ttu-id="64a39-179">Le fichier **VMSnapshotScriptPluginConfig.json** est incorrect. Le pré-script et le post-script ne peuvent donc pas être exécutés et la sauvegarde ne sera pas cohérente avec les applications.</span><span class="sxs-lookup"><span data-stu-id="64a39-179">The **VMSnapshotScriptPluginConfig.json** file is incorrect, so pre-script and post-script cannot run and the backup won't be application-consistent.</span></span> | <span data-ttu-id="64a39-180">Téléchargez la copie à partir de [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig) et la configurer à nouveau.</span><span class="sxs-lookup"><span data-stu-id="64a39-180">Download the copy from [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig) and configure it again.</span></span> |
| <span data-ttu-id="64a39-181">InsufficientPermissionforPre-Script</span><span class="sxs-lookup"><span data-stu-id="64a39-181">InsufficientPermissionforPre-Script</span></span> | <span data-ttu-id="64a39-182">Pour l’exécution de scripts, l’utilisateur racine doit être le propriétaire du fichier et le fichier doit avoir des autorisations « 700 », (seul le propriétaire doit avoir des autorisations de « lecture », « d’écriture » et « d’exécution »).</span><span class="sxs-lookup"><span data-stu-id="64a39-182">For running scripts, "root" user should be the owner of the file and the file should have “700” permissions (that is, only "owner" should have “read”, “write”, and “execute” permissions).</span></span> | <span data-ttu-id="64a39-183">Assurez-vous que l’utilisateur « racine » est le « propriétaire » du fichier de script et que seul le propriétaire dispose des autorisations de « lecture », « d’écriture » et « d’exécution ».</span><span class="sxs-lookup"><span data-stu-id="64a39-183">Make sure “root” user is the “owner” of the script file and that only "owner" has “read”, “write” and “execute” permissions.</span></span> |
| <span data-ttu-id="64a39-184">InsufficientPermissionforPost-Script</span><span class="sxs-lookup"><span data-stu-id="64a39-184">InsufficientPermissionforPost-Script</span></span> | <span data-ttu-id="64a39-185">Pour l’exécution de scripts, l’utilisateur racine doit être le propriétaire du fichier et le fichier doit avoir des autorisations « 700 » (c.-à-d. que seul le propriétaire doit avoir des autorisations de « lecture », « d’écriture » et « d’exécution »).</span><span class="sxs-lookup"><span data-stu-id="64a39-185">For running scripts, root user should be the owner of the file and the file should have “700” permissions (that is, only "owner" should have “read”, “write”, and “execute” permissions).</span></span> | <span data-ttu-id="64a39-186">Assurez-vous que l’utilisateur « racine » est le « propriétaire » du fichier de script et que seul le propriétaire dispose des autorisations de « lecture », « d’écriture » et « d’exécution ».</span><span class="sxs-lookup"><span data-stu-id="64a39-186">Make sure “root” user is the “owner” of the script file and that only "owner" has “read”, “write” and “execute” permissions.</span></span> |
| <span data-ttu-id="64a39-187">Pre-ScriptTimeout</span><span class="sxs-lookup"><span data-stu-id="64a39-187">Pre-ScriptTimeout</span></span> | <span data-ttu-id="64a39-188">L’exécution du pré-script de sauvegarde cohérente des applications a expiré.</span><span class="sxs-lookup"><span data-stu-id="64a39-188">The execution of the application-consistent backup pre-script timed-out.</span></span> | <span data-ttu-id="64a39-189">Vérifiez le script et augmentez le délai d’expiration dans le fichier **VMSnapshotScriptPluginConfig.json** situé à l’emplacement **/etc/azure**.</span><span class="sxs-lookup"><span data-stu-id="64a39-189">Check the script and increase the timeout in the **VMSnapshotScriptPluginConfig.json** file that's located at **/etc/azure**.</span></span> |
| <span data-ttu-id="64a39-190">Post-ScriptTimeout</span><span class="sxs-lookup"><span data-stu-id="64a39-190">Post-ScriptTimeout</span></span> | <span data-ttu-id="64a39-191">L’exécution du post-script de sauvegarde cohérente des applications a expiré.</span><span class="sxs-lookup"><span data-stu-id="64a39-191">The execution of the application-consistent backup post-script timed out.</span></span> | <span data-ttu-id="64a39-192">Vérifiez le script et augmentez le délai d’expiration dans le fichier **VMSnapshotScriptPluginConfig.json** situé à l’emplacement **/etc/azure**.</span><span class="sxs-lookup"><span data-stu-id="64a39-192">Check the script and increase the timeout in the **VMSnapshotScriptPluginConfig.json** file that's located at **/etc/azure**.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="64a39-193">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="64a39-193">Next steps</span></span>
[<span data-ttu-id="64a39-194">Sauvegarder des machines virtuelles Azure dans un coffre Recovery Services</span><span class="sxs-lookup"><span data-stu-id="64a39-194">Configure VM backup to a Recovery Services vault</span></span>](https://docs.microsoft.com/azure/backup/backup-azure-arm-vms)
