---
title: "sauvegarde lente d’aaaTroubleshoot des fichiers et dossiers dans la sauvegarde Azure | Documents Microsoft"
description: "Fournit des toohelp des conseils de dépannage vous diagnostiquez cause hello de problèmes de performances de sauvegarde Azure"
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 21d79bbd03c2706bc43fcc7c14020cffd6b919c7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="3f117-103">Résolution des problèmes de sauvegarde lente de fichiers et de dossiers dans Azure Backup</span><span class="sxs-lookup"><span data-stu-id="3f117-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="3f117-104">Cet article fournit des conseils de dépannage toohelp vous diagnostiquez cause hello de ralentissement des performances de sauvegarde des fichiers et des dossiers lorsque vous utilisez Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="3f117-104">This article provides troubleshooting guidance toohelp you diagnose hello cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="3f117-105">Lorsque vous utilisez hello Azure Backup agent tooback des fichiers, les processus de sauvegarde hello peut prendre plus longtemps que prévu.</span><span class="sxs-lookup"><span data-stu-id="3f117-105">When you use hello Azure Backup agent tooback up files, hello backup process might take longer than expected.</span></span> <span data-ttu-id="3f117-106">Ce délai peut résulter d’une ou plusieurs des éléments suivants de hello :</span><span class="sxs-lookup"><span data-stu-id="3f117-106">This delay might be caused by one or more of hello following:</span></span>

* [<span data-ttu-id="3f117-107">Sur l’ordinateur de hello est en cours de sauvegarde sont les goulots d’étranglement de performances.</span><span class="sxs-lookup"><span data-stu-id="3f117-107">There are performance bottlenecks on hello computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="3f117-108">Un autre processus ou un logiciel antivirus interfère avec hello les processus de sauvegarde Azure.</span><span class="sxs-lookup"><span data-stu-id="3f117-108">Another process or antivirus software is interfering with hello Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="3f117-109">l’agent de sauvegarde Hello est en cours d’exécution sur une machine virtuelle Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="3f117-109">hello Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="3f117-110">Vous sauvegardez un grand nombre de fichiers (plusieurs millions).</span><span class="sxs-lookup"><span data-stu-id="3f117-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="3f117-111">Avant de commencer la résolution des problèmes, nous vous recommandons de télécharger et installer hello [dernier agent Azure Backup](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="3f117-111">Before you start troubleshooting issues, we recommend that you download and install hello [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="3f117-112">Nous apporter des mises à jour fréquentes toohello sauvegarde agent toofix différents problèmes, ajouter des fonctionnalités et améliorer les performances.</span><span class="sxs-lookup"><span data-stu-id="3f117-112">We make frequent updates toohello Backup agent toofix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="3f117-113">Nous vous recommandons également fortement de consulter hello [FAQ de service Azure Backup](backup-azure-backup-faq.md) toomake que vous n’êtes pas confronté un des problèmes courants de configuration hello.</span><span class="sxs-lookup"><span data-stu-id="3f117-113">We also strongly recommend that you review hello [Azure Backup service FAQ](backup-azure-backup-faq.md) toomake sure you're not experiencing any of hello common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-hello-computer"></a><span data-ttu-id="3f117-114">Cause : Les goulots d’étranglement sur les ordinateur hello</span><span class="sxs-lookup"><span data-stu-id="3f117-114">Cause: Performance bottlenecks on hello computer</span></span>
<span data-ttu-id="3f117-115">Les goulots d’étranglement sur ordinateur hello qui est en cours de sauvegarde peuvent entraîner des délais.</span><span class="sxs-lookup"><span data-stu-id="3f117-115">Bottlenecks on hello computer that's being backed up can cause delays.</span></span> <span data-ttu-id="3f117-116">Par exemple, hello toodisk de tooread ou d’écriture de capacité de l’ordinateur, ou données toosend de la bande passante disponible sur le réseau de hello, peut provoquer des goulots d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="3f117-116">For example, hello computer's ability tooread or write toodisk, or available bandwidth toosend data over hello network, can cause bottlenecks.</span></span>

<span data-ttu-id="3f117-117">Windows fournit un outil intégré appelé [l’Analyseur de performances](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect ces goulots d’étranglement.</span><span class="sxs-lookup"><span data-stu-id="3f117-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect these bottlenecks.</span></span>

<span data-ttu-id="3f117-118">Voici quelques compteurs de performances et plages qui peuvent être utiles pour diagnostiquer les goulots d’étranglement et permettre des sauvegardes optimales.</span><span class="sxs-lookup"><span data-stu-id="3f117-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="3f117-119">Compteur</span><span class="sxs-lookup"><span data-stu-id="3f117-119">Counter</span></span> | <span data-ttu-id="3f117-120">État</span><span class="sxs-lookup"><span data-stu-id="3f117-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="3f117-121">Disque logique (disque physique)--% temps d’inactivité</span><span class="sxs-lookup"><span data-stu-id="3f117-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="3f117-122">• too50 inactif de 100 % %Idle = sain</span><span class="sxs-lookup"><span data-stu-id="3f117-122">• 100% idle too50% idle = Healthy</span></span></br><span data-ttu-id="3f117-123">• too20 inactif de 49 % %Idle = avertissement ou l’analyse</span><span class="sxs-lookup"><span data-stu-id="3f117-123">• 49% idle too20% idle = Warning or Monitor</span></span></br><span data-ttu-id="3f117-124">• too0 inactif de 19 % %Idle = critique ou des spécifications</span><span class="sxs-lookup"><span data-stu-id="3f117-124">• 19% idle too0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="3f117-125">Disque logique (disque physique)--% moy. disque s/lecture ou disque s/écriture</span><span class="sxs-lookup"><span data-stu-id="3f117-125">Logical Disk(Physical Disk)--%Avg. Disk Sec Read or Write</span></span> |<span data-ttu-id="3f117-126">• 0,001 ms de too0.015 ms = sain</span><span class="sxs-lookup"><span data-stu-id="3f117-126">• 0.001 ms too0.015 ms  = Healthy</span></span></br><span data-ttu-id="3f117-127">• 0,015 ms de too0.025 ms = avertissement ou l’analyse</span><span class="sxs-lookup"><span data-stu-id="3f117-127">• 0.015 ms too0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="3f117-128">• 0,026 ms ou plus = critique ou hors spécifications</span><span class="sxs-lookup"><span data-stu-id="3f117-128">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="3f117-129">Disque logique (disque physique)--Taille de file d’attente du disque actuelle (pour toutes les instances)</span><span class="sxs-lookup"><span data-stu-id="3f117-129">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="3f117-130">80 demandes pendant plus de 6 minutes</span><span class="sxs-lookup"><span data-stu-id="3f117-130">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="3f117-131">Mémoire--Octets de réserve non paginée</span><span class="sxs-lookup"><span data-stu-id="3f117-131">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="3f117-132">• Moins de 60 % de la réserve utilisée = sain</span><span class="sxs-lookup"><span data-stu-id="3f117-132">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="3f117-133">• 61 % too80 % du pool consommée = avertissement ou l’analyse</span><span class="sxs-lookup"><span data-stu-id="3f117-133">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="3f117-134">• Plus de 80 % de la réserve utilisée = critique ou hors spécifications</span><span class="sxs-lookup"><span data-stu-id="3f117-134">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="3f117-135">Mémoire--Octets de réserve paginée</span><span class="sxs-lookup"><span data-stu-id="3f117-135">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="3f117-136">• Moins de 60 % de la réserve utilisée = sain</span><span class="sxs-lookup"><span data-stu-id="3f117-136">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="3f117-137">• 61 % too80 % du pool consommée = avertissement ou l’analyse</span><span class="sxs-lookup"><span data-stu-id="3f117-137">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="3f117-138">• Plus de 80 % de la réserve utilisée = critique ou hors spécifications</span><span class="sxs-lookup"><span data-stu-id="3f117-138">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="3f117-139">Mémoire--Mégaoctets disponibles</span><span class="sxs-lookup"><span data-stu-id="3f117-139">Memory--Available Megabytes</span></span> |<span data-ttu-id="3f117-140">• 50 % de mémoire disponible ou plus = sain</span><span class="sxs-lookup"><span data-stu-id="3f117-140">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="3f117-141">• 25 % de mémoire disponible = analyse</span><span class="sxs-lookup"><span data-stu-id="3f117-141">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="3f117-142">• 10 % de mémoire disponible = avertissement</span><span class="sxs-lookup"><span data-stu-id="3f117-142">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="3f117-143">• Moins de 100 Mo ou 5 % de mémoire disponible = critique ou hors spécifications</span><span class="sxs-lookup"><span data-stu-id="3f117-143">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="3f117-144">Processeur--\%temps processeur (toutes les instances)</span><span class="sxs-lookup"><span data-stu-id="3f117-144">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="3f117-145">• Moins de 60 % utilisés = sain</span><span class="sxs-lookup"><span data-stu-id="3f117-145">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="3f117-146">• 61 % too90 % consommée = analyse ou une attention</span><span class="sxs-lookup"><span data-stu-id="3f117-146">• 61% too90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="3f117-147">• 91 % too100 % consommée = critique</span><span class="sxs-lookup"><span data-stu-id="3f117-147">• 91% too100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="3f117-148">Si vous déterminez que l’infrastructure hello est responsable de hello, nous recommandons que vous défragmentez disques hello régulièrement pour de meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="3f117-148">If you determine that hello infrastructure is hello culprit, we recommend that you defragment hello disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="3f117-149">Cause : un autre processus ou logiciel antivirus interfère avec Azure Backup</span><span class="sxs-lookup"><span data-stu-id="3f117-149">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="3f117-150">Nous avons vu plusieurs instances où autres processus Bonjour système Windows ont dégrader les performances de hello processus de l’agent Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="3f117-150">We've seen several instances where other processes in hello Windows system have negatively affected performance of hello Azure Backup agent process.</span></span> <span data-ttu-id="3f117-151">Par exemple, si vous utilisez hello Azure Backup agent et un autre programme tooback, les données, ou si un logiciel antivirus est en cours d’exécution et a un verrou sur les fichiers toobe sauvegardée, hello plusieurs verrous sur les fichiers peuvent entraîner des conflits.</span><span class="sxs-lookup"><span data-stu-id="3f117-151">For example, if you use both hello Azure Backup agent and another program tooback up data, or if antivirus software is running and has a lock on files toobe backed up, hello multiple locks on files might cause contention.</span></span> <span data-ttu-id="3f117-152">Dans ce cas, hello peut échouer ou tâche de hello peut prendre plus longtemps que prévu.</span><span class="sxs-lookup"><span data-stu-id="3f117-152">In this situation, hello backup might fail, or hello job might take longer than expected.</span></span>

<span data-ttu-id="3f117-153">Hello recommandation la mieux adaptée dans ce scénario est tooturn off hello autres toosee du programme de sauvegarde si l’heure de la sauvegarde hello pour l’agent de sauvegarde Azure hello change.</span><span class="sxs-lookup"><span data-stu-id="3f117-153">hello best recommendation in this scenario is tooturn off hello other backup program toosee whether hello backup time for hello Azure Backup agent changes.</span></span> <span data-ttu-id="3f117-154">En règle générale, s’assurer que plusieurs opérations de sauvegarde ne sont pas exécutés simultanément hello est suffisamment tooprevent de mutuel.</span><span class="sxs-lookup"><span data-stu-id="3f117-154">Usually, making sure that multiple backup jobs are not running at hello same time is sufficient tooprevent them from affecting each other.</span></span>

<span data-ttu-id="3f117-155">Pour les programmes antivirus, nous vous recommandons d’exclure les suivant hello fichiers et emplacements :</span><span class="sxs-lookup"><span data-stu-id="3f117-155">For antivirus programs, we recommend that you exclude hello following files and locations:</span></span>

* <span data-ttu-id="3f117-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span><span class="sxs-lookup"><span data-stu-id="3f117-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="3f117-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span><span class="sxs-lookup"><span data-stu-id="3f117-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="3f117-158">Emplacement de travail (si vous n’utilisez pas les emplacement standard hello)</span><span class="sxs-lookup"><span data-stu-id="3f117-158">Scratch location (if you're not using hello standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="3f117-159">Cause : l’agent de sauvegarde est en cours d’exécution sur une machine virtuelle Azure</span><span class="sxs-lookup"><span data-stu-id="3f117-159">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="3f117-160">Si vous exécutez l’agent de sauvegarde hello sur une machine virtuelle, les performances seront plus lente que lorsque vous l’exécutez sur un ordinateur physique.</span><span class="sxs-lookup"><span data-stu-id="3f117-160">If you're running hello Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="3f117-161">Ce comportement est attendu en raison de limitations de tooIOPS.</span><span class="sxs-lookup"><span data-stu-id="3f117-161">This is expected due tooIOPS limitations.</span></span>  <span data-ttu-id="3f117-162">Toutefois, vous pouvez optimiser les performances de hello en basculant les lecteurs de données hello tooAzure stockage Premium sont en cours de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3f117-162">However, you can optimize hello performance by switching hello data drives that are being backed up tooAzure Premium Storage.</span></span> <span data-ttu-id="3f117-163">Nous travaillons sur la résolution de ce problème, et correction de hello sera disponible dans une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="3f117-163">We're working on fixing this issue, and hello fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="3f117-164">Cause : vous sauvegardez un grand nombre de fichiers (plusieurs millions)</span><span class="sxs-lookup"><span data-stu-id="3f117-164">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="3f117-165">Le déplacement d’un volume important de données prend plus de temps que le déplacement d’un volume plus restreint de données.</span><span class="sxs-lookup"><span data-stu-id="3f117-165">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="3f117-166">Dans certains cas, l’heure de la sauvegarde est lié toonot hello uniquement la taille des données de hello, mais également nombre hello des fichiers ou dossiers.</span><span class="sxs-lookup"><span data-stu-id="3f117-166">In some cases, backup time is related toonot only hello size of hello data, but also hello number of files or folders.</span></span> <span data-ttu-id="3f117-167">Cela est particulièrement vrai lorsque des millions de petits fichiers (quelques octets tooa quelques kilo-octets) sont en cours de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3f117-167">This is especially true when millions of small files (a few bytes tooa few kilobytes) are being backed up.</span></span>

<span data-ttu-id="3f117-168">Ce comportement se produit parce que pendant que vous êtes sauvegarde des données de hello et en la déplaçant tooAzure, Azure est catalogage simultanément vos fichiers.</span><span class="sxs-lookup"><span data-stu-id="3f117-168">This behavior occurs because while you're backing up hello data and moving it tooAzure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="3f117-169">Dans certains cas rares, l’opération de catalogue hello peut prendre plus longtemps que prévu.</span><span class="sxs-lookup"><span data-stu-id="3f117-169">In some rare scenarios, hello catalog operation might take longer than expected.</span></span>

<span data-ttu-id="3f117-170">Hello suivant indicateurs peut vous aider à comprendre le goulot d’étranglement hello et de travail en conséquence sur les étapes suivantes de hello :</span><span class="sxs-lookup"><span data-stu-id="3f117-170">hello following indicators can help you understand hello bottleneck and accordingly work on hello next steps:</span></span>

* <span data-ttu-id="3f117-171">**L’interface utilisateur affiche la progression hello pour transférer des données**.</span><span class="sxs-lookup"><span data-stu-id="3f117-171">**UI is showing progress for hello data transfer**.</span></span> <span data-ttu-id="3f117-172">Hello données sont toujours transférées.</span><span class="sxs-lookup"><span data-stu-id="3f117-172">hello data is still being transferred.</span></span> <span data-ttu-id="3f117-173">la bande passante du réseau Hello ou taille hello des données pourrait provoquer des délais.</span><span class="sxs-lookup"><span data-stu-id="3f117-173">hello network bandwidth or hello size of data might be causing delays.</span></span>
* <span data-ttu-id="3f117-174">**L’interface utilisateur ne s’affichent pas progression hello pour transférer des données**.</span><span class="sxs-lookup"><span data-stu-id="3f117-174">**UI is not showing progress for hello data transfer**.</span></span> <span data-ttu-id="3f117-175">Ouvrez hello journaux situé C:\Microsoft Azure Recovery Services Agent\Temp, puis recherchent à hello entrée FileProvider::EndData dans les journaux hello.</span><span class="sxs-lookup"><span data-stu-id="3f117-175">Open hello logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for hello FileProvider::EndData entry in hello logs.</span></span> <span data-ttu-id="3f117-176">Cette entrée signifie que hello le transfert de données terminé et opération de catalogue hello se produit.</span><span class="sxs-lookup"><span data-stu-id="3f117-176">This entry signifies that hello data transfer finished and hello catalog operation is happening.</span></span> <span data-ttu-id="3f117-177">Ne pas annuler les travaux de sauvegarde hello.</span><span class="sxs-lookup"><span data-stu-id="3f117-177">Don't cancel hello backup jobs.</span></span> <span data-ttu-id="3f117-178">Au lieu de cela, attendez un peu plus longtemps hello catalogue opération toofinish.</span><span class="sxs-lookup"><span data-stu-id="3f117-178">Instead, wait a little longer for hello catalog operation toofinish.</span></span> <span data-ttu-id="3f117-179">Si hello problème persiste, contactez [prise en charge Azure](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="3f117-179">If hello problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
