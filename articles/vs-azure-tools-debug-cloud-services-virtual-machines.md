---
title: aaaDebugging Azure cloud service ou machine virtuelle dans Visual Studio | Documents Microsoft
description: "Débogage d’un service cloud ou d’une machine virtuelle dans Visual Studio"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 32a326430021ba2ea9317a6a71fa005d4b87c273
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="8a8a5-103">Débogage d'un service cloud ou d'une machine virtuelle Azure dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8a8a5-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="8a8a5-104">Visual Studio vous offre différentes options de débogage des machines virtuelles et services cloud Azure.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="8a8a5-105">Déboguer votre service cloud sur votre ordinateur local</span><span class="sxs-lookup"><span data-stu-id="8a8a5-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="8a8a5-106">Vous pouvez enregistrer temps et l’argent à l’aide de toodebug d’émulateur de calcul Azure hello votre service cloud sur un ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-106">You can save time and money by using hello Azure compute emulator toodebug your cloud service on a local machine.</span></span> <span data-ttu-id="8a8a5-107">Déboguer un service localement avant de le déployer vous permet d’améliorer la fiabilité et les performances, tout en évitant les coûts de temps de calcul.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="8a8a5-108">Certaines erreurs peuvent toutefois se produire quand vous exécutez un service cloud directement dans Azure.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="8a8a5-109">Vous pouvez déboguer ces erreurs si vous activez le débogage distant lorsque vous publiez votre service, puis attachez l’instance de rôle du débogueur tooa hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-109">You can debug these errors if you enable remote debugging when you publish your service and then attach hello debugger tooa role instance.</span></span>

<span data-ttu-id="8a8a5-110">émulateur de Hello simule le service de calcul Azure hello et s’exécute dans votre environnement local afin que vous pouvez tester et déboguer votre service cloud avant de le déployer.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-110">hello emulator simulates hello Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="8a8a5-111">Hello émulateur handles hello du cycle de vie de vos instances de rôle et fournit l’accès des ressources toosimulated, tels que le stockage local.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-111">hello emulator handles hello lifecycle of your role instances and provides access toosimulated resources, such as local storage.</span></span> <span data-ttu-id="8a8a5-112">Lorsque vous déboguez ou exécutez votre service à partir de Visual Studio, il démarre automatiquement émulateur de hello comme une application en arrière-plan et puis déploie un émulateur toohello de votre service.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-112">When you debug or run your service from Visual Studio, it automatically starts hello emulator as a background application and then deploys your service toohello emulator.</span></span> <span data-ttu-id="8a8a5-113">Vous pouvez utiliser hello émulateur tooview votre service lorsqu’il s’exécute dans l’environnement local de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-113">You can use hello emulator tooview your service when it runs in hello local environment.</span></span> <span data-ttu-id="8a8a5-114">Vous pouvez exécuter hello complète version ou hello express de l’émulateur de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-114">You can run hello full version or hello express version of hello emulator.</span></span> <span data-ttu-id="8a8a5-115">(Version express de hello de l’émulateur de hello à partir de Azure 2.3, est par défaut de hello.) Consultez [tooRun d’à l’aide de l’émulateur Express et déboguer un Service Cloud localement](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-115">(Starting with Azure 2.3, hello express version of hello emulator is hello default.) See [Using Emulator Express tooRun and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="toodebug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="8a8a5-116">toodebug votre cloud service sur votre ordinateur local</span><span class="sxs-lookup"><span data-stu-id="8a8a5-116">toodebug your cloud service on your local computer</span></span>
1. <span data-ttu-id="8a8a5-117">Dans la barre de menus de hello, choisissez **déboguer**, **démarrer le débogage** toorun votre projet de service cloud Azure.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-117">On hello menu bar, choose **Debug**, **Start Debugging** toorun your Azure cloud service project.</span></span> <span data-ttu-id="8a8a5-118">Vous pouvez aussi appuyer sur F5.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="8a8a5-119">Vous verrez un message hello émulateur de calcul démarre.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-119">You’ll see a message that hello Compute Emulator is starting.</span></span> <span data-ttu-id="8a8a5-120">Au démarrage de l’émulateur de hello, l’icône de barre d’état système hello le confirme.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-120">When hello emulator starts, hello system tray icon confirms it.</span></span>

    ![Émulateur Azure dans la barre d’état système hello](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="8a8a5-122">Afficher l’interface utilisateur de hello pour l’émulateur de calcul hello en ouvrant le menu contextuel hello hello icône Azure dans la zone de notification hello et sélectionnez **Show Compute Emulator UI**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-122">Display hello user interface for hello compute emulator by opening hello shortcut menu for hello Azure icon in hello notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="8a8a5-123">volet de gauche de Hello Hello l’interface utilisateur affiche les services de hello qui sont actuellement déployés toohello calcul émulateur et hello instances de rôle que chaque service est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-123">hello left pane of hello UI shows hello services that are currently deployed toohello compute emulator and hello role instances that each service is running.</span></span> <span data-ttu-id="8a8a5-124">Vous pouvez choisir hello service ou des rôles toodisplay cycle de vie de la journalisation et des informations de diagnostic dans le volet de droite hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-124">You can choose hello service or roles toodisplay lifecycle, logging, and diagnostic information in hello right pane.</span></span> <span data-ttu-id="8a8a5-125">Si vous placez le focus de hello dans la marge supérieure de hello d’une fenêtre incluse, il développe le volet de droite toofill hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-125">If you put hello focus in hello top margin of an included window, it expands toofill hello right pane.</span></span>
3. <span data-ttu-id="8a8a5-126">Étapes à l’application hello en sélectionnant les commandes hello **déboguer** menu et en définissant des points d’arrêt dans votre code.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-126">Step through hello application by selecting commands on hello **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="8a8a5-127">À mesure que vous parcourez l’application hello dans le débogueur de hello, les volets de hello sont mis à jour avec l’état actuel de hello de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-127">As you step through hello application in hello debugger, hello panes are updated with hello current status of hello application.</span></span> <span data-ttu-id="8a8a5-128">Lorsque vous arrêtez le débogage, le déploiement de l’application hello est supprimé.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-128">When you stop debugging, hello application deployment is deleted.</span></span> <span data-ttu-id="8a8a5-129">Si votre application inclut un rôle web et que vous avez défini le navigateur web hello de la propriété action hello démarrage toostart, Visual Studio démarre votre application web dans le navigateur de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-129">If your application includes a web role and you've set hello Startup action property toostart hello web browser, Visual Studio starts your web application in hello browser.</span></span> <span data-ttu-id="8a8a5-130">Si vous modifiez le nombre de hello d’instances d’un rôle dans la configuration du service hello, vous devez arrêter votre service cloud et puis redémarrez le débogage afin que vous puissiez déboguer ces nouvelles instances de rôle de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-130">If you change hello number of instances of a role in hello service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of hello role.</span></span>

    <span data-ttu-id="8a8a5-131">**Remarque :** lorsque vous arrêtez en cours d’exécution ou débogage de votre service, hello émulateur de calcul local et l’émulateur de stockage ne sont pas arrêtés.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-131">**Note:** When you stop running or debugging your service, hello local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="8a8a5-132">Vous devez les arrêter explicitement à partir de la zone de notification hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-132">You must stop them explicitly from hello notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="8a8a5-133">Déboguer un service cloud dans Azure</span><span class="sxs-lookup"><span data-stu-id="8a8a5-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="8a8a5-134">toodebug un service cloud à partir d’un ordinateur distant, vous devez activer cette fonctionnalité explicitement lorsque vous déployez votre service cloud afin que requis (msvsmon.exe, par exemple) de services sont installés sur des machines virtuelles hello qui exécutent vos instances de rôle.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-134">toodebug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on hello virtual machines that run your role instances.</span></span> <span data-ttu-id="8a8a5-135">Si vous n’avez pas activé le débogage distant lorsque vous avez publié le service de hello, vous avez le service de hello toorepublish avec le débogage distant activé.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-135">If you didn't enable remote debugging when you published hello service, you have toorepublish hello service with remote debugging enabled.</span></span>

<span data-ttu-id="8a8a5-136">L’activation du débogage distant pour un service cloud n’entraîne pas de baisse des performances, ni de coûts supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="8a8a5-137">Vous ne devez pas utiliser le débogage distant sur un service de production, car les clients qui utilisent le service de hello peuvent être compromises.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-137">You shouldn't use remote debugging on a production service, because clients who use hello service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="8a8a5-138">Lorsque vous publiez un service cloud à partir de Visual Studio, vous pouvez activer **IntelliTrace** pour tous les rôles dans ce service qui hello cible .NET Framework 4 ou hello .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target hello .NET Framework 4 or hello .NET Framework 4.5.</span></span> <span data-ttu-id="8a8a5-139">À l’aide de **IntelliTrace**, vous pouvez examiner les événements qui se sont produites dans une instance de rôle Bonjour passées et reproduire le contexte hello à ce stade.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in hello past and reproduce hello context from that time.</span></span> <span data-ttu-id="8a8a5-140">Consultez [Débogage d’un service cloud publié avec IntelliTrace et Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) et [Utilisation d’IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="tooenable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="8a8a5-141">tooenable pour un service cloud du débogage distant</span><span class="sxs-lookup"><span data-stu-id="8a8a5-141">tooenable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="8a8a5-142">Ouvrez le menu contextuel hello hello projet Windows Azure, puis **publier**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-142">Open hello shortcut menu for hello Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="8a8a5-143">Sélectionnez hello **intermédiaire** environnement et hello **déboguer** configuration.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-143">Select hello **Staging** environment and hello **Debug** configuration.</span></span>

    <span data-ttu-id="8a8a5-144">Il s’agit simplement d’une indication.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-144">This is only a guideline.</span></span> <span data-ttu-id="8a8a5-145">Vous pouvez choisir toorun vos environnements de test dans un environnement de Production.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-145">You can opt toorun your test environments in a Production environment.</span></span> <span data-ttu-id="8a8a5-146">Toutefois, vous pouvez affecter les utilisateurs si vous activez le débogage distant sur l’environnement de Production hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-146">However, you may adversely affect users if you enable remote debugging on hello Production environment.</span></span> <span data-ttu-id="8a8a5-147">Vous pouvez choisir la configuration Release de hello, mais la configuration de débogage hello rend le débogage.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-147">You can choose hello Release configuration, but hello Debug configuration makes debugging easier.</span></span>

    ![Choisissez la configuration de débogage hello](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="8a8a5-149">Suivez les étapes habituelles hello, mais sélectionnez hello **activer le débogueur distant pour tous les rôles** case à cocher sur hello **paramètres avancés** onglet.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-149">Follow hello usual steps, but select hello **Enable Remote Debugger for all roles** check box on hello **Advanced Settings** tab.</span></span>

    ![Configuration Debug](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="tooattach-hello-debugger-tooa-cloud-service-in-azure"></a><span data-ttu-id="8a8a5-151">service de cloud tooattach hello débogueur tooa dans Azure</span><span class="sxs-lookup"><span data-stu-id="8a8a5-151">tooattach hello debugger tooa cloud service in Azure</span></span>
1. <span data-ttu-id="8a8a5-152">Dans l’Explorateur de serveurs, développez le nœud de hello pour votre service cloud.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-152">In Server Explorer, expand hello node for your cloud service.</span></span>
2. <span data-ttu-id="8a8a5-153">Menu contextuel de hello ouverte pour le rôle de hello ou toowhich d’instance de rôle que vous souhaitez tooattach, puis sélectionnez **attacher le débogueur**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-153">Open hello shortcut menu for hello role or role instance toowhich you want tooattach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="8a8a5-154">Si vous déboguez un rôle, le débogueur de Visual Studio hello attache instance tooeach de ce rôle.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-154">If you debug a role, hello Visual Studio debugger attaches tooeach instance of that role.</span></span> <span data-ttu-id="8a8a5-155">Hello s’y arrête pas sur un point d’arrêt pour hello première instance de rôle qui exécute cette ligne de code et respecte les conditions de ce point d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-155">hello debugger will break on a breakpoint for hello first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="8a8a5-156">Si vous déboguez une instance, hello débogueur est attaché tooonly que l’instance et s’interrompt sur un point d’arrêt uniquement lorsque cette instance spécifique exécute cette ligne de code et respecte hello les conditions du point d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-156">If you debug an instance, hello debugger attaches tooonly that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets hello breakpoint's conditions.</span></span>

    ![Attacher le débogueur](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="8a8a5-158">Une fois que le débogueur de hello attache tooan instance, de débogage comme d’habitude.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-158">After hello debugger attaches tooan instance, debug as usual.</span></span> <span data-ttu-id="8a8a5-159">Hello est automatiquement attaché toohello des processus de l’ordinateur hôte approprié pour votre rôle.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-159">hello debugger automatically attaches toohello appropriate host process for your role.</span></span> <span data-ttu-id="8a8a5-160">Selon quel hello est rôle, hello débogueur attache toow3wp.exe, WaWorkerHost.exe ou WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-160">Depending on what hello role is, hello debugger attaches toow3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="8a8a5-161">tooverify hello processus toowhich hello débogueur est attaché, développez le nœud d’instance hello dans l’Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-161">tooverify hello process toowhich hello debugger is attached, expand hello instance node in Server Explorer.</span></span> <span data-ttu-id="8a8a5-162">Pour plus d’informations sur les processus Azure, consultez [Architecture de rôle Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Boîte de dialogue Sélectionner le type de code](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="8a8a5-164">tooidentify hello processus toowhich hello est associé, ouvrez hello boîte de dialogue processus, sur hello barre de menus, en choisissant le débogage, Windows, les processus.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-164">tooidentify hello processes toowhich hello debugger is attached, open hello Processes dialog box by, on hello menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="8a8a5-165">(Clavier : Ctrl + Alt + Z) toodetach un processus spécifique, ouvrez le menu contextuel et sélectionnez **détacher le processus**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-165">(Keyboard: Ctrl+Alt+Z)toodetach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="8a8a5-166">Ou, recherchez le nœud d’instance hello dans l’Explorateur de serveurs, de trouver le processus de hello, ouvrez son menu contextuel, puis sélectionnez **détacher le processus**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-166">Or, locate hello instance node in Server Explorer, find hello process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Processus de débogage](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="8a8a5-168">Évitez les arrêts longs aux points d'arrêt avec le débogage à distance.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="8a8a5-169">Azure traite un processus est arrêté pendant plus de quelques minutes comme non réactif et cesse d’envoyer l’instance toothat de trafic.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="8a8a5-170">Si vous arrêtez pendant trop longtemps, msvsmon.exe est détaché du processus de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-170">If you stop for too long, msvsmon.exe detaches from hello process.</span></span>
>
>

<span data-ttu-id="8a8a5-171">débogueur de hello toodetach de tous les processus dans votre instance ou le rôle, le menu contextuel Ouvrir hello hello rôle ou cette instance que vous déboguez, puis sélectionnez **détacher le débogueur**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-171">toodetach hello debugger from all processes in your instance or role, open hello shortcut menu for hello role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="8a8a5-172">Limitations du débogage distant dans Azure</span><span class="sxs-lookup"><span data-stu-id="8a8a5-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="8a8a5-173">À partir d’Azure SDK 2.3, le débogage distant a hello limites suivantes.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-173">From Azure SDK 2.3, remote debugging has hello following limitations.</span></span>

* <span data-ttu-id="8a8a5-174">Quand le débogage distant est activé, vous ne pouvez pas publier un service cloud dans lequel un rôle comporte plus de 25 instances.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="8a8a5-175">débogueur de Hello utilise too30424 30400 de ports, 31400 too31424 et too32424 32400.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-175">hello debugger uses ports 30400 too30424, 31400 too31424 and 32400 too32424.</span></span> <span data-ttu-id="8a8a5-176">Si vous essayez toouse ces ports, vous ne serez pas en mesure de toopublish votre service et l’une des hello messages d’erreur suivants seront affiche dans le journal d’activité hello pour Azure :</span><span class="sxs-lookup"><span data-stu-id="8a8a5-176">If you try toouse any of these ports, you won't be able toopublish your service, and one of hello following error messages will appear in hello activity log for Azure:</span></span>

  * <span data-ttu-id="8a8a5-177">Erreur lors de la validation du fichier .cscfg de hello sur le fichier de .csdef hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-177">Error validating hello .cscfg file against hello .csdef file.</span></span>
    <span data-ttu-id="8a8a5-178">Hello réservé la plage de ports 'plage' pour le point de terminaison que Microsoft.windowsazure.plugins.remotedebugger.Connector du rôle « rôle » chevauche un port déjà défini ou la plage.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-178">hello reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="8a8a5-179">L’allocation a échoué.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-179">Allocation failed.</span></span> <span data-ttu-id="8a8a5-180">Veuillez réessayer plus tard, essayez de réduire hello taille de machine virtuelle ou le nombre d’instances de rôle ou essayez de déployer tooa autre région.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-180">Please retry later, try reducing hello VM size or number of role instances, or try deploying tooa different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="8a8a5-181">Déboguer des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="8a8a5-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="8a8a5-182">Vous pouvez déboguer des programmes exécutés sur des machines virtuelles Azure à l’aide de l’Explorateur de serveurs dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="8a8a5-183">Lorsque vous activez le débogage distant sur une machine virtuelle Azure, Azure installe l’extension hello de débogage distant sur l’ordinateur virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-183">When you enable remote debugging on an Azure virtual machine, Azure installs hello remote debugging extension on hello virtual machine.</span></span> <span data-ttu-id="8a8a5-184">Ensuite, vous pouvez attacher tooprocesses sur l’ordinateur virtuel de hello et de débogage comme vous le feriez normalement.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-184">Then, you can attach tooprocesses on hello virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="8a8a5-185">Machines virtuelles créées par pile de gestionnaire de ressources Azure hello peuvent être débogués à distance à l’aide de l’Explorateur de Cloud dans Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-185">Virtual machines created through hello Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="8a8a5-186">Pour plus d’informations, consultez [Gestion des ressources Azure avec Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="toodebug-an-azure-virtual-machine"></a><span data-ttu-id="8a8a5-187">toodebug une machine virtuelle Azure</span><span class="sxs-lookup"><span data-stu-id="8a8a5-187">toodebug an Azure virtual machine</span></span>
1. <span data-ttu-id="8a8a5-188">Dans l’Explorateur de serveurs, développez les nœuds de Machines virtuelles hello et sélectionnez hello de machine virtuelle de hello que vous souhaitez toodebug.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-188">In Server Explorer, expand hello Virtual Machines node and select hello node of hello virtual machine that you want toodebug.</span></span>
2. <span data-ttu-id="8a8a5-189">Ouvrez le menu contextuel de hello et sélectionnez **activer le débogage**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-189">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="8a8a5-190">Lorsque le système demande si vous êtes certain que si vous souhaitez que le débogage sur l’ordinateur virtuel hello, sélectionnez tooenable **Oui**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-190">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="8a8a5-191">Azure installe l’extension de débogage distant hello sur le débogage de tooenable hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-191">Azure installs hello remote debugging extension on hello virtual machine tooenable debugging.</span></span>

    ![Commande d’activation du débogage de machine virtuelle](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Journal des activités Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="8a8a5-194">Une fois que l’extension de débogage distant hello a terminé l’installation, ouvrez le menu contextuel de l’ordinateur virtuel de hello et sélectionnez **attacher le débogueur...**</span><span class="sxs-lookup"><span data-stu-id="8a8a5-194">After hello remote debugging extension finishes installing, open hello virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="8a8a5-195">Azure Obtient une liste des processus de hello sur l’ordinateur virtuel de hello et les affiche dans la boîte de dialogue tooProcess hello attacher.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-195">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Commande Attacher le débogueur](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="8a8a5-197">Bonjour **attacher tooProcess** boîte de dialogue, sélectionnez **sélectionnez** tooshow seuls les types hello la liste des résultats de hello toolimit de code vous souhaitez toodebug.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-197">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="8a8a5-198">Vous pouvez déboguer du code managé 32 ou 64 bits, du code natif ou les deux.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Boîte de dialogue Sélectionner le type de code](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="8a8a5-200">Sélectionner les processus hello vous souhaitez toodebug sur l’ordinateur virtuel de hello, puis sélectionnez **attacher**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-200">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="8a8a5-201">Par exemple, vous pouvez choisir le processus w3wp.exe de hello si vous souhaitiez toodebug une application web sur l’ordinateur virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-201">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="8a8a5-202">Pour plus d’informations, consultez [Déboguer un ou plusieurs processus dans Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) et [Architecture de rôle Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="8a8a5-203">Créer un projet web et une machine virtuelle pour le débogage</span><span class="sxs-lookup"><span data-stu-id="8a8a5-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="8a8a5-204">Avant de publier votre projet Windows Azure, il peut s’avérer utile tootest dans un environnement contrôlé prenant en charge le débogage et scénarios de test, et où vous pouvez installer le test et surveillance des programmes.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-204">Before publishing your Azure project, you might find it useful tootest it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="8a8a5-205">Une façon toodo il s’agit de tooremotely déboguer votre application sur un ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-205">One way toodo this is tooremotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="8a8a5-206">Projets ASP.NET Visual Studio offrent une option toocreate une machine virtuelle que vous pouvez utiliser pour tester les applications.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-206">Visual Studio ASP.NET projects offer an option toocreate a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="8a8a5-207">machine virtuelle de Hello inclut des points de terminaison généralement requis tels que PowerShell, Bureau à distance et WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-207">hello virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="toocreate-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="8a8a5-208">toocreate un projet web et un ordinateur virtuel pour le débogage</span><span class="sxs-lookup"><span data-stu-id="8a8a5-208">toocreate a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="8a8a5-209">Dans Visual Studio, créez une application web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="8a8a5-210">Dans le dialogue de nouveau projet ASP.NET hello, Bonjour section Azure, choisissez **Machine virtuelle** dans la zone de liste déroulante hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-210">In hello New ASP.NET Project dialog, in hello Azure section, choose **Virtual Machine** in hello dropdown list box.</span></span> <span data-ttu-id="8a8a5-211">Laissez hello **créer des ressources distantes** case à cocher activée.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-211">Leave hello **Create remote resources** check box selected.</span></span> <span data-ttu-id="8a8a5-212">Sélectionnez **OK** tooproceed.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-212">Select **OK** tooproceed.</span></span>

    <span data-ttu-id="8a8a5-213">Hello **créer un ordinateur virtuel sur Azure** boîte de dialogue s’affiche.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-213">hello **Create virtual machine on Azure** dialog box appears.</span></span>

    ![Boîte de dialogue de création de projet web ASP.NET](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="8a8a5-215">**Remarque :** vous serez invité à indiquer toosign dans tooyour compte Azure si vous n’êtes pas déjà connecté.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-215">**Note:** You'll be asked toosign in tooyour Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="8a8a5-216">Sélectionnez hello divers paramètres pour la machine virtuelle de hello, puis sélectionnez **OK**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-216">Select hello various settings for hello virtual machine and then select **OK**.</span></span> <span data-ttu-id="8a8a5-217">Pour plus d’informations, consultez [Machines virtuelles](http://go.microsoft.com/fwlink/?LinkId=623033) .</span><span class="sxs-lookup"><span data-stu-id="8a8a5-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="8a8a5-218">nom Hello que vous entrez pour le nom DNS sera nom hello de machine virtuelle de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-218">hello name you enter for DNS name will be hello name of hello virtual machine.</span></span>

    ![Boîte de dialogue Créer une machine virtuelle sur Microsoft Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="8a8a5-220">Azure crée hello virtual machine, puis déploie et configure les points de terminaison hello, telles que le Bureau à distance et Web Deploy</span><span class="sxs-lookup"><span data-stu-id="8a8a5-220">Azure creates hello virtual machine and then provisions and configures hello endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="8a8a5-221">Une fois que l’ordinateur virtuel de hello est entièrement configuré, sélectionnez le nœud de l’ordinateur virtuel de hello dans l’Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-221">After hello virtual machine is fully configured, select hello virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="8a8a5-222">Ouvrez le menu contextuel de hello et sélectionnez **activer le débogage**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-222">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="8a8a5-223">Lorsque le système demande si vous êtes certain que si vous souhaitez que le débogage sur l’ordinateur virtuel hello, sélectionnez tooenable **Oui**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-223">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="8a8a5-224">Azure installe hello débogage extension toohello machine virtuelle tooenable débogage distant.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-224">Azure installs hello remote debugging extension toohello virtual machine tooenable debugging.</span></span>

    ![Commande d’activation du débogage de machine virtuelle](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Journal des activités Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="8a8a5-227">Publiez votre projet comme décrit dans la rubrique [Déploiement d’un projet web à l’aide de la publication en un clic dans Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="8a8a5-228">Pour que vous puissiez toodebug sur machine virtuelle hello, sur hello **paramètres** page Hello **publier le site Web** Assistant, sélectionnez **déboguer** en tant que la configuration de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-228">Because you want toodebug on hello virtual machine, on hello **Settings** page of hello **Publish Web** wizard, select **Debug** as hello configuration.</span></span> <span data-ttu-id="8a8a5-229">Ceci permet de s’assurer que les symboles de code sont disponibles pendant le débogage.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Paramètres de publication](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="8a8a5-231">Bonjour **Options de publication du fichier**, sélectionnez **supprimer les fichiers supplémentaires à la destination** si le projet de hello a déjà été déployé à un moment antérieur.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-231">In hello **File Publish Options**, select **Remove additional files at destination** if hello project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="8a8a5-232">Une fois le projet de hello publie, sur le menu contextuel de l’ordinateur virtuel de hello dans l’Explorateur de serveurs, sélectionnez **attacher le débogueur...**</span><span class="sxs-lookup"><span data-stu-id="8a8a5-232">After hello project publishes, on hello virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="8a8a5-233">Azure Obtient une liste des processus de hello sur l’ordinateur virtuel de hello et les affiche dans la boîte de dialogue tooProcess hello attacher.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-233">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Commande Attacher le débogueur](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="8a8a5-235">Bonjour **attacher tooProcess** boîte de dialogue, sélectionnez **sélectionnez** tooshow seuls les types hello la liste des résultats de hello toolimit de code vous souhaitez toodebug.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-235">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="8a8a5-236">Vous pouvez déboguer du code managé 32 ou 64 bits, du code natif ou les deux.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Boîte de dialogue Sélectionner le type de code](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="8a8a5-238">Sélectionner les processus hello vous souhaitez toodebug sur l’ordinateur virtuel de hello, puis sélectionnez **attacher**.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-238">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="8a8a5-239">Par exemple, vous pouvez choisir le processus w3wp.exe de hello si vous souhaitiez toodebug une application web sur l’ordinateur virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-239">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="8a8a5-240">Pour plus d’informations, consultez [Déboguer un ou plusieurs processus dans Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) .</span><span class="sxs-lookup"><span data-stu-id="8a8a5-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8a8a5-241">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8a8a5-241">Next steps</span></span>
* <span data-ttu-id="8a8a5-242">Utilisez **Intellitrace** toocollect un journal des événements à partir d’un serveur de publication et des appels.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-242">Use **Intellitrace** toocollect a log of calls and events from a release server.</span></span> <span data-ttu-id="8a8a5-243">Consultez [Débogage d’un service cloud publié avec IntelliTrace et Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="8a8a5-244">Utilisez **Azure Diagnostics** toolog obtenir des informations détaillées à partir de l’exécution de code dans des rôles, si les rôles hello sont en cours d’exécution dans l’environnement de développement hello ou dans Azure.</span><span class="sxs-lookup"><span data-stu-id="8a8a5-244">Use **Azure Diagnostics** toolog detailed information from code running within roles, whether hello roles are running in hello development environment or in Azure.</span></span> <span data-ttu-id="8a8a5-245">Consultez [Collecter des données de journalisation avec les diagnostics Azure](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="8a8a5-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>
