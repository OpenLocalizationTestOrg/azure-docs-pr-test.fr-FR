---
title: "Connexions hybrides d’Azure App Service | Microsoft Docs"
description: "Comment créer et utiliser des connexions hybrides pour accéder aux ressources dans des réseaux hétérogènes"
services: app-service
documentationcenter: 
author: ccompy
manager: stefsch
editor: 
ms.assetid: 66774bde-13f5-45d0-9a70-4e9536a4f619
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/22/2017
ms.author: ccompy
ms.openlocfilehash: fef9e7b280387934cb093f51b4c8aa134a3b87e7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-app-service-hybrid-connections"></a><span data-ttu-id="9eaea-103">Connexions hybrides d’Azure App Service</span><span class="sxs-lookup"><span data-stu-id="9eaea-103">Azure App Service Hybrid Connections</span></span> #

## <a name="overview"></a><span data-ttu-id="9eaea-104">Vue d’ensemble</span><span class="sxs-lookup"><span data-stu-id="9eaea-104">Overview</span></span> ##

<span data-ttu-id="9eaea-105">Les connexions hybrides sont un service dans Azure et une fonctionnalité dans Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="9eaea-105">Hybrid Connections is both a service in Azure as well as a feature in the Azure App Service.</span></span>  <span data-ttu-id="9eaea-106">En tant que service, il exploite et inclut des fonctionnalités qui vont au-delà de celles utilisées dans Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="9eaea-106">As a service it has use and capabilities beyond those that are leveraged in the Azure App Service.</span></span>  <span data-ttu-id="9eaea-107">Pour en savoir plus sur les connexions hybrides et leur utilisation en dehors d’Azure App Service, vous pouvez démarrer ici, [Connexions hybrides Azure Relay][HCService]</span><span class="sxs-lookup"><span data-stu-id="9eaea-107">To learn more about Hybrid Connections and their usage outside of the Azure App Service you can start here, [Azure Relay Hybrid Connections][HCService]</span></span>

<span data-ttu-id="9eaea-108">Dans Azure App Service, les connexions hybrides peuvent être utilisées pour accéder aux ressources d’application d’autres réseaux.</span><span class="sxs-lookup"><span data-stu-id="9eaea-108">Within the Azure App Service, hybrid connections can be used to access application resources in other networks.</span></span> <span data-ttu-id="9eaea-109">Elles permettent d’accéder À PARTIR DE votre application À un point de terminaison d’application.</span><span class="sxs-lookup"><span data-stu-id="9eaea-109">It provides access FROM your app TO an application endpoint.</span></span>  <span data-ttu-id="9eaea-110">Elles n’autorisent pas à une autre fonction d’accéder à votre application.</span><span class="sxs-lookup"><span data-stu-id="9eaea-110">It does not enable an alternative capability to access your application.</span></span>  <span data-ttu-id="9eaea-111">Utilisée dans App Service, chaque connexion hybride correspond à une combinaison d’hôte et de port TCP unique.</span><span class="sxs-lookup"><span data-stu-id="9eaea-111">As used in the App Service, each hybrid connection correlates to a single TCP host and port combination.</span></span>  <span data-ttu-id="9eaea-112">Cela signifie que le point de terminaison de connexion hybride peut se trouver sur un quelconque système d’exploitation et toute application à condition que vous ayez accès à un port d’écoute TCP.</span><span class="sxs-lookup"><span data-stu-id="9eaea-112">This means that the hybrid connection endpoint can be on any operating system and any application provided you are hitting a TCP listening port.</span></span> <span data-ttu-id="9eaea-113">Les connexions hybrides ne détectent pas et ne prennent pas en compte le protocole d’application ou les ressources auxquels vous accédez.</span><span class="sxs-lookup"><span data-stu-id="9eaea-113">Hybrid connections does not know or care what the application protocol is or what you are accessing.</span></span>  <span data-ttu-id="9eaea-114">Elles fournissent simplement un accès réseau.</span><span class="sxs-lookup"><span data-stu-id="9eaea-114">It is simply providing network access.</span></span>  


## <a name="how-it-works"></a><span data-ttu-id="9eaea-115">Fonctionnement</span><span class="sxs-lookup"><span data-stu-id="9eaea-115">How it works</span></span> ##
<span data-ttu-id="9eaea-116">La fonctionnalité Connexions hybrides se compose de deux appels sortants vers Service Bus Relay.</span><span class="sxs-lookup"><span data-stu-id="9eaea-116">The hybrid connections feature consists of two outbound calls to Service Bus Relay.</span></span>  <span data-ttu-id="9eaea-117">Il existe une connexion à partir d’une bibliothèque sur l’hôte sur lequel votre application est exécutée dans le service d’application, et entre le Gestionnaire de connexion hybride (GCH) et Service Bus Relay.</span><span class="sxs-lookup"><span data-stu-id="9eaea-117">There is a connection from a library on the host where your app is running in the app service and then there is a connection from the Hybrid Connection Manager(HCM) to Service Bus relay.</span></span>  <span data-ttu-id="9eaea-118">Le GCH est un service de relais que vous déployez dans le réseau d’hébergement</span><span class="sxs-lookup"><span data-stu-id="9eaea-118">The HCM is a relay service that you deploy within the network hosting</span></span> 

<span data-ttu-id="9eaea-119">Grâce aux deux connexions liées, votre application inclut un tunnel TCP vers une combinaison hôte:port fixe de l’autre côté du GCH.</span><span class="sxs-lookup"><span data-stu-id="9eaea-119">Through the two joined connections your app has a TCP tunnel to a fixed host:port combination on the other side of the HCM.</span></span>  <span data-ttu-id="9eaea-120">La connexion utilise TLS 1.2 pour la sécurité et des clés SAP pour l’authentification/autorisation.</span><span class="sxs-lookup"><span data-stu-id="9eaea-120">The connection uses TLS 1.2 for security and SAS keys for authentication/authorization.</span></span>    

![][1]

<span data-ttu-id="9eaea-121">Lorsque votre application effectue une requête DNS qui correspond à un point de terminaison de connexion hybride configuré, le trafic TCP sortant est redirigé vers la connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-121">When your app makes a DNS request that matches a configure Hybrid Connection endpoint, then the outbound TCP traffic will be redirected down the hybrid connection.</span></span>  

> [!NOTE]
> <span data-ttu-id="9eaea-122">Cela signifie que vous devez toujours utiliser un nom DNS pour votre connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-122">This means that you should try to always use a DNS name for your Hybrid Connection.</span></span>  <span data-ttu-id="9eaea-123">Certains logiciels clients n’effectuent une recherche DNS que si le point de terminaison utilise une adresse IP à la place.</span><span class="sxs-lookup"><span data-stu-id="9eaea-123">Some client software does not do a DNS lookup if the endpoint uses an IP address instead.</span></span>
>
>

<span data-ttu-id="9eaea-124">Il existe deux types de connexions hybrides : les nouvelles connexions hybrides qui sont proposées en tant que service sous Azure Relay et les anciennes connexions hybrides BizTalk.</span><span class="sxs-lookup"><span data-stu-id="9eaea-124">There are two types of hybrid connections, the new hybrid connections that are offered as a service under Azure Relay and the older BizTalk Hybrid Connections.</span></span>  <span data-ttu-id="9eaea-125">Les anciennes connexions hybrides BizTalk sont appelées des connexions hybrides classiques dans le portail.</span><span class="sxs-lookup"><span data-stu-id="9eaea-125">The older BizTalk Hybrid Connections are referred to as Classic Hybrid Connections in the portal.</span></span>  <span data-ttu-id="9eaea-126">Plus d’informations sur celles-ci sont fournies plus loin dans ce document.</span><span class="sxs-lookup"><span data-stu-id="9eaea-126">There is more information later in this document about them.</span></span>

### <a name="app-service-hybrid-connection-benefits"></a><span data-ttu-id="9eaea-127">Avantages d’une connexion hybride App Service</span><span class="sxs-lookup"><span data-stu-id="9eaea-127">App Service hybrid connection benefits</span></span> ###

<span data-ttu-id="9eaea-128">La fonctionnalité de connexions hybrides offre un certain nombre d’avantages, notamment</span><span class="sxs-lookup"><span data-stu-id="9eaea-128">There are a number of benefits to the hybrid connections capability including</span></span>

- <span data-ttu-id="9eaea-129">les applications peuvent accéder en toute sécurité aux systèmes et services locaux ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-129">Apps can securely access on premises systems and services securely</span></span>
- <span data-ttu-id="9eaea-130">la fonctionnalité ne nécessite pas un point de terminaison Internet accessible ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-130">the feature does not require an internet accessible endpoint</span></span>
- <span data-ttu-id="9eaea-131">sa configuration est simple et rapide ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-131">it is quick and easy to set up</span></span>  
- <span data-ttu-id="9eaea-132">chaque connexion hybride correspond à une combinaison hôte:port unique, gage de sécurité ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-132">each hybrid connection matches to a single host:port combination which is an excellent security aspect</span></span>
- <span data-ttu-id="9eaea-133">elle ne nécessite généralement pas de ports de pare-feu car les connexions sont toutes sortantes sur des ports web standard ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-133">it normally does not require firewall holes as the connections are all outbound over standard web ports</span></span>
- <span data-ttu-id="9eaea-134">la fonctionnalité se situant au niveau du réseau, cela signifie également qu’elle n’est pas spécifique du langage utilisé par votre application et de la technologie utilisée par le point de terminaison ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-134">because the feature is network level that also means that it is agnostic to the language used by your app and the technology used by the endpoint</span></span>
- <span data-ttu-id="9eaea-135">elle peut être utilisée pour fournir un accès à plusieurs réseaux à partir d’une même application.</span><span class="sxs-lookup"><span data-stu-id="9eaea-135">it can be used to provide access in multiple networks from a single app</span></span> 

### <a name="things-you-cannot-do-with-hybrid-connections"></a><span data-ttu-id="9eaea-136">Ce que vous ne pouvez pas faire avec les connexions hybrides</span><span class="sxs-lookup"><span data-stu-id="9eaea-136">Things you cannot do with Hybrid Connections</span></span> ###

<span data-ttu-id="9eaea-137">Vous ne pouvez pas faire certaines opérations avec les connexions hybrides, notamment :</span><span class="sxs-lookup"><span data-stu-id="9eaea-137">There are a few things you cannot do with hybrid connections and they include:</span></span>

- <span data-ttu-id="9eaea-138">montage d’un lecteur ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-138">mounting a drive</span></span>
- <span data-ttu-id="9eaea-139">utilisation d’UDP ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-139">using UDP</span></span>
- <span data-ttu-id="9eaea-140">accès à des services TCP qui utilisent des ports dynamiques tels que le mode FTP passif ou le mode passif étendu ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-140">accessing TCP based services that use dynamic ports such as FTP Passive Mode or Extended Passive Mode</span></span>
- <span data-ttu-id="9eaea-141">prise en charge LDAP, qui est parfois requise par UDP ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-141">LDAP support, as it sometimes requires UDP</span></span>
- <span data-ttu-id="9eaea-142">prise en charge d’Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9eaea-142">Active Directory support</span></span>

## <a name="adding-and-creating-a-hybrid-connection-in-your-app"></a><span data-ttu-id="9eaea-143">Ajout et création d’une connexion hybride dans votre application</span><span class="sxs-lookup"><span data-stu-id="9eaea-143">Adding and Creating a Hybrid Connection in your App</span></span> ##

<span data-ttu-id="9eaea-144">Une connexion hybride peut être créée via le portail de l’application ou à partir du portail du service de connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-144">Hybrid Connections can be created through the app portal or from the Hybrid Connection service portal.</span></span>  <span data-ttu-id="9eaea-145">Nous vous recommandons vivement d’utiliser le portail de l’application pour créer les connexions hybrides à utiliser avec votre application.</span><span class="sxs-lookup"><span data-stu-id="9eaea-145">It is highly recommended that you use the app portal to create the Hybrid Connections you wish to use with your app.</span></span>  <span data-ttu-id="9eaea-146">Pour créer une connexion hybride, accédez au [portail Azure][portal] puis à l’interface utilisateur de votre application.</span><span class="sxs-lookup"><span data-stu-id="9eaea-146">To create a Hybrid Connection go to the [Azure portal][portal] and go into the UI for your app.</span></span>  <span data-ttu-id="9eaea-147">Sélectionnez **Mise en réseau > Configurer vos points de terminaison de connexion hybride**.</span><span class="sxs-lookup"><span data-stu-id="9eaea-147">Select **Networking > Configure your hybrid connection endpoints**.</span></span>  <span data-ttu-id="9eaea-148">Là, vous pouvez voir ici les connexions hybrides qui sont configurées avec votre application</span><span class="sxs-lookup"><span data-stu-id="9eaea-148">From here you can see the Hybrid Connections that are configured with your app</span></span>  

![][2]

<span data-ttu-id="9eaea-149">Pour ajouter une nouvelle connexion hybride, cliquez sur Ajouter une connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-149">To add a new Hybrid Connection, click Add Hybrid Connection.</span></span>  <span data-ttu-id="9eaea-150">L’interface utilisateur qui s’ouvre répertorie les connexions hybrides que vous avez déjà créées.</span><span class="sxs-lookup"><span data-stu-id="9eaea-150">The UI that opens up lists the Hybrid Connections that you have already created.</span></span>  <span data-ttu-id="9eaea-151">Pour en ajouter une ou plusieurs à votre application, cliquez sur les connexions souhaitées et appuyez sur **Ajouter la connexion hybride sélectionnée**.</span><span class="sxs-lookup"><span data-stu-id="9eaea-151">To add one or more of them to your app, click on the ones you want and hit **Add selected hybrid connection**.</span></span>  

![][3]

<span data-ttu-id="9eaea-152">Si vous souhaitez créer une nouvelle connexion hybride, cliquez sur **Créer une connexion hybride**.</span><span class="sxs-lookup"><span data-stu-id="9eaea-152">If you want to create a new Hybrid Connection, click **Create new hybrid connection**.</span></span>  <span data-ttu-id="9eaea-153">Vous spécifiez ici le :</span><span class="sxs-lookup"><span data-stu-id="9eaea-153">From here you specify the:</span></span> 

- <span data-ttu-id="9eaea-154">Nom du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="9eaea-154">endpoint name</span></span>
- <span data-ttu-id="9eaea-155">Nom d’hôte du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="9eaea-155">endpoint hostname</span></span>
- <span data-ttu-id="9eaea-156">Port du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="9eaea-156">endpoint port</span></span>
- <span data-ttu-id="9eaea-157">Espace de noms Service Bus que vous voulez utiliser</span><span class="sxs-lookup"><span data-stu-id="9eaea-157">servicebus namespace you wish to use</span></span>

![][4]

<span data-ttu-id="9eaea-158">Chaque connexion hybride est liée à un espace de noms Service Bus et chaque espace de noms Service Bus se trouve dans une région Azure.</span><span class="sxs-lookup"><span data-stu-id="9eaea-158">Every hybrid connection is tied to a service bus namespace and each service bus namespace is in an Azure region.</span></span>  <span data-ttu-id="9eaea-159">Il convient de tester et d’utiliser un espace de noms Service Bus dans la même région que votre application pour éviter une latence du réseau.</span><span class="sxs-lookup"><span data-stu-id="9eaea-159">It is important to try and use a service bus namespace in the same region as your app so as to avoid network induced latency.</span></span>

<span data-ttu-id="9eaea-160">Si vous souhaitez supprimer votre connexion hybride de votre application, cliquez avec le bouton droit sur celle-ci et sélectionnez **Déconnecter**.</span><span class="sxs-lookup"><span data-stu-id="9eaea-160">If you want to remove your hybrid connection from your app, right click on it and select **Disconnect**.</span></span>  

<span data-ttu-id="9eaea-161">Lorsqu’une connexion hybride est ajoutée à votre application web, vous pouvez afficher ses détails en cliquant simplement dessus.</span><span class="sxs-lookup"><span data-stu-id="9eaea-161">Once a hybrid connection is added to your web app, you can see details on it by simply clicking on it.</span></span>  

![][5]

## <a name="hybrid-connections-and-app-service-plans"></a><span data-ttu-id="9eaea-162">Connexions hybrides et plans App Service</span><span class="sxs-lookup"><span data-stu-id="9eaea-162">Hybrid Connections and App Service Plans</span></span> ##

<span data-ttu-id="9eaea-163">Les seules connexions hybrides que vous pouvez créer désormais sont de nouvelles connexions hybrides.</span><span class="sxs-lookup"><span data-stu-id="9eaea-163">The only hybrid connections you can now make are the new hybrid connections.</span></span>  <span data-ttu-id="9eaea-164">Elles sont uniquement disponibles dans les références de tarification De base, Standard, Premium et Isolé.</span><span class="sxs-lookup"><span data-stu-id="9eaea-164">They are only available in Basic, Standard, Premium and Isolated pricing SKUs.</span></span>  <span data-ttu-id="9eaea-165">Des limites sont liées au plan de tarification.</span><span class="sxs-lookup"><span data-stu-id="9eaea-165">There are limits tied to the pricing plan.</span></span>  

| <span data-ttu-id="9eaea-166">Plan de tarification</span><span class="sxs-lookup"><span data-stu-id="9eaea-166">Pricing Plan</span></span> | <span data-ttu-id="9eaea-167">Nombre de connexions hybrides utilisables dans le plan</span><span class="sxs-lookup"><span data-stu-id="9eaea-167">Number of hybrid connections usable in the plan</span></span> |
|----|----|
| <span data-ttu-id="9eaea-168">De base</span><span class="sxs-lookup"><span data-stu-id="9eaea-168">Basic</span></span> | <span data-ttu-id="9eaea-169">5</span><span class="sxs-lookup"><span data-stu-id="9eaea-169">5</span></span> |
| <span data-ttu-id="9eaea-170">Standard</span><span class="sxs-lookup"><span data-stu-id="9eaea-170">Standard</span></span> | <span data-ttu-id="9eaea-171">25</span><span class="sxs-lookup"><span data-stu-id="9eaea-171">25</span></span> |
| <span data-ttu-id="9eaea-172">Premium</span><span class="sxs-lookup"><span data-stu-id="9eaea-172">Premium</span></span> | <span data-ttu-id="9eaea-173">200</span><span class="sxs-lookup"><span data-stu-id="9eaea-173">200</span></span> |
| <span data-ttu-id="9eaea-174">Isolé</span><span class="sxs-lookup"><span data-stu-id="9eaea-174">Isolated</span></span> | <span data-ttu-id="9eaea-175">200</span><span class="sxs-lookup"><span data-stu-id="9eaea-175">200</span></span> |

<span data-ttu-id="9eaea-176">Dans la mesure où il existe des restrictions de plan App Service, une interface utilisateur existe également dans le plan App Service qui vous montre le nombre de connexions hybrides utilisées et par quelles applications.</span><span class="sxs-lookup"><span data-stu-id="9eaea-176">Since there are App Service Plan restrictions there is also UI in the App Service Plan that shows you how many hybrid connections are being used and by what apps.</span></span>  

![][6]

<span data-ttu-id="9eaea-177">Comme dans la vue de l’application, vous pouvez afficher plus d’informations sur votre connexion hybride en cliquant sur celle-ci.</span><span class="sxs-lookup"><span data-stu-id="9eaea-177">Just as with the app view, you can see details on your hybrid connection by clicking on it.</span></span>  <span data-ttu-id="9eaea-178">Dans les propriétés affichées ici, vous pouvez voir toutes les informations disponibles dans la vue de l’application, mais vous pouvez également savoir combien d’autres applications du même plan App Service utilisent cette connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-178">In the properties shown here you can see all the information you had at the app view but can also see how many other apps in the same App Service Plan are using that hybrid connection.</span></span>

![][7]

<span data-ttu-id="9eaea-179">Même s’il existe une limite du nombre de points de terminaison de connexion hybride pouvant être utilisés dans un plan App Service, chaque connexion hybride utilisée peut l’être sur un nombre quelconque d’applications de ce plan App Service.</span><span class="sxs-lookup"><span data-stu-id="9eaea-179">While there is a limit on the number of hybrid connection endpoints that can be used in an App Service Plan, each hybrid connection used can be used across any number of apps in that App Service Plan.</span></span>  <span data-ttu-id="9eaea-180">Ainsi, si je dispose d’1 connexion hybride que j’utilisais dans 5 applications distinctes de mon plan App Service, je dispose toujours d’1 seule connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-180">That is to say that if I had 1 hybrid connection that I used in 5 separate apps in my App Service Plan, that is still just 1 hybrid connection.</span></span>

<span data-ttu-id="9eaea-181">Un coût supplémentaire s’applique sur les connexions hybrides en plus de celles utilisables dans une référence De base, Standard, Premium ou Isolé.</span><span class="sxs-lookup"><span data-stu-id="9eaea-181">There is an additional cost to hybrid connections beyond being only usable in a Basic, Standard, Premium or Isolated SKU.</span></span>  <span data-ttu-id="9eaea-182">Pour plus d’informations sur la tarification de la connexion hybride, accédez ici : [Tarification Service Bus][sbpricing].</span><span class="sxs-lookup"><span data-stu-id="9eaea-182">For details on hybrid connection pricing please go here: [Service Bus pricing][sbpricing].</span></span>

## <a name="hybrid-connection-manager"></a><span data-ttu-id="9eaea-183">Gestionnaire de connexion hybride</span><span class="sxs-lookup"><span data-stu-id="9eaea-183">Hybrid Connection Manager</span></span> ##

<span data-ttu-id="9eaea-184">Pour que les connexions hybrides fonctionnent, vous avez besoin d’un agent de relais dans le réseau qui héberge votre point de terminaison de connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-184">In order for hybrid connections to work you need a relay agent in the network that hosts your hybrid connection endpoint.</span></span>  <span data-ttu-id="9eaea-185">Cet agent de relais est appelé le Gestionnaire de connexion hybride (GCH).</span><span class="sxs-lookup"><span data-stu-id="9eaea-185">That relay agent is called the Hybrid Connection Manager (HCM).</span></span>  <span data-ttu-id="9eaea-186">Cet outil peut être téléchargé à partir de l’interface utilisateur **Mise en réseau > Configurer vos points de terminaison de connexion hybride** disponible à partir de votre application dans le [portail Azure][portal].</span><span class="sxs-lookup"><span data-stu-id="9eaea-186">This tool can be downloaded from the **Networking > Configure your hybrid connection endpoints** UI available from your app in the [Azure portal][portal].</span></span>  

<span data-ttu-id="9eaea-187">Cet outil s’exécute sur Windows Server 2008 R2 et les versions ultérieures de Windows.</span><span class="sxs-lookup"><span data-stu-id="9eaea-187">This tool runs on Windows server 2008 R2 and later versions of Windows.</span></span>  <span data-ttu-id="9eaea-188">Une fois installé, le GCH s’exécute en tant que service.</span><span class="sxs-lookup"><span data-stu-id="9eaea-188">Once installed the HCM runs as a service.</span></span>  <span data-ttu-id="9eaea-189">Ce service se connecte au relais Service Bus Azure en fonction des points de terminaison configurés.</span><span class="sxs-lookup"><span data-stu-id="9eaea-189">This service connects to Azure servicebus relay based on the configured endpoints.</span></span>  <span data-ttu-id="9eaea-190">Les connexions à partir du GCH sont sortantes vers les ports 80 et 443.</span><span class="sxs-lookup"><span data-stu-id="9eaea-190">The connections from the HCM are outbound to ports 80 and 443.</span></span>    

<span data-ttu-id="9eaea-191">Le GCH inclut une interface utilisateur permettant de le configurer.</span><span class="sxs-lookup"><span data-stu-id="9eaea-191">The HCM has a UI to configure it.</span></span>  <span data-ttu-id="9eaea-192">Après avoir installé le GCH, vous pouvez ouvrir l’interface utilisateur en exécutant le fichier HybridConnectionManagerUi.exe qui se trouve dans le répertoire d’installation du Gestionnaire de connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-192">After the HCM is installed you can bring up the UI by running the HybridConnectionManagerUi.exe that sits in the Hybrid Connection Manager installation directory.</span></span>  <span data-ttu-id="9eaea-193">Vous pouvez également y accéder facilement sur Windows 10 en saisissant *Interface utilisateur du Gestionnaire de connexion hybride* dans la zone de recherche.</span><span class="sxs-lookup"><span data-stu-id="9eaea-193">It is also easily reached on Windows 10 by typing *Hybrid Connection Manager UI* in your search box.</span></span>  

<span data-ttu-id="9eaea-194">À l’ouverture de l’interface utilisateur du GCH, vous voyez tout d’abord un tableau qui répertorie toutes les connexions configurées avec cette instance du GCH.</span><span class="sxs-lookup"><span data-stu-id="9eaea-194">When the HCM UI is started, the first thing you see is a table that lists all of the hybrid connections that are configured with this instance of the HCM.</span></span>  <span data-ttu-id="9eaea-195">Si vous souhaitez apporter des modifications, vous devez vous authentifier auprès d’Azure.</span><span class="sxs-lookup"><span data-stu-id="9eaea-195">If you wish to make any changes you will need to authenticate with Azure.</span></span> 

<span data-ttu-id="9eaea-196">Pour ajouter une ou plusieurs connexions hybrides à votre GCH :</span><span class="sxs-lookup"><span data-stu-id="9eaea-196">To add one or more Hybrid Connections to your HCM:</span></span>

1. <span data-ttu-id="9eaea-197">Démarrez l’interface utilisateur du GCH</span><span class="sxs-lookup"><span data-stu-id="9eaea-197">Start the HCM UI</span></span>
1. <span data-ttu-id="9eaea-198">Cliquez sur Configure another hybrid connection (Configurer une autre connexion hybride) ![][8]</span><span class="sxs-lookup"><span data-stu-id="9eaea-198">Click Configure another hybrid connection ![][8]</span></span>

1. <span data-ttu-id="9eaea-199">Connectez-vous à votre compte Azure</span><span class="sxs-lookup"><span data-stu-id="9eaea-199">Sign in with your Azure account</span></span>
1. <span data-ttu-id="9eaea-200">Sélectionnez un abonnement</span><span class="sxs-lookup"><span data-stu-id="9eaea-200">Choose a subscription</span></span>
1. <span data-ttu-id="9eaea-201">Cliquez sur les connexions hybrides que vous souhaitez voir relayées par ce GCH ![][9]</span><span class="sxs-lookup"><span data-stu-id="9eaea-201">Click on the hybrid connections you want this HCM to relay ![][9]</span></span>

1. <span data-ttu-id="9eaea-202">Cliquez sur Enregistrer.</span><span class="sxs-lookup"><span data-stu-id="9eaea-202">Click Save</span></span>

<span data-ttu-id="9eaea-203">À ce stade, vous voyez les connexions hybrides que vous avez ajoutées.</span><span class="sxs-lookup"><span data-stu-id="9eaea-203">At this point you will see the hybrid connections you added.</span></span>  <span data-ttu-id="9eaea-204">Vous pouvez également cliquer sur la connexion hybride configurée et afficher les détails la concernant.</span><span class="sxs-lookup"><span data-stu-id="9eaea-204">You can also click on the configured hybrid connection and see details about the connection.</span></span>

![][10]

<span data-ttu-id="9eaea-205">Pour que le GCH puisse prendre en charge les connexions hybrides avec lesquelles il est configuré, il doit disposer de :</span><span class="sxs-lookup"><span data-stu-id="9eaea-205">For your HCM to be able to support the hybrid connections it is configured with, it needs:</span></span>

- <span data-ttu-id="9eaea-206">Accès TCP à Azure sur les ports 80 et 443</span><span class="sxs-lookup"><span data-stu-id="9eaea-206">TCP access to Azure over ports 80 and 443</span></span>
- <span data-ttu-id="9eaea-207">Accès TCP au point de terminaison de connexion hybride</span><span class="sxs-lookup"><span data-stu-id="9eaea-207">TCP access to the hybrid connection endpoint</span></span>
- <span data-ttu-id="9eaea-208">possibilité de recherches DNS sur l’hôte du point de terminaison et l’espace de noms Service Bus Azure</span><span class="sxs-lookup"><span data-stu-id="9eaea-208">ability to do DNS look ups on the endpoint host and the azure servicebus namespace</span></span>

<span data-ttu-id="9eaea-209">Le GCH prend en charge les nouvelles connexions hybrides et les anciennes connexions hybrides BizTalk.</span><span class="sxs-lookup"><span data-stu-id="9eaea-209">The HCM supports both new hybrid connections as well as the older BizTalk hybrid connections.</span></span>

### <a name="redundancy"></a><span data-ttu-id="9eaea-210">Redondance</span><span class="sxs-lookup"><span data-stu-id="9eaea-210">Redundancy</span></span> ###

<span data-ttu-id="9eaea-211">Chaque GCH peut prendre en charge plusieurs connexions hybrides.</span><span class="sxs-lookup"><span data-stu-id="9eaea-211">Each HCM can support multiple hybrid connections.</span></span>  <span data-ttu-id="9eaea-212">De plus, toute connexion hybride peut être prise en charge par plusieurs GCH.</span><span class="sxs-lookup"><span data-stu-id="9eaea-212">Also, any given hybrid connection can be supported by multiple HCMs.</span></span>  <span data-ttu-id="9eaea-213">Le comportement par défaut consiste à faire transiter le trafic en tourniquet (round robin) entre les GCH configurés pour n’importe quel point de terminaison donné.</span><span class="sxs-lookup"><span data-stu-id="9eaea-213">The default behavior is to round robin traffic across the configured HCMs for any given endpoint.</span></span>  <span data-ttu-id="9eaea-214">Si vous souhaitez une haute disponibilité sur vos connexions hybrides à partir de votre réseau, instanciez simplement plusieurs GCH sur des ordinateurs distincts.</span><span class="sxs-lookup"><span data-stu-id="9eaea-214">If you want high availability on your hybrid connections from your network, simply instantiate multiple HCMs on separate machines.</span></span> 

### <a name="manually-adding-a-hybrid-connection"></a><span data-ttu-id="9eaea-215">Ajout manuel d’une connexion hybride</span><span class="sxs-lookup"><span data-stu-id="9eaea-215">Manually adding a hybrid connection</span></span> ###

<span data-ttu-id="9eaea-216">Si vous souhaitez qu’un utilisateur en dehors de votre abonnement héberge une instance GCH pour une connexion hybride donnée, vous pouvez lui communiquer la chaîne de connexion de passerelle de la connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-216">If you wish somebody outside of your subscription to host an HCM instance for a given hybrid connection, you can share with them the gateway connection string for the hybrid connection.</span></span>  <span data-ttu-id="9eaea-217">Vous la trouverez dans les propriétés d’une connexion hybride dans le [portail Azure][portal].</span><span class="sxs-lookup"><span data-stu-id="9eaea-217">You can see this in the properties for a hybrid connection in the [Azure portal][portal].</span></span> <span data-ttu-id="9eaea-218">Pour utiliser cette chaîne, cliquez sur le bouton **Configurer manuellement** dans le GCH et collez la chaîne de connexion de passerelle.</span><span class="sxs-lookup"><span data-stu-id="9eaea-218">To use that string, click the **Configure manually** button in the HCM and paste in the gateway connection string.</span></span>


## <a name="troubleshooting"></a><span data-ttu-id="9eaea-219">Résolution de problèmes</span><span class="sxs-lookup"><span data-stu-id="9eaea-219">Troubleshooting</span></span> ##

<span data-ttu-id="9eaea-220">Lorsque votre connexion hybride est configurée avec une application en cours d’exécution et qu’il existe au moins un GCH dans lequel cette connexion hybride est configurée, l’état **Connecté** est indiqué dans le portail.</span><span class="sxs-lookup"><span data-stu-id="9eaea-220">When your hybrid connection is set up with a running application and there is at least one HCM that has that hybrid connection configured, then the status will say **Connected** in the portal.</span></span>  <span data-ttu-id="9eaea-221">Si l’état n’est pas **Connecté**, cela signifie que votre application est arrêtée ou que votre GCH ne peut pas se connecter à Azure sur les ports 80 ou 443.</span><span class="sxs-lookup"><span data-stu-id="9eaea-221">If it does not say **Connected** then it means that either your app is down or your HCM cannot connect out to Azure on ports 80 or 443.</span></span>  

<span data-ttu-id="9eaea-222">La raison principale pour laquelle les clients ne peuvent pas se connecter à leur point de terminaison est que le point de terminaison a été spécifié à l’aide d’une adresse IP au lieu d’un nom DNS.</span><span class="sxs-lookup"><span data-stu-id="9eaea-222">The primary reason that clients cannot connect to their endpoint is because the endpoint was specified using an IP address instead of a DNS name.</span></span>  <span data-ttu-id="9eaea-223">Si votre application ne peut pas accéder au point de terminaison souhaité et que vous avez utilisé une adresse IP, utilisez un nom DNS valide sur l’hôte sur lequel le GCH est exécuté.</span><span class="sxs-lookup"><span data-stu-id="9eaea-223">If your app cannot reach the desired endpoint and you used an IP address, switch to using a DNS name that is valid on the host where the HCM is running.</span></span>  <span data-ttu-id="9eaea-224">Vous devez également vérifier que le nom DNS est correctement résolu sur l’hôte sur lequel le GCH est exécuté et qu’il existe une connectivité entre l’hôte exécutant le GCH et le point de terminaison de connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-224">Other things to check are that the DNS name resolves properly on the host where the HCM is running and that there is connectivity from the host where the HCM is running to the hybrid connection endpoint.</span></span>  

<span data-ttu-id="9eaea-225">Un outil dans App Service appelé tcpping peut être appelé à partir de la console.</span><span class="sxs-lookup"><span data-stu-id="9eaea-225">There is a tool in the App Service that can be invoked from the console called tcpping.</span></span>  <span data-ttu-id="9eaea-226">Cet outil peut vous indiquer si vous avez accès à un point de terminaison TCP, mais ne vous dit pas si vous avez accès à un point de terminaison de connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="9eaea-226">This tool can tell you if you have access to a TCP endpoint but does not tell you if you have access to a hybrid connection endpoint.</span></span>  <span data-ttu-id="9eaea-227">Lorsqu’elle est utilisée dans la console par rapport à un point de terminaison de connexion hybride, la commande ping vous indique uniquement qu’une connexion hybride est configurée pour votre application qui utilise cette combinaison hôte:port.</span><span class="sxs-lookup"><span data-stu-id="9eaea-227">When used in the console against a hybrid connection endpoint, a successful ping will only tell you that you have a hybrid connection configured for your app that uses that host:port combination.</span></span>  

## <a name="biztalk-hybrid-connections"></a><span data-ttu-id="9eaea-228">Connexions hybrides BizTalk</span><span class="sxs-lookup"><span data-stu-id="9eaea-228">BizTalk Hybrid Connections</span></span> ##

<span data-ttu-id="9eaea-229">L’ancienne fonctionnalité Connexions hybrides BizTalk a été désactivée pour ne plus permettre de créer de connexion hybride BizTalk supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="9eaea-229">The older BizTalk Hybrid Connections capability has been closed off to further BizTalk Hybrid Connection creations.</span></span>  <span data-ttu-id="9eaea-230">Vous pouvez continuer à utiliser vos connexions hybrides BizTalk existantes avec vos applications, mais vous devez migrer vers le nouveau service.</span><span class="sxs-lookup"><span data-stu-id="9eaea-230">You can continue using your preexisting BizTalk Hybrid Connections with your apps but should migrate to the new service.</span></span>  <span data-ttu-id="9eaea-231">Les avantages du nouveau service par rapport à la version BizTalk incluent entre autres :</span><span class="sxs-lookup"><span data-stu-id="9eaea-231">Among the benefits in the new service over the BizTalk version are:</span></span>

- <span data-ttu-id="9eaea-232">aucun compte BizTalk supplémentaire n’est requis ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-232">no additional BizTalk account is required</span></span>
- <span data-ttu-id="9eaea-233">TLS 1.2 au lieu de 1.0 comme dans les connexions hybrides BizTalk ;</span><span class="sxs-lookup"><span data-stu-id="9eaea-233">TLS is 1.2 instead of 1.0 as in BizTalk Hybrid Connections</span></span>
- <span data-ttu-id="9eaea-234">la communication se fait sur les ports 80 et 443 à l’aide d’un nom DNS pour accéder à Azure au lieu d’adresses IP et d’une plage d’autres ports supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="9eaea-234">Communication is over ports 80 and 443 using a DNS name to reach Azure instead of IP addresses and a range of additional other ports.</span></span>  

<span data-ttu-id="9eaea-235">Pour ajouter une connexion hybride BizTalk à votre application, accédez à votre application dans le [portail Azure][portal], puis cliquez sur **Mise en réseau > Configurer vos points de terminaison de connexion hybride**.</span><span class="sxs-lookup"><span data-stu-id="9eaea-235">To add a BizTalk hybrid connection to your app, go to your app in the [Azure portal][portal] and click **Networking > Configure your hybrid connection endpoints**.</span></span>  <span data-ttu-id="9eaea-236">Dans la table de connexions hybrides classiques, cliquez sur **Ajouter la connexion hybride classique**.</span><span class="sxs-lookup"><span data-stu-id="9eaea-236">In the Classic hybrid connections table click **Add classic hybrid connection**.</span></span>  <span data-ttu-id="9eaea-237">La liste de vos connexions hybrides BizTalk s’affiche alors.</span><span class="sxs-lookup"><span data-stu-id="9eaea-237">From here you will see a list of your BizTalk hybrid connections.</span></span>  


<!--Image references-->
[1]: ./media/app-service-hybrid-connections/hybridconn-connectiondiagram.png
[2]: ./media/app-service-hybrid-connections/hybridconn-portal.png
[3]: ./media/app-service-hybrid-connections/hybridconn-addhc.png
[4]: ./media/app-service-hybrid-connections/hybridconn-createhc.png
[5]: ./media/app-service-hybrid-connections/hybridconn-properties.png
[6]: ./media/app-service-hybrid-connections/hybridconn-aspproperties.png
[7]: ./media/app-service-hybrid-connections/hybridconn-hcm.png
[8]: ./media/app-service-hybrid-connections/hybridconn-hcmadd.png
[9]: ./media/app-service-hybrid-connections/hybridconn-hcmadded.png
[10]: ./media/app-service-hybrid-connections/hybridconn-hcmdetails.png

<!--Links-->
[HCService]: http://docs.microsoft.com/azure/service-bus-relay/relay-hybrid-connections-protocol/
[portal]: http://portal.azure.com/
[oldhc]: http://docs.microsoft.com/azure/biztalk-services/integration-hybrid-connection-overview/
[sbpricing]: http://azure.microsoft.com/pricing/details/service-bus/

