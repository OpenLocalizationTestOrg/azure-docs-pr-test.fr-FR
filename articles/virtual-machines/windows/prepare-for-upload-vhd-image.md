---
title: aaaPrepare un tooAzure tooupload de disque dur virtuel Windows | Documents Microsoft
description: "Comment tooprepare un VHDX ou un disque dur virtuel Windows avant de le télécharger tooAzure"
services: virtual-machines-windows
documentationcenter: 
author: glimoli
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7802489d-33ec-4302-82a4-91463d03887a
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 08/01/2017
ms.author: genli
ms.openlocfilehash: 530390e4c6a4f66ddfd4da23338f9bb3708c299f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="prepare-a-windows-vhd-or-vhdx-tooupload-tooazure"></a><span data-ttu-id="39637-103">Préparer un tooAzure tooupload Windows VHD ou VHDX</span><span class="sxs-lookup"><span data-stu-id="39637-103">Prepare a Windows VHD or VHDX tooupload tooAzure</span></span>
<span data-ttu-id="39637-104">Avant de télécharger des machines virtuelles Windows (VM) à partir de local tooMicrosoft Azure, vous devez préparer hello disque dur virtuel (VHD ou VHDX).</span><span class="sxs-lookup"><span data-stu-id="39637-104">Before you upload a Windows  virtual machines (VM) from on-premises tooMicrosoft Azure, you must prepare hello virtual hard disk (VHD or VHDX).</span></span> <span data-ttu-id="39637-105">Azure prend en charge uniquement la génération 1 des machines virtuelles qui sont au format de fichier de disque dur virtuel hello et disposer d’un disque de taille fixe.</span><span class="sxs-lookup"><span data-stu-id="39637-105">Azure supports only generation 1 VMs that are in hello VHD file format and have a fixed sized disk.</span></span> <span data-ttu-id="39637-106">taille maximale de Hello autorisé pour hello que disque dur virtuel est de 1 023 go.</span><span class="sxs-lookup"><span data-stu-id="39637-106">hello maximum size allowed for hello VHD is 1,023 GB.</span></span> <span data-ttu-id="39637-107">Vous pouvez convertir une génération 1 machine virtuelle à partir de hello VHDX tooVHD de système de fichiers et de taille dynamique disque toofixed taille.</span><span class="sxs-lookup"><span data-stu-id="39637-107">You can convert a generation 1 VM from hello VHDX file system tooVHD and from a dynamically expanding disk toofixed-sized.</span></span> <span data-ttu-id="39637-108">En revanche, vous ne pouvez pas modifier la génération d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="39637-108">But you can't change a VM's generation.</span></span> <span data-ttu-id="39637-109">Pour plus d’informations, consultez la page [Dois-je créer une machine virtuelle de génération 1 ou 2 dans Hyper-V ?](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span><span class="sxs-lookup"><span data-stu-id="39637-109">For more information, see [Should I create a generation 1 or 2 VM in Hyper-V](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).</span></span>

<span data-ttu-id="39637-110">Pour plus d’informations sur la stratégie de prise en charge hello pour machine virtuelle Azure, consultez [prise en charge du logiciel Microsoft server pour Microsoft Azure Virtual Machines](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="39637-110">For more information about hello support policy for Azure VM, see [Microsoft server software support for Microsoft Azure VMs](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span></span>

> [!Note]
> <span data-ttu-id="39637-111">les instructions de Hello dans cet article s’appliquent toohello 64 bits de Windows Server 2008 R2 et le système d’exploitation de serveur Windows ultérieur.</span><span class="sxs-lookup"><span data-stu-id="39637-111">hello instructions in this article apply toohello 64-bit version of Windows Server 2008 R2 and later Windows server operating system.</span></span> <span data-ttu-id="39637-112">Pour plus d’informations sur l’exécution de la version 32 bits du système d’exploitation avec Azure, consultez l’article [Prise en charge pour les systèmes d’exploitation 32 bits sur des machines virtuelles Azure](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="39637-112">For information about running 32-bit version of operating system in Azure, see [Support for 32-bit operating systems in Azure virtual machines](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span></span>

## <a name="convert-hello-virtual-disk-toovhd-and-fixed-size-disk"></a><span data-ttu-id="39637-113">Convertir tooVHD de disque virtuel hello et de disque de taille fixe</span><span class="sxs-lookup"><span data-stu-id="39637-113">Convert hello virtual disk tooVHD and fixed size disk</span></span> 
<span data-ttu-id="39637-114">Si vous avez besoin de tooconvert votre toohello de disque virtuel requis format pour Azure, utilisez une des méthodes hello dans cette section.</span><span class="sxs-lookup"><span data-stu-id="39637-114">If you need tooconvert your virtual disk toohello required format for Azure, use one of hello methods in this section.</span></span> <span data-ttu-id="39637-115">Sauvegardez hello machine virtuelle avant d’exécuter des processus de conversion de disque virtuel hello et assurez-vous que ce disque dur virtuel Windows fonctionne correctement sur le serveur local de hello de hello.</span><span class="sxs-lookup"><span data-stu-id="39637-115">Back up hello VM before you run hello virtual disk conversion process and make sure that hello Windows VHD works correctly on hello local server.</span></span> <span data-ttu-id="39637-116">Corrigez les erreurs dans hello machine virtuelle avant que vous essayez de tooconvert ou téléchargez tooAzure.</span><span class="sxs-lookup"><span data-stu-id="39637-116">Resolve any errors within hello VM itself before you try tooconvert or upload it tooAzure.</span></span>

<span data-ttu-id="39637-117">Après la conversion de disque de hello, créez un ordinateur virtuel qui utilise le disque de hello converti.</span><span class="sxs-lookup"><span data-stu-id="39637-117">After you convert hello disk, create a VM that uses hello converted disk.</span></span> <span data-ttu-id="39637-118">Démarrez et connectez-vous à toofinish de machine virtuelle toohello préparation hello machine virtuelle pour le téléchargement.</span><span class="sxs-lookup"><span data-stu-id="39637-118">Start and sign in toohello VM toofinish preparing hello VM for upload.</span></span>

### <a name="convert-disk-using-hyper-v-manager"></a><span data-ttu-id="39637-119">Convertir un disque à l’aide du Gestionnaire Hyper-V</span><span class="sxs-lookup"><span data-stu-id="39637-119">Convert disk using Hyper-V Manager</span></span>
1. <span data-ttu-id="39637-120">Ouvrez le Gestionnaire Hyper-V et sélectionnez votre ordinateur local sur hello gauche.</span><span class="sxs-lookup"><span data-stu-id="39637-120">Open Hyper-V Manager and select your local computer on hello left.</span></span> <span data-ttu-id="39637-121">Dans le menu de hello situé au-dessus de la liste des ordinateurs hello, cliquez sur **Action** > **modifier le disque**.</span><span class="sxs-lookup"><span data-stu-id="39637-121">In hello menu above hello computer list, click **Action** > **Edit Disk**.</span></span>
2. <span data-ttu-id="39637-122">Sur hello **rechercher un disque dur virtuel** écran, recherchez et sélectionnez votre disque virtuel.</span><span class="sxs-lookup"><span data-stu-id="39637-122">On hello **Locate Virtual Hard Disk** screen, locate and select your virtual disk.</span></span>
3. <span data-ttu-id="39637-123">Sur hello **choisir une Action** écran, puis sélectionnez **convertir** et **suivant**.</span><span class="sxs-lookup"><span data-stu-id="39637-123">On hello **Choose Action** screen, and then select **Convert** and **Next**.</span></span>
4. <span data-ttu-id="39637-124">Si vous avez besoin de tooconvert vhdx, sélectionnez **VHD** puis cliquez sur **suivant**</span><span class="sxs-lookup"><span data-stu-id="39637-124">If you need tooconvert from VHDX, select **VHD** and then click **Next**</span></span>
5. <span data-ttu-id="39637-125">Si vous avez besoin de tooconvert à partir d’un disque dynamique, sélectionnez **une taille fixe** puis cliquez sur **suivant**</span><span class="sxs-lookup"><span data-stu-id="39637-125">If you need tooconvert from a dynamically expanding disk, select **Fixed size** and then click **Next**</span></span>
6. <span data-ttu-id="39637-126">Recherchez et sélectionnez un chemin d’accès toosave hello nouveau fichier VHD à.</span><span class="sxs-lookup"><span data-stu-id="39637-126">Locate and select a path toosave hello new VHD file to.</span></span>
7. <span data-ttu-id="39637-127">Cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="39637-127">Click **Finish**.</span></span>

>[!NOTE]
><span data-ttu-id="39637-128">commandes Hello dans cet article doivent être exécutées sur une session PowerShell avec élévation de privilèges.</span><span class="sxs-lookup"><span data-stu-id="39637-128">hello commands in this article must be run on an elevated PowerShell session.</span></span>

### <a name="convert-disk-by-using-powershell"></a><span data-ttu-id="39637-129">Convertir un disque à l’aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="39637-129">Convert disk by using PowerShell</span></span>
<span data-ttu-id="39637-130">Vous pouvez convertir un disque virtuel à l’aide de hello [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) commande dans Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="39637-130">You can convert a virtual disk by using hello [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) command in Windows PowerShell.</span></span> <span data-ttu-id="39637-131">Sélectionnez **Exécuter en tant qu’administrateur** lorsque vous démarrez PowerShell.</span><span class="sxs-lookup"><span data-stu-id="39637-131">Select **Run as administrator** when you start PowerShell.</span></span> 

<span data-ttu-id="39637-132">Hello exemple de commande suivant convertit VHDX tooVHD et d’une extension dynamique toofixed-taille du disque :</span><span class="sxs-lookup"><span data-stu-id="39637-132">hello following example command converts from VHDX tooVHD, and from a dynamically expanding disk toofixed-size:</span></span>

```Powershell
Convert-VHD –Path c:\test\MY-VM.vhdx –DestinationPath c:\test\MY-NEW-VM.vhd -VHDType Fixed
```
<span data-ttu-id="39637-133">Dans cette commande, remplacez la valeur hello pour «-chemin d’accès « avec hello chemin d’accès toohello disque dur virtuel souhaité tooconvert et hello une valeur pour «-DestinationPath » avec hello nouveaux nom et chemin de hello converti le disque.</span><span class="sxs-lookup"><span data-stu-id="39637-133">In this command, replace hello value for "-Path" with hello path toohello virtual hard disk that you want tooconvert and hello value for "-DestinationPath" with hello new path and name of hello converted disk.</span></span>

### <a name="convert-from-vmware-vmdk-disk-format"></a><span data-ttu-id="39637-134">Convertir à partir du format de disque VMDK VMware</span><span class="sxs-lookup"><span data-stu-id="39637-134">Convert from VMware VMDK disk format</span></span>
<span data-ttu-id="39637-135">Si vous disposez d’une image de machine virtuelle Windows Bonjour [format de fichier VMDK](https://en.wikipedia.org/wiki/VMDK), convertissez-le tooa disque dur virtuel à l’aide de hello [convertisseur de machine virtuelle Microsoft](https://www.microsoft.com/download/details.aspx?id=42497).</span><span class="sxs-lookup"><span data-stu-id="39637-135">If you have a Windows VM image in hello [VMDK file format](https://en.wikipedia.org/wiki/VMDK), convert it tooa VHD by using hello [Microsoft VM Converter](https://www.microsoft.com/download/details.aspx?id=42497).</span></span> <span data-ttu-id="39637-136">Pour plus d’informations, consultez l’article de blog hello [comment tooConvert un disque dur virtuel de tooHyper-v VMDK VMware](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span><span class="sxs-lookup"><span data-stu-id="39637-136">For more information, see hello blog article [How tooConvert a VMware VMDK tooHyper-V VHD](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span></span>

## <a name="set-windows-configurations-for-azure"></a><span data-ttu-id="39637-137">Définir les configurations Windows pour Azure</span><span class="sxs-lookup"><span data-stu-id="39637-137">Set Windows configurations for Azure</span></span>

<span data-ttu-id="39637-138">Sur la machine virtuelle que vous prévoyez de hello tooAzure tooupload, exécuter toutes les commandes suivant de hello étapes à partir d’un [fenêtre d’invite de commandes avec élévation de privilèges](https://technet.microsoft.com/library/cc947813.aspx):</span><span class="sxs-lookup"><span data-stu-id="39637-138">On hello VM that you plan tooupload tooAzure, run all commands in hello following steps from an [elevated Command Prompt window](https://technet.microsoft.com/library/cc947813.aspx):</span></span>

1. <span data-ttu-id="39637-139">Supprimer un itinéraire statique persistant sur la table de routage hello :</span><span class="sxs-lookup"><span data-stu-id="39637-139">Remove any static persistent route on hello routing table:</span></span>
   
   * <span data-ttu-id="39637-140">table d’itinéraires hello tooview, exécutez `route print` à l’invite de commandes hello.</span><span class="sxs-lookup"><span data-stu-id="39637-140">tooview hello route table, run `route print` at hello command prompt.</span></span>
   * <span data-ttu-id="39637-141">Vérifiez hello **les itinéraires de persistance** sections.</span><span class="sxs-lookup"><span data-stu-id="39637-141">Check hello **Persistence Routes** sections.</span></span> <span data-ttu-id="39637-142">S’il existe un itinéraire persistant, utiliser [itinéraire delete](https://technet.microsoft.com/library/cc739598.apx) tooremove il.</span><span class="sxs-lookup"><span data-stu-id="39637-142">If there is a persistent route, use [route delete](https://technet.microsoft.com/library/cc739598.apx) tooremove it.</span></span>
2. <span data-ttu-id="39637-143">Supprimer de proxy WinHTTP hello :</span><span class="sxs-lookup"><span data-stu-id="39637-143">Remove hello WinHTTP proxy:</span></span>
   
    ```PowerShell
    netsh winhttp reset proxy
    ```
3. <span data-ttu-id="39637-144">Définir la stratégie de réseau SAN de disque hello trop[Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span><span class="sxs-lookup"><span data-stu-id="39637-144">Set hello disk SAN policy too[Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span></span> 
   
    ```PowerShell
    diskpart 
    ```
    <span data-ttu-id="39637-145">Dans la fenêtre d’invite de commandes ouverte hello, tapez Bonjour suivant de commandes :</span><span class="sxs-lookup"><span data-stu-id="39637-145">In hello open Command Prompt window, type hello following commands:</span></span>

     ```DISKPART
    san policy=onlineall
    exit   
    ```

4. <span data-ttu-id="39637-146">Définir la durée de temps universel coordonné (UTC) pour Windows et hello trop de type de démarrage du service de temps de Windows (w32time) de hello**automatiquement**:</span><span class="sxs-lookup"><span data-stu-id="39637-146">Set Coordinated Universal Time (UTC) time for Windows and hello startup type of hello Windows Time (w32time) service too**Automatically**:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\TimeZoneInformation' -name "RealTimeIsUniversal" 1 -Type DWord

    Set-Service -Name w32time -StartupType Auto
    ```
5. <span data-ttu-id="39637-147">Définir hello power profil toohello **hautes performances**:</span><span class="sxs-lookup"><span data-stu-id="39637-147">Set hello power profile toohello **High Performance**:</span></span>

    ```PowerShell
    powercfg /setactive SCHEME_MIN
    ```

## <a name="check-hello-windows-services"></a><span data-ttu-id="39637-148">Vérifier les services de Windows hello</span><span class="sxs-lookup"><span data-stu-id="39637-148">Check hello Windows services</span></span>
<span data-ttu-id="39637-149">Assurez-vous que chaque hello suivant des services Windows a toohello **les valeurs par défaut Windows**.</span><span class="sxs-lookup"><span data-stu-id="39637-149">Make sure that each of hello following Windows services is set toohello **Windows default values**.</span></span> <span data-ttu-id="39637-150">Il s’agit de chiffres de minimale hello de services toomake que cette machine virtuelle hello dispose d’une connectivité doivent être définis.</span><span class="sxs-lookup"><span data-stu-id="39637-150">These are hello minimum numbers of services that must be set up toomake sure that hello VM has connectivity.</span></span> <span data-ttu-id="39637-151">paramètres de démarrage hello tooreset, exécutez hello suivant de commandes :</span><span class="sxs-lookup"><span data-stu-id="39637-151">tooreset hello startup settings, run hello following commands:</span></span>
   
```PowerShell
Set-Service -Name bfe -StartupType Auto
Set-Service -Name dhcp -StartupType Auto
Set-Service -Name dnscache -StartupType Auto
Set-Service -Name IKEEXT -StartupType Auto
Set-Service -Name iphlpsvc -StartupType Auto
Set-Service -Name netlogon -StartupType Manual
Set-Service -Name netman -StartupType Manual
Set-Service -Name nsi -StartupType Auto
Set-Service -Name termService -StartupType Manual
Set-Service -Name MpsSvc -StartupType Auto
Set-Service -Name RemoteRegistry -StartupType Auto
```

## <a name="update-remote-desktop-registry-settings"></a><span data-ttu-id="39637-152">Mettre à jour les paramètres de registre du Bureau à distance</span><span class="sxs-lookup"><span data-stu-id="39637-152">Update Remote Desktop registry settings</span></span>
<span data-ttu-id="39637-153">Assurez-vous que hello suivant les paramètres sont correctement configurés pour la connexion Bureau à distance :</span><span class="sxs-lookup"><span data-stu-id="39637-153">Make sure that hello following settings are configured correctly for remote desktop connection:</span></span>

>[!Note] 
><span data-ttu-id="39637-154">Vous pouvez recevoir un message d’erreur lorsque vous exécutez hello **Set-ItemProperty-Path ' HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services - nom &lt;nom de l’objet&gt; &lt;valeur&gt;** dans ces étapes.</span><span class="sxs-lookup"><span data-stu-id="39637-154">You may receive an error message when you run hello **Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services -name &lt;object name&gt; &lt;value&gt;** in these steps.</span></span> <span data-ttu-id="39637-155">message d’erreur Hello peut être ignoré en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="39637-155">hello error message can be safely ignored.</span></span> <span data-ttu-id="39637-156">Cela ne signifie que ce domaine hello repousse pas que la configuration via un objet de stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="39637-156">It means only that hello domain is not pushing that configuration through a Group Policy object.</span></span>
>
>

1. <span data-ttu-id="39637-157">Le protocole RDP (Remote Desktop Protocol) est activé :</span><span class="sxs-lookup"><span data-stu-id="39637-157">Remote Desktop Protocol (RDP) is enabled:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server' -name "fDenyTSConnections" -Value 0 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDenyTSConnections" -Value 0 -Type DWord
    ```
   
2. <span data-ttu-id="39637-158">Hello port RDP est correctement configuré (par défaut le port 3389) :</span><span class="sxs-lookup"><span data-stu-id="39637-158">hello RDP port is set up correctly (Default port 3389):</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "PortNumber" 3389 -Type DWord
    ```
    <span data-ttu-id="39637-159">Lorsque vous déployez une machine virtuelle, les règles par défaut de hello sont créés sur le port 3389.</span><span class="sxs-lookup"><span data-stu-id="39637-159">When you deploy a VM, hello default rules are created against port 3389.</span></span> <span data-ttu-id="39637-160">Si vous souhaitez que le numéro de port toochange hello, faites-le après que hello ordinateur virtuel est déployé dans Azure.</span><span class="sxs-lookup"><span data-stu-id="39637-160">If you want toochange hello port number,  do that after hello VM is deployed in Azure.</span></span>

3. <span data-ttu-id="39637-161">Hello d’écoute dans toutes les interfaces réseau :</span><span class="sxs-lookup"><span data-stu-id="39637-161">hello listener is listening in every network interface:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "LanAdapter" 0 -Type DWord
   ```
4. <span data-ttu-id="39637-162">Configurer le mode d’authentification au niveau du réseau de hello pour les connexions RDP hello :</span><span class="sxs-lookup"><span data-stu-id="39637-162">Configure hello Network Level Authentication mode for hello RDP connections:</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "UserAuthentication" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SecurityLayer" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "fAllowSecProtocolNegotiation" 1 -Type DWord
     ```

5. <span data-ttu-id="39637-163">Valeur hello KeepAlive :</span><span class="sxs-lookup"><span data-stu-id="39637-163">Set hello keep-alive value：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveEnable" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveInterval" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "KeepAliveTimeout" 1 -Type DWord
    ```
6. <span data-ttu-id="39637-164">Reconnectez-vous ：</span><span class="sxs-lookup"><span data-stu-id="39637-164">Reconnect：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDisableAutoReconnect" 0 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fInheritReconnectSame" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fReconnectSame" 0 -Type DWord
    ```
7. <span data-ttu-id="39637-165">Limite hello le nombre de connexions simultanées :</span><span class="sxs-lookup"><span data-stu-id="39637-165">Limit hello number of concurrent connections：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "MaxInstanceCount" 4294967295 -Type DWord
    ```
8. <span data-ttu-id="39637-166">S’il existe que des certificats auto-signés liée port d’écoute RDP toohello, supprimez-les :</span><span class="sxs-lookup"><span data-stu-id="39637-166">If there are any self-signed certificates tied toohello RDP listener, remove them:</span></span>
    
    ```PowerShell
    Remove-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SSLCertificateSHA1Hash"
    ```
    <span data-ttu-id="39637-167">Il s’agit de toomake assurer que vous pouvez vous connecter au début de hello lorsque vous déployez hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="39637-167">This is toomake sure that you can connect at hello beginning when you deploy hello VM.</span></span> <span data-ttu-id="39637-168">Vous pouvez également le consulter sur une étape ultérieure après hello qu'ordinateur virtuel est déployé dans Azure, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="39637-168">You can also review this on a later stage after hello VM is deployed in Azure if needed.</span></span>

9. <span data-ttu-id="39637-169">Si hello machine virtuelle doit faire partie d’un domaine, vérifiez que tous les hello suivant toomake paramètres sûr que les anciens paramètres de hello ne sont pas rétablis.</span><span class="sxs-lookup"><span data-stu-id="39637-169">If hello VM will be part of a Domain, check all hello following settings toomake sure that hello former settings are not reverted.</span></span> <span data-ttu-id="39637-170">stratégies de Hello qui doivent être vérifiées sont les suivants de hello :</span><span class="sxs-lookup"><span data-stu-id="39637-170">hello policies that must be checked are hello following:</span></span>
    
    - <span data-ttu-id="39637-171">Le protocole RDP est activé :</span><span class="sxs-lookup"><span data-stu-id="39637-171">RDP is enabled:</span></span>

         <span data-ttu-id="39637-172">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Composants\Services Bureau à distance\Hôte de session Bureau à distance\Connexions :</span><span class="sxs-lookup"><span data-stu-id="39637-172">Computer Configuration\Policies\Windows Settings\Administrative Templates\ Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span>
         
         <span data-ttu-id="39637-173">**Autoriser les utilisateurs tooconnect à distance à l’aide du Bureau à distance**</span><span class="sxs-lookup"><span data-stu-id="39637-173">**Allow users tooconnect remotely by using Remote Desktop**</span></span>

    - <span data-ttu-id="39637-174">Stratégie de groupe d’authentification au niveau du réseau :</span><span class="sxs-lookup"><span data-stu-id="39637-174">NLA group policy:</span></span>

        <span data-ttu-id="39637-175">Paramètres\Modèles d’administration\Composants\Services Bureau à distance\Hôte de session Bureau à distance\Sécurité :</span><span class="sxs-lookup"><span data-stu-id="39637-175">Settings\Administrative Templates\Components\Remote Desktop Services\Remote Desktop Session Host\Security:</span></span> 
        
        <span data-ttu-id="39637-176">**Demander l’authentification utilisateur via l’authentification au niveau du réseau pour les connexions distantes**</span><span class="sxs-lookup"><span data-stu-id="39637-176">**Require user Authentication for remote connections by using Network Level Authentication**</span></span>
    
    - <span data-ttu-id="39637-177">Paramètres keep alive :</span><span class="sxs-lookup"><span data-stu-id="39637-177">Keep Alive settings:</span></span>

        <span data-ttu-id="39637-178">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Composants Windows\Services Bureau à distance\Hôte de session Bureau à distance\Connexions :</span><span class="sxs-lookup"><span data-stu-id="39637-178">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="39637-179">**Configurer l’intervalle de connexion keep-alive**</span><span class="sxs-lookup"><span data-stu-id="39637-179">**Configure keep-alive connection interval**</span></span>

    - <span data-ttu-id="39637-180">Paramètres de reconnexion :</span><span class="sxs-lookup"><span data-stu-id="39637-180">Reconnect settings:</span></span>

        <span data-ttu-id="39637-181">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Composants Windows\Services Bureau à distance\Hôte de session Bureau à distance\Connexions :</span><span class="sxs-lookup"><span data-stu-id="39637-181">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="39637-182">**Reconnexion automatique**</span><span class="sxs-lookup"><span data-stu-id="39637-182">**Automatic reconnection**</span></span>

    - <span data-ttu-id="39637-183">Limiter le nombre de hello de paramètres de connexion :</span><span class="sxs-lookup"><span data-stu-id="39637-183">Limit hello number of connections settings:</span></span>

        <span data-ttu-id="39637-184">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Composants Windows\Services Bureau à distance\Hôte de session Bureau à distance\Connexions :</span><span class="sxs-lookup"><span data-stu-id="39637-184">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="39637-185">**Limiter le nombre de connexions**</span><span class="sxs-lookup"><span data-stu-id="39637-185">**Limit number of connections**</span></span>

## <a name="configure-windows-firewall-rules"></a><span data-ttu-id="39637-186">Configurer les règles du Pare-feu Windows</span><span class="sxs-lookup"><span data-stu-id="39637-186">Configure Windows Firewall rules</span></span>
1. <span data-ttu-id="39637-187">Activer le pare-feu Windows sur hello trois profils (domaine, Standard et Public) :</span><span class="sxs-lookup"><span data-stu-id="39637-187">Turn on Windows Firewall on hello three profiles (Domain, Standard, and Public):</span></span>

   ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\DomainProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\PublicProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\Standardprofile' -name "EnableFirewall" -Value 1 -Type DWord
   ```

2. <span data-ttu-id="39637-188">Exécutez hello suivant de commande PowerShell tooallow WinRM via des profils de pare-feu hello trois (domaine, privé et Public) et activer hello service PowerShell distant :</span><span class="sxs-lookup"><span data-stu-id="39637-188">Run hello following command in PowerShell tooallow WinRM through hello three firewall profiles (Domain, Private, and Public) and enable hello PowerShell Remote service:</span></span>
   
   ```PowerShell
    Enable-PSRemoting -force
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
   ```
3. <span data-ttu-id="39637-189">Activer hello suivant le trafic RDP hello pare-feu règles tooallow</span><span class="sxs-lookup"><span data-stu-id="39637-189">Enable hello following firewall rules tooallow hello RDP traffic</span></span> 

   ```PowerShell
    netsh advfirewall firewall set rule group="Remote Desktop" new enable=yes
   ```   
4. <span data-ttu-id="39637-190">Activer hello fichier et les règles de partage d’imprimante afin que hello VM peut répondre tooa utilitaire ping à l’intérieur de hello réseau virtuel :</span><span class="sxs-lookup"><span data-stu-id="39637-190">Enable hello File and Printer Sharing rule so that hello VM can respond tooa ping command inside hello Virtual Network:</span></span>

   ```PowerShell
    netsh advfirewall firewall set rule dir=in name="File and Printer Sharing (Echo Request - ICMPv4-In)" new enable=yes
   ``` 
5. <span data-ttu-id="39637-191">Si hello machine virtuelle doit faire partie d’un domaine, vérifiez hello suivant toomake paramètres sûr que les anciens paramètres de hello ne sont pas rétablis.</span><span class="sxs-lookup"><span data-stu-id="39637-191">If hello VM  will be part of a Domain, check hello following settings toomake sure that hello former settings are not reverted.</span></span> <span data-ttu-id="39637-192">stratégies de Hello AD qui doivent être vérifiées sont les suivants de hello :</span><span class="sxs-lookup"><span data-stu-id="39637-192">hello AD policies that must be checked are hello following:</span></span>

    - <span data-ttu-id="39637-193">Activer les profils de pare-feu Windows hello</span><span class="sxs-lookup"><span data-stu-id="39637-193">Enable hello Windows Firewall profiles</span></span>

        <span data-ttu-id="39637-194">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Réseau\Connexion réseau\Pare-feu Windows\Profil de domaine\Pare-feu Windows : **protéger toutes les connexions réseau**</span><span class="sxs-lookup"><span data-stu-id="39637-194">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Protect all network connections**</span></span>

       <span data-ttu-id="39637-195">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Réseau\Connexion réseau\Pare-feu Windows\Profil standard\Pare-feu Windows : **protéger toutes les connexions réseau**</span><span class="sxs-lookup"><span data-stu-id="39637-195">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Protect all network connections**</span></span>

    - <span data-ttu-id="39637-196">Activer le protocole RDP</span><span class="sxs-lookup"><span data-stu-id="39637-196">Enable RDP</span></span> 

        <span data-ttu-id="39637-197">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Réseau\Connexion réseau\Pare-feu Windows\Profil de domaine\Pare-feu Windows : **autoriser les exceptions du Bureau à distance en entrée**</span><span class="sxs-lookup"><span data-stu-id="39637-197">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

        <span data-ttu-id="39637-198">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Réseau\Connexion réseau\Pare-feu Windows\Profil standard\Pare-feu Windows : **autoriser les exceptions du Bureau à distance en entrée**</span><span class="sxs-lookup"><span data-stu-id="39637-198">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

    - <span data-ttu-id="39637-199">Activer le protocole ICMP-V4</span><span class="sxs-lookup"><span data-stu-id="39637-199">Enable ICMP-V4</span></span>

        <span data-ttu-id="39637-200">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Réseau\Connexion réseau\Pare-feu Windows\Profil de domaine\Pare-feu Windows : **autoriser les exceptions ICMP**</span><span class="sxs-lookup"><span data-stu-id="39637-200">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

        <span data-ttu-id="39637-201">Configuration ordinateur\Stratégies\Paramètres Windows\Modèles d’administration\Réseau\Connexion réseau\Pare-feu Windows\Profil standard\Pare-feu Windows : **autoriser les exceptions ICMP**</span><span class="sxs-lookup"><span data-stu-id="39637-201">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

## <a name="verify-vm-is-healthy-secure-and-accessible-with-rdp"></a><span data-ttu-id="39637-202">Vérifier que la machine virtuelle est saine, sécurisée et accessible via une connexion RDP</span><span class="sxs-lookup"><span data-stu-id="39637-202">Verify VM is healthy, secure, and accessible with RDP</span></span> 
1. <span data-ttu-id="39637-203">disque de hello que toomake est intègre et cohérentes, exécuter une opération de vérification de disque au redémarrage de l’ordinateur virtuel suivant hello :</span><span class="sxs-lookup"><span data-stu-id="39637-203">toomake sure hello disk is healthy and consistent, run a check disk operation at hello next VM restart:</span></span>

    ```PowerShell
    Chkdsk /f
    ```
    <span data-ttu-id="39637-204">Assurez-vous qu’hello affiche un disque propre et sain.</span><span class="sxs-lookup"><span data-stu-id="39637-204">Make sure that hello report shows a clean and healthy disk.</span></span>

2. <span data-ttu-id="39637-205">Définir des paramètres de données de Configuration de démarrage (BCD) hello.</span><span class="sxs-lookup"><span data-stu-id="39637-205">Set hello Boot Configuration Data (BCD) settings.</span></span> 

    > [!Note]
    > <span data-ttu-id="39637-206">Veillez à exécuter ces commandes dans une fenêtre de commande avec privilèges élevés et **NON** dans PowerShell :</span><span class="sxs-lookup"><span data-stu-id="39637-206">Make sure you run these commands on an elevated CMD window and **NOT** on PowerShell:</span></span>
   
   ```CMD
   bcdedit /set {bootmgr} integrityservices enable
   
   bcdedit /set {default} device partition=C:
   
   bcdedit /set {default} integrityservices enable
   
   bcdedit /set {default} recoveryenabled Off
   
   bcdedit /set {default} osdevice partition=C:
   
   bcdedit /set {default} bootstatuspolicy IgnoreAllFailures
   ```
3. <span data-ttu-id="39637-207">Vérifiez que ce référentiel du service Windows hello est cohérent.</span><span class="sxs-lookup"><span data-stu-id="39637-207">Verify that hello Windows Management Instrumentations repository is consistent.</span></span> <span data-ttu-id="39637-208">tooperform, exécution hello commande suivante :</span><span class="sxs-lookup"><span data-stu-id="39637-208">tooperform this, run hello following command:</span></span>

    ```PowerShell
    winmgmt /verifyrepository
    ```
    <span data-ttu-id="39637-209">Si le référentiel de hello est endommagé, consultez [WMI : espace de stockage endommagé, ou non](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span><span class="sxs-lookup"><span data-stu-id="39637-209">If hello repository is corrupted, see [WMI: Repository Corruption, or Not](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span></span>

4. <span data-ttu-id="39637-210">Assurez-vous que toute autre application n’utilise pas le port 3389 hello.</span><span class="sxs-lookup"><span data-stu-id="39637-210">Make sure that any other application is not using hello port 3389.</span></span> <span data-ttu-id="39637-211">Ce port est utilisé pour hello service RDP dans Azure.</span><span class="sxs-lookup"><span data-stu-id="39637-211">This port is used for hello RDP service in Azure.</span></span> <span data-ttu-id="39637-212">Vous pouvez exécuter **netstat - anob** toosee quels ports sont utilisés sur la machine virtuelle de hello dans :</span><span class="sxs-lookup"><span data-stu-id="39637-212">You can run **netstat -anob** toosee which ports are in used on hello VM:</span></span>

    ```PowerShell
    netstat -anob
    ```

5. <span data-ttu-id="39637-213">Si hello VHD de Windows que vous souhaitez tooupload est un contrôleur de domaine, puis procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="39637-213">If hello Windows VHD that you want tooupload is a domain controller, then follow these steps:</span></span>

    <span data-ttu-id="39637-214">R :</span><span class="sxs-lookup"><span data-stu-id="39637-214">A.</span></span> <span data-ttu-id="39637-215">Suivez [ces étapes supplémentaires](https://support.microsoft.com/kb/2904015) disque de hello tooprepare.</span><span class="sxs-lookup"><span data-stu-id="39637-215">Follow [these extra steps](https://support.microsoft.com/kb/2904015) tooprepare hello disk.</span></span>

    <span data-ttu-id="39637-216">B.</span><span class="sxs-lookup"><span data-stu-id="39637-216">B.</span></span> <span data-ttu-id="39637-217">Assurez-vous que vous connaissez le mot de passe DSRM hello au cas où vous toostart hello machine virtuelle en mode DSRM à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="39637-217">Make sure that you know hello DSRM password in case you have toostart hello VM in DSRM at some point.</span></span> <span data-ttu-id="39637-218">Vous souhaiterez peut-être toorefer toothis lien tooset hello [mot de passe DSRM](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="39637-218">You may want toorefer toothis link tooset hello [DSRM password](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span></span>

6. <span data-ttu-id="39637-219">Assurez-vous que le compte administrateur intégré hello et le mot de passe sont connus tooyou.</span><span class="sxs-lookup"><span data-stu-id="39637-219">Make sure that hello Built-in Administrator account and password are known tooyou.</span></span> <span data-ttu-id="39637-220">Vous pouvez souhaitez tooreset hello administrateur local mot de passe actuel et vous assurer que vous pouvez utiliser ce compte toosign dans tooWindows via hello connexion RDP.</span><span class="sxs-lookup"><span data-stu-id="39637-220">You may want tooreset hello current local administrator password and make sure that you can use this account toosign in tooWindows through hello RDP connection.</span></span> <span data-ttu-id="39637-221">Cette autorisation d’accès est contrôlée par l’objet de stratégie de groupe « Autoriser la connexion via les Services Bureau à distance » hello.</span><span class="sxs-lookup"><span data-stu-id="39637-221">This access permission is controlled by hello "Allow log on through Remote Desktop Services" Group Policy object.</span></span> <span data-ttu-id="39637-222">Vous pouvez afficher cet objet Bonjour éditeur de stratégie de groupe sous :</span><span class="sxs-lookup"><span data-stu-id="39637-222">You can view this object in hello Local Group Policy Editor under:</span></span>

    <span data-ttu-id="39637-223">Configuration ordinateur\Paramètres Windows\Paramètres de sécurité\Stratégies locales\Attribution des droits utilisateur</span><span class="sxs-lookup"><span data-stu-id="39637-223">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment</span></span>

7. <span data-ttu-id="39637-224">Vérifiez que hello suivant AD stratégies toomake que ne bloque l’accès RDP via RDP ni à partir du réseau de hello :</span><span class="sxs-lookup"><span data-stu-id="39637-224">Check hello following AD polices toomake sure that you are not blocking your RDP access through RDP nor from hello network:</span></span>

    - <span data-ttu-id="39637-225">Configuration ordinateur\Paramètres Windows\Paramètres sécurité\Stratégies locales\Attribution des droits Assignment\Deny accès toothis un ordinateur à partir du réseau de hello</span><span class="sxs-lookup"><span data-stu-id="39637-225">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny access toothis computer from hello network</span></span>

    - <span data-ttu-id="39637-226">Configuration de l’ordinateur\Paramètres Windows\Paramètres de sécurité\Stratégies locales\Attribution des droits utilisateurs\Refuser la connexion via les services Bureau à distance</span><span class="sxs-lookup"><span data-stu-id="39637-226">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny log on through Remote Desktop Services</span></span>


8. <span data-ttu-id="39637-227">Redémarrage hello VM toomake assurer que Windows est toujours sain peut être atteint à l’aide de connexion de RDP hello.</span><span class="sxs-lookup"><span data-stu-id="39637-227">Restart hello VM toomake sure that Windows is still healthy can be reached by using hello RDP connection.</span></span> <span data-ttu-id="39637-228">À ce stade, vous pouvez souhaitez de toocreate une machine virtuelle dans votre local Hyper-V toomake vraiment hello que complètement démarrage de la machine virtuelle et ensuite tester s’il s’agit de RDP est accessible.</span><span class="sxs-lookup"><span data-stu-id="39637-228">At this point, you may want toocreate a VM in your local Hyper-V toomake sure hello VM is starting completely and then test whether it is RDP reachable.</span></span>

9. <span data-ttu-id="39637-229">Supprimez tous les filtres de TDI (Transport Driver Interface) supplémentaires, tels que les logiciels qui analysent les paquets TCP ou les pare-feu supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="39637-229">Remove any extra Transport Driver Interface filters, such as software that analyzes TCP packets or extra firewalls.</span></span> <span data-ttu-id="39637-230">Vous pouvez également le consulter sur une étape ultérieure après hello qu'ordinateur virtuel est déployé dans Azure, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="39637-230">You can also review this on a later stage after hello VM is deployed in Azure if needed.</span></span>

10. <span data-ttu-id="39637-231">Désinstallez tous les autres logiciels tiers et pilote les composants connexes toophysical ou une autre technologie de virtualisation.</span><span class="sxs-lookup"><span data-stu-id="39637-231">Uninstall any other third-party software and driver that is related toophysical components or any other virtualization technology.</span></span>

### <a name="install-windows-updates"></a><span data-ttu-id="39637-232">Installer les mises à jour Windows</span><span class="sxs-lookup"><span data-stu-id="39637-232">Install Windows Updates</span></span>
<span data-ttu-id="39637-233">configuration d’idéale Hello est trop**ont le niveau de correctif logiciel hello d’ordinateur hello en hello dernières**.</span><span class="sxs-lookup"><span data-stu-id="39637-233">hello ideal configuration is too**have hello patch level of hello machine at hello latest**.</span></span> <span data-ttu-id="39637-234">Si ce n’est pas possible, assurez-vous que hello après les mises à jour sont installées :</span><span class="sxs-lookup"><span data-stu-id="39637-234">If this is not possible, make sure that hello following updates are installed:</span></span>

|                       |                   |           |                                       <span data-ttu-id="39637-235">Version de fichier minimale x64</span><span class="sxs-lookup"><span data-stu-id="39637-235">Minimum file version x64</span></span>       |                                      |                                      |                            |
|-------------------------|-------------------|------------------------------------|---------------------------------------------|--------------------------------------|--------------------------------------|----------------------------|
| <span data-ttu-id="39637-236">Composant</span><span class="sxs-lookup"><span data-stu-id="39637-236">Component</span></span>               | <span data-ttu-id="39637-237">Fichier binaire</span><span class="sxs-lookup"><span data-stu-id="39637-237">Binary</span></span>            | <span data-ttu-id="39637-238">Windows 7 et Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="39637-238">Windows 7 & Windows Server 2008 R2</span></span> | <span data-ttu-id="39637-239">Windows 8 et Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="39637-239">Windows 8 & Windows Server 2012</span></span>             | <span data-ttu-id="39637-240">Windows 8.1 et Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="39637-240">Windows 8.1 & Windows Server 2012 R2</span></span> | <span data-ttu-id="39637-241">Windows 10 et Windows Server 2016 RS1</span><span class="sxs-lookup"><span data-stu-id="39637-241">Windows 10 & Windows Server 2016 RS1</span></span> | <span data-ttu-id="39637-242">Windows 10 RS2</span><span class="sxs-lookup"><span data-stu-id="39637-242">Windows 10 RS2</span></span>             |
| <span data-ttu-id="39637-243">Storage</span><span class="sxs-lookup"><span data-stu-id="39637-243">Storage</span></span>                 | <span data-ttu-id="39637-244">disk.sys</span><span class="sxs-lookup"><span data-stu-id="39637-244">disk.sys</span></span>          | <span data-ttu-id="39637-245">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-245">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="39637-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span></span> | <span data-ttu-id="39637-247">6.3.9600.18203 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="39637-247">6.3.9600.18203 - KB3137061</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="39637-248">storport.sys</span><span class="sxs-lookup"><span data-stu-id="39637-248">storport.sys</span></span>      | <span data-ttu-id="39637-249">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-249">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span><span class="sxs-lookup"><span data-stu-id="39637-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span></span> | <span data-ttu-id="39637-251">6.3.9600.18573 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-251">6.3.9600.18573 - KB4022726</span></span>           | <span data-ttu-id="39637-252">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-252">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="39637-253">10.0.15063.332</span><span class="sxs-lookup"><span data-stu-id="39637-253">10.0.15063.332</span></span>             |
|                         | <span data-ttu-id="39637-254">ntfs.sys</span><span class="sxs-lookup"><span data-stu-id="39637-254">ntfs.sys</span></span>          | <span data-ttu-id="39637-255">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-255">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span><span class="sxs-lookup"><span data-stu-id="39637-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span></span> | <span data-ttu-id="39637-257">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-257">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="39637-258">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-258">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="39637-259">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="39637-259">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="39637-260">Iologmsg.dll</span><span class="sxs-lookup"><span data-stu-id="39637-260">Iologmsg.dll</span></span>      | <span data-ttu-id="39637-261">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-261">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-262">6.2.9200.16384 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="39637-262">6.2.9200.16384 - KB2995387</span></span>                  | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="39637-263">Classpnp.sys</span><span class="sxs-lookup"><span data-stu-id="39637-263">Classpnp.sys</span></span>      | <span data-ttu-id="39637-264">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-264">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="39637-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span></span> | <span data-ttu-id="39637-266">6.3.9600.18334 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="39637-266">6.3.9600.18334 - KB3172614</span></span>           | <span data-ttu-id="39637-267">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-267">10.0.14393.953 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="39637-268">Volsnap.sys</span><span class="sxs-lookup"><span data-stu-id="39637-268">Volsnap.sys</span></span>       | <span data-ttu-id="39637-269">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-269">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span><span class="sxs-lookup"><span data-stu-id="39637-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span></span> | <span data-ttu-id="39637-271">6.3.9600.18265 - KB3145384</span><span class="sxs-lookup"><span data-stu-id="39637-271">6.3.9600.18265 - KB3145384</span></span>           | -                                    | <span data-ttu-id="39637-272">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-272">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-273">partmgr.sys</span><span class="sxs-lookup"><span data-stu-id="39637-273">partmgr.sys</span></span>       | <span data-ttu-id="39637-274">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-274">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-275">6.2.9200.16681 - KB2877114</span><span class="sxs-lookup"><span data-stu-id="39637-275">6.2.9200.16681 - KB2877114</span></span>                  | <span data-ttu-id="39637-276">6.3.9600.17401 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="39637-276">6.3.9600.17401 - KB3000850</span></span>           | <span data-ttu-id="39637-277">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-277">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="39637-278">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-278">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-279">volmgr.sys</span><span class="sxs-lookup"><span data-stu-id="39637-279">volmgr.sys</span></span>        |                                    |                                             |                                      |                                      | <span data-ttu-id="39637-280">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-280">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-281">Volmgrx.sys</span><span class="sxs-lookup"><span data-stu-id="39637-281">Volmgrx.sys</span></span>       | <span data-ttu-id="39637-282">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-282">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | <span data-ttu-id="39637-283">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-283">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-284">Msiscsi.sys</span><span class="sxs-lookup"><span data-stu-id="39637-284">Msiscsi.sys</span></span>       | <span data-ttu-id="39637-285">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-285">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-286">6.2.9200.21006 - KB2955163</span><span class="sxs-lookup"><span data-stu-id="39637-286">6.2.9200.21006 - KB2955163</span></span>                  | <span data-ttu-id="39637-287">6.3.9600.18624 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-287">6.3.9600.18624 - KB4022726</span></span>           | <span data-ttu-id="39637-288">10.0.14393.1066 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-288">10.0.14393.1066 - KB4022715</span></span>          | <span data-ttu-id="39637-289">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="39637-289">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="39637-290">Msdsm.sys</span><span class="sxs-lookup"><span data-stu-id="39637-290">Msdsm.sys</span></span>         | <span data-ttu-id="39637-291">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-291">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-292">6.2.9200.21474 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="39637-292">6.2.9200.21474 - KB3046101</span></span>                  | <span data-ttu-id="39637-293">6.3.9600.18592 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-293">6.3.9600.18592 - KB4022726</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="39637-294">Mpio.sys</span><span class="sxs-lookup"><span data-stu-id="39637-294">Mpio.sys</span></span>          | <span data-ttu-id="39637-295">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-295">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-296">6.2.9200.21190 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="39637-296">6.2.9200.21190 - KB3046101</span></span>                  | <span data-ttu-id="39637-297">6.3.9600.18616 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-297">6.3.9600.18616 - KB4022726</span></span>           | <span data-ttu-id="39637-298">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-298">10.0.14393.1198 - KB4022715</span></span>          | -                          |
|                         | <span data-ttu-id="39637-299">Fveapi.dll</span><span class="sxs-lookup"><span data-stu-id="39637-299">Fveapi.dll</span></span>        | <span data-ttu-id="39637-300">6.1.7601.23311 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-300">6.1.7601.23311 - KB3125574</span></span>         | <span data-ttu-id="39637-301">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="39637-301">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="39637-302">6.3.9600.18294 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="39637-302">6.3.9600.18294 - KB3172614</span></span>           | <span data-ttu-id="39637-303">10.0.14393.576 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-303">10.0.14393.576 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="39637-304">Fveapibase.dll</span><span class="sxs-lookup"><span data-stu-id="39637-304">Fveapibase.dll</span></span>    | <span data-ttu-id="39637-305">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-305">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-306">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="39637-306">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="39637-307">6.3.9600.17415 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="39637-307">6.3.9600.17415 - KB3172614</span></span>           | <span data-ttu-id="39637-308">10.0.14393.206 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-308">10.0.14393.206 - KB4022715</span></span>           | -                          |
| <span data-ttu-id="39637-309">Réseau</span><span class="sxs-lookup"><span data-stu-id="39637-309">Network</span></span>                 | <span data-ttu-id="39637-310">netvsc.sys</span><span class="sxs-lookup"><span data-stu-id="39637-310">netvsc.sys</span></span>        | -                                  | -                                           | -                                    | <span data-ttu-id="39637-311">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-311">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="39637-312">10.0.15063.250 - KB4020001</span><span class="sxs-lookup"><span data-stu-id="39637-312">10.0.15063.250 - KB4020001</span></span> |
|                         | <span data-ttu-id="39637-313">mrxsmb10.sys</span><span class="sxs-lookup"><span data-stu-id="39637-313">mrxsmb10.sys</span></span>      | <span data-ttu-id="39637-314">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="39637-314">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="39637-315">6.2.9200.22108 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="39637-315">6.2.9200.22108 - KB4022724</span></span>                  | <span data-ttu-id="39637-316">6.3.9600.18603 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-316">6.3.9600.18603 - KB4022726</span></span>           | <span data-ttu-id="39637-317">10.0.14393.479 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-317">10.0.14393.479 - KB4022715</span></span>           | <span data-ttu-id="39637-318">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="39637-318">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="39637-319">mrxsmb20.sys</span><span class="sxs-lookup"><span data-stu-id="39637-319">mrxsmb20.sys</span></span>      | <span data-ttu-id="39637-320">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="39637-320">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="39637-321">6.2.9200.21548 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="39637-321">6.2.9200.21548 - KB4022724</span></span>                  | <span data-ttu-id="39637-322">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-322">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="39637-323">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-323">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="39637-324">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="39637-324">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="39637-325">mrxsmb.sys</span><span class="sxs-lookup"><span data-stu-id="39637-325">mrxsmb.sys</span></span>        | <span data-ttu-id="39637-326">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="39637-326">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="39637-327">6.2.9200.22074 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="39637-327">6.2.9200.22074 - KB4022724</span></span>                  | <span data-ttu-id="39637-328">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-328">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="39637-329">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-329">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="39637-330">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-330">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-331">tcpip.sys</span><span class="sxs-lookup"><span data-stu-id="39637-331">tcpip.sys</span></span>         | <span data-ttu-id="39637-332">6.1.7601.23761 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="39637-332">6.1.7601.23761 - KB4022722</span></span>         | <span data-ttu-id="39637-333">6.2.9200.22070 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="39637-333">6.2.9200.22070 - KB4022724</span></span>                  | <span data-ttu-id="39637-334">6.3.9600.18478 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-334">6.3.9600.18478 - KB4022726</span></span>           | <span data-ttu-id="39637-335">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-335">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="39637-336">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="39637-336">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="39637-337">http.sys</span><span class="sxs-lookup"><span data-stu-id="39637-337">http.sys</span></span>          | <span data-ttu-id="39637-338">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-338">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-339">6.2.9200.17285 - KB3042553</span><span class="sxs-lookup"><span data-stu-id="39637-339">6.2.9200.17285 - KB3042553</span></span>                  | <span data-ttu-id="39637-340">6.3.9600.18574 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-340">6.3.9600.18574 - KB4022726</span></span>           | <span data-ttu-id="39637-341">10.0.14393.251 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-341">10.0.14393.251 - KB4022715</span></span>           | <span data-ttu-id="39637-342">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="39637-342">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="39637-343">vmswitch.sys</span><span class="sxs-lookup"><span data-stu-id="39637-343">vmswitch.sys</span></span>      | <span data-ttu-id="39637-344">6.1.7601.23727 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="39637-344">6.1.7601.23727 - KB4022719</span></span>         | <span data-ttu-id="39637-345">6.2.9200.22117 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="39637-345">6.2.9200.22117 - KB4022724</span></span>                  | <span data-ttu-id="39637-346">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-346">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="39637-347">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-347">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="39637-348">10.0.15063.138</span><span class="sxs-lookup"><span data-stu-id="39637-348">10.0.15063.138</span></span>             |
| <span data-ttu-id="39637-349">Principal</span><span class="sxs-lookup"><span data-stu-id="39637-349">Core</span></span>                    | <span data-ttu-id="39637-350">ntoskrnl.exe</span><span class="sxs-lookup"><span data-stu-id="39637-350">ntoskrnl.exe</span></span>      | <span data-ttu-id="39637-351">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="39637-351">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="39637-352">6.2.9200.22170 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="39637-352">6.2.9200.22170 - KB4022718</span></span>                  | <span data-ttu-id="39637-353">6.3.9600.18696 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-353">6.3.9600.18696 - KB4022726</span></span>           | <span data-ttu-id="39637-354">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-354">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="39637-355">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="39637-355">10.0.15063.483</span></span>             |
| <span data-ttu-id="39637-356">Services Bureau à distance</span><span class="sxs-lookup"><span data-stu-id="39637-356">Remote Desktop Services</span></span> | <span data-ttu-id="39637-357">rdpcorets.dll</span><span class="sxs-lookup"><span data-stu-id="39637-357">rdpcorets.dll</span></span>     | <span data-ttu-id="39637-358">6.2.9200.21506 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="39637-358">6.2.9200.21506 - KB4022719</span></span>         | <span data-ttu-id="39637-359">6.2.9200.22104 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="39637-359">6.2.9200.22104 - KB4022724</span></span>                  | <span data-ttu-id="39637-360">6.3.9600.18619 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-360">6.3.9600.18619 - KB4022726</span></span>           | <span data-ttu-id="39637-361">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-361">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="39637-362">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-362">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-363">termsrv.dll</span><span class="sxs-lookup"><span data-stu-id="39637-363">termsrv.dll</span></span>       | <span data-ttu-id="39637-364">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-364">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="39637-365">6.2.9200.17048 - KB2973501</span><span class="sxs-lookup"><span data-stu-id="39637-365">6.2.9200.17048 - KB2973501</span></span>                  | <span data-ttu-id="39637-366">6.3.9600.17415 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="39637-366">6.3.9600.17415 - KB3000850</span></span>           | <span data-ttu-id="39637-367">10.0.14393.0 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-367">10.0.14393.0 - KB4022715</span></span>             | <span data-ttu-id="39637-368">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="39637-368">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="39637-369">termdd.sys</span><span class="sxs-lookup"><span data-stu-id="39637-369">termdd.sys</span></span>        | <span data-ttu-id="39637-370">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-370">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="39637-371">win32k.sys</span><span class="sxs-lookup"><span data-stu-id="39637-371">win32k.sys</span></span>        | <span data-ttu-id="39637-372">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="39637-372">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="39637-373">6.2.9200.22168 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="39637-373">6.2.9200.22168 - KB4022718</span></span>                  | <span data-ttu-id="39637-374">6.3.9600.18698 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="39637-374">6.3.9600.18698 - KB4022726</span></span>           | <span data-ttu-id="39637-375">10.0.14393.594 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="39637-375">10.0.14393.594 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="39637-376">rdpdd.dll</span><span class="sxs-lookup"><span data-stu-id="39637-376">rdpdd.dll</span></span>         | <span data-ttu-id="39637-377">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-377">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="39637-378">rdpwd.sys</span><span class="sxs-lookup"><span data-stu-id="39637-378">rdpwd.sys</span></span>         | <span data-ttu-id="39637-379">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="39637-379">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
| <span data-ttu-id="39637-380">Sécurité</span><span class="sxs-lookup"><span data-stu-id="39637-380">Security</span></span>                | <span data-ttu-id="39637-381">Échéance tooWannaCrypt</span><span class="sxs-lookup"><span data-stu-id="39637-381">Due tooWannaCrypt</span></span> | <span data-ttu-id="39637-382">KB4012212</span><span class="sxs-lookup"><span data-stu-id="39637-382">KB4012212</span></span>                          | <span data-ttu-id="39637-383">KB4012213</span><span class="sxs-lookup"><span data-stu-id="39637-383">KB4012213</span></span>                                   | <span data-ttu-id="39637-384">KB4012213</span><span class="sxs-lookup"><span data-stu-id="39637-384">KB4012213</span></span>                            | <span data-ttu-id="39637-385">KB4012606</span><span class="sxs-lookup"><span data-stu-id="39637-385">KB4012606</span></span>                            | <span data-ttu-id="39637-386">KB4012606</span><span class="sxs-lookup"><span data-stu-id="39637-386">KB4012606</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="39637-387">KB4012216</span><span class="sxs-lookup"><span data-stu-id="39637-387">KB4012216</span></span>                                   |                                      | <span data-ttu-id="39637-388">KB4013198</span><span class="sxs-lookup"><span data-stu-id="39637-388">KB4013198</span></span>                            | <span data-ttu-id="39637-389">KB4013198</span><span class="sxs-lookup"><span data-stu-id="39637-389">KB4013198</span></span>                  |
|                         |                   | <span data-ttu-id="39637-390">KB4012215</span><span class="sxs-lookup"><span data-stu-id="39637-390">KB4012215</span></span>                          | <span data-ttu-id="39637-391">KB4012214</span><span class="sxs-lookup"><span data-stu-id="39637-391">KB4012214</span></span>                                   | <span data-ttu-id="39637-392">KB4012216</span><span class="sxs-lookup"><span data-stu-id="39637-392">KB4012216</span></span>                            | <span data-ttu-id="39637-393">KB4013429</span><span class="sxs-lookup"><span data-stu-id="39637-393">KB4013429</span></span>                            | <span data-ttu-id="39637-394">KB4013429</span><span class="sxs-lookup"><span data-stu-id="39637-394">KB4013429</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="39637-395">KB4012217</span><span class="sxs-lookup"><span data-stu-id="39637-395">KB4012217</span></span>                                   |                                      | <span data-ttu-id="39637-396">KB4013429</span><span class="sxs-lookup"><span data-stu-id="39637-396">KB4013429</span></span>                            | <span data-ttu-id="39637-397">KB4013429</span><span class="sxs-lookup"><span data-stu-id="39637-397">KB4013429</span></span>                  |
       
### <span data-ttu-id="39637-398">Lorsque toouse sysprep<a id="step23"></a></span><span class="sxs-lookup"><span data-stu-id="39637-398">When toouse sysprep <a id="step23"></a></span></span>    

<span data-ttu-id="39637-399">Sysprep est un processus risque d’être exécuté dans une installation de windows va réinitialiser installation hello du système de hello et fournit un « out of hello box experience » en supprimant toutes les données personnelles et de la réinitialisation de plusieurs composants.</span><span class="sxs-lookup"><span data-stu-id="39637-399">Sysprep is a process that you could run into a windows installation that will reset hello installation of hello system and will provide an “out of hello box experience” by removing all personal data and resetting several components.</span></span> <span data-ttu-id="39637-400">Cela s’effectue généralement si vous voulez toocreate un modèle à partir de laquelle vous pouvez déployer plusieurs autres ordinateurs virtuels qui ont une configuration spécifique.</span><span class="sxs-lookup"><span data-stu-id="39637-400">You typically do this if you want toocreate a template from which you can deploy several other VMs that have a specific configuration.</span></span> <span data-ttu-id="39637-401">On appelle cela une **image généralisée**.</span><span class="sxs-lookup"><span data-stu-id="39637-401">This is called a **generalized image**.</span></span>

<span data-ttu-id="39637-402">Si, au lieu de cela, vous souhaitez uniquement toocreate une machine virtuelle à partir d’un disque, vous n’avez pas toouse sysprep.</span><span class="sxs-lookup"><span data-stu-id="39637-402">If, instead, you want only toocreate one VM from one disk, you don’t have toouse sysprep.</span></span> <span data-ttu-id="39637-403">Dans ce cas, vous pouvez simplement créer hello machine virtuelle à partir de ce qui est appelé un **image spécialisée**.</span><span class="sxs-lookup"><span data-stu-id="39637-403">In this situation, you can just create hello VM from what is known as a **specialized image**.</span></span>

<span data-ttu-id="39637-404">Pour plus d’informations sur comment toocreate une machine virtuelle à partir d’un disque spécialisé, consultez :</span><span class="sxs-lookup"><span data-stu-id="39637-404">For more information about how toocreate a VM from a specialized disk, see:</span></span>

- [<span data-ttu-id="39637-405">Créer une machine virtuelle à partir d’un disque spécialisé</span><span class="sxs-lookup"><span data-stu-id="39637-405">Create a VM from a specialized disk</span></span>](create-vm-specialized.md)
- [<span data-ttu-id="39637-406">Créer une machine virtuelle à partir d’un disque dur virtuel spécialisé</span><span class="sxs-lookup"><span data-stu-id="39637-406">Create a VM from a specialized VHD disk</span></span>](https://azure.microsoft.com/resources/templates/201-vm-specialized-vhd/)

<span data-ttu-id="39637-407">Si vous souhaitez toocreate une image généralisée, vous devez toorun sysprep.</span><span class="sxs-lookup"><span data-stu-id="39637-407">If you want toocreate a generalized image, you need toorun sysprep.</span></span> <span data-ttu-id="39637-408">Pour plus d’informations sur Sysprep, consultez [comment tooUse Sysprep : Introduction](http://technet.microsoft.com/library/bb457073.aspx).</span><span class="sxs-lookup"><span data-stu-id="39637-408">For more information about Sysprep, see [How tooUse Sysprep: An Introduction](http://technet.microsoft.com/library/bb457073.aspx).</span></span> 

<span data-ttu-id="39637-409">Tous les rôles ou toutes les applications installés sur un ordinateur Windows ne prennent pas forcément en charge cette généralisation.</span><span class="sxs-lookup"><span data-stu-id="39637-409">Not every role or application that’s installed on a Windows-based computer supports this generalization.</span></span> <span data-ttu-id="39637-410">Par conséquent, avant de vous exécutez cette procédure, consultez le toohello suivant l’article toomake que ce rôle hello de cet ordinateur est pris en charge par sysprep.</span><span class="sxs-lookup"><span data-stu-id="39637-410">So before you run this procedure, refer toohello following article toomake sure that hello role of that computer is supported by sysprep.</span></span> <span data-ttu-id="39637-411">Pour plus d’informations, consultez la page [Prise en charge de Sysprep pour les rôles serveur](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles).</span><span class="sxs-lookup"><span data-stu-id="39637-411">For more information, [Sysprep Support for Server Roles](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles).</span></span>

### <a name="steps-toogeneralize-a-vhd"></a><span data-ttu-id="39637-412">Étapes toogeneralize un disque dur virtuel</span><span class="sxs-lookup"><span data-stu-id="39637-412">Steps toogeneralize a VHD</span></span>

>[!NOTE]
> <span data-ttu-id="39637-413">Après l’exécution de sysprep.exe comme spécifié dans hello comme suit, désactiver hello machine virtuelle et n’activez pas elle en tant que vous créez une image à partir de celui-ci dans Azure.</span><span class="sxs-lookup"><span data-stu-id="39637-413">After you run sysprep.exe as specified  in hello following steps, turn off hello VM, and do not turn it back on until you create an image from it in Azure.</span></span>

1. <span data-ttu-id="39637-414">Connectez-vous toohello machine virtuelle Windows.</span><span class="sxs-lookup"><span data-stu-id="39637-414">Sign in toohello Windows VM.</span></span>
2. <span data-ttu-id="39637-415">Exécutez une **invite de commandes** en tant qu’administrateur.</span><span class="sxs-lookup"><span data-stu-id="39637-415">Run **Command Prompt** as an administrator.</span></span> 
3. <span data-ttu-id="39637-416">Remplacez le répertoire hello pour : **%windir%\system32\sysprep**, puis exécutez **sysprep.exe**.</span><span class="sxs-lookup"><span data-stu-id="39637-416">Change hello directory to: **%windir%\system32\sysprep**, and then run **sysprep.exe**.</span></span>
3. <span data-ttu-id="39637-417">Bonjour **outil de préparation système** boîte de dialogue, sélectionnez **entrer le système Out-of-Box Experience (OOBE)**et assurez-vous que hello **Generalize** case à cocher est activée.</span><span class="sxs-lookup"><span data-stu-id="39637-417">In hello **System Preparation Tool** dialog box, select **Enter System Out-of-Box Experience (OOBE)**, and make sure that hello **Generalize** check box is selected.</span></span>

    ![Outil de préparation système](media/prepare-for-upload-vhd-image/syspre.png)
4. <span data-ttu-id="39637-419">Dans **Options d’arrêt**, sélectionnez **Arrêter**.</span><span class="sxs-lookup"><span data-stu-id="39637-419">In **Shutdown Options**, select **Shutdown**.</span></span>
5. <span data-ttu-id="39637-420">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="39637-420">Click **OK**.</span></span>
6. <span data-ttu-id="39637-421">Sysprep est terminée, arrêtez hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="39637-421">When Sysprep completes, shut down hello VM.</span></span> <span data-ttu-id="39637-422">N’utilisez pas **redémarrer** tooshut hello machine virtuelle vers le bas.</span><span class="sxs-lookup"><span data-stu-id="39637-422">Do not use **Restart** tooshut down hello VM.</span></span>
7. <span data-ttu-id="39637-423">Hello disque dur virtuel est à présent prêt toobe téléchargé.</span><span class="sxs-lookup"><span data-stu-id="39637-423">Now hello VHD is ready toobe uploaded.</span></span> <span data-ttu-id="39637-424">Pour plus d’informations sur comment toocreate une machine virtuelle à partir d’un disque généralisé, consultez [télécharger un disque dur virtuel généralisé et son utilisation toocreate un nouvelles machines virtuelles dans Azure](sa-upload-generalized.md).</span><span class="sxs-lookup"><span data-stu-id="39637-424">For more information about how toocreate a VM from a generalized disk, see [Upload a generalized VHD and use it toocreate a new VMs in Azure](sa-upload-generalized.md).</span></span>


## <a name="complete-recommended-configurations"></a><span data-ttu-id="39637-425">Remplir les configurations recommandées</span><span class="sxs-lookup"><span data-stu-id="39637-425">Complete recommended configurations</span></span>
<span data-ttu-id="39637-426">Hello, suivant les paramètres n’affecte pas le téléchargement du disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="39637-426">hello following settings do not affect VHD uploading.</span></span> <span data-ttu-id="39637-427">Toutefois, nous vous recommandons vivement de les configurer.</span><span class="sxs-lookup"><span data-stu-id="39637-427">However, we strongly recommend that you configured them.</span></span>

* <span data-ttu-id="39637-428">Installer hello [Agent des ordinateurs virtuels Azure](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="39637-428">Install hello [Azure VMs Agent](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="39637-429">Vous pouvez ensuite activer les extensions de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="39637-429">Then you can enable VM extensions.</span></span> <span data-ttu-id="39637-430">extensions de machine virtuelle Hello implémentent la plupart des fonctionnalités critiques de hello que vous souhaitez toouse avec vos machines virtuelles telles que la réinitialisation des mots de passe, configuration RDP et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="39637-430">hello VM extensions implement most of hello critical functionality that you might want toouse with your VMs such as resetting passwords, configuring RDP, and so on.</span></span> <span data-ttu-id="39637-431">Pour plus d'informations, consultez les pages suivantes :</span><span class="sxs-lookup"><span data-stu-id="39637-431">For more information, see:</span></span>

    - <span data-ttu-id="39637-432">Billet de blog en anglais [VM Agent and Extensions – Part 1](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-1/)</span><span class="sxs-lookup"><span data-stu-id="39637-432">[VM Agent and Extensions – Part 1](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-1/)</span></span>
    - <span data-ttu-id="39637-433">Billet de blog en anglais [VM Agent and Extensions – Part 2](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-2/)</span><span class="sxs-lookup"><span data-stu-id="39637-433">[VM Agent and Extensions – Part 2](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-2/)</span></span>
* <span data-ttu-id="39637-434">journal de vidage Hello peut être utile pour résoudre les problèmes de blocage de Windows.</span><span class="sxs-lookup"><span data-stu-id="39637-434">hello Dump log can be helpful in troubleshooting Windows crash issues.</span></span> <span data-ttu-id="39637-435">Activer la collecte de journal de vidage hello :</span><span class="sxs-lookup"><span data-stu-id="39637-435">Enable hello Dump log collection:</span></span>
  
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "AutoReboot" -Value 0 -Type DWord
    New-Item -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps'
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
    <span data-ttu-id="39637-436">Si vous recevez des erreurs au cours des procédures de hello les étapes de cet article, cela signifie que les clés de Registre hello existe déjà.</span><span class="sxs-lookup"><span data-stu-id="39637-436">If you receive any errors during any of hello procedural steps in this article, this means that hello registry keys already exists.</span></span> <span data-ttu-id="39637-437">Dans ce cas, utilisez hello suivant à la place les commandes :</span><span class="sxs-lookup"><span data-stu-id="39637-437">In this situation, use hello following commands instead:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
*  <span data-ttu-id="39637-438">Après la création d’hello machine virtuelle dans Azure, nous vous recommandons de placer hello du fichier d’échange sur hello » temporelle « volume tooimprove performances.</span><span class="sxs-lookup"><span data-stu-id="39637-438">After hello VM is created in Azure, we recommend that you put hello pagefile on hello ”Temporal drive” volume tooimprove performance.</span></span> <span data-ttu-id="39637-439">Pour ce faire :</span><span class="sxs-lookup"><span data-stu-id="39637-439">You can set up this as follows:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management' -name "PagingFiles" -Value "D:\pagefile"
    ```
<span data-ttu-id="39637-440">Si n’importe quel disque de données est attachée toohello VM, lettre de lecteur du volume de lecteur temporelle hello est généralement « d ».</span><span class="sxs-lookup"><span data-stu-id="39637-440">If there’s any data disk that is attached toohello VM, hello Temporal drive volume's drive letter is typically "D."</span></span> <span data-ttu-id="39637-441">Cette désignation peut être différente, selon le nombre de hello de lecteurs disponibles et les paramètres hello que vous définissez.</span><span class="sxs-lookup"><span data-stu-id="39637-441">This designation could be different, depending on hello number of available drives and hello settings that you  make.</span></span>

## <a name="next-steps"></a><span data-ttu-id="39637-442">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="39637-442">Next steps</span></span>
* [<span data-ttu-id="39637-443">Télécharger un tooAzure d’image de machine virtuelle Windows pour les déploiements de gestionnaire de ressources</span><span class="sxs-lookup"><span data-stu-id="39637-443">Upload a Windows VM image tooAzure for Resource Manager deployments</span></span>](upload-generalized-managed.md)

