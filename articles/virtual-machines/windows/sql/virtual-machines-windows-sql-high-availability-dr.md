---
title: "aaaHigh disponibilité et récupération d’urgence pour SQL Server | Documents Microsoft"
description: "En savoir plus sur hello différents types de stratégies HADR pour SQL Server s’exécutant sur des Machines virtuelles Azure."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 53981f7e-8370-4979-b26a-93a5988d905f
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: mikeray
ms.openlocfilehash: 2b62d8b30520952ba6b7da7177a2c2de95bea8ce
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="high-availability-and-disaster-recovery-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="72d2c-103">Haute disponibilité et récupération d’urgence pour SQL Server dans Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="72d2c-103">High availability and disaster recovery for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="72d2c-104">Microsoft Azure virtual machines virtuelles avec SQL Server peut aider à réduire le coût hello de solution de haute disponibilité et d’urgence (HADR) de récupération de base de données.</span><span class="sxs-lookup"><span data-stu-id="72d2c-104">Microsoft Azure virtual machines (VMs) with SQL Server can help lower hello cost of a high availability and disaster recovery (HADR) database solution.</span></span> <span data-ttu-id="72d2c-105">La plupart des solutions HADR SQL Server sont prises en charge dans les machines virtuelles Azure, en tant que solutions Azure uniquement et solutions hybrides.</span><span class="sxs-lookup"><span data-stu-id="72d2c-105">Most SQL Server HADR solutions are supported in Azure virtual machines, both as Azure-only and as hybrid solutions.</span></span> <span data-ttu-id="72d2c-106">Dans une solution Azure uniquement, le système HADR hello s’exécute dans Azure.</span><span class="sxs-lookup"><span data-stu-id="72d2c-106">In an Azure-only solution, hello entire HADR system runs in Azure.</span></span> <span data-ttu-id="72d2c-107">Dans une configuration hybride, la partie de la solution de hello s’exécute dans Azure et hello autre partie est exécutée localement dans votre organisation.</span><span class="sxs-lookup"><span data-stu-id="72d2c-107">In a hybrid configuration, part of hello solution runs in Azure and hello other part runs on-premises in your organization.</span></span> <span data-ttu-id="72d2c-108">Hello souplesse de hello environnement Azure vous permet de toomove partiellement ou totalement budgétaire de hello tooAzure toosatisfy exigences HADR et de votre serveur SQL Server de base de données système.</span><span class="sxs-lookup"><span data-stu-id="72d2c-108">hello flexibility of hello Azure environment enables you toomove partially or completely tooAzure toosatisfy hello budget and HADR requirements of your SQL Server database systems.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="understanding-hello-need-for-an-hadr-solution"></a><span data-ttu-id="72d2c-109">Comprendre les besoins de hello pour une solution HADR</span><span class="sxs-lookup"><span data-stu-id="72d2c-109">Understanding hello need for an HADR solution</span></span>
<span data-ttu-id="72d2c-110">C’est tooyou tooensure que votre système de base de données possède des fonctions HADR hello qui hello contrat de niveau de service (SLA).</span><span class="sxs-lookup"><span data-stu-id="72d2c-110">It is up tooyou tooensure that your database system possesses hello HADR capabilities that hello service-level agreement (SLA) requires.</span></span> <span data-ttu-id="72d2c-111">Hello fait que Azure fournisse des mécanismes de haute disponibilité, telles que le service de réparation pour les services de cloud computing et la détection des ordinateurs virtuels, de la récupération de défaillance n’est pas garantie que vous permettent de respecter les SLA hello souhaité.</span><span class="sxs-lookup"><span data-stu-id="72d2c-111">hello fact that Azure provides high availability mechanisms, such as service healing for cloud services and failure recovery detection for Virtual Machines, does not itself guarantee you can meet hello desired SLA.</span></span> <span data-ttu-id="72d2c-112">Ces mécanismes protègent hello haute disponibilité des machines virtuelles de hello mais pas hello haute disponibilité de SQL Server est en cours d’exécution à l’intérieur de hello machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="72d2c-112">These mechanisms protect hello high availability of hello VMs but not hello high availability of SQL Server running inside hello VMs.</span></span> <span data-ttu-id="72d2c-113">Il est possible pour hello SQL Server instance toofail tandis que hello machine virtuelle est en ligne et sain.</span><span class="sxs-lookup"><span data-stu-id="72d2c-113">It is possible for hello SQL Server instance toofail while hello VM is online and healthy.</span></span> <span data-ttu-id="72d2c-114">En outre, les mécanismes de haute disponibilité de même hello fournies par Azure offrent des temps morts des machines virtuelles de hello échéance tooevents tels que la récupération de défaillances logicielles ou matérielles et des mises à niveau du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="72d2c-114">Moreover, even hello high availability mechanisms provided by Azure allow for downtime of hello VMs due tooevents such as recovery from software or hardware failures and operating system upgrades.</span></span>

<span data-ttu-id="72d2c-115">Par ailleurs, le stockage géo-redondant dans Azure (implémenté via la fonctionnalité de géo-réplication) peut ne pas être une solution de récupération d’urgence adaptée pour vos bases de données.</span><span class="sxs-lookup"><span data-stu-id="72d2c-115">In addition, Geo Redundant Storage (GRS) in Azure, which is implemented with a feature called geo-replication, may not be an adequate disaster recovery solution for your databases.</span></span> <span data-ttu-id="72d2c-116">Étant donné que la géo-réplication envoie les données de façon asynchrone, mises à jour récentes peuvent être perdus en cas de hello de sinistre.</span><span class="sxs-lookup"><span data-stu-id="72d2c-116">Because geo-replication sends data asynchronously, recent updates can be lost in hello event of disaster.</span></span> <span data-ttu-id="72d2c-117">Plus d’informations concernant les limitations de géo-réplication sont traités dans hello [géo-réplication non pris en charge pour les données et fichiers journaux sur des disques distincts](#geo-replication-support) section.</span><span class="sxs-lookup"><span data-stu-id="72d2c-117">More information regarding geo-replication limitations are covered in hello [Geo-replication not supported for data and log files on separate disks](#geo-replication-support) section.</span></span>

## <a name="hadr-deployment-architectures"></a><span data-ttu-id="72d2c-118">Architectures de déploiement HADR</span><span class="sxs-lookup"><span data-stu-id="72d2c-118">HADR deployment architectures</span></span>
<span data-ttu-id="72d2c-119">Les technologies HADR SQL Server prises en charge dans Azure incluent :</span><span class="sxs-lookup"><span data-stu-id="72d2c-119">SQL Server HADR technologies that are supported in Azure include:</span></span>

* [<span data-ttu-id="72d2c-120">Groupes de disponibilité AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="72d2c-120">Always On Availability Groups</span></span>](https://technet.microsoft.com/library/hh510230.aspx)
* [<span data-ttu-id="72d2c-121">Instances de cluster de basculement AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="72d2c-121">Always On Failover Cluster Instances</span></span>](https://technet.microsoft.com/library/ms189134.aspx)
* [<span data-ttu-id="72d2c-122">Copie des journaux de transaction</span><span class="sxs-lookup"><span data-stu-id="72d2c-122">Log Shipping</span></span>](https://technet.microsoft.com/library/ms187103.aspx)
* [<span data-ttu-id="72d2c-123">Sauvegarde et restauration SQL Server avec le service de stockage d’objets blob Azure</span><span class="sxs-lookup"><span data-stu-id="72d2c-123">SQL Server Backup and Restore with Azure Blob Storage Service</span></span>](https://msdn.microsoft.com/library/jj919148.aspx)
* <span data-ttu-id="72d2c-124">[Mise en miroir de base de données](https://technet.microsoft.com/library/ms189852.aspx) - Déconseillée dans SQL Server 2016</span><span class="sxs-lookup"><span data-stu-id="72d2c-124">[Database Mirroring](https://technet.microsoft.com/library/ms189852.aspx) - Deprecated in SQL Server 2016</span></span>

<span data-ttu-id="72d2c-125">Il est possible de toocombine hello technologies ensemble tooimplement une solution SQL Server qui a une haute disponibilité et les fonctionnalités de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="72d2c-125">It is possible toocombine hello technologies together tooimplement a SQL Server solution that has both high availability and disaster recovery capabilities.</span></span> <span data-ttu-id="72d2c-126">En fonction de la technologie hello que vous utilisez, un déploiement hybride peut nécessiter un tunnel VPN avec hello réseau virtuel Azure.</span><span class="sxs-lookup"><span data-stu-id="72d2c-126">Depending on hello technology you use, a hybrid deployment may require a VPN tunnel with hello Azure virtual network.</span></span> <span data-ttu-id="72d2c-127">Hello sections ci-dessous illustrent certaines des architectures de déploiement exemple hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-127">hello sections below show you some of hello example deployment architectures.</span></span>

## <a name="azure-only-high-availability-solutions"></a><span data-ttu-id="72d2c-128">Azure uniquement : solutions de haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="72d2c-128">Azure-only: High availability solutions</span></span>

<span data-ttu-id="72d2c-129">Vous disposez d’une solution de haute disponibilité pour SQL Server au niveau de la base de données avec des groupes de disponibilité AlwaysOn (groupes de disponibilité).</span><span class="sxs-lookup"><span data-stu-id="72d2c-129">You can have a high availability solution for SQL Server at a database level with Always On Availability Groups - called availability groups.</span></span> <span data-ttu-id="72d2c-130">Vous pouvez également créer une solution de haute disponibilité au niveau de l’instance avec des instances de cluster de basculement AlwaysOn (instances de cluster de basculement).</span><span class="sxs-lookup"><span data-stu-id="72d2c-130">You can also create a high availability solution at an instance level with Always On Failover Cluster Instances - failover cluster instances.</span></span> <span data-ttu-id="72d2c-131">Pour une redondance accrue, vous pouvez créer une redondance aux deux niveaux en créant des groupes de disponibilité sur les instances de cluster de basculement.</span><span class="sxs-lookup"><span data-stu-id="72d2c-131">For additional redundancy, you can create redundancy at both levels by creating availability groups on failover cluster instances.</span></span> 

| <span data-ttu-id="72d2c-132">Technology</span><span class="sxs-lookup"><span data-stu-id="72d2c-132">Technology</span></span> | <span data-ttu-id="72d2c-133">Exemples d’architecture</span><span class="sxs-lookup"><span data-stu-id="72d2c-133">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="72d2c-134">**Groupes de disponibilité**</span><span class="sxs-lookup"><span data-stu-id="72d2c-134">**Availability groups**</span></span> |<span data-ttu-id="72d2c-135">Réplicas de disponibilité en cours d’exécution des machines virtuelles dans Azure hello même région de fournir une haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="72d2c-135">Availability replicas running in Azure VMs in hello same region provide high availability.</span></span> <span data-ttu-id="72d2c-136">Vous devez tooconfigure un machine virtuelle, du contrôleur de domaine, car le clustering de basculement Windows requiert un domaine Active Directory.</span><span class="sxs-lookup"><span data-stu-id="72d2c-136">You need tooconfigure a domain controller VM, because Windows failover clustering requires an Active Directory domain.</span></span><br/> <span data-ttu-id="72d2c-137">![Groupes de disponibilité](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span><span class="sxs-lookup"><span data-stu-id="72d2c-137">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_ha_always_on.gif)</span></span><br/><span data-ttu-id="72d2c-138">Pour plus d’informations, consultez la section [Configurer des groupes de disponibilité dans Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-138">For more information, see [Configure Availability Groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span> |
| <span data-ttu-id="72d2c-139">**Instances de cluster de basculement**</span><span class="sxs-lookup"><span data-stu-id="72d2c-139">**Failover cluster instances**</span></span> |<span data-ttu-id="72d2c-140">Les instances de cluster de basculement (FCI) qui nécessitent un stockage partagé, peuvent être créées de 3 manières.</span><span class="sxs-lookup"><span data-stu-id="72d2c-140">Failover Cluster Instances (FCI), which require shared storage, can be created in 3 different ways.</span></span><br/><br/><span data-ttu-id="72d2c-141">1. Un cluster de basculement à deux nœuds en cours d’exécution dans des machines virtuelles Azure à l’aide du stockage en attachement [espaces de stockage Windows Server 2016 Direct \(S2D\) ](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide un réseau SAN virtuel basé sur le logiciel.</span><span class="sxs-lookup"><span data-stu-id="72d2c-141">1. A two-node failover cluster running in Azure VMs with attached storage using [Windows Server 2016 Storage Spaces Direct \(S2D\)](virtual-machines-windows-portal-sql-create-failover-cluster.md) tooprovide a software-based virtual SAN.</span></span><br/><br/><span data-ttu-id="72d2c-142">2. Un cluster de basculement à deux nœuds exécuté sur des machines virtuelles Azure avec le stockage pris en charge par une solution de clustering tierce.</span><span class="sxs-lookup"><span data-stu-id="72d2c-142">2. A two-node failover cluster running in Azure VMs with storage supported by a third-party clustering solution.</span></span> <span data-ttu-id="72d2c-143">Pour un exemple spécifique utilisant SIOS DataKeeper, consultez la section [Haute disponibilité pour un partage de fichiers à l’aide du clustering de basculement et du logiciel tiers SIOS Datakeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span><span class="sxs-lookup"><span data-stu-id="72d2c-143">For a specific example that uses SIOS DataKeeper, see [High availability for a file share using failover clustering and 3rd party software SIOS DataKeeper](https://azure.microsoft.com/blog/high-availability-for-a-file-share-using-wsfc-ilb-and-3rd-party-software-sios-datakeeper/).</span></span><br/><br/><span data-ttu-id="72d2c-144">3. Un cluster de basculement à deux nœuds exécuté sur des machines virtuelles Azure, avec le stockage de bloc partagé cible iSCSI distant via ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="72d2c-144">3. A two-node failover cluster running in Azure VMs with remote iSCSI Target shared block storage via ExpressRoute.</span></span> <span data-ttu-id="72d2c-145">Par exemple, stockage privé de NetApp (NPS) expose une cible iSCSI via ExpressRoute avec Equinix tooAzure machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="72d2c-145">For example, NetApp Private Storage (NPS) exposes an iSCSI target via ExpressRoute with Equinix tooAzure VMs.</span></span><br/><br/><span data-ttu-id="72d2c-146">Pour un stockage partagé tiers et les solutions de réplication de données, vous devez contacter le fournisseur hello des données connexes tooaccessing des problèmes lors du basculement.</span><span class="sxs-lookup"><span data-stu-id="72d2c-146">For third-party shared storage and data replication solutions, you should contact hello vendor for any issues related tooaccessing data on failover.</span></span><br/><br/><span data-ttu-id="72d2c-147">Notez que l’utilisation des instances de cluster de basculement dans [Azure File Storage](https://azure.microsoft.com/services/storage/files/) n’est pas encore prise en charge, car cette solution n’utilise pas Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="72d2c-147">Note that using FCI on top of [Azure File storage](https://azure.microsoft.com/services/storage/files/) is not supported yet, because this solution does not utilize Premium Storage.</span></span> <span data-ttu-id="72d2c-148">Nous travaillons toosupport ce bientôt.</span><span class="sxs-lookup"><span data-stu-id="72d2c-148">We are working toosupport this soon.</span></span> |

## <a name="azure-only-disaster-recovery-solutions"></a><span data-ttu-id="72d2c-149">Azure uniquement : solutions de récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="72d2c-149">Azure-only: Disaster recovery solutions</span></span>
<span data-ttu-id="72d2c-150">Vous pouvez disposer d’une solution de récupération d’urgence pour vos bases de données SQL Server dans Azure en utilisant des groupes de disponibilité, la mise en miroir de bases de données ou la sauvegarde et la restauration à l’aide d’objets blob de stockage.</span><span class="sxs-lookup"><span data-stu-id="72d2c-150">You can have a disaster recovery solution for your SQL Server databases in Azure using availability groups, database mirroring, or backup and restore with storage blobs.</span></span>

| <span data-ttu-id="72d2c-151">Technology</span><span class="sxs-lookup"><span data-stu-id="72d2c-151">Technology</span></span> | <span data-ttu-id="72d2c-152">Exemples d’architecture</span><span class="sxs-lookup"><span data-stu-id="72d2c-152">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="72d2c-153">**Groupes de disponibilité**</span><span class="sxs-lookup"><span data-stu-id="72d2c-153">**Availability Groups**</span></span> |<span data-ttu-id="72d2c-154">Réplicas de disponibilité exécutés dans plusieurs centres de données sur les machines virtuelles Azure pour la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="72d2c-154">Availability replicas running across multiple datacenters in Azure VMs for disaster recovery.</span></span> <span data-ttu-id="72d2c-155">Cette solution inter-régions empêche l’indisponibilité totale du site.</span><span class="sxs-lookup"><span data-stu-id="72d2c-155">This cross-region solution protects against complete site outage.</span></span> <br/> <span data-ttu-id="72d2c-156">![Groupes de disponibilité](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span><span class="sxs-lookup"><span data-stu-id="72d2c-156">![Availability Groups](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_alwayson.png)</span></span><br/><span data-ttu-id="72d2c-157">Dans une région, tous les réplicas doivent être dans hello même service cloud et hello même réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="72d2c-157">Within a region, all replicas should be within hello same cloud service and hello same VNet.</span></span> <span data-ttu-id="72d2c-158">Étant donné que chaque région aura un réseau virtuel distinct, ces solutions nécessitent une connectivité tooVNet de réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="72d2c-158">Because each region will have a separate VNet, these solutions require VNet tooVNet connectivity.</span></span> <span data-ttu-id="72d2c-159">Pour plus d’informations, consultez [configurer un réseau pour une connexion à l’aide de hello Azure portal](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-159">For more information, see [Configure a VNet-to-VNet connection using hello Azure portal](../../../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md).</span></span> <span data-ttu-id="72d2c-160">Pour obtenir des instructions détaillées, consultez la section [Configurer un groupe de disponibilité SQL Server sur des machines virtuelles Azure dans différentes régions](virtual-machines-windows-portal-sql-availability-group-dr.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-160">For detailed instructions, see [Configure a SQL Server Availability Group on Azure Virtual Machines in Different Regions](virtual-machines-windows-portal-sql-availability-group-dr.md).</span></span>|
| <span data-ttu-id="72d2c-161">**Mise en miroir de bases de données**</span><span class="sxs-lookup"><span data-stu-id="72d2c-161">**Database Mirroring**</span></span> |<span data-ttu-id="72d2c-162">Serveurs principal et miroir s’exécutant dans des centres de données différents pour la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="72d2c-162">Principal and mirror and servers running in different datacenters for disaster recovery.</span></span> <span data-ttu-id="72d2c-163">Vous devez déployer à l’aide de certificats de serveur, car un domaine Active Directory ne peut pas couvrir plusieurs centres de données.</span><span class="sxs-lookup"><span data-stu-id="72d2c-163">You must deploy using server certificates because an active directory domain cannot span multiple datacenters.</span></span><br/>![Mise en miroir de bases de données](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_dbmirroring.gif) |
| <span data-ttu-id="72d2c-165">**Sauvegarde et restauration avec le service de stockage d’objets blob Azure**</span><span class="sxs-lookup"><span data-stu-id="72d2c-165">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="72d2c-166">Bases de données de production sauvegardées directement tooblob stockage dans un autre centre de données pour la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="72d2c-166">Production databases backed up directly tooblob storage in a different datacenter for disaster recovery.</span></span><br/><span data-ttu-id="72d2c-167">![Sauvegarde et restauration](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="72d2c-167">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/azure_only_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="72d2c-168">Pour plus d’informations, voir [Sauvegarde et restauration de SQL Server dans les machines virtuelles Azure](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-168">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="hybrid-it-disaster-recovery-solutions"></a><span data-ttu-id="72d2c-169">Informatique hybride : solutions de récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="72d2c-169">Hybrid IT: Disaster recovery solutions</span></span>
<span data-ttu-id="72d2c-170">Vous pouvez disposer d’une solution de récupération d’urgence pour vos bases de données SQL Server dans un environnement informatique hybride, en utilisant des groupes de disponibilité, la mise en miroir de bases de données, la copie des journaux de transaction, ainsi que la sauvegarde et la restauration avec le stockage d’objets blob Azure.</span><span class="sxs-lookup"><span data-stu-id="72d2c-170">You can have a disaster recovery solution for your SQL Server databases in a hybrid-IT environment using availability groups, database mirroring, log shipping, and backup and restore with Azure blog storage.</span></span>

| <span data-ttu-id="72d2c-171">Technology</span><span class="sxs-lookup"><span data-stu-id="72d2c-171">Technology</span></span> | <span data-ttu-id="72d2c-172">Exemples d’architecture</span><span class="sxs-lookup"><span data-stu-id="72d2c-172">Example Architectures</span></span> |
| --- | --- |
| <span data-ttu-id="72d2c-173">**Groupes de disponibilité**</span><span class="sxs-lookup"><span data-stu-id="72d2c-173">**Availability Groups**</span></span> |<span data-ttu-id="72d2c-174">Certains réplicas de disponibilité s’exécutant dans les machines virtuelles Azure et d’autres réplicas s’exécutant sur site pour la récupération d’urgence entre sites.</span><span class="sxs-lookup"><span data-stu-id="72d2c-174">Some availability replicas running in Azure VMs and other replicas running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="72d2c-175">Hello site de production peut être soit local ou dans un centre de données Azure.</span><span class="sxs-lookup"><span data-stu-id="72d2c-175">hello production site can be either on-premises or in an Azure datacenter.</span></span><br/>![Groupes de disponibilité](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_alwayson.gif)<br/><span data-ttu-id="72d2c-177">Étant donné que tous les réplicas de disponibilité doivent être dans hello même cluster de basculement, hello cluster doit couvrir les deux réseaux (un cluster de basculement de sous-réseaux multiples).</span><span class="sxs-lookup"><span data-stu-id="72d2c-177">Because all availability replicas must be in hello same failover cluster, hello cluster must span both networks (a multi-subnet failover cluster).</span></span> <span data-ttu-id="72d2c-178">Cette configuration nécessite une connexion VPN entre Azure et hello sur réseau local.</span><span class="sxs-lookup"><span data-stu-id="72d2c-178">This configuration requires a VPN connection between Azure and hello on-premises network.</span></span><br/><br/><span data-ttu-id="72d2c-179">Pour la récupération d’urgence réussie de vos bases de données, vous devez également installer un contrôleur de domaine répliqué sur le site de récupération d’urgence hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-179">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span><br/><br/><span data-ttu-id="72d2c-180">Il est possible de toouse hello Assistant Ajouter un réplica dans SSMS tooadd un tooan un réplica Windows Azure toujours sur le groupe de disponibilité existant.</span><span class="sxs-lookup"><span data-stu-id="72d2c-180">It is possible toouse hello Add Replica Wizard in SSMS tooadd an Azure replica tooan existing Always On Availability Group.</span></span> <span data-ttu-id="72d2c-181">Pour plus d’informations, consultez Didacticiel : étendre votre tooAzure de groupe de disponibilité AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="72d2c-181">For more information, see Tutorial: Extend your Always On Availability Group tooAzure.</span></span> |
| <span data-ttu-id="72d2c-182">**Mise en miroir de bases de données**</span><span class="sxs-lookup"><span data-stu-id="72d2c-182">**Database Mirroring**</span></span> |<span data-ttu-id="72d2c-183">Un serveur partenaire exécuté dans une machine virtuelle Azure et de hello autres exécutés sur site pour la récupération d’urgence entre site à l’aide de certificats de serveur.</span><span class="sxs-lookup"><span data-stu-id="72d2c-183">One partner running in an Azure VM and hello other running on-premises for cross-site disaster recovery using server certificates.</span></span> <span data-ttu-id="72d2c-184">Les partenaires n’est pas nécessaire de toobe dans hello du même domaine Active Directory, et aucune connexion VPN n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="72d2c-184">Partners do not need toobe in hello same Active Directory domain, and no VPN connection is required.</span></span><br/><span data-ttu-id="72d2c-185">![Mise en miroir de bases de données](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span><span class="sxs-lookup"><span data-stu-id="72d2c-185">![Database Mirroring](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_dbmirroring.gif)</span></span><br/><span data-ttu-id="72d2c-186">Un autre scénario de mise en miroir de base de données implique un serveur partenaire exécuté dans une machine virtuelle Azure et hello autres en cours d’exécution en local dans hello même domaine Active Directory pour la récupération d’urgence entre site.</span><span class="sxs-lookup"><span data-stu-id="72d2c-186">Another database mirroring scenario involves one partner running in an Azure VM and hello other running on-premises in hello same Active Directory domain for cross-site disaster recovery.</span></span> <span data-ttu-id="72d2c-187">A [connexion VPN entre le réseau de hello Azure virtual network et hello locaux](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) est requis.</span><span class="sxs-lookup"><span data-stu-id="72d2c-187">A [VPN connection between hello Azure virtual network and hello on-premises network](../../../vpn-gateway/vpn-gateway-site-to-site-create.md) is required.</span></span><br/><br/><span data-ttu-id="72d2c-188">Pour la récupération d’urgence réussie de vos bases de données, vous devez également installer un contrôleur de domaine répliqué sur le site de récupération d’urgence hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-188">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="72d2c-189">**Copie des journaux de transaction**</span><span class="sxs-lookup"><span data-stu-id="72d2c-189">**Log Shipping**</span></span> |<span data-ttu-id="72d2c-190">Un serveur en cours d’exécution dans une machine virtuelle Azure et de hello autres exécutés sur site pour la récupération d’urgence entre site.</span><span class="sxs-lookup"><span data-stu-id="72d2c-190">One server running in an Azure VM and hello other running on-premises for cross-site disaster recovery.</span></span> <span data-ttu-id="72d2c-191">Envoi de journaux dépend le partage de fichiers Windows, une connexion VPN entre le réseau virtuel Azure de hello et hello sur site réseau est requis.</span><span class="sxs-lookup"><span data-stu-id="72d2c-191">Log shipping depends on Windows file sharing, so a VPN connection between hello Azure virtual network and hello on-premises network is required.</span></span><br/>![Copie des journaux de transaction](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_log_shipping.gif)<br/><span data-ttu-id="72d2c-193">Pour la récupération d’urgence réussie de vos bases de données, vous devez également installer un contrôleur de domaine répliqué sur le site de récupération d’urgence hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-193">For successful disaster recovery of your databases, you should also install a replica domain controller at hello disaster recovery site.</span></span> |
| <span data-ttu-id="72d2c-194">**Sauvegarde et restauration avec le service de stockage d’objets blob Azure**</span><span class="sxs-lookup"><span data-stu-id="72d2c-194">**Backup and Restore with Azure Blob Storage Service**</span></span> |<span data-ttu-id="72d2c-195">Bases de données de production sauvegardées directement tooAzure stockage d’objets blob pour la récupération d’urgence sur site.</span><span class="sxs-lookup"><span data-stu-id="72d2c-195">On-premises production databases backed up directly tooAzure blob storage for disaster recovery.</span></span><br/><span data-ttu-id="72d2c-196">![Sauvegarde et restauration](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span><span class="sxs-lookup"><span data-stu-id="72d2c-196">![Backup and Restore](./media/virtual-machines-windows-sql-high-availability-dr/hybrid_dr_backup_restore.gif)</span></span><br/><span data-ttu-id="72d2c-197">Pour plus d’informations, voir [Sauvegarde et restauration de SQL Server dans les machines virtuelles Azure](virtual-machines-windows-sql-backup-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-197">For more information, see [Backup and Restore for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-backup-recovery.md).</span></span> |

## <a name="important-considerations-for-sql-server-hadr-in-azure"></a><span data-ttu-id="72d2c-198">Considérations importantes pour HADR SQL Server dans Azure</span><span class="sxs-lookup"><span data-stu-id="72d2c-198">Important considerations for SQL Server HADR in Azure</span></span>
<span data-ttu-id="72d2c-199">Les machines virtuelles Azure, le stockage et le réseau ont des caractéristiques opérationnelles différentes par rapport à celles d’une infrastructure informatique non virtualisée sur site.</span><span class="sxs-lookup"><span data-stu-id="72d2c-199">Azure VMs, storage, and networking have different operational characteristics than an on-premises, non-virtualized IT infrastructure.</span></span> <span data-ttu-id="72d2c-200">Une implémentation réussie d’une solution HADR SQL Server dans Azure nécessite que vous devez comprendre ces différences et concevez votre solution tooaccommodate les.</span><span class="sxs-lookup"><span data-stu-id="72d2c-200">A successful implementation of a HADR SQL Server solution in Azure requires that you understand these differences and design your solution tooaccommodate them.</span></span>

### <a name="high-availability-nodes-in-an-availability-set"></a><span data-ttu-id="72d2c-201">Nœuds haute disponibilité d’un groupe à haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="72d2c-201">High availability nodes in an availability set</span></span>
<span data-ttu-id="72d2c-202">Haute disponibilité dans Azure permettre de nœuds de haute disponibilité hello tooplace par des domaines d’erreur (groupes) et des domaines de mise à jour (domaines d’erreur) distinctes.</span><span class="sxs-lookup"><span data-stu-id="72d2c-202">Availability sets in Azure enable you tooplace hello high availability nodes into separate Fault Domains (FDs) and Update Domains (UDs).</span></span> <span data-ttu-id="72d2c-203">Pour les machines virtuelles Azure toobe placé dans hello même groupe à haute disponibilité, vous devez les déployer dans hello même service cloud.</span><span class="sxs-lookup"><span data-stu-id="72d2c-203">For Azure VMs toobe placed in hello same availability set, you must deploy them in hello same cloud service.</span></span> <span data-ttu-id="72d2c-204">Seuls les nœuds Bonjour même service cloud peut participer hello même groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="72d2c-204">Only nodes in hello same cloud service can participate in hello same availability set.</span></span> <span data-ttu-id="72d2c-205">Pour plus d’informations, consultez [gérer hello disponibilité des Machines virtuelles](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="72d2c-205">For more information, see [Manage hello Availability of Virtual Machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="failover-cluster-behavior-in-azure-networking"></a><span data-ttu-id="72d2c-206">Comportement d’un cluster de basculement sur le réseau Azure</span><span class="sxs-lookup"><span data-stu-id="72d2c-206">Failover cluster behavior in Azure networking</span></span>
<span data-ttu-id="72d2c-207">du service DHCP non compatible RFC Hello dans Azure peut entraîner la création de hello de certain toofail de configurations de cluster de basculement, en raison de nom réseau du cluster toohello assignée une adresse IP dupliquée, par exemple hello d’adresses IP même en tant qu’un des nœuds de cluster hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-207">hello non-RFC-compliant DHCP service in Azure can cause hello creation of certain failover cluster configurations toofail, due toohello cluster network name being assigned a duplicate IP address, such as hello same IP address as one of hello cluster nodes.</span></span> <span data-ttu-id="72d2c-208">Il s’agit d’un problème lorsque vous implémentez des groupes de disponibilité, qui varie selon la fonctionnalité de cluster de basculement Windows hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-208">This is an issue when you implement Availability Groups, which depends on hello Windows failover cluster feature.</span></span>

<span data-ttu-id="72d2c-209">Envisagez le scénario de hello lorsqu’un cluster à deux nœuds est créé et mis en ligne :</span><span class="sxs-lookup"><span data-stu-id="72d2c-209">Consider hello scenario when a two-node cluster is created and brought online:</span></span>

1. <span data-ttu-id="72d2c-210">Hello cluster est en ligne, puis NODE1 demande une adresse IP affectée dynamiquement pour le nom réseau du cluster hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-210">hello cluster comes online, then NODE1 requests a dynamically assigned IP address for hello cluster network name.</span></span>
2. <span data-ttu-id="72d2c-211">Aucune adresse IP autre que l’adresse de NODE1 propres IP n’est fournie par hello service DHCP, étant donné que hello service DHCP reconnaît cette demande hello provient de NODE1 lui-même.</span><span class="sxs-lookup"><span data-stu-id="72d2c-211">No IP address other than NODE1’s own IP address is given by hello DHCP service, since hello DHCP service recognizes that hello request comes from NODE1 itself.</span></span>
3. <span data-ttu-id="72d2c-212">Windows détecte qu’une adresse en double est affectée à la fois tooNODE1 et toohello nom du réseau de cluster de basculement et groupe de clusters par défaut hello échoue toocome en ligne.</span><span class="sxs-lookup"><span data-stu-id="72d2c-212">Windows detects that a duplicate address is assigned both tooNODE1 and toohello failover cluster network name, and hello default cluster group fails toocome online.</span></span>
4. <span data-ttu-id="72d2c-213">groupe de clusters par défaut Hello déplace tooNODE2, qui traite l’IP adresse NODE1 comme adresse IP de cluster hello et met en ligne le groupe de cluster par défaut hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-213">hello default cluster group moves tooNODE2, which treats NODE1’s IP address as hello cluster IP address and brings hello default cluster group online.</span></span>
5. <span data-ttu-id="72d2c-214">Lorsque NODE2 tente de connexion tooestablish avec NODE1, les paquets dirigés vers NODE1 ne quittent jamais NODE2 car il est résolu tooitself d’adresse IP de NODE1.</span><span class="sxs-lookup"><span data-stu-id="72d2c-214">When NODE2 attempts tooestablish connectivity with NODE1, packets directed at NODE1 never leave NODE2 because it resolves NODE1’s IP address tooitself.</span></span> <span data-ttu-id="72d2c-215">Impossible d’établir une connexion avec NODE1 Node2, puis perd le quorum et arrête hello cluster.</span><span class="sxs-lookup"><span data-stu-id="72d2c-215">NODE2 cannot establish connectivity with NODE1, then loses quorum and shuts down hello cluster.</span></span>
6. <span data-ttu-id="72d2c-216">Bonjour pendant ce temps, NODE1 peut envoyer des paquets tooNODE2, mais NODE2 ne peut pas répondre.</span><span class="sxs-lookup"><span data-stu-id="72d2c-216">In hello meantime, NODE1 can send packets tooNODE2, but NODE2 cannot reply.</span></span> <span data-ttu-id="72d2c-217">Node1 perd le quorum et arrête hello cluster.</span><span class="sxs-lookup"><span data-stu-id="72d2c-217">NODE1 loses quorum and shuts down hello cluster.</span></span>

<span data-ttu-id="72d2c-218">Ce scénario peut être évité en affectant une adresse IP statique inutilisée, par exemple une adresse IP de lien local comme 169.254.1.1, le nom réseau du cluster toohello dans l’ordre toobring hello nom réseau du cluster en ligne.</span><span class="sxs-lookup"><span data-stu-id="72d2c-218">This scenario can be avoided by assigning an unused static IP address, such as a link-local IP address like 169.254.1.1, toohello cluster network name in order toobring hello cluster network name online.</span></span> <span data-ttu-id="72d2c-219">toosimplify ce processus, consultez [le cluster de basculement de Windows de configuration dans Azure pour les groupes de disponibilité](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span><span class="sxs-lookup"><span data-stu-id="72d2c-219">toosimplify this process, see [Configuring Windows failover cluster in Azure for availability groups](http://social.technet.microsoft.com/wiki/contents/articles/14776.configuring-windows-failover-cluster-in-windows-azure-for-alwayson-availability-groups.aspx).</span></span>

<span data-ttu-id="72d2c-220">Pour plus d’informations, consultez la section [Configurer des groupes de disponibilité dans Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-220">For more information, see [Configure availability groups in Azure (GUI)](virtual-machines-windows-portal-sql-alwayson-availability-groups.md).</span></span>

### <a name="availability-group-listener-support"></a><span data-ttu-id="72d2c-221">Prise en charge de l’écouteur du groupe de disponibilité</span><span class="sxs-lookup"><span data-stu-id="72d2c-221">Availability group listener support</span></span>
<span data-ttu-id="72d2c-222">Les écouteurs de groupe de disponibilité sont pris en charge sur les machines virtuelles Azure exécutant Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2 et Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="72d2c-222">Availability group listeners are supported on Azure VMs running Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2, and Windows Server 2016.</span></span> <span data-ttu-id="72d2c-223">Cette prise en charge est rendue possible à l’aide de hello de points de terminaison avec équilibrage de charge, activée sur des machines virtuelles Azure hello qui sont des nœuds de groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="72d2c-223">This support is made possible by hello use of load-balanced endpoints enabled on hello Azure VMs that are availability group nodes.</span></span> <span data-ttu-id="72d2c-224">Vous devez suivre les étapes de configuration spéciales pour toowork des écouteurs hello pour les applications clientes qui s’exécutent dans Azure, ainsi que celles qui s’exécutent localement.</span><span class="sxs-lookup"><span data-stu-id="72d2c-224">You must follow special configuration steps for hello listeners toowork for both client applications that are running in Azure as well as those running on-premises.</span></span>

<span data-ttu-id="72d2c-225">Il existe deux options principales de configuration de votre écouteur : externe (public) ou interne.</span><span class="sxs-lookup"><span data-stu-id="72d2c-225">There are two main options for setting up your listener: external (public) or internal.</span></span> <span data-ttu-id="72d2c-226">Hello externes (publics) récepteur utilise une connecté à internet, l’équilibrage de charge et est associé à un public IP virtuelle (VIP) qui est accessible via hello internet.</span><span class="sxs-lookup"><span data-stu-id="72d2c-226">hello external (public) listener uses an internet facing load balancer and is associated with a public Virtual IP (VIP) that is accessible over hello internet.</span></span> <span data-ttu-id="72d2c-227">Un écouteur interne utilise un équilibrage de charge interne et prend en charge uniquement des clients dans hello même réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="72d2c-227">An internal listener uses an internal load balancer and only supports clients within hello same Virtual Network.</span></span> <span data-ttu-id="72d2c-228">Quel que soit le type d’équilibrage de charge, vous devez activer le retour direct du serveur.</span><span class="sxs-lookup"><span data-stu-id="72d2c-228">For either load balancer type, you must enable Direct Server Return.</span></span> 

<span data-ttu-id="72d2c-229">Si hello groupe de disponibilité s’étend sur plusieurs sous-réseaux Azure (par exemple, un déploiement qui traverse les régions Azure), la chaîne de connexion du client hello doit inclure «**MultisubnetFailover = True**».</span><span class="sxs-lookup"><span data-stu-id="72d2c-229">If hello Availability Group spans multiple Azure subnets (such as a deployment that crosses Azure regions), hello client connection string must include "**MultisubnetFailover=True**".</span></span> <span data-ttu-id="72d2c-230">Cela entraîne des réplicas de toohello de tentatives de connexion parallèle dans des sous-réseaux différents hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-230">This results in parallel connection attempts toohello replicas in hello different subnets.</span></span> <span data-ttu-id="72d2c-231">Pour obtenir des instructions sur la configuration d'un port d'écoute, consultez</span><span class="sxs-lookup"><span data-stu-id="72d2c-231">For instructions on setting up a listener, see</span></span>

* <span data-ttu-id="72d2c-232">[Configurer un écouteur ILB pour des groupes de disponibilité dans Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-232">[Configure an ILB listener for availability groups in Azure](virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md).</span></span>
* <span data-ttu-id="72d2c-233">[Configurer un écouteur externe pour des groupes de disponibilité dans Azure](../classic/ps-sql-ext-listener.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-233">[Configure an external listener for availability groups in Azure](../classic/ps-sql-ext-listener.md).</span></span>

<span data-ttu-id="72d2c-234">Vous pouvez toujours vous connecter réplica de disponibilité tooeach séparément en vous connectant directement toohello l’instance de service.</span><span class="sxs-lookup"><span data-stu-id="72d2c-234">You can still connect tooeach availability replica separately by connecting directly toohello service instance.</span></span> <span data-ttu-id="72d2c-235">En outre, étant donné que les groupes de disponibilité sont à compatibilité descendante avec les clients de mise en miroir de base de données, vous pouvez vous connecter toohello les réplicas de disponibilité comme partenaires de mise en miroir tant que hello réplicas sont configurés de la base de données de mise en miroir toodatabase similaire :</span><span class="sxs-lookup"><span data-stu-id="72d2c-235">Also, since availability groups are backward compatible with database mirroring clients, you can connect toohello availability replicas like database mirroring partners as long as hello replicas are configured similar toodatabase mirroring:</span></span>

* <span data-ttu-id="72d2c-236">Un réplica principal et un réplica secondaire</span><span class="sxs-lookup"><span data-stu-id="72d2c-236">One primary replica and one secondary replica</span></span>
* <span data-ttu-id="72d2c-237">Hello réplica secondaire est configuré comme non lisible (**secondaire accessible en lecture** option définie trop**non**)</span><span class="sxs-lookup"><span data-stu-id="72d2c-237">hello secondary replica is configured as non-readable (**Readable Secondary** option set too**No**)</span></span>

<span data-ttu-id="72d2c-238">Un exemple de chaîne de connexion client qui correspond la configuration de type de mise en miroir de base de données toothis à l’aide d’ADO.NET ou SQL Server Native Client est ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="72d2c-238">An example client connection string that corresponds toothis database mirroring-like configuration using ADO.NET or SQL Server Native Client is below:</span></span>

    Data Source=ReplicaServer1;Failover Partner=ReplicaServer2;Initial Catalog=AvailabilityDatabase;

<span data-ttu-id="72d2c-239">Pour plus d’informations sur la connectivité client, consultez :</span><span class="sxs-lookup"><span data-stu-id="72d2c-239">For more information on client connectivity, see:</span></span>

* [<span data-ttu-id="72d2c-240">Utilisation de mots clés de chaîne de connexion avec SQL Server Native Client</span><span class="sxs-lookup"><span data-stu-id="72d2c-240">Using Connection String Keywords with SQL Server Native Client</span></span>](https://msdn.microsoft.com/library/ms130822.aspx)
* [<span data-ttu-id="72d2c-241">Connecter des Clients tooa Session de mise en miroir de base de données (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="72d2c-241">Connect Clients tooa Database Mirroring Session (SQL Server)</span></span>](https://technet.microsoft.com/library/ms175484.aspx)
* [<span data-ttu-id="72d2c-242">Connexion tooAvailability écouteur de groupe dans l’informatique hybride</span><span class="sxs-lookup"><span data-stu-id="72d2c-242">Connecting tooAvailability Group Listener in Hybrid IT</span></span>](http://blogs.msdn.com/b/sqlalwayson/archive/2013/02/14/connecting-to-availability-group-listener-in-hybrid-it.aspx)
* [<span data-ttu-id="72d2c-243">Écouteurs de groupe de disponibilité, connectivité client et basculement d’application (SQL Server)</span><span class="sxs-lookup"><span data-stu-id="72d2c-243">Availability Group Listeners, Client Connectivity, and Application Failover (SQL Server)</span></span>](https://technet.microsoft.com/library/hh213417.aspx)
* [<span data-ttu-id="72d2c-244">Utilisation de chaînes de connexion de mise en miroir de bases de données avec des groupes de disponibilité</span><span class="sxs-lookup"><span data-stu-id="72d2c-244">Using Database-Mirroring Connection Strings with Availability Groups</span></span>](https://technet.microsoft.com/library/hh213417.aspx)

### <a name="network-latency-in-hybrid-it"></a><span data-ttu-id="72d2c-245">Latence du réseau dans un environnement hybride</span><span class="sxs-lookup"><span data-stu-id="72d2c-245">Network latency in hybrid IT</span></span>
<span data-ttu-id="72d2c-246">Vous devez déployer votre solution HADR principe hello qu’il peut y avoir des périodes de latence réseau élevée entre votre réseau local et de Azure.</span><span class="sxs-lookup"><span data-stu-id="72d2c-246">You should deploy your HADR solution with hello assumption that there may be periods of time with high network latency between your on-premises network and Azure.</span></span> <span data-ttu-id="72d2c-247">Lorsque vous déployez des réplicas tooAzure, vous devez utiliser la validation asynchrone au lieu de validation synchrone pour le mode de synchronisation hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-247">When deploying replicas tooAzure, you should use asynchronous commit instead of synchronous commit for hello synchronization mode.</span></span> <span data-ttu-id="72d2c-248">Lorsque le déploiement de serveurs de mise en miroir de base de données à la fois localement et dans Azure, utilisez le mode hautes performances hello plutôt qu’en mode haute sécurité de hello.</span><span class="sxs-lookup"><span data-stu-id="72d2c-248">When deploying database mirroring servers both on-premises and in Azure, use hello high-performance mode instead of hello high-safety mode.</span></span>

### <a name="geo-replication-support"></a><span data-ttu-id="72d2c-249">Prise en charge de la géo-réplication</span><span class="sxs-lookup"><span data-stu-id="72d2c-249">Geo-replication support</span></span>
<span data-ttu-id="72d2c-250">Géo-réplication dans les disques Azure ne prend pas en charge le fichier de données hello et fichier journal de hello même toobe de base de données stockée sur des disques distincts.</span><span class="sxs-lookup"><span data-stu-id="72d2c-250">Geo-replication in Azure disks does not support hello data file and log file of hello same database toobe stored on separate disks.</span></span> <span data-ttu-id="72d2c-251">GRS réplique les modifications sur chaque disque indépendamment et de manière asynchrone.</span><span class="sxs-lookup"><span data-stu-id="72d2c-251">GRS replicates changes on each disk independently and asynchronously.</span></span> <span data-ttu-id="72d2c-252">Ce mécanisme garantit l’ordre d’écriture hello dans un seul disque sur la copie de géo-répliquée hello, mais pas entre les copies géo-répliquées de plusieurs disques.</span><span class="sxs-lookup"><span data-stu-id="72d2c-252">This mechanism guarantees hello write order within a single disk on hello geo-replicated copy, but not across geo-replicated copies of multiple disks.</span></span> <span data-ttu-id="72d2c-253">Si vous configurez un toostore de la base de données de fichier de données et son fichier journal sur des disques distincts, hello récupérée disques après que sinistre peuvent contenir une copie plus à jour hello du fichier de données que le fichier journal de hello, qui marque une interruption hello journal à écriture anticipée dans SQL Server et hello ACID propriétés des transactions.</span><span class="sxs-lookup"><span data-stu-id="72d2c-253">If you configure a database toostore its data file and its log file on separate disks, hello recovered disks after a disaster may contain a more up-to-date copy of hello data file than hello log file, which breaks hello write-ahead log in SQL Server and hello ACID properties of transactions.</span></span> <span data-ttu-id="72d2c-254">Si vous n’avez pas hello option toodisable géo-réplication hello compte de stockage, vous devez conserver toutes les données et les fichiers journaux pour une base de données sur hello même disque.</span><span class="sxs-lookup"><span data-stu-id="72d2c-254">If you do not have hello option toodisable geo-replication on hello storage account, you should keep all data and log files for a given database on hello same disk.</span></span> <span data-ttu-id="72d2c-255">Si vous devez utiliser plusieurs disques en raison de la taille toohello hello de base de données, vous devez toodeploy une des solutions de récupération d’urgence hello répertoriée ci-dessus tooensure la redondance des données.</span><span class="sxs-lookup"><span data-stu-id="72d2c-255">If you must use more than one disk due toohello size of hello database, you need toodeploy one of hello disaster recovery solutions listed above tooensure data redundancy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="72d2c-256">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="72d2c-256">Next steps</span></span>
<span data-ttu-id="72d2c-257">Si vous devez toocreate une machine virtuelle Azure avec SQL Server, consultez [approvisionnement d’une Machine virtuelle de SQL Server sur Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-257">If you need toocreate an Azure virtual machine with SQL Server, see [Provisioning a SQL Server Virtual Machine on Azure](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

<span data-ttu-id="72d2c-258">tooget hello meilleures performances à partir de SQL Server s’exécutant sur une machine virtuelle Azure, consultez les conseils de hello dans [performances les meilleures pratiques pour SQL Server dans Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-258">tooget hello best performance from SQL Server running on an Azure VM, see hello guidance in [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="72d2c-259">Pour les autres rubriques connexes toorunning SQL Server dans des machines virtuelles Azure, consultez [SQL Server sur des Machines virtuelles Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="72d2c-259">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

### <a name="other-resources"></a><span data-ttu-id="72d2c-260">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="72d2c-260">Other resources</span></span>
* [<span data-ttu-id="72d2c-261">Installation d’une nouvelle forêt Active Directory dans Azure</span><span class="sxs-lookup"><span data-stu-id="72d2c-261">Install a new Active Directory forest in Azure</span></span>](../../../active-directory/active-directory-new-forest-virtual-machine.md)
* [<span data-ttu-id="72d2c-262">Créer un cluster de basculement pour les groupes de disponibilité dans une machine virtuelle Azure</span><span class="sxs-lookup"><span data-stu-id="72d2c-262">Create Failover Cluster for availability groups in Azure VM</span></span>](http://gallery.technet.microsoft.com/scriptcenter/Create-WSFC-Cluster-for-7c207d3a)

