---
title: "aaaSecurity considérations pour SQL Server dans Azure | Documents Microsoft"
description: "Cette rubrique fournit des instructions générales pour la sécurisation de SQL Server en cours d’exécution sur une machine virtuelle Azure."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: d710c296-e490-43e7-8ca9-8932586b71da
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/02/2017
ms.author: jroth
ms.openlocfilehash: 14c3d828fa87446da67beea6d28886de254afe15
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="418d9-103">Considérations relatives à la sécurité de SQL Server sur les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="418d9-103">Security Considerations for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="418d9-104">Cette rubrique inclut des instructions de sécurité générales pour créer des instances de serveur tooSQL un accès sécurisé dans une machine virtuelle Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="418d9-104">This topic includes overall security guidelines that help establish secure access tooSQL Server instances in an Azure virtual machine (VM).</span></span>

<span data-ttu-id="418d9-105">Azure est conforme à plusieurs réglementations du secteur et les normes que vous peuvent activer toobuild une solution conforme avec SQL Server est en cours d’exécution sur un ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="418d9-105">Azure complies with several industry regulations and standards that can enable you toobuild a compliant solution with SQL Server running in a virtual machine.</span></span> <span data-ttu-id="418d9-106">Pour plus d’informations sur les exigences réglementaires relatives à Azure, voir [Centre de confidentialité Azure](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="418d9-106">For information about regulatory compliance with Azure, see [Azure Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="control-access-toohello-sql-vm"></a><span data-ttu-id="418d9-107">Contrôle l’accès toohello SQL VM</span><span class="sxs-lookup"><span data-stu-id="418d9-107">Control access toohello SQL VM</span></span>

<span data-ttu-id="418d9-108">Lorsque vous créez votre machine virtuelle SQL Server, envisagez comment toocarefully contrôler l’ordinateur de toohello d’accès et tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="418d9-108">When you create your SQL Server virtual machine, consider how toocarefully control who has access toohello machine and tooSQL Server.</span></span> <span data-ttu-id="418d9-109">En règle générale, vous devez effectuer les suivant hello :</span><span class="sxs-lookup"><span data-stu-id="418d9-109">In general, you should do hello following:</span></span>

- <span data-ttu-id="418d9-110">Restreindre l’accès tooSQL Server tooonly hello applications et les clients qui en ont besoin.</span><span class="sxs-lookup"><span data-stu-id="418d9-110">Restrict access tooSQL Server tooonly hello applications and clients that need it.</span></span>
- <span data-ttu-id="418d9-111">Suivre les meilleures pratiques de gestion des comptes d’utilisateur et des mots de passe.</span><span class="sxs-lookup"><span data-stu-id="418d9-111">Follow best practices for managing user accounts and passwords.</span></span>

<span data-ttu-id="418d9-112">Hello les sections suivantes fournit des suggestions de réfléchir à ces points.</span><span class="sxs-lookup"><span data-stu-id="418d9-112">hello following sections provide suggestions on thinking through these points.</span></span>

## <a name="secure-connections"></a><span data-ttu-id="418d9-113">Sécuriser les connexions</span><span class="sxs-lookup"><span data-stu-id="418d9-113">Secure connections</span></span>

<span data-ttu-id="418d9-114">Lorsque vous créez une machine virtuelle SQL Server avec une image de la galerie, hello **connectivité SQL Server** option donne hello de choix de **Local (à l’intérieur de la machine virtuelle)**, **privé (dans le réseau virtuel)** , ou **Public (Internet)**.</span><span class="sxs-lookup"><span data-stu-id="418d9-114">When you create a SQL Server virtual machine with a gallery image, hello **SQL Server Connectivity** option gives you hello choice of **Local (inside VM)**, **Private (within Virtual Network)**, or **Public (Internet)**.</span></span>

![Connectivité SQL Server](./media/virtual-machines-windows-sql-security/sql-vm-connectivity-option.png)

<span data-ttu-id="418d9-116">Pour une sécurité optimale hello, choisissez l’option la plus restrictive hello pour votre scénario.</span><span class="sxs-lookup"><span data-stu-id="418d9-116">For hello best security, choose hello most restrictive option for your scenario.</span></span> <span data-ttu-id="418d9-117">Par exemple, si vous exécutez une application qui accède à SQL Server sur hello même machine virtuelle, puis **Local** est l’option la plus sûre hello.</span><span class="sxs-lookup"><span data-stu-id="418d9-117">For example, if you are running an application that accesses SQL Server on hello same VM, then **Local** is hello most secure choice.</span></span> <span data-ttu-id="418d9-118">Si vous exécutez une application Azure qui nécessite l’accès toohello SQL Server, puis **privé** sécurise la communication tooSQL serveur uniquement au sein de hello spécifié [réseau virtuel Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="418d9-118">If you are running an Azure application that requires access toohello SQL Server, then **Private** secures communication tooSQL Server only within hello specified [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="418d9-119">Si vous avez besoin **Public** (internest) accès toohello machine virtuelle SQL Server, puis assurez-vous de toofollow que des autres meilleures pratiques dans cette rubrique tooreduce votre surface d’attaque.</span><span class="sxs-lookup"><span data-stu-id="418d9-119">If you require **Public** (internest) access toohello SQL Server VM, then make sure toofollow other best practices in this topic tooreduce your attack surface area.</span></span>

<span data-ttu-id="418d9-120">Hello des options sélectionnées dans le portail de hello utilisent les règles de sécurité de trafic entrant sur les machines virtuelles de hello [groupe de sécurité réseau](../../../virtual-network/virtual-networks-nsg.md) (NSG) tooallow ou refuser la machine virtuelle de réseau du trafic tooyour.</span><span class="sxs-lookup"><span data-stu-id="418d9-120">hello selected options in hello portal use inbound security rules on hello VMs [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) (NSG) tooallow or deny network traffic tooyour virtual machine.</span></span> <span data-ttu-id="418d9-121">Vous pouvez modifier ou créer des règles de groupe de sécurité réseau entrants du port de SQL Server toohello tooallow le trafic en (1433 par défaut).</span><span class="sxs-lookup"><span data-stu-id="418d9-121">You can modify or create new inbound NSG rules tooallow traffic toohello SQL Server port (default 1433).</span></span> <span data-ttu-id="418d9-122">Vous pouvez également spécifier des adresses IP spécifiques autorisées toocommunicate sur ce port.</span><span class="sxs-lookup"><span data-stu-id="418d9-122">You can also specify specific IP addresses that are allowed toocommunicate over this port.</span></span>

![Règles de groupe de sécurité réseau](./media/virtual-machines-windows-sql-security/sql-vm-network-security-group-rules.png)

<span data-ttu-id="418d9-124">En outre tooNSG règles toorestrict du trafic réseau, vous pouvez également utiliser hello le pare-feu Windows sur l’ordinateur virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="418d9-124">In addition tooNSG rules toorestrict network traffic, you can also use hello Windows Firewall on hello virtual machine.</span></span>

<span data-ttu-id="418d9-125">Si vous utilisez des points de terminaison avec le modèle de déploiement classique de hello, supprimez les points de terminaison sur l’ordinateur virtuel de hello si vous ne les utilisez pas.</span><span class="sxs-lookup"><span data-stu-id="418d9-125">If you are using endpoints with hello classic deployment model, remove any endpoints on hello virtual machine if you do not use them.</span></span> <span data-ttu-id="418d9-126">Pour obtenir des instructions sur l’utilisation de listes ACL avec points de terminaison, consultez [gérer hello ACL sur un point de terminaison](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span><span class="sxs-lookup"><span data-stu-id="418d9-126">For instructions on using ACLs with endpoints, see [Manage hello ACL on an endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span></span> <span data-ttu-id="418d9-127">Cela n’est pas nécessaire pour les machines virtuelles qui utilisent le Gestionnaire de ressources de hello.</span><span class="sxs-lookup"><span data-stu-id="418d9-127">This is not necessary for VMs that use hello Resource Manager.</span></span>

<span data-ttu-id="418d9-128">Enfin, envisagez d’activer des connexions chiffrées d’instance hello Hello du moteur de base de données SQL Server dans votre machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="418d9-128">Finally, consider enabling encrypted connections for hello instance of hello SQL Server Database Engine in your Azure virtual machine.</span></span> <span data-ttu-id="418d9-129">Configurez l’instance SQL Server avec un certificat signé.</span><span class="sxs-lookup"><span data-stu-id="418d9-129">Configure SQL server instance with a signed certificate.</span></span> <span data-ttu-id="418d9-130">Pour plus d’informations, consultez [toohello d’activer les connexions chiffrées du moteur de base de données](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) et [syntaxe de chaîne de connexion](https://msdn.microsoft.com/library/ms254500.aspx).</span><span class="sxs-lookup"><span data-stu-id="418d9-130">For more information, see [Enable Encrypted Connections toohello Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) and [Connection String Syntax](https://msdn.microsoft.com/library/ms254500.aspx).</span></span>

## <a name="use-a-non-default-port"></a><span data-ttu-id="418d9-131">Utiliser un port non défini par défaut</span><span class="sxs-lookup"><span data-stu-id="418d9-131">Use a non-default port</span></span>

<span data-ttu-id="418d9-132">Par défaut, SQL Server écoute un port bien connu, le port 1433.</span><span class="sxs-lookup"><span data-stu-id="418d9-132">By default, SQL Server listens on a well-known port, 1433.</span></span> <span data-ttu-id="418d9-133">Pour renforcer la sécurité, configurez toolisten de SQL Server sur un port non défini par défaut, tels que 1401.</span><span class="sxs-lookup"><span data-stu-id="418d9-133">For increased security, configure SQL Server toolisten on a non-default port, such as 1401.</span></span> <span data-ttu-id="418d9-134">Si vous configurez une image de la galerie de SQL Server dans hello portail Azure, vous pouvez spécifier ce port dans hello **paramètres SQL Server** panneau.</span><span class="sxs-lookup"><span data-stu-id="418d9-134">If you provision a SQL Server gallery image in hello Azure portal, you can specify this port in hello **SQL Server settings** blade.</span></span>

<span data-ttu-id="418d9-135">tooconfigure cette après le déploiement, vous avez deux options :</span><span class="sxs-lookup"><span data-stu-id="418d9-135">tooconfigure this after provisioning, you have two options:</span></span>

- <span data-ttu-id="418d9-136">Pour les machines virtuelles du Gestionnaire de ressources, vous pouvez sélectionner **configuration de SQL Server** à partir du Panneau de vue d’ensemble d’ordinateurs virtuels hello.</span><span class="sxs-lookup"><span data-stu-id="418d9-136">For Resource Manager VMs, you can select **SQL Server configuration** from hello VM overview blade.</span></span> <span data-ttu-id="418d9-137">Cela fournit une option de port de hello toochange.</span><span class="sxs-lookup"><span data-stu-id="418d9-137">This provides an option toochange hello port.</span></span>

  ![Modification du port TCP dans le portail](./media/virtual-machines-windows-sql-security/sql-vm-change-tcp-port.png)

- <span data-ttu-id="418d9-139">Pour les machines virtuelles classique ou pour les machines virtuelles SQL Server qui n’ont pas configuré avec le portail de hello, vous pouvez configurer manuellement le port de hello en vous connectant à distance toohello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="418d9-139">For Classic VMs or for SQL Server VMs that were not provisioned with hello portal, you can manually configure hello port by connecting remotely toohello VM.</span></span> <span data-ttu-id="418d9-140">Pour les étapes de configuration hello, consultez [configurer un serveur tooListen sur un Port TCP spécifique](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span><span class="sxs-lookup"><span data-stu-id="418d9-140">For hello configuration steps, see [Configure a Server tooListen on a Specific TCP Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span></span> <span data-ttu-id="418d9-141">Si vous utilisez cette technique manuelle, vous devez également tooadd un pare-feu Windows règle tooallow le trafic entrant sur ce port TCP.</span><span class="sxs-lookup"><span data-stu-id="418d9-141">If you use this manual technique, you also need tooadd a Windows Firewall rule tooallow incoming traffic on that TCP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="418d9-142">Spécification d’un port par défaut d’est une bonne idée si le port de SQL Server est toopublic ouvrir des connexions internet.</span><span class="sxs-lookup"><span data-stu-id="418d9-142">Specifying a non-default port is a good idea if your SQL Server port is open toopublic internet connections.</span></span>

<span data-ttu-id="418d9-143">Lorsque SQL Server est à l’écoute sur un port non défini par défaut, vous devez spécifier les ports hello lorsque vous vous connectez.</span><span class="sxs-lookup"><span data-stu-id="418d9-143">When SQL Server is listening on a non-default port, you must specify hello port when you connect.</span></span> <span data-ttu-id="418d9-144">Par exemple, considérez un scénario où adresse IP du serveur hello est 13.55.255.255 et SQL Server est à l’écoute sur le port 1401.</span><span class="sxs-lookup"><span data-stu-id="418d9-144">For example, consider a scenario where hello server IP address is 13.55.255.255 and SQL Server is listening on port 1401.</span></span> <span data-ttu-id="418d9-145">tooconnect tooSQL serveur, vous devez spécifier `13.55.255.255,1401` dans la chaîne de connexion hello.</span><span class="sxs-lookup"><span data-stu-id="418d9-145">tooconnect tooSQL Server, you would specify `13.55.255.255,1401` in hello connection string.</span></span>

## <a name="manage-accounts"></a><span data-ttu-id="418d9-146">Gérer les comptes</span><span class="sxs-lookup"><span data-stu-id="418d9-146">Manage accounts</span></span>

<span data-ttu-id="418d9-147">Vous ne souhaitez pas les mots de passe ou les noms des comptes des personnes malveillantes tooeasily estimation.</span><span class="sxs-lookup"><span data-stu-id="418d9-147">You don't want attackers tooeasily guess account names or passwords.</span></span> <span data-ttu-id="418d9-148">Utilisez hello suivant les conseils toohelp :</span><span class="sxs-lookup"><span data-stu-id="418d9-148">Use hello following tips toohelp:</span></span>

- <span data-ttu-id="418d9-149">Créez un seul compte d’administrateur local avec un nom différent de **Administrator**.</span><span class="sxs-lookup"><span data-stu-id="418d9-149">Create a unique local administrator account that is not named **Administrator**.</span></span>

- <span data-ttu-id="418d9-150">Utilisez des mots de passe forts complexes pour tous vos comptes.</span><span class="sxs-lookup"><span data-stu-id="418d9-150">Use complex strong passwords for all your accounts.</span></span> <span data-ttu-id="418d9-151">Pour plus d’informations sur la façon toocreate un mot de passe fort, consultez [créer un mot de passe fort](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) l’article.</span><span class="sxs-lookup"><span data-stu-id="418d9-151">For more information about how toocreate a strong password, see [Create a strong password](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) article.</span></span>

- <span data-ttu-id="418d9-152">Par défaut, Azure sélectionne l’authentification Windows pendant l’installation de la machine virtuelle SQL Server.</span><span class="sxs-lookup"><span data-stu-id="418d9-152">By default, Azure selects Windows Authentication during SQL Server Virtual Machine setup.</span></span> <span data-ttu-id="418d9-153">Par conséquent, hello **SA** connexion est désactivée et un mot de passe est attribué par le programme d’installation.</span><span class="sxs-lookup"><span data-stu-id="418d9-153">Therefore, hello **SA** login is disabled and a password is assigned by setup.</span></span> <span data-ttu-id="418d9-154">Nous recommandons que hello **SA** connexion ne doit pas utilisée ni activée.</span><span class="sxs-lookup"><span data-stu-id="418d9-154">We recommend that hello **SA** login should not be used or enabled.</span></span> <span data-ttu-id="418d9-155">Si vous devez avoir une connexion SQL, utilisez une des hello suivant des stratégies :</span><span class="sxs-lookup"><span data-stu-id="418d9-155">If you must have a SQL login, use one of hello following strategies:</span></span>

  - <span data-ttu-id="418d9-156">Créez un compte SQL avec un nom unique et qui est membre de **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="418d9-156">Create a SQL account with a unique name that has **sysadmin** membership.</span></span> <span data-ttu-id="418d9-157">Cela en permettant à partir du portail de hello **l’authentification SQL** lors de la configuration.</span><span class="sxs-lookup"><span data-stu-id="418d9-157">You can do this from hello portal by enabling **SQL Authentication** during provisioning.</span></span>

    > [!TIP] 
    > <span data-ttu-id="418d9-158">Si vous n’activez pas l’authentification SQL lors de la configuration, vous devez modifier manuellement le mode d’authentification hello trop**SQL Server et le Mode d’authentification Windows**.</span><span class="sxs-lookup"><span data-stu-id="418d9-158">If you do not enable SQL Authentication during provisioning, you must manually change hello authentication mode too**SQL Server and Windows Authentication Mode**.</span></span> <span data-ttu-id="418d9-159">Pour plus d’informations, consultez [Modifier le mode d’authentification du serveur](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="418d9-159">For more information, see [Change Server Authentication Mode](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span></span>

  - <span data-ttu-id="418d9-160">Si vous devez utiliser hello **SA** connexion, connexion de hello activer après la mise en service et attribuer un nouveau mot de passe fort.</span><span class="sxs-lookup"><span data-stu-id="418d9-160">If you must use hello **SA** login, enable hello login after provisioning and assign a new strong password.</span></span>

## <a name="follow-on-premises-best-practices"></a><span data-ttu-id="418d9-161">Suivre les meilleures pratiques locales</span><span class="sxs-lookup"><span data-stu-id="418d9-161">Follow on-premises best practices</span></span>

<span data-ttu-id="418d9-162">En outre toohello pratiques décrites dans cette rubrique, nous recommandons que vous passez en revue et mettre en œuvre les pratiques de sécurité locales traditionnelles hello le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="418d9-162">In addition toohello practices described in this topic, we recommend that you review and implement hello traditional on-premises security practices where applicable.</span></span> <span data-ttu-id="418d9-163">Pour plus d’informations, consultez [Considérations sur la sécurité pour une installation SQL Server](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span><span class="sxs-lookup"><span data-stu-id="418d9-163">For more information, see [Security Considerations for a SQL Server Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span></span>

## <a name="next-steps"></a><span data-ttu-id="418d9-164">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="418d9-164">Next Steps</span></span>

<span data-ttu-id="418d9-165">Si vous vous intéressez également à l’optimisation des performances, voir [Meilleures pratiques relatives aux performances de SQL Server sur les machines virtuelles Azure](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="418d9-165">If you are also interested in best practices around performance, see [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="418d9-166">Pour les autres rubriques connexes toorunning SQL Server dans des machines virtuelles Azure, consultez [SQL Server sur une vue d’ensemble des Machines virtuelles Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="418d9-166">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

