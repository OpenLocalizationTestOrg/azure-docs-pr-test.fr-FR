---
title: aaaPerformance les meilleures pratiques pour SQL Server dans Azure | Documents Microsoft
description: "Présente les meilleures pratiques pour optimiser les performances de SQL Server dans Microsoft Azure Virtual Machines."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: a0c85092-2113-4982-b73a-4e80160bac36
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: jroth
ms.openlocfilehash: 42ec9fbeb2dec3a654b93bbd08d666369835ee73
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="performance-best-practices-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="ce899-103">Meilleures pratiques relatives aux performances de SQL Server dans les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="ce899-103">Performance best practices for SQL Server in Azure Virtual Machines</span></span>

## <a name="overview"></a><span data-ttu-id="ce899-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="ce899-104">Overview</span></span>

<span data-ttu-id="ce899-105">Cette rubrique présente les meilleures pratiques pour optimiser les performances de SQL Server dans la machine virtuelle Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-105">This topic provides best practices for optimizing SQL Server performance in Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="ce899-106">Lors de l’exécution de SQL Server dans des Machines virtuelles Azure, nous vous conseillons de continuer à l’aide de hello des performances de base de données même paramétrage des options qui sont applicable tooSQL Server dans un environnement de serveur local.</span><span class="sxs-lookup"><span data-stu-id="ce899-106">While running SQL Server in Azure Virtual Machines, we recommend that you continue using hello same database performance tuning options that are applicable tooSQL Server in on-premises server environment.</span></span> <span data-ttu-id="ce899-107">Toutefois, les performances de hello de base de données relationnelle dans un cloud public dépendent de nombreux facteurs, telles que la taille d’une machine virtuelle, configuration hello hello de disques de données hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-107">However, hello performance of a relational database in a public cloud depends on many factors such as hello size of a virtual machine, and hello configuration of hello data disks.</span></span>

<span data-ttu-id="ce899-108">Lors de la création d’images de SQL Server, [prendre en compte la configuration de vos machines virtuelles dans le portail Azure de hello](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-108">When creating SQL Server images, [consider provisioning your VMs in hello Azure portal](virtual-machines-windows-portal-sql-server-provision.md).</span></span> <span data-ttu-id="ce899-109">Machines virtuelles SQL Server configuré dans hello portail avec le Gestionnaire de ressources implémente toutes ces meilleures pratiques, y compris la configuration de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-109">SQL Server VMs provisioned in hello Portal with Resource Manager implement all these best practices, including hello storage configuration.</span></span>

<span data-ttu-id="ce899-110">Cet article se concentre sur l’obtention de hello *meilleures* performances pour SQL Server sur des machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-110">This article is focused on getting hello *best* performance for SQL Server on Azure VMs.</span></span> <span data-ttu-id="ce899-111">Si votre charge de travail est moindre, vous n’aurez peut-être pas besoin de toutes les optimisations suivantes.</span><span class="sxs-lookup"><span data-stu-id="ce899-111">If your workload is less demanding, you might not require every optimization listed below.</span></span> <span data-ttu-id="ce899-112">Tenez compte de vos besoins de performances et de vos modèles de charges de travail lors de l’évaluation de ces recommandations.</span><span class="sxs-lookup"><span data-stu-id="ce899-112">Consider your performance needs and workload patterns as you evaluate these recommendations.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="quick-check-list"></a><span data-ttu-id="ce899-113">Liste de vérification rapide</span><span class="sxs-lookup"><span data-stu-id="ce899-113">Quick check list</span></span>

<span data-ttu-id="ce899-114">Hello Voici une liste de vérification rapide pour optimiser les performances de SQL Server sur des Machines virtuelles Azure :</span><span class="sxs-lookup"><span data-stu-id="ce899-114">hello following is a quick check list for optimal performance of SQL Server on Azure Virtual Machines:</span></span>

| <span data-ttu-id="ce899-115">Domaine</span><span class="sxs-lookup"><span data-stu-id="ce899-115">Area</span></span> | <span data-ttu-id="ce899-116">Optimisations</span><span class="sxs-lookup"><span data-stu-id="ce899-116">Optimizations</span></span> |
| --- | --- |
| [<span data-ttu-id="ce899-117">Taille de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="ce899-117">VM size</span></span>](#vm-size-guidance) |<span data-ttu-id="ce899-118">[Édition SQL Enterprise DS3](../../virtual-machines-windows-sizes-memory.md) ou supérieure.</span><span class="sxs-lookup"><span data-stu-id="ce899-118">[DS3](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Enterprise edition.</span></span><br/><br/><span data-ttu-id="ce899-119">[DS2](../../virtual-machines-windows-sizes-memory.md) ou supérieure pour SQL Server Standard Edition ou SQL Server Web Edition.</span><span class="sxs-lookup"><span data-stu-id="ce899-119">[DS2](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Standard and Web editions.</span></span> |
| [<span data-ttu-id="ce899-120">Stockage</span><span class="sxs-lookup"><span data-stu-id="ce899-120">Storage</span></span>](#storage-guidance) |<span data-ttu-id="ce899-121">Utiliser [Premium Storage](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-121">Use [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="ce899-122">Le stockage standard n’est recommandé que pour le développement et le test.</span><span class="sxs-lookup"><span data-stu-id="ce899-122">Standard storage is only recommended for dev/test.</span></span><br/><br/><span data-ttu-id="ce899-123">Conserver hello [compte de stockage](../../../storage/common/storage-create-storage-account.md) et la machine virtuelle SQL Server dans hello même région.</span><span class="sxs-lookup"><span data-stu-id="ce899-123">Keep hello [storage account](../../../storage/common/storage-create-storage-account.md) and SQL Server VM in hello same region.</span></span><br/><br/><span data-ttu-id="ce899-124">Désactiver Azure [stockage géo-redondant](../../../storage/common/storage-redundancy.md) (géo-réplication) sur le compte de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-124">Disable Azure [geo-redundant storage](../../../storage/common/storage-redundancy.md) (geo-replication) on hello storage account.</span></span> |
| [<span data-ttu-id="ce899-125">Disques</span><span class="sxs-lookup"><span data-stu-id="ce899-125">Disks</span></span>](#disks-guidance) |<span data-ttu-id="ce899-126">Utilisez au moins 2 [disques P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 pour les fichiers journaux ; 1 pour les fichiers de données et TempDB).</span><span class="sxs-lookup"><span data-stu-id="ce899-126">Use a minimum of 2 [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 for log files; 1 for data files and TempDB).</span></span><br/><br/><span data-ttu-id="ce899-127">Éviter d’utiliser des disques de système d’exploitation ou temporaires pour le stockage ou la journalisation des bases de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-127">Avoid using operating system or temporary disks for database storage or logging.</span></span><br/><br/><span data-ttu-id="ce899-128">Activer le cache de lecture des disques hello hébergeant les fichiers de données hello et TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-128">Enable read caching on hello disk(s) hosting hello data files and TempDB.</span></span><br/><br/><span data-ttu-id="ce899-129">N’activez pas la mise en cache sur les disques qui héberge le fichier journal de hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-129">Do not enable caching on disk(s) hosting hello log file.</span></span><br/><br/><span data-ttu-id="ce899-130">Important : Arrêter le service SQL Server de hello lors de la modification des paramètres de cache de hello pour un disque de machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-130">Important: Stop hello SQL Server service when changing hello cache settings for an Azure VM disk.</span></span><br/><br/><span data-ttu-id="ce899-131">Distribuez le débit d’e/s tooget augmenté à des disques Azure données plusieurs.</span><span class="sxs-lookup"><span data-stu-id="ce899-131">Stripe multiple Azure data disks tooget increased IO throughput.</span></span><br/><br/><span data-ttu-id="ce899-132">Formatez avec des tailles d’allocation documentées.</span><span class="sxs-lookup"><span data-stu-id="ce899-132">Format with documented allocation sizes.</span></span> |
| [<span data-ttu-id="ce899-133">E/S</span><span class="sxs-lookup"><span data-stu-id="ce899-133">I/O</span></span>](#io-guidance) |<span data-ttu-id="ce899-134">Activez la compression des pages de base de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-134">Enable database page compression.</span></span><br/><br/><span data-ttu-id="ce899-135">Activer l’initialisation de fichiers instantanée pour les fichiers de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-135">Enable instant file initialization for data files.</span></span><br/><br/><span data-ttu-id="ce899-136">Limiter ou désactiver la croissance automatique sur la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-136">Limit or disable autogrow on hello database.</span></span><br/><br/><span data-ttu-id="ce899-137">Désactiver la réduction automatique sur la base de données hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-137">Disable autoshrink on hello database.</span></span><br/><br/><span data-ttu-id="ce899-138">Déplacer tous les disques toodata de bases de données, y compris les bases de données système.</span><span class="sxs-lookup"><span data-stu-id="ce899-138">Move all databases toodata disks, including system databases.</span></span><br/><br/><span data-ttu-id="ce899-139">Déplacez SQL Server erreur suivi et journaux fichier répertoires toodata disques.</span><span class="sxs-lookup"><span data-stu-id="ce899-139">Move SQL Server error log and trace file directories toodata disks.</span></span><br/><br/><span data-ttu-id="ce899-140">Configurez les emplacements par défaut du fichier de sauvegarde et du fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-140">Setup default backup and database file locations.</span></span><br/><br/><span data-ttu-id="ce899-141">Activer les pages verrouillées.</span><span class="sxs-lookup"><span data-stu-id="ce899-141">Enable locked pages.</span></span><br/><br/><span data-ttu-id="ce899-142">Appliquez les correctifs de performances de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ce899-142">Apply SQL Server performance fixes.</span></span> |
| [<span data-ttu-id="ce899-143">Fonctionnalités spécifiques</span><span class="sxs-lookup"><span data-stu-id="ce899-143">Feature specific</span></span>](#feature-specific-guidance) |<span data-ttu-id="ce899-144">Sauvegarder directement tooblob stockage.</span><span class="sxs-lookup"><span data-stu-id="ce899-144">Back up directly tooblob storage.</span></span> |

<span data-ttu-id="ce899-145">Pour plus d’informations sur *comment* et *pourquoi* toomake ces optimisations, passez en revue les détails de hello et les instructions fournies dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="ce899-145">For more information on *how* and *why* toomake these optimizations, please review hello details and guidance provided in following sections.</span></span>

## <a name="vm-size-guidance"></a><span data-ttu-id="ce899-146">Conseils liés à la taille des machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="ce899-146">VM size guidance</span></span>

<span data-ttu-id="ce899-147">Pour les applications sensibles aux performances, il est recommandé d’utiliser suivant de hello [tailles de machines virtuelles](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span><span class="sxs-lookup"><span data-stu-id="ce899-147">For performance sensitive applications, it’s recommended that you use hello following [virtual machines sizes](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span></span>

* <span data-ttu-id="ce899-148">**SQL Server Enterprise Edition**: DS3 ou supérieure</span><span class="sxs-lookup"><span data-stu-id="ce899-148">**SQL Server Enterprise Edition**: DS3 or higher</span></span>
* <span data-ttu-id="ce899-149">**SQL Server Standard Edition ou SQL Server Web Edition**: DS2 ou supérieure</span><span class="sxs-lookup"><span data-stu-id="ce899-149">**SQL Server Standard and Web Editions**: DS2 or higher</span></span>

## <a name="storage-guidance"></a><span data-ttu-id="ce899-150">Conseils liés au stockage</span><span class="sxs-lookup"><span data-stu-id="ce899-150">Storage guidance</span></span>

<span data-ttu-id="ce899-151">Les machines virtuelles de série DS (ainsi que des séries DSv2 et GS) prennent en charge le [stockage Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-151">DS-series (along with DSv2-series and GS-series) VMs support [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="ce899-152">L’option Premium Storage est recommandée pour toutes les charges de travail de production.</span><span class="sxs-lookup"><span data-stu-id="ce899-152">Premium Storage is recommended for all production workloads.</span></span>

> [!WARNING]
> <span data-ttu-id="ce899-153">L’option Standard Storage possède différents temps de latence et une bande passante variable. Elle est recommandée uniquement pour les charges de travail de développement/de test.</span><span class="sxs-lookup"><span data-stu-id="ce899-153">Standard Storage has varying latencies and bandwidth and is only recommended for dev/test workloads.</span></span> <span data-ttu-id="ce899-154">Les charges de production doivent utiliser Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="ce899-154">Production workloads should use Premium Storage.</span></span>

<span data-ttu-id="ce899-155">En outre, nous vous recommandons de créer votre compte de stockage Azure Bonjour même centre de données que vos délais de transfert tooreduce des machines virtuelles SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ce899-155">In addition, we recommend that you create your Azure storage account in hello same data center as your SQL Server virtual machines tooreduce transfer delays.</span></span> <span data-ttu-id="ce899-156">Lors de la création d’un compte de stockage, désactivez la géo-réplication, étant donné que la cohérence de l’ordre d’écriture sur différents disques n’est pas garantie.</span><span class="sxs-lookup"><span data-stu-id="ce899-156">When creating a storage account, disable geo-replication as consistent write order across multiple disks is not guaranteed.</span></span> <span data-ttu-id="ce899-157">Envisagez plutôt de configurer une technologie de récupération d’urgence de SQL Server entre deux centres de données Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-157">Instead, consider configuring a SQL Server disaster recovery technology between two Azure data centers.</span></span> <span data-ttu-id="ce899-158">Pour plus d’informations, consultez [Haute disponibilité et récupération d’urgence pour SQL Server dans Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-158">For more information, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="disks-guidance"></a><span data-ttu-id="ce899-159">Conseils liés aux disques</span><span class="sxs-lookup"><span data-stu-id="ce899-159">Disks guidance</span></span>

<span data-ttu-id="ce899-160">Il existe trois types de disques principaux sur une machine virtuelle Azure :</span><span class="sxs-lookup"><span data-stu-id="ce899-160">There are three main disk types on an Azure VM:</span></span>

* <span data-ttu-id="ce899-161">**Disque de système d’exploitation**: lorsque vous créez une Machine virtuelle Azure, la plateforme de hello attachera au moins un disque (appelé hello **C** lecteur) toohello machine virtuelle pour le disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="ce899-161">**OS disk**: When you create an Azure Virtual Machine, hello platform will attach at least one disk (labeled as hello **C** drive) toohello VM for your operating system disk.</span></span> <span data-ttu-id="ce899-162">Ce disque est un disque dur virtuel (VHD) stocké en tant qu’objet blob de pages dans le stockage.</span><span class="sxs-lookup"><span data-stu-id="ce899-162">This disk is a VHD stored as a page blob in storage.</span></span>
* <span data-ttu-id="ce899-163">**Disque temporaire**: les Machines virtuelles Azure contiennent un autre disque appelé disque temporaire de hello (étiquetés comme hello **D**: lecteur).</span><span class="sxs-lookup"><span data-stu-id="ce899-163">**Temporary disk**: Azure Virtual Machines contain another disk called hello temporary disk (labeled as hello **D**: drive).</span></span> <span data-ttu-id="ce899-164">Il s’agit d’un disque sur le nœud hello qui peut être utilisé pour l’espace de travail.</span><span class="sxs-lookup"><span data-stu-id="ce899-164">This is a disk on hello node that can be used for scratch space.</span></span>
* <span data-ttu-id="ce899-165">**Disques de données**: vous pouvez également attacher des disques supplémentaires tooyour virtual machine en tant que disques de données, et ces seront stockées dans le stockage en tant qu’objets BLOB de pages.</span><span class="sxs-lookup"><span data-stu-id="ce899-165">**Data disks**: You can also attach additional disks tooyour virtual machine as data disks, and these will be stored in storage as page blobs.</span></span>

<span data-ttu-id="ce899-166">Hello sections suivantes décrivent des recommandations pour l’utilisation de ces différents disques.</span><span class="sxs-lookup"><span data-stu-id="ce899-166">hello following sections describe recommendations for using these different disks.</span></span>

### <a name="operating-system-disk"></a><span data-ttu-id="ce899-167">Disque de système d’exploitation</span><span class="sxs-lookup"><span data-stu-id="ce899-167">Operating system disk</span></span>

<span data-ttu-id="ce899-168">Un disque de système d’exploitation est un disque dur virtuel (VHD) que vous pouvez amorcer et monter comme version d’exécution d’un système d’exploitation. Il est désigné par la lettre de lecteur **C**.</span><span class="sxs-lookup"><span data-stu-id="ce899-168">An operating system disk is a VHD that you can boot and mount as a running version of an operating system and is labeled as **C** drive.</span></span>

<span data-ttu-id="ce899-169">Valeur par défaut de la mise en cache de la stratégie sur le disque du système d’exploitation hello est **en lecture/écriture**.</span><span class="sxs-lookup"><span data-stu-id="ce899-169">Default caching policy on hello operating system disk is **Read/Write**.</span></span> <span data-ttu-id="ce899-170">Pour les applications sensibles aux performances, nous vous recommandons d’utiliser des disques de données au lieu de disque de système d’exploitation hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-170">For performance sensitive applications, we recommend that you use data disks instead of hello operating system disk.</span></span> <span data-ttu-id="ce899-171">Consultez la section de hello sur des disques de données ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="ce899-171">See hello section on Data Disks below.</span></span>

### <a name="temporary-disk"></a><span data-ttu-id="ce899-172">Disque temporaire</span><span class="sxs-lookup"><span data-stu-id="ce899-172">Temporary disk</span></span>

<span data-ttu-id="ce899-173">Hello disque temporaire, désigné comme hello **D**: disque, n’est pas persistante tooAzure stockage d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="ce899-173">hello temporary storage drive, labeled as hello **D**: drive, is not persisted tooAzure blob storage.</span></span> <span data-ttu-id="ce899-174">Ne stockez pas vos fichiers de base de données utilisateur ou les fichiers journaux des transactions utilisateur sur hello **D**: lecteur.</span><span class="sxs-lookup"><span data-stu-id="ce899-174">Do not store your user database files or user transaction log files on hello **D**: drive.</span></span>

<span data-ttu-id="ce899-175">Pour la série D, série Dv2 et machines virtuelles de série G, lecteur temporaire de hello sur ces ordinateurs virtuels est basé sur le disque SSD.</span><span class="sxs-lookup"><span data-stu-id="ce899-175">For D-series, Dv2-series, and G-series VMs, hello temporary drive on these VMs is SSD-based.</span></span> <span data-ttu-id="ce899-176">Si votre charge de travail utilise de façon intensive TempDB (par exemple, pour les objets temporaires ou des jointures complexes), le stockage de TempDB sur hello **D** lecteur peut entraîner un débit plus élevé TempDB et diminuer la latence de TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-176">If your workload makes heavy use of TempDB (e.g. for temporary objects or complex joins), storing TempDB on hello **D** drive could result in higher TempDB throughput and lower TempDB latency.</span></span>

<span data-ttu-id="ce899-177">Pour les machines virtuelles qui prennent en charge le stockage Premium (de série DS, DSv2 et GS), nous vous recommandons de stocker TempDB sur un disque qui prend en charge le stockage Premium avec la mise en cache en lecture activée.</span><span class="sxs-lookup"><span data-stu-id="ce899-177">For VMs that support Premium Storage (DS-series, DSv2-series, and GS-series), we recommend storing TempDB on a disk that supports Premium Storage with read caching enabled.</span></span> <span data-ttu-id="ce899-178">Il existe une recommandation de toothis exception ; Si votre utilisation de TempDB est gourmandes en écriture, vous pouvez obtenir les meilleures performances en stockant TempDB hello local **D** lecteur, qui est également basée sur SSD sur ces tailles de machine.</span><span class="sxs-lookup"><span data-stu-id="ce899-178">There is one exception toothis recommendation; if your TempDB usage is write-intensive, you can achieve higher performance by storing TempDB on hello local **D** drive, which is also SSD-based on these machine sizes.</span></span>

### <a name="data-disks"></a><span data-ttu-id="ce899-179">Disques de données</span><span class="sxs-lookup"><span data-stu-id="ce899-179">Data disks</span></span>

* <span data-ttu-id="ce899-180">**Utiliser des disques de données pour les données et fichiers journaux**: au minimum, utilisez 2 stockage Premium [P30 disques](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) où un seul disque contient l’ou les fichiers journaux hello et hello autres contient les données de salutation et les fichiers de TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-180">**Use data disks for data and log files**: At a minimum, use 2 Premium Storage [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) where one disk contains hello log file(s) and hello other contains hello data and TempDB file(s).</span></span> <span data-ttu-id="ce899-181">Chaque disque de stockage Premium fournit un nombre d’IOPs et de bande passante (Mo/s) en fonction de sa taille, comme décrit dans l’article suivant de hello : [à l’aide de stockage Premium pour les disques](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-181">Each Premium Storage disk provides a number of IOPs and bandwidth (MB/s) depending on its size, as described in hello following article: [Using Premium Storage for Disks](../../../storage/common/storage-premium-storage.md).</span></span>

* <span data-ttu-id="ce899-182">**Entrelacement de disques**: pour augmenter le débit, vous pouvez ajouter des disques de données supplémentaires et utiliser l’entrelacement de disques.</span><span class="sxs-lookup"><span data-stu-id="ce899-182">**Disk Striping**: For more throughput, you can add additional data disks and use Disk Striping.</span></span> <span data-ttu-id="ce899-183">nombre de hello toodetermine de disques de données, vous devez tooanalyze hello d’e/s et de bande passante requise pour vos fichiers journaux et de vos données et les fichiers de TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-183">toodetermine hello number of data disks, you need tooanalyze hello number of IOPS and bandwidth required for your log file(s), and for your data and TempDB file(s).</span></span> <span data-ttu-id="ce899-184">Notez que les différentes tailles de machine virtuelle ont des limites différentes sur nombre hello IOPs et bande passante de la prise en charge, consultez les tableaux de hello sur les e/s par [taille de machine virtuelle](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ce899-184">Notice that different VM sizes have different limits on hello number of IOPs and bandwidth supported, see hello tables on IOPS per [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="ce899-185">Utilisez hello instructions :</span><span class="sxs-lookup"><span data-stu-id="ce899-185">Use hello following guidelines:</span></span>

  * <span data-ttu-id="ce899-186">Pour Windows 8 et Windows Server 2012 ou version ultérieure, utilisez [des espaces de stockage](https://technet.microsoft.com/library/hh831739.aspx) par hello instructions :</span><span class="sxs-lookup"><span data-stu-id="ce899-186">For Windows 8/Windows Server 2012 or later, use [Storage Spaces](https://technet.microsoft.com/library/hh831739.aspx) with hello following guidelines:</span></span>

      1. <span data-ttu-id="ce899-187">Ensemble hello entrelacer (taille de bande) too64 Ko (65 536 octets) pour les charges de travail OLTP et 256 Ko (262 144 octets) pour l’impact sur les performances des charges de travail tooavoid en raison d’un mauvais alignement toopartition d’entreposage de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-187">Set hello interleave (stripe size) too64 KB (65536 bytes) for OLTP workloads and 256 KB (262144 bytes) for data warehousing workloads tooavoid performance impact due toopartition misalignment.</span></span> <span data-ttu-id="ce899-188">Ces paramètres doivent être définis avec PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ce899-188">This must be set with PowerShell.</span></span>
      1. <span data-ttu-id="ce899-189">Nombre de colonnes définies = nombre de disques physiques.</span><span class="sxs-lookup"><span data-stu-id="ce899-189">Set column count = number of physical disks.</span></span> <span data-ttu-id="ce899-190">Utilisez PowerShell lorsque vous configurez plus de 8 disques (et non l’interface utilisateur du gestionnaire de serveur).</span><span class="sxs-lookup"><span data-stu-id="ce899-190">Use PowerShell when configuring more than 8 disks (not Server Manager UI).</span></span> 

    <span data-ttu-id="ce899-191">Par exemple, hello suivant PowerShell crée un pool de stockage avec hello entrelacer taille too64 Ko et hello le nombre de colonnes too2 :</span><span class="sxs-lookup"><span data-stu-id="ce899-191">For example, hello following PowerShell creates a new storage pool with hello interleave size too64 KB and hello number of columns too2:</span></span>

    ```powershell
    $PoolCount = Get-PhysicalDisk -CanPool $True
    $PhysicalDisks = Get-PhysicalDisk | Where-Object {$_.FriendlyName -like "*2" -or $_.FriendlyName -like "*3"}

    New-StoragePool -FriendlyName "DataFiles" -StorageSubsystemFriendlyName "Storage Spaces*" -PhysicalDisks $PhysicalDisks | New-VirtualDisk -FriendlyName "DataFiles" -Interleave 65536 -NumberOfColumns 2 -ResiliencySettingName simple –UseMaximumSize |Initialize-Disk -PartitionStyle GPT -PassThru |New-Partition -AssignDriveLetter -UseMaximumSize |Format-Volume -FileSystem NTFS -NewFileSystemLabel "DataDisks" -AllocationUnitSize 65536 -Confirm:$false 
    ```

  * <span data-ttu-id="ce899-192">Pour Windows 2008 R2 ou version antérieure, vous pouvez utiliser des disques dynamiques (volumes du système d’exploitation agrégés par bandes) et taille de bande hello est toujours de 64 Ko.</span><span class="sxs-lookup"><span data-stu-id="ce899-192">For Windows 2008 R2 or earlier, you can use dynamic disks (OS striped volumes) and hello stripe size is always 64 KB.</span></span> <span data-ttu-id="ce899-193">Remarque : cette option est déconseillée à partir des versions Windows 8/Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="ce899-193">Note that this option is deprecated as of Windows 8/Windows Server 2012.</span></span> <span data-ttu-id="ce899-194">Pour plus d’informations, consultez déclaration de prise en charge hello [Service de disque virtuel est en transition tooWindows API de gestion de stockage](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-194">For information, see hello support statement at [Virtual Disk Service is transitioning tooWindows Storage Management API](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span></span>

  * <span data-ttu-id="ce899-195">Si votre charge de travail ne génère pas intensivement de journaux et ne nécessite pas d’opérations d’E/S par seconde dédiées, vous pouvez configurer un seul pool de stockage.</span><span class="sxs-lookup"><span data-stu-id="ce899-195">If your workload is not log intensive and does not need dedicated IOPs, you can configure just one storage pool.</span></span> <span data-ttu-id="ce899-196">Sinon, créez deux pools de stockage, un pour l’ou les fichiers journaux hello et un autre pool de stockage pour les fichiers de données hello et TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-196">Otherwise, create two storage pools, one for hello log file(s) and another storage pool for hello data file(s) and TempDB.</span></span> <span data-ttu-id="ce899-197">Déterminer le nombre de hello de disques associés à chaque pool de stockage en fonction de vos attentes en matière de charge.</span><span class="sxs-lookup"><span data-stu-id="ce899-197">Determine hello number of disks associated with each storage pool based on your load expectations.</span></span> <span data-ttu-id="ce899-198">N’oubliez pas que les différentes tailles de machines virtuelles autorisent différents nombres de disques de données attachés.</span><span class="sxs-lookup"><span data-stu-id="ce899-198">Keep in mind that different VM sizes allow different numbers of attached data disks.</span></span> <span data-ttu-id="ce899-199">Pour plus d’informations, consultez [Tailles des machines virtuelles](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ce899-199">For more information, see [Sizes for Virtual Machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

  * <span data-ttu-id="ce899-200">Si vous n’utilisez pas le stockage Premium (scénarios de développement/test), hello est recommandé de nombre maximal de hello tooadd de disques de données pris en charge par votre [taille de machine virtuelle](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) et utiliser l’agrégation de disques.</span><span class="sxs-lookup"><span data-stu-id="ce899-200">If you are not using Premium Storage (dev/test scenarios), hello recommendation is tooadd hello maximum number of data disks supported by your [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and use Disk Striping.</span></span>

* <span data-ttu-id="ce899-201">**Stratégie de mise en cache**: les disques de données pour le stockage Premium, activer le cache de lecture sur les disques de données hello d’hébergement seulement vos fichiers de données et de TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-201">**Caching policy**: For Premium Storage data disks, enable read caching on hello data disks hosting your data files and TempDB only.</span></span> <span data-ttu-id="ce899-202">Si vous n’utilisez pas Premium Storage, n’activez aucune mise en cache sur les disques de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-202">If you are not using Premium Storage, do not enable any caching on any data disks.</span></span> <span data-ttu-id="ce899-203">Pour obtenir des instructions sur la configuration de la mise en cache du disque, consultez hello rubriques suivantes : [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) et [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-203">For instructions on configuring disk caching, see hello following topics: [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) and [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span></span>

  > [!WARNING]
  > <span data-ttu-id="ce899-204">Arrêter le service SQL Server de hello lorsque vous modifiez le paramètre de cache hello Azure VM disques tooavoid hello risque en tête une altération de la base de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-204">Stop hello SQL Server service when changing hello cache setting of Azure VM disks tooavoid hello possibility of any database corruption.</span></span>

* <span data-ttu-id="ce899-205">**Taille d’unité d’allocation NTFS**: lors du formatage de disque de données hello, il est recommandé d’utiliser une taille d’unité d’allocation de 64 Ko pour les données et fichiers journaux ainsi que de TempDB.</span><span class="sxs-lookup"><span data-stu-id="ce899-205">**NTFS allocation unit size**: When formatting hello data disk, it is recommended that you use a 64-KB allocation unit size for data and log files as well as TempDB.</span></span>

* <span data-ttu-id="ce899-206">**Meilleures pratiques de gestion de disque**: lors de la suppression d’un disque de données ou la modification de son cache de type, arrêtez le service de SQL Server de hello pendant la modification de hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-206">**Disk management best practices**: When removing a data disk or changing its cache type, stop hello SQL Server service during hello change.</span></span> <span data-ttu-id="ce899-207">Lorsque les paramètres de mise en cache de hello sont modifiées sur le disque du système d’exploitation de hello, Azure arrête hello machine virtuelle, modifie le type de cache hello et redémarre hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="ce899-207">When hello caching settings are changed on hello OS disk, Azure stops hello VM, changes hello cache type, and restarts hello VM.</span></span> <span data-ttu-id="ce899-208">Lorsque les paramètres de cache hello d’un disque de données sont modifiées, hello VM n’est pas arrêtée, mais disque de données hello est détaché hello VM pendant hello modifier et puis rattachée.</span><span class="sxs-lookup"><span data-stu-id="ce899-208">When hello cache settings of a data disk are changed, hello VM is not stopped, but hello data disk is detached from hello VM during hello change and then reattached.</span></span>

  > [!WARNING]
  > <span data-ttu-id="ce899-209">Hello toostop de défaillance du service SQL Server pendant ces opérations peut endommager la base de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-209">Failure toostop hello SQL Server service during these operations can cause database corruption.</span></span>

## <a name="io-guidance"></a><span data-ttu-id="ce899-210">Recommandations liées aux E/S</span><span class="sxs-lookup"><span data-stu-id="ce899-210">I/O guidance</span></span>

* <span data-ttu-id="ce899-211">Hello meilleurs résultats avec stockage Premium sont obtenus quand vous parallélisez votre application et les demandes.</span><span class="sxs-lookup"><span data-stu-id="ce899-211">hello best results with Premium Storage are achieved when you parallelize your application and requests.</span></span> <span data-ttu-id="ce899-212">Stockage Premium est conçu pour les scénarios où la profondeur de file d’attente d’e/s hello est supérieur à 1, voir peu ou pas des gains de performances pour les demandes de série monothread (même si elles sont beaucoup de stockage).</span><span class="sxs-lookup"><span data-stu-id="ce899-212">Premium Storage is designed for scenarios where hello IO queue depth is greater than 1, so you will see little or no performance gains for single-threaded serial requests (even if they are storage intensive).</span></span> <span data-ttu-id="ce899-213">Par exemple, cela peut affecter les résultats du test de monothread hello des outils d’analyse de performances, telles que SQLIO.</span><span class="sxs-lookup"><span data-stu-id="ce899-213">For example, this could impact hello single-threaded test results of performance analysis tools, such as SQLIO.</span></span>

* <span data-ttu-id="ce899-214">Envisagez d’utiliser un [compression des pages de base de données](https://msdn.microsoft.com/library/cc280449.aspx) , car elle peut améliorer les performances de charges de travail gourmandes en E/S.</span><span class="sxs-lookup"><span data-stu-id="ce899-214">Consider using [database page compression](https://msdn.microsoft.com/library/cc280449.aspx) as it can help improve performance of I/O intensive workloads.</span></span> <span data-ttu-id="ce899-215">Toutefois, la compression des données hello peut augmenter la consommation de processeur hello sur le serveur de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-215">However, hello data compression might increase hello CPU consumption on hello database server.</span></span>

* <span data-ttu-id="ce899-216">Envisagez d’activer la durée de hello du tooreduce d’initialisation instantanée des fichiers requis pour l’allocation de fichier initial.</span><span class="sxs-lookup"><span data-stu-id="ce899-216">Consider enabling instant file initialization tooreduce hello time that is required for initial file allocation.</span></span> <span data-ttu-id="ce899-217">tootake parti de l’initialisation instantanée des fichiers, vous accordez hello compte de service SQL Server (MSSQLSERVER) avec l’autorisation SE_MANAGE_VOLUME_NAME et l’ajouter toohello **effectuer des tâches de Maintenance de Volume** stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="ce899-217">tootake advantage of instant file initialization, you grant hello SQL Server (MSSQLSERVER) service account with SE_MANAGE_VOLUME_NAME and add it toohello **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="ce899-218">Si vous utilisez une image de plateforme SQL Server pour Azure, compte de service par défaut hello (NT Service\MSSQLSERVER) n’est pas ajouté toohello **effectuer des tâches de Maintenance de Volume** stratégie de sécurité.</span><span class="sxs-lookup"><span data-stu-id="ce899-218">If you are using a SQL Server platform image for Azure, hello default service account (NT Service\MSSQLSERVER) isn’t added toohello **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="ce899-219">En d’autres termes, l’initialisation instantanée des fichiers n’est pas activée dans une image de plateforme SQL Server pour Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-219">In other words, instant file initialization is not enabled in a SQL Server Azure platform image.</span></span> <span data-ttu-id="ce899-220">Après l’ajout de toohello de compte de service de SQL Server hello **effectuer des tâches de Maintenance de Volume** stratégie de sécurité, redémarrez le service SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-220">After adding hello SQL Server service account toohello **Perform Volume Maintenance Tasks** security policy, restart hello SQL Server service.</span></span> <span data-ttu-id="ce899-221">Des considérations de sécurité liées à l’utilisation de cette fonctionnalité peuvent exister.</span><span class="sxs-lookup"><span data-stu-id="ce899-221">There could be security considerations for using this feature.</span></span> <span data-ttu-id="ce899-222">Pour plus d’informations, consultez [Initialisation des fichiers de base de données](https://msdn.microsoft.com/library/ms175935.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-222">For more information, see [Database File Initialization](https://msdn.microsoft.com/library/ms175935.aspx).</span></span>

* <span data-ttu-id="ce899-223">**croissance automatique** est considéré comme toobe simplement une éventualité de croissance.</span><span class="sxs-lookup"><span data-stu-id="ce899-223">**autogrow** is considered toobe merely a contingency for unexpected growth.</span></span> <span data-ttu-id="ce899-224">Ne gérez pas la croissance de vos données et journaux quotidiennement avec la croissance automatique.</span><span class="sxs-lookup"><span data-stu-id="ce899-224">Do not manage your data and log growth on a day-to-day basis with autogrow.</span></span> <span data-ttu-id="ce899-225">Si la croissance automatique est utilisée, augmentez préalablement le fichier hello à l’aide du commutateur taille hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-225">If autogrow is used, pre-grow hello file using hello Size switch.</span></span>

* <span data-ttu-id="ce899-226">Assurez-vous que **autoshrink** est justifié tooavoid désactivé qui peut nuire aux performances.</span><span class="sxs-lookup"><span data-stu-id="ce899-226">Make sure **autoshrink** is disabled tooavoid unnecessary overhead that can negatively affect performance.</span></span>

* <span data-ttu-id="ce899-227">Déplacer tous les disques toodata de bases de données, y compris les bases de données système.</span><span class="sxs-lookup"><span data-stu-id="ce899-227">Move all databases toodata disks, including system databases.</span></span> <span data-ttu-id="ce899-228">Pour plus d’informations, consultez [Déplacer des bases de données système](https://msdn.microsoft.com/library/ms345408.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-228">For more information, see [Move System Databases](https://msdn.microsoft.com/library/ms345408.aspx).</span></span>

* <span data-ttu-id="ce899-229">Déplacez SQL Server erreur suivi et journaux fichier répertoires toodata disques.</span><span class="sxs-lookup"><span data-stu-id="ce899-229">Move SQL Server error log and trace file directories toodata disks.</span></span> <span data-ttu-id="ce899-230">Cette opération peut être effectuée dans le Gestionnaire de configuration SQL Server en double-cliquant sur l’instance de SQL Server et en sélectionnant des propriétés.</span><span class="sxs-lookup"><span data-stu-id="ce899-230">This can be done in SQL Server Configuration Manager by right-clicking your SQL Server instance and selecting properties.</span></span> <span data-ttu-id="ce899-231">Hello erreur suivi et journaux fichier paramètres peuvent être modifiés dans hello **paramètres de démarrage** hello onglet répertoire de vidage est spécifié dans hello **avancé** hello onglet suivant capture d’écran montre en quoi toolook pour paramètre de démarrage du journal d’erreur de Hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-231">hello error log and trace file settings can be changed in hello **Startup Parameters** tab. hello Dump Directory is specified in hello **Advanced** tab. hello following screenshot shows where toolook for hello error log startup parameter.</span></span>

    ![Capture d’écran du journal des erreurs SQL](./media/virtual-machines-windows-sql-performance/sql_server_error_log_location.png)

* <span data-ttu-id="ce899-233">Configurez les emplacements par défaut du fichier de sauvegarde et du fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="ce899-233">Setup default backup and database file locations.</span></span> <span data-ttu-id="ce899-234">Utilisez les recommandations hello dans cette rubrique, puis apportez des modifications de hello dans la fenêtre de propriétés de serveur hello.</span><span class="sxs-lookup"><span data-stu-id="ce899-234">Use hello recommendations in this topic, and make hello changes in hello Server properties window.</span></span> <span data-ttu-id="ce899-235">Pour obtenir des instructions, consultez [hello afficher ou modifier les emplacements par défaut pour les données et les fichiers de journaux (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-235">For instructions, see [View or Change hello Default Locations for Data and Log Files (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span></span> <span data-ttu-id="ce899-236">Hello capture d’écran suivante montre où toomake ces modifications.</span><span class="sxs-lookup"><span data-stu-id="ce899-236">hello following screenshot demonstrates where toomake these changes.</span></span>

    ![Journal des données et fichiers de sauvegarde SQL](./media/virtual-machines-windows-sql-performance/sql_server_default_data_log_backup_locations.png)
* <span data-ttu-id="ce899-238">Activer verrouillée pages tooreduce e/s et toutes les activités de la pagination.</span><span class="sxs-lookup"><span data-stu-id="ce899-238">Enable locked pages tooreduce IO and any paging activities.</span></span> <span data-ttu-id="ce899-239">Pour plus d’informations, consultez [activer hello Lock Pages in Memory (Option) (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-239">For more information, see [Enable hello Lock Pages in Memory Option (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span></span>

* <span data-ttu-id="ce899-240">Si vous exécutez SQL Server 2012, installez la mise à jour cumulative 10 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="ce899-240">If you are running SQL Server 2012, install Service Pack 1 Cumulative Update 10.</span></span> <span data-ttu-id="ce899-241">Cette mise à jour contient correctif hello pour des performances d’e/s médiocres lorsque vous exécutez une sélection dans une instruction de table temporaire dans SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="ce899-241">This update contains hello fix for poor performance on I/O when you execute select into temporary table statement in SQL Server 2012.</span></span> <span data-ttu-id="ce899-242">Pour plus d’informations, consultez cet [article de la Base de connaissances](http://support.microsoft.com/kb/2958012).</span><span class="sxs-lookup"><span data-stu-id="ce899-242">For information, see this [knowledge base article](http://support.microsoft.com/kb/2958012).</span></span>

* <span data-ttu-id="ce899-243">Envisagez de compresser tous les fichiers de données lors des transferts vers et depuis Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-243">Consider compressing any data files when transferring in/out of Azure.</span></span>

## <a name="feature-specific-guidance"></a><span data-ttu-id="ce899-244">Recommandations liées aux fonctionnalités spécifiques</span><span class="sxs-lookup"><span data-stu-id="ce899-244">Feature specific guidance</span></span>

<span data-ttu-id="ce899-245">Certains déploiements peuvent bénéficier de plus grands avantages en termes de performances à l’aide de techniques de configuration avancées.</span><span class="sxs-lookup"><span data-stu-id="ce899-245">Some deployments may achieve additional performance benefits using more advanced configuration techniques.</span></span> <span data-ttu-id="ce899-246">Hello liste suivante présente certaines fonctionnalités de SQL Server qui peuvent vous aider à améliorer les performances tooachieve :</span><span class="sxs-lookup"><span data-stu-id="ce899-246">hello following list highlights some SQL Server features that can help you tooachieve better performance:</span></span>

* <span data-ttu-id="ce899-247">**Les sauvegardes tooAzure**: lorsque vous effectuez des sauvegardes pour SQL Server s’exécutant dans des machines virtuelles, vous pouvez utiliser [tooURL de sauvegarde SQL Server](https://msdn.microsoft.com/library/dn435916.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-247">**Backup tooAzure storage**: When performing backups for SQL Server running in Azure virtual machines, you can use [SQL Server Backup tooURL](https://msdn.microsoft.com/library/dn435916.aspx).</span></span> <span data-ttu-id="ce899-248">Cette fonctionnalité est disponible à partir de SQL Server 2012 SP1 CU2 et recommandée pour la sauvegarde des disques de données toohello attaché.</span><span class="sxs-lookup"><span data-stu-id="ce899-248">This feature is available starting with SQL Server 2012 SP1 CU2 and recommended for backing up toohello attached data disks.</span></span> <span data-ttu-id="ce899-249">Lorsque vous sauvegarde/restauration vers/depuis le stockage Azure, suivez les recommandations de hello fournies au [meilleures pratiques de sauvegarde de SQL Server tooURL et de résolution des problèmes et de restauration à partir de sauvegardes stockées dans le stockage Azure](https://msdn.microsoft.com/library/jj919149.aspx).</span><span class="sxs-lookup"><span data-stu-id="ce899-249">When you backup/restore to/from Azure storage, follow hello recommendations provided at [SQL Server Backup tooURL Best Practices and Troubleshooting and Restoring from Backups Stored in Azure Storage](https://msdn.microsoft.com/library/jj919149.aspx).</span></span> <span data-ttu-id="ce899-250">Vous pouvez également automatiser ces sauvegardes en utilisant la [Sauvegarde automatisée pour SQL Server dans les machines virtuelles Azure](virtual-machines-windows-sql-automated-backup.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-250">You can also automate these backups using [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>

    <span data-ttu-id="ce899-251">TooSQL préalable Server 2012, vous pouvez utiliser [tooAzure de sauvegarde SQL Server outil](https://www.microsoft.com/download/details.aspx?id=40740).</span><span class="sxs-lookup"><span data-stu-id="ce899-251">Prior tooSQL Server 2012, you can use [SQL Server Backup tooAzure Tool](https://www.microsoft.com/download/details.aspx?id=40740).</span></span> <span data-ttu-id="ce899-252">Cet outil peut aider le débit de sauvegarde tooincrease à l’aide de plusieurs cibles de la bande de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="ce899-252">This tool can help tooincrease backup throughput using multiple backup stripe targets.</span></span>

* <span data-ttu-id="ce899-253">**Fichiers de données SQL Server dans Azure**: cette nouvelle fonctionnalité, nommée [Fichiers de données SQL Server dans Azure](https://msdn.microsoft.com/library/dn385720.aspx), est disponible à partir de SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="ce899-253">**SQL Server Data Files in Azure**: This new feature, [SQL Server Data Files in Azure](https://msdn.microsoft.com/library/dn385720.aspx), is available starting with SQL Server 2014.</span></span> <span data-ttu-id="ce899-254">L’exécution de SQL Server avec des fichiers de données dans Azure offre des caractéristiques de performances comparables à l’utilisation de disques de données Azure.</span><span class="sxs-lookup"><span data-stu-id="ce899-254">Running SQL Server with data files in Azure demonstrates comparable performance characteristics as using Azure data disks.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ce899-255">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="ce899-255">Next Steps</span></span>

<span data-ttu-id="ce899-256">Pour les meilleures pratiques de sécurité, consultez [Considérations relatives à la sécurité de SQL Server sur les machines virtuelles Azure](virtual-machines-windows-sql-security.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-256">For security best practices, see [Security Considerations for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-security.md).</span></span>

<span data-ttu-id="ce899-257">Consultez d’autres rubriques relatives aux machines virtuelles avec SQL Server à la page [Vue d’ensemble de SQL Server sur les machines virtuelles Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ce899-257">Review other SQL Server Virtual Machine topics at [SQL Server on Azure Virtual Machines Overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
