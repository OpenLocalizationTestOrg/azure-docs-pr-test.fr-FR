---
title: "Bonnes pratiques relatives aux performances de SQL Server dans Azure | Microsoft Docs"
description: "Présente les meilleures pratiques pour optimiser les performances de SQL Server dans Microsoft Azure Virtual Machines."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: a0c85092-2113-4982-b73a-4e80160bac36
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: jroth
ms.openlocfilehash: 5595ea016ab01d20cee82b75f56623bb0727a1b3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="performance-best-practices-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="87d1f-103">Meilleures pratiques relatives aux performances de SQL Server dans les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="87d1f-103">Performance best practices for SQL Server in Azure Virtual Machines</span></span>

## <a name="overview"></a><span data-ttu-id="87d1f-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="87d1f-104">Overview</span></span>

<span data-ttu-id="87d1f-105">Cette rubrique présente les meilleures pratiques pour optimiser les performances de SQL Server dans la machine virtuelle Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-105">This topic provides best practices for optimizing SQL Server performance in Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="87d1f-106">Lorsque vous exécutez SQL Server dans Microsoft Azure Virtual Machines, nous vous recommandons de continuer à utiliser les mêmes options de réglage des performances de base de données qui s’appliquent à SQL Server dans un environnement serveur local.</span><span class="sxs-lookup"><span data-stu-id="87d1f-106">While running SQL Server in Azure Virtual Machines, we recommend that you continue using the same database performance tuning options that are applicable to SQL Server in on-premises server environment.</span></span> <span data-ttu-id="87d1f-107">Toutefois, les performances d’une base de données relationnelle dans un cloud public dépendent de nombreux facteurs, comme la taille de la machine virtuelle et la configuration des disques de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-107">However, the performance of a relational database in a public cloud depends on many factors such as the size of a virtual machine, and the configuration of the data disks.</span></span>

<span data-ttu-id="87d1f-108">Lors de la création d’images SQL Server, [pensez à approvisionner vos machines virtuelles dans le portail Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-108">When creating SQL Server images, [consider provisioning your VMs in the Azure portal](virtual-machines-windows-portal-sql-server-provision.md).</span></span> <span data-ttu-id="87d1f-109">Les machines virtuelles SQL Server approvisionnées dans le portail avec Resource Manager mettent en œuvre toutes ces meilleures pratiques, dont la configuration du stockage.</span><span class="sxs-lookup"><span data-stu-id="87d1f-109">SQL Server VMs provisioned in the Portal with Resource Manager implement all these best practices, including the storage configuration.</span></span>

<span data-ttu-id="87d1f-110">Cet article est axé sur l’obtention des *meilleures* performances pour SQL Server sur les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-110">This article is focused on getting the *best* performance for SQL Server on Azure VMs.</span></span> <span data-ttu-id="87d1f-111">Si votre charge de travail est moindre, vous n’aurez peut-être pas besoin de toutes les optimisations suivantes.</span><span class="sxs-lookup"><span data-stu-id="87d1f-111">If your workload is less demanding, you might not require every optimization listed below.</span></span> <span data-ttu-id="87d1f-112">Tenez compte de vos besoins de performances et de vos modèles de charges de travail lors de l’évaluation de ces recommandations.</span><span class="sxs-lookup"><span data-stu-id="87d1f-112">Consider your performance needs and workload patterns as you evaluate these recommendations.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="quick-check-list"></a><span data-ttu-id="87d1f-113">Liste de vérification rapide</span><span class="sxs-lookup"><span data-stu-id="87d1f-113">Quick check list</span></span>

<span data-ttu-id="87d1f-114">Voici une liste de vérification rapide pour optimiser les performances de SQL Server sur Azure Virtual Machines :</span><span class="sxs-lookup"><span data-stu-id="87d1f-114">The following is a quick check list for optimal performance of SQL Server on Azure Virtual Machines:</span></span>

| <span data-ttu-id="87d1f-115">Domaine</span><span class="sxs-lookup"><span data-stu-id="87d1f-115">Area</span></span> | <span data-ttu-id="87d1f-116">Optimisations</span><span class="sxs-lookup"><span data-stu-id="87d1f-116">Optimizations</span></span> |
| --- | --- |
| [<span data-ttu-id="87d1f-117">Taille de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="87d1f-117">VM size</span></span>](#vm-size-guidance) |<span data-ttu-id="87d1f-118">[Édition SQL Enterprise DS3](../../virtual-machines-windows-sizes-memory.md) ou supérieure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-118">[DS3](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Enterprise edition.</span></span><br/><br/><span data-ttu-id="87d1f-119">[DS2](../../virtual-machines-windows-sizes-memory.md) ou supérieure pour SQL Server Standard Edition ou SQL Server Web Edition.</span><span class="sxs-lookup"><span data-stu-id="87d1f-119">[DS2](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Standard and Web editions.</span></span> |
| [<span data-ttu-id="87d1f-120">Stockage</span><span class="sxs-lookup"><span data-stu-id="87d1f-120">Storage</span></span>](#storage-guidance) |<span data-ttu-id="87d1f-121">Utiliser [Premium Storage](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-121">Use [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="87d1f-122">Le stockage standard n’est recommandé que pour le développement et le test.</span><span class="sxs-lookup"><span data-stu-id="87d1f-122">Standard storage is only recommended for dev/test.</span></span><br/><br/><span data-ttu-id="87d1f-123">Conservez le [compte de stockage](../../../storage/common/storage-create-storage-account.md) et la machine virtuelle SQL Server dans la même région.</span><span class="sxs-lookup"><span data-stu-id="87d1f-123">Keep the [storage account](../../../storage/common/storage-create-storage-account.md) and SQL Server VM in the same region.</span></span><br/><br/><span data-ttu-id="87d1f-124">Désactivez le [stockage géo-redondant](../../../storage/common/storage-redundancy.md) (géo-réplication) d’Azure sur le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="87d1f-124">Disable Azure [geo-redundant storage](../../../storage/common/storage-redundancy.md) (geo-replication) on the storage account.</span></span> |
| [<span data-ttu-id="87d1f-125">Disques</span><span class="sxs-lookup"><span data-stu-id="87d1f-125">Disks</span></span>](#disks-guidance) |<span data-ttu-id="87d1f-126">Utilisez au moins 2 [disques P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 pour les fichiers journaux ; 1 pour les fichiers de données et TempDB).</span><span class="sxs-lookup"><span data-stu-id="87d1f-126">Use a minimum of 2 [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 for log files; 1 for data files and TempDB).</span></span><br/><br/><span data-ttu-id="87d1f-127">Éviter d’utiliser des disques de système d’exploitation ou temporaires pour le stockage ou la journalisation des bases de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-127">Avoid using operating system or temporary disks for database storage or logging.</span></span><br/><br/><span data-ttu-id="87d1f-128">Activer la mise en cache de lecture sur le ou les disques hébergeant les fichiers de données et TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-128">Enable read caching on the disk(s) hosting the data files and TempDB.</span></span><br/><br/><span data-ttu-id="87d1f-129">Ne pas activer la mise en cache sur le ou les disques hébergeant le fichier journal.</span><span class="sxs-lookup"><span data-stu-id="87d1f-129">Do not enable caching on disk(s) hosting the log file.</span></span><br/><br/><span data-ttu-id="87d1f-130">Important : arrêtez le service SQL Server lorsque vous modifiez le paramètre de cache d’un disque de machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-130">Important: Stop the SQL Server service when changing the cache settings for an Azure VM disk.</span></span><br/><br/><span data-ttu-id="87d1f-131">Entrelacer plusieurs disques de données Azure pour obtenir un débit d’E/S plus élevé.</span><span class="sxs-lookup"><span data-stu-id="87d1f-131">Stripe multiple Azure data disks to get increased IO throughput.</span></span><br/><br/><span data-ttu-id="87d1f-132">Formatez avec des tailles d’allocation documentées.</span><span class="sxs-lookup"><span data-stu-id="87d1f-132">Format with documented allocation sizes.</span></span> |
| [<span data-ttu-id="87d1f-133">E/S</span><span class="sxs-lookup"><span data-stu-id="87d1f-133">I/O</span></span>](#io-guidance) |<span data-ttu-id="87d1f-134">Activez la compression des pages de base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-134">Enable database page compression.</span></span><br/><br/><span data-ttu-id="87d1f-135">Activer l’initialisation de fichiers instantanée pour les fichiers de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-135">Enable instant file initialization for data files.</span></span><br/><br/><span data-ttu-id="87d1f-136">Limiter ou désactiver la croissance automatique sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-136">Limit or disable autogrow on the database.</span></span><br/><br/><span data-ttu-id="87d1f-137">Désactiver la réduction automatique sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-137">Disable autoshrink on the database.</span></span><br/><br/><span data-ttu-id="87d1f-138">Déplacer toutes les bases de données vers des disques de données, y compris les bases de données système.</span><span class="sxs-lookup"><span data-stu-id="87d1f-138">Move all databases to data disks, including system databases.</span></span><br/><br/><span data-ttu-id="87d1f-139">Déplacer les répertoires des journaux d’erreurs et des fichiers de trace SQL Server vers des disques de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-139">Move SQL Server error log and trace file directories to data disks.</span></span><br/><br/><span data-ttu-id="87d1f-140">Configurez les emplacements par défaut du fichier de sauvegarde et du fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-140">Setup default backup and database file locations.</span></span><br/><br/><span data-ttu-id="87d1f-141">Activer les pages verrouillées.</span><span class="sxs-lookup"><span data-stu-id="87d1f-141">Enable locked pages.</span></span><br/><br/><span data-ttu-id="87d1f-142">Appliquez les correctifs de performances de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="87d1f-142">Apply SQL Server performance fixes.</span></span> |
| [<span data-ttu-id="87d1f-143">Fonctionnalités spécifiques</span><span class="sxs-lookup"><span data-stu-id="87d1f-143">Feature specific</span></span>](#feature-specific-guidance) |<span data-ttu-id="87d1f-144">Sauvegardez directement dans le stockage d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="87d1f-144">Back up directly to blob storage.</span></span> |

<span data-ttu-id="87d1f-145">Pour plus d’informations sur *comment* et *pourquoi* effectuer ces optimisations, passez en revue les détails et les instructions fournies dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="87d1f-145">For more information on *how* and *why* to make these optimizations, please review the details and guidance provided in following sections.</span></span>

## <a name="vm-size-guidance"></a><span data-ttu-id="87d1f-146">Conseils liés à la taille des machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="87d1f-146">VM size guidance</span></span>

<span data-ttu-id="87d1f-147">Pour les applications sensibles aux performances, il est recommandé d’utiliser les [tailles de machines virtuelles](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)suivantes :</span><span class="sxs-lookup"><span data-stu-id="87d1f-147">For performance sensitive applications, it’s recommended that you use the following [virtual machines sizes](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span></span>

* <span data-ttu-id="87d1f-148">**SQL Server Enterprise Edition**: DS3 ou supérieure</span><span class="sxs-lookup"><span data-stu-id="87d1f-148">**SQL Server Enterprise Edition**: DS3 or higher</span></span>
* <span data-ttu-id="87d1f-149">**SQL Server Standard Edition ou SQL Server Web Edition**: DS2 ou supérieure</span><span class="sxs-lookup"><span data-stu-id="87d1f-149">**SQL Server Standard and Web Editions**: DS2 or higher</span></span>

## <a name="storage-guidance"></a><span data-ttu-id="87d1f-150">Conseils liés au stockage</span><span class="sxs-lookup"><span data-stu-id="87d1f-150">Storage guidance</span></span>

<span data-ttu-id="87d1f-151">Les machines virtuelles de série DS (ainsi que des séries DSv2 et GS) prennent en charge le [stockage Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-151">DS-series (along with DSv2-series and GS-series) VMs support [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="87d1f-152">L’option Premium Storage est recommandée pour toutes les charges de travail de production.</span><span class="sxs-lookup"><span data-stu-id="87d1f-152">Premium Storage is recommended for all production workloads.</span></span>

> [!WARNING]
> <span data-ttu-id="87d1f-153">L’option Standard Storage possède différents temps de latence et une bande passante variable. Elle est recommandée uniquement pour les charges de travail de développement/de test.</span><span class="sxs-lookup"><span data-stu-id="87d1f-153">Standard Storage has varying latencies and bandwidth and is only recommended for dev/test workloads.</span></span> <span data-ttu-id="87d1f-154">Les charges de production doivent utiliser Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="87d1f-154">Production workloads should use Premium Storage.</span></span>

<span data-ttu-id="87d1f-155">Par ailleurs, nous vous recommandons de créer votre compte de stockage Azure dans le même centre de données que vos machines virtuelles SQL Server afin de réduire les délais de transfert.</span><span class="sxs-lookup"><span data-stu-id="87d1f-155">In addition, we recommend that you create your Azure storage account in the same data center as your SQL Server virtual machines to reduce transfer delays.</span></span> <span data-ttu-id="87d1f-156">Lors de la création d’un compte de stockage, désactivez la géo-réplication, étant donné que la cohérence de l’ordre d’écriture sur différents disques n’est pas garantie.</span><span class="sxs-lookup"><span data-stu-id="87d1f-156">When creating a storage account, disable geo-replication as consistent write order across multiple disks is not guaranteed.</span></span> <span data-ttu-id="87d1f-157">Envisagez plutôt de configurer une technologie de récupération d’urgence de SQL Server entre deux centres de données Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-157">Instead, consider configuring a SQL Server disaster recovery technology between two Azure data centers.</span></span> <span data-ttu-id="87d1f-158">Pour plus d’informations, consultez [Haute disponibilité et récupération d’urgence pour SQL Server dans Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-158">For more information, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="disks-guidance"></a><span data-ttu-id="87d1f-159">Conseils liés aux disques</span><span class="sxs-lookup"><span data-stu-id="87d1f-159">Disks guidance</span></span>

<span data-ttu-id="87d1f-160">Il existe trois types de disques principaux sur une machine virtuelle Azure :</span><span class="sxs-lookup"><span data-stu-id="87d1f-160">There are three main disk types on an Azure VM:</span></span>

* <span data-ttu-id="87d1f-161">**Disque de système d’exploitation** : quand vous créez une machine virtuelle Azure, la plateforme attache au moins un disque (désigné par la lettre **C**) à la machine virtuelle en tant que disque de système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="87d1f-161">**OS disk**: When you create an Azure Virtual Machine, the platform will attach at least one disk (labeled as the **C** drive) to the VM for your operating system disk.</span></span> <span data-ttu-id="87d1f-162">Ce disque est un disque dur virtuel (VHD) stocké en tant qu’objet blob de pages dans le stockage.</span><span class="sxs-lookup"><span data-stu-id="87d1f-162">This disk is a VHD stored as a page blob in storage.</span></span>
* <span data-ttu-id="87d1f-163">**Disque temporaire** : les machines virtuelles Azure contiennent un autre disque, appelé disque temporaire (portant le nom de lecteur **D**:).</span><span class="sxs-lookup"><span data-stu-id="87d1f-163">**Temporary disk**: Azure Virtual Machines contain another disk called the temporary disk (labeled as the **D**: drive).</span></span> <span data-ttu-id="87d1f-164">C’est un disque du nœud qui peut être utilisé comme un espace de travail temporaire.</span><span class="sxs-lookup"><span data-stu-id="87d1f-164">This is a disk on the node that can be used for scratch space.</span></span>
* <span data-ttu-id="87d1f-165">**Disques de données**: vous pouvez également attacher des disques supplémentaires à votre machine virtuelle en tant que disques de données ; ces disques sont également stockés en tant qu’objets blob de pages.</span><span class="sxs-lookup"><span data-stu-id="87d1f-165">**Data disks**: You can also attach additional disks to your virtual machine as data disks, and these will be stored in storage as page blobs.</span></span>

<span data-ttu-id="87d1f-166">Les sections suivantes décrivent des recommandations pour l’utilisation de ces disques différents.</span><span class="sxs-lookup"><span data-stu-id="87d1f-166">The following sections describe recommendations for using these different disks.</span></span>

### <a name="operating-system-disk"></a><span data-ttu-id="87d1f-167">Disque de système d’exploitation</span><span class="sxs-lookup"><span data-stu-id="87d1f-167">Operating system disk</span></span>

<span data-ttu-id="87d1f-168">Un disque de système d’exploitation est un disque dur virtuel (VHD) que vous pouvez amorcer et monter comme version d’exécution d’un système d’exploitation. Il est désigné par la lettre de lecteur **C**.</span><span class="sxs-lookup"><span data-stu-id="87d1f-168">An operating system disk is a VHD that you can boot and mount as a running version of an operating system and is labeled as **C** drive.</span></span>

<span data-ttu-id="87d1f-169">La stratégie de mise en cache par défaut sur le disque du système d’exploitation est **Lecture/Écriture**.</span><span class="sxs-lookup"><span data-stu-id="87d1f-169">Default caching policy on the operating system disk is **Read/Write**.</span></span> <span data-ttu-id="87d1f-170">Pour les applications sensibles aux performances, nous vous recommandons d’utiliser le disque de données au lieu du disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="87d1f-170">For performance sensitive applications, we recommend that you use data disks instead of the operating system disk.</span></span> <span data-ttu-id="87d1f-171">Reportez-vous à la section sur les disques de données ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="87d1f-171">See the section on Data Disks below.</span></span>

### <a name="temporary-disk"></a><span data-ttu-id="87d1f-172">Disque temporaire</span><span class="sxs-lookup"><span data-stu-id="87d1f-172">Temporary disk</span></span>

<span data-ttu-id="87d1f-173">Le disque de stockage temporaire, désigné par la lettre de **D**:, n’est pas persistant dans Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="87d1f-173">The temporary storage drive, labeled as the **D**: drive, is not persisted to Azure blob storage.</span></span> <span data-ttu-id="87d1f-174">Ne stockez pas vos fichiers de base de données utilisateur ou vos fichiers journaux des transactions utilisateur sur le lecteur **D**:.</span><span class="sxs-lookup"><span data-stu-id="87d1f-174">Do not store your user database files or user transaction log files on the **D**: drive.</span></span>

<span data-ttu-id="87d1f-175">Sur les machines virtuelles de série D, Dv2 et G, le lecteur temporaire réside sur un disque SSD.</span><span class="sxs-lookup"><span data-stu-id="87d1f-175">For D-series, Dv2-series, and G-series VMs, the temporary drive on these VMs is SSD-based.</span></span> <span data-ttu-id="87d1f-176">Si votre charge de travail exploite intensivement TempDB (par exemple, pour les objets temporaires ou des jointures complexes), le stockage de TempDB sur le lecteur **D** peut entraîner un débit plus élevé et réduire la latence de TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-176">If your workload makes heavy use of TempDB (e.g. for temporary objects or complex joins), storing TempDB on the **D** drive could result in higher TempDB throughput and lower TempDB latency.</span></span>

<span data-ttu-id="87d1f-177">Pour les machines virtuelles qui prennent en charge le stockage Premium (de série DS, DSv2 et GS), nous vous recommandons de stocker TempDB sur un disque qui prend en charge le stockage Premium avec la mise en cache en lecture activée.</span><span class="sxs-lookup"><span data-stu-id="87d1f-177">For VMs that support Premium Storage (DS-series, DSv2-series, and GS-series), we recommend storing TempDB on a disk that supports Premium Storage with read caching enabled.</span></span> <span data-ttu-id="87d1f-178">Il existe une exception à cette recommandation : si votre utilisation de TempDB est intensive en écriture, vous pouvez obtenir des performances supérieures en stockant TempDB sur le lecteur **D** local, qui est également un disque SSD sur ces tailles de machines.</span><span class="sxs-lookup"><span data-stu-id="87d1f-178">There is one exception to this recommendation; if your TempDB usage is write-intensive, you can achieve higher performance by storing TempDB on the local **D** drive, which is also SSD-based on these machine sizes.</span></span>

### <a name="data-disks"></a><span data-ttu-id="87d1f-179">Disques de données</span><span class="sxs-lookup"><span data-stu-id="87d1f-179">Data disks</span></span>

* <span data-ttu-id="87d1f-180">**Utilisation de disques de données pour les données et les fichiers journaux** : utilisez au moins 2 [disques P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) de stockage Premium, l’un pour contenir le ou les fichiers journaux et l’autre pour contenir les données, ainsi que le ou les fichiers TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-180">**Use data disks for data and log files**: At a minimum, use 2 Premium Storage [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) where one disk contains the log file(s) and the other contains the data and TempDB file(s).</span></span> <span data-ttu-id="87d1f-181">Chaque disque de stockage Premium fournit un nombre d’opérations d’E/S par seconde et une bande passante (Mo/s) en fonction de sa taille, comme décrit dans l’article suivant : [Utilisation du stockage Premium pour les disques](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-181">Each Premium Storage disk provides a number of IOPs and bandwidth (MB/s) depending on its size, as described in the following article: [Using Premium Storage for Disks](../../../storage/common/storage-premium-storage.md).</span></span>

* <span data-ttu-id="87d1f-182">**Entrelacement de disques**: pour augmenter le débit, vous pouvez ajouter des disques de données supplémentaires et utiliser l’entrelacement de disques.</span><span class="sxs-lookup"><span data-stu-id="87d1f-182">**Disk Striping**: For more throughput, you can add additional data disks and use Disk Striping.</span></span> <span data-ttu-id="87d1f-183">Pour déterminer le nombre de disques de données, vous devez analyser le nombre d’opérations d’E/S par seconde et de bande passante disponibles pour vos fichiers journaux, vos données et vos fichiers TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-183">To determine the number of data disks, you need to analyze the number of IOPS and bandwidth required for your log file(s), and for your data and TempDB file(s).</span></span> <span data-ttu-id="87d1f-184">Notez que les différentes tailles de machine virtuelle sont associées à des limites spécifiques concernant la bande passante et le nombre d’opérations d’E/S par seconde pris en charge. Pour en savoir plus, consultez les tableaux relatifs aux nombre d’opérations d’E/S par seconde en fonction des [tailles de machine virtuelle](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="87d1f-184">Notice that different VM sizes have different limits on the number of IOPs and bandwidth supported, see the tables on IOPS per [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="87d1f-185">Respectez les recommandations suivantes :</span><span class="sxs-lookup"><span data-stu-id="87d1f-185">Use the following guidelines:</span></span>

  * <span data-ttu-id="87d1f-186">Pour Windows 8/Windows Server 2012 ou version ultérieure, utilisez des [espaces de stockage](https://technet.microsoft.com/library/hh831739.aspx) en respectant les consignes suivantes :</span><span class="sxs-lookup"><span data-stu-id="87d1f-186">For Windows 8/Windows Server 2012 or later, use [Storage Spaces](https://technet.microsoft.com/library/hh831739.aspx) with the following guidelines:</span></span>

      1. <span data-ttu-id="87d1f-187">Définissez l’intervalle (taille de bande) sur 64 Ko (65 536 octets) pour les charges de travail OLTP et sur 256 Ko (262 144 octets) pour les charges de travail d’entrepôt de données, afin d’éviter qu’un alignement incorrect de la partition n’affecte les performances.</span><span class="sxs-lookup"><span data-stu-id="87d1f-187">Set the interleave (stripe size) to 64 KB (65536 bytes) for OLTP workloads and 256 KB (262144 bytes) for data warehousing workloads to avoid performance impact due to partition misalignment.</span></span> <span data-ttu-id="87d1f-188">Ces paramètres doivent être définis avec PowerShell.</span><span class="sxs-lookup"><span data-stu-id="87d1f-188">This must be set with PowerShell.</span></span>
      1. <span data-ttu-id="87d1f-189">Nombre de colonnes définies = nombre de disques physiques.</span><span class="sxs-lookup"><span data-stu-id="87d1f-189">Set column count = number of physical disks.</span></span> <span data-ttu-id="87d1f-190">Utilisez PowerShell lorsque vous configurez plus de 8 disques (et non l’interface utilisateur du gestionnaire de serveur).</span><span class="sxs-lookup"><span data-stu-id="87d1f-190">Use PowerShell when configuring more than 8 disks (not Server Manager UI).</span></span> 

    <span data-ttu-id="87d1f-191">Par exemple, le PowerShell suivant crée un nouveau pool de stockage avec un entrelacement de 64 Ko et 2 colonnes :</span><span class="sxs-lookup"><span data-stu-id="87d1f-191">For example, the following PowerShell creates a new storage pool with the interleave size to 64 KB and the number of columns to 2:</span></span>

    ```powershell
    $PoolCount = Get-PhysicalDisk -CanPool $True
    $PhysicalDisks = Get-PhysicalDisk | Where-Object {$_.FriendlyName -like "*2" -or $_.FriendlyName -like "*3"}

    New-StoragePool -FriendlyName "DataFiles" -StorageSubsystemFriendlyName "Storage Spaces*" -PhysicalDisks $PhysicalDisks | New-VirtualDisk -FriendlyName "DataFiles" -Interleave 65536 -NumberOfColumns 2 -ResiliencySettingName simple –UseMaximumSize |Initialize-Disk -PartitionStyle GPT -PassThru |New-Partition -AssignDriveLetter -UseMaximumSize |Format-Volume -FileSystem NTFS -NewFileSystemLabel "DataDisks" -AllocationUnitSize 65536 -Confirm:$false 
    ```

  * <span data-ttu-id="87d1f-192">Pour Windows 2008 R2 ou version antérieure, vous pouvez utiliser des disques dynamiques (volumes entrelacés de système d’exploitation). La taille de l’entrelacement restera 64 Ko.</span><span class="sxs-lookup"><span data-stu-id="87d1f-192">For Windows 2008 R2 or earlier, you can use dynamic disks (OS striped volumes) and the stripe size is always 64 KB.</span></span> <span data-ttu-id="87d1f-193">Remarque : cette option est déconseillée à partir des versions Windows 8/Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="87d1f-193">Note that this option is deprecated as of Windows 8/Windows Server 2012.</span></span> <span data-ttu-id="87d1f-194">Pour plus d’informations, consultez les instructions du support dans [Transition du service de disque virtuel vers l’API de gestion de stockage Windows](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-194">For information, see the support statement at [Virtual Disk Service is transitioning to Windows Storage Management API](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span></span>

  * <span data-ttu-id="87d1f-195">Si votre charge de travail ne génère pas intensivement de journaux et ne nécessite pas d’opérations d’E/S par seconde dédiées, vous pouvez configurer un seul pool de stockage.</span><span class="sxs-lookup"><span data-stu-id="87d1f-195">If your workload is not log intensive and does not need dedicated IOPs, you can configure just one storage pool.</span></span> <span data-ttu-id="87d1f-196">Sinon, créez deux pools de stockage, un pour les fichiers journaux et un autre pour les fichiers de données et TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-196">Otherwise, create two storage pools, one for the log file(s) and another storage pool for the data file(s) and TempDB.</span></span> <span data-ttu-id="87d1f-197">Déterminez le nombre de disques associés à chaque pool de stockage en fonction de vos attentes en matière de charge.</span><span class="sxs-lookup"><span data-stu-id="87d1f-197">Determine the number of disks associated with each storage pool based on your load expectations.</span></span> <span data-ttu-id="87d1f-198">N’oubliez pas que les différentes tailles de machines virtuelles autorisent différents nombres de disques de données attachés.</span><span class="sxs-lookup"><span data-stu-id="87d1f-198">Keep in mind that different VM sizes allow different numbers of attached data disks.</span></span> <span data-ttu-id="87d1f-199">Pour plus d’informations, consultez [Tailles des machines virtuelles](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="87d1f-199">For more information, see [Sizes for Virtual Machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

  * <span data-ttu-id="87d1f-200">Si vous n’utilisez pas le stockage Premium (scénarios de développement/de test), nous vous recommandons d’ajouter le nombre maximal de disques de données pris en charge par la [taille de votre machine virtuelle](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) et d’utiliser l’entrelacement de disques.</span><span class="sxs-lookup"><span data-stu-id="87d1f-200">If you are not using Premium Storage (dev/test scenarios), the recommendation is to add the maximum number of data disks supported by your [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and use Disk Striping.</span></span>

* <span data-ttu-id="87d1f-201">**Stratégie de mise en cache**: pour les disques de données de stockage Premium, activez la mise en cache de lecture uniquement sur les disques de données hébergeant vos fichiers de données et TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-201">**Caching policy**: For Premium Storage data disks, enable read caching on the data disks hosting your data files and TempDB only.</span></span> <span data-ttu-id="87d1f-202">Si vous n’utilisez pas Premium Storage, n’activez aucune mise en cache sur les disques de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-202">If you are not using Premium Storage, do not enable any caching on any data disks.</span></span> <span data-ttu-id="87d1f-203">Pour obtenir des instructions sur la configuration de la mise en cache des disques, consultez les rubriques suivantes : [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) et [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-203">For instructions on configuring disk caching, see the following topics: [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) and [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span></span>

  > [!WARNING]
  > <span data-ttu-id="87d1f-204">Arrêtez le service SQL Server lorsque vous modifiez le paramètre de cache de disques de machines virtuelles Azure pour éviter toute altération de la base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-204">Stop the SQL Server service when changing the cache setting of Azure VM disks to avoid the possibility of any database corruption.</span></span>

* <span data-ttu-id="87d1f-205">**Taille d’unité d’allocation NTFS**: lors du formatage du disque de données, il est recommandé d’utiliser une taille d’unité d’allocation de 64 Ko pour les fichiers de données et les fichiers journaux, ainsi que pour TempDB.</span><span class="sxs-lookup"><span data-stu-id="87d1f-205">**NTFS allocation unit size**: When formatting the data disk, it is recommended that you use a 64-KB allocation unit size for data and log files as well as TempDB.</span></span>

* <span data-ttu-id="87d1f-206">**Meilleures pratiques de gestion des disques**: lors de la suppression d’un disque de données ou de la modification de son type de cache, arrêtez le service SQL Server.</span><span class="sxs-lookup"><span data-stu-id="87d1f-206">**Disk management best practices**: When removing a data disk or changing its cache type, stop the SQL Server service during the change.</span></span> <span data-ttu-id="87d1f-207">Lorsque les paramètres de mise en cache sont modifiés sur le disque du système d’exploitation, Azure arrête la machine virtuelle, modifie le type de cache et redémarre la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="87d1f-207">When the caching settings are changed on the OS disk, Azure stops the VM, changes the cache type, and restarts the VM.</span></span> <span data-ttu-id="87d1f-208">Lorsque les paramètres du cache d’un disque de données sont modifiés, la machine virtuelle n’est pas arrêtée, mais le disque de données est détaché de la machine virtuelle lors de la modification, puis rattaché.</span><span class="sxs-lookup"><span data-stu-id="87d1f-208">When the cache settings of a data disk are changed, the VM is not stopped, but the data disk is detached from the VM during the change and then reattached.</span></span>

  > [!WARNING]
  > <span data-ttu-id="87d1f-209">Si le service SQL Server n’est pas arrêté au cours de ces opérations, cela peut provoquer une altération de la base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-209">Failure to stop the SQL Server service during these operations can cause database corruption.</span></span>

## <a name="io-guidance"></a><span data-ttu-id="87d1f-210">Recommandations liées aux E/S</span><span class="sxs-lookup"><span data-stu-id="87d1f-210">I/O guidance</span></span>

* <span data-ttu-id="87d1f-211">Pour obtenir les meilleurs résultats avec Premium Storage, vous devez paralléliser vos applications et vos demandes.</span><span class="sxs-lookup"><span data-stu-id="87d1f-211">The best results with Premium Storage are achieved when you parallelize your application and requests.</span></span> <span data-ttu-id="87d1f-212">Premium Storage est conçu pour les scénarios où la profondeur de file d’attente est supérieure à 1. Les améliorations seront donc minimes ou inexistantes pour les demandes de série à thread unique (même si elles sont gourmandes en stockage).</span><span class="sxs-lookup"><span data-stu-id="87d1f-212">Premium Storage is designed for scenarios where the IO queue depth is greater than 1, so you will see little or no performance gains for single-threaded serial requests (even if they are storage intensive).</span></span> <span data-ttu-id="87d1f-213">Par exemple, cela peut affecter les résultats des tests à thread unique des outils d’analyses de performances, par exemple SQLIO.</span><span class="sxs-lookup"><span data-stu-id="87d1f-213">For example, this could impact the single-threaded test results of performance analysis tools, such as SQLIO.</span></span>

* <span data-ttu-id="87d1f-214">Envisagez d’utiliser un [compression des pages de base de données](https://msdn.microsoft.com/library/cc280449.aspx) , car elle peut améliorer les performances de charges de travail gourmandes en E/S.</span><span class="sxs-lookup"><span data-stu-id="87d1f-214">Consider using [database page compression](https://msdn.microsoft.com/library/cc280449.aspx) as it can help improve performance of I/O intensive workloads.</span></span> <span data-ttu-id="87d1f-215">Toutefois, la compression de données peut augmenter la consommation d’UC sur le serveur de base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-215">However, the data compression might increase the CPU consumption on the database server.</span></span>

* <span data-ttu-id="87d1f-216">Envisagez d’activer l’initialisation instantanée des fichiers pour réduire le temps requis pour l’allocation initiale des fichiers.</span><span class="sxs-lookup"><span data-stu-id="87d1f-216">Consider enabling instant file initialization to reduce the time that is required for initial file allocation.</span></span> <span data-ttu-id="87d1f-217">Pour tirer parti de l’initialisation instantanée des fichiers, vous devez accorder l’autorisation SE_MANAGE_VOLUME_NAME au compte de service SQL Server (MSSQLSERVER) et l’ajouter à la stratégie de sécurité **Effectuer des tâches de maintenance sur les volumes**.</span><span class="sxs-lookup"><span data-stu-id="87d1f-217">To take advantage of instant file initialization, you grant the SQL Server (MSSQLSERVER) service account with SE_MANAGE_VOLUME_NAME and add it to the **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="87d1f-218">Si vous utilisez une image de plateforme SQL Server pour Azure, le compte de service par défaut (NT Service\MSSQLSERVER) n’est pas ajouté à la stratégie de sécurité **Effectuer des tâches de maintenance sur les volumes**.</span><span class="sxs-lookup"><span data-stu-id="87d1f-218">If you are using a SQL Server platform image for Azure, the default service account (NT Service\MSSQLSERVER) isn’t added to the **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="87d1f-219">En d’autres termes, l’initialisation instantanée des fichiers n’est pas activée dans une image de plateforme SQL Server pour Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-219">In other words, instant file initialization is not enabled in a SQL Server Azure platform image.</span></span> <span data-ttu-id="87d1f-220">Après avoir ajouté le compte de service SQL Server à la stratégie de sécurité **Effectuer les tâches de maintenance de volume** , redémarrez le service SQL Server.</span><span class="sxs-lookup"><span data-stu-id="87d1f-220">After adding the SQL Server service account to the **Perform Volume Maintenance Tasks** security policy, restart the SQL Server service.</span></span> <span data-ttu-id="87d1f-221">Des considérations de sécurité liées à l’utilisation de cette fonctionnalité peuvent exister.</span><span class="sxs-lookup"><span data-stu-id="87d1f-221">There could be security considerations for using this feature.</span></span> <span data-ttu-id="87d1f-222">Pour plus d’informations, consultez [Initialisation des fichiers de base de données](https://msdn.microsoft.com/library/ms175935.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-222">For more information, see [Database File Initialization](https://msdn.microsoft.com/library/ms175935.aspx).</span></span>

* <span data-ttu-id="87d1f-223">**autogrow** ) est considérée comme un simple plan d’urgence en cas de croissance plus rapide que prévu.</span><span class="sxs-lookup"><span data-stu-id="87d1f-223">**autogrow** is considered to be merely a contingency for unexpected growth.</span></span> <span data-ttu-id="87d1f-224">Ne gérez pas la croissance de vos données et journaux quotidiennement avec la croissance automatique.</span><span class="sxs-lookup"><span data-stu-id="87d1f-224">Do not manage your data and log growth on a day-to-day basis with autogrow.</span></span> <span data-ttu-id="87d1f-225">En cas d’utilisation de la croissance automatique, augmentez préalablement le fichier à l’aide du commutateur Taille.</span><span class="sxs-lookup"><span data-stu-id="87d1f-225">If autogrow is used, pre-grow the file using the Size switch.</span></span>

* <span data-ttu-id="87d1f-226">Vérifiez que la fonctionnalité de réduction automatique ( **autoshrink** ) est désactivée afin d’éviter une surcharge inutile susceptible d’affecter négativement les performances.</span><span class="sxs-lookup"><span data-stu-id="87d1f-226">Make sure **autoshrink** is disabled to avoid unnecessary overhead that can negatively affect performance.</span></span>

* <span data-ttu-id="87d1f-227">Déplacer toutes les bases de données vers des disques de données, y compris les bases de données système.</span><span class="sxs-lookup"><span data-stu-id="87d1f-227">Move all databases to data disks, including system databases.</span></span> <span data-ttu-id="87d1f-228">Pour plus d’informations, consultez [Déplacer des bases de données système](https://msdn.microsoft.com/library/ms345408.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-228">For more information, see [Move System Databases](https://msdn.microsoft.com/library/ms345408.aspx).</span></span>

* <span data-ttu-id="87d1f-229">Déplacer les répertoires des journaux d’erreurs et des fichiers de trace SQL Server vers des disques de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-229">Move SQL Server error log and trace file directories to data disks.</span></span> <span data-ttu-id="87d1f-230">Cette opération peut être effectuée dans le Gestionnaire de configuration SQL Server en double-cliquant sur l’instance de SQL Server et en sélectionnant des propriétés.</span><span class="sxs-lookup"><span data-stu-id="87d1f-230">This can be done in SQL Server Configuration Manager by right-clicking your SQL Server instance and selecting properties.</span></span> <span data-ttu-id="87d1f-231">Il est possible de modifier les paramètres du fichier journal et du fichier de trace sous l’onglet **Paramètres de démarrage** . Le répertoire de vidage est spécifié sous l’onglet **Avancé** . La capture d’écran suivante indique où rechercher le paramètre de démarrage du journal des erreurs.</span><span class="sxs-lookup"><span data-stu-id="87d1f-231">The error log and trace file settings can be changed in the **Startup Parameters** tab. The Dump Directory is specified in the **Advanced** tab. The following screenshot shows where to look for the error log startup parameter.</span></span>

    ![Capture d’écran du journal des erreurs SQL](./media/virtual-machines-windows-sql-performance/sql_server_error_log_location.png)

* <span data-ttu-id="87d1f-233">Configurez les emplacements par défaut du fichier de sauvegarde et du fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="87d1f-233">Setup default backup and database file locations.</span></span> <span data-ttu-id="87d1f-234">Utilisez les recommandations de cette rubrique, puis apportez les modifications souhaitées dans la fenêtre Propriétés du serveur.</span><span class="sxs-lookup"><span data-stu-id="87d1f-234">Use the recommendations in this topic, and make the changes in the Server properties window.</span></span> <span data-ttu-id="87d1f-235">Pour obtenir des instructions, consultez [Afficher ou modifier les emplacements par défaut des fichiers de données et des fichiers journaux (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-235">For instructions, see [View or Change the Default Locations for Data and Log Files (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span></span> <span data-ttu-id="87d1f-236">La capture d’écran suivante montre comment effectuer ces modifications.</span><span class="sxs-lookup"><span data-stu-id="87d1f-236">The following screenshot demonstrates where to make these changes.</span></span>

    ![Journal des données et fichiers de sauvegarde SQL](./media/virtual-machines-windows-sql-performance/sql_server_default_data_log_backup_locations.png)
* <span data-ttu-id="87d1f-238">Activez les pages verrouillées pour réduire les activités d’E/S et de pagination.</span><span class="sxs-lookup"><span data-stu-id="87d1f-238">Enable locked pages to reduce IO and any paging activities.</span></span> <span data-ttu-id="87d1f-239">Pour plus d’informations, consultez [Activer l’option Lock Pages in Memory (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-239">For more information, see [Enable the Lock Pages in Memory Option (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span></span>

* <span data-ttu-id="87d1f-240">Si vous exécutez SQL Server 2012, installez la mise à jour cumulative 10 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="87d1f-240">If you are running SQL Server 2012, install Service Pack 1 Cumulative Update 10.</span></span> <span data-ttu-id="87d1f-241">Elle contient le correctif qui permet de résoudre les problèmes de performances d’E/S lorsque vous exécutez une sélection dans l’instruction de table temporaire dans SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="87d1f-241">This update contains the fix for poor performance on I/O when you execute select into temporary table statement in SQL Server 2012.</span></span> <span data-ttu-id="87d1f-242">Pour plus d’informations, consultez cet [article de la Base de connaissances](http://support.microsoft.com/kb/2958012).</span><span class="sxs-lookup"><span data-stu-id="87d1f-242">For information, see this [knowledge base article](http://support.microsoft.com/kb/2958012).</span></span>

* <span data-ttu-id="87d1f-243">Envisagez de compresser tous les fichiers de données lors des transferts vers et depuis Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-243">Consider compressing any data files when transferring in/out of Azure.</span></span>

## <a name="feature-specific-guidance"></a><span data-ttu-id="87d1f-244">Recommandations liées aux fonctionnalités spécifiques</span><span class="sxs-lookup"><span data-stu-id="87d1f-244">Feature specific guidance</span></span>

<span data-ttu-id="87d1f-245">Certains déploiements peuvent bénéficier de plus grands avantages en termes de performances à l’aide de techniques de configuration avancées.</span><span class="sxs-lookup"><span data-stu-id="87d1f-245">Some deployments may achieve additional performance benefits using more advanced configuration techniques.</span></span> <span data-ttu-id="87d1f-246">La liste suivante présente certaines fonctionnalités SQL Server qui peuvent vous aider à améliorer les performances :</span><span class="sxs-lookup"><span data-stu-id="87d1f-246">The following list highlights some SQL Server features that can help you to achieve better performance:</span></span>

* <span data-ttu-id="87d1f-247">**Sauvegarde vers le stockage Azure**: lors de la création de sauvegardes pour un serveur SQL Server s’exécutant sur des machines virtuelles Azure, vous pouvez vous référer à [Sauvegarde de SQL Server vers une URL](https://msdn.microsoft.com/library/dn435916.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-247">**Backup to Azure storage**: When performing backups for SQL Server running in Azure virtual machines, you can use [SQL Server Backup to URL](https://msdn.microsoft.com/library/dn435916.aspx).</span></span> <span data-ttu-id="87d1f-248">Cette fonctionnalité est disponible à partir de SQL Server 2012 SP1 CU2, et recommandée pour la sauvegarde vers les disques de données attachés.</span><span class="sxs-lookup"><span data-stu-id="87d1f-248">This feature is available starting with SQL Server 2012 SP1 CU2 and recommended for backing up to the attached data disks.</span></span> <span data-ttu-id="87d1f-249">Lors de la sauvegarde ou la restauration vers/depuis Azure Storage, suivez les recommandations indiquées dans [Meilleures pratiques et résolution des problèmes pour la sauvegarde de SQL Server vers une URL et Restauration à partir de sauvegardes stockées dans Azure Storage](https://msdn.microsoft.com/library/jj919149.aspx).</span><span class="sxs-lookup"><span data-stu-id="87d1f-249">When you backup/restore to/from Azure storage, follow the recommendations provided at [SQL Server Backup to URL Best Practices and Troubleshooting and Restoring from Backups Stored in Azure Storage](https://msdn.microsoft.com/library/jj919149.aspx).</span></span> <span data-ttu-id="87d1f-250">Vous pouvez également automatiser ces sauvegardes en utilisant la [Sauvegarde automatisée pour SQL Server dans les machines virtuelles Azure](virtual-machines-windows-sql-automated-backup.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-250">You can also automate these backups using [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>

    <span data-ttu-id="87d1f-251">Pour les versions antérieures à SQL Server 2012, vous pouvez utiliser l’ [outil de sauvegarde SQL Server vers Azure](https://www.microsoft.com/download/details.aspx?id=40740).</span><span class="sxs-lookup"><span data-stu-id="87d1f-251">Prior to SQL Server 2012, you can use [SQL Server Backup to Azure Tool](https://www.microsoft.com/download/details.aspx?id=40740).</span></span> <span data-ttu-id="87d1f-252">Cet outil peut augmenter le débit de sauvegarde à l’aide de plusieurs cibles d’entrelacement de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="87d1f-252">This tool can help to increase backup throughput using multiple backup stripe targets.</span></span>

* <span data-ttu-id="87d1f-253">**Fichiers de données SQL Server dans Azure**: cette nouvelle fonctionnalité, nommée [Fichiers de données SQL Server dans Azure](https://msdn.microsoft.com/library/dn385720.aspx), est disponible à partir de SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="87d1f-253">**SQL Server Data Files in Azure**: This new feature, [SQL Server Data Files in Azure](https://msdn.microsoft.com/library/dn385720.aspx), is available starting with SQL Server 2014.</span></span> <span data-ttu-id="87d1f-254">L’exécution de SQL Server avec des fichiers de données dans Azure offre des caractéristiques de performances comparables à l’utilisation de disques de données Azure.</span><span class="sxs-lookup"><span data-stu-id="87d1f-254">Running SQL Server with data files in Azure demonstrates comparable performance characteristics as using Azure data disks.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87d1f-255">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="87d1f-255">Next Steps</span></span>

<span data-ttu-id="87d1f-256">Pour les meilleures pratiques de sécurité, consultez [Considérations relatives à la sécurité de SQL Server sur les machines virtuelles Azure](virtual-machines-windows-sql-security.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-256">For security best practices, see [Security Considerations for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-security.md).</span></span>

<span data-ttu-id="87d1f-257">Consultez d’autres rubriques relatives aux machines virtuelles avec SQL Server à la page [Vue d’ensemble de SQL Server sur les machines virtuelles Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="87d1f-257">Review other SQL Server Virtual Machine topics at [SQL Server on Azure Virtual Machines Overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
