---
title: "Groupes de disponibilité SQL Server - Machines virtuelles Azure - Conditions préalables | Microsoft Docs"
description: "Ce didacticiel montre comment configurer les conditions préalables pour la création d’un groupe de disponibilité SQL Server AlwaysOn sur des machines virtuelles Azure."
services: virtual-machines
documentationCenter: na
authors: MikeRayMSFT
manager: jhubbard
editor: monicar
tags: azure-service-management
ms.assetid: c492db4c-3faa-4645-849f-5a1a663be55a
ms.service: virtual-machines-sql
ms.devlang: na
ms.custom: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/09/2017
ms.author: mikeray
ms.openlocfilehash: 3d508877928e033f24dae62c1042745ea7250033
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="complete-the-prerequisites-for-creating-always-on-availability-groups-on-azure-virtual-machines"></a><span data-ttu-id="bf714-103">Remplir les conditions préalables pour la création de groupes de disponibilité AlwaysOn sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="bf714-103">Complete the prerequisites for creating Always On availability groups on Azure virtual machines</span></span>

<span data-ttu-id="bf714-104">Ce didacticiel montre comment remplir les conditions préalables pour la création d’un [groupe de disponibilité SQL Server AlwaysOn sur des machines virtuelles Azure](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="bf714-104">This tutorial shows how to complete the prerequisites for creating a [SQL Server Always On availability group on Azure virtual machines (VMs)](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span></span> <span data-ttu-id="bf714-105">Une fois les conditions préalables remplies, vous disposez d’un contrôleur de domaine, de deux machines virtuelles SQL Server et d’un serveur témoin dans un même groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-105">When you've finished the prerequisites, you have a domain controller, two SQL Server VMs, and a witness server in a single resource group.</span></span>

<span data-ttu-id="bf714-106">**Durée estimée** : remplir les conditions préalables peut prendre plusieurs heures.</span><span class="sxs-lookup"><span data-stu-id="bf714-106">**Time estimate**: It might take a couple of hours to complete the prerequisites.</span></span> <span data-ttu-id="bf714-107">La majeure partie de ce temps est consacré à la création de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="bf714-107">Much of this time is spent creating virtual machines.</span></span>

<span data-ttu-id="bf714-108">Le schéma suivant illustre ce que vous allez créer dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="bf714-108">The following diagram illustrates what you build in the tutorial.</span></span>

![Groupe de disponibilité](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/00-EndstateSampleNoELB.png)

## <a name="review-availability-group-documentation"></a><span data-ttu-id="bf714-110">Consulter la documentation sur le groupe de disponibilité</span><span class="sxs-lookup"><span data-stu-id="bf714-110">Review availability group documentation</span></span>

<span data-ttu-id="bf714-111">Ce didacticiel suppose que vous avez des notions de base sur les groupes de disponibilité AlwaysOn SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-111">This tutorial assumes that you have a basic understanding of SQL Server Always On availability groups.</span></span> <span data-ttu-id="bf714-112">Si vous n’êtes pas familiarisé avec cette technologie, consultez [Vue d’ensemble des groupes de disponibilité AlwaysOn (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span><span class="sxs-lookup"><span data-stu-id="bf714-112">If you're not familiar with this technology, see [Overview of Always On Availability Groups (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span></span>


## <a name="create-an-azure-account"></a><span data-ttu-id="bf714-113">Création d'un compte Azure</span><span class="sxs-lookup"><span data-stu-id="bf714-113">Create an Azure account</span></span>
<span data-ttu-id="bf714-114">Vous avez besoin d’un compte Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-114">You need an Azure account.</span></span> <span data-ttu-id="bf714-115">Vous pouvez [ouvrir un compte Azure gratuit](/pricing/free-trial/?WT.mc_id=A261C142F) ou [activer les avantages de l’abonnement à Visual Studio](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span><span class="sxs-lookup"><span data-stu-id="bf714-115">You can [open a free Azure account](/pricing/free-trial/?WT.mc_id=A261C142F) or [activate Visual Studio subscriber benefits](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span></span>

## <a name="create-a-resource-group"></a><span data-ttu-id="bf714-116">Créer un groupe de ressources</span><span class="sxs-lookup"><span data-stu-id="bf714-116">Create a resource group</span></span>
1. <span data-ttu-id="bf714-117">Connectez-vous au [portail Azure](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="bf714-117">Sign in to the [Azure portal](http://portal.azure.com).</span></span>
2. <span data-ttu-id="bf714-118">Cliquez sur  **+**  pour créer un nouvel objet dans le portail.</span><span class="sxs-lookup"><span data-stu-id="bf714-118">Click **+** to create a new object in the portal.</span></span>

   ![Nouvel objet](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-portalplus.png)

3. <span data-ttu-id="bf714-120">Tapez **Groupe de ressources** dans la fenêtre de recherche **Marketplace**.</span><span class="sxs-lookup"><span data-stu-id="bf714-120">Type **resource group** in the **Marketplace** search window.</span></span>

   ![Groupe de ressources](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroupsymbol.png)
4. <span data-ttu-id="bf714-122">Cliquez sur **Groupe de ressources**.</span><span class="sxs-lookup"><span data-stu-id="bf714-122">Click **Resource group**.</span></span>
5. <span data-ttu-id="bf714-123">Cliquez sur **Create**.</span><span class="sxs-lookup"><span data-stu-id="bf714-123">Click **Create**.</span></span>
6. <span data-ttu-id="bf714-124">Dans le panneau **Groupe de ressources**, sous **Nom du groupe de ressources**, nommez le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-124">On the **Resource group** blade, under **Resource group name**, type a name for the resource group.</span></span> <span data-ttu-id="bf714-125">Par exemple, tapez **sql-ha-rg**.</span><span class="sxs-lookup"><span data-stu-id="bf714-125">For example, type **sql-ha-rg**.</span></span>
7. <span data-ttu-id="bf714-126">Si vous avez plusieurs abonnements Azure, vérifiez qu’il s’agit bien de celui dans lequel vous souhaitez créer le groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="bf714-126">If you have multiple Azure subscriptions, verify that the subscription is the Azure subscription that you want to create the availability group in.</span></span>
8. <span data-ttu-id="bf714-127">Sélectionnez un emplacement.</span><span class="sxs-lookup"><span data-stu-id="bf714-127">Select a location.</span></span> <span data-ttu-id="bf714-128">L’emplacement est la région Azure où vous souhaitez créer le groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="bf714-128">The location is the Azure region where you want to create the availability group.</span></span> <span data-ttu-id="bf714-129">Pour ce didacticiel, nous allons générer toutes les ressources dans un même emplacement Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-129">For this tutorial, we're going to build all resources in one Azure location.</span></span>
9. <span data-ttu-id="bf714-130">Assurez-vous que l’option **Épingler au tableau de bord** est activée.</span><span class="sxs-lookup"><span data-stu-id="bf714-130">Verify that **Pin to dashboard** is checked.</span></span> <span data-ttu-id="bf714-131">Ce paramètre facultatif place un raccourci vers le groupe de ressources sur le tableau de bord du Portail Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-131">This optional setting places a shortcut for the resource group on the Azure portal dashboard.</span></span>

   ![Groupe de ressources](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroup.png)

10. <span data-ttu-id="bf714-133">Cliquez sur **Créer** pour créer le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-133">Click **Create** to create the resource group.</span></span>

<span data-ttu-id="bf714-134">Azure crée le groupe de ressources et épingle un raccourci vers celui-ci dans le portail.</span><span class="sxs-lookup"><span data-stu-id="bf714-134">Azure creates the resource group and pins a shortcut to the resource group in the portal.</span></span>

## <a name="create-the-network-and-subnets"></a><span data-ttu-id="bf714-135">Créer un réseau et des sous-réseaux</span><span class="sxs-lookup"><span data-stu-id="bf714-135">Create the network and subnets</span></span>
<span data-ttu-id="bf714-136">L’étape suivante consiste à créer les réseaux et les sous-réseaux dans le groupe de ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-136">The next step is to create the networks and subnets in the Azure resource group.</span></span>

<span data-ttu-id="bf714-137">La solution utilise un réseau virtuel avec deux sous-réseaux.</span><span class="sxs-lookup"><span data-stu-id="bf714-137">The solution uses one virtual network with two subnets.</span></span> <span data-ttu-id="bf714-138">Pour plus d’informations sur les réseaux dans Azure, consultez la page [Présentation du réseau virtuel](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bf714-138">The [Virtual network overview](../../../virtual-network/virtual-networks-overview.md) provides more information about networks in Azure.</span></span>

<span data-ttu-id="bf714-139">Pour créer le réseau virtuel :</span><span class="sxs-lookup"><span data-stu-id="bf714-139">To create the virtual network:</span></span>

1. <span data-ttu-id="bf714-140">Dans le portail Azure de votre groupe de ressources, cliquez sur **+ Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="bf714-140">In the Azure portal, in your resource group, click **+ Add**.</span></span> <span data-ttu-id="bf714-141">Azure ouvre le panneau **Tout** .</span><span class="sxs-lookup"><span data-stu-id="bf714-141">Azure opens the **Everything** blade.</span></span>

   ![Nouvel élément](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/02-newiteminrg.png)
2. <span data-ttu-id="bf714-143">Recherchez **Réseau virtuel**.</span><span class="sxs-lookup"><span data-stu-id="bf714-143">Search for **virtual network**.</span></span>

     ![Rechercher un réseau virtuel](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/04-findvirtualnetwork.png)
3. <span data-ttu-id="bf714-145">Cliquez sur **Réseau virtuel**.</span><span class="sxs-lookup"><span data-stu-id="bf714-145">Click **Virtual network**.</span></span>
4. <span data-ttu-id="bf714-146">Dans le panneau **Réseau virtuel**, cliquez sur le modèle de déploiement **Resource Manager**, puis sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-146">On the **Virtual network** blade, click the **Resource Manager** deployment model, and then click **Create**.</span></span>

    <span data-ttu-id="bf714-147">Le tableau suivant indique les paramètres relatifs au réseau virtuel :</span><span class="sxs-lookup"><span data-stu-id="bf714-147">The following table shows the settings for the virtual network:</span></span>

   | <span data-ttu-id="bf714-148">**Champ**</span><span class="sxs-lookup"><span data-stu-id="bf714-148">**Field**</span></span> | <span data-ttu-id="bf714-149">Valeur</span><span class="sxs-lookup"><span data-stu-id="bf714-149">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="bf714-150">**Nom**</span><span class="sxs-lookup"><span data-stu-id="bf714-150">**Name**</span></span> |<span data-ttu-id="bf714-151">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="bf714-151">autoHAVNET</span></span> |
   | <span data-ttu-id="bf714-152">**Espace d’adressage**</span><span class="sxs-lookup"><span data-stu-id="bf714-152">**Address space**</span></span> |<span data-ttu-id="bf714-153">10.33.0.0/24</span><span class="sxs-lookup"><span data-stu-id="bf714-153">10.33.0.0/24</span></span> |
   | <span data-ttu-id="bf714-154">**Nom du sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-154">**Subnet name**</span></span> |<span data-ttu-id="bf714-155">Admin</span><span class="sxs-lookup"><span data-stu-id="bf714-155">Admin</span></span> |
   | <span data-ttu-id="bf714-156">**Plage d’adresses de sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-156">**Subnet address range**</span></span> |<span data-ttu-id="bf714-157">10.33.0.0/29</span><span class="sxs-lookup"><span data-stu-id="bf714-157">10.33.0.0/29</span></span> |
   | <span data-ttu-id="bf714-158">**Abonnement**</span><span class="sxs-lookup"><span data-stu-id="bf714-158">**Subscription**</span></span> |<span data-ttu-id="bf714-159">Spécifiez l’abonnement à utiliser.</span><span class="sxs-lookup"><span data-stu-id="bf714-159">Specify the subscription that you intend to use.</span></span> <span data-ttu-id="bf714-160">Le champ **Abonnement** est vide si vous n'avez qu'un seul abonnement.</span><span class="sxs-lookup"><span data-stu-id="bf714-160">**Subscription** is blank if you only have one subscription.</span></span> |
   | <span data-ttu-id="bf714-161">**Groupe de ressources**</span><span class="sxs-lookup"><span data-stu-id="bf714-161">**Resource group**</span></span> |<span data-ttu-id="bf714-162">Choisissez **Utiliser existant** et sélectionnez le nom du groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-162">Choose **Use existing** and pick the name of the resource group.</span></span> |
   | <span data-ttu-id="bf714-163">**Emplacement**</span><span class="sxs-lookup"><span data-stu-id="bf714-163">**Location**</span></span> |<span data-ttu-id="bf714-164">Spécifiez l’emplacement Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-164">Specify the Azure location.</span></span> |

   <span data-ttu-id="bf714-165">Votre espace d’adressage et votre plage d’adresses de sous-réseau peuvent être différents de ceux indiqués dans ce tableau.</span><span class="sxs-lookup"><span data-stu-id="bf714-165">Your address space and subnet address range might be different from the table.</span></span> <span data-ttu-id="bf714-166">En fonction de votre abonnement, le portail suggère un espace d’adressage disponible et la plage d’adresses de sous-réseau correspondante.</span><span class="sxs-lookup"><span data-stu-id="bf714-166">Depending on your subscription, the portal suggests an available address space and corresponding subnet address range.</span></span> <span data-ttu-id="bf714-167">Si vous ne disposez pas d’un espace d’adressage suffisant, utilisez un autre abonnement.</span><span class="sxs-lookup"><span data-stu-id="bf714-167">If no sufficient address space is available, use a different subscription.</span></span>

   <span data-ttu-id="bf714-168">L’exemple utilise le nom de sous-réseau **Admin**. Ce sous-réseau est destiné aux contrôleurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-168">The example uses the subnet name **Admin**. This subnet is for the domain controllers.</span></span>

5. <span data-ttu-id="bf714-169">Cliquez sur **Create**.</span><span class="sxs-lookup"><span data-stu-id="bf714-169">Click **Create**.</span></span>

   ![Configurer le réseau virtuel](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/06-configurevirtualnetwork.png)

<span data-ttu-id="bf714-171">Vous revenez au tableau de bord du portail et Azure vous avertit lorsque le réseau est créé.</span><span class="sxs-lookup"><span data-stu-id="bf714-171">Azure returns you to the portal dashboard and notifies you when the new network is created.</span></span>

### <a name="create-a-second-subnet"></a><span data-ttu-id="bf714-172">Créer un deuxième sous-réseau</span><span class="sxs-lookup"><span data-stu-id="bf714-172">Create a second subnet</span></span>
<span data-ttu-id="bf714-173">Le nouveau réseau virtuel dispose d'un sous-réseau, nommé **Admin**. Les contrôleurs de domaine utilisent ce sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="bf714-173">The new virtual network has one subnet, named **Admin**. The domain controllers use this subnet.</span></span> <span data-ttu-id="bf714-174">Les machines virtuelles SQL Server utilisent un deuxième sous-réseau nommé **SQL**.</span><span class="sxs-lookup"><span data-stu-id="bf714-174">The SQL Server VMs use a second subnet named **SQL**.</span></span> <span data-ttu-id="bf714-175">Pour configurer ce sous-réseau :</span><span class="sxs-lookup"><span data-stu-id="bf714-175">To configure this subnet:</span></span>

1. <span data-ttu-id="bf714-176">Dans votre tableau de bord, cliquez sur le groupe de ressources que vous avez créé, **SQL-HA-RG**.</span><span class="sxs-lookup"><span data-stu-id="bf714-176">On your dashboard, click the resource group that you created, **SQL-HA-RG**.</span></span> <span data-ttu-id="bf714-177">Recherchez le réseau dans le groupe de ressources, sous **Ressources**.</span><span class="sxs-lookup"><span data-stu-id="bf714-177">Locate the network in the resource group under **Resources**.</span></span>

    <span data-ttu-id="bf714-178">Si **SQL-HA-RG** n’est pas visible, cliquez sur **Groupes de ressources** et filtrez les données en fonction du nom du groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-178">If **SQL-HA-RG** isn't visible, find it by clicking **Resource Groups** and filtering by the resource group name.</span></span>
2. <span data-ttu-id="bf714-179">Cliquez sur **autoHAVNET** dans la liste des ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-179">Click **autoHAVNET** on the list of resources.</span></span> <span data-ttu-id="bf714-180">Azure ouvre le panneau de configuration de réseau.</span><span class="sxs-lookup"><span data-stu-id="bf714-180">Azure opens the network configuration blade.</span></span>
3. <span data-ttu-id="bf714-181">Dans le panneau du réseau virtuel **autoHAVNET**, sous **Paramètres**, cliquez sur **Sous-réseaux**.</span><span class="sxs-lookup"><span data-stu-id="bf714-181">On the **autoHAVNET** virtual network blade, under **Settings** , click **Subnets**.</span></span>

    <span data-ttu-id="bf714-182">Vous pouvez voir le sous-réseau que vous avez déjà créé.</span><span class="sxs-lookup"><span data-stu-id="bf714-182">Note the subnet that you already created.</span></span>

   ![Configurer le réseau virtuel](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/07-addsubnet.png)
5. <span data-ttu-id="bf714-184">Créez un deuxième sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="bf714-184">Create a second subnet.</span></span> <span data-ttu-id="bf714-185">Cliquez sur **+ Sous-réseau**.</span><span class="sxs-lookup"><span data-stu-id="bf714-185">Click **+ Subnet**.</span></span>
6. <span data-ttu-id="bf714-186">Dans le panneau **Ajouter un sous-réseau**, configurez le sous-réseau en saisissant **sqlsubnet** sous **Nom**.</span><span class="sxs-lookup"><span data-stu-id="bf714-186">On the **Add subnet** blade, configure the subnet by typing **sqlsubnet** under **Name**.</span></span> <span data-ttu-id="bf714-187">Azure spécifie automatiquement une **plage d’adresses**valide.</span><span class="sxs-lookup"><span data-stu-id="bf714-187">Azure automatically specifies a valid **Address range**.</span></span> <span data-ttu-id="bf714-188">Vérifiez que cette plage d’adresses comporte au moins 10 adresses.</span><span class="sxs-lookup"><span data-stu-id="bf714-188">Verify that this address range has at least 10 addresses in it.</span></span> <span data-ttu-id="bf714-189">Dans un environnement de production, vous pouvez avoir besoin de davantage d’adresses.</span><span class="sxs-lookup"><span data-stu-id="bf714-189">In a production environment, you might require more addresses.</span></span>
7. <span data-ttu-id="bf714-190">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-190">Click **OK**.</span></span>

    ![Configurer le réseau virtuel](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/08-configuresubnet.png)

<span data-ttu-id="bf714-192">Le tableau suivant récapitule les paramètres de configuration du réseau :</span><span class="sxs-lookup"><span data-stu-id="bf714-192">The following table summarizes the network configuration settings:</span></span>

| <span data-ttu-id="bf714-193">**Champ**</span><span class="sxs-lookup"><span data-stu-id="bf714-193">**Field**</span></span> | <span data-ttu-id="bf714-194">Valeur</span><span class="sxs-lookup"><span data-stu-id="bf714-194">Value</span></span> |
| --- | --- |
| <span data-ttu-id="bf714-195">**Nom**</span><span class="sxs-lookup"><span data-stu-id="bf714-195">**Name**</span></span> |<span data-ttu-id="bf714-196">**autoHAVNET**</span><span class="sxs-lookup"><span data-stu-id="bf714-196">**autoHAVNET**</span></span> |
| <span data-ttu-id="bf714-197">**Espace d’adressage**</span><span class="sxs-lookup"><span data-stu-id="bf714-197">**Address space**</span></span> |<span data-ttu-id="bf714-198">Cette valeur dépend des espaces d’adressage disponibles dans votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="bf714-198">This value depends on the available address spaces in your subscription.</span></span> <span data-ttu-id="bf714-199">10.0.0.0/16 est une valeur courante.</span><span class="sxs-lookup"><span data-stu-id="bf714-199">A typical value is 10.0.0.0/16.</span></span> |
| <span data-ttu-id="bf714-200">**Nom du sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-200">**Subnet name**</span></span> |<span data-ttu-id="bf714-201">**admin**</span><span class="sxs-lookup"><span data-stu-id="bf714-201">**admin**</span></span> |
| <span data-ttu-id="bf714-202">**Plage d’adresses de sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-202">**Subnet address range**</span></span> |<span data-ttu-id="bf714-203">Cette valeur dépend des plages d’adresses disponibles dans votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="bf714-203">This value depends on the available address ranges in your subscription.</span></span> <span data-ttu-id="bf714-204">10.0.0.0/24 est une valeur courante.</span><span class="sxs-lookup"><span data-stu-id="bf714-204">A typical value is 10.0.0.0/24.</span></span> |
| <span data-ttu-id="bf714-205">**Nom du sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-205">**Subnet name**</span></span> |<span data-ttu-id="bf714-206">**sqlsubnet**</span><span class="sxs-lookup"><span data-stu-id="bf714-206">**sqlsubnet**</span></span> |
| <span data-ttu-id="bf714-207">**Plage d’adresses de sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-207">**Subnet address range**</span></span> |<span data-ttu-id="bf714-208">Cette valeur dépend des plages d’adresses disponibles dans votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="bf714-208">This value depends on the available address ranges in your subscription.</span></span> <span data-ttu-id="bf714-209">10.0.1.0/24 est une valeur courante.</span><span class="sxs-lookup"><span data-stu-id="bf714-209">A typical value is 10.0.1.0/24.</span></span> |
| <span data-ttu-id="bf714-210">**Abonnement**</span><span class="sxs-lookup"><span data-stu-id="bf714-210">**Subscription**</span></span> |<span data-ttu-id="bf714-211">Spécifiez l’abonnement à utiliser.</span><span class="sxs-lookup"><span data-stu-id="bf714-211">Specify the subscription that you intend to use.</span></span> |
| <span data-ttu-id="bf714-212">**Groupe de ressources**</span><span class="sxs-lookup"><span data-stu-id="bf714-212">**Resource Group**</span></span> |<span data-ttu-id="bf714-213">**SQL-HA-RG**</span><span class="sxs-lookup"><span data-stu-id="bf714-213">**SQL-HA-RG**</span></span> |
| <span data-ttu-id="bf714-214">**Emplacement**</span><span class="sxs-lookup"><span data-stu-id="bf714-214">**Location**</span></span> |<span data-ttu-id="bf714-215">Spécifiez le même emplacement que celui choisi pour le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-215">Specify the same location that you chose for the resource group.</span></span> |

## <a name="create-availability-sets"></a><span data-ttu-id="bf714-216">Créer des groupes à haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="bf714-216">Create availability sets</span></span>

<span data-ttu-id="bf714-217">Avant de créer des machines virtuelles, vous devez créer des groupes à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="bf714-217">Before you create virtual machines, you need to create availability sets.</span></span> <span data-ttu-id="bf714-218">Les groupes à haute disponibilité réduisent le temps d’arrêt lors des événements de maintenance planifiée et non planifiée.</span><span class="sxs-lookup"><span data-stu-id="bf714-218">Availability sets reduce the downtime for planned or unplanned maintenance events.</span></span> <span data-ttu-id="bf714-219">Un groupe à haute disponibilité Azure est un groupe de ressources logique qu’Azure place dans des domaines de mise à jour et d’erreur physiques.</span><span class="sxs-lookup"><span data-stu-id="bf714-219">An Azure availability set is a logical group of resources that Azure places on physical fault domains and update domains.</span></span> <span data-ttu-id="bf714-220">Un domaine d’erreur garantit que les membres du groupe à haute disponibilité disposent de ressources réseau et d’une alimentation distinctes.</span><span class="sxs-lookup"><span data-stu-id="bf714-220">A fault domain ensures that the members of the availability set have separate power and network resources.</span></span> <span data-ttu-id="bf714-221">Un domaine de mise à jour permet de s’assurer que les membres du groupe à haute disponibilité ne sont pas arrêtés simultanément pour maintenance.</span><span class="sxs-lookup"><span data-stu-id="bf714-221">An update domain ensures that members of the availability set aren't brought down for maintenance at the same time.</span></span> <span data-ttu-id="bf714-222">Pour plus d’informations, consultez [Gestion de la disponibilité des machines virtuelles](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="bf714-222">For more information, see [Manage the availability of virtual machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="bf714-223">Vous avez besoin de deux groupes à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="bf714-223">You need two availability sets.</span></span> <span data-ttu-id="bf714-224">L’un pour les contrôleurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-224">One is for the domain controllers.</span></span> <span data-ttu-id="bf714-225">L’autre pour les machines virtuelles SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-225">The second is for the SQL Server VMs.</span></span>

<span data-ttu-id="bf714-226">Pour créer un groupe à haute disponibilité, accédez au groupe de ressources, puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="bf714-226">To create an availability set, go to the resource group and click **Add**.</span></span> <span data-ttu-id="bf714-227">Filtrez les résultats en tapant **groupe à haute disponibilité**.</span><span class="sxs-lookup"><span data-stu-id="bf714-227">Filter the results by typing **availability set**.</span></span> <span data-ttu-id="bf714-228">Cliquez sur **Groupe à haute disponibilité** dans les résultats, puis sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-228">Click **Availability Set** in the results, and then click **Create**.</span></span>

<span data-ttu-id="bf714-229">Configurez deux groupes à haute disponibilité en vous basant sur les paramètres du tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="bf714-229">Configure two availability sets according to the parameters in the following table:</span></span>

| <span data-ttu-id="bf714-230">**Champ**</span><span class="sxs-lookup"><span data-stu-id="bf714-230">**Field**</span></span> | <span data-ttu-id="bf714-231">Groupe à haute disponibilité du contrôleur de domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-231">Domain controller availability set</span></span> | <span data-ttu-id="bf714-232">Groupe à haute disponibilité SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf714-232">SQL Server availability set</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bf714-233">**Name**</span><span class="sxs-lookup"><span data-stu-id="bf714-233">**Name**</span></span> |<span data-ttu-id="bf714-234">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="bf714-234">adavailabilityset</span></span> |<span data-ttu-id="bf714-235">sqlavailabilityset</span><span class="sxs-lookup"><span data-stu-id="bf714-235">sqlavailabilityset</span></span> |
| <span data-ttu-id="bf714-236">**Groupe de ressources**</span><span class="sxs-lookup"><span data-stu-id="bf714-236">**Resource group**</span></span> |<span data-ttu-id="bf714-237">SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="bf714-237">SQL-HA-RG</span></span> |<span data-ttu-id="bf714-238">SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="bf714-238">SQL-HA-RG</span></span> |
| <span data-ttu-id="bf714-239">**Domaines d'erreur**</span><span class="sxs-lookup"><span data-stu-id="bf714-239">**Fault domains**</span></span> |<span data-ttu-id="bf714-240">3</span><span class="sxs-lookup"><span data-stu-id="bf714-240">3</span></span> |<span data-ttu-id="bf714-241">3</span><span class="sxs-lookup"><span data-stu-id="bf714-241">3</span></span> |
| <span data-ttu-id="bf714-242">**Domaines de mise à jour**</span><span class="sxs-lookup"><span data-stu-id="bf714-242">**Update domains**</span></span> |<span data-ttu-id="bf714-243">5</span><span class="sxs-lookup"><span data-stu-id="bf714-243">5</span></span> |<span data-ttu-id="bf714-244">3</span><span class="sxs-lookup"><span data-stu-id="bf714-244">3</span></span> |

<span data-ttu-id="bf714-245">Après avoir créé les groupes à haute disponibilité, revenez au groupe de ressources dans le Portail Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-245">After you create the availability sets, return to the resource group in the Azure portal.</span></span>

## <a name="create-domain-controllers"></a><span data-ttu-id="bf714-246">Création de contrôleurs de domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-246">Create domain controllers</span></span>
<span data-ttu-id="bf714-247">Une fois que vous avez créé le réseau, les sous-réseaux, les groupes à haute disponibilité et un équilibrage de charge accessible sur Internet, vous êtes prêt à créer les machines virtuelles associées aux contrôleurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-247">After you've created the network, subnets, availability sets, and an Internet-facing load balancer, you're ready to create the virtual machines for the domain controllers.</span></span>

### <a name="create-virtual-machines-for-the-domain-controllers"></a><span data-ttu-id="bf714-248">Créer les machines virtuelles associées aux contrôleurs de domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-248">Create virtual machines for the domain controllers</span></span>
<span data-ttu-id="bf714-249">Pour créer et configurer les contrôleurs de domaine, revenez au groupe de ressources **SQL-HA-RG** .</span><span class="sxs-lookup"><span data-stu-id="bf714-249">To create and configure the domain controllers, return to the **SQL-HA-RG** resource group.</span></span>

1. <span data-ttu-id="bf714-250">Cliquez sur **Add**.</span><span class="sxs-lookup"><span data-stu-id="bf714-250">Click **Add**.</span></span> <span data-ttu-id="bf714-251">Le panneau **Tout** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="bf714-251">The **Everything** blade opens.</span></span>
2. <span data-ttu-id="bf714-252">Tapez **Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="bf714-252">Type **Windows Server 2016 Datacenter**.</span></span>
3. <span data-ttu-id="bf714-253">Cliquez sur **Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="bf714-253">Click **Windows Server 2016 Datacenter**.</span></span> <span data-ttu-id="bf714-254">Dans le panneau **Windows Server 2016 Datacenter**, vérifiez que le modèle de déploiement est défini sur **Resource Manager**, puis cliquez sur **Créer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-254">In the **Windows Server 2016 Datacenter** blade, verify that the deployment model is **Resource Manager**, and then click **Create**.</span></span> <span data-ttu-id="bf714-255">Azure ouvre le panneau **Créer une machine virtuelle** .</span><span class="sxs-lookup"><span data-stu-id="bf714-255">Azure opens the **Create virtual machine** blade.</span></span>

<span data-ttu-id="bf714-256">Répétez les étapes précédentes pour créer deux machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="bf714-256">Repeat the preceding steps to create two virtual machines.</span></span> <span data-ttu-id="bf714-257">Nommez les deux machines virtuelles comme suit :</span><span class="sxs-lookup"><span data-stu-id="bf714-257">Name the two virtual machines:</span></span>

* <span data-ttu-id="bf714-258">ad-primary-dc</span><span class="sxs-lookup"><span data-stu-id="bf714-258">ad-primary-dc</span></span>
* <span data-ttu-id="bf714-259">ad-secondary-dc</span><span class="sxs-lookup"><span data-stu-id="bf714-259">ad-secondary-dc</span></span>

  > [!NOTE]
  > <span data-ttu-id="bf714-260">La machine virtuelle **ad-secondary-dc** est un composant facultatif utilisé pour fournir une haute disponibilité à Active Directory Domain Services.</span><span class="sxs-lookup"><span data-stu-id="bf714-260">The **ad-secondary-dc** virtual machine is optional, to provide high availability for Active Directory Domain Services.</span></span>
  >
  >

<span data-ttu-id="bf714-261">Le tableau suivant indique les paramètres relatifs à ces deux machines :</span><span class="sxs-lookup"><span data-stu-id="bf714-261">The following table shows the settings for these two machines:</span></span>

| <span data-ttu-id="bf714-262">**Champ**</span><span class="sxs-lookup"><span data-stu-id="bf714-262">**Field**</span></span> | <span data-ttu-id="bf714-263">Valeur</span><span class="sxs-lookup"><span data-stu-id="bf714-263">Value</span></span> |
| --- | --- |
| <span data-ttu-id="bf714-264">**Nom**</span><span class="sxs-lookup"><span data-stu-id="bf714-264">**Name**</span></span> |<span data-ttu-id="bf714-265">Premier contrôleur de domaine : *ad-primary-dc*.</span><span class="sxs-lookup"><span data-stu-id="bf714-265">First domain controller: *ad-primary-dc*.</span></span></br><span data-ttu-id="bf714-266">Second contrôleur de domaine *ad-secondary-dc*.</span><span class="sxs-lookup"><span data-stu-id="bf714-266">Second domain controller *ad-secondary-dc*.</span></span> |
| <span data-ttu-id="bf714-267">**Type de disque de machine virtuelle**</span><span class="sxs-lookup"><span data-stu-id="bf714-267">**VM disk type**</span></span> |<span data-ttu-id="bf714-268">SSD</span><span class="sxs-lookup"><span data-stu-id="bf714-268">SSD</span></span> |
| <span data-ttu-id="bf714-269">**Nom d'utilisateur**</span><span class="sxs-lookup"><span data-stu-id="bf714-269">**User name**</span></span> |<span data-ttu-id="bf714-270">DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="bf714-270">DomainAdmin</span></span> |
| <span data-ttu-id="bf714-271">**Mot de passe**</span><span class="sxs-lookup"><span data-stu-id="bf714-271">**Password**</span></span> |<span data-ttu-id="bf714-272">Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="bf714-272">Contoso!0000</span></span> |
| <span data-ttu-id="bf714-273">**Abonnement**</span><span class="sxs-lookup"><span data-stu-id="bf714-273">**Subscription**</span></span> |<span data-ttu-id="bf714-274">*Votre abonnement*</span><span class="sxs-lookup"><span data-stu-id="bf714-274">*Your subscription*</span></span> |
| <span data-ttu-id="bf714-275">**Groupe de ressources**</span><span class="sxs-lookup"><span data-stu-id="bf714-275">**Resource group**</span></span> |<span data-ttu-id="bf714-276">SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="bf714-276">SQL-HA-RG</span></span> |
| <span data-ttu-id="bf714-277">**Emplacement**</span><span class="sxs-lookup"><span data-stu-id="bf714-277">**Location**</span></span> |<span data-ttu-id="bf714-278">*Votre emplacement*</span><span class="sxs-lookup"><span data-stu-id="bf714-278">*Your location*</span></span> |
| <span data-ttu-id="bf714-279">**Taille**</span><span class="sxs-lookup"><span data-stu-id="bf714-279">**Size**</span></span> |<span data-ttu-id="bf714-280">DS1_V2</span><span class="sxs-lookup"><span data-stu-id="bf714-280">DS1_V2</span></span> |
| <span data-ttu-id="bf714-281">**Stockage**</span><span class="sxs-lookup"><span data-stu-id="bf714-281">**Storage**</span></span> | <span data-ttu-id="bf714-282">**Utiliser des disques gérés** - **Oui**</span><span class="sxs-lookup"><span data-stu-id="bf714-282">**Use managed disks** - **Yes**</span></span> |
| <span data-ttu-id="bf714-283">**Réseau virtuel**</span><span class="sxs-lookup"><span data-stu-id="bf714-283">**Virtual network**</span></span> |<span data-ttu-id="bf714-284">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="bf714-284">autoHAVNET</span></span> |
| <span data-ttu-id="bf714-285">**Sous-réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-285">**Subnet**</span></span> |<span data-ttu-id="bf714-286">admin</span><span class="sxs-lookup"><span data-stu-id="bf714-286">admin</span></span> |
| <span data-ttu-id="bf714-287">**Adresse IP publique**</span><span class="sxs-lookup"><span data-stu-id="bf714-287">**Public IP address**</span></span> |<span data-ttu-id="bf714-288">*Même nom que la machine virtuelle*</span><span class="sxs-lookup"><span data-stu-id="bf714-288">*Same name as the VM*</span></span> |
| <span data-ttu-id="bf714-289">**Groupe de sécurité réseau**</span><span class="sxs-lookup"><span data-stu-id="bf714-289">**Network security group**</span></span> |<span data-ttu-id="bf714-290">*Même nom que la machine virtuelle*</span><span class="sxs-lookup"><span data-stu-id="bf714-290">*Same name as the VM*</span></span> |
| <span data-ttu-id="bf714-291">**Groupe à haute disponibilité**</span><span class="sxs-lookup"><span data-stu-id="bf714-291">**Availability set**</span></span> |<span data-ttu-id="bf714-292">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="bf714-292">adavailabilityset</span></span> </br><span data-ttu-id="bf714-293">**Domaines d'erreur** : 2</span><span class="sxs-lookup"><span data-stu-id="bf714-293">**Fault domains**:2</span></span></br><span data-ttu-id="bf714-294">**Domaines de mise à jour** : 2</span><span class="sxs-lookup"><span data-stu-id="bf714-294">**Update domains**:2</span></span>|
| <span data-ttu-id="bf714-295">**Diagnostics**</span><span class="sxs-lookup"><span data-stu-id="bf714-295">**Diagnostics**</span></span> |<span data-ttu-id="bf714-296">Activé</span><span class="sxs-lookup"><span data-stu-id="bf714-296">Enabled</span></span> |
| <span data-ttu-id="bf714-297">**Compte de stockage de diagnostics**</span><span class="sxs-lookup"><span data-stu-id="bf714-297">**Diagnostics storage account**</span></span> |<span data-ttu-id="bf714-298">*Créé automatiquement*</span><span class="sxs-lookup"><span data-stu-id="bf714-298">*Automatically created*</span></span> |

   >[!IMPORTANT]
   ><span data-ttu-id="bf714-299">Vous pouvez uniquement placer une machine virtuelle dans un groupe de disponibilité lors de sa création.</span><span class="sxs-lookup"><span data-stu-id="bf714-299">You can only place a VM in an availability set when you create it.</span></span> <span data-ttu-id="bf714-300">Vous ne pouvez pas modifier le groupe à haute disponibilité après la création d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="bf714-300">You can't change the availability set after a VM is created.</span></span> <span data-ttu-id="bf714-301">Consultez la rubrique [Gérer la disponibilité des machines virtuelles](../manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="bf714-301">See [Manage the availability of virtual machines](../manage-availability.md).</span></span>

<span data-ttu-id="bf714-302">Azure crée les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="bf714-302">Azure creates the virtual machines.</span></span>

<span data-ttu-id="bf714-303">Une fois les machines virtuelles créées, configurez le contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-303">After the virtual machines are created, configure the domain controller.</span></span>

### <a name="configure-the-domain-controller"></a><span data-ttu-id="bf714-304">Configurer le contrôleur de domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-304">Configure the domain controller</span></span>
<span data-ttu-id="bf714-305">Dans les étapes suivantes, vous allez configurer la machine **ad-primary-dc** comme contrôleur de domaine pour corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="bf714-305">In the following steps, configure the **ad-primary-dc** machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="bf714-306">Dans le portail, ouvrez le groupe de ressources **SQL-HA-RG**, puis sélectionnez la machine **ad-primary-dc**.</span><span class="sxs-lookup"><span data-stu-id="bf714-306">In the portal, open the **SQL-HA-RG** resource group and select the **ad-primary-dc** machine.</span></span> <span data-ttu-id="bf714-307">Dans le panneau **ad-primary-dc**, cliquez sur **Se connecter** pour ouvrir un fichier RDP pour l’accès au Bureau à distance.</span><span class="sxs-lookup"><span data-stu-id="bf714-307">On the **ad-primary-dc** blade, click **Connect** to open an RDP file for remote desktop access.</span></span>

    ![Connexion à une machine virtuelle](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/20-connectrdp.png)
2. <span data-ttu-id="bf714-309">Connectez-vous avec votre compte Administrateur configuré (**\DomainAdmin**) et votre mot de passe (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="bf714-309">Sign in with your configured administrator account (**\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="bf714-310">Par défaut, le tableau de bord **Gestionnaire de serveur** doit être affiché.</span><span class="sxs-lookup"><span data-stu-id="bf714-310">By default, the **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="bf714-311">Cliquez sur le lien du tableau de bord **Ajouter des rôles et fonctionnalités** .</span><span class="sxs-lookup"><span data-stu-id="bf714-311">Click the **Add roles and features** link on the dashboard.</span></span>

    ![Gestionnaire de serveur - Ajouter des rôles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
5. <span data-ttu-id="bf714-313">Sélectionnez **Suivant** jusqu’à ce que vous atteigniez la section **Rôles de serveur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-313">Select **Next** until you get to the **Server Roles** section.</span></span>
6. <span data-ttu-id="bf714-314">Sélectionnez les rôles **Services de domaine Active Directory** et **Serveur DNS**.</span><span class="sxs-lookup"><span data-stu-id="bf714-314">Select the **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="bf714-315">Lorsque vous y êtes invité, ajoutez les fonctionnalités supplémentaires requises par ces rôles.</span><span class="sxs-lookup"><span data-stu-id="bf714-315">When you're prompted, add any additional features that are required by these roles.</span></span>

   > [!NOTE]
   > <span data-ttu-id="bf714-316">Windows vous avertit qu’il n’y a aucune adresse IP statique.</span><span class="sxs-lookup"><span data-stu-id="bf714-316">Windows warns you that there is no static IP address.</span></span> <span data-ttu-id="bf714-317">Si vous testez la configuration, cliquez sur **Continuer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-317">If you're testing the configuration, click **Continue**.</span></span> <span data-ttu-id="bf714-318">Pour les scénarios de production, définissez l’adresse IP comme statique dans le portail Azure ou [utilisez PowerShell pour définir l’adresse IP statique de la machine de contrôleur de domaine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="bf714-318">For production scenarios, set the IP address to static in the Azure portal, or [use PowerShell to set the static IP address of the domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   >
   >

    ![Boîte de dialogue Ajouter des rôles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/23-addroles.png)
7. <span data-ttu-id="bf714-320">Cliquez sur **Suivant** jusqu’à ce que vous atteigniez la section **Confirmation**.</span><span class="sxs-lookup"><span data-stu-id="bf714-320">Click **Next** until you reach the **Confirmation** section.</span></span> <span data-ttu-id="bf714-321">Cochez la case **Redémarrer automatiquement le serveur de destination, si nécessaire**.</span><span class="sxs-lookup"><span data-stu-id="bf714-321">Select the **Restart the destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="bf714-322">Cliquez sur **Installer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-322">Click **Install**.</span></span>
9. <span data-ttu-id="bf714-323">Une fois les fonctionnalités installées, retournez dans le tableau de bord **Gestionnaire de serveur** .</span><span class="sxs-lookup"><span data-stu-id="bf714-323">After the features finish installing, return to the **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="bf714-324">Sélectionnez la nouvelle option **AD DS** dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="bf714-324">Select the new **AD DS** option on the left-hand pane.</span></span>
11. <span data-ttu-id="bf714-325">Cliquez sur le lien **Plus** dans la barre d'avertissement jaune.</span><span class="sxs-lookup"><span data-stu-id="bf714-325">Click the **More** link on the yellow warning bar.</span></span>

    ![Boîte de dialogue AD DS sur la machine virtuelle du serveur DNS](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/24-addsmore.png)
12. <span data-ttu-id="bf714-327">Dans la colonne **Action** de la boîte de dialogue **Tous les détails de la tâche serveur**, cliquez sur **Promouvoir ce serveur en contrôleur de domaine**.</span><span class="sxs-lookup"><span data-stu-id="bf714-327">In the **Action** column of the **All Server Task Details** dialog, click **Promote this server to a domain controller**.</span></span>
13. <span data-ttu-id="bf714-328">Dans l' **Assistant de configuration des services de domaine Active Directory**, utilisez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="bf714-328">In the **Active Directory Domain Services Configuration Wizard**, use the following values:</span></span>

    | <span data-ttu-id="bf714-329">**Page**</span><span class="sxs-lookup"><span data-stu-id="bf714-329">**Page**</span></span> | <span data-ttu-id="bf714-330">Paramètre</span><span class="sxs-lookup"><span data-stu-id="bf714-330">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="bf714-331">**Configuration du déploiement**</span><span class="sxs-lookup"><span data-stu-id="bf714-331">**Deployment Configuration**</span></span> |<span data-ttu-id="bf714-332">**Ajouter une nouvelle forêt**</span><span class="sxs-lookup"><span data-stu-id="bf714-332">**Add a new forest**</span></span><br/> <span data-ttu-id="bf714-333">**Nom de domaine racine** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="bf714-333">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="bf714-334">**Options de contrôleur de domaine :**</span><span class="sxs-lookup"><span data-stu-id="bf714-334">**Domain Controller Options**</span></span> |<span data-ttu-id="bf714-335">**Mot de passe DSRM** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="bf714-335">**DSRM Password** = Contoso!0000</span></span><br/><span data-ttu-id="bf714-336">**Confirmer le mot de passe** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="bf714-336">**Confirm Password** = Contoso!0000</span></span> |
14. <span data-ttu-id="bf714-337">Cliquez sur **Suivant** pour parcourir les autres pages de l'Assistant.</span><span class="sxs-lookup"><span data-stu-id="bf714-337">Click **Next** to go through the other pages in the wizard.</span></span> <span data-ttu-id="bf714-338">Sur la page **Vérification de la configuration requise**, vérifiez que vous voyez le message suivant : **Toutes les vérifications de la configuration requise ont donné satisfaction**.</span><span class="sxs-lookup"><span data-stu-id="bf714-338">On the **Prerequisites Check** page, verify that you see the following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="bf714-339">Vous pouvez examiner les messages d’avertissement applicables, mais il est possible de poursuivre l’installation.</span><span class="sxs-lookup"><span data-stu-id="bf714-339">You can review any applicable warning messages, but it's possible to continue with the installation.</span></span>
15. <span data-ttu-id="bf714-340">Cliquez sur **Installer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-340">Click **Install**.</span></span> <span data-ttu-id="bf714-341">La machine virtuelle **ad-primary-dc** redémarre automatiquement.</span><span class="sxs-lookup"><span data-stu-id="bf714-341">The **ad-primary-dc** virtual machine automatically reboots.</span></span>

### <a name="note-the-ip-address-of-the-primary-domain-controller"></a><span data-ttu-id="bf714-342">Notez l’adresse IP du contrôleur de domaine principal</span><span class="sxs-lookup"><span data-stu-id="bf714-342">Note the IP address of the primary domain controller</span></span>

<span data-ttu-id="bf714-343">Utilisez le contrôleur de domaine principal pour DNS.</span><span class="sxs-lookup"><span data-stu-id="bf714-343">Use the primary domain controller for DNS.</span></span> <span data-ttu-id="bf714-344">Notez l’adresse IP du contrôleur de domaine principal.</span><span class="sxs-lookup"><span data-stu-id="bf714-344">Note the primary domain controller IP address.</span></span>

<span data-ttu-id="bf714-345">Vous pouvez obtenir l’adresse IP du contrôleur de domaine principal via le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-345">One way to get the primary domain controller IP address is through the Azure portal.</span></span>

1. <span data-ttu-id="bf714-346">Sur le portail Azure, ouvrez le groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="bf714-346">On the Azure portal, open the resource group.</span></span>

2. <span data-ttu-id="bf714-347">Cliquez sur le contrôleur de domaine principal.</span><span class="sxs-lookup"><span data-stu-id="bf714-347">Click the primary domain controller.</span></span>

3. <span data-ttu-id="bf714-348">Dans le panneau du contrôleur de domaine principal, cliquez sur **Interfaces réseau**.</span><span class="sxs-lookup"><span data-stu-id="bf714-348">On the primary domain controller blade, click **Network interfaces**.</span></span>

![Interfaces réseau](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/25-primarydcip.png)

<span data-ttu-id="bf714-350">Notez l’adresse IP privée de ce serveur.</span><span class="sxs-lookup"><span data-stu-id="bf714-350">Note the private IP address for this server.</span></span>

### <a name="configure-the-virtual-network-dns"></a><span data-ttu-id="bf714-351">Configurer le DNS du réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="bf714-351">Configure the virtual network DNS</span></span>
<span data-ttu-id="bf714-352">Après avoir créé le premier contrôleur de domaine et activé DNS sur le premier serveur, configurez le réseau virtuel pour utiliser ce serveur pour le DNS.</span><span class="sxs-lookup"><span data-stu-id="bf714-352">After you create the first domain controller and enable DNS on the first server, configure the virtual network to use this server for DNS.</span></span>

1. <span data-ttu-id="bf714-353">Dans le portail Azure, cliquez sur le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="bf714-353">In the Azure portal, click on the virtual network.</span></span>

2. <span data-ttu-id="bf714-354">Sous **Paramètres**, cliquez sur **Serveur DNS**.</span><span class="sxs-lookup"><span data-stu-id="bf714-354">Under **Settings**, click **DNS Server**.</span></span>

3. <span data-ttu-id="bf714-355">Cliquez sur **Personnalisé** et saisissez l’adresse IP privée du contrôleur de domaine principal.</span><span class="sxs-lookup"><span data-stu-id="bf714-355">Click **Custom**, and type the private IP address of the primary domain controller.</span></span>

4. <span data-ttu-id="bf714-356">Cliquez sur **Save**.</span><span class="sxs-lookup"><span data-stu-id="bf714-356">Click **Save**.</span></span>

### <a name="configure-the-second-domain-controller"></a><span data-ttu-id="bf714-357">Configuration du second contrôleur de domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-357">Configure the second domain controller</span></span>
<span data-ttu-id="bf714-358">Une fois le contrôleur de domaine principal redémarré, vous pouvez configurer le second contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-358">After the primary domain controller reboots, you can configure the second domain controller.</span></span> <span data-ttu-id="bf714-359">Cette étape facultative intervient pour les scénarios de haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="bf714-359">This optional step is for high availability.</span></span> <span data-ttu-id="bf714-360">Suivez ces étapes pour configurer le second contrôleur de domaine :</span><span class="sxs-lookup"><span data-stu-id="bf714-360">Follow these steps to configure the second domain controller:</span></span>

1. <span data-ttu-id="bf714-361">Dans le portail, ouvrez le groupe de ressources **SQL-HA-RG**, puis sélectionnez la machine **ad-secondary-dc**.</span><span class="sxs-lookup"><span data-stu-id="bf714-361">In the portal, open the **SQL-HA-RG** resource group and select the **ad-secondary-dc** machine.</span></span> <span data-ttu-id="bf714-362">Dans le panneau **ad-secondary-dc**, cliquez sur **Se connecter** pour ouvrir un fichier RDP pour l’accès au Bureau à distance.</span><span class="sxs-lookup"><span data-stu-id="bf714-362">On the **ad-secondary-dc** blade, click **Connect** to open an RDP file for remote desktop access.</span></span>
2. <span data-ttu-id="bf714-363">Connectez-vous à la machine virtuelle avec votre compte Administrateur configuré (**BUILTIN\DomainAdmin**) et votre mot de passe (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="bf714-363">Sign in to the VM by using your configured administrator account (**BUILTIN\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="bf714-364">Remplacez l’adresse du serveur DNS préféré par celle du contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-364">Change the preferred DNS server address to the address of the domain controller.</span></span>
4. <span data-ttu-id="bf714-365">Dans **Centre Réseau et partage**, cliquez sur l’interface réseau.</span><span class="sxs-lookup"><span data-stu-id="bf714-365">In **Network and Sharing Center**, click the network interface.</span></span>
   <span data-ttu-id="bf714-366">![Interface réseau](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span><span class="sxs-lookup"><span data-stu-id="bf714-366">![Network interface](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span></span>

5. <span data-ttu-id="bf714-367">Cliquez sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="bf714-367">Click **Properties**.</span></span>
6. <span data-ttu-id="bf714-368">Cliquez sur **Internet Protocol Version 4 (TCP/IPv4)**, puis sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="bf714-368">Select **Internet Protocol Version 4 (TCP/IPv4)** and click **Properties**.</span></span>
7. <span data-ttu-id="bf714-369">Sélectionnez **Utiliser l’adresse de serveur DNS suivante** et spécifiez l’adresse du contrôleur de domaine principal sous **Serveur DNS préféré**.</span><span class="sxs-lookup"><span data-stu-id="bf714-369">Select **Use the following DNS server addresses** and specify the address of the primary domain controller in **Preferred DNS server**.</span></span>
8. <span data-ttu-id="bf714-370">Cliquez sur **OK**, puis sur **Fermer** pour valider les modifications.</span><span class="sxs-lookup"><span data-stu-id="bf714-370">Click **OK**, and then **Close** to commit the changes.</span></span> <span data-ttu-id="bf714-371">Vous pouvez maintenant joindre la machine virtuelle à **corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="bf714-371">You are now able to join the VM to **corp.contoso.com**.</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="bf714-372">Si vous perdez la connexion à votre Bureau à distance après avoir modifié le paramètre DNS, accédez au portail et redémarrez la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="bf714-372">If you lose the connection to your remote desktop after changing the DNS setting, go to the Azure portal and restart the virtual machine.</span></span>

9. <span data-ttu-id="bf714-373">À partir du Bureau à distance au contrôleur de domaine secondaire, ouvrez le **tableau de bord du Gestionnaire de serveur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-373">From the remote desktop to the secondary domain controller, open **Server Manager Dashboard**.</span></span>
10. <span data-ttu-id="bf714-374">Cliquez sur le lien du tableau de bord **Ajouter des rôles et fonctionnalités** .</span><span class="sxs-lookup"><span data-stu-id="bf714-374">Click the **Add roles and features** link on the dashboard.</span></span>

    ![Gestionnaire de serveur - Ajouter des rôles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
11. <span data-ttu-id="bf714-376">Sélectionnez **Suivant** jusqu’à ce que vous atteigniez la section **Rôles de serveur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-376">Select **Next** until you get to the **Server Roles** section.</span></span>
12. <span data-ttu-id="bf714-377">Sélectionnez les rôles **Services de domaine Active Directory** et **Serveur DNS**.</span><span class="sxs-lookup"><span data-stu-id="bf714-377">Select the **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="bf714-378">Lorsque vous y êtes invité, ajoutez les fonctionnalités supplémentaires requises par ces rôles.</span><span class="sxs-lookup"><span data-stu-id="bf714-378">When you're prompted, add any additional features that are required by these roles.</span></span>
13. <span data-ttu-id="bf714-379">Une fois les fonctionnalités installées, retournez dans le tableau de bord **Gestionnaire de serveur** .</span><span class="sxs-lookup"><span data-stu-id="bf714-379">After the features finish installing, return to the **Server Manager** dashboard.</span></span>
14. <span data-ttu-id="bf714-380">Sélectionnez la nouvelle option **AD DS** dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="bf714-380">Select the new **AD DS** option on the left-hand pane.</span></span>
15. <span data-ttu-id="bf714-381">Cliquez sur le lien **Plus** dans la barre d'avertissement jaune.</span><span class="sxs-lookup"><span data-stu-id="bf714-381">Click the **More** link on the yellow warning bar.</span></span>
16. <span data-ttu-id="bf714-382">Dans la colonne **Action** de la boîte de dialogue **Tous les détails de la tâche serveur**, cliquez sur **Promouvoir ce serveur en contrôleur de domaine**.</span><span class="sxs-lookup"><span data-stu-id="bf714-382">In the **Action** column of the **All Server Task Details** dialog, click **Promote this server to a domain controller**.</span></span>
17. <span data-ttu-id="bf714-383">Sous **Configuration du déploiement**, sélectionnez **Ajouter un contrôleur de domaine à un domaine existant**.</span><span class="sxs-lookup"><span data-stu-id="bf714-383">Under **Deployment Configuration**, select **Add a domain controller to an existing domain**.</span></span>
   <span data-ttu-id="bf714-384">![Configuration du déploiement](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span><span class="sxs-lookup"><span data-stu-id="bf714-384">![Deployment configuration](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span></span>
18. <span data-ttu-id="bf714-385">Cliquez sur **Sélectionner**.</span><span class="sxs-lookup"><span data-stu-id="bf714-385">Click **Select**.</span></span>
19. <span data-ttu-id="bf714-386">Connectez-vous à l’aide du compte Administrateur (**CORP.CONTOSO.COM\domainadmin**) et du mot de passe (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="bf714-386">Connect by using the administrator account (**CORP.CONTOSO.COM\domainadmin**) and password (**Contoso!0000**).</span></span>
20. <span data-ttu-id="bf714-387">Dans **Sélectionner un domaine dans la forêt**, cliquez sur votre domaine, puis sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-387">In **Select a domain from the forest**, click your domain, and then click **OK**.</span></span>
21. <span data-ttu-id="bf714-388">Dans **Options du contrôleur de domaine**, utilisez les valeurs par défaut et définissez un mot de passe DSRM.</span><span class="sxs-lookup"><span data-stu-id="bf714-388">In **Domain Controller Options**, use the default values and set a DSRM password.</span></span>

   >[!NOTE]
   ><span data-ttu-id="bf714-389">La page **Options DNS** peut vous informer de l’impossibilité de créer une délégation pour ce serveur DNS.</span><span class="sxs-lookup"><span data-stu-id="bf714-389">The **DNS Options** page might warn you that a delegation for this DNS server can't be created.</span></span> <span data-ttu-id="bf714-390">Vous pouvez ignorer cet avertissement dans les environnements hors production.</span><span class="sxs-lookup"><span data-stu-id="bf714-390">You can ignore this warning in non-production environments.</span></span>
22. <span data-ttu-id="bf714-391">Cliquez sur **Suivant** jusqu'à ce que la boîte de dialogue affiche la page de vérification **Conditions préalables**.</span><span class="sxs-lookup"><span data-stu-id="bf714-391">Click **Next** until the dialog reaches the **Prerequisites** check.</span></span> <span data-ttu-id="bf714-392">Cliquez ensuite sur **Installer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-392">Then click **Install**.</span></span>

<span data-ttu-id="bf714-393">Une fois que le serveur a terminé de modifier la configuration, redémarrez-le.</span><span class="sxs-lookup"><span data-stu-id="bf714-393">After the server finishes the configuration changes, restart the server.</span></span>

### <a name="add-the-private-ip-address-to-the-second-domain-controller-to-the-vpn-dns-server"></a><span data-ttu-id="bf714-394">Ajouter l’adresse IP privée au second contrôleur de domaine pour le serveur DNS VPN</span><span class="sxs-lookup"><span data-stu-id="bf714-394">Add the Private IP Address to the second domain controller to the VPN DNS Server</span></span>

<span data-ttu-id="bf714-395">Dans le portail Azure, sous réseau virtuel, modifiez le serveur DNS pour inclure l’adresse IP du contrôleur de domaine secondaire.</span><span class="sxs-lookup"><span data-stu-id="bf714-395">In the Azure portal, under virtual network, change the DNS Server to include the IP address of the secondary domain controller.</span></span> <span data-ttu-id="bf714-396">Cela permet la redondance du service DNS.</span><span class="sxs-lookup"><span data-stu-id="bf714-396">This allows the DNS service redundancy.</span></span>

### <span data-ttu-id="bf714-397"><a name=DomainAccounts></a> Configurer les comptes de domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-397"><a name=DomainAccounts></a> Configure the domain accounts</span></span>

<span data-ttu-id="bf714-398">Lors des étapes suivantes, vous configurez les comptes Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bf714-398">In the next steps, you configure the Active Directory accounts.</span></span> <span data-ttu-id="bf714-399">La table qui suit affiche les comptes :</span><span class="sxs-lookup"><span data-stu-id="bf714-399">The following table shows the accounts:</span></span>

| |<span data-ttu-id="bf714-400">Compte d’installation</span><span class="sxs-lookup"><span data-stu-id="bf714-400">Installation account</span></span><br/> |<span data-ttu-id="bf714-401">sqlserver-0</span><span class="sxs-lookup"><span data-stu-id="bf714-401">sqlserver-0</span></span> <br/><span data-ttu-id="bf714-402">SQL Server et compte SQL Agent Service</span><span class="sxs-lookup"><span data-stu-id="bf714-402">SQL Server and SQL Agent Service account</span></span> |<span data-ttu-id="bf714-403">sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="bf714-403">sqlserver-1</span></span><br/><span data-ttu-id="bf714-404">SQL Server et compte SQL Agent Service</span><span class="sxs-lookup"><span data-stu-id="bf714-404">SQL Server and SQL Agent Service account</span></span>
| --- | --- | --- | ---
|<span data-ttu-id="bf714-405">**Prénom**</span><span class="sxs-lookup"><span data-stu-id="bf714-405">**First Name**</span></span> |<span data-ttu-id="bf714-406">Installer</span><span class="sxs-lookup"><span data-stu-id="bf714-406">Install</span></span> |<span data-ttu-id="bf714-407">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="bf714-407">SQLSvc1</span></span> | <span data-ttu-id="bf714-408">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="bf714-408">SQLSvc2</span></span>
|<span data-ttu-id="bf714-409">**SamAccountName de l'utilisateur**</span><span class="sxs-lookup"><span data-stu-id="bf714-409">**User SamAccountName**</span></span> |<span data-ttu-id="bf714-410">Installer</span><span class="sxs-lookup"><span data-stu-id="bf714-410">Install</span></span> |<span data-ttu-id="bf714-411">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="bf714-411">SQLSvc1</span></span> | <span data-ttu-id="bf714-412">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="bf714-412">SQLSvc2</span></span>

<span data-ttu-id="bf714-413">Procédez comme suit pour créer chaque compte.</span><span class="sxs-lookup"><span data-stu-id="bf714-413">Use the following steps to create each account.</span></span>

1. <span data-ttu-id="bf714-414">Connectez-vous à la machine **ad-primary-dc**.</span><span class="sxs-lookup"><span data-stu-id="bf714-414">Sign in to the **ad-primary-dc** machine.</span></span>
2. <span data-ttu-id="bf714-415">Dans **Gestionnaire de serveur**, sélectionnez **Outils**, puis cliquez sur **Centre d’administration Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="bf714-415">In **Server Manager**, select **Tools**, and then click **Active Directory Administrative Center**.</span></span>   
3. <span data-ttu-id="bf714-416">Sélectionnez **corp (local)** dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="bf714-416">Select **corp (local)** from the left pane.</span></span>
4. <span data-ttu-id="bf714-417">Dans le volet droit **Tâches**, sélectionnez **Nouveau**, puis cliquez sur **Utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-417">On the right **Tasks** pane, select **New**, and then click **User**.</span></span>
   <span data-ttu-id="bf714-418">![Centre d'administration Active Directory](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span><span class="sxs-lookup"><span data-stu-id="bf714-418">![Active Directory Administrative Center](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span></span>

   >[!TIP]
   ><span data-ttu-id="bf714-419">Définissez un mot de passe complexe pour chaque compte.</span><span class="sxs-lookup"><span data-stu-id="bf714-419">Set a complex password for each account.</span></span><br/> <span data-ttu-id="bf714-420">Pour les environnements hors production, définissez le compte d’utilisateur afin qu'il n’expire jamais.</span><span class="sxs-lookup"><span data-stu-id="bf714-420">For non-production environments, set the user account to never expire.</span></span>

5. <span data-ttu-id="bf714-421">Cliquez sur **OK** pour créer l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bf714-421">Click **OK** to create the user.</span></span>
6. <span data-ttu-id="bf714-422">Répétez les étapes précédentes pour chacun des trois comptes.</span><span class="sxs-lookup"><span data-stu-id="bf714-422">Repeat the preceding steps for each of the three accounts.</span></span>

### <a name="grant-the-required-permissions-to-the-installation-account"></a><span data-ttu-id="bf714-423">Accorder les autorisations requises pour le compte d’installation</span><span class="sxs-lookup"><span data-stu-id="bf714-423">Grant the required permissions to the installation account</span></span>
1. <span data-ttu-id="bf714-424">Dans le **Centre d’administration Active Directory**, sélectionnez **corp (local)** dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="bf714-424">In the **Active Directory Administrative Center**, select **corp (local)** in the left pane.</span></span> <span data-ttu-id="bf714-425">Ensuite, dans le volet droit **Tâches**, cliquez sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="bf714-425">Then in the right-hand **Tasks** pane, click **Properties**.</span></span>

    ![Propriétés de l’utilisateur CORP](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/31-addcproperties.png)
2. <span data-ttu-id="bf714-427">Sélectionnez **Extensions**, puis cliquez sur le bouton **Avancé** de l’onglet **Sécurité**.</span><span class="sxs-lookup"><span data-stu-id="bf714-427">Select **Extensions**, and then click the **Advanced** button on the **Security** tab.</span></span>
3. <span data-ttu-id="bf714-428">Dans la boîte de dialogue **Paramètres de sécurité avancés pour corp**, cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="bf714-428">In the **Advanced Security Settings for corp** dialog, click **Add**.</span></span>
4. <span data-ttu-id="bf714-429">Cliquez sur **Sélectionnez un principal**, recherchez **CORP\Install**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-429">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
5. <span data-ttu-id="bf714-430">Cochez la case **Lire toutes les propriétés**.</span><span class="sxs-lookup"><span data-stu-id="bf714-430">Select the **Read all properties** check box.</span></span>

6. <span data-ttu-id="bf714-431">Cochez la case **Créer des objets ordinateur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-431">Select the **Create Computer objects** check box.</span></span>

     ![Autorisations de l’utilisateur Corp](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/33-addpermissions.png)
7. <span data-ttu-id="bf714-433">Cliquez sur **OK**, puis sur **OK** à nouveau.</span><span class="sxs-lookup"><span data-stu-id="bf714-433">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="bf714-434">Fermez la fenêtre des propriétés **corp**.</span><span class="sxs-lookup"><span data-stu-id="bf714-434">Close the **corp** properties window.</span></span>

<span data-ttu-id="bf714-435">Maintenant que vous avez fini de configurer Active Directory et les objets utilisateur, créez deux machines virtuelles SQL Server et une machine virtuelle de serveur témoin.</span><span class="sxs-lookup"><span data-stu-id="bf714-435">Now that you've finished configuring Active Directory and the user objects, create two SQL Server VMs and a witness server VM.</span></span> <span data-ttu-id="bf714-436">Joignez les trois machines virtuelles au domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-436">Then join all three to the domain.</span></span>

## <a name="create-sql-server-vms"></a><span data-ttu-id="bf714-437">Créer des machines virtuelles SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf714-437">Create SQL Server VMs</span></span>

<span data-ttu-id="bf714-438">Créez trois machines virtuelles supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="bf714-438">Create three additional virtual machines.</span></span> <span data-ttu-id="bf714-439">Cette solution nécessite deux machines virtuelles avec des instances de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-439">The solution requires two virtual machines with SQL Server instances.</span></span> <span data-ttu-id="bf714-440">Une troisième machine virtuelle fonctionnera comme témoin.</span><span class="sxs-lookup"><span data-stu-id="bf714-440">A third virtual machine will function as a witness.</span></span> <span data-ttu-id="bf714-441">Windows Server 2016 peut utiliser un [cloud témoin](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness), toutefois, pour la cohérence avec les systèmes d’exploitation précédents, ce document utilise une machine virtuelle pour témoin.</span><span class="sxs-lookup"><span data-stu-id="bf714-441">Windows Server 2016 can use a [cloud witness](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness), however for consistency with previous operating systems this document uses a virtual machine for a witness.</span></span>  

<span data-ttu-id="bf714-442">Avant de continuer, envisagez les décisions de conception suivantes.</span><span class="sxs-lookup"><span data-stu-id="bf714-442">Before you proceed consider the following deisign decisions.</span></span>

* <span data-ttu-id="bf714-443">**Stockage - Disques gérés Azure**</span><span class="sxs-lookup"><span data-stu-id="bf714-443">**Storage - Azure Managed Disks**</span></span>

   <span data-ttu-id="bf714-444">Pour le stockage de la machine virtuelle, utilisez des disques gérés Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-444">For the virtual machine storage, use Azure Managed Disks.</span></span> <span data-ttu-id="bf714-445">Microsoft recommande des machines virtuelles Managed Disks pour SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-445">Microsoft recommends Managed Disks for SQL Server virtual machines.</span></span> <span data-ttu-id="bf714-446">Les disques managés gèrent le stockage en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="bf714-446">Managed Disks handles storage behind the scenes.</span></span> <span data-ttu-id="bf714-447">En outre, lorsque les machines virtuelles avec Managed Disks sont dans le même groupe à haute disponibilité, Azure distribue les ressources de stockage pour fournir une redondance appropriée.</span><span class="sxs-lookup"><span data-stu-id="bf714-447">In addition, when virtual machines with Managed Disks are in the same availability set, Azure distributes the storage resources to provide appropriate redundancy.</span></span> <span data-ttu-id="bf714-448">Pour plus d’informations, voir la page [Azure Managed Disks overview](../managed-disks-overview.md) (Vue d’ensemble d’Azure Managed Disks).</span><span class="sxs-lookup"><span data-stu-id="bf714-448">For additional information, see [Azure Managed Disks Overview](../managed-disks-overview.md).</span></span> <span data-ttu-id="bf714-449">Pour plus de détails sur les disques gérés dans un groupe à haute disponibilité, consultez [Utilisation de disques gérés pour les machines virtuelles dans le groupe à haute disponibilité](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="bf714-449">For specifics about managed disks in an availability set, see [Use Managed Disks for VMs in an availability set](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span>

* <span data-ttu-id="bf714-450">**Réseau - Adresses IP privées en production**</span><span class="sxs-lookup"><span data-stu-id="bf714-450">**Network - Private IP addresses in production**</span></span>

   <span data-ttu-id="bf714-451">Pour les machines virtuelles, ce didacticiel utilise des adresses IP publiques.</span><span class="sxs-lookup"><span data-stu-id="bf714-451">For the virtual machines, this tutorial uses public IP addresses.</span></span> <span data-ttu-id="bf714-452">Cela assure une connexion à distance directe à la machine virtuelle via Internet : cela simplifie les étapes de configuration.</span><span class="sxs-lookup"><span data-stu-id="bf714-452">This enables remote connection directly to the virtual machine over the internet - it makes configuration steps easier.</span></span> <span data-ttu-id="bf714-453">Dans les environnements de production, Microsoft recommande d’utiliser uniquement des adresses IP privées afin de réduire l’empreinte vulnérable de la ressource de machine virtuelle de l’instance SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-453">In production environments, Microsoft recommends only private IP addresses in order to reduce the vulnerability footprint of the SQL Server instance VM resource.</span></span>

### <a name="create-and-configure-the-sql-server-vms"></a><span data-ttu-id="bf714-454">Créer et configurer les machines virtuelles SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf714-454">Create and configure the SQL Server VMs</span></span>
<span data-ttu-id="bf714-455">Créez ensuite trois machines virtuelles : deux machines virtuelles SQL Server et une machine virtuelle pour un nœud de cluster supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="bf714-455">Next, create three VMs--two SQL Server VMs and a VM for an additional cluster node.</span></span> <span data-ttu-id="bf714-456">Pour créer chaque machine virtuelle, revenez au groupe de ressources **SQL-HA-RG**, cliquez sur **Ajouter**, recherchez l’élément de galerie approprié, cliquez sur **Machine virtuelle**, puis cliquez sur **À partir de la galerie**.</span><span class="sxs-lookup"><span data-stu-id="bf714-456">To create each of the VMs, go back to the **SQL-HA-RG** resource group, click **Add**, search for the appropriate gallery item, click **Virtual Machine**, and then click **From Gallery**.</span></span> <span data-ttu-id="bf714-457">Utilisez les informations du tableau suivant pour vous aider à créer les machines virtuelles :</span><span class="sxs-lookup"><span data-stu-id="bf714-457">Use the information in the following table to help you create the VMs:</span></span>


| <span data-ttu-id="bf714-458">Page</span><span class="sxs-lookup"><span data-stu-id="bf714-458">Page</span></span> | <span data-ttu-id="bf714-459">MV1</span><span class="sxs-lookup"><span data-stu-id="bf714-459">VM1</span></span> | <span data-ttu-id="bf714-460">MV2</span><span class="sxs-lookup"><span data-stu-id="bf714-460">VM2</span></span> | <span data-ttu-id="bf714-461">MV3</span><span class="sxs-lookup"><span data-stu-id="bf714-461">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="bf714-462">Sélectionnez l’élément de la galerie approprié.</span><span class="sxs-lookup"><span data-stu-id="bf714-462">Select the appropriate gallery item</span></span> |<span data-ttu-id="bf714-463">**Windows Server 2016 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="bf714-463">**Windows Server 2016 Datacenter**</span></span> |<span data-ttu-id="bf714-464">**SQL Server 2016 SP1 Enterprise sur Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="bf714-464">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |<span data-ttu-id="bf714-465">**SQL Server 2016 SP1 Enterprise sur Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="bf714-465">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |
| <span data-ttu-id="bf714-466">**Notions**</span><span class="sxs-lookup"><span data-stu-id="bf714-466">Virtual machine configuration **Basics**</span></span> |<span data-ttu-id="bf714-467">**Nom** = cluster-fsw</span><span class="sxs-lookup"><span data-stu-id="bf714-467">**Name** = cluster-fsw</span></span><br/><span data-ttu-id="bf714-468">**Nom d’utilisateur** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="bf714-468">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="bf714-469">**Mot de passe** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="bf714-469">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="bf714-470">**Abonnement** = votre abonnement</span><span class="sxs-lookup"><span data-stu-id="bf714-470">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="bf714-471">**Groupe de ressources** = SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="bf714-471">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="bf714-472">**Emplacement** = Votre emplacement Azure</span><span class="sxs-lookup"><span data-stu-id="bf714-472">**Location** = Your azure location</span></span> |<span data-ttu-id="bf714-473">**Nom** = sqlserver-0</span><span class="sxs-lookup"><span data-stu-id="bf714-473">**Name** = sqlserver-0</span></span><br/><span data-ttu-id="bf714-474">**Nom d’utilisateur** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="bf714-474">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="bf714-475">**Mot de passe** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="bf714-475">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="bf714-476">**Abonnement** = votre abonnement</span><span class="sxs-lookup"><span data-stu-id="bf714-476">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="bf714-477">**Groupe de ressources** = SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="bf714-477">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="bf714-478">**Emplacement** = Votre emplacement Azure</span><span class="sxs-lookup"><span data-stu-id="bf714-478">**Location** = Your azure location</span></span> |<span data-ttu-id="bf714-479">**Nom** = sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="bf714-479">**Name** = sqlserver-1</span></span><br/><span data-ttu-id="bf714-480">**Nom d’utilisateur** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="bf714-480">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="bf714-481">**Mot de passe** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="bf714-481">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="bf714-482">**Abonnement** = votre abonnement</span><span class="sxs-lookup"><span data-stu-id="bf714-482">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="bf714-483">**Groupe de ressources** = SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="bf714-483">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="bf714-484">**Emplacement** = Votre emplacement Azure</span><span class="sxs-lookup"><span data-stu-id="bf714-484">**Location** = Your azure location</span></span> |
| <span data-ttu-id="bf714-485">Configuration de la machine virtuelle - **Taille**</span><span class="sxs-lookup"><span data-stu-id="bf714-485">Virtual machine configuration **Size**</span></span> |<span data-ttu-id="bf714-486">**TAILLE** = DS1\_V2 (1 cœur, 3,5 Go)</span><span class="sxs-lookup"><span data-stu-id="bf714-486">**SIZE** = DS1\_V2 (1 core, 3.5 GB)</span></span> |<span data-ttu-id="bf714-487">**TAILLE** = DS2\_V2 (2 cœurs, 7 Go)</span><span class="sxs-lookup"><span data-stu-id="bf714-487">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span></br><span data-ttu-id="bf714-488">La taille doit prendre en charge un stockage SSD (prise en charge des disques Premium.</span><span class="sxs-lookup"><span data-stu-id="bf714-488">The size must support SSD storage (Premium disk support.</span></span> <span data-ttu-id="bf714-489">))</span><span class="sxs-lookup"><span data-stu-id="bf714-489">))</span></span> |<span data-ttu-id="bf714-490">**TAILLE** = DS2\_V2 (2 cœurs, 7 Go)</span><span class="sxs-lookup"><span data-stu-id="bf714-490">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span> |
| <span data-ttu-id="bf714-491">Configuration de la machine virtuelle - **Paramètres**</span><span class="sxs-lookup"><span data-stu-id="bf714-491">Virtual machine configuration **Settings**</span></span> |<span data-ttu-id="bf714-492">**Stockage** : Utiliser des disques gérés.</span><span class="sxs-lookup"><span data-stu-id="bf714-492">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="bf714-493">**Réseau virtuel** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="bf714-493">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="bf714-494">**Sous-réseau** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="bf714-494">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="bf714-495">**Adresse IP publique** générée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="bf714-495">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="bf714-496">**Groupe de sécurité réseau** = aucun</span><span class="sxs-lookup"><span data-stu-id="bf714-496">**Network security group** = None</span></span><br/><span data-ttu-id="bf714-497">**Diagnostics de surveillance** = activés</span><span class="sxs-lookup"><span data-stu-id="bf714-497">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="bf714-498">**Compte de stockage de diagnostics** = utilisez un compte de stockage généré automatiquement</span><span class="sxs-lookup"><span data-stu-id="bf714-498">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="bf714-499">**Groupe à haute disponibilité** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="bf714-499">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="bf714-500">**Stockage** : Utiliser des disques gérés.</span><span class="sxs-lookup"><span data-stu-id="bf714-500">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="bf714-501">**Réseau virtuel** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="bf714-501">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="bf714-502">**Sous-réseau** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="bf714-502">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="bf714-503">**Adresse IP publique** générée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="bf714-503">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="bf714-504">**Groupe de sécurité réseau** = aucun</span><span class="sxs-lookup"><span data-stu-id="bf714-504">**Network security group** = None</span></span><br/><span data-ttu-id="bf714-505">**Diagnostics de surveillance** = activés</span><span class="sxs-lookup"><span data-stu-id="bf714-505">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="bf714-506">**Compte de stockage de diagnostics** = utilisez un compte de stockage généré automatiquement</span><span class="sxs-lookup"><span data-stu-id="bf714-506">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="bf714-507">**Groupe à haute disponibilité** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="bf714-507">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="bf714-508">**Stockage** : Utiliser des disques gérés.</span><span class="sxs-lookup"><span data-stu-id="bf714-508">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="bf714-509">**Réseau virtuel** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="bf714-509">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="bf714-510">**Sous-réseau** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="bf714-510">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="bf714-511">**Adresse IP publique** générée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="bf714-511">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="bf714-512">**Groupe de sécurité réseau** = aucun</span><span class="sxs-lookup"><span data-stu-id="bf714-512">**Network security group** = None</span></span><br/><span data-ttu-id="bf714-513">**Diagnostics de surveillance** = activés</span><span class="sxs-lookup"><span data-stu-id="bf714-513">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="bf714-514">**Compte de stockage de diagnostics** = utilisez un compte de stockage généré automatiquement</span><span class="sxs-lookup"><span data-stu-id="bf714-514">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="bf714-515">**Groupe à haute disponibilité** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="bf714-515">**Availability set** = sqlAvailabilitySet</span></span><br/> |
| <span data-ttu-id="bf714-516">Configuration de la machine virtuelle - **Paramètres SQL Server**</span><span class="sxs-lookup"><span data-stu-id="bf714-516">Virtual machine configuration **SQL Server settings**</span></span> |<span data-ttu-id="bf714-517">Non applicable</span><span class="sxs-lookup"><span data-stu-id="bf714-517">Not applicable</span></span> |<span data-ttu-id="bf714-518">**Connectivité SQL** = privée (dans le réseau virtuel)</span><span class="sxs-lookup"><span data-stu-id="bf714-518">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="bf714-519">**Port** = 1433</span><span class="sxs-lookup"><span data-stu-id="bf714-519">**Port** = 1433</span></span><br/><span data-ttu-id="bf714-520">**Authentification SQL** = désactivée</span><span class="sxs-lookup"><span data-stu-id="bf714-520">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="bf714-521">**Configuration du stockage** = général</span><span class="sxs-lookup"><span data-stu-id="bf714-521">**Storage configuration** = General</span></span><br/><span data-ttu-id="bf714-522">**Mise à jour corrective automatisée** : dimanche à 2h00</span><span class="sxs-lookup"><span data-stu-id="bf714-522">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="bf714-523">**Sauvegarde automatisée** = désactivée</span><span class="sxs-lookup"><span data-stu-id="bf714-523">**Automated backup** = Disabled</span></span></br><span data-ttu-id="bf714-524">**Intégration Azure Key Vault** = Désactivée</span><span class="sxs-lookup"><span data-stu-id="bf714-524">**Azure Key Vault integration** = Disabled</span></span> |<span data-ttu-id="bf714-525">**Connectivité SQL** = privée (dans le réseau virtuel)</span><span class="sxs-lookup"><span data-stu-id="bf714-525">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="bf714-526">**Port** = 1433</span><span class="sxs-lookup"><span data-stu-id="bf714-526">**Port** = 1433</span></span><br/><span data-ttu-id="bf714-527">**Authentification SQL** = désactivée</span><span class="sxs-lookup"><span data-stu-id="bf714-527">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="bf714-528">**Configuration du stockage** = général</span><span class="sxs-lookup"><span data-stu-id="bf714-528">**Storage configuration** = General</span></span><br/><span data-ttu-id="bf714-529">**Mise à jour corrective automatisée** : dimanche à 2h00</span><span class="sxs-lookup"><span data-stu-id="bf714-529">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="bf714-530">**Sauvegarde automatisée** = désactivée</span><span class="sxs-lookup"><span data-stu-id="bf714-530">**Automated backup** = Disabled</span></span></br><span data-ttu-id="bf714-531">**Intégration Azure Key Vault** = Désactivée</span><span class="sxs-lookup"><span data-stu-id="bf714-531">**Azure Key Vault integration** = Disabled</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="bf714-532">Les tailles de machines suggérées ici sont destinées au test des groupes de disponibilité dans les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="bf714-532">The machine sizes suggested here are meant for testing availability groups in Azure VMs.</span></span> <span data-ttu-id="bf714-533">Pour optimiser les performances des charges de travail de production, consultez les recommandations relatives à la taille des machines SQL Server et à la configuration dans [Meilleures pratiques relatives aux performances de SQL Server dans les machines virtuelles Azure](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="bf714-533">For the best performance on production workloads, see the recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure virtual machines](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
>
>

<span data-ttu-id="bf714-534">Une fois les trois machines virtuelles entièrement configurées, vous devez les attacher au domaine **corp.contoso.com** et accorder à CORP\Install des droits d’administration sur les machines.</span><span class="sxs-lookup"><span data-stu-id="bf714-534">After the three VMs are fully provisioned, you need to join them to the **corp.contoso.com** domain and grant CORP\Install administrative rights to the machines.</span></span>

### <span data-ttu-id="bf714-535"><a name="joinDomain"></a>Joindre les serveurs au domaine</span><span class="sxs-lookup"><span data-stu-id="bf714-535"><a name="joinDomain"></a>Join the servers to the domain</span></span>

<span data-ttu-id="bf714-536">Vous pouvez maintenant joindre les machines virtuelles à **corp.contoso.com**. Procédez comme suit pour les machines virtuelles SQL Server et pour le serveur témoin de partage :</span><span class="sxs-lookup"><span data-stu-id="bf714-536">You're now able to join the VMs to **corp.contoso.com**. Do the following for both the SQL Server VMs and the file share witness server:</span></span>

1. <span data-ttu-id="bf714-537">Connectez-vous à distance à la machine virtuelle avec **BUILTIN\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="bf714-537">Remotely connect to the virtual machine with **BUILTIN\DomainAdmin**.</span></span>
2. <span data-ttu-id="bf714-538">Dans le **Gestionnaire de serveur**, cliquez sur **Serveur Local**.</span><span class="sxs-lookup"><span data-stu-id="bf714-538">In **Server Manager**, click **Local Server**.</span></span>
3. <span data-ttu-id="bf714-539">Cliquez sur le lien **GROUPE DE TRAVAIL**.</span><span class="sxs-lookup"><span data-stu-id="bf714-539">Click the **WORKGROUP** link.</span></span>
4. <span data-ttu-id="bf714-540">Dans la section **Nom de l’ordinateur**, cliquez sur **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="bf714-540">In the **Computer Name** section, click **Change**.</span></span>
5. <span data-ttu-id="bf714-541">Cochez la case **Domaine** et saisissez **corp.contoso.com** dans la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="bf714-541">Select the **Domain** check box and type **corp.contoso.com** in the text box.</span></span> <span data-ttu-id="bf714-542">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-542">Click **OK**.</span></span>
6. <span data-ttu-id="bf714-543">Dans la boîte de dialogue contextuelle **Sécurité Windows**, spécifiez les informations d’identification du compte d’administrateur de domaine par défaut (**CORP\DomainAdmin**) et le mot de passe (**Contoso!0000**).</span><span class="sxs-lookup"><span data-stu-id="bf714-543">In the **Windows Security** popup dialog, specify the credentials for the default domain administrator account (**CORP\DomainAdmin**) and the password (**Contoso!0000**).</span></span>
7. <span data-ttu-id="bf714-544">Lorsque le message « Bienvenue dans le domaine corp.contoso.com » s’affiche, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-544">When you see the "Welcome to the corp.contoso.com domain" message, click **OK**.</span></span>
8. <span data-ttu-id="bf714-545">Cliquez sur **Fermer**, puis sur **Redémarrer maintenant** dans la boîte de dialogue contextuelle.</span><span class="sxs-lookup"><span data-stu-id="bf714-545">Click **Close**, and then click **Restart Now** in the popup dialog.</span></span>

### <a name="add-the-corpinstall-user-as-an-administrator-on-each-cluster-vm"></a><span data-ttu-id="bf714-546">Ajoutez l’utilisateur Corp\Install en tant qu’administrateur sur chaque machine virtuelle du cluster</span><span class="sxs-lookup"><span data-stu-id="bf714-546">Add the Corp\Install user as an administrator on each cluster VM</span></span>

<span data-ttu-id="bf714-547">Après le redémarrage de chaque machine virtuelle en tant que membre du domaine, ajoutez **CORP\Install** comme membre du groupe Administrateurs local.</span><span class="sxs-lookup"><span data-stu-id="bf714-547">After each virtual machine restarts as a member of the domain, add **CORP\Install** as a member of the local administrators group.</span></span>

1. <span data-ttu-id="bf714-548">Patientez jusqu’à ce que la machine virtuelle ait redémarré, puis lancez de nouveau le fichier RDP à partir du contrôleur de domaine principal pour vous connecter à **sqlserver-0** à l’aide du compte **CORP\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="bf714-548">Wait until the VM is restarted, then launch the RDP file again from the primary domain controller to sign in to **sqlserver-0** by using the **CORP\DomainAdmin** account.</span></span>
   >[!TIP]
   ><span data-ttu-id="bf714-549">Assurez-vous d’ouvrir une session avec le compte Administrateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-549">Make sure that you sign in with the domain administrator account.</span></span> <span data-ttu-id="bf714-550">Dans les étapes précédentes, vous utilisiez le compte Administrateur BUILT IN.</span><span class="sxs-lookup"><span data-stu-id="bf714-550">In the previous steps, you were using the BUILT IN administrator account.</span></span> <span data-ttu-id="bf714-551">Maintenant que le serveur figure dans le domaine, utilisez le compte de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-551">Now that the server is in the domain, use the domain account.</span></span> <span data-ttu-id="bf714-552">Dans votre session RDP, spécifiez *DOMAINE*\\*nom d’utilisateur*.</span><span class="sxs-lookup"><span data-stu-id="bf714-552">In your RDP session, specify *DOMAIN*\\*username*.</span></span>

2. <span data-ttu-id="bf714-553">Dans **Gestionnaire de serveur**, sélectionnez **Outils**, puis cliquez sur **Gestion de l’ordinateur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-553">In **Server Manager**, select **Tools**, and then click **Computer Management**.</span></span>
3. <span data-ttu-id="bf714-554">Dans la fenêtre **Gestion de l’ordinateur**, développez **Utilisateurs et groupes locaux**, puis sélectionnez **Groupes**.</span><span class="sxs-lookup"><span data-stu-id="bf714-554">In the **Computer Management** window, expand **Local Users and Groups**, and then select **Groups**.</span></span>
4. <span data-ttu-id="bf714-555">Double-cliquez sur le groupe **Administrateurs** .</span><span class="sxs-lookup"><span data-stu-id="bf714-555">Double-click the **Administrators** group.</span></span>
5. <span data-ttu-id="bf714-556">Dans la boîte de dialogue **Propriétés de Administrateurs**, cliquez sur le bouton **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="bf714-556">In the **Administrators Properties** dialog, click the **Add** button.</span></span>
6. <span data-ttu-id="bf714-557">Entrez l’utilisateur **CORP\Install**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-557">Enter the user **CORP\Install**, and then click **OK**.</span></span>
7. <span data-ttu-id="bf714-558">Cliquez sur **OK** pour fermer la boîte de dialogue **Propriétés de Administrateurs**.</span><span class="sxs-lookup"><span data-stu-id="bf714-558">Click **OK** to close the **Administrator Properties** dialog.</span></span>
8. <span data-ttu-id="bf714-559">Répétez les étapes précédentes avec **sqlserver-1** et **cluster-fsw**.</span><span class="sxs-lookup"><span data-stu-id="bf714-559">Repeat the previous steps on **sqlserver-1** and **cluster-fsw**.</span></span>

### <span data-ttu-id="bf714-560"><a name="setServiceAccount"></a>Définir les comptes de service SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf714-560"><a name="setServiceAccount"></a>Set the SQL Server service accounts</span></span>

<span data-ttu-id="bf714-561">Sur chaque machine virtuelle SQL Server, définissez le compte de service SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-561">On each SQL Server VM, set the SQL Server service account.</span></span> <span data-ttu-id="bf714-562">Utilisez les comptes que vous avez créés lorsque vous avez [configuré les comptes de domaine](#DomainAccounts).</span><span class="sxs-lookup"><span data-stu-id="bf714-562">Use the accounts that you created when you [configured the domain accounts](#DomainAccounts).</span></span>

1. <span data-ttu-id="bf714-563">Ouvrez le **Gestionnaire de configuration de SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="bf714-563">Open **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="bf714-564">Cliquez avec le bouton droit sur le service SQL Server, puis cliquez sur **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="bf714-564">Right-click the SQL Server service, and then click **Properties**.</span></span>
3. <span data-ttu-id="bf714-565">Définissez le compte et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="bf714-565">Set the account and password.</span></span>
4. <span data-ttu-id="bf714-566">Répétez ces étapes sur l’autre machine virtuelle SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-566">Repeat these steps on the other SQL Server VM.</span></span>  

<span data-ttu-id="bf714-567">Pour les groupes de disponibilité SQL Server, chaque machine virtuelle SQL Server doit s’exécuter en tant que compte de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-567">For SQL Server availability groups, each SQL Server VM needs to run as a domain account.</span></span>

### <a name="create-a-sign-in-on-each-sql-server-vm-for-the-installation-account"></a><span data-ttu-id="bf714-568">Créer une connexion sur chaque machine virtuelle SQL Server pour le compte d’installation</span><span class="sxs-lookup"><span data-stu-id="bf714-568">Create a sign-in on each SQL Server VM for the installation account</span></span>

<span data-ttu-id="bf714-569">Utilisez le compte d’installation (CORP\install) pour configurer le groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="bf714-569">Use the installation account (CORP\install) to configure the availability group.</span></span> <span data-ttu-id="bf714-570">Ce compte doit être membre du rôle serveur fixe **sysadmin** pour chaque machine virtuelle SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-570">This account needs to be a member of the **sysadmin** fixed server role on each SQL Server VM.</span></span> <span data-ttu-id="bf714-571">Les étapes suivantes créent une connexion pour le compte d’installation :</span><span class="sxs-lookup"><span data-stu-id="bf714-571">The following steps create a sign-in for the installation account:</span></span>

1. <span data-ttu-id="bf714-572">Connectez-vous au serveur par le biais du protocole RDP (Remote Desktop Protocol) à l’aide du compte *\<MachineName\>\DomainAdmin*.</span><span class="sxs-lookup"><span data-stu-id="bf714-572">Connect to the server through the Remote Desktop Protocol (RDP) by using the *\<MachineName\>\DomainAdmin* account.</span></span>

1. <span data-ttu-id="bf714-573">Ouvrez SQL Server Management Studio et connectez-vous à l'instance locale de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-573">Open SQL Server Management Studio and connect to the local instance of SQL Server.</span></span>

1. <span data-ttu-id="bf714-574">Dans l'**Explorateur d’objets**, cliquez sur **Sécurité**.</span><span class="sxs-lookup"><span data-stu-id="bf714-574">In **Object Explorer**, click **Security**.</span></span>

1. <span data-ttu-id="bf714-575">Cliquez avec le bouton droit sur **Connexions**.</span><span class="sxs-lookup"><span data-stu-id="bf714-575">Right-click **Logins**.</span></span> <span data-ttu-id="bf714-576">Cliquez sur **Nouvelle connexion**.</span><span class="sxs-lookup"><span data-stu-id="bf714-576">Click **New Login**.</span></span>

1. <span data-ttu-id="bf714-577">Dans **Nouvelle connexion**, cliquez sur **Rechercher**.</span><span class="sxs-lookup"><span data-stu-id="bf714-577">In **Login - New**, click **Search**.</span></span>

1. <span data-ttu-id="bf714-578">Cliquez sur **Emplacements**.</span><span class="sxs-lookup"><span data-stu-id="bf714-578">Click **Locations**.</span></span>

1. <span data-ttu-id="bf714-579">Entrez les informations d’identification du réseau de l’administrateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="bf714-579">Enter the domain administrator network credentials.</span></span>

1. <span data-ttu-id="bf714-580">Utilisez le compte d’installation.</span><span class="sxs-lookup"><span data-stu-id="bf714-580">Use the installation account.</span></span>

1. <span data-ttu-id="bf714-581">Définissez la connexion à un membre du rôle serveur fixe **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="bf714-581">Set the sign-in to be a member of the **sysadmin** fixed server role.</span></span>

1. <span data-ttu-id="bf714-582">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf714-582">Click **OK**.</span></span>

<span data-ttu-id="bf714-583">Répétez les étapes précédentes sur l’autre machine virtuelle SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-583">Repeat the preceding steps on the other SQL Server VM.</span></span>

## <a name="add-failover-clustering-features-to-both-sql-server-vms"></a><span data-ttu-id="bf714-584">Ajouter les fonctionnalités de clustering de basculement aux deux machines virtuelles SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf714-584">Add Failover Clustering features to both SQL Server VMs</span></span>

<span data-ttu-id="bf714-585">Pour ajouter les fonctionnalités de clustering de basculement, procédez comme suit sur les deux machines virtuelles SQL Server :</span><span class="sxs-lookup"><span data-stu-id="bf714-585">To add Failover Clustering features, do the following on both SQL Server VMs:</span></span>

1. <span data-ttu-id="bf714-586">Connectez-vous à la machine virtuelle SQL Server par le biais du protocole RDP (Remote Desktop Protocol) à l’aide du compte *CORP\install*.</span><span class="sxs-lookup"><span data-stu-id="bf714-586">Connect to the SQL Server virtual machine through the Remote Desktop Protocol (RDP) by using the *CORP\install* account.</span></span> <span data-ttu-id="bf714-587">Ouvrez le **Tableau de bord de gestionnaire de serveur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-587">Open **Server Manager Dashboard**.</span></span>
2. <span data-ttu-id="bf714-588">Cliquez sur le lien du tableau de bord **Ajouter des rôles et fonctionnalités** .</span><span class="sxs-lookup"><span data-stu-id="bf714-588">Click the **Add roles and features** link on the dashboard.</span></span>

    ![Gestionnaire de serveur - Ajouter des rôles](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
3. <span data-ttu-id="bf714-590">Sélectionnez **Suivant** jusqu’à ce que vous atteigniez la section **Fonctionnalités de serveur**.</span><span class="sxs-lookup"><span data-stu-id="bf714-590">Select **Next** until you get to the **Server Features** section.</span></span>
4. <span data-ttu-id="bf714-591">Dans **Fonctionnalités**, sélectionnez **Clustering de basculement**.</span><span class="sxs-lookup"><span data-stu-id="bf714-591">In **Features**, select **Failover Clustering**.</span></span>
5. <span data-ttu-id="bf714-592">Ajoutez les fonctionnalités supplémentaires requises.</span><span class="sxs-lookup"><span data-stu-id="bf714-592">Add any additional required features.</span></span>
6. <span data-ttu-id="bf714-593">Cliquez sur **Installer** pour ajouter les fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="bf714-593">Click **Install** to add the features.</span></span>

<span data-ttu-id="bf714-594">Répétez les étapes sur l’autre machine virtuelle SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-594">Repeat the steps on the other SQL Server VM.</span></span>

## <a name="a-nameendpoint-firewall-configure-the-firewall-on-each-sql-server-vm"></a><span data-ttu-id="bf714-595"><a name="endpoint-firewall"> Configurer le pare-feu sur chaque machine virtuelle SQL Server</span><span class="sxs-lookup"><span data-stu-id="bf714-595"><a name="endpoint-firewall"> Configure the firewall on each SQL Server VM</span></span>

<span data-ttu-id="bf714-596">La solution nécessite l'ouverture des ports TCP suivants sur le pare-feu :</span><span class="sxs-lookup"><span data-stu-id="bf714-596">The solution requires the following TCP ports to be open in the firewall:</span></span>

- <span data-ttu-id="bf714-597">**Machine virtuelle SQL Server** :</span><span class="sxs-lookup"><span data-stu-id="bf714-597">**SQL Server VM**:</span></span><br/>
   <span data-ttu-id="bf714-598">le port 1433 pour une instance SQL Server par défaut.</span><span class="sxs-lookup"><span data-stu-id="bf714-598">Port 1433 for a default instance of SQL Server.</span></span>
- <span data-ttu-id="bf714-599">**Sonde Azure Load Balancer :**</span><span class="sxs-lookup"><span data-stu-id="bf714-599">**Azure load balancer probe:**</span></span><br/>
   <span data-ttu-id="bf714-600">N’importe quel port disponible.</span><span class="sxs-lookup"><span data-stu-id="bf714-600">Any available port.</span></span> <span data-ttu-id="bf714-601">Les exemples utilisent souvent le port 59999.</span><span class="sxs-lookup"><span data-stu-id="bf714-601">Examples frequently use 59999.</span></span>
- <span data-ttu-id="bf714-602">**Point de terminaison de mise en miroir de bases de données :**</span><span class="sxs-lookup"><span data-stu-id="bf714-602">**Database mirroring endpoint:**</span></span> <br/>
   <span data-ttu-id="bf714-603">N’importe quel port disponible.</span><span class="sxs-lookup"><span data-stu-id="bf714-603">Any available port.</span></span> <span data-ttu-id="bf714-604">Les exemples utilisent souvent le port 5022.</span><span class="sxs-lookup"><span data-stu-id="bf714-604">Examples frequently use 5022.</span></span>

<span data-ttu-id="bf714-605">Les ports du pare-feu doivent être ouverts sur les deux machines virtuelles SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-605">The firewall ports need to be open on both SQL Server VMs.</span></span>

<span data-ttu-id="bf714-606">La méthode d’ouverture des ports dépend de la solution de pare-feu que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="bf714-606">The method of opening the ports depends on the firewall solution that you use.</span></span> <span data-ttu-id="bf714-607">La section suivante explique comment ouvrir les ports sur le pare-feu Windows.</span><span class="sxs-lookup"><span data-stu-id="bf714-607">The next section explains how to open the ports in Windows Firewall.</span></span> <span data-ttu-id="bf714-608">Ouvrez les ports requis pour chacune de vos machines virtuelles SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-608">Open the required ports on each of your SQL Server VMs.</span></span>

### <a name="open-a-tcp-port-in-the-firewall"></a><span data-ttu-id="bf714-609">Ouvrir un Port TCP sur le pare-feu</span><span class="sxs-lookup"><span data-stu-id="bf714-609">Open a TCP port in the firewall</span></span>

1. <span data-ttu-id="bf714-610">Sur l'écran de **démarrage** du premier serveur SQL, lancez le **Pare-feu Windows avec fonctions de sécurité avancées**.</span><span class="sxs-lookup"><span data-stu-id="bf714-610">On the first SQL Server **Start** screen, launch **Windows Firewall with Advanced Security**.</span></span>
2. <span data-ttu-id="bf714-611">Dans le volet gauche, sélectionnez **Règles de trafic entrant**.</span><span class="sxs-lookup"><span data-stu-id="bf714-611">On the left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="bf714-612">Dans le volet droit, cliquez sur **Nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="bf714-612">On the right pane, click **New Rule**.</span></span>
3. <span data-ttu-id="bf714-613">Dans **Type de règle**, choisissez **Port**.</span><span class="sxs-lookup"><span data-stu-id="bf714-613">For **Rule Type**, choose **Port**.</span></span>
4. <span data-ttu-id="bf714-614">Pour le port, spécifiez **TCP** et entrez les numéros de port correspondants.</span><span class="sxs-lookup"><span data-stu-id="bf714-614">For the port, specify **TCP** and type the appropriate port numbers.</span></span> <span data-ttu-id="bf714-615">Voir l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="bf714-615">See the following example:</span></span>

   ![Pare-feu SQL](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/35-tcpports.png)

5. <span data-ttu-id="bf714-617">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="bf714-617">Click **Next**.</span></span>
6. <span data-ttu-id="bf714-618">Dans la page **Action**, sélectionnez **Autoriser la connexion**, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="bf714-618">On the **Action** page, keep **Allow the connection** selected, and then click **Next**.</span></span>
7. <span data-ttu-id="bf714-619">Dans la page **Profil**, acceptez les paramètres par défaut puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="bf714-619">On the **Profile** page, accept the default settings, and then click **Next**.</span></span>
8. <span data-ttu-id="bf714-620">Dans la page **Nom**, spécifiez un nom pour la règle (par exemple **Sondage Azure LB**) au sein de la zone de texte **Nom**, puis cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="bf714-620">On the **Name** page, specify a rule name (such as **Azure LB Probe**) in the **Name** text box, and then click **Finish**.</span></span>

<span data-ttu-id="bf714-621">Répétez ces étapes sur la seconde machine virtuelle SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bf714-621">Repeat these steps on the second SQL Server VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bf714-622">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="bf714-622">Next steps</span></span>

* [<span data-ttu-id="bf714-623">Créer un groupe de disponibilité AlwaysOn sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="bf714-623">Create a SQL Server Always On availability group on Azure virtual machines</span></span>](virtual-machines-windows-portal-sql-availability-group-tutorial.md)
