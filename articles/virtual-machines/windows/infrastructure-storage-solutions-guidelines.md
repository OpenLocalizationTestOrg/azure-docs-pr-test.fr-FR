---
title: solutions aaaStorage pour les machines virtuelles Windows dans Azure | Documents Microsoft
description: "Découvrez hello clé conception et implémentation des recommandations pour déployer des solutions de stockage dans les services d’infrastructure Azure."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 4ceb7d32-7a0d-4004-b701-c2bbcaff6b0b
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 57c27a7305964a56e6b2d1e73dee8e7da19fa8f8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-windows-vms"></a><span data-ttu-id="51184-103">Instructions pour les infrastructures Stockage Azure pour machines virtuelles Windows</span><span class="sxs-lookup"><span data-stu-id="51184-103">Azure storage infrastructure guidelines for Windows VMs</span></span>

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

<span data-ttu-id="51184-104">Cet article se concentre sur la compréhension des besoins de stockage et les considérations de conception pour obtenir des performances de machines virtuelles optimales.</span><span class="sxs-lookup"><span data-stu-id="51184-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="51184-105">Instructions d’implémentation pour le stockage</span><span class="sxs-lookup"><span data-stu-id="51184-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="51184-106">Décisions :</span><span class="sxs-lookup"><span data-stu-id="51184-106">Decisions:</span></span>

* <span data-ttu-id="51184-107">Vous allez toouse disques gérés d’Azure ou des disques non managés ?</span><span class="sxs-lookup"><span data-stu-id="51184-107">Are you going toouse Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="51184-108">Avez-vous besoin d’un stockage Standard ou Premium de toouse pour votre charge de travail ?</span><span class="sxs-lookup"><span data-stu-id="51184-108">Do you need toouse Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="51184-109">Avez-vous besoin de disques de toocreate d’agrégation par bandes supérieure à 4 To ?</span><span class="sxs-lookup"><span data-stu-id="51184-109">Do you need disk striping toocreate disks larger than 4TB?</span></span>
* <span data-ttu-id="51184-110">Avez-vous besoin des performances optimales d’e/s disque répartition tooachieve pour votre charge de travail ?</span><span class="sxs-lookup"><span data-stu-id="51184-110">Do you need disk striping tooachieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="51184-111">Le jeu de comptes de stockage devez-vous toohost votre charge de travail informatique ou d’infrastructure ?</span><span class="sxs-lookup"><span data-stu-id="51184-111">What set of storage accounts do you need toohost your IT workload or infrastructure?</span></span>

<span data-ttu-id="51184-112">Tâches :</span><span class="sxs-lookup"><span data-stu-id="51184-112">Tasks:</span></span>

* <span data-ttu-id="51184-113">Passez en revue les exigences d’e/s des applications hello vous déployez et planifiez le nombre approprié de hello et le type de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="51184-113">Review I/O demands of hello applications you are deploying and plan hello appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="51184-114">Créer un jeu hello de comptes de stockage à l’aide de votre convention d’affectation de noms.</span><span class="sxs-lookup"><span data-stu-id="51184-114">Create hello set of storage accounts using your naming convention.</span></span> <span data-ttu-id="51184-115">Vous pouvez utiliser Azure PowerShell ou le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="51184-115">You can use Azure PowerShell or hello portal.</span></span>

## <a name="storage"></a><span data-ttu-id="51184-116">Storage</span><span class="sxs-lookup"><span data-stu-id="51184-116">Storage</span></span>
<span data-ttu-id="51184-117">Azure Storage est un élément essentiel du déploiement et de la gestion des applications et des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="51184-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="51184-118">Le stockage Azure fournit des services pour le stockage des données de fichier, les données non structurées et les messages, et il fait également partie de l’infrastructure hello prenant en charge des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="51184-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of hello infrastructure supporting VMs.</span></span>

<span data-ttu-id="51184-119">[Les disques Azure géré](../../storage/storage-managed-disks-overview.md) gère le stockage pour vous coulisses hello.</span><span class="sxs-lookup"><span data-stu-id="51184-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind hello scenes.</span></span> <span data-ttu-id="51184-120">Avec des disques non managés, vous créez des comptes de stockage toohold des disques hello (fichiers VHD) pour vos machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="51184-120">With unmanaged disks, you create storage accounts toohold hello disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="51184-121">Lors de la montée en puissance, il se peut que vous devez vous assurer que vous avez créé des comptes de stockage supplémentaires afin de ne pas dépasser limite d’IOPS hello pour le stockage avec un de vos disques.</span><span class="sxs-lookup"><span data-stu-id="51184-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed hello IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="51184-122">Avec la gestion du stockage des disques gérés, vous n’êtes n’est plus limité par les limites de compte de stockage hello (tels que 20 000 IOPS / compte).</span><span class="sxs-lookup"><span data-stu-id="51184-122">With Managed Disks handling storage, you are no longer limited by hello storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="51184-123">Vous avez également n’est plus toocopy vos comptes de stockage toomultiple des images personnalisées (fichiers VHD).</span><span class="sxs-lookup"><span data-stu-id="51184-123">You also no longer have toocopy your custom images (VHD files) toomultiple storage accounts.</span></span> <span data-ttu-id="51184-124">Vous pouvez les gérer dans un emplacement central, un compte de stockage par région Azure et les utiliser toocreate des centaines d’ordinateurs virtuels dans un abonnement.</span><span class="sxs-lookup"><span data-stu-id="51184-124">You can manage them in a central location – one storage account per Azure region – and use them toocreate hundreds of VMs in a subscription.</span></span> <span data-ttu-id="51184-125">Nous vous recommandons d’utiliser des disques managés pour les nouveaux déploiements.</span><span class="sxs-lookup"><span data-stu-id="51184-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="51184-126">Il existe deux types de comptes de stockage disponibles dans pour prendre en charge les machines virtuelles :</span><span class="sxs-lookup"><span data-stu-id="51184-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="51184-127">Stockage standard comptes vous donnent accès stockage tooblob (utilisé pour le stockage des disques de machine virtuelle Azure), stockage, stockage de file d’attente, de table et un stockage de fichiers.</span><span class="sxs-lookup"><span data-stu-id="51184-127">Standard storage accounts give you access tooblob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="51184-128">[Stockage Premium](../../storage/storage-premium-storage.md) offrent une prise en charge des disques hautes performances à faible latence pour les charges de travail gourmandes en E/S, telles que des serveurs SQL dans un cluster AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="51184-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as SQL Servers in an AlwaysOn cluster.</span></span> <span data-ttu-id="51184-129">Actuellement, le Stockage Premium prend uniquement en charge les disques de machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="51184-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="51184-130">Azure crée des machines virtuelles avec un disque de système d’exploitation, et éventuellement plusieurs disques de données facultatifs.</span><span class="sxs-lookup"><span data-stu-id="51184-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="51184-131">disque de système d’exploitation Hello et des disques de données sont des objets BLOB de pages Azure tandis que le disque temporaire de hello est stockée localement sur le nœud hello où se trouve la machine de hello.</span><span class="sxs-lookup"><span data-stu-id="51184-131">hello operating system disk and data disks are Azure page blobs, whereas hello temporary disk is stored locally on hello node where hello machine lives.</span></span> <span data-ttu-id="51184-132">Prenez soin lors de la conception d’applications tooonly utilisent ce disque temporaire pour les données non persistantes en tant que machine virtuelle peut être migrée entre des ordinateurs hôtes pendant un événement de maintenance de hello.</span><span class="sxs-lookup"><span data-stu-id="51184-132">Take care when designing applications tooonly use this temporary disk for non-persistent data as hello VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="51184-133">Toutes les données stockées sur le disque temporaire de hello seraient perdues.</span><span class="sxs-lookup"><span data-stu-id="51184-133">Any data stored on hello temporary disk would be lost.</span></span>

<span data-ttu-id="51184-134">La durabilité et la haute disponibilité est fournie par hello sous-jacent Azure Storage environnement tooensure que vos données restent protégées contre les défaillances non planifiées de maintenance ou de matériel.</span><span class="sxs-lookup"><span data-stu-id="51184-134">Durability and high availability is provided by hello underlying Azure Storage environment tooensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="51184-135">Lorsque vous concevez votre environnement de stockage Azure, vous pouvez choisir le stockage de machine virtuelle tooreplicate :</span><span class="sxs-lookup"><span data-stu-id="51184-135">As you design your Azure Storage environment, you can choose tooreplicate VM storage:</span></span>

* <span data-ttu-id="51184-136">en local dans un centre de données Azure donné</span><span class="sxs-lookup"><span data-stu-id="51184-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="51184-137">entre centres de données Azure dans une région donnée</span><span class="sxs-lookup"><span data-stu-id="51184-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="51184-138">entre centres de données Azure dans des régions différentes</span><span class="sxs-lookup"><span data-stu-id="51184-138">across Azure datacenters across different regions</span></span>

<span data-ttu-id="51184-139">Vous pouvez lire [plus d’informations sur les options de réplication hello pour la haute disponibilité](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="51184-139">You can read [more about hello replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="51184-140">Les disques de système d’exploitation et disques de données ont une taille maximale de 4 To.</span><span class="sxs-lookup"><span data-stu-id="51184-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="51184-141">Vous pouvez utiliser des espaces de stockage dans Windows Server 2012 ou version ultérieure toosurpass cette limite en regroupant les disques toopresent logique des volumes de données supérieure à 4 To tooyour machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="51184-141">You can use Storage Spaces in Windows Server 2012 or later toosurpass this limit by pooling together data disks toopresent logical volumes larger than 4TB tooyour VM.</span></span>

<span data-ttu-id="51184-142">Il existe certaines limites d’évolutivité lors de la conception de vos déploiements de Stockage Azure. Consultez [Abonnement Microsoft Azure et limites, quotas et contraintes du service](../../azure-subscription-service-limits.md#storage-limits) pour plus de détails.</span><span class="sxs-lookup"><span data-stu-id="51184-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="51184-143">Voir également [Objectifs de performance et d’extensibilité de Stockage Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="51184-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="51184-144">En ce qui concerne le stockage d’applications, vous pouvez stocker des données d’objets non structurées, comme des documents, des images, des sauvegardes, des données de configuration, des journaux, etc.</span><span class="sxs-lookup"><span data-stu-id="51184-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="51184-145">à l’aide de Stockage Blob.</span><span class="sxs-lookup"><span data-stu-id="51184-145">using blob storage.</span></span> <span data-ttu-id="51184-146">Au lieu de votre application, l’écriture tooa disque virtuel attaché toohello VM, application hello permettre écrire directement tooAzure stockage d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="51184-146">Rather than your application writing tooa virtual disk attached toohello VM, hello application can write directly tooAzure blob storage.</span></span> <span data-ttu-id="51184-147">Stockage d’objets BLOB fournit également l’option hello de [à chaud et refroidir des niveaux de stockage](../../storage/storage-blob-storage-tiers.md) selon vos besoins de disponibilité et les contraintes liées au coût.</span><span class="sxs-lookup"><span data-stu-id="51184-147">Blob storage also provides hello option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="51184-148">Disques agrégés par bandes</span><span class="sxs-lookup"><span data-stu-id="51184-148">Striped disks</span></span>
<span data-ttu-id="51184-149">En plus de vous toocreate disques supérieure à 4 To, dans de nombreux cas, à l’aide de la répartition des disques de données améliore les performances en permettant à plusieurs objets BLOB de stockage de hello tooback pour un volume unique.</span><span class="sxs-lookup"><span data-stu-id="51184-149">Besides allowing you toocreate disks larger than 4TB, in many instances, using striping for data disks enhances performance by allowing multiple blobs tooback hello storage for a single volume.</span></span> <span data-ttu-id="51184-150">L’agrégation par bandes, hello d’e/s requis toowrite et les données lues à partir d’un seul disque logique se déroule en parallèle.</span><span class="sxs-lookup"><span data-stu-id="51184-150">With striping, hello I/O required toowrite and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="51184-151">Azure impose des limites de nombre de hello de disques de données et de la quantité de bande passante disponible, en fonction de la taille de machine virtuelle hello.</span><span class="sxs-lookup"><span data-stu-id="51184-151">Azure imposes limits on hello number of data disks and amount of bandwidth available, depending on hello VM size.</span></span> <span data-ttu-id="51184-152">Pour en savoir plus, voir la rubrique [Tailles de machines virtuelles](sizes.md).</span><span class="sxs-lookup"><span data-stu-id="51184-152">For details, see [Sizes for virtual machines](sizes.md).</span></span>

<span data-ttu-id="51184-153">Si vous utilisez l’entrelacement de disques de données Azure, tenez compte des hello instructions :</span><span class="sxs-lookup"><span data-stu-id="51184-153">If you are using disk striping for Azure data disks, consider hello following guidelines:</span></span>

* <span data-ttu-id="51184-154">Attachez les disques de données maximale hello autorisés pour hello taille de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="51184-154">Attach hello maximum data disks allowed for hello VM size.</span></span>
* <span data-ttu-id="51184-155">Utilisez les espaces de stockage.</span><span class="sxs-lookup"><span data-stu-id="51184-155">Use Storage Spaces.</span></span>
* <span data-ttu-id="51184-156">Évitez d’utiliser des options de mise en cache des disques de données Azure (Stratégie de mise en cache = Aucune).</span><span class="sxs-lookup"><span data-stu-id="51184-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="51184-157">Pour plus d’informations, voir la page [Espaces de stockage : une conception pour la performance](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="51184-157">For more information, see [Storage spaces - designing for performance](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="51184-158">Comptes de stockage multiples</span><span class="sxs-lookup"><span data-stu-id="51184-158">Multiple storage accounts</span></span>
<span data-ttu-id="51184-159">Cette section ne s’applique pas trop[disques gérés d’Azure](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), comme vous ne créez pas de comptes de stockage distinct.</span><span class="sxs-lookup"><span data-stu-id="51184-159">This section does not apply too[Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="51184-160">Lorsque vous concevez votre environnement de stockage Azure pour les disques non managés, vous pouvez utiliser plusieurs comptes de stockage en tant que nombre hello d’ordinateurs virtuels, vous déployez augmente.</span><span class="sxs-lookup"><span data-stu-id="51184-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as hello number of VMs you deploy increases.</span></span> <span data-ttu-id="51184-161">Cette approche permet de distribuer des hello d’e/s entre hello sous-jacent Azure Storage infrastructure toomaintain des performances optimales pour vos machines virtuelles et les applications.</span><span class="sxs-lookup"><span data-stu-id="51184-161">This approach helps distribute out hello I/O across hello underlying Azure Storage infrastructure toomaintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="51184-162">Conception hello les applications que vous déployez, tenez compte des exigences d’e/s de hello que chaque machine virtuelle a et équilibrer les machines virtuelles sur les comptes de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="51184-162">As you design hello applications that you are deploying, consider hello I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="51184-163">Essayez tooavoid regroupant tous les hello élevé d’e/s en exigeant des machines virtuelles dans des comptes de stockage toojust un ou deux.</span><span class="sxs-lookup"><span data-stu-id="51184-163">Try tooavoid grouping all hello high I/O demanding VMs in toojust one or two storage accounts.</span></span>

<span data-ttu-id="51184-164">Pour plus d’informations sur les fonctions hello d’e/s de différentes options de stockage Azure hello et certains recommandent des valeurs maximales, consultez [cibles de l’évolutivité et les performances de stockage Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="51184-164">For more information about hello I/O capabilities of hello different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="51184-165">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="51184-165">Next steps</span></span>
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]

