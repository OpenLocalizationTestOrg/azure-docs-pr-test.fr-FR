---
title: "SAP NetWeaver sur machines virtuelles Azure - Guide de déploiement SGBD | Microsoft Docs"
description: "SAP NetWeaver sur machines virtuelles Azure – Guide de déploiement SGBD"
services: virtual-machines-windows,virtual-network,storage
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: e0e05b5e-47aa-4c1e-bf83-0d62ee8f614e
ms.service: virtual-machines-windows
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: cc7c85382d8f8183ef3eb3cc7496b012808148e5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="sap-netweaver-on-azure-windows-virtual-machines-vms--dbms-deployment-guide"></a><span data-ttu-id="e5b98-103">SAP NetWeaver sur machines virtuelles Azure Windows – Guide de déploiement SGBD</span><span class="sxs-lookup"><span data-stu-id="e5b98-103">SAP NetWeaver on Azure Windows Virtual Machines (VMs) – DBMS Deployment Guide</span></span>
<span data-ttu-id="e5b98-104">[767598]:https://launchpad.support.sap.com/#/notes/767598</span><span class="sxs-lookup"><span data-stu-id="e5b98-104">[767598]:https://launchpad.support.sap.com/#/notes/767598</span></span>
<span data-ttu-id="e5b98-105">[773830]:https://launchpad.support.sap.com/#/notes/773830</span><span class="sxs-lookup"><span data-stu-id="e5b98-105">[773830]:https://launchpad.support.sap.com/#/notes/773830</span></span>
<span data-ttu-id="e5b98-106">[826037]:https://launchpad.support.sap.com/#/notes/826037</span><span class="sxs-lookup"><span data-stu-id="e5b98-106">[826037]:https://launchpad.support.sap.com/#/notes/826037</span></span>
<span data-ttu-id="e5b98-107">[965908]:https://launchpad.support.sap.com/#/notes/965908</span><span class="sxs-lookup"><span data-stu-id="e5b98-107">[965908]:https://launchpad.support.sap.com/#/notes/965908</span></span>
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
<span data-ttu-id="e5b98-108">[1139904]:https://launchpad.support.sap.com/#/notes/1139904</span><span class="sxs-lookup"><span data-stu-id="e5b98-108">[1139904]:https://launchpad.support.sap.com/#/notes/1139904</span></span>
<span data-ttu-id="e5b98-109">[1173395]:https://launchpad.support.sap.com/#/notes/1173395</span><span class="sxs-lookup"><span data-stu-id="e5b98-109">[1173395]:https://launchpad.support.sap.com/#/notes/1173395</span></span>
<span data-ttu-id="e5b98-110">[1245200]:https://launchpad.support.sap.com/#/notes/1245200</span><span class="sxs-lookup"><span data-stu-id="e5b98-110">[1245200]:https://launchpad.support.sap.com/#/notes/1245200</span></span>
<span data-ttu-id="e5b98-111">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span><span class="sxs-lookup"><span data-stu-id="e5b98-111">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span></span>
<span data-ttu-id="e5b98-112">[1558958]:https://launchpad.support.sap.com/#/notes/1558958</span><span class="sxs-lookup"><span data-stu-id="e5b98-112">[1558958]:https://launchpad.support.sap.com/#/notes/1558958</span></span>
<span data-ttu-id="e5b98-113">[1585981]:https://launchpad.support.sap.com/#/notes/1585981</span><span class="sxs-lookup"><span data-stu-id="e5b98-113">[1585981]:https://launchpad.support.sap.com/#/notes/1585981</span></span>
<span data-ttu-id="e5b98-114">[1588316]:https://launchpad.support.sap.com/#/notes/1588316</span><span class="sxs-lookup"><span data-stu-id="e5b98-114">[1588316]:https://launchpad.support.sap.com/#/notes/1588316</span></span>
<span data-ttu-id="e5b98-115">[1590719]:https://launchpad.support.sap.com/#/notes/1590719</span><span class="sxs-lookup"><span data-stu-id="e5b98-115">[1590719]:https://launchpad.support.sap.com/#/notes/1590719</span></span>
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
<span data-ttu-id="e5b98-116">[1605680]:https://launchpad.support.sap.com/#/notes/1605680</span><span class="sxs-lookup"><span data-stu-id="e5b98-116">[1605680]:https://launchpad.support.sap.com/#/notes/1605680</span></span>
<span data-ttu-id="e5b98-117">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span><span class="sxs-lookup"><span data-stu-id="e5b98-117">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span></span>
<span data-ttu-id="e5b98-118">[1619726]:https://launchpad.support.sap.com/#/notes/1619726</span><span class="sxs-lookup"><span data-stu-id="e5b98-118">[1619726]:https://launchpad.support.sap.com/#/notes/1619726</span></span>
<span data-ttu-id="e5b98-119">[1619967]:https://launchpad.support.sap.com/#/notes/1619967</span><span class="sxs-lookup"><span data-stu-id="e5b98-119">[1619967]:https://launchpad.support.sap.com/#/notes/1619967</span></span>
<span data-ttu-id="e5b98-120">[1750510]:https://launchpad.support.sap.com/#/notes/1750510</span><span class="sxs-lookup"><span data-stu-id="e5b98-120">[1750510]:https://launchpad.support.sap.com/#/notes/1750510</span></span>
<span data-ttu-id="e5b98-121">[1752266]:https://launchpad.support.sap.com/#/notes/1752266</span><span class="sxs-lookup"><span data-stu-id="e5b98-121">[1752266]:https://launchpad.support.sap.com/#/notes/1752266</span></span>
<span data-ttu-id="e5b98-122">[1757924]:https://launchpad.support.sap.com/#/notes/1757924</span><span class="sxs-lookup"><span data-stu-id="e5b98-122">[1757924]:https://launchpad.support.sap.com/#/notes/1757924</span></span>
<span data-ttu-id="e5b98-123">[1757928]:https://launchpad.support.sap.com/#/notes/1757928</span><span class="sxs-lookup"><span data-stu-id="e5b98-123">[1757928]:https://launchpad.support.sap.com/#/notes/1757928</span></span>
<span data-ttu-id="e5b98-124">[1758182]:https://launchpad.support.sap.com/#/notes/1758182</span><span class="sxs-lookup"><span data-stu-id="e5b98-124">[1758182]:https://launchpad.support.sap.com/#/notes/1758182</span></span>
<span data-ttu-id="e5b98-125">[1758496]:https://launchpad.support.sap.com/#/notes/1758496</span><span class="sxs-lookup"><span data-stu-id="e5b98-125">[1758496]:https://launchpad.support.sap.com/#/notes/1758496</span></span>
<span data-ttu-id="e5b98-126">[1772688]:https://launchpad.support.sap.com/#/notes/1772688</span><span class="sxs-lookup"><span data-stu-id="e5b98-126">[1772688]:https://launchpad.support.sap.com/#/notes/1772688</span></span>
<span data-ttu-id="e5b98-127">[1814258]:https://launchpad.support.sap.com/#/notes/1814258</span><span class="sxs-lookup"><span data-stu-id="e5b98-127">[1814258]:https://launchpad.support.sap.com/#/notes/1814258</span></span>
<span data-ttu-id="e5b98-128">[1882376]:https://launchpad.support.sap.com/#/notes/1882376</span><span class="sxs-lookup"><span data-stu-id="e5b98-128">[1882376]:https://launchpad.support.sap.com/#/notes/1882376</span></span>
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
<span data-ttu-id="e5b98-129">[1922555]:https://launchpad.support.sap.com/#/notes/1922555</span><span class="sxs-lookup"><span data-stu-id="e5b98-129">[1922555]:https://launchpad.support.sap.com/#/notes/1922555</span></span>
<span data-ttu-id="e5b98-130">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span><span class="sxs-lookup"><span data-stu-id="e5b98-130">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span></span>
<span data-ttu-id="e5b98-131">[1941500]:https://launchpad.support.sap.com/#/notes/1941500</span><span class="sxs-lookup"><span data-stu-id="e5b98-131">[1941500]:https://launchpad.support.sap.com/#/notes/1941500</span></span>
<span data-ttu-id="e5b98-132">[1956005]:https://launchpad.support.sap.com/#/notes/1956005</span><span class="sxs-lookup"><span data-stu-id="e5b98-132">[1956005]:https://launchpad.support.sap.com/#/notes/1956005</span></span>
<span data-ttu-id="e5b98-133">[1973241]:https://launchpad.support.sap.com/#/notes/1973241</span><span class="sxs-lookup"><span data-stu-id="e5b98-133">[1973241]:https://launchpad.support.sap.com/#/notes/1973241</span></span>
<span data-ttu-id="e5b98-134">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span><span class="sxs-lookup"><span data-stu-id="e5b98-134">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span></span>
<span data-ttu-id="e5b98-135">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span><span class="sxs-lookup"><span data-stu-id="e5b98-135">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span></span>
<span data-ttu-id="e5b98-136">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span><span class="sxs-lookup"><span data-stu-id="e5b98-136">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span></span>
<span data-ttu-id="e5b98-137">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span><span class="sxs-lookup"><span data-stu-id="e5b98-137">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span></span>
<span data-ttu-id="e5b98-138">[2039619]:https://launchpad.support.sap.com/#/notes/2039619</span><span class="sxs-lookup"><span data-stu-id="e5b98-138">[2039619]:https://launchpad.support.sap.com/#/notes/2039619</span></span>
<span data-ttu-id="e5b98-139">[2121797]:https://launchpad.support.sap.com/#/notes/2121797</span><span class="sxs-lookup"><span data-stu-id="e5b98-139">[2121797]:https://launchpad.support.sap.com/#/notes/2121797</span></span>
<span data-ttu-id="e5b98-140">[2134316]:https://launchpad.support.sap.com/#/notes/2134316</span><span class="sxs-lookup"><span data-stu-id="e5b98-140">[2134316]:https://launchpad.support.sap.com/#/notes/2134316</span></span>
<span data-ttu-id="e5b98-141">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span><span class="sxs-lookup"><span data-stu-id="e5b98-141">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span></span>
<span data-ttu-id="e5b98-142">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span><span class="sxs-lookup"><span data-stu-id="e5b98-142">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span></span>
<span data-ttu-id="e5b98-143">[2233094]:https://launchpad.support.sap.com/#/notes/2233094</span><span class="sxs-lookup"><span data-stu-id="e5b98-143">[2233094]:https://launchpad.support.sap.com/#/notes/2233094</span></span>
<span data-ttu-id="e5b98-144">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span><span class="sxs-lookup"><span data-stu-id="e5b98-144">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span></span>

[azure-cli]:../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:sap-dbms-guide.md 
[dbms-guide-2.1]:#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f 
[dbms-guide-2.2]:#c8e566f9-21b7-4457-9f7f-126036971a91 
[dbms-guide-2.3]:#10b041ef-c177-498a-93ed-44b3441ab152 
[dbms-guide-2]:#65fa79d6-a85f-47ee-890b-22e794f51a64 
[dbms-guide-3]:#871dfc27-e509-4222-9370-ab1de77021c3 
[dbms-guide-5.5.1]:#0fef0e79-d3fe-4ae2-85af-73666a6f7268 
[dbms-guide-5.5.2]:#f9071eff-9d72-4f47-9da4-1852d782087b 
[dbms-guide-5.6]:#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 
[dbms-guide-5.8]:#9053f720-6f3b-4483-904d-15dc54141e30 
[dbms-guide-5]:#3264829e-075e-4d25-966e-a49dad878737 
[dbms-guide-8.4.1]:#b48cfe3b-48e9-4f5b-a783-1d29155bd573 
[dbms-guide-8.4.2]:#23c78d3b-ca5a-4e72-8a24-645d141a3f5d 
[dbms-guide-8.4.3]:#77cd2fbb-307e-4cbf-a65f-745553f72d2c 
[dbms-guide-8.4.4]:#f77c1436-9ad8-44fb-a331-8671342de818 
[dbms-guide-900-sap-cache-server-on-premises]:#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:./media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:./media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:./media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:./media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:./media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:./media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:./media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:./media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:./media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:sap-deployment-guide.md 
[deployment-guide-2.2]:sap-deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 
[deployment-guide-3.1.2]:sap-deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab 
[deployment-guide-3.2]:sap-deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281 
[deployment-guide-3.3]:sap-deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 
[deployment-guide-3.4]:sap-deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:sap-deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e 
[deployment-guide-4.1]:sap-deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 
[deployment-guide-4.2]:sap-deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:sap-deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc 
[deployment-guide-4.4.2]:sap-deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 
[deployment-guide-4.4]:sap-deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d 
[deployment-guide-4.5.1]:sap-deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4 
[deployment-guide-4.5.2]:sap-deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f 
[deployment-guide-4.5]:sap-deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca 
[deployment-guide-5.1]:sap-deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 
[deployment-guide-5.2]:sap-deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1 
[deployment-guide-5.3]:sap-deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 

[deployment-guide-configure-monitoring-scenario-1]:sap-deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b 
[deployment-guide-configure-proxy]:sap-deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d 
[deployment-guide-figure-100]:./media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:./media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:sap-deployment-guide.md#figure-11
[deployment-guide-figure-1100]:./media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:./media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:./media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:sap-deployment-guide.md#figure-14
[deployment-guide-figure-1400]:./media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:./media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:./media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:sap-deployment-guide.md#figure-5
[deployment-guide-figure-50]:./media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:./media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:sap-deployment-guide.md#figure-6
[deployment-guide-figure-600]:./media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:sap-deployment-guide.md#figure-7
[deployment-guide-figure-700]:./media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:./media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:./media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:sap-deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:sap-deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:sap-deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:sap-deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b 

[deploy-template-cli]:../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:sap-get-started.md
[getting-started-dbms]:sap-get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:sap-get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:sap-get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[ha-guide]:sap-high-availability-guide.md

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:./media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:./media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:sap-planning-guide.md  
[planning-guide-1.2]:sap-planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff 
[planning-guide-11]:sap-planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 
[planning-guide-11.4.1]:sap-planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 
[planning-guide-11.5]:sap-planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f 
[planning-guide-2.1]:sap-planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 
[planning-guide-2.2]:sap-planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:sap-planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a 
[planning-guide-3.2.1]:sap-planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 
[planning-guide-3.2.2]:sap-planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 
[planning-guide-3.2.3]:sap-planning-guide.md#18810088-f9be-4c97-958a-27996255c665 
[planning-guide-3.2]:sap-planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 
[planning-guide-3.3.2]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 
[planning-guide-5.1.1]:sap-planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 
[planning-guide-5.1.2]:sap-planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c 
[planning-guide-5.2.1]:sap-planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef 
[planning-guide-5.2.2]:sap-planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 
[planning-guide-5.2]:sap-planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 
[planning-guide-5.3.1]:sap-planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 
[planning-guide-5.3.2]:sap-planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a 
[planning-guide-5.4.2]:sap-planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 
[planning-guide-5.5.1]:sap-planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 
[planning-guide-5.5.3]:sap-planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d 
[planning-guide-7.1]:sap-planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 
[planning-guide-7]:sap-planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 
[planning-guide-9.1]:sap-planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 
[planning-guide-azure-premium-storage]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 

[planning-guide-figure-100]:./media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:./media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:./media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:./media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:./media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:./media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:./media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:./media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:./media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:./media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:./media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:./media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:./media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:./media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:./media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:./media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:./media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:./media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:./media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:./media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:./media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:./media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:./media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:sap-planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd 
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:sap-planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f 

[powershell-install-configure]:/powershell/azureps-cmdlets-docs
[resource-group-authoring-templates]:../../resource-group-authoring-templates.md
[resource-group-overview]:../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam 
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../storage/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../storage/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../storage/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../storage/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../storage/storage-premium-storage.md
[storage-redundancy]:../../storage/storage-redundancy.md
[storage-scalability-targets]:../../storage/storage-scalability-targets.md
[storage-use-azcopy]:../../storage/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:../../resource-manager-deployment-model.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../linux/cli-deploy-templates.md (Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI)
[virtual-machines-deploy-rmtemplates-powershell]:../virtual-machines-windows-ps-manage.md (Manage virtual machines using Azure Resource Manager and PowerShell)
[virtual-machines-linux-agent-user-guide]:../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-linux-configure-lvm]:../linux/configure-lvm.md
[virtual-machines-linux-configure-raid]:../linux/configure-raid.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../linux/update-agent.md
[virtual-machines-manage-availability]:../virtual-machines-windows-manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:../virtual-machines-windows-ps-create.md
[virtual-machines-sizes]:sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:classic/ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:classic/ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:upload-image.md
[virtual-machines-windows-tutorial]:../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md
[vpn-gateway-vpn-faq]:../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../xplat-cli-azure-resource-manager.md

<span data-ttu-id="e5b98-145">Ce guide fait partie de la documentation sur l’implémentation et le déploiement des logiciels SAP sur Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-145">This guide is part of the documentation on implementing and deploying the SAP software on Microsoft Azure.</span></span> <span data-ttu-id="e5b98-146">Avant de lire ce guide, consultez le [Guide de planification et d’implémentation][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="e5b98-146">Before reading this guide, please read the [Planning and Implementation Guide][planning-guide].</span></span> <span data-ttu-id="e5b98-147">Ce document présente le déploiement de différents systèmes de gestion de base de données relationnelle (SGBDR) et des produits associés avec SAP sur Microsoft Azure Virtual Machines à l’aide des fonctionnalités Infrastructure as a Service (IaaS) d’Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-147">This document covers the deployment of various Relational Database Management Systems (RDBMS) and related products in combination with SAP on Microsoft Azure Virtual Machines (VMs) using the Azure Infrastructure as a Service (IaaS) capabilities.</span></span>

<span data-ttu-id="e5b98-148">Ce document vient compléter la documentation sur l’installation SAP et les notes SAP, qui constituent les ressources principales en matière d’installation et de déploiement de logiciels SAP sur des plateformes données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-148">The paper complements the SAP Installation Documentation and SAP Notes which represent the primary resources for installations and deployments of SAP software on given platforms</span></span>

## <a name="general-considerations"></a><span data-ttu-id="e5b98-149">Considérations d’ordre général</span><span class="sxs-lookup"><span data-stu-id="e5b98-149">General considerations</span></span>
<span data-ttu-id="e5b98-150">Ce chapitre présente les considérations générales concernant l’exécution de systèmes SGBD relationnelle SAP sur les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-150">In this chapter, considerations of running SAP related DBMS systems in Azure VMs are introduced.</span></span> <span data-ttu-id="e5b98-151">Il comporte peu de références à des systèmes SGBD spécifiques.</span><span class="sxs-lookup"><span data-stu-id="e5b98-151">There are few references to specific DBMS systems in this chapter.</span></span> <span data-ttu-id="e5b98-152">Les systèmes SGBD spécifiques sont couverts dans la suite de ce document, après ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="e5b98-152">Instead the specific DBMS systems are handled within this paper, after this chapter.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="e5b98-153">Préambule : définitions</span><span class="sxs-lookup"><span data-stu-id="e5b98-153">Definitions upfront</span></span>
<span data-ttu-id="e5b98-154">Les termes suivants seront utilisés dans le document :</span><span class="sxs-lookup"><span data-stu-id="e5b98-154">Throughout the document we will use the following terms:</span></span>

* <span data-ttu-id="e5b98-155">IaaS : Infrastructure as a Service.</span><span class="sxs-lookup"><span data-stu-id="e5b98-155">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="e5b98-156">PaaS : Platform as a Service.</span><span class="sxs-lookup"><span data-stu-id="e5b98-156">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="e5b98-157">SaaS : Software as a Service.</span><span class="sxs-lookup"><span data-stu-id="e5b98-157">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="e5b98-158">Composant SAP : application SAP individuelle telle que ECC, BW, Solution Manager ou EP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-158">SAP Component: an individual SAP application such as ECC, BW, Solution Manager or EP.</span></span>  <span data-ttu-id="e5b98-159">Les composants SAP peuvent être basés sur des technologies ABAP ou Java traditionnelles ou une application non basée sur NetWeaver telle que Business Objects.</span><span class="sxs-lookup"><span data-stu-id="e5b98-159">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="e5b98-160">Environnement SAP : un ou plusieurs composants SAP regroupés de manière logique pour exécuter une fonction métier telle que le développement, l’assurance qualité, la formation, la récupération d’urgence ou la production.</span><span class="sxs-lookup"><span data-stu-id="e5b98-160">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR or Production.</span></span>
* <span data-ttu-id="e5b98-161">Paysage SAP : ce terme fait référence à l’ensemble des ressources SAP dans le paysage informatique d’un client.</span><span class="sxs-lookup"><span data-stu-id="e5b98-161">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="e5b98-162">Le paysage SAP englobe tous les environnements de production et les autres types d’environnements.</span><span class="sxs-lookup"><span data-stu-id="e5b98-162">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="e5b98-163">Système SAP : ensemble couche SGBD/couche Application d’un système de développement SAP ERP, d’un système de test SAP BW, d’un système de production SAP CRM, etc. Dans les déploiements Azure, il n’est pas possible de séparer ces deux couches entre les sites et Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-163">SAP System: The combination of DBMS layer and application layer of e.g. an SAP ERP development system, SAP BW test system, SAP CRM production system, etc. In Azure deployments it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="e5b98-164">Cela signifie qu’un système SAP doit être déployé en local ou dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-164">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="e5b98-165">Vous pouvez toutefois déployer les différents systèmes d’un paysage SAP dans Azure ou en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-165">However, you can deploy the different systems of an SAP landscape in Azure or on-premises.</span></span> <span data-ttu-id="e5b98-166">Par exemple, vous pouvez déployer les systèmes de test et de développement SAP CRM dans Azure et le système de production SAP CRM en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-166">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="e5b98-167">Déploiement cloud uniquement : déploiement dans lequel l’abonnement Azure n’est pas connecté via une connexion ExpressRoute ou de site à site à l’infrastructure réseau locale.</span><span class="sxs-lookup"><span data-stu-id="e5b98-167">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="e5b98-168">Dans la documentation Azure courante, ces types de déploiements sont également décrits comme des déploiements « cloud uniquement ».</span><span class="sxs-lookup"><span data-stu-id="e5b98-168">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="e5b98-169">Les machines virtuelles déployées avec cette méthode sont accessibles via Internet et des points de terminaison Internet publics affectés aux machines virtuelles dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-169">Virtual Machines deployed with this method are accessed through the Internet and public Internet endpoints assigned to the VMs in Azure.</span></span> <span data-ttu-id="e5b98-170">Le répertoire Active Directory et le serveur DNS locaux ne sont pas étendus à Azure dans ces types de déploiements.</span><span class="sxs-lookup"><span data-stu-id="e5b98-170">The on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="e5b98-171">Par conséquent, les machines virtuelles ne font pas partie du répertoire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-171">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="e5b98-172">Remarque : dans ce document, les déploiements cloud uniquement sont définis comme des paysages SAP complets exécutés uniquement dans Azure, sans extension du répertoire Active Directory ou de la résolution de noms des sites au cloud public.</span><span class="sxs-lookup"><span data-stu-id="e5b98-172">Note: Cloud-Only deployments in this document are defined as complete SAP landscapes which are running exclusively in Azure without extension of Active Directory or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="e5b98-173">Les configurations cloud uniquement ne sont pas prises en charge pour les systèmes ou configurations SAP de production dans lesquels des ressources SAP STMS ou d’autres ressources locales doivent être utilisées entre les systèmes SAP hébergés sur Azure et les ressources en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-173">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
* <span data-ttu-id="e5b98-174">Intersite : décrit un scénario dans lequel les machines virtuelles sont déployées vers un abonnement Azure qui dispose d’une connectivité de site à site, multisite ou ExpressRoute entre les centres de données locaux et Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-174">Cross-Premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="e5b98-175">Dans la documentation Azure courante, ces types de déploiements sont également décrits comme des scénarios de déploiement entre différents locaux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-175">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="e5b98-176">La connexion a pour but d’étendre les domaines locaux, le répertoire Active Directory local et le serveur DNS local à Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-176">The reason for the connection is to extend on-premises domains, on-premises Active Directory and on-premises DNS into Azure.</span></span> <span data-ttu-id="e5b98-177">Le paysage local est étendu aux ressources Azure de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-177">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="e5b98-178">Grâce à cette extension, les machines virtuelles peuvent faire partie du domaine local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-178">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="e5b98-179">Les utilisateurs du domaine local peuvent accéder aux serveurs et exécuter des services (SGBD, par exemple) sur ces machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-179">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="e5b98-180">La communication et la résolution de noms entre les machines virtuelles déployées en local et les machines virtuelles déployées dans Azure est possible.</span><span class="sxs-lookup"><span data-stu-id="e5b98-180">Communication and name resolution between VMs deployed on-premises and VMs deployed in Azure is possible.</span></span> <span data-ttu-id="e5b98-181">Ce scénario devrait être le plus souvent utilisé pour le déploiement de ressources SAP sur Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-181">We expect this to be the most common scenario for deploying SAP assets on Azure.</span></span> <span data-ttu-id="e5b98-182">Pour plus d’informations, consultez [cet][vpn-gateway-cross-premises-options] article et [celui-ci][vpn-gateway-site-to-site-create].</span><span class="sxs-lookup"><span data-stu-id="e5b98-182">See [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create] for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="e5b98-183">Les déploiements intersites de systèmes SAP dans lesquels des machines virtuelles Azure exécutant des systèmes SAP font partie d’un domaine local sont pris en charge pour les systèmes SAP de production.</span><span class="sxs-lookup"><span data-stu-id="e5b98-183">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="e5b98-184">Les configurations entre différents locaux sont prises en charge pour le déploiement d’éléments ou de l’intégralité des paysages SAP dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-184">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="e5b98-185">Ces machines virtuelles doivent faire partie du domaine et des services Active Directory locaux même lorsque l’intégralité du paysage SAP est exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-185">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS.</span></span> <span data-ttu-id="e5b98-186">Dans les versions précédentes de la documentation, nous avons parlé des scénarios hybrides, où le terme « hybride » tient au fait qu’une connectivité entre différents locaux relie les sites et Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-186">In former versions of the documentation we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="e5b98-187">Dans ce cas, « hybride » signifie également que les machines virtuelles dans Azure font partie du répertoire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-187">In this case ‘Hybrid’ also means that the VMs in Azure are part of the on-premises Active Directory.</span></span>
>
>

<span data-ttu-id="e5b98-188">Certains documents Microsoft décrivent les scénarios de déploiement entre différents locaux de façon légèrement différente, en particulier pour les configurations SGBD haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="e5b98-188">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="e5b98-189">Dans les documents portant sur SAP, le scénario de déploiement entre différents locaux se résume simplement à la mise en œuvre d’une connectivité de site à site ou privée (ExpressRoute) et à la répartition du paysage SAP entre les sites et Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-189">In the case of the SAP related documents, the Cross-Premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and to the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>

### <a name="resources"></a><span data-ttu-id="e5b98-190">Ressources</span><span class="sxs-lookup"><span data-stu-id="e5b98-190">Resources</span></span>
<span data-ttu-id="e5b98-191">Les déploiements SAP sur Azure sont décrits dans les guides suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-191">The following guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="e5b98-192">[SAP NetWeaver sur machines virtuelles Azure – Guide de planification et d’implémentation][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="e5b98-192">[SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][planning-guide]</span></span>
* <span data-ttu-id="e5b98-193">[SAP NetWeaver sur machines virtuelles Azure – Guide de déploiement][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="e5b98-193">[SAP NetWeaver on Azure Virtual Machines (VMs) – Deployment Guide][deployment-guide]</span></span>
* <span data-ttu-id="e5b98-194">[SAP NetWeaver sur machines virtuelles Azure – Guide de déploiement SGBD (ce document)][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="e5b98-194">[SAP NetWeaver on Azure Virtual Machines (VMs) – DBMS Deployment Guide (this document)][dbms-guide]</span></span>
* <span data-ttu-id="e5b98-195">[SAP NetWeaver sur machines virtuelles Azure – Guide de déploiement haute disponibilité][ha-guide]</span><span class="sxs-lookup"><span data-stu-id="e5b98-195">[SAP NetWeaver on Azure Virtual Machines (VMs) – High Availability Deployment Guide][ha-guide]</span></span>

<span data-ttu-id="e5b98-196">Les notes SAP suivantes sont associées à la rubrique SAP sur Azure :</span><span class="sxs-lookup"><span data-stu-id="e5b98-196">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="e5b98-197">Numéro de la note</span><span class="sxs-lookup"><span data-stu-id="e5b98-197">Note number</span></span> | <span data-ttu-id="e5b98-198">Intitulé</span><span class="sxs-lookup"><span data-stu-id="e5b98-198">Title</span></span> |
| --- | --- |
| <span data-ttu-id="e5b98-199">[1928533]</span><span class="sxs-lookup"><span data-stu-id="e5b98-199">[1928533]</span></span> |<span data-ttu-id="e5b98-200">Applications SAP sur Azure : produits et types de machines virtuelles pris en charge</span><span class="sxs-lookup"><span data-stu-id="e5b98-200">SAP Applications on Azure: Supported Products and Azure VM types</span></span> |
| <span data-ttu-id="e5b98-201">[2015553]</span><span class="sxs-lookup"><span data-stu-id="e5b98-201">[2015553]</span></span> |<span data-ttu-id="e5b98-202">SAP sur Microsoft Azure : configuration requise</span><span class="sxs-lookup"><span data-stu-id="e5b98-202">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="e5b98-203">[1999351]</span><span class="sxs-lookup"><span data-stu-id="e5b98-203">[1999351]</span></span> |<span data-ttu-id="e5b98-204">Résolution des problèmes de surveillance Azure améliorée pour SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-204">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="e5b98-205">[2178632]</span><span class="sxs-lookup"><span data-stu-id="e5b98-205">[2178632]</span></span> |<span data-ttu-id="e5b98-206">Métriques de surveillance clés pour SAP sur Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-206">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="e5b98-207">[1409604]</span><span class="sxs-lookup"><span data-stu-id="e5b98-207">[1409604]</span></span> |<span data-ttu-id="e5b98-208">Virtualisation sur Windows : surveillance améliorée</span><span class="sxs-lookup"><span data-stu-id="e5b98-208">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="e5b98-209">[2191498]</span><span class="sxs-lookup"><span data-stu-id="e5b98-209">[2191498]</span></span> |<span data-ttu-id="e5b98-210">SAP sur Linux avec Azure : surveillance améliorée</span><span class="sxs-lookup"><span data-stu-id="e5b98-210">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="e5b98-211">[2039619]</span><span class="sxs-lookup"><span data-stu-id="e5b98-211">[2039619]</span></span> |<span data-ttu-id="e5b98-212">Exécution d’applications SAP sur Microsoft Azure à l’aide d’Oracle Database : produits et versions pris en charge</span><span class="sxs-lookup"><span data-stu-id="e5b98-212">SAP Applications on Microsoft Azure using the Oracle Database: Supported Products and Versions</span></span> |
| <span data-ttu-id="e5b98-213">[2233094]</span><span class="sxs-lookup"><span data-stu-id="e5b98-213">[2233094]</span></span> |<span data-ttu-id="e5b98-214">DB6 : Exécution d’applications SAP sur Azure à l’aide d’IBM DB2 pour Linux, UNIX et Windows - Informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="e5b98-214">DB6: SAP Applications on Azure Using IBM DB2 for Linux, UNIX, and Windows - Additional Information</span></span> |
| <span data-ttu-id="e5b98-215">[2243692]</span><span class="sxs-lookup"><span data-stu-id="e5b98-215">[2243692]</span></span> |<span data-ttu-id="e5b98-216">Linux sur Microsoft Azure Virtual Machines (IaaS) : problèmes de licence SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-216">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="e5b98-217">[1984787]</span><span class="sxs-lookup"><span data-stu-id="e5b98-217">[1984787]</span></span> |<span data-ttu-id="e5b98-218">SUSE LINUX Enterprise Server 12 : Notes d’installation</span><span class="sxs-lookup"><span data-stu-id="e5b98-218">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="e5b98-219">[2002167]</span><span class="sxs-lookup"><span data-stu-id="e5b98-219">[2002167]</span></span> |<span data-ttu-id="e5b98-220">Red Hat Enterprise Linux 7.x : Installation et mise à niveau</span><span class="sxs-lookup"><span data-stu-id="e5b98-220">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |

<span data-ttu-id="e5b98-221">Consultez également le [Wiki SCN](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) qui regroupe toutes les notes SAP pour Linux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-221">Please also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="e5b98-222">Vous devez avoir une connaissance pratique de l’architecture Microsoft Azure, ainsi que du déploiement et du fonctionnement des machines virtuelles Microsoft Azure Virtual Machines.</span><span class="sxs-lookup"><span data-stu-id="e5b98-222">You should have a working knowledge about the Microsoft Azure Architecture and how Microsoft Azure Virtual Machines are deployed and operated.</span></span> <span data-ttu-id="e5b98-223">Pour plus d’informations, consultez la page <https://azure.microsoft.com/documentation/></span><span class="sxs-lookup"><span data-stu-id="e5b98-223">You can find more information here <https://azure.microsoft.com/documentation/></span></span>

> [!NOTE]
> <span data-ttu-id="e5b98-224">Nous ne traitons **pas** ici des offres Platform as a Service (PaaS) de la plateforme Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-224">We are **not** discussing Microsoft Azure Platform as a Service (PaaS) offerings of the Microsoft Azure Platform.</span></span> <span data-ttu-id="e5b98-225">Ce document porte sur l’exécution d’un système de gestion de base de données (SGBD) dans Microsoft Azure Virtual Machines (IaaS) de la même manière que dans un environnement local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-225">This paper is about running a database management system (DBMS) in Microsoft Azure Virtual Machines (IaaS) just as you would run the DBMS in your on-premises environment.</span></span> <span data-ttu-id="e5b98-226">Les capacités et fonctionnalités de base de données de ces deux services sont très différentes et ne doivent pas être confondues.</span><span class="sxs-lookup"><span data-stu-id="e5b98-226">Database capabilities and functionalities between these two offers are very different and should not be mixed up with each other.</span></span> <span data-ttu-id="e5b98-227">Voir aussi : <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="e5b98-227">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
>
>

<span data-ttu-id="e5b98-228">Comme il est ici question de l’IaaS, l’installation et la configuration de Windows, de Linux et du SGBD sont en règle générale globalement les mêmes qu’avec une machine virtuelle ou un ordinateur nu que vous installeriez en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-228">Since we are discussing IaaS, in general the Windows, Linux and DBMS installation and configuration are essentially the same as any virtual machine or bare metal machine you would install on-premises.</span></span> <span data-ttu-id="e5b98-229">Cependant, les décisions en matière d’implémentation de la gestion de l’architecture et des systèmes diffèrent sur certains points.</span><span class="sxs-lookup"><span data-stu-id="e5b98-229">However, there are some architecture and system management implementation decisions which will be different when utilizing IaaS.</span></span> <span data-ttu-id="e5b98-230">Ce document a pour objet d’expliquer les différences spécifiques de gestion de l’architecture et des systèmes auxquelles vous devez être préparé lors de l’utilisation de l’IaaS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-230">The purpose of this document is to explain the specific architectural and system management differences that you must be prepared for when using IaaS.</span></span>

<span data-ttu-id="e5b98-231">Les différences abordées dans ce document portent sur les points généraux suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-231">In general, the overall areas of difference that this paper will discuss are:</span></span>

* <span data-ttu-id="e5b98-232">Planification de la disposition des machines virtuelles/disques durs virtuels des systèmes SAP pour s’assurer que la disposition des fichiers de données est appropriée et que le nombre potentiel d’E/S par seconde est suffisant pour la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="e5b98-232">Planning the proper VM/VHD layout of SAP systems to ensure you have the proper data file layout and can achieve enough IOPS for your workload.</span></span>
* <span data-ttu-id="e5b98-233">Considérations relatives à la mise en réseau lors de l’utilisation de l’IaaS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-233">Networking considerations when using IaaS.</span></span>
* <span data-ttu-id="e5b98-234">Fonctionnalités de base de données spécifiques à utiliser afin d’optimiser la disposition des bases de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-234">Specific database features to use in order to optimize the database layout.</span></span>
* <span data-ttu-id="e5b98-235">Considérations relatives à la sauvegarde et à la restauration de l’IaaS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-235">Backup and restore considerations in IaaS.</span></span>
* <span data-ttu-id="e5b98-236">Utilisation de différents types d’images pour le déploiement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-236">Utilizing different types of images for deployment.</span></span>
* <span data-ttu-id="e5b98-237">Haute disponibilité dans Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-237">High Availability in Azure IaaS.</span></span>

## <span data-ttu-id="e5b98-238"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure d’un déploiement SGBDR</span><span class="sxs-lookup"><span data-stu-id="e5b98-238"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure of a RDBMS Deployment</span></span>
<span data-ttu-id="e5b98-239">Pour pouvoir suivre ce chapitre, il est nécessaire de comprendre le contenu de [ce][deployment-guide-3] chapitre du [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="e5b98-239">In order follow this chapter, it is necessary to understand what was presented in [this][deployment-guide-3] chapter of the [Deployment Guide][deployment-guide].</span></span> <span data-ttu-id="e5b98-240">Vous devez savoir ce qui distingue les différentes séries de machines virtuelles et connaître les différences entre les offres de stockage Azure Standard et Premium Storage avant de lire ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="e5b98-240">Knowledge about the different VM-Series and their differences and differences of Azure Standard and Premium Storage should be understood and known before reading this chapter.</span></span>

<span data-ttu-id="e5b98-241">Jusqu’à mars 2015, la taille des disques durs virtuels Azure contenant un système d’exploitation était limitée à 127 Go.</span><span class="sxs-lookup"><span data-stu-id="e5b98-241">Until March 2015, Azure VHDs which contain an operating system were limited to 127 GB in size.</span></span> <span data-ttu-id="e5b98-242">Cette limitation a été levée en mars 2015 (pour plus d’informations, voir <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>).</span><span class="sxs-lookup"><span data-stu-id="e5b98-242">This limitation got lifted in March 2015 (for more information check <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/> ).</span></span> <span data-ttu-id="e5b98-243">Depuis lors, les disques durs virtuels contenant le système d’exploitation peuvent présenter la même taille que n’importe quel autre disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-243">From there on VHDs containing the operating system can have the same size as any other VHD.</span></span> <span data-ttu-id="e5b98-244">Cependant, nous continuons à privilégier une structure de déploiement dans laquelle le système d’exploitation, le SGBD et les fichiers binaires SAP éventuels sont séparés des fichiers de base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-244">Nevertheless, we still prefer a structure of deployment where the operating system, DBMS and eventual SAP binaries are separate from the database files.</span></span> <span data-ttu-id="e5b98-245">Les systèmes SAP exécutés dans Azure Virtual Machines doivent donc avoir la même machine virtuelle (ou le même disque dur virtuel) de base installée avec le système d’exploitation, les exécutables du système de gestion de base de données et les exécutables SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-245">Therefore, we expect SAP systems running in Azure Virtual Machines will have the base VM (or VHD) installed with the operating system, database management system executables and SAP executables.</span></span> <span data-ttu-id="e5b98-246">Les fichiers de données et journaux du SGBD seront stockés dans Azure Storage (Standard ou Premium Storage) dans des fichiers de disques durs virtuels distincts et attachés en tant que disques logiques à la machine virtuelle image du système d’exploitation Azure d’origine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-246">The DBMS data and log files will be stored in Azure Storage (Standard or Premium Storage) in separate VHD files and attached as logical disks to the original Azure operating system image VM.</span></span>

<span data-ttu-id="e5b98-247">Selon que vous tirez parti du stockage Azure Standard ou du Stockage Premium (par exemple en utilisant les machines virtuelles de la série DS ou de la série GS), il existe d’autres quotas dans Azure qui sont expliqués [ici][virtual-machines-sizes].</span><span class="sxs-lookup"><span data-stu-id="e5b98-247">Dependent on leveraging Azure Standard or Premium Storage (e.g. by using the DS-series or GS-series VMs) there are other quotas in Azure which are documented [here][virtual-machines-sizes].</span></span> <span data-ttu-id="e5b98-248">Lors de la planification des disques durs virtuels Azure, vous devez trouver le meilleur compromis entre les quotas pour les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-248">When planning your Azure VHDs, you’ll need to find the best balance of the quotas for the following:</span></span>

* <span data-ttu-id="e5b98-249">Le nombre de fichiers de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-249">The number of data files.</span></span>
* <span data-ttu-id="e5b98-250">Le nombre de disques durs virtuels qui contiennent les fichiers.</span><span class="sxs-lookup"><span data-stu-id="e5b98-250">The number of VHDs which contain the files.</span></span>
* <span data-ttu-id="e5b98-251">Les quotas d’E/S par seconde d’un disque dur virtuel unique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-251">The IOPS quotas of a single VHD.</span></span>
* <span data-ttu-id="e5b98-252">Le débit de données par disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-252">The data throughput per VHD.</span></span>
* <span data-ttu-id="e5b98-253">Le nombre de disques durs virtuels supplémentaires possibles par taille de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-253">The number of additional VHDs possible per VM size.</span></span>
* <span data-ttu-id="e5b98-254">Le débit de stockage global qu’une machine virtuelle peut offrir.</span><span class="sxs-lookup"><span data-stu-id="e5b98-254">The overall storage throughput a VM can provide.</span></span>

<span data-ttu-id="e5b98-255">Azure applique un quota d’E/S par seconde par lecteur de disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-255">Azure will enforce an IOPS quota per VHD drive.</span></span> <span data-ttu-id="e5b98-256">Ces quotas sont différents pour les disques durs virtuels selon qu’ils sont hébergés sur le stockage Azure Standard ou Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-256">These quotas are different for VHDs hosted on Azure Standard Storage and Premium Storage.</span></span> <span data-ttu-id="e5b98-257">Les latences d’E/S diffèrent également considérablement entre ces deux types de stockage, Premium Storage offrant des latences d’E/S plusieurs fois inférieures.</span><span class="sxs-lookup"><span data-stu-id="e5b98-257">I/O latencies will also be very different between the two storage types with Premium Storage delivering factors better I/O latencies.</span></span> <span data-ttu-id="e5b98-258">Avec chaque type de machines virtuelles, vous ne pouvez attacher qu’un nombre limité de disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="e5b98-258">Each of the different VM types have a limited number of VHDs that you are able to attach.</span></span> <span data-ttu-id="e5b98-259">Une autre restriction concerne le fait que seuls certains types de machines virtuelles peuvent tirer parti d’Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-259">Another restriction is that only certain VM types can leverage Azure Premium Storage.</span></span> <span data-ttu-id="e5b98-260">Cela signifie que le choix d’un certain type de machines virtuelles peut non seulement être guidé par les besoins en puissance de processeur et en mémoire, mais également par les exigences en matière d’E/S par seconde, de latence et de débit de disque, auxquelles l’augmentation du nombre de disques durs virtuels ou le type de disques Premium Storage permettent généralement de répondre.</span><span class="sxs-lookup"><span data-stu-id="e5b98-260">This means the decision for a certain VM type might not only be driven by the CPU and memory requirements, but also by the IOPS, latency and disk throughput requirements that usually are scaled with the number of VHDs or the type of Premium Storage disks.</span></span> <span data-ttu-id="e5b98-261">Avec le stockage Premium Storage en particulier, la taille d’un disque dur virtuel peut également être dictée par le nombre d’E/S et le débit qui doit être atteint par chaque disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-261">Especially with Premium Storage the size of a VHD also might be dictated by the number of IOPS and throughput that needs to be achieved by each VHD.</span></span>

<span data-ttu-id="e5b98-262">Comme le taux d’E/S par seconde global, le nombre de disques durs virtuels montés et la taille de la machine virtuelle sont tous liés, une configuration Azure d’un système SAP peut être différente de celle de son déploiement local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-262">The fact that the overall IOPS rate, the number of VHDs mounted, and the size of the VM are all tied together, might cause an Azure configuration of an SAP system to be different than its on-premises deployment.</span></span> <span data-ttu-id="e5b98-263">Les limites d’E/S par seconde par LUN sont généralement configurables dans les déploiements locaux,</span><span class="sxs-lookup"><span data-stu-id="e5b98-263">The IOPS limits per LUN are usually configurable in on-premises deployments.</span></span> <span data-ttu-id="e5b98-264">alors qu’avec Azure Storage elles sont fixes ou, dans le cas de Premium Storage, elles dépendent du type de disque.</span><span class="sxs-lookup"><span data-stu-id="e5b98-264">Whereas with Azure Storage those limits are fixed or as in Premium Storage dependent on the disk type.</span></span> <span data-ttu-id="e5b98-265">Avec des déploiements locaux, nous voyons des configurations client de serveurs de base de données qui utilisent de nombreux volumes différents pour des exécutables spéciaux tels que SAP et le SGBD, ou des volumes spéciaux pour les bases de données ou les espaces de table temporaires.</span><span class="sxs-lookup"><span data-stu-id="e5b98-265">So with on-premises deployments we see customer configurations of database servers which are using many different volumes for special executables like SAP and the DBMS or special volumes for temporary databases or table spaces.</span></span> <span data-ttu-id="e5b98-266">La migration d’un système local de ce type vers Azure peut donner lieu à une perte de bande passante d’E/S par seconde en gaspillant un disque dur virtuel pour des exécutables ou des bases de données qui n’effectuent pas un grand nombre d’E/S par seconde, voire aucune.</span><span class="sxs-lookup"><span data-stu-id="e5b98-266">When such an on-premises system is moved to Azure it might lead to a waste of potential IOPS bandwidth by wasting a VHD for executables or databases which do not perform any or not a lot of IOPS.</span></span> <span data-ttu-id="e5b98-267">Dans les machines virtuelles Azure, nous recommandons donc si possible d’installer le SGBD et les exécutables SAP sur le disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-267">Therefore, in Azure VMs we recommend that the DBMS and SAP executables be installed on the OS disk if possible.</span></span>

<span data-ttu-id="e5b98-268">L’emplacement des fichiers de base de données et des fichiers journaux et le type de stockage Azure Storage utilisé doit être dicté par les besoins en E/S par seconde, en latence et en débit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-268">The placement of the database files and log files and the type of Azure Storage used, should be defined by IOPS, latency and throughput requirements.</span></span> <span data-ttu-id="e5b98-269">Afin de bénéficier d’un nombre suffisant d’E/S par seconde pour le journal des transactions, il se peut que vous soyez obligé de tirer parti de plusieurs disques durs virtuels pour le fichier du journal des transactions ou d’utiliser un plus grand disque Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-269">In order to have enough IOPS for the transaction log, you might be forced to leverage multiple VHDs for the transaction log file or use a larger Premium Storage disk.</span></span> <span data-ttu-id="e5b98-270">Dans ce cas, vous créeriez simplement un RAID logiciel (par exemple, un pool de stockage Windows pour Windows ou MDADM pour LVM (Logical Volume manager)) avec les disques durs virtuels qui contiennent le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="e5b98-270">In such a case one would simply build a software RAID (e.g. Windows Storage Pool for Windows or MDADM and LVM (Logical Volume Manager) for Linux) with the VHDs which will contain the transaction log.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="e5b98-272">Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-272">Windows</span></span>
>
> <span data-ttu-id="e5b98-273">Le lecteur D:\ dans une machine virtuelle Azure est un lecteur non persistant soutenu par des disques locaux sur le nœud de calcul Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-273">Drive D:\ in an Azure VM is a non-persisted drive which is backed by some local disks on the Azure compute node.</span></span> <span data-ttu-id="e5b98-274">Comme il est non persistant, cela signifie que toutes les modifications apportées au contenu sur le lecteur D:\ sont perdues lors du redémarrage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-274">Because it is non-persisted, this means that any changes made to the content on the D:\ drive is lost when the VM is rebooted.</span></span> <span data-ttu-id="e5b98-275">Par modifications, nous entendons les fichiers enregistrés, les répertoires créés, les applications installées, etc.</span><span class="sxs-lookup"><span data-stu-id="e5b98-275">By "any changes", we mean saved files, directories created, applications installed, etc.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="e5b98-277">Linux</span><span class="sxs-lookup"><span data-stu-id="e5b98-277">Linux</span></span>
>
> <span data-ttu-id="e5b98-278">Les machines virtuelles Azure Linux montent automatiquement un lecteur à l’emplacement /mnt/resource. Il s’agit d’un lecteur non persistant soutenu par des disques locaux sur le nœud de calcul Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-278">Linux Azure VMs automatically mount a drive at /mnt/resource which is a non-persisted drive backed by local disks on the Azure compute node.</span></span> <span data-ttu-id="e5b98-279">Comme il est non persistant, cela signifie que toutes les modifications apportées au contenu à l’emplacement /mnt/resource sont perdues lors du redémarrage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-279">Because it is non-persisted, this means that any changes made to content in /mnt/resource is lost when the VM is rebooted.</span></span> <span data-ttu-id="e5b98-280">Par modifications, nous entendons les fichiers enregistrés, les répertoires créés, les applications installées, etc.</span><span class="sxs-lookup"><span data-stu-id="e5b98-280">By any changes, we mean files saved, directories created, applications installed, etc.</span></span>
>
>

- - -
<span data-ttu-id="e5b98-281">Selon la série de machines virtuelles Azure, les disques locaux du nœud de calcul affichent des performances différentes qui peuvent être classées comme suit :</span><span class="sxs-lookup"><span data-stu-id="e5b98-281">Dependent on the Azure VM-series, the local disks on the compute node show different performance which can be categorized like:</span></span>

* <span data-ttu-id="e5b98-282">A0-A7 : performances très limitées.</span><span class="sxs-lookup"><span data-stu-id="e5b98-282">A0-A7: Very limited performance.</span></span> <span data-ttu-id="e5b98-283">Non utilisables pour autre chose que le fichier d’échange Windows.</span><span class="sxs-lookup"><span data-stu-id="e5b98-283">Not usable for anything beyond windows page file</span></span>
* <span data-ttu-id="e5b98-284">A8-A11 : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="e5b98-284">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="e5b98-285">Série D : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="e5b98-285">D-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="e5b98-286">Série DS : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="e5b98-286">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="e5b98-287">Série G : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="e5b98-287">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="e5b98-288">Série GS : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="e5b98-288">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>

<span data-ttu-id="e5b98-289">Les chiffres donnés ci-dessus s’appliquent aux types de machines virtuelles certifiés pour SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-289">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="e5b98-290">Les séries de machines virtuelles présentant un nombre d’E/S par seconde et un débit excellents sont adaptées à certaines fonctionnalités de SGBD, telles que tempdb ou l’espace de table temporaire.</span><span class="sxs-lookup"><span data-stu-id="e5b98-290">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features, like tempdb or temporary table space.</span></span>

### <span data-ttu-id="e5b98-291"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Mise en cache pour les machines virtuelles et les disques durs virtuels</span><span class="sxs-lookup"><span data-stu-id="e5b98-291"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching for VMs and VHDs</span></span>
<span data-ttu-id="e5b98-292">Lorsque nous créons ces disques/disques durs virtuels via le portail ou montons les disques durs virtuels téléchargés sur des machines virtuelles, nous pouvons choisir de mettre ou non en cache le trafic d’E/S entre la machine virtuelle et ces disques durs virtuels situés dans le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-292">When we create those disks/VHDs through the portal or when we mount uploaded VHDs to VMs, we can choose whether the I/O traffic between the VM and those VHDs located in Azure storage are cached.</span></span> <span data-ttu-id="e5b98-293">Azure Standard et Premium Storage font appel à deux technologies différentes pour ce type de mise en cache.</span><span class="sxs-lookup"><span data-stu-id="e5b98-293">Azure Standard and Premium Storage use two different technologies for this type of cache.</span></span> <span data-ttu-id="e5b98-294">Dans les deux cas, la mise en cache est soutenue par des disques sur le même lecteur que le disque temporaire (D:\ dans Windows ou/mnt/resource dans Linux) de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-294">In both cases the cache itself would be disk backed on the same drives used by the temporary disk (D:\ on Windows or /mnt/resource on Linux) of the VM.</span></span>

<span data-ttu-id="e5b98-295">Pour le stockage Azure Standard, les types de mise en cache possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-295">For Azure Standard Storage the possible cache types are:</span></span>

* <span data-ttu-id="e5b98-296">Aucune mise en cache</span><span class="sxs-lookup"><span data-stu-id="e5b98-296">No caching</span></span>
* <span data-ttu-id="e5b98-297">Mise en cache en lecture</span><span class="sxs-lookup"><span data-stu-id="e5b98-297">Read caching</span></span>
* <span data-ttu-id="e5b98-298">Mise en cache en lecture et en écriture</span><span class="sxs-lookup"><span data-stu-id="e5b98-298">Read and Write caching</span></span>

<span data-ttu-id="e5b98-299">Pour obtenir des performances homogènes et déterministes, vous devez définir la mise en cache sur le stockage Azure Standard pour tous les disques durs virtuels contenant **les fichiers de données liés au SGBD, les fichiers journaux et l’espace de table sur AUCUNE**.</span><span class="sxs-lookup"><span data-stu-id="e5b98-299">In order to get consistent and deterministic performance, you should set the caching on Azure Standard Storage for all VHDs containing **DBMS related data files, log files and table space to 'NONE'**.</span></span> <span data-ttu-id="e5b98-300">La valeur par défaut peut être conservée pour la mise en cache de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-300">The caching of the VM can remain with the default.</span></span>

<span data-ttu-id="e5b98-301">Pour le stockage Azure Premium Storage, les options de mise en cache suivantes sont disponibles :</span><span class="sxs-lookup"><span data-stu-id="e5b98-301">For Azure Premium Storage the following caching options exist:</span></span>

* <span data-ttu-id="e5b98-302">Aucune mise en cache</span><span class="sxs-lookup"><span data-stu-id="e5b98-302">No caching</span></span>
* <span data-ttu-id="e5b98-303">Mise en cache en lecture</span><span class="sxs-lookup"><span data-stu-id="e5b98-303">Read caching</span></span>

<span data-ttu-id="e5b98-304">Pour le stockage Premium Azure, il est recommandé d’exploiter la **mise en cache en écriture pour les fichiers de données** de la base de données SAP et de choisir **Aucune mise en cache pour les disques durs virtuels des fichiers journaux**.</span><span class="sxs-lookup"><span data-stu-id="e5b98-304">Recommendation for Azure Premium Storage is to leverage **Read caching for data files** of the SAP database and chose **No caching for the VHD(s) of log file(s)**.</span></span>

### <span data-ttu-id="e5b98-305"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>RAID logiciel</span><span class="sxs-lookup"><span data-stu-id="e5b98-305"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>Software RAID</span></span>
<span data-ttu-id="e5b98-306">Comme nous l’avons déjà indiqué plus haut, vous devez équilibrer le nombre d’E/S par seconde nécessaire pour les fichiers de base de données en fonction du nombre de disques durs virtuels configurables et du nombre maximal d’E/S par seconde qu’une machine virtuelle offrira par disque dur virtuel ou type de disque Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-306">As already stated above, you will need to balance the number of IOPS needed for the database files across the number of VHDs you can configure and the maximum IOPS an Azure VM will provide per VHD or Premium Storage disk type.</span></span> <span data-ttu-id="e5b98-307">Le moyen le plus simple pour gérer la charge d’E/S sur les disques durs virtuels consiste à créer un RAID logiciel avec les différents disques durs virtuels, puis à placer un certain nombre de fichiers de données du SGBD SAP sur les LUN issus du RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-307">Easiest way to deal with the IOPS load over VHDs is to build a software RAID over the different VHDs.</span></span> <span data-ttu-id="e5b98-308">En fonction des exigences, il peut être également préférable d’utiliser le stockage Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-308">Then place a number of data files of the SAP DBMS on the LUNS carved out of the software RAID.</span></span> <span data-ttu-id="e5b98-309">En effet, deux des trois différents disques Storage Premium offrent un quota d’E/S par seconde supérieur à celui des disques durs virtuels basés sur le stockage Standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-309">Dependent on the requirements you might want to consider the usage of Premium Storage as well since two of the three different Premium Storage disks provide higher IOPS quota than VHDs based on Standard Storage.</span></span> <span data-ttu-id="e5b98-310">De plus, Azure Premium Storage garantit une latence d’E/S nettement inférieure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-310">Besides the significant better I/O latency provided by Azure Premium Storage.</span></span>

<span data-ttu-id="e5b98-311">Il en va de même pour le journal des transactions des différents systèmes de SGBD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-311">Same applies to the transaction log of the different DBMS systems.</span></span> <span data-ttu-id="e5b98-312">Le fait qu’un grand nombre d’entre eux ajoutent simplement d’autres fichiers Tlog n’aide en rien, car les systèmes de SGBD écrivent dans un seul fichier à la fois.</span><span class="sxs-lookup"><span data-stu-id="e5b98-312">With a lot of them just adding more Tlog files does not help since the DBMS systems write into one of the files at a time only.</span></span> <span data-ttu-id="e5b98-313">Si des taux d’E/S par seconde supérieurs à ce qu’un disque dur virtuel basé sur le stockage Standard peut offrir sont requis, vous pouvez entrelacer plusieurs disques durs virtuels Standard ou utiliser un type de disque Premium Storage plus grand qui en plus de taux d’E/S par seconde supérieurs assure également une latence plusieurs fois inférieure pour l’écriture des E/S dans le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="e5b98-313">If higher IOPS rates are needed than a single Standard Storage based VHD can deliver, you can stripe over multiple Standard Storage VHDs or you can use a larger Premium Storage disk type that beyond higher IOPS rates also delivers factors lower latency for the write I/Os into the transaction log.</span></span>

<span data-ttu-id="e5b98-314">Les situations rencontrées dans les déploiements Azure qui justifient l’utilisation d’un RAID logiciel sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-314">Situations experienced in Azure deployments which would favor using a software RAID are:</span></span>

* <span data-ttu-id="e5b98-315">Le journal des transactions et le journal de rétablissement nécessitent plus d’E/S par seconde que ce qu’un disque dur virtuel Azure unique peut offrir.</span><span class="sxs-lookup"><span data-stu-id="e5b98-315">Transaction Log/Redo Log require more IOPS than Azure provides for a single VHD.</span></span> <span data-ttu-id="e5b98-316">Comme indiqué ci-dessus, vous pouvez résoudre ce problème en créant un LUN sur plusieurs disques durs virtuels à l’aide d’un RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-316">As mentioned above this can be solved by building a LUN over multiple VHDs using a software RAID.</span></span>
* <span data-ttu-id="e5b98-317">La charge de travail d’E/S est inégale sur les différents fichiers de données de la base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-317">Uneven I/O workload distribution over the different data files of the SAP database.</span></span> <span data-ttu-id="e5b98-318">Un fichier de données peut par exemple atteindre très souvent le quota,</span><span class="sxs-lookup"><span data-stu-id="e5b98-318">In such cases one can experience one data file hitting the quota rather often.</span></span> <span data-ttu-id="e5b98-319">tandis que les autres fichiers de données n’approchent même pas du quota d’E/S par seconde d’un disque dur virtuel unique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-319">Whereas other data files are not even getting close to the IOPS quota of a single VHD.</span></span> <span data-ttu-id="e5b98-320">Dans ce cas, la solution la plus simple consiste à créer un LUN sur plusieurs disques durs virtuels à l’aide d’un RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-320">In such cases the easiest solution is to build one LUN over multiple VHDs using a software RAID.</span></span>
* <span data-ttu-id="e5b98-321">Vous ne connaissez pas la charge de travail d’E/S exacte par fichier de données et avez seulement une idée grossière de la charge de travail d’E/S globale requise pour le SGBD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-321">You don’t know what the exact I/O workload per data file is and only roughly know what the overall IOPS workload against the DBMS is.</span></span> <span data-ttu-id="e5b98-322">Le plus simple consiste à créer un LUN à l’aide d’un RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="e5b98-322">Easiest to do is to build one LUN with the help of a software RAID.</span></span> <span data-ttu-id="e5b98-323">La somme des quotas des disques durs virtuels formant ce LUN devrait satisfaire le taux d’E/S par seconde connu.</span><span class="sxs-lookup"><span data-stu-id="e5b98-323">The sum of quotas of multiple VHDs behind this LUN should then fulfill the known IOPS rate.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="e5b98-325">Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-325">Windows</span></span>
>
> <span data-ttu-id="e5b98-326">L’utilisation de Windows Server 2012 ou d’espaces de stockage ultérieurs est préférable, car l’entrelacement est plus efficace que dans les versions antérieures de Windows.</span><span class="sxs-lookup"><span data-stu-id="e5b98-326">Usage of Windows Server 2012 or higher Storage Spaces is preferable since it is more efficient than Windows Striping of earlier Windows versions.</span></span> <span data-ttu-id="e5b98-327">Notez que vous devrez peut-être créer les pools de stockage et espaces de stockage Windows à l’aide de commandes PowerShell lorsque vous utilisez Windows Server 2012 en tant que système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-327">Please be aware that you might need to create the Windows Storage Pools and Storage Spaces by PowerShell commands when using Windows Server 2012 as Operating System.</span></span> <span data-ttu-id="e5b98-328">Les commandes PowerShell sont disponibles sur la page <https://technet.microsoft.com/library/jj851254.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-328">The PowerShell commands can be found here <https://technet.microsoft.com/library/jj851254.aspx></span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="e5b98-330">Linux</span><span class="sxs-lookup"><span data-stu-id="e5b98-330">Linux</span></span>
>
> <span data-ttu-id="e5b98-331">Seuls MDADM et LVM (Logical Volume Manager) sont pris en charge pour créer un RAID logiciel sur Linux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-331">Only MDADM and LVM (Logical Volume Manager) are supported to build a software RAID on Linux.</span></span> <span data-ttu-id="e5b98-332">Pour plus d’informations, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-332">For more information, read the following articles:</span></span>
>
> * <span data-ttu-id="e5b98-333">[Configuration d’un RAID logiciel sur Linux][virtual-machines-linux-configure-raid] (pour MDADM)</span><span class="sxs-lookup"><span data-stu-id="e5b98-333">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid] (for MDADM)</span></span>
> * <span data-ttu-id="e5b98-334">[Configurer LVM sur une machine virtuelle Linux dans Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="e5b98-334">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
>
>

- - -
<span data-ttu-id="e5b98-335">Les considérations pour tirer parti de séries de machines virtuelles compatibles avec le stockage Azure Premium Storage sont généralement les suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-335">Considerations for leveraging VM-series which are able to work with Azure Premium Storage usually are:</span></span>

* <span data-ttu-id="e5b98-336">Exigence de latences d’E/S proches de celles offertes par les périphériques SAN/NAS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-336">Demands for I/O latencies that are close to what SAN/NAS devices deliver.</span></span>
* <span data-ttu-id="e5b98-337">Exigence d’une latence d’E/S plusieurs fois inférieure à celle offerte par le stockage Azure Standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-337">Demand for factors better I/O latency than Azure Standard Storage can deliver.</span></span>
* <span data-ttu-id="e5b98-338">Nombre d’E/S par seconde par machine virtuelle plus élevé que ce que permettent d’atteindre plusieurs disques durs virtuels Standard avec un certain type de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-338">Higher IOPS per VM than what could be achieved with multiple Standard Storage VHDs against a certain VM type.</span></span>

<span data-ttu-id="e5b98-339">Comme le stockage Azure sous-jacent réplique chaque disque dur virtuel sur au moins trois nœuds de stockage, un simple entrelacement RAID 0 peut être utilisé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-339">Since the underlying Azure Storage replicates each VHD to at least three storage nodes, simple RAID 0 striping can be used.</span></span> <span data-ttu-id="e5b98-340">Il est inutile d’utiliser RAID 5 ou RAID 1.</span><span class="sxs-lookup"><span data-stu-id="e5b98-340">There is no need to implement RAID5 or RAID1.</span></span>

### <span data-ttu-id="e5b98-341"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="e5b98-341"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span></span>
<span data-ttu-id="e5b98-342">Microsoft Azure Storage stocke la base machine virtuelle de base (avec le système d’exploitation) et les disques durs virtuels ou des objets blob sur au moins trois nœuds de stockage distincts.</span><span class="sxs-lookup"><span data-stu-id="e5b98-342">Microsoft Azure Storage will store the base VM (with OS) and VHDs or BLOBs to at least 3 separate storage nodes.</span></span> <span data-ttu-id="e5b98-343">Lors de la création d’un compte de stockage, plusieurs options de protection sont proposées :</span><span class="sxs-lookup"><span data-stu-id="e5b98-343">When creating a storage account, there is a choice of protection as shown here:</span></span>

![Géoréplication activée pour le compte Azure Storage][dbms-guide-figure-100]

<span data-ttu-id="e5b98-345">La réplication locale Azure Storage (localement redondante) fournit plusieurs niveaux de protection contre la perte de données en cas de défaillance de l’infrastructure que peu de clients pourraient se permettre de déployer.</span><span class="sxs-lookup"><span data-stu-id="e5b98-345">Azure Storage Local Replication (Locally Redundant) provides levels of protection against data loss due to infrastructure failure that few customers could afford to deploy.</span></span> <span data-ttu-id="e5b98-346">Comme illustré ci-dessus, il existe 4 options différentes, avec une cinquième option qui est une variante de l’une des trois premières.</span><span class="sxs-lookup"><span data-stu-id="e5b98-346">As shown above there are 4 different options with a fifth being a variation of one of the first three.</span></span> <span data-ttu-id="e5b98-347">En les examinant de plus près, nous pouvons distinguer :</span><span class="sxs-lookup"><span data-stu-id="e5b98-347">Looking closer at them we can distinguish:</span></span>

* <span data-ttu-id="e5b98-348">**Stockage localement redondant Premium (LRS)**: Azure Premium Storage offre une prise en charge très performante et à faible latence des disques pour les machines virtuelles exécutant des charges de travail qui utilisent beaucoup d’E/S.</span><span class="sxs-lookup"><span data-stu-id="e5b98-348">**Premium Locally Redundant Storage (LRS)**: Azure Premium Storage delivers high-performance, low-latency disk support for virtual machines running I/O-intensive workloads.</span></span> <span data-ttu-id="e5b98-349">Trois réplicas des données sont créées au sein du même centre de données d’une région Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-349">There are 3 replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="e5b98-350">Les copies se trouvent dans des domaines d’erreur et de mise à niveau distincts (pour plus d’informations sur ces concepts, consultez [ce][planning-guide-3.2] chapitre du [Guide de planification][planning-guide]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-350">The copies will be in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="e5b98-351">Dans le cas où une réplica des données devient hors service en raison d’une défaillance de nœud de stockage ou de disque, un nouveau réplica est généré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-351">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="e5b98-352">**Stockage localement redondant (LRS)**: 3 réplicas des données sont créés au sein du même centre de données d’une région Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-352">**Locally Redundant Storage (LRS)**: In this case there are 3 replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="e5b98-353">Les copies se trouvent dans des domaines d’erreur et de mise à niveau distincts (pour plus d’informations sur ces concepts, consultez [ce][planning-guide-3.2] chapitre du [Guide de planification][planning-guide]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-353">The copies will be in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="e5b98-354">Dans le cas où une réplica des données devient hors service en raison d’une défaillance de nœud de stockage ou de disque, un nouveau réplica est généré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-354">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="e5b98-355">**Stockage géo-redondant (GRS)**: dans ce cas, 3 réplicas supplémentaires des données sont envoyés par réplication asynchrone dans une autre région Azure située la plupart du temps dans la même région géographique (par exemple, Europe du Nord ou Europe de l’Ouest).</span><span class="sxs-lookup"><span data-stu-id="e5b98-355">**Geo Redundant Storage (GRS)**: In this case there is an asynchronous replication that will feed an additional 3 replicas of the data in another Azure Region which is in most of the cases in the same geographical region (like North Europe and West Europe).</span></span> <span data-ttu-id="e5b98-356">Il y a donc au total 6 réplicas des données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-356">This will result in 3 additional replicas, so that there are 6 replicas in sum.</span></span> <span data-ttu-id="e5b98-357">Une variante de cette option permet d’utiliser les données stockées dans la région Azure géo-répliquée à des fins de lecture (Stockage géo-redondant avec accès en lecture).</span><span class="sxs-lookup"><span data-stu-id="e5b98-357">A variation of this is an addition where the data in the geo replicated Azure region can be used for read purposes (Read-Access Geo-Redundant).</span></span>
* <span data-ttu-id="e5b98-358">**Stockage redondant dans une zone (ZRS)**: dans ce cas, les 3 réplicas des données restent dans la même région Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-358">**Zone Redundant Storage (ZRS)**: In this case the 3 replicas of the data remain in the same Azure Region.</span></span> <span data-ttu-id="e5b98-359">Comme l’explique [ce][planning-guide-3.1] chapitre du [Guide de planification][planning-guide], une région Azure peut correspondre à plusieurs centres de données situés à proximité les uns des autres.</span><span class="sxs-lookup"><span data-stu-id="e5b98-359">As explained in [this][planning-guide-3.1] chapter of the [Planning Guide][planning-guide] an Azure region can be a number of datacenters in close proximity.</span></span> <span data-ttu-id="e5b98-360">Avec le stockage localement redondant, les réplicas seraient réparties dans les différents centres de données qui forment une région Azure unique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-360">In the case of LRS the replicas would be distributed over the different datacenters that make one Azure region.</span></span>

<span data-ttu-id="e5b98-361">Des informations supplémentaires sont disponibles [ici][storage-redundancy].</span><span class="sxs-lookup"><span data-stu-id="e5b98-361">More information can be found [here][storage-redundancy].</span></span>

> [!NOTE]
> <span data-ttu-id="e5b98-362">Pour les déploiements SGBD, l’utilisation du stockage géo-redondant est déconseillée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-362">For DBMS deployments, the usage of Geo Redundant Storage is not recommended</span></span>
>
> <span data-ttu-id="e5b98-363">La géo-réplication Azure Storage est asynchrone.</span><span class="sxs-lookup"><span data-stu-id="e5b98-363">Azure Storage Geo-Replication is asynchronous.</span></span> <span data-ttu-id="e5b98-364">Les disques durs virtuels individuels montés sur une seule machine virtuelle ne sont pas répliqués simultanément.</span><span class="sxs-lookup"><span data-stu-id="e5b98-364">Replication of individual VHDs mounted to a single VM are not synchronized in lock step.</span></span> <span data-ttu-id="e5b98-365">Par conséquent, la réplication de fichiers de SGBD répartis sur différents disques durs virtuels ou déployés sur un RAID logiciel basé sur plusieurs disques durs virtuels n’est pas appropriée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-365">Therefore, it is not suitable to replicate DBMS files that are distributed over different VHDs or deployed against a software RAID based on multiple VHDs.</span></span> <span data-ttu-id="e5b98-366">Les logiciels de SGBD requièrent que le stockage sur disque persistant soit synchronisé précisément sur les différents LUN et les disques/disques durs virtuels/broches sous-jacents.</span><span class="sxs-lookup"><span data-stu-id="e5b98-366">DBMS software requires that the persistent disk storage is precisely synchronized across different LUNs and underlying disks/VHDs/spindles.</span></span> <span data-ttu-id="e5b98-367">Les logiciels de SGBD font appel à différents mécanismes pour ordonner les activités d’écriture d’E/S et un SGBD signalera que le stockage sur disque ciblé par la réplication est endommagé si celles-ci varient ne serait-ce que de quelques millisecondes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-367">DBMS software uses various mechanisms to sequence IO write activities and a DBMS will report that the disk storage targeted by the replication is corrupted if these vary even by a few milliseconds.</span></span> <span data-ttu-id="e5b98-368">Par conséquent, si vous avez vraiment besoin d’une configuration de base de données avec une base de données répartie sur plusieurs disques durs virtuels géo-répliqués, cette réplication doit être effectuée à l’aide des capacités et des fonctionnalités de la base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-368">Hence if one really wants a database configuration with a database stretched across multiple VHDs geo-replicated, such a replication needs to be performed with database means and functionality.</span></span> <span data-ttu-id="e5b98-369">Vous ne devez pas vous appuyer sur la géo-réplication Azure Storage pour accomplir cette tâche.</span><span class="sxs-lookup"><span data-stu-id="e5b98-369">One should not rely on Azure Storage Geo-Replication to perform this job.</span></span>
>
> <span data-ttu-id="e5b98-370">Le problème est plus simple à expliquer avec un exemple de système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-370">The problem is simplest to explain with an example system.</span></span> <span data-ttu-id="e5b98-371">Supposons que vous disposez d’un système SAP téléchargé dans Azure qui utilise 8 disques durs virtuels contenant les fichiers de données du SGBD et un disque dur virtuel contenant le fichier journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="e5b98-371">Let’s assume you have an SAP system uploaded into Azure which has 8 VHDs containing data files of the DBMS plus one VHD containing the transaction log file.</span></span> <span data-ttu-id="e5b98-372">Sur chacun de ces 9 disques durs virtuels, les données seront écrites à l’aide d’une même méthode dépendant du SGBD, que les données soient écrites dans les fichiers de données ou le fichier journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="e5b98-372">Each one of these 9 VHDs will have data written to them in a consistent method according to the DBMS, whether the data is being written to the data or transaction log files.</span></span>
>
> <span data-ttu-id="e5b98-373">Afin de géo-répliquer correctement les données et de conserver une image de base de données cohérente, il faudrait répliquer le contenu des 9 disques durs virtuels dans l’ordre exact où les opérations d’E/S ont été exécutées sur les 9 différents disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="e5b98-373">In order to properly geo-replicate the data and maintain a consistent database image, the content of all nine VHDs would have to be geo-replicated in the exact order the I/O operations were executed against the nine different VHDs.</span></span> <span data-ttu-id="e5b98-374">Toutefois, la géo-réplication Azure Storage ne permet pas de déclarer des dépendances entre des disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="e5b98-374">However, Azure Storage geo-replication does not allow to declare dependencies between VHDs.</span></span> <span data-ttu-id="e5b98-375">Cela signifie que la géo-réplication Microsoft Azure Storage ignore que le contenu de ces 9 différents disques virtuels est lié et que les modifications de données ne sont cohérentes que lorsque la réplication est effectuée dans l’ordre où les opérations d’E/S ont eu lieu sur l’ensemble des 9 disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="e5b98-375">This means Microsoft Azure Storage geo-replication doesn’t know about the fact that the content in these nine different VHDs are related to each other and that the data changes are consistent only when replicating in the order the I/O operations happened across all the 9 VHDs.</span></span>
>
> <span data-ttu-id="e5b98-376">Outre la forte probabilité que les images géo-répliquées dans ce scénario ne produisent pas une image de base de données cohérente, le stockage géo-redondant peut également avoir un impact très négatif sur les performances.</span><span class="sxs-lookup"><span data-stu-id="e5b98-376">Besides chances being high that the geo-replicated images in the scenario do not provide a consistent database image, there also is a performance penalty that shows up with geo redundant storage that can severely impact performance.</span></span> <span data-ttu-id="e5b98-377">En résumé, n’utilisez pas ce type de redondance de stockage pour les charges de travail du type SGBD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-377">In summary do not use this type of storage redundancy for DBMS type workloads.</span></span>
>
>

#### <a name="mapping-vhds-into-azure-virtual-machine-service-storage-accounts"></a><span data-ttu-id="e5b98-378">Mappage de disques durs virtuels à des comptes de stockage du service Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="e5b98-378">Mapping VHDs into Azure Virtual Machine Service Storage Accounts</span></span>
<span data-ttu-id="e5b98-379">Un compte de stockage Azure est non seulement le fait d’un administrateur, mais également l’objet de limitations.</span><span class="sxs-lookup"><span data-stu-id="e5b98-379">An Azure Storage Account is not only an administrative construct, but also a subject of limitations.</span></span> <span data-ttu-id="e5b98-380">Les limitations varient selon qu’il s’agit d’un compte de stockage Azure Standard ou Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-380">Whereas the limitations vary on whether we talk about an Azure Standard Storage Account or an Azure Premium Storage Account.</span></span> <span data-ttu-id="e5b98-381">Les capacités et limitations exactes sont répertoriées [ici][storage-scalability-targets]</span><span class="sxs-lookup"><span data-stu-id="e5b98-381">The exact capabilities and limitations are listed [here][storage-scalability-targets]</span></span>

<span data-ttu-id="e5b98-382">Concernant le stockage Azure Standard, il est important de noter qu’il y a une limite d’E/S par seconde par compte de stockage (ligne contenant « Taux de demandes total » dans [l’article][storage-scalability-targets]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-382">So for Azure Standard Storage it is important to note there is a limit on the IOPS per storage account (Row containing ‘Total Request Rate’ in [the article][storage-scalability-targets]).</span></span> <span data-ttu-id="e5b98-383">De plus, il y a une limite initiale de 100 comptes de stockage par abonnement Azure (depuis juillet 2015).</span><span class="sxs-lookup"><span data-stu-id="e5b98-383">In addition, there is an initial limit of 100 Storage Accounts per Azure subscription (as of July 2015).</span></span> <span data-ttu-id="e5b98-384">Par conséquent, il est recommandé d’équilibrer les E/S par seconde des machines virtuelles entre plusieurs comptes de stockage lorsque le stockage Azure Standard est utilisé,</span><span class="sxs-lookup"><span data-stu-id="e5b98-384">Therefore, it is recommended to balance IOPS of VMs between multiple storage accounts when using Azure Standard Storage.</span></span> <span data-ttu-id="e5b98-385">alors que dans l’idéal, une machine virtuelle unique doit si possible utiliser un seul compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-385">Whereas a single VM ideally uses one storage account if possible.</span></span> <span data-ttu-id="e5b98-386">Dans le cas de déploiements SGBD où chaque disque dur virtuel hébergé dans le stockage Azure Standard peut atteindre sa limite de quota, vous devez donc déployer seulement 30 à 40 disques durs virtuels par compte de stockage Azure faisant appel au stockage Azure Standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-386">So if we talk about DBMS deployments where each VHD that is hosted on Azure Standard Storage could reach its quota limit, you should only deploy 30-40 VHDs per Azure Storage Account that uses Azure Standard Storage.</span></span> <span data-ttu-id="e5b98-387">Par contre, si vous tirez parti du stockage Azure Premium Storage et souhaitez stocker d’importants volumes de base de données, il se peut que le nombre d’E/S par seconde soit approprié.</span><span class="sxs-lookup"><span data-stu-id="e5b98-387">On the other hand, if you leverage Azure Premium Storage and want to store large database volumes, you might be fine in terms of IOPS.</span></span> <span data-ttu-id="e5b98-388">Cependant, un compte de stockage Azure Premium Storage est beaucoup plus restrictif en matière de volume de données qu’un compte de stockage Azure Standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-388">But an Azure Premium Storage Account is way more restrictive in data volume than an Azure Standard Storage Account.</span></span> <span data-ttu-id="e5b98-389">Vous ne pouvez ainsi déployer qu’un nombre limité de disques durs virtuels au sein d’un compte de stockage Azure Premium Storage avant d’atteindre la limite de volume de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-389">As a result, you can only deploy a limited number of VHDs within an Azure Premium Storage Account before hitting the data volume limit.</span></span> <span data-ttu-id="e5b98-390">En définitive, un compte de stockage Azure peut être considéré comme un « SAN virtuel » qui a des capacités limitées en matière d’E/S par seconde ou de volume.</span><span class="sxs-lookup"><span data-stu-id="e5b98-390">At the end think of an Azure Storage Account as a “Virtual SAN” that has limited capabilities in IOPS and/or capacity.</span></span> <span data-ttu-id="e5b98-391">Comme pour les déploiements locaux, il reste à définir la disposition des disques durs virtuels des différents systèmes SAP sur les différents « périphériques SAN imaginaires » ou comptes de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-391">As a result, the task remains, as in on-premises deployments, to define the layout of the VHDs of the different SAP systems over the different ‘imaginary SAN devices’ or Azure Storage Accounts.</span></span>

<span data-ttu-id="e5b98-392">Pour le stockage Azure Standard, nous vous recommandons dans la mesure du possible de ne pas présenter le stockage de différents comptes de stockage à une machine virtuelle unique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-392">For Azure Standard Storage it is not recommended to present storage from different storage accounts to a single VM if possible.</span></span>

<span data-ttu-id="e5b98-393">Avec la série DS ou GS de machines virtuelles Azure, il est possible de monter des disques durs virtuels issus de comptes de Stockage Azure Standard et Premium.</span><span class="sxs-lookup"><span data-stu-id="e5b98-393">Whereas using the DS or GS-series of Azure VMs it is possible to mount VHDs out of Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="e5b98-394">Un stockage hétérogène de ce type pourrait être utilisé par exemple pour écrire des sauvegardes dans un stockage Standard soutenu par des disques durs virtuels tout en ayant les fichiers de données et journaux du SGBD dans un stockage Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-394">Use cases like writing backups into Standard Storage backed VHDs whereas having DBMS data and log files on Premium Storage come to mind where such heterogeneous storage could be leveraged.</span></span>

<span data-ttu-id="e5b98-395">Selon les déploiements client et les tests, environ 30 à 40 disques durs virtuels contenant les fichiers de données et les fichiers journaux de base de données peuvent être configurés sur un seul compte de stockage Azure Standard avec des performances acceptables.</span><span class="sxs-lookup"><span data-stu-id="e5b98-395">Based on customer deployments and testing around 30 to 40 VHDs containing database data files and log files can be provisioned on a single Azure Standard Storage Account with acceptable performance.</span></span> <span data-ttu-id="e5b98-396">Comme indiqué précédemment, la limitation d’un compte de stockage Azure Premium Storage a des chances d’être le volume de données qu’il peut contenir et non le nombre d’E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-396">As mentioned earlier, the limitation of an Azure Premium Storage Account is likely to be the data capacity it can hold and not IOPS.</span></span>

<span data-ttu-id="e5b98-397">Comme avec les périphériques SAN en local, le partage nécessite une surveillance afin de détecter les goulots d’étranglement sur un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-397">As with SAN devices on-premises, sharing requires some monitoring in order to eventually detect bottlenecks on an Azure Storage Account.</span></span> <span data-ttu-id="e5b98-398">L’extension de surveillance Azure pour SAP et le portail Azure peuvent être utilisés pour détecter les comptes de stockage Azure actifs dont les performances d’E/S ne sont pas optimales.</span><span class="sxs-lookup"><span data-stu-id="e5b98-398">The Azure Monitoring Extension for SAP and the Azure Portal are tools that can be used to detect busy Azure Storage Accounts that may be delivering suboptimal IO performance.</span></span>  <span data-ttu-id="e5b98-399">Lorsqu’une telle détection a lieu, il est recommandé de déplacer les machines virtuelles actives vers un autre compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-399">If this situation is detected it is recommended to move busy VMs to another Azure Storage Account.</span></span> <span data-ttu-id="e5b98-400">Pour savoir comment activer les fonctionnalités de surveillance d’hôte SAP, consultez le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="e5b98-400">Please refer to the [Deployment Guide][deployment-guide] for details on how to activate the SAP host monitoring capabilities.</span></span>

<span data-ttu-id="e5b98-401">Un autre article synthétisant les bonnes pratiques relatives au stockage Azure standard et aux comptes de stockage Azure standard est disponible sur la page <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-401">Another article summarizing best practices around Azure Standard Storage and Azure Standard Storage Accounts can be found here <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span></span>

#### <a name="moving-deployed-dbms-vms-from-azure-standard-storage-to-azure-premium-storage"></a><span data-ttu-id="e5b98-402">Déplacement de machines virtuelles de SGBD déployées du stockage Azure Standard vers le stockage Azure Premium Storage</span><span class="sxs-lookup"><span data-stu-id="e5b98-402">Moving deployed DBMS VMs from Azure Standard Storage to Azure Premium Storage</span></span>
<span data-ttu-id="e5b98-403">Nous rencontrons un nombre assez important de scénarios où des clients souhaitent déplacer une machine virtuelle déployée du stockage Azure Standard vers le stockage Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-403">We encounter quite some scenarios where you as customer want to move a deployed VM from Azure Standard Storage into Azure Premium Storage.</span></span> <span data-ttu-id="e5b98-404">Cela implique nécessairement le déplacement physique des données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-404">This is not possible without physically moving the data.</span></span> <span data-ttu-id="e5b98-405">Il existe plusieurs façons d’atteindre cet objectif :</span><span class="sxs-lookup"><span data-stu-id="e5b98-405">There are several ways to achieve the goal:</span></span>

* <span data-ttu-id="e5b98-406">Vous pouvez simplement copier tous les disques durs virtuels, le disque dur virtuel de base, ainsi que les disques durs virtuels de données dans un nouveau compte de stockage Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-406">You could simply copy all VHDs, base VHD as well as data VHDs into a new Azure Premium Storage Account.</span></span> <span data-ttu-id="e5b98-407">Très souvent, vous avez choisi le nombre de disques durs virtuels dans le stockage Azure Standard non pas en fonction du volume de données offert,</span><span class="sxs-lookup"><span data-stu-id="e5b98-407">Very often you chose the number of VHDs in Azure Standard Storage not because of the fact that you needed the data volume.</span></span> <span data-ttu-id="e5b98-408">mais parce que vous aviez besoin de ce nombre total d’E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-408">But you needed that many VHDs because of the IOPS.</span></span> <span data-ttu-id="e5b98-409">Maintenant que vous effectuez un déplacement vers le stockage Azure Premium Storage, vous pourriez utiliser beaucoup moins de disques durs virtuels pour atteindre le même débit d’E/S.</span><span class="sxs-lookup"><span data-stu-id="e5b98-409">Now that you move to Azure Premium Storage you could go with way less VHDs to achieve the some IOPS throughput.</span></span> <span data-ttu-id="e5b98-410">Étant donné qu’avec le stockage Azure Standard, vous payiez pour les données utilisées et non pour la taille de disque nominale, le nombre de disques durs virtuels n’importait pas vraiment en termes de coûts.</span><span class="sxs-lookup"><span data-stu-id="e5b98-410">Given the fact that in Azure Standard Storage you pay for the used data and not the nominal disk size, the number of VHDs did not really matter in terms of costs.</span></span> <span data-ttu-id="e5b98-411">Cependant, avec le stockage Azure Premium Storage, vous payez pour la taille de disque nominale.</span><span class="sxs-lookup"><span data-stu-id="e5b98-411">However, with Azure Premium Storage, you would pay for the nominal disk size.</span></span> <span data-ttu-id="e5b98-412">Par conséquent, la plupart des clients essaient de limiter le nombre de disques durs virtuels Azure dans le stockage Premium Storage au nombre nécessaire pour atteindre le débit d’E/S requis.</span><span class="sxs-lookup"><span data-stu-id="e5b98-412">Therefore, most of the customer try to keep the number of Azure VHDs in Premium Storage at the number needed to achieve the IOPS throughput necessary.</span></span> <span data-ttu-id="e5b98-413">Les clients décident donc généralement de ne pas faire une simple copie 1:1.</span><span class="sxs-lookup"><span data-stu-id="e5b98-413">So, most customers decide against the way of a simple 1:1 copy.</span></span>
* <span data-ttu-id="e5b98-414">S’il n’est pas encore monté, vous montez un disque dur virtuel unique pouvant contenir une sauvegarde de base de données de votre base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-414">If not yet mounted, you mount a single VHD that can contain a database backup of your SAP database.</span></span> <span data-ttu-id="e5b98-415">Après la sauvegarde, vous démontez tous les disques durs virtuels, y compris celui contenant la sauvegarde, et copiez le disque dur virtuel de base et le disque dur virtuel avec la sauvegarde dans un compte de stockage Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-415">After the backup, you unmount all VHDs including the VHD containing the backup and copy the base VHD and the VHD with the backup into an Azure Premium Storage account.</span></span> <span data-ttu-id="e5b98-416">Ensuite, vous déployez la machine virtuelle s’appuyant sur le disque dur virtuel de base et montez le disque dur virtuel contenant la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-416">You would then deploy the VM based on the base VHD and mount the VHD with the backup.</span></span> <span data-ttu-id="e5b98-417">Maintenant, vous créez des disques Premium Storage vides supplémentaires pour la machine virtuelle, dans lesquels la base de données sera restaurée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-417">Now you create additional empty Premium Storage Disks for the VM that are used to restore the database into.</span></span> <span data-ttu-id="e5b98-418">Cela suppose que le SGBD vous permet de modifier les chemins d’accès aux fichiers de données et aux fichiers journaux dans le cadre du processus de restauration.</span><span class="sxs-lookup"><span data-stu-id="e5b98-418">This assumes that the DBMS allows you to change paths to the data and log files as part of the restore process.</span></span>
* <span data-ttu-id="e5b98-419">Une autre possibilité est une variante du processus précédent, où vous copiez simplement le disque dur virtuel de sauvegarde dans le stockage Azure Premium Storage et l’attachez à une machine virtuelle que vous venez de déployer et d’installer.</span><span class="sxs-lookup"><span data-stu-id="e5b98-419">Another possibility is a variation of the former process, where you just copy the backup VHD into Azure Premium Storage and attach it against a VM that you newly deployed and installed.</span></span>
* <span data-ttu-id="e5b98-420">Une quatrième possibilité s’offre à vous si vous avez besoin de modifier le nombre de fichiers de données de votre base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-420">The fourth possibility you would choose when you are in need to change the number of data files of your database.</span></span> <span data-ttu-id="e5b98-421">Dans ce cas, vous exécutez une copie de système homogène SAP à l’aide d’une exportation/importation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-421">In such a case you would perform a SAP homogenous system copy using export/import.</span></span> <span data-ttu-id="e5b98-422">Placez ces fichiers d’exportation dans un disque dur virtuel qui est copié dans un compte de stockage Azure Premium Storage et attachez-le à une machine virtuelle que vous utilisez pour exécuter les processus d’importation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-422">Put those export files into a VHD that is copied into an Azure Premium Storage Account and attach it to a VM that you use to run the import processes.</span></span> <span data-ttu-id="e5b98-423">Les clients utilisent cette possibilité principalement lorsqu’ils veulent réduire le nombre de fichiers de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-423">Customers use this possibility mainly when they want to decrease the number of data files.</span></span>

### <a name="deployment-of-vms-for-sap-in-azure"></a><span data-ttu-id="e5b98-424">Déploiement de machines virtuelles pour SAP dans Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-424">Deployment of VMs for SAP in Azure</span></span>
<span data-ttu-id="e5b98-425">Microsoft Azure offre plusieurs modes de déploiement de machines virtuelles et des disques associés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-425">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="e5b98-426">Il est très important de comprendre ce qui les distingue dans la mesure où les préparations des machines virtuelles peuvent différer en fonction du déploiement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-426">Thereby it is very important to understand the differences since preparations of the VMs might differ dependent on the way of deployment.</span></span> <span data-ttu-id="e5b98-427">En règle générale, nous examinons les scénarios décrits dans les chapitres suivants.</span><span class="sxs-lookup"><span data-stu-id="e5b98-427">In general, we look into the scenarios described in the following chapters.</span></span>

#### <a name="deploying-a-vm-from-the-azure-marketplace"></a><span data-ttu-id="e5b98-428">Déploiement d’une machine virtuelle provenant d’Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="e5b98-428">Deploying a VM from the Azure Marketplace</span></span>
<span data-ttu-id="e5b98-429">Vous voulez prendre une image fournie par Microsoft ou par un tiers provenant d’Azure Marketplace pour déployer votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-429">You like to take a Microsoft or 3rd party provided image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="e5b98-430">Une fois que vous avez déployé votre machine virtuelle dans Azure, vous utilisez les mêmes instructions et outils pour installer les logiciels SAP au sein de votre machine virtuelle comme vous le feriez dans un environnement local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-430">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="e5b98-431">Pour installer les logiciels SAP au sein de la machine virtuelle Azure, SAP et Microsoft recommandent de télécharger et stocker le support d’installation SAP sur des disques durs virtuels Azure, ou de créer une machine virtuelle Azure faisant office de serveur de fichiers qui contient tous les supports d’installation SAP nécessaires.</span><span class="sxs-lookup"><span data-stu-id="e5b98-431">For installing the SAP software inside the Azure VM, SAP and Microsoft recommend to upload and store the SAP installation media in Azure VHDs or to create an Azure VM working as a ‘File server’ which contains all the necessary SAP installation media.</span></span>

#### <a name="deploying-a-vm-with-a-customer-specific-generalized-image"></a><span data-ttu-id="e5b98-432">Déploiement d’une machine virtuelle avec une image généralisée propre au client</span><span class="sxs-lookup"><span data-stu-id="e5b98-432">Deploying a VM with a customer specific generalized image</span></span>
<span data-ttu-id="e5b98-433">En raison des exigences spécifiques de correctif par rapport aux versions de votre système d’exploitation ou SGBD, les images fournies dans Azure Marketplace peuvent ne pas répondre à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="e5b98-433">Due to specific patch requirements in regards to your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="e5b98-434">Par conséquent, vous devrez peut-être créer une machine virtuelle à l’aide de votre propre image « privée » de machine virtuelle du système d’exploitation/SGBD pouvant être déployée plusieurs fois par la suite.</span><span class="sxs-lookup"><span data-stu-id="e5b98-434">Therefore, you might need to create a VM using your own ‘private’ OS/DBMS VM image which can be deployed several times afterwards.</span></span> <span data-ttu-id="e5b98-435">Pour préparer une image « privée » de ce type pour la duplication, le système d’exploitation doit être généralisé sur la machine virtuelle locale.</span><span class="sxs-lookup"><span data-stu-id="e5b98-435">To prepare such a ‘private’ image for duplication, the OS must be generalized on the on-premises VM.</span></span> <span data-ttu-id="e5b98-436">Pour savoir comment généraliser une machine virtuelle, consultez le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="e5b98-436">Please refer to the [Deployment Guide][deployment-guide] for details on how to generalize a VM.</span></span>

<span data-ttu-id="e5b98-437">Si vous avez déjà installé du contenu SAP sur votre machine virtuelle locale (en particulier pour les systèmes à 2 niveaux), vous pouvez adapter les paramètres du système SAP après le déploiement de la machine virtuelle Azure à l’aide de la procédure de modification du nom d’instance prise en charge par le gestionnaire de déploiement de logiciels SAP (Note de SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-437">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="e5b98-438">Sinon, vous pouvez installer les logiciels SAP après le déploiement de la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-438">Otherwise you can install the SAP software later after the deployment of the Azure VM.</span></span>

<span data-ttu-id="e5b98-439">En ce qui concerne le contenu de base de données utilisé par l’application SAP, vous pouvez soit générer à nouveau le contenu à l’aide d’une installation SAP, soit importer votre contenu dans Azure en utilisant un disque dur virtuel avec une sauvegarde de base de données de SGBD ou en tirant parti des capacités de sauvegarde directe dans Microsoft Azure Storage du SGBD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-439">As of the database content used by the SAP application, you can either generate the content freshly by an SAP installation or you can import your content into Azure by using a VHD with a DBMS database backup or by leveraging capabilities of the DBMS to directly backup into Microsoft Azure Storage.</span></span> <span data-ttu-id="e5b98-440">Dans ce cas, vous pouvez également préparer des disques durs virtuels avec les fichiers de données et les fichiers journaux du SGBD en local, puis les importer en tant que disques dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-440">In this case, you could also prepare VHDs with the DBMS data and log files on-premises and then import those as Disks into Azure.</span></span> <span data-ttu-id="e5b98-441">Mais le transfert de données de SGBD chargées d’un stockage local à Azure fonctionne uniquement sur des disques durs virtuels qui ont été préparés en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-441">But the transfer of DBMS data which is getting loaded from on-premises to Azure would work over VHD disks that need to be prepared on-premises.</span></span>

#### <a name="moving-a-vm-from-on-premises-to-azure-with-a-non-generalized-disk"></a><span data-ttu-id="e5b98-442">Déplacement d’une machine virtuelle locale vers Azure avec un disque non généralisé</span><span class="sxs-lookup"><span data-stu-id="e5b98-442">Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="e5b98-443">Vous envisagez de déplacer un système SAP spécifique local vers Azure (développement et transfert).</span><span class="sxs-lookup"><span data-stu-id="e5b98-443">You plan to move a specific SAP system from on-premises to Azure (lift and shift).</span></span> <span data-ttu-id="e5b98-444">Pour ce faire, vous pouvez charger le disque dur virtuel qui contient le système d’exploitation, les fichiers binaires SAP et les éventuels fichiers binaires du SGBD, ainsi que les disques durs virtuels contenant les fichiers de données et les fichiers journaux du SGBD vers Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-444">This can be done by uploading the VHD which contains the OS, the SAP binaries and eventual DBMS binaries plus the VHDs with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="e5b98-445">Contrairement au scénario 2 ci-dessus, vous conservez le nom d’hôte, le SID SAP et les comptes utilisateur SAP dans la machine virtuelle Azure tels qu’ils ont été configurés dans l’environnement local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-445">In opposite to scenario #2 above, you keep the hostname, SAP SID and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="e5b98-446">Par conséquent, il n’est pas nécessaire de généraliser l’image.</span><span class="sxs-lookup"><span data-stu-id="e5b98-446">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="e5b98-447">Ce cas s’applique tout particulièrement pour les scénarios de déploiement entre différents locaux dans lesquels une partie du paysage SAP est exécutée en local et une autre sur Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-447">This case will mostly apply for Cross-Premises scenarios where a part of the SAP landscape is run on-premises and parts on Azure.</span></span>

## <span data-ttu-id="e5b98-448"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>Haute disponibilité et récupération d’urgence avec les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-448"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>High Availability and Disaster Recovery with Azure VMs</span></span>
<span data-ttu-id="e5b98-449">Azure offre les fonctionnalités de haute disponibilité et de récupération d’urgence suivantes, qui s’appliquent à différents composants utilisés pour des déploiements SAP et SGBD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-449">Azure offers the following High Availability (HA) and Disaster Recovery (DR) functionalities which apply to different components we would use for SAP and DBMS deployments</span></span>

### <a name="vms-deployed-on-azure-nodes"></a><span data-ttu-id="e5b98-450">Machines virtuelles déployées sur des nœuds Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-450">VMs deployed on Azure Nodes</span></span>
<span data-ttu-id="e5b98-451">La plateforme Azure n’offre pas de fonctionnalités telles que la migration en direct pour les machines virtuelles déployées.</span><span class="sxs-lookup"><span data-stu-id="e5b98-451">The Azure Platform does not offer features such as Live Migration for deployed VMs.</span></span> <span data-ttu-id="e5b98-452">Cela signifie que si une maintenance est nécessaire sur un cluster de serveurs sur lequel une machine virtuelle est déployée, la machine virtuelle doit être arrêtée et redémarrée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-452">This means if there is maintenance necessary on a server cluster on which a VM is deployed, the VM needs to get stopped and restarted.</span></span> <span data-ttu-id="e5b98-453">La maintenance dans Azure est effectuée à l’aide de domaines de mise à niveau au sein des clusters de serveurs.</span><span class="sxs-lookup"><span data-stu-id="e5b98-453">Maintenance in Azure is performed using so called Upgrade Domains within clusters of servers.</span></span> <span data-ttu-id="e5b98-454">Seul un domaine de mise à niveau à la fois fait l’objet de la maintenance.</span><span class="sxs-lookup"><span data-stu-id="e5b98-454">Only one Upgrade Domain at a time is being maintained.</span></span> <span data-ttu-id="e5b98-455">Pendant le redémarrage, le service est interrompu lorsque la machine virtuelle est arrêtée, la maintenance effectuée et la machine virtuelle redémarrée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-455">During such a restart there will be an interruption of service while the VM is shut down, maintenance is performed and VM restarted.</span></span> <span data-ttu-id="e5b98-456">Cependant, la plupart des fournisseurs de SGBD fournissent des fonctionnalités de haute disponibilité et de récupération d’urgence qui garantissent un redémarrage rapide des services du SGBD sur un autre nœud en cas d’indisponibilité du nœud principal.</span><span class="sxs-lookup"><span data-stu-id="e5b98-456">Most DBMS vendors however provide High Availability and Disaster Recovery functionality that will quickly restart the DBMS services on another node if the primary node is unavailable.</span></span> <span data-ttu-id="e5b98-457">La plateforme Azure offre des fonctionnalités permettant de répartir les machines virtuelles, le stockage et les autres services Azure entre les domaines de mise à niveau pour s’assurer que la maintenance planifiée et les défaillances d’infrastructure n’affectent qu’un petit sous-ensemble de machines virtuelles ou de services.</span><span class="sxs-lookup"><span data-stu-id="e5b98-457">The Azure Platform offers functionality to distribute VMs, Storage and other Azure services across Upgrade Domains to ensure that planned maintenance or infrastructure failures would only impact a small subset of VMs or services.</span></span>  <span data-ttu-id="e5b98-458">Avec une planification méticuleuse, il est possible d’atteindre des niveaux de disponibilité comparables à ceux d’infrastructures locales.</span><span class="sxs-lookup"><span data-stu-id="e5b98-458">With careful planning it is possible to achieve availability levels comparable to on-premises infrastructures.</span></span>

<span data-ttu-id="e5b98-459">Les groupes à haute disponibilité Microsoft Azure sont un regroupement logique de machines virtuelles ou de services qui assurent la répartition des machines virtuelles et des autres services dans des domaines d’erreur et de mise à niveau distincts de telle sorte qu’il ne peut jamais y avoir plus d’un arrêt de nœud (pour plus d’informations, consultez [cet][virtual-machines-manage-availability] article).</span><span class="sxs-lookup"><span data-stu-id="e5b98-459">Microsoft Azure Availability Sets are a logical grouping of VMs or Services that ensures VMs and other services are distributed to different Fault and Upgrade Domains within a cluster such that there would only be one node shutdown at any one point in time (read [this][virtual-machines-manage-availability] article for more details).</span></span>

<span data-ttu-id="e5b98-460">Ils doivent être configurés lors du déploiement des machines virtuelles, comme illustré ici :</span><span class="sxs-lookup"><span data-stu-id="e5b98-460">It needs to be configured by purpose when rolling out VMs as seen here:</span></span>

![Définition du groupe à haute disponibilité pour les configurations haute disponibilité SGBD][dbms-guide-figure-200]

<span data-ttu-id="e5b98-462">Si nous voulons créer des configurations haute disponibilité de déploiements SGBD (indépendamment de la fonctionnalité de haute disponibilité de SGBD utilisée), les machines virtuelles du SGBD devront :</span><span class="sxs-lookup"><span data-stu-id="e5b98-462">If we want to create highly available configurations of DBMS deployments (independent of the individual DBMS HA functionality used), the DBMS VMs would need to:</span></span>

* <span data-ttu-id="e5b98-463">Ajoutez les machines virtuelles au même réseau virtuel Azure (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-463">Add the VMs to the same Azure Virtual Network (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span></span>
* <span data-ttu-id="e5b98-464">Les machines virtuelles de la configuration haute disponibilité doivent aussi se trouver sur le même sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="e5b98-464">The VMs of the HA configuration should also be in the same subnet.</span></span> <span data-ttu-id="e5b98-465">La résolution de noms entre les différents sous-réseaux n’est pas possible dans les déploiements cloud uniquement ; seule la résolution IP fonctionnera.</span><span class="sxs-lookup"><span data-stu-id="e5b98-465">Name resolution between the different subnets is not possible in Cloud-Only deployments, only IP resolution will work.</span></span> <span data-ttu-id="e5b98-466">Avec une connectivité de site à site ou ExpressRoute pour des déploiements entre différents locaux, un réseau comportant au moins un sous-réseau sera déjà établi.</span><span class="sxs-lookup"><span data-stu-id="e5b98-466">Using site-to-site or ExpressRoute connectivity for Cross-Premises deployments, a network with at least one subnet will be already established.</span></span> <span data-ttu-id="e5b98-467">La résolution de noms sera effectuée selon les stratégies AD et l’infrastructure réseau locales.</span><span class="sxs-lookup"><span data-stu-id="e5b98-467">Name resolution will be done according to the on-premises AD policies and network infrastructure.</span></span>

<span data-ttu-id="e5b98-468">[comment]: <> (MSSedusch TODO Test if still true in ARM)</span><span class="sxs-lookup"><span data-stu-id="e5b98-468">[comment]: <> (MSSedusch TODO Test if still true in ARM)</span></span>

#### <a name="ip-addresses"></a><span data-ttu-id="e5b98-469">Adresses IP</span><span class="sxs-lookup"><span data-stu-id="e5b98-469">IP Addresses</span></span>
<span data-ttu-id="e5b98-470">Il est recommandé de configurer les machines virtuelles de manière résiliente pour les configurations haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="e5b98-470">It is highly recommended to setup the VMs for HA configurations in a resilient way.</span></span> <span data-ttu-id="e5b98-471">Dans Azure, s’appuyer sur des adresses IP pour atteindre les partenaires de haute disponibilité au sein de la configuration haute disponibilité n’est pas fiable, à moins d’utiliser des adresses IP fixes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-471">Relying on IP addresses to address the HA partner(s) within the HA configuration is not reliable in Azure unless static IP addresses are used.</span></span> <span data-ttu-id="e5b98-472">Il existe deux concepts d’« arrêt » dans Azure :</span><span class="sxs-lookup"><span data-stu-id="e5b98-472">There are two “Shutdown” concepts in Azure:</span></span>

* <span data-ttu-id="e5b98-473">L’arrêt via le portail Azure ou l’applet de commande Azure PowerShell Stop-AzureRmVM : dans ce cas, la machine virtuelle est arrêtée et désallouée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-473">Shut down through Azure Portal or Azure PowerShell cmdlet Stop-AzureRmVM: In this case the Virtual Machine gets shutdown and de-allocated.</span></span> <span data-ttu-id="e5b98-474">Votre compte Azure n’est plus facturé pour cette machine virtuelle, de sorte que les seuls frais occasionnés concernent le stockage utilisé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-474">Your Azure account will no longer be charged for this VM so the only charges that will incur are for the storage used.</span></span> <span data-ttu-id="e5b98-475">Cependant, si l’adresse IP privée de l’interface réseau n’était pas fixe, l’adresse IP est libérée et il n’y a aucune garantie que l’ancienne adresse IP sera à nouveau affectée à l’interface réseau après un redémarrage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-475">However, if the private IP address of the network interface was not static, the IP address is released and it is not guaranteed that the network interface gets the old IP address assigned again after a restart of the VM.</span></span> <span data-ttu-id="e5b98-476">L’exécution de l’arrêt via le portail Azure ou l’appel de Stop-AzureRmVM entraîne automatiquement la désallocation de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-476">Performing the shut down through the Azure Portal or by calling Stop-AzureRmVM will automatically cause de-allocation.</span></span> <span data-ttu-id="e5b98-477">Si vous ne souhaitez pas la désallouer, utilisez Stop-AzureRmVM -StayProvisioned.</span><span class="sxs-lookup"><span data-stu-id="e5b98-477">If you do not want to deallocat the machine use Stop-AzureRmVM -StayProvisioned</span></span>
* <span data-ttu-id="e5b98-478">Si vous arrêtez la machine virtuelle depuis un système d’exploitation, elle est arrêtée et n’est PAS désallouée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-478">If you shut down the VM from an OS level, the VM gets shut down and NOT de-allocated.</span></span> <span data-ttu-id="e5b98-479">Cependant, votre compte Azure sera toujours facturé pour la machine virtuelle, même si celle-ci est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-479">However, in this case, your Azure account will still be charged for the VM, despite the fact that it is shutdown.</span></span> <span data-ttu-id="e5b98-480">Dans une telle situation, l’adresse IP affectée à une machine virtuelle arrêtée sera conservée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-480">In such a case, the assignment of the IP address to a stopped VM will remain intact.</span></span> <span data-ttu-id="e5b98-481">L’arrêt de la machine virtuelle depuis celle-ci ne forcera pas sa désallocation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-481">Shutting down the VM from within will not automatically force de-allocation.</span></span>

<span data-ttu-id="e5b98-482">Même pour les scénarios de déploiement entre différents locaux, par défaut, un arrêt et une désallocation entraînent la désaffectation des adresses IP de la machine virtuelle, même si les stratégies locales définies dans les paramètres DHCP sont différentes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-482">Even for Cross-Premises scenarios, by default a shutdown and de-allocation will mean de-assignment of the IP addresses from the VM, even if on-premises policies in DHCP settings are different.</span></span>

* <span data-ttu-id="e5b98-483">La seule exception concerne le cas où une adresse IP fixe est affectée à une interface réseau de la manière décrite [ici][virtual-networks-reserved-private-ip].</span><span class="sxs-lookup"><span data-stu-id="e5b98-483">The exception is if one assigns a static IP address to a network interface as described [here][virtual-networks-reserved-private-ip].</span></span>
* <span data-ttu-id="e5b98-484">L’adresse IP reste alors fixe tant que l’interface réseau n’est pas supprimée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-484">In such a case the IP address remains fixed as long as the network interface is not deleted.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e5b98-485">Pour que l’ensemble du déploiement reste simple et facile à gérer, la solution évidente consiste à configurer les machines virtuelles associées dans une configuration haute disponibilité ou de récupération d’urgence de SGBD au sein d’Azure de sorte qu’il y ait une résolution de noms qui fonctionne entre les différentes machines virtuelles impliquées.</span><span class="sxs-lookup"><span data-stu-id="e5b98-485">In order to keep the whole deployment simple and manageable, the clear recommendation is to setup the VMs partnering in a DBMS HA or DR configuration within Azure in a way that there is a functioning name resolution between the different VMs involved.</span></span>
>
>

## <a name="deployment-of-host-monitoring"></a><span data-ttu-id="e5b98-486">Déploiement de la surveillance d’hôte</span><span class="sxs-lookup"><span data-stu-id="e5b98-486">Deployment of Host Monitoring</span></span>
<span data-ttu-id="e5b98-487">Pour une utilisation productive des applications SAP dans Azure Virtual Machines, SAP doit avoir la possibilité de collecter des données de surveillance d’hôte auprès des hôtes physiques exécutant les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-487">For productive usage of SAP Applications in Azure Virtual Machines, SAP requires the ability to get host monitoring data from the physical hosts running the Azure Virtual Machines.</span></span> <span data-ttu-id="e5b98-488">Un niveau de correctif logiciel SAP HostAgent spécifique est requis pour activer cette fonctionnalité dans SAPOSCOL et SAP HostAgent.</span><span class="sxs-lookup"><span data-stu-id="e5b98-488">A specific SAP HostAgent patch level will be required that enables this capability in SAPOSCOL and SAP HostAgent.</span></span> <span data-ttu-id="e5b98-489">Le niveau de correctif logiciel exact est indiqué dans la Note de SAP [1409604].</span><span class="sxs-lookup"><span data-stu-id="e5b98-489">The exact patch level is documented in SAP Note [1409604].</span></span>

<span data-ttu-id="e5b98-490">Pour plus d’informations concernant le déploiement de composants qui fournissent des données d’hôte à SAPOSCOL et SAPHostAgent et la gestion du cycle de vie de ces composants, consultez le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="e5b98-490">For the details regarding deployment of components that deliver host data to SAPOSCOL and SAPHostAgent and the lifecycle management of those components, please refer to the [Deployment Guide][deployment-guide]</span></span>

## <span data-ttu-id="e5b98-491"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Caractéristiques de Microsoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-491"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifics to Microsoft SQL Server</span></span>
### <a name="sql-server-iaas"></a><span data-ttu-id="e5b98-492">IaaS SQL Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-492">SQL Server IaaS</span></span>
<span data-ttu-id="e5b98-493">À partir de Microsoft Azure, vous pouvez facilement migrer vos applications SQL Server existantes créées sur la plateforme Windows Server vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-493">Starting with Microsoft Azure, you can easily migrate your existing SQL Server applications built on Windows Server platform to Azure Virtual Machines.</span></span> <span data-ttu-id="e5b98-494">Dans une machine virtuelle, SQL Server vous permet de réduire le coût total de possession lié au déploiement, à la gestion et à la maintenance des applications d’entreprise en les migrant en toute simplicité vers Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-494">SQL Server in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="e5b98-495">Avec SQL Server dans une machine virtuelle Azure, les administrateurs et développeurs peuvent utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-495">With SQL Server in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e5b98-496">Notez que nous ne traiterons pas ici du service Base de données SQL Microsoft Azure, qui est une offre Platform as a Service (PaaS) de la plateforme Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-496">Please note we are not discussing Microsoft Azure SQL Database which is a Platform as a Service offer of the Microsoft Azure Platform.</span></span> <span data-ttu-id="e5b98-497">Ce document porte sur l’exécution du produit SQL Server pour les déploiements locaux dans Azure Virtual Machines, en tirant parti des capacités d’Infrastructure as a Service (IaaS) d’Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-497">The discussion in this paper is about running the SQL Server product as it is known for on-premises deployments in Azure Virtual Machines, leveraging the Infrastructure as a Service capability of Azure.</span></span> <span data-ttu-id="e5b98-498">Les capacités et fonctionnalités de base de données de ces deux services sont différentes et ne doivent pas être confondues.</span><span class="sxs-lookup"><span data-stu-id="e5b98-498">Database capabilities and functionalities between these two offers are different and should not be mixed up with each other.</span></span> <span data-ttu-id="e5b98-499">Voir aussi : <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="e5b98-499">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
>
>

<span data-ttu-id="e5b98-500">Avant de continuer, il est vivement recommandé de parcourir [cette][virtual-machines-sql-server-infrastructure-services] documentation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-500">It is strongly recommended to review [this][virtual-machines-sql-server-infrastructure-services] documentation before continuing.</span></span>

<span data-ttu-id="e5b98-501">Dans les sections suivantes, des parties de la documentation ci-dessus seront regroupées et mentionnées.</span><span class="sxs-lookup"><span data-stu-id="e5b98-501">In the following sections pieces of parts of the documentation under the link above will be aggregated and mentioned.</span></span> <span data-ttu-id="e5b98-502">Les particularités concernant SAP sont également indiquées et certains concepts décrits plus en détail.</span><span class="sxs-lookup"><span data-stu-id="e5b98-502">Specifics around SAP are mentioned as well and some concepts are described in more detail.</span></span> <span data-ttu-id="e5b98-503">Cependant, il est fortement recommandé d’examiner la documentation ci-dessus avant de lire la documentation propre à SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-503">However, it is highly recommended to work through the documentation above first before reading the SQL Server specific documentation.</span></span>

<span data-ttu-id="e5b98-504">Avant de continuer, il y a certaines informations spécifiques sur SQL Server dans IaaS que vous devez connaître :</span><span class="sxs-lookup"><span data-stu-id="e5b98-504">There is some SQL Server in IaaS specific information you should know before continuing:</span></span>

* <span data-ttu-id="e5b98-505">**Contrat de niveau de service pour les machines virtuelles** : il existe un contrat de niveau de service pour les machines virtuelles exécutées dans Azure. Il est disponible ici : <https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="e5b98-505">**Virtual Machine SLA**: There is an SLA for Virtual Machines running in Azure which can be found here: <https://azure.microsoft.com/support/legal/sla/></span></span>  
* <span data-ttu-id="e5b98-506">**Prise en charge des versions SQL**: pour les clients SAP, nous prenons en charge SQL Server 2008 R2 et versions ultérieures sur Microsoft Azure Virtual Machine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-506">**SQL Version Support**: For SAP customers, we support SQL Server 2008 R2 and higher on Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="e5b98-507">Les éditions antérieures ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="e5b98-507">Earlier editions are not supported.</span></span> <span data-ttu-id="e5b98-508">Pour plus d’informations, voir cette [déclaration officielle](https://support.microsoft.com/kb/956893) générale.</span><span class="sxs-lookup"><span data-stu-id="e5b98-508">Review this general [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="e5b98-509">Notez qu’en règle générale, SQL Server 2008 est également pris en charge par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e5b98-509">Please note that in general SQL Server 2008 is supported by Microsoft as well.</span></span> <span data-ttu-id="e5b98-510">Cependant, en raison de fonctionnalités significatives pour SAP introduites avec SQL Server 2008 R2, SQL Server 2008 R2 est la version minimale requise pour SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-510">However due to significant functionality for SAP which was introduced with SQL Server 2008 R2, SQL Server 2008 R2 is the minimum release for SAP.</span></span> <span data-ttu-id="e5b98-511">Gardez à l’esprit que SQL Server 2012 et 2014 ont été étendus avec une meilleure intégration dans le scénario IaaS (possibilité de sauvegarde directe dans Azure Storage, par exemple).</span><span class="sxs-lookup"><span data-stu-id="e5b98-511">Keep in mind that SQL Server 2012 and 2014 got extended with deeper integration into the IaaS scenario (like backing up directly against Azure Storage).</span></span> <span data-ttu-id="e5b98-512">Par conséquent, nous limiterons ce document à SQL Server 2012 et 2014 avec le dernier niveau de correctif logiciel pour Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-512">Therefore, we restrict this paper to SQL Server 2012 and 2014 with its latest patch level for Azure.</span></span>
* <span data-ttu-id="e5b98-513">**Prise en charge des fonctionnalités SQL**: la plupart des fonctionnalités SQL Server sont prises en charge sur Microsoft Azure Virtual Machines, à quelques exceptions près.</span><span class="sxs-lookup"><span data-stu-id="e5b98-513">**SQL Feature Support**: Most SQL Server features are supported on Microsoft Azure Virtual Machines with some exceptions.</span></span> <span data-ttu-id="e5b98-514">**Le clustering de basculement SQL Server à l’aide de disques partagés n’est pas pris en charge**.</span><span class="sxs-lookup"><span data-stu-id="e5b98-514">**SQL Server Failover Clustering using Shared Disks is not supported**.</span></span>  <span data-ttu-id="e5b98-515">Les technologies distribuées telles que la mise en miroir de bases de données, les groupes de disponibilité AlwaysOn, la réplication, la copie des journaux de transaction et l’envoi de journaux et Service Broker sont prises en charge au sein d’une même région Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-515">Distributed technologies like Database Mirroring, AlwaysOn Availability Groups, Replication, Log Shipping and Service Broker are supported within a single Azure Region.</span></span> <span data-ttu-id="e5b98-516">SQL Server AlwaysOn est également pris en charge entre différentes régions Azure comme indiqué ici : <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-516">SQL Server AlwaysOn also is supported between different Azure Regions as documented here:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span></span>  <span data-ttu-id="e5b98-517">Pour plus d’informations, voir la [déclaration officielle](https://support.microsoft.com/kb/956893) .</span><span class="sxs-lookup"><span data-stu-id="e5b98-517">Review the [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="e5b98-518">Pour un exemple de déploiement de configuration AlwaysOn, consultez [cet][virtual-machines-workload-template-sql-alwayson] article.</span><span class="sxs-lookup"><span data-stu-id="e5b98-518">An example on how to deploy an AlwaysOn configuration is shown in [this][virtual-machines-workload-template-sql-alwayson] article.</span></span> <span data-ttu-id="e5b98-519">Consultez également les meilleures pratiques détaillées [ici][virtual-machines-sql-server-infrastructure-services]</span><span class="sxs-lookup"><span data-stu-id="e5b98-519">Also, check out the Best Practices documented [here][virtual-machines-sql-server-infrastructure-services]</span></span>
* <span data-ttu-id="e5b98-520">**Performances de SQL** : nous sommes convaincus que les machines virtuelles hébergées par Microsoft Azure fonctionneront mieux que d’autres offres de virtualisation du cloud public. Cependant, les résultats peuvent varier d’un cas à l’autre.</span><span class="sxs-lookup"><span data-stu-id="e5b98-520">**SQL Performance**: We are confident that Microsoft Azure hosted Virtual Machines will perform very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="e5b98-521">Pour en savoir plus, consultez [cet article][virtual-machines-sql-server-performance-best-practices].</span><span class="sxs-lookup"><span data-stu-id="e5b98-521">Check out [this][virtual-machines-sql-server-performance-best-practices] article.</span></span>
* <span data-ttu-id="e5b98-522">**Utilisation d’images de Microsoft Azure Marketplace**: la méthode la plus rapide pour déployer une nouvelle machine virtuelle Microsoft Azure consiste à utiliser une image de Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="e5b98-522">**Using Images from Azure Marketplace**: The fastest way to deploy a new Microsoft Azure VM is to use an image from the Azure Marketplace.</span></span> <span data-ttu-id="e5b98-523">En effet, cette plateforme propose des images incluant SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-523">There are images in the Azure Marketplace which contain SQL Server.</span></span> <span data-ttu-id="e5b98-524">Les images hébergeant déjà SQL Server ne peuvent pas être directement utilisées pour les applications SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="e5b98-524">The images where SQL Server already is installed can’t be immediately used for SAP NetWeaver applications.</span></span> <span data-ttu-id="e5b98-525">En effet, le classement par défaut installé au sein de ces images correspond à celui de SQL Server, et non au classement requis par les systèmes SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="e5b98-525">The reason is the default SQL Server collation is installed within those images and not the collation required by SAP NetWeaver systems.</span></span> <span data-ttu-id="e5b98-526">Pour pouvoir utiliser ces images, suivez la procédure décrite dans le chapitre [Utilisation d’images SQL Server issues de la Place de marché Microsoft Azure][dbms-guide-5.6].</span><span class="sxs-lookup"><span data-stu-id="e5b98-526">In order to use such images, please check the steps documented in chapter [Using a SQL Server images out of the Microsoft Azure Marketplace][dbms-guide-5.6].</span></span>
* <span data-ttu-id="e5b98-527">Pour en savoir plus, voir la rubrique [Tarification](https://azure.microsoft.com/pricing/) .</span><span class="sxs-lookup"><span data-stu-id="e5b98-527">Check out [Pricing Details](https://azure.microsoft.com/pricing/) for more information.</span></span> <span data-ttu-id="e5b98-528">Les documents [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) (Guide de licences relatives à SQL Server 2012) et [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) (Guide de licences relatives à SQL Server 2014) peuvent également fournir des informations très utiles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-528">The [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) and [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) are also an important resource.</span></span>

### <a name="sql-server-configuration-guidelines-for-sap-related-sql-server-installations-in-azure-vms"></a><span data-ttu-id="e5b98-529">Recommandations en matière de configuration de SQL Server pour les installations associées à SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-529">SQL Server configuration guidelines for SAP related SQL Server installations in Azure VMs</span></span>
#### <a name="recommendations-on-vmvhd-structure-for-sap-related-sql-server-deployments"></a><span data-ttu-id="e5b98-530">Recommandations portant sur la structure des machines virtuelles/disques VHD pour les déploiements de SQL Server associés à SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-530">Recommendations on VM/VHD structure for SAP related SQL Server deployments</span></span>
<span data-ttu-id="e5b98-531">Conformément à la description générale, les exécutables SQL Server doivent être situés ou installés sur le lecteur système du disque VHD de base de la machine virtuelle (le lecteur C:\).</span><span class="sxs-lookup"><span data-stu-id="e5b98-531">In accordance with the general description, SQL Server executables should be located or installed into the system drive of the VM’s base VHD (drive C:\).</span></span>  <span data-ttu-id="e5b98-532">Bien souvent, la plupart des bases de données système SQL Server ne sont pas pleinement exploitées par les charges de travail SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="e5b98-532">Typically, most of the SQL Server system databases are not utilized at a high level by SAP NetWeaver workload.</span></span> <span data-ttu-id="e5b98-533">Par conséquent, les bases de données système SQL Server (« master », « msdb » et « model ») peuvent également rester sur le lecteur C:\.</span><span class="sxs-lookup"><span data-stu-id="e5b98-533">Hence the system databases of SQL Server (master, msdb, and model) can remain on the C:\ drive as well.</span></span> <span data-ttu-id="e5b98-534">La base de données « tempdb » peut être une exception. Pour l’ensemble des charges de travail BW et certaines charges de travail SAP ERP, tempdb peut nécessiter un volume de données ou d’opérations d’E/S plus important, que la capacité de la machine virtuelle d’origine ne suffit pas à satisfaire.</span><span class="sxs-lookup"><span data-stu-id="e5b98-534">An exception could be tempdb, which in the case of some SAP ERP and all BW workloads, might require either higher data volume or I/O operations volume which can’t fit into the original VM.</span></span> <span data-ttu-id="e5b98-535">Pour ces systèmes, la procédure suivante doit être effectuée :</span><span class="sxs-lookup"><span data-stu-id="e5b98-535">For such systems, the following steps should be performed:</span></span>

* <span data-ttu-id="e5b98-536">Déplacez le ou les fichiers de données principaux de tempdb vers le lecteur logique qui inclut déjà le ou les fichiers de données principaux de la base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-536">Move the primary tempdb data file(s) to the same logical drive as the primary data file(s) of the SAP database.</span></span>
* <span data-ttu-id="e5b98-537">Ajoutez les fichiers de données supplémentaires de la base de données tempdb sur chaque lecteur logique contenant un fichier de données de la base de données utilisateur SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-537">Add any additional tempdb data files to each of the other logical drives containing a data file of the SAP user database.</span></span>
* <span data-ttu-id="e5b98-538">Ajoutez le fichier journal tempdb au lecteur logique qui contient le fichier journal de la base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="e5b98-538">Add the tempdb logfile to the logical drive which contains the user database’s log file.</span></span>
* <span data-ttu-id="e5b98-539">Les données et fichiers journaux de tempdb peuvent être placés sur le lecteur D:\ **uniquement dans le cas des types de machines virtuelles qui utilisent des disques SSD locaux** sur le nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="e5b98-539">**Exclusively for VM types that use local SSDs** on the compute node tempdb data and log files might be placed on the D:\ drive.</span></span> <span data-ttu-id="e5b98-540">Toutefois, il peut être préférable d’utiliser plusieurs fichiers de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="e5b98-540">Nevertheless, it might be recommended to use multiple tempdb data files.</span></span> <span data-ttu-id="e5b98-541">N’oubliez pas que les volumes de lecteur D:\ sont différents selon le type de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-541">Be aware D:\ drive volumes are different based on the VM type.</span></span>

<span data-ttu-id="e5b98-542">Ces configurations permettent à la base de données tempdb de consommer davantage d’espace que celui que peut proposer le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-542">These configurations enable tempdb to consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="e5b98-543">Afin de déterminer la taille correcte de la base de données tempdb, vous pouvez vous référer aux différentes tailles de cette dernière sur des systèmes existants qui s’exécutent en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-543">In order to determine the proper tempdb size, one can check the tempdb sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="e5b98-544">De plus, une telle configuration permet d’atteindre un nombre d’E/S par seconde pour tempdb qui ne peut pas être fourni avec le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-544">In addition, such a configuration would enable IOPS numbers against tempdb which cannot be provided with the system drive.</span></span> <span data-ttu-id="e5b98-545">Là encore, des systèmes en cours d’exécution en local peuvent être utilisés pour surveiller la charge de travail d’E/S sur tempdb, afin de vous permettre d’obtenir le nombre d’E/S par seconde attendu sur votre base de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="e5b98-545">Again, systems that are running on-premises can be used to monitor I/O workload against tempdb so that you can derive the IOPS numbers you expect to see on your tempdb.</span></span>

<span data-ttu-id="e5b98-546">Voici un exemple de configuration de machine virtuelle qui exécute SQL Server avec une base de données SAP, et dans laquelle les données et le fichier journal de tempdb sont placés sur le lecteur D:\ :</span><span class="sxs-lookup"><span data-stu-id="e5b98-546">A VM configuration which runs SQL Server with a SAP database and where tempdb data and tempdb logfile are placed on the D:\ drive would look like:</span></span>

![Configuration de référence de la machine virtuelle IaaS Azure pour SAP][dbms-guide-figure-300]

<span data-ttu-id="e5b98-548">N’oubliez pas que le lecteur D:\ présente des tailles différentes selon le type de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-548">Be aware that the D:\ drive has different sizes dependent on the VM type.</span></span> <span data-ttu-id="e5b98-549">En effet, en fonction des exigences en termes de taille de la base de données tempdb, vous pouvez être amené à coupler les données et fichiers journaux de cette dernière avec les fichiers journaux et données de la base de données SAP, si la capacité du lecteur D:\ est insuffisante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-549">Dependent on the size requirement of tempdb you might be forced to pair tempdb data and log files with the SAP database data and log files in cases where D:\ drive is too small.</span></span>

#### <a name="formatting-the-vhds"></a><span data-ttu-id="e5b98-550">Mise en forme des disques VHD</span><span class="sxs-lookup"><span data-stu-id="e5b98-550">Formatting the VHDs</span></span>
<span data-ttu-id="e5b98-551">Dans le cas de SQL Server, la taille de bloc NTFS des disques VHD contenant des données et fichiers journaux SQL Server doit être de 64 Ko.</span><span class="sxs-lookup"><span data-stu-id="e5b98-551">For SQL Server the NTFS block size for VHDs containing SQL Server data and log files should be 64K.</span></span> <span data-ttu-id="e5b98-552">Il est inutile de mettre en forme le lecteur D:\.</span><span class="sxs-lookup"><span data-stu-id="e5b98-552">There is no need to format the D:\ drive.</span></span> <span data-ttu-id="e5b98-553">En effet, ce lecteur est déjà mis en forme.</span><span class="sxs-lookup"><span data-stu-id="e5b98-553">This drive comes pre-formatted.</span></span>

<span data-ttu-id="e5b98-554">Pour vous assurer que la restauration ou la création de bases de données n’initialise pas les fichiers de données en supprimant le contenu des fichiers, vous devez vous assurer que le contexte utilisateur dans lequel le service SQL Server s’exécute dispose de l’autorisation adéquate.</span><span class="sxs-lookup"><span data-stu-id="e5b98-554">In order to make sure that the restore or creation of databases is not initializing the data files by zeroing the content of the files, one should make sure that the user context the SQL Server service is running in has a certain permission.</span></span> <span data-ttu-id="e5b98-555">En général, les utilisateurs du groupe Administrateurs Windows disposent des autorisations requises.</span><span class="sxs-lookup"><span data-stu-id="e5b98-555">Usually users in the Windows Administrator group have these permissions.</span></span> <span data-ttu-id="e5b98-556">Si le service SQL Server est exécuté dans le contexte utilisateur d’un administrateur autre que Windows, vous devez affecter à cet utilisateur le droit « Effectuer les tâches de maintenance de volume ».</span><span class="sxs-lookup"><span data-stu-id="e5b98-556">If the SQL Server service is run in the user context of non-Windows Administrator user, you need to assign that user the User Right ‘Perform volume maintenance tasks’.</span></span>  <span data-ttu-id="e5b98-557">Pour en savoir plus, voir cet article de la Base de connaissances Microsoft : <https://support.microsoft.com/kb/2574695></span><span class="sxs-lookup"><span data-stu-id="e5b98-557">See the details in this Microsoft Knowledge Base Article: <https://support.microsoft.com/kb/2574695></span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="e5b98-558">Impact de la compression de base de données</span><span class="sxs-lookup"><span data-stu-id="e5b98-558">Impact of database compression</span></span>
<span data-ttu-id="e5b98-559">Dans les configurations pour lesquelles la bande passante d’E/S peut devenir un facteur de limitation, toutes les mesures qui réduisent le nombre d’E/S par seconde peuvent contribuer à étirer la charge de travail exécutable dans un scénario IaaS comme Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-559">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="e5b98-560">Par conséquent, si vous ne l’avez pas encore fait, SAP et Microsoft recommandent vivement l’application de la compression de page SQL Server avant le chargement de bases de données SAP existantes sur Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-560">Therefore, if not yet done, applying SQL Server PAGE compression is strongly recommended by both SAP and Microsoft before uploading an existing SAP databases to Azure.</span></span>

<span data-ttu-id="e5b98-561">Nous recommandons d’effectuer une compression de base de données avant le chargement sur Azure pour deux raisons :</span><span class="sxs-lookup"><span data-stu-id="e5b98-561">The recommendation to perform Database Compression before uploading to Azure is given out of two reasons:</span></span>

* <span data-ttu-id="e5b98-562">La quantité de données à charger est moins importante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-562">The amount of data to be uploaded is lower.</span></span>
* <span data-ttu-id="e5b98-563">En supposant que l’on peut utiliser en local un matériel plus performant avec plus d’UC, une bande passante d’E/S supérieure ou une latence d’E/S inférieure, la durée d’exécution de la compression est plus courte.</span><span class="sxs-lookup"><span data-stu-id="e5b98-563">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises.</span></span>
* <span data-ttu-id="e5b98-564">Des bases de données plus petites peuvent permettre de diminuer les coûts liés à l’allocation de disque.</span><span class="sxs-lookup"><span data-stu-id="e5b98-564">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="e5b98-565">La compression de bases de données fonctionne aussi bien dans une machine virtuelle Azure qu’en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-565">Database compression works as well in an Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="e5b98-566">Pour en savoir plus sur la compression d’une base de données SQL Server SAP existante, voir le document suivant : <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-566">For more details on how to compress an existing SAP SQL Server database please check here: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span></span>

### <a name="sql-server-2014--storing-database-files-directly-on-azure-blog-storage"></a><span data-ttu-id="e5b98-567">SQL Server 2014 : placement de fichiers de base de données directement sur le stockage d’objets blob Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-567">SQL Server 2014 – Storing Database Files directly on Azure Blog Storage</span></span>
<span data-ttu-id="e5b98-568">SQL Server 2014 permet de stocker les fichiers de base de données directement sur le magasin d’objets blob Azure, sans qu’il soit nécessaire d’utiliser un disque VHD pour « envelopper » ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="e5b98-568">SQL Server 2014 opens the possibility to store database files directly on Azure Blob Store without the ‘wrapper’ of a VHD around them.</span></span> <span data-ttu-id="e5b98-569">En particulier, lorsque vous utilisez des types de machine virtuelle Azure Storage standard ou plus petits, certains scénarios sont possibles, selon lesquels vous pouvez dépasser les limites en matière d’E/S par seconde qui seraient appliquées par un nombre limité de disques VHD pouvant être montés sur certains types de machine virtuelle de taille plus réduite.</span><span class="sxs-lookup"><span data-stu-id="e5b98-569">Especially with using Standard Azure Storage or smaller VM types this enables scenarios where you can overcome the limits of IOPS that would be enforced by a limited number of VHDs that can be mounted to some smaller VM types.</span></span> <span data-ttu-id="e5b98-570">Toutefois, ce genre de scénario fonctionne dans le cas des bases de données utilisateur, mais non pour les bases de données système SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-570">This works for user databases however not for system databases of SQL Server.</span></span> <span data-ttu-id="e5b98-571">Il peut également être appliqué aux fichiers journaux et données de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-571">It also works for data and log files of SQL Server.</span></span> <span data-ttu-id="e5b98-572">Si vous souhaitez déployer une base de données SQL Server SAP de cette manière plutôt que de recourir à des disques VHD pour « l’envelopper », tenez compte des remarques suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-572">If you’d like to deploy a SAP SQL Server database this way instead of ‘wrapping’ it into VHDs, please keep the following in mind:</span></span>

* <span data-ttu-id="e5b98-573">Le compte de stockage utilisé doit se trouver dans la même région Azure que celui qui permet de déployer la machine virtuelle sur laquelle SQL Server s’exécute.</span><span class="sxs-lookup"><span data-stu-id="e5b98-573">The Storage Account used needs to be in the same Azure Region as the one that is used to deploy the VM SQL Server is running in.</span></span>
* <span data-ttu-id="e5b98-574">Les considérations relatives à la répartition de disques VHD sur différents comptes Azure Storage qui ont été abordées précédemment portent également sur cette méthode de déploiement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-574">Considerations listed earlier in regards to distribute VHDs over different Azure Storage Accounts apply for this method of deployments as well.</span></span> <span data-ttu-id="e5b98-575">Cela signifie que les opérations d’E/S sont concernées par les limites du compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-575">Means the I/O operations count against the limits of the Azure Storage Account.</span></span>

<span data-ttu-id="e5b98-576">[comment]: <> (MSSedusch TODO Cette opération utilise la bande passante du réseau et non celle du stockage, n’est-ce pas ?)</span><span class="sxs-lookup"><span data-stu-id="e5b98-576">[comment]: <> (MSSedusch TODO But this will use network bandwith and not storage bandwith, doesn't it?)</span></span>

<span data-ttu-id="e5b98-577">Pour plus d’informations sur ce type de déploiement, voir la page : <https://msdn.microsoft.com/library/dn385720.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-577">Details about this type of deployment are listed here: <https://msdn.microsoft.com/library/dn385720.aspx></span></span>

<span data-ttu-id="e5b98-578">Pour stocker des fichiers de données SQL Server directement sur Stockage Premium Azure, vous devez vous procurer la version minimale du correctif SQL Server 2014 documentée ici : <https://support.microsoft.com/kb/3063054>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-578">In order to store SQL Server data files directly on Azure Premium Storage, you need to have a minimum SQL Server 2014 patch release which is documented here: <https://support.microsoft.com/kb/3063054>.</span></span> <span data-ttu-id="e5b98-579">La fonctionnalité permettant de stocker des fichiers de données SQL Server sur le stockage Azure standard fonctionne avec la version finale de SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="e5b98-579">Storing SQL Server data files on Azure Standard Storage does work with the released version of SQL Server 2014.</span></span> <span data-ttu-id="e5b98-580">Toutefois, ces mêmes correctifs contiennent une autre série de correctifs, qui renforcent la fiabilité du stockage d’objets blob Azure lorsqu’il est directement utilisé pour les sauvegardes et fichiers de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-580">However, the very same patches contain another series of fixes which make the direct usage of Azure Blob Storage for SQL Server data files and backups more reliable.</span></span> <span data-ttu-id="e5b98-581">Pour cette raison, nous recommandons l’utilisation de ces correctifs, de manière générale.</span><span class="sxs-lookup"><span data-stu-id="e5b98-581">Therefore we recommend to use these patches in general.</span></span>

### <a name="sql-server-2014-buffer-pool-extension"></a><span data-ttu-id="e5b98-582">Fonctionnalité d’extension du pool de mémoires tampons de SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="e5b98-582">SQL Server 2014 Buffer Pool Extension</span></span>
<span data-ttu-id="e5b98-583">SQL Server 2014 propose une nouvelle fonctionnalité appelée « extension du pool de mémoires tampons ».</span><span class="sxs-lookup"><span data-stu-id="e5b98-583">SQL Server 2014 introduced a new feature which is called Buffer Pool Extension.</span></span> <span data-ttu-id="e5b98-584">Cette fonctionnalité permet d’étendre le pool de mémoires tampons de SQL Server conservé en mémoire grâce à un cache de deuxième niveau, sauvegardé par les disques SSD locaux d’un serveur ou d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-584">This functionality extends the buffer pool of SQL Server which is kept in memory with a second level cache that is backed by local SSDs of a server or VM.</span></span> <span data-ttu-id="e5b98-585">Cela permet de conserver une plage de travail plus étendue pour les données « en mémoire ».</span><span class="sxs-lookup"><span data-stu-id="e5b98-585">This enables to keep a larger working set of data ‘in memory’.</span></span> <span data-ttu-id="e5b98-586">Par rapport à l’accès au stockage Azure standard, l’accès à l’extension du pool de mémoires tampons stocké sur les disques SSD locaux d’une machine virtuelle est beaucoup plus rapide.</span><span class="sxs-lookup"><span data-stu-id="e5b98-586">Compared to accessing Azure Standard Storage the access into the extension of the buffer pool which is stored on local SSDs of an Azure VM is many factors faster.</span></span>  <span data-ttu-id="e5b98-587">Par conséquent, il peut s’avérer très pertinent de tirer parti du lecteur D:\ local des types de machine virtuelle présentant un excellent nombre d’E/S par seconde et un très bon débit, afin de réduire la charge d’E/S par seconde affectant Azure Storage et d’améliorer de façon très nette le temps de réponse des requêtes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-587">Therefore, leveraging the local D:\ drive of the VM types that have excellent IOPS and throughput could be a very reasonable way to reduce the IOPS load against Azure Storage and improve response times of queries dramatically.</span></span> <span data-ttu-id="e5b98-588">Cela se révèle d’autant plus vrai lorsque vous n’utilisez pas Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-588">This applies especially when not using Premium Storage.</span></span> <span data-ttu-id="e5b98-589">En effet, si vous utilisez Premium Storage et le cache de lecture Azure Premium sur le nœud de traitement, comme recommandé pour les fichiers de données, il ne doit y avoir aucune différence majeure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-589">In case of Premium Storage and the usage of the Premium Azure Read Cache on the compute node, as recommended for data files, no big differences are expected.</span></span> <span data-ttu-id="e5b98-590">En effet, les deux caches (le cache de lecture Premium Storage et la fonction d’extension du pool de mémoires tampons SQL Server) utilisent les disques locaux des nœuds de traitement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-590">Reason is that both caches (SQL Server Buffer Pool Extension and Premium Storage Read Cache) are using the local disks of the compute nodes.</span></span>
<span data-ttu-id="e5b98-591">Pour en savoir plus sur cette fonctionnalité, voir cette documentation : <https://msdn.microsoft.com/library/dn133176.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-591">For more details about this functionality, please check this documentation: <https://msdn.microsoft.com/library/dn133176.aspx></span></span>

### <a name="backuprecovery-considerations-for-sql-server"></a><span data-ttu-id="e5b98-592">Considérations relatives à la sauvegarde/restauration pour SQL Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-592">Backup/Recovery considerations for SQL Server</span></span>
<span data-ttu-id="e5b98-593">Lors du déploiement de SQL Server dans Azure, votre méthodologie de sauvegarde doit être passée en revue.</span><span class="sxs-lookup"><span data-stu-id="e5b98-593">When deploying SQL Server into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="e5b98-594">Même si le système n’est pas un système productif, la base de données SAP hébergée par SQL Server doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-594">Even if the system is not a productive system, the SAP database hosted by SQL Server must be backed up periodically.</span></span> <span data-ttu-id="e5b98-595">Comme Azure Storage conserve trois images, la sauvegarde joue désormais un rôle moins important en matière de compensation des pannes du stockage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-595">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="e5b98-596">La raison principale du maintien d’un plan de sauvegarde et de récupération approprié réside davantage dans le fait que vous pouvez compenser les erreurs logiques/manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-596">The priority reason for maintaining a proper backup and recovery plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="e5b98-597">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un moment donné, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-597">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="e5b98-598">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-598">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="e5b98-599">Vous pouvez sauvegarder des données SQL Server sur Azure Storage de trois manières différentes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-599">There are three different ways to backup SQL Server to Azure Storage:</span></span>

1. <span data-ttu-id="e5b98-600">SQL Server 2012 CU4 et les versions ultérieures peuvent sauvegarder les bases de données sur une URL, en mode natif.</span><span class="sxs-lookup"><span data-stu-id="e5b98-600">SQL Server 2012 CU4 and higher can natively backup databases to a URL.</span></span> <span data-ttu-id="e5b98-601">Cette opération est détaillée dans le billet de blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx)(Nouvelles fonctionnalités de SQL Server 2014 - Partie 5 - Améliorations apportées à la sauvegarde et à la restauration).</span><span class="sxs-lookup"><span data-stu-id="e5b98-601">This is detailed in the blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span></span> <span data-ttu-id="e5b98-602">Voir le chapitre [SQL Server 2012 SP1 CU4 et versions ultérieures][dbms-guide-5.5.1].</span><span class="sxs-lookup"><span data-stu-id="e5b98-602">See chapter [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1].</span></span>
2. <span data-ttu-id="e5b98-603">Les versions de SQL Server antérieures à SQL 2012 CU4 peuvent exploiter une fonctionnalité de redirection pour sauvegarder leurs données sur un disque VHD et déplacer le flux d’écriture vers un emplacement Azure Storage qui a été configuré.</span><span class="sxs-lookup"><span data-stu-id="e5b98-603">SQL Server releases prior to SQL 2012 CU4 can use a redirection functionality to backup to a VHD and basically move the write stream towards an Azure Storage location that has been configured.</span></span> <span data-ttu-id="e5b98-604">Voir le chapitre [SQL Server 2012 SP1 CU3 et versions antérieures][dbms-guide-5.5.2].</span><span class="sxs-lookup"><span data-stu-id="e5b98-604">See chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2].</span></span>
3. <span data-ttu-id="e5b98-605">La dernière méthode consiste à effectuer une sauvegarde de données SQL Server classique à commande disque sur une unité de disque VHD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-605">The final method is to perform a conventional SQL Server backup to disk command onto a VHD disk device.</span></span>  <span data-ttu-id="e5b98-606">Cette procédure, identique à celle du modèle de déploiement local, n’est pas détaillée dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-606">This is identical to the on-premises deployment pattern and is not discussed in detail in this document.</span></span>

#### <span data-ttu-id="e5b98-607"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 et versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="e5b98-607"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 and later</span></span>
<span data-ttu-id="e5b98-608">Cette fonctionnalité vous permet de sauvegarder directement les données sur le stockage d’objets blob Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-608">This functionality allows you to directly backup to Azure BLOB storage.</span></span> <span data-ttu-id="e5b98-609">Sans cette méthode, vous devez sauvegarder les données sur d’autres disques VHD Azure, ce qui monopolise la capacité des disques VHD ainsi que les E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-609">Without this method, you must backup to other Azure VHDs which would consume VHD and IOPS capacity.</span></span> <span data-ttu-id="e5b98-610">L’idée de base est la suivante :</span><span class="sxs-lookup"><span data-stu-id="e5b98-610">The idea is basically this:</span></span>

 ![Utilisation de la sauvegarde SQL Server 2012 sur l’objet blob Microsoft Azure Storage][dbms-guide-figure-400]

<span data-ttu-id="e5b98-612">Dans ce cas, il n’est pas nécessaire d’utiliser des disques VHD pour stocker les données de sauvegarde SQL Server, ce qui est un avantage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-612">The advantage in this case is that one doesn’t need to spend VHDs to store SQL Server backups on.</span></span> <span data-ttu-id="e5b98-613">Ainsi, un nombre moins important de disques VHD est alloué et la totalité de la bande passante associée aux E/S par seconde des disques VHD peut être utilisée pour les fichiers journaux et les données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-613">So you have fewer VHDs allocated and the whole bandwidth of VHD IOPS can be used for data and log files.</span></span> <span data-ttu-id="e5b98-614">N’oubliez pas que la taille maximale d’une sauvegarde est limitée à un 1 To, comme décrit dans la section « Limitations » de cet article : <https://msdn.microsoft.com/library/dn435916.aspx#limitations>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-614">Please note that the maximum size of a backup is limited to a maximum of 1 TB as documented in the section ‘Limitations’ in this article: <https://msdn.microsoft.com/library/dn435916.aspx#limitations>.</span></span> <span data-ttu-id="e5b98-615">Si, malgré l’utilisation de la compression de sauvegarde SQL Server, la taille de la sauvegarde dépasse 1 To, la fonctionnalité décrite dans le chapitre [SQL Server 2012 SP1 CU3 et versions antérieures][dbms-guide-5.5.2] du présent document doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-615">If the backup size, despite using SQL Server Backup compression would exceed 1 TB in size, the functionality described in chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] in this document needs to be used.</span></span>

<span data-ttu-id="e5b98-616">La [documentation associée](https://msdn.microsoft.com/library/dn449492.aspx) décrivant la restauration des bases de données à partir de sauvegardes sur le magasin d’objets blob Azure vous recommande de ne pas restaurer directement les données depuis ce magasin si la taille des sauvegardes est supérieure à 25 Go.</span><span class="sxs-lookup"><span data-stu-id="e5b98-616">[Related documentation](https://msdn.microsoft.com/library/dn449492.aspx) describing the restore of databases from backups against Azure Blob Store recommend not to restore directly from Azure BLOB store if the backups is >25GB.</span></span> <span data-ttu-id="e5b98-617">La recommandation indiquée dans cet article repose simplement sur des considérations relatives aux performances, et non sur des restrictions fonctionnelles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-617">The recommendation in this article is simply based on performance considerations and not due to functional restrictions.</span></span> <span data-ttu-id="e5b98-618">Par conséquent, différentes conditions peuvent s’appliquer au cas par cas.</span><span class="sxs-lookup"><span data-stu-id="e5b98-618">Therefore, different conditions may apply on a case by case basis.</span></span>

<span data-ttu-id="e5b98-619">Pour des informations sur la configuration et l’exploitation de ce type de sauvegarde, voir [ce](https://msdn.microsoft.com/library/dn466438.aspx) didacticiel</span><span class="sxs-lookup"><span data-stu-id="e5b98-619">Documentation on how this type of backup is set up and leveraged can be found in [this](https://msdn.microsoft.com/library/dn466438.aspx) tutorial</span></span>

<span data-ttu-id="e5b98-620">Un exemple de séquence d’étapes est détaillé [ici](https://msdn.microsoft.com/library/dn435916.aspx).</span><span class="sxs-lookup"><span data-stu-id="e5b98-620">An example of the sequence of steps can be read [here](https://msdn.microsoft.com/library/dn435916.aspx).</span></span>

<span data-ttu-id="e5b98-621">Lors de l’automatisation des sauvegardes, il est primordial de s’assurer que les objets blob de chaque sauvegarde portent des noms différents.</span><span class="sxs-lookup"><span data-stu-id="e5b98-621">Automating backups, it is of highest importance to make sure that the BLOBs for each backup are named differently.</span></span> <span data-ttu-id="e5b98-622">Dans le cas contraire, ils sont remplacés et la chaîne de restauration est interrompue.</span><span class="sxs-lookup"><span data-stu-id="e5b98-622">Otherwise they will be overwritten and the restore chain is broken.</span></span>

<span data-ttu-id="e5b98-623">Afin de ne pas mélanger les différents éléments entre les 3 types de sauvegarde, nous vous invitons à créer des conteneurs distincts sous le compte de stockage utilisé pour les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-623">In order not to mix up things between the 3 different types of backups, it is advisable to create different containers underneath the storage account used for backups.</span></span> <span data-ttu-id="e5b98-624">Les conteneurs peuvent être créés par machine virtuelle uniquement, ou par type de sauvegarde et de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-624">The containers could be by VM only or by VM and Backup type.</span></span> <span data-ttu-id="e5b98-625">Le schéma peut ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="e5b98-625">The schema could look like:</span></span>

 ![Utilisation de la sauvegarde SQL Server 2012 sur l’objet blob Microsoft Azure Storage : différents conteneurs sous des comptes de stockage distincts][dbms-guide-figure-500]

<span data-ttu-id="e5b98-627">Dans l’exemple ci-dessus, les sauvegardes ne peuvent pas être effectuées sur le compte de stockage dans lequel les machines virtuelles sont déployées.</span><span class="sxs-lookup"><span data-stu-id="e5b98-627">In the example above, the backups would not be performed into the same storage account where the VMs are deployed.</span></span> <span data-ttu-id="e5b98-628">Un nouveau compte de stockage est prévu spécialement pour les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-628">There would be a new storage account specifically for the backups.</span></span> <span data-ttu-id="e5b98-629">Au sein des comptes de stockage, des conteneurs différents sont créés à l’aide de la combinaison du nom de la machine virtuelle et du type de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-629">Within the storage accounts, there would be different containers created with a matrix of the type of backup and the VM name.</span></span> <span data-ttu-id="e5b98-630">Cette segmentation facilite l’administration des sauvegardes des différentes machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-630">Such segmentation will make it easier to administrate the backups of the different VMs.</span></span>

<span data-ttu-id="e5b98-631">Les objets blob sur lesquels les sauvegardes sont directement écrites ne sont pas inclus dans le nombre de disques VHD d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-631">The BLOBs one directly writes the backups to, are not adding to the count of the VHDs of a VM.</span></span> <span data-ttu-id="e5b98-632">Par conséquent, il est possible d’augmenter le nombre maximal de disques VHD montés qui sont associés à la SKU de machine virtuelle spécifique pour le fichier journal de transactions et les données, tout en étant à même d’exécuter une sauvegarde sur un conteneur de stockage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-632">Hence one could maximize the maximum of VHDs mounted of the specific VM SKU for the data and transaction log file and still execute a backup against a storage container.</span></span>

#### <span data-ttu-id="e5b98-633"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 et versions antérieures</span><span class="sxs-lookup"><span data-stu-id="e5b98-633"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 and earlier releases</span></span>
<span data-ttu-id="e5b98-634">La première étape à effectuer pour exécuter une sauvegarde directement sur Azure Storage consiste à télécharger le fichier msi lié à [cet article](https://www.microsoft.com/download/details.aspx?id=40740) de la Base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="e5b98-634">The first step you must perform in order to achieve a backup directly against Azure Storage would be to download the msi which is linked to [this](https://www.microsoft.com/download/details.aspx?id=40740) KBA article.</span></span>

<span data-ttu-id="e5b98-635">Téléchargez le fichier d’installation x64 et la documentation associée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-635">Download the x64 installation file and the documentation.</span></span> <span data-ttu-id="e5b98-636">Ce fichier installe un programme appelé Microsoft SQL Server Backup to Microsoft Azure Tool.</span><span class="sxs-lookup"><span data-stu-id="e5b98-636">The file will install a program called: ‘Microsoft SQL Server Backup to Microsoft Azure Tool’.</span></span> <span data-ttu-id="e5b98-637">Lisez attentivement la documentation du produit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-637">Read the documentation of the product thoroughly.</span></span>  <span data-ttu-id="e5b98-638">De manière générale, cet outil fonctionne de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="e5b98-638">The tool basically works in the following way:</span></span>

* <span data-ttu-id="e5b98-639">Du côté SQL Server, un emplacement de disque est défini pour la sauvegarde de SQL Server (n’utilisez pas le lecteur D:\ à cette fin).</span><span class="sxs-lookup"><span data-stu-id="e5b98-639">From the SQL Server side, a disk location for the SQL Server backup is defined (don’t use the D:\ drive for this).</span></span>
* <span data-ttu-id="e5b98-640">L’outil vous permet de définir des règles qui peuvent être utilisées pour diriger différents types de sauvegardes vers différents conteneurs Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-640">The tool will allow you to define rules which can be used to direct different types of backups to different Azure Storage containers.</span></span>
* <span data-ttu-id="e5b98-641">Une fois les règles en place, l’outil redirige le flux d’écriture de la sauvegarde vers l’un des disques VHD/disques à l’emplacement Azure Storage qui a été défini précédemment.</span><span class="sxs-lookup"><span data-stu-id="e5b98-641">Once the rules are in place, the tool will redirect the write stream of the backup to one of the VHDs/disks to the Azure Storage location which was defined earlier.</span></span>
* <span data-ttu-id="e5b98-642">L’outil laisse un fichier stub de quelques Ko uniquement sur le disque VHD/disque qui a été défini pour la sauvegarde SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-642">The tool will leave a small stub file of a few KB size on the VHD/Disk which was defined for the SQL Server backup.</span></span> <span data-ttu-id="e5b98-643">**Ce fichier doit être conservé à l’emplacement de stockage, car il est requis pour effectuer à nouveau une restauration depuis Azure Storage.**</span><span class="sxs-lookup"><span data-stu-id="e5b98-643">**This file should be left on the storage location since it is required to restore again from Azure Storage.**</span></span>
  * <span data-ttu-id="e5b98-644">Si vous avez perdu le fichier stub (par exemple, à cause de la défaillance du support de stockage qui l’héberge) et que vous avez choisi l’option de sauvegarde vers un compte Microsoft Azure Storage, vous pouvez récupérer ce fichier stub via Microsoft Azure Storage en le téléchargeant à partir du conteneur de stockage dans lequel il a été placé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-644">If you have lost the stub file (e.g. through loss of the storage media that contained the stub file) and you have chosen the option of backing up to a Microsoft Azure Storage account, you may recover the stub file through Microsoft Azure Storage by downloading it from the storage container in which it was placed.</span></span> <span data-ttu-id="e5b98-645">Vous devez ensuite placer ce fichier stub dans un dossier figurant sur l’ordinateur local sur lequel l’outil est configuré pour détecter et charger les données vers le même conteneur, avec le même mot de passe de chiffrement (si le chiffrement est utilisé avec la règle d’origine).</span><span class="sxs-lookup"><span data-stu-id="e5b98-645">You should then place the stub file into a folder on the local machine where the Tool is configured to detect and upload to the same container with the same encryption password if encryption was used with the original rule.</span></span>

<span data-ttu-id="e5b98-646">Cela signifie que le schéma décrit ci-dessus pour les versions plus récentes de SQL Server peut également être mis en place pour les versions de SQL Server qui n’autorisent pas d’adresse directe pour un emplacement Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-646">This means the schema as described above for more recent releases of SQL Server can be put in place as well for SQL Server releases which are not allowing direct address an Azure Storage location.</span></span>

<span data-ttu-id="e5b98-647">Cette méthode ne doit pas être utilisée avec les versions plus récentes de SQL Server qui prennent en charge la sauvegarde en mode natif sur Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-647">This method should not be used with more recent SQL Server releases which support backing up natively against Azure Storage.</span></span> <span data-ttu-id="e5b98-648">Les exceptions concernent les cas où des limitations affectant la sauvegarde en mode natif dans Azure empêchent l’exécution de sauvegardes en mode natif dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-648">Exceptions are where limitations of the native backup into Azure are blocking native backup execution into Azure.</span></span>

#### <a name="other-possibilities-to-backup-sql-server-databases"></a><span data-ttu-id="e5b98-649">Autres méthodes de sauvegarde de bases de données SQL Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-649">Other possibilities to backup SQL Server databases</span></span>
<span data-ttu-id="e5b98-650">Il existe d’autres méthodes de sauvegarde des bases de données, par exemple l’association de disques VHD supplémentaires à la machine virtuelle que vous utilisez pour stocker les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-650">Other possibilities to backup databases is to attach additional VHDs to a VM that you use to store backups on.</span></span> <span data-ttu-id="e5b98-651">Dans ce cas, vous devez vous assurer que les disques VHD ne sont pas saturés lorsqu’ils sont exécutés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-651">In such a case you would need to make sure that the VHDs are not running full.</span></span> <span data-ttu-id="e5b98-652">Si tel est le cas, vous devez démonter le disque VHD concerné, puis « l’archiver » (pour ainsi dire) et le remplacer par un disque VHD vide.</span><span class="sxs-lookup"><span data-stu-id="e5b98-652">If that is the case, you would need to unmount the VHD and so to speak ‘archive’ it and replace it with a new empty VHD.</span></span> <span data-ttu-id="e5b98-653">Si vous optez pour cette méthode, vous devez vous assurer que ces disques VHD se trouvent sur des comptes Azure Storage différents de ceux des disques VHD présentant les fichiers de base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-653">If you go down that path, you want to keep these VHDs in separate Azure Storage Accounts from the ones that the VHDs with the database files.</span></span>

<span data-ttu-id="e5b98-654">Une deuxième méthode consiste à utiliser une machine virtuelle volumineuse, qui peut être associée à plusieurs disques VHD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-654">A second possibility is to use a large VM that can have many VHDs attached.</span></span> <span data-ttu-id="e5b98-655">Par exemple,</span><span class="sxs-lookup"><span data-stu-id="e5b98-655">E.g.</span></span> <span data-ttu-id="e5b98-656">un système D14 avec 32 disques VHD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-656">D14 with 32VHDs.</span></span> <span data-ttu-id="e5b98-657">Utilisez les espaces de stockage pour créer un environnement flexible, dans lequel vous pouvez créer des partages qui seront ensuite utilisés en tant que cibles de sauvegarde pour les différents serveurs SGBD (système de gestion de base de données).</span><span class="sxs-lookup"><span data-stu-id="e5b98-657">Use Storage Spaces to build a flexible environment where you could build shares that are used then as backup targets for the different DBMS servers.</span></span>

<span data-ttu-id="e5b98-658">Certaines meilleures pratiques sont également décrites [ici](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) .</span><span class="sxs-lookup"><span data-stu-id="e5b98-658">Some best practices got documented [here](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) as well.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="e5b98-659">Considérations sur les performances des sauvegardes/restaurations</span><span class="sxs-lookup"><span data-stu-id="e5b98-659">Performance considerations for backups/restores</span></span>
<span data-ttu-id="e5b98-660">À l’instar des déploiements complets, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-660">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="e5b98-661">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles avec jusqu’à 8 threads d’UC maximum.</span><span class="sxs-lookup"><span data-stu-id="e5b98-661">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="e5b98-662">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-662">Therefore, one can assume:</span></span>

* <span data-ttu-id="e5b98-663">Moins il y a de disques VHD utilisés pour stocker les fichiers de données, plus le débit global de lecture est réduit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-663">The fewer the number of VHDs used to store the data files, the smaller the overall throughput in reading.</span></span>
* <span data-ttu-id="e5b98-664">Moins il y a de threads d’UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est important.</span><span class="sxs-lookup"><span data-stu-id="e5b98-664">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression.</span></span>
* <span data-ttu-id="e5b98-665">Moins il y a de cibles d’écriture de la sauvegarde (objets blob ou disques VHD), plus le débit est réduit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-665">The fewer targets (BLOBs or VHDs) to write the backup to, the lesser the throughput.</span></span>
* <span data-ttu-id="e5b98-666">Plus la taille des machines virtuelles est réduite, plus le quota du débit de stockage sera faible lors de l’écriture et de la lecture depuis Azure Storage,</span><span class="sxs-lookup"><span data-stu-id="e5b98-666">The smaller the VM size, the smaller the storage throughput quota writing and reading from Azure Storage.</span></span> <span data-ttu-id="e5b98-667">que les sauvegardes soient directement stockées sur un objet blob Azure ou sur des disques VHD, eux-mêmes stockés sur des objets blob.</span><span class="sxs-lookup"><span data-stu-id="e5b98-667">Independent of whether the backups are directly stored on Azure Blob or whether they are stored in VHDs that again are stored in Azure Blobs.</span></span>

<span data-ttu-id="e5b98-668">Lorsque vous utilisez un objet blob Microsoft Azure Storage en tant que cible de sauvegarde dans les versions les plus récentes, vous ne pouvez indiquer qu’une seule URL cible pour chaque sauvegarde spécifique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-668">When using a Microsoft Azure Storage BLOB as the backup target in more recent releases, you are restricted to designating only one URL target for each specific backup.</span></span>

<span data-ttu-id="e5b98-669">Cependant, lorsque vous utilisez l’outil Microsoft SQL Server Backup to Microsoft Azure Tool dans des versions antérieures, vous pouvez définir plusieurs cibles de fichier.</span><span class="sxs-lookup"><span data-stu-id="e5b98-669">But when using the ‘Microsoft SQL Server Backup to Microsoft Azure Tool’ in older releases, you can define more than one file target.</span></span> <span data-ttu-id="e5b98-670">Puisqu’il existe plusieurs cibles, la sauvegarde peut évoluer ; le débit associé augmente.</span><span class="sxs-lookup"><span data-stu-id="e5b98-670">With more than one target, the backup can scale and the throughput of the backup is higher.</span></span> <span data-ttu-id="e5b98-671">Cela donne également lieu à la création de plusieurs fichiers sur le compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-671">This would result then in multiple files as well in the Azure Storage account.</span></span> <span data-ttu-id="e5b98-672">Lors de nos tests, nous avons constaté que l’utilisation de plusieurs destinations de fichiers permettait réellement d’atteindre le débit obtenu avec les extensions de sauvegarde implémentées dans SQL Server 2012 SP1 CU4 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="e5b98-672">In our testing, using multiple file destinations one can definitely achieve the throughput which one could achieve with the backup extensions implemented in from SQL Server 2012 SP1 CU4 on.</span></span> <span data-ttu-id="e5b98-673">Par ailleurs, vous n’êtes pas contraint de respecter la limite d’1 To imposée par la fonction de sauvegarde en mode natif dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-673">You also are not blocked by the 1TB limit as in the native backup into Azure.</span></span>

<span data-ttu-id="e5b98-674">Toutefois, n’oubliez pas que le débit dépend également de l’emplacement du compte Azure Storage que vous utilisez pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-674">However, keep in mind, the throughput also is dependent on the location of the Azure Storage Account you use for the backup.</span></span> <span data-ttu-id="e5b98-675">Il peut être pertinent de placer le compte de stockage dans une région différente de la région au sein de laquelle les machines virtuelles s’exécutent.</span><span class="sxs-lookup"><span data-stu-id="e5b98-675">An idea might be to locate the storage account in a different region than the VMs are running in.</span></span> <span data-ttu-id="e5b98-676">Par exemple,</span><span class="sxs-lookup"><span data-stu-id="e5b98-676">E.g.</span></span> <span data-ttu-id="e5b98-677">vous pouvez exécuter la configuration de la machine virtuelle en Europe occidentale, tout en plaçant le compte de stockage que vous utilisez pour la sauvegarde en Europe du Nord.</span><span class="sxs-lookup"><span data-stu-id="e5b98-677">you would run the VM configuration in West-Europe, but put the Storage Account that you use to back up against in North-Europe.</span></span> <span data-ttu-id="e5b98-678">Cela affectera certainement le débit des sauvegardes ; il est peu probable que le débit généré atteigne 150 Mbits/s, comme dans certains cas où le stockage cible et les machines virtuelles s’exécutent au sein du même centre de données régional.</span><span class="sxs-lookup"><span data-stu-id="e5b98-678">That certainly will have impact on the backup throughput and is not likely to generate a throughput of 150MB/sec as it seems to be possible in cases where the target storage and the VMs are running in the same regional datacenter.</span></span>

#### <a name="managing-backup-blobs"></a><span data-ttu-id="e5b98-679">Gestion des objets blob de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="e5b98-679">Managing Backup BLOBs</span></span>
<span data-ttu-id="e5b98-680">Si vous voulez gérer les sauvegardes vous-même, il y a une exigence à respecter.</span><span class="sxs-lookup"><span data-stu-id="e5b98-680">There is a requirement to manage the backups on your own.</span></span> <span data-ttu-id="e5b98-681">Étant donné que l’exécution de sauvegardes fréquentes de fichiers journaux de transactions est censée créer de nombreux objets blob, la gestion de ces objets peut rapidement surcharger le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-681">Since the expectation is that many blobs will be created by executing frequent transaction log backups, administration of those blobs easily can overburden the Azure Portal.</span></span> <span data-ttu-id="e5b98-682">Pour cette raison, il est recommandé de tirer parti d’un explorateur Microsoft Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-682">Therefore, it is recommendable to leverage a Azure Storage Explorer.</span></span> <span data-ttu-id="e5b98-683">Il existe plusieurs explorateurs susceptibles de vous aider à gérer efficacement un compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-683">There are several good ones available which can help to manage an Azure storage account</span></span>

* <span data-ttu-id="e5b98-684">Microsoft Visual Studio avec le Kit de développement logiciel (SDK) Azure installé (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-684">Microsoft Visual Studio with Azure SDK installed (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="e5b98-685">Explorateur de stockage Microsoft Azure (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-685">Microsoft Azure Storage Explorer (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="e5b98-686">Outils tiers</span><span class="sxs-lookup"><span data-stu-id="e5b98-686">3rd party tools</span></span>

<span data-ttu-id="e5b98-687">[comment]: <> (Pas encore pris en charge sur ARM)</span><span class="sxs-lookup"><span data-stu-id="e5b98-687">[comment]: <> (Not yet supported on ARM)</span></span>
<span data-ttu-id="e5b98-688">[comment]: <> (#### Sauvegarde de machine virtuelle Azure)</span><span class="sxs-lookup"><span data-stu-id="e5b98-688">[comment]: <> (#### Azure VM backup)</span></span>
<span data-ttu-id="e5b98-689">[comment]: <> (Il est possible de sauvegarder des machines virtuelles dans le système SAP à l’aide de la fonctionnalité de sauvegarde de machines virtuelles Azure. La fonctionnalité de sauvegarde de machine virtuelle Azure Backup a été commercialisée au début de l’année 2015. Elle permet de stocker les sauvegardes dans Azure et de restaurer une machine virtuelle.)</span><span class="sxs-lookup"><span data-stu-id="e5b98-689">[comment]: <> (VMs within the SAP system can be backed up using Azure Virtual Machine Backup functionality. Azure Virtual Machine Backup got introduced early in the year 2015 and meanwhile is a standard method to backup a complete VM in Azure. Azure Backup stores the backups in Azure and allows a restore of a VM again.)</span></span>
<span data-ttu-id="e5b98-690">[comment]: <> (Les machines virtuelles qui exécutent des bases de données peuvent également être sauvegardées de manière cohérente si les systèmes SGBD prennent en charge Windows VSS Volume Shadow Copy Service comme le fait SQL Server <https://msdn.microsoft.com/library/windows/desktop/bb968832.aspx>. L’utilisation de la fonctionnalité de sauvegarde de machine virtuelle Azure peut permettre d’obtenir une sauvegarde de base de données SAP susceptible d’être restaurée. L’utilisation de la fonctionnalité de sauvegarde de machine virtuelle Azure peut permettre d’obtenir une sauvegarde de base de données SAP susceptible d’être restaurée. Par conséquent, il est recommandé d’effectuer des sauvegardes de bases de données avec des systèmes SGBD plutôt que de compter sur la sauvegarde de machines virtuelles Azure.)</span><span class="sxs-lookup"><span data-stu-id="e5b98-690">[comment]: <> (VMs that run databases can be backed up in a consistent manner as well if the DBMS systems supports the Windows VSS Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832.aspx> as SQL Server does. So using Azure VM backup could be a way to get to a restorable backup of a SAP database. However, be aware that based on Azure VM backups point-in-time restores of databases is not possible. Therefore, the recommendation is to perform backups of databases with DBMS functionality instead of relying on Azure VM Backup.)</span></span>
<span data-ttu-id="e5b98-691">[comment]: <> (Pour vous familiariser avec la sauvegarde de machines virtuelles Azure, commencez ici <https://azure.microsoft.com/documentation/services/backup/>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-691">[comment]: <> (To get familiar with Azure Virtual Machine Backup please start here <https://azure.microsoft.com/documentation/services/backup/>)</span></span>

### <span data-ttu-id="e5b98-692"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Utilisation d’images SQL Server issues de Microsoft Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="e5b98-692"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Using a SQL Server images out of the Microsoft Azure Marketplace</span></span>
<span data-ttu-id="e5b98-693">Dans Azure Marketplace, Microsoft propose des machines virtuelles qui contiennent déjà des versions de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-693">Microsoft offers VMs in the Azure Marketplace which already contain versions of SQL Server.</span></span> <span data-ttu-id="e5b98-694">Pour les clients SAP qui requièrent des licences pour SQL Server et Windows, cela peut être l’occasion de répondre aux besoins de base en termes de licences, en configurant des machines virtuelles déjà dotées de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-694">For SAP customers who require licenses for SQL Server and Windows, this might be an opportunity to basically cover the need for licenses by spinning up VMs with SQL Server already installed.</span></span> <span data-ttu-id="e5b98-695">Pour pouvoir utiliser ces images pour SAP, vous devez tenir compte des considérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-695">In order to use such images for SAP, the following considerations need to be made:</span></span>

* <span data-ttu-id="e5b98-696">Les versions de SQL Server autres que les versions d’évaluation nécessitent des frais d’acquisition plus élevés que les simples machines virtuelles uniquement dotées de Windows qui sont déployées depuis Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="e5b98-696">The SQL Server non-Evaluation versions acquire higher costs than just a ‘Windows-only’ VM deployed from Azure Marketplace.</span></span> <span data-ttu-id="e5b98-697">Pour comparer les prix,consultez les articles suivants : <https://azure.microsoft.com/pricing/details/virtual-machines/> et <https://azure.microsoft.com/pricing/details/virtual-machines/#Sql>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-697">Please see these articles to compare prices: <https://azure.microsoft.com/pricing/details/virtual-machines/> and <https://azure.microsoft.com/pricing/details/virtual-machines/#Sql>.</span></span>
* <span data-ttu-id="e5b98-698">Vous pouvez uniquement utiliser les versions de SQL Server qui sont prises en charge par SAP, telles que SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="e5b98-698">You only can use SQL Server releases which are supported by SAP, like SQL Server 2012.</span></span>
* <span data-ttu-id="e5b98-699">Le classement de l’instance SQL Server qui est installée dans les machines virtuelles proposées dans Azure Marketplace ne correspond pas à celui que requiert SAP NetWeaver pour l’instance SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-699">The collation of the SQL Server instance which is installed in the VMs offered in the Azure Marketplace is not the collation SAP NetWeaver requires the SQL Server instance to run.</span></span> <span data-ttu-id="e5b98-700">Toutefois, vous pouvez modifier ce classement, en suivant les instructions de la section suivante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-700">You can change the collation though with the directions in the following section.</span></span>

#### <a name="changing-the-sql-server-collation-of-a-microsoft-windowssql-server-vm"></a><span data-ttu-id="e5b98-701">Modification du classement SQL Server d’une machine virtuelle Microsoft Windows/SQL Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-701">Changing the SQL Server Collation of a Microsoft Windows/SQL Server VM</span></span>
<span data-ttu-id="e5b98-702">Étant donné que les images SQL Server figurant sur Microsoft Azure Marketplace ne sont pas configurées pour utiliser le classement requis par les applications SAP NetWeaver, elles doivent être modifiées immédiatement après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-702">Since the SQL Server images in the Azure Marketplace are not set up to use the collation which is required by SAP NetWeaver applications, it needs to be changed immediately after the deployment.</span></span> <span data-ttu-id="e5b98-703">Pour SQL Server 2012, vous pouvez exécuter cette opération en suivant la procédure ci-après dès que la machine virtuelle est déployée et qu’un administrateur peut se connecter à cette dernière :</span><span class="sxs-lookup"><span data-stu-id="e5b98-703">For SQL Server 2012, this can be done with the following steps as soon as the VM has been deployed and an administrator is able to log into the deployed VM:</span></span>

* <span data-ttu-id="e5b98-704">Ouvrez une fenêtre de commande Windows en tant qu’« administrateur ».</span><span class="sxs-lookup"><span data-stu-id="e5b98-704">Open a Windows Command Window ‘as administrator’.</span></span>
* <span data-ttu-id="e5b98-705">Remplacez le répertoire par celui-ci : C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span><span class="sxs-lookup"><span data-stu-id="e5b98-705">Change the directory to C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span></span>
* <span data-ttu-id="e5b98-706">Exécutez la commande suivante : Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span><span class="sxs-lookup"><span data-stu-id="e5b98-706">Execute the command: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span></span>   
  * <span data-ttu-id="e5b98-707">`<local_admin_account_name`> correspond au compte qui a été défini en tant que compte d’administrateur lors du déploiement de la machine virtuelle pour la première fois, via la galerie.</span><span class="sxs-lookup"><span data-stu-id="e5b98-707">`<local_admin_account_name`> is the account which was defined as the administrator account when deploying the VM for the first time through the gallery.</span></span>

<span data-ttu-id="e5b98-708">Le processus doit prendre quelques minutes seulement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-708">The process should only take a few minutes.</span></span> <span data-ttu-id="e5b98-709">Pour vous assurer que l’étape s’est terminée en produisant le résultat correct, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="e5b98-709">In order to make sure whether the step ended up with the correct result, please perform the following steps:</span></span>

* <span data-ttu-id="e5b98-710">Ouvrez SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="e5b98-710">Open SQL Server Management Studio.</span></span>
* <span data-ttu-id="e5b98-711">Ouvrez une fenêtre Requête.</span><span class="sxs-lookup"><span data-stu-id="e5b98-711">Open a Query Window.</span></span>
* <span data-ttu-id="e5b98-712">Exécutez la commande sp_helpsort dans la base de données MASTER de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-712">Execute the command sp_helpsort in the SQL Server master database.</span></span>

<span data-ttu-id="e5b98-713">Le résultat doit être similaire à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="e5b98-713">The desired result should look like:</span></span>

    Latin1-General, binary code point comparison sort for Unicode Data, SQL Server Sort Order 40 on Code Page 850 for non-Unicode Data

<span data-ttu-id="e5b98-714">Si vous n’obtenez pas ce résultat, interrompez immédiatement le déploiement de SAP et cherchez à savoir pourquoi la commande n’a pas fonctionné comme prévu.</span><span class="sxs-lookup"><span data-stu-id="e5b98-714">If this is not the result, STOP deploying SAP and investigate why the setup command did not work as expected.</span></span> <span data-ttu-id="e5b98-715">Le système ne prend **PAS** en charge le déploiement d’applications SAP NetWeaver sur une instance SQL Server avec des pages de codes SQL autres que celle indiquée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="e5b98-715">Deployment of SAP NetWeaver applications onto SQL Server instance with different SQL Server codepages than the one mentioned above is **NOT** supported.</span></span>

### <a name="sql-server-high-availability-for-sap-in-azure"></a><span data-ttu-id="e5b98-716">Solutions SQL Server haute disponibilité pour SAP dans Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-716">SQL Server High-Availability for SAP in Azure</span></span>
<span data-ttu-id="e5b98-717">Comme indiqué plus haut, il n’est pas possible de créer le stockage partagé qui est nécessaire pour l’utilisation de la fonctionnalité de haute disponibilité SQL Server la plus ancienne.</span><span class="sxs-lookup"><span data-stu-id="e5b98-717">As mentioned earlier in this paper, there is no possibility to create shared storage which is necessary for the usage of the oldest SQL Server high availability functionality.</span></span> <span data-ttu-id="e5b98-718">Cette dernière permet d’installer deux instances SQL Server minimum au sein d’un cluster WSFC (Windows Server Failover Cluster) à l’aide d’un disque partagé pour les bases de données utilisateur (et de tempdb, en fin de compte).</span><span class="sxs-lookup"><span data-stu-id="e5b98-718">This functionality would install two or more SQL Server instances in a Windows Server Failover Cluster (WSFC) using a shared disk for the user databases (and eventually tempdb).</span></span> <span data-ttu-id="e5b98-719">Il s’agit depuis longtemps de la méthode standard pour assurer la haute disponibilité. Elle est également prise en charge par SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-719">This is the long time standard high availability method which also is supported by SAP.</span></span> <span data-ttu-id="e5b98-720">Comme Azure ne prend pas en charge le stockage partagé, les configurations de haute disponibilité de SQL Server reposant sur un cluster de disque partagé sont impossibles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-720">Because Azure doesn’t support shared storage, SQL Server high availability configurations with a shared disk cluster configuration cannot be realized.</span></span> <span data-ttu-id="e5b98-721">Toutefois, de nombreuses autres méthodes sont toujours possibles. Elles sont décrites dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-721">However, many other high availability methods are still possible and are described in the following sections.</span></span>

<span data-ttu-id="e5b98-722">[comment]: <> (L’article fait toujours référence à ASM)</span><span class="sxs-lookup"><span data-stu-id="e5b98-722">[comment]: <> (Article is still refering to ASM)</span></span>
<span data-ttu-id="e5b98-723">[comment]: <> (Avant de parcourir les différentes technologies de haute disponibilité utilisables pour SQL Server dans Azure, vous pouvez consulter cet excellent article, qui fournit davantage de détails et de pointeurs [here][virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions])</span><span class="sxs-lookup"><span data-stu-id="e5b98-723">[comment]: <> (Before reading the different specific high availability technologies usable for SQL Server in Azure, there is a very good document which gives more details and pointers [here][virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions])</span></span>

#### <a name="sql-server-log-shipping"></a><span data-ttu-id="e5b98-724">Copie des journaux de transaction SQL Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-724">SQL Server Log Shipping</span></span>
<span data-ttu-id="e5b98-725">L’une des méthodes permettant d’assurer la haute disponibilité est la copie des journaux de transaction SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-725">One of the methods of high availability (HA) is SQL Server Log Shipping.</span></span> <span data-ttu-id="e5b98-726">Si les machines virtuelles prenant part à la configuration haute disponibilité disposent de la fonctionnalité de résolution de noms, il n’y a aucune difficulté ; l’installation dans Azure ne diffère pas d’une installation effectuée en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-726">If the VMs participating in the HA configuration have working name resolution, there is no problem and the setup in Azure will not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="e5b98-727">Il est déconseillé de se fier uniquement à la résolution IP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-727">It is not recommended to rely on IP resolution only.</span></span> <span data-ttu-id="e5b98-728">Pour en savoir plus sur la configuration de la copie des journaux de transaction et connaître les principes qui sous-tendent cette technologie, consultez la documentation suivante :</span><span class="sxs-lookup"><span data-stu-id="e5b98-728">In regards to setting up Log Shipping and the principles around Log Shipping please check this documentation:</span></span>

<span data-ttu-id="e5b98-729"><https://technet.microsoft.com/library/ms187103.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-729"><https://technet.microsoft.com/library/ms187103.aspx></span></span>

<span data-ttu-id="e5b98-730">Pour réellement assurer leur haute disponibilité, vous devez déployer les machines virtuelles se trouvant au sein d’une configuration de copie des journaux de transaction de ce type afin qu’elles soient placées dans le même groupe à haute disponibilité Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-730">In order to really achieve any high availability, one needs to deploy the VMs which are within such a Log Shipping configuration to be within the same Azure Availability Set.</span></span>

#### <a name="database-mirroring"></a><span data-ttu-id="e5b98-731">Mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="e5b98-731">Database Mirroring</span></span>
<span data-ttu-id="e5b98-732">La mise en miroir de bases de données prise en charge par SAP (voir Note de SAP [965908]) s’appuie sur la définition d’un partenaire de basculement dans la chaîne de connexion SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-732">Database Mirroring as supported by SAP (see SAP Note [965908]) relies on defining a failover partner in the SAP connection string.</span></span> <span data-ttu-id="e5b98-733">Dans le cas de déploiements entre différents locaux, nous partons du principe que les deux machines virtuelles se trouvent au sein du même domaine, et que, au sein du contexte utilisateur dans lequel les deux instances SQL Server s’exécutent, ces dernières sont également des utilisateurs du domaine et disposent de privilèges adéquats dans les deux instances SQL Server concernées.</span><span class="sxs-lookup"><span data-stu-id="e5b98-733">For the Cross-Premises cases, we assume that the two VMs are in the same domain and that the user context the two SQL Server instances are running under are domain users as well and have sufficient privileges in the two SQL Server instances involved.</span></span> <span data-ttu-id="e5b98-734">Par conséquent, la procédure d’installation de la fonctionnalité de mise en miroir de bases de données dans Azure ne diffère pas de celle d’une configuration ou installation locale classique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-734">Therefore, the setup of Database Mirroring in Azure does not differ between a typical on-premises setup/configuration.</span></span>

<span data-ttu-id="e5b98-735">Pour les déploiements sur cloud uniquement, la méthode la plus simple consiste à configurer un autre domaine dans Azure, afin que les machines virtuelles SGBD (système de gestion de base de données), ainsi que les machines virtuelles SAP dédiées, dans l’idéal, se trouvent au sein d’un même domaine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-735">As of Cloud-Only deployments, the easiest method is to have another domain setup in Azure to have those DBMS VMs (and ideally dedicated SAP VMs) within one domain.</span></span>

<span data-ttu-id="e5b98-736">Si cela n’est pas possible, vous pouvez recourir aux certificats associés aux points de terminaison de la mise en miroir de bases de données, comme indiqué ici : <https://technet.microsoft.com/library/ms191477.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-736">If a domain is not possible, one can also use certificates for the database mirroring endpoints as described here: <https://technet.microsoft.com/library/ms191477.aspx></span></span>

<span data-ttu-id="e5b98-737">Vous trouverez un didacticiel expliquant comment configurer la mise en miroir de bases de données dans Azure ici : <https://technet.microsoft.com/library/ms189852.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-737">A tutorial to set-up Database Mirroring in Azure can be found here: <https://technet.microsoft.com/library/ms189852.aspx></span></span>

#### <a name="alwayson"></a><span data-ttu-id="e5b98-738">AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="e5b98-738">AlwaysOn</span></span>
<span data-ttu-id="e5b98-739">Étant donné que la fonction AlwaysOn est prise en charge pour les systèmes SAP locaux (voir Note de SAP [1772688]), il est possible de l’utiliser avec SAP dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-739">As AlwaysOn is supported for SAP on-premises (see SAP Note [1772688]), it is supported to be used in combination with SAP in Azure.</span></span> <span data-ttu-id="e5b98-740">L’incapacité à créer des disques partagés dans Azure ne signifie pas qu’il est impossible de créer une configuration de cluster WSFC (Windows Server Failover Cluster) AlwaysOn entre différentes machines virtuelles ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-740">The fact that you are not able to create shared disks in Azure doesn’t mean that one can’t create an AlwaysOn Windows Server Failover Cluster (WSFC) configuration between different VMs.</span></span> <span data-ttu-id="e5b98-741">cela signifie simplement que vous n’avez pas la possibilité d’utiliser un disque partagé en tant que quorum dans la configuration de cluster.</span><span class="sxs-lookup"><span data-stu-id="e5b98-741">It only means that you do not have the possibility to use a shared disk as a quorum in the cluster configuration.</span></span> <span data-ttu-id="e5b98-742">Par conséquent, vous pouvez créer une configuration WSFC AlwaysOn dans Azure et ne pas sélectionner le type de quorum qui utilise un disque partagé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-742">Hence you can build an AlwaysOn WSFC configuration in Azure and simply not select the quorum type that utilizes shared disk.</span></span> <span data-ttu-id="e5b98-743">L’environnement Azure dans lequel ces machines virtuelles sont déployées doit résoudre les machines virtuelles par nom ; quant aux machines virtuelles, elles doivent être dans le même domaine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-743">The Azure environment those VMs are deployed in should resolve the VMs by name and the VMs should be in the same domain.</span></span> <span data-ttu-id="e5b98-744">Cela se révèle vrai pour Azure uniquement, dans le cas de déploiement entre différents locaux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-744">This is true for Azure only and Cross-Premises deployments.</span></span> <span data-ttu-id="e5b98-745">Certaines considérations spécifiques doivent être prises en charge concernant le déploiement de l’écouteur de groupe de disponibilité SQL Server (à ne pas confondre avec le groupe à haute disponibilité Azure), car Azure n’autorise pas pour l’instant la simple création d’un objet AD/DNS, possible en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-745">There are some special considerations around deploying the SQL Server Availability Group Listener (not to be confused with the Azure Availability Set) since Azure at this point in time does not allow to simply create an AD/DNS object as it is possible on-premises.</span></span> <span data-ttu-id="e5b98-746">Par conséquent, certaines étapes d’installation différentes sont nécessaires pour surmonter le comportement spécifique d’Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-746">Therefore, some different installation steps are necessary to overcome the specific behavior of Azure.</span></span>

<span data-ttu-id="e5b98-747">Lors de l’utilisation de l’écouteur de groupe de disponibilité, tenez compte des considérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-747">Some considerations using an Availability Group Listener are:</span></span>

* <span data-ttu-id="e5b98-748">Vous pouvez uniquement exploiter cet écouteur sur un système Windows Server 2012 ou Windows Server 2012 R2 utilisé en tant que SE invité de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-748">Using an Availability Group Listener is only possible with Windows Server 2012 or Windows Server 2012 R2 as guest OS of the VM.</span></span> <span data-ttu-id="e5b98-749">Pour Windows Server 2012, vous devez vous assurer que ce correctif est appliqué : <https://support.microsoft.com/kb/2854082></span><span class="sxs-lookup"><span data-stu-id="e5b98-749">For Windows Server 2012 you need to make sure that this patch is applied: <https://support.microsoft.com/kb/2854082></span></span>
* <span data-ttu-id="e5b98-750">Dans le cas de Windows Server 2008 R2, ce correctif n’existe pas. La fonction AlwaysOn doit être utilisée de la même manière que la fonctionnalité de mise en miroir de bases de données, via la spécification d’un partenaire de basculement dans la chaîne de connexion (grâce au paramètre SAP default.pfl dbs/mss/server : voir Note de SAP [965908]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-750">For Windows Server 2008 R2 this patch does not exist and AlwaysOn would need to be used in the same manner as Database Mirroring by specifying a failover partner in the connections string (done through the SAP default.pfl parameter dbs/mss/server – see SAP Note [965908]).</span></span>
* <span data-ttu-id="e5b98-751">Lorsque vous utilisez un écouteur de groupe de disponibilité, les machines virtuelles de base de données doivent être connectées à un équilibreur de charge dédié.</span><span class="sxs-lookup"><span data-stu-id="e5b98-751">When using an Availability Group Listener, the Database VMs need to be connected to a dedicated Load Balancer.</span></span> <span data-ttu-id="e5b98-752">La résolution de noms dans un déploiement de cloud uniquement nécessite la présence de l’ensemble des machines virtuelles d’un système SAP (serveurs d’applications, serveur SGBD (système de gestion de base de données) et serveur (A)SCS) au sein du même réseau virtuel, ou requiert la maintenance du fichier etc\host depuis la couche d’application SAP, afin de faire en sorte que les noms des machines virtuelles SQL Server soient résolus.</span><span class="sxs-lookup"><span data-stu-id="e5b98-752">Name resolution in Cloud-Only deployments would either require all VMs of an SAP system (application servers, DBMS server and (A)SCS server) are in the same virtual network or would require from an SAP application layer the maintenance of the etc\host file in order to get the VM names of the SQL Server VMs resolved.</span></span> <span data-ttu-id="e5b98-753">Pour éviter qu’Azure affecte de nouvelles adresses IP lorsque les deux machines virtuelles sont arrêtées, accessoirement, l’utilisateur doit affecter des adresses IP statiques aux interfaces réseau de ces machines au sein de la configuration AlwaysOn (la procédure de définition d’une adresse IP statique est décrite dans [cet article][virtual-networks-reserved-private-ip])</span><span class="sxs-lookup"><span data-stu-id="e5b98-753">In order to avoid that Azure is assigning new IP addresses in cases where both VMs incidentally are shutdown, one should assign static IP addresses to the network interfaces of those VMs in the AlwaysOn configuration (defining a static IP address is described in [this][virtual-networks-reserved-private-ip] article)</span></span>

<span data-ttu-id="e5b98-754">[comment]: <> (Anciens blogs)</span><span class="sxs-lookup"><span data-stu-id="e5b98-754">[comment]: <> (Old blogs)</span></span>
<span data-ttu-id="e5b98-755">[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-755">[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>)</span></span>
* <span data-ttu-id="e5b98-756">La création d’une configuration de cluster WSFC requiert certaines étapes spécifiques lorsque ce cluster doit se voir affecter une adresse IP spécifique, car la fonctionnalité actuelle d’Azure affecte au nom du cluster la même adresse IP que celle du nœud sur lequel le cluster est créé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-756">There are special steps required when building the WSFC cluster configuration where the cluster needs a special IP address assigned, because Azure with its current functionality would assign the cluster name the same IP address as the node the cluster is created on.</span></span> <span data-ttu-id="e5b98-757">Cela signifie que l’attribution d’une adresse IP différente au cluster doit faire l’objet d’une étape manuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-757">This means a manual step must be performed to assign a different IP address to the cluster.</span></span>
* <span data-ttu-id="e5b98-758">L’écouteur de groupe de disponibilité va être créé dans Azure avec les points de terminaison TCP/IP qui sont affectés aux machines virtuelles exécutant les réplicas principaux et secondaires du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="e5b98-758">The Availability Group Listener is going to be created in Azure with TCP/IP endpoints which are assigned to the VMs running the primary and secondary replicas of the Availability group.</span></span>
* <span data-ttu-id="e5b98-759">Il peut être nécessaire de sécuriser ces points de terminaison avec des ACL.</span><span class="sxs-lookup"><span data-stu-id="e5b98-759">There might be a need to secure these endpoints with ACLs.</span></span>

<span data-ttu-id="e5b98-760">[comment]: <> (Ancien blog TODO)</span><span class="sxs-lookup"><span data-stu-id="e5b98-760">[comment]: <> (TODO old blog)</span></span>
<span data-ttu-id="e5b98-761">[comment]: <> (The detailed steps and necessities of installing an AlwaysOn configuration on Azure are best experienced when walking through the tutorial available [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups])</span><span class="sxs-lookup"><span data-stu-id="e5b98-761">[comment]: <> (The detailed steps and necessities of installing an AlwaysOn configuration on Azure are best experienced when walking through the tutorial available [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups])</span></span>
<span data-ttu-id="e5b98-762">[comment]: <> (Preconfigured AlwaysOn setup via the Azure gallery <https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-762">[comment]: <> (Preconfigured AlwaysOn setup via the Azure gallery <https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)</span></span>
<span data-ttu-id="e5b98-763">[comment]: <> (Creating an Availability Group Listener is best described in [this][virtual-machines-windows-classic-ps-sql-int-listener] tutorial)</span><span class="sxs-lookup"><span data-stu-id="e5b98-763">[comment]: <> (Creating an Availability Group Listener is best described in [this][virtual-machines-windows-classic-ps-sql-int-listener] tutorial)</span></span>
<span data-ttu-id="e5b98-764">[comment]: <> (Securing network endpoints with ACLs are explained best here:)</span><span class="sxs-lookup"><span data-stu-id="e5b98-764">[comment]: <> (Securing network endpoints with ACLs are explained best here:)</span></span>
<span data-ttu-id="e5b98-765">[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-765">[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)</span></span>
<span data-ttu-id="e5b98-766">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )</span><span class="sxs-lookup"><span data-stu-id="e5b98-766">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )</span></span>
<span data-ttu-id="e5b98-767">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  </span><span class="sxs-lookup"><span data-stu-id="e5b98-767">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  </span></span>
<span data-ttu-id="e5b98-768">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>)</span><span class="sxs-lookup"><span data-stu-id="e5b98-768">[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>)</span></span>

<span data-ttu-id="e5b98-769">Il est possible de déployer un groupe de disponibilité AlwaysOn SQL Server sur différentes régions Azure également.</span><span class="sxs-lookup"><span data-stu-id="e5b98-769">It is possible to deploy a SQL Server AlwaysOn Availability Group over different Azure Regions as well.</span></span> <span data-ttu-id="e5b98-770">Cette fonctionnalité s’appuiera sur la connectivité de réseau virtuel à réseau virtuel Azure ([plus d’informations ici][virtual-networks-configure-vnet-to-vnet-connection]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-770">This functionality will leverage the Azure VNet-to-Vnet connectivity ([more details][virtual-networks-configure-vnet-to-vnet-connection]).</span></span>

<span data-ttu-id="e5b98-771">[comment]: <> (Ancien blog TODO)</span><span class="sxs-lookup"><span data-stu-id="e5b98-771">[comment]: <> (TODO old blog)</span></span>
<span data-ttu-id="e5b98-772">[comment]: <> (The setup of SQL Server AlwaysOn Availability Groups in such a scenario is described here: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.)</span><span class="sxs-lookup"><span data-stu-id="e5b98-772">[comment]: <> (The setup of SQL Server AlwaysOn Availability Groups in such a scenario is described here: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.)</span></span>

#### <a name="summary-on-sql-server-high-availability-in-azure"></a><span data-ttu-id="e5b98-773">Haute disponibilité SQL Server dans Azure - Résumé</span><span class="sxs-lookup"><span data-stu-id="e5b98-773">Summary on SQL Server High Availability in Azure</span></span>
<span data-ttu-id="e5b98-774">Azure Storage protégeant le contenu, vous avez une raison de moins d’insister sur la création d’une image de secours.</span><span class="sxs-lookup"><span data-stu-id="e5b98-774">Given the fact that Azure Storage is protecting the content, there is one less reason to insist on a hot-standby image.</span></span> <span data-ttu-id="e5b98-775">Cela signifie que votre scénario de haute disponibilité doit uniquement protéger vos systèmes contre les problèmes suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-775">This means your High Availability scenario needs to only protect against the following cases:</span></span>

* <span data-ttu-id="e5b98-776">indisponibilité de la machine virtuelle dans son ensemble en raison d’une opération de maintenance sur le cluster de serveurs dans Azure, ou pour d’autres raisons ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-776">Unavailability of the VM as a whole due to maintenance on the server cluster in Azure or other reasons</span></span>
* <span data-ttu-id="e5b98-777">problèmes logiciels au sein de l’instance SQL Server ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-777">Software issues in the SQL Server instance</span></span>
* <span data-ttu-id="e5b98-778">protection contre les erreurs manuelles, lorsque les données sont supprimées et qu’une récupération jusqu’à une date et heure est requise.</span><span class="sxs-lookup"><span data-stu-id="e5b98-778">Protecting from manual error where data gets deleted and point-in-time recovery is needed</span></span>

<span data-ttu-id="e5b98-779">Si l’on étudie les technologies de mise en correspondance, on peut prétendre que les fonctionnalités de mise en miroir de bases de données et AlwaysOn sont susceptibles de gérer les deux premières situations, alors que la troisième situation ne peut être gérée que par la copie des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="e5b98-779">Looking at matching technologies one can argue that the first two cases can be covered by Database Mirroring or AlwaysOn, whereas the third case only can be covered by Log-Shipping.</span></span>

<span data-ttu-id="e5b98-780">Vous devez trouver l’équilibre entre l’installation d’AlwaysOn et la mise en miroir de bases de données. La première  est plus complexe, mais offre des avantages spécifiques.</span><span class="sxs-lookup"><span data-stu-id="e5b98-780">You will need to balance the more complex setup of AlwaysOn, compared to Database Mirroring, with the advantages of AlwaysOn.</span></span> <span data-ttu-id="e5b98-781">Parmi ces avantages, on peut citer :</span><span class="sxs-lookup"><span data-stu-id="e5b98-781">Those advantages can be listed like:</span></span>

* <span data-ttu-id="e5b98-782">des réplicas secondaires accessibles en lecture ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-782">Readable secondary replicas.</span></span>
* <span data-ttu-id="e5b98-783">des sauvegardes à partir des réplicas secondaires ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-783">Backups from secondary replicas.</span></span>
* <span data-ttu-id="e5b98-784">meilleure extensibilité ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-784">Better scalability.</span></span>
* <span data-ttu-id="e5b98-785">possibilités de disposer de plusieurs réplicas secondaires.</span><span class="sxs-lookup"><span data-stu-id="e5b98-785">More than one secondary replicas.</span></span>

### <span data-ttu-id="e5b98-786"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>Résumé – SQL Server général pour SAP sur Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-786"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>General SQL Server for SAP on Azure Summary</span></span>
<span data-ttu-id="e5b98-787">Ce guide offre de nombreuses recommandations. Nous vous invitons à les parcourir plusieurs fois avant de planifier votre déploiement Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-787">There are many recommendations in this guide and we recommend you read it more than once before planning your Azure deployment.</span></span> <span data-ttu-id="e5b98-788">Cependant, de manière générale, vous devez suivre les dix points principaux spécifiques à la fonction SGBD (système de gestion de base de données) sur Azure :</span><span class="sxs-lookup"><span data-stu-id="e5b98-788">In general, though, be sure to follow the top ten general DBMS on Azure specific points:</span></span>

<span data-ttu-id="e5b98-789">[comment]: <> (Débit multiplié par 2,3 par rapport à quoi ? Than one VHD?)</span><span class="sxs-lookup"><span data-stu-id="e5b98-789">[comment]: <> (2.3 higher throughput than what? Than one VHD?)</span></span>
1. <span data-ttu-id="e5b98-790">Utilisez la dernière version du système SGBD (système de gestion de base de données), comme SQL Server 2014, qui présente les avantages les plus intéressants dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-790">Use the latest DBMS release, like SQL Server 2014, that has the most advantages in Azure.</span></span> <span data-ttu-id="e5b98-791">Pour SQL Server, il s’agit de SQL Server 2012 SP1 CU4, qui inclut la fonctionnalité de sauvegarde sur Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-791">For SQL Server, this is SQL Server 2012 SP1 CU4 which would include the feature of backing up against Azure Storage.</span></span> <span data-ttu-id="e5b98-792">Toutefois, en association avec SAP, nous recommandons au moins la version SQL Server 2014 SP1 CU1 ou SQL Server 2012 SP2 et la dernière unité de capacité.</span><span class="sxs-lookup"><span data-stu-id="e5b98-792">However, in conjunction with SAP we would recommend at least SQL Server 2014 SP1 CU1 or SQL Server 2012 SP2 and the latest CU.</span></span>
2. <span data-ttu-id="e5b98-793">Planifiez avec soin votre paysage de système SAP dans Azure, afin de trouver l’équilibre entre la disposition des fichiers de données et les restrictions d’Azure :</span><span class="sxs-lookup"><span data-stu-id="e5b98-793">Carefully plan your SAP system landscape in Azure to balance the data file layout and Azure restrictions:</span></span>
   * <span data-ttu-id="e5b98-794">Évitez d’utiliser un trop grand nombre de disques VHD. Cependant, vous devez en configurer suffisamment pour atteindre le nombre d’E/S par seconde requis.</span><span class="sxs-lookup"><span data-stu-id="e5b98-794">Don’t have too many VHDs, but have enough to ensure you can reach your required IOPS.</span></span>
   * <span data-ttu-id="e5b98-795">N’oubliez pas que les E/S par seconde sont limitées pour chaque compte Stockage Azure, et que les comptes de stockage sont limités au sein de chaque abonnement Azure ([plus d’informations ici][azure-subscription-service-limits]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-795">Remember that IOPS are also limited per Azure Storage Account and that Storage Accounts are limited within each Azure subscription ([more details][azure-subscription-service-limits]).</span></span>
   * <span data-ttu-id="e5b98-796">S’il vous faut un débit supérieur, écrivez les données dans des bandes sur les disques VHD.</span><span class="sxs-lookup"><span data-stu-id="e5b98-796">Only stripe across VHDs if you need to achieve a higher throughput.</span></span>
3. <span data-ttu-id="e5b98-797">Ne placez pas les fichiers nécessitant une persistance ni vos logiciels sur le lecteur D:\, car il n’est pas permanent : toutes les données qu’il inclut seront perdues en cas de redémarrage de Windows.</span><span class="sxs-lookup"><span data-stu-id="e5b98-797">Never install software or put any files that require persistence on the D:\ drive as it is non-permanent and anything on this drive will be lost at a Windows reboot.</span></span>
4. <span data-ttu-id="e5b98-798">N’utilisez pas la mise en cache de disque VHD Azure pour le stockage Azure standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-798">Don’t use Azure VHD caching for Azure Standard Storage.</span></span>
5. <span data-ttu-id="e5b98-799">N’utilisez pas un compte de stockage Azure géorépliqué.</span><span class="sxs-lookup"><span data-stu-id="e5b98-799">Don’t use Azure geo-replicated Storage Accounts.</span></span>  <span data-ttu-id="e5b98-800">Utilisez des systèmes localement redondants pour les charges de travail SGBD (système de gestion de base de données).</span><span class="sxs-lookup"><span data-stu-id="e5b98-800">Use Locally Redundant for DBMS workloads.</span></span>
6. <span data-ttu-id="e5b98-801">Utilisez la solution de haute disponibilité/récupération d’urgence de votre fournisseur SGBD (système de gestion de base de données) pour répliquer les données des bases de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-801">Use your DBMS vendor’s HA/DR solution to replicate database data.</span></span>
7. <span data-ttu-id="e5b98-802">Utilisez toujours la fonction de résolution de noms ; ne vous fiez pas aux adresses IP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-802">Always use Name Resolution, don’t rely on IP addresses.</span></span>
8. <span data-ttu-id="e5b98-803">Utilisez la fonctionnalité de compression de base de données la plus élevée possible.</span><span class="sxs-lookup"><span data-stu-id="e5b98-803">Use the highest database compression possible.</span></span> <span data-ttu-id="e5b98-804">Dans le cas de SQL Server, il s’agit de la compression de page.</span><span class="sxs-lookup"><span data-stu-id="e5b98-804">For SQL Server this is page compression.</span></span>
9. <span data-ttu-id="e5b98-805">Veillez à recourir à des images SQL Server de Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="e5b98-805">Be careful using SQL Server images from the Azure Marketplace.</span></span> <span data-ttu-id="e5b98-806">Si vous utilisez le serveur SQL numéro un, vous devez modifier le classement de l’instance avant d’installer un système SAP NetWeaver sur ce serveur.</span><span class="sxs-lookup"><span data-stu-id="e5b98-806">If you use the SQL Server one, you must change the instance collation before installing any SAP NetWeaver system on it.</span></span>
10. <span data-ttu-id="e5b98-807">Installez et configurez la surveillance d’hôte SAP pour Azure comme le décrit le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="e5b98-807">Install and configure the SAP Host Monitoring for Azure as described in [Deployment Guide][deployment-guide].</span></span>

## <a name="specifics-to-sap-ase-on-windows"></a><span data-ttu-id="e5b98-808">Caractéristiques de SAP ASE sur Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-808">Specifics to SAP ASE on Windows</span></span>
<span data-ttu-id="e5b98-809">À partir de Microsoft Azure, vous pouvez facilement migrer vos applications SAP ASE existantes vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-809">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="e5b98-810">Dans une machine virtuelle, SAP ASE vous permet de réduire le coût total de possession lié au déploiement, à la gestion et à la maintenance des applications d’entreprise en les migrant facilement vers Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-810">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="e5b98-811">Lorsque le logiciel SAP ASE est installé dans une machine virtuelle Azure, les administrateurs et développeurs peuvent continuer à utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-811">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="e5b98-812">Il existe un contrat de niveau de service pour les machines virtuelles Azure. Il est disponible ici : <https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="e5b98-812">There is an SLA for the Azure Virtual Machines which can be found here: <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="e5b98-813">Nous sommes convaincus que les machines virtuelles hébergées par Microsoft Azure fonctionneront mieux que d’autres offres de virtualisation du cloud public. Cependant, les résultats peuvent varier au cas par cas.</span><span class="sxs-lookup"><span data-stu-id="e5b98-813">We are confident that Microsoft Azure hosted Virtual Machines will perform very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="e5b98-814">Dans le cas du dimensionnement SAP, les numéros SAP associés aux SKU des différentes machines virtuelles certifiées pour SAP seront fournis dans une Note de SAP distincte : [1928533].</span><span class="sxs-lookup"><span data-stu-id="e5b98-814">SAP sizing SAPS numbers of the different SAP certified VM SKUs will be provided in a separate SAP Note [1928533].</span></span>

<span data-ttu-id="e5b98-815">Les instructions et recommandations concernant l’utilisation d’Azure Storage, le déploiement de machines virtuelles SAP ou la surveillance SAP s’appliquent aux déploiements de SAP ASE conjointement avec des applications SAP, comme énoncé dans les quatre premiers chapitres de ce document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-815">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="e5b98-816">Prise en charge des versions SAP ASE</span><span class="sxs-lookup"><span data-stu-id="e5b98-816">SAP ASE Version Support</span></span>
<span data-ttu-id="e5b98-817">Actuellement, SAP prend en charge SAP ASE version 16.0 pour une utilisation avec les produits SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="e5b98-817">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="e5b98-818">Toutes les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC à utiliser avec les produits SAP Business Suite sont exclusivement fournies par le biais du SAP Service Marketplace à l’adresse : <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-818">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="e5b98-819">Dans le cas d’une installation locale, ne téléchargez pas les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC directement depuis les sites web Sybase.</span><span class="sxs-lookup"><span data-stu-id="e5b98-819">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="e5b98-820">Pour obtenir des informations détaillées sur les correctifs pris en charge pour une utilisation avec les produits SAP Business Suite en local et dans les machines virtuelles Azure, consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-820">For detailed information on patches which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="e5b98-821">[1590719]</span><span class="sxs-lookup"><span data-stu-id="e5b98-821">[1590719]</span></span>
* <span data-ttu-id="e5b98-822">[1973241]</span><span class="sxs-lookup"><span data-stu-id="e5b98-822">[1973241]</span></span>

<span data-ttu-id="e5b98-823">Pour des informations générales sur l’exécution de SAP Business Suite sur SAP ASE, voir [SCN](https://scn.sap.com/community/ase)</span><span class="sxs-lookup"><span data-stu-id="e5b98-823">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://scn.sap.com/community/ase)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="e5b98-824">Instructions de configuration de SAP ASE pour les installations SAP ASE sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-824">SAP ASE Configuration Guidelines for SAP related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="e5b98-825">Structure du déploiement de SAP ASE</span><span class="sxs-lookup"><span data-stu-id="e5b98-825">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="e5b98-826">Conformément à la description générale, les exécutables SAP ASE doivent être situés ou installés sur le lecteur système du disque VHD de base de la machine virtuelle (le lecteur C:\).</span><span class="sxs-lookup"><span data-stu-id="e5b98-826">In accordance with the general description, SAP ASE executables should be located or installed into the system drive of the VM’s base VHD (drive c:\).</span></span> <span data-ttu-id="e5b98-827">En règle générale, la plupart des bases de données d’outils et système SAP ASE ne sont pas pleinement exploitées par les charges de travail SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="e5b98-827">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="e5b98-828">Par conséquent, les bases de données d’outils et système (« master », « model », « saptools », « sybmgmtdb » et « sybsystemdb ») peuvent également demeurer sur le lecteur C:\.</span><span class="sxs-lookup"><span data-stu-id="e5b98-828">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the C:\drive as well.</span></span>

<span data-ttu-id="e5b98-829">La base de données temporaire contenant toutes les tables de travail et les tables temporaires créées par SAP ASE peut constituer une exception, dans le cas où l’ensemble des charges de travail BW et certaines charges de travail SAP ERP peuvent nécessiter un volume de données ou d’opérations d’E/S plus important, que la capacité du disque VHD de base de la machine virtuelle d’origine (le lecteur C:\)) ne suffit pas à satisfaire.</span><span class="sxs-lookup"><span data-stu-id="e5b98-829">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume which can’t fit into the original VM’s base VHD (drive c:\).</span></span>

<span data-ttu-id="e5b98-830">Selon la version de SAPInst/SWPM utilisée pour installer le système, la base de données peut contenir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-830">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="e5b98-831">une seule base de données tempdb SAP ASE, créée lors de l’installation de SAP ASE ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-831">A single SAP ASE tempdb which is created when installing SAP ASE</span></span>
* <span data-ttu-id="e5b98-832">une base de données tempdb SAP ASE créée via l’installation de SAP ASE ainsi qu’une base de données saptempdb supplémentaire, créée par le programme d’installation de SAP ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-832">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="e5b98-833">Une tempdb SAP ASE créée par l’installation de SAP ASE et une tempdb supplémentaire créée manuellement (par exemple,Note de SAP [1752266]suivante) pour répondre aux exigences de tempdb spécifiques ERP/BW</span><span class="sxs-lookup"><span data-stu-id="e5b98-833">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (e.g. following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="e5b98-834">En cas de ERP spécifique ou toutes les charges BW, il est logique, en ce qui concerne les performances, pour que les périphériques tempdb de tempdb en outre créée (par toujours pas pris ou manuellement) sur un lecteur autre que C:\.</span><span class="sxs-lookup"><span data-stu-id="e5b98-834">In case of specific ERP or all BW workloads it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a drive other than C:\.</span></span> <span data-ttu-id="e5b98-835">Si aucune tempdb supplémentaire n’existe, il est recommandé d’en créer une (Note de SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-835">If no additional tempdb exists it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="e5b98-836">Pour des systèmes de ce type, la procédure suivante doit être effectuée pour la base de données tempdb supplémentaire créée :</span><span class="sxs-lookup"><span data-stu-id="e5b98-836">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="e5b98-837">Déplacez la première unité tempdb vers la première unité de la base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-837">Move the first tempdb device to the first device of the SAP database</span></span>
* <span data-ttu-id="e5b98-838">Ajoutez des unités tempdb à chacun des disques VHD contenant une unité de base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-838">Add tempdb devices to each of the VHDs containing a devices of the SAP database</span></span>

<span data-ttu-id="e5b98-839">Cette configuration permet à la base de données tempdb de consommer davantage d’espace que celui que peut proposer le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-839">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="e5b98-840">Pour référence, vous pouvez consulter les tailles d’unités tempdb sur les systèmes existants qui s’exécutent en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-840">As a reference one can check the tempdb device sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="e5b98-841">Une telle configuration permet d’atteindre un nombre d’E/S par seconde pour tempdb qui ne peut pas être fourni avec le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-841">Or such a configuration would enable IOPS numbers against tempdb which cannot be provided with the system drive.</span></span> <span data-ttu-id="e5b98-842">Rappelons que les systèmes qui s’exécutent en local peuvent être utilisés pour surveiller la charge de travail d’E/S sur la base de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="e5b98-842">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="e5b98-843">Ne placez jamais des unités SAP ASE sur le lecteur D:\ de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-843">Never put any SAP ASE devices onto the D:\ drive of the VM.</span></span> <span data-ttu-id="e5b98-844">Cela s’applique également à la base de données tempdb, même si les objets conservés dans cette dernière sont temporaires.</span><span class="sxs-lookup"><span data-stu-id="e5b98-844">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary.</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="e5b98-845">Impact de la compression de base de données</span><span class="sxs-lookup"><span data-stu-id="e5b98-845">Impact of Database Compression</span></span>
<span data-ttu-id="e5b98-846">Dans les configurations pour lesquelles la bande passante d’E/S peut devenir un facteur de limitation, toutes les mesures qui réduisent le nombre d’E/S par seconde peuvent contribuer à étirer la charge de travail exécutable dans un scénario IaaS comme Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-846">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="e5b98-847">Par conséquent, il est fortement recommandé de s’assurer que la compression SAP ASE est utilisée avant le chargement d’une base de données SAP existante dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-847">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="e5b98-848">Nous recommandons d’effectuer une compression avant le chargement sur Azure (si elle n’est pas déjà implémentée) pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="e5b98-848">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="e5b98-849">La quantité de données à charger dans Azure est moins importante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-849">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="e5b98-850">En supposant que l’on peut utiliser en local un matériel plus performant, avec plus d’UC, une bande passante d’E/S supérieure ou une latence d’E/S inférieure, la durée d’exécution de la compression est plus courte.</span><span class="sxs-lookup"><span data-stu-id="e5b98-850">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="e5b98-851">Des bases de données plus petites peuvent permettre de diminuer les coûts liés à l’allocation de disque.</span><span class="sxs-lookup"><span data-stu-id="e5b98-851">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="e5b98-852">La compression des données et des éléments LOB fonctionne au sein d’une machine virtuelle hébergée dans Azure Virtual Machines comme en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-852">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="e5b98-853">Pour plus d’informations sur la façon de vérifier si la compression est déjà utilisée dans une base de données SAP ASE existante, voir la Note de SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="e5b98-853">For more details on how to check if compression is already in use in an existing SAP ASE database please check SAP Note [1750510].</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="e5b98-854">Utilisation de DBACockpit pour surveiller les instances de base de données</span><span class="sxs-lookup"><span data-stu-id="e5b98-854">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="e5b98-855">Pour les systèmes SAP utilisant SAP ASE en tant que plateforme de base de données, la fonction DBACockpit est accessible sous forme de fenêtres de navigateur intégrées dans Transaction DBACockpit ou via Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="e5b98-855">For SAP systems which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="e5b98-856">Toutefois, l’ensemble des fonctionnalités de surveillance et d’administration de la base de données sont uniquement disponibles dans l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-856">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="e5b98-857">À l’instar des systèmes locaux, plusieurs étapes sont nécessaires pour activer toutes les fonctionnalités de SAP NetWeaver utilisées par l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-857">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="e5b98-858">Pour activer l’utilisation de webdynpros et générer les éléments requis, suivrez la Note de SAP [1245200] .</span><span class="sxs-lookup"><span data-stu-id="e5b98-858">Please follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="e5b98-859">En suivant les instructions fournies dans les notes ci-dessus, vous configurerez Internet Communication Manager (ICM), ainsi que les ports à utiliser pour les connexions http et https.</span><span class="sxs-lookup"><span data-stu-id="e5b98-859">When following the instructions in the above notes you will also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="e5b98-860">Pour http, la configuration par défaut ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-860">The default setting for http looks like this:</span></span>

> <span data-ttu-id="e5b98-861">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="e5b98-861">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
> <span data-ttu-id="e5b98-862">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="e5b98-862">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
>

<span data-ttu-id="e5b98-863">Quant aux liens générés dans Transaction DBACockpit, ils ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-863">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="e5b98-864">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-864">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="e5b98-865">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-865">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="e5b98-866">En fonction de la connexion éventuelle de la machine virtuelle hébergeant le système SAP via une méthode site à site, multisite ou ExpressRoute (déploiement entre différents locaux), vous devez vous assurer qu’ICM utilise un nom d’hôte complet qui peut être résolu sur la machine à partir de laquelle vous essayez d’ouvrir DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-866">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="e5b98-867">Consultez la note de SAP [773830] pour comprendre comment ICM détermine le nom d’hôte complet en fonction des paramètres de profil et définissez le paramètre icm/host_name_full explicitement si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="e5b98-867">Please see SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="e5b98-868">Si vous avez déployé la machine virtuelle dans un scénario de cloud uniquement sans connectivité intersite entre le site local et Azure, vous devez définir une adresse IP publique et une étiquette de domaine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-868">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="e5b98-869">Le format du nom DNS public de la machine virtuelle ressemblera ensuite à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-869">The format of the public DNS name of the VM will then look like this :</span></span>

> <span data-ttu-id="e5b98-870">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="e5b98-870">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
>
>

<span data-ttu-id="e5b98-871">Pour plus de détails sur le nom DNS, voir [ici][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="e5b98-871">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="e5b98-872">Lorsque vous définissez le paramètre de profil SAP icm/host_name_full sur le nom DNS de la machine virtuelle Azure, le lien peut ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-872">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="e5b98-873">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-873">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="e5b98-874">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-874">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="e5b98-875">Dans ce cas, vous devez veiller à :</span><span class="sxs-lookup"><span data-stu-id="e5b98-875">In this case you need to make sure to:</span></span>

* <span data-ttu-id="e5b98-876">ajouter des règles de trafic entrant au groupe de sécurité réseau dans le portail Azure pour les ports TCP/IP utilisés afin de communiquer avec ICM ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-876">Add Inbound rules to the Network Security Group in the Azure Portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="e5b98-877">ajouter des règles de trafic entrant à la configuration du pare-feu Windows pour les ports TCP/IP utilisés afin de communiquer avec ICM.</span><span class="sxs-lookup"><span data-stu-id="e5b98-877">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="e5b98-878">Pour effectuer une importation automatisée de toutes les corrections disponibles, il est recommandé d’appliquer périodiquement la note SAP de collection de correction applicable à votre version SAP :</span><span class="sxs-lookup"><span data-stu-id="e5b98-878">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="e5b98-879">[1558958]</span><span class="sxs-lookup"><span data-stu-id="e5b98-879">[1558958]</span></span>
* <span data-ttu-id="e5b98-880">[1619967]</span><span class="sxs-lookup"><span data-stu-id="e5b98-880">[1619967]</span></span>
* <span data-ttu-id="e5b98-881">[1882376]</span><span class="sxs-lookup"><span data-stu-id="e5b98-881">[1882376]</span></span>

<span data-ttu-id="e5b98-882">Vous trouverez plus d’informations sur DBA Cockpit pour SAP ASE dans les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-882">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="e5b98-883">[1605680]</span><span class="sxs-lookup"><span data-stu-id="e5b98-883">[1605680]</span></span>
* <span data-ttu-id="e5b98-884">[1757924]</span><span class="sxs-lookup"><span data-stu-id="e5b98-884">[1757924]</span></span>
* <span data-ttu-id="e5b98-885">[1757928]</span><span class="sxs-lookup"><span data-stu-id="e5b98-885">[1757928]</span></span>
* <span data-ttu-id="e5b98-886">[1758182]</span><span class="sxs-lookup"><span data-stu-id="e5b98-886">[1758182]</span></span>
* <span data-ttu-id="e5b98-887">[1758496]</span><span class="sxs-lookup"><span data-stu-id="e5b98-887">[1758496]</span></span>    
* <span data-ttu-id="e5b98-888">[1814258]</span><span class="sxs-lookup"><span data-stu-id="e5b98-888">[1814258]</span></span>
* <span data-ttu-id="e5b98-889">[1922555]</span><span class="sxs-lookup"><span data-stu-id="e5b98-889">[1922555]</span></span>
* <span data-ttu-id="e5b98-890">[1956005]</span><span class="sxs-lookup"><span data-stu-id="e5b98-890">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="e5b98-891">Considérations relatives à la sauvegarde/restauration pour SAP ASE</span><span class="sxs-lookup"><span data-stu-id="e5b98-891">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="e5b98-892">Lors du déploiement de SAP ASE dans Azure, votre méthodologie de sauvegarde doit être passée en revue.</span><span class="sxs-lookup"><span data-stu-id="e5b98-892">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="e5b98-893">Même si le système n’est pas un système productif, la base de données SAP hébergée par SAP ASE doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-893">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="e5b98-894">Comme Azure Storage conserve trois images, la sauvegarde joue désormais un rôle moins important en matière de compensation des pannes du stockage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-894">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="e5b98-895">La raison principale du maintien d’un plan de sauvegarde et de restauration approprié réside davantage dans le fait que vous pouvez compenser les erreurs logiques/manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-895">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="e5b98-896">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un moment donné, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-896">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="e5b98-897">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-897">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="e5b98-898">La sauvegarde et la restauration d’une base de données dans Azure fonctionnent de la même façon qu’en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-898">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="e5b98-899">Consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-899">Please see SAP Notes:</span></span>

* <span data-ttu-id="e5b98-900">[1588316]</span><span class="sxs-lookup"><span data-stu-id="e5b98-900">[1588316]</span></span>
* <span data-ttu-id="e5b98-901">[1585981]</span><span class="sxs-lookup"><span data-stu-id="e5b98-901">[1585981]</span></span>

<span data-ttu-id="e5b98-902">pour plus d’informations sur la création de configurations d’images mémoire et la planification des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-902">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="e5b98-903">Selon votre stratégie et vos besoins, vous pouvez configurer les images mémoire de bases de données et de journaux sur disque sur l’un des disques durs virtuels existants ou ajouter un disque dur virtuel supplémentaire pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-903">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing VHDs or add an additional VHD for the backup.</span></span>  <span data-ttu-id="e5b98-904">Pour réduire le risque de perte de données en cas d’erreur, il est recommandé d’utiliser un disque dur virtuel ne contenant aucune unité de base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-904">To reduce the danger of data loss in case of an error it is recommended to use a VHD where no database device is located.</span></span>

<span data-ttu-id="e5b98-905">Outre les données et la compression des éléments LOB, SAP ASE propose la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-905">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="e5b98-906">Pour occuper moins d’espace avec les images mémoire de bases de données et de journaux, il est recommandé d’utiliser la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-906">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="e5b98-907">Pour plus d’informations, voir la Note de SAP [1588316] .</span><span class="sxs-lookup"><span data-stu-id="e5b98-907">Please see SAP Note [1588316] for more information.</span></span> <span data-ttu-id="e5b98-908">La compression de sauvegarde est également cruciale pour réduire la quantité de données à transférer si vous prévoyez de télécharger en local des sauvegardes ou des disques durs virtuels contenant des images mémoire de sauvegarde à partir de la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-908">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="e5b98-909">N’utilisez pas le lecteur D:\ comme destination des images mémoire de bases de données ou de journaux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-909">Do not use drive D:\ as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="e5b98-910">Considérations sur les performances des sauvegardes/restaurations</span><span class="sxs-lookup"><span data-stu-id="e5b98-910">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="e5b98-911">À l’instar des déploiements complets, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-911">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="e5b98-912">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles avec jusqu’à 8 threads d’UC maximum.</span><span class="sxs-lookup"><span data-stu-id="e5b98-912">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="e5b98-913">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-913">Therefore, one can assume:</span></span>

* <span data-ttu-id="e5b98-914">Moins il y a de disques durs virtuels utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="e5b98-914">The fewer the number of VHDs used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="e5b98-915">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="e5b98-915">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="e5b98-916">Moins il y a de cibles (répertoires d’entrelacement, disques durs virtuels) d’écriture de la sauvegarde, plus le débit est réduit</span><span class="sxs-lookup"><span data-stu-id="e5b98-916">The fewer targets (Stripe Directories, VHDs) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="e5b98-917">Pour augmenter le nombre de cibles d’écriture, deux options peuvent être utilisées/combinées selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="e5b98-917">To increase the number of targets to write to there are two options which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="e5b98-918">Entrelacer le volume cible de sauvegarde sur plusieurs disques durs virtuels montés, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="e5b98-918">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="e5b98-919">Créer une configuration d’image mémoire dans SAP ASE qui utilise plusieurs répertoires cibles pour l’écriture de l’image mémoire</span><span class="sxs-lookup"><span data-stu-id="e5b98-919">Creating a dump configuration on SAP ASE level which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="e5b98-920">L’agrégation d’un volume par bandes sur plusieurs disques durs virtuels montés a été évoquée précédemment dans ce guide.</span><span class="sxs-lookup"><span data-stu-id="e5b98-920">Striping a volume over multiple mounted VHDs has been discussed earlier in this guide.</span></span> <span data-ttu-id="e5b98-921">Pour plus d’informations sur l’utilisation de plusieurs répertoires pour la configuration d’images mémoire dans SAP ASE, voir la documentation sur la procédure stockée sp_config_dump, utilisée pour créer la configuration d’images mémoire sur [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="e5b98-921">For more information on using multiple directories in the SAP ASE dump configuration please refer to the documentation on Stored Procedure sp_config_dump which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="e5b98-922">Récupération d’urgence avec les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-922">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="e5b98-923">Réplication de données avec le serveur de réplication Sybase SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-923">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="e5b98-924">Avec le serveur de réplication Sybase (SRS) SAP, SAP ASE fournit une solution de secours actif pour transférer des transactions de base de données vers un emplacement distant en mode asynchrone.</span><span class="sxs-lookup"><span data-stu-id="e5b98-924">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span>

<span data-ttu-id="e5b98-925">L’installation et l’utilisation de SRS fonctionnent aussi bien dans une machine virtuelle hébergée dans Azure Virtual Machine Services qu’en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-925">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="e5b98-926">La fonction ASE HADR (haute disponibilité et récupération d’urgence) via le serveur de réplication SAP est prévue avec une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-926">ASE HADR via SAP Replication Server is planned with a future release.</span></span> <span data-ttu-id="e5b98-927">Elle sera testée et publiée pour les plateformes Microsoft Azure dès qu’elle sera disponible.</span><span class="sxs-lookup"><span data-stu-id="e5b98-927">It will be tested with and released for Microsoft Azure platforms as soon as it is available.</span></span>

## <a name="specifics-to-sap-ase-on-linux"></a><span data-ttu-id="e5b98-928">Caractéristiques de SAP ASE sur Linux</span><span class="sxs-lookup"><span data-stu-id="e5b98-928">Specifics to SAP ASE on Linux</span></span>
<span data-ttu-id="e5b98-929">À partir de Microsoft Azure, vous pouvez facilement migrer vos applications SAP ASE existantes vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-929">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="e5b98-930">Dans une machine virtuelle, SAP ASE vous permet de réduire le coût total de possession lié au déploiement, à la gestion et à la maintenance des applications d’entreprise en les migrant facilement vers Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-930">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="e5b98-931">Lorsque le logiciel SAP ASE est installé dans une machine virtuelle Azure, les administrateurs et développeurs peuvent continuer à utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-931">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="e5b98-932">Pour déployer des machines virtuelles Azure, il est important de connaître les contrats de niveau de service (SLA) officiels qui se trouvent à l’adresse : <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="e5b98-932">For deploying Azure VMs it's important to know the official SLAs which can be found here : <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="e5b98-933">Les informations de dimensionnement SAP et une liste des références de machines virtuelles certifiées SAP seront fournies dans la Note de SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="e5b98-933">SAP sizing information and a list of SAP certified VM SKUs will be provided in SAP Note [1928533].</span></span> <span data-ttu-id="e5b98-934">Des documents supplémentaires sur le dimensionnement SAP pour les machines virtuelles Azure sont disponibles ici <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> et ici <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-934">Additional SAP sizing documents for Azure Virtual machines can be found here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> and here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="e5b98-935">Les instructions et recommandations concernant l’utilisation d’Azure Storage, le déploiement de machines virtuelles SAP ou la surveillance SAP s’appliquent aux déploiements de SAP ASE conjointement avec des applications SAP, comme énoncé dans les quatre premiers chapitres de ce document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-935">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

<span data-ttu-id="e5b98-936">Les deux Notes SAP suivantes incluent des informations générales relatives à ASE sur Linux et ASE dans le cloud :</span><span class="sxs-lookup"><span data-stu-id="e5b98-936">The following two SAP Notes include general information about ASE on Linux and ASE in the Cloud :</span></span>

* <span data-ttu-id="e5b98-937">[2134316]</span><span class="sxs-lookup"><span data-stu-id="e5b98-937">[2134316]</span></span>
* <span data-ttu-id="e5b98-938">[1941500]</span><span class="sxs-lookup"><span data-stu-id="e5b98-938">[1941500]</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="e5b98-939">Prise en charge des versions SAP ASE</span><span class="sxs-lookup"><span data-stu-id="e5b98-939">SAP ASE Version Support</span></span>
<span data-ttu-id="e5b98-940">Actuellement, SAP prend en charge SAP ASE version 16.0 pour une utilisation avec les produits SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="e5b98-940">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="e5b98-941">Toutes les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC à utiliser avec les produits SAP Business Suite sont exclusivement fournies par le biais du SAP Service Marketplace à l’adresse : <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-941">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="e5b98-942">Dans le cas d’une installation locale, ne téléchargez pas les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC directement depuis les sites web Sybase.</span><span class="sxs-lookup"><span data-stu-id="e5b98-942">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="e5b98-943">Pour obtenir des informations détaillées sur les correctifs pris en charge pour une utilisation avec les produits SAP Business Suite en local et dans les machines virtuelles Azure, consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-943">For detailed information on patches which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="e5b98-944">[1590719]</span><span class="sxs-lookup"><span data-stu-id="e5b98-944">[1590719]</span></span>
* <span data-ttu-id="e5b98-945">[1973241]</span><span class="sxs-lookup"><span data-stu-id="e5b98-945">[1973241]</span></span>

<span data-ttu-id="e5b98-946">Pour des informations générales sur l’exécution de SAP Business Suite sur SAP ASE, voir [SCN](https://scn.sap.com/community/ase)</span><span class="sxs-lookup"><span data-stu-id="e5b98-946">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://scn.sap.com/community/ase)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="e5b98-947">Instructions de configuration de SAP ASE pour les installations SAP ASE sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-947">SAP ASE Configuration Guidelines for SAP related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="e5b98-948">Structure du déploiement de SAP ASE</span><span class="sxs-lookup"><span data-stu-id="e5b98-948">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="e5b98-949">Conformément à la description générale, les fichiers exécutables SAP ASE doivent être situés ou installés dans le système de fichiers racine de la machine virtuelle ( /sybase).</span><span class="sxs-lookup"><span data-stu-id="e5b98-949">In accordance with the general description, SAP ASE executables should be located or installed into the root file system of the VM ( /sybase ).</span></span> <span data-ttu-id="e5b98-950">En règle générale, la plupart des bases de données d’outils et système SAP ASE ne sont pas pleinement exploitées par les charges de travail SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="e5b98-950">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="e5b98-951">Par conséquent, les bases de données de système et d’outils (master, model, saptools, sybmgmtdb, sybsystemdb) peuvent également demeurer sur le système de fichiers racine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-951">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the root file system as well.</span></span>

<span data-ttu-id="e5b98-952">La base de données temporaire contenant toutes les tables de travail et les tables temporaires créées par SAP ASE peut constituer une exception qui, dans le cas de certains ERP SAP et pour toutes les charges de travail BW, peut nécessiter des volumes de données supérieurs ou des volumes d’E/S qui ne rentrent pas sur le disque du système d’exploitation de la machine virtuelle d’origine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-952">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume which can’t fit into the original VM’s OS disk.</span></span>

<span data-ttu-id="e5b98-953">Selon la version de SAPInst/SWPM utilisée pour installer le système, la base de données peut contenir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-953">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="e5b98-954">une seule base de données tempdb SAP ASE, créée lors de l’installation de SAP ASE ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-954">A single SAP ASE tempdb which is created when installing SAP ASE</span></span>
* <span data-ttu-id="e5b98-955">une base de données tempdb SAP ASE créée via l’installation de SAP ASE ainsi qu’une base de données saptempdb supplémentaire, créée par le programme d’installation de SAP ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-955">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="e5b98-956">Une tempdb SAP ASE créée par l’installation de SAP ASE et une tempdb supplémentaire créée manuellement (par exemple,Note de SAP [1752266]suivante) pour répondre aux exigences de tempdb spécifiques ERP/BW</span><span class="sxs-lookup"><span data-stu-id="e5b98-956">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (e.g. following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="e5b98-957">Dans le cas de charges de travail ERP spécifiques ou pour toutes les charges BW, il est judicieux, en ce qui concerne les performances, de conserver les appareils tempdb de la tempdb supplémentaire créée (par SWPM ou manuellement) sur un système de fichiers distinct qui peut être représenté par un disque de données Azure unique ou un volume RAID Linux s’étendant sur plusieurs disques de données Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-957">In case of specific ERP or all BW workloads it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a separate file system which can be represented by a single Azure data disk or a Linux RAID spanning multiple Azure data disks.</span></span> <span data-ttu-id="e5b98-958">Si aucune tempdb supplémentaire n’existe, il est recommandé d’en créer une (Note de SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="e5b98-958">If no additional tempdb exists it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="e5b98-959">Pour des systèmes de ce type, la procédure suivante doit être effectuée pour la base de données tempdb supplémentaire créée :</span><span class="sxs-lookup"><span data-stu-id="e5b98-959">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="e5b98-960">Déplacer le premier répertoire tempdb vers le premier système de fichiers de la base de données SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-960">Move the first tempdb directory to the first file system of the SAP database</span></span>
* <span data-ttu-id="e5b98-961">Ajouter des répertoires tempdb à chacun des disques durs virtuels contenant un système de fichiers de la base de données SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-961">Add tempdb directories to each of the VHDs containing a filesystem of the SAP database</span></span>

<span data-ttu-id="e5b98-962">Cette configuration permet à la base de données tempdb de consommer davantage d’espace que celui que peut proposer le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-962">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="e5b98-963">Pour référence, vous pouvez consulter les tailles de répertoire tempdb sur les systèmes existants qui s’exécutent en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-963">As a reference one can check the tempdb directory sizes on existing systems which run on-premises.</span></span> <span data-ttu-id="e5b98-964">Une telle configuration permet d’atteindre un nombre d’E/S par seconde pour tempdb qui ne peut pas être fourni avec le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="e5b98-964">Or such a configuration would enable IOPS numbers against tempdb which cannot be provided with the system drive.</span></span> <span data-ttu-id="e5b98-965">Rappelons que les systèmes qui s’exécutent en local peuvent être utilisés pour surveiller la charge de travail d’E/S sur la base de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="e5b98-965">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="e5b98-966">Ne placez jamais de répertoire SAP ASE aux emplacements /mnt ou /mnt/resource de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e5b98-966">Never put any SAP ASE directories onto /mnt or /mnt/resource of the VM.</span></span> <span data-ttu-id="e5b98-967">Cela s’applique également à la tempdb, même si les objets conservés dans la tempdb sont seulement temporaires, car /mnt ou/mnt/resource sont des espaces temporaires par défaut non persistants de machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-967">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary because /mnt or /mnt/resource is a default Azure VM temp space which is not persistent.</span></span> <span data-ttu-id="e5b98-968">Vous trouverez plus d’informations sur l’espace temporaire de machine virtuelle Azure dans [cet article][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="e5b98-968">More details about the Azure VM temp space can be found in [this article][virtual-machines-linux-how-to-attach-disk]</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="e5b98-969">Impact de la compression de base de données</span><span class="sxs-lookup"><span data-stu-id="e5b98-969">Impact of Database Compression</span></span>
<span data-ttu-id="e5b98-970">Dans les configurations pour lesquelles la bande passante d’E/S peut devenir un facteur de limitation, toutes les mesures qui réduisent le nombre d’E/S par seconde peuvent contribuer à étirer la charge de travail exécutable dans un scénario IaaS comme Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-970">In configurations where I/O bandwidth can become a limiting factor, every measure which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="e5b98-971">Par conséquent, il est fortement recommandé de s’assurer que la compression SAP ASE est utilisée avant le chargement d’une base de données SAP existante dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-971">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="e5b98-972">Nous recommandons d’effectuer une compression avant le chargement sur Azure (si elle n’est pas déjà implémentée) pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="e5b98-972">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="e5b98-973">La quantité de données à charger dans Azure est moins importante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-973">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="e5b98-974">En supposant que l’on peut utiliser en local un matériel plus performant, avec plus d’UC, une bande passante d’E/S supérieure ou une latence d’E/S inférieure, la durée d’exécution de la compression est plus courte.</span><span class="sxs-lookup"><span data-stu-id="e5b98-974">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="e5b98-975">Des bases de données plus petites peuvent permettre de diminuer les coûts liés à l’allocation de disque.</span><span class="sxs-lookup"><span data-stu-id="e5b98-975">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="e5b98-976">La compression des données et des éléments LOB fonctionne au sein d’une machine virtuelle hébergée dans Azure Virtual Machines comme en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-976">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="e5b98-977">Pour plus d’informations sur la façon de vérifier si la compression est déjà utilisée dans une base de données SAP ASE existante, voir la Note de SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="e5b98-977">For more details on how to check if compression is already in use in an existing SAP ASE database please check SAP Note [1750510].</span></span> <span data-ttu-id="e5b98-978">Pour plus d’informations sur la compression des bases de données, voir la Note de SAP [2121797] .</span><span class="sxs-lookup"><span data-stu-id="e5b98-978">Also see SAP Note [2121797] for additional information regarding database compression.</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="e5b98-979">Utilisation de DBACockpit pour surveiller les instances de base de données</span><span class="sxs-lookup"><span data-stu-id="e5b98-979">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="e5b98-980">Pour les systèmes SAP utilisant SAP ASE en tant que plateforme de base de données, la fonction DBACockpit est accessible sous forme de fenêtres de navigateur intégrées dans Transaction DBACockpit ou via Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="e5b98-980">For SAP systems which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="e5b98-981">Toutefois, l’ensemble des fonctionnalités de surveillance et d’administration de la base de données sont uniquement disponibles dans l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-981">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="e5b98-982">À l’instar des systèmes locaux, plusieurs étapes sont nécessaires pour activer toutes les fonctionnalités de SAP NetWeaver utilisées par l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-982">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="e5b98-983">Pour activer l’utilisation de webdynpros et générer les éléments requis, suivrez la Note de SAP [1245200] .</span><span class="sxs-lookup"><span data-stu-id="e5b98-983">Please follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="e5b98-984">En suivant les instructions fournies dans les notes ci-dessus, vous configurerez Internet Communication Manager (ICM), ainsi que les ports à utiliser pour les connexions http et https.</span><span class="sxs-lookup"><span data-stu-id="e5b98-984">When following the instructions in the above notes you will also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="e5b98-985">Pour http, la configuration par défaut ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-985">The default setting for http looks like this:</span></span>

> <span data-ttu-id="e5b98-986">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="e5b98-986">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
> <span data-ttu-id="e5b98-987">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="e5b98-987">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
>
>

<span data-ttu-id="e5b98-988">Quant aux liens générés dans Transaction DBACockpit, ils ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-988">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="e5b98-989">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-989">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="e5b98-990">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-990">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="e5b98-991">En fonction de la connexion éventuelle de la machine virtuelle hébergeant le système SAP via une méthode site à site, multisite ou ExpressRoute (déploiement entre différents locaux), vous devez vous assurer qu’ICM utilise un nom d’hôte complet qui peut être résolu sur la machine à partir de laquelle vous essayez d’ouvrir DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="e5b98-991">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="e5b98-992">Consultez la note de SAP [773830] pour comprendre comment ICM détermine le nom d’hôte complet en fonction des paramètres de profil et définissez le paramètre icm/host_name_full explicitement si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="e5b98-992">Please see SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="e5b98-993">Si vous avez déployé la machine virtuelle dans un scénario de cloud uniquement sans connectivité intersite entre le site local et Azure, vous devez définir une adresse IP publique et une étiquette de domaine.</span><span class="sxs-lookup"><span data-stu-id="e5b98-993">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="e5b98-994">Le format du nom DNS public de la machine virtuelle ressemblera ensuite à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-994">The format of the public DNS name of the VM will then look like this :</span></span>

> <span data-ttu-id="e5b98-995">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="e5b98-995">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
>
>

<span data-ttu-id="e5b98-996">Pour plus de détails sur le nom DNS, voir [ici][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="e5b98-996">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="e5b98-997">Lorsque vous définissez le paramètre de profil SAP icm/host_name_full sur le nom DNS de la machine virtuelle Azure, le lien peut ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="e5b98-997">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="e5b98-998">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-998">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
> <span data-ttu-id="e5b98-999">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="e5b98-999">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
>
>

<span data-ttu-id="e5b98-1000">Dans ce cas, vous devez veiller à :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1000">In this case you need to make sure to:</span></span>

* <span data-ttu-id="e5b98-1001">ajouter des règles de trafic entrant au groupe de sécurité réseau dans le portail Azure pour les ports TCP/IP utilisés afin de communiquer avec ICM ;</span><span class="sxs-lookup"><span data-stu-id="e5b98-1001">Add Inbound rules to the Network Security Group in the Azure Portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="e5b98-1002">ajouter des règles de trafic entrant à la configuration du pare-feu Windows pour les ports TCP/IP utilisés afin de communiquer avec ICM.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1002">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="e5b98-1003">Pour effectuer une importation automatisée de toutes les corrections disponibles, il est recommandé d’appliquer périodiquement la note SAP de collection de correction applicable à votre version SAP :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1003">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="e5b98-1004">[1558958]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1004">[1558958]</span></span>
* <span data-ttu-id="e5b98-1005">[1619967]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1005">[1619967]</span></span>
* <span data-ttu-id="e5b98-1006">[1882376]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1006">[1882376]</span></span>

<span data-ttu-id="e5b98-1007">Vous trouverez plus d’informations sur DBA Cockpit pour SAP ASE dans les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1007">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="e5b98-1008">[1605680]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1008">[1605680]</span></span>
* <span data-ttu-id="e5b98-1009">[1757924]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1009">[1757924]</span></span>
* <span data-ttu-id="e5b98-1010">[1757928]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1010">[1757928]</span></span>
* <span data-ttu-id="e5b98-1011">[1758182]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1011">[1758182]</span></span>
* <span data-ttu-id="e5b98-1012">[1758496]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1012">[1758496]</span></span>    
* <span data-ttu-id="e5b98-1013">[1814258]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1013">[1814258]</span></span>
* <span data-ttu-id="e5b98-1014">[1922555]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1014">[1922555]</span></span>
* <span data-ttu-id="e5b98-1015">[1956005]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1015">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="e5b98-1016">Considérations relatives à la sauvegarde/restauration pour SAP ASE</span><span class="sxs-lookup"><span data-stu-id="e5b98-1016">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="e5b98-1017">Lors du déploiement de SAP ASE dans Azure, votre méthodologie de sauvegarde doit être passée en revue.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1017">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="e5b98-1018">Même si le système n’est pas un système productif, la base de données SAP hébergée par SAP ASE doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1018">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="e5b98-1019">Comme Azure Storage conserve trois images, la sauvegarde joue désormais un rôle moins important en matière de compensation des pannes du stockage.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1019">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="e5b98-1020">La raison principale du maintien d’un plan de sauvegarde et de restauration approprié réside davantage dans le fait que vous pouvez compenser les erreurs logiques/manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1020">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="e5b98-1021">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un moment donné, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1021">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="e5b98-1022">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1022">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="e5b98-1023">La sauvegarde et la restauration d’une base de données dans Azure fonctionnent de la même façon qu’en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1023">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="e5b98-1024">Consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1024">Please see SAP Notes:</span></span>

* <span data-ttu-id="e5b98-1025">[1588316]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1025">[1588316]</span></span>
* <span data-ttu-id="e5b98-1026">[1585981]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1026">[1585981]</span></span>

<span data-ttu-id="e5b98-1027">pour plus d’informations sur la création de configurations d’images mémoire et la planification des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1027">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="e5b98-1028">Selon votre stratégie et vos besoins, vous pouvez configurer les images mémoire de bases de données et de journaux sur disque sur l’un des disques durs virtuels existants ou ajouter un disque dur virtuel supplémentaire pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1028">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing VHDs or add an additional VHD for the backup.</span></span>  <span data-ttu-id="e5b98-1029">Pour réduire le risque de perte de données en cas d’erreur, il est recommandé d’utiliser un disque dur virtuel ne contenant aucun répertoire/fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1029">To reduce the danger of data loss in case of an error it is recommended to use a VHD where no database directory/file is located.</span></span>

<span data-ttu-id="e5b98-1030">Outre les données et la compression des éléments LOB, SAP ASE propose la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1030">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="e5b98-1031">Pour occuper moins d’espace avec les images mémoire de bases de données et de journaux, il est recommandé d’utiliser la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1031">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="e5b98-1032">Pour plus d’informations, voir la Note de SAP [1588316] .</span><span class="sxs-lookup"><span data-stu-id="e5b98-1032">Please see SAP Note [1588316] for more information.</span></span> <span data-ttu-id="e5b98-1033">La compression de sauvegarde est également cruciale pour réduire la quantité de données à transférer si vous prévoyez de télécharger en local des sauvegardes ou des disques durs virtuels contenant des images mémoire de sauvegarde à partir de la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1033">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="e5b98-1034">N’utilisez pas l’espace temporaire de la machine virtuelle Azure /mnt ou/mnt/resource comme destination d’images mémoire de bases de données ou de journaux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1034">Do not use the Azure VM temp space /mnt or /mnt/resource as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="e5b98-1035">Considérations sur les performances des sauvegardes/restaurations</span><span class="sxs-lookup"><span data-stu-id="e5b98-1035">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="e5b98-1036">À l’instar des déploiements complets, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1036">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="e5b98-1037">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles avec jusqu’à 8 threads d’UC maximum.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1037">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="e5b98-1038">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1038">Therefore, one can assume:</span></span>

* <span data-ttu-id="e5b98-1039">Moins il y a de disques durs virtuels utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="e5b98-1039">The fewer the number of VHDs used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="e5b98-1040">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="e5b98-1040">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="e5b98-1041">Moins il y a de cibles (volume RAID logiciel Linux, disques durs virtuels) d’écriture de la sauvegarde, plus le débit est réduit</span><span class="sxs-lookup"><span data-stu-id="e5b98-1041">The fewer targets ( Linux software RAID, VHDs) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="e5b98-1042">Pour augmenter le nombre de cibles d’écriture, deux options peuvent être utilisées/combinées selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1042">To increase the number of targets to write to there are two options which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="e5b98-1043">Entrelacer le volume cible de sauvegarde sur plusieurs disques durs virtuels montés, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="e5b98-1043">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="e5b98-1044">Créer une configuration d’image mémoire dans SAP ASE qui utilise plusieurs répertoires cibles pour l’écriture de l’image mémoire</span><span class="sxs-lookup"><span data-stu-id="e5b98-1044">Creating a dump configuration on SAP ASE level which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="e5b98-1045">L’agrégation d’un volume par bandes sur plusieurs disques durs virtuels montés a été évoquée précédemment dans ce guide.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1045">Striping a volume over multiple mounted VHDs has been discussed earlier in this guide.</span></span> <span data-ttu-id="e5b98-1046">Pour plus d’informations sur l’utilisation de plusieurs répertoires pour la configuration d’images mémoire dans SAP ASE, voir la documentation sur la procédure stockée sp_config_dump, utilisée pour créer la configuration d’images mémoire sur [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="e5b98-1046">For more information on using multiple directories in the SAP ASE dump configuration please refer to the documentation on Stored Procedure sp_config_dump which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="e5b98-1047">Récupération d’urgence avec les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-1047">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="e5b98-1048">Réplication de données avec le serveur de réplication Sybase SAP</span><span class="sxs-lookup"><span data-stu-id="e5b98-1048">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="e5b98-1049">Avec le serveur de réplication Sybase (SRS) SAP, SAP ASE fournit une solution de secours actif pour transférer des transactions de base de données vers un emplacement distant en mode asynchrone.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1049">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span>

<span data-ttu-id="e5b98-1050">L’installation et l’utilisation de SRS fonctionnent aussi bien dans une machine virtuelle hébergée dans Azure Virtual Machine Services qu’en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1050">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="e5b98-1051">La fonction ASE HADR (haute disponibilité et récupération d’urgence) via le serveur de réplication SAP n’est PAS prise en charge pour le moment.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1051">ASE HADR via SAP Replication Server is NOT supported at this point in time.</span></span> <span data-ttu-id="e5b98-1052">Elle sera peut-être testée et publiée pour les plateformes Microsoft Azure à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1052">It might be tested with and released for Microsoft Azure platforms in the future.</span></span>

## <a name="specifics-to-oracle-database-on-windows"></a><span data-ttu-id="e5b98-1053">Caractéristiques d’Oracle Database sur Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-1053">Specifics to Oracle Database on Windows</span></span>
<span data-ttu-id="e5b98-1054">Depuis la mi-2013, le logiciel Oracle est pris en charge par Oracle pour s’exécuter sur Microsoft Windows Hyper-V et Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1054">Since midyear 2013, Oracle software is supported by Oracle to run on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="e5b98-1055">Pour plus d’informations sur la prise en charge générale de Windows Hyper-V et d’Azure par Oracle, voir l’article suivant : <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="e5b98-1055">Please read this article to get more details on the general support of Windows Hyper-V and Azure by Oracle: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span>

<span data-ttu-id="e5b98-1056">Outre la prise en charge générale, le scénario spécifique des applications SAP exploitant les bases de données Oracle est également pris en charge.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1056">Following the general support, the specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="e5b98-1057">Les détails sont évoqués dans cette partie du document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1057">Details are named in this part of the document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="e5b98-1058">Prise en charge des versions Oracle</span><span class="sxs-lookup"><span data-stu-id="e5b98-1058">Oracle Version Support</span></span>
<span data-ttu-id="e5b98-1059">Tous les détails concernant les versions Oracle et les versions de systèmes d’exploitation correspondants pris en charge pour l’exécution de SAP sur Oracle sur des machines virtuelles Azure sont disponibles dans la Note de SAP [2039619]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1059">All details about Oracle versions and corresponding OS versions which are supported for running SAP on Oracle on Azure Virtual Machines can be found in the following SAP Note [2039619]</span></span>

<span data-ttu-id="e5b98-1060">Pour des informations générales sur l’exécution de SAP Business Suite sur Oracle dans SCN, voir : <https://scn.sap.com/community/oracle></span><span class="sxs-lookup"><span data-stu-id="e5b98-1060">General information about running SAP Business Suite on Oracle can be found on SCN: <https://scn.sap.com/community/oracle></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="e5b98-1061">Instructions de configuration Oracle pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-1061">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="e5b98-1062">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="e5b98-1062">Storage configuration</span></span>
<span data-ttu-id="e5b98-1063">Une seule instance Oracle utilisant les disques au format NTFS est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1063">Only single instance Oracle using NTFS formatted disks is supported.</span></span> <span data-ttu-id="e5b98-1064">Tous les fichiers de base de données doivent être stockés sur le système de fichiers NTFS basé sur les disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1064">All database files must be stored on the NTFS file system based on VHD disks.</span></span> <span data-ttu-id="e5b98-1065">Ces disques durs virtuels sont montés sur la machine virtuelle Azure et sont basés sur le Stockage Blob de page Azure (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span><span class="sxs-lookup"><span data-stu-id="e5b98-1065">These VHDs are mounted to the Azure VM and are based on Azure Page BLOB Storage (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span></span>
<span data-ttu-id="e5b98-1066">Tous les types de lecteurs réseau ou de partages distants tels que les services de fichiers Azure :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1066">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="e5b98-1067"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-1067"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="e5b98-1068"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-1068"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="e5b98-1069">ne sont **PAS** pris en charge pour les fichiers de base de données Oracle !</span><span class="sxs-lookup"><span data-stu-id="e5b98-1069">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="e5b98-1070">Avec des disques durs virtuels Azure basés sur le stockage d’objets blob de pages Azure, les instructions figurant dans les chapitres [Mise en cache pour les machines virtuelles et les disques durs virtuels][dbms-guide-2.1] et [Stockage Microsoft Azure][dbms-guide-2.3] de ce document s’appliquent également aux déploiements avec Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1070">Using Azure VHDs based on Azure Page BLOB Storage, the statements made in this document in chapter [Caching for VMs and VHDs][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply to deployments with the Oracle Database as well.</span></span>

<span data-ttu-id="e5b98-1071">Comme expliqué précédemment dans la partie générale du document, des quotas existent en ce qui concerne le débit d’E/S par seconde pour les disques durs virtuels Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1071">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure VHDs exist.</span></span> <span data-ttu-id="e5b98-1072">Les quotas exacts dépendent du type de machine virtuelle utilisé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1072">The exact quotas are depending on the VM type used.</span></span> <span data-ttu-id="e5b98-1073">Une liste des types de machines virtuelles avec leurs quotas est disponible [ici][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1073">A list of VM types with their quotas can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="e5b98-1074">Pour identifier les types de machines virtuelles Azure pris en charge, voir la Note de SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1074">To identify the supported Azure VM types, please refer to SAP note [1928533]</span></span>

<span data-ttu-id="e5b98-1075">Tant que le quota actuel d’E/S par seconde par disque satisfait aux exigences, il est possible de stocker tous les fichiers de base de données sur un seul disque dur virtuel Azure monté.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1075">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the DB files on one single mounted Azure VHD.</span></span>

<span data-ttu-id="e5b98-1076">Si des E/S par seconde supplémentaires sont requises, il est vivement recommandé d’utiliser des pools de stockage Windows (fonction uniquement disponible dans Windows Server 2012 et versions ultérieures) ou l’entrelacement de Windows pour Windows 2008 R2, afin de créer une unité logique volumineuse sur plusieurs disques durs virtuels montés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1076">If more IOPS are required, it is strongly recommended to use Window Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 to create one big logical device over multiple mounted VHD disks.</span></span> <span data-ttu-id="e5b98-1077">Voir également le chapitre [RAID logiciel][dbms-guide-2.2] de ce document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1077">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="e5b98-1078">Cette approche simplifie les tâches administratives pour gérer l’espace disque et évite les tâches de distribution manuelle des fichiers sur plusieurs disques durs virtuels montés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1078">This approach simplifies the administration overhead to manage the disk space and avoids the effort to manually distribute files across multiple mounted VHDs.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="e5b98-1079">Sauvegarde / restauration</span><span class="sxs-lookup"><span data-stu-id="e5b98-1079">Backup / Restore</span></span>
<span data-ttu-id="e5b98-1080">Pour la fonctionnalité de sauvegarde / restauration, les outils SAP BR*Tools for Oracle sont pris en charge de la même manière que sur les systèmes d’exploitation Windows Server et Hyper-V standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1080">For backup / restore functionality, the SAP BR*Tools for Oracle are supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span> <span data-ttu-id="e5b98-1081">Oracle Recovery Manager (RMAN) est également pris en charge pour les sauvegardes sur disque et les restaurations à partir du disque.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1081">Oracle Recovery Manager (RMAN) is also supported for backups to disk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="e5b98-1082">Haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="e5b98-1082">High Availability</span></span>
<span data-ttu-id="e5b98-1083">[comment]: <> (link refers to ASM)</span><span class="sxs-lookup"><span data-stu-id="e5b98-1083">[comment]: <> (link refers to ASM)</span></span>
<span data-ttu-id="e5b98-1084">Oracle Data Guard est pris en charge à des fins de haute disponibilité et de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1084">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="e5b98-1085">Pour plus d’informations, consultez [cette][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1085">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="e5b98-1086">Autres</span><span class="sxs-lookup"><span data-stu-id="e5b98-1086">Other</span></span>
<span data-ttu-id="e5b98-1087">Tous les autres sujets généraux, notamment les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent avec Oracle Database, comme décrit dans les trois premiers chapitres de ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1087">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with the Oracle Database as well.</span></span>

## <a name="specifics-for-the-sap-maxdb-database-on-windows"></a><span data-ttu-id="e5b98-1088">Caractéristiques de la base de données SAP MaxDB sur Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-1088">Specifics for the SAP MaxDB Database on Windows</span></span>
### <a name="sap-maxdb-version-support"></a><span data-ttu-id="e5b98-1089">Prise en charge des versions SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="e5b98-1089">SAP MaxDB Version Support</span></span>
<span data-ttu-id="e5b98-1090">Actuellement, SAP prend en charge SAP MaxDB version 7.9 pour une utilisation avec les produits reposant sur SAP NetWeaver dans Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1090">SAP currently supports SAP MaxDB version 7.9 for use with SAP NetWeaver-based products in Azure.</span></span> <span data-ttu-id="e5b98-1091">Toutes les mises à jour pour le serveur SAP MaxDB ou les pilotes JDBC et ODBC à utiliser avec les produits SAP NetWeaver sont exclusivement fournies par le biais du SAP Service Marketplace à l’adresse <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1091">All updates for SAP MaxDB server, or JDBC and ODBC drivers to be used with SAP NetWeaver-based products are provided solely through the SAP Service Marketplace at <https://support.sap.com/swdc>.</span></span>
<span data-ttu-id="e5b98-1092">Vous trouverez des informations générales sur l’exécution de SAP NetWeaver sur SAP MaxDB à l’adresse <https://scn.sap.com/community/maxdb>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1092">General information on running SAP NetWeaver on SAP MaxDB can be found at <https://scn.sap.com/community/maxdb>.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-maxdb-dbms"></a><span data-ttu-id="e5b98-1093">Versions de Microsoft Windows et types de machines virtuelles Azure pris en charge pour SGBD SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="e5b98-1093">Supported Microsoft Windows Versions and Azure VM types for SAP MaxDB DBMS</span></span>
<span data-ttu-id="e5b98-1094">Pour connaître la version de Microsoft Windows prise en charge pour SGBD SAP MaxDB sur Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1094">To find the supported Microsoft Windows version for SAP MaxDB DBMS on Azure, see:</span></span>

* <span data-ttu-id="e5b98-1095">[Tableau de disponibilité des produits SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1095">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="e5b98-1096">Note SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1096">SAP Note [1928533]</span></span>

<span data-ttu-id="e5b98-1097">Il est vivement recommandé d’utiliser la version la plus récente du système d’exploitation Microsoft Windows : Microsoft Windows 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1097">It is highly recommended to use the newest version of the operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="available-sap-maxdb-documentation"></a><span data-ttu-id="e5b98-1098">Documentation SAP MaxDB disponible</span><span class="sxs-lookup"><span data-stu-id="e5b98-1098">Available SAP MaxDB Documentation</span></span>
<span data-ttu-id="e5b98-1099">Vous trouverez la liste mise à jour de la documentation SAP MaxDB dans la Note de SAP suivante [767598]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1099">You can find the updated list of SAP MaxDB documentation in the following SAP Note [767598]</span></span>

### <a name="sap-maxdb-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="e5b98-1100">Instructions de configuration SAP MaxDB pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-1100">SAP MaxDB Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <span data-ttu-id="e5b98-1101"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="e5b98-1101"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Storage configuration</span></span>
<span data-ttu-id="e5b98-1102">Les meilleures pratiques de stockage Azure pour SAP MaxDB suivent les recommandations générales mentionnées dans le chapitre [Structure d’un déploiement SGBDR][dbms-guide-2].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1102">Azure storage best practices for SAP MaxDB follow the general recommendations mentioned in chapter [Structure of a RDBMS Deployment][dbms-guide-2].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e5b98-1103">Comme d’autres bases de données, SAP MaxDB possède des données et des fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1103">Like other databases, SAP MaxDB also has data and log files.</span></span> <span data-ttu-id="e5b98-1104">Toutefois, dans la terminologie SAP MaxDB, le terme correct est « volume » (et non « fichier »).</span><span class="sxs-lookup"><span data-stu-id="e5b98-1104">However, in SAP MaxDB terminology the correct term is “volume” (not “file”).</span></span> <span data-ttu-id="e5b98-1105">Par exemple, il existe des volumes de données et des volumes de journaux SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1105">For example, there are SAP MaxDB data volumes and log volumes.</span></span> <span data-ttu-id="e5b98-1106">Ne les confondez pas avec les volumes de disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1106">Do not confuse these with OS disk volumes.</span></span>
>
>

<span data-ttu-id="e5b98-1107">En bref, voici que vous avez à faire :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1107">In short you have to:</span></span>

* <span data-ttu-id="e5b98-1108">Définissez le compte de stockage Azure qui contient les volumes de données et de journaux SAP MaxDB (c’est-à-dire les fichiers) sur **Stockage localement redondant (LRS)** comme l’indique le chapitre [Stockage Microsoft Azure][dbms-guide-2.3].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1108">Set the Azure storage account that holds the SAP MaxDB data and log volumes (i.e. files) to **Local Redundant Storage (LRS)** as specified in chapter [Microsoft Azure Storage][dbms-guide-2.3].</span></span>
* <span data-ttu-id="e5b98-1109">Séparez le chemin d’accès d’E/S pour les volumes de données SAP MaxDB (c’est-à-dire les fichiers) du chemin d’accès d’E/S pour les volumes de journaux (c’est-à-dire les fichiers).</span><span class="sxs-lookup"><span data-stu-id="e5b98-1109">Separate the IO path for SAP MaxDB data volumes (i.e. files) from the IO path for log volumes (i.e. files).</span></span> <span data-ttu-id="e5b98-1110">Cela signifie que les volumes de données SAP MaxDB (c’est-à-dire les fichiers) doivent être installés sur un lecteur logique et que les volumes de journaux SAP MaxDB (c’est-à-dire les fichiers) doivent être installés sur un autre lecteur logique.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1110">This means that SAP MaxDB data volumes (i.e. files) have to be installed on one logical drive and SAP MaxDB log volumes (i.e. files) have to be installed on another logical drive.</span></span>
* <span data-ttu-id="e5b98-1111">Définissez le fichier de mise en cache approprié pour chaque objet blob Azure, selon que vous l’utilisez pour des volumes de données ou de journaux SAP MaxDB (c’est-à-dire les fichiers), et que vous utilisez le Stockage Standard Azure ou le Stockage Premium Azure, comme le décrit le chapitre [Mise en cache pour les machines virtuelles][dbms-guide-2.1].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1111">Set the proper file caching for each Azure blob, depending on whether you use it for SAP MaxDB data or log volumes (i.e. files), and whether you use Azure Standard or Azure Premium Storage, as described in chapter [Caching for VMs][dbms-guide-2.1].</span></span>
* <span data-ttu-id="e5b98-1112">Tant que le quota actuel d’E/S par seconde par disque satisfait aux exigences, il est possible de stocker tous les volumes de données sur un seul disque dur virtuel Azure monté, et également de stocker tous les volumes de journaux de bases de données sur un autre disque dur virtuel Azure unique monté.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1112">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the data volumes on a single mounted Azure VHD, and also store all database log volumes on another single mounted Azure VHD.</span></span>
* <span data-ttu-id="e5b98-1113">Si des E/S par seconde supplémentaires et/ou plus d’espace sont requis, il est vivement recommandé d’utiliser des pools de stockage Microsoft Windows (fonction uniquement disponible dans Microsoft Windows Server 2012 et versions ultérieures) ou l’entrelacement de Microsoft Windows pour Microsoft Windows 2008 R2, afin de créer une unité logique volumineuse sur plusieurs disques durs virtuels montés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1113">If more IOPS and/or space are required, it is strongly recommended to use Microsoft Window Storage Pools (only available in Microsoft Windows Server 2012 and higher) or Microsoft Windows striping for Microsoft Windows 2008 R2 to create one large logical device over multiple mounted VHD disks.</span></span> <span data-ttu-id="e5b98-1114">Voir également le chapitre [RAID logiciel][dbms-guide-2.2] de ce document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1114">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="e5b98-1115">Cette approche simplifie les tâches administratives pour gérer l’espace disque et évite les tâches de distribution manuelle des fichiers sur plusieurs disques durs virtuels montés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1115">This approach simplifies the administration overhead to manage the disk space and avoids the effort of manually distributing files across multiple mounted VHDs.</span></span>
* <span data-ttu-id="e5b98-1116">Pour les exigences d’E/S par seconde les plus élevées, vous pouvez utiliser Azure Premium Storage, qui est disponible sur les machines virtuelles séries DS et GS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1116">For the highest IOPS requirements, you can use Azure Premium Storage, which is available on DS-series and GS-series VMs.</span></span>

![Configuration de référence de la machine virtuelle IaaS Azure pour SGBD SAP MaxDB][dbms-guide-figure-600]

#### <span data-ttu-id="e5b98-1118"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Sauvegarde et restauration</span><span class="sxs-lookup"><span data-stu-id="e5b98-1118"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup and Restore</span></span>
<span data-ttu-id="e5b98-1119">Lors du déploiement de SAP MaxDB dans Azure, vous devez passer en revue votre méthodologie de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1119">When deploying SAP MaxDB into Azure, you must review your backup methodology.</span></span> <span data-ttu-id="e5b98-1120">Même si le système n’est pas un système productif, la base de données SAP hébergée par SAP MaxDB doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1120">Even if the system is not a productive system, the SAP database hosted by SAP MaxDB must be backed up periodically.</span></span> <span data-ttu-id="e5b98-1121">Étant donné qu’Azure Storage conserve trois images, une sauvegarde est désormais moins importante en termes de protection de votre système contre les défaillances de stockage, ou les défaillances opérationnelles ou administratives plus sérieuses.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1121">Since Azure Storage keeps three images, a backup is now less important in terms of protecting your system against storage failure and more important operational or administrative failures.</span></span> <span data-ttu-id="e5b98-1122">La raison principale du maintien d’un plan de sauvegarde et de restauration approprié est que vous pouvez compenser les erreurs logiques ou manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1122">The primary reason for maintaining a proper backup and restore plan is so that you can compensate for logical or manual errors by providing point-in-time recovery capabilities.</span></span> <span data-ttu-id="e5b98-1123">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un certain point dans le temps, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1123">So the goal is to either use backups to restore the database to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="e5b98-1124">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1124">For example, you could transfer from a 2-tier SAP configuration to a 3-tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="e5b98-1125">La sauvegarde et la restauration d’une base de données dans Azure fonctionnent de la même manière que pour les systèmes locaux. Vous pouvez donc utiliser les outils de sauvegarde/restauration SAP MaxDB standard décrits dans l’un des documents de la documentation SAP MaxDB répertoriée dans la Note de SAP [767598].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1125">Backing up and restoring a database in Azure works the same way as it does for on-premises systems, so you can use standard SAP MaxDB backup/restore tools, which are described in one of the SAP MaxDB documentation documents listed in SAP Note [767598].</span></span>

#### <span data-ttu-id="e5b98-1126"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Considérations sur les performances de sauvegarde et de restauration</span><span class="sxs-lookup"><span data-stu-id="e5b98-1126"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Performance Considerations for Backup and Restore</span></span>
<span data-ttu-id="e5b98-1127">À l’instar des déploiements sur système nu, les performances de sauvegarde et de restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1127">As in bare-metal deployments, backup and restore performance is dependent on how many volumes can be read in parallel and the throughput of those volumes.</span></span> <span data-ttu-id="e5b98-1128">En outre, la consommation d’UC par la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles avec jusqu’à 8 threads UC.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1128">In addition, the CPU consumption used by backup compression can play a significant role on VMs with up to 8 CPU threads.</span></span> <span data-ttu-id="e5b98-1129">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1129">Therefore, one can assume:</span></span>

* <span data-ttu-id="e5b98-1130">Moins il y a de disques durs virtuels utilisés pour stocker les unités de base de données, plus le débit de lecture global est réduit</span><span class="sxs-lookup"><span data-stu-id="e5b98-1130">The fewer the number of VHDs used to store the database devices, the lower the overall read throughput</span></span>
* <span data-ttu-id="e5b98-1131">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="e5b98-1131">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="e5b98-1132">Moins il y a de cibles (répertoires d’entrelacement, disques durs virtuels) d’écriture de la sauvegarde, plus le débit est faible</span><span class="sxs-lookup"><span data-stu-id="e5b98-1132">The fewer targets (Stripe Directories, VHDs) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="e5b98-1133">Pour augmenter le nombre de cibles d’écriture, vous pouvez utiliser deux options, éventuellement en association, selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1133">To increase the number of targets to write to, there are two options that you can use, possibly in combination, depending on your needs:</span></span>

* <span data-ttu-id="e5b98-1134">Dédier des volumes distincts pour la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="e5b98-1134">Dedicating separate volumes for backup</span></span>
* <span data-ttu-id="e5b98-1135">Entrelacer le volume cible de sauvegarde sur plusieurs disques durs virtuels montés, afin d’améliorer le débit d’E/S par seconde sur ce volume de disque agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="e5b98-1135">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped disk volume</span></span>
* <span data-ttu-id="e5b98-1136">Disposer d’unités de disque logiques dédiées distinctes pour les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1136">Having separate dedicated logical disk devices for:</span></span>
  * <span data-ttu-id="e5b98-1137">Volumes de sauvegarde SAP MaxDB (c’est-à-dire les fichiers)</span><span class="sxs-lookup"><span data-stu-id="e5b98-1137">SAP MaxDB backup volumes (i.e. files)</span></span>
  * <span data-ttu-id="e5b98-1138">Volumes de données SAP MaxDB (c’est-à-dire les fichiers)</span><span class="sxs-lookup"><span data-stu-id="e5b98-1138">SAP MaxDB data volumes ( i.e. files)</span></span>
  * <span data-ttu-id="e5b98-1139">Volumes de journaux SAP MaxDB (c’est-à-dire les fichiers)</span><span class="sxs-lookup"><span data-stu-id="e5b98-1139">SAP MaxDB log volumes ( i.e. files)</span></span>

<span data-ttu-id="e5b98-1140">L’agrégation d’un volume par bandes sur plusieurs disques durs virtuels montés a été évoquée précédemment dans le chapitre [RAID logiciel][dbms-guide-2.2] de ce document.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1140">Striping a volume over multiple mounted VHDs has been discussed earlier in chapter [Software RAID][dbms-guide-2.2] of this document.</span></span>

#### <span data-ttu-id="e5b98-1141"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Autres</span><span class="sxs-lookup"><span data-stu-id="e5b98-1141"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Other</span></span>
<span data-ttu-id="e5b98-1142">Tous les autres sujets généraux, tels que les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent également avec la base de données SAP MaxDB comme décrit dans les trois premiers chapitres dans ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1142">All other general topics such as Azure Availability Sets or SAP monitoring also apply as described in the first three chapters of this document for deployments of VMs with the SAP MaxDB database.</span></span>
<span data-ttu-id="e5b98-1143">D’autres paramètres spécifiques à SAP MaxDB sont transparents pour les machines virtuelles Azure et sont décrits dans différents documents figurant dans la Note de SAP [767598] et dans les Notes de SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1143">Other SAP MaxDB-specific settings are transparent to Azure VMs and are described in different documents listed in SAP Note [767598] and in these SAP notes:</span></span>

* <span data-ttu-id="e5b98-1144">[826037]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1144">[826037]</span></span>
* <span data-ttu-id="e5b98-1145">[1139904]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1145">[1139904]</span></span>
* <span data-ttu-id="e5b98-1146">[1173395]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1146">[1173395]</span></span>

## <a name="specifics-for-sap-livecache-on-windows"></a><span data-ttu-id="e5b98-1147">Caractéristiques de SAP liveCache sur Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-1147">Specifics for SAP liveCache on Windows</span></span>
### <a name="sap-livecache-version-support"></a><span data-ttu-id="e5b98-1148">Prise en charge des versions SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="e5b98-1148">SAP liveCache Version Support</span></span>
<span data-ttu-id="e5b98-1149">La version minimale de SAP liveCache prise en charge dans les machines virtuelles Azure est **SAP LC/LCAPPS 10.0 SP 25** incluant **liveCache 7.9.08.31** et **LCA-Build 25** pour **EhP 2 for SAP SCM 7.0** et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1149">Minimal version of SAP liveCache supported in Azure Virtual Machines is **SAP LC/LCAPPS 10.0 SP 25** including **liveCache 7.9.08.31** and **LCA-Build 25**, released for **EhP 2 for SAP SCM 7.0** and higher.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-livecache-dbms"></a><span data-ttu-id="e5b98-1150">Versions de Microsoft Windows et types de machines virtuelles Azure pris en charge pour SGBD SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="e5b98-1150">Supported Microsoft Windows Versions and Azure VM types for SAP liveCache DBMS</span></span>
<span data-ttu-id="e5b98-1151">Pour connaître la version de Microsoft Windows prise en charge pour SAP liveCache sur Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1151">To find the supported Microsoft Windows version for SAP liveCache on Azure, see:</span></span>

* <span data-ttu-id="e5b98-1152">[Tableau de disponibilité des produits SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1152">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="e5b98-1153">Note SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1153">SAP Note [1928533]</span></span>

<span data-ttu-id="e5b98-1154">Il est vivement recommandé d’utiliser la version la plus récente du système d’exploitation Microsoft Windows : Microsoft Windows 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1154">It is highly recommended to use the newest version of the operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="sap-livecache-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="e5b98-1155">Instructions de configuration SAP liveCache pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-1155">SAP liveCache Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="recommended-azure-vm-types"></a><span data-ttu-id="e5b98-1156">Types de machines virtuelles Azure recommandés</span><span class="sxs-lookup"><span data-stu-id="e5b98-1156">Recommended Azure VM Types</span></span>
<span data-ttu-id="e5b98-1157">SAP liveCache étant une application qui effectue des calculs énormes, la quantité et la vitesse de la mémoire RAM et de l’UC ont des répercussions importantes sur les performances de SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1157">As SAP liveCache is an application that performs huge calculations, the amount and speed of RAM and CPU has a major influence on SAP liveCache performance.</span></span>

<span data-ttu-id="e5b98-1158">Pour les types de machines virtuelles Azure pris en charge par SAP (Note de SAP [1928533]), toutes les ressources de l’UC virtuel allouées à la machine virtuelle sont soutenues par des ressources UC physiques dédiées de l’hyperviseur.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1158">For the Azure VM types supported by SAP (SAP Note [1928533]), all virtual CPU resources allocated to the VM are backed by dedicated physical CPU resources of the hypervisor.</span></span> <span data-ttu-id="e5b98-1159">Aucun surprovisionnement (et par conséquent aucune concurrence pour les ressources UC) n’a lieu.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1159">No overprovisioning (and therefore no competition for CPU resources) takes place.</span></span>

<span data-ttu-id="e5b98-1160">De même, pour tous les types d’instances de machine virtuelle Azure pris en charge par SAP, la mémoire de la machine virtuelle est mappée à la mémoire physique à 100 % – ainsi, le surprovisionnement (surengagement) n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1160">Similarly, for all Azure VM instance types supported by SAP, the VM memory is 100 % mapped to the physical memory – overprovisioning (over-commitment), for example, is not used.</span></span>

<span data-ttu-id="e5b98-1161">De ce point de vue, il est vivement recommandé d’utiliser le nouveau type de machines virtuelles Azure des séries D ou DS (en association avec Azure Premium Storage), car elles sont dotées de processeurs 60 % plus rapides que ceux de la série A.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1161">From this perspective it is highly recommended to use the new D- series or DS-series (in combination with Azure Premium Storage) Azure VM type, as they have 60 % faster processors than the A-series.</span></span> <span data-ttu-id="e5b98-1162">Pour une charge de mémoire RAM et d’UC optimale, vous pouvez utiliser des machines virtuelles des séries G et GS (en association avec Azure Premium Storage) avec la famille la plus récente de processeurs Intel® Xeon® E5 v3, disposant de deux fois plus de mémoire et quatre fois plus de stockage SSD que les séries D/DS.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1162">For the highest RAM and CPU load, you can use G-series and GS-series (in combination with Azure Premium Storage) VMs with the latest Intel® Xeon® processor E5 v3 family, which have twice the memory and four times the solid state drive storage (SSDs) of the D/DS-series.</span></span>

#### <a name="storage-configuration"></a><span data-ttu-id="e5b98-1163">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="e5b98-1163">Storage Configuration</span></span>
<span data-ttu-id="e5b98-1164">SAP liveCache étant basé sur la technologie SAP MaxDB, toutes les recommandations en matière de meilleures pratiques de stockage Azure mentionnées pour SAP MaxDB dans le chapitre [Configuration du stockage][dbms-guide-8.4.1] sont également valides pour SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1164">As SAP liveCache is based on SAP MaxDB technology, all the Azure storage best practice recommendations mentioned for SAP MaxDB in chapter [Storage configuration][dbms-guide-8.4.1] are also valid for SAP liveCache.</span></span>

#### <a name="dedicated-azure-vm-for-livecache"></a><span data-ttu-id="e5b98-1165">Machine virtuelle Azure dédiée pour liveCache</span><span class="sxs-lookup"><span data-stu-id="e5b98-1165">Dedicated Azure VM for liveCache</span></span>
<span data-ttu-id="e5b98-1166">Comme SAP liveCache utilise intensivement la puissance de calcul, pour une utilisation productive, il est fortement recommandé de déployer sur une machine virtuelle Azure dédiée.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1166">As SAP liveCache intensively uses computational power, for productive usage it is highly recommended to deploy on a dedicated Azure Virtual Machine.</span></span>

![Machine virtuelle Azure dédiée à liveCache pour les cas d’utilisation productive][dbms-guide-figure-700]

#### <a name="backup-and-restore"></a><span data-ttu-id="e5b98-1168">Sauvegarde et restauration</span><span class="sxs-lookup"><span data-stu-id="e5b98-1168">Backup and Restore</span></span>
<span data-ttu-id="e5b98-1169">La sauvegarde et la restauration, ainsi que les considérations sur les performances, sont déjà décrites dans les chapitres SAP MaxDB correspondants [Sauvegarde et restauration][dbms-guide-8.4.2] et [Considérations sur les performances de sauvegarde et de restauration][dbms-guide-8.4.3].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1169">Backup and restore, including performance considerations, are already described in the relevant SAP MaxDB chapters [Backup and Restore][dbms-guide-8.4.2] and [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span>

#### <a name="other"></a><span data-ttu-id="e5b98-1170">Autres</span><span class="sxs-lookup"><span data-stu-id="e5b98-1170">Other</span></span>
<span data-ttu-id="e5b98-1171">Tous les autres sujets généraux sont déjà décrits dans [ce][dbms-guide-8.4.4] chapitre SAP MaxDB correspondant.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1171">All other general topics are already described in the relevant SAP MaxDB [this][dbms-guide-8.4.4] chapter.</span></span>

## <a name="specifics-for-the-sap-content-server-on-windows"></a><span data-ttu-id="e5b98-1172">Caractéristiques de SAP Content Server sur Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-1172">Specifics for the SAP Content Server on Windows</span></span>
<span data-ttu-id="e5b98-1173">SAP Content Server est un composant distinct, basé sur le serveur pour stocker du contenu, tels que les documents électroniques dans différents formats.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1173">The SAP Content Server is a separate, server-based component to store content such as electronic documents in different formats.</span></span> <span data-ttu-id="e5b98-1174">SAP Content Server est fourni par le développement de la technologie et doit être utilisé entre les applications SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1174">The SAP Content Server is provided by development of technology and is to be used cross-application for any SAP applications.</span></span> <span data-ttu-id="e5b98-1175">Il est installé sur un système distinct.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1175">It is installed on a separate system.</span></span> <span data-ttu-id="e5b98-1176">Le contenu standard consiste en des supports et documents de formation issus de Knowledge Warehouse ou en des dessins techniques provenant du système de gestion des documents mySAP PLM.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1176">Typical content is training material and documentation from Knowledge Warehouse or technical drawings originating from the mySAP PLM Document Management System.</span></span>

### <a name="sap-content-server-version-support"></a><span data-ttu-id="e5b98-1177">Prise en charge des versions SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-1177">SAP Content Server Version Support</span></span>
<span data-ttu-id="e5b98-1178">Actuellement, SAP prend en charge :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1178">SAP currently supports:</span></span>

* <span data-ttu-id="e5b98-1179">**SAP Content Server** version **6.50 (et versions supérieures)**</span><span class="sxs-lookup"><span data-stu-id="e5b98-1179">**SAP Content Server** with version **6.50 (and higher)**</span></span>
* <span data-ttu-id="e5b98-1180">**SAP MaxDB version 7.9**</span><span class="sxs-lookup"><span data-stu-id="e5b98-1180">**SAP MaxDB version 7.9**</span></span>
* <span data-ttu-id="e5b98-1181">**Microsoft IIS (Internet Information Server) version 8.0 (et versions supérieures)**</span><span class="sxs-lookup"><span data-stu-id="e5b98-1181">**Microsoft IIS (Internet Information Server) version 8.0 (and higher)**</span></span>

<span data-ttu-id="e5b98-1182">Il est vivement recommandé d’utiliser la version la plus récente de SAP Content Server qui, au moment de la rédaction de ce document, est la version **6.50 SP4**, ainsi que la version la plus récente de **Microsoft IIS 8.5**.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1182">It is highly recommended to use the newest version of SAP Content Server, which at the time of writing this document is **6.50 SP4**, and the newest version of **Microsoft IIS 8.5**.</span></span>

<span data-ttu-id="e5b98-1183">Vérifiez les dernières versions prises en charge de SAP Content Server et de Microsoft IIS dans le [Tableau de disponibilité des produits SAP][sap-pam].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1183">Check the latest supported versions of SAP Content Server and Microsoft IIS in the [SAP Product Availability Matrix (PAM)][sap-pam].</span></span>

### <a name="supported-microsoft-windows-and-azure-vm-types-for-sap-content-server"></a><span data-ttu-id="e5b98-1184">Versions de Microsoft Windows et types de machines virtuelles Azure pris en charge pour SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-1184">Supported Microsoft Windows and Azure VM types for SAP Content Server</span></span>
<span data-ttu-id="e5b98-1185">Pour découvrir la version de Windows prise en charge pour SAP Content Server sur Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1185">To find out supported Windows version for SAP Content Server on Azure, see:</span></span>

* <span data-ttu-id="e5b98-1186">[Tableau de disponibilité des produits SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1186">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="e5b98-1187">Note SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1187">SAP Note [1928533]</span></span>

<span data-ttu-id="e5b98-1188">Il est vivement recommandé d’utiliser la version la plus récente de Microsoft Windows qui, au moment de la rédaction dans ce document, est **Windows Server 2012 R2**.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1188">It is highly recommended to use the newest version of Microsoft Windows, which at the time of writing this document is **Windows Server 2012 R2**.</span></span>

### <a name="sap-content-server-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="e5b98-1189">Instructions de configuration SAP Content Server pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-1189">SAP Content Server Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="e5b98-1190">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="e5b98-1190">Storage Configuration</span></span>
<span data-ttu-id="e5b98-1191">Si vous configurez SAP Content Server pour stocker des fichiers dans la base de données SAP MaxDB, l’ensemble des recommandations en matière de meilleures pratiques de stockage Azure mentionnées pour SAP MaxDB dans le chapitre [Configuration du stockage][dbms-guide-8.4.1] sont également valides pour le scénario SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1191">If you configure SAP Content Server to store files in the SAP MaxDB database, all Azure storage best practices recommendation mentioned for SAP MaxDB in chapter [Storage Configuration][dbms-guide-8.4.1] are also valid for the SAP Content Server scenario.</span></span>

<span data-ttu-id="e5b98-1192">Si vous configurez SAP Content Server pour stocker les fichiers dans le système de fichiers, il est recommandé d’utiliser un lecteur logique dédié.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1192">If you configure SAP Content Server to store files in the file system, it is recommended to use a dedicated logical drive.</span></span> <span data-ttu-id="e5b98-1193">L’utilisation des espaces de stockage vous permet d’augmenter également la taille du disque logique et le débit d’E/S par seconde, comme le décrit le chapitre [RAID logiciel][dbms-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1193">Using storage spaces enables you to also increase logical disk size and IOPS throughput, as described in in chapter [Software RAID][dbms-guide-2.2].</span></span>

#### <a name="sap-content-server-location"></a><span data-ttu-id="e5b98-1194">Emplacement de SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-1194">SAP Content Server Location</span></span>
<span data-ttu-id="e5b98-1195">SAP Content Server doit être déployé dans la même région Azure et le même réseau virtuel Azure de déploiement du système SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1195">SAP Content Server has to be deployed in the same Azure region and Azure VNET where the SAP system is deployed.</span></span> <span data-ttu-id="e5b98-1196">Vous êtes libre de décider si vous souhaitez déployer les composants SAP Content Server sur une machine virtuelle Azure dédiée ou sur la même machine virtuelle d’exécution du système SAP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1196">You are free to decide whether you want to deploy SAP Content Server components on a dedicated Azure VM or on the same VM where the SAP system is running.</span></span>

![Machine virtuelle Azure dédiée pour SAP Content Server][dbms-guide-figure-800]

#### <a name="sap-cache-server-location"></a><span data-ttu-id="e5b98-1198">Emplacement de SAP Cache Server</span><span class="sxs-lookup"><span data-stu-id="e5b98-1198">SAP Cache Server Location</span></span>
<span data-ttu-id="e5b98-1199">SAP Cache Server est un composant supplémentaire basé sur serveur pour fournir l’accès aux documents (mis en cache) en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1199">The SAP Cache Server is an additional server-based component to provide access to (cached) documents locally.</span></span> <span data-ttu-id="e5b98-1200">SAP Cache Server met en cache les documents d’un SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1200">The SAP Cache Server caches the documents of a SAP Content Server.</span></span> <span data-ttu-id="e5b98-1201">Cela permet d’optimiser le trafic réseau si les documents doivent être récupérés plusieurs fois à partir de différents emplacements.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1201">This is to optimize network traffic if documents have to be retrieved more than once from different locations.</span></span> <span data-ttu-id="e5b98-1202">La règle générale est que SAP Cache Server doit être physiquement proche du client qui y accède.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1202">The general rule is that the SAP Cache Server has to be physically close to the client that accesses the SAP Cache Server.</span></span>

<span data-ttu-id="e5b98-1203">Ici, deux options s’offrent à vous :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1203">Here you have two options:</span></span>

1. <span data-ttu-id="e5b98-1204">**Le client est un système SAP principal** Si un système SAP principal est configuré pour accéder à SAP Content Server, ce système SAP est un client.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1204">**Client is a backend SAP system** If a backend SAP system is configured to access SAP Content Server, that SAP system is a client.</span></span> <span data-ttu-id="e5b98-1205">Comme le système SAP et SAP Content Server sont déployés dans la même région Azure (dans le même centre de données Azure), ils sont physiquement proches l’un de l’autre.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1205">As both SAP system and SAP Content Server are deployed in the same Azure region – in the same Azure datacenter – they are physically close to each other.</span></span> <span data-ttu-id="e5b98-1206">Par conséquent, il n’est pas nécessaire de disposer d’un SAP Cache Server dédié.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1206">Therefore, there is no need to have a dedicated SAP Cache Server.</span></span> <span data-ttu-id="e5b98-1207">Les clients de l’interface utilisateur SAP (GUI ou navigateur web SAP) accèdent directement au système SAP, et celui-ci récupère les documents à partir du SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1207">SAP UI clients (SAP GUI or web browser) access the SAP system directly, and the SAP system retrieves documents from the SAP Content Server.</span></span>
2. <span data-ttu-id="e5b98-1208">**Le client est un navigateur web local** SAP Content Server peut être configuré pour être accessible directement par le navigateur web.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1208">**Client is an on-premises web browser** The SAP Content Server can be configured to be accessed directly by the web browser.</span></span> <span data-ttu-id="e5b98-1209">Dans ce cas, un navigateur web exécuté sur site est un client de SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1209">In this case, a web browser running on–premises is a client of the SAP Content Server.</span></span> <span data-ttu-id="e5b98-1210">Le centre de données local et le centre de données Azure se situent à des emplacements physiques différents (idéalement, proches l’un de l’autre).</span><span class="sxs-lookup"><span data-stu-id="e5b98-1210">On-premises datacenter and Azure datacenter are placed in different physical locations (ideally close to each other).</span></span> <span data-ttu-id="e5b98-1211">Votre centre de données local est connecté à Azure via le VPN de site à site Azure ou ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1211">Your on-premises datacenter is connected to Azure via Azure Site-to-Site VPN or ExpressRoute.</span></span> <span data-ttu-id="e5b98-1212">Bien que les deux options offrent une connexion réseau VPN sécurisée à Azure, la connexion réseau de site à site n’offre pas de contrat de niveau de service (SLA) pour la bande passante réseau et la latence entre le centre de données local et le centre de données Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1212">Although both options offer secure VPN network connection to Azure, site-to-site network connection does not offer a network bandwidth and latency SLA between the on-premises datacenter and the Azure datacenter.</span></span> <span data-ttu-id="e5b98-1213">Pour accélérer l’accès aux documents, vous pouvez effectuer l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1213">To speed up access to documents, you can do one of the following:</span></span>
   1. <span data-ttu-id="e5b98-1214">Installer SAP Cache Server en local, à proximité du navigateur web local (option sur [cette][dbms-guide-900-sap-cache-server-on-premises] figure)</span><span class="sxs-lookup"><span data-stu-id="e5b98-1214">Install SAP Cache Server on-premises, close to the on-premises web browser (option on [this][dbms-guide-900-sap-cache-server-on-premises] Figure)</span></span>
   2. <span data-ttu-id="e5b98-1215">Configurer Azure ExpressRoute, qui offre une connexion réseau dédiée à haut débit et à faible latence entre le centre de données local et le centre de données Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1215">Configure Azure ExpressRoute, which offers a high-speed and low-latency dedicated network connection between on-premises datacenter and Azure datacenter.</span></span>

<span data-ttu-id="e5b98-1216">![Possibilité d’installer SAP Cache Server en local][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span><span class="sxs-lookup"><span data-stu-id="e5b98-1216">![Option to install SAP Cache Server on-premises][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span></span>

#### <a name="backup--restore"></a><span data-ttu-id="e5b98-1217">Sauvegarde / restauration</span><span class="sxs-lookup"><span data-stu-id="e5b98-1217">Backup / Restore</span></span>
<span data-ttu-id="e5b98-1218">Si vous configurez SAP Content Server pour stocker des fichiers dans la base de données SAP MaxDB, la procédure de sauvegarde/restauration et les considérations sur les performances sont déjà décrites dans les chapitres SAP MaxDB [Sauvegarde et restauration][dbms-guide-8.4.2] et [Considérations sur les performances de sauvegarde et de restauration][dbms-guide-8.4.3].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1218">If you configure the SAP Content Server to store files in the SAP MaxDB database, the backup/restore procedure and performance considerations are already described in SAP MaxDB chapter [Backup and Restore][dbms-guide-8.4.2] and chapter [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span>

<span data-ttu-id="e5b98-1219">Si vous configurez SAP Content Server pour stocker les fichiers dans le système de fichiers, l’une des options consiste à exécuter manuellement la sauvegarde/restauration de l’ensemble de la structure de fichiers dans laquelle se trouvent les documents.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1219">If you configure the SAP Content Server to store files in the file system, one option is to execute manual backup/restore of the whole file structure where the documents are located.</span></span> <span data-ttu-id="e5b98-1220">Comme pour la sauvegarde/restauration SAP MaxDB, il est recommandé de disposer d’un volume de disque dédié aux fins de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1220">Similar to SAP MaxDB backup/restore, it is recommended to have a dedicated disk volume for backup purpose.</span></span>

#### <a name="other"></a><span data-ttu-id="e5b98-1221">Autres</span><span class="sxs-lookup"><span data-stu-id="e5b98-1221">Other</span></span>
<span data-ttu-id="e5b98-1222">Les autres paramètres spécifiques SAP Content Server sont transparents pour les machines virtuelles Azure et sont décrits dans différents documents et Notes SAP :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1222">Other SAP Content Server specific settings are transparent to Azure VMs and are described in various documents and SAP Notes:</span></span>

* <span data-ttu-id="e5b98-1223"><https://service.sap.com/contentserver></span><span class="sxs-lookup"><span data-stu-id="e5b98-1223"><https://service.sap.com/contentserver></span></span>
* <span data-ttu-id="e5b98-1224">Note de SAP [1619726]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1224">SAP Note [1619726]</span></span>  

## <a name="specifics-to-ibm-db2-for-luw-on-windows"></a><span data-ttu-id="e5b98-1225">Caractéristiques d’IBM DB2 pour LUW sous Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-1225">Specifics to IBM DB2 for LUW on Windows</span></span>
<span data-ttu-id="e5b98-1226">Avec Microsoft Azure, vous pouvez facilement migrer votre application SAP existante exécutée sur IBM DB2 pour Linux, UNIX et Windows (LUW) vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1226">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) to Azure virtual machines.</span></span> <span data-ttu-id="e5b98-1227">Avec SAP sur IBM DB2 pour LUW, les administrateurs et développeurs peuvent utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1227">With SAP on IBM DB2 for LUW, administrators and developers can still use the same development and administration tools which are available on-premises.</span></span>
<span data-ttu-id="e5b98-1228">Des informations générales sur l’exécution de SAP Business Suite sur IBM DB2 pour LUW sont disponibles dans SAP Community Network (SCN) à l’adresse <https://scn.sap.com/community/db2-for-linux-unix-windows>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1228">General information about running SAP Business Suite on IBM DB2 for LUW can be found in the SAP Community Network (SCN) at <https://scn.sap.com/community/db2-for-linux-unix-windows>.</span></span>

<span data-ttu-id="e5b98-1229">Pour des informations et des mises à jour supplémentaires de SAP sur DB2 pour LUW sur Azure, voir la Note de SAP [2233094].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1229">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="e5b98-1230">Prise en charge des versions IBM DB2 pour Linux, UNIX et Windows</span><span class="sxs-lookup"><span data-stu-id="e5b98-1230">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="e5b98-1231">SAP sur IBM DB2 pour LUW est pris en charge sur les services de machines virtuelles Microsoft Azure à compter de la version DB2 10.5.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1231">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="e5b98-1232">Pour plus d’informations sur les produits SAP et les types de machines virtuelles Azure pris en charge, reportez-vous à la Note de SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1232">For information about supported SAP products and Azure VM types, please refer to SAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="e5b98-1233">Instructions de configuration IBM DB2 pour Linux, UNIX et Windows pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="e5b98-1233">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="e5b98-1234">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="e5b98-1234">Storage Configuration</span></span>
<span data-ttu-id="e5b98-1235">Tous les fichiers de base de données doivent être stockés sur le système de fichiers NTFS basé sur les disques durs virtuels.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1235">All database files must be stored on the NTFS file system based on VHD disks.</span></span> <span data-ttu-id="e5b98-1236">Ces disques durs virtuels sont montés sur la machine virtuelle Azure et sont basés sur le Stockage Blob de page Azure (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span><span class="sxs-lookup"><span data-stu-id="e5b98-1236">These VHDs are mounted to the Azure VM and are based in Azure Page BLOB Storage (<https://msdn.microsoft.com/library/azure/ee691964.aspx>).</span></span>
<span data-ttu-id="e5b98-1237">Tous les types de lecteurs réseau ou de partages distants tels que les services de fichiers Azure suivants ne sont **PAS** pris en charge pour les fichiers de base de données :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1237">Any kind of network drives or remote shares like the following Azure file services are **NOT** supported for database files:</span></span>

* <span data-ttu-id="e5b98-1238"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-1238"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="e5b98-1239"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="e5b98-1239"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="e5b98-1240">Si vous utilisez des disques durs virtuels Azure basés sur le stockage d’objets blob de pages Azure, les instructions figurant dans le chapitre [Structure d’un déploiement SGBDR][dbms-guide-2] de ce document s’appliquent également aux déploiements avec la base de données IBM DB2 pour LUW.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1240">If you are using Azure VHDs based on Azure Page BLOB Storage, the statements made in this document in chapter [Structure of a RDBMS Deployment][dbms-guide-2] also apply to deployments with the IBM DB2 for LUW Database.</span></span>

<span data-ttu-id="e5b98-1241">Comme expliqué précédemment dans la partie générale du document, des quotas existent en ce qui concerne le débit d’E/S par seconde pour les disques durs virtuels Azure.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1241">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure VHDs exist.</span></span> <span data-ttu-id="e5b98-1242">Les quotas exacts dépendent du type de machine virtuelle utilisé.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1242">The exact quotas depend on the VM type used.</span></span> <span data-ttu-id="e5b98-1243">Une liste des types de machines virtuelles avec leurs quotas est disponible [ici][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="e5b98-1243">A list of VM types with their quotas can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="e5b98-1244">Tant que le quota actuel d’E/S par seconde par disque est suffisant, il est possible de stocker tous les fichiers de base de données sur un seul disque dur virtuel Azure monté.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1244">As long as the current IOPS quota per disk is sufficient, it is possible to store all the database files on one single mounted Azure VHD.</span></span>

<span data-ttu-id="e5b98-1245">Pour des considérations sur les performances, consultez également, dans les guides d’installation SAP, le chapitre portant sur la sécurité des données et les considérations sur les performances pour les répertoires de base de données.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1245">For performance considerations also refer to chapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="e5b98-1246">Vous pouvez également utiliser des pools de stockage Windows (fonction uniquement disponible dans Windows Server 2012 et versions ultérieures) ou l’entrelacement de Windows pour Windows 2008 R2, comme le décrit le chapitre [RAID logiciel][dbms-guide-2.2] de ce document, afin de créer une unité logique volumineuse sur plusieurs disques durs virtuels montés.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1246">Alternatively, you can use Windows Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 as described in chapter [Software RAID][dbms-guide-2.2] of this document to create one big logical device over multiple mounted VHD disks.</span></span>
<span data-ttu-id="e5b98-1247">Pour les disques contenant les chemins d’accès de stockage DB2 pour vos données SAP et répertoires SAPTMP, vous devez spécifier une taille de secteur de disque physique de 512 Ko.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1247">For the disks containing the DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span> <span data-ttu-id="e5b98-1248">Lorsque vous utilisez des pools de stockage Windows, vous devez créer les pools de stockage manuellement par le biais de l’interface de ligne de commande en utilisant le paramètre « -LogicalSectorSizeDefault ».</span><span class="sxs-lookup"><span data-stu-id="e5b98-1248">When using Windows Storage Pools, you must create the storage pools  manually via command line interface using the parameter „-LogicalSectorSizeDefault“.</span></span> <span data-ttu-id="e5b98-1249">Pour plus d’informations, voir <https://technet.microsoft.com/library/hh848689.aspx>.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1249">For details see <https://technet.microsoft.com/library/hh848689.aspx>.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="e5b98-1250">Sauvegarde/restauration</span><span class="sxs-lookup"><span data-stu-id="e5b98-1250">Backup/Restore</span></span>
<span data-ttu-id="e5b98-1251">La fonctionnalité de sauvegarde/restauration pour IBM DB2 pour LUW est prise en charge de la même façon que sur les systèmes d’exploitation Windows Server et Hyper-V standard.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1251">The backup/restore functionality for IBM DB2 for LUW is supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span>

<span data-ttu-id="e5b98-1252">Vous devez vous assurer que vous disposez d’une stratégie de sauvegarde de base de données valide en place.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1252">You must make sure that you have a valid database backup strategy in place.</span></span>

<span data-ttu-id="e5b98-1253">À l’instar des déploiements sur système nu, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1253">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="e5b98-1254">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles avec jusqu’à 8 threads d’UC maximum.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1254">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to 8 CPU threads.</span></span> <span data-ttu-id="e5b98-1255">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1255">Therefore, one can assume:</span></span>

* <span data-ttu-id="e5b98-1256">Moins il y a de disques durs virtuels utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="e5b98-1256">The fewer the number of VHDs used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="e5b98-1257">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="e5b98-1257">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="e5b98-1258">Moins il y a de cibles (répertoires d’entrelacement, disques durs virtuels) d’écriture de la sauvegarde, plus le débit est faible</span><span class="sxs-lookup"><span data-stu-id="e5b98-1258">The fewer targets (Stripe Directories, VHDs) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="e5b98-1259">Pour augmenter le nombre de cibles d’écriture, il est possible d’utiliser/de combiner deux options selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="e5b98-1259">To increase the number of targets to write to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="e5b98-1260">Entrelacer le volume cible de sauvegarde sur plusieurs disques durs virtuels montés, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="e5b98-1260">Striping the backup target volume over multiple mounted VHDs in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="e5b98-1261">Utiliser plusieurs répertoires cible d’écriture de la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="e5b98-1261">Using more than one target directory to write the backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="e5b98-1262">Haute disponibilité et récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="e5b98-1262">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="e5b98-1263">Microsoft Cluster Server (MSCS) n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1263">Microsoft Cluster Server (MSCS) is not supported.</span></span>

<span data-ttu-id="e5b98-1264">La fonction HADR (haute disponibilité et récupération d’urgence) DB2 est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1264">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="e5b98-1265">Si les machines virtuelles de la configuration haute disponibilité disposent de la résolution de noms de travail, l’installation dans Azure ne diffère pas d’une installation effectuée en local.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1265">If the virtual machines of the HA configuration have working name resolution, the setup in Azure will not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="e5b98-1266">Il est déconseillé de se fier uniquement à la résolution IP.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1266">It is not recommended to rely on IP resolution only.</span></span>

<span data-ttu-id="e5b98-1267">N’utilisez pas la géoréplication Azure Store.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1267">Do not use Azure Store Geo-Replication.</span></span> <span data-ttu-id="e5b98-1268">Pour plus d’informations, consultez les chapitres [Stockage Microsoft Azure][dbms-guide-2.3] et [Haute disponibilité et récupération d’urgence avec les machines virtuelles Azure][dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1268">For further information, refer to chapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="e5b98-1269">Autres</span><span class="sxs-lookup"><span data-stu-id="e5b98-1269">Other</span></span>
<span data-ttu-id="e5b98-1270">Tous les autres sujets généraux, notamment les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent avec IBM DB2 pour LUW comme décrit dans les trois premiers chapitres dans ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="e5b98-1270">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span>

<span data-ttu-id="e5b98-1271">Voir également le chapitre [Résumé – SQL Server général pour SAP sur Azure][dbms-guide-5.8].</span><span class="sxs-lookup"><span data-stu-id="e5b98-1271">Also refer to chapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>
