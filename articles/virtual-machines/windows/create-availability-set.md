---
title: "définie des aaaCreate une disponibilité de la machine virtuelle dans Azure | Documents Microsoft"
description: "Découvrez comment : définir toocreate une disponibilité managée ou non managé de disponibilité définies pour vos machines virtuelles à l’aide d’Azure PowerShell ou hello portail dans le modèle de déploiement du Gestionnaire de ressources hello."
keywords: "groupe à haute disponibilité"
services: virtual-machines-windows
documentationcenter: 
author: cynthn
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: a3db8659-ace8-4e78-8b8c-1e75c04c042c
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 02/06/2017
ms.author: cynthn
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: eadcdfcd28bb2fa21a4647f207b390c33e022ef1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="increase-vm-availability-by-creating-an-azure-availability-set"></a><span data-ttu-id="d24ca-104">Augmenter la disponibilité des machines virtuelles en créant un groupe à haute disponibilité Azure</span><span class="sxs-lookup"><span data-stu-id="d24ca-104">Increase VM availability by creating an Azure availability set</span></span> 
<span data-ttu-id="d24ca-105">Haute disponibilité fournit application tooyour de redondance.</span><span class="sxs-lookup"><span data-stu-id="d24ca-105">Availability sets provide redundancy tooyour application.</span></span> <span data-ttu-id="d24ca-106">Nous vous recommandons de regrouper au moins deux machines virtuelles dans un groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d24ca-106">We recommend that you group two or more virtual machines in an availability set.</span></span> <span data-ttu-id="d24ca-107">Cette configuration garantit que pendant un événement de maintenance planifiée ou non, au moins un ordinateur virtuel sera disponible et satisfait hello 99,95 % contrat SLA Azure.</span><span class="sxs-lookup"><span data-stu-id="d24ca-107">This configuration ensures that during either a planned or unplanned maintenance event, at least one virtual machine will be available and meet hello 99.95% Azure SLA.</span></span> <span data-ttu-id="d24ca-108">Pour plus d’informations, consultez hello [SLA pour les Machines virtuelles](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="d24ca-108">For more information, see hello [SLA for Virtual Machines](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d24ca-109">Machines virtuelles doivent être créés dans hello même groupe de ressources que hello à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d24ca-109">VMs must be created in hello same resource group as hello availability set.</span></span>
> 

<span data-ttu-id="d24ca-110">Si vous souhaitez que votre partie de toobe de machine virtuelle d’un ensemble de disponibilité, vous avez besoin de disponibilité de hello toocreate définir premier ou lorsque vous créez votre première machine virtuelle dans le jeu de hello.</span><span class="sxs-lookup"><span data-stu-id="d24ca-110">If you want your VM toobe part of an availability set, you need toocreate hello availability set first or while you are creating your first VM in hello set.</span></span> <span data-ttu-id="d24ca-111">Si votre machine virtuelle utilise des disques gérés, hello à haute disponibilité doit être créé comme un ensemble de gestion de la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d24ca-111">If your VM will be using Managed Disks, hello availability set must be created as a managed availability set.</span></span>

<span data-ttu-id="d24ca-112">Pour plus d’informations sur la création et à l’aide de la haute disponibilité, consultez [gérer la disponibilité hello des machines virtuelles](manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d24ca-112">For more information about creating and using availability sets, see [Manage hello availability of virtual machines](manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="use-hello-portal-toocreate-an-availability-set-before-creating-your-vms"></a><span data-ttu-id="d24ca-113">Utilisez toocreate de portail hello un groupe à haute disponibilité avant de créer vos machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="d24ca-113">Use hello portal toocreate an availability set before creating your VMs</span></span>
1. <span data-ttu-id="d24ca-114">Dans le menu du hub hello, cliquez sur **Parcourir** et sélectionnez **à haute disponibilité**.</span><span class="sxs-lookup"><span data-stu-id="d24ca-114">In hello hub menu, click **Browse** and select **Availability sets**.</span></span>
2. <span data-ttu-id="d24ca-115">Sur hello **panneau à haute disponibilité**, cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="d24ca-115">On hello **Availability sets blade**, click **Add**.</span></span>
   
    ![Capture d’écran hello ajouter un bouton pour créer un nouvel ensemble de disponibilité.](./media/create-availability-set/add-availability-set.png)
3. <span data-ttu-id="d24ca-117">Sur hello **créer le groupe à haute disponibilité** panneau, les informations de hello complète pour votre jeu.</span><span class="sxs-lookup"><span data-stu-id="d24ca-117">On hello **Create availability set** blade, complete hello information for your set.</span></span>
   
    ![Capture d’écran qu’affiche hello les informations que vous devez la disponibilité de hello tooenter toocreate définie.](./media/create-availability-set/create-availability-set.png)
   
   * <span data-ttu-id="d24ca-119">**Nom** -nom de hello doit comprendre les caractères de 1 à 80 constitués de chiffres, des lettres, des points, des traits de soulignement et des tirets.</span><span class="sxs-lookup"><span data-stu-id="d24ca-119">**Name** - hello name should be 1-80 characters made up of numbers, letters, periods, underscores and dashes.</span></span> <span data-ttu-id="d24ca-120">Hello premier caractère doit être une lettre ou un chiffre.</span><span class="sxs-lookup"><span data-stu-id="d24ca-120">hello first character must be a letter or number.</span></span> <span data-ttu-id="d24ca-121">dernier caractère de Hello doit être une lettre, un nombre ou un trait de soulignement.</span><span class="sxs-lookup"><span data-stu-id="d24ca-121">hello last character must be a letter, number or underscore.</span></span>
   * <span data-ttu-id="d24ca-122">**Domaines d’erreur** -domaines d’erreur définissent groupe hello d’ordinateurs virtuels qui partagent un commun power source et le commutateur réseau.</span><span class="sxs-lookup"><span data-stu-id="d24ca-122">**Fault domains** - fault domains define hello group of virtual machines that share a common power source and network switch.</span></span> <span data-ttu-id="d24ca-123">Par défaut, les machines virtuelles de hello sont séparées à travers des domaines d’erreur toothree et peuvent être modifiée toobetween 1 et 3.</span><span class="sxs-lookup"><span data-stu-id="d24ca-123">By default, hello VMs  are separated across up toothree fault domains and can be changed toobetween 1 and 3.</span></span>
   * <span data-ttu-id="d24ca-124">**Mettre à jour des domaines** - cinq domaines de mise à jour sont attribuées par défaut et peut avoir la valeur toobetween 1 et 20.</span><span class="sxs-lookup"><span data-stu-id="d24ca-124">**Update domains** -  five update domains are assigned by default and this can be set toobetween 1 and 20.</span></span> <span data-ttu-id="d24ca-125">Indiquent les domaines de mise à jour des ordinateurs virtuels et le matériel physique sous-jacent qui peut être redémarré à hello même temps.</span><span class="sxs-lookup"><span data-stu-id="d24ca-125">Update domains indicate groups of virtual machines and underlying physical hardware that can be rebooted at hello same time.</span></span> <span data-ttu-id="d24ca-126">Par exemple, si nous spécifions cinq mises à jour seront placés dans des domaines, lorsque plus de cinq ordinateurs virtuels sont configurés dans un seul jeu de disponibilité, les machines virtuelles sixième hello hello même domaine de mise à jour en tant que machine virtuelle de la première hello, hello septième dans hello même ID en tant que deuxième machine virtuelle de hello et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="d24ca-126">For example, if we specify five update domains, when more than five virtual machines are configured within a single Availability Set, hello sixth virtual machine will be placed into hello same update domain as hello first virtual machine, hello seventh in hello same UD as hello second virtual machine, and so on.</span></span> <span data-ttu-id="d24ca-127">commande Hello de redémarrages de hello n’est peut-être pas séquentiel, mais une mise à jour qu’un seul domaine redémarrera à la fois.</span><span class="sxs-lookup"><span data-stu-id="d24ca-127">hello order of hello reboots may not be sequential, but only one update domain will be rebooted at a time.</span></span>
   * <span data-ttu-id="d24ca-128">**Abonnement** -sélectionnez hello toouse d’abonnement si vous avez plusieurs.</span><span class="sxs-lookup"><span data-stu-id="d24ca-128">**Subscription** - select hello subscription toouse if you have more than one.</span></span>
   * <span data-ttu-id="d24ca-129">**Groupe de ressources** -sélectionnez un groupe de ressources existant en cliquant sur la flèche de hello et un groupe de ressources dans hello liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="d24ca-129">**Resource group** - select an existing resource group by clicking hello arrow and selecting a resource group from hello drop down.</span></span> <span data-ttu-id="d24ca-130">Vous pouvez également créer un nouveau groupe de ressources en entrant un nom.</span><span class="sxs-lookup"><span data-stu-id="d24ca-130">You can also create a new resource group by typing in a name.</span></span> <span data-ttu-id="d24ca-131">Hello nom peut contenir les hello les caractères suivants : lettres, de nombres, des points, des tirets, des traits de soulignement et lors de l’ouverture ou parenthèse fermante.</span><span class="sxs-lookup"><span data-stu-id="d24ca-131">hello name can contain any of hello following characters: letters, numbers, periods, dashes, underscores and opening or closing parenthesis.</span></span> <span data-ttu-id="d24ca-132">nom de Hello ne peut pas se terminer par un point.</span><span class="sxs-lookup"><span data-stu-id="d24ca-132">hello name cannot end in a period.</span></span> <span data-ttu-id="d24ca-133">Tous les hello machines virtuelles dans le groupe de disponibilité hello doivent toobe créé dans hello même groupe de ressources en tant que groupe à haute disponibilité hello.</span><span class="sxs-lookup"><span data-stu-id="d24ca-133">All of hello VMs in hello availability group need toobe created in hello same resource group as hello availability set.</span></span>
   * <span data-ttu-id="d24ca-134">**Emplacement** -sélectionner un emplacement dans la déroulante hello.</span><span class="sxs-lookup"><span data-stu-id="d24ca-134">**Location** - select a location from hello drop-down.</span></span>
   * <span data-ttu-id="d24ca-135">**Managed** : sélectionnez *Oui* toocreate une disponibilité managée définie toouse avec des machines virtuelles qui utilisent des disques gérés pour le stockage.</span><span class="sxs-lookup"><span data-stu-id="d24ca-135">**Managed** - select *Yes* toocreate a managed availability set toouse with VMs that use Managed Disks for storage.</span></span> <span data-ttu-id="d24ca-136">Sélectionnez **non** si hello machines virtuelles qui seront dans l’ensemble de hello utiliser des disques non managés dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d24ca-136">Select **No** if hello VMs that will be in hello set use unmanaged disks in a storage account.</span></span>
   
4. <span data-ttu-id="d24ca-137">Lorsque vous avez terminé d’entrer des informations hello, cliquez sur **créer**.</span><span class="sxs-lookup"><span data-stu-id="d24ca-137">When you are done entering hello information, click **Create**.</span></span> 

## <a name="use-hello-portal-toocreate-a-virtual-machine-and-an-availability-set-at-hello-same-time"></a><span data-ttu-id="d24ca-138">Utilisez hello portail toocreate est un ordinateur virtuel et une disponibilité de définir à hello même temps</span><span class="sxs-lookup"><span data-stu-id="d24ca-138">Use hello portal toocreate a virtual machine and an availability set at hello same time</span></span>
<span data-ttu-id="d24ca-139">Si vous créez une machine virtuelle à l’aide du portail de hello, vous pouvez également créer un nouveau groupe à haute disponibilité pour hello VM pendant que vous créez hello première machine virtuelle dans le jeu de hello.</span><span class="sxs-lookup"><span data-stu-id="d24ca-139">If you are creating a new VM using hello portal, you can also create a new availability set for hello VM while you create hello first VM in hello set.</span></span> <span data-ttu-id="d24ca-140">Si vous choisissez des disques gérés toouse pour votre machine virtuelle, un ensemble de gestion de la disponibilité est créé.</span><span class="sxs-lookup"><span data-stu-id="d24ca-140">If you choose toouse Managed Disks for your VM, a managed availability set will be created.</span></span>

![Capture d’écran qui affiche les processus hello pour la création d’un nouveau groupe à haute disponibilité pendant que vous créez hello machine virtuelle.](./media/create-availability-set/new-vm-avail-set.png)

## <a name="add-a-new-vm-tooan-existing-availability-set-in-hello-portal"></a><span data-ttu-id="d24ca-142">Ajouter une nouvelle machine virtuelle tooan existant groupe à haute disponibilité dans le portail de hello</span><span class="sxs-lookup"><span data-stu-id="d24ca-142">Add a new VM tooan existing availability set in hello portal</span></span>
<span data-ttu-id="d24ca-143">Pour chaque VM supplémentaire que vous créez doit appartient au jeu de hello, vérifiez que vous créez dans hello même **groupe de ressources** et puis sélectionnez hello haute disponibilité existante à l’étape 3.</span><span class="sxs-lookup"><span data-stu-id="d24ca-143">For each additional VM that you create that should belong in hello set, make sure that you create it in hello same **resource group** and then select hello existing availability set in Step 3.</span></span> 

![Capture d’écran montrant comment tooselect un groupe de disponibilité défini toouse pour votre machine virtuelle.](./media/create-availability-set/add-vm-to-set.png)

## <a name="use-powershell-toocreate-an-availability-set"></a><span data-ttu-id="d24ca-145">Utilisez PowerShell toocreate disponibilité définie</span><span class="sxs-lookup"><span data-stu-id="d24ca-145">Use PowerShell toocreate an availability set</span></span>
<span data-ttu-id="d24ca-146">Cet exemple crée un groupe à haute disponibilité nommée **myAvailabilitySet** Bonjour **myResourceGroup** groupe de ressources dans hello **ouest des États-Unis** emplacement.</span><span class="sxs-lookup"><span data-stu-id="d24ca-146">This example creates an availability set named **myAvailabilitySet** in hello **myResourceGroup** resource group in hello **West US** location.</span></span> <span data-ttu-id="d24ca-147">Cette action doit toobe effectuée avant que vous créez hello première machine virtuelle qui figurera dans le jeu de hello.</span><span class="sxs-lookup"><span data-stu-id="d24ca-147">This needs toobe done before you create hello first VM that will be in hello set.</span></span>

<span data-ttu-id="d24ca-148">Avant de commencer, assurez-vous d’avoir hello dernière version du module PowerShell de AzureRM.Compute de hello.</span><span class="sxs-lookup"><span data-stu-id="d24ca-148">Before you begin, make sure that you have hello latest version of hello AzureRM.Compute PowerShell module.</span></span> <span data-ttu-id="d24ca-149">Exécutez hello après la commande tooinstall il.</span><span class="sxs-lookup"><span data-stu-id="d24ca-149">Run hello following command tooinstall it.</span></span>

```powershell
Install-Module AzureRM.Compute -RequiredVersion 2.6.0
```
<span data-ttu-id="d24ca-150">Pour plus d’informations, consultez la page relative au [contrôle de version d’Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="d24ca-150">For more information, see [Azure PowerShell Versioning](/powershell/azure/overview).</span></span>


<span data-ttu-id="d24ca-151">Si vous utilisez des disques gérés pour vos machines virtuelles, tapez :</span><span class="sxs-lookup"><span data-stu-id="d24ca-151">If you are using managed disks for your VMs, type:</span></span>

```powershell
    New-AzureRmAvailabilitySet -ResourceGroupName "myResourceGroup" '
    -Name "myAvailabilitySet" -Location "West US" -managed
```

<span data-ttu-id="d24ca-152">Si vous utilisez vos propres comptes de stockage pour vos machines virtuelles, tapez :</span><span class="sxs-lookup"><span data-stu-id="d24ca-152">If you are using your own storage accounts for your VMs, type:</span></span>

```powershell
    New-AzureRmAvailabilitySet -ResourceGroupName "myResourceGroup" '
    -Name "myAvailabilitySet" -Location "West US" 
```

<span data-ttu-id="d24ca-153">Pour plus d’informations, consultez [New-AzureRmAvailabilitySet](/powershell/module/azurerm.compute/new-azurermavailabilityset).</span><span class="sxs-lookup"><span data-stu-id="d24ca-153">For more information, see [New-AzureRmAvailabilitySet](/powershell/module/azurerm.compute/new-azurermavailabilityset).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="d24ca-154">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="d24ca-154">Troubleshooting</span></span>
* <span data-ttu-id="d24ca-155">Lorsque vous créez une machine virtuelle, si vous le souhaitez à haute disponibilité hello n’est pas dans la liste déroulante de hello dans le portail de hello peut avoir créé dans un autre groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="d24ca-155">When you create a VM, if hello availability set you want isn't in hello drop-down list in hello portal you may have created it in a different resource group.</span></span> <span data-ttu-id="d24ca-156">Si vous ne connaissez pas le groupe de ressources hello pour votre disponibilité définie, toohello hub menu Aller à et cliquez sur Parcourir > toosee une liste de votre disponibilité jeux et les groupes de ressources auquel ils appartiennent à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d24ca-156">If you don't know hello resource group for your availability set, go toohello hub menu and click Browse > Availability sets toosee a list of your availability sets and which resource groups they belong to.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d24ca-157">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="d24ca-157">Next steps</span></span>
<span data-ttu-id="d24ca-158">Ajouter un stockage supplémentaire tooyour machine virtuelle en ajoutant un autre [disque de données](attach-disk-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d24ca-158">Add additional storage tooyour VM by adding an additional [data disk](attach-disk-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

