---
title: "aaaDesired Configuration d’état pour une vue d’ensemble de Azure | Documents Microsoft"
description: "Vue d’ensemble pour l’utilisation du Gestionnaire d’extensions Microsoft Azure hello pour la Configuration d’état souhaité PowerShell. Cela inclut les conditions préalables, l’architecture, les applets de commande, etc."
services: virtual-machines-windows
documentationcenter: 
author: zjalexander
manager: timlt
editor: 
tags: azure-service-management,azure-resource-manager
keywords: 
ms.assetid: bbacbc93-1e7b-4611-a3ec-e3320641f9ba
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: na
ms.date: 01/09/2017
ms.author: zachal
ms.openlocfilehash: b0337a2f1124f35e5e40c1478bd7530427e59d44
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="introduction-toohello-azure-desired-state-configuration-extension-handler"></a><span data-ttu-id="cf075-104">Gestionnaire d’extensions Azure DSC introduction toohello</span><span class="sxs-lookup"><span data-stu-id="cf075-104">Introduction toohello Azure Desired State Configuration extension handler</span></span>
[!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-both-include.md)]

<span data-ttu-id="cf075-105">Hello Agent de machine virtuelle Azure et les Extensions associées font partie de hello Services d’Infrastructure Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="cf075-105">hello Azure VM Agent and associated Extensions are part of hello Microsoft Azure Infrastructure Services.</span></span> <span data-ttu-id="cf075-106">Extensions de machine virtuelle sont des composants logiciels étendant les fonctionnalités de machine virtuelle de hello et simplifient plusieurs opérations de gestion de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cf075-106">VM Extensions are software components that extend hello VM functionality and simplify various VM management operations.</span></span> <span data-ttu-id="cf075-107">Par exemple, hello extension VMAccess peut être utilisé tooreset un mot de passe administrateur ou hello Script personnalisé peut être utilisé tooexecute un script sur hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cf075-107">For example, hello VMAccess extension can be used tooreset an administrator's password, or hello Custom Script extension can be used tooexecute a script on hello VM.</span></span>

<span data-ttu-id="cf075-108">Cet article présente hello Extension de Configuration d’état souhaité (DSC) PowerShell pour les machines virtuelles Azure dans le cadre de hello Kit de développement logiciel Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cf075-108">This article introduces hello PowerShell Desired State Configuration (DSC) Extension for Azure VMs as part of hello Azure PowerShell SDK.</span></span> <span data-ttu-id="cf075-109">Vous pouvez utiliser les nouvelles applets de commande tooupload et appliquer une configuration DSC PowerShell sur une machine virtuelle de Azure activée avec hello extension PowerShell DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-109">You can use new cmdlets tooupload and apply a PowerShell DSC configuration on an Azure VM enabled with hello PowerShell DSC extension.</span></span> <span data-ttu-id="cf075-110">appels d’extension PowerShell DSC Hello en hello tooenact de DSC PowerShell a reçu la configuration DSC sur hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cf075-110">hello PowerShell DSC extension calls into PowerShell DSC tooenact hello received DSC configuration on hello VM.</span></span> <span data-ttu-id="cf075-111">Cette fonctionnalité est également disponible via hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="cf075-111">This functionality is also available through hello Azure portal.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="cf075-112">Composants requis</span><span class="sxs-lookup"><span data-stu-id="cf075-112">Prerequisites</span></span>
<span data-ttu-id="cf075-113">**Ordinateur local** toointeract avec hello extension de machine virtuelle Azure, vous devez toouse soit hello portail Azure hello du Kit de développement logiciel Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cf075-113">**Local machine** toointeract with hello Azure VM extension, you need toouse either hello Azure portal or hello Azure PowerShell SDK.</span></span> 

<span data-ttu-id="cf075-114">**L’Agent invité** hello machine virtuelle Azure qui est configuré par configuration de hello DSC doit toobe un système d’exploitation qui prend en charge de Windows Management Framework (WMF) 4.0 ou 5.0.</span><span class="sxs-lookup"><span data-stu-id="cf075-114">**Guest Agent** hello Azure VM that is configured by hello DSC configuration needs toobe an OS that supports either Windows Management Framework (WMF) 4.0 or 5.0.</span></span> <span data-ttu-id="cf075-115">la liste complète des versions de système d’exploitation pris en charge Hello trouverez hello [historique de Version d’Extension DSC](https://blogs.msdn.microsoft.com/powershell/2014/11/20/release-history-for-the-azure-dsc-extension/).</span><span class="sxs-lookup"><span data-stu-id="cf075-115">hello full list of supported OS versions can be found at hello [DSC Extension Version History](https://blogs.msdn.microsoft.com/powershell/2014/11/20/release-history-for-the-azure-dsc-extension/).</span></span>

## <a name="terms-and-concepts"></a><span data-ttu-id="cf075-116">Termes et concepts</span><span class="sxs-lookup"><span data-stu-id="cf075-116">Terms and concepts</span></span>
<span data-ttu-id="cf075-117">Ce guide suppose que vous êtes familiarisé avec hello suivant concepts :</span><span class="sxs-lookup"><span data-stu-id="cf075-117">This guide presumes familiarity with hello following concepts:</span></span>

<span data-ttu-id="cf075-118">Configuration : document de configuration DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-118">Configuration - A DSC configuration document.</span></span> 

<span data-ttu-id="cf075-119">Nœud : cible d’une configuration DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-119">Node - A target for a DSC configuration.</span></span> <span data-ttu-id="cf075-120">Dans ce document, « nœud » fait toujours référence tooan machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="cf075-120">In this document, "node" always refers tooan Azure VM.</span></span>

<span data-ttu-id="cf075-121">Données de configuration : fichier .psd1 contenant les données d’environnement d’une configuration.</span><span class="sxs-lookup"><span data-stu-id="cf075-121">Configuration Data - A .psd1 file containing environmental data for a configuration</span></span>

## <a name="architectural-overview"></a><span data-ttu-id="cf075-122">Présentation de l’architecture</span><span class="sxs-lookup"><span data-stu-id="cf075-122">Architectural overview</span></span>
<span data-ttu-id="cf075-123">Hello extensions Azure DSC utilise toodeliver de framework hello Agent de machine virtuelle Azure, les promulgue et sur les configurations DSC en cours d’exécution sur des machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="cf075-123">hello Azure DSC extension uses hello Azure VM Agent framework toodeliver, enact, and report on DSC configurations running on Azure VMs.</span></span> <span data-ttu-id="cf075-124">Hello extension DSC attend un fichier .zip contenant au moins un document de configuration, et un ensemble de paramètres fournis par le biais hello Kit de développement logiciel Azure PowerShell ou hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="cf075-124">hello DSC extension expects a .zip file containing at least a configuration document, and a set of parameters provided either through hello Azure PowerShell SDK or through hello Azure portal.</span></span>

<span data-ttu-id="cf075-125">Lors de l’extension de hello est appelée pour hello la première fois, il exécute un processus d’installation.</span><span class="sxs-lookup"><span data-stu-id="cf075-125">When hello extension is called for hello first time, it runs an installation process.</span></span> <span data-ttu-id="cf075-126">Ce processus installe une version de hello Windows Management Framework (WMF) à l’aide de hello suivant logique :</span><span class="sxs-lookup"><span data-stu-id="cf075-126">This process installs a version of hello Windows Management Framework (WMF) using hello following logic:</span></span>

1. <span data-ttu-id="cf075-127">Si hello système d’exploitation de la machine virtuelle Azure est Windows Server 2016, aucune action n’est effectuée.</span><span class="sxs-lookup"><span data-stu-id="cf075-127">If hello Azure VM OS is Windows Server 2016, no action is taken.</span></span> <span data-ttu-id="cf075-128">Windows Server 2016 a déjà la version la plus récente de PowerShell installée hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-128">Windows Server 2016 already has hello latest version of PowerShell installed.</span></span>
2. <span data-ttu-id="cf075-129">Si hello `wmfVersion` propriété est spécifiée, cette version de hello WMF est installée, sauf si elle est incompatible avec du système d’exploitation la machine virtuelle hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-129">If hello `wmfVersion` property is specified, that version of hello WMF is installed unless it is incompatible with hello VM's OS.</span></span>
3. <span data-ttu-id="cf075-130">Si aucun `wmfVersion` propriété est spécifiée, hello version plus récente applicable de hello WMF est installée.</span><span class="sxs-lookup"><span data-stu-id="cf075-130">If no `wmfVersion` property is specified, hello latest applicable version of hello WMF is installed.</span></span>

<span data-ttu-id="cf075-131">Installation de hello WMF requiert un redémarrage.</span><span class="sxs-lookup"><span data-stu-id="cf075-131">Installation of hello WMF requires a reboot.</span></span> <span data-ttu-id="cf075-132">Après le redémarrage, extension de hello télécharge le fichier .zip de hello spécifié dans hello `modulesUrl` propriété.</span><span class="sxs-lookup"><span data-stu-id="cf075-132">After reboot, hello extension downloads hello .zip file specified in hello `modulesUrl` property.</span></span> <span data-ttu-id="cf075-133">Si cet emplacement est dans le stockage blob Azure, un jeton SAS peut être spécifié dans hello `sasToken` propriété tooaccess hello fichier.</span><span class="sxs-lookup"><span data-stu-id="cf075-133">If this location is in Azure blob storage, a SAS token can be specified in hello `sasToken` property tooaccess hello file.</span></span> <span data-ttu-id="cf075-134">Une fois hello .zip est téléchargé et décompressé, hello fonction de configuration définie dans `configurationFunction` est exécuté fichier MOF de hello toogenerate.</span><span class="sxs-lookup"><span data-stu-id="cf075-134">After hello .zip is downloaded and unpacked, hello configuration function defined in `configurationFunction` is run toogenerate hello MOF file.</span></span> <span data-ttu-id="cf075-135">extension de Hello exécute ensuite `Start-DscConfiguration -Force` hello généré dans le fichier MOF.</span><span class="sxs-lookup"><span data-stu-id="cf075-135">hello extension then runs `Start-DscConfiguration -Force` on hello generated MOF file.</span></span> <span data-ttu-id="cf075-136">extension de Hello capture la sortie et l’écrit dans toohello Azure état du canal.</span><span class="sxs-lookup"><span data-stu-id="cf075-136">hello extension captures output and writes it back out toohello Azure Status Channel.</span></span> <span data-ttu-id="cf075-137">À ce stade, hello DSC de façon gère l’analyse et la correction comme d’habitude.</span><span class="sxs-lookup"><span data-stu-id="cf075-137">From this point on, hello DSC LCM handles monitoring and correction as normal.</span></span> 

## <a name="powershell-cmdlets"></a><span data-ttu-id="cf075-138">Applets de commande PowerShell</span><span class="sxs-lookup"><span data-stu-id="cf075-138">PowerShell cmdlets</span></span>
<span data-ttu-id="cf075-139">Applets de commande PowerShell peut être utilisé avec le Gestionnaire de ressources Azure ou hello toopackage de modèle de déploiement classique, publier et surveiller les déploiements d’extension DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-139">PowerShell cmdlets can be used with Azure Resource Manager or hello classic deployment model toopackage, publish, and monitor DSC extension deployments.</span></span> <span data-ttu-id="cf075-140">Hello applets de commande suivantes sont des modules de déploiement classique de hello, mais « Azure » peut être remplacé par modèle de « AzureRm » toouse hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-140">hello following cmdlets listed are hello classic deployment modules, but "Azure" can be replaced with "AzureRm" toouse hello Azure Resource Manager model.</span></span> <span data-ttu-id="cf075-141">Par exemple, `Publish-AzureVMDscConfiguration` utilise hello modèle de déploiement classique, où `Publish-AzureRmVMDscConfiguration` utilise Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-141">For example,  `Publish-AzureVMDscConfiguration` uses hello classic deployment model, where `Publish-AzureRmVMDscConfiguration` uses Azure Resource Manager.</span></span> 

<span data-ttu-id="cf075-142">`Publish-AzureVMDscConfiguration`récupère dans un fichier de configuration, l’analyse pour les ressources DSC dépendantes et crée un fichier .zip contenant hello et configuration de hello de tooenact nécessaires de ressources DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-142">`Publish-AzureVMDscConfiguration` takes in a configuration file, scans it for dependent DSC resources, and creates a .zip file containing hello configuration and DSC resources needed tooenact hello configuration.</span></span> <span data-ttu-id="cf075-143">Il peut également créer le package hello localement à l’aide de hello `-ConfigurationArchivePath` paramètre.</span><span class="sxs-lookup"><span data-stu-id="cf075-143">It can also create hello package locally using hello `-ConfigurationArchivePath` parameter.</span></span> <span data-ttu-id="cf075-144">Sinon, elle publie le stockage d’objets blob hello .zip fichier tooAzure et sécurise à l’aide d’un jeton SAS.</span><span class="sxs-lookup"><span data-stu-id="cf075-144">Otherwise, it publishes hello .zip file tooAzure blob storage and secures it with a SAS token.</span></span>

<span data-ttu-id="cf075-145">fichier .zip de Hello créé par cette applet de commande a un script de configuration .ps1 hello au niveau racine de hello du dossier d’archive hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-145">hello .zip file created by this cmdlet has hello .ps1 configuration script at hello root of hello archive folder.</span></span> <span data-ttu-id="cf075-146">Les ressources ont un dossier de module hello placé dans le dossier d’archive hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-146">Resources have hello module folder placed in hello archive folder.</span></span> 

<span data-ttu-id="cf075-147">`Set-AzureVMDscExtension`injecte les paramètres de hello requis par hello extension PowerShell DSC dans un objet de configuration d’ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="cf075-147">`Set-AzureVMDscExtension` injects hello settings needed by hello PowerShell DSC extension into a VM configuration object.</span></span> <span data-ttu-id="cf075-148">Dans le modèle de déploiement classique de hello, modifications de machine virtuelle hello doivent être appliqué tooan machine virtuelle Azure avec `Update-AzureVM`.</span><span class="sxs-lookup"><span data-stu-id="cf075-148">In hello classic deployment model, hello VM changes must be applied tooan Azure VM with `Update-AzureVM`.</span></span> 

<span data-ttu-id="cf075-149">`Get-AzureVMDscExtension`Récupère l’état de l’extension DSC hello d’une machine virtuelle particulière.</span><span class="sxs-lookup"><span data-stu-id="cf075-149">`Get-AzureVMDscExtension` retrieves hello DSC extension status of a particular VM.</span></span> 

<span data-ttu-id="cf075-150">`Get-AzureVMDscExtensionStatus`Récupère l’état hello de configuration DSC de hello imposée par le Gestionnaire d’extensions DSC hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-150">`Get-AzureVMDscExtensionStatus` retrieves hello status of hello DSC configuration enacted by hello DSC extension handler.</span></span> <span data-ttu-id="cf075-151">Cette action peut être effectuée sur une seule machine virtuelle ou sur un groupe de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="cf075-151">This action can be performed on a single VM, or group of VMs.</span></span>

<span data-ttu-id="cf075-152">`Remove-AzureVMDscExtension`Supprime le Gestionnaire d’extensions hello à partir d’un ordinateur virtuel spécifié.</span><span class="sxs-lookup"><span data-stu-id="cf075-152">`Remove-AzureVMDscExtension` removes hello extension handler from a given virtual machine.</span></span> <span data-ttu-id="cf075-153">Cette applet de commande **pas** supprimer la configuration de hello, désinstaller hello WMF ou modifier les paramètres de hello appliqué sur l’ordinateur virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-153">This cmdlet does **not** remove hello configuration, uninstall hello WMF, or change hello applied settings on hello virtual machine.</span></span> <span data-ttu-id="cf075-154">Il supprime uniquement le Gestionnaire d’extensions hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-154">It only removes hello extension handler.</span></span> 

<span data-ttu-id="cf075-155">**Principales différences dans les applets de commande ASM et Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="cf075-155">**Key differences in ASM and Azure Resource Manager cmdlets**</span></span>

* <span data-ttu-id="cf075-156">Les applets de commande Azure Resource Manager sont synchrones.</span><span class="sxs-lookup"><span data-stu-id="cf075-156">Azure Resource Manager cmdlets are synchronous.</span></span> <span data-ttu-id="cf075-157">alors que les applets de commande ARM sont asynchrones.</span><span class="sxs-lookup"><span data-stu-id="cf075-157">ASM cmdlets are asynchronous.</span></span>
* <span data-ttu-id="cf075-158">Les éléments ResourceGroupName, VMName, ArchiveStorageAccountName, Version et Location sont tous des paramètres requis dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-158">ResourceGroupName, VMName, ArchiveStorageAccountName, Version, and Location are all required parameters in Azure Resource Manager.</span></span>
* <span data-ttu-id="cf075-159">L’élément ArchiveResourceGroupName est un nouveau paramètre facultatif pour Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-159">ArchiveResourceGroupName is a new optional parameter for Azure Resource Manager.</span></span> <span data-ttu-id="cf075-160">Vous pouvez spécifier ce paramètre lorsque votre compte de stockage appartient le groupe de ressources différent tooa que hello une où la machine virtuelle de hello est créé.</span><span class="sxs-lookup"><span data-stu-id="cf075-160">You can specify this parameter when your storage account belongs tooa different resource group than hello one where hello virtual machine is created.</span></span>
* <span data-ttu-id="cf075-161">L’élément ConfigurationArchive est appelé ArchiveBlobName dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-161">ConfigurationArchive is called ArchiveBlobName in Azure Resource Manager</span></span>
* <span data-ttu-id="cf075-162">L’élément ContainerName est appelé ArchiveContainerName dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-162">ContainerName is called ArchiveContainerName in Azure Resource Manager</span></span>
* <span data-ttu-id="cf075-163">L’élément StorageEndpointSuffix est appelé ArchiveStorageEndpointSuffix dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-163">StorageEndpointSuffix is called ArchiveStorageEndpointSuffix in Azure Resource Manager</span></span>
* <span data-ttu-id="cf075-164">commutateur de mise à jour automatique Hello a été ajouté tooAzure tooenable du Gestionnaire de ressources automatique de mise à jour de hello Gestionnaire toohello dernière version de l’extension en tant qu’et lorsqu’il est disponible.</span><span class="sxs-lookup"><span data-stu-id="cf075-164">hello AutoUpdate switch has been added tooAzure Resource Manager tooenable automatic updating of hello extension handler toohello latest version as and when it is available.</span></span> <span data-ttu-id="cf075-165">Notez que ce paramètre a toocause potentielle de hello redémarre sur hello VM lorsqu’une nouvelle version de hello que WMF est libérée.</span><span class="sxs-lookup"><span data-stu-id="cf075-165">Note this parameter has hello potential toocause reboots on hello VM when a new version of hello WMF is released.</span></span> 

## <a name="azure-portal-functionality"></a><span data-ttu-id="cf075-166">Fonctionnalités du portail Azure</span><span class="sxs-lookup"><span data-stu-id="cf075-166">Azure portal functionality</span></span>
<span data-ttu-id="cf075-167">Parcourir tooa machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cf075-167">Browse tooa VM.</span></span> <span data-ttu-id="cf075-168">Sous Paramètres -> Général, cliquez sur Extensions.</span><span class="sxs-lookup"><span data-stu-id="cf075-168">Under Settings -> General click "Extensions."</span></span> <span data-ttu-id="cf075-169">Un volet est créé.</span><span class="sxs-lookup"><span data-stu-id="cf075-169">A new pane is created.</span></span> <span data-ttu-id="cf075-170">Cliquez sur « Ajouter » et sélectionnez PowerShell DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-170">Click "Add" and select PowerShell DSC.</span></span>

<span data-ttu-id="cf075-171">portail de Hello requiert une entrée.</span><span class="sxs-lookup"><span data-stu-id="cf075-171">hello portal needs input.</span></span>
<span data-ttu-id="cf075-172">**Script ou modules de configuration**: ce champ est obligatoire.</span><span class="sxs-lookup"><span data-stu-id="cf075-172">**Configuration Modules or Script**: This field is mandatory.</span></span> <span data-ttu-id="cf075-173">Nécessite un fichier .ps1 contenant un script de configuration ou un fichier .zip avec un script de configuration .ps1 à racine de hello et toutes les ressources dépendantes dans des dossiers de module dans hello .zip.</span><span class="sxs-lookup"><span data-stu-id="cf075-173">Requires a .ps1 file containing a configuration script, or a .zip file with a .ps1 configuration script at hello root, and all dependent resources in module folders within hello .zip.</span></span> <span data-ttu-id="cf075-174">Il peut être créé par hello `Publish-AzureVMDscConfiguration -ConfigurationArchivePath` applet de commande inclus dans hello Kit de développement logiciel Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cf075-174">It can be created with hello `Publish-AzureVMDscConfiguration -ConfigurationArchivePath` cmdlet included in hello Azure PowerShell SDK.</span></span> <span data-ttu-id="cf075-175">fichier .zip de Hello est téléchargé dans votre stockage d’objets blob utilisateur sécurisé par un jeton SAP.</span><span class="sxs-lookup"><span data-stu-id="cf075-175">hello .zip file is uploaded into your user blob storage secured by a SAS token.</span></span> 

<span data-ttu-id="cf075-176">**Fichier PSD1 de données de configuration**: ce champ est facultatif.</span><span class="sxs-lookup"><span data-stu-id="cf075-176">**Configuration Data PSD1 File**: This field is optional.</span></span> <span data-ttu-id="cf075-177">Si votre configuration nécessite un fichier de données de configuration dans .psd1, utilisez cette tooselect champ il puis chargez-le de stockage d’objets blob utilisateur tooyour, où il est sécurisé par un jeton SAP.</span><span class="sxs-lookup"><span data-stu-id="cf075-177">If your configuration requires a configuration data file in .psd1, use this field tooselect it and upload it tooyour user blob storage, where it is secured by a SAS token.</span></span> 

<span data-ttu-id="cf075-178">**Nom de configuration qualifié du module**: les fichiers .ps1 peuvent avoir plusieurs fonctions de configuration.</span><span class="sxs-lookup"><span data-stu-id="cf075-178">**Module-Qualified Name of Configuration**: .ps1 files can have multiple configuration functions.</span></span> <span data-ttu-id="cf075-179">Entrez les nom hello de hello configuration .ps1 script de suivi d’un '\' et le nom de hello de fonction de configuration hello.</span><span class="sxs-lookup"><span data-stu-id="cf075-179">Enter hello name of hello configuration .ps1 script followed by a  '\' and hello name of hello configuration function.</span></span> <span data-ttu-id="cf075-180">Par exemple, si votre script .ps1 a hello nom « configuration.ps1 », et la configuration de hello est « IisInstall », entrez :`configuration.ps1\IisInstall`</span><span class="sxs-lookup"><span data-stu-id="cf075-180">For example, if your .ps1 script has hello name "configuration.ps1", and hello configuration is "IisInstall", you would enter: `configuration.ps1\IisInstall`</span></span>

<span data-ttu-id="cf075-181">**Arguments de la configuration**: si la fonction de configuration hello accepte des arguments, les entrer ici au format de hello `argumentName1=value1,argumentName2=value2`.</span><span class="sxs-lookup"><span data-stu-id="cf075-181">**Configuration Arguments**: If hello configuration function takes arguments, enter them in here in hello format `argumentName1=value1,argumentName2=value2`.</span></span> <span data-ttu-id="cf075-182">Il s’agit d’un format d’argument de configuration différent de celui qui est accepté via les applets de commande PowerShell ou les modèles Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cf075-182">Note this format is a different format than how configuration arguments are accepted through PowerShell cmdlets or Resource Manager templates.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="cf075-183">Prise en main</span><span class="sxs-lookup"><span data-stu-id="cf075-183">Getting started</span></span>
<span data-ttu-id="cf075-184">Hello extensions Azure DSC prend dans les documents de configuration DSC et les applique sur les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="cf075-184">hello Azure DSC extension takes in DSC configuration documents and enacts them on Azure VMs.</span></span> <span data-ttu-id="cf075-185">Voici un exemple simple de configuration.</span><span class="sxs-lookup"><span data-stu-id="cf075-185">A simple example of a configuration follows.</span></span> <span data-ttu-id="cf075-186">Enregistrez-le en local, sous le nom « IisInstall.ps1 » :</span><span class="sxs-lookup"><span data-stu-id="cf075-186">Save it locally as "IisInstall.ps1":</span></span>

```powershell
configuration IISInstall 
{ 
    node "localhost"
    { 
        WindowsFeature IIS 
        { 
            Ensure = "Present" 
            Name = "Web-Server"                       
        } 
    } 
}
```

<span data-ttu-id="cf075-187">Hello suivant les étapes sur place hello IisInstall.ps1 script de hello spécifié de machine virtuelle, exécuter la configuration de hello et rapport sur l’état.</span><span class="sxs-lookup"><span data-stu-id="cf075-187">hello following steps place hello IisInstall.ps1 script on hello specified VM, execute hello configuration, and report back on status.</span></span>
###<a name="classic-model"></a><span data-ttu-id="cf075-188">Modèle classique</span><span class="sxs-lookup"><span data-stu-id="cf075-188">Classic model</span></span>
```powershell
#Azure PowerShell cmdlets are required
Import-Module Azure

#Use an existing Azure Virtual Machine, 'DscDemo1'
$demoVM = Get-AzureVM DscDemo1

#Publish hello configuration script into user storage.
Publish-AzureVMDscConfiguration -ConfigurationPath ".\IisInstall.ps1" -StorageContext $storageContext -Verbose -Force

#Set hello VM toorun hello DSC configuration
Set-AzureVMDscExtension -VM $demoVM -ConfigurationArchive "IisInstall.ps1.zip" -StorageContext $storageContext -ConfigurationName "IisInstall" -Verbose

#Update hello configuration of an Azure Virtual Machine
$demoVM | Update-AzureVM -Verbose

#check on status
Get-AzureVMDscExtensionStatus -VM $demovm -Verbose
```
###<a name="azure-resource-manager-model"></a><span data-ttu-id="cf075-189">Modèle Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="cf075-189">Azure Resource Manager model</span></span>

```powershell
$resourceGroup = "dscVmDemo"
$location = "westus"
$vmName = "myVM"
$storageName = "demostorage"
#Publish hello configuration script into user storage
Publish-AzureRmVMDscConfiguration -ConfigurationPath .\iisInstall.ps1 -ResourceGroupName $resourceGroup -StorageAccountName $storageName -force
#Set hello VM toorun hello DSC configuration
Set-AzureRmVmDscExtension -Version 2.21 -ResourceGroupName $resourceGroup -VMName $vmName -ArchiveStorageAccountName $storageName -ArchiveBlobName iisInstall.ps1.zip -AutoUpdate:$true -ConfigurationName "IISInstall"

```

## <a name="logging"></a><span data-ttu-id="cf075-190">Journalisation</span><span class="sxs-lookup"><span data-stu-id="cf075-190">Logging</span></span>
<span data-ttu-id="cf075-191">Les journaux sont placés dans le répertoire suivant :</span><span class="sxs-lookup"><span data-stu-id="cf075-191">Logs are placed in:</span></span>

<span data-ttu-id="cf075-192">C:\WindowsAzure\Logs\Plugins\Microsoft.Powershell.DSC\[numéro de version]</span><span class="sxs-lookup"><span data-stu-id="cf075-192">C:\WindowsAzure\Logs\Plugins\Microsoft.Powershell.DSC\[Version Number]</span></span>

## <a name="next-steps"></a><span data-ttu-id="cf075-193">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cf075-193">Next steps</span></span>
<span data-ttu-id="cf075-194">Pour plus d’informations sur PowerShell DSC, [visitez le centre de documentation PowerShell hello](https://msdn.microsoft.com/powershell/dsc/overview).</span><span class="sxs-lookup"><span data-stu-id="cf075-194">For more information about PowerShell DSC, [visit hello PowerShell documentation center](https://msdn.microsoft.com/powershell/dsc/overview).</span></span> 

<span data-ttu-id="cf075-195">Examinez hello [modèle Azure Resource Manager pour l’extension de hello DSC](extensions-dsc-template.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="cf075-195">Examine hello [Azure Resource Manager template for hello DSC extension](extensions-dsc-template.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> 

<span data-ttu-id="cf075-196">Vous pouvez gérer avec PowerShell DSC, des fonctionnalités supplémentaires toofind [parcourir la galerie PowerShell de hello](https://www.powershellgallery.com/packages?q=DscResource&x=0&y=0) pour plus de ressources DSC.</span><span class="sxs-lookup"><span data-stu-id="cf075-196">toofind additional functionality you can manage with PowerShell DSC, [browse hello PowerShell gallery](https://www.powershellgallery.com/packages?q=DscResource&x=0&y=0) for more DSC resources.</span></span>

<span data-ttu-id="cf075-197">Pour plus d’informations sur le passage de paramètres sensibles dans des configurations, consultez [gérer les informations d’identification en toute sécurité avec le Gestionnaire d’extensions hello DSC](extensions-dsc-credentials.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="cf075-197">For details on passing sensitive parameters into configurations, see [Manage credentials securely with hello DSC extension handler](extensions-dsc-credentials.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

