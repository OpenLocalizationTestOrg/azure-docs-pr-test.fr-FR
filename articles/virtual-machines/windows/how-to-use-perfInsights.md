---
title: "Utilisation de PerfInsights dans Microsoft Azure | Microsoft Docs"
description: "Découvrez comment utiliser PerfInsights pour résoudre les problèmes de performances liés aux machines virtuelles Windows."
services: virtual-machines-windows'
documentationcenter: 
author: genlin
manager: cshepard
editor: na
tags: 
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 07/18/2017
ms.author: genli
ms.openlocfilehash: f22bd42302b96118dba0d4e5e387c6798a0b8777
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="how-to-use-perfinsights"></a><span data-ttu-id="4fb8f-103">Utilisation de PerfInsights</span><span class="sxs-lookup"><span data-stu-id="4fb8f-103">How to use PerfInsights</span></span> 

<span data-ttu-id="4fb8f-104">[PerfInsights](http://aka.ms/perfinsightsdownload) est un script automatisé qui collecte des informations de diagnostic utiles, exécute des charges d’E/S et fournit un rapport d’analyse afin de faciliter la résolution de problèmes de performances liés aux machines virtuelles Windows dans Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-104">[PerfInsights](http://aka.ms/perfinsightsdownload) is an automated script that collects useful diagnostic information, runs I/O stress loads, and provides an analysis report to help troubleshoot Windows VM performance problems in Microsoft Azure.</span></span> 

<span data-ttu-id="4fb8f-105">Nous vous recommandons d’exécuter ce script avant d’ouvrir un ticket de support Microsoft pour les problèmes de performances liés aux machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-105">We recommend that you run this script before you open a Support ticket with Microsoft for VM performance issues.</span></span>

## <a name="supported-troubleshooting-scenarios"></a><span data-ttu-id="4fb8f-106">Scénarios de résolution des problèmes pris en charge</span><span class="sxs-lookup"><span data-stu-id="4fb8f-106">Supported troubleshooting scenarios</span></span>

<span data-ttu-id="4fb8f-107">PerfInsights peut collecter et analyser plusieurs types d’informations qui sont regroupés dans des scénarios uniques.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-107">PerfInsights can collect and analyze several kinds of information that are grouped into unique scenarios.</span></span>

### <a name="collect-disk-configuration"></a><span data-ttu-id="4fb8f-108">Collecter la configuration de disque</span><span class="sxs-lookup"><span data-stu-id="4fb8f-108">Collect disk configuration</span></span> 

<span data-ttu-id="4fb8f-109">Ce scénario collecte la configuration de disque et d’autres informations importantes, y compris les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-109">This scenario collects the disk configuration and other important information, including the following items:</span></span>

-   <span data-ttu-id="4fb8f-110">Journaux d’événements</span><span class="sxs-lookup"><span data-stu-id="4fb8f-110">Event logs</span></span>

-   <span data-ttu-id="4fb8f-111">État du réseau pour toutes les connexions entrantes et sortantes</span><span class="sxs-lookup"><span data-stu-id="4fb8f-111">Network status for all incoming and outgoing connections</span></span>

-   <span data-ttu-id="4fb8f-112">Paramètres de configuration du pare-feu et du réseau</span><span class="sxs-lookup"><span data-stu-id="4fb8f-112">Network and firewall configuration settings</span></span>

-   <span data-ttu-id="4fb8f-113">Liste des tâches pour toutes les applications en cours d’exécution sur le système</span><span class="sxs-lookup"><span data-stu-id="4fb8f-113">Task list for all applications that are currently running on the system</span></span>

-   <span data-ttu-id="4fb8f-114">Fichier d’informations créé par msinfo32 pour la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="4fb8f-114">Information file created by msinfo32 for the virtual machine (VM)</span></span>

-   <span data-ttu-id="4fb8f-115">Paramètres de configuration de base de données Microsoft SQL Server (si la machine virtuelle est identifiée en tant que serveur exécutant SQL Server)</span><span class="sxs-lookup"><span data-stu-id="4fb8f-115">Microsoft SQL Server database configuration settings (if the VM is identified as a server that is running SQL Server)</span></span>

-   <span data-ttu-id="4fb8f-116">Compteurs de fiabilité de stockage</span><span class="sxs-lookup"><span data-stu-id="4fb8f-116">Storage reliability counters</span></span>

-   <span data-ttu-id="4fb8f-117">Correctifs logiciels Windows importants</span><span class="sxs-lookup"><span data-stu-id="4fb8f-117">Important Windows hotfixes</span></span>

-   <span data-ttu-id="4fb8f-118">Pilotes de filtre installés</span><span class="sxs-lookup"><span data-stu-id="4fb8f-118">Installed filter drivers</span></span>

<span data-ttu-id="4fb8f-119">Il s’agit d’une collecte passive d’informations qui ne sont pas censées affecter le système.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-119">This is a passive collection of information that shouldn't affect the system.</span></span> 

>[!Note]
><span data-ttu-id="4fb8f-120">Ce scénario est automatiquement inclus dans les scénarios suivants.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-120">This scenario is automatically included in each of the following scenarios.</span></span>

### <a name="benchmarkstorage-performance-test"></a><span data-ttu-id="4fb8f-121">Test de performances de stockage/d’évaluation</span><span class="sxs-lookup"><span data-stu-id="4fb8f-121">Benchmark/Storage Performance Test</span></span>

<span data-ttu-id="4fb8f-122">Ce scénario exécute le test d’évaluation [diskspd](https://github.com/Microsoft/diskspd) (E/S par seconde et Mbits/s) pour tous les disques joints à la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-122">This scenario runs the [diskspd](https://github.com/Microsoft/diskspd) benchmark test (IOPS and MBPS) for all drives that are attached to the VM.</span></span> 

> [!Note]
> <span data-ttu-id="4fb8f-123">Ce scénario peut affecter le système et ne doit pas être exécuté sur un système de production en direct.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-123">This scenario can affect the system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="4fb8f-124">Si nécessaire, exécutez ce scénario dans une fenêtre de maintenance dédiée pour éviter tout problème.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-124">If necessary, run this scenario in a dedicated maintenance window to avoid any problems.</span></span> <span data-ttu-id="4fb8f-125">Une charge de travail accrue qui est provoquée par un test d’évaluation ou un suivi peut nuire aux performances de votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-125">An increased workload that is caused by a trace or benchmark test could adversely affect the performance of your VM.</span></span>
>

### <a name="general-vm-slow-analysis"></a><span data-ttu-id="4fb8f-126">Analyse lente de machine virtuelle générale</span><span class="sxs-lookup"><span data-stu-id="4fb8f-126">General VM Slow analysis</span></span> 

<span data-ttu-id="4fb8f-127">Ce scénario exécute un suivi du [compteur de performances](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) en utilisant les compteurs spécifiés dans le fichier Generalcounters.txt.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-127">This scenario runs a [performance counter](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) trace by using the counters that are specified in the Generalcounters.txt file.</span></span> <span data-ttu-id="4fb8f-128">Si la machine virtuelle est identifiée en tant que serveur qui exécute SQL Server, elle exécute un suivi du compteur de performances en utilisant les compteurs du fichier Sqlcounters.txt.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-128">If the VM is identified as a server that is running SQL Server, it runs a performance counter trace by using the counters that are found in the Sqlcounters.txt file.</span></span> <span data-ttu-id="4fb8f-129">Cela inclut également des données de diagnostics de performances.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-129">It also includes Performance Diagnostics data.</span></span>

### <a name="vm-slow-analysis-and-benchmark"></a><span data-ttu-id="4fb8f-130">Évaluation et analyse lente de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="4fb8f-130">VM Slow analysis and benchmark</span></span>

<span data-ttu-id="4fb8f-131">Ce scénario exécute un suivi du [compteur de performances](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx), puis un test d’évaluation [diskspd](https://github.com/Microsoft/diskspd).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-131">This scenario runs a [performance counter](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) trace that is followed by a [diskspd](https://github.com/Microsoft/diskspd) benchmark test.</span></span> 

> [!Note]
> <span data-ttu-id="4fb8f-132">Ce scénario peut affecter le système et ne doit pas être exécuté sur un système de production en direct.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-132">This scenario can affect the system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="4fb8f-133">Si nécessaire, exécutez ce scénario dans une fenêtre de maintenance dédiée pour éviter tout problème.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-133">If necessary, run this scenario in a dedicated maintenance window to avoid any problems.</span></span> <span data-ttu-id="4fb8f-134">Une charge de travail accrue qui est provoquée par un test d’évaluation ou un suivi peut nuire aux performances de votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-134">An increased workload that is caused by a trace or benchmark test could adversely affect the performance of your VM.</span></span>
>

### <a name="azure-files-analysis"></a><span data-ttu-id="4fb8f-135">Analyse de fichiers Azure</span><span class="sxs-lookup"><span data-stu-id="4fb8f-135">Azure Files analysis</span></span> 

<span data-ttu-id="4fb8f-136">Ce scénario exécute une capture du compteur de performances spéciale ainsi qu’un suivi du réseau.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-136">This scenario runs a special performance counter capture together with a network trace.</span></span> <span data-ttu-id="4fb8f-137">La capture inclut tous les compteurs « Partages de clients SMB ».</span><span class="sxs-lookup"><span data-stu-id="4fb8f-137">The capture includes all the "SMB Client Shares" counters.</span></span> <span data-ttu-id="4fb8f-138">Voici quelques compteurs de performances de partages de clients SMB clés, qui font partie de la capture :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-138">The following are some key SMB client share performance counters that are part of the capture:</span></span>

| <span data-ttu-id="4fb8f-139">**Type**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-139">**Type**</span></span>     | <span data-ttu-id="4fb8f-140">**Compteur de partages de clients SMB**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-140">**SMB client shares counter**</span></span> |
|--------------|-------------------------------|
| <span data-ttu-id="4fb8f-141">E/S par seconde</span><span class="sxs-lookup"><span data-stu-id="4fb8f-141">IOPS</span></span>         | <span data-ttu-id="4fb8f-142">Requêtes de données/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-142">Data Requests/sec</span></span>             |
|              | <span data-ttu-id="4fb8f-143">Requêtes de lecture/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-143">Read Requests/sec</span></span>             |
|              | <span data-ttu-id="4fb8f-144">Requêtes d’écriture/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-144">Write Requests/sec</span></span>            |
| <span data-ttu-id="4fb8f-145">Latency</span><span class="sxs-lookup"><span data-stu-id="4fb8f-145">Latency</span></span>      | <span data-ttu-id="4fb8f-146">Moyenne des demandes de données/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-146">Avg. sec/Data Request</span></span>         |
|              | <span data-ttu-id="4fb8f-147">Nbre s/lecture</span><span class="sxs-lookup"><span data-stu-id="4fb8f-147">Avg. sec/Read</span></span>                 |
|              | <span data-ttu-id="4fb8f-148">Nbre s/écriture</span><span class="sxs-lookup"><span data-stu-id="4fb8f-148">Avg. sec/Write</span></span>                |
| <span data-ttu-id="4fb8f-149">Taille d’E/S</span><span class="sxs-lookup"><span data-stu-id="4fb8f-149">IO Size</span></span>      | <span data-ttu-id="4fb8f-150">Avg. Octets/requête de données</span><span class="sxs-lookup"><span data-stu-id="4fb8f-150">Avg. Bytes/Data Request</span></span>       |
|              | <span data-ttu-id="4fb8f-151">Avg. Octets/lecture</span><span class="sxs-lookup"><span data-stu-id="4fb8f-151">Avg. Bytes/Read</span></span>               |
|              | <span data-ttu-id="4fb8f-152">Avg. Octets/écriture</span><span class="sxs-lookup"><span data-stu-id="4fb8f-152">Avg. Bytes/Write</span></span>              |
| <span data-ttu-id="4fb8f-153">Débit</span><span class="sxs-lookup"><span data-stu-id="4fb8f-153">Throughput</span></span>   | <span data-ttu-id="4fb8f-154">Octets de données/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-154">Data Bytes/sec</span></span>                |
|              | <span data-ttu-id="4fb8f-155">Octets de lecture/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-155">Read Bytes/sec</span></span>                |
|              | <span data-ttu-id="4fb8f-156">Octets d’écriture/s</span><span class="sxs-lookup"><span data-stu-id="4fb8f-156">Write Bytes/sec</span></span>               |
| <span data-ttu-id="4fb8f-157">Longueur de la file d’attente</span><span class="sxs-lookup"><span data-stu-id="4fb8f-157">Queue Length</span></span> | <span data-ttu-id="4fb8f-158">Avg. Longueur de la file d’attente de lecture</span><span class="sxs-lookup"><span data-stu-id="4fb8f-158">Avg. Read Queue Length</span></span>        |
|              | <span data-ttu-id="4fb8f-159">Avg. Longueur de la file d’attente d’écriture</span><span class="sxs-lookup"><span data-stu-id="4fb8f-159">Avg. Write Queue Length</span></span>       |
|              | <span data-ttu-id="4fb8f-160">Avg. Longueur de la file d’attente de données</span><span class="sxs-lookup"><span data-stu-id="4fb8f-160">Avg. Data Queue Length</span></span>        |

### <a name="custom-configuration"></a><span data-ttu-id="4fb8f-161">Configuration personnalisée</span><span class="sxs-lookup"><span data-stu-id="4fb8f-161">Custom configuration</span></span> 

<span data-ttu-id="4fb8f-162">Lorsque vous exécutez une configuration personnalisée, vous exécutez tous les suivis (diagnostics de performances, compteur de performances, xperf, réseau, storport) en parallèle, selon le nombre de suivis sélectionné.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-162">When you run a custom configuration, you are running all traces (performance diagnostics, performance counter, xperf, network, storport) in parallel, depending how many different traces are selected.</span></span> <span data-ttu-id="4fb8f-163">Une fois le suivi terminé, l’outil exécute l’évaluation de diskspd, si elle est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-163">After tracing is completed, the tool runs the diskspd benchmark, if it is selected.</span></span> 

> [!Note]
> <span data-ttu-id="4fb8f-164">Ce scénario peut affecter le système et ne doit pas être exécuté sur un système de production en direct.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-164">This scenario can affect the system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="4fb8f-165">Si nécessaire, exécutez ce scénario dans une fenêtre de maintenance dédiée pour éviter tout problème.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-165">If necessary, run this scenario in a dedicated maintenance window to avoid any problems.</span></span> <span data-ttu-id="4fb8f-166">Une charge de travail accrue qui est provoquée par un test d’évaluation ou un suivi peut nuire aux performances de votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-166">An increased workload that is caused by a trace or benchmark test could adversely affect the performance of your VM.</span></span>
>

## <a name="what-kind-of-information-is-collected-by-the-script"></a><span data-ttu-id="4fb8f-167">Quelles informations sont collectées par le script ?</span><span class="sxs-lookup"><span data-stu-id="4fb8f-167">What kind of information is collected by the script?</span></span>

<span data-ttu-id="4fb8f-168">Les informations portant sur la configuration de la machine virtuelle Windows, des disques ou des pools de stockage, les compteurs de performances, les journaux et les différents suivis sont recueillies en fonction du scénario de performances utilisé :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-168">Information about Windows VM, disks or storage pools configuration, performance counters, logs and various traces are collected depending on the performance scenario used:</span></span>

|<span data-ttu-id="4fb8f-169">Données collectées</span><span class="sxs-lookup"><span data-stu-id="4fb8f-169">Data collected</span></span>                              |  |  | <span data-ttu-id="4fb8f-170">Scénarios de performances</span><span class="sxs-lookup"><span data-stu-id="4fb8f-170">Performance Scenarios</span></span> |  |  | |
|----------------------------------|----------------------------|------------------------------------|--------------------------|--------------------------------|----------------------|----------------------|
|                              | <span data-ttu-id="4fb8f-171">Collecter la configuration de disque</span><span class="sxs-lookup"><span data-stu-id="4fb8f-171">Collect disk Configuration</span></span> | <span data-ttu-id="4fb8f-172">Test de performances de stockage/d’évaluation</span><span class="sxs-lookup"><span data-stu-id="4fb8f-172">Benchmark/Storage Performance test</span></span> | <span data-ttu-id="4fb8f-173">Analyse lente de machine virtuelle générale</span><span class="sxs-lookup"><span data-stu-id="4fb8f-173">General VM Slow analysis</span></span> | <span data-ttu-id="4fb8f-174">Évaluation et analyse lente de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="4fb8f-174">VM Slow analysis and benchmark</span></span> | <span data-ttu-id="4fb8f-175">Analyse de fichiers Azure</span><span class="sxs-lookup"><span data-stu-id="4fb8f-175">Azure Files analysis</span></span> | <span data-ttu-id="4fb8f-176">Configuration personnalisée</span><span class="sxs-lookup"><span data-stu-id="4fb8f-176">Custom configuration</span></span> |
| <span data-ttu-id="4fb8f-177">Informations tirées des journaux d’événements</span><span class="sxs-lookup"><span data-stu-id="4fb8f-177">Information from Event logs</span></span>      | <span data-ttu-id="4fb8f-178">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-178">Yes</span></span>                        | <span data-ttu-id="4fb8f-179">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-179">Yes</span></span>                                | <span data-ttu-id="4fb8f-180">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-180">Yes</span></span>                      | <span data-ttu-id="4fb8f-181">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-181">Yes</span></span>                            | <span data-ttu-id="4fb8f-182">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-182">Yes</span></span>                  | <span data-ttu-id="4fb8f-183">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-183">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-184">Informations système</span><span class="sxs-lookup"><span data-stu-id="4fb8f-184">System information</span></span>               | <span data-ttu-id="4fb8f-185">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-185">Yes</span></span>                        | <span data-ttu-id="4fb8f-186">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-186">Yes</span></span>                                | <span data-ttu-id="4fb8f-187">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-187">Yes</span></span>                      | <span data-ttu-id="4fb8f-188">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-188">Yes</span></span>                            | <span data-ttu-id="4fb8f-189">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-189">Yes</span></span>                  | <span data-ttu-id="4fb8f-190">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-190">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-191">Mappage de volume</span><span class="sxs-lookup"><span data-stu-id="4fb8f-191">Volume Map</span></span>                       | <span data-ttu-id="4fb8f-192">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-192">Yes</span></span>                        | <span data-ttu-id="4fb8f-193">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-193">Yes</span></span>                                | <span data-ttu-id="4fb8f-194">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-194">Yes</span></span>                      | <span data-ttu-id="4fb8f-195">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-195">Yes</span></span>                            | <span data-ttu-id="4fb8f-196">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-196">Yes</span></span>                  | <span data-ttu-id="4fb8f-197">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-197">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-198">Mappage de disque</span><span class="sxs-lookup"><span data-stu-id="4fb8f-198">Disk Map</span></span>                         | <span data-ttu-id="4fb8f-199">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-199">Yes</span></span>                        | <span data-ttu-id="4fb8f-200">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-200">Yes</span></span>                                | <span data-ttu-id="4fb8f-201">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-201">Yes</span></span>                      | <span data-ttu-id="4fb8f-202">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-202">Yes</span></span>                            | <span data-ttu-id="4fb8f-203">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-203">Yes</span></span>                  | <span data-ttu-id="4fb8f-204">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-204">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-205">Tâches en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="4fb8f-205">Running Tasks</span></span>                    | <span data-ttu-id="4fb8f-206">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-206">Yes</span></span>                        | <span data-ttu-id="4fb8f-207">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-207">Yes</span></span>                                | <span data-ttu-id="4fb8f-208">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-208">Yes</span></span>                      | <span data-ttu-id="4fb8f-209">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-209">Yes</span></span>                            | <span data-ttu-id="4fb8f-210">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-210">Yes</span></span>                  | <span data-ttu-id="4fb8f-211">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-211">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-212">Compteurs de fiabilité de stockage</span><span class="sxs-lookup"><span data-stu-id="4fb8f-212">Storage Reliability Counters</span></span>     | <span data-ttu-id="4fb8f-213">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-213">Yes</span></span>                        | <span data-ttu-id="4fb8f-214">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-214">Yes</span></span>                                | <span data-ttu-id="4fb8f-215">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-215">Yes</span></span>                      | <span data-ttu-id="4fb8f-216">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-216">Yes</span></span>                            | <span data-ttu-id="4fb8f-217">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-217">Yes</span></span>                  | <span data-ttu-id="4fb8f-218">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-218">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-219">Informations sur le stockage</span><span class="sxs-lookup"><span data-stu-id="4fb8f-219">Storage information</span></span>              | <span data-ttu-id="4fb8f-220">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-220">Yes</span></span>                        | <span data-ttu-id="4fb8f-221">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-221">Yes</span></span>                                | <span data-ttu-id="4fb8f-222">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-222">Yes</span></span>                      | <span data-ttu-id="4fb8f-223">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-223">Yes</span></span>                            | <span data-ttu-id="4fb8f-224">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-224">Yes</span></span>                  | <span data-ttu-id="4fb8f-225">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-225">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-226">Sortie Fsutil</span><span class="sxs-lookup"><span data-stu-id="4fb8f-226">Fsutil output</span></span>                    | <span data-ttu-id="4fb8f-227">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-227">Yes</span></span>                        | <span data-ttu-id="4fb8f-228">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-228">Yes</span></span>                                | <span data-ttu-id="4fb8f-229">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-229">Yes</span></span>                      | <span data-ttu-id="4fb8f-230">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-230">Yes</span></span>                            | <span data-ttu-id="4fb8f-231">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-231">Yes</span></span>                  | <span data-ttu-id="4fb8f-232">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-232">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-233">Informations du pilote de filtre</span><span class="sxs-lookup"><span data-stu-id="4fb8f-233">Filter Driver info</span></span>               | <span data-ttu-id="4fb8f-234">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-234">Yes</span></span>                        | <span data-ttu-id="4fb8f-235">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-235">Yes</span></span>                                | <span data-ttu-id="4fb8f-236">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-236">Yes</span></span>                      | <span data-ttu-id="4fb8f-237">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-237">Yes</span></span>                            | <span data-ttu-id="4fb8f-238">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-238">Yes</span></span>                  | <span data-ttu-id="4fb8f-239">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-239">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-240">Sortie Netstat</span><span class="sxs-lookup"><span data-stu-id="4fb8f-240">Netstat output</span></span>                   | <span data-ttu-id="4fb8f-241">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-241">Yes</span></span>                        | <span data-ttu-id="4fb8f-242">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-242">Yes</span></span>                                | <span data-ttu-id="4fb8f-243">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-243">Yes</span></span>                      | <span data-ttu-id="4fb8f-244">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-244">Yes</span></span>                            | <span data-ttu-id="4fb8f-245">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-245">Yes</span></span>                  | <span data-ttu-id="4fb8f-246">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-246">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-247">Configuration réseau</span><span class="sxs-lookup"><span data-stu-id="4fb8f-247">Network configuration</span></span>            | <span data-ttu-id="4fb8f-248">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-248">Yes</span></span>                        | <span data-ttu-id="4fb8f-249">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-249">Yes</span></span>                                | <span data-ttu-id="4fb8f-250">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-250">Yes</span></span>                      | <span data-ttu-id="4fb8f-251">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-251">Yes</span></span>                            | <span data-ttu-id="4fb8f-252">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-252">Yes</span></span>                  | <span data-ttu-id="4fb8f-253">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-253">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-254">Configuration du pare-feu</span><span class="sxs-lookup"><span data-stu-id="4fb8f-254">Firewall configuration</span></span>           | <span data-ttu-id="4fb8f-255">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-255">Yes</span></span>                        | <span data-ttu-id="4fb8f-256">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-256">Yes</span></span>                                | <span data-ttu-id="4fb8f-257">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-257">Yes</span></span>                      | <span data-ttu-id="4fb8f-258">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-258">Yes</span></span>                            | <span data-ttu-id="4fb8f-259">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-259">Yes</span></span>                  | <span data-ttu-id="4fb8f-260">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-260">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-261">Configuration de SQL Server</span><span class="sxs-lookup"><span data-stu-id="4fb8f-261">SQL Server configuration</span></span>         | <span data-ttu-id="4fb8f-262">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-262">Yes</span></span>                        | <span data-ttu-id="4fb8f-263">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-263">Yes</span></span>                                | <span data-ttu-id="4fb8f-264">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-264">Yes</span></span>                      | <span data-ttu-id="4fb8f-265">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-265">Yes</span></span>                            | <span data-ttu-id="4fb8f-266">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-266">Yes</span></span>                  | <span data-ttu-id="4fb8f-267">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-267">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-268">Suivis des diagnostics de performances*</span><span class="sxs-lookup"><span data-stu-id="4fb8f-268">Performance Diagnostics Traces *</span></span> |                            |                                    | <span data-ttu-id="4fb8f-269">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-269">Yes</span></span>                      |                                |                      | <span data-ttu-id="4fb8f-270">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-270">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-271">Suivi du compteur de performances**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-271">Performance counter Trace **</span></span>     |                            |                                    |                          |                                |                      | <span data-ttu-id="4fb8f-272">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-272">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-273">Suivi du compteur SMB**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-273">SMB counter Trace **</span></span>             |                            |                                    |                          |                                | <span data-ttu-id="4fb8f-274">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-274">Yes</span></span>                  |                      |
| <span data-ttu-id="4fb8f-275">Suivi du compteur SQL Server**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-275">SQL Server counter Trace **</span></span>      |                            |                                    |                          |                                |                      | <span data-ttu-id="4fb8f-276">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-276">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-277">Suivi XPerf</span><span class="sxs-lookup"><span data-stu-id="4fb8f-277">XPerf Trace</span></span>                      |                            |                                    |                          |                                |                      | <span data-ttu-id="4fb8f-278">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-278">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-279">Suivi StorPort</span><span class="sxs-lookup"><span data-stu-id="4fb8f-279">StorPort Trace</span></span>                   |                            |                                    |                          |                                |                      | <span data-ttu-id="4fb8f-280">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-280">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-281">Suivi réseau</span><span class="sxs-lookup"><span data-stu-id="4fb8f-281">Network Trace</span></span>                    |                            |                                    |                          |                                | <span data-ttu-id="4fb8f-282">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-282">Yes</span></span>                  | <span data-ttu-id="4fb8f-283">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-283">Yes</span></span>                  |
| <span data-ttu-id="4fb8f-284">Suivi d’évaluation Diskspd***</span><span class="sxs-lookup"><span data-stu-id="4fb8f-284">Diskspd Benchmark trace ***</span></span>      |                            | <span data-ttu-id="4fb8f-285">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-285">Yes</span></span>                                |                          | <span data-ttu-id="4fb8f-286">Oui</span><span class="sxs-lookup"><span data-stu-id="4fb8f-286">Yes</span></span>                            |                      |                      |
|       |                            |                         |                                                   |                      |                      |

### <a name="performance-diagnostics-trace-"></a><span data-ttu-id="4fb8f-287">Suivi des diagnostics de performances (*)</span><span class="sxs-lookup"><span data-stu-id="4fb8f-287">Performance Diagnostics trace (*)</span></span>

<span data-ttu-id="4fb8f-288">Exécute un moteur basé sur des règles en arrière-plan afin de collecter des données et diagnostiquer les problèmes de performances en cours.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-288">Runs a rule-based engine in the background to collect data and diagnose ongoing performance issues.</span></span> <span data-ttu-id="4fb8f-289">Les règles actuellement prises en charge sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-289">The following rules are currently supported:</span></span>

- <span data-ttu-id="4fb8f-290">Règle HighCpuUsage : détecte les périodes d’utilisation élevée du processeur et montre les principaux utilisateurs du processeur pendant ces périodes.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-290">HighCpuUsage rule: Detects high CPU usage periods and shows the top CPU usage consumers during those periods.</span></span>
- <span data-ttu-id="4fb8f-291">Règle HighDiskUsage : détecte les périodes d’utilisation élevée de disque sur les disques physiques et montre les principaux utilisateurs de disque pendant ces périodes.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-291">HighDiskUsage rule: Detects high disk usage periods on physical disks and shows the top disk usage consumers during those periods.</span></span>
- <span data-ttu-id="4fb8f-292">Règle HighResolutionDiskMetric : montre les mesures d’E/S par seconde, de débit et de latence d’E/S par intervalles de 50 millisecondes pour chaque disque physique.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-292">HighResolutionDiskMetric rule: Shows IOPS, throughput and IO latency metrics per 50 milliseconds for each physical disk.</span></span> <span data-ttu-id="4fb8f-293">Cela permet d’identifier rapidement les périodes de limitation de disque.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-293">It helps to quickly identify disk throttling periods.</span></span>
- <span data-ttu-id="4fb8f-294">Règle HighMemoryUsage : détecte les périodes d’utilisation élevée de la mémoire et montre les principaux utilisateurs de la mémoire pendant ces périodes.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-294">HighMemoryUsage rule: Detects high memory usage periods, and shows the top memory usage consumers during those periods.</span></span>

> [!NOTE] 
> <span data-ttu-id="4fb8f-295">Actuellement, les versions Windows incluant .NET Framework 3.5 ou versions ultérieures sont prises en charge.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-295">Currently, Windows versions that include the .NET Framework 3.5 or later versions are supported.</span></span>

### <a name="performance-counter-trace-"></a><span data-ttu-id="4fb8f-296">Suivi du compteur de performances (**)</span><span class="sxs-lookup"><span data-stu-id="4fb8f-296">Performance Counter trace (**)</span></span>

<span data-ttu-id="4fb8f-297">Collecte les compteurs de performances suivants :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-297">Collects the following Performance Counters:</span></span>

- <span data-ttu-id="4fb8f-298">\Process, \Processor, \Memory, \Thread, \PhysicalDisk, \LogicalDisk</span><span class="sxs-lookup"><span data-stu-id="4fb8f-298">\Process, \Processor, \Memory, \Thread, \PhysicalDisk, \LogicalDisk</span></span>
- <span data-ttu-id="4fb8f-299">\Cache\Dirty Pages, \Cache\Lazy Write Flushes/sec, \Server\Pool Nonpaged, Failures, \Server\Pool Paged Failures</span><span class="sxs-lookup"><span data-stu-id="4fb8f-299">\Cache\Dirty Pages, \Cache\Lazy Write Flushes/sec, \Server\Pool Nonpaged, Failures, \Server\Pool Paged Failures</span></span>
- <span data-ttu-id="4fb8f-300">Certains compteurs sous \Network Interface, \IPv4\Datagrams, \IPv6\Datagrams, \TCPv4\Segments, \TCPv6\Segments, \Network Adapter, \WFPv4\Packets, \WFPv6\Packets, \UDPv4\Datagrams, \UDPv6\Datagrams, \TCPv4\Connection, \TCPv6\Connection, \Network QoS Policy\Packets, \Per Processor Network Interface Card Activity, \Microsoft Winsock BSP</span><span class="sxs-lookup"><span data-stu-id="4fb8f-300">Selected counters under \Network Interface, \IPv4\Datagrams, \IPv6\Datagrams, \TCPv4\Segments, \TCPv6\Segments,  \Network Adapter, \WFPv4\Packets, \WFPv6\Packets, \UDPv4\Datagrams, \UDPv6\Datagrams, \TCPv4\Connection, \TCPv6\Connection, \Network QoS Policy\Packets, \Per Processor Network Interface Card Activity, \Microsoft Winsock BSP</span></span>

#### <a name="for-sql-server-instances"></a><span data-ttu-id="4fb8f-301">Pour les instances SQL Server</span><span class="sxs-lookup"><span data-stu-id="4fb8f-301">For SQL Server instances</span></span>
- <span data-ttu-id="4fb8f-302">\SQL Server:Buffer Manager, \SQLServer:Resource Pool Stats, \SQLServer:SQL Statistics\\</span><span class="sxs-lookup"><span data-stu-id="4fb8f-302">\SQL Server:Buffer Manager, \SQLServer:Resource Pool Stats, \SQLServer:SQL Statistics\\</span></span>
- <span data-ttu-id="4fb8f-303">\SQLServer:Locks, \SQLServer:General, Statistics</span><span class="sxs-lookup"><span data-stu-id="4fb8f-303">\SQLServer:Locks, \SQLServer:General, Statistics</span></span>
- <span data-ttu-id="4fb8f-304">\SQLServer:Access Methods</span><span class="sxs-lookup"><span data-stu-id="4fb8f-304">\SQLServer:Access Methods</span></span>

#### <a name="for-azure-files"></a><span data-ttu-id="4fb8f-305">Pour les fichiers Azure</span><span class="sxs-lookup"><span data-stu-id="4fb8f-305">For Azure Files</span></span>
<span data-ttu-id="4fb8f-306">\SMB Client Shares</span><span class="sxs-lookup"><span data-stu-id="4fb8f-306">\SMB Client Shares</span></span>

### <a name="diskspd-benchmark-trace-"></a><span data-ttu-id="4fb8f-307">Suivi d’évaluation Diskspd (***)</span><span class="sxs-lookup"><span data-stu-id="4fb8f-307">Diskspd Benchmark trace (***)</span></span>
<span data-ttu-id="4fb8f-308">Tests de charge de travail d’E/S Diskspd [disque de système d’exploitation (écriture) et disques du pool (lecture/écriture)]</span><span class="sxs-lookup"><span data-stu-id="4fb8f-308">Diskspd IO workload tests [OS Disk (write) and pool drives (read/write)]</span></span>

## <a name="run-the-perfinsights-on-your-vm"></a><span data-ttu-id="4fb8f-309">Exécuter PerfInsights sur votre machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="4fb8f-309">Run the PerfInsights on your VM</span></span>

### <a name="what-do-i-have-to-know-before-i-run-the-script"></a><span data-ttu-id="4fb8f-310">Que dois-je savoir avant d’exécuter le script ?</span><span class="sxs-lookup"><span data-stu-id="4fb8f-310">What do I have to know before I run the script?</span></span> 

<span data-ttu-id="4fb8f-311">**Configuration requise pour le script**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-311">**Script requirements**</span></span>

1.  <span data-ttu-id="4fb8f-312">Ce script doit être exécuté sur la machine virtuelle qui présente le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-312">This script must be run on the VM that has the performance issue.</span></span> 

2.  <span data-ttu-id="4fb8f-313">Les systèmes d’exploitation suivants sont pris en charge : Windows Server 2008 R2, 2012, 2012 R2, 2016 ; Windows 8.1 et Windows 10.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-313">The following OSes are supported: Windows Server 2008 R2, 2012, 2012 R2, 2016; Windows 8.1 and Windows 10.</span></span>

<span data-ttu-id="4fb8f-314">**Problèmes possibles lorsque vous exécutez le script sur des machines virtuelles de production :**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-314">**Possible issues when you run the script on production VMs:**</span></span>

1.  <span data-ttu-id="4fb8f-315">Le script peut nuire aux performances de la machine virtuelle quand elle est utilisée avec le scénario « Évaluation » ou « Personnalisé » qui est configuré à l’aide de XPerf ou DiskSpd.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-315">The script might adversely affect the performance of the VM when it is used together with the "Benchmark" or "Custom" scenario that is configured by using XPerf or DiskSpd.</span></span> <span data-ttu-id="4fb8f-316">Soyez prudent lorsque vous exécutez le script dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-316">Be careful when you run the script in a production environment.</span></span>

2.  <span data-ttu-id="4fb8f-317">Lorsque vous utilisez le script avec le scénario « Évaluation » ou « Personnalisé » qui est configuré à l’aide de DiskSpd, assurez-vous qu’aucune autre activité d’arrière-plan n’interfère avec la charge de travail d’E/S sur les disques testés.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-317">When you use the script together with the "Benchmark" or "Custom" scenario that is configured by using DiskSpd, make sure that no other background activity interferes with the I/O workload on the tested disks.</span></span>

3.  <span data-ttu-id="4fb8f-318">Par défaut, le script utilise le disque de stockage temporaire pour collecter les données.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-318">By default, the script uses the temporary storage drive to collect data.</span></span> <span data-ttu-id="4fb8f-319">Si le suivi est activé sur une durée plus longue, la quantité de données collectées peut être pertinente.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-319">If tracing stays enabled for a longer time, the amount of data that is collected might be relevant.</span></span> <span data-ttu-id="4fb8f-320">Cela peut réduire la disponibilité de l’espace sur le disque temporaire, et donc affecter toute application s’appuyant sur ce disque.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-320">This can reduce the availability of space on the temporary disk, therefore affecting any application that relies on this drive.</span></span>

### <a name="how-do-i-run-perfinsights"></a><span data-ttu-id="4fb8f-321">Comment exécuter PerfInsights ?</span><span class="sxs-lookup"><span data-stu-id="4fb8f-321">How do I run PerfInsights?</span></span> 

<span data-ttu-id="4fb8f-322">Pour exécuter le script, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-322">To run the script, follow these steps:</span></span>

1. <span data-ttu-id="4fb8f-323">Téléchargez [PerfInsights.zip](http://aka.ms/perfinsightsdownload).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-323">Download [PerfInsights.zip](http://aka.ms/perfinsightsdownload).</span></span>

2. <span data-ttu-id="4fb8f-324">Débloquez le fichier PerfInsights.zip.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-324">Unblock the PerfInsights.zip file.</span></span> <span data-ttu-id="4fb8f-325">Pour ce faire, cliquez avec le bouton droit sur le fichier PerfInsights.zip, puis sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-325">To do this, right-click the PerfInsights.zip file, select **Properties**.</span></span> <span data-ttu-id="4fb8f-326">Sous l’onglet **Général**, sélectionnez **Débloquer**, puis **OK**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-326">In the **General** tab, select **Unblock** and then select **OK**.</span></span> <span data-ttu-id="4fb8f-327">Cela garantit que le script s’exécute sans invite de sécurité supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-327">This will make sure that the script runs without any additional security prompts.</span></span>  

    ![Déverrouiller le fichier zip](media/how-to-use-perfInsights/unlock-file.png)

3.  <span data-ttu-id="4fb8f-329">Développez le fichier compressé PerfInsights.zip dans votre disque temporaire (par défaut, il s’agit généralement du disque D).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-329">Expand the compressed PerfInsights.zip file into your temporary drive (by default, usually the D drive).</span></span> <span data-ttu-id="4fb8f-330">Le fichier compressé doit contenir les fichiers et dossiers suivants :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-330">The compressed file should contain the following files and folders:</span></span>

    ![fichiers du dossier .zip.](media/how-to-use-perfInsights/file-folder.png)

4.  <span data-ttu-id="4fb8f-332">Ouvrez Windows PowerShell en tant qu’administrateur, puis exécutez le script PerfInsights.ps1.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-332">Open Windows PowerShell as an administrator, and then run the PerfInsights.ps1 script.</span></span>

    ```
    cd <the path of PerfInsights folder >
    Powershell.exe -ExecutionPolicy UnRestricted -NoProfile -File .\\PerfInsights.ps1
    ```

    <span data-ttu-id="4fb8f-333">Vous devrez peut-être entrer « y » si vous êtes invité à confirmer que vous souhaitez modifier la stratégie d’exécution.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-333">You might have to enter "y" to if you are asked to confirm that you want to change the execution policy.</span></span>

    <span data-ttu-id="4fb8f-334">Dans la boîte de dialogue Exclusion, vous disposez de l’option de partage des informations de diagnostic avec le Support Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-334">In the Disclaimer dialog box, you are given the option to share diagnostic information with Microsoft Support.</span></span> <span data-ttu-id="4fb8f-335">Vous devez également accepter le contrat de licence pour continuer.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-335">You must also consent to the license agreement to continue.</span></span> <span data-ttu-id="4fb8f-336">Procédez à vos sélections, puis cliquez sur **Exécuter le script**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-336">Make your selections, and then click **Run Script**.</span></span>

    ![Boîte de dialogue Exclusion](media/how-to-use-perfInsights/disclaimer.png)

5.  <span data-ttu-id="4fb8f-338">Soumettez le numéro de dossier, s’il est disponible, lorsque vous exécutez le script (à des fins statistiques).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-338">Submit the case number, if it is available, when you run the script (This is for our statistics).</span></span> <span data-ttu-id="4fb8f-339">Cliquez ensuite sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-339">Then, click **OK**.</span></span>
    
    ![entrer l’ID de support](media/how-to-use-perfInsights/enter-support-number.png)

6.  <span data-ttu-id="4fb8f-341">Sélectionnez votre disque de stockage temporaire.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-341">Select your temporary storage drive.</span></span> <span data-ttu-id="4fb8f-342">Le script peut détecter automatiquement la lettre du disque.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-342">The Script can auto-detect the drive letter of the drive.</span></span> <span data-ttu-id="4fb8f-343">Si des problèmes surviennent à cette étape, il se peut que vous soyez invité à sélectionner le disque (le disque par défaut est D).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-343">If any problems occur in this stage, you might be prompted to select the drive (the default drive is D).</span></span> <span data-ttu-id="4fb8f-344">Les journaux générés sont stockés ici dans le dossier log\_collection.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-344">Generated logs are stored here in the log\_collection folder.</span></span> <span data-ttu-id="4fb8f-345">Une fois que vous avez entré ou accepté la lettre de disque, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-345">After you enter or accept the drive letter, click **OK**.</span></span>

    ![entrer le disque](media/how-to-use-perfInsights/enter-drive.png)

7.  <span data-ttu-id="4fb8f-347">Sélectionnez un scénario de dépannage dans la liste fournie.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-347">Select a troubleshooting scenario from the provided list.</span></span>

       ![Sélectionner des scénarios de support](media/how-to-use-perfInsights/select-scenarios.png)

8.  <span data-ttu-id="4fb8f-349">Vous pouvez également exécuter PerfInsights sans interface utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-349">You can also run PerfInsights without UI.</span></span>

    <span data-ttu-id="4fb8f-350">La commande suivante exécute le scénario de dépannage « Analyse lente de machine virtuelle générale » sans invite de l’interface utilisateur ou données de capture pendant 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-350">The following command runs the "General VM Slow analysis" troubleshooting scenario without a UI prompt or capture data for 30 seconds.</span></span> <span data-ttu-id="4fb8f-351">Vous êtes invité à accepter les mêmes exclusion de responsabilité et CLUF qu’à l’étape 4.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-351">It prompts you to consent to the same disclaimer and EULA that  are mentioned in step 4.</span></span>

        powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -NoGui -Scenario vmslow -TracingDuration 30"

    <span data-ttu-id="4fb8f-352">Si vous souhaitez que PerfInsights s’exécute en mode silencieux, utilisez le paramètre **-AcceptDisclaimerAndShareDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-352">If you want PerfInsights to run in silent mode, use the **-AcceptDisclaimerAndShareDiagnostics** parameter.</span></span> <span data-ttu-id="4fb8f-353">Par exemple, utilisez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-353">For example, use the following command:</span></span>

        powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -NoGui -Scenario vmslow -TracingDuration 30 -AcceptDisclaimerAndShareDiagnostics"

### <a name="how-do-i-troubleshoot-issues-while-running-the-script"></a><span data-ttu-id="4fb8f-354">Comment résoudre des problèmes lors de l’exécution du script ?</span><span class="sxs-lookup"><span data-stu-id="4fb8f-354">How do I troubleshoot issues while running the script?</span></span>

<span data-ttu-id="4fb8f-355">Si le script s’est terminé anormalement, vous pouvez nettoyer un état incohérent en exécutant le script avec le commutateur -Cleanup, comme suit :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-355">If the script terminates abnormally, you can clean up an inconsistent state by running the script together with the -Cleanup switch, as follows:</span></span>

    powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -Cleanup"

<span data-ttu-id="4fb8f-356">En cas de problème pendant la détection automatique du disque temporaire, vous devrez peut-être sélectionner le disque (le disque par défaut est D).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-356">If any problems occur during the automatic detection of the temporary drive, you might be prompted to select the drive (the default drive is D).</span></span>

![entrer le disque](media/how-to-use-perfInsights/enter-drive.png)

<span data-ttu-id="4fb8f-358">Le script désinstalle les outils de l’utilitaire et supprime les dossiers temporaires.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-358">The script uninstalls the utility tools and removes temporary folders.</span></span>

### <a name="troubleshooting-other-script-issues"></a><span data-ttu-id="4fb8f-359">Résolution d’autres problèmes de script</span><span class="sxs-lookup"><span data-stu-id="4fb8f-359">Troubleshooting other script issues</span></span> 

<span data-ttu-id="4fb8f-360">En cas de problème pendant l’exécution du script, appuyez sur Ctrl+C pour interrompre l’exécution du script.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-360">If any problems occur when you run the script, press Ctrl+C to interrupt the script execution.</span></span> <span data-ttu-id="4fb8f-361">Pour supprimer des objets temporaires, consultez la section « Clean up after abnormal termination » (Nettoyer après un arrêt anormal).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-361">To remove temporary objects, see the "Clean up after abnormal termination" section.</span></span>

<span data-ttu-id="4fb8f-362">Si vous rencontrez un échec de script même après plusieurs tentatives, nous vous recommandons d’exécuter le script en mode débogage à l’aide de l’option de paramètre -Debug au démarrage.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-362">If you continue to experience script failure even after several attempts, we recommend that you run the script in "debug mode" by using the "-Debug" parameter option on startup.</span></span>

<span data-ttu-id="4fb8f-363">Après la défaillance, copiez la sortie complète de la console PowerShell, puis envoyez-la à l’agent du Support technique Microsoft qui vous aidera à résoudre ce problème.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-363">After the failure occurs, copy the full output of the PowerShell console, and send it to the Microsoft Support agent who is assisting you to help troubleshoot the problem.</span></span>

### <a name="how-do-i-run-the-script-in-custom-configuration-mode"></a><span data-ttu-id="4fb8f-364">Comment exécuter le script en mode de configuration personnalisée ?</span><span class="sxs-lookup"><span data-stu-id="4fb8f-364">How do I run the script in custom configuration mode?</span></span>

<span data-ttu-id="4fb8f-365">En sélectionnant la configuration **Personnalisé**, vous pouvez activer plusieurs suivis en parallèle (maintenez la touche Maj enfoncée pour sélectionner plusieurs suivis) :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-365">By selecting the **Custom** configuration, you can enable several traces in parallel (use Shift to multi-select):</span></span>

![sélectionner des scénarios](media/how-to-use-perfInsights/select-scenario.png)

<span data-ttu-id="4fb8f-367">Lorsque vous sélectionnez les scénarios portant sur les diagnostics de performances, le suivi du compteur de performances, le suivi XPerf, le suivi réseau ou le suivi Storport, référez-vous aux instructions indiquées dans les boîtes de dialogue et essayez de reproduire le problème de ralentissement des performances après avoir lancé les suivis.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-367">When you select the Performance Diagnostics, Performance Counter Trace, XPerf Trace, Network Trace, or Storport Trace scenarios, follow the instructions in the dialog boxes, and try to reproduce the slow performance issue after you start the traces.</span></span>

<span data-ttu-id="4fb8f-368">La boîte de dialogue ci-dessous vous permet de lancer un suivi :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-368">The following dialog box lets you start a trace:</span></span>

![lancer un suivi](media/how-to-use-perfInsights/start-trace-message.png)

<span data-ttu-id="4fb8f-370">Pour arrêter les suivis, vous devez confirmer la commande dans une seconde boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-370">To stop the traces, you have to confirm the command in a second dialog box.</span></span>

<span data-ttu-id="4fb8f-371">![arrêter un suivi](media/how-to-use-perfInsights/stop-trace-message.png)
![arrêter un suivi](media/how-to-use-perfInsights/ok-trace-message.png)</span><span class="sxs-lookup"><span data-stu-id="4fb8f-371">![stop-trace](media/how-to-use-perfInsights/stop-trace-message.png)
![stop-trace](media/how-to-use-perfInsights/ok-trace-message.png)</span></span>

<span data-ttu-id="4fb8f-372">Lorsque les suivis ou les opérations sont terminés, un nouveau fichier est généré dans D:\\log\_collection (ou dans le disque temporaire) : il est nommé **CollectedData\_aaaa-MM-jj\_hh\_mm\_ss.zip.**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-372">When the traces or operations are completed, a new file is generated in D:\\log\_collection (or the temporary drive) that is named **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip.**</span></span> <span data-ttu-id="4fb8f-373">Vous pouvez envoyer ce fichier à l’agent de Support pour analyse.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-373">You can send this file to the Support agent for analysis.</span></span>

## <a name="review-the-diagnostics-report-created-by-perfinsights"></a><span data-ttu-id="4fb8f-374">Passer en revue le rapport de diagnostics créé par PerfInsights</span><span class="sxs-lookup"><span data-stu-id="4fb8f-374">Review the diagnostics report created by PerfInsights</span></span>

<span data-ttu-id="4fb8f-375">Le fichier **CollectedData\_aaaa-MM-jj\_hh\_mm\_ss.zip** généré par PerfInsights peut inclure un rapport HTML qui détaille les conclusions de PerfInsights.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-375">Within the **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip file,** that is generated by PerfInsights, you can find an HTML report that details the findings of PerfInsights.</span></span> <span data-ttu-id="4fb8f-376">Pour passer en revue le rapport, développez le fichier **CollectedData\_aaaa-MM-jj\_hh\_mm\_ss.zip**, puis ouvrez le fichier **PerfInsights report.htm**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-376">To review the report, expand the **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip** file, and then open the **PerfInsights Report.html** file.</span></span>

<span data-ttu-id="4fb8f-377">Sélectionnez l’onglet **Conclusions**.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-377">Select the **Findings** tab.</span></span>

![onglet Rechercher](media/how-to-use-perfInsights/findingtab.png)

<span data-ttu-id="4fb8f-379">**Remarques**</span><span class="sxs-lookup"><span data-stu-id="4fb8f-379">**Notes**</span></span>

-   <span data-ttu-id="4fb8f-380">Les messages qui s’affichent en rouge sont des problèmes de configuration connus qui peuvent provoquer des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-380">Messages in red are known configuration issues that may cause performance issues.</span></span>

-   <span data-ttu-id="4fb8f-381">Messages qui s’affichent en jaune sont des avertissements qui représentent des configurations non optimales ne provoquant pas forcément de problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-381">Messages in yellow are warnings that represent non-optimal configurations that do not necessarily cause performance issues.</span></span>

-   <span data-ttu-id="4fb8f-382">Les messages qui s’affichent en bleu sont présentés à titre informatif uniquement.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-382">Messages in blue are informative statements only.</span></span>

<span data-ttu-id="4fb8f-383">Passez en revue les liens HTTP de tous les messages d’erreur en rouge afin d’obtenir des informations plus détaillées sur les conclusions et leurs répercussions sur les performances ou les meilleures pratiques associées aux configurations optimisées pour les performances.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-383">Review the HTTP links for all error messages in red to get more detailed information about the findings and how they can affect the performance or best practices for performance-optimized configurations.</span></span>

### <a name="disk-configuration-tab"></a><span data-ttu-id="4fb8f-384">Onglet Configuration du disque</span><span class="sxs-lookup"><span data-stu-id="4fb8f-384">Disk Configuration Tab</span></span>

<span data-ttu-id="4fb8f-385">La section **Vue d’ensemble** affiche plusieurs vues de la configuration de stockage, y compris des informations tirées de Diskpart et des espaces de stockage</span><span class="sxs-lookup"><span data-stu-id="4fb8f-385">The **Overview** section displays different views of the storage configuration, including information from Diskpart and Storage Spaces</span></span>

<span data-ttu-id="4fb8f-386">Les sections **DiskMap** et **VolumeMap** offrent un double point de vue sur les liens entre volumes logiques et disques physiques.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-386">The **DiskMap** and **VolumeMap** sections describe on a dual perspective how logical volumes and physical disks are related to each other.</span></span>

<span data-ttu-id="4fb8f-387">Dans la perspective PhysicalDisk (DiskMap), le tableau affiche tous les volumes logiques en cours d’exécution sur le disque.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-387">In the PhysicalDisk perspective (DiskMap), the table shows all logical volumes that are running on the disk.</span></span> <span data-ttu-id="4fb8f-388">Dans l’exemple suivant, PhysicalDrive2 exécute 2 volumes logiques créés sur plusieurs partitions (J et H) :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-388">In the following example, PhysicalDrive2 runs 2 Logical Volumes created on multiple partitions (J and H):</span></span>

![onglet Données](media/how-to-use-perfInsights/disktab.png)

<span data-ttu-id="4fb8f-390">Dans la perspective Volume (*VolumeMap*), les tables affichent tous les disques physiques sous chaque volume logique.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-390">In the Volume perspective (*VolumeMap*), the tables show all the physical disks under each logical volume.</span></span> <span data-ttu-id="4fb8f-391">Pour les disques RAID/dynamiques, vous pouvez exécuter un volume logique sur plusieurs disques physiques.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-391">Notice that for RAID/Dynamic disks, you might run a logical volume upon multiple physical disks.</span></span> <span data-ttu-id="4fb8f-392">Dans l’exemple suivant, *C:\\mount* est un point de montage configuré en tant que *SpannedDisk* sur PhysicalDisks \#2 et \#3 :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-392">In the following sample *C:\\mount* is a mountpoint configured as *SpannedDisk* on PhysicalDisks \#2 and \#3:</span></span>

![onglet Volume](media/how-to-use-perfInsights/volumetab.png)

### <a name="sql-server-tab"></a><span data-ttu-id="4fb8f-394">Onglet Serveur SQL</span><span class="sxs-lookup"><span data-stu-id="4fb8f-394">SQL Server tab</span></span>

<span data-ttu-id="4fb8f-395">Si la machine virtuelle cible héberge toutes les instances de SQL Server, un onglet supplémentaire nommé **SQL Server** apparaît dans le rapport :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-395">If the target VM hosts any SQL Server instances, you will see an additional tab in the report that is named **SQL Server**:</span></span>

![onglet sql](media/how-to-use-perfInsights/sqltab.png)

<span data-ttu-id="4fb8f-397">Cette section contient une « vue d’ensemble » et des sous-onglets supplémentaires pour chacune des instances de SQL Server hébergées sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-397">This section contains an "Overview" and additional sub tabs for each of the SQL Server instances hosted on the VM.</span></span>

<span data-ttu-id="4fb8f-398">La section « Vue d’ensemble » contient une table utile qui récapitule tous les disques physiques (disques système et disques de données) en cours d’exécution et qui contiennent un mélange de fichiers de données et de fichiers journaux des transactions.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-398">The "Overview" section contains a helpful table that summarizes all the physical disks (system and data disks) that are running and that contain a mixture of data files and transaction log files.</span></span>

<span data-ttu-id="4fb8f-399">Dans l’exemple suivant, *PhysicalDrive0* (qui exécute le disque C) est affiché, car les fichiers *modeldev* et *modellog* se trouvent sur le disque C, et ils sont de types différents (par exemple, fichier de données et journal des transactions, respectivement) :</span><span class="sxs-lookup"><span data-stu-id="4fb8f-399">In the following example, *PhysicalDrive0* (running the C drive) is displayed because both the *modeldev* and *modellog* files are located on the C drive, and they are of different types (such as Data File and Transaction Log, respectively):</span></span>

![loginfo](media/how-to-use-perfInsights/loginfo.png)

<span data-ttu-id="4fb8f-401">Les onglets spécifiques de l’instance de SQL Server contiennent une section générale qui affiche des informations de base sur l’instance sélectionnée, et d’autres sections pour plus d’informations, y compris les paramètres, les configurations et les options de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-401">The SQL Server instance-specific tabs contain a general section that displays basic information about the selected instance and additional sections for advanced information, including Settings, Configurations, and User Options.</span></span>

## <a name="references-to-the-external-tools-used"></a><span data-ttu-id="4fb8f-402">Références aux outils externes utilisés</span><span class="sxs-lookup"><span data-stu-id="4fb8f-402">References to the external tools used</span></span>

### <a name="diskspd"></a><span data-ttu-id="4fb8f-403">Diskspd</span><span class="sxs-lookup"><span data-stu-id="4fb8f-403">Diskspd</span></span>

<span data-ttu-id="4fb8f-404">DISKSPD est un générateur de charge de stockage et un outil de test des performances des équipes d’ingénierie d’infrastructure Windows, Windows Server et serveur cloud.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-404">DISKSPD is a storage load generator and performance test tool from the Windows and Windows Server and Cloud Server Infrastructure engineering teams.</span></span> <span data-ttu-id="4fb8f-405">Pour plus d’informations, consultez [Diskspd](https://github.com/Microsoft/diskspd).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-405">For more information, see [Diskspd](https://github.com/Microsoft/diskspd).</span></span>

### <a name="xperf"></a><span data-ttu-id="4fb8f-406">XPerf</span><span class="sxs-lookup"><span data-stu-id="4fb8f-406">XPerf</span></span>

<span data-ttu-id="4fb8f-407">Xperf est un outil en ligne de commande qui permet de capturer des suivis à partir du Kit Windows Performance Toolkit.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-407">Xperf is a command-line tool to capture traces from the Windows Performance Tools Kit.</span></span>

<span data-ttu-id="4fb8f-408">Pour plus d’informations, consultez [Windows Performance Toolkit : Xperf](https://blogs.msdn.microsoft.com/ntdebugging/2008/04/03/windows-performance-toolkit-xperf/).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-408">For more information, see [Windows Performance Toolkit – Xperf](https://blogs.msdn.microsoft.com/ntdebugging/2008/04/03/windows-performance-toolkit-xperf/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="4fb8f-409">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="4fb8f-409">Next Steps</span></span>

### <a name="upload-diagnostics-logs-and-reports-to-microsoft-support-for-further-review"></a><span data-ttu-id="4fb8f-410">Charger les journaux de diagnostic et les rapports vers le Support Microsoft pour un examen approfondi</span><span class="sxs-lookup"><span data-stu-id="4fb8f-410">Upload diagnostics logs and reports to Microsoft Support for further review</span></span>

<span data-ttu-id="4fb8f-411">Lorsque vous travaillez avec le Support Microsoft, vous pouvez être invité à transmettre la sortie générée par PerfInsights pour faciliter le processus de dépannage.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-411">When you work with the Microsoft Support staff, you may be requested to transmit the output that is generated by PerfInsights to assist the troubleshooting process.</span></span>

<span data-ttu-id="4fb8f-412">L’agent de Support vous crée un espace de travail DTM, et vous recevez un e-mail comportant un lien vers le portail DTM (https://filetransfer.support.microsoft.com/EFTClient/Account/Login.htm), ainsi qu’un ID d’utilisateur unique et un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-412">The Support agent will create a DTM workspace for you, and you will receive an email message that includes a link to the [DTM portal (https://filetransfer.support.microsoft.com/EFTClient/Account/Login.htm) and a unique user ID and password.</span></span>

<span data-ttu-id="4fb8f-413">Ce message sera envoyé à partir de **CTS Automated Diagnostics Services** (ctsadiag@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="4fb8f-413">This message will be sent from **CTS Automated Diagnostics Services** (ctsadiag@microsoft.com).</span></span>

![Exemple de message](media/how-to-use-perfInsights/supportemail.png)

<span data-ttu-id="4fb8f-415">Pour plus de sécurité, vous devez modifier votre mot de passe à la première utilisation.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-415">For additional security, you will be required to change your password on first use.</span></span>

<span data-ttu-id="4fb8f-416">Après vous être connecté à DTM, une boîte de dialogue s’affiche pour vous inviter à charger le fichier **CollectedData\_aaaa-MM-jj\_hh\_mm\_ss.zip** collecté par PerfInsights.</span><span class="sxs-lookup"><span data-stu-id="4fb8f-416">After you log in to DTM, you will find a dialog box to upload the **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip** file that was collected by PerfInsights.</span></span>
