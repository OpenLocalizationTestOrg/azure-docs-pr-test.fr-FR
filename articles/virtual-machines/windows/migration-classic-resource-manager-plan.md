---
title: "Planification de la migration des ressources IaaS d’Azure Classic vers Azure Resource Manager | Microsoft Docs"
description: "Planification de la migration des ressources IaaS d’Azure Classic vers Azure Resource Manager"
services: virtual-machines-windows
documentationcenter: 
author: singhkays
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 78492a2c-2694-4023-a7b8-c97d3708dcb7
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 04/01/2017
ms.author: kasing
ms.openlocfilehash: db23eba9ff8debd5268cd02bc4f37c4e6501bfac
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="planning-for-migration-of-iaas-resources-from-classic-to-azure-resource-manager"></a><span data-ttu-id="d816c-103">Planification de la migration des ressources IaaS d’Azure Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-103">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>
<span data-ttu-id="d816c-104">Si Azure Resource Manager offre de nombreuses fonctionnalités exceptionnelles, il est essentiel de planifier le parcours de migration pour éviter tout heurt.</span><span class="sxs-lookup"><span data-stu-id="d816c-104">While Azure Resource Manager offers many amazing features, it is critical to plan out your migration journey to make sure things go smoothly.</span></span> <span data-ttu-id="d816c-105">Il est nécessaire de consacrer du temps à la planification pour être sûr de ne pas rencontrer de problèmes lors de l’exécution des activités de migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-105">Spending time on planning will ensure that you do not encounter issues while executing migration activities.</span></span>

> [!NOTE]
> <span data-ttu-id="d816c-106">L’aide suivante a majoritairement été rédigée par l’équipe Azure Customer Advisory et les architectes de solutions cloud qui travaillent avec les clients sur la migration d’environnements de grande taille.</span><span class="sxs-lookup"><span data-stu-id="d816c-106">The following guidance was heavily contributed to by the Azure Customer Advisory team and Cloud Solution architects working with customers on migrating large environments.</span></span> <span data-ttu-id="d816c-107">De ce fait, ce document sera mis à jour au fil de l’émergence de nouveaux modèles de réussite : revenez régulièrement voir s’il comporte de nouvelles recommandations.</span><span class="sxs-lookup"><span data-stu-id="d816c-107">As such this document will continue to get updated as new patterns of success emerge, so check back from time to time to see if there are any new recommendations.</span></span>

<span data-ttu-id="d816c-108">Le parcours de migration comprend quatre étapes générales :</span><span class="sxs-lookup"><span data-stu-id="d816c-108">There are four general phases of the migration journey:</span></span><br>

![Phases de migration](../media/virtual-machines-windows-migration-classic-resource-manager/plan-labtest-migrate-beyond.png)

## <a name="plan"></a><span data-ttu-id="d816c-110">Planification</span><span class="sxs-lookup"><span data-stu-id="d816c-110">Plan</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="d816c-111">Considérations et concessions techniques</span><span class="sxs-lookup"><span data-stu-id="d816c-111">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="d816c-112">Selon la dimension de vos spécifications techniques, vos zones géographiques et vos pratiques opérationnelles, il peut être intéressant de prendre en compte les aspects suivants :</span><span class="sxs-lookup"><span data-stu-id="d816c-112">Depending on your technical requirements size, geographies and operational practices, you might want to consider:</span></span>

1. <span data-ttu-id="d816c-113">Pourquoi votre organisation souhaite-t-elle passer à Azure Resource Manager ?</span><span class="sxs-lookup"><span data-stu-id="d816c-113">Why is Azure Resource Manager desired for your organization?</span></span>  <span data-ttu-id="d816c-114">Quelles sont les raisons métier de la migration ?</span><span class="sxs-lookup"><span data-stu-id="d816c-114">What are the business reasons for a migration?</span></span>
2. <span data-ttu-id="d816c-115">Quelles sont les justifications techniques d’Azure Resource Manager ?</span><span class="sxs-lookup"><span data-stu-id="d816c-115">What are the technical reasons for Azure Resource Manager?</span></span>  <span data-ttu-id="d816c-116">Quels services Azure supplémentaires aimeriez-vous utiliser, le cas échéant ?</span><span class="sxs-lookup"><span data-stu-id="d816c-116">What (if any) additional Azure services would you like to leverage?</span></span>
3. <span data-ttu-id="d816c-117">Quelles sont les applications (ou les groupes de machines virtuelles) incluses dans la migration ?</span><span class="sxs-lookup"><span data-stu-id="d816c-117">Which application (or sets of virtual machines) is included in the migration?</span></span>
4. <span data-ttu-id="d816c-118">Quels sont les scénarios pris en charge par l’API de migration ?</span><span class="sxs-lookup"><span data-stu-id="d816c-118">Which scenarios are supported with the migration API?</span></span>  <span data-ttu-id="d816c-119">Consultez les [fonctionnalités et configurations non prises en charge](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span><span class="sxs-lookup"><span data-stu-id="d816c-119">Review the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span></span>
5. <span data-ttu-id="d816c-120">Vos équipes opérationnelles prennent-elles maintenant en charge les applications/machines virtuelles dans les modes Classic et Azure Resource Manager ?</span><span class="sxs-lookup"><span data-stu-id="d816c-120">Will your operational teams now support applications/VMs in both Classic and Azure Resource Manager?</span></span>
6. <span data-ttu-id="d816c-121">En quoi Azure Resource Manager modifie-t-il les processus de déploiement, de gestion, de surveillance et de création de rapports concernant vos machines virtuelles ?</span><span class="sxs-lookup"><span data-stu-id="d816c-121">How (if at all) does Azure Resource Manager change your VM deployment, management, monitoring, and reporting processes?</span></span>  <span data-ttu-id="d816c-122">Est-il nécessaire de mettre à jour vos scripts de déploiement ?</span><span class="sxs-lookup"><span data-stu-id="d816c-122">Do your deployment scripts need to be updated?</span></span>
7. <span data-ttu-id="d816c-123">Quel est le plan de communication pour avertir les parties prenantes (propriétaires d’applications, utilisateurs finaux et propriétaires d’infrastructure) ?</span><span class="sxs-lookup"><span data-stu-id="d816c-123">What is the communications plan to alert stakeholders (end users, application owners, and infrastructure owners)?</span></span>
8. <span data-ttu-id="d816c-124">Selon la complexité de l’environnement, faut-il mettre en place une période de maintenance pendant laquelle l’application n’est pas accessible aux utilisateurs finaux et aux propriétaires d’applications ?</span><span class="sxs-lookup"><span data-stu-id="d816c-124">Depending on the complexity of the environment, should there be a maintenance period where the application is unavailable to end users and to application owners?</span></span>  <span data-ttu-id="d816c-125">Si oui, pendant combien de temps ?</span><span class="sxs-lookup"><span data-stu-id="d816c-125">If so, for how long?</span></span>
9. <span data-ttu-id="d816c-126">Quel est le plan de formation permettant aux parties prenantes d’être compétentes et expertes sur Azure Resource Manager ?</span><span class="sxs-lookup"><span data-stu-id="d816c-126">What is the training plan to ensure stakeholders are knowledgeable and proficient in Azure Resource Manager?</span></span>
10. <span data-ttu-id="d816c-127">Quel est le plan de gestion des programmes ou des projets pour la migration ?</span><span class="sxs-lookup"><span data-stu-id="d816c-127">What is the program management or project management plan for the migration?</span></span>
11. <span data-ttu-id="d816c-128">Quelle est la chronologie de la migration d’Azure Resource Manager et d’autres feuilles de route technologiques associées ?</span><span class="sxs-lookup"><span data-stu-id="d816c-128">What are the timelines for the Azure Resource Manager migration and other related technology road maps?</span></span>  <span data-ttu-id="d816c-129">Sont-elles parfaitement coordonnées ?</span><span class="sxs-lookup"><span data-stu-id="d816c-129">Are they optimally aligned?</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="d816c-130">Modèles de réussite</span><span class="sxs-lookup"><span data-stu-id="d816c-130">Patterns of success</span></span>

<span data-ttu-id="d816c-131">Les clients les plus efficaces disposent de plans détaillés qui abordent, documentent et régissent les questions précédentes.</span><span class="sxs-lookup"><span data-stu-id="d816c-131">Successful customers have detailed plans where the preceding questions are discussed, documented and governed.</span></span>  <span data-ttu-id="d816c-132">Veillez à diffuser largement les plans de migration auprès des commanditaires et des parties prenantes.</span><span class="sxs-lookup"><span data-stu-id="d816c-132">Ensure the migration plans are broadly communicated to sponsors and stakeholders.</span></span>  <span data-ttu-id="d816c-133">Informez-vous sur les options de migration à votre disposition ; il est fortement recommandé de lire cet ensemble de documents sur la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-133">Equip yourself with knowledge about your migration options; reading through this migration document set below is highly recommended.</span></span>

* [<span data-ttu-id="d816c-134">Vue d’ensemble de la migration prise en charge par la plateforme de ressources IaaS Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-134">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-135">Étude technique approfondie de la migration prise en charge par la plateforme de ressources Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-135">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-136">Planification de la migration des ressources IaaS d’Azure Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-136">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-137">Faire migrer des ressources IaaS Classic vers Azure Resource Manager à l’aide d’Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="d816c-137">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-138">Faire migrer des ressources IaaS Classic vers Azure Resource Manager à l’aide de l’interface de ligne de commande Azure</span><span class="sxs-lookup"><span data-stu-id="d816c-138">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../linux/migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-139">Outils de la communauté pour aider à la migration de ressources IaaS de Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-139">Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-140">Passer en revue les erreurs courantes de migration</span><span class="sxs-lookup"><span data-stu-id="d816c-140">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-141">Passez en revue les questions fréquemment posées sur la migration des ressources IaaS de Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-141">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="d816c-142">Pièges à éviter</span><span class="sxs-lookup"><span data-stu-id="d816c-142">Pitfalls to avoid</span></span>

- <span data-ttu-id="d816c-143">Absence de planification.</span><span class="sxs-lookup"><span data-stu-id="d816c-143">Failure to plan.</span></span>  <span data-ttu-id="d816c-144">Les étapes technologiques de cette migration sont éprouvées et le résultat est prévisible.</span><span class="sxs-lookup"><span data-stu-id="d816c-144">The technology steps of this migration are proven and the outcome is predictable.</span></span>
- <span data-ttu-id="d816c-145">Présupposition selon laquelle l’API de migration prise en charge par la plateforme gérera tous les scénarios.</span><span class="sxs-lookup"><span data-stu-id="d816c-145">Assumption that the platform supported migration API will account for all scenarios.</span></span> <span data-ttu-id="d816c-146">Lisez les [fonctionnalités et configurations non prises en charge](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) pour connaître les scénarios pris en charge.</span><span class="sxs-lookup"><span data-stu-id="d816c-146">Read the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) to understand what scenarios are supported.</span></span>
- <span data-ttu-id="d816c-147">Absence de planification d’une interruption potentielle de l’application pour les utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="d816c-147">Not planning potential application outage for end users.</span></span>  <span data-ttu-id="d816c-148">Prévoyez suffisamment de tampon pour avertir convenablement les utilisateurs finaux que l’application sera potentiellement indisponible pendant un certain temps.</span><span class="sxs-lookup"><span data-stu-id="d816c-148">Plan enough buffer to adequately warn end users of potentially unavailable application time.</span></span>


## <a name="lab-test"></a><span data-ttu-id="d816c-149">Test en labo</span><span class="sxs-lookup"><span data-stu-id="d816c-149">Lab Test</span></span>

<span data-ttu-id="d816c-150">**Répliquer un environnement et effectuer un test de migration**</span><span class="sxs-lookup"><span data-stu-id="d816c-150">**Replicate your environment and do a test migration**</span></span>
  > [!NOTE]
  > <span data-ttu-id="d816c-151">La réplication à l’exact de l’environnement existant est réalisée à l’aide d’un outil développé par la communauté, qui n’est pas pris en charge officiellement par le Support Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d816c-151">Exact replication of your existing environment is executed by using a community-contributed tool which is not officially supported by Microsoft Support.</span></span> <span data-ttu-id="d816c-152">Il s’agit par conséquent d’une étape **facultative** ; cependant, c’est le meilleur moyen d’identifier des problèmes sans toucher aux environnements de production.</span><span class="sxs-lookup"><span data-stu-id="d816c-152">Therefore, it is an **optional** step but it is the best way to find out issues without touching your production environments.</span></span> <span data-ttu-id="d816c-153">S’il ne vous est pas possible d’utiliser un outil développé par la communauté, lisez le passage sur la recommandation d’essai à blanc Valider/Préparer/Abandonner ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="d816c-153">If using a community-contributed tool is not an option, then read about the Validate/Prepare/Abort Dry Run recommendation below.</span></span>
  >

  <span data-ttu-id="d816c-154">La meilleure solution pour garantir une migration sans heurts est de mener un test en labo de votre scénario en particulier (calcul, mise en réseau et stockage),</span><span class="sxs-lookup"><span data-stu-id="d816c-154">Conducting a lab test of your exact scenario (compute, networking, and storage) is the best way to ensure a smooth migration.</span></span> <span data-ttu-id="d816c-155">afin de garantir :</span><span class="sxs-lookup"><span data-stu-id="d816c-155">This will help ensure:</span></span>

  - <span data-ttu-id="d816c-156">Un laboratoire totalement distinct ou un environnement hors production existant pour les tests.</span><span class="sxs-lookup"><span data-stu-id="d816c-156">A wholly separate lab or an existing non-production environment to test.</span></span> <span data-ttu-id="d816c-157">Nous recommandons un laboratoire totalement distinct qui peut faire l’objet de plusieurs migrations et de modifications destructrices.</span><span class="sxs-lookup"><span data-stu-id="d816c-157">We recommend a wholly separate lab that can be migrated repeatedly and can be destructively modified.</span></span>  <span data-ttu-id="d816c-158">Les scripts pour collecter/sérialiser les métadonnées à partir des abonnements réels sont listés ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="d816c-158">Scripts to collect/hydrate metadata from the real subscriptions are listed below.</span></span>
  - <span data-ttu-id="d816c-159">Il est judicieux de créer le laboratoire dans un abonnement distinct.</span><span class="sxs-lookup"><span data-stu-id="d816c-159">It's a good idea to create the lab in a separate subscription.</span></span> <span data-ttu-id="d816c-160">En effet, le labo sera détruit à plusieurs reprises, et le fait de disposer d’un abonnement distinct et isolé réduit le risque de supprimer accidentellement des données réelles.</span><span class="sxs-lookup"><span data-stu-id="d816c-160">The reason is that the lab will be torn down repeatedly, and having a separate, isolated subscription will reduce the chance that something real will get accidentally deleted.</span></span>

  <span data-ttu-id="d816c-161">Pour cela, vous pouvez utiliser l’outil AsmMetadataParser.</span><span class="sxs-lookup"><span data-stu-id="d816c-161">This can be accomplished by using the AsmMetadataParser tool.</span></span> [<span data-ttu-id="d816c-162">En savoir plus sur cet outil</span><span class="sxs-lookup"><span data-stu-id="d816c-162">Read more about this tool here</span></span>](https://github.com/Azure/classic-iaas-resourcemanager-migration/tree/master/AsmToArmMigrationApiToolset)

### <a name="patterns-of-success"></a><span data-ttu-id="d816c-163">Modèles de réussite</span><span class="sxs-lookup"><span data-stu-id="d816c-163">Patterns of success</span></span>

<span data-ttu-id="d816c-164">Voici quelques-uns des problèmes rencontrés dans la majorité des migrations importantes.</span><span class="sxs-lookup"><span data-stu-id="d816c-164">The following were issues discovered in many of the larger migrations.</span></span> <span data-ttu-id="d816c-165">Cette liste n’est pas exhaustive. Reportez-vous aux [fonctionnalités et configurations non prises en charge](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) pour plus de détails.</span><span class="sxs-lookup"><span data-stu-id="d816c-165">This is not an exhaustive list and you should refer to the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) for more detail.</span></span>  <span data-ttu-id="d816c-166">Il n’est pas certain que vous rencontriez ces problèmes techniques ; si c’est le cas, vous garantirez une meilleure expérience en résolvant ces points avant de tenter la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-166">You may or may not encounter these technical issues but if you do solving these before attempting migration will ensure a smoother experience.</span></span>

- <span data-ttu-id="d816c-167">**Effectuer un essai à blanc Valider/Préparer/Abandonner** : il s’agit sans doute de l’étape la plus importante pour garantir la réussite de la migration de Classic vers Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-167">**Do a Validate/Prepare/Abort Dry Run** -  This is perhaps the most important step to ensure Classic to Azure Resource Manager migration success.</span></span> <span data-ttu-id="d816c-168">L’API de migration comporte trois étapes principales : valider, préparer et soumettre.</span><span class="sxs-lookup"><span data-stu-id="d816c-168">The migration API has three main steps: Validate, Prepare and Commit.</span></span> <span data-ttu-id="d816c-169">L’étape Valider lit l’état de votre environnement Classic et retourne un résultat comportant tous les problèmes.</span><span class="sxs-lookup"><span data-stu-id="d816c-169">Validate will read the state of your classic environment and return a result of all issues.</span></span> <span data-ttu-id="d816c-170">Toutefois, dans la mesure où il peut exister des problèmes dans la pile Azure Resource Manager, elle n’intercepte pas tout.</span><span class="sxs-lookup"><span data-stu-id="d816c-170">However, because some issues might exist in the Azure Resource Manager stack, Validate will not catch everything.</span></span> <span data-ttu-id="d816c-171">L’étape suivante du processus de migration, Préparer, aide à mettre en évidence ces problèmes.</span><span class="sxs-lookup"><span data-stu-id="d816c-171">The next step in migration process, Prepare will help expose those issues.</span></span> <span data-ttu-id="d816c-172">Elle déplace les métadonnées de Classic vers Azure Resource Manager, mais ne valide pas le déplacement et ne supprime ni ne modifie rien du côté de Classic.</span><span class="sxs-lookup"><span data-stu-id="d816c-172">Prepare will move the metadata from Classic to Azure Resource Manager, but will not commit the move, and will not remove or change anything on the Classic side.</span></span> <span data-ttu-id="d816c-173">L’essai à blanc implique de préparer la migration, puis d’abandonner (**ne pas soumettre**) la préparation de la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-173">The dry run involves preparing the migration, then aborting (**not committing**) the migration prepare.</span></span> <span data-ttu-id="d816c-174">L’essai à blanc Valider/Préparer/Abandonner a pour objectif de montrer toutes les métadonnées de la pile Azure Resource Manager, de les examiner (*par programme ou dans le portail*) et de vérifier que tous les éléments migrent correctement et viennent à bout des problèmes techniques.</span><span class="sxs-lookup"><span data-stu-id="d816c-174">The goal of validate/prepare/abort dry run is to see all of the metadata in the Azure Resource Manager stack, examine it (*programmatically or in Portal*), and verify that everything migrates correctly, and work through technical issues.</span></span>  <span data-ttu-id="d816c-175">Il donne également une idée de la durée de la migration de façon à permettre de planifier un temps d’arrêt adapté.</span><span class="sxs-lookup"><span data-stu-id="d816c-175">It will also give you a sense of migration duration so you can plan for downtime accordingly.</span></span>  <span data-ttu-id="d816c-176">Une opération Valider/Préparer/Abandonner ne provoque pas de temps d’arrêt pour les utilisateurs ; par conséquent, elle ne perturbe pas l’utilisation des applications.</span><span class="sxs-lookup"><span data-stu-id="d816c-176">A validate/prepare/abort does not cause any user downtime; therefore, it is non-disruptive to application usage.</span></span>
  - <span data-ttu-id="d816c-177">Les éléments ci-dessous devront être résolus avant l’essai à blanc, mais un test d’essai à blanc éliminera également sans risque ces étapes de préparation si elles ne sont pas suivies.</span><span class="sxs-lookup"><span data-stu-id="d816c-177">The items below will need to be solved before the dry run, but a dry run test will also safely flush out these preparation steps if they are missed.</span></span> <span data-ttu-id="d816c-178">Nous avons conclu que l’essai à blanc représente un moyen sûr et incomparable d’assurer la préparation à la migration lors de la migration d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="d816c-178">During enterprise migration, we've found the dry run to be a safe and invaluable way to ensure migration readiness.</span></span>
  - <span data-ttu-id="d816c-179">Au cours de la préparation, le plan de contrôle (opérations de gestion Azure) sera verrouillé pour l’ensemble du réseau virtuel ; ainsi, aucune modification ne pourra être apportée aux métadonnées de la machine virtuelle au cours de l’opération Valider/Préparer/Abandonner.</span><span class="sxs-lookup"><span data-stu-id="d816c-179">When prepare is running, the control plane (Azure management operations) will be locked for the whole virtual network, so no changes can be made to VM metadata during validate/prepare/abort.</span></span>  <span data-ttu-id="d816c-180">Par ailleurs, aucune fonction de l’application (bureau à distance, utilisation de la machine virtuelle, etc.) ne sera affectée.</span><span class="sxs-lookup"><span data-stu-id="d816c-180">But otherwise any application function (RD, VM usage, etc.) will be unaffected.</span></span>  <span data-ttu-id="d816c-181">Les utilisateurs des machines virtuelles ne sauront pas que l’essai à blanc est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d816c-181">Users of the VMs will not know that the dry run is being executed.</span></span>

- <span data-ttu-id="d816c-182">**Circuits ExpressRoute et VPN**.</span><span class="sxs-lookup"><span data-stu-id="d816c-182">**Express Route Circuits and VPN**.</span></span> <span data-ttu-id="d816c-183">Actuellement, il n’est pas possible de migrer les passerelles ExpressRoute avec liens d’autorisation sans temps mort.</span><span class="sxs-lookup"><span data-stu-id="d816c-183">Currently Express Route Gateways with authorization links cannot be migrated without downtime.</span></span> <span data-ttu-id="d816c-184">Vous trouverez une solution de contournement à la page [Migrer des circuits ExpressRoute et les réseaux virtuels associés du modèle de déploiement Classic au modèle de déploiement Resource Manager](../../expressroute/expressroute-migration-classic-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="d816c-184">For the workaround, see [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../../expressroute/expressroute-migration-classic-resource-manager.md).</span></span>

- <span data-ttu-id="d816c-185">**Extensions de machines virtuelles** : les extensions de machines virtuelles sont potentiellement l’un des principaux obstacles à la migration de machines virtuelles en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d816c-185">**VM Extensions** - Virtual Machine extensions are potentially one of the biggest roadblocks to migrating running VMs.</span></span> <span data-ttu-id="d816c-186">La correction des extensions de machines virtuelles peut prendre plus d’un ou deux jours : adaptez votre planification en conséquence.</span><span class="sxs-lookup"><span data-stu-id="d816c-186">Remediation of VM Extensions could take upwards of 1-2 days, so plan accordingly.</span></span>  <span data-ttu-id="d816c-187">Un agent Azure fonctionnel est nécessaire pour rapporter l’état des extensions de machines virtuelles en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d816c-187">A working Azure agent is needed to report back VM Extension status of running VMs.</span></span> <span data-ttu-id="d816c-188">Si l’état renvoyé pour une machine virtuelle en cours d’exécution est mauvais, la migration sera interrompue.</span><span class="sxs-lookup"><span data-stu-id="d816c-188">If the status comes back as bad for a running VM, this will halt migration.</span></span> <span data-ttu-id="d816c-189">L’agent lui-même n’a pas besoin d’être en état de fonctionnement pour permettre la migration, mais, si des extensions existent sur la machine virtuelle, un agent fonctionnel ET une connectivité Internet sortante (avec DNS) seront nécessaires pour que la migration se poursuive.</span><span class="sxs-lookup"><span data-stu-id="d816c-189">The agent itself does not need to be in working order to enable migration, but if extensions exist on the VM, then both a working agent AND outbound internet connectivity (with DNS) will be needed for migration to move forward.</span></span>
  - <span data-ttu-id="d816c-190">Si la connectivité à un serveur DNS est perdue pendant la migration, toutes les extensions de machines virtuelles, à l’exception de BGInfo version 1.\* doivent être supprimées de chacune des machines virtuelles avant la préparation de la migration, puis rajoutées aux machines virtuelles après la migration d’Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-190">If connectivity to a DNS server is lost during migration, all VM Extensions except BGInfo version 1.\* need to first be removed from every VM before migration prepare, and subsequently re-added back to the VM after Azure Resource Manager migration.</span></span>  <span data-ttu-id="d816c-191">**Cela concerne uniquement les machines virtuelles en cours d’exécution.**</span><span class="sxs-lookup"><span data-stu-id="d816c-191">**This is only for VMs that are running.**</span></span>  <span data-ttu-id="d816c-192">Si les machines virtuelles sont arrêtées et libérées, il n’est pas nécessaire de supprimer les extensions de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="d816c-192">If the VMs are stopped deallocated, VM Extensions do not need to be removed.</span></span>

  > [!NOTE]
  > <span data-ttu-id="d816c-193">De nombreuses extensions, par exemple Azure Diagnostics et la surveillance Security Center, se réinstallent après la migration. Les supprimer n’est donc pas un problème.</span><span class="sxs-lookup"><span data-stu-id="d816c-193">Many extensions like Azure diagnostics and security center monitoring will reinstall themselves after migration, so removing them is not a problem.</span></span>

  - <span data-ttu-id="d816c-194">Par ailleurs, assurez-vous que les groupes de sécurité réseau ne restreignent pas l’accès à Internet sortant.</span><span class="sxs-lookup"><span data-stu-id="d816c-194">In addition, make sure Network Security Groups are not restricting outbound internet access.</span></span> <span data-ttu-id="d816c-195">Cela peut se produire avec certaines configurations de groupes de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="d816c-195">This can happen with some Network Security Groups configurations.</span></span> <span data-ttu-id="d816c-196">Un accès à Internet sortant (et un DNS) est nécessaire pour migrer les extensions de machines virtuelles vers Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-196">Outbound internet access (and DNS) is needed for VM Extensions to be migrated to Azure Resource Manager.</span></span>
  - <span data-ttu-id="d816c-197">Deux versions de l’extension BGInfo existent et sont appelées versions 1 et 2.</span><span class="sxs-lookup"><span data-stu-id="d816c-197">Two versions of the BGInfo extension exist and are called versions 1 and 2.</span></span>  

      - <span data-ttu-id="d816c-198">Si la machine virtuelle utilise l’extension BGInfo version 1, vous pouvez laisser cette extension telle quelle.</span><span class="sxs-lookup"><span data-stu-id="d816c-198">If the VM is using the BGInfo version 1 extension, you can leave this extension as is.</span></span> <span data-ttu-id="d816c-199">L’API de migration ignore cette extension.</span><span class="sxs-lookup"><span data-stu-id="d816c-199">The migration API skips this extension.</span></span> <span data-ttu-id="d816c-200">L’extension BGInfo peut être ajoutée après la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-200">The BGInfo extension can be added after migration.</span></span>
      - <span data-ttu-id="d816c-201">Si la machine virtuelle utilise l’extension BGInfo version 2 basée sur JSON, cela signifie que la machine virtuelle a été créée à l’aide du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="d816c-201">If the VM is using the JSON-based BGInfo version 2 extension, the VM was created using the Azure portal.</span></span> <span data-ttu-id="d816c-202">L’API de migration inclut cette extension dans la migration vers Azure Resource Manager, à condition que l’agent fonctionne et dispose d’un accès internet sortant (et d’un DNS).</span><span class="sxs-lookup"><span data-stu-id="d816c-202">The migration API includes this extension in the migration to Azure Resource Manager, provided the agent is working and has outbound internet access (and DNS).</span></span>

  - <span data-ttu-id="d816c-203">**Option de correction 1**.</span><span class="sxs-lookup"><span data-stu-id="d816c-203">**Remediation Option 1**.</span></span> <span data-ttu-id="d816c-204">Si vous savez que vos machines virtuelles ne disposeront pas d’un accès à Internet sortant, d’un service DNS fonctionnel et d’agents Azure fonctionnels, désinstallez toutes les extensions de machines virtuelles dans le cadre de la migration avant l’opération Préparer, puis réinstallez-les après la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-204">If you know your VMs will not have outbound internet access, a working DNS service, and working Azure agents on the VMs, then uninstall all VM extensions as part of the migration before Prepare, then reinstall the VM Extensions after migration.</span></span>
  - <span data-ttu-id="d816c-205">**Option de correction 2**.</span><span class="sxs-lookup"><span data-stu-id="d816c-205">**Remediation Option 2**.</span></span> <span data-ttu-id="d816c-206">Si les extensions de machines virtuelles représentent un trop gros obstacle, il est également possible d’arrêter/libérer toutes les machines virtuelles avant la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-206">If VM extensions are too big of a hurdle, another option is to shutdown/deallocate all VMs before migration.</span></span> <span data-ttu-id="d816c-207">Migrez les machines virtuelles libérées, puis redémarrez-les du côté d’Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-207">Migrate the deallocated VMs, then restart them on the Azure Resource Manager side.</span></span> <span data-ttu-id="d816c-208">L’avantage est que les extensions de machines virtuelles seront migrées.</span><span class="sxs-lookup"><span data-stu-id="d816c-208">The benefit here is that VM extensions will migrate.</span></span> <span data-ttu-id="d816c-209">L’inconvénient est que toutes les adresses IP virtuelles publiques seront perdues (ce qui peut être inenvisageable) et, bien évidemment, que les machines virtuelles seront arrêtées, ce qui aura un impact bien plus important sur les applications en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d816c-209">The downside is that all public facing Virtual IPs will be lost (this may be a non-starter), and obviously the VMs will shut down causing a much greater impact on working applications.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d816c-210">S’il existe une stratégie de sécurité Azure Security Center configurée sur les machines virtuelles en cours d’exécution et de migration, elle doit être arrêtée avant de supprimer les extensions ; sinon, l’extension de contrôle de la sécurité sera réinstallée automatiquement sur la machine virtuelle après sa suppression.</span><span class="sxs-lookup"><span data-stu-id="d816c-210">If an Azure Security Center policy is configured against the running VMs being migrated, the security policy needs to be stopped before removing extensions, otherwise the security monitoring extension will be reinstalled automatically on the VM after removing it.</span></span>

- <span data-ttu-id="d816c-211">**Groupes à haute disponibilité** : pour qu’un réseau virtuel migre vers Azure Resource Manager, toutes les machines virtuelles contenues dans le déploiement Classic (c’est-à-dire le service cloud) doivent se trouver dans un même groupe à haute disponibilité ou bien n’être dans aucun groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d816c-211">**Availability Sets** - For a virtual network (vNet) to be migrated to Azure Resource Manager, the Classic deployment (i.e. cloud service) contained VMs must all be in one availability set, or the VMs must all not be in any availability set.</span></span> <span data-ttu-id="d816c-212">Il n’est pas possible d’avoir plusieurs groupes à haute disponibilité dans le service cloud avec Azure Resource Manager ; cela a pour effet de stopper la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-212">Having more than one availability set in the cloud service is not compatible with Azure Resource Manager and will halt migration.</span></span>  <span data-ttu-id="d816c-213">En outre, il ne peut pas y avoir des machines virtuelles dans un groupe à haute disponibilité et d’autres ailleurs que dans un groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d816c-213">Additionally, there cannot be some VMs in an availability set, and some VMs not in an availability set.</span></span> <span data-ttu-id="d816c-214">Pour résoudre ce problème, vous devrez corriger ou remanier votre service cloud.</span><span class="sxs-lookup"><span data-stu-id="d816c-214">To resolve this, you will need to remediate or reshuffle your cloud service.</span></span>  <span data-ttu-id="d816c-215">Adaptez votre planification en conséquence, car cette opération peut prendre du temps.</span><span class="sxs-lookup"><span data-stu-id="d816c-215">Plan accordingly as this might be time consuming.</span></span>

- <span data-ttu-id="d816c-216">**Déploiements de rôles Web/de travail** : il n’est pas possible de migrer les services cloud contenant des rôles Web et de travail vers Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-216">**Web/Worker Role Deployments** -  Cloud Services containing web and worker roles cannot migrate to Azure Resource Manager.</span></span> <span data-ttu-id="d816c-217">Les rôles Web/de travail doivent être retirés du réseau virtuel pour que la migration puisse démarrer.</span><span class="sxs-lookup"><span data-stu-id="d816c-217">The web/worker roles must first be removed from the virtual network before migration can start.</span></span>  <span data-ttu-id="d816c-218">Une solution classique consiste tout simplement à déplacer les instances de rôles Web/de travail vers un réseau virtuel Classic distinct, également lié à un circuit ExpressRoute, ou à migrer le code vers des App Services PaaS plus récents (cet aspect n’est pas abordé dans ce document).</span><span class="sxs-lookup"><span data-stu-id="d816c-218">A typical solution is to just move web/worker role instances to a separate Classic virtual network that is also linked to an ExpressRoute circuit, or to migrate the code to newer PaaS App Services (this discussion is beyond the scope of this document).</span></span> <span data-ttu-id="d816c-219">Dans le premier cas de redéploiement, créez un réseau virtuel Classic, déplacez/redéployez les rôles Web/de travail sur ce réseau virtuel, puis supprimez les déploiements du réseau virtuel déplacé.</span><span class="sxs-lookup"><span data-stu-id="d816c-219">In the former redeploy case, create a new Classic virtual network, move/redeploy the web/worker roles to that new virtual network, then delete the deployments from the virtual network being moved.</span></span> <span data-ttu-id="d816c-220">Aucune modification de code requise :</span><span class="sxs-lookup"><span data-stu-id="d816c-220">No code changes required.</span></span> <span data-ttu-id="d816c-221">La nouvelle fonctionnalité [d’homologation de réseau virtuel](../../virtual-network/virtual-network-peering-overview.md) peut être utilisée pour apparier le réseau virtuel Classic contenant les rôles Web/de travail et d’autres réseaux virtuels de la même région Azure, par exemple le réseau virtuel en cours de migration (**après la fin de la migration du réseau virtuel, car il n’est pas possible de migrer des réseaux virtuels homologués**), ce qui fournit les mêmes fonctionnalités sans perte de performances et sans pénalités du point de vue de la latence et de la bande passante.</span><span class="sxs-lookup"><span data-stu-id="d816c-221">The new [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md) capability can be used to peer together the classic virtual network containing the web/worker roles and other virtual networks in the same Azure region such as the virtual network being migrated (**after virtual network migration is completed as peered virtual networks cannot be migrated**), hence providing the same capabilities with no performance loss and no latency/bandwidth penalties.</span></span> <span data-ttu-id="d816c-222">Grâce à l’ajout de [l’homologation de réseau virtuel](../../virtual-network/virtual-network-peering-overview.md), il est maintenant facile de corriger les déploiements de rôles Web/de travail, de sorte qu’ils ne bloquent pas la migration vers Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-222">Given the addition of [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md), web/worker role deployments can now easily be mitigated and not block the migration to Azure Resource Manager.</span></span>

- <span data-ttu-id="d816c-223">**Quotas d’Azure Resource Manager** : les régions Azure disposent de quotas/limites distincts pour Classic et Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-223">**Azure Resource Manager Quotas** - Azure regions have separate quotas/limits for both Classic and Azure Resource Manager.</span></span> <span data-ttu-id="d816c-224">Bien qu’il n’y ait pas de nouveau matériel utilisé dans un scénario de migration *(on permute les machines virtuelles existantes de Classic vers Azure Resource Manager)*, les quotas d’Azure Resource Manager devront être mis en place avec une capacité suffisante pour que la migration puisse démarrer.</span><span class="sxs-lookup"><span data-stu-id="d816c-224">Even though in a migration scenario new hardware isn't being consumed *(we're swapping existing VMs from Classic to Azure Resource Manager)*, Azure Resource Manager quotas still need to be in place with enough capacity before migration can start.</span></span> <span data-ttu-id="d816c-225">Vous trouverez ci-dessous les principales limites dont nous avons constaté qu’elles posaient problème.</span><span class="sxs-lookup"><span data-stu-id="d816c-225">Listed below are the major limits we've seen cause problems.</span></span>  <span data-ttu-id="d816c-226">Ouvrez un ticket de support concernant les quotas pour relever les limites.</span><span class="sxs-lookup"><span data-stu-id="d816c-226">Open a quota support ticket to raise the limits.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d816c-227">Ces limites doivent être relevées dans la même région que votre environnement actuel à migrer.</span><span class="sxs-lookup"><span data-stu-id="d816c-227">These limits need to be raised in the same region as your current environment to be migrated.</span></span>
    >

    - <span data-ttu-id="d816c-228">Interfaces réseau</span><span class="sxs-lookup"><span data-stu-id="d816c-228">Network Interfaces</span></span>
    - <span data-ttu-id="d816c-229">Équilibreurs de charge</span><span class="sxs-lookup"><span data-stu-id="d816c-229">Load Balancers</span></span>
    - <span data-ttu-id="d816c-230">Adresses IP publiques</span><span class="sxs-lookup"><span data-stu-id="d816c-230">Public IPs</span></span>
    - <span data-ttu-id="d816c-231">Adresses IP publiques statiques</span><span class="sxs-lookup"><span data-stu-id="d816c-231">Static Public IPs</span></span>
    - <span data-ttu-id="d816c-232">Cœurs</span><span class="sxs-lookup"><span data-stu-id="d816c-232">Cores</span></span>
    - <span data-ttu-id="d816c-233">Groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="d816c-233">Network Security Groups</span></span>
    - <span data-ttu-id="d816c-234">Tables de routage</span><span class="sxs-lookup"><span data-stu-id="d816c-234">Route Tables</span></span>

    <span data-ttu-id="d816c-235">Vous pouvez vérifier vos quotas Azure Resource Manager actuels en utilisant les commandes suivantes avec la dernière version d’Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d816c-235">You can check your current Azure Resource Manager quotas using the following commands with the latest version of Azure PowerShell.</span></span>

    <span data-ttu-id="d816c-236">**Calcul** *(cœurs, groupes à haute disponibilité)*</span><span class="sxs-lookup"><span data-stu-id="d816c-236">**Compute** *(Cores, Availability Sets)*</span></span>

    ```powershell
    Get-AzureRmVMUsage -Location <azure-region>
    ```

    <span data-ttu-id="d816c-237">**Réseau** *(réseaux virtuels, adresses IP publiques statiques, adresses IP publiques, groupes de sécurité réseau, interfaces réseau, équilibreurs de charge, tables de routage)*</span><span class="sxs-lookup"><span data-stu-id="d816c-237">**Network** *(Virtual Networks, Static Public IPs, Public IPs, Network Security Groups, Network Interfaces, Load Balancers, Route Tables)*</span></span>

    ```powershell
    Get-AzureRmUsage /subscriptions/<subscription-id>/providers/Microsoft.Network/locations/<azure-region> -ApiVersion 2016-03-30 | Format-Table
    ```

    <span data-ttu-id="d816c-238">**Stockage** *(compte de stockage)*</span><span class="sxs-lookup"><span data-stu-id="d816c-238">**Storage** *(Storage Account)*</span></span>

    ```powershell
    Get-AzureRmStorageUsage
    ```

- <span data-ttu-id="d816c-239">**Limitations de l’API Azure Resource Manager** : si vous avez un environnement de grande taille (par exemple,</span><span class="sxs-lookup"><span data-stu-id="d816c-239">**Azure Resource Manager API throttling limits** - If you have a large enough environment (eg.</span></span> <span data-ttu-id="d816c-240">plus de 400 machines virtuelles dans un réseau virtuel), vous risquez d’atteindre les limitations par défaut de l’API pour les écritures (actuellement, `1200 writes/hour`) dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-240">> 400 VMs in a VNET), you might hit the default API throttling limits for writes (currently `1200 writes/hour`) in Azure Resource Manager.</span></span> <span data-ttu-id="d816c-241">Avant de commencer la migration, il vous faut déclencher un ticket de support afin d’augmenter cette limite pour votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="d816c-241">Before starting migration, you should raise a support ticket to increase this limit for your subscription.</span></span>


- <span data-ttu-id="d816c-242">**État Provisioning Timed Out pour une machine virtuelle** : si une machine virtuelle a l’état `provisioning timed out`, la situation doit être résolue avant la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-242">**Provisioning Timed Out VM Status** - If any VM has the status of `provisioning timed out`, this needs to be resolved pre-migration.</span></span> <span data-ttu-id="d816c-243">La seule façon de procéder consiste à déprovisionner/réapprovisionner la machine virtuelle (la supprimer, conserver le disque et recréer la machine virtuelle) avec temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="d816c-243">The only way to do this is with downtime by deprovisioning/reprovisioning the VM (delete it, keep the disk, and recreate the VM).</span></span>

- <span data-ttu-id="d816c-244">**État RoleStateUnknown pour une machine virtuelle** : si la migration s’arrête à cause d’un message d’erreur `role state unknown`, inspectez la machine virtuelle avec le portail et vérifiez qu’elle est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="d816c-244">**RoleStateUnknown VM Status** - If migration halts due to a `role state unknown` error message, inspect the VM using the portal and ensure it is running.</span></span> <span data-ttu-id="d816c-245">Cette erreur disparaîtra normalement toute seule (aucune correction n’est requise) après quelques minutes ; souvent de type temporaire, elle est généralement constatée au cours des opérations `start`, `stop` et `restart` de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d816c-245">This error will typically go away on its own (no remediation required) after a few minutes and is often a transient type often seen during a Virtual Machine `start`, `stop`, `restart` operations.</span></span> <span data-ttu-id="d816c-246">**Pratique recommandée :** effectuez une nouvelle tentative de migration après quelques minutes.</span><span class="sxs-lookup"><span data-stu-id="d816c-246">**Recommended practice:** re-try migration again after a few minutes.</span></span>

- <span data-ttu-id="d816c-247">**La structure du cluster n’existe pas** : il arrive qu’il ne soit pas possible de migrer une machine virtuelle pour d’obscures raisons.</span><span class="sxs-lookup"><span data-stu-id="d816c-247">**Fabric Cluster does not exist** -  In some cases, certain VMs cannot be migrated for various odd reasons.</span></span> <span data-ttu-id="d816c-248">Parmi les cas connus figure celui où la machine virtuelle a été créée récemment (aux alentours de la semaine précédente) et s’est retrouvée sur un cluster Azure qui n’était pas encore équipé pour les charges de travail Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-248">One of these known cases is if the VM was recently created (within the last week or so) and happened to land an Azure cluster that is not yet equipped for Azure Resource Manager workloads.</span></span>  <span data-ttu-id="d816c-249">Vous obtiendrez une erreur `fabric cluster does not exist` et il ne sera pas possible de migrer la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d816c-249">You will get an error that says `fabric cluster does not exist` and the VM cannot be migrated.</span></span> <span data-ttu-id="d816c-250">Il suffit en général de patienter quelques jours pour résoudre ce problème en particulier, car le cluster sera bientôt compatible avec Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-250">Waiting a couple of days will usually resolve this particular problem as the cluster will soon get Azure Resource Manager enabled.</span></span> <span data-ttu-id="d816c-251">Toutefois, il existe une solution de contournement immédiat, qui consiste à `stop-deallocate` la machine virtuelle, puis à poursuivre la migration et à lancer la sauvegarde de la machine virtuelle dans Azure Resource Manager après la migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-251">However, one immediate workaround is to `stop-deallocate` the VM, then continue forward with migration, and start the VM back up in Azure Resource Manager after migrating.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="d816c-252">Pièges à éviter</span><span class="sxs-lookup"><span data-stu-id="d816c-252">Pitfalls to avoid</span></span>

- <span data-ttu-id="d816c-253">Ne prenez pas de raccourcis et ne négligez pas l’essai à blanc Valider/Préparer/Abandonner des migrations.</span><span class="sxs-lookup"><span data-stu-id="d816c-253">Do not take shortcuts and omit the validate/prepare/abort dry run migrations.</span></span>
- <span data-ttu-id="d816c-254">La plupart, voire la totalité, des problèmes potentiels apparaîtront au cours des étapes Valider/Préparer/Abandonner.</span><span class="sxs-lookup"><span data-stu-id="d816c-254">Most, if not all, of your potential issues will surface during the validate/prepare/abort steps.</span></span>

## <a name="migration"></a><span data-ttu-id="d816c-255">Migration</span><span class="sxs-lookup"><span data-stu-id="d816c-255">Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="d816c-256">Considérations et concessions techniques</span><span class="sxs-lookup"><span data-stu-id="d816c-256">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="d816c-257">Maintenant que vous êtes venu à bout des problèmes connus de votre environnement, vous êtes prêt.</span><span class="sxs-lookup"><span data-stu-id="d816c-257">Now you are ready because you have worked through the known issues with your environment.</span></span>

<span data-ttu-id="d816c-258">Voici les aspects à prendre en compte pour les migrations réelles :</span><span class="sxs-lookup"><span data-stu-id="d816c-258">For the real migrations, you might want to consider:</span></span>

1. <span data-ttu-id="d816c-259">Planifiez et programmez le réseau virtuel (la plus petite unité de migration) avec une priorité supérieure.</span><span class="sxs-lookup"><span data-stu-id="d816c-259">Plan and schedule the virtual network (smallest unit of migration) with increasing priority.</span></span>  <span data-ttu-id="d816c-260">Commencez par les réseaux virtuels simples, puis continuez avec les réseaux virtuels plus complexes.</span><span class="sxs-lookup"><span data-stu-id="d816c-260">Do the simple virtual networks first, and progress with the more complicated virtual networks.</span></span>
2. <span data-ttu-id="d816c-261">La plupart des clients ont des environnements de production et hors production.</span><span class="sxs-lookup"><span data-stu-id="d816c-261">Most customers will have non-production and production environments.</span></span>  <span data-ttu-id="d816c-262">Planifiez la production en dernier.</span><span class="sxs-lookup"><span data-stu-id="d816c-262">Schedule production last.</span></span>
3. <span data-ttu-id="d816c-263">**(FACULTATIF)** Planifiez un temps d’arrêt pour maintenance avec suffisamment de mémoire tampon en cas de problème inattendu.</span><span class="sxs-lookup"><span data-stu-id="d816c-263">**(OPTIONAL)** Schedule a maintenance downtime with plenty of buffer in case unexpected issues arise.</span></span>
4. <span data-ttu-id="d816c-264">Communiquez et coordonnez-vous avec vos équipes du support technique au cas où des problèmes surviendraient.</span><span class="sxs-lookup"><span data-stu-id="d816c-264">Communicate with and align with your support teams in case issues arise.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="d816c-265">Modèles de réussite</span><span class="sxs-lookup"><span data-stu-id="d816c-265">Patterns of success</span></span>

<span data-ttu-id="d816c-266">Il est conseillé d’étudier et d’appliquer l’aide technique de la section _Test en labo_ avant toute migration réelle.</span><span class="sxs-lookup"><span data-stu-id="d816c-266">The technical guidance from the _Lab Test_ section should be considered and mitigated prior to a real migration.</span></span>  <span data-ttu-id="d816c-267">Avec les tests appropriés, la migration se déroule sans aucun problème.</span><span class="sxs-lookup"><span data-stu-id="d816c-267">With adequate testing, the migration is actually a non-event.</span></span>  <span data-ttu-id="d816c-268">Pour les environnements de production, il peut être utile de disposer d’un support supplémentaire, par exemple un partenaire de confiance Microsoft ou des services Microsoft Premier.</span><span class="sxs-lookup"><span data-stu-id="d816c-268">For production environments, it might be helpful to have additional support, such as a trusted Microsoft partner or Microsoft Premier services.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="d816c-269">Pièges à éviter</span><span class="sxs-lookup"><span data-stu-id="d816c-269">Pitfalls to avoid</span></span>

<span data-ttu-id="d816c-270">Des tests incomplets peuvent provoquer des problèmes et des retards de migration.</span><span class="sxs-lookup"><span data-stu-id="d816c-270">Not fully testing may cause issues and delay in the migration.</span></span>  

## <a name="beyond-migration"></a><span data-ttu-id="d816c-271">Au-delà de la migration</span><span class="sxs-lookup"><span data-stu-id="d816c-271">Beyond Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="d816c-272">Considérations et concessions techniques</span><span class="sxs-lookup"><span data-stu-id="d816c-272">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="d816c-273">Maintenant que vous êtes en mode Azure Resource Manager, tirez le meilleur parti de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="d816c-273">Now that you are in Azure Resource Manager, maximize the platform.</span></span>  <span data-ttu-id="d816c-274">Lisez la [vue d’ensemble d’Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md) pour découvrir les avantages supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="d816c-274">Read the [overview of Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md) to find out about additional benefits.</span></span>

<span data-ttu-id="d816c-275">Points importants à prendre en compte :</span><span class="sxs-lookup"><span data-stu-id="d816c-275">Things to consider:</span></span>

- <span data-ttu-id="d816c-276">Groupez la migration avec d’autres activités.</span><span class="sxs-lookup"><span data-stu-id="d816c-276">Bundling the migration with other activities.</span></span>  <span data-ttu-id="d816c-277">La plupart des clients choisissent une fenêtre de maintenance des applications.</span><span class="sxs-lookup"><span data-stu-id="d816c-277">Most customers opt for an application maintenance window.</span></span>  <span data-ttu-id="d816c-278">Dans ce cas, vous pouvez utiliser ce temps d’arrêt pour activer d’autres fonctionnalités d’Azure Resource Manager, comme le chiffrement et la migration vers Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="d816c-278">If so, you might want to use this downtime to enable other Azure Resource Manager capabilities like encryption and migration to Managed Disks.</span></span>
- <span data-ttu-id="d816c-279">Repassez en revue les raisons techniques et commerciales d’Azure Resource Manager ; activez les services supplémentaires disponibles uniquement sur Azure Resource Manager qui s’appliquent à votre environnement.</span><span class="sxs-lookup"><span data-stu-id="d816c-279">Revisit the technical and business reasons for Azure Resource Manager; enable the additional services available only on Azure Resource Manager that apply to your environment.</span></span>
- <span data-ttu-id="d816c-280">Modernisez votre environnement avec les services PaaS.</span><span class="sxs-lookup"><span data-stu-id="d816c-280">Modernize your environment with PaaS services.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="d816c-281">Modèles de réussite</span><span class="sxs-lookup"><span data-stu-id="d816c-281">Patterns of success</span></span>

<span data-ttu-id="d816c-282">Ciblez les services que vous voulez activer dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-282">Be purposeful on what services you now want to enable in Azure Resource Manager.</span></span>  <span data-ttu-id="d816c-283">De nombreux clients trouvent les services ci-dessous incontournables pour leur environnement Azure :</span><span class="sxs-lookup"><span data-stu-id="d816c-283">Many customers find the below compelling for their Azure environments:</span></span>

- <span data-ttu-id="d816c-284">[Contrôle d’accès en fonction du rôle](../../azure-resource-manager/resource-group-overview.md#access-control).</span><span class="sxs-lookup"><span data-stu-id="d816c-284">[Role Based Access Control](../../azure-resource-manager/resource-group-overview.md#access-control).</span></span>
- <span data-ttu-id="d816c-285">[Modèles Azure Resource Manager, pour un déploiement plus facile et mieux contrôlé](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="d816c-285">[Azure Resource Manager templates for easier and more controlled deployment](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span></span>
- <span data-ttu-id="d816c-286">[Tags](../../azure-resource-manager/resource-group-using-tags.md) (balises).</span><span class="sxs-lookup"><span data-stu-id="d816c-286">[Tags](../../azure-resource-manager/resource-group-using-tags.md).</span></span>
- [<span data-ttu-id="d816c-287">Contrôle d’activité</span><span class="sxs-lookup"><span data-stu-id="d816c-287">Activity Control</span></span>](../../azure-resource-manager/resource-group-audit.md)
- [<span data-ttu-id="d816c-288">Stratégies de ressources</span><span class="sxs-lookup"><span data-stu-id="d816c-288">Resource Policies</span></span>](../../azure-resource-manager/resource-manager-policy.md)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="d816c-289">Pièges à éviter</span><span class="sxs-lookup"><span data-stu-id="d816c-289">Pitfalls to avoid</span></span>

<span data-ttu-id="d816c-290">Gardez à l’esprit les raisons pour lesquelles vous avez démarré ce parcours de migration de Classic vers Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d816c-290">Remember why you started this Classic to Azure Resource Manager migration journey.</span></span>  <span data-ttu-id="d816c-291">Quelles étaient les raisons commerciales initiales ?</span><span class="sxs-lookup"><span data-stu-id="d816c-291">What were the original business reasons?</span></span> <span data-ttu-id="d816c-292">Avez-vous atteint l’objectif métier ?</span><span class="sxs-lookup"><span data-stu-id="d816c-292">Did you achieve the business reason?</span></span>


## <a name="next-steps"></a><span data-ttu-id="d816c-293">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="d816c-293">Next steps</span></span>

* [<span data-ttu-id="d816c-294">Vue d’ensemble de la migration prise en charge par la plateforme de ressources IaaS Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-294">Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-295">Étude technique approfondie de la migration prise en charge par la plateforme de ressources Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-295">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-296">Faire migrer des ressources IaaS Classic vers Azure Resource Manager à l’aide d’Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="d816c-296">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-297">Faire migrer des ressources IaaS Classic vers Azure Resource Manager à l’aide de l’interface de ligne de commande Azure</span><span class="sxs-lookup"><span data-stu-id="d816c-297">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../linux/migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-298">Outils de la communauté pour aider à la migration de ressources IaaS de Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-298">Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-299">Passer en revue les erreurs courantes de migration</span><span class="sxs-lookup"><span data-stu-id="d816c-299">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="d816c-300">Passez en revue les questions fréquemment posées sur la migration des ressources IaaS de Classic vers Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d816c-300">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
