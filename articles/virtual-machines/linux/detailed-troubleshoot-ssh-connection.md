---
title: "Dépannage détaillé de SSH pour une machine virtuelle Azure | Microsoft Docs"
description: "Étapes supplémentaires de dépannage détaillées des problèmes de connexion à une machine virtuelle Azure"
keywords: "refus de la connexion ssh,erreur ssh,ssh azure,échec de la connexion ssh"
services: virtual-machines-linux
documentationcenter: 
author: iainfoulds
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: b8e8be5f-e8a6-489d-9922-9df8de32e839
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: support-article
ms.date: 07/06/2017
ms.author: iainfou
ms.openlocfilehash: 9ccdb3fbca21264065eeb1c4e46314c62af4c2e8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="detailed-ssh-troubleshooting-steps-for-issues-connecting-to-a-linux-vm-in-azure"></a><span data-ttu-id="d2cb9-104">Étapes détaillées supplémentaires de résolution des problèmes SSH pour la connexion à une machine virtuelle Linux dans Azure</span><span class="sxs-lookup"><span data-stu-id="d2cb9-104">Detailed SSH troubleshooting steps for issues connecting to a Linux VM in Azure</span></span>
<span data-ttu-id="d2cb9-105">Il existe de nombreuses raisons pour lesquelles le client SSH peut ne pas pouvoir accéder au service SSH sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-105">There are many possible reasons that the SSH client might not be able to reach the SSH service on the VM.</span></span> <span data-ttu-id="d2cb9-106">Si vous avez suivi les [étapes de dépannage générales pour SSH](troubleshoot-ssh-connection.md), vous devez aussi résoudre le problème de connexion.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-106">If you have followed through the more [general SSH troubleshooting steps](troubleshoot-ssh-connection.md), you need to further troubleshoot the connection issue.</span></span> <span data-ttu-id="d2cb9-107">Cet article vous guide tout au long des étapes de dépannage détaillées pour déterminer où la connexion SSH échoue et comment résoudre le problème.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-107">This article guides you through detailed troubleshooting steps to determine where the SSH connection is failing and how to resolve it.</span></span>

## <a name="take-preliminary-steps"></a><span data-ttu-id="d2cb9-108">Commencer par les étapes préliminaires</span><span class="sxs-lookup"><span data-stu-id="d2cb9-108">Take preliminary steps</span></span>
<span data-ttu-id="d2cb9-109">La figure suivante montre les composants concernés.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-109">The following diagram shows the components that are involved.</span></span>

![Diagramme qui affiche les composants d’un service SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

<span data-ttu-id="d2cb9-111">Les étapes suivantes vous aident à isoler la source du problème et à déterminer différentes solutions.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-111">The following steps help you isolate the source of the failure and figure out solutions or workarounds.</span></span>

1. <span data-ttu-id="d2cb9-112">Vérifiez l’état de la machine virtuelle sur le portail.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-112">Check the status of the VM in the portal.</span></span>
   <span data-ttu-id="d2cb9-113">Dans le [portail Azure](https://portal.azure.com), sélectionnez **Machines virtuelles** > *Nom de la machine virtuelle*.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-113">In the [Azure portal](https://portal.azure.com), select **Virtual machines** > *VM name*.</span></span>

   <span data-ttu-id="d2cb9-114">Le volet d’état de la machine virtuelle doit afficher **En cours d’exécution**.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-114">The status pane for the VM should show **Running**.</span></span> <span data-ttu-id="d2cb9-115">Faites défiler vers le bas pour voir l’activité récente des ressources de calcul, de stockage et réseau.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-115">Scroll down to show recent activity for compute, storage, and network resources.</span></span>

2. <span data-ttu-id="d2cb9-116">Sélectionnez **Paramètres** pour examiner les points de terminaison, les adresses IP, les groupes de sécurité réseau et les autres paramètres.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-116">Select **Settings** to examine endpoints, IP addresses, network security groups, and other settings.</span></span>

   <span data-ttu-id="d2cb9-117">La machine virtuelle doit avoir un point de terminaison défini pour le trafic SSH que vous pouvez consulter sous **Points de terminaison** ou **[Groupe de sécurité réseau](../../virtual-network/virtual-networks-nsg.md)**.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-117">The VM should have an endpoint defined for SSH traffic that you can view in **Endpoints** or **[Network security group](../../virtual-network/virtual-networks-nsg.md)**.</span></span> <span data-ttu-id="d2cb9-118">Les points de terminaison pour les machines virtuelles créées à l’aide de Resource Manager sont stockés dans un groupe de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-118">Endpoints in VMs that were created by using Resource Manager are stored in a network security group.</span></span> <span data-ttu-id="d2cb9-119">Vérifiez également que les règles ont été appliquées au groupe de sécurité réseau et qu’elles sont référencées dans le sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-119">Also, verify that the rules have been applied to the network security group and that they're referenced in the subnet.</span></span>

<span data-ttu-id="d2cb9-120">Pour vérifier la connectivité réseau, contrôlez les points de terminaison configurés et déterminez si vous pouvez atteindre la machine virtuelle par le biais d’un autre protocole, comme HTTP ou un autre service.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-120">To verify network connectivity, check the configured endpoints and see if you can reach the VM through another protocol, such as HTTP or another service.</span></span>

<span data-ttu-id="d2cb9-121">Une fois ces étapes effectuées, essayez à nouveau la connexion SSH.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-121">After these steps, try the SSH connection again.</span></span>

## <a name="find-the-source-of-the-issue"></a><span data-ttu-id="d2cb9-122">Découvrir la source du problème</span><span class="sxs-lookup"><span data-stu-id="d2cb9-122">Find the source of the issue</span></span>
<span data-ttu-id="d2cb9-123">Le client SSH sur votre ordinateur n’a peut-être pas pu accéder au service SSH sur la machine virtuelle Azure en raison de problèmes ou de mauvaises configurations dans les domaines suivants :</span><span class="sxs-lookup"><span data-stu-id="d2cb9-123">The SSH client on your computer might fail to reach the SSH service on the Azure VM due to issues or misconfigurations in the following areas:</span></span>

* [<span data-ttu-id="d2cb9-124">Ordinateur client SSH</span><span class="sxs-lookup"><span data-stu-id="d2cb9-124">SSH client computer</span></span>](#source-1-ssh-client-computer)
* [<span data-ttu-id="d2cb9-125">Appareil du périmètre de l’organisation</span><span class="sxs-lookup"><span data-stu-id="d2cb9-125">Organization edge device</span></span>](#source-2-organization-edge-device)
* [<span data-ttu-id="d2cb9-126">point de terminaison de service cloud et liste de contrôle d’accès (ACL) ;</span><span class="sxs-lookup"><span data-stu-id="d2cb9-126">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="d2cb9-127">Groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="d2cb9-127">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="d2cb9-128">Machine virtuelle Linux Azure</span><span class="sxs-lookup"><span data-stu-id="d2cb9-128">Linux-based Azure VM</span></span>](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a><span data-ttu-id="d2cb9-129">Source 1 : ordinateur client SSH</span><span class="sxs-lookup"><span data-stu-id="d2cb9-129">Source 1: SSH client computer</span></span>
<span data-ttu-id="d2cb9-130">Pour vérifier que votre ordinateur n’est pas la source du problème, vérifiez qu’il peut établir des connexions SSH avec un autre ordinateur Linux local.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-130">To eliminate your computer as the source of the failure, verify that it can make SSH connections to another on-premises, Linux-based computer.</span></span>

![Diagramme qui indique les composants de l’ordinateur client SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

<span data-ttu-id="d2cb9-132">Si la connexion échoue, recherchez les problèmes suivants sur votre ordinateur :</span><span class="sxs-lookup"><span data-stu-id="d2cb9-132">If the connection fails, check for the following issues on your computer:</span></span>

* <span data-ttu-id="d2cb9-133">un paramètre de pare-feu local qui bloque le trafic SSH entrant ou sortant (TCP 22) ;</span><span class="sxs-lookup"><span data-stu-id="d2cb9-133">A local firewall setting that is blocking inbound or outbound SSH traffic (TCP 22)</span></span>
* <span data-ttu-id="d2cb9-134">un logiciel de proxy client installé localement qui empêche les connexions SSH ;</span><span class="sxs-lookup"><span data-stu-id="d2cb9-134">Locally installed client proxy software that is preventing SSH connections</span></span>
* <span data-ttu-id="d2cb9-135">un logiciel de surveillance réseau installé localement qui empêche les connexions SSH ;</span><span class="sxs-lookup"><span data-stu-id="d2cb9-135">Locally installed network monitoring software that is preventing SSH connections</span></span>
* <span data-ttu-id="d2cb9-136">d’autres types de logiciels de sécurité qui surveillent le trafic ou autorisent/interdisent des types spécifiques de trafic.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-136">Other types of security software that either monitor traffic or allow/disallow specific types of traffic</span></span>

<span data-ttu-id="d2cb9-137">Si une de ces conditions s’applique, désactivez temporairement le logiciel et tentez d’établir une connexion SSH à un ordinateur local pour connaître le motif du blocage de la connexion sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-137">If one of these conditions apply, temporarily disable the software and try an SSH connection to an on-premises computer to find out the reason the connection is being blocked on your computer.</span></span> <span data-ttu-id="d2cb9-138">Ensuite, contactez votre administrateur réseau pour corriger les paramètres du logiciel et autoriser les connexions SSH.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-138">Then work with your network administrator to correct the software settings to allow SSH connections.</span></span>

<span data-ttu-id="d2cb9-139">Si vous utilisez l’authentification par certificat, vérifiez que vous avez ces autorisations sur le dossier .ssh dans votre répertoire de base :</span><span class="sxs-lookup"><span data-stu-id="d2cb9-139">If you are using certificate authentication, verify that you have these permissions to the .ssh folder in your home directory:</span></span>

* <span data-ttu-id="d2cb9-140">Chmod 700 ~/.ssh</span><span class="sxs-lookup"><span data-stu-id="d2cb9-140">Chmod 700 ~/.ssh</span></span>
* <span data-ttu-id="d2cb9-141">Chmod 644 ~/.ssh/\*.pub</span><span class="sxs-lookup"><span data-stu-id="d2cb9-141">Chmod 644 ~/.ssh/\*.pub</span></span>
* <span data-ttu-id="d2cb9-142">Chmod 600 ~/.ssh/id_rsa (ou tout autre fichier contenant vos clés privées)</span><span class="sxs-lookup"><span data-stu-id="d2cb9-142">Chmod 600 ~/.ssh/id_rsa (or any other files that have your private keys stored in them)</span></span>
* <span data-ttu-id="d2cb9-143">Chmod 644 ~/.ssh/known_hosts (contient les hôtes auxquels vous vous êtes connecté via SSH)</span><span class="sxs-lookup"><span data-stu-id="d2cb9-143">Chmod 644 ~/.ssh/known_hosts (contains hosts that you’ve connected to via SSH)</span></span>

## <a name="source-2-organization-edge-device"></a><span data-ttu-id="d2cb9-144">Source 2 : appareil du périmètre de l’organisation</span><span class="sxs-lookup"><span data-stu-id="d2cb9-144">Source 2: Organization edge device</span></span>
<span data-ttu-id="d2cb9-145">Pour vérifier que votre appareil de périmètre de l’organisation n’est pas la cause du problème, vérifiez qu’un ordinateur directement connecté à Internet peut établir des connexions SSH à votre machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-145">To eliminate your organization edge device as the source of the failure, verify that a computer that's directly connected to the Internet can make SSH connections to your Azure VM.</span></span> <span data-ttu-id="d2cb9-146">Si vous accédez à la machine virtuelle par le biais d’un VPN de site à site ou une connexion Azure ExpressRoute, passez à [Source 4 : groupes de sécurité réseau](#nsg).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-146">If you are accessing the VM over a site-to-site VPN or an Azure ExpressRoute connection, skip to [Source 4: Network security groups](#nsg).</span></span>

![Diagramme qui met en évidence un appareil du périmètre de l’organisation](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

<span data-ttu-id="d2cb9-148">Si votre ordinateur n’est pas directement connecté à Internet, créez une machine virtuelle Azure dans son propre groupe de ressources ou service cloud, et utilisez-la.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-148">If you don't have a computer that is directly connected to the Internet, create a new Azure VM in its own resource group or cloud service and use it.</span></span> <span data-ttu-id="d2cb9-149">Pour plus d’informations, consultez [Créer une machine virtuelle exécutant Linux dans Azure](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-149">For more information, see [Create a virtual machine running Linux in Azure](quick-create-cli.md).</span></span> <span data-ttu-id="d2cb9-150">Une fois le test terminé, supprimez le groupe de ressources ou la machine virtuelle et le service cloud.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-150">Delete the resource group or VM and cloud service when you're done with your testing.</span></span>

<span data-ttu-id="d2cb9-151">Si vous pouvez créer une connexion SSH avec un ordinateur directement connecté à Internet, vérifiez sur l’appareil de périmètre de l’organisation :</span><span class="sxs-lookup"><span data-stu-id="d2cb9-151">If you can create an SSH connection with a computer that's directly connected to the Internet, check your organization edge device for:</span></span>

* <span data-ttu-id="d2cb9-152">un pare-feu interne qui bloque le trafic SSH avec Internet ;</span><span class="sxs-lookup"><span data-stu-id="d2cb9-152">An internal firewall that's blocking SSH traffic with the Internet</span></span>
* <span data-ttu-id="d2cb9-153">un serveur proxy qui empêche les connexions SSH ;</span><span class="sxs-lookup"><span data-stu-id="d2cb9-153">A proxy server that's preventing SSH connections</span></span>
* <span data-ttu-id="d2cb9-154">un logiciel de détection d’intrusion ou de surveillance réseau s’exécutant sur les appareils de votre réseau de périmètre qui empêche les connexions SSH.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-154">Intrusion detection or network monitoring software running on devices in your edge network that's preventing SSH connections</span></span>

<span data-ttu-id="d2cb9-155">Contactez votre administrateur réseau pour corriger les paramètres de vos appareils du périmètre de l’organisation pour permettre le trafic SSH avec Internet.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-155">Work with your network administrator to correct the settings of your organization edge devices to allow SSH traffic with the Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="d2cb9-156">Source 3 : Point de terminaison de service cloud et liste de contrôle d’accès</span><span class="sxs-lookup"><span data-stu-id="d2cb9-156">Source 3: Cloud service endpoint and ACL</span></span>
> [!NOTE]
> <span data-ttu-id="d2cb9-157">Cette source ne s’applique qu’aux machines virtuelles créées à l’aide du modèle de déploiement Classic.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-157">This source applies only to VMs that were created by using the classic deployment model.</span></span> <span data-ttu-id="d2cb9-158">Pour les machines virtuelles créées à l’aide de Resource Manager, passez à [Source 4 : groupes de sécurité réseau](#nsg).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-158">For VMs that were created by using Resource Manager, skip to [source 4: Network security groups](#nsg).</span></span>

<span data-ttu-id="d2cb9-159">Pour éliminer le point de terminaison du service cloud et la liste de contrôle d’accès comme source du problème, vérifiez qu’une autre machine virtuelle Azure dans le même réseau virtuel peut établir des connexions SSH à votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-159">To eliminate the cloud service endpoint and ACL as the source of the failure, verify that another Azure VM in the same virtual network can make SSH connections to your VM.</span></span>

![Diagramme qui met en évidence un point de terminaison de service cloud et une liste de contrôle d’accès](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

<span data-ttu-id="d2cb9-161">Si le réseau virtuel ne contient pas une autre machine virtuelle, vous pouvez facilement en créer une.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-161">If you don't have another VM in the same virtual network, you can easily create one.</span></span> <span data-ttu-id="d2cb9-162">Pour plus d’informations, consultez [Création d’une machine virtuelle Linux sur Azure à l’aide de l’interface de ligne de commande](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-162">For more information, see [Create a Linux VM on Azure using the CLI](quick-create-cli.md).</span></span> <span data-ttu-id="d2cb9-163">Une fois le test terminé, supprimez la machine virtuelle supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-163">Delete the extra VM when you are done with your testing.</span></span>

<span data-ttu-id="d2cb9-164">Si vous pouvez créer une connexion SSH avec une machine virtuelle dans le même réseau virtuel, vérifiez les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="d2cb9-164">If you can create an SSH connection with a VM in the same virtual network, check the following areas:</span></span>

* <span data-ttu-id="d2cb9-165">**la configuration du point de terminaison pour le trafic SSH sur la machine virtuelle cible ;**</span><span class="sxs-lookup"><span data-stu-id="d2cb9-165">**The endpoint configuration for SSH traffic on the target VM.**</span></span> <span data-ttu-id="d2cb9-166">le port TCP privé du point de terminaison doit correspondre au port TCP écouté par le service SSH de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-166">The private TCP port of the endpoint should match the TCP port on which the SSH service on the VM is listening.</span></span> <span data-ttu-id="d2cb9-167">(Par défaut, il s’agit du port 22.)</span><span class="sxs-lookup"><span data-stu-id="d2cb9-167">(The default port is 22).</span></span> <span data-ttu-id="d2cb9-168">Vérifiez le numéro de port TCP SSH dans le portail Azure en sélectionnant **Machines virtuelles** > *Nom de la machine virtuelle* > **Paramètres** > **Points de terminaison**.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-168">Verify the SSH TCP port number in the Azure portal by selecting **Virtual machines** > *VM name* > **Settings** > **Endpoints**.</span></span>
* <span data-ttu-id="d2cb9-169">**La liste de contrôle d’accès du point de terminaison du trafic SSH sur la machine virtuelle cible.**</span><span class="sxs-lookup"><span data-stu-id="d2cb9-169">**The ACL for the SSH traffic endpoint on the target virtual machine.**</span></span> <span data-ttu-id="d2cb9-170">Une liste de contrôle d’accès vous permet de spécifier le trafic Internet entrant autorisé ou interdit, en fonction de l’adresse IP source.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-170">An ACL enables you to specify allowed or denied incoming traffic from the Internet, based on its source IP address.</span></span> <span data-ttu-id="d2cb9-171">Une mauvaise configuration des listes de contrôle d’accès peut empêcher le trafic SSH entrant d’accéder au point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-171">Misconfigured ACLs can prevent incoming SSH traffic to the endpoint.</span></span> <span data-ttu-id="d2cb9-172">Consultez vos listes de contrôle d’accès et vérifiez que le trafic entrant provenant des adresses IP publiques de votre proxy ou d’un autre serveur de périmètre est autorisé.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-172">Check your ACLs to ensure that incoming traffic from the public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="d2cb9-173">Pour plus d'informations, consultez [À propos des listes de contrôle d'accès (ACL) réseau](../../virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-173">For more information, see [About network access control lists (ACLs)](../../virtual-network/virtual-networks-acl.md).</span></span>

<span data-ttu-id="d2cb9-174">Pour vérifier que le point de terminaison n’est pas la source du problème, supprimez le point de terminaison actuel, créez-en un autre et spécifiez le nom SSH (port TCP 22 comme port public et privé).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-174">To eliminate the endpoint as a source of the problem, remove the current endpoint, create another endpoint, and specify the SSH name (TCP port 22 for the public and private port number).</span></span> <span data-ttu-id="d2cb9-175">Pour plus d’informations, consultez [Configuration des points de terminaison sur une machine virtuelle dans Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-175">For more information, see [Set up endpoints on a virtual machine in Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<a id="nsg"></a>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="d2cb9-176">Source 4 : groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="d2cb9-176">Source 4: Network security groups</span></span>
<span data-ttu-id="d2cb9-177">Les groupes de sécurité réseau vous permettent de mieux contrôler le trafic entrant et sortant autorisé.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-177">Network security groups enable you to have more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="d2cb9-178">Vous pouvez créer des règles qui s’étendent aux sous-réseaux et aux services cloud d’un réseau virtuel Azure.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-178">You can create rules that span subnets and cloud services in an Azure virtual network.</span></span> <span data-ttu-id="d2cb9-179">Vérifiez les règles de votre groupe de sécurité réseau pour vous assurer que le trafic SSH vers et depuis Internet est autorisé.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-179">Check your network security group rules to ensure that SSH traffic to and from the Internet is allowed.</span></span>
<span data-ttu-id="d2cb9-180">Pour plus d'informations, consultez [À propos des groupes de sécurité réseau](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-180">For more information, see [About network security groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

<span data-ttu-id="d2cb9-181">Vous pouvez également utiliser Vérification IP pour valider la configuration NSG.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-181">You can also use IP Verify to validate the NSG configuration.</span></span> <span data-ttu-id="d2cb9-182">Pour plus d’informations, consultez [Vue d’ensemble de la surveillance réseau Azure](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-182">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="source-5-linux-based-azure-virtual-machine"></a><span data-ttu-id="d2cb9-183">Source 5 : machine virtuelle Azure Linux</span><span class="sxs-lookup"><span data-stu-id="d2cb9-183">Source 5: Linux-based Azure virtual machine</span></span>
<span data-ttu-id="d2cb9-184">La dernière source des problèmes possibles est la machine virtuelle Azure elle-même.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-184">The last source of possible problems is the Azure virtual machine itself.</span></span>

![Diagramme qui met en évidence une machine virtuelle Azure Linux](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

<span data-ttu-id="d2cb9-186">Si ce n’est déjà fait, suivez les instructions permettant de [réinitialiser un mot de passe ou SSH pour les machines virtuelles Linux](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d2cb9-186">If you haven't done so already, follow the instructions [to reset a password or SSH for Linux-based virtual machines](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="d2cb9-187">Essayez une nouvelle fois de vous connecter à partir de votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-187">Try connecting from your computer again.</span></span> <span data-ttu-id="d2cb9-188">Si l’échec se reproduit, l’une des raisons suivantes en est peut-être la cause :</span><span class="sxs-lookup"><span data-stu-id="d2cb9-188">If it still fails, the following are some of the possible issues:</span></span>

* <span data-ttu-id="d2cb9-189">Le service SSH n’est pas en cours d’exécution sur la machine virtuelle cible.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-189">The SSH service is not running on the target virtual machine.</span></span>
* <span data-ttu-id="d2cb9-190">Le service SSH n’est pas à l’écoute sur le port TCP 22.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-190">The SSH service is not listening on TCP port 22.</span></span> <span data-ttu-id="d2cb9-191">Pour effectuer un test, installez un client telnet sur votre ordinateur local et exécutez « telnet *NomServiceCloud*.cloudapp.net 22 ».</span><span class="sxs-lookup"><span data-stu-id="d2cb9-191">To test, install a telnet client on your local computer and run "telnet *cloudServiceName*.cloudapp.net 22".</span></span> <span data-ttu-id="d2cb9-192">Cette étape détermine si la machine virtuelle autorise les communications entrantes et sortantes avec le point de terminaison SSH.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-192">This step determines if the virtual machine allows inbound and outbound communication to the SSH endpoint.</span></span>
* <span data-ttu-id="d2cb9-193">Le pare-feu local sur la machine virtuelle cible a des règles qui empêchent le trafic SSH entrant ou sortant.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-193">The local firewall on the target virtual machine has rules that are preventing inbound or outbound SSH traffic.</span></span>
* <span data-ttu-id="d2cb9-194">Un logiciel de détection d’intrusion ou de surveillance réseau s’exécutant sur la machine virtuelle Azure empêche les connexions SSH.</span><span class="sxs-lookup"><span data-stu-id="d2cb9-194">Intrusion detection or network monitoring software that's running on the Azure virtual machine is preventing SSH connections.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d2cb9-195">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="d2cb9-195">Additional resources</span></span>
<span data-ttu-id="d2cb9-196">Pour plus d’informations sur la résolution des problèmes d’accès aux applications, consultez la page [Résolution des problèmes d’accès à une application exécutée sur une machine virtuelle Azure](troubleshoot-app-connection.md)</span><span class="sxs-lookup"><span data-stu-id="d2cb9-196">For more information about troubleshooting application access, see [Troubleshoot access to an application running on an Azure virtual machine](troubleshoot-app-connection.md)</span></span>
