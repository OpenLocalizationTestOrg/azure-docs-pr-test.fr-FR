---
title: "aaaDNS options de résolution de noms pour les ordinateurs virtuels Linux dans Azure"
description: "Scénarios de résolution de noms pour les machines virtuelles Linux dans Azure IaaS, notamment les services DNS fournis, le DNS externe hybride et l’apport de son propre serveur DNS."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: 7df2320b6f6b42b479bf4070ea60fe5770a78a41
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="eee6f-103">Options de résolution de noms DNS pour les machines virtuelles Linux dans Azure</span><span class="sxs-lookup"><span data-stu-id="eee6f-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="eee6f-104">Azure fournit une résolution des noms DNS par défaut pour toutes les machines virtuelles d’un même réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="eee6f-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="eee6f-105">Vous pouvez implémenter votre propre solution de résolution de noms DNS en configurant vos propres services DNS sur vos machines virtuelles hébergées sur Azure.</span><span class="sxs-lookup"><span data-stu-id="eee6f-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="eee6f-106">Hello scénarios suivants vous aideront à choisir hello qui fonctionne pour votre situation.</span><span class="sxs-lookup"><span data-stu-id="eee6f-106">hello following scenarios should help you choose hello one that works for your situation.</span></span>

* [<span data-ttu-id="eee6f-107">Résolution de noms fournie par Azure</span><span class="sxs-lookup"><span data-stu-id="eee6f-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="eee6f-108">Résolution de noms à l’aide de votre propre serveur DNS</span><span class="sxs-lookup"><span data-stu-id="eee6f-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="eee6f-109">type Hello de résolution de noms que vous utilisez dépend du mode vos machines virtuelles et les instances de rôle doivent toocommunicate entre eux.</span><span class="sxs-lookup"><span data-stu-id="eee6f-109">hello type of name resolution that you use depends on how your virtual machines and role instances need toocommunicate with each other.</span></span>

<span data-ttu-id="eee6f-110">Hello tableau suivant illustre des scénarios et solutions de résolution de nom correspondantes :</span><span class="sxs-lookup"><span data-stu-id="eee6f-110">hello following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="eee6f-111">**Scénario**</span><span class="sxs-lookup"><span data-stu-id="eee6f-111">**Scenario**</span></span> | <span data-ttu-id="eee6f-112">**Solution**</span><span class="sxs-lookup"><span data-stu-id="eee6f-112">**Solution**</span></span> | <span data-ttu-id="eee6f-113">**Suffixe**</span><span class="sxs-lookup"><span data-stu-id="eee6f-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="eee6f-114">Résolution de noms entre instances de rôle ou machines virtuelles dans hello même réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="eee6f-114">Name resolution between role instances or virtual machines in hello same virtual network</span></span> |[<span data-ttu-id="eee6f-115">Résolution de noms fournie par Azure</span><span class="sxs-lookup"><span data-stu-id="eee6f-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="eee6f-116">nom d’hôte ou nom de domaine complet</span><span class="sxs-lookup"><span data-stu-id="eee6f-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="eee6f-117">Résolution de noms entre des instances de rôle ou des machines virtuelles situées dans des réseaux virtuels différents</span><span class="sxs-lookup"><span data-stu-id="eee6f-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="eee6f-118">Serveurs DNS gérés par le client qui transfèrent les requêtes entre les réseaux virtuels pour une résolution par Azure (proxy DNS).</span><span class="sxs-lookup"><span data-stu-id="eee6f-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="eee6f-119">Consultez [Résolution de noms à l’aide de votre propre serveur DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="eee6f-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="eee6f-120">Nom de domaine complet uniquement</span><span class="sxs-lookup"><span data-stu-id="eee6f-120">FQDN only</span></span> |
| <span data-ttu-id="eee6f-121">Résolution des noms de service et d’ordinateur locaux à partir des instances de rôle ou des machines virtuelles dans Azure</span><span class="sxs-lookup"><span data-stu-id="eee6f-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="eee6f-122">Serveurs DNS gérés par le client (par exemple contrôleur de domaine local, contrôleur de domaine en lecture seule local ou serveur DNS secondaire synchronisé via des transferts de zone).</span><span class="sxs-lookup"><span data-stu-id="eee6f-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="eee6f-123">Consultez [Résolution de noms à l’aide de votre propre serveur DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="eee6f-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="eee6f-124">Nom de domaine complet uniquement</span><span class="sxs-lookup"><span data-stu-id="eee6f-124">FQDN only</span></span> |
| <span data-ttu-id="eee6f-125">Résolution de noms d’hôte Azure à partir d’ordinateurs locaux</span><span class="sxs-lookup"><span data-stu-id="eee6f-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="eee6f-126">Transférer les requêtes tooa gérée par le client DNS serveur proxy dans le réseau virtuel correspondant de hello.</span><span class="sxs-lookup"><span data-stu-id="eee6f-126">Forward queries tooa customer-managed DNS proxy server in hello corresponding virtual network.</span></span> <span data-ttu-id="eee6f-127">serveur de proxy Hello transfère tooAzure de requêtes pour la résolution.</span><span class="sxs-lookup"><span data-stu-id="eee6f-127">hello proxy server forwards queries tooAzure for resolution.</span></span> <span data-ttu-id="eee6f-128">Consultez [Résolution de noms à l’aide de votre propre serveur DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="eee6f-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="eee6f-129">Nom de domaine complet uniquement</span><span class="sxs-lookup"><span data-stu-id="eee6f-129">FQDN only</span></span> |
| <span data-ttu-id="eee6f-130">DNS inversé pour les adresses IP internes</span><span class="sxs-lookup"><span data-stu-id="eee6f-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="eee6f-131">Résolution de noms à l’aide de votre propre serveur DNS</span><span class="sxs-lookup"><span data-stu-id="eee6f-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="eee6f-132">n/a</span><span class="sxs-lookup"><span data-stu-id="eee6f-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="eee6f-133">Résolution de noms fournie par Azure</span><span class="sxs-lookup"><span data-stu-id="eee6f-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="eee6f-134">Avec la résolution de noms DNS publics, Azure fournit la résolution de noms interne pour les machines virtuelles et instances de rôle qui se trouvent dans hello même réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="eee6f-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in hello same virtual network.</span></span> <span data-ttu-id="eee6f-135">Dans les réseaux virtuels basés sur le Gestionnaire de ressources Azure, hello suffixe DNS n’est cohérente sur le réseau virtuel de hello. nom de domaine complet de Hello n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="eee6f-135">In virtual networks that are based on Azure Resource Manager, hello DNS suffix is consistent across hello virtual network; hello FQDN is not needed.</span></span> <span data-ttu-id="eee6f-136">Les noms DNS peuvent être affectées tooboth cartes d’interface réseau (NIC) et les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="eee6f-136">DNS names can be assigned tooboth network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="eee6f-137">Bien que la résolution de noms hello fournis par Azure ne nécessite pas de configuration, il n’est pas hello le choix approprié pour tous les scénarios de déploiement, comme l’illustre le tableau précédent de hello.</span><span class="sxs-lookup"><span data-stu-id="eee6f-137">Although hello name resolution that Azure provides does not require any configuration, it is not hello appropriate choice for all deployment scenarios, as seen on hello preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="eee6f-138">Fonctionnalités et considérations</span><span class="sxs-lookup"><span data-stu-id="eee6f-138">Features and considerations</span></span>
<span data-ttu-id="eee6f-139">**Fonctionnalités :**</span><span class="sxs-lookup"><span data-stu-id="eee6f-139">**Features:**</span></span>

* <span data-ttu-id="eee6f-140">Aucune configuration n’est la résolution de noms toouse requis par Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="eee6f-140">No configuration is required toouse name resolution that Azure provides.</span></span>
* <span data-ttu-id="eee6f-141">service de résolution de noms Hello fournis par Azure est hautement disponible.</span><span class="sxs-lookup"><span data-stu-id="eee6f-141">hello name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="eee6f-142">Vous ne devez toocreate et gérer des clusters de vos propres serveurs DNS.</span><span class="sxs-lookup"><span data-stu-id="eee6f-142">You don't need toocreate and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="eee6f-143">service de résolution de noms Hello fournis par Azure peut être utilisé avec vos propres tooresolve de serveurs DNS locaux et les noms d’hôte Azure.</span><span class="sxs-lookup"><span data-stu-id="eee6f-143">hello name resolution service that Azure provides can be used along with your own DNS servers tooresolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="eee6f-144">Résolution de noms est fournie entre les machines virtuelles dans des réseaux virtuels sans avoir besoin de hello nom de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="eee6f-144">Name resolution is provided between virtual machines in virtual networks without need for hello FQDN.</span></span>
* <span data-ttu-id="eee6f-145">Vous pouvez utiliser des noms d’hôtes qui décrivent vos déploiements de façon plus appropriée, au lieu de noms générés automatiquement.</span><span class="sxs-lookup"><span data-stu-id="eee6f-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="eee6f-146">**Considérations :**</span><span class="sxs-lookup"><span data-stu-id="eee6f-146">**Considerations:**</span></span>

* <span data-ttu-id="eee6f-147">suffixe DNS Hello qu’Azure crée ne peut pas être modifié.</span><span class="sxs-lookup"><span data-stu-id="eee6f-147">hello DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="eee6f-148">Vous ne pouvez pas enregistrer manuellement vos propres enregistrements.</span><span class="sxs-lookup"><span data-stu-id="eee6f-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="eee6f-149">WINS et NetBIOS ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="eee6f-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="eee6f-150">Les noms d’hôte doivent être compatibles avec DNS.</span><span class="sxs-lookup"><span data-stu-id="eee6f-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="eee6f-151">Les noms doivent comporter uniquement les caractères 0-9, a-z et « - », et ils ne peuvent pas commencer ou se terminer par « - ».</span><span class="sxs-lookup"><span data-stu-id="eee6f-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="eee6f-152">Consultez RFC 3696 Section 2.</span><span class="sxs-lookup"><span data-stu-id="eee6f-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="eee6f-153">Le trafic des requêtes DNS est limité pour chaque machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="eee6f-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="eee6f-154">Cette limitation ne devrait pas avoir d’incidence sur la plupart des applications.</span><span class="sxs-lookup"><span data-stu-id="eee6f-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="eee6f-155">Si la limitation de requêtes est respectée, assurez-vous que la mise en cache côté client est activée.</span><span class="sxs-lookup"><span data-stu-id="eee6f-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="eee6f-156">Pour plus d’informations, consultez [obtention de la plupart à partir de la résolution de noms fournis par Azure hello](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="eee6f-156">For more information, see [Getting hello most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-hello-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="eee6f-157">Obtention de la plupart à partir de la résolution de noms fournis par Azure hello</span><span class="sxs-lookup"><span data-stu-id="eee6f-157">Getting hello most from name resolution that Azure provides</span></span>
<span data-ttu-id="eee6f-158">**Mise en cache côté client :**</span><span class="sxs-lookup"><span data-stu-id="eee6f-158">**Client-side caching:**</span></span>

<span data-ttu-id="eee6f-159">Certaines requêtes DNS ne sont pas envoyées réseau hello.</span><span class="sxs-lookup"><span data-stu-id="eee6f-159">Some DNS queries are not sent across hello network.</span></span> <span data-ttu-id="eee6f-160">La mise en cache côté client permet de réduire la latence et améliorer des incohérences de résilience toonetwork en résolvant les requêtes DNS récurrentes d’un cache local.</span><span class="sxs-lookup"><span data-stu-id="eee6f-160">Client-side caching helps reduce latency and improve resilience toonetwork inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="eee6f-161">Enregistrements DNS contiennent une durée de vie (TTL), qui permet l’enregistrement de hello toostore hello cache aussi longtemps que possible sans affecter l’actualisation d’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="eee6f-161">DNS records contain a Time-To-Live (TTL), which enables hello cache toostore hello record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="eee6f-162">Pour cette raison, la mise en cache côté client convient donc à la plupart des situations.</span><span class="sxs-lookup"><span data-stu-id="eee6f-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="eee6f-163">Certaines distributions Linux n’incluent pas la mise en cache par défaut.</span><span class="sxs-lookup"><span data-stu-id="eee6f-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="eee6f-164">Nous vous recommandons une machine virtuelle de cache tooeach Linux après avoir vérifié qu’il n’est pas un cache local déjà.</span><span class="sxs-lookup"><span data-stu-id="eee6f-164">We recommend that you add a cache tooeach Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="eee6f-165">Plusieurs packages de mise en cache DNS sont disponibles, comme dnsmasq.</span><span class="sxs-lookup"><span data-stu-id="eee6f-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="eee6f-166">Voici hello étapes tooinstall dnsmasq sur les distributions de courants hello :</span><span class="sxs-lookup"><span data-stu-id="eee6f-166">Here are hello steps tooinstall dnsmasq on hello most common distributions:</span></span>

<span data-ttu-id="eee6f-167">**Ubuntu (utilise resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="eee6f-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="eee6f-168">Installer hello dnsmasq (« sudo apt-get install dnsmasq »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-168">Install hello dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="eee6f-169">**SUSE (utilise netconf)**:</span><span class="sxs-lookup"><span data-stu-id="eee6f-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="eee6f-170">Installer hello dnsmasq (« sudo zypper installation dnsmasq »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-170">Install hello dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="eee6f-171">Activer le service de dnsmasq hello (« systemctl activer dnsmasq.service »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-171">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="eee6f-172">Démarrer le service de dnsmasq hello (« systemctl début dnsmasq.service »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-172">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="eee6f-173">Modifier « / etc/sysconfig/réseau/config » et modifiez NETCONFIG_DNS_FORWARDER = » « trop « dnsmasq ».</span><span class="sxs-lookup"><span data-stu-id="eee6f-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" too”dnsmasq”.</span></span>
5. <span data-ttu-id="eee6f-174">Mettre à jour resolv.conf (« netconfig mise à jour ») tooset hello cache comme hello du programme de résolution DNS local.</span><span class="sxs-lookup"><span data-stu-id="eee6f-174">Update resolv.conf ("netconfig update") tooset hello cache as hello local DNS resolver.</span></span>

<span data-ttu-id="eee6f-175">**CentOS de Rogue Wave Software (anciennement OpenLogic, utilise NetworkManager)**</span><span class="sxs-lookup"><span data-stu-id="eee6f-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="eee6f-176">Installer hello dnsmasq (« sudo yum installation dnsmasq »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-176">Install hello dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="eee6f-177">Activer le service de dnsmasq hello (« systemctl activer dnsmasq.service »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-177">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="eee6f-178">Démarrer le service de dnsmasq hello (« systemctl début dnsmasq.service »).</span><span class="sxs-lookup"><span data-stu-id="eee6f-178">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="eee6f-179">Ajoutez « ajouter des serveurs de nom de domaine 127.0.0.1 ; » too"/etc/dhclient-eth0.conf ».</span><span class="sxs-lookup"><span data-stu-id="eee6f-179">Add “prepend domain-name-servers 127.0.0.1;” too“/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="eee6f-180">Redémarrez du cache (« service réseau restart ») tooset hello hello network service hello du programme de résolution DNS local</span><span class="sxs-lookup"><span data-stu-id="eee6f-180">Restart hello network service (“service network restart”) tooset hello cache as hello local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="eee6f-181">: hello 'dnsmasq' package doit uniquement de hello nombreux DNS met en cache qui sont disponibles pour Linux.</span><span class="sxs-lookup"><span data-stu-id="eee6f-181">: hello 'dnsmasq' package is only one of hello many DNS caches that are available for Linux.</span></span> <span data-ttu-id="eee6f-182">Avant de l’utiliser, vérifiez son adéquation à vos besoins et qu’aucun autre cache n’est installé.</span><span class="sxs-lookup"><span data-stu-id="eee6f-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="eee6f-183">**Nouvelles tentatives côté client**</span><span class="sxs-lookup"><span data-stu-id="eee6f-183">**Client-side retries**</span></span>

<span data-ttu-id="eee6f-184">DNS est principalement un protocole UDP.</span><span class="sxs-lookup"><span data-stu-id="eee6f-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="eee6f-185">Hello protocole UDP ne garantissent la remise des messages, hello protocole DNS lui-même gère la logique de nouvelle tentative.</span><span class="sxs-lookup"><span data-stu-id="eee6f-185">Because hello UDP protocol doesn't guarantee message delivery, hello DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="eee6f-186">Chaque client DNS (système d’exploitation) peut présenter la logique de nouvelle tentative différents selon les préférences du créateur hello :</span><span class="sxs-lookup"><span data-stu-id="eee6f-186">Each DNS client (operating system) can exhibit different retry logic depending on hello creator's preference:</span></span>

* <span data-ttu-id="eee6f-187">Les systèmes d’exploitation Windows effectuent une nouvelle tentative après une seconde, puis à nouveau après deux secondes, quatre secondes et encore quatre secondes.</span><span class="sxs-lookup"><span data-stu-id="eee6f-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="eee6f-188">Bonjour nouvelles tentatives d’installation de Linux par défaut après cinq secondes.</span><span class="sxs-lookup"><span data-stu-id="eee6f-188">hello default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="eee6f-189">Vous devez modifier cette tooretry cinq fois à intervalles d’une seconde.</span><span class="sxs-lookup"><span data-stu-id="eee6f-189">You should change this tooretry five times at one-second intervals.</span></span>  

<span data-ttu-id="eee6f-190">toocheck hello paramètres actuels sur une machine virtuelle Linux, « cat /etc/resolv.conf » et rechercher en ligne de 'options' hello, par exemple :</span><span class="sxs-lookup"><span data-stu-id="eee6f-190">toocheck hello current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at hello 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="eee6f-191">fichier de resolv.conf Hello est généré automatiquement et ne doit pas être modifié.</span><span class="sxs-lookup"><span data-stu-id="eee6f-191">hello resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="eee6f-192">Hello des étapes spécifiques qui ajouter hello 'options' ligne varient selon la distribution :</span><span class="sxs-lookup"><span data-stu-id="eee6f-192">hello specific steps that add hello 'options' line vary by distribution:</span></span>

<span data-ttu-id="eee6f-193">**Ubuntu** (utilise resolvconf)</span><span class="sxs-lookup"><span data-stu-id="eee6f-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="eee6f-194">Ajouter hello options ligne too'/etc/resolveconf/resolv.conf.d/head'.</span><span class="sxs-lookup"><span data-stu-id="eee6f-194">Add hello options line too'/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="eee6f-195">Exécutez 'resolvconf -u' tooupdate.</span><span class="sxs-lookup"><span data-stu-id="eee6f-195">Run 'resolvconf -u' tooupdate.</span></span>

<span data-ttu-id="eee6f-196">**SUSE** (utilise netconf)</span><span class="sxs-lookup"><span data-stu-id="eee6f-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="eee6f-197">Ajoutez 'timeout:1 tentatives : 5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS = » « paramètre de '/ etc/sysconfig/réseau/config'.</span><span class="sxs-lookup"><span data-stu-id="eee6f-197">Add 'timeout:1 attempts:5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="eee6f-198">Exécutez 'netconfig update' tooupdate.</span><span class="sxs-lookup"><span data-stu-id="eee6f-198">Run 'netconfig update' tooupdate.</span></span>

<span data-ttu-id="eee6f-199">**CentOS de Rogue Wave Software (anciennement OpenLogic)** (utilise NetworkManager)</span><span class="sxs-lookup"><span data-stu-id="eee6f-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="eee6f-200">Ajoutez « echo « options timeout:1 tentatives : 5 « » de too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span><span class="sxs-lookup"><span data-stu-id="eee6f-200">Add 'echo "options timeout:1 attempts:5"' too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="eee6f-201">Exécutez « redémarrage du service réseau » tooupdate.</span><span class="sxs-lookup"><span data-stu-id="eee6f-201">Run 'service network restart' tooupdate.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="eee6f-202">Résolution de noms à l’aide de votre propre serveur DNS</span><span class="sxs-lookup"><span data-stu-id="eee6f-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="eee6f-203">Vos besoins de résolution de nom peuvent aller au-delà des fonctionnalités de hello fournis par Azure.</span><span class="sxs-lookup"><span data-stu-id="eee6f-203">Your name resolution needs may go beyond hello features that Azure provides.</span></span> <span data-ttu-id="eee6f-204">Par exemple, vous pouvez avoir besoin d’une résolution DNS entre des réseaux virtuels.</span><span class="sxs-lookup"><span data-stu-id="eee6f-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="eee6f-205">toocover ce scénario, vous pouvez utiliser vos propres serveurs DNS.</span><span class="sxs-lookup"><span data-stu-id="eee6f-205">toocover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="eee6f-206">Les serveurs DNS dans un peuvent réseau virtuel vers l’avant DNS interroge toorecursive des programmes de résolution de noms d’hôtes tooresolve Azure qui se trouvent dans hello même réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="eee6f-206">DNS servers within a virtual network can forward DNS queries toorecursive resolvers of Azure tooresolve hostnames that are in hello same virtual network.</span></span> <span data-ttu-id="eee6f-207">Par exemple, un serveur DNS qui s’exécute dans Azure peut répondre requêtes tooDNS pour son propre serveur DNS de la zone fichiers et transférer toutes les autres tooAzure de requêtes.</span><span class="sxs-lookup"><span data-stu-id="eee6f-207">For example, a DNS server that runs in Azure can respond tooDNS queries for its own DNS zone files and forward all other queries tooAzure.</span></span> <span data-ttu-id="eee6f-208">Cette fonctionnalité permet des deux entrées dans vos fichiers de zone et les noms d’hôtes fournis par Azure (via le redirecteur de hello) de votre toosee de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="eee6f-208">This functionality enables virtual machines toosee both your entries in your zone files and hostnames that Azure provides (via hello forwarder).</span></span> <span data-ttu-id="eee6f-209">Programmes de résolution de l’accès toohello récursive de Azure est fournie via l’adresse IP virtuelle hello 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="eee6f-209">Access toohello recursive resolvers of Azure is provided via hello virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="eee6f-210">Le transfert DNS également permet la résolution DNS entre les réseaux virtuels et votre nom d’hôte du tooresolve de machines sur site Azure fournit.</span><span class="sxs-lookup"><span data-stu-id="eee6f-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines tooresolve hostnames that Azure provides.</span></span> <span data-ttu-id="eee6f-211">tooresolve nom d’hôte de l’ordinateur virtuel, hello DNS du serveur virtuel doivent résider dans hello même réseau virtuel et être tooAzure de requêtes de nom d’hôte tooforward configuré.</span><span class="sxs-lookup"><span data-stu-id="eee6f-211">tooresolve a virtual machine's hostname, hello DNS server virtual machine must reside in hello same virtual network and be configured tooforward hostname queries tooAzure.</span></span> <span data-ttu-id="eee6f-212">Étant donné que le suffixe DNS de hello est différent dans chaque réseau virtuel, vous pouvez utiliser le transfert conditionnel règles toosend DNS interroge toohello corriger un réseau virtuel pour la résolution.</span><span class="sxs-lookup"><span data-stu-id="eee6f-212">Because hello DNS suffix is different in each virtual network, you can use conditional forwarding rules toosend DNS queries toohello correct virtual network for resolution.</span></span> <span data-ttu-id="eee6f-213">Hello image suivante montre deux réseaux virtuels et un réseau local effectuant la résolution DNS entre les réseaux virtuels à l’aide de cette méthode :</span><span class="sxs-lookup"><span data-stu-id="eee6f-213">hello following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![Résolution DNS entre réseaux virtuels](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="eee6f-215">Lorsque vous utilisez la résolution de noms fournis par Azure, les suffixes DNS interne hello sont fourni tooeach virtuels à l’aide de DHCP.</span><span class="sxs-lookup"><span data-stu-id="eee6f-215">When you use name resolution that Azure provides, hello internal DNS suffix is provided tooeach virtual machine by using DHCP.</span></span> <span data-ttu-id="eee6f-216">Lorsque vous utilisez votre propre solution de résolution de nom, ce suffixe n’est pas fourni toovirtual machines, car le suffixe de hello interfère avec d’autres architectures DNS.</span><span class="sxs-lookup"><span data-stu-id="eee6f-216">When you use your own name resolution solution, this suffix is not supplied toovirtual machines because hello suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="eee6f-217">toomachines toorefer par nom de domaine complet ou tooconfigure suffixe hello sur vos ordinateurs virtuels, vous pouvez utiliser PowerShell ou hello du suffixe de hello API toodetermine :</span><span class="sxs-lookup"><span data-stu-id="eee6f-217">toorefer toomachines by FQDN or tooconfigure hello suffix on your virtual machines, you can use PowerShell or hello API toodetermine hello suffix:</span></span>

* <span data-ttu-id="eee6f-218">Pour les réseaux virtuels qui sont gérés par le Gestionnaire de ressources Azure, le suffixe de hello est disponible via hello [carte d’interface réseau](https://msdn.microsoft.com/library/azure/mt163668.aspx) ressource.</span><span class="sxs-lookup"><span data-stu-id="eee6f-218">For virtual networks that are managed by Azure Resource Manager, hello suffix is available via hello [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="eee6f-219">Vous pouvez également exécuter hello `azure network public-ip show <resource group> <pip name>` commande Détails de hello toodisplay de votre adresse IP publique, qui inclut hello nom de domaine complet de hello carte réseau.</span><span class="sxs-lookup"><span data-stu-id="eee6f-219">You can also run hello `azure network public-ip show <resource group> <pip name>` command toodisplay hello details of your public IP, which includes hello FQDN of hello NIC.</span></span>

<span data-ttu-id="eee6f-220">Si la redirection des requêtes tooAzure ne suffit pas, vous devez tooprovide votre propre solution DNS.</span><span class="sxs-lookup"><span data-stu-id="eee6f-220">If forwarding queries tooAzure doesn't suit your needs, you need tooprovide your own DNS solution.</span></span>  <span data-ttu-id="eee6f-221">Votre solution DNS doit :</span><span class="sxs-lookup"><span data-stu-id="eee6f-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="eee6f-222">Fournir la résolution de nom d’hôte approprié, par exemple par le biais de [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="eee6f-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="eee6f-223">Si vous utilisez DDNS, vous devrez peut-être le nettoyage des enregistrements DNS toodisable.</span><span class="sxs-lookup"><span data-stu-id="eee6f-223">If you use DDNS, you might need toodisable DNS record scavenging.</span></span> <span data-ttu-id="eee6f-224">Les baux DHCP d’Azure sont très longs et le nettoyage peut supprimer prématurément des enregistrements DNS.</span><span class="sxs-lookup"><span data-stu-id="eee6f-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="eee6f-225">Fournissent une résolution tooallow récursive appropriée la résolution de noms de domaines externes.</span><span class="sxs-lookup"><span data-stu-id="eee6f-225">Provide appropriate recursive resolution tooallow resolution of external domain names.</span></span>
* <span data-ttu-id="eee6f-226">Être accessible (TCP et UDP sur le port 53) à partir de clients hello fait et être en mesure de tooaccess hello Internet.</span><span class="sxs-lookup"><span data-stu-id="eee6f-226">Be accessible (TCP and UDP on port 53) from hello clients it serves and be able tooaccess hello Internet.</span></span>
* <span data-ttu-id="eee6f-227">Être protégé contre tout accès à partir de hello Internet toomitigate les menaces posées par les agents externes.</span><span class="sxs-lookup"><span data-stu-id="eee6f-227">Be secured against access from hello Internet toomitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="eee6f-228">Pour de meilleures performances, lorsque vous utilisez des machines virtuelles sur des serveurs DNS de Azure, désactiver IPv6 et affecter un [IP publiques au niveau de l’Instance](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS du serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="eee6f-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual machine.</span></span>  
>
>
