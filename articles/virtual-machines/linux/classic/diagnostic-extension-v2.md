---
title: aaaMonitoring un VM Linux avec une extension de machine virtuelle | Documents Microsoft
description: "Découvrez comment toouse hello Extension Diagnostics Linux toomonitor hello données de performances et diagnostic d’un VM Linux dans Azure."
services: virtual-machines-linux
author: NingKuang
manager: timlt
editor: 
tags: azure-service-management
ms.assetid: f54a11c5-5a0e-40ff-af6c-e60bd464058b
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 12/15/2015
ms.author: Ning
ms.openlocfilehash: cf7bfebca8c0367941f7a975417f60fe2e2dab25
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="use-hello-linux-diagnostic-extension-toomonitor-hello-performance-and-diagnostic-data-of-a-linux-vm"></a><span data-ttu-id="fb0ed-103">Utilisez hello Extension Diagnostics Linux toomonitor hello données de performances et diagnostic d’un VM Linux</span><span class="sxs-lookup"><span data-stu-id="fb0ed-103">Use hello Linux Diagnostic Extension toomonitor hello performance and diagnostic data of a Linux VM</span></span>

<span data-ttu-id="fb0ed-104">Ce document décrit la version 2.3 de hello Extension Diagnostics Linux.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-104">This document describes version 2.3 of hello Linux Diagnostic Extension.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fb0ed-105">Cette version est dépréciée et sa publication peut cesser au-delà du 30 juin 2018.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-105">This version is deprecated, and it may be unpublished any time after June 30, 2018.</span></span> <span data-ttu-id="fb0ed-106">Elle a été remplacée par la version 3.0.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-106">It has been replaced by version 3.0.</span></span> <span data-ttu-id="fb0ed-107">Pour plus d’informations, consultez hello [documentation pour la version 3.0 de hello Extension Diagnostics Linux](../diagnostic-extension.md).</span><span class="sxs-lookup"><span data-stu-id="fb0ed-107">For more information, see hello [documentation for version 3.0 of hello Linux Diagnostic Extension](../diagnostic-extension.md).</span></span>

## <a name="introduction"></a><span data-ttu-id="fb0ed-108">Introduction</span><span class="sxs-lookup"><span data-stu-id="fb0ed-108">Introduction</span></span>

<span data-ttu-id="fb0ed-109">(**Remarque**: hello Extension Diagnostics Linux est open source sur [GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) sur lequel les informations les plus récentes sur l’extension de hello hello sont tout d’abord publiées.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-109">(**Note**: hello Linux Diagnostic Extension is open-sourced on [GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) where hello most current information on hello extension is first published.</span></span> <span data-ttu-id="fb0ed-110">Vous souhaiterez peut-être toocheck hello [page GitHub](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) premier.)</span><span class="sxs-lookup"><span data-stu-id="fb0ed-110">You might want toocheck hello [GitHub page](https://github.com/Azure/azure-linux-extensions/tree/master/Diagnostic) first.)</span></span>

<span data-ttu-id="fb0ed-111">Hello Extension Diagnostics Linux permet un Bonjour de moniteur utilisateur les machines virtuelles Linux qui sont en cours d’exécution sur Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-111">hello Linux Diagnostic Extension helps a user monitor hello Linux VMs that are running on Microsoft Azure.</span></span> <span data-ttu-id="fb0ed-112">Il a hello suivant de fonctionnalités :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-112">It has hello following capabilities:</span></span>

* <span data-ttu-id="fb0ed-113">Collecte et télécharge les informations sur les performances système hello à partir de la table de stockage de l’utilisateur toohello hello Linux VM, y compris les informations de diagnostic et syslog.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-113">Collects and uploads hello system performance information from hello Linux VM toohello user's storage table, including diagnostic and syslog information.</span></span>
* <span data-ttu-id="fb0ed-114">Permet aux utilisateurs toocustomize hello les métriques de données qui seront collectés et téléchargés.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-114">Enables users toocustomize hello data metrics that will be collected and uploaded.</span></span>
* <span data-ttu-id="fb0ed-115">Permet aux utilisateurs tooupload journal spécifié fichiers tooa désigné stockage table.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-115">Enables users tooupload specified log files tooa designated storage table.</span></span>

<span data-ttu-id="fb0ed-116">Dans la version actuelle de hello 2.3, les données de salutation incluent :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-116">In hello current version 2.3, hello data includes:</span></span>

* <span data-ttu-id="fb0ed-117">tous les journaux Rsyslog de Linux, y compris les journaux système, de sécurité et d’applications ;</span><span class="sxs-lookup"><span data-stu-id="fb0ed-117">All Linux Rsyslog logs, including system, security, and application logs.</span></span>
* <span data-ttu-id="fb0ed-118">Toutes les données système qui sont spécifiées sur [site de System Center Cross-Platform Solutions hello](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="fb0ed-118">All system data that's specified on [hello System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span>
* <span data-ttu-id="fb0ed-119">les fichiers journaux spécifiés par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-119">User-specified log files.</span></span>

<span data-ttu-id="fb0ed-120">Cette extension fonctionne avec hello classique et les modèles de déploiement de gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-120">This extension works with both hello classic and Resource Manager deployment models.</span></span>

### <a name="current-version-of-hello-extension-and-deprecation-of-old-versions"></a><span data-ttu-id="fb0ed-121">Version actuelle de l’extension de hello et désapprobation d’anciennes versions</span><span class="sxs-lookup"><span data-stu-id="fb0ed-121">Current version of hello extension and deprecation of old versions</span></span>

<span data-ttu-id="fb0ed-122">version la plus récente de l’extension de hello Hello est **2.3**, et **toutes les anciennes versions (2.0, 2.1 et 2.2) seront déconseillées et publiées par la fin de cette année (2017)**.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-122">hello latest version of hello extension is **2.3**, and **any old versions (2.0, 2.1, and 2.2) will be deprecated and unpublished by end of this year (2017)**.</span></span> <span data-ttu-id="fb0ed-123">Si vous avez installé hello extension de Diagnostic de Linux avec mise à niveau de version mineure automatique désactivé, il est fortement recommandé de désinstaller l’extension de hello et de le réinstaller avec mise à niveau de version mineure automatique activée.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-123">If you installed hello Linux Diagnostic extension with automatic minor version upgrade disabled, it's strongly recommended that you uninstall hello extension and reinstall it with automatic minor version upgrade enabled.</span></span> <span data-ttu-id="fb0ed-124">Sur les ordinateurs virtuels (ASM) classiques, vous pouvez y parvenir en spécifiant « 2.* » en tant que version de hello si vous installez extension hello via Azure-XPLAT-CLI ou Powershell.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-124">On classic (ASM) VMs, you can achieve this by specifying '2.*' as hello version if you are installing hello extension through Azure XPLAT CLI or Powershell.</span></span> <span data-ttu-id="fb0ed-125">Sur les machines virtuelles ARM, vous pouvez y parvenir en incluant ' « autoUpgradeMinorVersion » : true' dans le modèle de déploiement d’ordinateur virtuel hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-125">On ARM VMs, you can achieve this by including '"autoUpgradeMinorVersion": true' in hello VM deployment template.</span></span> <span data-ttu-id="fb0ed-126">En outre, toute nouvelle installation de l’extension de hello version doit être hello automatique secondaire mise à niveau d’option est activée.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-126">Also, any new installation of hello extension should have hello auto minor version upgrade option turned on.</span></span>

## <a name="enable-hello-extension"></a><span data-ttu-id="fb0ed-127">Activer l’extension de hello</span><span class="sxs-lookup"><span data-stu-id="fb0ed-127">Enable hello extension</span></span>

<span data-ttu-id="fb0ed-128">Vous pouvez activer cette extension à l’aide de hello [portail Azure](https://portal.azure.com/#), Azure PowerShell ou scripts CLI d’Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-128">You can enable this extension by using hello [Azure portal](https://portal.azure.com/#), Azure PowerShell, or Azure CLI scripts.</span></span>

<span data-ttu-id="fb0ed-129">tooview et configurer hello système et les données de performances directement à partir de hello portail Azure, suivent [ces étapes sur hello blog Azure](https://azure.microsoft.com/en-us/blog/windows-azure-virtual-machine-monitoring-with-wad-extension/).</span><span class="sxs-lookup"><span data-stu-id="fb0ed-129">tooview and configure hello system and performance data directly from hello Azure portal, follow [these steps on hello Azure blog](https://azure.microsoft.com/en-us/blog/windows-azure-virtual-machine-monitoring-with-wad-extension/).</span></span>

<span data-ttu-id="fb0ed-130">Cet article se concentre sur la façon de tooenable et configurer l’extension de hello en utilisant les commandes CLI d’Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-130">This article focuses on how tooenable and configure hello extension by using Azure CLI commands.</span></span> <span data-ttu-id="fb0ed-131">Cela vous permet de tooread et afficher les données de hello directement à partir de la table de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-131">This allows you tooread and view hello data directly from hello storage table.</span></span>

<span data-ttu-id="fb0ed-132">Notez que les méthodes de configuration hello qui sont décrites ici ne fonctionnent pas pour hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-132">Note that hello configuration methods that are described here won't work for hello Azure portal.</span></span> <span data-ttu-id="fb0ed-133">tooview et configurer les données de performances du système et hello directement à partir de hello portail Azure, extension de hello doit être activée via le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-133">tooview and configure hello system and performance data directly from hello Azure portal, hello extension must be enabled through hello portal.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="fb0ed-134">Composants requis</span><span class="sxs-lookup"><span data-stu-id="fb0ed-134">Prerequisites</span></span>

* <span data-ttu-id="fb0ed-135">**Agent Microsoft Azure Linux version 2.0.6 ou ultérieure**.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-135">**Azure Linux Agent version 2.0.6 or later**.</span></span>

  <span data-ttu-id="fb0ed-136">Notez que la plupart des images de la galerie Linux de machines virtuelles Azure comprennent la version 2.0.6 ou ultérieure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-136">Note that most Azure VM Linux gallery images include version 2.0.6 or later.</span></span> <span data-ttu-id="fb0ed-137">Vous pouvez exécuter **WAAgent-version** tooconfirm quelle version est installée sur la machine virtuelle de hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-137">You can run **WAAgent -version** tooconfirm which version is installed on hello VM.</span></span> <span data-ttu-id="fb0ed-138">Hello machine virtuelle exécute une version antérieure à 2.0.6, vous pouvez suivre [ces instructions sur GitHub](https://github.com/Azure/WALinuxAgent "instructions") tooupdate il.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-138">If hello VM is running a version that's earlier than 2.0.6, you can follow [these instructions on GitHub](https://github.com/Azure/WALinuxAgent "instructions") tooupdate it.</span></span>
* <span data-ttu-id="fb0ed-139">**Interface de ligne de commande Azure**.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-139">**Azure CLI**.</span></span> <span data-ttu-id="fb0ed-140">Suivez [ce guide pour l’installation du CLI](../../../cli-install-nodejs.md) tooset d’environnement de CLI d’Azure hello sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-140">Follow [this guidance for installing CLI](../../../cli-install-nodejs.md) tooset up hello Azure CLI environment on your machine.</span></span> <span data-ttu-id="fb0ed-141">Après l’installation du CLI d’Azure, vous pouvez utiliser hello **azure** commande à partir de votre interface de ligne de commande (interpréteur de commandes, Terminal Server ou invite de commandes) tooaccess hello Azure commandes CLI.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-141">After Azure CLI is installed, you can use hello **azure** command from your command-line interface (Bash, Terminal, or command prompt) tooaccess hello Azure CLI commands.</span></span> <span data-ttu-id="fb0ed-142">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-142">For example:</span></span>

  * <span data-ttu-id="fb0ed-143">Exécutez **azure vm extension set --help** pour obtenir une aide détaillée.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-143">Run **azure vm extension set --help** for detailed help information.</span></span>
  * <span data-ttu-id="fb0ed-144">Exécutez **connexion azure** toosign dans tooAzure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-144">Run **azure login** toosign in tooAzure.</span></span>
  * <span data-ttu-id="fb0ed-145">Exécutez **liste de machine virtuelle azure** toolist tous hello machines virtuelles que vous disposez sur Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-145">Run **azure vm list** toolist all hello virtual machines that you have on Azure.</span></span>
* <span data-ttu-id="fb0ed-146">Une données hello des toostore du compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-146">A storage account toostore hello data.</span></span> <span data-ttu-id="fb0ed-147">Vous devez un nom de compte de stockage créé précédemment et un stockage tooyour de données access tooupload clé hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-147">You will need a storage account name that was created previously and an access key tooupload hello data tooyour storage.</span></span>

## <a name="use-hello-azure-cli-command-tooenable-hello-linux-diagnostic-extension"></a><span data-ttu-id="fb0ed-148">Utilisez la commande tooenable hello Extension Diagnostics Linux hello CLI d’Azure</span><span class="sxs-lookup"><span data-stu-id="fb0ed-148">Use hello Azure CLI command tooenable hello Linux Diagnostic Extension</span></span>

### <a name="scenario-1-enable-hello-extension-with-hello-default-data-set"></a><span data-ttu-id="fb0ed-149">Scénario 1</span><span class="sxs-lookup"><span data-stu-id="fb0ed-149">Scenario 1.</span></span> <span data-ttu-id="fb0ed-150">Activer l’extension hello avec le jeu de données par défaut hello</span><span class="sxs-lookup"><span data-stu-id="fb0ed-150">Enable hello extension with hello default data set</span></span>

<span data-ttu-id="fb0ed-151">Dans la version 2.3 ou version ultérieure, les données de valeur par défaut de hello qui seront collectées incluent :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-151">In version 2.3 or later, hello default data that will be collected includes:</span></span>

* <span data-ttu-id="fb0ed-152">Toutes les informations de Rsyslog (y compris les journaux système, de sécurité et des applications)</span><span class="sxs-lookup"><span data-stu-id="fb0ed-152">All Rsyslog information (including system, security, and application logs).</span></span>  
* <span data-ttu-id="fb0ed-153">Un ensemble principal de données système de base</span><span class="sxs-lookup"><span data-stu-id="fb0ed-153">A core set of basis system data.</span></span> <span data-ttu-id="fb0ed-154">Notez que hello du jeu de données complet est décrit sur hello [site System Center Cross-Platform Solutions](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="fb0ed-154">Note that hello full data set is described on hello [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span>
  <span data-ttu-id="fb0ed-155">Si vous souhaitez tooenable des données supplémentaires, passez aux étapes de hello dans les scénarios 2 et 3.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-155">If you want tooenable extra data, continue with hello steps in Scenarios 2 and 3.</span></span>

<span data-ttu-id="fb0ed-156">Étape 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-156">Step 1.</span></span> <span data-ttu-id="fb0ed-157">Créez un fichier nommé PrivateConfig.json avec hello suivant contenu :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-157">Create a file named PrivateConfig.json with hello following content:</span></span>

    {
        "storageAccountName" : "hello storage account tooreceive data",
        "storageAccountKey" : "hello key of hello account"
    }

<span data-ttu-id="fb0ed-158">Étape 2.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-158">Step 2.</span></span> <span data-ttu-id="fb0ed-159">Exécutez **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions 2.* --private-config-path PrivateConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-159">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions 2.* --private-config-path PrivateConfig.json**.</span></span>

### <a name="scenario-2-customize-hello-performance-monitor-metrics"></a><span data-ttu-id="fb0ed-160">Scénario 2</span><span class="sxs-lookup"><span data-stu-id="fb0ed-160">Scenario 2.</span></span> <span data-ttu-id="fb0ed-161">Personnaliser les métriques de moniteur de performances hello</span><span class="sxs-lookup"><span data-stu-id="fb0ed-161">Customize hello performance monitor metrics</span></span>

<span data-ttu-id="fb0ed-162">Cette section décrit comment toocustomize hello les performances et la table de données de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-162">This section describes how toocustomize hello performance and diagnostic data table.</span></span>

<span data-ttu-id="fb0ed-163">Étape 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-163">Step 1.</span></span> <span data-ttu-id="fb0ed-164">Créez un fichier nommé PrivateConfig.json avec un contenu hello qui a été décrite dans le scénario 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-164">Create a file named PrivateConfig.json with hello content that was described in Scenario 1.</span></span> <span data-ttu-id="fb0ed-165">Créez également un fichier nommé PublicConfig.json.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-165">Also create a file named PublicConfig.json.</span></span> <span data-ttu-id="fb0ed-166">Spécifier hello particulier données toocollect.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-166">Specify hello particular data you want toocollect.</span></span>

<span data-ttu-id="fb0ed-167">Pour tous les fournisseurs et les variables, référence hello [site System Center Cross-Platform Solutions](https://scx.codeplex.com/wikipage?title=xplatproviders).</span><span class="sxs-lookup"><span data-stu-id="fb0ed-167">For all supported providers and variables, reference hello [System Center Cross Platform Solutions site](https://scx.codeplex.com/wikipage?title=xplatproviders).</span></span> <span data-ttu-id="fb0ed-168">Vous pouvez avoir plusieurs requêtes et les stocker dans plusieurs tables en ajoutant le script de toohello plusieurs requêtes.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-168">You can have multiple queries and store them in multiple tables by appending more queries toohello script.</span></span>

<span data-ttu-id="fb0ed-169">Par défaut, hello Rsyslog données est systématiquement collecté.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-169">By default, hello Rsyslog data is always collected.</span></span>

    {
          "perfCfg":
          [
              {
                  "query" : "SELECT PercentAvailableMemory, AvailableMemory, UsedMemory ,PercentUsedSwap FROM SCX_MemoryStatisticalInformation",
                  "table" : "LinuxMemory"
              }
          ]
    }


<span data-ttu-id="fb0ed-170">Étape 2.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-170">Step 2.</span></span> <span data-ttu-id="fb0ed-171">Exécutez **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-171">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

### <a name="scenario-3-upload-your-own-log-files"></a><span data-ttu-id="fb0ed-172">Scénario 3</span><span class="sxs-lookup"><span data-stu-id="fb0ed-172">Scenario 3.</span></span> <span data-ttu-id="fb0ed-173">Charger vos propres fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="fb0ed-173">Upload your own log files</span></span>

<span data-ttu-id="fb0ed-174">Cette section décrit le fonctionnement des fichiers de compte de stockage tooyour toocollect et le téléchargement des journaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-174">This section describes how toocollect and upload specific log files tooyour storage account.</span></span> <span data-ttu-id="fb0ed-175">Vous devez toospecify à la fois hello chemin d’accès tooyour journal hello de fichiers et de nom de table hello où vous souhaitez toostore votre journal.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-175">You need toospecify both hello path tooyour log file and hello name of hello table where you want toostore your log.</span></span> <span data-ttu-id="fb0ed-176">Vous pouvez créer plusieurs fichiers journaux en ajoutant plusieurs scripts de toohello entrées/table de fichiers.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-176">You can create multiple log files by adding multiple file/table entries toohello script.</span></span>

<span data-ttu-id="fb0ed-177">Étape 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-177">Step 1.</span></span> <span data-ttu-id="fb0ed-178">Créez un fichier nommé PrivateConfig.json avec un contenu hello qui a été décrite dans le scénario 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-178">Create a file named PrivateConfig.json with hello content that was described in Scenario 1.</span></span> <span data-ttu-id="fb0ed-179">Puis créez un autre fichier nommé PublicConfig.json avec hello suivant contenu :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-179">Then create another file named PublicConfig.json with hello following content:</span></span>

```json
{
    "fileCfg" :
    [
        {
            "file" : "/var/log/mysql.err",
            "table" : "mysqlerr"
            }
    ]
}
```

<span data-ttu-id="fb0ed-180">Étape 2.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-180">Step 2.</span></span> <span data-ttu-id="fb0ed-181">Exécutez `azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json`.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-181">Run `azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json`.</span></span>

<span data-ttu-id="fb0ed-182">Remarque : ce paramètre sur hello extension versions antérieures too2.3, tous les journaux générés trop`/var/log/mysql.err` peut être dupliqué trop`/var/log/syslog` (ou `/var/log/messages` en fonction de distribution de Linux hello) également.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-182">Note that with this setting on hello extension versions prior too2.3, all logs written too`/var/log/mysql.err` might be duplicated too`/var/log/syslog` (or `/var/log/messages` depending on hello Linux distro) as well.</span></span> <span data-ttu-id="fb0ed-183">Si vous souhaitez que tooavoid ce doublon de journalisation, vous pouvez exclure de la journalisation des `local6` ouvre une fonctionnalité dans votre configuration rsyslog.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-183">If you'd like tooavoid this duplicate logging, you can exclude logging of `local6` facility logs in your rsyslog configuration.</span></span> <span data-ttu-id="fb0ed-184">Il dépend de distribution de Linux hello, mais sur un système Ubuntu 14.04, hello fichier toomodify est `/etc/rsyslog.d/50-default.conf` et vous pouvez remplacer la ligne de hello `*.*;auth,authpriv.none -/var/log/syslog` trop`*.*;auth,authpriv,local6.none -/var/log/syslog`.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-184">It depends on hello Linux distro, but on an Ubuntu 14.04 system, hello file toomodify is `/etc/rsyslog.d/50-default.conf` and you can replace hello line `*.*;auth,authpriv.none -/var/log/syslog` too`*.*;auth,authpriv,local6.none -/var/log/syslog`.</span></span> <span data-ttu-id="fb0ed-185">Ce problème est résolu dans la dernière version de correctif logiciel hello de 2.3 (2.3.9007), donc si vous avez l’extension hello version 2.3, ce problème ne doit pas se produire.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-185">This issue is fixed in hello latest hotfix release of 2.3 (2.3.9007), so if you have hello extension version 2.3, this issue should not happen.</span></span> <span data-ttu-id="fb0ed-186">Si elle est toujours le cas même après le redémarrage de votre machine virtuelle, veuillez nous contacter et nous aider à résoudre les problèmes de la raison pour laquelle la dernière version de correctif logiciel hello n’est pas installée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-186">If it still does even after restarting your VM, please contact us and help us troubleshoot why hello latest hotfix version is not installed automatically.</span></span>

### <a name="scenario-4-stop-hello-extension-from-collecting-any-logs"></a><span data-ttu-id="fb0ed-187">Scénario 4</span><span class="sxs-lookup"><span data-stu-id="fb0ed-187">Scenario 4.</span></span> <span data-ttu-id="fb0ed-188">Arrêter l’extension hello à partir de la collecte de journaux</span><span class="sxs-lookup"><span data-stu-id="fb0ed-188">Stop hello extension from collecting any logs</span></span>

<span data-ttu-id="fb0ed-189">Cette section décrit comment extension de hello toostop de collecter des journaux.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-189">This section describes how toostop hello extension from collecting logs.</span></span> <span data-ttu-id="fb0ed-190">Notez que hello analyse des processus de l’agent sera toujours en cours d’exécution, même avec cette reconfiguration.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-190">Note that hello monitoring agent process will be still up and running even with this reconfiguration.</span></span> <span data-ttu-id="fb0ed-191">Si vous souhaitez que hello toostop complètement le processus de l’agent d’analyse, vous pouvez le faire par la désactivation de l’extension de hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-191">If you'd like toostop hello monitoring agent process completely, you can do so by disabling hello extension.</span></span> <span data-ttu-id="fb0ed-192">extension de hello Hello commande toodisable est `azure vm extension set --disable <vm_name> LinuxDiagnostic Microsoft.OSTCExtensions '2.*'`.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-192">hello command toodisable hello extension is `azure vm extension set --disable <vm_name> LinuxDiagnostic Microsoft.OSTCExtensions '2.*'`.</span></span>

<span data-ttu-id="fb0ed-193">Étape 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-193">Step 1.</span></span> <span data-ttu-id="fb0ed-194">Créez un fichier nommé PrivateConfig.json avec un contenu hello qui a été décrite dans le scénario 1.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-194">Create a file named PrivateConfig.json with hello content that was described in Scenario 1.</span></span> <span data-ttu-id="fb0ed-195">Créer un autre fichier nommé PublicConfig.json avec hello suivant contenu :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-195">Create another file named PublicConfig.json with hello following content:</span></span>

    {
        "perfCfg" : [],
        "enableSyslog" : "false"
    }


<span data-ttu-id="fb0ed-196">Étape 2.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-196">Step 2.</span></span> <span data-ttu-id="fb0ed-197">Exécutez **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-197">Run **azure vm extension set vm_name LinuxDiagnostic Microsoft.OSTCExtensions '2.*' --private-config-path PrivateConfig.json --public-config-path PublicConfig.json**.</span></span>

## <a name="review-your-data"></a><span data-ttu-id="fb0ed-198">Passer en revue vos données</span><span class="sxs-lookup"><span data-stu-id="fb0ed-198">Review your data</span></span>

<span data-ttu-id="fb0ed-199">performances de Hello et les données de diagnostic sont stockées dans une table de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-199">hello performance and diagnostic data are stored in an Azure Storage table.</span></span> <span data-ttu-id="fb0ed-200">Révision [comment toouse le stockage de Table à partir de Ruby](../../../cosmos-db/table-storage-how-to-use-ruby.md) toolearn comment les données de salutation tooaccess dans le stockage hello table à l’aide de scripts CLI d’Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-200">Review [How toouse Azure Table Storage from Ruby](../../../cosmos-db/table-storage-how-to-use-ruby.md) toolearn how tooaccess hello data in hello storage table by using Azure CLI scripts.</span></span>

<span data-ttu-id="fb0ed-201">En outre, vous pouvez utiliser UI outils tooaccess hello données suivantes :</span><span class="sxs-lookup"><span data-stu-id="fb0ed-201">In addition, you can use following UI tools tooaccess hello data:</span></span>

1. <span data-ttu-id="fb0ed-202">Explorateur de serveurs Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-202">Visual Studio Server Explorer.</span></span> <span data-ttu-id="fb0ed-203">Atteindre le compte de stockage tooyour.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-203">Go tooyour storage account.</span></span> <span data-ttu-id="fb0ed-204">Une fois hello machine virtuelle s’exécute pendant environ cinq minutes, vous verrez des tables par défaut de hello quatre : « LinuxCpu », « LinuxDisk », « LinuxMemory » et « Linuxsyslog ».</span><span class="sxs-lookup"><span data-stu-id="fb0ed-204">After hello VM runs for about five minutes, you'll see hello four default tables: “LinuxCpu”, ”LinuxDisk”, ”LinuxMemory”, and ”Linuxsyslog”.</span></span> <span data-ttu-id="fb0ed-205">Double-cliquez sur les données de salutation table noms tooview hello.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-205">Double-click hello table names tooview hello data.</span></span>
1. <span data-ttu-id="fb0ed-206">[Azure Storage Explorer](https://azurestorageexplorer.codeplex.com/ "Azure Storage Explorer");</span><span class="sxs-lookup"><span data-stu-id="fb0ed-206">[Azure Storage Explorer](https://azurestorageexplorer.codeplex.com/ "Azure Storage Explorer").</span></span>

![image](./media/diagnostic-extension/no1.png)

<span data-ttu-id="fb0ed-208">Si vous avez activé fileCfg ou perfCfg (comme décrit dans les scénarios 2 et 3), vous pouvez utiliser les données de non définis par défaut tooview Explorateur de serveurs Visual Studio et l’Explorateur de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-208">If you've enabled fileCfg or perfCfg (as described in Scenarios 2 and 3), you can use Visual Studio Server Explorer and Azure Storage Explorer tooview non-default data.</span></span>

## <a name="known-issues"></a><span data-ttu-id="fb0ed-209">Problèmes connus</span><span class="sxs-lookup"><span data-stu-id="fb0ed-209">Known issues</span></span>

* <span data-ttu-id="fb0ed-210">Hello Rsyslog informations et spécifié par le client le fichier journal est accessible uniquement via l’écriture de scripts.</span><span class="sxs-lookup"><span data-stu-id="fb0ed-210">hello Rsyslog information and customer-specified log file can only be accessed via scripting.</span></span>
