---
title: "aaaAvailability définit pour les machines virtuelles Linux dans Azure | Documents Microsoft"
description: "Découvrez hello clé conception et implémentation des recommandations pour le déploiement de haute disponibilité dans les services d’infrastructure Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 24f1d91c-8cc0-4251-bb67-ac4c4c37e8cd
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 78e4da5c8fd9eb186cafacb46454444b73a9439c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-availability-sets-guidelines-for-linux-vms"></a><span data-ttu-id="5c674-103">Instructions pour les groupes à haute disponibilité Azure pour les machines virtuelles Linux</span><span class="sxs-lookup"><span data-stu-id="5c674-103">Azure availability sets guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="5c674-104">Cet article se concentre sur hello compréhension requis étapes de planification pour la haute disponibilité tooensure vos applications reste accessible pendant les événements planifiés ou non.</span><span class="sxs-lookup"><span data-stu-id="5c674-104">This article focuses on understanding hello required planning steps for availability sets tooensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="5c674-105">Instructions d’implémentation pour groupes à haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="5c674-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="5c674-106">Décisions :</span><span class="sxs-lookup"><span data-stu-id="5c674-106">Decisions:</span></span>

* <span data-ttu-id="5c674-107">Groupes à haute disponibilité Combien avez-vous besoin pour hello différents niveaux et les rôles dans votre infrastructure d’application ?</span><span class="sxs-lookup"><span data-stu-id="5c674-107">How many availability sets do you need for hello various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="5c674-108">Tâches :</span><span class="sxs-lookup"><span data-stu-id="5c674-108">Tasks:</span></span>

* <span data-ttu-id="5c674-109">Définir le nombre hello d’ordinateurs virtuels dans chaque couche d’application que vous avez besoin.</span><span class="sxs-lookup"><span data-stu-id="5c674-109">Define hello number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="5c674-110">Déterminez si vous devez tooadjust hello de panne ou mise à jour toobe domaines utilisé pour votre application.</span><span class="sxs-lookup"><span data-stu-id="5c674-110">Determine if you need tooadjust hello number of fault or update domains toobe used for your application.</span></span>
* <span data-ttu-id="5c674-111">Définir hello requis à haute disponibilité à l’aide de votre convention d’affectation de noms et les machines virtuelles se trouvent dans les.</span><span class="sxs-lookup"><span data-stu-id="5c674-111">Define hello required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="5c674-112">Une machine virtuelle ne peut résider que dans un seul groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="5c674-112">A VM can only reside in one availability set.</span></span> 

## <a name="availability-sets"></a><span data-ttu-id="5c674-113">Groupes à haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="5c674-113">Availability sets</span></span>
<span data-ttu-id="5c674-114">Dans Azure, les machines virtuelles (VM) peut être placées dans un regroupement logique de tooa appelé un ensemble de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="5c674-114">In Azure, virtual machines (VMs) can be placed in tooa logical grouping called an availability set.</span></span> <span data-ttu-id="5c674-115">Lorsque vous créez des machines virtuelles au sein d’un ensemble de disponibilité, hello plateforme Azure répartit la sélection élective hello de ces ordinateurs virtuels sur hello sous-jacent d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="5c674-115">When you create VMs within an availability set, hello Azure platform distributes hello placement of those VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="5c674-116">Il convient un toohello d’événement de maintenance planifiée plateforme Azure ou d’un matériel sous-jacent / erreur d’infrastructure, utilisez hello de haute disponibilité garantit qu’au moins une machine virtuelle reste en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="5c674-116">Should there be a planned maintenance event toohello Azure platform or an underlying hardware / infrastructure fault, hello use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="5c674-117">En tant que meilleure pratique, les applications ne doivent pas résider sur une seule machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="5c674-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="5c674-118">Un ensemble de disponibilité qui contient une seule machine virtuelle ne prendre aucune protection contre les événements planifiés ou au sein de hello plateforme Azure.</span><span class="sxs-lookup"><span data-stu-id="5c674-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within hello Azure platform.</span></span> <span data-ttu-id="5c674-119">Hello [contrat SLA Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines) requiert deux ou plusieurs des ordinateurs virtuels au sein d’une disponibilité ensemble tooallow hello distribution des machines virtuelles entre hello sous-jacent d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="5c674-119">hello [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set tooallow hello distribution of VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="5c674-120">Si vous utilisez [stockage Azure Premium](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello contrat SLA Azure s’applique tooa unique machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="5c674-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello Azure SLA applies tooa single VM.</span></span>

<span data-ttu-id="5c674-121">infrastructure sous-jacente de Hello dans Azure est divisé en clusters matériels de toomultiple.</span><span class="sxs-lookup"><span data-stu-id="5c674-121">hello underlying infrastructure in Azure is divided in toomultiple hardware clusters.</span></span> <span data-ttu-id="5c674-122">Chaque cluster de matériel peut prendre en charge une plage de tailles de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="5c674-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="5c674-123">Un groupe à haute disponibilité ne peut être hébergé que sur un seul cluster de matériel à la fois.</span><span class="sxs-lookup"><span data-stu-id="5c674-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="5c674-124">Par conséquent, hello plage de tailles de machine virtuelle qui peuvent exister dans un ensemble de disponibilité unique est limité toohello plage de tailles de machine virtuelle pris en charge par cluster de matériel hello.</span><span class="sxs-lookup"><span data-stu-id="5c674-124">Therefore, hello range of VM sizes that can exist in a single availability set is limited toohello range of VM sizes supported by hello hardware cluster.</span></span> <span data-ttu-id="5c674-125">cluster de matériel Hello pour hello à haute disponibilité est sélectionné lorsque hello première machine virtuelle dans le groupe à haute disponibilité hello est déployé ou lorsque le démarrage hello première machine virtuelle dans un ensemble de disponibilité où tous les ordinateurs virtuels sont actuellement en état arrêté désalloué de hello.</span><span class="sxs-lookup"><span data-stu-id="5c674-125">hello hardware cluster for hello availability set is selected when hello first VM in hello availability set is deployed or when starting hello first VM in an availability set where all VMs are currently in hello stopped-deallocated state.</span></span> <span data-ttu-id="5c674-126">Hello CLI commande suivante peut être utilisé toodetermine hello plage de machine virtuelle tailles disponibles pour un ensemble de disponibilité : « az liste-tailles de machine virtuelle--emplacement \<chaîne\>»</span><span class="sxs-lookup"><span data-stu-id="5c674-126">hello following CLI command can be used toodetermine hello range of VM sizes available for an availability set: “az vm list-sizes --location \<string\>”</span></span>

<span data-ttu-id="5c674-127">Chaque cluster matériel est divisée dans les domaines de mise à jour toomultiple et les domaines d’erreur.</span><span class="sxs-lookup"><span data-stu-id="5c674-127">Each hardware cluster is divided in toomultiple update domains and fault domains.</span></span> <span data-ttu-id="5c674-128">Ces domaines sont définis par les hôtes qui partagent un cycle de mise à jour commun, ou une infrastructure physique similaire, comme l’alimentation ou la mise en réseau.</span><span class="sxs-lookup"><span data-stu-id="5c674-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="5c674-129">Azure distribue automatiquement vos machines virtuelles au sein d’un groupe à haute disponibilité sur la disponibilité de toomaintain de domaines et la tolérance de panne.</span><span class="sxs-lookup"><span data-stu-id="5c674-129">Azure automatically distributes your VMs within an availability set across domains toomaintain availability and fault tolerance.</span></span> <span data-ttu-id="5c674-130">Selon la taille de hello de votre application et le nombre de hello d’ordinateurs virtuels au sein d’un ensemble de disponibilité, vous pouvez ajuster le nombre de hello des domaines, vous souhaitez toouse.</span><span class="sxs-lookup"><span data-stu-id="5c674-130">Depending on hello size of your application and hello number of VMs within an availability set, you can adjust hello number of domains you wish toouse.</span></span> <span data-ttu-id="5c674-131">Vous pouvez en savoir plus sur [la gestion de la disponibilité et l’utilisation des domaines d’erreur et de mise à jour](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="5c674-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="5c674-132">Lorsque vous concevez votre infrastructure d’application, planifiez toouse de niveaux d’application hello.</span><span class="sxs-lookup"><span data-stu-id="5c674-132">When designing your application infrastructure, plan out hello application tiers toouse.</span></span> <span data-ttu-id="5c674-133">Machines virtuelles de groupe qui font Office de hello même objectif dans les jeux de tooavailability, par exemple un groupe à haute disponibilité pour les machines virtuelles votre frontales en cours d’exécution nginx ou Apache.</span><span class="sxs-lookup"><span data-stu-id="5c674-133">Group VMs that serve hello same purpose in tooavailability sets, such as an availability set for your front-end VMs running nginx or Apache.</span></span> <span data-ttu-id="5c674-134">Créez un groupe à haute disponibilité distinct pour les machines virtuelles principales tournant sous MongoDB ou MySQL.</span><span class="sxs-lookup"><span data-stu-id="5c674-134">Create a separate availability set for your back-end VMs running MongoDB or MySQL.</span></span> <span data-ttu-id="5c674-135">Hello vise tooensure que chaque composant de votre application est protégé par un ensemble de disponibilité et au moins une fois instance reste toujours en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="5c674-135">hello goal is tooensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="5c674-136">Équilibreurs de charge peuvent être utilisés devant chaque toowork de la couche application en même temps que la haute disponibilité et assurez-vous que le trafic peut toujours être routé tooa instance en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="5c674-136">Load balancers can be utilized in front of each application tier toowork alongside an availability set and ensure traffic can always be routed tooa running instance.</span></span> <span data-ttu-id="5c674-137">Sans un équilibreur de charge, vos machines virtuelles peuvent continuer à s’exécuter dans l’ensemble des événements de maintenance planifiées et non planifiées, mais l’utilisateur final n’est peut-être pas en mesure de tooresolve les si hello d’ordinateurs virtuels principal n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="5c674-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able tooresolve them if hello primary VM is unavailable.</span></span>

<span data-ttu-id="5c674-138">Concevez votre application à des fins de haute disponibilité au niveau de la couche de stockage.</span><span class="sxs-lookup"><span data-stu-id="5c674-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="5c674-139">Il est recommandé de Hello est trop[utiliser des disques gérés pour les machines virtuelles dans un ensemble de disponibilité](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="5c674-139">hello best practice is too[use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="5c674-140">Si vous utilisez actuellement des disques non managées, nous recommandons vivement que vous trop[convertir des machines virtuelles dans le groupe à haute disponibilité des disques gérés toouse](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="5c674-140">If you are currently using unmanaged disks, we highly recommend you too[convert VMs in Availability Set toouse Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="5c674-141">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="5c674-141">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

