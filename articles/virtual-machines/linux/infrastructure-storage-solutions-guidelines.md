---
title: Solutions de stockage pour les machines virtuelles Linux dans Azure | Microsoft Docs
description: "Découvrez-en plus sur les principales instructions de conception et d’implémentation pour le déploiement de solutions de stockage dans des services d’infrastructure Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 7c5089b9db945b0e0f4523e53bb44c178ffd0781
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-linux-vms"></a><span data-ttu-id="b729f-103">Instructions pour les infrastructures Stockage Azure pour machines virtuelles Linux</span><span class="sxs-lookup"><span data-stu-id="b729f-103">Azure storage infrastructure guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="b729f-104">Cet article se concentre sur la compréhension des besoins de stockage et les considérations de conception pour obtenir des performances de machines virtuelles optimales.</span><span class="sxs-lookup"><span data-stu-id="b729f-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="b729f-105">Instructions d’implémentation pour le stockage</span><span class="sxs-lookup"><span data-stu-id="b729f-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="b729f-106">Décisions :</span><span class="sxs-lookup"><span data-stu-id="b729f-106">Decisions:</span></span>

* <span data-ttu-id="b729f-107">Allez-vous utiliser des disques managés Azure ou des disques non managés ?</span><span class="sxs-lookup"><span data-stu-id="b729f-107">Are you going to use Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="b729f-108">Devez-vous utiliser le stockage Standard ou Premium pour votre charge de travail ?</span><span class="sxs-lookup"><span data-stu-id="b729f-108">Do you need to use Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="b729f-109">Avez-vous besoin d’un entrelacement de disques pour créer des disques d’une taille supérieure à 4 To ?</span><span class="sxs-lookup"><span data-stu-id="b729f-109">Do you need disk striping to create disks larger than 4TB?</span></span>
* <span data-ttu-id="b729f-110">Avez-vous besoin d’un entrelacement pour optimiser les performances d’E/S de votre charge de travail ?</span><span class="sxs-lookup"><span data-stu-id="b729f-110">Do you need disk striping to achieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="b729f-111">Quel est l’ensemble de comptes de stockage dont vous avez besoin pour héberger votre charge de travail ou votre infrastructure informatique ?</span><span class="sxs-lookup"><span data-stu-id="b729f-111">What set of storage accounts do you need to host your IT workload or infrastructure?</span></span>

<span data-ttu-id="b729f-112">Tâches :</span><span class="sxs-lookup"><span data-stu-id="b729f-112">Tasks:</span></span>

* <span data-ttu-id="b729f-113">Passez en revue les demandes d’E/S des applications que vous déployez et planifiez le numéro et le type de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b729f-113">Review I/O demands of the applications you are deploying and plan the appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="b729f-114">Créer l’ensemble de comptes de stockage à l’aide de votre convention d’affectation de noms.</span><span class="sxs-lookup"><span data-stu-id="b729f-114">Create the set of storage accounts using your naming convention.</span></span> <span data-ttu-id="b729f-115">Vous pouvez utiliser le portail ou l’interface de ligne de commande Azure.</span><span class="sxs-lookup"><span data-stu-id="b729f-115">You can use the Azure CLI or the portal.</span></span>

## <a name="storage"></a><span data-ttu-id="b729f-116">Storage</span><span class="sxs-lookup"><span data-stu-id="b729f-116">Storage</span></span>
<span data-ttu-id="b729f-117">Azure Storage est un élément essentiel du déploiement et de la gestion des applications et des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="b729f-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="b729f-118">Azure Storage fournit des services pour le stockage des données de fichiers, les données non structurées et les messages. Il fait également partie de l’infrastructure de prise en charge des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="b729f-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of the infrastructure supporting VMs.</span></span>

<span data-ttu-id="b729f-119">[Les disques managés Azure](../../storage/storage-managed-disks-overview.md) gèrent le stockage pour vous en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="b729f-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind the scenes.</span></span> <span data-ttu-id="b729f-120">Avec les disques non managés, vous créez des comptes de stockage dédiés à la prise en charge des disques (fichiers de disques durs virtuels) de vos machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="b729f-120">With unmanaged disks, you create storage accounts to hold the disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="b729f-121">Dans le cadre d’une scalabilité verticale, vous devez créer la quantité suffisante de comptes de stockage supplémentaires. Ceci vous évite de dépasser la limite d’E/S associée au stockage de vos disques.</span><span class="sxs-lookup"><span data-stu-id="b729f-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed the IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="b729f-122">Maintenant que votre stockage est géré par Managed Disks, vous n’êtes plus restreint par les limites des comptes de stockage (comme 20 000 E/S par seconde et par compte).</span><span class="sxs-lookup"><span data-stu-id="b729f-122">With Managed Disks handling storage, you are no longer limited by the storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="b729f-123">Vous n’avez plus à copier vos images personnalisées (fichiers de disques durs virtuels) sur plusieurs comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="b729f-123">You also no longer have to copy your custom images (VHD files) to multiple storage accounts.</span></span> <span data-ttu-id="b729f-124">Vous pouvez les gérer à partir d’un emplacement centralisé (un compte de stockage par région Azure) et les utiliser pour créer des centaines de machines virtuelles dans un abonnement.</span><span class="sxs-lookup"><span data-stu-id="b729f-124">You can manage them in a central location – one storage account per Azure region – and use them to create hundreds of VMs in a subscription.</span></span> <span data-ttu-id="b729f-125">Nous vous recommandons d’utiliser des disques managés pour les nouveaux déploiements.</span><span class="sxs-lookup"><span data-stu-id="b729f-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="b729f-126">Il existe deux types de comptes de stockage disponibles dans pour prendre en charge les machines virtuelles :</span><span class="sxs-lookup"><span data-stu-id="b729f-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="b729f-127">Les comptes de stockage standard vous donnent accès au Stockage Blob (utilisé pour le stockage de disques de machines virtuelles Azure), au Stockage Table, au Stockage File d’attente et au Stockage Fichier.</span><span class="sxs-lookup"><span data-stu-id="b729f-127">Standard storage accounts give you access to blob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="b729f-128">[Stockage Premium](../../storage/storage-premium-storage.md) offrent une prise en charge des disques hautes performances à faible latence pour les charges de travail gourmandes en E/S, telles que le cluster partitionné MongoDB.</span><span class="sxs-lookup"><span data-stu-id="b729f-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as MongoDB Sharded cluster.</span></span> <span data-ttu-id="b729f-129">Actuellement, le Stockage Premium prend uniquement en charge les disques de machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="b729f-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="b729f-130">Azure crée des machines virtuelles avec un disque de système d’exploitation, et éventuellement plusieurs disques de données facultatifs.</span><span class="sxs-lookup"><span data-stu-id="b729f-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="b729f-131">Le disque de système d’exploitation et les disques de données sont des objets blob de pages Azure, tandis que le disque temporaire est stocké localement sur le nœud comprenant l’emplacement de la machine.</span><span class="sxs-lookup"><span data-stu-id="b729f-131">The operating system disk and data disks are Azure page blobs, whereas the temporary disk is stored locally on the node where the machine lives.</span></span> <span data-ttu-id="b729f-132">Lors de la conception d’applications, veillez à utiliser uniquement ce disque temporaire pour des données non persistantes, car la machine virtuelle peut être migrée entre ordinateurs hôtes pendant un événement de maintenance.</span><span class="sxs-lookup"><span data-stu-id="b729f-132">Take care when designing applications to only use this temporary disk for non-persistent data as the VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="b729f-133">Toutes les données stockées sur le disque temporaire seraient alors perdues.</span><span class="sxs-lookup"><span data-stu-id="b729f-133">Any data stored on the temporary disk would be lost.</span></span>

<span data-ttu-id="b729f-134">La durabilité et la haute disponibilité sont fournies par l’environnement de Stockage Azure sous-jacent afin de garantir que vos données restent protégées contre les défaillances matérielles et les maintenances non planifiées.</span><span class="sxs-lookup"><span data-stu-id="b729f-134">Durability and high availability is provided by the underlying Azure Storage environment to ensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="b729f-135">Lorsque vous concevez votre environnement de stockage Azure, vous pouvez choisir de répliquer le stockage de machines virtuelles :</span><span class="sxs-lookup"><span data-stu-id="b729f-135">As you design your Azure Storage environment, you can choose to replicate VM storage:</span></span>

* <span data-ttu-id="b729f-136">en local dans un centre de données Azure donné</span><span class="sxs-lookup"><span data-stu-id="b729f-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="b729f-137">entre centres de données Azure dans une région donnée</span><span class="sxs-lookup"><span data-stu-id="b729f-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="b729f-138">entre centres de données Azure dans des régions différentes.</span><span class="sxs-lookup"><span data-stu-id="b729f-138">across Azure datacenters across different regions.</span></span>

<span data-ttu-id="b729f-139">Vous pouvez lire [plus d’informations sur les options de réplication pour la haute disponibilité](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="b729f-139">You can read [more about the replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="b729f-140">Les disques de système d’exploitation et disques de données ont une taille maximale de 4 To.</span><span class="sxs-lookup"><span data-stu-id="b729f-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="b729f-141">Vous pouvez utiliser le Gestionnaire de volumes logiques (LVM) pour dépasser cette limite en regroupant des disques de données pour présenter des volumes logiques plus de 1 023 Go à votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="b729f-141">You can use Logical Volume Manager (LVM) to surpass this limit by pooling together data disks to present logical volumes larger than 1023GB to your VM.</span></span>

<span data-ttu-id="b729f-142">Il existe certaines limites d’évolutivité lors de la conception de vos déploiements de Stockage Azure. Consultez [Abonnement Microsoft Azure et limites, quotas et contraintes du service](../../azure-subscription-service-limits.md#storage-limits) pour plus de détails.</span><span class="sxs-lookup"><span data-stu-id="b729f-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="b729f-143">Voir également [Objectifs de performance et d’extensibilité de Stockage Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="b729f-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="b729f-144">En ce qui concerne le stockage d’applications, vous pouvez stocker des données d’objets non structurées, comme des documents, des images, des sauvegardes, des données de configuration, des journaux, etc.</span><span class="sxs-lookup"><span data-stu-id="b729f-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="b729f-145">à l’aide de Stockage Blob.</span><span class="sxs-lookup"><span data-stu-id="b729f-145">using blob storage.</span></span> <span data-ttu-id="b729f-146">Plutôt que d’écrire sur un disque virtuel connecté à la machine virtuelle, l’application peut écrire directement sur le stockage d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="b729f-146">Rather than your application writing to a virtual disk attached to the VM, the application can write directly to Azure blob storage.</span></span> <span data-ttu-id="b729f-147">Stockage Blob offre également la possibilité de choisir entre [des niveaux de stockage chaud et froid](../../storage/storage-blob-storage-tiers.md) selon vos besoins de disponibilité et vos contraintes de coût.</span><span class="sxs-lookup"><span data-stu-id="b729f-147">Blob storage also provides the option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="b729f-148">Disques agrégés par bandes</span><span class="sxs-lookup"><span data-stu-id="b729f-148">Striped disks</span></span>
<span data-ttu-id="b729f-149">En plus de vous permettre de créer des disques d’une taille supérieure à 1 023 Go dans plusieurs instances, l’entrelacement de disques améliore les performances en permettant à plusieurs objets blob de sauvegarder le stockage d’un seul volume.</span><span class="sxs-lookup"><span data-stu-id="b729f-149">Besides allowing you to create disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs to back the storage for a single volume.</span></span> <span data-ttu-id="b729f-150">Avec l’agrégation par bandes, l’E/S requise pour écrire et lire des données à partir d’un seul disque logique est exécutée en parallèle.</span><span class="sxs-lookup"><span data-stu-id="b729f-150">With striping, the I/O required to write and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="b729f-151">Azure impose des limites quant au nombre de disques de données et à la quantité de bande passante disponible, selon la taille de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="b729f-151">Azure imposes limits on the number of data disks and amount of bandwidth available, depending on the VM size.</span></span> <span data-ttu-id="b729f-152">Pour en savoir plus, consultez [Tailles de machines virtuelles](sizes.md).</span><span class="sxs-lookup"><span data-stu-id="b729f-152">For details, see [Sizes for virtual machines](sizes.md)</span></span>

<span data-ttu-id="b729f-153">Si vous utilisez l’entrelacement pour les disques de données Azure, respectez les consignes suivantes :</span><span class="sxs-lookup"><span data-stu-id="b729f-153">If you are using disk striping for Azure data disks, consider the following guidelines:</span></span>

* <span data-ttu-id="b729f-154">Attachez le nombre maximum autorisé de disques de données pour la taille de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="b729f-154">Attach the maximum data disks allowed for the VM size.</span></span>
* <span data-ttu-id="b729f-155">Utilisez LVM.</span><span class="sxs-lookup"><span data-stu-id="b729f-155">Use LVM.</span></span>
* <span data-ttu-id="b729f-156">Évitez d’utiliser des options de mise en cache des disques de données Azure (Stratégie de mise en cache = Aucune).</span><span class="sxs-lookup"><span data-stu-id="b729f-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="b729f-157">Pour en savoir plus, consultez la rubrique [Configurer LVM sur une machine virtuelle Linux](configure-lvm.md).</span><span class="sxs-lookup"><span data-stu-id="b729f-157">For more information, see [Configuring LVM on a Linux VM](configure-lvm.md).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="b729f-158">Comptes de stockage multiples</span><span class="sxs-lookup"><span data-stu-id="b729f-158">Multiple storage accounts</span></span>
<span data-ttu-id="b729f-159">Cette section ne s’applique pas aux [disques managés Azure](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), étant donné que vous ne créez pas de comptes de stockage distincts.</span><span class="sxs-lookup"><span data-stu-id="b729f-159">This section does not apply to [Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="b729f-160">Lorsque vous concevez votre environnement Stockage Azure pour les disques non managés, vous pouvez utiliser plusieurs comptes de stockage quand le nombre de machines virtuelles que vous déployez augmente.</span><span class="sxs-lookup"><span data-stu-id="b729f-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as the number of VMs you deploy increases.</span></span> <span data-ttu-id="b729f-161">Cette approche permet de répartir les E/S sur l’infrastructure de Stockage Azure sous-jacente afin de maintenir des performances optimales pour vos machines virtuelles et vos applications.</span><span class="sxs-lookup"><span data-stu-id="b729f-161">This approach helps distribute out the I/O across the underlying Azure Storage infrastructure to maintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="b729f-162">Lorsque vous concevez des applications que vous déployez, prenez en compte les exigences d’E/S de chaque machine virtuelle et équilibrez ces machines virtuelles à travers les comptes de Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="b729f-162">As you design the applications that you are deploying, consider the I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="b729f-163">Essayez d’éviter de grouper toutes les machines virtuelles gourmandes en E/S sur un ou deux comptes de stockage seulement.</span><span class="sxs-lookup"><span data-stu-id="b729f-163">Try to avoid grouping all the high I/O demanding VMs in to just one or two storage accounts.</span></span>

<span data-ttu-id="b729f-164">Pour plus d’informations sur les fonctionnalités d’E/S des différentes options de Stockage Azure et des valeurs maximales recommandées, consultez [Objectifs de performance et d’évolutivité du Stockage Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="b729f-164">For more information about the I/O capabilities of the different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b729f-165">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b729f-165">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

