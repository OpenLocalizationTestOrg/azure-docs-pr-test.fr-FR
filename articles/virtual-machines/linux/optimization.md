---
title: Optimiser votre machine virtuelle Linux sur Azure | Microsoft Docs
description: "Découvrez différents conseils d’optimisation qui vous permettront de configurer votre machine virtuelle Linux de manière à en optimiser les performances sur Azure."
keywords: machine virtuelle linux, linux machine virtuelle, machine virtuelle ubuntu
services: virtual-machines-linux
documentationcenter: 
author: rickstercdn
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 8baa30c8-d40e-41ac-93d0-74e96fe18d4c
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: rclaus
ms.openlocfilehash: eb79d574fd4dddfb986660cc338bc8748f2082c2
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="optimize-your-linux-vm-on-azure"></a><span data-ttu-id="4a3b7-104">Optimiser votre machine virtuelle Linux sur Azure</span><span class="sxs-lookup"><span data-stu-id="4a3b7-104">Optimize your Linux VM on Azure</span></span>
<span data-ttu-id="4a3b7-105">Il est simple de créer une machine virtuelle Linux à partir de la ligne de commande ou du portail.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-105">Creating a Linux virtual machine (VM) is easy to do from the command line or from the portal.</span></span> <span data-ttu-id="4a3b7-106">Ce didacticiel vous explique comment configurer votre machine virtuelle de manière à en optimiser les performances sur la plateforme Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-106">This tutorial shows you how to ensure you have set it up to optimize its performance on the Microsoft Azure platform.</span></span> <span data-ttu-id="4a3b7-107">Dans cette rubrique, une machine virtuelle de serveur Ubuntu est utilisée, mais vous pouvez également créer des machines virtuelles Linux en utilisant vos [propres images en tant que modèles](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-107">This topic uses an Ubuntu Server VM, but you can also create Linux virtual machine using [your own images as templates](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="4a3b7-108">Composants requis</span><span class="sxs-lookup"><span data-stu-id="4a3b7-108">Prerequisites</span></span>
<span data-ttu-id="4a3b7-109">Cet article repose sur l’hypothèse que vous disposez déjà d’un abonnement Azure actif ([s’inscrire pour un essai gratuit](https://azure.microsoft.com/pricing/free-trial/)) et que vous avez déjà approvisionné une machine virtuelle dans votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-109">This topic assumes you already have a working Azure subscription ([free trial signup](https://azure.microsoft.com/pricing/free-trial/)) and have already provisioned a VM into your Azure subscription.</span></span> <span data-ttu-id="4a3b7-110">Vérifiez que vous avez installé la dernière version [Azure CLI 2.0](/cli/azure/install-az-cli2) et que vous vous êtes connecté à votre abonnement Azure avec la commande [az login](/cli/azure/#login) avant de [créer une machine virtuelle](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-110">Make sure that you have the latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in to your Azure subscription with [az login](/cli/azure/#login) before you [create a VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-os-disk"></a><span data-ttu-id="4a3b7-111">Disque de système d’exploitation Azure</span><span class="sxs-lookup"><span data-stu-id="4a3b7-111">Azure OS Disk</span></span>
<span data-ttu-id="4a3b7-112">Lorsque vous créez une machine virtuelle Linux dans Azure, deux disques lui sont associés.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-112">Once you create a Linux VM in Azure, it has two disks associated with it.</span></span> <span data-ttu-id="4a3b7-113">**/dev/sda** est le disque de votre système d’exploitation, et **/dev/sdb** est votre disque temporaire.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-113">**/dev/sda** is your OS disk, **/dev/sdb** is your temporary disk.</span></span>  <span data-ttu-id="4a3b7-114">Le disque de système d’exploitation principal (**/dev/sda**) est exclusivement destiné au système d’exploitation, car il est optimisé pour le démarrage rapide des machines virtuelles et ne délivre pas de performances adéquates pour vos charges de travail.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-114">Do not use the main OS disk (**/dev/sda**) for anything except the operating system as it is optimized for fast VM boot time and does not provide good performance for your workloads.</span></span> <span data-ttu-id="4a3b7-115">Vous pouvez attacher un ou plusieurs disques à votre machine virtuelle afin de bénéficier d’un stockage persistant et optimisé pour vos données.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-115">You want to attach one or more disks to your VM to get persistent and optimized storage for your data.</span></span> 

## <a name="adding-disks-for-size-and-performance-targets"></a><span data-ttu-id="4a3b7-116">Ajout de disques selon vos objectifs de taille et de performances</span><span class="sxs-lookup"><span data-stu-id="4a3b7-116">Adding Disks for Size and Performance targets</span></span>
<span data-ttu-id="4a3b7-117">Selon la taille de machine virtuelle, vous pouvez attacher jusqu’à 16 disques supplémentaires dans une machine virtuelle série A, 32 disques dans une machine série D et 64 disques dans une machine série G, chacun de ces disques pouvant présenter une taille maximale de 1 To.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-117">Based on the VM size, you can attach up to 16 additional disks on an A-Series, 32 disks on a D-Series and 64 disks on a G-Series machine - each up to 1 TB in size.</span></span> <span data-ttu-id="4a3b7-118">Ajoutez des disques en fonction de vos besoins en matière d’espace et d’E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-118">You add extra disks as needed per your space and IOps requirements.</span></span> <span data-ttu-id="4a3b7-119">Les performances ciblées de chaque disque sont de 500 E/S par seconde pour un stockage Standard et de 5 000 E/S par seconde maximum pour un stockage Premium.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-119">Each disk has a performance target of 500 IOps for Standard Storage and up to 5000 IOps per disk for Premium Storage.</span></span>  <span data-ttu-id="4a3b7-120">Pour plus d’informations sur les disques de Stockage Premium, consultez l’article [Stockage Premium : stockage à hauts niveaux de performances pour les machines virtuelles Azure](../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-120">For more information about Premium Storage disks, see [Premium Storage: High-Performance Storage for Azure VMs](../../storage/common/storage-premium-storage.md)</span></span>

<span data-ttu-id="4a3b7-121">Pour bénéficier des plus hauts niveaux d’E/S par seconde sur les disques de Stockage Premium dont le paramètre de cache est défini sur **ReadOnly** ou sur **None**, vous devez désactiver les **barrières** lors du montage du système de fichiers dans Linux.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-121">To achieve the highest IOps on Premium Storage disks where their cache settings have been set to either **ReadOnly** or **None**, you must disable **barriers** while mounting the file system in Linux.</span></span> <span data-ttu-id="4a3b7-122">Ces barrières sont inutiles, car les écritures sur les disques de stockage Premium sont pérennes avec ces paramètres de cache.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-122">You do not need barriers because the writes to Premium Storage backed disks are durable for these cache settings.</span></span>

* <span data-ttu-id="4a3b7-123">Si vous utilisez **reiserFS**, désactivez les barrières à l’aide de l’option de montage `barrier=none`. (Pour activer les barrières, utilisez `barrier=flush`.)</span><span class="sxs-lookup"><span data-stu-id="4a3b7-123">If you use **reiserFS**, disable barriers using the mount option `barrier=none` (For enabling barriers, use `barrier=flush`)</span></span>
* <span data-ttu-id="4a3b7-124">Si vous utilisez **ext3/ext4**, désactivez les barrières à l’aide de l’option de montage `barrier=0`. (Pour activer les barrières, utilisez `barrier=1`.)</span><span class="sxs-lookup"><span data-stu-id="4a3b7-124">If you use **ext3/ext4**, disable barriers using the mount option `barrier=0` (For enabling barriers, use `barrier=1`)</span></span>
* <span data-ttu-id="4a3b7-125">Si vous utilisez **XFS**, désactivez les barrières à l’aide de l’option de montage `nobarrier`. (Pour activer les barrières, utilisez l’option `barrier`.)</span><span class="sxs-lookup"><span data-stu-id="4a3b7-125">If you use **XFS**, disable barriers using the mount option `nobarrier` (For enabling barriers, use the option `barrier`)</span></span>

## <a name="unmanaged-storage-account-considerations"></a><span data-ttu-id="4a3b7-126">Considérations relatives aux comptes de stockage non gérés</span><span class="sxs-lookup"><span data-stu-id="4a3b7-126">Unmanaged storage account considerations</span></span>
<span data-ttu-id="4a3b7-127">Lorsque vous créez une machine virtuelle avec Azure CLI 2.0, l’action par défaut consiste à utiliser Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-127">The default action when you create a VM with the Azure CLI 2.0 is to use Azure Managed Disks.</span></span>  <span data-ttu-id="4a3b7-128">Ces disques sont gérés par la plateforme Azure et ne nécessitent pas de préparation ou d’emplacement pour les stocker.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-128">These disks are handled by the Azure platform and do not require any preparation or location to store them.</span></span>  <span data-ttu-id="4a3b7-129">Les disques non gérés requièrent un compte de stockage et sont associés à certaines autres considérations en matière de performances.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-129">Unmanaged disks require a storage account and have some additional performance considerations.</span></span>  <span data-ttu-id="4a3b7-130">Pour plus d’informations sur les disques gérés, consultez [Vue d’ensemble d’Azure Managed Disks](../windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-130">For more information about managed disks, see [Azure Managed Disks overview](../windows/managed-disks-overview.md).</span></span>  <span data-ttu-id="4a3b7-131">La section qui suit décrit les considérations relatives aux performances dont vous devez tenir compte uniquement si vous utilisez des disques non gérés.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-131">The following section outlines performance considerations only when you use unmanaged disks.</span></span>  <span data-ttu-id="4a3b7-132">Une fois de plus, la solution de stockage par défaut et recommandée consiste à utiliser des disques gérés.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-132">Again, the default and recommended storage solution is to use managed disks.</span></span>

<span data-ttu-id="4a3b7-133">Si vous créez une machine virtuelle avec des disques non gérés, veillez à attacher les disques à partir de comptes de stockage résidant dans la même région que votre machine virtuelle afin d’assurer une proximité étroite et de minimiser la latence du réseau.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-133">If you create a VM with unmanaged disks, make sure that you attach disks from storage accounts residing in the same region as your VM to ensure close proximity and minimize network latency.</span></span>  <span data-ttu-id="4a3b7-134">Chaque compte de stockage Standard présente une limite de 20 000 E/S par seconde et une taille maximale de 500 To.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-134">Each Standard storage account has a maximum of 20k IOps and a 500 TB size capacity.</span></span>  <span data-ttu-id="4a3b7-135">Cette limite correspond à environ 40 disques utilisés de manière intensive, incluant le disque de système d’exploitation et tous les disques de données que vous créez.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-135">This  limit works out to approximately 40 heavily used disks including both the OS disk and any data disks you create.</span></span> <span data-ttu-id="4a3b7-136">Pour les comptes de stockage Premium, il n’existe aucun nombre maximal d’E/S par seconde, mais une limite de taille de 32 To.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-136">For Premium Storage accounts, there is no Maximum IOps limit but there is a 32 TB size limit.</span></span> 

<span data-ttu-id="4a3b7-137">Lorsque vous devez gérer des charges de travail à E/S par seconde élevées et que vous avez choisi le stockage Standard pour vos disques, vous pouvez avoir besoin de fractionner les disques entre plusieurs comptes de stockage pour ne pas risquer d’atteindre la limite de 20 000 E/S par seconde propre aux comptes de stockage Standard.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-137">When dealing with high IOps workloads and you have chosen Standard Storage for your disks, you might need to split the disks across multiple storage accounts to make sure you have not hit the 20,000 IOps limit for Standard Storage accounts.</span></span> <span data-ttu-id="4a3b7-138">Votre machine virtuelle peut contenir une combinaison de disques associés à différents comptes de stockage et types de comptes de stockage pour vous offrir la configuration optimale souhaitée.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-138">Your VM can contain a mix of disks from across different storage accounts and storage account types to achieve your optimal configuration.</span></span>
 

## <a name="your-vm-temporary-drive"></a><span data-ttu-id="4a3b7-139">Votre lecteur temporaire de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="4a3b7-139">Your VM Temporary drive</span></span>
<span data-ttu-id="4a3b7-140">Lorsque vous créez une machine virtuelle, Azure vous fournit par défaut un disque de système d’exploitation (**/dev/sda**) et un disque temporaire (**/dev/sdb**).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-140">By default when you create a VM, Azure provides you with an OS disk (**/dev/sda**) and a temporary disk (**/dev/sdb**).</span></span>  <span data-ttu-id="4a3b7-141">Tous les disques que vous ajoutez apparaissent sous la forme **/dev/sdc**, **/dev/sdd**, **/dev/sde**, etc.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-141">All additional disks you add show up as **/dev/sdc**, **/dev/sdd**, **/dev/sde** and so on.</span></span> <span data-ttu-id="4a3b7-142">Les données figurant sur votre disque temporaire (**/dev/sdb**) ne sont pas pérennes et risquent d’être perdues si des événements spécifiques, tels qu’un redimensionnement, un redéploiement ou une maintenance de machine virtuelle, imposent un redémarrage de votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-142">All data on your temporary disk (**/dev/sdb**) is not durable, and can be lost if specific events like VM Resizing, redeployment, or maintenance forces a restart of your VM.</span></span>  <span data-ttu-id="4a3b7-143">La taille et le type de votre disque temporaire sont liés à la taille de machine virtuelle que vous avez choisie au moment du déploiement.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-143">The size and type of your temporary disk is related to the VM size you chose at deployment time.</span></span> <span data-ttu-id="4a3b7-144">Pour toutes les machines virtuelles de taille Premium (séries DS, G et DS_V2), le lecteur temporaire est secondé par un disque SSD local offrant un surcroît de performances qui peut atteindre 48 000 E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-144">All of the premium size VMs (DS, G, and DS_V2 series) the temporary drive are backed by a local SSD for additional performance of up to 48k IOps.</span></span> 

## <a name="linux-swap-file"></a><span data-ttu-id="4a3b7-145">Fichier d’échange Linux</span><span class="sxs-lookup"><span data-stu-id="4a3b7-145">Linux Swap File</span></span>
<span data-ttu-id="4a3b7-146">Si votre machine virtuelle Azure est issue d’une image Ubuntu ou CoreOS, vous pouvez utiliser le fichier CustomData afin d’envoyer un fichier cloud-config à Cloud-init.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-146">If your Azure VM is from an Ubuntu or CoreOS image, then you can use CustomData to send a cloud-config to cloud-init.</span></span> <span data-ttu-id="4a3b7-147">Si vous [avez téléchargé une image Linux personnalisée](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) qui utilise cloud-init, vous configurez également les partitions d’échange à l’aide de cloud-init.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-147">If you [uploaded a custom Linux image](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that uses cloud-init, you also configure swap partitions using cloud-init.</span></span>

<span data-ttu-id="4a3b7-148">Pour les images Cloud Ubuntu, vous devez utiliser cloud-init pour configurer la partition d’échange.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-148">On Ubuntu Cloud Images, you must use cloud-init to configure the swap partition.</span></span> <span data-ttu-id="4a3b7-149">Pour plus d’informations, consultez l’article [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-149">For more information, see [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span></span>

<span data-ttu-id="4a3b7-150">Pour les images sans prise en charge cloud-init, les images déployées à partir d’Azure Marketplace présentent un agent Linux de machine virtuelle intégré au système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-150">For images without cloud-init support, VM images deployed from the Azure Marketplace have a VM Linux Agent integrated with the OS.</span></span> <span data-ttu-id="4a3b7-151">Cet agent permet à la machine virtuelle d’interagir avec divers services Azure.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-151">This agent allows the VM to interact with various Azure services.</span></span> <span data-ttu-id="4a3b7-152">Si vous ayez déployé une image standard à partir d’Azure Marketplace, vous devez suivre la procédure ci-après pour configurer les paramètres de votre fichier d’échange Linux de manière adéquate :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-152">Assuming you have deployed a standard image from the Azure Marketplace, you would need to do the following to correctly configure your Linux swap file settings:</span></span>

<span data-ttu-id="4a3b7-153">Vous devez rechercher et modifier deux entrées spécifiques dans le fichier **/etc/waagent.conf** .</span><span class="sxs-lookup"><span data-stu-id="4a3b7-153">Locate and modify two entries in the **/etc/waagent.conf** file.</span></span> <span data-ttu-id="4a3b7-154">Ces entrées contrôlent l’existence d’un fichier d’échange dédié et la taille de ce fichier.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-154">They control the existence of a dedicated swap file and size of the swap file.</span></span> <span data-ttu-id="4a3b7-155">Les paramètres à modifier sont `ResourceDisk.EnableSwap=N` et `ResourceDisk.SwapSizeMB=0`.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-155">The parameters you are looking to modify are `ResourceDisk.EnableSwap=N` and `ResourceDisk.SwapSizeMB=0`</span></span> 

<span data-ttu-id="4a3b7-156">Redéfinissez les paramètres sur les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-156">Change the parameters to the following settings:</span></span>

* <span data-ttu-id="4a3b7-157">ResourceDisk.EnableSwap=Y</span><span class="sxs-lookup"><span data-stu-id="4a3b7-157">ResourceDisk.EnableSwap=Y</span></span>
* <span data-ttu-id="4a3b7-158">ResourceDisk.SwapSizeMB={taille en Mo en fonction de vos besoins}</span><span class="sxs-lookup"><span data-stu-id="4a3b7-158">ResourceDisk.SwapSizeMB={size in MB to meet your needs}</span></span> 

<span data-ttu-id="4a3b7-159">Une fois que vous avez modifié ces paramètres, vous devez redémarrer waagent ou votre machine virtuelle Linux pour que ces modifications soient prises en compte.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-159">Once you have made the change, you need to restart the waagent or restart your Linux VM to reflect those changes.</span></span>  <span data-ttu-id="4a3b7-160">Vous pouvez vérifier que ces modifications ont été implémentées et qu’un fichier d’échange a été créé en utilisant la commande `free` pour visualiser l’espace disponible.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-160">You know the changes have been implemented and a swap file has been created when you use the `free` command to view free space.</span></span> <span data-ttu-id="4a3b7-161">L’exemple ci-après correspond à la création d’un fichier d’échange de 512 Mo suite à la modification du fichier **waagent.conf** :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-161">The following example has a 512MB swap file created as a result of modifying the **waagent.conf** file:</span></span>

```bash
azuseruser@myVM:~$ free
            total       used       free     shared    buffers     cached
Mem:       3525156     804168    2720988        408       8428     633192
-/+ buffers/cache:     162548    3362608
Swap:       524284          0     524284
```

## <a name="io-scheduling-algorithm-for-premium-storage"></a><span data-ttu-id="4a3b7-162">Algorithme de planification d’E/S pour le stockage Premium</span><span class="sxs-lookup"><span data-stu-id="4a3b7-162">I/O scheduling algorithm for Premium Storage</span></span>
<span data-ttu-id="4a3b7-163">Avec le noyau Linux 2.6.18, l’algorithme de planification d’E/S par défaut est passé de Deadline à CFQ (algorithme de file d’attente complètement équitable).</span><span class="sxs-lookup"><span data-stu-id="4a3b7-163">With the 2.6.18 Linux kernel, the default I/O scheduling algorithm was changed from Deadline to CFQ (Completely fair queuing algorithm).</span></span> <span data-ttu-id="4a3b7-164">Pour les modèles d’E/S à accès aléatoire, les différences de performances entre CFQ et Deadline sont minimes.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-164">For random access I/O patterns, there is negligible difference in performance differences between CFQ and Deadline.</span></span>  <span data-ttu-id="4a3b7-165">Pour les disques SSD qui présentent un modèle d’E/S de disque principalement séquentiel, le retour à l’algorithme NOOP ou Deadline peut contribuer à améliorer les performances d’E/S.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-165">For SSD-based disks where the disk I/O pattern is predominantly sequential, switching back to the NOOP or Deadline algorithm can achieve better I/O performance.</span></span>

### <a name="view-the-current-io-scheduler"></a><span data-ttu-id="4a3b7-166">Visualiser le planificateur d’E/S actuel</span><span class="sxs-lookup"><span data-stu-id="4a3b7-166">View the current I/O scheduler</span></span>
<span data-ttu-id="4a3b7-167">Utilisez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-167">Use the following command:</span></span>  

```bash
cat /sys/block/sda/queue/scheduler
```

<span data-ttu-id="4a3b7-168">Vous obtenez la sortie ci-après, indiquant le planificateur actuel.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-168">You see following output, which indicates the current scheduler.</span></span>  

```bash
noop [deadline] cfq
```

### <a name="change-the-current-device-devsda-of-io-scheduling-algorithm"></a><span data-ttu-id="4a3b7-169">Changement du dispositif actuel (/dev/sda) de l’algorithme de planification d’E/S</span><span class="sxs-lookup"><span data-stu-id="4a3b7-169">Change the current device (/dev/sda) of I/O scheduling algorithm</span></span>
<span data-ttu-id="4a3b7-170">Utilisez les commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-170">Use the following commands:</span></span>  

```bash
azureuser@myVM:~$ sudo su -
root@myVM:~# echo "noop" >/sys/block/sda/queue/scheduler
root@myVM:~# sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"/g' /etc/default/grub
root@myVM:~# update-grub
```

> [!NOTE]
> <span data-ttu-id="4a3b7-171">L’application de ce paramètre uniquement pour le disque **/dev/sda** n’a pas d’utilité.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-171">Applying this setting for **/dev/sda** alone is not useful.</span></span> <span data-ttu-id="4a3b7-172">Définissez-le sur tous les disques de données présentant un modèle d’E/S majoritairement séquentiel.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-172">Set on all data disks where sequential I/O dominates the I/O pattern.</span></span>  

<span data-ttu-id="4a3b7-173">Vous devriez obtenir la sortie ci-après, qui indique que **grub.cfg** a été régénéré avec succès et que le planificateur par défaut a été mis à jour vers NOOP.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-173">You should see the following output, indicating that **grub.cfg** has been rebuilt successfully and that the default scheduler has been updated to NOOP.</span></span>  

```bash
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.13.0-34-generic
Found initrd image: /boot/initrd.img-3.13.0-34-generic
Found linux image: /boot/vmlinuz-3.13.0-32-generic
Found initrd image: /boot/initrd.img-3.13.0-32-generic
Found memtest86+ image: /memtest86+.elf
Found memtest86+ image: /memtest86+.bin
done
```

<span data-ttu-id="4a3b7-174">Pour la famille de distribution Redhat, la commande suivante suffit :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-174">For the Redhat distribution family, you only need the following command:</span></span>   

```bash
echo 'echo noop >/sys/block/sda/queue/scheduler' >> /etc/rc.local
```

## <a name="using-software-raid-to-achieve-higher-iops"></a><span data-ttu-id="4a3b7-175">Utilisation d’un RAID logiciel pour optimiser le nombre d’E/S par seconde</span><span class="sxs-lookup"><span data-stu-id="4a3b7-175">Using Software RAID to achieve higher I/Ops</span></span>
<span data-ttu-id="4a3b7-176">Si vos charges de travail nécessitent un niveau d’E/S par seconde supérieur à celui fourni par un seul disque, vous devez utiliser une configuration de RAID logiciel composée de plusieurs disques.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-176">If your workloads require more IOps than a single disk can provide, you need to use a software RAID configuration of multiple disks.</span></span> <span data-ttu-id="4a3b7-177">Étant donné qu’Azure assure déjà la résilience de disque au niveau de la couche de structure locale, une configuration d’entrelacement RAID-0 vous offre un niveau de performances optimal.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-177">Because Azure already performs disk resiliency at the local fabric layer, you achieve the highest level of performance from a RAID-0 striping configuration.</span></span>  <span data-ttu-id="4a3b7-178">Approvisionnez et créez des disques dans l’environnement Azure et attachez-les à votre machine virtuelle Linux avant de procéder au partitionnement, au formatage et au montage des lecteurs.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-178">Provision and create disks in the Azure environment and attach them to your Linux VM before partitioning, formatting and mounting the drives.</span></span>  <span data-ttu-id="4a3b7-179">Pour plus d’informations sur la configuration d’un RAID logiciel sur votre machine virtuelle Linux dans Azure, consultez le document **[Configuration d’un RAID logiciel sur Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-179">More details on configuring a software RAID setup on your Linux VM in azure can be found in the **[Configuring Software RAID on Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)** document.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4a3b7-180">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="4a3b7-180">Next Steps</span></span>
<span data-ttu-id="4a3b7-181">Comme dans toute procédure d’optimisation, n’oubliez pas que vous devez effectuer des tests avant et après chaque modification afin d’en évaluer l’impact.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-181">Remember, as with all optimization discussions, you need to perform tests before and after each change to measure the impact the change has.</span></span>  <span data-ttu-id="4a3b7-182">L’optimisation est un processus graduel dont les résultats varient d’une machine à l’autre dans votre environnement.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-182">Optimization is a step by step process that has different results across different machines in your environment.</span></span>  <span data-ttu-id="4a3b7-183">Ce qui fonctionne bien pour une configuration donnée n’offre pas nécessairement de bons résultats pour d’autres.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-183">What works for one configuration may not work for others.</span></span>

<span data-ttu-id="4a3b7-184">Voici quelques liens utiles vous permettant d’accéder à des ressources supplémentaires :</span><span class="sxs-lookup"><span data-stu-id="4a3b7-184">Some useful links to additional resources:</span></span> 

* [<span data-ttu-id="4a3b7-185">Stockage Premium : stockage hautes performances pour les charges de travail des machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="4a3b7-185">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../../storage/common/storage-premium-storage.md)
* [<span data-ttu-id="4a3b7-186">Guide d’utilisateur de l’agent Linux Azure</span><span class="sxs-lookup"><span data-stu-id="4a3b7-186">Azure Linux Agent User Guide</span></span>](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="4a3b7-187">Optimisation des performances MySQL sur les machines virtuelles Linux Azure</span><span class="sxs-lookup"><span data-stu-id="4a3b7-187">Optimizing MySQL Performance on Azure Linux VMs</span></span>](classic/optimize-mysql.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)
* [<span data-ttu-id="4a3b7-188">Configuration d’un RAID logiciel sur Linux</span><span class="sxs-lookup"><span data-stu-id="4a3b7-188">Configure Software RAID on Linux</span></span>](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

