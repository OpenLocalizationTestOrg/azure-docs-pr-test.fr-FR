---
title: "aaaHigh disponibilité et récupération d’urgence de HANA SAP sur Azure (instances de grande taille) | Documents Microsoft"
description: "Établissez la haute disponibilité et planifiez la récupération d’urgence de SAP HANA sur Azure (grandes instances)."
services: virtual-machines-linux
documentationcenter: 
author: RicksterCDN
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 12/01/2016
ms.author: rclaus
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0c0967f54cf29bbb275eb7cda9d36608488add9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-large-instances-high-availability-and-disaster-recovery-on-azure"></a><span data-ttu-id="46f1b-103">Haute disponibilité et récupération d’urgence de SAP HANA (grandes instances) sur Azure</span><span class="sxs-lookup"><span data-stu-id="46f1b-103">SAP HANA (large instances) high availability and disaster recovery on Azure</span></span> 

<span data-ttu-id="46f1b-104">La haute disponibilité et la récupération d’urgence constituent des aspects fondamentaux de l’exécution de vos serveurs SAP HANA sur Azure (grandes instances) stratégiques.</span><span class="sxs-lookup"><span data-stu-id="46f1b-104">High availability and disaster recovery are important aspects of running your mission-critical SAP HANA on Azure (large instances) servers.</span></span> <span data-ttu-id="46f1b-105">Son toowork important avec SAP, votre intégrateur système, ou Microsoft tooproperly architectes et implémentez hello stratégie de droite haute-disponibilité/récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="46f1b-105">It's important toowork with SAP, your system integrator, or Microsoft tooproperly architect and implement hello right high-availability/disaster-recovery strategy.</span></span> <span data-ttu-id="46f1b-106">Il est également objectif de point de récupération tooconsider important hello et objectif de temps de récupération, qui sont spécifiques tooyour environnement.</span><span class="sxs-lookup"><span data-stu-id="46f1b-106">It is also important tooconsider hello recovery point objective and recovery time objective, which are specific tooyour environment.</span></span>

## <a name="high-availability"></a><span data-ttu-id="46f1b-107">Haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="46f1b-107">High availability</span></span>

<span data-ttu-id="46f1b-108">Microsoft prend en charge les méthodes de haute disponibilité SAP HANA « hors de la zone de hello, » qui incluent :</span><span class="sxs-lookup"><span data-stu-id="46f1b-108">Microsoft supports SAP HANA high-availability methods "out of hello box," which include:</span></span>

- <span data-ttu-id="46f1b-109">**La réplication du stockage :** hello tooreplicate de capacité du système de stockage de tout emplacement tooanother de données (dans, ou distinct, hello même centre de données).</span><span class="sxs-lookup"><span data-stu-id="46f1b-109">**Storage replication:** hello storage system's ability tooreplicate all data tooanother location (within, or separate from, hello same datacenter).</span></span> <span data-ttu-id="46f1b-110">SAP HANA opère indépendamment de cette méthode.</span><span class="sxs-lookup"><span data-stu-id="46f1b-110">SAP HANA operates independently of this method.</span></span>
- <span data-ttu-id="46f1b-111">**Réplication du système HANA :** hello de réplication de toutes les données dans le système de SAP HANA SAP HANA tooa distinct.</span><span class="sxs-lookup"><span data-stu-id="46f1b-111">**HANA system replication:** hello replication of all data in SAP HANA tooa separate SAP HANA system.</span></span> <span data-ttu-id="46f1b-112">objectif de temps de récupération Hello est réduit grâce à la réplication de données à intervalles réguliers.</span><span class="sxs-lookup"><span data-stu-id="46f1b-112">hello recovery time objective is minimized through data replication at regular intervals.</span></span> <span data-ttu-id="46f1b-113">SAP HANA prend en charge les modes de mémoire et synchrones asynchrones, synchrones (recommandé uniquement pour SAP HANA systèmes qui se trouvent dans hello même centre de données ou inférieur à 100 KM éloignés).</span><span class="sxs-lookup"><span data-stu-id="46f1b-113">SAP HANA supports asynchronous, synchronous in-memory, and synchronous modes (recommended only for SAP HANA systems that are within hello same datacenter or less than 100 KM apart).</span></span> <span data-ttu-id="46f1b-114">Dans la conception actuelle de hello de tampons de grande instance HANA, la réplication de système HANA peut être utilisée pour la haute disponibilité uniquement.</span><span class="sxs-lookup"><span data-stu-id="46f1b-114">In hello current design of HANA large-instance stamps, HANA system replication can be used for high availability only.</span></span>
- <span data-ttu-id="46f1b-115">**Héberger le basculement automatique :** un toouse de solution de récupération après incident local en tant qu’une autre toosystem la réplication.</span><span class="sxs-lookup"><span data-stu-id="46f1b-115">**Host auto-failover:** A local fault-recovery solution toouse as an alternative toosystem replication.</span></span> <span data-ttu-id="46f1b-116">Lorsque hello principal devient indisponible, un ou plusieurs nœuds de SAP HANA en attente sont configurés en mode de montée en puissance parallèle et SAP HANA bascule automatiquement tooanother nœud.</span><span class="sxs-lookup"><span data-stu-id="46f1b-116">When hello master node becomes unavailable, one or more standby SAP HANA nodes are configured in scale-out mode and SAP HANA automatically fails over tooanother node.</span></span>

<span data-ttu-id="46f1b-117">Pour plus d’informations sur la haute disponibilité de SAP HANA, consultez hello SAP informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-117">For more information on SAP HANA high availability, see hello following SAP information:</span></span>

- [<span data-ttu-id="46f1b-118">SAP HANA High-Availability Whitepaper (Livre blanc sur la haute disponibilité de SAP HANA)</span><span class="sxs-lookup"><span data-stu-id="46f1b-118">SAP HANA High-Availability Whitepaper</span></span>](http://go.sap.com/documents/2016/05/f8e5eeba-737c-0010-82c7-eda71af511fa.html)
- [<span data-ttu-id="46f1b-119">SAP HANA Administration Guide (Guide d’administration de SAP HANA)</span><span class="sxs-lookup"><span data-stu-id="46f1b-119">SAP HANA Administration Guide</span></span>](http://help.sap.com/hana/SAP_HANA_Administration_Guide_en.pdf)
- [<span data-ttu-id="46f1b-120">SAP Academy Video on SAP HANA System Replication (Vidéo SAP Academy sur la réplication du système SAP HANA) </span><span class="sxs-lookup"><span data-stu-id="46f1b-120">SAP Academy Video on SAP HANA System Replication</span></span>](http://scn.sap.com/community/hana-in-memory/blog/2015/05/19/sap-hana-system-replication)
- [<span data-ttu-id="46f1b-121">SAP Support Note #1999880 – FAQ on SAP HANA System Replication (Note de support SAP n°1999880 – FAQ sur la réplication du système SAP HANA)</span><span class="sxs-lookup"><span data-stu-id="46f1b-121">SAP Support Note #1999880 – FAQ on SAP HANA System Replication</span></span>](https://bcs.wdf.sap.corp/sap/support/notes/1999880)
- <span data-ttu-id="46f1b-122">[SAP Support Note #2165547 – SAP HANA Backup and Restore within SAP HANA System Replication Environment (Note de support SAP n°2165547 – Sauvegarde et restauration SAP HANA dans l’environnement de réplication du système SAP HANA)](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span><span class="sxs-lookup"><span data-stu-id="46f1b-122">[SAP Support Note #2165547 – SAP HANA Backup and Restore within SAP HANA System Replication Environment](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span></span>
- <span data-ttu-id="46f1b-123">[SAP Support Note #1984882 – Using SAP HANA System Replication for Hardware Exchange with Minimum/Zero Downtime (Note de support SAP n°1984882 – Utilisation de la réplication du système SAP HANA pour l’échange de matériel avec un temps d’arrêt minime ou nul)](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span><span class="sxs-lookup"><span data-stu-id="46f1b-123">[SAP Support Note #1984882 – Using SAP HANA System Replication for Hardware Exchange with Minimum/Zero Downtime](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span></span>

## <a name="disaster-recovery"></a><span data-ttu-id="46f1b-124">Récupération d'urgence</span><span class="sxs-lookup"><span data-stu-id="46f1b-124">Disaster recovery</span></span>

<span data-ttu-id="46f1b-125">SAP HANA sur Azure (grandes instances) est offert dans deux régions Azure d’une région géopolitique.</span><span class="sxs-lookup"><span data-stu-id="46f1b-125">SAP HANA on Azure (large instances) is offered in two Azure regions in a geopolitical region.</span></span> <span data-ttu-id="46f1b-126">Entre les tampons de grande instance deux hello de deux régions différentes est une connectivité réseau directe pour répliquer les données pendant la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="46f1b-126">Between hello two large-instance stamps of two different regions is a direct network connectivity for replicating data during disaster recovery.</span></span> <span data-ttu-id="46f1b-127">la réplication de données de hello Hello est infrastructure de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-127">hello replication of hello data is storage-infrastructure based.</span></span> <span data-ttu-id="46f1b-128">la réplication de Hello n’est pas effectuée par défaut.</span><span class="sxs-lookup"><span data-stu-id="46f1b-128">hello replication is not done by default.</span></span> <span data-ttu-id="46f1b-129">Il est fait pour les configurations de client hello classés de la récupération d’urgence hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-129">It is done for hello customer configurations that ordered hello disaster recovery.</span></span> <span data-ttu-id="46f1b-130">Dans la conception actuelle de hello, réplication HANA du système ne peut pas être utilisée pour la récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="46f1b-130">In hello current design, HANA system replication can't be used for disaster recovery.</span></span>

<span data-ttu-id="46f1b-131">Toutefois, tootake parti hello la récupération d’urgence, vous devez toostart toodesign hello réseau connectivité toohello deux régions différentes Azure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-131">However, tootake advantage of hello disaster recovery, you need toostart toodesign hello network connectivity toohello two different Azure regions.</span></span> <span data-ttu-id="46f1b-132">toodo, vous pouvez donc une connexion de circuit ExpressRoute de Azure localement dans votre région Azure principale et une autre connexion de circuit de région de récupération d’urgence tooyour local.</span><span class="sxs-lookup"><span data-stu-id="46f1b-132">toodo so, you need an Azure ExpressRoute circuit connection from on-premises in your main Azure region and another circuit connection from on-premises tooyour disaster-recovery region.</span></span> <span data-ttu-id="46f1b-133">Cette mesure s’applique à une situation dans laquelle une région Azure complète, incluant l’emplacement d’un routeur Microsoft Enterprise Edge (MSEE), rencontre un problème.</span><span class="sxs-lookup"><span data-stu-id="46f1b-133">This measure would cover a situation in which a complete Azure region, including a Microsoft enterprise edge router (MSEE) location, has an issue.</span></span>

<span data-ttu-id="46f1b-134">Comme deuxième mesure, vous pouvez vous connecter à tous les réseaux virtuels Azure qui se connectent tooSAP HANA sur Azure (instances de grande taille) dans un des tooboth de régions hello de ces circuits ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="46f1b-134">As a second measure, you can connect all Azure virtual networks that connect tooSAP HANA on Azure (large instances) in one of hello regions tooboth of those ExpressRoute circuits.</span></span> <span data-ttu-id="46f1b-135">Cette mesure répond à un cas où seule des emplacements de MSEE hello qui se connecte votre emplacement local avec Azure est mis hors service.</span><span class="sxs-lookup"><span data-stu-id="46f1b-135">This measure addresses a case where only one of hello MSEE locations that connects your on-premises location with Azure goes off duty.</span></span>

<span data-ttu-id="46f1b-136">Hello figure ci-dessous illustre une configuration optimale hello pour la récupération d’urgence :</span><span class="sxs-lookup"><span data-stu-id="46f1b-136">hello following figure shows hello optimal configuration for disaster recovery:</span></span>

![Configuration optimale pour la récupération d’urgence](./media/hana-overview-high-availability-disaster-recovery/image1-optimal-configuration.png)

<span data-ttu-id="46f1b-138">Bonjour cas optimale pour une configuration de la récupération d’urgence du réseau de hello est toohave deux des circuits ExpressRoute à partir de local toohello deux régions différentes Azure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-138">hello optimal case for a disaster-recovery configuration of hello network is toohave two ExpressRoute circuits from on-premises toohello two different Azure regions.</span></span> <span data-ttu-id="46f1b-139">Un circuit passe tooregion #1, une instance de production en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="46f1b-139">One circuit goes tooregion #1, running a production instance.</span></span> <span data-ttu-id="46f1b-140">circuit ExpressRoute de la deuxième Hello passe tooregion #2, certaines instances HANA hors production en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="46f1b-140">hello second ExpressRoute circuit goes tooregion #2, running some non-production HANA instances.</span></span> <span data-ttu-id="46f1b-141">(Cela est important si une région Azure entière, y compris hello MSEE et tampon de grande instance, sort de la grille de hello.)</span><span class="sxs-lookup"><span data-stu-id="46f1b-141">(This is important if an entire Azure region, including hello MSEE and large-instance stamp, goes off hello grid.)</span></span>

<span data-ttu-id="46f1b-142">Comme deuxième mesure, hello différents réseaux virtuels est connecté toohello des circuits ExpressRoute différents qui sont connecté tooSAP HANA sur Azure (instances de grande taille).</span><span class="sxs-lookup"><span data-stu-id="46f1b-142">As a second measure, hello various virtual networks are connected toohello various ExpressRoute circuits that are connected tooSAP HANA on Azure (large instances).</span></span> <span data-ttu-id="46f1b-143">Vous pouvez contourner hello emplacement de stockage un MSEE échoue, ou vous réduirez l’objectif de point de récupération de hello pour la récupération d’urgence, comme nous aborderons plus tard.</span><span class="sxs-lookup"><span data-stu-id="46f1b-143">You can bypass hello location where an MSEE is failing, or you can lower hello recovery point objective for disaster recovery, as we discuss later.</span></span>

<span data-ttu-id="46f1b-144">Hello des spécifications suivantes pour une installation de récupération d’urgence sont :</span><span class="sxs-lookup"><span data-stu-id="46f1b-144">hello next requirements for a disaster-recovery setup are:</span></span>

- <span data-ttu-id="46f1b-145">Vous devez ordonner SAP HANA sur les références de Azure (instances de grande taille) de hello même taille que votre production références (SKU) et que vous les déployer dans la zone de reprise après sinistre hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-145">You must order SAP HANA on Azure (large instances) SKUs of hello same size as your production SKUs and deploy them in hello disaster-recovery region.</span></span> <span data-ttu-id="46f1b-146">Ces instances peuvent être utilisés toorun test, bac à sable ou des instances de QA HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-146">These instances can be used toorun test, sandbox, or QA HANA instances.</span></span>
- <span data-ttu-id="46f1b-147">Vous devez commander un profil de la récupération d’urgence pour chacune de vos HANA SAP sur Azure (instances de grande taille) références (SKU) que vous souhaitez toorecover dans le site de récupération d’urgence hello, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="46f1b-147">You must order a disaster-recovery profile for each of your SAP HANA on Azure (large instances) SKUs that you want toorecover in hello disaster-recovery site, if necessary.</span></span> <span data-ttu-id="46f1b-148">Cette action entraîne une allocation toohello des volumes de stockage, qui sont la cible de hello de réplication de stockage hello à partir de votre région de production dans la zone de reprise après sinistre hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-148">This action leads toohello allocation of storage volumes, which are hello target of hello storage replication from your production region into hello disaster-recovery region.</span></span>

<span data-ttu-id="46f1b-149">Une fois que vous remplissez hello précédant la configuration requise, il est la réplication de stockage de responsabilité toostart hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-149">After you meet hello preceding requirements, it is your responsibility toostart hello storage replication.</span></span> <span data-ttu-id="46f1b-150">Dans l’infrastructure de stockage hello utilisée pour SAP HANA sur Azure (instances de grande taille), hello la réplication du stockage est instantanés de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-150">In hello storage infrastructure used for SAP HANA on Azure (large instances), hello basis of storage replication is storage snapshots.</span></span> <span data-ttu-id="46f1b-151">réplication de la récupération d’urgence toostart hello, vous devez tooperform :</span><span class="sxs-lookup"><span data-stu-id="46f1b-151">toostart hello disaster-recovery replication, you need tooperform:</span></span>

- <span data-ttu-id="46f1b-152">Une capture instantanée de votre numéro d’unité logique de démarrage, comme décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="46f1b-152">A snapshot of your boot LUN, as described earlier.</span></span>
- <span data-ttu-id="46f1b-153">Une capture instantanée de vos volumes associés à HANA, comme décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="46f1b-153">A snapshot of your HANA-related volumes, as described earlier.</span></span>

<span data-ttu-id="46f1b-154">Après avoir exécuté ces captures instantanées, un réplica initial des volumes de hello est amorcé sur des volumes hello qui sont associés à votre profil de récupération d’urgence dans la région de récupération d’urgence hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-154">After you execute these snapshots, an initial replica of hello volumes is seeded on hello volumes that are associated with your disaster-recovery profile in hello disaster-recovery region.</span></span>

<span data-ttu-id="46f1b-155">Par la suite, instantané stockage le plus récent hello est utilisé toutes les heures deltas hello tooreplicate qui surviennent sur des volumes de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-155">Subsequently, hello most recent storage snapshot is used every hour tooreplicate hello deltas that develop on hello storage volumes.</span></span>

<span data-ttu-id="46f1b-156">objectif de point de récupération Hello obtenue avec cette configuration est de 60 minutes too90.</span><span class="sxs-lookup"><span data-stu-id="46f1b-156">hello recovery point objective that's achieved with this configuration is from 60 too90 minutes.</span></span> <span data-ttu-id="46f1b-157">tooachieve une amélioration de la reprise de point dans les cas de récupération d’urgence hello, copie hello HANA journal des transactions à partir de SAP HANA sur Azure (instances de grande taille) toohello autre région Azure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-157">tooachieve a better recovery point objective in hello disaster-recovery case, copy hello HANA transaction log backups from SAP HANA on Azure (large instances) toohello other Azure region.</span></span> <span data-ttu-id="46f1b-158">tooachieve cet objectif de point de récupération, hello suivant :</span><span class="sxs-lookup"><span data-stu-id="46f1b-158">tooachieve this recovery point objective, do hello following:</span></span>

1. <span data-ttu-id="46f1b-159">Sauvegardez hello HANA transaction sauvegarde du journal aussi souvent que possible trop/hana/journaux /.</span><span class="sxs-lookup"><span data-stu-id="46f1b-159">Back up hello HANA transaction log as frequently as possible too/hana/log/backup.</span></span>
2. <span data-ttu-id="46f1b-160">Copiez les sauvegardes de journaux de transactions hello lorsqu’ils sont tooan terminé de machine virtuelle Azure (VM), qui se trouve dans un réseau virtuel qui s’est connecté toohello SAP HANA sur le serveur Azure (instances de grande taille).</span><span class="sxs-lookup"><span data-stu-id="46f1b-160">Copy hello transaction log backups when they are finished tooan Azure virtual machine (VM), which is in a virtual network that's connected toohello SAP HANA on Azure (large instances) server.</span></span>
3. <span data-ttu-id="46f1b-161">À partir de cette machine virtuelle, copiez tooa de sauvegarde hello machine virtuelle qui est dans un réseau virtuel dans la zone de reprise après sinistre hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-161">From that VM, copy hello backup tooa VM that's in a virtual network in hello disaster-recovery region.</span></span>
4. <span data-ttu-id="46f1b-162">Conserver des sauvegardes du journal des transactions de hello dans cette région hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="46f1b-162">Keep hello transaction log backups in that region in hello VM.</span></span>

<span data-ttu-id="46f1b-163">En cas de sinistre, une fois le profil de la récupération d’urgence hello a été déployé sur un serveur réel, copier les sauvegardes de journaux de transactions hello à partir de la toohello de machine virtuelle hello HANA SAP sur Azure (instances de grande taille) qui est maintenant hello serveur principal dans la zone de reprise après sinistre hello, et restaurez ces sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-163">In case of disaster, after hello disaster-recovery profile has been deployed on an actual server, copy hello transaction log backups from hello VM toohello SAP HANA on Azure (large instances) that is now hello primary server in hello disaster-recovery region, and restore those backups.</span></span> <span data-ttu-id="46f1b-164">Cette récupération est possible car l’état de hello de HANA sur des disques de récupération d’urgence hello est celle d’un instantané HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-164">This recovery is possible because hello state of HANA on hello disaster-recovery disks is that of a HANA snapshot.</span></span> <span data-ttu-id="46f1b-165">Il s’agit de point d’offset hello pour d’autres restaurations du journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="46f1b-165">This is hello offset point for further restorations of transaction log backups.</span></span>

## <a name="backup-and-restore"></a><span data-ttu-id="46f1b-166">Sauvegarde et restauration</span><span class="sxs-lookup"><span data-stu-id="46f1b-166">Backup and restore</span></span>

<span data-ttu-id="46f1b-167">Une des bases de toooperating hello principaux aspects consiste à s’assurer de base de données hello peut être protégé à partir de divers événements graves.</span><span class="sxs-lookup"><span data-stu-id="46f1b-167">One of hello most important aspects toooperating databases is making sure hello database can be protected from various catastrophic events.</span></span> <span data-ttu-id="46f1b-168">Ces événements peuvent être provoqués par quoi que ce soit à partir d’erreurs de l’utilisateur toosimple catastrophes naturelles.</span><span class="sxs-lookup"><span data-stu-id="46f1b-168">These events can be caused by anything from natural disasters toosimple user errors.</span></span>

<span data-ttu-id="46f1b-169">Sauvegarde une base de données hello capacité toorestore il tooany point dans le temps (tel qu’avant la suppression des données critiques, une personne), permet à l’état de restauration tooa qui est aussi proche que possible toohello moyen, elle était avant l’interruption de hello s’est produite.</span><span class="sxs-lookup"><span data-stu-id="46f1b-169">Backing up a database, with hello ability toorestore it tooany point in time (such as before somebody deleted critical data), allows restoration tooa state that is as close as possible toohello way it was before hello disruption occurred.</span></span>

<span data-ttu-id="46f1b-170">Pour optimiser les résultats, vous devez effectuer deux types de sauvegardes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-170">Two types of backups must be performed for best results:</span></span>

- <span data-ttu-id="46f1b-171">Sauvegardes de base de données</span><span class="sxs-lookup"><span data-stu-id="46f1b-171">Database backups</span></span>
- <span data-ttu-id="46f1b-172">Sauvegardes des journaux de transactions</span><span class="sxs-lookup"><span data-stu-id="46f1b-172">Transaction log backups</span></span>

<span data-ttu-id="46f1b-173">En outre les sauvegardes de base de données toofull effectuées à un niveau de l’application, vous pouvez être encore plus précise en effectuant des sauvegardes et les instantanés de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-173">In addition toofull database backups performed at an application-level, you can be even more thorough by performing backups with storage snapshots.</span></span> <span data-ttu-id="46f1b-174">Effectuer des sauvegardes de journal est également important pour la restauration de la base de données hello (tooempty hello journaux et des transactions déjà validées).</span><span class="sxs-lookup"><span data-stu-id="46f1b-174">Performing log backups is also important for restoring hello database (and tooempty hello logs from already committed transactions).</span></span>

<span data-ttu-id="46f1b-175">SAP HANA sur Azure (grandes instances) offre deux options de sauvegarde et de restauration :</span><span class="sxs-lookup"><span data-stu-id="46f1b-175">SAP HANA on Azure (large instances) offers two backup and restore options:</span></span>

- <span data-ttu-id="46f1b-176">Utilisation de vos propres méthodes de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="46f1b-176">Do it yourself (DIY).</span></span> <span data-ttu-id="46f1b-177">Une fois que vous calculez tooensure suffisamment d’espace disque, effectuer des sauvegardes complètes de base de données et du journal à l’aide des méthodes de sauvegarde de disque (disques toothose).</span><span class="sxs-lookup"><span data-stu-id="46f1b-177">After you calculate tooensure enough disk space, perform full database and log backups by using disk backup methods (toothose disks).</span></span> <span data-ttu-id="46f1b-178">Au fil du temps, les sauvegardes hello sont copié tooan compte de stockage Azure (une fois que vous configurez un serveur de fichiers Azure avec stockage quasiment illimitée), ou utilisent un coffre de sauvegarde Azure ou d’un froid le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-178">Over time, hello backups are copied tooan Azure storage account (after you set up an Azure-based file server with virtually unlimited storage), or use an Azure Backup vault or Azure cold storage.</span></span> <span data-ttu-id="46f1b-179">Une autre option est toouse un outil de protection des données tierces, telles que Commvault, les sauvegardes de hello toostore une fois qu’ils sont copiés de compte de stockage tooa.</span><span class="sxs-lookup"><span data-stu-id="46f1b-179">Another option is toouse a third-party data protection tool, such as Commvault, toostore hello backups after they are copied tooa storage account.</span></span> <span data-ttu-id="46f1b-180">Hello, option de sauvegarde personnalisée peut également être nécessaire pour les données qui doit toobe stockée plus longtemps à des fins d’audit et de conformité.</span><span class="sxs-lookup"><span data-stu-id="46f1b-180">hello DIY backup option might also be necessary for data that needs toobe stored for longer periods for compliancy and auditing purposes.</span></span>
- <span data-ttu-id="46f1b-181">Utiliser hello de sauvegarde et de restauration qui hello infrastructure sous-jacente de HANA SAP sur Azure (instances de grande taille) fournit.</span><span class="sxs-lookup"><span data-stu-id="46f1b-181">Use hello backup and restore functionality that hello underlying infrastructure of SAP HANA on Azure (large instances) provides.</span></span> <span data-ttu-id="46f1b-182">Cette option correspond à la nécessité de hello pour les sauvegardes et rend les sauvegardes manuelles presque obsolète (sauf où les sauvegardes de données sont requises pour des raisons de compatibilité).</span><span class="sxs-lookup"><span data-stu-id="46f1b-182">This option fulfills hello need for backups, and it makes manual backups nearly obsolete (except where data backups are required for compliance purposes).</span></span> <span data-ttu-id="46f1b-183">rest Hello de cette section traite hello sauvegarde et de restauration des fonctionnalités offertes avec HANA (instances de grande taille).</span><span class="sxs-lookup"><span data-stu-id="46f1b-183">hello rest of this section addresses hello backup and restore functionality that's offered with HANA (large instances).</span></span>

> [!NOTE]
> <span data-ttu-id="46f1b-184">technologie de capture instantanée Hello qui est utilisée par l’infrastructure sous-jacente de hello de HANA (instances de grande taille) a une dépendance sur les instantanés de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-184">hello snapshot technology that is used by hello underlying infrastructure of HANA (large instances) has a dependency on SAP HANA snapshots.</span></span> <span data-ttu-id="46f1b-185">Les captures instantanées SAP HANA ne fonctionnent pas conjointement avec les conteneurs de bases de données SAP HANA mutualisées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-185">SAP HANA snapshots do not work in conjunction with SAP HANA Multitenant Database Containers.</span></span> <span data-ttu-id="46f1b-186">Par conséquent, cette méthode de sauvegarde ne peut pas être utilisé toodeploy SAP HANA mutualisée base de données de conteneurs.</span><span class="sxs-lookup"><span data-stu-id="46f1b-186">As a result, this method of backup cannot be used toodeploy SAP HANA Multitenant Database Containers.</span></span>

### <a name="using-storage-snapshots-of-sap-hana-on-azure-large-instances"></a><span data-ttu-id="46f1b-187">Utilisation des captures instantanées de stockage de SAP HANA sur Azure (grandes instances)</span><span class="sxs-lookup"><span data-stu-id="46f1b-187">Using storage snapshots of SAP HANA on Azure (large instances)</span></span>

<span data-ttu-id="46f1b-188">infrastructure de stockage Hello sous-jacent HANA SAP sur Azure (instances de grande taille) prend en charge la notion de hello d’un instantané du stockage de volumes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-188">hello storage infrastructure underlying SAP HANA on Azure (large instances) supports hello notion of a storage snapshot of volumes.</span></span> <span data-ttu-id="46f1b-189">Sauvegarde et restauration d’un volume particulier sont pris en charge, hello suivant considérations :</span><span class="sxs-lookup"><span data-stu-id="46f1b-189">Both backup and restoration of a particular volume are supported, with hello following considerations:</span></span>

- <span data-ttu-id="46f1b-190">Au lieu d’exécuter des sauvegardes de base de données, le système procède à de fréquentes captures instantanées des volumes de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-190">Instead of database backups, storage volume snapshots are taken on a frequent basis.</span></span>
- <span data-ttu-id="46f1b-191">instantané de stockage Hello lance un instantané de SAP HANA avant l’exécution de capture instantanée de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-191">hello storage snapshot initiates an SAP HANA snapshot before it executes hello storage snapshot.</span></span> <span data-ttu-id="46f1b-192">Cet instantané SAP HANA est le point de programme d’installation de hello pour les restaurations du journal éventuelle après la récupération de l’instantané du stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-192">This SAP HANA snapshot is hello setup point for eventual log restorations after recovery of hello storage snapshot.</span></span>
- <span data-ttu-id="46f1b-193">À un moment hello où les instantanés de stockage hello est exécutée avec succès, instantané de SAP HANA hello est supprimé.</span><span class="sxs-lookup"><span data-stu-id="46f1b-193">At hello point where hello storage snapshot is executed successfully, hello SAP HANA snapshot is deleted.</span></span>
- <span data-ttu-id="46f1b-194">Sauvegardes de journaux fréquemment et sont stockées dans le volume de sauvegarde de journal hello ou dans Azure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-194">Log backups are taken frequently and stored in hello log backup volume or in Azure.</span></span>
- <span data-ttu-id="46f1b-195">Si la base de données hello doit être restauré tooa certain point dans le temps, une demande est faite tooMicrosoft prise en charge de Azure (panne de production) ou SAP HANA sur la gestion des services Azure toorestore tooa certaines instantané du stockage (par exemple, une planifié restauration d’un système de bac à sable état d’origine tooits).</span><span class="sxs-lookup"><span data-stu-id="46f1b-195">If hello database must be restored tooa certain point in time, a request is made tooMicrosoft Azure Support (production outage) or SAP HANA on Azure Service Management toorestore tooa certain storage snapshot (for example, a planned restoration of a sandbox system tooits original state).</span></span>
- <span data-ttu-id="46f1b-196">instantané de SAP HANA Hello qui est inclus dans l’instantané de stockage hello est un point de décalage pour appliquer les sauvegardes du journal qui ont été exécutées et stockées après que hello stockage instantané a été pris.</span><span class="sxs-lookup"><span data-stu-id="46f1b-196">hello SAP HANA snapshot that's included in hello storage snapshot is an offset point for applying log backups that have been executed and stored after hello storage snapshot was taken.</span></span>
- <span data-ttu-id="46f1b-197">Ces sauvegardes de journal sont effectuées toorestore tooa arrière de base de données hello certain point dans le temps.</span><span class="sxs-lookup"><span data-stu-id="46f1b-197">These log backups are taken toorestore hello database back tooa certain point in time.</span></span>

<span data-ttu-id="46f1b-198">Sauvegarde de hello en spécifiant\_nom crée un instantané de hello suivant volumes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-198">Specifying hello backup\_name creates a snapshot of hello following volumes:</span></span>

- <span data-ttu-id="46f1b-199">hana/data</span><span class="sxs-lookup"><span data-stu-id="46f1b-199">hana/data</span></span>
- <span data-ttu-id="46f1b-200">hana/log</span><span class="sxs-lookup"><span data-stu-id="46f1b-200">hana/log</span></span>
- <span data-ttu-id="46f1b-201">hana/log\_backup (monté en tant que sauvegarde dans hana/log)</span><span class="sxs-lookup"><span data-stu-id="46f1b-201">hana/log\_backup (mounted as backup into hana/log)</span></span>
- <span data-ttu-id="46f1b-202">hana/shared</span><span class="sxs-lookup"><span data-stu-id="46f1b-202">hana/shared</span></span>

### <a name="storage-snapshot-considerations"></a><span data-ttu-id="46f1b-203">Considérations relatives aux captures instantanées de stockage</span><span class="sxs-lookup"><span data-stu-id="46f1b-203">Storage snapshot considerations</span></span>

>[!NOTE]
><span data-ttu-id="46f1b-204">Les captures instantanées de stockage ne sont _pas_ fournies gratuitement car elles nécessitent l’allocation d’un espace de stockage supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="46f1b-204">Storage snapshots are _not_ provided free of charge, because additional storage space must be allocated.</span></span>

<span data-ttu-id="46f1b-205">mécanismes spécifiques de Hello d’instantanés de stockage pour SAP HANA sur Azure (instances de grande taille) sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-205">hello specific mechanics of storage snapshots for SAP HANA on Azure (large instances) include:</span></span>

- <span data-ttu-id="46f1b-206">Un instantané de stockage spécifique (ponctuelle hello lorsqu’elle est récupérée) consomme très peu de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-206">A specific storage snapshot (at hello point in time when it is taken) consumes very little storage.</span></span>
- <span data-ttu-id="46f1b-207">En tant que les modifications de contenu de données et du contenu de hello dans les données SAP HANA modification des fichiers sur le volume de stockage hello, instantané d’hello doit le contenu de bloc d’origine toostore hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-207">As data content changes and hello content in SAP HANA data files change on hello storage volume, hello snapshot needs toostore hello original block content.</span></span>
- <span data-ttu-id="46f1b-208">instantané de stockage Hello augmente en taille.</span><span class="sxs-lookup"><span data-stu-id="46f1b-208">hello storage snapshot increases in size.</span></span> <span data-ttu-id="46f1b-209">Hello plus hello instantané existe, hello plus grande hello stockage snapshot devient.</span><span class="sxs-lookup"><span data-stu-id="46f1b-209">hello longer hello snapshot exists, hello larger hello storage snapshot becomes.</span></span>
- <span data-ttu-id="46f1b-210">Hello plus apportés toohello volume de base de données SAP HANA sur la durée de vie hello d’un instantané du stockage, hello plus grande hello la consommation d’espace d’instantané de stockage hello devient.</span><span class="sxs-lookup"><span data-stu-id="46f1b-210">hello more changes made toohello SAP HANA database volume over hello lifetime of a storage snapshot, hello larger hello space consumption of hello storage snapshot becomes.</span></span>

<span data-ttu-id="46f1b-211">SAP HANA sur Azure (instances de grande taille) est fourni avec des tailles de volume fixe pour le volume de données et les journaux de SAP HANA hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-211">SAP HANA on Azure (large instances) comes with fixed volume sizes for hello SAP HANA data and log volume.</span></span> <span data-ttu-id="46f1b-212">Effectuer des captures instantanées de ces volumes mange à votre espace de volume afin qu’il soit votre instantanés de stockage responsabilité tooschedule (dans hello SAP HANA sur processus Azure [instances de grande taille]).</span><span class="sxs-lookup"><span data-stu-id="46f1b-212">Performing snapshots of those volumes eats into your volume space, so it is your responsibility tooschedule storage snapshots (within hello SAP HANA on Azure [large instances] process).</span></span>

<span data-ttu-id="46f1b-213">Hello sections suivantes fournissent des informations pour effectuer ces captures instantanées, y compris les recommandations générales :</span><span class="sxs-lookup"><span data-stu-id="46f1b-213">hello following sections provide information for performing these snapshots, including general recommendations:</span></span>

- <span data-ttu-id="46f1b-214">Bien que le matériel de hello peut faire face aux 255 instantanés par volume, nous vous recommandons vivement de rester en dessous de ce nombre.</span><span class="sxs-lookup"><span data-stu-id="46f1b-214">Though hello hardware can sustain 255 snapshots per volume, we highly recommend that you stay well below this number.</span></span>
- <span data-ttu-id="46f1b-215">Avant d’effectuer des captures instantanées du stockage, surveillez l’espace libre.</span><span class="sxs-lookup"><span data-stu-id="46f1b-215">Before you perform storage snapshots, monitor and keep track of free space.</span></span>
- <span data-ttu-id="46f1b-216">Nombre de hello inférieur d’instantanés de stockage basé sur l’espace libre.</span><span class="sxs-lookup"><span data-stu-id="46f1b-216">Lower hello number of storage snapshots based on free space.</span></span> <span data-ttu-id="46f1b-217">Vous devrez peut-être le nombre de hello toolower d’instantanés que vous conservez, ou vous devrez peut-être les volumes tooextend hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-217">You might need toolower hello number of snapshots that you keep, or you might need tooextend hello volumes.</span></span> <span data-ttu-id="46f1b-218">(Vous pouvez commander du stockage supplémentaire par unités de 1 To).</span><span class="sxs-lookup"><span data-stu-id="46f1b-218">(You can order additional storage in 1-TB units.)</span></span>
- <span data-ttu-id="46f1b-219">Lorsque vous exécutez des tâches telles que le déplacement de données dans SAP HANA avec des outils de migration système (en utilisant R3load ou en restaurant des bases de données SAP HANA à partir de sauvegardes), il est fortement déconseillé d’effectuer la moindre capture instantanée de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-219">During activities such as moving data into SAP HANA with system migration tools (with R3load, or by restoring SAP HANA databases from backups), we highly recommended that you not perform any storage snapshots.</span></span> <span data-ttu-id="46f1b-220">(Si une migration de système est en cours sur un nouveau système SAP HANA, des instantanés de stockage seraient inutile toobe effectuée.)</span><span class="sxs-lookup"><span data-stu-id="46f1b-220">(If a system migration is being done on a new SAP HANA system, storage snapshots would not need toobe performed.)</span></span>
- <span data-ttu-id="46f1b-221">Dans le cadre de réorganisations plus vastes des tables SAP HANA, les captures instantanées de stockage doivent être évitées dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="46f1b-221">During larger reorganizations of SAP HANA tables, storage snapshots should be avoided if possible.</span></span>
- <span data-ttu-id="46f1b-222">Les instantanés de stockage sont une fonctionnalités de récupération d’urgence hello tooengaging requis de HANA SAP sur Azure (instances de grande taille).</span><span class="sxs-lookup"><span data-stu-id="46f1b-222">Storage snapshots are a prerequisite tooengaging hello disaster-recovery capabilities of SAP HANA on Azure (large instances).</span></span>

### <a name="setting-up-storage-snapshots"></a><span data-ttu-id="46f1b-223">Configuration des captures instantanées de stockage</span><span class="sxs-lookup"><span data-stu-id="46f1b-223">Setting up storage snapshots</span></span>

1. <span data-ttu-id="46f1b-224">Assurez-vous que Perl est installé dans le système de d’exploitation Linux hello sur serveur de hello HANA (instances de grande taille).</span><span class="sxs-lookup"><span data-stu-id="46f1b-224">Make sure that Perl is installed in hello Linux operating system on hello HANA (large instances) server.</span></span>
2. <span data-ttu-id="46f1b-225">Modifier/etc/ssh/ssh\_ligne de hello config tooadd _Mac hmac-sha1_.</span><span class="sxs-lookup"><span data-stu-id="46f1b-225">Modify /etc/ssh/ssh\_config tooadd hello line _MACs hmac-sha1_.</span></span>
3. <span data-ttu-id="46f1b-226">Créer un compte d’utilisateur de sauvegarde SAP HANA sur le nœud principal de hello pour chaque instance SAP HANA que vous sont en cours d’exécution (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="46f1b-226">Create an SAP HANA backup user account on hello master node for each SAP HANA instance you are running (if applicable).</span></span>
4. <span data-ttu-id="46f1b-227">client de SAP HANA HDB Hello doit être installé sur tous les serveurs (instances de grande taille) de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-227">hello SAP HANA HDB client must be installed on all SAP HANA (large instances) servers.</span></span>
5. <span data-ttu-id="46f1b-228">Sur serveur hello première SAP HANA (instances de grande taille) de chaque région, une clé publique doit être créée hello tooaccess sous-jacent d’infrastructure de stockage qui contrôle la création d’instantanés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-228">On hello first SAP HANA (large instances) server of each region, a public key must be created tooaccess hello underlying storage infrastructure that controls snapshot creation.</span></span>
6. <span data-ttu-id="46f1b-229">Copiez le script hello azure\_hana\_backup.pl à partir de l’emplacement de toohello/scripts de **hdbsql** Hello installation de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-229">Copy hello script azure\_hana\_backup.pl from /scripts toohello location of **hdbsql** of hello SAP HANA installation.</span></span>
7. <span data-ttu-id="46f1b-230">Hello de copie HANABackupDetails.txt de fichiers à partir / scripts toohello même emplacement que hello script Perl.</span><span class="sxs-lookup"><span data-stu-id="46f1b-230">Copy hello HANABackupDetails.txt file from /scripts toohello same location as hello Perl script.</span></span>
8. <span data-ttu-id="46f1b-231">Modifier le fichier de HANABackupDetails.txt de hello en fonction des spécifications du client approprié hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-231">Modify hello HANABackupDetails.txt file as necessary for hello appropriate customer specifications.</span></span>

### <a name="step-1-install-sap-hana-hdbclient"></a><span data-ttu-id="46f1b-232">Étape 1 : Installer SAP HANA HDBClient</span><span class="sxs-lookup"><span data-stu-id="46f1b-232">Step 1: Install SAP HANA HDBClient</span></span>

<span data-ttu-id="46f1b-233">Hello Linux installé sur SAP HANA sur Azure (instances de grande taille) inclut des dossiers de hello et des scripts d’instantanés de stockage SAP HANA tooexecute nécessaire pour des raisons de sauvegarde et récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="46f1b-233">hello Linux installed on SAP HANA on Azure (large instances) includes hello folders and scripts necessary tooexecute SAP HANA storage snapshots for backup and disaster-recovery purposes.</span></span> <span data-ttu-id="46f1b-234">Toutefois, il est votre tooinstall responsabilité SAP HANA HDBclient lors de l’installation SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-234">However, it is your responsibility tooinstall SAP HANA HDBclient while you are installing SAP HANA.</span></span> <span data-ttu-id="46f1b-235">(Microsoft installe ni hello HDBclient ni SAP HANA.)</span><span class="sxs-lookup"><span data-stu-id="46f1b-235">(Microsoft installs neither hello HDBclient nor SAP HANA.)</span></span>

### <a name="step-2-change-etcsshsshconfig"></a><span data-ttu-id="46f1b-236">Étape 2 : Modifier /etc/ssh/ssh\_config</span><span class="sxs-lookup"><span data-stu-id="46f1b-236">Step 2: Change /etc/ssh/ssh\_config</span></span>

<span data-ttu-id="46f1b-237">Modifiez /etc/ssh/ssh\_config en ajoutant la ligne _MACs hmac-sha1_ comme indiqué ici :</span><span class="sxs-lookup"><span data-stu-id="46f1b-237">Change /etc/ssh/ssh\_config by adding _MACs hmac-sha1_ line as shown here:</span></span>
```
#   RhostsRSAAuthentication no
#   RSAAuthentication yes
#   PasswordAuthentication yes
#   HostbasedAuthentication no
#   GSSAPIAuthentication no
#   GSSAPIDelegateCredentials no
#   GSSAPIKeyExchange no
#   GSSAPITrustDNS no
#   BatchMode no
#   CheckHostIP yes
#   AddressFamily any
#   ConnectTimeout 0
#   StrictHostKeyChecking ask
#   IdentityFile ~/.ssh/identity
#   IdentityFile ~/.ssh/id_rsa
#   IdentityFile ~/.ssh/id_dsa
#   Port 22
Protocol 2
#   Cipher 3des
#   Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc
#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160
MACs hmac-sha1
#   EscapeChar ~
#   Tunnel no
#   TunnelDevice any:any
#   PermitLocalCommand no
#   VisualHostKey no
#   ProxyCommand ssh -q -W %h:%p gateway.example.com
```

### <a name="step-3-create-a-public-key"></a><span data-ttu-id="46f1b-238">Étape 3 : Créer une clé publique</span><span class="sxs-lookup"><span data-stu-id="46f1b-238">Step 3: Create a public key</span></span>

<span data-ttu-id="46f1b-239">Sur hello première SAP HANA sur le serveur de Azure (instances de grande taille) dans chaque région Azure, créez une infrastructure de stockage hello tooaccess toobe de clé publique utilisé afin que vous pouvez créer des instantanés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-239">On hello first SAP HANA on Azure (large instances) server in each Azure region, create a public key toobe used tooaccess hello storage infrastructure so that you can create snapshots.</span></span> <span data-ttu-id="46f1b-240">clé publique de Hello garantit qu’un mot de passe n’est pas toosign requis dans le stockage toohello et que les informations d’identification de mot de passe ne sont pas conservées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-240">hello public key ensures that a password is not required toosign in toohello storage and that password credentials are not maintained.</span></span> <span data-ttu-id="46f1b-241">Dans Linux sur le serveur SAP HANA (instances de grande taille) de hello, exécutez hello commande toogenerate hello publique clé suivante :</span><span class="sxs-lookup"><span data-stu-id="46f1b-241">In Linux on hello SAP HANA (large instances) server, execute hello following command toogenerate hello public key:</span></span>
```
  ssh-keygen –t dsa –b 1024
```
<span data-ttu-id="46f1b-242">nouvel emplacement de Hello est _/root/.ssh/id\_dsa.pub.</span><span class="sxs-lookup"><span data-stu-id="46f1b-242">hello new location is _/root/.ssh/id\_dsa.pub.</span></span> <span data-ttu-id="46f1b-243">N’entrez pas un mot de passe réel, sans quoi vous serez tooenter requis, hello phrase secrète chaque fois que vous vous connectez.</span><span class="sxs-lookup"><span data-stu-id="46f1b-243">Do not enter an actual passphrase, or else you will be required tooenter hello passphrase each time you sign in.</span></span> <span data-ttu-id="46f1b-244">Au lieu de cela, appuyez sur **entrée** deux fois tooremove hello Entrez exigence de mot de passe pour établir la connexion.</span><span class="sxs-lookup"><span data-stu-id="46f1b-244">Instead, press **Enter** twice tooremove hello enter passphrase requirement for signing in.</span></span>

<span data-ttu-id="46f1b-245">Vérifiez toomake que cette clé publique hello a été résolue comme prévu en modifiant les dossiers too/root/.ssh/, puis d’exécuter hello **ls** commande.</span><span class="sxs-lookup"><span data-stu-id="46f1b-245">Check toomake sure that hello public key was corrected as expected by changing folders too/root/.ssh/ and then executing hello **ls** command.</span></span> <span data-ttu-id="46f1b-246">Si la clé de hello est présent, vous pouvez le copier en exécutant hello de commande suivante :</span><span class="sxs-lookup"><span data-stu-id="46f1b-246">If hello key is present, you can copy it by running hello following command:</span></span>

![Clé publique copiée par l’exécution de cette commande](./media/hana-overview-high-availability-disaster-recovery/image2-public-key.png)

<span data-ttu-id="46f1b-248">À ce stade, contactez SAP HANA sur la gestion des services Azure et fournir la clé de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-248">At this point, contact SAP HANA on Azure Service Management and provide hello key.</span></span> <span data-ttu-id="46f1b-249">Hello représentant du service utilise tooregister de clé publique hello dans hello sous-jacent de l’infrastructure de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-249">hello service representative uses hello public key tooregister it in hello underlying storage infrastructure.</span></span>

### <a name="step-4-create-an-sap-hana-user-account"></a><span data-ttu-id="46f1b-250">Étape 4 : Créer un compte d’utilisateur SAP HANA</span><span class="sxs-lookup"><span data-stu-id="46f1b-250">Step 4: Create an SAP HANA user account</span></span>

<span data-ttu-id="46f1b-251">Créez un compte d’utilisateur SAP HANA dans SAP HANA Studio à des fins de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="46f1b-251">Create an SAP HANA user account within SAP HANA Studio for backup purposes.</span></span> <span data-ttu-id="46f1b-252">Ce compte doit disposer de hello suivant des privilèges : _sauvegarde Admin_ et _lecture de catalogue_.</span><span class="sxs-lookup"><span data-stu-id="46f1b-252">This account must have hello following privileges: _Backup Admin_ and _Catalog Read_.</span></span> <span data-ttu-id="46f1b-253">Dans cet exemple, le nom d’utilisateur hello SCADMIN est créé.</span><span class="sxs-lookup"><span data-stu-id="46f1b-253">In this example, hello username SCADMIN is created.</span></span>

![Création d’un utilisateur dans HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image3-creating-user.png)

### <a name="step-5-authorize-hello-sap-hana-user-account"></a><span data-ttu-id="46f1b-255">Étape 5 : Autoriser le compte d’utilisateur SAP HANA hello</span><span class="sxs-lookup"><span data-stu-id="46f1b-255">Step 5: Authorize hello SAP HANA user account</span></span>

<span data-ttu-id="46f1b-256">Autoriser le compte d’utilisateur SAP HANA hello (toobe utilisé par les scripts de hello sans nécessiter une autorisation chaque fois que hello script est exécuté).</span><span class="sxs-lookup"><span data-stu-id="46f1b-256">Authorize hello SAP HANA user account (toobe used by hello scripts without requiring authorization every time hello script is run).</span></span> <span data-ttu-id="46f1b-257">Hello commande de SAP HANA `hdbuserstore` permet la création d’une clé utilisateur SAP HANA, qui est stockée sur un ou plusieurs nœuds de SAP HANA hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-257">hello SAP HANA command `hdbuserstore` allows hello creation of an SAP HANA user key, which is stored on one or more SAP HANA nodes.</span></span> <span data-ttu-id="46f1b-258">clé d’utilisateur Hello permet également hello utilisateur tooaccess SAP HANA sans avoir toomanage les mots de passe à partir de dans hello scripting des processus qui est décrit plus loin.</span><span class="sxs-lookup"><span data-stu-id="46f1b-258">hello user key also allows hello user tooaccess SAP HANA without having toomanage passwords from within hello scripting process that's discussed later.</span></span>

>[!IMPORTANT]
><span data-ttu-id="46f1b-259">Exécution hello après une commande en tant que `_root_`.</span><span class="sxs-lookup"><span data-stu-id="46f1b-259">Run hello following command as `_root_`.</span></span> <span data-ttu-id="46f1b-260">Sinon, le script de hello ne peut pas fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="46f1b-260">Otherwise, hello script cannot work properly.</span></span>

<span data-ttu-id="46f1b-261">Entrez hello `hdbuserstore` commande comme suit :</span><span class="sxs-lookup"><span data-stu-id="46f1b-261">Enter hello `hdbuserstore` command as follows:</span></span>

![Entrez la commande de hdbuserstore hello](./media/hana-overview-high-availability-disaster-recovery/image4-hdbuserstore-command.png)

<span data-ttu-id="46f1b-263">Bonjour exemple, où l’utilisateur hello est SCADMIN01 et nom d’hôte hello est lhanad01, commande hello est :</span><span class="sxs-lookup"><span data-stu-id="46f1b-263">In hello following example, where hello user is SCADMIN01 and hello hostname is lhanad01, hello command is:</span></span>
```
hdbuserstore set SCADMIN01 lhanad01:30115 <backup username> <password>
```
<span data-ttu-id="46f1b-264">Gérez la totalité des scripts à partir d’un seul serveur pour les instances HANA de montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="46f1b-264">Manage all scripting from a single server for scale-out HANA instances.</span></span> <span data-ttu-id="46f1b-265">Dans cet exemple, la clé de SAP HANA hello SCADMIN01 doit être modifié pour chaque hôte d’une manière qui reflète l’hôte hello toohello connexes clé.</span><span class="sxs-lookup"><span data-stu-id="46f1b-265">In this example, hello SAP HANA key SCADMIN01 must be altered for each host in a way that reflects hello host that is related toohello key.</span></span> <span data-ttu-id="46f1b-266">Autrement dit, hello compte de sauvegarde SAP HANA est modifiée avec un numéro d’instance hello Hello HANA DB, **lhanad**.</span><span class="sxs-lookup"><span data-stu-id="46f1b-266">That is, hello SAP HANA backup account is amended with hello instance number of hello HANA DB, **lhanad**.</span></span> <span data-ttu-id="46f1b-267">clé de Hello doit avoir des privilèges d’administrateur sur l’ordinateur hôte de hello qu'auquel elle est assignée, et utilisateur de sauvegarde hello pour la montée en puissance parallèle doit avoir accès aux droits tooall SAP HANA instances.</span><span class="sxs-lookup"><span data-stu-id="46f1b-267">hello key must have administrative privileges on hello host it is assigned to, and hello backup user for scale-out must have access rights tooall SAP HANA instances.</span></span>
```
hdbuserstore set SCADMIN01 lhanad:30015 SCADMIN <password>
hdbuserstore set SCADMIN02 lhanad:30115 SCADMIN <password>
hdbuserstore set SCADMIN03 lhanad:30215 SCADMIN <password>
```

### <a name="step-6-copy-items-from-hello-scripts-folder"></a><span data-ttu-id="46f1b-268">Étape 6 : Copier des éléments à partir du dossier/scripts hello</span><span class="sxs-lookup"><span data-stu-id="46f1b-268">Step 6: Copy items from hello /scripts folder</span></span>

<span data-ttu-id="46f1b-269">Suit hello de copie des éléments de hello/répertoire de travail toohello dossier (inclus sur image hello gold d’installation de hello) pour les scripts **hdbsql**.</span><span class="sxs-lookup"><span data-stu-id="46f1b-269">Copy hello following items from hello /scripts folder (included on hello gold image of hello installation) toohello working directory for **hdbsql**.</span></span> <span data-ttu-id="46f1b-270">Pour les installations HANA actuelles, il s’agit du répertoire /hana/shared/D01/exe/linuxx86\_64/hdb.</span><span class="sxs-lookup"><span data-stu-id="46f1b-270">For current HANA installations, this directory is /hana/shared/D01/exe/linuxx86\_64/hdb.</span></span>
```
azure\_hana\_backup.pl
testHANAConnection.pl
testStorageSnapshotConnection.pl
removeTestStorageSnapshot.pl
HANABackupCustomerDetails.txt
```
<span data-ttu-id="46f1b-271">Copiez hello éléments suivants s’ils exécutent une montée en puissance parallèle ou OLAP :</span><span class="sxs-lookup"><span data-stu-id="46f1b-271">Copy hello following items if they are running scale-out or OLAP:</span></span>
```
azure\_hana\_backup\_bw.pl
testHANAConnectionBW.pl
testStorageSnapshotConnectionBW.pl
removeTestStorageSnapshotBW.pl
HANABackupCustomerDetailsBW.txt
```
<span data-ttu-id="46f1b-272">fichier de HANABackupCustomerDetails.txt Hello est modifiable comme suit pour un déploiement de la montée en puissance parallèle.</span><span class="sxs-lookup"><span data-stu-id="46f1b-272">hello HANABackupCustomerDetails.txt file is modifiable as follows for a scale-up deployment.</span></span> <span data-ttu-id="46f1b-273">Il est hello contrôle et fichier de configuration pour le script hello qui exécute des instantanés de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-273">It is hello control and configuration file for hello script that runs hello storage snapshots.</span></span> <span data-ttu-id="46f1b-274">Vous devez avoir reçu hello _nom du stockage de sauvegarde_ et _adresse IP de stockage_ à partir de SAP HANA sur la gestion des services Azure lors de vos instances ont été déployés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-274">You should have received hello _Storage Backup Name_ and _Storage IP Address_ from SAP HANA on Azure Service Management when your instances were deployed.</span></span> <span data-ttu-id="46f1b-275">Vous ne pouvez pas modifier les séquence hello, classement ou l’espacement de toutes les variables hello ou un script de hello ne fonctionne pas correctement.</span><span class="sxs-lookup"><span data-stu-id="46f1b-275">You cannot modify hello sequence, ordering, or spacing of any of hello variables, or hello script does not run properly.</span></span>

<span data-ttu-id="46f1b-276">Pour un déploiement de la montée en puissance parallèle, le fichier de configuration hello ressemble à :</span><span class="sxs-lookup"><span data-stu-id="46f1b-276">For a scale-up deployment, hello configuration file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Created by customer using hdbuserstore
HANA Backup Name: SCADMIND01
```
<span data-ttu-id="46f1b-277">Pour une configuration de la montée en puissance parallèle, le fichier de HANABackupCustomerDetailsBW.txt hello ressemble à :</span><span class="sxs-lookup"><span data-stu-id="46f1b-277">For a scale-out configuration, hello HANABackupCustomerDetailsBW.txt file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Node IP addresses, instance numbers, and HANA backup name
#provided by customer.  HANA backup name created using
#hdbuserstore utility.
Node 1 IP Address: 10.254.15.21
Node 1 HANA instance number: 01
Node 1 HANA Backup Name: SCADMIN01
Node 2 IP Address: 10.254.15.22
Node 2 HANA instance number: 02
Node 2 HANA Backup Name: SCADMIN02
Node 3 IP Address: 10.254.15.23
Node 3 HANA instance number: 03
Node 3 HANA Backup Name: SCADMIN03
Node 4 IP Address: 10.254.15.24
Node 4 HANA instance number: 04
Node 4 HANA Backup Name: SCADMIN04
Node 5 IP Address: 10.254.15.25
Node 5 HANA instance number: 05
Node 5 HANA Backup Name: SCADMIN05
Node 6 IP Address: 10.254.15.26
Node 6 HANA instance number: 06
Node 6 HANA Backup Name: SCADMIN06
Node 7 IP Address: 10.254.15.27
Node 7 HANA instance number: 07
Node 7 HANA Backup Name: SCADMIN07
Node 8 IP Address: 10.254.15.28
Node 8 HANA instance number: 08
Node 8 HANA Backup Name: SCADMIN08
```
>[!NOTE]
><span data-ttu-id="46f1b-278">Actuellement, uniquement les informations de nœud 1 sont utilisées dans le script de capture instantanée de stockage hello réel HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-278">Currently, only Node 1 details are used in hello actual HANA storage snapshot script.</span></span> <span data-ttu-id="46f1b-279">Nous vous recommandons de tester tooor d’accès de tous les nœuds HANA, afin que, si le nœud de sauvegarde maître hello change, vous avez déjà vérifié que tout autre nœud peut prendre sa place en modifiant les détails hello dans le nœud 1.</span><span class="sxs-lookup"><span data-stu-id="46f1b-279">We recommend that you test access tooor from all HANA nodes so that, if hello master backup node ever changes, you have already ensured that any other node can take its place by modifying hello details in Node 1.</span></span>

<span data-ttu-id="46f1b-280">toocheck pour les configurations de hello correct dans le fichier de configuration hello ou instances HANA toohello une connectivité, exécutez une des hello scripts suivants :</span><span class="sxs-lookup"><span data-stu-id="46f1b-280">toocheck for hello correct configurations in hello configuration file or proper connectivity toohello HANA instances, run either of hello following scripts:</span></span>
- <span data-ttu-id="46f1b-281">Pour une configuration de montée en puissance (indépendamment de la charge de travail SAP) :</span><span class="sxs-lookup"><span data-stu-id="46f1b-281">For a scale-up configuration (independent on SAP workload):</span></span>

 ```
testHANAConnection.pl
```
- <span data-ttu-id="46f1b-282">Pour une configuration de montée en puissance parallèle :</span><span class="sxs-lookup"><span data-stu-id="46f1b-282">For a scale-out configuration:</span></span>

 ```
testHANAConnectionBW.pl
```

<span data-ttu-id="46f1b-283">Vous assurer que hello master HANA instance HANA des serveurs d’accès tooall requis.</span><span class="sxs-lookup"><span data-stu-id="46f1b-283">Ensure that hello master HANA instance has access tooall required HANA servers.</span></span> <span data-ttu-id="46f1b-284">Il n’y aucun script toohello de paramètres, mais vous devez effectuer hello approprié HANABackupCustomerDetails /file HANABackupCustomerDetailsBW pour hello script toorun correctement.</span><span class="sxs-lookup"><span data-stu-id="46f1b-284">There are no parameters toohello script, but you must complete hello appropriate HANABackupCustomerDetails/ HANABackupCustomerDetailsBW file for hello script toorun properly.</span></span> <span data-ttu-id="46f1b-285">Étant donné que seuls hello shell commande codes d’erreur sont renvoyés, il n’est pas possible pour hello script tooerror-Vérifiez chaque instance de.</span><span class="sxs-lookup"><span data-stu-id="46f1b-285">Because only hello shell command error codes are returned, it is not possible for hello script tooerror-check every instance.</span></span> <span data-ttu-id="46f1b-286">Même dans ce cas, le script de hello fournit des commentaires utiles pour toodouble vérification.</span><span class="sxs-lookup"><span data-stu-id="46f1b-286">Even so, hello script does provide some helpful comments for you toodouble-check.</span></span>

<span data-ttu-id="46f1b-287">script de hello toorun :</span><span class="sxs-lookup"><span data-stu-id="46f1b-287">toorun hello script:</span></span>
```
 ./testHANAConnection.pl
```
 <span data-ttu-id="46f1b-288">Si le script de hello obtient correctement état hello d’instance HANA hello, il affiche un message de réussite de connexion de HANA hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-288">If hello script successfully obtains hello status of hello HANA instance, it displays a message that hello HANA connection was successful.</span></span>

<span data-ttu-id="46f1b-289">En outre, un deuxième type est de script, vous pouvez utiliser toosign de capacité toocheck hello master HANA instance serveur dans le stockage toohello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-289">Additionally, there is a second type of script you can use toocheck hello master HANA instance server's ability toosign in toohello storage.</span></span> <span data-ttu-id="46f1b-290">Avant d’exécuter Bonjour azure\_hana\_sauvegarde (\_bw) .pl script, vous devez exécuter le script suivant de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-290">Before you execute hello azure\_hana\_backup(\_bw).pl script, you must execute hello next script.</span></span> <span data-ttu-id="46f1b-291">Si un volume ne contient aucun instantané, il est impossible toodetermine si le volume de hello est simplement vide ou il est un ssh hello tooobtain de défaillance détails de l’instantané.</span><span class="sxs-lookup"><span data-stu-id="46f1b-291">If a volume contains no snapshots, it is impossible toodetermine whether hello volume is simply empty or there is an ssh failure tooobtain hello snapshot details.</span></span> <span data-ttu-id="46f1b-292">Pour cette raison, le script de hello exécute deux étapes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-292">For this reason, hello script executes two steps:</span></span>

- <span data-ttu-id="46f1b-293">Il vérifie que cette console de stockage hello est accessible.</span><span class="sxs-lookup"><span data-stu-id="46f1b-293">It verifies that hello storage console is accessible.</span></span>
- <span data-ttu-id="46f1b-294">Il crée une capture instantanée de test, ou fictive, pour chaque volume par instance HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-294">It creates a test, or dummy, snapshot for each volume by HANA instance.</span></span>

<span data-ttu-id="46f1b-295">Pour cette raison, instance HANA hello est inclus en tant qu’argument.</span><span class="sxs-lookup"><span data-stu-id="46f1b-295">For this reason, hello HANA instance is included as an argument.</span></span> <span data-ttu-id="46f1b-296">Là encore, il n’est pas possible de tooprovide vérification des erreurs de connexion de stockage hello, mais le script de hello fournit des conseils utiles en cas de l’exécution de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-296">Again, it is not possible tooprovide error checking for hello storage connection, but hello script provides helpful hints if hello execution fails.</span></span>

<span data-ttu-id="46f1b-297">script de Hello est exécuté en tant que :</span><span class="sxs-lookup"><span data-stu-id="46f1b-297">hello script is run as:</span></span>
```
 ./testStorageSnapshotConnection.pl <hana instance>
```
<span data-ttu-id="46f1b-298">Ou sous la forme :</span><span class="sxs-lookup"><span data-stu-id="46f1b-298">Or it is run as:</span></span>
```
./testStorageSnapshotConnectionBW.pl <hana instance>
```
<span data-ttu-id="46f1b-299">script de Hello affiche également un message que vous êtes en mesure de toosign dans correctement tooyour déployé stockage locataire, qui est axé sur hello unité logique (LUN) qui est utilisés par les instances de serveur hello que vous êtes propriétaire.</span><span class="sxs-lookup"><span data-stu-id="46f1b-299">hello script also displays a message that you are able toosign in appropriately tooyour deployed storage tenant, which is organized around hello logical unit numbers (LUNs) that are used by hello server instances you own.</span></span>

<span data-ttu-id="46f1b-300">Avant d’exécuter des sauvegardes hello premier stockage basé sur un instantané, exécutez toomake scripts hello suivant que cette configuration hello est correcte.</span><span class="sxs-lookup"><span data-stu-id="46f1b-300">Before you execute hello first storage snapshot-based backups, run hello next scripts toomake sure that hello configuration is correct.</span></span>

<span data-ttu-id="46f1b-301">Après avoir exécuté ces scripts, vous pouvez supprimer les instantanés hello en exécutant :</span><span class="sxs-lookup"><span data-stu-id="46f1b-301">After running these scripts, you can delete hello snapshots by executing:</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```
<span data-ttu-id="46f1b-302">Ou</span><span class="sxs-lookup"><span data-stu-id="46f1b-302">Or</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```

### <a name="step-7-perform-on-demand-snapshots"></a><span data-ttu-id="46f1b-303">Étape 7 : Effectuer des captures instantanées à la demande</span><span class="sxs-lookup"><span data-stu-id="46f1b-303">Step 7: Perform on-demand snapshots</span></span>

<span data-ttu-id="46f1b-304">Effectuez des captures instantanées à la demande (et planifiez des captures instantanées régulières à l’aide de cron) comme décrit ici.</span><span class="sxs-lookup"><span data-stu-id="46f1b-304">Perform on-demand snapshots (as well as schedule regular snapshots by using cron) as described here.</span></span>

<span data-ttu-id="46f1b-305">Pour les configurations de montée en puissance parallèle, exécutez hello script suivant :</span><span class="sxs-lookup"><span data-stu-id="46f1b-305">For scale-up configurations, execute hello following script:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="46f1b-306">Pour les configurations de montée en puissance parallèle, exécutez hello script suivant :</span><span class="sxs-lookup"><span data-stu-id="46f1b-306">For scale-out configurations, execute hello following script:</span></span>
```
./azure_hana_backup_bw.pl lhanad01 customer 20
```
<span data-ttu-id="46f1b-307">script de montée en puissance parallèle de Hello effectue certaines toomake de vérification supplémentaire tous les serveurs HANA est accessible, et toutes les instances HANA retournent statut approprié de l’instance hello avant de procéder à la création d’instantanés de stockage ou de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-307">hello scale-out script does some additional checking toomake sure that all HANA servers can be accessed, and all HANA instances return appropriate status of hello instance before proceeding with creating SAP HANA or storage snapshots.</span></span>

<span data-ttu-id="46f1b-308">Hello arguments suivants est requis :</span><span class="sxs-lookup"><span data-stu-id="46f1b-308">hello following arguments are required:</span></span>

- <span data-ttu-id="46f1b-309">Hello HANA nécessitant une sauvegarde d’une instance.</span><span class="sxs-lookup"><span data-stu-id="46f1b-309">hello HANA instance requiring backup.</span></span>
- <span data-ttu-id="46f1b-310">préfixe d’instantané Hello pour la capture instantanée de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-310">hello snapshot prefix for hello storage snapshot.</span></span>
- <span data-ttu-id="46f1b-311">nombre de Hello de toobe instantanés conservé pour un préfixe spécifique de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-311">hello number of snapshots toobe kept for hello specific prefix.</span></span>

```
./azure_hana_backup.pl lhanad01 customer 20
```

<span data-ttu-id="46f1b-312">l’exécution de Hello du script de hello crée un instantané du stockage hello dans ces trois phases distinctes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-312">hello execution of hello script creates hello storage snapshot in these three distinct phases:</span></span>

- <span data-ttu-id="46f1b-313">Exécution d’une capture instantanée HANA</span><span class="sxs-lookup"><span data-stu-id="46f1b-313">Execute a HANA snapshot.</span></span>
- <span data-ttu-id="46f1b-314">Exécution d’une capture instantanée de stockage</span><span class="sxs-lookup"><span data-stu-id="46f1b-314">Execute a storage snapshot.</span></span>
- <span data-ttu-id="46f1b-315">Supprimer un instantané HANA hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-315">Remove hello HANA snapshot.</span></span>

<span data-ttu-id="46f1b-316">Exécutez le script de hello en l’appelant à partir du dossier exécutable hello HDB a été copié à.</span><span class="sxs-lookup"><span data-stu-id="46f1b-316">Execute hello script by calling it from hello HDB executable folder that it was copied to.</span></span> <span data-ttu-id="46f1b-317">Il sauvegarde hello au moins la suite des volumes, mais il sauvegarde un volume qui a le nom d’instance SAP HANA hello explicite dans le nom de volume hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-317">It backs up at least hello following volumes, but it also backs up any volume that has hello explicit SAP HANA instance name in hello volume name.</span></span>
```
hana_data_<hana instance>_prod_t020_vol
hana_log_<hana instance>_prod_t020_vol
hana_log_backup_<hana instance>_prod_t020_vol
hana_shared_<hana instance>_prod_t020_vol
```
<span data-ttu-id="46f1b-318">période de rétention Hello est strictement administrée, nombre de hello d’instantanés soumis en tant que paramètre lorsque vous exécutez le script hello (par exemple, 20, tel que décrit précédemment).</span><span class="sxs-lookup"><span data-stu-id="46f1b-318">hello retention period is strictly administered, with hello number of snapshots submitted as a parameter when you execute hello script (such as 20, shown previously).</span></span> <span data-ttu-id="46f1b-319">Par conséquent, hello temps est une fonction de la période d’exécution et hello nombre d’instantanés dans l’appel de hello du script de hello hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-319">So hello amount of time is a function of hello period of execution and hello number of snapshots in hello call of hello script.</span></span> <span data-ttu-id="46f1b-320">Si hello nombre d’instantanés sont conservés excède hello sont nommés en tant que paramètre dans l’appel de hello du script de hello, hello instantané le plus ancien stockage de cette étiquette (dans notre cas précédent, _personnalisé_) est supprimé avant un nouvel instantané est exécutée.</span><span class="sxs-lookup"><span data-stu-id="46f1b-320">If hello number of snapshots that are kept exceeds hello number that are named as a parameter in hello call of hello script, hello oldest storage snapshot of this label (in our previous case, _custom_) is deleted before a new snapshot is executed.</span></span> <span data-ttu-id="46f1b-321">Cela signifie que le nombre de hello que vous donnez comme dernier paramètre d’appel de hello hello est nombre hello vous pouvez utiliser le nombre de hello toocontrol d’instantanés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-321">This means hello number you give as hello last parameter of hello call is hello number you can use toocontrol hello number of snapshots.</span></span>

>[!NOTE]
><span data-ttu-id="46f1b-322">Dès que vous modifiez les étiquette hello, hello commence le comptage à nouveau.</span><span class="sxs-lookup"><span data-stu-id="46f1b-322">As soon as you change hello label, hello counting starts again.</span></span>

<span data-ttu-id="46f1b-323">Vous devez tooinclude hello HANA nom de l’instance qui est fournie par SAP HANA sur la gestion des services Azure en tant qu’argument, si elles sont également créer des instantanés dans des environnements à plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="46f1b-323">You need tooinclude hello HANA instance name that's provided by SAP HANA on Azure Service Management as an argument if they are creating snapshots in multi-node environments.</span></span> <span data-ttu-id="46f1b-324">Dans les environnements à nœud unique, nom hello Hello SAP HANA sur l’unité de Azure (instances de grande taille) est suffisante, mais nom de l’instance HANA hello est toujours recommandé.</span><span class="sxs-lookup"><span data-stu-id="46f1b-324">In single-node environments, hello name of hello SAP HANA on Azure (large instances) unit is sufficient, but hello HANA instance name is still recommended.</span></span>

<span data-ttu-id="46f1b-325">En outre, vous pouvez sauvegarder volumes\LUNs de démarrage à l’aide de hello même script.</span><span class="sxs-lookup"><span data-stu-id="46f1b-325">Additionally, you can back up boot volumes\LUNs by using hello same script.</span></span> <span data-ttu-id="46f1b-326">Vous devez sauvegarder votre volume de démarrage au moins une fois lorsque vous exécutez HANA pour la première fois, bien que nous recommandions une planification de sauvegarde hebdomadaire ou nocturne pour le démarrage dans cron.</span><span class="sxs-lookup"><span data-stu-id="46f1b-326">You must back up your boot volume at least once when you first run HANA, although we recommend a weekly or nightly backup schedule for booting in cron.</span></span> <span data-ttu-id="46f1b-327">Plutôt que d’ajouter un nom d’instance SAP HANA, insérer _démarrage_ comme hello argument dans le script de hello comme suit :</span><span class="sxs-lookup"><span data-stu-id="46f1b-327">Rather than add an SAP HANA instance name, insert _boot_ as hello argument into hello script as follows:</span></span>
```
./azure_hana_backup boot customer 20
```
<span data-ttu-id="46f1b-328">Hello même stratégie de rétention est accordée volume de démarrage toohello également.</span><span class="sxs-lookup"><span data-stu-id="46f1b-328">hello same retention policy is afforded toohello boot volume as well.</span></span> <span data-ttu-id="46f1b-329">Utiliser des instantanés à la demande, comme décrit précédemment, pour les cas spéciaux, tels que pendant une mise à niveau SAP Amélioration package (EHP), ou lorsque vous avez besoin de toocreate un instantané de stockage distinct.</span><span class="sxs-lookup"><span data-stu-id="46f1b-329">Use on-demand snapshots, as described previously, for special cases only, such as during an SAP enhancement package (EHP) upgrade, or when you need toocreate a distinct storage snapshot.</span></span>

<span data-ttu-id="46f1b-330">Nous vous conseillons d’instantanés de stockage tooperform planifiée à l’aide de cron, et nous vous recommandons d’utiliser hello même générer un script pour toutes les sauvegardes et les besoins de récupération d’urgence (modification hello script entrées toomatch hello différents demandé des temps de sauvegarde).</span><span class="sxs-lookup"><span data-stu-id="46f1b-330">We encourage you tooperform scheduled storage snapshots using cron, and we recommend that you use hello same script for all backups and disaster-recovery needs (modifying hello script inputs toomatch hello various requested backup times).</span></span> <span data-ttu-id="46f1b-331">Ces captures sont toutes planifiées différemment dans cron selon leur durée d’exécution : toutes les heures, toutes les 12 heures, une fois par jour ou une fois par semaine.</span><span class="sxs-lookup"><span data-stu-id="46f1b-331">These are all scheduled differently in cron depending on their execution time: hourly, 12-hour, daily, or weekly.</span></span> <span data-ttu-id="46f1b-332">Cette planification cron Hello est conçue toocreate des instantanés de stockage qui correspondent à étiquetage de rétention hello décrit précédemment pour la sauvegarde hors site à long terme.</span><span class="sxs-lookup"><span data-stu-id="46f1b-332">hello cron schedule is designed toocreate storage snapshots that match hello previously discussed retention labeling for long-term off-site backup.</span></span> <span data-ttu-id="46f1b-333">script de Hello inclut tooback de commandes de tous les volumes de production, en fonction de leur fréquence demandée (données et fichiers journaux sont sauvegardés toutes les heures, tandis que le volume de démarrage hello est sauvegardé quotidiennement).</span><span class="sxs-lookup"><span data-stu-id="46f1b-333">hello script includes commands tooback up all production volumes, depending on their requested frequency (data and log files are backed up hourly, whereas hello boot volume is backed up daily).</span></span>

<span data-ttu-id="46f1b-334">entrées Hello Bonjour cron script suivant exécute chaque heure dix minutes, toutes les 12 heures à hello les dix minutes et tous les jours à hello dix minutes hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-334">hello entries in hello following cron script run every hour at hello tenth minute, every 12 hours at hello tenth minute, and daily at hello tenth minute.</span></span> <span data-ttu-id="46f1b-335">cron Hello travaux sont créés de manière à ce qu’un seul instantané de stockage SAP HANA a lieu pendant toute heure particulière, afin que hello horaires et quotidiennes des sauvegardes ne se produisent pas au hello que même moment (12:10:00).</span><span class="sxs-lookup"><span data-stu-id="46f1b-335">hello cron jobs are created in such a way that only one SAP HANA storage snapshot takes place during any particular hour, so that hello hourly and daily backups do not occur at hello same time (12:10 AM).</span></span> <span data-ttu-id="46f1b-336">toohelp optimiser votre création de capture instantanée et la réplication, SAP HANA sur la gestion des services Azure fournit hello durée recommandée pour vous toorun vos sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-336">toohelp optimize your snapshot creation and replication, SAP HANA on Azure Service Management provides hello recommended time for you toorun your backups.</span></span>

<span data-ttu-id="46f1b-337">Hello cron de valeur par défaut dans /etc/crontab de planification est la suivante :</span><span class="sxs-lookup"><span data-stu-id="46f1b-337">hello default cron scheduling in /etc/crontab is as follows:</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 14
```
<span data-ttu-id="46f1b-338">Volumes HANA hello (sans le volume de démarrage) hello précédente cron pour obtenir des instructions, obtiennent un horaire instantané avec l’étiquette de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-338">In hello previous cron instructions, hello HANA volumes (without boot volume) get an hourly snapshot with hello label.</span></span> <span data-ttu-id="46f1b-339">66 de ces captures instantanées sont conservées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-339">Of these snapshots, 66 are retained.</span></span> <span data-ttu-id="46f1b-340">En outre, les 14 instantanés avec étiquette de 12 heures hello sont conservés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-340">Additionally, 14 snapshots with hello 12-hour label are retained.</span></span> <span data-ttu-id="46f1b-341">Vous obtenez potentiellement des captures instantanées toutes les heures pendant trois jours, plus des captures instantanées toutes les 12 heures pendant quatre autres jours, soit une semaine complète de captures instantanées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-341">You potentially get hourly snapshots for three days, plus 12-hour snapshots for another four days, which gives you an entire week of snapshots.</span></span>

<span data-ttu-id="46f1b-342">Planification de cron peut être difficile, car un seul script doit être exécuté à un moment donné, à moins que les scripts de hello sont répartis en plusieurs minutes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-342">Scheduling within cron can be tricky, because only one script should be executed at any particular time, unless hello scripts are staggered by several minutes.</span></span> <span data-ttu-id="46f1b-343">Si vous souhaitez que les sauvegardes quotidiennes pour une rétention à long terme, un instantané quotidien est conservé avec un instantané de 12 heures (avec un nombre de rétention de sept chaque) ou instantané de toutes les heures hello est décalé tootake place 10 minutes plus tard.</span><span class="sxs-lookup"><span data-stu-id="46f1b-343">If you want daily backups for long-term retention, either a daily snapshot is kept along with a 12-hour snapshot (with a retention count of seven each), or hello hourly snapshot is staggered tootake place 10 minutes later.</span></span> <span data-ttu-id="46f1b-344">Un seul instantané quotidien est conservé dans le volume de production hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-344">Only one daily snapshot is kept in hello production volume.</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 7
10 0 * * * ./azure_hana_backup.pl lhanad01 daily 7
```
<span data-ttu-id="46f1b-345">les fréquences Hello répertoriés ici sont des exemples uniquement.</span><span class="sxs-lookup"><span data-stu-id="46f1b-345">hello frequencies listed here are only examples.</span></span> <span data-ttu-id="46f1b-346">tooderive votre nombre optimal d’instantanés, hello utilisation suivant des critères :</span><span class="sxs-lookup"><span data-stu-id="46f1b-346">tooderive your optimum number of snapshots, use hello following criteria:</span></span>

- <span data-ttu-id="46f1b-347">Exigences en matière d’objectif de délai de récupération pour une récupération dans le temps.</span><span class="sxs-lookup"><span data-stu-id="46f1b-347">Requirements in recovery time objective for point-in-time recovery.</span></span>
- <span data-ttu-id="46f1b-348">Utilisation de l’espace</span><span class="sxs-lookup"><span data-stu-id="46f1b-348">Space usage.</span></span>
- <span data-ttu-id="46f1b-349">Exigences en matière d’objectif de point de récupération et d’objectif de délai de récupération pour une récupération d’urgence potentielle.</span><span class="sxs-lookup"><span data-stu-id="46f1b-349">Requirements in recovery point objective and recovery time objective for potential disaster recovery.</span></span>
- <span data-ttu-id="46f1b-350">Exécution de sauvegardes de base de données complètes HANA pour les disques.</span><span class="sxs-lookup"><span data-stu-id="46f1b-350">Eventual execution of HANA full database backups against disks.</span></span> <span data-ttu-id="46f1b-351">Chaque fois qu’une sauvegarde complète de base de données sur des disques, ou _backint_ interface, est effectuée, l’exécution de hello d’instantanés de stockage échoue.</span><span class="sxs-lookup"><span data-stu-id="46f1b-351">Whenever a full database backup against disks, or _backint_ interface, is performed, hello execution of storage snapshots fails.</span></span> <span data-ttu-id="46f1b-352">Si vous prévoyez des sauvegardes de base de données complète tooexecute au-dessus des instantanés de stockage, assurez-vous que l’exécution de hello d’instantanés de stockage est désactivée pendant ce temps.</span><span class="sxs-lookup"><span data-stu-id="46f1b-352">If you plan tooexecute full database backups on top of storage snapshots, make sure that hello execution of storage snapshots is disabled during this time.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="46f1b-353">utilisation de Hello d’instantanés de stockage pour les sauvegardes de SAP HANA n’est valide que lorsque les instantanés hello sont exécutées conjointement avec les sauvegardes de journaux de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-353">hello use of storage snapshots for SAP HANA backups is valid only when hello snapshots are performed in conjunction with SAP HANA log backups.</span></span> <span data-ttu-id="46f1b-354">Ces journaux hello toocover en mesure de sauvegardes besoin toobe des périodes de temps entre les instantanés de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-354">These log backups need toobe able toocover hello time periods between hello storage snapshots.</span></span> <span data-ttu-id="46f1b-355">Si vous avez défini un toousers engagement d’une récupération limitée dans le temps de 30 jours, vous devez suivant de hello :</span><span class="sxs-lookup"><span data-stu-id="46f1b-355">If you've set a commitment toousers of a point-in-time recovery of 30 days, you need hello following:</span></span>

- <span data-ttu-id="46f1b-356">Capacité tooaccess un instantané de stockage est de 30 jours.</span><span class="sxs-lookup"><span data-stu-id="46f1b-356">Ability tooaccess a storage snapshot that is 30 days old.</span></span>
- <span data-ttu-id="46f1b-357">Sauvegardes de journaux contigus sur hello 30 derniers jours.</span><span class="sxs-lookup"><span data-stu-id="46f1b-357">Contiguous log backups over hello last 30 days.</span></span>

<span data-ttu-id="46f1b-358">Dans la plage hello de sauvegardes de journaux, créer un instantané du volume de sauvegarde de journal hello également.</span><span class="sxs-lookup"><span data-stu-id="46f1b-358">In hello range of log backups, create a snapshot of hello backup log volume as well.</span></span> <span data-ttu-id="46f1b-359">Toutefois, être a tooperform que les sauvegardes de journaux régulières afin que vous puissiez :</span><span class="sxs-lookup"><span data-stu-id="46f1b-359">However, be sure tooperform regular log backups so that you can:</span></span>

- <span data-ttu-id="46f1b-360">Sauvegardes de journaux contigus hello nécessité tooperform les restaurations de point-à-temps.</span><span class="sxs-lookup"><span data-stu-id="46f1b-360">Have hello contiguous log backups needed tooperform point-in-time recoveries.</span></span>
- <span data-ttu-id="46f1b-361">Volume de journal hello SAP HANA empêche de manquer d’espace.</span><span class="sxs-lookup"><span data-stu-id="46f1b-361">Prevent hello SAP HANA log volume from running out of space.</span></span>

<span data-ttu-id="46f1b-362">Une des étapes de dernière hello est tooschedule journaux de sauvegarde SAP HANA dans SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="46f1b-362">One of hello last steps is tooschedule SAP HANA backup logs in SAP HANA Studio.</span></span> <span data-ttu-id="46f1b-363">destination de cible de sauvegarde de journal de SAP HANA Hello est hello créée spécialement hana/journal\_volume de sauvegardes avec le point de montage hello de /hana/log/backups.</span><span class="sxs-lookup"><span data-stu-id="46f1b-363">hello SAP HANA backup log target destination is hello specially created hana/log\_backups volume with hello mount point of /hana/log/backups.</span></span>

![Planifier les sauvegardes de journaux SAP HANA dans SAP HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image5-schedule-backup.png)

<span data-ttu-id="46f1b-365">Vous pouvez choisir d’effectuer des sauvegardes plus fréquemment que toutes les 15 minutes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-365">You can choose backups that are more frequent than every 15 minutes.</span></span> <span data-ttu-id="46f1b-366">Certains utilisateurs effectuent même des sauvegardes de journaux toutes les minutes, mais un intervalle _supérieur_ à 15 minutes est déconseillé.</span><span class="sxs-lookup"><span data-stu-id="46f1b-366">Some users even perform log backups every minute, although we do not recommend going _over_ 15 minutes.</span></span>

<span data-ttu-id="46f1b-367">étape finale de Hello est tooperform basée sur un fichier de sauvegarde (après l’installation initiale de hello de SAP HANA) toocreate une entrée de sauvegarde unique qui doit exister dans le catalogue de sauvegarde hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-367">hello final step is tooperform a file-based backup (after hello initial installation of SAP HANA) toocreate a single backup entry that must exist within hello backup catalog.</span></span> <span data-ttu-id="46f1b-368">Dans le cas contraire, SAP HANA ne peut pas lancer vos sauvegardes de journaux spécifiées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-368">Otherwise SAP HANA cannot initiate your specified log backups.</span></span>

![Créer une basée sur le fichier de sauvegarde toocreate une entrée de sauvegarde unique](./media/hana-overview-high-availability-disaster-recovery/image6-make-backup.png)

### <a name="monitoring-hello-number-and-size-of-snapshots-on-hello-disk-volume"></a><span data-ttu-id="46f1b-370">Analyse le nombre de hello et la taille des instantanés sur le volume de disque hello</span><span class="sxs-lookup"><span data-stu-id="46f1b-370">Monitoring hello number and size of snapshots on hello disk volume</span></span>

<span data-ttu-id="46f1b-371">Sur un volume de stockage particulier, vous pouvez surveiller le nombre hello d’instantanés et la consommation du stockage hello d’instantanés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-371">On a particular storage volume, you can monitor hello number of snapshots and hello storage consumption of snapshots.</span></span> <span data-ttu-id="46f1b-372">Hello `ls` commande n’affiche pas hello instantané répertoire ou les fichiers.</span><span class="sxs-lookup"><span data-stu-id="46f1b-372">hello `ls` command doesn't show hello snapshot directory or files.</span></span> <span data-ttu-id="46f1b-373">Toutefois, hello commande du système d’exploitation Linux `du` fait, avec hello suivant de commandes :</span><span class="sxs-lookup"><span data-stu-id="46f1b-373">However, hello Linux OS command `du` does, with hello following commands:</span></span>

- <span data-ttu-id="46f1b-374">`du –sh .snapshot`fournit un total de toutes les captures instantanées dans le répertoire de capture instantanée hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-374">`du –sh .snapshot` provides a total of all snapshots within hello snapshot directory.</span></span>
- <span data-ttu-id="46f1b-375">`du –sh --max-depth=1`Répertorie tous les instantanés sont enregistrés dans le dossier de .snapshot hello et hello de chaque instantané.</span><span class="sxs-lookup"><span data-stu-id="46f1b-375">`du –sh --max-depth=1` lists all snapshots that are saved in hello .snapshot folder and hello size of each snapshot.</span></span>
- <span data-ttu-id="46f1b-376">`du –hc`Fournit la taille totale de hello utilisé par toutes les captures instantanées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-376">`du –hc` provides hello total size used by all snapshots.</span></span>

<span data-ttu-id="46f1b-377">Utilisez ces toomake commandes assurer que les instantanés hello et sont stockées ne consomment pas tout le stockage sur des volumes hello hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-377">Use these commands toomake sure that hello snapshots that are taken and stored are not consuming all hello storage on hello volumes.</span></span>

### <a name="reducing-hello-number-of-snapshots-on-a-server"></a><span data-ttu-id="46f1b-378">Ce qui réduit le nombre hello des captures instantanées sur un serveur</span><span class="sxs-lookup"><span data-stu-id="46f1b-378">Reducing hello number of snapshots on a server</span></span>

<span data-ttu-id="46f1b-379">Comme expliqué précédemment, vous pouvez réduire le nombre de hello de certaines étiquettes d’instantanés que vous stockez.</span><span class="sxs-lookup"><span data-stu-id="46f1b-379">As explained earlier, you can reduce hello number of certain labels of snapshots that you store.</span></span> <span data-ttu-id="46f1b-380">deux paramètres de tooinitiate de commande hello une capture instantanée sont un nombre d’étiquette et hello d’instantanés que vous souhaitez que la dernière Hello tooretain.</span><span class="sxs-lookup"><span data-stu-id="46f1b-380">hello last two parameters of hello command tooinitiate a snapshot are a label and hello number of snapshots you want tooretain.</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="46f1b-381">Dans l’exemple précédent de hello, étiquette de capture instantanée hello est _client_ et le numéro de hello d’instantanés avec cette toobe étiquette conservées _20_.</span><span class="sxs-lookup"><span data-stu-id="46f1b-381">In hello previous example, hello snapshot label is _customer_ and hello number of snapshots with this label toobe retained is _20_.</span></span> <span data-ttu-id="46f1b-382">Comme vous avez répondu toodisk la consommation d’espace, vous pourriez nombre de hello tooreduce de captures instantanées stockées.</span><span class="sxs-lookup"><span data-stu-id="46f1b-382">As you respond toodisk space consumption, you might want tooreduce hello number of stored snapshots.</span></span> <span data-ttu-id="46f1b-383">nombre de hello tooreduce d’instantanés est script de hello toorun avec hello dernier paramètre ensemble too5 facilement Hello :</span><span class="sxs-lookup"><span data-stu-id="46f1b-383">hello easy way tooreduce hello number of snapshots is toorun hello script with hello last parameter set too5:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 5
```
<span data-ttu-id="46f1b-384">En raison de l’exécution du script hello avec ce paramètre, nombre de hello d’instantanés, y compris hello nouveau stockage, d’instantané est _5_.</span><span class="sxs-lookup"><span data-stu-id="46f1b-384">As a result of running hello script with this setting, hello number of snapshots, including hello new storage snapshot, is _5_.</span></span>

 >[!NOTE]
 > <span data-ttu-id="46f1b-385">Ce script réduit le nombre de hello d’instantanés uniquement si l’instantané précédent le plus récent hello est datant de plus d’une heure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-385">This script reduces hello number of snapshots only if hello most recent previous snapshot is more than one hour old.</span></span> <span data-ttu-id="46f1b-386">script de Hello ne supprime pas les instantanés datant de moins d’une heure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-386">hello script does not delete snapshots that are less than one hour old.</span></span>

<span data-ttu-id="46f1b-387">Ces restrictions sont les fonctionnalités de récupération d’urgence facultatif toohello connexes offertes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-387">These restrictions are related toohello optional disaster-recovery functionality offered.</span></span>

<span data-ttu-id="46f1b-388">Si vous ne voulez plus toomaintain un ensemble d’instantanés par ce préfixe, vous pouvez exécuter le script de hello avec _0_ comme hello rétention numéro tooremove tous les instantanés correspondant à ce préfixe.</span><span class="sxs-lookup"><span data-stu-id="46f1b-388">If you no longer want toomaintain a set of snapshots with that prefix, you can execute hello script with _0_ as hello retention number tooremove all snapshots matching that prefix.</span></span> <span data-ttu-id="46f1b-389">Toutefois, la suppression de tous les instantanés peut affecter fonctionnalités hello de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="46f1b-389">However, removing all snapshots can affect hello capabilities of disaster recovery.</span></span>

### <a name="recovering-toohello-most-recent-hana-snapshot"></a><span data-ttu-id="46f1b-390">Récupération toohello instantané le plus récent HANA</span><span class="sxs-lookup"><span data-stu-id="46f1b-390">Recovering toohello most recent HANA snapshot</span></span>

<span data-ttu-id="46f1b-391">En cas de hello que vous rencontrez un scénario de production vers le bas, le processus hello de récupération à partir d’un instantané de stockage peut être lancé comme un incident de client avec SAP HANA sur la gestion des services Azure.</span><span class="sxs-lookup"><span data-stu-id="46f1b-391">In hello event that you experience a production-down scenario, hello process of recovering from a storage snapshot can be initiated as a customer incident with SAP HANA on Azure Service Management.</span></span> <span data-ttu-id="46f1b-392">Un tel scénario d’inattendue peut être une question d’une urgence si les données ont été supprimées de production système hello seule manière et les données de salutation tooretrieve sont la base de données de production toorestore hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-392">Such an unexpected scenario might be a high-urgency matter if data was deleted in a production system and hello only way tooretrieve hello data is toorestore hello production database.</span></span>

<span data-ttu-id="46f1b-393">Sur hello autre part, un point-à-temps de récupération peut être faible urgence et planifié pour les jours à l’avance.</span><span class="sxs-lookup"><span data-stu-id="46f1b-393">On hello other hand, a point-in-time recovery could be low urgency and planned for days in advance.</span></span> <span data-ttu-id="46f1b-394">Vous pouvez planifier cette récupération avec l’équipe de gestion des services SAP HANA sur Azure au lieu de signaler un problème hautement prioritaire.</span><span class="sxs-lookup"><span data-stu-id="46f1b-394">You can plan this recovery with SAP HANA on Azure Service Management instead of raising a high-priority issue.</span></span> <span data-ttu-id="46f1b-395">Par exemple, supposons que vous planifiiez tootry une mise à niveau de hello logiciel SAP en appliquant un nouveau package d’extension et vous puis devez toorevert sauvegarder instantané tooa représentant l’état avant la mise à niveau hello EHP hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-395">For example, you might be planning tootry an upgrade of hello SAP software by applying a new enhancement package, and you then need toorevert back tooa snapshot that represents hello state before hello EHP upgrade.</span></span>

<span data-ttu-id="46f1b-396">Avant d’émettre la demande de hello, vous devez toodo certaines tâches de préparation.</span><span class="sxs-lookup"><span data-stu-id="46f1b-396">Before you issue hello request, you need toodo some preparation.</span></span> <span data-ttu-id="46f1b-397">SAP HANA sur l’équipe de gestion des services Azure, puis gérer les demande de hello et fournir des volumes de hello restaurée.</span><span class="sxs-lookup"><span data-stu-id="46f1b-397">SAP HANA on Azure Service Management team can then handle hello request and provide hello restored volumes.</span></span> <span data-ttu-id="46f1b-398">C’est par la suite, tooyou toorestore hello HANA base de données de captures instantanées de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-398">Afterward, it is up tooyou toorestore hello HANA database based on hello snapshots.</span></span> <span data-ttu-id="46f1b-399">Voici comment tooprepare pourquoi demander :</span><span class="sxs-lookup"><span data-stu-id="46f1b-399">Here is how tooprepare for hello request:</span></span>

>[!NOTE]
><span data-ttu-id="46f1b-400">Votre interface utilisateur peut-être différer des hello suivant des captures d’écran, en fonction de hello version SAP HANA que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="46f1b-400">Your user interface might vary from hello following screenshots, depending on hello SAP HANA release you are using.</span></span>

1. <span data-ttu-id="46f1b-401">Décidez quels toorestore instantané.</span><span class="sxs-lookup"><span data-stu-id="46f1b-401">Decide which snapshot toorestore.</span></span> <span data-ttu-id="46f1b-402">Que le volume de données/hana hello à restaurer, sauf si vous êtes invité dans le cas contraire.</span><span class="sxs-lookup"><span data-stu-id="46f1b-402">Only hello hana/data volume would be restored unless you are instructed otherwise.</span></span>

2. <span data-ttu-id="46f1b-403">Arrêtez l’instance HANA hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-403">Shut down hello HANA instance.</span></span>

 ![Arrêter hello HANA instance](./media/hana-overview-high-availability-disaster-recovery/image7-shutdown-hana.png)

3. <span data-ttu-id="46f1b-405">Démontage des volumes de données hello sur chaque nœud de la base de données HANA.</span><span class="sxs-lookup"><span data-stu-id="46f1b-405">Unmount hello data volumes on each HANA database node.</span></span> <span data-ttu-id="46f1b-406">Hello de restauration de capture instantanée de hello échoue si les volumes de données hello ne sont pas démontés.</span><span class="sxs-lookup"><span data-stu-id="46f1b-406">hello restoration of hello snapshot fails if hello data volumes are not unmounted.</span></span>

 ![Démontage des volumes de données hello sur chaque nœud de la base de données HANA](./media/hana-overview-high-availability-disaster-recovery/image8-unmount-data-volumes.png)

4. <span data-ttu-id="46f1b-408">Ouvrez une restauration hello de prise en charge Azure demande tooinstruct d’un instantané spécifique.</span><span class="sxs-lookup"><span data-stu-id="46f1b-408">Open an Azure support request tooinstruct hello restoration of a specific snapshot.</span></span>

 - <span data-ttu-id="46f1b-409">Pendant la restauration de hello : SAP HANA sur la gestion des services Azure peut vous demander tooattend un tooensure de téléconférence aucune donnée n’est perdue.</span><span class="sxs-lookup"><span data-stu-id="46f1b-409">During hello restoration: SAP HANA on Azure Service Management might ask you tooattend a conference call tooensure that no data is getting lost.</span></span>

 - <span data-ttu-id="46f1b-410">Après la restauration de hello : SAP HANA sur la gestion des services Azure vous avertit de capture instantanée de stockage hello a été restaurée.</span><span class="sxs-lookup"><span data-stu-id="46f1b-410">After hello restoration: SAP HANA on Azure Service Management notifies you when hello storage snapshot has been restored.</span></span>

5. <span data-ttu-id="46f1b-411">Une fois le processus de restauration hello terminée, remontez tous les volumes de données.</span><span class="sxs-lookup"><span data-stu-id="46f1b-411">After hello restoration process is complete, remount all data volumes.</span></span>

 ![Remonter tous les volumes de données](./media/hana-overview-high-availability-disaster-recovery/image9-remount-data-volumes.png)

6. <span data-ttu-id="46f1b-413">Sélectionnez les options de récupération SAP HANA Studio, si elles ne sont pas automatiquement fournies lorsque vous vous reconnectez tooHANA DB via SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="46f1b-413">Select recovery options within SAP HANA Studio, if they do not automatically come up when you reconnect tooHANA DB through SAP HANA Studio.</span></span> <span data-ttu-id="46f1b-414">Hello suivant montre un restauration toohello HANA l’instantané.</span><span class="sxs-lookup"><span data-stu-id="46f1b-414">hello following example shows a restoration toohello last HANA snapshot.</span></span> <span data-ttu-id="46f1b-415">Un instantané du stockage incorpore un seul instantané HANA, et si vous restaurez le dernier instantané de stockage toohello, il doit être instantané HANA hello le plus récent.</span><span class="sxs-lookup"><span data-stu-id="46f1b-415">A storage snapshot embeds one HANA snapshot, and if you are restoring toohello most recent storage snapshot, it should be hello most recent HANA snapshot.</span></span> <span data-ttu-id="46f1b-416">(Si vous restaurez tooolder des instantanés de stockage, vous devez toolocate hello HANA en fonction de l’instantané stockage hello hello instantané.)</span><span class="sxs-lookup"><span data-stu-id="46f1b-416">(If you are restoring tooolder storage snapshots, you need toolocate hello HANA snapshot based on hello time hello storage snapshot was taken.)</span></span>

 ![Sélectionner les options de récupération dans SAP HANA Studio](./media/hana-overview-high-availability-disaster-recovery/image10-recover-options-a.png)

7. <span data-ttu-id="46f1b-418">Sélectionnez **restauration hello tooa spécifique de données sauvegarde ou stockage instantané**.</span><span class="sxs-lookup"><span data-stu-id="46f1b-418">Select **Recover hello database tooa specific data backup or storage snapshot**.</span></span>

 ![fenêtre de « Type de récupération spécifier » Hello](./media/hana-overview-high-availability-disaster-recovery/image11-recover-options-b.png)

8. <span data-ttu-id="46f1b-420">Sélectionnez l’option de **spécification d’une sauvegarde sans catalogue**.</span><span class="sxs-lookup"><span data-stu-id="46f1b-420">Select **Specify backup without catalog**.</span></span>

 ![fenêtre de « Emplacement de sauvegarde spécifier » Hello](./media/hana-overview-high-availability-disaster-recovery/image12-recover-options-c.png)

9. <span data-ttu-id="46f1b-422">Bonjour **le Type de Destination** liste, sélectionnez **instantané**.</span><span class="sxs-lookup"><span data-stu-id="46f1b-422">In hello **Destination Type** list, select **Snapshot**.</span></span>

 ![fenêtre de « Spécifier hello sauvegarde tooRecover » Hello](./media/hana-overview-high-availability-disaster-recovery/image13-recover-options-d.png)

10. <span data-ttu-id="46f1b-424">Cliquez sur **Terminer** processus de récupération toostart hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-424">Click **Finish** toostart hello recovery process.</span></span>

 ![Cliquez sur « Terminer » le processus de récupération de hello toostart](./media/hana-overview-high-availability-disaster-recovery/image14-recover-options-e.png)

11. <span data-ttu-id="46f1b-426">base de données HANA Hello est restaurée et récupérée d’instantané HANA toohello qui est inclus dans l’instantané de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-426">hello HANA database is restored and recovered toohello HANA snapshot that's included in hello storage snapshot.</span></span>

 ![Base de données HANA est instantané HANA toohello restaurée et récupérée](./media/hana-overview-high-availability-disaster-recovery/image15-recover-options-f.png)

### <a name="recovering-toohello-most-recent-state"></a><span data-ttu-id="46f1b-428">Récupérez l’état le plus récent toohello</span><span class="sxs-lookup"><span data-stu-id="46f1b-428">Recovering toohello most recent state</span></span>

<span data-ttu-id="46f1b-429">Hello processus suivant restaure hello HANA snapshot qui est inclus dans l’instantané de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-429">hello following process restores hello HANA snapshot that is included in hello storage snapshot.</span></span> <span data-ttu-id="46f1b-430">Il restaure ensuite hello transaction journal sauvegardes toohello état le plus récent de la base de données hello avant de restaurer l’instantané du stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-430">It then restores hello transaction log backups toohello most recent state of hello database before restoring hello storage snapshot.</span></span>

>[!IMPORTANT]
><span data-ttu-id="46f1b-431">Avant de poursuivre, assurez-vous que vous disposez d’une chaîne complète et contiguë de sauvegardes de journaux des transactions.</span><span class="sxs-lookup"><span data-stu-id="46f1b-431">Before you proceed, make sure that you have a complete and contiguous chain of transaction log backups.</span></span> <span data-ttu-id="46f1b-432">Sans ces sauvegardes, vous ne pouvez pas restaurer l’état actuel de hello de base de données hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-432">Without these backups, you cannot restore hello current state of hello database.</span></span>

1. <span data-ttu-id="46f1b-433">Les étapes 1 à 6 de hello précédant la procédure dans « Recovering toohello HANA instantané le plus récent. »</span><span class="sxs-lookup"><span data-stu-id="46f1b-433">Complete steps 1-6 of hello preceding procedure in "Recovering toohello most recent HANA snapshot."</span></span>

2. <span data-ttu-id="46f1b-434">Sélectionnez **récupérer l’état le plus récent hello de base de données tooits**.</span><span class="sxs-lookup"><span data-stu-id="46f1b-434">Select **Recover hello database tooits most recent state**.</span></span>

 ![Sélectionnez « Restaurer l’état le plus récent hello de base de données tooits »](./media/hana-overview-high-availability-disaster-recovery/image16-recover-database-a.png)

3. <span data-ttu-id="46f1b-436">Spécifier l’emplacement hello hello plus récent HANA de sauvegardes de journaux.</span><span class="sxs-lookup"><span data-stu-id="46f1b-436">Specify hello location of hello most recent HANA log backups.</span></span> <span data-ttu-id="46f1b-437">emplacement de Hello doit toocontain toutes les sauvegardes de journal des transactions HANA à partir de l’état le plus récent hello HANA instantané toohello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-437">hello location needs toocontain all HANA transaction log backups from hello HANA snapshot toohello most recent state.</span></span>

 ![Spécifier l’emplacement de hello hello plus récent HANA de sauvegardes de journaux](./media/hana-overview-high-availability-disaster-recovery/image17-recover-database-b.png)

4. <span data-ttu-id="46f1b-439">Sélectionnez une sauvegarde comme base à partir de la base de données toorecover hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-439">Select a backup as a base from which toorecover hello database.</span></span> <span data-ttu-id="46f1b-440">Dans notre exemple, il s’agit d’instantané HANA hello qui était inclus dans l’instantané de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-440">In our example, this is hello HANA snapshot that was included in hello storage snapshot.</span></span> <span data-ttu-id="46f1b-441">(Un seul instantané est répertorié Bonjour suivant capture d’écran).</span><span class="sxs-lookup"><span data-stu-id="46f1b-441">(Only one snapshot is listed in hello following screenshot.)</span></span>

 ![Sélectionner une sauvegarde comme base à partir de la base de données qui hello toorecover](./media/hana-overview-high-availability-disaster-recovery/image18-recover-database-c.png)

5. <span data-ttu-id="46f1b-443">Désactivez hello **utiliser les sauvegardes Delta** case à cocher si deltas n’existent pas entre hello instantané HANA hello et état le plus récent hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-443">Clear hello **Use Delta Backups** check box if deltas do not exist between hello time of hello HANA snapshot and hello most recent state.</span></span>

 ![Désactivez hello « Utiliser les sauvegardes Delta » case à cocher si aucun deltas n’existe](./media/hana-overview-high-availability-disaster-recovery/image19-recover-database-d.png)

6. <span data-ttu-id="46f1b-445">Dans l’écran de résumé hello, cliquez sur **Terminer** procédure de restauration toostart hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-445">On hello summary screen, click **Finish** toostart hello restoration procedure.</span></span>

 ![Cliquez sur « Terminer » sur l’écran de résumé hello](./media/hana-overview-high-availability-disaster-recovery/image20-recover-database-e.png)

### <a name="recovering-tooanother-point-in-time"></a><span data-ttu-id="46f1b-447">Récupération point tooanother dans le temps</span><span class="sxs-lookup"><span data-stu-id="46f1b-447">Recovering tooanother point in time</span></span>
<span data-ttu-id="46f1b-448">point de tooa toorecover dans le temps entre l’instantané HANA hello (inclus dans l’instantané de stockage hello) et l’autre est postérieure à la récupération de point-à-temps, de capture instantanée hello HANA hello suivant :</span><span class="sxs-lookup"><span data-stu-id="46f1b-448">toorecover tooa point in time between hello HANA snapshot (included in hello storage snapshot) and one that is later than hello HANA snapshot point-in-time recovery, do hello following:</span></span>

1. <span data-ttu-id="46f1b-449">Assurez-vous que vous disposez de toutes les sauvegardes de journaux de transaction de hello HANA instantané toohello pendant laquelle vous souhaitez que toorecover.</span><span class="sxs-lookup"><span data-stu-id="46f1b-449">Make sure that you have all transaction log backups from hello HANA snapshot toohello time you want toorecover.</span></span>
2. <span data-ttu-id="46f1b-450">Commencer la procédure hello sous « Recovering toohello état le plus récent. »</span><span class="sxs-lookup"><span data-stu-id="46f1b-450">Begin hello procedure under "Recovering toohello most recent state."</span></span>
3. <span data-ttu-id="46f1b-451">Dans l’étape 2 de la procédure hello, Bonjour **spécifier le Type de récupération** fenêtre, sélectionnez **suivant de toohello de base de données de récupération hello point dans le temps**, spécifiez hello point dans le temps, puis effectuez les étapes 3 à 6.</span><span class="sxs-lookup"><span data-stu-id="46f1b-451">In step 2 of hello procedure, in hello **Specify Recovery Type** window, select **Recover hello database toohello following point in time**, specify hello point in time, and then complete steps 3-6.</span></span>

## <a name="monitoring-hello-execution-of-snapshots"></a><span data-ttu-id="46f1b-452">Surveillance de l’exécution de hello d’instantanés</span><span class="sxs-lookup"><span data-stu-id="46f1b-452">Monitoring hello execution of snapshots</span></span>

<span data-ttu-id="46f1b-453">Vous avez besoin de l’exécution de hello toomonitor d’instantanés de stockage.</span><span class="sxs-lookup"><span data-stu-id="46f1b-453">You need toomonitor hello execution of storage snapshots.</span></span> <span data-ttu-id="46f1b-454">script Hello qui exécute un instantané du stockage écrit le fichier de sortie tooa, puis l’enregistre toohello même emplacement que les scripts Perl hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-454">hello script that executes a storage snapshot writes output tooa file and then saves it toohello same location as hello Perl scripts.</span></span> <span data-ttu-id="46f1b-455">Un fichier distinct est créé pour chaque capture instantanée.</span><span class="sxs-lookup"><span data-stu-id="46f1b-455">A separate file is written for each snapshot.</span></span> <span data-ttu-id="46f1b-456">sortie Hello de chaque fichier montre clairement hello différentes phases hello instantané s’exécute :</span><span class="sxs-lookup"><span data-stu-id="46f1b-456">hello output of each file clearly shows hello various phases that hello snapshot script executes:</span></span>

- <span data-ttu-id="46f1b-457">Recherche d’un instantané de volumes hello nécessitant toocreate</span><span class="sxs-lookup"><span data-stu-id="46f1b-457">Finding hello volumes that need toocreate a snapshot</span></span>
- <span data-ttu-id="46f1b-458">Recherche d’instantanés hello obtenues à partir de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="46f1b-458">Finding hello snapshots taken from these volumes</span></span>
- <span data-ttu-id="46f1b-459">La suppression éventuelle existant instantanés toomatch hello nombre d’instantanés que vous avez spécifié</span><span class="sxs-lookup"><span data-stu-id="46f1b-459">Deleting eventual existing snapshots toomatch hello number of snapshots you specified</span></span>
- <span data-ttu-id="46f1b-460">Création d’une capture instantanée HANA</span><span class="sxs-lookup"><span data-stu-id="46f1b-460">Creating a HANA snapshot</span></span>
- <span data-ttu-id="46f1b-461">Création d’instantanés de stockage hello sur les volumes de hello</span><span class="sxs-lookup"><span data-stu-id="46f1b-461">Creating hello storage snapshot over hello volumes</span></span>
- <span data-ttu-id="46f1b-462">Suppression hello HANA instantané</span><span class="sxs-lookup"><span data-stu-id="46f1b-462">Deleting hello HANA snapshot</span></span>
- <span data-ttu-id="46f1b-463">Changement de nom hello plus récente d’instantanés trop**.0**</span><span class="sxs-lookup"><span data-stu-id="46f1b-463">Renaming hello most recent snapshot too**.0**</span></span>

<span data-ttu-id="46f1b-464">étape la plus importante du script de hello Hello est la suivante :</span><span class="sxs-lookup"><span data-stu-id="46f1b-464">hello most important part of hello script is this:</span></span>
```
**********************Creating HANA snapshot**********************
Creating hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data create snapshot"" ...
HANA snapshot created successfully.
**********************Creating Storage snapshot**********************
Taking snapshot hourly.recent for hana_data_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_backup_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_shared_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for sapmnt_lhanad01_t020_vol ...
Snapshot created successfully.
**********************Deleting HANA snapshot**********************
Deleting hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data drop snapshot"" ...
HANA snapshot deletion successfully.
```
<span data-ttu-id="46f1b-465">À partir de cet exemple, vous pouvez voir comment les enregistrements de script hello hello la création de hello HANA instantané.</span><span class="sxs-lookup"><span data-stu-id="46f1b-465">You can see from this sample how hello script records hello creation of hello HANA snapshot.</span></span> <span data-ttu-id="46f1b-466">Dans les cas de montée en puissance parallèle hello, ce processus est lancé sur le nœud principal de hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-466">In hello scale-out case, this process is initiated on hello master node.</span></span> <span data-ttu-id="46f1b-467">nœud maître de Hello lance la création de synchrone de hello d’instantanés hello sur chacun des nœuds de travail hello.</span><span class="sxs-lookup"><span data-stu-id="46f1b-467">hello master node initiates hello synchronous creation of hello snapshots on each of hello worker nodes.</span></span> <span data-ttu-id="46f1b-468">Instantané de stockage hello est extraite.</span><span class="sxs-lookup"><span data-stu-id="46f1b-468">Then hello storage snapshot is taken.</span></span> <span data-ttu-id="46f1b-469">Après l’exécution réussie de hello d’instantanés de stockage hello, instantané HANA hello est supprimé.</span><span class="sxs-lookup"><span data-stu-id="46f1b-469">After hello successful execution of hello storage snapshots, hello HANA snapshot is deleted.</span></span>
