---
title: "guide d’aaaBackup pour SAP HANA sur des Machines virtuelles Azure | Documents Microsoft"
description: "Le guide de sauvegarde pour SAP HANA couvre deux méthodes de sauvegarde clés pour SAP HANA sur machines virtuelles Azure"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="b8291-103">Guide de sauvegarde pour SAP HANA sur Machines Virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="b8291-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="b8291-104">Mise en route</span><span class="sxs-lookup"><span data-stu-id="b8291-104">Getting Started</span></span>

<span data-ttu-id="b8291-105">guide de sauvegarde Hello pour SAP HANA en cours d’exécution sur des Machines virtuelles Azure décrit uniquement les rubriques spécifiques à Azure.</span><span class="sxs-lookup"><span data-stu-id="b8291-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="b8291-106">Pour général SAP HANA sauvegarde les éléments associés, consultez la documentation de SAP HANA hello (consultez _documentation de SAP HANA sauvegarde_ plus loin dans cet article).</span><span class="sxs-lookup"><span data-stu-id="b8291-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="b8291-107">Hello de cet article porte sur deux possibilités sauvegarde majeures pour SAP HANA sur des machines virtuelles :</span><span class="sxs-lookup"><span data-stu-id="b8291-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="b8291-108">Système de fichiers de sauvegarde toohello HANA dans une Machine virtuelle de Azure Linux (consultez [SAP HANA Azure Backup au niveau du fichier](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="b8291-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="b8291-109">Sauvegarde HANA basée sur les instantanés de stockage à l’aide de fonctionnalité de capture instantanée hello stockage Azure blob manuellement ou le Service de sauvegarde Azure (consultez [sauvegarde de SAP HANA basée sur des instantanés de stockage](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="b8291-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="b8291-110">SAP HANA offre une API, ce qui permet de toointegrate les outils de sauvegarde tiers directement avec SAP HANA de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="b8291-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="b8291-111">(Qui n’est pas étendue hello de ce guide.) Actuellement, il n’existe aucune intégration directe de SAP HANA au service Azure Backup basée sur cette API.</span><span class="sxs-lookup"><span data-stu-id="b8291-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="b8291-112">SAP HANA est officiellement pris en charge sur le type de machine virtuelle Azure GS5 en tant qu’instance unique avec un charges de travail tooOLAP restriction supplémentaire (consultez [trouver les plateformes IaaS certifié](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) sur le site Web SAP hello).</span><span class="sxs-lookup"><span data-stu-id="b8291-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="b8291-113">Cet article sera mis à jour lors de la mise à disposition de nouvelles offres pour SAP HANA sur Azure.</span><span class="sxs-lookup"><span data-stu-id="b8291-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="b8291-114">Une solution SAP HANA hybride est également disponible sur Azure. Dans le cadre de cette solution, SAP HANA s’exécute de façon non virtualisée sur des serveurs physiques.</span><span class="sxs-lookup"><span data-stu-id="b8291-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="b8291-115">Toutefois, ce guide de sauvegarde SAP HANA pour Azure couvre un environnement Azure pur où SAP HANA s’exécute dans une machine virtuelle Azure et non sur de &quot;grandes instances&quot;. Consultez l’article [Vue d’ensemble et architecture de SAP HANA (grandes instances) sur Azure](hana-overview-architecture.md) pour plus d’informations sur cette solution de sauvegarde sur de &quot;grandes instances&quot;, basée sur des captures instantanées de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8291-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="b8291-116">Vous trouverez des informations générales sur les produits SAP pris en charge par Azure dans la [note SAP 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="b8291-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="b8291-117">Hello trois figures suivantes donnent une vue d’ensemble de hello les options de sauvegarde SAP HANA à l’aide des fonctionnalités natives de Azure actuellement et indiquent également les trois scénarios de sauvegarde futures potentielles.</span><span class="sxs-lookup"><span data-stu-id="b8291-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="b8291-118">articles connexes de Hello [SAP HANA Azure Backup au niveau du fichier de](sap-hana-backup-file-level.md) et [sauvegarde de SAP HANA basée sur des instantanés de stockage](sap-hana-backup-storage-snapshots.md) décrivent ces options plus en détail, y compris les considérations relatives à la taille et de performances pour SAP Sauvegardes HANA multi-téraoctets.</span><span class="sxs-lookup"><span data-stu-id="b8291-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Cette illustration montre deux possibilités pour enregistrer l’état des ordinateurs virtuels en cours hello](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="b8291-120">Cette illustration montre la possibilité de hello de l’enregistrement de hello VM état actuel, soit via le service de sauvegarde Azure ou d’un instantané manuel de disques de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="b8291-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="b8291-121">Avec cette approche, un n &#39; t disposer de sauvegardes de SAP HANA toomanage.</span><span class="sxs-lookup"><span data-stu-id="b8291-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="b8291-122">défi Hello du scénario de capture instantanée de disque hello est la cohérence des fichiers système et un état de disque cohérents avec les applications.</span><span class="sxs-lookup"><span data-stu-id="b8291-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="b8291-123">rubrique de la cohérence Hello est décrite dans la section de hello _la cohérence des données SAP HANA lors de la prise d’instantanés de stockage_ plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="b8291-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="b8291-124">Fonctionnalités et restrictions de Azure Backup service liées à des sauvegardes HANA tooSAP sont également décrites plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="b8291-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![Cette illustration montre la sauvegarde à l’intérieur de machine virtuelle de hello du fichier options pour effectuer une SAP HANA](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="b8291-126">Cette figure illustre les options pour une sauvegarde de fichier SAP HANA à l’intérieur de hello machine virtuelle et puis le stockage des fichiers de sauvegarde HANA quelque part à l’aide de différents outils.</span><span class="sxs-lookup"><span data-stu-id="b8291-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="b8291-127">Une sauvegarde HANA nécessite plus de temps qu’une solution de sauvegarde basée sur des captures instantanées. Cependant, elle présente certains avantages en termes d’intégrité et de cohérence.</span><span class="sxs-lookup"><span data-stu-id="b8291-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="b8291-128">Vous trouverez des informations plus détaillées à ce sujet plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="b8291-128">More details are provided later in this article.</span></span>

![Ce schéma illustre un scénario de sauvegarde SAP HANA futur potentiel.](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="b8291-130">Ce schéma illustre un scénario de sauvegarde SAP HANA futur potentiel.</span><span class="sxs-lookup"><span data-stu-id="b8291-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="b8291-131">Si SAP HANA autorisait à effectuer des sauvegardes à partir d’une réplication secondaire, cela offrirait des possibilités supplémentaires en matière de stratégies de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="b8291-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="b8291-132">Actuellement il n’est pas possible en fonction de post tooa Bonjour SAP HANA Wiki :</span><span class="sxs-lookup"><span data-stu-id="b8291-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="b8291-133">_&quot;Il est possible tootake les sauvegardes sur site secondaire de hello ?_</span><span class="sxs-lookup"><span data-stu-id="b8291-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="b8291-134">_Non, actuellement vous pouvez uniquement des données et sauvegardes de journaux côté primaire de hello. Si la sauvegarde de l’ouverture de session automatique est activée, après toohello prise de contrôle de site secondaire, les sauvegardes de journal hello seront automatiquement écrit il.&quot;_</span><span class="sxs-lookup"><span data-stu-id="b8291-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="b8291-135">Ressources SAP pour la sauvegarde HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="b8291-136">Documentation sur la sauvegarde SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="b8291-137">Introduction tooSAP HANA Administration</span><span class="sxs-lookup"><span data-stu-id="b8291-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- <span data-ttu-id="b8291-138">[Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) (Planification de votre stratégie de sauvegarde et de récupération)</span><span class="sxs-lookup"><span data-stu-id="b8291-138">[Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)</span></span>
- <span data-ttu-id="b8291-139">[Schedule HANA Backup using ABAP DBACOCKPIT](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html) (Planifier la sauvegarde HANA avec ABAP DBACOCKPIT)</span><span class="sxs-lookup"><span data-stu-id="b8291-139">[Schedule HANA Backup using ABAP DBACOCKPIT](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)</span></span>
- <span data-ttu-id="b8291-140">[Schedule Data Backups (SAP HANA Cockpit)](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm) (Planifier des sauvegardes de données (cockpit SAP HANA))</span><span class="sxs-lookup"><span data-stu-id="b8291-140">[Schedule Data Backups (SAP HANA Cockpit)](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)</span></span>
- <span data-ttu-id="b8291-141">FAQ sur la sauvegarde SAP HANA dans la [note SAP 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="b8291-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="b8291-142">FAQ sur les captures instantanées de base de données et de stockage SAP HANA dans la [note SAP 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="b8291-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="b8291-143">Systèmes de fichiers en réseau inappropriés pour la sauvegarde et la récupération dans la [note SAP 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="b8291-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="b8291-144">Pourquoi utiliser la sauvegarde SAP HANA ?</span><span class="sxs-lookup"><span data-stu-id="b8291-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="b8291-145">Le stockage Azure offre la disponibilité et la fiabilité en dehors de la zone de hello (consultez [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) pour plus d’informations sur le stockage Azure).</span><span class="sxs-lookup"><span data-stu-id="b8291-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="b8291-146">Hello minimale pour &quot;sauvegarde&quot; est toorely sur hello SLA Azure, conservation hello SAP HANA données et fichiers journaux sur la machine virtuelle du serveur SAP HANA disques durs virtuels d’Azure attaché toohello.</span><span class="sxs-lookup"><span data-stu-id="b8291-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="b8291-147">Cette approche couvre les échecs de la machine virtuelle, mais pas potentiels dommages toohello SAP HANA données et fichiers journaux ou les erreurs logiques tels que la suppression des fichiers de données ou par accident.</span><span class="sxs-lookup"><span data-stu-id="b8291-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="b8291-148">Les sauvegardes sont également requises pour des raisons juridiques ou de conformité.</span><span class="sxs-lookup"><span data-stu-id="b8291-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="b8291-149">En bref, il est toujours nécessaire d’effectuer des sauvegardes SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="b8291-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="b8291-150">Comment exactitude tooverify de sauvegarde de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="b8291-151">Lorsque vous utilisez des captures instantanées de stockage, il est recommandé d’effectuer un test de restauration sur un autre système.</span><span class="sxs-lookup"><span data-stu-id="b8291-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="b8291-152">Cette approche offre un moyen tooensure qu’une sauvegarde est corrects et internes des processus pour le travail de sauvegarde et de restauration, comme prévu.</span><span class="sxs-lookup"><span data-stu-id="b8291-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="b8291-153">Bien que cela soit un obstacle sur site, il est beaucoup plus facile tooaccomplish dans le cloud de hello en fournissant temporairement les ressources nécessaires à cet effet.</span><span class="sxs-lookup"><span data-stu-id="b8291-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="b8291-154">Gardez à l’esprit qu’il ne suffit pas d’effectuer une simple restauration et de vérifier si HANA est opérationnel et en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="b8291-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="b8291-155">Dans l’idéal, un doit s’exécuter une table cohérence cocher toobe que cette base de données restaurée de hello est correct.</span><span class="sxs-lookup"><span data-stu-id="b8291-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="b8291-156">SAP HANA offre plusieurs types de vérifications de cohérence. Ceux-ci sont décrits dans la [note SAP 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="b8291-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="b8291-157">Plus d’informations sur la vérification de cohérence hello table vous trouverez également sur le site Web SAP hello, consultez [Table et le catalogue des vérifications de cohérence](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="b8291-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="b8291-158">Pour les sauvegardes de fichiers standard, il n’est pas nécessaire d’effectuer un test de restauration.</span><span class="sxs-lookup"><span data-stu-id="b8291-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="b8291-159">Il existe deux outils SAP HANA qui aident à toocheck quelle sauvegarde peut être utilisé pour la restauration : hdbbackupdiag et hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="b8291-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="b8291-160">Consultez la page [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) (Vérifier manuellement si une récupération est possible) pour plus d’informations sur ces outils.</span><span class="sxs-lookup"><span data-stu-id="b8291-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="b8291-161">Avantages et inconvénients de la sauvegarde HANA par rapport à la capture instantanée de stockage</span><span class="sxs-lookup"><span data-stu-id="b8291-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="b8291-162">SAP n & #39 t permettent de préférence tooeither HANA sauvegarde ; et les instantanés de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8291-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="b8291-163">Il répertorie leurs avantages et inconvénients, afin qu’un puisse déterminer quels toouse selon la situation de hello et la technologie de stockage disponible (voir [planification de votre stratégie de sauvegarde et récupération](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="b8291-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="b8291-164">Sur Azure, tenez compte des faits hello qui hello Azure blob instantané fonctionnalité n &#39; t garantir la cohérence de système de fichier (voir [instantanés d’objet blob à l’aide avec PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="b8291-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="b8291-165">Hello la section suivante, _la cohérence des données SAP HANA lors de la prise d’instantanés de stockage_, présente certaines considérations relatives à cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="b8291-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="b8291-166">En outre, un a toounderstand hello conséquences de facturation lorsque vous utilisez fréquemment des instantanés d’objet blob comme décrit dans cet article : [comprendre comment les instantanés engendrent une augmentation des coûts](/rest/api/storageservices/understanding-how-snapshots-accrue-charges): il n’est pas &#39; t comme évident que l’utilisation de Azure disques virtuels.</span><span class="sxs-lookup"><span data-stu-id="b8291-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="b8291-167">Cohérence des données SAP HANA lors de la création de captures instantanées de stockage</span><span class="sxs-lookup"><span data-stu-id="b8291-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="b8291-168">Dans le cadre de la création de captures instantanées de stockage, la cohérence du système de fichiers et des applications représente un problème complexe.</span><span class="sxs-lookup"><span data-stu-id="b8291-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="b8291-169">des problèmes tooavoid de façon plus simple Hello est tooshut vers le bas SAP HANA, ou peut-être même machine virtuelle entière de hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="b8291-170">Un arrêt pourrait être effectué avec une démonstration ou un prototype, voire avec un système de développement. Cependant, ce procédé n’est pas envisageable avec un système de production.</span><span class="sxs-lookup"><span data-stu-id="b8291-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="b8291-171">Sur Azure, l’un est tookeep à l’esprit que hello Azure blob instantané fonctionnalité n &#39; t garantir la cohérence de système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="b8291-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="b8291-172">Il fonctionne toutefois à l’aide de hello SAP HANA instantané fonctionnalité, tant qu’il existe un seul disque virtuel impliqués.</span><span class="sxs-lookup"><span data-stu-id="b8291-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="b8291-173">Mais même avec un disque unique, d’autres éléments toobe activée.</span><span class="sxs-lookup"><span data-stu-id="b8291-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="b8291-174">La [note SAP 2039883](https://launchpad.support.sap.com/#/notes/2039883) fournit des informations importantes sur les sauvegardes SAP HANA effectuées avec des captures instantanées de stockage.</span><span class="sxs-lookup"><span data-stu-id="b8291-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="b8291-175">Par exemple, il mentionne, avec le système de fichiers XFS hello, il est nécessaire toorun **xfs\_Figer** avant à partir d’un stockage d’instantané tooguarantee cohérence (consultez [xfs\_freeze(8) - man de Linux page](https://linux.die.net/man/8/xfs_freeze) pour plus d’informations sur **xfs\_Figer**).</span><span class="sxs-lookup"><span data-stu-id="b8291-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="b8291-176">rubrique Hello de cohérence complique encore plus dans un cas où un système de fichiers s’étend sur plusieurs disques/volumes.</span><span class="sxs-lookup"><span data-stu-id="b8291-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="b8291-177">par exemple, lors de l’utilisation de mdadm ou de LVM et de l’entrelacement.</span><span class="sxs-lookup"><span data-stu-id="b8291-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="b8291-178">Hello la Note SAP mentionnés ci-dessus états :</span><span class="sxs-lookup"><span data-stu-id="b8291-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="b8291-179">_&quot;Mais n’oubliez pas que le système de stockage hello possède la cohérence de tooguarantee d’e/s lors de la création d’un instantané du stockage par volume de données SAP HANA, autrement dit, la prise d’un instantané d’un volume de données spécifiques au service de SAP HANA doit être une opération atomique.&quot;_</span><span class="sxs-lookup"><span data-stu-id="b8291-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="b8291-180">En supposant qu’il existe un système de fichiers XFS fractionnement quatre disques virtuels Azure, hello étapes suivantes fournissent un instantané cohérent qui représente la zone de données hello HANA :</span><span class="sxs-lookup"><span data-stu-id="b8291-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="b8291-181">Préparer la capture instantanée HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="b8291-182">Figer le système de fichiers hello (par exemple, utilisez **xfs\_Figer**)</span><span class="sxs-lookup"><span data-stu-id="b8291-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="b8291-183">Créer toutes les captures instantanées d’objets blob nécessaires sur Azure</span><span class="sxs-lookup"><span data-stu-id="b8291-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="b8291-184">Libérer le système de fichiers hello</span><span class="sxs-lookup"><span data-stu-id="b8291-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="b8291-185">Confirmer la capture instantanée de hello HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="b8291-186">Recommandation est la procédure de hello toouse ci-dessus dans tous les cas toobe, côté hello-safe, quel que soit le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="b8291-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="b8291-187">S’il s’agit d’un seul disque ou d’un entrelacement, il convient d’utiliser mdadm ou LVM sur plusieurs disques.</span><span class="sxs-lookup"><span data-stu-id="b8291-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="b8291-188">Il s’agit de capture instantanée de tooconfirm important hello HANA.</span><span class="sxs-lookup"><span data-stu-id="b8291-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="b8291-189">Échéance toohello &quot;copie sur écriture&quot; SAP HANA ne nécessitent pas d’espace disque supplémentaire dans ce mode de préparation d’instantané.</span><span class="sxs-lookup"><span data-stu-id="b8291-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="b8291-190">&#39; s également n’est pas possible de toostart nouvelles sauvegardes jusqu'à ce que l’instantané de SAP HANA hello est confirmée.</span><span class="sxs-lookup"><span data-stu-id="b8291-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="b8291-191">Le service Azure Backup utilise tootake d’extensions de machine virtuelle Azure administration fsck hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="b8291-192">Ces extensions de machine virtuelle ne sont pas disponibles pour une utilisation autonome.</span><span class="sxs-lookup"><span data-stu-id="b8291-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="b8291-193">Un a toujours la cohérence de toomanage SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="b8291-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="b8291-194">Consultez l’article hello [SAP HANA Azure Backup au niveau du fichier](sap-hana-backup-file-level.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="b8291-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="b8291-195">Stratégie de planification de sauvegarde SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="b8291-196">article de SAP HANA Hello [planification de votre stratégie de sauvegarde et récupération](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) États a basic planifier des sauvegardes de toodo :</span><span class="sxs-lookup"><span data-stu-id="b8291-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="b8291-197">Capture instantanée de stockage (quotidienne)</span><span class="sxs-lookup"><span data-stu-id="b8291-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="b8291-198">Sauvegarde de données complète dans un fichier ou au format bacint (hebdomadaire)</span><span class="sxs-lookup"><span data-stu-id="b8291-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="b8291-199">Sauvegardes de fichiers journaux automatiques</span><span class="sxs-lookup"><span data-stu-id="b8291-199">Automatic log backups</span></span>

<span data-ttu-id="b8291-200">Si vous le souhaitez, vous pouvez procéder sans captures instantanées de stockage. Celles-ci peuvent être remplacées par des sauvegardes HANA différentielles ou incrémentielles (voir [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm) (Sauvegardes différentielles) pour plus d’informations).</span><span class="sxs-lookup"><span data-stu-id="b8291-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="b8291-201">guide d’Administration de HANA Hello fournit un exemple de liste.</span><span class="sxs-lookup"><span data-stu-id="b8291-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="b8291-202">Il suggère qu’il possible de récupérer point spécifique de SAP HANA tooa dans le temps à l’aide de hello suivant la séquence des sauvegardes :</span><span class="sxs-lookup"><span data-stu-id="b8291-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="b8291-203">Sauvegarde de données complète</span><span class="sxs-lookup"><span data-stu-id="b8291-203">Full data backup</span></span>
2. <span data-ttu-id="b8291-204">Sauvegarde différentielle</span><span class="sxs-lookup"><span data-stu-id="b8291-204">Differential backup</span></span>
3. <span data-ttu-id="b8291-205">Sauvegarde incrémentielle 1</span><span class="sxs-lookup"><span data-stu-id="b8291-205">Incremental backup 1</span></span>
4. <span data-ttu-id="b8291-206">Sauvegarde incrémentielle 2</span><span class="sxs-lookup"><span data-stu-id="b8291-206">Incremental backup 2</span></span>
5. <span data-ttu-id="b8291-207">Sauvegardes de fichiers journaux</span><span class="sxs-lookup"><span data-stu-id="b8291-207">Log backups</span></span>

<span data-ttu-id="b8291-208">En ce qui concerne une planification exacte comme toowhen et la fréquence à laquelle un type de sauvegarde spécifique doit se produire, il n’est pas possible toogive règle générale, il est trop spécifiques au client et varie selon le nombre de modifications de données se produire dans le système de hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="b8291-209">Une recommandation de base à partir du côté SAP, ce qui peut être considérée comme des indications générales, est toomake une sauvegarde HANA complète une fois par semaine.</span><span class="sxs-lookup"><span data-stu-id="b8291-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="b8291-210">Relatives aux sauvegardes de journaux, consultez la documentation de SAP HANA hello [sauvegardes du journal](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="b8291-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="b8291-211">SAP recommande un peu de ménage de hello catalogue de sauvegarde tookeep à partir de la culture à l’infini (consultez [pour le catalogue de sauvegarde et de stockage de sauvegarde de ménage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="b8291-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="b8291-212">Fichiers de configuration SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-212">SAP HANA configuration files</span></span>

<span data-ttu-id="b8291-213">Comme indiqué dans la FAQ hello dans [SAP Remarque 1642148](https://launchpad.support.sap.com/#/notes/1642148), fichiers de configuration SAP HANA hello ne font pas partie d’une sauvegarde HANA standard.</span><span class="sxs-lookup"><span data-stu-id="b8291-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="b8291-214">Ils ne sont pas essentiel toorestore un système.</span><span class="sxs-lookup"><span data-stu-id="b8291-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="b8291-215">configuration de HANA Hello pourrait être modifiée manuellement après la restauration de hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="b8291-216">En cas de souhaité tooget hello même configuration personnalisée pendant le processus de restauration hello, il est nécessaire tooback les fichiers de configuration hello HANA séparément.</span><span class="sxs-lookup"><span data-stu-id="b8291-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="b8291-217">Si des sauvegardes standard HANA apprêtez tooa dédié de système de fichier de sauvegarde HANA, un peut également copier toohello de fichiers de configuration hello même système de fichiers de sauvegarde et copiez tout comme de la destination de stockage final toohello ensemble refroidir le stockage d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="b8291-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="b8291-218">Cockpit SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="b8291-219">Cockpit SAP HANA offre la possibilité de hello d’analyse et la gestion de SAP HANA via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="b8291-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="b8291-220">Il permet également la gestion des sauvegardes de SAP HANA et par conséquent peut être utilisé en tant qu’autre tooSAP HANA Studio et ABAP DBACOCKPIT (consultez [Cockpit SAP HANA](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) pour plus d’informations).</span><span class="sxs-lookup"><span data-stu-id="b8291-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Cette figure illustre le hello écran d’Administration de base de données SAP HANA Cockpit](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="b8291-222">Cette figure montre hello écran d’Administration de base de données SAP HANA Cockpit et vignette sauvegarde hello hello gauche.</span><span class="sxs-lookup"><span data-stu-id="b8291-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="b8291-223">Vignette de sauvegarde Voir hello nécessite des autorisations utilisateur appropriées pour le compte de connexion.</span><span class="sxs-lookup"><span data-stu-id="b8291-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![Les sauvegardes peuvent être surveillées dans le cockpit SAP HANA lors de leur réalisation.](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="b8291-225">Les sauvegardes peuvent être surveillés dans Cockpit SAP HANA pendant qu’ils sont en cours, une fois terminée, tous les détails de sauvegarde hello sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="b8291-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Exemple utilisant Firefox sur une machine virtuelle Azure SLES 12 avec le bureau Gnome](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="b8291-227">Hello des captures d’écran précédentes ont été effectuées à partir d’une machine virtuelle de Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="b8291-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="b8291-228">Celle-ci illustre l’utilisation de Firefox sur une machine virtuelle Azure SLES 12 avec le bureau Gnome.</span><span class="sxs-lookup"><span data-stu-id="b8291-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="b8291-229">Il affiche les planifications de sauvegarde hello option toodefine SAP HANA dans Cockpit SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="b8291-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="b8291-230">Comme l’également, il suggère de date/heure en tant que préfixe pour les fichiers de sauvegarde hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="b8291-231">Dans SAP HANA Studio, le préfixe par défaut de hello est &quot;COMPLETE\_données\_sauvegarde&quot; lorsque vous effectuez une sauvegarde complète.</span><span class="sxs-lookup"><span data-stu-id="b8291-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="b8291-232">L’utilisation d’un préfixe unique est recommandée.</span><span class="sxs-lookup"><span data-stu-id="b8291-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="b8291-233">Chiffrement de sauvegarde SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="b8291-234">SAP HANA assure le chiffrement des données et du journal.</span><span class="sxs-lookup"><span data-stu-id="b8291-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="b8291-235">Si les journaux et données de SAP HANA ne sont pas chiffrés, puis les sauvegardes de hello sont également pas chiffrés.</span><span class="sxs-lookup"><span data-stu-id="b8291-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="b8291-236">C’est toohello client toouse une forme de solution tierce tooencrypt hello SAP HANA des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="b8291-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="b8291-237">Consultez [données et le chiffrement de Volume de journal](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind plus d’informations sur le chiffrement de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="b8291-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="b8291-238">Sur Microsoft Azure, un client peut utiliser hello tooencrypt de fonctionnalité de chiffrement IaaS VM.</span><span class="sxs-lookup"><span data-stu-id="b8291-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="b8291-239">Par exemple, un peut utiliser dédiée aux données des disques toohello attaché machine virtuelle, qui sont des sauvegardes de SAP HANA toostore utilisé, puis effectuer des copies de ces disques.</span><span class="sxs-lookup"><span data-stu-id="b8291-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="b8291-240">Le service Azure Backup peut gérer des machines virtuelles/disques chiffrés (voir [mode tooback configuration et restauration de chiffrement de machines virtuelles dans Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="b8291-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="b8291-241">Une autre option serait être toomaintain hello SAP HANA virtuelle et ses disques sans chiffrement et stocker des fichiers de sauvegarde de SAP HANA hello dans un compte de stockage pour lequel le chiffrement a été activé (voir [chiffrement de Service de stockage Azure pour les données au repos](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="b8291-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="b8291-242">Configuration des tests</span><span class="sxs-lookup"><span data-stu-id="b8291-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="b8291-243">Machine virtuelle de test sur Azure</span><span class="sxs-lookup"><span data-stu-id="b8291-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="b8291-244">Une installation SAP HANA dans une machine virtuelle de Azure GS5 a été utilisée pour hello suite de tests de la sauvegarde/restauration.</span><span class="sxs-lookup"><span data-stu-id="b8291-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![Cette illustration montre une partie de hello, vue d’ensemble du portail Azure pour la machine virtuelle de test hello HANA](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="b8291-246">Cette illustration montre une partie de hello, vue d’ensemble du portail Azure pour la machine virtuelle de test HANA hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="b8291-247">Taille de la sauvegarde de test</span><span class="sxs-lookup"><span data-stu-id="b8291-247">Test backup size</span></span>

![Cette figure a été effectuée à partir de la console de sauvegarde hello dans HANA Studio et affiche la taille du fichier de sauvegarde hello Go 229 hello HANA serveur d’index](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="b8291-249">Une table fictive a été remplie avec les données tooget une taille totale des données de sauvegarde de plus de 200 Go de données de performances réalistes tooderive.</span><span class="sxs-lookup"><span data-stu-id="b8291-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="b8291-250">la figure Hello a été effectuée à partir de la console de sauvegarde hello dans HANA Studio et affiche la taille du fichier de sauvegarde hello Go 229 hello HANA serveur d’index.</span><span class="sxs-lookup"><span data-stu-id="b8291-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="b8291-251">Pour les tests de hello, le préfixe de sauvegarde hello par défaut « COMPLETE_DATA_BACKUP » dans SAP HANA Studio a été utilisé.</span><span class="sxs-lookup"><span data-stu-id="b8291-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="b8291-252">Dans des systèmes de production réels, un préfixe plus utile doit être défini.</span><span class="sxs-lookup"><span data-stu-id="b8291-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="b8291-253">Le cockpit SAP HANA suggère la date et l’heure.</span><span class="sxs-lookup"><span data-stu-id="b8291-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="b8291-254">Fichiers de test outil toocopy directement tooAzure stockage</span><span class="sxs-lookup"><span data-stu-id="b8291-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="b8291-255">fichiers de sauvegarde de SAP HANA tootransfer directement tooAzure stockage d’objets blob ou les partages de fichiers Azure hello blobxfer tool a été utilisé, car il prend en charge les cibles et il peuvent être facilement intégrés à des scripts d’automatisation en raison de l’interface de ligne de commande de tooits.</span><span class="sxs-lookup"><span data-stu-id="b8291-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="b8291-256">Hello blobxfer outil est disponible sur [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="b8291-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="b8291-257">Estimation de la taille de la sauvegarde de test</span><span class="sxs-lookup"><span data-stu-id="b8291-257">Test backup size estimation</span></span>

<span data-ttu-id="b8291-258">Il est important de tooestimate hello taille de la sauvegarde de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="b8291-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="b8291-259">Cette estimation permet de performances de tooimprove en définissant la taille du fichier de sauvegarde max hello pour un nombre de fichiers de sauvegarde, échéance tooparallelism lors d’une copie du fichier.</span><span class="sxs-lookup"><span data-stu-id="b8291-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="b8291-260">(Ces aspects particuliers sont expliqués plus loin dans cet article.) Vous devez également choisir si toodo un jeu de sauvegarde ou un delta de sauvegarde (différentielle ou incrémentielle).</span><span class="sxs-lookup"><span data-stu-id="b8291-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="b8291-261">Heureusement, il existe une simple instruction SQL permettant d’estimer la taille de hello hello des fichiers de sauvegarde : **sélectionnez \* de M\_sauvegarde\_taille\_ESTIMATIONS** (consultez [ Hello d’estimation espace nécessaire dans hello système de fichiers pour une sauvegarde de données](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="b8291-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![sortie de Hello de cette instruction SQL correspond à quasiment hello taille réelle de la sauvegarde complète des données de hello sur le disque](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="b8291-263">Pour le système de test hello, sortie hello de cette instruction SQL correspond à quasiment hello taille réelle de la sauvegarde complète des données de hello sur le disque.</span><span class="sxs-lookup"><span data-stu-id="b8291-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="b8291-264">Taille du fichier de la sauvegarde de test HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-264">Test HANA backup file size</span></span>

![console de sauvegarde Hello HANA Studio permet une taille de fichier maximale hello toorestrict HANA des fichiers de sauvegarde](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="b8291-266">console de sauvegarde Hello HANA Studio permet une taille de fichier maximale hello toorestrict HANA des fichiers de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="b8291-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="b8291-267">Dans l’environnement d’exemple hello, cette fonctionnalité rend possible tooget les fichiers de sauvegarde plus petit multiples au lieu d’un fichier de sauvegarde 230 Go.</span><span class="sxs-lookup"><span data-stu-id="b8291-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="b8291-268">Taille de fichier a un impact significatif sur les performances (voir l’article connexe hello [SAP HANA Azure Backup au niveau du fichier](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="b8291-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="b8291-269">Résumé</span><span class="sxs-lookup"><span data-stu-id="b8291-269">Summary</span></span>

<span data-ttu-id="b8291-270">Selon les résultats de test hello hello les tableaux suivants montrent les avantages et inconvénients des tooback solutions une base de données SAP HANA en cours d’exécution sur des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="b8291-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="b8291-271">**Sauvegarde de copie et de système de fichiers SAP HANA toohello les fichiers de sauvegarde par la suite destination de sauvegarde finale toohello**</span><span class="sxs-lookup"><span data-stu-id="b8291-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="b8291-272">Solution</span><span class="sxs-lookup"><span data-stu-id="b8291-272">Solution</span></span>                                           |<span data-ttu-id="b8291-273">Avantages</span><span class="sxs-lookup"><span data-stu-id="b8291-273">Pros</span></span>                                 |<span data-ttu-id="b8291-274">Inconvénients</span><span class="sxs-lookup"><span data-stu-id="b8291-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="b8291-275">Conservation des sauvegardes HANA sur des disques de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="b8291-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="b8291-276">Aucun effort de gestion supplémentaire</span><span class="sxs-lookup"><span data-stu-id="b8291-276">No additional management efforts</span></span>     |<span data-ttu-id="b8291-277">Occupation d’espace sur le disque de machine virtuelle local</span><span class="sxs-lookup"><span data-stu-id="b8291-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="b8291-278">Stockage de tooblob Blobxfer outil toocopy les fichiers de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="b8291-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="b8291-279">Parallélisme toocopy plusieurs fichiers, stockage d’objets blob froid de toouse de choix</span><span class="sxs-lookup"><span data-stu-id="b8291-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="b8291-280">Maintenance de l’outil supplémentaire et scripts personnalisés</span><span class="sxs-lookup"><span data-stu-id="b8291-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="b8291-281">Copie d’objets blob avec Powershell ou l’interface CLI</span><span class="sxs-lookup"><span data-stu-id="b8291-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="b8291-282">Aucun outil supplémentaire nécessaire ; possibilité d’utiliser Azure Powershell ou l’interface CLI</span><span class="sxs-lookup"><span data-stu-id="b8291-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="b8291-283">processus manuel, le client a tootake administration scripts et la gestion d’objets BLOB de copié pour la restauration</span><span class="sxs-lookup"><span data-stu-id="b8291-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="b8291-284">Partage de tooNFS</span><span class="sxs-lookup"><span data-stu-id="b8291-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="b8291-285">Après le traitement de fichiers de sauvegarde sur un autre ordinateur virtuel sans impact sur le serveur HANA hello</span><span class="sxs-lookup"><span data-stu-id="b8291-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="b8291-286">Lenteur du processus de copie</span><span class="sxs-lookup"><span data-stu-id="b8291-286">Slow copy process</span></span>|
|<span data-ttu-id="b8291-287">Blobxfer copie tooAzure Service de fichiers</span><span class="sxs-lookup"><span data-stu-id="b8291-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="b8291-288">Pas d’occupation d’espace sur les disques de machine virtuelle locaux</span><span class="sxs-lookup"><span data-stu-id="b8291-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="b8291-289">Pas de prise en charge de l’écriture directe par la sauvegarde HANA ; restriction de la taille du partage de fichiers (actuellement 5 To)</span><span class="sxs-lookup"><span data-stu-id="b8291-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="b8291-290">Agent Azure Backup</span><span class="sxs-lookup"><span data-stu-id="b8291-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="b8291-291">Serait la solution privilégiée</span><span class="sxs-lookup"><span data-stu-id="b8291-291">Would be preferred solution</span></span>         | <span data-ttu-id="b8291-292">Actuellement non disponible sur Linux</span><span class="sxs-lookup"><span data-stu-id="b8291-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="b8291-293">**Sauvegarde de SAP HANA à partir de captures instantanées de stockage**</span><span class="sxs-lookup"><span data-stu-id="b8291-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="b8291-294">Solution</span><span class="sxs-lookup"><span data-stu-id="b8291-294">Solution</span></span>                                           |<span data-ttu-id="b8291-295">Avantages</span><span class="sxs-lookup"><span data-stu-id="b8291-295">Pros</span></span>                                 |<span data-ttu-id="b8291-296">Inconvénients</span><span class="sxs-lookup"><span data-stu-id="b8291-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="b8291-297">Service Azure Backup</span><span class="sxs-lookup"><span data-stu-id="b8291-297">Azure Backup Service</span></span>                               | <span data-ttu-id="b8291-298">Possibilité d’effectuer une sauvegarde de machine virtuelle à partir de captures instantanées d’objets blob</span><span class="sxs-lookup"><span data-stu-id="b8291-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="b8291-299">Lorsque vous n’utilisez ne pas de restauration au niveau fichier, il requiert la création de hello d’une machine virtuelle pour le processus de restauration hello, ce qui implique de puis besoin hello d’une nouvelle clé de licence SAP HANA</span><span class="sxs-lookup"><span data-stu-id="b8291-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="b8291-300">Captures instantanées d’objets blob manuelles</span><span class="sxs-lookup"><span data-stu-id="b8291-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="b8291-301">Flexibilité toocreate et la restauration des disques de machine virtuelle sans modifier hello unique ID de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="b8291-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="b8291-302">Toutes les manipulations ayant toobe effectuée par le client de hello</span><span class="sxs-lookup"><span data-stu-id="b8291-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="b8291-303">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b8291-303">Next steps</span></span>
* <span data-ttu-id="b8291-304">[SAP HANA Azure Backup au niveau du fichier](sap-hana-backup-file-level.md) décrit l’option de sauvegarde basée sur le fichier hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="b8291-305">[Sauvegarde de SAP HANA basée sur des instantanés de stockage](sap-hana-backup-storage-snapshots.md) décrit l’option sauvegarde basée sur un instantané stockage hello.</span><span class="sxs-lookup"><span data-stu-id="b8291-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="b8291-306">toolearn comment tooestablish haute disponibilité et le plan de récupération d’urgence de SAP HANA sur Azure (instances de grande taille), consultez [SAP HANA (instances de grande taille) haute disponibilité et récupération d’urgence sur Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="b8291-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
