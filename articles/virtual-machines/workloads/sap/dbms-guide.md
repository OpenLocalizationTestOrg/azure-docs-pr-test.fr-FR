---
title: "Déploiement SGBD de machines virtuelles Azure pour SAP NetWeaver | Microsoft Docs"
description: "Déploiement SGBD de machines virtuelles Azure pour SAP NetWeaver"
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: 5654dac7-4204-4387-b312-3d8b2898eb3a
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 1046d32a0b4b6ede027ef1931314a188c64c94bb
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-virtual-machines-dbms-deployment-for-sap-netweaver"></a><span data-ttu-id="07e4c-103">Déploiement SGBD de machines virtuelles Azure pour SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="07e4c-103">Azure Virtual Machines DBMS deployment for SAP NetWeaver</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1114181]:https://launchpad.support.sap.com/#/notes/1114181
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2171857]:https://launchpad.support.sap.com/#/notes/2171857
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md 
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f 
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91 
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152 
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64 
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3 
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268 
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b 
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30 
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737 
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573 
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d 
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c 
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818 
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8
[dbms-guide-managed-disks]:dbms-guide.md#f42c6cb5-d563-484d-9667-b07ae51bce29

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md 
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab 
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281 
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1 
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e 
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e 
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc 
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d 
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4 
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f 
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca 
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b 
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d 
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md 
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff 
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f 
[planning-guide-2.1]:planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10 
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a 
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665 
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c 
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef 
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a 
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d 
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd 
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f 

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-azurerm-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam 
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../../storage/common/storage-premium-storage.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/storage-scalability-targets.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:../../../resource-manager-deployment-model.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md 
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md 
[virtual-machines-linux-agent-user-guide]:../../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability-linux]:../../linux/manage-availability.md
[virtual-machines-manage-availability-windows]:../../windows/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

<span data-ttu-id="07e4c-149">Ce guide fait partie de la documentation sur l’implémentation et le déploiement des logiciels SAP sur Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-149">This guide is part of the documentation on implementing and deploying the SAP software on Microsoft Azure.</span></span> <span data-ttu-id="07e4c-150">Avant de lire ce guide, consultez le [Guide de planification et d’implémentation][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="07e4c-150">Before reading this guide, read the [Planning and Implementation Guide][planning-guide].</span></span> <span data-ttu-id="07e4c-151">Ce document présente le déploiement de différents systèmes de gestion de base de données relationnelle (SGBDR) et des produits associés avec SAP sur Microsoft Azure Virtual Machines à l’aide des fonctionnalités Infrastructure as a Service (IaaS) d’Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-151">This document covers the deployment of various Relational Database Management Systems (RDBMS) and related products in combination with SAP on Microsoft Azure Virtual Machines (VMs) using the Azure Infrastructure as a Service (IaaS) capabilities.</span></span>

<span data-ttu-id="07e4c-152">Ce document vient compléter la documentation sur l’installation SAP et les notes SAP, qui constituent les principales ressources pour l’installation et le déploiement des logiciels SAP sur des plateformes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-152">The paper complements the SAP Installation Documentation and SAP Notes, which represent the primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="general-considerations"></a><span data-ttu-id="07e4c-153">Considérations d’ordre général</span><span class="sxs-lookup"><span data-stu-id="07e4c-153">General considerations</span></span>
<span data-ttu-id="07e4c-154">Ce chapitre aborde l’exécution des systèmes SGBD de type SAP sur les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-154">In this chapter, considerations of running SAP-related DBMS systems in Azure VMs are introduced.</span></span> <span data-ttu-id="07e4c-155">Il comporte peu de références à des systèmes SGBD spécifiques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-155">There are few references to specific DBMS systems in this chapter.</span></span> <span data-ttu-id="07e4c-156">Les systèmes SGBD spécifiques sont couverts dans la suite de ce document, après ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="07e4c-156">Instead the specific DBMS systems are handled within this paper, after this chapter.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="07e4c-157">Préambule : définitions</span><span class="sxs-lookup"><span data-stu-id="07e4c-157">Definitions upfront</span></span>
<span data-ttu-id="07e4c-158">Les termes suivants seront utilisés dans le document :</span><span class="sxs-lookup"><span data-stu-id="07e4c-158">Throughout the document, we use the following terms:</span></span>

* <span data-ttu-id="07e4c-159">IaaS : Infrastructure as a Service.</span><span class="sxs-lookup"><span data-stu-id="07e4c-159">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="07e4c-160">PaaS : Platform as a Service.</span><span class="sxs-lookup"><span data-stu-id="07e4c-160">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="07e4c-161">SaaS : Software as a Service.</span><span class="sxs-lookup"><span data-stu-id="07e4c-161">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="07e4c-162">Composant SAP : application SAP telle que ECC, BW, Solution Manager ou EP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-162">SAP Component: an individual SAP application such as ECC, BW, Solution Manager, or EP.</span></span>  <span data-ttu-id="07e4c-163">Les composants SAP peuvent être basés sur des technologies ABAP ou Java traditionnelles ou une application non basée sur NetWeaver telle que Business Objects.</span><span class="sxs-lookup"><span data-stu-id="07e4c-163">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="07e4c-164">Environnement SAP : un ou plusieurs composants SAP regroupés de manière logique pour exécuter une fonction métier telle que le développement, l’assurance qualité, la formation, la récupération d’urgence ou la production.</span><span class="sxs-lookup"><span data-stu-id="07e4c-164">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR, or Production.</span></span>
* <span data-ttu-id="07e4c-165">Paysage SAP : ce terme fait référence à l’ensemble des ressources SAP dans le paysage informatique d’un client.</span><span class="sxs-lookup"><span data-stu-id="07e4c-165">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="07e4c-166">Le paysage SAP comprend tous les environnements de production et les autres types d’environnements.</span><span class="sxs-lookup"><span data-stu-id="07e4c-166">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="07e4c-167">Système SAP : ensemble couche SGBD/couche Application, tel que celui d’un système de développement SAP ERP, d’un système de test SAP BW, d’un système de production SAP CRM, etc. Dans les déploiements Azure, il n’est pas possible de répartir ces deux couches entre un système local et Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-167">SAP System: The combination of DBMS layer and application layer of, for example, an SAP ERP development system, SAP BW test system, SAP CRM production system, etc. In Azure deployments, it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="07e4c-168">Cela signifie qu’un système SAP doit être déployé en local ou dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-168">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="07e4c-169">Vous pouvez toutefois déployer les différents systèmes d’un paysage SAP dans Azure ou en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-169">However, you can deploy the different systems of an SAP landscape in Azure or on-premises.</span></span> <span data-ttu-id="07e4c-170">Par exemple, vous pouvez déployer les systèmes de test et de développement SAP CRM dans Azure et le système de production SAP CRM en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-170">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="07e4c-171">Déploiement cloud uniquement : déploiement dans lequel l’abonnement Azure n’est pas connecté via une connexion ExpressRoute ou de site à site à l’infrastructure réseau locale.</span><span class="sxs-lookup"><span data-stu-id="07e4c-171">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="07e4c-172">Dans la documentation Azure courante, ces types de déploiements sont également décrits comme des déploiements « cloud uniquement ».</span><span class="sxs-lookup"><span data-stu-id="07e4c-172">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="07e4c-173">Les machines virtuelles déployées avec cette méthode sont accessibles via Internet et des points de terminaison Internet publics affectés aux machines virtuelles dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-173">Virtual Machines deployed with this method are accessed through the Internet and public Internet endpoints assigned to the VMs in Azure.</span></span> <span data-ttu-id="07e4c-174">Le répertoire Active Directory et le serveur DNS locaux ne sont pas étendus à Azure dans ces types de déploiements.</span><span class="sxs-lookup"><span data-stu-id="07e4c-174">The on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="07e4c-175">Par conséquent, les machines virtuelles ne font pas partie du répertoire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-175">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="07e4c-176">Remarque : Dans ce document, les déploiements « cloud uniquement » sont définis comme des paysages SAP complets exécutés uniquement dans Azure, sans extension d’Active Directory ni passage d’une résolution de noms locale à une résolution dans le cloud public.</span><span class="sxs-lookup"><span data-stu-id="07e4c-176">Note: Cloud-Only deployments in this document are defined as complete SAP landscapes, which are running exclusively in Azure without extension of Active Directory or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="07e4c-177">Les configurations cloud uniquement ne sont pas prises en charge pour les configurations ou systèmes SAP de production dans lesquels des ressources SAP STMS ou d’autres ressources locales doivent être utilisées entre les systèmes SAP hébergés sur Azure et les ressources en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-177">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
* <span data-ttu-id="07e4c-178">Déploiement entre différents locaux : décrit un scénario dans lequel les machines virtuelles sont déployées dans un abonnement Azure qui dispose d’une connectivité de site à site, multisite ou ExpressRoute entre les différents centres de données locaux et Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-178">Cross-Premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site, or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="07e4c-179">Dans la documentation Azure courante, ces types de déploiements sont également décrits comme des scénarios intersites.</span><span class="sxs-lookup"><span data-stu-id="07e4c-179">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="07e4c-180">La connexion a pour but d’étendre les domaines locaux, les instances locales d’Active Directory et le serveur DNS local à Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-180">The reason for the connection is to extend on-premises domains, on-premises Active Directory, and on-premises DNS into Azure.</span></span> <span data-ttu-id="07e4c-181">Le paysage local est étendu aux ressources Azure de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-181">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="07e4c-182">Grâce à cette extension, les machines virtuelles peuvent faire partie du domaine local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-182">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="07e4c-183">Les utilisateurs du domaine local peuvent accéder aux serveurs et exécuter des services (SGBD, par exemple) sur ces machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-183">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="07e4c-184">La communication et la résolution de noms entre les machines virtuelles déployées en local et les machines virtuelles déployées dans Azure est possible.</span><span class="sxs-lookup"><span data-stu-id="07e4c-184">Communication and name resolution between VMs deployed on-premises and VMs deployed in Azure is possible.</span></span> <span data-ttu-id="07e4c-185">Ce scénario devrait être le plus souvent utilisé pour le déploiement de ressources SAP sur Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-185">We expect this to be the most common scenario for deploying SAP assets on Azure.</span></span> <span data-ttu-id="07e4c-186">Pour plus d’informations, consultez [cet article][vpn-gateway-cross-premises-options] et [cet article][vpn-gateway-site-to-site-create].</span><span class="sxs-lookup"><span data-stu-id="07e4c-186">For more information, see [this article][vpn-gateway-cross-premises-options] and [this article][vpn-gateway-site-to-site-create].</span></span>

> [!NOTE]
> <span data-ttu-id="07e4c-187">Les déploiements intersites de systèmes SAP dans lesquels des machines virtuelles Azure exécutant des systèmes SAP font partie d’un domaine local sont pris en charge pour les systèmes SAP de production.</span><span class="sxs-lookup"><span data-stu-id="07e4c-187">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="07e4c-188">Les configurations entre différents locaux sont prises en charge pour le déploiement d’éléments ou de l’intégralité des paysages SAP dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-188">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="07e4c-189">Ces machines virtuelles doivent faire partie du domaine et des services Active Directory locaux même lorsque l’intégralité du paysage SAP est exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-189">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS.</span></span> <span data-ttu-id="07e4c-190">Dans les versions précédentes de la documentation, nous avons parlé des scénarios hybrides, où le terme « hybride » tient au fait qu’il existe une connectivité intersite entre les sites locaux et Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-190">In former versions of the documentation, we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="07e4c-191">Dans ce cas, « hybride » signifie également que les machines virtuelles dans Azure font partie du répertoire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-191">In this case ‘Hybrid’ also means that the VMs in Azure are part of the on-premises Active Directory.</span></span>
> 
> 

<span data-ttu-id="07e4c-192">Certaines documentations Microsoft décrivent les scénarios intersites de façon légèrement différente, en particulier pour les configurations haute disponibilité SGBD.</span><span class="sxs-lookup"><span data-stu-id="07e4c-192">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="07e4c-193">Dans les documents portant sur SAP, le scénario de déploiement entre différents locaux se résume simplement à la mise en œuvre d’une connectivité de site à site ou privée (ExpressRoute) et à la répartition du paysage SAP entre les sites locaux et Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-193">In the case of the SAP-related documents, the Cross-Premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and to the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>

### <a name="resources"></a><span data-ttu-id="07e4c-194">Ressources</span><span class="sxs-lookup"><span data-stu-id="07e4c-194">Resources</span></span>
<span data-ttu-id="07e4c-195">Les déploiements SAP sur Azure sont décrits dans les guides suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-195">The following guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="07e4c-196">[Planification et implémentation de machines virtuelles Azure pour SAP NetWeaver][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="07e4c-196">[Azure Virtual Machines planning and implementation for SAP NetWeaver][planning-guide]</span></span>
* <span data-ttu-id="07e4c-197">[Déploiement de machines virtuelles Azure pour SAP NetWeaver][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="07e4c-197">[Azure Virtual Machines deployment for SAP NetWeaver][deployment-guide]</span></span>
* <span data-ttu-id="07e4c-198">[Déploiement SGBD de machines virtuelles Azure pour SAP NetWeaver (le présent document)][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="07e4c-198">[Azure Virtual Machines DBMS deployment for SAP NetWeaver (this document)][dbms-guide]</span></span>

<span data-ttu-id="07e4c-199">Les notes SAP suivantes sont associées à la rubrique SAP sur Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-199">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="07e4c-200">Numéro de la note</span><span class="sxs-lookup"><span data-stu-id="07e4c-200">Note number</span></span> | <span data-ttu-id="07e4c-201">Intitulé</span><span class="sxs-lookup"><span data-stu-id="07e4c-201">Title</span></span> |
| --- | --- |
| <span data-ttu-id="07e4c-202">[1928533]</span><span class="sxs-lookup"><span data-stu-id="07e4c-202">[1928533]</span></span> |<span data-ttu-id="07e4c-203">Applications SAP sur Azure : produits et types de machines virtuelles pris en charge</span><span class="sxs-lookup"><span data-stu-id="07e4c-203">SAP Applications on Azure: Supported Products and Azure VM types</span></span> |
| <span data-ttu-id="07e4c-204">[2015553]</span><span class="sxs-lookup"><span data-stu-id="07e4c-204">[2015553]</span></span> |<span data-ttu-id="07e4c-205">SAP sur Microsoft Azure : configuration requise</span><span class="sxs-lookup"><span data-stu-id="07e4c-205">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="07e4c-206">[1999351]</span><span class="sxs-lookup"><span data-stu-id="07e4c-206">[1999351]</span></span> |<span data-ttu-id="07e4c-207">Résolution des problèmes de surveillance Azure améliorée pour SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-207">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="07e4c-208">[2178632]</span><span class="sxs-lookup"><span data-stu-id="07e4c-208">[2178632]</span></span> |<span data-ttu-id="07e4c-209">Métriques de surveillance clés pour SAP sur Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-209">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="07e4c-210">[1409604]</span><span class="sxs-lookup"><span data-stu-id="07e4c-210">[1409604]</span></span> |<span data-ttu-id="07e4c-211">Virtualisation sur Windows : surveillance améliorée</span><span class="sxs-lookup"><span data-stu-id="07e4c-211">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="07e4c-212">[2191498]</span><span class="sxs-lookup"><span data-stu-id="07e4c-212">[2191498]</span></span> |<span data-ttu-id="07e4c-213">SAP sur Linux avec Azure : surveillance améliorée</span><span class="sxs-lookup"><span data-stu-id="07e4c-213">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="07e4c-214">[2039619]</span><span class="sxs-lookup"><span data-stu-id="07e4c-214">[2039619]</span></span> |<span data-ttu-id="07e4c-215">Exécution d’applications SAP sur Microsoft Azure à l’aide d’Oracle Database : produits et versions pris en charge</span><span class="sxs-lookup"><span data-stu-id="07e4c-215">SAP Applications on Microsoft Azure using the Oracle Database: Supported Products and Versions</span></span> |
| <span data-ttu-id="07e4c-216">[2233094]</span><span class="sxs-lookup"><span data-stu-id="07e4c-216">[2233094]</span></span> |<span data-ttu-id="07e4c-217">DB6 : Exécution d’applications SAP sur Azure à l’aide d’IBM DB2 pour Linux, UNIX et Windows - Informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="07e4c-217">DB6: SAP Applications on Azure Using IBM DB2 for Linux, UNIX, and Windows - Additional Information</span></span> |
| <span data-ttu-id="07e4c-218">[2243692]</span><span class="sxs-lookup"><span data-stu-id="07e4c-218">[2243692]</span></span> |<span data-ttu-id="07e4c-219">Linux sur Microsoft Azure Virtual Machines (IaaS) : problèmes de licence SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-219">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="07e4c-220">[1984787]</span><span class="sxs-lookup"><span data-stu-id="07e4c-220">[1984787]</span></span> |<span data-ttu-id="07e4c-221">SUSE LINUX Enterprise Server 12 : Notes d’installation</span><span class="sxs-lookup"><span data-stu-id="07e4c-221">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="07e4c-222">[2002167]</span><span class="sxs-lookup"><span data-stu-id="07e4c-222">[2002167]</span></span> |<span data-ttu-id="07e4c-223">Red Hat Enterprise Linux 7.x : Installation et mise à niveau</span><span class="sxs-lookup"><span data-stu-id="07e4c-223">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |
| <span data-ttu-id="07e4c-224">[2069760]</span><span class="sxs-lookup"><span data-stu-id="07e4c-224">[2069760]</span></span> |<span data-ttu-id="07e4c-225">Installation et mise à niveau SAP pour Oracle Linux 7.x</span><span class="sxs-lookup"><span data-stu-id="07e4c-225">Oracle Linux 7.x SAP Installation and Upgrade</span></span> |
| <span data-ttu-id="07e4c-226">[1597355]</span><span class="sxs-lookup"><span data-stu-id="07e4c-226">[1597355]</span></span> |<span data-ttu-id="07e4c-227">Recommandations relatives à l’espace d’échange pour Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-227">Swap-space recommendation for Linux</span></span> |
| <span data-ttu-id="07e4c-228">[2171857]</span><span class="sxs-lookup"><span data-stu-id="07e4c-228">[2171857]</span></span> |<span data-ttu-id="07e4c-229">Oracle Database 12C - Prise en charge du système de fichiers dans Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-229">Oracle Database 12c - file system support on Linux</span></span> |
| <span data-ttu-id="07e4c-230">[1114181]</span><span class="sxs-lookup"><span data-stu-id="07e4c-230">[1114181]</span></span> |<span data-ttu-id="07e4c-231">Oracle Database 11g - Prise en charge du système de fichiers dans Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-231">Oracle Database 11g - file system support on Linux</span></span> |


<span data-ttu-id="07e4c-232">Consultez également le [Wiki SCN](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) qui regroupe toutes les notes SAP pour Linux.</span><span class="sxs-lookup"><span data-stu-id="07e4c-232">Also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="07e4c-233">Vous devez avoir une connaissance pratique de l’architecture Microsoft Azure, ainsi que du déploiement et du fonctionnement des machines virtuelles Microsoft Azure Virtual Machines.</span><span class="sxs-lookup"><span data-stu-id="07e4c-233">You should have a working knowledge about the Microsoft Azure Architecture and how Microsoft Azure Virtual Machines are deployed and operated.</span></span> <span data-ttu-id="07e4c-234">Pour plus d’informations, consultez <https://azure.microsoft.com/documentation/></span><span class="sxs-lookup"><span data-stu-id="07e4c-234">You can find more information at <https://azure.microsoft.com/documentation/></span></span>

> [!NOTE]
> <span data-ttu-id="07e4c-235">Nous ne traitons **pas** ici des offres Platform as a Service (PaaS) de la plateforme Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-235">We are **not** discussing Microsoft Azure Platform as a Service (PaaS) offerings of the Microsoft Azure Platform.</span></span> <span data-ttu-id="07e4c-236">Ce document porte sur l’exécution d’un système de gestion de base de données (SGBD) dans Microsoft Azure Virtual Machines (IaaS) de la même manière que dans un environnement local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-236">This paper is about running a database management system (DBMS) in Microsoft Azure Virtual Machines (IaaS) just as you would run the DBMS in your on-premises environment.</span></span> <span data-ttu-id="07e4c-237">Les capacités et fonctionnalités de base de données de ces deux services sont très différentes et ne doivent pas être confondues.</span><span class="sxs-lookup"><span data-stu-id="07e4c-237">Database capabilities and functionalities between these two offers are very different and should not be mixed up with each other.</span></span> <span data-ttu-id="07e4c-238">Voir aussi : <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="07e4c-238">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
> 
> 

<span data-ttu-id="07e4c-239">Comme il est ici question de l’IaaS, l’installation et la configuration de Windows, de Linux et du SGBD sont globalement les mêmes que pour une machine virtuelle ou un ordinateur nu que vous installeriez en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-239">Since we are discussing IaaS, in general the Windows, Linux, and DBMS installation and configuration are essentially the same as any virtual machine or bare metal machine you would install on-premises.</span></span> <span data-ttu-id="07e4c-240">Cependant, les décisions relatives à l’implémentation de la gestion de l’architecture et des systèmes diffèrent sur certains points.</span><span class="sxs-lookup"><span data-stu-id="07e4c-240">However, there are some architecture and system management implementation decisions, which are different when utilizing IaaS.</span></span> <span data-ttu-id="07e4c-241">Ce document a pour objet d’expliquer les différences spécifiques de gestion de l’architecture et des systèmes auxquelles vous devez être préparé lors de l’utilisation de l’IaaS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-241">The purpose of this document is to explain the specific architectural and system management differences that you must be prepared for when using IaaS.</span></span>

<span data-ttu-id="07e4c-242">Les différences abordées dans ce document portent sur les points généraux suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-242">In general, the overall areas of difference that this paper discusses are:</span></span>

* <span data-ttu-id="07e4c-243">Planification de la disposition des machines virtuelles/disques durs virtuels des systèmes SAP pour s’assurer que la disposition des fichiers de données est appropriée et que le nombre potentiel d’E/S par seconde est suffisant pour la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="07e4c-243">Planning the proper VM/disk layout of SAP systems to ensure you have the proper data file layout and can achieve enough IOPS for your workload.</span></span>
* <span data-ttu-id="07e4c-244">Considérations relatives à la mise en réseau lors de l’utilisation de l’IaaS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-244">Networking considerations when using IaaS.</span></span>
* <span data-ttu-id="07e4c-245">Fonctionnalités de base de données spécifiques à utiliser afin d’optimiser la disposition des bases de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-245">Specific database features to use in order to optimize the database layout.</span></span>
* <span data-ttu-id="07e4c-246">Considérations relatives à la sauvegarde et à la restauration de l’IaaS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-246">Backup and restore considerations in IaaS.</span></span>
* <span data-ttu-id="07e4c-247">Utilisation de différents types d’images pour le déploiement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-247">Utilizing different types of images for deployment.</span></span>
* <span data-ttu-id="07e4c-248">Haute disponibilité dans Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-248">High Availability in Azure IaaS.</span></span>

## <span data-ttu-id="07e4c-249"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure d’un déploiement SGBDR</span><span class="sxs-lookup"><span data-stu-id="07e4c-249"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure of an RDBMS Deployment</span></span>
<span data-ttu-id="07e4c-250">Pour pouvoir suivre ce chapitre, il est nécessaire de comprendre le contenu de [ce chapitre][deployment-guide-3] du [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="07e4c-250">In order to follow this chapter, it is necessary to understand what was presented in [this][deployment-guide-3] chapter of the [Deployment Guide][deployment-guide].</span></span> <span data-ttu-id="07e4c-251">Vous devez savoir ce qui distingue les différentes séries de machines virtuelles et connaître les différences entre les offres de stockage Azure Standard et Premium Storage avant de lire ce chapitre.</span><span class="sxs-lookup"><span data-stu-id="07e4c-251">Knowledge about the different VM-Series and their differences and differences of Azure Standard and Premium Storage should be understood and known before reading this chapter.</span></span>

<span data-ttu-id="07e4c-252">Jusqu’à mars 2015, la taille des disques contenant un système d’exploitation était limitée à 127 Go.</span><span class="sxs-lookup"><span data-stu-id="07e4c-252">Until March 2015, disks, which contain an operating system were limited to 127 GB in size.</span></span> <span data-ttu-id="07e4c-253">Cette limitation a été levée en mars 2015 (pour plus d’informations, consultez <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>).</span><span class="sxs-lookup"><span data-stu-id="07e4c-253">This limitation got lifted in March 2015 (for more information check <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>).</span></span> <span data-ttu-id="07e4c-254">Depuis lors, les disques contenant le système d’exploitation peuvent présenter la même taille que n’importe quel autre disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-254">From there on disks containing the operating system can have the same size as any other disk.</span></span> <span data-ttu-id="07e4c-255">Cependant, nous continuons à privilégier une structure de déploiement dans laquelle le système d’exploitation, le SGBD et les fichiers binaires SAP éventuels sont séparés des fichiers de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-255">Nevertheless, we still prefer a structure of deployment where the operating system, DBMS, and eventual SAP binaries are separate from the database files.</span></span> <span data-ttu-id="07e4c-256">Les systèmes SAP exécutés dans Machines Virtuelles Azure doivent donc avoir la même machine virtuelle (ou le même disque) de base installée avec le système d’exploitation, les exécutables du système de gestion de base de données (SGBD) et les exécutables SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-256">Therefore, we expect SAP systems running in Azure Virtual Machines have the base VM (or disk) installed with the operating system, database management system executables, and SAP executables.</span></span> <span data-ttu-id="07e4c-257">Les fichiers de données et les journaux du SGBD sont stockés dans le stockage Azure (Standard ou Stockage Premium) dans des fichiers de disques durs virtuels distincts et attachés en tant que disques logiques à la machine virtuelle image du système d’exploitation Azure d’origine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-257">The DBMS data and log files are stored in Azure Storage (Standard or Premium Storage) in separate disks and attached as logical disks to the original Azure operating system image VM.</span></span> 

<span data-ttu-id="07e4c-258">Selon que vous tirez parti du stockage Azure Standard ou du Stockage Premium (par exemple, en utilisant les machines virtuelles de la série DS ou de la série GS), il existe d’autres quotas dans Azure qui sont expliqués [ici (pour Linux)][virtual-machines-sizes-linux] et [ici (pour Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="07e4c-258">Dependent on leveraging Azure Standard or Premium Storage (for example by using the DS-series or GS-series VMs) there are other quotas in Azure, which are documented [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span> <span data-ttu-id="07e4c-259">Lors de la planification des disques, vous devez trouver le meilleur compromis entre les quotas pour les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-259">When planning your disk layout, you need to find the best balance of the quotas for the following items:</span></span>

* <span data-ttu-id="07e4c-260">Le nombre de fichiers de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-260">The number of data files.</span></span>
* <span data-ttu-id="07e4c-261">Le nombre de disques qui contiennent les fichiers</span><span class="sxs-lookup"><span data-stu-id="07e4c-261">The number of disks that contain the files.</span></span>
* <span data-ttu-id="07e4c-262">Les quotas d’E/S par seconde pour un même disque</span><span class="sxs-lookup"><span data-stu-id="07e4c-262">The IOPS quotas of a single disk.</span></span>
* <span data-ttu-id="07e4c-263">Le débit de données par disque</span><span class="sxs-lookup"><span data-stu-id="07e4c-263">The data throughput per disk.</span></span>
* <span data-ttu-id="07e4c-264">Le nombre de disques supplémentaires possibles par taille de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="07e4c-264">The number of additional data disks possible per VM size.</span></span>
* <span data-ttu-id="07e4c-265">Le débit de stockage global qu’une machine virtuelle peut offrir.</span><span class="sxs-lookup"><span data-stu-id="07e4c-265">The overall storage throughput a VM can provide.</span></span>

<span data-ttu-id="07e4c-266">Azure applique un quota d’E/S par seconde pour chaque disque de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-266">Azure enforces an IOPS quota per data disk.</span></span> <span data-ttu-id="07e4c-267">Ces quotas sont différents selon que les disques sont hébergés dans le stockage Azure Standard ou le Stockage Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-267">These quotas are different for disks hosted on Azure Standard Storage and Premium Storage.</span></span> <span data-ttu-id="07e4c-268">En outre, les latences d’E/S diffèrent considérablement entre ces deux types de stockage, Stockage Premium offrant de bien meilleures latences d’E/S.</span><span class="sxs-lookup"><span data-stu-id="07e4c-268">I/O latencies are also very different between the two storage types with Premium Storage delivering factors better I/O latencies.</span></span> <span data-ttu-id="07e4c-269">Pour chaque type de machines virtuelles, vous ne pouvez attacher qu’un nombre limité de disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-269">Each of the different VM types has a limited number of data disks that you are able to attach.</span></span> <span data-ttu-id="07e4c-270">Une autre restriction concerne le fait que seuls certains types de machines virtuelles peuvent tirer parti d’Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-270">Another restriction is that only certain VM types can leverage Azure Premium Storage.</span></span> <span data-ttu-id="07e4c-271">Cela signifie que le choix d’un certain type de machines virtuelles peut non seulement être guidé par les besoins en puissance de processeur et en mémoire, mais également par les exigences relatives aux E/S par seconde, à la latence et au débit de disque, auxquelles permettent généralement de répondre l’augmentation du nombre de disques et le Stockage Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-271">This means the decision for a certain VM type might not only be driven by the CPU and memory requirements, but also by the IOPS, latency and disk throughput requirements that usually are scaled with the number of disks or the type of Premium Storage disks.</span></span> <span data-ttu-id="07e4c-272">Avec le Stockage Premium en particulier, la taille d’un disque peut également être dictée par le nombre d’E/S et le débit qui doit être atteint par chaque disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-272">Especially with Premium Storage the size of a disk also might be dictated by the number of IOPS and throughput that needs to be achieved by each disk.</span></span>

<span data-ttu-id="07e4c-273">Étant donné que le taux global d’E/S par seconde, le nombre de disques montés et la taille de la machine virtuelle sont tous liés, une configuration Azure d’un système SAP peut être différente de celle de son déploiement local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-273">The fact that the overall IOPS rate, the number of disks mounted, and the size of the VM are all tied together, might cause an Azure configuration of an SAP system to be different than its on-premises deployment.</span></span> <span data-ttu-id="07e4c-274">Les limites d’E/S par seconde par LUN sont généralement configurables dans les déploiements locaux,</span><span class="sxs-lookup"><span data-stu-id="07e4c-274">The IOPS limits per LUN are usually configurable in on-premises deployments.</span></span> <span data-ttu-id="07e4c-275">alors qu’avec Azure Storage elles sont fixes ou, dans le cas de Premium Storage, elles dépendent du type de disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-275">Whereas with Azure Storage those limits are fixed or as in Premium Storage dependent on the disk type.</span></span> <span data-ttu-id="07e4c-276">Avec des déploiements locaux, nous voyons des configurations client de serveurs de base de données qui utilisent de nombreux volumes différents pour des exécutables spéciaux tels que SAP et le SGBD, ou des volumes spéciaux pour les bases de données ou les espaces de table temporaires.</span><span class="sxs-lookup"><span data-stu-id="07e4c-276">So with on-premises deployments we see customer configurations of database servers that are using many different volumes for special executables like SAP and the DBMS or special volumes for temporary databases or table spaces.</span></span> <span data-ttu-id="07e4c-277">La migration d’un système local de ce type vers Azure peut donner lieu à une perte de bande passante d’E/S par seconde en gaspillant un disque pour des exécutables ou des bases de données qui n’effectuent pas un grand nombre d’E/S par seconde, voire aucune.</span><span class="sxs-lookup"><span data-stu-id="07e4c-277">When such an on-premises system is moved to Azure, it might lead to a waste of potential IOPS bandwidth by wasting a disk for executables or databases, which do not perform any or not a lot of IOPS.</span></span> <span data-ttu-id="07e4c-278">Dans les machines virtuelles Azure, nous recommandons donc si possible d’installer le SGBD et les exécutables SAP sur le disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-278">Therefore, in Azure VMs we recommend that the DBMS and SAP executables be installed on the OS disk if possible.</span></span>

<span data-ttu-id="07e4c-279">L’emplacement des fichiers de base de données et des fichiers journaux, ainsi que le type de stockage Azure utilisé, doivent être dictés par les besoins en E/S par seconde, en latence et en débit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-279">The placement of the database files and log files and the type of Azure Storage used, should be defined by IOPS, latency, and throughput requirements.</span></span> <span data-ttu-id="07e4c-280">Afin de bénéficier d’un nombre suffisant d’E/S par seconde pour le journal des transactions, il se peut que vous soyez obligé d’utiliser plusieurs disques pour le fichier du journal des transactions ou d’utiliser un plus grand disque Stockage Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-280">In order to have enough IOPS for the transaction log, you might be forced to leverage multiple disks for the transaction log file or use a larger Premium Storage disk.</span></span> <span data-ttu-id="07e4c-281">Dans ce cas, vous devez créer un RAID logiciel (par exemple, un pool de stockage Windows pour Windows ou MDADM et LVM (Logical Volume Manager) pour Linux) avec les disques qui contiennent le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="07e4c-281">In such a case one would build a software RAID (for example Windows Storage Pool for Windows or MDADM and LVM (Logical Volume Manager) for Linux) with the disks, which contain the transaction log.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="07e4c-283">Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-283">Windows</span></span>
> 
> <span data-ttu-id="07e4c-284">Dans une machine virtuelle Azure, le lecteur D:\ est un lecteur non persistant soutenu par des disques locaux présents sur le nœud de calcul Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-284">Drive D:\ in an Azure VM is a non-persisted drive, which is backed by some local disks on the Azure compute node.</span></span> <span data-ttu-id="07e4c-285">Comme il est non persistant, cela signifie que toutes les modifications apportées au contenu sur le lecteur D:\ sont perdues lors du redémarrage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-285">Because it is non-persisted, this means that any changes made to the content on the D:\ drive is lost when the VM is rebooted.</span></span> <span data-ttu-id="07e4c-286">Par modifications, nous entendons les fichiers enregistrés, les répertoires créés, les applications installées, etc.</span><span class="sxs-lookup"><span data-stu-id="07e4c-286">By "any changes", we mean saved files, directories created, applications installed, etc.</span></span>
> 
> ![Linux][Logo_Linux] <span data-ttu-id="07e4c-288">Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-288">Linux</span></span>
> 
> <span data-ttu-id="07e4c-289">Les machines virtuelles Azure Linux montent automatiquement un lecteur à l’emplacement /mnt/resource. Il s’agit d’un lecteur non persistant soutenu par des disques locaux présents sur le nœud de calcul Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-289">Linux Azure VMs automatically mount a drive at /mnt/resource that is a non-persisted drive backed by local disks on the Azure compute node.</span></span> <span data-ttu-id="07e4c-290">Comme il est non persistant, toutes les modifications apportées au contenu de l’emplacement /mnt/resource seront perdues si vous redémarrez la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-290">Because it is non-persisted, this means that any changes made to content in /mnt/resource are lost when the VM is rebooted.</span></span> <span data-ttu-id="07e4c-291">Par modifications, nous entendons les fichiers enregistrés, les répertoires créés, les applications installées, etc.</span><span class="sxs-lookup"><span data-stu-id="07e4c-291">By any changes, we mean files saved, directories created, applications installed, etc.</span></span>
> 
> 

- - -
<span data-ttu-id="07e4c-292">Selon la série de machines virtuelles Azure, les disques locaux du nœud de calcul affichent des performances différentes qui peuvent être classées de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="07e4c-292">Dependent on the Azure VM-series, the local disks on the compute node show different performance, which can be categorized like:</span></span>

* <span data-ttu-id="07e4c-293">A0-A7 : performances très limitées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-293">A0-A7: Very limited performance.</span></span> <span data-ttu-id="07e4c-294">Non utilisables pour autre chose que le fichier d’échange Windows.</span><span class="sxs-lookup"><span data-stu-id="07e4c-294">Not usable for anything beyond windows page file</span></span>
* <span data-ttu-id="07e4c-295">A8-A11 : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="07e4c-295">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="07e4c-296">Série D : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="07e4c-296">D-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="07e4c-297">Série DS : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="07e4c-297">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="07e4c-298">Série G : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="07e4c-298">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="07e4c-299">Série GS : très bonnes caractéristiques de performances, avec quelque 10 000 E/S par seconde et un débit supérieur à 1 Go/s.</span><span class="sxs-lookup"><span data-stu-id="07e4c-299">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>

<span data-ttu-id="07e4c-300">Les chiffres donnés ci-dessus s’appliquent aux types de machines virtuelles certifiés pour SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-300">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="07e4c-301">Les séries de machines virtuelles présentant un nombre d’E/S par seconde et un débit excellents sont adaptées à certaines fonctionnalités de SGBD, telles que tempdb ou l’espace de table temporaire.</span><span class="sxs-lookup"><span data-stu-id="07e4c-301">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features, like tempdb or temporary table space.</span></span>

### <span data-ttu-id="07e4c-302"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Mise en cache pour les machines virtuelles et les disques de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-302"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching for VMs and data disks</span></span>
<span data-ttu-id="07e4c-303">Lorsque nous créons des disques de données dans le portail ou montons les disques chargés sur des machines virtuelles, nous pouvons choisir de mettre ou non en cache le trafic d’E/S entre la machine virtuelle et les disques situés dans le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-303">When we create data disks through the portal or when we mount uploaded disks to VMs, we can choose whether the I/O traffic between the VM and those disks located in Azure storage are cached.</span></span> <span data-ttu-id="07e4c-304">Azure Standard et Premium Storage font appel à deux technologies différentes pour ce type de mise en cache.</span><span class="sxs-lookup"><span data-stu-id="07e4c-304">Azure Standard and Premium Storage use two different technologies for this type of cache.</span></span> <span data-ttu-id="07e4c-305">Dans les deux cas, la mise en cache est soutenue par des disques sur les mêmes lecteurs que ceux utilisés par le disque temporaire (D:\ dans Windows ou/mnt/resource dans Linux) de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-305">In both cases, the cache itself would be disk backed on the same drives used by the temporary disk (D:\ on Windows or /mnt/resource on Linux) of the VM.</span></span>

<span data-ttu-id="07e4c-306">Pour le stockage Azure Standard, les types de mise en cache possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-306">For Azure Standard Storage the possible cache types are:</span></span>

* <span data-ttu-id="07e4c-307">Aucune mise en cache</span><span class="sxs-lookup"><span data-stu-id="07e4c-307">No caching</span></span>
* <span data-ttu-id="07e4c-308">Mise en cache en lecture</span><span class="sxs-lookup"><span data-stu-id="07e4c-308">Read caching</span></span>
* <span data-ttu-id="07e4c-309">Mise en cache en lecture et en écriture</span><span class="sxs-lookup"><span data-stu-id="07e4c-309">Read and Write caching</span></span>

<span data-ttu-id="07e4c-310">Pour obtenir des performances homogènes et déterministes, vous devez définir la mise en cache dans le stockage Azure Standard de tous les disques contenant **les fichiers de données SGBD, les fichiers journaux et l’espace de table sur AUCUNE**.</span><span class="sxs-lookup"><span data-stu-id="07e4c-310">In order to get consistent and deterministic performance, you should set the caching on Azure Standard Storage for all disks containing **DBMS-related data files, log files, and table space to 'NONE'**.</span></span> <span data-ttu-id="07e4c-311">La valeur par défaut peut être conservée pour la mise en cache de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-311">The caching of the VM can remain with the default.</span></span>

<span data-ttu-id="07e4c-312">Pour le stockage Azure Premium Storage, les options de mise en cache suivantes sont disponibles :</span><span class="sxs-lookup"><span data-stu-id="07e4c-312">For Azure Premium Storage the following caching options exist:</span></span>

* <span data-ttu-id="07e4c-313">Aucune mise en cache</span><span class="sxs-lookup"><span data-stu-id="07e4c-313">No caching</span></span>
* <span data-ttu-id="07e4c-314">Mise en cache en lecture</span><span class="sxs-lookup"><span data-stu-id="07e4c-314">Read caching</span></span>

<span data-ttu-id="07e4c-315">Pour le stockage Premium Azure, il est recommandé d’utiliser la **mise en cache de lecture pour les fichiers de données** de la base de données SAP et de choisir l’option avec laquelle **aucune mise en cache n’est effectuée pour les disques des fichiers journaux**.</span><span class="sxs-lookup"><span data-stu-id="07e4c-315">Recommendation for Azure Premium Storage is to leverage **Read caching for data files** of the SAP database and chose **No caching for the disks of log file(s)**.</span></span>

### <span data-ttu-id="07e4c-316"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>RAID logiciel</span><span class="sxs-lookup"><span data-stu-id="07e4c-316"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>Software RAID</span></span>
<span data-ttu-id="07e4c-317">Comme nous l’avons déjà indiqué plus haut, vous devez équilibrer le nombre d’E/S par seconde nécessaire pour les fichiers de base de données en fonction du nombre de disques configurables et du nombre maximal d’E/S par seconde qu’une machine virtuelle offre par disque ou type de disque Stockage Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-317">As already stated above, you need to balance the number of IOPS needed for the database files across the number of disks you can configure and the maximum IOPS an Azure VM provides per disk or Premium Storage disk type.</span></span> <span data-ttu-id="07e4c-318">Le moyen le plus simple pour gérer la charge d’E/S sur les disques consiste à créer un RAID logiciel avec les différents disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-318">Easiest way to deal with the IOPS load over disks is to build a software RAID over the different disks.</span></span> <span data-ttu-id="07e4c-319">Ensuite, placez un certain nombre de fichiers de données du SGBD SAP sur les LUN issus du RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="07e4c-319">Then place a number of data files of the SAP DBMS on the LUNS carved out of the software RAID.</span></span> <span data-ttu-id="07e4c-320">En fonction des exigences, il peut être préférable d’utiliser le stockage Premium. En effet, deux des trois disques Stockage Premium offrent un quota d’E/S par seconde supérieur à celui des disques basés sur le stockage Standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-320">Dependent on the requirements you might want to consider the usage of Premium Storage as well since two of the three different Premium Storage disks provide higher IOPS quota than disks based on Standard Storage.</span></span> <span data-ttu-id="07e4c-321">De plus, Azure Premium Storage garantit une latence d’E/S nettement inférieure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-321">Besides the significant better I/O latency provided by Azure Premium Storage.</span></span> 

<span data-ttu-id="07e4c-322">Il en va de même pour le journal des transactions des différents systèmes de SGBD.</span><span class="sxs-lookup"><span data-stu-id="07e4c-322">Same applies to the transaction log of the different DBMS systems.</span></span> <span data-ttu-id="07e4c-323">Le fait qu’un grand nombre d’entre eux ajoutent d’autres fichiers Tlog n’aide en rien, car les systèmes de SGBD n’écrivent que dans un seul fichier à la fois.</span><span class="sxs-lookup"><span data-stu-id="07e4c-323">With many of them just adding more Tlog files does not help since the DBMS systems write into one of the files at a time only.</span></span> <span data-ttu-id="07e4c-324">Si des taux d’E/S par seconde supérieurs à ce qu’un disque basé sur le stockage Standard peut offrir sont nécessaires, vous pouvez agréger plusieurs disques Standard ou utiliser un type de disque Stockage Premium plus grand qui, en plus d’un taux d’E/S par seconde supérieur, assure une latence plusieurs fois inférieure pour l’écriture des E/S dans le journal des transactions.</span><span class="sxs-lookup"><span data-stu-id="07e4c-324">If higher IOPS rates are needed than a single Standard Storage based disk can deliver, you can stripe over multiple Standard Storage disks or you can use a larger Premium Storage disk type that beyond higher IOPS rates also delivers factors lower latency for the write I/Os into the transaction log.</span></span>

<span data-ttu-id="07e4c-325">Les situations rencontrées dans les déploiements Azure qui justifient l’utilisation d’un RAID logiciel sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-325">Situations experienced in Azure deployments, which would favor using a software RAID are:</span></span>

* <span data-ttu-id="07e4c-326">Le journal des transactions et le journal de rétablissement nécessitent plus d’E/S par seconde que ce qu’un disque Azure unique peut offrir.</span><span class="sxs-lookup"><span data-stu-id="07e4c-326">Transaction Log/Redo Log require more IOPS than Azure provides for a single disk.</span></span> <span data-ttu-id="07e4c-327">Comme indiqué ci-dessus, vous pouvez résoudre ce problème en créant un LUN sur plusieurs disques à l’aide d’un RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="07e4c-327">As mentioned above this can be solved by building a LUN over multiple disks using a software RAID.</span></span>
* <span data-ttu-id="07e4c-328">La charge de travail d’E/S est inégale sur les différents fichiers de données de la base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-328">Uneven I/O workload distribution over the different data files of the SAP database.</span></span> <span data-ttu-id="07e4c-329">Un fichier de données peut par exemple atteindre très souvent le quota,</span><span class="sxs-lookup"><span data-stu-id="07e4c-329">In such cases one can experience one data file hitting the quota rather often.</span></span> <span data-ttu-id="07e4c-330">tandis que les autres fichiers de données n’approchent même pas du quota d’E/S par seconde d’un disque unique.</span><span class="sxs-lookup"><span data-stu-id="07e4c-330">Whereas other data files are not even getting close to the IOPS quota of a single disk.</span></span> <span data-ttu-id="07e4c-331">Dans ce cas, la solution la plus simple consiste à créer un LUN sur plusieurs disques à l’aide d’un RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="07e4c-331">In such cases the easiest solution is to build one LUN over multiple disks using a software RAID.</span></span> 
* <span data-ttu-id="07e4c-332">Vous ne connaissez pas la charge de travail d’E/S exacte par fichier de données et avez seulement une idée grossière de la charge de travail d’E/S globale requise pour le SGBD.</span><span class="sxs-lookup"><span data-stu-id="07e4c-332">You don’t know what the exact I/O workload per data file is and only roughly know what the overall IOPS workload against the DBMS is.</span></span> <span data-ttu-id="07e4c-333">Le plus simple consiste à créer un LUN à l’aide d’un RAID logiciel.</span><span class="sxs-lookup"><span data-stu-id="07e4c-333">Easiest to do is to build one LUN with the help of a software RAID.</span></span> <span data-ttu-id="07e4c-334">La somme des quotas des disques formant ce LUN devrait satisfaire le taux d’E/S par seconde connu.</span><span class="sxs-lookup"><span data-stu-id="07e4c-334">The sum of quotas of multiple disks behind this LUN should then fulfill the known IOPS rate.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="07e4c-336">Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-336">Windows</span></span>
> 
> <span data-ttu-id="07e4c-337">Il est conseillé d’utiliser des espaces de stockage Windows si vous exécutez Windows Server 2012 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-337">We recommend using Windows Storage Spaces if you run on Windows Server 2012 or higher.</span></span> <span data-ttu-id="07e4c-338">Cette méthode est plus efficace que l’agrégation de versions antérieures de Windows.</span><span class="sxs-lookup"><span data-stu-id="07e4c-338">It is more efficient than Windows Striping of earlier Windows versions.</span></span> <span data-ttu-id="07e4c-339">Vous devrez peut-être créer les pools de stockage et les espaces de stockage Windows à l’aide de commandes PowerShell lorsque vous utilisez Windows Server 2012 comme système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-339">You might need to create the Windows Storage Pools and Storage Spaces by PowerShell commands when using Windows Server 2012 as Operating System.</span></span> <span data-ttu-id="07e4c-340">Les commandes PowerShell sont disponibles sur la page <https://technet.microsoft.com/library/jj851254.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-340">The PowerShell commands can be found here <https://technet.microsoft.com/library/jj851254.aspx></span></span>
> 
> ![Linux][Logo_Linux] <span data-ttu-id="07e4c-342">Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-342">Linux</span></span>
> 
> <span data-ttu-id="07e4c-343">Seuls MDADM et LVM (Logical Volume Manager) sont pris en charge pour créer un RAID logiciel sur Linux.</span><span class="sxs-lookup"><span data-stu-id="07e4c-343">Only MDADM and LVM (Logical Volume Manager) are supported to build a software RAID on Linux.</span></span> <span data-ttu-id="07e4c-344">Pour plus d’informations, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-344">For more information, read the following articles:</span></span>
> 
> * <span data-ttu-id="07e4c-345">[Configuration d’un RAID logiciel sur Linux][virtual-machines-linux-configure-raid] (pour MDADM)</span><span class="sxs-lookup"><span data-stu-id="07e4c-345">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid] (for MDADM)</span></span>
> * <span data-ttu-id="07e4c-346">[Configurer LVM sur une machine virtuelle Linux dans Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="07e4c-346">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> 
> 

- - -
<span data-ttu-id="07e4c-347">Voici les points à noter concernant l’utilisation de séries de machines virtuelles compatibles avec le Stockage Premium Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-347">Considerations for leveraging VM-series, which are able to work with Azure Premium Storage usually are:</span></span>

* <span data-ttu-id="07e4c-348">Exigence de latences d’E/S proches de celles offertes par les périphériques SAN/NAS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-348">Demands for I/O latencies that are close to what SAN/NAS devices deliver.</span></span>
* <span data-ttu-id="07e4c-349">Exigence d’une latence d’E/S plusieurs fois inférieure à celle offerte par le stockage Azure Standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-349">Demand for factors better I/O latency than Azure Standard Storage can deliver.</span></span>
* <span data-ttu-id="07e4c-350">Nombre d’E/S par seconde par machine virtuelle plus élevé que ce que permettent d’atteindre plusieurs disques Standard avec un certain type de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-350">Higher IOPS per VM than what could be achieved with multiple Standard Storage disks against a certain VM type.</span></span>

<span data-ttu-id="07e4c-351">Comme le stockage Azure sous-jacent réplique chaque disque sur au moins trois nœuds de stockage, une simple agrégation RAID 0 peut être utilisée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-351">Since the underlying Azure Storage replicates each disk to at least three storage nodes, simple RAID 0 striping can be used.</span></span> <span data-ttu-id="07e4c-352">Il est inutile d’utiliser RAID 5 ou RAID 1.</span><span class="sxs-lookup"><span data-stu-id="07e4c-352">There is no need to implement RAID5 or RAID1.</span></span>

### <span data-ttu-id="07e4c-353"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="07e4c-353"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span></span>
<span data-ttu-id="07e4c-354">Le Stockage Microsoft Azure stocke la machine virtuelle de base (avec le système d’exploitation) et les disques ou objets blob sur au moins trois nœuds de stockage distincts.</span><span class="sxs-lookup"><span data-stu-id="07e4c-354">Microsoft Azure Storage stores the base VM (with OS) and disks or BLOBs to at least three separate storage nodes.</span></span> <span data-ttu-id="07e4c-355">Lors de la création d’un compte de stockage ou d’un disque managé, plusieurs options de protection sont proposées :</span><span class="sxs-lookup"><span data-stu-id="07e4c-355">When creating a storage account or managed disk, there is a choice of protection as shown here:</span></span>

![Géoréplication activée pour le compte Azure Storage][dbms-guide-figure-100]

<span data-ttu-id="07e4c-357">La réplication locale Azure Storage (localement redondante) fournit plusieurs niveaux de protection contre la perte de données en cas de défaillance de l’infrastructure que peu de clients pourraient se permettre de déployer.</span><span class="sxs-lookup"><span data-stu-id="07e4c-357">Azure Storage Local Replication (Locally Redundant) provides levels of protection against data loss due to infrastructure failure that few customers could afford to deploy.</span></span> <span data-ttu-id="07e4c-358">Comme illustré ci-dessus, il existe quatre options différentes, avec une cinquième option qui est une variante de l’une des trois premières.</span><span class="sxs-lookup"><span data-stu-id="07e4c-358">As shown above there are four different options with a fifth being a variation of one of the first three.</span></span> <span data-ttu-id="07e4c-359">En les examinant de plus près, nous pouvons distinguer :</span><span class="sxs-lookup"><span data-stu-id="07e4c-359">Looking closer at them we can distinguish:</span></span>

* <span data-ttu-id="07e4c-360">**Stockage localement redondant Premium (LRS)**: Azure Premium Storage offre une prise en charge très performante et à faible latence des disques pour les machines virtuelles exécutant des charges de travail qui utilisent beaucoup d’E/S.</span><span class="sxs-lookup"><span data-stu-id="07e4c-360">**Premium Locally Redundant Storage (LRS)**: Azure Premium Storage delivers high-performance, low-latency disk support for virtual machines running I/O-intensive workloads.</span></span> <span data-ttu-id="07e4c-361">Trois réplicas des données sont créés au sein du même centre de données d’une région Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-361">There are three replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="07e4c-362">Les copies se trouvent dans des domaines d’erreur et de mise à niveau distincts (pour plus d’informations sur ces concepts, consultez [ce chapitre][planning-guide-3.2] du [Guide de planification][planning-guide]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-362">The copies are in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="07e4c-363">Dans le cas où une réplica des données devient hors service en raison d’une défaillance de nœud de stockage ou de disque, un nouveau réplica est généré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-363">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="07e4c-364">**Stockage localement redondant (LRS)** : trois réplicas des données sont créés au sein du même centre de données d’une région Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-364">**Locally Redundant Storage (LRS)**: In this case, there are three replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="07e4c-365">Les copies se trouvent dans des domaines d’erreur et de mise à niveau distincts (pour plus d’informations sur ces concepts, consultez [ce chapitre][planning-guide-3.2] du [Guide de planification][planning-guide]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-365">The copies are in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="07e4c-366">Dans le cas où une réplica des données devient hors service en raison d’une défaillance de nœud de stockage ou de disque, un nouveau réplica est généré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-366">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span> 
* <span data-ttu-id="07e4c-367">**Stockage géo-redondant (GRS)** : dans ce cas, trois réplicas supplémentaires des données sont envoyés par réplication asynchrone dans une autre région Azure située la plupart du temps dans la même région géographique (par exemple, Europe du Nord ou Europe de l’Ouest).</span><span class="sxs-lookup"><span data-stu-id="07e4c-367">**Geo Redundant Storage (GRS)**: In this case, there is an asynchronous replication that feeds an additional three replicas of the data in another Azure Region, which is in most of the cases in the same geographical region (like North Europe and West Europe).</span></span> <span data-ttu-id="07e4c-368">Cela crée trois réplicas supplémentaires, donc six au total.</span><span class="sxs-lookup"><span data-stu-id="07e4c-368">This results in three additional replicas, so that there are six replicas in sum.</span></span> <span data-ttu-id="07e4c-369">Une variante de cette option permet d’utiliser les données stockées dans la région Azure géo-répliquée à des fins de lecture (Stockage géo-redondant avec accès en lecture).</span><span class="sxs-lookup"><span data-stu-id="07e4c-369">A variation of this is an addition where the data in the geo replicated Azure region can be used for read purposes (Read-Access Geo-Redundant).</span></span>
* <span data-ttu-id="07e4c-370">**Stockage redondant dans une zone (ZRS)** : dans ce cas, les trois réplicas des données restent dans la même région Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-370">**Zone Redundant Storage (ZRS)**: In this case, the three replicas of the data remain in the same Azure Region.</span></span> <span data-ttu-id="07e4c-371">Comme l’explique [ce][planning-guide-3.1] chapitre du [Guide de planification][planning-guide], une région Azure peut correspondre à plusieurs centres de données situés à proximité les uns des autres.</span><span class="sxs-lookup"><span data-stu-id="07e4c-371">As explained in [this][planning-guide-3.1] chapter of the [Planning Guide][planning-guide] an Azure region can be a number of datacenters in close proximity.</span></span> <span data-ttu-id="07e4c-372">Avec le stockage localement redondant, les réplicas seraient réparties dans les différents centres de données qui forment une région Azure unique.</span><span class="sxs-lookup"><span data-stu-id="07e4c-372">In the case of LRS the replicas would be distributed over the different datacenters that make one Azure region.</span></span>

<span data-ttu-id="07e4c-373">Des informations supplémentaires sont disponibles [ici][storage-redundancy].</span><span class="sxs-lookup"><span data-stu-id="07e4c-373">More information can be found [here][storage-redundancy].</span></span>

> [!NOTE]
> <span data-ttu-id="07e4c-374">Pour les déploiements SGBD, l’utilisation du stockage géo-redondant est déconseillée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-374">For DBMS deployments, the usage of Geo Redundant Storage is not recommended</span></span>
> 
> <span data-ttu-id="07e4c-375">La géo-réplication Azure Storage est asynchrone.</span><span class="sxs-lookup"><span data-stu-id="07e4c-375">Azure Storage Geo-Replication is asynchronous.</span></span> <span data-ttu-id="07e4c-376">Les disques montés sur une même machine virtuelle ne sont pas répliqués simultanément.</span><span class="sxs-lookup"><span data-stu-id="07e4c-376">Replication of individual disks mounted to a single VM are not synchronized in lock step.</span></span> <span data-ttu-id="07e4c-377">Par conséquent, il ne convient pas de répliquer les fichiers SGBD qui sont répartis sur différents disques ou déployés sur un RAID logiciel basé sur plusieurs disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-377">Therefore, it is not suitable to replicate DBMS files that are distributed over different disks or deployed against a software RAID based on multiple disks.</span></span> <span data-ttu-id="07e4c-378">Les logiciels de SGBD nécessitent que le stockage sur disque persistant soit synchronisé précisément sur les différents LUN, et disques ou broches sous-jacents.</span><span class="sxs-lookup"><span data-stu-id="07e4c-378">DBMS software requires that the persistent disk storage is precisely synchronized across different LUNs and underlying disks/spindles.</span></span> <span data-ttu-id="07e4c-379">Les logiciels de SGBD font appel à différents mécanismes pour ordonner les activités d’écriture d’E/S. Un logiciel SGBD signale que le stockage sur disque ciblé par la réplication est endommagé si les activités varient ne serait-ce que de quelques millisecondes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-379">DBMS software uses various mechanisms to sequence IO write activities and a DBMS reports that the disk storage targeted by the replication is corrupted if these vary even by a few milliseconds.</span></span> <span data-ttu-id="07e4c-380">Par conséquent, si vous avez vraiment besoin d’une configuration de base de données avec une base de données répartie sur plusieurs disques géorépliqués, cette réplication doit être effectuée à l’aide des fonctionnalités de la base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-380">Hence if one really wants a database configuration with a database stretched across multiple disks geo-replicated, such a replication needs to be performed with database means and functionality.</span></span> <span data-ttu-id="07e4c-381">Vous ne devez pas vous appuyer sur la géo-réplication Azure Storage pour accomplir cette tâche.</span><span class="sxs-lookup"><span data-stu-id="07e4c-381">One should not rely on Azure Storage Geo-Replication to perform this job.</span></span> 
> 
> <span data-ttu-id="07e4c-382">Le problème est plus simple à expliquer avec un exemple de système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-382">The problem is simplest to explain with an example system.</span></span> <span data-ttu-id="07e4c-383">Supposons que vous disposiez d’un système SAP chargé dans Azure qui utilise huit disques contenant les fichiers de données du SGBD, et un disque contenant le fichier journal de transactions.</span><span class="sxs-lookup"><span data-stu-id="07e4c-383">Let’s assume you have an SAP system uploaded into Azure, which has eight disks containing data files of the DBMS plus one disk containing the transaction log file.</span></span> <span data-ttu-id="07e4c-384">Sur chacun de ces neuf disques, les données seront écrites à l’aide d’une même méthode dépendant du SGBD, que les données soient écrites dans les fichiers de données ou le fichier journal de transactions.</span><span class="sxs-lookup"><span data-stu-id="07e4c-384">Each one of these nine disks have data written to them in a consistent method according to the DBMS, whether the data is being written to the data or transaction log files.</span></span>
> 
> <span data-ttu-id="07e4c-385">Afin de géorépliquer correctement les données et de conserver une image de base de données cohérente, il faudrait répliquer le contenu des neuf disques dans l’ordre exact où les opérations d’E/S y ont été exécutées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-385">In order to properly geo-replicate the data and maintain a consistent database image, the content of all nine disks would have to be geo-replicated in the exact order the I/O operations were executed against the nine different disks.</span></span> <span data-ttu-id="07e4c-386">Toutefois, la géoréplication du stockage Azure ne permet pas de déclarer des dépendances entre différents disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-386">However, Azure Storage geo-replication does not allow to declare dependencies between disks.</span></span> <span data-ttu-id="07e4c-387">Cela signifie que la géoréplication du stockage Microsoft Azure ignore que le contenu de ces neuf disques est lié, et que les modifications de données ne sont cohérentes que lorsque la réplication est effectuée dans l’ordre où les opérations d’E/S ont eu lieu sur l’ensemble des neuf disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-387">This means Microsoft Azure Storage geo-replication doesn’t know about the fact that the contents in these nine different disks are related to each other and that the data changes are consistent only when replicating in the order the I/O operations happened across all the nine disks.</span></span>
> 
> <span data-ttu-id="07e4c-388">Outre la forte probabilité que les images géo-répliquées dans ce scénario ne produisent pas une image de base de données cohérente, le stockage géo-redondant peut également avoir un impact très négatif sur les performances.</span><span class="sxs-lookup"><span data-stu-id="07e4c-388">Besides chances being high that the geo-replicated images in the scenario do not provide a consistent database image, there also is a performance penalty that shows up with geo redundant storage that can severely impact performance.</span></span> <span data-ttu-id="07e4c-389">En résumé, n’utilisez pas ce type de redondance de stockage pour les charges de travail du type SGBD.</span><span class="sxs-lookup"><span data-stu-id="07e4c-389">In summary, do not use this type of storage redundancy for DBMS type workloads.</span></span>
> 
> 

#### <a name="mapping-vhds-into-azure-virtual-machine-service-storage-accounts"></a><span data-ttu-id="07e4c-390">Mappage de disques durs virtuels à des comptes de stockage du service Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="07e4c-390">Mapping VHDs into Azure Virtual Machine Service Storage Accounts</span></span>
<span data-ttu-id="07e4c-391">Ce chapitre s’applique uniquement aux comptes de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-391">This chapter only applies to Azure Storage Accounts.</span></span> <span data-ttu-id="07e4c-392">Si vous prévoyez d’utiliser des disques managés, les limites indiquées dans ce chapitre ne vous concernent pas.</span><span class="sxs-lookup"><span data-stu-id="07e4c-392">If you plan to use Managed Disks, the limitations mentioned in this chapter do not apply.</span></span> <span data-ttu-id="07e4c-393">Pour plus d’informations sur les disques managés, lisez le chapitre [Disques managés][dbms-guide-managed-disks] de ce guide.</span><span class="sxs-lookup"><span data-stu-id="07e4c-393">For more information about Managed Disks, read chapter [Managed Disks][dbms-guide-managed-disks] of this guide.</span></span>

<span data-ttu-id="07e4c-394">Un compte de stockage Azure est non seulement le fait d’un administrateur, mais également l’objet de limitations.</span><span class="sxs-lookup"><span data-stu-id="07e4c-394">An Azure Storage Account is not only an administrative construct, but also a subject of limitations.</span></span> <span data-ttu-id="07e4c-395">Les limitations varient selon qu’il s’agit d’un compte de stockage Azure Standard ou Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-395">Whereas the limitations vary on whether we talk about an Azure Standard Storage Account or an Azure Premium Storage Account.</span></span> <span data-ttu-id="07e4c-396">Les capacités et limitations exactes sont répertoriées [ici][storage-scalability-targets]</span><span class="sxs-lookup"><span data-stu-id="07e4c-396">The exact capabilities and limitations are listed [here][storage-scalability-targets]</span></span>

<span data-ttu-id="07e4c-397">Concernant le stockage Azure Standard, il est important de noter qu’il y a une limite d’E/S par seconde par compte de stockage (ligne contenant « Taux de demandes total » dans [l’article][storage-scalability-targets]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-397">So for Azure Standard Storage it is important to note there is a limit on the IOPS per storage account (Row containing ‘Total Request Rate’ in [the article][storage-scalability-targets]).</span></span> <span data-ttu-id="07e4c-398">De plus, il y a une limite initiale de 100 comptes de stockage par abonnement Azure (depuis juillet 2015).</span><span class="sxs-lookup"><span data-stu-id="07e4c-398">In addition, there is an initial limit of 100 Storage Accounts per Azure subscription (as of July 2015).</span></span> <span data-ttu-id="07e4c-399">Par conséquent, il est recommandé d’équilibrer les E/S par seconde des machines virtuelles entre plusieurs comptes de stockage lorsque le stockage Azure Standard est utilisé,</span><span class="sxs-lookup"><span data-stu-id="07e4c-399">Therefore, it is recommended to balance IOPS of VMs between multiple storage accounts when using Azure Standard Storage.</span></span> <span data-ttu-id="07e4c-400">alors que dans l’idéal, une machine virtuelle unique doit si possible utiliser un seul compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-400">Whereas a single VM ideally uses one storage account if possible.</span></span> <span data-ttu-id="07e4c-401">Dans le cas de déploiements SGBD où chaque disque dur virtuel hébergé dans le stockage Azure Standard peut atteindre sa limite de quota, vous devez donc déployer seulement 30 à 40 disques durs virtuels par compte de stockage Azure faisant appel au stockage Azure Standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-401">So if we talk about DBMS deployments where each VHD that is hosted on Azure Standard Storage could reach its quota limit, you should only deploy 30-40 VHDs per Azure Storage Account that uses Azure Standard Storage.</span></span> <span data-ttu-id="07e4c-402">Par contre, si vous tirez parti du stockage Azure Premium Storage et souhaitez stocker d’importants volumes de base de données, il se peut que le nombre d’E/S par seconde soit approprié.</span><span class="sxs-lookup"><span data-stu-id="07e4c-402">On the other hand, if you leverage Azure Premium Storage and want to store large database volumes, you might be fine in terms of IOPS.</span></span> <span data-ttu-id="07e4c-403">Cependant, un compte de stockage Azure Premium Storage est beaucoup plus restrictif en matière de volume de données qu’un compte de stockage Azure Standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-403">But an Azure Premium Storage Account is way more restrictive in data volume than an Azure Standard Storage Account.</span></span> <span data-ttu-id="07e4c-404">Vous ne pouvez ainsi déployer qu’un nombre limité de disques durs virtuels au sein d’un compte de stockage Azure Premium Storage avant d’atteindre la limite de volume de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-404">As a result, you can only deploy a limited number of VHDs within an Azure Premium Storage Account before hitting the data volume limit.</span></span> <span data-ttu-id="07e4c-405">En définitive, un compte de stockage Azure peut être considéré comme un « SAN virtuel » dont les E/S par seconde et/ou la capacité sont limités.</span><span class="sxs-lookup"><span data-stu-id="07e4c-405">At the end, think of an Azure Storage Account as a “Virtual SAN” that has limited capabilities in IOPS and/or capacity.</span></span> <span data-ttu-id="07e4c-406">Comme pour les déploiements locaux, il reste à définir la disposition des disques durs virtuels des différents systèmes SAP sur les différents « périphériques SAN imaginaires » ou comptes de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-406">As a result, the task remains, as in on-premises deployments, to define the layout of the VHDs of the different SAP systems over the different ‘imaginary SAN devices’ or Azure Storage Accounts.</span></span>

<span data-ttu-id="07e4c-407">Pour le stockage Azure Standard, nous vous recommandons, dans la mesure du possible, de ne pas présenter le stockage de différents comptes de stockage à une même machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-407">For Azure Standard Storage, it is not recommended to present storage from different storage accounts to a single VM if possible.</span></span>

<span data-ttu-id="07e4c-408">Avec la série DS ou GS des machines virtuelles Azure, il est possible de monter des disques durs virtuels issus de comptes de stockage Azure Standard et Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-408">When using the DS or GS-series of Azure VMs, it is possible to mount VHDs out of Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="07e4c-409">Un stockage hétérogène de ce type pourrait être utilisé par exemple pour écrire des sauvegardes dans un stockage Standard soutenu par des disques durs virtuels tout en ayant les fichiers de données et journaux du SGBD dans un stockage Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-409">Use cases like writing backups into Standard Storage backed VHDs and having DBMS data and log files on Premium Storage come to mind where such heterogeneous storage could be leveraged.</span></span> 

<span data-ttu-id="07e4c-410">Selon les déploiements client et les tests, environ 30 à 40 disques durs virtuels contenant les fichiers de données et les fichiers journaux de base de données peuvent être configurés sur un seul compte de stockage Azure Standard avec des performances acceptables.</span><span class="sxs-lookup"><span data-stu-id="07e4c-410">Based on customer deployments and testing around 30 to 40 VHDs containing database data files and log files can be provisioned on a single Azure Standard Storage Account with acceptable performance.</span></span> <span data-ttu-id="07e4c-411">Comme indiqué précédemment, la limitation d’un compte de stockage Azure Premium Storage a des chances d’être le volume de données qu’il peut contenir et non le nombre d’E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-411">As mentioned earlier, the limitation of an Azure Premium Storage Account is likely to be the data capacity it can hold and not IOPS.</span></span>

<span data-ttu-id="07e4c-412">Comme avec les périphériques SAN en local, le partage nécessite une surveillance afin de détecter les goulots d’étranglement sur un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-412">As with SAN devices on-premises, sharing requires some monitoring in order to eventually detect bottlenecks on an Azure Storage Account.</span></span> <span data-ttu-id="07e4c-413">L’extension de surveillance Azure pour SAP et le portail Azure peuvent être utilisés pour détecter les comptes de stockage Azure actifs dont les performances d’E/S ne sont pas optimales.</span><span class="sxs-lookup"><span data-stu-id="07e4c-413">The Azure Monitoring Extension for SAP and the Azure portal are tools that can be used to detect busy Azure Storage Accounts that may be delivering suboptimal IO performance.</span></span>  <span data-ttu-id="07e4c-414">Lorsqu’une telle détection a lieu, il est recommandé de déplacer les machines virtuelles actives vers un autre compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-414">If this situation is detected, it is recommended to move busy VMs to another Azure Storage Account.</span></span> <span data-ttu-id="07e4c-415">Pour savoir comment activer les fonctionnalités de surveillance d’hôte SAP, consultez le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="07e4c-415">Refer to the [Deployment Guide][deployment-guide] for details on how to activate the SAP host monitoring capabilities.</span></span>

<span data-ttu-id="07e4c-416">Un autre article synthétisant les bonnes pratiques relatives au stockage Azure standard et aux comptes de stockage Azure standard est disponible sur la page <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-416">Another article summarizing best practices around Azure Standard Storage and Azure Standard Storage Accounts can be found here <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span></span>

#### <span data-ttu-id="07e4c-417"><a name="f42c6cb5-d563-484d-9667-b07ae51bce29"></a>Disques managés</span><span class="sxs-lookup"><span data-stu-id="07e4c-417"><a name="f42c6cb5-d563-484d-9667-b07ae51bce29"></a>Managed Disks</span></span>
<span data-ttu-id="07e4c-418">Les disques managés sont un nouveau type de ressources d’Azure Resource Manager. Ils peuvent être utilisés à la place des disques durs virtuels qui sont stockés dans les comptes de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-418">Managed Disks are a new resource type in Azure Resource Manager that can be used instead of VHDs that are stored in Azure Storage Accounts.</span></span> <span data-ttu-id="07e4c-419">Les disques managés s’alignent automatiquement sur le groupe à haute disponibilité de la machine virtuelle à laquelle ils sont attachés. De fait, ils augmentent la disponibilité de votre machine virtuelle et des services exécutés sur celle-ci.</span><span class="sxs-lookup"><span data-stu-id="07e4c-419">Managed Disks automatically align with the Availability Set of the virtual machine they are attached to and therefore increase the availability of your virtual machine and the services that are running on the virtual machine.</span></span> <span data-ttu-id="07e4c-420">Pour plus d’informations, consultez cet [article de présentation](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="07e4c-420">To learn more, read the [overview article](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span></span>

<span data-ttu-id="07e4c-421">SAP prend uniquement en charge les disques managés Premium.</span><span class="sxs-lookup"><span data-stu-id="07e4c-421">SAP currently only supports Premium Managed Disks.</span></span> <span data-ttu-id="07e4c-422">Pour plus d’informations, lisez la note SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-422">Read SAP Note [1928533] for more details.</span></span>

#### <a name="moving-deployed-dbms-vms-from-azure-standard-storage-to-azure-premium-storage"></a><span data-ttu-id="07e4c-423">Déplacement de machines virtuelles de SGBD déployées du stockage Azure Standard vers le stockage Azure Premium Storage</span><span class="sxs-lookup"><span data-stu-id="07e4c-423">Moving deployed DBMS VMs from Azure Standard Storage to Azure Premium Storage</span></span>
<span data-ttu-id="07e4c-424">Nous rencontrons un nombre assez important de scénarios où des clients souhaitent déplacer une machine virtuelle déployée du stockage Azure Standard vers le stockage Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-424">We encounter quite some scenarios where you as customer want to move a deployed VM from Azure Standard Storage into Azure Premium Storage.</span></span> <span data-ttu-id="07e4c-425">Si vos disques sont stockés dans des comptes de stockage Azure, cela n’est pas possible sans déplacer physiquement les données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-425">If your disks are stored in Azure Storage Accounts, this is not possible without physically moving the data.</span></span> <span data-ttu-id="07e4c-426">Il existe plusieurs façons d’atteindre cet objectif :</span><span class="sxs-lookup"><span data-stu-id="07e4c-426">There are several ways to achieve the goal:</span></span>

* <span data-ttu-id="07e4c-427">Vous pouvez simplement copier tous les disques durs virtuels, le disque dur virtuel de base, ainsi que les disques durs virtuels de données dans un nouveau compte de stockage Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-427">You could simply copy all VHDs, base VHD as well as data VHDs into a new Azure Premium Storage Account.</span></span> <span data-ttu-id="07e4c-428">Souvent, vous choisissez le nombre de disques durs virtuels dans le stockage Azure Standard non pas en fonction du volume de données offert,</span><span class="sxs-lookup"><span data-stu-id="07e4c-428">Often you chose the number of VHDs in Azure Standard Storage not because of the fact that you needed the data volume.</span></span> <span data-ttu-id="07e4c-429">mais parce que vous aviez besoin de ce nombre total d’E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-429">But you needed that many VHDs because of the IOPS.</span></span> <span data-ttu-id="07e4c-430">Maintenant que vous effectuez un déplacement vers le stockage Premium Azure, vous pourriez utiliser beaucoup moins de disques durs virtuels pour atteindre le même débit d’E/S.</span><span class="sxs-lookup"><span data-stu-id="07e4c-430">Now that you move to Azure Premium Storage you could go with way fewer VHDs to achieve the same IOPS throughput.</span></span> <span data-ttu-id="07e4c-431">Étant donné qu’avec le stockage Azure Standard, vous payiez pour les données utilisées et non pour la taille de disque nominale, le nombre de disques durs virtuels n’importait pas vraiment en termes de coûts.</span><span class="sxs-lookup"><span data-stu-id="07e4c-431">Given the fact that in Azure Standard Storage you pay for the used data and not the nominal disk size, the number of VHDs did not really matter in terms of costs.</span></span> <span data-ttu-id="07e4c-432">Cependant, avec le stockage Azure Premium Storage, vous payez pour la taille de disque nominale.</span><span class="sxs-lookup"><span data-stu-id="07e4c-432">However, with Azure Premium Storage, you would pay for the nominal disk size.</span></span> <span data-ttu-id="07e4c-433">Par conséquent, la plupart des clients essaient de limiter le nombre de disques durs virtuels Azure dans le stockage Premium au nombre nécessaire pour atteindre le débit d’E/S nécessaire.</span><span class="sxs-lookup"><span data-stu-id="07e4c-433">Therefore, most of the customers try to keep the number of Azure VHDs in Premium Storage at the number needed to achieve the IOPS throughput necessary.</span></span> <span data-ttu-id="07e4c-434">Les clients décident donc généralement de ne pas faire une simple copie 1:1.</span><span class="sxs-lookup"><span data-stu-id="07e4c-434">So, most customers decide against the way of a simple 1:1 copy.</span></span>
* <span data-ttu-id="07e4c-435">S’il n’est pas encore monté, vous montez un disque dur virtuel unique pouvant contenir une sauvegarde de base de données de votre base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-435">If not yet mounted, you mount a single VHD that can contain a database backup of your SAP database.</span></span> <span data-ttu-id="07e4c-436">Après la sauvegarde, vous démontez tous les disques durs virtuels, y compris celui contenant la sauvegarde, et copiez le disque dur virtuel de base et le disque dur virtuel avec la sauvegarde dans un compte de stockage Azure Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-436">After the backup, you unmount all VHDs including the VHD containing the backup and copy the base VHD and the VHD with the backup into an Azure Premium Storage account.</span></span> <span data-ttu-id="07e4c-437">Ensuite, vous déployez la machine virtuelle s’appuyant sur le disque dur virtuel de base et montez le disque dur virtuel contenant la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-437">You would then deploy the VM based on the base VHD and mount the VHD with the backup.</span></span> <span data-ttu-id="07e4c-438">Maintenant, vous créez des disques Premium Storage vides supplémentaires pour la machine virtuelle, dans lesquels la base de données sera restaurée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-438">Now you create additional empty Premium Storage Disks for the VM that are used to restore the database into.</span></span> <span data-ttu-id="07e4c-439">Cela suppose que le SGBD vous permet de modifier les chemins d’accès aux fichiers de données et aux fichiers journaux dans le cadre du processus de restauration.</span><span class="sxs-lookup"><span data-stu-id="07e4c-439">This assumes that the DBMS allows you to change paths to the data and log files as part of the restore process.</span></span>
* <span data-ttu-id="07e4c-440">Une autre possibilité est une variante du processus précédent, où vous copiez simplement le disque dur virtuel de sauvegarde dans le stockage Azure Premium Storage et l’attachez à une machine virtuelle que vous venez de déployer et d’installer.</span><span class="sxs-lookup"><span data-stu-id="07e4c-440">Another possibility is a variation of the former process, where you just copy the backup VHD into Azure Premium Storage and attach it against a VM that you newly deployed and installed.</span></span>
* <span data-ttu-id="07e4c-441">Une quatrième possibilité s’offre à vous si vous avez besoin de modifier le nombre de fichiers de données de votre base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-441">The fourth possibility you would choose when you are in need to change the number of data files of your database.</span></span> <span data-ttu-id="07e4c-442">Dans ce cas, vous exécutez une copie de système homogène SAP à l’aide de la fonctionnalité d’exportation/importation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-442">In such a case, you would perform an SAP homogenous system copy using export/import.</span></span> <span data-ttu-id="07e4c-443">Placez ces fichiers d’exportation dans un disque dur virtuel qui est copié dans un compte de stockage Azure Premium Storage et attachez-le à une machine virtuelle que vous utilisez pour exécuter les processus d’importation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-443">Put those export files into a VHD that is copied into an Azure Premium Storage Account and attach it to a VM that you use to run the import processes.</span></span> <span data-ttu-id="07e4c-444">Les clients utilisent cette possibilité principalement lorsqu’ils veulent réduire le nombre de fichiers de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-444">Customers use this possibility mainly when they want to decrease the number of data files.</span></span>

<span data-ttu-id="07e4c-445">Si vous utilisez des disques managés, vous pouvez migrer vers le Stockage Premium de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="07e4c-445">If you use Managed Disks, you can migrate to Premium Storage by:</span></span>

1. <span data-ttu-id="07e4c-446">Libérez la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="07e4c-446">Deallocate the virtual machine</span></span>
2. <span data-ttu-id="07e4c-447">Si nécessaire, redimensionnez la machine virtuelle pour atteindre une taille prenant en charge le stockage Premium (par exemple DS ou GS)</span><span class="sxs-lookup"><span data-stu-id="07e4c-447">If necessary, resize the virtual machine to a size that supports Premium Storage (for example DS or GS)</span></span>
3. <span data-ttu-id="07e4c-448">Passez à un compte Premium pour le disque managé (SSD)</span><span class="sxs-lookup"><span data-stu-id="07e4c-448">Change the Managed Disk account type to Premium (SSD)</span></span>
4. <span data-ttu-id="07e4c-449">Démarrez la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="07e4c-449">Start your virtual machine</span></span>

### <a name="deployment-of-vms-for-sap-in-azure"></a><span data-ttu-id="07e4c-450">Déploiement de machines virtuelles pour SAP dans Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-450">Deployment of VMs for SAP in Azure</span></span>
<span data-ttu-id="07e4c-451">Microsoft Azure offre plusieurs modes de déploiement de machines virtuelles et des disques associés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-451">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="07e4c-452">Il est important de comprendre ce qui les distingue dans la mesure où les préparations des machines virtuelles peuvent différer en fonction du déploiement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-452">Thereby it is important to understand the differences since preparations of the VMs might differ dependent on the way of deployment.</span></span> <span data-ttu-id="07e4c-453">En règle générale, nous examinons les scénarios décrits dans les chapitres suivants.</span><span class="sxs-lookup"><span data-stu-id="07e4c-453">In general, we look into the scenarios described in the following chapters.</span></span>

#### <a name="deploying-a-vm-from-the-azure-marketplace"></a><span data-ttu-id="07e4c-454">Déploiement d’une machine virtuelle provenant d’Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="07e4c-454">Deploying a VM from the Azure Marketplace</span></span>
<span data-ttu-id="07e4c-455">Vous voulez prendre une image fournie par Microsoft ou par un tiers provenant de la Place de marché Microsoft Azure pour déployer votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-455">You like to take a Microsoft or third party provided image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="07e4c-456">Une fois que vous avez déployé votre machine virtuelle dans Azure, vous utilisez les mêmes instructions et outils pour installer les logiciels SAP au sein de votre machine virtuelle comme vous le feriez dans un environnement local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-456">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="07e4c-457">Pour installer les logiciels SAP au sein de la machine virtuelle Azure, SAP et Microsoft recommandent de charger et stocker le support d’installation SAP sur des disques, ou de créer une machine virtuelle Azure faisant office de serveur de fichiers qui contient tous les supports d’installation SAP nécessaires.</span><span class="sxs-lookup"><span data-stu-id="07e4c-457">For installing the SAP software inside the Azure VM, SAP and Microsoft recommend uploading and store the SAP installation media in disks or to create an Azure VM working as a 'File server', which contains all the necessary SAP installation media.</span></span>

#### <a name="deploying-a-vm-with-a-customer-specific-generalized-image"></a><span data-ttu-id="07e4c-458">Déploiement d’une machine virtuelle avec une image généralisée propre au client</span><span class="sxs-lookup"><span data-stu-id="07e4c-458">Deploying a VM with a customer-specific generalized image</span></span>
<span data-ttu-id="07e4c-459">En raison des correctifs qui doivent être appliqués à votre version de système d’exploitation ou de logiciel SGBD, les images fournies sur la Place de marché Microsoft Azure peuvent ne pas répondre à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="07e4c-459">Due to specific patch requirements regarding your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="07e4c-460">Par conséquent, vous devrez peut-être créer une machine virtuelle à l’aide de votre propre image « privée » de machine virtuelle pour système d’exploitation/SGBD, qui pourra être déployée plusieurs fois par la suite.</span><span class="sxs-lookup"><span data-stu-id="07e4c-460">Therefore, you might need to create a VM using your own 'private' OS/DBMS VM image, which can be deployed several times afterwards.</span></span> <span data-ttu-id="07e4c-461">Pour préparer une image « privée » de ce type pour la duplication, le système d’exploitation doit être généralisé sur la machine virtuelle locale.</span><span class="sxs-lookup"><span data-stu-id="07e4c-461">To prepare such a 'private' image for duplication, the OS must be generalized on the on-premises VM.</span></span> <span data-ttu-id="07e4c-462">Pour savoir comment généraliser une machine virtuelle, consultez le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="07e4c-462">Refer to the [Deployment Guide][deployment-guide] for details on how to generalize a VM.</span></span>

<span data-ttu-id="07e4c-463">Si vous avez déjà installé du contenu SAP sur votre machine virtuelle locale (en particulier pour les systèmes à 2 niveaux), vous pouvez adapter les paramètres du système SAP après le déploiement de la machine virtuelle Azure à l’aide de la procédure de modification du nom d’instance prise en charge par le gestionnaire de déploiement de logiciels SAP (Note de SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-463">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="07e4c-464">Sinon, vous pouvez installer les logiciels SAP après le déploiement de la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-464">Otherwise you can install the SAP software later after the deployment of the Azure VM.</span></span>

<span data-ttu-id="07e4c-465">En ce qui concerne le contenu de base de données utilisé par l’application SAP, vous pouvez soit générer à nouveau le contenu à l’aide d’une installation SAP, soit importer votre contenu dans Azure en utilisant un disque dur virtuel avec une sauvegarde de base de données de SGBD ou en tirant parti des capacités de sauvegarde directe dans Microsoft Azure Storage du SGBD.</span><span class="sxs-lookup"><span data-stu-id="07e4c-465">As of the database content used by the SAP application, you can either generate the content freshly by an SAP installation or you can import your content into Azure by using a VHD with a DBMS database backup or by leveraging capabilities of the DBMS to directly backup into Microsoft Azure Storage.</span></span> <span data-ttu-id="07e4c-466">Dans ce cas, vous pouvez également préparer des disques durs virtuels avec les fichiers de données et les fichiers journaux du SGBD en local, puis les importer en tant que disques dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-466">In this case, you could also prepare VHDs with the DBMS data and log files on-premises and then import those as Disks into Azure.</span></span> <span data-ttu-id="07e4c-467">Toutefois, le transfert de données SGBD chargées dans Azure à partir d’un stockage local fonctionne uniquement sur des disques durs virtuels qui ont été préparés en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-467">But the transfer of DBMS data, which is getting loaded from on-premises to Azure would work over VHD disks that need to be prepared on-premises.</span></span>

#### <a name="moving-a-vm-from-on-premises-to-azure-with-a-non-generalized-disk"></a><span data-ttu-id="07e4c-468">Déplacement d’une machine virtuelle locale vers Azure avec un disque non généralisé</span><span class="sxs-lookup"><span data-stu-id="07e4c-468">Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="07e4c-469">Vous envisagez de déplacer un système SAP spécifique local vers Azure (développement et transfert).</span><span class="sxs-lookup"><span data-stu-id="07e4c-469">You plan to move a specific SAP system from on-premises to Azure (lift and shift).</span></span> <span data-ttu-id="07e4c-470">Pour ce faire, vous pouvez charger le disque qui contient le système d’exploitation, les fichiers binaires SAP et les éventuels fichiers binaires du SGBD, ainsi que les disques contenant les fichiers de données et les fichiers journaux du SGBD dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-470">This can be done by uploading the disk, which contains the OS, the SAP binaries, and eventual DBMS binaries plus the disks with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="07e4c-471">Contrairement au scénario 2 ci-dessus, vous conservez le nom d’hôte, le SID SAP et les comptes d’utilisateur SAP dans la machine virtuelle Azure, tels qu’ils ont été configurés dans l’environnement local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-471">In opposite to scenario #2 above, you keep the hostname, SAP SID, and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="07e4c-472">Par conséquent, il n’est pas nécessaire de généraliser l’image.</span><span class="sxs-lookup"><span data-stu-id="07e4c-472">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="07e4c-473">Ce cas s’applique tout particulièrement pour les scénarios de déploiement entre différents locaux dans lesquels une partie du paysage SAP est exécutée en local et une autre dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-473">This case mostly applies for Cross-Premises scenarios where a part of the SAP landscape is run on-premises and parts on Azure.</span></span>

## <span data-ttu-id="07e4c-474"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>Haute disponibilité et récupération d’urgence avec les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-474"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>High Availability and Disaster Recovery with Azure VMs</span></span>
<span data-ttu-id="07e4c-475">Azure offre les fonctionnalités de haute disponibilité et de récupération d’urgence suivantes, qui s’appliquent à différents composants utilisés pour des déploiements SAP et SGBD.</span><span class="sxs-lookup"><span data-stu-id="07e4c-475">Azure offers the following High Availability (HA) and Disaster Recovery (DR) functionalities, which apply to different components we would use for SAP and DBMS deployments</span></span>

### <a name="vms-deployed-on-azure-nodes"></a><span data-ttu-id="07e4c-476">Machines virtuelles déployées sur des nœuds Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-476">VMs deployed on Azure Nodes</span></span>
<span data-ttu-id="07e4c-477">La plateforme Azure n’offre pas de fonctionnalités telles que la migration en direct pour les machines virtuelles déployées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-477">The Azure Platform does not offer features such as Live Migration for deployed VMs.</span></span> <span data-ttu-id="07e4c-478">Cela signifie que si une maintenance est nécessaire sur un cluster de serveurs sur lequel une machine virtuelle est déployée, la machine virtuelle doit être arrêtée et redémarrée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-478">This means if there is maintenance necessary on a server cluster on which a VM is deployed, the VM needs to get stopped and restarted.</span></span> <span data-ttu-id="07e4c-479">La maintenance dans Azure est effectuée à l’aide de domaines de mise à niveau au sein des clusters de serveurs.</span><span class="sxs-lookup"><span data-stu-id="07e4c-479">Maintenance in Azure is performed using so called Upgrade Domains within clusters of servers.</span></span> <span data-ttu-id="07e4c-480">Seul un domaine de mise à niveau à la fois fait l’objet de la maintenance.</span><span class="sxs-lookup"><span data-stu-id="07e4c-480">Only one Upgrade Domain at a time is being maintained.</span></span> <span data-ttu-id="07e4c-481">Pendant le redémarrage, le service est interrompu lorsque la machine virtuelle est arrêtée, la maintenance est effectuée et la machine virtuelle redémarrée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-481">During such a restart, there is an interruption of service while the VM is shut down, maintenance is performed and VM restarted.</span></span> <span data-ttu-id="07e4c-482">Cependant, la plupart des fournisseurs de SGBD fournissent des fonctionnalités de haute disponibilité et de récupération d’urgence qui garantissent un redémarrage rapide des services du SGBD sur un autre nœud en cas d’indisponibilité du nœud principal.</span><span class="sxs-lookup"><span data-stu-id="07e4c-482">Most DBMS vendors however provide High Availability and Disaster Recovery functionality that quickly restarts the DBMS services on another node if the primary node is unavailable.</span></span> <span data-ttu-id="07e4c-483">La plateforme Azure offre des fonctionnalités permettant de répartir les machines virtuelles, le stockage et les autres services Azure entre les domaines de mise à niveau pour s’assurer que la maintenance planifiée et les défaillances d’infrastructure n’affectent qu’un petit sous-ensemble de machines virtuelles ou de services.</span><span class="sxs-lookup"><span data-stu-id="07e4c-483">The Azure Platform offers functionality to distribute VMs, Storage, and other Azure services across Upgrade Domains to ensure that planned maintenance or infrastructure failures would only impact a small subset of VMs or services.</span></span>  <span data-ttu-id="07e4c-484">Avec une planification méticuleuse, il est possible d’atteindre des niveaux de disponibilité comparables à ceux d’infrastructures locales.</span><span class="sxs-lookup"><span data-stu-id="07e4c-484">With careful planning, it is possible to achieve availability levels comparable to on-premises infrastructures.</span></span>

<span data-ttu-id="07e4c-485">Les groupes à haute disponibilité Microsoft Azure sont un regroupement logique de machines virtuelles ou de services qui assurent la répartition des machines virtuelles et des autres services dans des domaines d’erreur et de mise à niveau distincts, de telle sorte qu’il ne peut jamais y avoir plus d’un arrêt de nœud (pour plus d’informations, consultez [cet article (pour Linux)][virtual-machines-manage-availability-linux] et [cet article (pour Windows)][virtual-machines-manage-availability-windows]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-485">Microsoft Azure Availability Sets are a logical grouping of VMs or Services that ensures VMs and other services are distributed to different Fault and Upgrade Domains within a cluster such that there would only be one node shutdown at any one point in time (read [this (Linux)][virtual-machines-manage-availability-linux] or [this (Windows)][virtual-machines-manage-availability-windows] article for more details).</span></span>

<span data-ttu-id="07e4c-486">Ils doivent être configurés lors du déploiement des machines virtuelles, comme illustré ici :</span><span class="sxs-lookup"><span data-stu-id="07e4c-486">It needs to be configured by purpose when rolling out VMs as seen here:</span></span>

![Définition du groupe à haute disponibilité pour les configurations haute disponibilité SGBD][dbms-guide-figure-200]

<span data-ttu-id="07e4c-488">Si nous voulons créer des configurations haute disponibilité de déploiements SGBD (indépendamment de la fonctionnalité de haute disponibilité de SGBD utilisée), les machines virtuelles du SGBD devront :</span><span class="sxs-lookup"><span data-stu-id="07e4c-488">If we want to create highly available configurations of DBMS deployments (independent of the individual DBMS HA functionality used), the DBMS VMs would need to:</span></span>

* <span data-ttu-id="07e4c-489">Ajoutez les machines virtuelles au même réseau virtuel Azure (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span><span class="sxs-lookup"><span data-stu-id="07e4c-489">Add the VMs to the same Azure Virtual Network (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span></span>
* <span data-ttu-id="07e4c-490">Les machines virtuelles de la configuration haute disponibilité doivent aussi se trouver sur le même sous-réseau.</span><span class="sxs-lookup"><span data-stu-id="07e4c-490">The VMs of the HA configuration should also be in the same subnet.</span></span> <span data-ttu-id="07e4c-491">La résolution de noms entre les différents sous-réseaux n’est pas possible dans les déploiements « cloud uniquement ». Seule la résolution IP fonctionne.</span><span class="sxs-lookup"><span data-stu-id="07e4c-491">Name resolution between the different subnets is not possible in Cloud-Only deployments, only IP resolution works.</span></span> <span data-ttu-id="07e4c-492">Si vous utilisez une connectivité de site à site ou ExpressRoute pour des déploiements entre différents locaux, un réseau comportant au moins un sous-réseau est déjà établi.</span><span class="sxs-lookup"><span data-stu-id="07e4c-492">Using site-to-site or ExpressRoute connectivity for Cross-Premises deployments, a network with at least one subnet is already established.</span></span> <span data-ttu-id="07e4c-493">La résolution de noms est effectuée selon les stratégies AD et l’infrastructure réseau locales.</span><span class="sxs-lookup"><span data-stu-id="07e4c-493">Name resolution is done according to the on-premises AD policies and network infrastructure.</span></span> 

[comment]: <> (MSSedusch TODO Test if still true in ARM)

#### <a name="ip-addresses"></a><span data-ttu-id="07e4c-495">Adresses IP</span><span class="sxs-lookup"><span data-stu-id="07e4c-495">IP Addresses</span></span>
<span data-ttu-id="07e4c-496">Il est recommandé de configurer les machines virtuelles de manière résiliente pour les configurations haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="07e4c-496">It is highly recommended to setup the VMs for HA configurations in a resilient way.</span></span> <span data-ttu-id="07e4c-497">Dans Azure, s’appuyer sur des adresses IP pour atteindre les partenaires de haute disponibilité au sein de la configuration haute disponibilité n’est pas fiable, à moins d’utiliser des adresses IP fixes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-497">Relying on IP addresses to address the HA partner(s) within the HA configuration is not reliable in Azure unless static IP addresses are used.</span></span> <span data-ttu-id="07e4c-498">Il existe deux concepts d’« arrêt » dans Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-498">There are two "Shutdown" concepts in Azure:</span></span>

* <span data-ttu-id="07e4c-499">L’arrêt via le portail Azure ou l’applet de commande Azure PowerShell Stop-AzureRmVM : dans ce cas, la machine virtuelle est arrêtée et désallouée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-499">Shut down through Azure portal or Azure PowerShell cmdlet Stop-AzureRmVM: In this case, the Virtual Machine gets shutdown and de-allocated.</span></span> <span data-ttu-id="07e4c-500">Votre compte Azure n’est plus facturé pour cette machine virtuelle, de sorte que les seuls frais occasionnés concernent le stockage utilisé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-500">Your Azure account is no longer charged for this VM so the only charges that incur are for the storage used.</span></span> <span data-ttu-id="07e4c-501">Cependant, si l’adresse IP privée de l’interface réseau n’était pas fixe, l’adresse IP est libérée et il n’y a aucune garantie que l’ancienne adresse IP sera à nouveau affectée à l’interface réseau après un redémarrage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-501">However, if the private IP address of the network interface was not static, the IP address is released and it is not guaranteed that the network interface gets the old IP address assigned again after a restart of the VM.</span></span> <span data-ttu-id="07e4c-502">L’exécution de l’arrêt via le portail Azure ou l’appel de Stop-AzureRmVM entraîne automatiquement la désallocation de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-502">Performing the shut down through the Azure portal or by calling Stop-AzureRmVM automatically causes de-allocation.</span></span> <span data-ttu-id="07e4c-503">Si vous ne souhaitez pas la désallouer, utilisez Stop-AzureRmVM -StayProvisioned.</span><span class="sxs-lookup"><span data-stu-id="07e4c-503">If you do not want to deallocate the machine use Stop-AzureRmVM -StayProvisioned</span></span> 
* <span data-ttu-id="07e4c-504">Si vous arrêtez la machine virtuelle depuis un système d’exploitation, elle est arrêtée et n’est PAS désallouée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-504">If you shut down the VM from an OS level, the VM gets shut down and NOT de-allocated.</span></span> <span data-ttu-id="07e4c-505">Cependant, votre compte Azure sera toujours facturé pour la machine virtuelle, même si celle-ci est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-505">However, in this case, your Azure account is still charged for the VM, despite the fact that it is shutdown.</span></span> <span data-ttu-id="07e4c-506">Dans une telle situation, l’adresse IP affectée à une machine virtuelle arrêtée est conservée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-506">In such a case, the assignment of the IP address to a stopped VM remains intact.</span></span> <span data-ttu-id="07e4c-507">L’arrêt de la machine virtuelle depuis celle-ci ne force pas sa désallocation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-507">Shutting down the VM from within does not automatically force de-allocation.</span></span>

<span data-ttu-id="07e4c-508">Même pour les scénarios de déploiement entre différents locaux, par défaut, un arrêt et une désallocation entraînent la désaffectation des adresses IP de la machine virtuelle, même si les stratégies locales définies dans les paramètres DHCP sont différentes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-508">Even for Cross-Premises scenarios, by default a shutdown and de-allocation means de-assignment of the IP addresses from the VM, even if on-premises policies in DHCP settings are different.</span></span> 

* <span data-ttu-id="07e4c-509">La seule exception concerne le cas où une adresse IP fixe est affectée à une interface réseau de la manière décrite [ici][virtual-networks-reserved-private-ip].</span><span class="sxs-lookup"><span data-stu-id="07e4c-509">The exception is if one assigns a static IP address to a network interface as described [here][virtual-networks-reserved-private-ip].</span></span>
* <span data-ttu-id="07e4c-510">L’adresse IP reste alors fixe tant que l’interface réseau n’est pas supprimée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-510">In such a case the IP address remains fixed as long as the network interface is not deleted.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="07e4c-511">Pour que l’ensemble du déploiement reste simple et facile à gérer, la solution évidente consiste à configurer les machines virtuelles associées dans une configuration haute disponibilité ou de récupération d’urgence de SGBD au sein d’Azure de sorte qu’il y ait une résolution de noms qui fonctionne entre les différentes machines virtuelles impliquées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-511">In order to keep the whole deployment simple and manageable, the clear recommendation is to setup the VMs partnering in a DBMS HA or DR configuration within Azure in a way that there is a functioning name resolution between the different VMs involved.</span></span>
> 
> 

## <a name="deployment-of-host-monitoring"></a><span data-ttu-id="07e4c-512">Déploiement de la surveillance d’hôte</span><span class="sxs-lookup"><span data-stu-id="07e4c-512">Deployment of Host Monitoring</span></span>
<span data-ttu-id="07e4c-513">Pour une utilisation productive des applications SAP dans Azure Virtual Machines, SAP doit avoir la possibilité de collecter des données de surveillance d’hôte auprès des hôtes physiques exécutant les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-513">For productive usage of SAP Applications in Azure Virtual Machines, SAP requires the ability to get host monitoring data from the physical hosts running the Azure Virtual Machines.</span></span> <span data-ttu-id="07e4c-514">Un niveau de correctif logiciel SAP HostAgent spécifique est nécessaire pour activer cette fonctionnalité dans SAPOSCOL et SAP HostAgent.</span><span class="sxs-lookup"><span data-stu-id="07e4c-514">A specific SAP Host Agent patch level is required that enables this capability in SAPOSCOL and SAP Host Agent.</span></span> <span data-ttu-id="07e4c-515">Le niveau de correctif logiciel exact est indiqué dans la Note de SAP [1409604].</span><span class="sxs-lookup"><span data-stu-id="07e4c-515">The exact patch level is documented in SAP Note [1409604].</span></span>

<span data-ttu-id="07e4c-516">Pour plus d’informations concernant le déploiement de composants qui fournissent des données d’hôte à SAPOSCOL et SAPHostAgent, et la gestion du cycle de vie de ces composants, consultez le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="07e4c-516">For the details regarding deployment of components that deliver host data to SAPOSCOL and SAP Host Agent and the lifecycle management of those components, refer to the [Deployment Guide][deployment-guide]</span></span>

## <span data-ttu-id="07e4c-517"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Caractéristiques de Microsoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-517"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifics to Microsoft SQL Server</span></span>
### <a name="sql-server-iaas"></a><span data-ttu-id="07e4c-518">IaaS SQL Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-518">SQL Server IaaS</span></span>
<span data-ttu-id="07e4c-519">À partir de Microsoft Azure, vous pouvez facilement migrer vos applications SQL Server existantes créées sur la plateforme Windows Server vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-519">Starting with Microsoft Azure, you can easily migrate your existing SQL Server applications built on Windows Server platform to Azure Virtual Machines.</span></span> <span data-ttu-id="07e4c-520">Dans une machine virtuelle, SQL Server vous permet de réduire le coût total de possession lié au déploiement, à la gestion et à la maintenance des applications d’entreprise en les migrant en toute simplicité vers Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-520">SQL Server in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="07e4c-521">Avec SQL Server dans une machine virtuelle Azure, les administrateurs et développeurs peuvent utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-521">With SQL Server in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="07e4c-522">Notez que nous ne traiterons pas ici du service Microsoft Azure SQL Database, qui est une offre Platform as a Service (PaaS) de la plateforme Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-522">We are not discussing Microsoft Azure SQL Database, which is a Platform as a Service offer of the Microsoft Azure Platform.</span></span> <span data-ttu-id="07e4c-523">Ce document porte sur l’exécution du produit SQL Server pour les déploiements locaux dans Azure Virtual Machines, en tirant parti des capacités d’Infrastructure as a Service (IaaS) d’Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-523">The discussion in this paper is about running the SQL Server product as it is known for on-premises deployments in Azure Virtual Machines, leveraging the Infrastructure as a Service capability of Azure.</span></span> <span data-ttu-id="07e4c-524">Les capacités et fonctionnalités de base de données de ces deux services sont différentes et ne doivent pas être confondues.</span><span class="sxs-lookup"><span data-stu-id="07e4c-524">Database capabilities and functionalities between these two offers are different and should not be mixed up with each other.</span></span> <span data-ttu-id="07e4c-525">Voir aussi : <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="07e4c-525">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
> 
> 

<span data-ttu-id="07e4c-526">Avant de continuer, il est vivement recommandé de parcourir [cette][virtual-machines-sql-server-infrastructure-services] documentation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-526">It is strongly recommended to review [this][virtual-machines-sql-server-infrastructure-services] documentation before continuing.</span></span>

<span data-ttu-id="07e4c-527">Dans les sections suivantes, des parties de la documentation ci-dessus seront regroupées et mentionnées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-527">In the following sections pieces of parts of the documentation under the link above are aggregated and mentioned.</span></span> <span data-ttu-id="07e4c-528">Les particularités concernant SAP sont également indiquées et certains concepts décrits plus en détail.</span><span class="sxs-lookup"><span data-stu-id="07e4c-528">Specifics around SAP are mentioned as well and some concepts are described in more detail.</span></span> <span data-ttu-id="07e4c-529">Cependant, il est fortement recommandé d’examiner la documentation ci-dessus avant de lire la documentation propre à SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-529">However, it is highly recommended to work through the documentation above first before reading the SQL Server specific documentation.</span></span>

<span data-ttu-id="07e4c-530">Avant de continuer, il y a certaines informations spécifiques sur SQL Server dans IaaS que vous devez connaître :</span><span class="sxs-lookup"><span data-stu-id="07e4c-530">There is some SQL Server in IaaS specific information you should know before continuing:</span></span>

* <span data-ttu-id="07e4c-531">**Contrat de niveau de service pour les machines virtuelles** : il existe un contrat de niveau de service pour les machines virtuelles exécutées dans Azure. Il est disponible ici : <https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="07e4c-531">**Virtual Machine SLA**: There is an SLA for Virtual Machines running in Azure, which can be found here: <https://azure.microsoft.com/support/legal/sla/></span></span>  
* <span data-ttu-id="07e4c-532">**Prise en charge des versions SQL**: pour les clients SAP, nous prenons en charge SQL Server 2008 R2 et versions ultérieures sur Microsoft Azure Virtual Machine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-532">**SQL Version Support**: For SAP customers, we support SQL Server 2008 R2 and higher on Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="07e4c-533">Les éditions antérieures ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-533">Earlier editions are not supported.</span></span> <span data-ttu-id="07e4c-534">Pour plus d’informations, voir cette [déclaration officielle](https://support.microsoft.com/kb/956893) générale.</span><span class="sxs-lookup"><span data-stu-id="07e4c-534">Review this general [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="07e4c-535">Notez qu’en règle générale, SQL Server 2008 est également pris en charge par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="07e4c-535">Note that in general SQL Server 2008 is supported by Microsoft as well.</span></span> <span data-ttu-id="07e4c-536">Cependant, en raison de fonctionnalités significatives pour SAP introduites avec SQL Server 2008 R2, SQL Server 2008 R2 est la version minimale requise pour SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-536">However due to significant functionality for SAP, which was introduced with SQL Server 2008 R2, SQL Server 2008 R2 is the minimum release for SAP.</span></span> <span data-ttu-id="07e4c-537">Gardez à l’esprit que SQL Server 2012 et 2014 ont été étendus avec une meilleure intégration dans le scénario IaaS (possibilité de sauvegarde directe dans Azure Storage, par exemple).</span><span class="sxs-lookup"><span data-stu-id="07e4c-537">Keep in mind that SQL Server 2012 and 2014 got extended with deeper integration into the IaaS scenario (like backing up directly against Azure Storage).</span></span> <span data-ttu-id="07e4c-538">Par conséquent, nous limiterons ce document à SQL Server 2012 et 2014 avec le dernier niveau de correctif logiciel pour Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-538">Therefore, we restrict this paper to SQL Server 2012 and 2014 with its latest patch level for Azure.</span></span>
* <span data-ttu-id="07e4c-539">**Prise en charge des fonctionnalités SQL**: la plupart des fonctionnalités SQL Server sont prises en charge sur Microsoft Azure Virtual Machines, à quelques exceptions près.</span><span class="sxs-lookup"><span data-stu-id="07e4c-539">**SQL Feature Support**: Most SQL Server features are supported on Microsoft Azure Virtual Machines with some exceptions.</span></span> <span data-ttu-id="07e4c-540">**Le clustering de basculement SQL Server à l’aide de disques partagés n’est pas pris en charge**.</span><span class="sxs-lookup"><span data-stu-id="07e4c-540">**SQL Server Failover Clustering using Shared Disks is not supported**.</span></span>  <span data-ttu-id="07e4c-541">Les technologies distribuées telles que la mise en miroir de bases de données, les groupes de disponibilité AlwaysOn, la réplication, la copie des journaux de transaction et l’envoi de journaux et Service Broker sont prises en charge au sein d’une même région Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-541">Distributed technologies like Database Mirroring, AlwaysOn Availability Groups, Replication, Log Shipping and Service Broker are supported within a single Azure Region.</span></span> <span data-ttu-id="07e4c-542">SQL Server AlwaysOn est également pris en charge entre différentes régions Azure comme indiqué ici : <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-542">SQL Server AlwaysOn also is supported between different Azure Regions as documented here:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span></span>  <span data-ttu-id="07e4c-543">Pour plus d’informations, voir la [déclaration officielle](https://support.microsoft.com/kb/956893) .</span><span class="sxs-lookup"><span data-stu-id="07e4c-543">Review the [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="07e4c-544">Pour un exemple de déploiement de configuration AlwaysOn, consultez [cet][virtual-machines-workload-template-sql-alwayson] article.</span><span class="sxs-lookup"><span data-stu-id="07e4c-544">An example on how to deploy an AlwaysOn configuration is shown in [this][virtual-machines-workload-template-sql-alwayson] article.</span></span> <span data-ttu-id="07e4c-545">Consultez également les meilleures pratiques détaillées [ici][virtual-machines-sql-server-infrastructure-services]</span><span class="sxs-lookup"><span data-stu-id="07e4c-545">Also, check out the Best Practices documented [here][virtual-machines-sql-server-infrastructure-services]</span></span> 
* <span data-ttu-id="07e4c-546">**Performances de SQL** : nous sommes convaincus que les machines virtuelles hébergées par Microsoft Azure fonctionnent très bien, par rapport aux autres offres de virtualisation du cloud public. Cependant, les résultats peuvent varier d’un cas à l’autre.</span><span class="sxs-lookup"><span data-stu-id="07e4c-546">**SQL Performance**: We are confident that Microsoft Azure hosted Virtual Machines perform very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="07e4c-547">Pour en savoir plus, consultez [cet article][virtual-machines-sql-server-performance-best-practices].</span><span class="sxs-lookup"><span data-stu-id="07e4c-547">Check out [this][virtual-machines-sql-server-performance-best-practices] article.</span></span>
* <span data-ttu-id="07e4c-548">**Utilisation d’images de Microsoft Azure Marketplace**: la méthode la plus rapide pour déployer une nouvelle machine virtuelle Microsoft Azure consiste à utiliser une image de Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="07e4c-548">**Using Images from Azure Marketplace**: The fastest way to deploy a new Microsoft Azure VM is to use an image from the Azure Marketplace.</span></span> <span data-ttu-id="07e4c-549">En effet, cette plateforme propose des images incluant SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-549">There are images in the Azure Marketplace, which contain SQL Server.</span></span> <span data-ttu-id="07e4c-550">Les images hébergeant déjà SQL Server ne peuvent pas être directement utilisées pour les applications SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="07e4c-550">The images where SQL Server already is installed can’t be immediately used for SAP NetWeaver applications.</span></span> <span data-ttu-id="07e4c-551">En effet, le classement par défaut installé au sein de ces images correspond à celui de SQL Server, et non au classement requis par les systèmes SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="07e4c-551">The reason is the default SQL Server collation is installed within those images and not the collation required by SAP NetWeaver systems.</span></span> <span data-ttu-id="07e4c-552">Pour pouvoir utiliser ces images, suivez la procédure décrite dans le chapitre [Utilisation d’images SQL Server issues de la Place de marché Microsoft Azure][dbms-guide-5.6].</span><span class="sxs-lookup"><span data-stu-id="07e4c-552">In order to use such images, check the steps documented in chapter [Using a SQL Server image out of the Microsoft Azure Marketplace][dbms-guide-5.6].</span></span> 
* <span data-ttu-id="07e4c-553">Pour en savoir plus, voir la rubrique [Tarification](https://azure.microsoft.com/pricing/) .</span><span class="sxs-lookup"><span data-stu-id="07e4c-553">Check out [Pricing Details](https://azure.microsoft.com/pricing/) for more information.</span></span> <span data-ttu-id="07e4c-554">Les documents [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) (Guide de licences relatives à SQL Server 2012) et [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) (Guide de licences relatives à SQL Server 2014) peuvent également fournir des informations très utiles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-554">The [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) and [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) are also an important resource.</span></span>

### <a name="sql-server-configuration-guidelines-for-sap-related-sql-server-installations-in-azure-vms"></a><span data-ttu-id="07e4c-555">Recommandations relatives à la configuration de SQL Server pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-555">SQL Server configuration guidelines for SAP-related SQL Server installations in Azure VMs</span></span>
#### <a name="recommendations-on-vmvhd-structure-for-sap-related-sql-server-deployments"></a><span data-ttu-id="07e4c-556">Recommandations portant sur la structure des machines virtuelles/disques VHD pour les déploiements de SQL Server associés à SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-556">Recommendations on VM/VHD structure for SAP-related SQL Server deployments</span></span>
<span data-ttu-id="07e4c-557">Conformément à la description générale, les exécutables SQL Server doivent être situés ou installés sur le lecteur système du disque de la machine virtuelle (le lecteur C:\).</span><span class="sxs-lookup"><span data-stu-id="07e4c-557">In accordance with the general description, SQL Server executables should be located or installed into the system drive of the VM’s OS disk (drive C:\).</span></span>  <span data-ttu-id="07e4c-558">Bien souvent, la plupart des bases de données système SQL Server ne sont pas pleinement exploitées par les charges de travail SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="07e4c-558">Typically, most of the SQL Server system databases are not utilized at a high level by SAP NetWeaver workload.</span></span> <span data-ttu-id="07e4c-559">Par conséquent, les bases de données système SQL Server (« master », « msdb » et « model ») peuvent également rester sur le lecteur C:\.</span><span class="sxs-lookup"><span data-stu-id="07e4c-559">Hence the system databases of SQL Server (master, msdb, and model) can remain on the C:\ drive as well.</span></span> <span data-ttu-id="07e4c-560">La base de données « tempdb » peut être une exception. Pour l’ensemble des charges de travail BW et certaines charges de travail SAP ERP, tempdb peut nécessiter un volume de données ou d’opérations d’E/S plus important, que la capacité de la machine virtuelle d’origine ne suffit pas à satisfaire.</span><span class="sxs-lookup"><span data-stu-id="07e4c-560">An exception could be tempdb, which in the case of some SAP ERP and all BW workloads, might require either higher data volume or I/O operations volume, which can’t fit into the original VM.</span></span> <span data-ttu-id="07e4c-561">Pour ces systèmes, la procédure suivante doit être effectuée :</span><span class="sxs-lookup"><span data-stu-id="07e4c-561">For such systems, the following steps should be performed:</span></span>

* <span data-ttu-id="07e4c-562">Déplacez le ou les fichiers de données principaux de tempdb vers le lecteur logique qui inclut déjà le ou les fichiers de données principaux de la base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-562">Move the primary tempdb data file(s) to the same logical drive as the primary data file(s) of the SAP database.</span></span>
* <span data-ttu-id="07e4c-563">Ajoutez les fichiers de données supplémentaires de la base de données tempdb sur chaque lecteur logique contenant un fichier de données de la base de données utilisateur SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-563">Add any additional tempdb data files to each of the other logical drives containing a data file of the SAP user database.</span></span>
* <span data-ttu-id="07e4c-564">Ajoutez le fichier journal tempdb au lecteur logique qui contient le fichier journal de la base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="07e4c-564">Add the tempdb logfile to the logical drive, which contains the user database’s log file.</span></span>
* <span data-ttu-id="07e4c-565">Les données et fichiers journaux de tempdb peuvent être placés sur le lecteur D:\ **uniquement dans le cas des types de machines virtuelles qui utilisent des disques SSD locaux** sur le nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="07e4c-565">**Exclusively for VM types that use local SSDs** on the compute node tempdb data and log files might be placed on the D:\ drive.</span></span> <span data-ttu-id="07e4c-566">Toutefois, il peut être préférable d’utiliser plusieurs fichiers de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="07e4c-566">Nevertheless, it might be recommended to use multiple tempdb data files.</span></span> <span data-ttu-id="07e4c-567">N’oubliez pas que les volumes de lecteur D:\ sont différents selon le type de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-567">Be aware D:\ drive volumes are different based on the VM type.</span></span>

<span data-ttu-id="07e4c-568">Ces configurations permettent à la base de données tempdb de consommer davantage d’espace que celui que peut proposer le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-568">These configurations enable tempdb to consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="07e4c-569">Pour référence, vous pouvez consulter les tailles d’unités tempdb sur les systèmes existants qui s’exécutent en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-569">In order to determine the proper tempdb size, one can check the tempdb sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="07e4c-570">De plus, une telle configuration permet d’atteindre un nombre d’E/S par seconde pour tempdb qui ne peut pas être fourni avec le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-570">In addition, such a configuration would enable IOPS numbers against tempdb, which cannot be provided with the system drive.</span></span> <span data-ttu-id="07e4c-571">Là encore, des systèmes en cours d’exécution en local peuvent être utilisés pour surveiller la charge de travail d’E/S sur tempdb, afin de vous permettre d’obtenir le nombre d’E/S par seconde attendu sur votre base de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="07e4c-571">Again, systems that are running on-premises can be used to monitor I/O workload against tempdb so that you can derive the IOPS numbers you expect to see on your tempdb.</span></span>

<span data-ttu-id="07e4c-572">Voici un exemple de configuration de machine virtuelle qui exécute SQL Server avec une base de données SAP, et dans laquelle les données et le fichier journal de tempdb sont placés sur le lecteur D:\ :</span><span class="sxs-lookup"><span data-stu-id="07e4c-572">A VM configuration, which runs SQL Server with an SAP database and where tempdb data and tempdb logfile are placed on the D:\ drive would look like:</span></span>

![Configuration de référence de la machine virtuelle IaaS Azure pour SAP][dbms-guide-figure-300]

<span data-ttu-id="07e4c-574">N’oubliez pas que le lecteur D:\ présente des tailles différentes selon le type de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-574">Be aware that the D:\ drive has different sizes dependent on the VM type.</span></span> <span data-ttu-id="07e4c-575">En effet, en fonction des exigences en termes de taille de la base de données tempdb, vous pouvez être amené à coupler les données et fichiers journaux de cette dernière avec les fichiers journaux et données de la base de données SAP, si la capacité du lecteur D:\ est insuffisante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-575">Dependent on the size requirement of tempdb you might be forced to pair tempdb data and log files with the SAP database data and log files in cases where D:\ drive is too small.</span></span>

#### <a name="formatting-the-disks"></a><span data-ttu-id="07e4c-576">Formatage des disques</span><span class="sxs-lookup"><span data-stu-id="07e4c-576">Formatting the disks</span></span>
<span data-ttu-id="07e4c-577">Dans le cas de SQL Server, la taille du bloc NTFS des disques contenant des données et des fichiers journaux SQL Server doit être de 64 Ko.</span><span class="sxs-lookup"><span data-stu-id="07e4c-577">For SQL Server the NTFS block size for disks containing SQL Server data and log files should be 64K.</span></span> <span data-ttu-id="07e4c-578">Il est inutile de mettre en forme le lecteur D:\.</span><span class="sxs-lookup"><span data-stu-id="07e4c-578">There is no need to format the D:\ drive.</span></span> <span data-ttu-id="07e4c-579">En effet, ce lecteur est déjà mis en forme.</span><span class="sxs-lookup"><span data-stu-id="07e4c-579">This drive comes pre-formatted.</span></span>

<span data-ttu-id="07e4c-580">Pour vous assurer que la restauration ou la création de bases de données n’initialise pas les fichiers de données en supprimant le contenu des fichiers, vous devez vous assurer que le contexte utilisateur dans lequel le service SQL Server s’exécute dispose de l’autorisation adéquate.</span><span class="sxs-lookup"><span data-stu-id="07e4c-580">In order to make sure that the restore or creation of databases is not initializing the data files by zeroing the content of the files, one should make sure that the user context the SQL Server service is running in has a certain permission.</span></span> <span data-ttu-id="07e4c-581">En général, les utilisateurs du groupe Administrateurs Windows disposent des autorisations requises.</span><span class="sxs-lookup"><span data-stu-id="07e4c-581">Usually users in the Windows Administrator group have these permissions.</span></span> <span data-ttu-id="07e4c-582">Si le service SQL Server est exécuté dans le contexte utilisateur d’un administrateur autre que Windows, vous devez affecter à cet utilisateur le droit « Effectuer les tâches de maintenance de volume ».</span><span class="sxs-lookup"><span data-stu-id="07e4c-582">If the SQL Server service is run in the user context of non-Windows Administrator user, you need to assign that user the User Right ‘Perform volume maintenance tasks’.</span></span>  <span data-ttu-id="07e4c-583">Pour en savoir plus, voir cet article de la Base de connaissances Microsoft : <https://support.microsoft.com/kb/2574695></span><span class="sxs-lookup"><span data-stu-id="07e4c-583">See the details in this Microsoft Knowledge Base Article: <https://support.microsoft.com/kb/2574695></span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="07e4c-584">Impact de la compression de base de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-584">Impact of database compression</span></span>
<span data-ttu-id="07e4c-585">Dans les configurations pour lesquelles la bande passante d’E/S peut devenir un facteur de limitation, toutes les mesures qui réduisent le nombre d’E/S par seconde peuvent contribuer à étirer la charge de travail exécutable dans un scénario IaaS comme Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-585">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="07e4c-586">Par conséquent, si vous ne l’avez pas encore fait, SAP et Microsoft recommandent vivement l’application de la compression de page SQL Server avant le chargement de bases de données SAP existantes dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-586">Therefore, if not yet done, applying SQL Server PAGE compression is strongly recommended by both SAP and Microsoft before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="07e4c-587">Nous recommandons d’effectuer une compression de base de données avant le chargement sur Azure pour deux raisons :</span><span class="sxs-lookup"><span data-stu-id="07e4c-587">The recommendation to perform Database Compression before uploading to Azure is given out of two reasons:</span></span>

* <span data-ttu-id="07e4c-588">La quantité de données à charger est moins importante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-588">The amount of data to be uploaded is lower.</span></span>
* <span data-ttu-id="07e4c-589">En supposant que l’on peut utiliser en local un matériel plus performant avec plus d’UC, une bande passante d’E/S supérieure ou une latence d’E/S inférieure, la durée d’exécution de la compression est plus courte.</span><span class="sxs-lookup"><span data-stu-id="07e4c-589">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises.</span></span>
* <span data-ttu-id="07e4c-590">Des bases de données plus petites peuvent permettre de diminuer les coûts liés à l’allocation de disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-590">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="07e4c-591">La compression de bases de données fonctionne aussi bien dans une machine virtuelle Azure qu’en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-591">Database compression works as well in an Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="07e4c-592">Pour plus d’informations sur la compression d’une base de données SQL Server SAP existante, consultez l’article suivant : <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-592">For more details on how to compress an existing SAP SQL Server database, check here: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span></span>

### <a name="sql-server-2014--storing-database-files-directly-on-azure-blob-storage"></a><span data-ttu-id="07e4c-593">SQL Server 2014 : Stockage des fichiers de base de données directement dans le Stockage Blob Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-593">SQL Server 2014 – Storing Database Files directly on Azure Blob Storage</span></span>
<span data-ttu-id="07e4c-594">SQL Server 2014 permet de stocker les fichiers de base de données directement sur le magasin d’objets blob Azure, sans qu’il soit nécessaire d’utiliser un disque VHD pour « envelopper » ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="07e4c-594">SQL Server 2014 opens the possibility to store database files directly on Azure Blob Store without the ‘wrapper’ of a VHD around them.</span></span> <span data-ttu-id="07e4c-595">Lorsque vous utilisez le stockage Standard Azure ou des types de machines virtuelles plus petits, vous pouvez dépasser les limites d’E/S par seconde imposées par le nombre limité de disques pouvant être montés sur certains types de machines virtuelles de taille plus réduite.</span><span class="sxs-lookup"><span data-stu-id="07e4c-595">Especially with using Standard Azure Storage or smaller VM types this enables scenarios where you can overcome the limits of IOPS that would be enforced by a limited number of disks that can be mounted to some smaller VM types.</span></span> <span data-ttu-id="07e4c-596">Toutefois, ce genre de scénario fonctionne dans le cas des bases de données utilisateur, mais non pour les bases de données système SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-596">This works for user databases however not for system databases of SQL Server.</span></span> <span data-ttu-id="07e4c-597">Il peut également être appliqué aux fichiers journaux et données de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-597">It also works for data and log files of SQL Server.</span></span> <span data-ttu-id="07e4c-598">Si vous souhaitez déployer une base de données SQL Server SAP de cette manière plutôt que de recourir à des disques VHD, tenez compte des remarques suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-598">If you’d like to deploy an SAP SQL Server database this way instead of ‘wrapping’ it into VHDs, keep the following in mind:</span></span>

* <span data-ttu-id="07e4c-599">Le compte de stockage utilisé doit se trouver dans la même région Azure que celui qui permet de déployer la machine virtuelle sur laquelle SQL Server s’exécute.</span><span class="sxs-lookup"><span data-stu-id="07e4c-599">The Storage Account used needs to be in the same Azure Region as the one that is used to deploy the VM SQL Server is running in.</span></span>
* <span data-ttu-id="07e4c-600">Les considérations relatives à la répartition de disques VHD sur différents comptes de stockage Azure qui ont été abordées précédemment portent également sur cette méthode de déploiement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-600">Considerations listed earlier regarding the distribution of VHDs over different Azure Storage Accounts apply for this method of deployments as well.</span></span> <span data-ttu-id="07e4c-601">Cela signifie que les opérations d’E/S sont concernées par les limites du compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-601">Means the I/O operations count against the limits of the Azure Storage Account.</span></span>

[comment]: <> (MSSedusch TODO Cette opération utilise la bande passante du réseau et non celle du stockage, n’est-ce pas ?)

<span data-ttu-id="07e4c-603">Pour plus d’informations sur ce type de déploiement, consultez l’article suivant : <https://docs.microsoft.com/sql/relational-databases/databases/sql-server-data-files-in-microsoft-azure></span><span class="sxs-lookup"><span data-stu-id="07e4c-603">Details about this type of deployment are listed here: <https://docs.microsoft.com/sql/relational-databases/databases/sql-server-data-files-in-microsoft-azure></span></span>

<span data-ttu-id="07e4c-604">Pour stocker des fichiers de données SQL Server directement dans Stockage Premium Azure, vous devez vous procurer la version minimale du correctif SQL Server 2014 documentée ici : <https://support.microsoft.com/kb/3063054>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-604">In order to store SQL Server data files directly on Azure Premium Storage, you need to have a minimum SQL Server 2014 patch release, which is documented here: <https://support.microsoft.com/kb/3063054>.</span></span> <span data-ttu-id="07e4c-605">La fonctionnalité permettant de stocker des fichiers de données SQL Server sur le stockage Azure standard fonctionne avec la version finale de SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="07e4c-605">Storing SQL Server data files on Azure Standard Storage does work with the released version of SQL Server 2014.</span></span> <span data-ttu-id="07e4c-606">Toutefois, ces mêmes correctifs contiennent une autre série de correctifs, qui renforcent la fiabilité du Stockage Blob Azure lorsque celui-ci est directement utilisé pour les sauvegardes et les fichiers de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-606">However, the very same patches contain another series of fixes, which make the direct usage of Azure Blob Storage for SQL Server data files and backups more reliable.</span></span> <span data-ttu-id="07e4c-607">Pour cette raison, nous recommandons généralement l’utilisation de ces correctifs.</span><span class="sxs-lookup"><span data-stu-id="07e4c-607">Therefore we recommend using these patches in general.</span></span>

### <a name="sql-server-2014-buffer-pool-extension"></a><span data-ttu-id="07e4c-608">Fonctionnalité d’extension du pool de mémoires tampons de SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="07e4c-608">SQL Server 2014 Buffer Pool Extension</span></span>
<span data-ttu-id="07e4c-609">SQL Server 2014 propose une nouvelle fonctionnalité appelée « extension du pool de mémoires tampons ».</span><span class="sxs-lookup"><span data-stu-id="07e4c-609">SQL Server 2014 introduced a new feature, which is called Buffer Pool Extension.</span></span> <span data-ttu-id="07e4c-610">Cette fonctionnalité permet d’étendre le pool de mémoires tampons de SQL Server conservé en mémoire grâce à un cache de deuxième niveau, sauvegardé par les disques SSD locaux d’un serveur ou d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-610">This functionality extends the buffer pool of SQL Server, which is kept in memory with a second level cache that is backed by local SSDs of a server or VM.</span></span> <span data-ttu-id="07e4c-611">Cela permet de conserver une plage de travail plus étendue pour les données « en mémoire ».</span><span class="sxs-lookup"><span data-stu-id="07e4c-611">This enables to keep a larger working set of data ‘in memory’.</span></span> <span data-ttu-id="07e4c-612">Par rapport à l’accès au stockage Azure standard, l’accès à l’extension du pool de mémoires tampons stocké sur les disques SSD locaux d’une machine virtuelle est beaucoup plus rapide.</span><span class="sxs-lookup"><span data-stu-id="07e4c-612">Compared to accessing Azure Standard Storage the access into the extension of the buffer pool, which is stored on local SSDs of an Azure VM is many factors faster.</span></span>  <span data-ttu-id="07e4c-613">Par conséquent, il peut s’avérer très pertinent de tirer parti du lecteur D:\ local des types de machine virtuelle présentant un excellent nombre d’E/S par seconde et un très bon débit, afin de réduire la charge d’E/S par seconde affectant Azure Storage et d’améliorer de façon très nette le temps de réponse des requêtes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-613">Therefore, leveraging the local D:\ drive of the VM types that have excellent IOPS and throughput could be a very reasonable way to reduce the IOPS load against Azure Storage and improve response times of queries dramatically.</span></span> <span data-ttu-id="07e4c-614">Cela se révèle d’autant plus vrai lorsque vous n’utilisez pas Premium Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-614">This applies especially when not using Premium Storage.</span></span> <span data-ttu-id="07e4c-615">En effet, si vous utilisez le Stockage Premium et le cache de lecture Azure Premium sur le nœud de calcul, comme recommandé pour les fichiers de données, il ne doit y avoir aucune différence majeure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-615">In case of Premium Storage and the usage of the Premium Azure Read Cache on the compute node, as recommended for data files, no significant differences are expected.</span></span> <span data-ttu-id="07e4c-616">En effet, les deux caches (le cache de lecture Premium Storage et la fonction d’extension du pool de mémoires tampons SQL Server) utilisent les disques locaux des nœuds de traitement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-616">Reason is that both caches (SQL Server Buffer Pool Extension and Premium Storage Read Cache) are using the local disks of the compute nodes.</span></span>
<span data-ttu-id="07e4c-617">Pour plus d’informations sur cette fonctionnalité, consultez la documentation : <https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension></span><span class="sxs-lookup"><span data-stu-id="07e4c-617">For more details about this functionality, check this documentation: <https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension></span></span> 

### <a name="backuprecovery-considerations-for-sql-server"></a><span data-ttu-id="07e4c-618">Considérations relatives à la sauvegarde/restauration pour SQL Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-618">Backup/Recovery considerations for SQL Server</span></span>
<span data-ttu-id="07e4c-619">Lors du déploiement de SQL Server dans Azure, votre méthodologie de sauvegarde doit être passée en revue.</span><span class="sxs-lookup"><span data-stu-id="07e4c-619">When deploying SQL Server into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="07e4c-620">Même si le système n’est pas un système productif, la base de données SAP hébergée par SQL Server doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-620">Even if the system is not a productive system, the SAP database hosted by SQL Server must be backed up periodically.</span></span> <span data-ttu-id="07e4c-621">Comme Azure Storage conserve trois images, la sauvegarde joue désormais un rôle moins important en matière de compensation des pannes du stockage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-621">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="07e4c-622">La raison principale du maintien d’un plan de sauvegarde et de récupération approprié réside davantage dans le fait que vous pouvez compenser les erreurs logiques/manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-622">The priority reason for maintaining a proper backup and recovery plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="07e4c-623">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un moment donné, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-623">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="07e4c-624">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-624">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="07e4c-625">Vous pouvez sauvegarder des données SQL Server sur Azure Storage de trois manières différentes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-625">There are three different ways to backup SQL Server to Azure Storage:</span></span>

1. <span data-ttu-id="07e4c-626">SQL Server 2012 CU4 et les versions ultérieures peuvent sauvegarder les bases de données sur une URL, en mode natif.</span><span class="sxs-lookup"><span data-stu-id="07e4c-626">SQL Server 2012 CU4 and higher can natively backup databases to a URL.</span></span> <span data-ttu-id="07e4c-627">Cette opération est détaillée dans le billet de blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx)(Nouvelles fonctionnalités de SQL Server 2014 - Partie 5 - Améliorations apportées à la sauvegarde et à la restauration).</span><span class="sxs-lookup"><span data-stu-id="07e4c-627">This is detailed in the blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span></span> <span data-ttu-id="07e4c-628">Voir le chapitre [SQL Server 2012 SP1 CU4 et versions ultérieures][dbms-guide-5.5.1].</span><span class="sxs-lookup"><span data-stu-id="07e4c-628">See chapter [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1].</span></span>
2. <span data-ttu-id="07e4c-629">Les versions de SQL Server antérieures à SQL 2012 CU4 peuvent exploiter une fonctionnalité de redirection pour sauvegarder leurs données sur un disque VHD et déplacer le flux d’écriture vers un emplacement Azure Storage qui a été configuré.</span><span class="sxs-lookup"><span data-stu-id="07e4c-629">SQL Server releases prior to SQL 2012 CU4 can use a redirection functionality to backup to a VHD and basically move the write stream towards an Azure Storage location that has been configured.</span></span> <span data-ttu-id="07e4c-630">Voir le chapitre [SQL Server 2012 SP1 CU3 et versions antérieures][dbms-guide-5.5.2].</span><span class="sxs-lookup"><span data-stu-id="07e4c-630">See chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2].</span></span>
3. <span data-ttu-id="07e4c-631">La dernière méthode consiste à exécuter une commande de sauvegarde des données SQL Server sur une unité de disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-631">The final method is to perform a conventional SQL Server backup to disk command onto a disk device.</span></span> <span data-ttu-id="07e4c-632">Cette procédure, identique à celle du modèle de déploiement local, n’est pas détaillée dans ce document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-632">This is identical to the on-premises deployment pattern and is not discussed in detail in this document.</span></span>

#### <span data-ttu-id="07e4c-633"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 et versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="07e4c-633"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 and later</span></span>
<span data-ttu-id="07e4c-634">Cette fonctionnalité vous permet de sauvegarder directement les données sur le stockage d’objets blob Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-634">This functionality allows you to directly backup to Azure BLOB storage.</span></span> <span data-ttu-id="07e4c-635">Sans cette méthode, vous devez sauvegarder les données sur d’autres disques, ce qui monopolise la capacité des disques, ainsi que les E/S par seconde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-635">Without this method, you must backup to other disks, which would consume disk and IOPS capacity.</span></span> <span data-ttu-id="07e4c-636">L’idée de base est la suivante :</span><span class="sxs-lookup"><span data-stu-id="07e4c-636">The idea is basically this:</span></span>

 ![Utilisation de la sauvegarde SQL Server 2012 sur l’objet blob Microsoft Azure Storage][dbms-guide-figure-400]

<span data-ttu-id="07e4c-638">Dans ce cas, il n’est pas nécessaire d’utiliser des disques pour stocker les données de sauvegarde SQL Server, ce qui est un avantage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-638">The advantage in this case is that one doesn’t need to spend disks to store SQL Server backups on.</span></span> <span data-ttu-id="07e4c-639">Ainsi, un nombre moins important de disques est alloué et la totalité de la bande passante associée aux E/S par seconde des disques peut être utilisée pour les fichiers journaux et les données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-639">So you have fewer disks allocated and the whole bandwidth of disk IOPS can be used for data and log files.</span></span> <span data-ttu-id="07e4c-640">N’oubliez pas que la taille maximale d’une sauvegarde est limitée à un 1 To, comme décrit dans la section « Limitations » de cet article : <https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url#limitations>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-640">Note that the maximum size of a backup is limited to a maximum of 1 TB as documented in the section ‘Limitations’ in this article: <https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url#limitations>.</span></span> <span data-ttu-id="07e4c-641">Si, malgré l’utilisation de la compression de sauvegarde SQL Server, la taille de la sauvegarde dépasse 1 To, la fonctionnalité décrite dans le chapitre [SQL Server 2012 SP1 CU3 et versions antérieures][dbms-guide-5.5.2] du présent document doit être utilisée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-641">If the backup size, despite using SQL Server Backup compression would exceed 1 TB in size, the functionality described in chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] in this document needs to be used.</span></span>

<span data-ttu-id="07e4c-642">La [documentation associée](https://docs.microsoft.com/sql/relational-databases/backup-restore/restoring-from-backups-stored-in-microsoft-azure) décrivant la restauration des bases de données à partir de sauvegardes sur le magasin d’objets blob Azure vous recommande de ne pas restaurer directement les données depuis ce magasin si la taille des sauvegardes est supérieure à 25 Go.</span><span class="sxs-lookup"><span data-stu-id="07e4c-642">[Related documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/restoring-from-backups-stored-in-microsoft-azure) describing the restore of databases from backups against Azure Blob Store recommend not to restore directly from Azure BLOB store if the backup is >25GB.</span></span> <span data-ttu-id="07e4c-643">La recommandation indiquée dans cet article repose simplement sur des considérations relatives aux performances, et non sur des restrictions fonctionnelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-643">The recommendation in this article is simply based on performance considerations and not due to functional restrictions.</span></span> <span data-ttu-id="07e4c-644">Par conséquent, différentes conditions peuvent s’appliquer au cas par cas.</span><span class="sxs-lookup"><span data-stu-id="07e4c-644">Therefore, different conditions may apply on a case by case basis.</span></span>

<span data-ttu-id="07e4c-645">Pour des informations sur la configuration et l’exploitation de ce type de sauvegarde, voir [ce](https://docs.microsoft.com/sql/relational-databases/tutorial-use-azure-blob-storage-service-with-sql-server-2016) didacticiel</span><span class="sxs-lookup"><span data-stu-id="07e4c-645">Documentation on how this type of backup is set up and leveraged can be found in [this](https://docs.microsoft.com/sql/relational-databases/tutorial-use-azure-blob-storage-service-with-sql-server-2016) tutorial</span></span>

<span data-ttu-id="07e4c-646">Un exemple de séquence d’étapes est détaillé [ici](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url).</span><span class="sxs-lookup"><span data-stu-id="07e4c-646">An example of the sequence of steps can be read [here](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url).</span></span>

<span data-ttu-id="07e4c-647">Lors de l’automatisation des sauvegardes, il est primordial de s’assurer que les objets blob de chaque sauvegarde portent des noms différents.</span><span class="sxs-lookup"><span data-stu-id="07e4c-647">Automating backups, it is of highest importance to make sure that the BLOBs for each backup are named differently.</span></span> <span data-ttu-id="07e4c-648">Dans le cas contraire, ils sont remplacés et la chaîne de restauration est interrompue.</span><span class="sxs-lookup"><span data-stu-id="07e4c-648">Otherwise they are overwritten and the restore chain is broken.</span></span>

<span data-ttu-id="07e4c-649">Afin de ne pas mélanger les éléments des trois types de sauvegarde, nous vous invitons à créer des conteneurs distincts sous le compte de stockage utilisé pour les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-649">In order not to mix up things between the three different types of backups, it is advisable to create different containers underneath the storage account used for backups.</span></span> <span data-ttu-id="07e4c-650">Les conteneurs peuvent être créés par machine virtuelle uniquement, ou par type de sauvegarde et de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-650">The containers could be by VM only or by VM and Backup type.</span></span> <span data-ttu-id="07e4c-651">Le schéma peut ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="07e4c-651">The schema could look like:</span></span>

 ![Utilisation de la sauvegarde SQL Server 2012 sur l’objet blob Microsoft Azure Storage : différents conteneurs sous des comptes de stockage distincts][dbms-guide-figure-500]

<span data-ttu-id="07e4c-653">Dans l’exemple ci-dessus, les sauvegardes ne peuvent pas être effectuées sur le compte de stockage dans lequel les machines virtuelles sont déployées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-653">In the example above, the backups would not be performed into the same storage account where the VMs are deployed.</span></span> <span data-ttu-id="07e4c-654">Un nouveau compte de stockage est prévu spécialement pour les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-654">There would be a new storage account specifically for the backups.</span></span> <span data-ttu-id="07e4c-655">Au sein des comptes de stockage, des conteneurs différents sont créés à l’aide de la combinaison du nom de la machine virtuelle et du type de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-655">Within the storage accounts, there would be different containers created with a matrix of the type of backup and the VM name.</span></span> <span data-ttu-id="07e4c-656">Cette segmentation facilite l’administration des sauvegardes des différentes machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-656">Such segmentation makes it easier to administrate the backups of the different VMs.</span></span>

<span data-ttu-id="07e4c-657">Les objets blob sur lesquels les sauvegardes sont directement écrites ne sont pas inclus dans le nombre de disques de données d’une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-657">The BLOBs one directly writes the backups to, are not adding to the count of the data disks of a VM.</span></span> <span data-ttu-id="07e4c-658">Par conséquent, il est possible d’augmenter le nombre maximal de disques de données montés qui sont associés à la SKU de machine virtuelle pour le fichier journal de transactions et les données, tout en étant à même d’exécuter la sauvegarde d’un conteneur de stockage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-658">Hence one could maximize the maximum of data disks mounted of the specific VM SKU for the data and transaction log file and still execute a backup against a storage container.</span></span> 

#### <span data-ttu-id="07e4c-659"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 et versions antérieures</span><span class="sxs-lookup"><span data-stu-id="07e4c-659"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 and earlier releases</span></span>
<span data-ttu-id="07e4c-660">La première étape à effectuer pour exécuter une sauvegarde directement dans le Stockage Azure consiste à télécharger le fichier msi lié à [cet article](https://www.microsoft.com/download/details.aspx?id=40740) de la Base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="07e4c-660">The first step you must perform in order to achieve a backup directly against Azure Storage would be to download the msi, which is linked to [this](https://www.microsoft.com/download/details.aspx?id=40740) KBA article.</span></span>

<span data-ttu-id="07e4c-661">Téléchargez le fichier d’installation x64 et la documentation associée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-661">Download the x64 installation file and the documentation.</span></span> <span data-ttu-id="07e4c-662">Ce fichier installe un programme appelé Microsoft SQL Server Backup to Microsoft Azure Tool.</span><span class="sxs-lookup"><span data-stu-id="07e4c-662">The file installs a program called: ‘Microsoft SQL Server Backup to Microsoft Azure Tool’.</span></span> <span data-ttu-id="07e4c-663">Lisez attentivement la documentation du produit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-663">Read the documentation of the product thoroughly.</span></span>  <span data-ttu-id="07e4c-664">De manière générale, cet outil fonctionne de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="07e4c-664">The tool basically works in the following way:</span></span>

* <span data-ttu-id="07e4c-665">Du côté SQL Server, un emplacement de disque est défini pour la sauvegarde de SQL Server (n’utilisez pas le lecteur D:\ à cette fin).</span><span class="sxs-lookup"><span data-stu-id="07e4c-665">From the SQL Server side, a disk location for the SQL Server backup is defined (don’t use the D:\ drive for this).</span></span>
* <span data-ttu-id="07e4c-666">L’outil vous permet de définir des règles qui peuvent être utilisées pour diriger différents types de sauvegardes vers différents conteneurs du Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-666">The tool allows you to define rules, which can be used to direct different types of backups to different Azure Storage containers.</span></span>
* <span data-ttu-id="07e4c-667">Une fois les règles en place, l’outil redirige le flux d’écriture de la sauvegarde vers l’un des disques VHD/disques, à l’emplacement Stockage Azure qui a été défini précédemment.</span><span class="sxs-lookup"><span data-stu-id="07e4c-667">Once the rules are in place, the tool redirects the write stream of the backup to one of the VHDs/disks to the Azure Storage location, which was defined earlier.</span></span>
* <span data-ttu-id="07e4c-668">L’outil laisse un fichier stub de quelques kilo-octets sur le disque ou le disque dur virtuel qui a été défini pour la sauvegarde SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-668">The tool leaves a small stub file of a few KB size on the VHD/Disk, which was defined for the SQL Server backup.</span></span> <span data-ttu-id="07e4c-669">**Ce fichier doit être conservé à l’emplacement de stockage, car il est requis pour effectuer à nouveau une restauration depuis Azure Storage.**</span><span class="sxs-lookup"><span data-stu-id="07e4c-669">**This file should be left on the storage location since it is required to restore again from Azure Storage.**</span></span>
  * <span data-ttu-id="07e4c-670">Si vous avez perdu le fichier stub (par exemple, à cause de la défaillance du support de stockage qui l’héberge) et que vous avez choisi l’option de sauvegarde vers un compte Stockage Microsoft Azure, vous pouvez récupérer ce fichier stub via le Stockage Microsoft Azure en le téléchargeant à partir du conteneur de stockage dans lequel il a été placé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-670">If you have lost the stub file (for example through loss of the storage media that contained the stub file) and you have chosen the option of backing up to a Microsoft Azure Storage account, you may recover the stub file through Microsoft Azure Storage by downloading it from the storage container in which it was placed.</span></span> <span data-ttu-id="07e4c-671">Vous devez ensuite placer ce fichier stub dans un dossier figurant sur l’ordinateur local sur lequel l’outil est configuré pour détecter et charger les données vers le même conteneur, avec le même mot de passe de chiffrement (si le chiffrement est utilisé avec la règle d’origine).</span><span class="sxs-lookup"><span data-stu-id="07e4c-671">You should then place the stub file into a folder on the local machine where the Tool is configured to detect and upload to the same container with the same encryption password if encryption was used with the original rule.</span></span> 

<span data-ttu-id="07e4c-672">Cela signifie que le schéma décrit ci-dessus pour les versions plus récentes de SQL Server peut également être mis en place pour les versions de SQL Server qui n’autorisent pas d’adresse directe pour un emplacement Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-672">This means the schema as described above for more recent releases of SQL Server can be put in place as well for SQL Server releases, which are not allowing direct address an Azure Storage location.</span></span>

<span data-ttu-id="07e4c-673">Cette méthode ne doit pas être utilisée avec les versions plus récentes de SQL Server qui prennent en charge la sauvegarde en mode natif dans le Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-673">This method should not be used with more recent SQL Server releases, which support backing up natively against Azure Storage.</span></span> <span data-ttu-id="07e4c-674">Les exceptions concernent les cas où des limitations affectant la sauvegarde en mode natif dans Azure empêchent l’exécution de sauvegardes en mode natif dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-674">Exceptions are where limitations of the native backup into Azure are blocking native backup execution into Azure.</span></span>

#### <a name="other-possibilities-to-backup-sql-server-databases"></a><span data-ttu-id="07e4c-675">Autres méthodes de sauvegarde de bases de données SQL Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-675">Other possibilities to backup SQL Server databases</span></span>
<span data-ttu-id="07e4c-676">Il existe d’autres méthodes de sauvegarde des bases de données, telles que l’association de disques de données supplémentaires à la machine virtuelle que vous utilisez pour stocker les sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-676">Other possibilities to backup databases is to attach additional data disks to a VM that you use to store backups on.</span></span> <span data-ttu-id="07e4c-677">Dans ce cas, vous devez vérifier que les disques ne sont pas saturés lorsqu’ils sont exécutés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-677">In such a case, you would need to make sure that the disks are not running full.</span></span> <span data-ttu-id="07e4c-678">Si tel est le cas, vous devez démonter le disque concerné, « l’archiver », puis le remplacer par un disque vide.</span><span class="sxs-lookup"><span data-stu-id="07e4c-678">If that is the case, you would need to unmount the disks and so to speak ‘archive’ it and replace it with a new empty disk.</span></span> <span data-ttu-id="07e4c-679">Si vous optez pour cette méthode, vous devez vous assurer que ces disques VHD se trouvent sur des comptes Azure Storage différents de ceux des disques VHD présentant les fichiers de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-679">If you go down that path, you want to keep these VHDs in separate Azure Storage Accounts from the ones that the VHDs with the database files.</span></span>

<span data-ttu-id="07e4c-680">Une deuxième méthode consiste à utiliser une machine virtuelle volumineuse, qui peut être associée à plusieurs disques (par exemple, un système D14 avec 32 disques VHD).</span><span class="sxs-lookup"><span data-stu-id="07e4c-680">A second possibility is to use a large VM that can have many disks attached, for example a D14 with 32VHDs.</span></span> <span data-ttu-id="07e4c-681">Utilisez les espaces de stockage pour créer un environnement flexible, dans lequel vous pouvez créer des partages qui seront ensuite utilisés en tant que cibles de sauvegarde pour les différents serveurs SGBD (système de gestion de base de données).</span><span class="sxs-lookup"><span data-stu-id="07e4c-681">Use Storage Spaces to build a flexible environment where you could build shares that are used then as backup targets for the different DBMS servers.</span></span>

<span data-ttu-id="07e4c-682">Certaines meilleures pratiques sont également décrites [ici](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) .</span><span class="sxs-lookup"><span data-stu-id="07e4c-682">Some best practices got documented [here](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) as well.</span></span> 

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="07e4c-683">Considérations sur les performances des sauvegardes/restaurations</span><span class="sxs-lookup"><span data-stu-id="07e4c-683">Performance considerations for backups/restores</span></span>
<span data-ttu-id="07e4c-684">À l’instar des déploiements complets, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-684">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="07e4c-685">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles ayant jusqu’à huit threads d’UC.</span><span class="sxs-lookup"><span data-stu-id="07e4c-685">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="07e4c-686">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-686">Therefore, one can assume:</span></span>

* <span data-ttu-id="07e4c-687">Moins il y a de disques utilisés pour stocker les fichiers de données, plus le débit global de lecture est réduit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-687">The fewer the number of disks used to store the data files, the smaller the overall throughput in reading.</span></span>
* <span data-ttu-id="07e4c-688">Moins il y a de threads d’UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est important.</span><span class="sxs-lookup"><span data-stu-id="07e4c-688">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression.</span></span>
* <span data-ttu-id="07e4c-689">Moins il y a de cibles d’écriture de la sauvegarde (objets blob, disques, disques VHD), plus le débit est réduit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-689">The fewer targets (BLOBs, VHDs, or disks) to write the backup to, the lesser the throughput.</span></span>
* <span data-ttu-id="07e4c-690">Plus la taille des machines virtuelles est réduite, plus le quota du débit de stockage sera faible lors de l’écriture et de la lecture depuis Azure Storage,</span><span class="sxs-lookup"><span data-stu-id="07e4c-690">The smaller the VM size, the smaller the storage throughput quota writing and reading from Azure Storage.</span></span> <span data-ttu-id="07e4c-691">que les sauvegardes soient directement stockées sur un objet blob Azure ou sur des disques VHD, eux-mêmes stockés sur des objets blob.</span><span class="sxs-lookup"><span data-stu-id="07e4c-691">Independent of whether the backups are directly stored on Azure Blob or whether they are stored in VHDs that again are stored in Azure Blobs.</span></span>

<span data-ttu-id="07e4c-692">Lorsque vous utilisez un objet blob Microsoft Azure Storage en tant que cible de sauvegarde dans les versions les plus récentes, vous ne pouvez indiquer qu’une seule URL cible pour chaque sauvegarde spécifique.</span><span class="sxs-lookup"><span data-stu-id="07e4c-692">When using a Microsoft Azure Storage BLOB as the backup target in more recent releases, you are restricted to designating only one URL target for each specific backup.</span></span>

<span data-ttu-id="07e4c-693">Cependant, lorsque vous utilisez l’outil Microsoft SQL Server Backup to Microsoft Azure Tool dans des versions antérieures, vous pouvez définir plusieurs cibles de fichier.</span><span class="sxs-lookup"><span data-stu-id="07e4c-693">But when using the ‘Microsoft SQL Server Backup to Microsoft Azure Tool’ in older releases, you can define more than one file target.</span></span> <span data-ttu-id="07e4c-694">Puisqu’il existe plusieurs cibles, la sauvegarde peut évoluer ; le débit associé augmente.</span><span class="sxs-lookup"><span data-stu-id="07e4c-694">With more than one target, the backup can scale and the throughput of the backup is higher.</span></span> <span data-ttu-id="07e4c-695">Cela donne également lieu à la création de plusieurs fichiers sur le compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-695">This would result then in multiple files as well in the Azure Storage account.</span></span> <span data-ttu-id="07e4c-696">Lors de nos tests, nous avons constaté que l’utilisation de plusieurs destinations de fichiers permettait réellement d’atteindre le débit obtenu avec les extensions de sauvegarde implémentées dans SQL Server 2012 SP1 CU4 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="07e4c-696">In our testing, using multiple file destinations one can definitely achieve the throughput, which one could achieve with the backup extensions implemented in from SQL Server 2012 SP1 CU4 on.</span></span> <span data-ttu-id="07e4c-697">Par ailleurs, vous n’êtes pas contraint de respecter la limite d’1 To imposée par la fonction de sauvegarde en mode natif dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-697">You also are not blocked by the 1TB limit as in the native backup into Azure.</span></span>

<span data-ttu-id="07e4c-698">Toutefois, n’oubliez pas que le débit dépend également de l’emplacement du compte Azure Storage que vous utilisez pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-698">However, keep in mind, the throughput also is dependent on the location of the Azure Storage Account you use for the backup.</span></span> <span data-ttu-id="07e4c-699">Il peut être pertinent de placer le compte de stockage dans une région différente de la région au sein de laquelle les machines virtuelles s’exécutent.</span><span class="sxs-lookup"><span data-stu-id="07e4c-699">An idea might be to locate the storage account in a different region than the VMs are running in.</span></span> <span data-ttu-id="07e4c-700">Vous pouvez exécuter la configuration de la machine virtuelle en Europe occidentale, tout en plaçant le compte de stockage que vous utilisez pour la sauvegarde en Europe du Nord.</span><span class="sxs-lookup"><span data-stu-id="07e4c-700">For example you would run the VM configuration in West-Europe, but put the Storage Account that you use to back up against in North-Europe.</span></span> <span data-ttu-id="07e4c-701">Cela affecte certainement le débit des sauvegardes. Il est peu probable que le débit généré atteigne 150 Mbits/s, comme dans certains cas où le stockage cible et les machines virtuelles s’exécutent au sein du même centre de données régional.</span><span class="sxs-lookup"><span data-stu-id="07e4c-701">That certainly has an impact on the backup throughput and is not likely to generate a throughput of 150MB/sec as it seems to be possible in cases where the target storage and the VMs are running in the same regional datacenter.</span></span>

#### <a name="managing-backup-blobs"></a><span data-ttu-id="07e4c-702">Gestion des objets blob de sauvegarde</span><span class="sxs-lookup"><span data-stu-id="07e4c-702">Managing Backup BLOBs</span></span>
<span data-ttu-id="07e4c-703">Si vous voulez gérer les sauvegardes vous-même, il y a une exigence à respecter.</span><span class="sxs-lookup"><span data-stu-id="07e4c-703">There is a requirement to manage the backups on your own.</span></span> <span data-ttu-id="07e4c-704">Étant donné que l’exécution de sauvegardes fréquentes de fichiers journaux de transactions est censée créer de nombreux objets blob, la gestion de ces objets peut rapidement surcharger le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-704">Since the expectation is that many blobs are created by executing frequent transaction log backups, administration of those blobs easily can overburden the Azure portal.</span></span> <span data-ttu-id="07e4c-705">Pour cette raison, il est recommandé d’utiliser un explorateur de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-705">Therefore, it is recommendable to leverage an Azure storage explorer.</span></span> <span data-ttu-id="07e4c-706">Il existe plusieurs explorateurs susceptibles de vous aider à gérer efficacement un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-706">There are several good ones available, which can help to manage an Azure storage account</span></span>

* <span data-ttu-id="07e4c-707">Microsoft Visual Studio avec le Kit de développement logiciel (SDK) Azure installé (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="07e4c-707">Microsoft Visual Studio with Azure SDK installed (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="07e4c-708">Explorateur de stockage Microsoft Azure (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="07e4c-708">Microsoft Azure Storage Explorer (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="07e4c-709">Outils tiers</span><span class="sxs-lookup"><span data-stu-id="07e4c-709">Third party tools</span></span>

<span data-ttu-id="07e4c-710">Pour une description plus complète de la sauvegarde et de SAP sur Azure, consultez le [Guide de la sauvegarde SAP](sap-hana-backup-guide.md).</span><span class="sxs-lookup"><span data-stu-id="07e4c-710">For a more complete discussion of Backup and SAP on Azure, refer to [the SAP Backup Guide](sap-hana-backup-guide.md) for more information.</span></span>

### <span data-ttu-id="07e4c-711"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Utilisation d’une image SQL Server issue de la Place de marché Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-711"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Using a SQL Server image out of the Microsoft Azure Marketplace</span></span>
<span data-ttu-id="07e4c-712">Dans la Place de marché Azure, Microsoft propose des machines virtuelles qui contiennent déjà des versions de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-712">Microsoft offers VMs in the Azure Marketplace, which already contain versions of SQL Server.</span></span> <span data-ttu-id="07e4c-713">Pour les clients SAP qui requièrent des licences pour SQL Server et Windows, cela peut être l’occasion de répondre aux besoins de base en termes de licences, en configurant des machines virtuelles déjà dotées de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-713">For SAP customers who require licenses for SQL Server and Windows, this might be an opportunity to basically cover the need for licenses by spinning up VMs with SQL Server already installed.</span></span> <span data-ttu-id="07e4c-714">Pour pouvoir utiliser ces images pour SAP, vous devez tenir compte des considérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-714">In order to use such images for SAP, the following considerations need to be made:</span></span>

* <span data-ttu-id="07e4c-715">Les versions de SQL Server autres que les versions d’évaluation nécessitent des frais d’acquisition plus élevés que les simples machines virtuelles uniquement dotées de Windows qui sont déployées depuis Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="07e4c-715">The SQL Server non-Evaluation versions acquire higher costs than just a ‘Windows-only’ VM deployed from Azure Marketplace.</span></span> <span data-ttu-id="07e4c-716">Pour comparer les prix,consultez les articles suivants : <https://azure.microsoft.com/pricing/details/virtual-machines/windows/> et <https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-enterprise/>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-716">See these articles to compare prices: <https://azure.microsoft.com/pricing/details/virtual-machines/windows/> and <https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-enterprise/>.</span></span> 
* <span data-ttu-id="07e4c-717">Vous pouvez uniquement utiliser les versions de SQL Server qui sont prises en charge par SAP, telles que SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="07e4c-717">You only can use SQL Server releases, which are supported by SAP, like SQL Server 2012.</span></span>
* <span data-ttu-id="07e4c-718">Le classement de l’instance SQL Server qui est installée dans les machines virtuelles proposées par la Place de marché ne correspond pas à celui que nécessite SAP NetWeaver pour l’instance SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-718">The collation of the SQL Server instance, which is installed in the VMs offered in the Azure Marketplace is not the collation SAP NetWeaver requires the SQL Server instance to run.</span></span> <span data-ttu-id="07e4c-719">Toutefois, vous pouvez modifier ce classement, en suivant les instructions de la section suivante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-719">You can change the collation though with the directions in the following section.</span></span>

#### <a name="changing-the-sql-server-collation-of-a-microsoft-windowssql-server-vm"></a><span data-ttu-id="07e4c-720">Modification du classement SQL Server d’une machine virtuelle Microsoft Windows/SQL Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-720">Changing the SQL Server Collation of a Microsoft Windows/SQL Server VM</span></span>
<span data-ttu-id="07e4c-721">Étant donné que les images SQL Server figurant dans la Place de marché Microsoft Azure ne sont pas configurées pour utiliser le classement exigé par les applications SAP NetWeaver, elles doivent être modifiées immédiatement après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-721">Since the SQL Server images in the Azure Marketplace are not set up to use the collation, which is required by SAP NetWeaver applications, it needs to be changed immediately after the deployment.</span></span> <span data-ttu-id="07e4c-722">Pour SQL Server 2012, vous pouvez exécuter cette opération en suivant la procédure ci-après dès que la machine virtuelle est déployée et qu’un administrateur peut se connecter à cette dernière :</span><span class="sxs-lookup"><span data-stu-id="07e4c-722">For SQL Server 2012, this can be done with the following steps as soon as the VM has been deployed and an administrator is able to log into the deployed VM:</span></span>

* <span data-ttu-id="07e4c-723">Ouvrez une fenêtre de commande Windows en tant qu’« administrateur ».</span><span class="sxs-lookup"><span data-stu-id="07e4c-723">Open a Windows Command Window ‘as administrator’.</span></span>
* <span data-ttu-id="07e4c-724">Remplacez le répertoire par celui-ci : C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span><span class="sxs-lookup"><span data-stu-id="07e4c-724">Change the directory to C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span></span>
* <span data-ttu-id="07e4c-725">Exécutez la commande suivante : Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span><span class="sxs-lookup"><span data-stu-id="07e4c-725">Execute the command: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span></span>   
  * <span data-ttu-id="07e4c-726">`<local_admin_account_name`> correspond au compte qui a été défini en tant que compte Administrateur lors du déploiement de la machine virtuelle pour la première fois, via la galerie.</span><span class="sxs-lookup"><span data-stu-id="07e4c-726">`<local_admin_account_name`> is the account, which was defined as the administrator account when deploying the VM for the first time through the gallery.</span></span>

<span data-ttu-id="07e4c-727">Le processus doit prendre quelques minutes seulement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-727">The process should only take a few minutes.</span></span> <span data-ttu-id="07e4c-728">Pour vérifier que le résultat attendu a été obtenu, effectuez les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-728">In order to make sure whether the step ended up with the correct result, perform the following steps:</span></span>

* <span data-ttu-id="07e4c-729">Ouvrez SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="07e4c-729">Open SQL Server Management Studio.</span></span>
* <span data-ttu-id="07e4c-730">Ouvrez une fenêtre Requête.</span><span class="sxs-lookup"><span data-stu-id="07e4c-730">Open a Query Window.</span></span>
* <span data-ttu-id="07e4c-731">Exécutez la commande sp_helpsort dans la base de données MASTER de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-731">Execute the command sp_helpsort in the SQL Server master database.</span></span>

<span data-ttu-id="07e4c-732">Le résultat doit être similaire à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="07e4c-732">The desired result should look like:</span></span>

    Latin1-General, binary code point comparison sort for Unicode Data, SQL Server Sort Order 40 on Code Page 850 for non-Unicode Data

<span data-ttu-id="07e4c-733">Si vous n’obtenez pas ce résultat, interrompez immédiatement le déploiement de SAP et cherchez à savoir pourquoi la commande n’a pas fonctionné comme prévu.</span><span class="sxs-lookup"><span data-stu-id="07e4c-733">If this is not the result, STOP deploying SAP and investigate why the setup command did not work as expected.</span></span> <span data-ttu-id="07e4c-734">Le système ne prend **PAS** en charge le déploiement d’applications SAP NetWeaver sur une instance SQL Server avec des pages de codes SQL autres que celle indiquée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="07e4c-734">Deployment of SAP NetWeaver applications onto SQL Server instance with different SQL Server codepages than the one mentioned above is **NOT** supported.</span></span>

### <a name="sql-server-high-availability-for-sap-in-azure"></a><span data-ttu-id="07e4c-735">Solutions SQL Server haute disponibilité pour SAP dans Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-735">SQL Server High-Availability for SAP in Azure</span></span>
<span data-ttu-id="07e4c-736">Comme indiqué plus haut, il n’est pas possible de créer le stockage partagé qui est nécessaire pour l’utilisation des anciennes fonctionnalités de haute disponibilité SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-736">As mentioned earlier in this paper, there is no possibility to create shared storage, which is necessary for the usage of the oldest SQL Server high availability functionality.</span></span> <span data-ttu-id="07e4c-737">Cette dernière permet d’installer deux instances SQL Server minimum au sein d’un cluster WSFC (Windows Server Failover Cluster) à l’aide d’un disque partagé pour les bases de données utilisateur (et de tempdb, en fin de compte).</span><span class="sxs-lookup"><span data-stu-id="07e4c-737">This functionality would install two or more SQL Server instances in a Windows Server Failover Cluster (WSFC) using a shared disk for the user databases (and eventually tempdb).</span></span> <span data-ttu-id="07e4c-738">Il s’agit depuis longtemps de la méthode standard pour assurer la haute disponibilité. Elle est également prise en charge par SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-738">This is the long time standard high availability method, which also is supported by SAP.</span></span> <span data-ttu-id="07e4c-739">Comme Azure ne prend pas en charge le stockage partagé, les configurations de haute disponibilité de SQL Server reposant sur un cluster de disque partagé sont impossibles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-739">Because Azure doesn’t support shared storage, SQL Server high availability configurations with a shared disk cluster configuration cannot be realized.</span></span> <span data-ttu-id="07e4c-740">Toutefois, de nombreuses autres méthodes sont toujours possibles. Elles sont décrites dans les sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-740">However, many other high availability methods are still possible and are described in the following sections.</span></span>

#### <a name="sql-server-log-shipping"></a><span data-ttu-id="07e4c-741">Copie des journaux de transaction SQL Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-741">SQL Server Log Shipping</span></span>
<span data-ttu-id="07e4c-742">L’une des méthodes permettant d’assurer la haute disponibilité est la copie des journaux de transaction SQL Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-742">One of the methods of high availability (HA) is SQL Server Log Shipping.</span></span> <span data-ttu-id="07e4c-743">Si les machines virtuelles prenant part à la configuration haute disponibilité disposent de la fonctionnalité de résolution de noms, il n’y a aucune difficulté. L’installation dans Azure ne diffère pas d’une installation effectuée en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-743">If the VMs participating in the HA configuration have working name resolution, there is no problem and the setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="07e4c-744">Il est déconseillé de se fier uniquement à la résolution IP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-744">It is not recommended to rely on IP resolution only.</span></span> <span data-ttu-id="07e4c-745">Pour en savoir plus sur la configuration de la copie des journaux de transaction et connaître les principes qui sous-tendent cette technologie, consultez la documentation suivante :</span><span class="sxs-lookup"><span data-stu-id="07e4c-745">With regards to setting up Log Shipping and the principles around Log Shipping, check this documentation:</span></span>

<span data-ttu-id="07e4c-746"><https://docs.microsoft.com/sql/database-engine/log-shipping/about-log-shipping-sql-server></span><span class="sxs-lookup"><span data-stu-id="07e4c-746"><https://docs.microsoft.com/sql/database-engine/log-shipping/about-log-shipping-sql-server></span></span>

<span data-ttu-id="07e4c-747">Pour réellement assurer leur haute disponibilité, vous devez déployer les machines virtuelles se trouvant au sein d’une configuration de copie des journaux de transaction de ce type, afin qu’elles soient placées dans le même groupe à haute disponibilité Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-747">In order to really achieve any high availability, one needs to deploy the VMs, which are within such a Log Shipping configuration to be within the same Azure Availability Set.</span></span>

#### <a name="database-mirroring"></a><span data-ttu-id="07e4c-748">Mise en miroir de bases de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-748">Database Mirroring</span></span>
<span data-ttu-id="07e4c-749">La mise en miroir de bases de données prise en charge par SAP (voir Note de SAP [965908]) s’appuie sur la définition d’un partenaire de basculement dans la chaîne de connexion SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-749">Database Mirroring as supported by SAP (see SAP Note [965908]) relies on defining a failover partner in the SAP connection string.</span></span> <span data-ttu-id="07e4c-750">Dans le cas de déploiements entre différents locaux, nous partons du principe que les deux machines virtuelles se trouvent au sein du même domaine, et que, au sein du contexte utilisateur dans lequel les deux instances SQL Server s’exécutent, ces dernières sont également des utilisateurs du domaine et disposent de privilèges adéquats dans les deux instances SQL Server concernées.</span><span class="sxs-lookup"><span data-stu-id="07e4c-750">For the Cross-Premises cases, we assume that the two VMs are in the same domain and that the user context the two SQL Server instances are running under a domain user as well and have sufficient privileges in the two SQL Server instances involved.</span></span> <span data-ttu-id="07e4c-751">Par conséquent, la procédure d’installation de la fonctionnalité de mise en miroir de bases de données dans Azure ne diffère pas de celle d’une configuration ou installation locale classique.</span><span class="sxs-lookup"><span data-stu-id="07e4c-751">Therefore, the setup of Database Mirroring in Azure does not differ between a typical on-premises setup/configuration.</span></span>

<span data-ttu-id="07e4c-752">Pour les déploiements sur cloud uniquement, la méthode la plus simple consiste à configurer un autre domaine dans Azure, afin que les machines virtuelles SGBD (système de gestion de base de données), ainsi que les machines virtuelles SAP dédiées, dans l’idéal, se trouvent au sein d’un même domaine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-752">As of Cloud-Only deployments, the easiest method is to have another domain setup in Azure to have those DBMS VMs (and ideally dedicated SAP VMs) within one domain.</span></span>

<span data-ttu-id="07e4c-753">Si vous ne pouvez pas utiliser de domaine, vous pouvez utiliser des certificats pour les points de terminaison de la mise en miroir de bases de données, comme décrit ici : <https://docs.microsoft.com/sql/database-engine/database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql></span><span class="sxs-lookup"><span data-stu-id="07e4c-753">If a domain is not possible, one can also use certificates for the database mirroring endpoints as described here: <https://docs.microsoft.com/sql/database-engine/database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql></span></span>

<span data-ttu-id="07e4c-754">Pour plus d’informations sur la configuration de la mise en miroir de bases de données dans Azure, consultez le didacticiel suivant : <https://docs.microsoft.com/sql/database-engine/database-mirroring/database-mirroring-sql-server></span><span class="sxs-lookup"><span data-stu-id="07e4c-754">A tutorial to set up Database Mirroring in Azure can be found here: <https://docs.microsoft.com/sql/database-engine/database-mirroring/database-mirroring-sql-server></span></span> 

#### <a name="sql-server-always-on"></a><span data-ttu-id="07e4c-755">SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="07e4c-755">SQL Server Always On</span></span>
<span data-ttu-id="07e4c-756">Étant donné que la fonction AlwaysOn est prise en charge pour les systèmes SAP locaux (voir la note SAP [1772688]), il est possible de l’utiliser avec SAP sur Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-756">As Always On is supported for SAP on-premises (see SAP Note [1772688]), it is supported to be used in combination with SAP in Azure.</span></span> <span data-ttu-id="07e4c-757">L’incapacité à créer des disques partagés dans Azure ne signifie pas qu’il est impossible de créer une configuration de cluster WSFC (Windows Server Failover Cluster) AlwaysOn entre différentes machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-757">The fact that you are not able to create shared disks in Azure doesn’t mean that one can’t create an Always On Windows Server Failover Cluster (WSFC) configuration between different VMs.</span></span> <span data-ttu-id="07e4c-758">Cela signifie simplement que vous n’avez pas la possibilité d’utiliser un disque partagé en tant que quorum dans la configuration de cluster.</span><span class="sxs-lookup"><span data-stu-id="07e4c-758">It only means that you do not have the possibility to use a shared disk as a quorum in the cluster configuration.</span></span> <span data-ttu-id="07e4c-759">Par conséquent, vous pouvez créer une configuration WSFC AlwaysOn dans Azure et ne pas sélectionner le type de quorum qui utilise un disque partagé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-759">Hence you can build an Always On WSFC configuration in Azure and simply not select the quorum type that utilizes shared disk.</span></span> <span data-ttu-id="07e4c-760">L’environnement Azure dans lequel ces machines virtuelles sont déployées doit résoudre les machines virtuelles par nom ; quant aux machines virtuelles, elles doivent être dans le même domaine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-760">The Azure environment those VMs are deployed in should resolve the VMs by name and the VMs should be in the same domain.</span></span> <span data-ttu-id="07e4c-761">Cela se révèle vrai pour Azure uniquement, dans le cas de déploiement entre différents locaux.</span><span class="sxs-lookup"><span data-stu-id="07e4c-761">This is true for Azure only and Cross-Premises deployments.</span></span> <span data-ttu-id="07e4c-762">Certaines considérations spécifiques doivent être prises en charge concernant le déploiement de l’écouteur de groupe de disponibilité SQL Server (à ne pas confondre avec le groupe à haute disponibilité Azure), car Azure n’autorise pas pour l’instant la simple création d’un objet AD/DNS, possible en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-762">There are some special considerations around deploying the SQL Server Availability Group Listener (not to be confused with the Azure Availability Set) since Azure at this point in time does not allow to simply create an AD/DNS object as it is possible on-premises.</span></span> <span data-ttu-id="07e4c-763">Par conséquent, certaines étapes d’installation différentes sont nécessaires pour surmonter le comportement spécifique d’Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-763">Therefore, some different installation steps are necessary to overcome the specific behavior of Azure.</span></span>

<span data-ttu-id="07e4c-764">Lors de l’utilisation de l’écouteur de groupe de disponibilité, tenez compte des considérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-764">Some considerations using an Availability Group Listener are:</span></span>

* <span data-ttu-id="07e4c-765">L’utilisation de l’écouteur de groupe de disponibilité n’est possible que sur un système Windows Server 2012 ou version ultérieure, utilisé en tant que SE invité de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-765">Using an Availability Group Listener is only possible with Windows Server 2012 or higher as guest OS of the VM.</span></span> <span data-ttu-id="07e4c-766">Pour Windows Server 2012, vous devez vous assurer que ce correctif est appliqué : <https://support.microsoft.com/kb/2854082></span><span class="sxs-lookup"><span data-stu-id="07e4c-766">For Windows Server 2012 you need to make sure that this patch is applied: <https://support.microsoft.com/kb/2854082></span></span> 
* <span data-ttu-id="07e4c-767">Ce correctif n’existe pas pour Windows Server 2008 R2. La fonction AlwaysOn doit être utilisée de la même manière que la fonctionnalité de mise en miroir de bases de données, via la spécification d’un partenaire de basculement dans la chaîne de connexion (grâce au paramètre SAP default.pfl dbs/mss/server : voir la note SAP [965908]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-767">For Windows Server 2008 R2 this patch does not exist and Always On would need to be used in the same manner as Database Mirroring by specifying a failover partner in the connections string (done through the SAP default.pfl parameter dbs/mss/server – see SAP Note [965908]).</span></span>
* <span data-ttu-id="07e4c-768">Lorsque vous utilisez un écouteur de groupe de disponibilité, les machines virtuelles de base de données doivent être connectées à un équilibreur de charge dédié.</span><span class="sxs-lookup"><span data-stu-id="07e4c-768">When using an Availability Group Listener, the Database VMs need to be connected to a dedicated Load Balancer.</span></span> <span data-ttu-id="07e4c-769">La résolution de noms dans un déploiement « cloud uniquement » nécessite la présence de l’ensemble des machines virtuelles d’un système SAP (serveurs d’applications, serveur SGBD et serveur (A)SCS) au sein du même réseau virtuel, ou exige la maintenance du fichier etc\host depuis la couche Application SAP, afin de faire en sorte que les noms des machines virtuelles SQL Server soient résolus.</span><span class="sxs-lookup"><span data-stu-id="07e4c-769">Name resolution in Cloud-Only deployments would either require all VMs of an SAP system (application servers, DBMS server, and (A)SCS server) are in the same virtual network or would require from an SAP application layer the maintenance of the etc\host file in order to get the VM names of the SQL Server VMs resolved.</span></span> <span data-ttu-id="07e4c-770">Pour éviter qu’Azure n’affecte de nouvelles adresses IP lorsque les deux machines virtuelles sont arrêtées en même temps, l’utilisateur doit affecter des adresses IP statiques aux interfaces réseau de ces machines au sein de la configuration AlwaysOn (la procédure de définition d’une adresse IP statique est décrite dans [cet article][virtual-networks-reserved-private-ip])</span><span class="sxs-lookup"><span data-stu-id="07e4c-770">In order to avoid that Azure is assigning new IP addresses in cases where both VMs incidentally are shutdown, one should assign static IP addresses to the network interfaces of those VMs in the Always On configuration (defining a static IP address is described in [this][virtual-networks-reserved-private-ip] article)</span></span>

[comment]: <> (Anciens blogs)
[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>) 
* <span data-ttu-id="07e4c-773">La création d’une configuration de cluster WSFC requiert certaines étapes spécifiques lorsque ce cluster doit se voir affecter une adresse IP spécifique, car la fonctionnalité actuelle d’Azure affecte au nom du cluster la même adresse IP que celle du nœud sur lequel le cluster est créé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-773">There are special steps required when building the WSFC cluster configuration where the cluster needs a special IP address assigned, because Azure with its current functionality would assign the cluster name the same IP address as the node the cluster is created on.</span></span> <span data-ttu-id="07e4c-774">Cela signifie que l’attribution d’une adresse IP différente au cluster doit faire l’objet d’une étape manuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-774">This means a manual step must be performed to assign a different IP address to the cluster.</span></span>
* <span data-ttu-id="07e4c-775">L’écouteur de groupe de disponibilité va être créé dans Azure avec les points de terminaison TCP/IP qui sont affectés aux machines virtuelles exécutant les réplicas principaux et secondaires du groupe de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="07e4c-775">The Availability Group Listener is going to be created in Azure with TCP/IP endpoints, which are assigned to the VMs running the primary and secondary replicas of the Availability group.</span></span>
* <span data-ttu-id="07e4c-776">Il peut être nécessaire de sécuriser ces points de terminaison avec des ACL.</span><span class="sxs-lookup"><span data-stu-id="07e4c-776">There might be a need to secure these endpoints with ACLs.</span></span>

[comment]: <> (Ancien blog TODO)
[comment]: <> (The detailed steps and necessities of installing an AlwaysOn configuration on Azure are best experienced when walking through the tutorial available [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups])
[comment]: <> (Preconfigured AlwaysOn setup via the Azure gallery <https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)
[comment]: <> (Creating an Availability Group Listener is best described in [this][virtual-machines-windows-classic-ps-sql-int-listener] tutorial)
[comment]: <> (Securing network endpoints with ACLs are explained best here:)
[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>) 

<span data-ttu-id="07e4c-786">Il est également possible de déployer un groupe de disponibilité AlwaysOn SQL Server sur différentes régions Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-786">It is possible to deploy a SQL Server Always On Availability Group over different Azure Regions as well.</span></span> <span data-ttu-id="07e4c-787">Cette fonctionnalité utilise la connectivité de réseau virtuel à réseau virtuel Azure ([plus d’informations ici][virtual-networks-configure-vnet-to-vnet-connection]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-787">This functionality leverages the Azure VNet-to-Vnet connectivity ([more details][virtual-networks-configure-vnet-to-vnet-connection]).</span></span>

[comment]: <> (Ancien blog TODO)
[comment]: <> (The setup of SQL Server AlwaysOn Availability Groups in such a scenario is described here: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.) 

#### <a name="summary-on-sql-server-high-availability-in-azure"></a><span data-ttu-id="07e4c-790">Haute disponibilité SQL Server dans Azure - Résumé</span><span class="sxs-lookup"><span data-stu-id="07e4c-790">Summary on SQL Server High Availability in Azure</span></span>
<span data-ttu-id="07e4c-791">Azure Storage protégeant le contenu, vous avez une raison de moins d’insister sur la création d’une image de secours.</span><span class="sxs-lookup"><span data-stu-id="07e4c-791">Given the fact that Azure Storage is protecting the content, there is one less reason to insist on a hot-standby image.</span></span> <span data-ttu-id="07e4c-792">Cela signifie que votre scénario de haute disponibilité doit uniquement protéger vos systèmes contre les problèmes suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-792">This means your High Availability scenario needs to only protect against the following cases:</span></span>

* <span data-ttu-id="07e4c-793">indisponibilité de la machine virtuelle dans son ensemble en raison d’une opération de maintenance sur le cluster de serveurs dans Azure, ou pour d’autres raisons ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-793">Unavailability of the VM as a whole due to maintenance on the server cluster in Azure or other reasons</span></span>
* <span data-ttu-id="07e4c-794">problèmes logiciels au sein de l’instance SQL Server ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-794">Software issues in the SQL Server instance</span></span>
* <span data-ttu-id="07e4c-795">protection contre les erreurs manuelles, lorsque les données sont supprimées et qu’une récupération jusqu’à une date et heure est requise.</span><span class="sxs-lookup"><span data-stu-id="07e4c-795">Protecting from manual error where data gets deleted and point-in-time recovery is needed</span></span>

<span data-ttu-id="07e4c-796">Si l’on étudie les technologies de mise en correspondance, on peut prétendre que les fonctionnalités de mise en miroir de bases de données et AlwaysOn sont susceptibles de gérer les deux premières situations, alors que la troisième situation ne peut être gérée que par la copie des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="07e4c-796">Looking at matching technologies one can argue that the first two cases can be covered by Database Mirroring or Always On, whereas the third case only can be covered by Log-Shipping.</span></span>

<span data-ttu-id="07e4c-797">Vous devez trouver l’équilibre entre l’installation d’AlwaysOn et la mise en miroir de bases de données. La première est plus complexe, mais offre des avantages spécifiques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-797">You need to balance the more complex setup of Always On, compared to Database Mirroring, with the advantages of Always On.</span></span> <span data-ttu-id="07e4c-798">Parmi ces avantages, on peut citer :</span><span class="sxs-lookup"><span data-stu-id="07e4c-798">Those advantages can be listed like:</span></span>

* <span data-ttu-id="07e4c-799">des réplicas secondaires accessibles en lecture ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-799">Readable secondary replicas.</span></span>
* <span data-ttu-id="07e4c-800">des sauvegardes à partir des réplicas secondaires ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-800">Backups from secondary replicas.</span></span>
* <span data-ttu-id="07e4c-801">meilleure extensibilité ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-801">Better scalability.</span></span>
* <span data-ttu-id="07e4c-802">possibilités de disposer de plusieurs réplicas secondaires.</span><span class="sxs-lookup"><span data-stu-id="07e4c-802">More than one secondary replicas.</span></span>

### <span data-ttu-id="07e4c-803"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>Résumé – SQL Server général pour SAP sur Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-803"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>General SQL Server for SAP on Azure Summary</span></span>
<span data-ttu-id="07e4c-804">Ce guide offre de nombreuses recommandations. Nous vous invitons à les parcourir plusieurs fois avant de planifier votre déploiement Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-804">There are many recommendations in this guide and we recommend you read it more than once before planning your Azure deployment.</span></span> <span data-ttu-id="07e4c-805">Cependant, de manière générale, vous devez suivre les dix points principaux spécifiques à la fonction SGBD (système de gestion de base de données) sur Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-805">In general, though, be sure to follow the top ten general DBMS on Azure specific points:</span></span>

[comment]: <> (Débit multiplié par 2,3 par rapport à quoi ? Than one VHD?)
1. <span data-ttu-id="07e4c-807">Utilisez la dernière version du système SGBD (système de gestion de base de données), comme SQL Server 2014, qui présente les avantages les plus intéressants dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-807">Use the latest DBMS release, like SQL Server 2014, that has the most advantages in Azure.</span></span> <span data-ttu-id="07e4c-808">Pour SQL Server, il s’agit de SQL Server 2012 SP1 CU4, qui inclut la fonctionnalité de sauvegarde dans le Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-808">For SQL Server, this is SQL Server 2012 SP1 CU4, which would include the feature of backing up against Azure Storage.</span></span> <span data-ttu-id="07e4c-809">Toutefois, en association avec SAP, nous recommandons au moins la version SQL Server 2014 SP1 CU1 ou SQL Server 2012 SP2 et la dernière unité de capacité.</span><span class="sxs-lookup"><span data-stu-id="07e4c-809">However, in conjunction with SAP we would recommend at least SQL Server 2014 SP1 CU1 or SQL Server 2012 SP2 and the latest CU.</span></span>
2. <span data-ttu-id="07e4c-810">Planifiez avec soin votre paysage de système SAP dans Azure, afin de trouver l’équilibre entre la disposition des fichiers de données et les restrictions d’Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-810">Carefully plan your SAP system landscape in Azure to balance the data file layout and Azure restrictions:</span></span>
   * <span data-ttu-id="07e4c-811">Évitez d’utiliser un trop grand nombre de disques. Cependant, vous devez en configurer suffisamment pour atteindre le nombre d’E/S par seconde nécessaire.</span><span class="sxs-lookup"><span data-stu-id="07e4c-811">Don’t have too many disks, but have enough to ensure you can reach your required IOPS.</span></span>
   * <span data-ttu-id="07e4c-812">Si vous n’utilisez pas de disques managés, n’oubliez pas que les E/S par seconde sont limitées pour chaque compte Stockage Azure, et que les comptes de stockage sont limités au sein de chaque abonnement Azure ([plus d’informations ici][azure-subscription-service-limits]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-812">If you don't use Managed Disks, remember that IOPS are also limited per Azure Storage Account and that Storage Accounts are limited within each Azure subscription ([more details][azure-subscription-service-limits]).</span></span> 
   * <span data-ttu-id="07e4c-813">N’effectuez une agrégation par bandes que si vous devez obtenir un débit supérieur.</span><span class="sxs-lookup"><span data-stu-id="07e4c-813">Only stripe across disks if you need to achieve a higher throughput.</span></span>
3. <span data-ttu-id="07e4c-814">N’installez pas vos logiciels et ne placez pas les fichiers nécessitant une persistance sur le lecteur D:\, car il n’est pas permanent. Les données placées sur ce lecteur ne sont pas conservées après le redémarrage de Windows.</span><span class="sxs-lookup"><span data-stu-id="07e4c-814">Never install software or put any files that require persistence on the D:\ drive as it is non-permanent and anything on this drive is lost at a Windows reboot.</span></span>
4. <span data-ttu-id="07e4c-815">N’utilisez pas la mise en cache de disque Azure pour le stockage Azure standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-815">Don’t use disk caching for Azure Standard Storage.</span></span>
5. <span data-ttu-id="07e4c-816">N’utilisez pas un compte de stockage Azure géorépliqué.</span><span class="sxs-lookup"><span data-stu-id="07e4c-816">Don’t use Azure geo-replicated Storage Accounts.</span></span>  <span data-ttu-id="07e4c-817">Utilisez des systèmes localement redondants pour les charges de travail SGBD (système de gestion de base de données).</span><span class="sxs-lookup"><span data-stu-id="07e4c-817">Use Locally Redundant for DBMS workloads.</span></span>
6. <span data-ttu-id="07e4c-818">Utilisez la solution de haute disponibilité/récupération d’urgence de votre fournisseur SGBD (système de gestion de base de données) pour répliquer les données des bases de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-818">Use your DBMS vendor’s HA/DR solution to replicate database data.</span></span>
7. <span data-ttu-id="07e4c-819">Utilisez toujours la fonction de résolution de noms ; ne vous fiez pas aux adresses IP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-819">Always use Name Resolution, don’t rely on IP addresses.</span></span>
8. <span data-ttu-id="07e4c-820">Utilisez la fonctionnalité de compression de base de données la plus élevée possible.</span><span class="sxs-lookup"><span data-stu-id="07e4c-820">Use the highest database compression possible.</span></span> <span data-ttu-id="07e4c-821">Dans le cas de SQL Server, il s’agit de la compression de page.</span><span class="sxs-lookup"><span data-stu-id="07e4c-821">For SQL Server this is page compression.</span></span>
9. <span data-ttu-id="07e4c-822">Veillez à recourir à des images SQL Server de Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="07e4c-822">Be careful using SQL Server images from the Azure Marketplace.</span></span> <span data-ttu-id="07e4c-823">Si vous utilisez le serveur SQL numéro un, vous devez modifier le classement de l’instance avant d’installer un système SAP NetWeaver sur ce serveur.</span><span class="sxs-lookup"><span data-stu-id="07e4c-823">If you use the SQL Server one, you must change the instance collation before installing any SAP NetWeaver system on it.</span></span>
10. <span data-ttu-id="07e4c-824">Installez et configurez la surveillance d’hôte SAP pour Azure comme le décrit le [Guide de déploiement][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="07e4c-824">Install and configure the SAP Host Monitoring for Azure as described in [Deployment Guide][deployment-guide].</span></span>

## <a name="specifics-to-sap-ase-on-windows"></a><span data-ttu-id="07e4c-825">Caractéristiques de SAP ASE sur Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-825">Specifics to SAP ASE on Windows</span></span>
<span data-ttu-id="07e4c-826">À partir de Microsoft Azure, vous pouvez facilement migrer vos applications SAP ASE existantes vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-826">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="07e4c-827">Dans une machine virtuelle, SAP ASE vous permet de réduire le coût total de possession lié au déploiement, à la gestion et à la maintenance des applications d’entreprise en les migrant facilement vers Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-827">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="07e4c-828">Lorsque le logiciel SAP ASE est installé dans une machine virtuelle Azure, les administrateurs et développeurs peuvent continuer à utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-828">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="07e4c-829">Il existe un contrat de niveau de service pour les machines virtuelles Azure. Vous pouvez le consulter ici : <https://azure.microsoft.com/support/legal/sla/virtual-machines></span><span class="sxs-lookup"><span data-stu-id="07e4c-829">There is an SLA for the Azure Virtual Machines, which can be found here: <https://azure.microsoft.com/support/legal/sla/virtual-machines></span></span>

<span data-ttu-id="07e4c-830">Nous sommes convaincus que les machines virtuelles hébergées par Microsoft Azure fonctionnent très bien, par rapport aux autres offres de virtualisation du cloud public. Cependant, les résultats peuvent varier au cas par cas.</span><span class="sxs-lookup"><span data-stu-id="07e4c-830">We are confident that Microsoft Azure hosted Virtual Machines performs very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="07e4c-831">Dans le cas du dimensionnement SAP, les numéros SAP associés aux SKU des différentes machines virtuelles certifiées pour SAP sont fournis dans une autre note SAP : [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-831">SAP sizing SAPS numbers of the different SAP certified VM SKUs is provided in a separate SAP Note [1928533].</span></span>

<span data-ttu-id="07e4c-832">Les instructions et recommandations concernant l’utilisation d’Azure Storage, le déploiement de machines virtuelles SAP ou la surveillance SAP s’appliquent aux déploiements de SAP ASE conjointement avec des applications SAP, comme énoncé dans les quatre premiers chapitres de ce document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-832">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="07e4c-833">Prise en charge des versions SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-833">SAP ASE Version Support</span></span>
<span data-ttu-id="07e4c-834">Actuellement, SAP prend en charge SAP ASE version 16.0 pour une utilisation avec les produits SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="07e4c-834">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="07e4c-835">Toutes les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC à utiliser avec les produits SAP Business Suite sont exclusivement fournies par le biais du SAP Service Marketplace à l’adresse : <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-835">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="07e4c-836">Dans le cas d’une installation locale, ne téléchargez pas les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC directement depuis les sites web Sybase.</span><span class="sxs-lookup"><span data-stu-id="07e4c-836">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="07e4c-837">Pour obtenir des informations détaillées sur les correctifs pris en charge pour une utilisation avec les produits SAP Business Suite en local et dans les machines virtuelles Azure, consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-837">For detailed information on patches, which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="07e4c-838">[1590719]</span><span class="sxs-lookup"><span data-stu-id="07e4c-838">[1590719]</span></span>
* <span data-ttu-id="07e4c-839">[1973241]</span><span class="sxs-lookup"><span data-stu-id="07e4c-839">[1973241]</span></span>

<span data-ttu-id="07e4c-840">Pour des informations générales sur l’exécution de SAP Business Suite sur SAP ASE, voir [SCN](https://www.sap.com/community/topic/ase.html)</span><span class="sxs-lookup"><span data-stu-id="07e4c-840">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://www.sap.com/community/topic/ase.html)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="07e4c-841">Instructions de configuration de SAP ASE pour les installations SAP ASE sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-841">SAP ASE Configuration Guidelines for SAP-related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="07e4c-842">Structure du déploiement de SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-842">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="07e4c-843">Conformément à la description générale, les exécutables SAP ASE doivent être situés ou installés sur le lecteur système du disque de la machine virtuelle (le lecteur C:\).</span><span class="sxs-lookup"><span data-stu-id="07e4c-843">In accordance with the general description, SAP ASE executables should be located or installed into the system drive of the VM’s OS disk (drive c:\).</span></span> <span data-ttu-id="07e4c-844">En règle générale, la plupart des bases de données d’outils et système SAP ASE ne sont pas pleinement exploitées par les charges de travail SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="07e4c-844">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="07e4c-845">Par conséquent, les bases de données d’outils et système (« master », « model », « saptools », « sybmgmtdb » et « sybsystemdb ») peuvent également rester sur le lecteur C:\.</span><span class="sxs-lookup"><span data-stu-id="07e4c-845">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the C:\ drive as well.</span></span> 

<span data-ttu-id="07e4c-846">La base de données temporaire contenant toutes les tables de travail et les tables temporaires créées par SAP ASE peut constituer une exception qui, dans le cas de certains ERP SAP et pour toutes les charges de travail BW, peut nécessiter des volumes de données supérieurs ou des volumes d’E/S qui ne rentrent pas sur le disque du système d’exploitation de la machine virtuelle d’origine (le lecteur C:\).</span><span class="sxs-lookup"><span data-stu-id="07e4c-846">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume, which can’t fit into the original VM’s OS disk (drive c:\).</span></span>

<span data-ttu-id="07e4c-847">Selon la version de SAPInst/SWPM utilisée pour installer le système, la base de données peut contenir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-847">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="07e4c-848">Une seule base de données tempdb SAP ASE, créée lors de l’installation de SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-848">A single SAP ASE tempdb, which is created when installing SAP ASE</span></span>
* <span data-ttu-id="07e4c-849">une base de données tempdb SAP ASE créée via l’installation de SAP ASE ainsi qu’une base de données saptempdb supplémentaire, créée par le programme d’installation de SAP ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-849">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="07e4c-850">Une base de données tempdb SAP ASE créée par l’installation de SAP ASE, et une tempdb supplémentaire créée manuellement (voir note SAP [1752266]) pour répondre aux exigences ERP/BW de tempdb</span><span class="sxs-lookup"><span data-stu-id="07e4c-850">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (for example following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="07e4c-851">En ce qui concerne les performances de charges de travail ERP spécifiques et de toutes les charges de travail BW, il peut être pertinent de placer les unités tempdb de la base de données tempdb créée en plus (via SWPM ou manuellement) sur un lecteur autre que C:\.</span><span class="sxs-lookup"><span data-stu-id="07e4c-851">In case of specific ERP or all BW workloads, it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a drive other than C:\.</span></span> <span data-ttu-id="07e4c-852">Si aucune tempdb supplémentaire n’existe, il est recommandé d’en créer une (voir note SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-852">If no additional tempdb exists, it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="07e4c-853">Pour des systèmes de ce type, la procédure suivante doit être effectuée pour la base de données tempdb supplémentaire créée :</span><span class="sxs-lookup"><span data-stu-id="07e4c-853">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="07e4c-854">Déplacez la première unité tempdb vers la première unité de la base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-854">Move the first tempdb device to the first device of the SAP database</span></span>
* <span data-ttu-id="07e4c-855">Ajoutez des unités tempdb à chacun des disques VHD contenant une unité de base de données SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-855">Add tempdb devices to each of the VHDs containing a device of the SAP database</span></span>

<span data-ttu-id="07e4c-856">Cette configuration permet à la base de données tempdb de consommer davantage d’espace que celui que peut proposer le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-856">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="07e4c-857">Pour référence, vous pouvez consulter les tailles d’unités tempdb sur les systèmes existants qui s’exécutent en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-857">As a reference one can check the tempdb device sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="07e4c-858">Une telle configuration permet d’atteindre un nombre d’E/S par seconde pour tempdb qui ne peut pas être fourni avec le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-858">Or such a configuration would enable IOPS numbers against tempdb, which cannot be provided with the system drive.</span></span> <span data-ttu-id="07e4c-859">Rappelons que les systèmes qui s’exécutent en local peuvent être utilisés pour surveiller la charge de travail d’E/S sur la base de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="07e4c-859">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="07e4c-860">Ne placez jamais des unités SAP ASE sur le lecteur D:\ de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-860">Never put any SAP ASE devices onto the D:\ drive of the VM.</span></span> <span data-ttu-id="07e4c-861">Cela s’applique également à la base de données tempdb, même si les objets conservés dans cette dernière sont temporaires.</span><span class="sxs-lookup"><span data-stu-id="07e4c-861">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary.</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="07e4c-862">Impact de la compression de base de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-862">Impact of Database Compression</span></span>
<span data-ttu-id="07e4c-863">Dans les configurations pour lesquelles la bande passante d’E/S peut devenir un facteur de limitation, toutes les mesures qui réduisent le nombre d’E/S par seconde peuvent contribuer à étirer la charge de travail exécutable dans un scénario IaaS comme Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-863">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="07e4c-864">Par conséquent, il est fortement recommandé de s’assurer que la compression SAP ASE est utilisée avant le chargement d’une base de données SAP existante dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-864">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="07e4c-865">Nous recommandons d’effectuer une compression avant le chargement sur Azure (si elle n’est pas déjà implémentée) pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="07e4c-865">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="07e4c-866">La quantité de données à charger dans Azure est moins importante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-866">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="07e4c-867">En supposant que l’on peut utiliser en local un matériel plus performant, avec plus d’UC, une bande passante d’E/S supérieure ou une latence d’E/S inférieure, la durée d’exécution de la compression est plus courte.</span><span class="sxs-lookup"><span data-stu-id="07e4c-867">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="07e4c-868">Des bases de données plus petites peuvent permettre de diminuer les coûts liés à l’allocation de disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-868">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="07e4c-869">La compression des données et des éléments LOB fonctionne au sein d’une machine virtuelle hébergée dans Azure Virtual Machines comme en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-869">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="07e4c-870">Pour savoir comment vérifier si la compression est déjà utilisée dans une base de données SAP ASE existante, consultez la note SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="07e4c-870">For more details on how to check if compression is already in use in an existing SAP ASE database, check SAP Note [1750510].</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="07e4c-871">Utilisation de DBACockpit pour surveiller les instances de base de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-871">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="07e4c-872">Pour les systèmes SAP utilisant SAP ASE en tant que plateforme de base de données, la fonction DBACockpit est accessible sous forme de fenêtres de navigateur intégrées dans Transaction DBACockpit ou via Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="07e4c-872">For SAP systems, which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="07e4c-873">Toutefois, l’ensemble des fonctionnalités de surveillance et d’administration de la base de données sont uniquement disponibles dans l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-873">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="07e4c-874">À l’instar des systèmes locaux, plusieurs étapes sont nécessaires pour activer toutes les fonctionnalités de SAP NetWeaver utilisées par l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-874">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="07e4c-875">Pour activer l’utilisation de Webdynpro et générer les éléments nécessaires, consultez la note SAP [1245200].</span><span class="sxs-lookup"><span data-stu-id="07e4c-875">Follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="07e4c-876">Quand vous suivez les instructions fournies dans les notes ci-dessus, vous configurez également Internet Communication Manager (ICM), ainsi que les ports à utiliser pour les connexions HTTP et HTTPS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-876">When following the instructions in the above notes, you also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="07e4c-877">Pour http, la configuration par défaut ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-877">The default setting for http looks like this:</span></span>

> <span data-ttu-id="07e4c-878">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="07e4c-878">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> <span data-ttu-id="07e4c-879">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="07e4c-879">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> 

<span data-ttu-id="07e4c-880">Quant aux liens générés dans Transaction DBACockpit, ils ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-880">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="07e4c-881">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-881">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="07e4c-882">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-882">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="07e4c-883">En fonction de la connexion éventuelle de la machine virtuelle hébergeant le système SAP via une méthode site à site, multisite ou ExpressRoute (déploiement entre différents locaux), vous devez vous assurer qu’ICM utilise un nom d’hôte complet qui peut être résolu sur la machine à partir de laquelle vous essayez d’ouvrir DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-883">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="07e4c-884">Consultez la note SAP [773830] pour comprendre comment ICM détermine le nom d’hôte complet en fonction des paramètres de profil, puis définissez le paramètre icm/host_name_full explicitement si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="07e4c-884">See SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="07e4c-885">Si vous avez déployé la machine virtuelle dans un scénario de cloud uniquement sans connectivité intersite entre le site local et Azure, vous devez définir une adresse IP publique et une étiquette de domaine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-885">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="07e4c-886">Le format du nom DNS public de la machine virtuelle ressemblera à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-886">The format of the public DNS name of the VM looks like this:</span></span>

> <span data-ttu-id="07e4c-887">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="07e4c-887">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
> 
> 

<span data-ttu-id="07e4c-888">Pour plus de détails sur le nom DNS, voir [ici][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="07e4c-888">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="07e4c-889">Lorsque vous définissez le paramètre de profil SAP icm/host_name_full sur le nom DNS de la machine virtuelle Azure, le lien peut ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-889">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="07e4c-890">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-890">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="07e4c-891">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-891">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="07e4c-892">Dans ce cas, vous devez veiller à :</span><span class="sxs-lookup"><span data-stu-id="07e4c-892">In this case you need to make sure to:</span></span>

* <span data-ttu-id="07e4c-893">Ajouter des règles de trafic entrant au groupe de sécurité réseau dans le portail Azure pour les ports TCP/IP utilisés afin de communiquer avec ICM</span><span class="sxs-lookup"><span data-stu-id="07e4c-893">Add Inbound rules to the Network Security Group in the Azure portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="07e4c-894">ajouter des règles de trafic entrant à la configuration du pare-feu Windows pour les ports TCP/IP utilisés afin de communiquer avec ICM.</span><span class="sxs-lookup"><span data-stu-id="07e4c-894">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="07e4c-895">Pour effectuer une importation automatisée de toutes les corrections disponibles, il est recommandé d’appliquer périodiquement la note SAP de collection de correction applicable à votre version SAP :</span><span class="sxs-lookup"><span data-stu-id="07e4c-895">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="07e4c-896">[1558958]</span><span class="sxs-lookup"><span data-stu-id="07e4c-896">[1558958]</span></span>
* <span data-ttu-id="07e4c-897">[1619967]</span><span class="sxs-lookup"><span data-stu-id="07e4c-897">[1619967]</span></span>
* <span data-ttu-id="07e4c-898">[1882376]</span><span class="sxs-lookup"><span data-stu-id="07e4c-898">[1882376]</span></span>

<span data-ttu-id="07e4c-899">Vous trouverez plus d’informations sur DBA Cockpit pour SAP ASE dans les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-899">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="07e4c-900">[1605680]</span><span class="sxs-lookup"><span data-stu-id="07e4c-900">[1605680]</span></span>
* <span data-ttu-id="07e4c-901">[1757924]</span><span class="sxs-lookup"><span data-stu-id="07e4c-901">[1757924]</span></span>
* <span data-ttu-id="07e4c-902">[1757928]</span><span class="sxs-lookup"><span data-stu-id="07e4c-902">[1757928]</span></span>
* <span data-ttu-id="07e4c-903">[1758182]</span><span class="sxs-lookup"><span data-stu-id="07e4c-903">[1758182]</span></span>
* <span data-ttu-id="07e4c-904">[1758496]</span><span class="sxs-lookup"><span data-stu-id="07e4c-904">[1758496]</span></span>    
* <span data-ttu-id="07e4c-905">[1814258]</span><span class="sxs-lookup"><span data-stu-id="07e4c-905">[1814258]</span></span>
* <span data-ttu-id="07e4c-906">[1922555]</span><span class="sxs-lookup"><span data-stu-id="07e4c-906">[1922555]</span></span>
* <span data-ttu-id="07e4c-907">[1956005]</span><span class="sxs-lookup"><span data-stu-id="07e4c-907">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="07e4c-908">Considérations relatives à la sauvegarde/restauration pour SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-908">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="07e4c-909">Lors du déploiement de SAP ASE dans Azure, votre méthodologie de sauvegarde doit être passée en revue.</span><span class="sxs-lookup"><span data-stu-id="07e4c-909">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="07e4c-910">Même si le système n’est pas un système productif, la base de données SAP hébergée par SAP ASE doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-910">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="07e4c-911">Comme Azure Storage conserve trois images, la sauvegarde joue désormais un rôle moins important en matière de compensation des pannes du stockage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-911">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="07e4c-912">La raison principale du maintien d’un plan de sauvegarde et de restauration approprié réside davantage dans le fait que vous pouvez compenser les erreurs logiques/manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-912">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="07e4c-913">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un moment donné, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-913">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="07e4c-914">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-914">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="07e4c-915">La sauvegarde et la restauration d’une base de données dans Azure fonctionnent de la même façon qu’en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-915">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="07e4c-916">Consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-916">See SAP Notes:</span></span>

* <span data-ttu-id="07e4c-917">[1588316]</span><span class="sxs-lookup"><span data-stu-id="07e4c-917">[1588316]</span></span>
* <span data-ttu-id="07e4c-918">[1585981]</span><span class="sxs-lookup"><span data-stu-id="07e4c-918">[1585981]</span></span>

<span data-ttu-id="07e4c-919">pour plus d’informations sur la création de configurations d’images mémoire et la planification des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-919">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="07e4c-920">Selon votre stratégie et vos besoins, vous pouvez configurer les images mémoire de bases de données et de journaux sur disque sur l’un des disques existants ou ajouter un disque supplémentaire pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-920">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing disks or add an additional disk for the backup.</span></span> <span data-ttu-id="07e4c-921">Pour réduire le risque de perte de données en cas d’erreur, il est recommandé d’utiliser un disque ne contenant aucune unité de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-921">To reduce the danger of data loss in case of an error, it is recommended to use a disk where no database device is located.</span></span>

<span data-ttu-id="07e4c-922">Outre les données et la compression des éléments LOB, SAP ASE propose la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-922">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="07e4c-923">Pour occuper moins d’espace avec les images mémoire de bases de données et de journaux, il est recommandé d’utiliser la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-923">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="07e4c-924">Pour plus d’informations, consultez la note SAP [1588316].</span><span class="sxs-lookup"><span data-stu-id="07e4c-924">For more information, see SAP Note [1588316].</span></span> <span data-ttu-id="07e4c-925">La compression de sauvegarde est également cruciale pour réduire la quantité de données à transférer si vous prévoyez de télécharger en local des sauvegardes ou des disques durs virtuels contenant des images mémoire de sauvegarde à partir de la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-925">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="07e4c-926">N’utilisez pas le lecteur D:\ comme destination des images mémoire de bases de données ou de journaux.</span><span class="sxs-lookup"><span data-stu-id="07e4c-926">Do not use drive D:\ as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="07e4c-927">Considérations sur les performances des sauvegardes/restaurations</span><span class="sxs-lookup"><span data-stu-id="07e4c-927">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="07e4c-928">À l’instar des déploiements complets, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-928">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="07e4c-929">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles ayant jusqu’à huit threads d’UC.</span><span class="sxs-lookup"><span data-stu-id="07e4c-929">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="07e4c-930">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-930">Therefore, one can assume:</span></span>

* <span data-ttu-id="07e4c-931">Moins il y a de disques utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-931">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="07e4c-932">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="07e4c-932">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="07e4c-933">Moins il y a de cibles (répertoires d’agrégation, disques) d’écriture de la sauvegarde, plus le débit est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-933">The fewer targets (Stripe Directories, disks) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="07e4c-934">Pour augmenter le nombre de cibles d’écriture, deux options peuvent être utilisées ou combinées selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="07e4c-934">To increase the number of targets to write to there are two options, which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="07e4c-935">Agréger le volume cible de sauvegarde sur plusieurs disques montés, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="07e4c-935">Striping the backup target volume over multiple mounted disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="07e4c-936">Créer une configuration d’image mémoire dans SAP ASE qui utilise plusieurs répertoires cibles pour l’écriture de l’image mémoire</span><span class="sxs-lookup"><span data-stu-id="07e4c-936">Creating a dump configuration on SAP ASE level, which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="07e4c-937">L’agrégation d’un volume par bandes sur plusieurs disques montés a été évoquée précédemment dans ce guide.</span><span class="sxs-lookup"><span data-stu-id="07e4c-937">Striping a volume over multiple mounted disks has been discussed earlier in this guide.</span></span> <span data-ttu-id="07e4c-938">Pour plus d’informations sur l’utilisation de plusieurs répertoires pour la configuration d’images mémoire dans SAP ASE, consultez la documentation sur la procédure stockée sp_config_dump, utilisée pour créer la configuration d’images mémoire sur [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="07e4c-938">For more information on using multiple directories in the SAP ASE dump configuration, refer to the documentation on Stored Procedure sp_config_dump, which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="07e4c-939">Récupération d’urgence avec les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-939">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="07e4c-940">Réplication de données avec le serveur de réplication Sybase SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-940">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="07e4c-941">Avec le serveur de réplication Sybase (SRS) SAP, SAP ASE fournit une solution de secours actif pour transférer des transactions de base de données vers un emplacement distant en mode asynchrone.</span><span class="sxs-lookup"><span data-stu-id="07e4c-941">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span> 

<span data-ttu-id="07e4c-942">L’installation et l’utilisation de SRS fonctionnent aussi bien dans une machine virtuelle hébergée dans Azure Virtual Machine Services qu’en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-942">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="07e4c-943">La fonction ASE HADR (haute disponibilité et récupération d’urgence) via le serveur de réplication SAP est prévue avec une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-943">ASE HADR via SAP Replication Server is planned with a future release.</span></span> <span data-ttu-id="07e4c-944">Elle sera testée et publiée pour les plateformes Microsoft Azure dès qu’elle sera disponible.</span><span class="sxs-lookup"><span data-stu-id="07e4c-944">It will be tested with and released for Microsoft Azure platforms as soon as it is available.</span></span>

## <a name="specifics-to-sap-ase-on-linux"></a><span data-ttu-id="07e4c-945">Caractéristiques de SAP ASE sur Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-945">Specifics to SAP ASE on Linux</span></span>
<span data-ttu-id="07e4c-946">À partir de Microsoft Azure, vous pouvez facilement migrer vos applications SAP ASE existantes vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-946">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="07e4c-947">Dans une machine virtuelle, SAP ASE vous permet de réduire le coût total de possession lié au déploiement, à la gestion et à la maintenance des applications d’entreprise en les migrant facilement vers Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-947">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="07e4c-948">Lorsque le logiciel SAP ASE est installé dans une machine virtuelle Azure, les administrateurs et développeurs peuvent continuer à utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-948">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="07e4c-949">Pour déployer des machines virtuelles Azure, il est important de connaître les contrats de niveau de service (SLA) officiels qui se trouvent à l’adresse : <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="07e4c-949">For deploying Azure VMs it's important to know the official SLAs, which can be found here: <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="07e4c-950">Les informations de dimensionnement SAP et la liste des références SKU de machines virtuelles certifiées SAP sont fournies dans la note SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-950">SAP sizing information and a list of SAP certified VM SKUs is provided in SAP Note [1928533].</span></span> <span data-ttu-id="07e4c-951">Des documents supplémentaires sur le dimensionnement SAP pour les machines virtuelles Azure sont disponibles ici <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> et ici <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-951">Additional SAP sizing documents for Azure Virtual machines can be found here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> and here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="07e4c-952">Les instructions et recommandations concernant l’utilisation d’Azure Storage, le déploiement de machines virtuelles SAP ou la surveillance SAP s’appliquent aux déploiements de SAP ASE conjointement avec des applications SAP, comme énoncé dans les quatre premiers chapitres de ce document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-952">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

<span data-ttu-id="07e4c-953">Les deux notes SAP suivantes incluent des informations générales relatives à ASE sur Linux et ASE dans le cloud :</span><span class="sxs-lookup"><span data-stu-id="07e4c-953">The following two SAP Notes include general information about ASE on Linux and ASE in the Cloud:</span></span>

* <span data-ttu-id="07e4c-954">[2134316]</span><span class="sxs-lookup"><span data-stu-id="07e4c-954">[2134316]</span></span>
* <span data-ttu-id="07e4c-955">[1941500]</span><span class="sxs-lookup"><span data-stu-id="07e4c-955">[1941500]</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="07e4c-956">Prise en charge des versions SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-956">SAP ASE Version Support</span></span>
<span data-ttu-id="07e4c-957">Actuellement, SAP prend en charge SAP ASE version 16.0 pour une utilisation avec les produits SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="07e4c-957">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="07e4c-958">Toutes les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC à utiliser avec les produits SAP Business Suite sont exclusivement fournies par le biais du SAP Service Marketplace à l’adresse : <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-958">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="07e4c-959">Dans le cas d’une installation locale, ne téléchargez pas les mises à jour pour le serveur SAP ASE ou les pilotes JDBC et ODBC directement depuis les sites web Sybase.</span><span class="sxs-lookup"><span data-stu-id="07e4c-959">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="07e4c-960">Pour obtenir des informations détaillées sur les correctifs pris en charge pour une utilisation avec les produits SAP Business Suite en local et dans les machines virtuelles Azure, consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-960">For detailed information on patches, which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="07e4c-961">[1590719]</span><span class="sxs-lookup"><span data-stu-id="07e4c-961">[1590719]</span></span>
* <span data-ttu-id="07e4c-962">[1973241]</span><span class="sxs-lookup"><span data-stu-id="07e4c-962">[1973241]</span></span>

<span data-ttu-id="07e4c-963">Pour des informations générales sur l’exécution de SAP Business Suite sur SAP ASE, voir [SCN](https://www.sap.com/community/topic/ase.html)</span><span class="sxs-lookup"><span data-stu-id="07e4c-963">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://www.sap.com/community/topic/ase.html)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="07e4c-964">Instructions de configuration de SAP ASE pour les installations SAP ASE sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-964">SAP ASE Configuration Guidelines for SAP-related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="07e4c-965">Structure du déploiement de SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-965">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="07e4c-966">Conformément à la description générale, les fichiers exécutables SAP ASE doivent être situés ou installés dans le système de fichiers racine de la machine virtuelle ( /sybase).</span><span class="sxs-lookup"><span data-stu-id="07e4c-966">In accordance with the general description, SAP ASE executables should be located or installed into the root file system of the VM ( /sybase ).</span></span> <span data-ttu-id="07e4c-967">En règle générale, la plupart des bases de données d’outils et système SAP ASE ne sont pas pleinement exploitées par les charges de travail SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="07e4c-967">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="07e4c-968">Par conséquent, les bases de données de système et d’outils (master, model, saptools, sybmgmtdb, sybsystemdb) peuvent également demeurer sur le système de fichiers racine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-968">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the root file system as well.</span></span> 

<span data-ttu-id="07e4c-969">La base de données temporaire contenant toutes les tables de travail et les tables temporaires créées par SAP ASE peut constituer une exception qui, dans le cas de certains ERP SAP et pour toutes les charges de travail BW, peut nécessiter des volumes de données supérieurs ou des volumes d’E/S qui ne rentrent pas sur le disque du système d’exploitation de la machine virtuelle d’origine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-969">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations, volume which can’t fit into the original VM’s OS disk.</span></span>

<span data-ttu-id="07e4c-970">Selon la version de SAPInst/SWPM utilisée pour installer le système, la base de données peut contenir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-970">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="07e4c-971">Une seule base de données tempdb SAP ASE, créée lors de l’installation de SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-971">A single SAP ASE tempdb, which is created when installing SAP ASE</span></span>
* <span data-ttu-id="07e4c-972">une base de données tempdb SAP ASE créée via l’installation de SAP ASE ainsi qu’une base de données saptempdb supplémentaire, créée par le programme d’installation de SAP ;</span><span class="sxs-lookup"><span data-stu-id="07e4c-972">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="07e4c-973">Une base de données tempdb SAP ASE créée par l’installation de SAP ASE, et une tempdb supplémentaire créée manuellement (voir note SAP [1752266]) pour répondre aux exigences ERP/BW de tempdb</span><span class="sxs-lookup"><span data-stu-id="07e4c-973">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (for example following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="07e4c-974">Dans le cas de charges de travail ERP spécifiques ou pour toutes les charges BW, il est judicieux, en ce qui concerne les performances, de conserver les unités tempdb de la tempdb supplémentaire créée (par SWPM ou manuellement) sur un système de fichiers distinct qui peut être représenté par un disque de données Azure unique ou un volume RAID Linux s’étendant sur plusieurs disques de données Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-974">In case of specific ERP or all BW workloads, it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a separate file system, which can be represented by a single Azure data disk or a Linux RAID spanning multiple Azure data disks.</span></span> <span data-ttu-id="07e4c-975">Si aucune tempdb supplémentaire n’existe, il est recommandé d’en créer une (voir note SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="07e4c-975">If no additional tempdb exists, it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="07e4c-976">Pour des systèmes de ce type, la procédure suivante doit être effectuée pour la base de données tempdb supplémentaire créée :</span><span class="sxs-lookup"><span data-stu-id="07e4c-976">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="07e4c-977">Déplacer le premier répertoire tempdb vers le premier système de fichiers de la base de données SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-977">Move the first tempdb directory to the first file system of the SAP database</span></span>
* <span data-ttu-id="07e4c-978">Ajouter des répertoires tempdb à chacun des disques contenant un système de fichiers de la base de données SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-978">Add tempdb directories to each of the disks containing a filesystem of the SAP database</span></span>

<span data-ttu-id="07e4c-979">Cette configuration permet à la base de données tempdb de consommer davantage d’espace que celui que peut proposer le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-979">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="07e4c-980">Pour référence, vous pouvez consulter les tailles de répertoire tempdb sur les systèmes existants qui s’exécutent en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-980">As a reference one can check the tempdb directory sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="07e4c-981">Une telle configuration permet d’atteindre un nombre d’E/S par seconde pour tempdb qui ne peut pas être fourni avec le lecteur système.</span><span class="sxs-lookup"><span data-stu-id="07e4c-981">Or such a configuration would enable IOPS numbers against tempdb, which cannot be provided with the system drive.</span></span> <span data-ttu-id="07e4c-982">Rappelons que les systèmes qui s’exécutent en local peuvent être utilisés pour surveiller la charge de travail d’E/S sur la base de données tempdb.</span><span class="sxs-lookup"><span data-stu-id="07e4c-982">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="07e4c-983">Ne placez jamais de répertoire SAP ASE aux emplacements /mnt ou /mnt/resource de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="07e4c-983">Never put any SAP ASE directories onto /mnt or /mnt/resource of the VM.</span></span> <span data-ttu-id="07e4c-984">Cela s’applique également à la tempdb, même si les objets conservés dans la tempdb sont seulement temporaires, car /mnt ou/mnt/resource sont des espaces temporaires par défaut non persistants de machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-984">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary because /mnt or /mnt/resource is a default Azure VM temp space, which is not persistent.</span></span> <span data-ttu-id="07e4c-985">Vous trouverez plus d’informations sur l’espace temporaire de machine virtuelle Azure dans [cet article][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="07e4c-985">More details about the Azure VM temp space can be found in [this article][virtual-machines-linux-how-to-attach-disk]</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="07e4c-986">Impact de la compression de base de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-986">Impact of Database Compression</span></span>
<span data-ttu-id="07e4c-987">Dans les configurations pour lesquelles la bande passante d’E/S peut devenir un facteur de limitation, toutes les mesures qui réduisent le nombre d’E/S par seconde peuvent contribuer à étirer la charge de travail exécutable dans un scénario IaaS comme Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-987">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="07e4c-988">Par conséquent, il est fortement recommandé de s’assurer que la compression SAP ASE est utilisée avant le chargement d’une base de données SAP existante dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-988">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="07e4c-989">Nous recommandons d’effectuer une compression avant le chargement sur Azure (si elle n’est pas déjà implémentée) pour plusieurs raisons :</span><span class="sxs-lookup"><span data-stu-id="07e4c-989">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="07e4c-990">La quantité de données à charger dans Azure est moins importante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-990">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="07e4c-991">En supposant que l’on peut utiliser en local un matériel plus performant, avec plus d’UC, une bande passante d’E/S supérieure ou une latence d’E/S inférieure, la durée d’exécution de la compression est plus courte.</span><span class="sxs-lookup"><span data-stu-id="07e4c-991">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="07e4c-992">Des bases de données plus petites peuvent permettre de diminuer les coûts liés à l’allocation de disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-992">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="07e4c-993">La compression des données et des éléments LOB fonctionne au sein d’une machine virtuelle hébergée dans Azure Virtual Machines comme en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-993">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="07e4c-994">Pour savoir comment vérifier si la compression est déjà utilisée dans une base de données SAP ASE existante, consultez la note SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="07e4c-994">For more details on how to check if compression is already in use in an existing SAP ASE database, check SAP Note [1750510].</span></span> <span data-ttu-id="07e4c-995">Pour plus d’informations sur la compression des bases de données, consultez la note SAP [2121797].</span><span class="sxs-lookup"><span data-stu-id="07e4c-995">For additional information regarding database compression, see SAP Note [2121797].</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="07e4c-996">Utilisation de DBACockpit pour surveiller les instances de base de données</span><span class="sxs-lookup"><span data-stu-id="07e4c-996">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="07e4c-997">Pour les systèmes SAP utilisant SAP ASE en tant que plateforme de base de données, la fonction DBACockpit est accessible sous forme de fenêtres de navigateur intégrées dans Transaction DBACockpit ou via Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="07e4c-997">For SAP systems, which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="07e4c-998">Toutefois, l’ensemble des fonctionnalités de surveillance et d’administration de la base de données sont uniquement disponibles dans l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-998">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="07e4c-999">À l’instar des systèmes locaux, plusieurs étapes sont nécessaires pour activer toutes les fonctionnalités de SAP NetWeaver utilisées par l’implémentation Webdynpro de DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-999">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="07e4c-1000">Pour activer l’utilisation de Webdynpro et générer les éléments nécessaires, consultez la note SAP [1245200].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1000">Follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="07e4c-1001">Quand vous suivez les instructions fournies dans les notes ci-dessus, vous configurez également Internet Communication Manager (ICM), ainsi que les ports à utiliser pour les connexions HTTP et HTTPS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1001">When following the instructions in the above notes, you also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="07e4c-1002">Pour http, la configuration par défaut ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1002">The default setting for http looks like this:</span></span>

> <span data-ttu-id="07e4c-1003">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="07e4c-1003">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> <span data-ttu-id="07e4c-1004">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="07e4c-1004">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> 

<span data-ttu-id="07e4c-1005">Quant aux liens générés dans Transaction DBACockpit, ils ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1005">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="07e4c-1006">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1006">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="07e4c-1007">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1007">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="07e4c-1008">En fonction de la connexion éventuelle de la machine virtuelle hébergeant le système SAP via une méthode site à site, multisite ou ExpressRoute (déploiement entre différents locaux), vous devez vous assurer qu’ICM utilise un nom d’hôte complet qui peut être résolu sur la machine à partir de laquelle vous essayez d’ouvrir DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1008">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="07e4c-1009">Consultez la note SAP [773830] pour comprendre comment ICM détermine le nom d’hôte complet en fonction des paramètres de profil, puis définissez le paramètre icm/host_name_full explicitement si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1009">See SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="07e4c-1010">Si vous avez déployé la machine virtuelle dans un scénario de cloud uniquement sans connectivité intersite entre le site local et Azure, vous devez définir une adresse IP publique et une étiquette de domaine.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1010">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="07e4c-1011">Le format du nom DNS public de la machine virtuelle ressemblera à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1011">The format of the public DNS name of the VM looks like this:</span></span>

> <span data-ttu-id="07e4c-1012">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="07e4c-1012">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
> 
> 

<span data-ttu-id="07e4c-1013">Pour plus de détails sur le nom DNS, voir [ici][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1013">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="07e4c-1014">Lorsque vous définissez le paramètre de profil SAP icm/host_name_full sur le nom DNS de la machine virtuelle Azure, le lien peut ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1014">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="07e4c-1015">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1015">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="07e4c-1016">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1016">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="07e4c-1017">Dans ce cas, vous devez veiller à :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1017">In this case you need to make sure to:</span></span>

* <span data-ttu-id="07e4c-1018">Ajouter des règles de trafic entrant au groupe de sécurité réseau dans le portail Azure pour les ports TCP/IP utilisés afin de communiquer avec ICM</span><span class="sxs-lookup"><span data-stu-id="07e4c-1018">Add Inbound rules to the Network Security Group in the Azure portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="07e4c-1019">ajouter des règles de trafic entrant à la configuration du pare-feu Windows pour les ports TCP/IP utilisés afin de communiquer avec ICM.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1019">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="07e4c-1020">Pour effectuer une importation automatisée de toutes les corrections disponibles, il est recommandé d’appliquer périodiquement la note SAP de collection de correction applicable à votre version SAP :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1020">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="07e4c-1021">[1558958]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1021">[1558958]</span></span>
* <span data-ttu-id="07e4c-1022">[1619967]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1022">[1619967]</span></span>
* <span data-ttu-id="07e4c-1023">[1882376]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1023">[1882376]</span></span>

<span data-ttu-id="07e4c-1024">Vous trouverez plus d’informations sur DBA Cockpit pour SAP ASE dans les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1024">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="07e4c-1025">[1605680]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1025">[1605680]</span></span>
* <span data-ttu-id="07e4c-1026">[1757924]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1026">[1757924]</span></span>
* <span data-ttu-id="07e4c-1027">[1757928]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1027">[1757928]</span></span>
* <span data-ttu-id="07e4c-1028">[1758182]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1028">[1758182]</span></span>
* <span data-ttu-id="07e4c-1029">[1758496]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1029">[1758496]</span></span>    
* <span data-ttu-id="07e4c-1030">[1814258]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1030">[1814258]</span></span>
* <span data-ttu-id="07e4c-1031">[1922555]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1031">[1922555]</span></span>
* <span data-ttu-id="07e4c-1032">[1956005]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1032">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="07e4c-1033">Considérations relatives à la sauvegarde/restauration pour SAP ASE</span><span class="sxs-lookup"><span data-stu-id="07e4c-1033">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="07e4c-1034">Lors du déploiement de SAP ASE dans Azure, votre méthodologie de sauvegarde doit être passée en revue.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1034">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="07e4c-1035">Même si le système n’est pas un système productif, la base de données SAP hébergée par SAP ASE doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1035">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="07e4c-1036">Comme Azure Storage conserve trois images, la sauvegarde joue désormais un rôle moins important en matière de compensation des pannes du stockage.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1036">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="07e4c-1037">La raison principale du maintien d’un plan de sauvegarde et de restauration approprié réside davantage dans le fait que vous pouvez compenser les erreurs logiques/manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1037">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="07e4c-1038">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un moment donné, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1038">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="07e4c-1039">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1039">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="07e4c-1040">La sauvegarde et la restauration d’une base de données dans Azure fonctionnent de la même façon qu’en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1040">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="07e4c-1041">Consultez les notes SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1041">See SAP Notes:</span></span>

* <span data-ttu-id="07e4c-1042">[1588316]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1042">[1588316]</span></span>
* <span data-ttu-id="07e4c-1043">[1585981]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1043">[1585981]</span></span>

<span data-ttu-id="07e4c-1044">pour plus d’informations sur la création de configurations d’images mémoire et la planification des sauvegardes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1044">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="07e4c-1045">Selon votre stratégie et vos besoins, vous pouvez configurer les images mémoire de bases de données et de journaux sur disque sur l’un des disques existants ou ajouter un disque supplémentaire pour la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1045">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing disks or add an additional disk for the backup.</span></span> <span data-ttu-id="07e4c-1046">Pour réduire le risque de perte de données en cas d’erreur, il est recommandé d’utiliser un disque ne contenant aucun répertoire/fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1046">To reduce the danger of data loss in case of an error it is recommended to use a disk where no database directory/file is located.</span></span>

<span data-ttu-id="07e4c-1047">Outre les données et la compression des éléments LOB, SAP ASE propose la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1047">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="07e4c-1048">Pour occuper moins d’espace avec les images mémoire de bases de données et de journaux, il est recommandé d’utiliser la compression de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1048">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="07e4c-1049">Pour plus d’informations, consultez la note SAP [1588316].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1049">For more information, see SAP Note [1588316].</span></span> <span data-ttu-id="07e4c-1050">La compression de sauvegarde est également cruciale pour réduire la quantité de données à transférer si vous prévoyez de télécharger en local des sauvegardes ou des disques durs virtuels contenant des images mémoire de sauvegarde à partir de la machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1050">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="07e4c-1051">N’utilisez pas l’espace temporaire de la machine virtuelle Azure /mnt ou/mnt/resource comme destination d’images mémoire de bases de données ou de journaux.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1051">Do not use the Azure VM temp space /mnt or /mnt/resource as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="07e4c-1052">Considérations sur les performances des sauvegardes/restaurations</span><span class="sxs-lookup"><span data-stu-id="07e4c-1052">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="07e4c-1053">À l’instar des déploiements complets, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1053">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="07e4c-1054">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles ayant jusqu’à huit threads d’UC.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1054">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="07e4c-1055">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1055">Therefore, one can assume:</span></span>

* <span data-ttu-id="07e4c-1056">Moins il y a de disques utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1056">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="07e4c-1057">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="07e4c-1057">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="07e4c-1058">Moins il y a de cibles (volume RAID logiciel Linux, disques) d’écriture de la sauvegarde, plus le débit est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1058">The fewer targets (Linux software RAID, disks) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="07e4c-1059">Pour augmenter le nombre de cibles d’écriture, deux options peuvent être utilisées ou combinées selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1059">To increase the number of targets to write to there are two options, which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="07e4c-1060">Agréger le volume cible de sauvegarde sur plusieurs disques montés, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="07e4c-1060">Striping the backup target volume over multiple mounted disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="07e4c-1061">Créer une configuration d’image mémoire dans SAP ASE qui utilise plusieurs répertoires cibles pour l’écriture de l’image mémoire</span><span class="sxs-lookup"><span data-stu-id="07e4c-1061">Creating a dump configuration on SAP ASE level, which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="07e4c-1062">L’agrégation d’un volume par bandes sur plusieurs disques montés a été évoquée précédemment dans ce guide.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1062">Striping a volume over multiple mounted disks has been discussed earlier in this guide.</span></span> <span data-ttu-id="07e4c-1063">Pour plus d’informations sur l’utilisation de plusieurs répertoires pour la configuration d’images mémoire dans SAP ASE, consultez la documentation sur la procédure stockée sp_config_dump, utilisée pour créer la configuration d’images mémoire sur [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1063">For more information on using multiple directories in the SAP ASE dump configuration, refer to the documentation on Stored Procedure sp_config_dump, which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="07e4c-1064">Récupération d’urgence avec les machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1064">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="07e4c-1065">Réplication de données avec le serveur de réplication Sybase SAP</span><span class="sxs-lookup"><span data-stu-id="07e4c-1065">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="07e4c-1066">Avec le serveur de réplication Sybase (SRS) SAP, SAP ASE fournit une solution de secours actif pour transférer des transactions de base de données vers un emplacement distant en mode asynchrone.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1066">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span> 

<span data-ttu-id="07e4c-1067">L’installation et l’utilisation de SRS fonctionnent aussi bien dans une machine virtuelle hébergée dans Azure Virtual Machine Services qu’en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1067">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="07e4c-1068">La fonction ASE HADR (haute disponibilité et récupération d’urgence) via le serveur de réplication SAP n’est PAS prise en charge pour le moment.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1068">ASE HADR via SAP Replication Server is NOT supported at this point in time.</span></span> <span data-ttu-id="07e4c-1069">Elle sera peut-être testée et publiée pour les plateformes Microsoft Azure à l’avenir.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1069">It might be tested with and released for Microsoft Azure platforms in the future.</span></span>

## <a name="specifics-to-oracle-database-on-windows"></a><span data-ttu-id="07e4c-1070">Caractéristiques d’Oracle Database sur Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1070">Specifics to Oracle Database on Windows</span></span>
<span data-ttu-id="07e4c-1071">Les logiciels Oracle sont pris en charge par Oracle pour s’exécuter dans Microsoft Windows Hyper-V et Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1071">Oracle software is supported by Oracle to run on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="07e4c-1072">Pour plus d’informations sur la prise en charge générale de Windows Hyper-V et Azure, consultez l’article suivant : <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="07e4c-1072">For details on the general support of Windows Hyper-V and Azure, check: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span> 

<span data-ttu-id="07e4c-1073">Outre la prise en charge générale, le scénario spécifique des applications SAP exploitant les bases de données Oracle est également pris en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1073">Following the general support, the specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="07e4c-1074">Les détails sont évoqués dans cette partie du document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1074">Details are named in this part of the document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="07e4c-1075">Prise en charge des versions Oracle</span><span class="sxs-lookup"><span data-stu-id="07e4c-1075">Oracle Version Support</span></span>
<span data-ttu-id="07e4c-1076">Les versions Oracle et les versions de systèmes d’exploitation correspondantes prises en charge pour l’exécution de SAP sur Oracle dans des machines virtuelles Azure sont répertoriées dans la note SAP [2039619].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1076">Oracle versions and corresponding OS versions, which are supported for running SAP on Oracle on Azure Virtual Machines can be found in SAP Note [2039619].</span></span>

<span data-ttu-id="07e4c-1077">Pour des informations générales sur l’exécution de SAP Business Suite sur Oracle, consultez : <https://www.sap.com/community/topic/oracle.html></span><span class="sxs-lookup"><span data-stu-id="07e4c-1077">General information about running SAP Business Suite on Oracle can be found in 1DX: <https://www.sap.com/community/topic/oracle.html></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1078">Instructions de configuration Oracle pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1078">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="07e4c-1079">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1079">Storage configuration</span></span>
<span data-ttu-id="07e4c-1080">Une seule instance Oracle utilisant les disques au format NTFS est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1080">Only single instance Oracle using NTFS formatted disks is supported.</span></span> <span data-ttu-id="07e4c-1081">Tous les fichiers de base de données doivent être stockés sur le système de fichiers NTFS basé sur les disques durs virtuels ou les disques managés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1081">All database files must be stored on the NTFS file system based on VHDs or Managed Disks.</span></span> <span data-ttu-id="07e4c-1082">Ces disques sont montés sur la machine virtuelle Azure et sont basés sur les objets blob de pages du stockage Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) ou sur des disques managés (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1082">These disks are mounted to the Azure VM and are based on Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="07e4c-1083">Tous les types de lecteurs réseau ou de partages distants tels que les services de fichiers Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1083">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="07e4c-1084"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1084"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span> 
* <span data-ttu-id="07e4c-1085"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1085"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="07e4c-1086">ne sont **PAS** pris en charge pour les fichiers de base de données Oracle !</span><span class="sxs-lookup"><span data-stu-id="07e4c-1086">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="07e4c-1087">Si vous utilisez des disques basés sur le stockage d’objets blob de pages Azure ou des disques managés, les instructions figurant dans les chapitres [Mise en cache pour les machines virtuelles et les disques de données][dbms-guide-2.1] et [Stockage Microsoft Azure][dbms-guide-2.3] de ce document s’appliquent également aux déploiements avec Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1087">Using disks based on Azure Page BLOB Storage or Managed Disks, the statements made in this document in chapter [Caching for VMs and data disks][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply to deployments with the Oracle Database as well.</span></span>

<span data-ttu-id="07e4c-1088">Comme expliqué précédemment dans la partie générale du document, des quotas existent en ce qui concerne le débit d’E/S par seconde pour les disques Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1088">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure disks exist.</span></span> <span data-ttu-id="07e4c-1089">Les quotas exacts dépendent du type de machine virtuelle utilisé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1089">The exact quotas are depending on the VM type used.</span></span> <span data-ttu-id="07e4c-1090">La liste des types de machines virtuelles et de leurs quotas est disponible [ici (pour Linux)][virtual-machines-sizes-linux] et [ici (pour Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1090">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="07e4c-1091">Pour connaître les types de machines virtuelles Azure pris en charge, consultez la note SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1091">To identify the supported Azure VM types, refer to SAP note [1928533].</span></span>

<span data-ttu-id="07e4c-1092">Tant que le quota actuel d’E/S par seconde par disque satisfait aux exigences, il est possible de stocker tous les fichiers de base de données sur un seul disque Azure monté.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1092">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the DB files on one single mounted disk.</span></span> 

<span data-ttu-id="07e4c-1093">Si des E/S par seconde supplémentaires sont nécessaires, il est vivement recommandé d’utiliser des pools de stockage Windows (fonctionnalité uniquement disponible dans Windows Server 2012 et versions ultérieures) ou l’agrégation Windows pour Windows 2008 R2, afin de créer une unité logique volumineuse sur plusieurs disques montés (voir également le chapitre [RAID logiciel][dbms-guide-2.2] de ce document).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1093">If more IOPS are required, it is strongly recommended to use Window Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 to create one large logical device over multiple mounted disks (see also chapter [Software RAID][dbms-guide-2.2] of this document).</span></span> <span data-ttu-id="07e4c-1094">Cette approche simplifie les tâches administratives pour gérer l’espace disque et évite les tâches de distribution manuelles des fichiers sur plusieurs disques montés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1094">This approach simplifies the administration overhead to manage the disk space and avoids the effort to manually distribute files across multiple mounted disks.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="07e4c-1095">Sauvegarde / restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1095">Backup / Restore</span></span>
<span data-ttu-id="07e4c-1096">Pour la fonctionnalité de sauvegarde / restauration, les outils SAP BR*Tools for Oracle sont pris en charge de la même manière que sur les systèmes d’exploitation Windows Server et Hyper-V standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1096">For backup / restore functionality, the SAP BR*Tools for Oracle are supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span> <span data-ttu-id="07e4c-1097">Oracle Recovery Manager (RMAN) est également pris en charge pour les sauvegardes sur disque et les restaurations à partir du disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1097">Oracle Recovery Manager (RMAN) is also supported for backups to disk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="07e4c-1098">Haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="07e4c-1098">High Availability</span></span>
<span data-ttu-id="07e4c-1099">Oracle Data Guard est pris en charge à des fins de haute disponibilité et de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1099">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="07e4c-1100">Pour plus d’informations, consultez [cette][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1100">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="07e4c-1101">Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1101">Other</span></span>
<span data-ttu-id="07e4c-1102">Tous les autres sujets généraux, notamment les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent avec Oracle Database, comme décrit dans les trois premiers chapitres de ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1102">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with the Oracle Database as well.</span></span>

## <a name="specifics-to-oracle-database-on-oracle-linux"></a><span data-ttu-id="07e4c-1103">Caractéristiques d’Oracle Database sur Oracle Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-1103">Specifics to Oracle Database on Oracle Linux</span></span>
<span data-ttu-id="07e4c-1104">Les logiciels Oracle sont pris en charge par Oracle pour s’exécuter dans Microsoft Windows Hyper-V et Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1104">Oracle software is supported by Oracle to run on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="07e4c-1105">Pour plus d’informations sur la prise en charge générale de Windows Hyper-V et Azure, consultez l’article suivant : <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="07e4c-1105">For details on the general support of Windows Hyper-V and Azure, check: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span> 

<span data-ttu-id="07e4c-1106">Outre la prise en charge générale, le scénario spécifique des applications SAP exploitant les bases de données Oracle est également pris en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1106">Following the general support, the specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="07e4c-1107">Les détails sont évoqués dans cette partie du document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1107">Details are named in this part of the document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="07e4c-1108">Prise en charge des versions Oracle</span><span class="sxs-lookup"><span data-stu-id="07e4c-1108">Oracle Version Support</span></span>
<span data-ttu-id="07e4c-1109">Les versions Oracle et les versions de systèmes d’exploitation correspondantes prises en charge pour l’exécution de SAP sur Oracle dans des machines virtuelles Azure sont répertoriées dans la note SAP [2039619].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1109">Oracle versions and corresponding OS versions, which are supported for running SAP on Oracle on Azure Virtual Machines can be found in SAP Note [2039619].</span></span>

<span data-ttu-id="07e4c-1110">Pour des informations générales sur l’exécution de SAP Business Suite sur Oracle, consultez : <https://www.sap.com/community/topic/oracle.html></span><span class="sxs-lookup"><span data-stu-id="07e4c-1110">General information about running SAP Business Suite on Oracle can be found in 1DX: <https://www.sap.com/community/topic/oracle.html></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1111">Instructions de configuration Oracle pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1111">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="07e4c-1112">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1112">Storage configuration</span></span>
<span data-ttu-id="07e4c-1113">Une seule instance Oracle utilisant les disques formatés ext3, ext4 et xfs est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1113">Only single instance Oracle using ext3, ext4, and xfs formatted disks is supported.</span></span> <span data-ttu-id="07e4c-1114">Tous les fichiers de base de données doivent être stockés sur ces systèmes de fichiers basés sur les disques durs virtuels ou les disques managés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1114">All database files must be stored on these file systems based on VHDs or Managed Disks.</span></span> <span data-ttu-id="07e4c-1115">Ces disques sont montés sur la machine virtuelle Azure et sont basés sur les objets blob de pages du stockage Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) ou sur des disques managés (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1115">These disks are mounted to the Azure VM and are based on Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="07e4c-1116">Tous les types de lecteurs réseau ou de partages distants tels que les services de fichiers Azure :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1116">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="07e4c-1117"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1117"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span> 
* <span data-ttu-id="07e4c-1118"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1118"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="07e4c-1119">ne sont **PAS** pris en charge pour les fichiers de base de données Oracle !</span><span class="sxs-lookup"><span data-stu-id="07e4c-1119">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="07e4c-1120">Si vous utilisez des disques basés sur le stockage d’objets blob de pages Azure ou des disques managés, les instructions figurant dans les chapitres [Mise en cache pour les machines virtuelles et les disques de données][dbms-guide-2.1] et [Stockage Microsoft Azure][dbms-guide-2.3] de ce document s’appliquent également aux déploiements avec Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1120">Using disks based on Azure Page BLOB Storage or Managed Disks, the statements made in this document in chapter [Caching for VMs and data disks][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply to deployments with the Oracle Database as well.</span></span>

<span data-ttu-id="07e4c-1121">Comme expliqué précédemment dans la partie générale du document, des quotas existent en ce qui concerne le débit d’E/S par seconde pour les disques Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1121">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure disks exist.</span></span> <span data-ttu-id="07e4c-1122">Les quotas exacts dépendent du type de machine virtuelle utilisé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1122">The exact quotas are depending on the VM type used.</span></span> <span data-ttu-id="07e4c-1123">La liste des types de machines virtuelles et de leurs quotas est disponible [ici (pour Linux)][virtual-machines-sizes-linux] et [ici (pour Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1123">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="07e4c-1124">Pour connaître les types de machines virtuelles Azure pris en charge, consultez la note SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1124">To identify the supported Azure VM types, refer to SAP note [1928533]</span></span>

<span data-ttu-id="07e4c-1125">Tant que le quota actuel d’E/S par seconde par disque satisfait aux exigences, il est possible de stocker tous les fichiers de base de données sur un seul disque Azure monté.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1125">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the DB files on one single mounted disk.</span></span> 

<span data-ttu-id="07e4c-1126">Si vous avez besoin d’un taux d’E/S par seconde plus important, il est fortement recommandé d’utiliser MDADM ou LVM (Logical Volume Manager) pour créer un seul grand volume logique sur plusieurs disques montés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1126">If more IOPS are required, it is strongly recommended to use LVM (Logical Volume Manager) or MDADM to create one large logical volume over multiple mounted disks.</span></span> <span data-ttu-id="07e4c-1127">Voir également le chapitre [RAID logiciel][dbms-guide-2.2] de ce document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1127">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="07e4c-1128">Cette approche simplifie les tâches administratives pour gérer l’espace disque et évite les tâches de distribution manuelles des fichiers sur plusieurs disques montés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1128">This approach simplifies the administration overhead to manage the disk space and avoids the effort to manually distribute files across multiple mounted disks.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="07e4c-1129">Sauvegarde / restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1129">Backup / Restore</span></span>
<span data-ttu-id="07e4c-1130">Pour la fonctionnalité de sauvegarde/restauration, les outils SAP BR*Tools for Oracle sont pris en charge de la même manière que sur les systèmes nus et les systèmes Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1130">For backup / restore functionality, the SAP BR*Tools for Oracle are supported in the same way as on bare metal and Hyper-V.</span></span> <span data-ttu-id="07e4c-1131">Oracle Recovery Manager (RMAN) est également pris en charge pour les sauvegardes sur disque et les restaurations à partir du disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1131">Oracle Recovery Manager (RMAN) is also supported for backups to disk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="07e4c-1132">Haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="07e4c-1132">High Availability</span></span>
<span data-ttu-id="07e4c-1133">Oracle Data Guard est pris en charge à des fins de haute disponibilité et de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1133">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="07e4c-1134">Pour plus d’informations, consultez [cette][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1134">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="07e4c-1135">Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1135">Other</span></span>
<span data-ttu-id="07e4c-1136">Tous les autres sujets généraux, notamment les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent avec Oracle Database, comme décrit dans les trois premiers chapitres de ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1136">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with the Oracle Database as well.</span></span>

## <a name="specifics-for-the-sap-maxdb-database-on-windows"></a><span data-ttu-id="07e4c-1137">Caractéristiques de la base de données SAP MaxDB sur Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1137">Specifics for the SAP MaxDB Database on Windows</span></span>
### <a name="sap-maxdb-version-support"></a><span data-ttu-id="07e4c-1138">Prise en charge des versions SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="07e4c-1138">SAP MaxDB Version Support</span></span>
<span data-ttu-id="07e4c-1139">Actuellement, SAP prend en charge SAP MaxDB version 7.9 pour une utilisation avec les produits reposant sur SAP NetWeaver dans Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1139">SAP currently supports SAP MaxDB version 7.9 for use with SAP NetWeaver-based products in Azure.</span></span> <span data-ttu-id="07e4c-1140">Toutes les mises à jour pour le serveur SAP MaxDB ou les pilotes JDBC et ODBC à utiliser avec les produits SAP NetWeaver sont exclusivement fournies par le biais du SAP Service Marketplace à l’adresse <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1140">All updates for SAP MaxDB server, or JDBC and ODBC drivers to be used with SAP NetWeaver-based products are provided solely through the SAP Service Marketplace at <https://support.sap.com/swdc>.</span></span>
<span data-ttu-id="07e4c-1141">Vous trouverez des informations générales sur l’exécution de SAP NetWeaver sur SAP MaxDB à l’adresse suivante : <https://www.sap.com/community/topic/maxdb.html>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1141">General information on running SAP NetWeaver on SAP MaxDB can be found at <https://www.sap.com/community/topic/maxdb.html>.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-maxdb-dbms"></a><span data-ttu-id="07e4c-1142">Versions de Microsoft Windows et types de machines virtuelles Azure pris en charge pour SGBD SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="07e4c-1142">Supported Microsoft Windows Versions and Azure VM types for SAP MaxDB DBMS</span></span>
<span data-ttu-id="07e4c-1143">Pour connaître la version de Microsoft Windows prise en charge pour SGBD SAP MaxDB sur Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1143">To find the supported Microsoft Windows version for SAP MaxDB DBMS on Azure, see:</span></span>

* <span data-ttu-id="07e4c-1144">[Tableau de disponibilité des produits SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1144">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="07e4c-1145">Note SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1145">SAP Note [1928533]</span></span>

<span data-ttu-id="07e4c-1146">Il est vivement recommandé d’utiliser la version la plus récente du système d’exploitation Microsoft Windows : Microsoft Windows 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1146">It is highly recommended to use the newest version of the operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="available-sap-maxdb-documentation"></a><span data-ttu-id="07e4c-1147">Documentation SAP MaxDB disponible</span><span class="sxs-lookup"><span data-stu-id="07e4c-1147">Available SAP MaxDB Documentation</span></span>
<span data-ttu-id="07e4c-1148">Vous trouverez la liste mise à jour de la documentation SAP MaxDB dans la Note de SAP suivante [767598]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1148">You can find the updated list of SAP MaxDB documentation in the following SAP Note [767598]</span></span>

### <a name="sap-maxdb-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1149">Instructions de configuration SAP MaxDB pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1149">SAP MaxDB Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <span data-ttu-id="07e4c-1150"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1150"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Storage configuration</span></span>
<span data-ttu-id="07e4c-1151">Les bonnes pratiques de stockage Azure pour SAP MaxDB suivent les recommandations générales mentionnées dans le chapitre [Structure d’un déploiement SGBDR][dbms-guide-2].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1151">Azure storage best practices for SAP MaxDB follow the general recommendations mentioned in chapter [Structure of an RDBMS Deployment][dbms-guide-2].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="07e4c-1152">Comme d’autres bases de données, SAP MaxDB possède des données et des fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1152">Like other databases, SAP MaxDB also has data and log files.</span></span> <span data-ttu-id="07e4c-1153">Toutefois, dans la terminologie SAP MaxDB, le terme correct est « volume » (et non « fichier »).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1153">However, in SAP MaxDB terminology the correct term is “volume” (not “file”).</span></span> <span data-ttu-id="07e4c-1154">Par exemple, il existe des volumes de données et des volumes de journaux SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1154">For example, there are SAP MaxDB data volumes and log volumes.</span></span> <span data-ttu-id="07e4c-1155">Ne les confondez pas avec les volumes de disque du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1155">Do not confuse these with OS disk volumes.</span></span> 
> 
> 

<span data-ttu-id="07e4c-1156">En bref, voici que vous avez à faire :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1156">In short you have to:</span></span>

* <span data-ttu-id="07e4c-1157">Si vous utilisez des comptes de stockage Azure, définissez le compte de stockage Azure qui contient les volumes de données et de journaux SAP MaxDB (c’est-à-dire les fichiers) sur **Stockage localement redondant (LRS)**, comme indiqué dans le chapitre [Stockage Microsoft Azure][dbms-guide-2.3].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1157">If you use Azure Storage accounts, set the Azure storage account that holds the SAP MaxDB data and log volumes (i.e. files) to **Local Redundant Storage (LRS)** as specified in chapter [Microsoft Azure Storage][dbms-guide-2.3].</span></span>
* <span data-ttu-id="07e4c-1158">Séparez le chemin d’accès d’E/S pour les volumes de données SAP MaxDB (c’est-à-dire les fichiers) du chemin d’accès d’E/S pour les volumes de journaux (c’est-à-dire les fichiers).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1158">Separate the IO path for SAP MaxDB data volumes (i.e. files) from the IO path for log volumes (i.e. files).</span></span> <span data-ttu-id="07e4c-1159">Cela signifie que les volumes de données SAP MaxDB (c’est-à-dire les fichiers) doivent être installés sur un lecteur logique et que les volumes de journaux SAP MaxDB (c’est-à-dire les fichiers) doivent être installés sur un autre lecteur logique.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1159">This means that SAP MaxDB data volumes (i.e. files) have to be installed on one logical drive and SAP MaxDB log volumes (i.e. files) have to be installed on another logical drive.</span></span>
* <span data-ttu-id="07e4c-1160">Définissez le type de mise en cache approprié pour chaque disque, selon que vous l’utilisez pour des volumes de données ou de journaux SAP MaxDB (c’est-à-dire les fichiers), et que vous utilisez le Stockage Standard Azure ou le Stockage Premium Azure, comme le décrit le chapitre [Mise en cache pour les machines virtuelles et les disques de données][dbms-guide-2.1].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1160">Set the proper caching type for each disk, depending on whether you use it for SAP MaxDB data or log volumes (i.e. files), and whether you use Azure Standard or Azure Premium Storage, as described in chapter [Caching for VMs and data disks][dbms-guide-2.1].</span></span>
* <span data-ttu-id="07e4c-1161">Tant que le quota actuel d’E/S par seconde par disque satisfait aux exigences, il est possible de stocker tous les volumes de données sur un seul disque monté, et également de stocker tous les volumes de journaux de bases de données sur un autre disque unique monté.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1161">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the data volumes on a single mounted disk, and also store all database log volumes on another single mounted disk.</span></span>
* <span data-ttu-id="07e4c-1162">Si des E/S par seconde supplémentaires et/ou plus d’espace sont nécessaires, il est vivement recommandé d’utiliser des pools de stockage Microsoft Windows (fonctionnalité uniquement disponible dans Microsoft Windows Server 2012 et versions ultérieures) ou l’agrégation de Microsoft Windows pour Microsoft Windows 2008 R2, afin de créer une unité logique volumineuse sur plusieurs disques montés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1162">If more IOPS and/or space are required, it is strongly recommended to use Microsoft Window Storage Pools (only available in Microsoft Windows Server 2012 and higher) or Microsoft Windows striping for Microsoft Windows 2008 R2 to create one large logical device over multiple mounted disks.</span></span> <span data-ttu-id="07e4c-1163">Voir également le chapitre [RAID logiciel][dbms-guide-2.2] de ce document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1163">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="07e4c-1164">Cette approche simplifie les tâches administratives pour gérer l’espace disque et évite les tâches de distribution manuelles des fichiers sur plusieurs disques montés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1164">This approach simplifies the administration overhead to manage the disk space and avoids the effort of manually distributing files across multiple mounted disks.</span></span>
* <span data-ttu-id="07e4c-1165">Pour les exigences d’E/S par seconde les plus élevées, vous pouvez utiliser Azure Premium Storage, qui est disponible sur les machines virtuelles séries DS et GS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1165">For the highest IOPS requirements, you can use Azure Premium Storage, which is available on DS-series and GS-series VMs.</span></span>

![Configuration de référence de la machine virtuelle IaaS Azure pour SGBD SAP MaxDB][dbms-guide-figure-600]

#### <span data-ttu-id="07e4c-1167"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Sauvegarde et restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1167"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup and Restore</span></span>
<span data-ttu-id="07e4c-1168">Lors du déploiement de SAP MaxDB dans Azure, vous devez passer en revue votre méthodologie de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1168">When deploying SAP MaxDB into Azure, you must review your backup methodology.</span></span> <span data-ttu-id="07e4c-1169">Même si le système n’est pas un système productif, la base de données SAP hébergée par SAP MaxDB doit être sauvegardée régulièrement.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1169">Even if the system is not a productive system, the SAP database hosted by SAP MaxDB must be backed up periodically.</span></span> <span data-ttu-id="07e4c-1170">Étant donné qu’Azure Storage conserve trois images, une sauvegarde est désormais moins importante en termes de protection de votre système contre les défaillances de stockage, ou les défaillances opérationnelles ou administratives plus sérieuses.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1170">Since Azure Storage keeps three images, a backup is now less important in terms of protecting your system against storage failure and more important operational or administrative failures.</span></span> <span data-ttu-id="07e4c-1171">La raison principale du maintien d’un plan de sauvegarde et de restauration approprié est que vous pouvez compenser les erreurs logiques ou manuelles en fournissant des fonctionnalités de récupération jusqu’à une date et heure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1171">The primary reason for maintaining a proper backup and restore plan is so that you can compensate for logical or manual errors by providing point-in-time recovery capabilities.</span></span> <span data-ttu-id="07e4c-1172">Par conséquent, l’objectif est soit d’utiliser les sauvegardes pour restaurer la base de données à un certain point dans le temps, soit d’utiliser les sauvegardes dans Azure pour amorcer un autre système en copiant la base de données existante.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1172">So the goal is to either use backups to restore the database to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="07e4c-1173">Par exemple, vous avez la possibilité de transférer des données depuis une configuration SAP de niveau 2 vers une configuration système de niveau 3 du même système en restaurant une sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1173">For example, you could transfer from a 2-tier SAP configuration to a 3-tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="07e4c-1174">La sauvegarde et la restauration d’une base de données dans Azure fonctionnent de la même manière que pour les systèmes locaux. Vous pouvez donc utiliser les outils de sauvegarde/restauration SAP MaxDB standard décrits dans l’un des documents de la documentation SAP MaxDB répertoriée dans la Note de SAP [767598].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1174">Backing up and restoring a database in Azure works the same way as it does for on-premises systems, so you can use standard SAP MaxDB backup/restore tools, which are described in one of the SAP MaxDB documentation documents listed in SAP Note [767598].</span></span> 

#### <span data-ttu-id="07e4c-1175"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Considérations sur les performances de sauvegarde et de restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1175"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Performance Considerations for Backup and Restore</span></span>
<span data-ttu-id="07e4c-1176">À l’instar des déploiements sur système nu, les performances de sauvegarde et de restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1176">As in bare-metal deployments, backup and restore performance is dependent on how many volumes can be read in parallel and the throughput of those volumes.</span></span> <span data-ttu-id="07e4c-1177">En outre, la consommation d’UC par la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles ayant jusqu’à huit threads d’UC.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1177">In addition, the CPU consumption used by backup compression can play a significant role on VMs with up to eight CPU threads.</span></span> <span data-ttu-id="07e4c-1178">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1178">Therefore, one can assume:</span></span>

* <span data-ttu-id="07e4c-1179">Moins il y a de disques utilisés pour stocker les unités de base de données, plus le débit de lecture global est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1179">The fewer the number of disks used to store the database devices, the lower the overall read throughput</span></span>
* <span data-ttu-id="07e4c-1180">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="07e4c-1180">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="07e4c-1181">Moins il y a de cibles (répertoires d’agrégation, disques) d’écriture de la sauvegarde, plus le débit est faible</span><span class="sxs-lookup"><span data-stu-id="07e4c-1181">The fewer targets (Stripe Directories, disks) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="07e4c-1182">Pour augmenter le nombre de cibles d’écriture, vous pouvez utiliser deux options, éventuellement en association, selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1182">To increase the number of targets to write to, there are two options that you can use, possibly in combination, depending on your needs:</span></span>

* <span data-ttu-id="07e4c-1183">Dédier des volumes distincts pour la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="07e4c-1183">Dedicating separate volumes for backup</span></span>
* <span data-ttu-id="07e4c-1184">Agréger le volume cible de sauvegarde sur plusieurs disques montés, afin d’améliorer le débit d’E/S par seconde sur ce volume de disque agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="07e4c-1184">Striping the backup target volume over multiple mounted disks in order to improve the IOPS throughput on that striped disk volume</span></span>
* <span data-ttu-id="07e4c-1185">Disposer d’unités de disque logiques dédiées distinctes pour les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1185">Having separate dedicated logical disk devices for:</span></span>
  * <span data-ttu-id="07e4c-1186">Volumes de sauvegarde SAP MaxDB (c’est-à-dire les fichiers)</span><span class="sxs-lookup"><span data-stu-id="07e4c-1186">SAP MaxDB backup volumes (i.e. files)</span></span>
  * <span data-ttu-id="07e4c-1187">Volumes de données SAP MaxDB (c’est-à-dire les fichiers)</span><span class="sxs-lookup"><span data-stu-id="07e4c-1187">SAP MaxDB data volumes (i.e. files)</span></span>
  * <span data-ttu-id="07e4c-1188">Volumes de journaux SAP MaxDB (c’est-à-dire les fichiers)</span><span class="sxs-lookup"><span data-stu-id="07e4c-1188">SAP MaxDB log volumes (i.e. files)</span></span>

<span data-ttu-id="07e4c-1189">L’agrégation d’un volume par bandes sur plusieurs disques montés a été évoquée précédemment dans le chapitre [RAID logiciel][dbms-guide-2.2] de ce document.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1189">Striping a volume over multiple mounted disks has been discussed earlier in chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> 

#### <span data-ttu-id="07e4c-1190"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1190"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Other</span></span>
<span data-ttu-id="07e4c-1191">Tous les autres sujets généraux, tels que les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent également avec la base de données SAP MaxDB comme décrit dans les trois premiers chapitres dans ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1191">All other general topics such as Azure Availability Sets or SAP monitoring also apply as described in the first three chapters of this document for deployments of VMs with the SAP MaxDB database.</span></span>
<span data-ttu-id="07e4c-1192">D’autres paramètres spécifiques à SAP MaxDB sont transparents pour les machines virtuelles Azure et sont décrits dans différents documents figurant dans la Note de SAP [767598] et dans les Notes de SAP suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1192">Other SAP MaxDB-specific settings are transparent to Azure VMs and are described in different documents listed in SAP Note [767598] and in these SAP notes:</span></span>

* <span data-ttu-id="07e4c-1193">[826037]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1193">[826037]</span></span> 
* <span data-ttu-id="07e4c-1194">[1139904]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1194">[1139904]</span></span>
* <span data-ttu-id="07e4c-1195">[1173395]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1195">[1173395]</span></span>

## <a name="specifics-for-sap-livecache-on-windows"></a><span data-ttu-id="07e4c-1196">Caractéristiques de SAP liveCache sur Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1196">Specifics for SAP liveCache on Windows</span></span>
### <a name="sap-livecache-version-support"></a><span data-ttu-id="07e4c-1197">Prise en charge des versions SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="07e4c-1197">SAP liveCache Version Support</span></span>
<span data-ttu-id="07e4c-1198">La version minimale de SAP liveCache prise en charge dans les machines virtuelles Azure est **SAP LC/LCAPPS 10.0 SP 25** incluant **liveCache 7.9.08.31** et **LCA-Build 25** pour **EhP 2 for SAP SCM 7.0** et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1198">Minimal version of SAP liveCache supported in Azure Virtual Machines is **SAP LC/LCAPPS 10.0 SP 25** including **liveCache 7.9.08.31** and **LCA-Build 25**, released for **EhP 2 for SAP SCM 7.0** and higher.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-livecache-dbms"></a><span data-ttu-id="07e4c-1199">Versions de Microsoft Windows et types de machines virtuelles Azure pris en charge pour SGBD SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="07e4c-1199">Supported Microsoft Windows Versions and Azure VM types for SAP liveCache DBMS</span></span>
<span data-ttu-id="07e4c-1200">Pour connaître la version de Microsoft Windows prise en charge pour SAP liveCache sur Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1200">To find the supported Microsoft Windows version for SAP liveCache on Azure, see:</span></span>

* <span data-ttu-id="07e4c-1201">[Tableau de disponibilité des produits SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1201">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="07e4c-1202">Note SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1202">SAP Note [1928533]</span></span>

<span data-ttu-id="07e4c-1203">Il est vivement recommandé d’utiliser la version la plus récente du système d’exploitation Microsoft Windows Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1203">It is highly recommended to use the newest version of the operating system Microsoft Windows Server.</span></span> 

### <a name="sap-livecache-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1204">Instructions de configuration SAP liveCache pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1204">SAP liveCache Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="recommended-azure-vm-types"></a><span data-ttu-id="07e4c-1205">Types de machines virtuelles Azure recommandés</span><span class="sxs-lookup"><span data-stu-id="07e4c-1205">Recommended Azure VM Types</span></span>
<span data-ttu-id="07e4c-1206">SAP liveCache étant une application qui effectue des calculs énormes, la quantité et la vitesse de la mémoire RAM et de l’UC ont des répercussions importantes sur les performances de SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1206">As SAP liveCache is an application that performs huge calculations, the amount and speed of RAM and CPU has a major influence on SAP liveCache performance.</span></span> 

<span data-ttu-id="07e4c-1207">Pour les types de machines virtuelles Azure pris en charge par SAP (Note de SAP [1928533]), toutes les ressources de l’UC virtuel allouées à la machine virtuelle sont soutenues par des ressources UC physiques dédiées de l’hyperviseur.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1207">For the Azure VM types supported by SAP (SAP Note [1928533]), all virtual CPU resources allocated to the VM are backed by dedicated physical CPU resources of the hypervisor.</span></span> <span data-ttu-id="07e4c-1208">Aucun surprovisionnement (et par conséquent aucune concurrence pour les ressources UC) n’a lieu.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1208">No overprovisioning (and therefore no competition for CPU resources) takes place.</span></span>

<span data-ttu-id="07e4c-1209">De même, pour tous les types d’instances de machine virtuelle Azure pris en charge par SAP, la mémoire de la machine virtuelle est mappée à la mémoire physique à 100 %. Ainsi, le surapprovisionnement (surengagement) n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1209">Similarly, for all Azure VM instance types supported by SAP, the VM memory is 100% mapped to the physical memory – overprovisioning (over-commitment), for example, is not used.</span></span>

<span data-ttu-id="07e4c-1210">De ce point de vue, il est vivement recommandé d’utiliser le nouveau type de machines virtuelles Azure des séries D ou DS (en association avec le Stockage Premium Azure), car elles sont dotées de processeurs 60 % plus rapides que ceux de la série A.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1210">From this perspective, it is highly recommended to use the new D- series or DS-series (in combination with Azure Premium Storage) Azure VM type, as they have 60% faster processors than the A-series.</span></span> <span data-ttu-id="07e4c-1211">Pour une charge de mémoire RAM et d’UC optimale, vous pouvez utiliser des machines virtuelles des séries G et GS (en association avec Azure Premium Storage) avec la famille la plus récente de processeurs Intel® Xeon® E5 v3, disposant de deux fois plus de mémoire et quatre fois plus de stockage SSD que les séries D/DS.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1211">For the highest RAM and CPU load, you can use G-series and GS-series (in combination with Azure Premium Storage) VMs with the latest Intel® Xeon® processor E5 v3 family, which have twice the memory and four times the solid state drive storage (SSDs) of the D/DS-series.</span></span>

#### <a name="storage-configuration"></a><span data-ttu-id="07e4c-1212">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1212">Storage Configuration</span></span>
<span data-ttu-id="07e4c-1213">SAP liveCache étant basé sur la technologie SAP MaxDB, toutes les recommandations en matière de meilleures pratiques de stockage Azure mentionnées pour SAP MaxDB dans le chapitre [Configuration du stockage][dbms-guide-8.4.1] sont également valides pour SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1213">As SAP liveCache is based on SAP MaxDB technology, all the Azure storage best practice recommendations mentioned for SAP MaxDB in chapter [Storage configuration][dbms-guide-8.4.1] are also valid for SAP liveCache.</span></span> 

#### <a name="dedicated-azure-vm-for-livecache"></a><span data-ttu-id="07e4c-1214">Machine virtuelle Azure dédiée pour liveCache</span><span class="sxs-lookup"><span data-stu-id="07e4c-1214">Dedicated Azure VM for liveCache</span></span>
<span data-ttu-id="07e4c-1215">Comme SAP liveCache utilise intensivement la puissance de calcul, pour une utilisation productive, il est fortement recommandé de déployer sur une machine virtuelle Azure dédiée.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1215">As SAP liveCache intensively uses computational power, for productive usage it is highly recommended to deploy on a dedicated Azure Virtual Machine.</span></span> 

![Machine virtuelle Azure dédiée à liveCache pour les cas d’utilisation productive][dbms-guide-figure-700]

#### <a name="backup-and-restore"></a><span data-ttu-id="07e4c-1217">Sauvegarde et restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1217">Backup and Restore</span></span>
<span data-ttu-id="07e4c-1218">La sauvegarde et la restauration, ainsi que les considérations sur les performances, sont déjà décrites dans les chapitres SAP MaxDB correspondants [Sauvegarde et restauration][dbms-guide-8.4.2] et [Considérations sur les performances de sauvegarde et de restauration][dbms-guide-8.4.3].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1218">Backup and restore, including performance considerations, are already described in the relevant SAP MaxDB chapters [Backup and Restore][dbms-guide-8.4.2] and [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span> 

#### <a name="other"></a><span data-ttu-id="07e4c-1219">Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1219">Other</span></span>
<span data-ttu-id="07e4c-1220">Tous les autres sujets généraux sont déjà décrits dans [ce][dbms-guide-8.4.4] chapitre SAP MaxDB correspondant.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1220">All other general topics are already described in the relevant SAP MaxDB [this][dbms-guide-8.4.4] chapter.</span></span> 

## <a name="specifics-for-the-sap-content-server-on-windows"></a><span data-ttu-id="07e4c-1221">Caractéristiques de SAP Content Server sur Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1221">Specifics for the SAP Content Server on Windows</span></span>
<span data-ttu-id="07e4c-1222">SAP Content Server est un composant distinct, basé sur le serveur pour stocker du contenu, tels que les documents électroniques dans différents formats.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1222">The SAP Content Server is a separate, server-based component to store content such as electronic documents in different formats.</span></span> <span data-ttu-id="07e4c-1223">SAP Content Server est fourni par le développement de la technologie et doit être utilisé entre les applications SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1223">The SAP Content Server is provided by development of technology and is to be used cross-application for any SAP applications.</span></span> <span data-ttu-id="07e4c-1224">Il est installé sur un système distinct.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1224">It is installed on a separate system.</span></span> <span data-ttu-id="07e4c-1225">Le contenu standard consiste en des supports et documents de formation issus de Knowledge Warehouse ou en des dessins techniques provenant du système de gestion des documents mySAP PLM.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1225">Typical content is training material and documentation from Knowledge Warehouse or technical drawings originating from the mySAP PLM Document Management System.</span></span> 

### <a name="sap-content-server-version-support"></a><span data-ttu-id="07e4c-1226">Prise en charge des versions SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-1226">SAP Content Server Version Support</span></span>
<span data-ttu-id="07e4c-1227">Actuellement, SAP prend en charge :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1227">SAP currently supports:</span></span>

* <span data-ttu-id="07e4c-1228">**SAP Content Server** version **6.50 (et versions supérieures)**</span><span class="sxs-lookup"><span data-stu-id="07e4c-1228">**SAP Content Server** with version **6.50 (and higher)**</span></span>
* <span data-ttu-id="07e4c-1229">**SAP MaxDB version 7.9**</span><span class="sxs-lookup"><span data-stu-id="07e4c-1229">**SAP MaxDB version 7.9**</span></span>
* <span data-ttu-id="07e4c-1230">**Microsoft IIS (Internet Information Server) version 8.0 (et versions supérieures)**</span><span class="sxs-lookup"><span data-stu-id="07e4c-1230">**Microsoft IIS (Internet Information Server) version 8.0 (and higher)**</span></span>

<span data-ttu-id="07e4c-1231">Il est vivement recommandé d’utiliser la version la plus récente de SAP Content Server qui, au moment de la rédaction de ce document, est la version **6.50 SP4**, ainsi que la version la plus récente de **Microsoft IIS 8.5**.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1231">It is highly recommended to use the newest version of SAP Content Server, which at the time of writing this document is **6.50 SP4**, and the newest version of **Microsoft IIS 8.5**.</span></span> 

<span data-ttu-id="07e4c-1232">Vérifiez les dernières versions prises en charge de SAP Content Server et de Microsoft IIS dans le [Tableau de disponibilité des produits SAP][sap-pam].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1232">Check the latest supported versions of SAP Content Server and Microsoft IIS in the [SAP Product Availability Matrix (PAM)][sap-pam].</span></span>

### <a name="supported-microsoft-windows-and-azure-vm-types-for-sap-content-server"></a><span data-ttu-id="07e4c-1233">Versions de Microsoft Windows et types de machines virtuelles Azure pris en charge pour SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-1233">Supported Microsoft Windows and Azure VM types for SAP Content Server</span></span>
<span data-ttu-id="07e4c-1234">Pour découvrir la version de Windows prise en charge pour SAP Content Server sur Azure, consultez :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1234">To find out supported Windows version for SAP Content Server on Azure, see:</span></span>

* <span data-ttu-id="07e4c-1235">[Tableau de disponibilité des produits SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1235">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="07e4c-1236">Note SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1236">SAP Note [1928533]</span></span>

<span data-ttu-id="07e4c-1237">Il est vivement recommandé d’utiliser la version la plus récente de Microsoft Windows Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1237">It is highly recommended to use the newest version of Microsoft Windows Server.</span></span>

### <a name="sap-content-server-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1238">Instructions de configuration SAP Content Server pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1238">SAP Content Server Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="07e4c-1239">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1239">Storage Configuration</span></span>
<span data-ttu-id="07e4c-1240">Si vous configurez SAP Content Server pour stocker des fichiers dans la base de données SAP MaxDB, l’ensemble des recommandations en matière de meilleures pratiques de stockage Azure mentionnées pour SAP MaxDB dans le chapitre [Configuration du stockage][dbms-guide-8.4.1] sont également valides pour le scénario SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1240">If you configure SAP Content Server to store files in the SAP MaxDB database, all Azure storage best practices recommendation mentioned for SAP MaxDB in chapter [Storage Configuration][dbms-guide-8.4.1] are also valid for the SAP Content Server scenario.</span></span> 

<span data-ttu-id="07e4c-1241">Si vous configurez SAP Content Server pour stocker les fichiers dans le système de fichiers, il est recommandé d’utiliser un lecteur logique dédié.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1241">If you configure SAP Content Server to store files in the file system, it is recommended to use a dedicated logical drive.</span></span> <span data-ttu-id="07e4c-1242">L’utilisation des espaces de stockage Windows vous permet d’augmenter également la taille du disque logique et le débit d’E/S par seconde, comme le décrit le chapitre [RAID logiciel][dbms-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1242">Using Windows Storage Spaces enables you to also increase logical disk size and IOPS throughput, as described in chapter [Software RAID][dbms-guide-2.2].</span></span> 

#### <a name="sap-content-server-location"></a><span data-ttu-id="07e4c-1243">Emplacement de SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-1243">SAP Content Server Location</span></span>
<span data-ttu-id="07e4c-1244">SAP Content Server doit être déployé dans la même région Azure et le même réseau virtuel Azure de déploiement du système SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1244">SAP Content Server has to be deployed in the same Azure region and Azure VNET where the SAP system is deployed.</span></span> <span data-ttu-id="07e4c-1245">Vous êtes libre de décider si vous souhaitez déployer les composants SAP Content Server sur une machine virtuelle Azure dédiée ou sur la même machine virtuelle d’exécution du système SAP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1245">You are free to decide whether you want to deploy SAP Content Server components on a dedicated Azure VM or on the same VM where the SAP system is running.</span></span> 

![Machine virtuelle Azure dédiée pour SAP Content Server][dbms-guide-figure-800]

#### <a name="sap-cache-server-location"></a><span data-ttu-id="07e4c-1247">Emplacement de SAP Cache Server</span><span class="sxs-lookup"><span data-stu-id="07e4c-1247">SAP Cache Server Location</span></span>
<span data-ttu-id="07e4c-1248">SAP Cache Server est un composant supplémentaire basé sur serveur pour fournir l’accès aux documents (mis en cache) en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1248">The SAP Cache Server is an additional server-based component to provide access to (cached) documents locally.</span></span> <span data-ttu-id="07e4c-1249">SAP Cache Server met en cache les documents d’un SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1249">The SAP Cache Server caches the documents of an SAP Content Server.</span></span> <span data-ttu-id="07e4c-1250">Cela permet d’optimiser le trafic réseau si les documents doivent être récupérés plusieurs fois à partir de différents emplacements.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1250">This is to optimize network traffic if documents have to be retrieved more than once from different locations.</span></span> <span data-ttu-id="07e4c-1251">La règle générale est que SAP Cache Server doit être physiquement proche du client qui y accède.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1251">The general rule is that the SAP Cache Server has to be physically close to the client that accesses the SAP Cache Server.</span></span> 

<span data-ttu-id="07e4c-1252">Ici, deux options s’offrent à vous :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1252">Here you have two options:</span></span>

1. <span data-ttu-id="07e4c-1253">**Le client est un système SAP principal** Si un système SAP principal est configuré pour accéder à SAP Content Server, ce système SAP est un client.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1253">**Client is a backend SAP system** If a backend SAP system is configured to access SAP Content Server, that SAP system is a client.</span></span> <span data-ttu-id="07e4c-1254">Comme le système SAP et SAP Content Server sont déployés dans la même région Azure (dans le même centre de données Azure), ils sont physiquement proches l’un de l’autre.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1254">As both SAP system and SAP Content Server are deployed in the same Azure region – in the same Azure datacenter – they are physically close to each other.</span></span> <span data-ttu-id="07e4c-1255">Par conséquent, il n’est pas nécessaire de disposer d’un SAP Cache Server dédié.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1255">Therefore, there is no need to have a dedicated SAP Cache Server.</span></span> <span data-ttu-id="07e4c-1256">Les clients de l’interface utilisateur SAP (GUI ou navigateur web SAP) accèdent directement au système SAP, et celui-ci récupère les documents à partir du SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1256">SAP UI clients (SAP GUI or web browser) access the SAP system directly, and the SAP system retrieves documents from the SAP Content Server.</span></span>
2. <span data-ttu-id="07e4c-1257">**Le client est un navigateur web local** SAP Content Server peut être configuré pour être accessible directement par le navigateur web.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1257">**Client is an on-premises web browser** The SAP Content Server can be configured to be accessed directly by the web browser.</span></span> <span data-ttu-id="07e4c-1258">Dans ce cas, un navigateur web exécuté sur site est un client de SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1258">In this case, a web browser running on–premises is a client of the SAP Content Server.</span></span> <span data-ttu-id="07e4c-1259">Le centre de données local et le centre de données Azure se situent à des emplacements physiques différents (idéalement, proches l’un de l’autre).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1259">On-premises datacenter and Azure datacenter are placed in different physical locations (ideally close to each other).</span></span> <span data-ttu-id="07e4c-1260">Votre centre de données local est connecté à Azure via le VPN de site à site Azure ou ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1260">Your on-premises datacenter is connected to Azure via Azure Site-to-Site VPN or ExpressRoute.</span></span> <span data-ttu-id="07e4c-1261">Bien que les deux options offrent une connexion réseau VPN sécurisée à Azure, la connexion réseau de site à site n’offre pas de contrat de niveau de service (SLA) pour la bande passante réseau et la latence entre le centre de données local et le centre de données Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1261">Although both options offer secure VPN network connection to Azure, site-to-site network connection does not offer a network bandwidth and latency SLA between the on-premises datacenter and the Azure datacenter.</span></span> <span data-ttu-id="07e4c-1262">Pour accélérer l’accès aux documents, vous pouvez effectuer l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1262">To speed up access to documents, you can do one of the following:</span></span>
   1. <span data-ttu-id="07e4c-1263">Installer SAP Cache Server en local, à proximité du navigateur web local (option sur [cette][dbms-guide-900-sap-cache-server-on-premises] figure)</span><span class="sxs-lookup"><span data-stu-id="07e4c-1263">Install SAP Cache Server on-premises, close to the on-premises web browser (option on [this][dbms-guide-900-sap-cache-server-on-premises] Figure)</span></span>
   2. <span data-ttu-id="07e4c-1264">Configurer Azure ExpressRoute, qui offre une connexion réseau dédiée à haut débit et à faible latence entre le centre de données local et le centre de données Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1264">Configure Azure ExpressRoute, which offers a high-speed and low-latency dedicated network connection between on-premises datacenter and Azure datacenter.</span></span>

<span data-ttu-id="07e4c-1265">![Possibilité d’installer SAP Cache Server en local][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span><span class="sxs-lookup"><span data-stu-id="07e4c-1265">![Option to install SAP Cache Server on-premises][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span></span>

#### <a name="backup--restore"></a><span data-ttu-id="07e4c-1266">Sauvegarde / restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1266">Backup / Restore</span></span>
<span data-ttu-id="07e4c-1267">Si vous configurez SAP Content Server pour stocker des fichiers dans la base de données SAP MaxDB, la procédure de sauvegarde/restauration et les considérations sur les performances sont déjà décrites dans les chapitres SAP MaxDB [Sauvegarde et restauration][dbms-guide-8.4.2] et [Considérations sur les performances de sauvegarde et de restauration][dbms-guide-8.4.3].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1267">If you configure the SAP Content Server to store files in the SAP MaxDB database, the backup/restore procedure and performance considerations are already described in SAP MaxDB chapter [Backup and Restore][dbms-guide-8.4.2] and chapter [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span> 

<span data-ttu-id="07e4c-1268">Si vous configurez SAP Content Server pour stocker les fichiers dans le système de fichiers, l’une des options consiste à exécuter manuellement la sauvegarde/restauration de l’ensemble de la structure de fichiers dans laquelle se trouvent les documents.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1268">If you configure the SAP Content Server to store files in the file system, one option is to execute manual backup/restore of the whole file structure where the documents are located.</span></span> <span data-ttu-id="07e4c-1269">Comme pour la sauvegarde/restauration SAP MaxDB, il est recommandé de disposer d’un volume de disque dédié aux fins de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1269">Similar to SAP MaxDB backup/restore, it is recommended to have a dedicated disk volume for backup purpose.</span></span> 

#### <a name="other"></a><span data-ttu-id="07e4c-1270">Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1270">Other</span></span>
<span data-ttu-id="07e4c-1271">Les autres paramètres spécifiques SAP Content Server sont transparents pour les machines virtuelles Azure et sont décrits dans différents documents et Notes SAP :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1271">Other SAP Content Server specific settings are transparent to Azure VMs and are described in various documents and SAP Notes:</span></span>

* <span data-ttu-id="07e4c-1272"><https://service.sap.com/contentserver></span><span class="sxs-lookup"><span data-stu-id="07e4c-1272"><https://service.sap.com/contentserver></span></span> 
* <span data-ttu-id="07e4c-1273">Note de SAP [1619726]</span><span class="sxs-lookup"><span data-stu-id="07e4c-1273">SAP Note [1619726]</span></span>  

## <a name="specifics-to-ibm-db2-for-luw-on-windows"></a><span data-ttu-id="07e4c-1274">Caractéristiques d’IBM DB2 pour LUW sous Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1274">Specifics to IBM DB2 for LUW on Windows</span></span>
<span data-ttu-id="07e4c-1275">Avec Microsoft Azure, vous pouvez facilement migrer votre application SAP existante exécutée sur IBM DB2 pour Linux, UNIX et Windows (LUW) vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1275">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) to Azure virtual machines.</span></span> <span data-ttu-id="07e4c-1276">Avec SAP sur IBM DB2 pour LUW, les administrateurs et les développeurs peuvent utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1276">With SAP on IBM DB2 for LUW, administrators and developers can still use the same development and administration tools, which are available on-premises.</span></span>
<span data-ttu-id="07e4c-1277">Des informations générales sur l’exécution de SAP Business Suite sur IBM DB2 pour LUW sont disponibles dans SAP Community Network (SCN) à l’adresse suivante : <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1277">General information about running SAP Business Suite on IBM DB2 for LUW can be found in the SAP Community Network (SCN) at <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span></span>

<span data-ttu-id="07e4c-1278">Pour des informations et des mises à jour supplémentaires de SAP sur DB2 pour LUW sur Azure, voir la Note de SAP [2233094].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1278">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span> 

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="07e4c-1279">Prise en charge des versions IBM DB2 pour Linux, UNIX et Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1279">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="07e4c-1280">SAP sur IBM DB2 pour LUW est pris en charge sur les services de machines virtuelles Microsoft Azure à compter de la version DB2 10.5.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1280">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="07e4c-1281">Pour plus d’informations sur les produits SAP et les types de machines virtuelles Azure pris en charge, consultez la note SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1281">For information about supported SAP products and Azure VM types, refer to SAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1282">Instructions de configuration IBM DB2 pour Linux, UNIX et Windows pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1282">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="07e4c-1283">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1283">Storage Configuration</span></span>
<span data-ttu-id="07e4c-1284">Tous les fichiers de base de données doivent être stockés sur le système de fichiers NTFS basé sur les disques directement attachés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1284">All database files must be stored on the NTFS file system based on directly attached disks.</span></span> <span data-ttu-id="07e4c-1285">Ces disques sont montés sur la machine virtuelle Azure et sont basés sur les objets blob de pages du stockage Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) ou sur des disques managés (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1285">These disks are mounted to the Azure VM and are based in Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="07e4c-1286">Tous les types de lecteurs réseau ou de partages distants tels que les services de fichiers Azure suivants ne sont **PAS** pris en charge pour les fichiers de base de données :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1286">Any kind of network drives or remote shares like the following Azure file services are **NOT** supported for database files:</span></span> 

* <span data-ttu-id="07e4c-1287"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1287"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="07e4c-1288"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1288"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="07e4c-1289">Si vous utilisez des disques basés sur le stockage d’objets blob de pages Azure ou sur des disques managés, les instructions figurant dans le chapitre [Structure d’un déploiement SGBDR][dbms-guide-2] de ce document s’appliquent également aux déploiements avec la base de données IBM DB2 pour LUW.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1289">If you are using disks based on Azure Page BLOB Storage or Managed Disks, the statements made in this document in chapter [Structure of an RDBMS Deployment][dbms-guide-2] also apply to deployments with the IBM DB2 for LUW Database.</span></span> 

<span data-ttu-id="07e4c-1290">Comme expliqué précédemment dans la partie générale du document, des quotas existent en ce qui concerne le débit d’E/S par seconde pour les disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1290">As explained earlier in the general part of the document, quotas on IOPS throughput for disks exist.</span></span> <span data-ttu-id="07e4c-1291">Les quotas exacts dépendent du type de machine virtuelle utilisé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1291">The exact quotas depend on the VM type used.</span></span> <span data-ttu-id="07e4c-1292">La liste des types de machines virtuelles et de leurs quotas est disponible [ici (pour Linux)][virtual-machines-sizes-linux] et [ici (pour Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1292">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="07e4c-1293">Tant que le quota actuel d’E/S par seconde par disque est suffisant, il est possible de stocker tous les fichiers de base de données sur un seul disque monté.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1293">As long as the current IOPS quota per disk is sufficient, it is possible to store all the database files on one single mounted disk.</span></span> 

<span data-ttu-id="07e4c-1294">Pour des considérations sur les performances, consultez également, dans les guides d’installation SAP, le chapitre portant sur la sécurité des données et les considérations sur les performances pour les répertoires de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1294">For performance considerations also refer to chapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="07e4c-1295">Vous pouvez également utiliser des pools de stockage Windows (fonctionnalité uniquement disponible dans Windows Server 2012 et versions ultérieures) ou l’agrégation Windows pour Windows 2008 R2, comme le décrit le chapitre [RAID logiciel][dbms-guide-2.2] de ce document, afin de créer une unité logique volumineuse sur plusieurs disques montés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1295">Alternatively, you can use Windows Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 as described in chapter [Software RAID][dbms-guide-2.2] of this document to create one large logical device over multiple disks.</span></span>
<span data-ttu-id="07e4c-1296">Pour les disques contenant les chemins d’accès de stockage DB2 pour vos données SAP et répertoires SAPTMP, vous devez spécifier une taille de secteur de disque physique de 512 Ko.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1296">For the disks containing the DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span> <span data-ttu-id="07e4c-1297">Lorsque vous utilisez des pools de stockage Windows, vous devez créer les pools de stockage manuellement par le biais de l’interface de ligne de commande en utilisant le paramètre « -LogicalSectorSizeDefault ».</span><span class="sxs-lookup"><span data-stu-id="07e4c-1297">When using Windows Storage Pools, you must create the storage pools  manually via command line interface using the parameter „-LogicalSectorSizeDefault“.</span></span> <span data-ttu-id="07e4c-1298">Pour plus d’informations, consultez <https://technet.microsoft.com/itpro/powershell/windows/storage/new-storagepool>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1298">For more information, see <https://technet.microsoft.com/itpro/powershell/windows/storage/new-storagepool>.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="07e4c-1299">Sauvegarde/restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1299">Backup/Restore</span></span>
<span data-ttu-id="07e4c-1300">La fonctionnalité de sauvegarde/restauration pour IBM DB2 pour LUW est prise en charge de la même façon que sur les systèmes d’exploitation Windows Server et Hyper-V standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1300">The backup/restore functionality for IBM DB2 for LUW is supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span>

<span data-ttu-id="07e4c-1301">Vous devez vous assurer que vous disposez d’une stratégie de sauvegarde de base de données valide en place.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1301">You must make sure that you have a valid database backup strategy in place.</span></span> 

<span data-ttu-id="07e4c-1302">À l’instar des déploiements sur système nu, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1302">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="07e4c-1303">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles ayant jusqu’à huit threads d’UC.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1303">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="07e4c-1304">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1304">Therefore, one can assume:</span></span>

* <span data-ttu-id="07e4c-1305">Moins il y a de disques utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1305">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="07e4c-1306">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="07e4c-1306">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="07e4c-1307">Moins il y a de cibles (répertoires d’agrégation, disques) d’écriture de la sauvegarde, plus le débit est faible</span><span class="sxs-lookup"><span data-stu-id="07e4c-1307">The fewer targets (Stripe Directories, disks) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="07e4c-1308">Pour augmenter le nombre de cibles d’écriture, il est possible d’utiliser/de combiner deux options selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1308">To increase the number of targets to write to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="07e4c-1309">Agréger le volume cible de sauvegarde sur plusieurs disques, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="07e4c-1309">Striping the backup target volume over multiple disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="07e4c-1310">Utiliser plusieurs répertoires cible d’écriture de la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="07e4c-1310">Using more than one target directory to write the backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="07e4c-1311">Haute disponibilité et récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="07e4c-1311">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="07e4c-1312">Microsoft Cluster Server (MSCS) n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1312">Microsoft Cluster Server (MSCS) is not supported.</span></span>

<span data-ttu-id="07e4c-1313">La fonction HADR (haute disponibilité et récupération d’urgence) DB2 est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1313">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="07e4c-1314">Si les machines virtuelles de la configuration haute disponibilité disposent de la résolution de noms de travail, l’installation dans Azure ne diffère pas d’une installation effectuée en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1314">If the virtual machines of the HA configuration have working name resolution, the setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="07e4c-1315">Il est déconseillé de se fier uniquement à la résolution IP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1315">It is not recommended to rely on IP resolution only.</span></span>

<span data-ttu-id="07e4c-1316">N’utilisez pas la géoréplication pour les comptes de stockage qui stockent les disques de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1316">Do not use Geo-Replication for the storage accounts that store the database disks.</span></span> <span data-ttu-id="07e4c-1317">Pour plus d’informations, consultez les chapitres [Stockage Microsoft Azure][dbms-guide-2.3] et [Haute disponibilité et récupération d’urgence avec les machines virtuelles Azure][dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1317">For more information, refer to chapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="07e4c-1318">Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1318">Other</span></span>
<span data-ttu-id="07e4c-1319">Tous les autres sujets généraux, notamment les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent avec IBM DB2 pour LUW comme décrit dans les trois premiers chapitres dans ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1319">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span> 

<span data-ttu-id="07e4c-1320">Voir également le chapitre [Résumé – SQL Server général pour SAP sur Azure][dbms-guide-5.8].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1320">Also refer to chapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>

## <a name="specifics-to-ibm-db2-for-luw-on-linux"></a><span data-ttu-id="07e4c-1321">Caractéristiques d’IBM DB2 pour LUW sous Linux</span><span class="sxs-lookup"><span data-stu-id="07e4c-1321">Specifics to IBM DB2 for LUW on Linux</span></span>
<span data-ttu-id="07e4c-1322">Avec Microsoft Azure, vous pouvez facilement migrer votre application SAP existante exécutée sur IBM DB2 pour Linux, UNIX et Windows (LUW) vers les machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1322">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) to Azure virtual machines.</span></span> <span data-ttu-id="07e4c-1323">Avec SAP sur IBM DB2 pour LUW, les administrateurs et les développeurs peuvent utiliser les outils de développement et d’administration disponibles en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1323">With SAP on IBM DB2 for LUW, administrators and developers can still use the same development and administration tools, which are available on-premises.</span></span> <span data-ttu-id="07e4c-1324">Des informations générales sur l’exécution de SAP Business Suite sur IBM DB2 pour LUW sont disponibles dans SAP Community Network (SCN) à l’adresse suivante : <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1324">General information about running SAP Business Suite on IBM DB2 for LUW can be found in the SAP Community Network (SCN) at <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span></span>

<span data-ttu-id="07e4c-1325">Pour des informations et des mises à jour supplémentaires de SAP sur DB2 pour LUW sur Azure, voir la Note de SAP [2233094].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1325">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="07e4c-1326">Prise en charge des versions IBM DB2 pour Linux, UNIX et Windows</span><span class="sxs-lookup"><span data-stu-id="07e4c-1326">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="07e4c-1327">SAP sur IBM DB2 pour LUW est pris en charge sur les services de machines virtuelles Microsoft Azure à compter de la version DB2 10.5.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1327">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="07e4c-1328">Pour plus d’informations sur les produits SAP et les types de machines virtuelles Azure pris en charge, consultez la note SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1328">For information about supported SAP products and Azure VM types, refer to SAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="07e4c-1329">Instructions de configuration IBM DB2 pour Linux, UNIX et Windows pour les installations SAP sur des machines virtuelles Azure</span><span class="sxs-lookup"><span data-stu-id="07e4c-1329">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="07e4c-1330">Configuration du stockage</span><span class="sxs-lookup"><span data-stu-id="07e4c-1330">Storage Configuration</span></span>
<span data-ttu-id="07e4c-1331">Tous les fichiers de base de données doivent être stockés sur un système de fichiers basé sur les disques directement attachés.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1331">All database files must be stored on a file system based on directly attached disks.</span></span> <span data-ttu-id="07e4c-1332">Ces disques sont montés sur la machine virtuelle Azure et sont basés sur les objets blob de pages du stockage Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) ou sur des disques managés (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="07e4c-1332">These disks are mounted to the Azure VM and are based in Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="07e4c-1333">Tous les types de lecteurs réseau ou de partages distants tels que les services de fichiers Azure suivants ne sont **PAS** pris en charge pour les fichiers de base de données :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1333">Any kind of network drives or remote shares like the following Azure file services are **NOT** supported for database files:</span></span>

* <span data-ttu-id="07e4c-1334"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1334"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="07e4c-1335"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="07e4c-1335"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="07e4c-1336">Si vous utilisez des disques basés sur le stockage d’objets blob de pages Azure, les instructions figurant dans le chapitre [Structure d’un déploiement SGBDR][dbms-guide-2] de ce document s’appliquent également aux déploiements avec la base de données IBM DB2 pour LUW.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1336">If you are using disks based on Azure Page BLOB Storage, the statements made in this document in chapter [Structure of an RDBMS Deployment][dbms-guide-2] also apply to deployments with the IBM DB2 for LUW Database.</span></span>

<span data-ttu-id="07e4c-1337">Comme expliqué précédemment dans la partie générale du document, des quotas existent en ce qui concerne le débit d’E/S par seconde pour les disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1337">As explained earlier in the general part of the document, quotas on IOPS throughput for disks exist.</span></span> <span data-ttu-id="07e4c-1338">Les quotas exacts dépendent du type de machine virtuelle utilisé.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1338">The exact quotas depend on the VM type used.</span></span> <span data-ttu-id="07e4c-1339">La liste des types de machines virtuelles et de leurs quotas est disponible [ici (pour Linux)][virtual-machines-sizes-linux] et [ici (pour Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1339">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="07e4c-1340">Tant que le quota actuel d’E/S par seconde par disque est suffisant, il est possible de stocker tous les fichiers de base de données sur un seul disque.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1340">As long as the current IOPS quota per disk is sufficient, it is possible to store all the database files on one single disk.</span></span>

<span data-ttu-id="07e4c-1341">Pour des considérations sur les performances, consultez également, dans les guides d’installation SAP, le chapitre portant sur la sécurité des données et les considérations sur les performances pour les répertoires de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1341">For performance considerations also refer to chapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="07e4c-1342">Vous pouvez également utiliser LVM (Logical Volume Manager, gestionnaire de volumes logiques) ou MDADM comme le décrit le chapitre [RAID logiciel][dbms-guide-2.2] de ce document pour créer une seule unité logique volumineuse sur plusieurs disques.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1342">Alternatively, you can use LVM (Logical Volume Manager) or MDADM as described in chapter [Software RAID][dbms-guide-2.2] of this document to create one large logical device over multiple disks.</span></span>
<span data-ttu-id="07e4c-1343">Pour les disques contenant les chemins d’accès de stockage DB2 pour vos données SAP et répertoires SAPTMP, vous devez spécifier une taille de secteur de disque physique de 512 Ko.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1343">For the disks containing the DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="07e4c-1344">Sauvegarde/restauration</span><span class="sxs-lookup"><span data-stu-id="07e4c-1344">Backup/Restore</span></span>
<span data-ttu-id="07e4c-1345">La fonctionnalité de sauvegarde/restauration pour IBM DB2 pour LUW est prise en charge de la même façon que sur l’installation Linux locale standard.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1345">The backup/restore functionality for IBM DB2 for LUW is supported in the same way as on standard Linux installation on-premises.</span></span>

<span data-ttu-id="07e4c-1346">Vous devez vous assurer que vous disposez d’une stratégie de sauvegarde de base de données valide en place.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1346">You must make sure that you have a valid database backup strategy in place.</span></span>

<span data-ttu-id="07e4c-1347">À l’instar des déploiements sur système nu, les performances de sauvegarde/restauration dépendent du nombre de volumes pouvant être lus en parallèle et du débit éventuel de ces volumes.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1347">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="07e4c-1348">En outre, la consommation d’UC de la compression de sauvegarde peut jouer un rôle significatif sur les machines virtuelles ayant jusqu’à huit threads d’UC.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1348">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="07e4c-1349">Par conséquent, on peut partir des hypothèses suivantes :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1349">Therefore, one can assume:</span></span>

* <span data-ttu-id="07e4c-1350">Moins il y a de disques utilisés pour stocker les unités de base de données, plus le débit global de lecture est réduit</span><span class="sxs-lookup"><span data-stu-id="07e4c-1350">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="07e4c-1351">Moins il y a de threads UC dans la machine virtuelle, plus l’impact de la compression de sauvegarde est grave</span><span class="sxs-lookup"><span data-stu-id="07e4c-1351">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="07e4c-1352">Moins il y a de cibles (répertoires d’agrégation, disques) d’écriture de la sauvegarde, plus le débit est faible</span><span class="sxs-lookup"><span data-stu-id="07e4c-1352">The fewer targets (Stripe Directories, disks) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="07e4c-1353">Pour augmenter le nombre de cibles d’écriture, il est possible d’utiliser/de combiner deux options selon vos besoins :</span><span class="sxs-lookup"><span data-stu-id="07e4c-1353">To increase the number of targets to write to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="07e4c-1354">Agréger le volume cible de sauvegarde sur plusieurs disques, afin d’améliorer le débit d’E/S par seconde sur ce volume agrégé par bandes</span><span class="sxs-lookup"><span data-stu-id="07e4c-1354">Striping the backup target volume over multiple disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="07e4c-1355">Utiliser plusieurs répertoires cible d’écriture de la sauvegarde</span><span class="sxs-lookup"><span data-stu-id="07e4c-1355">Using more than one target directory to write the backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="07e4c-1356">Haute disponibilité et récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="07e4c-1356">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="07e4c-1357">La fonction HADR (haute disponibilité et récupération d’urgence) DB2 est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1357">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="07e4c-1358">Si les machines virtuelles de la configuration haute disponibilité disposent de la résolution de noms de travail, l’installation dans Azure ne diffère pas d’une installation effectuée en local.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1358">If the virtual machines of the HA configuration have working name resolution, the setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="07e4c-1359">Il est déconseillé de se fier uniquement à la résolution IP.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1359">It is not recommended to rely on IP resolution only.</span></span>

<span data-ttu-id="07e4c-1360">N’utilisez pas la géoréplication pour les comptes de stockage qui stockent les disques de base de données.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1360">Do not use Geo-Replication for the storage accounts that store the database disks.</span></span> <span data-ttu-id="07e4c-1361">Pour plus d’informations, consultez les chapitres [Stockage Microsoft Azure][dbms-guide-2.3] et [Haute disponibilité et récupération d’urgence avec les machines virtuelles Azure][dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1361">For more information, refer to chapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="07e4c-1362">Autres</span><span class="sxs-lookup"><span data-stu-id="07e4c-1362">Other</span></span>
<span data-ttu-id="07e4c-1363">Tous les autres sujets généraux, notamment les groupes à haute disponibilité Azure ou la surveillance SAP, s’appliquent avec IBM DB2 pour LUW comme décrit dans les trois premiers chapitres dans ce document pour les déploiements de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="07e4c-1363">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span>

<span data-ttu-id="07e4c-1364">Voir également le chapitre [Résumé – SQL Server général pour SAP sur Azure][dbms-guide-5.8].</span><span class="sxs-lookup"><span data-stu-id="07e4c-1364">Also refer to chapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>

