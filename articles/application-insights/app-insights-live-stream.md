---
title: "aaaLive métriques de flux de données avec des mesures personnalisées et des diagnostics dans Azure Application Insights | Documents Microsoft"
description: "Surveillez votre application web en temps réel avec des métriques personnalisées, et diagnostiquez les problèmes avec un flux temps réel des échecs, des traces et des événements."
services: application-insights
documentationcenter: 
author: SoubhagyaDash
manager: carmonm
ms.assetid: 1f471176-38f3-40b3-bc6d-3f47d0cbaaa2
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: bwren
ms.openlocfilehash: 68ddfbf387379ea778c20280c4ec96baa06d3273
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="live-metrics-stream-monitor--diagnose-with-1-second-latency"></a><span data-ttu-id="077c0-103">Flux de métriques temps réel : Surveiller et diagnostiquer avec une latence de 1 seconde</span><span class="sxs-lookup"><span data-stu-id="077c0-103">Live Metrics Stream: Monitor & Diagnose with 1-second latency</span></span> 

<span data-ttu-id="077c0-104">Sonde de battements du coeur hello de votre application web dynamique et de production à l’aide de flux Live de métriques à partir de [Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="077c0-104">Probe hello beating heart of your live, in-production web application by using Live Metrics Stream from [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="077c0-105">Sélectionnez et toowatch de compteurs métriques et les performances en temps réel, sans n’importe quel service de tooyour perturbation de filtre.</span><span class="sxs-lookup"><span data-stu-id="077c0-105">Select and filter metrics and performance counters toowatch in real time, without any disturbance tooyour service.</span></span> <span data-ttu-id="077c0-106">Inspectez les traces de pile à partir d’échantillons de demandes en échec et d’exceptions.</span><span class="sxs-lookup"><span data-stu-id="077c0-106">Inspect stack traces from sample failed requests and exceptions.</span></span> <span data-ttu-id="077c0-107">En combinaison avec le [profileur](app-insights-profiler.md), le [débogueur d’instantané](app-insights-snapshot-debugger.md) et les [tests de performances](app-insights-monitor-web-app-availability.md#performance-tests), les flux de métriques temps réel constituent un outil de diagnostic puissant et non invasif pour votre site web dynamique.</span><span class="sxs-lookup"><span data-stu-id="077c0-107">Together with [Profiler](app-insights-profiler.md), [Snapshot debugger](app-insights-snapshot-debugger.md), and [performance testing](app-insights-monitor-web-app-availability.md#performance-tests),  Live Metrics Stream provides a powerful and non-invasive diagnostic tool for your live web site.</span></span>

<span data-ttu-id="077c0-108">Avec les flux de métriques temps réel, vous pouvez :</span><span class="sxs-lookup"><span data-stu-id="077c0-108">With Live Metrics Stream, you can:</span></span>

* <span data-ttu-id="077c0-109">Valider un correctif lors de sa publication, en observant les performances et les nombres d’échecs.</span><span class="sxs-lookup"><span data-stu-id="077c0-109">Validate a fix while it is released, by watching performance and failure counts.</span></span>
* <span data-ttu-id="077c0-110">Regardez effet hello du test de charge et de diagnostiquer les problèmes en direct.</span><span class="sxs-lookup"><span data-stu-id="077c0-110">Watch hello effect of test loads, and diagnose issues live.</span></span> 
* <span data-ttu-id="077c0-111">Se concentrer sur les sessions de test particulier ou filtrer les problèmes connus, par sélection et filtrage des métriques hello toowatch.</span><span class="sxs-lookup"><span data-stu-id="077c0-111">Focus on particular test sessions or filter out known issues, by selecting and filtering hello metrics you want toowatch.</span></span>
* <span data-ttu-id="077c0-112">Obtenir les traces des exceptions quand elles se produisent.</span><span class="sxs-lookup"><span data-stu-id="077c0-112">Get exception traces as they happen.</span></span>
* <span data-ttu-id="077c0-113">Essayez d’utiliser des filtres toofind hello des indicateurs de performance clés les plus pertinents.</span><span class="sxs-lookup"><span data-stu-id="077c0-113">Experiment with filters toofind hello most relevant KPIs.</span></span>
* <span data-ttu-id="077c0-114">Surveiller en temps réel des compteurs de performances Windows.</span><span class="sxs-lookup"><span data-stu-id="077c0-114">Monitor any Windows performance counter live.</span></span>
* <span data-ttu-id="077c0-115">Identifiez un serveur qui rencontre des problèmes et facilement filtrer tous les hello actives/indicateur de performance clé flux toojust ce serveur.</span><span class="sxs-lookup"><span data-stu-id="077c0-115">Easily identify a server that is having issues, and filter all hello KPI/live feed toojust that server.</span></span>

<span data-ttu-id="077c0-116">[![Vidéo sur les flux de métriques temps réel](./media/app-insights-live-stream/youtube.png)](https://www.youtube.com/watch?v=zqfHf1Oi5PY)</span><span class="sxs-lookup"><span data-stu-id="077c0-116">[![Live Metrics Stream video](./media/app-insights-live-stream/youtube.png)](https://www.youtube.com/watch?v=zqfHf1Oi5PY)</span></span>

<span data-ttu-id="077c0-117">Flux Live de métriques est actuellement disponible sur les applications ASP.NET s’exécutent localement ou dans le Cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-117">Live Metrics Stream is currently available on ASP.NET apps running on-premises or in hello Cloud.</span></span> 

## <a name="get-started"></a><span data-ttu-id="077c0-118">Prise en main</span><span class="sxs-lookup"><span data-stu-id="077c0-118">Get started</span></span>

1. <span data-ttu-id="077c0-119">Si vous ne l’avez pas encore fait, [installez Application Insights](app-insights-asp-net.md) dans votre application web ASP.NET ou dans votre [application de serveur Windows](app-insights-windows-services.md).</span><span class="sxs-lookup"><span data-stu-id="077c0-119">If you haven't yet [installed Application Insights](app-insights-asp-net.md) in your ASP.NET web app or [Windows server app](app-insights-windows-services.md), do that now.</span></span> 
2. <span data-ttu-id="077c0-120">**Dernière version de mise à jour toohello** du package d’Application Insights hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-120">**Update toohello latest version** of hello Application Insights package.</span></span> <span data-ttu-id="077c0-121">Dans Visual Studio, cliquez avec le bouton droit sur votre projet et choisissez **Gérer les packages NuGet**.</span><span class="sxs-lookup"><span data-stu-id="077c0-121">In Visual Studio, right-click your project and choose **Manage Nuget packages**.</span></span> <span data-ttu-id="077c0-122">Ouvrez hello **mises à jour** onglet, vérifiez **inclure la version préliminaire**, sélectionnez tous les packages de Microsoft.ApplicationInsights.* hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-122">Open hello **Updates** tab, check **Include prerelease**, and select all hello Microsoft.ApplicationInsights.* packages.</span></span>

    <span data-ttu-id="077c0-123">Redéployez votre application.</span><span class="sxs-lookup"><span data-stu-id="077c0-123">Redeploy your app.</span></span>

3. <span data-ttu-id="077c0-124">Bonjour [portail Azure](https://portal.azure.com), ouvrir la ressource d’Application Insights hello pour votre application, puis ouvrez le flux Live.</span><span class="sxs-lookup"><span data-stu-id="077c0-124">In hello [Azure portal](https://portal.azure.com), open hello Application Insights resource for your app, and then open Live Stream.</span></span>

4. <span data-ttu-id="077c0-125">[Canal de contrôle sécurisé hello](#secure-the-control-channel) si vous pouvez utiliser des données sensibles telles que les noms des clients dans vos filtres.</span><span class="sxs-lookup"><span data-stu-id="077c0-125">[Secure hello control channel](#secure-the-control-channel) if you might use sensitive data such as customer names in your filters.</span></span>


![Dans le panneau de vue d’ensemble de hello, cliquez sur le flux en direct](./media/app-insights-live-stream/live-stream-2.png)

### <a name="no-data-check-your-server-firewall"></a><span data-ttu-id="077c0-127">Pas de données ?</span><span class="sxs-lookup"><span data-stu-id="077c0-127">No data?</span></span> <span data-ttu-id="077c0-128">Vérifier le pare-feu de votre serveur</span><span class="sxs-lookup"><span data-stu-id="077c0-128">Check your server firewall</span></span>

<span data-ttu-id="077c0-129">Vérifiez hello [sortant des ports pour les flux Live de métriques](app-insights-ip-addresses.md#outgoing-ports) sont ouverts dans le pare-feu hello de vos serveurs.</span><span class="sxs-lookup"><span data-stu-id="077c0-129">Check hello [outgoing ports for Live Metrics Stream](app-insights-ip-addresses.md#outgoing-ports) are open in hello firewall of your servers.</span></span> 


## <a name="how-does-live-metrics-stream-differ-from-metrics-explorer-and-analytics"></a><span data-ttu-id="077c0-130">En quoi les flux de métriques temps réel diffèrent-ils de Metrics Explorer et d’Analytique ?</span><span class="sxs-lookup"><span data-stu-id="077c0-130">How does Live Metrics Stream differ from Metrics Explorer and Analytics?</span></span>

| |<span data-ttu-id="077c0-131">Flux temps réel</span><span class="sxs-lookup"><span data-stu-id="077c0-131">Live Stream</span></span> | <span data-ttu-id="077c0-132">Metrics Explorer et Analytique</span><span class="sxs-lookup"><span data-stu-id="077c0-132">Metrics Explorer and Analytics</span></span> |
|---|---|---|
|<span data-ttu-id="077c0-133">Latence</span><span class="sxs-lookup"><span data-stu-id="077c0-133">Latency</span></span>|<span data-ttu-id="077c0-134">Données affichées en une seconde</span><span class="sxs-lookup"><span data-stu-id="077c0-134">Data displayed within one second</span></span>|<span data-ttu-id="077c0-135">Agrégé sur plusieurs minutes</span><span class="sxs-lookup"><span data-stu-id="077c0-135">Aggregated over minutes</span></span>|
|<span data-ttu-id="077c0-136">Pas de conservation</span><span class="sxs-lookup"><span data-stu-id="077c0-136">No retention</span></span>|<span data-ttu-id="077c0-137">Elles sont conservées pendant que se trouve sur le graphique de hello et il est ensuite ignoré</span><span class="sxs-lookup"><span data-stu-id="077c0-137">Data persists while it's on hello chart, and is then discarded</span></span>|[<span data-ttu-id="077c0-138">Données conservées pendant 90 jours</span><span class="sxs-lookup"><span data-stu-id="077c0-138">Data retained for 90 days</span></span>](app-insights-data-retention-privacy.md#how-long-is-the-data-kept)|
|<span data-ttu-id="077c0-139">À la demande</span><span class="sxs-lookup"><span data-stu-id="077c0-139">On demand</span></span>|<span data-ttu-id="077c0-140">Les données sont diffusées dès que vous ouvrez les métriques temps réel</span><span class="sxs-lookup"><span data-stu-id="077c0-140">Data is streamed while you open Live Metrics</span></span>|<span data-ttu-id="077c0-141">Les données sont envoyées chaque fois que hello SDK est installé et activé</span><span class="sxs-lookup"><span data-stu-id="077c0-141">Data is sent whenever hello SDK is installed and enabled</span></span>|
|<span data-ttu-id="077c0-142">Gratuit</span><span class="sxs-lookup"><span data-stu-id="077c0-142">Free</span></span>|<span data-ttu-id="077c0-143">Pas de facturation pour les données du flux temps réel</span><span class="sxs-lookup"><span data-stu-id="077c0-143">There is no charge for Live Stream data</span></span>|<span data-ttu-id="077c0-144">L’objet trop[tarification](app-insights-pricing.md)</span><span class="sxs-lookup"><span data-stu-id="077c0-144">Subject too[pricing](app-insights-pricing.md)</span></span>
|<span data-ttu-id="077c0-145">échantillonnage</span><span class="sxs-lookup"><span data-stu-id="077c0-145">Sampling</span></span>|<span data-ttu-id="077c0-146">Tous les compteurs et métriques sélectionnés sont transmis.</span><span class="sxs-lookup"><span data-stu-id="077c0-146">All selected metrics and counters are transmitted.</span></span> <span data-ttu-id="077c0-147">Les échecs et les traces de pile sont échantillonnés.</span><span class="sxs-lookup"><span data-stu-id="077c0-147">Failures and stack traces are sampled.</span></span> <span data-ttu-id="077c0-148">Les processeurs de télémétrie ne sont pas appliqués.</span><span class="sxs-lookup"><span data-stu-id="077c0-148">TelemetryProcessors are not applied.</span></span>|<span data-ttu-id="077c0-149">Les événements peuvent être [échantillonnés](app-insights-api-filtering-sampling.md)</span><span class="sxs-lookup"><span data-stu-id="077c0-149">Events may be [sampled](app-insights-api-filtering-sampling.md)</span></span>|
|<span data-ttu-id="077c0-150">Canal de contrôle</span><span class="sxs-lookup"><span data-stu-id="077c0-150">Control channel</span></span>|<span data-ttu-id="077c0-151">Les signaux de contrôle de filtre sont envoyés toohello Kit de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="077c0-151">Filter control signals are sent toohello SDK.</span></span> <span data-ttu-id="077c0-152">Nous vous recommandons de [sécuriser ce canal](#secure-channel).</span><span class="sxs-lookup"><span data-stu-id="077c0-152">We recommend you [secure this channel](#secure-channel).</span></span>|<span data-ttu-id="077c0-153">La communication est à sens unique, toohello portail</span><span class="sxs-lookup"><span data-stu-id="077c0-153">Communication is one-way, toohello portal</span></span>|


## <a name="select-and-filter-your-metrics"></a><span data-ttu-id="077c0-154">Sélectionner et filtrer vos métriques</span><span class="sxs-lookup"><span data-stu-id="077c0-154">Select and filter your metrics</span></span>

<span data-ttu-id="077c0-155">(Disponible sur classique avec les applications ASP.NET hello dernière version du SDK.)</span><span class="sxs-lookup"><span data-stu-id="077c0-155">(Available on classic ASP.NET apps with hello latest SDK.)</span></span>

<span data-ttu-id="077c0-156">Vous pouvez surveiller les KPI personnalisé en direct en appliquant des filtres arbitraires sur toutes les données de télémétrie Application Insights à partir du portail de hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-156">You can monitor custom KPI live by applying arbitrary filters on any Application Insights telemetry from hello portal.</span></span> <span data-ttu-id="077c0-157">Cliquez sur le contrôle de filtre hello montre lorsque vous la souris sur un des graphiques de hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-157">Click hello filter control that shows when you mouse-over any of hello charts.</span></span> <span data-ttu-id="077c0-158">Hello suivant le graphique est tracé nombre demande KPI personnalisé avec des filtres sur les attributs d’URL et la durée.</span><span class="sxs-lookup"><span data-stu-id="077c0-158">hello following chart is plotting a custom Request count KPI with filters on URL and Duration attributes.</span></span> <span data-ttu-id="077c0-159">Valider vos filtres par hello section d’aperçu du flux de données qui montre un flux en direct de télémétrie qui correspond aux critères de hello que vous avez spécifié à n’importe quel point dans le temps.</span><span class="sxs-lookup"><span data-stu-id="077c0-159">Validate your filters with hello Stream Preview section that shows a live feed of telemetry that matches hello criteria you have specified at any point in time.</span></span> 

![Indicateur de performance clé (KPI) de demande personnalisé](./media/app-insights-live-stream/live-stream-filteredMetric.png)

<span data-ttu-id="077c0-161">Vous pouvez surveiller une valeur autre qu’un nombre.</span><span class="sxs-lookup"><span data-stu-id="077c0-161">You can monitor a value different from Count.</span></span> <span data-ttu-id="077c0-162">les options de Hello dépendent de type hello du flux, ce qui peut être n’importe quel télémétrie Application Insights : demandes, dépendances, exceptions, des traces, les événements ou métriques.</span><span class="sxs-lookup"><span data-stu-id="077c0-162">hello options depend on hello type of stream, which could be any Application Insights telemetry: requests, dependencies, exceptions, traces, events, or metrics.</span></span> <span data-ttu-id="077c0-163">Il peut s’agir d’une [mesure personnalisée](app-insights-api-custom-events-metrics.md#properties) :</span><span class="sxs-lookup"><span data-stu-id="077c0-163">It can be your own [custom measurement](app-insights-api-custom-events-metrics.md#properties):</span></span>

![Options de valeur](./media/app-insights-live-stream/live-stream-valueoptions.png)

<span data-ttu-id="077c0-165">En outre tooApplication télémétrie Insights, vous pouvez également surveiller n’importe quel compteur de performances de Windows en sélectionnant qui à partir des options de flux hello et en fournissant le nom hello hello du compteur de performance.</span><span class="sxs-lookup"><span data-stu-id="077c0-165">In addition tooApplication Insights telemetry, you can also monitor any Windows performance counter by selecting that from hello stream options, and providing hello name of hello performance counter.</span></span>

<span data-ttu-id="077c0-166">Les métriques temps réel sont agrégées à deux endroits : localement sur chaque serveur, puis sur tous les serveurs.</span><span class="sxs-lookup"><span data-stu-id="077c0-166">Live metrics are aggregated at two points: locally on each server, and then across all servers.</span></span> <span data-ttu-id="077c0-167">Vous pouvez modifier la valeur par défaut de hello en sélectionnant l’option autres options dans hello respectifs les zones déroulantes.</span><span class="sxs-lookup"><span data-stu-id="077c0-167">You can change hello default at either by selecting other options in hello respective drop-downs.</span></span>

## <a name="sample-telemetry-custom-live-diagnostic-events"></a><span data-ttu-id="077c0-168">Exemple de télémétrie : événements de diagnostic temps réel personnalisés</span><span class="sxs-lookup"><span data-stu-id="077c0-168">Sample Telemetry: Custom Live Diagnostic Events</span></span>
<span data-ttu-id="077c0-169">Par défaut, flux d’événements hello présente des exemples de demandes ayant échoué et les appels de dépendance, les exceptions, les événements et les traces.</span><span class="sxs-lookup"><span data-stu-id="077c0-169">By default, hello live feed of events shows samples of failed requests and dependency calls, exceptions, events, and traces.</span></span> <span data-ttu-id="077c0-170">Cliquez sur critères hello filtre icône toosee hello appliquée à n’importe quel point dans le temps.</span><span class="sxs-lookup"><span data-stu-id="077c0-170">Click hello filter icon toosee hello applied criteria at any point in time.</span></span> 

![Flux temps réel par défaut](./media/app-insights-live-stream/live-stream-eventsdefault.png)

<span data-ttu-id="077c0-172">Comme avec les mesures, vous pouvez spécifier n’importe quel tooany critères arbitraire des types de données de télémétrie Application Insights hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-172">As with metrics, you can specify any arbitrary criteria tooany of hello Application Insights telemetry types.</span></span> <span data-ttu-id="077c0-173">Dans cet exemple, nous sélectionnons des échecs de demande, des suivis et des événements spécifiques.</span><span class="sxs-lookup"><span data-stu-id="077c0-173">In this example, we are selecting specific request failures, traces, and events.</span></span> <span data-ttu-id="077c0-174">Nous sélectionnons également toutes les exceptions et tous les échecs de dépendance.</span><span class="sxs-lookup"><span data-stu-id="077c0-174">We are also selecting all exceptions and dependency failures.</span></span>

![Flux temps réel personnalisé](./media/app-insights-live-stream/live-stream-events.png)

<span data-ttu-id="077c0-176">Remarque : Actuellement, pour les critères basés sur le message d’Exception, utilisez message d’exception extérieur hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-176">Note: Currently, for Exception message-based criteria, use hello outermost exception message.</span></span> <span data-ttu-id="077c0-177">Bonjour précédent exemple, toofilter des exceptions sans gravité de hello avec le message d’exception interne (suit hello » <--« délimiteur) hello « client » déconnecté.</span><span class="sxs-lookup"><span data-stu-id="077c0-177">In hello preceding example, toofilter out hello benign exception with inner exception message (follows hello "<--" delimiter) "hello client disconnected."</span></span> <span data-ttu-id="077c0-178">utilisez un critère de message ne contenant pas « Erreur de lecture du contenu de la demande ».</span><span class="sxs-lookup"><span data-stu-id="077c0-178">use a message not-contains "Error reading request content" criteria.</span></span>

<span data-ttu-id="077c0-179">Afficher les détails de hello d’un élément dans hello live flux en cliquant dessus.</span><span class="sxs-lookup"><span data-stu-id="077c0-179">See hello details of an item in hello live feed by clicking it.</span></span> <span data-ttu-id="077c0-180">Vous pouvez suspendre hello flux soit en cliquant sur **suspendre** simplement le défilement vers le bas ou en cliquant sur un élément.</span><span class="sxs-lookup"><span data-stu-id="077c0-180">You can pause hello feed either by clicking **Pause** or simply scrolling down, or clicking an item.</span></span> <span data-ttu-id="077c0-181">Les flux Live reprend après le défilement arrière toohello haut, ou en cliquant sur le compteur hello d’éléments collectées pendant qu’il a été suspendu.</span><span class="sxs-lookup"><span data-stu-id="077c0-181">Live feed will resume after you scroll back toohello top, or by clicking hello counter of items collected while it was paused.</span></span>

![Échecs dynamiques échantillonnés](./media/app-insights-live-stream/live-metrics-eventdetail.png)

## <a name="filter-by-server-instance"></a><span data-ttu-id="077c0-183">Filtrer par instance de serveur</span><span class="sxs-lookup"><span data-stu-id="077c0-183">Filter by server instance</span></span>

<span data-ttu-id="077c0-184">Si vous souhaitez toomonitor une instance de rôle de serveur spécifique, vous pouvez filtrer par serveur.</span><span class="sxs-lookup"><span data-stu-id="077c0-184">If you want toomonitor a particular server role instance, you can filter by server.</span></span>

![Échecs dynamiques échantillonnés](./media/app-insights-live-stream/live-stream-filter.png)

## <a name="sdk-requirements"></a><span data-ttu-id="077c0-186">Configuration requise du Kit de développement logiciel (SDK)</span><span class="sxs-lookup"><span data-stu-id="077c0-186">SDK Requirements</span></span>
<span data-ttu-id="077c0-187">Le flux de métriques temps réel personnalisé est disponible avec la version 2.4.0-beta2 ou plus récente du [Kit de développement logiciel (SDK) Application Insights pour le web](https://www.nuget.org/packages/Microsoft.ApplicationInsights.Web/).</span><span class="sxs-lookup"><span data-stu-id="077c0-187">Custom Live Metrics Stream is available with version 2.4.0-beta2 or newer of [Application Insights SDK for web](https://www.nuget.org/packages/Microsoft.ApplicationInsights.Web/).</span></span> <span data-ttu-id="077c0-188">N’oubliez pas d’option de « Inclure la version préliminaire » tooselect à partir du Gestionnaire de package NuGet.</span><span class="sxs-lookup"><span data-stu-id="077c0-188">Remember tooselect "Include Prerelease" option from NuGet package manager.</span></span>

## <a name="secure-hello-control-channel"></a><span data-ttu-id="077c0-189">Sécuriser le canal de contrôle hello</span><span class="sxs-lookup"><span data-stu-id="077c0-189">Secure hello control channel</span></span>
<span data-ttu-id="077c0-190">vous spécifiez des critères filtres personnalisés Hello sont envoyés composant des métriques de Live toohello arrière Bonjour Application Insights SDK.</span><span class="sxs-lookup"><span data-stu-id="077c0-190">hello custom filters criteria you specify are sent back toohello Live Metrics component in hello Application Insights SDK.</span></span> <span data-ttu-id="077c0-191">filtres de Hello peut contenir potentiellement des informations sensibles telles que CustomerID.</span><span class="sxs-lookup"><span data-stu-id="077c0-191">hello filters could potentially contain sensitive information such as customerIDs.</span></span> <span data-ttu-id="077c0-192">Vous pouvez apporter les canaux hello sécurisé avec une clé secrète d’API en outre toohello clé d’instrumentation.</span><span class="sxs-lookup"><span data-stu-id="077c0-192">You can make hello channel secure with a secret API key in addition toohello instrumentation key.</span></span>
### <a name="create-an-api-key"></a><span data-ttu-id="077c0-193">Création d’une clé API</span><span class="sxs-lookup"><span data-stu-id="077c0-193">Create an API Key</span></span>

![Création d’une clé API](./media/app-insights-live-stream/live-metrics-apikeycreate.png)

### <a name="add-api-key-tooconfiguration"></a><span data-ttu-id="077c0-195">Ajouter tooConfiguration clée d’API</span><span class="sxs-lookup"><span data-stu-id="077c0-195">Add API key tooConfiguration</span></span>
<span data-ttu-id="077c0-196">Dans le fichier applicationinsights.config de hello, ajoutez hello AuthenticationApiKey toohello QuickPulseTelemetryModule :</span><span class="sxs-lookup"><span data-stu-id="077c0-196">In hello applicationinsights.config file, add hello AuthenticationApiKey toohello QuickPulseTelemetryModule:</span></span>
``` XML

<Add Type="Microsoft.ApplicationInsights.Extensibility.PerfCounterCollector.QuickPulse.QuickPulseTelemetryModule, Microsoft.AI.PerfCounterCollector">
      <AuthenticationApiKey>YOUR-API-KEY-HERE</AuthenticationApiKey>
</Add> 

```
<span data-ttu-id="077c0-197">Ou, dans le code, définissez-la sur hello QuickPulseTelemetryModule :</span><span class="sxs-lookup"><span data-stu-id="077c0-197">Or in code, set it on hello QuickPulseTelemetryModule:</span></span>

``` C#

    module.AuthenticationApiKey = "YOUR-API-KEY-HERE";

```

<span data-ttu-id="077c0-198">Toutefois, si vous reconnaissez et approuver que tout hello serveurs connectés, vous pouvez essayer des filtres personnalisés hello sans canal de hello authentifié.</span><span class="sxs-lookup"><span data-stu-id="077c0-198">However, if you recognize and trust all hello connected servers, you can try hello custom filters without hello authenticated channel.</span></span> <span data-ttu-id="077c0-199">Cette option est disponible pour six mois.</span><span class="sxs-lookup"><span data-stu-id="077c0-199">This option is available for six months.</span></span> <span data-ttu-id="077c0-200">Ce remplacement est nécessaire à chaque nouvelle session, ou lorsqu’un nouveau serveur est en ligne.</span><span class="sxs-lookup"><span data-stu-id="077c0-200">This override is required once every new session, or when a new server comes online.</span></span>

![Options d’authentification de métriques temps réel](./media/app-insights-live-stream/live-stream-auth.png)

>[!NOTE]
><span data-ttu-id="077c0-202">Nous vous recommandons vivement de configurer le canal de hello authentifié avant d’entrer des informations potentiellement sensibles, telles que CustomerID dans les critères de filtre hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-202">We strongly recommend that you set up hello authenticated channel before entering potentially sensitive information like CustomerID in hello filter criteria.</span></span>
>

## <a name="generating-a-performance-test-load"></a><span data-ttu-id="077c0-203">Génération d’un test de performances de charge</span><span class="sxs-lookup"><span data-stu-id="077c0-203">Generating a performance test load</span></span>

<span data-ttu-id="077c0-204">Si vous souhaitez effet de hello toowatch d’une charge augmenter, panneau de Test de performances utilisation hello.</span><span class="sxs-lookup"><span data-stu-id="077c0-204">If you want toowatch hello effect of a load increase, use hello Performance Test blade.</span></span> <span data-ttu-id="077c0-205">Il simule des demandes à partir d’un certain nombre d’utilisateurs simultanés.</span><span class="sxs-lookup"><span data-stu-id="077c0-205">It simulates requests from a number of simultaneous users.</span></span> <span data-ttu-id="077c0-206">Il peut s’exécuter soit « tests manuels » (tests de ping) d’une URL unique, ou il peut exécuter un [test de performances web de multi-step](app-insights-monitor-web-app-availability.md#multi-step-web-tests) que vous téléchargez (de hello la même façon que la disponibilité de test).</span><span class="sxs-lookup"><span data-stu-id="077c0-206">It can run either "manual tests" (ping tests) of a single URL, or it can run a [multi-step web performance test](app-insights-monitor-web-app-availability.md#multi-step-web-tests) that you upload (in hello same way as an availability test).</span></span>

> [!TIP]
> <span data-ttu-id="077c0-207">Après avoir créé le test de performances de hello, ouvrez le test de hello et hello lame de flux Live dans des fenêtres distinctes.</span><span class="sxs-lookup"><span data-stu-id="077c0-207">After you create hello performance test, open hello test and hello Live Stream blade in separate windows.</span></span> <span data-ttu-id="077c0-208">Vous pouvez voir lorsque le hello en file d’attente démarre de test de performances et les flux en direct à hello espion même temps.</span><span class="sxs-lookup"><span data-stu-id="077c0-208">You can see when hello queued performance test starts, and watch live stream at hello same time.</span></span>
>


## <a name="troubleshooting"></a><span data-ttu-id="077c0-209">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="077c0-209">Troubleshooting</span></span>

<span data-ttu-id="077c0-210">Pas de données ?</span><span class="sxs-lookup"><span data-stu-id="077c0-210">No data?</span></span> <span data-ttu-id="077c0-211">Si votre application se trouve dans un réseau protégé : le Flux de métriques temps réel utilise des adresses IP différentes d’autres données de télémétrie Application Insights.</span><span class="sxs-lookup"><span data-stu-id="077c0-211">If your application is in a protected network: Live Metrics Stream uses a different IP addresses than other Application Insights telemetry.</span></span> <span data-ttu-id="077c0-212">Assurez-vous que [ces adresses IP](app-insights-ip-addresses.md) sont ouvertes dans votre pare-feu.</span><span class="sxs-lookup"><span data-stu-id="077c0-212">Make sure [those IP addresses](app-insights-ip-addresses.md) are open in your firewall.</span></span>



## <a name="next-steps"></a><span data-ttu-id="077c0-213">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="077c0-213">Next steps</span></span>
* [<span data-ttu-id="077c0-214">Surveillance de l’utilisation avec Application Insights</span><span class="sxs-lookup"><span data-stu-id="077c0-214">Monitoring usage with Application Insights</span></span>](app-insights-web-track-usage.md)
* [<span data-ttu-id="077c0-215">Utilisation de Diagnostic Search</span><span class="sxs-lookup"><span data-stu-id="077c0-215">Using Diagnostic Search</span></span>](app-insights-diagnostic-search.md)
* [<span data-ttu-id="077c0-216">Profileur</span><span class="sxs-lookup"><span data-stu-id="077c0-216">Profiler</span></span>](app-insights-profiler.md)
* [<span data-ttu-id="077c0-217">Débogueur de capture instantanée</span><span class="sxs-lookup"><span data-stu-id="077c0-217">Snapshot debugger</span></span>](app-insights-snapshot-debugger.md)
