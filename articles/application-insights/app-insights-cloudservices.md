---
title: Application Insights pour Azure Cloud Services | Microsoft Docs
description: "Surveillance efficace de vos rôles Web et de travail avec Application Insights"
services: application-insights
documentationcenter: 
keywords: WAD2AI, Azure Diagnostics
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: c12b225aa351d0c272243469550791a6840091e0
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="4901a-104">Application Insights pour Services cloud Azure</span><span class="sxs-lookup"><span data-stu-id="4901a-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="4901a-105">[Les applications de service cloud Microsoft Azure](https://azure.microsoft.com/services/cloud-services/) peuvent être surveillées par [Application Insights][start] pour la disponibilité, les performances, les défaillances et l’utilisation en combinant les données des kits de développement logiciel (SDK) d’Application Insights avec les données [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) de vos services cloud.</span><span class="sxs-lookup"><span data-stu-id="4901a-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="4901a-106">Avec les retours que vous obtenez sur les performances et l’efficacité de votre application dans la nature, vous pouvez prendre des décisions avisées sur la direction de la conception de chaque cycle de développement.</span><span class="sxs-lookup"><span data-stu-id="4901a-106">With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.</span></span>

![Exemple](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="4901a-108">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="4901a-108">Before you start</span></span>
<span data-ttu-id="4901a-109">Vous devez disposer des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="4901a-109">You'll need:</span></span>

* <span data-ttu-id="4901a-110">Un abonnement à [Microsoft Azure](http://azure.com).</span><span class="sxs-lookup"><span data-stu-id="4901a-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="4901a-111">Connectez-vous avec un compte Microsoft, que vous pouvez avoir pour Windows, XBox Live ou d’autres services cloud de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4901a-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="4901a-112">Microsoft Azure Tools 2.9 ou version ultérieure</span><span class="sxs-lookup"><span data-stu-id="4901a-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="4901a-113">Developer Analytics Tools 7.10 ou version ultérieure</span><span class="sxs-lookup"><span data-stu-id="4901a-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="4901a-114">Démarrage rapide</span><span class="sxs-lookup"><span data-stu-id="4901a-114">Quick start</span></span>
<span data-ttu-id="4901a-115">Le moyen le plus simple et le plus rapide pour surveiller votre service cloud avec Application Insights consiste à choisir cette option quand vous publiez votre service dans Azure.</span><span class="sxs-lookup"><span data-stu-id="4901a-115">The quickest and easiest way to monitor your cloud service with Application Insights is to choose that option when you publish your service to Azure.</span></span>

![Exemple](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="4901a-117">Cette option instrumente votre application au moment de l’exécution, ce qui vous donne toute la télémétrie dont vous avez besoin pour surveiller les demandes, les exceptions et les dépendances dans votre rôle web, ainsi que les compteurs de performances de vos rôles de travail.</span><span class="sxs-lookup"><span data-stu-id="4901a-117">This option instruments your app at run time, giving you all the telemetry you need to monitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="4901a-118">Les traces de diagnostics générées par votre application sont également envoyées à Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4901a-118">Any diagnostic traces generated by your app are also sent to Application Insights.</span></span>

<span data-ttu-id="4901a-119">Si tout ceci vous suffit, vous avez terminé !</span><span class="sxs-lookup"><span data-stu-id="4901a-119">If that's all you need, you're done!</span></span> <span data-ttu-id="4901a-120">Les étapes suivantes consistent à [afficher les métriques de votre application](app-insights-metrics-explorer.md), à [interroger vos données avec Analytics](app-insights-analytics.md) et éventuellement à configurer un [tableau de bord](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="4901a-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="4901a-121">Vous souhaiterez peut-être configurer des [tests de disponibilité](app-insights-monitor-web-app-availability.md) et [ajouter du code à vos pages web](app-insights-javascript.md) pour surveiller les performances dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="4901a-121">You might want to set up [availability tests](app-insights-monitor-web-app-availability.md) and [add code to your web pages](app-insights-javascript.md) to monitor performance in the browser.</span></span>

<span data-ttu-id="4901a-122">Mais vous pouvez aussi obtenir plus d’options :</span><span class="sxs-lookup"><span data-stu-id="4901a-122">But you can also get more options:</span></span>

* <span data-ttu-id="4901a-123">Envoyer les données de différents composants et différentes configurations de builds à des ressources distinctes.</span><span class="sxs-lookup"><span data-stu-id="4901a-123">Send data from different components and build configurations to separate resources.</span></span>
* <span data-ttu-id="4901a-124">Ajouter une télémétrie personnalisée à partir de votre application.</span><span class="sxs-lookup"><span data-stu-id="4901a-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="4901a-125">Si ces options vous intéressent, lisez la suite.</span><span class="sxs-lookup"><span data-stu-id="4901a-125">If those options are of interest to you, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="4901a-126">Exemple d’application instrumentée avec Application Insights</span><span class="sxs-lookup"><span data-stu-id="4901a-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="4901a-127">Examinons l’ [exemple d’application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) dans lequel Application Insights est ajouté à un service cloud avec deux rôles de travail hébergés dans Azure.</span><span class="sxs-lookup"><span data-stu-id="4901a-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added to a cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="4901a-128">Les informations suivantes vous indiqueront comment adapter votre propre projet de service cloud de la même façon.</span><span class="sxs-lookup"><span data-stu-id="4901a-128">What follows tells you how to adapt your own cloud service project in the same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="4901a-129">Planifier des ressources et des groupes de ressources</span><span class="sxs-lookup"><span data-stu-id="4901a-129">Plan resources and resource groups</span></span>
<span data-ttu-id="4901a-130">Les données de télémétrie de votre application sont stockées, analysées et affichées dans une ressource Azure de type Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4901a-130">The telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="4901a-131">Chaque ressource appartient à un groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="4901a-131">Each resource belongs to a resource group.</span></span> <span data-ttu-id="4901a-132">Les groupes de ressources servent à gérer les coûts, à accorder l’accès aux membres d’équipe et à déployer des mises à jour dans une transaction unique et coordonnée.</span><span class="sxs-lookup"><span data-stu-id="4901a-132">Resource groups are used for managing costs, for granting access to team members, and to deploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="4901a-133">Par exemple, vous pouvez [écrire un script pour déployer](../azure-resource-manager/resource-group-template-deploy.md) un service cloud Azure et ses ressources de surveillance Application Insights en une seule opération.</span><span class="sxs-lookup"><span data-stu-id="4901a-133">For example, you could [write a script to deploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="4901a-134">Ressources pour les composants</span><span class="sxs-lookup"><span data-stu-id="4901a-134">Resources for components</span></span>
<span data-ttu-id="4901a-135">Le modèle recommandé consiste à créer une ressource distincte pour chaque composant de votre application, autrement dit chaque rôle web et rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="4901a-135">The recommended scheme is to create a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="4901a-136">Vous pouvez analyser chaque composant séparément, mais vous pouvez aussi créer un [tableau de bord](app-insights-dashboards.md) qui réunit les principaux graphiques de tous les composants, pour pouvoir les comparer et les surveiller ensemble.</span><span class="sxs-lookup"><span data-stu-id="4901a-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together the key charts from all the components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="4901a-137">Un autre modèle consiste à envoyer les données de télémétrie de plusieurs rôles à la même ressource, mais en [ajoutant une propriété de dimension à chaque élément de télémétrie](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) qui identifie son rôle source.</span><span class="sxs-lookup"><span data-stu-id="4901a-137">An alternative scheme is to send the telemetry from more than one role to the same resource, but [add a dimension property to each telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="4901a-138">Dans ce modèle, les graphiques de métriques telles que les exceptions affichent normalement une agrégation des décomptes des différents rôles, mais vous pouvez segmenter le graphique en fonction de l’identificateur de rôle si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="4901a-138">In this scheme, metric charts such as exceptions normally show an aggregation of the counts from the different roles, but you can segment the chart by the role identifier when required.</span></span> <span data-ttu-id="4901a-139">Vous pouvez également filtrer les recherches par la même dimension.</span><span class="sxs-lookup"><span data-stu-id="4901a-139">Searches can also be filtered by the same dimension.</span></span> <span data-ttu-id="4901a-140">Cette solution facilite quelque peu l’affichage simultané de tous les éléments, mais elle peut aussi entraîner une certaine confusion entre les rôles.</span><span class="sxs-lookup"><span data-stu-id="4901a-140">This alternative makes it a bit easier to view everything at the same time, but could also lead to some confusion between the roles.</span></span>

<span data-ttu-id="4901a-141">La télémétrie de navigateur est généralement comprise dans la même ressource que son rôle web côté serveur.</span><span class="sxs-lookup"><span data-stu-id="4901a-141">Browser telemetry is usually included in the same resource as its server-side web role.</span></span>

<span data-ttu-id="4901a-142">Placez les ressources Application Insights pour les différents composants dans un groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="4901a-142">Put the Application Insights resources for the different components in one resource group.</span></span> <span data-ttu-id="4901a-143">Ainsi, il est plus facile de les gérer ensemble.</span><span class="sxs-lookup"><span data-stu-id="4901a-143">This makes it easy to manage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="4901a-144">Séparation du développement, des tests et de la production</span><span class="sxs-lookup"><span data-stu-id="4901a-144">Separating development, test, and production</span></span>
<span data-ttu-id="4901a-145">Si vous développez des événements personnalisés pour votre prochaine fonctionnalité alors que la version précédente est active, vous devez envoyer la télémétrie de développement à une ressource Application Insights distincte.</span><span class="sxs-lookup"><span data-stu-id="4901a-145">If you are developing custom events for your next feature while the previous version is live, you want to send the development telemetry to a separate Application Insights resource.</span></span> <span data-ttu-id="4901a-146">Sinon, vous aurez des difficultés à trouver votre télémétrie de test parmi tout le trafic provenant du site actif.</span><span class="sxs-lookup"><span data-stu-id="4901a-146">Otherwise it will be hard to find your test telemetry among all the traffic from the live site.</span></span>

<span data-ttu-id="4901a-147">Pour éviter cette situation, créez des ressources distinctes pour chaque configuration de build ou « tampon » (développement, test, production...) de votre système.</span><span class="sxs-lookup"><span data-stu-id="4901a-147">To avoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="4901a-148">Placez les ressources pour chaque configuration de build dans un groupe de ressources distinct.</span><span class="sxs-lookup"><span data-stu-id="4901a-148">Put the resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="4901a-149">Pour envoyer la télémétrie aux ressources appropriées, vous pouvez configurer le SDK Application Insights pour qu’il récupère une clé d’instrumentation différente en fonction de la configuration de build.</span><span class="sxs-lookup"><span data-stu-id="4901a-149">To send the telemetry to the appropriate resources, you can set up the Application Insights SDK so that it picks up a different instrumentation key depending on the build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="4901a-150">Création d’une ressource Application Insights pour chaque rôle</span><span class="sxs-lookup"><span data-stu-id="4901a-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="4901a-151">Si vous avez décidé de créer une ressource distincte pour chaque rôle (et éventuellement un ensemble distinct pour chaque configuration de build), il est plus facile de les créer dans le portail Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4901a-151">If you've decided to create a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest to create them all in the Application Insights portal.</span></span> <span data-ttu-id="4901a-152">(Si vous créez beaucoup de ressources, vous pouvez [automatiser le processus](app-insights-powershell.md).)</span><span class="sxs-lookup"><span data-stu-id="4901a-152">(If you create resources a lot, you can [automate the process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="4901a-153">Dans le [portail Azure][portal], créez une ressource Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4901a-153">In the [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="4901a-154">Choisissez ASP.NET comme type d’application.</span><span class="sxs-lookup"><span data-stu-id="4901a-154">For application type, choose ASP.NET app.</span></span> 

    ![Cliquez sur Nouveau > Application Insights](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="4901a-156">Notez que chaque ressource est identifiée par une clé d’instrumentation.</span><span class="sxs-lookup"><span data-stu-id="4901a-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="4901a-157">Vous en aurez peut-être besoin plus tard si vous souhaitez configurer ou vérifier manuellement la configuration du SDK.</span><span class="sxs-lookup"><span data-stu-id="4901a-157">You might need this later if you want to manually configure or verify the configuration of the SDK.</span></span>

    ![Cliquez sur Propriétés, sélectionnez la clé et appuyez sur Ctrl + C](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="4901a-159">Configurer Diagnostics Azure pour chaque rôle</span><span class="sxs-lookup"><span data-stu-id="4901a-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="4901a-160">Définissez cette option pour surveiller votre application avec Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4901a-160">Set this option to monitor your app with Application Insights.</span></span> <span data-ttu-id="4901a-161">Pour les rôles web, vous bénéficierez d’alertes, de diagnostics et d’une surveillance des performances, ainsi que de l’analyse de l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="4901a-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="4901a-162">Pour d’autres rôles, vous pouvez rechercher et surveiller des diagnostics Azure tels que le redémarrage, les compteurs de performances et les appels à System.Diagnostics.Trace.</span><span class="sxs-lookup"><span data-stu-id="4901a-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls to System.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="4901a-163">Dans l’Explorateur de solutions Visual Studio, sous &lt;votre_service_cloud&gt;, Rôles, ouvrez les propriétés de chaque rôle.</span><span class="sxs-lookup"><span data-stu-id="4901a-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open the properties of each role.</span></span>
2. <span data-ttu-id="4901a-164">Dans **Configuration**, activez **Envoyer des données de diagnostic à Application Insights** et sélectionnez la ressource Application Insights appropriée créée précédemment.</span><span class="sxs-lookup"><span data-stu-id="4901a-164">In **Configuration**, set **Send diagnostics data to Application Insights** and select the appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="4901a-165">Si vous avez décidé d’utiliser une ressource Application Insights distincte pour chaque configuration de build, sélectionnez d’abord la configuration.</span><span class="sxs-lookup"><span data-stu-id="4901a-165">If you have decided to use a separate Application Insights resource for each build configuration, select the configuration first.</span></span>

![Dans les propriétés de chaque rôle Azure, configurer Application Insights](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="4901a-167">Cela a pour effet d’insérer vos clés d’instrumentation Application Insights dans les fichiers nommés `ServiceConfiguration.*.cscfg`.</span><span class="sxs-lookup"><span data-stu-id="4901a-167">This has the effect of inserting your Application Insights instrumentation keys into the files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="4901a-168">([Exemple de code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span><span class="sxs-lookup"><span data-stu-id="4901a-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="4901a-169">Si vous souhaitez faire varier le niveau des informations de diagnostics envoyées à Application Insights, vous pouvez le faire en [modifiant directement les fichiers `.cscfg`](app-insights-azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="4901a-169">If you want to vary the level of diagnostic information sent to Application Insights, you can do so [by editing the `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="4901a-170"><a name="sdk"></a>Installation du Kit SDK dans chaque projet</span><span class="sxs-lookup"><span data-stu-id="4901a-170"><a name="sdk"></a>Install the SDK in each project</span></span>
<span data-ttu-id="4901a-171">Cette option ajoute la capacité à ajouter une télémétrie métier personnalisée à n’importe quel rôle, pour pouvoir analyser plus en détail l’utilisation et les performances de votre application.</span><span class="sxs-lookup"><span data-stu-id="4901a-171">This option adds the ability to add custom business telemetry to any role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="4901a-172">Dans Visual Studio, configurez le Kit de développement logiciel (SDK) Application Insights pour chaque projet d’application cloud.</span><span class="sxs-lookup"><span data-stu-id="4901a-172">In Visual Studio, configure the Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="4901a-173">**Rôles Web** : cliquez avec le bouton droit sur le projet et sélectionnez **Configurer Application Insights** ou **Ajouter la télémétrie Application Insights**.</span><span class="sxs-lookup"><span data-stu-id="4901a-173">**Web roles**: Right-click the project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="4901a-174">**Rôles de travail** :</span><span class="sxs-lookup"><span data-stu-id="4901a-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="4901a-175">cliquez avec le bouton droit sur le projet et sélectionnez **Gérer les packages NuGet**.</span><span class="sxs-lookup"><span data-stu-id="4901a-175">Right-click the project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="4901a-176">Ajoutez [Application Insights pour les serveurs Windows](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span><span class="sxs-lookup"><span data-stu-id="4901a-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![Recherchez « Application Insights »](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="4901a-178">Configurez le Kit SDK pour envoyer des données à la ressource Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4901a-178">Configure the SDK to send data to the Application Insights resource.</span></span>

    <span data-ttu-id="4901a-179">Dans une fonction de démarrage appropriée, définissez la clé d’instrumentation à partir du paramètre de configuration dans le fichier .cscfg :</span><span class="sxs-lookup"><span data-stu-id="4901a-179">In a suitable startup function, set the instrumentation key from the configuration setting in the .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="4901a-180">Faites cela pour chaque rôle de votre application.</span><span class="sxs-lookup"><span data-stu-id="4901a-180">Do this for each role in your application.</span></span> <span data-ttu-id="4901a-181">Consultez les exemples :</span><span class="sxs-lookup"><span data-stu-id="4901a-181">See the examples:</span></span>
   
   * [<span data-ttu-id="4901a-182">Rôle Web</span><span class="sxs-lookup"><span data-stu-id="4901a-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="4901a-183">Rôle de travail</span><span class="sxs-lookup"><span data-stu-id="4901a-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="4901a-184">Pour les pages Web</span><span class="sxs-lookup"><span data-stu-id="4901a-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="4901a-185">Définissez le fichier ApplicationInsights.config pour que celui-ci soit toujours copié dans le répertoire de sortie.</span><span class="sxs-lookup"><span data-stu-id="4901a-185">Set the ApplicationInsights.config file to be copied always to the output directory.</span></span> 
   
    <span data-ttu-id="4901a-186">(Dans le fichier .config, vous verrez des messages vous demandant de placer la clé d'instrumentation là.</span><span class="sxs-lookup"><span data-stu-id="4901a-186">(In the .config file, you'll see messages asking you to place the instrumentation key there.</span></span> <span data-ttu-id="4901a-187">Toutefois, pour les applications cloud, il est préférable de la définir à partir du fichier .cscfg.</span><span class="sxs-lookup"><span data-stu-id="4901a-187">However, for cloud applications it's better to set it from the .cscfg file.</span></span> <span data-ttu-id="4901a-188">Ceci garantit que le rôle est identifié correctement dans le portail.)</span><span class="sxs-lookup"><span data-stu-id="4901a-188">This ensures that the role is correctly identified in the portal.)</span></span>

#### <a name="run-and-publish-the-app"></a><span data-ttu-id="4901a-189">Exécution et publication de l’application</span><span class="sxs-lookup"><span data-stu-id="4901a-189">Run and publish the app</span></span>
<span data-ttu-id="4901a-190">Exécutez votre application et connectez-vous à Azure.</span><span class="sxs-lookup"><span data-stu-id="4901a-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="4901a-191">Ouvrez les ressources Application Insights que vous avez créées pour voir apparaître les points de données individuels dans [Recherche](app-insights-diagnostic-search.md) et les données agrégées dans [Metrics Explorer](app-insights-metrics-explorer.md).</span><span class="sxs-lookup"><span data-stu-id="4901a-191">Open the Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="4901a-192">Ajoutez des données de télémétrie supplémentaires (voir les sections ci-dessous), puis publiez votre application pour obtenir un retour en direct sur le diagnostic et l’utilisation.</span><span class="sxs-lookup"><span data-stu-id="4901a-192">Add more telemetry - see the sections below - and then publish your app to get live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="4901a-193">Pas de données ?</span><span class="sxs-lookup"><span data-stu-id="4901a-193">No data?</span></span>
* <span data-ttu-id="4901a-194">Ouvrez la vignette [Rechercher][diagnostic] pour afficher les événements individuels.</span><span class="sxs-lookup"><span data-stu-id="4901a-194">Open the [Search][diagnostic] tile, to see individual events.</span></span>
* <span data-ttu-id="4901a-195">Utilisez l'application en ouvrant différentes pages pour générer des données de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="4901a-195">Use the application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="4901a-196">Attendez quelques secondes, puis cliquez sur Actualiser.</span><span class="sxs-lookup"><span data-stu-id="4901a-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="4901a-197">Consultez la rubrique [Résolution des problèmes][qna].</span><span class="sxs-lookup"><span data-stu-id="4901a-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="4901a-198">Affichage des événements Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="4901a-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="4901a-199">Emplacement des informations [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) dans Application Insights :</span><span class="sxs-lookup"><span data-stu-id="4901a-199">Where to find the [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="4901a-200">Les compteurs de performances s’affichent comme mesures personnalisées.</span><span class="sxs-lookup"><span data-stu-id="4901a-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="4901a-201">Les journaux des événements Windows s’affichent comme traces et événements personnalisés.</span><span class="sxs-lookup"><span data-stu-id="4901a-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="4901a-202">Les journaux des applications, les journaux ETW et tous les journaux d’infrastructure des diagnostics s’affichent comme traces.</span><span class="sxs-lookup"><span data-stu-id="4901a-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="4901a-203">Pour visualiser les compteurs de performances et le nombre d’événements, ouvrez [Metrics Explorer](app-insights-metrics-explorer.md) et ajoutez un nouveau graphique :</span><span class="sxs-lookup"><span data-stu-id="4901a-203">To see performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Données de diagnostics Azure](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="4901a-205">Utilisez [Search](app-insights-diagnostic-search.md) ou une [requête Analytics](app-insights-analytics-tour.md) pour effectuer des recherches dans les différents journaux de suivi envoyés par Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="4901a-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) to search across the various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="4901a-206">Par exemple, supposons que vous disposez d’une exception non prise en charge qui a provoqué un incident et le recyclage d’un rôle.</span><span class="sxs-lookup"><span data-stu-id="4901a-206">For example, suppose you have an unhandled exception which caused a Role to crash and recycle.</span></span> <span data-ttu-id="4901a-207">Cette information s’affiche dans le canal Application du Journal des événements Windows.</span><span class="sxs-lookup"><span data-stu-id="4901a-207">That information would show up in the Application channel of Windows Event Log.</span></span> <span data-ttu-id="4901a-208">Vous pouvez utiliser Search pour rechercher l’erreur du Journal des événements Windows et obtenir la trace de pile complète pour l’exception.</span><span class="sxs-lookup"><span data-stu-id="4901a-208">You can use Search to look at the Windows Event Log error and get the full stack trace for the exception.</span></span> <span data-ttu-id="4901a-209">Cela vous aidera à identifier l’origine du problème.</span><span class="sxs-lookup"><span data-stu-id="4901a-209">That will help you find the root cause of the issue.</span></span>

![Recherche de diagnostics Azure](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="4901a-211">Données de télémétrie supplémentaires</span><span class="sxs-lookup"><span data-stu-id="4901a-211">More telemetry</span></span>
<span data-ttu-id="4901a-212">Les sections ci-dessous expliquent comment obtenir des données de télémétrie supplémentaires à partir de différents aspects de votre application.</span><span class="sxs-lookup"><span data-stu-id="4901a-212">The sections below show how to get additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="4901a-213">Suivi des demandes des rôles de travail</span><span class="sxs-lookup"><span data-stu-id="4901a-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="4901a-214">Dans les rôles Web, le module des requêtes collecte automatiquement les données relatives aux requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="4901a-214">In web roles, the requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="4901a-215">Consultez l’ [exemple MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) pour obtenir des exemples vous indiquant comment remplacer le comportement de regroupement par défaut.</span><span class="sxs-lookup"><span data-stu-id="4901a-215">See the [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override the default collection behavior.</span></span> 

<span data-ttu-id="4901a-216">Vous pouvez capturer les performances des appels aux rôles de travail en effectuant le suivi de la même façon que les requêtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="4901a-216">You can capture the performance of calls to worker roles by tracking them in the same way as HTTP requests.</span></span> <span data-ttu-id="4901a-217">Dans Application Insights, le type de demande de télémétrie mesure une unité de travail côté serveur nommée, pouvant être chronométrée et réussir ou échouer indépendamment.</span><span class="sxs-lookup"><span data-stu-id="4901a-217">In Application Insights, the Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="4901a-218">Même si les requêtes HTTP sont automatiquement capturées par le Kit SDK, vous pouvez insérer votre propre code pour effectuer le suivi des requêtes aux rôles de travail.</span><span class="sxs-lookup"><span data-stu-id="4901a-218">While HTTP requests are captured automatically by the SDK, you can insert your own code to track requests to worker roles.</span></span>

<span data-ttu-id="4901a-219">Consultez les deux exemples de rôles de travail instrumentés pour signaler des requêtes : [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) et [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="4901a-219">See the two sample worker roles instrumented to report requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="4901a-220">Exceptions</span><span class="sxs-lookup"><span data-stu-id="4901a-220">Exceptions</span></span>
<span data-ttu-id="4901a-221">Consultez la rubrique [Analyse des exceptions dans Application Insights](app-insights-asp-net-exceptions.md) pour découvrir comment collecter des exceptions non gérées depuis différents types d'applications Web.</span><span class="sxs-lookup"><span data-stu-id="4901a-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="4901a-222">L’exemple du rôle Web dispose de contrôleurs MVC5 et API Web 2.</span><span class="sxs-lookup"><span data-stu-id="4901a-222">The sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="4901a-223">Les exceptions non gérées à partir de deux sont capturées avec les gestionnaires suivants :</span><span class="sxs-lookup"><span data-stu-id="4901a-223">The unhandled exceptions from the two are captured with the following handlers:</span></span>

* <span data-ttu-id="4901a-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) configuré [ici](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) pour les contrôleurs MVC5</span><span class="sxs-lookup"><span data-stu-id="4901a-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="4901a-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) configuré [ici](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) pour les contrôleurs de l’API Web 2</span><span class="sxs-lookup"><span data-stu-id="4901a-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="4901a-226">Pour les rôles de travail, il existe deux façons d’effectuer le suivi des exceptions :</span><span class="sxs-lookup"><span data-stu-id="4901a-226">For worker roles, there are two ways to track exceptions:</span></span>

* <span data-ttu-id="4901a-227">TrackException(ex)</span><span class="sxs-lookup"><span data-stu-id="4901a-227">TrackException(ex)</span></span>
* <span data-ttu-id="4901a-228">Si vous avez ajouté le package NuGet de l’écouteur de suivi Application Insights, vous pouvez utiliser **System.Diagnostics.Trace** pour journaliser les exceptions.</span><span class="sxs-lookup"><span data-stu-id="4901a-228">If you have added the Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** to log exceptions.</span></span> [<span data-ttu-id="4901a-229">Exemple de code.</span><span class="sxs-lookup"><span data-stu-id="4901a-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="4901a-230">Compteurs de performance</span><span class="sxs-lookup"><span data-stu-id="4901a-230">Performance Counters</span></span>
<span data-ttu-id="4901a-231">Les compteurs suivants sont collectés par défaut :</span><span class="sxs-lookup"><span data-stu-id="4901a-231">The following counters are collected by default:</span></span>

    * <span data-ttu-id="4901a-232">\Processus(??APP_WIN32_PROC??)\% Temps processeur</span><span class="sxs-lookup"><span data-stu-id="4901a-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="4901a-233">\Memory\Octets disponibles</span><span class="sxs-lookup"><span data-stu-id="4901a-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="4901a-234">\.Exceptions .NET CLR(??APP_CLR_PROC??)\# Nombre d'exceptions levées/s</span><span class="sxs-lookup"><span data-stu-id="4901a-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="4901a-235">\Processus(??APP_WIN32_PROC??)\Octets privés</span><span class="sxs-lookup"><span data-stu-id="4901a-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="4901a-236">\Processus(??APP_WIN32_PROC??)\Nombre d’octets de données E/S par s</span><span class="sxs-lookup"><span data-stu-id="4901a-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="4901a-237">\Processus(_Total)\% Temps processeur</span><span class="sxs-lookup"><span data-stu-id="4901a-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="4901a-238">Pour les rôles web, ces compteurs sont également collectés :</span><span class="sxs-lookup"><span data-stu-id="4901a-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="4901a-239">\Applications ASP.NET(??APP_W3SVC_PROC??)\Demandes/s</span><span class="sxs-lookup"><span data-stu-id="4901a-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="4901a-240">\Applications ASP.NET (??APP_W3SVC_PROC??)\Durée d’exécution de la demande</span><span class="sxs-lookup"><span data-stu-id="4901a-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="4901a-241">\Applications ASP.NET (??APP_W3SVC_PROC??)\Demandes dans la file d’attente d’application</span><span class="sxs-lookup"><span data-stu-id="4901a-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="4901a-242">Vous pouvez spécifier des compteurs personnalisés ou d’autres compteurs de performances Windows en modifiant ApplicationInsights.config [comme dans cet exemple](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span><span class="sxs-lookup"><span data-stu-id="4901a-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![Compteurs de performances](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="4901a-244">Télémétrie liée aux rôles de travail</span><span class="sxs-lookup"><span data-stu-id="4901a-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="4901a-245">Elle représente une riche expérience de diagnostic, lorsque vous pouvez découvrir ce qui a provoqué l’échec de la demande ou bien une forte latence.</span><span class="sxs-lookup"><span data-stu-id="4901a-245">It is a rich diagnostic experience, when you can see what led to a failed or high latency request.</span></span> <span data-ttu-id="4901a-246">Grâce aux rôles Web, le Kit SDK définit automatiquement la corrélation entre les télémétries connexes.</span><span class="sxs-lookup"><span data-stu-id="4901a-246">With web roles, the SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="4901a-247">Pour les rôles de travail, vous pouvez utiliser un initialiseur de télémétrie personnalisée pour définir un attribut de contexte Operation.Id commun pour toutes les télémétries afin d’y parvenir.</span><span class="sxs-lookup"><span data-stu-id="4901a-247">For worker roles, you can use a custom telemetry initializer to set a common Operation.Id context attribute for all the telemetry to achieve this.</span></span> <span data-ttu-id="4901a-248">Ceci vous permet de découvrir très rapidement si le problème de latence/d'échec était dû à une dépendance ou à votre code !</span><span class="sxs-lookup"><span data-stu-id="4901a-248">This allows you to see whether the latency/failure issue was caused due to a dependency or your code, at a glance!</span></span> 

<span data-ttu-id="4901a-249">Voici comment procéder :</span><span class="sxs-lookup"><span data-stu-id="4901a-249">Here's how:</span></span>

* <span data-ttu-id="4901a-250">Définissez l'ID de corrélation dans un CallContext, comme indiqué [ici](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span><span class="sxs-lookup"><span data-stu-id="4901a-250">Set the correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="4901a-251">Dans ce cas, nous utilisons l'ID de la demande comme id de corrélation</span><span class="sxs-lookup"><span data-stu-id="4901a-251">In this case, we are using the Request ID as the correlation id</span></span>
* <span data-ttu-id="4901a-252">Ajoutez une implémentation personnalisée de TelemetryInitializer, qui définit l’Operation.Id sur le correlationId mentionné ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="4901a-252">Add a custom TelemetryInitializer implementation, to set the Operation.Id to the correlationId set above.</span></span> <span data-ttu-id="4901a-253">Voici un exemple : [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span><span class="sxs-lookup"><span data-stu-id="4901a-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="4901a-254">Ajoutez l'initialiseur de télémétrie personnalisée.</span><span class="sxs-lookup"><span data-stu-id="4901a-254">Add the custom telemetry initializer.</span></span> <span data-ttu-id="4901a-255">Effectuez cette opération dans le fichier ApplicationInsights.config ou dans le code mentionné [ici](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span><span class="sxs-lookup"><span data-stu-id="4901a-255">You could do that in the ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="4901a-256">Et voilà !</span><span class="sxs-lookup"><span data-stu-id="4901a-256">That's it!</span></span> <span data-ttu-id="4901a-257">L’expérience du portail est déjà intégrée pour vous permettre de découvrir très rapidement toutes les télémétries qui lui sont associées :</span><span class="sxs-lookup"><span data-stu-id="4901a-257">The portal experience is already wired up to help you see all associated telemetry at a glance:</span></span>

![Télémétrie corrélée](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="4901a-259">Télémétrie client</span><span class="sxs-lookup"><span data-stu-id="4901a-259">Client telemetry</span></span>
<span data-ttu-id="4901a-260">[Ajoutez le Kit de développement logiciel (SDK) JavaScript à vos pages web][client] pour obtenir des données de télémétrie basées sur votre navigateur, comme le nombre d’affichages de vos pages, les délais de chargement de vos pages, les exceptions de script, mais aussi les données de télémétrie personnalisées que vous pouvez rédiger dans les scripts de vos pages.</span><span class="sxs-lookup"><span data-stu-id="4901a-260">[Add the JavaScript SDK to your web pages][client] to get browser-based telemetry such as page view counts, page load times, script exceptions, and to let you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="4901a-261">Tests de disponibilité</span><span class="sxs-lookup"><span data-stu-id="4901a-261">Availability tests</span></span>
<span data-ttu-id="4901a-262">[Configurez les tests web][availability] pour vous assurer que votre application est bien active.</span><span class="sxs-lookup"><span data-stu-id="4901a-262">[Set up web tests][availability] to make sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="4901a-263">Afficher tous les éléments ensemble</span><span class="sxs-lookup"><span data-stu-id="4901a-263">Display everything together</span></span>
<span data-ttu-id="4901a-264">Pour obtenir une vue d’ensemble de votre système, vous pouvez rassembler les principaux graphiques de surveillance sur un même [tableau de bord](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="4901a-264">To get an overall picture of your system, you can bring the key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="4901a-265">Vous pouvez par exemple épingler le décompte des demandes et des échecs de chaque rôle.</span><span class="sxs-lookup"><span data-stu-id="4901a-265">For example, you could pin the request and failure counts of each role.</span></span> 

<span data-ttu-id="4901a-266">Si votre système utilise d’autres services Azure tels que Stream Analytics, incluez également leurs graphiques de surveillance.</span><span class="sxs-lookup"><span data-stu-id="4901a-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="4901a-267">Si vous avez une application mobile cliente, insérez du code pour envoyer des événements personnalisés quand des opérations utilisateur clés se produisent, et créez un [pont HockeyApp](app-insights-hockeyapp-bridge-app.md).</span><span class="sxs-lookup"><span data-stu-id="4901a-267">If you have a client mobile app, insert some code to send custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="4901a-268">Créez des requêtes dans [Analytics](app-insights-analytics.md) pour afficher le nombre d’événements, et épinglez-les au tableau de bord.</span><span class="sxs-lookup"><span data-stu-id="4901a-268">Create queries in [Analytics](app-insights-analytics.md) to display the event counts, and pin them to the dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="4901a-269">Exemple</span><span class="sxs-lookup"><span data-stu-id="4901a-269">Example</span></span>
<span data-ttu-id="4901a-270">[L'exemple](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) analyse un service qui dispose d’un rôle Web et de deux rôles de travail.</span><span class="sxs-lookup"><span data-stu-id="4901a-270">[The example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="4901a-271">Exception « méthode introuvable » lors de l’exécution dans Services cloud Azure</span><span class="sxs-lookup"><span data-stu-id="4901a-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="4901a-272">Avez-vous effectué une génération pour .NET 4.6 ?</span><span class="sxs-lookup"><span data-stu-id="4901a-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="4901a-273">4.6 n’est pas automatiquement pris en charge dans les rôles Azure Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="4901a-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="4901a-274">[Installez la version 4.6 sur chaque rôle](../cloud-services/cloud-services-dotnet-install-dotnet.md) avant d’exécuter votre application.</span><span class="sxs-lookup"><span data-stu-id="4901a-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="4901a-275">Vidéo</span><span class="sxs-lookup"><span data-stu-id="4901a-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="4901a-276">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="4901a-276">Next steps</span></span>
* [<span data-ttu-id="4901a-277">Configuration de l’envoi de diagnostics Azure à Application Insights</span><span class="sxs-lookup"><span data-stu-id="4901a-277">Configure sending Azure Diagnostics to Application Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="4901a-278">Automatiser la création des ressources Application Insights</span><span class="sxs-lookup"><span data-stu-id="4901a-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="4901a-279">Automatiser les diagnostics Azure</span><span class="sxs-lookup"><span data-stu-id="4901a-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="4901a-280">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="4901a-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 
