---
title: "aaaAzure de corrélation de télémétrie Application Insights | Documents Microsoft"
description: "Corrélation de télémétrie dans Application Insights"
services: application-insights
documentationcenter: .net
author: SergeyKanzhelev
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 04/25/2017
ms.author: bwren
ms.openlocfilehash: 3ed8c589d237cac5daceac939ca893b7d81a2967
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="telemetry-correlation-in-application-insights"></a><span data-ttu-id="3e43b-103">Corrélation de télémétrie dans Application Insights</span><span class="sxs-lookup"><span data-stu-id="3e43b-103">Telemetry correlation in Application Insights</span></span>

<span data-ttu-id="3e43b-104">Dans hello world services micro, chaque opération logique nécessite le travail effectué dans les différents composants du service de hello.</span><span class="sxs-lookup"><span data-stu-id="3e43b-104">In hello world of micro services, every logical operation requires work done in various components of hello service.</span></span> <span data-ttu-id="3e43b-105">Chacun de ces composants peut être surveillé séparément par [Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-105">Each of these components can be separately monitored by [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="3e43b-106">composant d’application Hello web communique avec les informations d’identification de l’authentification fournisseur composant toovalidate utilisateur et avec les données de tooget hello API composant de visualisation.</span><span class="sxs-lookup"><span data-stu-id="3e43b-106">hello web app component communicates with authentication provider component toovalidate user credentials, and with hello API component tooget data for visualization.</span></span> <span data-ttu-id="3e43b-107">composant d’API Hello à son tour peut interroger les données à partir d’autres services et utiliser les composants du fournisseur de cache et notifier le composant de facturation hello sur cet appel.</span><span class="sxs-lookup"><span data-stu-id="3e43b-107">hello API component in its turn can query data from other services and use cache-provider components and notify hello billing component about this call.</span></span> <span data-ttu-id="3e43b-108">Application Insights prend en charge la corrélation de télémétrie distribuée.</span><span class="sxs-lookup"><span data-stu-id="3e43b-108">Application Insights supports distributed telemetry correlation.</span></span> <span data-ttu-id="3e43b-109">Il vous permet de toodetect composant qui est chargé de défaillances ou une dégradation des performances.</span><span class="sxs-lookup"><span data-stu-id="3e43b-109">It allows you toodetect which component is responsible for failures or performance degradation.</span></span>

<span data-ttu-id="3e43b-110">Cet article explique le modèle de données hello utilisé par les données de télémétrie Application Insights toocorrelate envoyées par plusieurs composants.</span><span class="sxs-lookup"><span data-stu-id="3e43b-110">This article explains hello data model used by Application Insights toocorrelate telemetry sent by multiple components.</span></span> <span data-ttu-id="3e43b-111">Elle couvre les protocoles et les techniques de propagation de contexte hello.</span><span class="sxs-lookup"><span data-stu-id="3e43b-111">It covers hello context propagation techniques and protocols.</span></span> <span data-ttu-id="3e43b-112">Elle traite également implémentation hello des concepts de corrélation hello sur les plateformes et des langues différentes.</span><span class="sxs-lookup"><span data-stu-id="3e43b-112">It also covers hello implementation of hello correlation concepts on different languages and platforms.</span></span>

## <a name="telemetry-correlation-data-model"></a><span data-ttu-id="3e43b-113">Modèle de données de corrélation de télémétrie</span><span class="sxs-lookup"><span data-stu-id="3e43b-113">Telemetry correlation data model</span></span>

<span data-ttu-id="3e43b-114">Application Insights définit le [modèle de données](application-insights-data-model.md) pour la corrélation de télémétrie distribuée.</span><span class="sxs-lookup"><span data-stu-id="3e43b-114">Application Insights defines a [data model](application-insights-data-model.md) for distributed telemetry correlation.</span></span> <span data-ttu-id="3e43b-115">télémétrie tooassociate avec opération logique de hello, chaque élément de données de télémétrie a un champ de contexte appelé `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-115">tooassociate telemetry with hello logical operation, every telemetry item has a context field called `operation_Id`.</span></span> <span data-ttu-id="3e43b-116">Cet identificateur est partagé par chaque élément de données de télémétrie dans la trace de hello distribué.</span><span class="sxs-lookup"><span data-stu-id="3e43b-116">This identifier is shared by every telemetry item in hello distributed trace.</span></span> <span data-ttu-id="3e43b-117">Par conséquent, même en perdant la télémétrie d’une seule couche, vous pouvez toujours associer la télémétrie communiquée par d’autres composants.</span><span class="sxs-lookup"><span data-stu-id="3e43b-117">So even with loss of telemetry from a single layer you still can associate telemetry reported by other components.</span></span>

<span data-ttu-id="3e43b-118">Opération logique distribuée se compose généralement d’un ensemble d’opérations plus petits - demandes traitées par un des composants de hello.</span><span class="sxs-lookup"><span data-stu-id="3e43b-118">Distributed logical operation typically consists of a set of smaller operations - requests processed by one of hello components.</span></span> <span data-ttu-id="3e43b-119">Ces opérations sont définies par la [télémétrie des requêtes](application-insights-data-model-request-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-119">Those operations are defined by [request telemetry](application-insights-data-model-request-telemetry.md).</span></span> <span data-ttu-id="3e43b-120">Chaque télémétrie de requête possède son propre `id` qui l’identifie globalement de façon unique.</span><span class="sxs-lookup"><span data-stu-id="3e43b-120">Every request telemetry has its own `id` that uniquely globally identifies it.</span></span> <span data-ttu-id="3e43b-121">Et toutes les données de télémétrie - traces, les exceptions, etc. associé à cette requête doivent définir hello `operation_parentId` valeur toohello de demande de hello `id`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-121">And all telemetry - traces, exceptions, etc. associated with this request should set hello `operation_parentId` toohello value of hello request `id`.</span></span>

<span data-ttu-id="3e43b-122">Chaque opération sortante comme composant de tooanother appel http représenté par [télémétrie des dépendances](application-insights-data-model-dependency-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-122">Every outgoing operation like http call tooanother component represented by [dependency telemetry](application-insights-data-model-dependency-telemetry.md).</span></span> <span data-ttu-id="3e43b-123">La télémétrie des dépendances définit également son propre `id` globalement unique.</span><span class="sxs-lookup"><span data-stu-id="3e43b-123">Dependency telemetry also defines its own `id` that is globally unique.</span></span> <span data-ttu-id="3e43b-124">La télémétrie des requêtes, initiée par cet appel de dépendances, l’utilise en tant que `operation_parentId`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-124">Request telemetry, initiated by this dependency call, uses it as `operation_parentId`.</span></span>

<span data-ttu-id="3e43b-125">Vous pouvez générer vue hello d’à l’aide de l’opération logique distribuée `operation_Id`, `operation_parentId`, et `request.id` avec `dependency.id`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-125">You can build hello view of distributed logical operation using `operation_Id`, `operation_parentId`, and `request.id` with `dependency.id`.</span></span> <span data-ttu-id="3e43b-126">Ces champs également définissent des commandes de causalité hello d’appels de télémétrie.</span><span class="sxs-lookup"><span data-stu-id="3e43b-126">Those fields also define hello causality order of telemetry calls.</span></span>

<span data-ttu-id="3e43b-127">Dans l’environnement de services micro, des traces à partir des composants peuvent passer toohello les stockages différents.</span><span class="sxs-lookup"><span data-stu-id="3e43b-127">In micro services environment, traces from components may go toohello different storages.</span></span> <span data-ttu-id="3e43b-128">Chaque composant peut avoir sa propre clé d’instrumentation dans Application Insights.</span><span class="sxs-lookup"><span data-stu-id="3e43b-128">Every component may have its own instrumentation key in Application Insights.</span></span> <span data-ttu-id="3e43b-129">télémétrie tooget pour l’opération logique de hello, vous devez tooquery des données à partir de chaque stockage.</span><span class="sxs-lookup"><span data-stu-id="3e43b-129">tooget telemetry for hello logical operation, you need tooquery data from every storage.</span></span> <span data-ttu-id="3e43b-130">Lorsque le nombre de stockages est volumineux, vous devez toohave une indication sur l’emplacement toolook suivant.</span><span class="sxs-lookup"><span data-stu-id="3e43b-130">When number of storages is huge, you need toohave a hint on where toolook next.</span></span>

<span data-ttu-id="3e43b-131">Application Insights, modèle de données définit deux champs toosolve ce problème : `request.source` et `dependency.target`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-131">Application Insights data model defines two fields toosolve this problem: `request.source` and `dependency.target`.</span></span> <span data-ttu-id="3e43b-132">premier champ de Hello identifie le composant hello qui a initié la demande de dépendance hello et hello identifie ensuite le composant a retourné une réponse hello d’appel de dépendance hello.</span><span class="sxs-lookup"><span data-stu-id="3e43b-132">hello first field identifies hello component that initiated hello dependency request, and hello second identifies which component returned hello response of hello dependency call.</span></span>


## <a name="example"></a><span data-ttu-id="3e43b-133">Exemple</span><span class="sxs-lookup"><span data-stu-id="3e43b-133">Example</span></span>

<span data-ttu-id="3e43b-134">Prenons un exemple d’un prix de STOCK application affichant hello cours d’une action à l’aide des API externe de hello appelé API des STOCKS.</span><span class="sxs-lookup"><span data-stu-id="3e43b-134">Let's take an example of an application STOCK PRICES showing hello current market price of a stock using hello external API called STOCKS API.</span></span> <span data-ttu-id="3e43b-135">Hello application du cours de l’action a une page `Stock page` ouvert en utilisant du navigateur web hello client `GET /Home/Stock`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-135">hello STOCK PRICES application has a page `Stock page` opened by hello client web browser using `GET /Home/Stock`.</span></span> <span data-ttu-id="3e43b-136">requêtes de l’application Hello hello API de STOCK à l’aide d’un appel HTTP `GET /api/stock/value`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-136">hello application queries hello STOCK API by using an HTTP call `GET /api/stock/value`.</span></span>

<span data-ttu-id="3e43b-137">Vous pouvez analyser la télémétrie obtenue en exécutant une requête :</span><span class="sxs-lookup"><span data-stu-id="3e43b-137">You can analyze resulting telemetry running a query:</span></span>

```
(requests | union dependencies | union pageViews) 
| where operation_Id == "STYz"
| project timestamp, itemType, name, id, operation_ParentId, operation_Id
```

<span data-ttu-id="3e43b-138">Dans la note de vue hello résultat que tous les éléments de télémétrie partagent la racine de hello `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-138">In hello result view note that all telemetry items share hello root `operation_Id`.</span></span> <span data-ttu-id="3e43b-139">Lorsque ajax appelez effectuées à partir de la page hello - nouvel id unique `qJSXU` est attribué toohello télémétrie des dépendances et les id de page de d’affichage est utilisé en tant que `operation_ParentId`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-139">When ajax call made from hello page - new unique id `qJSXU` is assigned toohello dependency telemetry and pageView's id is used as `operation_ParentId`.</span></span> <span data-ttu-id="3e43b-140">À son tour, la requête du serveur utilise l’ID d’ajax en tant que `operation_ParentId`, etc.</span><span class="sxs-lookup"><span data-stu-id="3e43b-140">In turn server request uses ajax's id as `operation_ParentId`, etc.</span></span>

| <span data-ttu-id="3e43b-141">itemType</span><span class="sxs-lookup"><span data-stu-id="3e43b-141">itemType</span></span>   | <span data-ttu-id="3e43b-142">name</span><span class="sxs-lookup"><span data-stu-id="3e43b-142">name</span></span>                      | <span data-ttu-id="3e43b-143">id</span><span class="sxs-lookup"><span data-stu-id="3e43b-143">id</span></span>           | <span data-ttu-id="3e43b-144">operation_ParentId</span><span class="sxs-lookup"><span data-stu-id="3e43b-144">operation_ParentId</span></span> | <span data-ttu-id="3e43b-145">operation_Id</span><span class="sxs-lookup"><span data-stu-id="3e43b-145">operation_Id</span></span> |
|------------|---------------------------|--------------|--------------------|--------------|
| <span data-ttu-id="3e43b-146">pageView</span><span class="sxs-lookup"><span data-stu-id="3e43b-146">pageView</span></span>   | <span data-ttu-id="3e43b-147">Stock page</span><span class="sxs-lookup"><span data-stu-id="3e43b-147">Stock page</span></span>                |              | <span data-ttu-id="3e43b-148">STYz</span><span class="sxs-lookup"><span data-stu-id="3e43b-148">STYz</span></span>               | <span data-ttu-id="3e43b-149">STYz</span><span class="sxs-lookup"><span data-stu-id="3e43b-149">STYz</span></span>         |
| <span data-ttu-id="3e43b-150">dependency</span><span class="sxs-lookup"><span data-stu-id="3e43b-150">dependency</span></span> | <span data-ttu-id="3e43b-151">GET /Home/Stock</span><span class="sxs-lookup"><span data-stu-id="3e43b-151">GET /Home/Stock</span></span>           | <span data-ttu-id="3e43b-152">qJSXU</span><span class="sxs-lookup"><span data-stu-id="3e43b-152">qJSXU</span></span>        | <span data-ttu-id="3e43b-153">STYz</span><span class="sxs-lookup"><span data-stu-id="3e43b-153">STYz</span></span>               | <span data-ttu-id="3e43b-154">STYz</span><span class="sxs-lookup"><span data-stu-id="3e43b-154">STYz</span></span>         |
| <span data-ttu-id="3e43b-155">request</span><span class="sxs-lookup"><span data-stu-id="3e43b-155">request</span></span>    | <span data-ttu-id="3e43b-156">GET Home/Stock</span><span class="sxs-lookup"><span data-stu-id="3e43b-156">GET Home/Stock</span></span>            | <span data-ttu-id="3e43b-157">KqKwlrSt9PA=</span><span class="sxs-lookup"><span data-stu-id="3e43b-157">KqKwlrSt9PA=</span></span> | <span data-ttu-id="3e43b-158">qJSXU</span><span class="sxs-lookup"><span data-stu-id="3e43b-158">qJSXU</span></span>              | <span data-ttu-id="3e43b-159">STYz</span><span class="sxs-lookup"><span data-stu-id="3e43b-159">STYz</span></span>         |
| <span data-ttu-id="3e43b-160">dependency</span><span class="sxs-lookup"><span data-stu-id="3e43b-160">dependency</span></span> | <span data-ttu-id="3e43b-161">GET /api/stock/value</span><span class="sxs-lookup"><span data-stu-id="3e43b-161">GET /api/stock/value</span></span>      | <span data-ttu-id="3e43b-162">bBrf2L7mm2g=</span><span class="sxs-lookup"><span data-stu-id="3e43b-162">bBrf2L7mm2g=</span></span> | <span data-ttu-id="3e43b-163">KqKwlrSt9PA=</span><span class="sxs-lookup"><span data-stu-id="3e43b-163">KqKwlrSt9PA=</span></span>       | <span data-ttu-id="3e43b-164">STYz</span><span class="sxs-lookup"><span data-stu-id="3e43b-164">STYz</span></span>         |

<span data-ttu-id="3e43b-165">Désormais, lorsque hello appel `GET /api/stock/value` apportées service externe de tooan vous souhaitez identité de hello tooknow de ce serveur.</span><span class="sxs-lookup"><span data-stu-id="3e43b-165">Now when hello call `GET /api/stock/value` made tooan external service you want tooknow hello identity of that server.</span></span> <span data-ttu-id="3e43b-166">Vous pouvez définir le champ `dependency.target` de manière appropriée.</span><span class="sxs-lookup"><span data-stu-id="3e43b-166">So you can set `dependency.target` field appropriately.</span></span> <span data-ttu-id="3e43b-167">Lorsque le service externe de hello ne prend pas en charge l’analyse - `target` a la valeur toohello nom d’hôte de service hello comme `stock-prices-api.com`.</span><span class="sxs-lookup"><span data-stu-id="3e43b-167">When hello external service does not support monitoring - `target` is set toohello host name of hello service like `stock-prices-api.com`.</span></span> <span data-ttu-id="3e43b-168">Toutefois si ce service s’identifie en retournant prédéfini en-tête HTTP - `target` contient l’identité du service hello qui permet de trace de toobuild distribué Application Insights en interrogeant les données de télémétrie à partir de ce service.</span><span class="sxs-lookup"><span data-stu-id="3e43b-168">However if that service identifies itself by returning a predefined HTTP header - `target` contains hello service identity that allows Application Insights toobuild distributed trace by querying telemetry from that service.</span></span> 

## <a name="correlation-headers"></a><span data-ttu-id="3e43b-169">En-têtes de corrélation</span><span class="sxs-lookup"><span data-stu-id="3e43b-169">Correlation headers</span></span>

<span data-ttu-id="3e43b-170">Nous travaillons sur la proposition RFC pour hello [corrélation de protocole HTTP](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-170">We are working on RFC proposal for hello [correlation HTTP protocol](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span></span> <span data-ttu-id="3e43b-171">Cette proposition définit deux en-têtes :</span><span class="sxs-lookup"><span data-stu-id="3e43b-171">This proposal defines two headers:</span></span>

- <span data-ttu-id="3e43b-172">`Request-Id`exécuter l’identificateur global unique de hello d’appel de hello</span><span class="sxs-lookup"><span data-stu-id="3e43b-172">`Request-Id` carry hello globally unique id of hello call</span></span>
- <span data-ttu-id="3e43b-173">`Correlation-Context`-exécuter hello collection nom/valeur paires de propriétés de la trace hello distribué</span><span class="sxs-lookup"><span data-stu-id="3e43b-173">`Correlation-Context` - carry hello name value pairs collection of hello distributed trace properties</span></span>

<span data-ttu-id="3e43b-174">Hello standard définit également les deux schémas de `Request-Id` génération - plate et hiérarchique.</span><span class="sxs-lookup"><span data-stu-id="3e43b-174">hello standard also defines two schemas of `Request-Id` generation - flat and hierarchical.</span></span> <span data-ttu-id="3e43b-175">Un schéma plat hello, il est bien connu `Id` clé définie pour hello `Correlation-Context` collection.</span><span class="sxs-lookup"><span data-stu-id="3e43b-175">With hello flat schema, there is a well-known `Id` key defined for hello `Correlation-Context` collection.</span></span>

<span data-ttu-id="3e43b-176">Application Insights définit hello [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) pour la corrélation de hello le protocole HTTP.</span><span class="sxs-lookup"><span data-stu-id="3e43b-176">Application Insights defines hello [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) for hello correlation HTTP protocol.</span></span> <span data-ttu-id="3e43b-177">Il utilise `Request-Context` nom paires valeur collection de hello toopropagate des propriétés utilisées par l’appelant immédiat de hello ou de l’appelé.</span><span class="sxs-lookup"><span data-stu-id="3e43b-177">It uses `Request-Context` name value pairs toopropagate hello collection of properties used by hello immediate caller or callee.</span></span> <span data-ttu-id="3e43b-178">Application Insights SDK utilise ce tooset en-tête `dependency.target` et `request.source` champs.</span><span class="sxs-lookup"><span data-stu-id="3e43b-178">Application Insights SDK uses this header tooset `dependency.target` and `request.source` fields.</span></span>

## <a name="open-tracing-and-application-insights"></a><span data-ttu-id="3e43b-179">Open Tracing et Application Insights</span><span class="sxs-lookup"><span data-stu-id="3e43b-179">Open tracing and Application Insights</span></span>

<span data-ttu-id="3e43b-180">Les modèles de données Application Insights et [Open Tracing](http://opentracing.io/) regardent si</span><span class="sxs-lookup"><span data-stu-id="3e43b-180">[Open Tracing](http://opentracing.io/) and Application Insights data models looks</span></span> 

- <span data-ttu-id="3e43b-181">`request`, `pageView` mappe trop**étendue** avec`span.kind = server`</span><span class="sxs-lookup"><span data-stu-id="3e43b-181">`request`, `pageView` maps too**Span** with `span.kind = server`</span></span>
- <span data-ttu-id="3e43b-182">`dependency`mappe trop**étendue** avec`span.kind = client`</span><span class="sxs-lookup"><span data-stu-id="3e43b-182">`dependency` maps too**Span** with `span.kind = client`</span></span>
- <span data-ttu-id="3e43b-183">`id`d’un `request` et `dependency` mappe trop**Span.Id**</span><span class="sxs-lookup"><span data-stu-id="3e43b-183">`id` of a `request` and `dependency` maps too**Span.Id**</span></span>
- <span data-ttu-id="3e43b-184">`operation_Id`mappe trop**TraceId**</span><span class="sxs-lookup"><span data-stu-id="3e43b-184">`operation_Id` maps too**TraceId**</span></span>
- <span data-ttu-id="3e43b-185">`operation_ParentId`mappe trop**référence** de type`ChileOf`</span><span class="sxs-lookup"><span data-stu-id="3e43b-185">`operation_ParentId` maps too**Reference** of type `ChileOf`</span></span>

<span data-ttu-id="3e43b-186">Pour connaître les types et les modèles de données Application Insights, consultez [Modèle de données](application-insights-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-186">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>

<span data-ttu-id="3e43b-187">Pour des définitions des concepts Open Tracing, consultez les pages [specification](https://github.com/opentracing/specification/blob/master/specification.md) et [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-187">See [specification](https://github.com/opentracing/specification/blob/master/specification.md) and [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) for definitions of Open Tracing concepts.</span></span>


## <a name="telemetry-correlation-in-net"></a><span data-ttu-id="3e43b-188">Corrélation de télémétrie dans .NET</span><span class="sxs-lookup"><span data-stu-id="3e43b-188">Telemetry correlation in .NET</span></span>

<span data-ttu-id="3e43b-189">Au fil du temps .NET défini le nombre de façons toocorrelate télémesure et diagnostics des journaux.</span><span class="sxs-lookup"><span data-stu-id="3e43b-189">Over time .NET defined number of ways toocorrelate telemetry and diagnostics logs.</span></span> <span data-ttu-id="3e43b-190">Il est `System.Diagnostics.CorrelationManager` autorisant tootrack [LogicalOperationStack et ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span><span class="sxs-lookup"><span data-stu-id="3e43b-190">There is `System.Diagnostics.CorrelationManager` allowing tootrack [LogicalOperationStack and ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span></span> <span data-ttu-id="3e43b-191">`System.Diagnostics.Tracing.EventSource`et Windows ETW définissent la méthode hello [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span><span class="sxs-lookup"><span data-stu-id="3e43b-191">`System.Diagnostics.Tracing.EventSource` and Windows ETW define hello method [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span></span> <span data-ttu-id="3e43b-192">`ILogger` utilise les [étendues de journaux](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span><span class="sxs-lookup"><span data-stu-id="3e43b-192">`ILogger` uses [Log Scopes](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span></span> <span data-ttu-id="3e43b-193">WCF et Http lient la propagation de contexte « en cours ».</span><span class="sxs-lookup"><span data-stu-id="3e43b-193">WCF and Http wire up "current" context propagation.</span></span>

<span data-ttu-id="3e43b-194">Toutefois, ces méthodes n’ont pas activé le traçage distribué automatique.</span><span class="sxs-lookup"><span data-stu-id="3e43b-194">However those methods didn't enable automatic distributed tracing support.</span></span> <span data-ttu-id="3e43b-195">`DiagnosticsSource`est un toosupport de manière automatique entre la corrélation de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="3e43b-195">`DiagnosticsSource` is a way toosupport automatic cross machine correlation.</span></span> <span data-ttu-id="3e43b-196">Bibliothèques .NET prend en charge de la Source de Diagnostics et permettent la propagation automatique entre les ordinateurs du contexte de corrélation hello via le transport http, par exemple hello.</span><span class="sxs-lookup"><span data-stu-id="3e43b-196">.NET libraries support Diagnostics Source and allow automatic cross machine propagation of hello correlation context via hello transport like http.</span></span>

<span data-ttu-id="3e43b-197">Hello [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) dans la Source de Diagnostics présente les notions de base de hello de suivi des activités.</span><span class="sxs-lookup"><span data-stu-id="3e43b-197">hello [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) in Diagnostics Source explains hello basics of tracking Activities.</span></span> 

<span data-ttu-id="3e43b-198">ASP.NET Core 2.0 prend en charge l’extraction des en-têtes Http et démarrage hello nouvelle activité.</span><span class="sxs-lookup"><span data-stu-id="3e43b-198">ASP.NET Core 2.0 supports extraction of Http Headers and starting hello new Activity.</span></span> 

<span data-ttu-id="3e43b-199">`System.Net.HttpClient`version de départ `<fill in>` prend en charge automatique d’injection de corrélation de hello en-têtes Http et le suivi des appels http de hello en tant qu’activité.</span><span class="sxs-lookup"><span data-stu-id="3e43b-199">`System.Net.HttpClient` starting version `<fill in>` supports automatic injection of hello correlation Http Headers and tracking hello http call as an Activity.</span></span>

<span data-ttu-id="3e43b-200">Il existe un nouveau Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) pour hello ASP.NET classique.</span><span class="sxs-lookup"><span data-stu-id="3e43b-200">There is a new Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) for hello ASP.NET Classic.</span></span> <span data-ttu-id="3e43b-201">Ce module implémente la corrélation de télémétrie à l’aide de DiagnosticsSource.</span><span class="sxs-lookup"><span data-stu-id="3e43b-201">This module implements telemetry correlation using DiagnosticsSource.</span></span> <span data-ttu-id="3e43b-202">Il démarre l’activité en fonction des en-têtes de requête entrante.</span><span class="sxs-lookup"><span data-stu-id="3e43b-202">It starts activity based on incoming request headers.</span></span> <span data-ttu-id="3e43b-203">Il met également en corrélation télémétrie hello différentes étapes de traitement de la requête.</span><span class="sxs-lookup"><span data-stu-id="3e43b-203">It also correlates telemetry from hello different stages of request processing.</span></span> <span data-ttu-id="3e43b-204">Même pour les cas de hello lors de chaque étape de traitement IIS s’exécute sur un autre gérer des threads.</span><span class="sxs-lookup"><span data-stu-id="3e43b-204">Even for hello cases when every stage of IIS processing runs on a different manage threads.</span></span>

<span data-ttu-id="3e43b-205">Version de départ application Insights SDK `2.4.0-beta1` utilise les données de télémétrie toocollect DiagnosticsSource et l’activité et l’associer à l’activité en cours hello.</span><span class="sxs-lookup"><span data-stu-id="3e43b-205">Application Insights SDK starting version `2.4.0-beta1` uses DiagnosticsSource and Activity toocollect telemetry and associate it with hello current activity.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="3e43b-206">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3e43b-206">Next steps</span></span>

- [<span data-ttu-id="3e43b-207">Écrire des données de télémétrie personnalisées</span><span class="sxs-lookup"><span data-stu-id="3e43b-207">Write custom telemetry</span></span>](app-insights-api-custom-events-metrics.md)
- <span data-ttu-id="3e43b-208">Intégrez tous les composants de votre microservice sur Application Insights.</span><span class="sxs-lookup"><span data-stu-id="3e43b-208">Onboard all components of your micro service on Application Insights.</span></span> <span data-ttu-id="3e43b-209">Consultez les [plateformes prises en charge](app-insights-platforms.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-209">Check out [supported platforms](app-insights-platforms.md).</span></span>
- <span data-ttu-id="3e43b-210">Pour connaître les types et les modèles de données Application Insights, consultez [Modèle de données](application-insights-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-210">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>
- <span data-ttu-id="3e43b-211">Découvrez comment trop[étendre et de filtrer les données de télémétrie](app-insights-api-filtering-sampling.md).</span><span class="sxs-lookup"><span data-stu-id="3e43b-211">Learn how too[extend and filter telemetry](app-insights-api-filtering-sampling.md).</span></span>
