---
title: "aaaUse tooaccess d’authentification Azure AD API Azure Media Services avec REST | Documents Microsoft"
description: "Découvrez comment tooaccess API Azure Media Services avec l’authentification Azure Active Directory à l’aide de REST."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="6b014-103">Utilisez Azure AD authentication tooaccess hello API Azure Media Services avec REST</span><span class="sxs-lookup"><span data-stu-id="6b014-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="6b014-104">équipe de Azure Media Services Hello a publié la prise en charge de l’authentification Azure Active Directory (Azure AD) pour accéder à Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="6b014-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="6b014-105">Il a également annoncé plans toodeprecate Azure Access Control service l’authentification pour l’accès aux Services de support.</span><span class="sxs-lookup"><span data-stu-id="6b014-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="6b014-106">Étant donné que chaque abonnement Azure et chaque compte Media Services, sont jointe tooan Azure AD client, prise en charge de l’authentification Azure AD apporte de nombreux avantages de sécurité.</span><span class="sxs-lookup"><span data-stu-id="6b014-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="6b014-107">Pour plus d’informations sur cette modification et de la migration (si vous utilisez hello Media Services .NET SDK pour votre application), voir hello billets de blog et les articles :</span><span class="sxs-lookup"><span data-stu-id="6b014-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- <span data-ttu-id="6b014-108">[Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation) (Azure Media Services annonce la prise en charge d’Azure AD et déconseille l’authentification Access Control)</span><span class="sxs-lookup"><span data-stu-id="6b014-108">[Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)</span></span>
- [<span data-ttu-id="6b014-109">Accéder à l’API Azure Media Services avec l’authentification Azure AD</span><span class="sxs-lookup"><span data-stu-id="6b014-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="6b014-110">Utiliser Azure AD authentication tooaccess API Azure Media Services à l’aide de Microsoft .NET</span><span class="sxs-lookup"><span data-stu-id="6b014-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="6b014-111">Mise en route avec l’authentification Azure AD à l’aide de hello portail Azure</span><span class="sxs-lookup"><span data-stu-id="6b014-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="6b014-112">Certains clients doivent toodevelop leurs solutions de Media Services sous hello suivant contraintes :</span><span class="sxs-lookup"><span data-stu-id="6b014-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="6b014-113">Ils utilisent un langage de programmation qui n’est pas Microsoft .NET ou c#, ou l’environnement d’exécution hello n’est pas Windows.</span><span class="sxs-lookup"><span data-stu-id="6b014-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="6b014-114">Les bibliothèques Azure AD telles que des bibliothèques d’authentification Active Directory ne sont pas disponibles pour le langage de programmation de hello ou ne peut pas être utilisés pour leur environnement d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6b014-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="6b014-115">Certains clients ont développé des applications à l’aide de l’API REST pour l’authentification Access Control et l’accès à Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="6b014-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="6b014-116">Pour ces clients, vous devez un hello uniquement de façon toouse API REST pour l’authentification Azure AD et accéder à Azure Media Services suivantes.</span><span class="sxs-lookup"><span data-stu-id="6b014-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="6b014-117">Vous devez toonot s’appuient sur une des bibliothèques de hello Azure AD ou sur hello Media Services .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="6b014-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="6b014-118">Dans cet article, nous décrivons une solution et fournissons des exemples de code pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="6b014-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="6b014-119">Code de hello étant tous les appels d’API REST, sans dépendance sur n’importe quel Azure AD ou de la bibliothèque Azure Media Services, hello code peut facilement être traduite tooany autre langage de programmation.</span><span class="sxs-lookup"><span data-stu-id="6b014-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6b014-120">Actuellement, Media Services prend en charge le modèle d’authentification hello Azure Access Control services.</span><span class="sxs-lookup"><span data-stu-id="6b014-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="6b014-121">Toutefois, l’authentification Access Control sera déconseillée à compter du 1er juin 2018.</span><span class="sxs-lookup"><span data-stu-id="6b014-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="6b014-122">Nous vous recommandons de migrer modèle d’authentification Azure AD de toohello dès que possible.</span><span class="sxs-lookup"><span data-stu-id="6b014-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="6b014-123">Conception</span><span class="sxs-lookup"><span data-stu-id="6b014-123">Design</span></span>

<span data-ttu-id="6b014-124">Dans cet article, nous utilisons hello après l’authentification et d’autorisation :</span><span class="sxs-lookup"><span data-stu-id="6b014-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="6b014-125">Protocole d’autorisation : OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="6b014-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="6b014-126">OAuth 2.0 est une norme de sécurité web qui couvre l’authentification et l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="6b014-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="6b014-127">Elle est prise en charge par Google, Microsoft, Facebook et PayPal.</span><span class="sxs-lookup"><span data-stu-id="6b014-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="6b014-128">Elle a été ratifiée en octobre 2012.</span><span class="sxs-lookup"><span data-stu-id="6b014-128">It was ratified October 2012.</span></span> <span data-ttu-id="6b014-129">Microsoft prend bien en charge OAuth 2.0 et OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="6b014-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="6b014-130">Ces deux normes sont prises en charge dans plusieurs services et bibliothèques clientes, notamment Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, et les bibliothèques Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b014-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="6b014-131">Type d’octroi : type d’octroi des informations d’identification du client.</span><span class="sxs-lookup"><span data-stu-id="6b014-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="6b014-132">Informations d’identification du client est un des types d’allocation quatre hello dans OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="6b014-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="6b014-133">Ce type d’octroi est souvent utilisé pour l’accès à l’API Azure AD Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="6b014-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="6b014-134">Mode d’authentification : principal de service.</span><span class="sxs-lookup"><span data-stu-id="6b014-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="6b014-135">Hello autre mode d’authentification est utilisateur ou l’authentification interactive.</span><span class="sxs-lookup"><span data-stu-id="6b014-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="6b014-136">Un total de quatre applications ou services sont impliqués dans le flux de l’authentification et l’autorisation hello Azure AD pour l’utilisation de Media Services.</span><span class="sxs-lookup"><span data-stu-id="6b014-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="6b014-137">Hello applications et services et les flux hello, sont décrites dans hello tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="6b014-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="6b014-138">Type d’application</span><span class="sxs-lookup"><span data-stu-id="6b014-138">Application type</span></span> |<span data-ttu-id="6b014-139">Application</span><span class="sxs-lookup"><span data-stu-id="6b014-139">Application</span></span> |<span data-ttu-id="6b014-140">Flux</span><span class="sxs-lookup"><span data-stu-id="6b014-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="6b014-141">Client</span><span class="sxs-lookup"><span data-stu-id="6b014-141">Client</span></span> | <span data-ttu-id="6b014-142">Application ou solution cliente</span><span class="sxs-lookup"><span data-stu-id="6b014-142">Customer app or solution</span></span> | <span data-ttu-id="6b014-143">Cette application (en fait, son proxy) est enregistrée dans le locataire Azure AD de hello quels Bonjour Azure media d’abonnement et hello réside le compte de service.</span><span class="sxs-lookup"><span data-stu-id="6b014-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="6b014-144">Hello principal du service de l’application hello inscrit reçoit ensuite avec un rôle propriétaire ou contributeur Bonjour contrôle d’accès (IAM) du compte de service de support hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="6b014-145">principal du service Hello est représenté par hello client ID client et le secret d’application.</span><span class="sxs-lookup"><span data-stu-id="6b014-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="6b014-146">Fournisseur d’identité (IDP)</span><span class="sxs-lookup"><span data-stu-id="6b014-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="6b014-147">Azure AD en tant que fournisseur d’identité</span><span class="sxs-lookup"><span data-stu-id="6b014-147">Azure AD as IDP</span></span> | <span data-ttu-id="6b014-148">principal du service application enregistrée Hello (ID client et question secrète du client) est authentifié par Azure AD en tant que hello IDP.</span><span class="sxs-lookup"><span data-stu-id="6b014-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="6b014-149">Cette authentification est effectuée en interne et de manière implicite.</span><span class="sxs-lookup"><span data-stu-id="6b014-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="6b014-150">Comme dans les flux d’informations d’identification de client, le client de hello est authentifié au lieu de l’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="6b014-151">Secure Token Service (STS)/serveur OAuth</span><span class="sxs-lookup"><span data-stu-id="6b014-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="6b014-152">Azure AD en tant que STS</span><span class="sxs-lookup"><span data-stu-id="6b014-152">Azure AD as STS</span></span> | <span data-ttu-id="6b014-153">Après une authentification par hello IDP (ou serveur OAuth en termes de OAuth 2.0), un jeton d’accès ou un jeton de Web JSON (JWT) émis par Azure AD en tant que serveur STS/OAuth pour la ressource de niveau intermédiaire accès toohello : dans le cas présent, hello le point de terminaison API REST Media Services.</span><span class="sxs-lookup"><span data-stu-id="6b014-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="6b014-154">Ressource</span><span class="sxs-lookup"><span data-stu-id="6b014-154">Resource</span></span> | <span data-ttu-id="6b014-155">API REST Media Services</span><span class="sxs-lookup"><span data-stu-id="6b014-155">Media Services REST API</span></span> | <span data-ttu-id="6b014-156">Chaque appel d’API REST Media Services est autorisé par un jeton d’accès qui est émis par Azure AD en tant que serveur STS ou hello OAuth.</span><span class="sxs-lookup"><span data-stu-id="6b014-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="6b014-157">Si vous exécutez l’exemple de code hello et capturez un jeton Web JSON ou un jeton d’accès, hello JWT a hello suivant d’attributs :</span><span class="sxs-lookup"><span data-stu-id="6b014-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="6b014-158">Voici les mappages hello entre attributs hello dans hello JSON et hello quatre applications ou services dans le tableau précédent de hello :</span><span class="sxs-lookup"><span data-stu-id="6b014-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="6b014-159">Type d’application</span><span class="sxs-lookup"><span data-stu-id="6b014-159">Application type</span></span> |<span data-ttu-id="6b014-160">Application</span><span class="sxs-lookup"><span data-stu-id="6b014-160">Application</span></span> |<span data-ttu-id="6b014-161">Attribut JWT</span><span class="sxs-lookup"><span data-stu-id="6b014-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="6b014-162">Client</span><span class="sxs-lookup"><span data-stu-id="6b014-162">Client</span></span> |<span data-ttu-id="6b014-163">Application ou solution cliente</span><span class="sxs-lookup"><span data-stu-id="6b014-163">Customer app or solution</span></span> |<span data-ttu-id="6b014-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="6b014-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="6b014-165">ID de client Hello d’une application, vous inscrirez tooAzure AD dans la section suivante de hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="6b014-166">Fournisseur d’identité (IDP)</span><span class="sxs-lookup"><span data-stu-id="6b014-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="6b014-167">Azure AD en tant que fournisseur d’identité</span><span class="sxs-lookup"><span data-stu-id="6b014-167">Azure AD as IDP</span></span> |<span data-ttu-id="6b014-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="6b014-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="6b014-169">Hello GUID est un client d’ID de Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="6b014-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="6b014-170">Chaque locataire a son propre ID unique.</span><span class="sxs-lookup"><span data-stu-id="6b014-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="6b014-171">Secure Token Service (STS)/serveur OAuth</span><span class="sxs-lookup"><span data-stu-id="6b014-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="6b014-172">Azure AD en tant que STS</span><span class="sxs-lookup"><span data-stu-id="6b014-172">Azure AD as STS</span></span> | <span data-ttu-id="6b014-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="6b014-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="6b014-174">Hello GUID est un client d’ID de Microsoft hello (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="6b014-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="6b014-175">Ressource</span><span class="sxs-lookup"><span data-stu-id="6b014-175">Resource</span></span> | <span data-ttu-id="6b014-176">API REST Media Services</span><span class="sxs-lookup"><span data-stu-id="6b014-176">Media Services REST API</span></span> |<span data-ttu-id="6b014-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="6b014-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="6b014-178">destinataire de Hello ou audience du jeton d’accès hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="6b014-179">Étapes de configuration</span><span class="sxs-lookup"><span data-stu-id="6b014-179">Steps for setup</span></span>

<span data-ttu-id="6b014-180">tooregister et configurer une application Azure AD pour l’authentification Azure AD et tooobtain un jeton d’accès pour appeler le point de terminaison sur l’API REST de Azure Media Services des hello, hello complète comme suit :</span><span class="sxs-lookup"><span data-stu-id="6b014-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="6b014-181">Bonjour [portail Azure classic](http://go.microsoft.com/fwlink/?LinkID=213885), inscrire un client de toohello Azure AD de l’application (par exemple, wzmediaservice) Azure AD (par exemple, microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="6b014-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="6b014-182">Peu importe si l’inscription est faite en tant qu’application web ou application native.</span><span class="sxs-lookup"><span data-stu-id="6b014-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="6b014-183">En outre, vous pouvez choisir n’importe quelle URL de connexion et URL de réponse (par exemple, http://wzmediaservice.com pour les deux).</span><span class="sxs-lookup"><span data-stu-id="6b014-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="6b014-184">Bonjour [portail Azure classic](http://go.microsoft.com/fwlink/?LinkID=213885), accédez toohello **configurer** onglet de votre application.</span><span class="sxs-lookup"><span data-stu-id="6b014-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="6b014-185">Hello de note **ID client**.</span><span class="sxs-lookup"><span data-stu-id="6b014-185">Note hello **client ID**.</span></span> <span data-ttu-id="6b014-186">Ensuite, sous **Clés**, générez une **clé client** (clé secrète client).</span><span class="sxs-lookup"><span data-stu-id="6b014-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="6b014-187">Prenez note de la clé secrète du client hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-187">Take note of hello client secret.</span></span> <span data-ttu-id="6b014-188">Elle ne s’affichera plus.</span><span class="sxs-lookup"><span data-stu-id="6b014-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="6b014-189">Bonjour [portail Azure](http://ms.portal.azure.com), passez le compte de service de média toohello.</span><span class="sxs-lookup"><span data-stu-id="6b014-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="6b014-190">Sélectionnez hello **le contrôle d’accès** volet de (IAM).</span><span class="sxs-lookup"><span data-stu-id="6b014-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="6b014-191">Ajout d’un membre qui a hello propriétaire ou rôle de collaborateur hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="6b014-192">Pour le principal de hello, recherchez les nom de l’application hello que vous inscrit à l’étape 1 (dans cet exemple, wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="6b014-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="6b014-193">Informations toocollect</span><span class="sxs-lookup"><span data-stu-id="6b014-193">Info toocollect</span></span>

<span data-ttu-id="6b014-194">tooprepare REST de codage, collecter hello suivant tooinclude de points de données dans le code hello :</span><span class="sxs-lookup"><span data-stu-id="6b014-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="6b014-195">Azure AD en tant que point de terminaison STS : https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="6b014-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="6b014-196">À partir de ce point de terminaison, un jeton d’accès JWT est demandé.</span><span class="sxs-lookup"><span data-stu-id="6b014-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="6b014-197">En outre tooserving comme un IDP, Azure AD sert également un service STS.</span><span class="sxs-lookup"><span data-stu-id="6b014-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="6b014-198">Azure AD émet un JWT pour l’accès aux ressources (jeton d’accès).</span><span class="sxs-lookup"><span data-stu-id="6b014-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="6b014-199">Un jeton JWT a plusieurs revendications.</span><span class="sxs-lookup"><span data-stu-id="6b014-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="6b014-200">APIT REST Azure Media Services en tant que ressource ou audience : https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="6b014-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="6b014-201">ID client : consultez l’étape 2 dans [Étapes de configuration](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="6b014-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="6b014-202">Clé secrète client : consultez l’étape 2 dans [Étapes de configuration](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="6b014-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="6b014-203">Point de terminaison API REST Bonjour suivant le format de compte de vos Services de support :</span><span class="sxs-lookup"><span data-stu-id="6b014-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="6b014-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="6b014-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="6b014-205">Il s’agit de point de terminaison hello sur les API REST de tous les Media Services dans votre application sont appelées.</span><span class="sxs-lookup"><span data-stu-id="6b014-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="6b014-206">Par exemple, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="6b014-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="6b014-207">Vous pouvez ensuite placer ces cinq paramètres dans votre fichier web.config ou app.config, toouse dans votre code.</span><span class="sxs-lookup"><span data-stu-id="6b014-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="6b014-208">Exemple de code</span><span class="sxs-lookup"><span data-stu-id="6b014-208">Sample code</span></span>

<span data-ttu-id="6b014-209">Vous trouverez un exemple de code hello dans [l’authentification Azure AD pour Azure Media Services Access : à la fois via une API REST](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="6b014-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="6b014-210">exemple de code Hello comporte deux parties :</span><span class="sxs-lookup"><span data-stu-id="6b014-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="6b014-211">Un projet de bibliothèque DLL contenant tout le code hello API REST pour l’authentification Azure AD et l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="6b014-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="6b014-212">Il a également une méthode pour rendre les API REST appelle toohello API REST Media Services point de terminaison, avec le jeton d’accès hello.</span><span class="sxs-lookup"><span data-stu-id="6b014-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="6b014-213">Un client test de console, qui lance l’authentification Azure AD et appelle une autre API REST Media Services.</span><span class="sxs-lookup"><span data-stu-id="6b014-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="6b014-214">exemple de projet Hello a trois fonctionnalités :</span><span class="sxs-lookup"><span data-stu-id="6b014-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="6b014-215">Les authentifications AD Azure via les informations d’identification du client hello accorder à l’aide uniquement hello API REST.</span><span class="sxs-lookup"><span data-stu-id="6b014-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="6b014-216">Accès Azure Media Services à l’aide uniquement hello API REST.</span><span class="sxs-lookup"><span data-stu-id="6b014-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="6b014-217">Accès de stockage Azure à l’aide de hello uniquement les API REST (comme toocreate utilisé un compte Media Services, à l’aide des API REST).</span><span class="sxs-lookup"><span data-stu-id="6b014-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="6b014-218">Où se trouve le jeton d’actualisation hello ?</span><span class="sxs-lookup"><span data-stu-id="6b014-218">Where is hello refresh token?</span></span>

<span data-ttu-id="6b014-219">Certains lecteurs peuvent demander : où est le jeton d’actualisation hello ?</span><span class="sxs-lookup"><span data-stu-id="6b014-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="6b014-220">Pourquoi ne pas utiliser un jeton d’actualisation ici ?</span><span class="sxs-lookup"><span data-stu-id="6b014-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="6b014-221">objectif de Hello d’un jeton d’actualisation n’est pas toorefresh un jeton d’accès.</span><span class="sxs-lookup"><span data-stu-id="6b014-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="6b014-222">Au lieu de cela, il est conçue toobypass intervention de l’utilisateur ou l’authentification par l’utilisateur et qu’un jeton d’accès valide au moment de l’expiration d’un jeton antérieur.</span><span class="sxs-lookup"><span data-stu-id="6b014-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="6b014-223">Il serait peut-être plus clair de parler de « jeton de contournement de la reconnexion utilisateur ».</span><span class="sxs-lookup"><span data-stu-id="6b014-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="6b014-224">Si vous utilisez hello OAuth 2.0 (nom d’utilisateur et mot de passe, qui agit pour le compte d’utilisateur) de flux d’octroi de l’autorisation, un jeton d’actualisation vous permet d’obtenir un accès renouvelé jeton sans demander l’intervention de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6b014-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="6b014-225">Toutefois, pour hello OAuth 2.0, informations d’identification client accorder flux que nous décrivons dans cet article, hello fait Office de pour son propre compte.</span><span class="sxs-lookup"><span data-stu-id="6b014-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="6b014-226">Vous ne devez pas du tout l’intervention de l’utilisateur, et serveur d’autorisation de hello n’a pas besoin de trop (et ne sera pas) vous donne un jeton d’actualisation.</span><span class="sxs-lookup"><span data-stu-id="6b014-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="6b014-227">Si vous déboguez hello **GetUrlEncodedJWT** (méthode), vous remarquerez que la réponse hello à partir du point de terminaison token hello a un jeton d’accès, mais aucun jeton d’actualisation.</span><span class="sxs-lookup"><span data-stu-id="6b014-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6b014-228">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="6b014-228">Next steps</span></span>

<span data-ttu-id="6b014-229">Prise en main [téléchargement de fichiers tooyour compte](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="6b014-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
