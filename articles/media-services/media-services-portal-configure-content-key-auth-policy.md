---
title: "à l’aide du contenu stratégie d’autorisation de clé aaaConfigure hello portail Azure | Documents Microsoft"
description: "Découvrez comment tooconfigure une stratégie d’autorisation pour une clé de contenu."
services: media-services
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.assetid: ee82a3fa-c34b-48f2-a108-8ba321f1691e
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako
ms.openlocfilehash: 157fb691b7f71f4889228817e1dc64555e327d48
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-content-key-authorization-policy"></a><span data-ttu-id="4b673-103">Configuration de la stratégie d’autorisation de clé de contenu</span><span class="sxs-lookup"><span data-stu-id="4b673-103">Configure Content Key Authorization Policy</span></span>
[!INCLUDE [media-services-selector-content-key-auth-policy](../../includes/media-services-selector-content-key-auth-policy.md)]

## <a name="overview"></a><span data-ttu-id="4b673-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="4b673-104">Overview</span></span>
<span data-ttu-id="4b673-105">Microsoft Azure Media Services vous permet de toodeliver MPEG-DASH, Smooth Streaming et les flux HTTP Live Streaming (HLS) protégés avec Advanced Encryption Standard (AES) (à l’aide de clés de chiffrement 128 bits) ou [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span><span class="sxs-lookup"><span data-stu-id="4b673-105">Microsoft Azure Media Services enables you toodeliver MPEG-DASH, Smooth Streaming, and HTTP-Live-Streaming (HLS) streams protected with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span></span> <span data-ttu-id="4b673-106">AMS permet également de vous toodeliver tiret flux chiffrés avec Widevine DRM.</span><span class="sxs-lookup"><span data-stu-id="4b673-106">AMS also enables you toodeliver DASH streams encrypted with Widevine DRM.</span></span> <span data-ttu-id="4b673-107">PlayReady et Widevine sont chiffrées par hello spécification de chiffrement commun (CENC 23001-7 de norme ISO/IEC).</span><span class="sxs-lookup"><span data-stu-id="4b673-107">Both PlayReady and Widevine are encrypted per hello Common Encryption (ISO/IEC 23001-7 CENC) specification.</span></span>

<span data-ttu-id="4b673-108">Media Services fournit également un **Service de remise de clé/licence** à partir desquels les clients peuvent obtenir des clés AES ou PlayReady/Widevine licences tooplay hello contenu chiffré.</span><span class="sxs-lookup"><span data-stu-id="4b673-108">Media Services also provides a **Key/License Delivery Service** from which clients can obtain AES keys or PlayReady/Widevine licenses tooplay hello encrypted content.</span></span>

<span data-ttu-id="4b673-109">Cette rubrique montre comment toouse hello stratégie de contenu d’autorisation de clé hello tooconfigure portail Azure.</span><span class="sxs-lookup"><span data-stu-id="4b673-109">This topic shows how toouse hello Azure portal tooconfigure hello content key authorization policy.</span></span> <span data-ttu-id="4b673-110">clé de Hello peut être utilisée ultérieurement toodynamically chiffrer votre contenu.</span><span class="sxs-lookup"><span data-stu-id="4b673-110">hello key can later be used toodynamically encrypt your content.</span></span> <span data-ttu-id="4b673-111">Notez que vous pouvez actuellement chiffrer hello suivant les formats de diffusion en continu : TLS, MPEG DASH et diffusion en continu lisse.</span><span class="sxs-lookup"><span data-stu-id="4b673-111">Note that currently you can encrypt hello following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="4b673-112">Vous ne pouvez pas chiffrer les téléchargements progressifs.</span><span class="sxs-lookup"><span data-stu-id="4b673-112">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="4b673-113">Lorsqu’un lecteur demande le flux de données qui a la valeur toobe dynamiquement chiffré, Media Services utilise hello configuré clé toodynamically chiffrer votre contenu à l’aide du chiffrement AES ou la gestion des droits numériques.</span><span class="sxs-lookup"><span data-stu-id="4b673-113">When a player requests a stream that is set toobe dynamically encrypted, Media Services uses hello configured key toodynamically encrypt your content using AES or DRM encryption.</span></span> <span data-ttu-id="4b673-114">flux de données toodecrypt hello, le lecteur hello demande clé de hello de service de distribution de clés hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-114">toodecrypt hello stream, hello player will request hello key from hello key delivery service.</span></span> <span data-ttu-id="4b673-115">toodecide soit ou non d’utilisateur de hello autorisé clé de hello tooget, hello évalue les stratégies d’autorisation hello que vous avez spécifié pour la clé de hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-115">toodecide whether or not hello user is authorized tooget hello key, hello service evaluates hello authorization policies that you specified for hello key.</span></span>

<span data-ttu-id="4b673-116">Si vous envisagez de toohave plusieurs clés de contenu ou que vous voulez toospecify un **Service de remise de clé/licence** URL de hello service de distribution de clés de Media Services, utilisez Media Services .NET SDK ou des API REST.</span><span class="sxs-lookup"><span data-stu-id="4b673-116">If you plan toohave multiple content keys or want toospecify a **Key/License Delivery Service** URL other than hello Media Services key delivery service, use Media Services .NET SDK or REST APIs.</span></span>

[<span data-ttu-id="4b673-117">Configurer la stratégie d’autorisation de clé de contenu à l’aide du Kit de développement logiciel (SDK).NET Media Services</span><span class="sxs-lookup"><span data-stu-id="4b673-117">Configure Content Key Authorization Policy using Media Services .NET SDK</span></span>](media-services-dotnet-configure-content-key-auth-policy.md)

[<span data-ttu-id="4b673-118">Configurer la stratégie d’autorisation de clé de contenu à l’aide de l’API REST Media Services</span><span class="sxs-lookup"><span data-stu-id="4b673-118">Configure Content Key Authorization Policy using Media Services REST API</span></span>](media-services-rest-configure-content-key-auth-policy.md)

### <a name="some-considerations-apply"></a><span data-ttu-id="4b673-119">Certaines considérations s’appliquent :</span><span class="sxs-lookup"><span data-stu-id="4b673-119">Some considerations apply:</span></span>
* <span data-ttu-id="4b673-120">Création de votre compte AMS un **par défaut** point de terminaison de diffusion en continu est ajoutée tooyour compte Bonjour **arrêté** état.</span><span class="sxs-lookup"><span data-stu-id="4b673-120">When your AMS account is created a **default** streaming endpoint is added  tooyour account in hello **Stopped** state.</span></span> <span data-ttu-id="4b673-121">toostart votre contenu et profitez de l’empaquetage dynamique et chiffrement dynamique, votre point de terminaison de diffusion en continu de diffusion en continu a toobe Bonjour **en cours d’exécution** état.</span><span class="sxs-lookup"><span data-stu-id="4b673-121">toostart streaming your content and take advantage of dynamic packaging and dynamic encryption, your streaming endpoint has toobe in hello **Running** state.</span></span> 
* <span data-ttu-id="4b673-122">Votre ressource doit contenir un ensemble de MP4 à débit adaptatif ou des fichiers de diffusion en continu lisse à débit adaptatif.</span><span class="sxs-lookup"><span data-stu-id="4b673-122">Your asset must contain a set of adaptive bitrate MP4s or adaptive bitrate Smooth Streaming files.</span></span> <span data-ttu-id="4b673-123">Pour plus d'informations, consultez [Encoder une ressource](media-services-encode-asset.md).</span><span class="sxs-lookup"><span data-stu-id="4b673-123">For more information, see [Encode an asset](media-services-encode-asset.md).</span></span>
* <span data-ttu-id="4b673-124">Hello service de fourniture de clé met en cache ContentKeyAuthorizationPolicy et les objets associés (options de stratégie et les restrictions) pendant 15 minutes.</span><span class="sxs-lookup"><span data-stu-id="4b673-124">hello Key Delivery service caches ContentKeyAuthorizationPolicy and its related objects (policy options and restrictions) for 15 minutes.</span></span>  <span data-ttu-id="4b673-125">Si vous créez une stratégie ContentKeyAuthorizationPolicy et spécifiez toouse une restriction « Token », puis testez, puis mettre à jour de stratégie de hello trop « ouvrir » restriction, il prendra environ 15 minutes avant hello commutateurs toohello « Ouvert » version de stratégie de la stratégie de hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-125">If you create a ContentKeyAuthorizationPolicy and specify toouse a “Token” restriction, then test it, and then update hello policy too“Open” restriction, it will take roughly 15 minutes before hello policy switches toohello “Open” version of hello policy.</span></span>

## <a name="how-to-configure-hello-key-authorization-policy"></a><span data-ttu-id="4b673-126">Comment : configurer la stratégie d’autorisation de clé de hello</span><span class="sxs-lookup"><span data-stu-id="4b673-126">How to: configure hello key authorization policy</span></span>
<span data-ttu-id="4b673-127">stratégie d’autorisation de clé de tooconfigure hello, sélectionnez hello **PROTECTION du contenu** page.</span><span class="sxs-lookup"><span data-stu-id="4b673-127">tooconfigure hello key authorization policy, select hello **CONTENT PROTECTION** page.</span></span>

<span data-ttu-id="4b673-128">Media Services prend en charge plusieurs méthodes d’authentification des utilisateurs effectuant des demandes de clé.</span><span class="sxs-lookup"><span data-stu-id="4b673-128">Media Services supports multiple ways of authenticating users who make key requests.</span></span> <span data-ttu-id="4b673-129">stratégie d’autorisation de clé contenu de Hello **ouvrir**, **jeton**, ou **IP** restrictions d’autorisation (**IP** peut être configuré avec REST ou .NET SDK).</span><span class="sxs-lookup"><span data-stu-id="4b673-129">hello content key authorization policy can have **open**, **token**, or **IP** authorization restrictions (**IP** can be configured with REST or .NET SDK).</span></span>

### <a name="open-restriction"></a><span data-ttu-id="4b673-130">Restriction ouverte</span><span class="sxs-lookup"><span data-stu-id="4b673-130">Open restriction</span></span>
<span data-ttu-id="4b673-131">Hello **ouvrir** restriction signifie hello système fournit des tooanyone clé hello qui fait la demande.</span><span class="sxs-lookup"><span data-stu-id="4b673-131">hello **open** restriction means hello system will deliver hello key tooanyone who makes a key request.</span></span> <span data-ttu-id="4b673-132">Cette restriction peut être utile à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="4b673-132">This restriction might be useful for testing purposes.</span></span>

![OpenPolicy][open_policy]

### <a name="token-restriction"></a><span data-ttu-id="4b673-134">Restriction à jeton</span><span class="sxs-lookup"><span data-stu-id="4b673-134">Token restriction</span></span>
<span data-ttu-id="4b673-135">jeton de hello toochoose restreint la stratégie, appuyez sur hello **jeton** bouton.</span><span class="sxs-lookup"><span data-stu-id="4b673-135">toochoose hello token restricted policy, press hello **TOKEN** button.</span></span>

<span data-ttu-id="4b673-136">Hello **jeton** stratégie restreint doit être accompagnée d’un jeton émis par une **Service d’émission de jeton sécurisé** (STS).</span><span class="sxs-lookup"><span data-stu-id="4b673-136">hello **token** restricted policy must be accompanied by a token issued by a **Secure Token Service** (STS).</span></span> <span data-ttu-id="4b673-137">Media Services prend en charge les jetons Bonjour **des jetons Web simples** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format et **jeton Web JSON** format (JWT).</span><span class="sxs-lookup"><span data-stu-id="4b673-137">Media Services supports tokens in hello **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format and **JSON Web Token** (JWT) format.</span></span> <span data-ttu-id="4b673-138">Pour plus d’informations, consultez [Authentification à jeton JWT](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span><span class="sxs-lookup"><span data-stu-id="4b673-138">For information, see [JWT token authentication](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span></span>

<span data-ttu-id="4b673-139">Media Services ne fournit pas de **services de jeton sécurisé**.</span><span class="sxs-lookup"><span data-stu-id="4b673-139">Media Services does not provide **Secure Token Services**.</span></span> <span data-ttu-id="4b673-140">Vous pouvez créer un STS personnalisé ou tirer parti des jetons de tooissue Microsoft Azure ACS.</span><span class="sxs-lookup"><span data-stu-id="4b673-140">You can create a custom STS or leverage Microsoft Azure ACS tooissue tokens.</span></span> <span data-ttu-id="4b673-141">Hello STS doit être configuré toocreate un jeton signé avec hello spécifié clé et émettre les revendications que vous avez spécifié dans la configuration de restriction token hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-141">hello STS must be configured toocreate a token signed with hello specified key and issue claims that you specified in hello token restriction configuration.</span></span> <span data-ttu-id="4b673-142">Hello service de distribution de clés de Media Services renvoie client de toohello clé de chiffrement hello si hello du jeton est valide et hello revendications de jeton de hello correspondent à ceux configurés pour la clé de contenu hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-142">hello Media Services key delivery service will return hello encryption key toohello client if hello token is valid and hello claims in hello token match those configured for hello content key.</span></span> <span data-ttu-id="4b673-143">Pour plus d’informations, consultez [les jetons tooissue utilisation Azure ACS](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="4b673-143">For more information, see [Use Azure ACS tooissue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

<span data-ttu-id="4b673-144">Lors de la configuration hello **jeton** stratégie restreint, vous devez définir des valeurs pour **clé de vérification**, **émetteur** et **public**.</span><span class="sxs-lookup"><span data-stu-id="4b673-144">When configuring hello **TOKEN** restricted policy, you must set values for **verification key**, **issuer** and **audience**.</span></span> <span data-ttu-id="4b673-145">clé de vérification principale Hello contient hello clé que le jeton de hello a été signé avec, l’émetteur est hello sécurisé STS qui émet le jeton de hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-145">hello primary verification key contains hello key that hello token was signed with, issuer is hello secure token service that issues hello token.</span></span> <span data-ttu-id="4b673-146">audience Hello (parfois appelé étendue) décrit l’intention de hello du jeton de hello ou autorise l’accès au jeton de hello ressource hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-146">hello audience (sometimes called scope) describes hello intent of hello token or hello resource hello token authorizes access to.</span></span> <span data-ttu-id="4b673-147">Hello service de distribution de clés de Media Services valide que ces valeurs dans le jeton de hello correspondent aux valeurs hello modèle de hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-147">hello Media Services key delivery service validates that these values in hello token match hello values in hello template.</span></span>

### <a name="playready"></a><span data-ttu-id="4b673-148">PlayReady</span><span class="sxs-lookup"><span data-stu-id="4b673-148">PlayReady</span></span>
<span data-ttu-id="4b673-149">Lorsque vous protégez votre contenu avec **PlayReady**, un hello choses toospecify dans votre stratégie d’autorisation est une chaîne XML qui définit le modèle de licence PlayReady hello.</span><span class="sxs-lookup"><span data-stu-id="4b673-149">When protecting your content with **PlayReady**, one of hello things you need toospecify in your authorization policy is an XML string that defines hello PlayReady license template.</span></span> <span data-ttu-id="4b673-150">Par défaut, hello suivant la stratégie est définie :</span><span class="sxs-lookup"><span data-stu-id="4b673-150">By default, hello following policy is set:</span></span>

<span data-ttu-id="4b673-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"><LicenseTemplates><PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices><ContentKey i:type="ContentEncryptionKeyFromHeader" /><LicenseType>Nonpersistent</LicenseType><PlayRight><AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput></PlayRight></PlayReadyLicenseTemplate></LicenseTemplates></PlayReadyLicenseResponseTemplate></span><span class="sxs-lookup"><span data-stu-id="4b673-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"> <LicenseTemplates> <PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates> </PlayReadyLicenseResponseTemplate></span></span>

<span data-ttu-id="4b673-152">Vous pouvez cliquer sur hello **importer le xml de stratégie** bouton et fournir un autre XML conforme toohello schéma XML défini [ici](media-services-playready-license-template-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4b673-152">You can click hello **import policy xml** button and provide a different XML which conforms toohello  XML Schema defined [here](media-services-playready-license-template-overview.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="4b673-153">Étape suivante</span><span class="sxs-lookup"><span data-stu-id="4b673-153">Next step</span></span>
<span data-ttu-id="4b673-154">Consultez les parcours d’apprentissage de Media Services.</span><span class="sxs-lookup"><span data-stu-id="4b673-154">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="4b673-155">Fournir des commentaires</span><span class="sxs-lookup"><span data-stu-id="4b673-155">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[open_policy]: ./media/media-services-portal-configure-content-key-auth-policy/media-services-protect-content-with-open-restriction.png
[token_policy]: ./media/media-services-key-authorization-policy/media-services-protect-content-with-token-restriction.png

