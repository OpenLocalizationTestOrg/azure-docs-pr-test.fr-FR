---
title: Filtres et manifestes dynamiques | Microsoft Docs
description: "Cette rubrique décrit comment créer des filtres pour que votre client puisse les utiliser pour diffuser des sections spécifiques d’un flux. Media Services crée des manifestes dynamiques pour l’archivage de cette diffusion sélective."
services: media-services
documentationcenter: 
author: cenkdin
manager: cfowler
editor: 
ms.assetid: ff102765-8cee-4c08-a6da-b603db9e2054
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 06/29/2017
ms.author: cenkd;juliako
ms.openlocfilehash: 4034fd0aa64627c107a43208dcca766f7f44d5d4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="filters-and-dynamic-manifests"></a><span data-ttu-id="12a97-104">Filtres et manifestes dynamiques</span><span class="sxs-lookup"><span data-stu-id="12a97-104">Filters and dynamic manifests</span></span>
<span data-ttu-id="12a97-105">À partir de la version 2.11, Media Services vous permet de définir des filtres pour vos éléments multimédias.</span><span class="sxs-lookup"><span data-stu-id="12a97-105">Starting with 2.11 release, Media Services enables you to define filters for your assets.</span></span> <span data-ttu-id="12a97-106">Ces filtres sont des règles côté serveur qui permettent à vos clients de choisir d'effectuer des opérations comme les suivantes : lecture d'une section d'une vidéo uniquement (au lieu de la vidéo entière), spécification d'un seul sous-ensemble de rendus audio et vidéo pouvant être gérés par l'appareil de votre client (au lieu de tous les rendus associés à l'élément multimédia).</span><span class="sxs-lookup"><span data-stu-id="12a97-106">These filters are server side rules that will allow your customers to choose to do things like: playback only a section of a video (instead of playing the whole video), or specify only a subset of audio and video renditions that your customer's device can handle (instead of all the renditions that are associated with the asset).</span></span> <span data-ttu-id="12a97-107">Ce filtrage de vos ressources est obtenu via des **manifestes dynamiques**créés à la demande de votre client pour diffuser une vidéo selon des filtres spécifiés.</span><span class="sxs-lookup"><span data-stu-id="12a97-107">This filtering of your assets is archived through **Dynamic Manifest**s that are created upon your customer's request to stream a video based on specified filter(s).</span></span>

<span data-ttu-id="12a97-108">Cette rubrique décrit les scénarios courants dans lesquels l’utilisation de filtres s’avère très utile pour vos clients et établit des liens vers d’autres rubriques qui montrent comment créer par programme de tels filtres (actuellement, vous pouvez créer des filtres avec les API REST uniquement).</span><span class="sxs-lookup"><span data-stu-id="12a97-108">This topics discusses common scenarios in which using filters would be very beneficial to your customers and links to topics that demonstrate how to create filters programmatically (currently, you can create filters with REST APIs only).</span></span>

## <a name="overview"></a><span data-ttu-id="12a97-109">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="12a97-109">Overview</span></span>
<span data-ttu-id="12a97-110">Quand vous distribuez votre contenu aux clients (diffusion en continu d'événements en direct ou vidéo à la demande), votre objectif est de distribuer une vidéo de haute qualité à divers appareils dans des conditions de réseau différentes.</span><span class="sxs-lookup"><span data-stu-id="12a97-110">When delivering your content to customers (streaming live events or video-on-demand) your goal is to deliver a high quality video to various devices under different network conditions.</span></span> <span data-ttu-id="12a97-111">Pour atteindre cet objectif, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="12a97-111">To achieve this goal do the following:</span></span>

* <span data-ttu-id="12a97-112">encodez votre flux dans un flux vidéo à débit binaire multiple ([débit binaire adaptatif](http://en.wikipedia.org/wiki/Adaptive_bitrate_streaming)) (les conditions de qualité et de réseau sont ainsi prises en charge) ;</span><span class="sxs-lookup"><span data-stu-id="12a97-112">encode your stream to multi-bitrate ([adaptive bitrate](http://en.wikipedia.org/wiki/Adaptive_bitrate_streaming)) video stream (this will take care of quality and network conditions) and</span></span> 
* <span data-ttu-id="12a97-113">utilisez l' [empaquetage dynamique](media-services-dynamic-packaging-overview.md) pour empaqueter de nouveau votre flux dans différents protocoles dynamiquement (la diffusion en continu sur différents appareils est ainsi prise en charge).</span><span class="sxs-lookup"><span data-stu-id="12a97-113">use Media Services [Dynamic Packaging](media-services-dynamic-packaging-overview.md) to dynamically re-package your stream into different protocols (this will take care of streaming on different devices).</span></span> <span data-ttu-id="12a97-114">Media Services prend en charge la distribution des technologies de streaming à débit adaptatif suivantes : HTTP Live Streaming (HLS), Smooth Streaming et MPEG DASH.</span><span class="sxs-lookup"><span data-stu-id="12a97-114">Media Services supports delivery of the following adaptive bitrate streaming technologies: HTTP Live Streaming (HLS), Smooth Streaming, and MPEG DASH.</span></span> 

### <a name="manifest-files"></a><span data-ttu-id="12a97-115">Fichiers manifeste</span><span class="sxs-lookup"><span data-stu-id="12a97-115">Manifest files</span></span>
<span data-ttu-id="12a97-116">Quand vous encodez un élément multimédia pour une diffusion à débit binaire adaptatif, un fichier **manifeste** (ou sélection) est créé (il s'agit d'un fichier texte ou XML).</span><span class="sxs-lookup"><span data-stu-id="12a97-116">When you encode an asset for adaptive bitrate streaming, a **manifest** (playlist) file is created (the file is text-based or XML-based).</span></span> <span data-ttu-id="12a97-117">Le fichier **manifeste** inclut des métadonnées de diffusion en continu telles que les suivantes : type de piste (audio, vidéo ou texte), nom de piste, heure de début et de fin, débit binaire (qualités), langues de piste, fenêtre de présentation (fenêtre glissante de durée fixe), codec vidéo (FourCC).</span><span class="sxs-lookup"><span data-stu-id="12a97-117">The **manifest** file includes streaming metadata such as: track type (audio, video, or text), track name, start and end time, bitrate (qualities), track languages, presentation window (sliding window of fixed duration), video codec (FourCC).</span></span> <span data-ttu-id="12a97-118">Il indique également au lecteur de récupérer le fragment suivant en fournissant des informations sur les fragments vidéo pouvant être lus suivants disponibles et leur emplacement.</span><span class="sxs-lookup"><span data-stu-id="12a97-118">It also instructs the player to retrieve the next fragment by providing information about the next playable video fragments available and their location.</span></span> <span data-ttu-id="12a97-119">Les fragments (ou segments) correspondent aux « blocs » réels d'un contenu vidéo.</span><span class="sxs-lookup"><span data-stu-id="12a97-119">Fragments (or segments) are the actual “chunks” of a video content.</span></span>

<span data-ttu-id="12a97-120">Voici un exemple de fichier manifeste :</span><span class="sxs-lookup"><span data-stu-id="12a97-120">Here is an example of a manifest file:</span></span> 

    <?xml version="1.0" encoding="UTF-8"?>    
    <SmoothStreamingMedia MajorVersion="2" MinorVersion="0" Duration="330187755" TimeScale="10000000">

    <StreamIndex Chunks="17" Type="video" Url="QualityLevels({bitrate})/Fragments(video={start time})" QualityLevels="8">
    <QualityLevel Index="0" Bitrate="5860941" FourCC="H264" MaxWidth="1920" MaxHeight="1080" CodecPrivateData="0000000167640028AC2CA501E0089F97015202020280000003008000001931300016E360000E4E1FF8C7076850A4580000000168E9093525" />
    <QualityLevel Index="1" Bitrate="4602724" FourCC="H264" MaxWidth="1920" MaxHeight="1080" CodecPrivateData="0000000167640028AC2CA501E0089F97015202020280000003008000001931100011EDC00002CD29FF8C7076850A45800000000168E9093525" />
    <QualityLevel Index="2" Bitrate="3319311" FourCC="H264" MaxWidth="1280" MaxHeight="720" CodecPrivateData="000000016764001FAC2CA5014016EC054808080A00000300020000030064C0800067C28000103667F8C7076850A4580000000168E9093525" />
    <QualityLevel Index="3" Bitrate="2195119" FourCC="H264" MaxWidth="960" MaxHeight="540" CodecPrivateData="000000016764001FAC2CA503C045FBC054808080A000000300200000064C1000044AA0000ABA9FE31C1DA14291600000000168E9093525" />
    <QualityLevel Index="4" Bitrate="1469881" FourCC="H264" MaxWidth="960" MaxHeight="540" CodecPrivateData="000000016764001FAC2CA503C045FBC054808080A000000300200000064C04000B71A0000E4E1FF8C7076850A4580000000168E9093525" />
    <QualityLevel Index="5" Bitrate="978815" FourCC="H264" MaxWidth="640" MaxHeight="360" CodecPrivateData="000000016764001EAC2CA50280BFE5C0548303032000000300200000064C08001E8480004C4B7F8C7076850A45800000000168E9093525" />
    <QualityLevel Index="6" Bitrate="638374" FourCC="H264" MaxWidth="640" MaxHeight="360" CodecPrivateData="000000016764001EAC2CA50280BFE5C0548303032000000300200000064C080013D60000C65DFE31C1DA1429160000000168E9093525" />
    <QualityLevel Index="7" Bitrate="388851" FourCC="H264" MaxWidth="320" MaxHeight="180" CodecPrivateData="000000016764000DAC2CA505067E7C054830303200000300020000030064C040030D40003D093F8C7076850A45800000000168E9093525" />

    <c t="0" d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="9600000"/>
    </StreamIndex>


    <StreamIndex Chunks="17" Type="audio" Url="QualityLevels({bitrate})/Fragments(AAC_und_ch2_128kbps={start time})" QualityLevels="1" Name="AAC_und_ch2_128kbps">
    <QualityLevel AudioTag="255" Index="0" BitsPerSample="16" Bitrate="125658" FourCC="AACL" CodecPrivateData="1210" Channels="2" PacketSize="4" SamplingRate="44100" />

    <c t="0" d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="6965987" /></StreamIndex>


    <StreamIndex Chunks="17" Type="audio" Url="QualityLevels({bitrate})/Fragments(AAC_und_ch2_56kbps={start time})" QualityLevels="1" Name="AAC_und_ch2_56kbps">
    <QualityLevel AudioTag="255" Index="0" BitsPerSample="16" Bitrate="53655" FourCC="AACL" CodecPrivateData="1210" Channels="2" PacketSize="4" SamplingRate="44100" />

    <c t="0" d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="6965987" /></StreamIndex>

    </SmoothStreamingMedia>

### <a name="dynamic-manifests"></a><span data-ttu-id="12a97-121">Manifestes dynamiques</span><span class="sxs-lookup"><span data-stu-id="12a97-121">Dynamic manifests</span></span>
<span data-ttu-id="12a97-122">Il existe des [scénarios](media-services-dynamic-manifest-overview.md#scenarios) dans lesquels votre client a besoin de davantage de flexibilité que celle décrite dans le fichier manifeste de l'élément multimédia par défaut.</span><span class="sxs-lookup"><span data-stu-id="12a97-122">There are [scenarios](media-services-dynamic-manifest-overview.md#scenarios) when your client needs more flexibility than what's described in the default asset's manifest file.</span></span> <span data-ttu-id="12a97-123">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="12a97-123">For example:</span></span>

* <span data-ttu-id="12a97-124">Particularité de l'appareil : distribuez uniquement les rendus spécifiés et/ou les pistes de langue spécifiées qui sont prises en charge par l'appareil utilisé pour lire le contenu (« filtrage de rendu »).</span><span class="sxs-lookup"><span data-stu-id="12a97-124">Device specific: deliver only the specified renditions and\or specified language tracks that are supported by the device that is used to playback the content ("rendition filtering").</span></span> 
* <span data-ttu-id="12a97-125">Réduisez le manifeste pour afficher un sous-clip d'un événement en direct (« filtrage de sous-clip »).</span><span class="sxs-lookup"><span data-stu-id="12a97-125">Reduce the manifest to show a sub-clip of a live event ("sub-clip filtering").</span></span>
* <span data-ttu-id="12a97-126">Découpez le début d'une vidéo (« découpage d'une vidéo »).</span><span class="sxs-lookup"><span data-stu-id="12a97-126">Trim the start of a video ("trimming a video").</span></span>
* <span data-ttu-id="12a97-127">Ajustez la fenêtre de présentation (DVR) afin de fournir une longueur limitée de la fenêtre du DVR dans le lecteur (« ajustement de la fenêtre de présentation »).</span><span class="sxs-lookup"><span data-stu-id="12a97-127">Adjust Presentation Window (DVR) in order to provide a limited length of the DVR window in the player ("adjusting presentation window") .</span></span>

<span data-ttu-id="12a97-128">Pour obtenir cette flexibilité, Media Services propose des **manifestes dynamiques** basés sur des [filtres](media-services-dynamic-manifest-overview.md#filters)prédéfinis.</span><span class="sxs-lookup"><span data-stu-id="12a97-128">To achieve this flexibility, Media Services offers **Dynamic Manifests** based on pre-defined [filters](media-services-dynamic-manifest-overview.md#filters).</span></span>  <span data-ttu-id="12a97-129">Une fois que vous avez défini les filtres, vos clients peuvent les utiliser pour diffuser un rendu spécifique ou des sous-clips de votre vidéo.</span><span class="sxs-lookup"><span data-stu-id="12a97-129">Once you define the filters, your clients could use them to stream a specific rendition or sub-clips of your video.</span></span> <span data-ttu-id="12a97-130">Ils peuvent spécifier des filtres dans l'URL de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="12a97-130">They would specify filter(s) in the streaming URL.</span></span> <span data-ttu-id="12a97-131">Les filtres peuvent s’appliquer aux protocoles de streaming à débit adaptatif par [empaquetage dynamique](media-services-dynamic-packaging-overview.md): HLS, MPEG-DASH et Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="12a97-131">Filters could be applied to adaptive bitrate streaming protocols supported by [Dynamic Packaging](media-services-dynamic-packaging-overview.md): HLS, MPEG-DASH, and Smooth Streaming.</span></span> <span data-ttu-id="12a97-132">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="12a97-132">For example:</span></span>

<span data-ttu-id="12a97-133">URL MPEG DASH avec filtre</span><span class="sxs-lookup"><span data-stu-id="12a97-133">MPEG DASH URL with filter</span></span>

    http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=mpd-time-csf,filter=MyLocalFilter)

<span data-ttu-id="12a97-134">URL Smooth Streaming avec filtre</span><span class="sxs-lookup"><span data-stu-id="12a97-134">Smooth Streaming URL with filter</span></span>

    http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(filter=MyLocalFilter)


<span data-ttu-id="12a97-135">Pour plus d'informations sur la façon de distribuer votre contenu et générer des URL de diffusion en continu, consultez [Vue d'ensemble de la distribution de contenu](media-services-deliver-content-overview.md).</span><span class="sxs-lookup"><span data-stu-id="12a97-135">For more information about how to deliver your content and build streaming URLs, see [Delivering content overview](media-services-deliver-content-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="12a97-136">Notez que les manifestes dynamiques ne changent pas l'élément multimédia ni son manifeste par défaut.</span><span class="sxs-lookup"><span data-stu-id="12a97-136">Note that Dynamic Manifests do not change the asset and the default manifest for that asset.</span></span> <span data-ttu-id="12a97-137">Votre client peut choisir de demander un flux avec ou sans filtres.</span><span class="sxs-lookup"><span data-stu-id="12a97-137">Your client can choose to request a stream with or without filters.</span></span> 
> 
> 

### <span data-ttu-id="12a97-138"><a id="filters"></a>Filtres</span><span class="sxs-lookup"><span data-stu-id="12a97-138"><a id="filters"></a>Filters</span></span>
<span data-ttu-id="12a97-139">Il existe deux types de filtres d'éléments multimédias :</span><span class="sxs-lookup"><span data-stu-id="12a97-139">There are two types of asset filters:</span></span> 

* <span data-ttu-id="12a97-140">les filtres globaux (applicables à n'importe quel élément multimédia dans le compte Azure Media Services et dont la durée de vie correspond à celle du compte) ;</span><span class="sxs-lookup"><span data-stu-id="12a97-140">Global filters (can be applied to any asset in the Azure Media Services account, have a lifetime of the account) and</span></span> 
* <span data-ttu-id="12a97-141">les filtres locaux (applicables uniquement à un élément multimédia avec lequel le filtre a été associé au moment de la création et dont la durée de vie correspond à celle de l'élément multimédia).</span><span class="sxs-lookup"><span data-stu-id="12a97-141">Local filters (can only be applied to an asset with which the filter was associated upon creation, have a lifetime of the asset).</span></span> 

<span data-ttu-id="12a97-142">Les filtres globaux et locaux ont exactement les mêmes propriétés.</span><span class="sxs-lookup"><span data-stu-id="12a97-142">Global and local filter types have exactly the same properties.</span></span> <span data-ttu-id="12a97-143">La principale différence entre les deux a trait aux scénarios auxquels ils sont les plus appropriés.</span><span class="sxs-lookup"><span data-stu-id="12a97-143">The main difference between the two is for which scenarios what type of a filer is more suitable.</span></span> <span data-ttu-id="12a97-144">Les filtres globaux conviennent généralement aux profils d'appareil (filtrage de rendu) alors que les filtres locaux peuvent être utilisés pour découper un élément multimédia spécifique.</span><span class="sxs-lookup"><span data-stu-id="12a97-144">Global filters are generally suitable for device profiles (rendition filtering) where local filters could be used to trim a specific asset.</span></span>

## <span data-ttu-id="12a97-145"><a id="scenarios"></a>Scénarios courants</span><span class="sxs-lookup"><span data-stu-id="12a97-145"><a id="scenarios"></a>Common scenarios</span></span>
<span data-ttu-id="12a97-146">Comme mentionné précédemment, quand vous distribuez votre contenu aux clients (diffusion en continu d'événements en direct ou vidéo à la demande), votre objectif est de distribuer une vidéo de haute qualité à divers appareils dans des conditions de réseau différentes.</span><span class="sxs-lookup"><span data-stu-id="12a97-146">As was mentioned before, when delivering your content to customers (streaming live events or video-on-demand) your goal is to deliver a high quality video to various devices under different network conditions.</span></span> <span data-ttu-id="12a97-147">De plus, vous pouvez avoir d'autres impératifs impliquant le filtrage de vos éléments multimédias et l'utilisation de **manifestes dynamiques**.</span><span class="sxs-lookup"><span data-stu-id="12a97-147">In addition, your might have other requirements that involve filtering your assets and using of **Dynamic Manifest**s.</span></span> <span data-ttu-id="12a97-148">Les sections suivantes présentent brièvement différents scénarios de filtrage.</span><span class="sxs-lookup"><span data-stu-id="12a97-148">The following sections give a short overview of different filtering scenarios.</span></span>

* <span data-ttu-id="12a97-149">Spécification d'un seul sous-ensemble de rendus audio et vidéos gérables par certains appareils (au lieu de tous les rendus associés à l'élément multimédia).</span><span class="sxs-lookup"><span data-stu-id="12a97-149">Specify only a subset of audio and video renditions that certain devices can handle (instead of all the renditions that are associated with the asset).</span></span> 
* <span data-ttu-id="12a97-150">Lecture d'une seule section d'une vidéo (au lieu de la vidéo entière).</span><span class="sxs-lookup"><span data-stu-id="12a97-150">Playing back only a section of a video (instead of playing the whole video).</span></span>
* <span data-ttu-id="12a97-151">Ajustement de la fenêtre de présentation DVR.</span><span class="sxs-lookup"><span data-stu-id="12a97-151">Adjust DVR presentation window.</span></span>

## <a name="rendition-filtering"></a><span data-ttu-id="12a97-152">Filtrage de rendu</span><span class="sxs-lookup"><span data-stu-id="12a97-152">Rendition filtering</span></span>
<span data-ttu-id="12a97-153">Vous pouvez choisir d'encoder votre élément multimédia pour plusieurs profils d'encodage (H.264 Baseline, H.264 High, AACL, AACH, Dolby Digital Plus) et plusieurs qualités de débit binaire.</span><span class="sxs-lookup"><span data-stu-id="12a97-153">You may choose to encode your asset to multiple encoding profiles (H.264 Baseline, H.264 High, AACL, AACH, Dolby Digital Plus) and multiple quality bitrates.</span></span> <span data-ttu-id="12a97-154">Toutefois, tous les appareils client ne prennent pas en charge tous les profils et débits binaires de tous vos éléments multimédias.</span><span class="sxs-lookup"><span data-stu-id="12a97-154">However, not all client devices will support all your asset's profiles and bitrates.</span></span> <span data-ttu-id="12a97-155">Par exemple, les anciens appareils Android prennent uniquement en charge H.264 Baseline+AACL.</span><span class="sxs-lookup"><span data-stu-id="12a97-155">For example, older Android devices only supports H.264 Baseline+AACL.</span></span> <span data-ttu-id="12a97-156">L'envoi de débits binaires plus élevés à un appareil qui ne peut pas en tirer partie ne fait que gaspiller la bande passante et entraîner des calculs inutiles pour l'appareil.</span><span class="sxs-lookup"><span data-stu-id="12a97-156">Sending higher bitrates to a device which cannot get the benefits, wastes bandwidth and device computation.</span></span> <span data-ttu-id="12a97-157">Ce dernier doit en effet décoder toutes les informations données, pour finalement les réduire pour pouvoir les afficher.</span><span class="sxs-lookup"><span data-stu-id="12a97-157">Such device must decode all the given information, only to scale it down for display.</span></span>

<span data-ttu-id="12a97-158">Avec un manifeste dynamique, vous pouvez créer des profils d'appareil mobile, de console, HD/SD, etc. et inclure les pistes et les qualités que vous voulez intégrer dans chaque profil.</span><span class="sxs-lookup"><span data-stu-id="12a97-158">With Dynamic Manifest, you can create device profiles such as mobile, console, HD/SD, etc. and include the tracks and qualities which you want to be a part of each profile.</span></span>

![Exemple de filtrage de rendu][renditions2]

<span data-ttu-id="12a97-160">Dans l’exemple suivant, un encodeur a été utilisé pour encoder un élément multimédia mezzanine en sept rendus vidéo ISO MP4s (de 180 p à 1 080 p).</span><span class="sxs-lookup"><span data-stu-id="12a97-160">In the following example, an encoder was used to encode a mezzanine asset into seven ISO MP4s video renditions (from 180p to 1080p).</span></span> <span data-ttu-id="12a97-161">L’élément multimédia encodé peut être empaqueté de manière dynamique dans l’un des protocoles de diffusion en continu suivants : HLS, Smooth et MPEG DASH.</span><span class="sxs-lookup"><span data-stu-id="12a97-161">The encoded asset can be dynamically packaged into any of the following streaming protocols: HLS, Smooth, and MPEG DASH.</span></span>  <span data-ttu-id="12a97-162">En haut du diagramme, le manifeste HLS de l'élément multimédia sans aucun filtre apparaît (il contient les sept rendus).</span><span class="sxs-lookup"><span data-stu-id="12a97-162">At the top of the diagram, the HLS manifest for the asset with no filters is shown (it contains all seven renditions).</span></span>  <span data-ttu-id="12a97-163">Dans la partie inférieure gauche apparaît le manifeste HLS auquel un filtre nommé « ott » a été appliqué.</span><span class="sxs-lookup"><span data-stu-id="12a97-163">In the bottom left, the HLS manifest to which a filter named "ott" was applied is shown.</span></span> <span data-ttu-id="12a97-164">Le filtre « ott » indique de supprimer tous les débits binaires inférieurs à 1 Mbit/s, ce qui entraîne la suppression des deux niveaux de qualité les plus bas dans la réponse.</span><span class="sxs-lookup"><span data-stu-id="12a97-164">The "ott" filter specifies to remove all bitrates below 1Mbps, which resulted in the bottom two quality levels being stripped off in the response.</span></span>  <span data-ttu-id="12a97-165">Dans la partie inférieure droite apparaît le manifeste HLS auquel un filtre nommé « mobile » a été appliqué.</span><span class="sxs-lookup"><span data-stu-id="12a97-165">In the bottom right,   the HLS manifest to which a filter named "mobile" was applied is shown.</span></span> <span data-ttu-id="12a97-166">Le filtre « mobile » indique de supprimer les rendus pour lesquels la résolution est supérieure à 720 p, ce qui entraîne la suppression des deux rendus à 1 080 p.</span><span class="sxs-lookup"><span data-stu-id="12a97-166">The "mobile" filter specifies to remove renditions where the resolution is larger than 720p, which resulted in the two 1080p renditions being stripped off.</span></span>

![Filtrage de rendu][renditions1]

## <a name="removing-language-tracks"></a><span data-ttu-id="12a97-168">Suppression des pistes de langue</span><span class="sxs-lookup"><span data-stu-id="12a97-168">Removing language tracks</span></span>
<span data-ttu-id="12a97-169">Vos éléments multimédias peuvent inclure plusieurs langues audio telles que l'anglais, l'espagnol, le français, etc. Généralement, le Kit de développement logiciel (SDK) du lecteur gère la sélection de pistes audio par défaut et les pistes audio disponibles par sélection de l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="12a97-169">Your assets might include multiple audio languages such as English, Spanish, French, etc. Usually, the Player SDK managers default audio track selection and available audio tracks per user selection.</span></span> <span data-ttu-id="12a97-170">Il est difficile de développer ces Kits de développement logiciel (SDK) de lecteur, car différentes implémentations sont requises entre les infrastructures de lecteur propres aux appareils.</span><span class="sxs-lookup"><span data-stu-id="12a97-170">It is challenging to develop such Player SDKs, it requires different implementations across device-specific player-frameworks.</span></span> <span data-ttu-id="12a97-171">De plus, sur certaines plateformes, les API de lecteur sont limitées et n'incluent pas de fonctionnalité de sélection audio, ce qui ne permet pas aux utilisateurs de sélectionner ou de modifier la piste audio par défaut. Avec les filtres d'éléments multimédias, vous pouvez contrôler le comportement en créant des filtres qui incluent uniquement les langues audio souhaitées.</span><span class="sxs-lookup"><span data-stu-id="12a97-171">Also, on some platforms, Player APIs are limited and do not include audio selection feature where users cannot select or change the default audio track. With asset filters, you can control the behavior by creating filters that only include desired audio languages.</span></span>

![Filtrage des pistes de langue][language_filter]

## <a name="trimming-start-of-an-asset"></a><span data-ttu-id="12a97-173">Découpage du début d'un élément multimédia</span><span class="sxs-lookup"><span data-stu-id="12a97-173">Trimming start of an asset</span></span>
<span data-ttu-id="12a97-174">Pour la plupart des événements de diffusion en continu en direct, les opérateurs exécutent des tests avant l'événement réel.</span><span class="sxs-lookup"><span data-stu-id="12a97-174">In most live streaming events, operators run some tests before the actual event.</span></span> <span data-ttu-id="12a97-175">Par exemple, ils peuvent inclure une ardoise comme celle-ci avant le début de l'événement : « Le programme va commencer dans un instant.</span><span class="sxs-lookup"><span data-stu-id="12a97-175">For example, they might include a slate like this before the start of the event: "Program will begin momentarily".</span></span> <span data-ttu-id="12a97-176">» Si le programme est archivé, le test et les données de l'ardoise le sont également et ils sont donc inclus dans la présentation.</span><span class="sxs-lookup"><span data-stu-id="12a97-176">If the program is archiving, the test and slate data are also archived and will be included in the presentation.</span></span> <span data-ttu-id="12a97-177">Toutefois, ces informations ne doivent pas être montrées aux clients.</span><span class="sxs-lookup"><span data-stu-id="12a97-177">However, this information should not be shown to the clients.</span></span> <span data-ttu-id="12a97-178">Avec un manifeste dynamique, vous pouvez créer un filtre sur l'heure de début et supprimer les données indésirables du manifeste.</span><span class="sxs-lookup"><span data-stu-id="12a97-178">With Dynamic Manifest, you can create a start time filter and remove the unwanted data from the manifest.</span></span>

![Découpage du début][trim_filter]

## <a name="creating-sub-clips-views-from-a-live-archive"></a><span data-ttu-id="12a97-180">Création de sous-clips (vues) à partir d'une archive en direct</span><span class="sxs-lookup"><span data-stu-id="12a97-180">Creating sub-clips (views) from a live archive</span></span>
<span data-ttu-id="12a97-181">De nombreux événements en direct ont une durée d'exécution longue et une archive en direct peut inclure plusieurs événements.</span><span class="sxs-lookup"><span data-stu-id="12a97-181">Many live events are long running and live archive might include multiple events.</span></span> <span data-ttu-id="12a97-182">Une fois l'événement en direct terminé, les diffuseurs peuvent décomposer l'archive en direct en séquences de démarrage et d'arrêt du programme logiques.</span><span class="sxs-lookup"><span data-stu-id="12a97-182">After the live event ends broadcasters may want to break up the live archive into logical program start and stop sequences.</span></span> <span data-ttu-id="12a97-183">Ensuite, il suffit de publier ces programmes virtuels séparément sans post-traitement de l'archive en direct et sans créer d'éléments multimédias distincts (qui ne bénéficieront pas des fragments mis en cache existants dans les CDN).</span><span class="sxs-lookup"><span data-stu-id="12a97-183">Then, publish these virtual programs separately without post processing the live archive and not creating separate assets (which will not get benefit of the existing cached fragments in the CDNs).</span></span> <span data-ttu-id="12a97-184">Par exemple, ces programmes virtuels (sous-clips) peuvent correspondre aux mi-temps d'un match de football ou de basket, aux tours de batte au base-ball ou à des événements individuels d'une journée des Jeux Olympiques.</span><span class="sxs-lookup"><span data-stu-id="12a97-184">Examples of such virtual programs (sub-clips) are the quarters of a football or basketball game, the innings in baseball, or individual events of an afternoon of Olympics program.</span></span>

<span data-ttu-id="12a97-185">Avec un manifeste dynamique, vous pouvez créer des filtres en utilisant des heures de début/fin et créer des vues virtuelles par-dessus votre archive en direct.</span><span class="sxs-lookup"><span data-stu-id="12a97-185">With Dynamic Manifest, you can create filters using start/end times and create virtual views over the top of your live archive.</span></span> 

![Filtre de sous-clip][subclip_filter]

<span data-ttu-id="12a97-187">Élément multimédia filtré :</span><span class="sxs-lookup"><span data-stu-id="12a97-187">Filtered Asset:</span></span>

![Ski][skiing]

## <a name="adjusting-presentation-window-dvr"></a><span data-ttu-id="12a97-189">Ajustement de la fenêtre de présentation (DVR)</span><span class="sxs-lookup"><span data-stu-id="12a97-189">Adjusting Presentation Window (DVR)</span></span>
<span data-ttu-id="12a97-190">Actuellement, Azure Media Services propose une archive circulaire où la durée peut être configurée entre 5 minutes et 25 heures.</span><span class="sxs-lookup"><span data-stu-id="12a97-190">Currently, Azure Media Services offers circular archive where the duration can be configured between 5 minutes - 25 hours.</span></span> <span data-ttu-id="12a97-191">Le filtrage de manifeste peut servir à créer une fenêtre DVR de substitution par-dessus l'archive, sans supprimer le média.</span><span class="sxs-lookup"><span data-stu-id="12a97-191">Manifest filtering can be used to create a rolling DVR window over the top of the archive, without deleting media.</span></span> <span data-ttu-id="12a97-192">Il existe de nombreux scénarios où les diffuseurs veulent fournir une fenêtre DVR limitée qui se déplace avec le bord en direct et qui garde en même temps une plus grande fenêtre d'archivage.</span><span class="sxs-lookup"><span data-stu-id="12a97-192">There are many scenarios where broadcasters want to provide a limited DVR window which moves with the live edge and at the same time keep a bigger archiving window.</span></span> <span data-ttu-id="12a97-193">Un diffuseur peut utiliser les données en dehors de la fenêtre DVR pour mettre en avant des clips ou il peut proposer des fenêtres DVR différentes pour différents appareils.</span><span class="sxs-lookup"><span data-stu-id="12a97-193">A broadcaster may want to use the data that is out of the DVR window to highlight clips, or he\she may want to provide different DVR windows for different devices.</span></span> <span data-ttu-id="12a97-194">Par exemple, la plupart des appareils mobiles ne gèrent pas les grandes fenêtres DVR (une fenêtre DVR peut durer 2 minutes pour les appareils mobiles quand elle dure une heure pour les clients de bureau).</span><span class="sxs-lookup"><span data-stu-id="12a97-194">For example, most of the mobile devices don’t handle big DVR windows (you can have a 2 minute DVR window for mobile devices and 1 hour for desktop clients).</span></span>

![Fenêtre DVR][dvr_filter]

## <a name="adjusting-livebackoff-live-position"></a><span data-ttu-id="12a97-196">Ajustement de LiveBackoff (position en direct)</span><span class="sxs-lookup"><span data-stu-id="12a97-196">Adjusting LiveBackoff (live position)</span></span>
<span data-ttu-id="12a97-197">Le filtrage de manifeste peut servir à supprimer plusieurs secondes à partir du bord en direct d'un programme en direct.</span><span class="sxs-lookup"><span data-stu-id="12a97-197">Manifest filtering can be used to remove several seconds from the live edge of a live program.</span></span> <span data-ttu-id="12a97-198">Cela permet aux diffuseurs de regarder la présentation sur le point de publication d'aperçu et de créer des points d'insertion d'annonce avant que les utilisateurs ne reçoivent le flux (généralement sauvegardé toutes les 30 secondes).</span><span class="sxs-lookup"><span data-stu-id="12a97-198">This allows broadcasters to watch the presentation on the preview publication point and create advertisement insertion points before the viewers receive the stream (usually backed-off by 30 seconds).</span></span> <span data-ttu-id="12a97-199">Les diffuseurs peuvent ensuite transmettre ces annonces à leurs infrastructures client à temps pour qu'ils reçoivent et traitent les informations avant l'opportunité d'annonce.</span><span class="sxs-lookup"><span data-stu-id="12a97-199">Broadcasters can then push these advertisements to their client frameworks in time for them to received and process the information before the advertisement opportunity.</span></span>

<span data-ttu-id="12a97-200">Outre la prise en charge d'annonces, LiveBackoff peut servir à ajuster la position de téléchargement en direct du client afin que lorsque les clients dérivent et atteignent le bord en direct, ils puissent toujours obtenir des fragments du serveur au lieu d'obtenir des erreurs HTTP 404 ou 412.</span><span class="sxs-lookup"><span data-stu-id="12a97-200">In addition to the advertisement support, LiveBackoff can be used for adjusting client live download position so that when clients drift and hit the live edge they can still get fragments from server instead of getting 404 or 412 HTTP errors.</span></span>

![livebackoff_filter][livebackoff_filter]

## <a name="combining-multiple-rules-in-a-single-filter"></a><span data-ttu-id="12a97-202">Combinaison de plusieurs règles dans un seul filtre</span><span class="sxs-lookup"><span data-stu-id="12a97-202">Combining multiple rules in a single filter</span></span>
<span data-ttu-id="12a97-203">Vous pouvez combiner plusieurs règles de filtrage dans un filtre unique.</span><span class="sxs-lookup"><span data-stu-id="12a97-203">You can combine multiple filtering rules in a single filter.</span></span> <span data-ttu-id="12a97-204">Par exemple, vous pouvez définir une règle de plage pour supprimer une ardoise d'une archive en direct et également filtrer les débits binaires disponibles.</span><span class="sxs-lookup"><span data-stu-id="12a97-204">As an example you can define a range rule to remove slate from a live archive and also filter available bitrates.</span></span> <span data-ttu-id="12a97-205">Pour plusieurs règles de filtrage, le résultat final est la composition (intersection uniquement) de ces règles.</span><span class="sxs-lookup"><span data-stu-id="12a97-205">For multiple filtering rules the end result is the composition (intersection only) of these rules.</span></span>

![plusieurs règles][multiple-rules]

## <a name="create-filters-programmatically"></a><span data-ttu-id="12a97-207">Création de filtres par programme</span><span class="sxs-lookup"><span data-stu-id="12a97-207">Create filters programmatically</span></span>
<span data-ttu-id="12a97-208">La rubrique suivante décrit les entités Media Services liées aux filtres.</span><span class="sxs-lookup"><span data-stu-id="12a97-208">The following topic discusses Media Services entities that are related to filters.</span></span> <span data-ttu-id="12a97-209">La rubrique indique également comment créer par programme des filtres.</span><span class="sxs-lookup"><span data-stu-id="12a97-209">The topic also shows how to programmatically create filters.</span></span>  

<span data-ttu-id="12a97-210">[Créez des filtres avec les API REST](media-services-rest-dynamic-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="12a97-210">[Create filters with REST APIs](media-services-rest-dynamic-manifest.md).</span></span>

## <a name="combining-multiple-filters-filter-composition"></a><span data-ttu-id="12a97-211">Combinaison de plusieurs filtres (composition de filtre)</span><span class="sxs-lookup"><span data-stu-id="12a97-211">Combining multiple filters (filter composition)</span></span>
<span data-ttu-id="12a97-212">Vous pouvez également combiner plusieurs filtres dans une URL unique.</span><span class="sxs-lookup"><span data-stu-id="12a97-212">You can also combine multiple filters in a single URL.</span></span> 

<span data-ttu-id="12a97-213">Le scénario suivant explique les avantages de la combinaison de filtres :</span><span class="sxs-lookup"><span data-stu-id="12a97-213">The following scenario demonstrates why you might want to combine filters:</span></span>

1. <span data-ttu-id="12a97-214">Vous devez filtrer vos qualités vidéos pour des appareils mobiles tels qu’Android ou iPAD (afin de limiter les qualités vidéos).</span><span class="sxs-lookup"><span data-stu-id="12a97-214">You need to filter your video qualities for mobile devices such as Android or iPAD (in order to limit video qualities).</span></span> <span data-ttu-id="12a97-215">Pour supprimer les qualités indésirables, vous pouvez créer un filtre global adapté aux profils de vos appareils.</span><span class="sxs-lookup"><span data-stu-id="12a97-215">To remove the unwanted qualities, you would create a global filter which is suitable for device profiles.</span></span> <span data-ttu-id="12a97-216">Comme indiqué ci-dessus, les filtres globaux peuvent être utilisés pour tous vos éléments multimédia sous le même compte Media Services sans aucune autre association.</span><span class="sxs-lookup"><span data-stu-id="12a97-216">As mentioned above, global filters can be used for all your assets under the same media services account without any further association.</span></span> 
2. <span data-ttu-id="12a97-217">Vous pouvez aussi avoir besoin d’ajuster l’heure de début et de fin d’un élément multimédia.</span><span class="sxs-lookup"><span data-stu-id="12a97-217">You also want to trim the start and end time of an asset.</span></span> <span data-ttu-id="12a97-218">Pour ce faire, il vous suffit de créer un filtre local et de définir l’heure de début et de fin.</span><span class="sxs-lookup"><span data-stu-id="12a97-218">To achieve this, you would create a local filter and set the start/end time.</span></span> 
3. <span data-ttu-id="12a97-219">Vous pouvez combiner ces deux filtres (sans combinaison, vous devez ajouter le filtrage de la qualité au filtre de réglage, ce qui compliquera l’utilisation de filtres).</span><span class="sxs-lookup"><span data-stu-id="12a97-219">You want to combine both of these filters (without combination you would need to add quality filtering to the trimming filter which will make filter usage difficult).</span></span>

<span data-ttu-id="12a97-220">Pour combiner des filtres, vous devez définir les noms de filtre dans l’URL du manifeste ou de la liste de lecture en les délimitant avec des points-virgules.</span><span class="sxs-lookup"><span data-stu-id="12a97-220">To combine filters, you need to set the filter names to the manifest/playlist URL with semicolon delimited.</span></span> <span data-ttu-id="12a97-221">Supposons que vous ayez un filtre nommé *MyMobileDevice* qui filtre les qualités et un autre nommé *MyStartTime* qui définit une heure de début spécifique.</span><span class="sxs-lookup"><span data-stu-id="12a97-221">Let’s assume you have a filter named *MyMobileDevice* that filters qualities and you have another named *MyStartTime* to set a specific start time.</span></span> <span data-ttu-id="12a97-222">Vous pouvez les combiner comme suit :</span><span class="sxs-lookup"><span data-stu-id="12a97-222">You can combine them like this:</span></span>

    http://teststreaming.streaming.mediaservices.windows.net/3d56a4d-b71d-489b-854f-1d67c0596966/64ff1f89-b430-43f8-87dd-56c87b7bd9e2.ism/Manifest(filter=MyMobileDevice;MyStartTime)

<span data-ttu-id="12a97-223">Vous pouvez combiner jusqu’à 3 filtres.</span><span class="sxs-lookup"><span data-stu-id="12a97-223">You can combine up to 3 filters.</span></span> 

<span data-ttu-id="12a97-224">Pour plus d’informations, consultez [ce blog](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) .</span><span class="sxs-lookup"><span data-stu-id="12a97-224">For more information see [this](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) blog.</span></span>

## <a name="know-issues-and-limitations"></a><span data-ttu-id="12a97-225">Problèmes connus et limitations</span><span class="sxs-lookup"><span data-stu-id="12a97-225">Know issues and limitations</span></span>
* <span data-ttu-id="12a97-226">Le manifeste dynamique fonctionne dans les limites d'un groupe d'images (GOP) (images clés), par conséquent, le découpage est précis au niveau du GOP.</span><span class="sxs-lookup"><span data-stu-id="12a97-226">Dynamic manifest operates in GOP boundaries (Key Frames) hence trimming has GOP accuracy.</span></span> 
* <span data-ttu-id="12a97-227">Vous pouvez utiliser le même nom de filtre pour les filtres locaux et globaux.</span><span class="sxs-lookup"><span data-stu-id="12a97-227">You can use same filter name for local and global filters.</span></span> <span data-ttu-id="12a97-228">Notez que le filtre local a une priorité plus élevée et remplace les filtres globaux.</span><span class="sxs-lookup"><span data-stu-id="12a97-228">Note that local filter have higher precedence and will override global filters.</span></span>
* <span data-ttu-id="12a97-229">Si vous mettez à jour un filtre, il peut falloir jusqu'à 2 minutes pour que le point de terminaison de diffusion en continu actualise les règles.</span><span class="sxs-lookup"><span data-stu-id="12a97-229">If you update a filter, it can take up to 2 minutes for streaming endpoint to refresh the rules.</span></span> <span data-ttu-id="12a97-230">Si le contenu a été servi à l'aide de filtres (puis mis en cache dans des proxys et des caches CDN), la mise à jour de ces filtres peut entraîner des défaillances du lecteur.</span><span class="sxs-lookup"><span data-stu-id="12a97-230">If the content was served using some filters (and cached in proxies and CDN caches), updating these filters can result in player failures.</span></span> <span data-ttu-id="12a97-231">Il est recommandé d'effacer le cache après la mise à jour du filtre.</span><span class="sxs-lookup"><span data-stu-id="12a97-231">It is recommend to clear the cache after updating the filter.</span></span> <span data-ttu-id="12a97-232">Si cette option n'est pas possible, envisagez d'utiliser un filtre différent.</span><span class="sxs-lookup"><span data-stu-id="12a97-232">If this option is not possible, consider using a different filter.</span></span>

## <a name="media-services-learning-paths"></a><span data-ttu-id="12a97-233">Parcours d’apprentissage de Media Services</span><span class="sxs-lookup"><span data-stu-id="12a97-233">Media Services learning paths</span></span>
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="12a97-234">Fournir des commentaires</span><span class="sxs-lookup"><span data-stu-id="12a97-234">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="see-also"></a><span data-ttu-id="12a97-235">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="12a97-235">See Also</span></span>
[<span data-ttu-id="12a97-236">Vue d’ensemble de la distribution de contenu aux clients</span><span class="sxs-lookup"><span data-stu-id="12a97-236">Delivering Content to Customers Overview</span></span>](media-services-deliver-content-overview.md)

[renditions1]: ./media/media-services-dynamic-manifest-overview/media-services-rendition-filter.png
[renditions2]: ./media/media-services-dynamic-manifest-overview/media-services-rendition-filter2.png

[rendered_subclip]: ./media/media-services-dynamic-manifests/media-services-rendered-subclip.png
[timeline_trim_event]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-event.png
[timeline_trim_subclip]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-subclip.png

[multiple-rules]:./media/media-services-dynamic-manifest-overview/media-services-multiple-rules-filters.png

[subclip_filter]: ./media/media-services-dynamic-manifest-overview/media-services-subclips-filter.png
[trim_event]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-event.png
[trim_subclip]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-subclip.png
[trim_filter]: ./media/media-services-dynamic-manifest-overview/media-services-trim-filter.png
[redered_subclip]: ./media/media-services-dynamic-manifests/media-services-rendered-subclip.png
[livebackoff_filter]: ./media/media-services-dynamic-manifest-overview/media-services-livebackoff-filter.png
[language_filter]: ./media/media-services-dynamic-manifest-overview/media-services-language-filter.png
[dvr_filter]: ./media/media-services-dynamic-manifest-overview/media-services-dvr-filter.png
[skiing]: ./media/media-services-dynamic-manifest-overview/media-services-skiing.png
