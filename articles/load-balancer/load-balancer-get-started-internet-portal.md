---
title: "Créer un équilibrage de charge accessible sur Internet à l’aide du portail Azure | Microsoft Docs"
description: "Découvrez comment créer un équilibreur de charge accessible sur Internet dans Resource Manager à l’aide du portail Azure"
services: load-balancer
documentationcenter: na
author: anavinahar
manager: narayan
editor: 
tags: azure-resource-manager
ms.assetid: aa9d26ca-3d8a-4a99-83b7-c410dd20b9d0
ms.service: load-balancer
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/23/2017
ms.author: annahar
ms.openlocfilehash: db7c328b2ba7008b9d34275341fa4bad9522b028
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="creating-an-internet-facing-load-balancer-using-the-azure-portal"></a><span data-ttu-id="929ec-103">Création d’un équilibrage de charge accessible sur Internet à l’aide du portail Azure</span><span class="sxs-lookup"><span data-stu-id="929ec-103">Creating an Internet-facing load balancer using the Azure portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="929ec-104">Portail</span><span class="sxs-lookup"><span data-stu-id="929ec-104">Portal</span></span>](../load-balancer/load-balancer-get-started-internet-portal.md)
> * [<span data-ttu-id="929ec-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="929ec-105">PowerShell</span></span>](../load-balancer/load-balancer-get-started-internet-arm-ps.md)
> * [<span data-ttu-id="929ec-106">Interface de ligne de commande Azure</span><span class="sxs-lookup"><span data-stu-id="929ec-106">Azure CLI</span></span>](../load-balancer/load-balancer-get-started-internet-arm-cli.md)
> * [<span data-ttu-id="929ec-107">Modèle</span><span class="sxs-lookup"><span data-stu-id="929ec-107">Template</span></span>](../load-balancer/load-balancer-get-started-internet-arm-template.md)

[!INCLUDE [load-balancer-get-started-internet-intro-include.md](../../includes/load-balancer-get-started-internet-intro-include.md)]

[!INCLUDE [azure-arm-classic-important-include](../../includes/azure-arm-classic-important-include.md)]

<span data-ttu-id="929ec-108">Cet article traite du modèle de déploiement de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="929ec-108">This article covers the Resource Manager deployment model.</span></span> <span data-ttu-id="929ec-109">Vous pouvez également [découvrir comment créer un équilibreur de charge accessible sur Internet à l'aide du déploiement classique](load-balancer-get-started-internet-classic-portal.md)</span><span class="sxs-lookup"><span data-stu-id="929ec-109">You can also [Learn how to create an Internet-facing load balancer using classic deployment](load-balancer-get-started-internet-classic-portal.md)</span></span>

[!INCLUDE [load-balancer-get-started-internet-scenario-include.md](../../includes/load-balancer-get-started-internet-scenario-include.md)]

<span data-ttu-id="929ec-110">Cet article décrit la séquence de tâches individuelles qui doivent être exécutées pour créer un équilibrage de charge, et explique en détail les opérations effectuées pour atteindre cet objectif.</span><span class="sxs-lookup"><span data-stu-id="929ec-110">This covers the sequence of individual tasks that have to be done to create a load balancer and explain in detail what is being done to accomplish the goal.</span></span>

## <a name="what-is-required-to-create-an-internet-facing-load-balancer"></a><span data-ttu-id="929ec-111">Ce qui est nécessaire pour créer un équilibrage de charge accessible sur Internet</span><span class="sxs-lookup"><span data-stu-id="929ec-111">What is required to create an Internet-facing load balancer?</span></span>

<span data-ttu-id="929ec-112">Vous devez créer et configurer les objets suivants pour déployer un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-112">You need to create and configure the following objects to deploy a load balancer.</span></span>

* <span data-ttu-id="929ec-113">Configuration d’adresses IP frontales : contient les adresses IP publiques pour le trafic réseau entrant.</span><span class="sxs-lookup"><span data-stu-id="929ec-113">Front-end IP configuration - contains public IP addresses for incoming network traffic.</span></span>
* <span data-ttu-id="929ec-114">Pool d’adresses principales : contient des interfaces réseau (NIC) pour que les machines virtuelles puissent recevoir le trafic réseau de l’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-114">Back-end address pool - contains network interfaces (NICs) for the virtual machines to receive network traffic from the load balancer.</span></span>
* <span data-ttu-id="929ec-115">Règles d’équilibrage de charge : contient des règles de mappage d’un port public situé sur l’équilibrage de charge pour le pool d’adresses principales.</span><span class="sxs-lookup"><span data-stu-id="929ec-115">Load balancing rules - contains rules mapping a public port on the load balancer to port in the back-end address pool.</span></span>
* <span data-ttu-id="929ec-116">Règles NAT entrantes : contient des règles de mappage d’un port public situé sur l’équilibrage de charge vers le port d’une machine virtuelle spécifique située dans le pool d’adresses principales.</span><span class="sxs-lookup"><span data-stu-id="929ec-116">Inbound NAT rules - contains rules mapping a public port on the load balancer to a port for a specific virtual machine in the back-end address pool.</span></span>
* <span data-ttu-id="929ec-117">Sondes : contient les sondes d’intégrité utilisées pour vérifier la disponibilité des instances de machines virtuelles du pool d’adresses principales.</span><span class="sxs-lookup"><span data-stu-id="929ec-117">Probes - contains health probes used to check availability of virtual machines instances in the back-end address pool.</span></span>

<span data-ttu-id="929ec-118">Pour obtenir plus d’informations sur les composants de l’équilibreur de charge avec Azure Resource Manager, consultez la page [Support Azure Resource Manager pour l’équilibreur de charge](load-balancer-arm.md).</span><span class="sxs-lookup"><span data-stu-id="929ec-118">You can get more information about load balancer components with Azure Resource Manager at [Azure Resource Manager support for Load Balancer](load-balancer-arm.md).</span></span>

## <a name="set-up-a-load-balancer-in-azure-portal"></a><span data-ttu-id="929ec-119">Configurer un équilibreur de charge dans le portail Azure</span><span class="sxs-lookup"><span data-stu-id="929ec-119">Set up a load balancer in Azure portal</span></span>

> [!IMPORTANT]
> <span data-ttu-id="929ec-120">Cet exemple suppose que vous disposez d’un réseau virtuel appelé **myVNet**.</span><span class="sxs-lookup"><span data-stu-id="929ec-120">This example assumes you have a virtual network called **myVNet**.</span></span> <span data-ttu-id="929ec-121">Pour effectuer cette opération, consultez [Créer un réseau virtuel](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) .</span><span class="sxs-lookup"><span data-stu-id="929ec-121">Refer to [create virtual network](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) to do this.</span></span> <span data-ttu-id="929ec-122">Il suppose également que vous disposez d’un sous-réseau dans **myVNet** appelé **LB-Subnet-BE** et de deux machines virtuelles appelées **web1** et **web2** respectivement dans le même groupe à haute disponibilité appelé **myAvailSet** dans **myVNet**.</span><span class="sxs-lookup"><span data-stu-id="929ec-122">It also assumes there is a subnet within **myVNet** called **LB-Subnet-BE** and two VMs called **web1** and **web2** respectively within the same availability set called **myAvailSet** in **myVNet**.</span></span> <span data-ttu-id="929ec-123">Pour créer les machines virtuelles, consultez [ce lien](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) .</span><span class="sxs-lookup"><span data-stu-id="929ec-123">Refer to [this link](../virtual-machines/virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) to create VMs.</span></span>

1. <span data-ttu-id="929ec-124">Dans un navigateur, accédez au portail Azure : [http://portal.azure.com](http://portal.azure.com) et connectez-vous avec votre compte Azure.</span><span class="sxs-lookup"><span data-stu-id="929ec-124">From a browser navigate to the Azure portal: [http://portal.azure.com](http://portal.azure.com) and login with your Azure account.</span></span>
2. <span data-ttu-id="929ec-125">Dans l’angle supérieur gauche de l’écran, cliquez sur **Nouveau** > **Mise en réseau** > **Équilibreur de charge**.</span><span class="sxs-lookup"><span data-stu-id="929ec-125">On the top left-hand side of the screen select **New** > **Networking** > **Load Balancer.**</span></span>
3. <span data-ttu-id="929ec-126">Dans le panneau **Créer un équilibreur de charge** , tapez le nom de votre équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-126">In the **Create load balancer** blade, type a name for your load balancer.</span></span> <span data-ttu-id="929ec-127">Ici, il s’appelle **myLoadBalancer**.</span><span class="sxs-lookup"><span data-stu-id="929ec-127">Here it is called **myLoadBalancer**.</span></span>
4. <span data-ttu-id="929ec-128">Sous **Type**, sélectionnez **Public**.</span><span class="sxs-lookup"><span data-stu-id="929ec-128">Under **Type**, select **Public**.</span></span>
5. <span data-ttu-id="929ec-129">Sous **Adresse IP publique**, créez une nouvelle adresse IP publique appelée **myPublicIP**.</span><span class="sxs-lookup"><span data-stu-id="929ec-129">Under **Public IP address**, create a new public IP called **myPublicIP**.</span></span>
6. <span data-ttu-id="929ec-130">Sous Groupe de ressources, sélectionnez **myRG**.</span><span class="sxs-lookup"><span data-stu-id="929ec-130">Under Resource Group, select **myRG**.</span></span> <span data-ttu-id="929ec-131">Sélectionnez l’**emplacement** approprié, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="929ec-131">Then select an appropriate **Location**, and then click **OK**.</span></span> <span data-ttu-id="929ec-132">L’équilibreur de charge commencera ensuite le déploiement, qui prendra plusieurs minutes pour se terminer avec succès.</span><span class="sxs-lookup"><span data-stu-id="929ec-132">The load balancer will then start to deploy and will take a few minutes to successfully complete deployment.</span></span>

    ![Mise à jour du groupe de ressources de l’équilibreur de charge](./media/load-balancer-get-started-internet-portal/1-load-balancer.png)

## <a name="create-a-back-end-address-pool"></a><span data-ttu-id="929ec-134">Créer un pool d’adresses principal</span><span class="sxs-lookup"><span data-stu-id="929ec-134">Create a back-end address pool</span></span>

1. <span data-ttu-id="929ec-135">Une fois votre équilibreur de charge déployé avec succès, sélectionnez-le depuis vos ressources.</span><span class="sxs-lookup"><span data-stu-id="929ec-135">Once your load balancer has successfully deployed, select it from within your resources.</span></span> <span data-ttu-id="929ec-136">Sous Paramètres, sélectionnez Pools principaux.</span><span class="sxs-lookup"><span data-stu-id="929ec-136">Under settings, select Backend Pools.</span></span> <span data-ttu-id="929ec-137">Saisissez le nom de votre pool principal.</span><span class="sxs-lookup"><span data-stu-id="929ec-137">Type a name for your backend pool.</span></span> <span data-ttu-id="929ec-138">Cliquez sur le bouton **Ajouter** en haut du panneau qui s’affiche.</span><span class="sxs-lookup"><span data-stu-id="929ec-138">Then click on the **Add** button toward the top of the blade that shows up.</span></span>
2. <span data-ttu-id="929ec-139">Cliquez sur **Ajouter une machine virtuelle** dans le panneau **Ajouter un pool principal**.</span><span class="sxs-lookup"><span data-stu-id="929ec-139">Click on **Add a virtual machine** in the **Add backend pool** blade.</span></span>  <span data-ttu-id="929ec-140">Sélectionnez **Choisir un groupe à haute disponibilité** sous **Groupe à haute disponibilité**, puis choisissez **myAvailSet**.</span><span class="sxs-lookup"><span data-stu-id="929ec-140">Select **Choose an availability set** under **Availability set** and select **myAvailSet**.</span></span> <span data-ttu-id="929ec-141">Sélectionnez **Choisir les machines virtuelles** dans la section Machines virtuelles du panneau, puis cliquez sur **web1** et **web2**, les deux machines virtuelles créées pour l’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-141">Next, select **Choose the virtual machines** under the Virtual Machines section in the blade and click on **web1** and **web2**, the two VMs created for load balancing.</span></span> <span data-ttu-id="929ec-142">Assurez-vous des coches bleues apparaissent à gauche de ces deux machines, comme le montre l’image ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="929ec-142">Ensure that both have blue check marks to the left as shown in the image below.</span></span> <span data-ttu-id="929ec-143">Cliquez ensuite sur **Sélectionner** dans ce panneau, sur OK dans le panneau **Choisir les machines virtuelles**, puis sur **OK** dans le panneau **Ajouter un pool principal**.</span><span class="sxs-lookup"><span data-stu-id="929ec-143">Then, click **Select** in that blade followed by OK in the **Choose Virtual machines** blade and then **OK** in the **Add backend pool** blade.</span></span>

    ![<span data-ttu-id="929ec-144">Ajout au pool d’adresses principal -</span><span class="sxs-lookup"><span data-stu-id="929ec-144">Adding to the backend address pool -</span></span> ](./media/load-balancer-get-started-internet-portal/3-load-balancer-backend-02.png)

3. <span data-ttu-id="929ec-145">Vérifiez que la liste déroulante de vos notifications comporte une mise à jour concernant l’enregistrement du pool principal de l’équilibreur de charge en plus de la mise à jour de l’interface réseau pour les deux machines virtuelles **web1** et **web2**.</span><span class="sxs-lookup"><span data-stu-id="929ec-145">Check to make sure your notifications drop down list has an update regarding saving the load balancer backend pool in addition to updating the network interface for both the VMs **web1** and **web2**.</span></span>

## <a name="create-a-probe-lb-rule-and-nat-rules"></a><span data-ttu-id="929ec-146">Créer une sonde, une règle d’équilibrage de charge et des règles NAT</span><span class="sxs-lookup"><span data-stu-id="929ec-146">Create a probe, LB rule, and NAT rules</span></span>

1. <span data-ttu-id="929ec-147">Créer une sonde d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="929ec-147">Create a health probe.</span></span>

    <span data-ttu-id="929ec-148">Dans les paramètres de votre équilibreur de charge, sélectionnez Sondes.</span><span class="sxs-lookup"><span data-stu-id="929ec-148">Under Settings of your load balancer, select Probes.</span></span> <span data-ttu-id="929ec-149">Cliquez ensuite sur **Ajouter** en haut du panneau.</span><span class="sxs-lookup"><span data-stu-id="929ec-149">Then click **Add** located at the top of the blade.</span></span>

    <span data-ttu-id="929ec-150">Il existe deux façons de configurer une sonde : HTTP ou TCP.</span><span class="sxs-lookup"><span data-stu-id="929ec-150">There are two ways to configure a probe: HTTP or TCP.</span></span> <span data-ttu-id="929ec-151">Cet exemple montre HTTP, mais TCP peut être configuré de la même manière.</span><span class="sxs-lookup"><span data-stu-id="929ec-151">This example shows HTTP, but TCP can be configured in a similar manner.</span></span>
    <span data-ttu-id="929ec-152">Mettez à jour les informations nécessaires.</span><span class="sxs-lookup"><span data-stu-id="929ec-152">Update the necessary information.</span></span> <span data-ttu-id="929ec-153">Comme indiqué, **myLoadBalancer** équilibrera le trafic sur le port 80.</span><span class="sxs-lookup"><span data-stu-id="929ec-153">As mentioned, **myLoadBalancer** will load balance traffic on Port 80.</span></span> <span data-ttu-id="929ec-154">Le chemin d’accès sélectionné est HealthProbe.aspx, l’intervalle est de 15 secondes, et le seuil de défaillance est 2.</span><span class="sxs-lookup"><span data-stu-id="929ec-154">The path selected is HealthProbe.aspx, Interval is 15 seconds, and Unhealthy threshold is 2.</span></span> <span data-ttu-id="929ec-155">Quand vous avez terminé, cliquez sur **OK** pour créer la sonde.</span><span class="sxs-lookup"><span data-stu-id="929ec-155">Once finished, click **OK** to create the probe.</span></span>

    <span data-ttu-id="929ec-156">Placez le pointeur sur l’icône « i » pour en savoir plus sur ces configurations individuelles et sur la façon de les modifier selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="929ec-156">Hover your pointer over the 'i' icon to learn more about these individual configurations and how they can be changed to cater to your requirements.</span></span>

    ![Ajout d'une sonde](./media/load-balancer-get-started-internet-portal/4-load-balancer-probes.png)

2. <span data-ttu-id="929ec-158">Créez une règle d’équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-158">Create a load balancer rule.</span></span>

    <span data-ttu-id="929ec-159">Cliquez sur Règles d’équilibrage de charge dans la section Paramètres de votre équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-159">Click on Load balancing rules in the Settings section of your load balancer.</span></span> <span data-ttu-id="929ec-160">Dans le nouveau panneau, cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="929ec-160">In the new blade, click on **Add**.</span></span> <span data-ttu-id="929ec-161">Nommez votre règle.</span><span class="sxs-lookup"><span data-stu-id="929ec-161">Name your rule.</span></span> <span data-ttu-id="929ec-162">Ici, HTTP.</span><span class="sxs-lookup"><span data-stu-id="929ec-162">Here, it is HTTP.</span></span> <span data-ttu-id="929ec-163">Choisissez le port frontal et le port principal.</span><span class="sxs-lookup"><span data-stu-id="929ec-163">Choose the frontend port and Backend port.</span></span> <span data-ttu-id="929ec-164">Ici, 80 est choisi pour les deux.</span><span class="sxs-lookup"><span data-stu-id="929ec-164">Here, 80 is chosen for both.</span></span> <span data-ttu-id="929ec-165">Choisissez **LB-backend** comme pool principal et l’élément précédemment créé **HealthProbe** comme sonde.</span><span class="sxs-lookup"><span data-stu-id="929ec-165">Choose **LB-backend** as your Backend pool and the previously created **HealthProbe** as the Probe.</span></span> <span data-ttu-id="929ec-166">D’autres configurations peuvent être définies selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="929ec-166">Other configurations can be set according to your requirements.</span></span> <span data-ttu-id="929ec-167">Cliquez ensuite sur OK pour enregistrer la règle d’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-167">Then click OK to save the load balancing rule.</span></span>

    ![Ajout d’une règle d’équilibrage de charge](./media/load-balancer-get-started-internet-portal/5-load-balancing-rules.png)

3. <span data-ttu-id="929ec-169">Créer des règles NAT entrantes</span><span class="sxs-lookup"><span data-stu-id="929ec-169">Create inbound NAT rules</span></span>

    <span data-ttu-id="929ec-170">Cliquez sur Règles NAT entrantes dans la section Paramètres de votre équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="929ec-170">Click on Inbound NAT rules under the settings section of your load balancer.</span></span> <span data-ttu-id="929ec-171">Dans le nouveau panneau, cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="929ec-171">In the new blade that, click **Add**.</span></span> <span data-ttu-id="929ec-172">Nommez ensuite votre règle NAT entrante.</span><span class="sxs-lookup"><span data-stu-id="929ec-172">Then name your inbound NAT rule.</span></span> <span data-ttu-id="929ec-173">Ici, elle s’appelle **inboundNATrule1**.</span><span class="sxs-lookup"><span data-stu-id="929ec-173">Here it is called **inboundNATrule1**.</span></span> <span data-ttu-id="929ec-174">La destination doit être l’adresse IP publique précédemment créée.</span><span class="sxs-lookup"><span data-stu-id="929ec-174">The destination should be the Public IP previously created.</span></span> <span data-ttu-id="929ec-175">Sélectionnez Personnalisé sous Service, puis choisissez le protocole que vous souhaitez utiliser.</span><span class="sxs-lookup"><span data-stu-id="929ec-175">Select Custom under Service and select the protocol you would like to use.</span></span> <span data-ttu-id="929ec-176">Ici, TCP est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="929ec-176">Here TCP is selected.</span></span> <span data-ttu-id="929ec-177">Entrez le port 3441 puis le port cible, 3389 dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="929ec-177">Enter the port, 3441, and the Target port, in this case, 3389.</span></span> <span data-ttu-id="929ec-178">Cliquez ensuite sur OK pour enregistrer cette règle.</span><span class="sxs-lookup"><span data-stu-id="929ec-178">then click OK to save this rule.</span></span>

    <span data-ttu-id="929ec-179">Une fois la première règle créée, répétez cette étape pour la seconde règle NAT entrante appelée inboundNATrule2, du port 3442 vers le port cible 3389.</span><span class="sxs-lookup"><span data-stu-id="929ec-179">Once the first rule is created, repeat this step for the second inbound NAT rule called inboundNATrule2 from port 3442 to Target port 3389.</span></span>

    ![Ajout d’une règle NAT entrante](./media/load-balancer-get-started-internet-portal/6-load-balancer-inbound-nat-rules.png)

## <a name="remove-a-load-balancer"></a><span data-ttu-id="929ec-181">Supprimer un équilibreur de charge</span><span class="sxs-lookup"><span data-stu-id="929ec-181">Remove a Load Balancer</span></span>

<span data-ttu-id="929ec-182">Pour supprimer un équilibreur de charge, sélectionnez l’équilibreur de charge que vous souhaitez supprimer.</span><span class="sxs-lookup"><span data-stu-id="929ec-182">To delete a load balancer, select the load balancer you want to remove.</span></span> <span data-ttu-id="929ec-183">Dans le haut du panneau *Équilibreur de charge*, cliquez sur **Supprimer**.</span><span class="sxs-lookup"><span data-stu-id="929ec-183">In the *Load Balancer* blade, click on **Delete** located at the top of the blade.</span></span> <span data-ttu-id="929ec-184">Puis sélectionnez **Oui** à l’invite.</span><span class="sxs-lookup"><span data-stu-id="929ec-184">Then select **Yes** when prompted.</span></span>

## <a name="next-steps"></a><span data-ttu-id="929ec-185">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="929ec-185">Next steps</span></span>

[<span data-ttu-id="929ec-186">Prise en main de la configuration d’un équilibrage de charge interne</span><span class="sxs-lookup"><span data-stu-id="929ec-186">Get started configuring an internal load balancer</span></span>](load-balancer-get-started-ilb-arm-cli.md)

[<span data-ttu-id="929ec-187">Configuration d'un mode de distribution d'équilibrage de charge</span><span class="sxs-lookup"><span data-stu-id="929ec-187">Configure a load balancer distribution mode</span></span>](load-balancer-distribution-mode.md)

[<span data-ttu-id="929ec-188">Configuration des paramètres du délai d’expiration TCP inactif pour votre équilibrage de charge</span><span class="sxs-lookup"><span data-stu-id="929ec-188">Configure idle TCP timeout settings for your load balancer</span></span>](load-balancer-tcp-idle-timeout.md)
