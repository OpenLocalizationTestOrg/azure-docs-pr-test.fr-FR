---
title: "Présentation de l’équilibrage de charge Azure | Microsoft Docs"
description: "Présentation des fonctionnalités, de l'architecture et de l'implémentation de l'équilibrage de charge Azure. Découvrez comment fonctionne l’équilibrage de charge et l’exploiter dans le cloud."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 0f313dc0-f007-4cee-b2b9-f542357925a3
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/24/2016
ms.author: kumud
ms.openlocfilehash: 617da1cf41db08d319d6fe9fa7bc96b794a0001e
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-load-balancer-overview"></a><span data-ttu-id="a6225-104">Vue d’ensemble de l’équilibreur de charge Azure</span><span class="sxs-lookup"><span data-stu-id="a6225-104">Azure Load Balancer overview</span></span>

<span data-ttu-id="a6225-105">L'équilibrage de charge Azure offre une haute disponibilité et des performances réseau élevées pour vos applications.</span><span class="sxs-lookup"><span data-stu-id="a6225-105">Azure Load Balancer delivers high availability and network performance to your applications.</span></span> <span data-ttu-id="a6225-106">Il s’agit d’un équilibreur de charge Layer-4 (TCP, UDP) qui distribue le trafic entrant parmi des instances saines de services définis dans un jeu à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="a6225-106">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

<span data-ttu-id="a6225-107">Azure Load Balancer peut être configuré pour :</span><span class="sxs-lookup"><span data-stu-id="a6225-107">Azure Load Balancer can be configured to:</span></span>

* <span data-ttu-id="a6225-108">équilibrer la charge du trafic Internet entrant sur les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a6225-108">Load balance incoming Internet traffic to virtual machines.</span></span> <span data-ttu-id="a6225-109">Cette configuration est appelée [équilibrage de charge avec accès par Internet](load-balancer-internet-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a6225-109">This configuration is known as [Internet-facing load balancing](load-balancer-internet-overview.md).</span></span>
* <span data-ttu-id="a6225-110">équilibrer le trafic entre des machines virtuelles dans un réseau virtuel, entre des machines virtuelles dans les services cloud ou entre des ordinateurs locaux et des machines virtuelles dans un réseau virtuel entre différents locaux.</span><span class="sxs-lookup"><span data-stu-id="a6225-110">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="a6225-111">Cette configuration est appelée [équilibrage de charge interne](load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a6225-111">This configuration is known as [internal load balancing](load-balancer-internal-overview.md).</span></span>
* <span data-ttu-id="a6225-112">transférer du trafic externe vers une instance spécifique de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a6225-112">Forward external traffic to a specific virtual machine.</span></span>

<span data-ttu-id="a6225-113">Toutes les ressources du cloud ont besoin d'une adresse IP publique pour être accessibles depuis Internet.</span><span class="sxs-lookup"><span data-stu-id="a6225-113">All resources in the cloud need a public IP address to be reachable from the Internet.</span></span> <span data-ttu-id="a6225-114">L’infrastructure de cloud dans Azure utilise des adresses IP non routables pour ses ressources.</span><span class="sxs-lookup"><span data-stu-id="a6225-114">The cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="a6225-115">Azure utilise la traduction d’adresses réseau (NAT) avec des adresses IP publiques pour communiquer avec Internet.</span><span class="sxs-lookup"><span data-stu-id="a6225-115">Azure uses network address translation (NAT) with public IP addresses to communicate to the Internet.</span></span>

## <a name="azure-deployment-models"></a><span data-ttu-id="a6225-116">Modèles de déploiement Azure</span><span class="sxs-lookup"><span data-stu-id="a6225-116">Azure deployment models</span></span>

<span data-ttu-id="a6225-117">Il est important de comprendre les différences entre les [modèles de déploiement](../azure-resource-manager/resource-manager-deployment-model.md)Azure Classic et Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a6225-117">It's important to understand the differences between the Azure classic and Resource Manager [deployment models](../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="a6225-118">Azure Load Balancer est configuré différemment selon les modèles.</span><span class="sxs-lookup"><span data-stu-id="a6225-118">Azure Load Balancer is configured differently in each model.</span></span>

### <a name="azure-classic-deployment-model"></a><span data-ttu-id="a6225-119">Modèle de déploiement classique Azure</span><span class="sxs-lookup"><span data-stu-id="a6225-119">Azure classic deployment model</span></span>

<span data-ttu-id="a6225-120">Les machines virtuelles déployées dans une limite de service cloud peuvent être regroupées afin d’utiliser un équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="a6225-120">Virtual machines deployed within a cloud service boundary can be grouped to use a load balancer.</span></span> <span data-ttu-id="a6225-121">Dans ce modèle, une adresse IP publique et un nom de domaine complet (FQDN) sont affectés à un service cloud.</span><span class="sxs-lookup"><span data-stu-id="a6225-121">In this model a public IP address and a Fully Qualified Domain Name, (FQDN) are assigned to a cloud service.</span></span> <span data-ttu-id="a6225-122">L’équilibrage de charge effectue une traduction de port et équilibre la charge du trafic réseau en utilisant l’adresse IP publique du service cloud.</span><span class="sxs-lookup"><span data-stu-id="a6225-122">The load balancer does port translation and load balances the network traffic by using the public IP address for the cloud service.</span></span>

<span data-ttu-id="a6225-123">Le trafic à charge équilibrée est défini par points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="a6225-123">Load-balanced traffic is defined by endpoints.</span></span> <span data-ttu-id="a6225-124">Les points de terminaison de traduction de port ont une relation un-à-un entre le port public affecté à l’adresse IP publique et le port local affecté au service sur une machine virtuelle spécifique.</span><span class="sxs-lookup"><span data-stu-id="a6225-124">Port translation endpoints have a one-to-one relationship between the public-assigned port of the public IP address and the local port assigned to the service on a specific virtual machine.</span></span> <span data-ttu-id="a6225-125">Les points de terminaison d’équilibrage de charge ont une relation un-à-plusieurs entre l’adresse IP publique et les ports locaux affectés aux services sur les machines virtuelles du service cloud.</span><span class="sxs-lookup"><span data-stu-id="a6225-125">Load balancing endpoints have a one-to-many relationship between the public IP address and the local ports assigned to the services on the virtual machines in the cloud service.</span></span>

![L’équilibrage de charge dans le modèle de déploiement classique](./media/load-balancer-overview/asm-lb.png)

<span data-ttu-id="a6225-127">Illustration 1 - L’équilibrage de charge dans le modèle de déploiement classique</span><span class="sxs-lookup"><span data-stu-id="a6225-127">Figure 1 - Azure Load Balancer in the classic deployment model</span></span>

<span data-ttu-id="a6225-128">Le nom de domaine de l’adresse IP publique que l’équilibreur de charge utilise pour ce modèle de déploiement est \<nom du service cloud\>.cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="a6225-128">The domain label for the public IP address that the load balancer uses for this deployment model is \<cloud service name\>.cloudapp.net.</span></span> <span data-ttu-id="a6225-129">Le graphique suivant montre Azure Load Balancer dans ce modèle.</span><span class="sxs-lookup"><span data-stu-id="a6225-129">The following graphic shows the Azure Load Balancer in this model.</span></span>

### <a name="azure-resource-manager-deployment-model"></a><span data-ttu-id="a6225-130">Modèle de déploiement Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a6225-130">Azure Resource Manager deployment model</span></span>

<span data-ttu-id="a6225-131">Dans le modèle de déploiement Resource Manager, il n’est pas nécessaire de créer un service cloud.</span><span class="sxs-lookup"><span data-stu-id="a6225-131">In the Resource Manager deployment model there is no need to create a Cloud service.</span></span> <span data-ttu-id="a6225-132">L’équilibreur de charge est créé explicitement pour acheminer le trafic entre plusieurs machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a6225-132">The load balancer is created to explicitly route traffic among multiple virtual machines.</span></span>

<span data-ttu-id="a6225-133">Une adresse IP publique est une ressource individuelle qui a une étiquette de domaine (nom DNS).</span><span class="sxs-lookup"><span data-stu-id="a6225-133">A public IP address is an individual resource that has a domain label (DNS name).</span></span> <span data-ttu-id="a6225-134">L’adresse IP publique est associée à la ressource d’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="a6225-134">The public IP address is associated with the load balancer resource.</span></span> <span data-ttu-id="a6225-135">Les règles d’équilibrage de charge et les règles NAT entrantes utilisent l’adresse IP publique comme point de terminaison Internet pour les ressources recevant le trafic réseau à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="a6225-135">Load balancer rules and inbound NAT rules use the public IP address as the Internet endpoint for the resources that are receiving load-balanced network traffic.</span></span>

<span data-ttu-id="a6225-136">Une adresse IP privée ou publique est affectée à la ressource d’interface réseau associée à une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a6225-136">A private or public IP address is assigned to the network interface resource attached to a virtual machine.</span></span> <span data-ttu-id="a6225-137">Une fois l’interface réseau ajoutée au pool d’adresses IP principales de l’équilibreur de charge, ce dernier est capable d’envoyer le trafic réseau à charge équilibrée selon les règles à charge équilibrée créées.</span><span class="sxs-lookup"><span data-stu-id="a6225-137">Once a network interface is added to a load balancer's back-end IP address pool, the load balancer is able to send load-balanced network traffic based on the load-balanced rules that are created.</span></span>

<span data-ttu-id="a6225-138">Le graphique suivant montre Azure Load Balancer dans ce modèle :</span><span class="sxs-lookup"><span data-stu-id="a6225-138">The following graphic shows the Azure Load Balancer in this model:</span></span>

![L’équilibrage de charge Azure dans Resource Manager](./media/load-balancer-overview/arm-lb.png)

<span data-ttu-id="a6225-140">Illustration 2 - L’équilibrage de charge Azure dans Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a6225-140">Figure 2 - Azure Load Balancer in Resource Manager</span></span>

<span data-ttu-id="a6225-141">L’équilibrage de charge peut maintenant être géré à l’aide des outils, modèles et API de Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a6225-141">The load balancer can be managed through Resource Manager-based templates, APIs, and tools.</span></span> <span data-ttu-id="a6225-142">Pour plus d’informations sur Resource Manager, consultez la [Présentation de Resource Manager](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a6225-142">To learn more about Resource Manager, see the [Resource Manager overview](../azure-resource-manager/resource-group-overview.md).</span></span>

## <a name="load-balancer-features"></a><span data-ttu-id="a6225-143">Fonctionnalités d’équilibrage de charge</span><span class="sxs-lookup"><span data-stu-id="a6225-143">Load Balancer features</span></span>

* <span data-ttu-id="a6225-144">Distribution basée sur le hachage</span><span class="sxs-lookup"><span data-stu-id="a6225-144">Hash-based distribution</span></span>

    <span data-ttu-id="a6225-145">L'Équilibrage de charge Azure utilise un algorithme de distribution basé sur le hachage.</span><span class="sxs-lookup"><span data-stu-id="a6225-145">Azure Load Balancer uses a hash-based distribution algorithm.</span></span> <span data-ttu-id="a6225-146">Par défaut, il utilise un hachage à 5 tuples composé de l’adresse IP source, du port source, de l’adresse IP de destination, du port de destination et du type de protocole pour mapper le trafic vers les serveurs disponibles.</span><span class="sxs-lookup"><span data-stu-id="a6225-146">By default, it uses a 5-tuple hash composed of source IP, source port, destination IP, destination port, and protocol type to map traffic to available servers.</span></span> <span data-ttu-id="a6225-147">Il fournit l’adhérence uniquement *dans* une session de transport.</span><span class="sxs-lookup"><span data-stu-id="a6225-147">It provides stickiness only *within* a transport session.</span></span> <span data-ttu-id="a6225-148">Les paquets de la même session TCP ou UDP sont dirigés vers la même instance derrière le point de terminaison à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="a6225-148">Packets in the same TCP or UDP session will be directed to the same instance behind the load-balanced endpoint.</span></span> <span data-ttu-id="a6225-149">Lorsque le client ferme et rouvre la connexion ou démarre une nouvelle session à partir de la même adresse IP source, le port source change.</span><span class="sxs-lookup"><span data-stu-id="a6225-149">When the client closes and reopens the connection or starts a new session from the same source IP, the source port changes.</span></span> <span data-ttu-id="a6225-150">Cela peut pousser le trafic à accéder à un autre point de terminaison dans un autre centre de données.</span><span class="sxs-lookup"><span data-stu-id="a6225-150">This may cause the traffic to go to a different endpoint in a different datacenter.</span></span>

    <span data-ttu-id="a6225-151">Pour en savoir plus, consultez [Mode de distribution de l’équilibrage de charge](load-balancer-distribution-mode.md).</span><span class="sxs-lookup"><span data-stu-id="a6225-151">For more details, see [Load balancer distribution mode](load-balancer-distribution-mode.md).</span></span> <span data-ttu-id="a6225-152">Le graphique suivant montre la distribution basée sur le hachage :</span><span class="sxs-lookup"><span data-stu-id="a6225-152">The following graphic shows the hash-based distribution:</span></span>

    ![Distribution basée sur le hachage](./media/load-balancer-overview/load-balancer-distribution.png)

    <span data-ttu-id="a6225-154">Figure 3 : distribution basée sur le hachage</span><span class="sxs-lookup"><span data-stu-id="a6225-154">Figure 3 - Hash based distribution</span></span>

* <span data-ttu-id="a6225-155">Réacheminement de port</span><span class="sxs-lookup"><span data-stu-id="a6225-155">Port forwarding</span></span>

    <span data-ttu-id="a6225-156">L'équilibrage de charge Azure vous permet de contrôler la gestion des communications entrantes.</span><span class="sxs-lookup"><span data-stu-id="a6225-156">Azure Load Balancer gives you control over how inbound communication is managed.</span></span> <span data-ttu-id="a6225-157">Ces communications comprennent le trafic initié par des hôtes Internet, des machines virtuelles dans d'autres services cloud ou des réseaux virtuels.</span><span class="sxs-lookup"><span data-stu-id="a6225-157">This communication includes traffic initiated from Internet hosts, virtual machines in other cloud services, or virtual networks.</span></span> <span data-ttu-id="a6225-158">Ce contrôle est représenté par un point de terminaison (également appelé point de terminaison d'entrée).</span><span class="sxs-lookup"><span data-stu-id="a6225-158">This control is represented by an endpoint (also called an input endpoint).</span></span>

    <span data-ttu-id="a6225-159">Un point de terminaison d’entrée écoute sur un port public et transmet le trafic vers un port interne.</span><span class="sxs-lookup"><span data-stu-id="a6225-159">An input endpoint listens on a public port and forwards traffic to an internal port.</span></span> <span data-ttu-id="a6225-160">Vous pouvez mapper les mêmes ports pour un point de terminaison interne ou externe, ou utiliser un port différent.</span><span class="sxs-lookup"><span data-stu-id="a6225-160">You can map the same ports for an internal or external endpoint or use a different port for them.</span></span> <span data-ttu-id="a6225-161">Par exemple : vous pouvez avoir une écoute configurée du serveur web sur le port 81 alors que le mappage de point de terminaison public est le port 80.</span><span class="sxs-lookup"><span data-stu-id="a6225-161">For example, you can have a web server configured to listen to port 81 while the public endpoint mapping is port 80.</span></span> <span data-ttu-id="a6225-162">La création d’un point de terminaison public déclenche la création d’une instance d’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="a6225-162">The creation of a public endpoint triggers the creation of a load balancer instance.</span></span>

    <span data-ttu-id="a6225-163">En cas de création avec le Portail Azure, le portail crée automatiquement des points de terminaison sur la machine virtuelle pour le trafic RDP (Remote Desktop Protocol) et de la session Windows PowerShell distante.</span><span class="sxs-lookup"><span data-stu-id="a6225-163">When created using the Azure portal, the portal automatically creates endpoints to the virtual machine for the Remote Desktop Protocol (RDP) and remote Windows PowerShell session traffic.</span></span> <span data-ttu-id="a6225-164">Vous pouvez utiliser ces points de terminaison pour administrer à distance la machine virtuelle sur Internet.</span><span class="sxs-lookup"><span data-stu-id="a6225-164">You can use these endpoints to remotely administer the virtual machine over the Internet.</span></span>

* <span data-ttu-id="a6225-165">Reconfiguration automatique</span><span class="sxs-lookup"><span data-stu-id="a6225-165">Automatic reconfiguration</span></span>

    <span data-ttu-id="a6225-166">L'équilibrage de charge Azure se reconfigure instantanément lors de la mise à l'échelle d'instances vers le haut ou vers le bas.</span><span class="sxs-lookup"><span data-stu-id="a6225-166">Azure Load Balancer instantly reconfigures itself when you scale instances up or down.</span></span> <span data-ttu-id="a6225-167">Cette reconfiguration se produit, par exemple, lorsque l’on augmente le nombre d’instances de rôles Web/de travail dans un service cloud ou lorsque l’on ajoute des machines virtuelles supplémentaires dans le même jeu à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="a6225-167">For example, this reconfiguration happens when you increase the instance count for web/worker roles in a cloud service or when you add additional virtual machines into the same load-balanced set.</span></span>

* <span data-ttu-id="a6225-168">Surveillance des services</span><span class="sxs-lookup"><span data-stu-id="a6225-168">Service monitoring</span></span>

    <span data-ttu-id="a6225-169">Azure Load Balancer peut tester l’intégrité des différentes instances de serveur.</span><span class="sxs-lookup"><span data-stu-id="a6225-169">Azure Load Balancer can probe the health of the various server instances.</span></span> <span data-ttu-id="a6225-170">Lorsqu’une sonde ne répond pas, l’équilibrage de charge n’envoie plus de nouvelles connexions aux instances défaillantes.</span><span class="sxs-lookup"><span data-stu-id="a6225-170">When a probe fails to respond, the load balancer stops sending new connections to the unhealthy instances.</span></span> <span data-ttu-id="a6225-171">Les connexions existantes ne sont pas concernées.</span><span class="sxs-lookup"><span data-stu-id="a6225-171">Existing connections are not impacted.</span></span>

    <span data-ttu-id="a6225-172">Trois types de sondes sont pris en charge :</span><span class="sxs-lookup"><span data-stu-id="a6225-172">Three types of probes are supported:</span></span>

    + <span data-ttu-id="a6225-173">**Sonde d’agent invité (sur machines virtuelles de plateforme en tant que service uniquement)** : l’équilibrage de charge utilise l’agent invité dans la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a6225-173">**Guest agent probe (on Platform as a Service Virtual Machines only):** The load balancer utilizes the guest agent inside the virtual machine.</span></span> <span data-ttu-id="a6225-174">L’agent invité écoute et répond HTTP 200 OK uniquement lorsque l’instance est prête (c’est-à-dire qu’elle ne se trouve pas dans un état de type occupé, recyclage ou arrêt).</span><span class="sxs-lookup"><span data-stu-id="a6225-174">The guest agent listens and responds with an HTTP 200 OK response only when the instance is in the ready state (i.e. the instance is not in a state like busy, recycling, or stopping).</span></span> <span data-ttu-id="a6225-175">Si l’agent ne répond pas HTTP 200 OK, l’équilibreur de charge marque l’instance comme ne répondant pas et arrête d’envoyer du trafic vers cette instance.</span><span class="sxs-lookup"><span data-stu-id="a6225-175">If the agent fails to respond with an HTTP 200 OK, the load balancer marks the instance as unresponsive and stops sending traffic to that instance.</span></span> <span data-ttu-id="a6225-176">L’équilibreur de charge continue d’effectuer un test ping sur l’instance.</span><span class="sxs-lookup"><span data-stu-id="a6225-176">The load balancer continues to ping the instance.</span></span> <span data-ttu-id="a6225-177">Si l’agent invité répond avec un HTTP 200, l’équilibrage de charge envoie à nouveau du trafic vers cette instance.</span><span class="sxs-lookup"><span data-stu-id="a6225-177">If the guest agent responds with an HTTP 200, the load balancer will send traffic to that instance again.</span></span> <span data-ttu-id="a6225-178">Lorsque vous utilisez un rôle web, le code de votre site web s'exécute généralement dans w3wp.exe, qui n'est pas surveillé par l'agent Azure Fabric ou l'agent invité.</span><span class="sxs-lookup"><span data-stu-id="a6225-178">When you're using a web role, your website code typically runs in w3wp.exe, which is not monitored by the Azure fabric or guest agent.</span></span> <span data-ttu-id="a6225-179">Cela signifie que les échecs dans w3wp.exe (par exemple, les réponses HTTP 500) ne seront pas signalés à l’agent invité et l’équilibrage de charge ne saura pas qu’il doit placer cette instance hors service.</span><span class="sxs-lookup"><span data-stu-id="a6225-179">This means that failures in w3wp.exe (e.g. HTTP 500 responses) will not be reported to the guest agent, and the load balancer will not know to take that instance out of rotation.</span></span>
    + <span data-ttu-id="a6225-180">**Sonde personnalisée HTTP :** cette sonde remplace la sonde (agent invité) par défaut.</span><span class="sxs-lookup"><span data-stu-id="a6225-180">**HTTP custom probe:** This probe overrides the default (guest agent) probe.</span></span> <span data-ttu-id="a6225-181">Vous pouvez l'utiliser pour créer votre propre logique personnalisée pour déterminer l'état de l'instance de rôle.</span><span class="sxs-lookup"><span data-stu-id="a6225-181">You can use it to create your own custom logic to determine the health of the role instance.</span></span> <span data-ttu-id="a6225-182">L’équilibrage de charge sonde régulièrement votre point de terminaison (toutes les 15 secondes, par défaut).</span><span class="sxs-lookup"><span data-stu-id="a6225-182">The load balancer will regularly probe your endpoint (every 15 seconds, by default).</span></span> <span data-ttu-id="a6225-183">L’instance est considérée comme en service si elle répond avec le code de statut HTTP 200 ou un paquet TCP ACK dans le délai imparti (31 secondes par défaut).</span><span class="sxs-lookup"><span data-stu-id="a6225-183">The instance is considered to be in rotation if it responds with a TCP ACK or HTTP 200 within the timeout period (default of 31 seconds).</span></span> <span data-ttu-id="a6225-184">C’est utile pour implémenter votre propre logique afin de supprimer des instances de l’équilibreur de charge.</span><span class="sxs-lookup"><span data-stu-id="a6225-184">This is useful for implementing your own logic to remove instances from the load balancer's rotation.</span></span> <span data-ttu-id="a6225-185">Vous pouvez, par exemple, configurer l'instance pour qu'elle renvoie un état autre que 200 si l'instance a une utilisation supérieure à 90 % de l'UC.</span><span class="sxs-lookup"><span data-stu-id="a6225-185">For example, you can configure the instance to return a non-200 status if the instance is above 90% CPU.</span></span> <span data-ttu-id="a6225-186">Pour les rôles Web utilisant w3wp.exe, vous obtenez également une analyse automatique de votre site web, dans la mesure où les erreurs dans votre code de site web renvoient un état autre que 200 à la sonde.</span><span class="sxs-lookup"><span data-stu-id="a6225-186">For web roles that use w3wp.exe, you also get automatic monitoring of your website, since failures in your website code return a non-200 status to the probe.</span></span>
    + <span data-ttu-id="a6225-187">**Sonde personnalisée TCP :** cette sonde s’appuie sur l’établissement réussi d’une session TCP sur un port de sonde défini.</span><span class="sxs-lookup"><span data-stu-id="a6225-187">**TCP custom probe:** This probe relies on successful TCP session establishment to a defined probe port.</span></span>

    <span data-ttu-id="a6225-188">Pour plus d’informations, consultez le [schéma LoadBalancerProbe](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span><span class="sxs-lookup"><span data-stu-id="a6225-188">For more information, see the [LoadBalancerProbe schema](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span></span>

* <span data-ttu-id="a6225-189">Source NAT</span><span class="sxs-lookup"><span data-stu-id="a6225-189">Source NAT</span></span>

    <span data-ttu-id="a6225-190">Tout le trafic sortant vers Internet à partir de votre service d’origine passe par SNAT (Source NAT) avec la même adresse IP virtuelle que le trafic entrant.</span><span class="sxs-lookup"><span data-stu-id="a6225-190">All outbound traffic to the Internet that originates from your service undergoes source NAT (SNAT) by using the same VIP address as the incoming traffic.</span></span> <span data-ttu-id="a6225-191">SNAT offre des avantages importants :</span><span class="sxs-lookup"><span data-stu-id="a6225-191">SNAT provides important benefits:</span></span>

    + <span data-ttu-id="a6225-192">il permet une mise à niveau et une récupération d'urgence simples des services, étant donné que l'adresse IP virtuelle peut être dynamiquement mappée à une autre instance du service ;</span><span class="sxs-lookup"><span data-stu-id="a6225-192">It enables easy upgrade and disaster recovery of services, since the VIP can be dynamically mapped to another instance of the service.</span></span>
    + <span data-ttu-id="a6225-193">Il facilite la gestion des listes de contrôle d’accès (ACL).</span><span class="sxs-lookup"><span data-stu-id="a6225-193">It makes access control list (ACL) management easier.</span></span> <span data-ttu-id="a6225-194">Les ACL exprimées sous forme d’adresses IP virtuelles ne changent pas lorsque les services montent en puissance, descendent en puissance ou sont redéployés.</span><span class="sxs-lookup"><span data-stu-id="a6225-194">ACLs expressed in terms of VIPs do not change as services scale up, down, or get redeployed.</span></span>

    <span data-ttu-id="a6225-195">La configuration de l’équilibrage de charge prend en charge le NAT « plein cône » pour UDP.</span><span class="sxs-lookup"><span data-stu-id="a6225-195">The load balancer configuration supports full cone NAT for UDP.</span></span> <span data-ttu-id="a6225-196">Le NAT« plein cône » est un type de NAT où le port autorise les connexions entrantes à partir de n’importe quel hôte externe (en réponse à une requête sortante).</span><span class="sxs-lookup"><span data-stu-id="a6225-196">Full cone NAT is a type of NAT where the port allows inbound connections from any external host (in response to an outbound request).</span></span>

    <span data-ttu-id="a6225-197">Pour chaque nouvelle connexion sortante initiée par une machine virtuelle, un port sortant est également alloué par l’équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="a6225-197">For each new outbound connection that a virtual machine initiates, an outbound port is also allocated by the load balancer.</span></span> <span data-ttu-id="a6225-198">L’hôte externe voit le trafic avec un port alloué à une adresse IP virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a6225-198">The external host sees traffic with a virtual IP (VIP)-allocated port.</span></span> <span data-ttu-id="a6225-199">Pour les scénarios exigeant un grand nombre de connexions sortantes, il est recommandé d’utiliser des adresses [IP publiques de niveau d’instance](../virtual-network/virtual-networks-instance-level-public-ip.md) afin que les machines virtuelles disposent d’une adresse IP sortante dédiée pour SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6225-199">For scenarios that require a large number of outbound connections, it is recommended to use [instance-level public IP](../virtual-network/virtual-networks-instance-level-public-ip.md) addresses so that the VMs have a dedicated outbound IP address for SNAT.</span></span> <span data-ttu-id="a6225-200">Cela réduit le risque d’épuisement du port.</span><span class="sxs-lookup"><span data-stu-id="a6225-200">This reduces the risk of port exhaustion.</span></span>

    <span data-ttu-id="a6225-201">Consultez l’article [connexions sortantes](load-balancer-outbound-connections.md) pour plus d’informations sur ce sujet.</span><span class="sxs-lookup"><span data-stu-id="a6225-201">Please see [outbound connections](load-balancer-outbound-connections.md) article for more details on this topic.</span></span>

### <a name="support-for-multiple-load-balanced-ip-addresses-for-virtual-machines"></a><span data-ttu-id="a6225-202">Prise en charge de plusieurs adresses IP à équilibrage de charge pour les machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="a6225-202">Support for multiple load-balanced IP addresses for virtual machines</span></span>
<span data-ttu-id="a6225-203">Vous pouvez affecter plusieurs adresses IP publiques à charge équilibrée à un jeu de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a6225-203">You can assign more than one load-balanced public IP address to a set of virtual machines.</span></span> <span data-ttu-id="a6225-204">Cela vous permet d'héberger plusieurs sites Web SSL et/ou plusieurs écouteurs de groupe de disponibilité SQL Server Always On sur le même jeu de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a6225-204">With this ability, you can host multiple SSL websites and/or multiple SQL Server AlwaysOn Availability Group listeners on the same set of virtual machines.</span></span> <span data-ttu-id="a6225-205">Pour en savoir plus, consultez [Plusieurs adresses IP virtuelles par service cloud](load-balancer-multivip.md).</span><span class="sxs-lookup"><span data-stu-id="a6225-205">For more information, see [Multiple VIPs per cloud service](load-balancer-multivip.md).</span></span>

[!INCLUDE [load-balancer-compare-tm-ag-lb-include.md](../../includes/load-balancer-compare-tm-ag-lb-include.md)]

## <a name="limitations"></a><span data-ttu-id="a6225-206">Limites</span><span class="sxs-lookup"><span data-stu-id="a6225-206">Limitations</span></span>

<span data-ttu-id="a6225-207">Les pools back-end d’équilibreur de charge peuvent héberger toutes les références SKU de machines virtuelles, sauf le niveau De base.</span><span class="sxs-lookup"><span data-stu-id="a6225-207">Load Balancer backend pools can contain any VM SKU except Basic tier.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a6225-208">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a6225-208">Next steps</span></span>

- <span data-ttu-id="a6225-209">En savoir plus sur l’[équilibrage de charge accessible sur Internet](load-balancer-internet-overview.md)</span><span class="sxs-lookup"><span data-stu-id="a6225-209">Learn more about [Internet-facing load balancer](load-balancer-internet-overview.md)</span></span>

- <span data-ttu-id="a6225-210">En savoir plus sur l’[équilibrage de charge interne](load-balancer-internal-overview.md)</span><span class="sxs-lookup"><span data-stu-id="a6225-210">Learn more about [Internal load balancer overview](load-balancer-internal-overview.md)</span></span>

- <span data-ttu-id="a6225-211">Créer un [équilibrage de charge accessible sur Internet](load-balancer-get-started-internet-portal.md)</span><span class="sxs-lookup"><span data-stu-id="a6225-211">Create an [Internet-facing load balancer](load-balancer-get-started-internet-portal.md)</span></span>

- <span data-ttu-id="a6225-212">Découvrir les autres [fonctionnalités de réseau](../networking/networking-overview.md) clés d’Azure</span><span class="sxs-lookup"><span data-stu-id="a6225-212">Learn about some of the other key [networking capabilities](../networking/networking-overview.md) of Azure</span></span>

