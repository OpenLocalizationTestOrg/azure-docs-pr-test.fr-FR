---
title: aaaAuthentication et une autorisation pour API Apps dans Azure App Service | Documents Microsoft
description: "En savoir plus sur les services d’authentification et d’autorisation hello du Service d’applications Azure fournit des applications de l’API."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="f018a-103">Authentification et autorisation pour API Apps dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="f018a-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="f018a-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="f018a-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="f018a-105">Cette rubrique sera migré tooa consolidé [App Service authentification / autorisation](../app-service/app-service-authentication-overview.md) rubrique, qui couvre les applications API Web et Mobile.</span><span class="sxs-lookup"><span data-stu-id="f018a-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="f018a-106">Azure App Service offre des services d’authentification et d’autorisation intégrés qui implémentent [OAuth 2.0](#oauth) et [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="f018a-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="f018a-107">Cet article décrit les services hello et options sont disponibles pour les applications API dans Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="f018a-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="f018a-108">Hello suivant le diagramme illustre certaines caractéristiques clés de l’authentification du Service d’application :</span><span class="sxs-lookup"><span data-stu-id="f018a-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="f018a-109">Il prétraite les demandes entrantes de l’API, ce qui signifie qu’il est compatible avec n’importe quel langage ou framework pris en charge par App Service.</span><span class="sxs-lookup"><span data-stu-id="f018a-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="f018a-110">Elle vous offre plusieurs options pour l’authentification de la quantité de travail vous souhaitez toodo dans votre propre code.</span><span class="sxs-lookup"><span data-stu-id="f018a-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="f018a-111">Il fonctionne aussi bien pour l’authentification de l’utilisateur final que pour celle du compte de service.</span><span class="sxs-lookup"><span data-stu-id="f018a-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="f018a-112">Il prend en charge cinq fournisseurs d’identité : Azure Active Directory, Facebook, Google, Twitter et Compte Microsoft.</span><span class="sxs-lookup"><span data-stu-id="f018a-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="f018a-113">Elle fonctionne même hello pour les applications API, les applications Web et les applications mobiles.</span><span class="sxs-lookup"><span data-stu-id="f018a-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="f018a-114">Langage non spécifié</span><span class="sxs-lookup"><span data-stu-id="f018a-114">Language agnostic</span></span>
<span data-ttu-id="f018a-115">Traitement de l’authentification du Service d’applications se produit avant que les requêtes parviennent à votre application d’API, ce qui signifie que les fonctionnalités d’authentification hello fonctionnent pour les applications d’API écrites dans n’importe quel langage ou le framework.</span><span class="sxs-lookup"><span data-stu-id="f018a-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="f018a-116">Votre API peut être basée sur ASP.NET, Java, Node.js ou une infrastructure prise en charge par App Service.</span><span class="sxs-lookup"><span data-stu-id="f018a-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="f018a-117">Service de l’application passe sur le jeton de web hello JSON (JWT) dans l’en-tête d’autorisation de hello d’une requête HTTP et le code écrit dans n’importe quel langage ou le framework peut obtenir informations hello que nécessaires de hello jeton.</span><span class="sxs-lookup"><span data-stu-id="f018a-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="f018a-118">En outre, du Service d’applications vous donne plus facilement accès les revendications toohello couramment utilisé en définissant certains en-têtes spéciaux, tels que les suivants hello :</span><span class="sxs-lookup"><span data-stu-id="f018a-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="f018a-119">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="f018a-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="f018a-120">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="f018a-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="f018a-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="f018a-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="f018a-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="f018a-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="f018a-123">Dans une API .NET, vous pouvez utiliser hello `Authorize` d’attribut et pour une autorisation, vous pouvez écrire facilement du code en fonction des revendications, car les informations de revendications sont remplies pour vous dans les classes .NET.</span><span class="sxs-lookup"><span data-stu-id="f018a-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="f018a-124">Plusieurs options de protection</span><span class="sxs-lookup"><span data-stu-id="f018a-124">Multiple protection options</span></span>
<span data-ttu-id="f018a-125">App Service peut empêcher les requêtes HTTP anonymes d’atteindre votre application API ; il peut également transmettre toutes les demandes et valider les jetons pour les demandes dans lesquelles ils sont inclus, ou bien acheminer toutes les demandes sans aucune action :</span><span class="sxs-lookup"><span data-stu-id="f018a-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="f018a-126">Autoriser uniquement les demandes authentifiées tooreach votre application API.</span><span class="sxs-lookup"><span data-stu-id="f018a-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="f018a-127">Si une demande anonyme est reçue depuis un navigateur, Service de l’application redirige tooa page de connexion pour le fournisseur d’authentification hello (Azure AD, Google, Twitter, etc.) que vous choisissez.</span><span class="sxs-lookup"><span data-stu-id="f018a-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="f018a-128">Avec cette option, vous n’avez pas besoin toowrite n’importe quel code d’authentification du tout dans votre application et code d’autorisation est simplifiée car les revendications plus importantes hello sont fournies dans les en-têtes HTTP de hello.</span><span class="sxs-lookup"><span data-stu-id="f018a-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="f018a-129">Autoriser toutes les demandes tooreach votre application API, mais valider les demandes authentifiées et transmettre les informations d’authentification dans les en-têtes HTTP de hello.</span><span class="sxs-lookup"><span data-stu-id="f018a-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="f018a-130">Cette option vous donne plus de souplesse dans la gestion des demandes anonymes, mais que vous avez toowrite code si vous souhaitez que les utilisateurs anonymes tooprevent à partir de l’aide de votre API.</span><span class="sxs-lookup"><span data-stu-id="f018a-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="f018a-131">Étant donné que les demandes les plus populaires hello sont passés dans les en-têtes de hello de requêtes HTTP, code d’autorisation est relativement simple.</span><span class="sxs-lookup"><span data-stu-id="f018a-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="f018a-132">Autoriser toutes les demandes tooreach votre API, effectuer aucune action sur les informations d’authentification dans les demandes de hello.</span><span class="sxs-lookup"><span data-stu-id="f018a-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="f018a-133">Cette option laisse tâches hello d’authentification et d’autorisation entièrement des tooyour code de l’application.</span><span class="sxs-lookup"><span data-stu-id="f018a-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="f018a-134">Bonjour [portail Azure](https://portal.azure.com/), vous activez l’option hello sur hello **l’authentification / autorisation** panneau.</span><span class="sxs-lookup"><span data-stu-id="f018a-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="f018a-135">Pour les options 1 et 2, activer **l’authentification du Service application**et Bonjour **tootake Action lors de la demande n’est pas authentifiée** liste déroulante, choisissez **connecter** ou **Autoriser les requêtes (aucune action)**.</span><span class="sxs-lookup"><span data-stu-id="f018a-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="f018a-136">Si vous choisissez **connecter**, vous avez toochoose un fournisseur d’authentification et configurer ce fournisseur.</span><span class="sxs-lookup"><span data-stu-id="f018a-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="f018a-137">Pour plus d’informations sur la façon tooconfigure l’authentification, consultez [comment tooconfigure votre connexion de Service d’applications application toouse Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="f018a-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="f018a-138">article de Hello applique tooAPI applications ainsi que des applications mobiles, et elle lie les articles tooother hello pour les autres fournisseurs d’authentification.</span><span class="sxs-lookup"><span data-stu-id="f018a-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="f018a-139"><a id="internal"></a> Authentification du compte de service</span><span class="sxs-lookup"><span data-stu-id="f018a-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="f018a-140">L’authentification du Service de l’application fonctionne pour les scénarios internes comme appelé à partir d’une application de tooanother API d’application API.</span><span class="sxs-lookup"><span data-stu-id="f018a-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="f018a-141">Dans ce scénario, vous pouvez obtenir un jeton en utilisant les informations d’identification correspondant à un compte de service au lieu des informations d’identification de l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="f018a-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="f018a-142">Un compte de service est également appelé *principal de service* dans Azure Active Directory, et l’authentification pratiquée avec ce type de compte est également appelée « scénario de service à service ».</span><span class="sxs-lookup"><span data-stu-id="f018a-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="f018a-143">Pour les scénarios de service, protéger hello appelée application API à l’aide d’Azure Active Directory et fournir un jeton d’autorisation de principal du service AAD quand vous appelez l’application hello API.</span><span class="sxs-lookup"><span data-stu-id="f018a-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="f018a-144">Vous obtenez un jeton en fournissant des ID de client hello et secret principal à partir de l’application AAD de hello du client.</span><span class="sxs-lookup"><span data-stu-id="f018a-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="f018a-145">Aucun spéciaux code Azure uniquement n’est requis, par exemple, true toobe utilisé pour gérer le jeton de Mobile Services Zumo hello.</span><span class="sxs-lookup"><span data-stu-id="f018a-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="f018a-146">Un exemple de ce scénario à l’aide d’applications ASP.NET API n’est couverte par un didacticiel de hello [l’authentification principale du Service pour les applications de l’API](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="f018a-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="f018a-147">Si vous voulez toohandle un scénario de service sans utiliser l’authentification du Service d’applications, vous pouvez utiliser des certificats de client ou de l’authentification de base.</span><span class="sxs-lookup"><span data-stu-id="f018a-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="f018a-148">Pour plus d’informations sur les certificats de client dans Azure, consultez [comment tooConfigure l’authentification mutuelle de TLS pour les applications Web](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="f018a-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="f018a-149">Pour plus d’informations sur l’authentification de base dans ASP.NET, consultez [Filtres d’authentification dans ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="f018a-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="f018a-150">L’authentification du compte de service à partir d’une application de Service de l’application logique application tooan API est un cas spécial qui est expliqué dans [à l’aide de votre API personnalisée hébergé sur App Service avec les applications de la logique](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="f018a-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="f018a-151">Authentification du client mobile</span><span class="sxs-lookup"><span data-stu-id="f018a-151">Mobile client authentication</span></span>
<span data-ttu-id="f018a-152">Pour plus d’informations sur l’authentification toohandle à partir de clients mobiles, consultez hello [documentation sur l’authentification pour les applications mobiles](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="f018a-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="f018a-153">L’authentification du Service d’applications fonctionne hello identique pour les applications mobiles et les applications API.</span><span class="sxs-lookup"><span data-stu-id="f018a-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="f018a-154">Plus d’informations</span><span class="sxs-lookup"><span data-stu-id="f018a-154">More information</span></span>
<span data-ttu-id="f018a-155">Pour plus d’informations sur l’authentification et d’autorisation dans Azure App Service, consultez hello suivant des ressources :</span><span class="sxs-lookup"><span data-stu-id="f018a-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="f018a-156">Extension de l’authentification/autorisation App Service</span><span class="sxs-lookup"><span data-stu-id="f018a-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="f018a-157">[Comment tooconfigure votre connexion d’Azure Active Directory du Service d’applications application toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (inclut des liens pour d’autres fournisseurs d’authentification en hello haut hello.)</span><span class="sxs-lookup"><span data-stu-id="f018a-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="f018a-158">Pour plus d’informations sur OAuth 2.0, OpenID Connect et les jetons Web JSON (JWT), consultez hello suivant des ressources.</span><span class="sxs-lookup"><span data-stu-id="f018a-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="f018a-159">Prise en main d’OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="f018a-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "Getting Started with OAuth 2.0") 
* [<span data-ttu-id="f018a-160">Introduction tooOAuth2, OpenID Connect et les jetons Web JSON (JWT) - Pluralsight cours</span><span class="sxs-lookup"><span data-stu-id="f018a-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="f018a-161">Création et sécurisation d’une API RESTful pour plusieurs clients dans ASP.NET (cours PluralSight)</span><span class="sxs-lookup"><span data-stu-id="f018a-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="f018a-162">Pour plus d’informations sur Azure Active Directory, consultez hello suivant des ressources.</span><span class="sxs-lookup"><span data-stu-id="f018a-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="f018a-163">Scénarios Azure AD</span><span class="sxs-lookup"><span data-stu-id="f018a-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="f018a-164">Guide du développeur Azure AD</span><span class="sxs-lookup"><span data-stu-id="f018a-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="f018a-165">Exemples Azure AD</span><span class="sxs-lookup"><span data-stu-id="f018a-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="f018a-166">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="f018a-166">Next steps</span></span>
<span data-ttu-id="f018a-167">Cet article a décrit les fonctionnalités d’authentification et d’autorisation d’App Service que vous pouvez utiliser pour API Apps.</span><span class="sxs-lookup"><span data-stu-id="f018a-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="f018a-168">Hello autre didacticiel de mise en route de hello démarré série montre comment tooimplement [l’authentification des utilisateurs dans les applications API App Service](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="f018a-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>

