---
title: aaaArchive les journaux de Diagnostic Azure | Documents Microsoft
description: "Découvrez comment tooarchive votre Azure journaux de Diagnostic pour une rétention à long terme dans un compte de stockage."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 3a55c73f-2ef3-45f3-8956-bcf9c0cb7e05
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/21/2017
ms.author: johnkem
ms.openlocfilehash: bc9edbd3a649023a728b7fe77130dba2b6e6370d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="archive-azure-diagnostic-logs"></a><span data-ttu-id="ff18b-103">Archivage des journaux de diagnostic Azure</span><span class="sxs-lookup"><span data-stu-id="ff18b-103">Archive Azure Diagnostic Logs</span></span>
<span data-ttu-id="ff18b-104">Dans cet article, nous montrons comment vous pouvez utiliser hello portail Azure, les PowerShell Cmdlets, CLI, ou placez les API tooarchive votre [des journaux de diagnostic Azure](monitoring-overview-of-diagnostic-logs.md) dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="ff18b-104">In this article, we show how you can use hello Azure portal, PowerShell Cmdlets, CLI, or REST API tooarchive your [Azure diagnostic logs](monitoring-overview-of-diagnostic-logs.md) in a storage account.</span></span> <span data-ttu-id="ff18b-105">Cette option est utile si vous souhaitez que tooretain journaux de votre diagnostic avec une stratégie de rétention pour l’audit, d’analyse statique ou de sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="ff18b-105">This option is useful if you would like tooretain your diagnostic logs with an optional retention policy for audit, static analysis, or backup.</span></span> <span data-ttu-id="ff18b-106">compte de stockage Hello n’a pas de toobe dans hello même abonnement en tant que ressource hello générant des journaux tant qu’utilisateur hello configure hello paramètre a des abonnements de tooboth accès RBAC appropriés.</span><span class="sxs-lookup"><span data-stu-id="ff18b-106">hello storage account does not have toobe in hello same subscription as hello resource emitting logs as long as hello user who configures hello setting has appropriate RBAC access tooboth subscriptions.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ff18b-107">Composants requis</span><span class="sxs-lookup"><span data-stu-id="ff18b-107">Prerequisites</span></span>
<span data-ttu-id="ff18b-108">Avant de commencer, vous devez trop[créer un compte de stockage](../storage/storage-create-storage-account.md) toowhich, vous pouvez archiver vos journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="ff18b-108">Before you begin, you need too[create a storage account](../storage/storage-create-storage-account.md) toowhich you can archive your diagnostic logs.</span></span> <span data-ttu-id="ff18b-109">Nous vous recommandons vivement de ne pas utiliser un compte de stockage existant qui comporte des données d’autres, non suivi stockées afin que vous pouvez mieux contrôler les accès toomonitoring données.</span><span class="sxs-lookup"><span data-stu-id="ff18b-109">We highly recommend that you do not use an existing storage account that has other, non-monitoring data stored in it so that you can better control access toomonitoring data.</span></span> <span data-ttu-id="ff18b-110">Toutefois, si vous archivez également votre journal d’activité et le compte de stockage tooa métriques des diagnostics, il peut être judicieux toouse ce compte de stockage pour vos journaux de diagnostic ainsi tookeep toutes les données d’analyse dans un emplacement central.</span><span class="sxs-lookup"><span data-stu-id="ff18b-110">However, if you are also archiving your Activity Log and diagnostic metrics tooa storage account, it may make sense toouse that storage account for your diagnostic logs as well tookeep all monitoring data in a central location.</span></span> <span data-ttu-id="ff18b-111">compte de stockage Hello que vous utilisez doit être un compte de stockage polyvalentes, pas un compte de stockage d’objets blob.</span><span class="sxs-lookup"><span data-stu-id="ff18b-111">hello storage account you use must be a general purpose storage account, not a blob storage account.</span></span>

## <a name="diagnostic-settings"></a><span data-ttu-id="ff18b-112">Paramètres de diagnostic</span><span class="sxs-lookup"><span data-stu-id="ff18b-112">Diagnostic settings</span></span>
<span data-ttu-id="ff18b-113">tooarchive votre diagnostic se connecte à l’aide d’une des méthodes hello ci-dessous, vous définissez un **paramètre de diagnostic** pour une ressource particulière.</span><span class="sxs-lookup"><span data-stu-id="ff18b-113">tooarchive your diagnostic logs using any of hello methods below, you set a **diagnostic setting** for a particular resource.</span></span> <span data-ttu-id="ff18b-114">Un paramètre de diagnostic pour une ressource définit les catégories de hello des journaux et données de mesure envoyées destination tooa (compte de stockage, espace de noms de concentrateurs d’événements ou Analytique de journal).</span><span class="sxs-lookup"><span data-stu-id="ff18b-114">A diagnostic setting for a resource defines hello categories of logs and metric data sent tooa destination (storage account, Event Hubs namespace, or Log Analytics).</span></span> <span data-ttu-id="ff18b-115">Il définit également la stratégie de rétention hello (nombre de jours tooretain) pour les événements de chaque catégorie de journaux et les données métriques stockées dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="ff18b-115">It also defines hello retention policy (number of days tooretain) for events of each log category and metric data stored in a storage account.</span></span> <span data-ttu-id="ff18b-116">Si une stratégie de rétention est définie à toozero, événements de cette catégorie de journal sont stockés indéfiniment (c'est-à-dire toosay, indéfiniment).</span><span class="sxs-lookup"><span data-stu-id="ff18b-116">If a retention policy is set toozero, events for that log category are stored indefinitely (that is toosay, forever).</span></span> <span data-ttu-id="ff18b-117">Une stratégie de rétention peut également être définie sur n’importe quel nombre de jours entre 1 et 2147483647.</span><span class="sxs-lookup"><span data-stu-id="ff18b-117">A retention policy can otherwise be any number of days between 1 and 2147483647.</span></span> <span data-ttu-id="ff18b-118">[Vous trouverez plus d’informations sur les paramètres de diagnostic ici](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings).</span><span class="sxs-lookup"><span data-stu-id="ff18b-118">[You can read more about diagnostic settings here](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings).</span></span> <span data-ttu-id="ff18b-119">Stratégies de rétention sont appliquées par jour, donc à hello fin d’une journée (UTC), consigne un jour hello qui est désormais au-delà de la stratégie de rétention hello seront supprimés.</span><span class="sxs-lookup"><span data-stu-id="ff18b-119">Retention policies are applied per-day, so at hello end of a day (UTC), logs from hello day that is now beyond hello retention policy will be deleted.</span></span> <span data-ttu-id="ff18b-120">Par exemple, si vous aviez une stratégie de rétention d’un jour, au début de hello du jour hello aujourd'hui hello des journaux de hello avant-hier seraient supprimés</span><span class="sxs-lookup"><span data-stu-id="ff18b-120">For example, if you had a retention policy of one day, at hello beginning of hello day today hello logs from hello day before yesterday would be deleted</span></span>

## <a name="archive-diagnostic-logs-using-hello-portal"></a><span data-ttu-id="ff18b-121">Archive des journaux de diagnostic à l’aide du portail de hello</span><span class="sxs-lookup"><span data-stu-id="ff18b-121">Archive diagnostic logs using hello portal</span></span>
1. <span data-ttu-id="ff18b-122">Dans le portail de hello, accédez tooAzure moniteur, puis cliquez sur **les paramètres de Diagnostic**</span><span class="sxs-lookup"><span data-stu-id="ff18b-122">In hello portal, navigate tooAzure Monitor and click on **Diagnostic Settings**</span></span>

    ![Section Surveillance d’Azure Monitor](media/monitoring-archive-diagnostic-logs/diagnostic-settings-blade.png)

2. <span data-ttu-id="ff18b-124">Vous pouvez également filtrer la liste de hello par type de ressource ou le groupe de ressources, puis cliquez sur ressources hello pour laquelle vous aimeriez tooset un paramètre de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="ff18b-124">Optionally filter hello list by resource group or resource type, then click on hello resource for which you would like tooset a diagnostic setting.</span></span>

3. <span data-ttu-id="ff18b-125">Si aucun paramètre n’existe sur la ressource hello que vous avez sélectionné, vous êtes invité à toocreate un paramètre.</span><span class="sxs-lookup"><span data-stu-id="ff18b-125">If no settings exist on hello resource you have selected, you are prompted toocreate a setting.</span></span> <span data-ttu-id="ff18b-126">Cliquez sur « Activer les diagnostics ».</span><span class="sxs-lookup"><span data-stu-id="ff18b-126">Click "Turn on diagnostics."</span></span>

   ![Ajouter le paramètre de diagnostic - aucun paramètre existant](media/monitoring-archive-diagnostic-logs/diagnostic-settings-none.png)

   <span data-ttu-id="ff18b-128">S’il existe des paramètres existants sur les ressources hello, vous verrez une liste de paramètres déjà configuré sur cette ressource.</span><span class="sxs-lookup"><span data-stu-id="ff18b-128">If there are existing settings on hello resource, you will see a list of settings already configured on this resource.</span></span> <span data-ttu-id="ff18b-129">Cliquez sur « Ajouter le paramètre de diagnostic ».</span><span class="sxs-lookup"><span data-stu-id="ff18b-129">Click "Add diagnostic setting."</span></span>

   ![Ajouter le paramètre de diagnostic - paramètres existants](media/monitoring-archive-diagnostic-logs/diagnostic-settings-multiple.png)

3. <span data-ttu-id="ff18b-131">Donnez à votre définition d’un nom et la case hello pour **exporter tooStorage compte**, puis sélectionnez un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="ff18b-131">Give your setting a name and check hello box for **Export tooStorage Account**, then select a storage account.</span></span> <span data-ttu-id="ff18b-132">Si vous le souhaitez, vous pouvez définir un nombre de jours tooretain ces journaux à l’aide de hello **rétention (jours)** curseurs.</span><span class="sxs-lookup"><span data-stu-id="ff18b-132">Optionally, set a number of days tooretain these logs by using hello **Retention (days)** sliders.</span></span> <span data-ttu-id="ff18b-133">Une durée de rétention de zéro jours stocke les journaux hello indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="ff18b-133">A retention of zero days stores hello logs indefinitely.</span></span>
   
   ![Ajouter le paramètre de diagnostic - paramètres existants](media/monitoring-archive-diagnostic-logs/diagnostic-settings-configure.png)
    
4. <span data-ttu-id="ff18b-135">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="ff18b-135">Click **Save**.</span></span>

<span data-ttu-id="ff18b-136">Après quelques instants, le nouveau paramètre de hello s’affiche dans la liste des paramètres pour cette ressource, et les journaux de diagnostic sont archivées toothat stockage compte dès que les nouvelles données d’événement sont générées.</span><span class="sxs-lookup"><span data-stu-id="ff18b-136">After a few moments, hello new setting appears in your list of settings for this resource, and diagnostic logs are archived toothat storage account as soon as new event data is generated.</span></span>

## <a name="archive-diagnostic-logs-via-azure-powershell"></a><span data-ttu-id="ff18b-137">Archivage des journaux de diagnostic à l’aide d’Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="ff18b-137">Archive diagnostic logs via Azure PowerShell</span></span>
```
Set-AzureRmDiagnosticSetting -ResourceId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/testresourcegroup/providers/Microsoft.Network/networkSecurityGroups/testnsg -StorageAccountId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -Categories networksecuritygroupevent,networksecuritygrouprulecounter -Enabled $true -RetentionEnabled $true -RetentionInDays 90
```

| <span data-ttu-id="ff18b-138">Propriété</span><span class="sxs-lookup"><span data-stu-id="ff18b-138">Property</span></span> | <span data-ttu-id="ff18b-139">Requis</span><span class="sxs-lookup"><span data-stu-id="ff18b-139">Required</span></span> | <span data-ttu-id="ff18b-140">Description</span><span class="sxs-lookup"><span data-stu-id="ff18b-140">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ff18b-141">ResourceId</span><span class="sxs-lookup"><span data-stu-id="ff18b-141">ResourceId</span></span> |<span data-ttu-id="ff18b-142">Oui</span><span class="sxs-lookup"><span data-stu-id="ff18b-142">Yes</span></span> |<span data-ttu-id="ff18b-143">ID de ressource de la ressource hello sur lequel vous souhaitez tooset un paramètre de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="ff18b-143">Resource ID of hello resource on which you want tooset a diagnostic setting.</span></span> |
| <span data-ttu-id="ff18b-144">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="ff18b-144">StorageAccountId</span></span> |<span data-ttu-id="ff18b-145">Non</span><span class="sxs-lookup"><span data-stu-id="ff18b-145">No</span></span> |<span data-ttu-id="ff18b-146">ID de ressource de hello toowhich de compte de stockage des journaux de Diagnostic doit être enregistré.</span><span class="sxs-lookup"><span data-stu-id="ff18b-146">Resource ID of hello Storage Account toowhich Diagnostic Logs should be saved.</span></span> |
| <span data-ttu-id="ff18b-147">Catégories</span><span class="sxs-lookup"><span data-stu-id="ff18b-147">Categories</span></span> |<span data-ttu-id="ff18b-148">Non</span><span class="sxs-lookup"><span data-stu-id="ff18b-148">No</span></span> |<span data-ttu-id="ff18b-149">Liste de séparées par des virgules des tooenable de catégories de journal.</span><span class="sxs-lookup"><span data-stu-id="ff18b-149">Comma-separated list of log categories tooenable.</span></span> |
| <span data-ttu-id="ff18b-150">Activé</span><span class="sxs-lookup"><span data-stu-id="ff18b-150">Enabled</span></span> |<span data-ttu-id="ff18b-151">OUI</span><span class="sxs-lookup"><span data-stu-id="ff18b-151">Yes</span></span> |<span data-ttu-id="ff18b-152">Valeur booléenne indiquant si les diagnostics sont activés ou désactivés pour cette ressource.</span><span class="sxs-lookup"><span data-stu-id="ff18b-152">Boolean indicating whether diagnostics are enabled or disabled on this resource.</span></span> |
| <span data-ttu-id="ff18b-153">RetentionEnabled</span><span class="sxs-lookup"><span data-stu-id="ff18b-153">RetentionEnabled</span></span> |<span data-ttu-id="ff18b-154">Non</span><span class="sxs-lookup"><span data-stu-id="ff18b-154">No</span></span> |<span data-ttu-id="ff18b-155">Valeur booléenne indiquant si une stratégie de rétention est activée pour cette ressource.</span><span class="sxs-lookup"><span data-stu-id="ff18b-155">Boolean indicating if a retention policy are enabled on this resource.</span></span> |
| <span data-ttu-id="ff18b-156">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="ff18b-156">RetentionInDays</span></span> |<span data-ttu-id="ff18b-157">Non</span><span class="sxs-lookup"><span data-stu-id="ff18b-157">No</span></span> |<span data-ttu-id="ff18b-158">Nombre de jours pendant lesquels les événements doivent être conservés, compris entre 1 et 2147483647.</span><span class="sxs-lookup"><span data-stu-id="ff18b-158">Number of days for which events should be retained between 1 and 2147483647.</span></span> <span data-ttu-id="ff18b-159">Une valeur égale à zéro stocke les journaux hello indéfiniment.</span><span class="sxs-lookup"><span data-stu-id="ff18b-159">A value of zero stores hello logs indefinitely.</span></span> |

## <a name="archive-diagnostic-logs-via-hello-cross-platform-cli"></a><span data-ttu-id="ff18b-160">Journaux de diagnostic archive via hello Cross-Platform CLI</span><span class="sxs-lookup"><span data-stu-id="ff18b-160">Archive diagnostic logs via hello Cross-Platform CLI</span></span>
```
azure insights diagnostic set --resourceId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/testresourcegroup/providers/Microsoft.Network/networkSecurityGroups/testnsg --storageId /subscriptions/s1id1234-5679-0123-4567-890123456789/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage –categories networksecuritygroupevent,networksecuritygrouprulecounter --enabled true
```

| <span data-ttu-id="ff18b-161">Propriété</span><span class="sxs-lookup"><span data-stu-id="ff18b-161">Property</span></span> | <span data-ttu-id="ff18b-162">Requis</span><span class="sxs-lookup"><span data-stu-id="ff18b-162">Required</span></span> | <span data-ttu-id="ff18b-163">Description</span><span class="sxs-lookup"><span data-stu-id="ff18b-163">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ff18b-164">ResourceId</span><span class="sxs-lookup"><span data-stu-id="ff18b-164">resourceId</span></span> |<span data-ttu-id="ff18b-165">Oui</span><span class="sxs-lookup"><span data-stu-id="ff18b-165">Yes</span></span> |<span data-ttu-id="ff18b-166">ID de ressource de la ressource hello sur lequel vous souhaitez tooset un paramètre de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="ff18b-166">Resource ID of hello resource on which you want tooset a diagnostic setting.</span></span> |
| <span data-ttu-id="ff18b-167">storageId</span><span class="sxs-lookup"><span data-stu-id="ff18b-167">storageId</span></span> |<span data-ttu-id="ff18b-168">Non</span><span class="sxs-lookup"><span data-stu-id="ff18b-168">No</span></span> |<span data-ttu-id="ff18b-169">ID de ressource de journaux de diagnostic de toowhich hello compte de stockage doit être enregistré.</span><span class="sxs-lookup"><span data-stu-id="ff18b-169">Resource ID of hello Storage Account toowhich diagnostic logs should be saved.</span></span> |
| <span data-ttu-id="ff18b-170">Catégories</span><span class="sxs-lookup"><span data-stu-id="ff18b-170">categories</span></span> |<span data-ttu-id="ff18b-171">Non</span><span class="sxs-lookup"><span data-stu-id="ff18b-171">No</span></span> |<span data-ttu-id="ff18b-172">Liste de séparées par des virgules des tooenable de catégories de journal.</span><span class="sxs-lookup"><span data-stu-id="ff18b-172">Comma-separated list of log categories tooenable.</span></span> |
| <span data-ttu-id="ff18b-173">Activé</span><span class="sxs-lookup"><span data-stu-id="ff18b-173">enabled</span></span> |<span data-ttu-id="ff18b-174">OUI</span><span class="sxs-lookup"><span data-stu-id="ff18b-174">Yes</span></span> |<span data-ttu-id="ff18b-175">Valeur booléenne indiquant si les diagnostics sont activés ou désactivés pour cette ressource.</span><span class="sxs-lookup"><span data-stu-id="ff18b-175">Boolean indicating whether diagnostics are enabled or disabled on this resource.</span></span> |

## <a name="archive-diagnostic-logs-via-hello-rest-api"></a><span data-ttu-id="ff18b-176">Archive des journaux de diagnostic via l’API REST de hello</span><span class="sxs-lookup"><span data-stu-id="ff18b-176">Archive diagnostic logs via hello REST API</span></span>
<span data-ttu-id="ff18b-177">[Consultez ce document](https://docs.microsoft.com/rest/api/monitor/servicediagnosticsettings) pour plus d’informations sur la façon dont vous pouvez configurer un paramètre de diagnostic à l’aide de hello API REST du moniteur de Azure.</span><span class="sxs-lookup"><span data-stu-id="ff18b-177">[See this document](https://docs.microsoft.com/rest/api/monitor/servicediagnosticsettings) for information on how you can set up a diagnostic setting using hello Azure Monitor REST API.</span></span>

## <a name="schema-of-diagnostic-logs-in-hello-storage-account"></a><span data-ttu-id="ff18b-178">Schéma des journaux de diagnostic dans le compte de stockage hello</span><span class="sxs-lookup"><span data-stu-id="ff18b-178">Schema of diagnostic logs in hello storage account</span></span>
<span data-ttu-id="ff18b-179">Une fois que vous avez configuré d’archivage, un conteneur de stockage est créé dans le compte de stockage hello dès qu’un événement se produit dans une des catégories du journal hello que vous avez activé.</span><span class="sxs-lookup"><span data-stu-id="ff18b-179">Once you have set up archival, a storage container is created in hello storage account as soon as an event occurs in one of hello log categories you have enabled.</span></span> <span data-ttu-id="ff18b-180">BLOB Hello conteneur hello suivez hello même format entre les journaux de Diagnostic et hello journal d’activité.</span><span class="sxs-lookup"><span data-stu-id="ff18b-180">hello blobs within hello container follow hello same format across Diagnostic Logs and hello Activity Log.</span></span> <span data-ttu-id="ff18b-181">structure Hello de ces objets BLOB est la suivante :</span><span class="sxs-lookup"><span data-stu-id="ff18b-181">hello structure of these blobs is:</span></span>

> <span data-ttu-id="ff18b-182">insights-logs-{nom de la catégorie de journal}/resourceId=/SUBSCRIPTIONS/{ID d’abonnement}/RESOURCEGROUPS/{nom du groupe de ressources}/PROVIDERS/{nom du fournisseur de ressources}/{type de ressource}/{nom de la ressource}/y={année, quatre chiffres}/m={mois, deux chiffres}/d={jour, deux chiffres}/h={heure, deux chiffres, format 24 h}/m=00/PT1H.json</span><span class="sxs-lookup"><span data-stu-id="ff18b-182">insights-logs-{log category name}/resourceId=/SUBSCRIPTIONS/{subscription ID}/RESOURCEGROUPS/{resource group name}/PROVIDERS/{resource provider name}/{resource type}/{resource name}/y={four-digit numeric year}/m={two-digit numeric month}/d={two-digit numeric day}/h={two-digit 24-hour clock hour}/m=00/PT1H.json</span></span>
> 
> 

<span data-ttu-id="ff18b-183">Ou, plus simplement,</span><span class="sxs-lookup"><span data-stu-id="ff18b-183">Or, more simply,</span></span>

> <span data-ttu-id="ff18b-184">insights-logs-{nom de la catégorie de journal}/resourceId=/{ID de la ressource}/y={année, quatre chiffres}/m={mois, deux chiffres}/d={jour, deux chiffres}/h={heure, deux chiffres, format 24 h}/m=00/PT1H.json</span><span class="sxs-lookup"><span data-stu-id="ff18b-184">insights-logs-{log category name}/resourceId=/{resource Id}/y={four-digit numeric year}/m={two-digit numeric month}/d={two-digit numeric day}/h={two-digit 24-hour clock hour}/m=00/PT1H.json</span></span>
> 
> 

<span data-ttu-id="ff18b-185">Voici un exemple de nom d’objet blob :</span><span class="sxs-lookup"><span data-stu-id="ff18b-185">For example, a blob name might be:</span></span>

> <span data-ttu-id="ff18b-186">insights-logs-networksecuritygrouprulecounter/resourceId=/SUBSCRIPTIONS/s1id1234-5679-0123-4567-890123456789/RESOURCEGROUPS/TESTRESOURCEGROUP/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUP/TESTNSG/y=2016/m=08/d=22/h=18/m=00/PT1H.json</span><span class="sxs-lookup"><span data-stu-id="ff18b-186">insights-logs-networksecuritygrouprulecounter/resourceId=/SUBSCRIPTIONS/s1id1234-5679-0123-4567-890123456789/RESOURCEGROUPS/TESTRESOURCEGROUP/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUP/TESTNSG/y=2016/m=08/d=22/h=18/m=00/PT1H.json</span></span>
> 
> 

<span data-ttu-id="ff18b-187">Chaque objet blob PT1H.json contient un objet blob de JSON d’événements qui se sont produites dans heure hello spécifié dans l’URL de blob hello (par exemple, h = 12).</span><span class="sxs-lookup"><span data-stu-id="ff18b-187">Each PT1H.json blob contains a JSON blob of events that occurred within hello hour specified in hello blob URL (for example, h=12).</span></span> <span data-ttu-id="ff18b-188">Pendant hello heure actuelle, les événements sont ajoutés toohello PT1H.json fichier qu’ils se produisent.</span><span class="sxs-lookup"><span data-stu-id="ff18b-188">During hello present hour, events are appended toohello PT1H.json file as they occur.</span></span> <span data-ttu-id="ff18b-189">valeur de minute de Hello (m = 00) est toujours 00, étant donné que les événements du journal de diagnostics sont divisées en objets BLOB individuels par heure.</span><span class="sxs-lookup"><span data-stu-id="ff18b-189">hello minute value (m=00) is always 00, since diagnostic log events are broken into individual blobs per hour.</span></span>

<span data-ttu-id="ff18b-190">Dans le fichier de PT1H.json hello, chaque événement est stocké dans le tableau « enregistrements de hello », sous ce format :</span><span class="sxs-lookup"><span data-stu-id="ff18b-190">Within hello PT1H.json file, each event is stored in hello “records” array, following this format:</span></span>

```
{
    "records": [
        {
            "time": "2016-07-01T00:00:37.2040000Z",
            "systemId": "46cdbb41-cb9c-4f3d-a5b4-1d458d827ff1",
            "category": "NetworkSecurityGroupRuleCounter",
            "resourceId": "/SUBSCRIPTIONS/s1id1234-5679-0123-4567-890123456789/RESOURCEGROUPS/TESTRESOURCEGROUP/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUPS/TESTNSG",
            "operationName": "NetworkSecurityGroupCounters",
            "properties": {
                "vnetResourceGuid": "{12345678-9012-3456-7890-123456789012}",
                "subnetPrefix": "10.3.0.0/24",
                "macAddress": "000123456789",
                "ruleName": "/subscriptions/ s1id1234-5679-0123-4567-890123456789/resourceGroups/testresourcegroup/providers/Microsoft.Network/networkSecurityGroups/testnsg/securityRules/default-allow-rdp",
                "direction": "In",
                "type": "allow",
                "matchedConnections": 1988
            }
        }
    ]
}
```

| <span data-ttu-id="ff18b-191">Nom de l'élément</span><span class="sxs-lookup"><span data-stu-id="ff18b-191">Element name</span></span> | <span data-ttu-id="ff18b-192">Description</span><span class="sxs-lookup"><span data-stu-id="ff18b-192">Description</span></span> |
| --- | --- |
| <span data-ttu-id="ff18b-193">time</span><span class="sxs-lookup"><span data-stu-id="ff18b-193">time</span></span> |<span data-ttu-id="ff18b-194">Horodatage lors de l’événement de hello a été généré par hello du traitement du service Azure hello demande événement hello correspondant.</span><span class="sxs-lookup"><span data-stu-id="ff18b-194">Timestamp when hello event was generated by hello Azure service processing hello request corresponding hello event.</span></span> |
| <span data-ttu-id="ff18b-195">resourceId</span><span class="sxs-lookup"><span data-stu-id="ff18b-195">resourceId</span></span> |<span data-ttu-id="ff18b-196">ID de ressource de hello affectées les ressources.</span><span class="sxs-lookup"><span data-stu-id="ff18b-196">Resource ID of hello impacted resource.</span></span> |
| <span data-ttu-id="ff18b-197">operationName</span><span class="sxs-lookup"><span data-stu-id="ff18b-197">operationName</span></span> |<span data-ttu-id="ff18b-198">Nom de l’opération de hello.</span><span class="sxs-lookup"><span data-stu-id="ff18b-198">Name of hello operation.</span></span> |
| <span data-ttu-id="ff18b-199">category</span><span class="sxs-lookup"><span data-stu-id="ff18b-199">category</span></span> |<span data-ttu-id="ff18b-200">Catégorie du journal des événements de hello.</span><span class="sxs-lookup"><span data-stu-id="ff18b-200">Log category of hello event.</span></span> |
| <span data-ttu-id="ff18b-201">properties</span><span class="sxs-lookup"><span data-stu-id="ff18b-201">properties</span></span> |<span data-ttu-id="ff18b-202">Jeu de `<Key, Value>` paires (c'est-à-dire, Dictionary) hello décrivant les événements hello.</span><span class="sxs-lookup"><span data-stu-id="ff18b-202">Set of `<Key, Value>` pairs (i.e. Dictionary) describing hello details of hello event.</span></span> |

> [!NOTE]
> <span data-ttu-id="ff18b-203">propriétés de Hello et l’utilisation de ces propriétés peuvent varier en fonction de la ressource de hello.</span><span class="sxs-lookup"><span data-stu-id="ff18b-203">hello properties and usage of those properties can vary depending on hello resource.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="ff18b-204">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="ff18b-204">Next steps</span></span>
* [<span data-ttu-id="ff18b-205">Télécharger des objets blob pour analyse</span><span class="sxs-lookup"><span data-stu-id="ff18b-205">Download blobs for analysis</span></span>](../storage/storage-dotnet-how-to-use-blobs.md)
* [<span data-ttu-id="ff18b-206">Flux diagnostic enregistre l’espace de noms tooan concentrateurs d’événements</span><span class="sxs-lookup"><span data-stu-id="ff18b-206">Stream diagnostic logs tooan Event Hubs namespace</span></span>](monitoring-stream-diagnostic-logs-to-event-hubs.md)
* [<span data-ttu-id="ff18b-207">En savoir plus sur les journaux de diagnostic</span><span class="sxs-lookup"><span data-stu-id="ff18b-207">Read more about diagnostic logs</span></span>](monitoring-overview-of-diagnostic-logs.md)
