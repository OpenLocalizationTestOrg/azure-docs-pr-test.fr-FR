---
title: "aaaGet a démarré avec des rôles, les autorisations et la sécurité avec l’Analyseur de Azure | Documents Microsoft"
description: "Découvrez comment d’accéder aux ressources de toomonitoring des rôles intégrés et les autorisations toorestrict de l’analyse toouse Azure."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="c07b2-103">Familiarisation avec les rôles, les autorisations et la sécurité dans Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="c07b2-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="c07b2-104">De nombreuses équipes doivent toostrictly réguler l’accès toomonitoring données et des paramètres.</span><span class="sxs-lookup"><span data-stu-id="c07b2-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="c07b2-105">Par exemple, si des membres de l’équipe qui travaillent exclusivement sur l’analyse (ingénieurs du support technique, les ingénieurs de devops) ou si vous utilisez un fournisseur de services gérés, vous pouvez toogrant les accès tooonly données d’analyse tout en limitant leur toocreate possibilité, modifier, ou supprimer des ressources.</span><span class="sxs-lookup"><span data-stu-id="c07b2-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="c07b2-106">Cet article explique comment tooquickly s’appliquent à un utilisateur de tooa du contrôle RBAC rôle intégré dans Azure ou créer votre propre rôle personnalisé pour un utilisateur ayant besoin de surveillance des autorisations limitées.</span><span class="sxs-lookup"><span data-stu-id="c07b2-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="c07b2-107">Il décrit ensuite les considérations de sécurité pour vos ressources de moniteur de Windows Azure et comment vous pouvez limiter l’accès toohello données qu’ils contiennent.</span><span class="sxs-lookup"><span data-stu-id="c07b2-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="c07b2-108">Rôles de surveillance intégrés</span><span class="sxs-lookup"><span data-stu-id="c07b2-108">Built-in monitoring roles</span></span>
<span data-ttu-id="c07b2-109">Les rôles intégrés de l’analyse Azure sont conçues toohelp limite l’accès tooresources dans un abonnement tout en permettant les responsables de l’analyse d’infrastructure tooobtain et configurer les données de hello que dont ils ont besoin.</span><span class="sxs-lookup"><span data-stu-id="c07b2-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="c07b2-110">Azure Monitor propose deux rôles prêts à l’emploi : un lecteur d’analyse et un contributeur d’analyse.</span><span class="sxs-lookup"><span data-stu-id="c07b2-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="c07b2-111">Lecteur d’analyse</span><span class="sxs-lookup"><span data-stu-id="c07b2-111">Monitoring Reader</span></span>
<span data-ttu-id="c07b2-112">Utilisateurs affectés du rôle de lecteur d’analyse de hello pour afficher toutes les données d’analyse dans un abonnement, mais ne peut pas modifier n’importe quelle ressource ou modifier des ressources connexes toomonitoring de paramètres.</span><span class="sxs-lookup"><span data-stu-id="c07b2-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="c07b2-113">Ce rôle est approprié pour les utilisateurs dans une organisation, tels que les ingénieurs de prise en charge ou d’opérations, qui ont besoin de toobe en mesure de :</span><span class="sxs-lookup"><span data-stu-id="c07b2-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="c07b2-114">Afficher des tableaux de bord de surveillance dans le portail de hello et créer leurs propres tableaux de bord de surveillance privé.</span><span class="sxs-lookup"><span data-stu-id="c07b2-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="c07b2-115">Requête pour les mesures à l’aide de hello [API REST de Azure moniteur](https://msdn.microsoft.com/library/azure/dn931930.aspx), [applets de commande PowerShell](insights-powershell-samples.md), ou [inter-plateformes CLI](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="c07b2-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="c07b2-116">Requête hello journal d’activité à l’aide de hello portail, Azure analyse API REST, les applets de commande PowerShell ou inter-plateformes CLI.</span><span class="sxs-lookup"><span data-stu-id="c07b2-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="c07b2-117">Hello de vue [les paramètres de diagnostic](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) pour une ressource.</span><span class="sxs-lookup"><span data-stu-id="c07b2-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="c07b2-118">Hello de vue [connecter profil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) pour un abonnement.</span><span class="sxs-lookup"><span data-stu-id="c07b2-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="c07b2-119">Affichez les paramètres de mise à l’échelle automatique.</span><span class="sxs-lookup"><span data-stu-id="c07b2-119">View autoscale settings.</span></span>
* <span data-ttu-id="c07b2-120">Afficher les activités et paramètres d’alerte.</span><span class="sxs-lookup"><span data-stu-id="c07b2-120">View alert activity and settings.</span></span>
* <span data-ttu-id="c07b2-121">Accéder aux données Application Insights et affichez les données dans AI Analytics.</span><span class="sxs-lookup"><span data-stu-id="c07b2-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="c07b2-122">Rechercher des données d’espace de travail Analytique des journaux (OMS), y compris les données d’utilisation de l’espace de travail hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="c07b2-123">Afficher les groupes de gestion de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="c07b2-124">Récupérer le schéma de recherche hello Analytique des journaux (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="c07b2-125">Répertorier les packs d’analyse décisionnelle de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="c07b2-126">Récupérer et exécuter les recherches enregistrées de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="c07b2-127">Récupérer la configuration de stockage hello Analytique des journaux (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="c07b2-128">Ce rôle ne donne pas de données de toolog d’accès en lecture qui a été transmis en continu tooan concentrateur d’événements ou dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="c07b2-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="c07b2-129">[Voir ci-dessous](#security-considerations-for-monitoring-data) pour plus d’informations sur la configuration toothese d’accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="c07b2-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="c07b2-130">Contributeur d’analyse</span><span class="sxs-lookup"><span data-stu-id="c07b2-130">Monitoring Contributor</span></span>
<span data-ttu-id="c07b2-131">Utilisateurs affectés hello collaborateur analyse rôle peut afficher toutes les données d’analyse dans un abonnement et créer ou modifier les paramètres d’analyse, mais ne peut pas modifier d’autres ressources.</span><span class="sxs-lookup"><span data-stu-id="c07b2-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="c07b2-132">Ce rôle est un sur-ensemble du rôle de lecteur de surveillance hello et est approprié pour les membres de l’équipe de surveillance d’une organisation ou les fournisseurs de services gérés qui, en outre les autorisations toohello ci-dessus, devez toobe en mesure de :</span><span class="sxs-lookup"><span data-stu-id="c07b2-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="c07b2-133">Publier des tableaux de bord d’analyse en tant que tableau de bord partagé.</span><span class="sxs-lookup"><span data-stu-id="c07b2-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="c07b2-134">Définissez les [Paramètres de diagnostic](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) pour une ressource.*</span><span class="sxs-lookup"><span data-stu-id="c07b2-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="c07b2-135">Ensemble hello [connecter profil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) pour un subscription.*</span><span class="sxs-lookup"><span data-stu-id="c07b2-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="c07b2-136">Définir les activités et paramètres d’alerte.</span><span class="sxs-lookup"><span data-stu-id="c07b2-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="c07b2-137">Créer des tests web et composants Application Insights.</span><span class="sxs-lookup"><span data-stu-id="c07b2-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="c07b2-138">Répertorier les clés partagées d’espace de travail de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="c07b2-139">Activer ou désactiver les packs d’analyse décisionnelle de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="c07b2-140">Créer ou supprimer des recherches enregistrées de Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="c07b2-141">Créer et supprimer la configuration du stockage hello Analytique des journaux (OMS).</span><span class="sxs-lookup"><span data-stu-id="c07b2-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="c07b2-142">* utilisateur doit disposer également séparément autorisation ListKeys sur tooset de ressource (stockage compte ou l’événement espace de noms hub) hello cible un profil de journal ou un paramètre de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="c07b2-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="c07b2-143">Ce rôle ne donne pas de données de toolog d’accès en lecture qui a été transmis en continu tooan concentrateur d’événements ou dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="c07b2-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="c07b2-144">[Voir ci-dessous](#security-considerations-for-monitoring-data) pour plus d’informations sur la configuration toothese d’accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="c07b2-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="c07b2-145">Autorisations d’analyse et rôles RBAC personnalisés</span><span class="sxs-lookup"><span data-stu-id="c07b2-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="c07b2-146">Si hello au-dessus de rôles intégrés ne répondent pas aux besoins de votre équipe hello, vous pouvez [créer un rôle RBAC personnalisé](../active-directory/role-based-access-control-custom-roles.md) avec des autorisations plus précises.</span><span class="sxs-lookup"><span data-stu-id="c07b2-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="c07b2-147">Voici les opérations courantes d’Azure RBAC. moniteur avec leurs descriptions hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="c07b2-148">Opération</span><span class="sxs-lookup"><span data-stu-id="c07b2-148">Operation</span></span> | <span data-ttu-id="c07b2-149">Description</span><span class="sxs-lookup"><span data-stu-id="c07b2-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c07b2-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="c07b2-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="c07b2-151">Règles d’alerte en lecture/écriture/suppression.</span><span class="sxs-lookup"><span data-stu-id="c07b2-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="c07b2-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="c07b2-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="c07b2-153">Liste d’incidents (historique de règle d’alerte hello déclenchée) des règles d’alerte.</span><span class="sxs-lookup"><span data-stu-id="c07b2-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="c07b2-154">Cela s’applique uniquement toohello portal.</span><span class="sxs-lookup"><span data-stu-id="c07b2-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="c07b2-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="c07b2-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="c07b2-156">Paramètres de mise à l’échelle automatique en lecture/écriture/suppression.</span><span class="sxs-lookup"><span data-stu-id="c07b2-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="c07b2-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="c07b2-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="c07b2-158">Paramètres de diagnostic en lecture/écriture/suppression.</span><span class="sxs-lookup"><span data-stu-id="c07b2-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="c07b2-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="c07b2-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="c07b2-160">Cette autorisation est nécessaire pour les utilisateurs qui doivent accéder aux journaux tooActivity via le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="c07b2-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="c07b2-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="c07b2-162">Événements du journal d’activité, (événements de gestion) dans un abonnement.</span><span class="sxs-lookup"><span data-stu-id="c07b2-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="c07b2-163">Cette autorisation est applicable tooboth accès par programmation et portail toohello journal d’activité.</span><span class="sxs-lookup"><span data-stu-id="c07b2-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="c07b2-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="c07b2-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="c07b2-165">Cette autorisation est nécessaire pour les utilisateurs qui doivent accéder aux journaux tooActivity via le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="c07b2-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="c07b2-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="c07b2-167">Lire des définitions de mesure (liste de types de mesure disponibles pour une ressource).</span><span class="sxs-lookup"><span data-stu-id="c07b2-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="c07b2-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="c07b2-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="c07b2-169">Lire des mesures pour une ressource.</span><span class="sxs-lookup"><span data-stu-id="c07b2-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="c07b2-170">Accès tooalerts, les paramètres de diagnostic et de mesures d’une ressource nécessite que l’utilisateur hello a le type de ressource toohello accès en lecture et l’étendue de la ressource.</span><span class="sxs-lookup"><span data-stu-id="c07b2-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="c07b2-171">(« Écriture ») de créer un profil de paramètre ou le journal de diagnostic que les archives tooa stockage compte ou flux tooevent concentrateurs requiert hello utilisateur tooalso autorisé ListKeys sur la ressource cible de hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="c07b2-172">Par exemple, à l’aide de hello au-dessus de table vous pouvez créer un rôle RBAC personnalisé pour un « activité de lecture du journal » comme suit :</span><span class="sxs-lookup"><span data-stu-id="c07b2-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="c07b2-173">Considérations de sécurité pour l’analyse des données</span><span class="sxs-lookup"><span data-stu-id="c07b2-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="c07b2-174">Les données d’analyse (les fichiers journaux en particulier) peuvent contenir des informations sensibles, comme des adresses IP ou des noms d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="c07b2-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="c07b2-175">La surveillance de données dans Azure se présente sous trois formes de base :</span><span class="sxs-lookup"><span data-stu-id="c07b2-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="c07b2-176">Hello journal d’activité, qui décrit toutes les actions de plan de contrôle sur votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="c07b2-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="c07b2-177">Les journaux de diagnostic, qui sont des journaux émis par une ressource.</span><span class="sxs-lookup"><span data-stu-id="c07b2-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="c07b2-178">Les mesures, qui sont émises par les ressources.</span><span class="sxs-lookup"><span data-stu-id="c07b2-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="c07b2-179">Les trois de ces types de données peuvent être stockées dans un compte de stockage ou transmis en continu tooEvent concentrateur, qui sont tous deux des ressources Azure à usage général.</span><span class="sxs-lookup"><span data-stu-id="c07b2-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="c07b2-180">Comme ce sont des ressources à usage général, leur création, leur suppression et leur accès sont des opérations privilégiées généralement réservées à un administrateur.</span><span class="sxs-lookup"><span data-stu-id="c07b2-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="c07b2-181">Nous vous suggérons d’utiliser hello pratiques pour l’utilisation incorrecte de tooprevent liés à l’analyse des ressources :</span><span class="sxs-lookup"><span data-stu-id="c07b2-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="c07b2-182">Utilisez un compte de stockage unique, dédié pour l’analyse des données.</span><span class="sxs-lookup"><span data-stu-id="c07b2-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="c07b2-183">Si vous devez tooseparate analyse les données en plusieurs comptes de stockage, l’utilisation d’un compte de stockage entre l’analyse ne partagent jamais et non analyse des données, comme cela peuvent donner par inadvertance ceux qui ne doivent accéder qu’aux données toomonitoring (par exemple).</span><span class="sxs-lookup"><span data-stu-id="c07b2-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="c07b2-184">serveur SIEM tiers) accéder aux données d’analyse de toonon.</span><span class="sxs-lookup"><span data-stu-id="c07b2-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="c07b2-185">Utiliser un unique, dédié Service Bus ou concentrateur d’événements espace de noms entre tous les paramètres de diagnostic pour hello de la même raison que ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="c07b2-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="c07b2-186">Limiter les comptes d’accès au stockage toomonitoring ou concentrateurs d’événements en les conservant dans un groupe de ressources distinct, et [utiliser étendue](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) sur vos rôles analyses toolimit accès tooonly ce groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="c07b2-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="c07b2-187">Ne jamais autoriser hello ListKeys pour les comptes de stockage ou les concentrateurs d’événements au niveau de l’étendue de l’abonnement lorsqu’un utilisateur a seulement besoin d’accéder à des données toomonitoring.</span><span class="sxs-lookup"><span data-stu-id="c07b2-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="c07b2-188">Au lieu de cela, accorder ces autorisations toohello utilisateur à une ressource ou un groupe de ressources (si vous avez un groupe de ressources surveillance dédié) étendue.</span><span class="sxs-lookup"><span data-stu-id="c07b2-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="c07b2-189">Limitation des comptes d’accès de stockage toomonitoring</span><span class="sxs-lookup"><span data-stu-id="c07b2-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="c07b2-190">Lorsqu’un utilisateur ou une application a besoin d’accéder aux données toomonitoring dans un compte de stockage, vous devez [générer une SAP de compte](https://msdn.microsoft.com/library/azure/mt584140.aspx) hello compte de stockage qui contient les données d’analyse avec un stockage tooblob accès en lecture seule de niveau de service.</span><span class="sxs-lookup"><span data-stu-id="c07b2-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="c07b2-191">Dans PowerShell, cela pourrait ressembler à :</span><span class="sxs-lookup"><span data-stu-id="c07b2-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="c07b2-192">Vous pouvez alors accorder entité toohello jeton hello nécessitant tooread à partir de ce compte de stockage, et peut répertorier et lire à partir de tous les objets BLOB dans ce compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="c07b2-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="c07b2-193">Ou bien, si vous devez toocontrol cette autorisation avec RBAC, vous pouvez accorder ce hello entité Microsoft.Storage/storageAccounts/listkeys/action l’autorisation sur ce compte de stockage particulier.</span><span class="sxs-lookup"><span data-stu-id="c07b2-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="c07b2-194">Cela est nécessaire pour les utilisateurs qui ont besoin de tooset en mesure de toobe un diagnostic paramètre ou journal profil tooarchive tooa compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="c07b2-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="c07b2-195">Par exemple, vous pouvez créer hello suivant rôle RBAC personnalisé pour un utilisateur ou une application qui ne doit tooread à partir d’un compte de stockage :</span><span class="sxs-lookup"><span data-stu-id="c07b2-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="c07b2-196">Hello ListKeys autorisation permet de clés de compte de stockage principal et secondaire hello utilisateur toolist hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="c07b2-197">Ces clés accorder utilisateur de hello toutes signées autorisations (lire, écrire, créer des objets BLOB, supprimer des objets BLOB, etc.) dans l’ensemble signé services (blob, file d’attente, table, fichier) dans ce compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="c07b2-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="c07b2-198">Nous vous recommandons d’utiliser un SAP de compte comme décrit ci-dessus, lorsque cela est possible.</span><span class="sxs-lookup"><span data-stu-id="c07b2-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="c07b2-199">Limitation des concentrateurs d’événements liés à toomonitoring accès</span><span class="sxs-lookup"><span data-stu-id="c07b2-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="c07b2-200">Un modèle similaire peut être suivi avec les concentrateurs d’événements, mais vous devez toocreate une règle d’autorisation d’écoute dédiée.</span><span class="sxs-lookup"><span data-stu-id="c07b2-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="c07b2-201">Si vous souhaitez toogrant accès tooan application nécessitant uniquement des concentrateurs d’événements liés à toomonitoring toolisten, hello suivant :</span><span class="sxs-lookup"><span data-stu-id="c07b2-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="c07b2-202">Créer une stratégie d’accès partagé sur hello des hubs d’événements qui ont été créés pour la diffusion en continu des données d’analyse avec uniquement des revendications d’écoute.</span><span class="sxs-lookup"><span data-stu-id="c07b2-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="c07b2-203">Pour cela, dans le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-203">This can be done in hello portal.</span></span> <span data-ttu-id="c07b2-204">Par exemple, vous pouvez l’appeler « monitoringReadOnly ».</span><span class="sxs-lookup"><span data-stu-id="c07b2-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="c07b2-205">Si possible, vous pouvez toogive clé directement toohello consommateur et ignorer l’étape suivante de hello.</span><span class="sxs-lookup"><span data-stu-id="c07b2-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="c07b2-206">Si le consommateur de hello doit toobe tooget en mesure de hello clé ad hoc, accordez hello hello ListKeys intervention pour ce concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c07b2-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="c07b2-207">Il est également nécessaire pour les utilisateurs qui doivent tooset en mesure de toobe un paramètre de diagnostic ou des journaux de concentrateurs de tooevent toostream de profil.</span><span class="sxs-lookup"><span data-stu-id="c07b2-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="c07b2-208">Par exemple, vous pouvez créer une règle RBAC :</span><span class="sxs-lookup"><span data-stu-id="c07b2-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="c07b2-209">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="c07b2-209">Next steps</span></span>
* [<span data-ttu-id="c07b2-210">En savoir plus sur RBAC et les autorisations dans Resource Manager</span><span class="sxs-lookup"><span data-stu-id="c07b2-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="c07b2-211">Vue d’ensemble de hello en lecture de la surveillance dans Azure</span><span class="sxs-lookup"><span data-stu-id="c07b2-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)

