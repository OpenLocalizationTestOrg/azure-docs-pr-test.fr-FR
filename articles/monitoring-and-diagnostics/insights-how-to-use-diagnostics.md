---
title: Activation de la surveillance et des diagnostics dans Microsoft Azure | Microsoft Docs
description: "Découvrez comment configurer des diagnostics pour vos ressources dans Azure."
author: rboucher
manager: carolz
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: af1947a9-c211-4aa1-8924-880a86240be4
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/06/2017
ms.author: robb
ms.openlocfilehash: b82bb1ab419831e803689edb2a2a7fe256dde5a2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="enable-monitoring-and-diagnostics"></a><span data-ttu-id="dffb8-103">Activation de la surveillance et des diagnostics</span><span class="sxs-lookup"><span data-stu-id="dffb8-103">Enable monitoring and diagnostics</span></span>
<span data-ttu-id="dffb8-104">Dans le [portail Azure](https://portal.azure.com), vous pouvez configurer les données de surveillance et de diagnostic, riches et fréquentes, concernant vos ressources.</span><span class="sxs-lookup"><span data-stu-id="dffb8-104">In the [Azure Portal](https://portal.azure.com), you can configure rich, frequent, monitoring and diagnostics data about your resources.</span></span> <span data-ttu-id="dffb8-105">Vous pouvez également utiliser [l’API REST](https://msdn.microsoft.com/library/azure/dn931932.aspx) ou le [Kit de développement (SDK) .NET](http://www.nuget.org/packages/Microsoft.Azure.Management.Monitor) pour configurer les diagnostics par programmation.</span><span class="sxs-lookup"><span data-stu-id="dffb8-105">You can also use the [REST API](https://msdn.microsoft.com/library/azure/dn931932.aspx) or [.NET SDK](http://www.nuget.org/packages/Microsoft.Azure.Management.Monitor) to configure diagnostics programmatically.</span></span>

<span data-ttu-id="dffb8-106">Les données de diagnostic, de surveillance et de mesure d’Azure sont enregistrées dans le compte de stockage de votre choix.</span><span class="sxs-lookup"><span data-stu-id="dffb8-106">Diagnostics, monitoring and metric data in Azure is saved into a Storage account of your choice.</span></span> <span data-ttu-id="dffb8-107">Ceci vous permet d'utiliser les outils avec lesquels vous souhaitez lire les données, de l'explorateur de stockage à Power BI,  en passant par les outils tiers.</span><span class="sxs-lookup"><span data-stu-id="dffb8-107">This allows you to use whatever tooling you want to read the data, from a storage explorer, to Power BI to third-party tooling.</span></span>

## <a name="when-you-create-a-resource"></a><span data-ttu-id="dffb8-108">Lorsque vous créez une ressource</span><span class="sxs-lookup"><span data-stu-id="dffb8-108">When you create a resource</span></span>
<span data-ttu-id="dffb8-109">La plupart des services vous permettent d'activer les diagnostics lorsque vous les créez dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="dffb8-109">Most services allow you to enable diagnostics when you first create them in the [Azure Portal](https://portal.azure.com).</span></span>

1. <span data-ttu-id="dffb8-110">Accédez à **Nouveau** et choisissez la ressource qui vous intéresse.</span><span class="sxs-lookup"><span data-stu-id="dffb8-110">Go to **New** and choose the resource you are interested in.</span></span>
2. <span data-ttu-id="dffb8-111">Sélectionnez **Configuration facultative**.</span><span class="sxs-lookup"><span data-stu-id="dffb8-111">Select **Optional configuration**.</span></span>
    <span data-ttu-id="dffb8-112">![Panneau des diagnostics](./media/insights-how-to-use-diagnostics/Insights_CreateTime.png)</span><span class="sxs-lookup"><span data-stu-id="dffb8-112">![Diagnostics blade](./media/insights-how-to-use-diagnostics/Insights_CreateTime.png)</span></span>
3. <span data-ttu-id="dffb8-113">Sélectionnez **Diagnostics**, puis cliquez sur **Activé**.</span><span class="sxs-lookup"><span data-stu-id="dffb8-113">Select **Diagnostics**, and click **On**.</span></span> <span data-ttu-id="dffb8-114">Vous devrez ensuite choisir le compte de stockage dans lequel vous souhaitez que les diagnostics soient enregistrés.</span><span class="sxs-lookup"><span data-stu-id="dffb8-114">You will need to choose the Storage account that you want diagnostics to be saved to.</span></span> <span data-ttu-id="dffb8-115">Des frais de données normaux vous sont facturés pour le stockage et les transactions lorsque vous envoyez des diagnostics à un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="dffb8-115">You’ll be charged normal data rates for storage and transactions when you send diagnostics to a storage account.</span></span>
4. <span data-ttu-id="dffb8-116">Cliquez sur **OK** et créez la ressource.</span><span class="sxs-lookup"><span data-stu-id="dffb8-116">Click **OK** and create the resource.</span></span>

## <a name="change-settings-for-an-existing-resource"></a><span data-ttu-id="dffb8-117">Modifiez les paramètres d'une ressource existante</span><span class="sxs-lookup"><span data-stu-id="dffb8-117">Change settings for an existing resource</span></span>
<span data-ttu-id="dffb8-118">Si vous avez déjà créé une ressource et que vous souhaitez modifier les paramètres de diagnostic (pour modifier le niveau de collecte de données, par exemple), vous pouvez le faire directement dans le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="dffb8-118">If you have already created a resource and you want to change the diagnostics settings (to change the level of data collection, for example), you can do that right in the Azure Portal.</span></span>

1. <span data-ttu-id="dffb8-119">Accédez à la ressource et cliquez sur la commande **Paramètres** .</span><span class="sxs-lookup"><span data-stu-id="dffb8-119">Go to the resource and click the **Settings** command.</span></span>
2. <span data-ttu-id="dffb8-120">Sélectionnez **Diagnostics**.</span><span class="sxs-lookup"><span data-stu-id="dffb8-120">Select **Diagnostics**.</span></span>
3. <span data-ttu-id="dffb8-121">Le panneau **Diagnostics** dispose, pour cette ressource, de tous les diagnostics possibles et d’une surveillance de collecte de données.</span><span class="sxs-lookup"><span data-stu-id="dffb8-121">The **Diagnostics** blade has all of the possible diagnostics and monitoring collection data for that resource.</span></span> <span data-ttu-id="dffb8-122">Pour certaines ressources, vous pouvez également choisir une stratégie de **Rétention** des données, vous permettant de les nettoyer de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="dffb8-122">For some resources you can also choose a **Retention** policy for the data, to clean it up from your storage account.</span></span>
    <span data-ttu-id="dffb8-123">![Diagnostics de stockage](./media/insights-how-to-use-diagnostics/Insights_StorageDiagnostics.png)</span><span class="sxs-lookup"><span data-stu-id="dffb8-123">![Storage diagnostics](./media/insights-how-to-use-diagnostics/Insights_StorageDiagnostics.png)</span></span>
4. <span data-ttu-id="dffb8-124">Une fois que vous avez choisi vos paramètres, cliquez sur la commande **Enregistrer** .</span><span class="sxs-lookup"><span data-stu-id="dffb8-124">Once you've chosen your settings, click the **Save** command.</span></span> <span data-ttu-id="dffb8-125">La surveillance des données peut prendre un certain temps avant d’apparaître, si vous l'activez pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="dffb8-125">It may take a little while for monitoring data to show up if you are enabling it for the first time.</span></span>

### <a name="categories-of-data-collection-for-virtual-machines"></a><span data-ttu-id="dffb8-126">Catégories de collecte de données pour les machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="dffb8-126">Categories of data collection for virtual machines</span></span>
<span data-ttu-id="dffb8-127">Pour les machines virtuelles, toutes les mesures et tous les journaux sont enregistrés à des intervalles d'une minute, de façon à vous fournir les informations les plus récentes possible concernant votre machine.</span><span class="sxs-lookup"><span data-stu-id="dffb8-127">For virtual machines all metrics and logs will be recorded at one-minute intervals, so you can always have the most up-to-date information about your machine.</span></span>

* <span data-ttu-id="dffb8-128">**Mesures de base** : mesures sur l'état d'intégrité de votre machine virtuelle (par ex., processeur et mémoire)</span><span class="sxs-lookup"><span data-stu-id="dffb8-128">**Basic metrics** : Health metrics about your virtual machine such as processor and memory</span></span>
* <span data-ttu-id="dffb8-129">**Mesures réseau et mesures Web** : mesures concernant vos connexions réseau et services Web</span><span class="sxs-lookup"><span data-stu-id="dffb8-129">**Network and web metrics** : Metrics about your network connections and web services</span></span>
* <span data-ttu-id="dffb8-130">**Mesures .NET** : mesures concernant les applications .NET et ASP.NET exécutées sur votre machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="dffb8-130">**.NET metrics** : Metrics about the .NET and ASP.NET applications running on your virtual machine</span></span>
* <span data-ttu-id="dffb8-131">**Mesures SQL** : si vous exécutez Microsoft SQL Service, ses mesures de performances</span><span class="sxs-lookup"><span data-stu-id="dffb8-131">**SQL metrics** : If you are running Microsoft SQL Service, its performance metrics</span></span>
* <span data-ttu-id="dffb8-132">**Journaux d'événements Windows de l'application** : événements Windows envoyés au canal Application</span><span class="sxs-lookup"><span data-stu-id="dffb8-132">**Windows event application logs** : Windows events that are sent to the application channel</span></span>
* <span data-ttu-id="dffb8-133">**Journaux d'événements Windows du système** : événements Windows envoyés au canal Système.</span><span class="sxs-lookup"><span data-stu-id="dffb8-133">**Windows event system logs** : Windows events that are sent to the system channel.</span></span> <span data-ttu-id="dffb8-134">Cela inclut également tous les événements de [Microsoft Antimalware](http://go.microsoft.com/fwlink/?LinkID=404171&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="dffb8-134">This also includes all events from [Microsoft Antimalware](http://go.microsoft.com/fwlink/?LinkID=404171&clcid=0x409).</span></span>
* <span data-ttu-id="dffb8-135">**Journaux d'événements Windows de la sécurité** : événements Windows envoyés au canal Sécurité</span><span class="sxs-lookup"><span data-stu-id="dffb8-135">**Windows event security logs** : Windows events that are sent to the security channel</span></span>
* <span data-ttu-id="dffb8-136">**Journaux d'infrastructure de diagnostics** : journalisation concernant l'infrastructure de collecte de diagnostics</span><span class="sxs-lookup"><span data-stu-id="dffb8-136">**Diagnostics infrastructure logs** : Logging about the diagnostics collection infrastructure</span></span>
* <span data-ttu-id="dffb8-137">**Journaux IIS** : journaux concernant votre serveur IIS</span><span class="sxs-lookup"><span data-stu-id="dffb8-137">**IIS logs** : Logs about your IIS server</span></span>

<span data-ttu-id="dffb8-138">Notez qu’à ce stade, certaines distributions de Linux ne sont pas prises en charge, et que l'agent invité doit être installé sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="dffb8-138">Note that at this time certain distributions of Linux are not supported, and, the Guest Agent must be installed on the virtual machine.</span></span>

## <a name="next-steps"></a><span data-ttu-id="dffb8-139">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="dffb8-139">Next steps</span></span>
* <span data-ttu-id="dffb8-140">[Réceptions de notifications d'alerte](insights-receive-alert-notifications.md) lorsque des événements opérationnels se produisent ou que des mesures dépassent un seuil.</span><span class="sxs-lookup"><span data-stu-id="dffb8-140">[Receive alert notifications](insights-receive-alert-notifications.md) whenever operational events happen or metrics cross a threshold.</span></span>
* <span data-ttu-id="dffb8-141">[Surveillance des mesures de service](insights-how-to-customize-monitoring.md) pour vous assurer que votre service est disponible et réactif.</span><span class="sxs-lookup"><span data-stu-id="dffb8-141">[Monitor service metrics](insights-how-to-customize-monitoring.md) to make sure your service is available and responsive.</span></span>
* <span data-ttu-id="dffb8-142">[Mise à l’échelle automatique du nombre d’instances](insights-how-to-scale.md) pour vous assurer que votre service est mis à l’échelle en fonction de la demande.</span><span class="sxs-lookup"><span data-stu-id="dffb8-142">[Scale instance count automatically](insights-how-to-scale.md) to make sure your service scale based on demand.</span></span>
* <span data-ttu-id="dffb8-143">[Surveillance des performances d'une application](../application-insights/app-insights-azure-web-apps.md) si vous voulez comprendre exactement comment votre code s'exécute dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="dffb8-143">[Monitor application performance](../application-insights/app-insights-azure-web-apps.md) if you want to understand exactly how your code is performing in the cloud.</span></span>
* <span data-ttu-id="dffb8-144">[Affichage des événements et du journal d’activité](insights-debugging-with-events.md) pour découvrir tout ce qui s'est produit dans votre service.</span><span class="sxs-lookup"><span data-stu-id="dffb8-144">[View events and activity log](insights-debugging-with-events.md) to learn everything that has happened in your service.</span></span>
* <span data-ttu-id="dffb8-145">[Suivi de l'intégrité du service](insights-service-health.md) pour déterminer à quel moment Azure a rencontré des interruptions de service ou une dégradation des performances.</span><span class="sxs-lookup"><span data-stu-id="dffb8-145">[Track service health](insights-service-health.md) to find out when Azure has experienced performance degradation or service interruptions.</span></span>

