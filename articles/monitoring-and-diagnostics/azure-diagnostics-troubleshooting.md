---
title: "Résolution des problèmes des diagnostics Azure | Microsoft Docs"
description: "Résolution des problèmes lors de l'utilisation des diagnostics Azure dans Azure Virtual Machines, Service Fabric ou Cloud Services."
services: monitoring-and-diagnostics
documentationcenter: .net
author: rboucher
manager: carmonm
editor: 
ms.assetid: 66469bce-d457-4d1e-b550-a08d2be4d28c
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 07/12/2017
ms.author: robb
ms.openlocfilehash: a0cb529836b14df71e83616f4f625a002c535b7b
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-diagnostics-troubleshooting"></a><span data-ttu-id="7829f-103">Résolution des problèmes des diagnostics Azure</span><span class="sxs-lookup"><span data-stu-id="7829f-103">Azure Diagnostics Troubleshooting</span></span>
<span data-ttu-id="7829f-104">Informations de résolution des problèmes liés à l’utilisation des diagnostics Azure.</span><span class="sxs-lookup"><span data-stu-id="7829f-104">Troubleshooting information relevant to using Azure Diagnostics.</span></span> <span data-ttu-id="7829f-105">Pour plus d’informations sur les diagnostics Azure, voir [Présentation des diagnostics Azure](azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="7829f-105">For more information on Azure diagnostics, see [Azure Diagnostics Overview](azure-diagnostics.md).</span></span>

## <a name="logical-components"></a><span data-ttu-id="7829f-106">Composants logiques</span><span class="sxs-lookup"><span data-stu-id="7829f-106">Logical Components</span></span>
<span data-ttu-id="7829f-107">**Lanceur du plug-in Diagnostics (DiagnosticsPluginLauncher.exe)** : lance l’extension Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-107">**Diagnostics Plugin Launcher (DiagnosticsPluginLauncher.exe)**: Launches the Azure Diagnostics extension.</span></span> <span data-ttu-id="7829f-108">Sert de point d’entrée de processus.</span><span class="sxs-lookup"><span data-stu-id="7829f-108">Serves as the entry point process.</span></span>

<span data-ttu-id="7829f-109">**Plug-in Diagnostics (DiagnosticsPlugin.exe)** : processus principal qui est démarré par le lanceur indiqué ci-dessus et qui configure l’agent de surveillance, le lance et gère sa durée de vie.</span><span class="sxs-lookup"><span data-stu-id="7829f-109">**Diagnostics Plugin (DiagnosticsPlugin.exe)**: Main process that is launched by the launcher above and configures the Monitoring Agent, launches it and manages its lifetime.</span></span> 

<span data-ttu-id="7829f-110">**Agent de surveillance (processus MonAgent\*.exe)** : ces processus effectuent la majeure partie du travail, c.-à-d. la surveillance, la collecte et le transfert des données de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="7829f-110">**Monitoring Agent (MonAgent\*.exe processes)**: These processes do the bulk of the work; i.e., monitoring, collection and transfer of the diagnostics data.</span></span>  

## <a name="logartifact-paths"></a><span data-ttu-id="7829f-111">Chemins d’accès des journaux/artefacts</span><span class="sxs-lookup"><span data-stu-id="7829f-111">Log/Artifact Paths</span></span>
<span data-ttu-id="7829f-112">Voici les chemins d’accès aux journaux et artefacts importants.</span><span class="sxs-lookup"><span data-stu-id="7829f-112">Here are the paths to some important logs and artifacts.</span></span> <span data-ttu-id="7829f-113">Nous y faisons référence dans la suite du document :</span><span class="sxs-lookup"><span data-stu-id="7829f-113">We keep referring to these throughout the rest of the document:</span></span>
### <a name="cloud-services"></a><span data-ttu-id="7829f-114">Services cloud</span><span class="sxs-lookup"><span data-stu-id="7829f-114">Cloud Services</span></span>
| <span data-ttu-id="7829f-115">Artefact</span><span class="sxs-lookup"><span data-stu-id="7829f-115">Artifact</span></span> | <span data-ttu-id="7829f-116">Chemin</span><span class="sxs-lookup"><span data-stu-id="7829f-116">Path</span></span> |
| --- | --- |
| <span data-ttu-id="7829f-117">**Fichier de configuration d’Azure Diagnostics**</span><span class="sxs-lookup"><span data-stu-id="7829f-117">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="7829f-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\Config.txt</span><span class="sxs-lookup"><span data-stu-id="7829f-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\Config.txt</span></span> |
| <span data-ttu-id="7829f-119">**Fichiers journaux**</span><span class="sxs-lookup"><span data-stu-id="7829f-119">**Log files**</span></span> | <span data-ttu-id="7829f-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\\</span><span class="sxs-lookup"><span data-stu-id="7829f-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\\</span></span> |
| <span data-ttu-id="7829f-121">**Magasin local pour les données de diagnostic**</span><span class="sxs-lookup"><span data-stu-id="7829f-121">**Local store for diagnostics data**</span></span> | <span data-ttu-id="7829f-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="7829f-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Tables</span></span> |
| <span data-ttu-id="7829f-123">**Fichier de configuration de l’agent de surveillance**</span><span class="sxs-lookup"><span data-stu-id="7829f-123">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="7829f-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="7829f-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="7829f-125">**Package d’extension Azure Diagnostics**</span><span class="sxs-lookup"><span data-stu-id="7829f-125">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="7829f-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version></span><span class="sxs-lookup"><span data-stu-id="7829f-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version></span></span> |
| <span data-ttu-id="7829f-127">**Chemin d’accès à l’utilitaire de collecte des journaux**</span><span class="sxs-lookup"><span data-stu-id="7829f-127">**Log collection utility path**</span></span> | <span data-ttu-id="7829f-128">%SystemDrive%\Packages\GuestAgent\\</span><span class="sxs-lookup"><span data-stu-id="7829f-128">%SystemDrive%\Packages\GuestAgent\\</span></span> |
| <span data-ttu-id="7829f-129">**Fichier journal MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="7829f-129">**MonAgentHost log file**</span></span> | <span data-ttu-id="7829f-130">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span><span class="sxs-lookup"><span data-stu-id="7829f-130">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

### <a name="virtual-machines"></a><span data-ttu-id="7829f-131">Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="7829f-131">Virtual Machines</span></span>
| <span data-ttu-id="7829f-132">Artefact</span><span class="sxs-lookup"><span data-stu-id="7829f-132">Artifact</span></span> | <span data-ttu-id="7829f-133">Chemin</span><span class="sxs-lookup"><span data-stu-id="7829f-133">Path</span></span> |
| --- | --- |
| <span data-ttu-id="7829f-134">**Fichier de configuration d’Azure Diagnostics**</span><span class="sxs-lookup"><span data-stu-id="7829f-134">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="7829f-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\RuntimeSettings</span><span class="sxs-lookup"><span data-stu-id="7829f-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\RuntimeSettings</span></span> |
| <span data-ttu-id="7829f-136">**Fichiers journaux**</span><span class="sxs-lookup"><span data-stu-id="7829f-136">**Log files**</span></span> | <span data-ttu-id="7829f-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Logs\\</span><span class="sxs-lookup"><span data-stu-id="7829f-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Logs\\</span></span> |
| <span data-ttu-id="7829f-138">**Magasin local pour les données de diagnostic**</span><span class="sxs-lookup"><span data-stu-id="7829f-138">**Local store for diagnostics data**</span></span> | <span data-ttu-id="7829f-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="7829f-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Tables</span></span> |
| <span data-ttu-id="7829f-140">**Fichier de configuration de l’agent de surveillance**</span><span class="sxs-lookup"><span data-stu-id="7829f-140">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="7829f-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="7829f-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="7829f-142">**Fichier d’état**</span><span class="sxs-lookup"><span data-stu-id="7829f-142">**Status file**</span></span> | <span data-ttu-id="7829f-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Status</span><span class="sxs-lookup"><span data-stu-id="7829f-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Status</span></span> |
| <span data-ttu-id="7829f-144">**Package d’extension Azure Diagnostics**</span><span class="sxs-lookup"><span data-stu-id="7829f-144">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="7829f-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion></span><span class="sxs-lookup"><span data-stu-id="7829f-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion></span></span>|
| <span data-ttu-id="7829f-146">**Chemin d’accès à l’utilitaire de collecte des journaux**</span><span class="sxs-lookup"><span data-stu-id="7829f-146">**Log collection utility path**</span></span> | <span data-ttu-id="7829f-147">C:\WindowsAzure\Packages</span><span class="sxs-lookup"><span data-stu-id="7829f-147">C:\WindowsAzure\Packages</span></span> |
| <span data-ttu-id="7829f-148">**Fichier journal MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="7829f-148">**MonAgentHost log file**</span></span> | <span data-ttu-id="7829f-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span><span class="sxs-lookup"><span data-stu-id="7829f-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

## <a name="metric-data-doesnt-show-in-azure-portal"></a><span data-ttu-id="7829f-150">Les données métriques ne s’affichent pas dans le portail Azure</span><span class="sxs-lookup"><span data-stu-id="7829f-150">Metric data doesn't show in Azure portal</span></span>
<span data-ttu-id="7829f-151">Azure Diagnostics fournit un ensemble de données métriques, qui peuvent être affichées dans le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="7829f-151">Azure Diagnostics provides a bunch of metric data, which can be displayed in Azure portal.</span></span> <span data-ttu-id="7829f-152">Si vous avez des problèmes liés à l’affichage des données dans le portail, vérifiez le compte de stockage des diagnostics -> table WADMetrics\* pour voir si les enregistrements métriques correspondants sont présents.</span><span class="sxs-lookup"><span data-stu-id="7829f-152">If you have problems with seeing these data in portal, check the diagnostics storage account -> WADMetrics\* table to see if the corresponding metric records are there.</span></span> <span data-ttu-id="7829f-153">Ici, PartitionKey de la table est l’ID de ressource des machines virtuelles ou du groupes de machines virtuelles identiques et le RowKey est le nom métrique, autrement dit, le nom du compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="7829f-153">Here, the PartitionKey of the table is the resource ID of virtual machine or virtual machine scale set, and the RowKey is the metric name i.e. performance counter name.</span></span>

<span data-ttu-id="7829f-154">Si l’ID de ressource est incorrecte, vérifiez Configuration de Diagnostics -> Mesures -> ResourceId pour voir si l’ID de ressource est défini correctement.</span><span class="sxs-lookup"><span data-stu-id="7829f-154">If the resource ID is incorrect, check Diagnostics Configuration -> Metrics -> ResourceId to see if the resource ID is set correctly.</span></span>

<span data-ttu-id="7829f-155">S’il n’existe aucune donnée pour la mesure spécifique, vérifiez Configuration de Diagnostics -> PerformanceCounter pour voir si la mesure (compteur de performances) est incluse.</span><span class="sxs-lookup"><span data-stu-id="7829f-155">If there's no data for the specific metric, check Diagnostics Configuration -> PerformanceCounter to see if the metric(performance counter) is included.</span></span> <span data-ttu-id="7829f-156">Les compteurs suivants sont activés par défaut.</span><span class="sxs-lookup"><span data-stu-id="7829f-156">We enable the following counters by default.</span></span>
- <span data-ttu-id="7829f-157">\Processus(_Total)\% Temps processeur</span><span class="sxs-lookup"><span data-stu-id="7829f-157">\Processor(_Total)\% Processor Time</span></span>
- <span data-ttu-id="7829f-158">\Memory\Octets disponibles</span><span class="sxs-lookup"><span data-stu-id="7829f-158">\Memory\Available Bytes</span></span>
- <span data-ttu-id="7829f-159">\ASP.NET Applications(__Total__)\Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="7829f-159">\ASP.NET Applications(__Total__)\Requests/Sec</span></span>
- <span data-ttu-id="7829f-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span><span class="sxs-lookup"><span data-stu-id="7829f-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span></span>
- <span data-ttu-id="7829f-161">\ASP.NET\Demandes en file d’attente</span><span class="sxs-lookup"><span data-stu-id="7829f-161">\ASP.NET\Requests Queued</span></span>
- <span data-ttu-id="7829f-162">\ASP.NET\Demandes rejetées</span><span class="sxs-lookup"><span data-stu-id="7829f-162">\ASP.NET\Requests Rejected</span></span>
- <span data-ttu-id="7829f-163">\Processor(w3wp)\% Temps processeur</span><span class="sxs-lookup"><span data-stu-id="7829f-163">\Processor(w3wp)\% Processor Time</span></span>
- <span data-ttu-id="7829f-164">\Processus(w3wp) \Octets privés</span><span class="sxs-lookup"><span data-stu-id="7829f-164">\Process(w3wp)\Private Bytes</span></span>
- <span data-ttu-id="7829f-165">\Processus(WaIISHost)\% Temps processeur</span><span class="sxs-lookup"><span data-stu-id="7829f-165">\Process(WaIISHost)\% Processor Time</span></span>
- <span data-ttu-id="7829f-166">\Processus(WaIISHost)\Octets privés</span><span class="sxs-lookup"><span data-stu-id="7829f-166">\Process(WaIISHost)\Private Bytes</span></span>
- <span data-ttu-id="7829f-167">\Processus(WaWorkerHost)\% Temps processeur</span><span class="sxs-lookup"><span data-stu-id="7829f-167">\Process(WaWorkerHost)\% Processor Time</span></span>
- <span data-ttu-id="7829f-168">\Processus(WaWorkerHost)\Octets privés</span><span class="sxs-lookup"><span data-stu-id="7829f-168">\Process(WaWorkerHost)\Private Bytes</span></span>
- <span data-ttu-id="7829f-169">\Mémoire\Défauts de page/s</span><span class="sxs-lookup"><span data-stu-id="7829f-169">\Memory\Page Faults/sec</span></span>
- <span data-ttu-id="7829f-170">\.Mémoire NET CLR(_Global_)\% Temps en GC</span><span class="sxs-lookup"><span data-stu-id="7829f-170">\.NET CLR Memory(_Global_)\% Time in GC</span></span>
- <span data-ttu-id="7829f-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="7829f-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="7829f-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="7829f-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span></span>
- <span data-ttu-id="7829f-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="7829f-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="7829f-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="7829f-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span></span>

<span data-ttu-id="7829f-175">Si la configuration est correctement définie mais que vous ne pouvez toujours pas voir les données métriques, suivez les directives ci-dessous pour l’investigation future.</span><span class="sxs-lookup"><span data-stu-id="7829f-175">If the configuration is set correctly but you still cannot see the metric data, follow the guidelines below for the further investigation.</span></span>


## <a name="azure-diagnostics-is-not-starting"></a><span data-ttu-id="7829f-176">Azure Diagnostics ne démarre pas</span><span class="sxs-lookup"><span data-stu-id="7829f-176">Azure Diagnostics is not Starting</span></span>
<span data-ttu-id="7829f-177">Regardez les fichiers **DiagnosticsPluginLauncher.log** et **DiagnosticsPlugin.log** à l’emplacement des fichiers journaux indiqués ci-dessous pour en savoir plus sur les raisons de l’échec du démarrage des diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-177">Look at **DiagnosticsPluginLauncher.log** and **DiagnosticsPlugin.log** files from the location of the log files provided above for information on why diagnostics failed to start.</span></span> 

<span data-ttu-id="7829f-178">Si ces journaux indiquent `Monitoring Agent not reporting success after launch`, cela signifie que le lancement de MonAgentHost.exe a échoué.</span><span class="sxs-lookup"><span data-stu-id="7829f-178">If these logs indicate `Monitoring Agent not reporting success after launch`, it means there was a failure launching MonAgentHost.exe.</span></span> <span data-ttu-id="7829f-179">Consultez les journaux correspondant à l’emplacement indiqué pour `MonAgentHost log file` dans la section ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="7829f-179">Look at the logs for that in the location indicated for `MonAgentHost log file` in the section above.</span></span>

<span data-ttu-id="7829f-180">La dernière ligne des fichiers journaux contient le code de sortie.</span><span class="sxs-lookup"><span data-stu-id="7829f-180">The last line of the log files contains the exit code.</span></span>  

```
DiagnosticsPluginLauncher.exe Information: 0 : [4/16/2016 6:24:15 AM] DiagnosticPlugin exited with code 0
```
<span data-ttu-id="7829f-181">Si le code de sortie est **négatif**, reportez-vous au [tableau des codes de sortie](#azure-diagnostics-plugin-exit-codes) dans la section [Références](#references).</span><span class="sxs-lookup"><span data-stu-id="7829f-181">If you find a **negative** exit code, refer to the [exit code table](#azure-diagnostics-plugin-exit-codes) in the [References](#references).</span></span>

## <a name="diagnostics-data-is-not-logged-to-azure-storage"></a><span data-ttu-id="7829f-182">Les données des diagnostics ne sont pas consignées dans Azure Storage</span><span class="sxs-lookup"><span data-stu-id="7829f-182">Diagnostics Data is Not Logged to Azure Storage</span></span>
<span data-ttu-id="7829f-183">Déterminez si aucune donnée ne s’affiche ou si seules certaines d’entre elles ne s’affichent pas.</span><span class="sxs-lookup"><span data-stu-id="7829f-183">Determine if no data is showing up or only some of the data is not showing up.</span></span>

### <a name="diagnostics-infrastructure-logs"></a><span data-ttu-id="7829f-184">Journaux d’infrastructure de diagnostics</span><span class="sxs-lookup"><span data-stu-id="7829f-184">Diagnostics Infrastructure Logs</span></span>
<span data-ttu-id="7829f-185">Les journaux d’infrastructure de diagnostics correspondent à l’emplacement de journalisation des erreurs par Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-185">Diagnostics Infrastructure Logs is where azure diagnostics logs any errors that it runs into.</span></span> <span data-ttu-id="7829f-186">Vérifiez que vous avez activé ([Guide pratique](#how-to-check-diagnostics-extension-configuration)) la capture des journaux d’infrastructure de diagnostics dans votre configuration, puis recherchez rapidement les erreurs correspondantes, affichées dans le tableau `DiagnosticInfrastructureLogsTable` de votre compte de stockage configuré.</span><span class="sxs-lookup"><span data-stu-id="7829f-186">Make sure you have enabled ([how to?](#how-to-check-diagnostics-extension-configuration)) capturing of Diagnostics Infrastructure logs in your configuration and quickly look for any relevant errors that show up in the `DiagnosticInfrastructureLogsTable` table in your configured storage account.</span></span>

### <a name="no-data-is-showing-up"></a><span data-ttu-id="7829f-187">Aucune donnée n’est affichée</span><span class="sxs-lookup"><span data-stu-id="7829f-187">No data is showing up</span></span>
<span data-ttu-id="7829f-188">La principale cause de données d’événement totalement manquantes est une définition incorrecte des informations de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="7829f-188">The most common cause of event data entirely missing is incorrectly defined storage account information.</span></span>

<span data-ttu-id="7829f-189">Solution : corrigez la configuration du plug-in Diagnostics et réinstallez-le.</span><span class="sxs-lookup"><span data-stu-id="7829f-189">Solution: Correct your Diagnostics configuration and reinstall Diagnostics.</span></span>

<span data-ttu-id="7829f-190">Si le compte de stockage est configuré correctement, activez le Bureau à distance sur la machine et assurez-vous de l’exécution de DiagnosticsPlugin.exe et de MonAgentCore.exe.</span><span class="sxs-lookup"><span data-stu-id="7829f-190">If the storage account is configured correctly, remote desktop into the machine and make sure DiagnosticsPlugin.exe and MonAgentCore.exe are running.</span></span> <span data-ttu-id="7829f-191">Si vous n’êtes pas en cours d’exécution, suivez [Azure Diagnostics ne démarre pas](#azure-diagnostics-is-not-starting).</span><span class="sxs-lookup"><span data-stu-id="7829f-191">If they are not running, follow [Azure Diagnostics is not Starting](#azure-diagnostics-is-not-starting).</span></span> <span data-ttu-id="7829f-192">Si les processus sont exécutés, passez à la section [Capture locale des données](#is-data-getting-captured-locally) et suivez ce guide à partir de là.</span><span class="sxs-lookup"><span data-stu-id="7829f-192">If the processes are running, jump to [Is data getting captured locally](#is-data-getting-captured-locally) and follow this guide from there on.</span></span>

### <a name="part-of-the-data-is-missing"></a><span data-ttu-id="7829f-193">Une partie des données est manquante</span><span class="sxs-lookup"><span data-stu-id="7829f-193">Part of the data is missing</span></span>
<span data-ttu-id="7829f-194">Si vous obtenez des données, mais pas d’autres,</span><span class="sxs-lookup"><span data-stu-id="7829f-194">If you are getting some data but not other.</span></span> <span data-ttu-id="7829f-195">cela signifie que la collecte de données et/ou le pipeline de transfert sont définis correctement.</span><span class="sxs-lookup"><span data-stu-id="7829f-195">This means the data collection / transfer pipeline is set correctly.</span></span> <span data-ttu-id="7829f-196">Suivez les sous-sections ci-après pour déterminer si l’origine du problème est liée aux éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="7829f-196">Follow the subsections here to narrow down what the issue is:</span></span>
#### <a name="is-collection-configured"></a><span data-ttu-id="7829f-197">Configuration de la collecte :</span><span class="sxs-lookup"><span data-stu-id="7829f-197">Is Collection Configured:</span></span> 
<span data-ttu-id="7829f-198">La configuration des diagnostics contient la partie qui demande la collecte d’un type particulier de données.</span><span class="sxs-lookup"><span data-stu-id="7829f-198">Diagnostics Configuration contains the part that instructs for a particular type of data to be collected.</span></span> <span data-ttu-id="7829f-199">[Vérifiez votre configuration](#how-to-check-diagnostics-extension-configuration) pour vous assurer que vous ne recherchez pas des données que vous n’avez pas configurées pour la collecte.</span><span class="sxs-lookup"><span data-stu-id="7829f-199">[Review your configuration](#how-to-check-diagnostics-extension-configuration) to make sure you are not looking for data you have not configured for collection.</span></span>
#### <a name="is-the-host-generating-data"></a><span data-ttu-id="7829f-200">Génération des données par l’hôte :</span><span class="sxs-lookup"><span data-stu-id="7829f-200">Is the host generating data:</span></span>
- <span data-ttu-id="7829f-201">**Compteurs de performances** : ouvrez PerfMon et vérifiez le compteur.</span><span class="sxs-lookup"><span data-stu-id="7829f-201">**Performance Counters**: open perfmon and check the counter.</span></span>
- <span data-ttu-id="7829f-202">**Journaux de suivi** : activez le Bureau à distance sur la machine virtuelle et ajoutez un élément TextWriterTraceListener dans le fichier de configuration de l’application.</span><span class="sxs-lookup"><span data-stu-id="7829f-202">**Trace Logs**:  Remote desktop into the VM and add a TextWriterTraceListener to the app’s config file.</span></span>  <span data-ttu-id="7829f-203">Consultez http://msdn.microsoft.com/library/sk36c28t.aspx pour configurer l’écouteur de texte.</span><span class="sxs-lookup"><span data-stu-id="7829f-203">See http://msdn.microsoft.com/library/sk36c28t.aspx to set up the text listener.</span></span>  <span data-ttu-id="7829f-204">Vérifiez que l’élément `<trace>` a la valeur `<trace autoflush="true">`.</span><span class="sxs-lookup"><span data-stu-id="7829f-204">Make sure the `<trace>` element has `<trace autoflush="true">`.</span></span><br />
<span data-ttu-id="7829f-205">Si vous ne voyez pas de journaux de suivi générés, suivez les étapes décrites dans la section [En savoir plus sur les journaux de suivi manquants](#more-about-trace-logs-missing).</span><span class="sxs-lookup"><span data-stu-id="7829f-205">If you don't see trace logs getting generated, follow [More About Trace Logs Missing](#more-about-trace-logs-missing).</span></span>
- <span data-ttu-id="7829f-206">**Traces ETW** : activez le Bureau à distance sur la machine virtuelle et installez PerfView.</span><span class="sxs-lookup"><span data-stu-id="7829f-206">**ETW traces**: Remote desktop into the VM and install PerfView.</span></span>  <span data-ttu-id="7829f-207">Dans PerfView, exécutez Fichier -> Commande utilisateur -> Écouter etwprovider1, etwprovider2, etc.  Notez que la commande Écouter respecte la casse et qu’il ne peut y avoir d’espace entre les listes séparées par des virgules des fournisseurs ETW.</span><span class="sxs-lookup"><span data-stu-id="7829f-207">In PerfView run File -> User Command -> Listen etwprovder1, etwprovider2, etc.  Note that the Listen command is case-sensitive and there cannot be spaces between the comma-separated list of ETW providers.</span></span>  <span data-ttu-id="7829f-208">En cas d’échec de l’exécution de la commande, vous pouvez cliquer sur le bouton « Journal » dans l’angle inférieur droit de l’outil PerfView pour voir ce qui était attendu et le résultat final de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="7829f-208">If the command fails to run, you can click the 'Log' button in the bottom-right of the Perfview tool to see what was attempted to run and what the result was.</span></span>  <span data-ttu-id="7829f-209">En supposant que l’entrée soit correcte, une nouvelle fenêtre s’affiche, et vous commencez à voir les traces ETW dans les quelques secondes qui suivent.</span><span class="sxs-lookup"><span data-stu-id="7829f-209">Assuming the input is correct then a new window will pop up and in a few seconds you will begin seeing ETW traces.</span></span>
- <span data-ttu-id="7829f-210">**Journaux des événements** : activez le Bureau à distance sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-210">**Event Logs**: Remote desktop into the VM.</span></span> <span data-ttu-id="7829f-211">Ouvrez `Event Viewer` et assurez-vous que les événements existent.</span><span class="sxs-lookup"><span data-stu-id="7829f-211">Open `Event Viewer` and ensure the events exist.</span></span>
#### <a name="is-data-getting-captured-locally"></a><span data-ttu-id="7829f-212">Capture locale des données :</span><span class="sxs-lookup"><span data-stu-id="7829f-212">Is data getting captured locally:</span></span>
<span data-ttu-id="7829f-213">À présent, vérifiez que les données sont capturées localement.</span><span class="sxs-lookup"><span data-stu-id="7829f-213">Next make sure the data is getting captured locally.</span></span>
<span data-ttu-id="7829f-214">Les données sont stockées localement dans les fichiers `*.tsf` dans [le magasin local des données de diagnostic](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="7829f-214">The data is locally stored in `*.tsf` files in [the local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="7829f-215">Différents types de journaux sont collectés dans différents fichiers `.tsf`.</span><span class="sxs-lookup"><span data-stu-id="7829f-215">Different kinds of logs get collected in different `.tsf` files.</span></span> <span data-ttu-id="7829f-216">Les noms sont semblables à ceux des tableaux du stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="7829f-216">The names are similar to the table names in azure storage.</span></span> <span data-ttu-id="7829f-217">Par exemple, `Performance Counters` est collecté dans le fichier `PerformanceCountersTable.tsf`, et les journaux des événements sont collectés dans le fichier `WindowsEventLogsTable.tsf`.</span><span class="sxs-lookup"><span data-stu-id="7829f-217">For example `Performance Counters` get collected in `PerformanceCountersTable.tsf`, Event Logs get collected in `WindowsEventLogsTable.tsf`.</span></span> <span data-ttu-id="7829f-218">Suivez les instructions indiquées dans la section [Extraction locale des journaux](#local-log-extraction) pour ouvrir les fichiers de la collection locale, et assurez-vous qu’ils sont collectés sur le disque.</span><span class="sxs-lookup"><span data-stu-id="7829f-218">Use the instructions in [Local Log Extraction](#local-log-extraction) section to open the local collection files and make sure you see them getting collected on disk.</span></span>

<span data-ttu-id="7829f-219">Si les journaux collectés localement ne s’affichent pas et que vous avez déjà vérifié que l’hôte génère des données, il s’agit probablement d’un problème de configuration.</span><span class="sxs-lookup"><span data-stu-id="7829f-219">If you don't see logs getting collected locally and have already verified that the host is generating data, you likely have a configuration issue.</span></span> <span data-ttu-id="7829f-220">Vérifiez attentivement la section appropriée de votre configuration.</span><span class="sxs-lookup"><span data-stu-id="7829f-220">Review your configuration carefully for the appropriate section.</span></span> <span data-ttu-id="7829f-221">Passez également en revue la configuration générée pour MonitoringAgent [MaConfig.xml](#log-artifacts-path) et vérifiez qu’il existe une section décrivant la source de journal appropriée et qu’elle n’est pas perdue au cours de la conversion entre la configuration d’Azure Diagnostics et la configuration de l’agent de surveillance.</span><span class="sxs-lookup"><span data-stu-id="7829f-221">Also review the configuration generated for MonitoringAgent [MaConfig.xml](#log-artifacts-path) and make sure there is some section describing the relevant log source and that it is not lost in translation between azure diagnostics configuration and monitoring agent configuration.</span></span>
#### <a name="is-data-getting-transferred"></a><span data-ttu-id="7829f-222">Transfert des données :</span><span class="sxs-lookup"><span data-stu-id="7829f-222">Is data getting transferred:</span></span>
<span data-ttu-id="7829f-223">Si vous avez vérifié que les données sont capturées localement, mais qu’elles n’apparaissent toujours pas dans votre compte de stockage :</span><span class="sxs-lookup"><span data-stu-id="7829f-223">If you have verified the data is getting captured locally but you still don't see it in your storage account:</span></span> 
- <span data-ttu-id="7829f-224">Avant toute chose, vérifiez que vous avez fourni un compte de stockage correct et que vous n’avez pas renouvelé les clés, etc. correspondant au compte de stockage donné.</span><span class="sxs-lookup"><span data-stu-id="7829f-224">First and foremost, make sure that you have provided a correct storage account and that you have not rolled over keys etc.for the given storage account.</span></span> <span data-ttu-id="7829f-225">Pour les services cloud, il arrive parfois que les utilisateurs ne mettent pas à jour le paramètre `useDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="7829f-225">For cloud services, sometimes we see that people don't update their `useDevelopmentStorage=true`.</span></span>
- <span data-ttu-id="7829f-226">Si le compte de stockage fourni est correct.</span><span class="sxs-lookup"><span data-stu-id="7829f-226">If provided storage account is correct.</span></span> <span data-ttu-id="7829f-227">Vérifiez que vous ne rencontrez pas certaines restrictions réseau qui n’autorisent pas les composants à atteindre les points de terminaison de stockage public.</span><span class="sxs-lookup"><span data-stu-id="7829f-227">Make sure you do not have some network restrictions that do not allow the components to reach public storage endpoints.</span></span> <span data-ttu-id="7829f-228">Pour ce faire, vous pouvez activer le Bureau à distance sur la machine et essayer d’écrire dans le même compte de stockage vous-même.</span><span class="sxs-lookup"><span data-stu-id="7829f-228">One way to do that is to remote desktop into the machine and try to write something to the same storage account yourself.</span></span>
- <span data-ttu-id="7829f-229">Pour finir, vous pouvez essayer de voir les échecs signalés par l’agent de surveillance.</span><span class="sxs-lookup"><span data-stu-id="7829f-229">Finally, you can try and see what failure are being reported by Monitoring Agent.</span></span> <span data-ttu-id="7829f-230">L’agent de surveillance écrit ses journaux dans le fichier `maeventtable.tsf`, qui est situé dans [le magasin local des données de diagnostic](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="7829f-230">Monitoring agent writes its logs in `maeventtable.tsf` located in [the local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="7829f-231">Suivez les instructions contenues dans la section [Extraction locale des journaux](#local-log-extraction) pour ouvrir ce fichier et essayez de déterminer si des `errors` indiquent des échecs de lecture des fichiers locaux ou d’écriture dans le stockage.</span><span class="sxs-lookup"><span data-stu-id="7829f-231">Follow instructions in [Local Log Extraction](#local-log-extraction) section to open this file and try and figure out if there are `errors` indicating failures to read local files or write to storage.</span></span>

### <a name="capturing--archiving-logs"></a><span data-ttu-id="7829f-232">Capture/Archivage des journaux</span><span class="sxs-lookup"><span data-stu-id="7829f-232">Capturing / Archiving logs</span></span>
<span data-ttu-id="7829f-233">Après avoir suivi les étapes indiquées ci-dessus, vous n’avez pas pu déterminer ce qui était incorrect, et vous songez à contacter le support technique.</span><span class="sxs-lookup"><span data-stu-id="7829f-233">You went through the above steps but could not figure out what was wrong and are thinking about contacting support.</span></span> <span data-ttu-id="7829f-234">La première chose qui peut vous être demandée est de collecter les journaux à partir de votre machine.</span><span class="sxs-lookup"><span data-stu-id="7829f-234">The first thing they might ask you is to collect logs from your machine.</span></span> <span data-ttu-id="7829f-235">Vous pouvez gagner du temps en effectuant vous-même cette procédure.</span><span class="sxs-lookup"><span data-stu-id="7829f-235">You can save time by doing that yourself.</span></span> <span data-ttu-id="7829f-236">Exécutez l’utilitaire `CollectGuestLogs.exe` dans le [chemin d’accès à l’utilitaire de collecte des journaux](#log-artifacts-path). Un fichier zip contenant tous les journaux Azure correspondants est généré dans le même dossier.</span><span class="sxs-lookup"><span data-stu-id="7829f-236">Run the `CollectGuestLogs.exe` utility at  [Log Collection Utility path](#log-artifacts-path) and it generates a zip file with all relevant azure logs in the same folder.</span></span>

## <a name="diagnostics-data-tables-not-found"></a><span data-ttu-id="7829f-237">Tables des données de diagnostic introuvables</span><span class="sxs-lookup"><span data-stu-id="7829f-237">Diagnostics data Tables not found</span></span>
<span data-ttu-id="7829f-238">Les tables de stockage Azure qui contiennent les événements ETW sont nommées à l’aide du code suivant :</span><span class="sxs-lookup"><span data-stu-id="7829f-238">The tables in Azure storage holding ETW events are named using the following code:</span></span>

```C#
        if (String.IsNullOrEmpty(eventDestination)) {
            if (e == "DefaultEvents")
                tableName = "WADDefault" + MD5(provider);
            else
                tableName = "WADEvent" + MD5(provider) + eventId;
        }
        else
            tableName = "WAD" + eventDestination;
```

<span data-ttu-id="7829f-239">Voici un exemple :</span><span class="sxs-lookup"><span data-stu-id="7829f-239">Here is an example:</span></span>

```XML
        <EtwEventSourceProviderConfiguration provider="prov1">
          <Event id="1" />
          <Event id="2" eventDestination="dest1" />
          <DefaultEvents />
        </EtwEventSourceProviderConfiguration>
        <EtwEventSourceProviderConfiguration provider="prov2">
          <DefaultEvents eventDestination="dest2" />
        </EtwEventSourceProviderConfiguration>
```
```JSON
"EtwEventSourceProviderConfiguration": [
    {
        "provider": "prov1",
        "Event": [
            {
                "id": 1
            },
            {
                "id": 2,
                "eventDestination": "dest1"
            }
        ],
        "DefaultEvents": {
            "eventDestination": "DefaultEventDestination",
            "sinks": ""
        }
    },
    {
        "provider": "prov2",
        "DefaultEvents": {
            "eventDestination": "dest2"
        }
    }
]
```
<span data-ttu-id="7829f-240">Avec génération de 4 tables :</span><span class="sxs-lookup"><span data-stu-id="7829f-240">That generates 4 tables:</span></span>

| <span data-ttu-id="7829f-241">Événement</span><span class="sxs-lookup"><span data-stu-id="7829f-241">Event</span></span> | <span data-ttu-id="7829f-242">Nom de la table</span><span class="sxs-lookup"><span data-stu-id="7829f-242">Table Name</span></span> |
| --- | --- |
| <span data-ttu-id="7829f-243">provider=”prov1” &lt;Event id=”1” /&gt;</span><span class="sxs-lookup"><span data-stu-id="7829f-243">provider=”prov1” &lt;Event id=”1” /&gt;</span></span> |<span data-ttu-id="7829f-244">WADEvent+MD5(“prov1”)+”1”</span><span class="sxs-lookup"><span data-stu-id="7829f-244">WADEvent+MD5(“prov1”)+”1”</span></span> |
| <span data-ttu-id="7829f-245">provider=”prov1” &lt;Event id=”2” eventDestination=”dest1” /&gt;</span><span class="sxs-lookup"><span data-stu-id="7829f-245">provider=”prov1” &lt;Event id=”2” eventDestination=”dest1” /&gt;</span></span> |<span data-ttu-id="7829f-246">WADdest1</span><span class="sxs-lookup"><span data-stu-id="7829f-246">WADdest1</span></span> |
| <span data-ttu-id="7829f-247">provider=”prov1” &lt;DefaultEvents /&gt;</span><span class="sxs-lookup"><span data-stu-id="7829f-247">provider=”prov1” &lt;DefaultEvents /&gt;</span></span> |<span data-ttu-id="7829f-248">WADDefault+MD5(“prov1”)</span><span class="sxs-lookup"><span data-stu-id="7829f-248">WADDefault+MD5(“prov1”)</span></span> |
| <span data-ttu-id="7829f-249">provider=”prov2” &lt;DefaultEvents eventDestination=”dest2” /&gt;</span><span class="sxs-lookup"><span data-stu-id="7829f-249">provider=”prov2” &lt;DefaultEvents eventDestination=”dest2” /&gt;</span></span> |<span data-ttu-id="7829f-250">WADdest2</span><span class="sxs-lookup"><span data-stu-id="7829f-250">WADdest2</span></span> |

## <a name="references"></a><span data-ttu-id="7829f-251">Références</span><span class="sxs-lookup"><span data-stu-id="7829f-251">References</span></span>

### <a name="how-to-check-diagnostics-extension-configuration"></a><span data-ttu-id="7829f-252">Vérification de la configuration de l’extension Diagnostics</span><span class="sxs-lookup"><span data-stu-id="7829f-252">How to check Diagnostics Extension Configuration</span></span>
<span data-ttu-id="7829f-253">Pour vérifier la configuration de l’extension, le plus simple est d’accéder à http://resources.azure.com, puis à la machine virtuelle ou au service cloud sur lesquels l’extension Azure Diagnostics (IaaSDiagnostics/PaaDiagnostics) pose question.</span><span class="sxs-lookup"><span data-stu-id="7829f-253">The easiest way to check your extension configuration is to navigate to http://resources.azure.com, navigate to the virtual machine or cloud service on which the Azure Diagnostics extension (IaaSDiagnostics / PaaDiagnostics) is in question.</span></span>

<span data-ttu-id="7829f-254">Vous pouvez également activer le Bureau à distance sur la machine et regarder le fichier de configuration d’Azure Diagnostics décrit dans la section appropriée [ici](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="7829f-254">Alternatively, remote desktop into the machine and look at the Azure Diagnostics Configuration file described in the appropriate section [here](#log-artifacts-path).</span></span>

<span data-ttu-id="7829f-255">Dans les deux cas, recherchez **Microsoft.Azure.Diagnostics**, puis le champ **xmlCfg** ou **WadCfg**.</span><span class="sxs-lookup"><span data-stu-id="7829f-255">In either case search for **Microsoft.Azure.Diagnostics** then for the **xmlCfg** or **WadCfg** field.</span></span> 

<span data-ttu-id="7829f-256">Dans le cas de la machine virtuelle, si le champ WadCfg est présent, cela signifie que la configuration est au format JSON.</span><span class="sxs-lookup"><span data-stu-id="7829f-256">In case of virtual machines, if the WadCfg field is present, it means the config is in JSON.</span></span> <span data-ttu-id="7829f-257">Si le champ xmlCfg est présent, cela signifie que la configuration est au format XML et codée en base64.</span><span class="sxs-lookup"><span data-stu-id="7829f-257">If the xmlCfg field is present, it means the config is in XML and is base64 encoded.</span></span> <span data-ttu-id="7829f-258">Vous devez [la décoder](http://www.bing.com/search?q=base64+decoder) pour afficher le code XML chargé par l’extension Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-258">You need to [decode it](http://www.bing.com/search?q=base64+decoder) to see the XML that was loaded by Diagnostics.</span></span>

<span data-ttu-id="7829f-259">Pour le rôle de service cloud, si vous sélectionnez la configuration à partir du disque, les données sont encodées en Base64. Vous devrez donc [les décoder](http://www.bing.com/search?q=base64+decoder) pour afficher le code XML qui a été chargé par l’extension Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-259">For Cloud Service role, if you pick the configuration from disk, the data is base64 encoded so you’ll need to [decode it](http://www.bing.com/search?q=base64+decoder) to see the XML that was loaded by Diagnostics.</span></span>

### <a name="azure-diagnostics-plugin-exit-codes"></a><span data-ttu-id="7829f-260">Codes de sortie du plug-in Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="7829f-260">Azure Diagnostics Plugin Exit Codes</span></span>
<span data-ttu-id="7829f-261">Le plug-in renvoie les codes de sortie suivants :</span><span class="sxs-lookup"><span data-stu-id="7829f-261">The plugin returns the following exit codes:</span></span>

| <span data-ttu-id="7829f-262">Code de sortie</span><span class="sxs-lookup"><span data-stu-id="7829f-262">Exit Code</span></span> | <span data-ttu-id="7829f-263">Description</span><span class="sxs-lookup"><span data-stu-id="7829f-263">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7829f-264">0</span><span class="sxs-lookup"><span data-stu-id="7829f-264">0</span></span> |<span data-ttu-id="7829f-265">Vous avez réussi !</span><span class="sxs-lookup"><span data-stu-id="7829f-265">Success.</span></span> |
| <span data-ttu-id="7829f-266">-1</span><span class="sxs-lookup"><span data-stu-id="7829f-266">-1</span></span> |<span data-ttu-id="7829f-267">Erreur générique.</span><span class="sxs-lookup"><span data-stu-id="7829f-267">Generic Error.</span></span> |
| <span data-ttu-id="7829f-268">-2</span><span class="sxs-lookup"><span data-stu-id="7829f-268">-2</span></span> |<span data-ttu-id="7829f-269">Impossible de charger le fichier rcf.</span><span class="sxs-lookup"><span data-stu-id="7829f-269">Unable to load the rcf file.</span></span><p><span data-ttu-id="7829f-270">Cette erreur interne ne doit se produire que si le lanceur du plug-in d'agent invité est appelé manuellement et de manière incorrecte sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-270">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="7829f-271">-3</span><span class="sxs-lookup"><span data-stu-id="7829f-271">-3</span></span> |<span data-ttu-id="7829f-272">Impossible de charger le fichier de configuration Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-272">Cannot load the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="7829f-273">Solution : cette erreur se produit lorsqu'un fichier de configuration ne passe pas la validation de schéma.</span><span class="sxs-lookup"><span data-stu-id="7829f-273">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="7829f-274">La solution consiste à fournir un fichier de configuration qui est conforme au schéma.</span><span class="sxs-lookup"><span data-stu-id="7829f-274">The solution is to provide a configuration file that complies with the schema.</span></span> |
| <span data-ttu-id="7829f-275">-4</span><span class="sxs-lookup"><span data-stu-id="7829f-275">-4</span></span> |<span data-ttu-id="7829f-276">Une autre instance de l'agent de surveillance Diagnostics utilise déjà le répertoire de ressources local.</span><span class="sxs-lookup"><span data-stu-id="7829f-276">Another instance of the monitoring agent Diagnostics is already using the local resource directory.</span></span><p><p><span data-ttu-id="7829f-277">Solution : spécifiez une valeur différente pour **LocalResourceDirectory**.</span><span class="sxs-lookup"><span data-stu-id="7829f-277">Solution: Specify a different value for **LocalResourceDirectory**.</span></span> |
| <span data-ttu-id="7829f-278">-6</span><span class="sxs-lookup"><span data-stu-id="7829f-278">-6</span></span> |<span data-ttu-id="7829f-279">Le lanceur du plug-in d'agent invité a tenté de démarrer Diagnostics avec une ligne de commande non valide.</span><span class="sxs-lookup"><span data-stu-id="7829f-279">The guest agent plugin launcher attempted to launch Diagnostics with an invalid command line.</span></span><p><p><span data-ttu-id="7829f-280">Cette erreur interne ne doit se produire que si le lanceur du plug-in d'agent invité est appelé manuellement et de manière incorrecte sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-280">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="7829f-281">-10</span><span class="sxs-lookup"><span data-stu-id="7829f-281">-10</span></span> |<span data-ttu-id="7829f-282">Le plug-in Diagnostics s'est terminé avec une exception non prise en charge.</span><span class="sxs-lookup"><span data-stu-id="7829f-282">The Diagnostics plugin exited with an unhandled exception.</span></span> |
| <span data-ttu-id="7829f-283">-11</span><span class="sxs-lookup"><span data-stu-id="7829f-283">-11</span></span> |<span data-ttu-id="7829f-284">L'agent invité n'a pas pu créer le processus responsable du lancement et de la surveillance de l'agent de surveillance.</span><span class="sxs-lookup"><span data-stu-id="7829f-284">The guest agent was unable to create the process responsible for launching and monitoring the monitoring agent.</span></span><p><p><span data-ttu-id="7829f-285">Solution : vérifiez que les ressources système disponibles sont suffisantes pour lancer de nouveaux processus.</span><span class="sxs-lookup"><span data-stu-id="7829f-285">Solution: Verify that sufficient system resources are available to launch new processes.</span></span><p> |
| <span data-ttu-id="7829f-286">-101</span><span class="sxs-lookup"><span data-stu-id="7829f-286">-101</span></span> |<span data-ttu-id="7829f-287">Arguments invalides lors de l'appel du plug-in Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-287">Invalid arguments when calling the Diagnostics plugin.</span></span><p><p><span data-ttu-id="7829f-288">Cette erreur interne ne doit se produire que si le lanceur du plug-in d'agent invité est appelé manuellement et de manière incorrecte sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-288">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="7829f-289">-102</span><span class="sxs-lookup"><span data-stu-id="7829f-289">-102</span></span> |<span data-ttu-id="7829f-290">Le processus du plug-in ne peut pas démarrer tout seul.</span><span class="sxs-lookup"><span data-stu-id="7829f-290">The plugin process is unable to initialize itself.</span></span><p><p><span data-ttu-id="7829f-291">Solution : vérifiez que les ressources système disponibles sont suffisantes pour lancer de nouveaux processus.</span><span class="sxs-lookup"><span data-stu-id="7829f-291">Solution: Verify that sufficient system resources are available to launch new processes.</span></span> |
| <span data-ttu-id="7829f-292">-103</span><span class="sxs-lookup"><span data-stu-id="7829f-292">-103</span></span> |<span data-ttu-id="7829f-293">Le processus du plug-in ne peut pas démarrer tout seul.</span><span class="sxs-lookup"><span data-stu-id="7829f-293">The plugin process is unable to initialize itself.</span></span> <span data-ttu-id="7829f-294">Plus précisément, il n'est pas capable de créer l'objet enregistreur d'événements.</span><span class="sxs-lookup"><span data-stu-id="7829f-294">Specifically it is unable to create the logger object.</span></span><p><p><span data-ttu-id="7829f-295">Solution : vérifiez que les ressources système disponibles sont suffisantes pour lancer de nouveaux processus.</span><span class="sxs-lookup"><span data-stu-id="7829f-295">Solution: Verify that sufficient system resources are available to launch new processes.</span></span> |
| <span data-ttu-id="7829f-296">-104</span><span class="sxs-lookup"><span data-stu-id="7829f-296">-104</span></span> |<span data-ttu-id="7829f-297">Impossible de charger le fichier rcf fourni par l'agent invité.</span><span class="sxs-lookup"><span data-stu-id="7829f-297">Unable to load the rcf file provided by the guest agent.</span></span><p><p><span data-ttu-id="7829f-298">Cette erreur interne ne doit se produire que si le lanceur du plug-in d'agent invité est appelé manuellement et de manière incorrecte sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-298">This internal error should only happen if the guest agent plugin launcher is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="7829f-299">-105</span><span class="sxs-lookup"><span data-stu-id="7829f-299">-105</span></span> |<span data-ttu-id="7829f-300">Le plug-in Diagnostics ne peut pas ouvrir le fichier de configuration Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-300">The Diagnostics plugin cannot open the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="7829f-301">Cette erreur interne ne doit se produire que si le plug-in Diagnostics est appelé manuellement et de manière incorrecte sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-301">This internal error should only happen if the Diagnostics plugin is manually invoked, incorrectly, on the VM.</span></span> |
| <span data-ttu-id="7829f-302">-106</span><span class="sxs-lookup"><span data-stu-id="7829f-302">-106</span></span> |<span data-ttu-id="7829f-303">Impossible de lire le fichier de configuration Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-303">Cannot read the Diagnostics configuration file.</span></span><p><p><span data-ttu-id="7829f-304">Solution : cette erreur se produit lorsqu'un fichier de configuration ne passe pas la validation de schéma.</span><span class="sxs-lookup"><span data-stu-id="7829f-304">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="7829f-305">La solution consiste alors à fournir un fichier de configuration qui est conforme au schéma.</span><span class="sxs-lookup"><span data-stu-id="7829f-305">So the solution is to provide a configuration file that complies with the schema.</span></span> <span data-ttu-id="7829f-306">Voir [Vérification de la configuration de l’extension Diagnostics](#how-to-check-diagnostics-extension-configuration).</span><span class="sxs-lookup"><span data-stu-id="7829f-306">See [How to check Diagnostics Extension Configuration](#how-to-check-diagnostics-extension-configuration).</span></span> |
| <span data-ttu-id="7829f-307">-107</span><span class="sxs-lookup"><span data-stu-id="7829f-307">-107</span></span> |<span data-ttu-id="7829f-308">La transmission du répertoire de ressources à l'agent de surveillance n'est pas valide.</span><span class="sxs-lookup"><span data-stu-id="7829f-308">The resource directory pass to the monitoring agent is invalid.</span></span><p><p><span data-ttu-id="7829f-309">Cette erreur interne ne doit se produire que si l'agent de surveillance est appelé manuellement et de manière incorrecte sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="7829f-309">This internal error should only happen if the monitoring agent is manually invoked, incorrectly, on the VM.</span></span></p> |
| <span data-ttu-id="7829f-310">-108</span><span class="sxs-lookup"><span data-stu-id="7829f-310">-108</span></span> |<span data-ttu-id="7829f-311">Impossible de convertir le fichier de configuration Diagnostics dans le fichier de configuration de l'agent de surveillance.</span><span class="sxs-lookup"><span data-stu-id="7829f-311">Unable to convert the Diagnostics configuration file into the monitoring agent configuration file.</span></span><p><p><span data-ttu-id="7829f-312">Cette erreur interne ne doit se produire que si le plug-in Diagnostics est appelé manuellement avec un fichier de configuration non valide.</span><span class="sxs-lookup"><span data-stu-id="7829f-312">This internal error should only happen if the Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="7829f-313">-110</span><span class="sxs-lookup"><span data-stu-id="7829f-313">-110</span></span> |<span data-ttu-id="7829f-314">Erreur de configuration générale de Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-314">General Diagnostics configuration error.</span></span><p><p><span data-ttu-id="7829f-315">Cette erreur interne ne doit se produire que si le plug-in Diagnostics est appelé manuellement avec un fichier de configuration non valide.</span><span class="sxs-lookup"><span data-stu-id="7829f-315">This internal error should only happen if the Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="7829f-316">-111</span><span class="sxs-lookup"><span data-stu-id="7829f-316">-111</span></span> |<span data-ttu-id="7829f-317">Impossible de démarrer l’agent de surveillance.</span><span class="sxs-lookup"><span data-stu-id="7829f-317">Unable to start the monitoring agent.</span></span><p><p><span data-ttu-id="7829f-318">Solution : vérifiez que les ressources système disponibles sont suffisantes pour lancer de nouveaux processus.</span><span class="sxs-lookup"><span data-stu-id="7829f-318">Solution: Verify that sufficient system resources are available.</span></span> |
| <span data-ttu-id="7829f-319">-112</span><span class="sxs-lookup"><span data-stu-id="7829f-319">-112</span></span> |<span data-ttu-id="7829f-320">Erreur générale</span><span class="sxs-lookup"><span data-stu-id="7829f-320">General error</span></span> |

### <a name="local-log-extraction"></a><span data-ttu-id="7829f-321">Extraction locale des journaux</span><span class="sxs-lookup"><span data-stu-id="7829f-321">Local Log Extraction</span></span>
<span data-ttu-id="7829f-322">L’agent de surveillance collecte les journaux et artefacts en tant que fichiers `.tsf`.</span><span class="sxs-lookup"><span data-stu-id="7829f-322">The monitoring agent collects logs and artifacts as `.tsf` files.</span></span> <span data-ttu-id="7829f-323">Le fichier `.tsf` n’est pas lisible, mais vous pouvez le convertir en fichier `.csv`, comme suit :</span><span class="sxs-lookup"><span data-stu-id="7829f-323">`.tsf` file is not readable but you can convert it into a `.csv` as follows:</span></span> 

```
<Azure diagnostics extension package>\Monitor\x64\table2csv.exe <relevantLogFile>.tsf
```
<span data-ttu-id="7829f-324">Un nouveau fichier appelé `<relevantLogFile>.csv` est créé dans le même chemin d’accès que le fichier `.tsf` correspondant.</span><span class="sxs-lookup"><span data-stu-id="7829f-324">A new file called `<relevantLogFile>.csv` will be created in the same path as the corresponding `.tsf` file.</span></span>

<span data-ttu-id="7829f-325">**REMARQUE** : vous devez exécuter cet utilitaire uniquement dans le fichier .tsf principal (par exemple, PerformanceCountersTable.tsf).</span><span class="sxs-lookup"><span data-stu-id="7829f-325">**NOTE**: You only need to run this utility against the main tsf file (e.g., PerformanceCountersTable.tsf).</span></span> <span data-ttu-id="7829f-326">Les fichiers d’accompagnement (par exemple, PerformanceCountersTables_\*\*001.tsf, PerformanceCountersTables_\*\*002. tsf, etc.) sont traités automatiquement.</span><span class="sxs-lookup"><span data-stu-id="7829f-326">The accompanying files (e.g., PerformanceCountersTables_\*\*001.tsf, PerformanceCountersTables_\*\*002.tsf etc.) will automatically be processed.</span></span>

### <a name="more-about-trace-logs-missing"></a><span data-ttu-id="7829f-327">En savoir plus sur les journaux de suivi manquants</span><span class="sxs-lookup"><span data-stu-id="7829f-327">More About Trace Logs Missing</span></span>

<span data-ttu-id="7829f-328">**Remarque :** cela ne concerne principalement que les services cloud à moins que vous n’ayez configuré l’élément DiagnosticsMonitorTraceListener dans une application s’exécutant sur votre machine virtuelle IaaS.</span><span class="sxs-lookup"><span data-stu-id="7829f-328">**Note:** This mostly applies to cloud services only unless you have configured the DiagnosticsMonitorTraceListener on an application running on your IaaS VM.</span></span> 

- <span data-ttu-id="7829f-329">Vérifiez que l’élément DiagnosticMonitorTraceListener est configuré dans le fichier web.config ou app.config.  Par défaut, il est configuré dans les projets de service cloud, mais certains clients le commentent, ce qui entraîne la non-collecte des déclarations de trace par Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="7829f-329">Make sure the DiagnosticMonitorTraceListener is configured in the web.config or app.config.  This is configured by default in cloud service projects, but some customers comment it out which will cause the trace statements to not be collected by diagnostics.</span></span> 
- <span data-ttu-id="7829f-330">Si les journaux ne sont pas écrits à partir de la méthode OnStart ou Run, assurez-vous que l’élément DiagnosticMonitorTraceListener figure dans le fichier app.config.  Par défaut, il figure dans le fichier web.config, mais cela s’applique uniquement au code s’exécutant dans w3wp.exe. Vous en avez donc besoin dans le fichier app.config pour capturer les traces exécutées dans WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="7829f-330">If logs are not getting written from the OnStart or Run method make sure the DiagnosticMonitorTraceListener is in the app.config.  By default it is in the web.config, but that only applies to code running within w3wp.exe; so you need it in app.config to capture traces running in WaIISHost.exe.</span></span>
- <span data-ttu-id="7829f-331">Veillez à utiliser Diagnostics.Trace.TraceXXX à la place de Diagnostics.Debug.WriteXXX.</span><span class="sxs-lookup"><span data-stu-id="7829f-331">Make sure you are using Diagnostics.Trace.TraceXXX instead of Diagnostics.Debug.WriteXXX.</span></span>  <span data-ttu-id="7829f-332">Les instructions de débogage seront supprimées dans une version Release.</span><span class="sxs-lookup"><span data-stu-id="7829f-332">The Debug statements will be removed from a Release build.</span></span>
- <span data-ttu-id="7829f-333">Vérifiez que le code compilé contient effectivement les lignes Diagnostics.Trace (utilisez Reflector, ildasm ou ILSpy pour le vérifier).</span><span class="sxs-lookup"><span data-stu-id="7829f-333">Make sure the compiled code actually has the Diagnostics.Trace lines (use Reflector, ildasm or ILSpy to verify).</span></span>  <span data-ttu-id="7829f-334">Les commandes Diagnostics.Trace sont supprimées du fichier binaire compilé, sauf si vous utilisez le symbole de compilation conditionnelle TRACE.</span><span class="sxs-lookup"><span data-stu-id="7829f-334">Diagnostics.Trace commands are removed from the compiled binary unless you use the TRACE conditional compilation symbol.</span></span>  <span data-ttu-id="7829f-335">Si vous utilisez msbuild pour générer le projet, il s’agit d’un problème courant d’exécution.</span><span class="sxs-lookup"><span data-stu-id="7829f-335">If using msbuild to build the project then this is a common problem to run into.</span></span>

## <a name="known-issues-and-mitigations"></a><span data-ttu-id="7829f-336">Problèmes connus et atténuations des risques</span><span class="sxs-lookup"><span data-stu-id="7829f-336">Known Issues and Mitigations</span></span>
<span data-ttu-id="7829f-337">Voici la liste des problèmes connus avec les atténuations des risques :</span><span class="sxs-lookup"><span data-stu-id="7829f-337">Here is a list of known issues with known mitigations:</span></span>

<span data-ttu-id="7829f-338">**1. Dépendance de .NET 4.5 :**</span><span class="sxs-lookup"><span data-stu-id="7829f-338">**1. .NET 4.5 dependency:**</span></span>

<span data-ttu-id="7829f-339">WAD connaît une dépendance d’exécution dans .NET Framework 4.5 ou supérieur.</span><span class="sxs-lookup"><span data-stu-id="7829f-339">WAD has a runtime dependency on .NET 4.5 framework or above.</span></span> <span data-ttu-id="7829f-340">Au moment de la rédaction de cet article, .NET 4.5 ou supérieur est installé sur toutes les machines approvisionnées pour les services cloud et toutes les images de base des machines virtuelles Azure officielles.</span><span class="sxs-lookup"><span data-stu-id="7829f-340">At the time of writing this, all machines provisioned for cloud services as well as all official azure Virtual Machine base images have .NET 4.5 or above installed.</span></span> <span data-ttu-id="7829f-341">Il est toutefois encore possible de se retrouver dans une situation où vous essayez d’exécuter WAD sur une machine dépourvue de .NET 4.5 ou supérieur.</span><span class="sxs-lookup"><span data-stu-id="7829f-341">It is still however possible to land in a situation where you try to run WAD on a machine which does not have .NET 4.5 or above.</span></span> <span data-ttu-id="7829f-342">Cela se produit si vous créez votre machine à partir d’une ancienne image ou capture instantanée, ou encore si vous utilisez votre propre disque personnalisé.</span><span class="sxs-lookup"><span data-stu-id="7829f-342">This happens when you create your machine off of an old image or snapshot; or bring your own custom disk.</span></span>

<span data-ttu-id="7829f-343">Cela se manifeste généralement par le code de sortie **255** lorsque vous exécutez DiagnosticsPluginLauncher.exe.</span><span class="sxs-lookup"><span data-stu-id="7829f-343">This generally manifests as an exit code **255** when running DiagnosticsPluginLauncher.exe.</span></span> <span data-ttu-id="7829f-344">Les échecs se produisent en raison de l’exception non prise en charge :</span><span class="sxs-lookup"><span data-stu-id="7829f-344">Failure happens due to the unhandled exception:</span></span> 
```
System.IO.FileLoadException: Could not load file or assembly 'System.Threading.Tasks, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies
```

<span data-ttu-id="7829f-345">**Atténuation :** installez .NET 4.5 ou version supérieure sur votre machine.</span><span class="sxs-lookup"><span data-stu-id="7829f-345">**Mitigation:** Install .NET 4.5 or higher on your machine.</span></span>

<span data-ttu-id="7829f-346">**2. Données des compteurs de performances disponibles dans le stockage, mais non affichées dans le portail**</span><span class="sxs-lookup"><span data-stu-id="7829f-346">**2. Performance Counters data available in storage but not showing in portal**</span></span>

<span data-ttu-id="7829f-347">Par défaut, le portail des machines virtuelles affiche certains compteurs de performances.</span><span class="sxs-lookup"><span data-stu-id="7829f-347">Virtual machines portal experience shows certain performance counters by default.</span></span> <span data-ttu-id="7829f-348">Si vous ne les voyez pas alors que vous savez qu’elles sont générées, car disponibles dans le stockage, vous devez procéder à des vérifications.</span><span class="sxs-lookup"><span data-stu-id="7829f-348">If you don't see them and you know the data is getting generated because it is available in storage.</span></span> <span data-ttu-id="7829f-349">Vérifiez les points suivants :</span><span class="sxs-lookup"><span data-stu-id="7829f-349">Check:</span></span>
- <span data-ttu-id="7829f-350">Si les données du stockage possèdent des noms de compteur en anglais.</span><span class="sxs-lookup"><span data-stu-id="7829f-350">If the data in storage has counter names in English.</span></span> <span data-ttu-id="7829f-351">Si les noms de compteur ne sont pas en anglais, le graphique des mesures du portail ne peut pas les reconnaître.</span><span class="sxs-lookup"><span data-stu-id="7829f-351">If the counter names are not in English, portal metric chart will not be able to recognize it.</span></span>
- <span data-ttu-id="7829f-352">Si vous utilisez des caractères génériques (\*) dans les noms de compteur de performances, le portail ne peut pas mettre en corrélation le compteur configuré et le compteur collecté.</span><span class="sxs-lookup"><span data-stu-id="7829f-352">If you are using wild cards (\*) in your performance counter names, the portal will not be able to correlate the configured and collected counter.</span></span>

<span data-ttu-id="7829f-353">**Atténuation** : modifiez la langue de la machine pour la définir sur l’anglais pour les comptes système.</span><span class="sxs-lookup"><span data-stu-id="7829f-353">**Mitigation**: Change the machine's language to English for system accounts.</span></span> <span data-ttu-id="7829f-354">Sélectionnez Panneau de configuration -> Région -> Administration -> Paramètres de copie ->, puis décochez la case « Écran d’accueil et comptes système » afin que la langue personnalisée ne soit pas appliquée au compte système.</span><span class="sxs-lookup"><span data-stu-id="7829f-354">Control Panel -> Region -> Administrative -> Copy Settings -> uncheck "Welcome screen and system accounts" so that the custom language is not applied to system account.</span></span> <span data-ttu-id="7829f-355">Veillez également à ne pas utiliser de caractères génériques si vous souhaitez que le portail soit votre expérience de consommation principale.</span><span class="sxs-lookup"><span data-stu-id="7829f-355">Also make sure you do not use wild cards if you want portal to be your primary consumption experience.</span></span>
