---
title: "Versions et historique de schéma de configuration d’extension Azure Diagnostics | Documents Microsoft"
description: Cet article est pertinent concernant la collecte de compteurs de performances dans Azure Virtual Machines, VM Scale Sets, Service Fabric et Cloud Services.
services: monitoring-and-diagnostics
documentationcenter: .net
author: rboucher
manager: carmonm
editor: 
ms.assetid: 
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 05/16/2017
ms.author: robb
ms.openlocfilehash: 119e8a237f24cdc80a1ab8e376f2b308c9eada05
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-diagnostics-extention-configuration-schema-versions-and-history"></a><span data-ttu-id="5dac8-103">Versions et historique des schémas de configuration de l’extension Azure Diagnostics | Microsoft Docs</span><span class="sxs-lookup"><span data-stu-id="5dac8-103">Azure Diagnostics extention configuration schema versions and history</span></span>
<span data-ttu-id="5dac8-104">Cette page est un index des versions de schémas d’extension Azure Diagnostics fournies avec le kit Microsoft Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="5dac8-104">This page indexes Azure Diagnostics extension schema versions shipped as part of the Microsoft Azure SDK.</span></span>  

> [!NOTE]
> <span data-ttu-id="5dac8-105">L’Extension Microsoft Azure Diagnostics est le composant utilisé pour collecter les compteurs de performances et d’autres statistiques à partir de :</span><span class="sxs-lookup"><span data-stu-id="5dac8-105">The Azure Diagnostics extension is the component used to collect performance counters and other statistics from:</span></span>
> - <span data-ttu-id="5dac8-106">Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="5dac8-106">Azure Virtual Machines</span></span> 
> - <span data-ttu-id="5dac8-107">Jeux de mise à l’échelle de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="5dac8-107">Virtual Machine Scale Sets</span></span>
> - <span data-ttu-id="5dac8-108">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="5dac8-108">Service Fabric</span></span> 
> - <span data-ttu-id="5dac8-109">Services cloud</span><span class="sxs-lookup"><span data-stu-id="5dac8-109">Cloud Services</span></span> 
> - <span data-ttu-id="5dac8-110">Groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="5dac8-110">Network Security Groups</span></span>
> 
> <span data-ttu-id="5dac8-111">Cette page vous concerne uniquement si vous utilisez l’un de ces services.</span><span class="sxs-lookup"><span data-stu-id="5dac8-111">This page is only relevant if you are using one of these services.</span></span>

<span data-ttu-id="5dac8-112">L’extension Azure Diagnostics est utilisée avec d’autres produits de diagnostic Microsoft tels que Azure Monitor, Application Insights et Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="5dac8-112">The Azure Diagnostics extension is used with other Microsoft diagnostics products like Azure Monitor, Application Insights, and Log Analytics.</span></span> <span data-ttu-id="5dac8-113">Pour plus d’informations, voir [Présentation des outils d’analyse Microsoft](monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5dac8-113">For more information see [Microsoft Monitoring Tools Overview](monitoring-overview.md).</span></span>

## <a name="azure-sdk-and-diagnostics-versions-shipping-chart"></a><span data-ttu-id="5dac8-114">Graphique des versions d’Azure Diagnostics et SDK</span><span class="sxs-lookup"><span data-stu-id="5dac8-114">Azure SDK and diagnostics versions shipping chart</span></span>  

|<span data-ttu-id="5dac8-115">Version du kit Azure SDK</span><span class="sxs-lookup"><span data-stu-id="5dac8-115">Azure SDK version</span></span> | <span data-ttu-id="5dac8-116">Version d’extension Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="5dac8-116">Diagnostics extension version</span></span> | <span data-ttu-id="5dac8-117">Modèle</span><span class="sxs-lookup"><span data-stu-id="5dac8-117">Model</span></span>|  
|------------------|-------------------------------|------|  
|<span data-ttu-id="5dac8-118">1.x</span><span class="sxs-lookup"><span data-stu-id="5dac8-118">1.x</span></span>               |<span data-ttu-id="5dac8-119">1.0</span><span class="sxs-lookup"><span data-stu-id="5dac8-119">1.0</span></span>                            |<span data-ttu-id="5dac8-120">plug-in</span><span class="sxs-lookup"><span data-stu-id="5dac8-120">plug-in</span></span>|  
|<span data-ttu-id="5dac8-121">2.0 - 2.4</span><span class="sxs-lookup"><span data-stu-id="5dac8-121">2.0 - 2.4</span></span>         |<span data-ttu-id="5dac8-122">1.0</span><span class="sxs-lookup"><span data-stu-id="5dac8-122">1.0</span></span>                            |<span data-ttu-id="5dac8-123">plug-in</span><span class="sxs-lookup"><span data-stu-id="5dac8-123">plug-in</span></span>|  
|<span data-ttu-id="5dac8-124">2.5</span><span class="sxs-lookup"><span data-stu-id="5dac8-124">2.5</span></span>               |<span data-ttu-id="5dac8-125">1.2</span><span class="sxs-lookup"><span data-stu-id="5dac8-125">1.2</span></span>                            |<span data-ttu-id="5dac8-126">extension</span><span class="sxs-lookup"><span data-stu-id="5dac8-126">extension</span></span>|  
|<span data-ttu-id="5dac8-127">2.6</span><span class="sxs-lookup"><span data-stu-id="5dac8-127">2.6</span></span>               |<span data-ttu-id="5dac8-128">1.3</span><span class="sxs-lookup"><span data-stu-id="5dac8-128">1.3</span></span>                            |<span data-ttu-id="5dac8-129">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-129">"</span></span>|  
|<span data-ttu-id="5dac8-130">2.7</span><span class="sxs-lookup"><span data-stu-id="5dac8-130">2.7</span></span>               |<span data-ttu-id="5dac8-131">1.4</span><span class="sxs-lookup"><span data-stu-id="5dac8-131">1.4</span></span>                            |<span data-ttu-id="5dac8-132">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-132">"</span></span>|  
|<span data-ttu-id="5dac8-133">2.8</span><span class="sxs-lookup"><span data-stu-id="5dac8-133">2.8</span></span>               |<span data-ttu-id="5dac8-134">1.5</span><span class="sxs-lookup"><span data-stu-id="5dac8-134">1.5</span></span>                            |<span data-ttu-id="5dac8-135">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-135">"</span></span>|  
|<span data-ttu-id="5dac8-136">2,9</span><span class="sxs-lookup"><span data-stu-id="5dac8-136">2.9</span></span>               |<span data-ttu-id="5dac8-137">1.6</span><span class="sxs-lookup"><span data-stu-id="5dac8-137">1.6</span></span>                            |<span data-ttu-id="5dac8-138">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-138">"</span></span>|
|<span data-ttu-id="5dac8-139">2.96</span><span class="sxs-lookup"><span data-stu-id="5dac8-139">2.96</span></span>              |<span data-ttu-id="5dac8-140">1.7</span><span class="sxs-lookup"><span data-stu-id="5dac8-140">1.7</span></span>                            |<span data-ttu-id="5dac8-141">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-141">"</span></span>|
|<span data-ttu-id="5dac8-142">2.96</span><span class="sxs-lookup"><span data-stu-id="5dac8-142">2.96</span></span>              |<span data-ttu-id="5dac8-143">1.8</span><span class="sxs-lookup"><span data-stu-id="5dac8-143">1.8</span></span>                            |<span data-ttu-id="5dac8-144">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-144">"</span></span>|
|<span data-ttu-id="5dac8-145">2.96</span><span class="sxs-lookup"><span data-stu-id="5dac8-145">2.96</span></span>              |<span data-ttu-id="5dac8-146">1.8.1</span><span class="sxs-lookup"><span data-stu-id="5dac8-146">1.8.1</span></span>                          |<span data-ttu-id="5dac8-147">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-147">"</span></span>|
|<span data-ttu-id="5dac8-148">2.96</span><span class="sxs-lookup"><span data-stu-id="5dac8-148">2.96</span></span>              |<span data-ttu-id="5dac8-149">1.9</span><span class="sxs-lookup"><span data-stu-id="5dac8-149">1.9</span></span>                            |<span data-ttu-id="5dac8-150">"</span><span class="sxs-lookup"><span data-stu-id="5dac8-150">"</span></span>|



 <span data-ttu-id="5dac8-151">La version d’Azure Diagnostics 1.0 était fournie initialement avec un modèle de plug-in, ce qui signifie que lorsque vous installiez le Kit de développement logiciel (SDK) Azure, vous receviez avec celui-ci la version d’Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="5dac8-151">Azure Diagnostics version 1.0 first shipped in a plug-in model -- meaning that when you installed the Azure SDK, you got the version of Azure diagnostics shipped with it.</span></span>  

 <span data-ttu-id="5dac8-152">À compter de la version 2.5 du kit SDK (version 1.2 d’Azure Diagnostics), Azure Diagnostics est passé à un modèle d’extension.</span><span class="sxs-lookup"><span data-stu-id="5dac8-152">Starting with SDK 2.5 (diagnostics version 1.2), Azure diagnostics went to an extension model.</span></span> <span data-ttu-id="5dac8-153">Les outils permettant d’utiliser les nouvelles fonctionnalités sont disponibles uniquement dans les Kits de développement logiciel (SDK) Azure plus récents, mais tout service utilisant Azure Diagnostics sélectionne la dernière version directement dans Azure.</span><span class="sxs-lookup"><span data-stu-id="5dac8-153">The tools to utilize new features were only available in newer Azure SDKs, but any service using Azure diagnostics would pick up the latest shipping version directly from Azure.</span></span> <span data-ttu-id="5dac8-154">Par exemple, toute personne utilisant encore le kit SDK 2.5 chargerait la version la plus récente indiquée dans le tableau précédent, qu’elle utilise ou non les fonctionnalités plus récentes.</span><span class="sxs-lookup"><span data-stu-id="5dac8-154">For example, anyone still using SDK 2.5 would be loading the latest version shown in the previous table, regardless if they are using the newer features.</span></span>  

## <a name="schemas-index"></a><span data-ttu-id="5dac8-155">Index des schémas</span><span class="sxs-lookup"><span data-stu-id="5dac8-155">Schemas index</span></span>  
<span data-ttu-id="5dac8-156">Les différentes versions d’Azure Diagnostics utilisent des schémas de configuration différents.</span><span class="sxs-lookup"><span data-stu-id="5dac8-156">Different versions of Azure diagnostics use different configuration schemas.</span></span> 

[<span data-ttu-id="5dac8-157">Schéma de configuration des diagnostics 1.0</span><span class="sxs-lookup"><span data-stu-id="5dac8-157">Diagnostics 1.0 Configuration Schema</span></span>](azure-diagnostics-schema-1dot0.md)  

[<span data-ttu-id="5dac8-158">Schéma de configuration des diagnostics 1.2</span><span class="sxs-lookup"><span data-stu-id="5dac8-158">Diagnostics 1.2 Configuration Schema</span></span>](azure-diagnostics-schema-1dot2.md)  

[<span data-ttu-id="5dac8-159">Diagnostics 1.3 et schéma de configuration ultérieur</span><span class="sxs-lookup"><span data-stu-id="5dac8-159">Diagnostics 1.3 and later Configuration Schema</span></span>](azure-diagnostics-schema-1dot3-and-later.md)  

## <a name="version-history"></a><span data-ttu-id="5dac8-160">Historique des versions</span><span class="sxs-lookup"><span data-stu-id="5dac8-160">Version history</span></span>


### <a name="diagnostics-extension-19"></a><span data-ttu-id="5dac8-161">Extension d’Azure Diagnostics 1.9</span><span class="sxs-lookup"><span data-stu-id="5dac8-161">Diagnostics extension 1.9</span></span> 
<span data-ttu-id="5dac8-162">Prise en charge de Docker ajoutée.</span><span class="sxs-lookup"><span data-stu-id="5dac8-162">Added Docker support.</span></span>


### <a name="diagnostics-extension-181"></a><span data-ttu-id="5dac8-163">Extension d’Azure Diagnostics 1.8.1</span><span class="sxs-lookup"><span data-stu-id="5dac8-163">Diagnostics extension 1.8.1</span></span> 
<span data-ttu-id="5dac8-164">Peut spécifier un jeton SAP au lieu d’une clé de compte de stockage dans la configuration privée.</span><span class="sxs-lookup"><span data-stu-id="5dac8-164">Can specify a SAS token instead of a storage account key in the private config.</span></span> <span data-ttu-id="5dac8-165">Si un jeton SAP est fourni, la clé de compte de stockage est ignorée.</span><span class="sxs-lookup"><span data-stu-id="5dac8-165">If a SAS token is provided, the storage account key is ignored.</span></span>


```json
{
    "storageAccountName": "diagstorageaccount",
    "storageAccountEndPoint": "https://core.windows.net",
    "storageAccountSasToken": "{sas token}",
    "SecondaryStorageAccounts": {
        "StorageAccount": [
            {
                "name": "secondarydiagstorageaccount",
                "endpoint": "https://core.windows.net",
                "sasToken": "{sas token}"
            }
        ]
    }
}
```

```xml
<PrivateConfig>
    <StorageAccount name="diagstorageaccount" endpoint="https://core.windows.net" sasToken="{sas token}" />
    <SecondaryStorageAccounts>
        <StorageAccount name="secondarydiagstorageaccount" endpoint="https://core.windows.net" sasToken="{sas token}" />
    </SecondaryStorageAccounts>
</PrivateConfig>
```


### <a name="diagnostics-extension-18"></a><span data-ttu-id="5dac8-166">Extension d’Azure Diagnostics 1.8</span><span class="sxs-lookup"><span data-stu-id="5dac8-166">Diagnostics extension 1.8</span></span> 
<span data-ttu-id="5dac8-167">Type de stockage ajouté à PublicConfig.</span><span class="sxs-lookup"><span data-stu-id="5dac8-167">Added Storage Type to PublicConfig.</span></span> <span data-ttu-id="5dac8-168">Le type de stockage (StorageType) peut être *Table*, *Blob* ou *TableAndBlob*.</span><span class="sxs-lookup"><span data-stu-id="5dac8-168">StorageType can be *Table*, *Blob*, *TableAndBlob*.</span></span> <span data-ttu-id="5dac8-169">*Table* est la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="5dac8-169">*Table* is the default.</span></span>


```json
{
    "WadCfg": {
    },
    "StorageAccount": "diagstorageaccount",
    "StorageType": "TableAndBlob"
}
```

```xml
<PublicConfig>
    <WadCfg />
    <StorageAccount>diagstorageaccount</StorageAccount>
    <StorageType>TableAndBlob</StorageType>
</PublicConfig>
```


### <a name="diagnostics-extension-17"></a><span data-ttu-id="5dac8-170">Extension d’Azure Diagnostics 1.7</span><span class="sxs-lookup"><span data-stu-id="5dac8-170">Diagnostics extension 1.7</span></span> 
<span data-ttu-id="5dac8-171">Possibilité ajoutée de router vers eventHub.</span><span class="sxs-lookup"><span data-stu-id="5dac8-171">Added the ability to route to EventHub.</span></span>

### <a name="diagnostics-extension-15"></a><span data-ttu-id="5dac8-172">Extension de diagnostic 1.5</span><span class="sxs-lookup"><span data-stu-id="5dac8-172">Diagnostics extension 1.5</span></span>
<span data-ttu-id="5dac8-173">Ajouté de l’élément sinks et de la possibilité d’envoyer des données de diagnostic à [Application Insights](../application-insights/app-insights-cloudservices.md), facilitant ainsi le diagnostic des problèmes sur votre application, ainsi qu’au niveau du système et de l’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="5dac8-173">Added the sinks element and the ability to send diagnostics data to [Application Insights](../application-insights/app-insights-cloudservices.md) making it easier to diagnose issues across your application as well as the system and infrastructure level.</span></span>

### <a name="azure-sdk-26-and-diagnostics-extension-13"></a><span data-ttu-id="5dac8-174">Extension 1.3 d’Azure Diagnostics et du kit Azure SDK 2.6</span><span class="sxs-lookup"><span data-stu-id="5dac8-174">Azure SDK 2.6 and diagnostics extension 1.3</span></span> 
<span data-ttu-id="5dac8-175">Pour les projets de service cloud dans Visual Studio, les modifications suivantes ont été apportées.</span><span class="sxs-lookup"><span data-stu-id="5dac8-175">For Cloud Service projects in Visual Studio, the following changes were made.</span></span> <span data-ttu-id="5dac8-176">Ces modifications s’appliquent également aux versions ultérieures du kit Azure SDK.</span><span class="sxs-lookup"><span data-stu-id="5dac8-176">(These changes also apply to later versions of Azure SDK.)</span></span>

* <span data-ttu-id="5dac8-177">L’émulateur local prend désormais en charge les diagnostics.</span><span class="sxs-lookup"><span data-stu-id="5dac8-177">The local emulator now supports diagnostics.</span></span> <span data-ttu-id="5dac8-178">Cela signifie que vous pouvez collecter les données de diagnostic et vérifier que votre application crée les traces appropriées lorsque vous développez et testez dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5dac8-178">This means you can collect diagnostics data and ensure your application is creating the right traces while you're developing and testing in Visual Studio.</span></span> <span data-ttu-id="5dac8-179">La chaîne de connexion `UseDevelopmentStorage=true` permet la collecte des données de diagnostic lorsque vous exécutez votre projet de service cloud dans Visual Studio à l’aide de l’émulateur de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="5dac8-179">The connection string `UseDevelopmentStorage=true` enables diagnostics data collection while you're running your cloud service project in Visual Studio by using the Azure storage emulator.</span></span> <span data-ttu-id="5dac8-180">Toutes les données de diagnostic sont collectées dans le compte de stockage (stockage de développement).</span><span class="sxs-lookup"><span data-stu-id="5dac8-180">All diagnostics data is collected in the (Development Storage) storage account.</span></span>
* <span data-ttu-id="5dac8-181">La chaîne de connexion de compte de stockage des diagnostics (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) est à nouveau stockée dans le fichier de configuration de service (.cscfg).</span><span class="sxs-lookup"><span data-stu-id="5dac8-181">The diagnostics storage account connection string (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) is stored once again in the service configuration (.cscfg) file.</span></span> <span data-ttu-id="5dac8-182">Dans le Kit de développement logiciel (SDK) Azure 2.5, le compte de stockage des diagnostics a été spécifié dans le fichier diagnostics.wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="5dac8-182">In Azure SDK 2.5 the diagnostics storage account was specified in the diagnostics.wadcfgx file.</span></span>

<span data-ttu-id="5dac8-183">Il existe des différences notables entre la façon dont la chaîne de connexion fonctionnait dans le Kit de développement logiciel (SDK) Azure 2.4 et les versions antérieures, et celle dont elle fonctionne dans le Kit de développement logiciel (SDK) Azure 2.6 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="5dac8-183">There are some notable differences between how the connection string worked in Azure SDK 2.4 and earlier and how it works in Azure SDK 2.6 and later.</span></span>

* <span data-ttu-id="5dac8-184">Dans le Kit de développement logiciel (SDK) Azure 2.4 et les versions antérieures, la chaîne de connexion était utilisée comme un runtime par le plug-in des diagnostics pour obtenir les informations du compte de stockage relatives au transfert de journaux de diagnostic.</span><span class="sxs-lookup"><span data-stu-id="5dac8-184">In Azure SDK 2.4 and earlier, the connection string was used as a runtime by the diagnostics plugin to get the storage account information for transferring diagnostics logs.</span></span>
* <span data-ttu-id="5dac8-185">Dans le Kit de développement logiciel (SDK) Azure 2.6 et les versions ultérieures, la chaîne de connexion des diagnostics est utilisée par Visual Studio pour configurer l’extension de diagnostics avec les informations de compte de stockage appropriées lors de la publication.</span><span class="sxs-lookup"><span data-stu-id="5dac8-185">In Azure SDK 2.6 and later, the diagnostics connection string is used by Visual Studio to configure the diagnostics extension with the appropriate storage account information during publishing.</span></span> <span data-ttu-id="5dac8-186">La chaîne de connexion permet de définir des comptes de stockage différents pour différentes configurations de service que Visual Studio utilise lors de la publication.</span><span class="sxs-lookup"><span data-stu-id="5dac8-186">The connection string lets you define different storage accounts for different service configurations that Visual Studio will use when publishing.</span></span> <span data-ttu-id="5dac8-187">Toutefois, étant donné que le plug-in des diagnostics n’est plus disponible (après le Kit de développement logiciel (SDK) Azure 2.5), le fichier .cscfg par lui-même ne peut pas activer l’extension des diagnostics.</span><span class="sxs-lookup"><span data-stu-id="5dac8-187">However, because the diagnostics plugin is no longer available (after Azure SDK 2.5), the .cscfg file by itself can't enable the Diagnostics Extension.</span></span> <span data-ttu-id="5dac8-188">Vous devez activer l’extension séparément par le biais d’outils tels que Visual Studio ou PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5dac8-188">You have to enable the extension separately through tools such as Visual Studio or PowerShell.</span></span>
* <span data-ttu-id="5dac8-189">Pour simplifier le processus de configuration de l’extension des diagnostics avec PowerShell, la sortie du package à partir de Visual Studio contient également les fichiers XML de configuration publique pour l’extension des diagnostics pour chaque rôle.</span><span class="sxs-lookup"><span data-stu-id="5dac8-189">To simplify the process of configuring the diagnostics extension with PowerShell, the package output from Visual Studio also contains the public configuration XML for the diagnostics extension for each role.</span></span> <span data-ttu-id="5dac8-190">Visual Studio utilise la chaîne de connexion des diagnostics pour renseigner les informations de compte de stockage présentes dans la configuration publique.</span><span class="sxs-lookup"><span data-stu-id="5dac8-190">Visual Studio uses the diagnostics connection string to populate the storage account information present in the public configuration.</span></span> <span data-ttu-id="5dac8-191">Les fichiers de configuration publique sont créés dans le dossier Extensions et suivent le modèle PaaSDiagnostics<RoleName>.PubConfig.xml.</span><span class="sxs-lookup"><span data-stu-id="5dac8-191">The public config files are created in the Extensions folder and follow the pattern PaaSDiagnostics.<RoleName>.PubConfig.xml.</span></span> <span data-ttu-id="5dac8-192">Tout déploiement basé sur PowerShell peut utiliser ce modèle pour mapper chaque configuration à un rôle.</span><span class="sxs-lookup"><span data-stu-id="5dac8-192">Any PowerShell based deployments can use this pattern to map each configuration to a Role.</span></span>
* <span data-ttu-id="5dac8-193">La chaîne de connexion dans le fichier .cscfg est également utilisée par le portail Azure pour accéder aux données de diagnostic afin de pouvoir les intégrer sous l’onglet **Analyse** .</span><span class="sxs-lookup"><span data-stu-id="5dac8-193">The connection string in the .cscfg file is also used by the Azure portal to access the diagnostics data so it can appear in the **Monitoring** tab.</span></span> <span data-ttu-id="5dac8-194">La chaîne de connexion est nécessaire pour configurer le service afin qu’il affiche les données d’analyse détaillées dans le portail.</span><span class="sxs-lookup"><span data-stu-id="5dac8-194">The connection string is needed to configure the service to show verbose monitoring data in the portal.</span></span>

#### <a name="migrating-projects-to-azure-sdk-26-and-later"></a><span data-ttu-id="5dac8-195">Migration de projets vers le Kit de développement logiciel (SDK) Azure 2.6 et les versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="5dac8-195">Migrating projects to Azure SDK 2.6 and later</span></span>
<span data-ttu-id="5dac8-196">Lors d’une migration du Kit de développement logiciel (SDK) Azure 2.5 vers le Kit de développement logiciel (SDK) Azure 2.6 ou les versions ultérieures, si vous avez un compte de stockage des diagnostics spécifié dans le fichier .wadcfgx, il y reste.</span><span class="sxs-lookup"><span data-stu-id="5dac8-196">When migrating from Azure SDK 2.5 to Azure SDK 2.6 or later, if you had a diagnostics storage account specified in the .wadcfgx file, then it will stay there.</span></span> <span data-ttu-id="5dac8-197">Pour tirer parti de la souplesse que représente l’utilisation de différents comptes de stockage pour différentes configurations de stockage, vous devez ajouter manuellement la chaîne de connexion à votre projet.</span><span class="sxs-lookup"><span data-stu-id="5dac8-197">To take advantage of the flexibility of using different storage accounts for different storage configurations, you'll have to manually add the connection string to your project.</span></span> <span data-ttu-id="5dac8-198">Si vous migrez un projet à partir d'Azure SDK 2.4 ou d’une version antérieure vers Azure SDK 2.6, les chaînes de connexion de diagnostic sont conservées.</span><span class="sxs-lookup"><span data-stu-id="5dac8-198">If you're migrating a project from Azure SDK 2.4 or earlier to Azure SDK 2.6, then the diagnostics connection strings are preserved.</span></span> <span data-ttu-id="5dac8-199">Toutefois, notez les modifications apportées à la manière dont les chaînes de connexion sont traitées dans le Kit de développement logiciel (SDK) Azure 2.6, comme spécifié dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="5dac8-199">However, please note the changes in how connection strings are treated in Azure SDK 2.6 as specified in the previous section.</span></span>

#### <a name="how-visual-studio-determines-the-diagnostics-storage-account"></a><span data-ttu-id="5dac8-200">Détermination du compte de stockage des diagnostics par Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5dac8-200">How Visual Studio determines the diagnostics storage account</span></span>
* <span data-ttu-id="5dac8-201">Si une chaîne de connexion des diagnostics est spécifiée dans le fichier .cscfg, Visual Studio l’utilise pour configurer l’extension des diagnostics lors de la publication et lors de la génération des fichiers xml de configuration publique durant l’empaquetage.</span><span class="sxs-lookup"><span data-stu-id="5dac8-201">If a diagnostics connection string is specified in the .cscfg file, Visual Studio uses it to configure the diagnostics extension when publishing, and when generating the public configuration xml files during packaging.</span></span>
* <span data-ttu-id="5dac8-202">Si aucune chaîne de connexion des diagnostics n’est spécifiée dans le fichier .cscfg, Visual Studio utilise à nouveau le compte de stockage spécifié dans le fichier .wadcfgx pour configurer l’extension des diagnostics lors de la publication et de la génération des fichiers xml de configuration publique durant l’empaquetage.</span><span class="sxs-lookup"><span data-stu-id="5dac8-202">If no diagnostics connection string is specified in the .cscfg file, then Visual Studio falls back to using the storage account specified in the .wadcfgx file to configure the diagnostics extension when publishing, and generating the public configuration xml files when packaging.</span></span>
* <span data-ttu-id="5dac8-203">La chaîne de connexion des diagnostics dans le fichier .cscfg est prioritaire sur le compte de stockage dans le fichier .wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="5dac8-203">The diagnostics connection string in the .cscfg file takes precedence over the storage account in the .wadcfgx file.</span></span> <span data-ttu-id="5dac8-204">Si une chaîne de connexion des diagnostics est spécifiée dans le fichier .cscfg, Visual Studio l’utilise et ignore le compte de stockage dans .wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="5dac8-204">If a diagnostics connection string is specified in the .cscfg file, then Visual Studio uses that and ignores the storage account in .wadcfgx.</span></span>

#### <a name="what-does-the-update-development-storage-connection-strings-checkbox-do"></a><span data-ttu-id="5dac8-205">Quel est le rôle de la case à cocher « Mettre à jour les chaînes de connexion du stockage de développement…»</span><span class="sxs-lookup"><span data-stu-id="5dac8-205">What does the "Update development storage connection strings…"</span></span> <span data-ttu-id="5dac8-206"> ?</span><span class="sxs-lookup"><span data-stu-id="5dac8-206">checkbox do?</span></span>
<span data-ttu-id="5dac8-207">La case à cocher **Mettre à jour les chaînes de connexion de stockage de développement pour les diagnostics et la mise en cache avec les informations d’identification du compte de stockage Microsoft Azure lors de la publication vers Microsoft Azure** offre un moyen pratique pour mettre à jour toute chaîne de connexion de compte de stockage de développement avec le compte de stockage Azure spécifié lors de la publication.</span><span class="sxs-lookup"><span data-stu-id="5dac8-207">The checkbox for **Update development storage connection strings for Diagnostics and Caching with Microsoft Azure storage account credentials when publishing to Microsoft Azure** gives you a convenient way to update any development storage account connection strings with the Azure storage account specified during publishing.</span></span>

<span data-ttu-id="5dac8-208">Par exemple, supposons que vous activiez cette case à cocher et que la chaîne de connexion des diagnostics spécifie `UseDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="5dac8-208">For example, suppose you select this checkbox and the diagnostics connection string specifies `UseDevelopmentStorage=true`.</span></span> <span data-ttu-id="5dac8-209">Lorsque vous publiez le projet sur Azure, Visual Studio met automatiquement à jour la chaîne de connexion des diagnostics avec le compte de stockage que vous avez spécifié dans l’Assistant Publication.</span><span class="sxs-lookup"><span data-stu-id="5dac8-209">When you publish the project to Azure, Visual Studio will automatically update the diagnostics connection string with the storage account you specified in the Publish wizard.</span></span> <span data-ttu-id="5dac8-210">Toutefois, si un compte de stockage réel a été spécifié comme chaîne de connexion des diagnostics, ce compte est utilisé à la place.</span><span class="sxs-lookup"><span data-stu-id="5dac8-210">However, if a real storage account was specified as the diagnostics connection string, then that account is used instead.</span></span>

### <a name="diagnostics-functionality-differences-between-azure-sdk-24-and-earlier-and-azure-sdk-25-and-later"></a><span data-ttu-id="5dac8-211">Différences entre les fonctionnalités de diagnostics du Kit de développement logiciel (SDK) Azure 2.4 et les versions antérieures et du Kit de développement logiciel (SDK) Azure 2.5 et les versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="5dac8-211">Diagnostics functionality differences between Azure SDK 2.4 and earlier and Azure SDK 2.5 and later</span></span>
<span data-ttu-id="5dac8-212">Si vous mettez à niveau votre projet du Kit de développement logiciel (SDK) Azure 2.4 vers le Kit de développement logiciel (SDK) Azure 2.5 ou les versions ultérieures, vous devez garder à l’esprit les différences existant entre les fonctionnalités de diagnostics suivantes.</span><span class="sxs-lookup"><span data-stu-id="5dac8-212">If you're upgrading your project from Azure SDK 2.4 to Azure SDK 2.5 or later, you should bear in mind the following diagnostics functionality differences.</span></span>

* <span data-ttu-id="5dac8-213">**Les API de configuration sont déconseillées** : la configuration par programmation des diagnostics est disponible dans le Kit de développement logiciel (SDK) Azure 2.4 ou les versions antérieures, mais déconseillée dans le Kit de développement logiciel (SDK) Azure 2.5 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="5dac8-213">**Configuration APIs are deprecated** – Programmatic configuration of diagnostics is available in Azure SDK 2.4 or earlier versions, but is deprecated in Azure SDK 2.5 and later.</span></span> <span data-ttu-id="5dac8-214">Si votre configuration des diagnostics est actuellement définie dans un code, vous devez reconfigurer ces paramètres à partir de rien dans le projet migré, afin que les diagnostics continuent à fonctionner.</span><span class="sxs-lookup"><span data-stu-id="5dac8-214">If your diagnostics configuration is currently defined in code, you'll need to reconfigure those settings from scratch in the migrated project in order for diagnostics to keep working.</span></span> <span data-ttu-id="5dac8-215">Le nom du fichier de configuration des diagnostics est diagnostics.wadcfg dans le Kit de développement logiciel (SDK) Azure 2.4 et diagnostics.wadcfgx dans le Kit de développement logiciel (SDK) Azure 2.5 et les versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="5dac8-215">The diagnostics configuration file for Azure SDK 2.4 is diagnostics.wadcfg, and diagnostics.wadcfgx for Azure SDK 2.5 and later.</span></span>
* <span data-ttu-id="5dac8-216">**Les diagnostics pour les applications du service cloud peuvent uniquement être configurés au niveau du rôle, pas au niveau de l’instance.**</span><span class="sxs-lookup"><span data-stu-id="5dac8-216">**Diagnostics for cloud service applications can only be configured at the role level, not at the instance level.**</span></span>
* <span data-ttu-id="5dac8-217">**Chaque fois que vous déployez votre application, la configuration des diagnostics est mise à jour** : cela peut occasionner des problèmes de parité si vous modifiez votre configuration des diagnostics à partir de l’Explorateur de serveurs, puis redéployez votre application.</span><span class="sxs-lookup"><span data-stu-id="5dac8-217">**Every time you deploy your app, the diagnostics configuration is updated** – This can cause parity issues if you change your diagnostics configuration from Server Explorer and then redeploy your app.</span></span>
* <span data-ttu-id="5dac8-218">**Dans le Kit de développement logiciel (SDK) Azure 2.5 et les versions ultérieures, les vidages sur incident sont configurés dans le fichier de configuration des diagnostics, pas dans le code** : si vous avez des vidages sur incident configurés dans le code, vous devez transférer la configuration manuellement du code vers le fichier de configuration, car les vidages sur incident ne sont pas transférés durant la migration vers le Kit de développement logiciel (SDK) Azure 2.6.</span><span class="sxs-lookup"><span data-stu-id="5dac8-218">**In Azure SDK 2.5 and later, crash dumps are configured in the diagnostics configuration file, not in code** – If you have crash dumps configured in code, you'll have to manually transfer the configuration from code to the configuration file, because the crash dumps aren't transferred during the migration to Azure SDK 2.6.</span></span>

