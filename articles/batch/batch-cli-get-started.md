---
title: "Prise en main des commandes Batch de la CLI Azure | Microsoft Docs"
description: "Obtenez une brève introduction aux commandes Batch dans l’interface de ligne de commande Azure pour la gestion des ressources du service Azure Batch."
services: batch
documentationcenter: 
author: tamram
manager: timlt
editor: 
ms.assetid: fcd76587-1827-4bc8-a84d-bba1cd980d85
ms.service: batch
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: multiple
ms.workload: big-compute
ms.date: 07/20/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 9bee0344ba70c50cda36a87ea617906283040ff9
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="manage-batch-resources-with-azure-cli"></a><span data-ttu-id="def40-103">Gérer les ressources Batch avec Azure CLI</span><span class="sxs-lookup"><span data-stu-id="def40-103">Manage Batch resources with Azure CLI</span></span>

<span data-ttu-id="def40-104">Azure CLI 2.0 est la nouvelle expérience de ligne de commande Azure pour la gestion des ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="def40-104">The Azure CLI 2.0 is Azure's new command-line experience for managing Azure resources.</span></span> <span data-ttu-id="def40-105">Elle peut être utilisée sur macOS, Linux et Windows.</span><span class="sxs-lookup"><span data-stu-id="def40-105">It can be used on macOS, Linux, and Windows.</span></span> <span data-ttu-id="def40-106">Azure CLI 2.0 est optimisé pour gérer et administrer les ressources Azure à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="def40-106">Azure CLI 2.0 is optimized for managing and administering Azure resources from the command line.</span></span> <span data-ttu-id="def40-107">Vous pouvez utiliser cette interface pour gérer vos comptes Azure Batch et des ressources telles que les pools, les travaux et les tâches.</span><span class="sxs-lookup"><span data-stu-id="def40-107">You can use the Azure CLI to manage your Azure Batch accounts and to manage resources such as pools, jobs, and tasks.</span></span> <span data-ttu-id="def40-108">Avec l’interface de ligne de commande Azure, vous pouvez écrire le script de nombre des tâches que vous réalisez avec les API Batch, le portail Azure et les applets de commande PowerShell pour Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-108">With the Azure CLI, you can script many of the same tasks you carry out with the Batch APIs, Azure portal, and Batch PowerShell cmdlets.</span></span>

<span data-ttu-id="def40-109">Cet article fournit une vue d’ensemble de l’utilisation de [Azure CLI version 2.0](https://docs.microsoft.com/cli/azure/overview) avec Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-109">This article provides an overview of using [Azure CLI version 2.0](https://docs.microsoft.com/cli/azure/overview) with Batch.</span></span> <span data-ttu-id="def40-110">Consultez la page [Prise en main d’Azure CLI 2.0](https://docs.microsoft.com/cli/azure/get-started-with-azure-cli) pour une vue d’ensemble de l’utilisation de l’interface de ligne de commande avec Azure.</span><span class="sxs-lookup"><span data-stu-id="def40-110">See [Get started with Azure CLI 2.0](https://docs.microsoft.com/cli/azure/get-started-with-azure-cli) for an overview of using the CLI with Azure.</span></span>

<span data-ttu-id="def40-111">Microsoft recommande d’utiliser la dernière version d’Azure CLI, c’est-à-dire la version 2.0.</span><span class="sxs-lookup"><span data-stu-id="def40-111">Microsoft recommends using the latest version of the Azure CLI, version 2.0.</span></span> <span data-ttu-id="def40-112">Pour plus d’informations sur la version 2.0, consultez [Azure CLI 2.0 à présent disponible de façon généralisée](https://azure.microsoft.com/blog/announcing-general-availability-of-vm-storage-and-network-azure-cli-2-0/).</span><span class="sxs-lookup"><span data-stu-id="def40-112">For more information about version 2.0, see [Azure Command Line 2.0 now generally available](https://azure.microsoft.com/blog/announcing-general-availability-of-vm-storage-and-network-azure-cli-2-0/).</span></span>

## <a name="set-up-the-azure-cli"></a><span data-ttu-id="def40-113">Configuration de l’interface de ligne de commande Azure</span><span class="sxs-lookup"><span data-stu-id="def40-113">Set up the Azure CLI</span></span>

<span data-ttu-id="def40-114">Pour installer l’interface de ligne de commande Azure, suivez les instructions fournies dans la section [Installer l’interface de ligne de commande Microsoft Azure](https://docs.microsoft.com/cli/azure/install-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="def40-114">To install the Azure CLI, follow the steps outlined in [Install the Azure CLI](https://docs.microsoft.com/cli/azure/install-azure-cli.md).</span></span>

> [!TIP]
> <span data-ttu-id="def40-115">Nous vous recommandons de mettre à jour fréquemment votre installation d’interface de ligne de commande Azure pour tirer parti des améliorations et des mises à jour de service.</span><span class="sxs-lookup"><span data-stu-id="def40-115">We recommend that you update your Azure CLI installation frequently to take advantage of service updates and enhancements.</span></span>
> 
> 

## <a name="command-help"></a><span data-ttu-id="def40-116">Aide relative aux commandes</span><span class="sxs-lookup"><span data-stu-id="def40-116">Command help</span></span>

<span data-ttu-id="def40-117">Vous pouvez afficher le texte d’aide de toutes les commandes de l’interface de ligne de commande Azure en ajoutant `-h` à la commande.</span><span class="sxs-lookup"><span data-stu-id="def40-117">You can display help text for every command in the Azure CLI by appending `-h` to the command.</span></span> <span data-ttu-id="def40-118">Ignorez les autres options.</span><span class="sxs-lookup"><span data-stu-id="def40-118">Omit any other options.</span></span> <span data-ttu-id="def40-119">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="def40-119">For example:</span></span>

* <span data-ttu-id="def40-120">Pour obtenir l’aide de la commande `az`, entrez : `az -h`</span><span class="sxs-lookup"><span data-stu-id="def40-120">To get help for the `az` command, enter: `az -h`</span></span>
* <span data-ttu-id="def40-121">Pour obtenir la liste de toutes les commandes Batch dans l’interface de ligne de commande, utilisez : `az batch -h`</span><span class="sxs-lookup"><span data-stu-id="def40-121">To get a list of all Batch commands in the CLI, use: `az batch -h`</span></span>
* <span data-ttu-id="def40-122">Pour obtenir de l’aide sur la création d’un compte Batch, entrez : `az batch account create -h`</span><span class="sxs-lookup"><span data-stu-id="def40-122">To get help on creating a Batch account, enter: `az batch account create -h`</span></span>

<span data-ttu-id="def40-123">En cas de doute, utilisez l’option de ligne de commande `-h` pour obtenir de l’aide sur toute commande de l’interface de ligne de commande Azure.</span><span class="sxs-lookup"><span data-stu-id="def40-123">When in doubt, use the `-h` command-line option to get help on any Azure CLI command.</span></span>

> [!NOTE]
> <span data-ttu-id="def40-124">Les versions antérieures d’Azure CLI faisaient précéder les commandes CLI de `azure`.</span><span class="sxs-lookup"><span data-stu-id="def40-124">Earlier versions of the Azure CLI used `azure` to preface a CLI command.</span></span> <span data-ttu-id="def40-125">Dans la version 2.0, toutes les commandes sont désormais précédées de `az`.</span><span class="sxs-lookup"><span data-stu-id="def40-125">In version 2.0, all commands are now prefaced with `az`.</span></span> <span data-ttu-id="def40-126">Veillez à mettre à jour vos scripts pour utiliser la nouvelle syntaxe avec la version 2.0.</span><span class="sxs-lookup"><span data-stu-id="def40-126">Be sure to update your scripts to use the new syntax with version 2.0.</span></span>
>
>  

<span data-ttu-id="def40-127">Consultez également la documentation de référence Azure CLI pour plus d’informations sur les [commandes Azure CLI pour Batch](https://docs.microsoft.com/cli/azure/batch).</span><span class="sxs-lookup"><span data-stu-id="def40-127">Additionally, refer to the Azure CLI reference documentation for details about [Azure CLI commands for Batch](https://docs.microsoft.com/cli/azure/batch).</span></span> 

## <a name="log-in-and-authenticate"></a><span data-ttu-id="def40-128">Connexion et authentification</span><span class="sxs-lookup"><span data-stu-id="def40-128">Log in and authenticate</span></span>

<span data-ttu-id="def40-129">Pour utiliser Azure CLI avec Batch, vous devez vous connecter et vous authentifier.</span><span class="sxs-lookup"><span data-stu-id="def40-129">To use the Azure CLI with Batch, you need to log in and authenticate.</span></span> <span data-ttu-id="def40-130">Vous devez suivre deux étapes simples :</span><span class="sxs-lookup"><span data-stu-id="def40-130">There are two simple steps to follow:</span></span>

1. <span data-ttu-id="def40-131">**Connectez-vous à Azure.**</span><span class="sxs-lookup"><span data-stu-id="def40-131">**Log into Azure.**</span></span> <span data-ttu-id="def40-132">La connexion à Azure vous donne accès aux commandes Azure Resource Manager, notamment aux commandes du [service Batch Management](batch-management-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="def40-132">Logging into Azure gives you access to Azure Resource Manager commands, including [Batch Management service](batch-management-dotnet.md) commands.</span></span>  
2. <span data-ttu-id="def40-133">**Connectez-vous à votre compte Batch.**</span><span class="sxs-lookup"><span data-stu-id="def40-133">**Log into your Batch account.**</span></span> <span data-ttu-id="def40-134">La connexion à votre compte Batch vous donne accès aux commandes du service Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-134">Logging into your Batch account gives you access to Batch service commands.</span></span>   

### <a name="log-in-to-azure"></a><span data-ttu-id="def40-135">Connexion à Azure</span><span class="sxs-lookup"><span data-stu-id="def40-135">Log in to Azure</span></span>

<span data-ttu-id="def40-136">Il existe différentes façons de se connecter à Azure, décrites en détail dans la rubrique [Se connecter avec Azure CLI 2.0](https://docs.microsoft.com/cli/azure/authenticate-azure-cli) :</span><span class="sxs-lookup"><span data-stu-id="def40-136">There are a few different ways to log into Azure, described in detail in [Log in with Azure CLI 2.0](https://docs.microsoft.com/cli/azure/authenticate-azure-cli):</span></span>

1. <span data-ttu-id="def40-137">[Connexion interactive](https://docs.microsoft.com/cli/azure/authenticate-azure-cli#interactive-log-in).</span><span class="sxs-lookup"><span data-stu-id="def40-137">[Log in interactively](https://docs.microsoft.com/cli/azure/authenticate-azure-cli#interactive-log-in).</span></span> <span data-ttu-id="def40-138">Connectez-vous de manière interactive lorsque vous exécutez des commandes Azure CLI vous-même à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="def40-138">Log in interactively when you are running Azure CLI commands yourself from the command line.</span></span>
2. <span data-ttu-id="def40-139">[Connexion avec un principal de service](https://docs.microsoft.com/cli/azure/authenticate-azure-cli#logging-in-with-a-service-principal).</span><span class="sxs-lookup"><span data-stu-id="def40-139">[Log in with a service principal](https://docs.microsoft.com/cli/azure/authenticate-azure-cli#logging-in-with-a-service-principal).</span></span> <span data-ttu-id="def40-140">Connectez-vous avec un principal de service lorsque vous exécutez des commandes Azure CLI à partir d’un script ou d’une application.</span><span class="sxs-lookup"><span data-stu-id="def40-140">Log in with a service principal when you are running Azure CLI commands from a script or an application.</span></span>

<span data-ttu-id="def40-141">Dans le cadre de cet article, nous montrons comment se connecter à Azure de manière interactive.</span><span class="sxs-lookup"><span data-stu-id="def40-141">For the purposes of this article, we show how to log into Azure interactively.</span></span> <span data-ttu-id="def40-142">Entrez [az login](https://docs.microsoft.com/cli/azure/#login) dans la ligne de commande :</span><span class="sxs-lookup"><span data-stu-id="def40-142">Type [az login](https://docs.microsoft.com/cli/azure/#login) on the command line:</span></span>

```azurecli
# Log in to Azure and authenticate interactively.
az login
```

<span data-ttu-id="def40-143">La commande `az login` renvoie un jeton pouvant vous servir lors d’authentifications, comme vous pouvez le constater ici.</span><span class="sxs-lookup"><span data-stu-id="def40-143">The `az login` command returns a token that you can use to authenticate, as shown here.</span></span> <span data-ttu-id="def40-144">Suivez les instructions fournies pour ouvrir une page web et envoyer le jeton à Azure :</span><span class="sxs-lookup"><span data-stu-id="def40-144">Follow the instructions provided to open a web page and submit the token to Azure:</span></span>

![Connexion à Azure](./media/batch-cli-get-started/az-login.png)

<span data-ttu-id="def40-146">Les exemples répertoriés dans la section [Exemples de scripts de l’interpréteur de commandes](#sample-shell-scripts) montrent également comment démarrer votre session Azure CLI en vous connectant à Azure de manière interactive.</span><span class="sxs-lookup"><span data-stu-id="def40-146">The examples listed in the [Sample shell scripts](#sample-shell-scripts) section also show how to start your Azure CLI session by logging into Azure interactively.</span></span> <span data-ttu-id="def40-147">Une fois que vous êtes connecté, vous pouvez appeler des commandes pour travailler avec des ressources Batch Management, y compris les comptes Batch, les clés, les packages d’applications et les quotas.</span><span class="sxs-lookup"><span data-stu-id="def40-147">Once you have logged in, you can call commands to work with Batch Management resources, including Batch accounts, keys, application packages, and quotas.</span></span>  

### <a name="log-in-to-your-batch-account"></a><span data-ttu-id="def40-148">Connexion à votre compte Batch</span><span class="sxs-lookup"><span data-stu-id="def40-148">Log in to your Batch account</span></span>

<span data-ttu-id="def40-149">Pour utiliser Azure CLI pour gérer les ressources Batch, telles que les pools, les travaux et les tâches, vous devez vous connecter à votre compte Batch et vous authentifier.</span><span class="sxs-lookup"><span data-stu-id="def40-149">To use the Azure CLI to manage Batch resources, such as pools, jobs, and tasks, you need to log into your Batch account and authenticate.</span></span> <span data-ttu-id="def40-150">Pour vous connecter au service Batch, utilisez la commande [az batch account login](https://docs.microsoft.com/cli/azure/batch/account#login).</span><span class="sxs-lookup"><span data-stu-id="def40-150">To log in to the Batch service, use the [az batch account login](https://docs.microsoft.com/cli/azure/batch/account#login) command.</span></span> 

<span data-ttu-id="def40-151">Deux options s’offrent à vous pour l’authentification sur votre compte Batch :</span><span class="sxs-lookup"><span data-stu-id="def40-151">You have two options for authenticating against your Batch account:</span></span>

- <span data-ttu-id="def40-152">**Via l’authentification Azure Active Directory (Azure AD)**</span><span class="sxs-lookup"><span data-stu-id="def40-152">**By using Azure Active Directory (Azure AD) authentication.**</span></span> 

    <span data-ttu-id="def40-153">L’authentification avec Azure AD est l’option par défaut lorsque vous utilisez Azure CLI avec Batch. Elle est recommandée pour la plupart des scénarios.</span><span class="sxs-lookup"><span data-stu-id="def40-153">Authenticating with Azure AD is the default when you use the Azure CLI with Batch, and recommended for most scenarios.</span></span> 
    
    <span data-ttu-id="def40-154">Lorsque vous vous connectez à Azure de manière interactive, comme décrit dans la section précédente, vos informations d’identification sont mises en cache, afin qu’Azure CLI puisse vous connecter à votre compte Batch à l’aide de ces mêmes informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="def40-154">When you log in to Azure interactively, as described in the previous section, your credentials are cached, so the Azure CLI can log you in to your Batch account using those same credentials.</span></span> <span data-ttu-id="def40-155">Si vous vous connectez à Azure à l’aide d’un principal de service, ces informations d’identification sont également utilisées pour vous connecter à votre compte Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-155">If you log in to Azure using a service principal, those credentials are also used to log in to your Batch account.</span></span>

    <span data-ttu-id="def40-156">L’avantage d’Azure AD est que le contrôle d’accès se fait en fonction du rôle (RBAC).</span><span class="sxs-lookup"><span data-stu-id="def40-156">An advantage of Azure AD is that it offers role-based access control (RBAC).</span></span> <span data-ttu-id="def40-157">Avec RBAC, l’accès dont bénéficie un utilisateur dépend de son rôle, et non du fait qu’il possède ou non les clés du compte.</span><span class="sxs-lookup"><span data-stu-id="def40-157">With RBAC, a user's access depends on their assigned role, rather than whether or not they possess the account keys.</span></span> <span data-ttu-id="def40-158">Au lieu de gérer les clés de compte, vous pouvez gérer les rôles RBAC et permettre à Azure AD de gérer l’accès et l’authentification.</span><span class="sxs-lookup"><span data-stu-id="def40-158">Instead of managing account keys, you can manage RBAC roles, and let Azure AD handle access and authentication.</span></span>  

    <span data-ttu-id="def40-159">L’authentification avec Azure AD est requise si vous avez créé votre compte Azure Batch avec le mode d’allocation de pool défini sur « Abonnement utilisateur ».</span><span class="sxs-lookup"><span data-stu-id="def40-159">Authenticating with Azure AD is required if you created your Azure Batch account with its pool allocation mode set to 'User Subscription'.</span></span> 

    <span data-ttu-id="def40-160">Pour vous connecter à votre compte Batch à l’aide d’Azure AD, appelez la commande [az batch account login](https://docs.microsoft.com/cli/azure/batch/account#login) :</span><span class="sxs-lookup"><span data-stu-id="def40-160">To log in to your Batch account using Azure AD, call the [az batch account login](https://docs.microsoft.com/cli/azure/batch/account#login) command:</span></span> 

    ```azurecli
    az batch account login -g myresource group -n mybatchaccount
    ```

- <span data-ttu-id="def40-161">**Via l’authentification par clé partagée.**</span><span class="sxs-lookup"><span data-stu-id="def40-161">**By using Shared Key authentication.**</span></span>

    <span data-ttu-id="def40-162">[L’authentification par clé partagée](https://docs.microsoft.com/rest/api/batchservice/authenticate-requests-to-the-azure-batch-service#authentication-via-shared-key) utilise des clés d’accès à votre compte pour authentifier les commandes Azure CLI pour le service Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-162">[Shared Key authentication](https://docs.microsoft.com/rest/api/batchservice/authenticate-requests-to-the-azure-batch-service#authentication-via-shared-key) uses your account access keys to authenticate Azure CLI commands for the Batch service.</span></span>

    <span data-ttu-id="def40-163">Si vous créez des scripts Azure CLI pour automatiser l’appel des commandes Batch, vous pouvez utiliser soit l’authentification par clé partagée, soit un principal de service Azure AD.</span><span class="sxs-lookup"><span data-stu-id="def40-163">If you are creating Azure CLI scripts to automate calling Batch commands, you can use either Shared Key authentication, or an Azure AD service principal.</span></span> <span data-ttu-id="def40-164">Dans certains scénarios, le recours à l’authentification par clé partagée peut être plus simple que la création d’un principal de service.</span><span class="sxs-lookup"><span data-stu-id="def40-164">In some scenarios, using Shared Key authentication may be simpler than creating a service principal.</span></span>  

    <span data-ttu-id="def40-165">Pour vous connecter en utilisant l’authentification par clé partagée, incluez l’option `--shared-key-auth` sur la ligne de commande :</span><span class="sxs-lookup"><span data-stu-id="def40-165">To log in using Shared Key authentication, include the `--shared-key-auth` option on the command line:</span></span>

    ```azurecli
    az batch account login -g myresourcegroup -n mybatchaccount --shared-key-auth
    ```

<span data-ttu-id="def40-166">Les exemples répertoriés dans la section [Exemples de scripts de l’interpréteur de commandes](#sample-shell-scripts) montrent comment se connecter à votre compte Batch avec Azure CLI, à la fois via Azure AD et par clé partagée.</span><span class="sxs-lookup"><span data-stu-id="def40-166">The examples listed in the [Sample shell scripts](#sample-shell-scripts) section show how to log into your Batch account with the Azure CLI using both Azure AD and Shared Key.</span></span>

## <a name="use-azure-batch-cli-templates-and-file-transfer-preview"></a><span data-ttu-id="def40-167">Utiliser des modèles d’interface CLI Batch et de transfert de fichier (préversion)</span><span class="sxs-lookup"><span data-stu-id="def40-167">Use Azure Batch CLI Templates and File Transfer (Preview)</span></span>

<span data-ttu-id="def40-168">Vous pouvez utiliser l’interface Azure CLI pour exécuter des programmes de traitement par lots de bout en bout sans écrire de code.</span><span class="sxs-lookup"><span data-stu-id="def40-168">You can use the Azure CLI to run Batch jobs end-to-end without writing code.</span></span> <span data-ttu-id="def40-169">Avec l’interface de ligne de commande Azure, les modèles de fichier Batch prennent en charge la création de pools, de travaux et de tâches.</span><span class="sxs-lookup"><span data-stu-id="def40-169">Batch template files support creating pools, jobs, and tasks with the Azure CLI.</span></span> <span data-ttu-id="def40-170">Vous pouvez également utiliser l’interface Azure CLI pour charger les fichiers d’entrée de travail sur le compte de Stockage Azure associé au compte Batch. À partir de ce compte, vous pouvez également télécharger les fichiers de sortie de travail.</span><span class="sxs-lookup"><span data-stu-id="def40-170">You can also use the Azure CLI to upload job input files to the Azure Storage account associated with the Batch account, and download job output files from it.</span></span> <span data-ttu-id="def40-171">Pour en savoir plus, consultez la section [Use Azure Batch CLI Templates and File Transfer (Preview)](batch-cli-templates.md) (Utiliser des modèles d’interface CLI Batch et de transfert de fichier (préversion)).</span><span class="sxs-lookup"><span data-stu-id="def40-171">For more information, see [Use Azure Batch CLI Templates and File Transfer (Preview)](batch-cli-templates.md).</span></span>

## <a name="sample-shell-scripts"></a><span data-ttu-id="def40-172">Exemples de scripts de l’interpréteur de commandes</span><span class="sxs-lookup"><span data-stu-id="def40-172">Sample shell scripts</span></span>

<span data-ttu-id="def40-173">Les exemples de scripts répertoriés dans le tableau suivant illustrent l’utilisation des commandes Azure CLI avec le service Batch et le service Batch Management en vue d’accomplir des tâches courantes.</span><span class="sxs-lookup"><span data-stu-id="def40-173">The sample scripts listed in the following table show how to use Azure CLI commands with the Batch service and Batch Management service to accomplish common tasks.</span></span> <span data-ttu-id="def40-174">Ces exemples de scripts couvrent la plupart des commandes disponibles dans Azure CLI pour Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-174">These sample scripts cover many of the commands available in the Azure CLI for Batch.</span></span> 

| <span data-ttu-id="def40-175">Script</span><span class="sxs-lookup"><span data-stu-id="def40-175">Script</span></span> | <span data-ttu-id="def40-176">Remarques</span><span class="sxs-lookup"><span data-stu-id="def40-176">Notes</span></span> |
|---|---|
| [<span data-ttu-id="def40-177">Création d’un compte Batch</span><span class="sxs-lookup"><span data-stu-id="def40-177">Create a Batch account</span></span>](./scripts/batch-cli-sample-create-account.md) | <span data-ttu-id="def40-178">Crée un compte Batch et l’associe à un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="def40-178">Creates a Batch account and associates it with a storage account.</span></span> |
| [<span data-ttu-id="def40-179">Ajouter une application</span><span class="sxs-lookup"><span data-stu-id="def40-179">Add an application</span></span>](./scripts/batch-cli-sample-add-application.md) | <span data-ttu-id="def40-180">Ajoute une application et télécharge les fichiers binaires du package.</span><span class="sxs-lookup"><span data-stu-id="def40-180">Adds an application and uploads packaged binaries.</span></span>|
| [<span data-ttu-id="def40-181">Gérer les pools Batch</span><span class="sxs-lookup"><span data-stu-id="def40-181">Manage Batch pools</span></span>](./scripts/batch-cli-sample-manage-pool.md) | <span data-ttu-id="def40-182">Montre comment créer, redimensionner et gérer des pools.</span><span class="sxs-lookup"><span data-stu-id="def40-182">Demonstrates creating, resizing, and managing pools.</span></span> |
| [<span data-ttu-id="def40-183">Exécuter un travail et des tâches avec Batch</span><span class="sxs-lookup"><span data-stu-id="def40-183">Run a job and tasks with Batch</span></span>](./scripts/batch-cli-sample-run-job.md) | <span data-ttu-id="def40-184">Montre comment exécuter un travail et ajouter des tâches.</span><span class="sxs-lookup"><span data-stu-id="def40-184">Demonstrates running a job and adding tasks.</span></span> |

## <a name="json-files-for-resource-creation"></a><span data-ttu-id="def40-185">Fichiers JSON pour la création de ressources</span><span class="sxs-lookup"><span data-stu-id="def40-185">JSON files for resource creation</span></span>

<span data-ttu-id="def40-186">Lorsque vous créez des ressources Batch comme des pools et des travaux, vous pouvez spécifier un fichier JSON contenant la configuration de la nouvelle ressource au lieu de transmettre ses paramètres en tant qu’options de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="def40-186">When you create Batch resources like pools and jobs, you can specify a JSON file containing the new resource's configuration instead of passing its parameters as command-line options.</span></span> <span data-ttu-id="def40-187">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="def40-187">For example:</span></span>

```azurecli
az batch pool create my_batch_pool.json
```

<span data-ttu-id="def40-188">Si vous pouvez créer la plupart des ressources Batch en utilisant uniquement des options de ligne de commande, certaines fonctionnalités requièrent de spécifier un fichier au format JSON contenant les détails des ressources.</span><span class="sxs-lookup"><span data-stu-id="def40-188">While you can create most Batch resources using only command-line options, some features require that you specify a JSON-formatted file containing the resource details.</span></span> <span data-ttu-id="def40-189">Par exemple, vous devez utiliser un fichier JSON si vous souhaitez spécifier des fichiers de ressources pour une tâche de démarrage.</span><span class="sxs-lookup"><span data-stu-id="def40-189">For example, you must use a JSON file if you want to specify resource files for a start task.</span></span>

<span data-ttu-id="def40-190">Pour afficher la syntaxe de fichier JSON requise pour créer une ressource, consultez l’article [Référence de l’API REST Batch][rest_api].</span><span class="sxs-lookup"><span data-stu-id="def40-190">To see the JSON syntax required to create a resource, refer to the [Batch REST API reference][rest_api] documentation.</span></span> <span data-ttu-id="def40-191">Chaque rubrique « Ajouter *type de ressource* » dans la référence de l’API REST contient des exemples de scripts JSON pour la création de la ressource en question.</span><span class="sxs-lookup"><span data-stu-id="def40-191">Each "Add *resource type*" topic in the REST API reference contains sample JSON scripts for creating that resource.</span></span> <span data-ttu-id="def40-192">Vous pouvez utiliser ces exemples de scripts JSON comme modèles pour les fichiers JSON à utiliser avec Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="def40-192">You can use those sample JSON scripts as templates for JSON files to use with the Azure CLI.</span></span> <span data-ttu-id="def40-193">Par exemple, pour afficher la syntaxe JSON pour la création d’un pool, reportez-vous à [Ajouter un pool à un compte][rest_add_pool].</span><span class="sxs-lookup"><span data-stu-id="def40-193">For example, to see the JSON syntax for pool creation, refer to [Add a pool to an account][rest_add_pool].</span></span>

<span data-ttu-id="def40-194">Pour un exemple de script qui spécifie un fichier JSON, consultez [Exécuter un travail et des tâches avec Batch](./scripts/batch-cli-sample-run-job.md).</span><span class="sxs-lookup"><span data-stu-id="def40-194">For a sample script that specifies a JSON file, see [Run a job and tasks with Batch](./scripts/batch-cli-sample-run-job.md).</span></span>

> [!NOTE]
> <span data-ttu-id="def40-195">Si vous spécifiez un fichier JSON lorsque vous créez une ressource, tous les autres paramètres que vous spécifiez sur la ligne de commande de cette ressource sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="def40-195">If you specify a JSON file when you create a resource, any other parameters that you specify on the command line for that resource are ignored.</span></span>
> 
> 

## <a name="efficient-queries-for-batch-resources"></a><span data-ttu-id="def40-196">Requêtes efficaces pour les ressources Batch</span><span class="sxs-lookup"><span data-stu-id="def40-196">Efficient queries for Batch resources</span></span>

<span data-ttu-id="def40-197">Chaque type de ressource Batch prend en charge une commande `list` qui interroge votre compte Batch et répertorie les ressources de ce type.</span><span class="sxs-lookup"><span data-stu-id="def40-197">Each Batch resource type supports a `list` command that queries your Batch account and lists resources of that type.</span></span> <span data-ttu-id="def40-198">Par exemple, vous pouvez répertorier les pools de votre compte et les tâches d’un travail :</span><span class="sxs-lookup"><span data-stu-id="def40-198">For example, you can list the pools in your account and the tasks in a job:</span></span>

```azurecli
az batch pool list
az batch task list --job-id job001
```

<span data-ttu-id="def40-199">Lorsque vous interrogez le service Batch avec une opération `list`, vous pouvez spécifier une clause OData pour limiter la quantité de données renvoyées.</span><span class="sxs-lookup"><span data-stu-id="def40-199">When you query the Batch service with a `list` operation, you can specify an OData clause to limit the amount of data returned.</span></span> <span data-ttu-id="def40-200">Comme tout le filtrage se produit côté serveur, seules les données que vous demandez sont transmises.</span><span class="sxs-lookup"><span data-stu-id="def40-200">Because all filtering occurs server-side, only the data you request crosses the wire.</span></span> <span data-ttu-id="def40-201">Utilisez ces clauses pour économiser la bande passante (et par conséquent gagner du temps) lorsque vous effectuez des opérations de liste.</span><span class="sxs-lookup"><span data-stu-id="def40-201">Use these clauses to save bandwidth (and therefore time) when you perform list operations.</span></span>

<span data-ttu-id="def40-202">Le tableau suivant décrit les clauses OData prises en charge par le service Batch :</span><span class="sxs-lookup"><span data-stu-id="def40-202">The following table describes the OData clauses supported by the Batch service:</span></span>

| <span data-ttu-id="def40-203">Clause</span><span class="sxs-lookup"><span data-stu-id="def40-203">Clause</span></span> | <span data-ttu-id="def40-204">Description</span><span class="sxs-lookup"><span data-stu-id="def40-204">Description</span></span> |
|---|---|
| `--select-clause [select-clause]` | <span data-ttu-id="def40-205">Retourne un sous-ensemble de propriétés pour chaque entité.</span><span class="sxs-lookup"><span data-stu-id="def40-205">Returns a subset of properties for each entity.</span></span> |
| `--filter-clause [filter-clause]` | <span data-ttu-id="def40-206">Retourne uniquement les entités qui correspondent à l’expression OData spécifiée.</span><span class="sxs-lookup"><span data-stu-id="def40-206">Returns only entities that match the specified OData expression.</span></span> |
| `--expand-clause [expand-clause]` | <span data-ttu-id="def40-207">Obtient les informations d’entité dans un seul appel REST sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="def40-207">Obtains the entity information in a single underlying REST call.</span></span> <span data-ttu-id="def40-208">Pour le moment, la clause expand ne prend en charge que la propriété `stats`.</span><span class="sxs-lookup"><span data-stu-id="def40-208">The expand clause currently supports only the `stats` property.</span></span> |

<span data-ttu-id="def40-209">Pour obtenir un exemple de script qui montre comment utiliser une clause OData, consultez [Exécuter un travail et des tâches avec Batch](./scripts/batch-cli-sample-run-job.md).</span><span class="sxs-lookup"><span data-stu-id="def40-209">For a sample script that shows how to use an OData clause, see [Run a job and tasks with Batch](./scripts/batch-cli-sample-run-job.md).</span></span>

<span data-ttu-id="def40-210">Pour plus d’informations sur l’exécution de requêtes de liste efficaces avec des clauses OData, consultez [Interroger efficacement le service Azure Batch](batch-efficient-list-queries.md).</span><span class="sxs-lookup"><span data-stu-id="def40-210">For more information on performing efficient list queries with OData clauses, see [Query the Azure Batch service efficiently](batch-efficient-list-queries.md).</span></span>

## <a name="troubleshooting-tips"></a><span data-ttu-id="def40-211">Conseils de dépannage</span><span class="sxs-lookup"><span data-stu-id="def40-211">Troubleshooting tips</span></span>

<span data-ttu-id="def40-212">Les conseils suivants peuvent vous aider lors de la résolution de problèmes sur Azure CLI :</span><span class="sxs-lookup"><span data-stu-id="def40-212">The following tips may help when you are troubleshooting Azure CLI issues:</span></span>

* <span data-ttu-id="def40-213">Utilisez `-h` pour obtenir le **texte d’aide** d’une commande d’interface de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="def40-213">Use `-h` to get **help text** for any CLI command</span></span>
* <span data-ttu-id="def40-214">Utilisez `-v` et `-vv` pour afficher la sortie de la commande **verbose**.</span><span class="sxs-lookup"><span data-stu-id="def40-214">Use `-v` and `-vv` to display **verbose** command output.</span></span> <span data-ttu-id="def40-215">Lorsque l’indicateur `-vv` est inclus, Azure CLI affiche les requêtes REST réelles et les réponses correspondantes.</span><span class="sxs-lookup"><span data-stu-id="def40-215">When the `-vv` flag is included, the Azure CLI displays the actual REST requests and responses.</span></span> <span data-ttu-id="def40-216">Ces commutateurs sont pratiques pour afficher une sortie complète des erreurs.</span><span class="sxs-lookup"><span data-stu-id="def40-216">These switches are handy for displaying full error output.</span></span>
* <span data-ttu-id="def40-217">L’option `--json` permet d’afficher la **sortie de commande au format JSON**.</span><span class="sxs-lookup"><span data-stu-id="def40-217">You can view **command output as JSON** with the `--json` option.</span></span> <span data-ttu-id="def40-218">Par exemple, `az batch pool show pool001 --json` affiche les propriétés de pool001 au format JSON.</span><span class="sxs-lookup"><span data-stu-id="def40-218">For example, `az batch pool show pool001 --json` displays pool001's properties in JSON format.</span></span> <span data-ttu-id="def40-219">Vous pouvez ensuite copier et modifier cette sortie pour l’utiliser dans un `--json-file` (voir la section [Fichiers JSON](#json-files) plus haut dans cet article).</span><span class="sxs-lookup"><span data-stu-id="def40-219">You can then copy and modify this output to use in a `--json-file` (see [JSON files](#json-files) earlier in this article).</span></span>
<!---Loc Comment: Please, check link [JSON files] since it's not redirecting to any location.--->
* <span data-ttu-id="def40-220">Le [forum Batch][batch_forum] est géré par les membres de l’équipe Batch.</span><span class="sxs-lookup"><span data-stu-id="def40-220">The [Batch forum][batch_forum] is monitored by Batch team members.</span></span> <span data-ttu-id="def40-221">Vous pouvez y publier vos questions si vous rencontrez des problèmes ou si vous avez besoin d’aide pour une opération spécifique.</span><span class="sxs-lookup"><span data-stu-id="def40-221">You can post your questions there if you run into issues or would like help with a specific operation.</span></span>

## <a name="next-steps"></a><span data-ttu-id="def40-222">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="def40-222">Next steps</span></span>

* <span data-ttu-id="def40-223">Pour plus d’informations sur Azure CLI, consultez la [documentation relative à Azure CLI](https://docs.microsoft.com/cli/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="def40-223">For more information about the Azure CLI, see the [Azure CLI documentation](https://docs.microsoft.com/cli/azure/overview).</span></span>
* <span data-ttu-id="def40-224">Pour plus d’informations sur les ressources Batch, consultez [Vue d’ensemble d’Azure Batch pour les développeurs](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="def40-224">For more information about Batch resources, see [Overview of Azure Batch for developers](batch-api-basics.md).</span></span>
* <span data-ttu-id="def40-225">Pour en savoir plus sur l’utilisation des modèles Batch afin de créer des pools, des travaux et des tâches sans écrire de code, consultez la section [Use Azure Batch CLI Templates and File Transfer (Preview)](batch-cli-templates.md) (Utiliser des modèles d’interface CLI Batch et de transfert de fichier (préversion)).</span><span class="sxs-lookup"><span data-stu-id="def40-225">For more information about using Batch templates to create pools, jobs, and tasks without writing code, see [Use Azure Batch CLI Templates and File Transfer (Preview)](batch-cli-templates.md).</span></span>

[batch_forum]: https://social.msdn.microsoft.com/forums/azure/home?forum=azurebatch
[github_readme]: https://github.com/Azure/azure-xplat-cli/blob/dev/README.md
[rest_api]: https://msdn.microsoft.com/library/azure/dn820158.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
