---
title: "aaaOverview de traitement par lots Azure pour les développeurs | Documents Microsoft"
description: "Découvrez les fonctionnalités de hello du service de traitement par lots hello et ses API à partir d’un point de vue du développement."
services: batch
documentationcenter: .net
author: tamram
manager: timlt
editor: 
ms.assetid: 416b95f8-2d7b-4111-8012-679b0f60d204
ms.service: batch
ms.devlang: multiple
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-compute
ms.date: 06/28/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3da9d82572b28d05d1923166bd08c26725ca3316
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="develop-large-scale-parallel-compute-solutions-with-batch"></a><span data-ttu-id="6ce25-103">Développer des solutions de calcul parallèles à grande échelle avec Batch</span><span class="sxs-lookup"><span data-stu-id="6ce25-103">Develop large-scale parallel compute solutions with Batch</span></span>

<span data-ttu-id="6ce25-104">Dans cette vue d’ensemble des composants hello Hello service Azure Batch, nous présentent les fonctionnalités de service principal hello et que les développeurs de lot peuvent utiliser toobuild des parallèles à grande échelle des ressources de calcul des solutions.</span><span class="sxs-lookup"><span data-stu-id="6ce25-104">In this overview of hello core components of hello Azure Batch service, we discuss hello primary service features and resources that Batch developers can use toobuild large-scale parallel compute solutions.</span></span>

<span data-ttu-id="6ce25-105">Si vous développez une application distribuée de calcul ou de service qui émet direct [API REST] [ batch_rest_api] appels ou si vous utilisez l’un de hello [kits de développement logiciel lot](batch-apis-tools.md#azure-accounts-for-batch-development), vous allez utiliser la plupart des ressources de hello et les fonctionnalités abordées dans cet article.</span><span class="sxs-lookup"><span data-stu-id="6ce25-105">Whether you're developing a distributed computational application or service that issues direct [REST API][batch_rest_api] calls or you're using one of hello [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), you'll use many of hello resources and features discussed in this article.</span></span>

> [!TIP]
> <span data-ttu-id="6ce25-106">Pour une présentation plus haut niveau toohello service Batch, consultez [principes de base d’Azure Batch](batch-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-106">For a higher-level introduction toohello Batch service, see [Basics of Azure Batch](batch-technical-overview.md).</span></span>
>
>

## <a name="batch-service-workflow"></a><span data-ttu-id="6ce25-107">Flux de travail du service Batch</span><span class="sxs-lookup"><span data-stu-id="6ce25-107">Batch service workflow</span></span>
<span data-ttu-id="6ce25-108">Bonjour les flux de travail de niveau supérieur suivant sont typique de presque toutes les applications et services qui utilisent le service de traitement par lots hello pour le traitement des charges de travail parallèles :</span><span class="sxs-lookup"><span data-stu-id="6ce25-108">hello following high-level workflow is typical of nearly all applications and services that use hello Batch service for processing parallel workloads:</span></span>

1. <span data-ttu-id="6ce25-109">Télécharger hello **des fichiers de données** que vous souhaitez tooprocess tooan [Azure Storage] [ azure_storage] compte.</span><span class="sxs-lookup"><span data-stu-id="6ce25-109">Upload hello **data files** that you want tooprocess tooan [Azure Storage][azure_storage] account.</span></span> <span data-ttu-id="6ce25-110">Traitement par lots inclut la prise en charge intégrée pour accéder au stockage d’objets Blob Azure et vos tâches peuvent télécharger ces fichiers trop[nœuds de calcul](#compute-node) lors de l’exécution des tâches hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-110">Batch includes built-in support for accessing Azure Blob storage, and your tasks can download these files too[compute nodes](#compute-node) when hello tasks are run.</span></span>
2. <span data-ttu-id="6ce25-111">Télécharger hello **fichiers d’application** fonctionnant à vos tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-111">Upload hello **application files** that your tasks will run.</span></span> <span data-ttu-id="6ce25-112">Ces fichiers peuvent être des fichiers binaires ou de scripts et de leurs dépendances et sont exécutées par des tâches hello dans vos tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-112">These files can be binaries or scripts and their dependencies, and are executed by hello tasks in your jobs.</span></span> <span data-ttu-id="6ce25-113">Les tâches peuvent télécharger ces fichiers à partir de votre compte de stockage, ou vous pouvez utiliser hello [les packages d’applications](#application-packages) la fonctionnalité de traitement par lots pour le déploiement et la gestion des applications.</span><span class="sxs-lookup"><span data-stu-id="6ce25-113">Your tasks can download these files from your Storage account, or you can use hello [application packages](#application-packages) feature of Batch for application management and deployment.</span></span>
3. <span data-ttu-id="6ce25-114">Créez un [pool](#pool) de nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-114">Create a [pool](#pool) of compute nodes.</span></span> <span data-ttu-id="6ce25-115">Lorsque vous créez un pool, vous spécifiez le nombre de hello de nœuds de calcul pour le pool de hello, leur taille et le système d’exploitation de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-115">When you create a pool, you specify hello number of compute nodes for hello pool, their size, and hello operating system.</span></span> <span data-ttu-id="6ce25-116">Lors de chaque tâche dans votre tâche s’exécute, elle est assignée tooexecute sur l’un des nœuds hello dans le pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-116">When each task in your job runs, it's assigned tooexecute on one of hello nodes in your pool.</span></span>
4. <span data-ttu-id="6ce25-117">Créez un [travail](#job).</span><span class="sxs-lookup"><span data-stu-id="6ce25-117">Create a [job](#job).</span></span> <span data-ttu-id="6ce25-118">Un travail gère une collection de tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-118">A job manages a collection of tasks.</span></span> <span data-ttu-id="6ce25-119">Vous associez chaque pool travail tooa spécifique où les tâches de ce travail seront exécutera.</span><span class="sxs-lookup"><span data-stu-id="6ce25-119">You associate each job tooa specific pool where that job's tasks will run.</span></span>
5. <span data-ttu-id="6ce25-120">Ajouter [tâches](#task) toohello travail.</span><span class="sxs-lookup"><span data-stu-id="6ce25-120">Add [tasks](#task) toohello job.</span></span> <span data-ttu-id="6ce25-121">Chaque tâche exécute l’application hello ou un script que vous avez téléchargé les fichiers de données hello tooprocess qu'il télécharge à partir de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="6ce25-121">Each task runs hello application or script that you uploaded tooprocess hello data files it downloads from your Storage account.</span></span> <span data-ttu-id="6ce25-122">Comme chaque tâche se termine, il peut télécharger ses tooAzure sortie stockage.</span><span class="sxs-lookup"><span data-stu-id="6ce25-122">As each task completes, it can upload its output tooAzure Storage.</span></span>
6. <span data-ttu-id="6ce25-123">Surveiller la progression du travail et récupérer le résultat de la tâche hello depuis le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="6ce25-123">Monitor job progress and retrieve hello task output from Azure Storage.</span></span>

<span data-ttu-id="6ce25-124">Bonjour les sections suivantes décrivent ces et hello d’autres ressources de traitement par lots qui permettent de votre scénario.</span><span class="sxs-lookup"><span data-stu-id="6ce25-124">hello following sections discuss these and hello other resources of Batch that enable your distributed computational scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="6ce25-125">Vous avez besoin une [compte Batch](#account) toouse hello service Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-125">You need a [Batch account](#account) toouse hello Batch service.</span></span> <span data-ttu-id="6ce25-126">La plupart des solutions Batch utilisent aussi un compte [Stockage Azure][azure_storage], afin de stocker et récupérer un fichier.</span><span class="sxs-lookup"><span data-stu-id="6ce25-126">Most Batch solutions also use an [Azure Storage][azure_storage] account for file storage and retrieval.</span></span> <span data-ttu-id="6ce25-127">Traitement par lots prend actuellement en charge uniquement hello **à usage général** type de compte de stockage, comme décrit à l’étape 5 de [créer un compte de stockage](../storage/common/storage-create-storage-account.md#create-a-storage-account) dans [comptes de stockage sur Azure](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-127">Batch currently supports only hello **general-purpose** storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>
>
>

## <a name="batch-service-resources"></a><span data-ttu-id="6ce25-128">Ressources du service Batch</span><span class="sxs-lookup"><span data-stu-id="6ce25-128">Batch service resources</span></span>
<span data-ttu-id="6ce25-129">Hello suivant des ressources--comptes, certains nœuds, les pools, les travaux et les tâches--sont requis par toutes les solutions qui utilisent le service de traitement par lots hello de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-129">Some of hello following resources--accounts, compute nodes, pools, jobs, and tasks--are required by all solutions that use hello Batch service.</span></span> <span data-ttu-id="6ce25-130">D’autres, telles que les planifications de travaux et les packages d’applications, sont utiles, mais facultatives.</span><span class="sxs-lookup"><span data-stu-id="6ce25-130">Others, like job schedules and application packages, are helpful, but optional, features.</span></span>

* [<span data-ttu-id="6ce25-131">Compte</span><span class="sxs-lookup"><span data-stu-id="6ce25-131">Account</span></span>](#account)
* [<span data-ttu-id="6ce25-132">Nœud de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-132">Compute node</span></span>](#compute-node)
* [<span data-ttu-id="6ce25-133">Pool</span><span class="sxs-lookup"><span data-stu-id="6ce25-133">Pool</span></span>](#pool)
* [<span data-ttu-id="6ce25-134">Travail</span><span class="sxs-lookup"><span data-stu-id="6ce25-134">Job</span></span>](#job)

  * [<span data-ttu-id="6ce25-135">Planifications de travaux</span><span class="sxs-lookup"><span data-stu-id="6ce25-135">Job schedules</span></span>](#scheduled-jobs)
* [<span data-ttu-id="6ce25-136">Tâche</span><span class="sxs-lookup"><span data-stu-id="6ce25-136">Task</span></span>](#task)

  * [<span data-ttu-id="6ce25-137">Tâche de démarrage</span><span class="sxs-lookup"><span data-stu-id="6ce25-137">Start task</span></span>](#start-task)
  * [<span data-ttu-id="6ce25-138">Tâche du gestionnaire de travaux</span><span class="sxs-lookup"><span data-stu-id="6ce25-138">Job manager task</span></span>](#job-manager-task)
  * [<span data-ttu-id="6ce25-139">Tâches de préparation et lancement</span><span class="sxs-lookup"><span data-stu-id="6ce25-139">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
  * [<span data-ttu-id="6ce25-140">Tâche multi-instance (MPI)</span><span class="sxs-lookup"><span data-stu-id="6ce25-140">Multi-instance task (MPI)</span></span>](#multi-instance-tasks)
  * [<span data-ttu-id="6ce25-141">Dépendances de la tâche</span><span class="sxs-lookup"><span data-stu-id="6ce25-141">Task dependencies</span></span>](#task-dependencies)
* [<span data-ttu-id="6ce25-142">Packages d’applications</span><span class="sxs-lookup"><span data-stu-id="6ce25-142">Application packages</span></span>](#application-packages)

## <a name="account"></a><span data-ttu-id="6ce25-143">Compte</span><span class="sxs-lookup"><span data-stu-id="6ce25-143">Account</span></span>
<span data-ttu-id="6ce25-144">Un compte de traitement par lots est une entité identifiée de façon unique au sein de hello service Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-144">A Batch account is a uniquely identified entity within hello Batch service.</span></span> <span data-ttu-id="6ce25-145">Tout le traitement s’effectue via un compte Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-145">All processing is associated with a Batch account.</span></span>

<span data-ttu-id="6ce25-146">Vous pouvez créer un compte Azure Batch hello [portail Azure](batch-account-create-portal.md) ou par programme, comme avec hello [bibliothèque de Batch Management .NET](batch-management-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-146">You can create an Azure Batch account using hello [Azure portal](batch-account-create-portal.md) or programmatically, such as with hello [Batch Management .NET library](batch-management-dotnet.md).</span></span> <span data-ttu-id="6ce25-147">Lorsque vous créez un compte de hello, vous pouvez associer un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="6ce25-147">When creating hello account, you can associate an Azure storage account.</span></span>

### <a name="pool-allocation-mode"></a><span data-ttu-id="6ce25-148">Mode d’allocation de pool</span><span class="sxs-lookup"><span data-stu-id="6ce25-148">Pool allocation mode</span></span>

<span data-ttu-id="6ce25-149">Lorsque vous créez un compte Batch, vous pouvez spécifier la manière dont les [pools](#pool) de nœuds de calcul sont alloués.</span><span class="sxs-lookup"><span data-stu-id="6ce25-149">When you create a Batch account, you can specify how [pools](#pool) of compute nodes are allocated.</span></span> <span data-ttu-id="6ce25-150">Vous pouvez choisir les pools de tooallocate de nœuds de calcul dans un abonnement géré par le traitement par lots Azure, ou vous pouvez les allouer dans votre propre abonnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-150">You can choose tooallocate pools of compute nodes in a subscription managed by Azure Batch, or you can allocate them in your own subscription.</span></span> <span data-ttu-id="6ce25-151">Hello *mode d’allocation de pool* propriété pour le compte de hello détermine où les pools sont alloués.</span><span class="sxs-lookup"><span data-stu-id="6ce25-151">hello *pool allocation mode* property for hello account determines where pools are allocated.</span></span> 

<span data-ttu-id="6ce25-152">Tenez compte des toodecide qui toouse du mode de répartition, du pool qui répond le mieux à votre scénario :</span><span class="sxs-lookup"><span data-stu-id="6ce25-152">toodecide which pool allocation mode toouse, consider which best fits your scenario:</span></span>

* <span data-ttu-id="6ce25-153">**Service de traitement par lots**: Service de traitement par lots est le mode d’allocation de pool par défaut hello, dans lequel les pools sont alloués coulisses de hello dans les abonnements de géré par Azure.</span><span class="sxs-lookup"><span data-stu-id="6ce25-153">**Batch Service**: Batch Service is hello default pool allocation mode, in which pools are allocated behind hello scenes in Azure-managed subscriptions.</span></span> <span data-ttu-id="6ce25-154">Gardez à l’esprit ces points clés sur le mode d’allocation de pool hello Service Batch :</span><span class="sxs-lookup"><span data-stu-id="6ce25-154">Keep in mind these key points about hello Batch Service pool allocation mode:</span></span>

    - <span data-ttu-id="6ce25-155">mode d’allocation de pool Hello Service Batch prend en charge les pools de Service Cloud et de Machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-155">hello Batch Service pool allocation mode supports both Cloud Service and Virtual Machine pools.</span></span>
    - <span data-ttu-id="6ce25-156">Hello mode d’allocation de pool Service Batch prend en charge les deux authentification shared key ou [l’authentification Azure Active Directory](batch-aad-auth.md) (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="6ce25-156">hello Batch Service pool allocation mode supports both shared key authentication or [Azure Active Directory authentication](batch-aad-auth.md) (Azure AD).</span></span> 
    - <span data-ttu-id="6ce25-157">Vous pouvez utiliser soit nœuds de calcul dédié ou à faible priorité dans les pools alloués avec mode d’allocation de pool hello Service Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-157">You can use either dedicated or low-priority compute nodes in pools allocated with hello Batch Service pool allocation mode.</span></span>
    - <span data-ttu-id="6ce25-158">N’utilisez pas le mode d’allocation de pool Service Batch hello si vous envisagez de pools de machine virtuelle Azure toocreate à partir d’images de machine virtuelle personnalisées, ou si vous envisagez de toouse un réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="6ce25-158">Do not use hello Batch Service pool allocation mode if you plan toocreate Azure virtual machine pools from custom VM images, or if you plan toouse a virtual network.</span></span> <span data-ttu-id="6ce25-159">Créer votre compte avec le mode d’allocation de pool hello abonnement de l’utilisateur à la place.</span><span class="sxs-lookup"><span data-stu-id="6ce25-159">Create your account with hello User Subscription pool allocation mode instead.</span></span>
    - <span data-ttu-id="6ce25-160">Pools d’ordinateur virtuel configurés dans un compte créé avec le mode d’allocation de pool hello Service Batch doivent être créés à partir de [Azure Marketplace de Machines virtuelles] [ vm_marketplace] images.</span><span class="sxs-lookup"><span data-stu-id="6ce25-160">Virtual Machine pools provisioned in an account created with hello Batch Service pool allocation mode must be created from [Azure Virtual Machines Marketplace][vm_marketplace] images.</span></span>

* <span data-ttu-id="6ce25-161">**Abonnement de l’utilisateur**: avec mode d’allocation de pool hello abonnement de l’utilisateur, les pools de lot sont alloués à hello abonnement Azure où le compte de hello est créé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-161">**User subscription**: With hello User Subscription pool allocation mode, Batch pools are allocated in hello Azure subscription where hello account is created.</span></span> <span data-ttu-id="6ce25-162">Gardez à l’esprit ces points clés sur le mode d’allocation de pool hello abonnement de l’utilisateur :</span><span class="sxs-lookup"><span data-stu-id="6ce25-162">Keep in mind these key points about hello User Subscription pool allocation mode:</span></span>
     
    - <span data-ttu-id="6ce25-163">mode d’allocation de pool Hello abonnement utilisateur prend en charge uniquement les pools de Machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-163">hello User Subscription pool allocation mode supports only Virtual Machine pools.</span></span> <span data-ttu-id="6ce25-164">elle ne gère pas les pools de services cloud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-164">It does not support Cloud Services pools.</span></span>
    - <span data-ttu-id="6ce25-165">pools de Machine virtuelle toocreate de personnalisés des images de machine virtuelle ou toouse un réseau virtuel avec les pools d’ordinateur virtuel, vous devez utiliser le mode d’allocation de pool hello abonnement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6ce25-165">toocreate Virtual Machine pools from custom VM images or toouse a virtual network with Virtual Machine pools, you must use hello User Subscription pool allocation mode.</span></span>  
    - <span data-ttu-id="6ce25-166">Vous devez utiliser [l’authentification Azure Active Directory](batch-aad-auth.md) avec les pools sont alloués à l’abonnement d’utilisateur hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-166">You must use [Azure Active Directory authentication](batch-aad-auth.md) with pools that are allocated in hello user subscription.</span></span> 
    - <span data-ttu-id="6ce25-167">Vous devez configurer un coffre de clés Azure pour votre compte de traitement par lots si le mode d’allocation de pool hello a la valeur tooUser abonnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-167">You must set up an Azure key vault for your Batch account if hello pool allocation mode is set tooUser Subscription.</span></span> 
    - <span data-ttu-id="6ce25-168">Vous pouvez utiliser des nœuds de calcul dédié uniquement dans les pools d’un compte créé avec le mode d’allocation de pool hello abonnement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6ce25-168">You can use only dedicated compute nodes in pools in an account created with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="6ce25-169">Les nœuds à faible priorité ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6ce25-169">Low-priority nodes are not supported.</span></span>
    - <span data-ttu-id="6ce25-170">Pools d’ordinateur virtuel configurés dans un compte avec le mode d’allocation de pool hello abonnement utilisateur peuvent être créés à partir de [Azure Marketplace de Machines virtuelles] [ vm_marketplace] images, ou de personnaliser les images que vous avez fournir.</span><span class="sxs-lookup"><span data-stu-id="6ce25-170">Virtual Machine pools provisioned in an account with hello User Subscription pool allocation mode can be created either from [Azure Virtual Machines Marketplace][vm_marketplace] images, or from custom images that you provide.</span></span>

<span data-ttu-id="6ce25-171">Hello tableau suivant compare les modes de répartition pool Service Batch et d’abonnement de l’utilisateur des hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-171">hello following table compares hello Batch Service and User Subscription pool allocation modes.</span></span>

| <span data-ttu-id="6ce25-172">**Mode d’allocation de pool**</span><span class="sxs-lookup"><span data-stu-id="6ce25-172">**Pool allocation mode**</span></span>                 | <span data-ttu-id="6ce25-173">**Service Batch**</span><span class="sxs-lookup"><span data-stu-id="6ce25-173">**Batch Service**</span></span>                                                                                       | <span data-ttu-id="6ce25-174">**Abonnement utilisateur**</span><span class="sxs-lookup"><span data-stu-id="6ce25-174">**User Subscription**</span></span>                                                              |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="6ce25-175">**Les pools sont alloués dans**</span><span class="sxs-lookup"><span data-stu-id="6ce25-175">**Pools are allocated in**</span></span>               | <span data-ttu-id="6ce25-176">Un abonnement Azure géré</span><span class="sxs-lookup"><span data-stu-id="6ce25-176">An Azure-managed subscription</span></span>                                                                           | <span data-ttu-id="6ce25-177">abonnement d’utilisateur Hello dans le lot hello compte est créé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-177">hello user subscription in which hello Batch account is created</span></span>                        |
| <span data-ttu-id="6ce25-178">**Configurations prises en charge**</span><span class="sxs-lookup"><span data-stu-id="6ce25-178">**Supported configurations**</span></span>             | <ul><li><span data-ttu-id="6ce25-179">Configuration service cloud</span><span class="sxs-lookup"><span data-stu-id="6ce25-179">Cloud Service Configuration</span></span></li><li><span data-ttu-id="6ce25-180">Configuration de machines virtuelles (Linux et Windows)</span><span class="sxs-lookup"><span data-stu-id="6ce25-180">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul> | <ul><li><span data-ttu-id="6ce25-181">Configuration de machines virtuelles (Linux et Windows)</span><span class="sxs-lookup"><span data-stu-id="6ce25-181">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul>                |
| <span data-ttu-id="6ce25-182">**Images de machine virtuelle prises en charge**</span><span class="sxs-lookup"><span data-stu-id="6ce25-182">**Supported VM images**</span></span>                  | <ul><li><span data-ttu-id="6ce25-183">Images de la Place de marché Azure</span><span class="sxs-lookup"><span data-stu-id="6ce25-183">Azure Marketplace images</span></span></li></ul>                                                              | <ul><li><span data-ttu-id="6ce25-184">Images de la Place de marché Azure</span><span class="sxs-lookup"><span data-stu-id="6ce25-184">Azure Marketplace images</span></span></li><li><span data-ttu-id="6ce25-185">Images personnalisées</span><span class="sxs-lookup"><span data-stu-id="6ce25-185">Custom images</span></span></li></ul>                   |
| <span data-ttu-id="6ce25-186">**Types de nœuds de calcul pris en charge**</span><span class="sxs-lookup"><span data-stu-id="6ce25-186">**Supported compute node types**</span></span>         | <ul><li><span data-ttu-id="6ce25-187">Nœuds dédiés</span><span class="sxs-lookup"><span data-stu-id="6ce25-187">Dedicated nodes</span></span></li><li><span data-ttu-id="6ce25-188">Nœuds de faible priorité</span><span class="sxs-lookup"><span data-stu-id="6ce25-188">Low-priority nodes</span></span></li></ul>                                            | <ul><li><span data-ttu-id="6ce25-189">Nœuds dédiés</span><span class="sxs-lookup"><span data-stu-id="6ce25-189">Dedicated nodes</span></span></li></ul>                                                  |
| <span data-ttu-id="6ce25-190">**Authentification prise en charge**</span><span class="sxs-lookup"><span data-stu-id="6ce25-190">**Supported authentication**</span></span>             | <ul><li><span data-ttu-id="6ce25-191">Clé partagée</span><span class="sxs-lookup"><span data-stu-id="6ce25-191">Shared Key</span></span></li><li><span data-ttu-id="6ce25-192">Azure AD</span><span class="sxs-lookup"><span data-stu-id="6ce25-192">Azure AD</span></span></li></ul>                                                           | <ul><li><span data-ttu-id="6ce25-193">Azure AD</span><span class="sxs-lookup"><span data-stu-id="6ce25-193">Azure AD</span></span></li></ul>                                                         |
| <span data-ttu-id="6ce25-194">**Azure Key Vault requis**</span><span class="sxs-lookup"><span data-stu-id="6ce25-194">**Azure Key Vault required**</span></span>             | <span data-ttu-id="6ce25-195">Non</span><span class="sxs-lookup"><span data-stu-id="6ce25-195">No</span></span>                                                                                                      | <span data-ttu-id="6ce25-196">Oui</span><span class="sxs-lookup"><span data-stu-id="6ce25-196">Yes</span></span>                                                                                |
| <span data-ttu-id="6ce25-197">**Quota de cœurs**</span><span class="sxs-lookup"><span data-stu-id="6ce25-197">**Core quota**</span></span>                           | <span data-ttu-id="6ce25-198">Déterminé par le quota de cœurs Batch</span><span class="sxs-lookup"><span data-stu-id="6ce25-198">Determined by Batch core quota</span></span>                                                                          | <span data-ttu-id="6ce25-199">Déterminé par le quota de cœurs Batch</span><span class="sxs-lookup"><span data-stu-id="6ce25-199">Determined by subscription core quota</span></span>                                              |
| <span data-ttu-id="6ce25-200">**Support réseau virtuel Azure (Vnet)**</span><span class="sxs-lookup"><span data-stu-id="6ce25-200">**Azure Virtual Network (Vnet) support**</span></span> | <span data-ttu-id="6ce25-201">Pools créés avec hello Configuration de Service Cloud</span><span class="sxs-lookup"><span data-stu-id="6ce25-201">Pools created with hello Cloud Service Configuration</span></span>                                                      | <span data-ttu-id="6ce25-202">Pools créés avec hello Configuration d’ordinateur virtuel</span><span class="sxs-lookup"><span data-stu-id="6ce25-202">Pools created with hello Virtual Machine Configuration</span></span>                               |
| <span data-ttu-id="6ce25-203">**Modèle de déploiement de réseau virtuel pris en charge**</span><span class="sxs-lookup"><span data-stu-id="6ce25-203">**Vnet deployment model supported**</span></span>      | <span data-ttu-id="6ce25-204">Vnets créés avec un modèle de déploiement classique</span><span class="sxs-lookup"><span data-stu-id="6ce25-204">Vnets created with classic deployment model</span></span>                                                             | <span data-ttu-id="6ce25-205">Réseaux virtuels créés avec le modèle de déploiement classique hello ou d’Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="6ce25-205">Vnets created with either hello classic deployment model or Azure   Resource Manager</span></span> |

## <a name="azure-storage-account"></a><span data-ttu-id="6ce25-206">Compte de Stockage Azure</span><span class="sxs-lookup"><span data-stu-id="6ce25-206">Azure Storage account</span></span>

<span data-ttu-id="6ce25-207">La plupart des solutions Batch utilisent Stockage Azure pour stocker les fichiers de ressources et les fichiers de sortie.</span><span class="sxs-lookup"><span data-stu-id="6ce25-207">Most Batch solutions use Azure Storage for storing resource files and output files.</span></span>  

<span data-ttu-id="6ce25-208">Traitement par lots prend en charge actuellement seul type de compte de stockage à usage général hello, comme décrit à l’étape 5 de [créer un compte de stockage](../storage/common/storage-create-storage-account.md#create-a-storage-account) dans [comptes de stockage sur Azure](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-208">Batch currently supports only hello general-purpose storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="6ce25-209">Vos tâches Batch (y compris les tâches standard, de démarrage, de préparation des travaux et de validation des travaux) doivent spécifier des fichiers de ressources se trouvant dans les comptes de stockage à usage général.</span><span class="sxs-lookup"><span data-stu-id="6ce25-209">Your Batch tasks (including standard tasks, start tasks, job preparation tasks, and job release tasks) must specify resource files that reside in general-purpose storage accounts.</span></span>


## <a name="compute-node"></a><span data-ttu-id="6ce25-210">Nœud de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-210">Compute node</span></span>
<span data-ttu-id="6ce25-211">Un nœud de calcul est une machine virtuelle Azure (VM) ou un service de cloud machine virtuelle qui est dédié tooprocessing une partie de la charge de travail de votre application.</span><span class="sxs-lookup"><span data-stu-id="6ce25-211">A compute node is an Azure virtual machine (VM) or cloud service VM that is dedicated tooprocessing a portion of your application's workload.</span></span> <span data-ttu-id="6ce25-212">taille Hello d’un nœud détermine le nombre hello de cœurs du processeur, la capacité de mémoire et taille de système de fichiers local allouée toohello nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-212">hello size of a node determines hello number of CPU cores, memory capacity, and local file system size that is allocated toohello node.</span></span> <span data-ttu-id="6ce25-213">Vous pouvez créer des pools de nœuds Windows ou Linux à l’aide d’Azure Cloud Services, les images à partir de hello [Azure Marketplace de Machines virtuelles][vm_marketplace], ou des images personnalisées que vous avez préparé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-213">You can create pools of Windows or Linux nodes by using Azure Cloud Services, images from hello [Azure Virtual Machines Marketplace][vm_marketplace], or custom images that you prepare.</span></span> <span data-ttu-id="6ce25-214">Voir hello [Pool](#pool) section pour plus d’informations sur ces options.</span><span class="sxs-lookup"><span data-stu-id="6ce25-214">See hello following [Pool](#pool) section for more information on these options.</span></span>

<span data-ttu-id="6ce25-215">Nœuds peuvent exécuter un fichier exécutable ou un script qui est pris en charge par l’environnement de système d’exploitation hello du nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-215">Nodes can run any executable or script that is supported by hello operating system environment of hello node.</span></span> <span data-ttu-id="6ce25-216">Cela inclut les scripts \*.exe, \*.cmd, \*.bat et PowerShell pour Windows, les fichiers binaires, ainsi que les scripts shell et Python pour Linux.</span><span class="sxs-lookup"><span data-stu-id="6ce25-216">This includes \*.exe, \*.cmd, \*.bat and PowerShell scripts for Windows--and binaries, shell, and Python scripts for Linux.</span></span>

<span data-ttu-id="6ce25-217">Tous les nœuds de calcul Batch incluent également les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6ce25-217">All compute nodes in Batch also include:</span></span>

* <span data-ttu-id="6ce25-218">Une [structure de dossiers](#files-and-directories) standard et des [variables d’environnement](#environment-settings-for-tasks) associées pouvant être référencées par les tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-218">A standard [folder structure](#files-and-directories) and associated [environment variables](#environment-settings-for-tasks) that are available for reference by tasks.</span></span>
* <span data-ttu-id="6ce25-219">**Pare-feu** paramètres qui sont configurés toocontrol accès.</span><span class="sxs-lookup"><span data-stu-id="6ce25-219">**Firewall** settings that are configured toocontrol access.</span></span>
* <span data-ttu-id="6ce25-220">[Accès à distance](#connecting-to-compute-nodes) tooboth Windows (protocole RDP (Remote Desktop)) et des nœuds Linux (Secure Shell (SSH)).</span><span class="sxs-lookup"><span data-stu-id="6ce25-220">[Remote access](#connecting-to-compute-nodes) tooboth Windows (Remote Desktop Protocol (RDP)) and Linux (Secure Shell (SSH)) nodes.</span></span>

## <a name="pool"></a><span data-ttu-id="6ce25-221">pool</span><span class="sxs-lookup"><span data-stu-id="6ce25-221">Pool</span></span>
<span data-ttu-id="6ce25-222">Un pool est une collection de nœuds sur lesquels votre application s’exécute.</span><span class="sxs-lookup"><span data-stu-id="6ce25-222">A pool is a collection of nodes that your application runs on.</span></span> <span data-ttu-id="6ce25-223">pool de Hello peut être créé manuellement par vous, ou automatiquement par le service Batch de hello lorsque vous spécifiez hello toobe de travail terminé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-223">hello pool can be created manually by you, or automatically by hello Batch service when you specify hello work toobe done.</span></span> <span data-ttu-id="6ce25-224">Vous pouvez créer et gérer un pool qui répond aux besoins en ressources de votre application hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-224">You can create and manage a pool that meets hello resource requirements of your application.</span></span> <span data-ttu-id="6ce25-225">Un pool peut être utilisé uniquement par le compte de traitement par lots hello dans lequel il a été créé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-225">A pool can be used only by hello Batch account in which it was created.</span></span> <span data-ttu-id="6ce25-226">Un compte Batch peut avoir plusieurs pools.</span><span class="sxs-lookup"><span data-stu-id="6ce25-226">A Batch account can have more than one pool.</span></span>

<span data-ttu-id="6ce25-227">Les pools de traitement par lots Azure de build sur la plateforme de calcul Azure hello principale.</span><span class="sxs-lookup"><span data-stu-id="6ce25-227">Azure Batch pools build on top of hello core Azure compute platform.</span></span> <span data-ttu-id="6ce25-228">Ils fournissent à grande échelle d’allocation, installation de l’application, la distribution des données, contrôle d’intégrité et flexible ajustement du nombre de hello de nœuds de calcul dans un pool ([mise à l’échelle](#scaling-compute-resources)).</span><span class="sxs-lookup"><span data-stu-id="6ce25-228">They provide large-scale allocation, application installation, data distribution, health monitoring, and flexible adjustment of hello number of compute nodes within a pool ([scaling](#scaling-compute-resources)).</span></span>

<span data-ttu-id="6ce25-229">Chaque nœud est ajouté tooa pool est attribué un nom unique et une adresse IP.</span><span class="sxs-lookup"><span data-stu-id="6ce25-229">Every node that is added tooa pool is assigned a unique name and IP address.</span></span> <span data-ttu-id="6ce25-230">Lorsqu’un nœud est supprimé d’un pool, les modifications apportées au système d’exploitation de toohello ou les fichiers sont perdues, et son nom et l’adresse IP sont libérées à un usage ultérieur.</span><span class="sxs-lookup"><span data-stu-id="6ce25-230">When a node is removed from a pool, any changes that are made toohello operating system or files are lost, and its name and IP address are released for future use.</span></span> <span data-ttu-id="6ce25-231">Lorsqu’un nœud quitte un pool, sa durée de vie est terminée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-231">When a node leaves a pool, its lifetime is over.</span></span>

<span data-ttu-id="6ce25-232">Lorsque vous créez un pool, vous pouvez spécifier hello suivant des attributs.</span><span class="sxs-lookup"><span data-stu-id="6ce25-232">When you create a pool, you can specify hello following attributes.</span></span> <span data-ttu-id="6ce25-233">Certains paramètres sont différents, selon le mode d’allocation de pool hello Hello lot [compte](#account):</span><span class="sxs-lookup"><span data-stu-id="6ce25-233">Some settings differ, depending on hello pool allocation mode of hello Batch [account](#account):</span></span>

- <span data-ttu-id="6ce25-234">Système d’exploitation et version de nœud de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-234">Compute node operating system and version</span></span>
- <span data-ttu-id="6ce25-235">Type de nœud de calcul et nombre cible de nœuds</span><span class="sxs-lookup"><span data-stu-id="6ce25-235">Compute node type and target number of nodes</span></span>
- <span data-ttu-id="6ce25-236">Taille des nœuds de calcul hello</span><span class="sxs-lookup"><span data-stu-id="6ce25-236">Size of hello compute nodes</span></span>
- <span data-ttu-id="6ce25-237">Stratégie de mise à l’échelle</span><span class="sxs-lookup"><span data-stu-id="6ce25-237">Scaling policy</span></span>
- <span data-ttu-id="6ce25-238">Stratégie de planification des tâches</span><span class="sxs-lookup"><span data-stu-id="6ce25-238">Task scheduling policy</span></span>
- <span data-ttu-id="6ce25-239">État de communication des nœuds de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-239">Communication status for compute nodes</span></span>
- <span data-ttu-id="6ce25-240">Tâches de démarrage des nœuds de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-240">Start tasks for compute nodes</span></span>
- <span data-ttu-id="6ce25-241">packages d’application</span><span class="sxs-lookup"><span data-stu-id="6ce25-241">Application packages</span></span>
- <span data-ttu-id="6ce25-242">Configuration réseau</span><span class="sxs-lookup"><span data-stu-id="6ce25-242">Network configuration</span></span>

<span data-ttu-id="6ce25-243">Chacun de ces paramètres est décrite plus en détail dans les sections suivantes de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-243">Each of these settings is described in more detail in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6ce25-244">Comptes de lots créés avec le mode d’allocation de pool Service Batch hello ont un quota par défaut qui limite le nombre de hello de cœurs dans un compte de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-244">Batch accounts created with hello Batch Service pool allocation mode have a default quota that limits hello number of cores in a Batch account.</span></span> <span data-ttu-id="6ce25-245">nombre de Hello de cœurs correspond nombre toohello de nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-245">hello number of cores corresponds toohello number of compute nodes.</span></span> <span data-ttu-id="6ce25-246">Vous trouverez les quotas par défaut hello et obtenir des instructions sur la façon de trop[un quota de](batch-quota-limit.md#increase-a-quota) dans [Quotas et limites pour hello service Azure Batch](batch-quota-limit.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-246">You can find hello default quotas and instructions on how too[increase a quota](batch-quota-limit.md#increase-a-quota) in [Quotas and limits for hello Azure Batch service](batch-quota-limit.md).</span></span> <span data-ttu-id="6ce25-247">Si votre pool n’a pas obtenu son nombre cible de nœuds, quota de cœurs hello peut-être la raison de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-247">If your pool is not achieving its target number of nodes, hello core quota might be hello reason.</span></span>
>
><span data-ttu-id="6ce25-248">Comptes de lots créés avec le mode d’allocation de pool hello abonnement de l’utilisateur ne respectent pas les quotas de service de traitement par lots hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-248">Batch accounts created with hello User Subscription pool allocation mode do not observe hello Batch service quotas.</span></span> <span data-ttu-id="6ce25-249">Au lieu de cela, ils partagent Bonjour quota principal pour hello spécifié d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-249">Instead, they share in hello core quota for hello specified subscription.</span></span> <span data-ttu-id="6ce25-250">Pour en savoir plus, consultez le paragraphe [Limites de machines virtuelles](../azure-subscription-service-limits.md#virtual-machines-limits) de la section [Abonnement Azure et limites, quotas et contraintes de service](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-250">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

### <a name="compute-node-operating-system-and-version"></a><span data-ttu-id="6ce25-251">Système d’exploitation et version de nœud de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-251">Compute node operating system and version</span></span>

<span data-ttu-id="6ce25-252">Lorsque vous créez un pool de traitement par lots, vous pouvez spécifier la configuration de machine virtuelle Azure hello et de type hello de souhaité toorun sur chaque nœud de calcul dans le pool de hello de système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="6ce25-252">When you create a Batch pool, you can specify hello Azure virtual machine configuration and hello type of operating system you want toorun on each compute node in hello pool.</span></span> <span data-ttu-id="6ce25-253">Hello deux types de configurations disponibles dans le lot sont :</span><span class="sxs-lookup"><span data-stu-id="6ce25-253">hello two types of configurations available in Batch are:</span></span>

- <span data-ttu-id="6ce25-254">Hello **Configuration d’ordinateur virtuel**, qui spécifie ce pool hello est composée de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="6ce25-254">hello **Virtual Machine Configuration**, which specifies that hello pool is comprised of Azure virtual machines.</span></span> <span data-ttu-id="6ce25-255">Ces machines virtuelles peuvent être créées à partir d’images Linux ou Windows.</span><span class="sxs-lookup"><span data-stu-id="6ce25-255">These VMs may be created from either Linux or Windows images.</span></span> 

    <span data-ttu-id="6ce25-256">Lorsque vous créez un pool en fonction de hello Configuration d’ordinateur virtuel, vous devez spécifier non seulement hello de nœuds de hello et hello de hello images utilisées toocreate les, mais également hello **référence d’image de machine virtuelle** et hello Lot **agent du nœud référence (SKU)** toobe installé sur les nœuds hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-256">When you create a pool based on hello Virtual Machine Configuration, you must specify not only hello size of hello nodes and hello source of hello images used toocreate them, but also hello **virtual machine image reference** and hello Batch **node agent SKU** toobe installed on hello nodes.</span></span> <span data-ttu-id="6ce25-257">Pour plus d’informations sur la spécification des propriétés de pool, voir [Configurer des nœuds de calcul Linux dans des pools Azure Batch](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-257">For more information about specifying these pool properties, see [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md).</span></span>

- <span data-ttu-id="6ce25-258">Hello **Configuration des Services Cloud**, qui spécifie ce pool hello est composé de nœuds de Services de cloud computing Azure.</span><span class="sxs-lookup"><span data-stu-id="6ce25-258">hello **Cloud Services Configuration**, which specifies that hello pool is comprised of Azure Cloud Services nodes.</span></span> <span data-ttu-id="6ce25-259">Ce dernier fournit *uniquement* des nœuds de calcul Windows.</span><span class="sxs-lookup"><span data-stu-id="6ce25-259">Cloud Services provide Windows compute nodes *only*.</span></span>

    <span data-ttu-id="6ce25-260">Les systèmes d’exploitation disponibles pour les pools de Configuration des Services Cloud sont répertoriés dans hello [versions de système d’exploitation invité de Azure et matrice de compatibilité SDK](../cloud-services/cloud-services-guestos-update-matrix.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-260">Available operating systems for Cloud Services Configuration pools are listed in hello [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md).</span></span> <span data-ttu-id="6ce25-261">Lorsque vous créez un pool qui contient les nœuds des Services de cloud computing, vous avez besoin de taille du nœud toospecify hello et son *famille de système d’exploitation*.</span><span class="sxs-lookup"><span data-stu-id="6ce25-261">When you create a pool that contains Cloud Services nodes, you need toospecify hello node size and its *OS Family*.</span></span> <span data-ttu-id="6ce25-262">Services de cloud computing sont déployé tooAzure plus rapidement que les machines virtuelles exécutant Windows.</span><span class="sxs-lookup"><span data-stu-id="6ce25-262">Cloud Services are deployed tooAzure more quickly than virtual machines running Windows.</span></span> <span data-ttu-id="6ce25-263">Si vous souhaitez créer des nœuds de calcul Windows, vous pouvez constater que Cloud Services propose un délai de déploiement moins important.</span><span class="sxs-lookup"><span data-stu-id="6ce25-263">If you want pools of Windows compute nodes, you may find that Cloud Services provide a performance benefit in terms of deployment time.</span></span>

    * <span data-ttu-id="6ce25-264">Hello *famille de système d’exploitation* détermine également les versions de .NET sont installées avec hello du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="6ce25-264">hello *OS Family* also determines which versions of .NET are installed with hello OS.</span></span>
    * <span data-ttu-id="6ce25-265">Comme avec les rôles de travail dans les Services de cloud computing, vous pouvez spécifier une *Version du système d’exploitation* (pour plus d’informations sur les rôles de travail, consultez hello [en savoir plus sur les services de cloud computing](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section Bonjour [Services de cloud computing vue d’ensemble](../cloud-services/cloud-services-choose-me.md)).</span><span class="sxs-lookup"><span data-stu-id="6ce25-265">As with worker roles within Cloud Services, you can specify an *OS Version* (for more information on worker roles, see hello [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section in hello [Cloud Services overview](../cloud-services/cloud-services-choose-me.md)).</span></span>
    * <span data-ttu-id="6ce25-266">Comme avec les rôles de travail, nous vous recommandons de spécifier `*` pour hello *Version du système d’exploitation* afin que les nœuds hello sont mis à niveau automatiquement, et il n’existe aucun toocater travail requis toonewly publié versions.</span><span class="sxs-lookup"><span data-stu-id="6ce25-266">As with worker roles, we recommend that you specify `*` for hello *OS Version* so that hello nodes are automatically upgraded, and there is no work required toocater toonewly released versions.</span></span> <span data-ttu-id="6ce25-267">Hello est principalement utilisé pour la sélection d’une version du système d’exploitation spécifique tooensure compatibilité des applications, ce qui permet la compatibilité descendante toobe test effectué avant d’autoriser hello version toobe est mis à jour.</span><span class="sxs-lookup"><span data-stu-id="6ce25-267">hello primary use case for selecting a specific OS version is tooensure application compatibility, which allows backward compatibility testing toobe performed before allowing hello version toobe updated.</span></span> <span data-ttu-id="6ce25-268">Après la validation, hello *Version du système d’exploitation* pour le pool de hello peut être mis à jour et la nouvelle image de système d’exploitation hello peut être installé--toutes les tâches en cours d’exécution sont interrompus et remis.</span><span class="sxs-lookup"><span data-stu-id="6ce25-268">After validation, hello *OS Version* for hello pool can be updated and hello new OS image can be installed--any running tasks are interrupted and requeued.</span></span>

<span data-ttu-id="6ce25-269">Lorsque vous créez un pool, vous devez tooselect hello approprié **nodeAgentSkuId**, en fonction de hello du système d’exploitation de l’image de base hello de votre disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="6ce25-269">When you create a pool, you need tooselect hello appropriate **nodeAgentSkuId**, depending on hello OS of hello base image of your VHD.</span></span> <span data-ttu-id="6ce25-270">Vous pouvez obtenir un mappage de nœud disponible agent ID de référence (SKU) tootheir les références d’Image de système d’exploitation en appelant hello [références de l’Agent de nœud pris en charge liste](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) opération.</span><span class="sxs-lookup"><span data-stu-id="6ce25-270">You can get a mapping of available node agent SKU ID's tootheir OS Image references by calling hello [List Supported Node Agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operation.</span></span>

<span data-ttu-id="6ce25-271">Consultez hello [compte](#account) section pour plus d’informations sur la configuration de mode d’allocation de pool hello lorsque vous créez un compte Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-271">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

#### <a name="custom-images-for-virtual-machine-pools"></a><span data-ttu-id="6ce25-272">Images personnalisées pour les pools de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="6ce25-272">Custom images for Virtual Machine pools</span></span>

<span data-ttu-id="6ce25-273">toouse un pools de Machine virtuelle tooprovision image personnalisée, créer votre compte Batch avec mode d’allocation de pool hello abonnement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6ce25-273">toouse a custom image tooprovision Virtual Machine pools, create your Batch account with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="6ce25-274">Avec ce mode, les pools de lot sont allouées en abonnement hello dans laquelle réside hello compte.</span><span class="sxs-lookup"><span data-stu-id="6ce25-274">With this mode, Batch pools are allocated into hello subscription where hello account resides.</span></span> <span data-ttu-id="6ce25-275">Consultez hello [compte](#account) section pour plus d’informations sur la configuration de mode d’allocation de pool hello lorsque vous créez un compte Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-275">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

<span data-ttu-id="6ce25-276">toouse une image personnalisée, vous devez image de hello tooprepare en la généralisant.</span><span class="sxs-lookup"><span data-stu-id="6ce25-276">toouse a custom image, you'll need tooprepare hello image by generalizing it.</span></span> <span data-ttu-id="6ce25-277">Pour plus d’informations sur la préparation d’images Linux personnalisées à partir de machines virtuelles Azure, consultez [capturer un toouse de machine virtuelle de Azure Linux en tant que modèle](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-277">For information about preparing custom Linux images from Azure VMs, see [Capture an Azure Linux VM toouse as a template](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="6ce25-278">Pour plus d’informations sur la préparation d’images Windows personnalisées à partir de machines virtuelles Azure, consultez la section [Créer une image personnalisée d’une machine virtuelle Azure à l’aide de PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-278">For information about preparing custom Windows images from Azure VMs, see [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="6ce25-279">Lorsque vous préparez votre image personnalisée, gardez suivante de hello l’esprit :</span><span class="sxs-lookup"><span data-stu-id="6ce25-279">When preparing your custom image, keep in mind hello following:</span></span>
> - <span data-ttu-id="6ce25-280">Vérifiez cette image de système d’exploitation à base de hello, vous utilisez tooprovision vos pools de lot est n’a pas un préalable installé des extensions Azure, comme extension de Script personnalisé hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-280">Ensure that hello base OS image you use tooprovision your Batch pools does not have any pre-installed Azure extensions, such as hello Custom Script extension.</span></span> <span data-ttu-id="6ce25-281">Si l’image de hello contient une extension préinstallée, Azure peut rencontrer des problèmes de la déployer hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-281">If hello image contains a pre-installed extension, Azure may encounter problems deploying hello VM.</span></span>
> - <span data-ttu-id="6ce25-282">Assurez-vous que cette image du système d’exploitation de base de hello que vous fournir utilise hello lecteur temp de la valeur par défaut, comme hello agent de nœud de lot actuellement attend lecteur temp de hello par défaut.</span><span class="sxs-lookup"><span data-stu-id="6ce25-282">Ensure that hello base OS image you provide uses hello default temp drive, as hello Batch node agent currently expects hello default temp drive.</span></span>
>
>

<span data-ttu-id="6ce25-283">toocreate un pool de Configuration d’ordinateur virtuel à l’aide d’une image personnalisée, vous aurez besoin d’un ou de vos images de disque dur virtuel personnalisés toostore des comptes de stockage de Azure plus standard.</span><span class="sxs-lookup"><span data-stu-id="6ce25-283">toocreate a Virtual Machine Configuration pool using a custom image, you'll need one or more standard Azure Storage accounts toostore your custom VHD images.</span></span> <span data-ttu-id="6ce25-284">Les images personnalisées sont stockées en tant que blobs.</span><span class="sxs-lookup"><span data-stu-id="6ce25-284">Custom images are stored as blobs.</span></span> <span data-ttu-id="6ce25-285">tooreference vos images lorsque vous créez un pool, spécifiez hello URI d’objets BLOB de disque dur virtuel d’image personnalisée hello pour hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) propriété Hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) propriété.</span><span class="sxs-lookup"><span data-stu-id="6ce25-285">tooreference your custom images when you create a pool, specify hello URIs of hello custom image VHD blobs for hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) property of hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) property.</span></span>

<span data-ttu-id="6ce25-286">Assurez-vous que vos comptes de stockage répondent à hello suivant des critères :</span><span class="sxs-lookup"><span data-stu-id="6ce25-286">Make sure that your storage accounts meet hello following criteria:</span></span>   

- <span data-ttu-id="6ce25-287">les comptes de stockage Hello BLOB de disque dur virtuel contenant hello image personnalisée doivent toobe dans hello même abonnement que hello du compte Batch (abonnement d’utilisateur hello).</span><span class="sxs-lookup"><span data-stu-id="6ce25-287">hello storage accounts containing hello custom image VHD blobs need toobe in hello same subscription as hello Batch account (hello user subscription).</span></span>
- <span data-ttu-id="6ce25-288">Hello spécifié de comptes de stockage doivent toobe Bonjour même région que hello compte Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-288">hello specified storage accounts need toobe in hello same region as hello Batch account.</span></span>
- <span data-ttu-id="6ce25-289">Actuellement, seuls les comptes de stockage standards sont pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6ce25-289">Only standard general-purpose storage accounts are currently supported.</span></span> <span data-ttu-id="6ce25-290">Stockage Azure Premium prendra en charge Bonjour futures.</span><span class="sxs-lookup"><span data-stu-id="6ce25-290">Azure Premium storage will be supported in hello future.</span></span>
- <span data-ttu-id="6ce25-291">Vous pouvez spécifier un compte de stockage avec plusieurs blobs VHD personnalisés, ou plusieurs comptes de stockage incluant un seul blob.</span><span class="sxs-lookup"><span data-stu-id="6ce25-291">You can specify one storage account with multiple custom VHD blobs or multiple storage accounts each having a single blob.</span></span> <span data-ttu-id="6ce25-292">Nous vous recommandons toouse stockage plusieurs comptes tooget de meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="6ce25-292">We recommend you toouse multiple storage accounts tooget a better performance.</span></span>
- <span data-ttu-id="6ce25-293">Un objet blob de disque dur virtuel image personnalisée unique peut prendre en charge les too40 que Linux VM instances ou 20 instances de machine virtuelle Windows.</span><span class="sxs-lookup"><span data-stu-id="6ce25-293">One unique custom image VHD blob can support up too40 Linux VM instances or 20 Windows VM instances.</span></span> <span data-ttu-id="6ce25-294">Vous devez les copies de toocreate des pools de toocreate de blob de disque dur virtuel hello avec davantage d’ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="6ce25-294">You will need toocreate copies of hello VHD blob toocreate pools with more VMs.</span></span> <span data-ttu-id="6ce25-295">Par exemple, un pool avec les machines virtuelles Windows 200 nécessite 10 objets BLOB VHD unique spécifié pour hello **osDisk** propriété.</span><span class="sxs-lookup"><span data-stu-id="6ce25-295">For example, a pool with 200 Windows VMs needs 10 unique VHD blobs specified for hello **osDisk** property.</span></span>

<span data-ttu-id="6ce25-296">toocreate un regroupement à partir d’une image personnalisée à l’aide de hello portail Azure :</span><span class="sxs-lookup"><span data-stu-id="6ce25-296">toocreate a pool from a custom image using hello Azure portal:</span></span>

1. <span data-ttu-id="6ce25-297">Accédez à tooyour du compte Batch Bonjour portail Azure.</span><span class="sxs-lookup"><span data-stu-id="6ce25-297">Navigate tooyour Batch account in hello Azure portal.</span></span>
2. <span data-ttu-id="6ce25-298">Sur hello **paramètres** panneau, sélectionnez hello **Pools** élément de menu.</span><span class="sxs-lookup"><span data-stu-id="6ce25-298">On hello **Settings** blade, select hello **Pools** menu item.</span></span>
3. <span data-ttu-id="6ce25-299">Sur hello **Pools** panneau, sélectionnez hello **ajouter** commande ; hello **ajouter un pool** panneau s’affiche.</span><span class="sxs-lookup"><span data-stu-id="6ce25-299">On hello **Pools** blade, select hello **Add** command; hello **Add pool** blade will be displayed.</span></span>
4. <span data-ttu-id="6ce25-300">Sélectionnez **l’Image personnalisée (Linux/Windows)** de hello **le Type d’Image** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="6ce25-300">Select **Custom Image (Linux/Windows)** from hello **Image Type** dropdown.</span></span> <span data-ttu-id="6ce25-301">portail de Hello affiche hello **Image personnalisée** sélecteur.</span><span class="sxs-lookup"><span data-stu-id="6ce25-301">hello portal displays hello **Custom Image** picker.</span></span> <span data-ttu-id="6ce25-302">Choisissez un ou plusieurs disques durs virtuels hello même hello de conteneur et cliquez sur **sélectionnez** bouton.</span><span class="sxs-lookup"><span data-stu-id="6ce25-302">Choose one or more VHDs from hello same container and click hello **Select** button.</span></span> 
    <span data-ttu-id="6ce25-303">Prise en charge de plusieurs disques durs virtuels à partir de différents comptes de stockage et de différents conteneurs sera ajoutée dans hello futures.</span><span class="sxs-lookup"><span data-stu-id="6ce25-303">Support for multiple VHDs from different storage accounts and different containers will be added in hello future.</span></span>
5. <span data-ttu-id="6ce25-304">Sélectionnez hello correct **Publisher offre/référence (SKU)** pour vos disques durs virtuels personnalisés, sélectionnez hello souhaité **mise en cache** mode, puis renseignez tous hello autres paramètres pour le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-304">Select hello correct **Publisher/Offer/Sku** for your custom VHDs, select hello desired **Caching** mode, then fill in all hello other parameters for hello pool.</span></span>
6. <span data-ttu-id="6ce25-305">toocheck si un pool est basé sur une image personnalisée, consultez hello **système d’exploitation** propriété dans la section Résumé de ressource hello Hello **Pool** panneau.</span><span class="sxs-lookup"><span data-stu-id="6ce25-305">toocheck if a pool is based on a custom image, see hello **Operating System** property in hello resource summary section of hello **Pool** blade.</span></span> <span data-ttu-id="6ce25-306">Hello la valeur de cette propriété doit être **image d’ordinateur virtuel personnalisé**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-306">hello value of this property should be **Custom VM image**.</span></span>
7. <span data-ttu-id="6ce25-307">Tous les disques durs virtuels personnalisés associés à un pool sont affichés sur du pool hello **propriétés** panneau.</span><span class="sxs-lookup"><span data-stu-id="6ce25-307">All custom VHDs associated with a pool are displayed on hello pool's **Properties** blade.</span></span>

### <a name="compute-node-type-and-target-number-of-nodes"></a><span data-ttu-id="6ce25-308">Type de nœud de calcul et nombre cible de nœuds</span><span class="sxs-lookup"><span data-stu-id="6ce25-308">Compute node type and target number of nodes</span></span>

<span data-ttu-id="6ce25-309">Lorsque vous créez un pool, vous pouvez spécifier les types de nœuds de calcul et de hello nombre cible pour chacun.</span><span class="sxs-lookup"><span data-stu-id="6ce25-309">When you create a pool, you can specify which types of compute nodes you want and hello target number for each.</span></span> <span data-ttu-id="6ce25-310">Hello deux des types de nœuds de calcul sont :</span><span class="sxs-lookup"><span data-stu-id="6ce25-310">hello two types of compute nodes are:</span></span>

- <span data-ttu-id="6ce25-311">**Nœuds de calcul dédiés.**</span><span class="sxs-lookup"><span data-stu-id="6ce25-311">**Dedicated compute nodes.**</span></span> <span data-ttu-id="6ce25-312">Les nœuds de calcul dédiés sont réservés à vos charges de travail.</span><span class="sxs-lookup"><span data-stu-id="6ce25-312">Dedicated compute nodes are reserved for your workloads.</span></span> <span data-ttu-id="6ce25-313">Ils sont plus coûteuses que les nœuds de faible priorité, mais il est garanti toonever être interrompu.</span><span class="sxs-lookup"><span data-stu-id="6ce25-313">They are more expensive than low-priority nodes, but they are guaranteed toonever be preempted.</span></span>

- <span data-ttu-id="6ce25-314">**Nœuds de calcul à faible priorité.**</span><span class="sxs-lookup"><span data-stu-id="6ce25-314">**Low-priority compute nodes.**</span></span> <span data-ttu-id="6ce25-315">Nœuds de faible priorité tirer parti d’une capacité excédentaire dans Azure toorun vos charges de travail de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-315">Low-priority nodes take advantage of surplus capacity in Azure toorun your Batch workloads.</span></span> <span data-ttu-id="6ce25-316">Le coût horaire des nœuds à faible priorité est moins élevé que celui des nœuds dédiés. Par ailleurs, ces nœuds activent des charges de travail nécessitant une importante puissance de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-316">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="6ce25-317">Pour plus d’informations, consultez [Utiliser des machines virtuelles à faible priorité avec Batch](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-317">For more information, see [Use low-priority VMs with Batch](batch-low-pri-vms.md).</span></span>

    <span data-ttu-id="6ce25-318">Les nœuds de calcul à faible priorité peuvent être reportés lorsque Azure n’a pas suffisamment de capacité excédentaire.</span><span class="sxs-lookup"><span data-stu-id="6ce25-318">Low-priority compute nodes may be preempted when Azure has insufficient surplus capacity.</span></span> <span data-ttu-id="6ce25-319">Si un nœud est interrompu lors de l’exécution des tâches, les tâches de hello sont remis et exécutez à nouveau une fois qu’un nœud de calcul est à nouveau disponible.</span><span class="sxs-lookup"><span data-stu-id="6ce25-319">If a node is preempted while running tasks, hello tasks are requeued and run again once a compute node becomes available again.</span></span> <span data-ttu-id="6ce25-320">Les nœuds de faible priorité sont une bonne option pour les charges de travail où heure d’achèvement de tâche de hello est flexible et charge de travail hello est répartie sur plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-320">Low-priority nodes are a good option for workloads where hello job completion time is flexible and hello work is distributed across many nodes.</span></span> <span data-ttu-id="6ce25-321">Avant de décider des nœuds de faible priorité toouse pour votre scénario, assurez-vous que tout travail perdu en raison toopreemption sera toorecreate minimal et simple.</span><span class="sxs-lookup"><span data-stu-id="6ce25-321">Before you decide toouse low-priority nodes for your scenario, make sure that any work lost due toopreemption will be minimal and easy toorecreate.</span></span>

    <span data-ttu-id="6ce25-322">Nœuds de calcul de priorité faible sont disponibles uniquement pour les comptes de traitement par lots créés avec le mode d’allocation de pool hello défini trop**Service Batch**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-322">Low-priority compute nodes are available only for Batch accounts created with hello pool allocation mode set too**Batch Service**.</span></span>

<span data-ttu-id="6ce25-323">Vous pouvez avoir deux nœuds de calcul dédié et de priorité basse dans hello même pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-323">You can have both low-priority and dedicated compute nodes in hello same pool.</span></span> <span data-ttu-id="6ce25-324">Chaque type de nœud &mdash; dédié et de faible priorité &mdash; a son propre paramètre de cible pour lequel vous pouvez spécifier le nombre souhaité de hello de nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-324">Each type of node &mdash; low-priority and dedicated &mdash; has its own target setting, for which you can specify hello desired number of nodes.</span></span> 
    
<span data-ttu-id="6ce25-325">nombre de nœuds de calcul Hello est tooas auxquels un *cible* car dans certaines situations, votre pool ne peut pas atteindre nombre hello souhaité de nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-325">hello number of compute nodes is referred tooas a *target* because, in some situations, your pool might not reach hello desired number of nodes.</span></span> <span data-ttu-id="6ce25-326">Par exemple, un pool risque de ne pas atteindre cible de hello pour s’il atteint hello [quota de cœurs](batch-quota-limit.md) compte tout d’abord de votre lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-326">For example, a pool might not achieve hello target if it reaches hello [core quota](batch-quota-limit.md) for your Batch account first.</span></span> <span data-ttu-id="6ce25-327">Ou, dans le pool de hello ne peut pas atteindre cible de hello si vous avez appliqué une montée en puissance automatique pool toohello formule qui limite le nombre maximal de hello de nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-327">Or, hello pool might not achieve hello target if you have applied an auto-scaling formula toohello pool that limits hello maximum number of nodes.</span></span>

<span data-ttu-id="6ce25-328">Pour obtenir les informations de tarification des nœuds de calcul dédiés et à faible priorité, consultez [Tarification du service Batch](https://azure.microsoft.com/pricing/details/batch/).</span><span class="sxs-lookup"><span data-stu-id="6ce25-328">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/).</span></span>

### <a name="size-of-hello-compute-nodes"></a><span data-ttu-id="6ce25-329">Taille des nœuds de calcul hello</span><span class="sxs-lookup"><span data-stu-id="6ce25-329">Size of hello compute nodes</span></span>

<span data-ttu-id="6ce25-330">**Configuration de Cloud Services** sont répertoriées dans [Tailles de services cloud](../cloud-services/cloud-services-sizes-specs.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-330">**Cloud Services Configuration** compute node sizes are listed in [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span></span> <span data-ttu-id="6ce25-331">Le service Batch prend en charge l’ensemble des tailles de services cloud, à l’exception de `ExtraSmall`, `STANDARD_A1_V2` et `STANDARD_A2_V2`.</span><span class="sxs-lookup"><span data-stu-id="6ce25-331">Batch supports all Cloud Services sizes except `ExtraSmall`, `STANDARD_A1_V2`, and `STANDARD_A2_V2`.</span></span>

<span data-ttu-id="6ce25-332">Les tailles de nœud de calcul de la **configuration de machines virtuelles** sont répertoriées dans [Tailles des machines virtuelles dans Azure](../virtual-machines/linux/sizes.md) (Linux) et [Tailles des machines virtuelles dans Azure](../virtual-machines/windows/sizes.md) (Windows).</span><span class="sxs-lookup"><span data-stu-id="6ce25-332">**Virtual Machine Configuration** compute node sizes are listed in [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Linux) and [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Windows).</span></span> <span data-ttu-id="6ce25-333">Le service Batch prend en charge l’ensemble des tailles de machine virtuelle Azure, à l’exception de `STANDARD_A0` et de celles comprises dans Premium Storage (série `STANDARD_GS`, `STANDARD_DS`, et `STANDARD_DSV2`).</span><span class="sxs-lookup"><span data-stu-id="6ce25-333">Batch supports all Azure VM sizes except `STANDARD_A0` and those with premium storage (`STANDARD_GS`, `STANDARD_DS`, and `STANDARD_DSV2` series).</span></span>

<span data-ttu-id="6ce25-334">Lorsque vous sélectionnez une taille de nœud de calcul, considérez les caractéristiques de hello et exigences des applications hello que vous allez exécuter sur les nœuds hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-334">When selecting a compute node size, consider hello characteristics and requirements of hello applications you'll run on hello nodes.</span></span> <span data-ttu-id="6ce25-335">Aspects comme si l’application hello est multithread et de la quantité de mémoire qu’elle consomme peut aider à déterminent la taille de l’hello plus économique et plus approprié du nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-335">Aspects like whether hello application is multithreaded and how much memory it consumes can help determine hello most suitable and cost-effective node size.</span></span> <span data-ttu-id="6ce25-336">Il est classique tooselect une taille de nœud en supposant qu’une seule tâche s’exécutera sur un nœud à la fois.</span><span class="sxs-lookup"><span data-stu-id="6ce25-336">It's typical tooselect a node size assuming one task will run on a node at a time.</span></span> <span data-ttu-id="6ce25-337">Toutefois, il est possible de toohave plusieurs tâches (et par conséquent, plusieurs instances d’application) [s’exécuter en parallèle](batch-parallel-node-tasks.md) sur les nœuds de calcul lors de l’exécution du travail.</span><span class="sxs-lookup"><span data-stu-id="6ce25-337">However, it is possible toohave multiple tasks (and therefore multiple application instances) [run in parallel](batch-parallel-node-tasks.md) on compute nodes during job execution.</span></span> <span data-ttu-id="6ce25-338">Dans ce cas, il est commun toochoose une plus grande nœud taille tooaccommodate hello augmenté à la demande d’exécution des tâches parallèles.</span><span class="sxs-lookup"><span data-stu-id="6ce25-338">In this case, it is common toochoose a larger node size tooaccommodate hello increased demand of parallel task execution.</span></span> <span data-ttu-id="6ce25-339">Pour plus d’informations, consultez la section [Stratégie de planification de tâches](#task-scheduling-policy).</span><span class="sxs-lookup"><span data-stu-id="6ce25-339">See [Task scheduling policy](#task-scheduling-policy) for more information.</span></span>

<span data-ttu-id="6ce25-340">Tous les nœuds hello dans un pool sont hello même taille.</span><span class="sxs-lookup"><span data-stu-id="6ce25-340">All of hello nodes in a pool are hello same size.</span></span> <span data-ttu-id="6ce25-341">Si vous envisagez d’applications toorun ayant des spécifications différentes système et/ou des niveaux de charge, nous vous recommandons d’utiliser des pools séparés.</span><span class="sxs-lookup"><span data-stu-id="6ce25-341">If you intend toorun applications with differing system requirements and/or load levels, we recommend that you use separate pools.</span></span>

### <a name="scaling-policy"></a><span data-ttu-id="6ce25-342">Stratégie de mise à l’échelle</span><span class="sxs-lookup"><span data-stu-id="6ce25-342">Scaling policy</span></span>

<span data-ttu-id="6ce25-343">Pour les charges de travail dynamiques, vous pouvez écrire et appliquer un [formule de mise à l’échelle](#scaling-compute-resources) tooa pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-343">For dynamic workloads, you can write and apply an [auto-scaling formula](#scaling-compute-resources) tooa pool.</span></span> <span data-ttu-id="6ce25-344">Hello service Batch évalue votre formule régulièrement et ajuste le nombre de hello de nœuds dans le pool de hello en fonction des différents pool de travail et les paramètres de tâche que vous pouvez spécifier.</span><span class="sxs-lookup"><span data-stu-id="6ce25-344">hello Batch service periodically evaluates your formula and adjusts hello number of nodes within hello pool based on various pool, job, and task parameters that you can specify.</span></span>

### <a name="task-scheduling-policy"></a><span data-ttu-id="6ce25-345">Stratégie de planification des tâches</span><span class="sxs-lookup"><span data-stu-id="6ce25-345">Task scheduling policy</span></span>

<span data-ttu-id="6ce25-346">Hello [nombre maximum de tâches par nœud](batch-parallel-node-tasks.md) option de configuration détermine le nombre maximal de hello de tâches qui peuvent être exécutés en parallèle sur chaque nœud de calcul dans le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-346">hello [max tasks per node](batch-parallel-node-tasks.md) configuration option determines hello maximum number of tasks that can be run in parallel on each compute node within hello pool.</span></span>

<span data-ttu-id="6ce25-347">configuration par défaut de Hello Spécifie qu’une tâche à la fois s’exécute sur un nœud, mais il existe des scénarios où il est bénéfique toohave deux ou plusieurs tâches exécutées simultanément sur un nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-347">hello default configuration specifies that one task at a time runs on a node, but there are scenarios where it is beneficial toohave two or more tasks executed on a node simultaneously.</span></span> <span data-ttu-id="6ce25-348">Consultez hello [exemple de scénario](batch-parallel-node-tasks.md#example-scenario) Bonjour [les tâches simultanées nœud](batch-parallel-node-tasks.md) toosee article comment vous pouvez bénéficier de plusieurs tâches par nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-348">See hello [example scenario](batch-parallel-node-tasks.md#example-scenario) in hello [concurrent node tasks](batch-parallel-node-tasks.md) article toosee how you can benefit from multiple tasks per node.</span></span>

<span data-ttu-id="6ce25-349">Vous pouvez également spécifier un *type de remplissage* qui détermine si lot répartit les tâches de hello uniformément entre tous les nœuds dans un pool ou packs de chaque nœud avec un nombre maximal de tâches hello avant de lui assigner nœud tooanother de tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-349">You can also specify a *fill type* which determines whether Batch spreads hello tasks evenly across all nodes in a pool, or packs each node with hello maximum number of tasks before assigning tasks tooanother node.</span></span>

### <a name="communication-status-for-compute-nodes"></a><span data-ttu-id="6ce25-350">État de communication des nœuds de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-350">Communication status for compute nodes</span></span>

<span data-ttu-id="6ce25-351">Dans la plupart des scénarios, les tâches fonctionnent indépendamment et n’avez pas besoin de toocommunicate avec l’autre.</span><span class="sxs-lookup"><span data-stu-id="6ce25-351">In most scenarios, tasks operate independently and do not need toocommunicate with one another.</span></span> <span data-ttu-id="6ce25-352">Cependant, il existe des applications dans lesquelles les tâches doivent communiquer, par exemple les [scénarios impliquant des applications MPI](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-352">However, there are some applications in which tasks must communicate, like [MPI scenarios](batch-mpi.md).</span></span>

<span data-ttu-id="6ce25-353">Vous pouvez configurer un pool tooallow **communication entre les nœuds**, de sorte que les nœuds au sein d’un pool peuvent communiquer lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-353">You can configure a pool tooallow **internode communication**, so that nodes within a pool can communicate at runtime.</span></span> <span data-ttu-id="6ce25-354">Lorsque la communication entre les nœuds est activée, les nœuds des pools Configuration de Cloud Services peuvent communiquer entre eux sur les ports supérieurs à 1100, et les pools Configuration de la machine virtuelle ne limitent pas le trafic sur les ports.</span><span class="sxs-lookup"><span data-stu-id="6ce25-354">When internode communication is enabled, nodes in Cloud Services Configuration pools can communicate with each other on ports greater than 1100, and Virtual Machine Configuration pools do not restrict traffic on any port.</span></span>

<span data-ttu-id="6ce25-355">Notez que l’activation de communication entre les nœuds également a un impact sur la sélection élective hello de nœuds hello au sein des clusters et peut limiter le nombre maximal de hello de nœuds dans un pool en raison des restrictions de déploiement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-355">Note that enabling internode communication also impacts hello placement of hello nodes within clusters and might limit hello maximum number of nodes in a pool because of deployment restrictions.</span></span> <span data-ttu-id="6ce25-356">Si votre application ne requiert pas de communication entre les nœuds, hello service Batch peut allouer un nombre potentiellement important de nœuds toohello pool à partir de nombreux différents clusters et tooenable de centres de données a augmenté de puissance de traitement parallèle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-356">If your application does not require communication between nodes, hello Batch service can allocate a potentially large number of nodes toohello pool from many different clusters and datacenters tooenable increased parallel processing power.</span></span>

### <a name="start-tasks-for-compute-nodes"></a><span data-ttu-id="6ce25-357">Tâches de démarrage des nœuds de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-357">Start tasks for compute nodes</span></span>

<span data-ttu-id="6ce25-358">Hello facultatif *démarrer la tâche* s’exécute sur chaque nœud de ce nœud rejoint le pool de hello, chaque fois qu’un nœud est redémarré ou réinitialisé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-358">hello optional *start task* executes on each node as that node joins hello pool, and each time a node is restarted or reimaged.</span></span> <span data-ttu-id="6ce25-359">tâche de démarrage Hello est particulièrement utile pour la préparation des nœuds de calcul pour une exécution de tâches, telles que l’installation d’applications de hello vos tâches s’exécutent sur les nœuds de calcul hello hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-359">hello start task is especially useful for preparing compute nodes for hello execution of tasks, like installing hello applications that your tasks run on hello compute nodes.</span></span>

### <a name="application-packages"></a><span data-ttu-id="6ce25-360">packages d’application</span><span class="sxs-lookup"><span data-stu-id="6ce25-360">Application packages</span></span>

<span data-ttu-id="6ce25-361">Vous pouvez spécifier [les packages d’applications](#application-packages) toodeploy toohello nœuds de calcul dans le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-361">You can specify [application packages](#application-packages) toodeploy toohello compute nodes in hello pool.</span></span> <span data-ttu-id="6ce25-362">Les packages d’applications fournissent simplifié le déploiement et la gestion des versions des applications hello qui exécutent des tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-362">Application packages provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="6ce25-363">Les packages d’applications que vous spécifiez pour un pool sont installés sur chaque nœud qui rejoint le pool, et à chaque fois qu’un nœud est redémarré ou réinitialisé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-363">Application packages that you specify for a pool are installed on every node that joins that pool, and every time a node is rebooted or reimaged.</span></span>

> [!NOTE]
> <span data-ttu-id="6ce25-364">Les packages d’applications sont pris en charge sur tous les pools Batch créés après le 5 juillet 2017.</span><span class="sxs-lookup"><span data-stu-id="6ce25-364">Application packages are supported on all Batch pools created after 5 July 2017.</span></span> <span data-ttu-id="6ce25-365">Elles sont prises en charge sur les pools de traitement par lots créés entre 10 mars 2016 et 5 juillet 2017 uniquement si le pool de hello a été créé à l’aide d’une configuration de Service Cloud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-365">They are supported on Batch pools created between 10 March 2016 and 5 July 2017 only if hello pool was created using a Cloud Service configuration.</span></span> <span data-ttu-id="6ce25-366">Les pools de lot créés too10 préalable mars 2016 ne gèrent pas les packages d’applications.</span><span class="sxs-lookup"><span data-stu-id="6ce25-366">Batch pools created prior too10 March 2016 do not support application packages.</span></span> <span data-ttu-id="6ce25-367">Pour plus d’informations sur l’application à l’aide de packages toodeploy vos nœuds de traitement par lots tooyour applications, consultez [déployer des nœuds de toocompute d’applications avec des packages d’application de lot](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-367">For more information about using application packages toodeploy your applications tooyour Batch nodes, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
>
>

### <a name="network-configuration"></a><span data-ttu-id="6ce25-368">Configuration réseau</span><span class="sxs-lookup"><span data-stu-id="6ce25-368">Network configuration</span></span>

<span data-ttu-id="6ce25-369">Vous pouvez spécifier le sous-réseau Azure hello [réseau virtuel (VNet)](../virtual-network/virtual-networks-overview.md) dans le calcul de quel pool hello nœuds doivent être créés.</span><span class="sxs-lookup"><span data-stu-id="6ce25-369">You can specify hello subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md) in which hello pool's compute nodes should be created.</span></span> <span data-ttu-id="6ce25-370">Consultez hello [configuration réseau du Pool](#pool-network-configuration) section pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="6ce25-370">See hello [Pool network configuration](#pool-network-configuration) section for more information.</span></span>


## <a name="job"></a><span data-ttu-id="6ce25-371">Travail</span><span class="sxs-lookup"><span data-stu-id="6ce25-371">Job</span></span>
<span data-ttu-id="6ce25-372">Un travail est une collection de tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-372">A job is a collection of tasks.</span></span> <span data-ttu-id="6ce25-373">Il gère la façon dont le calcul est effectué par ses tâches sur des nœuds de calcul hello dans un pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-373">It manages how computation is performed by its tasks on hello compute nodes in a pool.</span></span>

* <span data-ttu-id="6ce25-374">travail de Hello spécifie hello **pool** dans quels hello est toobe exécuter.</span><span class="sxs-lookup"><span data-stu-id="6ce25-374">hello job specifies hello **pool** in which hello work is toobe run.</span></span> <span data-ttu-id="6ce25-375">Vous pouvez créer un nouveau pool pour chaque tâche, ou utiliser un pool pour plusieurs travaux.</span><span class="sxs-lookup"><span data-stu-id="6ce25-375">You can create a new pool for each job, or use one pool for many jobs.</span></span> <span data-ttu-id="6ce25-376">Vous pouvez créer un pool pour chaque travail associé à une planification de travail, ou pour tous les travaux associés à une planification de travail.</span><span class="sxs-lookup"><span data-stu-id="6ce25-376">You can create a pool for each job that is associated with a job schedule, or for all jobs that are associated with a job schedule.</span></span>
* <span data-ttu-id="6ce25-377">Une **priorité de travail**facultative peut être spécifiée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-377">You can specify an optional **job priority**.</span></span> <span data-ttu-id="6ce25-378">Lorsqu’un travail est envoyé avec une priorité plus élevée que les travaux qui sont actuellement en cours d’exécution, tâches hello pour le travail de priorité plus élevée hello sont insérées dans la file d’attente hello avant les tâches pour les travaux de faible priorité hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-378">When a job is submitted with a higher priority than jobs that are currently in progress, hello tasks for hello higher-priority job are inserted into hello queue ahead of tasks for hello lower-priority jobs.</span></span> <span data-ttu-id="6ce25-379">Les tâches des travaux de priorité inférieure qui sont déjà en cours d’exécution ne sont pas reportées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-379">Tasks in lower-priority jobs that are already running are not preempted.</span></span>
* <span data-ttu-id="6ce25-380">Vous pouvez utiliser la tâche **contraintes** toospecify certaines limites pour vos travaux :</span><span class="sxs-lookup"><span data-stu-id="6ce25-380">You can use job **constraints** toospecify certain limits for your jobs:</span></span>

    <span data-ttu-id="6ce25-381">Vous pouvez définir un **wallclock maximale temps**, de sorte que si une tâche s’exécute pendant plus de temps maximale wallclock hello qui est spécifié, le travail de hello et toutes ses tâches sont terminées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-381">You can set a **maximum wallclock time**, so that if a job runs for longer than hello maximum wallclock time that is specified, hello job and all of its tasks are terminated.</span></span>

    <span data-ttu-id="6ce25-382">Le service Batch peut détecter, puis relancer des tâches ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="6ce25-382">Batch can detect and then retry failed tasks.</span></span> <span data-ttu-id="6ce25-383">Vous pouvez spécifier hello **nombre maximal de tentatives de tâche** en tant que contrainte, y compris si une tâche est *toujours* ou *jamais* retentée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-383">You can specify hello **maximum number of task retries** as a constraint, including whether a task is *always* or *never* retried.</span></span> <span data-ttu-id="6ce25-384">Reprise d’une tâche signifie que cette tâche hello est remis toobe, exécutez à nouveau.</span><span class="sxs-lookup"><span data-stu-id="6ce25-384">Retrying a task means that hello task is requeued toobe run again.</span></span>
* <span data-ttu-id="6ce25-385">Votre application cliente peut ajouter le travail de tooa de tâches, ou vous pouvez spécifier un [tâche du gestionnaire](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="6ce25-385">Your client application can add tasks tooa job, or you can specify a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="6ce25-386">Une tâche du Gestionnaire contient des informations hello toocreate nécessaire des tâches de hello requis pour un travail, avec hello tâche du gestionnaire en cours d’exécution sur l’un des hello nœuds de calcul dans le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-386">A job manager task contains hello information that is necessary toocreate hello required tasks for a job, with hello job manager task being run on one of hello compute nodes in hello pool.</span></span> <span data-ttu-id="6ce25-387">Hello tâche du gestionnaire est gérée par lot--il est en file d’attente dès que la tâche de hello est créé et est redémarré en cas d’échec.</span><span class="sxs-lookup"><span data-stu-id="6ce25-387">hello job manager task is handled specifically by Batch--it is queued as soon as hello job is created, and is restarted if it fails.</span></span> <span data-ttu-id="6ce25-388">Une tâche du gestionnaire est *requis* pour les travaux qui est créés par un [planification du travail](#scheduled-jobs) , car il est hello uniquement moyen toodefine hello les tâches avant l’instanciation de travail de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-388">A job manager task is *required* for jobs that are created by a [job schedule](#scheduled-jobs) because it is hello only way toodefine hello tasks before hello job is instantiated.</span></span>
* <span data-ttu-id="6ce25-389">Par défaut, les travaux restent dans un état actif de hello lorsque toutes les tâches au sein de la tâche de hello sont terminées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-389">By default, jobs remain in hello active state when all tasks within hello job are complete.</span></span> <span data-ttu-id="6ce25-390">Vous pouvez modifier ce comportement afin que hello travail est automatiquement arrêté une fois toutes les tâches hello travail terminées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-390">You can change this behavior so that hello job is automatically terminated when all tasks in hello job are complete.</span></span> <span data-ttu-id="6ce25-391">La tâche de jeu hello **onAllTasksComplete** propriété ([OnAllTasksComplete] [ net_onalltaskscomplete] dans .NET de lot) trop*terminatejob* tooautomatically arrêter le travail de hello lorsque toutes les tâches sont en état de hello s’est terminée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-391">Set hello job's **onAllTasksComplete** property ([OnAllTasksComplete][net_onalltaskscomplete] in Batch .NET) too*terminatejob* tooautomatically terminate hello job when all of its tasks are in hello completed state.</span></span>

    <span data-ttu-id="6ce25-392">Notez que le service de traitement par lots hello tient compte un travail avec *aucun* toohave tâches toutes ses tâches terminées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-392">Note that hello Batch service considers a job with *no* tasks toohave all of its tasks completed.</span></span> <span data-ttu-id="6ce25-393">C’est la raison pour laquelle cette option est généralement utilisée avec une [tâche de gestionnaire de travaux](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="6ce25-393">Therefore, this option is most commonly used with a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="6ce25-394">Si vous souhaitez arrêt automatique d’un travail de toouse sans un gestionnaire de travaux, vous devez définir initialement d’un nouveau travail **onAllTasksComplete** propriété trop*noaction*, puis définissez-la trop*terminatejob* uniquement une fois que vous avez terminé d’ajouter des travaux toohello de tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-394">If you want toouse automatic job termination without a job manager, you should initially set a new job's **onAllTasksComplete** property too*noaction*, then set it too*terminatejob* only after you've finished adding tasks toohello job.</span></span>

### <a name="job-priority"></a><span data-ttu-id="6ce25-395">priorité de travail</span><span class="sxs-lookup"><span data-stu-id="6ce25-395">Job priority</span></span>
<span data-ttu-id="6ce25-396">Vous pouvez affecter un toojobs de priorité que vous créez dans le lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-396">You can assign a priority toojobs that you create in Batch.</span></span> <span data-ttu-id="6ce25-397">Hello service Batch utilise la valeur de priorité de hello de commande de hello toodetermine hello travail de planification des tâches dans un compte (ce n’est pas toobe peut être confondue avec un [tâche planifiée](#scheduled-jobs)).</span><span class="sxs-lookup"><span data-stu-id="6ce25-397">hello Batch service uses hello priority value of hello job toodetermine hello order of job scheduling within an account (this is not toobe confused with a [scheduled job](#scheduled-jobs)).</span></span> <span data-ttu-id="6ce25-398">les valeurs de priorité de Hello comprises entre -1000 too1000, avec-1 000 étant la priorité la plus basse hello et 1000 hello plus élevé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-398">hello priority values range from -1000 too1000, with -1000 being hello lowest priority and 1000 being hello highest.</span></span> <span data-ttu-id="6ce25-399">priorité de hello tooupdate d’une tâche, l’appel hello [hello des propriétés d’une tâche de mise à jour] [ rest_update_job] opération (lot reste), ou modifier hello [CloudJob.Priority] [ net_cloudjob_priority] propriété (lot .NET).</span><span class="sxs-lookup"><span data-stu-id="6ce25-399">tooupdate hello priority of a job, call hello [Update hello properties of a job][rest_update_job] operation (Batch REST), or modify hello [CloudJob.Priority][net_cloudjob_priority] property (Batch .NET).</span></span>

<span data-ttu-id="6ce25-400">Au sein de hello même compte, présentant une priorité plus élevée travaux ont une priorité de planification sur les tâches de priorité plus faible.</span><span class="sxs-lookup"><span data-stu-id="6ce25-400">Within hello same account, higher-priority jobs have scheduling precedence over lower-priority jobs.</span></span> <span data-ttu-id="6ce25-401">Un travail à priorité supérieure dans un compte n’est pas prioritaire en termes de planification sur un autre travail à priorité inférieure dans un autre compte.</span><span class="sxs-lookup"><span data-stu-id="6ce25-401">A job with a higher-priority value in one account does not have scheduling precedence over another job with a lower-priority value in a different account.</span></span>

<span data-ttu-id="6ce25-402">La planification de travail entre pools est indépendante.</span><span class="sxs-lookup"><span data-stu-id="6ce25-402">Job scheduling across pools is independent.</span></span> <span data-ttu-id="6ce25-403">Entre des pools différents, un travail à priorité supérieure n’est pas systématiquement planifié en premier si le pool auquel il est associé n’a pas suffisamment de nœuds inactifs.</span><span class="sxs-lookup"><span data-stu-id="6ce25-403">Between different pools, it is not guaranteed that a higher-priority job is scheduled first if its associated pool is short of idle nodes.</span></span> <span data-ttu-id="6ce25-404">Bonjour même pool, des travaux par hello même niveau de priorité ont autant de chance d’être planifié.</span><span class="sxs-lookup"><span data-stu-id="6ce25-404">In hello same pool, jobs with hello same priority level have an equal chance of being scheduled.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="6ce25-405">Scheduled jobs</span><span class="sxs-lookup"><span data-stu-id="6ce25-405">Scheduled jobs</span></span>
<span data-ttu-id="6ce25-406">[Les planifications du travail] [ rest_job_schedules] vous activer toocreate les travaux récurrents dans hello service Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-406">[Job schedules][rest_job_schedules] enable you toocreate recurring jobs within hello Batch service.</span></span> <span data-ttu-id="6ce25-407">Une planification de travail spécifie quand toorun des travaux et inclut les spécifications de hello de toobe de travaux hello exécuter.</span><span class="sxs-lookup"><span data-stu-id="6ce25-407">A job schedule specifies when toorun jobs and includes hello specifications for hello jobs toobe run.</span></span> <span data-ttu-id="6ce25-408">Vous pouvez spécifier la durée durée hello de planification de hello--lorsque hello planification est en vigueur--et la fréquence à laquelle les travaux sont créés au cours de hello planifiée période.</span><span class="sxs-lookup"><span data-stu-id="6ce25-408">You can specify hello duration of hello schedule--how long and when hello schedule is in effect--and how frequently jobs are created during hello scheduled period.</span></span>

## <a name="task"></a><span data-ttu-id="6ce25-409">Task</span><span class="sxs-lookup"><span data-stu-id="6ce25-409">Task</span></span>
<span data-ttu-id="6ce25-410">Une tâche est une unité de calcul associée à un travail.</span><span class="sxs-lookup"><span data-stu-id="6ce25-410">A task is a unit of computation that is associated with a job.</span></span> <span data-ttu-id="6ce25-411">Elle s’exécute sur un nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-411">It runs on a node.</span></span> <span data-ttu-id="6ce25-412">Tâches affectées nœud tooa pour l’exécution ou en file d’attente jusqu'à ce qu’un nœud devienne disponible.</span><span class="sxs-lookup"><span data-stu-id="6ce25-412">Tasks are assigned tooa node for execution, or are queued until a node becomes free.</span></span> <span data-ttu-id="6ce25-413">En réalité, une tâche exécute un ou plusieurs programmes ou scripts sur un calcul nœud tooperform hello travail que vous devez effectue.</span><span class="sxs-lookup"><span data-stu-id="6ce25-413">Put simply, a task runs one or more programs or scripts on a compute node tooperform hello work you need done.</span></span>

<span data-ttu-id="6ce25-414">Lorsque vous créez une tâche, vous pouvez spécifier les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="6ce25-414">When you create a task, you can specify:</span></span>

* <span data-ttu-id="6ce25-415">Hello **ligne de commande** pour la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-415">hello **command line** for hello task.</span></span> <span data-ttu-id="6ce25-416">Il s’agit de ligne de commande hello qui exécute votre application ou le script sur le nœud de calcul hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-416">This is hello command line that runs your application or script on hello compute node.</span></span>

    <span data-ttu-id="6ce25-417">Il est important de toonote qui hello de ligne de commande ne s’exécute pas sous un interpréteur de commandes.</span><span class="sxs-lookup"><span data-stu-id="6ce25-417">It is important toonote that hello command line does not actually run under a shell.</span></span> <span data-ttu-id="6ce25-418">Par conséquent, il ne peut pas en mode natif bénéficier des fonctionnalités du shell comme [variable d’environnement](#environment-settings-for-tasks) expansion (Cela inclut hello `PATH`).</span><span class="sxs-lookup"><span data-stu-id="6ce25-418">Therefore, it cannot natively take advantage of shell features like [environment variable](#environment-settings-for-tasks) expansion (this includes hello `PATH`).</span></span> <span data-ttu-id="6ce25-419">tootake parti de ces fonctionnalités, vous devez appeler shell hello dans la ligne de commande hello--par exemple, en lançant `cmd.exe` sur les nœuds Windows ou `/bin/sh` sur Linux :</span><span class="sxs-lookup"><span data-stu-id="6ce25-419">tootake advantage of such features, you must invoke hello shell in hello command line--for example, by launching `cmd.exe` on Windows nodes or `/bin/sh` on Linux:</span></span>

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    <span data-ttu-id="6ce25-420">Si vos tâches doivent toorun une application ou un script qui n’est pas hello du nœud `PATH` ou référencer des variables d’environnement, appelez la fonctionnalité interpréteur de commandes hello explicitement dans la ligne de commande de tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-420">If your tasks need toorun an application or script that is not in hello node's `PATH` or reference environment variables, invoke hello shell explicitly in hello task command line.</span></span>
* <span data-ttu-id="6ce25-421">**Fichiers de ressources** qui contiennent hello toobe de données traitée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-421">**Resource files** that contain hello data toobe processed.</span></span> <span data-ttu-id="6ce25-422">Ces fichiers sont nœud toohello automatiquement copiée à partir du stockage d’objets Blob dans un compte de stockage Azure à usage général avant l’exécution de ligne de commande de la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-422">These files are automatically copied toohello node from Blob storage in a general-purpose Azure Storage account before hello task's command line is executed.</span></span> <span data-ttu-id="6ce25-423">Pour plus d’informations, consultez les sections hello [tâche de démarrage](#start-task) et [fichiers et répertoires](#files-and-directories).</span><span class="sxs-lookup"><span data-stu-id="6ce25-423">For more information, see hello sections [Start task](#start-task) and [Files and directories](#files-and-directories).</span></span>
* <span data-ttu-id="6ce25-424">Hello **variables d’environnement** qui sont requises par votre application.</span><span class="sxs-lookup"><span data-stu-id="6ce25-424">hello **environment variables** that are required by your application.</span></span> <span data-ttu-id="6ce25-425">Pour plus d’informations, consultez hello [paramètres d’environnement pour les tâches](#environment-settings-for-tasks) section.</span><span class="sxs-lookup"><span data-stu-id="6ce25-425">For more information, see hello [Environment settings for tasks](#environment-settings-for-tasks) section.</span></span>
* <span data-ttu-id="6ce25-426">Hello **contraintes** sous le hello tâche doit s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="6ce25-426">hello **constraints** under which hello task should execute.</span></span> <span data-ttu-id="6ce25-427">Par exemple, les contraintes incluent la durée maximale de hello cette tâche hello est autorisée toorun, nombre maximal de hello de tentatives d’une tâche ayant échoué doit être, et l’heure maximum de hello les fichiers dans le répertoire de travail de la tâche hello sont conservés.</span><span class="sxs-lookup"><span data-stu-id="6ce25-427">For example, constraints include hello maximum time that hello task is allowed toorun, hello maximum number of times a failed task should be retried, and hello maximum time that files in hello task's working directory are retained.</span></span>
* <span data-ttu-id="6ce25-428">**Les packages d’applications** toodeploy toohello sur le hello tâche est planifiée toorun de nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-428">**Application packages** toodeploy toohello compute node on which hello task is scheduled toorun.</span></span> <span data-ttu-id="6ce25-429">[Les packages d’applications](#application-packages) fournissent un déploiement simplifié et le contrôle de version des applications hello qui exécutent des tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-429">[Application packages](#application-packages) provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="6ce25-430">Les packages d’applications de niveau de la tâche sont particulièrement utiles dans les environnements de pool partagé, où différentes tâches sont exécutées sur un pool et pool de hello n’est pas supprimé lorsqu’un travail est terminé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-430">Task-level application packages are especially useful in shared-pool environments, where different jobs are run on one pool, and hello pool is not deleted when a job is completed.</span></span> <span data-ttu-id="6ce25-431">Si votre travail comporte moins de tâches que les nœuds dans le pool de hello, packages d’applications de tâche peuvent réduire le transfert de données depuis votre application est déployée toohello uniquement les nœuds qui exécutent des tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-431">If your job has fewer tasks than nodes in hello pool, task application packages can minimize data transfer since your application is deployed only toohello nodes that run tasks.</span></span>

<span data-ttu-id="6ce25-432">En outre tootasks vous définissez tooperform calcul sur un nœud, hello tâches spéciales suivantes est également fourni par le service de traitement par lots hello :</span><span class="sxs-lookup"><span data-stu-id="6ce25-432">In addition tootasks you define tooperform computation on a node, hello following special tasks are also provided by hello Batch service:</span></span>

* [<span data-ttu-id="6ce25-433">Tâche de démarrage</span><span class="sxs-lookup"><span data-stu-id="6ce25-433">Start task</span></span>](#start-task)
* [<span data-ttu-id="6ce25-434">Tâche du gestionnaire de travaux</span><span class="sxs-lookup"><span data-stu-id="6ce25-434">Job manager task</span></span>](#job-manager-task)
* [<span data-ttu-id="6ce25-435">Tâches de préparation et lancement</span><span class="sxs-lookup"><span data-stu-id="6ce25-435">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
* [<span data-ttu-id="6ce25-436">Tâches multi-instances (MPI)</span><span class="sxs-lookup"><span data-stu-id="6ce25-436">Multi-instance tasks (MPI)</span></span>](#multi-instance-tasks)
* [<span data-ttu-id="6ce25-437">Dépendances de la tâche</span><span class="sxs-lookup"><span data-stu-id="6ce25-437">Task dependencies</span></span>](#task-dependencies)

### <a name="start-task"></a><span data-ttu-id="6ce25-438">Tâche de démarrage</span><span class="sxs-lookup"><span data-stu-id="6ce25-438">Start task</span></span>
<span data-ttu-id="6ce25-439">En associant un **démarrer la tâche** avec un pool, vous pouvez préparer hello système d’exploitation de ses nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-439">By associating a **start task** with a pool, you can prepare hello operating environment of its nodes.</span></span> <span data-ttu-id="6ce25-440">Par exemple, vous pouvez effectuer des actions telles que l’installation d’applications hello qui exécutent des tâches ou de lancer des processus en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="6ce25-440">For example, you can perform actions like installing hello applications that your tasks run or starting background processes.</span></span> <span data-ttu-id="6ce25-441">tâche de démarrage Hello s’exécute chaque fois qu’un nœud démarre, pour tant qu’il reste dans le pool de hello, y compris lorsque le nœud hello est ajouté en premier toohello pool et lorsqu’il est redémarré ou réinitialisé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-441">hello start task runs every time a node starts, for as long as it remains in hello pool--including when hello node is first added toohello pool and when it is restarted or reimaged.</span></span>

<span data-ttu-id="6ce25-442">Le principal avantage de la tâche de démarrage hello est qu’il peut contenir toutes les informations hello sont nécessaire tooconfigure un nœud de calcul et installer des applications hello qui sont requises pour l’exécution de la tâche.</span><span class="sxs-lookup"><span data-stu-id="6ce25-442">A primary benefit of hello start task is that it can contain all of hello information that is necessary tooconfigure a compute node and install hello applications that are required for task execution.</span></span> <span data-ttu-id="6ce25-443">Par conséquent, il est aussi simple que la spécification du nombre de nœud cible nouveaux hello d’augmenter le nombre hello de nœuds dans un pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-443">Therefore, increasing hello number of nodes in a pool is as simple as specifying hello new target node count.</span></span> <span data-ttu-id="6ce25-444">tâche de démarrage Hello fournit hello lot service hello informations nécessaires tooconfigure hello nouveaux nœuds et les préparer pour l’acceptation de tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-444">hello start task provides hello Batch service hello information that is needed tooconfigure hello new nodes and get them ready for accepting tasks.</span></span>

<span data-ttu-id="6ce25-445">Comme avec toutes les tâches de traitement par lots Azure, vous pouvez spécifier une liste de **les fichiers de ressources** dans [Azure Storage][azure_storage], en outre tooa **ligne de commande** toobe exécutée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-445">As with any Azure Batch task, you can specify a list of **resource files** in [Azure Storage][azure_storage], in addition tooa **command line** toobe executed.</span></span> <span data-ttu-id="6ce25-446">service de traitement par lots Hello tout d’abord copie le nœud de toohello de fichiers de ressources hello depuis le stockage Azure et exécute ensuite la ligne de commande hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-446">hello Batch service first copies hello resource files toohello node from Azure Storage, and then runs hello command line.</span></span> <span data-ttu-id="6ce25-447">Pour une tâche de démarrage pool, liste des fichiers hello contient généralement hello tâche application et ses dépendances.</span><span class="sxs-lookup"><span data-stu-id="6ce25-447">For a pool start task, hello file list typically contains hello task application and its dependencies.</span></span>

<span data-ttu-id="6ce25-448">Toutefois, tâche de démarrage hello peut aussi inclure toobe de données de référence utilisé par toutes les tâches qui sont exécutent sur le nœud de calcul hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-448">However, hello start task could also include reference data toobe used by all tasks that are running on hello compute node.</span></span> <span data-ttu-id="6ce25-449">Par exemple, la ligne de commande d’une tâche de démarrage peut effectuer un `robocopy` opération toocopy fichiers d’application (qui ont été spécifiées en tant que fichiers de ressources et téléchargé toohello nœud) à partir de hello démarrer la tâche [répertoire de travail](#files-and-directories) toohello [dossier partagé](#files-and-directories), puis exécutez un fichier MSI ou `setup.exe`.</span><span class="sxs-lookup"><span data-stu-id="6ce25-449">For example, a start task's command line could perform a `robocopy` operation toocopy application files (which were specified as resource files and downloaded toohello node) from hello start task's [working directory](#files-and-directories) toohello [shared folder](#files-and-directories), and then run an MSI or `setup.exe`.</span></span>

<span data-ttu-id="6ce25-450">Il est généralement souhaitable hello lot service toowait pour toocomplete de tâche de démarrage hello avant de considérer hello tâches toobe prêt attribué de nœud, mais vous pouvez la configurer.</span><span class="sxs-lookup"><span data-stu-id="6ce25-450">It is typically desirable for hello Batch service toowait for hello start task toocomplete before considering hello node ready toobe assigned tasks, but you can configure this.</span></span>

<span data-ttu-id="6ce25-451">Si une tâche de démarrage échoue sur un nœud de calcul, puis hello l’état du nœud de hello est mise à jour tooreflect hello échec et nœud de hello ne possède pas toutes les tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-451">If a start task fails on a compute node, then hello state of hello node is updated tooreflect hello failure, and hello node is not assigned any tasks.</span></span> <span data-ttu-id="6ce25-452">Une tâche de démarrage peut échouer s’il existe un problème de copie de ses fichiers de ressources de stockage, ou si le processus de hello exécuté par sa ligne de commande retourne un code de sortie différent de zéro.</span><span class="sxs-lookup"><span data-stu-id="6ce25-452">A start task can fail if there is an issue copying its resource files from storage, or if hello process executed by its command line returns a nonzero exit code.</span></span>

<span data-ttu-id="6ce25-453">Si vous ajoutez ou mettez à jour de la tâche de démarrage hello pour un pool existant, vous devez redémarrer ses nœuds de calcul pour les nœuds de toohello hello début tâche toobe appliqué.</span><span class="sxs-lookup"><span data-stu-id="6ce25-453">If you add or update hello start task for an existing pool, you must reboot its compute nodes for hello start task toobe applied toohello nodes.</span></span>

>[!NOTE]
> <span data-ttu-id="6ce25-454">Hello taille totale d’une tâche de démarrage doit être inférieur ou égal too32768 caractères, y compris les fichiers de ressources et les variables d’environnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-454">hello total size of a start task must be less than or equal too32768 characters, including resource files and environment variables.</span></span> <span data-ttu-id="6ce25-455">tooensure que votre tâche de démarrage répond à cette exigence, vous pouvez utiliser une des deux approches :</span><span class="sxs-lookup"><span data-stu-id="6ce25-455">tooensure that your start task meets this requirement, you can use one of two approaches:</span></span>
>
> 1. <span data-ttu-id="6ce25-456">Vous pouvez utiliser l’application packages toodistribute applications ou des données sur chaque nœud de votre pool de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-456">You can use application packages toodistribute applications or data across each node in your Batch pool.</span></span> <span data-ttu-id="6ce25-457">Pour plus d’informations sur les packages d’applications, consultez [déployer des nœuds de toocompute d’applications avec des packages d’application de lot](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-457">For more information about application packages, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
> 2. <span data-ttu-id="6ce25-458">Vous pouvez créer manuellement une archive au format ZIP contenant vos fichiers d’applications.</span><span class="sxs-lookup"><span data-stu-id="6ce25-458">You can manually create a zipped archive containing your applications files.</span></span> <span data-ttu-id="6ce25-459">Télécharger votre stockage de tooAzure archive compressé comme un objet blob.</span><span class="sxs-lookup"><span data-stu-id="6ce25-459">Upload your zipped archive tooAzure Storage as a blob.</span></span> <span data-ttu-id="6ce25-460">Spécifiez les archive hello compressé comme un fichier de ressources pour votre tâche de démarrage.</span><span class="sxs-lookup"><span data-stu-id="6ce25-460">Specify hello zipped archive as a resource file for your start task.</span></span> <span data-ttu-id="6ce25-461">Avant l’exécution de la ligne de commande hello pour votre tâche de démarrage décompressez l’archive hello à partir de la ligne de commande hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-461">Before you run hello command line for your start task, unzip hello archive from hello command line.</span></span> 
>
>    <span data-ttu-id="6ce25-462">archive de hello toounzip, vous pouvez utiliser hello d’archivage de l’outil de votre choix.</span><span class="sxs-lookup"><span data-stu-id="6ce25-462">toounzip hello archive, you can use hello archiving tool of your choice.</span></span> <span data-ttu-id="6ce25-463">Vous devez tooinclude hello outil que vous archive de hello toounzip comme fichier de ressources pour la tâche de démarrage hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-463">You will need tooinclude hello tool that you use toounzip hello archive as a resource file for hello start task.</span></span>
>
>

### <a name="job-manager-task"></a><span data-ttu-id="6ce25-464">Tâche du gestionnaire de travaux</span><span class="sxs-lookup"><span data-stu-id="6ce25-464">Job manager task</span></span>
<span data-ttu-id="6ce25-465">Vous utilisez généralement un **tâche du gestionnaire** toocontrol et/ou d’analyse de la tâche d’exécution--par exemple, toocreate et soumettre des tâches hello pour un travail, déterminer les tâches supplémentaires toorun et déterminer quand le travail est terminé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-465">You typically use a **job manager task** toocontrol and/or monitor job execution--for example, toocreate and submit hello tasks for a job, determine additional tasks toorun, and determine when work is complete.</span></span> <span data-ttu-id="6ce25-466">Toutefois, une tâche du gestionnaire n’est pas restreinte toothese activités.</span><span class="sxs-lookup"><span data-stu-id="6ce25-466">However, a job manager task is not restricted toothese activities.</span></span> <span data-ttu-id="6ce25-467">Il s’agit d’une tâche chevronnée que peut effectuer toutes les actions qui sont requises pour la tâche de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-467">It is a fully fledged task that can perform any actions that are required for hello job.</span></span> <span data-ttu-id="6ce25-468">Par exemple, une tâche du gestionnaire peut télécharger un fichier qui est spécifié en tant que paramètre, analyser le contenu hello de ce fichier et soumettre des tâches supplémentaires basées sur ce contenu.</span><span class="sxs-lookup"><span data-stu-id="6ce25-468">For example, a job manager task might download a file that is specified as a parameter, analyze hello contents of that file, and submit additional tasks based on those contents.</span></span>

<span data-ttu-id="6ce25-469">Une tâche du gestionnaire de travaux est lancée avant toutes les autres tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-469">A job manager task is started before all other tasks.</span></span> <span data-ttu-id="6ce25-470">Il fournit hello suivant de fonctionnalités :</span><span class="sxs-lookup"><span data-stu-id="6ce25-470">It provides hello following features:</span></span>

* <span data-ttu-id="6ce25-471">Il est automatiquement envoyé sous la forme d’une tâche par hello service Batch lors de la création du travail de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-471">It is automatically submitted as a task by hello Batch service when hello job is created.</span></span>
* <span data-ttu-id="6ce25-472">Elle est planifiée tooexecute hello avant d’autres tâches dans un projet.</span><span class="sxs-lookup"><span data-stu-id="6ce25-472">It is scheduled tooexecute before hello other tasks in a job.</span></span>
* <span data-ttu-id="6ce25-473">Son nœud associé est hello dernière toobe est supprimé d’un pool, lorsque le pool de hello est en cours downsized.</span><span class="sxs-lookup"><span data-stu-id="6ce25-473">Its associated node is hello last toobe removed from a pool when hello pool is being downsized.</span></span>
* <span data-ttu-id="6ce25-474">La résiliation peut être arrêt toohello liée de toutes les tâches dans la tâche de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-474">Its termination can be tied toohello termination of all tasks in hello job.</span></span>
* <span data-ttu-id="6ce25-475">Une tâche du gestionnaire est prioritée hello plus élevée quand il a besoin toobe redémarré.</span><span class="sxs-lookup"><span data-stu-id="6ce25-475">A job manager task is given hello highest priority when it needs toobe restarted.</span></span> <span data-ttu-id="6ce25-476">Si un nœud inactif n’est pas disponible, hello service Batch peut mettre fin à une Hello autres tâches en cours d’exécution dans la salle de toomake pool hello pour hello travail manager tâche toorun.</span><span class="sxs-lookup"><span data-stu-id="6ce25-476">If an idle node is not available, hello Batch service might terminate one of hello other running tasks in hello pool toomake room for hello job manager task toorun.</span></span>
* <span data-ttu-id="6ce25-477">Une tâche du gestionnaire dans un travail n’a pas priorité sur des tâches hello d’autres tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-477">A job manager task in one job does not have priority over hello tasks of other jobs.</span></span> <span data-ttu-id="6ce25-478">Parmi les travaux, seules les priorités au niveau du travail sont observées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-478">Across jobs, only job-level priorities are observed.</span></span>

### <a name="job-preparation-and-release-tasks"></a><span data-ttu-id="6ce25-479">Tâches de préparation et lancement</span><span class="sxs-lookup"><span data-stu-id="6ce25-479">Job preparation and release tasks</span></span>
<span data-ttu-id="6ce25-480">Batch fournit des tâches de préparation des travaux pour la configuration de l’exécution des travaux préliminaire.</span><span class="sxs-lookup"><span data-stu-id="6ce25-480">Batch provides job preparation tasks for pre-job execution setup.</span></span> <span data-ttu-id="6ce25-481">Les tâches de validation des travaux sont destinées à la maintenance ou au nettoyage postérieurs aux travaux.</span><span class="sxs-lookup"><span data-stu-id="6ce25-481">Job release tasks are for post-job maintenance or cleanup.</span></span>

* <span data-ttu-id="6ce25-482">**Tâche de préparation**: une tâche de préparation du travail s’exécute sur tous les nœuds de calcul qui sont des tâches planifiées toorun, avant tout hello autres tâches sont exécutées.</span><span class="sxs-lookup"><span data-stu-id="6ce25-482">**Job preparation task**: A job preparation task runs on all compute nodes that are scheduled toorun tasks, before any of hello other job tasks are executed.</span></span> <span data-ttu-id="6ce25-483">Vous pouvez utiliser les données de toocopy de tâches préparation du travail qui est partagée par toutes les tâches, mais toohello unique tâche, par exemple.</span><span class="sxs-lookup"><span data-stu-id="6ce25-483">You can use a job preparation task toocopy data that is shared by all tasks, but is unique toohello job, for example.</span></span>
* <span data-ttu-id="6ce25-484">**Tâche de mise en production**: lorsqu’un travail est terminé, une tâche de mise en production de travail s’exécute sur chaque nœud dans le pool de hello exécutée au moins une tâche.</span><span class="sxs-lookup"><span data-stu-id="6ce25-484">**Job release task**: When a job has completed, a job release task runs on each node in hello pool that executed at least one task.</span></span> <span data-ttu-id="6ce25-485">Vous pouvez utiliser une version tâche toodelete données de la tâche sont copiée par la tâche de préparation du travail hello ou toocompress et téléchargement de données de journal diagnostic, par exemple.</span><span class="sxs-lookup"><span data-stu-id="6ce25-485">You can use a job release task toodelete data that is copied by hello job preparation task, or toocompress and upload diagnostic log data, for example.</span></span>

<span data-ttu-id="6ce25-486">Préparation à la fois la tâche et les tâches de mise en production vous toospecify un toorun de ligne de commande lorsque la tâche hello est appelée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-486">Both job preparation and release tasks allow you toospecify a command line toorun when hello task is invoked.</span></span> <span data-ttu-id="6ce25-487">Elles offrent des fonctionnalités telles que le téléchargement de fichiers, une exécution élevée, des variables d’environnement personnalisées, une durée d’exécution maximale, le nombre de tentatives et la durée de rétention des fichiers.</span><span class="sxs-lookup"><span data-stu-id="6ce25-487">They offer features like file download, elevated execution, custom environment variables, maximum execution duration, retry count, and file retention time.</span></span>

<span data-ttu-id="6ce25-488">Pour plus d’informations sur les tâches de préparation de travail et de validation, consultez [Exécuter les tâches de préparation de travail et de validation sur les nœuds de calcul Azure Batch](batch-job-prep-release.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-488">For more information on job preparation and release tasks, see [Run job preparation and completion tasks on Azure Batch compute nodes](batch-job-prep-release.md).</span></span>

### <a name="multi-instance-task"></a><span data-ttu-id="6ce25-489">Tâche multi-instance</span><span class="sxs-lookup"><span data-stu-id="6ce25-489">Multi-instance task</span></span>
<span data-ttu-id="6ce25-490">A [tâche d’instances multiples](batch-mpi.md) est une tâche qui est configuré toorun sur plusieurs nœuds de calcul simultanément.</span><span class="sxs-lookup"><span data-stu-id="6ce25-490">A [multi-instance task](batch-mpi.md) is a task that is configured toorun on more than one compute node simultaneously.</span></span> <span data-ttu-id="6ce25-491">Avec les tâches de plusieurs instances, vous pouvez activer la haute performance des scénarios informatiques qui nécessitent un groupe de nœuds de calcul qui sont alloués ensemble tooprocess une charge de travail unique (comme Interface MPI (Message Passing)).</span><span class="sxs-lookup"><span data-stu-id="6ce25-491">With multi-instance tasks, you can enable high-performance computing scenarios that require a group of compute nodes that are allocated together tooprocess a single workload (like Message Passing Interface (MPI)).</span></span>

<span data-ttu-id="6ce25-492">Pour plus d’informations sur l’exécution des travaux MPI dans le lot à l’aide de bibliothèque de lot .NET hello, passez en revue [multi-instance utilisez tâches toorun les applications d’Interface MPI (Message Passing) dans Azure Batch](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-492">For a detailed discussion on running MPI jobs in Batch by using hello Batch .NET library, check out [Use multi-instance tasks toorun Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md).</span></span>

### <a name="task-dependencies"></a><span data-ttu-id="6ce25-493">Dépendances de la tâche</span><span class="sxs-lookup"><span data-stu-id="6ce25-493">Task dependencies</span></span>
<span data-ttu-id="6ce25-494">[Dépendances de tâches](batch-task-dependencies.md), en tant que hello nom l’indique, vous permettre de toospecify qui dépend de la tâche à la fin de hello d’autres tâches avant son exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-494">[Task dependencies](batch-task-dependencies.md), as hello name implies, allow you toospecify that a task depends on hello completion of other tasks before its execution.</span></span> <span data-ttu-id="6ce25-495">Cette fonctionnalité prend en charge pour les situations dans lesquelles une tâche « en aval » consomme sortie hello d’une tâche « en amont », ou lorsqu’une tâche en amont effectue une initialisation requise par une tâche en aval.</span><span class="sxs-lookup"><span data-stu-id="6ce25-495">This feature provides support for situations in which a "downstream" task consumes hello output of an "upstream" task--or when an upstream task performs some initialization that is required by a downstream task.</span></span> <span data-ttu-id="6ce25-496">toouse cette fonctionnalité, vous devez première interdépendances activer sur le traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-496">toouse this feature, you must first enable task dependencies on your Batch job.</span></span> <span data-ttu-id="6ce25-497">Ensuite, pour chaque tâche qui dépend d’un autre (ou bien d’autres), vous spécifiez les tâches hello qui dépend de cette tâche.</span><span class="sxs-lookup"><span data-stu-id="6ce25-497">Then, for each task that depends on another (or many others), you specify hello tasks which that task depends on.</span></span>

<span data-ttu-id="6ce25-498">Avec des dépendances de tâche, vous pouvez configurer des scénarios, par exemple hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ce25-498">With task dependencies, you can configure scenarios like hello following:</span></span>

* <span data-ttu-id="6ce25-499">*taskB* dépend de *taskA* (l’exécution de *taskB* ne commence pas tant que celle de *taskA* n’est pas terminée).</span><span class="sxs-lookup"><span data-stu-id="6ce25-499">*taskB* depends on *taskA* (*taskB* will not begin execution until *taskA* has completed).</span></span>
* <span data-ttu-id="6ce25-500">*taskC* dépend de *taskA* et de *taskB*.</span><span class="sxs-lookup"><span data-stu-id="6ce25-500">*taskC* depends on both *taskA* and *taskB*.</span></span>
* <span data-ttu-id="6ce25-501">*taskD* dépend d’une plage de tâches, notamment des tâches *1* à *10* avant de pouvoir s’exécuter.</span><span class="sxs-lookup"><span data-stu-id="6ce25-501">*taskD* depends on a range of tasks, such as tasks *1* through *10*, before it executes.</span></span>

<span data-ttu-id="6ce25-502">Extraire [interdépendances dans Azure Batch](batch-task-dependencies.md) et hello [TaskDependencies] [ github_sample_taskdeps] exemple de code dans hello [exemples de traitement par lots azure] [ github_samples] Référentiel GitHub pour plus d’informations détaillées sur cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="6ce25-502">Check out [Task dependencies in Azure Batch](batch-task-dependencies.md) and hello [TaskDependencies][github_sample_taskdeps] code sample in hello [azure-batch-samples][github_samples] GitHub repository for more in-depth details on this feature.</span></span>

## <a name="environment-settings-for-tasks"></a><span data-ttu-id="6ce25-503">Paramètres d’environnement des tâches</span><span class="sxs-lookup"><span data-stu-id="6ce25-503">Environment settings for tasks</span></span>
<span data-ttu-id="6ce25-504">Chaque tâche exécutée par hello service Batch a variables tooenvironment accès qu’il définit sur les nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-504">Each task executed by hello Batch service has access tooenvironment variables that it sets on compute nodes.</span></span> <span data-ttu-id="6ce25-505">Cela inclut des variables d’environnement définies par hello service Batch ([défini par le service][msdn_env_vars]) et les variables d’environnement personnalisées que vous pouvez définir pour vos tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-505">This includes environment variables defined by hello Batch service ([service-defined][msdn_env_vars]) and custom environment variables that you can define for your tasks.</span></span> <span data-ttu-id="6ce25-506">applications de Hello et des scripts de le qu'exécution de vos tâches ont accès les variables d’environnement toothese pendant l’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-506">hello applications and scripts your tasks execute have access toothese environment variables during execution.</span></span>

<span data-ttu-id="6ce25-507">Vous pouvez définir des variables d’environnement personnalisées au niveau de tâche ou travail hello en remplissant hello *paramètres d’environnement* propriété pour ces entités.</span><span class="sxs-lookup"><span data-stu-id="6ce25-507">You can set custom environment variables at hello task or job level by populating hello *environment settings* property for these entities.</span></span> <span data-ttu-id="6ce25-508">Par exemple, consultez hello [ajouter une tâche de tooa] [ rest_add_task] opération (API REST de traitement par lots), ou hello [CloudTask.EnvironmentSettings] [ net_cloudtask_env] et [ CloudJob.CommonEnvironmentSettings] [ net_job_env] propriétés dans le lot .NET.</span><span class="sxs-lookup"><span data-stu-id="6ce25-508">For example, see hello [Add a task tooa job][rest_add_task] operation (Batch REST API), or hello [CloudTask.EnvironmentSettings][net_cloudtask_env] and [CloudJob.CommonEnvironmentSettings][net_job_env] properties in Batch .NET.</span></span>

<span data-ttu-id="6ce25-509">Votre application cliente ou le service peut obtenir variables d’environnement d’une tâche, défini par le service et personnalisés, à l’aide de hello [obtenir des informations sur une tâche] [ rest_get_task_info] opération (lot reste) ou en accédant à Hello [CloudTask.EnvironmentSettings] [ net_cloudtask_env] propriété (lot .NET).</span><span class="sxs-lookup"><span data-stu-id="6ce25-509">Your client application or service can obtain a task's environment variables, both service-defined and custom, by using hello [Get information about a task][rest_get_task_info] operation (Batch REST) or by accessing hello [CloudTask.EnvironmentSettings][net_cloudtask_env] property (Batch .NET).</span></span> <span data-ttu-id="6ce25-510">Processus qui s’exécutent sur un nœud de calcul peuvent y accéder, et d’autres variables d’environnement sur le nœud hello, par exemple, à l’aide de hello familier `%VARIABLE_NAME%` (Windows) ou `$VARIABLE_NAME` syntaxe (Linux).</span><span class="sxs-lookup"><span data-stu-id="6ce25-510">Processes executing on a compute node can access these and other environment variables on hello node, for example, by using hello familiar `%VARIABLE_NAME%` (Windows) or `$VARIABLE_NAME` (Linux) syntax.</span></span>

<span data-ttu-id="6ce25-511">Vous trouverez la liste complète des variables d’environnement définies par le service dans l’article [Compute node environment variables][msdn_env_vars] (Variables d’environnement de nœud de calcul).</span><span class="sxs-lookup"><span data-stu-id="6ce25-511">You can find a full list of all service-defined environment variables in [Compute node environment variables][msdn_env_vars].</span></span>

## <a name="files-and-directories"></a><span data-ttu-id="6ce25-512">Fichiers et répertoires</span><span class="sxs-lookup"><span data-stu-id="6ce25-512">Files and directories</span></span>
<span data-ttu-id="6ce25-513">Chaque tâche possède un *répertoire de travail* sous lequel elle crée zéro ou plusieurs fichiers et répertoires.</span><span class="sxs-lookup"><span data-stu-id="6ce25-513">Each task has a *working directory* under which it creates zero or more files and directories.</span></span> <span data-ttu-id="6ce25-514">Ce répertoire de travail peut être utilisé pour stocker un programme hello qui est exécuté par la tâche hello, données hello qu’il traite, et hello de sortie de traitement hello qu'il effectue.</span><span class="sxs-lookup"><span data-stu-id="6ce25-514">This working directory can be used for storing hello program that is run by hello task, hello data that it processes, and hello output of hello processing it performs.</span></span> <span data-ttu-id="6ce25-515">Tous les fichiers et répertoires d’une tâche sont détenus par l’utilisateur de la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-515">All files and directories of a task are owned by hello task user.</span></span>

<span data-ttu-id="6ce25-516">Hello service Batch expose une partie du système de fichiers hello sur un nœud en tant que hello *répertoire racine*.</span><span class="sxs-lookup"><span data-stu-id="6ce25-516">hello Batch service exposes a portion of hello file system on a node as hello *root directory*.</span></span> <span data-ttu-id="6ce25-517">Puissent y accéder répertoire hello en référençant hello `AZ_BATCH_NODE_ROOT_DIR` variable d’environnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-517">Tasks can access hello root directory by referencing hello `AZ_BATCH_NODE_ROOT_DIR` environment variable.</span></span> <span data-ttu-id="6ce25-518">Pour plus d’informations sur l’utilisation de variables d’environnement, consultez la section [Paramètres d’environnement des tâches](#environment-settings-for-tasks).</span><span class="sxs-lookup"><span data-stu-id="6ce25-518">For more information about using environment variables, see [Environment settings for tasks](#environment-settings-for-tasks).</span></span>

<span data-ttu-id="6ce25-519">répertoire racine de Hello contient hello suivant la structure de répertoires :</span><span class="sxs-lookup"><span data-stu-id="6ce25-519">hello root directory contains hello following directory structure:</span></span>

![Structure de répertoire du nœud de calcul][1]

* <span data-ttu-id="6ce25-521">**partagé**: ce répertoire fournit l’accès en lecture/écriture trop*tous les* tâches qui s’exécutent sur un nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-521">**shared**: This directory provides read/write access too*all* tasks that run on a node.</span></span> <span data-ttu-id="6ce25-522">Toute tâche qui s’exécute sur le nœud de hello permettre créer, lire, mettre à jour et supprimer des fichiers dans ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="6ce25-522">Any task that runs on hello node can create, read, update, and delete files in this directory.</span></span> <span data-ttu-id="6ce25-523">Les tâches peuvent accéder au répertoire en référençant hello `AZ_BATCH_NODE_SHARED_DIR` variable d’environnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-523">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_SHARED_DIR` environment variable.</span></span>
* <span data-ttu-id="6ce25-524">**Démarrage**: ce répertoire est utilisé par une tâche de démarrage en tant que répertoire de travail.</span><span class="sxs-lookup"><span data-stu-id="6ce25-524">**startup**: This directory is used by a start task as its working directory.</span></span> <span data-ttu-id="6ce25-525">Tous les fichiers de hello sont nœud toohello téléchargé par la tâche de démarrage hello sont stockées ici.</span><span class="sxs-lookup"><span data-stu-id="6ce25-525">All of hello files that are downloaded toohello node by hello start task are stored here.</span></span> <span data-ttu-id="6ce25-526">tâche de démarrage Hello permettre créer, lire, mettre à jour et supprimer des fichiers sous ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="6ce25-526">hello start task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="6ce25-527">Les tâches peuvent accéder au répertoire en référençant hello `AZ_BATCH_NODE_STARTUP_DIR` variable d’environnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-527">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_STARTUP_DIR` environment variable.</span></span>
* <span data-ttu-id="6ce25-528">**Tâches**: un répertoire est créé pour chaque tâche qui s’exécute sur le nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-528">**Tasks**: A directory is created for each task that runs on hello node.</span></span> <span data-ttu-id="6ce25-529">Il est accessible en référençant hello `AZ_BATCH_TASK_DIR` variable d’environnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-529">It is accessed by referencing hello `AZ_BATCH_TASK_DIR` environment variable.</span></span>

    <span data-ttu-id="6ce25-530">Dans chaque répertoire de tâche, hello service Batch crée un répertoire de travail (`wd`) dont le chemin unique est spécifié par hello `AZ_BATCH_TASK_WORKING_DIR` variable d’environnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-530">Within each task directory, hello Batch service creates a working directory (`wd`) whose unique path is specified by hello `AZ_BATCH_TASK_WORKING_DIR` environment variable.</span></span> <span data-ttu-id="6ce25-531">Ce répertoire fournit la tâche toohello d’accès en lecture/écriture.</span><span class="sxs-lookup"><span data-stu-id="6ce25-531">This directory provides read/write access toohello task.</span></span> <span data-ttu-id="6ce25-532">tâche Hello permettre créer, lire, mettre à jour et supprimer des fichiers sous ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="6ce25-532">hello task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="6ce25-533">Ce répertoire est conservé en fonction de hello *RetentionTime* contrainte qui est spécifié pour la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-533">This directory is retained based on hello *RetentionTime* constraint that is specified for hello task.</span></span>

    <span data-ttu-id="6ce25-534">`stdout.txt`et `stderr.txt`: ces fichiers sont écrits de dossier de tâches toohello pendant l’exécution de hello de tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-534">`stdout.txt` and `stderr.txt`: These files are written toohello task folder during hello execution of hello task.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6ce25-535">Lorsqu’un nœud est supprimé de pool de hello, *tous les* de hello les fichiers qui sont stockés sur le nœud de hello sont supprimés.</span><span class="sxs-lookup"><span data-stu-id="6ce25-535">When a node is removed from hello pool, *all* of hello files that are stored on hello node are removed.</span></span>
>
>

## <a name="application-packages"></a><span data-ttu-id="6ce25-536">packages d’application</span><span class="sxs-lookup"><span data-stu-id="6ce25-536">Application packages</span></span>
<span data-ttu-id="6ce25-537">Hello [des packages d’application](batch-application-packages.md) fonctionnalité fournit une gestion plus simple et le déploiement d’applications toohello les nœuds de calcul dans les pools.</span><span class="sxs-lookup"><span data-stu-id="6ce25-537">hello [application packages](batch-application-packages.md) feature provides easy management and deployment of applications toohello compute nodes in your pools.</span></span> <span data-ttu-id="6ce25-538">Vous pouvez télécharger et gérer plusieurs versions de hello applications exécutées par vos tâches, y compris les fichiers binaires et les fichiers de support.</span><span class="sxs-lookup"><span data-stu-id="6ce25-538">You can upload and manage multiple versions of hello applications run by your tasks, including their binaries and support files.</span></span> <span data-ttu-id="6ce25-539">Ensuite, vous pouvez déployer automatiquement une ou plusieurs de ces applications toohello nœuds de calcul dans votre pool de.</span><span class="sxs-lookup"><span data-stu-id="6ce25-539">Then you can automatically deploy one or more of these applications toohello compute nodes in your pool.</span></span>

<span data-ttu-id="6ce25-540">Vous pouvez spécifier les packages d’applications au niveau de pool et la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-540">You can specify application packages at hello pool and task level.</span></span> <span data-ttu-id="6ce25-541">Lorsque vous spécifiez des packages d’application pool, application hello est nœud tooevery déployé dans le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-541">When you specify pool application packages, hello application is deployed tooevery node in hello pool.</span></span> <span data-ttu-id="6ce25-542">Lorsque vous spécifiez des packages d’applications Office, application hello est déployé toonodes uniquement qui sont planifiée toorun au moins une des tâches du travail hello, juste avant hello d’exécuter la ligne de commande de la tâche.</span><span class="sxs-lookup"><span data-stu-id="6ce25-542">When you specify task application packages, hello application is deployed only toonodes that are scheduled toorun at least one of hello job's tasks, just before hello task's command line is run.</span></span>

<span data-ttu-id="6ce25-543">Handles de lot hello détails d’utilisation de stockage Azure toostore vos packages d’application et les déploiement toocompute nœuds, afin de la charge de votre code et la gestion peut être simplifiée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-543">Batch handles hello details of working with Azure Storage toostore your application packages and deploy them toocompute nodes, so both your code and management overhead can be simplified.</span></span>

<span data-ttu-id="6ce25-544">toofind plus d’informations sur la fonctionnalité de package d’application hello, extraire [déployer des nœuds de toocompute d’applications avec des packages d’application de lot](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-544">toofind out more about hello application package feature, check out [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>

> [!NOTE]
> <span data-ttu-id="6ce25-545">Si vous ajoutez le pool application packages tooan *existant* pool, vous devez redémarrer les nœuds de calcul pour application hello packages des nœuds de toohello toobe déployé.</span><span class="sxs-lookup"><span data-stu-id="6ce25-545">If you add pool application packages tooan *existing* pool, you must reboot its compute nodes for hello application packages toobe deployed toohello nodes.</span></span>
>
>

## <a name="pool-and-compute-node-lifetime"></a><span data-ttu-id="6ce25-546">Durée de vie de nœud de pool et de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-546">Pool and compute node lifetime</span></span>
<span data-ttu-id="6ce25-547">Lorsque vous concevez votre solution de traitement par lots Azure, vous disposez toomake une décision de conception sur la façon et pools sont créés et la durée de calcul nœuds au sein de ces pools restent disponibles.</span><span class="sxs-lookup"><span data-stu-id="6ce25-547">When you design your Azure Batch solution, you have toomake a design decision about how and when pools are created, and how long compute nodes within those pools are kept available.</span></span>

<span data-ttu-id="6ce25-548">Sur l’extrémité du spectre de hello, vous pouvez créer un pool pour chaque tâche que vous envoyez et supprimer le pool de hello dès que ses tâches de fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-548">On one end of hello spectrum, you can create a pool for each job that you submit, and delete hello pool as soon as its tasks finish execution.</span></span> <span data-ttu-id="6ce25-549">Cela permet d’optimiser l’utilisation, car les nœuds hello sont alloués seulement lorsque nécessaire et arrêter dès qu’ils sont inactifs.</span><span class="sxs-lookup"><span data-stu-id="6ce25-549">This maximizes utilization because hello nodes are only allocated when needed, and shut down as soon as they're idle.</span></span> <span data-ttu-id="6ce25-550">Bien que cela signifie que le travail de hello doit attendre toobe de nœuds hello alloué, il est important toonote tâches planifiées pour l’exécution de nœuds sont disponibles individuellement, alloué, dès qu’et hello tâche de démarrage est terminée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-550">While this means that hello job must wait for hello nodes toobe allocated, it's important toonote that tasks are scheduled for execution as soon as nodes are individually available, allocated, and hello start task has completed.</span></span> <span data-ttu-id="6ce25-551">Traitement par lots est *pas* patienter jusqu'à ce que tous les nœuds au sein d’un pool sont disponibles avant d’attribuer des tâches toohello nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-551">Batch does *not* wait until all nodes within a pool are available before assigning tasks toohello nodes.</span></span> <span data-ttu-id="6ce25-552">Cela garantit l’utilisation maximale de tous les nœuds disponibles.</span><span class="sxs-lookup"><span data-stu-id="6ce25-552">This ensures maximum utilization of all available nodes.</span></span>

<span data-ttu-id="6ce25-553">À hello autre extrémité du spectre hello si travaux démarrer immédiatement est priorité la plus élevée de hello, vous pouvez créer un pool à l’avance et disposition de ses nœuds avant l’envoi des travaux.</span><span class="sxs-lookup"><span data-stu-id="6ce25-553">At hello other end of hello spectrum, if having jobs start immediately is hello highest priority, you can create a pool ahead of time and make its nodes available before jobs are submitted.</span></span> <span data-ttu-id="6ce25-554">Dans ce scénario, les tâches peuvent démarrer immédiatement, mais les nœuds peuvent inactif en attendant les toobe attribué.</span><span class="sxs-lookup"><span data-stu-id="6ce25-554">In this scenario, tasks can start immediately, but nodes might sit idle while waiting for them toobe assigned.</span></span>

<span data-ttu-id="6ce25-555">Une approche combinée est généralement utilisée pour la gestion d’une charge variable, mais continue.</span><span class="sxs-lookup"><span data-stu-id="6ce25-555">A combined approach is typically used for handling a variable, but ongoing, load.</span></span> <span data-ttu-id="6ce25-556">Vous pouvez avoir un pool que plusieurs tâches sont soumises à, mais peuvent évoluer nombre hello de nœuds vers le haut ou vers le bas selon la charge de travail toohello (consultez [mise à l’échelle des ressources de calcul](#scaling-compute-resources) Bonjour suivant la section).</span><span class="sxs-lookup"><span data-stu-id="6ce25-556">You can have a pool that multiple jobs are submitted to, but can scale hello number of nodes up or down according toohello job load (see [Scaling compute resources](#scaling-compute-resources) in hello following section).</span></span> <span data-ttu-id="6ce25-557">Vous pouvez procéder en réaction, en fonction de la charge actuelle, ou en amont, si la charge peut être prédite.</span><span class="sxs-lookup"><span data-stu-id="6ce25-557">You can do this reactively, based on current load, or proactively, if load can be predicted.</span></span>

## <a name="virtual-network-vnet-and-firewall-configuration"></a><span data-ttu-id="6ce25-558">Configuration du pare-feu et du réseau virtuel (VNet)</span><span class="sxs-lookup"><span data-stu-id="6ce25-558">Virtual network (VNet) and firewall configuration</span></span> 

<span data-ttu-id="6ce25-559">Lorsque vous configurez un pool de nœuds de calcul dans Azure Batch, vous pouvez associer le pool de hello à un sous-réseau de Azure [réseau virtuel (VNet)](../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-559">When you provision a pool of compute nodes in Azure Batch, you can associate hello pool with a subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="6ce25-560">toolearn savoir plus sur la création d’un réseau virtuel avec des sous-réseaux, consultez [créer un réseau virtuel Azure avec des sous-réseaux](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-560">toolearn more about creating a VNet with subnets, see [Create an Azure virtual network with subnets](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span></span> 

 * <span data-ttu-id="6ce25-561">Hello réseau virtuel associé à un pool doit être :</span><span class="sxs-lookup"><span data-stu-id="6ce25-561">hello VNet associated with a pool must be:</span></span>

   * <span data-ttu-id="6ce25-562">Dans hello Azure même **région** comme hello compte Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-562">In hello same Azure **region** as hello Azure Batch account.</span></span>
   * <span data-ttu-id="6ce25-563">Dans hello même **abonnement** comme hello compte Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-563">In hello same **subscription** as hello Azure Batch account.</span></span>

* <span data-ttu-id="6ce25-564">type Hello de réseau virtuel pris en charge dépend de comment les pools sont en cours allouées pour hello compte Batch :</span><span class="sxs-lookup"><span data-stu-id="6ce25-564">hello type of VNet supported depends on how pools are being allocated for hello Batch account:</span></span>

    - <span data-ttu-id="6ce25-565">Si le mode d’allocation de pool hello pour votre compte Batch a la valeur tooBatch Service, puis vous pouvez affecter un toopools seul réseau virtuel créé par hello **Configuration des Services Cloud**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-565">If hello pool allocation mode for your Batch account is set tooBatch Service, then you can assign a VNet only toopools created with hello **Cloud Services Configuration**.</span></span> <span data-ttu-id="6ce25-566">En outre, hello spécifié le que réseau virtuel doit être créé avec le modèle de déploiement classique hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-566">Additionally, hello specified VNet must be created with hello classic deployment model.</span></span> <span data-ttu-id="6ce25-567">Réseaux virtuels créés avec le modèle de déploiement du Gestionnaire de ressources Azure hello ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6ce25-567">VNets created with hello Azure Resource Manager deployment model are not supported.</span></span>
 
    - <span data-ttu-id="6ce25-568">Si le mode d’allocation de pool hello pour votre compte Batch a la valeur tooUser abonnement, puis vous pouvez affecter un toopools seul réseau virtuel créé par hello **Configuration d’ordinateur virtuel**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-568">If hello pool allocation mode for your Batch account is set tooUser Subscription, then you can assign a VNet only toopools created with hello **Virtual Machine Configuration**.</span></span> <span data-ttu-id="6ce25-569">Les pools créés avec hello **Configuration du Service Cloud** ne sont pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6ce25-569">Pools created with hello **Cloud Service Configuration** are not supported.</span></span> <span data-ttu-id="6ce25-570">Hello que réseau virtuel associé peut être créée avec le modèle de déploiement du Gestionnaire de ressources Azure hello ou de modèle de déploiement classique hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-570">hello associated VNet may be created with either hello Azure Resource Manager deployment model or hello classic deployment model.</span></span>

    <span data-ttu-id="6ce25-571">Pour une table de résumé de prise en charge du réseau virtuel selon le mode d’allocation toopool, consultez hello [mode d’allocation de Pool](#pool-allocation-mode) section.</span><span class="sxs-lookup"><span data-stu-id="6ce25-571">For a table summarizing VNet support according toopool allocation mode, see hello [Pool allocation mode](#pool-allocation-mode) section.</span></span>

* <span data-ttu-id="6ce25-572">Si mode d’allocation de pool hello pour votre compte de traitement par lots est tooBatch Service, vous devez fournir les autorisations pour hello tooaccess principal de service de traitement par lots hello réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="6ce25-572">If hello pool allocation mode for your Batch account is set tooBatch Service, then you must provide permissions for hello Batch service principal tooaccess hello VNet.</span></span> <span data-ttu-id="6ce25-573">Hello réseau virtuel doit affecter hello [Classic Virtual Machine Contributor Role-Based contrôle d’accès (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) principal du service de rôle toohello lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-573">hello VNet must assign hello [Classic Virtual Machine Contributor Role-Based Access Control (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) role toohello Batch service principal.</span></span> <span data-ttu-id="6ce25-574">Si hello spécifié n’est pas fourni de rôle RBAC, service de traitement par lots hello retourne 400 (demande incorrecte).</span><span class="sxs-lookup"><span data-stu-id="6ce25-574">If hello specified RBAC role is not provided, hello Batch service returns 400 (Bad Request).</span></span> <span data-ttu-id="6ce25-575">rôle de hello tooadd Bonjour portail Azure :</span><span class="sxs-lookup"><span data-stu-id="6ce25-575">tooadd hello role in hello Azure portal:</span></span>

    1. <span data-ttu-id="6ce25-576">Sélectionnez hello **réseau virtuel**, puis **(IAM) de contrôle d’accès** > **rôles** > **contributeur de l’ordinateur virtuel**  >  **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-576">Select hello **VNet**, then **Access control (IAM)** > **Roles** > **Virtual Machine Contributor** > **Add**.</span></span>
    2. <span data-ttu-id="6ce25-577">Sur hello **ajouter des autorisations** panneau, sélectionnez hello **contributeur de l’ordinateur virtuel** rôle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-577">On hello **Add permissions** blade, select hello **Virtual Machine Contributor** role.</span></span>
    3. <span data-ttu-id="6ce25-578">Sur hello **ajouter des autorisations** panneau, recherchez hello API de lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-578">On hello **Add permissions** blade, search for hello Batch API.</span></span> <span data-ttu-id="6ce25-579">Rechercher pour chacune de ces chaînes, à son tour jusqu'à ce que vous trouviez hello API :</span><span class="sxs-lookup"><span data-stu-id="6ce25-579">Search for each of these strings in turn until you find hello API:</span></span>
        1. <span data-ttu-id="6ce25-580">**MicrosoftAzureBatch**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-580">**MicrosoftAzureBatch**.</span></span>
        2. <span data-ttu-id="6ce25-581">**Microsoft Azure Batch**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-581">**Microsoft Azure Batch**.</span></span> <span data-ttu-id="6ce25-582">Les locataires Azure AD les plus récents peuvent utiliser ce nom.</span><span class="sxs-lookup"><span data-stu-id="6ce25-582">Newer Azure AD tenants may use this name.</span></span>
        3. <span data-ttu-id="6ce25-583">**ddbf3205-c6bd-46AE-8127-60eb93363864** ID de hello pour hello API de lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** is hello ID for hello Batch API.</span></span> 
    3. <span data-ttu-id="6ce25-584">Sélectionnez hello principal du service API de lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-584">Select hello Batch API service principal.</span></span> 
    4. <span data-ttu-id="6ce25-585">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-585">Click **Save**.</span></span>

        ![Affecter des collaborateurs de machine virtuelle rôle tooBatch service principal](./media/batch-api-basics/iam-add-role.png)


* <span data-ttu-id="6ce25-587">Hello spécifiée de sous-réseau doit avoir suffisamment libre **des adresses IP** tooaccommodate hello nombre total de nœuds cibles ; autrement dit, hello somme de hello `targetDedicatedNodes` et `targetLowPriorityNodes` propriétés d’un pool hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-587">hello specified subnet should have enough free **IP addresses** tooaccommodate hello total number of target nodes; that is, hello sum of hello `targetDedicatedNodes` and `targetLowPriorityNodes` properties of hello pool.</span></span> <span data-ttu-id="6ce25-588">Si le sous-réseau de hello n’a pas suffisamment d’adresses IP libres, hello service Batch partiellement alloue des nœuds de calcul hello dans le pool de hello et renvoie une erreur de redimensionnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-588">If hello subnet doesn't have enough free IP addresses, hello Batch service partially allocates hello compute nodes in hello pool and returns a resize error.</span></span>

* <span data-ttu-id="6ce25-589">Hello spécifié sous-réseau doive autoriser la communication à partir de hello lot service toobe tooschedule en mesure de tâches sur les nœuds de calcul hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-589">hello specified subnet must allow communication from hello Batch service toobe able tooschedule tasks on hello compute nodes.</span></span> <span data-ttu-id="6ce25-590">Si les nœuds de calcul toohello de communication est refusé par un **groupe de sécurité réseau (NSG)** associé hello réseau virtuel, puis hello service Batch définit état hello hello de nœuds de calcul trop**inutilisable**.</span><span class="sxs-lookup"><span data-stu-id="6ce25-590">If communication toohello compute nodes is denied by a **Network Security Group (NSG)** associated with hello VNet, then hello Batch service sets hello state of hello compute nodes too**unusable**.</span></span>

* <span data-ttu-id="6ce25-591">Si hello spécifié est associé à des réseaux **groupes de sécurité réseau (NSG)** et/ou un **pare-feu**, puis quelques ports système réservé doivent être activés pour les communications entrantes :</span><span class="sxs-lookup"><span data-stu-id="6ce25-591">If hello specified VNet has associated **Network Security Groups (NSGs)** and/or a **firewall**, then a few reserved system ports must be enabled for inbound communication:</span></span>

- <span data-ttu-id="6ce25-592">Pour les pools créés avec une configuration de machine virtuelle, activez les ports 29876 et 29877, ainsi que le port 22 pour Linux et le port 3389 pour Windows.</span><span class="sxs-lookup"><span data-stu-id="6ce25-592">For pools created with a virtual machine configuration, enable ports 29876 and 29877, as well as port 22 for Linux and port 3389 for Windows.</span></span> 
- <span data-ttu-id="6ce25-593">Pour les pools créés avec une configuration de service cloud, activez les ports 10100, 20100 et 30100.</span><span class="sxs-lookup"><span data-stu-id="6ce25-593">For pools created with a cloud service configuration, enable ports 10100, 20100, and 30100.</span></span> 
- <span data-ttu-id="6ce25-594">Activer les connexions sortantes tooAzure stockage sur le port 443.</span><span class="sxs-lookup"><span data-stu-id="6ce25-594">Enable outbound connections tooAzure Storage on port 443.</span></span> <span data-ttu-id="6ce25-595">Aussi, assurez-vous que votre point de terminaison de Stockage Azure peut être résolu par tous les serveurs DNS personnalisés qui traitent votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="6ce25-595">Also, ensure that your Azure Storage endpoint can be resolved by any custom DNS servers that serve your VNET.</span></span> <span data-ttu-id="6ce25-596">Plus précisément, une URL sous forme de hello `<account>.table.core.windows.net` doit pouvoir être résolu.</span><span class="sxs-lookup"><span data-stu-id="6ce25-596">Specifically, a URL of hello form `<account>.table.core.windows.net` should be resolvable.</span></span>

    <span data-ttu-id="6ce25-597">Hello tableau suivant décrit hello ports dont vous avez besoin de tooenable pour les pools que vous avez créé avec la configuration d’ordinateur virtuel hello d’entrée :</span><span class="sxs-lookup"><span data-stu-id="6ce25-597">hello following table describes hello inbound ports that you need tooenable for pools that you created with hello virtual machine configuration:</span></span>

    |    <span data-ttu-id="6ce25-598">Port(s) de destination</span><span class="sxs-lookup"><span data-stu-id="6ce25-598">Destination Port(s)</span></span>    |    <span data-ttu-id="6ce25-599">Adresse IP source</span><span class="sxs-lookup"><span data-stu-id="6ce25-599">Source IP address</span></span>      |    <span data-ttu-id="6ce25-600">Azure Batch ajoute-t-il des NSG ?</span><span class="sxs-lookup"><span data-stu-id="6ce25-600">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="6ce25-601">Requis pour toobe VM utilisable ?</span><span class="sxs-lookup"><span data-stu-id="6ce25-601">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="6ce25-602">Action que l’utilisateur doit effectuer</span><span class="sxs-lookup"><span data-stu-id="6ce25-602">Action from user</span></span>   |
    |---------------------------|---------------------------|----------------------------|-------------------------------------|-----------------------|
    |    <ul><li><span data-ttu-id="6ce25-603">Pour des pools créés avec la configuration d’ordinateur virtuel hello : 29876, 29877</span><span class="sxs-lookup"><span data-stu-id="6ce25-603">For pools created with hello virtual machine configuration: 29876, 29877</span></span></li><li><span data-ttu-id="6ce25-604">Pour des pools créés avec la configuration du service cloud hello : 10100, 20100 30100</span><span class="sxs-lookup"><span data-stu-id="6ce25-604">For pools created with hello cloud service configuration: 10100, 20100, 30100</span></span></li></ul>         |    <span data-ttu-id="6ce25-605">Adresses IP du rôle de service Batch uniquement</span><span class="sxs-lookup"><span data-stu-id="6ce25-605">Only Batch service role IP addresses</span></span> |    <span data-ttu-id="6ce25-606">Oui.</span><span class="sxs-lookup"><span data-stu-id="6ce25-606">Yes.</span></span> <span data-ttu-id="6ce25-607">Lot ajoute des groupes de sécurité réseau au niveau de hello de réseau interfaces (NIC) connectées tooVMs.</span><span class="sxs-lookup"><span data-stu-id="6ce25-607">Batch adds NSGs at hello level of network interfaces (NIC) attached tooVMs.</span></span> <span data-ttu-id="6ce25-608">Ces NSG autorisent le trafic uniquement à partir d’adresses IP du rôle de service Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-608">These NSGs allow traffic only from Batch service role IP addresses.</span></span> <span data-ttu-id="6ce25-609">Même si vous ouvrez ces ports pour tout site web de hello, du trafic de hello doit obtenir bloqué à hello carte réseau.</span><span class="sxs-lookup"><span data-stu-id="6ce25-609">Even if you open these ports for hello  entire web, hello traffic will get blocked at hello NIC.</span></span> |    <span data-ttu-id="6ce25-610">Oui</span><span class="sxs-lookup"><span data-stu-id="6ce25-610">Yes</span></span>  |  <span data-ttu-id="6ce25-611">Vous n’avez pas besoin de toospecify un groupe de sécurité réseau, car seules les adresses IP de traitement par lots permet de lot.</span><span class="sxs-lookup"><span data-stu-id="6ce25-611">You do not need toospecify an NSG, because Batch allows only Batch IP addresses.</span></span> <br /><br /> <span data-ttu-id="6ce25-612">Toutefois, si vous ne spécifiez pas de NSG, assurez-vous que ces ports sont ouverts pour le trafic entrant.</span><span class="sxs-lookup"><span data-stu-id="6ce25-612">However, if you do specify an NSG, please ensure that these ports are open for inbound traffic.</span></span> <br /><br /> <span data-ttu-id="6ce25-613">Si vous spécifiez * comme hello IP source dans votre groupe de sécurité réseau, lot ajoute toujours les groupes de sécurité réseau au niveau de hello de carte réseau attachée tooVMs.</span><span class="sxs-lookup"><span data-stu-id="6ce25-613">If you specify * as hello source IP in your NSG, Batch still adds NSGs at hello level of NIC attached tooVMs.</span></span> |
    |    <span data-ttu-id="6ce25-614">3389, 22</span><span class="sxs-lookup"><span data-stu-id="6ce25-614">3389, 22</span></span>               |    <span data-ttu-id="6ce25-615">Ordinateurs de l’utilisateur, utilisées pour le débogage, afin que vous pouvez accéder à distance hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-615">User machines, used for debugging purposes, so that you can remotely access hello VM.</span></span>    |    <span data-ttu-id="6ce25-616">Non</span><span class="sxs-lookup"><span data-stu-id="6ce25-616">No</span></span>                                    |    <span data-ttu-id="6ce25-617">Non</span><span class="sxs-lookup"><span data-stu-id="6ce25-617">No</span></span>                     |    <span data-ttu-id="6ce25-618">Ajouter des groupes de sécurité réseau toohello d’accès à distance (RDP/SSH) toopermit machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-618">Add NSGs if you want toopermit remote access (RDP/SSH) toohello VM.</span></span>   |                 

    <span data-ttu-id="6ce25-619">Hello tableau suivant décrit le port sortant hello que vous avez besoin de tooenable toopermit accès tooAzure stockage :</span><span class="sxs-lookup"><span data-stu-id="6ce25-619">hello following table describes hello outbound port that you need tooenable toopermit access tooAzure Storage:</span></span>

    |    <span data-ttu-id="6ce25-620">Port(s) sortant(s)</span><span class="sxs-lookup"><span data-stu-id="6ce25-620">Outbound Port(s)</span></span>    |    <span data-ttu-id="6ce25-621">Destination</span><span class="sxs-lookup"><span data-stu-id="6ce25-621">Destination</span></span>    |    <span data-ttu-id="6ce25-622">Azure Batch ajoute-t-il des NSG ?</span><span class="sxs-lookup"><span data-stu-id="6ce25-622">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="6ce25-623">Requis pour toobe VM utilisable ?</span><span class="sxs-lookup"><span data-stu-id="6ce25-623">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="6ce25-624">Action que l’utilisateur doit effectuer</span><span class="sxs-lookup"><span data-stu-id="6ce25-624">Action from user</span></span>    |
    |------------------------|-------------------|----------------------------|-------------------------------------|------------------------|
    |    <span data-ttu-id="6ce25-625">443</span><span class="sxs-lookup"><span data-stu-id="6ce25-625">443</span></span>    |    <span data-ttu-id="6ce25-626">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="6ce25-626">Azure Storage</span></span>    |    <span data-ttu-id="6ce25-627">Non</span><span class="sxs-lookup"><span data-stu-id="6ce25-627">No</span></span>    |    <span data-ttu-id="6ce25-628">Oui</span><span class="sxs-lookup"><span data-stu-id="6ce25-628">Yes</span></span>    |    <span data-ttu-id="6ce25-629">Si vous ajoutez des groupes de sécurité réseau, puis vérifiez que ce port est ouvert toooutbound trafic.</span><span class="sxs-lookup"><span data-stu-id="6ce25-629">If you add any NSGs, then ensure that this port is open toooutbound   traffic.</span></span>    |


## <a name="scaling-compute-resources"></a><span data-ttu-id="6ce25-630">Mise à l’échelle des ressources de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-630">Scaling compute resources</span></span>
<span data-ttu-id="6ce25-631">Avec [mise à l’échelle automatique](batch-automatic-scaling.md), vous pouvez avoir service de traitement par lots hello ajuster dynamiquement le nombre de hello de nœuds de calcul dans un pool en fonction de toohello utilisation actuelle de la charge de travail et des ressources de votre scénario de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-631">With [automatic scaling](batch-automatic-scaling.md), you can have hello Batch service dynamically adjust hello number of compute nodes in a pool according toohello current workload and resource usage of your compute scenario.</span></span> <span data-ttu-id="6ce25-632">Cela vous permet de toolower hello coût global de l’exécution de votre application en utilisant uniquement les ressources hello que vous avez besoin, et celles libération vous n’avez pas besoin.</span><span class="sxs-lookup"><span data-stu-id="6ce25-632">This allows you toolower hello overall cost of running your application by using only hello resources you need, and releasing those you don't need.</span></span>

<span data-ttu-id="6ce25-633">Pour activer la mise à l’échelle automatique, écrivez une [formule de mise à l’échelle automatique](batch-automatic-scaling.md#automatic-scaling-formulas) et associez-la à un pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-633">You enable automatic scaling by writing an [automatic scaling formula](batch-automatic-scaling.md#automatic-scaling-formulas) and associating that formula with a pool.</span></span> <span data-ttu-id="6ce25-634">Hello service Batch utilise hello toodetermine formule hello cible différents nœuds dans le pool de hello pour l’intervalle de mise à l’échelle suivant hello (intervalle que vous pouvez configurer).</span><span class="sxs-lookup"><span data-stu-id="6ce25-634">hello Batch service uses hello formula toodetermine hello target number of nodes in hello pool for hello next scaling interval (an interval that you can configure).</span></span> <span data-ttu-id="6ce25-635">Vous pouvez spécifier les paramètres de mise à l’échelle automatique hello pour un pool lorsque vous créez ou activez la mise à l’échelle sur un pool de versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="6ce25-635">You can specify hello automatic scaling settings for a pool when you create it, or enable scaling on a pool later.</span></span> <span data-ttu-id="6ce25-636">Vous pouvez également mettre à jour hello mise à l’échelle des paramètres sur un pool activée à la mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="6ce25-636">You can also update hello scaling settings on a scaling-enabled pool.</span></span>

<span data-ttu-id="6ce25-637">Par exemple, peut-être un travail nécessite que vous envoyez un très grand nombre de toobe de tâches exécutée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-637">As an example, perhaps a job requires that you submit a very large number of tasks toobe executed.</span></span> <span data-ttu-id="6ce25-638">Vous pouvez affecter un pool toohello formule mise à l’échelle qui s’adapte nombre hello de nœuds dans le pool de hello basée sur le nombre actuel de hello de tâches en file d’attente et le taux d’achèvement hello de tâches hello travail de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-638">You can assign a scaling formula toohello pool that adjusts hello number of nodes in hello pool based on hello current number of queued tasks and hello completion rate of hello tasks in hello job.</span></span> <span data-ttu-id="6ce25-639">Hello service Batch régulièrement évalue la formule de hello et peut être redimensionné pool hello, en fonction de la charge de travail et d’autres paramètres de formule.</span><span class="sxs-lookup"><span data-stu-id="6ce25-639">hello Batch service periodically evaluates hello formula and resizes hello pool, based on workload and your other formula settings.</span></span> <span data-ttu-id="6ce25-640">Hello service ajoute des nœuds si nécessaire lorsqu’il existe un grand nombre de tâches en file d’attente et supprime les nœuds lorsqu’il n’y a aucune tâche en file d’attente ou en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-640">hello service adds nodes as needed when there are a large number of queued tasks, and removes nodes when there are no queued or running tasks.</span></span>

<span data-ttu-id="6ce25-641">Une formule de mise à l’échelle peut être basée sur hello suivant des métriques :</span><span class="sxs-lookup"><span data-stu-id="6ce25-641">A scaling formula can be based on hello following metrics:</span></span>

* <span data-ttu-id="6ce25-642">**Métriques temporelles** basées sur les statistiques collectées toutes les cinq minutes dans hello spécifié nombre d’heures.</span><span class="sxs-lookup"><span data-stu-id="6ce25-642">**Time metrics** are based on statistics collected every five minutes in hello specified number of hours.</span></span>
* <span data-ttu-id="6ce25-643">**mesures de ressources** sont basées sur l’utilisation du processeur, de la bande passante et de la mémoire, et sur le nombre de nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-643">**Resource metrics** are based on CPU usage, bandwidth usage, memory usage, and number of nodes.</span></span>
* <span data-ttu-id="6ce25-644">Les **mesures de tâches** sont basées sur l’état de la tâche, tel que *Active* (en file d’attente), *En cours d’exécution* ou *Terminée*.</span><span class="sxs-lookup"><span data-stu-id="6ce25-644">**Task metrics** are based on task state, such as *Active* (queued), *Running*, or *Completed*.</span></span>

<span data-ttu-id="6ce25-645">Lors de la mise à l’échelle automatique de diminue le nombre de hello de nœuds de calcul dans un pool, vous devez considérer comment toohandle les tâches qui sont en cours d’exécution au moment de hello Hello diminuer opération.</span><span class="sxs-lookup"><span data-stu-id="6ce25-645">When automatic scaling decreases hello number of compute nodes in a pool, you must consider how toohandle tasks that are running at hello time of hello decrease operation.</span></span> <span data-ttu-id="6ce25-646">tooaccommodate, lot fournit un *option désallocation de nœud* que vous pouvez inclure dans vos formules.</span><span class="sxs-lookup"><span data-stu-id="6ce25-646">tooaccommodate this, Batch provides a *node deallocation option* that you can include in your formulas.</span></span> <span data-ttu-id="6ce25-647">Par exemple, vous pouvez spécifier que les tâches en cours d’exécution sont arrêtés immédiatement, arrêtés immédiatement et puis remis pour l’exécution sur un autre nœud ou autorisés toofinish avant le nœud de hello est supprimée hello pool.</span><span class="sxs-lookup"><span data-stu-id="6ce25-647">For example, you can specify that running tasks are stopped immediately, stopped immediately and then requeued for execution on another node, or allowed toofinish before hello node is removed from hello pool.</span></span>

<span data-ttu-id="6ce25-648">Pour plus d’informations sur la mise à l’échelle automatique d’une application, consultez la section [Mettre automatiquement à l’échelle les nœuds de calcul dans un pool Azure Batch](batch-automatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-648">For more information about automatically scaling an application, see [Automatically scale compute nodes in an Azure Batch pool](batch-automatic-scaling.md).</span></span>

> [!TIP]
> <span data-ttu-id="6ce25-649">toomaximize l’utilisation des ressources de calcul, définir le nombre de cibles de hello de nœuds toozero à fin hello d’un travail, mais autoriser toofinish de tâches en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-649">toomaximize compute resource utilization, set hello target number of nodes toozero at hello end of a job, but allow running tasks toofinish.</span></span>
>
>

## <a name="security-with-certificates"></a><span data-ttu-id="6ce25-650">Sécurité avec certificats</span><span class="sxs-lookup"><span data-stu-id="6ce25-650">Security with certificates</span></span>
<span data-ttu-id="6ce25-651">En règle générale, vous devez toouse certificats lorsque vous chiffrez ou déchiffrer des informations sensibles pour les tâches, comme la clé hello pour un [compte de stockage Azure][azure_storage].</span><span class="sxs-lookup"><span data-stu-id="6ce25-651">You typically need toouse certificates when you encrypt or decrypt sensitive information for tasks, like hello key for an [Azure Storage account][azure_storage].</span></span> <span data-ttu-id="6ce25-652">toosupport, vous pouvez installer des certificats sur les nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-652">toosupport this, you can install certificates on nodes.</span></span> <span data-ttu-id="6ce25-653">Les secrets chiffrés sont passées de tootasks via des paramètres de ligne de commande ou incorporés dans une des ressources de la tâche hello et les certificats de hello installé peuvent être utilisé toodecrypt les.</span><span class="sxs-lookup"><span data-stu-id="6ce25-653">Encrypted secrets are passed tootasks via command-line parameters or embedded in one of hello task resources, and hello installed certificates can be used toodecrypt them.</span></span>

<span data-ttu-id="6ce25-654">Vous utilisez hello [ajouter un certificat] [ rest_add_cert] opération (lot reste) ou [CertificateOperations.CreateCertificate] [ net_create_cert] (méthode) (lot .NET) tooadd un tooa de certificat du compte Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-654">You use hello [Add certificate][rest_add_cert] operation (Batch REST) or [CertificateOperations.CreateCertificate][net_create_cert] method (Batch .NET) tooadd a certificate tooa Batch account.</span></span> <span data-ttu-id="6ce25-655">Vous pouvez ensuite associer hello certificat un pool existant ou nouveau.</span><span class="sxs-lookup"><span data-stu-id="6ce25-655">You can then associate hello certificate with a new or existing pool.</span></span> <span data-ttu-id="6ce25-656">Lorsqu’un certificat est associé à un pool, hello service Batch installe le certificat de hello sur chaque nœud dans le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-656">When a certificate is associated with a pool, hello Batch service installs hello certificate on each node in hello pool.</span></span> <span data-ttu-id="6ce25-657">Hello service Batch certificats hello appropriée au démarrage de nœud de hello, avant de lancer des tâches (y compris la tâche de démarrage hello et la tâche du gestionnaire).</span><span class="sxs-lookup"><span data-stu-id="6ce25-657">hello Batch service installs hello appropriate certificates when hello node starts up, before launching any tasks (including hello start task and job manager task).</span></span>

<span data-ttu-id="6ce25-658">Si vous ajoutez des certificats tooan *existant* pool, vous devez redémarrer les nœuds de calcul de hello certificats toobe appliqué toohello nœuds.</span><span class="sxs-lookup"><span data-stu-id="6ce25-658">If you add certificates tooan *existing* pool, you must reboot its compute nodes for hello certificates toobe applied toohello nodes.</span></span>

## <a name="error-handling"></a><span data-ttu-id="6ce25-659">Gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="6ce25-659">Error handling</span></span>
<span data-ttu-id="6ce25-660">Il peut s’avérer nécessaire toohandle les échecs de tâche et application dans votre solution de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-660">You might find it necessary toohandle both task and application failures within your Batch solution.</span></span>

### <a name="task-failure-handling"></a><span data-ttu-id="6ce25-661">Gestion des échecs de tâche</span><span class="sxs-lookup"><span data-stu-id="6ce25-661">Task failure handling</span></span>
<span data-ttu-id="6ce25-662">Les échecs de tâche peuvent être classés suivant les catégories suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ce25-662">Task failures fall into these categories:</span></span>

* <span data-ttu-id="6ce25-663">**Échecs de prétraitement**</span><span class="sxs-lookup"><span data-stu-id="6ce25-663">**Pre-processing failures**</span></span>

    <span data-ttu-id="6ce25-664">Si une tâche échoue toostart, une erreur de prétraitement est définie pour la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-664">If a task fails toostart, a pre-processing error is set for hello task.</span></span>  

    <span data-ttu-id="6ce25-665">Erreurs de pré-traitement peut se produire si les fichiers de ressources de la tâche hello ont déplacé, hello compte de stockage n’est plus disponible ou un autre problème a été rencontré que hello empêché réussie copie des fichiers toohello nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-665">Pre-processing errors can occur if hello task's resource files have moved, hello Storage account is no longer available, or another issue was encountered that prevented hello successful copying of files toohello node.</span></span>

* <span data-ttu-id="6ce25-666">**Échecs de chargement de fichier**</span><span class="sxs-lookup"><span data-stu-id="6ce25-666">**File upload failures**</span></span>

    <span data-ttu-id="6ce25-667">Si le téléchargement de fichiers qui sont spécifiés pour une tâche échoue pour une raison quelconque, une erreur de téléchargement de fichier est définie pour la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-667">If uploading files that are specified for a task fails for any reason, a file upload error is set for hello task.</span></span>

    <span data-ttu-id="6ce25-668">Erreurs peuvent se produire si hello SAS fournis pour accéder à un stockage Azure n’est pas valide ou ne fournit pas d’autorisations en écriture, si le compte de stockage hello n’est plus disponible, ou si un autre problème a été rencontré et qu’il a empêché hello réussie de copie de fichiers à partir de téléchargement de fichier nœud de Hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-668">File upload errors can occur if hello SAS supplied for accessing Azure Storage is invalid or does not provide write permissions, if hello storage account is no longer available, or if another issue was encountered that prevented hello successful copying of files from hello node.</span></span>    

* <span data-ttu-id="6ce25-669">**Échecs d’application**</span><span class="sxs-lookup"><span data-stu-id="6ce25-669">**Application failures**</span></span>

    <span data-ttu-id="6ce25-670">Hello spécifié par la ligne de commande de la tâche hello peut également échouer.</span><span class="sxs-lookup"><span data-stu-id="6ce25-670">hello process that is specified by hello task's command line can also fail.</span></span> <span data-ttu-id="6ce25-671">Hello processus est considéré comme toohave a échoué lors d’un code de sortie différent de zéro est retourné par le processus de hello est exécutée par la tâche hello (consultez *les codes de sortie de tâche* dans la section suivante de hello).</span><span class="sxs-lookup"><span data-stu-id="6ce25-671">hello process is deemed toohave failed when a nonzero exit code is returned by hello process that is executed by hello task (see *Task exit codes* in hello next section).</span></span>

    <span data-ttu-id="6ce25-672">Pour les défaillances d’application, vous pouvez configurer le lot tâche hello tooa tooautomatically réessayer un nombre spécifié de fois.</span><span class="sxs-lookup"><span data-stu-id="6ce25-672">For application failures, you can configure Batch tooautomatically retry hello task up tooa specified number of times.</span></span>

* <span data-ttu-id="6ce25-673">**Échecs de contrainte**</span><span class="sxs-lookup"><span data-stu-id="6ce25-673">**Constraint failures**</span></span>

    <span data-ttu-id="6ce25-674">Vous pouvez définir une contrainte qui spécifie durée maximale d’exécution de hello pour un travail ou une tâche, hello *maxWallClockTime*.</span><span class="sxs-lookup"><span data-stu-id="6ce25-674">You can set a constraint that specifies hello maximum execution duration for a job or task, hello *maxWallClockTime*.</span></span> <span data-ttu-id="6ce25-675">Cela peut être utile pour les tâches non tooprogress conformes à la fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6ce25-675">This can be useful for terminating tasks that fail tooprogress.</span></span>

    <span data-ttu-id="6ce25-676">Lorsque la durée maximale hello a été dépassée, la tâche hello est marqué comme *terminé*, mais le code de sortie hello est défini trop`0xC000013A` et hello *schedulingError* champ est marqué comme `{ category:"ServerError", code="TaskEnded"}`.</span><span class="sxs-lookup"><span data-stu-id="6ce25-676">When hello maximum amount of time has been exceeded, hello task is marked as *completed*, but hello exit code is set too`0xC000013A` and hello *schedulingError* field is marked as `{ category:"ServerError", code="TaskEnded"}`.</span></span>

### <a name="debugging-application-failures"></a><span data-ttu-id="6ce25-677">Débogage des échecs d’application</span><span class="sxs-lookup"><span data-stu-id="6ce25-677">Debugging application failures</span></span>
* <span data-ttu-id="6ce25-678">`stderr` et `stdout`</span><span class="sxs-lookup"><span data-stu-id="6ce25-678">`stderr` and `stdout`</span></span>

    <span data-ttu-id="6ce25-679">Pendant l’exécution, une application risque de produire une sortie de diagnostic que vous pouvez utiliser tootroubleshoot problèmes.</span><span class="sxs-lookup"><span data-stu-id="6ce25-679">During execution, an application might produce diagnostic output that you can use tootroubleshoot issues.</span></span> <span data-ttu-id="6ce25-680">Comme mentionné dans hello à la section précédente [fichiers et répertoires](#files-and-directories), hello service Batch écrit la sortie standard et l’erreur standard de sortie trop`stdout.txt` et `stderr.txt` nœud de calcul des fichiers dans le répertoire de tâche hello sur hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-680">As mentioned in hello earlier section [Files and directories](#files-and-directories), hello Batch service writes standard output and standard error output too`stdout.txt` and `stderr.txt` files in hello task directory on hello compute node.</span></span> <span data-ttu-id="6ce25-681">Vous pouvez utiliser hello portail Azure ou l’un des toodownload de kits de développement logiciel lot hello ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="6ce25-681">You can use hello Azure portal or one of hello Batch SDKs toodownload these files.</span></span> <span data-ttu-id="6ce25-682">Par exemple, vous pouvez récupérer ces autres fichiers et à des fins de dépannage à l’aide de [ComputeNode.GetNodeFile] [ net_getfile_node] et [CloudTask.GetNodeFile] [ net_getfile_task] dans la bibliothèque de lot .NET hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-682">For example, you can retrieve these and other files for troubleshooting purposes by using [ComputeNode.GetNodeFile][net_getfile_node] and [CloudTask.GetNodeFile][net_getfile_task] in hello Batch .NET library.</span></span>

* <span data-ttu-id="6ce25-683">**Codes de sortie de tâche**</span><span class="sxs-lookup"><span data-stu-id="6ce25-683">**Task exit codes**</span></span>

    <span data-ttu-id="6ce25-684">Comme mentionné précédemment, une tâche est marquée comme ayant échoué par le service de traitement par lots hello si les processus hello qui sont exécutée par la tâche hello retourne un code de sortie différent de zéro.</span><span class="sxs-lookup"><span data-stu-id="6ce25-684">As mentioned earlier, a task is marked as failed by hello Batch service if hello process that is executed by hello task returns a nonzero exit code.</span></span> <span data-ttu-id="6ce25-685">Lorsqu’une tâche exécute un processus, lot remplit la propriété de code de sortie de la tâche hello avec hello *renvoie le code d’un processus de hello*.</span><span class="sxs-lookup"><span data-stu-id="6ce25-685">When a task executes a process, Batch populates hello task's exit code property with hello *return code of hello process*.</span></span> <span data-ttu-id="6ce25-686">Il est important toonote que le code de sortie d’une tâche est **pas** déterminé par hello service Batch.</span><span class="sxs-lookup"><span data-stu-id="6ce25-686">It is important toonote that a task's exit code is **not** determined by hello Batch service.</span></span> <span data-ttu-id="6ce25-687">Le code de sortie d’une tâche est déterminé par les processus hello lui-même ou système d’exploitation de hello sur les processus hello exécuté.</span><span class="sxs-lookup"><span data-stu-id="6ce25-687">A task's exit code is determined by hello process itself or hello operating system on which hello process executed.</span></span>

### <a name="accounting-for-task-failures-or-interruptions"></a><span data-ttu-id="6ce25-688">Prise en compte des échecs ou des interruptions de tâche</span><span class="sxs-lookup"><span data-stu-id="6ce25-688">Accounting for task failures or interruptions</span></span>
<span data-ttu-id="6ce25-689">Les tâches peuvent parfois échouer ou être interrompues.</span><span class="sxs-lookup"><span data-stu-id="6ce25-689">Tasks might occasionally fail or be interrupted.</span></span> <span data-ttu-id="6ce25-690">Hello tâche application lui-même peut échouer, nœud hello sur quel hello tâche est en cours d’exécution peut être redémarré ou hello nœud peut être supprimé à partir du pool de hello pendant une opération de redimensionnement si hello stratégie de désallocation du pool est ensemble des nœuds de tooremove immédiatement sans attendre toofinish de tâches.</span><span class="sxs-lookup"><span data-stu-id="6ce25-690">hello task application itself might fail, hello node on which hello task is running might be rebooted, or hello node might be removed from hello pool during a resize operation if hello pool's deallocation policy is set tooremove nodes immediately without waiting for tasks toofinish.</span></span> <span data-ttu-id="6ce25-691">Dans tous les cas, tâche hello permettre être automatiquement remis par lot pour l’exécution sur un autre nœud.</span><span class="sxs-lookup"><span data-stu-id="6ce25-691">In all cases, hello task can be automatically requeued by Batch for execution on another node.</span></span>

<span data-ttu-id="6ce25-692">Il est également possible pour un problème intermittent de toocause un toohang de tâche ou prendre tooexecute trop long.</span><span class="sxs-lookup"><span data-stu-id="6ce25-692">It is also possible for an intermittent issue toocause a task toohang or take too long tooexecute.</span></span> <span data-ttu-id="6ce25-693">Vous pouvez définir l’intervalle d’exécution maximale hello pour une tâche.</span><span class="sxs-lookup"><span data-stu-id="6ce25-693">You can set hello maximum execution interval for a task.</span></span> <span data-ttu-id="6ce25-694">Si l’intervalle de salutation d’exécution maximale est dépassée, hello service Batch interrompt l’application de tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-694">If hello maximum execution interval is exceeded, hello Batch service interrupts hello task application.</span></span>

### <a name="connecting-toocompute-nodes"></a><span data-ttu-id="6ce25-695">Connexion toocompute nœuds</span><span class="sxs-lookup"><span data-stu-id="6ce25-695">Connecting toocompute nodes</span></span>
<span data-ttu-id="6ce25-696">Vous pouvez effectuer la résolution des problèmes en vous connectant à distance tooa de nœud de calcul et de débogage supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="6ce25-696">You can perform additional debugging and troubleshooting by signing in tooa compute node remotely.</span></span> <span data-ttu-id="6ce25-697">Vous pouvez utiliser hello toodownload portail Azure un fichier de protocole RDP (Remote Desktop) pour les nœuds de Windows et obtenir des informations de connexion Secure Shell (SSH) pour des nœuds Linux.</span><span class="sxs-lookup"><span data-stu-id="6ce25-697">You can use hello Azure portal toodownload a Remote Desktop Protocol (RDP) file for Windows nodes and obtain Secure Shell (SSH) connection information for Linux nodes.</span></span> <span data-ttu-id="6ce25-698">Également procéder à l’aide de hello API de lot--par exemple, avec [Batch .NET] [ net_rdpfile] ou [lot Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span><span class="sxs-lookup"><span data-stu-id="6ce25-698">You can also do this by using hello Batch APIs--for example, with [Batch .NET][net_rdpfile] or [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6ce25-699">nœud de tooa tooconnect via RDP ou SSH, vous devez d’abord créer un utilisateur sur le nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-699">tooconnect tooa node via RDP or SSH, you must first create a user on hello node.</span></span> <span data-ttu-id="6ce25-700">toodo, vous pouvez utiliser le portail Azure, de hello [ajouter un nœud tooa du compte utilisateur] [ rest_create_user] hello API REST de traitement par lots, d’appeler hello [ComputeNode.CreateComputeNodeUser] [ net_create_user] méthode en lot .NET ou appel hello [ajouter un utilisateur] [ py_add_user] méthode dans le module de traitement par lots Python hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-700">toodo this, you can use hello Azure portal, [add a user account tooa node][rest_create_user] by using hello Batch REST API, call hello [ComputeNode.CreateComputeNodeUser][net_create_user] method in Batch .NET, or call hello [add_user][py_add_user] method in hello Batch Python module.</span></span>
>
>

### <a name="troubleshooting-problematic-compute-nodes"></a><span data-ttu-id="6ce25-701">Résolution des problèmes liés aux nœuds de calcul</span><span class="sxs-lookup"><span data-stu-id="6ce25-701">Troubleshooting problematic compute nodes</span></span>
<span data-ttu-id="6ce25-702">Dans les cas où certaines tâches échouent, votre application cliente de lot ou d’un service peut examiner des métadonnées de hello de hello échoué des tâches tooidentify un nœud d’un dysfonctionnement.</span><span class="sxs-lookup"><span data-stu-id="6ce25-702">In situations where some of your tasks are failing, your Batch client application or service can examine hello metadata of hello failed tasks tooidentify a misbehaving node.</span></span> <span data-ttu-id="6ce25-703">Chaque nœud dans un pool est donnée à un ID unique, et nœud hello sur lequel s’exécute une tâche est inclus dans les métadonnées de tâche hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-703">Each node in a pool is given a unique ID, and hello node on which a task runs is included in hello task metadata.</span></span> <span data-ttu-id="6ce25-704">Une fois que vous avez identifié le nœud présentant un problème, vous pouvez effectuer les actions suivantes :</span><span class="sxs-lookup"><span data-stu-id="6ce25-704">After you've identified a problem node, you can take several actions with it:</span></span>

* <span data-ttu-id="6ce25-705">**Redémarrer le nœud de hello** ([reste][rest_reboot] | [.NET][net_reboot])</span><span class="sxs-lookup"><span data-stu-id="6ce25-705">**Reboot hello node** ([REST][rest_reboot] | [.NET][net_reboot])</span></span>

    <span data-ttu-id="6ce25-706">Nœud de hello redémarrage peut parfois effacer latentes problèmes tels que les processus bloqués ou bloqués.</span><span class="sxs-lookup"><span data-stu-id="6ce25-706">Restarting hello node can sometimes clear up latent issues like stuck or crashed processes.</span></span> <span data-ttu-id="6ce25-707">Notez que si votre pool utilise une tâche de démarrage ou de votre projet utilise une tâche de préparation du projet, elles sont exécutées lorsque le nœud de hello redémarre.</span><span class="sxs-lookup"><span data-stu-id="6ce25-707">Note that if your pool uses a start task or your job uses a job preparation task, they are executed when hello node restarts.</span></span>
* <span data-ttu-id="6ce25-708">**Créer une nouvelle image de nœud de hello** ([reste][rest_reimage] | [.NET][net_reimage])</span><span class="sxs-lookup"><span data-stu-id="6ce25-708">**Reimage hello node** ([REST][rest_reimage] | [.NET][net_reimage])</span></span>

    <span data-ttu-id="6ce25-709">Cela réinstalle le système d’exploitation de hello sur le nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-709">This reinstalls hello operating system on hello node.</span></span> <span data-ttu-id="6ce25-710">Comme avec un nœud en cours de redémarrage, démarrer des tâches et les tâches de préparation de travail sont réexécutés après que le nœud de hello a été réinitialisée.</span><span class="sxs-lookup"><span data-stu-id="6ce25-710">As with rebooting a node, start tasks and job preparation tasks are rerun after hello node has been reimaged.</span></span>
* <span data-ttu-id="6ce25-711">**Supprimer un nœud de hello à partir du pool de hello** ([reste][rest_remove] | [.NET][net_remove])</span><span class="sxs-lookup"><span data-stu-id="6ce25-711">**Remove hello node from hello pool** ([REST][rest_remove] | [.NET][net_remove])</span></span>

    <span data-ttu-id="6ce25-712">Il est parfois nécessaire toocompletely supprimer un nœud à partir du pool de hello hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-712">Sometimes it is necessary toocompletely remove hello node from hello pool.</span></span>
* <span data-ttu-id="6ce25-713">**Désactiver la planification des tâches sur le nœud de hello** ([reste][rest_offline] | [.NET][net_offline])</span><span class="sxs-lookup"><span data-stu-id="6ce25-713">**Disable task scheduling on hello node** ([REST][rest_offline] | [.NET][net_offline])</span></span>

    <span data-ttu-id="6ce25-714">Cela efficacement prend hello nœud hors connexion afin qu’aucune autre tâche assignés tooit, mais permet l’exécution de tooremain hello nœud et dans le pool de hello.</span><span class="sxs-lookup"><span data-stu-id="6ce25-714">This effectively takes hello node offline so that no further tasks are assigned tooit, but allows hello node tooremain running and in hello pool.</span></span> <span data-ttu-id="6ce25-715">Ainsi, vous tooperform une analyse approfondie à cause de hello d’échecs de hello sans perte de données de la tâche ayant échoué hello et sans nœud hello à l’origine des échecs des tâches supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="6ce25-715">This enables you tooperform further investigation into hello cause of hello failures without losing hello failed task's data, and without hello node causing additional task failures.</span></span> <span data-ttu-id="6ce25-716">Par exemple, vous pouvez désactiver la planification des tâches sur le nœud de hello, puis [se connecter à distance](#connecting-to-compute-nodes) tooexamine hello des journaux des événements du nœud ou autres résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="6ce25-716">For example, you can disable task scheduling on hello node, then [sign in remotely](#connecting-to-compute-nodes) tooexamine hello node's event logs or perform other troubleshooting.</span></span> <span data-ttu-id="6ce25-717">Une fois que vous avez terminé votre examen, vous remettez en ligne les nœud hello en activant la planification des tâches ([reste][rest_online] | [.NET] [ net_online]), ou un des hello effectuer d’autres actions abordées précédemment.</span><span class="sxs-lookup"><span data-stu-id="6ce25-717">After you've finished your investigation, you can then bring hello node back online by enabling task scheduling ([REST][rest_online] | [.NET][net_online]), or perform one of hello other actions discussed earlier.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6ce25-718">Avec chaque action qui est décrite dans cette section--redémarrer, réinitialisation, supprimer et désactiver la planification des tâches--vous êtes en mesure de toospecify comment sont gérées les tâches en cours d’exécution sur le nœud de hello lorsque vous exécutez hello action.</span><span class="sxs-lookup"><span data-stu-id="6ce25-718">With each action that is described in this section--reboot, reimage, remove, and disable task scheduling--you are able toospecify how tasks currently running on hello node are handled when you perform hello action.</span></span> <span data-ttu-id="6ce25-719">Par exemple, lorsque vous désactivez planification des tâches sur un nœud à l’aide de la bibliothèque cliente .NET de la lot hello, vous pouvez spécifier un [DisableComputeNodeSchedulingOption] [ net_offline_option] toospecify valeur d’énumération si trop**Terminate** en cours d’exécution des tâches, **replacez** pour la planification sur d’autres nœuds, ou autoriser toocomplete de tâches en cours d’exécution avant d’effectuer l’action de hello (**TaskCompletion**).</span><span class="sxs-lookup"><span data-stu-id="6ce25-719">For example, when you disable task scheduling on a node by using hello Batch .NET client library, you can specify a [DisableComputeNodeSchedulingOption][net_offline_option] enum value toospecify whether too**Terminate** running tasks, **Requeue** them for scheduling on other nodes, or allow running tasks toocomplete before performing hello action (**TaskCompletion**).</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="6ce25-720">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="6ce25-720">Next steps</span></span>
* <span data-ttu-id="6ce25-721">En savoir plus sur hello [outils et API de lot](batch-apis-tools.md) disponibles pour la création de solutions de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-721">Learn about hello [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="6ce25-722">Parcourir une application de traitement par lots exemple étape par étape, [prise en main hello bibliothèque Azure Batch pour .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-722">Walk through a sample Batch application step-by-step in [Get started with hello Azure Batch Library for .NET](batch-dotnet-get-started.md).</span></span> <span data-ttu-id="6ce25-723">Il existe également un [version Python](batch-python-tutorial.md) de didacticiel hello qui exécute une charge de travail sur Linux des nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="6ce25-723">There is also a [Python version](batch-python-tutorial.md) of hello tutorial that runs a workload on Linux compute nodes.</span></span>
* <span data-ttu-id="6ce25-724">Télécharger et générer hello [lot Explorer] [ github_batchexplorer] exemple de projet pour une utilisation lors du développement de vos solutions de traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-724">Download and build hello [Batch Explorer][github_batchexplorer] sample project for use while you develop your Batch solutions.</span></span> <span data-ttu-id="6ce25-725">Hello Explorer de lot, vous pouvez d’effectuer hello suivante et bien plus encore :</span><span class="sxs-lookup"><span data-stu-id="6ce25-725">Using hello Batch Explorer, you can perform hello following and more:</span></span>

  * <span data-ttu-id="6ce25-726">Analysez et manipulez les pools, les travaux et les tâches au sein de votre compte Batch</span><span class="sxs-lookup"><span data-stu-id="6ce25-726">Monitor and manipulate pools, jobs, and tasks within your Batch account</span></span>
  * <span data-ttu-id="6ce25-727">Téléchargez `stdout.txt`, `stderr.txt` et d’autres fichiers à partir des nœuds</span><span class="sxs-lookup"><span data-stu-id="6ce25-727">Download `stdout.txt`, `stderr.txt`, and other files from nodes</span></span>
  * <span data-ttu-id="6ce25-728">Créez des utilisateurs sur les nœuds et téléchargez les fichiers RDP pour la connexion à distance</span><span class="sxs-lookup"><span data-stu-id="6ce25-728">Create users on nodes and download RDP files for remote login</span></span>
* <span data-ttu-id="6ce25-729">Découvrez comment trop[créer des pools de nœuds de calcul Linux](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="6ce25-729">Learn how too[create pools of Linux compute nodes](batch-linux-nodes.md).</span></span>
* <span data-ttu-id="6ce25-730">Visitez hello [forum d’Azure Batch] [ batch_forum] sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="6ce25-730">Visit hello [Azure Batch forum][batch_forum] on MSDN.</span></span> <span data-ttu-id="6ce25-731">forum de Hello est une bonne placer tooask questions, si vous apprenez simplement ou que vous êtes un expert dans à l’aide du traitement par lots.</span><span class="sxs-lookup"><span data-stu-id="6ce25-731">hello forum is a good place tooask questions, whether you are just learning or are an expert in using Batch.</span></span>

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/
