---
title: "aaaUpgrade à partir des Services mobiles tooAzure du Service d’applications"
description: "Découvrez comment tooeasily mettre à niveau votre tooan d’application Mobile Services application de Service d’applications mobiles"
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 2b75a1b824e8ef0d36c9053f2f19af051479f928
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-tooapp-service"></a><span data-ttu-id="8bd31-103">Mettre à niveau votre tooApp .NET Azure Mobile Service existant Service</span><span class="sxs-lookup"><span data-stu-id="8bd31-103">Upgrade your existing .NET Azure Mobile Service tooApp Service</span></span>
<span data-ttu-id="8bd31-104">Service d’application Mobile est une nouvelle façon toobuild applications mobiles à l’aide de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8bd31-104">App Service Mobile is a new way toobuild mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="8bd31-105">toolearn, voir [quelles sont les applications mobiles ?].</span><span class="sxs-lookup"><span data-stu-id="8bd31-105">toolearn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="8bd31-106">Cette rubrique décrit comment tooupgrade une application de serveur principal .NET existante à partir d’Azure Mobile Services tooa nouvelle App Service Mobile Apps.</span><span class="sxs-lookup"><span data-stu-id="8bd31-106">This topic describes how tooupgrade an existing .NET backend application from Azure Mobile Services tooa new App Service Mobile Apps.</span></span> <span data-ttu-id="8bd31-107">Lorsque vous exécutez cette mise à niveau, votre application Mobile Services existante peut continuer toooperate.</span><span class="sxs-lookup"><span data-stu-id="8bd31-107">While you perform this upgrade, your existing Mobile Services application can continue toooperate.</span></span>   <span data-ttu-id="8bd31-108">Si vous devez tooupgrade une application principale de Node.js, consultez trop[la mise à niveau vos Services mobiles de Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="8bd31-108">If you need tooupgrade a Node.js backend application, refer too[Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="8bd31-109">Une fois un service principal mobile tooAzure mis à niveau du Service d’applications, il a tooall d’accès aux fonctionnalités du Service de l’application et sont facturés en fonction de trop[tarification du Service d’applications], pas les Services mobiles de tarification.</span><span class="sxs-lookup"><span data-stu-id="8bd31-109">When a mobile backend is upgraded tooAzure App Service, it has access tooall App Service features and are billed according too[App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="8bd31-110">Migration et mise à niveau</span><span class="sxs-lookup"><span data-stu-id="8bd31-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="8bd31-111">Il est recommandé d’ [effectuer une migration](app-service-mobile-migrating-from-mobile-services.md) avant une mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="8bd31-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="8bd31-112">De cette manière, vous pouvez placer les deux versions de votre application hello même un Plan App Service et entraîner une baisse sans coût supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="8bd31-112">This way, you can put both versions of your application on hello same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="8bd31-113">Améliorations du Kit de développement logiciel (SDK) serveur .NET Mobile Apps</span><span class="sxs-lookup"><span data-stu-id="8bd31-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="8bd31-114">La mise à niveau toohello nouvelle [SDK des applications mobiles](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) fournit hello avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="8bd31-114">Upgrading toohello new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides hello following benefits:</span></span>

* <span data-ttu-id="8bd31-115">Plus de flexibilité sur les dépendances NuGet.</span><span class="sxs-lookup"><span data-stu-id="8bd31-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="8bd31-116">Hello environnement d’hébergement n’est plus fournit sa propre version des packages NuGet, vous pouvez utiliser les autres versions compatibles.</span><span class="sxs-lookup"><span data-stu-id="8bd31-116">hello hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="8bd31-117">Toutefois, s’il existe de nouvelles bugfixes critique ou toohello de mises à jour de sécurité Mobile serveur SDK ou dépendances, vous devez mettre à jour manuellement votre service.</span><span class="sxs-lookup"><span data-stu-id="8bd31-117">However, if there are new critical bugfixes or security updates toohello Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="8bd31-118">Plus de souplesse dans hello mobile SDK.</span><span class="sxs-lookup"><span data-stu-id="8bd31-118">More flexibility in hello mobile SDK.</span></span> <span data-ttu-id="8bd31-119">Vous pouvez contrôler explicitement les fonctionnalités et les itinéraires sont configurés, telles que l’authentification, API, de table et hello du point de terminaison par émission de données d’inscription.</span><span class="sxs-lookup"><span data-stu-id="8bd31-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and hello push registration endpoint.</span></span> <span data-ttu-id="8bd31-120">toolearn, voir [comment toouse hello .NET server SDK pour les applications mobiles Azure](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="8bd31-120">toolearn more, see [How toouse hello .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="8bd31-121">Prise en charge d'autres itinéraires et types de projets ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8bd31-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="8bd31-122">Vous pouvez maintenant héberger contrôleurs MVC et les API Web Bonjour même projet comme projet de service principal mobile.</span><span class="sxs-lookup"><span data-stu-id="8bd31-122">You can now host MVC and Web API controllers in hello same project as your mobile backend project.</span></span>
* <span data-ttu-id="8bd31-123">Prise en charge des nouvelles fonctionnalités de l’authentification du Service d’applications, ce qui vous toouse une configuration de l’authentification commune entre vos applications web et mobiles.</span><span class="sxs-lookup"><span data-stu-id="8bd31-123">Support for new App Service authentication features, which allow you toouse a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="8bd31-124"><a name="overview"></a>Présentation de la mise à niveau de base</span><span class="sxs-lookup"><span data-stu-id="8bd31-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="8bd31-125">Dans de nombreux cas, la mise à niveau sera aussi simple que le basculement de serveur d’applications mobiles nouvelle toohello Kit de développement logiciel et si vous republiez votre code vers une nouvelle instance de l’application Mobile.</span><span class="sxs-lookup"><span data-stu-id="8bd31-125">In many cases, upgrading will be as simple as switching toohello new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="8bd31-126">Il existe toutefois des scénarios qui nécessitent une configuration supplémentaire, tels que les scénarios d'authentification avancée et l'utilisation de tâches planifiées.</span><span class="sxs-lookup"><span data-stu-id="8bd31-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="8bd31-127">Chacun de ces est couvert en hello sections ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="8bd31-127">Each of these is covered in hello later sections.</span></span>

> [!TIP]
> <span data-ttu-id="8bd31-128">Il est recommandé de lire et comprendre reste hello de cette rubrique complètement avant de démarrer une mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="8bd31-128">It is advised that you read and understand hello rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="8bd31-129">Prenez note de toutes les fonctionnalités répertoriées ci-dessous que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="8bd31-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="8bd31-130">sont des kits de développement logiciel client des Services mobiles Hello **pas** compatibles avec les serveurs d’applications mobiles nouvelle hello Kit de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="8bd31-130">hello Mobile Services client SDKs are **not** compatible with hello new Mobile Apps server SDK.</span></span> <span data-ttu-id="8bd31-131">Dans la continuité des activités tooprovide de commande de service pour votre application, vous ne devez pas publier site tooa de modifications actuellement le clients publiées.</span><span class="sxs-lookup"><span data-stu-id="8bd31-131">In order tooprovide continuity of service for your app, you should not publish changes tooa site currently serving published clients.</span></span> <span data-ttu-id="8bd31-132">Vous devez plutôt créer une application mobile qui sert de doublon.</span><span class="sxs-lookup"><span data-stu-id="8bd31-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="8bd31-133">Vous pouvez placer cette application sur hello du Service d’applications plan tooavoid encourir le coût financier supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="8bd31-133">You can put this application on hello same App Service plan tooavoid incurring additional financial cost.</span></span>

<span data-ttu-id="8bd31-134">Vous aurez alors deux versions de l’application hello : un qui reste identique hello et sert des applications publiées dans hello générique et hello autres dont vous pouvez ensuite mettre à niveau et la cible avec une nouvelle version du client.</span><span class="sxs-lookup"><span data-stu-id="8bd31-134">You will then have two versions of hello application: one which stays hello same and serves published apps in hello wild, and hello other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="8bd31-135">Vous pouvez déplacer et tester votre code à votre rythme, mais vous devez vous assurer que tous les correctifs de bogue que vous apportez obtenir tooboth appliqué.</span><span class="sxs-lookup"><span data-stu-id="8bd31-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied tooboth.</span></span> <span data-ttu-id="8bd31-136">Une fois que vous estimez que nombre désiré de Bonjour générique, les applications clientes ont mis à jour la version la plus récente toohello, vous pouvez supprimer l’application hello de migrées d’origine si vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="8bd31-136">Once you feel that a desired number of client apps in hello wild have updated toohello latest version, you can delete hello original migrated app if you desire.</span></span>

<span data-ttu-id="8bd31-137">structure complète de Hello pour le processus de mise à niveau hello est la suivante :</span><span class="sxs-lookup"><span data-stu-id="8bd31-137">hello full outline for hello upgrade process is as follows:</span></span>

1. <span data-ttu-id="8bd31-138">Créer une application Mobile App</span><span class="sxs-lookup"><span data-stu-id="8bd31-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="8bd31-139">Mise à jour hello projet toouse hello nouveaux kits de développement logiciel serveur</span><span class="sxs-lookup"><span data-stu-id="8bd31-139">Update hello project toouse hello new Server SDKs</span></span>
3. <span data-ttu-id="8bd31-140">Publier une nouvelle version de votre application cliente</span><span class="sxs-lookup"><span data-stu-id="8bd31-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="8bd31-141">(Facultatif) Supprimer l’instance originale qui a migré</span><span class="sxs-lookup"><span data-stu-id="8bd31-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="8bd31-142"><a name="mobile-app-version"></a>Création d’une seconde instance d’application</span><span class="sxs-lookup"><span data-stu-id="8bd31-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="8bd31-143">Bonjour première étape de la mise à niveau est la ressource de l’application Mobile toocreate hello qui hébergera hello nouvelle version de votre application.</span><span class="sxs-lookup"><span data-stu-id="8bd31-143">hello first step in upgrading is toocreate hello Mobile App resource which will host hello new version of your application.</span></span> <span data-ttu-id="8bd31-144">Si vous avez déjà migré un service mobile existant, vous pouvez toocreate cette version sur hello même plan d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="8bd31-144">If you have already migrated an existing mobile service, you will want toocreate this version on hello same hosting plan.</span></span> <span data-ttu-id="8bd31-145">Ouvrez hello [portail Azure] et accédez tooyour migrer l’application.</span><span class="sxs-lookup"><span data-stu-id="8bd31-145">Open hello [Azure portal] and navigate tooyour migrated application.</span></span> <span data-ttu-id="8bd31-146">Prenez note de hello du Plan App Service il s’exécute sur.</span><span class="sxs-lookup"><span data-stu-id="8bd31-146">Make note of hello App Service Plan it is running on.</span></span>

<span data-ttu-id="8bd31-147">Ensuite, créez seconde instance d’application hello en hello suivant [instructions de création de serveur principal .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="8bd31-147">Next, create hello second application instance by following hello [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="8bd31-148">Lorsque tooselect invité à choisir de vous Plan App Service ou « plan d’hébergement » hello plan de votre application migrée.</span><span class="sxs-lookup"><span data-stu-id="8bd31-148">When prompted tooselect you App Service Plan or "hosting plan" choose hello plan of your migrated application.</span></span>

<span data-ttu-id="8bd31-149">Vous pouvez toouse hello la même base de données et le concentrateur de Notification que vous l’avez fait dans les Services mobiles.</span><span class="sxs-lookup"><span data-stu-id="8bd31-149">You will likely want toouse hello same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="8bd31-150">Vous pouvez copier ces valeurs en ouvrant [portail Azure] , navigation dans les applications d’origine toohello, puis **paramètres** > **paramètres de l’Application**.</span><span class="sxs-lookup"><span data-stu-id="8bd31-150">You can copy these values by opening [Azure portal] and navigating toohello original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="8bd31-151">Sous **Chaînes de connexion**, copiez `MS_NotificationHubConnectionString` et `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="8bd31-152">Accédez tooyour un nouveau site de mise à niveau et les coller en remplaçant toutes les valeurs existantes.</span><span class="sxs-lookup"><span data-stu-id="8bd31-152">Navigate tooyour new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="8bd31-153">Répétez ce processus pour tous les autres paramètres d’application dont votre application a besoin.</span><span class="sxs-lookup"><span data-stu-id="8bd31-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="8bd31-154">Si vous N'utilisez pas un service migré, vous pouvez lire des chaînes de connexion et les paramètres de l’application hello **configurer** onglet Hello section de Services mobiles de hello [portail Azure classic].</span><span class="sxs-lookup"><span data-stu-id="8bd31-154">If not using a migrated service, you can read connection strings and app settings from hello **Configure** tab of hello Mobile Services section of hello [Azure classic portal].</span></span>

<span data-ttu-id="8bd31-155">Effectuer une copie du projet ASP.NET de hello pour votre application et le publier tooyour nouveau site.</span><span class="sxs-lookup"><span data-stu-id="8bd31-155">Make a copy of hello ASP.NET project for your application and publish it tooyour new site.</span></span> <span data-ttu-id="8bd31-156">À l’aide d’une copie de votre application client mis à jour avec la nouvelle URL de hello, valider que tout fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="8bd31-156">Using a copy of your client application updated with hello new URL, validate that everything works as expected.</span></span>

## <a name="updating-hello-server-project"></a><span data-ttu-id="8bd31-157">Mise à jour de projet de serveur hello</span><span class="sxs-lookup"><span data-stu-id="8bd31-157">Updating hello server project</span></span>
<span data-ttu-id="8bd31-158">Applications mobiles fournit une nouvelle [serveur SDK de l’application Mobile] qui fournit la majeure partie de hello même fonctionnalité que l’exécution des Services mobiles hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of hello same functionality as hello Mobile Services runtime.</span></span> <span data-ttu-id="8bd31-159">Tout d’abord, vous devez supprimer tous les packages de Services mobiles toohello références.</span><span class="sxs-lookup"><span data-stu-id="8bd31-159">First, you should remove all references toohello Mobile Services packages.</span></span> <span data-ttu-id="8bd31-160">Dans le Gestionnaire de package NuGet hello, recherchez `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-160">In hello NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="8bd31-161">La plupart des applications affichent plusieurs packages, notamment `WindowsAzure.MobileServices.Backend.Tables` et `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="8bd31-162">Dans ce cas, démarrez avec le package de hello plus bas dans l’arborescence des dépendances hello, tel que `Entity`et le supprimer.</span><span class="sxs-lookup"><span data-stu-id="8bd31-162">In such a case, start with hello lowest package in hello dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="8bd31-163">Quand vous y êtes invité, ne supprimez pas tous les packages dépendants.</span><span class="sxs-lookup"><span data-stu-id="8bd31-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="8bd31-164">Répétez ce processus jusqu’à ce que vous ayez supprimé `WindowsAzure.MobileServices.Backend` .</span><span class="sxs-lookup"><span data-stu-id="8bd31-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="8bd31-165">À ce stade, vous avez un projet qui ne fait plus référence aux SDK Mobile Services.</span><span class="sxs-lookup"><span data-stu-id="8bd31-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="8bd31-166">Vous allez ensuite ajouter des références hello SDK des applications mobiles.</span><span class="sxs-lookup"><span data-stu-id="8bd31-166">Next you will add references hello Mobile Apps SDK.</span></span> <span data-ttu-id="8bd31-167">Cette mise à niveau, la plupart des développeurs seront toodownload et installer hello `Microsoft.Azure.Mobile.Server.Quickstart` du package, comme cela extraira dans ensemble hello requis.</span><span class="sxs-lookup"><span data-stu-id="8bd31-167">For this upgrade, most developers will want toodownload and install hello `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in hello entire required set.</span></span>

<span data-ttu-id="8bd31-168">Il y a quelques erreurs du compilateur résultant des différences entre les kits de développement logiciel hello, mais ceux-ci sont tooaddress facile et sont traités dans le reste de hello de cette section.</span><span class="sxs-lookup"><span data-stu-id="8bd31-168">There will be quite a few compiler errors resulting from differences between hello SDKs, but these are easy tooaddress and are covered in hello rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="8bd31-169">Configuration de base</span><span class="sxs-lookup"><span data-stu-id="8bd31-169">Base configuration</span></span>
<span data-ttu-id="8bd31-170">Ensuite, dans WebApiConfig.cs, vous pouvez remplacer :</span><span class="sxs-lookup"><span data-stu-id="8bd31-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class tooset configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class tooset WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="8bd31-171">par</span><span class="sxs-lookup"><span data-stu-id="8bd31-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="8bd31-172">Si vous le souhaitez toolearn plus sur hello nouveau .NET serveur SDK et comment tooadd ou supprimer des fonctionnalités à partir de votre application, consultez hello [comment toouse hello .NET server SDK] rubrique.</span><span class="sxs-lookup"><span data-stu-id="8bd31-172">If you wish toolearn more about hello new .NET server SDK and how tooadd/remove features from your app, please see hello [How toouse hello .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="8bd31-173">Si votre application effectue des fonctionnalités d’authentification hello, vous devez également tooregister un intergiciel (middleware) OWIN.</span><span class="sxs-lookup"><span data-stu-id="8bd31-173">If your app makes use of hello authentication features, you will also need tooregister an OWIN middleware.</span></span> <span data-ttu-id="8bd31-174">Dans ce cas, vous devez déplacer hello au-dessus de code de configuration dans une nouvelle classe de démarrage OWIN.</span><span class="sxs-lookup"><span data-stu-id="8bd31-174">In this case, you should move hello above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="8bd31-175">Ajoutez le package NuGet de hello `Microsoft.Owin.Host.SystemWeb` s’il n’est pas déjà inclus dans votre projet.</span><span class="sxs-lookup"><span data-stu-id="8bd31-175">Add hello NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="8bd31-176">Dans Visual Studio, cliquez avec le bouton droit sur votre projet, puis sélectionnez **Ajouter** -> **Nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="8bd31-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="8bd31-177">Sélectionnez **Web** -> **Général** -> **Classe de démarrage OWIN**.</span><span class="sxs-lookup"><span data-stu-id="8bd31-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="8bd31-178">Déplacer hello au-dessus de code pour MobileAppConfiguration de `WebApiConfig.Register()` toohello `Configuration()` méthode de votre nouvelle classe de démarrage.</span><span class="sxs-lookup"><span data-stu-id="8bd31-178">Move hello above code for MobileAppConfiguration from `WebApiConfig.Register()` toohello `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="8bd31-179">Vérifiez que hello `Configuration()` méthode se termine par :</span><span class="sxs-lookup"><span data-stu-id="8bd31-179">Make sure hello `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="8bd31-180">Il existe des modifications supplémentaires des tooauthentication connexes qui sont traitées dans la section de l’authentification complète hello ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="8bd31-180">There are additional changes related tooauthentication which are covered in hello full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="8bd31-181">Utilisation des données</span><span class="sxs-lookup"><span data-stu-id="8bd31-181">Working with Data</span></span>
<span data-ttu-id="8bd31-182">Dans les Services mobiles, nom de l’application mobile hello pris en charge en tant que nom de schéma par défaut hello dans le programme d’installation de hello Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="8bd31-182">In Mobile Services, hello mobile app name served as hello default schema name in hello Entity Framework setup.</span></span>

<span data-ttu-id="8bd31-183">tooensure que vous avez hello même schéma référencé comme avant, hello utilisation suivant le schéma de hello tooset Bonjour DbContext pour votre application :</span><span class="sxs-lookup"><span data-stu-id="8bd31-183">tooensure that you have hello same schema being referenced as before, use hello following tooset hello schema in hello DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="8bd31-184">Vérifiez que vous avez MS_MobileServiceName définie si vous hello ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="8bd31-184">Please make sure you have MS_MobileServiceName set if you do hello above.</span></span> <span data-ttu-id="8bd31-185">Vous pouvez également fournir un autre nom de schéma si votre application l’a personnalisé précédemment.</span><span class="sxs-lookup"><span data-stu-id="8bd31-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="8bd31-186">Propriétés système</span><span class="sxs-lookup"><span data-stu-id="8bd31-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="8bd31-187">Dénomination</span><span class="sxs-lookup"><span data-stu-id="8bd31-187">Naming</span></span>
<span data-ttu-id="8bd31-188">Dans le serveur de Services mobiles Azure hello SDK, les propriétés système contiennent toujours un trait de soulignement double (`__`) préfixe pour les propriétés de hello :</span><span class="sxs-lookup"><span data-stu-id="8bd31-188">In hello Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for hello properties:</span></span>

* <span data-ttu-id="8bd31-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="8bd31-189">__createdAt</span></span>
* <span data-ttu-id="8bd31-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="8bd31-190">__updatedAt</span></span>
* <span data-ttu-id="8bd31-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="8bd31-191">__deleted</span></span>
* <span data-ttu-id="8bd31-192">__version</span><span class="sxs-lookup"><span data-stu-id="8bd31-192">__version</span></span>

<span data-ttu-id="8bd31-193">client des Services mobiles Hello kits de développement logiciel ont une logique spéciale pour l’analyse des propriétés système dans ce format.</span><span class="sxs-lookup"><span data-stu-id="8bd31-193">hello Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="8bd31-194">Dans les applications mobiles Azure, propriétés système ont n’est plus une spéciale en forme et avez hello nom :</span><span class="sxs-lookup"><span data-stu-id="8bd31-194">In Azure Mobile Apps, system properties no longer have a special format and have hello following names:</span></span>

* <span data-ttu-id="8bd31-195">createdAt</span><span class="sxs-lookup"><span data-stu-id="8bd31-195">createdAt</span></span>
* <span data-ttu-id="8bd31-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="8bd31-196">updatedAt</span></span>
* <span data-ttu-id="8bd31-197">deleted</span><span class="sxs-lookup"><span data-stu-id="8bd31-197">deleted</span></span>
* <span data-ttu-id="8bd31-198">version</span><span class="sxs-lookup"><span data-stu-id="8bd31-198">version</span></span>

<span data-ttu-id="8bd31-199">Hello Mobile Apps client kits de développement logiciel utilisez hello nouveau système propriétés noms, donc aucune modification n’est nécessaires tooclient code.</span><span class="sxs-lookup"><span data-stu-id="8bd31-199">hello Mobile Apps client SDKs use hello new system properties names, so no changes are required tooclient code.</span></span> <span data-ttu-id="8bd31-200">Toutefois, si vous êtes directement reste appels tooyour service, puis vous devez modifier vos requêtes en conséquence.</span><span class="sxs-lookup"><span data-stu-id="8bd31-200">However, if you are directly making REST calls tooyour service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="8bd31-201">Magasin local</span><span class="sxs-lookup"><span data-stu-id="8bd31-201">Local store</span></span>
<span data-ttu-id="8bd31-202">Hello modifications toohello noms de propriétés système signifient qu’une base de données locale de synchronisation hors connexion pour les Services mobiles n’est pas compatible avec les applications mobiles.</span><span class="sxs-lookup"><span data-stu-id="8bd31-202">hello changes toohello names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="8bd31-203">Si possible, vous devez éviter de mettre à niveau les applications clientes tooMobile Mobile Services Qu'applications jusqu'à ce qu’après les modifications en attente ont été envoyées toohello server.</span><span class="sxs-lookup"><span data-stu-id="8bd31-203">If possible, you should avoid upgrading client apps from Mobile Services tooMobile Apps until after pending changes have been sent toohello server.</span></span> <span data-ttu-id="8bd31-204">Ensuite, application mis à niveau hello doit utiliser un nouveau nom de fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="8bd31-204">Then, hello upgraded app should use a new database filename.</span></span>

<span data-ttu-id="8bd31-205">Si une application cliente est mis à niveau à partir des Services mobiles tooMobile applications bien qu’il existe des modifications en mode hors connexion en attente dans la file d’attente de fonctionnement de hello, base de données système hello doit être mis à jour toouse hello nouveaux noms de colonnes.</span><span class="sxs-lookup"><span data-stu-id="8bd31-205">If a client app is upgraded from Mobile Services tooMobile Apps while there are pending offline changes in hello operation queue, then hello system database must be updated toouse hello new column names.</span></span> <span data-ttu-id="8bd31-206">Sur iOS, il est possible à l’aide des noms de colonnes de migrations léger toochange hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-206">On iOS, this can be achieved using lightweight migrations toochange hello column names.</span></span> <span data-ttu-id="8bd31-207">Sur Android et hello .NET client géré, vous devez écrire les colonnes hello personnalisé SQL toorename pour vos tables d’objet de données.</span><span class="sxs-lookup"><span data-stu-id="8bd31-207">On Android and hello .NET managed client, you should write custom SQL toorename hello columns for your data object tables.</span></span>

<span data-ttu-id="8bd31-208">Sur iOS, vous devez modifier votre schéma de données de base pour vos données entités toomatch hello suit.</span><span class="sxs-lookup"><span data-stu-id="8bd31-208">On iOS, you should change your Core Data schema for your data entities toomatch hello following.</span></span> <span data-ttu-id="8bd31-209">Notez que les propriétés de hello `createdAt`, `updatedAt` et `version` n’ont plus un `ms_` préfixe :</span><span class="sxs-lookup"><span data-stu-id="8bd31-209">Note that hello properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="8bd31-210">Attribut</span><span class="sxs-lookup"><span data-stu-id="8bd31-210">Attribute</span></span> | <span data-ttu-id="8bd31-211">Type</span><span class="sxs-lookup"><span data-stu-id="8bd31-211">Type</span></span> | <span data-ttu-id="8bd31-212">Remarque</span><span class="sxs-lookup"><span data-stu-id="8bd31-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8bd31-213">id</span><span class="sxs-lookup"><span data-stu-id="8bd31-213">id</span></span> |<span data-ttu-id="8bd31-214">Chaîne, marquée requise</span><span class="sxs-lookup"><span data-stu-id="8bd31-214">String, marked required</span></span> |<span data-ttu-id="8bd31-215">clé primaire dans le magasin distant</span><span class="sxs-lookup"><span data-stu-id="8bd31-215">primary key in remote store</span></span> |
| <span data-ttu-id="8bd31-216">createdAt</span><span class="sxs-lookup"><span data-stu-id="8bd31-216">createdAt</span></span> |<span data-ttu-id="8bd31-217">Date</span><span class="sxs-lookup"><span data-stu-id="8bd31-217">Date</span></span> |<span data-ttu-id="8bd31-218">propriété de système de toocreatedAt maps (facultatif)</span><span class="sxs-lookup"><span data-stu-id="8bd31-218">(optional) maps toocreatedAt system property</span></span> |
| <span data-ttu-id="8bd31-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="8bd31-219">updatedAt</span></span> |<span data-ttu-id="8bd31-220">Date</span><span class="sxs-lookup"><span data-stu-id="8bd31-220">Date</span></span> |<span data-ttu-id="8bd31-221">propriété de système de tooupdatedAt maps (facultatif)</span><span class="sxs-lookup"><span data-stu-id="8bd31-221">(optional) maps tooupdatedAt system property</span></span> |
| <span data-ttu-id="8bd31-222">version</span><span class="sxs-lookup"><span data-stu-id="8bd31-222">version</span></span> |<span data-ttu-id="8bd31-223">String</span><span class="sxs-lookup"><span data-stu-id="8bd31-223">String</span></span> |<span data-ttu-id="8bd31-224">conflits toodetect utilisé (facultatif), tooversion de mappages</span><span class="sxs-lookup"><span data-stu-id="8bd31-224">(optional) used toodetect conflicts, maps tooversion</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="8bd31-225">Interrogation des propriétés système</span><span class="sxs-lookup"><span data-stu-id="8bd31-225">Querying system properties</span></span>
<span data-ttu-id="8bd31-226">Dans les Services mobiles Azure, les propriétés système ne sont pas envoyées par défaut, mais uniquement lorsqu’elles sont demandées à l’aide de la chaîne de requête hello `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using hello query string `__systemProperties`.</span></span> <span data-ttu-id="8bd31-227">En revanche, les propriétés sont dans le système d’applications mobiles Azure **toujours sélectionné** , car ils font partie du modèle d’objet hello serveur SDK.</span><span class="sxs-lookup"><span data-stu-id="8bd31-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of hello server SDK object model.</span></span>

<span data-ttu-id="8bd31-228">Cette modification affecte principalement les implémentations personnalisées des gestionnaires de domaine, comme les extensions de `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="8bd31-229">Dans les Services mobiles, si un client demande jamais les propriétés du système, il est possible de toouse un `MappedEntityDomainManager` qui ne correspondent pas réellement de toutes les propriétés.</span><span class="sxs-lookup"><span data-stu-id="8bd31-229">In Mobile Services, if a client never requests any system properties, it is possible toouse a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="8bd31-230">Toutefois, dans Azure Mobile Apps, ces propriétés non mappées provoquent une erreur dans les requêtes GET.</span><span class="sxs-lookup"><span data-stu-id="8bd31-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="8bd31-231">Hello plus simple problème de hello tooresolve moyen est toomodify vos données afin qu’ils héritent de `ITableData` au lieu de `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-231">hello easiest way tooresolve hello issue is toomodify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="8bd31-232">Ensuite, ajoutez hello `[NotMapped]` toohello les champs qui doivent être omis d’attribut.</span><span class="sxs-lookup"><span data-stu-id="8bd31-232">Then, add hello `[NotMapped]` attribute toohello fields that should be omitted.</span></span>

<span data-ttu-id="8bd31-233">Par exemple, suivant de hello définit `TodoItem` sans propriétés système :</span><span class="sxs-lookup"><span data-stu-id="8bd31-233">For example, hello following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="8bd31-234">Remarque : Si vous obtenez des erreurs `NotMapped`, ajouter un assembly de toohello référence `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="8bd31-234">Note: if you get errors on `NotMapped`, add a reference toohello assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="8bd31-235">CORS</span><span class="sxs-lookup"><span data-stu-id="8bd31-235">CORS</span></span>
<span data-ttu-id="8bd31-236">Services mobiles inclus une prise en charge pour le service CORS en insérant hello solution d’ASP.NET CORS.</span><span class="sxs-lookup"><span data-stu-id="8bd31-236">Mobile Services included some support for CORS by wrapping hello ASP.NET CORS solution.</span></span> <span data-ttu-id="8bd31-237">Cette couche d’habillage n’a été supprimé toogive développeur de hello plus de contrôle, et vous pouvez exploiter directement [prise en charge ASP.NET CORS](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="8bd31-237">This wrapping layer has been removed toogive hello developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="8bd31-238">zones principales posant problème si vous utilisez CORS Hello sont que hello `eTag` et `Location` en-têtes doivent être autorisés par ordre de hello client SDK toowork correctement.</span><span class="sxs-lookup"><span data-stu-id="8bd31-238">hello main areas of concern if using CORS are that hello `eTag` and `Location` headers must be allowed in order for hello client SDKs toowork properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="8bd31-239">Notifications Push</span><span class="sxs-lookup"><span data-stu-id="8bd31-239">Push Notifications</span></span>
<span data-ttu-id="8bd31-240">Pour envoyer des données, élément principal hello qui peuvent s’avérer manquant dans hello Kit de développement logiciel serveur est la classe de PushRegistrationHandler de hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-240">For push, hello main item that you may find missing from hello Server SDK is hello PushRegistrationHandler class.</span></span> <span data-ttu-id="8bd31-241">Les inscriptions sont traitées légèrement différemment dans Mobile Apps et les inscriptions sans balise sont activées par défaut.</span><span class="sxs-lookup"><span data-stu-id="8bd31-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="8bd31-242">La gestion des balises peut être accomplie à l'aide d'API personnalisées.</span><span class="sxs-lookup"><span data-stu-id="8bd31-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="8bd31-243">Consultez hello [l’inscription pour les balises](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="8bd31-243">Please see hello [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="8bd31-244">Tâches planifiées</span><span class="sxs-lookup"><span data-stu-id="8bd31-244">Scheduled Jobs</span></span>
<span data-ttu-id="8bd31-245">Les tâches planifiées ne sont pas générés dans des applications mobiles, les travaux existants que vous avez dans votre service principal .NET devez toobe mis à jour individuellement.</span><span class="sxs-lookup"><span data-stu-id="8bd31-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need toobe upgraded individually.</span></span> <span data-ttu-id="8bd31-246">Une option est planifiée de toocreate [de tâche Web] sur le site de code de l’application Mobile hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-246">One option is toocreate a scheduled [Web Job] on hello Mobile App code site.</span></span> <span data-ttu-id="8bd31-247">Vous pouvez également configurer un contrôleur qui contient votre code de projet et configurer hello [Azure Scheduler] toohit ce point de terminaison sur la planification de hello attendu.</span><span class="sxs-lookup"><span data-stu-id="8bd31-247">You could also set up a controller that holds your job code and configure hello [Azure Scheduler] toohit that endpoint on hello expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="8bd31-248">Modifications diverses</span><span class="sxs-lookup"><span data-stu-id="8bd31-248">Miscellaneous changes</span></span>
<span data-ttu-id="8bd31-249">Tous les ApiControllers qui seront utilisés par un client mobile doit maintenant avoir hello `[MobileAppController]` attribut.</span><span class="sxs-lookup"><span data-stu-id="8bd31-249">All ApiControllers which will be consumed by a mobile client must now have hello `[MobileAppController]` attribute.</span></span> <span data-ttu-id="8bd31-250">Cela n’est plus inclus par défaut afin que les autres toogo ApiControllers pas affecté par hello formateurs mobiles.</span><span class="sxs-lookup"><span data-stu-id="8bd31-250">This is no longer included by default so that other ApiControllers toogo unaffected by hello mobile formatters.</span></span>

<span data-ttu-id="8bd31-251">Hello `ApiServices` objet ne fait plus partie du Kit de développement logiciel de hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-251">hello `ApiServices` object is no longer part of hello SDK.</span></span> <span data-ttu-id="8bd31-252">tooaccess les paramètres de l’application Mobile, vous pouvez utiliser suivant de hello :</span><span class="sxs-lookup"><span data-stu-id="8bd31-252">tooaccess Mobile App settings, you can use hello following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="8bd31-253">De même, la journalisation est désormais possible à l’aide d’écriture de trace ASP.NET standard hello :</span><span class="sxs-lookup"><span data-stu-id="8bd31-253">Similarly, logging is now accomplished using hello standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="8bd31-254"><a name="authentication"></a>Considérations relatives à l’authentification</span><span class="sxs-lookup"><span data-stu-id="8bd31-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="8bd31-255">composants d’authentification Hello de Services mobiles ont désormais été déplacés en fonction de l’authentification/autorisation du Service application hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-255">hello authentication components of Mobile Services have now been moved into hello App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="8bd31-256">Vous pouvez en savoir plus sur l’activation de celle-ci pour votre site par la lecture de hello [application mobile d’Ajouter authentication tooyour](app-service-mobile-ios-get-started-users.md) rubrique.</span><span class="sxs-lookup"><span data-stu-id="8bd31-256">You can learn about enabling this for your site by reading hello [Add authentication tooyour mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="8bd31-257">Pour certains fournisseurs, tels que Google, Facebook et AAD, vous devez être en mesure de tooleverage une inscription existante hello à partir de votre application de copie.</span><span class="sxs-lookup"><span data-stu-id="8bd31-257">For some providers, such as AAD, Facebook, and Google, you should be able tooleverage hello existing registration from your copy application.</span></span> <span data-ttu-id="8bd31-258">Simplement, vous avez besoin de portail du fournisseur d’identité toohello toonavigate et que vous ajoutez une nouvelle inscription de toohello URL de redirection.</span><span class="sxs-lookup"><span data-stu-id="8bd31-258">You simply need toonavigate toohello identity provider's portal and add a new redirect URL toohello registration.</span></span> <span data-ttu-id="8bd31-259">Puis configurez l’authentification/autorisation du Service application avec l’ID de client hello et secret.</span><span class="sxs-lookup"><span data-stu-id="8bd31-259">Then configure App Service Authentication/Authorization with hello client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="8bd31-260">Autorisation des actions de contrôleur</span><span class="sxs-lookup"><span data-stu-id="8bd31-260">Controller action authorization</span></span>
<span data-ttu-id="8bd31-261">Toutes les instances de hello `[AuthorizeLevel(AuthorizationLevel.User)]` l’attribut doit être présent toouse modifiée hello ASP.NET standard `[Authorize]` attribut.</span><span class="sxs-lookup"><span data-stu-id="8bd31-261">Any instances of hello `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed toouse hello standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="8bd31-262">En outre, les contrôleurs sont désormais anonymes par défaut, comme dans d’autres applications ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8bd31-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="8bd31-263">Si vous utilisez une des hello autres options AuthorizeLevel, telles que l’administrateur ou d’une Application, notez que ceux-ci ont disparu.</span><span class="sxs-lookup"><span data-stu-id="8bd31-263">If you were using one of hello other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="8bd31-264">Vous pouvez à la place configurer AuthorizationFilters des clés secrètes partagées ou configurer un Principal du Service AAD tooenable les appels de service en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="8bd31-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal tooenable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="8bd31-265">Obtention d’informations utilisateur supplémentaires</span><span class="sxs-lookup"><span data-stu-id="8bd31-265">Getting additional user information</span></span>
<span data-ttu-id="8bd31-266">Vous pouvez obtenir des informations utilisateur supplémentaires, y compris les jetons d’accès via hello `GetAppServiceIdentityAsync()` méthode :</span><span class="sxs-lookup"><span data-stu-id="8bd31-266">You can get additional user information, including access tokens through hello `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="8bd31-267">En outre, si votre application prend des dépendances sur les ID utilisateur, telles que de les stocker dans une base de données, il est important de toonote qui hello ID utilisateur entre les Services mobiles et les applications Mobile App Service sont différents.</span><span class="sxs-lookup"><span data-stu-id="8bd31-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important toonote that hello user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="8bd31-268">Vous pouvez toujours obtenir hello ID d’utilisateur Mobile Services, cependant.</span><span class="sxs-lookup"><span data-stu-id="8bd31-268">You can still get hello Mobile Services User ID, though.</span></span> <span data-ttu-id="8bd31-269">Toutes les sous-classes de ProviderCredentials hello ont une propriété de nom d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8bd31-269">All of hello ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="8bd31-270">Par conséquent, reprenons l’exemple hello avant :</span><span class="sxs-lookup"><span data-stu-id="8bd31-270">So continuing from hello example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="8bd31-271">Si votre application ne prend pas de dépendances sur l’ID d’utilisateur, il est important d’exploiter hello le même type d’enregistrement avec un fournisseur d’identité si possible.</span><span class="sxs-lookup"><span data-stu-id="8bd31-271">If your app does take any dependencies on user IDs, it is important that you leverage hello same registration with an identity provider if possible.</span></span> <span data-ttu-id="8bd31-272">ID utilisateur sont généralement incluses dans l’étendue toohello inscription d’application qui a été utilisée, afin d’introduire une nouvelle inscription peut créer des problèmes avec les utilisateurs tootheir données correspondantes.</span><span class="sxs-lookup"><span data-stu-id="8bd31-272">User IDs are typically scoped toohello application registration that was used, so introducing a new registration could create problems with matching users tootheir data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="8bd31-273">Authentification personnalisée</span><span class="sxs-lookup"><span data-stu-id="8bd31-273">Custom authentication</span></span>
<span data-ttu-id="8bd31-274">Si votre application utilise une solution d’authentification personnalisée, vous pouvez toomake que ce site mis à niveau hello accès toohello système.</span><span class="sxs-lookup"><span data-stu-id="8bd31-274">If your app is using a custom authentication solution, you will want toomake sure that hello upgraded site has access toohello system.</span></span> <span data-ttu-id="8bd31-275">Suivez les instructions de nouveau hello pour l’authentification personnalisée dans hello [vue d’ensemble du Kit de développement logiciel .NET server] toointegrate votre solution.</span><span class="sxs-lookup"><span data-stu-id="8bd31-275">Follow hello new instructions for custom authentication in hello [.NET server SDK overview] toointegrate your solution.</span></span> <span data-ttu-id="8bd31-276">Notez que les composants d’authentification personnalisée hello sont toujours en version préliminaire.</span><span class="sxs-lookup"><span data-stu-id="8bd31-276">Please note that hello custom authentication components are still in preview.</span></span>

## <span data-ttu-id="8bd31-277"><a name="updating-clients"></a>Mise à jour des clients</span><span class="sxs-lookup"><span data-stu-id="8bd31-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="8bd31-278">Une fois que vous avez un serveur principal Mobile App opérationnel, vous pouvez travailler sur une nouvelle version de votre application cliente qui la consomme.</span><span class="sxs-lookup"><span data-stu-id="8bd31-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="8bd31-279">Applications mobiles inclut également une nouvelle version du client de hello kits de développement logiciel et similaire toohello mise à niveau server ci-dessus, vous devez tooremove toutes les références toohello Mobile Services SDK avant l’installation des versions des applications mobiles hello.</span><span class="sxs-lookup"><span data-stu-id="8bd31-279">Mobile Apps also includes a new version of hello client SDKs, and similar toohello server upgrade above, you will need tooremove all references toohello Mobile Services SDKs before installing hello Mobile Apps versions.</span></span>

<span data-ttu-id="8bd31-280">Une des principales modifications de hello entre les versions de hello est que les constructeurs hello ne nécessitent plus une clé d’application.</span><span class="sxs-lookup"><span data-stu-id="8bd31-280">One of hello main changes between hello versions is that hello constructors no longer require an application key.</span></span> <span data-ttu-id="8bd31-281">Vous maintenant transmettez simplement l’URL de hello de votre application Mobile.</span><span class="sxs-lookup"><span data-stu-id="8bd31-281">You now simply pass in hello URL of your Mobile App.</span></span> <span data-ttu-id="8bd31-282">Par exemple, sur les clients .NET hello, hello `MobileServiceClient` constructeur est désormais :</span><span class="sxs-lookup"><span data-stu-id="8bd31-282">For example, on hello .NET clients, hello `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of hello Mobile App
        );

<span data-ttu-id="8bd31-283">Vous pouvez lire sur l’installation hello nouveaux kits de développement logiciel et à l’aide de la nouvelle structure de hello via les liens hello ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="8bd31-283">You can read about installing hello new SDKs and using hello new structure via hello links below:</span></span>

* [<span data-ttu-id="8bd31-284">iOS version 3.0.0 ou ultérieure</span><span class="sxs-lookup"><span data-stu-id="8bd31-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="8bd31-285">.NET (Windows/Xamarin) version 2.0.0 ou ultérieure</span><span class="sxs-lookup"><span data-stu-id="8bd31-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="8bd31-286">Si votre application effectue utiliser de notifications push, notez hello instructions d’inscription spécifique pour chaque plate-forme, comme des modifications ont été certains il également.</span><span class="sxs-lookup"><span data-stu-id="8bd31-286">If your application makes use of push notifications, make note of hello specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="8bd31-287">Lorsque vous avez hello nouvelle version du client prêt, essayez-le par rapport à votre projet de serveur mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="8bd31-287">When you have hello new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="8bd31-288">Après avoir vérifié qu’il fonctionne, vous pouvez libérer une nouvelle version de toocustomers de votre application.</span><span class="sxs-lookup"><span data-stu-id="8bd31-288">After validating that it works, you can release a new version of your application toocustomers.</span></span> <span data-ttu-id="8bd31-289">Par la suite, une fois que vos clients ont eu une chance tooreceive ces mises à jour, vous pouvez supprimer la version des Services mobiles hello de votre application.</span><span class="sxs-lookup"><span data-stu-id="8bd31-289">Eventually, once your customers have had a chance tooreceive these updates, you can delete hello Mobile Services version of your app.</span></span> <span data-ttu-id="8bd31-290">À ce stade, vous avez mis à niveau tooan application de Service d’applications mobiles à l’aide du serveur d’applications mobiles dernière hello Kit de développement logiciel.</span><span class="sxs-lookup"><span data-stu-id="8bd31-290">At this point, you have completely upgraded tooan App Service Mobile App using hello latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

[portail Azure]: https://portal.azure.com/
[portail Azure classic]: https://manage.windowsazure.com/
[quelles sont les applications mobiles ?]: app-service-mobile-value-prop.md
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
[serveur SDK de l’application Mobile]: http://www.nuget.org/packages/microsoft.azure.mobile.server
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
[Azure Scheduler]: /en-us/documentation/services/scheduler/
[de tâche Web]: ../app-service-web/websites-webjobs-resources.md
[comment toouse hello .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[Migrate from Mobile Services tooan App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service tooApp Service]: app-service-mobile-migrating-from-mobile-services.md
[tarification du Service d’applications]: https://azure.microsoft.com/en-us/pricing/details/app-service/
[vue d’ensemble du Kit de développement logiciel .NET server]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
