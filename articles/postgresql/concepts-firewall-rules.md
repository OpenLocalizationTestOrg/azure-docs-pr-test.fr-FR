---
title: "Règles de pare-feu d’un serveur de base de données Azure pour PostgreSQL | Microsoft Docs"
description: "Décrit les règles de pare-feu d’un serveur de base de données Azure pour PostgreSQL."
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 1d46a4434c483c3612a9a7b4cdef718d6dc3e765
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-database-for-postgresql-server-firewall-rules"></a><span data-ttu-id="8fe3c-103">Règles de pare-feu d’un serveur de base de données Azure pour PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="8fe3c-103">Azure Database for PostgreSQL Server firewall rules</span></span>
<span data-ttu-id="8fe3c-104">Les pare-feu empêchent le serveur de base de données de tous les accès tooyour jusqu'à ce que vous spécifiez les ordinateurs sur lesquels l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-104">Firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="8fe3c-105">les pare-feu Hello accorde serveur toohello d’accès basé sur hello adresse IP de chaque demande d’origine.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-105">hello firewall grants access toohello server based on hello originating IP address of each request.</span></span>
<span data-ttu-id="8fe3c-106">tooconfigure votre pare-feu, vous créez des règles de pare-feu qui spécifient les plages d’adresses IP acceptables.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-106">tooconfigure your firewall, you create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="8fe3c-107">Vous pouvez créer des règles de pare-feu au niveau du serveur hello.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-107">You can create firewall rules at hello server level.</span></span>

<span data-ttu-id="8fe3c-108">**Règles de pare-feu :** ces règles permettent tooaccess de clients de votre base de données Azure entier pour PostgreSQL Server, autrement dit, toutes les bases de données hello dans hello même serveur logique.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-108">**Firewall rules:** These rules enable clients tooaccess your entire Azure Database for PostgreSQL Server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="8fe3c-109">Les règles de pare-feu de niveau serveur peuvent être configurées à l’aide de hello portail Azure ou à l’aide des commandes CLI d’Azure.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-109">Server-level firewall rules can be configured by using hello Azure portal or using Azure CLI commands.</span></span> <span data-ttu-id="8fe3c-110">règles de pare-feu de niveau serveur toocreate, vous devez être propriétaire de l’abonnement hello ou un collaborateur de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-110">toocreate server-level firewall rules, you must be hello subscription owner or a subscription contributor.</span></span>

## <a name="firewall-overview"></a><span data-ttu-id="8fe3c-111">Présentation du pare-feu</span><span class="sxs-lookup"><span data-stu-id="8fe3c-111">Firewall overview</span></span>
<span data-ttu-id="8fe3c-112">Base de données tous les accès tooyour Azure de base de données PostgreSQL serveur est bloqué par le pare-feu hello par défaut.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-112">All database access tooyour Azure Database for PostgreSQL server is blocked by hello firewall by default.</span></span> <span data-ttu-id="8fe3c-113">toobegin à l’aide de votre serveur à partir d’un autre ordinateur, vous devez toospecify une ou plus au niveau du serveur pare-feu règles tooenable accès tooyour server.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-113">toobegin using your server from another computer, you need toospecify one or more server-level firewall rules tooenable access tooyour server.</span></span> <span data-ttu-id="8fe3c-114">Utilisez toospecify de règles de pare-feu hello quelle adresse IP comprise entre hello Internet tooallow.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-114">Use hello firewall rules toospecify which IP address ranges from hello Internet tooallow.</span></span> <span data-ttu-id="8fe3c-115">Accès toohello Azure site Web du portail lui-même n’est pas affecté par les règles de pare-feu hello.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-115">Access toohello Azure portal website itself is not impacted by hello firewall rules.</span></span>
<span data-ttu-id="8fe3c-116">Les tentatives de connexion à partir de hello Internet et Azure doit traverser le pare-feu hello avant de pouvoir atteindre votre base de données PostgreSQL, comme indiqué dans hello suivant schéma :</span><span class="sxs-lookup"><span data-stu-id="8fe3c-116">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your PostgreSQL Database, as shown in hello following diagram:</span></span>

![Flux d’exemple de fonctionnement du pare-feu de hello](media/concepts-firewall-rules/1-firewall-concept.png)

## <a name="connecting-from-hello-internet"></a><span data-ttu-id="8fe3c-118">Connexion à partir de hello Internet</span><span class="sxs-lookup"><span data-stu-id="8fe3c-118">Connecting from hello Internet</span></span>
<span data-ttu-id="8fe3c-119">Les règles de pare-feu de niveau serveur s’appliquent à des bases de données tooall sur hello Azure de base de données PostgreSQL serveur.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-119">Server-level firewall rules apply tooall databases on hello Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="8fe3c-120">Si l’adresse IP de hello de demande de hello est dans une des plages de hello spécifiées dans les règles de pare-feu de niveau serveur hello, connexion de hello est accordée.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-120">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span>
<span data-ttu-id="8fe3c-121">Si l’adresse IP de hello de demande de hello n’est pas dans les plages de hello spécifiées dans un des hello au niveau de la base de données ou règles de pare-feu de niveau serveur, demande de connexion hello échoue.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-121">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>
<span data-ttu-id="8fe3c-122">Par exemple, si votre application se connecte avec le pilote JDBC pour PostgreSQL, vous pouvez rencontrer cette erreur en essayant de tooconnect lorsque hello pare-feu ne bloque les connexions hello.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-122">For example, if your application connects with JDBC driver for PostgreSQL, you may encounter this error attempting tooconnect when hello firewall is blocking hello connection.</span></span>
> <span data-ttu-id="8fe3c-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span><span class="sxs-lookup"><span data-stu-id="8fe3c-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span></span>

## <a name="programmatically-managing-firewall-rules"></a><span data-ttu-id="8fe3c-124">Gestion par programmation des règles de pare-feu</span><span class="sxs-lookup"><span data-stu-id="8fe3c-124">Programmatically managing firewall rules</span></span>
<span data-ttu-id="8fe3c-125">En outre toohello portail Azure, les pare-feu, les règles peuvent être gérés par programmation à l’aide de CLI d’Azure.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-125">In addition toohello Azure portal, firewall rules can be managed programmatically using Azure CLI.</span></span>
<span data-ttu-id="8fe3c-126">Consultez également la page [Créer et gérer les règles de pare-feu de la base de données Azure pour PostgreSQL à l’aide d’Azure CLI](howto-manage-firewall-using-cli.md).</span><span class="sxs-lookup"><span data-stu-id="8fe3c-126">See also [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="8fe3c-127">Dépannage du pare-feu de base de données hello</span><span class="sxs-lookup"><span data-stu-id="8fe3c-127">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="8fe3c-128">Tenez compte des hello lorsque toohello d’accès de base de données de Microsoft Azure pour service PostgreSQL Server ne se comporte pas comme prévu les points suivants :</span><span class="sxs-lookup"><span data-stu-id="8fe3c-128">Consider hello following points when access toohello Microsoft Azure Database for PostgreSQL Server service does not behave as you expect:</span></span>

* <span data-ttu-id="8fe3c-129">**Liste verte de modifications toohello n'ont pas encore entrées en vigueur :** il peut y avoir autant qu’un délai de cinq minutes pour change toohello base de données Azure pour effet de tootake de configuration de pare-feu PostgreSQL serveur.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-129">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure Database for PostgreSQL Server firewall configuration tootake effect.</span></span>

* <span data-ttu-id="8fe3c-130">**la connexion Hello n’est pas autorisée ou un mot de passe incorrect a été utilisée :** si une connexion n’a pas les autorisations sur hello Azure de base de données PostgreSQL serveur hello ou un mot de passe utilisé est incorrect, hello toohello de connexion de base de données Azure pour PostgreSQL serveur est refusé.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-130">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure Database for PostgreSQL server or hello password used is incorrect, hello connection toohello Azure Database for PostgreSQL server is denied.</span></span> <span data-ttu-id="8fe3c-131">Création d’un paramètre de pare-feu fournit uniquement les clients avec un tooattempt opportunité connexion tooyour serveur ; chaque client doit fournir les informations d’identification de sécurité nécessaires hello.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-131">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span>

<span data-ttu-id="8fe3c-132">Par exemple, à l’aide d’un client JDBC, hello l’erreur suivante peut apparaître.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-132">For example, using a JDBC client, hello following error may appear.</span></span>
> <span data-ttu-id="8fe3c-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span><span class="sxs-lookup"><span data-stu-id="8fe3c-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span></span>

* <span data-ttu-id="8fe3c-134">**Adresse IP dynamique :** si vous avez une connexion Internet avec adressage IP dynamique et que vous rencontrez des problèmes de mise en route à travers le pare-feu hello, vous pouvez tenter de hello suivant solutions :</span><span class="sxs-lookup"><span data-stu-id="8fe3c-134">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>

* <span data-ttu-id="8fe3c-135">Demandez à votre fournisseur de Service Internet (ISP) pour la plage d’adresses IP hello affecté tooyour les ordinateurs clients que hello d’accès de la base de données Azure pour le serveur de PostgreSQL, puis ajoutez plage d’adresses IP hello en tant qu’une règle de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-135">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure Database for PostgreSQL Server, and then add hello IP address range as a firewall rule.</span></span>

* <span data-ttu-id="8fe3c-136">Obtenir l’adressage IP statique à la place pour vos ordinateurs clients et ajoutez des adresses IP hello en tant que règles de pare-feu.</span><span class="sxs-lookup"><span data-stu-id="8fe3c-136">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8fe3c-137">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8fe3c-137">Next steps</span></span>
<span data-ttu-id="8fe3c-138">Pour obtenir des informations sur la création de règles de pare-feu au niveau du serveur et au niveau de la base de données, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="8fe3c-138">For articles on creating server-level and database-level firewall rules, see:</span></span>
* [<span data-ttu-id="8fe3c-139">Créer et gérer la base de données Azure PostgreSQL aux règles de pare-feu à l’aide de hello portail Azure</span><span class="sxs-lookup"><span data-stu-id="8fe3c-139">Create and manage Azure Database for PostgreSQL firewall rules using hello Azure portal</span></span>](howto-manage-firewall-using-portal.md)
* [<span data-ttu-id="8fe3c-140">Créer et gérer des règles de pare-feu de la base de données Azure pour PostgreSQL à l’aide d’Azure CLI</span><span class="sxs-lookup"><span data-stu-id="8fe3c-140">Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI</span></span>](howto-manage-firewall-using-cli.md)