---
title: "Vue d’ensemble des fonctionnalités Azure Event Hubs | Microsoft Docs"
description: "Vue d’ensemble et détails sur les fonctionnalités des concentrateurs d’événements"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: a74d767d57eb5ce2b3a716f9ba908a451f25f538
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="c7273-103">Vue d’ensemble des fonctionnalités des concentrateurs d’événements</span><span class="sxs-lookup"><span data-stu-id="c7273-103">Event Hubs features overview</span></span>

<span data-ttu-id="c7273-104">Azure Event Hubs est un service évolutif de traitement d’événements qui ingère et traite de gros volumes de données et d’événements avec une faible latence et une haute fiabilité.</span><span class="sxs-lookup"><span data-stu-id="c7273-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="c7273-105">Consultez la page [Qu’est-ce qu’Event Hubs ?](event-hubs-what-is-event-hubs.md) pour une vue d’ensemble de haut niveau du service.</span><span class="sxs-lookup"><span data-stu-id="c7273-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of the service.</span></span>

<span data-ttu-id="c7273-106">Cet article s’appuie sur les informations de la [présentation](event-hubs-what-is-event-hubs.md) et fournit des détails techniques et de mise en œuvre sur les fonctionnalités et composants d’Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="c7273-106">This article builds on the information in the [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="c7273-107">Éditeurs d'événements</span><span class="sxs-lookup"><span data-stu-id="c7273-107">Event publishers</span></span>

<span data-ttu-id="c7273-108">Toute entité qui envoie des données à un concentrateur d’événements est un producteur ou *éditeur d’événements*.</span><span class="sxs-lookup"><span data-stu-id="c7273-108">Any entity that sends data to an event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="c7273-109">Les éditeurs d’événements peuvent publier des événements à l’aide du protocole HTTPS ou AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="c7273-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="c7273-110">Ils utilisent un jeton SAS (Shared Access Signature) pour s’identifier auprès d’un concentrateur d’événements et peuvent avoir une identité unique ou utiliser un jeton SAS commun.</span><span class="sxs-lookup"><span data-stu-id="c7273-110">Event publishers use a Shared Access Signature (SAS) token to identify themselves to an event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="c7273-111">Publication d'un événement</span><span class="sxs-lookup"><span data-stu-id="c7273-111">Publishing an event</span></span>

<span data-ttu-id="c7273-112">Vous pouvez publier un événement avec AMQP 1.0 ou HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c7273-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="c7273-113">Event Hubs fournit des [bibliothèques et des classes client](event-hubs-dotnet-framework-api-overview.md) pour la publication d’événements sur un concentrateur d’événements à partir de clients .NET.</span><span class="sxs-lookup"><span data-stu-id="c7273-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events to an event hub from .NET clients.</span></span> <span data-ttu-id="c7273-114">Pour les autres runtimes et plateformes, vous pouvez utiliser n'importe quel client AMQP 1.0, comme [Apache Qpid](http://qpid.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="c7273-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="c7273-115">Vous pouvez publier les événements individuellement ou par lots.</span><span class="sxs-lookup"><span data-stu-id="c7273-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="c7273-116">Une publication unique (instance de données d’événement) a une limite de 256 Ko, qu’il s’agisse d’un événement unique ou d’un lot.</span><span class="sxs-lookup"><span data-stu-id="c7273-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="c7273-117">La publication d'événements plus volumineux que ce seuil entraîne une erreur.</span><span class="sxs-lookup"><span data-stu-id="c7273-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="c7273-118">Il est préférable pour les éditeurs de ne pas être au courant des partitions dans le concentrateur d’événements et de spécifier uniquement une *clé de partition* (présentée dans la section suivante) ou leur identité par le biais de leur jeton SAS.</span><span class="sxs-lookup"><span data-stu-id="c7273-118">It is a best practice for publishers to be unaware of partitions within the event hub and to only specify a *partition key* (introduced in the next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="c7273-119">Le choix d'utiliser AMQP ou HTTPS est spécifique au scénario d'utilisation.</span><span class="sxs-lookup"><span data-stu-id="c7273-119">The choice to use AMQP or HTTPS is specific to the usage scenario.</span></span> <span data-ttu-id="c7273-120">AMQP requiert l'établissement d'un socket bidirectionnel persistant en plus de la sécurité au niveau du transport (TLS) ou SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="c7273-120">AMQP requires the establishment of a persistent bidirectional socket in addition to transport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="c7273-121">Le protocole AMQP présente des coûts de gestion réseau plus élevés lors de l’initialisation de la session, mais le protocole HTTPS nécessite un temps de traitement SSL supplémentaire pour chaque demande.</span><span class="sxs-lookup"><span data-stu-id="c7273-121">AMQP has higher network costs when initializing the session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="c7273-122">Par ailleurs, AMQP propose des performances plus élevées pour les éditeurs courants.</span><span class="sxs-lookup"><span data-stu-id="c7273-122">AMQP has higher performance for frequent publishers.</span></span>

![Event Hubs](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="c7273-124">Azure Event Hubs garantit que tous les événements qui partagent une clé de partition sont fournis dans l’ordre, et à la même partition.</span><span class="sxs-lookup"><span data-stu-id="c7273-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and to the same partition.</span></span> <span data-ttu-id="c7273-125">Si des clés de partition sont utilisées avec des stratégies d’éditeur, l’identité de l’éditeur et la valeur de la clé de partition doivent correspondre.</span><span class="sxs-lookup"><span data-stu-id="c7273-125">If partition keys are used with publisher policies, then the identity of the publisher and the value of the partition key must match.</span></span> <span data-ttu-id="c7273-126">Sinon, une erreur se produit.</span><span class="sxs-lookup"><span data-stu-id="c7273-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="c7273-127">Stratégie de l'éditeur</span><span class="sxs-lookup"><span data-stu-id="c7273-127">Publisher policy</span></span>

<span data-ttu-id="c7273-128">Event Hubs permet un contrôle granulaire sur les éditeurs d'événements par le biais des *stratégies d'éditeur*.</span><span class="sxs-lookup"><span data-stu-id="c7273-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="c7273-129">Les stratégies d’éditeur regroupent des fonctionnalités runtime conçues pour fournir un grand nombre d’éditeurs d’événements indépendants.</span><span class="sxs-lookup"><span data-stu-id="c7273-129">Publisher policies are run-time features designed to facilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="c7273-130">Avec les stratégies d’éditeur, chaque éditeur utilise son propre identificateur unique lors de la publication d’événements sur un concentrateur d’événements, à l’aide du mécanisme suivant :</span><span class="sxs-lookup"><span data-stu-id="c7273-130">With publisher policies, each publisher uses its own unique identifier when publishing events to an event hub, using the following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="c7273-131">Vous n'êtes pas obligé de créer des noms d'éditeurs à l'avance, mais ils doivent correspondre au jeton SAS utilisé lors de la publication d'un événement, afin de garantir les identités de l'éditeur indépendant.</span><span class="sxs-lookup"><span data-stu-id="c7273-131">You don't have to create publisher names ahead of time, but they must match the SAS token used when publishing an event, in order to ensure independent publisher identities.</span></span> <span data-ttu-id="c7273-132">Lors de l'utilisation de stratégies d'éditeur, la valeur **PartitionKey** est définie sur le nom de l'éditeur.</span><span class="sxs-lookup"><span data-stu-id="c7273-132">When using publisher policies, the **PartitionKey** value is set to the publisher name.</span></span> <span data-ttu-id="c7273-133">Pour fonctionner correctement, ces valeurs doivent correspondre.</span><span class="sxs-lookup"><span data-stu-id="c7273-133">To work properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="c7273-134">Capture</span><span class="sxs-lookup"><span data-stu-id="c7273-134">Capture</span></span>

<span data-ttu-id="c7273-135">[Event Hubs Capture](event-hubs-capture-overview.md) vous permet de capturer automatiquement les données de streaming dans Event Hubs et de les enregistrer dans le compte Stockage Blob ou le compte Azure Data Lake Service de votre choix.</span><span class="sxs-lookup"><span data-stu-id="c7273-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you to automatically capture the streaming data in Event Hubs and save it to your choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="c7273-136">Vous pouvez activer la fonctionnalité Capture à partir du portail Azure et spécifier une taille minimale, ainsi que la période pour l’exécution de la capture.</span><span class="sxs-lookup"><span data-stu-id="c7273-136">You can enable Capture from the Azure portal, and specify a minimum size and time window to perform the capture.</span></span> <span data-ttu-id="c7273-137">Avec Event Hubs Capture, vous pouvez spécifier vos propres compte Stockage Blob Azure et conteneur, ou votre propre compte Azure Data Lake Store, qui est utilisé pour stocker les données capturées.</span><span class="sxs-lookup"><span data-stu-id="c7273-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used to store the captured data.</span></span> <span data-ttu-id="c7273-138">Les données capturées sont écrites dans le format Apache Avro.</span><span class="sxs-lookup"><span data-stu-id="c7273-138">Captured data is written in the Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="c7273-139">Partitions</span><span class="sxs-lookup"><span data-stu-id="c7273-139">Partitions</span></span>

<span data-ttu-id="c7273-140">Azure Event Hubs diffuse des messages via un modèle de consommateur partitionné, dans lequel chaque consommateur lit uniquement un sous-ensemble spécifique, ou partition, du flux de messages.</span><span class="sxs-lookup"><span data-stu-id="c7273-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="c7273-141">Ce modèle permet la mise à l’échelle horizontale pour le traitement des événements et fournit d’autres fonctionnalités de flux qui ne sont pas disponibles dans les rubriques et les files d’attente.</span><span class="sxs-lookup"><span data-stu-id="c7273-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="c7273-142">Une partition est une séquence ordonnée d’événements qui est conservée dans un concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="c7273-143">Les événements les plus récents sont ajoutés à la fin de cette séquence.</span><span class="sxs-lookup"><span data-stu-id="c7273-143">As newer events arrive, they are added to the end of this sequence.</span></span> <span data-ttu-id="c7273-144">Une partition peut être considérée comme un « journal de validation ».</span><span class="sxs-lookup"><span data-stu-id="c7273-144">A partition can be thought of as a "commit log."</span></span>

![Event Hubs](./media/event-hubs-features/partition.png)

<span data-ttu-id="c7273-146">Event Hubs conserve les données pendant une durée de rétention configurée, qui s’applique à toutes les partitions du concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-146">Event Hubs retains data for a configured retention time that applies across all partitions in the event hub.</span></span> <span data-ttu-id="c7273-147">Les événements expirent selon une base temporelle. Vous ne pouvez pas les supprimer explicitement.</span><span class="sxs-lookup"><span data-stu-id="c7273-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="c7273-148">Comme les partitions sont indépendantes et contiennent leur propre séquence de données, elles évoluent souvent à des vitesses différentes.</span><span class="sxs-lookup"><span data-stu-id="c7273-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Event Hubs](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="c7273-150">Le nombre de partitions est spécifié lors de la création du concentrateur d’événements. Il doit être compris entre 2 et 32.</span><span class="sxs-lookup"><span data-stu-id="c7273-150">The number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="c7273-151">Le nombre de partitions n’est pas modifiable. Lorsque vous le définissez, tenez compte de la mise à l’échelle sur le long terme.</span><span class="sxs-lookup"><span data-stu-id="c7273-151">The partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="c7273-152">Les partitions constituent un mécanisme d’organisation des données. Elles sont liées au degré de parallélisme en aval requis lors de la consommation des applications.</span><span class="sxs-lookup"><span data-stu-id="c7273-152">Partitions are a data organization mechanism that relates to the downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="c7273-153">Le choix du nombre de partitions dans un concentrateur d’événements est directement lié au nombre de lecteurs simultanés que vous prévoyez d’avoir.</span><span class="sxs-lookup"><span data-stu-id="c7273-153">The number of partitions in an event hub directly relates to the number of concurrent readers you expect to have.</span></span> <span data-ttu-id="c7273-154">Si vous souhaitez augmenter le nombre de partitions au-delà de 32, contactez l’équipe Azure Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="c7273-154">You can increase the number of partitions beyond 32 by contacting the Event Hubs team.</span></span>

<span data-ttu-id="c7273-155">Les partitions sont identifiables et peuvent recevoir des données directement, mais envoyer directement à une partition n’est pas recommandé.</span><span class="sxs-lookup"><span data-stu-id="c7273-155">While partitions are identifiable and can be sent to directly, sending directly to a partition is not recommended.</span></span> <span data-ttu-id="c7273-156">Au lieu de cela, vous pouvez utiliser des constructions de niveau supérieur présentées dans les sections [Éditeurs d’événements](#event-publishers) et [Capacité](#capacity).</span><span class="sxs-lookup"><span data-stu-id="c7273-156">Instead, you can use higher level constructs introduced in the [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="c7273-157">Une séquence de données d’événement est incluse dans les partitions. Elle comprend le corps de chaque événement, un conteneur de propriétés défini par l’utilisateur et diverses métadonnées, telles que son décalage dans la partition et son numéro dans la séquence de flux.</span><span class="sxs-lookup"><span data-stu-id="c7273-157">Partitions are filled with a sequence of event data which contains the body of the event, a user-defined property bag, and metadata such as its offset in the partition and its number in the stream sequence.</span></span>

<span data-ttu-id="c7273-158">Pour plus d’informations sur les partitions et le compromis entre la disponibilité et la fiabilité, consultez le [Guide de programmation de concentrateurs d’événements](event-hubs-programming-guide.md#partition-key) et l’article [Disponibilité et cohérence dans Event Hubs](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="c7273-158">For more information about partitions and the trade-off between availability and reliability, see the [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and the [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="c7273-159">Clé de partition</span><span class="sxs-lookup"><span data-stu-id="c7273-159">Partition key</span></span>

<span data-ttu-id="c7273-160">Vous pouvez utiliser une [clé de partition](event-hubs-programming-guide.md#partition-key) pour mapper des données d’événement entrant dans des partitions spécifiques dans le cadre de l’organisation des données.</span><span class="sxs-lookup"><span data-stu-id="c7273-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) to map incoming event data into specific partitions for the purpose of data organization.</span></span> <span data-ttu-id="c7273-161">La clé de partition est une valeur fournie par l’expéditeur transmise dans un concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-161">The partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="c7273-162">Elle est traitée par le biais d’une fonction de hachage statique, qui crée l’affectation de la partition.</span><span class="sxs-lookup"><span data-stu-id="c7273-162">It is processed through a static hashing function, which creates the partition assignment.</span></span> <span data-ttu-id="c7273-163">Si vous ne spécifiez aucune clé de partition lors de la publication d’un événement, une affectation de type tourniquet (round robin) est utilisée.</span><span class="sxs-lookup"><span data-stu-id="c7273-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="c7273-164">L’éditeur d’événements est uniquement informé de sa clé de partition, et non de la partition sur laquelle les événements sont publiés.</span><span class="sxs-lookup"><span data-stu-id="c7273-164">The event publisher is only aware of its partition key, not the partition to which the events are published.</span></span> <span data-ttu-id="c7273-165">Grâce à cette dissociation de la clé et de la partition, l’expéditeur n’a pas besoin de connaître trop d’informations sur le traitement en aval.</span><span class="sxs-lookup"><span data-stu-id="c7273-165">This decoupling of key and partition insulates the sender from needing to know too much about the downstream processing.</span></span> <span data-ttu-id="c7273-166">Une identité par appareil ou unique à l'utilisateur constitue une bonne clé de partition, mais d'autres attributs tels que la géographie, peuvent également être utilisés pour regrouper des événements liés dans une seule partition.</span><span class="sxs-lookup"><span data-stu-id="c7273-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used to group related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="c7273-167">Jetons SAS</span><span class="sxs-lookup"><span data-stu-id="c7273-167">SAS tokens</span></span>

<span data-ttu-id="c7273-168">Azure Event Hubs utilise des *signatures d’accès partagé* disponibles au niveau du concentrateur d’événements et de l’espace de noms.</span><span class="sxs-lookup"><span data-stu-id="c7273-168">Event Hubs uses *Shared Access Signatures*, which are available at the namespace and event hub level.</span></span> <span data-ttu-id="c7273-169">Un jeton SAS est généré à partir d'une clé SAS. C'est un hachage SHA d'une URL, codé dans un format spécifique.</span><span class="sxs-lookup"><span data-stu-id="c7273-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="c7273-170">À l’aide du nom de la clé (stratégie) et du jeton, Azure Event Hubs peut régénérer le hachage et, ainsi, authentifier l’expéditeur.</span><span class="sxs-lookup"><span data-stu-id="c7273-170">Using the name of the key (policy) and the token, Event Hubs can regenerate the hash and thus authenticate the sender.</span></span> <span data-ttu-id="c7273-171">Normalement, les jetons SAS pour les éditeurs d’événements sont créés uniquement avec des privilèges **d’envoi** sur un concentrateur d’événements spécifique.</span><span class="sxs-lookup"><span data-stu-id="c7273-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="c7273-172">Le mécanisme URL de ce jeton SAS constitue la base de l'identification de l'éditeur introduite dans la stratégie de l'éditeur.</span><span class="sxs-lookup"><span data-stu-id="c7273-172">This SAS token URL mechanism is the basis for publisher identification introduced in the publisher policy.</span></span> <span data-ttu-id="c7273-173">Pour plus d’informations sur l’utilisation de SAS, consultez [Authentification par signature d’accès partagé avec Service Bus](../service-bus-messaging/service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="c7273-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="c7273-174">Consommateurs d'événements</span><span class="sxs-lookup"><span data-stu-id="c7273-174">Event consumers</span></span>

<span data-ttu-id="c7273-175">Toute entité qui lit des données d’événement à partir d’un concentrateur d’événements est un *consommateur d’événements*.</span><span class="sxs-lookup"><span data-stu-id="c7273-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="c7273-176">Tous les consommateurs Azure Event Hubs se connectent par le biais de la session AMQP 1.0 ; les événements sont remis par le biais de cette session dès qu’ils sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="c7273-176">All Event Hubs consumers connect via the AMQP 1.0 session and events are delivered through the session as they become available.</span></span> <span data-ttu-id="c7273-177">Le client n'a pas besoin d'interroger la disponibilité des données.</span><span class="sxs-lookup"><span data-stu-id="c7273-177">The client does not need to poll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="c7273-178">Groupes de consommateurs</span><span class="sxs-lookup"><span data-stu-id="c7273-178">Consumer groups</span></span>

<span data-ttu-id="c7273-179">Le mécanisme de publication/d’abonnement des concentrateurs d’événements est activé à l’aide de *groupes de consommateurs*.</span><span class="sxs-lookup"><span data-stu-id="c7273-179">The publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="c7273-180">Un groupe de consommateurs est une vue (état, position ou décalage) d’un concentrateur d’événements dans sa totalité.</span><span class="sxs-lookup"><span data-stu-id="c7273-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="c7273-181">Les groupes de consommateurs permettent à plusieurs applications consommatrices d'avoir chacune une vue distincte du flux d'événements et de lire le flux indépendamment à leur propre rythme et avec leurs propres décalages.</span><span class="sxs-lookup"><span data-stu-id="c7273-181">Consumer groups enable multiple consuming applications to each have a separate view of the event stream, and to read the stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="c7273-182">Dans une architecture de traitement de flux, chaque application en aval équivaut à un groupe de consommateurs.</span><span class="sxs-lookup"><span data-stu-id="c7273-182">In a stream processing architecture, each downstream application equates to a consumer group.</span></span> <span data-ttu-id="c7273-183">Si vous souhaitez écrire des données d'événement dans le stockage à long terme, alors cette application d'enregistreur de stockage est un groupe de consommateurs.</span><span class="sxs-lookup"><span data-stu-id="c7273-183">If you want to write event data to long-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="c7273-184">Le traitement des événements complexes est ensuite effectué par un autre groupe de consommateurs distinct.</span><span class="sxs-lookup"><span data-stu-id="c7273-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="c7273-185">Vous ne pouvez accéder aux partitions que par le biais d'un groupe de consommateurs.</span><span class="sxs-lookup"><span data-stu-id="c7273-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="c7273-186">Il peut y avoir au maximum 5 lecteurs simultanés sur une partition par groupe de consommateurs. Toutefois **il est recommandé de n’avoir qu’un seul récepteur actif sur une partition par groupe de consommateurs**.</span><span class="sxs-lookup"><span data-stu-id="c7273-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="c7273-187">Il existe toujours un groupe de consommateurs par défaut dans un concentrateur d’événements, et vous pouvez créer jusqu’à 20 groupes de consommateurs pour un concentrateur d’événements de niveau standard.</span><span class="sxs-lookup"><span data-stu-id="c7273-187">There is always a default consumer group in an event hub, and you can create up to 20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="c7273-188">Voici quelques exemples de la convention URI de groupe consommateurs :</span><span class="sxs-lookup"><span data-stu-id="c7273-188">The following are examples of the consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="c7273-189">La figure suivante montre l’architecture de traitement de flux Event Hubs :</span><span class="sxs-lookup"><span data-stu-id="c7273-189">The following figure shows the Event Hubs stream processing architecture:</span></span>

![Event Hubs](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="c7273-191">Décalages du flux</span><span class="sxs-lookup"><span data-stu-id="c7273-191">Stream offsets</span></span>

<span data-ttu-id="c7273-192">Un *décalage* correspond à la position d’un événement dans une partition.</span><span class="sxs-lookup"><span data-stu-id="c7273-192">An *offset* is the position of an event within a partition.</span></span> <span data-ttu-id="c7273-193">Vous pouvez considérer un décalage comme un curseur côté client.</span><span class="sxs-lookup"><span data-stu-id="c7273-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="c7273-194">Le décalage est une numérotation en octets de l'événement.</span><span class="sxs-lookup"><span data-stu-id="c7273-194">The offset is a byte numbering of the event.</span></span> <span data-ttu-id="c7273-195">Ce décalage permet à un consommateur d’événements (lecteur) de spécifier un point dans le flux d’événements à partir duquel il veut commencer la lecture des événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-195">This offset enables an event consumer (reader) to specify a point in the event stream from which they want to begin reading events.</span></span> <span data-ttu-id="c7273-196">Vous pouvez spécifier le décalage comme un horodatage ou une valeur de décalage.</span><span class="sxs-lookup"><span data-stu-id="c7273-196">You can specify the offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="c7273-197">Les consommateurs ont la responsabilité de stocker leurs propres valeurs de décalage en dehors du service des hubs d'événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-197">Consumers are responsible for storing their own offset values outside of the Event Hubs service.</span></span> <span data-ttu-id="c7273-198">Dans une partition, chaque événement inclut un décalage.</span><span class="sxs-lookup"><span data-stu-id="c7273-198">Within a partition, each event includes an offset.</span></span>

![Event Hubs](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="c7273-200">Points de contrôle</span><span class="sxs-lookup"><span data-stu-id="c7273-200">Checkpointing</span></span>

<span data-ttu-id="c7273-201">Les *points de contrôle* constituent un processus par lequel les lecteurs marquent ou valident leur position dans une séquence d’événements de partition.</span><span class="sxs-lookup"><span data-stu-id="c7273-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="c7273-202">La réalisation des points de contrôle est la responsabilité du consommateur et se produit sur une base par partition dans un groupe de consommateurs.</span><span class="sxs-lookup"><span data-stu-id="c7273-202">Checkpointing is the responsibility of the consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="c7273-203">Cette responsabilité signifie que pour chaque groupe de consommateurs, chaque lecteur de partition doit conserver une trace de sa position actuelle dans le flux d’événements. Il peut informer le service lorsqu’il considère que le flux de données est complet.</span><span class="sxs-lookup"><span data-stu-id="c7273-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in the event stream, and can inform the service when it considers the data stream complete.</span></span>

<span data-ttu-id="c7273-204">Si un lecteur se déconnecte d'une partition, lorsqu'il se reconnecte il commence la lecture au point de contrôle qui a été précédemment soumis par le dernier lecteur de cette partition dans ce groupe de consommateurs.</span><span class="sxs-lookup"><span data-stu-id="c7273-204">If a reader disconnects from a partition, when it reconnects it begins reading at the checkpoint that was previously submitted by the last reader of that partition in that consumer group.</span></span> <span data-ttu-id="c7273-205">Lorsque le lecteur se connecte, il transmet ce décalage au concentrateur d’événements pour spécifier l’emplacement où commencer la lecture.</span><span class="sxs-lookup"><span data-stu-id="c7273-205">When the reader connects, it passes this offset to the event hub to specify the location at which to start reading.</span></span> <span data-ttu-id="c7273-206">De cette façon, vous pouvez utiliser les points de contrôle pour marquer les événements comme « terminés » par les applications en aval et pour assurer la résilience si un basculement se produit entre des lecteurs en cours d’exécution sur des ordinateurs différents.</span><span class="sxs-lookup"><span data-stu-id="c7273-206">In this way, you can use checkpointing to both mark events as "complete" by downstream applications, and to provide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="c7273-207">Il est possible de revenir à des données plus anciennes en spécifiant un décalage inférieur à partir de ce processus de vérification.</span><span class="sxs-lookup"><span data-stu-id="c7273-207">It is possible to return to older data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="c7273-208">Grâce à ce mécanisme, les points de contrôle permettent une résilience au basculement renforcée, mais également la relecture du flux d’événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="c7273-209">Tâches courantes du consommateur</span><span class="sxs-lookup"><span data-stu-id="c7273-209">Common consumer tasks</span></span>

<span data-ttu-id="c7273-210">Tous les consommateurs Azure Event Hubs se connectent via une session AMQP 1.0, un canal de communication bidirectionnelle prenant en charge l’état.</span><span class="sxs-lookup"><span data-stu-id="c7273-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="c7273-211">Chaque partition inclut une session AMQP 1.0, qui facilite le transport des événements séparés par partition.</span><span class="sxs-lookup"><span data-stu-id="c7273-211">Each partition has an AMQP 1.0 session that facilitates the transport of events segregated by partition.</span></span>

#### <a name="connect-to-a-partition"></a><span data-ttu-id="c7273-212">Se connecter à une partition</span><span class="sxs-lookup"><span data-stu-id="c7273-212">Connect to a partition</span></span>

<span data-ttu-id="c7273-213">Lors de la connexion aux partitions, il est courant d’utiliser un mécanisme de bail pour coordonner les connexions du lecteur à des partitions spécifiques.</span><span class="sxs-lookup"><span data-stu-id="c7273-213">When connecting to partitions, it is common practice to use a leasing mechanism to coordinate reader connections to specific partitions.</span></span> <span data-ttu-id="c7273-214">De cette façon, chaque partition dans un groupe de consommateurs peut n'avoir qu'un seul lecteur actif.</span><span class="sxs-lookup"><span data-stu-id="c7273-214">This way, it is possible for every partition in a consumer group to have only one active reader.</span></span> <span data-ttu-id="c7273-215">Le contrôle, la location et la gestion des lecteurs ont été simplifiés grâce à l’utilisation de la classe [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) pour les clients .NET.</span><span class="sxs-lookup"><span data-stu-id="c7273-215">Checkpointing, leasing, and managing readers are simplified by using the [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="c7273-216">L’hôte du processeur d’événements est un agent consommateur intelligent.</span><span class="sxs-lookup"><span data-stu-id="c7273-216">The Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="c7273-217">Lire les événements</span><span class="sxs-lookup"><span data-stu-id="c7273-217">Read events</span></span>

<span data-ttu-id="c7273-218">Après l'ouverture d'une session AMQP 1.0 et d'une liaison pour une partition spécifique, les événements sont livrés par le service de hubs d'événements au client AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="c7273-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered to the AMQP 1.0 client by the Event Hubs service.</span></span> <span data-ttu-id="c7273-219">Ce mécanisme de livraison permet un débit plus élevé et une latence plus faible par rapport aux mécanismes basés sur l'extraction, tels que HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="c7273-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="c7273-220">Alors que les événements sont envoyés au client, chaque instance de données d'événement contient des métadonnées importantes, comme le décalage et le numéro de séquence, qui sont utilisées pour faciliter les points de contrôle sur la séquence d'événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-220">As events are sent to the client, each event data instance contains important metadata such as the offset and sequence number that are used to facilitate checkpointing on the event sequence.</span></span>

<span data-ttu-id="c7273-221">Données d’événement :</span><span class="sxs-lookup"><span data-stu-id="c7273-221">Event data:</span></span>
* <span data-ttu-id="c7273-222">Offset</span><span class="sxs-lookup"><span data-stu-id="c7273-222">Offset</span></span>
* <span data-ttu-id="c7273-223">Numéro de séquence</span><span class="sxs-lookup"><span data-stu-id="c7273-223">Sequence number</span></span>
* <span data-ttu-id="c7273-224">Corps</span><span class="sxs-lookup"><span data-stu-id="c7273-224">Body</span></span>
* <span data-ttu-id="c7273-225">Propriétés de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="c7273-225">User properties</span></span>
* <span data-ttu-id="c7273-226">Propriétés système</span><span class="sxs-lookup"><span data-stu-id="c7273-226">System properties</span></span>

<span data-ttu-id="c7273-227">Il vous incombe de gérer le décalage.</span><span class="sxs-lookup"><span data-stu-id="c7273-227">It is your responsibility to manage the offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="c7273-228">Capacité</span><span class="sxs-lookup"><span data-stu-id="c7273-228">Capacity</span></span>

<span data-ttu-id="c7273-229">Azure Event Hubs possède une architecture parallèle hautement évolutive. Vous devez tenir compte de plusieurs facteurs importants lors du dimensionnement et de la mise à l’échelle de votre infrastructure.</span><span class="sxs-lookup"><span data-stu-id="c7273-229">Event Hubs has a highly scalable parallel architecture and there are several key factors to consider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="c7273-230">Unités de débit</span><span class="sxs-lookup"><span data-stu-id="c7273-230">Throughput units</span></span>

<span data-ttu-id="c7273-231">La capacité de débit des concentrateurs d’événements est contrôlée par les *unités de débit*.</span><span class="sxs-lookup"><span data-stu-id="c7273-231">The throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="c7273-232">Les unités de débit sont des unités de capacité achetées préalablement.</span><span class="sxs-lookup"><span data-stu-id="c7273-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="c7273-233">Une unité de débit unique inclut la capacité suivante :</span><span class="sxs-lookup"><span data-stu-id="c7273-233">A single throughput unit includes the following capacity:</span></span>

* <span data-ttu-id="c7273-234">Entrée : jusqu’à 1 Mo par seconde ou 1 000 événements par seconde, selon ce qui se produit en premier.</span><span class="sxs-lookup"><span data-stu-id="c7273-234">Ingress: Up to 1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="c7273-235">Sortie : jusqu’à 2 Mo par seconde.</span><span class="sxs-lookup"><span data-stu-id="c7273-235">Egress: Up to 2 MB per second</span></span>

<span data-ttu-id="c7273-236">En cas de dépassement de la capacité des unités de débit achetées, l’entrée est limitée et une exception [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) est renvoyée.</span><span class="sxs-lookup"><span data-stu-id="c7273-236">Beyond the capacity of the purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="c7273-237">La sortie ne produit aucune exception de limitation, mais reste limitée à la capacité des unités de débit achetées.</span><span class="sxs-lookup"><span data-stu-id="c7273-237">Egress does not produce throttling exceptions, but is still limited to the capacity of the purchased throughput units.</span></span> <span data-ttu-id="c7273-238">Si vous recevez des exceptions de vitesse de publication ou si vous attendez une sortie plus élevée, vérifiez le nombre d’unités de débit achetées pour l’espace de noms.</span><span class="sxs-lookup"><span data-stu-id="c7273-238">If you receive publishing rate exceptions or are expecting to see higher egress, be sure to check how many throughput units you have purchased for the namespace.</span></span> <span data-ttu-id="c7273-239">Vous pouvez gérer des unités de débit sur le panneau **Mettre à l’échelle** des espaces de noms, dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c7273-239">You can manage throughput units on the **Scale** blade of the namespaces in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="c7273-240">Vous pouvez également gérer les unités de débit par programmation à l’aide des [API Event Hubs](event-hubs-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c7273-240">You can also manage throughput units programmatically using the [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="c7273-241">Les unités de débit sont facturées par heure et sont préalablement acquises.</span><span class="sxs-lookup"><span data-stu-id="c7273-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="c7273-242">Une fois achetées, les unités de débit sont facturées au moins une heure.</span><span class="sxs-lookup"><span data-stu-id="c7273-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="c7273-243">Vous pouvez acheter jusqu’à 20 unités de débit pour un espace de noms Azure Event Hubs. Ces unités sont partagées entre tous les concentrateurs d’événements de l’espace de noms en question.</span><span class="sxs-lookup"><span data-stu-id="c7273-243">Up to 20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in the namespace.</span></span>

<span data-ttu-id="c7273-244">Il est possible d’acheter des unités de débit supplémentaires, par lots de 20 (pour un maximum de 100). Pour cela, contacter le support Azure.</span><span class="sxs-lookup"><span data-stu-id="c7273-244">More throughput units can be purchased in blocks of 20, up to 100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="c7273-245">Ensuite, vous pouvez également acheter des blocs de 100 unités de débit.</span><span class="sxs-lookup"><span data-stu-id="c7273-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="c7273-246">Nous vous recommandons d’équilibrer soigneusement les partitions et les unités de débit pour obtenir un dimensionnement optimal.</span><span class="sxs-lookup"><span data-stu-id="c7273-246">We recommend that you balance throughput units and partitions to achieve optimal scale.</span></span> <span data-ttu-id="c7273-247">Une partition unique a une échelle maximale d'une unité de débit.</span><span class="sxs-lookup"><span data-stu-id="c7273-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="c7273-248">Le nombre d’unités de débit doit être inférieur ou égal au nombre de partitions dans un concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c7273-248">The number of throughput units should be less than or equal to the number of partitions in an event hub.</span></span>

<span data-ttu-id="c7273-249">Pour obtenir des informations de tarification détaillées des concentrateurs d’événements, consultez [Tarification des concentrateurs d’événements](https://azure.microsoft.com/pricing/details/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="c7273-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c7273-250">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="c7273-250">Next steps</span></span>

<span data-ttu-id="c7273-251">Pour plus d’informations sur les concentrateurs d’événements, accédez aux liens suivants :</span><span class="sxs-lookup"><span data-stu-id="c7273-251">For more information about Event Hubs, visit the following links:</span></span>

* <span data-ttu-id="c7273-252">Prise en main avec un [didacticiel des hubs d'événements][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="c7273-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="c7273-253">Guide de programmation de concentrateurs d’événements</span><span class="sxs-lookup"><span data-stu-id="c7273-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="c7273-254">Disponibilité et cohérence dans Event Hubs</span><span class="sxs-lookup"><span data-stu-id="c7273-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="c7273-255">FAQ sur les hubs d'événements</span><span class="sxs-lookup"><span data-stu-id="c7273-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="c7273-256">[Exemples de hubs d’événements][]</span><span class="sxs-lookup"><span data-stu-id="c7273-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Exemples de hubs d’événements]: https://github.com/Azure/azure-event-hubs/tree/master/samples
