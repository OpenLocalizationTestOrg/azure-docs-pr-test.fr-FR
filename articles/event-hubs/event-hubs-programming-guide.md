---
title: "guide d’aaaProgramming pour Azure Event Hubs | Documents Microsoft"
description: "Écrire du code pour les concentrateurs d’événements Azure à l’aide de hello Azure .NET SDK."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 43bebd126c2311af9e3daeb52324132b66cf0884
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="c9ea7-103">Guide de programmation de concentrateurs d’événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-103">Event Hubs programming guide</span></span>

<span data-ttu-id="c9ea7-104">Cet article décrit certains scénarios courants de l’écriture de code à l’aide d’Azure Event Hubs et hello Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-104">This article discusses some common scenarios in writing code using Azure Event Hubs and hello Azure .NET SDK.</span></span> <span data-ttu-id="c9ea7-105">Il suppose une connaissance préalable des concentrateurs d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="c9ea7-106">Pour obtenir une vue d’ensemble conceptuelle des concentrateurs d’événements, consultez hello [vue d’ensemble des concentrateurs d’événements](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-106">For a conceptual overview of Event Hubs, see hello [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="c9ea7-107">Éditeurs d'événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-107">Event publishers</span></span>

<span data-ttu-id="c9ea7-108">Vous envoyez le concentrateur d’événements événements tooan soit à l’aide de HTTP POST ou via une connexion AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-108">You send events tooan event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="c9ea7-109">Hello choix de quels toouse et à quel moment varie selon le scénario spécifique de hello à résoudre.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-109">hello choice of which toouse and when depends on hello specific scenario being addressed.</span></span> <span data-ttu-id="c9ea7-110">Les connexions AMQP 1.0 sont limitées en tant que connexions réparties dans Service Bus et sont plus appropriées dans les scénarios avec des volumes de messages plus importants fréquents et des conditions de latence plus faible, car elles fournissent un canal de messagerie permanent.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="c9ea7-111">Vous créez et gérez des concentrateurs d’événements à l’aide de hello [NamespaceManager][] classe.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-111">You create and manage Event Hubs using hello [NamespaceManager][] class.</span></span> <span data-ttu-id="c9ea7-112">Lorsque, à l’aide de hello .NET géré API, hello principal construit pour la publication des données tooEvent concentrateurs sont hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) et [EventData][] classes.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-112">When using hello .NET managed APIs, hello primary constructs for publishing data tooEvent Hubs are hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="c9ea7-113">[EventHubClient][] fournit le canal de communication AMQP hello sur lequel les événements sont envoyés toohello concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-113">[EventHubClient][] provides hello AMQP communication channel over which events are sent toohello event hub.</span></span> <span data-ttu-id="c9ea7-114">Hello [EventData][] classe représente un événement et est le concentrateur d’événements utilisé toopublish messages tooan.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-114">hello [EventData][] class represents an event, and is used toopublish messages tooan event hub.</span></span> <span data-ttu-id="c9ea7-115">Cette classe inclut le corps de hello, des métadonnées et les informations d’en-tête sur l’événement hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-115">This class includes hello body, some metadata, and header information about hello event.</span></span> <span data-ttu-id="c9ea7-116">Autres propriétés sont ajoutées toohello [EventData][] lorsqu’il transite via un concentrateur d’événements de l’objet.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-116">Other properties are added toohello [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="c9ea7-117">Prise en main</span><span class="sxs-lookup"><span data-stu-id="c9ea7-117">Get started</span></span>

<span data-ttu-id="c9ea7-118">les classes de .NET Hello qui prennent en charge les concentrateurs d’événements sont fournies dans l’assembly Microsoft.ServiceBus.dll de hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-118">hello .NET classes that support Event Hubs are provided in hello Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="c9ea7-119">Hello plus simple de façon tooreference salutation API Service Bus et de tooconfigure votre application avec toutes les dépendances du Service Bus hello est hello de toodownload [package NuGet Service Bus](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-119">hello easiest way tooreference hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies is toodownload hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="c9ea7-120">Vous pouvez également utiliser hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-120">Alternatively, you can use hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="c9ea7-121">toodo émettre donc hello commande Bonjour suivante [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) fenêtre :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-121">toodo so, issue hello following command in hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="c9ea7-122">Création d'un concentrateur d'événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-122">Create an event hub</span></span>
<span data-ttu-id="c9ea7-123">Vous pouvez utiliser hello [NamespaceManager][] classe toocreate concentrateurs d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-123">You can use hello [NamespaceManager][] class toocreate Event Hubs.</span></span> <span data-ttu-id="c9ea7-124">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="c9ea7-125">Dans la plupart des cas, il est recommandé d’utiliser hello [CreateEventHubIfNotExists][] tooavoid méthodes générer des exceptions si hello service redémarre.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-125">In most cases, it is recommended that you use hello [CreateEventHubIfNotExists][] methods tooavoid generating exceptions if hello service restarts.</span></span> <span data-ttu-id="c9ea7-126">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="c9ea7-127">Toutes les opérations de création de concentrateurs d’événements, y compris [CreateEventHubIfNotExists][], nécessitent **gérer** autorisations sur l’espace de noms hello en question.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on hello namespace in question.</span></span> <span data-ttu-id="c9ea7-128">Si vous souhaitez que les autorisations de hello toolimit de vos applications de serveur de publication ou le consommateur, vous pouvez éviter ces créer des appels d’opération dans le code de production lorsque vous utilisez des informations d’identification avec des autorisations limitées.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-128">If you want toolimit hello permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="c9ea7-129">Hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) classe contient des détails sur un concentrateur d’événements, y compris les règles d’autorisation de hello, intervalle de conservation des messages hello, ID de partition, l’état et chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-129">hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including hello authorization rules, hello message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="c9ea7-130">Vous pouvez utiliser ces métadonnées de hello tooupdate classe sur un concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-130">You can use this class tooupdate hello metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="c9ea7-131">Création d’un client de concentrateurs d’événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-131">Create an Event Hubs client</span></span>
<span data-ttu-id="c9ea7-132">classe principale Hello pour interagir avec les concentrateurs d’événements est [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="c9ea7-132">hello primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="c9ea7-133">Cette classe fournit les fonctionnalités de l'expéditeur et du récepteur.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="c9ea7-134">Vous pouvez instancier cette classe à l’aide de hello [créer](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) méthode, comme indiqué dans hello l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-134">You can instantiate this class using hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in hello following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="c9ea7-135">Cette méthode utilise les informations de connexion de Service Bus hello dans le fichier App.config hello, Bonjour `appSettings` section.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-135">This method uses hello Service Bus connection information in hello App.config file, in hello `appSettings` section.</span></span> <span data-ttu-id="c9ea7-136">Pour obtenir un exemple de hello `appSettings` XML utilisé les informations de connexion de Service Bus toostore hello, consultez la documentation de hello pour hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) (méthode).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-136">For an example of hello `appSettings` XML used toostore hello Service Bus connection information, see hello documentation for hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="c9ea7-137">Une autre option est un client de hello toocreate à partir d’une chaîne de connexion.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-137">Another option is toocreate hello client from a connection string.</span></span> <span data-ttu-id="c9ea7-138">Cette option fonctionne bien lorsque vous utilisez des rôles de travail Azure, car vous pouvez stocker la chaîne de hello dans les propriétés de configuration hello pour les processus de travail hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-138">This option works well when using Azure worker roles, because you can store hello string in hello configuration properties for hello worker.</span></span> <span data-ttu-id="c9ea7-139">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="c9ea7-140">chaîne de connexion Hello sera Bonjour même format tel qu’il apparaît dans le fichier App.config hello pour les méthodes précédentes hello :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-140">hello connection string will be in hello same format as it appears in hello App.config file for hello previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="c9ea7-141">Enfin, il est également possible de toocreate un [EventHubClient][] à partir de l’objet un [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) de l’instance, comme indiqué dans hello l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-141">Finally, it is also possible toocreate an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in hello following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="c9ea7-142">Il est important toonote supplémentaire [EventHubClient][] objets créés à partir d’une instance de fabrique de messagerie réutiliseront hello même les connexion TCP sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-142">It is important toonote that additional [EventHubClient][] objects created from a messaging factory instance will reuse hello same underlying TCP connection.</span></span> <span data-ttu-id="c9ea7-143">Par conséquent, ces objets ont une limite de débit côté client.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="c9ea7-144">Hello [créer](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) méthode réutilise une fabrique de messagerie unique.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-144">hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="c9ea7-145">Si vous avez besoin du débit très élevé d'un expéditeur unique, vous pouvez créer plusieurs fabriques de messages et un objet [EventHubClient][] à partir de chaque fabrique de messagerie.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-tooan-event-hub"></a><span data-ttu-id="c9ea7-146">Envoyer le concentrateur d’événements événements tooan</span><span class="sxs-lookup"><span data-stu-id="c9ea7-146">Send events tooan event hub</span></span>
<span data-ttu-id="c9ea7-147">Vous envoyez un concentrateur d’événements événements tooan en créant un [EventData][] instance et en l’envoyant via hello [envoyer](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) (méthode).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-147">You send events tooan event hub by creating an [EventData][] instance and sending it via hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="c9ea7-148">Cette méthode prend un seul [EventData][] paramètre d’instance et l’envoie de manière synchrone tooan concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-148">This method takes a single [EventData][] instance parameter and synchronously sends it tooan event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="c9ea7-149">Sérialisation d'événement</span><span class="sxs-lookup"><span data-stu-id="c9ea7-149">Event serialization</span></span>
<span data-ttu-id="c9ea7-150">Hello [EventData][] classe a [quatre surchargé constructeurs](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) qui accepte divers paramètres, comme un objet et sérialiseur, un tableau d’octets ou un flux de données.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-150">hello [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="c9ea7-151">Il est également possible de tooinstantiate hello [EventData][] classe et définir le flux du corps de hello après coup.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-151">It is also possible tooinstantiate hello [EventData][] class and set hello body stream afterwards.</span></span> <span data-ttu-id="c9ea7-152">Lors de l’utilisation de JSON avec [EventData][], vous pouvez utiliser **Encoding.UTF8.GetBytes()** tableau d’octets tooretrieve hello pour une chaîne codée au format JSON.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** tooretrieve hello byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="c9ea7-153">Clé de partition</span><span class="sxs-lookup"><span data-stu-id="c9ea7-153">Partition key</span></span>
<span data-ttu-id="c9ea7-154">Hello [EventData][] classe a un [PartitionKey][] propriété qui permet de hello expéditeur toospecify une valeur qui est hachée tooproduce une attribution de partition.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-154">hello [EventData][] class has a [PartitionKey][] property that enables hello sender toospecify a value that is hashed tooproduce a partition assignment.</span></span> <span data-ttu-id="c9ea7-155">À l’aide d’une clé de partition garantit que tous les hello événements avec la même clé sont envoyés de hello toohello même partition de concentrateur d’événements hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-155">Using a partition key ensures that all hello events with hello same key are sent toohello same partition in hello event hub.</span></span> <span data-ttu-id="c9ea7-156">Les clés de partition courantes incluent des ID de session utilisateur et des ID d’expéditeur uniques.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="c9ea7-157">Hello [PartitionKey][] propriété est facultative et peut être fournie lors de l’utilisation de hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) ou [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) méthodes.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-157">hello [PartitionKey][] property is optional and can be provided when using hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="c9ea7-158">Si vous ne fournissez pas de valeur pour [PartitionKey][], envoyé les événements sont distribuées toopartitions à l’aide d’un modèle de tourniquet.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-158">If you do not provide a value for [PartitionKey][], sent events are distributed toopartitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="c9ea7-159">Considérations relatives à la disponibilité</span><span class="sxs-lookup"><span data-stu-id="c9ea7-159">Availability considerations</span></span>

<span data-ttu-id="c9ea7-160">L’utilisation d’une clé de partition est facultative, et vous devez considérer soigneusement ou non toouse une.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-160">Using a partition key is optional, and you should consider carefully whether or not toouse one.</span></span> <span data-ttu-id="c9ea7-161">Dans de nombreux cas, l’utilisation d’une clé de partition est un bon choix si l’ordre des événements est important.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="c9ea7-162">Lorsque vous utilisez une clé de partition, les partitions nécessitent une disponibilité sur un nœud unique, et des interruptions peuvent se produire dans le temps, par exemple, lors du redémarrage et de la correction des nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="c9ea7-163">Par conséquent, si vous définissez un ID de partition et cette partition devient indisponible pour une raison quelconque, une tentative de tooaccess hello des données de cette partition échouera.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt tooaccess hello data in that partition will fail.</span></span> <span data-ttu-id="c9ea7-164">Si la haute disponibilité est plus importante, ne spécifiez pas de clé de partition ; Dans ce cas les événements doivent être envoyés toopartitions à l’aide du modèle de tourniquet hello décrit précédemment.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-164">If high availability is most important, do not specify a partition key; in that case events will be sent toopartitions using hello round-robin model described previously.</span></span> <span data-ttu-id="c9ea7-165">Dans ce scénario, vous effectuez un choix explicite entre la disponibilité (aucun ID de partition) et la cohérence (épinglage événements tooa partition ID).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events tooa partition ID).</span></span>

<span data-ttu-id="c9ea7-166">Une autre considération peut être la gestion des retards dans le traitement des événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="c9ea7-167">Dans certains cas, il peut être une meilleure toodrop données et recommencez à tootry et suivre le traitement, qui peut entraîner des retards de traitement ultérieur en aval.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-167">In some cases it might be better toodrop data and retry than tootry and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="c9ea7-168">Par exemple, avec un téléscripteur il est mieux toowait pour les données à jour terminées, mais dans une conversation en direct ou un scénario VOIP vous préférez que les données de salutation rapidement, même si elle n’est pas terminée.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-168">For example, with a stock ticker it's better toowait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have hello data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="c9ea7-169">Étant donné ces considérations sur la disponibilité, dans ces scénarios vous pouvez choisir une des hello suivant des stratégies de gestion des erreurs :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-169">Given these availability considerations, in these scenarios you might choose one of hello following error handling strategies:</span></span>

- <span data-ttu-id="c9ea7-170">Arrêter (arrêter la lecture à partir de concentrateurs d’événements jusqu’à la résolution des problèmes)</span><span class="sxs-lookup"><span data-stu-id="c9ea7-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="c9ea7-171">Supprimer (les messages ne sont pas importants, les supprimer)</span><span class="sxs-lookup"><span data-stu-id="c9ea7-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="c9ea7-172">Nouvelle tentative (hello Réessayer les messages que vous consultez ajuster)</span><span class="sxs-lookup"><span data-stu-id="c9ea7-172">Retry (retry hello messages as you see fit)</span></span>
- <span data-ttu-id="c9ea7-173">[Lettres mortes](../service-bus-messaging/service-bus-dead-letter-queues.md) (utilisez une file d’attente ou un autre toodead de concentrateur d’événements lettre uniquement les messages hello vous n’a pas pu traiter)</span><span class="sxs-lookup"><span data-stu-id="c9ea7-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub toodead letter only hello messages you couldn’t process)</span></span>

<span data-ttu-id="c9ea7-174">Pour plus d’informations et une discussion à propos de hello compromis entre la disponibilité et la cohérence, consultez [disponibilité et la cohérence dans les concentrateurs d’événements](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-174">For more information and a discussion about hello trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="c9ea7-175">Opérations d'envoi d’événements par lot</span><span class="sxs-lookup"><span data-stu-id="c9ea7-175">Batch event send operations</span></span>
<span data-ttu-id="c9ea7-176">L’envoi d'événements par lots peut augmenter considérablement le débit.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="c9ea7-177">Hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) méthode prend un **IEnumerable** paramètre de type [EventData][] et envoie hello lot entier comme un concentrateur d’événements toohello opération atomique.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-177">hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends hello entire batch as an atomic operation toohello event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="c9ea7-178">Notez qu’un seul lot ne doit pas dépasser hello 256 Ko d’un événement.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-178">Note that a single batch must not exceed hello 256 KB limit of an event.</span></span> <span data-ttu-id="c9ea7-179">En outre, chaque message hello lot utilise hello même identité du serveur de publication.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-179">Additionally, each message in hello batch uses hello same publisher identity.</span></span> <span data-ttu-id="c9ea7-180">Il s’agit de responsabilité hello de hello expéditeur tooensure qui hello lot ne dépasse pas la taille d’événement maximale hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-180">It is hello responsibility of hello sender tooensure that hello batch does not exceed hello maximum event size.</span></span> <span data-ttu-id="c9ea7-181">Le cas échéant, une erreur **Send** cliente est générée.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="c9ea7-182">Envoi de manière asynchrone et envoi à l'échelle</span><span class="sxs-lookup"><span data-stu-id="c9ea7-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="c9ea7-183">Vous pouvez également envoyer le concentrateur d’événements événements tooan en mode asynchrone.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-183">You can also send events tooan event hub asynchronously.</span></span> <span data-ttu-id="c9ea7-184">Envoi de façon asynchrone peut augmenter la vitesse hello à laquelle un client est en mesure de toosend événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-184">Sending asynchronously can increase hello rate at which a client is able toosend events.</span></span> <span data-ttu-id="c9ea7-185">Les deux hello [envoyer](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) et [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) méthodes sont disponibles dans les versions asynchrones qui retournent un [tâche](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) objet.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-185">Both hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="c9ea7-186">Alors que cette technique peut augmenter le débit, il peut également entraîner hello client toocontinue toosend événements même si elle est limitée par hello service Event Hubs et peut entraîner le dysfonctionnement client hello ou messages perdus si n’est pas correctement implémenté.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-186">While this technique can increase throughput, it can also cause hello client toocontinue toosend events even while it is being throttled by hello Event Hubs service and can result in hello client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="c9ea7-187">En outre, vous pouvez utiliser hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) propriété sur les options de nouvelle tentative hello client toocontrol client.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-187">In addition, you can use hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on hello client toocontrol client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="c9ea7-188">Création d'un expéditeur de partition</span><span class="sxs-lookup"><span data-stu-id="c9ea7-188">Create a partition sender</span></span>
<span data-ttu-id="c9ea7-189">Bien qu’il soit plus courantes hub de l’événement tooan de l’événements toosend sans une clé de partition, dans certains cas, vous pouvez choisir les événements toosend directement les tooa une partition donnée.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-189">Although it is most common toosend events tooan event hub without a partition key, in some cases you might want toosend events directly tooa given partition.</span></span> <span data-ttu-id="c9ea7-190">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="c9ea7-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) retourne un [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) de l’objet que vous pouvez utiliser la partition de concentrateur toopublish événements tooa événement spécifique.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use toopublish events tooa specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="c9ea7-192">Consommateurs d'événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-192">Event consumers</span></span>
<span data-ttu-id="c9ea7-193">Les concentrateurs d’événements ont deux modèles principaux pour la consommation d'événements : des récepteurs directs et des abstractions de niveau supérieur, comme [EventProcessorHost][]par exemple.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="c9ea7-194">Récepteurs directs sont responsables de leur propre coordination de toopartitions d’accès dans un groupe de consommateurs.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-194">Direct receivers are responsible for their own coordination of access toopartitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="c9ea7-195">Consommateur direct</span><span class="sxs-lookup"><span data-stu-id="c9ea7-195">Direct consumer</span></span>
<span data-ttu-id="c9ea7-196">Hello tooread de façon la plus directe d’une partition dans un groupe de consommateurs est toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) classe.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-196">hello most direct way tooread from a partition within a consumer group is toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="c9ea7-197">toocreate une instance de cette classe, vous devez utiliser une instance de hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) classe.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-197">toocreate an instance of this class, you must use an instance of hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="c9ea7-198">Dans l’exemple suivant de hello, hello partition QU'ID doit être spécifié lors de la création du récepteur hello pour le groupe de consommateurs hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-198">In hello following example, hello partition ID must be specified when creating hello receiver for hello consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="c9ea7-199">Hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) méthode a plusieurs surcharges qui facilitent le contrôle sur le lecteur hello en cours de création.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-199">hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over hello reader being created.</span></span> <span data-ttu-id="c9ea7-200">Ces méthodes incluent la spécification d’un décalage comme une chaîne ou un horodatage et hello capacité toospecify si tooinclude ce décalage spécifié Bonjour retourné de flux, ou démarrer après elle.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-200">These methods include specifying an offset as either a string or timestamp, and hello ability toospecify whether tooinclude this specified offset in hello returned stream, or start after it.</span></span> <span data-ttu-id="c9ea7-201">Après avoir créé le récepteur de hello, vous pouvez démarrer la réception des événements sur hello retourné d’objet.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-201">After you create hello receiver, you can start receiving events on hello returned object.</span></span> <span data-ttu-id="c9ea7-202">Hello [réception](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) méthode comporte quatre surcharges que hello contrôle recevoir les paramètres de l’opération, telles que la taille de lot et le temps d’attente.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-202">hello [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control hello receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="c9ea7-203">Vous pouvez utiliser des versions asynchrones de hello de ces méthodes tooincrease hello de débit d’un consommateur.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-203">You can use hello asynchronous versions of these methods tooincrease hello throughput of a consumer.</span></span> <span data-ttu-id="c9ea7-204">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="c9ea7-205">Avec une partition spécifique de tooa égard, messages hello sont reçus dans l’ordre de hello dans lequel ils ont été envoyés toohello concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-205">With respect tooa specific partition, hello messages are received in hello order in which they were sent toohello event hub.</span></span> <span data-ttu-id="c9ea7-206">décalage de Hello est un tooidentify utilisé jeton chaîne un message dans une partition.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-206">hello offset is a string token used tooidentify a message in a partition.</span></span>

<span data-ttu-id="c9ea7-207">Notez qu'une partition unique dans un groupe de consommateurs ne peut pas avoir plus de 5 lecteurs simultanés connectés à tout moment.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="c9ea7-208">Comme les lecteurs se connectent ou sont déconnectent, leurs sessions peuvent rester actives pendant plusieurs minutes avant que le service de hello reconnaît leur déconnexion.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-208">As readers connect or become disconnected, their sessions might stay active for several minutes before hello service recognizes that they have disconnected.</span></span> <span data-ttu-id="c9ea7-209">Pendant ce temps, la reconnexion tooa partition risque d’échouer.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-209">During this time, reconnecting tooa partition may fail.</span></span> <span data-ttu-id="c9ea7-210">Pour obtenir un exemple complet de l’écriture de récepteur direct pour les concentrateurs d’événements, consultez hello [récepteurs directs de concentrateurs d’événements](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) exemple.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-210">For a complete example of writing a direct receiver for Event Hubs, see hello [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="c9ea7-211">Hôte du processeur d’événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-211">Event processor host</span></span>
<span data-ttu-id="c9ea7-212">Hello [EventProcessorHost][] classe traite les données à partir de concentrateurs d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-212">hello [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="c9ea7-213">Vous devez utiliser cette implémentation lors de la création de lecteurs d’événements sur la plateforme .NET de hello.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-213">You should use this implementation when building event readers on hello .NET platform.</span></span> <span data-ttu-id="c9ea7-214">[EventProcessorHost][] fournit un environnement d'exécution sécurisé, multiprocessus, thread-safe pour des implémentations d’événements qui fournissent également une gestion de contrôle et de location de partition.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="c9ea7-215">toouse hello [EventProcessorHost][] (classe), vous pouvez implémenter [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="c9ea7-215">toouse hello [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="c9ea7-216">Cette interface contient trois méthodes :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="c9ea7-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="c9ea7-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="c9ea7-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="c9ea7-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="c9ea7-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="c9ea7-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="c9ea7-220">traitement des événements toostart instancier [EventProcessorHost][], en fournissant les paramètres appropriés hello pour votre concentrateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-220">toostart event processing, instantiate [EventProcessorHost][], providing hello appropriate parameters for your event hub.</span></span> <span data-ttu-id="c9ea7-221">Ensuite, appelez [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister votre [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implémentation avec hello runtime.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with hello runtime.</span></span> <span data-ttu-id="c9ea7-222">À ce stade, les hôtes hello va tenter de tooacquire un bail sur chaque partition dans le concentrateur d’événements hello à l’aide d’un algorithme « greedy ».</span><span class="sxs-lookup"><span data-stu-id="c9ea7-222">At this point, hello host will attempt tooacquire a lease on every partition in hello event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="c9ea7-223">Ces baux sont valables pour une période donnée et doivent ensuite être renouvelés.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="c9ea7-224">Comme les nouveaux nœuds dans ce cas, les instances de processus de travail en ligne, ils placent des réservations de baux et au fil du temps chargement de hello déplace entre les nœuds que chacun tentatives tooacquire baux supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time hello load shifts between nodes as each attempts tooacquire more leases.</span></span>

![Hôte du processeur d’événements](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="c9ea7-226">Au fil du temps, un équilibre est établi.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="c9ea7-227">Cette capacité dynamique permet tooconsumers toobe appliqué de processeur l’échelle pour la montée en puissance parallèle et l’échelle vers le bas.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-227">This dynamic capability enables CPU-based autoscaling toobe applied tooconsumers for both scale-up and scale-down.</span></span> <span data-ttu-id="c9ea7-228">Concentrateurs d’événements n’ont pas de concept direct de nombres de messages, l’utilisation moyenne du processeur est souvent hello mécanisme toomeasure arrière principale ou consommateur mieux.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often hello best mechanism toomeasure back end or consumer scale.</span></span> <span data-ttu-id="c9ea7-229">Si les éditeurs commencent toopublish que plus d’événements que les consommateurs peuvent traiter, augmentation du processeur hello consommateurs peut être utilisé toocause une à l’échelle automatique sur le nombre d’instances de processus de travail.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-229">If publishers begin toopublish more events than consumers can process, hello CPU increase on consumers can be used toocause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="c9ea7-230">Hello [EventProcessorHost][] classe implémente également un mécanisme de points de contrôle basée sur le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-230">hello [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="c9ea7-231">Cette hello magasins de mécanisme de décalage sur une base par partition, pour que chaque consommateur puisse déterminer quelles hello dernier point de contrôle à partir de consommateur précédente de hello s’est produite.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-231">This mechanism stores hello offset on a per partition basis, so that each consumer can determine what hello last checkpoint from hello previous consumer was.</span></span> <span data-ttu-id="c9ea7-232">En tant que partitions transitent entre les nœuds via des baux, il s’agit d’un mécanisme de synchronisation de hello qui facilite le décalage de charge.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-232">As partitions transition between nodes via leases, this is hello synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="c9ea7-233">Révocation de l’éditeur</span><span class="sxs-lookup"><span data-stu-id="c9ea7-233">Publisher revocation</span></span>
<span data-ttu-id="c9ea7-234">En outre toohello avancés des fonctionnalités d’exécution de [EventProcessorHost][], concentrateurs d’événements permet la révocation d’éditeur dans l’ordre tooblock des éditeurs spécifiques d’envoi de concentrateur d’événements événements tooan.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-234">In addition toohello advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order tooblock specific publishers from sending event tooan event hub.</span></span> <span data-ttu-id="c9ea7-235">Ces fonctionnalités sont particulièrement utiles si un jeton de serveur de publication a été compromis, ou une mise à jour logicielle est à l’origine les toobehave inappropriée.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them toobehave inappropriately.</span></span> <span data-ttu-id="c9ea7-236">Dans ces situations, l’identité du serveur de publication hello, qui fait partie de leur jeton SAS, peut être bloquée à partir d’événements de publication.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-236">In these situations, hello publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="c9ea7-237">Pour plus d’informations sur la révocation d’éditeur et toosend concentrateurs tooEvent en tant qu’éditeur, voir hello [publication concentrateurs d’événements grande échelle Secure](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) exemple.</span><span class="sxs-lookup"><span data-stu-id="c9ea7-237">For more information about publisher revocation and how toosend tooEvent Hubs as a publisher, see hello [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c9ea7-238">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="c9ea7-238">Next steps</span></span>
<span data-ttu-id="c9ea7-239">toolearn en savoir plus sur les scénarios de concentrateurs d’événements, consultez ces liens :</span><span class="sxs-lookup"><span data-stu-id="c9ea7-239">toolearn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="c9ea7-240">Vue d’ensemble de l'API Event Hubs</span><span class="sxs-lookup"><span data-stu-id="c9ea7-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="c9ea7-241">Qu’est-ce qu’Event Hubs</span><span class="sxs-lookup"><span data-stu-id="c9ea7-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="c9ea7-242">Disponibilité et cohérence dans Event Hubs</span><span class="sxs-lookup"><span data-stu-id="c9ea7-242">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="c9ea7-243">Informations de référence des API hôtes du processeur d’événements</span><span class="sxs-lookup"><span data-stu-id="c9ea7-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager
[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient
[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata
[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey
[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost
