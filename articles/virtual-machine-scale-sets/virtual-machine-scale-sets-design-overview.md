---
title: "aaaDesign considérations pour les groupes de mise à l’échelle de machines virtuelles Azure | Documents Microsoft"
description: "En savoir plus sur les considérations relatives à la conception des groupes de machines virtuelles identiques Azure"
keywords: machine virtuelle linux, groupes de machines virtuelles identiques
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: f8644d36fe5903bd4b74df26dca5dc3211ee3516
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="2a687-104">Considérations relatives à la conception des groupes de machines virtuelles identiques</span><span class="sxs-lookup"><span data-stu-id="2a687-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="2a687-105">Cette rubrique présente les considérations à prendre en compte pour créer des groupes de machines virtuelles identiques.</span><span class="sxs-lookup"><span data-stu-id="2a687-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="2a687-106">Pour plus d’informations sur les machines virtuelles identiques, consultez trop[vue d’ensemble des jeux de Machine virtuelle mise à l’échelle](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2a687-106">For information about what Virtual Machine Scale Sets are, refer too[Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-toouse-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="2a687-107">Lorsque mise à l’échelle toouse définit au lieu de machines virtuelles ?</span><span class="sxs-lookup"><span data-stu-id="2a687-107">When toouse scale sets instead of virtual machines?</span></span>
<span data-ttu-id="2a687-108">En règle générale, les groupes identiques sont utiles pour le déploiement d’infrastructures hautement disponibles où un ensemble de machines a une configuration similaire.</span><span class="sxs-lookup"><span data-stu-id="2a687-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="2a687-109">Toutefois, certaines fonctionnalités sont uniquement disponibles dans les groupes identiques, tandis que d’autres le sont seulement dans les machines virtuelles individuelles.</span><span class="sxs-lookup"><span data-stu-id="2a687-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="2a687-110">Dans commande toomake quand une décision informée toouse chaque technologie, nous devons tout d’abord examiner certaines des fonctionnalités hello couramment utilisé qui sont disponibles dans les jeux de mise à l’échelle, mais pas les ordinateurs virtuels :</span><span class="sxs-lookup"><span data-stu-id="2a687-110">In order toomake an informed decision about when toouse each technology, we should first take a look at some of hello commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="2a687-111">Fonctionnalités spécifiques des groupes identiques</span><span class="sxs-lookup"><span data-stu-id="2a687-111">Scale set-specific features</span></span>

- <span data-ttu-id="2a687-112">Une fois que vous spécifiez la configuration du jeu de mise à l’échelle hello, vous pouvez simplement mettre à jour toodeploy de propriété « capacité » hello davantage d’ordinateurs virtuels en parallèle.</span><span class="sxs-lookup"><span data-stu-id="2a687-112">Once you specify hello scale set configuration, you can simply update hello "capacity" property toodeploy more VMs in parallel.</span></span> <span data-ttu-id="2a687-113">Cela est beaucoup plus simple que d’écrire un tooorchestrate script déployer plusieurs ordinateurs virtuels individuels en parallèle.</span><span class="sxs-lookup"><span data-stu-id="2a687-113">This is much simpler than writing a script tooorchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="2a687-114">Vous pouvez [utilisez Azure mise à l’échelle tooautomatically faire évoluer un ensemble d’échelle](./virtual-machine-scale-sets-autoscale-overview.md) mais pas les ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="2a687-114">You can [use Azure Autoscale tooautomatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="2a687-115">Vous pouvez [réinitialiser les machines virtuelles des groupes identiques](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm), mais [pas les machines virtuelles individuelles](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="2a687-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="2a687-116">Vous pouvez [sur-approvisionner](./virtual-machine-scale-sets-design-overview.md) les machines virtuelles d’un groupe identique pour une fiabilité accrue et un déploiement plus rapide.</span><span class="sxs-lookup"><span data-stu-id="2a687-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="2a687-117">Vous ne peut pas faire avec des ordinateurs virtuels individuels, sauf si vous écrivez un code personnalisé toodo cela.</span><span class="sxs-lookup"><span data-stu-id="2a687-117">You cannot do this with individual VMs unless you write custom code toodo this.</span></span>
- <span data-ttu-id="2a687-118">Vous pouvez spécifier une [mise à niveau de la stratégie](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake il tooroll facilement les mises à niveau sur les machines virtuelles dans votre ensemble d’échelle.</span><span class="sxs-lookup"><span data-stu-id="2a687-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake it easy tooroll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="2a687-119">Avec des machines virtuelles individuelles, vous devez orchestrer les mises à jour vous-même.</span><span class="sxs-lookup"><span data-stu-id="2a687-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="2a687-120">Fonctionnalités spécifiques des machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="2a687-120">VM-specific features</span></span>

<span data-ttu-id="2a687-121">Sur hello autre part, certaines fonctionnalités sont uniquement disponibles dans les machines virtuelles (au moins pour hello instant) :</span><span class="sxs-lookup"><span data-stu-id="2a687-121">On hello other hand, some features are only available in VMs (at least for hello time being):</span></span>

- <span data-ttu-id="2a687-122">Vous pouvez attacher toospecific de disques de données des ordinateurs virtuels individuels, mais que les disques de données attachés sont configurés pour tous les ordinateurs virtuels dans un ensemble d’échelle.</span><span class="sxs-lookup"><span data-stu-id="2a687-122">You can attach data disks toospecific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="2a687-123">Vous pouvez attacher des disques de données de non vide tooindividual machines virtuelles, mais pas les machines virtuelles dans un ensemble d’échelle.</span><span class="sxs-lookup"><span data-stu-id="2a687-123">You can attach non-empty data disks tooindividual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="2a687-124">Vous pouvez prendre un instantané d’une machine virtuelle individuelle, mais cela n’est pas possible dans un groupe identique.</span><span class="sxs-lookup"><span data-stu-id="2a687-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="2a687-125">Vous pouvez capturer une image à partir d’une machine virtuelle individuelle, mais cela n’est pas possible dans un groupe identique.</span><span class="sxs-lookup"><span data-stu-id="2a687-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="2a687-126">Vous pouvez migrer une machine virtuelle individuelle à partir de disques de toomanaged disques native, mais vous ne pouvez pas le faire pour les machines virtuelles dans un ensemble d’échelle.</span><span class="sxs-lookup"><span data-stu-id="2a687-126">You can migrate an individual VM from native disks toomanaged disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="2a687-127">Vous pouvez affecter des adresses IP publiques IPv6 NIC de machine virtuelle tooindividual mais ne peut pas le faire pour les machines virtuelles dans un ensemble d’échelle.</span><span class="sxs-lookup"><span data-stu-id="2a687-127">You can assign IPv6 public IP addresses tooindividual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="2a687-128">Notez que vous pouvez affecter des adresses IP publiques IPv6 équilibrages tooload devant soit des ordinateurs virtuels individuels ou ensemble d’échelle de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="2a687-128">Note that you can assign IPv6 public IP addresses tooload balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="2a687-129">Storage</span><span class="sxs-lookup"><span data-stu-id="2a687-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="2a687-130">Groupes identiques avec Azure Managed Disks</span><span class="sxs-lookup"><span data-stu-id="2a687-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="2a687-131">Les groupes identiques peuvent être créés avec [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) plutôt qu’à partir des comptes de stockage Azure traditionnels.</span><span class="sxs-lookup"><span data-stu-id="2a687-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="2a687-132">Disques gérés fournissent hello avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="2a687-132">Managed Disks provide hello following benefits:</span></span>
- <span data-ttu-id="2a687-133">Vous n’avez pas toopre-créer un ensemble de comptes de stockage Azure pour l’ensemble d’échelle de hello de machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="2a687-133">You do not have toopre-create a set of Azure storage accounts for hello scale set VMs.</span></span>
- <span data-ttu-id="2a687-134">Vous pouvez définir [disques de données associés](virtual-machine-scale-sets-attached-disks.md) pour hello machines virtuelles dans votre échelle définie.</span><span class="sxs-lookup"><span data-stu-id="2a687-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for hello VMs in your scale set.</span></span>
- <span data-ttu-id="2a687-135">Groupes identiques peuvent être configurés trop[prennent en charge des too1, 000 machines virtuelles dans un jeu de](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2a687-135">Scale sets can be configured too[support up too1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="2a687-136">Si vous avez un modèle existant, vous pouvez également [mettre à jour hello modèle toouse géré disques](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="2a687-136">If you have an existing template, you can also [update hello template toouse Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="2a687-137">Stockage géré par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="2a687-137">User-managed Storage</span></span>
<span data-ttu-id="2a687-138">Un ensemble d’échelle n’est pas défini avec des disques gérés Azure s’appuie sur créés par l’utilisateur de stockage comptes toostore hello du système d’exploitation des disques de machines virtuelles de hello dans hello ensemble.</span><span class="sxs-lookup"><span data-stu-id="2a687-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts toostore hello OS disks of hello VMs in hello set.</span></span> <span data-ttu-id="2a687-139">Un ratio de 20 ordinateurs virtuels au maximum par compte de stockage est recommandé tooachieve des e/s maximum et également tirer parti de _un surapprovisionnement_ (voir ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="2a687-139">A ratio of 20 VMs per storage account or less is recommended tooachieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="2a687-140">Il est également recommandé que vous répartis hello premiers caractères des noms de compte de stockage hello alphabet de hello.</span><span class="sxs-lookup"><span data-stu-id="2a687-140">It is also recommended that you spread hello beginning characters of hello storage account names across hello alphabet.</span></span> <span data-ttu-id="2a687-141">Cette méthode améliore la répartition sur les différents systèmes internes.</span><span class="sxs-lookup"><span data-stu-id="2a687-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="2a687-142">Sur-approvisionnement</span><span class="sxs-lookup"><span data-stu-id="2a687-142">Overprovisioning</span></span>
<span data-ttu-id="2a687-143">Échelle définit par défaut actuellement trop » un surapprovisionnement » les ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="2a687-143">Scale sets currently default too"overprovisioning" VMs.</span></span> <span data-ttu-id="2a687-144">Avec un surapprovisionnement sous tension, mise à l’échelle hello définie réellement spins plus des ordinateurs virtuels que vous avez demandé, puis supprime hello des machines virtuelles supplémentaires une fois hello a demandé le nombre de machines virtuelles sont correctement configurés.</span><span class="sxs-lookup"><span data-stu-id="2a687-144">With overprovisioning turned on, hello scale set actually spins up more VMs than you asked for, then deletes hello extra VMs once hello requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="2a687-145">Le sur-approvisionnement améliore les taux de réussite de l’approvisionnement et réduit la durée du déploiement.</span><span class="sxs-lookup"><span data-stu-id="2a687-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="2a687-146">Vous n’êtes pas facturé pour hello des machines virtuelles supplémentaires et ils ne comptent pas pour les limites de quota.</span><span class="sxs-lookup"><span data-stu-id="2a687-146">You are not billed for hello extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="2a687-147">Pendant un surapprovisionnement améliore-t-il les taux de réussite de mise en service, il peut provoquer un comportement déroutant pour une application est conçue pas toohandle des machines virtuelles supplémentaires qui apparaissent et puis disparaît.</span><span class="sxs-lookup"><span data-stu-id="2a687-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed toohandle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="2a687-148">tooturn un surapprovisionnement, assurez-vous d’avoir hello suivent la chaîne dans votre modèle : `"overprovision": "false"`.</span><span class="sxs-lookup"><span data-stu-id="2a687-148">tooturn overprovisioning off, ensure you have hello following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="2a687-149">Vous trouverez plus de détails dans hello [documentation de l’API REST de définir l’échelle](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span><span class="sxs-lookup"><span data-stu-id="2a687-149">More details can be found in hello [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="2a687-150">Si votre ensemble d’échelle utilise le stockage géré par l’utilisateur et que vous désactivez un surapprovisionnement, vous pouvez avoir plus de 20 ordinateurs virtuels par compte de stockage, mais toogo au-dessus de 40 pour des raisons de performances d’e/s n’est pas recommandée.</span><span class="sxs-lookup"><span data-stu-id="2a687-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended toogo above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="2a687-151">limites</span><span class="sxs-lookup"><span data-stu-id="2a687-151">Limits</span></span>
<span data-ttu-id="2a687-152">Un ensemble d’échelle basée sur une image de Marketplace (également appelé une image de plateforme) et configuré toouse que disques gérés de Azure prend en charge une capacité de configuration too1, 000 machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="2a687-152">A scale set built on a Marketplace image (also known as a platform image) and configured toouse Azure Managed Disks supports a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="2a687-153">Si vous configurez votre toosupport de jeu de mise à l’échelle plus de 100 machines virtuelles, pas tous les scénarios travail hello identiques (par exemple l’équilibrage de charge).</span><span class="sxs-lookup"><span data-stu-id="2a687-153">If you configure your scale set toosupport more than 100 VMs, not all scenarios work hello same (for example load balancing).</span></span> <span data-ttu-id="2a687-154">Pour plus d’informations, consultez [Utilisation de grands groupes de machines virtuelles identiques](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="2a687-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="2a687-155">Une échelle configurée avec des comptes de stockage géré par l’utilisateur est actuellement limitée too100 VMs (et les comptes de stockage 5 sont recommandés pour cette échelle).</span><span class="sxs-lookup"><span data-stu-id="2a687-155">A scale set configured with user-managed storage accounts is currently limited too100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="2a687-156">Un ensemble d’échelle reposant sur une image personnalisée (une par vous) peut avoir une capacité d’ordinateurs virtuels de too100 lorsque configurés avec des disques gérés par Azure.</span><span class="sxs-lookup"><span data-stu-id="2a687-156">A scale set built on a custom image (one built by you) can have a capacity of up too100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="2a687-157">Si l’ensemble d’échelle hello est configuré avec des comptes de stockage géré par l’utilisateur, il doit créer tous les disques durs virtuels de disque du système d’exploitation au sein d’un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="2a687-157">If hello scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="2a687-158">Par conséquent, au maximum hello le nombre recommandé de machines virtuelles dans un ensemble d’échelle reposant sur une image personnalisée et stockage géré par l’utilisateur est 20.</span><span class="sxs-lookup"><span data-stu-id="2a687-158">As a result, hello maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="2a687-159">Si vous désactivez un surapprovisionnement, vous pouvez monter too40.</span><span class="sxs-lookup"><span data-stu-id="2a687-159">If you turn off overprovisioning, you can go up too40.</span></span>

<span data-ttu-id="2a687-160">Pour les machines virtuelles plus que de permettent à ces limites, vous devez toodeploy échelle multiples définit comme indiqué dans [ce modèle](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="2a687-160">For more VMs than these limits allow, you need toodeploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>

