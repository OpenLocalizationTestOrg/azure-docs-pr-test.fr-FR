---
title: "Présentation du pare-feu d’applications web (WAF) pour la passerelle Application Gateway Azure | Microsoft Docs"
description: "Cette page fournit une vue d’ensemble du pare-feu d’applications web (WAF) pour la passerelle Application Gateway"
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 50863b60f2843f033bdb07f4564d937cd6f0b7be
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="828de-103">Pare-feu d’applications web (WAF)</span><span class="sxs-lookup"><span data-stu-id="828de-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="828de-104">Le pare-feu d’applications Web (WAF) est une fonctionnalité de passerelle d’application qui protège vos applications web de manière centralisée contre les vulnérabilités et exploits courants.</span><span class="sxs-lookup"><span data-stu-id="828de-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="828de-105">Le pare-feu d’applications web suit les règles des [Ensembles de règles de base OWASP](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 ou 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="828de-105">Web application firewall is based on rules from the [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="828de-106">Les applications Web sont de plus en plus la cible d’attaques malveillantes qui exploitent des vulnérabilités connues.</span><span class="sxs-lookup"><span data-stu-id="828de-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="828de-107">Les types d’attaques les plus courantes sont l’injection de code SQL, les attaques de script site à site, entre autres.</span><span class="sxs-lookup"><span data-stu-id="828de-107">Common among these exploits are SQL injection attacks, cross site scripting attacks to name a few.</span></span> <span data-ttu-id="828de-108">Empêcher ces attaques dans le code d’application peut se révéler difficile et nécessiter une maintenance rigoureuse, des mises à jour correctives ainsi que la surveillance au niveau de plusieurs couches de la topologie de l’application.</span><span class="sxs-lookup"><span data-stu-id="828de-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of the application topology.</span></span> <span data-ttu-id="828de-109">Un pare-feu d’applications web centralisé facilite grandement la gestion de la sécurité et offre une meilleure garantie de protection aux administrateurs de l’application contre les menaces ou les intrusions.</span><span class="sxs-lookup"><span data-stu-id="828de-109">A centralized web application firewall helps make security management much simpler and gives better assurance to application administrators against threats or intrusions.</span></span> <span data-ttu-id="828de-110">Une solution WAF peut également réagir plus rapidement à une menace de sécurité en exécutant la mise à jour corrective d’une vulnérabilité connue dans un emplacement central plutôt que de sécuriser individuellement chacune des applications web.</span><span class="sxs-lookup"><span data-stu-id="828de-110">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="828de-111">Les passerelles d’application existantes peuvent être facilement converties en une passerelle d’application avec un pare-feu d’applications web.</span><span class="sxs-lookup"><span data-stu-id="828de-111">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="828de-113">Application Gateway fonctionne comme un Application Delivery Controller (ADC) et offre une terminaison SSL, une affinité de session basée sur les cookies, une distribution de charge par tourniquet (round robin), un routage basé sur le contenu, la possibilité d’héberger plusieurs sites web et des améliorations de sécurité.</span><span class="sxs-lookup"><span data-stu-id="828de-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability to host multiple websites and security enhancements.</span></span> <span data-ttu-id="828de-114">Les améliorations de sécurité offertes par la passerelle Application Gateway incluent la gestion des stratégies SSL ainsi que prise en charge du chiffrement SSL de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="828de-114">Security enhancements offered by Application Gateway include SSL policy management, end to end SSL support.</span></span> <span data-ttu-id="828de-115">La sécurité de l’application est désormais renforcée par l’intégration directe du pare-feu d’applications web (WAF) à l’offre ADC.</span><span class="sxs-lookup"><span data-stu-id="828de-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into the ADC offering.</span></span> <span data-ttu-id="828de-116">Vous bénéficiez ainsi d’un emplacement central facile à configurer, capable de gérer et protéger vos applications web contre les vulnérabilités web courantes.</span><span class="sxs-lookup"><span data-stu-id="828de-116">This provides an easy to configure central location to manage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="828de-117">Avantages</span><span class="sxs-lookup"><span data-stu-id="828de-117">Benefits</span></span>

<span data-ttu-id="828de-118">Voici les principaux avantages liés à Application Gateway et au pare-feu d’applications web :</span><span class="sxs-lookup"><span data-stu-id="828de-118">The following are the core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="828de-119">Protection</span><span class="sxs-lookup"><span data-stu-id="828de-119">Protection</span></span>

* <span data-ttu-id="828de-120">Protection de votre application web contre les vulnérabilités et les attaques web sans modification du code principal.</span><span class="sxs-lookup"><span data-stu-id="828de-120">Protect your web application from web vulnerabilities and attacks without modification to backend code.</span></span>

* <span data-ttu-id="828de-121">Protection simultanée de plusieurs applications web derrière une passerelle d’application.</span><span class="sxs-lookup"><span data-stu-id="828de-121">Protect multiple web applications at the same time behind an application gateway.</span></span> <span data-ttu-id="828de-122">La passerelle d’application peut héberger jusqu’à 20 sites web derrière une passerelle unique, protégeant ainsi tous ces sites contre les attaques web avec le pare-feu d’applications web.</span><span class="sxs-lookup"><span data-stu-id="828de-122">Application gateway supports hosting up to 20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="828de-123">Surveillance</span><span class="sxs-lookup"><span data-stu-id="828de-123">Monitoring</span></span>

* <span data-ttu-id="828de-124">Analysez les attaques contre votre application web à l’aide d’un journal WAF en temps réel.</span><span class="sxs-lookup"><span data-stu-id="828de-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="828de-125">Ce journal est intégré à [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) pour effectuer le suivi des journaux et alertes WAF et analyser facilement les tendances.</span><span class="sxs-lookup"><span data-stu-id="828de-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) to track WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="828de-126">WAF sera bientôt intégré à Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="828de-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="828de-127">Azure Security Center vous offre un aperçu central de l’état de sécurité de toutes vos ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="828de-127">Azure Security Center allows for a central view of the security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="828de-128">Personnalisation</span><span class="sxs-lookup"><span data-stu-id="828de-128">Customization</span></span>

* <span data-ttu-id="828de-129">Possibilité de personnaliser des règles et groupes de règles WAF pour les besoins de votre application et éliminer les faux positifs.</span><span class="sxs-lookup"><span data-stu-id="828de-129">The ability to customize WAF rules and rule groups to suit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="828de-130">Caractéristiques</span><span class="sxs-lookup"><span data-stu-id="828de-130">Features</span></span>

<span data-ttu-id="828de-131">Le pare-feu d’applications web est préconfiguré avec CRS 3.0 par défaut. Vous pouvez aussi d’utiliser la version 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="828de-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose to use 2.2.9.</span></span> <span data-ttu-id="828de-132">CRS 3.0 permet une réduction des faux positifs au-delà de la version 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="828de-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="828de-133">Il est possible de [personnaliser des règles en fonction de vos besoins](application-gateway-customize-waf-rules-portal.md).</span><span class="sxs-lookup"><span data-stu-id="828de-133">The ability to [customize rules to suit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="828de-134">Le pare-feu d’applications web protège notamment des vulnérabilités web courantes suivantes :</span><span class="sxs-lookup"><span data-stu-id="828de-134">Some of the common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="828de-135">Protection contre les injections de code SQL</span><span class="sxs-lookup"><span data-stu-id="828de-135">SQL injection protection</span></span>
* <span data-ttu-id="828de-136">Protection de l’exécution de script de site à site</span><span class="sxs-lookup"><span data-stu-id="828de-136">Cross site scripting protection</span></span>
* <span data-ttu-id="828de-137">Protection contre les attaques web courante comme l’injection de commande, les dissimulations de requêtes HTTP, la séparation de réponse HTTP et les attaques RFI (Remote File Inclusion)</span><span class="sxs-lookup"><span data-stu-id="828de-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="828de-138">Protection contre les violations de protocole HTTP</span><span class="sxs-lookup"><span data-stu-id="828de-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="828de-139">Protection contre les anomalies de protocole HTTP comme un agent-utilisateur hôte manquant et les en-têtes Accept</span><span class="sxs-lookup"><span data-stu-id="828de-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="828de-140">Protection contre les robots, les crawlers et les scanneurs</span><span class="sxs-lookup"><span data-stu-id="828de-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="828de-141">Détection des erreurs de configuration d’application courantes (par exemple, Apache, IIS, etc.)</span><span class="sxs-lookup"><span data-stu-id="828de-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="828de-142">Pour une liste plus détaillée des règles et de leurs protections, consultez les [ensembles de règles de base](#core-rule-sets).</span><span class="sxs-lookup"><span data-stu-id="828de-142">For a more detailed list of rules and their protections see the following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="828de-143">Ensembles de règles de base</span><span class="sxs-lookup"><span data-stu-id="828de-143">Core rule sets</span></span>

<span data-ttu-id="828de-144">Application Gateway prend en charge les ensembles de règles CRS 3.0 et CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="828de-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="828de-145">Ces ensembles de règles de base sont des ensembles de règles qui protègent vos applications web des activités malveillantes.</span><span class="sxs-lookup"><span data-stu-id="828de-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="828de-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="828de-146">OWASP_3.0</span></span>

<span data-ttu-id="828de-147">L’ensemble de règles de base 3.0 fourni dispose de 13 groupes de règles comme indiqué dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="828de-147">The 3.0 core rule set provided has 13 rule groups as shown in the following table.</span></span> <span data-ttu-id="828de-148">Chacun de ces groupes de règles contient plusieurs règles, qui peuvent être désactivées.</span><span class="sxs-lookup"><span data-stu-id="828de-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="828de-149">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="828de-149">RuleGroup</span></span>|<span data-ttu-id="828de-150">Description</span><span class="sxs-lookup"><span data-stu-id="828de-150">Description</span></span>|
|---|---|
|<span data-ttu-id="828de-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="828de-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="828de-152">Contient des règles de protection contre les expéditeurs de courrier indésirable ou les activités malveillantes connues.</span><span class="sxs-lookup"><span data-stu-id="828de-152">Contains rules to protect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="828de-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="828de-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="828de-154">Contient des règles de verrouillage des méthodes (PUT, PATCH< ..)</span><span class="sxs-lookup"><span data-stu-id="828de-154">Contains rules to lock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="828de-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="828de-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="828de-156">Contient des règles de protection contre les attaques par déni de service (DoS).</span><span class="sxs-lookup"><span data-stu-id="828de-156">Contains rules to protect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="828de-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="828de-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="828de-158">Contient des règles de protection contre les scanneurs de port et d’environnement.</span><span class="sxs-lookup"><span data-stu-id="828de-158">Contains rules to protect against port and environment scanners.</span></span>|
|<span data-ttu-id="828de-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="828de-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="828de-160">Contient des règles de protection contre les problèmes de protocole et d’encodage.</span><span class="sxs-lookup"><span data-stu-id="828de-160">Contains rules to protect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="828de-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="828de-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="828de-162">Contient des règles de protection contre les attaques par injection d’en-tête, dissimulation de requête et fractionnement de réponse</span><span class="sxs-lookup"><span data-stu-id="828de-162">Contains rules to protect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="828de-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="828de-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="828de-164">Contient des règles de protection contre les attaques par fichier et chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="828de-164">Contains rules to protect against file and path attacks.</span></span>|
|<span data-ttu-id="828de-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="828de-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="828de-166">Contient des règles de protection contre les attaques par inclusion de fichier distant (RFI)</span><span class="sxs-lookup"><span data-stu-id="828de-166">Contains rules to protect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="828de-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="828de-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="828de-168">Contient des règles de protection contre les attaques par exécution de code à distance.</span><span class="sxs-lookup"><span data-stu-id="828de-168">Contains rules to protect again Remote Code Execution.</span></span>|
|<span data-ttu-id="828de-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="828de-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="828de-170">Contient des règles de protection contre les attaques par injection de code PHP.</span><span class="sxs-lookup"><span data-stu-id="828de-170">Contains rules to protect against PHP injection attacks.</span></span>|
|<span data-ttu-id="828de-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="828de-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="828de-172">Contient des règles de protection de l’exécution de script de site à site.</span><span class="sxs-lookup"><span data-stu-id="828de-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="828de-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="828de-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="828de-174">Contient des règles de protection contre les attaques par injection de code SQL.</span><span class="sxs-lookup"><span data-stu-id="828de-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="828de-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="828de-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="828de-176">Contient des règles de protection contre les attaques par fixation de session.</span><span class="sxs-lookup"><span data-stu-id="828de-176">Contains rules to protect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="828de-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="828de-177">OWASP_2.2.9</span></span>

<span data-ttu-id="828de-178">L’ensemble de règles de base 2.2.9 fourni dispose de 10 groupes de règles comme indiqué dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="828de-178">The 2.2.9 core rule set provided has 10 rule groups as shown in the following table.</span></span> <span data-ttu-id="828de-179">Chacun de ces groupes de règles contient plusieurs règles, qui peuvent être désactivées.</span><span class="sxs-lookup"><span data-stu-id="828de-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="828de-180">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="828de-180">RuleGroup</span></span>|<span data-ttu-id="828de-181">Description</span><span class="sxs-lookup"><span data-stu-id="828de-181">Description</span></span>|
|---|---|
|<span data-ttu-id="828de-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="828de-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="828de-183">Contient des règles de protection contre les violations de protocole (caractères non valides, GET avec un corps de requête, etc..)</span><span class="sxs-lookup"><span data-stu-id="828de-183">Contains rules to protect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="828de-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="828de-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="828de-185">Contient des règles de protection contre les informations d’en-tête incorrectes.</span><span class="sxs-lookup"><span data-stu-id="828de-185">Contains rules to protect against incorrect header information.</span></span>|
|<span data-ttu-id="828de-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="828de-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="828de-187">Contient des règles de protection contre les arguments ou les fichiers qui dépassent les limites.</span><span class="sxs-lookup"><span data-stu-id="828de-187">Contains rules to protect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="828de-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="828de-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="828de-189">Contient des règles de protection contre les types de fichiers, les en-têtes et les méthodes restreints.</span><span class="sxs-lookup"><span data-stu-id="828de-189">Contains rules to protect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="828de-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="828de-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="828de-191">Contient des règles de protection contre les analyseurs et les scanneurs de sites web.</span><span class="sxs-lookup"><span data-stu-id="828de-191">Contains rules to protect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="828de-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="828de-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="828de-193">Contient des règles de protection contre les attaques génériques (par fixation de session, inclusion de fichier distant, injection de code PHP etc.).</span><span class="sxs-lookup"><span data-stu-id="828de-193">Contains rules to protect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="828de-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="828de-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="828de-195">Contient des règles de protection contre les attaques par injection de code SQL.</span><span class="sxs-lookup"><span data-stu-id="828de-195">Contains rules to protect against SQL injection attacks</span></span>|
|<span data-ttu-id="828de-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="828de-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="828de-197">Contient des règles de protection de l’exécution de script de site à site.</span><span class="sxs-lookup"><span data-stu-id="828de-197">Contains rules to protect against cross site scripting.</span></span>|
|<span data-ttu-id="828de-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="828de-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="828de-199">Contient une règle de protection contre les attaques par traversée de chemin</span><span class="sxs-lookup"><span data-stu-id="828de-199">Contains a rule to protect against path traversal attacks</span></span>|
|<span data-ttu-id="828de-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="828de-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="828de-201">Contient des règles de protection contre les chevaux de Troie.</span><span class="sxs-lookup"><span data-stu-id="828de-201">Contains rules to protect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="828de-202">Modes WAF</span><span class="sxs-lookup"><span data-stu-id="828de-202">WAF Modes</span></span>

<span data-ttu-id="828de-203">Application Gateway WAF peut être configuré pour s’exécuter dans les deux modes suivants :</span><span class="sxs-lookup"><span data-stu-id="828de-203">Application Gateway WAF can be configured to run in the following two modes:</span></span>

* <span data-ttu-id="828de-204">**Mode de détection** – Lorsqu’il est configuré pour s’exécuter en mode de détection, Application Gateway WAF surveille et consigne toutes les alertes de menaces dans un fichier journal.</span><span class="sxs-lookup"><span data-stu-id="828de-204">**Detection mode** – When configured to run in detection mode, Application Gateway WAF monitors and logs all threat alerts in to a log file.</span></span> <span data-ttu-id="828de-205">L’enregistrement des diagnostics pour la passerelle Application Gateway doit être activé à l’aide de la section **Diagnostics**.</span><span class="sxs-lookup"><span data-stu-id="828de-205">Logging diagnostics for Application Gateway should be turned on using the **Diagnostics** section.</span></span> <span data-ttu-id="828de-206">Vous devez également vérifier que le journal WAF est sélectionné et activé.</span><span class="sxs-lookup"><span data-stu-id="828de-206">You also need to ensure that the WAF log is selected and turned on.</span></span> <span data-ttu-id="828de-207">Le pare-feu d’applications web exécuté en mode de détection ne bloque pas les requêtes entrantes.</span><span class="sxs-lookup"><span data-stu-id="828de-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="828de-208">**Mode de prévention** – Lorsqu’il est configuré pour s’exécuter en mode de prévention, la passerelle Application Gateway bloque de façon active les intrusions et les et attaques détectées par les règles définies.</span><span class="sxs-lookup"><span data-stu-id="828de-208">**Prevention mode** – When configured to run in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="828de-209">L’attaquant reçoit une exception d’accès non autorisé de type 403 et la connexion prend fin.</span><span class="sxs-lookup"><span data-stu-id="828de-209">The attacker receives a 403 unauthorized access exception and the connection is terminated.</span></span> <span data-ttu-id="828de-210">Le mode de prévention continue de consigner ce type d’attaques dans les journaux WAF.</span><span class="sxs-lookup"><span data-stu-id="828de-210">Prevention mode continues to log such attacks in the WAF logs.</span></span>

### <span data-ttu-id="828de-211"><a name="application-gateway-waf-reports"></a>Surveillance du pare-feu d’applications web</span><span class="sxs-lookup"><span data-stu-id="828de-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="828de-212">Il est important de surveiller l’état de votre passerelle d’application.</span><span class="sxs-lookup"><span data-stu-id="828de-212">Monitoring the health of your application gateway is important.</span></span> <span data-ttu-id="828de-213">La journalisation et l’intégration à Azure Monitor, Azure Security Center (à venir), et Log Analytics permet de surveiller l’état de votre pare-feu d’applications web et des applications qu’il protège.</span><span class="sxs-lookup"><span data-stu-id="828de-213">Monitoring the health of your web application firewall and the applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![diagnostics](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="828de-215">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="828de-215">Azure Monitor</span></span>

<span data-ttu-id="828de-216">Chaque journal de passerelle d’application est intégré à [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="828de-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="828de-217">Cela vous permet d’effectuer le suivi des informations de diagnostic, y compris des alertes et des journaux WAF.</span><span class="sxs-lookup"><span data-stu-id="828de-217">This allows you to track diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="828de-218">Cette fonctionnalité est proposée dans la ressource Application Gateway sous l’onglet **Diagnostics** du portail ou directement via le service Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="828de-218">This capability is provided within the Application Gateway resource in the portal under the **Diagnostics** tab or through the Azure Monitor service directly.</span></span> <span data-ttu-id="828de-219">Pour en savoir plus sur l’activation des journaux de diagnostic pour la passerelle d’application, rendez-vous sur la page [Diagnostics Application Gateway](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="828de-219">To learn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="828de-220">Centre de sécurité Azure</span><span class="sxs-lookup"><span data-stu-id="828de-220">Azure Security Center</span></span>

<span data-ttu-id="828de-221">[Azure Security Center](../security-center/security-center-intro.md) vous aide à prévenir, détecter et résoudre les menaces grâce à une visibilité et un contrôle accrus de la sécurité de vos ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="828de-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond to threats with increased visibility into and control over the security of your Azure resources.</span></span> <span data-ttu-id="828de-222">Désormais, Application Gateway [s’intègre à Azure Security Center](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="828de-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="828de-223">Le service Azure Security Center analyse votre environnement pour détecter les applications web non protégées.</span><span class="sxs-lookup"><span data-stu-id="828de-223">Azure Security Center scans your environment to detect unprotected web applications.</span></span> <span data-ttu-id="828de-224">Il peut à présent recommander à Application Gateway WAF de protéger ces ressources vulnérables.</span><span class="sxs-lookup"><span data-stu-id="828de-224">It can now recommend application gateway WAF to protect these vulnerable resources.</span></span> <span data-ttu-id="828de-225">Vous pouvez créer des instances Application Gateway WAF directement à partir d’Azure Security Center.</span><span class="sxs-lookup"><span data-stu-id="828de-225">You can directly create application gateway WAF from the Azure Security Center.</span></span>  <span data-ttu-id="828de-226">Ces instances WAF sont intégrées à Azure Security Center et renverront des alertes et des informations d’intégrité à Azure Security Center à des fins de création de rapports.</span><span class="sxs-lookup"><span data-stu-id="828de-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back to Azure Security Center for reporting.</span></span>

![figure 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="828de-228">Journalisation</span><span class="sxs-lookup"><span data-stu-id="828de-228">Logging</span></span>

<span data-ttu-id="828de-229">Application Gateway WAF fournit des rapports détaillés sur chaque menace détectée.</span><span class="sxs-lookup"><span data-stu-id="828de-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="828de-230">La journalisation est intégrée aux journaux Azure Diagnostics et les alertes sont enregistrées au format json.</span><span class="sxs-lookup"><span data-stu-id="828de-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="828de-231">Ces journaux peuvent être intégrés à [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="828de-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="828de-233">Tarification de la référence SKU Application Gateway WAF</span><span class="sxs-lookup"><span data-stu-id="828de-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="828de-234">Le pare-feu d’applications web est disponible sous une nouvelle référence WAF.</span><span class="sxs-lookup"><span data-stu-id="828de-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="828de-235">Cette référence est disponible uniquement dans le modèle d’approvisionnement Azure Resource Manager et non sous le modèle de déploiement classique.</span><span class="sxs-lookup"><span data-stu-id="828de-235">This SKU is available only in Azure Resource Manager provisioning model and not under the classic deployment model.</span></span> <span data-ttu-id="828de-236">Par ailleurs, la référence WAF est proposée uniquement dans les instances de passerelle d’application de moyenne et grande taille.</span><span class="sxs-lookup"><span data-stu-id="828de-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="828de-237">Toutes les limites relatives à la passerelle d’application s’appliquent également à la référence WAF.</span><span class="sxs-lookup"><span data-stu-id="828de-237">All the limits for application gateway also apply to the WAF SKU.</span></span> <span data-ttu-id="828de-238">La tarification est basée sur les frais d’instance de passerelle par heure et les frais de traitement des données.</span><span class="sxs-lookup"><span data-stu-id="828de-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="828de-239">La tarification par heure de la passerelle pour la référence WAF diffère des frais de référence Standard et est accessible sur [Détails de tarification Application Gateway](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="828de-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="828de-240">Les frais de traitement des données restent inchangés.</span><span class="sxs-lookup"><span data-stu-id="828de-240">Data processing charges remain the same.</span></span> <span data-ttu-id="828de-241">Il n’existe aucun frais par règle ou groupe de règles.</span><span class="sxs-lookup"><span data-stu-id="828de-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="828de-242">Vous pouvez protéger plusieurs applications web derrière le même pare-feu d’applications web sans frais supplémentaires pour la prise en charge de plusieurs applications.</span><span class="sxs-lookup"><span data-stu-id="828de-242">You can protect multiple web applications behind the same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="828de-243">La facturation relative au pare-feu d’applications web démarre à compter du 5/5/2017. Jusque-là les passerelles de référence SKU WAF sont facturées au tarif standard.</span><span class="sxs-lookup"><span data-stu-id="828de-243">Billing for WAF starts effectively 5/5/2017, until then the WAF SKU gateways continues to be charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="828de-244">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="828de-244">Next steps</span></span>

<span data-ttu-id="828de-245">Après avoir découvert les fonctionnalités de WAF, consultez la rubrique sur la [configuration du pare-feu d’applications web sur la passerelle Application Gateway](application-gateway-web-application-firewall-portal.md).</span><span class="sxs-lookup"><span data-stu-id="828de-245">After learning more about the capabilities of WAF, visit [How to configure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>

