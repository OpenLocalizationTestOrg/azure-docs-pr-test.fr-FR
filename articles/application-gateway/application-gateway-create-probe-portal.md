---
title: "aaaCreate personnalisé sonde - passerelle d’Application Azure - Azure Portal | Documents Microsoft"
description: "Découvrez comment toocreate personnalisé sondage pour la passerelle d’Application à l’aide du portail de hello"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 9e9309045ef33ba1010868783949b4fde31619ec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-hello-portal"></a><span data-ttu-id="35c7c-103">Créer une sonde personnalisée pour la passerelle d’Application à l’aide du portail de hello</span><span class="sxs-lookup"><span data-stu-id="35c7c-103">Create a custom probe for Application Gateway by using hello portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="35c7c-104">Portail Azure</span><span class="sxs-lookup"><span data-stu-id="35c7c-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="35c7c-105">Commandes PowerShell pour Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="35c7c-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="35c7c-106">Azure Classic PowerShell</span><span class="sxs-lookup"><span data-stu-id="35c7c-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="35c7c-107">Dans cet article, vous ajoutez une passerelle existante d’application sonde personnalisée tooan via hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="35c7c-107">In this article, you add a custom probe tooan existing application gateway through hello Azure portal.</span></span> <span data-ttu-id="35c7c-108">Les sondes personnalisés sont utiles pour les applications qui ont une page de vérification d’intégrité spécifique ou pour les applications qui ne fournissent pas une réponse correcte sur l’application web de hello par défaut.</span><span class="sxs-lookup"><span data-stu-id="35c7c-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on hello default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="35c7c-109">Avant de commencer</span><span class="sxs-lookup"><span data-stu-id="35c7c-109">Before you begin</span></span>

<span data-ttu-id="35c7c-110">Si vous n’avez pas déjà d’une passerelle d’application, visitez [créer une passerelle d’Application](application-gateway-create-gateway-portal.md) toocreate un toowork de passerelle d’application avec.</span><span class="sxs-lookup"><span data-stu-id="35c7c-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) toocreate an application gateway toowork with.</span></span>

## <span data-ttu-id="35c7c-111"><a name="createprobe"></a>Création de la sonde de hello</span><span class="sxs-lookup"><span data-stu-id="35c7c-111"><a name="createprobe"></a>Create hello probe</span></span>

<span data-ttu-id="35c7c-112">Sondes sont configurés dans un processus en deux étapes via le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-112">Probes are configured in a two-step process through hello portal.</span></span> <span data-ttu-id="35c7c-113">première étape de Hello est sonde de hello toocreate.</span><span class="sxs-lookup"><span data-stu-id="35c7c-113">hello first step is toocreate hello probe.</span></span> <span data-ttu-id="35c7c-114">Dans la deuxième étape de hello, vous ajoutez des paramètres hello sonde toohello principal http de la passerelle d’application hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-114">In hello second step, you add hello probe toohello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="35c7c-115">Connectez-vous à toohello [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="35c7c-115">Log in toohello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="35c7c-116">Si vous ne possédez pas encore de compte, vous pouvez [vous inscrire pour bénéficier d’un essai gratuit d’un mois](https://azure.microsoft.com/free).</span><span class="sxs-lookup"><span data-stu-id="35c7c-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="35c7c-117">Bonjour Azure portal volet Favoris, cliquez sur toutes les ressources.</span><span class="sxs-lookup"><span data-stu-id="35c7c-117">In hello Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="35c7c-118">Cliquez sur passerelle d’application hello Bonjour toutes les lames de ressources.</span><span class="sxs-lookup"><span data-stu-id="35c7c-118">Click hello application gateway in hello All resources blade.</span></span> <span data-ttu-id="35c7c-119">Si l’abonnement hello que déjà sélectionné comporte plusieurs ressources, vous pouvez entrer partners.contoso.net Bonjour filtre par nom...</span><span class="sxs-lookup"><span data-stu-id="35c7c-119">If hello subscription you selected already has several resources in it, you can enter partners.contoso.net in hello Filter by name…</span></span> <span data-ttu-id="35c7c-120">passerelle d’application hello boîte tooeasily accès.</span><span class="sxs-lookup"><span data-stu-id="35c7c-120">box tooeasily access hello application gateway.</span></span>

1. <span data-ttu-id="35c7c-121">Cliquez sur **sondes** et cliquez sur hello **ajouter** bouton tooadd une sonde.</span><span class="sxs-lookup"><span data-stu-id="35c7c-121">Click **Probes** and click hello **Add** button tooadd a probe.</span></span>

  ![Ajouter un panneau Sonde contenant toutes les informations][1]

1. <span data-ttu-id="35c7c-123">Sur hello **sonde d’intégrité ajouter** panneau, indiquez les informations de hello requis pour la sonde de hello et lorsque vous avez terminé cliquez **OK**.</span><span class="sxs-lookup"><span data-stu-id="35c7c-123">On hello **Add health probe** blade, fill out hello required information for hello probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="35c7c-124">**Paramètre**</span><span class="sxs-lookup"><span data-stu-id="35c7c-124">**Setting**</span></span> | <span data-ttu-id="35c7c-125">**Valeur**</span><span class="sxs-lookup"><span data-stu-id="35c7c-125">**Value**</span></span> | <span data-ttu-id="35c7c-126">**Détails**</span><span class="sxs-lookup"><span data-stu-id="35c7c-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="35c7c-127">**Nom**</span><span class="sxs-lookup"><span data-stu-id="35c7c-127">**Name**</span></span>|<span data-ttu-id="35c7c-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="35c7c-128">customProbe</span></span>|<span data-ttu-id="35c7c-129">Cette valeur est une sonde toohello nom convivial qui est accessible dans le portail de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-129">This value is a friendly name toohello probe that is accessible in hello portal.</span></span>|
  |<span data-ttu-id="35c7c-130">**Protocole**</span><span class="sxs-lookup"><span data-stu-id="35c7c-130">**Protocol**</span></span>|<span data-ttu-id="35c7c-131">HTTP ou HTTPS</span><span class="sxs-lookup"><span data-stu-id="35c7c-131">HTTP or HTTPS</span></span> | <span data-ttu-id="35c7c-132">protocole Hello hello sonde d’intégrité utilise.</span><span class="sxs-lookup"><span data-stu-id="35c7c-132">hello protocol that hello health probe uses.</span></span>|
  |<span data-ttu-id="35c7c-133">**Hôte**</span><span class="sxs-lookup"><span data-stu-id="35c7c-133">**Host**</span></span>|<span data-ttu-id="35c7c-134">Par exemple,</span><span class="sxs-lookup"><span data-stu-id="35c7c-134">i.e</span></span> <span data-ttu-id="35c7c-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="35c7c-135">contoso.com</span></span>|<span data-ttu-id="35c7c-136">Cette valeur est le nom d’hôte hello qui est utilisé pour la sonde de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-136">This value is hello host name that is used for hello probe.</span></span> <span data-ttu-id="35c7c-137">S’applique uniquement lorsque plusieurs sites sont configurés sur Application Gateway, sinon utilisez '127.0.0.1'.</span><span class="sxs-lookup"><span data-stu-id="35c7c-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="35c7c-138">Cette valeur diffère du nom d’hôte de machine virtuelle de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-138">This value is different from hello VM host name.</span></span>|
  |<span data-ttu-id="35c7c-139">**Chemin d’accès**</span><span class="sxs-lookup"><span data-stu-id="35c7c-139">**Path**</span></span>|<span data-ttu-id="35c7c-140">/ ou un autre chemin</span><span class="sxs-lookup"><span data-stu-id="35c7c-140">/ or another path</span></span>|<span data-ttu-id="35c7c-141">Bonjour reste d’une url complète pour la sonde personnalisée de hello hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-141">hello remainder of hello full url for hello custom probe.</span></span> <span data-ttu-id="35c7c-142">Un chemin valide commence par « / ».</span><span class="sxs-lookup"><span data-stu-id="35c7c-142">A valid path starts with '/'.</span></span> <span data-ttu-id="35c7c-143">Chemin d’accès par défaut de hello de http://contoso.com simplement utiliser '/'</span><span class="sxs-lookup"><span data-stu-id="35c7c-143">For hello default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="35c7c-144">**Intervalle (secondes)**</span><span class="sxs-lookup"><span data-stu-id="35c7c-144">**Interval (secs)**</span></span>|<span data-ttu-id="35c7c-145">30</span><span class="sxs-lookup"><span data-stu-id="35c7c-145">30</span></span>|<span data-ttu-id="35c7c-146">La fréquence à laquelle hello sonde est exécuté toocheck pour le contrôle d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="35c7c-146">How often hello probe is run toocheck for health.</span></span> <span data-ttu-id="35c7c-147">Il n’est pas recommandé hello tooset inférieure à 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="35c7c-147">It is not recommended tooset hello lower than 30 seconds.</span></span>|
  |<span data-ttu-id="35c7c-148">**Délai d’expiration (secondes)**</span><span class="sxs-lookup"><span data-stu-id="35c7c-148">**Timeout (secs)**</span></span>|<span data-ttu-id="35c7c-149">30</span><span class="sxs-lookup"><span data-stu-id="35c7c-149">30</span></span>|<span data-ttu-id="35c7c-150">Hello de sonde de hello temps délai avant expiration. Hello du délai d’attente intervalle besoins toobe suffisamment élevée pour qu’un appel http peut être effectué page de contrôle d’intégrité tooensure hello principal est disponible.</span><span class="sxs-lookup"><span data-stu-id="35c7c-150">hello amount of time hello probe waits before timing out. hello timeout interval needs toobe high enough that an http call can be made tooensure hello backend health page is available.</span></span>|
  |<span data-ttu-id="35c7c-151">**Seuil de défaillance sur le plan de l’intégrité**</span><span class="sxs-lookup"><span data-stu-id="35c7c-151">**Unhealthy threshold**</span></span>|<span data-ttu-id="35c7c-152">3</span><span class="sxs-lookup"><span data-stu-id="35c7c-152">3</span></span>|<span data-ttu-id="35c7c-153">Nombre d’échecs toobe tentatives considéré comme non intègre.</span><span class="sxs-lookup"><span data-stu-id="35c7c-153">Number of failed attempts toobe considered unhealthy.</span></span> <span data-ttu-id="35c7c-154">Un seuil de 0 signifie que si un contrôle d’intégrité échoue hello back-end est déterminé non intègre immédiatement.</span><span class="sxs-lookup"><span data-stu-id="35c7c-154">A threshold of 0 means that if a health check fails hello back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="35c7c-155">nom d’hôte Hello n’est pas hello identique au nom du serveur.</span><span class="sxs-lookup"><span data-stu-id="35c7c-155">hello host name is not hello same as server name.</span></span> <span data-ttu-id="35c7c-156">Cette valeur est le nom hello d’hôte virtuel de hello en cours d’exécution sur le serveur d’applications hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-156">This value is hello name of hello virtual host running on hello application server.</span></span> <span data-ttu-id="35c7c-157">Sonde de Hello est envoyé toohttp : / /(host name) :(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="35c7c-157">hello probe is sent toohttp://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-toohello-gateway"></a><span data-ttu-id="35c7c-158">Ajouter la passerelle toohello de sonde</span><span class="sxs-lookup"><span data-stu-id="35c7c-158">Add probe toohello gateway</span></span>

<span data-ttu-id="35c7c-159">Maintenant que hello sondage a été créé, il est temps tooadd il toohello passerelle.</span><span class="sxs-lookup"><span data-stu-id="35c7c-159">Now that hello probe has been created, it is time tooadd it toohello gateway.</span></span> <span data-ttu-id="35c7c-160">Paramètres de sonde sont définies sur les paramètres http hello principal de la passerelle d’application hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-160">Probe settings are set on hello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="35c7c-161">Cliquez sur **paramètres HTTP** sur la passerelle d’application hello, toobring de panneau de configuration hello, cliquez sur hello actuel principaux paramètres http répertoriées dans la fenêtre hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-161">Click **HTTP settings** on hello application gateway, toobring up hello configuration blade click hello current backend http settings listed in hello window.</span></span>

  ![fenêtre de paramètres https][2]

1. <span data-ttu-id="35c7c-163">Sur hello **appGatewayBackEndHttpSettings** panneau Paramètres, cocher hello **sonde personnalisée d’utilisation** case à cocher et choisissez sonde hello créé Bonjour [la sonde Create hello](#createprobe) section sur hello **sonde de personnalisée** déroulante...</span><span class="sxs-lookup"><span data-stu-id="35c7c-163">On hello **appGatewayBackEndHttpSettings** settings blade, check hello **Use custom probe** checkbox and choose hello probe created in hello [Create hello probe](#createprobe) section on hello **Custom probe** drop-down..</span></span>
<span data-ttu-id="35c7c-164">Lorsque vous avez terminé, cliquez sur **enregistrer** et hello paramètres sont appliqués.</span><span class="sxs-lookup"><span data-stu-id="35c7c-164">When complete, click **Save** and hello settings are applied.</span></span>

<span data-ttu-id="35c7c-165">Sonde de Hello par défaut vérifie l’application web de toohello d’accès par défaut de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-165">hello default probe checks hello default access toohello web application.</span></span> <span data-ttu-id="35c7c-166">Maintenant qu’une sonde personnalisée a été créée, passerelle d’application hello utilise le contrôle d’intégrité toomonitor hello chemin personnalisé défini pour les serveurs principaux de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-166">Now that a custom probe has been created, hello application gateway uses hello custom path defined toomonitor health for hello backend servers.</span></span> <span data-ttu-id="35c7c-167">En fonction de critères hello a été défini, la passerelle d’application hello vérifie chemin hello dans sonde de hello.</span><span class="sxs-lookup"><span data-stu-id="35c7c-167">Based on hello criteria that was defined, hello application gateway checks hello path specified in hello probe.</span></span> <span data-ttu-id="35c7c-168">Si hello appeler toohost:Port / chemin d’accès ne retourne pas HTTP de réponse d’état 200-399, serveur de hello est extraite de rotation après hello défectueux est atteint.</span><span class="sxs-lookup"><span data-stu-id="35c7c-168">If hello call toohost:Port/path does not return an HTTP 200-399 status response, hello server is taken out of rotation after hello unhealthy threshold is reached.</span></span> <span data-ttu-id="35c7c-169">Détection continue sur hello instance défectueux toodetermine dès qu’elle est sain.</span><span class="sxs-lookup"><span data-stu-id="35c7c-169">Probing continues on hello unhealthy instance toodetermine when it becomes healthy again.</span></span> <span data-ttu-id="35c7c-170">Une fois les instance hello ajoutée pool de serveurs toohealthy précédent, le trafic commence tooit flux à nouveau et détection toohello instance se poursuit à l’intervalle spécifié d’utilisateur comme d’habitude.</span><span class="sxs-lookup"><span data-stu-id="35c7c-170">Once hello instance is added back toohealthy server pool, traffic begins flowing tooit again and probing toohello instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="35c7c-171">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="35c7c-171">Next steps</span></span>

<span data-ttu-id="35c7c-172">toolearn tooconfigure le déchargement SSL avec la passerelle d’Application Azure, voir [configurer le déchargement SSL](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="35c7c-172">toolearn how tooconfigure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

