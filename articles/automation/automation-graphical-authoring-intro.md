---
title: "Création de graphiques dans Azure Automation | Microsoft Docs"
description: "La création de graphiques vous permet de créer des Runbooks pour Azure Automation sans utiliser de code. Cet article propose une introduction à la création de graphiques et tous les détails nécessaires pour commencer à créer Runbook graphique."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 4b6f840c-e941-4293-a728-b33407317943
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 417fceb0961165d96ece000f95c8a3f973f4f75b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="graphical-authoring-in-azure-automation"></a><span data-ttu-id="a2361-104">Création de graphiques dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="a2361-104">Graphical authoring in Azure Automation</span></span>
## <a name="introduction"></a><span data-ttu-id="a2361-105">Introduction</span><span class="sxs-lookup"><span data-stu-id="a2361-105">Introduction</span></span>
<span data-ttu-id="a2361-106">La création de graphiques vous permet de créer des Runbooks pour Azure Automation sans les complexités du code Windows PowerShell ou du code de workflow PowerShell sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="a2361-106">Graphical Authoring allows you to create runbooks for Azure Automation without the complexities of the underlying Windows PowerShell or PowerShell Workflow code.</span></span> <span data-ttu-id="a2361-107">Vous pouvez ajouter des activités au canevas à partir d’une bibliothèque d’applets de commande et de Runbooks, puis les lier et les configurer pour former un workflow.</span><span class="sxs-lookup"><span data-stu-id="a2361-107">You add activities to the canvas from a library of cmdlets and runbooks, link them together and configure to form a workflow.</span></span>  <span data-ttu-id="a2361-108">Si vous avez déjà travaillé avec System Center Orchestrator ou Service Management Automation (SMA), cette procédure vous semblera certainement familière.</span><span class="sxs-lookup"><span data-stu-id="a2361-108">If you have ever worked with System Center Orchestrator or Service Management Automation (SMA), then this should look familiar to you.</span></span>   

<span data-ttu-id="a2361-109">Cet article propose une introduction à la création de graphiques et aux concepts dont vous avez besoin pour prendre en main la création d'un Runbook graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-109">This article provides an introduction to graphical authoring and the concepts you need to get started in creating a graphical runbook.</span></span>

## <a name="graphical-runbooks"></a><span data-ttu-id="a2361-110">Runbooks graphiques</span><span class="sxs-lookup"><span data-stu-id="a2361-110">Graphical runbooks</span></span>
<span data-ttu-id="a2361-111">Dans Azure Automation, tous les Runbooks sont des workflows Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a2361-111">All runbooks in Azure Automation are Windows PowerShell Workflows.</span></span>  <span data-ttu-id="a2361-112">Les Runbooks graphiques et les Runbooks de workflow PowerShell graphique génèrent du code PowerShell qui est exécuté par les Workers Automation, mais vous ne pouvez pas l’afficher ou le modifier directement.</span><span class="sxs-lookup"><span data-stu-id="a2361-112">Graphical and Graphical PowerShell Workflow runbooks generate PowerShell code that is run by the Automation workers, but you are not able to view it or directly modify it.</span></span>  <span data-ttu-id="a2361-113">Un Runbook graphique peut être converti en Runbook de workflow PowerShell graphique et inversement, mais les deux ne peuvent pas être convertis en Runbooks textuels.</span><span class="sxs-lookup"><span data-stu-id="a2361-113">A Graphical runbook can be converted to a Graphical PowerShell Workflow runbook and vice-versa, but they cannot be converted to a textual runbook.</span></span> <span data-ttu-id="a2361-114">Un Runbook textuel existant ne peut pas être importé dans l’éditeur graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-114">An existing textual runbook cannot be imported into the graphical editor.</span></span>  

## <a name="overview-of-graphical-editor"></a><span data-ttu-id="a2361-115">Vue d'ensemble de l'éditeur graphique</span><span class="sxs-lookup"><span data-stu-id="a2361-115">Overview of graphical editor</span></span>
<span data-ttu-id="a2361-116">Vous pouvez ouvrir l’éditeur graphique dans le portail Azure en créant ou en modifiant un Runbook graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-116">You can open the graphical editor in the Azure portal by creating or editing a graphical runbook.</span></span>

![Espace de travail graphique](media/automation-graphical-authoring-intro/runbook-graphical-editor.png)

<span data-ttu-id="a2361-118">Les sections suivantes décrivent les contrôles de l'éditeur graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-118">The following sections describe the controls in the graphical editor.</span></span>

### <a name="canvas"></a><span data-ttu-id="a2361-119">Canevas</span><span class="sxs-lookup"><span data-stu-id="a2361-119">Canvas</span></span>
<span data-ttu-id="a2361-120">Le canevas est l'emplacement où vous concevez votre Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-120">The Canvas is where you design your runbook.</span></span>  <span data-ttu-id="a2361-121">Vous pouvez ajouter au Runbook des activités des nœuds se trouvant dans le contrôle Bibliothèque et les connecter à l'aide de liens pour définir la logique du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-121">You add activities from the nodes in the Library control to the runbook and connect them with links to define the logic of the runbook.</span></span>

<span data-ttu-id="a2361-122">Vous pouvez utiliser les commandes en bas de la zone de dessin pour effectuer un zoom avant ou arrière.</span><span class="sxs-lookup"><span data-stu-id="a2361-122">You can use the controls at the bottom of the canvas to zoom in and out.</span></span>

![Espace de travail graphique](media/automation-graphical-authoring-intro/runbook-canvas-controls.png)

### <a name="library-control"></a><span data-ttu-id="a2361-124">Contrôle Bibliothèque</span><span class="sxs-lookup"><span data-stu-id="a2361-124">Library control</span></span>
<span data-ttu-id="a2361-125">Le contrôle Bibliothèque est l'emplacement où vous sélectionnez les [activités](#activities) à ajouter à votre Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-125">The Library control is where you select [activities](#activities) to add to your runbook.</span></span>  <span data-ttu-id="a2361-126">Vous les ajoutez au canevas où vous les connectez à d'autres activités.</span><span class="sxs-lookup"><span data-stu-id="a2361-126">You add them to the canvas where you connect them to other activities.</span></span>  <span data-ttu-id="a2361-127">Il comprend quatre sections décrites dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="a2361-127">It includes four sections described in the following table.</span></span>

| <span data-ttu-id="a2361-128">Section</span><span class="sxs-lookup"><span data-stu-id="a2361-128">Section</span></span> | <span data-ttu-id="a2361-129">Description</span><span class="sxs-lookup"><span data-stu-id="a2361-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a2361-130">Applets de commande</span><span class="sxs-lookup"><span data-stu-id="a2361-130">Cmdlets</span></span> |<span data-ttu-id="a2361-131">Inclut toutes les applets de commande qui peuvent être utilisées dans votre Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-131">Includes all the cmdlets that can be used in your runbook.</span></span>  <span data-ttu-id="a2361-132">Les applets de commande sont organisées par module.</span><span class="sxs-lookup"><span data-stu-id="a2361-132">Cmdlets are organized by module.</span></span>  <span data-ttu-id="a2361-133">Tous les modules que vous avez installés dans votre compte Automation seront disponibles.</span><span class="sxs-lookup"><span data-stu-id="a2361-133">All of the modules that you have installed in your automation account will be available.</span></span> |
| <span data-ttu-id="a2361-134">Runbooks</span><span class="sxs-lookup"><span data-stu-id="a2361-134">Runbooks</span></span> |<span data-ttu-id="a2361-135">Inclut les Runbooks de votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="a2361-135">Includes the runbooks in your automation account.</span></span> <span data-ttu-id="a2361-136">Ces Runbooks peuvent être ajoutés au canevas pour être utilisés en tant que Runbooks enfants.</span><span class="sxs-lookup"><span data-stu-id="a2361-136">These runbooks can be added to the canvas to be used as child runbooks.</span></span> <span data-ttu-id="a2361-137">Seuls les Runbooks du même type de base que le Runbook en cours de modification sont affichés. Dans le cas des Runbooks graphiques, seuls les Runbooks basés sur PowerShell sont indiqués ; pour les Runbooks de workflow PowerShell graphique, seuls les Runbooks basés sur un workflow PowerShell s’affichent.</span><span class="sxs-lookup"><span data-stu-id="a2361-137">Only runbooks of the same core type as the runbook being edited are shown; for Graphical runbooks only PowerShell-based runbooks are shown, while for Graphical PowerShell Workflow runbooks only PowerShell-Workflow-based runbooks are shown.</span></span> |
| <span data-ttu-id="a2361-138">Éléments multimédias</span><span class="sxs-lookup"><span data-stu-id="a2361-138">Assets</span></span> |<span data-ttu-id="a2361-139">Inclut les [ressources Automation](http://msdn.microsoft.com/library/dn939988.aspx) de votre compte Automation qui peuvent être utilisées dans votre Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-139">Includes the [automation assets](http://msdn.microsoft.com/library/dn939988.aspx) in your automation account that can be used in your runbook.</span></span>  <span data-ttu-id="a2361-140">Lorsque vous ajoutez une ressource à un Runbook, cela ajoute une activité de workflow qui obtient la ressource sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="a2361-140">When you add an asset to a runbook, it will add a workflow activity that gets the selected asset.</span></span>  <span data-ttu-id="a2361-141">Pour les ressources de type Variable, vous pouvez choisir d'ajouter une activité pour obtenir la variable ou de définir la variable.</span><span class="sxs-lookup"><span data-stu-id="a2361-141">In the case of variable assets, you can select whether to add an activity to get the variable or set the variable.</span></span> |
| <span data-ttu-id="a2361-142">Contrôle de Runbook</span><span class="sxs-lookup"><span data-stu-id="a2361-142">Runbook Control</span></span> |<span data-ttu-id="a2361-143">Inclut des activités de contrôle de Runbook qui peuvent être utilisées dans votre Runbook actuel.</span><span class="sxs-lookup"><span data-stu-id="a2361-143">Includes runbook control activities that can be used in your current runbook.</span></span> <span data-ttu-id="a2361-144">Une *jonction* prend plusieurs entrées et attend que tout soit terminé pour poursuivre le workflow.</span><span class="sxs-lookup"><span data-stu-id="a2361-144">A *Junction* takes multiple inputs and waits until all have completed before continuing the workflow.</span></span> <span data-ttu-id="a2361-145">Une activité *Code* exécute une ou plusieurs lignes de code PowerShell ou de workflow PowerShell en fonction du type de Runbook graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-145">A *Code* activity runs one or more lines of PowerShell or PowerShell Workflow code depending on the graphical runbook type.</span></span>  <span data-ttu-id="a2361-146">Vous pouvez utiliser cette activité pour du code personnalisé ou pour une fonctionnalité difficile à obtenir avec d’autres activités.</span><span class="sxs-lookup"><span data-stu-id="a2361-146">You can use this activity for custom code or for functionality that is difficult to achieve with other activities.</span></span> |

### <a name="configuration-control"></a><span data-ttu-id="a2361-147">Contrôle Configuration</span><span class="sxs-lookup"><span data-stu-id="a2361-147">Configuration control</span></span>
<span data-ttu-id="a2361-148">Le contrôle Configuration vous permet de renseigner les détails concernant un objet sélectionné dans le canevas.</span><span class="sxs-lookup"><span data-stu-id="a2361-148">The Configuration control is where you provide details for an object selected on the canvas.</span></span> <span data-ttu-id="a2361-149">Les propriétés disponibles dans ce contrôle dépendent du type d’objet sélectionné.</span><span class="sxs-lookup"><span data-stu-id="a2361-149">The properties available in this control will depend on the type of object selected.</span></span>  <span data-ttu-id="a2361-150">Lorsque vous sélectionnez une option dans le contrôle Configuration, des panneaux supplémentaires s'ouvrent afin de fournir des informations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="a2361-150">When you select an option in the Configuration control, it will open additional blades in order to provide additional information.</span></span>

### <a name="test-control"></a><span data-ttu-id="a2361-151">Contrôle Test</span><span class="sxs-lookup"><span data-stu-id="a2361-151">Test control</span></span>
<span data-ttu-id="a2361-152">Le contrôle Test n'est pas affiché lors du premier démarrage de l'éditeur graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-152">The Test control is not displayed when the graphical editor is first started.</span></span> <span data-ttu-id="a2361-153">Il s'ouvre lorsque vous [testez un Runbook graphique](#graphical-runbook-procedures)de manière interactive.</span><span class="sxs-lookup"><span data-stu-id="a2361-153">It is opened when you interactively [test a graphical runbook](#graphical-runbook-procedures).</span></span>  

## <a name="graphical-runbook-procedures"></a><span data-ttu-id="a2361-154">Procédures relatives aux Runbooks graphiques</span><span class="sxs-lookup"><span data-stu-id="a2361-154">Graphical runbook procedures</span></span>
### <a name="exporting-and-importing-a-graphical-runbook"></a><span data-ttu-id="a2361-155">Exportation et importation d'un Runbook graphique</span><span class="sxs-lookup"><span data-stu-id="a2361-155">Exporting and importing a graphical runbook</span></span>
<span data-ttu-id="a2361-156">Vous pouvez exporter uniquement la version publiée d'un Runbook graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-156">You can only export the published version of a graphical runbook.</span></span>  <span data-ttu-id="a2361-157">Si le Runbook n'a pas encore été publié, le bouton **Exportation publiée** est désactivé.</span><span class="sxs-lookup"><span data-stu-id="a2361-157">If the runbook has not yet been published, then the **Export published** button will be disabled.</span></span>  <span data-ttu-id="a2361-158">Lorsque vous cliquez sur le bouton **Exportation publiée** , le Runbook est téléchargé sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="a2361-158">When you click the **Export published** button, the runbook is downloaded to your local computer.</span></span>  <span data-ttu-id="a2361-159">Le nom du fichier correspond au nom du Runbook avec une extension *graphrunbook* .</span><span class="sxs-lookup"><span data-stu-id="a2361-159">The name of the file matches the name of the runbook with a *graphrunbook* extension.</span></span>

![Exportation publiée](media/automation-graphical-authoring-intro/runbook-export.png)

<span data-ttu-id="a2361-161">Vous pouvez importer un fichier de Runbook graphique ou de workflow PowerShell graphique en sélectionnant l’option **Importer** lors de l’ajout d’un Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-161">You can import a Graphical or Graphical PowerShell Workflow runbook file by selecting the **Import** option when adding a runbook.</span></span>   <span data-ttu-id="a2361-162">Lorsque vous sélectionnez le fichier à importer, vous pouvez conserver le même **nom** ou en fournir un nouveau.</span><span class="sxs-lookup"><span data-stu-id="a2361-162">When you select the file to import, you can keep the same **Name** or provide a new one.</span></span>  <span data-ttu-id="a2361-163">Le champ Type de runbook affiche le type de Runbook auquel est comparé le fichier sélectionné. Si vous tentez de sélectionner un autre type incorrect, un message vous indique que vous risquez de rencontrer des conflits et des erreurs de syntaxe au cours de la conversion.</span><span class="sxs-lookup"><span data-stu-id="a2361-163">The Runbook Type field will display the type of runbook after it assesses the file selected and if you attempt to select a different type that is not correct, a message will be presented noting there are potential conflicts and during conversion, there could be syntax errors.</span></span>  

![Importer un Runbook](media/automation-graphical-authoring-intro/runbook-import-revised20165.png)

### <a name="testing-a-graphical-runbook"></a><span data-ttu-id="a2361-165">Test d'un Runbook graphique</span><span class="sxs-lookup"><span data-stu-id="a2361-165">Testing a graphical runbook</span></span>
<span data-ttu-id="a2361-166">Vous pouvez tester le brouillon d’un Runbook dans le portail Azure tout en laissant la version publiée du Runbook inchangée, ou vous pouvez tester un Runbook avant sa publication.</span><span class="sxs-lookup"><span data-stu-id="a2361-166">You can test the Draft version of a runbook in the Azure portal while leaving the published version of the runbook unchanged, or you can test a new runbook before it has been published.</span></span> <span data-ttu-id="a2361-167">Cela vous permet de vérifier que le Runbook fonctionne correctement avant de remplacer la version publiée.</span><span class="sxs-lookup"><span data-stu-id="a2361-167">This allows you to verify that the runbook is working correctly before replacing the published version.</span></span> <span data-ttu-id="a2361-168">Lorsque vous testez un Runbook, le Runbook brouillon est exécuté et toutes les actions qu'il effectue sont finalisées.</span><span class="sxs-lookup"><span data-stu-id="a2361-168">When you test a runbook, the Draft runbook is executed and any actions that it performs are completed.</span></span> <span data-ttu-id="a2361-169">Aucun historique des tâches n'est créé, mais la sortie est affichée dans le volet de sortie du test.</span><span class="sxs-lookup"><span data-stu-id="a2361-169">No job history is created, but output is displayed in the Test Output Pane.</span></span> 

<span data-ttu-id="a2361-170">Ouvrez le contrôle Test pour un Runbook en ouvrant le Runbook en vue de sa modification, puis cliquez sur le bouton **Volet de test** .</span><span class="sxs-lookup"><span data-stu-id="a2361-170">Open the Test control for a runbook by opening the runbook for edit and then click on the **Test pane** button.</span></span>

![Bouton Volet de test](media/automation-graphical-authoring-intro/runbook-edit-test-pane.png)

<span data-ttu-id="a2361-172">Le contrôle Test demande tous les paramètres d'entrée, et vous pouvez démarrer le Runbook en cliquant sur le bouton **Démarrer** .</span><span class="sxs-lookup"><span data-stu-id="a2361-172">The Test control will prompt for any input parameters, and you can start the runbook by clicking on the **Start** button.</span></span>

![Boutons de contrôle Test](media/automation-graphical-authoring-intro/runbook-test-start.png)

### <a name="publishing-a-graphical-runbook"></a><span data-ttu-id="a2361-174">Publication d'un Runbook graphique</span><span class="sxs-lookup"><span data-stu-id="a2361-174">Publishing a graphical runbook</span></span>
<span data-ttu-id="a2361-175">Dans Azure Automation, chaque Runbook a un brouillon et une version publiée.</span><span class="sxs-lookup"><span data-stu-id="a2361-175">Each runbook in Azure Automation has a Draft and a Published version.</span></span> <span data-ttu-id="a2361-176">Seule la version publiée est disponible à l'exécution, et seul le brouillon peut être modifié.</span><span class="sxs-lookup"><span data-stu-id="a2361-176">Only the Published version is available to be run, and only the Draft version can be edited.</span></span> <span data-ttu-id="a2361-177">La version publiée n'est pas affectée par les modifications apportées à la version Bouillon.</span><span class="sxs-lookup"><span data-stu-id="a2361-177">The Published version is unaffected by any changes to the Draft version.</span></span> <span data-ttu-id="a2361-178">Lorsque le brouillon est prêt à être rendu disponible, vous le publiez, ce qui remplace la version publiée par le brouillon.</span><span class="sxs-lookup"><span data-stu-id="a2361-178">When the Draft version is ready to be available, then you publish it which overwrites the Published version with the Draft version.</span></span>

<span data-ttu-id="a2361-179">Vous pouvez publier un Runbook graphique en ouvrant le Runbook en vue de sa modification, puis en cliquant sur le bouton **Publier** .</span><span class="sxs-lookup"><span data-stu-id="a2361-179">You can publish a graphical runbook by opening the runbook for editing and then clicking on the **Publish** button.</span></span>

![Bouton Publier](media/automation-graphical-authoring-intro/runbook-edit-publish.png)

<span data-ttu-id="a2361-181">Lorsqu'un Runbook n'a pas encore été publié, il a le statut **Nouveau**.</span><span class="sxs-lookup"><span data-stu-id="a2361-181">When a runbook has not yet been published, it has a status of **New**.</span></span>  <span data-ttu-id="a2361-182">Une fois publié, il a le statut **Publié**.</span><span class="sxs-lookup"><span data-stu-id="a2361-182">When it is published, it has a status of **Published**.</span></span>  <span data-ttu-id="a2361-183">Si vous modifiez le Runbook après qu'il a été publié, et que la version publiée et le brouillon sont différents, le Runbook a le statut **En mode Édition**.</span><span class="sxs-lookup"><span data-stu-id="a2361-183">If you edit the runbook after it has been published, and the Draft and Published versions are different, the runbook has a status of **In edit**.</span></span>

![États du Runbook](media/automation-graphical-authoring-intro/runbook-statuses-revised20165.png) 

<span data-ttu-id="a2361-185">Vous avez également la possibilité de revenir à la version publiée d'un Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-185">You also have the option to revert to the Published version of a runbook.</span></span>  <span data-ttu-id="a2361-186">Cela supprime toutes les modifications apportées depuis la dernière publication du Runbook et remplace le brouillon du Runbook par la version publiée.</span><span class="sxs-lookup"><span data-stu-id="a2361-186">This throws away any changes made since the runbook was last published and replaces the Draft version of the runbook with the Published version.</span></span>

![Bouton Revenir à la version publiée](media/automation-graphical-authoring-intro/runbook-edit-revert-published.png)

## <a name="activities"></a><span data-ttu-id="a2361-188">activités</span><span class="sxs-lookup"><span data-stu-id="a2361-188">Activities</span></span>
<span data-ttu-id="a2361-189">Les activités sont les éléments essentiels d'un Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-189">Activities are the building blocks of a runbook.</span></span>  <span data-ttu-id="a2361-190">Une activité peut être une applet de commande PowerShell, un Runbook enfant ou une activité de workflow.</span><span class="sxs-lookup"><span data-stu-id="a2361-190">An activity can be a PowerShell cmdlet, a child runbook, or a workflow activity.</span></span>  <span data-ttu-id="a2361-191">Vous ajoutez une activité au Runbook en cliquant avec le bouton droit dans le contrôle Bibliothèque, puis en sélectionnant **Ajouter au canevas**.</span><span class="sxs-lookup"><span data-stu-id="a2361-191">You add an activity to the runbook by right clicking it in the Library control and selecting **Add to canvas**.</span></span>  <span data-ttu-id="a2361-192">Vous pouvez ensuite cliquer sur l'activité et la faire glisser pour la placer à l'emplacement de votre choix sur le canevas.</span><span class="sxs-lookup"><span data-stu-id="a2361-192">You can then click and drag the activity to place it anywhere on the canvas that you like.</span></span>  <span data-ttu-id="a2361-193">L'emplacement de l'activité sur le canevas n'affecte en aucune façon le fonctionnement du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-193">The location of the of the activity on the canvas does not effect the operation of the runbook in any way.</span></span>  <span data-ttu-id="a2361-194">Vous pouvez disposer votre Runbook de la façon qui vous convient le mieux pour visualiser son fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="a2361-194">You can layout your runbook however you find it most suitable to visualize its operation.</span></span> 

![Ajouter au canevas](media/automation-graphical-authoring-intro/add-to-canvas-revised20165.png)

<span data-ttu-id="a2361-196">Sélectionnez l'activité sur le canevas pour configurer ses propriétés et ses paramètres dans le panneau Configuration.</span><span class="sxs-lookup"><span data-stu-id="a2361-196">Select the activity on the canvas to configure its properties and parameters in the Configuration blade.</span></span>  <span data-ttu-id="a2361-197">Vous pouvez remplacer **l’étiquette** de l’activité par une chaîne descriptive.</span><span class="sxs-lookup"><span data-stu-id="a2361-197">You can change the **Label** of the activity to something that is descriptive to you.</span></span>  <span data-ttu-id="a2361-198">L'applet de commande d'origine est toujours en cours d'exécution. Vous modifiez simplement son nom d'affichage qui sera utilisé dans l'éditeur graphique.</span><span class="sxs-lookup"><span data-stu-id="a2361-198">The original cmdlet is still being run, you are simply changing its display name that will be used in the graphical editor.</span></span>  <span data-ttu-id="a2361-199">L'étiquette doit être unique dans le Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-199">The label must be unique within the runbook.</span></span> 

### <a name="parameter-sets"></a><span data-ttu-id="a2361-200">Jeux de paramètres</span><span class="sxs-lookup"><span data-stu-id="a2361-200">Parameter sets</span></span>
<span data-ttu-id="a2361-201">Un jeu de paramètres définit les paramètres obligatoires et facultatifs qui acceptent des valeurs pour une applet de commande particulière.</span><span class="sxs-lookup"><span data-stu-id="a2361-201">A parameter set defines the mandatory and optional parameters that will accept values for a particular cmdlet.</span></span>  <span data-ttu-id="a2361-202">Toutes les applets de commande ont au moins un jeu de paramètres ; certaines en ont plusieurs.</span><span class="sxs-lookup"><span data-stu-id="a2361-202">All cmdlets have at least one parameter set, and some have multiple.</span></span>  <span data-ttu-id="a2361-203">Si une applet de commande a plusieurs jeux de paramètres, vous devez sélectionner celui que vous allez utiliser avant de pouvoir configurer les paramètres.</span><span class="sxs-lookup"><span data-stu-id="a2361-203">If a cmdlet has multiple parameter sets, then you must select which one you will use before you can configure parameters.</span></span>  <span data-ttu-id="a2361-204">Les paramètres que vous pouvez configurer dépendent de l'ensemble de paramètres que vous choisissez.</span><span class="sxs-lookup"><span data-stu-id="a2361-204">The parameters that you can configure will depend on the parameter set that you choose.</span></span>  <span data-ttu-id="a2361-205">Vous pouvez changer le jeu de paramètres utilisé par une activité en sélectionnant **Jeu de paramètres** , puis en sélectionnant un autre jeu.</span><span class="sxs-lookup"><span data-stu-id="a2361-205">You can change the parameter set used by an activity by selecting **Parameter Set** and selecting another set.</span></span>  <span data-ttu-id="a2361-206">Dans ce cas, toutes les valeurs de paramètres que vous avez configurées sont perdues.</span><span class="sxs-lookup"><span data-stu-id="a2361-206">In this case, any parameter values that you configured are lost.</span></span>

<span data-ttu-id="a2361-207">Dans l’exemple suivant, l’applet de commande Get-AzureRmVM contient trois jeux de paramètres.</span><span class="sxs-lookup"><span data-stu-id="a2361-207">In the following example, the Get-AzureRmVM cmdlet has three parameter sets.</span></span>  <span data-ttu-id="a2361-208">Vous ne pouvez pas configurer les valeurs de paramètres tant que vous n'avez pas sélectionné l'un des jeux de paramètres.</span><span class="sxs-lookup"><span data-stu-id="a2361-208">You cannot configure parameter values until you select one of the parameter sets.</span></span>  <span data-ttu-id="a2361-209">Le jeu de paramètres ListVirtualMachineInResourceGroupParamSet permet de retourner toutes les machines virtuelles d’un groupe de ressources. Il ne comporte qu’un seul paramètre facultatif.</span><span class="sxs-lookup"><span data-stu-id="a2361-209">The ListVirtualMachineInResourceGroupParamSet parameter set is for returning all virtual machines in a resource group and has a single optional parameter.</span></span>  <span data-ttu-id="a2361-210">Le jeu de paramètres GetVirtualMachineInResourceGroupParamSet sert à spécifier la machine virtuelle. Il comporte deux paramètres obligatoires et un paramètre facultatif.</span><span class="sxs-lookup"><span data-stu-id="a2361-210">The GetVirtualMachineInResourceGroupParamSet is for specifying the virtual machine you want to return and has two mandatory and one optional parameter.</span></span>

![Jeu de paramètres](media/automation-graphical-authoring-intro/get-azurermvm-parameter-sets.png)

#### <a name="parameter-values"></a><span data-ttu-id="a2361-212">Valeurs de paramètres</span><span class="sxs-lookup"><span data-stu-id="a2361-212">Parameter values</span></span>
<span data-ttu-id="a2361-213">Lorsque vous spécifiez une valeur pour un paramètre, vous sélectionnez une source de données pour déterminer la façon dont la valeur sera spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a2361-213">When you specify a value for a parameter, you select a data source to determine how the value will be specified.</span></span>  <span data-ttu-id="a2361-214">Les sources de données disponibles pour un paramètre particulier dépendent des valeurs valides pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-214">The data sources that are available for a particular parameter will depend on the valid values for that parameter.</span></span>  <span data-ttu-id="a2361-215">Par exemple, Null ne sera pas une option disponible pour un paramètre qui n'autorise pas les valeurs null.</span><span class="sxs-lookup"><span data-stu-id="a2361-215">For example, Null will not be an available option for a parameter that does not allow null values.</span></span>

| <span data-ttu-id="a2361-216">Source de données</span><span class="sxs-lookup"><span data-stu-id="a2361-216">Data Source</span></span> | <span data-ttu-id="a2361-217">Description</span><span class="sxs-lookup"><span data-stu-id="a2361-217">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a2361-218">Valeur constante</span><span class="sxs-lookup"><span data-stu-id="a2361-218">Constant Value</span></span> |<span data-ttu-id="a2361-219">Entrez une valeur pour le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-219">Type in a value for the parameter.</span></span>  <span data-ttu-id="a2361-220">Cette option est disponible uniquement pour les types de données suivants : Int32, Int64, String, Boolean, DateTime, Switch.</span><span class="sxs-lookup"><span data-stu-id="a2361-220">This is only available for the following data types: Int32,Int64,String,Boolean,DateTime,Switch.</span></span> |
| <span data-ttu-id="a2361-221">Sortie d'activité</span><span class="sxs-lookup"><span data-stu-id="a2361-221">Activity Output</span></span> |<span data-ttu-id="a2361-222">Sortie d'une activité qui précède l'activité actuelle dans le workflow.</span><span class="sxs-lookup"><span data-stu-id="a2361-222">Output from an activity that precedes the current activity in the workflow.</span></span>  <span data-ttu-id="a2361-223">Toutes les activités valides sont répertoriées.</span><span class="sxs-lookup"><span data-stu-id="a2361-223">All valid activities will be listed.</span></span>  <span data-ttu-id="a2361-224">Sélectionnez simplement l'activité pour utiliser sa sortie comme valeur de paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-224">Select just the activity to use its output for the parameter value.</span></span>  <span data-ttu-id="a2361-225">Si l'activité génère un objet ayant plusieurs propriétés, vous pouvez taper le nom de la propriété après avoir sélectionné l'activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-225">If the activity outputs an object with multiple properties, then you can type in the name of the property after selecting the activity.</span></span> |
| <span data-ttu-id="a2361-226">Entrée de Runbook</span><span class="sxs-lookup"><span data-stu-id="a2361-226">Runbook Input</span></span> |<span data-ttu-id="a2361-227">Sélectionnez un paramètre d'entrée de Runbook en tant qu'entrée pour le paramètre de l'activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-227">Select a runbook input parameter as input to the activity parameter.</span></span> |
| <span data-ttu-id="a2361-228">Ressource de variable</span><span class="sxs-lookup"><span data-stu-id="a2361-228">Variable Asset</span></span> |<span data-ttu-id="a2361-229">Sélectionnez une variable Automation comme entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-229">Select an Automation Variable as input.</span></span> |
| <span data-ttu-id="a2361-230">Ressource d’informations d’identification</span><span class="sxs-lookup"><span data-stu-id="a2361-230">Credential Asset</span></span> |<span data-ttu-id="a2361-231">Sélectionnez les informations d'identification Automation comme entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-231">Select an Automation Credential as input.</span></span> |
| <span data-ttu-id="a2361-232">Ressource de certificat</span><span class="sxs-lookup"><span data-stu-id="a2361-232">Certificate Asset</span></span> |<span data-ttu-id="a2361-233">Sélectionnez un certificat Automation comme entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-233">Select an Automation Certificate as input.</span></span> |
| <span data-ttu-id="a2361-234">Ressource de connexion</span><span class="sxs-lookup"><span data-stu-id="a2361-234">Connection Asset</span></span> |<span data-ttu-id="a2361-235">Sélectionnez une connexion Automation comme entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-235">Select an Automation Connection as input.</span></span> |
| <span data-ttu-id="a2361-236">Expression PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2361-236">PowerShell Expression</span></span> |<span data-ttu-id="a2361-237">Spécifiez une [expression PowerShell](#powershell-expressions)simple.</span><span class="sxs-lookup"><span data-stu-id="a2361-237">Specify simple [PowerShell expression](#powershell-expressions).</span></span>  <span data-ttu-id="a2361-238">L'expression sera évaluée avant l'activité, et le résultat utilisé pour la valeur du paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-238">The expression will be evaluated before the activity and the result used for the parameter value.</span></span>  <span data-ttu-id="a2361-239">Vous pouvez utiliser des variables pour faire référence à la sortie d'une activité ou à un paramètre d'entrée de Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-239">You can use variables to refer to the output of an activity or a runbook input parameter.</span></span> |
| <span data-ttu-id="a2361-240">Non configuré</span><span class="sxs-lookup"><span data-stu-id="a2361-240">Not configured</span></span> |<span data-ttu-id="a2361-241">Efface toute valeur qui a été précédemment configurée.</span><span class="sxs-lookup"><span data-stu-id="a2361-241">Clears any value that was previously configured.</span></span> |

#### <a name="optional-additional-parameters"></a><span data-ttu-id="a2361-242">Autres paramètres facultatifs</span><span class="sxs-lookup"><span data-stu-id="a2361-242">Optional additional parameters</span></span>
<span data-ttu-id="a2361-243">Toutes les applets de commande peuvent fournir des paramètres supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="a2361-243">All cmdlets will have the option to provide additional parameters.</span></span>  <span data-ttu-id="a2361-244">Il s'agit de paramètres communs PowerShell ou d'autres paramètres personnalisés.</span><span class="sxs-lookup"><span data-stu-id="a2361-244">These are PowerShell common parameters or other custom parameters.</span></span>  <span data-ttu-id="a2361-245">Une zone de texte dans laquelle vous pouvez fournir des paramètres en utilisant la syntaxe PowerShell s'affiche.</span><span class="sxs-lookup"><span data-stu-id="a2361-245">You are presented with a text box where you can provide parameters using PowerShell syntax.</span></span>  <span data-ttu-id="a2361-246">Par exemple, pour utiliser le paramètre commun **Verbose**, vous devez spécifier **« -Verbose:$True »**.</span><span class="sxs-lookup"><span data-stu-id="a2361-246">For example, to use the **Verbose** common parameter, you would specify **"-Verbose:$True"**.</span></span>

### <a name="retry-activity"></a><span data-ttu-id="a2361-247">Nouvelles tentatives d’activité</span><span class="sxs-lookup"><span data-stu-id="a2361-247">Retry activity</span></span>
<span data-ttu-id="a2361-248">La fonction **Comportement des nouvelles tentatives** permet à une activité de s’exécuter plusieurs fois jusqu’à ce qu’une condition particulière soit remplie. Elle agit à la manière d’une boucle.</span><span class="sxs-lookup"><span data-stu-id="a2361-248">**Retry Behavior** allows an activity to be run multiple times until a particular condition is met, much like a loop.</span></span>  <span data-ttu-id="a2361-249">Vous pouvez utiliser cette fonctionnalité pour les activités qui doivent s’exécuter plusieurs fois, qui sont sujettes à des erreurs et qui peuvent nécessiter plusieurs tentatives avant d’aboutir. Vous pouvez aussi tester les informations de sortie de l’activité pour vérifier la validité des données.</span><span class="sxs-lookup"><span data-stu-id="a2361-249">You can use this feature for activities that should run multiple times, are error prone and may need more than one attempt for success, or test the output information of the activity for valid data.</span></span>    

<span data-ttu-id="a2361-250">Lorsque vous activez les nouvelles tentatives pour une activité, vous pouvez définir un délai et une condition.</span><span class="sxs-lookup"><span data-stu-id="a2361-250">When you enable retry for an activity, you can set a delay and a condition.</span></span>  <span data-ttu-id="a2361-251">Le délai correspond au temps (exprimé en secondes ou minutes) d’attente du Runbook avant la nouvelle exécution de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-251">The delay is the time (measured in seconds or minutes) that the runbook will wait before it runs the activity again.</span></span>  <span data-ttu-id="a2361-252">Si aucun délai n’est spécifié, l’activité est immédiatement réexécutée après son exécution.</span><span class="sxs-lookup"><span data-stu-id="a2361-252">If no delay is specified, then the activity will run again immediately after it completes.</span></span> 

![Délai de nouvelle tentative d’activité](media/automation-graphical-authoring-intro/retry-delay.png)

<span data-ttu-id="a2361-254">La condition de nouvelle tentative est une expression PowerShell qui est évaluée après chaque exécution de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-254">The retry condition is a PowerShell expression that is evaluated after each time the activity runs.</span></span>  <span data-ttu-id="a2361-255">Si l’expression correspond à True, l’activité s’exécute à nouveau.</span><span class="sxs-lookup"><span data-stu-id="a2361-255">If the expression resolves to True, then the activity runs again.</span></span>  <span data-ttu-id="a2361-256">Si l’expression correspond à False, l’activité n’est pas réexécutée et le Runbook passe à l’activité suivante.</span><span class="sxs-lookup"><span data-stu-id="a2361-256">If the expression resolves to False then the activity does not run again, and the runbook moves on to the next activity.</span></span> 

![Délai de nouvelle tentative d’activité](media/automation-graphical-authoring-intro/retry-condition.png)

<span data-ttu-id="a2361-258">La condition de nouvelle tentative peut utiliser une variable appelée $RetryData qui fournit un accès aux informations sur les nouvelles tentatives d’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-258">The retry condition can use a variable called $RetryData that provides access to information about the activity retries.</span></span>  <span data-ttu-id="a2361-259">Cette variable possède les propriétés indiquées dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="a2361-259">This variable has the properties in the following table.</span></span>

| <span data-ttu-id="a2361-260">Propriété</span><span class="sxs-lookup"><span data-stu-id="a2361-260">Property</span></span> | <span data-ttu-id="a2361-261">Description</span><span class="sxs-lookup"><span data-stu-id="a2361-261">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a2361-262">NumberOfAttempts</span><span class="sxs-lookup"><span data-stu-id="a2361-262">NumberOfAttempts</span></span> |<span data-ttu-id="a2361-263">Nombre d’exécutions de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-263">Number of times that the activity has been run.</span></span> |
| <span data-ttu-id="a2361-264">Sortie</span><span class="sxs-lookup"><span data-stu-id="a2361-264">Output</span></span> |<span data-ttu-id="a2361-265">Sortie de la dernière exécution de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-265">Output from the last run of the activity.</span></span> |
| <span data-ttu-id="a2361-266">TotalDuration</span><span class="sxs-lookup"><span data-stu-id="a2361-266">TotalDuration</span></span> |<span data-ttu-id="a2361-267">Délai écoulé depuis la première exécution de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-267">Timed elapsed since the activity was started the first time.</span></span> |
| <span data-ttu-id="a2361-268">StartedAt</span><span class="sxs-lookup"><span data-stu-id="a2361-268">StartedAt</span></span> |<span data-ttu-id="a2361-269">Heure au format UTC à laquelle l’activité a été exécutée pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="a2361-269">Time in UTC format the activity was first started.</span></span> |

<span data-ttu-id="a2361-270">Voici des exemples de conditions de nouvelles tentatives d’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-270">Following are examples of activity retry conditions.</span></span>

    # Run the activity exactly 10 times.
    $RetryData.NumberOfAttempts -ge 10 

    # Run the activity repeatedly until it produces any output.
    $RetryData.Output.Count -ge 1 

    # Run the activity repeatedly until 2 minutes has elapsed. 
    $RetryData.TotalDuration.TotalMinutes -ge 2

<span data-ttu-id="a2361-271">Après avoir configuré une condition de nouvelle tentative pour une activité, l’activité émet un rappel à l’aide de deux signaux visuels.</span><span class="sxs-lookup"><span data-stu-id="a2361-271">After you configure a retry condition for an activity, the activity includes two visual cues to remind you.</span></span>  <span data-ttu-id="a2361-272">Le premier est présenté dans l’activité et le second apparaît lorsque vous passez en revue la configuration de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-272">One is presented in the activity and the other is when you review the configuration of the activity.</span></span>

![Indicateurs visuels de nouvelle tentative d’activité](media/automation-graphical-authoring-intro/runbook-activity-retry-visual-cue.png)

### <a name="workflow-script-control"></a><span data-ttu-id="a2361-274">Contrôle Script de workflow</span><span class="sxs-lookup"><span data-stu-id="a2361-274">Workflow Script control</span></span>
<span data-ttu-id="a2361-275">Un contrôle Code est une activité spéciale qui accepte un script PowerShell ou un script de workflow PowerShell selon le type de Runbook graphique créé pour fournir des fonctionnalités qui, sans cela, ne seraient peut-être pas disponibles.</span><span class="sxs-lookup"><span data-stu-id="a2361-275">A Code control is a special activity that accepts PowerShell or PowerShell Workflow script depending on the type of graphical runbook being authored in order to provide functionality that may otherwise not be available.</span></span>  <span data-ttu-id="a2361-276">Il n'accepte pas de paramètres, mais il peut utiliser des variables pour les paramètres de sortie d'activité et d'entrée de Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-276">It cannot accept parameters, but it can use variables for activity output and runbook input parameters.</span></span>  <span data-ttu-id="a2361-277">Toute sortie de l'activité est ajoutée au bus de données, sauf si elle n'a aucun lien sortant, auquel cas elle est ajoutée à la sortie du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-277">Any output of the activity is added to the databus unless it has no outgoing link in which case it is added to the output of the runbook.</span></span>

<span data-ttu-id="a2361-278">Par exemple, le code suivant effectue des calculs de date à l'aide d'une variable d'entrée de Runbook appelée $NumberOfDays.</span><span class="sxs-lookup"><span data-stu-id="a2361-278">For example the following code performs date calculations using a runbook input variable called $NumberOfDays.</span></span>  <span data-ttu-id="a2361-279">Il envoie ensuite la valeur date-heure calculée en tant que sortie qui doit être utilisée par les activités suivantes dans le Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-279">It then sends a calculated date time as output to be used by subsequent activities in the runbook.</span></span>

    $DateTimeNow = (Get-Date).ToUniversalTime()
    $DateTimeStart = ($DateTimeNow).AddDays(-$NumberOfDays)}
    $DateTimeStart


## <a name="links-and-workflow"></a><span data-ttu-id="a2361-280">Liens et workflow</span><span class="sxs-lookup"><span data-stu-id="a2361-280">Links and workflow</span></span>
<span data-ttu-id="a2361-281">Dans un Runbook graphique, un **lien** connecte deux activités.</span><span class="sxs-lookup"><span data-stu-id="a2361-281">A **link** in a graphical runbook connects two activities.</span></span>  <span data-ttu-id="a2361-282">Il est affiché sur le canevas sous la forme d'une flèche pointant de l'activité source vers l'activité de destination.</span><span class="sxs-lookup"><span data-stu-id="a2361-282">It is displayed on the canvas as an arrow pointing from the source activity to the destination activity.</span></span>  <span data-ttu-id="a2361-283">Les activités s'exécutent dans le sens de la flèche, l'activité de destination commençant une fois l'activité source terminée.</span><span class="sxs-lookup"><span data-stu-id="a2361-283">The activities run in the direction of the arrow with the destination activity starting after the source activity completes.</span></span>  

### <a name="create-a-link"></a><span data-ttu-id="a2361-284">Créer un lien</span><span class="sxs-lookup"><span data-stu-id="a2361-284">Create a link</span></span>
<span data-ttu-id="a2361-285">Créez un lien entre deux activités en sélectionnant l'activité source, puis en cliquant sur le cercle situé en bas de la forme.</span><span class="sxs-lookup"><span data-stu-id="a2361-285">Create a link between two activities by selecting the source activity and clicking the circle at the bottom of the shape.</span></span>  <span data-ttu-id="a2361-286">Faites glisser la flèche vers l'activité de destination, puis relâchez-la.</span><span class="sxs-lookup"><span data-stu-id="a2361-286">Drag the arrow to the destination activity and release.</span></span>

![Créer un lien](media/automation-graphical-authoring-intro/create-link-revised20165.png)

<span data-ttu-id="a2361-288">Sélectionnez le lien pour configurer ses propriétés dans le panneau Configuration.</span><span class="sxs-lookup"><span data-stu-id="a2361-288">Select the link to configure its properties in the Configuration blade.</span></span>  <span data-ttu-id="a2361-289">Cela inclut le type du lien, qui est décrit dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="a2361-289">This will include the link type which is described in the following table.</span></span>

| <span data-ttu-id="a2361-290">Type de lien</span><span class="sxs-lookup"><span data-stu-id="a2361-290">Link Type</span></span> | <span data-ttu-id="a2361-291">Description</span><span class="sxs-lookup"><span data-stu-id="a2361-291">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a2361-292">Pipeline</span><span class="sxs-lookup"><span data-stu-id="a2361-292">Pipeline</span></span> |<span data-ttu-id="a2361-293">L'activité de destination est exécutée une fois pour chaque sortie d'objet de l'activité source.</span><span class="sxs-lookup"><span data-stu-id="a2361-293">The destination activity is run once for each object output from the source activity.</span></span>  <span data-ttu-id="a2361-294">L'activité de destination n'est pas exécutée si l'activité source ne génère aucune sortie.</span><span class="sxs-lookup"><span data-stu-id="a2361-294">The destination activity does not run if the source activity results in no output.</span></span>  <span data-ttu-id="a2361-295">La sortie de l'activité source est disponible sous la forme d'un objet.</span><span class="sxs-lookup"><span data-stu-id="a2361-295">Output from the source activity is available as an object.</span></span> |
| <span data-ttu-id="a2361-296">Séquence</span><span class="sxs-lookup"><span data-stu-id="a2361-296">Sequence</span></span> |<span data-ttu-id="a2361-297">L'activité de destination s'exécute une seule fois.</span><span class="sxs-lookup"><span data-stu-id="a2361-297">The destination activity runs only once.</span></span>  <span data-ttu-id="a2361-298">Elle reçoit un tableau d'objets de l'activité source.</span><span class="sxs-lookup"><span data-stu-id="a2361-298">It receives an array of objects from the source activity.</span></span>  <span data-ttu-id="a2361-299">La sortie de l'activité source est disponible sous la forme d'un tableau d'objets.</span><span class="sxs-lookup"><span data-stu-id="a2361-299">Output from the source activity is available as an array of objects.</span></span> |

### <a name="starting-activity"></a><span data-ttu-id="a2361-300">Activité de départ</span><span class="sxs-lookup"><span data-stu-id="a2361-300">Starting activity</span></span>
<span data-ttu-id="a2361-301">Un Runbook graphique commence par toute activité qui n'a pas un lien entrant.</span><span class="sxs-lookup"><span data-stu-id="a2361-301">A graphical runbook will start with any activities that do not have an incoming link.</span></span>  <span data-ttu-id="a2361-302">Il s'agit souvent d'une seule activité qui fait office d'activité de départ du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-302">This will often be only one activity which would act as the starting activity for the runbook.</span></span>  <span data-ttu-id="a2361-303">Si plusieurs activités n'ont pas de lien entrant, le Runbook démarre en les exécutant en parallèle.</span><span class="sxs-lookup"><span data-stu-id="a2361-303">If multiple activities do not have an incoming link, then the runbook will start by running them in parallel.</span></span>  <span data-ttu-id="a2361-304">Lorsque chaque activité est terminée, il suit les liens pour exécuter les autres activités.</span><span class="sxs-lookup"><span data-stu-id="a2361-304">It will then follow the links to run other activities as each completes.</span></span>

### <a name="conditions"></a><span data-ttu-id="a2361-305">Conditions</span><span class="sxs-lookup"><span data-stu-id="a2361-305">Conditions</span></span>
<span data-ttu-id="a2361-306">Lorsque vous spécifiez une condition sur un lien, l'activité de destination est exécutée uniquement si la condition a pour résultat la valeur true.</span><span class="sxs-lookup"><span data-stu-id="a2361-306">When you specify a condition on a link, the destination activity is only run if the condition resolves to true.</span></span>  <span data-ttu-id="a2361-307">Vous utiliserez généralement une variable $ActivityOutput dans une condition pour récupérer la sortie de l'activité source.</span><span class="sxs-lookup"><span data-stu-id="a2361-307">You will typically use an $ActivityOutput variable in a condition to retrieve the output from the source activity.</span></span>  

<span data-ttu-id="a2361-308">Pour un lien de type pipeline, vous spécifiez une condition pour un seul objet, et cette condition est évaluée pour chaque sortie d'objet par l'activité source.</span><span class="sxs-lookup"><span data-stu-id="a2361-308">For a pipeline link, you specify a condition for a single object, and the condition is evaluated for each object output by the source activity.</span></span>  <span data-ttu-id="a2361-309">L'activité de destination est ensuite exécutée pour chaque objet qui remplit la condition.</span><span class="sxs-lookup"><span data-stu-id="a2361-309">The destination activity is then run for each object that satisfies the condition.</span></span>  <span data-ttu-id="a2361-310">Par exemple, avec une activité source Get-AzureRmVm, la syntaxe suivante peut être utilisée pour qu’un lien pipeline conditionnel récupère uniquement les machines virtuelles se trouvant dans le groupe de ressources nommé *Group1*.</span><span class="sxs-lookup"><span data-stu-id="a2361-310">For example, with a source activity of Get-AzureRmVm, the following syntax could be used for a conditional pipeline link to retrieve only virtual machines in the resource group named *Group1*.</span></span>  

    $ActivityOutput['Get Azure VMs'].Name -match "Group1"

<span data-ttu-id="a2361-311">Pour un lien de type séquence, la condition est évaluée une seule fois, car un seul tableau contenant la sortie de tous les objets à partir de l'activité source est retourné.</span><span class="sxs-lookup"><span data-stu-id="a2361-311">For a sequence link, the condition is only evaluated once since a single array is returned containing all objects output from the source activity.</span></span>  <span data-ttu-id="a2361-312">C'est pour cette raison qu'un lien séquence ne peut pas être utilisé pour filtrer comme un lien pipeline ; il détermine simplement si l'activité suivante est exécutée ou non.</span><span class="sxs-lookup"><span data-stu-id="a2361-312">Because of this, a sequence link cannot be used for filtering like a pipeline link but will simply determine whether or not the next activity is run.</span></span> <span data-ttu-id="a2361-313">Prenez par exemple l’ensemble des activités suivantes dans le Runbook de démarrage de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a2361-313">Take for example the following set of activities in our Start VM runbook.</span></span><br> <span data-ttu-id="a2361-314">![Lien conditionnel avec séquences](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span><span class="sxs-lookup"><span data-stu-id="a2361-314">![Conditional Link with Sequences](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span></span><br>
<span data-ttu-id="a2361-315">Trois liens séquentiels différents vérifient que des valeurs ont bien été fournies aux deux paramètres d’entrée de Runbook représentant le nom de la machine virtuelle et le nom du groupe de ressources afin de déterminer l’action à entreprendre, à savoir démarrer une seule machine virtuelle, démarrer toutes les machines virtuelles du groupe de ressources ou démarrer toutes les machines virtuelles d’un abonnement.</span><span class="sxs-lookup"><span data-stu-id="a2361-315">There are three different sequence links that are verifying values were provided to two runbook input parameters representing VM name and Resource Group name in order to determine which is the appropriate action to take - start a single VM, start all VMs in the resouce group, or all VMs in a subscription.</span></span>  <span data-ttu-id="a2361-316">Pour la liaison séquentielle entre Connect to Azure et Get single VM, voici la logique de la condition :</span><span class="sxs-lookup"><span data-stu-id="a2361-316">For the sequence link between Connect to Azure and Get single VM, here is the condition logic:</span></span>

    <# 
    Both VMName and ResourceGroupName runbook input parameters have values 
    #>
    (
    (($VMName -ne $null) -and ($VMName.Length -gt 0))
    ) -and (
    (($ResourceGroupName -ne $null) -and ($ResourceGroupName.Length -gt 0))
    )

<span data-ttu-id="a2361-317">Lorsque vous utilisez un lien conditionnel, les données disponibles de l'activité source vers d'autres activités dans cette branche sont filtrées par la condition.</span><span class="sxs-lookup"><span data-stu-id="a2361-317">When you use a conditional link, the data available from the source activity to other activities in that branch will be filtered by the condition.</span></span>  <span data-ttu-id="a2361-318">Si une activité est la source vers plusieurs liens, les données disponibles pour les activités de chaque branche dépendent de la condition spécifiée dans le lien de connexion à cette branche.</span><span class="sxs-lookup"><span data-stu-id="a2361-318">If an activity is the source to multiple links, then the data available to activities in each branch will depend on the condition in the link connecting to that branch.</span></span>

<span data-ttu-id="a2361-319">Par exemple, l’activité **Start-AzureRmVm** du Runbook ci-dessous démarre toutes les machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a2361-319">For example, the **Start-AzureRmVm** activity in the runbook below starts all virtual machines.</span></span>  <span data-ttu-id="a2361-320">Elle comporte deux liens conditionnels.</span><span class="sxs-lookup"><span data-stu-id="a2361-320">It has two conditional links.</span></span>  <span data-ttu-id="a2361-321">Le premier lien conditionnel utilise l’expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* pour appliquer un filtre si l’activité Start-AzureRmVm s’est correctement exécutée.</span><span class="sxs-lookup"><span data-stu-id="a2361-321">The first conditional link uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* to filter if the Start-AzureRmVm activity completed successfully.</span></span>  <span data-ttu-id="a2361-322">Le second lien conditionnel utilise l’expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* pour appliquer un filtre si l’activité Start-AzureRmVm n’est pas parvenue à démarrer la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a2361-322">The second uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* to filter if the Start-AzureRmVm activity failed to start the virtual machine.</span></span>  

![Exemple de lien conditionnel](media/automation-graphical-authoring-intro/runbook-conditional-links.png)

<span data-ttu-id="a2361-324">Toute activité qui suit le premier lien et qui utilise la sortie d'activité de Get-AzureVM obtient uniquement les machines virtuelles qui étaient démarrées au moment de l'exécution de Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="a2361-324">Any activity that follows the first link and uses the activity output from Get-AzureVM will only get the virtual machines that were started at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="a2361-325">Toute activité qui suit le deuxième lien obtient uniquement les machines virtuelles qui étaient arrêtées au moment de l'exécution de Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="a2361-325">Any activity that follows the second link will only get the the virtual machines that were stopped at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="a2361-326">Toute activité suivant le troisième lien obtient toutes les machines virtuelles, quel que soit leur état d'exécution.</span><span class="sxs-lookup"><span data-stu-id="a2361-326">Any activity following the third link will get all virtual machines regardless of their running state.</span></span>

### <a name="junctions"></a><span data-ttu-id="a2361-327">Jonctions</span><span class="sxs-lookup"><span data-stu-id="a2361-327">Junctions</span></span>
<span data-ttu-id="a2361-328">Une jonction est une activité spéciale qui attend que toutes les branches entrantes aient terminé.</span><span class="sxs-lookup"><span data-stu-id="a2361-328">A junction is a special activity that will wait until all incoming branches have completed.</span></span>  <span data-ttu-id="a2361-329">Cela vous permet d'exécuter plusieurs activités en parallèle et de vous assurer qu'elles ont toutes terminé avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="a2361-329">This allows you to run multiple activities in parallel and ensure that all have completed before moving on.</span></span>

<span data-ttu-id="a2361-330">Alors qu'une jonction peut avoir un nombre illimité de liens entrants, un seul de ces liens peut être un pipeline.</span><span class="sxs-lookup"><span data-stu-id="a2361-330">While a junction can have an unlimited number of incoming links, not more than one of those links can be a pipeline.</span></span>  <span data-ttu-id="a2361-331">Le nombre de liens de type séquence entrants n'est pas limité.</span><span class="sxs-lookup"><span data-stu-id="a2361-331">The number of incoming sequence links is not constrained.</span></span>  <span data-ttu-id="a2361-332">Vous êtes autorisé à créer la jonction avec plusieurs liens de type pipeline entrants et d'enregistrer le Runbook, mais il échouera lorsqu'il sera exécuté.</span><span class="sxs-lookup"><span data-stu-id="a2361-332">You will be allowed to create the junction with multiple incoming pipeline links and save the runbook, but it will fail when it is run.</span></span>

<span data-ttu-id="a2361-333">L'exemple ci-dessous représente une partie d'un Runbook qui démarre un ensemble de machines virtuelles tout en téléchargeant simultanément des correctifs à appliquer à ces machines.</span><span class="sxs-lookup"><span data-stu-id="a2361-333">The example below is part of a runbook that starts a set of virtual machines while simultaneously downloading patches to be applied to those machines.</span></span>  <span data-ttu-id="a2361-334">Une jonction permet de garantir que les deux processus sont terminés avant que le Runbook poursuive.</span><span class="sxs-lookup"><span data-stu-id="a2361-334">A junction is used to ensure that both processes are completed before the runbook continues.</span></span>

![jonction](media/automation-graphical-authoring-intro/runbook-junction.png)

### <a name="cycles"></a><span data-ttu-id="a2361-336">Cycles</span><span class="sxs-lookup"><span data-stu-id="a2361-336">Cycles</span></span>
<span data-ttu-id="a2361-337">Un cycle se produit lorsqu'une activité de destination a un lien qui revient vers son activité source ou vers une autre activité qui, au final, revient à sa source.</span><span class="sxs-lookup"><span data-stu-id="a2361-337">A cycle is when a destination activity links back to its source activity or to another activity that eventually links back to its source.</span></span>  <span data-ttu-id="a2361-338">Les cycles ne sont actuellement pas autorisés dans la création de graphiques.</span><span class="sxs-lookup"><span data-stu-id="a2361-338">Cycles are currently not allowed in graphical authoring.</span></span>  <span data-ttu-id="a2361-339">Si votre Runbook a un cycle, il s'enregistrera correctement, mais il recevra une erreur lorsqu'il s'exécutera.</span><span class="sxs-lookup"><span data-stu-id="a2361-339">If your runbook has a cycle, it will save properly but will receive an error when it runs.</span></span>

![Cycle](media/automation-graphical-authoring-intro/runbook-cycle.png)

### <a name="sharing-data-between-activities"></a><span data-ttu-id="a2361-341">Partage de données entre des activités</span><span class="sxs-lookup"><span data-stu-id="a2361-341">Sharing data between activities</span></span>
<span data-ttu-id="a2361-342">Toutes les données qui sont générées par une activité avec un lien sortant sont écrites dans le *bus de données* du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-342">Any data that is output by an activity with an outgoing link is written to the *databus* for the runbook.</span></span>  <span data-ttu-id="a2361-343">Toute activité du Runbook peut utiliser les données présentes dans le bus de données pour renseigner les valeurs de paramètres ou les inclure dans le code de script.</span><span class="sxs-lookup"><span data-stu-id="a2361-343">Any activity in the runbook can use data on the databus to populate parameter values or include in script code.</span></span>  <span data-ttu-id="a2361-344">Une activité peut accéder à la sortie de toute activité précédente du workflow.</span><span class="sxs-lookup"><span data-stu-id="a2361-344">An activity can access the output of any previous activity in the workflow.</span></span>     

<span data-ttu-id="a2361-345">La façon dont les données sont écrites dans le bus de données varie en fonction du type de lien figurant sur l'activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-345">How the data is written to the databus depends on the type of link on the activity.</span></span>  <span data-ttu-id="a2361-346">Pour un **pipeline**, les données sont sorties sous la forme de plusieurs objets.</span><span class="sxs-lookup"><span data-stu-id="a2361-346">For a **pipeline**, the data is output as multiples objects.</span></span>  <span data-ttu-id="a2361-347">Pour un lien de type **séquence** , les données sont sorties sous la forme d'un tableau.</span><span class="sxs-lookup"><span data-stu-id="a2361-347">For a **sequence** link, the data is output as an array.</span></span>  <span data-ttu-id="a2361-348">S'il n'y a qu'une seule valeur, elle sera sortie sous la forme d'un tableau à un seul élément.</span><span class="sxs-lookup"><span data-stu-id="a2361-348">If there is only one value, it will be output as a single element array.</span></span>

<span data-ttu-id="a2361-349">Vous avez le choix entre deux méthodes pour accéder aux données présentes dans le bus de données.</span><span class="sxs-lookup"><span data-stu-id="a2361-349">You can access data on the databus using one of two methods.</span></span>  <span data-ttu-id="a2361-350">La première consiste à utiliser une source de données **Sortie d'activité** pour renseigner un paramètre d'une autre activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-350">First is using an **Activity Output** data source to populate a parameter of another activity.</span></span>  <span data-ttu-id="a2361-351">Si la sortie est un objet, vous ne pouvez spécifier qu'une seule propriété.</span><span class="sxs-lookup"><span data-stu-id="a2361-351">If the output is an object, you can specify a single property.</span></span>

![Sortie d'activité](media/automation-graphical-authoring-intro/activity-output-datasource-revised20165.png)

<span data-ttu-id="a2361-353">Vous pouvez également récupérer la sortie d’une activité dans une source de données **Expression PowerShell** ou à partir d’une activité **Script de workflow** avec une variable ActivityOutput.</span><span class="sxs-lookup"><span data-stu-id="a2361-353">You can also retrieve the output of an activity in a **PowerShell Expression** data source or from a **Workflow Script** activity with an ActivityOutput variable.</span></span>  <span data-ttu-id="a2361-354">Si la sortie est un objet, vous ne pouvez spécifier qu'une seule propriété.</span><span class="sxs-lookup"><span data-stu-id="a2361-354">If the output is an object, you can specify a single property.</span></span>  <span data-ttu-id="a2361-355">Les variables ActivityOutput utilisent la syntaxe suivante.</span><span class="sxs-lookup"><span data-stu-id="a2361-355">ActivityOutput variables use the following syntax.</span></span>

    $ActivityOutput['Activity Label']
    $ActivityOutput['Activity Label'].PropertyName 

### <a name="checkpoints"></a><span data-ttu-id="a2361-356">Points de contrôle</span><span class="sxs-lookup"><span data-stu-id="a2361-356">Checkpoints</span></span>
<span data-ttu-id="a2361-357">Vous pouvez définir des [points de contrôle](automation-powershell-workflow.md#checkpoints) dans un Runbook de workflow PowerShell graphique en sélectionnant *Runbook de point de contrôle* sur n’importe quelle activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-357">You can set [checkpoints](automation-powershell-workflow.md#checkpoints) in a Graphical PowerShell Workflow runbook by selecting *Checkpoint runbook* on any activity.</span></span>  <span data-ttu-id="a2361-358">Cette option permet de définir un point de contrôle après l’exécution de l’activité.</span><span class="sxs-lookup"><span data-stu-id="a2361-358">This causes a checkpoint to be set after the activity runs.</span></span>

![Point de contrôle](media/automation-graphical-authoring-intro/set-checkpoint.png)

<span data-ttu-id="a2361-360">Les points de contrôle sont activés uniquement dans les Runbooks de workflow PowerShell graphique ; ils ne sont pas disponibles dans les Runbooks graphiques.</span><span class="sxs-lookup"><span data-stu-id="a2361-360">Checkpoints are only enabled in Graphical PowerShell Workflow runbooks, it is not available in Graphical runbooks.</span></span>  <span data-ttu-id="a2361-361">Si le Runbook utilise les applets de commande Azure, vous devez suivre toute activité soumise à des points de contrôle avec l’applet de commande Add-AzureRMAccount dans l’éventualité où le Runbook serait interrompu et redémarré sur un autre Worker à partir de ce point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="a2361-361">If the runbook uses Azure cmdlets, you should follow any checkpointed activity with an Add-AzureRMAccount in case the runbook is suspended and restarts from this checkpoint on a different worker.</span></span> 

## <a name="authenticating-to-azure-resources"></a><span data-ttu-id="a2361-362">Authentification auprès de ressources Azure</span><span class="sxs-lookup"><span data-stu-id="a2361-362">Authenticating to Azure resources</span></span>
<span data-ttu-id="a2361-363">Dans Azure Automation, les Runbooks qui gèrent des ressources Azure doivent s’authentifier auprès d’Azure.</span><span class="sxs-lookup"><span data-stu-id="a2361-363">Runbooks in Azure Automation that manage Azure resources will require authentication to Azure.</span></span>  <span data-ttu-id="a2361-364">La fonctionnalité [Compte d’identification](automation-offering-get-started.md#creating-an-automation-account) (également appelée principal de service) est la méthode utilisée par défaut pour accéder aux ressources Azure Resource Manager dans votre abonnement à l’aide des runbooks Automation.</span><span class="sxs-lookup"><span data-stu-id="a2361-364">The [Run As account](automation-offering-get-started.md#creating-an-automation-account) (also referred to as a service principal) is the default method to access Azure Resource Manager resources in your subscription with Automation runbooks.</span></span>  <span data-ttu-id="a2361-365">Vous pouvez ajouter cette fonctionnalité à un runbook graphique en ajoutant la ressource de connexion **AzureRunAsConnection**, qui utilise l’applet de commande PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) et l’applet de commande [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) sur le canevas.</span><span class="sxs-lookup"><span data-stu-id="a2361-365">You can add this functionality to a graphical runbook by adding the **AzureRunAsConnection** Connection asset, which is using the PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) cmdlet, and [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) cmdlet to the canvas.</span></span> <span data-ttu-id="a2361-366">Cette opération est illustrée dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="a2361-366">This is illustrated in the following example.</span></span><br><span data-ttu-id="a2361-367">![Activités d’authentification de l’identification](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span><span class="sxs-lookup"><span data-stu-id="a2361-367">![Run As Authentication Activities](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span></span><br>
<span data-ttu-id="a2361-368">L’activité Get Run As Connection (par exemple, Get-AutomationConnection), est configurée avec une source de données de valeur constante nommée AzureRunAsConnection.</span><span class="sxs-lookup"><span data-stu-id="a2361-368">The Get Run As Connection activity (i.e. Get-AutomationConnection), is configured with a constant value data source named AzureRunAsConnection.</span></span><br><span data-ttu-id="a2361-369">![Configuration de la connexion d’identification](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span><span class="sxs-lookup"><span data-stu-id="a2361-369">![Run As Connection Configuration](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span></span><br>
<span data-ttu-id="a2361-370">L’activité suivante, Add-AzureRmAccount, ajoute le compte d’identification authentifié pour l’utiliser dans le runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-370">The next activity, Add-AzureRmAccount, adds the authenticated Run As account for use in the runbook.</span></span><br><span data-ttu-id="a2361-371">
![Jeu de paramètres Add-AzureRmAccount](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span><span class="sxs-lookup"><span data-stu-id="a2361-371">
![Add-AzureRmAccount Parameter Set](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span></span><br>
<span data-ttu-id="a2361-372">Pour les paramètres **APPLICATIONID**, **CERTIFICATETHUMBPRINT** et **TENANTID**, vous devez spécifier le nom de la propriété du chemin d’accès du champ car l’activité génère un objet comportant plusieurs propriétés.</span><span class="sxs-lookup"><span data-stu-id="a2361-372">For the parameters **APPLICATIONID**, **CERTIFICATETHUMBPRINT**, and **TENANTID** you will need to specify the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>  <span data-ttu-id="a2361-373">À défaut, la tentative d’authentification échouera lors de l’exécution du runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-373">Otherwise when you execute the runbook, it will fail attempting to authenticate.</span></span>  <span data-ttu-id="a2361-374">Vous devez au minimum renseigner ces informations pour authentifier votre runbook auprès du compte d’identification.</span><span class="sxs-lookup"><span data-stu-id="a2361-374">This is what you need at a minimum to authenticate your runbook with the Run As account.</span></span>

<span data-ttu-id="a2361-375">Pour garantir une compatibilité descendante pour les abonnés qui ont créé un compte Automation à l’aide d’un [compte d’utilisateur Azure AD](automation-create-aduser-account.md) afin de gérer le déploiement Azure Classic ou pour les ressources Azure Resource Manager, le mode d’authentification est l’applet de commande Add-AzureAccount avec une [ressource d’informations d’identification](automation-credentials.md) qui représente un utilisateur Active Directory ayant accès au compte Azure.</span><span class="sxs-lookup"><span data-stu-id="a2361-375">To maintain backwards compatibility for subscribers who have created an Automation account using an [Azure AD User account](automation-create-aduser-account.md) to manage Azure classic deployment or for Azure Resource Manager resources, the method to authenticate is the Add-AzureAccount cmdlet with a [credential asset](automation-credentials.md) that represents an Active Directory user with access to the Azure account.</span></span>

<span data-ttu-id="a2361-376">Vous pouvez ajouter cette fonctionnalité à un Runbook graphique en ajoutant une ressource d'informations d'identification au canevas, suivie d'une activité Add-AzureAccount.</span><span class="sxs-lookup"><span data-stu-id="a2361-376">You can add this functionality to a graphical runbook by adding a credential asset to the canvas followed by an Add-AzureAccount activity.</span></span>  <span data-ttu-id="a2361-377">Add-AzureAccount utilise l'activité d'informations d'identification pour son entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-377">Add-AzureAccount uses the credential activity for its input.</span></span>  <span data-ttu-id="a2361-378">Cette opération est illustrée dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="a2361-378">This is illustrated in the following example.</span></span>

![Activités d'authentification](media/automation-graphical-authoring-intro/authentication-activities.png)

<span data-ttu-id="a2361-380">Vous devez effectuer une authentification au début du Runbook et après chaque point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="a2361-380">You have to authenticate at the start of the runbook and after each checkpoint.</span></span>  <span data-ttu-id="a2361-381">Cela signifie qu'une activité Add-AzureAccount doit être ajoutée après chaque activité Checkpoint-Workflow.</span><span class="sxs-lookup"><span data-stu-id="a2361-381">This means adding an addition Add-AzureAccount activity after any Checkpoint-Workflow activity.</span></span> <span data-ttu-id="a2361-382">Vous n'avez pas besoin d'ajouter une activité d'informations d'identification dans la mesure où vous pouvez utiliser la même.</span><span class="sxs-lookup"><span data-stu-id="a2361-382">You do not need an addition credential activity since you can use the same</span></span> 

![Sortie d'activité](media/automation-graphical-authoring-intro/authentication-activity-output.png)

## <a name="runbook-input-and-output"></a><span data-ttu-id="a2361-384">Entrée et sortie de Runbook</span><span class="sxs-lookup"><span data-stu-id="a2361-384">Runbook input and output</span></span>
### <a name="runbook-input"></a><span data-ttu-id="a2361-385">Entrée de Runbook</span><span class="sxs-lookup"><span data-stu-id="a2361-385">Runbook input</span></span>
<span data-ttu-id="a2361-386">Un Runbook peut nécessiter une entrée d’un utilisateur lorsqu’il démarre le Runbook via le portail Azure ou à partir d’un autre Runbook si celui actuel est utilisé en tant qu’enfant.</span><span class="sxs-lookup"><span data-stu-id="a2361-386">A runbook may require input either from a user when they start the runbook through the Azure portal or from another runbook if the current one is used as a child.</span></span>
<span data-ttu-id="a2361-387">Par exemple, si vous avez un Runbook qui crée une machine virtuelle, vous devrez peut-être fournir des informations telles que le nom de la machine virtuelle et d'autres propriétés chaque fois que vous démarrez le Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-387">For example, if you have a runbook that creates a virtual machine, you may need to provide information such as the name of the virtual machine and other properties each time you start the runbook.</span></span>  

<span data-ttu-id="a2361-388">Vous acceptez une entrée pour un Runbook en définissant un ou plusieurs paramètres d'entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-388">You accept input for a runbook by defining one or more input parameters.</span></span>  <span data-ttu-id="a2361-389">Vous fournissez des valeurs pour ces paramètres chaque fois à chaque démarrage du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-389">You provide values for these parameters each time the runbook is started.</span></span>  <span data-ttu-id="a2361-390">Lorsque vous démarrez un Runbook avec le portail Azure, il vous invite à fournir des valeurs pour chacun des paramètres d’entrée du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-390">When you start a runbook with the Azure portal, it will prompt you to provide values for the each of the runbook's input parameters.</span></span>

<span data-ttu-id="a2361-391">Vous pouvez accéder aux paramètres d'entrée d'un Runbook en cliquant sur le bouton **Entrée et sortie** dans la barre d'outils du Runbook.</span><span class="sxs-lookup"><span data-stu-id="a2361-391">You can access input parameters for a runbook by clicking the **Input and output** button on the runbook toolbar.</span></span>  

![Entrée/sortie de Runbook](media/automation-graphical-authoring-intro/runbook-edit-input-output.png) 

<span data-ttu-id="a2361-393">Cela ouvre le contrôle **Entrée et sortie** où vous pouvez modifier un paramètre d’entrée existant ou en créer un nouveau en cliquant sur **Ajouter une entrée**.</span><span class="sxs-lookup"><span data-stu-id="a2361-393">This opens the **Input and Output** control where you can edit an existing input parameter or create a new one by clicking **Add input**.</span></span> 

![Ajouter une entrée](media/automation-graphical-authoring-intro/runbook-edit-add-input.png)

<span data-ttu-id="a2361-395">Chaque paramètre d'entrée est défini par les propriétés figurant dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="a2361-395">Each input parameter is defined by the properties in the following table.</span></span>

| <span data-ttu-id="a2361-396">Propriété</span><span class="sxs-lookup"><span data-stu-id="a2361-396">Property</span></span> | <span data-ttu-id="a2361-397">Description</span><span class="sxs-lookup"><span data-stu-id="a2361-397">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="a2361-398">Nom</span><span class="sxs-lookup"><span data-stu-id="a2361-398">Name</span></span> |<span data-ttu-id="a2361-399">Nom unique du paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-399">The unique name of the parameter.</span></span>  <span data-ttu-id="a2361-400">Il ne peut contenir que des caractères alphanumériques et ne peut pas contenir d'espace.</span><span class="sxs-lookup"><span data-stu-id="a2361-400">This can only contain alpha numeric characters and cannot contain a space.</span></span> |
| <span data-ttu-id="a2361-401">Description</span><span class="sxs-lookup"><span data-stu-id="a2361-401">Description</span></span> |<span data-ttu-id="a2361-402">Description facultative du paramètre d'entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-402">An optional description for the input parameter.</span></span> |
| <span data-ttu-id="a2361-403">Type</span><span class="sxs-lookup"><span data-stu-id="a2361-403">Type</span></span> |<span data-ttu-id="a2361-404">Type de données attendu pour la valeur de paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-404">Data type expected for the parameter value.</span></span>  <span data-ttu-id="a2361-405">Le portail Azure fournira un contrôle approprié pour le type de données de chaque paramètre lorsque vous serez invité à indiquer une entrée.</span><span class="sxs-lookup"><span data-stu-id="a2361-405">The Azure portal will provide an appropriate control for the data type for each parameter when prompting for input.</span></span> |
| <span data-ttu-id="a2361-406">Obligatoire</span><span class="sxs-lookup"><span data-stu-id="a2361-406">Mandatory</span></span> |<span data-ttu-id="a2361-407">Spécifie si une valeur doit être fournie pour le paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-407">Specifies whether a value must be provided for the parameter.</span></span>  <span data-ttu-id="a2361-408">Le Runbook ne peut pas être démarré si vous ne fournissez pas une valeur pour chaque paramètre obligatoire pour lequel aucune valeur par défaut n'est définie.</span><span class="sxs-lookup"><span data-stu-id="a2361-408">The runbook cannot be started if you do not provide a value for each mandatory parameter that does not have a default value defined.</span></span> |
| <span data-ttu-id="a2361-409">Valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="a2361-409">Default Value</span></span> |<span data-ttu-id="a2361-410">Spécifie quelle valeur est utilisée pour le paramètre si aucune n'est pas fournie.</span><span class="sxs-lookup"><span data-stu-id="a2361-410">Specifies what value is used for the parameter if one is not provided.</span></span>  <span data-ttu-id="a2361-411">Cela peut être Null ou une valeur spécifique.</span><span class="sxs-lookup"><span data-stu-id="a2361-411">This can either be Null or a specific value.</span></span> |

### <a name="runbook-output"></a><span data-ttu-id="a2361-412">Sortie de Runbook</span><span class="sxs-lookup"><span data-stu-id="a2361-412">Runbook output</span></span>
<span data-ttu-id="a2361-413">Les données créées par toute activité qui ne dispose pas d'un lien sortant seront ajoutées à la [sortie du Runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2361-413">Data created by any activity that does not have an outgoing link will be added to the [output of the runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span></span>  <span data-ttu-id="a2361-414">La sortie est enregistrée avec la tâche du Runbook et est disponible pour un Runbook parent lorsque le Runbook est utilisé en tant qu'enfant.</span><span class="sxs-lookup"><span data-stu-id="a2361-414">The output is saved with the runbook job and is available to a parent runbook when the runbook is used as a child.</span></span>  

## <a name="powershell-expressions"></a><span data-ttu-id="a2361-415">Expressions PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2361-415">PowerShell expressions</span></span>
<span data-ttu-id="a2361-416">Un des avantages de la création de graphiques est qu'elle vous donne la possibilité de créer un Runbook avec une connaissance de PowerShell minimale.</span><span class="sxs-lookup"><span data-stu-id="a2361-416">One of the advantages of graphical authoring is providing you with the ability to build a runbook with minimal knowledge of PowerShell.</span></span>  <span data-ttu-id="a2361-417">Pour le moment, vous devez avoir quelques connaissances de base sur PowerShell pour remplir certaines [valeurs de paramètres](#activities) et définir des [conditions de lien](#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="a2361-417">Currently, you do need to know a bit of PowerShell though for populating certain [parameter values](#activities) and for setting [link conditions](#links-and-workflow).</span></span>  <span data-ttu-id="a2361-418">Cette section propose une brève introduction aux utilisateurs qui ne connaissent pas les expressions PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a2361-418">This section provides a quick introduction to PowerShell expressions for those users who may not be familiar with it.</span></span>  <span data-ttu-id="a2361-419">La totalité des informations sur PowerShell est disponible dans [Écriture de scripts avec Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2361-419">Full details of PowerShell are available at [Scripting with Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span></span> 

### <a name="powershell-expression-data-source"></a><span data-ttu-id="a2361-420">Source de données d’expressions PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2361-420">PowerShell expression data source</span></span>
<span data-ttu-id="a2361-421">Vous pouvez utiliser une expression PowerShell comme source de données pour remplir la valeur d'un [paramètre d'activité](#activities) avec les résultats d'un code PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a2361-421">You can use a PowerShell expression as a data source to populate the value of an [activity parameter](#activities) with the results of some PowerShell code.</span></span>  <span data-ttu-id="a2361-422">Il peut s'agir d'une seule ligne de code qui exécute une fonction simple ou de plusieurs lignes qui suivent une logique complexe.</span><span class="sxs-lookup"><span data-stu-id="a2361-422">This could be a single line of code that performs some simple function or multiple lines that perform some complex logic.</span></span>  <span data-ttu-id="a2361-423">Toute sortie de commande non affectée à une variable correspond à la sortie de la valeur du paramètre.</span><span class="sxs-lookup"><span data-stu-id="a2361-423">Any output from a command that is not assigned to a variable is output to the parameter value.</span></span> 

<span data-ttu-id="a2361-424">Par exemple, la commande suivante affiche la date actuelle.</span><span class="sxs-lookup"><span data-stu-id="a2361-424">For example, the following command would output the current date.</span></span> 

    Get-Date

<span data-ttu-id="a2361-425">Les commandes suivantes construisent une chaîne à partir de la date actuelle et l'affectent à une variable.</span><span class="sxs-lookup"><span data-stu-id="a2361-425">The following commands build a string from the current date and assign it to a variable.</span></span>  <span data-ttu-id="a2361-426">Le contenu de la variable est ensuite envoyé à la sortie</span><span class="sxs-lookup"><span data-stu-id="a2361-426">The contents of the variable are then sent to the output</span></span> 

    $string = "The current date is " + (Get-Date)
    $string

<span data-ttu-id="a2361-427">Les commandes suivantes évaluent la date actuelle et renvoient une chaîne qui indique si la date du jour est un jour de la semaine ou du week-end.</span><span class="sxs-lookup"><span data-stu-id="a2361-427">The following commands evaluate the current date and return a string indicating whether the current day is a weekend or weekday.</span></span> 

    $date = Get-Date
    if (($date.DayOfWeek = "Saturday") -or ($date.DayOfWeek = "Sunday")) { "Weekend" }
    else { "Weekday" }


### <a name="activity-output"></a><span data-ttu-id="a2361-428">Sortie d'activité</span><span class="sxs-lookup"><span data-stu-id="a2361-428">Activity output</span></span>
<span data-ttu-id="a2361-429">Pour utiliser la sortie d'une activité précédente dans le Runbook, utilisez la variable $ActivityOutput avec la syntaxe suivante.</span><span class="sxs-lookup"><span data-stu-id="a2361-429">To use the output from a previous activity in the runbook, use the $ActivityOutput variable with the following syntax.</span></span>

    $ActivityOutput['Activity Label'].PropertyName

<span data-ttu-id="a2361-430">Par exemple, si la propriété d'une activité requiert le nom d'une machine virtuelle, vous pouvez utiliser l'expression suivante.</span><span class="sxs-lookup"><span data-stu-id="a2361-430">For example, you may have an activity with a property that requires the name of a virtual machine in which case you could use the following expression.</span></span>

    $ActivityOutput['Get-AzureVm'].Name

<span data-ttu-id="a2361-431">Si la propriété requiert l'objet machine virtuelle au lieu d'une simple propriété, vous devez renvoyer l'objet entier avec la syntaxe suivante.</span><span class="sxs-lookup"><span data-stu-id="a2361-431">If the property that required the virtual machine object instead of just a property, then you would return the entire object using the following syntax.</span></span>

    $ActivityOutput['Get-AzureVm']

<span data-ttu-id="a2361-432">Vous pouvez également utiliser la sortie d'une activité dans une expression plus complexe comme celle-ci, qui concatène le texte au nom de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a2361-432">You can also use the output of an activity in a more complex expression such as the following that concatenates text to the virtual machine name.</span></span>

    "The computer name is " + $ActivityOutput['Get-AzureVm'].Name


### <a name="conditions"></a><span data-ttu-id="a2361-433">Conditions</span><span class="sxs-lookup"><span data-stu-id="a2361-433">Conditions</span></span>
<span data-ttu-id="a2361-434">Utilisez les [opérateurs de comparaison](https://technet.microsoft.com/library/hh847759.aspx) pour comparer des valeurs ou déterminer si une valeur correspond à un modèle spécifié.</span><span class="sxs-lookup"><span data-stu-id="a2361-434">Use [comparison operators](https://technet.microsoft.com/library/hh847759.aspx) to compare values or determine if a value matches a specified pattern.</span></span>  <span data-ttu-id="a2361-435">Une comparaison renvoie la valeur $true ou $false.</span><span class="sxs-lookup"><span data-stu-id="a2361-435">A comparison returns a value of either $true or $false.</span></span>

<span data-ttu-id="a2361-436">Par exemple, la condition suivante détermine si la machine virtuelle d’une activité nommée *Get-AzureVM* est actuellement *arrêtée*.</span><span class="sxs-lookup"><span data-stu-id="a2361-436">For example, the following condition determines whether the virtual machine from an activity named *Get-AzureVM* is currently *stopped*.</span></span> 

    $ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped"

<span data-ttu-id="a2361-437">La condition suivante détermine si la même machine virtuelle est dans un état autre qu' *arrêté*.</span><span class="sxs-lookup"><span data-stu-id="a2361-437">The following condition checks whether the same virtual machine is in any state other than *stopped*.</span></span>

    $ActivityOutput["Get-AzureVM"].PowerState –ne "Stopped"

<span data-ttu-id="a2361-438">Vous pouvez joindre plusieurs conditions en utilisant un [opérateur logique](https://technet.microsoft.com/library/hh847789.aspx) comme **-and** ou **-or**.</span><span class="sxs-lookup"><span data-stu-id="a2361-438">You can join multiple conditions using a [logical operator](https://technet.microsoft.com/library/hh847789.aspx) such as **-and** or **-or**.</span></span>  <span data-ttu-id="a2361-439">Par exemple, la condition suivante détermine si la machine virtuelle de l’exemple précédent est dans un état *arrêté* ou *en cours d’arrêt*.</span><span class="sxs-lookup"><span data-stu-id="a2361-439">For example, the following condition checks whether the same virtual machine in the previous example is in a state of *stopped* or *stopping*.</span></span>

    ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped") -or ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopping") 


### <a name="hashtables"></a><span data-ttu-id="a2361-440">Tables de hachage</span><span class="sxs-lookup"><span data-stu-id="a2361-440">Hashtables</span></span>
<span data-ttu-id="a2361-441">[Tables de hachage](http://technet.microsoft.com/library/hh847780.aspx) sont des paires nom/valeur servant à renvoyer un ensemble de valeurs.</span><span class="sxs-lookup"><span data-stu-id="a2361-441">[Hashtables](http://technet.microsoft.com/library/hh847780.aspx) are name/value pairs that are useful for returning a set of values.</span></span>  <span data-ttu-id="a2361-442">Les propriétés de certaines activités peuvent attendre une table de hachage plutôt qu'une valeur simple.</span><span class="sxs-lookup"><span data-stu-id="a2361-442">Properties for certain activities may expect a hashtable instead of a simple value.</span></span>  <span data-ttu-id="a2361-443">Vous pouvez également voir une table de hachage appelée dictionnaire.</span><span class="sxs-lookup"><span data-stu-id="a2361-443">You may also see as hashtable referred to as a dictionary.</span></span> 

<span data-ttu-id="a2361-444">Une table de hachage se crée avec la syntaxe suivante.</span><span class="sxs-lookup"><span data-stu-id="a2361-444">You create a hashtable with the following syntax.</span></span>  <span data-ttu-id="a2361-445">Une table de hachage peut contenir un nombre quelconque d'entrées, chacune étant définie par un nom et une valeur.</span><span class="sxs-lookup"><span data-stu-id="a2361-445">A hashtable can contain any number of entries but each is defined by a name and value.</span></span>

    @{ <name> = <value>; [<name> = <value> ] ...}

<span data-ttu-id="a2361-446">Par exemple, l'expression suivante crée une table de hachage à utiliser dans la source de données pour un paramètre d'activité qui attend une table de hachage avec des valeurs pour une recherche sur Internet.</span><span class="sxs-lookup"><span data-stu-id="a2361-446">For example, the following expression creates a hashtable to be used in the data source for an activity parameter that expected a hashtable with values for an internet search.</span></span>

    $query = "Azure Automation"
    $count = 10
    $h = @{'q'=$query; 'lr'='lang_ja';  'count'=$Count}
    $h

<span data-ttu-id="a2361-447">L'exemple suivant utilise la sortie d'une activité nommée *Obtenir la connexion Twitter* pour remplir une table de hachage.</span><span class="sxs-lookup"><span data-stu-id="a2361-447">The following example uses output from an activity called *Get Twitter Connection* to populate a hashtable.</span></span>

    @{'ApiKey'=$ActivityOutput['Get Twitter Connection'].ConsumerAPIKey;
      'ApiSecret'=$ActivityOutput['Get Twitter Connection'].ConsumerAPISecret;
      'AccessToken'=$ActivityOutput['Get Twitter Connection'].AccessToken;
      'AccessTokenSecret'=$ActivityOutput['Get Twitter Connection'].AccessTokenSecret}



## <a name="next-steps"></a><span data-ttu-id="a2361-448">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a2361-448">Next Steps</span></span>
* <span data-ttu-id="a2361-449">Pour une prise en main des Runbooks de workflow PowerShell, consultez [Mon premier Runbook PowerShell Workflow](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="a2361-449">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 
* <span data-ttu-id="a2361-450">Pour une prise en main des Runbooks graphiques, consultez [Mon premier Runbook graphique](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="a2361-450">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="a2361-451">Pour en savoir plus sur les types de Runbook, leurs avantages et leurs limites, consultez [Types de Runbooks Azure Automation](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="a2361-451">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="a2361-452">Pour comprendre les mécanismes d’authentification à l’aide du compte d’identification Automation, consultez [Configurer un compte d’identification Azure](automation-sec-configure-azure-runas-account.md)</span><span class="sxs-lookup"><span data-stu-id="a2361-452">To understand how to authenticate using the Automation Run As account, see [Configure Azure Run As Account](automation-sec-configure-azure-runas-account.md)</span></span>

