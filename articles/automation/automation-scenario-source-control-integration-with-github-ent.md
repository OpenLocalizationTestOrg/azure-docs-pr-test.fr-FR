---
title: "Intégration du contrôle de code source avec GitHub Enterprise | Microsoft Docs"
description: "Décrit de manière détaillée comment configurer l’intégration avec GitHub Enterprise pour le contrôle de code source des runbooks Automation."
services: automation
documentationCenter: 
authors: mgoedtel
manager: jwhit
editor: 
ms.assetid: e01d817c-7d38-421c-adf5-647a4b526eb4
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: magoedte
ms.openlocfilehash: 62793dcdbbf4c83161e95d1c165d5c231245f7c6
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-github-enterprise"></a><span data-ttu-id="9d270-103">Scénario Azure Automation - Intégration du contrôle de code source Automation avec GitHub Enterprise</span><span class="sxs-lookup"><span data-stu-id="9d270-103">Azure Automation scenario - Automation source control integration with GitHub Enterprise</span></span>

<span data-ttu-id="9d270-104">Automation prend actuellement en charge l’intégration du contrôle de code source, qui vous permet d’associer des runbooks dans votre compte Automation à un référentiel de contrôle de code source GitHub.</span><span class="sxs-lookup"><span data-stu-id="9d270-104">Automation currently supports source control integration, which allows you to associate runbooks in your Automation account to a GitHub source control repository.</span></span>  <span data-ttu-id="9d270-105">Toutefois, les clients qui ont déployé [GitHub Enterprise](https://enterprise.github.com/home) pour prendre en charge leurs pratiques DevOps, souhaitent également l’utiliser pour gérer le cycle de vie des runbooks développés afin d’automatiser les processus d’entreprise et les opérations de gestion des services.</span><span class="sxs-lookup"><span data-stu-id="9d270-105">However, customers who have deployed [GitHub Enterprise](https://enterprise.github.com/home) to support their DevOps practices, also want to use it to manage the lifecycle of runbooks that are developed to automate business processes and service management operations.</span></span>  

<span data-ttu-id="9d270-106">Dans ce scénario, vous disposez d’un ordinateur Windows dans votre centre de données, configuré en tant que Runbook Worker hybride, sur lequel les modules Azure Resource Manager et les outils Git sont installés.</span><span class="sxs-lookup"><span data-stu-id="9d270-106">In this scenario, you have a Windows computer in your data center configured as a Hybrid Runbook Worker with the Azure Resource Manager modules and Git tools installed.</span></span>  <span data-ttu-id="9d270-107">L’ordinateur Worker hybride inclut un clone du référentiel Git local.</span><span class="sxs-lookup"><span data-stu-id="9d270-107">The Hybrid worker machine has a clone of the local Git repository.</span></span>  <span data-ttu-id="9d270-108">Lorsque le runbook est exécuté sur le Worker hybride, le répertoire Git est synchronisé et le contenu du fichier de runbook est importé dans le compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-108">When the runbook is run on the hybrid worker, the Git directory is synchronized and the runbook file contents are imported into the Automation account.</span></span>

<span data-ttu-id="9d270-109">Cet article décrit comment procéder à cette configuration dans votre environnement Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-109">This article describes how to set up this configuration in your Azure Automation environment.</span></span> <span data-ttu-id="9d270-110">Nous commençons par configurer Automation avec les informations d’identification de sécurité, les runbooks nécessaires pour prendre en charge ce scénario et le déploiement d’un Runbook Worker hybride dans votre centre de données pour exécuter les runbooks et accéder à votre référentiel GitHub Enterprise afin de synchroniser des runbooks avec votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-110">We start by configuring Automation with the security credentials, runbooks required to support this scenario, and deployment of a Hybrid Runbook Worker in your data center to run the runbooks and access your GitHub Enterprise repository to synchronize runbooks with your Automation account.</span></span>  


## <a name="getting-the-scenario"></a><span data-ttu-id="9d270-111">Obtention du scénario</span><span class="sxs-lookup"><span data-stu-id="9d270-111">Getting the scenario</span></span>

<span data-ttu-id="9d270-112">Ce scénario se compose de deux runbooks PowerShell que vous pouvez importer directement depuis la [galerie de runbooks](automation-runbook-gallery.md) dans le portail Azure ou télécharger depuis [PowerShell Gallery](https://www.powershellgallery.com).</span><span class="sxs-lookup"><span data-stu-id="9d270-112">This scenario consists of two PowerShell runbooks that you can import directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal or download from the [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="9d270-113">Runbooks</span><span class="sxs-lookup"><span data-stu-id="9d270-113">Runbooks</span></span>

<span data-ttu-id="9d270-114">Runbook</span><span class="sxs-lookup"><span data-stu-id="9d270-114">Runbook</span></span> | <span data-ttu-id="9d270-115">Description</span><span class="sxs-lookup"><span data-stu-id="9d270-115">Description</span></span>| 
--------|------------|
<span data-ttu-id="9d270-116">Export-RunAsCertificateToHybridWorker</span><span class="sxs-lookup"><span data-stu-id="9d270-116">Export-RunAsCertificateToHybridWorker</span></span> | <span data-ttu-id="9d270-117">Ce runbook exporte un certificat d’identification (RunAs) d’un compte Automation vers un Worker hybride afin que les runbooks sur le Worker puissent s’authentifier auprès d’Azure pour pouvoir importer les runbooks dans le compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-117">Runbook exports a RunAs certificate from an Automation account to a hybrid worker so that runbooks on the worker can authenticate with Azure in order to import runbooks into the Automation account.</span></span>| 
<span data-ttu-id="9d270-118">Sync-LocalGitFolderToAutomationAccount</span><span class="sxs-lookup"><span data-stu-id="9d270-118">Sync-LocalGitFolderToAutomationAccount</span></span> | <span data-ttu-id="9d270-119">Ce runbook synchronise le dossier Git local sur l’ordinateur hybride, puis importe les fichiers de runbook (*.ps1) dans le compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-119">Runbook syncs the local Git folder on the hybrid machine and then import the runbook files (*.ps1) into the Automation account.</span></span>|

### <a name="credentials"></a><span data-ttu-id="9d270-120">Informations d'identification</span><span class="sxs-lookup"><span data-stu-id="9d270-120">Credentials</span></span>

<span data-ttu-id="9d270-121">Informations d'identification</span><span class="sxs-lookup"><span data-stu-id="9d270-121">Credential</span></span> | <span data-ttu-id="9d270-122">Description</span><span class="sxs-lookup"><span data-stu-id="9d270-122">Description</span></span>|
-----------|------------|
<span data-ttu-id="9d270-123">GitHRWCredential</span><span class="sxs-lookup"><span data-stu-id="9d270-123">GitHRWCredential</span></span> | <span data-ttu-id="9d270-124">La ressource d’informations d’identification que vous créez inclut le nom d’utilisateur et le mot de passe d’un utilisateur disposant d’autorisations sur le Worker hybride.</span><span class="sxs-lookup"><span data-stu-id="9d270-124">Credential asset you create to contain the username and password for a user with permissions to the hybrid worker.</span></span>|

## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="9d270-125">Installation et configuration de ce scénario</span><span class="sxs-lookup"><span data-stu-id="9d270-125">Installing and configuring this scenario</span></span>

### <a name="prerequisites"></a><span data-ttu-id="9d270-126">Composants requis</span><span class="sxs-lookup"><span data-stu-id="9d270-126">Prerequisites</span></span>

1. <span data-ttu-id="9d270-127">Le runbook Sync-LocalGitFolderToAutomationAccount s’authentifie à l’aide du [Compte d’identification Azure](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="9d270-127">The Sync-LocalGitFolderToAutomationAccount runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span> 

2. <span data-ttu-id="9d270-128">Un espace de travail Microsoft Operations Management Suite (OMS) avec la solution Azure Automation activée et configurée est également requis.</span><span class="sxs-lookup"><span data-stu-id="9d270-128">A Microsoft Operations Management Suite (OMS) workspace with the Azure Automation solution enabled and configured is also required.</span></span>  <span data-ttu-id="9d270-129">Si aucun n’est associé au compte Automation utilisé pour installer et configurer ce scénario, il est créé et configuré pour vous lorsque vous exécutez le script **New-OnPremiseHybridWorker.ps1** à partir du Runbook Worker hybride.</span><span class="sxs-lookup"><span data-stu-id="9d270-129">If you do not have one that is associated with the Automation account used to install and configure this scenario, it is created and configured for you when you execute the **New-OnPremiseHybridWorker.ps1** script from the hybrid runbook worker.</span></span>        

    > [!NOTE]
    > <span data-ttu-id="9d270-130">Actuellement, seules les régions suivantes prennent en charge l’intégration d’Automation avec OMS : **Sud-Est de l’Australie**, **Est des États-Unis 2**, **Asie du Sud-Est** et **Europe de l’Ouest**.</span><span class="sxs-lookup"><span data-stu-id="9d270-130">Currently the following regions only support Automation integration with OMS - **Australia Southeast**, **East US 2**, **Southeast Asia**, and **West Europe**.</span></span> 

3. <span data-ttu-id="9d270-131">Un ordinateur pouvant servir de Runbook Worker hybride dédié, qui héberge également le logiciel GitHub et met à jour les fichiers de runbook (*runbook*.ps1) dans un répertoire source sur le système de fichiers à synchroniser entre GitHub et votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-131">A computer that can serve as a dedicated Hybrid Runbook Worker that will also host the GitHub software and maintain the runbook files (*runbook*.ps1) in a source directory on the file system to synchronize between GitHub and your Automation account.</span></span>

### <a name="import-and-publish-the-runbooks"></a><span data-ttu-id="9d270-132">Importer et publier des runbooks</span><span class="sxs-lookup"><span data-stu-id="9d270-132">Import and publish the runbooks</span></span>

<span data-ttu-id="9d270-133">Pour importer les runbooks *Export-RunAsCertificateToHybridWorker* et *Sync-LocalGitFolderToAutomationAccount* à partir de la galerie de runbooks de votre compte Automation dans le portail Azure, suivez les procédures décrites dans [Importer un runbook de la galerie de runbooks](automation-runbook-gallery.md#to-import-a-runbook-from-the-runbook-gallery-with-the-azure-portal).</span><span class="sxs-lookup"><span data-stu-id="9d270-133">To import the *Export-RunAsCertificateToHybridWorker* and *Sync-LocalGitFolderToAutomationAccount* runbooks from the Runbook Gallery from your Automation account in the Azure portal, follow the procedures in [Import Runbook from the Runbook Gallery](automation-runbook-gallery.md#to-import-a-runbook-from-the-runbook-gallery-with-the-azure-portal).</span></span> <span data-ttu-id="9d270-134">Publiez les runbooks une fois qu’ils ont été correctement importés dans votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-134">Publish the runbooks after they have been successfully imported into your Automation account.</span></span>

### <a name="deploy-and-configure-hybrid-runbook-worker"></a><span data-ttu-id="9d270-135">Déployer et configurer un Runbook Worker hybride</span><span class="sxs-lookup"><span data-stu-id="9d270-135">Deploy and Configure Hybrid Runbook Worker</span></span>

<span data-ttu-id="9d270-136">Si un Runbook Worker hybride n’est pas déjà déployé dans votre centre de données, vous devez consulter la configuration requise et suivre les étapes d’installation automatisée en utilisant la procédure décrite dans [Runbooks Worker hybride Azure Automation - Automatiser l’installation et la configuration](automation-hybrid-runbook-worker.md#automated-deployment).</span><span class="sxs-lookup"><span data-stu-id="9d270-136">If you do not have a Hybrid Runbook Worker already deployed in your data center, you should review the requirements and follow the automated installation steps using the procedure in [Azure Automation Hybrid Runbook Workers - Automate Install and Configuration](automation-hybrid-runbook-worker.md#automated-deployment).</span></span>  <span data-ttu-id="9d270-137">Une fois le Worker hybride correctement installé sur un ordinateur, procédez comme suit pour effectuer sa configuration afin de prendre en charge ce scénario.</span><span class="sxs-lookup"><span data-stu-id="9d270-137">Once you have successfully installed the hybrid worker on a computer, perform the following steps to complete its configuration to support this scenario.</span></span>

1. <span data-ttu-id="9d270-138">Connectez-vous à l’ordinateur hébergeant le rôle Runbook Worker hybride avec un compte disposant des droits d’administrateur local et créez un répertoire pour stocker les fichiers de runbook Git.</span><span class="sxs-lookup"><span data-stu-id="9d270-138">Sign on to the computer hosting the Hybrid Runbook Worker role with an account that has local administrative rights and create a directory to hold the Git runbook files.</span></span>  <span data-ttu-id="9d270-139">Clonez le référentiel Git interne dans le répertoire.</span><span class="sxs-lookup"><span data-stu-id="9d270-139">Clone  the internal Git repository to the directory.</span></span>
2. <span data-ttu-id="9d270-140">Si vous n’avez pas déjà créé un compte d’identification ou si vous souhaitez en créer un nouveau spécialement conçu à cet effet, dans le portail Azure, accédez aux comptes Automation, sélectionnez votre compte Automation et créez une [ressource d’informations d’identification](automation-credentials.md) contenant le nom d’utilisateur et le mot de passe d’un utilisateur disposant d’autorisations sur le Worker hybride.</span><span class="sxs-lookup"><span data-stu-id="9d270-140">If you do not already have a RunAs account created or you want to create a new one dedicated for this purpose, from the Azure portal navigate to Automation accounts, select your Automation account and create a [credential asset](automation-credentials.md) that contains the username and password for a user with permissions to the hybrid worker.</span></span>  
3. <span data-ttu-id="9d270-141">Dans votre compte Automation, [modifiez le runbook](automation-edit-textual-runbook.md) **Export-RunAsCertificateToHybridWorker** et remplacez la valeur de la variable *$Password* par un mot de passe fort.</span><span class="sxs-lookup"><span data-stu-id="9d270-141">From your Automation account, [edit the runbook](automation-edit-textual-runbook.md)  **Export-RunAsCertificateToHybridWorker** and modify the value for the variable *$Password* with a strong password.</span></span>  <span data-ttu-id="9d270-142">Une fois la valeur modifiée, cliquez sur **Publier** pour que la version brouillon du runbook soit publiée.</span><span class="sxs-lookup"><span data-stu-id="9d270-142">After you modify the value, click **Publish** to have the draft version of the runbook published.</span></span> 
5. <span data-ttu-id="9d270-143">Démarrez le runbook **Export-RunAsCertificateToHybridWorker**, dans le panneau **Démarrer le runbook**, sous l’option **Paramètres d’exécution**, sélectionnez l’option **Worker hybride**, puis sélectionnez dans la liste déroulante le groupe Worker hybride que vous avez créé précédemment pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="9d270-143">Start the runbook **Export-RunAsCertificateToHybridWorker**, and in the **Start Runbook** blade, under the option **Run settings** select the option **Hybrid Worker** and in the drop-down list select the Hybrid worker group you created earlier for this scenario.</span></span>  

    <span data-ttu-id="9d270-144">Un certificat est exporté vers le Worker hybride pour que les runbooks sur le Worker puissent s’authentifier auprès d’Azure à l’aide de la connexion d’identification, afin de gérer les ressources Azure (et plus particulièrement pour ce scénario, l’importation de runbooks dans le compte Automation).</span><span class="sxs-lookup"><span data-stu-id="9d270-144">This exports a certificate to the hybrid worker so that runbooks on the worker can authenticate with Azure using the Run As connection in order to manage Azure resources (in particular for this scenario - import runbooks to the Automation account).</span></span>

4. <span data-ttu-id="9d270-145">Dans votre compte Automation, sélectionnez le groupe Worker hybride créé précédemment et [spécifiez un compte d’identification](automation-hrw-run-runbooks.md#runas-account) pour le groupe Worker hybride, puis choisissez la ressource d’informations d’identification que vous avez créée.</span><span class="sxs-lookup"><span data-stu-id="9d270-145">From your Automation account, select the Hybrid worker group created earlier and [specify a RunAs account](automation-hrw-run-runbooks.md#runas-account) for the Hybrid worker group, and chose the credential asset you just or already have created.</span></span>  <span data-ttu-id="9d270-146">Cela garantit que le runbook de synchronisation peut exécuter des commandes Git.</span><span class="sxs-lookup"><span data-stu-id="9d270-146">This assures that the Sync runbook can run Git commands.</span></span> 
5. <span data-ttu-id="9d270-147">Démarrez le runbook **Sync-LocalGitFolderToAutomationAccount**, fournissez les valeurs de paramètre d’entrée suivantes requises puis, dans le panneau **Démarrer le runbook**, sous l’option **Paramètres d’exécution**, sélectionnez l’option **Worker hybride**, puis sélectionnez dans la liste déroulante le groupe Worker hybride que vous avez créé précédemment pour ce scénario :</span><span class="sxs-lookup"><span data-stu-id="9d270-147">Start the runbook **Sync-LocalGitFolderToAutomationAccount**, provide the following required input parameter values and in the **Start Runbook** blade, under the option **Run settings** select the option **Hybrid Worker** and in the drop-down list select the Hybrid worker group you created earlier for this scenario:</span></span>
    * <span data-ttu-id="9d270-148">*ResourceGroupName* : nom du groupe de ressources associé à votre compte Automation</span><span class="sxs-lookup"><span data-stu-id="9d270-148">*ResourceGroup* - the name of your resource group associated with your Automation account</span></span>
    * <span data-ttu-id="9d270-149">*AutomationAccountName* : nom de votre compte Automation</span><span class="sxs-lookup"><span data-stu-id="9d270-149">*AutomationAccountName* - the name of your Automation account</span></span>
    * <span data-ttu-id="9d270-150">*GitPath* : dossier ou fichier local sur le Runbook Worker hybride dans lequel Git est configuré pour extraire les dernières modifications</span><span class="sxs-lookup"><span data-stu-id="9d270-150">*GitPath* - The local folder or file on the Hybrid Runbook Worker where Git is set up to pull latest changes into</span></span>

    <span data-ttu-id="9d270-151">Le dossier Git local est synchronisé sur l’ordinateur Worker hybride. Importez ensuite les fichiers .ps1 du répertoire source dans le compte Automation.</span><span class="sxs-lookup"><span data-stu-id="9d270-151">This will sync the local Git folder on the hybrid worker computer and then import the .ps1 files from the source directory to the Automation account.</span></span>

    ![Démarrer le runbook Sync-LocalGitFolderToAutomationAccount](media/automation-scenario-source-control-integration-with-github-ent/start-runbook-synclocalgitfoldertoautoacct.png)<br>

7. <span data-ttu-id="9d270-153">Affichez les détails d’un résumé de travail du runbook en le sélectionnant dans le panneau **Runbooks** de votre compte Automation. Sélectionnez ensuite la vignette **Travaux**.</span><span class="sxs-lookup"><span data-stu-id="9d270-153">View job summary details for the runbook by selecting it from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="9d270-154">Vérifiez qu’il a abouti en sélectionnant la vignette **Tous les journaux** et en examinant le flux de journal détaillé.</span><span class="sxs-lookup"><span data-stu-id="9d270-154">Confirm it completed successfully by selecting the **All logs** tile and reviewing the detailed log stream.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="9d270-155">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="9d270-155">Next steps</span></span>

-  <span data-ttu-id="9d270-156">Pour en savoir plus sur les types de Runbook, leurs avantages et leurs limites, consultez [Types de Runbooks Azure Automation](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="9d270-156">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
-  <span data-ttu-id="9d270-157">Pour plus d’informations sur la fonctionnalité de prise en charge de script PowerShell, consultez [Prise en charge de script PowerShell natif dans Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="9d270-157">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>
