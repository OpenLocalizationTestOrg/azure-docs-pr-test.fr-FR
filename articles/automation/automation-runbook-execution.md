---
title: "l’exécution d’aaaRunbook dans Azure Automation | Documents Microsoft"
description: "Décrit les détails de hello de mode de traitement d’un runbook dans Azure Automation."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: bdb535675443353d44640bc7773de3f9dac5e42c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="e3da6-103">Exécution d'un Runbook dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="e3da6-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="e3da6-104">Lorsque vous démarrez un Runbook dans Azure Automation, une tâche est créée.</span><span class="sxs-lookup"><span data-stu-id="e3da6-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="e3da6-105">Une tâche est une instance d'exécution unique d'un Runbook.</span><span class="sxs-lookup"><span data-stu-id="e3da6-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="e3da6-106">Une Automation Azure thread de travail est affecté toorun chaque tâche.</span><span class="sxs-lookup"><span data-stu-id="e3da6-106">An Azure Automation worker is assigned toorun each job.</span></span> <span data-ttu-id="e3da6-107">Même si les travaux sont partagés par plusieurs comptes Azure, les tâches des différents comptes Automation sont isolées les unes des autres.</span><span class="sxs-lookup"><span data-stu-id="e3da6-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="e3da6-108">Il est inutile contrôler quels demande hello de services de travail pour votre travail.</span><span class="sxs-lookup"><span data-stu-id="e3da6-108">You do not have control over which worker services hello request for your job.</span></span>  <span data-ttu-id="e3da6-109">Un même Runbook peut avoir plusieurs tâches s'exécutant à la fois.</span><span class="sxs-lookup"><span data-stu-id="e3da6-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="e3da6-110">Lorsque vous affichez la liste hello des procédures opérationnelles Bonjour portail Azure, il répertorie état hello de tous les travaux qui ont été démarrés pour chaque runbook.</span><span class="sxs-lookup"><span data-stu-id="e3da6-110">When you view hello list of runbooks in hello Azure portal, it lists hello status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="e3da6-111">Vous pouvez afficher la liste hello de tâches pour chaque runbook dans l’ordre tootrack hello état de chaque.</span><span class="sxs-lookup"><span data-stu-id="e3da6-111">You can view hello list of jobs for each runbook in order tootrack hello status of each.</span></span> <span data-ttu-id="e3da6-112">Pour obtenir une description de hello différents États de travail, consultez [États des travaux](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="e3da6-112">For a description of hello different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="e3da6-113">Hello diagramme suivant montre hello du cycle de vie d’un travail de runbook pour [runbooks graphiques](automation-runbook-types.md#graphical-runbooks) et [les runbooks PowerShell Workflow](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="e3da6-113">hello following diagram shows hello lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![États des tâches - Workflow PowerShell](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="e3da6-115">Hello diagramme suivant montre hello du cycle de vie d’un travail de runbook pour [runbook PowerShell](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="e3da6-115">hello following diagram shows hello lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![États des tâches - Script PowerShell](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="e3da6-117">Vos travaux ont accès tooyour Azure ressources en effectuant une tooyour connexion abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="e3da6-117">Your jobs have access tooyour Azure resources by making a connection tooyour Azure subscription.</span></span> <span data-ttu-id="e3da6-118">Ils ont uniquement accès tooresources dans votre centre de données si ces ressources sont accessibles à partir de cloud public de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-118">They only have access tooresources in your data center if those resources are accessible from hello public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="e3da6-119">États des tâches</span><span class="sxs-lookup"><span data-stu-id="e3da6-119">Job statuses</span></span>
<span data-ttu-id="e3da6-120">Hello tableau suivant décrit hello différents états possibles d’une tâche.</span><span class="sxs-lookup"><span data-stu-id="e3da6-120">hello following table describes hello different statuses that are possible for a job.</span></span>

| <span data-ttu-id="e3da6-121">État</span><span class="sxs-lookup"><span data-stu-id="e3da6-121">Status</span></span> | <span data-ttu-id="e3da6-122">Description</span><span class="sxs-lookup"><span data-stu-id="e3da6-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="e3da6-123">Completed</span><span class="sxs-lookup"><span data-stu-id="e3da6-123">Completed</span></span> |<span data-ttu-id="e3da6-124">Hello terminée avec succès.</span><span class="sxs-lookup"><span data-stu-id="e3da6-124">hello job completed successfully.</span></span> |
| <span data-ttu-id="e3da6-125">Échec</span><span class="sxs-lookup"><span data-stu-id="e3da6-125">Failed</span></span> |<span data-ttu-id="e3da6-126">Pour [runbook PowerShell Workflow et graphique](automation-runbook-types.md), hello runbook échec toocompile.</span><span class="sxs-lookup"><span data-stu-id="e3da6-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), hello runbook failed toocompile.</span></span>  <span data-ttu-id="e3da6-127">Pour [runbooks de PowerShell Script](automation-runbook-types.md), hello runbook échec toostart ou tâche de hello a rencontré une exception.</span><span class="sxs-lookup"><span data-stu-id="e3da6-127">For [PowerShell Script runbooks](automation-runbook-types.md), hello runbook failed toostart or hello job encountered an exception.</span></span> |
| <span data-ttu-id="e3da6-128">Échec, en attente de ressources</span><span class="sxs-lookup"><span data-stu-id="e3da6-128">Failed, waiting for resources</span></span> |<span data-ttu-id="e3da6-129">tâche de Hello a échoué, car il a atteint hello [équitable](#fairshare) limiter trois fois et démarré à partir de hello même point de contrôle ou à partir de hello heure de début du runbook de hello chaque.</span><span class="sxs-lookup"><span data-stu-id="e3da6-129">hello job failed because it reached hello [fair share](#fairshare) limit three times and started from hello same checkpoint or from hello start of hello runbook each time.</span></span> |
| <span data-ttu-id="e3da6-130">Mis en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="e3da6-130">Queued</span></span> |<span data-ttu-id="e3da6-131">travail de Hello est en attente pour les ressources sur toocome d’un travail Automation disponible afin qu’il peut être démarré.</span><span class="sxs-lookup"><span data-stu-id="e3da6-131">hello job is waiting for resources on an Automation worker toocome available so that it can be started.</span></span> |
| <span data-ttu-id="e3da6-132">Starting</span><span class="sxs-lookup"><span data-stu-id="e3da6-132">Starting</span></span> |<span data-ttu-id="e3da6-133">tooa travail a été affectée à la tâche de Hello et système de hello est en cours de hello de démarrage.</span><span class="sxs-lookup"><span data-stu-id="e3da6-133">hello job has been assigned tooa worker, and hello system is in hello process of starting it.</span></span> |
| <span data-ttu-id="e3da6-134">Reprise</span><span class="sxs-lookup"><span data-stu-id="e3da6-134">Resuming</span></span> |<span data-ttu-id="e3da6-135">système de Hello est en cours de hello de reprendre le travail de hello a été suspendue.</span><span class="sxs-lookup"><span data-stu-id="e3da6-135">hello system is in hello process of resuming hello job after it was suspended.</span></span> |
| <span data-ttu-id="e3da6-136">Exécution</span><span class="sxs-lookup"><span data-stu-id="e3da6-136">Running</span></span> |<span data-ttu-id="e3da6-137">Hello tâche s’exécute.</span><span class="sxs-lookup"><span data-stu-id="e3da6-137">hello job is running.</span></span> |
| <span data-ttu-id="e3da6-138">En cours d'exécution, en attente de ressources</span><span class="sxs-lookup"><span data-stu-id="e3da6-138">Running, waiting for resources</span></span> |<span data-ttu-id="e3da6-139">Hello travail a été déchargé, car il a atteint hello [équitable](#fairshare) limite.</span><span class="sxs-lookup"><span data-stu-id="e3da6-139">hello job has been unloaded because it reached hello [fair share](#fairshare) limit.</span></span> <span data-ttu-id="e3da6-140">Elle reprend bientôt depuis son dernier point de contrôle.</span><span class="sxs-lookup"><span data-stu-id="e3da6-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="e3da6-141">Arrêté</span><span class="sxs-lookup"><span data-stu-id="e3da6-141">Stopped</span></span> |<span data-ttu-id="e3da6-142">tâche de Hello a été arrêtée par l’utilisateur de hello avant qu’elle a été terminée.</span><span class="sxs-lookup"><span data-stu-id="e3da6-142">hello job was stopped by hello user before it was completed.</span></span> |
| <span data-ttu-id="e3da6-143">En cours d’arrêt</span><span class="sxs-lookup"><span data-stu-id="e3da6-143">Stopping</span></span> |<span data-ttu-id="e3da6-144">système de Hello est en cours de hello d’arrêter la tâche de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-144">hello system is in hello process of stopping hello job.</span></span> |
| <span data-ttu-id="e3da6-145">Interrompu</span><span class="sxs-lookup"><span data-stu-id="e3da6-145">Suspended</span></span> |<span data-ttu-id="e3da6-146">tâche de Hello a été suspendue par l’utilisateur de hello, par le système de hello ou par une commande dans les runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-146">hello job was suspended by hello user, by hello system, or by a command in hello runbook.</span></span> <span data-ttu-id="e3da6-147">Une tâche suspendue peut être redémarrée et reprise à partir de son dernier point de contrôle ou à partir de la hello à partir de hello runbook si elle ne dispose pas des points de contrôle.</span><span class="sxs-lookup"><span data-stu-id="e3da6-147">A job that is suspended can be started again and resume from its last checkpoint or from hello beginning of hello runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="e3da6-148">Hello runbook est uniquement suspendu par le système de hello lorsqu’une exception se produit.</span><span class="sxs-lookup"><span data-stu-id="e3da6-148">hello runbook will only be suspended by hello system when an exception occurs.</span></span> <span data-ttu-id="e3da6-149">Par défaut, ErrorActionPreference est défini trop**continuer**, ce qui signifie que cette tâche hello continue à fonctionner en cas d’erreur.</span><span class="sxs-lookup"><span data-stu-id="e3da6-149">By default, ErrorActionPreference is set too**Continue**, meaning that hello job keeps running on an error.</span></span> <span data-ttu-id="e3da6-150">Si cette variable de préférence est définie trop**arrêter**, puis suspend la tâche de hello en cas d’erreur.</span><span class="sxs-lookup"><span data-stu-id="e3da6-150">If this preference variable is set too**Stop**, then hello job suspends on an error.</span></span>  <span data-ttu-id="e3da6-151">S’applique également[runbook PowerShell Workflow et graphique](automation-runbook-types.md) uniquement.</span><span class="sxs-lookup"><span data-stu-id="e3da6-151">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="e3da6-152">Suspension</span><span class="sxs-lookup"><span data-stu-id="e3da6-152">Suspending</span></span> |<span data-ttu-id="e3da6-153">système de Hello tente une tâche de hello toosuspend à demande hello d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-153">hello system is attempting toosuspend hello job at hello request of hello user.</span></span> <span data-ttu-id="e3da6-154">Hello runbook doit atteindre son prochain point de contrôle avant de pouvoir être suspendu.</span><span class="sxs-lookup"><span data-stu-id="e3da6-154">hello runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="e3da6-155">S'il a déjà passé le dernier point de contrôle, il se termine avant d'être suspendu.</span><span class="sxs-lookup"><span data-stu-id="e3da6-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="e3da6-156">S’applique également[runbook PowerShell Workflow et graphique](automation-runbook-types.md) uniquement.</span><span class="sxs-lookup"><span data-stu-id="e3da6-156">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-hello-azure-portal"></a><span data-ttu-id="e3da6-157">Affichage de l’état du travail à partir de hello portail Azure</span><span class="sxs-lookup"><span data-stu-id="e3da6-157">Viewing job status from hello Azure portal</span></span>
<span data-ttu-id="e3da6-158">Vous pouvez afficher un état résumé de tous les travaux ou explorez les détails d’une tâche spécifique de runbook dans hello portail Azure ou à la configuration de l’intégration avec votre état de tâche Analytique de journal de Microsoft Operations Management Suite (OMS) espace de travail tooforward runbook et flux de travail.</span><span class="sxs-lookup"><span data-stu-id="e3da6-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in hello Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace tooforward runbook job status and job streams.</span></span>  <span data-ttu-id="e3da6-159">Pour plus d’informations sur l’intégration à l’Analytique des journaux OMS, consultez [transférer l’état du travail et flux de travail à partir de l’Automation tooLog Analytique (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="e3da6-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="e3da6-160">Résumé des tâches de Runbook Automation</span><span class="sxs-lookup"><span data-stu-id="e3da6-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="e3da6-161">Sur hello à droite de votre compte Automation sélectionné, vous pouvez voir un résumé de tous les travaux d’un compte Automation sélectionné sous hello **statistiques de travail** vignette.</span><span class="sxs-lookup"><span data-stu-id="e3da6-161">On hello right of your selected Automation account, you can see a summary of all of hello runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="e3da6-162">![Vignette Statistiques des tâches](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="e3da6-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="e3da6-163">Cette vignette affiche un nombre et une représentation graphique de l’état du travail hello pour tous les travaux exécutés.</span><span class="sxs-lookup"><span data-stu-id="e3da6-163">This tile displays a count and graphical representation of hello job status for all jobs executed.</span></span>  

<span data-ttu-id="e3da6-164">En cliquant sur la vignette de hello présente hello **travaux** panneau, qui inclut une liste récapitulative de tous les travaux exécutés, avec état, l’exécution du travail et les heures de début et de fin.</span><span class="sxs-lookup"><span data-stu-id="e3da6-164">Clicking on hello tile presents hello **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="e3da6-165">![Panneau Tâches de compte Automation](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="e3da6-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="e3da6-166">Vous pouvez filtrer la liste hello des tâches en sélectionnant **de filtrer les travaux** et filtrer sur un runbook spécifique, l’état de la tâche ou à partir de la liste déroulante hello, hello toosearch de plage de date/heure dans.</span><span class="sxs-lookup"><span data-stu-id="e3da6-166">You can filter hello list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from hello drop-down list, hello date/time range toosearch within.</span></span><br><br> <span data-ttu-id="e3da6-167">![Filtrer l’état des tâches](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="e3da6-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="e3da6-168">Ou bien, vous pouvez afficher les détails d’une tâche récapitulative d’un runbook spécifique en sélectionnant ce runbook à partir de hello **Runbooks** panneau dans votre compte Automation, puis sélectionnez hello **travaux** vignette.</span><span class="sxs-lookup"><span data-stu-id="e3da6-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from hello **Runbooks** blade in your Automation account, and then select hello **Jobs** tile.</span></span>  <span data-ttu-id="e3da6-169">Cela pose hello **travaux** panneau, et à partir de là que vous pouvez cliquer sur tooview enregistrement du travail hello ses détails et sa sortie.</span><span class="sxs-lookup"><span data-stu-id="e3da6-169">This presents hello **Jobs** blade, and from there you can click on hello job record tooview its detail and output.</span></span><br><br> <span data-ttu-id="e3da6-170">![Panneau Tâches de compte Automation](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="e3da6-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="e3da6-171">Résumé des tâches</span><span class="sxs-lookup"><span data-stu-id="e3da6-171">Job Summary</span></span>
<span data-ttu-id="e3da6-172">Vous pouvez afficher une liste de tous les travaux hello ont été créées pour un runbook donné et leur état le plus récent.</span><span class="sxs-lookup"><span data-stu-id="e3da6-172">You can view a list of all of hello jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="e3da6-173">Vous pouvez filtrer cette liste par état du travail et hello plage de dates pour hello dernier changement toohello travail.</span><span class="sxs-lookup"><span data-stu-id="e3da6-173">You can filter this list by job status and hello range of dates for hello last change toohello job.</span></span> <span data-ttu-id="e3da6-174">tooview ses informations détaillées et sa sortie, cliquez sur le nom hello d’une tâche.</span><span class="sxs-lookup"><span data-stu-id="e3da6-174">tooview its detailed information and output, click on hello name of a job.</span></span> <span data-ttu-id="e3da6-175">Hello vue détaillée de tâche de hello inclut les valeurs hello pour les paramètres de runbook hello qui ont été fournis toothat travail.</span><span class="sxs-lookup"><span data-stu-id="e3da6-175">hello detailed view of hello job includes hello values for hello runbook parameters that were provided toothat job.</span></span>

<span data-ttu-id="e3da6-176">Vous pouvez utiliser hello suivant de tâches de hello tooview étapes d’un runbook.</span><span class="sxs-lookup"><span data-stu-id="e3da6-176">You can use hello following steps tooview hello jobs for a runbook.</span></span>

1. <span data-ttu-id="e3da6-177">Bonjour portail Azure, sélectionnez **Automation** , puis sélectionnez nom hello d’un compte Automation.</span><span class="sxs-lookup"><span data-stu-id="e3da6-177">In hello Azure portal, select **Automation** and then select hello name of an Automation account.</span></span>
2. <span data-ttu-id="e3da6-178">À partir du hub de hello, sélectionnez **Runbooks** et puis sur hello **Runbooks** panneau Sélectionner un runbook à partir de la liste de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-178">From hello hub, select **Runbooks** and then on hello **Runbooks** blade select a runbook from hello list.</span></span>
3. <span data-ttu-id="e3da6-179">Dans Panneau de hello pour les runbook hello sélectionné, cliquez sur hello **travaux** vignette.</span><span class="sxs-lookup"><span data-stu-id="e3da6-179">On hello blade for hello selected runbook, click hello **Jobs** tile.</span></span>
4. <span data-ttu-id="e3da6-180">Cliquez sur l’une des tâches hello dans la liste de hello et sur le panneau de détails du travail hello runbook, vous pouvez afficher ses détails et sa sortie.</span><span class="sxs-lookup"><span data-stu-id="e3da6-180">Click on one of hello jobs in hello list and on hello runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="e3da6-181">Récupération de l'état d'une tâche à l'aide de Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="e3da6-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="e3da6-182">Vous pouvez utiliser hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) les travaux de hello tooretrieve créés pour un runbook et hello les détails d’une tâche particulière.</span><span class="sxs-lookup"><span data-stu-id="e3da6-182">You can use hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello jobs created for a runbook and hello details of a particular job.</span></span> <span data-ttu-id="e3da6-183">Si vous démarrez un runbook avec Windows PowerShell à l’aide [AzureRmAutomationRunbook de début](https://msdn.microsoft.com/library/mt603661.aspx), il retourne la tâche résultante de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns hello resulting job.</span></span> <span data-ttu-id="e3da6-184">Utilisez [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)tooget sortie un travail de sortie.</span><span class="sxs-lookup"><span data-stu-id="e3da6-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output tooget a job’s output.</span></span>

<span data-ttu-id="e3da6-185">Bonjour exemples de commandes suivants récupérer hello dernière tâche d’un exemple de runbook et affiche son état, les valeurs hello fournis pour les paramètres de runbook hello et hello la sortie à partir de la tâche de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-185">hello following sample commands retrieve hello last job for a sample runbook and displays its status, hello values provided for hello runbook parameters, and hello output from hello job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="e3da6-186">répartition de charge équilibrée</span><span class="sxs-lookup"><span data-stu-id="e3da6-186">Fair share</span></span>
<span data-ttu-id="e3da6-187">Dans les ressources de tooshare commande entre tous les runbooks dans le cloud de hello, Azure Automation sera décharge temporairement tout travail après qu’il a fonctionné pendant trois heures.</span><span class="sxs-lookup"><span data-stu-id="e3da6-187">In order tooshare resources among all runbooks in hello cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="e3da6-188">Pendant ce temps, les tâches pour [Runbooks basés sur PowerShell](automation-runbook-types.md#powershell-runbooks) sont arrêtées et non redémarrées.</span><span class="sxs-lookup"><span data-stu-id="e3da6-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="e3da6-189">Hello d’état du travail indique **arrêté**.</span><span class="sxs-lookup"><span data-stu-id="e3da6-189">hello job status shows **Stopped**.</span></span>  <span data-ttu-id="e3da6-190">Ce type de runbook est toujours redémarré à partir du début de hello, car ils ne prennent pas en charge les points de contrôle.</span><span class="sxs-lookup"><span data-stu-id="e3da6-190">This type of runbook is always restarted from hello beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="e3da6-191">[Les Runbooks basés sur le flux de travail PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) reprennent depuis leur dernier [point de contrôle](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="e3da6-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="e3da6-192">Après avoir exécuté les trois heures, tâche du runbook hello est suspendu par le service de hello et son état indique **en cours d’exécution, en attente de ressources**.</span><span class="sxs-lookup"><span data-stu-id="e3da6-192">After running three hours, hello runbook job will be suspended by hello service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="e3da6-193">Lorsqu’un bac à sable devient disponible, hello runbook sera automatiquement redémarré par le service d’automatisation hello et reprend à partir du dernier point de contrôle hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-193">When a sandbox becomes available, hello runbook will be automatically restarted by hello Automation service and resumes from hello last checkpoint.</span></span>  <span data-ttu-id="e3da6-194">Ce comportement de flux de travail PowerShell est normal pour la suspension/reprise.</span><span class="sxs-lookup"><span data-stu-id="e3da6-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="e3da6-195">Si hello runbook dépasse encore du runtime, les trois heures hello processus se répète, des heures de toothree.</span><span class="sxs-lookup"><span data-stu-id="e3da6-195">If hello runbook again exceeds three hours of runtime, hello process repeats, up toothree times.</span></span>  <span data-ttu-id="e3da6-196">Après le redémarrage de tiers hello, hello runbook n’a toujours pas terminé dans les trois heures, Échec de la tâche du runbook hello, puis affiche de l’état de la tâche hello **échec, en attente de ressources**.</span><span class="sxs-lookup"><span data-stu-id="e3da6-196">After hello third restart, if hello runbook still has not completed in three hours, then hello runbook job is failed, and hello job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="e3da6-197">Dans ce cas, vous recevez hello avec échec de hello l’exception suivante.</span><span class="sxs-lookup"><span data-stu-id="e3da6-197">In this case, you receive hello following exception with hello failure.</span></span>

<span data-ttu-id="e3da6-198">*travail de Hello ne peut pas continuer en cours d’exécution, car il a été évincé plusieurs fois hello même point de contrôle. Assurez-vous que votre Runbook n’effectue pas des opérations de longue durée sans conserver son état.*</span><span class="sxs-lookup"><span data-stu-id="e3da6-198">*hello job cannot continue running because it was repeatedly evicted from hello same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="e3da6-199">Il s’agit service hello de tooprotect à partir de l’exécution de procédures opérationnelles indéfiniment sans fin, car ils ne sont pas en mesure de toomake il toohello un point de contrôle suivant sans nouveau déchargement.</span><span class="sxs-lookup"><span data-stu-id="e3da6-199">This is tooprotect hello service from runbooks running indefinitely without completing, as they are not able toomake it toohello next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="e3da6-200">Si hello runbook ne possède aucun point de contrôle ou de travail de hello n’a pas atteint premier point de contrôle hello avant son déchargement, puis il redémarre à partir du début de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-200">If hello runbook has no checkpoints or hello job had not reached hello first checkpoint before being unloaded, then it restarts from hello beginning.</span></span>  

<span data-ttu-id="e3da6-201">Lorsque vous créez un runbook, vous devez vous assurer que toorun de temps hello toutes les activités entre deux points de contrôle ne dépasse pas trois heures.</span><span class="sxs-lookup"><span data-stu-id="e3da6-201">When you create a runbook, you should ensure that hello time toorun any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="e3da6-202">Vous devrez peut-être tooensure runbook tooyour tooadd de points de contrôle qu’il ne pas atteint cette limite de trois heures ou décomposent long opérations en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="e3da6-202">You may need tooadd checkpoints tooyour runbook tooensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="e3da6-203">Par exemple, votre Runbook peut effectuer une réindexation sur une base de données SQL volumineuse.</span><span class="sxs-lookup"><span data-stu-id="e3da6-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="e3da6-204">Si cette opération ne se termine pas dans hello juste limite de partage, puis le travail de hello est déchargé et redémarré à partir du début de hello.</span><span class="sxs-lookup"><span data-stu-id="e3da6-204">If this single operation does not complete within hello fair share limit, then hello job are unloaded and restarted from hello beginning.</span></span> <span data-ttu-id="e3da6-205">Dans ce cas, vous devez décomposer les opération de réindexation hello en plusieurs étapes, telles que la réindexation d’une table à la fois et puis insérez un point de contrôle après chaque opération afin que hello travail puisse reprendre après hello dernière opération toocomplete.</span><span class="sxs-lookup"><span data-stu-id="e3da6-205">In this case, you should break up hello reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that hello job could resume after hello last operation toocomplete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e3da6-206">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="e3da6-206">Next steps</span></span>
* <span data-ttu-id="e3da6-207">toolearn savoir plus sur hello différentes méthodes qui peuvent être utilisé toostart un runbook dans Azure Automation, consultez [démarrage d’un runbook dans Azure Automation](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="e3da6-207">toolearn more about hello different methods that can be used toostart a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

