---
title: "Dépannage des problèmes courants d’Azure Automation | Microsoft Docs"
description: "Cet article fournit des informations pour le dépannage et la correction d’erreurs courantes dans Azure Automation."
services: automation
documentationcenter: 
author: mgoedtel
manager: stevenka
editor: tysonn
tags: top-support-issue
keywords: "erreur, dépannage, problème d’automation"
ms.assetid: 5f3cfe61-70b0-4e9c-b892-d02daaeee07d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/26/2017
ms.author: sngun; v-reagie
ms.openlocfilehash: 64548d91e98754210cc5185d9d759141cc0621d3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshooting-common-issues-in-azure-automation"></a><span data-ttu-id="34b0a-104">Dépannage des problèmes courants dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="34b0a-104">Troubleshooting common issues in Azure Automation</span></span> 
<span data-ttu-id="34b0a-105">Cet article aide à dépanner les problèmes courants que vous pourriez rencontrer dans Azure Automation et suggère des solutions possibles pour les résoudre.</span><span class="sxs-lookup"><span data-stu-id="34b0a-105">This article provides help troubleshooting common errors you might experience in Azure Automation and suggests possible solutions to resolve them.</span></span>

## <a name="authentication-errors-when-working-with-azure-automation-runbooks"></a><span data-ttu-id="34b0a-106">Erreurs d’authentification avec des runbooks Azure Automation</span><span class="sxs-lookup"><span data-stu-id="34b0a-106">Authentication errors when working with Azure Automation runbooks</span></span>
### <a name="scenario-sign-in-to-azure-account-failed"></a><span data-ttu-id="34b0a-107">Scénario : la connexion à un compte Azure a échoué</span><span class="sxs-lookup"><span data-stu-id="34b0a-107">Scenario: Sign in to Azure Account failed</span></span>
<span data-ttu-id="34b0a-108">**Erreur :** vous recevez l’erreur « Unknown_user_type : Type d’utilisateur inconnu » lorsque vous travaillez avec les applets de commande Add-AzureAccount ou AzureRmAccount de connexion.</span><span class="sxs-lookup"><span data-stu-id="34b0a-108">**Error:** You receive the error "Unknown_user_type: Unknown User Type" when working with the Add-AzureAccount or Login-AzureRmAccount cmdlets.</span></span>

<span data-ttu-id="34b0a-109">**Raison de l'erreur :** cette erreur se produit si le nom de la ressource d’informations d’identification n'est pas valide ou si le nom d'utilisateur et le mot de passe que vous avez utilisés pour configurer la ressource d’informations d’identification Automation (Automatisation) ne sont pas valides.</span><span class="sxs-lookup"><span data-stu-id="34b0a-109">**Reason for the error:** This error occurs if the credential asset name is not valid or if the username and password that you used to setup the Automation credential asset are not valid.</span></span>

<span data-ttu-id="34b0a-110">**Conseils de dépannage :** procédez comme suit pour identifier le problème :</span><span class="sxs-lookup"><span data-stu-id="34b0a-110">**Troubleshooting tips:** In order to determine what's wrong, take the following steps:</span></span>  

1. <span data-ttu-id="34b0a-111">Assurez-vous qu’il n’existe aucun caractère spécial, notamment le caractère **@** , dans le nom de la ressources d’informations d’identification Automation que vous utilisez pour vous connecter à Azure.</span><span class="sxs-lookup"><span data-stu-id="34b0a-111">Make sure that you don’t have any special characters, including the **@** character in the Automation credential asset name that you are using to connect to Azure.</span></span>  
2. <span data-ttu-id="34b0a-112">Vérifiez que vous pouvez utiliser le nom d’utilisateur et le mot de passe stockés dans les informations d’identification Azure Automation dans votre éditeur PowerShell ISE local.</span><span class="sxs-lookup"><span data-stu-id="34b0a-112">Check that you can use the username and password that are stored in the Azure Automation credential in your local PowerShell ISE editor.</span></span> <span data-ttu-id="34b0a-113">Vous pouvez le faire en exécutant les applets de commande suivantes dans PowerShell ISE :</span><span class="sxs-lookup"><span data-stu-id="34b0a-113">You can do this by running the following cmdlets in the PowerShell ISE:</span></span>  

        $Cred = Get-Credential  
        #Using Azure Service Management   
        Add-AzureAccount –Credential $Cred  
        #Using Azure Resource Manager  
        Login-AzureRmAccount –Credential $Cred
3. <span data-ttu-id="34b0a-114">Si l’authentification échoue localement, cela signifie que vous n’avez pas correctement configuré vos informations d’identification Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="34b0a-114">If your authentication fails locally, this means that you haven’t set up your Azure Active Directory credentials properly.</span></span> <span data-ttu-id="34b0a-115">Reportez-vous au billet de blog [Authenticating to Azure using Azure Active Directory (Authentification auprès d’Azure à l’aide d’Azure Active Directory)](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) pour configurer correctement le compte Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="34b0a-115">Refer to [Authenticating to Azure using Azure Active Directory](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) blog post to get the Azure Active Directory account set up correctly.</span></span>  

### <a name="scenario-unable-to-find-the-azure-subscription"></a><span data-ttu-id="34b0a-116">Scénario : Impossible de trouver l’abonnement Azure</span><span class="sxs-lookup"><span data-stu-id="34b0a-116">Scenario: Unable to find the Azure subscription</span></span>
<span data-ttu-id="34b0a-117">**Erreur :** vous recevez l’erreur « l’abonnement nommé ``<subscription name>`` est introuvable » lorsque vous travaillez avec les applets de commande Select-AzureSubscription ou Select-AzureRmSubscription.</span><span class="sxs-lookup"><span data-stu-id="34b0a-117">**Error:** You receive the error "The subscription named ``<subscription name>`` cannot be found" when working with the Select-AzureSubscription or Select-AzureRmSubscription cmdlets.</span></span>

<span data-ttu-id="34b0a-118">**Raison de l’erreur :** cette erreur se produit si le nom de l’abonnement n’est pas valide ou si l’utilisateur Azure Active Directory qui essaie d’obtenir les détails de l’abonnement n’est pas configuré en tant qu’administrateur de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="34b0a-118">**Reason for the error:** This error occurs if the subscription name is not valid or if the Azure Active Directory user who is trying to get the subscription details is not configured as an admin of the subscription.</span></span>

<span data-ttu-id="34b0a-119">**Conseils de dépannage :** pour déterminer si vous vous êtes correctement authentifié dans Azure et avez accès à l’abonnement que vous tentez de sélectionner, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="34b0a-119">**Troubleshooting tips:** In order to determine if you have properly authenticated to Azure and have access to the subscription you are trying to select, take the following steps:</span></span>  

1. <span data-ttu-id="34b0a-120">Assurez-vous d’exécuter l’applet de commande **Add-AzureAccount** avant d’exécuter l’applet de commande **Select-AzureSubscription**.</span><span class="sxs-lookup"><span data-stu-id="34b0a-120">Make sure that you run the **Add-AzureAccount** before running the **Select-AzureSubscription** cmdlet.</span></span>  
2. <span data-ttu-id="34b0a-121">Si le message d’erreur persiste, modifiez votre code en ajoutant l’applet de commande **Get-AzureSubscription** à la suite de l’applet de commande **Add-AzureAccount**, puis exécutez le code.</span><span class="sxs-lookup"><span data-stu-id="34b0a-121">If you still see this error message, modify your code by adding the **Get-AzureSubscription** cmdlet following the **Add-AzureAccount** cmdlet and then execute the code.</span></span>  <span data-ttu-id="34b0a-122">Maintenant, vérifiez si la sortie de Get-AzureSubscription contient les détails de votre abonnement.</span><span class="sxs-lookup"><span data-stu-id="34b0a-122">Now verify if the output of Get-AzureSubscription contains your subscription details.</span></span>  

   * <span data-ttu-id="34b0a-123">Si la sortie ne contient aucun des détails de l’abonnement, vous pouvez en conclure que l’abonnement n’est pas encore initialisé.</span><span class="sxs-lookup"><span data-stu-id="34b0a-123">If you don't see any subscription details in the output, this means that the subscription isn’t initialized yet.</span></span>  
   * <span data-ttu-id="34b0a-124">Si vous ne voyez pas les détails de l’abonnement dans la sortie, vérifiez que vous utilisez le bon nom d’abonnement ou le bon identificateur avec l’applet de commande **Select-AzureSubscription** .</span><span class="sxs-lookup"><span data-stu-id="34b0a-124">If you do see the subscription details in the output, confirm that you are using the correct subscription name or ID with the **Select-AzureSubscription** cmdlet.</span></span>   

### <a name="scenario-authentication-to-azure-failed-because-multi-factor-authentication-is-enabled"></a><span data-ttu-id="34b0a-125">Scénario : L’authentification auprès d’Azure a échoué car l’authentification multifacteur est activée.</span><span class="sxs-lookup"><span data-stu-id="34b0a-125">Scenario: Authentication to Azure failed because multi-factor authentication is enabled</span></span>
<span data-ttu-id="34b0a-126">**Erreur :** vous recevez l’erreur « Add-AzureAccount: AADSTS50079: Strong authentication enrollment (proof-up) is required » (« Add-AzureAccount : AADSTS50079 : une inscription de l’authentification forte (résistante) est requise ») pendant une authentification dans Azure avec votre nom d’utilisateur et votre mot de passe Azure.</span><span class="sxs-lookup"><span data-stu-id="34b0a-126">**Error:** You receive the error “Add-AzureAccount: AADSTS50079: Strong authentication enrollment (proof-up) is required” when authenticating to Azure with your Azure username and password.</span></span>

<span data-ttu-id="34b0a-127">**Raison de l’erreur :** si votre compte Azure est doté de l’authentification multifacteur, vous ne pouvez pas vous authentifier dans Azure avec un utilisateur Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="34b0a-127">**Reason for the error:** If you have multi-factor authentication on your Azure account, you can't use an Azure Active Directory user to authenticate to Azure.</span></span>  <span data-ttu-id="34b0a-128">Au lieu de cela, vous devez utiliser un certificat ou un principal de service pour l’authentification dans Azure.</span><span class="sxs-lookup"><span data-stu-id="34b0a-128">Instead, you need to use a certificate or a service principal to authenticate to Azure.</span></span>

<span data-ttu-id="34b0a-129">**Conseils de dépannage :** pour utiliser un certificat avec les applets de commande de gestion des services Azure, reportez-vous à la rubrique sur la [création et l’ajout d’un certificat de gestion des services Azure](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx).</span><span class="sxs-lookup"><span data-stu-id="34b0a-129">**Troubleshooting tips:** To use a certificate with the Azure Service Management cmdlets, refer to [creating and adding a certificate to manage Azure services.](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx)</span></span> <span data-ttu-id="34b0a-130">Pour utiliser un principal du service avec des applets de commande Azure Resource Manager, voir la rubrique sur la [création du principal du service à l’aide du portail Azure](../azure-resource-manager/resource-group-create-service-principal-portal.md) et l’[authentification d’un principal du service à l’aide d’Azure Resource Manager](../azure-resource-manager/resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="34b0a-130">To use a service principal with Azure Resource Manager cmdlets, refer to [creating service principal using Azure portal](../azure-resource-manager/resource-group-create-service-principal-portal.md) and [authenticating a service principal with Azure Resource Manager.](../azure-resource-manager/resource-group-authenticate-service-principal.md)</span></span>

## <a name="common-errors-when-working-with-runbooks"></a><span data-ttu-id="34b0a-131">Erreurs courantes avec des runbooks</span><span class="sxs-lookup"><span data-stu-id="34b0a-131">Common errors when working with runbooks</span></span>
### <a name="scenario-the-runbook-job-start-was-attempted-three-times-but-it-failed-to-start-each-time"></a><span data-ttu-id="34b0a-132">Scénario : Le travail du runbook a tenté de démarrer à trois reprises, mais n’a pas pu démarrer</span><span class="sxs-lookup"><span data-stu-id="34b0a-132">Scenario: The runbook job start was attempted three times, but it failed to start each time</span></span>
<span data-ttu-id="34b0a-133">**Erreur :** votre runbook échoue et indique l’erreur « The job was tried three times but it failed. » (Le travail a effectué trois tentatives de démarrage mais a échoué.).</span><span class="sxs-lookup"><span data-stu-id="34b0a-133">**Error:** Your runbook fails with the error "“The job was tried three times but it failed."</span></span>

<span data-ttu-id="34b0a-134">**Raison de l’erreur :** les éléments suivants peuvent être à l’origine de cette erreur :</span><span class="sxs-lookup"><span data-stu-id="34b0a-134">**Reason for the error:** This error can be caused by the following reasons:</span></span>  

1. <span data-ttu-id="34b0a-135">Limite de mémoire.</span><span class="sxs-lookup"><span data-stu-id="34b0a-135">Memory Limit.</span></span>  <span data-ttu-id="34b0a-136">Nous avons des limites documentées sur la quantité de mémoire alloué à un bac à sable que le [service Automation limite](../azure-subscription-service-limits.md#automation-limits), de façon à ce qu’un travail puisse échouer s’il utilise plus de 400 Mo de mémoire.</span><span class="sxs-lookup"><span data-stu-id="34b0a-136">We have documented limits on how much memory allocated to a Sandbox  [Automation service limits](../azure-subscription-service-limits.md#automation-limits) so a job may fail it if is using more than 400 MB of memory.</span></span> 

2. <span data-ttu-id="34b0a-137">Module incompatible.</span><span class="sxs-lookup"><span data-stu-id="34b0a-137">Module Incompatible.</span></span>  <span data-ttu-id="34b0a-138">Cela peut se produire si les dépendances de module ne sont pas correctes. Dans ce cas, votre runbook renverra généralement un message « Commande introuvable » ou « Impossible de lier le paramètre ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-138">This can occur if module dependencies are not correct and if they are not, your runbook will typically return a “Command not found” or "Cannot bind parameter" message.</span></span> 

<span data-ttu-id="34b0a-139">**Conseils de dépannage :** l’une des solutions suivantes peut corriger ce problème :</span><span class="sxs-lookup"><span data-stu-id="34b0a-139">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="34b0a-140">Les méthodes recommandées pour travailler dans la limite de mémoire consistent à diviser la charge de travail en plusieurs runbooks, à ne pas traiter trop de données en mémoire, à ne pas écrire de sortie inutile depuis vos runbooks ou à prendre en compte le nombre de points de contrôle que vous écrivez dans vos runbooks de flux de travail PowerShell.</span><span class="sxs-lookup"><span data-stu-id="34b0a-140">Suggested methods to work within the memory limit are to split the workload between multiple runbooks, not process as much data in memory, not to write unnecessary output from your runbooks, or consider how many checkpoints you write into your PowerShell workflow runbooks.</span></span>  

* <span data-ttu-id="34b0a-141">Vous devez mettre à jour de vos modules Azure en suivant les étapes de l’article [Guide de mise à jour des modules Azure PowerShell dans Azure Automation](automation-update-azure-modules.md).</span><span class="sxs-lookup"><span data-stu-id="34b0a-141">You need to update your Azure modules by following the steps [How to update Azure PowerShell modules in Azure Automation](automation-update-azure-modules.md).</span></span>  


### <a name="scenario-runbook-fails-because-of-deserialized-object"></a><span data-ttu-id="34b0a-142">Scénario : échec du runbook en raison d’un objet désérialisé</span><span class="sxs-lookup"><span data-stu-id="34b0a-142">Scenario: Runbook fails because of deserialized object</span></span>
<span data-ttu-id="34b0a-143">**Erreur :** votre runbook a échoué en émettant l’erreur « Impossible de lier le paramètre ``<ParameterName>``.</span><span class="sxs-lookup"><span data-stu-id="34b0a-143">**Error:** Your runbook fails with the error "Cannot bind parameter ``<ParameterName>``.</span></span> <span data-ttu-id="34b0a-144">Impossible de convertir la valeur ``<ParameterType>`` du type désérialisé ``<ParameterType>`` en type ``<ParameterType>`` ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-144">Cannot convert the ``<ParameterType>`` value of type Deserialized ``<ParameterType>`` to type ``<ParameterType>``".</span></span>

<span data-ttu-id="34b0a-145">**Raison de l’erreur :** si votre runbook est un flux de travail PowerShell, il stocke des objets complexes au format désérialisé afin de conserver l’état du runbook si le flux de travail est suspendu.</span><span class="sxs-lookup"><span data-stu-id="34b0a-145">**Reason for the error:** If your runbook is a PowerShell Workflow, it stores complex objects in a deserialized format in order to persist your runbook state if the workflow is suspended.</span></span>  

<span data-ttu-id="34b0a-146">**Conseils de dépannage :**</span><span class="sxs-lookup"><span data-stu-id="34b0a-146">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="34b0a-147">l’une des trois solutions suivante peut vous aider à corriger ce problème :</span><span class="sxs-lookup"><span data-stu-id="34b0a-147">Any of the following three solutions will fix this problem:</span></span>

1. <span data-ttu-id="34b0a-148">Si vous transférez des objets complexes d’une applet de commande vers une autre, encapsulez ces applets de commande dans un bloc InlineScript.</span><span class="sxs-lookup"><span data-stu-id="34b0a-148">If you are piping complex objects from one cmdlet to another, wrap these cmdlets in an InlineScript.</span></span>  
2. <span data-ttu-id="34b0a-149">Transmettez le nom ou la valeur dont vous avez besoin depuis l’objet complexe au lieu de transmettre la totalité de l’objet.</span><span class="sxs-lookup"><span data-stu-id="34b0a-149">Pass the name or value that you need from the complex object instead of passing the entire object.</span></span>  
3. <span data-ttu-id="34b0a-150">Utilisez un runbook PowerShell au lieu d’un runbook Workflow PowerShell.</span><span class="sxs-lookup"><span data-stu-id="34b0a-150">Use a PowerShell runbook instead of a PowerShell Workflow runbook.</span></span>  

### <a name="scenario-runbook-job-failed-because-the-allocated-quota-exceeded"></a><span data-ttu-id="34b0a-151">Scénario : le travail de Runbook a échoué car le quota alloué dépassé</span><span class="sxs-lookup"><span data-stu-id="34b0a-151">Scenario: Runbook job failed because the allocated quota exceeded</span></span>
<span data-ttu-id="34b0a-152">**Erreur :** votre travail de runbook a échoué en émettant l’erreur « Le quota mensuel de durée d’exécution totale pour cet abonnement a été atteint ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-152">**Error:** Your runbook job fails with the error "The quota for the monthly total job run time has been reached for this subscription".</span></span>

<span data-ttu-id="34b0a-153">**Motif de l’erreur :** cette erreur se produit lorsque l’exécution du travail dépasse le quota disponible de 500 minutes gratuit pour votre compte.</span><span class="sxs-lookup"><span data-stu-id="34b0a-153">**Reason for the error:** This error occurs when the job execution exceeds the 500-minute free quota for your account.</span></span> <span data-ttu-id="34b0a-154">Ce quota s’applique à tous les types de tâches d’exécution de travail, notamment un le test d’un travail, le démarrage d’un travail à partir du portail, l’exécution d’un travail à l’aide de webhooks et la planification d’un travail à exécuter en utilisant le portail Azure ou dans votre centre de données.</span><span class="sxs-lookup"><span data-stu-id="34b0a-154">This quota applies to all types of job execution tasks such as testing a job, starting a job from the portal, executing a job by using webhooks and scheduling a job to execute by using either the Azure portal or in your datacenter.</span></span> <span data-ttu-id="34b0a-155">Pour en savoir plus sur la tarification d’Automation, consultez [Tarification d’Automation](https://azure.microsoft.com/pricing/details/automation/).</span><span class="sxs-lookup"><span data-stu-id="34b0a-155">To learn more about pricing for Automation see [Automation pricing](https://azure.microsoft.com/pricing/details/automation/).</span></span>

<span data-ttu-id="34b0a-156">**Conseils de dépannage :** si vous souhaitez utiliser plus de 500 minutes de traitement par mois, vous devrez modifier votre abonnement à partir du niveau Gratuit au niveau de base.</span><span class="sxs-lookup"><span data-stu-id="34b0a-156">**Troubleshooting tips:** If you want to use more than 500 minutes of processing per month you will need to change your subscription from the Free tier to the Basic tier.</span></span> <span data-ttu-id="34b0a-157">Une mise à niveau vers le niveau de base s’effectue de la façon suivante :</span><span class="sxs-lookup"><span data-stu-id="34b0a-157">You can upgrade to the Basic tier by taking the following steps:</span></span>  

1. <span data-ttu-id="34b0a-158">Connectez-vous à votre abonnement Azure :</span><span class="sxs-lookup"><span data-stu-id="34b0a-158">Sign in to your Azure subscription</span></span>  
2. <span data-ttu-id="34b0a-159">Sélectionnez le compte Automation que vous souhaitez mettre à niveau</span><span class="sxs-lookup"><span data-stu-id="34b0a-159">Select the Automation account you wish to upgrade</span></span>  
3. <span data-ttu-id="34b0a-160">Cliquez sur **Paramètres** > **Niveau de tarification et utilisation** > **Niveau de tarification**</span><span class="sxs-lookup"><span data-stu-id="34b0a-160">Click on **Settings** > **Pricing tier and Usage** > **Pricing tier**</span></span>  
4. <span data-ttu-id="34b0a-161">Dans le panneau **Choisir votre niveau tarifaire**, sélectionnez **De base**</span><span class="sxs-lookup"><span data-stu-id="34b0a-161">On the **Choose your pricing tier** blade, select **Basic**</span></span>    

### <a name="scenario-cmdlet-not-recognized-when-executing-a-runbook"></a><span data-ttu-id="34b0a-162">Scénario : l’applet de commande n’est pas reconnue lors de l’exécution d’un runbook</span><span class="sxs-lookup"><span data-stu-id="34b0a-162">Scenario: Cmdlet not recognized when executing a runbook</span></span>
<span data-ttu-id="34b0a-163">**Erreur :** la tâche de runbook échoue en renvoyant l’erreur « ``<cmdlet name>`` : Le terme ``<cmdlet name>`` n’est pas reconnu comme nom d’applet de commande, fonction, fichier de script ou programme exécutable. »</span><span class="sxs-lookup"><span data-stu-id="34b0a-163">**Error:** Your runbook job fails with the error "``<cmdlet name>``: The term ``<cmdlet name>`` is not recognized as the name of a cmdlet, function, script file, or operable program."</span></span>

<span data-ttu-id="34b0a-164">**Motif de l’erreur :** cette erreur survient quand le moteur PowerShell ne trouve pas l’applet de commande que vous utilisez dans votre runbook.</span><span class="sxs-lookup"><span data-stu-id="34b0a-164">**Reason for the error:** This error is caused when the PowerShell engine cannot find the cmdlet you are using in your runbook.</span></span>  <span data-ttu-id="34b0a-165">Cela peut être dû au fait que le module contenant l’applet de commande n’est pas présent dans le compte, qu’il existe un conflit de nom avec un nom de runbook ou que l’applet de commande existe dans un autre module et Automation ne peut pas résoudre le nom.</span><span class="sxs-lookup"><span data-stu-id="34b0a-165">This could be because the module containing the cmdlet is missing from the account, there is a name conflict with a runbook name, or the cmdlet also exists in another module and Automation cannot resolve the name.</span></span>

<span data-ttu-id="34b0a-166">**Conseils de dépannage :** l’une des solutions suivantes peut corriger ce problème :</span><span class="sxs-lookup"><span data-stu-id="34b0a-166">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="34b0a-167">Vérifiez que vous avez correctement saisi le nom de l’applet de commande.</span><span class="sxs-lookup"><span data-stu-id="34b0a-167">Check that you have entered the cmdlet name correctly.</span></span>  
* <span data-ttu-id="34b0a-168">Assurez-vous que l’applet de commande existe dans votre compte Automation et qu’il n’y a aucun conflit.</span><span class="sxs-lookup"><span data-stu-id="34b0a-168">Make sure the cmdlet exists in your Automation account and that there are no conflicts.</span></span> <span data-ttu-id="34b0a-169">Pour vérifier si l’applet de commande est présente, ouvrez un runbook en mode édition et recherchez l’applet de commande que vous souhaitez trouver dans la bibliothèque ou exécutez **Get-Command ``<CommandName>``**.</span><span class="sxs-lookup"><span data-stu-id="34b0a-169">To verify if the cmdlet is present, open a runbook in edit mode and search for the cmdlet you want to find in the library or run **Get-Command ``<CommandName>``**.</span></span>  <span data-ttu-id="34b0a-170">Une fois que vous avez vérifié que l’applet de commande est disponible pour le compte, et qu’il n’existe aucun conflit de nom avec d’autres applets de commande ou runbooks, ajoutez-la à la zone de dessin et assurez-vous que vous utilisez un paramètre valide défini dans votre runbook.</span><span class="sxs-lookup"><span data-stu-id="34b0a-170">Once you have validated that the cmdlet is available to the account, and that there are no name conflicts with other cmdlets or runbooks, add it to the canvas and ensure that you are using a valid parameter set in your runbook.</span></span>  
* <span data-ttu-id="34b0a-171">Si vous rencontrez un conflit de noms et si l’applet de commande est disponible dans deux modules différents, vous pouvez résoudre ce problème en utilisant le nom qualifié complet de l’applet de commande.</span><span class="sxs-lookup"><span data-stu-id="34b0a-171">If you do have a name conflict and the cmdlet is available in two different modules, you can resolve this by using the fully qualified name for the cmdlet.</span></span> <span data-ttu-id="34b0a-172">Vous pouvez par exemple utiliser **Nom_module\Nom_applet_de_commande**.</span><span class="sxs-lookup"><span data-stu-id="34b0a-172">For example, you can use **ModuleName\CmdletName**.</span></span>  
* <span data-ttu-id="34b0a-173">Si vous exécutez le runbook localement dans un groupe de Workers hybride, assurez-vous que le module/applet de commande est installé sur l'ordinateur qui héberge le Worker hybride.</span><span class="sxs-lookup"><span data-stu-id="34b0a-173">If you are executing the runbook on-premises in a hybrid worker group, then make sure that the module/cmdlet is installed on the machine that hosts the hybrid worker.</span></span>

### <a name="scenario-a-long-running-runbook-consistently-fails-with-the-exception-the-job-cannot-continue-running-because-it-was-repeatedly-evicted-from-the-same-checkpoint"></a><span data-ttu-id="34b0a-174">Scénario : Un runbook de longue durée échoue systématiquement avec l’exception : « La tâche ne peut pas continuer, car elle a été exclue à plusieurs reprises du même point de contrôle ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-174">Scenario: A long running runbook consistently fails with the exception: "The job cannot continue running because it was repeatedly evicted from the same checkpoint".</span></span>
<span data-ttu-id="34b0a-175">**Raison de l’erreur :** il s’agit du comportement par défaut lié à la surveillance de la répartition de charge équilibrée des processus au sein d’Azure Automation, qui suspend automatiquement un runbook s’il s’exécute pendant plus de 3 heures.</span><span class="sxs-lookup"><span data-stu-id="34b0a-175">**Reason for the error:** This is by design behavior due to the "Fair Share" monitoring of processes within Azure Automation, which automatically suspends a runbook if it executes longer than 3 hours.</span></span> <span data-ttu-id="34b0a-176">Toutefois, le message d’erreur ne fournit pas d’options pour la suite des événements.</span><span class="sxs-lookup"><span data-stu-id="34b0a-176">However, the error message returned does not provide "what next" options.</span></span> <span data-ttu-id="34b0a-177">Un runbook peut être interrompu pour plusieurs raisons.</span><span class="sxs-lookup"><span data-stu-id="34b0a-177">A runbook can be suspended for a number of reasons.</span></span> <span data-ttu-id="34b0a-178">Les suspensions sont généralement dues à des erreurs.</span><span class="sxs-lookup"><span data-stu-id="34b0a-178">Suspends happen mostly due to errors.</span></span> <span data-ttu-id="34b0a-179">Par exemple, une exception non interceptée dans un runbook, une panne réseau ou une panne sur le Runbook Worker qui exécute le runbook entraîne la suspension de ce dernier et son démarrage à partir de son dernier point de contrôle au moment de la reprise.</span><span class="sxs-lookup"><span data-stu-id="34b0a-179">For example, an uncaught exception in a runbook, a network failure, or a crash on the Runbook Worker running the runbook, will all cause the runbook to be suspended and start from its last checkpoint when resumed.</span></span>

<span data-ttu-id="34b0a-180">**Conseils de dépannage :** la solution documentée pour éviter ce problème consiste à utiliser des points de contrôle dans un flux de travail.</span><span class="sxs-lookup"><span data-stu-id="34b0a-180">**Troubleshooting tips:** The documented solution to avoid this issue is to use Checkpoints in a workflow.</span></span>  <span data-ttu-id="34b0a-181">Pour en savoir plus, voir la rubrique [Découverte des flux de travail PowerShell](automation-powershell-workflow.md#checkpoints).</span><span class="sxs-lookup"><span data-stu-id="34b0a-181">To learn more refer to [Learning PowerShell Workflows](automation-powershell-workflow.md#checkpoints).</span></span>  <span data-ttu-id="34b0a-182">Vous trouverez une explication plus détaillée de la distribution de charge équilibrée dans le billet de blog [Using Checkpoints in Runbooks](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/) (Utilisation de points de contrôle dans des runbooks).</span><span class="sxs-lookup"><span data-stu-id="34b0a-182">A more thorough explanation of "Fair Share" and Checkpoint can be found in this blog article [Using Checkpoints in Runbooks](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/).</span></span>

## <a name="common-errors-when-importing-modules"></a><span data-ttu-id="34b0a-183">Erreurs courantes survenant lors de l’importation de modules</span><span class="sxs-lookup"><span data-stu-id="34b0a-183">Common errors when importing modules</span></span>
### <a name="scenario-module-fails-to-import-or-cmdlets-cant-be-executed-after-importing"></a><span data-ttu-id="34b0a-184">Scénario : le module ne parvient pas à terminer l’importation ou il est impossible d’exécuter des applets de commande après l’importation</span><span class="sxs-lookup"><span data-stu-id="34b0a-184">Scenario: Module fails to import or cmdlets can't be executed after importing</span></span>
<span data-ttu-id="34b0a-185">**Erreur :** un module ne parvient pas à importer ou réussit l’importation, mais aucune applet de commande n’est extraite.</span><span class="sxs-lookup"><span data-stu-id="34b0a-185">**Error:** A module fails to import or imports successfully, but no cmdlets are extracted.</span></span>

<span data-ttu-id="34b0a-186">**Raison de l’erreur :** voici quelques raisons courantes pour lesquelles un module peut échouer dans l’importation vers Azure Automation :</span><span class="sxs-lookup"><span data-stu-id="34b0a-186">**Reason for the error:** Some common reasons that a module might not successfully import to Azure Automation are:</span></span>  

* <span data-ttu-id="34b0a-187">La structure ne correspond pas à la structure dont Automation a besoin.</span><span class="sxs-lookup"><span data-stu-id="34b0a-187">The structure does not match the structure that Automation needs it to be in.</span></span>  
* <span data-ttu-id="34b0a-188">Le module dépend d’un autre module qui n’a pas été déployé sur votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="34b0a-188">The module is dependent on another module that has not been deployed to your Automation account.</span></span>  
* <span data-ttu-id="34b0a-189">Le module n’a pas de dépendances dans le dossier.</span><span class="sxs-lookup"><span data-stu-id="34b0a-189">The module is missing its dependencies in the folder.</span></span>  
* <span data-ttu-id="34b0a-190">L’applet de commande **New-AzureRmAutomationModule** est utilisée pour charger le module, et vous ne disposez pas du chemin d’accès de stockage complet ou n’avez pas chargé le module en utilisant une URL accessible publiquement.</span><span class="sxs-lookup"><span data-stu-id="34b0a-190">The **New-AzureRmAutomationModule** cmdlet is being used to upload the module, and you have not given the full storage path or have not loaded the module by using a publicly accessible URL.</span></span>  

<span data-ttu-id="34b0a-191">**Conseils de dépannage :**</span><span class="sxs-lookup"><span data-stu-id="34b0a-191">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="34b0a-192">l’une des solutions suivantes peut corriger ce problème :</span><span class="sxs-lookup"><span data-stu-id="34b0a-192">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="34b0a-193">Assurez-vous que le module suit le format suivant :</span><span class="sxs-lookup"><span data-stu-id="34b0a-193">Make sure that the module follows the following format:</span></span>  
  <span data-ttu-id="34b0a-194">NomModule.zip **->** NomModule ou Numéro de version **->** (ModuleName.psm1, ModuleName.psd1)</span><span class="sxs-lookup"><span data-stu-id="34b0a-194">ModuleName.Zip **->** ModuleName or Version Number **->** (ModuleName.psm1, ModuleName.psd1)</span></span>
* <span data-ttu-id="34b0a-195">Ouvrez le fichier .psd1 et regardez si le module possède des dépendances.</span><span class="sxs-lookup"><span data-stu-id="34b0a-195">Open the .psd1 file and see if the module has any dependencies.</span></span>  <span data-ttu-id="34b0a-196">Si c’est le cas, téléchargez ces modules dans le compte Automation.</span><span class="sxs-lookup"><span data-stu-id="34b0a-196">If it does, upload these modules to the Automation account.</span></span>  
* <span data-ttu-id="34b0a-197">Assurez-vous que les fichiers .dll référencés sont présents dans le dossier de module.</span><span class="sxs-lookup"><span data-stu-id="34b0a-197">Make sure that any referenced .dlls are present in the module folder.</span></span>  

## <a name="common-errors-when-working-with-desired-state-configuration-dsc"></a><span data-ttu-id="34b0a-198">Erreurs courantes avec la Configuration d’état souhaité (DSC)</span><span class="sxs-lookup"><span data-stu-id="34b0a-198">Common errors when working with Desired State Configuration (DSC)</span></span>
### <a name="scenario-node-is-in-failed-status-with-a-not-found-error"></a><span data-ttu-id="34b0a-199">Scénario : le nœud est en état d’échec avec une erreur « Introuvable »</span><span class="sxs-lookup"><span data-stu-id="34b0a-199">Scenario: Node is in failed status with a “Not found” error</span></span>
<span data-ttu-id="34b0a-200">**Erreur :** le nœud dispose d’un rapport d’état **Échec** contenant l’erreur suivante : « The attempt to get the action from server https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction failed because a valid configuration ``<guid>`` cannot be found » (« La tentative d’obtention de l’action depuis le serveur https:////accounts//Nodes(AgentId=)/GetDscAction a échoué, car aucune configuration valide n’a été trouvée »).</span><span class="sxs-lookup"><span data-stu-id="34b0a-200">**Error:** The node has a report with **Failed** status and containing the error "The attempt to get the action from server https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction failed because a valid configuration ``<guid>`` cannot be found.”</span></span>

<span data-ttu-id="34b0a-201">**Raison de l’erreur :** cette erreur se produit généralement quand le nœud est affecté à un nom de configuration (par exemple, ABC) et non à un nom de configuration de nœud (par exemple, ABC.WebServer).</span><span class="sxs-lookup"><span data-stu-id="34b0a-201">**Reason for the error:** This error typically occurs when the node is assigned to a configuration name (e.g. ABC) instead of a node configuration name (e.g. ABC.WebServer).</span></span>  

<span data-ttu-id="34b0a-202">**Conseils de dépannage :**</span><span class="sxs-lookup"><span data-stu-id="34b0a-202">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="34b0a-203">Assurez-vous d'affecter le nœud avec « nom de configuration de nœud » et non pas le « nom de configuration ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-203">Make sure that you are assigning the node with "node configuration name" and not the "configuration name".</span></span>  
* <span data-ttu-id="34b0a-204">Vous pouvez affecter une configuration de nœud à un nœud à l'aide du portail Azure ou d’une applet de commande PowerShell.</span><span class="sxs-lookup"><span data-stu-id="34b0a-204">You can assign a node configuration to a node using Azure portal or with a PowerShell cmdlet.</span></span>

  * <span data-ttu-id="34b0a-205">Pour affecter une configuration de nœud à un nœud à l’aide du portail Azure, ouvrez le panneau **Nœuds DSC**, sélectionnez un nœud, puis cliquez sur le bouton **Attribuer une configuration de nœud**.</span><span class="sxs-lookup"><span data-stu-id="34b0a-205">In order to assign a node configuration to a node using Azure portal, open the **DSC Nodes** blade, then select a node and click on **Assign node configuration** button.</span></span>  
  * <span data-ttu-id="34b0a-206">Pour affecter une configuration de nœud à un nœud à l’aide d’une applet de commande PowerShell, utilisez l’applet de commande **Set-AzureRmAutomationDscNode** .</span><span class="sxs-lookup"><span data-stu-id="34b0a-206">In order to assign a node configuration to a node using PowerShell cmdlet, use **Set-AzureRmAutomationDscNode** cmdlet</span></span>

### <a name="scenario--no-node-configurations-mof-files-were-produced-when-a-configuration-is-compiled"></a><span data-ttu-id="34b0a-207">Scénario : aucune configuration de nœud (fichiers MOF) ne s’est produite au cours d’une compilation de configuration</span><span class="sxs-lookup"><span data-stu-id="34b0a-207">Scenario:  No node configurations (MOF files) were produced when a configuration is compiled</span></span>
<span data-ttu-id="34b0a-208">**Erreur :** la tâche de compilation de votre DSC a été interrompue avec l’erreur : « Compilation completed successfully, but no node configuration .mofs were generated » (« La compilation s’est terminée correctement, mais aucune configuration de nœud .mofs n’a été générée »).</span><span class="sxs-lookup"><span data-stu-id="34b0a-208">**Error:** Your DSC compilation job suspends with the error: “Compilation completed successfully, but no node configuration .mofs were generated”.</span></span>

<span data-ttu-id="34b0a-209">**Raison de l’erreur :** quand l’expression qui suit le mot-clé **Node** dans la configuration DSC est $null, aucune configuration de nœud ne peut être générée.</span><span class="sxs-lookup"><span data-stu-id="34b0a-209">**Reason for the error:** When the expression following the **Node** keyword in the DSC configuration evaluates to $null then no node configurations will be produced.</span></span>    

<span data-ttu-id="34b0a-210">**Conseils de dépannage :**</span><span class="sxs-lookup"><span data-stu-id="34b0a-210">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="34b0a-211">l’une des solutions suivantes peut corriger ce problème :</span><span class="sxs-lookup"><span data-stu-id="34b0a-211">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="34b0a-212">Vérifiez que l’expression en regard du mot clé **Node** dans la définition de la configuration n’est pas $null.</span><span class="sxs-lookup"><span data-stu-id="34b0a-212">Make sure that the expression next to the **Node** keyword in the configuration definition is not evaluating to $null.</span></span>  
* <span data-ttu-id="34b0a-213">Si vous effectuez une transmission de ConfigurationData pendant la compilation de la configuration, vérifiez que vous transmettez les valeurs attendues nécessaires à la configuration depuis [ConfigurationData](automation-dsc-compile.md#configurationdata).</span><span class="sxs-lookup"><span data-stu-id="34b0a-213">If you are passing ConfigurationData when compiling the configuration, make sure that you are passing the expected values that the configuration requires from [ConfigurationData](automation-dsc-compile.md#configurationdata).</span></span>

### <a name="scenario--the-dsc-node-report-becomes-stuck-in-progress-state"></a><span data-ttu-id="34b0a-214">Scénario : le rapport du nœud DSC se bloque à l’état « en cours »</span><span class="sxs-lookup"><span data-stu-id="34b0a-214">Scenario:  The DSC node report becomes stuck “in progress” state</span></span>
<span data-ttu-id="34b0a-215">**Erreur :** l’agent DSC génère le message « Impossible de trouver une instance avec les valeurs de propriétés fournies ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-215">**Error:** DSC Agent outputs “No instance found with given property values.”</span></span>

<span data-ttu-id="34b0a-216">**Raison de l’erreur :** vous avez mis à niveau votre version WMF et endommagé WMI.</span><span class="sxs-lookup"><span data-stu-id="34b0a-216">**Reason for the error:** You have upgraded your WMF version and have corrupted WMI.</span></span>  

<span data-ttu-id="34b0a-217">**Conseils de dépannage :** pour résoudre ce problème, suivez les instructions fournies dans [DSC known issues and limitations](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) (Problèmes connus et limitations DSC).</span><span class="sxs-lookup"><span data-stu-id="34b0a-217">**Troubleshooting tips:** Follow the instructions in the [DSC known issues and limitations](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) to fix the issue.</span></span>

### <a name="scenario--unable-to-use-a-credential-in-a-dsc-configuration"></a><span data-ttu-id="34b0a-218">Scénario : il est impossible d’utiliser des informations d’identification dans une configuration DSC</span><span class="sxs-lookup"><span data-stu-id="34b0a-218">Scenario:  Unable to use a credential in a DSC configuration</span></span>
<span data-ttu-id="34b0a-219">**Erreur :** le travail de compilation de votre DSC a été interrompu avec l’erreur : « Erreur System.InvalidOperationException lors du traitement de la propriété ’Credential’ de type ``<some resource name>`` : La conversion et le stockage d’un mot de passe chiffré sous forme de texte en clair n’est autorisée que si PSDscAllowPlainTextPassword a la valeur true ».</span><span class="sxs-lookup"><span data-stu-id="34b0a-219">**Error:** Your DSC compilation job was suspended with the error: “System.InvalidOperationException error processing property 'Credential' of type ``<some resource name>``: Converting and storing an encrypted password as plaintext is allowed only if PSDscAllowPlainTextPassword is set to true”.</span></span>

<span data-ttu-id="34b0a-220">**Raison de l’erreur** : vous avez utilisé des informations d’identification dans une configuration, mais n’avez pas fourni la bonne valeur de **ConfigurationData** pour définir **PSDscAllowPlainTextPassword** sur true pour chaque configuration de nœud.</span><span class="sxs-lookup"><span data-stu-id="34b0a-220">**Reason for the error:** You have used a credential in a configuration but didn’t provide proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration.</span></span>  

<span data-ttu-id="34b0a-221">**Conseils de dépannage :**</span><span class="sxs-lookup"><span data-stu-id="34b0a-221">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="34b0a-222">Assurez-vous de transmettre la bonne valeur **ConfigurationData** pour définir **PSDscAllowPlainTextPassword** sur true pour chaque configuration de nœud mentionnée dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="34b0a-222">Make sure to pass in the proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration mentioned in the configuration.</span></span> <span data-ttu-id="34b0a-223">Pour plus d’informations, consultez les [ressources d’Azure Automation DSC](automation-dsc-compile.md#assets).</span><span class="sxs-lookup"><span data-stu-id="34b0a-223">For more information, refer to [assets in Azure Automation DSC](automation-dsc-compile.md#assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="34b0a-224">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="34b0a-224">Next steps</span></span>
<span data-ttu-id="34b0a-225">Si vous avez suivi les étapes de dépannage ci-dessus et que vous ne trouvez pas la réponse à votre problème, vous pouvez consulter les options de support supplémentaires ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="34b0a-225">If you have followed the troubleshooting steps above and can't find the answer, you can review the additional support options below.</span></span>

* <span data-ttu-id="34b0a-226">Obtenir l’aide des experts Azure.</span><span class="sxs-lookup"><span data-stu-id="34b0a-226">Get help from Azure experts.</span></span> <span data-ttu-id="34b0a-227">Soumettre votre problème sur les forums [MSDN Azure ou Stack Overflow](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="34b0a-227">Submit your issue to the [MSDN Azure or Stack Overflow forums.](https://azure.microsoft.com/support/forums/).</span></span>
* <span data-ttu-id="34b0a-228">Signaler un incident au support Azure</span><span class="sxs-lookup"><span data-stu-id="34b0a-228">File an Azure support incident.</span></span> <span data-ttu-id="34b0a-229">Accédez au [site de support Azure](https://azure.microsoft.com/support/options/) et cliquez sur **Obtenir un support** dans la section **Support technique et sur la facturation**.</span><span class="sxs-lookup"><span data-stu-id="34b0a-229">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click **Get support** under **Technical and billing support**.</span></span>
* <span data-ttu-id="34b0a-230">Publier une demande de script sur le [Centre de scripts](https://azure.microsoft.com/documentation/scripts/) si vous recherchez une solution de runbook Azure Automation ou un module d’intégration.</span><span class="sxs-lookup"><span data-stu-id="34b0a-230">Post a Script Request on [Script Center](https://azure.microsoft.com/documentation/scripts/) if you are looking for an Azure Automation runbook solution or an integration module.</span></span>
* <span data-ttu-id="34b0a-231">Publier vos commentaires ou vos demandes de fonctionnalités pour Azure Automation sur [User Voice](https://feedback.azure.com/forums/34192--general-feedback).</span><span class="sxs-lookup"><span data-stu-id="34b0a-231">Post feedback or feature requests for Azure Automation on [User Voice](https://feedback.azure.com/forums/34192--general-feedback).</span></span>
