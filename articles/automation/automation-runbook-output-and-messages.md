---
title: "Sortie et messages de Runbook dans Azure Automation | Microsoft Docs"
description: "Décrit comment créer et récupérer la sortie et les messages d’erreur à partir des Runbooks dans Azure Automation."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 13a414f5-0e2c-4be2-9558-a3e3ec84b6b2
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/11/2016
ms.author: magoedte;bwren
ms.openlocfilehash: 6f01f97e38aa271034741c8a5e2f8057ab61fcd7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="runbook-output-and-messages-in-azure-automation"></a><span data-ttu-id="8d1ec-103">Sortie et messages de Runbook dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="8d1ec-103">Runbook output and messages in Azure Automation</span></span>
<span data-ttu-id="8d1ec-104">La plupart des Runbooks Azure Automation présentent une certaine forme de sortie. Il peut s’agir, par exemple, d’un message d’erreur à l’attention de l’utilisateur, ou encore d’un objet complexe destiné à être consommé par un autre flux de travail.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-104">Most Azure Automation runbooks will have some form of output such as an error message to the user or a complex object intended to be consumed by another workflow.</span></span> <span data-ttu-id="8d1ec-105">Windows PowerShell fournit [plusieurs flux](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) pour l’envoi d’une sortie à partir d’un script ou d’un flux de travail.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-105">Windows PowerShell provides [multiple streams](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) to send output from a script or workflow.</span></span> <span data-ttu-id="8d1ec-106">Azure Automation fonctionne différemment avec chacun de ces flux. Lorsque vous créez un Runbook, vous devez suivre les meilleures pratiques relatives à l’utilisation de chaque flux.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-106">Azure Automation works with each of these streams differently, and you should follow best practices for how to use each when you are creating a runbook.</span></span>

<span data-ttu-id="8d1ec-107">Le tableau suivant fournit une brève description de chacun des flux et de leur comportement dans le Portail de gestion Azure lors de l’exécution d’un Runbook publié et lors du [test d’un Runbook](automation-testing-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-107">The following table provides a brief description of each of the streams and their behavior in the Azure Management Portal both when running a published runbook and when [testing a runbook](automation-testing-runbook.md).</span></span> <span data-ttu-id="8d1ec-108">Pour plus de détails sur chaque flux, reportez-vous aux sections suivantes.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-108">Further details on each stream are provided in subsequent sections.</span></span>

| <span data-ttu-id="8d1ec-109">Stream</span><span class="sxs-lookup"><span data-stu-id="8d1ec-109">Stream</span></span> | <span data-ttu-id="8d1ec-110">Description</span><span class="sxs-lookup"><span data-stu-id="8d1ec-110">Description</span></span> | <span data-ttu-id="8d1ec-111">Publié</span><span class="sxs-lookup"><span data-stu-id="8d1ec-111">Published</span></span> | <span data-ttu-id="8d1ec-112">Test</span><span class="sxs-lookup"><span data-stu-id="8d1ec-112">Test</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="8d1ec-113">Sortie</span><span class="sxs-lookup"><span data-stu-id="8d1ec-113">Output</span></span> |<span data-ttu-id="8d1ec-114">Objets destinés à être consommés par d’autres Runbooks.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-114">Objects intended to be consumed by other runbooks.</span></span> |<span data-ttu-id="8d1ec-115">Consignation dans l’historique des tâches.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-115">Written to the job history.</span></span> |<span data-ttu-id="8d1ec-116">Affichage dans le volet de sortie du test.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-116">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="8d1ec-117">Avertissement</span><span class="sxs-lookup"><span data-stu-id="8d1ec-117">Warning</span></span> |<span data-ttu-id="8d1ec-118">Message d’avertissement destiné à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-118">Warning message intended for the user.</span></span> |<span data-ttu-id="8d1ec-119">Consignation dans l’historique des tâches.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-119">Written to the job history.</span></span> |<span data-ttu-id="8d1ec-120">Affichage dans le volet de sortie du test.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-120">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="8d1ec-121">Error</span><span class="sxs-lookup"><span data-stu-id="8d1ec-121">Error</span></span> |<span data-ttu-id="8d1ec-122">Message d’erreur destiné à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-122">Error message intended for the user.</span></span> <span data-ttu-id="8d1ec-123">Contrairement à une exception, le Runbook se poursuit après un message d’erreur par défaut.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-123">Unlike an exception, the runbook continues after an error message by default.</span></span> |<span data-ttu-id="8d1ec-124">Consignation dans l’historique des tâches.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-124">Written to the job history.</span></span> |<span data-ttu-id="8d1ec-125">Affichage dans le volet de sortie du test.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-125">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="8d1ec-126">Détaillé</span><span class="sxs-lookup"><span data-stu-id="8d1ec-126">Verbose</span></span> |<span data-ttu-id="8d1ec-127">Messages fournissant des informations générales ou de débogage.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-127">Messages providing general or debugging information.</span></span> |<span data-ttu-id="8d1ec-128">Consignation dans l’historique des tâches uniquement si la journalisation documentée est activée pour le Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-128">Written to job history only if verbose logging is turned on for the runbook.</span></span> |<span data-ttu-id="8d1ec-129">Affichage dans le volet de sortie du test uniquement si la préférence $VerbosePreference a la valeur Continue dans le Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-129">Displayed in the Test Output pane only if $VerbosePreference is set to Continue in the runbook.</span></span> |
| <span data-ttu-id="8d1ec-130">Progression</span><span class="sxs-lookup"><span data-stu-id="8d1ec-130">Progress</span></span> |<span data-ttu-id="8d1ec-131">Informations générées automatiquement avant et après chaque activité dans le Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-131">Records automatically generated before and after each activity in the runbook.</span></span> <span data-ttu-id="8d1ec-132">Le Runbook ne doit pas tenter de créer ses propres informations de progression dans la mesure où elles sont destinées à un utilisateur interactif.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-132">The runbook should not attempt to create its own progress records since they are intended for an interactive user.</span></span> |<span data-ttu-id="8d1ec-133">Consignation dans l’historique des tâches uniquement si l’enregistrement de la progression est activé pour le Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-133">Written to job history only if progress logging is turned on for the runbook.</span></span> |<span data-ttu-id="8d1ec-134">Pas d’affichage dans le volet de sortie du test.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-134">Not displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="8d1ec-135">Déboguer</span><span class="sxs-lookup"><span data-stu-id="8d1ec-135">Debug</span></span> |<span data-ttu-id="8d1ec-136">Messages destinés à un utilisateur interactif.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-136">Messages intended for an interactive user.</span></span> <span data-ttu-id="8d1ec-137">Utilisation proscrite dans les Runbooks.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-137">Should not be used in runbooks.</span></span> |<span data-ttu-id="8d1ec-138">Pas de consignation dans l’historique des tâches.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-138">Not written to job history.</span></span> |<span data-ttu-id="8d1ec-139">Pas d’affichage dans le volet de sortie du test.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-139">Not written to Test Output Pane.</span></span> |

## <a name="output-stream"></a><span data-ttu-id="8d1ec-140">Flux de sortie</span><span class="sxs-lookup"><span data-stu-id="8d1ec-140">Output stream</span></span>
<span data-ttu-id="8d1ec-141">Le flux de sortie est destiné à la sortie des objets créés par un script ou un flux de travail lorsqu’il s’exécute correctement.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-141">The Output stream is intended for output of objects created by a script or workflow when it runs correctly.</span></span> <span data-ttu-id="8d1ec-142">Dans Azure Automation, ce flux est principalement utilisé pour les objets destinés à être consommés par les [Runbooks parents qui appellent le Runbook actuel](automation-child-runbooks.md).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-142">In Azure Automation, this stream is primarily used for objects intended to be consumed by [parent runbooks that call the current runbook](automation-child-runbooks.md).</span></span> <span data-ttu-id="8d1ec-143">Lorsque vous [appelez un Runbook en ligne](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) à partir d’un Runbook parent, il retourne les données au parent à partir du flux de sortie.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-143">When you [call a runbook inline](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) from a parent runbook, it returns data from the output stream to the parent.</span></span> <span data-ttu-id="8d1ec-144">Vous devez utiliser le flux de sortie uniquement pour retourner des informations générales à l’utilisateur si vous savez que le Runbook ne sera jamais appelé par un autre Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-144">You should only use the output stream to communicate general information back to the user if you know the runbook will never be called by another runbook.</span></span> <span data-ttu-id="8d1ec-145">Cependant, nous vous recommandons d’utiliser le [flux des commentaires](#Verbose) pour communiquer des informations générales à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-145">As a best practice, however, you should typically use the [Verbose Stream](#Verbose) to communicate general information to the user.</span></span>

<span data-ttu-id="8d1ec-146">Vous pouvez écrire des données dans le flux de sortie à l’aide de [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) ou en plaçant l’objet sur sa propre ligne dans le Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-146">You can write data to the output stream using [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) or by putting the object on its own line in the runbook.</span></span>

    #The following lines both write an object to the output stream.
    Write-Output –InputObject $object
    $object

### <a name="output-from-a-function"></a><span data-ttu-id="8d1ec-147">Sortie à partir d’une fonction</span><span class="sxs-lookup"><span data-stu-id="8d1ec-147">Output from a function</span></span>
<span data-ttu-id="8d1ec-148">Lorsque vous écrivez dans le flux de sortie, dans une fonction qui est incluse dans votre Runbook, la sortie est renvoyée au Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-148">When you write to the output stream in a function that is included in your runbook, the output is passed back to the runbook.</span></span> <span data-ttu-id="8d1ec-149">Si le Runbook affecte cette sortie à une variable, elle n’est pas écrite dans le flux de sortie.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-149">If the runbook assigns that output to a variable, then it is not written to the output stream.</span></span> <span data-ttu-id="8d1ec-150">Toute écriture dans d’autres flux à partir de la fonction se fait dans le flux correspondant du Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-150">Writing to any other streams from within the function will write to the corresponding stream for the runbook.</span></span>

<span data-ttu-id="8d1ec-151">Examinez l’exemple de Runbook suivant.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-151">Consider the following sample runbook.</span></span>

    Workflow Test-Runbook
    {
        Write-Verbose "Verbose outside of function" -Verbose
        Write-Output "Output outside of function"
        $functionOutput = Test-Function
        $functionOutput

    Function Test-Function
     {
        Write-Verbose "Verbose inside of function" -Verbose
        Write-Output "Output inside of function"
      }
    }


<span data-ttu-id="8d1ec-152">Le flux de sortie pour la tâche du Runbook serait :</span><span class="sxs-lookup"><span data-stu-id="8d1ec-152">The output stream for the runbook job would be:</span></span>

    Output inside of function
    Output outside of function

<span data-ttu-id="8d1ec-153">Le flux des commentaires pour la tâche du Runbook serait :</span><span class="sxs-lookup"><span data-stu-id="8d1ec-153">The verbose stream for the runbook job would be:</span></span>

    Verbose outside of function
    Verbose inside of function

<span data-ttu-id="8d1ec-154">Une fois que vous avez publié le Runbook et avant de démarrer, vous devez activer la journalisation détaillée dans les paramètres du Runbook, afin d’obtenir la sortie de flux détaillé.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-154">Once you have published the runbook and before you start it, you must also turn on Verbose logging in the runbook settings in order to get the Verbose stream output.</span></span>

### <a name="declaring-output-data-type"></a><span data-ttu-id="8d1ec-155">Déclaration du type de données de sortie</span><span class="sxs-lookup"><span data-stu-id="8d1ec-155">Declaring output data type</span></span>
<span data-ttu-id="8d1ec-156">Un flux de travail peut spécifier le type de données de sa sortie à l’aide de l’ [attribut OutputType](http://technet.microsoft.com/library/hh847785.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-156">A workflow can specify the data type of its output using the [OutputType attribute](http://technet.microsoft.com/library/hh847785.aspx).</span></span> <span data-ttu-id="8d1ec-157">Cet attribut n’a aucun effet lors de l’exécution, mais il fournit une indication à l’auteur du Runbook sur la sortie attendue du Runbook au moment de la conception.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-157">This attribute has no effect during runtime, but it provides an indication to the runbook author at design time of the expected output of the runbook.</span></span> <span data-ttu-id="8d1ec-158">Alors que l’ensemble d’outils dédiés aux Runbooks continue d’évoluer, la déclaration des types de données de sortie au moment de la conception gagne en importance.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-158">As the toolset for runbooks continues to evolve, the importance of declaring output data types at design time will increase in importance.</span></span> <span data-ttu-id="8d1ec-159">Par conséquent, il est recommandé d’inclure cette déclaration dans tous les Runbooks que vous créez.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-159">As a result, it is a best practice to include this declaration in any runbooks that you create.</span></span>

<span data-ttu-id="8d1ec-160">Voici une liste d’exemples de types de sortie :</span><span class="sxs-lookup"><span data-stu-id="8d1ec-160">Here is a list of example output types:</span></span>

* <span data-ttu-id="8d1ec-161">System.String</span><span class="sxs-lookup"><span data-stu-id="8d1ec-161">System.String</span></span>
* <span data-ttu-id="8d1ec-162">System.Int32</span><span class="sxs-lookup"><span data-stu-id="8d1ec-162">System.Int32</span></span>
* <span data-ttu-id="8d1ec-163">System.Collections.Hashtable</span><span class="sxs-lookup"><span data-stu-id="8d1ec-163">System.Collections.Hashtable</span></span>
* <span data-ttu-id="8d1ec-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span><span class="sxs-lookup"><span data-stu-id="8d1ec-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span></span>

<span data-ttu-id="8d1ec-165">L’exemple de Runbook suivant génère un objet String et inclut une déclaration de son type de sortie.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-165">The following sample runbook outputs a string object and includes a declaration of its output type.</span></span> <span data-ttu-id="8d1ec-166">Si votre Runbook génère un tableau d’un certain type, vous devez toujours spécifier le type, par opposition à un tableau du type.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-166">If your runbook outputs an array of a certain type, then you should still specify the type as opposed to an array of the type.</span></span>

    Workflow Test-Runbook
    {
       [OutputType([string])]

       $output = "This is some string output."
       Write-Output $output
    }

<span data-ttu-id="8d1ec-167">Pour déclarer un type de sortie dans les Runbooks graphiques ou PowerShell Workflow graphiques, vous pouvez sélectionner l’option de menu **Entrée et sortie** et saisir le nom du type de sortie.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-167">To declare an output type in Grapical or Graphical PowerShell Workflow runbooks, you can select the **Input and Output** menu option and type in the name of the output type.</span></span>  <span data-ttu-id="8d1ec-168">Nous vous recommandons d’utiliser le nom de classe .NET complet pour le rendre facilement identifiable lorsque vous y faites référence dans un Runbook parent.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-168">We recommend you use the full .NET class name to make it easily identifiable when referencing it from a parent runbook.</span></span>  <span data-ttu-id="8d1ec-169">Cela expose toutes les propriétés de la classe au bus de données du Runbook et offre une grande souplesse lors de leur utilisation pour la logique conditionnelle, la journalisation et le référencement en tant que valeurs pour les autres activités du Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-169">This exposes all the properties of that class to the data bus in the runbook and provides a lot of flexibility when using them for conditional logic, logging, and referencing as values for other activities in the runbook.</span></span><br> <span data-ttu-id="8d1ec-170">![Option Entrée et sortie de Runbook](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-170">![Runbook Input and Output option](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span></span>

<span data-ttu-id="8d1ec-171">Dans l’exemple suivant, nous avons deux Runbooks graphiques illustrant cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-171">In the following example, we have two graphical runbooks to demonstrate this feature.</span></span>  <span data-ttu-id="8d1ec-172">Si le modèle de conception Runbook modulaire est appliqué, un des Runbooks est utilisé en tant que *modèle Runbook d’authentification* et gère l’authentification auprès d’Azure à l’aide du compte d’identification.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-172">If we apply the modular runbook design model, we have one runbook which serves as the *Authentication Runbook template* managing authentication with Azure using the Run As account.</span></span>  <span data-ttu-id="8d1ec-173">Le deuxième Runbook, qui effectue normalement les opérations logiques principales pour automatiser un scénario donné, exécute alors le *modèle Runbook d’authentification* et affiche les résultats dans le volet de sortie **Test** .</span><span class="sxs-lookup"><span data-stu-id="8d1ec-173">Our second runbook, which would normally perform the core logic to automate a given scenario, in this case is going to execute the *Authentication Runbook template* and display the results to your **Test** output pane.</span></span>  <span data-ttu-id="8d1ec-174">Dans des circonstances normales, ce Runbook effectue ses activités par rapport à une ressource utilisant la sortie du Runbook enfant.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-174">Under normal circumstances, we would have this runbook do something against a resource leveraging the output from the child runbook.</span></span>    

<span data-ttu-id="8d1ec-175">Voici la logique de base du Runbook **AuthenticateTo-Azure**.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-175">Here is the basic logic of the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="8d1ec-176">![Exemple de modèle Runbook d’authentification](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-176">![Authenticate Runbook Template Example](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span></span>  

<span data-ttu-id="8d1ec-177">Il inclut le type de sortie *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, qui retourne les propriétés de profil d’authentification.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-177">It includes the output type *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, which will return the authentication profile properties.</span></span><br> <span data-ttu-id="8d1ec-178">![Exemple de type de sortie Runbook](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-178">![Runbook Output Type Example](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span></span> 

<span data-ttu-id="8d1ec-179">Ce Runbook est très simple, mais l’un des éléments de configuration requiert une attention particulière.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-179">While this runbook is very straight forward, there is one configuration item to call out here.</span></span>  <span data-ttu-id="8d1ec-180">La dernière activité exécute l’applet de commande **Write-Output** et écrit les données de profil dans une variable $_ à l’aide d’une expression PowerShell pour le paramètre **Inputobject**, qui est requis pour cette applet de commande.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-180">The last activity is executing the **Write-Output** cmdlet and writes the profile data to a $_ variable using a PowerShell expression for the **Inputobject** parameter, which is required for that cmdlet.</span></span>  

<span data-ttu-id="8d1ec-181">Pour le deuxième Runbook de cet exemple, nommé *Test-ChildOutputType*, il y a simplement deux activités.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-181">For the second runbook in this example, named *Test-ChildOutputType*, we simply have two activities.</span></span><br> <span data-ttu-id="8d1ec-182">![Exemple de type de sortie enfant Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-182">![Example Child Output Type Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span></span> 

<span data-ttu-id="8d1ec-183">La première activité appelle le Runbook **AuthenticateTo-Azure**, et la seconde exécute l’applet de commande **Write-Verbose** avec la **source de données** de la **sortie de l’activité**. La valeur du **chemin du champ** est **Context.Subscription.SubscriptionName** et spécifie la sortie de contexte du Runbook **AuthenticateTo-Azure**.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-183">The first activity calls the **AuthenticateTo-Azure** runbook and the second activity is running the **Write-Verbose** cmdlet with the **Data source** of **Activity output** and the value for **Field path** is **Context.Subscription.SubscriptionName**, which is specifying the context output from the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="8d1ec-184">![Source de données du paramètre d’applet de commande Write-Verbose](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-184">![Write-Verbose cmdlet Parameter Data Source](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span></span>    

<span data-ttu-id="8d1ec-185">Le résultat obtenu est le nom de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-185">The resulting output is the name of the subscription.</span></span><br> ![Résultats du Runbook Test-ChildOutputType](media/automation-runbook-output-and-messages/runbook-test-childoutputtype-results.png)

<span data-ttu-id="8d1ec-187">Une remarque sur le comportement de la commande Type de sortie.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-187">One note about the behavior of the Output Type control.</span></span>  <span data-ttu-id="8d1ec-188">Lorsque vous entrez une valeur dans le champ Type de sortie dans le panneau des propriétés Entrée et sortie, vous devez cliquer en dehors de la commande après avoir entré la valeur, afin que votre entrée soit reconnue par la commande.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-188">When you type a value in the Output Type field on the Input and Output properties blade, you have to click outside of the control  after you type it, in order for your entry to be recognized by the control.</span></span>  

## <a name="message-streams"></a><span data-ttu-id="8d1ec-189">Flux de messages</span><span class="sxs-lookup"><span data-stu-id="8d1ec-189">Message streams</span></span>
<span data-ttu-id="8d1ec-190">Contrairement au flux de sortie, les flux de messages sont destinés à la communication des informations à l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-190">Unlike the output stream, message streams are intended to communicate information to the user.</span></span> <span data-ttu-id="8d1ec-191">Il existe plusieurs flux de messages pour les différents types d’informations, et chacun d’eux est traité différemment par Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-191">There are multiple message streams for different kinds of information, and each is handled differently by Azure Automation.</span></span>

### <a name="warning-and-error-streams"></a><span data-ttu-id="8d1ec-192">Flux d’erreurs et d’avertissements</span><span class="sxs-lookup"><span data-stu-id="8d1ec-192">Warning and error streams</span></span>
<span data-ttu-id="8d1ec-193">Les flux d’erreurs et d’avertissements sont conçus pour l’enregistrement des problèmes qui se produisent dans un Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-193">The Warning and Error streams are intended to log problems that occur in a runbook.</span></span> <span data-ttu-id="8d1ec-194">Ils sont consignés dans l’historique des tâches lorsqu’un Runbook est exécuté et sont inclus dans le volet de sortie du test du Portail de gestion Azure lorsqu’un Runbook est testé.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-194">They are written to the job history when a runbook is executed, and are included in the Test Output Pane in the Azure Management Portal when a runbook is tested.</span></span> <span data-ttu-id="8d1ec-195">Par défaut, l’exécution du Runbook se poursuit après un avertissement ou une erreur.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-195">By default, the runbook will continue executing after a warning or error.</span></span> <span data-ttu-id="8d1ec-196">Vous pouvez spécifier l’interruption du Runbook en cas d’avertissement ou d’erreur en définissant une [variable de préférence](#PreferenceVariables) dans le Runbook avant de créer le message.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-196">You can specify that the runbook should be suspended on a warning or error by setting a [preference variable](#PreferenceVariables) in the runbook before creating the message.</span></span> <span data-ttu-id="8d1ec-197">Par exemple, pour déclencher l’interruption du Runbook en cas d’erreur, comme dans le cas d’une exception, affectez la valeur Stop à **$ErrorActionPreference** .</span><span class="sxs-lookup"><span data-stu-id="8d1ec-197">For example, to cause a runbook to suspend on an error as it would an exception, set **$ErrorActionPreference** to Stop.</span></span>

<span data-ttu-id="8d1ec-198">Créez un message d’avertissement ou un message d’erreur à l’aide de l’applet de commande [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) ou [Write-Error](http://technet.microsoft.com/library/hh849962.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-198">Create a warning or error message using the [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) or [Write-Error](http://technet.microsoft.com/library/hh849962.aspx) cmdlet.</span></span> <span data-ttu-id="8d1ec-199">Les activités peuvent également écrire dans ces flux.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-199">Activities may also write to these streams.</span></span>

    #The following lines create a warning message and then an error message that will suspend the runbook.

    $ErrorActionPreference = "Stop"
    Write-Warning –Message "This is a warning message."
    Write-Error –Message "This is an error message that will stop the runbook because of the preference variable."

### <a name="verbose-stream"></a><span data-ttu-id="8d1ec-200">flux des commentaires</span><span class="sxs-lookup"><span data-stu-id="8d1ec-200">Verbose stream</span></span>
<span data-ttu-id="8d1ec-201">Ce flux est utilisé pour les informations générales sur le fonctionnement du Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-201">The Verbose message stream is for general information about the runbook operation.</span></span> <span data-ttu-id="8d1ec-202">Dans la mesure où le [flux de débogage](#Debug) n’est pas disponible dans un Runbook, les messages documentés doivent être utilisés pour les informations de débogage.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-202">Since the [Debug Stream](#Debug) is not available in a runbook, verbose messages should be used for debug information.</span></span> <span data-ttu-id="8d1ec-203">Par défaut, les messages documentés provenant de Runbooks publiés ne seront pas stockés dans l’historique des tâches.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-203">By default, verbose messages from published runbooks will not be stored in the job history.</span></span> <span data-ttu-id="8d1ec-204">Pour stocker les messages documentés, configurez les Runbooks publiés de façon à enregistrer les informations de commentaires sous l’onglet de configuration du Runbook dans le Portail de gestion Azure.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-204">To store verbose messages, configure published runbooks to Log Verbose Records on the Configure tab of the runbook in the Azure Management Portal.</span></span> <span data-ttu-id="8d1ec-205">Pour des raisons de performances, il est généralement recommandé de conserver le paramètre par défaut (les informations de commentaires ne sont pas enregistrées pour le Runbook).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-205">In most cases, you should keep the default setting of not logging verbose records for a runbook for performance reasons.</span></span> <span data-ttu-id="8d1ec-206">Activez cette option uniquement pour résoudre les problèmes liés à un Runbook ou déboguer un Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-206">Turn on this option only to troubleshoot or debug a runbook.</span></span>

<span data-ttu-id="8d1ec-207">Lors du [test d’un Runbook](automation-testing-runbook.md), les messages documentés ne s’affichent pas, même si le Runbook est configuré pour enregistrer les informations de commentaires.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-207">When [testing a runbook](automation-testing-runbook.md), verbose messages are not displayed even if the runbook is configured to log verbose records.</span></span> <span data-ttu-id="8d1ec-208">Pour afficher les messages documentés lors du [test d’un Runbook](automation-testing-runbook.md), vous devez affecter la valeur Continue à la variable $VerbosePreference.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-208">To display verbose messages while [testing a runbook](automation-testing-runbook.md), you must set the $VerbosePreference variable to Continue.</span></span> <span data-ttu-id="8d1ec-209">Dans ce cas, les messages documentés sont affichés dans le volet de sortie du test du Portail Azure.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-209">With that variable set, verbose messages will be displayed in the Test Output Pane of the Azure portal.</span></span>

<span data-ttu-id="8d1ec-210">Créez un message documenté à l’aide de l’applet de commande [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) .</span><span class="sxs-lookup"><span data-stu-id="8d1ec-210">Create a verbose message using the [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) cmdlet.</span></span>

    #The following line creates a verbose message.

    Write-Verbose –Message "This is a verbose message."

### <a name="debug-stream"></a><span data-ttu-id="8d1ec-211">flux de débogage</span><span class="sxs-lookup"><span data-stu-id="8d1ec-211">Debug stream</span></span>
<span data-ttu-id="8d1ec-212">Le flux de débogage est destiné à être utilisé avec un utilisateur interactif et ne doit pas être utilisé dans les Runbooks.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-212">The Debug stream is intended for use with an interactive user and should not be used in runbooks.</span></span>

## <a name="progress-records"></a><span data-ttu-id="8d1ec-213">Informations de progression</span><span class="sxs-lookup"><span data-stu-id="8d1ec-213">Progress records</span></span>
<span data-ttu-id="8d1ec-214">Si vous configurez un runbook pour enregistrer les informations de progression (sous l’onglet de configuration du runbook, dans le Portail Azure), un enregistrement est consigné dans l’historique des tâches avant et après l’exécution de chaque activité.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-214">If you configure a runbook to log progress records (on the Configure tab of the runbook in the Azure portal), then a record will be written to the job history before and after each activity is run.</span></span> <span data-ttu-id="8d1ec-215">Afin d’optimiser les performances, il est généralement recommandé de conserver le paramètre par défaut (les informations de progression ne sont pas enregistrées pour le Runbook).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-215">In most cases, you should keep the default setting of not logging progress records for a runbook in order to maximize performance.</span></span> <span data-ttu-id="8d1ec-216">Activez cette option uniquement pour résoudre les problèmes liés à un Runbook ou déboguer un Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-216">Turn on this option only to troubleshoot or debug a runbook.</span></span> <span data-ttu-id="8d1ec-217">Lors du test d’un Runbook, les messages de progression ne s’affichent pas, même si le Runbook est configuré pour enregistrer les informations de progression.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-217">When testing a runbook, progress messages are not displayed even if the runbook is configured to log progress records.</span></span>

<span data-ttu-id="8d1ec-218">L’applet de commande [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) n’est pas valide dans un Runbook, dans la mesure où les messages sont destinés à un utilisateur interactif.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-218">The [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) cmdlet is not valid in a runbook, since this is intended for use with an interactive user.</span></span>

## <a name="preference-variables"></a><span data-ttu-id="8d1ec-219">Variables de préférence</span><span class="sxs-lookup"><span data-stu-id="8d1ec-219">Preference variables</span></span>
<span data-ttu-id="8d1ec-220">Windows PowerShell utilise des [variables de préférence](http://technet.microsoft.com/library/hh847796.aspx) pour déterminer comment répondre aux données envoyées aux différents flux de sortie.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-220">Windows PowerShell uses [preference variables](http://technet.microsoft.com/library/hh847796.aspx) to determine how to respond to data sent to different output streams.</span></span> <span data-ttu-id="8d1ec-221">Vous pouvez définir ces variables dans un Runbook pour contrôler comment il répondra aux données envoyées dans différents flux.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-221">You can set these variables in a runbook to control how it will respond to data sent into different streams.</span></span>

<span data-ttu-id="8d1ec-222">Le tableau suivant répertorie les variables de préférence qui peuvent être utilisées dans des Runbooks, ainsi que leurs valeurs valides et valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-222">The following table lists the preference variables that can be used in runbooks with their valid and default values.</span></span> <span data-ttu-id="8d1ec-223">Notez que ce tableau inclut uniquement les valeurs valides dans un Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-223">Note that this table only includes the values that are valid in a runbook.</span></span> <span data-ttu-id="8d1ec-224">D’autres valeurs sont valides pour les variables de préférence lorsqu’elles sont utilisées dans Windows PowerShell en dehors d’Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-224">Additional values are valid for the preference variables when used in Windows PowerShell outside of Azure Automation.</span></span>

| <span data-ttu-id="8d1ec-225">Variable</span><span class="sxs-lookup"><span data-stu-id="8d1ec-225">Variable</span></span> | <span data-ttu-id="8d1ec-226">Valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="8d1ec-226">Default Value</span></span> | <span data-ttu-id="8d1ec-227">Valeurs valides</span><span class="sxs-lookup"><span data-stu-id="8d1ec-227">Valid Values</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="8d1ec-228">WarningPreference</span><span class="sxs-lookup"><span data-stu-id="8d1ec-228">WarningPreference</span></span> |<span data-ttu-id="8d1ec-229">Continue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-229">Continue</span></span> |<span data-ttu-id="8d1ec-230">Stop</span><span class="sxs-lookup"><span data-stu-id="8d1ec-230">Stop</span></span><br><span data-ttu-id="8d1ec-231">Continue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-231">Continue</span></span><br><span data-ttu-id="8d1ec-232">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-232">SilentlyContinue</span></span> |
| <span data-ttu-id="8d1ec-233">ErrorActionPreference</span><span class="sxs-lookup"><span data-stu-id="8d1ec-233">ErrorActionPreference</span></span> |<span data-ttu-id="8d1ec-234">Continue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-234">Continue</span></span> |<span data-ttu-id="8d1ec-235">Stop</span><span class="sxs-lookup"><span data-stu-id="8d1ec-235">Stop</span></span><br><span data-ttu-id="8d1ec-236">Continue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-236">Continue</span></span><br><span data-ttu-id="8d1ec-237">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-237">SilentlyContinue</span></span> |
| <span data-ttu-id="8d1ec-238">VerbosePreference</span><span class="sxs-lookup"><span data-stu-id="8d1ec-238">VerbosePreference</span></span> |<span data-ttu-id="8d1ec-239">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-239">SilentlyContinue</span></span> |<span data-ttu-id="8d1ec-240">Stop</span><span class="sxs-lookup"><span data-stu-id="8d1ec-240">Stop</span></span><br><span data-ttu-id="8d1ec-241">Continue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-241">Continue</span></span><br><span data-ttu-id="8d1ec-242">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-242">SilentlyContinue</span></span> |

<span data-ttu-id="8d1ec-243">Le tableau suivant indique le comportement associé aux valeurs des variables de préférence valides dans les Runbooks.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-243">The following table lists the behavior for the preference variable values that are valid in runbooks.</span></span>

| <span data-ttu-id="8d1ec-244">Valeur</span><span class="sxs-lookup"><span data-stu-id="8d1ec-244">Value</span></span> | <span data-ttu-id="8d1ec-245">Comportement</span><span class="sxs-lookup"><span data-stu-id="8d1ec-245">Behavior</span></span> |
|:--- |:--- |
| <span data-ttu-id="8d1ec-246">Continue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-246">Continue</span></span> |<span data-ttu-id="8d1ec-247">Enregistre le message et poursuit l’exécution du Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-247">Logs the message and continues executing the runbook.</span></span> |
| <span data-ttu-id="8d1ec-248">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="8d1ec-248">SilentlyContinue</span></span> |<span data-ttu-id="8d1ec-249">Poursuit l’exécution du Runbook sans enregistrer le message.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-249">Continues executing the runbook without logging the message.</span></span> <span data-ttu-id="8d1ec-250">Le message est alors ignoré.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-250">This has the effect of ignoring the message.</span></span> |
| <span data-ttu-id="8d1ec-251">Stop</span><span class="sxs-lookup"><span data-stu-id="8d1ec-251">Stop</span></span> |<span data-ttu-id="8d1ec-252">Enregistre le message et interrompt le Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-252">Logs the message and suspends the runbook.</span></span> |

## <a name="retrieving-runbook-output-and-messages"></a><span data-ttu-id="8d1ec-253">Récupération de la sortie et des messages de Runbook</span><span class="sxs-lookup"><span data-stu-id="8d1ec-253">Retrieving runbook output and messages</span></span>
### <a name="azure-portal"></a><span data-ttu-id="8d1ec-254">Portail Azure</span><span class="sxs-lookup"><span data-stu-id="8d1ec-254">Azure portal</span></span>
<span data-ttu-id="8d1ec-255">Vous pouvez afficher les détails d’une tâche de Runbook dans le Portail Azure à partir de l’onglet Tâches d’un Runbook.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-255">You can view the details of a runbook job in the Azure portal from the Jobs tab of a runbook.</span></span> <span data-ttu-id="8d1ec-256">Le résumé de la tâche affiche les paramètres d’entrée et le [flux de sortie](#Output) en plus des informations générales sur la tâche et des exceptions, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-256">The Summary of the job will display the input parameters and the [Output Stream](#Output) in addition to general information about the job and any exceptions if they occurred.</span></span> <span data-ttu-id="8d1ec-257">L’historique inclut les messages du [flux de sortie](#Output) et des [flux d’avertissements et d’erreurs](#WarningError) en plus du [flux de commentaires](#Verbose) et des [informations de progression](#Progress) si le Runbook est configuré pour enregistrer les informations de commentaires et de progression.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-257">The History will include messages from the [Output Stream](#Output) and [Warning and Error Streams](#WarningError) in addition to the [Verbose Stream](#Verbose) and [Progress Records](#Progress) if the runbook is configured to log verbose and progress records.</span></span>

### <a name="windows-powershell"></a><span data-ttu-id="8d1ec-258">Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="8d1ec-258">Windows PowerShell</span></span>
<span data-ttu-id="8d1ec-259">Dans Windows PowerShell, vous pouvez récupérer la sortie et les messages d’un Runbook à l’aide de l’applet de commande [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-259">In Windows PowerShell, you can retrieve output and messages from a runbook using the [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) cmdlet.</span></span> <span data-ttu-id="8d1ec-260">Cette applet de commande requiert l’ID de la tâche. Elle inclut le paramètre Stream qui vous permet de spécifier le flux à renvoyer.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-260">This cmdlet requires the ID of the job and has a parameter called Stream where you specify which stream to return.</span></span> <span data-ttu-id="8d1ec-261">Vous pouvez spécifier la valeur Any pour renvoyer tous les flux de la tâche.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-261">You can specify Any to return all streams for the job.</span></span>

<span data-ttu-id="8d1ec-262">Dans l’exemple suivant, un exemple de Runbook est démarré et exécuté.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-262">The following example starts a sample runbook and then waits for it to complete.</span></span> <span data-ttu-id="8d1ec-263">À l’issue de l’exécution du Runbook, son flux de sortie est collecté à partir de la tâche.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-263">Once completed, its output stream is collected from the job.</span></span>

    $job = Start-AzureRmAutomationRunbook -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" –Name "Test-Runbook"

    $doLoop = $true
    While ($doLoop) {
       $job = Get-AzureRmAutomationJob -ResourceGroupName "ResourceGroup01" `
       –AutomationAccountName "MyAutomationAccount" -Id $job.JobId
       $status = $job.Status
       $doLoop = (($status -ne "Completed") -and ($status -ne "Failed") -and ($status -ne "Suspended") -and ($status -ne "Stopped")
    }

    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" -Id $job.JobId –Stream Output

### <a name="graphical-authoring"></a><span data-ttu-id="8d1ec-264">Création graphique</span><span class="sxs-lookup"><span data-stu-id="8d1ec-264">Graphical Authoring</span></span>
<span data-ttu-id="8d1ec-265">Pour les runbooks graphiques, une journalisation supplémentaire est disponible sous la forme de suivi au niveau de l’activité.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-265">For graphical runbooks, extra logging is available in the form of activity-level tracing.</span></span>  <span data-ttu-id="8d1ec-266">Il existe deux niveaux de suivi : de base et détaillé.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-266">There are two levels of tracing: Basic and Detailed.</span></span>  <span data-ttu-id="8d1ec-267">Dans le suivi de base, vous pouvez voir l’heure de début et de fin de chaque activité dans le runbook, ainsi que des informations relatives à toute nouvelle tentative de l’activité, comme le nombre de tentatives et l’heure de début de l’activité.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-267">In Basic tracing, you can see the start and end time of each activity in the runbook plus information related to any activity retries, such as number of attempts and start time of the activity.</span></span>  <span data-ttu-id="8d1ec-268">Dans le suivi détaillé, vous obtenez le suivi de base, ainsi que des données d’entrée et de sortie pour chaque activité.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-268">In Detailed tracing, you get Basic tracing plus input and output data for each activity.</span></span>  <span data-ttu-id="8d1ec-269">Notez qu’actuellement les enregistrements de suivi sont écrits à l’aide du flux de commentaires détaillé. Vous devez activer la journalisation détaillée lorsque vous activez le suivi.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-269">Note that currently the trace records are written using the verbose stream, so you must enable Verbose logging when you enable tracing.</span></span>  <span data-ttu-id="8d1ec-270">Pour les runbooks graphiques avec le suivi activé, il est inutile de journaliser les informations de progression, étant donné que le suivi de base joue le même rôle et contient des informations plus détaillées.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-270">For graphical runbooks with tracing enabled there is no need to log progress records, because the Basic tracing serves the same purpose and is more informative.</span></span>

![Vue du flux de travail de création graphique](media/automation-runbook-output-and-messages/job-streams-view-blade.png)

<span data-ttu-id="8d1ec-272">La capture d’écran ci-dessus illustre le fait que lorsque vous activez la journalisation détaillée et le suivi pour les graphiques, vous obtenez beaucoup plus d’informations dans la vue du flux de travail de production.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-272">You can see from the above screenshot that when you enable Verbose logging and tracing for Graphical runbooks, much more information is available in the production Job Streams view.</span></span>  <span data-ttu-id="8d1ec-273">Ces informations supplémentaires peuvent être essentielles pour résoudre les problèmes de production pour un runbook. Il est donc conseillé de l’activer uniquement à cet effet et pas de manière générale.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-273">This extra information can be essential for troubleshooting production problems with a runbook, and therefore you should only enable it for that purpose and not as a general practice.</span></span>    
<span data-ttu-id="8d1ec-274">Les enregistrements de suivi peuvent être particulièrement nombreux.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-274">The Trace records can be especially numerous.</span></span>  <span data-ttu-id="8d1ec-275">Avec le suivi de runbook graphique, vous pouvez obtenir entre deux et quatre enregistrements par activité selon que vous avez configuré le suivi de base ou le suivi détaillé.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-275">With Graphical runbook tracing you can get two to four records per activity depending on whether you have configured Basic or Detailed tracing.</span></span>  <span data-ttu-id="8d1ec-276">À moins que vous n’ayez besoin de ces informations pour suivre la progression d’un runbook à des fins de dépannage, vous pouvez choisir de désactiver le suivi.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-276">Unless you need this information to track the progress of a runbook for troubleshooting, you might want to keep Tracing turned off.</span></span>

<span data-ttu-id="8d1ec-277">**Pour activer le suivi au niveau de l’activité, procédez comme suit.**</span><span class="sxs-lookup"><span data-stu-id="8d1ec-277">**To enable activity-level tracing, perform the following steps.**</span></span>

1. <span data-ttu-id="8d1ec-278">Dans le portail Azure, ouvrez votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-278">In the Azure Portal, open your Automation account.</span></span>
2. <span data-ttu-id="8d1ec-279">Cliquez sur la vignette **Runbooks** pour ouvrir la liste des runbooks.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-279">Click on the **Runbooks** tile to open the list of runbooks.</span></span>
3. <span data-ttu-id="8d1ec-280">Dans le panneau Runbooks, cliquez sur un runbook graphique pour le sélectionner dans la liste des runbooks.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-280">On the Runbooks blade, click to select a graphical runbook from your list of runbooks.</span></span>
4. <span data-ttu-id="8d1ec-281">Dans le panneau Paramètres du Runbook sélectionné, cliquez sur **Journalisation et suivi**.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-281">On the Settings blade for the selected runbook, click **Logging and Tracing**.</span></span>
5. <span data-ttu-id="8d1ec-282">Dans le panneau Journalisation et suivi, sous Journaliser les enregistrements détaillés, cliquez sur **Activé** pour activer la journalisation détaillée ; sous Suivi au niveau de l’activité, définissez le niveau de suivi sur **De base** ou **Détaillé** en fonction du niveau de suivi requis.</span><span class="sxs-lookup"><span data-stu-id="8d1ec-282">On the Logging and Tracing blade, under Log verbose records, click **On** to enable verbose logging and udner Activity-level tracing, change the trace level to **Basic** or **Detailed** based on the level of tracing you require.</span></span><br>
   
   ![Panneau Journalisation et suivi de la création graphique](media/automation-runbook-output-and-messages/logging-and-tracing-settings-blade.png)

### <a name="microsoft-operations-management-suite-oms-log-analytics"></a><span data-ttu-id="8d1ec-284">Microsoft Operations Management Suite (OMS) Log Analytics</span><span class="sxs-lookup"><span data-stu-id="8d1ec-284">Microsoft Operations Management Suite (OMS) Log Analytics</span></span>
<span data-ttu-id="8d1ec-285">Automation peut envoyer l’état d’un travail de runbook et des flux de travail vers votre espace de travail Log Analytics dans Microsoft Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-285">Automation can send runbook job status and job streams to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="8d1ec-286">Avec Log Analytics, vous pouvez :</span><span class="sxs-lookup"><span data-stu-id="8d1ec-286">With Log Analytics you can,</span></span>

* <span data-ttu-id="8d1ec-287">Obtenir des informations sur vos travaux Automation</span><span class="sxs-lookup"><span data-stu-id="8d1ec-287">Get insight on your Automation jobs</span></span> 
* <span data-ttu-id="8d1ec-288">Déclencher un e-mail ou une alerte basé(e) sur le statut de votre tâche de runbook (par exemple, échec ou état suspendu)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-288">Trigger an email or alert based on your runbook job status (e.g. failed or suspended)</span></span> 
* <span data-ttu-id="8d1ec-289">Écrire des requêtes avancées sur vos flux de travail</span><span class="sxs-lookup"><span data-stu-id="8d1ec-289">Write advanced queries across your job streams</span></span> 
* <span data-ttu-id="8d1ec-290">Mettre en corrélation des travaux sur différents comptes Automation</span><span class="sxs-lookup"><span data-stu-id="8d1ec-290">Correlate jobs across Automation accounts</span></span> 
* <span data-ttu-id="8d1ec-291">Visualiser l’historique de vos travaux dans le temps</span><span class="sxs-lookup"><span data-stu-id="8d1ec-291">Visualize your job history over time</span></span>    

<span data-ttu-id="8d1ec-292">Pour plus d’informations sur la configuration de l’intégration à Log Analytics pour collecter, mettre en corrélation et modifier des données de travail, consultez [Transférer l’état d’un travail et des flux de travail d’Automation vers Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="8d1ec-292">For more information on how to configure integration with Log Analytics to collect, correlate and act on job data, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8d1ec-293">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8d1ec-293">Next steps</span></span>
* <span data-ttu-id="8d1ec-294">Pour en savoir plus sur l’exécution d’un runbook, la manière de surveiller des tâches de runbook et d’autres détails techniques, consultez [Suivre une tâche de runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-294">To learn more about runbook execution, how to monitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="8d1ec-295">Pour comprendre comment créer et utiliser des Runbooks enfants, consultez [Runbooks enfants dans Azure Automation](automation-child-runbooks.md)</span><span class="sxs-lookup"><span data-stu-id="8d1ec-295">To understand how to design and use child runbooks, see [Child runbooks in Azure Automation](automation-child-runbooks.md)</span></span>

