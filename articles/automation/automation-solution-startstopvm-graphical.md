---
title: "aaaStarting et les machines virtuelles de l’arrêt - graphique | Documents Microsoft"
description: "Version de flux de travail PowerShell du scénario Azure Automation, y compris des procédures opérationnelles toostart et arrêter les machines virtuelles classiques."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 62d93170-ca3d-42ef-ac1d-6d50b61ac87d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2016
ms.author: magoedte;bwren
redirect_url: https://docs.microsoft.com/azure/automation/automation-solution-vm-management
redirect_document_id: False
ms.openlocfilehash: 5add8d8cf35ea2e89a570744755ac7db0a6feb07
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-automation-scenario---starting-and-stopping-virtual-machines"></a><span data-ttu-id="f0f29-103">Scénario Azure Automation : démarrage et arrêt de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="f0f29-103">Azure Automation scenario - starting and stopping virtual machines</span></span>
<span data-ttu-id="f0f29-104">Ce scénario Azure Automation inclut des procédures opérationnelles toostart et arrêter les machines virtuelles classiques.</span><span class="sxs-lookup"><span data-stu-id="f0f29-104">This Azure Automation scenario includes runbooks toostart and stop classic virtual machines.</span></span>  <span data-ttu-id="f0f29-105">Vous pouvez utiliser ce scénario pour hello suivants :</span><span class="sxs-lookup"><span data-stu-id="f0f29-105">You can use this scenario for any of hello following:</span></span>  

* <span data-ttu-id="f0f29-106">Utiliser des runbooks de hello sans modification dans votre propre environnement.</span><span class="sxs-lookup"><span data-stu-id="f0f29-106">Use hello runbooks without modification in your own environment.</span></span>
* <span data-ttu-id="f0f29-107">Modifier les fonctionnalités de tooperform personnalisé de procédures opérationnelles de hello.</span><span class="sxs-lookup"><span data-stu-id="f0f29-107">Modify hello runbooks tooperform customized functionality.</span></span>  
* <span data-ttu-id="f0f29-108">Appeler des procédures opérationnelles de hello à partir d’un autre runbook dans le cadre d’une solution globale.</span><span class="sxs-lookup"><span data-stu-id="f0f29-108">Call hello runbooks from another runbook as part of an overall solution.</span></span>
* <span data-ttu-id="f0f29-109">Permet d’utiliser des runbooks de hello en tant que runbook toolearn de didacticiels concepts de création.</span><span class="sxs-lookup"><span data-stu-id="f0f29-109">Use hello runbooks as tutorials toolearn runbook authoring concepts.</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="f0f29-110">Graphique</span><span class="sxs-lookup"><span data-stu-id="f0f29-110">Graphical</span></span>](automation-solution-startstopvm-graphical.md)
> * [<span data-ttu-id="f0f29-111">Workflow PowerShell</span><span class="sxs-lookup"><span data-stu-id="f0f29-111">PowerShell Workflow</span></span>](automation-solution-startstopvm-psworkflow.md)
>
>

<span data-ttu-id="f0f29-112">Il s’agit de version de runbook graphique hello de ce scénario.</span><span class="sxs-lookup"><span data-stu-id="f0f29-112">This is hello graphical runbook version of this scenario.</span></span> <span data-ttu-id="f0f29-113">Elle est également disponible en utilisant des [Runbooks de workflow PowerShell](automation-solution-startstopvm-psworkflow.md).</span><span class="sxs-lookup"><span data-stu-id="f0f29-113">It is also available using [PowerShell Workflow runbooks](automation-solution-startstopvm-psworkflow.md).</span></span>

## <a name="getting-hello-scenario"></a><span data-ttu-id="f0f29-114">Scénario de hello mise en route</span><span class="sxs-lookup"><span data-stu-id="f0f29-114">Getting hello scenario</span></span>
<span data-ttu-id="f0f29-115">Ce scénario se compose de deux deux runbooks graphiques que vous pouvez télécharger à partir de hello les liens suivants.</span><span class="sxs-lookup"><span data-stu-id="f0f29-115">This scenario consists of two two graphical runbooks that you can download from hello following links.</span></span>  <span data-ttu-id="f0f29-116">Consultez hello [version de flux de travail PowerShell](automation-solution-startstopvm-psworkflow.md) de ce scénario pour les liens toohello les runbooks PowerShell Workflow.</span><span class="sxs-lookup"><span data-stu-id="f0f29-116">See hello [PowerShell Workflow version](automation-solution-startstopvm-psworkflow.md) of this scenario for links toohello PowerShell Workflow runbooks.</span></span>

| <span data-ttu-id="f0f29-117">Runbook</span><span class="sxs-lookup"><span data-stu-id="f0f29-117">Runbook</span></span> | <span data-ttu-id="f0f29-118">Lien</span><span class="sxs-lookup"><span data-stu-id="f0f29-118">Link</span></span> | <span data-ttu-id="f0f29-119">Type</span><span class="sxs-lookup"><span data-stu-id="f0f29-119">Type</span></span> | <span data-ttu-id="f0f29-120">Description</span><span class="sxs-lookup"><span data-stu-id="f0f29-120">Description</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="f0f29-121">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-121">StartAzureClassicVM</span></span> |[<span data-ttu-id="f0f29-122">Démarrer le Runbook graphique d’une machine virtuelle Azure classique</span><span class="sxs-lookup"><span data-stu-id="f0f29-122">Start Azure Classic VM Graphical Runbook</span></span>](https://gallery.technet.microsoft.com/scriptcenter/Start-Azure-Classic-VM-c6067b3d) |<span data-ttu-id="f0f29-123">Graphique</span><span class="sxs-lookup"><span data-stu-id="f0f29-123">Graphical</span></span> |<span data-ttu-id="f0f29-124">Démarre toutes les machines virtuelles classiques d’un abonnement Azure ou toutes les machines virtuelles portant un nom de service particulier.</span><span class="sxs-lookup"><span data-stu-id="f0f29-124">Starts all classic virtual machines in an Azure subscription or all virtual machines with a particular service name.</span></span> |
| <span data-ttu-id="f0f29-125">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-125">StopAzureClassicVM</span></span> |[<span data-ttu-id="f0f29-126">Arrêter le Runbook graphique d’une machine virtuelle Azure classique</span><span class="sxs-lookup"><span data-stu-id="f0f29-126">Stop Azure Classic VM Graphical Runbook</span></span>](https://gallery.technet.microsoft.com/scriptcenter/Stop-Azure-Classic-VM-397819bd) |<span data-ttu-id="f0f29-127">Graphique</span><span class="sxs-lookup"><span data-stu-id="f0f29-127">Graphical</span></span> |<span data-ttu-id="f0f29-128">Arrête toutes les machines virtuelles d’un compte Automation ou toutes les machines virtuelles portant un nom de service particulier.</span><span class="sxs-lookup"><span data-stu-id="f0f29-128">Stops all virtual machines in an automation account or all virtual machines with a particular service name.</span></span> |

## <a name="installing-and-configuring-hello-scenario"></a><span data-ttu-id="f0f29-129">Installation et configuration de scénario de hello</span><span class="sxs-lookup"><span data-stu-id="f0f29-129">Installing and configuring hello scenario</span></span>
### <a name="1-install-hello-runbooks"></a><span data-ttu-id="f0f29-130">1. Installer les procédures opérationnelles de hello</span><span class="sxs-lookup"><span data-stu-id="f0f29-130">1. Install hello runbooks</span></span>
<span data-ttu-id="f0f29-131">Après avoir téléchargé hello runbooks, vous pouvez les importer à l’aide de la procédure hello dans [runbook graphique procédures](automation-graphical-authoring-intro.md#graphical-runbook-procedures).</span><span class="sxs-lookup"><span data-stu-id="f0f29-131">After downloading hello runbooks, you can import them using hello procedure in [Graphical runbook procedures](automation-graphical-authoring-intro.md#graphical-runbook-procedures).</span></span>

### <a name="2-review-hello-description-and-requirements"></a><span data-ttu-id="f0f29-132">2. Révision hello description et configuration requise</span><span class="sxs-lookup"><span data-stu-id="f0f29-132">2. Review hello description and requirements</span></span>
<span data-ttu-id="f0f29-133">Hello runbooks inclut une activité appelée **Lisez-moi** qui inclut une description et les ressources requises.</span><span class="sxs-lookup"><span data-stu-id="f0f29-133">hello runbooks include an activity called **Read Me** that includes a description and required assets.</span></span>  <span data-ttu-id="f0f29-134">Vous pouvez afficher ces informations en sélectionnant hello **Lisez-moi** activité, puis hello **Script de flux de travail** paramètre.</span><span class="sxs-lookup"><span data-stu-id="f0f29-134">You can view this information by selecting hello **Read Me** activity and then hello **Workflow Script** parameter.</span></span>  <span data-ttu-id="f0f29-135">Vous pouvez également obtenir hello les mêmes informations à partir de cet article.</span><span class="sxs-lookup"><span data-stu-id="f0f29-135">You can also get hello same information from this article.</span></span>

### <a name="3-configure-assets"></a><span data-ttu-id="f0f29-136">3. Configuration des ressources</span><span class="sxs-lookup"><span data-stu-id="f0f29-136">3. Configure assets</span></span>
<span data-ttu-id="f0f29-137">les runbooks de Hello nécessitent hello suivant les ressources que vous devez créer et remplir avec les valeurs appropriées.</span><span class="sxs-lookup"><span data-stu-id="f0f29-137">hello runbooks require hello following assets that you must create and populate with appropriate values.</span></span>  <span data-ttu-id="f0f29-138">les noms de Hello sont par défaut.</span><span class="sxs-lookup"><span data-stu-id="f0f29-138">hello names are default.</span></span>  <span data-ttu-id="f0f29-139">Vous pouvez utiliser des ressources avec des noms différents si vous spécifiez ces noms Bonjour [paramètres d’entrée](#using-the-runbooks) lorsque vous démarrez hello runbook.</span><span class="sxs-lookup"><span data-stu-id="f0f29-139">You can use assets with different names if you specify those names in hello [input parameters](#using-the-runbooks) when you start hello runbook.</span></span>

| <span data-ttu-id="f0f29-140">Type de ressource</span><span class="sxs-lookup"><span data-stu-id="f0f29-140">Asset Type</span></span> | <span data-ttu-id="f0f29-141">Nom par défaut</span><span class="sxs-lookup"><span data-stu-id="f0f29-141">Default Name</span></span> | <span data-ttu-id="f0f29-142">Description</span><span class="sxs-lookup"><span data-stu-id="f0f29-142">Description</span></span> |
|:--- |:--- |:--- |:--- |
| [<span data-ttu-id="f0f29-143">Informations d'identification</span><span class="sxs-lookup"><span data-stu-id="f0f29-143">Credential</span></span>](automation-credentials.md) |<span data-ttu-id="f0f29-144">AzureCredential</span><span class="sxs-lookup"><span data-stu-id="f0f29-144">AzureCredential</span></span> |<span data-ttu-id="f0f29-145">Contient des informations d’identification d’un compte qui a l’autorité toostart arrêter les machines virtuelles dans hello abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="f0f29-145">Contains credentials for an account that has authority toostart and stop virtual machines in hello Azure subscription.</span></span> |
| [<span data-ttu-id="f0f29-146">Variable</span><span class="sxs-lookup"><span data-stu-id="f0f29-146">Variable</span></span>](automation-variables.md) |<span data-ttu-id="f0f29-147">AzureSubscriptionId</span><span class="sxs-lookup"><span data-stu-id="f0f29-147">AzureSubscriptionId</span></span> |<span data-ttu-id="f0f29-148">Contient l’ID d’abonnement hello de votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="f0f29-148">Contains hello subscription ID of your Azure subscription.</span></span> |

## <a name="using-hello-scenario"></a><span data-ttu-id="f0f29-149">À l’aide du scénario de hello</span><span class="sxs-lookup"><span data-stu-id="f0f29-149">Using hello scenario</span></span>
### <a name="parameters"></a><span data-ttu-id="f0f29-150">Paramètres</span><span class="sxs-lookup"><span data-stu-id="f0f29-150">Parameters</span></span>
<span data-ttu-id="f0f29-151">Hello procédures opérationnelles chaque disposer de hello [paramètres d’entrée](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="f0f29-151">hello runbooks each have hello following [input parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span>  <span data-ttu-id="f0f29-152">Vous devez fournir des valeurs pour tous les paramètres obligatoires et pouvez éventuellement fournir des valeurs pour les autres paramètres, selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="f0f29-152">You must provide values for any mandatory parameters and can optionally provide values for other parameters depending on your requirements.</span></span>

| <span data-ttu-id="f0f29-153">Paramètre</span><span class="sxs-lookup"><span data-stu-id="f0f29-153">Parameter</span></span> | <span data-ttu-id="f0f29-154">Type</span><span class="sxs-lookup"><span data-stu-id="f0f29-154">Type</span></span> | <span data-ttu-id="f0f29-155">Obligatoire</span><span class="sxs-lookup"><span data-stu-id="f0f29-155">Mandatory</span></span> | <span data-ttu-id="f0f29-156">Description</span><span class="sxs-lookup"><span data-stu-id="f0f29-156">Description</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="f0f29-157">ServiceName</span><span class="sxs-lookup"><span data-stu-id="f0f29-157">ServiceName</span></span> |<span data-ttu-id="f0f29-158">string</span><span class="sxs-lookup"><span data-stu-id="f0f29-158">string</span></span> |<span data-ttu-id="f0f29-159">Non</span><span class="sxs-lookup"><span data-stu-id="f0f29-159">No</span></span> |<span data-ttu-id="f0f29-160">Si une valeur est fournie, toutes les machines virtuelles portant ce nom de service sont démarrées ou arrêtées.</span><span class="sxs-lookup"><span data-stu-id="f0f29-160">If a value is provided, then all virtual machines with that service name are started or stopped.</span></span>  <span data-ttu-id="f0f29-161">Si aucune valeur n’est fournie, toutes les machines virtuelles classiques Bonjour abonnement Azure sont démarrés ou arrêtés.</span><span class="sxs-lookup"><span data-stu-id="f0f29-161">If no value is provided, then all classic virtual machines in hello Azure subscription are started or stopped.</span></span> |
| <span data-ttu-id="f0f29-162">AzureSubscriptionIdAssetName</span><span class="sxs-lookup"><span data-stu-id="f0f29-162">AzureSubscriptionIdAssetName</span></span> |<span data-ttu-id="f0f29-163">string</span><span class="sxs-lookup"><span data-stu-id="f0f29-163">string</span></span> |<span data-ttu-id="f0f29-164">Non</span><span class="sxs-lookup"><span data-stu-id="f0f29-164">No</span></span> |<span data-ttu-id="f0f29-165">Contient le nom hello Hello [ressource de variable](#installing-and-configuring-the-scenario) qui contient l’ID d’abonnement hello de votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="f0f29-165">Contains hello name of hello [variable asset](#installing-and-configuring-the-scenario) that contains hello subscription ID of your Azure subscription.</span></span>  <span data-ttu-id="f0f29-166">Si vous ne spécifiez aucune valeur, la valeur *AzureSubscriptionId* est utilisée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-166">If you don't specify a value, *AzureSubscriptionId* is used.</span></span> |
| <span data-ttu-id="f0f29-167">AzureCredentialAssetName</span><span class="sxs-lookup"><span data-stu-id="f0f29-167">AzureCredentialAssetName</span></span> |<span data-ttu-id="f0f29-168">string</span><span class="sxs-lookup"><span data-stu-id="f0f29-168">string</span></span> |<span data-ttu-id="f0f29-169">Non</span><span class="sxs-lookup"><span data-stu-id="f0f29-169">No</span></span> |<span data-ttu-id="f0f29-170">Contient le nom hello Hello [actif d’informations d’identification](#installing-and-configuring-the-scenario) qui contient les informations d’identification de hello pour hello runbook toouse.</span><span class="sxs-lookup"><span data-stu-id="f0f29-170">Contains hello name of hello [credential asset](#installing-and-configuring-the-scenario) that contains hello credentials for hello runbook toouse.</span></span>  <span data-ttu-id="f0f29-171">Si vous ne spécifiez aucune valeur, la valeur *AzureCredential* est utilisée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-171">If you don't specify a value, *AzureCredential* is used.</span></span> |

### <a name="starting-hello-runbooks"></a><span data-ttu-id="f0f29-172">Démarrage des runbook de hello</span><span class="sxs-lookup"><span data-stu-id="f0f29-172">Starting hello runbooks</span></span>
<span data-ttu-id="f0f29-173">Vous pouvez utiliser une des méthodes hello dans [démarrage d’un runbook dans Azure Automation](automation-starting-a-runbook.md) toostart une des procédures opérationnelles de hello dans cet article.</span><span class="sxs-lookup"><span data-stu-id="f0f29-173">You can use any of hello methods in [Starting a runbook in Azure Automation](automation-starting-a-runbook.md) toostart either of hello runbooks in this article.</span></span>

<span data-ttu-id="f0f29-174">Hello suivant des exemples de commandes utilise Windows PowerShell toorun **StartAzureClassicVM** toostart tous les ordinateurs virtuels avec le nom du service hello *MyVMService*.</span><span class="sxs-lookup"><span data-stu-id="f0f29-174">hello following sample commands uses Windows PowerShell toorun **StartAzureClassicVM** toostart all virtual machines with hello service name *MyVMService*.</span></span>

    $params = @{"ServiceName"="MyVMService"}
    Start-AzureAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "StartAzureClassicVM" –Parameters $params

### <a name="output"></a><span data-ttu-id="f0f29-175">Sortie</span><span class="sxs-lookup"><span data-stu-id="f0f29-175">Output</span></span>
<span data-ttu-id="f0f29-176">Hello runbooks sera [un message de sortie](automation-runbook-output-and-messages.md) pour chaque ordinateur virtuel indiquant hello ou non de démarrer ou d’instruction stop a été correctement envoyée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-176">hello runbooks will [output a message](automation-runbook-output-and-messages.md) for each virtual machine indicating whether or not hello start or stop instruction was successfully submitted.</span></span>  <span data-ttu-id="f0f29-177">Vous pouvez rechercher une chaîne spécifique dans le résultat de hello toodetermine hello sortie pour chaque runbook.</span><span class="sxs-lookup"><span data-stu-id="f0f29-177">You can look for a specific string in hello output toodetermine hello result for each runbook.</span></span>  <span data-ttu-id="f0f29-178">chaînes de sortie Hello sont répertoriées dans hello tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="f0f29-178">hello possible output strings are listed in hello following table.</span></span>

| <span data-ttu-id="f0f29-179">Runbook</span><span class="sxs-lookup"><span data-stu-id="f0f29-179">Runbook</span></span> | <span data-ttu-id="f0f29-180">Condition</span><span class="sxs-lookup"><span data-stu-id="f0f29-180">Condition</span></span> | <span data-ttu-id="f0f29-181">Message</span><span class="sxs-lookup"><span data-stu-id="f0f29-181">Message</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="f0f29-182">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-182">StartAzureClassicVM</span></span> |<span data-ttu-id="f0f29-183">Machine virtuelle déjà en cours d'exécution</span><span class="sxs-lookup"><span data-stu-id="f0f29-183">Virtual machine is already running</span></span> |<span data-ttu-id="f0f29-184">MyVM déjà en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="f0f29-184">MyVM is already running</span></span> |
| <span data-ttu-id="f0f29-185">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-185">StartAzureClassicVM</span></span> |<span data-ttu-id="f0f29-186">Demande de démarrage de la machine virtuelle envoyée avec succès</span><span class="sxs-lookup"><span data-stu-id="f0f29-186">Start request for virtual machine successfully submitted</span></span> |<span data-ttu-id="f0f29-187">MyVM démarrée</span><span class="sxs-lookup"><span data-stu-id="f0f29-187">MyVM has been started</span></span> |
| <span data-ttu-id="f0f29-188">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-188">StartAzureClassicVM</span></span> |<span data-ttu-id="f0f29-189">Échec de la demande de démarrage de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="f0f29-189">Start request for virtual machine failed</span></span> |<span data-ttu-id="f0f29-190">Échec de MyVM toostart</span><span class="sxs-lookup"><span data-stu-id="f0f29-190">MyVM failed toostart</span></span> |
| <span data-ttu-id="f0f29-191">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-191">StopAzureClassicVM</span></span> |<span data-ttu-id="f0f29-192">Machine virtuelle déjà en cours d'exécution</span><span class="sxs-lookup"><span data-stu-id="f0f29-192">Virtual machine is already running</span></span> |<span data-ttu-id="f0f29-193">MyVM déjà arrêtée</span><span class="sxs-lookup"><span data-stu-id="f0f29-193">MyVM is already stopped</span></span> |
| <span data-ttu-id="f0f29-194">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-194">StopAzureClassicVM</span></span> |<span data-ttu-id="f0f29-195">Demande de démarrage de la machine virtuelle envoyée avec succès</span><span class="sxs-lookup"><span data-stu-id="f0f29-195">Start request for virtual machine successfully submitted</span></span> |<span data-ttu-id="f0f29-196">MyVM démarrée</span><span class="sxs-lookup"><span data-stu-id="f0f29-196">MyVM has been started</span></span> |
| <span data-ttu-id="f0f29-197">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="f0f29-197">StopAzureClassicVM</span></span> |<span data-ttu-id="f0f29-198">Échec de la demande de démarrage de la machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="f0f29-198">Start request for virtual machine failed</span></span> |<span data-ttu-id="f0f29-199">Échec de MyVM toostart</span><span class="sxs-lookup"><span data-stu-id="f0f29-199">MyVM failed toostart</span></span> |

<span data-ttu-id="f0f29-200">Voici une image de l’utilisation de hello **StartAzureClassicVM** comme un [runbook enfant](automation-child-runbooks.md) dans un exemple de runbook graphique.</span><span class="sxs-lookup"><span data-stu-id="f0f29-200">Following is an image of using hello **StartAzureClassicVM** as a [child runbook](automation-child-runbooks.md) in a sample graphical runbook.</span></span>  <span data-ttu-id="f0f29-201">Cette méthode utilise les liaisons conditionnelles hello Bonjour tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="f0f29-201">This uses hello conditional links in hello following table.</span></span>

| <span data-ttu-id="f0f29-202">Lien</span><span class="sxs-lookup"><span data-stu-id="f0f29-202">Link</span></span> | <span data-ttu-id="f0f29-203">Critères</span><span class="sxs-lookup"><span data-stu-id="f0f29-203">Criteria</span></span> |
|:--- |:--- |
| <span data-ttu-id="f0f29-204">Lien de réussite</span><span class="sxs-lookup"><span data-stu-id="f0f29-204">Success link</span></span> |<span data-ttu-id="f0f29-205">$ActivityOutput['StartAzureClassicVM'] -like "\* a été démarrée"</span><span class="sxs-lookup"><span data-stu-id="f0f29-205">$ActivityOutput['StartAzureClassicVM'] -like "\* has been started"</span></span> |
| <span data-ttu-id="f0f29-206">Lien d’erreur</span><span class="sxs-lookup"><span data-stu-id="f0f29-206">Error link</span></span> |<span data-ttu-id="f0f29-207">$ActivityOutput['StartAzureClassicVM'] -notlike "\* a été démarrée"</span><span class="sxs-lookup"><span data-stu-id="f0f29-207">$ActivityOutput['StartAzureClassicVM'] -notlike "\* has been started"</span></span> |

![Exemple de Runbook enfant](media/automation-solution-startstopvm/graphical-childrunbook-example.png)

## <a name="detailed-breakdown"></a><span data-ttu-id="f0f29-209">Analyse détaillée</span><span class="sxs-lookup"><span data-stu-id="f0f29-209">Detailed breakdown</span></span>
<span data-ttu-id="f0f29-210">Voici une description détaillée des procédures opérationnelles de hello dans ce scénario.</span><span class="sxs-lookup"><span data-stu-id="f0f29-210">Following is a detailed breakdown of hello runbooks in this scenario.</span></span>  <span data-ttu-id="f0f29-211">Vous pouvez utiliser ces informations tooeither personnaliser hello runbooks ou toolearn uniquement à partir de celles-ci pour la création de vos propres scénarios d’automatisation.</span><span class="sxs-lookup"><span data-stu-id="f0f29-211">You can use this information tooeither customize hello runbooks or just toolearn from them for authoring your own automation scenarios.</span></span>

### <a name="authentication"></a><span data-ttu-id="f0f29-212">Authentification</span><span class="sxs-lookup"><span data-stu-id="f0f29-212">Authentication</span></span>
![Authentification](media/automation-solution-startstopvm/graphical-authentication.png)

<span data-ttu-id="f0f29-214">Hello runbook commence par hello de tooset activités [informations d’identification](automation-credentials.md) et un abonnement Azure qui sera utilisé pour le reste de hello de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="f0f29-214">hello runbook starts with activities tooset hello [credentials](automation-credentials.md) and Azure subscription that will be used for hello rest of hello runbook.</span></span>

<span data-ttu-id="f0f29-215">Hello tout d’abord deux activités, **obtenir l’Id abonnement** et **obtenir les informations d’identification Azure**, récupérer hello [actifs](#installing-the-runbook) qui sont utilisés par les activités de deux hello.</span><span class="sxs-lookup"><span data-stu-id="f0f29-215">hello first two activities, **Get Subscription Id** and **Get Azure Credential**, retrieve hello [assets](#installing-the-runbook) that are used by hello next two activities.</span></span>  <span data-ttu-id="f0f29-216">Ces activités peuvent spécifier directement les ressources hello, mais dont ils ont besoin des noms d’élément multimédia hello.</span><span class="sxs-lookup"><span data-stu-id="f0f29-216">Those activities could directly specify hello assets, but they need hello asset names.</span></span>  <span data-ttu-id="f0f29-217">Étant donné que nous autorisons hello utilisateur toospecify ces noms Bonjour [paramètres d’entrée](#using-the-runbooks), nous avons besoin de ces ressources de hello tooretrieve activités avec un nom spécifié par le paramètre d’entrée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-217">Since we are allowing hello user toospecify those names in hello [input parameters](#using-the-runbooks), we need these activities tooretrieve hello assets with a name specified by an input parameter.</span></span>

<span data-ttu-id="f0f29-218">**Ajouter-AzureAccount** jeux hello des informations d’identification qui seront utilisées pour le reste de hello de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="f0f29-218">**Add-AzureAccount** sets hello credentials that will be used for hello rest of hello runbook.</span></span>  <span data-ttu-id="f0f29-219">ressource d’informations d’identification Hello qu’il extrait à partir de **obtenir les informations d’identification Azure** doit avoir accès toostart arrêt des machines virtuelles et Bonjour abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="f0f29-219">hello credential asset that it retrieves from **Get Azure Credential** must have access toostart and stop virtual machines in hello Azure subscription.</span></span>  <span data-ttu-id="f0f29-220">abonnement utilisé Hello est sélectionné par **Select-AzureSubscription** qui utilise l’Id d’abonnement hello de **obtenir l’Id abonnement**.</span><span class="sxs-lookup"><span data-stu-id="f0f29-220">hello subscription that's used is selected by **Select-AzureSubscription** which uses hello subscription Id from **Get Subscription Id**.</span></span>

### <a name="get-virtual-machines"></a><span data-ttu-id="f0f29-221">Obtenir des machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="f0f29-221">Get virtual machines</span></span>
![Obtention de machines virtuelles](media/automation-solution-startstopvm/graphical-getvms.png)

<span data-ttu-id="f0f29-223">Hello runbook doit toodetermine virtuels il travaillez et si elles sont déjà démarrés ou arrêtés (en fonction de runbook de hello).</span><span class="sxs-lookup"><span data-stu-id="f0f29-223">hello runbook needs toodetermine which virtual machines it will be working with and whether they are already started or stopped (depending on hello runbook).</span></span>   <span data-ttu-id="f0f29-224">Une des deux activités récupère les machines virtuelles de hello.</span><span class="sxs-lookup"><span data-stu-id="f0f29-224">One of two activities will retrieve hello VMs.</span></span>  <span data-ttu-id="f0f29-225">**Obtenir les machines virtuelles dans le Service** s’exécutera si hello *ServiceName* paramètre d’entrée pour hello runbook contient une valeur.</span><span class="sxs-lookup"><span data-stu-id="f0f29-225">**Get VMs in Service** will run if hello *ServiceName* input parameter for hello runbook contains a value.</span></span>  <span data-ttu-id="f0f29-226">**Obtenir toutes les machines virtuelles** s’exécutera si hello *ServiceName* paramètre d’entrée pour hello runbook ne contient pas une valeur.</span><span class="sxs-lookup"><span data-stu-id="f0f29-226">**Get All VMs** will run if hello *ServiceName* input parameter for hello runbook does not contain a value.</span></span>  <span data-ttu-id="f0f29-227">Cette logique est effectuée par des liaisons conditionnelles hello précédant chaque activité.</span><span class="sxs-lookup"><span data-stu-id="f0f29-227">This logic is performed by hello conditional links preceding each activity.</span></span>

<span data-ttu-id="f0f29-228">Les deux activités utilisent hello **Get-AzureVM** applet de commande.</span><span class="sxs-lookup"><span data-stu-id="f0f29-228">Both activities use hello **Get-AzureVM** cmdlet.</span></span>  <span data-ttu-id="f0f29-229">**Obtenir toutes les machines virtuelles** utilise hello **ListAllVMs** paramètre défini tooreturn tous les ordinateurs virtuels.</span><span class="sxs-lookup"><span data-stu-id="f0f29-229">**Get All VMs** uses hello **ListAllVMs** parameter set tooreturn all virtual machines.</span></span>  <span data-ttu-id="f0f29-230">**Obtenir les machines virtuelles dans le Service** utilise hello **GetVMByServiceAndVMName** paramètre défini et fournit hello **ServiceName** paramètre d’entrée pour hello **ServiceName**paramètre.</span><span class="sxs-lookup"><span data-stu-id="f0f29-230">**Get VMs in Service** uses hello **GetVMByServiceAndVMName** parameter set and provides hello **ServiceName** input parameter for hello **ServiceName** parameter.</span></span>  

### <a name="merge-vms"></a><span data-ttu-id="f0f29-231">Fusion de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="f0f29-231">Merge VMs</span></span>
![Fusion de machines virtuelles](media/automation-solution-startstopvm/graphical-mergevms.png)

<span data-ttu-id="f0f29-233">Hello **fusionner les machines virtuelles** activité est requis tooprovide d’entrée trop**Start-AzureVM** qui nécessite le nom de hello et service de toostart de machines virtuelles hello.</span><span class="sxs-lookup"><span data-stu-id="f0f29-233">hello **Merge VMs** activity is required tooprovide input too**Start-AzureVM** which needs hello name and service name of hello vm(s) toostart.</span></span>  <span data-ttu-id="f0f29-234">Cette entrée peut provenir de l’activité **Get All VMs** ou **Get VMs in Service**, mais **Start-AzureVM** ne peut spécifier qu’une activité pour son entrée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-234">That input could come from either **Get All VMs** or **Get VMs in Service**, but **Start-AzureVM** can only specify one activity for its input.</span></span>   

<span data-ttu-id="f0f29-235">scénario de Hello est toocreate **fusionner les machines virtuelles** qui s’exécute hello **Write-Output** applet de commande.</span><span class="sxs-lookup"><span data-stu-id="f0f29-235">hello scenario is toocreate **Merge VMs** which runs hello **Write-Output** cmdlet.</span></span>  <span data-ttu-id="f0f29-236">Hello **InputObject** paramètre pour cette applet de commande est une Expression PowerShell qui combine entrée hello d’activités de hello deux précédents.</span><span class="sxs-lookup"><span data-stu-id="f0f29-236">hello **InputObject** parameter for that cmdlet is a PowerShell Expression that combines hello input of hello previous two activities.</span></span>  <span data-ttu-id="f0f29-237">Comme une seule de ces activités s'exécutera, un seul jeu de sortie est attendu.</span><span class="sxs-lookup"><span data-stu-id="f0f29-237">Only one of those activities will run, so only one set of output is expected.</span></span>  <span data-ttu-id="f0f29-238">**Start-AzureVM** peut utiliser ce résultat pour ses paramètres d'entrée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-238">**Start-AzureVM** can use that output for its input parameters.</span></span>

### <a name="startstop-virtual-machines"></a><span data-ttu-id="f0f29-239">Démarrage/arrêt de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="f0f29-239">Start/Stop virtual machines</span></span>
![Start VMs](media/automation-solution-startstopvm/graphical-startvm.png) ![Stop VMs](media/automation-solution-startstopvm/graphical-stopvm.png)

<span data-ttu-id="f0f29-242">Selon hello runbook, les activités suivantes hello essayez toostart ou arrêt de l’utilisation de runbook hello **Start-AzureVM** ou **Stop-AzureVM**.</span><span class="sxs-lookup"><span data-stu-id="f0f29-242">Depending on hello runbook, hello next activities attempt toostart or stop hello runbook using **Start-AzureVM** or **Stop-AzureVM**.</span></span>  <span data-ttu-id="f0f29-243">Étant donné que l’activité hello est précédée d’un lien de pipeline, il s’exécute une fois pour chaque objet retourné à partir de **fusionner les machines virtuelles**.</span><span class="sxs-lookup"><span data-stu-id="f0f29-243">Since hello activity is preceded by a pipeline link, it will run once for each object returned from **Merge VMs**.</span></span>  <span data-ttu-id="f0f29-244">Bonjour lien est conditionnel afin que l’activité hello s’exécutera uniquement si hello *RunningState* Hello machine virtuelle est *arrêté* pour **Start-AzureVM** et  *Démarré* pour **Stop-AzureVM**.</span><span class="sxs-lookup"><span data-stu-id="f0f29-244">hello link is conditional so that hello activity will only run if hello *RunningState* of hello virtual machine is *Stopped* for **Start-AzureVM** and *Started* for **Stop-AzureVM**.</span></span> <span data-ttu-id="f0f29-245">Si cette condition n’est pas remplie, puis **notifier a déjà été démarré** ou **notifier a déjà été arrêté** est exécutée toosend un message à l’aide de **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="f0f29-245">If this condition is not met, then **Notify Already Started** or **Notify Already Stopped** is run toosend a message using **Write-Output**.</span></span>

### <a name="send-output"></a><span data-ttu-id="f0f29-246">Envoi de la sortie</span><span class="sxs-lookup"><span data-stu-id="f0f29-246">Send output</span></span>
![Notify Start VMs](media/automation-solution-startstopvm/graphical-notifystart.png) ![Notify Stop VMs](media/automation-solution-startstopvm/graphical-notifystop.png)

<span data-ttu-id="f0f29-249">étape finale de Hello dans les runbook hello est toosend sortie hello indique si le début ou la demande d’arrêt pour chaque ordinateur virtuel a été correctement envoyée.</span><span class="sxs-lookup"><span data-stu-id="f0f29-249">hello final step in hello runbook is toosend output whether hello start or stop request for each virtual machine was successfully submitted.</span></span> <span data-ttu-id="f0f29-250">Il existe un distinct **Write-Output** activité pour chacun, et nous déterminons le toorun un seul avec des liaisons conditionnelles.</span><span class="sxs-lookup"><span data-stu-id="f0f29-250">There is a separate **Write-Output** activity for each, and we determine which one toorun with conditional links.</span></span>  <span data-ttu-id="f0f29-251">**Notify VM Started** ou **Notify VM Stopped** est exécuté si *OperationStatus* indique *Succeeded*.</span><span class="sxs-lookup"><span data-stu-id="f0f29-251">**Notify VM Started** or **Notify VM Stopped** is run if *OperationStatus* is *Succeeded*.</span></span>  <span data-ttu-id="f0f29-252">Si *OperationStatus* est une autre valeur, puis **Échec de la notification de tooStart** ou **tooStop d’échec de la notification** est exécuté.</span><span class="sxs-lookup"><span data-stu-id="f0f29-252">If *OperationStatus* is any other value, then **Notify Failed tooStart** or **Notify Failed tooStop** is run.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f0f29-253">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="f0f29-253">Next steps</span></span>
* [<span data-ttu-id="f0f29-254">Création de graphiques dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="f0f29-254">Graphical authoring in Azure Automation</span></span>](automation-graphical-authoring-intro.md)
* [<span data-ttu-id="f0f29-255">Runbooks enfants dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="f0f29-255">Child runbooks in Azure Automation</span></span>](automation-child-runbooks.md)
* [<span data-ttu-id="f0f29-256">Sortie et messages de Runbook dans Azure Automation</span><span class="sxs-lookup"><span data-stu-id="f0f29-256">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)
