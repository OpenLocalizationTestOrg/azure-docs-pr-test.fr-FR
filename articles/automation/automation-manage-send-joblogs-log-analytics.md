---
title: "aaaForward tooOMS de données de tâche Azure Automation Analytique de journal | Documents Microsoft"
description: "Cet article explique comment toosend état et le runbook projet flux gestion un éclairage supplémentaire tooMicrosoft Operations Management Suite journal Analytique toodeliver."
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: e78b6c6677d6502711ce828e2d32b7a91922ae26
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-toolog-analytics-oms"></a><span data-ttu-id="a9583-103">Transférer l’état du travail et flux de travail à partir de l’Automation tooLog Analytique (OMS)</span><span class="sxs-lookup"><span data-stu-id="a9583-103">Forward job status and job streams from Automation tooLog Analytics (OMS)</span></span>
<span data-ttu-id="a9583-104">Automation peut envoyer des runbook travail état et la tâche de flux de données tooyour Analytique de journal de Microsoft Operations Management Suite (OMS) espace de travail.</span><span class="sxs-lookup"><span data-stu-id="a9583-104">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="a9583-105">Journaux du travail et flux de travail sont visibles dans hello portail Azure, ou avec PowerShell, pour des travaux individuels et cela vous permet des enquêtes simple tooperform.</span><span class="sxs-lookup"><span data-stu-id="a9583-105">Job logs and job streams are visible in hello Azure portal, or with PowerShell, for individual jobs and this allows you tooperform simple investigations.</span></span> <span data-ttu-id="a9583-106">Désormais avec Log Analytics, vous pouvez :</span><span class="sxs-lookup"><span data-stu-id="a9583-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="a9583-107">Obtenir des informations sur vos travaux Automation</span><span class="sxs-lookup"><span data-stu-id="a9583-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="a9583-108">Déclencher un e-mail ou une alerte basé(e) sur le statut de votre travail de runbook (par exemple, échec ou état suspendu)</span><span class="sxs-lookup"><span data-stu-id="a9583-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="a9583-109">Écrire des requêtes avancées sur vos flux de travail</span><span class="sxs-lookup"><span data-stu-id="a9583-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="a9583-110">Mettre en corrélation des travaux sur différents comptes Automation</span><span class="sxs-lookup"><span data-stu-id="a9583-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="a9583-111">Visualiser l’historique de vos travaux dans le temps</span><span class="sxs-lookup"><span data-stu-id="a9583-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="a9583-112">Conditions préalables et considérations relatives au déploiement</span><span class="sxs-lookup"><span data-stu-id="a9583-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="a9583-113">toostart envoyer votre automatisation consigne tooLog Analytique, vous devez :</span><span class="sxs-lookup"><span data-stu-id="a9583-113">toostart sending your Automation logs tooLog Analytics, you need:</span></span>

1. <span data-ttu-id="a9583-114">Hello novembre 2016 ou une version plus récente de [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="a9583-114">hello November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="a9583-115">Un espace de travail Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="a9583-115">A Log Analytics workspace.</span></span> <span data-ttu-id="a9583-116">Pour plus d’informations, consultez l’article [Prise en main de Log Analytics](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="a9583-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="a9583-117">Hello ResourceId pour votre compte Azure Automation</span><span class="sxs-lookup"><span data-stu-id="a9583-117">hello ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="a9583-118">toofind hello ResourceId pour votre compte Azure Automation et l’espace de travail Analytique de journal, exécutez hello suivant PowerShell :</span><span class="sxs-lookup"><span data-stu-id="a9583-118">toofind hello ResourceId for your Azure Automation account and Log Analytics workspace, run hello following PowerShell:</span></span>

```powershell
# Find hello ResourceId for hello Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find hello ResourceId for hello Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="a9583-119">Si vous possédez plusieurs comptes Automation ou espaces de travail, dans la sortie de hello de hello précédant les commandes, recherche hello *nom* vous devez tooconfigure et copiez la valeur hello pour *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="a9583-119">If you have multiple Automation accounts, or workspaces, in hello output of hello preceding commands, find hello *Name* you need tooconfigure and copy hello value for *ResourceId*.</span></span>

<span data-ttu-id="a9583-120">Si vous avez besoin de toofind hello *nom* de votre compte Automation, Bonjour portail Azure Sélectionnez votre compte Automation à partir de hello **compte Automation** panneau et sélectionnez **tous les paramètres**.</span><span class="sxs-lookup"><span data-stu-id="a9583-120">If you need toofind hello *Name* of your Automation account, in hello Azure portal select your Automation account from hello **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="a9583-121">À partir de hello **tous les paramètres** panneau, sous **les paramètres de compte** sélectionnez **propriétés**.</span><span class="sxs-lookup"><span data-stu-id="a9583-121">From hello **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="a9583-122">Bonjour **propriétés** panneau, vous pouvez noter ces valeurs.</span><span class="sxs-lookup"><span data-stu-id="a9583-122">In hello **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="a9583-123">![Propriétés du compte Automation](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="a9583-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="a9583-124">Configurer l’intégration avec Log Analytics</span><span class="sxs-lookup"><span data-stu-id="a9583-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="a9583-125">Sur votre ordinateur, démarrez **Windows PowerShell** de hello **Démarrer** écran.</span><span class="sxs-lookup"><span data-stu-id="a9583-125">On your computer, start **Windows PowerShell** from hello **Start** screen.</span></span>  
2. <span data-ttu-id="a9583-126">Copiez et collez hello suivant PowerShell, puis modifier la valeur hello pour hello `$workspaceId` et `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="a9583-126">Copy and paste hello following PowerShell, and edit hello value for hello `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="a9583-127">Pourquoi `-Environment` paramètre, les valeurs valides sont *cloud Azure* ou *AzureUSGovernment* en fonction de l’environnement en nuage hello vous travaillez dans.</span><span class="sxs-lookup"><span data-stu-id="a9583-127">For hello `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on hello cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="a9583-128">Après avoir exécuté ce script, les enregistrements s’affichent dans Log Analytics dans les 10 minutes suivant l’écriture des nouveaux JobLogs ou JobStreams.</span><span class="sxs-lookup"><span data-stu-id="a9583-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="a9583-129">journaux de hello toosee, exécutez hello suivant la requête de recherche de journal Analytique de journal :`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="a9583-129">toosee hello logs, run hello following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="a9583-130">Vérifier la configuration</span><span class="sxs-lookup"><span data-stu-id="a9583-130">Verify configuration</span></span>
<span data-ttu-id="a9583-131">espace de travail Analytique de journal tooyour les journaux de tooconfirm l’envoi de votre compte Automation, vérifiez que les diagnostics sont correctement définies sur le compte d’automatisation de hello à l’aide de hello suivant PowerShell :</span><span class="sxs-lookup"><span data-stu-id="a9583-131">tooconfirm that your Automation account is sending logs tooyour Log Analytics workspace, check that diagnostics are set correctly on hello Automation account using hello following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="a9583-132">Dans la sortie de hello Vérifiez que :</span><span class="sxs-lookup"><span data-stu-id="a9583-132">In hello output ensure that:</span></span>
+ <span data-ttu-id="a9583-133">Sous *journaux*, hello valeur pour *activé* est *True*</span><span class="sxs-lookup"><span data-stu-id="a9583-133">Under *Logs*, hello value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="a9583-134">Hello valeur *Id_espace_de_travail* a la valeur toohello ResourceId de votre espace de travail Analytique des journaux</span><span class="sxs-lookup"><span data-stu-id="a9583-134">hello value of *WorkspaceId* is set toohello ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="a9583-135">Enregistrements Log Analytics</span><span class="sxs-lookup"><span data-stu-id="a9583-135">Log Analytics records</span></span>
<span data-ttu-id="a9583-136">Le diagnostic d’Azure Automation crée deux types d’enregistrements dans Log Analytics, balisés par **Type=AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="a9583-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="a9583-137">Journaux de travail</span><span class="sxs-lookup"><span data-stu-id="a9583-137">Job Logs</span></span>
| <span data-ttu-id="a9583-138">Propriété</span><span class="sxs-lookup"><span data-stu-id="a9583-138">Property</span></span> | <span data-ttu-id="a9583-139">Description</span><span class="sxs-lookup"><span data-stu-id="a9583-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a9583-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="a9583-140">TimeGenerated</span></span> |<span data-ttu-id="a9583-141">Date et heure à l’exécution de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-141">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="a9583-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="a9583-142">RunbookName_s</span></span> |<span data-ttu-id="a9583-143">nom de Hello de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="a9583-143">hello name of hello runbook.</span></span> |
| <span data-ttu-id="a9583-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="a9583-144">Caller_s</span></span> |<span data-ttu-id="a9583-145">Qui a lancé une opération hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-145">Who initiated hello operation.</span></span>  <span data-ttu-id="a9583-146">Les valeurs possibles sont une adresse de messagerie ou un système pour les travaux planifiés.</span><span class="sxs-lookup"><span data-stu-id="a9583-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="a9583-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="a9583-147">Tenant_g</span></span> | <span data-ttu-id="a9583-148">GUID qui identifie le client hello pour hello appelant.</span><span class="sxs-lookup"><span data-stu-id="a9583-148">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="a9583-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="a9583-149">JobId_g</span></span> |<span data-ttu-id="a9583-150">GUID qui est hello Id de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-150">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="a9583-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="a9583-151">ResultType</span></span> |<span data-ttu-id="a9583-152">état de Hello de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-152">hello status of hello runbook job.</span></span>  <span data-ttu-id="a9583-153">Les valeurs possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9583-153">Possible values are:</span></span><br><span data-ttu-id="a9583-154">Démarré</span><span class="sxs-lookup"><span data-stu-id="a9583-154">- Started</span></span><br><span data-ttu-id="a9583-155">Arrêté</span><span class="sxs-lookup"><span data-stu-id="a9583-155">- Stopped</span></span><br><span data-ttu-id="a9583-156">Interrompu</span><span class="sxs-lookup"><span data-stu-id="a9583-156">- Suspended</span></span><br><span data-ttu-id="a9583-157">Échec</span><span class="sxs-lookup"><span data-stu-id="a9583-157">- Failed</span></span><br><span data-ttu-id="a9583-158">- Terminé</span><span class="sxs-lookup"><span data-stu-id="a9583-158">- Completed</span></span> |
| <span data-ttu-id="a9583-159">Catégorie</span><span class="sxs-lookup"><span data-stu-id="a9583-159">Category</span></span> | <span data-ttu-id="a9583-160">Classification de type hello de données.</span><span class="sxs-lookup"><span data-stu-id="a9583-160">Classification of hello type of data.</span></span>  <span data-ttu-id="a9583-161">Pour l’automatisation, la valeur de hello est JobLogs.</span><span class="sxs-lookup"><span data-stu-id="a9583-161">For Automation, hello value is JobLogs.</span></span> |
| <span data-ttu-id="a9583-162">Nom d'opération</span><span class="sxs-lookup"><span data-stu-id="a9583-162">OperationName</span></span> | <span data-ttu-id="a9583-163">Spécifie le type hello d’opération exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="a9583-163">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="a9583-164">Pour l’automatisation, valeur de hello est le travail.</span><span class="sxs-lookup"><span data-stu-id="a9583-164">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="a9583-165">Ressource</span><span class="sxs-lookup"><span data-stu-id="a9583-165">Resource</span></span> | <span data-ttu-id="a9583-166">Nom du compte Automation de hello</span><span class="sxs-lookup"><span data-stu-id="a9583-166">Name of hello Automation account</span></span> |
| <span data-ttu-id="a9583-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="a9583-167">SourceSystem</span></span> | <span data-ttu-id="a9583-168">Comment Analytique de journal collecté des données de hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-168">How Log Analytics collected hello data.</span></span> <span data-ttu-id="a9583-169">Toujours *Azure* pour les diagnostics Azure.</span><span class="sxs-lookup"><span data-stu-id="a9583-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="a9583-170">resultDescription</span><span class="sxs-lookup"><span data-stu-id="a9583-170">ResultDescription</span></span> |<span data-ttu-id="a9583-171">Décrit l’état de résultat du travail de runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-171">Describes hello runbook job result state.</span></span>  <span data-ttu-id="a9583-172">Les valeurs possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9583-172">Possible values are:</span></span><br><span data-ttu-id="a9583-173">- Job is started</span><span class="sxs-lookup"><span data-stu-id="a9583-173">- Job is started</span></span><br><span data-ttu-id="a9583-174">- Job Failed</span><span class="sxs-lookup"><span data-stu-id="a9583-174">- Job Failed</span></span><br><span data-ttu-id="a9583-175">- Job Completed</span><span class="sxs-lookup"><span data-stu-id="a9583-175">- Job Completed</span></span> |
| <span data-ttu-id="a9583-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="a9583-176">CorrelationId</span></span> |<span data-ttu-id="a9583-177">GUID qui est hello Id de corrélation de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-177">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="a9583-178">ResourceId</span><span class="sxs-lookup"><span data-stu-id="a9583-178">ResourceId</span></span> |<span data-ttu-id="a9583-179">Spécifie les id de ressource Azure Automation compte hello de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="a9583-179">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="a9583-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="a9583-180">SubscriptionId</span></span> | <span data-ttu-id="a9583-181">Bonjour abonnement Azure Id (GUID) pour hello compte Automation.</span><span class="sxs-lookup"><span data-stu-id="a9583-181">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="a9583-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="a9583-182">ResourceGroup</span></span> | <span data-ttu-id="a9583-183">Nom du groupe de ressources hello pour hello compte Automation.</span><span class="sxs-lookup"><span data-stu-id="a9583-183">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="a9583-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="a9583-184">ResourceProvider</span></span> | <span data-ttu-id="a9583-185">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="a9583-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="a9583-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="a9583-186">ResourceType</span></span> | <span data-ttu-id="a9583-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="a9583-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="a9583-188">Flux de travail</span><span class="sxs-lookup"><span data-stu-id="a9583-188">Job Streams</span></span>
| <span data-ttu-id="a9583-189">Propriété</span><span class="sxs-lookup"><span data-stu-id="a9583-189">Property</span></span> | <span data-ttu-id="a9583-190">Description</span><span class="sxs-lookup"><span data-stu-id="a9583-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a9583-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="a9583-191">TimeGenerated</span></span> |<span data-ttu-id="a9583-192">Date et heure à l’exécution de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-192">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="a9583-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="a9583-193">RunbookName_s</span></span> |<span data-ttu-id="a9583-194">nom de Hello de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="a9583-194">hello name of hello runbook.</span></span> |
| <span data-ttu-id="a9583-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="a9583-195">Caller_s</span></span> |<span data-ttu-id="a9583-196">Qui a lancé une opération hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-196">Who initiated hello operation.</span></span>  <span data-ttu-id="a9583-197">Les valeurs possibles sont une adresse de messagerie ou un système pour les travaux planifiés.</span><span class="sxs-lookup"><span data-stu-id="a9583-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="a9583-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="a9583-198">StreamType_s</span></span> |<span data-ttu-id="a9583-199">type de Hello du flux de travail.</span><span class="sxs-lookup"><span data-stu-id="a9583-199">hello type of job stream.</span></span> <span data-ttu-id="a9583-200">Les valeurs possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9583-200">Possible values are:</span></span><br><span data-ttu-id="a9583-201">progress</span><span class="sxs-lookup"><span data-stu-id="a9583-201">-Progress</span></span><br><span data-ttu-id="a9583-202">Sortie</span><span class="sxs-lookup"><span data-stu-id="a9583-202">- Output</span></span><br><span data-ttu-id="a9583-203">Avertissement</span><span class="sxs-lookup"><span data-stu-id="a9583-203">- Warning</span></span><br><span data-ttu-id="a9583-204">error</span><span class="sxs-lookup"><span data-stu-id="a9583-204">- Error</span></span><br><span data-ttu-id="a9583-205">DEBUG</span><span class="sxs-lookup"><span data-stu-id="a9583-205">- Debug</span></span><br><span data-ttu-id="a9583-206">- Verbose</span><span class="sxs-lookup"><span data-stu-id="a9583-206">- Verbose</span></span> |
| <span data-ttu-id="a9583-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="a9583-207">Tenant_g</span></span> | <span data-ttu-id="a9583-208">GUID qui identifie le client hello pour hello appelant.</span><span class="sxs-lookup"><span data-stu-id="a9583-208">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="a9583-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="a9583-209">JobId_g</span></span> |<span data-ttu-id="a9583-210">GUID qui est hello Id de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-210">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="a9583-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="a9583-211">ResultType</span></span> |<span data-ttu-id="a9583-212">état de Hello de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-212">hello status of hello runbook job.</span></span>  <span data-ttu-id="a9583-213">Les valeurs possibles sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9583-213">Possible values are:</span></span><br><span data-ttu-id="a9583-214">- In Progress</span><span class="sxs-lookup"><span data-stu-id="a9583-214">- In Progress</span></span> |
| <span data-ttu-id="a9583-215">Catégorie</span><span class="sxs-lookup"><span data-stu-id="a9583-215">Category</span></span> | <span data-ttu-id="a9583-216">Classification de type hello de données.</span><span class="sxs-lookup"><span data-stu-id="a9583-216">Classification of hello type of data.</span></span>  <span data-ttu-id="a9583-217">Pour l’automatisation, la valeur de hello est JobStreams.</span><span class="sxs-lookup"><span data-stu-id="a9583-217">For Automation, hello value is JobStreams.</span></span> |
| <span data-ttu-id="a9583-218">Nom d'opération</span><span class="sxs-lookup"><span data-stu-id="a9583-218">OperationName</span></span> | <span data-ttu-id="a9583-219">Spécifie le type hello d’opération exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="a9583-219">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="a9583-220">Pour l’automatisation, valeur de hello est le travail.</span><span class="sxs-lookup"><span data-stu-id="a9583-220">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="a9583-221">Ressource</span><span class="sxs-lookup"><span data-stu-id="a9583-221">Resource</span></span> | <span data-ttu-id="a9583-222">Nom du compte Automation de hello</span><span class="sxs-lookup"><span data-stu-id="a9583-222">Name of hello Automation account</span></span> |
| <span data-ttu-id="a9583-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="a9583-223">SourceSystem</span></span> | <span data-ttu-id="a9583-224">Comment Analytique de journal collecté des données de hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-224">How Log Analytics collected hello data.</span></span> <span data-ttu-id="a9583-225">Toujours *Azure* pour les diagnostics Azure.</span><span class="sxs-lookup"><span data-stu-id="a9583-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="a9583-226">resultDescription</span><span class="sxs-lookup"><span data-stu-id="a9583-226">ResultDescription</span></span> |<span data-ttu-id="a9583-227">Inclut le flux de sortie hello hello runbook.</span><span class="sxs-lookup"><span data-stu-id="a9583-227">Includes hello output stream from hello runbook.</span></span> |
| <span data-ttu-id="a9583-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="a9583-228">CorrelationId</span></span> |<span data-ttu-id="a9583-229">GUID qui est hello Id de corrélation de tâche du runbook hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-229">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="a9583-230">ResourceId</span><span class="sxs-lookup"><span data-stu-id="a9583-230">ResourceId</span></span> |<span data-ttu-id="a9583-231">Spécifie les id de ressource Azure Automation compte hello de hello runbook.</span><span class="sxs-lookup"><span data-stu-id="a9583-231">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="a9583-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="a9583-232">SubscriptionId</span></span> | <span data-ttu-id="a9583-233">Bonjour abonnement Azure Id (GUID) pour hello compte Automation.</span><span class="sxs-lookup"><span data-stu-id="a9583-233">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="a9583-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="a9583-234">ResourceGroup</span></span> | <span data-ttu-id="a9583-235">Nom du groupe de ressources hello pour hello compte Automation.</span><span class="sxs-lookup"><span data-stu-id="a9583-235">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="a9583-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="a9583-236">ResourceProvider</span></span> | <span data-ttu-id="a9583-237">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="a9583-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="a9583-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="a9583-238">ResourceType</span></span> | <span data-ttu-id="a9583-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="a9583-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="a9583-240">Affichage d’Automation Logs dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="a9583-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="a9583-241">Maintenant que vous avez démarré l’envoi de votre tooLog journaux du travail Automation Analytique, vous allez voir ce que vous pouvez faire avec ces journaux à l’intérieur d’Analytique de journal.</span><span class="sxs-lookup"><span data-stu-id="a9583-241">Now that you have started sending your Automation job logs tooLog Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="a9583-242">journaux de hello toosee, exécutez hello suivant la requête :`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="a9583-242">toosee hello logs, run hello following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="a9583-243">Envoyer un e-mail en cas d’échec ou de suspension d’un travail de runbook</span><span class="sxs-lookup"><span data-stu-id="a9583-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="a9583-244">Un de nos clients supérieure demande concerne hello capacité toosend un message électronique ou un texte lorsqu’une erreur survient avec une tâche de runbook.</span><span class="sxs-lookup"><span data-stu-id="a9583-244">One of our top customer asks is for hello ability toosend an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="a9583-245">la règle toocreate une alerte, vous commencez par créer une recherche de journal pour les runbook hello travaux qui doit appeler l’alerte de hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-245">toocreate an alert rule, you start by creating a log search for hello runbook job records that should invoke hello alert.</span></span>  <span data-ttu-id="a9583-246">Cliquez sur hello **alerte** bouton toocreate et configurer une règle d’alerte hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-246">Click hello **Alert** button toocreate and configure hello alert rule.</span></span>

1. <span data-ttu-id="a9583-247">Dans la page de vue d’ensemble Analytique de journal hello, cliquez sur **recherche de journal**.</span><span class="sxs-lookup"><span data-stu-id="a9583-247">From hello Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="a9583-248">Créer une requête de recherche de journal pour l’alerte en tapant hello suivant recherche dans le champ de requête hello : `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` vous pouvez également regrouper par hello RunbookName à l’aide de :`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="a9583-248">Create a log search query for your alert by typing hello following search into hello query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by hello RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="a9583-249">Si vous avez défini des journaux à partir de plusieurs Automation compte ou abonnement tooyour espace de travail, vous pouvez regrouper vos alertes par abonnement et compte Automation.</span><span class="sxs-lookup"><span data-stu-id="a9583-249">If you have set up logs from more than one Automation account or subscription tooyour workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="a9583-250">Nom du compte Automation peut être dérivé d’un champ de ressource hello dans la recherche de hello de JobLogs.</span><span class="sxs-lookup"><span data-stu-id="a9583-250">Automation account name can be derived from hello Resource field in hello search of JobLogs.</span></span>  
3. <span data-ttu-id="a9583-251">tooopen hello **ajouter une règle d’alerte** , cliquez sur **alerte** en hello haut hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-251">tooopen hello **Add Alert Rule** screen, click **Alert** at hello top of hello page.</span></span> <span data-ttu-id="a9583-252">Pour plus d’informations sur l’alerte de hello tooconfigure hello options, consultez [alertes dans le journal Analytique](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="a9583-252">For further details on hello options tooconfigure hello alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="a9583-253">Rechercher tous les travaux qui ont rencontré des erreurs</span><span class="sxs-lookup"><span data-stu-id="a9583-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="a9583-254">Tooalerting sur les échecs, vous pouvez également trouver lorsqu’une tâche du runbook a une erreur sans fin d’exécution.</span><span class="sxs-lookup"><span data-stu-id="a9583-254">In addition tooalerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="a9583-255">Dans ces cas PowerShell génère un flux d’erreur, mais les erreurs sans fin d’exécution de hello ne pas entraîner votre toosuspend de travail ou d’échouer.</span><span class="sxs-lookup"><span data-stu-id="a9583-255">In these cases PowerShell produces an error stream, but hello non-terminating errors do not cause your job toosuspend or fail.</span></span>    

1. <span data-ttu-id="a9583-256">Dans votre espace de travail Log Analytics, cliquez sur **Recherche de journal**.</span><span class="sxs-lookup"><span data-stu-id="a9583-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="a9583-257">Dans le champ de requête hello, tapez `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` puis cliquez sur **recherche**.</span><span class="sxs-lookup"><span data-stu-id="a9583-257">In hello query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="a9583-258">Afficher les flux de travail pour un travail</span><span class="sxs-lookup"><span data-stu-id="a9583-258">View job streams for a job</span></span>
<span data-ttu-id="a9583-259">Lorsque vous déboguez un travail, vous pouvez également toolook en flux de travail hello.</span><span class="sxs-lookup"><span data-stu-id="a9583-259">When you are debugging a job, you may also want toolook into hello job streams.</span></span>  <span data-ttu-id="a9583-260">Hello requête suivante affiche tous les flux hello pour un seul travail avec GUID 2ebd22ea-e05e-4eb9 - 9d 76-d73cbd4356e0 :</span><span class="sxs-lookup"><span data-stu-id="a9583-260">hello following query shows all hello streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="a9583-261">Afficher l’état de travail historique</span><span class="sxs-lookup"><span data-stu-id="a9583-261">View historical job status</span></span>
<span data-ttu-id="a9583-262">Enfin, vous souhaiterez peut-être toovisualize votre historique des travaux au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="a9583-262">Finally, you may want toovisualize your job history over time.</span></span>  <span data-ttu-id="a9583-263">Vous pouvez utiliser cette toosearch de requête pour état hello des travaux au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="a9583-263">You can use this query toosearch for hello status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="a9583-264">![Graphique d’état de travail historique OMS](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="a9583-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="a9583-265">Résumé</span><span class="sxs-lookup"><span data-stu-id="a9583-265">Summary</span></span>
<span data-ttu-id="a9583-266">En envoyant votre Automation travail état et les flux de données tooLog Analytique, vous pouvez obtenir plus de détails sur état hello de vos tâches Automation par :</span><span class="sxs-lookup"><span data-stu-id="a9583-266">By sending your Automation job status and stream data tooLog Analytics, you can get better insight into hello status of your Automation jobs by:</span></span>
+ <span data-ttu-id="a9583-267">La configuration des alertes toonotify vous lorsqu’il existe un problème</span><span class="sxs-lookup"><span data-stu-id="a9583-267">Setting up alerts toonotify you when there is an issue</span></span>
+ <span data-ttu-id="a9583-268">À l’aide des vues personnalisées et toovisualize de requêtes de recherche vos résultats de runbook, runbook état du travail et d’autres liées indicateurs clés ou les métriques.</span><span class="sxs-lookup"><span data-stu-id="a9583-268">Using custom views and search queries toovisualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="a9583-269">Analytique de journal fournit des tâches d’automatisation tooyour une plus grande visibilité opérationnelle et peut aider aux incidents adresse plus rapides.</span><span class="sxs-lookup"><span data-stu-id="a9583-269">Log Analytics provides greater operational visibility tooyour Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="a9583-270">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a9583-270">Next steps</span></span>
* <span data-ttu-id="a9583-271">toolearn en savoir plus sur la façon dont des journaux d’Analytique de journal, de travail de tooconstruct les requêtes de recherche différente et révision hello Automation voir [connectez-vous recherche Analytique de journal](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="a9583-271">toolearn more about how tooconstruct different search queries and review hello Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="a9583-272">toounderstand comment les messages de sortie et d’erreur toocreate et récupérer à partir de procédures opérationnelles, consultez [Runbook de sortie et des messages](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="a9583-272">toounderstand how toocreate and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="a9583-273">toolearn plus d’informations sur l’exécution du runbook, comment les tâches de runbook toomonitor et d’autres détails techniques, consultez [suivre un travail de runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="a9583-273">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="a9583-274">toolearn en savoir plus sur l’Analytique des journaux OMS et les sources de collection de données, consultez [les données de stockage Azure de collecte dans la vue d’ensemble Analytique de journal](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="a9583-274">toolearn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
