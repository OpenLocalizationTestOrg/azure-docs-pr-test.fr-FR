---
title: "Transférer des données de rapport Azure Automation DSC à OMS Log Analytics | Microsoft Docs"
description: "Cet article montre comment envoyer des données de rapport de configuration de l’état souhaité (DSC) à Microsoft Operations Management Suite Log Analytics, afin de fournir des informations supplémentaires et de simplifier la gestion."
services: automation
documentationcenter: 
author: eslesar
manager: carmonm
editor: tysonn
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/24/2017
ms.author: eslesar
ms.openlocfilehash: 316031c5297a0201c8db4a9e177298c78962c673
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="forward-azure-automation-dsc-reporting-data-to-oms-log-analytics"></a><span data-ttu-id="8ffb9-103">Transférer des données de rapport Azure Automation DSC à OMS Log Analytics</span><span class="sxs-lookup"><span data-stu-id="8ffb9-103">Forward Azure Automation DSC reporting data to OMS Log Analytics</span></span>

<span data-ttu-id="8ffb9-104">Automation peut envoyer les données d’état de nœud DSC à votre espace de travail Microsoft Operations Management Suite (OMS) Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-104">Automation can send DSC node status data to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  
<span data-ttu-id="8ffb9-105">L’état de conformité est visible dans le portail Azure, ou avec PowerShell, pour les nœuds et les ressources DSC individuelles dans les configurations de nœud.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-105">Compliance status is visible in the Azure portal, or with PowerShell, for nodes and for individual DSC resources in node configurations.</span></span> <span data-ttu-id="8ffb9-106">Avec Log Analytics, vous pouvez :</span><span class="sxs-lookup"><span data-stu-id="8ffb9-106">With Log Analytics you can:</span></span>

* <span data-ttu-id="8ffb9-107">Obtenir des informations de conformité pour les nœuds gérés et les ressources individuelles</span><span class="sxs-lookup"><span data-stu-id="8ffb9-107">Get compliance information for managed nodes and individual resources</span></span>
* <span data-ttu-id="8ffb9-108">Déclencher un e-mail ou une alerte en fonction de l’état de conformité</span><span class="sxs-lookup"><span data-stu-id="8ffb9-108">Trigger an email or alert based on compliance status</span></span>
* <span data-ttu-id="8ffb9-109">Écrire des requêtes avancées dans vos nœuds gérés</span><span class="sxs-lookup"><span data-stu-id="8ffb9-109">Write advanced queries across your managed nodes</span></span>
* <span data-ttu-id="8ffb9-110">Mettre en corrélation l’état de conformité dans les comptes Automation</span><span class="sxs-lookup"><span data-stu-id="8ffb9-110">Correlate compliance status across Automation accounts</span></span>
* <span data-ttu-id="8ffb9-111">Visualiser votre historique de conformité associé aux nœuds au fil du temps</span><span class="sxs-lookup"><span data-stu-id="8ffb9-111">Visualize your node compliance history over time</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8ffb9-112">Composants requis</span><span class="sxs-lookup"><span data-stu-id="8ffb9-112">Prerequisites</span></span>

<span data-ttu-id="8ffb9-113">Pour commencer à envoyer vos rapports Automation DSC à Log Analytics, vous devez disposer des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="8ffb9-113">To start sending your Automation DSC reports to Log Analytics, you need:</span></span>

* <span data-ttu-id="8ffb9-114">Version de novembre 2016 ou une version ultérieure d’[Azure PowerShell](/powershell/azure/overview) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-114">The November 2016 or later release of [Azure PowerShell](/powershell/azure/overview) (v2.3.0).</span></span>
* <span data-ttu-id="8ffb9-115">Un compte Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-115">An Azure Automation account.</span></span> <span data-ttu-id="8ffb9-116">Pour plus d’informations, consultez la page [Prise en main d’Azure Automation](automation-offering-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-116">For more information, see [Getting Started with Azure Automation](automation-offering-get-started.md)</span></span>
* <span data-ttu-id="8ffb9-117">Un espace de travail Log Analytics avec une offre de service **Automation & Control**.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-117">A Log Analytics workspace with an **Automation & Control** service offering.</span></span> <span data-ttu-id="8ffb9-118">Pour plus d’informations, consultez l’article [Prise en main de Log Analytics](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-118">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span>
* <span data-ttu-id="8ffb9-119">Au moins un nœud Azure Automation DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-119">At least one Azure Automation DSC node.</span></span> <span data-ttu-id="8ffb9-120">Pour plus d’informations, consultez [Gestion de machines avec Azure Automation DSC](automation-dsc-onboarding.md).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-120">For more information, see [Onboarding machines for management by Azure Automation DSC](automation-dsc-onboarding.md)</span></span> 

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="8ffb9-121">Configurer l’intégration avec Log Analytics</span><span class="sxs-lookup"><span data-stu-id="8ffb9-121">Set up integration with Log Analytics</span></span>

<span data-ttu-id="8ffb9-122">Pour commencer l’importation des données à partir d’Azure Automation DSC dans Log Analytics, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="8ffb9-122">To begin importing data from Azure Automation DSC into Log Analytics, complete the following steps:</span></span>

1. <span data-ttu-id="8ffb9-123">Dans PowerShell, connectez-vous à votre compte Azure.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-123">Log in to your Azure account in PowerShell.</span></span> <span data-ttu-id="8ffb9-124">Consultez [Log in with Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?view=azurermps-4.0.0) (Se connecter avec Azure PowerShell).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-124">See [Log in with Azure PowerShell](https://docs.microsoft.com/en-us/powershell/azure/authenticate-azureps?view=azurermps-4.0.0)</span></span>
1. <span data-ttu-id="8ffb9-125">Obtenez le _ResourceId_ de votre compte Automation en exécutant la commande PowerShell suivante : (si vous avez plusieurs comptes Automation, choisissez le _ResourceID_ du compte que vous souhaitez configurer).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-125">Get the _ResourceId_ of your automation account by running the following PowerShell command: (if you have more than one automation account, choose the _ResourceID_ for the account you want to configure).</span></span>

  ```powershell
  # Find the ResourceId for the Automation Account
  Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"
  ```
1. <span data-ttu-id="8ffb9-126">Obtenez le _ResourceId_ de votre espace de travail Log Analytics en exécutant la commande PowerShell suivante : (si vous avez plusieurs espaces de travail, choisissez le _ResourceID_ de l’espace de travail que vous souhaitez configurer).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-126">Get the _ResourceId_ of your Log Analytics workspace by running the following PowerShell command: (if you have more than one workspace, choose the _ResourceID_ for the workspace you want to configure).</span></span>

  ```powershell
  # Find the ResourceId for the Log Analytics workspace
  Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
  ```
1. <span data-ttu-id="8ffb9-127">Exécutez la commande PowerShell suivante, en remplaçant `<AutomationResourceId>` et `<WorkspaceResourceId>` par les valeurs _ResourceId_ de chacune des étapes précédentes :</span><span class="sxs-lookup"><span data-stu-id="8ffb9-127">Run the following PowerShell command, replacing `<AutomationResourceId>` and `<WorkspaceResourceId>` with the _ResourceId_ values from each of the previous steps:</span></span>

  ```powershell
  Set-AzureRmDiagnosticSetting -ResourceId <AutomationResourceId> -WorkspaceId <WorkspaceResourceId> -Enabled $true -Categories "DscNodeStatus"
  ```

<span data-ttu-id="8ffb9-128">Si vous souhaitez arrêter l’importation de données à partir d’Azure Automation DSC dans Log Analytics, exécutez la commande PowerShell suivante.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-128">If you want to stop importing data from Azure Automation DSC into Log Analytics, run the following PowerShell command.</span></span>

```powershell
Set-AzureRmDiagnosticSetting -ResourceId <AutomationResourceId> -WorkspaceId <WorkspaceResourceId> -Enabled $false -Categories "DscNodeStatus"
```

## <a name="view-the-dsc-logs"></a><span data-ttu-id="8ffb9-129">Afficher les journaux DSC</span><span class="sxs-lookup"><span data-stu-id="8ffb9-129">View the DSC logs</span></span>

<span data-ttu-id="8ffb9-130">Après avoir configuré l’intégration à Log Analytics pour vos données Automation DSC, un bouton **Recherche dans les journaux** s’affiche dans le panneau **Nœuds DSC** de votre compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-130">After you set up integration with Log Analytics for your Automation DSC data, a **Log search** button will appear on the **DSC Nodes** blade of your automation account.</span></span> <span data-ttu-id="8ffb9-131">Cliquez sur le bouton **Recherche dans les journaux** pour afficher les journaux des données de nœud DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-131">Click the **Log Search** button to view the logs for DSC node data.</span></span>

![Bouton Recherche dans les journaux](media/automation-dsc-diagnostics/log-search-button.png)

<span data-ttu-id="8ffb9-133">Le panneau **Recherche dans les journaux** s’ouvre et vous voyez une opération **DscNodeStatusData** pour chaque nœud DSC et une opération **DscResourceStatusData** pour chaque [ressource DSC](https://msdn.microsoft.com/powershell/dsc/resources) appelée dans la configuration Nœud appliquée à ce nœud.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-133">The **Log Search** blade opens, and you see a **DscNodeStatusData** operation for each DSC node, and a **DscResourceStatusData** operation for each [DSC resource](https://msdn.microsoft.com/powershell/dsc/resources) called in the Node configuration applied to that node.</span></span>

<span data-ttu-id="8ffb9-134">L’opération **DscResourceStatusData** contient des informations d’erreur pour les ressources DSC ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-134">The **DscResourceStatusData** operation contains error information for any DSC resources that failed.</span></span>

<span data-ttu-id="8ffb9-135">Cliquez sur chaque opération dans la liste pour afficher les données correspondant à cette opération.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-135">Click each operation in the list to see the data for that operation.</span></span>

<span data-ttu-id="8ffb9-136">Vous pouvez également afficher les journaux en effectuant une recherche dans Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-136">You can also view the logs by [searching in Log Analytics.</span></span> <span data-ttu-id="8ffb9-137">Consultez [Recherche de données à l’aide de recherches de journal](../log-analytics/log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-137">See [Find data using log searches](../log-analytics/log-analytics-log-searches.md).</span></span>
<span data-ttu-id="8ffb9-138">Tapez la requête suivante pour rechercher vos journaux DSC : `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus"`</span><span class="sxs-lookup"><span data-stu-id="8ffb9-138">Type the following query to find your DSC logs: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus"`</span></span>

<span data-ttu-id="8ffb9-139">Vous pouvez également affiner la requête par nom d’opération.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-139">You can also narrow the query by the operation name.</span></span> <span data-ttu-id="8ffb9-140">Par exemple : « Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus" OperationName = "DscNodeStatusData" »</span><span class="sxs-lookup"><span data-stu-id="8ffb9-140">For example: \`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category = "DscNodeStatus" OperationName = "DscNodeStatusData"</span></span>

### <a name="send-an-email-when-a-dsc-compliance-check-fails"></a><span data-ttu-id="8ffb9-141">Envoyer un e-mail si une vérification de la conformité DSC échoue</span><span class="sxs-lookup"><span data-stu-id="8ffb9-141">Send an email when a DSC compliance check fails</span></span>

<span data-ttu-id="8ffb9-142">L’une des demandes majeures de nos clients est de pouvoir envoyer un e-mail ou un message texte lorsqu’une erreur survient avec une configuration DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-142">One of our top customer requests is for the ability to send an email or a text when something goes wrong with a DSC configuration.</span></span>   

<span data-ttu-id="8ffb9-143">Pour créer une règle d’alerte, vous commencez par créer une recherche dans les journaux pour les enregistrements de rapport DSC qui doivent appeler l’alerte.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-143">To create an alert rule, you start by creating a log search for the DSC report records that should invoke the alert.</span></span>  <span data-ttu-id="8ffb9-144">Cliquez sur le bouton **Alerte** pour créer et configurer la règle d’alerte.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-144">Click the **Alert** button to create and configure the alert rule.</span></span>

1. <span data-ttu-id="8ffb9-145">Dans la page de présentation de Log Analytics, cliquez sur **Recherche de journal**.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-145">From the Log Analytics Overview page, click **Log Search**.</span></span>
1. <span data-ttu-id="8ffb9-146">Créez une requête de recherche dans les journaux pour votre alerte en tapant la recherche suivante dans le champ de requête : `Type=AzureDiagnostics Category=DscNodeStatus NodeName_s=DSCTEST1 OperationName=DscNodeStatusData ResultType=Failed`.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-146">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics Category=DscNodeStatus NodeName_s=DSCTEST1 OperationName=DscNodeStatusData ResultType=Failed`</span></span>

  <span data-ttu-id="8ffb9-147">Si vous avez configuré des journaux dans votre espace de travail à partir de plusieurs abonnements ou comptes Automation, vous pouvez également regrouper vos alertes par abonnement ou par compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-147">If you have set up logs from more than one Automation account or subscription to your workspace, you can group your alerts by subscription and Automation account.</span></span>  
  <span data-ttu-id="8ffb9-148">Le nom du compte Automation peut être dérivé du champ Ressource dans la recherche de DscNodeStatusData.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-148">Automation account name can be derived from the Resource field in the search of DscNodeStatusData.</span></span>  
1. <span data-ttu-id="8ffb9-149">Cliquez sur **Alerte** en haut de la page pour ouvrir l’écran **Ajouter une règle d’alerte**.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-149">To open the **Add Alert Rule** screen, click **Alert** at the top of the page.</span></span> <span data-ttu-id="8ffb9-150">Pour plus d’informations sur les options de configuration de l’alerte, consultez [Comprendre les alertes dans Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-150">For more information on the options to configure the alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-failed-dsc-resources-across-all-nodes"></a><span data-ttu-id="8ffb9-151">Rechercher les ressources DSC ayant échoué dans tous les nœuds</span><span class="sxs-lookup"><span data-stu-id="8ffb9-151">Find failed DSC resources across all nodes</span></span>

<span data-ttu-id="8ffb9-152">L’un des avantages de l’utilisation de Log Analytics est que vous pouvez rechercher les vérifications ayant échoué dans les nœuds.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-152">One advantage of using Log Analytics is that you can search for failed checks across nodes.</span></span>
<span data-ttu-id="8ffb9-153">Pour rechercher toutes les instances de ressources DSC ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-153">To find all instances of DSC resources that failed.</span></span>

1. <span data-ttu-id="8ffb9-154">Dans la page de présentation de Log Analytics, cliquez sur **Recherche de journal**.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-154">From the Log Analytics Overview page, click **Log Search**.</span></span>
1. <span data-ttu-id="8ffb9-155">Créez une requête de recherche dans les journaux pour votre alerte en tapant la recherche suivante dans le champ de requête : `Type=AzureDiagnostics Category=DscNodeStatus OperationName=DscResourceStatusData ResultType=Failed`.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-155">Create a log search query for your alert by typing the following search into the query field:  `Type=AzureDiagnostics Category=DscNodeStatus OperationName=DscResourceStatusData ResultType=Failed`</span></span>

### <a name="view-historical-dsc-node-status"></a><span data-ttu-id="8ffb9-156">Afficher l’état de nœud DSC historique</span><span class="sxs-lookup"><span data-stu-id="8ffb9-156">View historical DSC node status</span></span>

<span data-ttu-id="8ffb9-157">Enfin, vous pouvez souhaiter visualiser l’historique de l’état de votre nœud DSC au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-157">Finally, you may want to visualize your DSC node status history over time.</span></span>  
<span data-ttu-id="8ffb9-158">Vous pouvez utiliser cette requête pour rechercher l’état de votre nœud DSC au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-158">You can use this query to search for the status of your DSC node status over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=DscNodeStatus NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  

<span data-ttu-id="8ffb9-159">Cela affichera un graphique de l’état du nœud au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-159">This will display a chart of the node status over time.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="8ffb9-160">Enregistrements Log Analytics</span><span class="sxs-lookup"><span data-stu-id="8ffb9-160">Log Analytics records</span></span>

<span data-ttu-id="8ffb9-161">La fonction de diagnostic d’Azure Automation crée deux catégories d’enregistrements dans Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-161">Diagnostics from Azure Automation creates two categories of records in Log Analytics.</span></span>

### <a name="dscnodestatusdata"></a><span data-ttu-id="8ffb9-162">DscNodeStatusData</span><span class="sxs-lookup"><span data-stu-id="8ffb9-162">DscNodeStatusData</span></span>

| <span data-ttu-id="8ffb9-163">Propriété</span><span class="sxs-lookup"><span data-stu-id="8ffb9-163">Property</span></span> | <span data-ttu-id="8ffb9-164">Description</span><span class="sxs-lookup"><span data-stu-id="8ffb9-164">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8ffb9-165">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="8ffb9-165">TimeGenerated</span></span> |<span data-ttu-id="8ffb9-166">Date et heure d’exécution de la vérification de conformité.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-166">Date and time when the compliance check ran.</span></span> |
| <span data-ttu-id="8ffb9-167">Nom d'opération</span><span class="sxs-lookup"><span data-stu-id="8ffb9-167">OperationName</span></span> |<span data-ttu-id="8ffb9-168">DscNodeStatusData</span><span class="sxs-lookup"><span data-stu-id="8ffb9-168">DscNodeStatusData</span></span> |
| <span data-ttu-id="8ffb9-169">ResultType</span><span class="sxs-lookup"><span data-stu-id="8ffb9-169">ResultType</span></span> |<span data-ttu-id="8ffb9-170">Indique si le nœud est conforme.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-170">Whether the node is compliant.</span></span> |
| <span data-ttu-id="8ffb9-171">NodeName_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-171">NodeName_s</span></span> |<span data-ttu-id="8ffb9-172">Le nom du nœud géré.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-172">The name of the managed node.</span></span> |
| <span data-ttu-id="8ffb9-173">NodeComplianceStatus_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-173">NodeComplianceStatus_s</span></span> |<span data-ttu-id="8ffb9-174">Indique si le nœud est conforme.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-174">Whether the node is compliant.</span></span> |
| <span data-ttu-id="8ffb9-175">DscReportStatus</span><span class="sxs-lookup"><span data-stu-id="8ffb9-175">DscReportStatus</span></span> |<span data-ttu-id="8ffb9-176">Indique si la vérification de conformité a été correctement exécutée.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-176">Whether the compliance check ran successfully.</span></span> |
| <span data-ttu-id="8ffb9-177">ConfigurationMode</span><span class="sxs-lookup"><span data-stu-id="8ffb9-177">ConfigurationMode</span></span> | <span data-ttu-id="8ffb9-178">La façon dont la configuration est appliquée au nœud.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-178">How the configuration is applied to the node.</span></span> <span data-ttu-id="8ffb9-179">Les valeurs possibles sont __« ApplyOnly »__,__« ApplyandMonitor »__ et __« ApplyandAutoCorrect »__.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-179">Possible values are __"ApplyOnly"__,__"ApplyandMonitior"__, and __"ApplyandAutoCorrect"__.</span></span> <ul><li><span data-ttu-id="8ffb9-180">__ApplyOnly__ : DSC applique la configuration et ne fait rien de plus, sauf si une nouvelle configuration est envoyée au nœud cible ou lorsqu’une nouvelle configuration est extraite d’un serveur.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-180">__ApplyOnly__: DSC applies the configuration and does nothing further unless a new configuration is pushed to the target node or when a new configuration is pulled from a server.</span></span> <span data-ttu-id="8ffb9-181">Après l’application initiale d’une nouvelle configuration, DSC ne vérifie pas l’écart par rapport à un état configuré précédemment.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-181">After initial application of a new configuration, DSC does not check for drift from a previously configured state.</span></span> <span data-ttu-id="8ffb9-182">DSC tente d’appliquer la configuration jusqu’à ce que l’opération réussisse avant que la valeur __ApplyOnly__ prenne effet.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-182">DSC attempts to apply the configuration until it is successful before __ApplyOnly__ takes effect.</span></span> </li><li> <span data-ttu-id="8ffb9-183">__ApplyAndMonitor__ : il s’agit de la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-183">__ApplyAndMonitor__: This is the default value.</span></span> <span data-ttu-id="8ffb9-184">Le gestionnaire de configuration locale applique toutes les nouvelles configurations.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-184">The LCM applies any new configurations.</span></span> <span data-ttu-id="8ffb9-185">Après l’application initiale d’une nouvelle configuration, si le nœud cible s’écarte de l’état désiré, DSC signale l’écart dans les journaux.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-185">After initial application of a new configuration, if the target node drifts from the desired state, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="8ffb9-186">DSC tente d’appliquer la configuration jusqu’à ce que l’opération réussisse avant que la valeur __ApplyAndMonitor__ prenne effet.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-186">DSC attempts to apply the configuration until it is successful before __ApplyAndMonitor__ takes effect.</span></span></li><li><span data-ttu-id="8ffb9-187">__ApplyAndAutoCorrect__ : DSC applique toutes les nouvelles configurations.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-187">__ApplyAndAutoCorrect__: DSC applies any new configurations.</span></span> <span data-ttu-id="8ffb9-188">Après l’application initiale d’une nouvelle configuration, si le nœud cible s’écarte de l’état désiré, DSC signale l’écart dans les journaux puis applique à nouveau la configuration actuelle.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-188">After initial application of a new configuration, if the target node drifts from the desired state, DSC reports the discrepancy in logs, and then reapplies the current configuration.</span></span></li></ul> |
| <span data-ttu-id="8ffb9-189">HostName_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-189">HostName_s</span></span> | <span data-ttu-id="8ffb9-190">Le nom du nœud géré.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-190">The name of the managed node.</span></span> |
| <span data-ttu-id="8ffb9-191">IPAddress</span><span class="sxs-lookup"><span data-stu-id="8ffb9-191">IPAddress</span></span> | <span data-ttu-id="8ffb9-192">L’adresse IPv4 du nœud géré.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-192">The IPv4 address of the managed node.</span></span> |
| <span data-ttu-id="8ffb9-193">Catégorie</span><span class="sxs-lookup"><span data-stu-id="8ffb9-193">Category</span></span> | <span data-ttu-id="8ffb9-194">DscNodeStatus</span><span class="sxs-lookup"><span data-stu-id="8ffb9-194">DscNodeStatus</span></span> |
| <span data-ttu-id="8ffb9-195">Ressource</span><span class="sxs-lookup"><span data-stu-id="8ffb9-195">Resource</span></span> | <span data-ttu-id="8ffb9-196">Le nom du compte Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-196">The name of the Azure Automation account.</span></span> |
| <span data-ttu-id="8ffb9-197">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="8ffb9-197">Tenant_g</span></span> | <span data-ttu-id="8ffb9-198">GUID identifiant le locataire pour l’appelant.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-198">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="8ffb9-199">NodeId_g</span><span class="sxs-lookup"><span data-stu-id="8ffb9-199">NodeId_g</span></span> |<span data-ttu-id="8ffb9-200">GUID qui identifie le nœud géré.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-200">GUID that identifies the managed node.</span></span> |
| <span data-ttu-id="8ffb9-201">DscReportId_g</span><span class="sxs-lookup"><span data-stu-id="8ffb9-201">DscReportId_g</span></span> |<span data-ttu-id="8ffb9-202">GUID qui identifie le rapport.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-202">GUID that identifies the report.</span></span> |
| <span data-ttu-id="8ffb9-203">LastSeenTime_t</span><span class="sxs-lookup"><span data-stu-id="8ffb9-203">LastSeenTime_t</span></span> |<span data-ttu-id="8ffb9-204">Date et heure auxquelles le rapport a été consulté pour la dernière fois.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-204">Date and time when the report was last viewed.</span></span> |
| <span data-ttu-id="8ffb9-205">ReportStartTime_t</span><span class="sxs-lookup"><span data-stu-id="8ffb9-205">ReportStartTime_t</span></span> |<span data-ttu-id="8ffb9-206">Date et heure auxquelles le rapport a été commencé.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-206">Date and time when the report was started.</span></span> |
| <span data-ttu-id="8ffb9-207">ReportEndTime_t</span><span class="sxs-lookup"><span data-stu-id="8ffb9-207">ReportEndTime_t</span></span> |<span data-ttu-id="8ffb9-208">Date et heure auxquelles le rapport a été terminé.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-208">Date and time when the report completed.</span></span> |
| <span data-ttu-id="8ffb9-209">NumberOfResources_d</span><span class="sxs-lookup"><span data-stu-id="8ffb9-209">NumberOfResources_d</span></span> |<span data-ttu-id="8ffb9-210">Le nombre de ressources DSC appelées dans la configuration appliquée au nœud.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-210">The number of DSC resources called in the configuration applied to the node.</span></span> |
| <span data-ttu-id="8ffb9-211">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="8ffb9-211">SourceSystem</span></span> | <span data-ttu-id="8ffb9-212">Manière dont Log Analytics a collecté les données.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-212">How Log Analytics collected the data.</span></span> <span data-ttu-id="8ffb9-213">Toujours *Azure* pour les diagnostics Azure.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-213">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="8ffb9-214">ResourceId</span><span class="sxs-lookup"><span data-stu-id="8ffb9-214">ResourceId</span></span> |<span data-ttu-id="8ffb9-215">Spécifie le compte Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-215">Specifies the Azure Automation account.</span></span> |
| <span data-ttu-id="8ffb9-216">resultDescription</span><span class="sxs-lookup"><span data-stu-id="8ffb9-216">ResultDescription</span></span> | <span data-ttu-id="8ffb9-217">La description de cette opération.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-217">The description for this operation.</span></span> |
| <span data-ttu-id="8ffb9-218">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="8ffb9-218">SubscriptionId</span></span> | <span data-ttu-id="8ffb9-219">ID d’abonnement Azure (GUID) du compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-219">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="8ffb9-220">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="8ffb9-220">ResourceGroup</span></span> | <span data-ttu-id="8ffb9-221">Nom du groupe de ressources du compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-221">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="8ffb9-222">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="8ffb9-222">ResourceProvider</span></span> | <span data-ttu-id="8ffb9-223">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="8ffb9-223">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="8ffb9-224">ResourceType</span><span class="sxs-lookup"><span data-stu-id="8ffb9-224">ResourceType</span></span> | <span data-ttu-id="8ffb9-225">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="8ffb9-225">AUTOMATIONACCOUNTS</span></span> |
| <span data-ttu-id="8ffb9-226">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="8ffb9-226">CorrelationId</span></span> |<span data-ttu-id="8ffb9-227">GUID représentant l’ID de corrélation du rapport de conformité.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-227">GUID that is the Correlation Id of the compliance report.</span></span> |

### <a name="dscresourcestatusdata"></a><span data-ttu-id="8ffb9-228">DscResourceStatusData</span><span class="sxs-lookup"><span data-stu-id="8ffb9-228">DscResourceStatusData</span></span>

| <span data-ttu-id="8ffb9-229">Propriété</span><span class="sxs-lookup"><span data-stu-id="8ffb9-229">Property</span></span> | <span data-ttu-id="8ffb9-230">Description</span><span class="sxs-lookup"><span data-stu-id="8ffb9-230">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8ffb9-231">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="8ffb9-231">TimeGenerated</span></span> |<span data-ttu-id="8ffb9-232">Date et heure d’exécution de la vérification de conformité.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-232">Date and time when the compliance check ran.</span></span> |
| <span data-ttu-id="8ffb9-233">Nom d'opération</span><span class="sxs-lookup"><span data-stu-id="8ffb9-233">OperationName</span></span> |<span data-ttu-id="8ffb9-234">DscResourceStatusData</span><span class="sxs-lookup"><span data-stu-id="8ffb9-234">DscResourceStatusData</span></span>|
| <span data-ttu-id="8ffb9-235">ResultType</span><span class="sxs-lookup"><span data-stu-id="8ffb9-235">ResultType</span></span> |<span data-ttu-id="8ffb9-236">Indique si la ressource est conforme.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-236">Whether the resource is compliant.</span></span> |
| <span data-ttu-id="8ffb9-237">NodeName_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-237">NodeName_s</span></span> |<span data-ttu-id="8ffb9-238">Le nom du nœud géré.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-238">The name of the managed node.</span></span> |
| <span data-ttu-id="8ffb9-239">Catégorie</span><span class="sxs-lookup"><span data-stu-id="8ffb9-239">Category</span></span> | <span data-ttu-id="8ffb9-240">DscNodeStatus</span><span class="sxs-lookup"><span data-stu-id="8ffb9-240">DscNodeStatus</span></span> |
| <span data-ttu-id="8ffb9-241">Ressource</span><span class="sxs-lookup"><span data-stu-id="8ffb9-241">Resource</span></span> | <span data-ttu-id="8ffb9-242">Le nom du compte Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-242">The name of the Azure Automation account.</span></span> |
| <span data-ttu-id="8ffb9-243">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="8ffb9-243">Tenant_g</span></span> | <span data-ttu-id="8ffb9-244">GUID identifiant le locataire pour l’appelant.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-244">GUID that identifies the tenant for the Caller.</span></span> |
| <span data-ttu-id="8ffb9-245">NodeId_g</span><span class="sxs-lookup"><span data-stu-id="8ffb9-245">NodeId_g</span></span> |<span data-ttu-id="8ffb9-246">GUID qui identifie le nœud géré.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-246">GUID that identifies the managed node.</span></span> |
| <span data-ttu-id="8ffb9-247">DscReportId_g</span><span class="sxs-lookup"><span data-stu-id="8ffb9-247">DscReportId_g</span></span> |<span data-ttu-id="8ffb9-248">GUID qui identifie le rapport.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-248">GUID that identifies the report.</span></span> |
| <span data-ttu-id="8ffb9-249">DscResourceId_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-249">DscResourceId_s</span></span> |<span data-ttu-id="8ffb9-250">Le nom de l’instance de ressource DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-250">The name of the DSC resource instance.</span></span> |
| <span data-ttu-id="8ffb9-251">DscResourceName_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-251">DscResourceName_s</span></span> |<span data-ttu-id="8ffb9-252">Le nom de la ressource DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-252">The name of the DSC resource.</span></span> |
| <span data-ttu-id="8ffb9-253">DscResourceStatus_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-253">DscResourceStatus_s</span></span> |<span data-ttu-id="8ffb9-254">Indique si la ressource DSC est conforme.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-254">Whether the DSC resource is in compliance.</span></span> |
| <span data-ttu-id="8ffb9-255">DscModuleName_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-255">DscModuleName_s</span></span> |<span data-ttu-id="8ffb9-256">Le nom du module PowerShell qui contient la ressource DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-256">The name of the PowerShell module that contains the DSC resource.</span></span> |
| <span data-ttu-id="8ffb9-257">DscModuleVersion_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-257">DscModuleVersion_s</span></span> |<span data-ttu-id="8ffb9-258">La version du module PowerShell qui contient la ressource DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-258">The version of the PowerShell module that contains the DSC resource.</span></span> |
| <span data-ttu-id="8ffb9-259">DscConfigurationName_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-259">DscConfigurationName_s</span></span> |<span data-ttu-id="8ffb9-260">Le nom de la configuration appliquée au nœud.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-260">The name of the configuration applied to the node.</span></span> |
| <span data-ttu-id="8ffb9-261">ErrorCode_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-261">ErrorCode_s</span></span> | <span data-ttu-id="8ffb9-262">Le code d’erreur en cas d’échec de la ressource.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-262">The error code if the resource failed.</span></span> |
| <span data-ttu-id="8ffb9-263">ErrorMessage_s</span><span class="sxs-lookup"><span data-stu-id="8ffb9-263">ErrorMessage_s</span></span> |<span data-ttu-id="8ffb9-264">Le message d’erreur en cas d’échec de la ressource.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-264">The error message if the resource failed.</span></span> |
| <span data-ttu-id="8ffb9-265">DscResourceDuration_d</span><span class="sxs-lookup"><span data-stu-id="8ffb9-265">DscResourceDuration_d</span></span> |<span data-ttu-id="8ffb9-266">La durée, en secondes, d’exécution de la ressource DSC.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-266">The time, in seconds, that the DSC resource ran.</span></span> |
| <span data-ttu-id="8ffb9-267">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="8ffb9-267">SourceSystem</span></span> | <span data-ttu-id="8ffb9-268">Manière dont Log Analytics a collecté les données.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-268">How Log Analytics collected the data.</span></span> <span data-ttu-id="8ffb9-269">Toujours *Azure* pour les diagnostics Azure.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-269">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="8ffb9-270">ResourceId</span><span class="sxs-lookup"><span data-stu-id="8ffb9-270">ResourceId</span></span> |<span data-ttu-id="8ffb9-271">Spécifie le compte Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-271">Specifies the Azure Automation account.</span></span> |
| <span data-ttu-id="8ffb9-272">resultDescription</span><span class="sxs-lookup"><span data-stu-id="8ffb9-272">ResultDescription</span></span> | <span data-ttu-id="8ffb9-273">La description de cette opération.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-273">The description for this operation.</span></span> |
| <span data-ttu-id="8ffb9-274">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="8ffb9-274">SubscriptionId</span></span> | <span data-ttu-id="8ffb9-275">ID d’abonnement Azure (GUID) du compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-275">The Azure subscription Id (GUID) for the Automation account.</span></span> |
| <span data-ttu-id="8ffb9-276">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="8ffb9-276">ResourceGroup</span></span> | <span data-ttu-id="8ffb9-277">Nom du groupe de ressources du compte Automation.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-277">Name of the resource group for the Automation account.</span></span> |
| <span data-ttu-id="8ffb9-278">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="8ffb9-278">ResourceProvider</span></span> | <span data-ttu-id="8ffb9-279">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="8ffb9-279">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="8ffb9-280">ResourceType</span><span class="sxs-lookup"><span data-stu-id="8ffb9-280">ResourceType</span></span> | <span data-ttu-id="8ffb9-281">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="8ffb9-281">AUTOMATIONACCOUNTS</span></span> |
| <span data-ttu-id="8ffb9-282">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="8ffb9-282">CorrelationId</span></span> |<span data-ttu-id="8ffb9-283">GUID représentant l’ID de corrélation du rapport de conformité.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-283">GUID that is the Correlation Id of the compliance report.</span></span> |

## <a name="summary"></a><span data-ttu-id="8ffb9-284">Résumé</span><span class="sxs-lookup"><span data-stu-id="8ffb9-284">Summary</span></span>

<span data-ttu-id="8ffb9-285">L’envoi de vos données Automation DSC à Log Analytics vous permet d’obtenir plus d’informations sur l’état de vos nœuds Automation DSC en :</span><span class="sxs-lookup"><span data-stu-id="8ffb9-285">By sending your Automation DSC data to Log Analytics, you can get better insight into the status of your Automation DSC nodes by:</span></span>

* <span data-ttu-id="8ffb9-286">Configurant des alertes pour vous avertir lorsqu’il y a un problème</span><span class="sxs-lookup"><span data-stu-id="8ffb9-286">Setting up alerts to notify you when there is an issue</span></span>
* <span data-ttu-id="8ffb9-287">Utilisant des vues et des requêtes de recherche personnalisées pour visualiser les résultats de votre runbook, l’état du travail de runbook et d’autres indicateurs ou mesures clés associées.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-287">Using custom views and search queries to visualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="8ffb9-288">Log Analytics offre une plus grande visibilité opérationnelle sur vos données Automation DSC et peut vous aider à traiter les incidents plus rapidement.</span><span class="sxs-lookup"><span data-stu-id="8ffb9-288">Log Analytics provides greater operational visibility to your Automation DSC data and can help address incidents more quickly.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="8ffb9-289">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8ffb9-289">Next steps</span></span>

* <span data-ttu-id="8ffb9-290">Pour plus d’informations sur la façon de construire différentes requêtes de recherche et sur la manière de consulter les journaux Automation DSC avec Log Analytics, consultez [Recherche de données à l’aide de recherches de journal](../log-analytics/log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-290">To learn more about how to construct different search queries and review the Automation DSC logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="8ffb9-291">Pour en savoir plus sur l’utilisation d’Azure Automation DSC, consultez [Prise en main d’Azure Automation DSC](automation-dsc-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="8ffb9-291">To learn more about using Azure Automation DSC, see [Getting started with Azure Automation DSC](automation-dsc-getting-started.md)</span></span>
* <span data-ttu-id="8ffb9-292">Pour en savoir plus sur OMS Log Analytics et sur les sources de collecte de données, consultez [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="8ffb9-292">To learn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>

