---
title: tooalerts aaaResponses dans Analytique des journaux OMS | Documents Microsoft
description: "Alertes dans le journal Analytique identifier des informations importantes dans votre référentiel OMS et peuvent proactive vous avertir des problèmes ou appeler des actions tooattempt toocorrect les.  Cet article décrit comment toocreate une règle d’alerte et des actions différentes informations hello qu’ils peuvent prendre."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: 6cfd2a46-b6a2-4f79-a67b-08ce488f9a91
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/28/2017
ms.author: bwren
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: d24bb726a96e7143985f111c0599dc4e7898b4f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="add-actions-tooalert-rules-in-log-analytics"></a><span data-ttu-id="0147d-104">Ajouter des règles de tooalert d’actions dans le journal Analytique</span><span class="sxs-lookup"><span data-stu-id="0147d-104">Add actions tooalert rules in Log Analytics</span></span>
<span data-ttu-id="0147d-105">Lorsqu’un [alerte est créée dans le journal Analytique](log-analytics-alerts.md), vous pouvez hello [une règle d’alerte hello configuration](log-analytics-alerts.md) tooperform une ou plusieurs actions.</span><span class="sxs-lookup"><span data-stu-id="0147d-105">When an [alert is created in Log Analytics](log-analytics-alerts.md), you have hello option of [configuring hello alert rule](log-analytics-alerts.md) tooperform one or more actions.</span></span>  <span data-ttu-id="0147d-106">Cet article décrit hello différentes actions qui sont disponibles et les détails sur la configuration de chaque type.</span><span class="sxs-lookup"><span data-stu-id="0147d-106">This article describes hello different actions that are available and details on configuring each kind.</span></span>

| <span data-ttu-id="0147d-107">Action</span><span class="sxs-lookup"><span data-stu-id="0147d-107">Action</span></span> | <span data-ttu-id="0147d-108">Description</span><span class="sxs-lookup"><span data-stu-id="0147d-108">Description</span></span> |
|:--|:--|
| [<span data-ttu-id="0147d-109">E-mail</span><span class="sxs-lookup"><span data-stu-id="0147d-109">Email</span></span>](#email-actions) | <span data-ttu-id="0147d-110">Envoyer un message électronique avec les détails de hello de tooone d’alerte hello ou autres destinataires.</span><span class="sxs-lookup"><span data-stu-id="0147d-110">Send an e-mail with hello details of hello alert tooone or more recipients.</span></span> |
| [<span data-ttu-id="0147d-111">Webhook</span><span class="sxs-lookup"><span data-stu-id="0147d-111">Webhook</span></span>](#webhook-actions) | <span data-ttu-id="0147d-112">Appelez un processus externe par le biais d’une simple requête HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="0147d-112">Invoke an external process through a single HTTP POST request.</span></span> |
| [<span data-ttu-id="0147d-113">Runbook</span><span class="sxs-lookup"><span data-stu-id="0147d-113">Runbook</span></span>](#runbook-actions) | <span data-ttu-id="0147d-114">Démarrez un runbook dans Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="0147d-114">Start a runbook in Azure Automation.</span></span> |


## <a name="email-actions"></a><span data-ttu-id="0147d-115">Actions de messagerie</span><span class="sxs-lookup"><span data-stu-id="0147d-115">Email actions</span></span>
<span data-ttu-id="0147d-116">Les actions par courrier électronique envoient un e-mail avec les détails de hello de tooone d’alerte hello ou autres destinataires.</span><span class="sxs-lookup"><span data-stu-id="0147d-116">Email actions send an e-mail with hello details of hello alert tooone or more recipients.</span></span>  <span data-ttu-id="0147d-117">Vous pouvez spécifier le sujet hello de messagerie de hello, mais son contenu est un format standard construit par Analytique de journal.</span><span class="sxs-lookup"><span data-stu-id="0147d-117">You can specify hello subject of hello mail, but it's content is a standard format constructed by Log Analytics.</span></span>  <span data-ttu-id="0147d-118">Il inclut des informations de synthèse, telles que nom de hello d’alerte de hello dans toodetails Ajout d’enregistrements tooten retournée par la recherche de journal hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-118">It includes summary information such as hello name of hello alert in addition toodetails of up tooten records returned by hello log search.</span></span>  <span data-ttu-id="0147d-119">Il inclut également une recherche de journal de liaison tooa dans Analytique de journal qui retournera le jeu complet de hello d’enregistrements à partir de cette requête.</span><span class="sxs-lookup"><span data-stu-id="0147d-119">It also includes a link tooa log search in Log Analytics that will return hello entire set of records from that query.</span></span>   <span data-ttu-id="0147d-120">expéditeur Hello de messagerie de hello est *Microsoft Operations Management Suite Team &lt; noreply@oms.microsoft.com &gt;* .</span><span class="sxs-lookup"><span data-stu-id="0147d-120">hello sender of hello mail is *Microsoft Operations Management Suite Team &lt;noreply@oms.microsoft.com&gt;*.</span></span> 

<span data-ttu-id="0147d-121">Les actions de messagerie nécessitent propriétés hello Bonjour tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="0147d-121">Email actions require hello properties in hello following table.</span></span>

| <span data-ttu-id="0147d-122">Propriété</span><span class="sxs-lookup"><span data-stu-id="0147d-122">Property</span></span> | <span data-ttu-id="0147d-123">Description</span><span class="sxs-lookup"><span data-stu-id="0147d-123">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0147d-124">Objet</span><span class="sxs-lookup"><span data-stu-id="0147d-124">Subject</span></span> |<span data-ttu-id="0147d-125">L’objet par courrier électronique hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-125">Subject in hello email.</span></span>  <span data-ttu-id="0147d-126">Vous ne pouvez pas modifier le corps hello de messagerie de hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-126">You cannot modify hello body of hello mail.</span></span> |
| <span data-ttu-id="0147d-127">Destinataires</span><span class="sxs-lookup"><span data-stu-id="0147d-127">Recipients</span></span> |<span data-ttu-id="0147d-128">Adresses de tous les destinataires de l’e-mail.</span><span class="sxs-lookup"><span data-stu-id="0147d-128">Addresses of all e-mail recipients.</span></span>  <span data-ttu-id="0147d-129">Si vous spécifiez plusieurs adresses, puis les adresses hello séparé par un point-virgule ( ;).</span><span class="sxs-lookup"><span data-stu-id="0147d-129">If you specify more than one address, then separate hello addresses with a semicolon (;).</span></span> |


## <a name="webhook-actions"></a><span data-ttu-id="0147d-130">Actions de webhook</span><span class="sxs-lookup"><span data-stu-id="0147d-130">Webhook actions</span></span>

<span data-ttu-id="0147d-131">Les actions Webhook permettent tooinvoke un processus externe via une demande HTTP POST unique.</span><span class="sxs-lookup"><span data-stu-id="0147d-131">Webhook actions allow you tooinvoke an external process through a single HTTP POST request.</span></span>  <span data-ttu-id="0147d-132">service Hello appelé doit prendre en charge des webhooks et déterminer la façon dont il va utiliser une charge utile qu’il reçoit.</span><span class="sxs-lookup"><span data-stu-id="0147d-132">hello service being called should support webhooks and determine how it will use any payload it receives.</span></span>  <span data-ttu-id="0147d-133">Vous pouvez également appeler une API REST qui ne prennent en charge spécifiquement webhooks tant que la demande de hello est dans un format que hello que comprend des API.</span><span class="sxs-lookup"><span data-stu-id="0147d-133">You could also call a REST API that doesn't specifically support webhooks as long as hello request is in a format that hello API understands.</span></span>  <span data-ttu-id="0147d-134">Exemples d’utilisation d’un webhook dans l’alerte de tooan réponse envoient un message [Slack](http://slack.com) ou la création d’un incident dans [PagerDuty](http://pagerduty.com/).</span><span class="sxs-lookup"><span data-stu-id="0147d-134">Examples of using a webhook in response tooan alert are sending a message in [Slack](http://slack.com) or creating an incident in [PagerDuty](http://pagerduty.com/).</span></span>  <span data-ttu-id="0147d-135">Une procédure pas à pas complète de la création d’une règle d’alerte avec une marge de toocall webhook est disponible à l’adresse [Webhooks dans les alertes d’Analytique de journal](log-analytics-alerts-webhooks.md).</span><span class="sxs-lookup"><span data-stu-id="0147d-135">A complete walkthrough of creating an alert rule with a webhook toocall Slack is available at [Webhooks in Log Analytics alerts](log-analytics-alerts-webhooks.md).</span></span>

<span data-ttu-id="0147d-136">Les actions Webhook requièrent des propriétés hello Bonjour tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="0147d-136">Webhook actions require hello properties in hello following table.</span></span>

| <span data-ttu-id="0147d-137">Propriété</span><span class="sxs-lookup"><span data-stu-id="0147d-137">Property</span></span> | <span data-ttu-id="0147d-138">Description</span><span class="sxs-lookup"><span data-stu-id="0147d-138">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0147d-139">URL du webhook</span><span class="sxs-lookup"><span data-stu-id="0147d-139">Webhook URL</span></span> |<span data-ttu-id="0147d-140">URL de Hello de hello webhook.</span><span class="sxs-lookup"><span data-stu-id="0147d-140">hello URL of hello webhook.</span></span> |
| <span data-ttu-id="0147d-141">Charge utile JSON personnalisée</span><span class="sxs-lookup"><span data-stu-id="0147d-141">Custom JSON payload</span></span> |<span data-ttu-id="0147d-142">Toosend de charge utile personnalisée avec hello webhook.</span><span class="sxs-lookup"><span data-stu-id="0147d-142">Custom payload toosend with hello webhook.</span></span>  <span data-ttu-id="0147d-143">Voir les détails ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="0147d-143">See below for details.</span></span> |


<span data-ttu-id="0147d-144">Webhooks inclure une URL et une charge utile au format JSON qui sont des données hello envoyé toohello des service externe.</span><span class="sxs-lookup"><span data-stu-id="0147d-144">Webhooks include a URL and a payload formatted in JSON that is hello data sent toohello external service.</span></span>  <span data-ttu-id="0147d-145">Par défaut, la charge utile de hello inclut les valeurs hello Bonjour tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="0147d-145">By default, hello payload will include hello values in hello following table.</span></span>  <span data-ttu-id="0147d-146">Vous pouvez choisir tooreplace cette charge utile avec un personnalisé de votre choix.</span><span class="sxs-lookup"><span data-stu-id="0147d-146">You can choose tooreplace this payload with a custom one of your own.</span></span>  <span data-ttu-id="0147d-147">Dans ce cas vous pouvez utiliser des variables de hello dans la table de hello pour chacun des hello paramètres tooinclude leur valeur dans votre charge utile personnalisée.</span><span class="sxs-lookup"><span data-stu-id="0147d-147">In that case you can use hello variables in hello table for each of hello parameters tooinclude their value in your custom payload.</span></span>

| <span data-ttu-id="0147d-148">Paramètre</span><span class="sxs-lookup"><span data-stu-id="0147d-148">Parameter</span></span> | <span data-ttu-id="0147d-149">Variable</span><span class="sxs-lookup"><span data-stu-id="0147d-149">Variable</span></span> | <span data-ttu-id="0147d-150">Description</span><span class="sxs-lookup"><span data-stu-id="0147d-150">Description</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="0147d-151">AlertRuleName</span><span class="sxs-lookup"><span data-stu-id="0147d-151">AlertRuleName</span></span> |<span data-ttu-id="0147d-152">#alertrulename</span><span class="sxs-lookup"><span data-stu-id="0147d-152">#alertrulename</span></span> |<span data-ttu-id="0147d-153">Nom de règle d’alerte hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-153">Name of hello alert rule.</span></span> |
| <span data-ttu-id="0147d-154">AlertThresholdOperator</span><span class="sxs-lookup"><span data-stu-id="0147d-154">AlertThresholdOperator</span></span> |<span data-ttu-id="0147d-155">#thresholdoperator</span><span class="sxs-lookup"><span data-stu-id="0147d-155">#thresholdoperator</span></span> |<span data-ttu-id="0147d-156">Opérateur de seuil pour la règle d’alerte hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-156">Threshold operator for hello alert rule.</span></span>  <span data-ttu-id="0147d-157">*Supérieur à* ou *Inférieur à*.</span><span class="sxs-lookup"><span data-stu-id="0147d-157">*Greater than* or *Less than*.</span></span> |
| <span data-ttu-id="0147d-158">AlertThresholdValue</span><span class="sxs-lookup"><span data-stu-id="0147d-158">AlertThresholdValue</span></span> |<span data-ttu-id="0147d-159">#thresholdvalue</span><span class="sxs-lookup"><span data-stu-id="0147d-159">#thresholdvalue</span></span> |<span data-ttu-id="0147d-160">Valeur de seuil pour la règle d’alerte hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-160">Threshold value for hello alert rule.</span></span> |
| <span data-ttu-id="0147d-161">LinkToSearchResults</span><span class="sxs-lookup"><span data-stu-id="0147d-161">LinkToSearchResults</span></span> |<span data-ttu-id="0147d-162">#linktosearchresults</span><span class="sxs-lookup"><span data-stu-id="0147d-162">#linktosearchresults</span></span> |<span data-ttu-id="0147d-163">Lier la recherche de journal d’Analytique tooLog qui retourne des enregistrements de hello dans la requête hello créé hello alerte.</span><span class="sxs-lookup"><span data-stu-id="0147d-163">Link tooLog Analytics log search that returns hello records from hello query that created hello alert.</span></span> |
| <span data-ttu-id="0147d-164">ResultCount</span><span class="sxs-lookup"><span data-stu-id="0147d-164">ResultCount</span></span> |<span data-ttu-id="0147d-165">#searchresultcount</span><span class="sxs-lookup"><span data-stu-id="0147d-165">#searchresultcount</span></span> |<span data-ttu-id="0147d-166">Nombre d’enregistrements dans les résultats de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-166">Number of records in hello search results.</span></span> |
| <span data-ttu-id="0147d-167">SearchIntervalEndtimeUtc</span><span class="sxs-lookup"><span data-stu-id="0147d-167">SearchIntervalEndtimeUtc</span></span> |<span data-ttu-id="0147d-168">#searchintervalendtimeutc</span><span class="sxs-lookup"><span data-stu-id="0147d-168">#searchintervalendtimeutc</span></span> |<span data-ttu-id="0147d-169">Heure de fin de la requête hello au format UTC.</span><span class="sxs-lookup"><span data-stu-id="0147d-169">End time for hello query in UTC format.</span></span> |
| <span data-ttu-id="0147d-170">SearchIntervalInSeconds</span><span class="sxs-lookup"><span data-stu-id="0147d-170">SearchIntervalInSeconds</span></span> |<span data-ttu-id="0147d-171">#searchinterval</span><span class="sxs-lookup"><span data-stu-id="0147d-171">#searchinterval</span></span> |<span data-ttu-id="0147d-172">Fenêtre de temps pour la règle d’alerte hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-172">Time window for hello alert rule.</span></span> |
| <span data-ttu-id="0147d-173">SearchIntervalStartTimeUtc</span><span class="sxs-lookup"><span data-stu-id="0147d-173">SearchIntervalStartTimeUtc</span></span> |<span data-ttu-id="0147d-174">#searchintervalstarttimeutc</span><span class="sxs-lookup"><span data-stu-id="0147d-174">#searchintervalstarttimeutc</span></span> |<span data-ttu-id="0147d-175">Heure de début de requête de hello au format UTC.</span><span class="sxs-lookup"><span data-stu-id="0147d-175">Start time for hello query in UTC format.</span></span> |
| <span data-ttu-id="0147d-176">SearchQuery</span><span class="sxs-lookup"><span data-stu-id="0147d-176">SearchQuery</span></span> |<span data-ttu-id="0147d-177">#searchquery</span><span class="sxs-lookup"><span data-stu-id="0147d-177">#searchquery</span></span> |<span data-ttu-id="0147d-178">Requête de recherche de journal utilisé par la règle d’alerte hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-178">Log search query used by hello alert rule.</span></span> |
| <span data-ttu-id="0147d-179">SearchResults</span><span class="sxs-lookup"><span data-stu-id="0147d-179">SearchResults</span></span> |<span data-ttu-id="0147d-180">Voir ci-dessous</span><span class="sxs-lookup"><span data-stu-id="0147d-180">See below</span></span> |<span data-ttu-id="0147d-181">Enregistrements retournés par la requête hello au format JSON.</span><span class="sxs-lookup"><span data-stu-id="0147d-181">Records returned by hello query in JSON format.</span></span>  <span data-ttu-id="0147d-182">Toohello limitée 5 000 premiers enregistrements.</span><span class="sxs-lookup"><span data-stu-id="0147d-182">Limited toohello first 5,000 records.</span></span> |
| <span data-ttu-id="0147d-183">WorkspaceID</span><span class="sxs-lookup"><span data-stu-id="0147d-183">WorkspaceID</span></span> |<span data-ttu-id="0147d-184">#workspaceid</span><span class="sxs-lookup"><span data-stu-id="0147d-184">#workspaceid</span></span> |<span data-ttu-id="0147d-185">ID de votre espace de travail OMS.</span><span class="sxs-lookup"><span data-stu-id="0147d-185">ID of your OMS workspace.</span></span> |

<span data-ttu-id="0147d-186">Par exemple, vous pouvez spécifier hello suivant charge utile personnalisée qui inclut un paramètre unique appelé *texte*.</span><span class="sxs-lookup"><span data-stu-id="0147d-186">For example, you might specify hello following custom payload that includes a single parameter called *text*.</span></span>  <span data-ttu-id="0147d-187">service de Hello ce webhook appelle serait être attendu de ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="0147d-187">hello service that this webhook calls would be expecting this parameter.</span></span>

    {
        "text":"#alertrulename fired with #searchresultcount over threshold of #thresholdvalue."
    }

<span data-ttu-id="0147d-188">Cet exemple de charge utile résolvait toosomething comme hello suivant lorsque envoyé toohello webhook.</span><span class="sxs-lookup"><span data-stu-id="0147d-188">This example payload would resolve toosomething like hello following when sent toohello webhook.</span></span>

    {
        "text":"My Alert Rule fired with 18 records over threshold of 10 ."
    }

<span data-ttu-id="0147d-189">tooinclude les résultats de recherche dans une charge utile personnalisée, ajoutez hello suivant la ligne comme une propriété de niveau supérieur dans la charge utile json de hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-189">tooinclude search results in a custom payload, add hello following line as a top level property in hello json payload.</span></span>  

    "IncludeSearchResults":true

<span data-ttu-id="0147d-190">Par exemple, toocreate une charge utile personnalisée qui inclut le nom de l’alerte hello et de résultats de la recherche hello, vous pouvez utiliser hello suivant.</span><span class="sxs-lookup"><span data-stu-id="0147d-190">For example, toocreate a custom payload that includes just hello alert name and hello search results, you could use hello following.</span></span> 

    {
       "alertname":"#alertrulename",
       "IncludeSearchResults":true
    }


<span data-ttu-id="0147d-191">Vous suivez les étapes d’un exemple complet de la création d’un service externe à une règle d’alerte avec un toostart webhook [créer une action de l’alerte webhook dans Analytique des journaux OMS toosend message tooSlack](log-analytics-alerts-webhooks.md).</span><span class="sxs-lookup"><span data-stu-id="0147d-191">You can walk through a complete example of creating an alert rule with a webhook toostart an external service at [Create an alert webhook action in OMS Log Analytics toosend message tooSlack](log-analytics-alerts-webhooks.md).</span></span>

## <a name="runbook-actions"></a><span data-ttu-id="0147d-192">Actions de runbook</span><span class="sxs-lookup"><span data-stu-id="0147d-192">Runbook actions</span></span>
<span data-ttu-id="0147d-193">Les actions de runbook démarrent un runbook dans Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="0147d-193">Runbook actions start a runbook in Azure Automation.</span></span>  <span data-ttu-id="0147d-194">Dans commande toouse ce type d’action, vous devez avoir hello [solution Automation](log-analytics-add-solutions.md) installé et configuré dans votre espace de travail OMS.</span><span class="sxs-lookup"><span data-stu-id="0147d-194">In order toouse this type of action, you must have hello [Automation solution](log-analytics-add-solutions.md) installed and configured in your OMS workspace.</span></span>  <span data-ttu-id="0147d-195">Vous pouvez sélectionner à partir des runbooks hello dans compte automation hello que vous avez configuré dans hello solution Automation.</span><span class="sxs-lookup"><span data-stu-id="0147d-195">You can select from hello runbooks in hello automation account that you configured in hello Automation solution.</span></span>

<span data-ttu-id="0147d-196">Actions de runbooks requièrent des propriétés hello Bonjour tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="0147d-196">Runbook actions require hello properties in hello following table.</span></span>

| <span data-ttu-id="0147d-197">Propriété</span><span class="sxs-lookup"><span data-stu-id="0147d-197">Property</span></span> | <span data-ttu-id="0147d-198">Description</span><span class="sxs-lookup"><span data-stu-id="0147d-198">Description</span></span> |
|:--- |:---|
| <span data-ttu-id="0147d-199">Runbook</span><span class="sxs-lookup"><span data-stu-id="0147d-199">Runbook</span></span> | <span data-ttu-id="0147d-200">Runbook que vous souhaitez toostart lorsqu’une alerte est créée.</span><span class="sxs-lookup"><span data-stu-id="0147d-200">Runbook that you want toostart when an alert is created.</span></span> |
| <span data-ttu-id="0147d-201">Exécuter sur</span><span class="sxs-lookup"><span data-stu-id="0147d-201">Run on</span></span> | <span data-ttu-id="0147d-202">Spécifiez **Azure** runbook de hello toorun dans le cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-202">Specify **Azure** toorun hello runbook in hello cloud.</span></span>  <span data-ttu-id="0147d-203">Spécifiez **worker hybride** runbook de hello toorun sur un agent avec [Runbook Worker hybride](../automation/automation-hybrid-runbook-worker.md ) installé.</span><span class="sxs-lookup"><span data-stu-id="0147d-203">Specify **Hybrid worker** toorun hello runbook on an agent with [Hybrid Runbook Worker](../automation/automation-hybrid-runbook-worker.md ) installed.</span></span>  |

<span data-ttu-id="0147d-204">Actions de runbooks démarrer à l’aide de runbook hello un [webhook](../automation/automation-webhooks.md).</span><span class="sxs-lookup"><span data-stu-id="0147d-204">Runbook actions start hello runbook using a [webhook](../automation/automation-webhooks.md).</span></span>  <span data-ttu-id="0147d-205">Lorsque vous créez une règle d’alerte hello, il crée automatiquement un nouveau webhook hello runbook avec le nom de hello **OMS alerte correction** suivi d’un GUID.</span><span class="sxs-lookup"><span data-stu-id="0147d-205">When you create hello alert rule, it will automatically create a new webhook for hello runbook with hello name **OMS Alert Remediation** followed by a GUID.</span></span>  

<span data-ttu-id="0147d-206">Vous ne pouvez pas remplir tous les paramètres du runbook de hello directement, mais hello [$WebhookData paramètre](../automation/automation-webhooks.md) inclura des détails hello d’alerte hello, y compris les hello les résultats de recherche de journal hello qui l’a créée.</span><span class="sxs-lookup"><span data-stu-id="0147d-206">You cannot directly populate any parameters of hello runbook, but hello [$WebhookData parameter](../automation/automation-webhooks.md) will include hello details of hello alert, including hello results of hello log search that created it.</span></span>  <span data-ttu-id="0147d-207">Hello runbook devez toodefine **$WebhookData** en tant que paramètre pour qu’il tooaccess hello des propriétés d’alerte de hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-207">hello runbook will need toodefine **$WebhookData** as a parameter for it tooaccess hello properties of hello alert.</span></span>  <span data-ttu-id="0147d-208">Hello données d’alerte ne sont disponibles au format json dans une propriété unique appelée **SearchResults** Bonjour **RequestBody** propriété du **$WebhookData**.</span><span class="sxs-lookup"><span data-stu-id="0147d-208">hello alert data is available in json format in a single property called **SearchResults** in hello **RequestBody** property of **$WebhookData**.</span></span>  <span data-ttu-id="0147d-209">Cela aura des propriétés de hello en hello tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="0147d-209">This will have with hello properties in hello following table.</span></span>

| <span data-ttu-id="0147d-210">Nœud</span><span class="sxs-lookup"><span data-stu-id="0147d-210">Node</span></span> | <span data-ttu-id="0147d-211">Description</span><span class="sxs-lookup"><span data-stu-id="0147d-211">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="0147d-212">id</span><span class="sxs-lookup"><span data-stu-id="0147d-212">id</span></span> |<span data-ttu-id="0147d-213">Chemin d’accès et le GUID de la recherche de hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-213">Path and GUID of hello search.</span></span> |
| <span data-ttu-id="0147d-214">__metadata</span><span class="sxs-lookup"><span data-stu-id="0147d-214">__metadata</span></span> |<span data-ttu-id="0147d-215">Informations sur hello alerte notamment hello nombre d’enregistrements et l’état hello des résultats de recherche.</span><span class="sxs-lookup"><span data-stu-id="0147d-215">Information about hello alert including hello number of records and status of hello search results.</span></span> |
| <span data-ttu-id="0147d-216">value</span><span class="sxs-lookup"><span data-stu-id="0147d-216">value</span></span> |<span data-ttu-id="0147d-217">Entrée distincte pour chaque enregistrement dans les résultats de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-217">Separate entry for each record in hello search results.</span></span>  <span data-ttu-id="0147d-218">Détails de Hello d’entrée de hello seront correspondent aux propriétés de hello et les valeurs de l’enregistrement de hello.</span><span class="sxs-lookup"><span data-stu-id="0147d-218">hello details of hello entry will match hello properties and values of hello record.</span></span> |

<span data-ttu-id="0147d-219">Par exemple, hello runbook suivant serait extraire des enregistrements hello retournées par la recherche de journal hello et attribuer des propriétés différentes en fonction de type hello de chaque enregistrement.</span><span class="sxs-lookup"><span data-stu-id="0147d-219">For example, hello following runbook would extract hello records returned by hello log search  and assign different properties based on hello type of each record.</span></span>  <span data-ttu-id="0147d-220">Notez que runbook hello commence en convertissant **RequestBody** à partir de json afin qu’elles puissent être utilisés en tant qu’objet dans PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0147d-220">Note that hello runbook starts by converting **RequestBody** from json so that it can be worked with as an object in PowerShell.</span></span>

    param ( 
        [object]$WebhookData
    )

    $RequestBody = ConvertFrom-JSON -InputObject $WebhookData.RequestBody
    $Records     = $RequestBody.SearchResults.value

    foreach ($Record in $Records)
    {
        $Computer = $Record.Computer

        if ($Record.Type -eq 'Event')
        {
            $EventNo    = $Record.EventID
            $EventLevel = $Record.EventLevelName
            $EventData  = $Record.EventData
        }

        if ($Record.Type -eq 'Perf')
        {
            $Object    = $Record.ObjectName
            $Counter   = $Record.CounterName
            $Instance  = $Record.InstanceName
            $Value     = $Record.CounterValue
        }
    }


## <a name="next-steps"></a><span data-ttu-id="0147d-221">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="0147d-221">Next steps</span></span>
- <span data-ttu-id="0147d-222">Effectuez une procédure pas à pas pour [configurer un webhook](log-analytics-alerts-webhooks.md) avec une règle d’alerte.</span><span class="sxs-lookup"><span data-stu-id="0147d-222">Complete a walkthrough for [configuring a webook](log-analytics-alerts-webhooks.md) with an alert rule.</span></span>  
- <span data-ttu-id="0147d-223">Découvrez comment toowrite [runbooks dans Azure Automation](https://azure.microsoft.com/documentation/services/automation) tooremediate les problèmes identifiés par des alertes.</span><span class="sxs-lookup"><span data-stu-id="0147d-223">Learn how toowrite [runbooks in Azure Automation](https://azure.microsoft.com/documentation/services/automation) tooremediate problems identified by alerts.</span></span>
