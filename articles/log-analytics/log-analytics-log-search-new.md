---
title: recherche aaaLog dans Analytique des journaux OMS | Documents Microsoft
description: "Vous avez besoin une tooretrieve de recherche de journal de toutes les données de journal Analytique.  Cet article décrit comment les nouveaux journaux recherches sont utilisées dans le journal Analytique et fournit les concepts que vous devez toounderstand avant de créer un."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: bwren
ms.openlocfilehash: 08fda1d9eb9e6ab824ffb9e12af09832c3e3fad2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-log-searches-in-log-analytics"></a><span data-ttu-id="10cb9-104">Présentation des recherches dans les journaux dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="10cb9-104">Understanding log searches in Log Analytics</span></span>

> [!NOTE]
> <span data-ttu-id="10cb9-105">Cet article décrit les recherches de journaux dans Azure Analytique de journal à l’aide du nouveau langage de requête hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-105">This article describes log searches in Azure Log Analytics using hello new query language.</span></span>  <span data-ttu-id="10cb9-106">Vous pouvez en savoir plus sur le nouveau langage de hello et obtenir hello procédure tooupgrade votre espace de travail à [mise à niveau de votre recherche de journal toonew espace de travail Analytique des journaux Azure](log-analytics-log-search-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="10cb9-106">You can learn more about hello new language and get hello procedure tooupgrade your workspace at [Upgrade your Azure Log Analytics workspace toonew log search](log-analytics-log-search-upgrade.md).</span></span>  
>
> <span data-ttu-id="10cb9-107">Si votre espace de travail n’a pas été mis à niveau toohello nouveau langage de requête, vous devez faire référence trop[trouver des données à l’aide de recherches de journal dans le journal Analytique](log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="10cb9-107">If your workspace hasn't been upgraded toohello new query language, you should refer too[Find data using log searches in Log Analytics](log-analytics-log-searches.md).</span></span>

<span data-ttu-id="10cb9-108">Vous avez besoin une tooretrieve de recherche de journal de toutes les données de journal Analytique.</span><span class="sxs-lookup"><span data-stu-id="10cb9-108">You require a log search tooretrieve any data from Log Analytics.</span></span>  <span data-ttu-id="10cb9-109">Si vous analysez les données dans le portail de hello, configuration d’une règle d’alerte de toobe averti d’une condition particulière, ou la récupération des données à l’aide de hello API Analytique de journal, vous allez utiliser une recherche de journal toospecify données hello souhaité.</span><span class="sxs-lookup"><span data-stu-id="10cb9-109">Whether you're analyzing data in hello portal, configuring an alert rule toobe notified of a particular condition, or retrieving data using hello Log Analytics API, you will use a log search toospecify hello data you want.</span></span>  <span data-ttu-id="10cb9-110">Cet article décrit comment sont utilisées les recherches dans les journaux dans Log Analytics, et présente les concepts que vous devez comprendre avant de créer une recherche.</span><span class="sxs-lookup"><span data-stu-id="10cb9-110">This article describes how log searches are used in Log Analytics and provides concepts that should understand before creating one.</span></span> <span data-ttu-id="10cb9-111">Consultez hello [étapes](#next-steps) section pour plus d’informations sur la création et modification des recherches de journaux et des références sur le langage de requête hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-111">See hello [Next steps](#next-steps) section for details on creating and editing log searches and for references on hello query language.</span></span>

## <a name="where-log-searches-are-used"></a><span data-ttu-id="10cb9-112">Où les recherches dans les journaux sont-elles utilisées ?</span><span class="sxs-lookup"><span data-stu-id="10cb9-112">Where log searches are used</span></span>

<span data-ttu-id="10cb9-113">Hello différentes manières que vous allez utiliser les recherches de journal dans le journal Analytique hello suivants :</span><span class="sxs-lookup"><span data-stu-id="10cb9-113">hello different ways that you will use log searches in Log Analytics include hello following:</span></span>

- <span data-ttu-id="10cb9-114">**Portails.**</span><span class="sxs-lookup"><span data-stu-id="10cb9-114">**Portals.**</span></span> <span data-ttu-id="10cb9-115">Vous pouvez effectuer une analyse interactive des données dans le référentiel hello avec hello [portal de recherche de journal](log-analytics-log-search-log-search-portal.md) ou hello [portal d’Analytique de Advanced](https://go.microsoft.com/fwlink/?linkid=856587).</span><span class="sxs-lookup"><span data-stu-id="10cb9-115">You can perform interactive analysis of data in hello repository with hello [Log Search portal](log-analytics-log-search-log-search-portal.md) or hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span></span>  <span data-ttu-id="10cb9-116">Cela vous permet de tooedit votre requête et d’analyser les résultats de hello dans divers formats et les visualisations.</span><span class="sxs-lookup"><span data-stu-id="10cb9-116">This allows you tooedit your query and analyze hello results in a variety of formats and visualizations.</span></span>  <span data-ttu-id="10cb9-117">La plupart des requêtes que vous créez va démarrer dans un des portails de hello, puis copiés après avoir vérifié qu’il fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="10cb9-117">Most queries that you create will start in one of hello portals and then copied once you verify that it works as expected.</span></span>
- <span data-ttu-id="10cb9-118">**Règles d’alerte.**</span><span class="sxs-lookup"><span data-stu-id="10cb9-118">**Alert rules.**</span></span> <span data-ttu-id="10cb9-119">Les [règles d’alerte](log-analytics-alerts.md) identifient de façon proactive les problèmes à partir des données dans votre espace de travail.</span><span class="sxs-lookup"><span data-stu-id="10cb9-119">[Alert rules](log-analytics-alerts.md) proactively identify issues from data in your workspace.</span></span>  <span data-ttu-id="10cb9-120">Chaque règle d’alerte est basée sur une recherche dans les journaux qui est exécutée automatiquement à intervalles réguliers.</span><span class="sxs-lookup"><span data-stu-id="10cb9-120">Each alert rule is based on a log search that is automatically run at regular intervals.</span></span>  <span data-ttu-id="10cb9-121">les résultats de Hello sont inspecté toodetermine si une alerte doit être créée.</span><span class="sxs-lookup"><span data-stu-id="10cb9-121">hello results are inspected toodetermine if an alert should be created.</span></span>
- <span data-ttu-id="10cb9-122">**Vues.**</span><span class="sxs-lookup"><span data-stu-id="10cb9-122">**Views.**</span></span>  <span data-ttu-id="10cb9-123">Vous pouvez créer des visualisations de toobe de données inclus dans les tableaux de bord utilisateur avec [Concepteur de vue](log-analytics-view-designer.md).</span><span class="sxs-lookup"><span data-stu-id="10cb9-123">You can create visualizations of data toobe included in user dashboards with [View Designer](log-analytics-view-designer.md).</span></span>  <span data-ttu-id="10cb9-124">Recherches de journal fournissent des données hello utilisées par [vignettes](log-analytics-view-designer-tiles.md) et [des parties de visualisation](log-analytics-view-designer-parts.md) dans chaque vue.</span><span class="sxs-lookup"><span data-stu-id="10cb9-124">Log searches provide hello data used by [tiles](log-analytics-view-designer-tiles.md) and [visualization parts](log-analytics-view-designer-parts.md) in each view.</span></span>  <span data-ttu-id="10cb9-125">Vous pouvez approfondir à partir des parties de visualisation hello recherche de journal tooperform portail approfondir l’analyse sur les données de salutation.</span><span class="sxs-lookup"><span data-stu-id="10cb9-125">You can drill down from visualization parts into hello Log Search portal tooperform further analysis on hello data.</span></span>
- <span data-ttu-id="10cb9-126">**Exportation.**</span><span class="sxs-lookup"><span data-stu-id="10cb9-126">**Export.**</span></span>  <span data-ttu-id="10cb9-127">Lorsque vous exportez des données à partir de tooExcel d’espace de travail hello Analytique de journal ou [Power BI](log-analytics-powerbi.md), vous créez un tooexport de données de journal recherche toodefine hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-127">When you export data from hello Log Analytics workspace tooExcel or [Power BI](log-analytics-powerbi.md), you create a log search toodefine hello data tooexport.</span></span>
- <span data-ttu-id="10cb9-128">**PowerShell.**</span><span class="sxs-lookup"><span data-stu-id="10cb9-128">**PowerShell.**</span></span> <span data-ttu-id="10cb9-129">Vous pouvez exécuter un script PowerShell à partir d’une ligne de commande ou d’un runbook Azure Automation qui utilise [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve des données à partir de l’Analytique des journaux.</span><span class="sxs-lookup"><span data-stu-id="10cb9-129">You can run a PowerShell script from a command line or an Azure Automation runbook that uses [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data from Log Analytics.</span></span>  <span data-ttu-id="10cb9-130">Cette applet de commande requiert un tooretrieve de données de requête toodetermine hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-130">This cmdlet requires a query toodetermine hello data tooretrieve.</span></span>
- <span data-ttu-id="10cb9-131">**API Log Analytics.**</span><span class="sxs-lookup"><span data-stu-id="10cb9-131">**Log Analytics API.**</span></span>  <span data-ttu-id="10cb9-132">Hello [Analytique de journal journal API de recherche](log-analytics-log-search-api.md) permet de n’importe quel client de l’API REST tooretrieve des données à partir de l’espace de travail hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-132">hello [Log Analytics log search API](log-analytics-log-search-api.md) allows any REST API client tooretrieve data from hello workspace.</span></span>  <span data-ttu-id="10cb9-133">demande d’API Hello inclut une requête qui est exécutée sur tooretrieve de données Analytique de journal toodetermine hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-133">hello API request includes a query that is run against Log Analytics toodetermine hello data tooretrieve.</span></span>

![Recherches dans les journaux](media/log-analytics-log-search-new/log-search-overview.png)

## <a name="how-log-analytics-data-is-organized"></a><span data-ttu-id="10cb9-135">Organisation des données Log Analytics</span><span class="sxs-lookup"><span data-stu-id="10cb9-135">How Log Analytics data is organized</span></span>
<span data-ttu-id="10cb9-136">Lorsque vous générez une requête, vous démarrez en déterminant les tables contiennent des données de hello que vous recherchez.</span><span class="sxs-lookup"><span data-stu-id="10cb9-136">When you build a query, you start by determining which tables have hello data that you're looking for.</span></span> <span data-ttu-id="10cb9-137">Chaque [source de données](log-analytics-data-sources.md) et [solution](../operations-management-suite/operations-management-suite-solutions.md) stocke ses données dans des tables dédiées dans l’espace de travail Analytique de journal hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-137">Each [data source](log-analytics-data-sources.md) and [solution](../operations-management-suite/operations-management-suite-solutions.md) stores its data in dedicated tables in hello Log Analytics workspace.</span></span>  <span data-ttu-id="10cb9-138">Documentation pour chaque source de données et la solution inclut le nom hello hello du type de données qu’il crée et une description de chacune de ses propriétés.</span><span class="sxs-lookup"><span data-stu-id="10cb9-138">Documentation for each data source and solution includes hello name of hello data type that it creates and a description of each of its properties.</span></span>     <span data-ttu-id="10cb9-139">De nombreuses requêtes ne nécessitent que les données à partir d’une seule des tables, mais d’autres peuvent utiliser diverses options tooinclude des données provenant de plusieurs tables.</span><span class="sxs-lookup"><span data-stu-id="10cb9-139">Many queries will only require data from a single tables, but others may use a variety of options tooinclude data from multiple tables.</span></span>

![Tables](media/log-analytics-log-search-new/queries-tables.png)


## <a name="writing-a-query"></a><span data-ttu-id="10cb9-141">Écriture d’une requête</span><span class="sxs-lookup"><span data-stu-id="10cb9-141">Writing a query</span></span>
<span data-ttu-id="10cb9-142">Au cœur de hello du journal des recherches dans le journal Analytique est [un langage de requête étendu](https://docs.loganalytics.io/) qui vous permet de récupérer et analyser les données de référentiel hello dans de diverses façons.</span><span class="sxs-lookup"><span data-stu-id="10cb9-142">At hello core of log searches in Log Analytics is [an extensive query language](https://docs.loganalytics.io/) that lets you retrieve and analyze data from hello repository in a variety of ways.</span></span>  <span data-ttu-id="10cb9-143">Ce même langage de requête est utilisé pour [Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="10cb9-143">This same query language is used for [Application Insights](../application-insights/app-insights-analytics.md).</span></span>  <span data-ttu-id="10cb9-144">Apprendre comment toowrite une requête est critique toocreating les recherches de journal dans le journal Analytique.</span><span class="sxs-lookup"><span data-stu-id="10cb9-144">Learning how toowrite a query is critical toocreating log searches in Log Analytics.</span></span>  <span data-ttu-id="10cb9-145">Vous devez généralement commencer par les requêtes de base et puis progression toouse plus des fonctions avancées lorsque vos besoins deviennent plus complexes.</span><span class="sxs-lookup"><span data-stu-id="10cb9-145">You'll typically start with basic queries and then progress toouse more advanced functions as your requirements become more complex.</span></span>

<span data-ttu-id="10cb9-146">structure de base Hello d’une requête est une table source suivie d’une série d’opérateurs séparés par une barre verticale `|`.</span><span class="sxs-lookup"><span data-stu-id="10cb9-146">hello basic structure of a query is a source table followed by a series of operators separated by a pipe character `|`.</span></span>  <span data-ttu-id="10cb9-147">Vous pouvez chaîner plusieurs opérateurs toorefine hello de données et effectuer des fonctions avancées.</span><span class="sxs-lookup"><span data-stu-id="10cb9-147">You can chain together multiple operators toorefine hello data and perform advanced functions.</span></span>

<span data-ttu-id="10cb9-148">Par exemple, supposons que vous souhaitiez toofind hello supérieur dix ordinateurs avec hello la plupart des événements d’erreur sur hello hier.</span><span class="sxs-lookup"><span data-stu-id="10cb9-148">For example, suppose you wanted toofind hello top ten computers with hello most error events over hello past day.</span></span>

    Event
    | where (EventLevelName == "Error")
    | where (TimeGenerated > ago(1days))
    | summarize ErrorCount = count() by Computer
    | top 10 by ErrorCount desc

<span data-ttu-id="10cb9-149">Ou peut-être toofind les ordinateurs qui n’ont pas eu une pulsation Bonjour dernier jour.</span><span class="sxs-lookup"><span data-stu-id="10cb9-149">Or maybe you want toofind computers that haven't had a heartbeat in hello last day.</span></span>

    Heartbeat
    | where TimeGenerated > ago(7d)
    | summarize max(TimeGenerated) by Computer
    | where max_TimeGenerated < ago(1d)  

<span data-ttu-id="10cb9-150">Comment sur un graphique en courbes avec l’utilisation du processeur de hello pour chaque ordinateur à partir de la semaine dernière ?</span><span class="sxs-lookup"><span data-stu-id="10cb9-150">How about a line chart with hello processor utilization for each computer from last week?</span></span>

    Perf
    | where ObjectName == "Processor" and CounterName == "% Processor Time"
    | where TimeGenerated  between (startofweek(ago(7d)) .. endofweek(ago(7d)) )
    | summarize avg(CounterValue) by Computer, bin(TimeGenerated, 5min)
    | render timechart    

<span data-ttu-id="10cb9-151">Vous pouvez voir la structure de requête de hello est similaire à partir de ces exemples rapides qui, quel que soit le type de hello de données que vous travaillez, hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-151">You can see from these quick samples that regardless of hello kind of data that you're working with, hello structure of hello query is similar.</span></span>  <span data-ttu-id="10cb9-152">Vous pouvez décomposer en étapes distinctes, où les données de salutation résultant d’une commande sont envoyées via la commande suivante de hello pipeline toohello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-152">You can break it down into distinct steps where hello resulting data from one command is sent through hello pipeline toohello next command.</span></span>

<span data-ttu-id="10cb9-153">Pour obtenir une documentation complète sur le langage de requête Analytique de journal Azure hello, y compris la référence du langage et les didacticiels, consultez hello [documentation de langage de requête Analytique de journal Azure](https://docs.loganalytics.io/).</span><span class="sxs-lookup"><span data-stu-id="10cb9-153">For complete documentation on hello Azure Log Analytics query language including tutorials and language reference, see hello [Azure Log Analytics query language documentation](https://docs.loganalytics.io/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="10cb9-154">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="10cb9-154">Next steps</span></span>

- <span data-ttu-id="10cb9-155">En savoir plus sur hello [portails que vous utilisez toocreate et modifiez des recherches de journal](log-analytics-log-search-portals.md).</span><span class="sxs-lookup"><span data-stu-id="10cb9-155">Learn about hello [portals that you use toocreate and edit log searches](log-analytics-log-search-portals.md).</span></span>
- <span data-ttu-id="10cb9-156">Extraire un [didacticiel sur l’écriture de requêtes](https://go.microsoft.com/fwlink/?linkid=856078) à l’aide du nouveau langage de requête hello.</span><span class="sxs-lookup"><span data-stu-id="10cb9-156">Check out a [tutorial on writing queries](https://go.microsoft.com/fwlink/?linkid=856078) using hello new query language.</span></span>
