---
title: aaaAzure solution SQL Analytique de journal Analytique | Documents Microsoft
description: "Hello solution d’Analytique de SQL Azure permet de gérer vos bases de données SQL Azure."
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: b2712749-1ded-40c4-b211-abc51cc65171
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: banders
ms.openlocfilehash: fe228bb3cb3f9d578a84707c3917f02fbeb8a627
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-azure-sql-database-using-azure-sql-analytics-preview-in-log-analytics"></a><span data-ttu-id="7a3b3-103">Surveiller Azure SQL Database à l’aide d’Azure SQL Analytics (version préliminaire) dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="7a3b3-103">Monitor Azure SQL Database using Azure SQL Analytics (Preview) in Log Analytics</span></span>

![Symbole Azure SQL Analytics](./media/log-analytics-azure-sql/azure-sql-symbol.png)

<span data-ttu-id="7a3b3-105">Hello solution Analytique de SQL Azure dans Azure journal Analytique collecte et visualise les métriques de performances importantes SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-105">hello Azure SQL Analytics solution in Azure Log Analytics collects and visualizes important SQL Azure performance metrics.</span></span> <span data-ttu-id="7a3b3-106">À l’aide de mesures hello que vous recueillez avec la solution de hello, vous pouvez créer des alertes et des règles d’analyse personnalisés.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-106">By using hello metrics that you collect with hello solution, you can create custom monitoring rules and alerts.</span></span> <span data-ttu-id="7a3b3-107">Par ailleurs, vous pouvez surveiller les mesures associées à Azure SQL Database et aux pools élastiques au sein de plusieurs abonnements Azure et pools élastiques, et afficher ces données.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-107">And, you can monitor Azure SQL Database and elastic pool metrics across multiple Azure subscriptions and elastic pools and visualize them.</span></span> <span data-ttu-id="7a3b3-108">solution de Hello vous aide également à tooidentify des problèmes au niveau de chaque couche de la pile de votre application.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-108">hello solution also helps you tooidentify issues at each layer of your application stack.</span></span>  <span data-ttu-id="7a3b3-109">Il utilise [métriques des diagnostics Azure](log-analytics-azure-storage.md) avec Analytique de journal consulte des données de toopresent sur toutes les bases de données SQL Azure et les pools élastiques dans un seul espace de travail Analytique de journal.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-109">It uses [Azure Diagnostic metrics](log-analytics-azure-storage.md) together with Log Analytics views toopresent data about all your Azure SQL databases and elastic pools in a single Log Analytics workspace.</span></span>

<span data-ttu-id="7a3b3-110">Actuellement, cette solution de la version préliminaire prend en charge des too150, des bases de données Azure SQL 000 et 5 000 Pools élastiques SQL par espace de travail.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-110">Currently, this preview solution supports up too150,000 Azure SQL Databases and 5,000 SQL Elastic Pools per workspace.</span></span>

<span data-ttu-id="7a3b3-111">Hello solution Analytique de SQL Azure, comme d’autres disponibles pour l’Analytique des journaux, permet de surveiller et de recevoir des notifications sur le contrôle d’intégrité hello de vos ressources Azure, dans ce cas, la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-111">hello Azure SQL Analytics solution, like others available for Log Analytics, helps you monitor and receive notifications about hello health of your Azure resources—in this case, Azure SQL Database.</span></span> <span data-ttu-id="7a3b3-112">Base de données SQL Microsoft Azure est un service de base de données relationnelle évolutif qui fournit familiers tooapplications de fonctionnalités similaire à SQL Server en cours d’exécution dans hello cloud Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-112">Microsoft Azure SQL Database is a scalable relational database service that provides familiar SQL-Server-like capabilities tooapplications running in hello Azure cloud.</span></span> <span data-ttu-id="7a3b3-113">Analytique de journal vous permet de toocollect, mettre en corrélation et visualiser les données structurées et non structurées.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-113">Log Analytics helps you toocollect, correlate, and visualize structured and unstructured data.</span></span>

## <a name="connected-sources"></a><span data-ttu-id="7a3b3-114">Sources connectées</span><span class="sxs-lookup"><span data-stu-id="7a3b3-114">Connected sources</span></span>

<span data-ttu-id="7a3b3-115">Hello solution d’Analytique de SQL Azure n’utilise pas d’agents tooconnect toohello service d’Analytique de journal.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-115">hello Azure SQL Analytics solution doesn't use agents tooconnect toohello Log Analytics service.</span></span>

<span data-ttu-id="7a3b3-116">Hello tableau suivant décrit les sources de hello connecté sont pris en charge par cette solution.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-116">hello following table describes hello connected sources that are supported by this solution.</span></span>

| <span data-ttu-id="7a3b3-117">Source connectée</span><span class="sxs-lookup"><span data-stu-id="7a3b3-117">Connected Source</span></span> | <span data-ttu-id="7a3b3-118">Support</span><span class="sxs-lookup"><span data-stu-id="7a3b3-118">Support</span></span> | <span data-ttu-id="7a3b3-119">Description</span><span class="sxs-lookup"><span data-stu-id="7a3b3-119">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="7a3b3-120">Agents Windows</span><span class="sxs-lookup"><span data-stu-id="7a3b3-120">Windows agents</span></span>](log-analytics-windows-agents.md) | <span data-ttu-id="7a3b3-121">Non</span><span class="sxs-lookup"><span data-stu-id="7a3b3-121">No</span></span> | <span data-ttu-id="7a3b3-122">Les agents Windows directs ne sont pas utilisés par la solution de hello.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-122">Direct Windows agents are not used by hello solution.</span></span> |
| [<span data-ttu-id="7a3b3-123">Agents Linux</span><span class="sxs-lookup"><span data-stu-id="7a3b3-123">Linux agents</span></span>](log-analytics-linux-agents.md) | <span data-ttu-id="7a3b3-124">Non</span><span class="sxs-lookup"><span data-stu-id="7a3b3-124">No</span></span> | <span data-ttu-id="7a3b3-125">Les agents Linux directs ne sont pas utilisés par la solution de hello.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-125">Direct Linux agents are not used by hello solution.</span></span> |
| [<span data-ttu-id="7a3b3-126">Groupe d’administration SCOM</span><span class="sxs-lookup"><span data-stu-id="7a3b3-126">SCOM management group</span></span>](log-analytics-om-agents.md) | <span data-ttu-id="7a3b3-127">Non</span><span class="sxs-lookup"><span data-stu-id="7a3b3-127">No</span></span> | <span data-ttu-id="7a3b3-128">Une connexion directe à partir de hello SCOM agent tooLog Analytique n’est pas utilisée par la solution de hello.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-128">A direct connection from hello SCOM agent tooLog Analytics is not used by hello solution.</span></span> |
| [<span data-ttu-id="7a3b3-129">Compte Azure Storage</span><span class="sxs-lookup"><span data-stu-id="7a3b3-129">Azure storage account</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="7a3b3-130">Non</span><span class="sxs-lookup"><span data-stu-id="7a3b3-130">No</span></span> | <span data-ttu-id="7a3b3-131">Analytique de journal ne lit pas les données de salutation à partir d’un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-131">Log Analytics does not read hello data from a storage account.</span></span> |
| [<span data-ttu-id="7a3b3-132">Diagnostics Azure</span><span class="sxs-lookup"><span data-stu-id="7a3b3-132">Azure diagnostics</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="7a3b3-133">Oui</span><span class="sxs-lookup"><span data-stu-id="7a3b3-133">Yes</span></span> | <span data-ttu-id="7a3b3-134">Les données de mesure Azure sont envoyées tooLog Analytique directement par Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-134">Azure metric data is sent tooLog Analytics directly by Azure.</span></span> |

## <a name="prerequisites"></a><span data-ttu-id="7a3b3-135">Composants requis</span><span class="sxs-lookup"><span data-stu-id="7a3b3-135">Prerequisites</span></span>

- <span data-ttu-id="7a3b3-136">Un abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-136">An Azure Subscription.</span></span> <span data-ttu-id="7a3b3-137">Si vous n’en avez pas, créez-en un [gratuitement](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="7a3b3-137">If you don't have one, you can create one for [free](https://azure.microsoft.com/free/).</span></span>
- <span data-ttu-id="7a3b3-138">Un espace de travail Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-138">A Log Analytics workspace.</span></span> <span data-ttu-id="7a3b3-139">Vous pouvez utiliser un élément existant, ou en [créez un nouveau](log-analytics-get-started.md) avant de commencer à utiliser cette solution.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-139">You can use an existing one, or you can [create a new one](log-analytics-get-started.md) before you start using this solution.</span></span>
- <span data-ttu-id="7a3b3-140">Activer les Diagnostics de Azure pour vos bases de données SQL Azure et les pools élastiques et [toosend les configurer leur tooLog données Analytique](https://blogs.technet.microsoft.com/msoms/2017/01/17/enable-azure-resource-metrics-logging-using-powershell/).</span><span class="sxs-lookup"><span data-stu-id="7a3b3-140">Enable Azure Diagnostics for your Azure SQL databases and elastic pools and [configure them toosend their data tooLog Analytics](https://blogs.technet.microsoft.com/msoms/2017/01/17/enable-azure-resource-metrics-logging-using-powershell/).</span></span>

## <a name="configuration"></a><span data-ttu-id="7a3b3-141">Configuration</span><span class="sxs-lookup"><span data-stu-id="7a3b3-141">Configuration</span></span>

<span data-ttu-id="7a3b3-142">Effectuer hello suivant l’espace de travail suit tooadd hello Analytique de SQL Azure solution tooyour.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-142">Perform hello following steps tooadd hello Azure SQL Analytics solution tooyour workspace.</span></span>

1. <span data-ttu-id="7a3b3-143">Ajouter l’espace de travail tooyour hello pour Azure SQL Analytique solution à partir de [Azure marketplace](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/Microsoft.AzureSQLAnalyticsOMS?tab=Overview) ou à l’aide de hello est décrite dans [solutions Analytique de journal ajouter à partir de la galerie des Solutions de hello](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="7a3b3-143">Add hello Azure SQL Analytics solution tooyour workspace from [Azure marketplace](https://azuremarketplace.microsoft.com/en-us/marketplace/apps/Microsoft.AzureSQLAnalyticsOMS?tab=Overview) or by using hello process described in [Add Log Analytics solutions from hello Solutions Gallery](log-analytics-add-solutions.md).</span></span>
2. <span data-ttu-id="7a3b3-144">Bonjour portail Azure, cliquez sur **nouveau** (hello + symbole), puis dans la liste de hello des ressources, sélectionnez **analyse + gestion**.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-144">In hello Azure portal, click **New** (hello + symbol), then in hello list of resources, select **Monitoring + Management**.</span></span>  
    <span data-ttu-id="7a3b3-145">![Surveillance et gestion](./media/log-analytics-azure-sql/monitoring-management.png)</span><span class="sxs-lookup"><span data-stu-id="7a3b3-145">![Monitoring + Management](./media/log-analytics-azure-sql/monitoring-management.png)</span></span>
3. <span data-ttu-id="7a3b3-146">Bonjour **analyse + gestion** liste **afficher tous les**.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-146">In hello **Monitoring + Management** list click **See all**.</span></span>
4. <span data-ttu-id="7a3b3-147">Bonjour **recommandé** , cliquez sur **plus** et dans la nouvelle liste de hello, recherchez **Analytique de SQL Azure (aperçu)** et sélectionnez-le.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-147">In hello **Recommended** list, click **More** , and then in hello new list, find **Azure SQL Analytics (Preview)** and then select it.</span></span>  
    <span data-ttu-id="7a3b3-148">![Solution Azure SQL Analytics](./media/log-analytics-azure-sql/azure-sql-solution-portal.png)</span><span class="sxs-lookup"><span data-stu-id="7a3b3-148">![Azure SQL Analytics solution](./media/log-analytics-azure-sql/azure-sql-solution-portal.png)</span></span>
5. <span data-ttu-id="7a3b3-149">Bonjour **Analytique de SQL Azure (aperçu)** panneau, cliquez sur **créer**.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-149">In hello **Azure SQL Analytics (Preview)** blade, click **Create**.</span></span>  
    <span data-ttu-id="7a3b3-150">![Créer](./media/log-analytics-azure-sql/portal-create.png)</span><span class="sxs-lookup"><span data-stu-id="7a3b3-150">![Create](./media/log-analytics-azure-sql/portal-create.png)</span></span>
6. <span data-ttu-id="7a3b3-151">Bonjour **créer une nouvelle solution** panneau, espace de travail hello select que vous souhaitez tooadd hello solution tooand, puis cliquez sur **créer**.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-151">In hello **Create new solution** blade, select hello workspace that you want tooadd hello solution tooand then click **Create**.</span></span>  
    <span data-ttu-id="7a3b3-152">![Ajouter tooworkspace](./media/log-analytics-azure-sql/add-to-workspace.png)</span><span class="sxs-lookup"><span data-stu-id="7a3b3-152">![add tooworkspace](./media/log-analytics-azure-sql/add-to-workspace.png)</span></span>


### <a name="tooconfigure-multiple-azure-subscriptions"></a><span data-ttu-id="7a3b3-153">tooconfigure plusieurs abonnements Azure</span><span class="sxs-lookup"><span data-stu-id="7a3b3-153">tooconfigure multiple Azure subscriptions</span></span>

<span data-ttu-id="7a3b3-154">toosupport plusieurs abonnements, utiliser hello PowerShell script [journalisation de métriques de ressources Azure d’activer à l’aide de PowerShell](https://blogs.technet.microsoft.com/msoms/2017/01/17/enable-azure-resource-metrics-logging-using-powershell/).</span><span class="sxs-lookup"><span data-stu-id="7a3b3-154">toosupport multiple subscriptions, use hello PowerShell script from [Enable Azure resource metrics logging using PowerShell](https://blogs.technet.microsoft.com/msoms/2017/01/17/enable-azure-resource-metrics-logging-using-powershell/).</span></span> <span data-ttu-id="7a3b3-155">Indiquez l’ID de ressource d’espace de travail hello en tant que paramètre lors de l’exécution des données de diagnostic hello script toosend à partir des ressources dans l’espace de travail d’un abonnement Azure tooa dans un autre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-155">Provide hello workspace resource ID as a parameter when executing hello script toosend diagnostic data from resources in one Azure subscription tooa workspace in another Azure subscription.</span></span>

<span data-ttu-id="7a3b3-156">**Exemple**</span><span class="sxs-lookup"><span data-stu-id="7a3b3-156">**Example**</span></span>

```
PS C:\> $WSID = "/subscriptions/<subID>/resourcegroups/oms/providers/microsoft.operationalinsights/workspaces/omsws"
```

```
PS C:\> .\Enable-AzureRMDiagnostics.ps1 -WSID $WSID
```

## <a name="using-hello-solution"></a><span data-ttu-id="7a3b3-157">À l’aide de la solution de hello</span><span class="sxs-lookup"><span data-stu-id="7a3b3-157">Using hello solution</span></span>

<span data-ttu-id="7a3b3-158">Lorsque vous ajoutez d’espace de travail hello solution tooyour, hello Analytique de SQL Azure vignette est ajouté tooyour espace de travail, et elle s’affiche dans la vue d’ensemble.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-158">When you add hello solution tooyour workspace, hello Azure SQL Analytics tile is added tooyour workspace, and it appears in Overview.</span></span> <span data-ttu-id="7a3b3-159">vignette de Hello montre nombre hello de bases de données SQL Azure et les pools élastiques SQL Azure qui les solutions hello sont connectée à.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-159">hello tile shows hello number of Azure SQL databases and Azure SQL elastic pools that hello solution is connected to.</span></span>

![Vignette Azure SQL Analytics](./media/log-analytics-azure-sql/azure-sql-sol-tile.png)

### <a name="viewing-azure-sql-analytics-data"></a><span data-ttu-id="7a3b3-161">Affichage des données Azure SQL Analytics</span><span class="sxs-lookup"><span data-stu-id="7a3b3-161">Viewing Azure SQL Analytics data</span></span>

<span data-ttu-id="7a3b3-162">Cliquez sur hello **Analytique de SQL Azure** tableau de bord vignette tooopen hello Analytique de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-162">Click on hello **Azure SQL Analytics** tile tooopen hello Azure SQL Analytics dashboard.</span></span> <span data-ttu-id="7a3b3-163">tableau de bord Hello inclut les panneaux hello défini ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-163">hello dashboard includes hello blades defined below.</span></span> <span data-ttu-id="7a3b3-164">Chaque panneau répertorie les ressources too15 (abonnement serveur, pool élastique et base de données).</span><span class="sxs-lookup"><span data-stu-id="7a3b3-164">Each blade lists up too15 resources (subscription, server, elastic pool, and database).</span></span> <span data-ttu-id="7a3b3-165">Cliquez sur un tableau de bord hello hello pour ressources tooopen pour cette ressource spécifique.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-165">Click any of hello resources tooopen hello dashboard for that specific resource.</span></span> <span data-ttu-id="7a3b3-166">Pool élastique ou base de données contient des graphiques de hello de mesures pour une ressource sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-166">Elastic Pool or Database contains hello charts with metrics for a selected resource.</span></span> <span data-ttu-id="7a3b3-167">Cliquez sur une boîte de dialogue graphique tooopen hello recherche de journal.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-167">Click a chart tooopen hello Log Search dialog.</span></span>

| <span data-ttu-id="7a3b3-168">Panneau</span><span class="sxs-lookup"><span data-stu-id="7a3b3-168">Blade</span></span> | <span data-ttu-id="7a3b3-169">Description</span><span class="sxs-lookup"><span data-stu-id="7a3b3-169">Description</span></span> |
|---|---|
| <span data-ttu-id="7a3b3-170">Abonnements</span><span class="sxs-lookup"><span data-stu-id="7a3b3-170">Subscriptions</span></span> | <span data-ttu-id="7a3b3-171">Liste des abonnements avec le nombre de bases de données, de pools et de serveurs connectés.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-171">List of subscriptions with number of connected servers, pools, and databases.</span></span> |
| <span data-ttu-id="7a3b3-172">Serveurs</span><span class="sxs-lookup"><span data-stu-id="7a3b3-172">Servers</span></span> | <span data-ttu-id="7a3b3-173">Liste des serveurs avec le nombre de bases de données et de pools connectés.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-173">List of servers with number of connected pools and databases.</span></span> |
| <span data-ttu-id="7a3b3-174">Pools élastiques</span><span class="sxs-lookup"><span data-stu-id="7a3b3-174">Elastic Pools</span></span> | <span data-ttu-id="7a3b3-175">Liste des pools d’élastiques connectés avec maximale Go et eDTU Bonjour observé de période.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-175">List of connected elastic pools with maximum GB and eDTU in hello observed period.</span></span> |
|<span data-ttu-id="7a3b3-176">Bases de données</span><span class="sxs-lookup"><span data-stu-id="7a3b3-176">Databases</span></span> | <span data-ttu-id="7a3b3-177">Liste des bases de données connectées avec Go et les DTU maximale BONJOUR observé période.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-177">List of connected databases with maximum GB and DTU in hello observed period.</span></span>|


### <a name="analyze-data-and-create-alerts"></a><span data-ttu-id="7a3b3-178">Analyser les données et créer des alertes</span><span class="sxs-lookup"><span data-stu-id="7a3b3-178">Analyze data and create alerts</span></span>

<span data-ttu-id="7a3b3-179">Vous pouvez facilement créer des alertes avec les données hello provenant des ressources de base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-179">You can easily create alerts with hello data coming from Azure SQL Database resources.</span></span> <span data-ttu-id="7a3b3-180">Voici quelques requêtes utiles de [Recherche dans les journaux](log-analytics-log-searches.md) que vous pouvez utiliser pour créer des alertes :</span><span class="sxs-lookup"><span data-stu-id="7a3b3-180">Here are a couple of useful [log search](log-analytics-log-searches.md) queries that you can use for alerting:</span></span>

[!include[log-analytics-log-search-nextgeneration](../../includes/log-analytics-log-search-nextgeneration.md)]


<span data-ttu-id="7a3b3-181">*DTU élevé sur Azure SQL Database*</span><span class="sxs-lookup"><span data-stu-id="7a3b3-181">*High DTU on Azure SQL Database*</span></span>

```
Type=AzureMetrics ResourceProvider="MICROSOFT.SQL" ResourceId=*"/DATABASES/"* MetricName=dtu_consumption_percent | measure Avg(Average) by Resource interval 5minutes
```

<span data-ttu-id="7a3b3-182">*DTU élevé sur un pool élastique Azure SQL Database*</span><span class="sxs-lookup"><span data-stu-id="7a3b3-182">*High DTU on Azure SQL Database Elastic Pool*</span></span>

```
Type=AzureMetrics ResourceProvider="MICROSOFT.SQL" ResourceId=*"/ELASTICPOOLS/"* MetricName=dtu_consumption_percent | measure avg(Average) by Resource interval 5minutes
```

<span data-ttu-id="7a3b3-183">Vous pouvez utiliser ces tooalert les requêtes basées sur une alerte sur les seuils spécifiques pour la base de données SQL Azure et de pools élastiques.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-183">You can use these alert-based queries tooalert on specific thresholds for both Azure SQL Database and elastic pools.</span></span> <span data-ttu-id="7a3b3-184">tooconfigure une alerte pour votre espace de travail OMS :</span><span class="sxs-lookup"><span data-stu-id="7a3b3-184">tooconfigure an alert for your OMS workspace:</span></span>

#### <a name="tooconfigure-an-alert-for-your-workspace"></a><span data-ttu-id="7a3b3-185">tooconfigure une alerte pour votre espace de travail</span><span class="sxs-lookup"><span data-stu-id="7a3b3-185">tooconfigure an alert for your workspace</span></span>

1. <span data-ttu-id="7a3b3-186">Accédez toohello [portail OMS](http://mms.microsoft.com/) et connectez-vous.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-186">Go toohello [OMS portal](http://mms.microsoft.com/) and sign in.</span></span>
2. <span data-ttu-id="7a3b3-187">Ouvrez l’espace de travail hello que vous avez configuré pour la solution de hello.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-187">Open hello workspace that you have configured for hello solution.</span></span>
3. <span data-ttu-id="7a3b3-188">Sur la page de vue d’ensemble de hello, cliquez sur hello **Analytique de SQL Azure (aperçu)** vignette.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-188">On hello Overview page, click hello **Azure SQL Analytics (Preview)** tile.</span></span>
4. <span data-ttu-id="7a3b3-189">Exécutez une des requêtes d’exemple hello.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-189">Run one of hello example queries.</span></span>
5. <span data-ttu-id="7a3b3-190">Dans la recherche dans les journaux, cliquez sur **Alerte**.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-190">In Log Search, click **Alert**.</span></span>  
<span data-ttu-id="7a3b3-191">![création d’une alerte dans la recherche](./media/log-analytics-azure-sql/create-alert01.png)</span><span class="sxs-lookup"><span data-stu-id="7a3b3-191">![create alert in search](./media/log-analytics-azure-sql/create-alert01.png)</span></span>
6. <span data-ttu-id="7a3b3-192">Sur hello **ajouter une règle d’alerte** page, configurez les propriétés appropriées hello et hello seuils spécifiques que vous souhaitez puis cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-192">On hello **Add Alert Rule** page, configure hello appropriate properties and hello specific thresholds that you want and then click **Save**.</span></span>  
<span data-ttu-id="7a3b3-193">![ajout d’une règle d’alerte](./media/log-analytics-azure-sql/create-alert02.png)</span><span class="sxs-lookup"><span data-stu-id="7a3b3-193">![add alert rule](./media/log-analytics-azure-sql/create-alert02.png)</span></span>

### <a name="act-on-azure-sql-analytics-data"></a><span data-ttu-id="7a3b3-194">Utilisation des données Azure SQL Analytics</span><span class="sxs-lookup"><span data-stu-id="7a3b3-194">Act on Azure SQL Analytics data</span></span>

<span data-ttu-id="7a3b3-195">Par exemple, une des requêtes les plus utiles hello que vous pouvez effectuer est utilisation de DTU toocompare hello pour tous les Pools élastiques de SQL Azure dans tous vos abonnements Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-195">As an example, one of hello most useful queries that you can perform is toocompare hello DTU utilization for all Azure SQL Elastic Pools across all your Azure subscriptions.</span></span> <span data-ttu-id="7a3b3-196">Unités de débit de base de données (UDBD) fournit un moyen toodescribe hello capacité relative d’un niveau de performance des bases de données basique, Standard et Premium et les pools.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-196">Database Throughput Unit (DTU) provides a way toodescribe hello relative capacity of a performance level of Basic, Standard, and Premium databases and pools.</span></span> <span data-ttu-id="7a3b3-197">Les DTU sont une mesure combinant la quantité d’UC, la mémoire, les lectures et les écritures.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-197">DTUs are based on a blended measure of CPU, memory, reads, and writes.</span></span> <span data-ttu-id="7a3b3-198">À mesure que les dtu augmentent, hello puissance offerte par les augmentations de niveau de performances hello.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-198">As DTUs increase, hello power offered by hello performance level increases.</span></span> <span data-ttu-id="7a3b3-199">Par exemple un niveau de performance avec 5 DTU présente une puissance 5 fois supérieure à un niveau de performance affichant 1 DTU.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-199">For example, a performance level with 5 DTUs has five times more power than a performance level with 1 DTU.</span></span> <span data-ttu-id="7a3b3-200">Un quota DTU maximal s’applique tooeach les pool élastique et le serveur.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-200">A maximum DTU quota applies tooeach server and elastic pool.</span></span>

<span data-ttu-id="7a3b3-201">Par hello suivant la requête de recherche de journal en cours d’exécution, vous pouvez facilement déterminer si vous êtes moteur ou plus en utilisant vos pools élastiques SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-201">By running hello following Log Search query, you can easily tell if you are underutilizing or over utilizing your SQL Azure elastic pools.</span></span>

```
Type=AzureMetrics ResourceId=*"/ELASTICPOOLS/"* MetricName=dtu_consumption_percent | measure avg(Average) by Resource | display LineChart
```

>[!NOTE]
> <span data-ttu-id="7a3b3-202">Si votre espace de travail a été mis à niveau toohello [Analytique de journal nouveau langage de requête](log-analytics-log-search-upgrade.md), puis hello au-dessus de requête pourrait être modifié toohello suivant.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-202">If your workspace has been upgraded toohello [new Log Analytics query language](log-analytics-log-search-upgrade.md), then hello above query would change toohello following.</span></span>
>
>`search in (AzureMetrics) isnotempty(ResourceId) and "/ELASTICPOOLS/" and MetricName == "dtu_consumption_percent" | summarize AggregatedValue = avg(Average) by bin(TimeGenerated, 1h), Resource | render timechart`

<span data-ttu-id="7a3b3-203">Bonjour l’exemple suivant, vous pouvez voir qu’un pool élastique a une utilisation élevée proche de 100 % tandis que d’autres personnes ont très peu d’utilisation DTU.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-203">In hello following example, you can see that one elastic pool has a high usage near 100% DTU while others have very little usage.</span></span> <span data-ttu-id="7a3b3-204">Vous pouvez examiner les modifications récentes potentiels tootroubleshoot supplémentaires dans votre environnement à l’aide des journaux d’activité d’Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-204">You can investigate further tootroubleshoot potential recent changes in your environment using Azure Activity logs.</span></span>

![Résultats de la recherche dans les journaux - Utilisation élevée](./media/log-analytics-azure-sql/log-search-high-util.png)

## <a name="see-also"></a><span data-ttu-id="7a3b3-206">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7a3b3-206">See also</span></span>

- <span data-ttu-id="7a3b3-207">Utilisez [recherches de journal](log-analytics-log-searches.md) dans tooview d’Analytique de journal détaillé les données de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-207">Use [Log Searches](log-analytics-log-searches.md) in Log Analytics tooview detailed Azure SQL data.</span></span>
- <span data-ttu-id="7a3b3-208">[Créer un tableau de bord personnalisé](log-analytics-dashboards.md) comportant les données Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="7a3b3-208">[Create your own dashboards](log-analytics-dashboards.md) showing Azure SQL data.</span></span>
- <span data-ttu-id="7a3b3-209">[Create and manage alert rules in Log Analytics with the OMS portal](log-analytics-alerts.md) (Créer et gérer des règles d’alerte dans Log Analytics dans Log Analytics à l’aide du portail OMS).</span><span class="sxs-lookup"><span data-stu-id="7a3b3-209">[Create alerts](log-analytics-alerts.md) when specific Azure SQL events occur.</span></span>
