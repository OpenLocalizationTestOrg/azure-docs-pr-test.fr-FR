---
title: "aaaAzure solution de coffre de clés dans le journal Analytique | Documents Microsoft"
description: "Vous pouvez utiliser la solution de coffre de clés Azure hello dans tooreview Analytique de journal que coffre de clés Azure se connecte."
services: log-analytics
documentationcenter: 
author: richrundmsft
manager: jochan
editor: 
ms.assetid: 5e25e6d6-dd20-4528-9820-6e2958a40dae
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/09/2017
ms.author: richrund
ms.openlocfilehash: 1c6eae26ded7ad55b0159a3be09cdc9901596298
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-analytics-solution-in-log-analytics"></a><span data-ttu-id="40ac1-103">Solution Azure Key Vault Analytics dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="40ac1-103">Azure Key Vault Analytics solution in Log Analytics</span></span>

![Symbole de Key Vault](./media/log-analytics-azure-keyvault/key-vault-analytics-symbol.png)

<span data-ttu-id="40ac1-105">Vous pouvez utiliser la solution de coffre de clés Azure hello dans tooreview Analytique de journal Qu'azure Key Vault AuditEvent se connecte.</span><span class="sxs-lookup"><span data-stu-id="40ac1-105">You can use hello Azure Key Vault solution in Log Analytics tooreview Azure Key Vault AuditEvent logs.</span></span>

<span data-ttu-id="40ac1-106">solution de hello toouse, vous devez tooenable la journalisation des diagnostics d’Azure Key Vault et l’espace de travail Analytique de journal direct hello diagnostics tooa.</span><span class="sxs-lookup"><span data-stu-id="40ac1-106">toouse hello solution, you need tooenable logging of Azure Key Vault diagnostics and direct hello diagnostics tooa Log Analytics workspace.</span></span> <span data-ttu-id="40ac1-107">Il n’est pas le stockage Blob tooAzure toowrite nécessaire hello journaux.</span><span class="sxs-lookup"><span data-stu-id="40ac1-107">It is not necessary toowrite hello logs tooAzure Blob storage.</span></span>

> [!NOTE]
> <span data-ttu-id="40ac1-108">En janvier 2017, hello pris en charge la façon d’envoi de journaux tooLog de coffre de clés que Analytique modifié.</span><span class="sxs-lookup"><span data-stu-id="40ac1-108">In January 2017, hello supported way of sending logs from Key Vault tooLog Analytics changed.</span></span> <span data-ttu-id="40ac1-109">Si la solution de coffre de clés hello que vous utilisez affiche *(déconseillée)* au titre de hello, consultez trop[migration à partir de l’ancienne solution de coffre de clés hello](#migrating-from-the-old-key-vault-solution) pour connaître les étapes, vous devez toofollow.</span><span class="sxs-lookup"><span data-stu-id="40ac1-109">If hello Key Vault solution you are using shows *(deprecated)* in hello title, refer too[migrating from hello old Key Vault solution](#migrating-from-the-old-key-vault-solution) for steps you need toofollow.</span></span>
>
>

## <a name="install-and-configure-hello-solution"></a><span data-ttu-id="40ac1-110">Installer et configurer une solution de hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-110">Install and configure hello solution</span></span>
<span data-ttu-id="40ac1-111">Utilisez hello suivant les instructions tooinstall et configurer une solution de coffre de clés Azure hello :</span><span class="sxs-lookup"><span data-stu-id="40ac1-111">Use hello following instructions tooinstall and configure hello Azure Key Vault solution:</span></span>

1. <span data-ttu-id="40ac1-112">Activer la solution Azure Key Vault hello [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) ou à l’aide de hello est décrite dans [solutions Analytique de journal ajouter à partir de la galerie des Solutions de hello](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="40ac1-112">Enable hello Azure Key Vault solution from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) or by using hello process described in [Add Log Analytics solutions from hello Solutions Gallery](log-analytics-add-solutions.md).</span></span>
2. <span data-ttu-id="40ac1-113">Activer les diagnostics de journalisation pour toomonitor de ressources de coffre de clés hello, à l’aide soit hello [portal](#enable-key-vault-diagnostics-in-the-portal) ou [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span><span class="sxs-lookup"><span data-stu-id="40ac1-113">Enable diagnostics logging for hello Key Vault resources toomonitor, using either hello [portal](#enable-key-vault-diagnostics-in-the-portal) or [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span></span>

### <a name="enable-key-vault-diagnostics-in-hello-portal"></a><span data-ttu-id="40ac1-114">Activer les diagnostics de coffre de clés dans le portail de hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-114">Enable Key Vault diagnostics in hello portal</span></span>

1. <span data-ttu-id="40ac1-115">Bonjour portail Azure, accédez à toomonitor de ressource de coffre de clés toohello</span><span class="sxs-lookup"><span data-stu-id="40ac1-115">In hello Azure portal, navigate toohello Key Vault resource toomonitor</span></span>
2. <span data-ttu-id="40ac1-116">Sélectionnez *les journaux de diagnostic* hello tooopen suivant page</span><span class="sxs-lookup"><span data-stu-id="40ac1-116">Select *Diagnostics logs* tooopen hello following page</span></span>

   ![Image de la vignette Azure Key Vault](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics01.png)
3. <span data-ttu-id="40ac1-118">Cliquez sur *activer les diagnostics* hello tooopen suivant page</span><span class="sxs-lookup"><span data-stu-id="40ac1-118">Click *Turn on diagnostics* tooopen hello following page</span></span>

   ![Image de la vignette Azure Key Vault](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics02.png)
4. <span data-ttu-id="40ac1-120">tooturn des diagnostics, cliquez sur *sur* sous *état*</span><span class="sxs-lookup"><span data-stu-id="40ac1-120">tooturn on diagnostics, click *On* under *Status*</span></span>
5. <span data-ttu-id="40ac1-121">Cliquez sur la case à cocher hello *envoyer tooLog Analytique*</span><span class="sxs-lookup"><span data-stu-id="40ac1-121">Click hello checkbox for *Send tooLog Analytics*</span></span>
6. <span data-ttu-id="40ac1-122">Sélectionnez un espace de travail Log Analytics existant ou créez-en un.</span><span class="sxs-lookup"><span data-stu-id="40ac1-122">Select an existing Log Analytics workspace, or create a workspace</span></span>
7. <span data-ttu-id="40ac1-123">tooenable *AuditEvent* journaux, cochez hello sous journal</span><span class="sxs-lookup"><span data-stu-id="40ac1-123">tooenable *AuditEvent* logs, click hello checkbox under Log</span></span>
8. <span data-ttu-id="40ac1-124">Cliquez sur *enregistrer* tooenable la journalisation hello de diagnostics tooLog Analytique</span><span class="sxs-lookup"><span data-stu-id="40ac1-124">Click *Save* tooenable hello logging of diagnostics tooLog Analytics</span></span>

### <a name="enable-key-vault-diagnostics-using-powershell"></a><span data-ttu-id="40ac1-125">Activer les diagnostics Key Vault avec PowerShell</span><span class="sxs-lookup"><span data-stu-id="40ac1-125">Enable Key Vault diagnostics using PowerShell</span></span>
<span data-ttu-id="40ac1-126">Hello PowerShell script suivant fournit un exemple de procédure toouse `Set-AzureRmDiagnosticSetting` tooenable journalisation des diagnostics pour le coffre de clés :</span><span class="sxs-lookup"><span data-stu-id="40ac1-126">hello following PowerShell script provides an example of how toouse `Set-AzureRmDiagnosticSetting` tooenable diagnostic logging for Key Vault:</span></span>
```
$workspaceId = "/subscriptions/d2e37fee-1234-40b2-5678-0b2199de3b50/resourcegroups/oi-default-east-us/providers/microsoft.operationalinsights/workspaces/rollingbaskets"

$kv = Get-AzureRmKeyVault -VaultName 'ContosoKeyVault'

Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId  -WorkspaceId $workspaceId -Enabled $true
```



## <a name="review-azure-key-vault-data-collection-details"></a><span data-ttu-id="40ac1-127">Examiner les détails de la collecte de données par Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="40ac1-127">Review Azure Key Vault data collection details</span></span>
<span data-ttu-id="40ac1-128">Solution de coffre de clés Azure collecte des journaux de diagnostics directement à partir de hello coffre de clés.</span><span class="sxs-lookup"><span data-stu-id="40ac1-128">Azure Key Vault solution collects diagnostics logs directly from hello Key Vault.</span></span>
<span data-ttu-id="40ac1-129">Il n’est pas nécessaire de toowrite hello journaux tooAzure stockage d’objets Blob et aucun agent n’est requise pour la collection de données.</span><span class="sxs-lookup"><span data-stu-id="40ac1-129">It is not necessary toowrite hello logs tooAzure Blob storage and no agent is required for data collection.</span></span>

<span data-ttu-id="40ac1-130">Hello tableau suivant présente les méthodes de collecte de données et d’autres détails sur la façon dont les données sont collectées pour Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="40ac1-130">hello following table shows data collection methods and other details about how data is collected for Azure Key Vault.</span></span>

| <span data-ttu-id="40ac1-131">Plateforme</span><span class="sxs-lookup"><span data-stu-id="40ac1-131">Platform</span></span> | <span data-ttu-id="40ac1-132">Agent direct</span><span class="sxs-lookup"><span data-stu-id="40ac1-132">Direct agent</span></span> | <span data-ttu-id="40ac1-133">Agent Systems Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="40ac1-133">Systems Center Operations Manager agent</span></span> | <span data-ttu-id="40ac1-134">Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="40ac1-134">Azure</span></span> | <span data-ttu-id="40ac1-135">Operations Manager requis ?</span><span class="sxs-lookup"><span data-stu-id="40ac1-135">Operations Manager required?</span></span> | <span data-ttu-id="40ac1-136">Données de l’agent Operations Manager envoyées via un groupe d’administration</span><span class="sxs-lookup"><span data-stu-id="40ac1-136">Operations Manager agent data sent via management group</span></span> | <span data-ttu-id="40ac1-137">Fréquence de collecte</span><span class="sxs-lookup"><span data-stu-id="40ac1-137">Collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="40ac1-138">Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="40ac1-138">Azure</span></span> |  |  |<span data-ttu-id="40ac1-139">&#8226;</span><span class="sxs-lookup"><span data-stu-id="40ac1-139">&#8226;</span></span> |  |  | <span data-ttu-id="40ac1-140">à l'arrivée</span><span class="sxs-lookup"><span data-stu-id="40ac1-140">on arrival</span></span> |

## <a name="use-azure-key-vault"></a><span data-ttu-id="40ac1-141">Utiliser Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="40ac1-141">Use Azure Key Vault</span></span>
<span data-ttu-id="40ac1-142">Après avoir [installer hello solution](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), afficher des données du coffre de clés hello en cliquant sur hello **Azure Key Vault** vignette à partir de hello **vue d’ensemble** page d’Analytique de journal.</span><span class="sxs-lookup"><span data-stu-id="40ac1-142">After you [install hello solution](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), view hello Key Vault data by clicking hello **Azure Key Vault** tile from hello **Overview** page of Log Analytics.</span></span>

![Image de la vignette Azure Key Vault](./media/log-analytics-azure-keyvault/log-analytics-keyvault-tile.png)

<span data-ttu-id="40ac1-144">Après avoir cliqué sur hello **vue d’ensemble** vignette, vous pouvez afficher des résumés de vos journaux ensuite dans toodetails pour hello suivant des catégories :</span><span class="sxs-lookup"><span data-stu-id="40ac1-144">After you click hello **Overview** tile, you can view summaries of your logs and then drill in toodetails for hello following categories:</span></span>

* <span data-ttu-id="40ac1-145">Volume de toutes les opérations de Key Vault dans le temps</span><span class="sxs-lookup"><span data-stu-id="40ac1-145">Volume of all key vault operations over time</span></span>
* <span data-ttu-id="40ac1-146">Volumes des opérations en échec dans le temps</span><span class="sxs-lookup"><span data-stu-id="40ac1-146">Failed operation volumes over time</span></span>
* <span data-ttu-id="40ac1-147">Latence opérationnelle moyenne par opération</span><span class="sxs-lookup"><span data-stu-id="40ac1-147">Average operational latency by operation</span></span>
* <span data-ttu-id="40ac1-148">Qualité de service pour les opérations avec le nombre de hello d’opérations qui prennent plus de 1 000 ms et une liste des opérations qui prennent plus de 1 000 ms</span><span class="sxs-lookup"><span data-stu-id="40ac1-148">Quality of service for operations with hello number of operations that take more than 1000 ms and a list of operations that take more than 1000 ms</span></span>

![Image du tableau de bord d’Azure Key Vault](./media/log-analytics-azure-keyvault/log-analytics-keyvault01.png)

![Image du tableau de bord d’Azure Key Vault](./media/log-analytics-azure-keyvault/log-analytics-keyvault02.png)

### <a name="tooview-details-for-any-operation"></a><span data-ttu-id="40ac1-151">Détails tooview pour toute opération</span><span class="sxs-lookup"><span data-stu-id="40ac1-151">tooview details for any operation</span></span>
1. <span data-ttu-id="40ac1-152">Sur hello **vue d’ensemble** , cliquez sur hello **Azure Key Vault** vignette.</span><span class="sxs-lookup"><span data-stu-id="40ac1-152">On hello **Overview** page, click hello **Azure Key Vault** tile.</span></span>
2. <span data-ttu-id="40ac1-153">Sur hello **Azure Key Vault** tableau de bord, passez en revue les informations de résumé hello dans un des panneaux de hello, puis cliquez sur une tooview des informations détaillées sur elle dans la page de recherche de journal hello.</span><span class="sxs-lookup"><span data-stu-id="40ac1-153">On hello **Azure Key Vault** dashboard, review hello summary information in one of hello blades, and then click one tooview detailed information about it in hello log search page.</span></span>

    <span data-ttu-id="40ac1-154">Sur les pages de recherche de journal hello, vous pouvez afficher les résultats par heure, les résultats détaillés et votre historique de recherche de journal.</span><span class="sxs-lookup"><span data-stu-id="40ac1-154">On any of hello log search pages, you can view results by time, detailed results, and your log search history.</span></span> <span data-ttu-id="40ac1-155">Vous pouvez également filtrer selon les résultats de facettes toonarrow hello.</span><span class="sxs-lookup"><span data-stu-id="40ac1-155">You can also filter by facets toonarrow hello results.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="40ac1-156">Enregistrements Log Analytics</span><span class="sxs-lookup"><span data-stu-id="40ac1-156">Log Analytics records</span></span>
<span data-ttu-id="40ac1-157">Hello solution d’Azure Key Vault analyse les enregistrements qui ont un type de **KeyVaults** qui sont collectées à partir de [AuditEvent journaux](../key-vault/key-vault-logging.md) dans les Diagnostics Azure.</span><span class="sxs-lookup"><span data-stu-id="40ac1-157">hello Azure Key Vault solution analyzes records that have a type of **KeyVaults** that are collected from [AuditEvent logs](../key-vault/key-vault-logging.md) in Azure Diagnostics.</span></span>  <span data-ttu-id="40ac1-158">Propriétés de ces enregistrements sont Bonjour tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="40ac1-158">Properties for these records are in hello following table:</span></span>  

| <span data-ttu-id="40ac1-159">Propriété</span><span class="sxs-lookup"><span data-stu-id="40ac1-159">Property</span></span> | <span data-ttu-id="40ac1-160">Description</span><span class="sxs-lookup"><span data-stu-id="40ac1-160">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="40ac1-161">Type</span><span class="sxs-lookup"><span data-stu-id="40ac1-161">Type</span></span> |<span data-ttu-id="40ac1-162">*AzureDiagnostics*</span><span class="sxs-lookup"><span data-stu-id="40ac1-162">*AzureDiagnostics*</span></span> |
| <span data-ttu-id="40ac1-163">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="40ac1-163">SourceSystem</span></span> |<span data-ttu-id="40ac1-164">*Microsoft Azure*</span><span class="sxs-lookup"><span data-stu-id="40ac1-164">*Azure*</span></span> |
| <span data-ttu-id="40ac1-165">callerIpAddress</span><span class="sxs-lookup"><span data-stu-id="40ac1-165">CallerIpAddress</span></span> |<span data-ttu-id="40ac1-166">Adresse IP du client hello qui a effectué la demande de hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-166">IP address of hello client who made hello request</span></span> |
| <span data-ttu-id="40ac1-167">Catégorie</span><span class="sxs-lookup"><span data-stu-id="40ac1-167">Category</span></span> | <span data-ttu-id="40ac1-168">*AuditEvent*</span><span class="sxs-lookup"><span data-stu-id="40ac1-168">*AuditEvent*</span></span> |
| <span data-ttu-id="40ac1-169">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="40ac1-169">CorrelationId</span></span> |<span data-ttu-id="40ac1-170">Un GUID facultatif qui hello client peut passer toocorrelate des côté service (le coffre de clés), les journaux côté client.</span><span class="sxs-lookup"><span data-stu-id="40ac1-170">An optional GUID that hello client can pass toocorrelate client-side logs with service-side (Key Vault) logs.</span></span> |
| <span data-ttu-id="40ac1-171">DurationMs</span><span class="sxs-lookup"><span data-stu-id="40ac1-171">DurationMs</span></span> |<span data-ttu-id="40ac1-172">Durée tooservice demande l’API REST hello, en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="40ac1-172">Time it took tooservice hello REST API request, in milliseconds.</span></span> <span data-ttu-id="40ac1-173">Cette durée n’inclut pas de latence du réseau, hello décrivant côté client de hello peut correspond pas à ce stade.</span><span class="sxs-lookup"><span data-stu-id="40ac1-173">This time does not include network latency, so hello time that you measure on hello client side might not match this time.</span></span> |
| <span data-ttu-id="40ac1-174">httpStatusCode_d</span><span class="sxs-lookup"><span data-stu-id="40ac1-174">httpStatusCode_d</span></span> |<span data-ttu-id="40ac1-175">Code d’état HTTP retourné par la demande de hello (par exemple, *200*)</span><span class="sxs-lookup"><span data-stu-id="40ac1-175">HTTP status code returned by hello request (for example, *200*)</span></span> |
| <span data-ttu-id="40ac1-176">id_s</span><span class="sxs-lookup"><span data-stu-id="40ac1-176">id_s</span></span> |<span data-ttu-id="40ac1-177">ID unique de la demande de hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-177">Unique ID of hello request</span></span> |
| <span data-ttu-id="40ac1-178">identity_claim_appid_g</span><span class="sxs-lookup"><span data-stu-id="40ac1-178">identity_claim_appid_g</span></span> | <span data-ttu-id="40ac1-179">GUID de l’id de l’application hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-179">GUID for hello application id</span></span> |
| <span data-ttu-id="40ac1-180">Nom d'opération</span><span class="sxs-lookup"><span data-stu-id="40ac1-180">OperationName</span></span> |<span data-ttu-id="40ac1-181">Nom de l’opération de hello, comme décrit dans [journalisation d’Azure Key Vault](../key-vault/key-vault-logging.md)</span><span class="sxs-lookup"><span data-stu-id="40ac1-181">Name of hello operation, as documented in [Azure Key Vault Logging](../key-vault/key-vault-logging.md)</span></span> |
| <span data-ttu-id="40ac1-182">operationVersion</span><span class="sxs-lookup"><span data-stu-id="40ac1-182">OperationVersion</span></span> |<span data-ttu-id="40ac1-183">Version de l’API REST demandée par hello client (par exemple *2015-06-01*)</span><span class="sxs-lookup"><span data-stu-id="40ac1-183">REST API version requested by hello client (for example *2015-06-01*)</span></span> |
| <span data-ttu-id="40ac1-184">requestUri_s</span><span class="sxs-lookup"><span data-stu-id="40ac1-184">requestUri_s</span></span> |<span data-ttu-id="40ac1-185">URI de demande de hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-185">Uri of hello request</span></span> |
| <span data-ttu-id="40ac1-186">Ressource</span><span class="sxs-lookup"><span data-stu-id="40ac1-186">Resource</span></span> |<span data-ttu-id="40ac1-187">Nom de coffre de clés hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-187">Name of hello key vault</span></span> |
| <span data-ttu-id="40ac1-188">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="40ac1-188">ResourceGroup</span></span> |<span data-ttu-id="40ac1-189">Groupe de ressources de coffre de clés hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-189">Resource group of hello key vault</span></span> |
| <span data-ttu-id="40ac1-190">ResourceId</span><span class="sxs-lookup"><span data-stu-id="40ac1-190">ResourceId</span></span> |<span data-ttu-id="40ac1-191">ID de ressource Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="40ac1-191">Azure Resource Manager Resource ID.</span></span> <span data-ttu-id="40ac1-192">Pour les journaux de coffre de clés, il s’agit d’un ID de ressource de coffre de clés hello.</span><span class="sxs-lookup"><span data-stu-id="40ac1-192">For Key Vault logs, this is hello Key Vault resource ID.</span></span> |
| <span data-ttu-id="40ac1-193">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="40ac1-193">ResourceProvider</span></span> |<span data-ttu-id="40ac1-194">*MICROSOFT.KEYVAULT*</span><span class="sxs-lookup"><span data-stu-id="40ac1-194">*MICROSOFT.KEYVAULT*</span></span> |
| <span data-ttu-id="40ac1-195">ResourceType</span><span class="sxs-lookup"><span data-stu-id="40ac1-195">ResourceType</span></span> | <span data-ttu-id="40ac1-196">*VAULTS*</span><span class="sxs-lookup"><span data-stu-id="40ac1-196">*VAULTS*</span></span> |
| <span data-ttu-id="40ac1-197">ResultSignature</span><span class="sxs-lookup"><span data-stu-id="40ac1-197">ResultSignature</span></span> |<span data-ttu-id="40ac1-198">État HTTP (par exemple *OK*)</span><span class="sxs-lookup"><span data-stu-id="40ac1-198">HTTP status (for example, *OK*)</span></span> |
| <span data-ttu-id="40ac1-199">ResultType</span><span class="sxs-lookup"><span data-stu-id="40ac1-199">ResultType</span></span> |<span data-ttu-id="40ac1-200">Résultat de la demande de l’API REST (par exemple, *Réussite*)</span><span class="sxs-lookup"><span data-stu-id="40ac1-200">Result of REST API request (for example, *Success*)</span></span> |
| <span data-ttu-id="40ac1-201">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="40ac1-201">SubscriptionId</span></span> |<span data-ttu-id="40ac1-202">ID d’abonnement hello contenant hello coffre de clés d’abonnement Azure</span><span class="sxs-lookup"><span data-stu-id="40ac1-202">Azure subscription ID of hello subscription containing hello Key Vault</span></span> |

## <a name="migrating-from-hello-old-key-vault-solution"></a><span data-ttu-id="40ac1-203">Migration à partir de l’ancienne solution de coffre de clés hello</span><span class="sxs-lookup"><span data-stu-id="40ac1-203">Migrating from hello old Key Vault solution</span></span>
<span data-ttu-id="40ac1-204">En janvier 2017, hello pris en charge la façon d’envoi de journaux tooLog de coffre de clés que Analytique modifié.</span><span class="sxs-lookup"><span data-stu-id="40ac1-204">In January 2017, hello supported way of sending logs from Key Vault tooLog Analytics changed.</span></span> <span data-ttu-id="40ac1-205">Ces modifications permettent de hello suivant avantages :</span><span class="sxs-lookup"><span data-stu-id="40ac1-205">These changes provide hello following advantages:</span></span>
+ <span data-ttu-id="40ac1-206">Les journaux sont écrits directement tooLog Analytique sans hello devez toouse un compte de stockage</span><span class="sxs-lookup"><span data-stu-id="40ac1-206">Logs are written directly tooLog Analytics without hello need toouse a storage account</span></span>
+ <span data-ttu-id="40ac1-207">Latence est faible à partir de l’heure hello lorsque les journaux sont générés toothem soient disponibles dans le journal Analytique</span><span class="sxs-lookup"><span data-stu-id="40ac1-207">Less latency from hello time when logs are generated toothem being available in Log Analytics</span></span>
+ <span data-ttu-id="40ac1-208">Le nombre d’étapes de configuration est réduit.</span><span class="sxs-lookup"><span data-stu-id="40ac1-208">Fewer configuration steps</span></span>
+ <span data-ttu-id="40ac1-209">Tous les types de diagnostics Azure sont au même format.</span><span class="sxs-lookup"><span data-stu-id="40ac1-209">A common format for all types of Azure diagnostics</span></span>

<span data-ttu-id="40ac1-210">solution de mise à jour de hello toouse :</span><span class="sxs-lookup"><span data-stu-id="40ac1-210">toouse hello updated solution:</span></span>

1. [<span data-ttu-id="40ac1-211">Configurer toobe diagnostics provenant directement tooLog Analytique le coffre de clés</span><span class="sxs-lookup"><span data-stu-id="40ac1-211">Configure diagnostics toobe sent directly tooLog Analytics from Key Vault</span></span>](#enable-key-vault-diagnostics-in-the-portal)  
2. <span data-ttu-id="40ac1-212">Activer la solution de coffre de clés Azure hello à l’aide de hello est décrite dans [solutions Analytique de journal ajouter à partir de la galerie des Solutions de hello](log-analytics-add-solutions.md)</span><span class="sxs-lookup"><span data-stu-id="40ac1-212">Enable hello Azure Key Vault solution by using hello process described in [Add Log Analytics solutions from hello Solutions Gallery](log-analytics-add-solutions.md)</span></span>
3. <span data-ttu-id="40ac1-213">Mettre à jour toutes les requêtes enregistrées, les tableaux de bord ou les alertes toouse hello nouveau type de données</span><span class="sxs-lookup"><span data-stu-id="40ac1-213">Update any saved queries, dashboards, or alerts toouse hello new data type</span></span>
  + <span data-ttu-id="40ac1-214">Le type est déconnecté : KeyVaults tooAzureDiagnostics.</span><span class="sxs-lookup"><span data-stu-id="40ac1-214">Type is change from: KeyVaults tooAzureDiagnostics.</span></span> <span data-ttu-id="40ac1-215">Vous pouvez utiliser hello ResourceType toofilter tooKey journaux du coffre.</span><span class="sxs-lookup"><span data-stu-id="40ac1-215">You can use hello ResourceType toofilter tooKey Vault Logs.</span></span>
  - <span data-ttu-id="40ac1-216">Au lieu de `Type=KeyVaults`, utilisez `Type=AzureDiagnostics ResourceType=VAULTS`.</span><span class="sxs-lookup"><span data-stu-id="40ac1-216">Instead of: `Type=KeyVaults`, use `Type=AzureDiagnostics ResourceType=VAULTS`</span></span>
  + <span data-ttu-id="40ac1-217">Champs : (les noms de champs respectent la casse)</span><span class="sxs-lookup"><span data-stu-id="40ac1-217">Fields: (Field names are case-sensitive)</span></span>
  - <span data-ttu-id="40ac1-218">Pour un champ qui comporte un suffixe de \_s, \_d, ou \_g dans nom hello, modification hello premier caractère toolower cas</span><span class="sxs-lookup"><span data-stu-id="40ac1-218">For any field that has a suffix of \_s, \_d, or \_g in hello name, change hello first character toolower case</span></span>
  - <span data-ttu-id="40ac1-219">Pour un champ qui comporte un suffixe de \_o dans nom, les données de salutation est divisé en champs individuels en fonction du nom de champ hello imbriqué.</span><span class="sxs-lookup"><span data-stu-id="40ac1-219">For any field that has a suffix of \_o in name, hello data is split into individual fields based on hello nested field names.</span></span> <span data-ttu-id="40ac1-220">Par exemple, hello UPN de l’appelant de hello est stocké dans un champ`identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span><span class="sxs-lookup"><span data-stu-id="40ac1-220">For example, hello UPN of hello caller is stored in a field `identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span></span>
   - <span data-ttu-id="40ac1-221">CallerIpAddress champ modifié tooCallerIPAddress</span><span class="sxs-lookup"><span data-stu-id="40ac1-221">Field CallerIpAddress changed tooCallerIPAddress</span></span>
   - <span data-ttu-id="40ac1-222">Le champ RemoteIPCountry n’est plus présent</span><span class="sxs-lookup"><span data-stu-id="40ac1-222">Field RemoteIPCountry is no longer present</span></span>
4. <span data-ttu-id="40ac1-223">Supprimer hello *Analytique de coffre de clé (obsolète)* solution.</span><span class="sxs-lookup"><span data-stu-id="40ac1-223">Remove hello *Key Vault Analytics (Deprecated)* solution.</span></span> <span data-ttu-id="40ac1-224">Avec PowerShell, utilisez `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that hello workspace is in> -WorkspaceName <name of hello log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`.</span><span class="sxs-lookup"><span data-stu-id="40ac1-224">If you are using PowerShell, use `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that hello workspace is in> -WorkspaceName <name of hello log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span></span>

<span data-ttu-id="40ac1-225">Les données collectées avant la modification de hello n’est pas visible dans une nouvelle solution hello.</span><span class="sxs-lookup"><span data-stu-id="40ac1-225">Data collected before hello change is not visible in hello new solution.</span></span> <span data-ttu-id="40ac1-226">Vous pouvez continuer tooquery pour cette à l’aide de données hello ancien Type et les noms de champs.</span><span class="sxs-lookup"><span data-stu-id="40ac1-226">You can continue tooquery for this data using hello old Type and field names.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="40ac1-227">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="40ac1-227">Troubleshooting</span></span>
[!INCLUDE [log-analytics-troubleshoot-azure-diagnostics](../../includes/log-analytics-troubleshoot-azure-diagnostics.md)]

## <a name="next-steps"></a><span data-ttu-id="40ac1-228">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="40ac1-228">Next steps</span></span>
* <span data-ttu-id="40ac1-229">Utilisez [connecter recherche Analytique de journal](log-analytics-log-searches.md) tooview détaillé les données de coffre de clés Azure.</span><span class="sxs-lookup"><span data-stu-id="40ac1-229">Use [Log searches in Log Analytics](log-analytics-log-searches.md) tooview detailed Azure Key Vault data.</span></span>
