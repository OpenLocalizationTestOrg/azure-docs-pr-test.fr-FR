---
title: Journaux IIS dans Log Analytics | Microsoft Docs
description: "Internet Information Services (IIS) enregistre l'activité des utilisateurs dans des fichiers journaux qui peuvent être collectés par Log Analytics.  Cet article décrit comment configurer la collecte des journaux IIS et des détails des enregistrements qu'ils créent dans le référentiel OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: cec5ff0a-01f5-4262-b2e8-e3db7b7467d2
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: bwren
ms.openlocfilehash: 2114bdafb3b9fe2eb0632271840b8b70a76d10f1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="iis-logs-in-log-analytics"></a><span data-ttu-id="85467-104">Journaux IIS dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="85467-104">IIS logs in Log Analytics</span></span>
<span data-ttu-id="85467-105">Internet Information Services (IIS) enregistre l'activité des utilisateurs dans des fichiers journaux qui peuvent être collectés par Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="85467-105">Internet Information Services (IIS) stores user activity in log files that can be collected by Log Analytics.</span></span>  

![Journaux IIS](media/log-analytics-data-sources-iis-logs/overview.png)

## <a name="configuring-iis-logs"></a><span data-ttu-id="85467-107">Configuration de journaux IIS</span><span class="sxs-lookup"><span data-stu-id="85467-107">Configuring IIS logs</span></span>
<span data-ttu-id="85467-108">Log Analytics regroupant les entrées des fichiers journaux créés par IIS, vous devez [configurer IIS pour la journalisation](https://technet.microsoft.com/library/hh831775.aspx).</span><span class="sxs-lookup"><span data-stu-id="85467-108">Log Analytics collects entries from log files created by IIS, so you must [configure IIS for logging](https://technet.microsoft.com/library/hh831775.aspx).</span></span>

<span data-ttu-id="85467-109">Log Analytics prend en charge uniquement les fichiers journaux IIS stockés au format W3C, et ne prend pas en charge les champs personnalisés ou IIS Advanced Logging.</span><span class="sxs-lookup"><span data-stu-id="85467-109">Log Analytics only supports IIS log files stored in W3C format and does not support custom fields or IIS Advanced Logging.</span></span>  
<span data-ttu-id="85467-110">Log Analytics ne collecte pas de journaux aux formats natifs NCSA ou IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-110">Log Analytics does not collect logs in NCSA or IIS native format.</span></span>

<span data-ttu-id="85467-111">Configurez les journaux IIS dans Log Analytics à partir du [menu Données dans Paramètres Log Analytics](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="85467-111">Configure IIS logs in Log Analytics from the [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>  <span data-ttu-id="85467-112">Aucune configuration n’est requise autre que la sélection de l’option **Collecter les fichiers journaux IIS au format W3C**.</span><span class="sxs-lookup"><span data-stu-id="85467-112">There is no configuration required other than selecting **Collect W3C format IIS log files**.</span></span>

<span data-ttu-id="85467-113">Quand vous activez la collecte de journaux IIS, nous vous recommandons de configurer le paramètre de substitution de journal IIS sur chaque serveur.</span><span class="sxs-lookup"><span data-stu-id="85467-113">We recommend that when you enable IIS log collection, you should configure the IIS log rollover setting on each server.</span></span>

## <a name="data-collection"></a><span data-ttu-id="85467-114">Collecte des données</span><span class="sxs-lookup"><span data-stu-id="85467-114">Data collection</span></span>
<span data-ttu-id="85467-115">Log Analytics collecte les entrées du journal IIS de chaque source connectée toutes les 15 minutes environ.</span><span class="sxs-lookup"><span data-stu-id="85467-115">Log Analytics collects IIS log entries from each connected source approximately every 15 minutes.</span></span>  <span data-ttu-id="85467-116">L’agent enregistre sa position dans chaque journal des événements à partir duquel il collecte.</span><span class="sxs-lookup"><span data-stu-id="85467-116">The agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="85467-117">Si l’agent est mis hors connexion, Log Analytics collecte les événements à partir de la position où il s’était arrêté, même si ces événements ont été créés lorsque l’agent était hors connexion.</span><span class="sxs-lookup"><span data-stu-id="85467-117">If the agent goes offline, then Log Analytics collects events from where it last left off, even if those events were created while the agent was offline.</span></span>

## <a name="iis-log-record-properties"></a><span data-ttu-id="85467-118">Propriétés d’enregistrement de journal IIS</span><span class="sxs-lookup"><span data-stu-id="85467-118">IIS log record properties</span></span>
<span data-ttu-id="85467-119">Les enregistrements de journal IIS sont de type **W3CIISLog** et leurs propriétés sont décrites dans le tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="85467-119">IIS log records have a type of **W3CIISLog** and have the properties in the following table:</span></span>

| <span data-ttu-id="85467-120">Propriété</span><span class="sxs-lookup"><span data-stu-id="85467-120">Property</span></span> | <span data-ttu-id="85467-121">Description</span><span class="sxs-lookup"><span data-stu-id="85467-121">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="85467-122">Ordinateur</span><span class="sxs-lookup"><span data-stu-id="85467-122">Computer</span></span> |<span data-ttu-id="85467-123">Nom de l'ordinateur à partir duquel l'événement a été collecté.</span><span class="sxs-lookup"><span data-stu-id="85467-123">Name of the computer that the event was collected from.</span></span> |
| <span data-ttu-id="85467-124">cIP</span><span class="sxs-lookup"><span data-stu-id="85467-124">cIP</span></span> |<span data-ttu-id="85467-125">Adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="85467-125">IP address of the client.</span></span> |
| <span data-ttu-id="85467-126">csMethod</span><span class="sxs-lookup"><span data-stu-id="85467-126">csMethod</span></span> |<span data-ttu-id="85467-127">Méthode de la requête, par exemple GET ou POST.</span><span class="sxs-lookup"><span data-stu-id="85467-127">Method of the request such as GET or POST.</span></span> |
| <span data-ttu-id="85467-128">csReferer</span><span class="sxs-lookup"><span data-stu-id="85467-128">csReferer</span></span> |<span data-ttu-id="85467-129">Site à partir duquel l'utilisateur a suivi un lien vers le site actuel.</span><span class="sxs-lookup"><span data-stu-id="85467-129">Site that the user followed a link from to the current site.</span></span> |
| <span data-ttu-id="85467-130">csUserAgent</span><span class="sxs-lookup"><span data-stu-id="85467-130">csUserAgent</span></span> |<span data-ttu-id="85467-131">Type de navigateur du client.</span><span class="sxs-lookup"><span data-stu-id="85467-131">Browser type of the client.</span></span> |
| <span data-ttu-id="85467-132">csUserName</span><span class="sxs-lookup"><span data-stu-id="85467-132">csUserName</span></span> |<span data-ttu-id="85467-133">Nom de l'utilisateur authentifié qui a accédé au serveur.</span><span class="sxs-lookup"><span data-stu-id="85467-133">Name of the authenticated user that accessed the server.</span></span> <span data-ttu-id="85467-134">Les utilisateurs anonymes sont indiqués par un trait d'union.</span><span class="sxs-lookup"><span data-stu-id="85467-134">Anonymous users are indicated by a hyphen.</span></span> |
| <span data-ttu-id="85467-135">csUriStem</span><span class="sxs-lookup"><span data-stu-id="85467-135">csUriStem</span></span> |<span data-ttu-id="85467-136">Cible de la requête, par exemple une page web.</span><span class="sxs-lookup"><span data-stu-id="85467-136">Target of the request such as a web page.</span></span> |
| <span data-ttu-id="85467-137">csUriQuery</span><span class="sxs-lookup"><span data-stu-id="85467-137">csUriQuery</span></span> |<span data-ttu-id="85467-138">Requête, le cas échéant, que le client tentait d'effectuer.</span><span class="sxs-lookup"><span data-stu-id="85467-138">Query, if any, that the client was trying to perform.</span></span> |
| <span data-ttu-id="85467-139">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="85467-139">ManagementGroupName</span></span> |<span data-ttu-id="85467-140">Nom du groupe d’administration pour les agents Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="85467-140">Name of the management group for Operations Manager agents.</span></span>  <span data-ttu-id="85467-141">Pour les autres agents, il s’agit d’AOI-\<workspace ID\></span><span class="sxs-lookup"><span data-stu-id="85467-141">For other agents, this is AOI-\<workspace ID\></span></span> |
| <span data-ttu-id="85467-142">RemoteIPCountry</span><span class="sxs-lookup"><span data-stu-id="85467-142">RemoteIPCountry</span></span> |<span data-ttu-id="85467-143">Pays de l'adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="85467-143">Country of the IP address of the client.</span></span> |
| <span data-ttu-id="85467-144">RemoteIPLatitude</span><span class="sxs-lookup"><span data-stu-id="85467-144">RemoteIPLatitude</span></span> |<span data-ttu-id="85467-145">Latitude de l'adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="85467-145">Latitude of the client IP address.</span></span> |
| <span data-ttu-id="85467-146">RemoteIPLongitude</span><span class="sxs-lookup"><span data-stu-id="85467-146">RemoteIPLongitude</span></span> |<span data-ttu-id="85467-147">Longitude de l'adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="85467-147">Longitude of the client IP address.</span></span> |
| <span data-ttu-id="85467-148">scStatus</span><span class="sxs-lookup"><span data-stu-id="85467-148">scStatus</span></span> |<span data-ttu-id="85467-149">Code d'état HTTP.</span><span class="sxs-lookup"><span data-stu-id="85467-149">HTTP status code.</span></span> |
| <span data-ttu-id="85467-150">scSubStatus</span><span class="sxs-lookup"><span data-stu-id="85467-150">scSubStatus</span></span> |<span data-ttu-id="85467-151">Code d'erreur du sous-état.</span><span class="sxs-lookup"><span data-stu-id="85467-151">Substatus error code.</span></span> |
| <span data-ttu-id="85467-152">scWin32Status</span><span class="sxs-lookup"><span data-stu-id="85467-152">scWin32Status</span></span> |<span data-ttu-id="85467-153">Code d’état Windows.</span><span class="sxs-lookup"><span data-stu-id="85467-153">Windows status code.</span></span> |
| <span data-ttu-id="85467-154">sIP</span><span class="sxs-lookup"><span data-stu-id="85467-154">sIP</span></span> |<span data-ttu-id="85467-155">Adresse IP du serveur web.</span><span class="sxs-lookup"><span data-stu-id="85467-155">IP address of the web server.</span></span> |
| <span data-ttu-id="85467-156">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="85467-156">SourceSystem</span></span> |<span data-ttu-id="85467-157">OpsMgr</span><span class="sxs-lookup"><span data-stu-id="85467-157">OpsMgr</span></span> |
| <span data-ttu-id="85467-158">sPort</span><span class="sxs-lookup"><span data-stu-id="85467-158">sPort</span></span> |<span data-ttu-id="85467-159">Port sur le serveur auquel client est connecté.</span><span class="sxs-lookup"><span data-stu-id="85467-159">Port on the server the client connected to.</span></span> |
| <span data-ttu-id="85467-160">sSiteName</span><span class="sxs-lookup"><span data-stu-id="85467-160">sSiteName</span></span> |<span data-ttu-id="85467-161">Nom du site IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-161">Name of the IIS site.</span></span> |
| <span data-ttu-id="85467-162">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="85467-162">TimeGenerated</span></span> |<span data-ttu-id="85467-163">Date et heure de consignation de l'entrée.</span><span class="sxs-lookup"><span data-stu-id="85467-163">Date and time the entry was logged.</span></span> |
| <span data-ttu-id="85467-164">TimeTaken</span><span class="sxs-lookup"><span data-stu-id="85467-164">TimeTaken</span></span> |<span data-ttu-id="85467-165">Délai de traitement de la requête en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="85467-165">Length of time to process the request in milliseconds.</span></span> |

## <a name="log-searches-with-iis-logs"></a><span data-ttu-id="85467-166">Recherches de journaux avec les journaux IIS</span><span class="sxs-lookup"><span data-stu-id="85467-166">Log searches with IIS logs</span></span>
<span data-ttu-id="85467-167">Le tableau suivant fournit plusieurs exemples de requêtes de journaux qui extraient des enregistrements de journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-167">The following table provides different examples of log queries that retrieve IIS log records.</span></span>

| <span data-ttu-id="85467-168">Interroger</span><span class="sxs-lookup"><span data-stu-id="85467-168">Query</span></span> | <span data-ttu-id="85467-169">Description</span><span class="sxs-lookup"><span data-stu-id="85467-169">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="85467-170">Type=W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="85467-170">Type=W3CIISLog</span></span> |<span data-ttu-id="85467-171">Tous les enregistrements de journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-171">All IIS log records.</span></span> |
| <span data-ttu-id="85467-172">Type=W3CIISLog scStatus=500</span><span class="sxs-lookup"><span data-stu-id="85467-172">Type=W3CIISLog scStatus=500</span></span> |<span data-ttu-id="85467-173">Tous les enregistrements de journaux IIS dont l’état renvoyé est 500.</span><span class="sxs-lookup"><span data-stu-id="85467-173">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="85467-174">Type=W3CIISLog &#124; Measure count() by cIP</span><span class="sxs-lookup"><span data-stu-id="85467-174">Type=W3CIISLog &#124; Measure count() by cIP</span></span> |<span data-ttu-id="85467-175">Nombre d’entrées de journaux IIS par adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="85467-175">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="85467-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span><span class="sxs-lookup"><span data-stu-id="85467-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span></span> |<span data-ttu-id="85467-177">Nombre d’entrées de journaux IIS par URL pour l'hôte www.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="85467-177">Count of IIS log entries by URL for the host www.contoso.com.</span></span> |
| <span data-ttu-id="85467-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span><span class="sxs-lookup"><span data-stu-id="85467-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span></span> |<span data-ttu-id="85467-179">Nombre total d'octets reçus par chaque ordinateur IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-179">Total bytes received by each IIS computer.</span></span> |

>[!NOTE]
> <span data-ttu-id="85467-180">Si vous avez mis à niveau votre espace de travail vers le [nouveau langage de requête Log Analytics](log-analytics-log-search-upgrade.md), les requêtes ci-dessus sont remplacées par les requêtes ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="85467-180">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="85467-181">Interroger</span><span class="sxs-lookup"><span data-stu-id="85467-181">Query</span></span> | <span data-ttu-id="85467-182">Description</span><span class="sxs-lookup"><span data-stu-id="85467-182">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="85467-183">W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="85467-183">W3CIISLog</span></span> |<span data-ttu-id="85467-184">Tous les enregistrements de journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-184">All IIS log records.</span></span> |
| <span data-ttu-id="85467-185">W3CIISLog &#124; où scStatus==500</span><span class="sxs-lookup"><span data-stu-id="85467-185">W3CIISLog &#124; where scStatus==500</span></span> |<span data-ttu-id="85467-186">Tous les enregistrements de journaux IIS dont l’état renvoyé est 500.</span><span class="sxs-lookup"><span data-stu-id="85467-186">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="85467-187">W3CIISLog &#124; résumer count() par cIP</span><span class="sxs-lookup"><span data-stu-id="85467-187">W3CIISLog &#124; summarize count() by cIP</span></span> |<span data-ttu-id="85467-188">Nombre d’entrées de journaux IIS par adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="85467-188">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="85467-189">W3CIISLog &#124; où csHost==« www.contoso.com » &#124; résumer count() par csUriStem</span><span class="sxs-lookup"><span data-stu-id="85467-189">W3CIISLog &#124; where csHost=="www.contoso.com" &#124; summarize count() by csUriStem</span></span> |<span data-ttu-id="85467-190">Nombre d’entrées de journaux IIS par URL pour l'hôte www.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="85467-190">Count of IIS log entries by URL for the host www.contoso.com.</span></span> |
| <span data-ttu-id="85467-191">W3CIISLog &#124; résumer sum(csBytes) par ordinateur &#124; prendre 500000</span><span class="sxs-lookup"><span data-stu-id="85467-191">W3CIISLog &#124; summarize sum(csBytes) by Computer &#124; take 500000</span></span> |<span data-ttu-id="85467-192">Nombre total d'octets reçus par chaque ordinateur IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-192">Total bytes received by each IIS computer.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="85467-193">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="85467-193">Next steps</span></span>
* <span data-ttu-id="85467-194">Configurez Log Analytics pour collecter d’autres [sources de données](log-analytics-data-sources.md) à analyser.</span><span class="sxs-lookup"><span data-stu-id="85467-194">Configure Log Analytics to collect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="85467-195">Découvrez les [recherches de journaux](log-analytics-log-searches.md) pour analyser les données collectées à partir de sources de données et de solutions.</span><span class="sxs-lookup"><span data-stu-id="85467-195">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>
* <span data-ttu-id="85467-196">Configurez les alertes dans Log Analytics pour être informé de façon proactive des conditions importantes rencontrées dans les journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="85467-196">Configure alerts in Log Analytics to proactively notify you of important conditions found in IIS logs.</span></span>
