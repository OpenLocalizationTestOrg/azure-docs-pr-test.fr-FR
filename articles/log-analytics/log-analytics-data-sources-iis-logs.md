---
title: aaaIIS consigne dans le journal Analytique | Documents Microsoft
description: "Internet Information Services (IIS) enregistre l'activité des utilisateurs dans des fichiers journaux qui peuvent être collectés par Log Analytics.  Cet article décrit comment collection tooconfigure de journaux IIS et les détails des enregistrements de hello créent dans le référentiel d’OMS hello."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: cec5ff0a-01f5-4262-b2e8-e3db7b7467d2
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: bwren
ms.openlocfilehash: c5575351090cdabaf651bcb49867794ee3a4b6e6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="iis-logs-in-log-analytics"></a><span data-ttu-id="13499-104">Journaux IIS dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="13499-104">IIS logs in Log Analytics</span></span>
<span data-ttu-id="13499-105">Internet Information Services (IIS) enregistre l'activité des utilisateurs dans des fichiers journaux qui peuvent être collectés par Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="13499-105">Internet Information Services (IIS) stores user activity in log files that can be collected by Log Analytics.</span></span>  

![Journaux IIS](media/log-analytics-data-sources-iis-logs/overview.png)

## <a name="configuring-iis-logs"></a><span data-ttu-id="13499-107">Configuration de journaux IIS</span><span class="sxs-lookup"><span data-stu-id="13499-107">Configuring IIS logs</span></span>
<span data-ttu-id="13499-108">Log Analytics regroupant les entrées des fichiers journaux créés par IIS, vous devez [configurer IIS pour la journalisation](https://technet.microsoft.com/library/hh831775.aspx).</span><span class="sxs-lookup"><span data-stu-id="13499-108">Log Analytics collects entries from log files created by IIS, so you must [configure IIS for logging](https://technet.microsoft.com/library/hh831775.aspx).</span></span>

<span data-ttu-id="13499-109">Log Analytics prend en charge uniquement les fichiers journaux IIS stockés au format W3C, et ne prend pas en charge les champs personnalisés ou IIS Advanced Logging.</span><span class="sxs-lookup"><span data-stu-id="13499-109">Log Analytics only supports IIS log files stored in W3C format and does not support custom fields or IIS Advanced Logging.</span></span>  
<span data-ttu-id="13499-110">Log Analytics ne collecte pas de journaux aux formats natifs NCSA ou IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-110">Log Analytics does not collect logs in NCSA or IIS native format.</span></span>

<span data-ttu-id="13499-111">Configurer les journaux IIS dans le journal Analytique de hello [menu données de paramètres de journal Analytique](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="13499-111">Configure IIS logs in Log Analytics from hello [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>  <span data-ttu-id="13499-112">Aucune configuration n’est requise autre que la sélection de l’option **Collecter les fichiers journaux IIS au format W3C**.</span><span class="sxs-lookup"><span data-stu-id="13499-112">There is no configuration required other than selecting **Collect W3C format IIS log files**.</span></span>

<span data-ttu-id="13499-113">Nous recommandons que, lorsque vous activez la collecte de journaux IIS, vous devez configurer le paramètre de substitution journal hello IIS sur chaque serveur.</span><span class="sxs-lookup"><span data-stu-id="13499-113">We recommend that when you enable IIS log collection, you should configure hello IIS log rollover setting on each server.</span></span>

## <a name="data-collection"></a><span data-ttu-id="13499-114">Collecte des données</span><span class="sxs-lookup"><span data-stu-id="13499-114">Data collection</span></span>
<span data-ttu-id="13499-115">Log Analytics collecte les entrées du journal IIS de chaque source connectée toutes les 15 minutes environ.</span><span class="sxs-lookup"><span data-stu-id="13499-115">Log Analytics collects IIS log entries from each connected source approximately every 15 minutes.</span></span>  <span data-ttu-id="13499-116">l’agent Hello enregistre sa place dans chaque journal des événements qu’il collecte à partir de.</span><span class="sxs-lookup"><span data-stu-id="13499-116">hello agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="13499-117">Si l’agent de hello est mis hors connexion, puis Analytique de journal collecte les événements à partir de l’endroit où il s’était arrêté, même si ces événements ont été créés lors de l’agent de hello est hors connexion.</span><span class="sxs-lookup"><span data-stu-id="13499-117">If hello agent goes offline, then Log Analytics collects events from where it last left off, even if those events were created while hello agent was offline.</span></span>

## <a name="iis-log-record-properties"></a><span data-ttu-id="13499-118">Propriétés d’enregistrement de journal IIS</span><span class="sxs-lookup"><span data-stu-id="13499-118">IIS log record properties</span></span>
<span data-ttu-id="13499-119">Enregistrements de journal IIS ont un type de **W3CIISLog** et ont des propriétés de hello Bonjour tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="13499-119">IIS log records have a type of **W3CIISLog** and have hello properties in hello following table:</span></span>

| <span data-ttu-id="13499-120">Propriété</span><span class="sxs-lookup"><span data-stu-id="13499-120">Property</span></span> | <span data-ttu-id="13499-121">Description</span><span class="sxs-lookup"><span data-stu-id="13499-121">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="13499-122">Ordinateur</span><span class="sxs-lookup"><span data-stu-id="13499-122">Computer</span></span> |<span data-ttu-id="13499-123">Nom de l’ordinateur hello hello événements ont été collectée à partir de.</span><span class="sxs-lookup"><span data-stu-id="13499-123">Name of hello computer that hello event was collected from.</span></span> |
| <span data-ttu-id="13499-124">cIP</span><span class="sxs-lookup"><span data-stu-id="13499-124">cIP</span></span> |<span data-ttu-id="13499-125">Adresse IP du client de hello.</span><span class="sxs-lookup"><span data-stu-id="13499-125">IP address of hello client.</span></span> |
| <span data-ttu-id="13499-126">csMethod</span><span class="sxs-lookup"><span data-stu-id="13499-126">csMethod</span></span> |<span data-ttu-id="13499-127">Méthode de demande de hello tels que GET ou POST.</span><span class="sxs-lookup"><span data-stu-id="13499-127">Method of hello request such as GET or POST.</span></span> |
| <span data-ttu-id="13499-128">csReferer</span><span class="sxs-lookup"><span data-stu-id="13499-128">csReferer</span></span> |<span data-ttu-id="13499-129">Site que hello utilisateur cliqué sur le lien de site en cours de toohello.</span><span class="sxs-lookup"><span data-stu-id="13499-129">Site that hello user followed a link from toohello current site.</span></span> |
| <span data-ttu-id="13499-130">csUserAgent</span><span class="sxs-lookup"><span data-stu-id="13499-130">csUserAgent</span></span> |<span data-ttu-id="13499-131">Type de navigateur du client de hello.</span><span class="sxs-lookup"><span data-stu-id="13499-131">Browser type of hello client.</span></span> |
| <span data-ttu-id="13499-132">csUserName</span><span class="sxs-lookup"><span data-stu-id="13499-132">csUserName</span></span> |<span data-ttu-id="13499-133">Nom de hello de l’utilisateur qui a accédé hello serveur authentifié.</span><span class="sxs-lookup"><span data-stu-id="13499-133">Name of hello authenticated user that accessed hello server.</span></span> <span data-ttu-id="13499-134">Les utilisateurs anonymes sont indiqués par un trait d'union.</span><span class="sxs-lookup"><span data-stu-id="13499-134">Anonymous users are indicated by a hyphen.</span></span> |
| <span data-ttu-id="13499-135">csUriStem</span><span class="sxs-lookup"><span data-stu-id="13499-135">csUriStem</span></span> |<span data-ttu-id="13499-136">Cible de la demande de hello telle qu’une page web.</span><span class="sxs-lookup"><span data-stu-id="13499-136">Target of hello request such as a web page.</span></span> |
| <span data-ttu-id="13499-137">csUriQuery</span><span class="sxs-lookup"><span data-stu-id="13499-137">csUriQuery</span></span> |<span data-ttu-id="13499-138">La requête, le cas échéant, que le client hello tentait tooperform.</span><span class="sxs-lookup"><span data-stu-id="13499-138">Query, if any, that hello client was trying tooperform.</span></span> |
| <span data-ttu-id="13499-139">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="13499-139">ManagementGroupName</span></span> |<span data-ttu-id="13499-140">Nom du groupe d’administration hello pour les agents d’Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="13499-140">Name of hello management group for Operations Manager agents.</span></span>  <span data-ttu-id="13499-141">Pour les autres agents, il s’agit d’AOI-\<workspace ID\></span><span class="sxs-lookup"><span data-stu-id="13499-141">For other agents, this is AOI-\<workspace ID\></span></span> |
| <span data-ttu-id="13499-142">RemoteIPCountry</span><span class="sxs-lookup"><span data-stu-id="13499-142">RemoteIPCountry</span></span> |<span data-ttu-id="13499-143">Pays de l’adresse IP de hello du client de hello.</span><span class="sxs-lookup"><span data-stu-id="13499-143">Country of hello IP address of hello client.</span></span> |
| <span data-ttu-id="13499-144">RemoteIPLatitude</span><span class="sxs-lookup"><span data-stu-id="13499-144">RemoteIPLatitude</span></span> |<span data-ttu-id="13499-145">Latitude de l’adresse IP du client hello.</span><span class="sxs-lookup"><span data-stu-id="13499-145">Latitude of hello client IP address.</span></span> |
| <span data-ttu-id="13499-146">RemoteIPLongitude</span><span class="sxs-lookup"><span data-stu-id="13499-146">RemoteIPLongitude</span></span> |<span data-ttu-id="13499-147">Longitude de l’adresse IP du client hello.</span><span class="sxs-lookup"><span data-stu-id="13499-147">Longitude of hello client IP address.</span></span> |
| <span data-ttu-id="13499-148">scStatus</span><span class="sxs-lookup"><span data-stu-id="13499-148">scStatus</span></span> |<span data-ttu-id="13499-149">Code d'état HTTP.</span><span class="sxs-lookup"><span data-stu-id="13499-149">HTTP status code.</span></span> |
| <span data-ttu-id="13499-150">scSubStatus</span><span class="sxs-lookup"><span data-stu-id="13499-150">scSubStatus</span></span> |<span data-ttu-id="13499-151">Code d'erreur du sous-état.</span><span class="sxs-lookup"><span data-stu-id="13499-151">Substatus error code.</span></span> |
| <span data-ttu-id="13499-152">scWin32Status</span><span class="sxs-lookup"><span data-stu-id="13499-152">scWin32Status</span></span> |<span data-ttu-id="13499-153">Code d’état Windows.</span><span class="sxs-lookup"><span data-stu-id="13499-153">Windows status code.</span></span> |
| <span data-ttu-id="13499-154">sIP</span><span class="sxs-lookup"><span data-stu-id="13499-154">sIP</span></span> |<span data-ttu-id="13499-155">Adresse IP du serveur web de hello.</span><span class="sxs-lookup"><span data-stu-id="13499-155">IP address of hello web server.</span></span> |
| <span data-ttu-id="13499-156">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="13499-156">SourceSystem</span></span> |<span data-ttu-id="13499-157">OpsMgr</span><span class="sxs-lookup"><span data-stu-id="13499-157">OpsMgr</span></span> |
| <span data-ttu-id="13499-158">sPort</span><span class="sxs-lookup"><span data-stu-id="13499-158">sPort</span></span> |<span data-ttu-id="13499-159">Hello serveur hello client connecté au port.</span><span class="sxs-lookup"><span data-stu-id="13499-159">Port on hello server hello client connected to.</span></span> |
| <span data-ttu-id="13499-160">sSiteName</span><span class="sxs-lookup"><span data-stu-id="13499-160">sSiteName</span></span> |<span data-ttu-id="13499-161">Nom de site IIS de hello.</span><span class="sxs-lookup"><span data-stu-id="13499-161">Name of hello IIS site.</span></span> |
| <span data-ttu-id="13499-162">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="13499-162">TimeGenerated</span></span> |<span data-ttu-id="13499-163">Date et heure hello est consignée.</span><span class="sxs-lookup"><span data-stu-id="13499-163">Date and time hello entry was logged.</span></span> |
| <span data-ttu-id="13499-164">TimeTaken</span><span class="sxs-lookup"><span data-stu-id="13499-164">TimeTaken</span></span> |<span data-ttu-id="13499-165">Demande de longueur de hello tooprocess de temps en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="13499-165">Length of time tooprocess hello request in milliseconds.</span></span> |

## <a name="log-searches-with-iis-logs"></a><span data-ttu-id="13499-166">Recherches de journaux avec les journaux IIS</span><span class="sxs-lookup"><span data-stu-id="13499-166">Log searches with IIS logs</span></span>
<span data-ttu-id="13499-167">Hello tableau suivant fournit des exemples de requêtes de journal qui extrait des enregistrements de journal IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-167">hello following table provides different examples of log queries that retrieve IIS log records.</span></span>

| <span data-ttu-id="13499-168">Interroger</span><span class="sxs-lookup"><span data-stu-id="13499-168">Query</span></span> | <span data-ttu-id="13499-169">Description</span><span class="sxs-lookup"><span data-stu-id="13499-169">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="13499-170">Type=W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="13499-170">Type=W3CIISLog</span></span> |<span data-ttu-id="13499-171">Tous les enregistrements de journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-171">All IIS log records.</span></span> |
| <span data-ttu-id="13499-172">Type=W3CIISLog scStatus=500</span><span class="sxs-lookup"><span data-stu-id="13499-172">Type=W3CIISLog scStatus=500</span></span> |<span data-ttu-id="13499-173">Tous les enregistrements de journaux IIS dont l’état renvoyé est 500.</span><span class="sxs-lookup"><span data-stu-id="13499-173">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="13499-174">Type=W3CIISLog &#124; Measure count() by cIP</span><span class="sxs-lookup"><span data-stu-id="13499-174">Type=W3CIISLog &#124; Measure count() by cIP</span></span> |<span data-ttu-id="13499-175">Nombre d’entrées de journaux IIS par adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="13499-175">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="13499-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span><span class="sxs-lookup"><span data-stu-id="13499-176">Type=W3CIISLog csHost="www.contoso.com" &#124; Measure count() by csUriStem</span></span> |<span data-ttu-id="13499-177">Nombre d’IIS entrées du journal par URL pour hello hôte www.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="13499-177">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="13499-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span><span class="sxs-lookup"><span data-stu-id="13499-178">Type=W3CIISLog &#124; Measure Sum(csBytes) by Computer &#124; top 500000</span></span> |<span data-ttu-id="13499-179">Nombre total d'octets reçus par chaque ordinateur IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-179">Total bytes received by each IIS computer.</span></span> |

>[!NOTE]
> <span data-ttu-id="13499-180">Si votre espace de travail a été mis à niveau toohello [Analytique de journal nouveau langage de requête](log-analytics-log-search-upgrade.md), puis hello ci-dessus requêtes modifierait toohello suivant.</span><span class="sxs-lookup"><span data-stu-id="13499-180">If your workspace has been upgraded toohello [new Log Analytics query language](log-analytics-log-search-upgrade.md), then hello above queries would change toohello following.</span></span>

> | <span data-ttu-id="13499-181">Interroger</span><span class="sxs-lookup"><span data-stu-id="13499-181">Query</span></span> | <span data-ttu-id="13499-182">Description</span><span class="sxs-lookup"><span data-stu-id="13499-182">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="13499-183">W3CIISLog</span><span class="sxs-lookup"><span data-stu-id="13499-183">W3CIISLog</span></span> |<span data-ttu-id="13499-184">Tous les enregistrements de journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-184">All IIS log records.</span></span> |
| <span data-ttu-id="13499-185">W3CIISLog &#124; où scStatus==500</span><span class="sxs-lookup"><span data-stu-id="13499-185">W3CIISLog &#124; where scStatus==500</span></span> |<span data-ttu-id="13499-186">Tous les enregistrements de journaux IIS dont l’état renvoyé est 500.</span><span class="sxs-lookup"><span data-stu-id="13499-186">All IIS log records with a return status of 500.</span></span> |
| <span data-ttu-id="13499-187">W3CIISLog &#124; résumer count() par cIP</span><span class="sxs-lookup"><span data-stu-id="13499-187">W3CIISLog &#124; summarize count() by cIP</span></span> |<span data-ttu-id="13499-188">Nombre d’entrées de journaux IIS par adresse IP du client.</span><span class="sxs-lookup"><span data-stu-id="13499-188">Count of IIS log entries by client IP address.</span></span> |
| <span data-ttu-id="13499-189">W3CIISLog &#124; où csHost==« www.contoso.com » &#124; résumer count() par csUriStem</span><span class="sxs-lookup"><span data-stu-id="13499-189">W3CIISLog &#124; where csHost=="www.contoso.com" &#124; summarize count() by csUriStem</span></span> |<span data-ttu-id="13499-190">Nombre d’IIS entrées du journal par URL pour hello hôte www.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="13499-190">Count of IIS log entries by URL for hello host www.contoso.com.</span></span> |
| <span data-ttu-id="13499-191">W3CIISLog &#124; résumer sum(csBytes) par ordinateur &#124; prendre 500000</span><span class="sxs-lookup"><span data-stu-id="13499-191">W3CIISLog &#124; summarize sum(csBytes) by Computer &#124; take 500000</span></span> |<span data-ttu-id="13499-192">Nombre total d'octets reçus par chaque ordinateur IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-192">Total bytes received by each IIS computer.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="13499-193">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="13499-193">Next steps</span></span>
* <span data-ttu-id="13499-194">Configurer le journal Analytique toocollect autres [des sources de données](log-analytics-data-sources.md) pour l’analyse.</span><span class="sxs-lookup"><span data-stu-id="13499-194">Configure Log Analytics toocollect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="13499-195">En savoir plus sur [recherche de journal](log-analytics-log-searches.md) tooanalyze les données de salutation collectées à partir de sources de données et les solutions possibles.</span><span class="sxs-lookup"><span data-stu-id="13499-195">Learn about [log searches](log-analytics-log-searches.md) tooanalyze hello data collected from data sources and solutions.</span></span>
* <span data-ttu-id="13499-196">Configurer des alertes Analytique de journal tooproactively vous avertir des conditions importantes trouvées dans les journaux IIS.</span><span class="sxs-lookup"><span data-stu-id="13499-196">Configure alerts in Log Analytics tooproactively notify you of important conditions found in IIS logs.</span></span>
