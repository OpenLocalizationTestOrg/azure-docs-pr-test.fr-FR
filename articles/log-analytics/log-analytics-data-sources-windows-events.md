---
title: "Collecter et analyser les journaux des événements Windows dans OMS Log Analytics | Microsoft Docs"
description: "Les journaux d’événements Windows sont une des sources de données les plus couramment utilisées par Log Analytics.  Cet article décrit comment configurer la collecte des journaux d’événements Windows et des détails des enregistrements qu'ils créent dans le référentiel OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: tysonn
ms.assetid: ee52f564-995b-450f-a6ba-0d7b1dac3f32
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: 1be8500ec2cb78ef0edf57f4d8561336cf00ebcb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="windows-event-log-data-sources-in-log-analytics"></a><span data-ttu-id="367cc-104">Sources de données de journal d’événements Windows dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="367cc-104">Windows event log data sources in Log Analytics</span></span>
<span data-ttu-id="367cc-105">Les journaux d’événements Windows sont les [sources de données](log-analytics-data-sources.md) les plus communément utilisées pour collecter des données à l’aide d’agents Windows puisque de nombreuses applications écrivent dans le journal d’événements Windows.</span><span class="sxs-lookup"><span data-stu-id="367cc-105">Windows Event logs are one of the most common [data sources](log-analytics-data-sources.md) for collecting data using Windows agents since many applications write to the Windows event log.</span></span>  <span data-ttu-id="367cc-106">Vous pouvez collecter des événements à partir de journaux standard tels que Système et Application, ou spécifier des journaux personnalisés créés par les applications que vous souhaitez surveiller.</span><span class="sxs-lookup"><span data-stu-id="367cc-106">You can collect events from standard logs such as System and Application in addition to specifying any custom logs created by applications you need to monitor.</span></span>

![Événements Windows](media/log-analytics-data-sources-windows-events/overview.png)     

## <a name="configuring-windows-event-logs"></a><span data-ttu-id="367cc-108">Configuration des journaux d’événements Windows</span><span class="sxs-lookup"><span data-stu-id="367cc-108">Configuring Windows Event logs</span></span>
<span data-ttu-id="367cc-109">Configurez les journaux des événements Windows à partir du [menu Données dans Paramètres de Log Analytics](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="367cc-109">Configure Windows Event logs from the [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>

<span data-ttu-id="367cc-110">Log Analytics collecte uniquement les événements des journaux d’événements Windows spécifiés dans les paramètres.</span><span class="sxs-lookup"><span data-stu-id="367cc-110">Log Analytics only collects events from the Windows event logs that are specified in the settings.</span></span>  <span data-ttu-id="367cc-111">Vous pouvez ajouter un journal d’événements en tapant le nom du journal puis en cliquant sur **+**.</span><span class="sxs-lookup"><span data-stu-id="367cc-111">You can add an event log by typing in the name of the log and clicking **+**.</span></span>  <span data-ttu-id="367cc-112">Pour chaque journal, seuls les événements avec les niveaux de gravité sélectionnés sont collectés.</span><span class="sxs-lookup"><span data-stu-id="367cc-112">For each log, only the events with the selected severities are collected.</span></span>  <span data-ttu-id="367cc-113">Vérifiez les niveaux de gravité du journal que vous souhaitez collecter.</span><span class="sxs-lookup"><span data-stu-id="367cc-113">Check the severities for the particular log that you want to collect.</span></span>  <span data-ttu-id="367cc-114">Vous ne pouvez pas fournir d’autres critères supplémentaires pour filtrer les événements.</span><span class="sxs-lookup"><span data-stu-id="367cc-114">You cannot provide any additional criteria to filter events.</span></span>

<span data-ttu-id="367cc-115">Lorsque vous saisissez le nom d’un journal d’événements, Log Analytics suggère des noms communs de journaux d’événements.</span><span class="sxs-lookup"><span data-stu-id="367cc-115">As you type the name of an event log, Log Analytics provides suggestions of common event log names.</span></span> <span data-ttu-id="367cc-116">Si le journal que vous voulez ajouter n’apparaît pas dans la liste, vous pouvez l’ajouter en saisissant le nom complet du journal.</span><span class="sxs-lookup"><span data-stu-id="367cc-116">If the log you want to add does not appear in the list, you can still add it by typing in the full name of the log.</span></span> <span data-ttu-id="367cc-117">Vous trouverez le nom complet du journal à l’aide de l’Observateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="367cc-117">You can find the full name of the log by using event viewer.</span></span> <span data-ttu-id="367cc-118">Dans l’Observateur d’événements, ouvrez la page *Propriétés* du journal et copiez la chaîne du champ *Nom complet*.</span><span class="sxs-lookup"><span data-stu-id="367cc-118">In event viewer, open the *Properties* page for the log and copy the string from the *Full Name* field.</span></span>

![Configurer les événements Windows](media/log-analytics-data-sources-windows-events/configure.png)

## <a name="data-collection"></a><span data-ttu-id="367cc-120">Collecte des données</span><span class="sxs-lookup"><span data-stu-id="367cc-120">Data collection</span></span>
<span data-ttu-id="367cc-121">Log Analytics collecte chaque événement correspondant à un niveau de gravité sélectionné à partir d'un journal d’événements surveillé à mesure que l'événement est créé.</span><span class="sxs-lookup"><span data-stu-id="367cc-121">Log Analytics collects each event that matches a selected severity from a monitored event log as the event is created.</span></span>  <span data-ttu-id="367cc-122">L’agent enregistre sa position dans chaque journal des événements à partir duquel il collecte.</span><span class="sxs-lookup"><span data-stu-id="367cc-122">The agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="367cc-123">Si l’agent est mis hors connexion pendant un moment, Log Analytics collecte les événements à partir de là où il s’était arrêté, même si ces événements ont été créés lorsque l’agent était hors connexion.</span><span class="sxs-lookup"><span data-stu-id="367cc-123">If the agent goes offline for a period of time, then Log Analytics collects events from where it last left off, even if those events were created while the agent was offline.</span></span>  <span data-ttu-id="367cc-124">Il est possible que ces événements ne soient pas collectés si des événements non collectés d’un journal sont écrasés pendant que l’agent est hors connexion.</span><span class="sxs-lookup"><span data-stu-id="367cc-124">There is a potential for these events to not be collected if the event log wraps with uncollected events being overwritten while the agent is offline.</span></span>

>[!NOTE]
><span data-ttu-id="367cc-125">Log Analytics ne collecte pas les événements d’audit créés par SQL Server à partir de la source *MSSQLSERVER* avec l’ID d’événement 18453 qui contient les mots clés - *Classic* ou *Audit Success* et le mot clé *0xa0000000000000*.</span><span class="sxs-lookup"><span data-stu-id="367cc-125">Log Analytics does not collect audit events created by SQL Server from source *MSSQLSERVER* with event ID 18453 that contains keywords - *Classic* or *Audit Success* and keyword *0xa0000000000000*.</span></span>
>

## <a name="windows-event-records-properties"></a><span data-ttu-id="367cc-126">Propriétés des enregistrements d’événements Windows</span><span class="sxs-lookup"><span data-stu-id="367cc-126">Windows event records properties</span></span>
<span data-ttu-id="367cc-127">Les enregistrements d'événements Windows sont de type **Événement** et possèdent les propriétés affichées dans le tableau suivant :</span><span class="sxs-lookup"><span data-stu-id="367cc-127">Windows event records have a type of **Event** and have the properties in the following table:</span></span>

| <span data-ttu-id="367cc-128">Propriété</span><span class="sxs-lookup"><span data-stu-id="367cc-128">Property</span></span> | <span data-ttu-id="367cc-129">Description</span><span class="sxs-lookup"><span data-stu-id="367cc-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="367cc-130">Ordinateur</span><span class="sxs-lookup"><span data-stu-id="367cc-130">Computer</span></span> |<span data-ttu-id="367cc-131">Nom de l'ordinateur à partir duquel l'événement a été collecté.</span><span class="sxs-lookup"><span data-stu-id="367cc-131">Name of the computer that the event was collected from.</span></span> |
| <span data-ttu-id="367cc-132">EventCategory</span><span class="sxs-lookup"><span data-stu-id="367cc-132">EventCategory</span></span> |<span data-ttu-id="367cc-133">Catégorie de l’événement.</span><span class="sxs-lookup"><span data-stu-id="367cc-133">Category of the event.</span></span> |
| <span data-ttu-id="367cc-134">EventData</span><span class="sxs-lookup"><span data-stu-id="367cc-134">EventData</span></span> |<span data-ttu-id="367cc-135">Toutes les données d'événement au format brut.</span><span class="sxs-lookup"><span data-stu-id="367cc-135">All event data in raw format.</span></span> |
| <span data-ttu-id="367cc-136">EventID</span><span class="sxs-lookup"><span data-stu-id="367cc-136">EventID</span></span> |<span data-ttu-id="367cc-137">Numéro de l’événement.</span><span class="sxs-lookup"><span data-stu-id="367cc-137">Number of the event.</span></span> |
| <span data-ttu-id="367cc-138">EventLevel</span><span class="sxs-lookup"><span data-stu-id="367cc-138">EventLevel</span></span> |<span data-ttu-id="367cc-139">Gravité de l'événement au format numérique.</span><span class="sxs-lookup"><span data-stu-id="367cc-139">Severity of the event in numeric form.</span></span> |
| <span data-ttu-id="367cc-140">EventLevelName</span><span class="sxs-lookup"><span data-stu-id="367cc-140">EventLevelName</span></span> |<span data-ttu-id="367cc-141">Gravité de l'événement au format texte.</span><span class="sxs-lookup"><span data-stu-id="367cc-141">Severity of the event in text form.</span></span> |
| <span data-ttu-id="367cc-142">EventLog</span><span class="sxs-lookup"><span data-stu-id="367cc-142">EventLog</span></span> |<span data-ttu-id="367cc-143">Nom du journal des événements à partir duquel l'événement a été collecté.</span><span class="sxs-lookup"><span data-stu-id="367cc-143">Name of the event log that the event was collected from.</span></span> |
| <span data-ttu-id="367cc-144">ParameterXml</span><span class="sxs-lookup"><span data-stu-id="367cc-144">ParameterXml</span></span> |<span data-ttu-id="367cc-145">Valeurs des paramètres d'événement au format XML.</span><span class="sxs-lookup"><span data-stu-id="367cc-145">Event parameter values in XML format.</span></span> |
| <span data-ttu-id="367cc-146">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="367cc-146">ManagementGroupName</span></span> |<span data-ttu-id="367cc-147">Nom du groupe d’administration pour les agents System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="367cc-147">Name of the management group for System Center Operations Manager agents.</span></span>  <span data-ttu-id="367cc-148">Pour les autres agents, cette valeur est AOI-<workspace ID></span><span class="sxs-lookup"><span data-stu-id="367cc-148">For other agents, this value is AOI-<workspace ID></span></span> |
| <span data-ttu-id="367cc-149">RenderedDescription</span><span class="sxs-lookup"><span data-stu-id="367cc-149">RenderedDescription</span></span> |<span data-ttu-id="367cc-150">Description de l'événement avec les valeurs de paramètres</span><span class="sxs-lookup"><span data-stu-id="367cc-150">Event description with parameter values</span></span> |
| <span data-ttu-id="367cc-151">Source</span><span class="sxs-lookup"><span data-stu-id="367cc-151">Source</span></span> |<span data-ttu-id="367cc-152">Source de l’événement.</span><span class="sxs-lookup"><span data-stu-id="367cc-152">Source of the event.</span></span> |
| <span data-ttu-id="367cc-153">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="367cc-153">SourceSystem</span></span> |<span data-ttu-id="367cc-154">Type d’agent auprès duquel l’événement a été collecté.</span><span class="sxs-lookup"><span data-stu-id="367cc-154">Type of agent the event was collected from.</span></span> <br> <span data-ttu-id="367cc-155">Ops Manager – Agent Windows, connexion directe ou géré par Operations Manager</span><span class="sxs-lookup"><span data-stu-id="367cc-155">OpsManager – Windows agent, either direct connect or Operations Manager managed</span></span> <br> <span data-ttu-id="367cc-156">Linux – Tous les agents Linux</span><span class="sxs-lookup"><span data-stu-id="367cc-156">Linux – All Linux agents</span></span>  <br> <span data-ttu-id="367cc-157">AzureStorage – Diagnostics Azure</span><span class="sxs-lookup"><span data-stu-id="367cc-157">AzureStorage – Azure Diagnostics</span></span> |
| <span data-ttu-id="367cc-158">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="367cc-158">TimeGenerated</span></span> |<span data-ttu-id="367cc-159">Date et heure de création de l’événement dans Windows.</span><span class="sxs-lookup"><span data-stu-id="367cc-159">Date and time the event was created in Windows.</span></span> |
| <span data-ttu-id="367cc-160">Nom d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="367cc-160">UserName</span></span> |<span data-ttu-id="367cc-161">Nom d'utilisateur du compte qui a consigné l'événement.</span><span class="sxs-lookup"><span data-stu-id="367cc-161">User name of the account that logged the event.</span></span> |

## <a name="log-searches-with-windows-events"></a><span data-ttu-id="367cc-162">Recherches de journaux avec des événements Windows</span><span class="sxs-lookup"><span data-stu-id="367cc-162">Log searches with Windows Events</span></span>
<span data-ttu-id="367cc-163">Le tableau suivant fournit plusieurs exemples de recherches qui extraient des enregistrements d’événements Windows.</span><span class="sxs-lookup"><span data-stu-id="367cc-163">The following table provides different examples of log searches that retrieve Windows Event records.</span></span>

| <span data-ttu-id="367cc-164">Interroger</span><span class="sxs-lookup"><span data-stu-id="367cc-164">Query</span></span> | <span data-ttu-id="367cc-165">Description</span><span class="sxs-lookup"><span data-stu-id="367cc-165">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="367cc-166">Type=Event</span><span class="sxs-lookup"><span data-stu-id="367cc-166">Type=Event</span></span> |<span data-ttu-id="367cc-167">Tous les événements Windows.</span><span class="sxs-lookup"><span data-stu-id="367cc-167">All Windows events.</span></span> |
| <span data-ttu-id="367cc-168">Type=Event EventLevelName=error</span><span class="sxs-lookup"><span data-stu-id="367cc-168">Type=Event EventLevelName=error</span></span> |<span data-ttu-id="367cc-169">Tous les événements Windows avec la gravité de l'erreur.</span><span class="sxs-lookup"><span data-stu-id="367cc-169">All Windows events with severity of error.</span></span> |
| <span data-ttu-id="367cc-170">Type=Event &#124; Measure count() by Source</span><span class="sxs-lookup"><span data-stu-id="367cc-170">Type=Event &#124; Measure count() by Source</span></span> |<span data-ttu-id="367cc-171">Nombre d’événements Windows par source.</span><span class="sxs-lookup"><span data-stu-id="367cc-171">Count of Windows events by source.</span></span> |
| <span data-ttu-id="367cc-172">Type=Event EventLevelName=error &#124; Measure count() by Source</span><span class="sxs-lookup"><span data-stu-id="367cc-172">Type=Event EventLevelName=error &#124; Measure count() by Source</span></span> |<span data-ttu-id="367cc-173">Nombre d’événements d’erreur Windows par source.</span><span class="sxs-lookup"><span data-stu-id="367cc-173">Count of Windows error events by source.</span></span> |


>[!NOTE]
> <span data-ttu-id="367cc-174">Si vous avez mis à niveau votre espace de travail vers le [nouveau langage de requête Log Analytics](log-analytics-log-search-upgrade.md), les requêtes ci-dessus sont remplacées par les requêtes ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="367cc-174">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>
>
>| <span data-ttu-id="367cc-175">Interroger</span><span class="sxs-lookup"><span data-stu-id="367cc-175">Query</span></span> | <span data-ttu-id="367cc-176">Description</span><span class="sxs-lookup"><span data-stu-id="367cc-176">Description</span></span> |
|:---|:---|
| <span data-ttu-id="367cc-177">Événement</span><span class="sxs-lookup"><span data-stu-id="367cc-177">Event</span></span> |<span data-ttu-id="367cc-178">Tous les événements Windows.</span><span class="sxs-lookup"><span data-stu-id="367cc-178">All Windows events.</span></span> |
| <span data-ttu-id="367cc-179">Événement &#124; où valeur EventLevelName == « erreur »</span><span class="sxs-lookup"><span data-stu-id="367cc-179">Event &#124; where EventLevelName == "error"</span></span> |<span data-ttu-id="367cc-180">Tous les événements Windows avec la gravité de l'erreur.</span><span class="sxs-lookup"><span data-stu-id="367cc-180">All Windows events with severity of error.</span></span> |
| <span data-ttu-id="367cc-181">Événement &#124; résumer count() par source</span><span class="sxs-lookup"><span data-stu-id="367cc-181">Event &#124; summarize count() by Source</span></span> |<span data-ttu-id="367cc-182">Nombre d’événements Windows par source.</span><span class="sxs-lookup"><span data-stu-id="367cc-182">Count of Windows events by source.</span></span> |
| <span data-ttu-id="367cc-183">Événement &#124; où valeur EventLevelName == « erreur » &#124; résumer count() par source</span><span class="sxs-lookup"><span data-stu-id="367cc-183">Event &#124; where EventLevelName == "error" &#124; summarize count() by Source</span></span> |<span data-ttu-id="367cc-184">Nombre d’événements d’erreur Windows par source.</span><span class="sxs-lookup"><span data-stu-id="367cc-184">Count of Windows error events by source.</span></span> |


## <a name="next-steps"></a><span data-ttu-id="367cc-185">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="367cc-185">Next steps</span></span>
* <span data-ttu-id="367cc-186">Configurez Log Analytics pour collecter d’autres [sources de données](log-analytics-data-sources.md) à analyser.</span><span class="sxs-lookup"><span data-stu-id="367cc-186">Configure Log Analytics to collect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="367cc-187">En savoir plus sur les [recherches de journal](log-analytics-log-searches.md) pour analyser les données collectées à partir de sources de données et de solutions.</span><span class="sxs-lookup"><span data-stu-id="367cc-187">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>  
* <span data-ttu-id="367cc-188">Utilisez [Champs personnalisés](log-analytics-custom-fields.md) pour analyser les enregistrements d'événements dans des champs individuels.</span><span class="sxs-lookup"><span data-stu-id="367cc-188">Use [Custom Fields](log-analytics-custom-fields.md) to parse the event records into individual fields.</span></span>
* <span data-ttu-id="367cc-189">Configurez la [collecte des compteurs de performances](log-analytics-data-sources-performance-counters.md) à partir de vos agents Windows.</span><span class="sxs-lookup"><span data-stu-id="367cc-189">Configure [collection of performance counters](log-analytics-data-sources-performance-counters.md) from your Windows agents.</span></span>
