---
title: "aaaCollect Azure du service Journaux et des mesures pour l’Analytique de journal | Documents Microsoft"
description: "Configurer les diagnostics sur les ressources Azure toowrite métriques et journaux tooLog Analytique."
services: log-analytics
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: 
ms.assetid: 84105740-3697-4109-bc59-2452c1131bfe
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/12/2017
ms.author: magoedte
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 1cede9a94ec83c4e3a95853dc2ec355d8df06d6e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="collect-azure-service-logs-and-metrics-for-use-in-log-analytics"></a><span data-ttu-id="90979-103">Collecte des journaux et des métriques des services Azure à utiliser dans Log Analytics</span><span class="sxs-lookup"><span data-stu-id="90979-103">Collect Azure service logs and metrics for use in Log Analytics</span></span>

<span data-ttu-id="90979-104">Il existe quatre façons différentes de collecter des journaux et des métriques pour les services Azure :</span><span class="sxs-lookup"><span data-stu-id="90979-104">There are four different ways of collecting logs and metrics for Azure services:</span></span>

1. <span data-ttu-id="90979-105">Diagnostics Azure directe tooLog Analytique (*Diagnostics* Bonjour tableau suivant)</span><span class="sxs-lookup"><span data-stu-id="90979-105">Azure diagnostics direct tooLog Analytics (*Diagnostics* in hello following table)</span></span>
2. <span data-ttu-id="90979-106">Diagnostics Azure tooAzure stockage tooLog Analytique (*stockage* Bonjour tableau suivant)</span><span class="sxs-lookup"><span data-stu-id="90979-106">Azure diagnostics tooAzure storage tooLog Analytics (*Storage* in hello following table)</span></span>
3. <span data-ttu-id="90979-107">Connecteurs pour les services Azure (*connecteurs* Bonjour tableau suivant)</span><span class="sxs-lookup"><span data-stu-id="90979-107">Connectors for Azure services (*Connectors* in hello following table)</span></span>
4. <span data-ttu-id="90979-108">Scripts toocollect, puis les données de publication dans le journal Analytique (vides Bonjour tableau suivant et pour les services qui ne sont pas répertoriées)</span><span class="sxs-lookup"><span data-stu-id="90979-108">Scripts toocollect and then post data into Log Analytics (blanks in hello following table and for services that are not listed)</span></span>


| <span data-ttu-id="90979-109">Service</span><span class="sxs-lookup"><span data-stu-id="90979-109">Service</span></span>                 | <span data-ttu-id="90979-110">Type de ressource</span><span class="sxs-lookup"><span data-stu-id="90979-110">Resource Type</span></span>                           | <span data-ttu-id="90979-111">Journaux</span><span class="sxs-lookup"><span data-stu-id="90979-111">Logs</span></span>        | <span data-ttu-id="90979-112">Mesures</span><span class="sxs-lookup"><span data-stu-id="90979-112">Metrics</span></span>     | <span data-ttu-id="90979-113">Solution</span><span class="sxs-lookup"><span data-stu-id="90979-113">Solution</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="90979-114">Passerelles d’application</span><span class="sxs-lookup"><span data-stu-id="90979-114">Application gateways</span></span>    | <span data-ttu-id="90979-115">Microsoft.Network/applicationGateways</span><span class="sxs-lookup"><span data-stu-id="90979-115">Microsoft.Network/applicationGateways</span></span>   | <span data-ttu-id="90979-116">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-116">Diagnostics</span></span> | <span data-ttu-id="90979-117">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-117">Diagnostics</span></span> | [<span data-ttu-id="90979-118">Azure Application Gateway Analytics</span><span class="sxs-lookup"><span data-stu-id="90979-118">Azure Application Gateway Analytics</span></span>](log-analytics-azure-networking-analytics.md#azure-application-gateway-analytics-solution-in-log-analytics) |
| <span data-ttu-id="90979-119">Application Insights</span><span class="sxs-lookup"><span data-stu-id="90979-119">Application insights</span></span>    |                                         | <span data-ttu-id="90979-120">Connecteur</span><span class="sxs-lookup"><span data-stu-id="90979-120">Connector</span></span>   | <span data-ttu-id="90979-121">Connecteur</span><span class="sxs-lookup"><span data-stu-id="90979-121">Connector</span></span>   | <span data-ttu-id="90979-122">[Connecteur Application Insights](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/) (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-122">[Application Insights Connector](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/) (Preview)</span></span> |
| <span data-ttu-id="90979-123">Comptes Automation</span><span class="sxs-lookup"><span data-stu-id="90979-123">Automation accounts</span></span>     | <span data-ttu-id="90979-124">Microsoft.Automation/AutomationAccounts</span><span class="sxs-lookup"><span data-stu-id="90979-124">Microsoft.Automation/AutomationAccounts</span></span> | <span data-ttu-id="90979-125">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-125">Diagnostics</span></span> |             | [<span data-ttu-id="90979-126">Plus d’informations</span><span class="sxs-lookup"><span data-stu-id="90979-126">More information</span></span>](../automation/automation-manage-send-joblogs-log-analytics.md)|
| <span data-ttu-id="90979-127">Comptes Batch</span><span class="sxs-lookup"><span data-stu-id="90979-127">Batch accounts</span></span>          | <span data-ttu-id="90979-128">Microsoft.Batch/batchAccounts</span><span class="sxs-lookup"><span data-stu-id="90979-128">Microsoft.Batch/batchAccounts</span></span>           | <span data-ttu-id="90979-129">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-129">Diagnostics</span></span> | <span data-ttu-id="90979-130">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-130">Diagnostics</span></span> | |
| <span data-ttu-id="90979-131">Services cloud classiques</span><span class="sxs-lookup"><span data-stu-id="90979-131">Classic cloud services</span></span>  |                                         | <span data-ttu-id="90979-132">Storage</span><span class="sxs-lookup"><span data-stu-id="90979-132">Storage</span></span>     |             | [<span data-ttu-id="90979-133">Plus d’informations</span><span class="sxs-lookup"><span data-stu-id="90979-133">More information</span></span>](log-analytics-azure-storage-iis-table.md) |
| <span data-ttu-id="90979-134">Cognitive services</span><span class="sxs-lookup"><span data-stu-id="90979-134">Cognitive services</span></span>      | <span data-ttu-id="90979-135">Microsoft.CognitiveServices/accounts</span><span class="sxs-lookup"><span data-stu-id="90979-135">Microsoft.CognitiveServices/accounts</span></span>    |             | <span data-ttu-id="90979-136">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-136">Diagnostics</span></span> | |
| <span data-ttu-id="90979-137">Data Lake analytics</span><span class="sxs-lookup"><span data-stu-id="90979-137">Data Lake analytics</span></span>     | <span data-ttu-id="90979-138">Microsoft.DataLakeAnalytics/accounts</span><span class="sxs-lookup"><span data-stu-id="90979-138">Microsoft.DataLakeAnalytics/accounts</span></span>    | <span data-ttu-id="90979-139">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-139">Diagnostics</span></span> |             | |
| <span data-ttu-id="90979-140">Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="90979-140">Data Lake store</span></span>         | <span data-ttu-id="90979-141">Microsoft.DataLakeStore/accounts</span><span class="sxs-lookup"><span data-stu-id="90979-141">Microsoft.DataLakeStore/accounts</span></span>        | <span data-ttu-id="90979-142">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-142">Diagnostics</span></span> |             | |
| <span data-ttu-id="90979-143">Espace de noms Event Hub</span><span class="sxs-lookup"><span data-stu-id="90979-143">Event Hub namespace</span></span>     | <span data-ttu-id="90979-144">Microsoft.EventHub/namespaces</span><span class="sxs-lookup"><span data-stu-id="90979-144">Microsoft.EventHub/namespaces</span></span>           | <span data-ttu-id="90979-145">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-145">Diagnostics</span></span> | <span data-ttu-id="90979-146">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-146">Diagnostics</span></span> | |
| <span data-ttu-id="90979-147">IoT Hubs</span><span class="sxs-lookup"><span data-stu-id="90979-147">IoT Hubs</span></span>                | <span data-ttu-id="90979-148">Microsoft.Devices/IotHubs</span><span class="sxs-lookup"><span data-stu-id="90979-148">Microsoft.Devices/IotHubs</span></span>               |             | <span data-ttu-id="90979-149">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-149">Diagnostics</span></span> | |
| <span data-ttu-id="90979-150">Key Vault</span><span class="sxs-lookup"><span data-stu-id="90979-150">Key Vault</span></span>               | <span data-ttu-id="90979-151">Microsoft.KeyVault/vaults</span><span class="sxs-lookup"><span data-stu-id="90979-151">Microsoft.KeyVault/vaults</span></span>               | <span data-ttu-id="90979-152">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-152">Diagnostics</span></span> |             | [<span data-ttu-id="90979-153">KeyVault Analytics</span><span class="sxs-lookup"><span data-stu-id="90979-153">KeyVault Analytics</span></span>](log-analytics-azure-key-vault.md) |
| <span data-ttu-id="90979-154">Équilibreurs de charge</span><span class="sxs-lookup"><span data-stu-id="90979-154">Load Balancers</span></span>          | <span data-ttu-id="90979-155">Microsoft.Network/loadBalancers</span><span class="sxs-lookup"><span data-stu-id="90979-155">Microsoft.Network/loadBalancers</span></span>         | <span data-ttu-id="90979-156">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-156">Diagnostics</span></span> |             |  |
| <span data-ttu-id="90979-157">Logic Apps</span><span class="sxs-lookup"><span data-stu-id="90979-157">Logic Apps</span></span>              | <span data-ttu-id="90979-158">Microsoft.Logic/workflows</span><span class="sxs-lookup"><span data-stu-id="90979-158">Microsoft.Logic/workflows</span></span> <br> <span data-ttu-id="90979-159">Microsoft.Logic/integrationAccounts</span><span class="sxs-lookup"><span data-stu-id="90979-159">Microsoft.Logic/integrationAccounts</span></span> | <span data-ttu-id="90979-160">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-160">Diagnostics</span></span> | <span data-ttu-id="90979-161">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-161">Diagnostics</span></span> | |
| <span data-ttu-id="90979-162">Groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="90979-162">Network Security Groups</span></span> | <span data-ttu-id="90979-163">Microsoft.Network/networksecuritygroups</span><span class="sxs-lookup"><span data-stu-id="90979-163">Microsoft.Network/networksecuritygroups</span></span> | <span data-ttu-id="90979-164">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-164">Diagnostics</span></span> |             | [<span data-ttu-id="90979-165">Azure Network Security Group Analytics</span><span class="sxs-lookup"><span data-stu-id="90979-165">Azure Network Security Group Analytics</span></span>](log-analytics-azure-networking-analytics.md#azure-network-security-group-analytics-solution-in-log-analytics) |
| <span data-ttu-id="90979-166">Coffres de récupération</span><span class="sxs-lookup"><span data-stu-id="90979-166">Recovery vaults</span></span>         | <span data-ttu-id="90979-167">Microsoft.RecoveryServices/vaults</span><span class="sxs-lookup"><span data-stu-id="90979-167">Microsoft.RecoveryServices/vaults</span></span>       |             |             | [<span data-ttu-id="90979-168">Azure Recovery Services Analytics (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-168">Azure Recovery Services Analytics (Preview)</span></span>](https://github.com/krnese/AzureDeploy/blob/master/OMS/MSOMS/Solutions/recoveryservices/)|
| <span data-ttu-id="90979-169">Services de recherche</span><span class="sxs-lookup"><span data-stu-id="90979-169">Search services</span></span>         | <span data-ttu-id="90979-170">Microsoft.Search/searchServices</span><span class="sxs-lookup"><span data-stu-id="90979-170">Microsoft.Search/searchServices</span></span>         | <span data-ttu-id="90979-171">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-171">Diagnostics</span></span> | <span data-ttu-id="90979-172">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-172">Diagnostics</span></span> | |
| <span data-ttu-id="90979-173">Espace de noms Service Bus</span><span class="sxs-lookup"><span data-stu-id="90979-173">Service Bus namespace</span></span>   | <span data-ttu-id="90979-174">Microsoft.ServiceBus/namespaces</span><span class="sxs-lookup"><span data-stu-id="90979-174">Microsoft.ServiceBus/namespaces</span></span>         | <span data-ttu-id="90979-175">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-175">Diagnostics</span></span> | <span data-ttu-id="90979-176">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-176">Diagnostics</span></span> | [<span data-ttu-id="90979-177">Service Bus Analytics (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-177">Service Bus Analytics (Preview)</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/oms-servicebus-solution)|
| <span data-ttu-id="90979-178">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="90979-178">Service Fabric</span></span>          |                                         | <span data-ttu-id="90979-179">Storage</span><span class="sxs-lookup"><span data-stu-id="90979-179">Storage</span></span>     |             | [<span data-ttu-id="90979-180">Service Fabric Analytics (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-180">Service Fabric Analytics (Preview)</span></span>](log-analytics-service-fabric.md) |
| <span data-ttu-id="90979-181">SQL (v12)</span><span class="sxs-lookup"><span data-stu-id="90979-181">SQL (v12)</span></span>               | <span data-ttu-id="90979-182">Microsoft.Sql/servers/databases</span><span class="sxs-lookup"><span data-stu-id="90979-182">Microsoft.Sql/servers/databases</span></span> <br> <span data-ttu-id="90979-183">Microsoft.Sql/servers/elasticPools</span><span class="sxs-lookup"><span data-stu-id="90979-183">Microsoft.Sql/servers/elasticPools</span></span> |             | <span data-ttu-id="90979-184">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-184">Diagnostics</span></span> | [<span data-ttu-id="90979-185">Azure SQL Analytics (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-185">Azure SQL Analytics (Preview)</span></span>](log-analytics-azure-sql.md) |
| <span data-ttu-id="90979-186">Storage</span><span class="sxs-lookup"><span data-stu-id="90979-186">Storage</span></span>                 |                                         |             | <span data-ttu-id="90979-187">Script</span><span class="sxs-lookup"><span data-stu-id="90979-187">Script</span></span>      | [<span data-ttu-id="90979-188">Azure Storage Analytics (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-188">Azure Storage Analytics (Preview)</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/oms-azure-storage-analytics-solution) |
| <span data-ttu-id="90979-189">Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="90979-189">Virtual Machines</span></span>        | <span data-ttu-id="90979-190">Microsoft.Compute/virtualMachines</span><span class="sxs-lookup"><span data-stu-id="90979-190">Microsoft.Compute/virtualMachines</span></span>       | <span data-ttu-id="90979-191">Extension</span><span class="sxs-lookup"><span data-stu-id="90979-191">Extension</span></span>   | <span data-ttu-id="90979-192">Extension</span><span class="sxs-lookup"><span data-stu-id="90979-192">Extension</span></span> <br> <span data-ttu-id="90979-193">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-193">Diagnostics</span></span>  | |
| <span data-ttu-id="90979-194">Groupes de machines virtuelles identiques</span><span class="sxs-lookup"><span data-stu-id="90979-194">Virtual Machines scale sets</span></span> | <span data-ttu-id="90979-195">Microsoft.Compute/virtualMachines</span><span class="sxs-lookup"><span data-stu-id="90979-195">Microsoft.Compute/virtualMachines</span></span> <br> <span data-ttu-id="90979-196">Microsoft.Compute/virtualMachineScaleSets/virtualMachines</span><span class="sxs-lookup"><span data-stu-id="90979-196">Microsoft.Compute/virtualMachineScaleSets/virtualMachines</span></span> |             | <span data-ttu-id="90979-197">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-197">Diagnostics</span></span> | |
| <span data-ttu-id="90979-198">Batteries de serveurs web</span><span class="sxs-lookup"><span data-stu-id="90979-198">Web Server farms</span></span>        | <span data-ttu-id="90979-199">Microsoft.Web/serverfarms</span><span class="sxs-lookup"><span data-stu-id="90979-199">Microsoft.Web/serverfarms</span></span>               |             | <span data-ttu-id="90979-200">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-200">Diagnostics</span></span> | |
| <span data-ttu-id="90979-201">Sites web</span><span class="sxs-lookup"><span data-stu-id="90979-201">Web Sites</span></span>               | <span data-ttu-id="90979-202">Microsoft.Web/sites</span><span class="sxs-lookup"><span data-stu-id="90979-202">Microsoft.Web/sites</span></span> <br> <span data-ttu-id="90979-203">Microsoft.Web/sites/slots</span><span class="sxs-lookup"><span data-stu-id="90979-203">Microsoft.Web/sites/slots</span></span> |             | <span data-ttu-id="90979-204">Diagnostics</span><span class="sxs-lookup"><span data-stu-id="90979-204">Diagnostics</span></span> | [<span data-ttu-id="90979-205">Azure Web Apps Analytics (version préliminaire)</span><span class="sxs-lookup"><span data-stu-id="90979-205">Azure Web Apps Analytics (Preview)</span></span>](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.AzureWebAppsAnalyticsOMS?tab=Overview) |


> [!NOTE]
> <span data-ttu-id="90979-206">Pour la surveillance des machines virtuelles Azure (Linux et Windows), nous vous recommandons d’installer hello [extension de machine virtuelle Analytique de journal](log-analytics-azure-vm-extension.md).</span><span class="sxs-lookup"><span data-stu-id="90979-206">For monitoring Azure virtual machines (both Linux and Windows), we recommend installing hello [Log Analytics VM extension](log-analytics-azure-vm-extension.md).</span></span> <span data-ttu-id="90979-207">l’agent de Hello vous fournit les informations collectées à partir de vos machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="90979-207">hello agent provides you with insights collected from within your virtual machines.</span></span> <span data-ttu-id="90979-208">Vous pouvez également utiliser l’extension de hello pour les machines virtuelles identiques.</span><span class="sxs-lookup"><span data-stu-id="90979-208">You can also use hello extension for Virtual machine scale sets.</span></span>
>
>

## <a name="azure-diagnostics-direct-toolog-analytics"></a><span data-ttu-id="90979-209">Diagnostics Azure directe tooLog Analytique</span><span class="sxs-lookup"><span data-stu-id="90979-209">Azure diagnostics direct tooLog Analytics</span></span>
<span data-ttu-id="90979-210">Beaucoup de ressources Azure est des mesures et des journaux de diagnostic toowrite en mesure de directement tooLog Analytique, ce qui est moyen hello préféré de la collecte de données hello pour l’analyse.</span><span class="sxs-lookup"><span data-stu-id="90979-210">Many Azure resources are able toowrite diagnostic logs and metrics directly tooLog Analytics and this is hello preferred way of collecting hello data for analysis.</span></span> <span data-ttu-id="90979-211">Lors de l’utilisation des diagnostics Azure, données sont immédiatement écrit tooLog Analytique et il n’existe aucun toostorage de données nécessaire toofirst écriture hello.</span><span class="sxs-lookup"><span data-stu-id="90979-211">When using Azure diagnostics, data is written immediately tooLog Analytics and there is no need toofirst write hello data toostorage.</span></span>

<span data-ttu-id="90979-212">Les ressources Azure qui prennent en charge [moniteur Azure](../monitoring-and-diagnostics/monitoring-overview.md) peut envoyer les journaux et les métriques directement tooLog Analytique.</span><span class="sxs-lookup"><span data-stu-id="90979-212">Azure resources that support [Azure monitor](../monitoring-and-diagnostics/monitoring-overview.md) can send their logs and metrics directly tooLog Analytics.</span></span>

* <span data-ttu-id="90979-213">Pour plus d’informations hello de métriques disponibles de hello, consultez trop[prise en charge des métriques avec Azure analyse](../monitoring-and-diagnostics/monitoring-supported-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="90979-213">For hello details of hello available metrics, refer too[supported metrics with Azure Monitor](../monitoring-and-diagnostics/monitoring-supported-metrics.md).</span></span>
* <span data-ttu-id="90979-214">Pour plus d’informations hello de journaux disponibles de hello, consultez trop[prise en charge des services et schéma pour les journaux de diagnostic](../monitoring-and-diagnostics/monitoring-diagnostic-logs-schema.md).</span><span class="sxs-lookup"><span data-stu-id="90979-214">For hello details of hello available logs, refer too[supported services and schema for diagnostic logs](../monitoring-and-diagnostics/monitoring-diagnostic-logs-schema.md).</span></span>

### <a name="enable-diagnostics-with-powershell"></a><span data-ttu-id="90979-215">Activer les diagnostics avec PowerShell</span><span class="sxs-lookup"><span data-stu-id="90979-215">Enable diagnostics with PowerShell</span></span>
<span data-ttu-id="90979-216">Vous avez besoin hello novembre 2016 (v2.3.0) ou une version plus récente de [Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="90979-216">You need hello November 2016 (v2.3.0) or later release of [Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="90979-217">Hello suivant montre l’exemple PowerShell comment toouse [Set-AzureRmDiagnosticSetting](/powershell/module/azurerm.insights/set-azurermdiagnosticsetting) tooenable des diagnostics sur un groupe de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="90979-217">hello following PowerShell example shows how toouse [Set-AzureRmDiagnosticSetting](/powershell/module/azurerm.insights/set-azurermdiagnosticsetting) tooenable diagnostics on a network security group.</span></span> <span data-ttu-id="90979-218">Hello même approche fonctionne pour toutes les ressources prises en charge - définir `$resourceId` toohello id de ressource de ressource hello diagnostics tooenable pour.</span><span class="sxs-lookup"><span data-stu-id="90979-218">hello same approach works for all supported resources - set `$resourceId` toohello resource id of hello resource you want tooenable diagnostics for.</span></span>

```powershell
$workspaceId = "/subscriptions/d2e37fee-1234-40b2-5678-0b2199de3b50/resourcegroups/oi-default-east-us/providers/microsoft.operationalinsights/workspaces/rollingbaskets"

$resourceId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUPS/DEMO"

Set-AzureRmDiagnosticSetting -ResourceId $ResourceId  -WorkspaceId $workspaceId -Enabled $true
```

### <a name="enable-diagnostics-with-resource-manager-templates"></a><span data-ttu-id="90979-219">Activer les diagnostics avec des modèles Resource Manager</span><span class="sxs-lookup"><span data-stu-id="90979-219">Enable diagnostics with Resource Manager templates</span></span>

<span data-ttu-id="90979-220">tooenable des diagnostics sur une ressource lorsqu’il est créé, et ont les diagnostics hello envoyés espace de travail Analytique de journal tooyour que vous pouvez utiliser un modèle toohello similaire un ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="90979-220">tooenable diagnostics on a resource when it is created, and have hello diagnostics sent tooyour Log Analytics workspace you can use a template similar toohello one below.</span></span> <span data-ttu-id="90979-221">Cet exemple est destiné à un compte Automation, mais fonctionne pour tous les types de ressources pris en charge.</span><span class="sxs-lookup"><span data-stu-id="90979-221">This example is for an Automation account but works for all supported resource types.</span></span>

```json
        {
            "type": "Microsoft.Automation/automationAccounts/providers/diagnosticSettings",
            "name": "[concat(parameters('omsAutomationAccountName'), '/', 'Microsoft.Insights/service')]",
            "apiVersion": "2015-07-01",
            "dependsOn": [
                "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
                "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]"
            ],
            "properties": {
                "workspaceId": "[resourceId('Microsoft.OperationalInsights/workspaces', parameters('omsWorkspaceName'))]",
                "logs": [
                    {
                        "category": "JobLogs",
                        "enabled": true
                    },
                    {
                        "category": "JobStreams",
                        "enabled": true
                    }
                ]
            }
        }
```

[!INCLUDE [log-analytics-troubleshoot-azure-diagnostics](../../includes/log-analytics-troubleshoot-azure-diagnostics.md)]

## <a name="azure-diagnostics-toostorage-then-toolog-analytics"></a><span data-ttu-id="90979-222">Diagnostics Azure toostorage puis tooLog Analytique</span><span class="sxs-lookup"><span data-stu-id="90979-222">Azure diagnostics toostorage then tooLog Analytics</span></span>

<span data-ttu-id="90979-223">Pour collecter les journaux à partir de certaines ressources, il est possible toosend hello journaux tooAzure stockage et puis configurer les journaux de hello tooread Analytique de journal à partir du stockage.</span><span class="sxs-lookup"><span data-stu-id="90979-223">For collecting logs from within some resources, it is possible toosend hello logs tooAzure storage and then configure Log Analytics tooread hello logs from storage.</span></span>

<span data-ttu-id="90979-224">Analytique de journal permet de ce test de diagnostic toocollect approche du stockage Azure hello suivant des ressources et les journaux :</span><span class="sxs-lookup"><span data-stu-id="90979-224">Log Analytics can use this approach toocollect diagnostics from Azure storage for hello following resources and logs:</span></span>

| <span data-ttu-id="90979-225">Ressource</span><span class="sxs-lookup"><span data-stu-id="90979-225">Resource</span></span> | <span data-ttu-id="90979-226">Journaux</span><span class="sxs-lookup"><span data-stu-id="90979-226">Logs</span></span> |
| --- | --- |
| <span data-ttu-id="90979-227">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="90979-227">Service Fabric</span></span> |<span data-ttu-id="90979-228">ETWEvent</span><span class="sxs-lookup"><span data-stu-id="90979-228">ETWEvent</span></span> <br> <span data-ttu-id="90979-229">Événement opérationnel</span><span class="sxs-lookup"><span data-stu-id="90979-229">Operational Event</span></span> <br> <span data-ttu-id="90979-230">Événement Reliable Actor</span><span class="sxs-lookup"><span data-stu-id="90979-230">Reliable Actor Event</span></span> <br> <span data-ttu-id="90979-231">Événement de service fiable</span><span class="sxs-lookup"><span data-stu-id="90979-231">Reliable Service Event</span></span> |
| <span data-ttu-id="90979-232">Machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="90979-232">Virtual Machines</span></span> |<span data-ttu-id="90979-233">Syslog Linux</span><span class="sxs-lookup"><span data-stu-id="90979-233">Linux Syslog</span></span> <br> <span data-ttu-id="90979-234">Événement Windows</span><span class="sxs-lookup"><span data-stu-id="90979-234">Windows Event</span></span> <br> <span data-ttu-id="90979-235">Journal IIS</span><span class="sxs-lookup"><span data-stu-id="90979-235">IIS Log</span></span> <br> <span data-ttu-id="90979-236">ETWEvent Windows</span><span class="sxs-lookup"><span data-stu-id="90979-236">Windows ETWEvent</span></span> |
| <span data-ttu-id="90979-237">Rôles web</span><span class="sxs-lookup"><span data-stu-id="90979-237">Web Roles</span></span> <br> <span data-ttu-id="90979-238">Rôles de travail</span><span class="sxs-lookup"><span data-stu-id="90979-238">Worker Roles</span></span> |<span data-ttu-id="90979-239">Syslog Linux</span><span class="sxs-lookup"><span data-stu-id="90979-239">Linux Syslog</span></span> <br> <span data-ttu-id="90979-240">Événement Windows</span><span class="sxs-lookup"><span data-stu-id="90979-240">Windows Event</span></span> <br> <span data-ttu-id="90979-241">Journal IIS</span><span class="sxs-lookup"><span data-stu-id="90979-241">IIS Log</span></span> <br> <span data-ttu-id="90979-242">ETWEvent Windows</span><span class="sxs-lookup"><span data-stu-id="90979-242">Windows ETWEvent</span></span> |

> [!NOTE]
> <span data-ttu-id="90979-243">Vous payez un taux de données Azure normal pour le stockage et les transactions lorsque vous envoyez des diagnostics compte de stockage tooa et quand Analytique de journal lit les données de hello à partir de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="90979-243">You are charged normal Azure data rates for storage and transactions when you send diagnostics tooa storage account and for when Log Analytics reads hello data from your storage account.</span></span>
>
>

<span data-ttu-id="90979-244">Consultez [stockage d’objets blob utilisé pour le stockage IIS et de table pour les événements](log-analytics-azure-storage-iis-table.md) toolearn plus en détail comment Analytique de journal peuvent collecter ces journaux.</span><span class="sxs-lookup"><span data-stu-id="90979-244">See [Use blob storage for IIS and table storage for events](log-analytics-azure-storage-iis-table.md) toolearn more about how Log Analytics can collect these logs.</span></span>

## <a name="connectors-for-azure-services"></a><span data-ttu-id="90979-245">Connecteurs pour les services Azure</span><span class="sxs-lookup"><span data-stu-id="90979-245">Connectors for Azure services</span></span>

<span data-ttu-id="90979-246">Il existe un connecteur pour Application Insights, qui permet aux données collectées par toobe Application Insights envoyé tooLog Analytique.</span><span class="sxs-lookup"><span data-stu-id="90979-246">There is a connector for Application Insights, which allows data collected by Application Insights toobe sent tooLog Analytics.</span></span>

<span data-ttu-id="90979-247">En savoir plus sur hello [connecteur Application Insights](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/).</span><span class="sxs-lookup"><span data-stu-id="90979-247">Learn more about hello [Application Insights connector](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/).</span></span>

## <a name="scripts-toocollect-and-post-data-toolog-analytics"></a><span data-ttu-id="90979-248">Scripts toocollect et post tooLog données Analytique</span><span class="sxs-lookup"><span data-stu-id="90979-248">Scripts toocollect and post data tooLog Analytics</span></span>

<span data-ttu-id="90979-249">Pour les services Azure qui ne fournissent pas un moyen direct toosend les tooLog journaux et des métriques Analytique, vous pouvez utiliser un toocollect de script Azure Automation hello journal et des mesures.</span><span class="sxs-lookup"><span data-stu-id="90979-249">For Azure services that do not provide a direct way toosend logs and metrics tooLog Analytics you can use an Azure Automation script toocollect hello log and metrics.</span></span> <span data-ttu-id="90979-250">Hello script peut alors envoyer hello données tooLog Analytique à l’aide de hello [API du collecteur de données](log-analytics-data-collector-api.md)</span><span class="sxs-lookup"><span data-stu-id="90979-250">hello script can then send hello data tooLog Analytics using hello [data collector API](log-analytics-data-collector-api.md)</span></span>

<span data-ttu-id="90979-251">la galerie de modèle Azure Hello a [exemples d’utilisation d’Azure Automation](https://azure.microsoft.com/en-us/resources/templates/?term=OMS) toocollect des données à partir des services et en l’envoyant tooLog Analytique.</span><span class="sxs-lookup"><span data-stu-id="90979-251">hello Azure template gallery has [examples of using Azure Automation](https://azure.microsoft.com/en-us/resources/templates/?term=OMS) toocollect data from services and sending it tooLog Analytics.</span></span>

## <a name="next-steps"></a><span data-ttu-id="90979-252">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="90979-252">Next steps</span></span>

* <span data-ttu-id="90979-253">[Utiliser le stockage d’objets blob pour le stockage IIS et de table pour les événements](log-analytics-azure-storage-iis-table.md) tooread les journaux hello pour les services Azure qui écrivent des diagnostics tootable stockage ou IIS consigne écrite tooblob stockage.</span><span class="sxs-lookup"><span data-stu-id="90979-253">[Use blob storage for IIS and table storage for events](log-analytics-azure-storage-iis-table.md) tooread hello logs for Azure services that write diagnostics tootable storage or IIS logs written tooblob storage.</span></span>
* <span data-ttu-id="90979-254">[Activer des Solutions](log-analytics-add-solutions.md) tooprovide comprendre les données de hello.</span><span class="sxs-lookup"><span data-stu-id="90979-254">[Enable Solutions](log-analytics-add-solutions.md) tooprovide insight into hello data.</span></span>
* <span data-ttu-id="90979-255">[Utiliser des requêtes de recherche](log-analytics-log-searches.md) tooanalyze les données de salutation.</span><span class="sxs-lookup"><span data-stu-id="90979-255">[Use search queries](log-analytics-log-searches.md) tooanalyze hello data.</span></span>
