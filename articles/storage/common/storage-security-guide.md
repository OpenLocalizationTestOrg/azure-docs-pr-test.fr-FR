---
title: "Guide de sécurité Azure Storage | Microsoft Docs"
description: "Présente en détail les nombreuses méthodes de sécurisation d’Azure Storage, notamment (liste non exhaustive) RBAC, Storage Service Encryption, le chiffrement côté client, SMB 3.0 et Azure Disk Encryption."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 6f931d94-ef5a-44c6-b1d9-8a3c9c327fb2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: e71d9baf36ea7acb8dc8fa1daf9ddde3a2856f85
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-storage-security-guide"></a><span data-ttu-id="172ea-103">Guide de sécurité Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-103">Azure Storage security guide</span></span>
## <a name="overview"></a><span data-ttu-id="172ea-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="172ea-104">Overview</span></span>
<span data-ttu-id="172ea-105">Azure Storage propose un ensemble complet de fonctionnalités de sécurité dont l’utilisation combinée permet aux développeurs de créer des applications sécurisées.</span><span class="sxs-lookup"><span data-stu-id="172ea-105">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="172ea-106">Le compte de stockage proprement dit peut être sécurisé à l’aide du contrôle d’accès en fonction du rôle et d’Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-106">The storage account itself can be secured using Role-Based Access Control and Azure Active Directory.</span></span> <span data-ttu-id="172ea-107">Les données peuvent être sécurisées en transit entre une application et Azure au moyen du [chiffrement côté client](../storage-client-side-encryption.md), de HTTPS ou de SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="172ea-107">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPS, or SMB 3.0.</span></span> <span data-ttu-id="172ea-108">Les données peuvent être définies de façon à être automatiquement chiffrées du moment où elles sont écrites dans Azure Storage en utilisant [Storage Service Encryption (SSE)](storage-service-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="172ea-108">Data can be set to be automatically encrypted when written to Azure Storage using [Storage Service Encryption (SSE)](storage-service-encryption.md).</span></span> <span data-ttu-id="172ea-109">Les disques de système d’exploitation et de données utilisés par les machines virtuelles peuvent être définis de façon à être chiffrés à l’aide d’ [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="172ea-109">OS and Data disks used by virtual machines can be set to be encrypted using [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span></span> <span data-ttu-id="172ea-110">Il est possible d’accorder un accès délégué aux objets de données d’Azure Storage en utilisant des [signatures d’accès partagé](../storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="172ea-110">Delegated access to the data objects in Azure Storage can be granted using [Shared Access Signatures](../storage-dotnet-shared-access-signature-part-1.md).</span></span>

<span data-ttu-id="172ea-111">Cet article fournit une vue d’ensemble sur chacune de ces fonctionnalités de sécurité, qui peuvent être utilisées avec Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-111">This article will provide an overview of each of these security features that can be used with Azure Storage.</span></span> <span data-ttu-id="172ea-112">Des liens vers des articles détaillés vous sont proposés pour vous permettre d’explorer de façon plus détaillée chaque fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="172ea-112">Links are provided to articles that will give details of each feature so you can easily do further investigation on each topic.</span></span>

<span data-ttu-id="172ea-113">Voici les sujets qui sont abordés dans cet article :</span><span class="sxs-lookup"><span data-stu-id="172ea-113">Here are the topics to be covered in this article:</span></span>

* <span data-ttu-id="172ea-114">[Sécurité du plan de gestion](#management-plane-security) – Sécurisation de votre compte de stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-114">[Management Plane Security](#management-plane-security) – Securing your Storage Account</span></span>

  <span data-ttu-id="172ea-115">Le plan de gestion se compose des ressources utilisées pour gérer votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-115">The management plane consists of the resources used to manage your storage account.</span></span> <span data-ttu-id="172ea-116">Dans cette section, nous allons parler du modèle de déploiement Azure Resource Manager et de la façon d’utiliser le contrôle d’accès en fonction du rôle (RBAC) pour contrôler l’accès à vos comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-116">In this section, we'll talk about the Azure Resource Manager deployment model and how to use Role-Based Access Control (RBAC) to control access to your storage accounts.</span></span> <span data-ttu-id="172ea-117">Nous évoquerons aussi la gestion des clés de compte de stockage et vous expliquerons comment les régénérer.</span><span class="sxs-lookup"><span data-stu-id="172ea-117">We will also talk about managing your storage account keys and how to regenerate them.</span></span>
* <span data-ttu-id="172ea-118">[Sécurité du plan de données](#data-plane-security) – Sécurisation de l’accès à vos données</span><span class="sxs-lookup"><span data-stu-id="172ea-118">[Data Plane Security](#data-plane-security) – Securing Access to Your Data</span></span>

  <span data-ttu-id="172ea-119">Dans cette section, nous verrons comment autoriser l’accès aux objets de données réels de votre compte de stockage (objets blob, fichiers, files d’attente et tables) en utilisant des signatures d’accès partagé et des stratégies d’accès stockées.</span><span class="sxs-lookup"><span data-stu-id="172ea-119">In this section, we'll look at allowing access to the actual data objects in your Storage account, such as blobs, files, queues, and tables, using Shared Access Signatures and Stored Access Policies.</span></span> <span data-ttu-id="172ea-120">Nous évoquerons à la fois les signatures d’accès partagé (SAP) au niveau des services et les signatures d’accès partagé au niveau des comptes.</span><span class="sxs-lookup"><span data-stu-id="172ea-120">We will cover both service-level SAS and account-level SAS.</span></span> <span data-ttu-id="172ea-121">Nous verrons aussi comment limiter l’accès à une adresse IP spécifique (ou à une plage d’adresses IP), comment limiter le protocole utilisé pour HTTPS et comment révoquer une signature d’accès partagé sans attendre son expiration.</span><span class="sxs-lookup"><span data-stu-id="172ea-121">We'll also see how to limit access to a specific IP address (or range of IP addresses), how to limit the protocol used to HTTPS, and how to revoke a Shared Access Signature without waiting for it to expire.</span></span>
* [<span data-ttu-id="172ea-122">Chiffrement en transit</span><span class="sxs-lookup"><span data-stu-id="172ea-122">Encryption in Transit</span></span>](#encryption-in-transit)

  <span data-ttu-id="172ea-123">Cette section explique comment sécuriser les données pendant leur transfert vers et à partir d’Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-123">This section discusses how to secure data when you transfer it into or out of Azure Storage.</span></span> <span data-ttu-id="172ea-124">Nous vous livrerons des recommandations concernant l’utilisation de HTTPS et vous parlerons du chiffrement utilisé par SMB 3.0 pour les partages de fichiers Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-124">We'll talk about the recommended use of HTTPS and the encryption used by SMB 3.0 for Azure File shares.</span></span> <span data-ttu-id="172ea-125">Nous nous intéresserons aussi au chiffrement côté client, qui vous permet de chiffrer les données avant leur transfert vers Storage dans une application cliente et de déchiffrer les données après leur transfert à partir de Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-125">We will also take a look at Client-side Encryption, which enables you to encrypt the data before it is transferred into Storage in a client application, and to decrypt the data after it is transferred out of Storage.</span></span>
* [<span data-ttu-id="172ea-126">Chiffrement au repos</span><span class="sxs-lookup"><span data-stu-id="172ea-126">Encryption at Rest</span></span>](#encryption-at-rest)

  <span data-ttu-id="172ea-127">Nous nous pencherons sur Storage Service Encryption (SSE) et sur la procédure d’activation de ce service pour un compte de stockage, qui a pour effet de chiffrer automatiquement les objets blob de bloc, les objets blog de pages et les objets blob d’ajout quand ils sont écrits dans Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-127">We will talk about Storage Service Encryption (SSE), and how you can enable it for a storage account, resulting in your block blobs, page blobs, and append blobs being automatically encrypted when written to Azure Storage.</span></span> <span data-ttu-id="172ea-128">Nous verrons aussi comment utiliser Azure Disk Encryption et explorerons les différences fondamentales entre Disk Encryption, SSE et le chiffrement côté client, ainsi que des cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="172ea-128">We will also look at how you can use Azure Disk Encryption and explore the basic differences and cases of Disk Encryption versus SSE versus Client-Side Encryption.</span></span> <span data-ttu-id="172ea-129">Nous nous pencherons brièvement sur la conformité aux normes FIPS des ordinateurs de l’administration américaine.</span><span class="sxs-lookup"><span data-stu-id="172ea-129">We will briefly look at FIPS compliance for U.S. Government computers.</span></span>
* <span data-ttu-id="172ea-130">Audit de l’accès d’Azure Storage à l’aide de [Storage Analytics](#storage-analytics)</span><span class="sxs-lookup"><span data-stu-id="172ea-130">Using [Storage Analytics](#storage-analytics) to audit access of Azure Storage</span></span>

  <span data-ttu-id="172ea-131">Cette section explique comment rechercher des informations dans les journaux d’analyse du stockage pour une demande donnée.</span><span class="sxs-lookup"><span data-stu-id="172ea-131">This section discusses how to find information in the storage analytics logs for a request.</span></span> <span data-ttu-id="172ea-132">Nous examinerons des données de journal d’analyse de stockage réelles et verrons comment déterminer si une demande est formulée avec la clé de compte de stockage, une signature d’accès partagé ou de façon anonyme, et si elle a abouti ou échoué.</span><span class="sxs-lookup"><span data-stu-id="172ea-132">We'll take a look at real storage analytics log data and see how to discern whether a request is made with the Storage account key, with a Shared Access signature, or anonymously, and whether it succeeded or failed.</span></span>
* [<span data-ttu-id="172ea-133">Activation de clients basés sur le navigateur à l’aide de CORS</span><span class="sxs-lookup"><span data-stu-id="172ea-133">Enabling Browser-Based Clients using CORS</span></span>](#Cross-Origin-Resource-Sharing-CORS)

  <span data-ttu-id="172ea-134">Cette section explique comment autoriser le partage des ressources cross-origin (CORS).</span><span class="sxs-lookup"><span data-stu-id="172ea-134">This section talks about how to allow cross-origin resource sharing (CORS).</span></span> <span data-ttu-id="172ea-135">Nous évoquerons l’accès intra-domaines, ainsi que sa gestion à l’aide des fonctionnalités CORS intégrées au stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-135">We'll talk about cross-domain access, and how to handle it with the CORS capabilities built into Azure Storage.</span></span>

## <a name="management-plane-security"></a><span data-ttu-id="172ea-136">Sécurité du plan de gestion</span><span class="sxs-lookup"><span data-stu-id="172ea-136">Management Plane Security</span></span>
<span data-ttu-id="172ea-137">Le plan de gestion se compose des opérations qui affectent le compte de stockage proprement dit.</span><span class="sxs-lookup"><span data-stu-id="172ea-137">The management plane consists of operations that affect the storage account itself.</span></span> <span data-ttu-id="172ea-138">Par exemple, vous pouvez créer ou supprimer un compte de stockage, obtenir la liste des comptes de stockage d’un abonnement, récupérer les clés de compte de stockage ou régénérer les clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-138">For example, you can create or delete a storage account, get a list of storage accounts in a subscription, retrieve the storage account keys, or regenerate the storage account keys.</span></span>

<span data-ttu-id="172ea-139">Quand vous créez un compte de stockage, vous sélectionnez un modèle de déploiement Classique ou Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="172ea-139">When you create a new storage account, you select a deployment model of Classic or Resource Manager.</span></span> <span data-ttu-id="172ea-140">Le modèle classique de création de ressources dans Azure autorise seulement un accès « tout ou rien » à l’abonnement et, à tour de rôle, au compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-140">The Classic model of creating resources in Azure only allows all-or-nothing access to the subscription, and in turn, the storage account.</span></span>

<span data-ttu-id="172ea-141">Ce guide porte essentiellement sur le modèle Resource Manager, qui est la méthode recommandée pour créer des comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-141">This guide focuses on the Resource Manager model which is the recommended means for creating storage accounts.</span></span> <span data-ttu-id="172ea-142">Au lieu d’accorder l’accès à l’ensemble de l’abonnement, les comptes de stockage Resource Manager vous permettent de contrôler l’accès au plan de gestion à un niveau plus limité en utilisant le contrôle d’accès en fonction du rôle (RBAC).</span><span class="sxs-lookup"><span data-stu-id="172ea-142">With the Resource Manager storage accounts, rather than giving access to the entire subscription, you can control access on a more finite level to the management plane using Role-Based Access Control (RBAC).</span></span>

### <a name="how-to-secure-your-storage-account-with-role-based-access-control-rbac"></a><span data-ttu-id="172ea-143">Comment sécuriser un compte de stockage en utilisant le contrôle d’accès en fonction du rôle (RBAC)</span><span class="sxs-lookup"><span data-stu-id="172ea-143">How to secure your storage account with Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="172ea-144">Pour commencer, expliquons ce qu’est RBAC et voyons comment l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="172ea-144">Let's talk about what RBAC is, and how you can use it.</span></span> <span data-ttu-id="172ea-145">À chaque abonnement Azure correspond un annuaire Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-145">Each Azure subscription has an Azure Active Directory.</span></span> <span data-ttu-id="172ea-146">Les utilisateurs, les groupes et les applications de cet annuaire peuvent être autorisés à gérer les ressources de l’abonnement Azure qui reposent sur le modèle de déploiement Gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="172ea-146">Users, groups, and applications from that directory can be granted access to manage resources in the Azure subscription that use the Resource Manager deployment model.</span></span> <span data-ttu-id="172ea-147">C’est ce que l’on appelle le contrôle d’accès en fonction du rôle (RBAC).</span><span class="sxs-lookup"><span data-stu-id="172ea-147">This is referred to as Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="172ea-148">Pour gérer cet accès, vous pouvez utiliser le [Portail Azure](https://portal.azure.com/), les [outils de l’interface de ligne de commande Azure](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs) ou les [API REST du fournisseur de ressources de stockage Azure](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span><span class="sxs-lookup"><span data-stu-id="172ea-148">To manage this access, you can use the [Azure portal](https://portal.azure.com/), the [Azure CLI tools](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), or the [Azure Storage Resource Provider REST APIs](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span></span>

<span data-ttu-id="172ea-149">Avec le modèle Gestionnaire de ressources, vous devez placer le compte de stockage dans un groupe de ressources et contrôler l’accès au plan de gestion de ce compte de stockage spécifique à l’aide d’Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-149">With the Resource Manager model, you put the storage account in a resource group and control access to the management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="172ea-150">Par exemple, vous pouvez permettre à certains utilisateurs d’accéder aux clés de compte de stockage, pendant que d’autres pourront voir les informations relatives au compte de stockage, mais pas accéder aux clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-150">For example, you can give specific users the ability to access the storage account keys, while other users can view information about the storage account, but cannot access the storage account keys.</span></span>

#### <a name="granting-access"></a><span data-ttu-id="172ea-151">Octroi de l’accès</span><span class="sxs-lookup"><span data-stu-id="172ea-151">Granting Access</span></span>
<span data-ttu-id="172ea-152">L’accès est octroyé en attribuant le rôle RBAC approprié aux utilisateurs, groupes et applications, dans l’étendue appropriée.</span><span class="sxs-lookup"><span data-stu-id="172ea-152">Access is granted by assigning the appropriate RBAC role to users, groups, and applications, at the right scope.</span></span> <span data-ttu-id="172ea-153">Pour octroyer l’accès à l’ensemble de l’abonnement, vous devez attribuer un rôle au niveau de l’abonnement.</span><span class="sxs-lookup"><span data-stu-id="172ea-153">To grant access to the entire subscription, you assign a role at the subscription level.</span></span> <span data-ttu-id="172ea-154">Vous pouvez accorder l’accès à toutes les ressources d’un groupe de ressources en octroyant des autorisations au groupe de ressources proprement dit.</span><span class="sxs-lookup"><span data-stu-id="172ea-154">You can grant access to all of the resources in a resource group by granting permissions to the resource group itself.</span></span> <span data-ttu-id="172ea-155">Vous pouvez aussi attribuer des rôles spécifiques à certaines ressources, telles que des comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-155">You can also assign specific roles to specific resources, such as storage accounts.</span></span>

<span data-ttu-id="172ea-156">Voici les principaux points à prendre en compte pour accéder aux opérations de gestion d’un compte de stockage Azure à l’aide de RBAC :</span><span class="sxs-lookup"><span data-stu-id="172ea-156">Here are the main points that you need to know about using RBAC to access the management operations of an Azure Storage account:</span></span>

* <span data-ttu-id="172ea-157">Quand vous attribuez un accès, vous attribuez en fait un rôle au compte auquel vous souhaitez accéder.</span><span class="sxs-lookup"><span data-stu-id="172ea-157">When you assign access, you basically assign a role to the account that you want to have access.</span></span> <span data-ttu-id="172ea-158">Vous pouvez contrôler l’accès aux opérations servant à gérer ce compte de stockage, mais pas aux objets de données du compte.</span><span class="sxs-lookup"><span data-stu-id="172ea-158">You can control access to the operations used to manage that storage account, but not to the data objects in the account.</span></span> <span data-ttu-id="172ea-159">Par exemple, vous pouvez accorder une autorisation pour récupérer les propriétés du compte de stockage (par exemple, la redondance), mais pas pour accéder à un conteneur ou aux données d’un conteneur à l’intérieur de Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-159">For example, you can grant permission to retrieve the properties of the storage account (such as redundancy), but not to a container or data within a container inside Blob Storage.</span></span>
* <span data-ttu-id="172ea-160">Pour permettre à une personne d’accéder aux objets de données du compte de stockage, vous pouvez lui accorder l’autorisation de lire les clés de compte de stockage, ce qui lui permettra d’utiliser ces clés pour accéder aux objets blob, files d'attente, tables et autres fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-160">For someone to have permission to access the data objects in the storage account, you can give them permission to read the storage account keys, and that user can then use those keys to access the blobs, queues, tables, and files.</span></span>
* <span data-ttu-id="172ea-161">Il est possible d’attribuer des rôles à un compte d’utilisateur spécifique, à un groupe d’utilisateurs ou à une application déterminée.</span><span class="sxs-lookup"><span data-stu-id="172ea-161">Roles can be assigned to a specific user account, a group of users, or to a specific application.</span></span>
* <span data-ttu-id="172ea-162">À chaque rôle correspond une liste d’actions et de non-actions.</span><span class="sxs-lookup"><span data-stu-id="172ea-162">Each role has a list of Actions and Not Actions.</span></span> <span data-ttu-id="172ea-163">Par exemple, le rôle de contributeur de machine virtuelle dispose d’une action nommée « listKeys » qui autorise la lecture des clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-163">For example, the Virtual Machine Contributor role has an Action of "listKeys" that allows the storage account keys to be read.</span></span> <span data-ttu-id="172ea-164">Le contributeur dispose de « non-actions », telles que la mise à jour de l’accès des utilisateurs présents dans Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-164">The Contributor has "Not Actions" such as updating the access for users in the Active Directory.</span></span>
* <span data-ttu-id="172ea-165">Les rôles relatifs au stockage sont (entre autres) les suivants :</span><span class="sxs-lookup"><span data-stu-id="172ea-165">Roles for storage include (but are not limited to) the following:</span></span>

  * <span data-ttu-id="172ea-166">Propriétaire : il peut tout gérer, y compris l’accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-166">Owner – They can manage everything, including access.</span></span>
  * <span data-ttu-id="172ea-167">Contributeur : il a les mêmes prérogatives que le propriétaire, sauf qu’il ne peut pas attribuer l’accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-167">Contributor – They can do anything the owner can do except assign access.</span></span> <span data-ttu-id="172ea-168">Une personne associée à ce rôle peut afficher et régénérer les clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-168">Someone with this role can view and regenerate the storage account keys.</span></span> <span data-ttu-id="172ea-169">Les clés de compte de stockage lui permettent d’accéder aux objets de données.</span><span class="sxs-lookup"><span data-stu-id="172ea-169">With the storage account keys, they can access the data objects.</span></span>
  * <span data-ttu-id="172ea-170">Lecteur : il peut afficher les informations relatives au compte de stockage, à l’exception des secrets.</span><span class="sxs-lookup"><span data-stu-id="172ea-170">Reader – They can view information about the storage account, except secrets.</span></span> <span data-ttu-id="172ea-171">Par exemple, si vous attribuez un rôle avec des autorisations de lecture sur le compte de stockage, l’utilisateur qui en bénéficie peut afficher les propriétés du compte de stockage, mais il ne peut y apporter aucune modification ni afficher les clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-171">For example, if you assign a role with reader permissions on the storage account to someone, they can view the properties of the storage account, but they can't make any changes to the properties or view the storage account keys.</span></span>
  * <span data-ttu-id="172ea-172">Contributeur de compte de stockage : il peut gérer le compte de stockage, à savoir lire les groupes de ressources et les ressources de l’abonnement, créer et gérer des déploiements de groupes de ressources d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="172ea-172">Storage Account Contributor – They can manage the storage account – they can read the subscription's resource groups and resources, and create and manage subscription resource group deployments.</span></span> <span data-ttu-id="172ea-173">Il peut également accéder aux clés de compte de stockage, ce qui sous-entend qu’il peut accéder au plan de données.</span><span class="sxs-lookup"><span data-stu-id="172ea-173">They can also access the storage account keys, which in turn means they can access the data plane.</span></span>
  * <span data-ttu-id="172ea-174">Administrateur de l’accès utilisateur :  il peut gérer l’accès utilisateur au compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-174">User Access Administrator – They can manage user access to the storage account.</span></span> <span data-ttu-id="172ea-175">Par exemple, il peut accorder un accès en lecture à un utilisateur spécifique.</span><span class="sxs-lookup"><span data-stu-id="172ea-175">For example, they can grant Reader access to a specific user.</span></span>
  * <span data-ttu-id="172ea-176">Contributeur de machine virtuelle : il peut gérer les machines virtuelles, mais pas le compte de stockage auquel elles sont connectées.</span><span class="sxs-lookup"><span data-stu-id="172ea-176">Virtual Machine Contributor – They can manage virtual machines but not the storage account to which they are connected.</span></span> <span data-ttu-id="172ea-177">Ce rôle permet de dresser la liste des clés de compte de stockage, ce qui signifie que l’utilisateur qui en bénéficie peut mettre à jour le plan de données.</span><span class="sxs-lookup"><span data-stu-id="172ea-177">This role can list the storage account keys, which means that the user to whom you assign this role can update the data plane.</span></span>

    <span data-ttu-id="172ea-178">Pour pouvoir créer une machine virtuelle, l’utilisateur doit pouvoir créer le fichier VHD correspondant dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-178">In order for a user to create a virtual machine, they have to be able to create the corresponding VHD file in a storage account.</span></span> <span data-ttu-id="172ea-179">Pour ce faire, il doit pouvoir récupérer la clé de compte de stockage et la passer à l’API chargée de créer la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="172ea-179">To do that, they need to be able to retrieve the storage account key and pass it to the API creating the VM.</span></span> <span data-ttu-id="172ea-180">Autrement dit, il doit disposer de cette autorisation pour pouvoir dresser la liste des clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-180">Therefore, they must have this permission so they can list the storage account keys.</span></span>
* <span data-ttu-id="172ea-181">Cette possibilité de définir des rôles personnalisés est une spécificité qui vous permet de composer un ensemble d’actions à partir d’une liste d’actions applicables aux ressources Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-181">The ability to define custom roles is a feature that allows you to compose a set of actions from a list of available actions that can be performed on Azure resources.</span></span>
* <span data-ttu-id="172ea-182">Pour pouvoir affecter un rôle à l’utilisateur, celui-ci doit au préalable avoir été défini dans Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-182">The user has to be set up in your Azure Active Directory before you can assign a role to them.</span></span>
* <span data-ttu-id="172ea-183">Vous pouvez créer un rapport indiquant qui a accordé/révoqué tel type d’accès à telle personne sur telle étendue à l’aide de PowerShell ou de l’interface de ligne de commande Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-183">You can create a report of who granted/revoked what kind of access to/from whom and on what scope using PowerShell or the Azure CLI.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-184">Ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-184">Resources</span></span>
* [<span data-ttu-id="172ea-185">Contrôle d’accès en fonction du rôle Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="172ea-185">Azure Active Directory Role-based Access Control</span></span>](../../active-directory/role-based-access-control-configure.md)

  <span data-ttu-id="172ea-186">Cet article décrit le contrôle d’accès en fonction du rôle d’Active Directory Azure et en explique le fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="172ea-186">This article explains the Azure Active Directory Role-based Access Control and how it works.</span></span>
* [<span data-ttu-id="172ea-187">RBAC : rôles intégrés</span><span class="sxs-lookup"><span data-stu-id="172ea-187">RBAC: Built in Roles</span></span>](../../active-directory/role-based-access-built-in-roles.md)

  <span data-ttu-id="172ea-188">Cet article explique en détail tous les rôles intégrés disponibles dans RBAC.</span><span class="sxs-lookup"><span data-stu-id="172ea-188">This article details all of the built-in roles available in RBAC.</span></span>
* [<span data-ttu-id="172ea-189">Présentation du déploiement de Resource Manager et du déploiement classique</span><span class="sxs-lookup"><span data-stu-id="172ea-189">Understanding Resource Manager deployment and classic deployment</span></span>](../../azure-resource-manager/resource-manager-deployment-model.md)

  <span data-ttu-id="172ea-190">Cet article décrit le modèle de déploiement Resource Manager et le modèle de déploiement classique et explique les avantages liés à l’utilisation de Resource Manager et des groupes de ressources.</span><span class="sxs-lookup"><span data-stu-id="172ea-190">This article explains the Resource Manager deployment and classic deployment models, and explains the benefits of using the Resource Manager and resource groups.</span></span> <span data-ttu-id="172ea-191">Il explique le fonctionnement des fournisseurs de solutions de calcul, de réseau et de stockage selon le modèle Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="172ea-191">It explains how the Azure Compute, Network, and Storage Providers work under the Resource Manager model.</span></span>
* [<span data-ttu-id="172ea-192">Gestion du contrôle d’accès basé sur les rôles à l’aide de l’API REST</span><span class="sxs-lookup"><span data-stu-id="172ea-192">Managing Role-Based Access Control with the REST API</span></span>](../../active-directory/role-based-access-control-manage-access-rest.md)

  <span data-ttu-id="172ea-193">Cet article montre comment utiliser l’API REST pour gérer RBAC.</span><span class="sxs-lookup"><span data-stu-id="172ea-193">This article shows how to use the REST API to manage RBAC.</span></span>
* [<span data-ttu-id="172ea-194">Informations de référence sur l’API REST du fournisseur de ressources Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-194">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/mt163683.aspx)

  <span data-ttu-id="172ea-195">Ces informations de référence portent sur l’API que vous pouvez utiliser pour gérer votre compte de stockage par programmation.</span><span class="sxs-lookup"><span data-stu-id="172ea-195">This is the reference for the APIs you can use to manage your storage account programmatically.</span></span>
* [<span data-ttu-id="172ea-196">Developer’s guide to auth with Azure Resource Manager API (Guide du développeur pour l’authentification avec l’API Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="172ea-196">Developer's guide to auth with Azure Resource Manager API</span></span>](http://www.dushyantgill.com/blog/2015/05/23/developers-guide-to-auth-with-azure-resource-manager-api/)

  <span data-ttu-id="172ea-197">Cet article explique l’authentification avec les API Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="172ea-197">This article shows how to authenticate using the Resource Manager APIs.</span></span>
* [<span data-ttu-id="172ea-198">Role-Based Access Control for Microsoft Azure from Ignite (Contrôle d’accès en fonction du rôle pour Microsoft Azure)</span><span class="sxs-lookup"><span data-stu-id="172ea-198">Role-Based Access Control for Microsoft Azure from Ignite</span></span>](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

  <span data-ttu-id="172ea-199">Ce lien donne accès à une vidéo sur Channel 9 enregistrée à l’occasion de la conférence MS Ignite en 2015.</span><span class="sxs-lookup"><span data-stu-id="172ea-199">This is a link to a video on Channel 9 from the 2015 MS Ignite conference.</span></span> <span data-ttu-id="172ea-200">Cette session traite des fonctionnalités de gestion d’accès et de création de rapports d’Azure et explore les bonnes pratiques en ce qui concerne la sécurisation de l’accès aux abonnements Azure à l’aide d’Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-200">In this session, they talk about access management and reporting capabilities in Azure, and explore best practices around securing access to Azure subscriptions using Azure Active Directory.</span></span>

### <a name="managing-your-storage-account-keys"></a><span data-ttu-id="172ea-201">Gestion des clés de compte de stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-201">Managing Your Storage Account Keys</span></span>
<span data-ttu-id="172ea-202">Les clés de compte de stockage sont des chaînes de 512 bits créés par Azure qui, combinées avec le nom de compte de stockage, permettent d’accéder aux objets de données présents dans le compte de stockage, notamment les blobs, les entités d’une table, les messages de file d’attente et les fichiers se trouvant sur un partage de fichiers Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-202">Storage account keys are 512-bit strings created by Azure that, along with the storage account name, can be used to access the data objects stored in the storage account, e.g. blobs, entities within a table, queue messages, and files on an Azure File share.</span></span> <span data-ttu-id="172ea-203">Le contrôle d’accès aux clés de compte de stockage permet de contrôler l’accès au plan de données de ce compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-203">Controlling access to the storage account keys controls access to the data plane for that storage account.</span></span>

<span data-ttu-id="172ea-204">Chaque compte de stockage a deux clés appelées « Clé 1 » et « Clé 2 » dans le [portail Azure](http://portal.azure.com/) et dans les applets de commande PowerShell.</span><span class="sxs-lookup"><span data-stu-id="172ea-204">Each storage account has two keys referred to as "Key 1" and "Key 2" in the [Azure portal](http://portal.azure.com/) and in the PowerShell cmdlets.</span></span> <span data-ttu-id="172ea-205">Il est possible de les régénérer manuellement au moyen de diverses méthodes, notamment avec le [Portail Azure](https://portal.azure.com/), PowerShell, l’interface de ligne de commande Azure ou par programmation en utilisant la bibliothèque cliente de stockage .NET ou l’API REST des services de Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-205">These can be regenerated manually using one of several methods, including, but not limited to using the [Azure portal](https://portal.azure.com/), PowerShell, the Azure CLI, or programmatically using the .NET Storage Client Library or the Azure Storage Services REST API.</span></span>

<span data-ttu-id="172ea-206">La décision de régénérer les clés de compte de stockage peut être motivée par différents facteurs.</span><span class="sxs-lookup"><span data-stu-id="172ea-206">There are any number of reasons to regenerate your storage account keys.</span></span>

* <span data-ttu-id="172ea-207">Vous pouvez souhaiter les régénérer à intervalles réguliers pour des raisons de sécurité.</span><span class="sxs-lookup"><span data-stu-id="172ea-207">You might regenerate them on a regular basis for security reasons.</span></span>
* <span data-ttu-id="172ea-208">De même, vous régénérerez vos clés de compte de stockage si un individu a réussi à s’introduire dans une application et a pu récupérer la clé qui était codée en dur ou enregistrée dans un fichier de configuration. En pareil cas, il aura en effet un accès complet à votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-208">You would regenerate your storage account keys if someone managed to hack into an application and retrieve the key that was hardcoded or saved in a configuration file, giving them full access to your storage account.</span></span>
* <span data-ttu-id="172ea-209">Autre cas où vos clés devront être régénérées : si votre équipe utilise une application Storage Explorer qui conserve la clé de compte de stockage et que l’un des membres de l’équipe est sur le départ.</span><span class="sxs-lookup"><span data-stu-id="172ea-209">Another case for key regeneration is if your team is using a Storage Explorer application that retains the storage account key, and one of the team members leaves.</span></span> <span data-ttu-id="172ea-210">L’application continuera de fonctionner, et cette personne sera en mesure d’accéder à votre compte de stockage après être parti.</span><span class="sxs-lookup"><span data-stu-id="172ea-210">The application would continue to work, giving them access to your storage account after they're gone.</span></span> <span data-ttu-id="172ea-211">Il s’agit de fait du premier motif de création de signatures d’accès partagé au niveau des comptes, qui se substituent au stockage des clés d’accès dans un fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="172ea-211">This is actually the primary reason they created account-level Shared Access Signatures – you can use an account-level SAS instead of storing the access keys in a configuration file.</span></span>

#### <a name="key-regeneration-plan"></a><span data-ttu-id="172ea-212">Plan de régénération de clé</span><span class="sxs-lookup"><span data-stu-id="172ea-212">Key regeneration plan</span></span>
<span data-ttu-id="172ea-213">Vous ne pouvez pas vous permettre de régénérer la clé que vous utilisez sans aucune planification.</span><span class="sxs-lookup"><span data-stu-id="172ea-213">You don't want to just regenerate the key you are using without some planning.</span></span> <span data-ttu-id="172ea-214">Vous risqueriez en effet de couper tous les accès au compte de stockage, ce qui provoquerait une interruption majeure.</span><span class="sxs-lookup"><span data-stu-id="172ea-214">If you do that, you could cut off all access to that storage account, which can cause major disruption.</span></span> <span data-ttu-id="172ea-215">C’est la raison pour laquelle il existe deux clés.</span><span class="sxs-lookup"><span data-stu-id="172ea-215">This is why there are two keys.</span></span> <span data-ttu-id="172ea-216">Nous vous recommandons de régénérer une seule clé à la fois.</span><span class="sxs-lookup"><span data-stu-id="172ea-216">You should regenerate one key at a time.</span></span>

<span data-ttu-id="172ea-217">Avant de régénérer vos clés, veillez à dresser une liste qui recense toutes les applications qui dépendent du compte de stockage, ainsi que tous les autres services que vous utilisez dans Azure, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="172ea-217">Before you regenerate your keys, be sure you have a list of all of your applications that are dependent on the storage account, as well as any other services you are using in Azure.</span></span> <span data-ttu-id="172ea-218">Par exemple, si vous utilisez Azure Media Services et que ce produit dépend de votre compte de stockage, vous devez resynchroniser les clés d’accès avec ce services après avoir régénéré la clé.</span><span class="sxs-lookup"><span data-stu-id="172ea-218">For example, if you are using Azure Media Services that are dependent on your storage account, you must re-sync the access keys with your media service after you regenerate the key.</span></span> <span data-ttu-id="172ea-219">Si vous utilisez des applications telles que Storage Explorer, vous devrez aussi fournir les nouvelles clés à ces applications.</span><span class="sxs-lookup"><span data-stu-id="172ea-219">If you are using any applications such as a storage explorer, you will need to provide the new keys to those applications as well.</span></span> <span data-ttu-id="172ea-220">Notez que si vous disposez de machines virtuelles dont les fichiers VHD sont stockés dans le compte de stockage, elles ne seront pas affectées par la régénération des clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-220">Note that if you have VMs whose VHD files are stored in the storage account, they will not be affected by regenerating the storage account keys.</span></span>

<span data-ttu-id="172ea-221">Vous pouvez régénérer vos clés dans le Portail Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-221">You can regenerate your keys in the Azure portal.</span></span> <span data-ttu-id="172ea-222">Une fois les clés régénérées, leur synchronisation au niveau des services de stockage peut prendre jusqu’à 10 minutes.</span><span class="sxs-lookup"><span data-stu-id="172ea-222">Once keys are regenerated they can take up to 10 minutes to be synchronized across Storage Services.</span></span>

<span data-ttu-id="172ea-223">Quand vous êtes prêt, voici la procédure générale à suivre pour modifier votre clé.</span><span class="sxs-lookup"><span data-stu-id="172ea-223">When you're ready, here's the general process detailing how you should change your key.</span></span> <span data-ttu-id="172ea-224">Dans ce cas, vous êtes censé utiliser actuellement la clé 1 et vous apprêter à tout modifier pour utiliser la clé 2.</span><span class="sxs-lookup"><span data-stu-id="172ea-224">In this case, the assumption is that you are currently using Key 1 and you are going to change everything to use Key 2 instead.</span></span>

1. <span data-ttu-id="172ea-225">Régénérez la clé 2 de façon à la sécuriser.</span><span class="sxs-lookup"><span data-stu-id="172ea-225">Regenerate Key 2 to ensure that it is secure.</span></span> <span data-ttu-id="172ea-226">Vous pouvez faire cette opération dans le Portail Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-226">You can do this in the Azure portal.</span></span>
2. <span data-ttu-id="172ea-227">Dans toutes les applications où est stockée la clé de stockage, remplacez la valeur de clé de stockage par la nouvelle valeur de la clé 2.</span><span class="sxs-lookup"><span data-stu-id="172ea-227">In all of the applications where the storage key is stored, change the storage key to use Key 2's new value.</span></span> <span data-ttu-id="172ea-228">Testez et publiez l’application.</span><span class="sxs-lookup"><span data-stu-id="172ea-228">Test and publish the application.</span></span>
3. <span data-ttu-id="172ea-229">Dès lors que l’ensemble des applications et des services fonctionnent correctement, régénérez la clé 1.</span><span class="sxs-lookup"><span data-stu-id="172ea-229">After all of the applications and services are up and running successfully, regenerate Key 1.</span></span> <span data-ttu-id="172ea-230">Cela garantit que toute personne à laquelle vous n’avez pas accordé expressément la nouvelle clé n’aura plus accès au compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-230">This ensures that anybody to whom you have not expressly given the new key will no longer have access to the storage account.</span></span>

<span data-ttu-id="172ea-231">Si vous utilisez actuellement la clé 2, vous pouvez utiliser le même processus, mais en inversant les noms des clés.</span><span class="sxs-lookup"><span data-stu-id="172ea-231">If you are currently using Key 2, you can use the same process, but reverse the key names.</span></span>

<span data-ttu-id="172ea-232">Vous pouvez effectuer la migration sur deux jours, en modifiant chaque application pour utiliser la nouvelle clé et en la publiant.</span><span class="sxs-lookup"><span data-stu-id="172ea-232">You can migrate over a couple of days, changing each application to use the new key and publishing it.</span></span> <span data-ttu-id="172ea-233">Quand vous avez traité l’ensemble des services et applications, vous devez revenir en arrière et régénérer l’ancienne clé pour qu’elle ne fonctionne plus.</span><span class="sxs-lookup"><span data-stu-id="172ea-233">After all of them are done, you should then go back and regenerate the old key so it no longer works.</span></span>

<span data-ttu-id="172ea-234">Une autre option consiste à placer la clé de compte de stockage dans [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) en tant que clé secrète et à faire en sorte que vos applications la récupèrent à cet endroit.</span><span class="sxs-lookup"><span data-stu-id="172ea-234">Another option is to put the storage account key in an [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) as a secret and have your applications retrieve the key from there.</span></span> <span data-ttu-id="172ea-235">Ensuite, quand vous régénérez la clé et mettez à jour Azure Key Vault, vous n’avez pas à redéployer les applications, car elles choisissent automatiquement la nouvelle clé dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="172ea-235">Then when you regenerate the key and update the Azure Key Vault, the applications will not need to be redeployed because they will pick up the new key from the Azure Key Vault automatically.</span></span> <span data-ttu-id="172ea-236">Notez que vous pouvez faire en sorte que l’application lise la clé chaque fois que vous en avez besoin, ou vous pouvez la mettre en cache en mémoire et, en cas d’échec lors de son utilisation, vous pouvez de nouveau la récupérer dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="172ea-236">Note that you can have the application read the key each time you need it, or you can cache it in memory and if it fails when using it, retrieve the key again from the Azure Key Vault.</span></span>

<span data-ttu-id="172ea-237">L’utilisation d’Azure Key Vault ajoute également un autre niveau de sécurité pour les clés de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-237">Using Azure Key Vault also adds another level of security for your storage keys.</span></span> <span data-ttu-id="172ea-238">Si vous utilisez cette méthode, la clé de stockage n’est jamais codée en dur dans un fichier de configuration, ce qui rend impossible l’accès aux clés par une personne sans autorisation spécifique.</span><span class="sxs-lookup"><span data-stu-id="172ea-238">If you use this method, you will never have the storage key hardcoded in a configuration file, which removes that avenue of somebody getting access to the keys without specific permission.</span></span>

<span data-ttu-id="172ea-239">Un autre avantage de l’utilisation d’Azure Key Vault est que vous pouvez également contrôler l’accès à vos clés à l’aide d’Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-239">Another advantage of using Azure Key Vault is you can also control access to your keys using Azure Active Directory.</span></span> <span data-ttu-id="172ea-240">Cela signifie que vous pouvez accorder l’accès aux quelques applications qui doivent récupérer les clés dans Azure Key Vault, tout en sachant que d’autres applications ne seront pas en mesure d’accéder aux clés si l’autorisation ne leur est pas expressément accordée.</span><span class="sxs-lookup"><span data-stu-id="172ea-240">This means you can grant access to the handful of applications that need to retrieve the keys from Azure Key Vault, and know that other applications will not be able to access the keys without granting them permission specifically.</span></span>

<span data-ttu-id="172ea-241">Remarque : Il est recommandé d’utiliser uniquement l’une des clés dans toutes vos applications en même temps.</span><span class="sxs-lookup"><span data-stu-id="172ea-241">Note: it is recommended to use only one of the keys in all of your applications at the same time.</span></span> <span data-ttu-id="172ea-242">Si vous utilisez parfois la clé 1 et parfois la clé 2, vous ne pouvez effectuer aucune rotation de vos clés sans qu’une application ne perde l’accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-242">If you use Key 1 in some places and Key 2 in others, you will not be able to rotate your keys without some application losing access.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-243">Ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-243">Resources</span></span>
* [<span data-ttu-id="172ea-244">À propos des comptes Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-244">About Azure Storage Accounts</span></span>](storage-create-storage-account.md#regenerate-storage-access-keys)

  <span data-ttu-id="172ea-245">Cet article présente une vue d’ensemble des comptes de stockage et décrit l’affichage, la copie et la régénération des clés d’accès de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-245">This article gives an overview of storage accounts and discusses viewing, copying, and regenerating storage access keys.</span></span>
* [<span data-ttu-id="172ea-246">Informations de référence sur l’API REST du fournisseur de ressources Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-246">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/mt163683.aspx)

  <span data-ttu-id="172ea-247">Cet article contient des liens vers des articles spécifiques sur la récupération des clés de compte de stockage et la régénération des clés de compte de stockage pour un compte Azure à l’aide de l’API REST.</span><span class="sxs-lookup"><span data-stu-id="172ea-247">This article contains links to specific articles about retrieving the storage account keys and regenerating the storage account keys for an Azure Account using the REST API.</span></span> <span data-ttu-id="172ea-248">Remarque : ceci concerne les comptes de stockage Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="172ea-248">Note: This is for  Resource Manager storage accounts.</span></span>
* [<span data-ttu-id="172ea-249">Opérations sur les comptes de stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-249">Operations on storage accounts</span></span>](https://msdn.microsoft.com/library/ee460790.aspx)

  <span data-ttu-id="172ea-250">Cet article dans Informations de référence sur l’API REST du gestionnaire de service de stockage contient des liens vers des articles spécifiques sur la récupération et la régénération des clés de compte de stockage à l’aide de l’API REST.</span><span class="sxs-lookup"><span data-stu-id="172ea-250">This article in the Storage Service Manager REST API Reference contains links to specific articles on retrieving and regenerating the storage account keys using the REST API.</span></span> <span data-ttu-id="172ea-251">Remarque : Seuls les comptes de stockage classiques sont concernés.</span><span class="sxs-lookup"><span data-stu-id="172ea-251">Note: This is for the Classic storage accounts.</span></span>
* [<span data-ttu-id="172ea-252">Say goodbye to key management – manage access to Azure Storage data using Azure AD (Dites au revoir à la gestion des clés - gérer l’accès aux données Azure Storage avec Azure AD)</span><span class="sxs-lookup"><span data-stu-id="172ea-252">Say goodbye to key management – manage access to Azure Storage data using Azure AD</span></span>](http://www.dushyantgill.com/blog/2015/04/26/say-goodbye-to-key-management-manage-access-to-azure-storage-data-using-azure-ad/)

  <span data-ttu-id="172ea-253">Cet article montre comment utiliser Active Directory pour contrôler l’accès à vos clés de stockage Azure dans Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="172ea-253">This article shows how to use Active Directory to control access to your Azure Storage keys in Azure Key Vault.</span></span> <span data-ttu-id="172ea-254">Il montre également comment utiliser un travail Azure Automation pour régénérer les clés toutes les heures.</span><span class="sxs-lookup"><span data-stu-id="172ea-254">It also shows how to use an Azure Automation job to regenerate the keys on an hourly basis.</span></span>

## <a name="data-plane-security"></a><span data-ttu-id="172ea-255">Sécurité du plan de données</span><span class="sxs-lookup"><span data-stu-id="172ea-255">Data Plane Security</span></span>
<span data-ttu-id="172ea-256">La sécurité du plan de données fait référence aux méthodes permettant de sécuriser les objets de données stockés dans Azure Storage : les objets blob, files d’attente, tables et fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-256">Data Plane Security refers to the methods used to secure the data objects stored in Azure Storage – the blobs, queues, tables, and files.</span></span> <span data-ttu-id="172ea-257">Nous avons étudié des méthodes pour chiffrer les données et la sécurité pendant le transit des données, mais comment faire pour autoriser l’accès aux objets ?</span><span class="sxs-lookup"><span data-stu-id="172ea-257">We've seen methods to encrypt the data and security during transit of the data, but how do you go about allowing access to the objects?</span></span>

<span data-ttu-id="172ea-258">Il existe essentiellement deux méthodes pour contrôler l’accès aux objets de données eux-mêmes.</span><span class="sxs-lookup"><span data-stu-id="172ea-258">There are basically two methods for controlling access to the data objects themselves.</span></span> <span data-ttu-id="172ea-259">La première consiste à contrôler l’accès aux clés de compte de stockage, et la seconde à utiliser des signatures d’accès partagé pour accorder l’accès à des objets de données spécifiques pour une durée déterminée.</span><span class="sxs-lookup"><span data-stu-id="172ea-259">The first is by controlling access to the storage account keys, and the second is using Shared Access Signatures to grant access to specific data objects for a specific amount of time.</span></span>

<span data-ttu-id="172ea-260">Une exception à noter est que vous pouvez autoriser un accès public à vos objets blob en définissant le niveau d’accès pour le conteneur qui contient les objets blob en conséquence.</span><span class="sxs-lookup"><span data-stu-id="172ea-260">One exception to note is that you can allow public access to your blobs by setting the access level for the container that holds the blobs accordingly.</span></span> <span data-ttu-id="172ea-261">Si vous définissez l’accès pour un conteneur sur Objet blob ou Conteneur, vous autorisez l’accès en lecture public pour les objets blob de ce conteneur.</span><span class="sxs-lookup"><span data-stu-id="172ea-261">If you set access for a container to Blob or Container, it will allow public read access for the blobs in that container.</span></span> <span data-ttu-id="172ea-262">Cela signifie que toute personne avec une URL pointant vers un objet blob dans ce conteneur peut l’ouvrir dans un navigateur sans utiliser de signature d’accès partagé ni disposer de clé de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-262">This means anyone with a URL pointing to a blob in that container can open it in a browser without using a Shared Access Signature or having the storage account keys.</span></span>

### <a name="storage-account-keys"></a><span data-ttu-id="172ea-263">Clés de compte de stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-263">Storage Account Keys</span></span>
<span data-ttu-id="172ea-264">Les clés de compte de stockage sont des chaînes de 512 bits créées par Azure qui, combinées avec le nom de compte, permettent d’accéder aux objets de données stockés dans le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-264">Storage account keys are 512-bit strings created by Azure that, along with the storage account name, can be used to access the data objects stored in the storage account.</span></span>

<span data-ttu-id="172ea-265">Par exemple, vous pouvez lire des objets blob, écrire dans des files d’attente, créer des tables et modifier des fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-265">For example, you can read blobs, write to queues, create tables, and modify files.</span></span> <span data-ttu-id="172ea-266">La plupart de ces actions peuvent être effectuées avec le Portail Azure ou à l’aide de l’une des nombreuses applications de l’explorateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-266">Many of these actions can be performed through the Azure portal, or using one of many Storage Explorer applications.</span></span> <span data-ttu-id="172ea-267">Vous pouvez également écrire du code pour utiliser l’API REST ou l’une des bibliothèques clientes de stockage pour effectuer ces opérations.</span><span class="sxs-lookup"><span data-stu-id="172ea-267">You can also write code to use the REST API or one of the Storage Client Libraries to perform these operations.</span></span>

<span data-ttu-id="172ea-268">Comme indiqué dans la section [Sécurité du plan de gestion](#management-plane-security), l’accès aux clés de stockage pour un compte de stockage classique peut être accordé en donnant un accès complet à l’abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-268">As discussed in the section on the [Management Plane Security](#management-plane-security), access to the storage keys for a Classic storage account can be granted by giving full access to the Azure subscription.</span></span> <span data-ttu-id="172ea-269">L’accès aux clés de stockage pour un compte de stockage avec le modèle Azure Resource Manager peut être contrôlé via le contrôle d’accès en fonction du rôle (RBAC).</span><span class="sxs-lookup"><span data-stu-id="172ea-269">Access to the storage keys for a storage account using the Azure Resource Manager model can be controlled through Role-Based Access Control (RBAC).</span></span>

### <a name="how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a><span data-ttu-id="172ea-270">Comment déléguer l’accès aux objets dans votre compte à l’aide de signatures d’accès partagé et stratégies d’accès stockées</span><span class="sxs-lookup"><span data-stu-id="172ea-270">How to delegate access to objects in your account using Shared Access Signatures and Stored Access Policies</span></span>
<span data-ttu-id="172ea-271">Une signature d’accès partagé (SAP) est une chaîne contenant un jeton de sécurité qui peut être associé à un URI et vous permet de déléguer l’accès aux objets de stockage et de spécifier des restrictions telles que les autorisations et la plage des dates/heures d’accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-271">A Shared Access Signature is a string containing a security token that can be attached to a URI that allows you to delegate access to storage objects and specify constraints such as the permissions and the date/time range of access.</span></span>

<span data-ttu-id="172ea-272">Vous pouvez accorder l’accès à des objets blob, conteneurs, messages de file d’attente, fichiers et tables.</span><span class="sxs-lookup"><span data-stu-id="172ea-272">You can grant access to blobs, containers, queue messages, files, and tables.</span></span> <span data-ttu-id="172ea-273">Avec les tables, vous pouvez en fait accorder l’autorisation d’accéder à un ensemble d’entités dans la table en spécifiant les plages de clés de partition et de ligne auxquelles vous souhaitez que l’utilisateur ait accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-273">With tables, you can actually grant permission to access a range of entities in the table by specifying the partition and row key ranges to which you want the user to have access.</span></span> <span data-ttu-id="172ea-274">Par exemple, si vous avez des données stockées avec une clé de partition d’état géographique, vous pouvez permettre à quelqu’un d’accéder uniquement aux données pour la Californie.</span><span class="sxs-lookup"><span data-stu-id="172ea-274">For example, if you have data stored with a partition key of geographical state, you could give someone access to just the data for California.</span></span>

<span data-ttu-id="172ea-275">Dans un autre exemple, vous pouvez donner à une application web un jeton SAP qui lui permet d’écrire des entrées dans une file d’attente, et donner à une application de rôle de travail un jeton SAP pour obtenir des messages à partir de la file d’attente et les traiter.</span><span class="sxs-lookup"><span data-stu-id="172ea-275">In another example, you might give a web application a SAS token that enables it to write entries to a queue, and give a worker role application a SAS token to get messages from the queue and process them.</span></span> <span data-ttu-id="172ea-276">Vous pouvez également donner à un client un jeton SAP qu’il peut utiliser pour charger des images sur un conteneur de stockage d’objets blob et donner à une application web l’autorisation de lire ces images.</span><span class="sxs-lookup"><span data-stu-id="172ea-276">Or you could give one customer a SAS token they can use to upload pictures to a container in Blob Storage, and give a web application permission to read those pictures.</span></span> <span data-ttu-id="172ea-277">Dans les deux cas, les problèmes sont séparés : chaque application peut recevoir uniquement l’accès dont elle a besoin pour effectuer sa tâche.</span><span class="sxs-lookup"><span data-stu-id="172ea-277">In both cases, there is a separation of concerns – each application can be given just the access that they require in order to perform their task.</span></span> <span data-ttu-id="172ea-278">Ceci est possible avec l’utilisation des signatures d’accès partagé.</span><span class="sxs-lookup"><span data-stu-id="172ea-278">This is possible through the use of Shared Access Signatures.</span></span>

#### <a name="why-you-want-to-use-shared-access-signatures"></a><span data-ttu-id="172ea-279">Pourquoi utiliser des signatures d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="172ea-279">Why you want to use Shared Access Signatures</span></span>
<span data-ttu-id="172ea-280">Pourquoi utiliser une signature d’accès partagé au lieu de donner simplement votre clé de compte de stockage, ce qui est tellement plus facile ?</span><span class="sxs-lookup"><span data-stu-id="172ea-280">Why would you want to use an SAS instead of just giving out your storage account key, which is so much easier?</span></span> <span data-ttu-id="172ea-281">La distribution de votre clé de compte de stockage revient à partager les clés de votre royaume de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-281">Giving out your storage account key is like sharing the keys of your storage kingdom.</span></span> <span data-ttu-id="172ea-282">L’accès accordé est complet.</span><span class="sxs-lookup"><span data-stu-id="172ea-282">It grants complete access.</span></span> <span data-ttu-id="172ea-283">Une personne peut utiliser vos clés et charger l’intégralité de son audiothèque sur votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-283">Someone could use your keys and upload their entire music library to your storage account.</span></span> <span data-ttu-id="172ea-284">Elle peut également remplacer vos fichiers par des versions infectées par des virus, ou voler vos données.</span><span class="sxs-lookup"><span data-stu-id="172ea-284">They could also replace your files with virus-infected versions, or steal your data.</span></span> <span data-ttu-id="172ea-285">Le fait d’accorder un accès illimité à votre compte de stockage est une décision que vous ne devez pas prendre à la légère.</span><span class="sxs-lookup"><span data-stu-id="172ea-285">Giving away unlimited access to your storage account is something that should not be taken lightly.</span></span>

<span data-ttu-id="172ea-286">Avec les signatures d’accès partagé, vous pouvez donner à un client uniquement les autorisations requises pour une durée limitée.</span><span class="sxs-lookup"><span data-stu-id="172ea-286">With Shared Access Signatures, you can give a client just the permissions required for a limited amount of time.</span></span> <span data-ttu-id="172ea-287">Par exemple, si un utilisateur charge un objet blob sur votre compte, vous pouvez lui accorder un accès en écriture juste le temps nécessaire de charger l’objet blob (selon la taille de l’objet blob, bien sûr).</span><span class="sxs-lookup"><span data-stu-id="172ea-287">For example, if someone is uploading a blob to your account, you can grant them write access for just enough time to upload the blob (depending on the size of the blob, of course).</span></span> <span data-ttu-id="172ea-288">Si vous changez ensuite d’avis, vous pouvez révoquer cet accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-288">And if you change your mind, you can revoke that access.</span></span>

<span data-ttu-id="172ea-289">En outre, vous pouvez spécifier que les demandes effectuées à l’aide d’une signature d’accès partagé doivent être limitées à une certaine adresse IP ou plage d’adresses IP externe à Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-289">Additionally, you can specify that requests made using a SAS are restricted to a certain IP address or IP address range external to Azure.</span></span> <span data-ttu-id="172ea-290">Vous pouvez également exiger que les demandes soient effectuées à l’aide d’un protocole spécifique (HTTPS ou HTTP/HTTPS).</span><span class="sxs-lookup"><span data-stu-id="172ea-290">You can also require that requests are made using a specific protocol (HTTPS or HTTP/HTTPS).</span></span> <span data-ttu-id="172ea-291">Cela signifie que, si vous souhaitez uniquement autoriser le trafic HTTPS, vous pouvez affecter la valeur HTTPS uniquement au protocole requis et le trafic HTTP sera bloqué.</span><span class="sxs-lookup"><span data-stu-id="172ea-291">This means if you only want to allow HTTPS traffic, you can set the required protocol to HTTPS only, and HTTP traffic will be blocked.</span></span>

#### <a name="definition-of-a-shared-access-signature"></a><span data-ttu-id="172ea-292">Définition d’une signature d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="172ea-292">Definition of a Shared Access Signature</span></span>
<span data-ttu-id="172ea-293">Une signature d’accès partagé est un ensemble de paramètres de requête ajoutés à l’URL pointant vers la ressource</span><span class="sxs-lookup"><span data-stu-id="172ea-293">A Shared Access Signature is a set of query parameters appended to the URL pointing at the resource</span></span>

<span data-ttu-id="172ea-294">qui fournit des informations sur l’accès autorisé et la durée pendant laquelle l’accès est autorisé.</span><span class="sxs-lookup"><span data-stu-id="172ea-294">that provides information about the access allowed and the length of time for which the access is permitted.</span></span> <span data-ttu-id="172ea-295">Voici un exemple ; cet URI fournit un accès en lecture à un objet blob pendant cinq minutes.</span><span class="sxs-lookup"><span data-stu-id="172ea-295">Here is an example; this URI provides read access to a blob for five minutes.</span></span> <span data-ttu-id="172ea-296">Notez que les paramètres de requête SAP doivent être encodés dans une URL, par exemple %3A pour le signe deux-points (:) ou %20 pour un espace.</span><span class="sxs-lookup"><span data-stu-id="172ea-296">Note that SAS query parameters must be URL Encoded, such as %3A for colon (:) or %20 for a space.</span></span>

```
http://mystorage.blob.core.windows.net/mycontainer/myblob.txt (URL to the blob)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for the authentication of the SAS)
```

#### <a name="how-the-shared-access-signature-is-authenticated-by-the-azure-storage-service"></a><span data-ttu-id="172ea-297">Comment la signature d’accès partagé est authentifiée par le service Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-297">How the Shared Access Signature is authenticated by the Azure Storage Service</span></span>
<span data-ttu-id="172ea-298">Quand le service de stockage reçoit la demande, il accepte les paramètres de requête d’entrée et crée une signature en utilisant la même méthode que le programme appelant.</span><span class="sxs-lookup"><span data-stu-id="172ea-298">When the storage service receives the request, it takes the input query parameters and creates a signature using the same method as the calling program.</span></span> <span data-ttu-id="172ea-299">Il compare ensuite les deux signatures.</span><span class="sxs-lookup"><span data-stu-id="172ea-299">It then compares the two signatures.</span></span> <span data-ttu-id="172ea-300">Si elles correspondent, le service de stockage peut vérifier que la version du service de stockage est valide, que la date et l’heure sont dans la fenêtre spécifiée, que l’accès demandé correspond à la demande effectuée, etc.</span><span class="sxs-lookup"><span data-stu-id="172ea-300">If they agree, then the storage service can check the storage service version to make sure it's valid, verify that the current date and time are within the specified window, make sure the access requested corresponds to the request made, etc.</span></span>

<span data-ttu-id="172ea-301">Par exemple, avec notre URL ci-dessus, si l’URL pointe vers un fichier au lieu d’un objet blob, cette demande échoue, car elle spécifie que la signature d’accès partagé concerne un objet blob.</span><span class="sxs-lookup"><span data-stu-id="172ea-301">For example, with our URL above, if the URL was pointing to a file instead of a blob, this request would fail because it specifies that the Shared Access Signature is for a blob.</span></span> <span data-ttu-id="172ea-302">Si la commande REST appelée doit mettre à jour un objet blob, elle échoue car la signature d’accès partagé spécifie que seul l’accès en lecture est autorisé.</span><span class="sxs-lookup"><span data-stu-id="172ea-302">If the REST command being called was to update a blob, it would fail because the Shared Access Signature specifies that only read access is permitted.</span></span>

#### <a name="types-of-shared-access-signatures"></a><span data-ttu-id="172ea-303">Types de signatures d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="172ea-303">Types of Shared Access Signatures</span></span>
* <span data-ttu-id="172ea-304">Une signature d’accès partagé de niveau service permet d’accéder à des ressources spécifiques dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-304">A service-level SAS can be used to access specific resources in a storage account.</span></span> <span data-ttu-id="172ea-305">À titre d’exemple, il peut s’agir de la récupération d’une liste d’objets blob dans un conteneur, du téléchargement d’un objet blob, de la mise à jour d’une entité dans une table, de l’ajout de messages à une file d’attente ou du chargement d’un fichier sur un partage de fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-305">Some examples of this are retrieving a list of blobs in a container, downloading a blob, updating an entity in a table, adding messages to a queue or uploading a file to a file share.</span></span>
* <span data-ttu-id="172ea-306">Une signature d’accès partagé de niveau compte permet d’accéder à tout ce pour quoi une signature d’accès partagé de niveau service peut être utilisée.</span><span class="sxs-lookup"><span data-stu-id="172ea-306">An account-level SAS can be used to access anything that a service-level SAS can be used for.</span></span> <span data-ttu-id="172ea-307">En outre, elle peut proposer des options pour des ressources qui ne sont pas autorisées avec une signature d’accès partagé de niveau service, telles que la capacité de créer des conteneurs, tables, files d’attente et partages de fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-307">Additionally, it can give options to resources that are not permitted with a service-level SAS, such as the ability to create containers, tables, queues, and file shares.</span></span> <span data-ttu-id="172ea-308">Vous pouvez également spécifier l’accès à plusieurs services à la fois.</span><span class="sxs-lookup"><span data-stu-id="172ea-308">You can also specify access to multiple services at once.</span></span> <span data-ttu-id="172ea-309">Par exemple, vous pouvez accorder à un utilisateur l’accès à la fois aux objets blob et aux fichiers dans votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-309">For example, you might give someone access to both blobs and files in your storage account.</span></span>

#### <a name="creating-an-sas-uri"></a><span data-ttu-id="172ea-310">Création d’un URI SAP</span><span class="sxs-lookup"><span data-stu-id="172ea-310">Creating an SAS URI</span></span>
1. <span data-ttu-id="172ea-311">Vous pouvez créer un URI approprié à la demande, en définissant chaque fois l’ensemble des paramètres de requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-311">You can create an ad hoc URI on demand, defining all of the query parameters each time.</span></span>

   <span data-ttu-id="172ea-312">Cette opération est vraiment flexible mais, si vous avez un ensemble logique de paramètres qui sont chaque fois similaires, il est plus judicieux d’utiliser une stratégie d’accès stockée.</span><span class="sxs-lookup"><span data-stu-id="172ea-312">This is really flexible, but if you have a logical set of parameters that are similar each time, using a Stored Access Policy is a better idea.</span></span>
2. <span data-ttu-id="172ea-313">Vous pouvez créer une stratégie d’accès stockée pour un conteneur entier, un partage de fichiers, une table ou une file d’attente.</span><span class="sxs-lookup"><span data-stu-id="172ea-313">You can create a Stored Access Policy for an entire container, file share, table, or queue.</span></span> <span data-ttu-id="172ea-314">Vous pouvez ensuite l’utiliser comme base pour les URI SAP que vous créez.</span><span class="sxs-lookup"><span data-stu-id="172ea-314">Then you can use this as the basis for the SAS URIs you create.</span></span> <span data-ttu-id="172ea-315">Les autorisations basées sur les stratégies d’accès stockées peuvent être facilement révoquées.</span><span class="sxs-lookup"><span data-stu-id="172ea-315">Permissions based on Stored Access Policies can be easily revoked.</span></span> <span data-ttu-id="172ea-316">Jusqu’à 5 stratégies peuvent être définies sur chaque conteneur, file d’attente, table ou partage de fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-316">You can have up to 5 policies defined on each container, queue, table, or file share.</span></span>

   <span data-ttu-id="172ea-317">Par exemple, si un grand nombre de personnes doivent lire les objets blob dans un conteneur spécifique, vous pouvez créer une stratégie d’accès stockée qui indique « d’accorder l’accès en lecture » et tous les autres paramètres qui seront chaque fois les mêmes.</span><span class="sxs-lookup"><span data-stu-id="172ea-317">For example, if you were going to have many people read the blobs in a specific container, you could create a Stored Access Policy that says "give read access" and any other settings that will be the same each time.</span></span> <span data-ttu-id="172ea-318">Vous pouvez ensuite créer un URI SAP en utilisant les paramètres de la stratégie d’accès stockée et en spécifiant la date/l’heure d’expiration.</span><span class="sxs-lookup"><span data-stu-id="172ea-318">Then you can create an SAS URI using the settings of the Stored Access Policy and specifying the expiration date/time.</span></span> <span data-ttu-id="172ea-319">L’avantage de cette opération est que vous n’avez pas à spécifier chaque fois tous les paramètres de requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-319">The advantage of this is that you don't have to specify all of the query parameters every time.</span></span>

#### <a name="revocation"></a><span data-ttu-id="172ea-320">Révocation</span><span class="sxs-lookup"><span data-stu-id="172ea-320">Revocation</span></span>
<span data-ttu-id="172ea-321">Supposons que votre signature d’accès partagé a été compromise ou que vous voulez la modifier en raison des exigences de sécurité de l’entreprise ou de conformité aux réglementations.</span><span class="sxs-lookup"><span data-stu-id="172ea-321">Suppose your SAS has been compromised, or you want to change it because of corporate security or regulatory compliance requirements.</span></span> <span data-ttu-id="172ea-322">Comment révoquer l’accès à une ressource à l’aide de cette signature ?</span><span class="sxs-lookup"><span data-stu-id="172ea-322">How do you revoke access to a resource using that SAS?</span></span> <span data-ttu-id="172ea-323">Cela dépend de la façon dont vous avez créé l’URI SAP.</span><span class="sxs-lookup"><span data-stu-id="172ea-323">It depends on how you created the SAS URI.</span></span>

<span data-ttu-id="172ea-324">Si vous utilisez des URI appropriés, vous avez trois possibilités.</span><span class="sxs-lookup"><span data-stu-id="172ea-324">If you are using ad hoc URI's, you have three options.</span></span> <span data-ttu-id="172ea-325">Vous pouvez émettre des jetons SAP avec des stratégies de délai d’expiration court et attendre simplement que la signature d’accès partagé expire.</span><span class="sxs-lookup"><span data-stu-id="172ea-325">You can issue SAS tokens with short expiration policies and simply wait for the SAS to expire.</span></span> <span data-ttu-id="172ea-326">Vous pouvez renommer ou supprimer la ressource (en supposant que le jeton a été étendu à un objet unique).</span><span class="sxs-lookup"><span data-stu-id="172ea-326">You can rename or delete the resource (assuming the token was scoped to a single object).</span></span> <span data-ttu-id="172ea-327">Vous pouvez modifier les clés de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-327">You can change the storage account keys.</span></span> <span data-ttu-id="172ea-328">Cette dernière option peut avoir un impact important, en fonction du nombre de services qui utilisent ce compte de stockage, et n’est probablement pas souhaitable sans une certaine planification.</span><span class="sxs-lookup"><span data-stu-id="172ea-328">This last option can have a big impact, depending on how many services are using that storage account, and probably isn't something you want to do without some planning.</span></span>

<span data-ttu-id="172ea-329">Si vous utilisez une signature d’accès partagé dérivée d’une stratégie d’accès stockée, vous pouvez supprimer l’accès en révoquant la stratégie d’accès stockée : vous pouvez simplement la modifier de sorte qu’elle ait déjà expiré, ou la supprimer complètement.</span><span class="sxs-lookup"><span data-stu-id="172ea-329">If you are using a SAS derived from a Stored Access Policy, you can remove access by revoking the Stored Access Policy – you can just change it so it has already expired, or you can remove it altogether.</span></span> <span data-ttu-id="172ea-330">Cette opération prend effet immédiatement et invalide toutes les signatures d’accès partagé créées à l’aide de cette stratégie d’accès stockée.</span><span class="sxs-lookup"><span data-stu-id="172ea-330">This takes effect immediately, and invalidates every SAS created using that Stored Access Policy.</span></span> <span data-ttu-id="172ea-331">La mise à jour ou la suppression de la stratégie d’accès stockée peut avoir un impact sur les personnes qui accèdent à ce conteneur, ce partage de fichiers, cette table ou cette file d’attente spécifique via une signature d’accès partagé, mais si les clients sont écrits pour demander une nouvelle signature quand l’ancienne n’est plus valide, cela fonctionne correctement.</span><span class="sxs-lookup"><span data-stu-id="172ea-331">Updating or removing the Stored Access Policy may impact people accessing that specific container, file share, table, or queue via SAS, but if the clients are written so they request a new SAS when the old one becomes invalid, this will work fine.</span></span>

<span data-ttu-id="172ea-332">Comme l’utilisation d’une signature d’accès partagé dérivée d’une stratégie d’accès stockée vous permet de révoquer immédiatement cette signature d’accès partagé, il est recommandé de toujours utiliser des stratégies d’accès stockées quand cela est possible.</span><span class="sxs-lookup"><span data-stu-id="172ea-332">Because using a SAS derived from a Stored Access Policy gives you the ability to revoke that SAS immediately, it is the recommended best practice to always use Stored Access Policies when possible.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-333">Ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-333">Resources</span></span>
<span data-ttu-id="172ea-334">Pour plus d’informations sur l’utilisation des signatures d’accès partagé et des stratégies d’accès stockées, ainsi que pour obtenir des exemples, consultez les articles suivants :</span><span class="sxs-lookup"><span data-stu-id="172ea-334">For more detailed information on using Shared Access Signatures and Stored Access Policies, complete with examples, please refer to the following articles:</span></span>

* <span data-ttu-id="172ea-335">Ce sont les articles de référence.</span><span class="sxs-lookup"><span data-stu-id="172ea-335">These are the reference articles.</span></span>

  * [<span data-ttu-id="172ea-336">Exemples d’associations de sécurité de service</span><span class="sxs-lookup"><span data-stu-id="172ea-336">Service SAS</span></span>](https://msdn.microsoft.com/library/dn140256.aspx)

    <span data-ttu-id="172ea-337">Cet article fournit des exemples d’utilisation d’une signature d’accès partagé de niveau service avec des objets blob, des messages de file d’attente, des plages de tables et des fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-337">This article provides examples of using a service-level SAS with blobs, queue messages, table ranges, and files.</span></span>
  * [<span data-ttu-id="172ea-338">Construction d’un service SAP</span><span class="sxs-lookup"><span data-stu-id="172ea-338">Constructing a service SAS</span></span>](https://msdn.microsoft.com/library/dn140255.aspx)
  * [<span data-ttu-id="172ea-339">Construction d’un compte SAP</span><span class="sxs-lookup"><span data-stu-id="172ea-339">Constructing an account SAS</span></span>](https://msdn.microsoft.com/library/mt584140.aspx)
* <span data-ttu-id="172ea-340">Il s’agit de didacticiels pour l’utilisation de la bibliothèque cliente .NET pour créer des signatures d’accès partagé et des stratégies d’accès stockées.</span><span class="sxs-lookup"><span data-stu-id="172ea-340">These are tutorials for using the .NET client library to create Shared Access Signatures and Stored Access Policies.</span></span>

  * [<span data-ttu-id="172ea-341">Utilisation des signatures d’accès partagé (SAP)</span><span class="sxs-lookup"><span data-stu-id="172ea-341">Using Shared Access Signatures (SAS)</span></span>](../storage-dotnet-shared-access-signature-part-1.md)
  * [<span data-ttu-id="172ea-342">Signatures d’accès partagé, partie 2 : création et utilisation d’une signature d’accès partagé avec le service BLOB</span><span class="sxs-lookup"><span data-stu-id="172ea-342">Shared Access Signatures, Part 2: Create and Use a SAS with the Blob Service</span></span>](../blobs/storage-dotnet-shared-access-signature-part-2.md)

    <span data-ttu-id="172ea-343">Cet article contient une description du modèle SAP, des exemples de signatures d’accès partagé et des recommandations pour une utilisation optimale de ces signatures.</span><span class="sxs-lookup"><span data-stu-id="172ea-343">This article includes an explanation of the SAS model, examples of Shared Access Signatures, and recommendations for the best practice use of SAS.</span></span> <span data-ttu-id="172ea-344">La révocation de l’autorisation accordée est également abordée.</span><span class="sxs-lookup"><span data-stu-id="172ea-344">Also discussed is the revocation of the permission granted.</span></span>
* <span data-ttu-id="172ea-345">Limitation de l’accès par adresse IP (listes ACL IP)</span><span class="sxs-lookup"><span data-stu-id="172ea-345">Limiting access by IP Address (IP ACLs)</span></span>

  * [<span data-ttu-id="172ea-346">Qu’est-ce qu’une liste de contrôle d’accès de point de terminaison (ACL) ?</span><span class="sxs-lookup"><span data-stu-id="172ea-346">What is an endpoint Access Control List (ACLs)?</span></span>](../../virtual-network/virtual-networks-acl.md)
  * [<span data-ttu-id="172ea-347">Construction d’un service SAP</span><span class="sxs-lookup"><span data-stu-id="172ea-347">Constructing a Service SAS</span></span>](https://msdn.microsoft.com/library/azure/dn140255.aspx)

    <span data-ttu-id="172ea-348">Il s’agit de l’article de référence pour les signatures d’accès partagé de niveau service ; il inclut un exemple de création de liste ACL IP.</span><span class="sxs-lookup"><span data-stu-id="172ea-348">This is the reference article for service-level SAS; it includes an example of IP ACLing.</span></span>
  * [<span data-ttu-id="172ea-349">Construction d’un compte SAP</span><span class="sxs-lookup"><span data-stu-id="172ea-349">Constructing an Account SAS</span></span>](https://msdn.microsoft.com/library/azure/mt584140.aspx)

    <span data-ttu-id="172ea-350">Il s’agit de l’article de référence pour les signatures d’accès partagé de niveau compte ; il inclut un exemple de création de liste ACL IP.</span><span class="sxs-lookup"><span data-stu-id="172ea-350">This is the reference article for account-level SAS; it includes an example of IP ACLing.</span></span>
* <span data-ttu-id="172ea-351">Authentification</span><span class="sxs-lookup"><span data-stu-id="172ea-351">Authentication</span></span>

  * [<span data-ttu-id="172ea-352">Authentification pour les services de stockage Azure</span><span class="sxs-lookup"><span data-stu-id="172ea-352">Authentication for the Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* <span data-ttu-id="172ea-353">Didacticiel de prise en main des signatures d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="172ea-353">Shared Access Signatures Getting Started Tutorial</span></span>

  * [<span data-ttu-id="172ea-354">SAS Getting Started Tutorial (Didacticiel de prise en main des signatures d’accès partagé)</span><span class="sxs-lookup"><span data-stu-id="172ea-354">SAS Getting Started Tutorial</span></span>](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a><span data-ttu-id="172ea-355">Chiffrement en transit</span><span class="sxs-lookup"><span data-stu-id="172ea-355">Encryption in Transit</span></span>
### <a name="transport-level-encryption--using-https"></a><span data-ttu-id="172ea-356">Chiffrement au niveau du transport – Utilisation de HTTPS</span><span class="sxs-lookup"><span data-stu-id="172ea-356">Transport-Level Encryption – Using HTTPS</span></span>
<span data-ttu-id="172ea-357">Une autre étape à suivre pour garantir la sécurité de vos données Azure Storage consiste à chiffrer les données entre le client et Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-357">Another step you should take to ensure the security of your Azure Storage data is to encrypt the data between the client and Azure Storage.</span></span> <span data-ttu-id="172ea-358">La première recommandation est de toujours utiliser le protocole [HTTPS](https://en.wikipedia.org/wiki/HTTPS) , qui garantit une communication sécurisée via l’Internet public.</span><span class="sxs-lookup"><span data-stu-id="172ea-358">The first recommendation is to always use the [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protocol, which ensures secure communication over the public Internet.</span></span>

<span data-ttu-id="172ea-359">Pour disposer d’un canal de communication sécurisé, vous devez toujours utiliser HTTPS lors de l’appel des API REST ou de l’accès aux objets dans le stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-359">To have a secure communication channel, you should always use HTTPS when calling the REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="172ea-360">De plus, les **signatures d’accès partagé**, qui peuvent être utilisées pour déléguer l’accès aux objets de stockage Azure, incluent une option pour spécifier que seul le protocole HTTPS est autorisé avec les signatures d’accès partagé. Cette option garantit que le protocole approprié est utilisé par tous ceux qui envoient des liens avec des jetons SAP.</span><span class="sxs-lookup"><span data-stu-id="172ea-360">Also, **Shared Access Signatures**, which can be used to delegate access to Azure Storage objects, include an option to specify that only the HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use the proper protocol.</span></span>

<span data-ttu-id="172ea-361">Vous pouvez appliquer l’utilisation du protocole HTTPS lorsque vous appelez les API REST pour accéder aux objets dans les comptes de stockage en activant l’option [Transfert sécurisé requis](../storage-require-secure-transfer.md) pour le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-361">You can enforce the use of HTTPS when calling the REST APIs to access objects in storage accounts by enabling [Secure transfer required](../storage-require-secure-transfer.md) for the storage account.</span></span> <span data-ttu-id="172ea-362">Les connexions utilisant le protocole HTTP seront refusées une fois cette option activée.</span><span class="sxs-lookup"><span data-stu-id="172ea-362">Connections using HTTP will be refused once this is enabled.</span></span>

### <a name="using-encryption-during-transit-with-azure-file-shares"></a><span data-ttu-id="172ea-363">Utilisation du chiffrement pendant le transit avec des partages de fichiers Azure</span><span class="sxs-lookup"><span data-stu-id="172ea-363">Using encryption during transit with Azure File shares</span></span>
<span data-ttu-id="172ea-364">Le stockage de fichiers Azure prend en charge le protocole HTTPS avec l’API REST, mais il est plus couramment utilisé comme partage de fichiers SMB attaché à une machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="172ea-364">Azure File storage supports HTTPS when using the REST API, but is more commonly used as an SMB file share attached to a VM.</span></span> <span data-ttu-id="172ea-365">SMB 2.1 ne prend pas en charge le chiffrement. Les connexions sont donc autorisées uniquement dans la même région Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-365">SMB 2.1 does not support encryption, so connections are only allowed within the same region in Azure.</span></span> <span data-ttu-id="172ea-366">Toutefois, SMB 3.0 prend en charge le chiffrement et est disponible dans Windows Server 2012 R2, Windows 8, Windows 8.1 et Windows 10, ce qui rend possibles l’accès entre les régions et même l’accès sur le bureau.</span><span class="sxs-lookup"><span data-stu-id="172ea-366">However, SMB 3.0 supports encryption, and it's available in Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on the desktop.</span></span>

<span data-ttu-id="172ea-367">Notez que les partages de fichiers Azure peuvent être utilisés avec Unix, mais comme le client SMB de Linux ne prend pas encore en charge le chiffrement, l’accès est autorisé uniquement dans une région Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-367">Note that while Azure File shares can be used with Unix, the Linux SMB client does not yet support encryption, so access is only allowed within an Azure region.</span></span> <span data-ttu-id="172ea-368">La prise en charge du chiffrement pour Linux est prévue par les développeurs Linux responsables de la fonctionnalité SMB.</span><span class="sxs-lookup"><span data-stu-id="172ea-368">Encryption support for Linux is on the roadmap of Linux developers responsible for SMB functionality.</span></span> <span data-ttu-id="172ea-369">Quand ce chiffrement sera pris en charge, vous pourrez accéder à un partage de fichiers Azure sur Linux de la même manière que sur Windows.</span><span class="sxs-lookup"><span data-stu-id="172ea-369">When they add encryption, you will have the same ability for accessing an Azure File share on Linux as you do for Windows.</span></span>

<span data-ttu-id="172ea-370">Vous pouvez appliquer l’utilisation du chiffrement avec le service Azure Files en activant l’option [Transfert sécurisé requis](../storage-require-secure-transfer.md) pour le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-370">You can enforce the use of encryption with the Azure Files service by enabling [Secure transfer required](../storage-require-secure-transfer.md) for the storage account.</span></span> <span data-ttu-id="172ea-371">Si vous utilisez les API REST, le protocole HTTPS est requis.</span><span class="sxs-lookup"><span data-stu-id="172ea-371">If using the REST APIs, HTTPs is required.</span></span> <span data-ttu-id="172ea-372">Pour SMB, seules les connexions SMB qui prennent en charge le chiffrement seront établies avec succès.</span><span class="sxs-lookup"><span data-stu-id="172ea-372">For SMB, only SMB connections that support encryption will connect successfully.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-373">Ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-373">Resources</span></span>
* [<span data-ttu-id="172ea-374">Utilisation de Stockage Fichier Azure avec Linux</span><span class="sxs-lookup"><span data-stu-id="172ea-374">How to use Azure File storage with Linux</span></span>](../storage-how-to-use-files-linux.md)

  <span data-ttu-id="172ea-375">Cet article montre comment monter un partage de fichiers Azure sur un système Linux et comment charger/télécharger des fichiers.</span><span class="sxs-lookup"><span data-stu-id="172ea-375">This article shows how to mount an Azure File share on a Linux system and upload/download files.</span></span>
* [<span data-ttu-id="172ea-376">Prise en main d’Azure File Storage sur Windows</span><span class="sxs-lookup"><span data-stu-id="172ea-376">Get started with Azure File storage on Windows</span></span>](../storage-dotnet-how-to-use-files.md)

  <span data-ttu-id="172ea-377">Cet article présente une vue d’ensemble des partages de fichiers Azure. Il explique aussi comment monter et utiliser ces partages avec PowerShell et .NET.</span><span class="sxs-lookup"><span data-stu-id="172ea-377">This article gives an overview of Azure File shares and how to mount and use them using PowerShell and .NET.</span></span>
* [<span data-ttu-id="172ea-378">Dans Stockage Fichier Azure</span><span class="sxs-lookup"><span data-stu-id="172ea-378">Inside Azure File storage</span></span>](https://azure.microsoft.com/blog/inside-azure-file-storage/)

  <span data-ttu-id="172ea-379">Cet article annonce la disponibilité générale du stockage de fichiers Azure et fournit des informations techniques sur le chiffrement SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="172ea-379">This article announces the general availability of Azure File storage and provides technical details about the SMB 3.0 encryption.</span></span>

### <a name="using-client-side-encryption-to-secure-data-that-you-send-to-storage"></a><span data-ttu-id="172ea-380">Utilisation du chiffrement côté client pour sécuriser les données envoyées dans le stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-380">Using Client-side encryption to secure data that you send to storage</span></span>
<span data-ttu-id="172ea-381">Le chiffrement côté client est une autre méthode possible pour garantir la sécurité de vos données pendant leur transfert entre une application cliente et Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-381">Another option that helps you ensure that your data is secure while being transferred between a client application and Storage is Client-side Encryption.</span></span> <span data-ttu-id="172ea-382">Les données sont chiffrées avant d’être transférées vers Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-382">The data is encrypted before being transferred into Azure Storage.</span></span> <span data-ttu-id="172ea-383">Quand vous récupérez les données d’Azure Storage, les données sont déchiffrées seulement après leur réception côté client.</span><span class="sxs-lookup"><span data-stu-id="172ea-383">When retrieving the data from Azure Storage, the data is decrypted after it is received on the client side.</span></span> <span data-ttu-id="172ea-384">Même si les données sont chiffrées quand elles sont en transit sur le réseau, nous vous recommandons d’utiliser également le protocole HTTPS. En effet, HTTPS inclut des vérifications de l’intégrité des données qui contribuent à réduire les erreurs réseau ayant un impact sur l’intégrité des données.</span><span class="sxs-lookup"><span data-stu-id="172ea-384">Even though the data is encrypted going across the wire, we recommend that you also use HTTPS, as it has data integrity checks built in which help mitigate network errors affecting the integrity of the data.</span></span>

<span data-ttu-id="172ea-385">Le chiffrement côté client est aussi une méthode qui vous permet de chiffrer vos données au repos, car les données sont stockées dans leur forme chiffrée.</span><span class="sxs-lookup"><span data-stu-id="172ea-385">Client-side encryption is also a method for encrypting your data at rest, as the data is stored in its encrypted form.</span></span> <span data-ttu-id="172ea-386">Nous discuterons de ce point plus en détail dans la section sur le [chiffrement au repos](#encryption-at-rest).</span><span class="sxs-lookup"><span data-stu-id="172ea-386">We'll talk about this in more detail in the section on [Encryption at Rest](#encryption-at-rest).</span></span>

## <a name="encryption-at-rest"></a><span data-ttu-id="172ea-387">Chiffrement au repos</span><span class="sxs-lookup"><span data-stu-id="172ea-387">Encryption at Rest</span></span>
<span data-ttu-id="172ea-388">Il existe trois fonctionnalités Azure qui fournissent un chiffrement au repos.</span><span class="sxs-lookup"><span data-stu-id="172ea-388">There are three Azure features that provide encryption at rest.</span></span> <span data-ttu-id="172ea-389">La première, Azure Disk Encryption, s’utilise pour chiffrer les disques de données et de système d’exploitation utilisés par des machines virtuelles IaaS.</span><span class="sxs-lookup"><span data-stu-id="172ea-389">Azure Disk Encryption is used to encrypt the OS and data disks in IaaS Virtual Machines.</span></span> <span data-ttu-id="172ea-390">Les deux autres, le chiffrement côté client et SSE, sont utilisées pour chiffrer les données dans Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-390">The other two – Client-side Encryption and SSE – are both used to encrypt data in Azure Storage.</span></span> <span data-ttu-id="172ea-391">Nous allons étudier chacune de ces fonctionnalités, les comparer, puis déterminer quand les utiliser.</span><span class="sxs-lookup"><span data-stu-id="172ea-391">Let's look at each of these, and then do a comparison and see when each one can be used.</span></span>

<span data-ttu-id="172ea-392">Vous pouvez utiliser le chiffrement côté client pour chiffrer les données en transit (ces données sont également stockées dans leur forme chiffrée dans Azure Storage). Si vous préférez, vous pouvez aussi simplement utiliser le protocole HTTPS pendant le transfert et utiliser un autre moyen de votre choix pour chiffrer automatiquement les données stockées.</span><span class="sxs-lookup"><span data-stu-id="172ea-392">While you can use Client-side Encryption to encrypt the data in transit (which is also stored in its encrypted form in Storage), you may prefer to simply use HTTPS during the transfer, and have some way for the data to be automatically encrypted when it is stored.</span></span> <span data-ttu-id="172ea-393">Il existe deux méthodes possibles : Azure Disk Encryption et SSE.</span><span class="sxs-lookup"><span data-stu-id="172ea-393">There are two ways to do this -- Azure Disk Encryption and SSE.</span></span> <span data-ttu-id="172ea-394">La première chiffre les données directement sur les disques de données et de système d’exploitation. La seconde chiffre les données qui sont écrites dans le stockage Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-394">One is used to directly encrypt the data on OS and data disks used by VMs, and the other is used to encrypt data written to Azure Blob Storage.</span></span>

### <a name="storage-service-encryption-sse"></a><span data-ttu-id="172ea-395">Storage Service Encryption (SSE)</span><span class="sxs-lookup"><span data-stu-id="172ea-395">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="172ea-396">SSE vous permet de demander que le service de stockage chiffre automatiquement les données lors de leur écriture dans le Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-396">SSE allows you to request that the storage service automatically encrypt the data when writing it to Azure Storage.</span></span> <span data-ttu-id="172ea-397">Les données lues à partir d’Azure Storage sont déchiffrées par le service de stockage avant d’être renvoyées.</span><span class="sxs-lookup"><span data-stu-id="172ea-397">When you read the data from Azure Storage, it will be decrypted by the storage service before being returned.</span></span> <span data-ttu-id="172ea-398">Grâce à ce processus, vous sécurisez vos données sans avoir à modifier le code existant ni à ajouter du code dans les applications.</span><span class="sxs-lookup"><span data-stu-id="172ea-398">This enables you to secure your data without having to modify code or add code to any applications.</span></span>

<span data-ttu-id="172ea-399">Il s’agit d’un paramètre qui s’applique à l’ensemble du compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-399">This is a setting that applies to the whole storage account.</span></span> <span data-ttu-id="172ea-400">Vous pouvez activer ou désactiver cette fonctionnalité en modifiant la valeur du paramètre.</span><span class="sxs-lookup"><span data-stu-id="172ea-400">You can enable and disable this feature by changing the value of the setting.</span></span> <span data-ttu-id="172ea-401">Pour cela, vous pouvez utiliser le Portail Azure, PowerShell, l’interface de ligne de commande Azure, l’API REST du fournisseur de ressources de stockage ou la bibliothèque cliente de stockage .NET.</span><span class="sxs-lookup"><span data-stu-id="172ea-401">To do this, you can use the Azure portal, PowerShell, the Azure CLI, the Storage Resource Provider REST API, or the .NET Storage Client Library.</span></span> <span data-ttu-id="172ea-402">Par défaut, SSE est désactivé.</span><span class="sxs-lookup"><span data-stu-id="172ea-402">By default, SSE is turned off.</span></span>

<span data-ttu-id="172ea-403">Actuellement, les clés utilisées pour le chiffrement sont gérées par Microsoft.</span><span class="sxs-lookup"><span data-stu-id="172ea-403">At this time, the keys used for the encryption are managed by Microsoft.</span></span> <span data-ttu-id="172ea-404">Nous créons initialement les clés, puis nous gérons le stockage sécurisé des clés ainsi que leur rotation régulière, conformément à la politique interne de Microsoft en la matière.</span><span class="sxs-lookup"><span data-stu-id="172ea-404">We generate the keys originally, and manage the secure storage of the keys as well as the regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="172ea-405">À l’avenir, vous pourrez gérer vos propres clés de chiffrement et fournir un chemin de migration des clés gérées par Microsoft en clés gérées par le client.</span><span class="sxs-lookup"><span data-stu-id="172ea-405">In the future, you will get the ability to manage your own encryption keys, and provide a migration path from Microsoft-managed keys to customer-managed keys.</span></span>

<span data-ttu-id="172ea-406">Cette fonctionnalité est disponible pour les comptes de Stockage Standard et Premium créés avec le modèle de déploiement Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="172ea-406">This feature is available for Standard and Premium Storage accounts created using the Resource Manager deployment model.</span></span> <span data-ttu-id="172ea-407">SSE s’applique uniquement aux objets blob de blocs, aux objets blob de pages et aux objets blob d’ajout.</span><span class="sxs-lookup"><span data-stu-id="172ea-407">SSE applies only to block blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="172ea-408">Les autres types de données, y compris les tables, les files d’attente et les fichiers, ne sont pas chiffrés.</span><span class="sxs-lookup"><span data-stu-id="172ea-408">The other types of data, including tables, queues, and files, will not be encrypted.</span></span>

<span data-ttu-id="172ea-409">Les données sont chiffrées uniquement si la fonctionnalité SSE est activée. Le chiffrement s’effectue pendant l’écriture des données dans le stockage Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-409">Data is only encrypted when SSE is enabled and the data is written to Blob Storage.</span></span> <span data-ttu-id="172ea-410">L’activation ou la désactivation de SSE n’a pas d’impact sur les données existantes.</span><span class="sxs-lookup"><span data-stu-id="172ea-410">Enabling or disabling SSE does not impact existing data.</span></span> <span data-ttu-id="172ea-411">En d’autres termes, quand vous activez cette fonctionnalité, les données qui existent déjà ne sont pas chiffrées ; de la même façon, si vous la désactivez, les données existantes ne sont pas déchiffrées.</span><span class="sxs-lookup"><span data-stu-id="172ea-411">In other words, when you enable this encryption, it will not go back and encrypt data that already exists; nor will it decrypt the data that already exists when you disable SSE.</span></span>

<span data-ttu-id="172ea-412">Si vous souhaitez utiliser cette fonctionnalité avec un compte de stockage Classic, vous pouvez créer un compte de stockage Resource Manager et utiliser AzCopy pour copier les données dans ce nouveau compte.</span><span class="sxs-lookup"><span data-stu-id="172ea-412">If you want to use this feature with a Classic storage account, you can create a new Resource Manager storage account and use AzCopy to copy the data to the new account.</span></span>

### <a name="client-side-encryption"></a><span data-ttu-id="172ea-413">chiffrement côté client</span><span class="sxs-lookup"><span data-stu-id="172ea-413">Client-side Encryption</span></span>
<span data-ttu-id="172ea-414">Nous avons déjà mentionné le chiffrement côté client quand nous avons parlé du chiffrement des données en transit.</span><span class="sxs-lookup"><span data-stu-id="172ea-414">We mentioned client-side encryption when discussing the encryption of the data in transit.</span></span> <span data-ttu-id="172ea-415">Cette fonctionnalité vous permet de chiffrer par programmation vos données dans une application cliente avant de les envoyer via le réseau vers Azure Storage, et de les déchiffrer par programmation une fois que vous les avez récupérées d’Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-415">This feature allows you to programmatically encrypt your data in a client application before sending it across the wire to be written to Azure Storage, and to programmatically decrypt your data after retrieving it from Azure Storage.</span></span>

<span data-ttu-id="172ea-416">Elle fournit le chiffrement en transit, mais également le chiffrement au repos.</span><span class="sxs-lookup"><span data-stu-id="172ea-416">This does provide encryption in transit, but it also provides the feature of Encryption at Rest.</span></span> <span data-ttu-id="172ea-417">Même si les données sont chiffrées quand elles sont en transit, nous vous recommandons encore d’utiliser le protocole HTTPS, car HTTPS inclut des vérifications de l’intégrité des données qui contribuent à réduire les erreurs réseau ayant un impact sur l’intégrité des données.</span><span class="sxs-lookup"><span data-stu-id="172ea-417">Note that although the data is encrypted in transit, we still recommend using HTTPS to take advantage of the built-in data integrity checks which help mitigate network errors affecting the integrity of the data.</span></span>

<span data-ttu-id="172ea-418">Par exemple, utilisez cette fonctionnalité si vous avez une application web qui stocke et récupère des objets blob, et si vous souhaitez sécuriser au maximum l’application et les données.</span><span class="sxs-lookup"><span data-stu-id="172ea-418">An example of where you might use this is if you have a web application that stores blobs and retrieves blobs, and you want the application and data to be as secure as possible.</span></span> <span data-ttu-id="172ea-419">Dans ce cas, le chiffrement côté client est la méthode appropriée.</span><span class="sxs-lookup"><span data-stu-id="172ea-419">In that case, you would use client-side encryption.</span></span> <span data-ttu-id="172ea-420">Le trafic entre le client et le service Azure Blob contient la ressource chiffrée, et personne ne peut interpréter les données en transit et les reconstituer dans vos objets blob privés.</span><span class="sxs-lookup"><span data-stu-id="172ea-420">The traffic between the client and the Azure Blob Service contains the encrypted resource, and nobody can interpret the data in transit and reconstitute it into your private blobs.</span></span>

<span data-ttu-id="172ea-421">Le chiffrement côté client est intégré aux bibliothèques clientes de stockage Java et .NET, qui utilisent à leur tour les API Azure Key Vault, ce qui rend son implémentation très facile.</span><span class="sxs-lookup"><span data-stu-id="172ea-421">Client-side encryption is built into the Java and the .NET storage client libraries, which in turn use the Azure Key Vault APIs, making it pretty easy for you to implement.</span></span> <span data-ttu-id="172ea-422">Le processus de chiffrement et déchiffrement des données utilise la technique d’enveloppe, et stocke les métadonnées utilisées par le chiffrement dans chaque objet de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-422">The process of encrypting and decrypting the data uses the envelope technique, and stores metadata used by the encryption in each storage object.</span></span> <span data-ttu-id="172ea-423">Par exemple, pour les objets blob, il les stocke dans les métadonnées d’objet blob et, pour les files d’attente, il les ajoute à chaque message de file d’attente.</span><span class="sxs-lookup"><span data-stu-id="172ea-423">For example, for blobs, it stores it in the blob metadata, while for queues, it adds it to each queue message.</span></span>

<span data-ttu-id="172ea-424">Pour le chiffrement proprement dit, vous pouvez créer et gérer vos propres clés de chiffrement.</span><span class="sxs-lookup"><span data-stu-id="172ea-424">For the encryption itself, you can generate and manage your own encryption keys.</span></span> <span data-ttu-id="172ea-425">Vous pouvez également utiliser les clés générées par la bibliothèque cliente Azure Storage, ou demander à Azure Key Vault de générer les clés.</span><span class="sxs-lookup"><span data-stu-id="172ea-425">You can also use keys generated by the Azure Storage Client Library, or you can have the Azure Key Vault generate the keys.</span></span> <span data-ttu-id="172ea-426">Vous pouvez stocker vos clés de chiffrement dans votre stockage de clés local, ou les stocker dans un coffre Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="172ea-426">You can store your encryption keys in your on-premises key storage, or you can store them in an Azure Key Vault.</span></span> <span data-ttu-id="172ea-427">Azure Key Vault vous permet d’accorder l’accès à des clés secrètes dans Azure Key Vault à des utilisateurs spécifiques à l’aide d’Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="172ea-427">Azure Key Vault allows you to grant access to the secrets in Azure Key Vault to specific users using Azure Active Directory.</span></span> <span data-ttu-id="172ea-428">De cette manière, vous limitez les personnes autorisées à accéder au coffre de clés Azure Key Vault et à récupérer les clés que vous utilisez pour le chiffrement côté client.</span><span class="sxs-lookup"><span data-stu-id="172ea-428">This means that not just anybody can read the Azure Key Vault and retrieve the keys you're using for client-side encryption.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-429">les ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-429">Resources</span></span>
* [<span data-ttu-id="172ea-430">Chiffrement et déchiffrement d’objets blob dans Microsoft Azure Storage à l'aide d'Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="172ea-430">Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault</span></span>](../blobs/storage-encrypt-decrypt-blobs-key-vault.md)

  <span data-ttu-id="172ea-431">Cet article montre comment utiliser le chiffrement côté client avec Azure Key Vault, notamment comment créer le certificat KEK et le stocker dans le coffre à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="172ea-431">This article shows how to use client-side encryption with Azure Key Vault, including how to create the KEK and store it in the vault using PowerShell.</span></span>
* [<span data-ttu-id="172ea-432">Chiffrement côté client et Azure Key Vault pour Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-432">Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage</span></span>](../storage-client-side-encryption.md)

  <span data-ttu-id="172ea-433">Cet article explique le fonctionnement du chiffrement côté client. Il fournit des exemples d’utilisation de la bibliothèque cliente de stockage pour chiffrer et déchiffrer les ressources des quatre services de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-433">This article gives an explanation of client-side encryption, and provides examples of using the storage client library to encrypt and decrypt resources from the four storage services.</span></span> <span data-ttu-id="172ea-434">Il parle également d’Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="172ea-434">It also talks about Azure Key Vault.</span></span>

### <a name="using-azure-disk-encryption-to-encrypt-disks-used-by-your-virtual-machines"></a><span data-ttu-id="172ea-435">Utilisation de la fonctionnalité Azure Disk Encryption pour chiffrer les disques utilisés par vos machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="172ea-435">Using Azure Disk Encryption to encrypt disks used by your virtual machines</span></span>
<span data-ttu-id="172ea-436">Azure Disk Encryption est une nouvelle fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="172ea-436">Azure Disk Encryption is a new feature.</span></span> <span data-ttu-id="172ea-437">Cette fonctionnalité vous permet de chiffrer les disques de données et de système d’exploitation utilisés par une machine virtuelle IaaS.</span><span class="sxs-lookup"><span data-stu-id="172ea-437">This feature allows you to encrypt the OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="172ea-438">Sur Windows, les disques sont chiffrés à l’aide de la technologie de chiffrement BitLocker standard.</span><span class="sxs-lookup"><span data-stu-id="172ea-438">For Windows, the drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="172ea-439">Sur Linux, les disques sont chiffrés à l’aide de la technologie DM-Crypt.</span><span class="sxs-lookup"><span data-stu-id="172ea-439">For Linux, the disks are encrypted using the DM-Crypt technology.</span></span> <span data-ttu-id="172ea-440">La fonctionnalité est intégrée à Azure Key Vault pour vous permettre de contrôler et gérer les clés de chiffrement de disque.</span><span class="sxs-lookup"><span data-stu-id="172ea-440">This is integrated with Azure Key Vault to allow you to control and manage the disk encryption keys.</span></span>

<span data-ttu-id="172ea-441">La solution prend en charge les scénarios de machines virtuelles IaaS suivants lorsqu’ils sont activés dans Microsoft Azure :</span><span class="sxs-lookup"><span data-stu-id="172ea-441">The solution supports the following scenarios for IaaS VMs when they are enabled in Microsoft Azure:</span></span>

* <span data-ttu-id="172ea-442">Prise en main d’Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="172ea-442">Integration with Azure Key Vault</span></span>
* <span data-ttu-id="172ea-443">Machines virtuelles de niveau standard : [Machines virtuelles IaaS des séries A, D, DS, G, GS, etc.](https://azure.microsoft.com/pricing/details/virtual-machines/)</span><span class="sxs-lookup"><span data-stu-id="172ea-443">Standard tier VMs: [A, D, DS, G, GS, and so forth series IaaS VMs](https://azure.microsoft.com/pricing/details/virtual-machines/)</span></span>
* <span data-ttu-id="172ea-444">Activation du chiffrement sur les machines virtuelles IaaS Windows et Linux</span><span class="sxs-lookup"><span data-stu-id="172ea-444">Enabling encryption on Windows and Linux IaaS VMs</span></span>
* <span data-ttu-id="172ea-445">Désactivation du chiffrement sur les systèmes d’exploitation et les lecteurs de données pour les machines virtuelles IaaS Windows</span><span class="sxs-lookup"><span data-stu-id="172ea-445">Disabling encryption on OS and data drives for Windows IaaS VMs</span></span>
* <span data-ttu-id="172ea-446">Désactivation du chiffrement sur les lecteurs de données pour les machines virtuelles IaaS Linux</span><span class="sxs-lookup"><span data-stu-id="172ea-446">Disabling encryption on data drives for Linux IaaS VMs</span></span>
* <span data-ttu-id="172ea-447">Activation du chiffrement sur les machines virtuelles IaaS exécutant le système d’exploitation client Windows</span><span class="sxs-lookup"><span data-stu-id="172ea-447">Enabling encryption on IaaS VMs that are running Windows client OS</span></span>
* <span data-ttu-id="172ea-448">Activation du chiffrement sur les volumes avec chemins d’accès de montage</span><span class="sxs-lookup"><span data-stu-id="172ea-448">Enabling encryption on volumes with mount paths</span></span>
* <span data-ttu-id="172ea-449">Activation du chiffrement sur les machines virtuelles Linux configurées avec entrelacement de disques (RAID) à l’aide de mdadm</span><span class="sxs-lookup"><span data-stu-id="172ea-449">Enabling encryption on Linux VMs that are configured with disk striping (RAID) by using mdadm</span></span>
* <span data-ttu-id="172ea-450">Activation du chiffrement sur les machines virtuelles Linux à l’aide de LVM pour les disques de données</span><span class="sxs-lookup"><span data-stu-id="172ea-450">Enabling encryption on Linux VMs by using LVM for data disks</span></span>
* <span data-ttu-id="172ea-451">Activation du chiffrement sur les machines virtuelles Windows configurées à l’aide d’espaces de stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-451">Enabling encryption on Windows VMs that are configured by using storage spaces</span></span>
* <span data-ttu-id="172ea-452">Toutes les régions publiques Azure sont prises en charge</span><span class="sxs-lookup"><span data-stu-id="172ea-452">All Azure public regions are supported</span></span>

<span data-ttu-id="172ea-453">La solution ne prend pas en charge les scénarios, fonctionnalités et technologies suivants dans la version :</span><span class="sxs-lookup"><span data-stu-id="172ea-453">The solution does not support the following scenarios, features, and technology in the release:</span></span>

* <span data-ttu-id="172ea-454">Machines virtuelles IaaS de niveau de base</span><span class="sxs-lookup"><span data-stu-id="172ea-454">Basic tier IaaS VMs</span></span>
* <span data-ttu-id="172ea-455">Désactivation du chiffrement sur un lecteur de système d’exploitation pour les machines virtuelles IaaS Linux</span><span class="sxs-lookup"><span data-stu-id="172ea-455">Disabling encryption on an OS drive for Linux IaaS VMs</span></span>
* <span data-ttu-id="172ea-456">Machines virtuelles IaaS créées à l’aide de la méthode classique de création de machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="172ea-456">IaaS VMs that are created by using the classic VM creation method</span></span>
* <span data-ttu-id="172ea-457">Intégration à votre service de gestion de clés local</span><span class="sxs-lookup"><span data-stu-id="172ea-457">Integration with your on-premises Key Management Service</span></span>
* <span data-ttu-id="172ea-458">Le stockage de fichiers Azure (système de partage de fichiers), NFS (Network File System), les volumes dynamiques et les machines virtuelles Windows configurées avec des systèmes RAID logiciels</span><span class="sxs-lookup"><span data-stu-id="172ea-458">Azure File storage (shared file system), Network File System (NFS), dynamic volumes, and Windows VMs that are configured with software-based RAID systems</span></span>


> [!NOTE]
> <span data-ttu-id="172ea-459">Le chiffrement de disque du système d’exploitation Linux est actuellement pris en charge sur les distributions Linux suivantes : RHEL 7.2, CentOS 7.2n et Ubuntu 16.04.</span><span class="sxs-lookup"><span data-stu-id="172ea-459">Linux OS disk encryption is currently supported on the following Linux distributions: RHEL 7.2, CentOS 7.2n, and Ubuntu 16.04.</span></span>
>
>

<span data-ttu-id="172ea-460">Cette fonctionnalité garantit que toutes les données sur les disques de vos machines virtuelles sont chiffrées au repos dans Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-460">This feature ensures that all data on your virtual machine disks is encrypted at rest in Azure Storage.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-461">les ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-461">Resources</span></span>
* [<span data-ttu-id="172ea-462">Chiffrement de disque Azure pour des machines virtuelles Windows et Linux IaaS</span><span class="sxs-lookup"><span data-stu-id="172ea-462">Azure Disk Encryption for Windows and Linux IaaS VMs</span></span>](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption)

### <a name="comparison-of-azure-disk-encryption-sse-and-client-side-encryption"></a><span data-ttu-id="172ea-463">Comparaison entre Azure Disk Encryption, SSE et le chiffrement côté client</span><span class="sxs-lookup"><span data-stu-id="172ea-463">Comparison of Azure Disk Encryption, SSE, and Client-Side Encryption</span></span>
#### <a name="iaas-vms-and-their-vhd-files"></a><span data-ttu-id="172ea-464">Machines virtuelles IaaS et fichiers VHD associés</span><span class="sxs-lookup"><span data-stu-id="172ea-464">IaaS VMs and their VHD files</span></span>
<span data-ttu-id="172ea-465">Pour les disques utilisés par des machines virtuelles IaaS, nous vous recommandons d’utiliser le chiffrement Azure Disk Encryption.</span><span class="sxs-lookup"><span data-stu-id="172ea-465">For disks used by IaaS VMs, we recommend using Azure Disk Encryption.</span></span> <span data-ttu-id="172ea-466">Vous pouvez activer SSE pour chiffrer les fichiers VHD qui sont utilisés pour la sauvegarde des disques dans Azure Storage. Notez que cette fonctionnalité chiffre uniquement les nouvelles données écrites.</span><span class="sxs-lookup"><span data-stu-id="172ea-466">You can turn on SSE to encrypt the VHD files that are used to back those disks in Azure Storage, but it only encrypts newly written data.</span></span> <span data-ttu-id="172ea-467">Autrement dit, si vous créez une machine virtuelle et activez ensuite SSE sur le compte de stockage qui contient le fichier VHD, les modifications apportées sont chiffrées, mais pas le fichier VHD d’origine.</span><span class="sxs-lookup"><span data-stu-id="172ea-467">This means if you create a VM and then enable SSE on the storage account that holds the VHD file, only the changes will be encrypted, not the original VHD file.</span></span>

<span data-ttu-id="172ea-468">Si vous créez une machine virtuelle à partir d’une image issue d’Azure Marketplace, Azure effectue une [copie superficielle](https://en.wikipedia.org/wiki/Object_copying) de l’image dans votre compte de stockage dans Azure Storage, mais elle ne chiffre pas les données, même si SSE est activé.</span><span class="sxs-lookup"><span data-stu-id="172ea-468">If you create a VM using an image from the Azure Marketplace, Azure performs a [shallow copy](https://en.wikipedia.org/wiki/Object_copying) of the image to your storage account in Azure Storage, and it is not encrypted even if you have SSE enabled.</span></span> <span data-ttu-id="172ea-469">SSE commence le chiffrement des données après avoir créé la machine virtuelle et démarré la mise à jour de l’image.</span><span class="sxs-lookup"><span data-stu-id="172ea-469">After it creates the VM and starts updating the image, SSE will start encrypting the data.</span></span> <span data-ttu-id="172ea-470">Pour cette raison, il est préférable d’utiliser Azure Disk Encryption sur des machines virtuelles créées à partir d’images dans Place de marché Azure pour garantir le chiffrement de toutes les données.</span><span class="sxs-lookup"><span data-stu-id="172ea-470">For this reason, it's best to use Azure Disk Encryption on VMs created from images in the Azure Marketplace if you want them fully encrypted.</span></span>

<span data-ttu-id="172ea-471">Si vous ajoutez une machine virtuelle déjà chiffrée dans Azure à partir d’un emplacement local, vous pouvez charger les clés de chiffrement dans Azure Key Vault et continuer à utiliser le chiffrement qui était utilisé localement pour cette machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="172ea-471">If you bring a pre-encrypted VM into Azure from on-premises, you will be able to upload the encryption keys to Azure Key Vault, and continue using the encryption for that VM that you were using on-premises.</span></span> <span data-ttu-id="172ea-472">Dans ce scénario, le chiffrement Azure Disk Encryption est activé.</span><span class="sxs-lookup"><span data-stu-id="172ea-472">Azure Disk Encryption is enabled to handle this scenario.</span></span>

<span data-ttu-id="172ea-473">Si vous utilisez un fichier VHD local non chiffré, vous pouvez le charger dans la galerie comme une image personnalisée et approvisionner une machine virtuelle à partir de cette image.</span><span class="sxs-lookup"><span data-stu-id="172ea-473">If you have non-encrypted VHD from on-premises, you can upload it into the gallery as a custom image and provision a VM from it.</span></span> <span data-ttu-id="172ea-474">Si vous le faites à l’aide de modèles Resource Manager, vous pouvez demander l’activation de la fonctionnalité Azure Disk Encryption au démarrage de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="172ea-474">If you do this using the Resource Manager templates, you can ask it to turn on Azure Disk Encryption when it boots up the VM.</span></span>

<span data-ttu-id="172ea-475">Quand vous ajoutez un disque de données et le montez ensuite sur la machine virtuelle, vous pouvez activer Azure Disk Encryption sur ce disque.</span><span class="sxs-lookup"><span data-stu-id="172ea-475">When you add a data disk and mount it on the VM, you can turn on Azure Disk Encryption on that data disk.</span></span> <span data-ttu-id="172ea-476">Azure Disk Encryption chiffrera d’abord ce disque de données localement, puis la couche de gestion de service effectuera une écriture différée sur le stockage pour en chiffrer le contenu.</span><span class="sxs-lookup"><span data-stu-id="172ea-476">It will encrypt that data disk locally first, and then the service management layer will do a lazy write against storage so the storage content is encrypted.</span></span>

#### <a name="client-side-encryption"></a><span data-ttu-id="172ea-477">chiffrement côté client</span><span class="sxs-lookup"><span data-stu-id="172ea-477">Client-side encryption</span></span>
<span data-ttu-id="172ea-478">Le chiffrement côté client est la méthode la plus sûre pour chiffrer vos données, car il chiffre les données avant leur transit et il chiffre les données au repos.</span><span class="sxs-lookup"><span data-stu-id="172ea-478">Client-side encryption is the most secure method of encrypting your data, because it encrypts it before transit, and encrypts the data at rest.</span></span> <span data-ttu-id="172ea-479">Toutefois, cette méthode vous oblige à ajouter du code dans vos applications qui utilisent le stockage, ce qui peut ne pas vous convenir.</span><span class="sxs-lookup"><span data-stu-id="172ea-479">However, it does require that you add code to your applications using storage, which you may not want to do.</span></span> <span data-ttu-id="172ea-480">Dans ce cas, vous pouvez utiliser le protocole HTTPS pour vos données en transit, et SSE pour chiffrer les données au repos.</span><span class="sxs-lookup"><span data-stu-id="172ea-480">In those cases, you can use HTTPs for your data in transit, and SSE to encrypt the data at rest.</span></span>

<span data-ttu-id="172ea-481">Le chiffrement côté client vous permet de chiffrer des entités de table, des messages de file d’attente et des objets blob.</span><span class="sxs-lookup"><span data-stu-id="172ea-481">With client-side encryption, you can encrypt table entities, queue messages, and blobs.</span></span> <span data-ttu-id="172ea-482">Avec SSE, vous ne pouvez chiffrer que des objets blob.</span><span class="sxs-lookup"><span data-stu-id="172ea-482">With SSE, you can only encrypt blobs.</span></span> <span data-ttu-id="172ea-483">Si vous devez chiffrer des données de table et de file d’attente, utilisez le chiffrement côté client.</span><span class="sxs-lookup"><span data-stu-id="172ea-483">If you need table and queue data to be encrypted, you should use client-side encryption.</span></span>

<span data-ttu-id="172ea-484">Le chiffrement côté client est entièrement géré par l’application.</span><span class="sxs-lookup"><span data-stu-id="172ea-484">Client-side encryption is managed entirely by the application.</span></span> <span data-ttu-id="172ea-485">C’est l’approche la plus sûre, mais elle vous oblige à effectuer des modifications par programmation dans votre application et à mettre en place des processus de gestion des clés.</span><span class="sxs-lookup"><span data-stu-id="172ea-485">This is the most secure approach, but does require you to make programmatic changes to your application and put key management processes in place.</span></span> <span data-ttu-id="172ea-486">Choisissez cette méthode pour bénéficier d’une sécurité maximale pendant le transit des données et si vous souhaitez que vos données stockées soient chiffrées.</span><span class="sxs-lookup"><span data-stu-id="172ea-486">You would use this when you want the extra security during transit, and you want your stored data to be encrypted.</span></span>

<span data-ttu-id="172ea-487">Le chiffrement côté client entraîne une plus grande charge pour le client. Vous devez donc tenir compte de ce paramètre dans vos plans d’extensibilité, en particulier si vous chiffrez et transférez une grande quantité de données.</span><span class="sxs-lookup"><span data-stu-id="172ea-487">Client-side encryption is more load on the client, and you have to account for this in your scalability plans, especially if you are encrypting and transferring a lot of data.</span></span>

#### <a name="storage-service-encryption-sse"></a><span data-ttu-id="172ea-488">Storage Service Encryption (SSE)</span><span class="sxs-lookup"><span data-stu-id="172ea-488">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="172ea-489">SSE est géré par le Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="172ea-489">SSE is managed by Azure Storage.</span></span> <span data-ttu-id="172ea-490">SSE ne sécurise pas les données en transit, mais chiffre les données quand elles sont écrites dans Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-490">Using SSE does not provide for the security of the data in transit, but it does encrypt the data as it is written to Azure Storage.</span></span> <span data-ttu-id="172ea-491">L’utilisation de cette fonctionnalité n’a pas d’impact sur les performances.</span><span class="sxs-lookup"><span data-stu-id="172ea-491">There is no impact on the performance when using this feature.</span></span>

<span data-ttu-id="172ea-492">Avec SSE, vous pouvez uniquement chiffrer des objets blob de blocs, des objets blob d’ajout et des objets blob de pages.</span><span class="sxs-lookup"><span data-stu-id="172ea-492">You can only encrypt block blobs, append blobs, and page blobs using SSE.</span></span> <span data-ttu-id="172ea-493">Si vous devez chiffrer des données de table ou de file d’attente, utilisez plutôt le chiffrement côté client.</span><span class="sxs-lookup"><span data-stu-id="172ea-493">If you need to encrypt table data or queue data, you should consider using client-side encryption.</span></span>

<span data-ttu-id="172ea-494">Si vous utilisez une archive ou une bibliothèque de fichiers VHD comme base pour créer des machines virtuelles, créez un compte de stockage, activez le chiffrement SSE, puis chargez les fichiers VHD dans le nouveau compte.</span><span class="sxs-lookup"><span data-stu-id="172ea-494">If you have an archive or library of VHD files that you use as a basis for creating new virtual machines, you can create a new storage account, enable SSE, and then upload the VHD files to that account.</span></span> <span data-ttu-id="172ea-495">Ces fichiers VHD seront chiffrés par Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-495">Those VHD files will be encrypted by Azure Storage.</span></span>

<span data-ttu-id="172ea-496">Si Azure Disk Encryption est activé pour les disques dans une machine virtuelle et que SSE est activé sur le compte de stockage contenant les fichiers VHD, tout fonctionne correctement. Toutes les données qui viennent d’être écrites sont alors chiffrées deux fois.</span><span class="sxs-lookup"><span data-stu-id="172ea-496">If you have Azure Disk Encryption enabled for the disks in a VM and SSE enabled on the storage account holding the VHD files, it will work fine; it will result in any newly-written data being encrypted twice.</span></span>

## <a name="storage-analytics"></a><span data-ttu-id="172ea-497">Storage Analytics</span><span class="sxs-lookup"><span data-stu-id="172ea-497">Storage Analytics</span></span>
### <a name="using-storage-analytics-to-monitor-authorization-type"></a><span data-ttu-id="172ea-498">Utilisation de Storage Analytics pour surveiller le type d’autorisation</span><span class="sxs-lookup"><span data-stu-id="172ea-498">Using Storage Analytics to monitor authorization type</span></span>
<span data-ttu-id="172ea-499">Pour chaque compte de stockage, vous pouvez activer Azure Storage Analytics pour effectuer la journalisation et stocker les données de métriques.</span><span class="sxs-lookup"><span data-stu-id="172ea-499">For each storage account, you can enable Azure Storage Analytics to perform logging and store metrics data.</span></span> <span data-ttu-id="172ea-500">Il s’agit d’un excellent outil à utiliser quand vous voulez vérifier les métriques de performances d’un compte de stockage, ou que vous devez résoudre des problèmes liés à un compte de stockage car vos performances ne sont pas satisfaisantes.</span><span class="sxs-lookup"><span data-stu-id="172ea-500">This is a great tool to use when you want to check the performance metrics of a storage account, or need to troubleshoot a storage account because you are having performance problems.</span></span>

<span data-ttu-id="172ea-501">Les journaux d’analyse du stockage vous permettent de voir un autre élément de données : la méthode d’authentification utilisée par un utilisateur lors de l’accès au stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-501">Another piece of data you can see in the storage analytics logs is the authentication method used by someone when they access storage.</span></span> <span data-ttu-id="172ea-502">Par exemple, avec Blob Storage, vous pouvez voir s’il a utilisé une signature d’accès partagé ou les clés de compte de stockage, ou si l’objet blob qui a fait l’objet d’un accès est public.</span><span class="sxs-lookup"><span data-stu-id="172ea-502">For example, with Blob Storage, you can see if they used a Shared Access Signature or the storage account keys, or if the blob accessed was public.</span></span>

<span data-ttu-id="172ea-503">Cela peut être très utile si vous surveillez étroitement l’accès au stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-503">This can be really helpful if you are tightly guarding access to storage.</span></span> <span data-ttu-id="172ea-504">Par exemple, dans Blob Storage, vous pouvez définir tous les conteneurs comme privés et implémenter l’utilisation d’un service SAP dans toutes vos applications.</span><span class="sxs-lookup"><span data-stu-id="172ea-504">For example, in Blob Storage you can set all of the containers to private and implement the use of an SAS service throughout your applications.</span></span> <span data-ttu-id="172ea-505">Vous pouvez alors vérifier régulièrement les journaux pour voir si vos objets blob font l’objet d’un accès à l’aide de clés de compte de stockage, ce qui peut indiquer une violation de la sécurité, ou si les objets blob sont publics alors qu’ils ne devraient pas l’être.</span><span class="sxs-lookup"><span data-stu-id="172ea-505">Then you can check the logs regularly to see if your blobs are accessed using the storage account keys, which may indicate a breach of security, or if the blobs are public but they shouldn't be.</span></span>

#### <a name="what-do-the-logs-look-like"></a><span data-ttu-id="172ea-506">Comment se présentent les journaux ?</span><span class="sxs-lookup"><span data-stu-id="172ea-506">What do the logs look like?</span></span>
<span data-ttu-id="172ea-507">Une fois que vous avez activé les métriques de compte de stockage et la journalisation par le biais du Portail Azure, les données d’analyse commencent à s’accumuler rapidement.</span><span class="sxs-lookup"><span data-stu-id="172ea-507">After you enable the storage account metrics and logging through the Azure portal, analytics data will start to accumulate quickly.</span></span> <span data-ttu-id="172ea-508">La journalisation et les métriques de chaque service sont distinctes : la journalisation est écrite uniquement en cas d’activité dans ce compte de stockage, tandis que les métriques sont consignées chaque minute, chaque heure ou chaque jour, en fonction de leur configuration.</span><span class="sxs-lookup"><span data-stu-id="172ea-508">The logging and metrics for each service is separate; the logging is only written when there is activity in that storage account, while the metrics will be logged every minute, every hour, or every day, depending on how you configure it.</span></span>

<span data-ttu-id="172ea-509">Les journaux sont stockés dans des objets blob de blocs se trouvant dans un conteneur nommé $logs dans le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-509">The logs are stored in block blobs in a container named $logs in the storage account.</span></span> <span data-ttu-id="172ea-510">Ce conteneur est automatiquement créé quand Storage Analytics est activé.</span><span class="sxs-lookup"><span data-stu-id="172ea-510">This container is automatically created when Storage Analytics is enabled.</span></span> <span data-ttu-id="172ea-511">Une fois ce conteneur créé, vous ne pouvez pas le supprimer, même si vous pouvez en supprimer le contenu.</span><span class="sxs-lookup"><span data-stu-id="172ea-511">Once this container is created, you can't delete it, although you can delete its contents.</span></span>

<span data-ttu-id="172ea-512">Sous le conteneur $logs se trouve un dossier correspondant à chaque service, puis des sous-dossiers pour l’année/le mois/le jour/l’heure.</span><span class="sxs-lookup"><span data-stu-id="172ea-512">Under the $logs container, there is a folder for each service, and then there are subfolders for the year/month/day/hour.</span></span> <span data-ttu-id="172ea-513">Sous les heures, les journaux sont simplement numérotés.</span><span class="sxs-lookup"><span data-stu-id="172ea-513">Under hour, the logs are simply numbered.</span></span> <span data-ttu-id="172ea-514">La structure des répertoires se présente ainsi :</span><span class="sxs-lookup"><span data-stu-id="172ea-514">This is what the directory structure will look like:</span></span>

![Affichage des fichiers journaux](./media/storage-security-guide/image1.png)

<span data-ttu-id="172ea-516">Chaque requête à Azure Storage est consignée.</span><span class="sxs-lookup"><span data-stu-id="172ea-516">Every request to Azure Storage is logged.</span></span> <span data-ttu-id="172ea-517">Voici un instantané d’un fichier journal montrant les premiers champs.</span><span class="sxs-lookup"><span data-stu-id="172ea-517">Here's a snapshot of a log file, showing the first few fields.</span></span>

![Instantané d’un fichier journal](./media/storage-security-guide/image2.png)

<span data-ttu-id="172ea-519">Vous voyez que vous pouvez utiliser les journaux pour suivre des appels de tous types à un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-519">You can see that you can use the logs to track any kind of calls to a storage account.</span></span>

#### <a name="what-are-all-of-those-fields-for"></a><span data-ttu-id="172ea-520">À quoi servent tous ces champs ?</span><span class="sxs-lookup"><span data-stu-id="172ea-520">What are all of those fields for?</span></span>
<span data-ttu-id="172ea-521">Un article répertorié dans les ressources ci-dessous fournit la liste des nombreux champs présents dans les journaux et indique ce pour quoi ils sont utilisés.</span><span class="sxs-lookup"><span data-stu-id="172ea-521">There is an article listed in the resources below that provides the list of the many fields in the logs and what they are used for.</span></span> <span data-ttu-id="172ea-522">Voici la liste de ces champs, dans l’ordre :</span><span class="sxs-lookup"><span data-stu-id="172ea-522">Here is the list of fields in order:</span></span>

![Instantané des champs d’un fichier journal](./media/storage-security-guide/image3.png)

<span data-ttu-id="172ea-524">Nous nous intéressons aux entrées pour GetBlob, et comment elles sont authentifiées. Nous devons donc rechercher les entrées avec operation-type « Get-Blob » et vérifier l’état de la requête (4<sup>e</sup> colonne) et le type d’autorisation (8<sup>e</sup> colonne).</span><span class="sxs-lookup"><span data-stu-id="172ea-524">We're interested in the entries for GetBlob, and how they are authenticated, so we need to look for entries with operation-type "Get-Blob", and check the request-status (4<sup>th</sup> column) and the authorization-type (8<sup>th</sup> column).</span></span>

<span data-ttu-id="172ea-525">Par exemple, dans les premières lignes de la liste ci-dessus, l’état de la requête est « Success » et le type d’autorisation est « authenticated ».</span><span class="sxs-lookup"><span data-stu-id="172ea-525">For example, in the first few rows in the listing above, the request-status is "Success" and the authorization-type is "authenticated".</span></span> <span data-ttu-id="172ea-526">Cela signifie que la requête a été validée à l’aide de la clé du compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-526">This means the request was validated using the storage account key.</span></span>

#### <a name="how-are-my-blobs-being-authenticated"></a><span data-ttu-id="172ea-527">Comment mes objets blob sont-ils authentifiés ?</span><span class="sxs-lookup"><span data-stu-id="172ea-527">How are my blobs being authenticated?</span></span>
<span data-ttu-id="172ea-528">Trois cas nous intéressent.</span><span class="sxs-lookup"><span data-stu-id="172ea-528">We have three cases that we are interested in.</span></span>

1. <span data-ttu-id="172ea-529">L’objet blob est public et les utilisateurs y accèdent à l’aide d’une URL sans signature d’accès partagé.</span><span class="sxs-lookup"><span data-stu-id="172ea-529">The blob is public and it is accessed using a URL without a Shared Access Signature.</span></span> <span data-ttu-id="172ea-530">Dans ce cas, l’état de la requête est « AnonymousSuccess » et authorization-type est « anonymous ».</span><span class="sxs-lookup"><span data-stu-id="172ea-530">In this case, the request-status is "AnonymousSuccess" and the authorization-type is "anonymous".</span></span>

   <span data-ttu-id="172ea-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span><span class="sxs-lookup"><span data-stu-id="172ea-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span></span>
2. <span data-ttu-id="172ea-532">L’objet blob est privé et a été utilisé avec une signature d’accès partagé.</span><span class="sxs-lookup"><span data-stu-id="172ea-532">The blob is private and was used with a Shared Access Signature.</span></span> <span data-ttu-id="172ea-533">Dans ce cas, l’état de la requête est « SASSuccess » et authorization-type est « sas ».</span><span class="sxs-lookup"><span data-stu-id="172ea-533">In this case, the request-status is "SASSuccess" and the authorization-type is "sas".</span></span>

   <span data-ttu-id="172ea-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span><span class="sxs-lookup"><span data-stu-id="172ea-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span></span>
3. <span data-ttu-id="172ea-535">L’objet blob est privé et la clé de stockage a été utilisée pour y accéder.</span><span class="sxs-lookup"><span data-stu-id="172ea-535">The blob is private and the storage key was used to access it.</span></span> <span data-ttu-id="172ea-536">Dans ce cas, l’état de la requête est « **Success** » et authorization-type est « **authenticated** ».</span><span class="sxs-lookup"><span data-stu-id="172ea-536">In this case, the request-status is "**Success**" and the authorization-type is "**authenticated**".</span></span>

   <span data-ttu-id="172ea-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span><span class="sxs-lookup"><span data-stu-id="172ea-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span></span>

<span data-ttu-id="172ea-538">Vous pouvez utiliser Microsoft Message Analyzer pour afficher et analyser ces journaux.</span><span class="sxs-lookup"><span data-stu-id="172ea-538">You can use the Microsoft Message Analyzer to view and analyze these logs.</span></span> <span data-ttu-id="172ea-539">Il inclue des fonctions de recherche et de filtre.</span><span class="sxs-lookup"><span data-stu-id="172ea-539">It includes search and filter capabilities.</span></span> <span data-ttu-id="172ea-540">Par exemple, vous voulez peut-être rechercher les instances de GetBlob pour voir si l’utilisation répond à vos attentes, par exemple, pour vérifier que personne n’accède à votre compte de stockage de façon inappropriée.</span><span class="sxs-lookup"><span data-stu-id="172ea-540">For example, you might want to search for instances of GetBlob to see if the usage is what you expect, i.e. to make sure someone is not accessing your storage account inappropriately.</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-541">Ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-541">Resources</span></span>
* [<span data-ttu-id="172ea-542">Analyse du stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-542">Storage Analytics</span></span>](../storage-analytics.md)

  <span data-ttu-id="172ea-543">Cet article est une vue d’ensemble de l’analyse du stockage et de la façon de l’activer.</span><span class="sxs-lookup"><span data-stu-id="172ea-543">This article is an overview of storage analytics and how to enable them.</span></span>
* [<span data-ttu-id="172ea-544">Format du journal de l’analyse de stockage</span><span class="sxs-lookup"><span data-stu-id="172ea-544">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/azure/hh343259.aspx)

  <span data-ttu-id="172ea-545">Cet article illustre le format du journal de l’analyse de stockage et présente les champs disponibles, notamment authentication-type, qui indique le type d’authentification utilisé pour la requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-545">This article illustrates the Storage Analytics Log Format, and details the fields available therein, including authentication-type, which indicates the type of authentication used for the request.</span></span>
* [<span data-ttu-id="172ea-546">Surveiller un compte de stockage dans le portail Azure</span><span class="sxs-lookup"><span data-stu-id="172ea-546">Monitor a Storage Account in the Azure portal</span></span>](../storage-monitor-storage-account.md)

  <span data-ttu-id="172ea-547">Cet article explique comment configurer la surveillance des métriques et la journalisation pour un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-547">This article shows how to configure monitoring of metrics and logging for a storage account.</span></span>
* [<span data-ttu-id="172ea-548">Résolution des problèmes de bout en bout avec les métriques et la journalisation Azure, AzCopy et Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="172ea-548">End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer</span></span>](../storage-e2e-troubleshooting.md)

  <span data-ttu-id="172ea-549">Cet article traite du dépannage à l’aide de l’analyse du stockage et montre comment utiliser Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="172ea-549">This article talks about troubleshooting using the Storage Analytics and shows how to use the Microsoft Message Analyzer.</span></span>
* [<span data-ttu-id="172ea-550">Microsoft Message Analyzer Operating Guide (Guide des opérations Microsoft Message Analyzer)</span><span class="sxs-lookup"><span data-stu-id="172ea-550">Microsoft Message Analyzer Operating Guide</span></span>](https://technet.microsoft.com/library/jj649776.aspx)

  <span data-ttu-id="172ea-551">Cet article de référence porte sur Microsoft Message Analyzer et inclut des liens vers un didacticiel, un démarrage rapide et un résumé des fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="172ea-551">This article is the reference for the Microsoft Message Analyzer and includes links to a tutorial, quick start, and feature summary.</span></span>

## <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="172ea-552">Partage des ressources cross-origin (CORS)</span><span class="sxs-lookup"><span data-stu-id="172ea-552">Cross-Origin Resource Sharing (CORS)</span></span>
### <a name="cross-domain-access-of-resources"></a><span data-ttu-id="172ea-553">Accès interdomaines des ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-553">Cross-domain access of resources</span></span>
<span data-ttu-id="172ea-554">Quand un navigateur web s’exécutant dans un domaine effectue une requête HTTP pour une ressource à partir d’un autre domaine, on parle de requête HTTP cross-origin.</span><span class="sxs-lookup"><span data-stu-id="172ea-554">When a web browser running in one domain makes an HTTP request for a resource from a different domain, this is called a cross-origin HTTP request.</span></span> <span data-ttu-id="172ea-555">Par exemple, une page HTML traitée à partir de contoso.com effectue une requête pour une image jpeg hébergée sur fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="172ea-555">For example, an HTML page served from contoso.com makes a request for a jpeg hosted on fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="172ea-556">Pour des raisons de sécurité, les navigateurs limitent les requêtes HTTP cross-origin lancées à partir de scripts, comme JavaScript.</span><span class="sxs-lookup"><span data-stu-id="172ea-556">For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts, such as JavaScript.</span></span> <span data-ttu-id="172ea-557">Ainsi, quand du code JavaScript sur une page web contoso.com demande cet élément jpeg sur fabrikam.blob.core.windows.net, le navigateur n’autorise pas la requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-557">This means that when some JavaScript code on a web page on contoso.com requests that jpeg on fabrikam.blob.core.windows.net, the browser will not allow the request.</span></span>

<span data-ttu-id="172ea-558">Quel est le rapport avec Azure Storage ?</span><span class="sxs-lookup"><span data-stu-id="172ea-558">What does this have to do with Azure Storage?</span></span> <span data-ttu-id="172ea-559">En fait, si vous stockez des ressources statiques telles que les fichiers de données JSON ou XML dans Blob Storage à l’aide d’un compte de stockage nommé Fabrikam, le domaine des ressources est fabrikam.blob.core.windows.net et l’application web contoso.com ne peut pas y accéder à l’aide de JavaScript, car les domaines sont différents.</span><span class="sxs-lookup"><span data-stu-id="172ea-559">Well, if you are storing static assets such as JSON or XML data files in Blob Storage using a storage account called Fabrikam, the domain for the assets will be fabrikam.blob.core.windows.net, and the contoso.com web application will not be able to access them using JavaScript because the domains are different.</span></span> <span data-ttu-id="172ea-560">Il est en de même si vous essayez d’appeler l’un des services de stockage Azure, tels que Stockage Table, qui retournent les données JSON qui doivent être traitées par le client JavaScript.</span><span class="sxs-lookup"><span data-stu-id="172ea-560">This is also true if you're trying to call one of the Azure Storage Services – such as Table Storage – that return JSON data to be processed by the JavaScript client.</span></span>

#### <a name="possible-solutions"></a><span data-ttu-id="172ea-561">Solutions possibles</span><span class="sxs-lookup"><span data-stu-id="172ea-561">Possible solutions</span></span>
<span data-ttu-id="172ea-562">Une façon de résoudre ce problème consiste à attribuer un domaine personnalisé comme « storage.contoso.com » à fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="172ea-562">One way to resolve this is to assign a custom domain like "storage.contoso.com" to fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="172ea-563">Le souci est que vous pouvez attribuer ce domaine personnalisé uniquement à un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-563">The problem is that you can only assign that custom domain to one storage account.</span></span> <span data-ttu-id="172ea-564">Que se passe-t-il si les ressources sont stockées dans plusieurs comptes de stockage ?</span><span class="sxs-lookup"><span data-stu-id="172ea-564">What if the assets are stored in multiple storage accounts?</span></span>

<span data-ttu-id="172ea-565">Une autre façon de résoudre ce problème consiste à faire en sorte que l’application web joue le rôle de proxy pour les appels de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-565">Another way to resolve this is to have the web application act as a proxy for the storage calls.</span></span> <span data-ttu-id="172ea-566">Cela signifie que si vous chargez un fichier sur Blob Storage, soit l’application web l’écrit localement puis le copie dans Blob Storage, soit elle le lit en intégralité en mémoire puis l’écrit dans Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-566">This means if you are uploading a file to Blob Storage, the web application would either write it locally and then copy it to Blob Storage, or it would read all of it into memory and then write it to Blob Storage.</span></span> <span data-ttu-id="172ea-567">Vous pouvez également écrire une application web dédiée (par exemple, une API web) qui charge les fichiers localement et les écrit dans Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-567">Alternately, you could write a dedicated web application (such as a Web API) that uploads the files locally and writes them to Blob Storage.</span></span> <span data-ttu-id="172ea-568">Dans les deux cas, vous devez prendre en compte cette fonction pour déterminer les besoins en termes d’extensibilité.</span><span class="sxs-lookup"><span data-stu-id="172ea-568">Either way, you have to account for that function when determining the scalability needs.</span></span>

#### <a name="how-can-cors-help"></a><span data-ttu-id="172ea-569">En quoi CORS peut constituer une aide ?</span><span class="sxs-lookup"><span data-stu-id="172ea-569">How can CORS help?</span></span>
<span data-ttu-id="172ea-570">Azure Storage vous permet d’activer le Partage des ressources cross-origin (CORS, Cross Origin Resource Sharing).</span><span class="sxs-lookup"><span data-stu-id="172ea-570">Azure Storage allows you to enable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="172ea-571">Pour chaque compte de stockage, vous pouvez spécifier les domaines qui peuvent accéder aux ressources de ce compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-571">For each storage account, you can specify domains that can access the resources in that storage account.</span></span> <span data-ttu-id="172ea-572">Par exemple, dans le cas indiqué ci-dessus, nous pouvons activer CORS sur le compte de stockage fabrikam.blob.core.windows.net et le configurer pour autoriser l’accès à contoso.com. L’application web contoso.com peut alors accéder directement aux ressources dans fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="172ea-572">For example, in our case outlined above, we can enable CORS on the fabrikam.blob.core.windows.net storage account and configure it to allow access to contoso.com. Then the web application contoso.com can directly access the resources in fabrikam.blob.core.windows.net.</span></span>

<span data-ttu-id="172ea-573">Concernant CORS, il convient de noter qu’il autorise l’accès, mais qu’il ne fournit pas d’authentification, ce qui est nécessaire pour l’accès non public aux ressources de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-573">One thing to note is that CORS allows access, but it does not provide authentication, which is required for all non-public access of storage resources.</span></span> <span data-ttu-id="172ea-574">Cela signifie que vous pouvez accéder uniquement aux objets blob s’ils sont publics ou que vous devez inclure une signature d’accès partagé vous donnant l’autorisation appropriée.</span><span class="sxs-lookup"><span data-stu-id="172ea-574">This means you can only access blobs if they are public or you include a Shared Access Signature giving you the appropriate permission.</span></span> <span data-ttu-id="172ea-575">Les tables, les files d’attente et les fichiers n’ont pas d’accès public et requièrent une SAP.</span><span class="sxs-lookup"><span data-stu-id="172ea-575">Tables, queues, and files have no public access, and require a SAS.</span></span>

<span data-ttu-id="172ea-576">Par défaut, CORS est désactivé sur tous les services.</span><span class="sxs-lookup"><span data-stu-id="172ea-576">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="172ea-577">Vous pouvez activer CORS à l’aide de l’API REST ou de la bibliothèque cliente de stockage afin d’appeler l’une des méthodes pour définir les stratégies de service.</span><span class="sxs-lookup"><span data-stu-id="172ea-577">You can enable CORS by using the REST API or the storage client library to call one of the methods to set the service policies.</span></span> <span data-ttu-id="172ea-578">Quand vous procédez ainsi, vous incluez une règle CORS, qui est au format XML.</span><span class="sxs-lookup"><span data-stu-id="172ea-578">When you do that, you include a CORS rule, which is in XML.</span></span> <span data-ttu-id="172ea-579">Voici un exemple d’une règle CORS qui a été définie à l’aide de l’opération Set Service Properties pour le service Blob pour un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-579">Here's an example of a CORS rule that has been set using the Set Service Properties operation for the Blob Service for a storage account.</span></span> <span data-ttu-id="172ea-580">Vous pouvez effectuer cette opération à l’aide de la bibliothèque cliente de stockage ou des API REST pour Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-580">You can perform that operation using the storage client library or the REST APIs for Azure Storage.</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="172ea-581">Voici ce que signifie chaque ligne :</span><span class="sxs-lookup"><span data-stu-id="172ea-581">Here's what each row means:</span></span>

* <span data-ttu-id="172ea-582">**AllowedOrigins** Cette ligne indique quels domaines sans correspondance peuvent demander et recevoir des données du service de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-582">**AllowedOrigins** This tells which non-matching domains can request and receive data from the storage service.</span></span> <span data-ttu-id="172ea-583">Cela indique que contoso.com et fabrikam.com peuvent demander des données à partir de Blob Storage pour un compte de stockage spécifique.</span><span class="sxs-lookup"><span data-stu-id="172ea-583">This says that both contoso.com and fabrikam.com can request data from Blob Storage for a specific storage account.</span></span> <span data-ttu-id="172ea-584">Vous pouvez également définir ici un caractère générique (\*) pour autoriser tous les domaines à effectuer des demandes d’accès.</span><span class="sxs-lookup"><span data-stu-id="172ea-584">You can also set this to a wildcard (\*) to allow all domains to access requests.</span></span>
* <span data-ttu-id="172ea-585">**AllowedMethods** Cette ligne répertorie les méthodes (verbes de requête HTTP) qui peuvent être utilisées lors de la requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-585">**AllowedMethods** This is the list of methods (HTTP request verbs) that can be used when making the request.</span></span> <span data-ttu-id="172ea-586">Dans cet exemple, seuls PUT et GET sont autorisés.</span><span class="sxs-lookup"><span data-stu-id="172ea-586">In this example, only PUT and GET are allowed.</span></span> <span data-ttu-id="172ea-587">Vous pouvez définir ici un caractère générique (\*) pour autoriser l’utilisation de toutes les méthodes.</span><span class="sxs-lookup"><span data-stu-id="172ea-587">You can set this to a wildcard (\*) to allow all methods to be used.</span></span>
* <span data-ttu-id="172ea-588">**AllowedHeaders** Cette ligne représente les en-têtes de requête que le domaine d’origine peut spécifier lors de la requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-588">**AllowedHeaders** This is the request headers that the origin domain can specify when making the request.</span></span> <span data-ttu-id="172ea-589">Dans cet exemple, tous les en-têtes de métadonnées commençant par x-ms-meta-data, x-ms-meta-target et x-ms-meta-abc sont autorisés.</span><span class="sxs-lookup"><span data-stu-id="172ea-589">In this example, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="172ea-590">Le caractère générique (\*) indique que tout en-tête commençant par le préfixe spécifié est autorisé.</span><span class="sxs-lookup"><span data-stu-id="172ea-590">The wildcard character (\*) indicates that any header beginning with the specified prefix is allowed.</span></span>
* <span data-ttu-id="172ea-591">**ExposedHeaders** Cette ligne indique quels en-têtes de réponse doivent être exposés par le navigateur à l’émetteur de la requête.</span><span class="sxs-lookup"><span data-stu-id="172ea-591">**ExposedHeaders** This tells which response headers should be exposed by the browser to the request issuer.</span></span> <span data-ttu-id="172ea-592">Dans cet exemple, tout en-tête commençant par « x-ms - meta-» est exposé.</span><span class="sxs-lookup"><span data-stu-id="172ea-592">In this example, any header starting with "x-ms-meta-" will be exposed.</span></span>
* <span data-ttu-id="172ea-593">**MaxAgeInSeconds** Cette ligne indique la durée maximale pendant laquelle un navigateur met en cache la requête OPTIONS préliminaire.</span><span class="sxs-lookup"><span data-stu-id="172ea-593">**MaxAgeInSeconds** This is the maximum amount of time that a browser will cache the preflight OPTIONS request.</span></span> <span data-ttu-id="172ea-594">(Pour plus d’informations sur la requête préliminaire, consultez le premier article ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="172ea-594">(For more information about the preflight request, check the first article below.)</span></span>

#### <a name="resources"></a><span data-ttu-id="172ea-595">Ressources</span><span class="sxs-lookup"><span data-stu-id="172ea-595">Resources</span></span>
<span data-ttu-id="172ea-596">Pour plus d’informations sur CORS et sur la façon de l’activer, consultez les ressources suivantes.</span><span class="sxs-lookup"><span data-stu-id="172ea-596">For more information about CORS and how to enable it, please check out these resources.</span></span>

* [<span data-ttu-id="172ea-597">Prise en charge du service Partage des ressources cross-origine (CORS) pour les services Azure Storage sur Azure.com</span><span class="sxs-lookup"><span data-stu-id="172ea-597">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services on Azure.com</span></span>](../storage-cors-support.md)

  <span data-ttu-id="172ea-598">Cet article fournit une vue d’ensemble de CORS et de la façon de définir les règles pour les différents services de stockage.</span><span class="sxs-lookup"><span data-stu-id="172ea-598">This article provides an overview of CORS and how to set the rules for the different storage services.</span></span>
* [<span data-ttu-id="172ea-599">Prise en charge du service Partage des ressources cross-origine (CORS) pour les services Azure Storage sur MSDN</span><span class="sxs-lookup"><span data-stu-id="172ea-599">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services on MSDN</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx)

  <span data-ttu-id="172ea-600">Il s’agit de la documentation de référence pour la prise en charge de CORS pour les services Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="172ea-600">This is the reference documentation for CORS support for the Azure Storage Services.</span></span> <span data-ttu-id="172ea-601">Elle propose des liens vers des articles concernant chaque service de stockage, et propose un exemple et une description de chaque élément du fichier CORS.</span><span class="sxs-lookup"><span data-stu-id="172ea-601">This has links to articles applying to each storage service, and shows an example and explains each element in the CORS file.</span></span>
* [<span data-ttu-id="172ea-602">Microsoft Azure Storage: Introducing CORS (Microsoft Azure Storage : Présentation de CORS)</span><span class="sxs-lookup"><span data-stu-id="172ea-602">Microsoft Azure Storage: Introducing CORS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/02/03/windows-azure-storage-introducing-cors.aspx)

  <span data-ttu-id="172ea-603">Il s’agit d’un lien vers l’article de blog initial qui présente CORS et montre comment l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="172ea-603">This is a link to the initial blog article announcing CORS and showing how to use it.</span></span>

## <a name="frequently-asked-questions-about-azure-storage-security"></a><span data-ttu-id="172ea-604">Questions fréquemment posées (FAQ) sur la sécurité Azure Storage</span><span class="sxs-lookup"><span data-stu-id="172ea-604">Frequently asked questions about Azure Storage security</span></span>
1. <span data-ttu-id="172ea-605">**Comment puis-je vérifier l’intégrité des objets blob que je transfère vers ou à partir du stockage Azure si je ne peux pas utiliser le protocole HTTPS ?**</span><span class="sxs-lookup"><span data-stu-id="172ea-605">**How can I verify the integrity of the blobs I'm transferring into or out of Azure Storage if I can't use the HTTPS protocol?**</span></span>

   <span data-ttu-id="172ea-606">Si, pour une raison quelconque, vous devez utiliser le protocole HTTP au lieu de HTTPS et que vous travaillez avec des objets blob de blocs, vous pouvez utiliser la vérification MD5 pour vérifier l’intégrité des objets blob transférés.</span><span class="sxs-lookup"><span data-stu-id="172ea-606">If for any reason you need to use HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking to help verify the integrity of the blobs being transferred.</span></span> <span data-ttu-id="172ea-607">Ceci contribuera à la protection contre les erreurs au niveau du réseau/transport, mais pas nécessairement contre les attaques intermédiaires.</span><span class="sxs-lookup"><span data-stu-id="172ea-607">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span>

   <span data-ttu-id="172ea-608">Si vous pouvez utiliser le protocole HTTPS, qui fournit une sécurité au niveau du transport, alors l’utilisation de la vérification MD5 est redondant et inutile.</span><span class="sxs-lookup"><span data-stu-id="172ea-608">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span>

   <span data-ttu-id="172ea-609">Pour plus d’informations, consultez [Présentation d’Azure Blob MD5](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span><span class="sxs-lookup"><span data-stu-id="172ea-609">For more information, please check out the [Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span>
2. <span data-ttu-id="172ea-610">**Qu’en est-il de la conformité aux normes FIPS pour l’État fédéral américain ?**</span><span class="sxs-lookup"><span data-stu-id="172ea-610">**What about FIPS-Compliance for the U.S. Government?**</span></span>

   <span data-ttu-id="172ea-611">Les normes FIPS (Federal Information Processing Standard) des États-Unis définissent les algorithmes de chiffrement qui sont approuvés pour une utilisation sur les systèmes informatiques de l’État fédéral américain dans le but de protéger les données sensibles.</span><span class="sxs-lookup"><span data-stu-id="172ea-611">The United States Federal Information Processing Standard (FIPS) defines cryptographic algorithms approved for use by U.S. Federal government computer systems for the protection of sensitive data.</span></span> <span data-ttu-id="172ea-612">L’activation du mode FIPS sur un serveur ou un bureau Windows indique au système d’exploitation que seuls les algorithmes de chiffrement conformes aux normes FIPS doivent être utilisés.</span><span class="sxs-lookup"><span data-stu-id="172ea-612">Enabling FIPS mode on a Windows server or desktop tells the OS that only FIPS-validated cryptographic algorithms should be used.</span></span> <span data-ttu-id="172ea-613">Si une application utilise des algorithmes non conformes, les applications s’arrêtent.</span><span class="sxs-lookup"><span data-stu-id="172ea-613">If an application uses non-compliant algorithms, the applications will break.</span></span> <span data-ttu-id="172ea-614">Avec .NET Framework versions 4.5.2 ou ultérieures, l’application bascule automatiquement les algorithmes de chiffrement pour utiliser des algorithmes conformes aux normes FIPS quand l’ordinateur est en mode FIPS.</span><span class="sxs-lookup"><span data-stu-id="172ea-614">With.NET Framework versions 4.5.2 or higher, the application automatically switches the cryptography algorithms to use FIPS-compliant algorithms when the computer is in FIPS mode.</span></span>

   <span data-ttu-id="172ea-615">Microsoft laisse à chaque client le soin de décider si le mode FIPS doit être activé.</span><span class="sxs-lookup"><span data-stu-id="172ea-615">Microsoft leaves it up to each customer to decide whether to enable FIPS mode.</span></span> <span data-ttu-id="172ea-616">Nous pensons qu’il n’existe aucune raison valable pour les clients qui ne sont pas soumis aux réglementations gouvernementales d’activer le mode FIPS par défaut.</span><span class="sxs-lookup"><span data-stu-id="172ea-616">We believe there is no compelling reason for customers who are not subject to government regulations to enable FIPS mode by default.</span></span>

   <span data-ttu-id="172ea-617">**Ressources**</span><span class="sxs-lookup"><span data-stu-id="172ea-617">**Resources**</span></span>

* [<span data-ttu-id="172ea-618">Why We’re Not Recommending “FIPS Mode” Anymore (Pourquoi nous ne recommandons plus le « mode FIPS »)</span><span class="sxs-lookup"><span data-stu-id="172ea-618">Why We're Not Recommending "FIPS Mode" Anymore</span></span>](http://blogs.technet.com/b/secguide/archive/2014/04/07/why-we-re-not-recommending-fips-mode-anymore.aspx)

  <span data-ttu-id="172ea-619">Cet article de blog donne une vue d’ensemble des normes FIPS et explique pourquoi le mode FIPS n’est plus activé par défaut.</span><span class="sxs-lookup"><span data-stu-id="172ea-619">This blog article gives an overview of FIPS and explains why they don't enable FIPS mode by default.</span></span>
* [<span data-ttu-id="172ea-620">FIPS 140 Validation (Validation de la norme FIPS 140)</span><span class="sxs-lookup"><span data-stu-id="172ea-620">FIPS 140 Validation</span></span>](https://technet.microsoft.com/library/cc750357.aspx)

  <span data-ttu-id="172ea-621">Cet article fournit des informations sur la façon dont les produits et les modules de chiffrement Microsoft sont conformes aux normes FIPS pour l’État fédéral américain.</span><span class="sxs-lookup"><span data-stu-id="172ea-621">This article provides information on how Microsoft products and cryptographic modules comply with the FIPS standard for the U.S. Federal government.</span></span>
* [<span data-ttu-id="172ea-622">Effets des paramètres de sécurité « Chiffrement système : utilisez des algorithmes compatibles FIPS pour le chiffrement, le hachage et la signature » dans Windows XP et les versions ultérieures de Windows</span><span class="sxs-lookup"><span data-stu-id="172ea-622">"System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows</span></span>](https://support.microsoft.com/kb/811833)

  <span data-ttu-id="172ea-623">Cet article traite de l’utilisation du mode FIPS sur des ordinateurs Windows anciens.</span><span class="sxs-lookup"><span data-stu-id="172ea-623">This article talks about the use of FIPS mode in older Windows computers.</span></span>
