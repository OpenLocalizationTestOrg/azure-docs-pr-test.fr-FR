---
title: "Réparation d’un travail d’importation Azure Import/Export - v1 | Microsoft Docs"
description: "Apprenez à réparer un travail d’importation qui a été créé et exécuté à l’aide du service Azure Import/Export."
author: muralikk
manager: syadav
editor: tysonn
services: storage
documentationcenter: 
ms.assetid: 38cc16bd-ad55-4625-9a85-e1726c35fd1b
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: muralikk
ms.openlocfilehash: c837713fd9e7d03287ae5a3644fd6bb47714c9d4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="repairing-an-import-job"></a><span data-ttu-id="3e0c3-103">Réparation d’un travail d’importation</span><span class="sxs-lookup"><span data-stu-id="3e0c3-103">Repairing an import job</span></span>
<span data-ttu-id="3e0c3-104">Le service Microsoft Azure Import/Export peut ne pas copier certains de vos fichiers ou des parties d’un fichier dans le service BLOB Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-104">The Microsoft Azure Import/Export service may fail to copy some of your files or parts of a file to the Windows Azure Blob service.</span></span> <span data-ttu-id="3e0c3-105">Voici quelques exemples de raisons de ces échecs :</span><span class="sxs-lookup"><span data-stu-id="3e0c3-105">Some reasons for failures include:</span></span>  
  
-   <span data-ttu-id="3e0c3-106">Fichiers endommagés</span><span class="sxs-lookup"><span data-stu-id="3e0c3-106">Corrupted files</span></span>  
  
-   <span data-ttu-id="3e0c3-107">Disques endommagés</span><span class="sxs-lookup"><span data-stu-id="3e0c3-107">Damaged drives</span></span>  
  
-   <span data-ttu-id="3e0c3-108">La clé du compte de stockage a été modifiée pendant le transfert du fichier.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-108">The storage account key changed while the file was being transferred.</span></span>  
  
<span data-ttu-id="3e0c3-109">Vous pouvez exécuter l’outil Microsoft Azure Import/Export avec les fichiers journaux de copie du travail d’importation. L’outil charge alors les fichiers (ou les parties d’un fichier) manquants dans votre compte de stockage Microsoft Azure pour terminer la tâche d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-109">You can run the Microsoft Azure Import/Export Tool with the import job's copy log files, and the tool uploads the missing files (or parts of a file) to your Windows Azure storage account to complete the import job.</span></span>  
  
## <a name="repairimport-parameters"></a><span data-ttu-id="3e0c3-110">Paramètres de RepairImport</span><span class="sxs-lookup"><span data-stu-id="3e0c3-110">RepairImport parameters</span></span>

<span data-ttu-id="3e0c3-111">Les paramètres suivants peuvent être spécifiés pour **RepairImport** :</span><span class="sxs-lookup"><span data-stu-id="3e0c3-111">The following parameters can be specified with **RepairImport**:</span></span> 
  
|||  
|-|-|  
|<span data-ttu-id="3e0c3-112">**/r:**<RepairFile\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-112">**/r:**<RepairFile\></span></span>|<span data-ttu-id="3e0c3-113">**Obligatoire.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-113">**Required.**</span></span> <span data-ttu-id="3e0c3-114">Chemin d’accès au fichier de réparation, qui suit la progression de la réparation et vous permet de reprendre une réparation interrompue.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-114">Path to the repair file, which tracks the progress of the repair, and allows you to resume an interrupted repair.</span></span> <span data-ttu-id="3e0c3-115">Chaque disque ne doit avoir qu’un fichier de réparation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-115">Each drive must have one and only one repair file.</span></span> <span data-ttu-id="3e0c3-116">Quand vous lancez la réparation d’un lecteur donné, transmettez le chemin d’un fichier de réparation, qui n’existe pas encore.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-116">When you start a repair for a given drive, pass in the path to a repair file, which does not yet exist.</span></span> <span data-ttu-id="3e0c3-117">Pour reprendre une réparation interrompue, vous devez transmettre le nom d’un fichier de réparation existant.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-117">To resume an interrupted repair, you should pass in the name of an existing repair file.</span></span> <span data-ttu-id="3e0c3-118">Le fichier de réparation correspondant au disque cible doit toujours être spécifié.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-118">The repair file corresponding to the target drive must always be specified.</span></span>|  
|<span data-ttu-id="3e0c3-119">**/logdir:**<LogDirectory\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-119">**/logdir:**<LogDirectory\></span></span>|<span data-ttu-id="3e0c3-120">**Facultatif.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-120">**Optional.**</span></span> <span data-ttu-id="3e0c3-121">Répertoire contenant les journaux.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-121">The log directory.</span></span> <span data-ttu-id="3e0c3-122">Les fichiers journaux détaillés sont écrits dans ce répertoire.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-122">Verbose log files are written to this directory.</span></span> <span data-ttu-id="3e0c3-123">Si aucun répertoire de journaux n’est spécifié, le répertoire actif est utilisé comme répertoire de journaux.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-123">If no log directory is specified, the current directory is used as the log directory.</span></span>|  
|<span data-ttu-id="3e0c3-124">**/d:**<TargetDirectories\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-124">**/d:**<TargetDirectories\></span></span>|<span data-ttu-id="3e0c3-125">**Obligatoire.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-125">**Required.**</span></span> <span data-ttu-id="3e0c3-126">Un ou plusieurs répertoires séparés par des points-virgules contenant les fichiers d’origine qui ont été importés.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-126">One or more semicolon-separated directories that contain the original files that were imported.</span></span> <span data-ttu-id="3e0c3-127">Le disque d’importation peut également être utilisé, mais il n’est pas obligatoire si d’autres emplacements de fichiers d’origine sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-127">The import drive may also be used, but is not required if alternate locations of original files are available.</span></span>|  
|<span data-ttu-id="3e0c3-128">**/bk:**<BitLockerKey\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-128">**/bk:**<BitLockerKey\></span></span>|<span data-ttu-id="3e0c3-129">**Facultatif.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-129">**Optional.**</span></span> <span data-ttu-id="3e0c3-130">Vous devez spécifier la clé BitLocker si vous souhaitez que l’outil déverrouille un disque chiffré dans lequel les fichiers d’origine sont disponibles.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-130">You should specify the BitLocker key if you want the tool to unlock an encrypted drive where the original files are available.</span></span>|  
|<span data-ttu-id="3e0c3-131">**/sn:**<StorageAccountName\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-131">**/sn:**<StorageAccountName\></span></span>|<span data-ttu-id="3e0c3-132">**Obligatoire.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-132">**Required.**</span></span> <span data-ttu-id="3e0c3-133">Nom du compte de stockage du travail d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-133">The name of the storage account for the import job.</span></span>|  
|<span data-ttu-id="3e0c3-134">**/sk:**<StorageAccountKey\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-134">**/sk:**<StorageAccountKey\></span></span>|<span data-ttu-id="3e0c3-135">**Obligatoire** si et seulement si un SAP de conteneur n’est pas spécifié.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-135">**Required** if and only if a container SAS is not specified.</span></span> <span data-ttu-id="3e0c3-136">Clé du compte de stockage du travail d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-136">The account key for the storage account for the import job.</span></span>|  
|<span data-ttu-id="3e0c3-137">**/csas:**<ContainerSas\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-137">**/csas:**<ContainerSas\></span></span>|<span data-ttu-id="3e0c3-138">**Obligatoire** si et seulement si la clé du compte de stockage n’est pas spécifiée.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-138">**Required** if and only if the storage account key is not specified.</span></span> <span data-ttu-id="3e0c3-139">SAP de conteneur pour accéder aux objets blob associés au travail d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-139">The container SAS for accessing the blobs associated with the import job.</span></span>|  
|<span data-ttu-id="3e0c3-140">**/CopyLogFile:**<DriveCopyLogFile\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-140">**/CopyLogFile:**<DriveCopyLogFile\></span></span>|<span data-ttu-id="3e0c3-141">**Obligatoire.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-141">**Required.**</span></span> <span data-ttu-id="3e0c3-142">Chemin d’accès au fichier journal de copie du disque (journal détaillé ou d’erreurs).</span><span class="sxs-lookup"><span data-stu-id="3e0c3-142">Path to the drive copy log file (either verbose log or error log).</span></span> <span data-ttu-id="3e0c3-143">Le fichier est généré par le service Windows Azure Import/Export et peut être téléchargé à partir du stockage blob associé au travail.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-143">The file is generated by the Windows Azure Import/Export service and can be downloaded from the blob storage associated with the job.</span></span> <span data-ttu-id="3e0c3-144">Le fichier journal de copie contient des informations sur les objets blob ou les fichiers en échec qui doivent être réparés.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-144">The copy log file contains information about failed blobs or files, which are to be repaired.</span></span>|  
|<span data-ttu-id="3e0c3-145">**/PathMapFile:**<DrivePathMapFile\></span><span class="sxs-lookup"><span data-stu-id="3e0c3-145">**/PathMapFile:**<DrivePathMapFile\></span></span>|<span data-ttu-id="3e0c3-146">**Facultatif.**</span><span class="sxs-lookup"><span data-stu-id="3e0c3-146">**Optional.**</span></span> <span data-ttu-id="3e0c3-147">Chemin d’accès à un fichier texte qui peut être utilisé pour résoudre les ambiguïtés si vous importez dans le même travail plusieurs fichiers portant le même nom.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-147">Path to a text file that can be used to resolve ambiguities if you have multiple files with the same name that you were importing in the same job.</span></span> <span data-ttu-id="3e0c3-148">La première fois que l’outil est exécuté, il peut remplir ce fichier avec tous les noms ambigus.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-148">The first time the tool is run, it can populate this file with all of the ambiguous names.</span></span> <span data-ttu-id="3e0c3-149">Les exécutions suivantes de l’outil utilisent ce fichier pour résoudre les ambiguïtés.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-149">Subsequent runs of the tool use this file to resolve the ambiguities.</span></span>|  
  
## <a name="using-the-repairimport-command"></a><span data-ttu-id="3e0c3-150">Utilisation de la commande RepairImport</span><span class="sxs-lookup"><span data-stu-id="3e0c3-150">Using the RepairImport command</span></span>  
<span data-ttu-id="3e0c3-151">Pour réparer des données d’importation en diffusant en continu les données sur le réseau, vous devez spécifier les répertoires qui contiennent les fichiers d’origine que vous importez à l’aide du paramètre `/d`.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-151">To repair import data by streaming the data over the network, you must specify the directories that contain the original files you were importing using the `/d` parameter.</span></span> <span data-ttu-id="3e0c3-152">Vous devez également spécifier le fichier journal de copie que vous avez téléchargé à partir de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-152">You must also specify the copy log file that you downloaded from your storage account.</span></span> <span data-ttu-id="3e0c3-153">Une ligne de commande classique pour réparer un travail d’importation avec des échecs partiels est semblable à :</span><span class="sxs-lookup"><span data-stu-id="3e0c3-153">A typical command line to repair an import job with partial failures looks like:</span></span>  
  
```  
WAImportExport.exe RepairImport /r:C:\WAImportExport\9WM35C2V.rep /d:C:\Users\bob\Pictures;X:\BobBackup\photos /sn:bobmediaaccount /sk:VkGbrUqBWLYJ6zg1m29VOTrxpBgdNOlp+kp0C9MEdx3GELxmBw4hK94f7KysbbeKLDksg7VoN1W/a5UuM2zNgQ== /CopyLogFile:C:\WAImportExport\9WM35C2V.log  
```  
  
<span data-ttu-id="3e0c3-154">Dans l’exemple suivant d’un fichier journal de copie, une partie de 64 Ko d’un fichier a été endommagée sur le disque qui a été envoyé pour le travail d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-154">In the following example of a copy log file, one 64-K piece of a file was corrupted on the drive that was shipped for the import job.</span></span> <span data-ttu-id="3e0c3-155">Dans la mesure où il s’agit de la seule erreur indiquée, les autres objets blob du travail ont bien été importés.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-155">Since this is the only failure indicated, the rest of the blobs in the job were successfully imported.</span></span>  
  
```xml
<?xml version="1.0" encoding="utf-8"?>  
<DriveLog>  
 <DriveId>9WM35C2V</DriveId>  
 <Blob Status="CompletedWithErrors">  
 <BlobPath>pictures/animals/koala.jpg</BlobPath>  
 <FilePath>\animals\koala.jpg</FilePath>  
 <Length>163840</Length>  
 <ImportDisposition Status="Overwritten">overwrite</ImportDisposition>  
 <PageRangeList>  
  <PageRange Offset="65536" Length="65536" Hash="AA2585F6F6FD01C4AD4256E018240CD4" Status="Corrupted" />  
 </PageRangeList>  
 </Blob>  
 <Status>CompletedWithErrors</Status>  
</DriveLog>  
```
  
<span data-ttu-id="3e0c3-156">Quand ce journal de copie est transmis à l’outil Azure Import/Export, celui-ci essaie de terminer l’importation de ce fichier en copiant le contenu manquant via le réseau.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-156">When this copy log is passed to the Azure Import/Export Tool, the tool tries to finish the import for this file by copying the missing contents across the network.</span></span> <span data-ttu-id="3e0c3-157">Dans l’exemple ci-dessus, l’outil recherche le fichier d’origine `\animals\koala.jpg` dans les deux répertoires (`C:\Users\bob\Pictures` et `X:\BobBackup\photos`).</span><span class="sxs-lookup"><span data-stu-id="3e0c3-157">Following the example above, the tool looks for the original file `\animals\koala.jpg` within the two directories `C:\Users\bob\Pictures` and `X:\BobBackup\photos`.</span></span> <span data-ttu-id="3e0c3-158">Si le fichier `C:\Users\bob\Pictures\animals\koala.jpg` existe, l’outil Azure Import/Export copie la plage de données manquante dans l’objet blob correspondant `http://bobmediaaccount.blob.core.windows.net/pictures/animals/koala.jpg`.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-158">If the file `C:\Users\bob\Pictures\animals\koala.jpg` exists, the Azure Import/Export Tool copies the missing range of data to the corresponding blob `http://bobmediaaccount.blob.core.windows.net/pictures/animals/koala.jpg`.</span></span>  
  
## <a name="resolving-conflicts-when-using-repairimport"></a><span data-ttu-id="3e0c3-159">Résolution des conflits lors de l’utilisation de RepairImport</span><span class="sxs-lookup"><span data-stu-id="3e0c3-159">Resolving conflicts when using RepairImport</span></span>  
<span data-ttu-id="3e0c3-160">Dans certains cas, l’outil peut ne pas être en mesure de trouver ou d’ouvrir le fichier nécessaire pour l’une des raisons suivantes : le fichier est introuvable, le fichier n’est pas accessible, le nom de fichier est ambigu ou le contenu du fichier n’est plus approprié.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-160">In some situations, the tool may not be able to find or open the necessary file for one of the following reasons: the file could not be found, the file is not accessible, the file name is ambiguous, or the content of the file is no longer correct.</span></span>  
  
<span data-ttu-id="3e0c3-161">Une erreur ambiguë peut se produire si l’outil essaie de localiser `\animals\koala.jpg` et s’il existe un fichier portant ce nom dans `C:\Users\bob\pictures` et `X:\BobBackup\photos`.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-161">An ambiguous error could occur if the tool is trying to locate `\animals\koala.jpg` and there is a file with that name under both `C:\Users\bob\pictures` and `X:\BobBackup\photos`.</span></span> <span data-ttu-id="3e0c3-162">Autrement dit, `C:\Users\bob\pictures\animals\koala.jpg` et `X:\BobBackup\photos\animals\koala.jpg` existent sur les disques de travail d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-162">That is, both `C:\Users\bob\pictures\animals\koala.jpg` and `X:\BobBackup\photos\animals\koala.jpg` exist on the import job drives.</span></span>  
  
<span data-ttu-id="3e0c3-163">L’option `/PathMapFile` vous permet de résoudre ces erreurs.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-163">The `/PathMapFile` option allows you to resolve these errors.</span></span> <span data-ttu-id="3e0c3-164">Vous pouvez spécifier le nom du fichier qui contient la liste des fichiers que l’outil n’a pas pu identifier correctement.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-164">You can specify the name of the file, which contains the list of files that the tool was not able to correctly identify.</span></span> <span data-ttu-id="3e0c3-165">L’exemple de ligne de commande suivant remplit `9WM35C2V_pathmap.txt` :</span><span class="sxs-lookup"><span data-stu-id="3e0c3-165">The following command-line example populates `9WM35C2V_pathmap.txt`:</span></span>  
  
```
WAImportExport.exe RepairImport /r:C:\WAImportExport\9WM35C2V.rep /d:C:\Users\bob\Pictures;X:\BobBackup\photos /sn:bobmediaaccount /sk:VkGbrUqBWLYJ6zg1m29VOTrxpBgdNOlp+kp0C9MEdx3GELxmBw4hK94f7KysbbeKLDksg7VoN1W/a5UuM2zNgQ== /CopyLogFile:C:\WAImportExport\9WM35C2V.log /PathMapFile:C:\WAImportExport\9WM35C2V_pathmap.txt  
```
  
<span data-ttu-id="3e0c3-166">L’outil écrit ensuite les chemins d’accès de fichier problématique dans `9WM35C2V_pathmap.txt`, à raison d’un par ligne.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-166">The tool will then write the problematic file paths to `9WM35C2V_pathmap.txt`, one on each line.</span></span> <span data-ttu-id="3e0c3-167">Par exemple, le fichier peut contenir les entrées suivantes après avoir exécuté la commande :</span><span class="sxs-lookup"><span data-stu-id="3e0c3-167">For instance, the file may contain the following entries after running the command:</span></span>  
 
```
\animals\koala.jpg  
\animals\kangaroo.jpg  
```
  
 <span data-ttu-id="3e0c3-168">Pour chaque fichier de la liste, vous devez essayer de localiser et d’ouvrir le fichier pour vous assurer qu’il est disponible pour l’outil.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-168">For each file in the list, you should attempt to locate and open the file to ensure it is available to the tool.</span></span> <span data-ttu-id="3e0c3-169">Si vous souhaitez indiquer explicitement à l’outil où rechercher un fichier, vous pouvez modifier le fichier de mappage de chemin d’accès et ajouter le chemin d’accès à chaque fichier sur la même ligne, séparé par un caractère de tabulation :</span><span class="sxs-lookup"><span data-stu-id="3e0c3-169">If you wish to tell the tool explicitly where to find a file, you can modify the path map file and add the path to each file on the same line, separated by a tab character:</span></span>  
  
```
\animals\koala.jpg           C:\Users\bob\Pictures\animals\koala.jpg  
\animals\kangaroo.jpg        X:\BobBackup\photos\animals\kangaroo.jpg  
```
  
<span data-ttu-id="3e0c3-170">Après avoir mis les fichiers nécessaires à disposition de l’outil ou après avoir mis à jour le fichier de mappage de chemin d’accès, vous pouvez réexécuter l’outil pour terminer le processus d’importation.</span><span class="sxs-lookup"><span data-stu-id="3e0c3-170">After making the necessary files available to the tool, or updating the path map file, you can rerun the tool to complete the import process.</span></span>  
  
## <a name="next-steps"></a><span data-ttu-id="3e0c3-171">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3e0c3-171">Next steps</span></span>
 
* [<span data-ttu-id="3e0c3-172">Configuration de l’outil Azure Import/Export</span><span class="sxs-lookup"><span data-stu-id="3e0c3-172">Setting Up the Azure Import/Export Tool</span></span>](storage-import-export-tool-setup-v1.md)   
* [<span data-ttu-id="3e0c3-173">Préparation des disques durs pour un travail d’importation</span><span class="sxs-lookup"><span data-stu-id="3e0c3-173">Preparing hard drives for an import job</span></span>](../storage-import-export-tool-preparing-hard-drives-import-v1.md)   
* [<span data-ttu-id="3e0c3-174">Consultation de l’état du travail avec les fichiers journaux de copie</span><span class="sxs-lookup"><span data-stu-id="3e0c3-174">Reviewing job status with copy log files</span></span>](storage-import-export-tool-reviewing-job-status-v1.md)   
* [<span data-ttu-id="3e0c3-175">Réparation d’un travail d’exportation</span><span class="sxs-lookup"><span data-stu-id="3e0c3-175">Repairing an export job</span></span>](../storage-import-export-tool-repairing-an-export-job-v1.md)   
* [<span data-ttu-id="3e0c3-176">Résolution des problèmes associés à l’outil Azure Import-Export</span><span class="sxs-lookup"><span data-stu-id="3e0c3-176">Troubleshooting the Azure Import/Export Tool</span></span>](storage-import-export-tool-troubleshooting-v1.md)
