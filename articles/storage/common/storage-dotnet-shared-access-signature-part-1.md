---
title: "aaaUsing partagé (SAS) des signatures d’accès dans le stockage Azure | Documents Microsoft"
description: "En savoir plus toouse partagé accès signatures (SAS) toodelegate accès tooAzure ressources de stockage, y compris les objets BLOB, les files d’attente, les tables et les fichiers."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: 5b75a3c25bcfb9f1ceb81f31dc2d42376bd105cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="b4bc6-103">Utilisation des signatures d’accès partagé (SAP)</span><span class="sxs-lookup"><span data-stu-id="b4bc6-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="b4bc6-104">Une signature d’accès partagé (SAS) vous offre un tooobjects d’accès toogrant limitée moyen dans votre compte de stockage tooother clients, sans exposer votre clé de compte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-104">A shared access signature (SAS) provides you with a way toogrant limited access tooobjects in your storage account tooother clients, without exposing your account key.</span></span> <span data-ttu-id="b4bc6-105">Dans cet article, nous fournissent une vue d’ensemble du modèle SAS hello, consulter les meilleures pratiques SAS et consulter des exemples.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-105">In this article, we provide an overview of hello SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="b4bc6-106">Pour obtenir des exemples de code supplémentaire à l’aide de SAP au-delà de celles présentées ici, consultez [prise en main de stockage d’objets Blob Azure dans .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) et d’autres exemples disponibles dans hello [exemples de Code Azure](https://azure.microsoft.com/documentation/samples/?service=storage) bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in hello [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="b4bc6-107">Vous pouvez télécharger des exemples d’applications hello et les exécuter ou parcourir le code hello sur GitHub.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-107">You can download hello sample applications and run them, or browse hello code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="b4bc6-108">Présentation de la signature d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="b4bc6-108">What is a shared access signature?</span></span>
<span data-ttu-id="b4bc6-109">Une signature d’accès partagé fournit tooresources accès délégué dans votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-109">A shared access signature provides delegated access tooresources in your storage account.</span></span> <span data-ttu-id="b4bc6-110">Avec une SAP, vous pouvez accorder les clients d’accès tooresources dans votre compte de stockage sans partager vos clés de compte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-110">With a SAS, you can grant clients access tooresources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="b4bc6-111">Il s’agit hello le point clé de l’utilisation de signatures d’accès partagé dans vos applications--une SAP est un tooshare de manière sécurisée à vos ressources de stockage sans compromettre vos clés de compte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-111">This is hello key point of using shared access signatures in your applications--a SAS is a secure way tooshare your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="b4bc6-112">Un SAS vous donne un contrôle précis sur le type de hello d’accès que vous accordez tooclients ayant hello SAP, y compris :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-112">A SAS gives you granular control over hello type of access you grant tooclients who have hello SAS, including:</span></span>

* <span data-ttu-id="b4bc6-113">intervalle de salutation sur quel hello SAS est valide, y compris l’heure de début hello et l’heure d’expiration de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-113">hello interval over which hello SAS is valid, including hello start time and hello expiry time.</span></span>
* <span data-ttu-id="b4bc6-114">autorisations de Hello accordées par hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-114">hello permissions granted by hello SAS.</span></span> <span data-ttu-id="b4bc6-115">Par exemple, un SAS pour un objet blob peut accorder en lecture et écriture autorisations toothat blob, mais pas supprimer des autorisations.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-115">For example, a SAS for a blob might grant read and write permissions toothat blob, but not delete permissions.</span></span>
* <span data-ttu-id="b4bc6-116">Une adresse IP facultatif ou la plage d’adresses IP à partir de laquelle le stockage Azure acceptera hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-116">An optional IP address or range of IP addresses from which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="b4bc6-117">Par exemple, vous pouvez spécifier une plage d’adresses IP appartenant tooyour organisation.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-117">For example, you might specify a range of IP addresses belonging tooyour organization.</span></span>
* <span data-ttu-id="b4bc6-118">protocole Hello sur lequel le stockage Azure acceptera hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-118">hello protocol over which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="b4bc6-119">Vous pouvez utiliser cette tooclients d’accès toorestrict paramètre facultatif à l’aide de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-119">You can use this optional parameter toorestrict access tooclients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="b4bc6-120">Quand devez-vous utiliser une signature d’accès partagé ?</span><span class="sxs-lookup"><span data-stu-id="b4bc6-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="b4bc6-121">Vous pouvez utiliser une SAP lorsque vous souhaitez tooprovide accès tooresources dans votre client de tooany de compte de stockage ne possédant ne pas de clés d’accès de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-121">You can use a SAS when you want tooprovide access tooresources in your storage account tooany client not possessing your storage account's access keys.</span></span> <span data-ttu-id="b4bc6-122">Votre compte de stockage inclut à la fois une clé d’accès primaire et secondaire, qui accorder le compte d’accès administratif tooyour et toutes les ressources qu’il contient.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access tooyour account, and all resources within it.</span></span> <span data-ttu-id="b4bc6-123">Exposition d’une de ces clés ouvre votre possibilité de toohello compte d’utilisation malveillante ou involontaire.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-123">Exposing either of these keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="b4bc6-124">Signatures d’accès partagé offrent une solution sécurisée qui permet aux clients tooread, écriture et suppression des données dans votre compte de stockage en fonction des autorisations toohello que vous avez accordé explicitement et sans besoin d’une clé de compte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-124">Shared access signatures provide a safe alternative that allows clients tooread, write, and delete data in your storage account according toohello permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="b4bc6-125">Un scénario courant où une SAP est utile est un service où les utilisateurs lire et écrire son propre compte de stockage de données tooyour.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-125">A common scenario where a SAS is useful is a service where users read and write their own data tooyour storage account.</span></span> <span data-ttu-id="b4bc6-126">Dans un scénario où un compte de stockage stocke les données utilisateur, il existe deux modèles de conception types :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="b4bc6-127">Les clients chargent et téléchargent les données par le biais d’un service proxy frontal, qui se charge de l’authentification.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="b4bc6-128">Ce service de proxy frontal a l’avantage hello de validation de règles d’entreprise, mais pour grandes quantités de données ou des transactions volumineuses, créez un service qui peut évoluer à la demande toomatch peut être difficile ou coûteuse.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-128">This front-end proxy service has hello advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale toomatch demand may be expensive or difficult.</span></span>

  ![Schéma du scénario : service proxy frontal](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png)   

1. <span data-ttu-id="b4bc6-130">Un service léger authentifie le client de hello en fonction des besoins et génère ensuite un SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-130">A lightweight service authenticates hello client as needed and then generates a SAS.</span></span> <span data-ttu-id="b4bc6-131">Une fois que le client de hello reçoit hello SAS, ils peuvent accéder les ressources de compte de stockage directement avec les autorisations hello définies par hello SAP et pour intervalle hello autorisée par hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-131">Once hello client receives hello SAS, they can access storage account resources directly with hello permissions defined by hello SAS and for hello interval allowed by hello SAS.</span></span> <span data-ttu-id="b4bc6-132">Hello SAS atténue la nécessité de hello pour le routage de toutes les données via le service de proxy frontal hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-132">hello SAS mitigates hello need for routing all data through hello front-end proxy service.</span></span>

  ![Schéma du scénario : service du fournisseur SAP](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png)   

<span data-ttu-id="b4bc6-134">De nombreux services réels peuvent utiliser un mélange de ces deux approches.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="b4bc6-135">Par exemple, certaines données peuvent être traitées et validées via le proxy frontal hello, alors que les autres données sont enregistrées et/ou lire directement à l’aide de SAP.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-135">For example, some data might be processed and validated via hello front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="b4bc6-136">En outre, vous devez toouse un objet de source SAP tooauthenticate hello dans une opération de copie dans certains scénarios :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-136">Additionally, you will need toouse a SAS tooauthenticate hello source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="b4bc6-137">Lorsque vous copiez un objet blob tooanother blob qui réside dans un autre compte de stockage, vous devez utiliser un objet blob de la source SAS tooauthenticate hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-137">When you copy a blob tooanother blob that resides in a different storage account, you must use a SAS tooauthenticate hello source blob.</span></span> <span data-ttu-id="b4bc6-138">Vous pouvez éventuellement utiliser un SAS tooauthenticate hello objet blob de destination ainsi.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-138">You can optionally use a SAS tooauthenticate hello destination blob as well.</span></span>
* <span data-ttu-id="b4bc6-139">Lorsque vous copiez un fichier tooanother qui se trouve dans un autre compte de stockage, vous devez utiliser un fichier de source SAP tooauthenticate hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-139">When you copy a file tooanother file that resides in a different storage account, you must use a SAS tooauthenticate hello source file.</span></span> <span data-ttu-id="b4bc6-140">Vous pouvez éventuellement utiliser un SAS tooauthenticate hello fichier de destination ainsi.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-140">You can optionally use a SAS tooauthenticate hello destination file as well.</span></span>
* <span data-ttu-id="b4bc6-141">Lorsque vous copiez un fichier de tooa blob ou d’un objet blob tooa de fichier, vous devez utiliser un objet de source SAP tooauthenticate hello, même si les objets source et destination hello résident dans hello même compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-141">When you copy a blob tooa file, or a file tooa blob, you must use a SAS tooauthenticate hello source object, even if hello source and destination objects reside within hello same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="b4bc6-142">Types de signatures d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="b4bc6-142">Types of shared access signatures</span></span>
<span data-ttu-id="b4bc6-143">Vous pouvez créer deux types de signatures d’accès partagé :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="b4bc6-144">**SAP de service.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-144">**Service SAS.**</span></span> <span data-ttu-id="b4bc6-145">les délégués SAS Hello service d’accès tooa des ressources dans un seul des services de stockage hello : hello service Blob, file d’attente, Table ou de fichier.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-145">hello service SAS delegates access tooa resource in just one of hello storage services: hello Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="b4bc6-146">Consultez [construction d’un SAS Service](https://msdn.microsoft.com/library/dn140255.aspx) et [Service SAS exemples](https://msdn.microsoft.com/library/dn140256.aspx) pour des informations détaillées sur la construction du jeton SAS du service hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing hello service SAS token.</span></span>
* <span data-ttu-id="b4bc6-147">**SAP de compte.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-147">**Account SAS.**</span></span> <span data-ttu-id="b4bc6-148">les délégués SAS Hello compte d’accès tooresources dans un ou plusieurs des services de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-148">hello account SAS delegates access tooresources in one or more of hello storage services.</span></span> <span data-ttu-id="b4bc6-149">Toutes les opérations de hello disponibles via un service SAP sont également disponibles via un compte SAP.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-149">All of hello operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="b4bc6-150">En outre, avec un compte hello SAS, vous pouvez déléguer toooperations access qui s’appliquent tooa donné de service, tel que **propriétés de Service Get/Set** et **obtenir des statistiques du Service**. Vous pouvez également déléguer l’accès tooread, écriture et les opérations de suppression sur les conteneurs d’objets blob, tables, files d’attente et les partages de fichiers qui ne sont pas autorisées avec un service SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-150">Additionally, with hello account SAS, you can delegate access toooperations that apply tooa given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access tooread, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="b4bc6-151">Consultez [construction d’un SAS compte](https://msdn.microsoft.com/library/mt584140.aspx) pour des informations détaillées sur la construction d’un jeton SAS hello compte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing hello account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="b4bc6-152">Fonctionnement d’une signature d’accès partagé</span><span class="sxs-lookup"><span data-stu-id="b4bc6-152">How a shared access signature works</span></span>
<span data-ttu-id="b4bc6-153">Une signature d’accès partagé est signé URI qui pointe tooone ou davantage de ressources de stockage et inclut un jeton qui contient un ensemble spécial de paramètres de requête.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-153">A shared access signature is a signed URI that points tooone or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="b4bc6-154">jeton de Hello indique comment les ressources hello est accessible par le client de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-154">hello token indicates how hello resources may be accessed by hello client.</span></span> <span data-ttu-id="b4bc6-155">Un des paramètres de requête hello, hello signature est construite à partir des paramètres SAS hello et signé avec la clé de compte hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-155">One of hello query parameters, hello signature, is constructed from hello SAS parameters and signed with hello account key.</span></span> <span data-ttu-id="b4bc6-156">Cette signature est utilisée par hello tooauthenticate de stockage Azure SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-156">This signature is used by Azure Storage tooauthenticate hello SAS.</span></span>

<span data-ttu-id="b4bc6-157">Voici un exemple d’URI SAS, URI de ressource montrant hello et un jeton SAS hello :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-157">Here's an example of a SAS URI, showing hello resource URI and hello SAS token:</span></span>

![Composants d’un URI SAP](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png)   

<span data-ttu-id="b4bc6-159">jeton SAS Hello est une chaîne que vous générez sur hello *client* côté (consultez hello [exemples SAS](#sas-examples) section d’exemples de code).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-159">hello SAS token is a string you generate on hello *client* side (see hello [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="b4bc6-160">Un jeton SAP que vous générez avec la bibliothèque cliente de stockage hello, par exemple, n'est pas suivi par le stockage Azure en aucune façon.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-160">A SAS token you generate with hello storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="b4bc6-161">Vous pouvez créer un nombre illimité de jetons SAP côté client de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-161">You can create an unlimited number of SAS tokens on hello client side.</span></span>

<span data-ttu-id="b4bc6-162">Lorsqu’un client fournit un tooAzure URI SAS du stockage dans le cadre d’une demande, service de hello vérifie les paramètres SAS hello et tooverify signature qu’il est valide pour authentifier la demande de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-162">When a client provides a SAS URI tooAzure Storage as part of a request, hello service checks hello SAS parameters and signature tooverify that it is valid for authenticating hello request.</span></span> <span data-ttu-id="b4bc6-163">Si le service de hello vérifie qu’une signature hello est valide, la demande de hello est authentifié.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-163">If hello service verifies that hello signature is valid, then hello request is authenticated.</span></span> <span data-ttu-id="b4bc6-164">Dans le cas contraire, demande de hello est refusée avec le code d’erreur 403 (interdit).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-164">Otherwise, hello request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="b4bc6-165">Paramètres de la signature d’accès partagé (SAP)</span><span class="sxs-lookup"><span data-stu-id="b4bc6-165">Shared access signature parameters</span></span>
<span data-ttu-id="b4bc6-166">le compte de Hello SAS et de jetons SAS du service incluent des paramètres courants et également prennent quelques paramètres qui sont différentes.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-166">hello account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-tooaccount-sas-and-service-sas-tokens"></a><span data-ttu-id="b4bc6-167">Tooaccount commun de paramètres SAS et jetons SAS du service</span><span class="sxs-lookup"><span data-stu-id="b4bc6-167">Parameters common tooaccount SAS and service SAS tokens</span></span>
* <span data-ttu-id="b4bc6-168">**Version de l’API** un paramètre facultatif qui spécifie hello stockage service version toouse tooexecute hello demande.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-168">**Api version** An optional parameter that specifies hello storage service version toouse tooexecute hello request.</span></span>
* <span data-ttu-id="b4bc6-169">**Version du service** un paramètre obligatoire qui spécifie hello stockage service version toouse tooauthenticate hello demande.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-169">**Service version** A required parameter that specifies hello storage service version toouse tooauthenticate hello request.</span></span>
* <span data-ttu-id="b4bc6-170">**Heure de début.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-170">**Start time.**</span></span> <span data-ttu-id="b4bc6-171">Il s’agit de heure hello à quels hello SAS devient valide.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-171">This is hello time at which hello SAS becomes valid.</span></span> <span data-ttu-id="b4bc6-172">heure de début Hello pour une signature d’accès partagé est facultative.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-172">hello start time for a shared access signature is optional.</span></span> <span data-ttu-id="b4bc6-173">Si une heure de début est omise, hello SAS prend effet immédiatement.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-173">If a start time is omitted, hello SAS is effective immediately.</span></span> <span data-ttu-id="b4bc6-174">Hello heure de début doit être exprimée en heure UTC (Coordinated Universal Time), avec un indicateur UTC spéciaux (« Z »), par exemple `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-174">hello start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="b4bc6-175">**Heure d’expiration.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-175">**Expiry time.**</span></span> <span data-ttu-id="b4bc6-176">Il s’agit de hello heure après laquelle hello SAS n’est plus valide.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-176">This is hello time after which hello SAS is no longer valid.</span></span> <span data-ttu-id="b4bc6-177">Les meilleures pratiques recommandent soit de spécifier une heure d’expiration pour une signature d’accès partagé, soit de l’associer à une stratégie d’accès stockée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="b4bc6-178">Hello délai d’expiration doit être exprimée en heure UTC (Coordinated Universal Time), avec un indicateur UTC spéciaux (« Z »), par exemple `1994-11-05T13:15:30Z` (voir ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-178">hello expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="b4bc6-179">**Autorisations.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-179">**Permissions.**</span></span> <span data-ttu-id="b4bc6-180">autorisations de Hello spécifiées sur hello SAS indiquent les opérations client de hello peut effectuer par rapport à la ressource de stockage hello à l’aide de hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-180">hello permissions specified on hello SAS indicate what operations hello client can perform against hello storage resource using hello SAS.</span></span> <span data-ttu-id="b4bc6-181">Les autorisations disponibles ne sont pas les mêmes pour une SAP de compte et une SAP de service.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="b4bc6-182">**IP.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-182">**IP.**</span></span> <span data-ttu-id="b4bc6-183">Un paramètre facultatif qui spécifie une adresse IP ou une plage d’adresses IP en dehors de Azure (consultez la section de hello [état de configuration de session de routage](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) pour Express Route) à partir de quelles demandes tooaccept.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see hello section [Routing session configuration state](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which tooaccept requests.</span></span>
* <span data-ttu-id="b4bc6-184">**Protocole.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-184">**Protocol.**</span></span> <span data-ttu-id="b4bc6-185">Un paramètre facultatif qui spécifie le protocole de hello autorisée pour une demande.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-185">An optional parameter that specifies hello protocol permitted for a request.</span></span> <span data-ttu-id="b4bc6-186">Les valeurs possibles sont à la fois HTTP et HTTPS (`https,http`), qui est la valeur par défaut de hello ou HTTPS uniquement (`https`).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-186">Possible values are both HTTPS and HTTP (`https,http`), which is hello default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="b4bc6-187">Notez que HTTP uniquement n’est pas une valeur autorisée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="b4bc6-188">**Signature.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-188">**Signature.**</span></span> <span data-ttu-id="b4bc6-189">signature de Hello est construit à partir de hello autres paramètres spécifié en tant que partie jeton, puis chiffrées.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-189">hello signature is constructed from hello other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="b4bc6-190">Il a utilisé tooauthenticate hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-190">It's used tooauthenticate hello SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="b4bc6-191">Paramètres d’un jeton de SAP de service</span><span class="sxs-lookup"><span data-stu-id="b4bc6-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="b4bc6-192">**Ressource de stockage.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-192">**Storage resource.**</span></span> <span data-ttu-id="b4bc6-193">Les ressources de stockage dont vous pouvez déléguer l’accès à l’aide d’une SAP de service incluent :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="b4bc6-194">Conteneurs et objets blob</span><span class="sxs-lookup"><span data-stu-id="b4bc6-194">Containers and blobs</span></span>
  * <span data-ttu-id="b4bc6-195">Partages de fichiers et fichiers</span><span class="sxs-lookup"><span data-stu-id="b4bc6-195">File shares and files</span></span>
  * <span data-ttu-id="b4bc6-196">Files d’attente</span><span class="sxs-lookup"><span data-stu-id="b4bc6-196">Queues</span></span>
  * <span data-ttu-id="b4bc6-197">Tables et plages d’entités de table.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="b4bc6-198">Paramètres d’un jeton de compte SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="b4bc6-199">**Service ou services.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-199">**Service or services.**</span></span> <span data-ttu-id="b4bc6-200">Un compte SAP peut déléguer l’accès tooone ou plusieurs des services de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-200">An account SAS can delegate access tooone or more of hello storage services.</span></span> <span data-ttu-id="b4bc6-201">Par exemple, vous pouvez créer un compte SAP que délégués accéder au service d’objet Blob et le fichier toohello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-201">For example, you can create an account SAS that delegates access toohello Blob and File service.</span></span> <span data-ttu-id="b4bc6-202">Ou vous pouvez créer une SAP de délégués d’accès tooall quatre services (Blob, file d’attente, Table et fichier).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-202">Or you can create a SAS that delegates access tooall four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="b4bc6-203">**Types de ressources de stockage.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-203">**Storage resource types.**</span></span> <span data-ttu-id="b4bc6-204">Un compte SAP s’applique tooone ou plusieurs classes de ressources de stockage, plutôt que d’une ressource spécifique.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-204">An account SAS applies tooone or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="b4bc6-205">Vous pouvez créer un compte SAP toodelegate l’accès à :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-205">You can create an account SAS toodelegate access to:</span></span>
  * <span data-ttu-id="b4bc6-206">API au niveau du service, qui sont appelées par rapport à la ressource de compte de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-206">Service-level APIs, which are called against hello storage account resource.</span></span> <span data-ttu-id="b4bc6-207">Exemples : **Get/Set Service Properties**, **Get Service Stats** et **List Containers/Queues/Tables/Shares**.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="b4bc6-208">API au niveau du conteneur, qui est appelées sur des objets conteneur hello pour chaque service : conteneurs, des files d’attente, des tableaux d’objets blob et les partages de fichiers.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-208">Container-level APIs, which are called against hello container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="b4bc6-209">Exemples : **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share** et **List Blobs/Files and Directories**.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="b4bc6-210">Des API au niveau de l’objet, qui sont appelées sur les objets blob, les messages de file d’attente, les entités de table et les fichiers.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="b4bc6-211">Exemples : **Put Blob**, **Query Entity**, **Get Messages** et **Create File**.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="b4bc6-212">Exemples d’URI de SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="b4bc6-213">Exemple d’URI SAP de service</span><span class="sxs-lookup"><span data-stu-id="b4bc6-213">Service SAS URI example</span></span>

<span data-ttu-id="b4bc6-214">Voici un exemple d’un service qui fournit l’URI SAS lire et écrire des blob de tooa d’autorisations.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-214">Here is an example of a service SAS URI that provides read and write permissions tooa blob.</span></span> <span data-ttu-id="b4bc6-215">table de Hello décompose chaque partie de hello URI toounderstand comment il contribue toohello SAS :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-215">hello table breaks down each part of hello URI toounderstand how it contributes toohello SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="b4bc6-216">Nom</span><span class="sxs-lookup"><span data-stu-id="b4bc6-216">Name</span></span> | <span data-ttu-id="b4bc6-217">Partie de la SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-217">SAS portion</span></span> | <span data-ttu-id="b4bc6-218">Description</span><span class="sxs-lookup"><span data-stu-id="b4bc6-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b4bc6-219">URI de l’objet blob</span><span class="sxs-lookup"><span data-stu-id="b4bc6-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="b4bc6-220">adresse Hello d’objet blob de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-220">hello address of hello blob.</span></span> <span data-ttu-id="b4bc6-221">Notez que l'utilisation de HTTPS est fortement recommandée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="b4bc6-222">Version des services de stockage</span><span class="sxs-lookup"><span data-stu-id="b4bc6-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="b4bc6-223">Pour les services de stockage de la version 2012-02-12 et versions ultérieures, ce paramètre indique hello version toouse.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-223">For storage services version 2012-02-12 and later, this parameter indicates hello version toouse.</span></span> |
| <span data-ttu-id="b4bc6-224">Heure de début</span><span class="sxs-lookup"><span data-stu-id="b4bc6-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="b4bc6-225">Spécifiée en heure UTC.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-225">Specified in UTC time.</span></span> <span data-ttu-id="b4bc6-226">Si vous souhaitez hello SAS toobe valide immédiatement, omettez l’heure de début hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-226">If you want hello SAS toobe valid immediately, omit hello start time.</span></span> |
| <span data-ttu-id="b4bc6-227">Heure d’expiration</span><span class="sxs-lookup"><span data-stu-id="b4bc6-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="b4bc6-228">Spécifiée en heure UTC.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="b4bc6-229">Ressource</span><span class="sxs-lookup"><span data-stu-id="b4bc6-229">Resource</span></span> |`sr=b` |<span data-ttu-id="b4bc6-230">ressource de Hello est un objet blob.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-230">hello resource is a blob.</span></span> |
| <span data-ttu-id="b4bc6-231">Autorisations</span><span class="sxs-lookup"><span data-stu-id="b4bc6-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="b4bc6-232">autorisations de Hello en hello SAS incluent Read (r) et écriture (w).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-232">hello permissions granted by hello SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="b4bc6-233">Plage d’adresses IP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="b4bc6-234">Hello plage d’adresses IP à partir de laquelle une demande est acceptée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-234">hello range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="b4bc6-235">Protocole</span><span class="sxs-lookup"><span data-stu-id="b4bc6-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="b4bc6-236">Seules les demandes utilisant HTTPS sont autorisées.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="b4bc6-237">Signature</span><span class="sxs-lookup"><span data-stu-id="b4bc6-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="b4bc6-238">Utilisé blob de toohello tooauthenticate accès.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-238">Used tooauthenticate access toohello blob.</span></span> <span data-ttu-id="b4bc6-239">signature de Hello est un HMAC calculé sur une chaîne de signature et la clé à l’aide d’algorithme de hello SHA256, puis codé en Base64.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-239">hello signature is an HMAC computed over a string-to-sign and key using hello SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="b4bc6-240">Exemple d’URI SAP de compte</span><span class="sxs-lookup"><span data-stu-id="b4bc6-240">Account SAS URI example</span></span>

<span data-ttu-id="b4bc6-241">Voici un exemple d’un compte SAP qu’utilise hello les mêmes paramètres courants sur le jeton de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-241">Here is an example of an account SAS that uses hello same common parameters on hello token.</span></span> <span data-ttu-id="b4bc6-242">Dans la mesure où ces paramètres sont décrits ci-dessus, ils ne sont pas décrits ici.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="b4bc6-243">Seuls les paramètres hello qui sont spécifique tooaccount que SAP est décrits dans le tableau hello ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-243">Only hello parameters that are specific tooaccount SAS are described in hello table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="b4bc6-244">Nom</span><span class="sxs-lookup"><span data-stu-id="b4bc6-244">Name</span></span> | <span data-ttu-id="b4bc6-245">Partie de la SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-245">SAS portion</span></span> | <span data-ttu-id="b4bc6-246">Description</span><span class="sxs-lookup"><span data-stu-id="b4bc6-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b4bc6-247">URI de ressource</span><span class="sxs-lookup"><span data-stu-id="b4bc6-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="b4bc6-248">Hello Blob service point de terminaison, avec des paramètres pour l’obtention des propriétés du service (lorsqu’il est appelé avec GET) ou de la définition des propriétés du service (lorsqu’il est appelé avec SET).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-248">hello Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="b4bc6-249">Services</span><span class="sxs-lookup"><span data-stu-id="b4bc6-249">Services</span></span> |`ss=bf` |<span data-ttu-id="b4bc6-250">Hello SAP s’applique toohello Blob et les services de fichiers</span><span class="sxs-lookup"><span data-stu-id="b4bc6-250">hello SAS applies toohello Blob and File services</span></span> |
| <span data-ttu-id="b4bc6-251">Types de ressources</span><span class="sxs-lookup"><span data-stu-id="b4bc6-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="b4bc6-252">Hello SAP s’applique au niveau tooservice operations.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-252">hello SAS applies tooservice-level operations.</span></span> |
| <span data-ttu-id="b4bc6-253">Autorisations</span><span class="sxs-lookup"><span data-stu-id="b4bc6-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="b4bc6-254">autorisations de Hello accorder l’accès tooread et les opérations d’écriture.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-254">hello permissions grant access tooread and write operations.</span></span> |

<span data-ttu-id="b4bc6-255">Étant donné que les autorisations sont limitées au niveau du service toohello, opérations accessibles avec cette SAS sont **Get Blob Service Properties** (lecture) et **Set Blob Service Properties** (écriture).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-255">Given that permissions are restricted toohello service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="b4bc6-256">Toutefois, avec un URI de ressource différent, hello même jeton SAS peut également être utilisée de trop toodelegate accès**obtenir des statistiques du Service Blob** (lecture).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-256">However, with a different resource URI, hello same SAS token could also be used toodelegate access too**Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="b4bc6-257">Contrôle d’une SAP avec une stratégie d’accès stockée</span><span class="sxs-lookup"><span data-stu-id="b4bc6-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="b4bc6-258">Une signature d’accès partagé peut prendre deux formes :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="b4bc6-259">**SAS ad hoc :** lorsque vous créez un SAS ad hoc, l’heure de début hello, la durée d’expiration, et toutes les autorisations pour hello SAS sont spécifiées dans hello URI SAS (ou implicite, dans le cas de hello où l’heure de début est omise).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-259">**Ad hoc SAS:** When you create an ad hoc SAS, hello start time, expiry time, and permissions for hello SAS are all specified in hello SAS URI (or implied, in hello case where start time is omitted).</span></span> <span data-ttu-id="b4bc6-260">Ce type de SAP peut être créé en tant que SAP de compte ou SAP de service.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="b4bc6-261">**Associations de sécurité avec la stratégie d’accès stockée :** une stratégie d’accès stockée est défini sur un conteneur de ressources--un conteneur d’objets blob, table, de file d’attente, ou partage--de fichiers et peut être utilisé toomanage les contraintes pour un ou plusieurs signatures d’accès partagé.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used toomanage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="b4bc6-262">Lorsque vous associez un SAS avec une stratégie d’accès stockée, hello SAS hérite des contraintes de hello--hello heure de début, heure d’expiration et autorisations--définies pour la stratégie d’accès stockée hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-262">When you associate a SAS with a stored access policy, hello SAS inherits hello constraints--hello start time, expiry time, and permissions--defined for hello stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="b4bc6-263">À l’heure actuelle, une SAP de compte doit être une SAP ad hoc.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="b4bc6-264">Les stratégies d’accès stockées ne sont pas encore prises en charge pour les SAP de compte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="b4bc6-265">Hello différence entre les formes hello deux est importante pour un scénario clé : la révocation.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-265">hello difference between hello two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="b4bc6-266">Comme un URI SAS est une URL, toute personne qui obtient hello SAS pouvez l’utiliser, quelle que soit la qui l’a créé.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-266">Because a SAS URI is a URL, anyone that obtains hello SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="b4bc6-267">Si une SAP est publiée publiquement, il peut être utilisé par tout le monde dans Bonjour.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-267">If a SAS is published publicly, it can be used by anyone in hello world.</span></span> <span data-ttu-id="b4bc6-268">Une SAP accorde l’accès tooresources tooanyone il possédant jusqu'à ce qu’un des quatre éléments se produit :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-268">A SAS grants access tooresources tooanyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="b4bc6-269">délai d’expiration Hello spécifié sur hello que SAS est atteinte.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-269">hello expiry time specified on hello SAS is reached.</span></span>
2. <span data-ttu-id="b4bc6-270">délai d’expiration Hello spécifié sur la stratégie d’accès stockée hello référencée par hello que SAS est atteinte (si une stratégie d’accès stockée est référencée, et si elle spécifie un délai d’expiration).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-270">hello expiry time specified on hello stored access policy referenced by hello SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="b4bc6-271">Cela peut se produire car hello est écoulé, ou vous avez modifié la stratégie d’accès stockée hello avec un délai d’expiration Bonjour passées, qui est une façon toorevoke hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-271">This can occur either because hello interval elapses, or because you've modified hello stored access policy with an expiry time in hello past, which is one way toorevoke hello SAS.</span></span>
3. <span data-ttu-id="b4bc6-272">Hello stockés de la stratégie d’accès référencée par hello que SAS est supprimé, ce qui est hello de toorevoke une autre façon SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-272">hello stored access policy referenced by hello SAS is deleted, which is another way toorevoke hello SAS.</span></span> <span data-ttu-id="b4bc6-273">Notez que si vous recréez la stratégie d’accès stockée hello avec exactement de même nom, toutes les associations de sécurité existantes hello les jetons seront à nouveau des autorisations toohello conséquente valide associé cette stratégie d’accès stockée (en supposant que ce délai d’expiration hello sur hello SAP n’a pas été).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-273">Note that if you recreate hello stored access policy with exactly hello same name, all existing SAS tokens will again be valid according toohello permissions associated with that stored access policy (assuming that hello expiry time on hello SAS has not passed).</span></span> <span data-ttu-id="b4bc6-274">Si vous prévoyez de toorevoke hello SAS, être vraiment toouse un nom différent si vous recréez la stratégie d’accès hello avec un délai d’expiration Bonjour futures.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-274">If you are intending toorevoke hello SAS, be sure toouse a different name if you recreate hello access policy with an expiry time in hello future.</span></span>
4. <span data-ttu-id="b4bc6-275">Hello compte qui a été utilisé toocreate hello SAS est régénérée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-275">hello account key that was used toocreate hello SAS is regenerated.</span></span> <span data-ttu-id="b4bc6-276">La régénération d’une clé de compte entraîne tous les composants d’application à l’aide de ce tooauthenticate toofail clé jusqu'à ce qu’ils sont mis à jour toouse hello soit autre clé de compte valide ou une clé de compte qui vient d’être régénérée hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-276">Regenerating an account key will cause all application components using that key toofail tooauthenticate until they're updated toouse either hello other valid account key or hello newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b4bc6-277">Un URI de signature d’accès partagé est associé avec signature d’hello hello compte clé toocreate utilisés et hello stratégie d’accès stockée (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-277">A shared access signature URI is associated with hello account key used toocreate hello signature, and hello associated stored access policy (if any).</span></span> <span data-ttu-id="b4bc6-278">Si aucune stratégie d’accès stockée n’est spécifié, hello uniquement moyen toorevoke une signature d’accès partagé est clé de compte toochange hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-278">If no stored access policy is specified, hello only way toorevoke a shared access signature is toochange hello account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="b4bc6-279">Authentification à partir d’une application cliente avec la SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="b4bc6-280">Un client qui est en possession d’une SAP peut utiliser hello SAS tooauthenticate une demande par rapport à un compte de stockage pour lesquels ils ne possèdent pas de clés de compte hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-280">A client who is in possession of a SAS can use hello SAS tooauthenticate a request against a storage account for which they do not possess hello account keys.</span></span> <span data-ttu-id="b4bc6-281">Une SAP peut être incluse dans une chaîne de connexion, ou être utilisée directement à partir de méthode ou constructeur approprié de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-281">A SAS can be included in a connection string, or used directly from hello appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="b4bc6-282">Utilisation d’une SAP dans une chaîne de connexion</span><span class="sxs-lookup"><span data-stu-id="b4bc6-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="b4bc6-283">Utilisation d’une SAP dans un constructeur ou une méthode</span><span class="sxs-lookup"><span data-stu-id="b4bc6-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="b4bc6-284">Plusieurs constructeurs de bibliothèque de client de stockage Azure et les surcharges de méthode offrent un paramètre SAS, afin que vous pouvez vous authentifier un service de toohello de demande avec une SAP.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request toohello service with a SAS.</span></span>

<span data-ttu-id="b4bc6-285">Par exemple, un URI SAS est utilisé toocreate objet blob de blocs tooa référence.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-285">For example, here a SAS URI is used toocreate a reference tooa block blob.</span></span> <span data-ttu-id="b4bc6-286">Hello SAS fournit hello seules informations d’identification nécessaires pour la demande de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-286">hello SAS provides hello only credentials needed for hello request.</span></span> <span data-ttu-id="b4bc6-287">référence blob de bloc Hello est ensuite utilisé pour une opération d’écriture :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-287">hello block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with hello specified name toohello container.
// If hello blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="b4bc6-288">Bonnes pratiques lors de l’utilisation de SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-288">Best practices when using SAS</span></span>
<span data-ttu-id="b4bc6-289">Lorsque vous utilisez des signatures d’accès partagé dans vos applications, vous devez toobe conscient des risques potentiels deux :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-289">When you use shared access signatures in your applications, you need toobe aware of two potential risks:</span></span>

* <span data-ttu-id="b4bc6-290">Si une signature d'accès partagé est divulguée, toute personne qui se la procure peut s'en servir et votre compte de stockage court donc le risque d'être compromis.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="b4bc6-291">Si un SAS fourni tooa client application expire et l’application hello est impossible de tooretrieve une nouvelle SAP à partir de votre service, des fonctionnalités de l’application hello peuvent être entravée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-291">If a SAS provided tooa client application expires and hello application is unable tooretrieve a new SAS from your service, then hello application's functionality may be hindered.</span></span>

<span data-ttu-id="b4bc6-292">Hello les recommandations suivantes pour l’utilisation de signatures d’accès partagé peuvent aider à réduire ces risques :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-292">hello following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="b4bc6-293">**Toujours utiliser HTTPS** toocreate ou distribuer un SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-293">**Always use HTTPS** toocreate or distribute a SAS.</span></span> <span data-ttu-id="b4bc6-294">Si une SAP est transmise via HTTP et interceptée, un attaquant lors d’une attaque de man-in-the-middle est en mesure de tooread hello SAS et l’utiliser comme hello destiné utilisateur peut avoir compromettre des données sensibles ou permettant la corruption des données hello utilisateur malveillant.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able tooread hello SAS and then use it just as hello intended user could have, potentially compromising sensitive data or allowing for data corruption by hello malicious user.</span></span>
2. <span data-ttu-id="b4bc6-295">**Référencez si possible les stratégies d'accès stockées.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="b4bc6-296">Stockées permettent de stratégies d’accès hello d’autorisations de toorevoke option sans avoir des clés de compte de stockage tooregenerate hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-296">Stored access policies give you hello option toorevoke permissions without having tooregenerate hello storage account keys.</span></span> <span data-ttu-id="b4bc6-297">Définir l’expiration de hello très bien dans hello future (ou infinie) et vérifiez qu’il est régulièrement mis à jour les toomove plus loin dans hello futures.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-297">Set hello expiration on these very far in hello future (or infinite) and make sure it's regularly updated toomove it farther into hello future.</span></span>
3. <span data-ttu-id="b4bc6-298">**Utilisez des heures d'expiration avec une échéance à court terme sur une signature d'accès partagé ad hoc.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="b4bc6-299">De cette manière, même si une signature d’accès partagé est compromise, elle n’est valide que pendant une courte durée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="b4bc6-300">Cette pratique est particulièrement importante si vous ne pouvez pas référencer une stratégie d'accès stockée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="b4bc6-301">Les délais d’expiration court terme également limitent hello de données qui peuvent être écrites tooa blob en limitant hello temps disponible tooupload tooit.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-301">Near-term expiration times also limit hello amount of data that can be written tooa blob by limiting hello time available tooupload tooit.</span></span>
4. <span data-ttu-id="b4bc6-302">**Disposer de clients renouveler automatiquement hello SAS si nécessaire.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-302">**Have clients automatically renew hello SAS if necessary.**</span></span> <span data-ttu-id="b4bc6-303">Les clients doivent renouveler hello SAS bien avant l’expiration de hello, dans le temps de tooallow d’ordre des nouvelles tentatives si le service hello fournissant hello SAS n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-303">Clients should renew hello SAS well before hello expiration, in order tooallow time for retries if hello service providing hello SAS is unavailable.</span></span> <span data-ttu-id="b4bc6-304">Si votre SAS doit toobe utilisé pour un petit nombre d’exécution, les opérations de courte durée de vie sont attendu toobe effectué dans la période d’expiration de hello, puis peut-être inutile hello que SAS n’est pas normalement toobe renouvelé.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-304">If your SAS is meant toobe used for a small number of immediate, short-lived operations that are expected toobe completed within hello expiration period, then this may be unnecessary as hello SAS is not expected toobe renewed.</span></span> <span data-ttu-id="b4bc6-305">Toutefois, si vous avez client qui envoie régulièrement des requêtes via SAS, possibilité de hello d’expiration entre en jeu.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-305">However, if you have client that is routinely making requests via SAS, then hello possibility of expiration comes into play.</span></span> <span data-ttu-id="b4bc6-306">Hello essentiel est toobalance hello nécessaire pour hello SAS toobe courte durée de vie (comme indiqué plus haut) avec tooensure besoin hello qui hello client demande le renouvellement tôt suffisamment (tooavoid interruption de service en raison de renouvellement de toosuccessful préalable toohello SAS qui arrive à expiration).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-306">hello key consideration is toobalance hello need for hello SAS toobe short-lived (as previously stated) with hello need tooensure that hello client is requesting renewal early enough (tooavoid disruption due toohello SAS expiring prior toosuccessful renewal).</span></span>
5. <span data-ttu-id="b4bc6-307">**Faites attention à la date de début de la signature d’accès partagé.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="b4bc6-308">Si vous définissez l’heure de début hello pour une SAP trop**maintenant**, puis en raison du décalage tooclock (différences dans le temps actuel en fonction de machines de toodifferent), échecs peuvent être observés par intermittence pour hello premières minutes.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-308">If you set hello start time for a SAS too**now**, then due tooclock skew (differences in current time according toodifferent machines), failures may be observed intermittently for hello first few minutes.</span></span> <span data-ttu-id="b4bc6-309">En général, définir toobe de temps de démarrage hello au moins 15 minutes Bonjour passées.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-309">In general, set hello start time toobe at least 15 minutes in hello past.</span></span> <span data-ttu-id="b4bc6-310">ou ne la définissez pas du tout, et elle sera alors valide immédiatement dans tous les cas.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="b4bc6-311">Hello même tooexpiry temps--s’applique généralement, n’oubliez pas que vous pouvez observer des minutes too15 d’horloge décalage dans les deux sens sur demande.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-311">hello same generally applies tooexpiry time as well--remember that you may observe up too15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="b4bc6-312">Pour les clients à l’aide de REST version antérieure too2012-02-12, hello de durée maximale pour un SAS qui ne fait pas référence à une stratégie d’accès stockée est de 1 heure et les stratégies de spécification à long terme que qui échoue.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-312">For clients using a REST version prior too2012-02-12, hello maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="b4bc6-313">**Être spécifique hello ressource toobe est accédé.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-313">**Be specific with hello resource toobe accessed.**</span></span> <span data-ttu-id="b4bc6-314">Meilleure pratique de sécurité est tooprovide un utilisateur avec des privilèges requis minimaux hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-314">A security best practice is tooprovide a user with hello minimum required privileges.</span></span> <span data-ttu-id="b4bc6-315">Si un utilisateur a seulement besoin d’un accès en lecture tooa seule entité, puis accordez-leur les toothat des accès en lecture seule entité et l’accès en lecture/écriture/suppression pas tooall entités.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-315">If a user only needs read access tooa single entity, then grant them read access toothat single entity, and not read/write/delete access tooall entities.</span></span> <span data-ttu-id="b4bc6-316">Cela vous permet également de réduire les dommages hello si une SAP est compromise, car hello SAS a moins de puissance entre les mains d’une personne malveillante hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-316">This also helps lessen hello damage if a SAS is compromised because hello SAS has less power in hello hands of an attacker.</span></span>
7. <span data-ttu-id="b4bc6-317">**Sachez que toute utilisation de votre compte sera facturée, y compris pour les signatures d'accès partagé.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="b4bc6-318">Si vous fournissez un accès en écriture tooa blob, un utilisateur peut choisir un blob de 200 Go tooupload.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-318">If you provide write access tooa blob, a user may choose tooupload a 200GB blob.</span></span> <span data-ttu-id="b4bc6-319">Si vous leur avez donné accès en lecture ainsi, ils peuvent choisir toodownload 10 fois, souscrivant 2 To en sortie le coût pour vous.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-319">If you've given them read access as well, they may choose toodownload it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="b4bc6-320">Là encore, fournir des autorisations limitées toohelp limiter les actions des utilisateurs malveillants d’hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-320">Again, provide limited permissions toohelp mitigate hello potential actions of malicious users.</span></span> <span data-ttu-id="b4bc6-321">Utilisez éphémères SAS tooreduce cette menace (mais penser horloge inclinaison sur l’heure de fin hello).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-321">Use short-lived SAS tooreduce this threat (but be mindful of clock skew on hello end time).</span></span>
8. <span data-ttu-id="b4bc6-322">**Validez les données écrites avec une signature d'accès partagé.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="b4bc6-323">Lorsqu’une application cliente écrit le compte de stockage de données tooyour, gardez à l’esprit qu’il peut y avoir des problèmes avec ces données.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-323">When a client application writes data tooyour storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="b4bc6-324">Si votre application nécessite que les données être validées ou autorisées avant qu’il soit prêt toouse, vous devez effectuer cette validation une fois les données de salutation sont écrit et avant d’être utilisée par votre application.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-324">If your application requires that that data be validated or authorized before it is ready toouse, you should perform this validation after hello data is written and before it is used by your application.</span></span> <span data-ttu-id="b4bc6-325">Cette pratique protège également contre les données endommagées ou malveillantes écrites tooyour compte, soit par un utilisateur qui correctement acquis hello SAP, soit par un utilisateur d’exploiter une fuite SAP.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-325">This practice also protects against corrupt or malicious data being written tooyour account, either by a user who properly acquired hello SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="b4bc6-326">**N'utilisez pas toujours une signature d'accès partagé.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-326">**Don't always use SAS.**</span></span> <span data-ttu-id="b4bc6-327">Parfois, les risques de hello associés à une opération particulière par rapport à votre compte de stockage dépassent les avantages de hello de SAP.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-327">Sometimes hello risks associated with a particular operation against your storage account outweigh hello benefits of SAS.</span></span> <span data-ttu-id="b4bc6-328">Pour ces opérations, créer un service de couche intermédiaire qui écrit le compte de stockage tooyour après avoir effectué l’entreprise la règle de validation, l’authentification et l’audit.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-328">For such operations, create a middle-tier service that writes tooyour storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="b4bc6-329">En outre, il est parfois plus simple accès toomanage par d’autres moyens.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-329">Also, sometimes it's simpler toomanage access in other ways.</span></span> <span data-ttu-id="b4bc6-330">Par exemple, si vous souhaitez toomake tous les objets BLOB dans un conteneur accessibles publiquement en lecture, vous pouvez apporter hello conteneur Public, habituellement, un client de tooevery SAS pour l’accès.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-330">For example, if you want toomake all blobs in a container publically readable, you can make hello container Public, rather than providing a SAS tooevery client for access.</span></span>
10. <span data-ttu-id="b4bc6-331">**Utilisez stockage Analytique toomonitor votre application.**</span><span class="sxs-lookup"><span data-stu-id="b4bc6-331">**Use Storage Analytics toomonitor your application.**</span></span> <span data-ttu-id="b4bc6-332">Vous pouvez utiliser la journalisation et tooobserve métriques une surutilisation échecs d’authentification en raison de la panne tooan votre SAS fournisseur service ou toohello par inadvertance la suppression d’une stratégie d’accès stockée.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-332">You can use logging and metrics tooobserve any spike in authentication failures due tooan outage in your SAS provider service or toohello inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="b4bc6-333">Consultez hello [Blog de l’équipe stockage Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-333">See hello [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="b4bc6-334">Exemples de SAP</span><span class="sxs-lookup"><span data-stu-id="b4bc6-334">SAS examples</span></span>
<span data-ttu-id="b4bc6-335">Vous trouverez ci-dessous des exemples des deux types de signatures d’accès partagé, SAP de compte et SAP de service.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="b4bc6-336">toorun ces exemples c#, vous devez hello tooreference suivant les packages NuGet dans votre projet :</span><span class="sxs-lookup"><span data-stu-id="b4bc6-336">toorun these C# examples, you need tooreference hello following NuGet packages in your project:</span></span>

* <span data-ttu-id="b4bc6-337">[Bibliothèque de Client de stockage Azure pour .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x ou version ultérieure (compte toouse SAS).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (toouse account SAS).</span></span>
* [<span data-ttu-id="b4bc6-338">Gestionnaire de configuration Azure</span><span class="sxs-lookup"><span data-stu-id="b4bc6-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="b4bc6-339">Pour obtenir des exemples supplémentaires qui montrent comment toocreate et test d’une SAS, consultez [Azure des exemples de Code pour le stockage](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="b4bc6-339">For additional examples that show how toocreate and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="b4bc6-340">Exemple : création et utilisation d’une SAP de compte</span><span class="sxs-lookup"><span data-stu-id="b4bc6-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="b4bc6-341">Hello exemple de code suivant crée un compte d’associations de sécurité sont valides pour hello Blob et les services de fichiers, et donne hello client les autorisations de lecture, écriture et liste tooaccess au niveau du service API.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-341">hello following code example creates an account SAS that is valid for hello Blob and File services, and gives hello client permissions read, write, and list permissions tooaccess service-level APIs.</span></span> <span data-ttu-id="b4bc6-342">le compte Hello SAS restreint hello protocole tooHTTPS, afin de la demande de hello doit être effectuée à l’aide de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-342">hello account SAS restricts hello protocol tooHTTPS, so hello request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // toocreate hello account SAS, you need toouse your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for hello account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return hello SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="b4bc6-343">toouse hello compte SAP tooaccess niveau de service API pour le service d’objets Blob hello, construire un objet Blob client hello SAS et hello du point de terminaison de stockage Blob pour votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-343">toouse hello account SAS tooaccess service-level APIs for hello Blob service, construct a Blob client object using hello SAS and hello Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using hello SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and hello account name toocreate a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set hello service properties for hello Blob client created with hello SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // hello permissions granted by hello account SAS also permit you tooretrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="b4bc6-344">Exemple : création d’une stratégie d’accès stockée</span><span class="sxs-lookup"><span data-stu-id="b4bc6-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="b4bc6-345">Hello de code suivant crée une stratégie d’accès stockée sur un conteneur.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-345">hello following code creates a stored access policy on a container.</span></span> <span data-ttu-id="b4bc6-346">Vous pouvez utiliser des contraintes de toospecify hello accès stratégie pour un service SAS sur le conteneur de hello ou ses objets BLOB.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-346">You can use hello access policy toospecify constraints for a service SAS on hello container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // hello access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
        // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get hello container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add hello new policy toohello container's permissions, and set hello container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="b4bc6-347">Exemple : création d’une SAP de service sur un conteneur</span><span class="sxs-lookup"><span data-stu-id="b4bc6-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="b4bc6-348">Hello suivante de code crée une SAP sur un conteneur.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-348">hello following code creates a SAS on a container.</span></span> <span data-ttu-id="b4bc6-349">Si le nom hello d’une stratégie d’accès stockée existante est fourni, cette stratégie est associée à hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-349">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="b4bc6-350">Si aucune stratégie d’accès stockée n’est fourni, code de hello crée ensuite un SAS ad hoc sur le conteneur de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-350">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate hello shared access signature on hello container, setting hello constraints directly on hello signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello container. In this case, all of hello constraints for the
        // shared access signature are specified on hello stored access policy, which is provided by name.
        // It is also possible toospecify some constraints on an ad-hoc SAS and others on hello stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="b4bc6-351">Exemple : création d’une SAP de service sur un objet blob</span><span class="sxs-lookup"><span data-stu-id="b4bc6-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="b4bc6-352">Hello suivante de code crée une SAP sur un objet blob.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-352">hello following code creates a SAS on a blob.</span></span> <span data-ttu-id="b4bc6-353">Si le nom hello d’une stratégie d’accès stockée existante est fourni, cette stratégie est associée à hello SAS.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-353">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="b4bc6-354">Si aucune stratégie d’accès stockée n’est fourni, code de hello crée ensuite un SAS ad hoc sur l’objet blob de hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-354">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference tooa blob within hello container.
    // Note that hello blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate hello shared access signature on hello blob, setting hello constraints directly on hello signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello blob. In this case, all of hello constraints for the
        // shared access signature are specified on hello container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="b4bc6-355">Conclusion</span><span class="sxs-lookup"><span data-stu-id="b4bc6-355">Conclusion</span></span>
<span data-ttu-id="b4bc6-356">Signatures d’accès partagé sont utiles pour fournir des autorisations limitées tooclients de compte de stockage tooyour qui ne devrait pas de clé de compte hello.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-356">Shared access signatures are useful for providing limited permissions tooyour storage account tooclients that should not have hello account key.</span></span> <span data-ttu-id="b4bc6-357">Par conséquent, ils sont une partie essentielle hello du modèle de sécurité pour les applications qui utilisent le stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-357">As such, they are a vital part of hello security model for any application using Azure Storage.</span></span> <span data-ttu-id="b4bc6-358">Si vous suivez les recommandations hello répertoriées ici, vous pouvez utiliser SAS tooprovide une plus grande souplesse de tooresources d’accès dans votre compte de stockage, sans compromettre la sécurité hello de votre application.</span><span class="sxs-lookup"><span data-stu-id="b4bc6-358">If you follow hello best practices listed here, you can use SAS tooprovide greater flexibility of access tooresources in your storage account, without compromising hello security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b4bc6-359">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b4bc6-359">Next Steps</span></span>
* [<span data-ttu-id="b4bc6-360">Gérer les objets BLOB et l’accès en lecture anonyme toocontainers</span><span class="sxs-lookup"><span data-stu-id="b4bc6-360">Manage anonymous read access toocontainers and blobs</span></span>](../blobs/storage-manage-access-to-resources.md)
* [<span data-ttu-id="b4bc6-361">Délégation de l'accès avec une signature d'accès partagé</span><span class="sxs-lookup"><span data-stu-id="b4bc6-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="b4bc6-362">Présentation des signatures d’accès partagé de table et de file d’attente</span><span class="sxs-lookup"><span data-stu-id="b4bc6-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)
