---
title: "Que faire en cas de panne d’Azure Storage | Microsoft Docs"
description: "Que faire en cas de panne d’Azure Storage"
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: 83ab487f382eb84aa64b927bdf5560eec5cbbd6d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="what-to-do-if-an-azure-storage-outage-occurs"></a><span data-ttu-id="2f024-103">Que faire en cas de panne d’Azure Storage</span><span class="sxs-lookup"><span data-stu-id="2f024-103">What to do if an Azure Storage outage occurs</span></span>
<span data-ttu-id="2f024-104">Microsoft s’engage à déployer tous les efforts nécessaires pour garantir en permanence la disponibilité de ses services.</span><span class="sxs-lookup"><span data-stu-id="2f024-104">At Microsoft, we work hard to make sure our services are always available.</span></span> <span data-ttu-id="2f024-105">Il arrive parfois que des phénomènes incontrôlables entraînent des interruptions de service non planifiés dans une ou plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="2f024-105">Sometimes, forces beyond our control impact us in ways that cause unplanned service outages in one or more regions.</span></span> <span data-ttu-id="2f024-106">Pour vous aider à faire face à ces rares occurrences, vous trouverez ici quelques conseils généraux pour les services Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="2f024-106">To help you handle these rare occurrences, we provide the following high-level guidance for Azure Storage services.</span></span>

## <a name="how-to-prepare"></a><span data-ttu-id="2f024-107">Préparation</span><span class="sxs-lookup"><span data-stu-id="2f024-107">How to prepare</span></span>
<span data-ttu-id="2f024-108">Il est essentiel que chaque client veille à élaborer son propre plan de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="2f024-108">It is critical for every customer to prepare their own disaster recovery plan.</span></span> <span data-ttu-id="2f024-109">L’effort de récupération suite à une panne de stockage implique généralement l’intervention du personnel opérationnel ainsi que l’application de procédures automatisées afin de rétablir le bon fonctionnement de vos applications.</span><span class="sxs-lookup"><span data-stu-id="2f024-109">The effort to recover from a storage outage typically involves both operations personnel and automated procedures in order to reactivate your applications in a functioning state.</span></span> <span data-ttu-id="2f024-110">Reportez-vous à la documentation Azure ci-dessous pour créer votre propre plan de récupération d’urgence :</span><span class="sxs-lookup"><span data-stu-id="2f024-110">Please refer to the Azure documentation below to build your own disaster recovery plan:</span></span>

* [<span data-ttu-id="2f024-111">Récupération d’urgence et haute disponibilité pour les applications Azure</span><span class="sxs-lookup"><span data-stu-id="2f024-111">Disaster recovery and high availability for Azure applications</span></span>](../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md)
* [<span data-ttu-id="2f024-112">Guide technique de la résilience Azure</span><span class="sxs-lookup"><span data-stu-id="2f024-112">Azure resiliency technical guidance</span></span>](../resiliency/resiliency-technical-guidance.md)
* [<span data-ttu-id="2f024-113">Service Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="2f024-113">Azure Site Recovery service</span></span>](https://azure.microsoft.com/services/site-recovery/)
* [<span data-ttu-id="2f024-114">Réplication Azure Storage</span><span class="sxs-lookup"><span data-stu-id="2f024-114">Azure Storage replication</span></span>](storage-redundancy.md)
* [<span data-ttu-id="2f024-115">Service Azure Backup</span><span class="sxs-lookup"><span data-stu-id="2f024-115">Azure Backup service</span></span>](https://azure.microsoft.com/services/backup/)

## <a name="how-to-detect"></a><span data-ttu-id="2f024-116">Mode de détection</span><span class="sxs-lookup"><span data-stu-id="2f024-116">How to detect</span></span>
<span data-ttu-id="2f024-117">Pour déterminer l’état du service Azure, il est recommandé de s’abonner au [tableau de bord d’état du service Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="2f024-117">The recommended way to determine the Azure service status is to subscribe to the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

## <a name="what-to-do-if-a-storage-outage-occurs"></a><span data-ttu-id="2f024-118">Que faire en cas de panne d’Azure Storage</span><span class="sxs-lookup"><span data-stu-id="2f024-118">What to do if a Storage outage occurs</span></span>
<span data-ttu-id="2f024-119">Si un ou plusieurs services Azure Storage sont provisoirement indisponibles dans une ou plusieurs régions, deux options s’offrent à vous.</span><span class="sxs-lookup"><span data-stu-id="2f024-119">If one or more Storage services are temporarily unavailable at one or more regions, there are two options for you to consider.</span></span> <span data-ttu-id="2f024-120">Si vous souhaitez un accès immédiat à vos données, envisagez l’Option 2.</span><span class="sxs-lookup"><span data-stu-id="2f024-120">If you desire immediate access to your data, please consider Option 2.</span></span>

### <a name="option-1-wait-for-recovery"></a><span data-ttu-id="2f024-121">Option 1: attente de récupération</span><span class="sxs-lookup"><span data-stu-id="2f024-121">Option 1: Wait for recovery</span></span>
<span data-ttu-id="2f024-122">Dans ce cas, aucune action n’est requise de votre part.</span><span class="sxs-lookup"><span data-stu-id="2f024-122">In this case, no action on your part is required.</span></span> <span data-ttu-id="2f024-123">Nous travaillons assidûment à la restauration de la disponibilité du service Azure.</span><span class="sxs-lookup"><span data-stu-id="2f024-123">We are working diligently to restore the Azure service availability.</span></span> <span data-ttu-id="2f024-124">Vous pouvez analyser l’état actuel du service dans le [tableau de bord d’état du service Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="2f024-124">You can monitor the service status on the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

### <a name="option-2-copy-data-from-secondary"></a><span data-ttu-id="2f024-125">Option 2: copie de données à partir de la base de données secondaire</span><span class="sxs-lookup"><span data-stu-id="2f024-125">Option 2: Copy data from secondary</span></span>
<span data-ttu-id="2f024-126">Si vous avez choisi le [stockage géo-redondant avec accès en lecture (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommandé) pour vos comptes de stockage, vous bénéficierez d’un accès en lecture à vos données à partir de la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="2f024-126">If you chose [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended) for your storage accounts, you will have read access to your data from the secondary region.</span></span> <span data-ttu-id="2f024-127">Vous pouvez utiliser des outils tels que [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md) et la [bibliothèque de déplacement des données Azure](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) pour copier des données de la région secondaire dans un autre compte de stockage situé dans une région non compromise, puis pointer vos applications vers ce compte de stockage pour bénéficier d’un accès en lecture et en écriture.</span><span class="sxs-lookup"><span data-stu-id="2f024-127">You can use tools such as [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), and the [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) to copy data from the secondary region into another storage account in an unimpacted region, and then point your applications to that storage account for both read and write availability.</span></span>

## <a name="what-to-expect-if-a-storage-failover-occurs"></a><span data-ttu-id="2f024-128">Que se passe-t-il en cas de basculement d’Azure Storage ?</span><span class="sxs-lookup"><span data-stu-id="2f024-128">What to expect if a Storage failover occurs</span></span>
<span data-ttu-id="2f024-129">Si vous avez choisi le [stockage géo-redondant (GRS)](storage-redundancy.md#geo-redundant-storage) ou le [stockage géo-redondant avec accès en lecture (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommandé), Azure Storage conservera vos données dans deux régions (primaire et secondaire).</span><span class="sxs-lookup"><span data-stu-id="2f024-129">If you chose [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) or [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended), Azure Storage will keep your data durable in two regions (primary and secondary).</span></span> <span data-ttu-id="2f024-130">Azure Storage conserve constamment plusieurs réplicas de vos données dans les deux régions.</span><span class="sxs-lookup"><span data-stu-id="2f024-130">In both regions, Azure Storage constantly maintains multiple replicas of your data.</span></span>

<span data-ttu-id="2f024-131">Lorsqu’un sinistre régional affecte votre région primaire, nous allons tout d’abord tenter de restaurer le service dans cette région.</span><span class="sxs-lookup"><span data-stu-id="2f024-131">When a regional disaster affects your primary region, we will first try to restore the service in that region.</span></span> <span data-ttu-id="2f024-132">Selon de la nature de l’incident et son impact, il peut arriver dans de rares circonstances que ne soyons pas en mesure de restaurer la région primaire.</span><span class="sxs-lookup"><span data-stu-id="2f024-132">Dependent upon the nature of the disaster and its impacts, in some rare occasions we may not be able to restore the primary region.</span></span> <span data-ttu-id="2f024-133">À ce stade, nous procéderons à un basculement géographique.</span><span class="sxs-lookup"><span data-stu-id="2f024-133">At that point, we will perform a geo-failover.</span></span> <span data-ttu-id="2f024-134">La réplication des données entre les régions est un processus asynchrone qui peut impliquer un certain délai ; il est donc possible que les modifications qui n’ont pas encore été répliquées dans la région secondaire soient perdues.</span><span class="sxs-lookup"><span data-stu-id="2f024-134">The cross-region data replication is an asynchronous process which can involve a delay, so it is possible that changes that have not yet been replicated to the secondary region may be lost.</span></span> <span data-ttu-id="2f024-135">Vous pouvez interroger [« l’heure de dernière synchronisation » de votre compte de stockage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) pour obtenir des détails sur l’état de la réplication.</span><span class="sxs-lookup"><span data-stu-id="2f024-135">You can query the ["Last Sync Time" of your storage account](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) to get details on the replication status.</span></span>

<span data-ttu-id="2f024-136">Quelques points relatifs à l’expérience de basculement géographique du stockage :</span><span class="sxs-lookup"><span data-stu-id="2f024-136">A couple of points regarding the storage geo-failover experience:</span></span>

* <span data-ttu-id="2f024-137">Le basculement géographique du stockage est déclenché uniquement par l’équipe Azure Storage et ne nécessite donc aucune intervention du client.</span><span class="sxs-lookup"><span data-stu-id="2f024-137">Storage geo-failover will only be triggered by the Azure Storage team – there is no customer action required.</span></span>
* <span data-ttu-id="2f024-138">Vos points de terminaison de service de stockage existant pour les objets blob, les tables, les files d’attente et les fichiers restent les mêmes après le basculement ; l’entrée DNS devra être mise à jour pour basculer de la région primaire à la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="2f024-138">Your existing storage service endpoints for blobs, tables, queues, and files will remain the same after the failover; the DNS entry will need to be updated to switch from the primary region to the secondary region.</span></span>
* <span data-ttu-id="2f024-139">Avant et pendant le basculement géographique, vous n’avez pas d’accès en écriture à votre compte de stockage en raison de l’impact de l’incident, mais vous pouvez toujours lire les données à partir de la base de données secondaire si votre compte de stockage a été configuré en tant que RA-GRS.</span><span class="sxs-lookup"><span data-stu-id="2f024-139">Before and during the geo-failover, you won't have write access to your storage account due to the impact of the disaster but you can still read from the secondary if your storage account has been configured as RA-GRS.</span></span>
* <span data-ttu-id="2f024-140">Une fois le basculement géographique effectué et les modifications DNS propagées, vous bénéficiez de nouveau d’un accès en lecture-écriture à votre compte de stockage. L’emplacement pointé est votre point de terminaison secondaire précédent.</span><span class="sxs-lookup"><span data-stu-id="2f024-140">When the geo-failover has been completed and the DNS changes propagated, read and write access to your storage account will be resumed; this points to what used to be your secondary endpoint.</span></span> 
* <span data-ttu-id="2f024-141">Notez que vous bénéficierez d’un accès en écriture si un stockage GRS ou RA-GRS est configuré pour le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="2f024-141">Note that you will have write access if you have GRS or RA-GRS configured for the storage account.</span></span> 
* <span data-ttu-id="2f024-142">Vous pouvez interroger [« l’heure du dernier basculement géographique » de votre compte de stockage](https://msdn.microsoft.com/library/azure/ee460802.aspx) pour obtenir plus de détails.</span><span class="sxs-lookup"><span data-stu-id="2f024-142">You can query ["Last Geo Failover Time" of your storage account](https://msdn.microsoft.com/library/azure/ee460802.aspx) to get more details.</span></span>
* <span data-ttu-id="2f024-143">Après le basculement, votre compte de stockage sera entièrement opérationnel, mais dans un état « dégradé », car il sera en réalité hébergé dans une région autonome sans aucune géoréplication possible.</span><span class="sxs-lookup"><span data-stu-id="2f024-143">After the failover, your storage account will be fully functioning, but in a "degraded" status, as it is actually hosted in a standalone region with no geo-replication possible.</span></span> <span data-ttu-id="2f024-144">Pour atténuer ce risque, nous restaurerons la région primaire d’origine et effectuerons une géo-restauration afin de restaurer l’état d’origine.</span><span class="sxs-lookup"><span data-stu-id="2f024-144">To mitigate this risk, we will restore the original primary region and then do a geo-failback to restore the original state.</span></span> <span data-ttu-id="2f024-145">Si la région primaire d’origine est irrécupérable, nous allouerons une autre région secondaire.</span><span class="sxs-lookup"><span data-stu-id="2f024-145">If the original primary region is unrecoverable, we will allocate another secondary region.</span></span>
  <span data-ttu-id="2f024-146">Pour plus d’informations sur l’infrastructure de géo-réplication d’Azure Storage, consultez l’article sur le blog de l’équipe Azure Storage relatif aux [options de redondance et à RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="2f024-146">For more details on the infrastructure of Azure Storage geo replication, please refer to the article on the Storage team blog about [Redundancy Options and RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

## <a name="best-practices-for-protecting-your-data"></a><span data-ttu-id="2f024-147">Meilleures pratiques pour la protection de vos données</span><span class="sxs-lookup"><span data-stu-id="2f024-147">Best Practices for protecting your data</span></span>
<span data-ttu-id="2f024-148">Il existe des approches recommandées pour sauvegarder régulièrement vos données de stockage.</span><span class="sxs-lookup"><span data-stu-id="2f024-148">There are some recommended approaches to back up your storage data on a regular basis.</span></span>

* <span data-ttu-id="2f024-149">Disques de machine virtuelle : utilisez le [service Azure Backup](https://azure.microsoft.com/services/backup/) pour sauvegarder les disques de machine virtuelle utilisées par vos machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="2f024-149">VM Disks – Use the [Azure Backup service](https://azure.microsoft.com/services/backup/) to back up the VM disks used by your Azure virtual machines.</span></span>
* <span data-ttu-id="2f024-150">Objets blob de blocs : créez un [instantané](https://msdn.microsoft.com/library/azure/hh488361.aspx) de chaque objet blob de blocs ou copiez les objets blob vers un autre compte de stockage dans une autre région à l’aide d’[AzCopy](storage-use-azcopy.md), d’[Azure PowerShell](storage-powershell-guide-full.md) ou de la [bibliothèque de déplacement de données Azure](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span><span class="sxs-lookup"><span data-stu-id="2f024-150">Block blobs –Create a [snapshot](https://msdn.microsoft.com/library/azure/hh488361.aspx) of each block blob, or copy the blobs to another storage account in another region using [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), or the [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span></span>
* <span data-ttu-id="2f024-151">Tables: utilisez [AzCopy](storage-use-azcopy.md) pour exporter les données de table vers un autre compte de stockage dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="2f024-151">Tables – use [AzCopy](storage-use-azcopy.md) to export the table data into another storage account in another region.</span></span>
* <span data-ttu-id="2f024-152">Fichiers : utilisez [AzCopy](storage-use-azcopy.md) ou [Azure PowerShell](storage-powershell-guide-full.md) pour copier vos fichiers vers un autre compte de stockage dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="2f024-152">Files – use [AzCopy](storage-use-azcopy.md) or [Azure PowerShell](storage-powershell-guide-full.md) to copy your files to another storage account in another region.</span></span>

<span data-ttu-id="2f024-153">Pour plus d’informations sur la création d’applications tirant pleinement parti de la fonctionnalité RA-GRS, consultez [Conception d’applications hautement disponibles à l’aide du stockage RA-GRS](storage-designing-ha-apps-with-ragrs.md).</span><span class="sxs-lookup"><span data-stu-id="2f024-153">For information about creating applications that take full advantage of the RA-GRS feature, please check out [Designing Highly Available Applications using RA-GRS Storage](storage-designing-ha-apps-with-ragrs.md)</span></span>

