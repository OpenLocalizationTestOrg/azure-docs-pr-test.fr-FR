---
title: "aaaDesigning les Applications hautement disponibles à l’aide du stockage de géo-redondant Azure avec accès en lecture (RA-GRS) | Documents Microsoft"
description: Comment tooarchitect de stockage Azure RA-GRS toouse une application hautement disponible flexible suffisamment pannes toohandle.
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: e4a9fe7ef33eecd894408b3c1ef59920a248d1bd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-applications-using-ra-grs"></a><span data-ttu-id="10e31-103">Conception d’applications hautement disponibles à l’aide du stockage RA-GRS</span><span class="sxs-lookup"><span data-stu-id="10e31-103">Designing Highly Available Applications using RA-GRS</span></span>

<span data-ttu-id="10e31-104">La fourniture d’une plateforme hautement disponible pour l’hébergement des applications est une caractéristique courante des infrastructures basées sur le cloud.</span><span class="sxs-lookup"><span data-stu-id="10e31-104">A common feature of cloud-based infrastructures is that they provide a highly available platform for hosting applications.</span></span> <span data-ttu-id="10e31-105">Les développeurs d’applications basées sur le cloud doivent prendre en compte avec soin la façon dont tooleverage cette utilisateurs tootheir de plateforme toodeliver applications hautement disponibles.</span><span class="sxs-lookup"><span data-stu-id="10e31-105">Developers of cloud-based applications must consider carefully how tooleverage this platform toodeliver highly available applications tootheir users.</span></span> <span data-ttu-id="10e31-106">Cet article concentre spécifiquement sur la façon dont les développeurs peuvent utiliser hello Azure stockage Read Access Geo Redundant Storage (RA-GRS) toomake leurs applications plus disponibles.</span><span class="sxs-lookup"><span data-stu-id="10e31-106">This article focuses specifically on how developers can use hello Azure Storage Read Access Geo Redundant Storage (RA-GRS) toomake their applications more available.</span></span>

<span data-ttu-id="10e31-107">Quatre options de redondance sont disponibles : le stockage localement redondant (LRS), le stockage redondant dans une zone (ZRS), le stockage géoredondant (GRS) et le stockage géoredondant avec accès en lecture (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="10e31-107">There are four choices for redundancy – LRS (Locally Redundant Storage), ZRS (Zone Redundant Storage), GRS (Geo-Redundant Storage), and RA-GRS (Read Access Geo-Redundant Storage).</span></span> <span data-ttu-id="10e31-108">Nous allons toodiscuss GRS et RA-GRS dans cet article.</span><span class="sxs-lookup"><span data-stu-id="10e31-108">We are going toodiscuss GRS and RA-GRS in this article.</span></span> <span data-ttu-id="10e31-109">Avec GRS, trois copies de vos données sont conservées dans la région principale de hello que vous avez sélectionné lorsque vous configurez le compte de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-109">With GRS, three copies of your data are kept in hello primary region you selected when setting up hello storage account.</span></span> <span data-ttu-id="10e31-110">Trois copies supplémentaires sont conservées de façon asynchrone dans une région secondaire spécifiée par Azure.</span><span class="sxs-lookup"><span data-stu-id="10e31-110">Three additional copies are maintained asynchronously in a secondary region specified by Azure.</span></span> <span data-ttu-id="10e31-111">Est de RA-GRS hello même chose que GRS, sauf que vous avez copie secondaire de toohello accès en lecture.</span><span class="sxs-lookup"><span data-stu-id="10e31-111">RA-GRS is hello same thing as GRS except that you have read access toohello secondary copy.</span></span> <span data-ttu-id="10e31-112">Pour plus d’informations sur les différentes options de redondance de stockage Azure hello, consultez [réplication de stockage Azure](https://docs.microsoft.com/en-us/azure/storage/storage-redundancy).</span><span class="sxs-lookup"><span data-stu-id="10e31-112">For more information about hello different Azure Storage redundancy options, see [Azure Storage replication](https://docs.microsoft.com/en-us/azure/storage/storage-redundancy).</span></span> <span data-ttu-id="10e31-113">article de réplication Hello montre également les couplages hello de régions principales et secondaires de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-113">hello replication article also shows hello pairings of hello primary and secondary regions.</span></span>

<span data-ttu-id="10e31-114">Il existe des extraits de code inclus dans cet article et un exemple complet en lien tooa à fin hello que vous pouvez télécharger et exécuter.</span><span class="sxs-lookup"><span data-stu-id="10e31-114">There are code snippets included in this article, and a link tooa complete sample at hello end that you can download and run.</span></span>

## <a name="key-features-of-ra-grs"></a><span data-ttu-id="10e31-115">Fonctionnalités clés du stockage RA-GRS</span><span class="sxs-lookup"><span data-stu-id="10e31-115">Key features of RA-GRS</span></span>

<span data-ttu-id="10e31-116">Avant d’aborder la façon de toouse stockage de RA-GRS, nous allons parler de ses propriétés et le comportement.</span><span class="sxs-lookup"><span data-stu-id="10e31-116">Before we talk about how toouse RA-GRS storage, let's talk about its properties and behavior.</span></span>

* <span data-ttu-id="10e31-117">Le stockage Azure conserve une copie en lecture seule des données de hello que vous stockez dans votre région primaire dans une région secondaire ; comme indiqué ci-dessus, le service de stockage hello détermine emplacement hello de région secondaire de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-117">Azure Storage maintains a read-only copy of hello data you store in your primary region in a secondary region; as noted above, hello storage service determines hello location of hello secondary region.</span></span>

* <span data-ttu-id="10e31-118">copie en lecture seule de Hello est [cohérente](https://en.wikipedia.org/wiki/Eventual_consistency) avec des données dans la région principale de hello hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-118">hello read-only copy is [eventually consistent](https://en.wikipedia.org/wiki/Eventual_consistency) with hello data in hello primary region.</span></span>

* <span data-ttu-id="10e31-119">Pour les objets BLOB, tables et files d’attente, vous pouvez interroger la région secondaire hello pour un *dernière heure de synchronisation* valeur qui vous indique lorsque la réplication dernière hello à partir de la région de hello toohello principal secondaire s’est produite.</span><span class="sxs-lookup"><span data-stu-id="10e31-119">For blobs, tables, and queues, you can query hello secondary region for a *Last Sync Time* value that tells you when hello last replication from hello primary toohello secondary region occurred.</span></span> <span data-ttu-id="10e31-120">(Cette fonctionnalité n’est pas prise en charge pour le stockage de fichiers Azure, qui n’a pas la redondance RA-GRS pour l’instant.)</span><span class="sxs-lookup"><span data-stu-id="10e31-120">(This is not supported for Azure File storage, which doesn't have RA-GRS redundancy at this time.)</span></span>

* <span data-ttu-id="10e31-121">Vous pouvez utiliser hello bibliothèque cliente de stockage toointeract avec les données de salutation dans une région de hello principal ou secondaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-121">You can use hello Storage Client Library toointeract with hello data in either hello primary or secondary region.</span></span> <span data-ttu-id="10e31-122">Vous pouvez également rediriger les demandes de lecture automatiquement toohello la région secondaire si l’expiration d’une région primaire toohello de demande de lecture.</span><span class="sxs-lookup"><span data-stu-id="10e31-122">You can also redirect read requests automatically toohello secondary region if a read request toohello primary region times out.</span></span>

* <span data-ttu-id="10e31-123">S’il existe un problème majeur affectant l’accessibilité hello de données hello dans la région principale de hello, hello équipe Azure peut déclencher un basculement géographique, à quel point les entrées DNS hello pointant vers la région principale de toohello sera toohello toopoint modifié la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-123">If there is a major issue affecting hello accessibility of hello data in hello primary region, hello Azure team may trigger a geo-failover, at which point hello DNS entries pointing toohello primary region will be changed toopoint toohello secondary region.</span></span>

* <span data-ttu-id="10e31-124">En cas d’un basculement géographique, Azure sera sélectionner un nouvel emplacement secondaire répliquer emplacement toothat des données hello, puis pointez hello tooit du entrées DNS secondaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-124">If a geo-failover occurs, Azure will select a new secondary location and replicate hello data toothat location, then point hello secondary DNS entries tooit.</span></span> <span data-ttu-id="10e31-125">point de terminaison secondaire Hello n’est pas disponible tant que compte de stockage hello a terminé la réplication.</span><span class="sxs-lookup"><span data-stu-id="10e31-125">hello secondary endpoint will be unavailable until hello storage account has finished replicating.</span></span> <span data-ttu-id="10e31-126">Pour plus d’informations, consultez [le toodo en cas de panne de stockage Azure](https://docs.microsoft.com/en-us/azure/storage/storage-disaster-recovery-guidance).</span><span class="sxs-lookup"><span data-stu-id="10e31-126">For more information, please see [What toodo if an Azure Storage outage occurs](https://docs.microsoft.com/en-us/azure/storage/storage-disaster-recovery-guidance).</span></span>

## <a name="application-design-considerations-when-using-ra-grs"></a><span data-ttu-id="10e31-127">Considérations relatives à la conception d’applications avec le stockage RA-GRS</span><span class="sxs-lookup"><span data-stu-id="10e31-127">Application design considerations when using RA-GRS</span></span>

<span data-ttu-id="10e31-128">Hello principal de cet article vise tooshow vous comment toodesign une application qui continuera toofunction (bien que dans une capacité limitée) même en cas de hello de sinistre majeur sur les données principales hello center.</span><span class="sxs-lookup"><span data-stu-id="10e31-128">hello main purpose of this article is tooshow you how toodesign an application that will continue toofunction (albeit in a limited capacity) even in hello event of a major disaster at hello primary data center.</span></span> <span data-ttu-id="10e31-129">Pour cela, en ayant votre temporaire de toohandle d’application ou les problèmes d’exécution longue en basculant tooread à partir de la région secondaire hello tant qu’il reste un problème et que cette approche lors de la région principale de hello est à nouveau disponible.</span><span class="sxs-lookup"><span data-stu-id="10e31-129">You do this by having your application toohandle transient or long-running issues by switching tooread from hello secondary region while there is a problem, and switching back when hello primary region is available again.</span></span>

### <a name="using-eventually-consistent-data"></a><span data-ttu-id="10e31-130">Utilisation de données cohérentes</span><span class="sxs-lookup"><span data-stu-id="10e31-130">Using eventually consistent data</span></span>

<span data-ttu-id="10e31-131">Cette solution suppose qu’il tooreturn OK ce qui peut être application appelante toohello de données périmées.</span><span class="sxs-lookup"><span data-stu-id="10e31-131">This proposed solution assumes that it is okay tooreturn what could be stale data toohello calling application.</span></span> <span data-ttu-id="10e31-132">Étant donné que les données secondaires hello soient cohérentes, il est possible que les données de salutation a été écrite toohello principal mais hello toohello de mise à jour secondaire n'avait pas terminé la réplication lors de la région principale de hello est devenu inaccessible.</span><span class="sxs-lookup"><span data-stu-id="10e31-132">Because hello secondary data is eventually consistent, it is possible that hello data was written toohello primary but hello update toohello secondary had not finished replicating when hello primary region became inaccessible.</span></span>

<span data-ttu-id="10e31-133">Par exemple, votre client peut envoyer une mise à jour a réussi, et puis hello principal pourrait tomber en panne avant la mise à jour hello est propagé toohello secondaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-133">For example, your customer could submit an update that is successful, and then hello primary could go down before hello update is propagated toohello secondary.</span></span> <span data-ttu-id="10e31-134">Dans ce cas, si hello client puis données hello tooread, il reçoit des données obsolètes hello au lieu des données de hello mis à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-134">In this case, if hello customer then asks tooread hello data back, he receives hello stale data instead of hello updated data.</span></span> <span data-ttu-id="10e31-135">Vous devez décider si ce n’est acceptable et dans ce cas, comment vous serez un message client de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-135">You must decide if this is acceptable, and if so, how you will message hello customer.</span></span> <span data-ttu-id="10e31-136">Vous verrez comment toocheck hello dernière heure de synchronisation des données secondaires de hello plus loin dans cet article de toosee si hello secondaire est à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-136">You'll see how toocheck hello Last Sync Time on hello secondary data later in this article toosee if hello secondary is up-to-date.</span></span>

### <a name="handling-services-separately-or-all-together"></a><span data-ttu-id="10e31-137">Gestion des services ensemble ou séparément</span><span class="sxs-lookup"><span data-stu-id="10e31-137">Handling services separately or all together</span></span>

<span data-ttu-id="10e31-138">Lorsqu’il y a probablement pas, il est possible toobecome un service non disponible pendant hello d’autres services sont toujours entièrement fonctionnelles.</span><span class="sxs-lookup"><span data-stu-id="10e31-138">While not likely, it is possible for one service toobecome unavailable while hello other services are still fully functional.</span></span> <span data-ttu-id="10e31-139">Vous pouvant handle hello tentatives et le mode lecture seule pour chaque service séparément (objets BLOB, files d’attente, les tables), ou vous pouvez gérer les nouvelles tentatives de façon générique pour tous les services de stockage hello ensemble.</span><span class="sxs-lookup"><span data-stu-id="10e31-139">You can handle hello retries and read-only mode for each service separately (blobs, queues, tables), or you can handle retries generically for all hello storage services together.</span></span>

<span data-ttu-id="10e31-140">Par exemple, si vous utilisez des files d’attente et les objets BLOB dans votre application, vous pouvez décider tooput des erreurs de code séparé toohandle renouvelable pour chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="10e31-140">For example, if you use queues and blobs in your application, you may decide tooput in separate code toohandle retryable errors for each of these.</span></span> <span data-ttu-id="10e31-141">Puis si vous obtenez une nouvelle tentative à partir du service d’objets blob hello, mais le service de file d’attente hello fonctionne toujours, qu’une partie de votre application qui gère les objets BLOB hello sera affectée.</span><span class="sxs-lookup"><span data-stu-id="10e31-141">Then if you get a retry from hello blob service, but hello queue service is still working, only hello part of your application that handles blobs will be impacted.</span></span> <span data-ttu-id="10e31-142">Si vous décidez de toohandle tous les services de stockage retente de façon générique et un service d’objets blob toohello appel renvoie une erreur renouvelable, puis les demandes tooboth hello blob service et le service de file d’attente hello seront affectées.</span><span class="sxs-lookup"><span data-stu-id="10e31-142">If you decide toohandle all storage service retries generically and a call toohello blob service returns a retryable error, then requests tooboth hello blob service and hello queue service will be impacted.</span></span>

<span data-ttu-id="10e31-143">Au final, cela dépend de la complexité de hello de votre application.</span><span class="sxs-lookup"><span data-stu-id="10e31-143">Ultimately, this depends on hello complexity of your application.</span></span> <span data-ttu-id="10e31-144">Vous pouvez décider pas les échecs de hello toohandle par service, mais au lieu de cela tooredirect lire les demandes de tous les services toohello secondaire région de stockage et exécuter l’application hello en mode lecture seule lorsque vous détectez un problème avec n’importe quel service de stockage dans la région principale de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-144">You may decide not toohandle hello failures by service, but instead tooredirect read requests for all storage services toohello secondary region and run hello application in read-only mode when you detect a problem with any storage service in hello primary region.</span></span>

### <a name="other-considerations"></a><span data-ttu-id="10e31-145">Autres points à considérer</span><span class="sxs-lookup"><span data-stu-id="10e31-145">Other considerations</span></span>

<span data-ttu-id="10e31-146">Ceux-ci sont hello autres considérations, nous allons décrire dans reste hello de cet article.</span><span class="sxs-lookup"><span data-stu-id="10e31-146">These are hello other considerations we will discuss in hello rest of this article.</span></span>

*   <span data-ttu-id="10e31-147">La gestion des nouvelles tentatives de demandes de lecture à l’aide du modèle de disjoncteur hello</span><span class="sxs-lookup"><span data-stu-id="10e31-147">Handling retries of read requests using hello Circuit Breaker pattern</span></span>

*   <span data-ttu-id="10e31-148">Données finalement cohérentes et hello dernière heure de synchronisation</span><span class="sxs-lookup"><span data-stu-id="10e31-148">Eventually-consistent data and hello Last Sync Time</span></span>

*   <span data-ttu-id="10e31-149">Test</span><span class="sxs-lookup"><span data-stu-id="10e31-149">Testing</span></span>

## <a name="running-your-application-in-read-only-mode"></a><span data-ttu-id="10e31-150">Exécution de votre application en mode lecture seule</span><span class="sxs-lookup"><span data-stu-id="10e31-150">Running your application in read-only mode</span></span>

<span data-ttu-id="10e31-151">toouse stockage de RA-GRS, doit être en mesure de toohandle les deux échoué de demandes de lecture et mise à jour de demandes ayant échoué (avec mise à jour dans ce cas ce qui signifie que les insertions, mises à jour et suppressions).</span><span class="sxs-lookup"><span data-stu-id="10e31-151">toouse RA-GRS storage, you must be able toohandle both failed read requests and failed update requests (with update in this case meaning inserts, updates, and deletions).</span></span> <span data-ttu-id="10e31-152">Si hello centre de données principal tombe en panne, de lecture les demandes peuvent être le centre de données secondaire toohello redirigé, mais les demandes de mise à jour ne peut pas car hello secondaire est en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-152">If hello primary data center fails, read requests can be redirected toohello secondary data center, but update requests cannot because hello secondary is read only.</span></span> <span data-ttu-id="10e31-153">Pour cette raison, vous devez certaines toorun de façon à votre application en mode lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-153">For this reason, you need some way toorun your application in read-only mode.</span></span>

<span data-ttu-id="10e31-154">Par exemple, vous pouvez définir un indicateur qui sera vérifié avant l’envoi de n’importe quel service de stockage toohello demandes mise à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-154">For example, you can set a flag that will be checked before submitting any update requests toohello storage service.</span></span> <span data-ttu-id="10e31-155">Lorsqu’une des demandes de mise à jour hello est fourni par le biais, vous pouvez ignorer et retourner un client toohello de réponse appropriée.</span><span class="sxs-lookup"><span data-stu-id="10e31-155">When one of hello update requests comes through, you can skip it and return an appropriate response toohello customer.</span></span> <span data-ttu-id="10e31-156">Vous pouvez même souhaitez toodisable totalement de certaines fonctionnalités jusqu'à ce que hello problème est résolu et informer les utilisateurs que ces fonctionnalités sont temporairement indisponibles.</span><span class="sxs-lookup"><span data-stu-id="10e31-156">You may even want toodisable certain features altogether until hello problem is resolved and notify users that those features are temporarily unavailable.</span></span>

<span data-ttu-id="10e31-157">Si vous décidez de toohandle des erreurs pour chaque service séparément, vous devez également toohandle hello capacité toorun votre application en mode lecture seule par service.</span><span class="sxs-lookup"><span data-stu-id="10e31-157">If you decide toohandle errors for each service separately, you will also need toohandle hello ability toorun your application in read-only mode by service.</span></span> <span data-ttu-id="10e31-158">Vous pouvez avoir des indicateurs en lecture seule pour chaque service qui peut être activée et désactivée et handle hello indicateur approprié dans hello aux emplacements appropriés dans votre code.</span><span class="sxs-lookup"><span data-stu-id="10e31-158">You could have read-only flags for each service that can be enabled and disabled and handle hello appropriate flag in hello appropriate places in your code.</span></span>

<span data-ttu-id="10e31-159">En cours toorun en mesure de votre application en mode lecture seule a un autre avantage de côté : elle vous donne hello capacité tooensure des fonctionnalités limitées au cours d’une mise à niveau de l’application principale.</span><span class="sxs-lookup"><span data-stu-id="10e31-159">Being able toorun your application in read-only mode has another side benefit – it gives you hello ability tooensure limited functionality during a major application upgrade.</span></span> <span data-ttu-id="10e31-160">Vous pouvez déclencher toorun de votre application dans en lecture seule en mode et toohello de point de centre de données secondaire, vous être assuré de la que personne n’accède aux données hello dans la région principale de hello lorsque vous effectuez des mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="10e31-160">You can trigger your application toorun in read-only mode and point toohello secondary data center, ensuring nobody is accessing hello data in hello primary region while you're making upgrades.</span></span>

## <a name="handling-updates-when-running-in-read-only-mode"></a><span data-ttu-id="10e31-161">Gestion des mises à jour lors d’une exécution en mode lecture seule</span><span class="sxs-lookup"><span data-stu-id="10e31-161">Handling updates when running in read-only mode</span></span>

<span data-ttu-id="10e31-162">Il existe de nombreuses façons les demandes de mise à jour toohandle lors de l’exécution en mode lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-162">There are many ways toohandle update requests when running in read-only mode.</span></span> <span data-ttu-id="10e31-163">Nous n’abordons pas ce point de façon complète, mais vous pouvez généralement prendre quelques modèles en considération.</span><span class="sxs-lookup"><span data-stu-id="10e31-163">We won't cover this comprehensively, but generally, there are a couple of patterns that you consider.</span></span>

1.  <span data-ttu-id="10e31-164">Vous pouvez répondre tooyour utilisateur et en leur indiquant que les mises à jour ne sont pas actuellement autorisés.</span><span class="sxs-lookup"><span data-stu-id="10e31-164">You can respond tooyour user and tell them you are not currently accepting updates.</span></span> <span data-ttu-id="10e31-165">Par exemple, un système de gestion des contacts peut activer les informations de contact clients tooaccess mais pas mettre à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-165">For example, a contact management system could enable customers tooaccess contact information but not make updates.</span></span>

2.  <span data-ttu-id="10e31-166">Vous pouvez empiler vos mises à jour dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="10e31-166">You can enqueue your updates in another region.</span></span> <span data-ttu-id="10e31-167">Dans ce cas, vous serez votre file d’attente tooa de mise à jour en attente les demandes d’écriture dans une autre région et puis ont un tooprocess de la façon dont ces demandes une fois le centre de données principal hello est à nouveau en ligne.</span><span class="sxs-lookup"><span data-stu-id="10e31-167">In this case, you would write your pending update requests tooa queue in a different region, and then have a way tooprocess those requests after hello primary data center comes online again.</span></span> <span data-ttu-id="10e31-168">Dans ce scénario, vous devez informer les clients hello cette mise à jour hello demandée est en attente pour un traitement ultérieur.</span><span class="sxs-lookup"><span data-stu-id="10e31-168">In this scenario, you should let hello customer know that hello update requested is queued for later processing.</span></span>

3.  <span data-ttu-id="10e31-169">Vous pouvez écrire vos mises à jour du compte de stockage tooa dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="10e31-169">You can write your updates tooa storage account in another region.</span></span> <span data-ttu-id="10e31-170">Lorsque le centre de données principal hello revient en ligne, vous pouvez demander un toomerge de façon ces mises à jour des données de hello principal, en fonction de la structure de hello de données de hello dans.</span><span class="sxs-lookup"><span data-stu-id="10e31-170">Then when hello primary data center comes back online, you can have a way toomerge those updates into hello primary data, depending on hello structure of hello data.</span></span> <span data-ttu-id="10e31-171">Par exemple, si vous créez des fichiers distincts avec un cachet de date/heure dans le nom de hello, vous pouvez copier ces fichiers toohello arrière principal la région.</span><span class="sxs-lookup"><span data-stu-id="10e31-171">For example, if you are creating separate files with a date/time stamp in hello name, you can copy those files back toohello primary region.</span></span> <span data-ttu-id="10e31-172">Cela fonctionne pour certaines charges de travail, notamment la journalisation et les données IoT.</span><span class="sxs-lookup"><span data-stu-id="10e31-172">This works for some workloads such as logging and iOT data.</span></span>

## <a name="handling-retries"></a><span data-ttu-id="10e31-173">Gestion des nouvelles tentatives</span><span class="sxs-lookup"><span data-stu-id="10e31-173">Handling retries</span></span>

<span data-ttu-id="10e31-174">Comment savoir quelles sont les erreurs renouvelables ?</span><span class="sxs-lookup"><span data-stu-id="10e31-174">How do you know which errors are retryable?</span></span> <span data-ttu-id="10e31-175">Cela est déterminé par la bibliothèque cliente de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-175">This is determined by hello storage client library.</span></span> <span data-ttu-id="10e31-176">Par exemple, une erreur 404 (ressource introuvable) n’est pas renouvelable, car une nouvelle tentative il n’est pas probable tooresult en cas de réussite.</span><span class="sxs-lookup"><span data-stu-id="10e31-176">For example, a 404 error (resource not found) is not retryable because retrying it is not likely tooresult in success.</span></span> <span data-ttu-id="10e31-177">Sur hello autre part, une erreur 500 est renouvelable, car il s’agit d’une erreur de serveur, et il peut être simplement un problème temporaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-177">On hello other hand, a 500 error is retryable because it is a server error, and it may simply be a transient issue.</span></span> <span data-ttu-id="10e31-178">Pour plus d’informations, consultez hello [ouvrez source code hello ExponentialRetry classe](https://github.com/Azure/azure-storage-net/blob/87b84b3d5ee884c7adc10e494e2c7060956515d0/Lib/Common/RetryPolicies/ExponentialRetry.cs) dans la bibliothèque cliente de stockage de .NET hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-178">For more details, check out hello [open source code for hello ExponentialRetry class](https://github.com/Azure/azure-storage-net/blob/87b84b3d5ee884c7adc10e494e2c7060956515d0/Lib/Common/RetryPolicies/ExponentialRetry.cs) in hello .NET storage client library.</span></span> <span data-ttu-id="10e31-179">(Recherchez hello ShouldRetry méthode.)</span><span class="sxs-lookup"><span data-stu-id="10e31-179">(Look for hello ShouldRetry method.)</span></span>

### <a name="read-requests"></a><span data-ttu-id="10e31-180">Demandes de lecture</span><span class="sxs-lookup"><span data-stu-id="10e31-180">Read requests</span></span>

<span data-ttu-id="10e31-181">Demandes de lecture peuvent être redirigé toosecondary stockage s’il existe un problème avec le stockage principal.</span><span class="sxs-lookup"><span data-stu-id="10e31-181">Read requests can be redirected toosecondary storage if there is a problem with primary storage.</span></span> <span data-ttu-id="10e31-182">Comme indiqué ci-dessus dans [à l’aide des données finalement cohérentes](#using-eventually-consistent-data), il doit être acceptable pour votre application toopotentially lire les données obsolètes.</span><span class="sxs-lookup"><span data-stu-id="10e31-182">As noted above in [Using Eventually Consistent Data](#using-eventually-consistent-data), it must be acceptable for your application toopotentially read stale data.</span></span> <span data-ttu-id="10e31-183">Si vous utilisez hello storage client library tooaccess les données de RA-GRS, vous pouvez spécifier le comportement des nouvelles tentatives hello d’une requête de lecture en définissant une valeur pour hello **LocationMode** tooone de propriété suivantes de hello :</span><span class="sxs-lookup"><span data-stu-id="10e31-183">If you are using hello storage client library tooaccess RA-GRS data, you can specify hello retry behavior of a read request by setting a value for hello **LocationMode** property tooone of hello following:</span></span>

*   <span data-ttu-id="10e31-184">**PrimaryOnly** (hello par défaut)</span><span class="sxs-lookup"><span data-stu-id="10e31-184">**PrimaryOnly** (hello default)</span></span>

*   <span data-ttu-id="10e31-185">**PrimaryThenSecondary**</span><span class="sxs-lookup"><span data-stu-id="10e31-185">**PrimaryThenSecondary**</span></span>

*   <span data-ttu-id="10e31-186">**SecondaryOnly**</span><span class="sxs-lookup"><span data-stu-id="10e31-186">**SecondaryOnly**</span></span>

*   <span data-ttu-id="10e31-187">**SecondaryThenPrimary**</span><span class="sxs-lookup"><span data-stu-id="10e31-187">**SecondaryThenPrimary**</span></span>

<span data-ttu-id="10e31-188">Lorsque vous définissez hello **LocationMode** trop**PrimaryThenSecondary**, si hello initial de point de terminaison principal demande toohello échoue avec une erreur renouvelable, le client de hello effectue automatiquement une nouvelle lecture lecture point de terminaison secondaire toohello la demande.</span><span class="sxs-lookup"><span data-stu-id="10e31-188">When you set hello **LocationMode** too**PrimaryThenSecondary**, if hello initial read request toohello primary endpoint fails with a retryable error, hello client automatically makes another read request toohello secondary endpoint.</span></span> <span data-ttu-id="10e31-189">Si l’erreur de hello est un délai d’attente du serveur, puis hello disposera client toowait pour tooexpire de délai d’attente hello avant de recevoir une erreur renouvelable à partir du service de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-189">If hello error is a server timeout, then hello client will have toowait for hello timeout tooexpire before it receives a retryable error from hello service.</span></span>

<span data-ttu-id="10e31-190">Il existe deux scénarios tooconsider lorsque vous décidez de la façon dont une erreur renouvelable toorespond tooa :</span><span class="sxs-lookup"><span data-stu-id="10e31-190">There are basically two scenarios tooconsider when you are deciding how toorespond tooa retryable error:</span></span>

*   <span data-ttu-id="10e31-191">Il s’agit d’un problème isolé et le point de terminaison primaire les demandes suivantes toohello ne retourne pas une erreur renouvelable.</span><span class="sxs-lookup"><span data-stu-id="10e31-191">This is an isolated problem and subsequent requests toohello primary endpoint will not return a retryable error.</span></span> <span data-ttu-id="10e31-192">Ceci peut se produire, par exemple, en cas d’erreur réseau temporaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-192">An example of where this might happen is when there is a transient network error.</span></span>

    <span data-ttu-id="10e31-193">Dans ce scénario, il n’existe aucune baisse significative des performances dans ayant **LocationMode** défini trop**PrimaryThenSecondary** que cela ne se produit rarement.</span><span class="sxs-lookup"><span data-stu-id="10e31-193">In this scenario, there is no significant performance penalty in having **LocationMode** set too**PrimaryThenSecondary** as this only happens infrequently.</span></span>

*   <span data-ttu-id="10e31-194">Il s’agit d’un problème avec au moins un des services de stockage hello dans la région principale de hello et service de toothat toutes les demandes suivantes dans la région principale de hello sont tooreturn probablement des erreurs renouvelable pour une période donnée.</span><span class="sxs-lookup"><span data-stu-id="10e31-194">This is a problem with at least one of hello storage services in hello primary region and all subsequent requests toothat service in hello primary region are likely tooreturn retryable errors for a period of time.</span></span> <span data-ttu-id="10e31-195">Un exemple est si la région principale de hello est totalement inaccessible.</span><span class="sxs-lookup"><span data-stu-id="10e31-195">An example of this is if hello primary region is completely inaccessible.</span></span>

    <span data-ttu-id="10e31-196">Dans ce scénario, il est une baisse des performances, car toutes vos demandes de lecture seront essayer en premier point de terminaison principal hello, attendez hello du délai d’attente tooexpire, puis basculer le point de terminaison secondaire toohello.</span><span class="sxs-lookup"><span data-stu-id="10e31-196">In this scenario, there is a performance penalty because all your read requests will try hello primary endpoint first, wait for hello timeout tooexpire, then switch toohello secondary endpoint.</span></span>

<span data-ttu-id="10e31-197">Pour ces scénarios, vous devez identifier un problème en cours avec le point de terminaison principal hello et envoyer toutes les demandes de lecture directement hello du point de terminaison secondaire toohello en définissant **LocationMode** propriété trop **SecondaryOnly**.</span><span class="sxs-lookup"><span data-stu-id="10e31-197">For these scenarios, you should identify that there is an ongoing issue with hello primary endpoint and send all read requests directly toohello secondary endpoint by setting hello **LocationMode** property too**SecondaryOnly**.</span></span> <span data-ttu-id="10e31-198">À ce stade, vous devez également modifier toorun d’application hello en mode lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-198">At this time, you should also change hello application toorun in read-only mode.</span></span> <span data-ttu-id="10e31-199">Cette approche est appelée hello [modèle de disjoncteur](https://msdn.microsoft.com/library/dn589784.aspx).</span><span class="sxs-lookup"><span data-stu-id="10e31-199">This approach is known as hello [Circuit Breaker Pattern](https://msdn.microsoft.com/library/dn589784.aspx).</span></span>

### <a name="update-requests"></a><span data-ttu-id="10e31-200">Demandes de mise à jour</span><span class="sxs-lookup"><span data-stu-id="10e31-200">Update requests</span></span>

<span data-ttu-id="10e31-201">modèle de disjoncteur Hello peut également être appliqué tooupdate demandes.</span><span class="sxs-lookup"><span data-stu-id="10e31-201">hello Circuit Breaker pattern can also be applied tooupdate requests.</span></span> <span data-ttu-id="10e31-202">Toutefois, les demandes de mise à jour ne peut pas être redirigé toosecondary stockage, qui est en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-202">However, update requests cannot be redirected toosecondary storage, which is read-only.</span></span> <span data-ttu-id="10e31-203">Pour ces requêtes, vous devez laisser hello **LocationMode** propriété trop**PrimaryOnly** (hello par défaut).</span><span class="sxs-lookup"><span data-stu-id="10e31-203">For these requests, you should leave hello **LocationMode** property set too**PrimaryOnly** (hello default).</span></span> <span data-ttu-id="10e31-204">toohandle ces erreurs, vous pouvez appliquer un demandes toothese métrique – telles que des 10 défaillances dans une ligne et lorsque le seuil est atteint, basculer vers l’application hello en mode lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-204">toohandle these errors, you can apply a metric toothese requests – such as 10 failures in a row – and when your threshold is met, switch hello application into read-only mode.</span></span> <span data-ttu-id="10e31-205">Vous pouvez utiliser hello les mêmes méthodes pour retourner le mode tooupdate que celles décrites ci-dessous dans la section suivante de hello sur le modèle de disjoncteur hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-205">You can use hello same methods for returning tooupdate mode as those described below in hello next section about hello Circuit Breaker pattern.</span></span>

## <a name="circuit-breaker-pattern"></a><span data-ttu-id="10e31-206">Modèle Disjoncteur</span><span class="sxs-lookup"><span data-stu-id="10e31-206">Circuit Breaker pattern</span></span>

<span data-ttu-id="10e31-207">À l’aide du modèle de disjoncteur hello dans votre application peut l’empêcher d’une nouvelle tentative d’une opération qui est probablement toofail à plusieurs reprises.</span><span class="sxs-lookup"><span data-stu-id="10e31-207">Using hello Circuit Breaker pattern in your application can prevent it from retrying an operation that is likely toofail repeatedly.</span></span> <span data-ttu-id="10e31-208">Il permet de hello application toocontinue toorun plutôt que de prendre le temps pendant l’opération de hello est retentée de manière exponentielle.</span><span class="sxs-lookup"><span data-stu-id="10e31-208">It allows hello application toocontinue toorun rather than taking up time while hello operation is retried exponentially.</span></span> <span data-ttu-id="10e31-209">Il détecte également lors de la défaillance de hello a été résolu, à laquelle application hello de temps peut réessayez hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-209">It also detects when hello fault has been fixed, at which time hello application can try hello operation again.</span></span>

### <a name="how-tooimplement-hello-circuit-breaker-pattern"></a><span data-ttu-id="10e31-210">Comment tooimplement hello modèle de disjoncteur</span><span class="sxs-lookup"><span data-stu-id="10e31-210">How tooimplement hello circuit breaker pattern</span></span>

<span data-ttu-id="10e31-211">tooidentify qu’il existe un problème en cours avec un point de terminaison principal, vous pouvez surveiller la fréquence à laquelle le client de hello rencontre une erreur renouvelable.</span><span class="sxs-lookup"><span data-stu-id="10e31-211">tooidentify that there is an ongoing problem with a primary endpoint, you can monitor how frequently hello client encounters retryable errors.</span></span> <span data-ttu-id="10e31-212">Chaque cas sont différent, vous devez toodecide sur le seuil de hello souhaité de toouse pour hello décision tooswitch toohello point de terminaison secondaire et exécuter l’application hello en mode lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-212">Because each case is different, you have toodecide on hello threshold you want toouse for hello decision tooswitch toohello secondary endpoint and run hello application in read-only mode.</span></span> <span data-ttu-id="10e31-213">Par exemple, vous pouvez décider de commutateur de hello tooperform s’il existe des échecs de 10 dans une ligne sans succès.</span><span class="sxs-lookup"><span data-stu-id="10e31-213">For example, you could decide tooperform hello switch if there are 10 failures in a row with no successes.</span></span> <span data-ttu-id="10e31-214">Un autre exemple est tooswitch cas d’échec de 90 % des demandes de hello dans une période de 2 minutes.</span><span class="sxs-lookup"><span data-stu-id="10e31-214">Another example is tooswitch if 90% of hello requests in a 2-minute period fail.</span></span>

<span data-ttu-id="10e31-215">Pour le premier scénario de hello, vous pouvez conserver simplement un nombre d’échecs de hello et s’il existe un succès avant d’atteindre hello toozero arrière de nombre maximal, affectez la valeur hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-215">For hello first scenario, you can simply keep a count of hello failures, and if there is a success before reaching hello maximum, set hello count back toozero.</span></span> <span data-ttu-id="10e31-216">Pour le second scénario de hello, tooimplement monodirectionnelle, il est toouse hello objet MemoryCache (dans .NET).</span><span class="sxs-lookup"><span data-stu-id="10e31-216">For hello second scenario, one way tooimplement it is toouse hello MemoryCache object (in .NET).</span></span> <span data-ttu-id="10e31-217">Pour chaque demande, ajouter un cache de toohello CacheItem, définir la valeur de hello toosuccess (1) ou échouer (0) et définir des minutes de too2 hello d’expiration du temps à partir de maintenant (ou tout ce qui est votre contrainte de temps).</span><span class="sxs-lookup"><span data-stu-id="10e31-217">For each request, add a CacheItem toohello cache, set hello value toosuccess (1) or fail (0), and set hello expiration time too2 minutes from now (or whatever your time constraint is).</span></span> <span data-ttu-id="10e31-218">Lors de l’heure d’expiration d’une entrée est atteinte, hello entrée est automatiquement supprimée.</span><span class="sxs-lookup"><span data-stu-id="10e31-218">When an entry's expiration time is reached, hello entry is automatically removed.</span></span> <span data-ttu-id="10e31-219">Cela vous donne une fenêtre cumulative de 2 minutes.</span><span class="sxs-lookup"><span data-stu-id="10e31-219">This will give you a rolling 2-minute window.</span></span> <span data-ttu-id="10e31-220">Chaque fois que vous apportez à un service de stockage toohello de demande, vous tout d’abord utiliser une requête Linq sur hello MemoryCache objet toocalculate hello pourcentage de réussite en additionnant les valeurs hello et en divisant par le nombre de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-220">Each time you make a request toohello storage service, you first use a Linq query across hello MemoryCache object toocalculate hello percent success by summing hello values and dividing by hello count.</span></span> <span data-ttu-id="10e31-221">Lorsque le pourcentage de réussite hello est inférieur à un seuil (par exemple, 10 %), définissez hello **LocationMode** propriété pour des demandes de lecture trop**SecondaryOnly** et basculer vers l’application hello en mode lecture seule avant continuer.</span><span class="sxs-lookup"><span data-stu-id="10e31-221">When hello percent success drops below some threshold (such as 10%), set hello **LocationMode** property for read requests too**SecondaryOnly** and switch hello application into read-only mode before continuing.</span></span>

<span data-ttu-id="10e31-222">seuil d’erreurs de Hello utilisé toodetermine lorsque le commutateur de hello toomake peut-être varier par tooservice de service dans votre application, vous devez donc considérer ce qui les rend paramètres configurables.</span><span class="sxs-lookup"><span data-stu-id="10e31-222">hello threshold of errors used toodetermine when toomake hello switch may vary from service tooservice in your application, so you should consider making them configurable parameters.</span></span> <span data-ttu-id="10e31-223">C’est également lorsque vous décidez de toohandle des erreurs récupérables à partir de chaque service séparément ou comme un seul, comme indiqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="10e31-223">This is also where you decide toohandle retryable errors from each service separately or as one, as discussed previously.</span></span>

<span data-ttu-id="10e31-224">Une autre considération est comment toohandle plusieurs instances d’une application et quelles toodo lorsque vous détectez une erreur renouvelable dans chaque instance.</span><span class="sxs-lookup"><span data-stu-id="10e31-224">Another consideration is how toohandle multiple instances of an application, and what toodo when you detect retryable errors in each instance.</span></span> <span data-ttu-id="10e31-225">Par exemple, peut avoir 20 ordinateurs virtuels en cours d’exécution avec hello chargée de la même application.</span><span class="sxs-lookup"><span data-stu-id="10e31-225">For example, you may have 20 VMs running with hello same application loaded.</span></span> <span data-ttu-id="10e31-226">Gérez-vous chaque instance séparément ?</span><span class="sxs-lookup"><span data-stu-id="10e31-226">Do you handle each instance separately?</span></span> <span data-ttu-id="10e31-227">Si une seule instance démarre rencontre des problèmes, voulez-vous toolimit hello réponse toojust qu’une seule instance, ou souhaitez-vous tootry toohave toutes les instances répondent Bonjour même quand une seule instance a un problème ?</span><span class="sxs-lookup"><span data-stu-id="10e31-227">If one instance starts having problems, do you want toolimit hello response toojust that one instance, or do you want tootry toohave all instances respond in hello same way when one instance has a problem?</span></span> <span data-ttu-id="10e31-228">Gestion des instances de hello séparément sont beaucoup plus simple que la tentative de réponse de hello toocoordinate entre eux, mais comment cela dépend d’une architecture de votre application.</span><span class="sxs-lookup"><span data-stu-id="10e31-228">Handling hello instances separately is much simpler than trying toocoordinate hello response across them, but how you do this depends on your application's architecture.</span></span>

### <a name="options-for-monitoring-hello-error-frequency"></a><span data-ttu-id="10e31-229">Options pour l’analyse de fréquence d’erreur hello</span><span class="sxs-lookup"><span data-stu-id="10e31-229">Options for monitoring hello error frequency</span></span>

<span data-ttu-id="10e31-230">Vous avez trois options principales pour l’analyse de fréquence hello de nouvelles tentatives dans la région principale de hello dans l’ordre toodetermine lorsque tooswitch sur la région secondaire toohello et modification hello toorun d’application en mode lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-230">You have three main options for monitoring hello frequency of retries in hello primary region in order toodetermine when tooswitch over toohello secondary region and change hello application toorun in read-only mode.</span></span>

*   <span data-ttu-id="10e31-231">Ajoutez un gestionnaire pour hello [ **nouvelle tentative** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.retrying.aspx) événement sur hello [ **OperationContext** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.aspx) objet passer de demandes de stockage tooyour – il s’agit de hello méthode affiché dans cet article et utilisée dans hello accompagnant l’exemple.</span><span class="sxs-lookup"><span data-stu-id="10e31-231">Add a handler for hello [**Retrying**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.retrying.aspx) event on hello [**OperationContext**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.operationcontext.aspx) object you pass tooyour storage requests – this is hello method displayed in this article and used in hello accompanying sample.</span></span> <span data-ttu-id="10e31-232">Ces événements se déclenchent à chaque fois qu’une demande de hello tentatives, activation tootrack la fréquence à laquelle le client de hello rencontre des erreurs récupérables sur un point de terminaison principal.</span><span class="sxs-lookup"><span data-stu-id="10e31-232">These events fire whenever hello client retries a request, enabling you tootrack how often hello client encounters retryable errors on a primary endpoint.</span></span>

    ```csharp 
    operationContext.Retrying += (sender, arguments) =>
    {
        // Retrying in hello primary region
        if (arguments.Request.Host == primaryhostname)
            ...
    };
    ```

*   <span data-ttu-id="10e31-233">Bonjour [ **évaluer** ](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.retrypolicies.iextendedretrypolicy.evaluate.aspx) méthode dans une stratégie de nouvelle tentative personnalisée, vous pouvez exécuter du code personnalisé chaque fois qu’une nouvelle tentative a lieu.</span><span class="sxs-lookup"><span data-stu-id="10e31-233">In hello [**Evaluate**](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.retrypolicies.iextendedretrypolicy.evaluate.aspx) method in a custom retry policy, you can run custom code whenever a retry takes place.</span></span> <span data-ttu-id="10e31-234">Dans Ajout toorecording lorsque se produit une nouvelle tentative, permet aussi de vous hello opportunité toomodify votre comportement des nouvelles tentatives.</span><span class="sxs-lookup"><span data-stu-id="10e31-234">In addition toorecording when a retry happens, this also gives you hello opportunity toomodify your retry behavior.</span></span>

    ```csharp 
    public RetryInfo Evaluate(RetryContext retryContext,
    OperationContext operationContext)
    {
        var statusCode = retryContext.LastRequestResult.HttpStatusCode;
        if (retryContext.CurrentRetryCount >= this.maximumAttempts
        || ((statusCode &gt;= 300 && statusCode &lt; 500 && statusCode != 408)
        || statusCode == 501 // Not Implemented
        || statusCode == 505 // Version Not Supported
            ))
        {
        // Do not retry
            return null;
        }

        // Monitor retries in hello primary location
        ...

        // Determine RetryInterval and TargetLocation
        RetryInfo info =
            CreateRetryInfo(retryContext.CurrentRetryCount);

        return info;
    }
    ```

*   <span data-ttu-id="10e31-235">troisième méthode Hello est tooimplement un composant de contrôle personnalisé dans votre application qui interroge en permanence de votre point de terminaison de stockage principal avec factice lire les demandes (par exemple, la lecture d’un objet blob de petits) toodetermine son intégrité.</span><span class="sxs-lookup"><span data-stu-id="10e31-235">hello third approach is tooimplement a custom monitoring component in your application that continually pings your primary storage endpoint with dummy read requests (such as reading a small blob) toodetermine its health.</span></span> <span data-ttu-id="10e31-236">Dans ce cas, la quantité de ressources sollicitées est raisonnable.</span><span class="sxs-lookup"><span data-stu-id="10e31-236">This would take up some resources, but not a significant amount.</span></span> <span data-ttu-id="10e31-237">Lorsqu’un problème est détecté qui atteint le seuil, vous pouvez ensuite effectuer commutateur de hello trop**SecondaryOnly** et en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="10e31-237">When a problem is discovered that reaches your threshold, you would then perform hello switch too**SecondaryOnly** and read-only mode.</span></span>

<span data-ttu-id="10e31-238">Dans certains cas, vous pouvez tooswitch toousing arrière hello point de terminaison principal et autoriser les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-238">At some point, you will want tooswitch back toousing hello primary endpoint and allowing updates.</span></span> <span data-ttu-id="10e31-239">Si vous utilisez une des hello deux premières méthodes répertoriées ci-dessus, vous pourriez simplement basculer le point de terminaison principal toohello précédent et activer le mode de mise à jour après qu’une durée arbitrairement sélectionnée ou le nombre d’opérations a été effectuée.</span><span class="sxs-lookup"><span data-stu-id="10e31-239">If using one of hello first two methods listed above, you could simply switch back toohello primary endpoint and enable update mode after an arbitrarily selected amount of time or number of operations has been performed.</span></span> <span data-ttu-id="10e31-240">Vous pourrez ensuite laisser parcourez logique de nouvelle tentative hello à nouveau.</span><span class="sxs-lookup"><span data-stu-id="10e31-240">You can then let it go through hello retry logic again.</span></span> <span data-ttu-id="10e31-241">Si hello a été résolu, il continue de point de terminaison principal toouse hello et autoriser les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-241">If hello problem has been fixed, it will continue toouse hello primary endpoint and allow updates.</span></span> <span data-ttu-id="10e31-242">S’il reste un problème, il bascule une fois de plus toohello précédent point de terminaison secondaire et le mode lecture seule après l’échec de que vous avez défini des critères de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-242">If there is still a problem, it will once more switch back toohello secondary endpoint and read-only mode after failing hello criteria you've set.</span></span>

<span data-ttu-id="10e31-243">Pour le troisième scénario de hello, lorsque le point de terminaison de stockage principal ping hello redevient réussi, vous pouvez déclencher revenir à l’ancienne hello trop**PrimaryOnly** et continuer à autoriser les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-243">For hello third scenario, when pinging hello primary storage endpoint becomes successful again, you can trigger hello switch back too**PrimaryOnly** and continue allowing updates.</span></span>

## <a name="handling-eventually-consistent-data"></a><span data-ttu-id="10e31-244">Gestion des données cohérentes</span><span class="sxs-lookup"><span data-stu-id="10e31-244">Handling eventually consistent data</span></span>

<span data-ttu-id="10e31-245">RA-GRS fonctionne par la réplication des transactions à partir de la région de hello toohello principal secondaire.</span><span class="sxs-lookup"><span data-stu-id="10e31-245">RA-GRS works by replicating transactions from hello primary toohello secondary region.</span></span> <span data-ttu-id="10e31-246">Ce processus de réplication qui garantit que les données de salutation dans la région secondaire hello sont *cohérente*.</span><span class="sxs-lookup"><span data-stu-id="10e31-246">This replication process guarantees that hello data in hello secondary region is *eventually consistent*.</span></span> <span data-ttu-id="10e31-247">Cela signifie que toutes les transactions hello dans la région principale de hello finalement apparaîtra dans la région secondaire hello, mais qu’il existe peut-être un retard avant qu’ils s’affichent, et qu’il n’existe aucune garantie des transactions hello arrivent dans la région secondaire hello Bonjour même ordre que qui dans lequel ils ont été appliquées à l’origine dans la région principale de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-247">This means that all hello transactions in hello primary region will eventually appear in hello secondary region, but that there may be a lag before they appear, and that there is no guarantee hello transactions arrive in hello secondary region in hello same order as that in which they were originally applied in hello primary region.</span></span> <span data-ttu-id="10e31-248">Si vos transactions arrivent dans la région secondaire hello dans le désordre, vous *peut* prendre en compte vos données dans toobe de région secondaire hello dans un état incohérent jusqu'à ce que le service de hello rattrape.</span><span class="sxs-lookup"><span data-stu-id="10e31-248">If your transactions arrive in hello secondary region out of order, you *may* consider your data in hello secondary region toobe in an inconsistent state until hello service catches up.</span></span>

<span data-ttu-id="10e31-249">Hello tableau suivant montre un exemple de ce qui peut se produire lorsque vous mettez à jour Détails hello d’un employé de toomake son membre hello *administrateurs* rôle.</span><span class="sxs-lookup"><span data-stu-id="10e31-249">hello following table shows an example of what might happen when you update hello details of an employee toomake her a member of hello *administrators* role.</span></span> <span data-ttu-id="10e31-250">Par souci de hello de cet exemple, cela nécessite la mise à jour hello **employé** entité et mise à jour un **rôle administrateur** entité avec le nombre total de hello du groupe Administrateurs.</span><span class="sxs-lookup"><span data-stu-id="10e31-250">For hello sake of this example, this requires you update hello **employee** entity and update an **administrator role** entity with a count of hello total number of administrators.</span></span> <span data-ttu-id="10e31-251">Notez comment les mises à jour de hello sont appliquées en désordre dans la région secondaire hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-251">Notice how hello updates are applied out of order in hello secondary region.</span></span>

| <span data-ttu-id="10e31-252">**Time**</span><span class="sxs-lookup"><span data-stu-id="10e31-252">**Time**</span></span> | <span data-ttu-id="10e31-253">**Transaction**</span><span class="sxs-lookup"><span data-stu-id="10e31-253">**Transaction**</span></span>                                            | <span data-ttu-id="10e31-254">**Réplication**</span><span class="sxs-lookup"><span data-stu-id="10e31-254">**Replication**</span></span>                       | <span data-ttu-id="10e31-255">**Dernière heure de synchronisation**</span><span class="sxs-lookup"><span data-stu-id="10e31-255">**Last Sync Time**</span></span> | <span data-ttu-id="10e31-256">**Résultat**</span><span class="sxs-lookup"><span data-stu-id="10e31-256">**Result**</span></span> |
|----------|------------------------------------------------------------|---------------------------------------|--------------------|------------| 
| <span data-ttu-id="10e31-257">T0</span><span class="sxs-lookup"><span data-stu-id="10e31-257">T0</span></span>       | <span data-ttu-id="10e31-258">Transaction A :</span><span class="sxs-lookup"><span data-stu-id="10e31-258">Transaction A:</span></span> <br> <span data-ttu-id="10e31-259">Insérer l’entité d’employé</span><span class="sxs-lookup"><span data-stu-id="10e31-259">Insert employee</span></span> <br> <span data-ttu-id="10e31-260">dans la région primaire</span><span class="sxs-lookup"><span data-stu-id="10e31-260">entity in primary</span></span> |                                   |                    | <span data-ttu-id="10e31-261">La transaction A inséré tooprimary,</span><span class="sxs-lookup"><span data-stu-id="10e31-261">Transaction A inserted tooprimary,</span></span><br> <span data-ttu-id="10e31-262">pas encore répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-262">not replicated yet.</span></span> |
| <span data-ttu-id="10e31-263">T1</span><span class="sxs-lookup"><span data-stu-id="10e31-263">T1</span></span>       |                                                            | <span data-ttu-id="10e31-264">Transaction A</span><span class="sxs-lookup"><span data-stu-id="10e31-264">Transaction A</span></span> <br> <span data-ttu-id="10e31-265">répliquée sur</span><span class="sxs-lookup"><span data-stu-id="10e31-265">replicated to</span></span><br> <span data-ttu-id="10e31-266">la région secondaire</span><span class="sxs-lookup"><span data-stu-id="10e31-266">secondary</span></span> | <span data-ttu-id="10e31-267">T1</span><span class="sxs-lookup"><span data-stu-id="10e31-267">T1</span></span> | <span data-ttu-id="10e31-268">La transaction A répliquées toosecondary.</span><span class="sxs-lookup"><span data-stu-id="10e31-268">Transaction A replicated toosecondary.</span></span> <br><span data-ttu-id="10e31-269">Dernière heure de synchronisation mise à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-269">Last Sync Time updated.</span></span>    |
| <span data-ttu-id="10e31-270">T2</span><span class="sxs-lookup"><span data-stu-id="10e31-270">T2</span></span>       | <span data-ttu-id="10e31-271">Transaction B :</span><span class="sxs-lookup"><span data-stu-id="10e31-271">Transaction B:</span></span><br><span data-ttu-id="10e31-272">Mettre à jour</span><span class="sxs-lookup"><span data-stu-id="10e31-272">Update</span></span><br> <span data-ttu-id="10e31-273">l’entité d’employé</span><span class="sxs-lookup"><span data-stu-id="10e31-273">employee entity</span></span><br> <span data-ttu-id="10e31-274">dans la région primaire</span><span class="sxs-lookup"><span data-stu-id="10e31-274">in primary</span></span>  |                                | <span data-ttu-id="10e31-275">T1</span><span class="sxs-lookup"><span data-stu-id="10e31-275">T1</span></span>                 | <span data-ttu-id="10e31-276">Transaction B écrite tooprimary,</span><span class="sxs-lookup"><span data-stu-id="10e31-276">Transaction B written tooprimary,</span></span><br> <span data-ttu-id="10e31-277">pas encore répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-277">not replicated yet.</span></span>  |
| <span data-ttu-id="10e31-278">T3</span><span class="sxs-lookup"><span data-stu-id="10e31-278">T3</span></span>       | <span data-ttu-id="10e31-279">Transaction C :</span><span class="sxs-lookup"><span data-stu-id="10e31-279">Transaction C:</span></span><br> <span data-ttu-id="10e31-280">Mettre à jour</span><span class="sxs-lookup"><span data-stu-id="10e31-280">Update</span></span> <br><span data-ttu-id="10e31-281">administrator</span><span class="sxs-lookup"><span data-stu-id="10e31-281">administrator</span></span><br><span data-ttu-id="10e31-282">entité de rôle dans</span><span class="sxs-lookup"><span data-stu-id="10e31-282">role entity in</span></span><br><span data-ttu-id="10e31-283">primary</span><span class="sxs-lookup"><span data-stu-id="10e31-283">primary</span></span> |                    | <span data-ttu-id="10e31-284">T1</span><span class="sxs-lookup"><span data-stu-id="10e31-284">T1</span></span>                 | <span data-ttu-id="10e31-285">Transaction C écrit tooprimary,</span><span class="sxs-lookup"><span data-stu-id="10e31-285">Transaction C written tooprimary,</span></span><br> <span data-ttu-id="10e31-286">pas encore répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-286">not replicated yet.</span></span>  |
| <span data-ttu-id="10e31-287">*T4*</span><span class="sxs-lookup"><span data-stu-id="10e31-287">*T4*</span></span>     |                                                       | <span data-ttu-id="10e31-288">Transaction C</span><span class="sxs-lookup"><span data-stu-id="10e31-288">Transaction C</span></span> <br><span data-ttu-id="10e31-289">répliquée sur</span><span class="sxs-lookup"><span data-stu-id="10e31-289">replicated to</span></span><br> <span data-ttu-id="10e31-290">la région secondaire</span><span class="sxs-lookup"><span data-stu-id="10e31-290">secondary</span></span> | <span data-ttu-id="10e31-291">T1</span><span class="sxs-lookup"><span data-stu-id="10e31-291">T1</span></span>         | <span data-ttu-id="10e31-292">Transaction C répliquée toosecondary.</span><span class="sxs-lookup"><span data-stu-id="10e31-292">Transaction C replicated toosecondary.</span></span><br><span data-ttu-id="10e31-293">LastSyncTime pas encore mis à jour car</span><span class="sxs-lookup"><span data-stu-id="10e31-293">LastSyncTime not updated because</span></span> <br><span data-ttu-id="10e31-294">la transaction B n’a pas encore été répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-294">transaction B has not been replicated yet.</span></span>|
| <span data-ttu-id="10e31-295">*T5*</span><span class="sxs-lookup"><span data-stu-id="10e31-295">*T5*</span></span>     | <span data-ttu-id="10e31-296">Lire les entités</span><span class="sxs-lookup"><span data-stu-id="10e31-296">Read entities</span></span> <br><span data-ttu-id="10e31-297">de la région secondaire</span><span class="sxs-lookup"><span data-stu-id="10e31-297">from secondary</span></span>                           |                                  | <span data-ttu-id="10e31-298">T1</span><span class="sxs-lookup"><span data-stu-id="10e31-298">T1</span></span>                 | <span data-ttu-id="10e31-299">Vous obtenez la valeur périmée de hello pour employé</span><span class="sxs-lookup"><span data-stu-id="10e31-299">You get hello stale value for employee</span></span> <br> <span data-ttu-id="10e31-300">car la transaction B n’a</span><span class="sxs-lookup"><span data-stu-id="10e31-300">entity because transaction B hasn't</span></span> <br> <span data-ttu-id="10e31-301">pas encore été répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-301">replicated yet.</span></span> <span data-ttu-id="10e31-302">Vous obtenez la nouvelle valeur de hello pour</span><span class="sxs-lookup"><span data-stu-id="10e31-302">You get hello new value for</span></span><br> <span data-ttu-id="10e31-303">l’entité de rôle d’administrateur car C a</span><span class="sxs-lookup"><span data-stu-id="10e31-303">administrator role entity because C has</span></span><br> <span data-ttu-id="10e31-304">été répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-304">replicated.</span></span> <span data-ttu-id="10e31-305">La dernière heure de synchronisation n’a pas encore</span><span class="sxs-lookup"><span data-stu-id="10e31-305">Last Sync Time still hasn't</span></span><br> <span data-ttu-id="10e31-306">été mise à jour car la transaction B</span><span class="sxs-lookup"><span data-stu-id="10e31-306">been updated because transaction B</span></span><br> <span data-ttu-id="10e31-307">n’a pas été répliquée.</span><span class="sxs-lookup"><span data-stu-id="10e31-307">hasn't replicated.</span></span> <span data-ttu-id="10e31-308">Vous savez que</span><span class="sxs-lookup"><span data-stu-id="10e31-308">You can tell the</span></span><br><span data-ttu-id="10e31-309">l’entité de rôle d’administrateur est cohérente</span><span class="sxs-lookup"><span data-stu-id="10e31-309">administrator role entity is inconsistent</span></span> <br><span data-ttu-id="10e31-310">Étant donné que hello entité date/heure est après</span><span class="sxs-lookup"><span data-stu-id="10e31-310">because hello entity date/time is after</span></span> <br><span data-ttu-id="10e31-311">Hello dernière heure de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="10e31-311">hello Last Sync Time.</span></span> |
| <span data-ttu-id="10e31-312">*T6*</span><span class="sxs-lookup"><span data-stu-id="10e31-312">*T6*</span></span>     |                                                      | <span data-ttu-id="10e31-313">Transaction B</span><span class="sxs-lookup"><span data-stu-id="10e31-313">Transaction B</span></span><br> <span data-ttu-id="10e31-314">répliquée sur</span><span class="sxs-lookup"><span data-stu-id="10e31-314">replicated to</span></span><br> <span data-ttu-id="10e31-315">la région secondaire</span><span class="sxs-lookup"><span data-stu-id="10e31-315">secondary</span></span> | <span data-ttu-id="10e31-316">T6</span><span class="sxs-lookup"><span data-stu-id="10e31-316">T6</span></span>                 | <span data-ttu-id="10e31-317">*T6* – Toutes les transactions jusqu’à C ont</span><span class="sxs-lookup"><span data-stu-id="10e31-317">*T6* – All transactions through C have</span></span> <br><span data-ttu-id="10e31-318">été répliquées. La dernière heure de synchronisation</span><span class="sxs-lookup"><span data-stu-id="10e31-318">been replicated, Last Sync Time</span></span><br> <span data-ttu-id="10e31-319">est mise à jour.</span><span class="sxs-lookup"><span data-stu-id="10e31-319">is updated.</span></span> |

<span data-ttu-id="10e31-320">Dans cet exemple, supposons que tooreading de commutateurs hello client à partir de la région secondaire de hello à T5.</span><span class="sxs-lookup"><span data-stu-id="10e31-320">In this example, assume hello client switches tooreading from hello secondary region at T5.</span></span> <span data-ttu-id="10e31-321">Il peut lire correctement hello **rôle administrateur** entité à ce stade, mais les entités hello contient une valeur pour le nombre de hello des administrateurs qui n’est pas cohérent avec le nombre de hello de **employé** entités qui sont marquées en tant qu’administrateurs dans la région secondaire hello pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="10e31-321">It can successfully read hello **administrator role** entity at this time, but hello entity contains a value for hello count of administrators that is not consistent with hello number of **employee** entities that are marked as administrators in hello secondary region at this time.</span></span> <span data-ttu-id="10e31-322">Votre client peut afficher simplement cette valeur, avec des risques hello qu’il s’agit des informations incohérentes.</span><span class="sxs-lookup"><span data-stu-id="10e31-322">Your client could simply display this value, with hello risk that it is inconsistent information.</span></span> <span data-ttu-id="10e31-323">Vous pouvez également hello client peut essayer toodetermine que hello **rôle administrateur** est dans un état potentiellement incohérent, car les mises à jour hello se sont produites dans le désordre et ensuite aux utilisateur hello de ce fait.</span><span class="sxs-lookup"><span data-stu-id="10e31-323">Alternatively, hello client could attempt toodetermine that hello **administrator role** is in a potentially inconsistent state because hello updates have happened out of order, and then inform hello user of this fact.</span></span>

<span data-ttu-id="10e31-324">toorecognize qu’il possède des données potentiellement incohérentes, les clients hello peuvent utiliser la valeur hello hello *dernière heure de synchronisation* que vous pouvez obtenir à tout moment en interrogeant un service de stockage.</span><span class="sxs-lookup"><span data-stu-id="10e31-324">toorecognize that it has potentially inconsistent data, hello client can use hello value of hello *Last Sync Time* that you can get at any time by querying a storage service.</span></span> <span data-ttu-id="10e31-325">Vous pouvez en déduire hello heure données hello dans la région secondaire hello dernière cohérent et lorsque le service de hello avait appliqué tous les hello transactions antérieures toothat point dans le temps.</span><span class="sxs-lookup"><span data-stu-id="10e31-325">This tells you hello time when hello data in hello secondary region was last consistent and when hello service had applied all hello transactions prior toothat point in time.</span></span> <span data-ttu-id="10e31-326">Dans l’exemple hello illustrée ci-dessus, une fois que le service de hello insère hello **employé** entité dans la région secondaire hello, hello dernière heure de synchronisation est défini trop*T1*.</span><span class="sxs-lookup"><span data-stu-id="10e31-326">In hello example shown above, after hello service inserts hello **employee** entity in hello secondary region, hello last sync time is set too*T1*.</span></span> <span data-ttu-id="10e31-327">Il reste à *T1* jusqu'à ce que les mises à jour de service de hello hello **employé** entité dans la région de hello secondaire lorsqu’il est défini trop*T6*.</span><span class="sxs-lookup"><span data-stu-id="10e31-327">It remains at *T1* until hello service updates hello **employee** entity in hello secondary region when it is set too*T6*.</span></span> <span data-ttu-id="10e31-328">Si le client de hello récupère hello dernière heure de synchronisation lorsqu’il lit entité hello à *T5*, elle peut le comparer avec l’horodateur hello sur l’entité de hello.</span><span class="sxs-lookup"><span data-stu-id="10e31-328">If hello client retrieves hello last sync time when it reads hello entity at *T5*, it can compare it with hello timestamp on hello entity.</span></span> <span data-ttu-id="10e31-329">Si timestamp hello sur l’entité de hello est ultérieure à hello heure, de la dernière synchronisation hello entité est dans un état potentiellement incohérent puis vous pouvez effectuer tout ce qui est la conséquence de hello pour votre application.</span><span class="sxs-lookup"><span data-stu-id="10e31-329">If hello timestamp on hello entity is later than hello last sync time, then hello entity is in a potentially inconsistent state, and you can take whatever is hello appropriate action for your application.</span></span> <span data-ttu-id="10e31-330">À l’aide de ce champ, vous devez savoir quand toohello mise à jour hello dernière principal a été terminé.</span><span class="sxs-lookup"><span data-stu-id="10e31-330">Using this field requires that you know when hello last update toohello primary was completed.</span></span>

## <a name="testing"></a><span data-ttu-id="10e31-331">Test</span><span class="sxs-lookup"><span data-stu-id="10e31-331">Testing</span></span>

<span data-ttu-id="10e31-332">Il est important tootest que votre application se comporte comme prévu quand il rencontre une erreur renouvelable.</span><span class="sxs-lookup"><span data-stu-id="10e31-332">It's important tootest that your application behaves as expected when it encounters retryable errors.</span></span> <span data-ttu-id="10e31-333">Par exemple, vous devez tootest qui hello toohello de commutateurs application secondaire et en mode lecture seule lorsqu’il détecte un problème et bascule lorsque la région primaire hello est à nouveau disponible.</span><span class="sxs-lookup"><span data-stu-id="10e31-333">For example, you need tootest that hello application switches toohello secondary and into read-only mode when it detects a problem, and switches back when hello primary region becomes available again.</span></span> <span data-ttu-id="10e31-334">toodo, vous avez besoin d’une erreur renouvelable toosimulate de façon et contrôler la fréquence à laquelle ils se produisent.</span><span class="sxs-lookup"><span data-stu-id="10e31-334">toodo this, you need a way toosimulate retryable errors and control how often they occur.</span></span>

<span data-ttu-id="10e31-335">Vous pouvez utiliser [Fiddler](http://www.telerik.com/fiddler) toointercept et modifier des réponses HTTP dans un script.</span><span class="sxs-lookup"><span data-stu-id="10e31-335">You can use [Fiddler](http://www.telerik.com/fiddler) toointercept and modify HTTP responses in a script.</span></span> <span data-ttu-id="10e31-336">Ce script peut identifier des réponses provenant de votre point de terminaison primaire et modifier hello HTTP état code tooone que hello que bibliothèque cliente de stockage reconnaît comme une erreur renouvelable.</span><span class="sxs-lookup"><span data-stu-id="10e31-336">This script can identify responses that come from your primary endpoint and change hello HTTP status code tooone that hello Storage Client Library recognizes as a retryable error.</span></span> <span data-ttu-id="10e31-337">Cet extrait de code montre un exemple simple d’un script de Fiddler qui intercepte les demandes de tooread de réponses sur hello **employeedata** table tooreturn état 502 :</span><span class="sxs-lookup"><span data-stu-id="10e31-337">This code snippet shows a simple example of a Fiddler script that intercepts responses tooread requests against hello **employeedata** table tooreturn a 502 status:</span></span>

```java
static function OnBeforeResponse(oSession: Session) {
    ...
    if ((oSession.hostname == "\[yourstorageaccount\].table.core.windows.net")
      && (oSession.PathAndQuery.StartsWith("/employeedata?$filter"))) {
        oSession.responseCode = 502;
    }
}
```

<span data-ttu-id="10e31-338">Vous pouvez étendre cet exemple toointercept un éventail plus large de demandes et modifier uniquement hello **responseCode** sur certains d'entre eux toobetter simuler un scénario réel.</span><span class="sxs-lookup"><span data-stu-id="10e31-338">You could extend this example toointercept a wider range of requests and only change hello **responseCode** on some of them toobetter simulate a real-world scenario.</span></span> <span data-ttu-id="10e31-339">Pour plus d’informations sur la personnalisation des scripts de Fiddler, consultez [modification d’une demande ou réponse](http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse) Bonjour documentation de Fiddler.</span><span class="sxs-lookup"><span data-stu-id="10e31-339">For more information about customizing Fiddler scripts, see [Modifying a Request or Response](http://docs.telerik.com/fiddler/KnowledgeBase/FiddlerScript/ModifyRequestOrResponse) in hello Fiddler documentation.</span></span>

<span data-ttu-id="10e31-340">Si vous avez apporté des seuils hello pour le basculement de votre application tooread seule configurable, il sera comportement de hello tootest plus facile avec des volumes de production non transaction.</span><span class="sxs-lookup"><span data-stu-id="10e31-340">If you have made hello thresholds for switching your application tooread-only mode configurable, it will be easier tootest hello behavior with non-production transaction volumes.</span></span>

## <a name="next-steps"></a><span data-ttu-id="10e31-341">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="10e31-341">Next Steps</span></span>

* <span data-ttu-id="10e31-342">Pour plus d’informations sur l’accès en lecture géo-redondance, y compris un autre exemple de comment hello LastSyncTime est définie, consultez [Options de redondance du stockage Windows Azure et Read Access Geo Redundant Storage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="10e31-342">For more information about Read Access Geo-Redundancy, including another example of how hello LastSyncTime is set, please see [Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

* <span data-ttu-id="10e31-343">Pour obtenir un exemple complet montrant comment toomake hello commutateur dans les deux sens entre les points de terminaison hello principaux et secondaires, consultez [exemples Azure – à l’aide de hello modèle de disjoncteur avec stockage de RA-GRS](https://github.com/Azure-Samples/storage-dotnet-circuit-breaker-pattern-ha-apps-using-ra-grs).</span><span class="sxs-lookup"><span data-stu-id="10e31-343">For a complete sample showing how toomake hello switch back and forth between hello Primary and Secondary endpoints, please see [Azure Samples – Using hello Circuit Breaker Pattern with RA-GRS storage](https://github.com/Azure-Samples/storage-dotnet-circuit-breaker-pattern-ha-apps-using-ra-grs).</span></span>
