---
title: "Analyse, diagnostic et résolution des problèmes de stockage | Microsoft Docs"
description: "Utilisation de fonctionnalités telles que l’analyse du stockage, la journalisation côté client et d’autres outils tiers pour identifier, diagnostiquer et résoudre les problèmes liés à Azure Storage."
services: storage
documentationcenter: 
author: fhryo-msft
manager: jahogg
editor: tysonn
ms.assetid: da57e844-705d-449d-8ed5-5607d2a6170b
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/28/2017
ms.author: fhryo-msft
ms.openlocfilehash: 0ce739e1b62c908a469a5c37331915f17809018b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="monitor-diagnose-and-troubleshoot-microsoft-azure-storage"></a><span data-ttu-id="d7c68-103">Surveiller, diagnostiquer et résoudre les problèmes liés à Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-103">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>
[!INCLUDE [storage-selector-portal-monitoring-diagnosing-troubleshooting](../../includes/storage-selector-portal-monitoring-diagnosing-troubleshooting.md)]

## <a name="overview"></a><span data-ttu-id="d7c68-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="d7c68-104">Overview</span></span>
<span data-ttu-id="d7c68-105">Le diagnostic et la résolution des problèmes dans une application distribuée hébergée dans un environnement cloud peuvent s'avérer plus complexes que dans des environnements traditionnels.</span><span class="sxs-lookup"><span data-stu-id="d7c68-105">Diagnosing and troubleshooting issues in a distributed application hosted in a cloud environment can be more complex than in traditional environments.</span></span> <span data-ttu-id="d7c68-106">Les applications peuvent être déployées dans une infrastructure PaaS ou IaaS, localement, sur un appareil mobile ou selon une formule combinée.</span><span class="sxs-lookup"><span data-stu-id="d7c68-106">Applications can be deployed in a PaaS or IaaS infrastructure, on premises, on a mobile device, or in some combination of these.</span></span> <span data-ttu-id="d7c68-107">Le trafic réseau de votre application traverse généralement des réseaux publics et privés, et votre application peut utiliser différentes technologies de stockage, comme Stockage Table, Stockage Blob, Stockage File d’attente ou Stockage Fichier de Microsoft Azure, en plus d’autres magasins de données, comme des bases de données relationnelles et de documents.</span><span class="sxs-lookup"><span data-stu-id="d7c68-107">Typically, your application's network traffic may traverse public and private networks and your application may use multiple storage technologies such as Microsoft Azure Storage Tables, Blobs, Queues, or Files in addition to other data stores such as relational and document databases.</span></span>

<span data-ttu-id="d7c68-108">Pour gérer avec succès de telles applications, vous devez les analyser de façon proactive et savoir comment diagnostiquer et résoudre n'importe quel problème associé à leur fonctionnement et leurs technologies associées.</span><span class="sxs-lookup"><span data-stu-id="d7c68-108">To manage such applications successfully you should monitor them proactively and understand how to diagnose and troubleshoot all aspects of them and their dependent technologies.</span></span> <span data-ttu-id="d7c68-109">En tant qu'utilisateur des services Azure Storage, vous devez surveiller en permanence les services de stockage utilisés par votre application afin de détecter tout comportement imprévu (par ex., des temps de réponse plus lents que d'habitude), et utiliser la journalisation afin de collecter davantage de données détaillées et analyser chaque problème en profondeur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-109">As a user of Azure Storage services, you should continuously monitor the Storage services your application uses for any unexpected changes in behavior (such as slower than usual response times), and use logging to collect more detailed data and to analyze a problem in depth.</span></span> <span data-ttu-id="d7c68-110">Les informations de diagnostic obtenues via l'analyse et la journalisation vous aideront à déterminer la cause première du problème rencontré par votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-110">The diagnostics information you obtain from both monitoring and logging will help you to determine the root cause of the issue your application encountered.</span></span> <span data-ttu-id="d7c68-111">Vous pouvez alors résoudre le problème et déterminer la procédure appropriée pour y remédier.</span><span class="sxs-lookup"><span data-stu-id="d7c68-111">Then you can troubleshoot the issue and determine the appropriate steps you can take to remediate it.</span></span> <span data-ttu-id="d7c68-112">Azure Storage est l'un des principaux services de Azure et un élément essentiel de la plupart des solutions que les clients déploient dans l'infrastructure Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-112">Azure Storage is a core Azure service, and forms an important part of the majority of solutions that customers deploy to the Azure infrastructure.</span></span> <span data-ttu-id="d7c68-113">Azure Storage inclut des fonctionnalités qui permettent de simplifier l'analyse, le diagnostic et la résolution des problèmes de stockage rencontrés par vos applications sur le cloud.</span><span class="sxs-lookup"><span data-stu-id="d7c68-113">Azure Storage includes capabilities to simplify monitoring, diagnosing, and troubleshooting storage issues in your cloud-based applications.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-114">Pour l’instant, les fonctionnalités de mesure et de journalisation ne sont pas activées pour les comptes de stockage avec un type de réplication Stockage redondant dans une zone (ZRS).</span><span class="sxs-lookup"><span data-stu-id="d7c68-114">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have the metrics or logging capability enabled at this time.</span></span> 
> 
> 

<span data-ttu-id="d7c68-115">Pour obtenir un guide pratique de bout en bout pour la résolution des problèmes dans les applications Azure Storage, consultez [Résolution des problèmes de bout en bout avec les métriques et la journalisation Azure, AzCopy et Message Analyzer](storage-e2e-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="d7c68-115">For a hands-on guide to end-to-end troubleshooting in Azure Storage applications, see [End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer](storage-e2e-troubleshooting.md).</span></span>

* <span data-ttu-id="d7c68-116">[Introduction]</span><span class="sxs-lookup"><span data-stu-id="d7c68-116">[Introduction]</span></span>
  * <span data-ttu-id="d7c68-117">[Organisation de ce guide]</span><span class="sxs-lookup"><span data-stu-id="d7c68-117">[How this guide is organized]</span></span>
* <span data-ttu-id="d7c68-118">[Analyse de votre service de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-118">[Monitoring your storage service]</span></span>
  * <span data-ttu-id="d7c68-119">[Analyse de l’état d’intégrité du service]</span><span class="sxs-lookup"><span data-stu-id="d7c68-119">[Monitoring service health]</span></span>
  * <span data-ttu-id="d7c68-120">[Analyse de la capacité]</span><span class="sxs-lookup"><span data-stu-id="d7c68-120">[Monitoring capacity]</span></span>
  * <span data-ttu-id="d7c68-121">[Analyse de la disponibilité]</span><span class="sxs-lookup"><span data-stu-id="d7c68-121">[Monitoring availability]</span></span>
  * <span data-ttu-id="d7c68-122">[Analyse des performances]</span><span class="sxs-lookup"><span data-stu-id="d7c68-122">[Monitoring performance]</span></span>
* <span data-ttu-id="d7c68-123">[Diagnostic des problèmes de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-123">[Diagnosing storage issues]</span></span>
  * <span data-ttu-id="d7c68-124">[Problèmes d’état d’intégrité du service]</span><span class="sxs-lookup"><span data-stu-id="d7c68-124">[Service health issues]</span></span>
  * <span data-ttu-id="d7c68-125">[Problèmes de performances]</span><span class="sxs-lookup"><span data-stu-id="d7c68-125">[Performance issues]</span></span>
  * <span data-ttu-id="d7c68-126">[Erreurs de diagnostic]</span><span class="sxs-lookup"><span data-stu-id="d7c68-126">[Diagnosing errors]</span></span>
  * <span data-ttu-id="d7c68-127">[Problèmes d’émulateur de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-127">[Storage emulator issues]</span></span>
  * <span data-ttu-id="d7c68-128">[Outils de journalisation du stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-128">[Storage logging tools]</span></span>
  * <span data-ttu-id="d7c68-129">[Utilisation des outils de journalisation réseau]</span><span class="sxs-lookup"><span data-stu-id="d7c68-129">[Using network logging tools]</span></span>
* <span data-ttu-id="d7c68-130">[Suivi de bout en bout]</span><span class="sxs-lookup"><span data-stu-id="d7c68-130">[End-to-end tracing]</span></span>
  * <span data-ttu-id="d7c68-131">[Corrélation des données de journalisation]</span><span class="sxs-lookup"><span data-stu-id="d7c68-131">[Correlating log data]</span></span>
  * <span data-ttu-id="d7c68-132">[ID de la demande client]</span><span class="sxs-lookup"><span data-stu-id="d7c68-132">[Client request ID]</span></span>
  * <span data-ttu-id="d7c68-133">[ID de la demande serveur]</span><span class="sxs-lookup"><span data-stu-id="d7c68-133">[Server request ID]</span></span>
  * <span data-ttu-id="d7c68-134">[Horodatages]</span><span class="sxs-lookup"><span data-stu-id="d7c68-134">[Timestamps]</span></span>
* <span data-ttu-id="d7c68-135">[Instructions pour la résolution des problèmes]</span><span class="sxs-lookup"><span data-stu-id="d7c68-135">[Troubleshooting guidance]</span></span>
  * <span data-ttu-id="d7c68-136">[Les métriques indiquent une valeur AverageE2ELatency élevée et une valeur AverageServerLatency faible]</span><span class="sxs-lookup"><span data-stu-id="d7c68-136">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
  * <span data-ttu-id="d7c68-137">[Les métriques indiquent une valeur AverageE2ELatency faible et une valeur AverageServerLatency faible, mais le client constate une latence élevée]</span><span class="sxs-lookup"><span data-stu-id="d7c68-137">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]</span></span>
  * <span data-ttu-id="d7c68-138">[Les métriques indiquent une valeur AverageServerLatency élevée]</span><span class="sxs-lookup"><span data-stu-id="d7c68-138">[Metrics show high AverageServerLatency]</span></span>
  * <span data-ttu-id="d7c68-139">[Vous constatez des retards inattendus dans la livraison des messages d’une file d’attente]</span><span class="sxs-lookup"><span data-stu-id="d7c68-139">[You are experiencing unexpected delays in message delivery on a queue]</span></span>
  * <span data-ttu-id="d7c68-140">[Les métriques indiquent une augmentation de la valeur PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-140">[Metrics show an increase in PercentThrottlingError]</span></span>
  * <span data-ttu-id="d7c68-141">[Les métriques indiquent une augmentation de la valeur PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-141">[Metrics show an increase in PercentTimeoutError]</span></span>
  * <span data-ttu-id="d7c68-142">[Les métriques indiquent une augmentation de la valeur PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-142">[Metrics show an increase in PercentNetworkError]</span></span>
  * <span data-ttu-id="d7c68-143">[Le client reçoit des messages HTTP 403 (Forbidden)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-143">[The client is receiving HTTP 403 (Forbidden) messages]</span></span>
  * <span data-ttu-id="d7c68-144">[Le client reçoit des messages HTTP 404 (Not found)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-144">[The client is receiving HTTP 404 (Not found) messages]</span></span>
  * <span data-ttu-id="d7c68-145">[Le client reçoit des messages HTTP 409 (Conflict)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-145">[The client is receiving HTTP 409 (Conflict) messages]</span></span>
  * <span data-ttu-id="d7c68-146">[Les métriques indiquent une valeur PercentSuccess faible ou les entrées du journal d'analyse incluent des opérations avec un statut de transaction ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="d7c68-146">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>
  * <span data-ttu-id="d7c68-147">[Les métriques de capacité indiquent une augmentation inattendue de l’utilisation de la capacité de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-147">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>
  * <span data-ttu-id="d7c68-148">[Vous constatez des redémarrages inattendus des machines virtuelles associées à un grand nombre de disques durs virtuels]</span><span class="sxs-lookup"><span data-stu-id="d7c68-148">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>
  * <span data-ttu-id="d7c68-149">[Votre problème provient de l’utilisation de l’émulateur de stockage pour le développement ou les tests]</span><span class="sxs-lookup"><span data-stu-id="d7c68-149">[Your issue arises from using the storage emulator for development or test]</span></span>
  * <span data-ttu-id="d7c68-150">[Vous rencontrez des problèmes pendant l’installation du Kit de développement logiciel (SDK) Azure pour .NET]</span><span class="sxs-lookup"><span data-stu-id="d7c68-150">[You are encountering problems installing the Azure SDK for .NET]</span></span>
  * <span data-ttu-id="d7c68-151">[Vous rencontrez un autre problème avec un service de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-151">[You have a different issue with a storage service]</span></span>
* <span data-ttu-id="d7c68-152">[Annexes]</span><span class="sxs-lookup"><span data-stu-id="d7c68-152">[Appendices]</span></span>
  * <span data-ttu-id="d7c68-153">[Annexe 1 : utilisation de Fiddler pour capturer le trafic HTTP et HTTPS]</span><span class="sxs-lookup"><span data-stu-id="d7c68-153">[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]</span></span>
  * <span data-ttu-id="d7c68-154">[Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau]</span><span class="sxs-lookup"><span data-stu-id="d7c68-154">[Appendix 2: Using Wireshark to capture network traffic]</span></span>
  * <span data-ttu-id="d7c68-155">[Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau]</span><span class="sxs-lookup"><span data-stu-id="d7c68-155">[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]</span></span>
  * <span data-ttu-id="d7c68-156">[Annexe 4 : utilisation d’Excel pour afficher les métriques et les données de journalisation]</span><span class="sxs-lookup"><span data-stu-id="d7c68-156">[Appendix 4: Using Excel to view metrics and log data]</span></span>
  * <span data-ttu-id="d7c68-157">[Annexe 5 : analyse avec Application Insights pour Visual Studio Team Services]</span><span class="sxs-lookup"><span data-stu-id="d7c68-157">[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]</span></span>

## <span data-ttu-id="d7c68-158"><a name="introduction"></a>Introduction</span><span class="sxs-lookup"><span data-stu-id="d7c68-158"><a name="introduction"></a>Introduction</span></span>
<span data-ttu-id="d7c68-159">Ce guide vous explique comment utiliser des fonctionnalités telles que Azure Storage Analytics, la journalisation côté client dans la bibliothèque cliente de Azure Storage, et d’autres outils tiers permettant d’identifier, diagnostiquer et résoudre les problèmes liés à Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-159">This guide shows you how to use features such as Azure Storage Analytics, client-side logging in the Azure Storage Client Library, and other third-party tools to identify, diagnose, and troubleshoot Azure Storage related issues.</span></span>

![][1]

<span data-ttu-id="d7c68-160">*Figure 1 Analyse, diagnostic et résolution des problèmes*</span><span class="sxs-lookup"><span data-stu-id="d7c68-160">*Figure 1 Monitoring, Diagnostics, and Troubleshooting*</span></span>

<span data-ttu-id="d7c68-161">Ce guide est destiné principalement aux développeurs de services en ligne qui utilisent les services Azure Storage et aux professionnels de l’informatique responsables de la gestion de tels services en ligne.</span><span class="sxs-lookup"><span data-stu-id="d7c68-161">This guide is intended to be read primarily by developers of online services that use Azure Storage Services and IT Pros responsible for managing such online services.</span></span> <span data-ttu-id="d7c68-162">Ce guide a pour objectifs de :</span><span class="sxs-lookup"><span data-stu-id="d7c68-162">The goals of this guide are:</span></span>

* <span data-ttu-id="d7c68-163">Vous aider à maintenir l'état d'intégrité et les performances de vos comptes Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-163">To help you maintain the health and performance of your Azure Storage accounts.</span></span>
* <span data-ttu-id="d7c68-164">Mettre à votre disposition les processus et outils nécessaires pour vous aider à déterminer si un problème rencontré dans une application est lié à Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-164">To provide you with the necessary processes and tools to help you decide if an issue or problem in an application relates to Azure Storage.</span></span>
* <span data-ttu-id="d7c68-165">Mettre à votre disposition des mesures concrètes pour la résolution des problèmes liés à Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-165">To provide you with actionable guidance for resolving problems related to Azure Storage.</span></span>

### <span data-ttu-id="d7c68-166"><a name="how-this-guide-is-organized"></a>Organisation de ce guide</span><span class="sxs-lookup"><span data-stu-id="d7c68-166"><a name="how-this-guide-is-organized"></a>How this guide is organized</span></span>
<span data-ttu-id="d7c68-167">La section «[Analyse de votre service de stockage]» explique comment analyser l'état d'intégrité et les performances de vos services Azure Storage à l'aide des métriques Azure Storage Analytics (métriques de stockage).</span><span class="sxs-lookup"><span data-stu-id="d7c68-167">The section "[Monitoring your storage service]" describes how to monitor the health and performance of your Azure Storage services using Azure Storage Analytics Metrics (Storage Metrics).</span></span>

<span data-ttu-id="d7c68-168">La section «[Diagnostic des problèmes de stockage]» explique comment diagnostiquer les problèmes à l'aide de la journalisation Azure Storage Analytics (journalisation du stockage).</span><span class="sxs-lookup"><span data-stu-id="d7c68-168">The section "[Diagnosing storage issues]" describes how to diagnose issues using Azure Storage Analytics Logging (Storage Logging).</span></span> <span data-ttu-id="d7c68-169">Elle explique également comment activer la journalisation côté client à l'aide des fonctionnalités dans une des bibliothèques clientes, telles que la bibliothèque cliente de stockage pour .NET ou le Kit de développement logiciel (SDK) pour Java.</span><span class="sxs-lookup"><span data-stu-id="d7c68-169">It also describes how to enable client-side logging using the facilities in one of the client libraries such as the Storage Client Library for .NET or the Azure SDK for Java.</span></span>

<span data-ttu-id="d7c68-170">La section «[Suivi de bout en bout]» explique comment mettre en corrélation les informations contenues dans divers fichiers journaux et les données métriques.</span><span class="sxs-lookup"><span data-stu-id="d7c68-170">The section "[End-to-end tracing]" describes how you can correlate the information contained in various log files and metrics data.</span></span>

<span data-ttu-id="d7c68-171">La section «[Instructions pour la résolution des problèmes]» fournit des instructions pour la résolution de certains des problèmes de stockage communs.</span><span class="sxs-lookup"><span data-stu-id="d7c68-171">The section "[Troubleshooting guidance]" provides troubleshooting guidance for some of the common storage-related issues you might encounter.</span></span>

<span data-ttu-id="d7c68-172">La section «[Annexes]» inclut des informations concernant l'utilisation d'autres outils tels que Wireshark et Netmon pour l'analyse des données des paquets réseau, Fiddler pour l'analyse des messages HTTP/HTTPS, et l'analyseur de message Microsoft pour la mise en corrélation des données de journalisation.</span><span class="sxs-lookup"><span data-stu-id="d7c68-172">The "[Appendices]" include information about using other tools such as Wireshark and Netmon for analyzing network packet data, Fiddler for analyzing HTTP/HTTPS messages, and Microsoft Message Analyzer for correlating log data.</span></span>

## <span data-ttu-id="d7c68-173"><a name="monitoring-your-storage-service"></a>Analyse de votre service de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-173"><a name="monitoring-your-storage-service"></a>Monitoring your storage service</span></span>
<span data-ttu-id="d7c68-174">Si vous connaissez les outils d’analyse de performances Windows, vous pouvez considérer les métriques de stockage comme l’équivalent, dans Azure Storage, des compteurs de l’Analyseur de performances Windows.</span><span class="sxs-lookup"><span data-stu-id="d7c68-174">If you are familiar with Windows performance monitoring, you can think of Storage Metrics as being an Azure Storage equivalent of Windows Performance Monitor counters.</span></span> <span data-ttu-id="d7c68-175">Les métriques de stockage incluent un vaste éventail de métriques (appelées compteurs dans la terminologie de l’Analyseur de performances Windows) telles que la disponibilité du service, le nombre total de demandes du service ou le pourcentage de demandes réussies du service (pour obtenir une liste complète des métriques disponibles, consultez la section <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Schéma de table de métriques Storage Analytics</a> sur MSDN).</span><span class="sxs-lookup"><span data-stu-id="d7c68-175">In Storage Metrics you will find a comprehensive set of metrics (counters in Windows Performance Monitor terminology) such as service availability, total number of requests to service, or percentage of successful requests to service (for a full list of the available metrics, see <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Storage Analytics Metrics Table Schema</a> on MSDN).</span></span> <span data-ttu-id="d7c68-176">Vous pouvez spécifier si vous désirez que le service de stockage collecte et agrège les métriques toutes les heures ou toutes les minutes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-176">You can specify whether you want the storage service to collect and aggregate metrics every hour or every minute.</span></span> <span data-ttu-id="d7c68-177">Pour plus d’informations sur la façon d’activer les métriques et d’analyser vos comptes de stockage, consultez la section <a href="http://go.microsoft.com/fwlink/?LinkId=510865" target="_blank">Activation des métriques de stockage</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-177">For more information about how to enable metrics and monitor your storage accounts, see <a href="http://go.microsoft.com/fwlink/?LinkId=510865" target="_blank">Enabling storage metrics</a> on MSDN.</span></span>

<span data-ttu-id="d7c68-178">Vous pouvez sélectionner les métriques horaires à afficher dans le portail Azure et configurer les règles de notification par messagerie des administrateurs quand une métrique horaire dépasse un seuil spécifique (pour plus d’informations, consultez la page <a href="http://msdn.microsoft.com/library/azure/dn306638.aspx" target="_blank">Procédure : réception de notifications d’alerte et gestion de règles d’alerte dans Azure</a>).</span><span class="sxs-lookup"><span data-stu-id="d7c68-178">You can choose which hourly metrics you want to display in the Azure Classic Portal and configure rules that notify administrators by email whenever an hourly metric exceeds a particular threshold (for more information, see the page <a href="http://msdn.microsoft.com/library/azure/dn306638.aspx" target="_blank">How to: Receive Alert Notifications and Manage Alert Rules in Azure</a>).</span></span> <span data-ttu-id="d7c68-179">Le service de stockage collecte les métriques du mieux qu’il peut, mais peut ne pas enregistrer toutes les opérations de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-179">The storage service collects metrics using a best effort, but may not record every storage operation.</span></span>

<span data-ttu-id="d7c68-180">La figure 2 ci-dessous illustre la page Monitor du portail Azure Classic, où vous pouvez afficher des métriques telles que la disponibilité, le nombre total de demandes et les valeurs de latence moyennes pour un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-180">Figure 2 below shows the Monitor page in the Azure Classic Portal where you can view metrics such as availability, total requests, and average latency numbers for a storage account.</span></span> <span data-ttu-id="d7c68-181">Une règle de notification a également été configurée afin d'alerter l'administrateur lorsque la disponibilité chute en dessous d'un certain niveau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-181">A notification rule has also been set up to alert an administrator if availability drops below a certain level.</span></span> <span data-ttu-id="d7c68-182">Lorsque ces données sont affichées, l'un des possibles éléments d'enquête est la présence d'un pourcentage inférieur à 100 % dans le service de table (pour plus d'informations, voir la section «[Les métriques indiquent une valeur PercentSuccess faible ou les entrées du journal d'analyse incluent des opérations avec un statut de transaction ClientOtherErrors]»).</span><span class="sxs-lookup"><span data-stu-id="d7c68-182">From viewing this data, one possible area for investigation is the table service success percentage being below 100% (for more information, see the section "[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]").</span></span>

![][2]

<span data-ttu-id="d7c68-183">*Figure 2 Affichage des métriques de stockage dans le portail Azure Classic*</span><span class="sxs-lookup"><span data-stu-id="d7c68-183">*Figure 2 Viewing storage metrics in the Azure Classic Portal*</span></span>

<span data-ttu-id="d7c68-184">Vous devez surveiller en permanence vos applications Azure afin de vous assurer qu’elles sont intègres et fonctionnent comme prévu en :</span><span class="sxs-lookup"><span data-stu-id="d7c68-184">You should continuously monitor your Azure applications to ensure they are healthy and performing as expected by:</span></span>

* <span data-ttu-id="d7c68-185">Établissant certaines métriques de base pour l'application, qui vous permettront de comparer les données actuelles et d'identifier toute modification significative dans le comportement du stockage Azure et votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-185">Establishing some baseline metrics for application that will enable you to compare current data and identify any significant changes in the behavior of Azure storage and your application.</span></span> <span data-ttu-id="d7c68-186">Les valeurs de vos métriques de base seront, dans de nombreux cas, spécifiques à l'application et doivent être établies lors des tests de performances de votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-186">The values of your baseline metrics will, in many cases, be application specific and you should establish them when you are performance testing your application.</span></span>
* <span data-ttu-id="d7c68-187">Enregistrant les métriques par minute et en les utilisant pour analyser activement les erreurs inattendues et anomalies telles que les pics au niveau du nombre d'erreurs ou du taux de demandes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-187">Recording minute metrics and using them to monitor actively for unexpected errors and anomalies such as spikes in error counts or request rates.</span></span>
* <span data-ttu-id="d7c68-188">Enregistrant les métriques horaires et en les utilisant pour analyser les valeurs moyennes telles que le nombre d'erreurs et le taux de demandes moyens.</span><span class="sxs-lookup"><span data-stu-id="d7c68-188">Recording hourly metrics and using them to monitor average values such as average error counts and request rates.</span></span>
* <span data-ttu-id="d7c68-189">Enquêtant sur les problèmes potentiels à l'aide des outils de diagnostic abordés plus bas dans la section «[Diagnostic des problèmes de stockage]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-189">Investigating potential issues using diagnostics tools as discussed later in the section "[Diagnosing storage issues]."</span></span>

<span data-ttu-id="d7c68-190">Les graphiques de la Figure3 ci-dessous illustrent comment la moyenne établie pour les métriques horaires peut cacher certains pics d'activité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-190">The charts in Figure 3 below illustrate how the averaging that occurs for hourly metrics can hide spikes in activity.</span></span> <span data-ttu-id="d7c68-191">Les métriques horaires s'affichent pour indiquer un taux de demandes stable ; les métriques par minute révèlent les fluctuations réelles.</span><span class="sxs-lookup"><span data-stu-id="d7c68-191">The hourly metrics appear to show a steady rate of requests, while the minute metrics reveal the fluctuations that are really taking place.</span></span>

![][3]

<span data-ttu-id="d7c68-192">La suite de cette section décrit quelles métriques vous devriez analyser et pourquoi.</span><span class="sxs-lookup"><span data-stu-id="d7c68-192">The remainder of this section describes what metrics you should monitor and why.</span></span>

### <span data-ttu-id="d7c68-193"><a name="monitoring-service-health"></a>Analyse de l’état d’intégrité du service</span><span class="sxs-lookup"><span data-stu-id="d7c68-193"><a name="monitoring-service-health"></a>Monitoring service health</span></span>
<span data-ttu-id="d7c68-194">Vous pouvez utiliser le [portail Azure Classic](https://manage.windowsazure.com) pour afficher l’état du service de stockage (et des autres services Azure) dans toutes les régions Azure de par le monde.</span><span class="sxs-lookup"><span data-stu-id="d7c68-194">You can use the [Azure Classic Portal](https://manage.windowsazure.com) to view the health of the Storage service (and other Azure services) in all the Azure regions around the world.</span></span> <span data-ttu-id="d7c68-195">Vous pouvez ainsi savoir immédiatement si un problème sur lequel vous n’avez pas de contrôle affecte la région dans laquelle vous utilisez l’application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-195">This enables you to see immediately if an issue outside of your control is affecting the Storage service in the region you use for your application.</span></span>

<span data-ttu-id="d7c68-196">Le portail Azure Classic peut également envoyer des notifications des incidents qui affectent les divers services Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-196">The Azure Classic Portal can also provide with notifications of incidents that affect the various Azure services.</span></span>
<span data-ttu-id="d7c68-197">Remarque : Ces informations étaient auparavant accessibles avec les données d’historique, sur le tableau de bord du service Azure à l’adresse <a href="http://status.azure.com" target="_blank">http://status.azure.com</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-197">Note: This information was previously available, along with historical data, on the Azure Service Dashboard at <a href="http://status.azure.com" target="_blank">http://status.azure.com</a>.</span></span>

<span data-ttu-id="d7c68-198">Le portail Azure recueille les informations d’état à l’intérieur des centres de données Azure (analyse de l’intérieur vers l’extérieur), mais vous pouvez également adopter une approche de l’extérieur vers l’intérieur et générer des transactions synthétiques qui accèdent périodiquement à votre application web Azure à partir de plusieurs emplacements.</span><span class="sxs-lookup"><span data-stu-id="d7c68-198">While the Azure Classic Portal collects health information from inside the Azure datacenters (inside-out monitoring), you could also consider adopting an outside-in approach to generate synthetic transactions that periodically access your Azure-hosted web application from multiple locations.</span></span> <span data-ttu-id="d7c68-199">Les services offerts par <a href="http://www.keynote.com/solutions/monitoring/web-monitoring" target="_blank">Keynote</a>, <a href="https://www.gomeznetworks.com/?g=1" target="_blank">Gomez</a> et Application Insights pour Visual Studio Team Services sont des exemples de ce type d’approche.</span><span class="sxs-lookup"><span data-stu-id="d7c68-199">The services offered by <a href="http://www.keynote.com/solutions/monitoring/web-monitoring" target="_blank">Keynote</a>, <a href="https://www.gomeznetworks.com/?g=1" target="_blank">Gomez</a>, and Application Insights for Visual Studio Team Services are examples of this outside-in approach.</span></span> <span data-ttu-id="d7c68-200">Pour plus d’informations sur Application Insights pour Visual Studio Team Services, consultez «[Annexe 5 : analyse avec Application Insights pour Visual Studio Team Services]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-200">For more information about Application Insights for Visual Studio Team Services, see the appendix "[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]."</span></span>

### <span data-ttu-id="d7c68-201"><a name="monitoring-capacity"></a>Analyse de la capacité</span><span class="sxs-lookup"><span data-stu-id="d7c68-201"><a name="monitoring-capacity"></a>Monitoring capacity</span></span>
<span data-ttu-id="d7c68-202">Les métriques de stockage enregistrent uniquement les métriques de capacité pour le service d’objet blob, car les objets blob constituent généralement la majeure partie des données stockées (lors de l'écriture, il n'est pas possible d'utiliser les métriques de stockage pour analyser la capacité de vos tables et files d'attente).</span><span class="sxs-lookup"><span data-stu-id="d7c68-202">Storage Metrics only stores capacity metrics for the blob service because blobs typically account for the largest proportion of stored data (at the time of writing, it is not possible to use Storage Metrics to monitor the capacity of your tables and queues).</span></span> <span data-ttu-id="d7c68-203">Ces données sont accessibles dans la table **$MetricsCapacityBlob** si vous avez activé l'analyse pour le service d'objet blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-203">You can find this data in the **$MetricsCapacityBlob** table if you have enabled monitoring for the Blob service.</span></span> <span data-ttu-id="d7c68-204">Les métriques de stockage enregistrent ces données une fois par jour, et vous pouvez utiliser la valeur de la **RowKey** pour déterminer si la ligne contient une entité associée à des données utilisateur (valeur **data**) ou des données d’analyse (valeur **analytics**).</span><span class="sxs-lookup"><span data-stu-id="d7c68-204">Storage Metrics records this data once per day, and you can use the value of the **RowKey** to determine whether the row contains an entity that relates to user data (value **data**) or analytics data (value **analytics**).</span></span> <span data-ttu-id="d7c68-205">Chaque entité stockée contient des informations sur la quantité de stockage utilisée (**Capacity** mesurée en octets) et le nombre actuel de conteneurs (**ContainerCount**) et d’objets blob (**ObjectCount**) utilisés dans le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-205">Each stored entity contains information about the amount of storage used (**Capacity** measured in bytes) and the current number of containers (**ContainerCount**) and blobs (**ObjectCount**) in use in the storage account.</span></span> <span data-ttu-id="d7c68-206">Pour plus d’informations sur les métriques de capacité stockées dans la table **$MetricsCapacityBlob**, consultez <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Schéma de table de métriques Storage Analytics</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-206">For more information about the capacity metrics stored in the **$MetricsCapacityBlob** table, see <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Storage Analytics Metrics Table Schema</a> on MSDN.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-207">Ces valeurs doivent être analysées en guise de préavertissement lorsque vous approchez des limites de capacité de votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-207">You should monitor these values for an early warning that you are approaching the capacity limits of your storage account.</span></span> <span data-ttu-id="d7c68-208">Dans le portail Azure, dans la page **Monitor** de votre compte de stockage, vous pouvez ajouter des règles d’alerte pour être averti lorsque l’utilisation agrégée du stockage dépasse ou chute en dessous des seuils que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="d7c68-208">In the Azure Classic Portal, on the **Monitor** page for your storage account, you can add alert rules to notify you if aggregate storage use exceeds or falls below thresholds that you specify.</span></span>
> 
> 

<span data-ttu-id="d7c68-209">Pour plus d’informations sur l’estimation de la taille des divers objets de stockage tels que les objets blob, consultez le billet de blog <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx" target="_blank">Understanding Azure Storage Billing – Bandwidth, Transactions, and Capacity</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-209">For help estimating the size of various storage objects such as blobs, see the blog post <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx" target="_blank">Understanding Azure Storage Billing – Bandwidth, Transactions, and Capacity</a>.</span></span>

### <span data-ttu-id="d7c68-210"><a name="monitoring-availability"></a>Analyse de la disponibilité</span><span class="sxs-lookup"><span data-stu-id="d7c68-210"><a name="monitoring-availability"></a>Monitoring availability</span></span>
<span data-ttu-id="d7c68-211">Vous devez analyser la disponibilité des services de stockage dans votre compte de stockage en examinant la colonne **Availability** de vos tables de métriques horaires ou par minute — **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-211">You should monitor the availability of the storage services in your storage account by monitoring the value in the **Availability** column in the hourly or minute metrics tables — **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span></span> <span data-ttu-id="d7c68-212">La colonne **Availability** contient une valeur de pourcentage qui indique la disponibilité du service ou de l’opération API représentée par la ligne (la **RowKey** s’affiche si la ligne contient des métriques pour l’ensemble du service ou pour une opération API spécifique).</span><span class="sxs-lookup"><span data-stu-id="d7c68-212">The **Availability** column contains a percentage value that indicates the availability of the service or the API operation represented by the row (the **RowKey** shows if the row contains metrics for the service as a whole or for a specific API operation).</span></span>

<span data-ttu-id="d7c68-213">Toute valeur inférieure à 100 % indique que certaines demandes de stockage échouent.</span><span class="sxs-lookup"><span data-stu-id="d7c68-213">Any value less than 100% indicates that some storage requests are failing.</span></span> <span data-ttu-id="d7c68-214">Vous pouvez connaître la raison de l'échec en examinant les autres colonnes dans les données métriques qui indiquent les nombres de demandes avec différents types d'erreur, tels que **ServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-214">You can see why they are failing by examining the other columns in the metrics data that show the numbers of requests with different error types such as **ServerTimeoutError**.</span></span> <span data-ttu-id="d7c68-215">Il est normal que la valeur de la colonne **Availability** descende provisoirement en dessous de 100% pour des raisons telles que des délais d'expiration de serveur temporaires, lorsque le service déplace des partitions afin de mieux équilibrer la charge de la demande ; la logique de nouvelle tentative dans votre application client doit gérer ces conditions intermittentes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-215">You should expect to see **Availability** fall temporarily below 100% for reasons such as transient server timeouts while the service moves partitions to better load-balance request; the retry logic in your client application should handle such intermittent conditions.</span></span> <span data-ttu-id="d7c68-216">La page <a href="http://msdn.microsoft.com/library/azure/hh343260.aspx" target="_blank"></a> énumère les types de transactions que les métriques de stockage incluent dans leur calcul de la valeur **Availability** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-216">The page <a href="http://msdn.microsoft.com/library/azure/hh343260.aspx" target="_blank"></a> lists the transaction types that Storage Metrics includes in its **Availability** calculation.</span></span>

<span data-ttu-id="d7c68-217">Dans le portail Azure, dans la page **Monitor** de votre compte de stockage, vous pouvez ajouter des règles d’alerte pour être averti lorsque la valeur de **Availability** pour un service chute en dessous d’un seuil que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="d7c68-217">In the Azure Classic Portal, on the **Monitor** page for your storage account, you can add alert rules to notify you if **Availability** for a service falls below a threshold that you specify.</span></span>

<span data-ttu-id="d7c68-218">La section «[Instructions pour la résolution des problèmes]» de ce guide décrit certains des problèmes de service de stockage liés à la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-218">The "[Troubleshooting guidance]" section of this guide describes some common storage service issues related to availability.</span></span>

### <span data-ttu-id="d7c68-219"><a name="monitoring-performance"></a>Analyse des performances</span><span class="sxs-lookup"><span data-stu-id="d7c68-219"><a name="monitoring-performance"></a>Monitoring performance</span></span>
<span data-ttu-id="d7c68-220">Pour analyser les performances de vos services de stockage, vous pouvez utiliser les métriques suivantes des tables de métriques horaires ou par minute.</span><span class="sxs-lookup"><span data-stu-id="d7c68-220">To monitor the performance of the storage services, you can use the following metrics from the hourly and minute metrics tables.</span></span>

* <span data-ttu-id="d7c68-221">Les valeurs dans **AverageE2ELatency** et **AverageServerLatency** indiquent le temps moyen nécessaire au service de stockage ou à l’opération API pour traiter les demandes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-221">The values in the **AverageE2ELatency** and **AverageServerLatency** show the average time the storage service or API operation type is taking to process requests.</span></span> <span data-ttu-id="d7c68-222">**AverageE2ELatency** est une mesure de la latence de bout en bout, qui inclut le temps nécessaire pour lire la demande et envoyer la réponse, en plus du temps nécessaire pour traiter la demande (elle inclut donc la latence réseau lorsque la demande parvient au service de stockage) ; **AverageServerLatency** est une mesure du seul temps de traitement et n’inclut donc aucune latence réseau associée à la communication avec le client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-222">**AverageE2ELatency** is a measure of end-to-end latency that includes the time taken to read the request and send the response in addition to the time taken to process the request (therefore includes network latency once the request reaches the storage service); **AverageServerLatency** is a measure of just the processing time and therefore excludes any network latency related to communicating with the client.</span></span> <span data-ttu-id="d7c68-223">Voir la section «[Les métriques indiquent une valeur AverageE2ELatency élevée et une valeur AverageServerLatency faible]» plus bas dans ce guide pour examiner les raisons d'une éventuelle différence importante entre ces deux valeurs.</span><span class="sxs-lookup"><span data-stu-id="d7c68-223">See the section "[Metrics show high AverageE2ELatency and low AverageServerLatency]" later in this guide for a discussion of why there might be a significant difference between these two values.</span></span>
* <span data-ttu-id="d7c68-224">Les valeurs dans les colonnes **TotalIngress** et **TotalEgress** indiquent le volume total des données (en octets) entrant dans et sortant de votre service de stockage, ou via un type d’opération API spécifique.</span><span class="sxs-lookup"><span data-stu-id="d7c68-224">The values in the **TotalIngress** and **TotalEgress** columns show the total amount of data, in bytes, coming in to and going out of your storage service or through a specific API operation type.</span></span>
* <span data-ttu-id="d7c68-225">Les valeurs dans la colonne **TotalRequests** indiquent le nombre total de demandes que le service de stockage de l'opération API reçoit.</span><span class="sxs-lookup"><span data-stu-id="d7c68-225">The values in the **TotalRequests** column show the total number of requests that the storage service of API operation is receiving.</span></span> <span data-ttu-id="d7c68-226">**TotalRequests** est le nombre total de demandes que le service de stockage reçoit.</span><span class="sxs-lookup"><span data-stu-id="d7c68-226">**TotalRequests** is the total number of requests that the storage service receives.</span></span>

<span data-ttu-id="d7c68-227">Toute modification inattendue de ces valeurs est généralement l’indicateur d’un problème qui doit faire l’objet d’une enquête.</span><span class="sxs-lookup"><span data-stu-id="d7c68-227">Typically, you will monitor for unexpected changes in any of these values as an indicator that you have an issue that requires investigation.</span></span>

<span data-ttu-id="d7c68-228">Dans le portail Azure, dans la page **Monitor** de votre compte de stockage, vous pouvez ajouter des règles d’alerte pour être averti lorsque des métriques de performances pour ce service dépassent ou chutent en dessous d’un seuil que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="d7c68-228">In the Azure Classic Portal, on the **Monitor** page for your storage account, you can add alert rules to notify you if any of the performance metrics for this service fall below or exceed a threshold that you specify.</span></span>

<span data-ttu-id="d7c68-229">La section «[Instructions pour la résolution des problèmes]» de ce guide décrit certains des problèmes de service de stockage liés aux performances.</span><span class="sxs-lookup"><span data-stu-id="d7c68-229">The "[Troubleshooting guidance]" section of this guide describes some common storage service issues related to performance.</span></span>

## <span data-ttu-id="d7c68-230"><a name="diagnosing-storage-issues"></a>Diagnostic des problèmes de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-230"><a name="diagnosing-storage-issues"></a>Diagnosing storage issues</span></span>
<span data-ttu-id="d7c68-231">Il existe différentes façons de savoir si votre application a rencontré un problème, dont :</span><span class="sxs-lookup"><span data-stu-id="d7c68-231">There are a number of ways that you might become aware of a problem or issue in your application, these include:</span></span>

* <span data-ttu-id="d7c68-232">Défaillance majeure qui provoque un blocage de l'application ou son arrêt.</span><span class="sxs-lookup"><span data-stu-id="d7c68-232">A major failure that causes the application to crash or to stop working.</span></span>
* <span data-ttu-id="d7c68-233">Changements significatifs des valeurs de base dans les métriques que vous analysez, tel qu'indiqué dans la section précédente «[Analyse de votre service de stockage]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-233">Significant changes from baseline values in the metrics you are monitoring as described in the previous section "[Monitoring your storage service]."</span></span>
* <span data-ttu-id="d7c68-234">Rapports des utilisateurs de votre application indiquant qu'une certaine opération ne s'est pas effectuée comme prévu ou qu'une fonctionnalité est défectueuse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-234">Reports from users of your application that some particular operation didn't complete as expected or that some feature is not working.</span></span>
* <span data-ttu-id="d7c68-235">Erreurs générées au sein de votre application et affichées dans les fichiers journaux ou via d'autres méthodes de notification.</span><span class="sxs-lookup"><span data-stu-id="d7c68-235">Errors generated within your application that appear in log files or through some other notification method.</span></span>

<span data-ttu-id="d7c68-236">Les problèmes associés aux services de stockage Azure se répartissent généralement en quatre catégories principales :</span><span class="sxs-lookup"><span data-stu-id="d7c68-236">Typically, issues related to Azure storage services fall into one of four broad categories:</span></span>

* <span data-ttu-id="d7c68-237">Votre application connaît un problème de performances signalé par les utilisateurs ou révélé par des changements dans les métriques de performances.</span><span class="sxs-lookup"><span data-stu-id="d7c68-237">Your application has a performance issue, either reported by your users, or revealed by changes in the performance metrics.</span></span>
* <span data-ttu-id="d7c68-238">Il existe un problème au niveau de l'infrastructure Azure Storage dans une ou plusieurs régions.</span><span class="sxs-lookup"><span data-stu-id="d7c68-238">There is a problem with the Azure Storage infrastructure in one or more regions.</span></span>
* <span data-ttu-id="d7c68-239">Votre application connaît un problème de performances signalé par les utilisateurs ou révélé par une augmentation dans les métriques de nombre d'erreurs que vous analysez.</span><span class="sxs-lookup"><span data-stu-id="d7c68-239">Your application is encountering an error, either reported by your users, or revealed by an increase in one of the error count metrics you monitor.</span></span>
* <span data-ttu-id="d7c68-240">Pendant le développement et les tests, il se peut que vous utilisiez l'émulateur de stockage local et rencontriez des problèmes spécifiques à son utilisation.</span><span class="sxs-lookup"><span data-stu-id="d7c68-240">During development and test, you may be using the local storage emulator; you may encounter some issues that relate specifically to usage of the storage emulator.</span></span>

<span data-ttu-id="d7c68-241">Les sections suivantes expliquent les étapes à suivre pour le diagnostic et la résolution des problèmes dans chacune de ces quatre catégories.</span><span class="sxs-lookup"><span data-stu-id="d7c68-241">The following sections outline the steps you should follow to diagnose and troubleshoot issues in each of these four categories.</span></span> <span data-ttu-id="d7c68-242">La section «[Instructions pour la résolution des problèmes]» plus bas dans ce guide aborde plus en détail certains des problèmes que vous pouvez être amené à rencontrer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-242">The section "[Troubleshooting guidance]" later in this guide provides more detail for some common issues you may encounter.</span></span>

### <span data-ttu-id="d7c68-243"><a name="service-health-issues"></a>Problèmes d’état d’intégrité du service</span><span class="sxs-lookup"><span data-stu-id="d7c68-243"><a name="service-health-issues"></a>Service health issues</span></span>
<span data-ttu-id="d7c68-244">Les problèmes d’état du service sont généralement des problèmes sur lesquels vous n’avez pas de contrôle.</span><span class="sxs-lookup"><span data-stu-id="d7c68-244">Service health issues are typically outside of your control.</span></span> <span data-ttu-id="d7c68-245">Le portail Azure Classic fournit des informations sur n’importe quel problème en cours avec les services Azure, y compris les services de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-245">The Azure Classic Portal provides information about any ongoing issues with Azure services including storage services.</span></span> <span data-ttu-id="d7c68-246">Si vous avez opté pour un stockage géo-redondant avec accès en lecture lors de la création de votre compte de stockage, lorsque vos données ne sont plus accessibles depuis l'emplacement principal, votre application peut passer provisoirement à une copie en lecture seule sur l'emplacement secondaire.</span><span class="sxs-lookup"><span data-stu-id="d7c68-246">If you opted for Read-Access Geo-Redundant Storage when you created your storage account, then in the event of your data being unavailable in the primary location, your application could switch temporarily to the read-only copy in the secondary location.</span></span> <span data-ttu-id="d7c68-247">Pour ce faire, votre application doit être capable de passer indifféremment des emplacements de stockage principaux aux emplacements de stockage secondaires, et de fonctionner dans un mode de fonctionnalités réduites, avec des données en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="d7c68-247">To do this, your application must be able to switch between using the primary and secondary storage locations, and be able to work in a reduced functionality mode with read-only data.</span></span> <span data-ttu-id="d7c68-248">Les bibliothèques clientes Azure Storage vous permettent de définir une stratégie de nouvelle tentative afin de passer à une lecture depuis le stockage secondaire lorsque la lecture depuis le stockage principal échoue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-248">The Azure Storage Client libraries allow you to define a retry policy that can read from secondary storage in case a read from primary storage fails.</span></span> <span data-ttu-id="d7c68-249">Votre application doit également être capable de reconnaître que les données de l’emplacement secondaire sont cohérentes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-249">Your application also needs to be aware that the data in the secondary location is eventually consistent.</span></span> <span data-ttu-id="d7c68-250">Pour plus d’informations, consultez le billet de blog <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx" target="_blank">Azure Storage Redundancy Options and Read Access Geo Redundant Storage</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-250">For more information, see the blog post <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx" target="_blank">Azure Storage Redundancy Options and Read Access Geo Redundant Storage</a>.</span></span>

### <span data-ttu-id="d7c68-251"><a name="performance-issues"></a>Problèmes de performances</span><span class="sxs-lookup"><span data-stu-id="d7c68-251"><a name="performance-issues"></a>Performance issues</span></span>
<span data-ttu-id="d7c68-252">Les performances d’une application peuvent être subjectives, en particulier du point de vue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-252">The performance of an application can be subjective, especially from a user perspective.</span></span> <span data-ttu-id="d7c68-253">C'est pourquoi il est important de disposer de métriques de base afin de vous aider à identifier les problèmes de performances éventuels.</span><span class="sxs-lookup"><span data-stu-id="d7c68-253">Therefore, it is important to have baseline metrics available to help you identify where there might be a performance issue.</span></span> <span data-ttu-id="d7c68-254">De nombreux facteurs peuvent affecter les performances d'un service de stockage Azure du point de vue de l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="d7c68-254">Many factors might affect the performance of an Azure storage service from the client application perspective.</span></span> <span data-ttu-id="d7c68-255">Ces facteurs peuvent affecter le service de stockage, l'infrastructure cliente ou l'infrastructure réseau ; il est donc important d'établir une stratégie d'identification de la cause initiale du problème de performances.</span><span class="sxs-lookup"><span data-stu-id="d7c68-255">These factors might operate in the storage service, in the client, or in the network infrastructure; therefore it is important to have a strategy for identifying the origin of the performance issue.</span></span>

<span data-ttu-id="d7c68-256">Après avoir identifié l'emplacement probable de la cause du problème de performances à partir des métriques, vous pouvez utiliser les fichiers journaux afin de disposer d'informations détaillées pour un diagnostic et une résolution en profondeur du problème.</span><span class="sxs-lookup"><span data-stu-id="d7c68-256">After you have identified the likely location of the cause of the performance issue from the metrics, you can then use the log files to find detailed information to diagnose and troubleshoot the problem further.</span></span>

<span data-ttu-id="d7c68-257">La section «[Instructions pour la résolution des problèmes]» plus bas dans ce guide aborde plus en détail certains des problèmes de performances que vous pouvez être amené à rencontrer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-257">The section "[Troubleshooting guidance]" later in this guide provides more information about some common performance related issues you may encounter.</span></span>

### <span data-ttu-id="d7c68-258"><a name="diagnosing-errors"></a>Erreurs de diagnostic</span><span class="sxs-lookup"><span data-stu-id="d7c68-258"><a name="diagnosing-errors"></a>Diagnosing errors</span></span>
<span data-ttu-id="d7c68-259">Les utilisateurs de votre application peuvent vous signaler des erreurs identifiées par l'application cliente.</span><span class="sxs-lookup"><span data-stu-id="d7c68-259">Users of your application may notify you of errors reported by the client application.</span></span> <span data-ttu-id="d7c68-260">Les métriques de stockage enregistrent également les décomptes des différents types d’erreurs de vos services de stockage, tels que **NetworkError**, **ClientTimeoutError** ou **AuthorizationError**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-260">Storage Metrics also records counts of different error types from your storage services such as **NetworkError**, **ClientTimeoutError**, or **AuthorizationError**.</span></span> <span data-ttu-id="d7c68-261">Les métriques de stockage enregistrent uniquement les décomptes des différents types d'erreurs, mais vous pouvez obtenir des informations plus détaillées concernant les demandes individuelles en examinant les journaux côté serveur, côté client et réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-261">While Storage Metrics only records counts of different error types, you can obtain more detail about individual requests by examining server-side, client-side, and network logs.</span></span> <span data-ttu-id="d7c68-262">Le code d'état HTTP renvoyé par le service de stockage peut généralement servir d'indication pour expliquer l'échec de la demande.</span><span class="sxs-lookup"><span data-stu-id="d7c68-262">Typically, the HTTP status code returned by the storage service will give an indication of why the request failed.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-263">N’oubliez pas que vous devriez voir des erreurs intermittentes : les erreurs dues à des problèmes réseau temporaires ou les erreurs d’application par exemple.</span><span class="sxs-lookup"><span data-stu-id="d7c68-263">Remember that you should expect to see some intermittent errors: for example, errors due to transient network conditions, or application errors.</span></span>
> 
> 

<span data-ttu-id="d7c68-264">Les ressources suivantes sur MSDN sont utiles pour comprendre les codes d’état et d’erreur liés au stockage :</span><span class="sxs-lookup"><span data-stu-id="d7c68-264">The following resources on MSDN are useful for understanding storage-related status and error codes:</span></span>

* <span data-ttu-id="d7c68-265"><a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Codes d’erreur API REST courants</a></span><span class="sxs-lookup"><span data-stu-id="d7c68-265"><a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Common REST API Error Codes</a></span></span>
* <span data-ttu-id="d7c68-266"><a href="http://msdn.microsoft.com/library/azure/dd179439.aspx" target="_blank">Codes d’erreur de service BLOB</a></span><span class="sxs-lookup"><span data-stu-id="d7c68-266"><a href="http://msdn.microsoft.com/library/azure/dd179439.aspx" target="_blank">Blob Service Error Codes</a></span></span>
* <span data-ttu-id="d7c68-267"><a href="http://msdn.microsoft.com/library/azure/dd179446.aspx" target="_blank">Codes d’erreur de service de File d’attente</a></span><span class="sxs-lookup"><span data-stu-id="d7c68-267"><a href="http://msdn.microsoft.com/library/azure/dd179446.aspx" target="_blank">Queue Service Error Codes</a></span></span>
* <span data-ttu-id="d7c68-268"><a href="http://msdn.microsoft.com/library/azure/dd179438.aspx" target="_blank">Codes d’erreur de service de Table</a></span><span class="sxs-lookup"><span data-stu-id="d7c68-268"><a href="http://msdn.microsoft.com/library/azure/dd179438.aspx" target="_blank">Table Service Error Codes</a></span></span>

### <span data-ttu-id="d7c68-269"><a name="storage-emulator-issues"></a>Problèmes liés à l’émulateur de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-269"><a name="storage-emulator-issues"></a>Storage emulator issues</span></span>
<span data-ttu-id="d7c68-270">Le Kit de développement logiciel (SDK) Azure inclut un émulateur de stockage que vous pouvez exécuter sur une station de travail de développement.</span><span class="sxs-lookup"><span data-stu-id="d7c68-270">The Azure SDK includes a storage emulator you can run on a development workstation.</span></span> <span data-ttu-id="d7c68-271">Cet émulateur simule la plupart des comportements des services de stockage Azure et est utile lors du développement et des tests, vous permettant d’exécuter les applications qui utilisent les services de stockage Azure sans avoir besoin d’un abonnement et d’un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-271">This emulator simulates most of the behavior of the Azure storage services and is useful during development and test, enabling you to run applications that use Azure storage services without the need for an Azure subscription and an Azure storage account.</span></span>

<span data-ttu-id="d7c68-272">La section «[Instructions pour la résolution des problèmes]» de ce guide décrit certains des problèmes liés à l'utilisation de l'émulateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-272">The "[Troubleshooting guidance]" section of this guide describes some common issues encountered using the storage emulator.</span></span>

### <span data-ttu-id="d7c68-273"><a name="storage-logging-tools"></a>Outils de journalisation du stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-273"><a name="storage-logging-tools"></a>Storage logging tools</span></span>
<span data-ttu-id="d7c68-274">La journalisation du stockage permet de journaliser côté serveur les demandes de stockage dans votre compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-274">Storage Logging provides server-side logging of storage requests in your Azure storage account.</span></span> <span data-ttu-id="d7c68-275">Pour plus d’informations concernant l’activation de la journalisation côté serveur et l’accès aux données de journalisation, consultez <a href="http://go.microsoft.com/fwlink/?LinkId=510867" target="_blank">Utilisation de la journalisation côté serveur</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-275">For more information about how to enable server-side logging and access the log data, see <a href="http://go.microsoft.com/fwlink/?LinkId=510867" target="_blank">Using server-side logging</a> on MSDN.</span></span>

<span data-ttu-id="d7c68-276">La bibliothèque cliente de stockage pour .NET vous permet de collecter les données de journalisation côté client, liées aux opérations de stockage réalisées par votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-276">The Storage Client Library for .NET enables you to collect client-side log data that relates to storage operations performed by your application.</span></span> <span data-ttu-id="d7c68-277">Pour plus d’informations concernant l’activation de la journalisation côté client et l’accès aux données de journalisation, consultez <a href="http://go.microsoft.com/fwlink/?LinkId=510868" target="_blank">Journalisation côté client avec la bibliothèque cliente de stockage</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-277">For more information about how to enable client-side logging and access the log data, see <a href="http://go.microsoft.com/fwlink/?LinkId=510868" target="_blank">Client-side logging using the Storage Client Library</a> on MSDN.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-278">Dans certains cas (par ex., erreurs d’autorisation SAS), il peut arriver qu’un utilisateur signale une erreur pour laquelle vous ne trouvez aucune donnée de demande dans les journaux de stockage côté serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-278">In some circumstances (such as SAS authorization failures), a user may report an error for which you can find no request data in the server-side Storage logs.</span></span> <span data-ttu-id="d7c68-279">Vous pouvez utiliser les fonctionnalités de journalisation de la bibliothèque cliente de stockage pour savoir si la cause du problème se situe au niveau client ou utiliser les outils d'analyse de réseau pour examiner le réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-279">You can use the logging capabilities of the Storage Client Library to investigate if the cause of the issue is on the client or use network monitoring tools to investigate the network.</span></span>
> 
> 

### <span data-ttu-id="d7c68-280"><a name="using-network-logging-tools"></a>Utilisation des outils de journalisation réseau</span><span class="sxs-lookup"><span data-stu-id="d7c68-280"><a name="using-network-logging-tools"></a>Using network logging tools</span></span>
<span data-ttu-id="d7c68-281">Vous pouvez capturer le trafic entre le client et le serveur afin d'obtenir des informations détaillées concernant les données échangées entre le client et le serveur, et concernant les conditions réseau sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-281">You can capture the traffic between the client and server to provide detailed information about the data the client and server are exchanging and the underlying network conditions.</span></span> <span data-ttu-id="d7c68-282">Parmi les outils de journalisation réseau utiles, on retrouve :</span><span class="sxs-lookup"><span data-stu-id="d7c68-282">Useful network logging tools include:</span></span>

* <span data-ttu-id="d7c68-283">Fiddler (<a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>) est un proxy de débogage web gratuit qui vous permet d’examiner les en-têtes et données de charge utile des messages de requête et de réponse HTTP et HTTPS.</span><span class="sxs-lookup"><span data-stu-id="d7c68-283">Fiddler (<a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>) is a free web debugging proxy that enables you to examine the headers and payload data of HTTP and HTTPS request and response messages.</span></span> <span data-ttu-id="d7c68-284">Pour plus d’informations, consultez «[Annexe 1 : utilisation de Fiddler pour capturer le trafic HTTP et HTTPS]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-284">For more information, see "[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]".</span></span>
* <span data-ttu-id="d7c68-285">Le Moniteur réseau Microsoft (Netmon) (<a href="http://www.microsoft.com/download/details.aspx?id=4865" target="_blank">http://www.microsoft.com/download/details.aspx?id=4865</a>) et Wireshark (<a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>) sont des analyseurs de protocole réseau gratuits qui vous permettent d’afficher des informations détaillées concernant les paquets pour de nombreux protocoles réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-285">Microsoft Network Monitor (Netmon) (<a href="http://www.microsoft.com/download/details.aspx?id=4865" target="_blank">http://www.microsoft.com/download/details.aspx?id=4865</a>) and Wireshark (<a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>) are free network protocol analyzers that enable you to view detailed packet information for a wide range of network protocols.</span></span> <span data-ttu-id="d7c68-286">Pour plus d’informations sur Wireshark, consultez «[Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-286">For more information about Wireshark, see "[Appendix 2: Using Wireshark to capture network traffic]".</span></span>
* <span data-ttu-id="d7c68-287">L'analyseur de message Microsoft est un outil de Microsoft qui remplace Netmon et qui, en plus de capturer les données des paquets réseau, vous aide à afficher et analyser les données de journalisation capturées à partir d'autres outils.</span><span class="sxs-lookup"><span data-stu-id="d7c68-287">Microsoft Message Analyzer is a tool from Microsoft that supersedes Netmon and that in addition to capturing network packet data, helps you to view and analyze the log data captured from other tools.</span></span> <span data-ttu-id="d7c68-288">Pour plus d’informations, consultez «[Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-288">For more information, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]".</span></span>
* <span data-ttu-id="d7c68-289">Si vous souhaitez effectuer un test de connectivité de base pour vérifier que votre ordinateur client peut se connecter au service de stockage Azure via le réseau, vous ne pouvez pas le faire en utilisant l'outil **ping** standard sur le client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-289">If you want to perform a basic connectivity test to check that your client machine can connect to the Azure storage service over the network, you cannot do this using the standard **ping** tool on the client.</span></span> <span data-ttu-id="d7c68-290">Mais l'outil **tcping** vous permet de vérifier la connectivité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-290">However, you can use the **tcping** tool to check connectivity.</span></span> <span data-ttu-id="d7c68-291">Vous pouvez télécharger **Tcping** à l’adresse <a href="http://www.elifulkerson.com/projects/tcping.php" target="_blank">http://www.elifulkerson.com/projects/tcping.php</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-291">**Tcping** is available for download at <a href="http://www.elifulkerson.com/projects/tcping.php" target="_blank">http://www.elifulkerson.com/projects/tcping.php</a>.</span></span>

<span data-ttu-id="d7c68-292">Dans de nombreux cas, les données de journalisation issues de la journalisation du stockage et de la bibliothèque cliente de stockage seront suffisantes pour diagnostiquer un problème, mais dans certains scénarios, il se peut que vous ayez besoin de plus d’informations que celles fournies par ces outils de journalisation réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-292">In many cases, the log data from Storage Logging and the Storage Client Library will be sufficient to diagnose an issue, but in some scenarios, you may need the more detailed information that these network logging tools can provide.</span></span> <span data-ttu-id="d7c68-293">Par exemple, utiliser Fiddler pour afficher les messages HTTP et HTTPS vous permet d'afficher les données d'en-tête et de charge utile envoyées aux et par les services de stockage, ce qui vous permet de vérifier comment une application cliente effectue les nouvelles tentatives d'opérations de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-293">For example, using Fiddler to view HTTP and HTTPS messages enables you to view header and payload data sent to and from the storage services, which would enable you to examine how a client application retries storage operations.</span></span> <span data-ttu-id="d7c68-294">Les analyseurs de protocole tels que Wireshark fonctionnent au niveau des paquets et vous permettent d'afficher les données TCP afin de résoudre les problèmes de perte de paquets et de connectivité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-294">Protocol analyzers such as Wireshark operate at the packet level enabling you to view TCP data, which would enable you to troubleshoot lost packets and connectivity issues.</span></span> <span data-ttu-id="d7c68-295">L’analyseur de message est capable de fonctionner au niveau des couches HTTP et TCP.</span><span class="sxs-lookup"><span data-stu-id="d7c68-295">Message Analyzer can operate at both HTTP and TCP layers.</span></span>

## <span data-ttu-id="d7c68-296"><a name="end-to-end-tracing"></a>Suivi de bout en bout</span><span class="sxs-lookup"><span data-stu-id="d7c68-296"><a name="end-to-end-tracing"></a>End-to-end tracing</span></span>
<span data-ttu-id="d7c68-297">Le suivi de bout en bout basé sur plusieurs fichiers journaux est une technique utile pour l’identification des problèmes potentiels.</span><span class="sxs-lookup"><span data-stu-id="d7c68-297">End-to-end tracing using a variety of log files is a useful technique for investigating potential issues.</span></span> <span data-ttu-id="d7c68-298">Vous pouvez utiliser les informations de date/heure de vos données métriques pour savoir où commencer à chercher des informations plus détaillées dans vos fichiers journaux afin de résoudre le problème.</span><span class="sxs-lookup"><span data-stu-id="d7c68-298">You can use the date/time information from your metrics data as an indication of where to start looking in the log files for the detailed information that will help you troubleshoot the issue.</span></span>

### <span data-ttu-id="d7c68-299"><a name="correlating-log-data"></a>Corrélation des données de journalisation</span><span class="sxs-lookup"><span data-stu-id="d7c68-299"><a name="correlating-log-data"></a>Correlating log data</span></span>
<span data-ttu-id="d7c68-300">Lors de l'affichage des journaux à partir des applications clientes, des suivis réseau et du stockage côté serveur, leur journalisation est essentielle afin de pouvoir mettre en corrélation les demandes à travers différents fichiers journaux.</span><span class="sxs-lookup"><span data-stu-id="d7c68-300">When viewing logs from client applications, network traces, and server-side storage logging it is critical to be able to correlate requests across the different log files.</span></span> <span data-ttu-id="d7c68-301">Les fichiers journaux incluent un certain nombre de champs différents, utiles en tant qu'identificateurs de corrélation.</span><span class="sxs-lookup"><span data-stu-id="d7c68-301">The log files include a number of different fields that are useful as correlation identifiers.</span></span> <span data-ttu-id="d7c68-302">L'ID de la demande client est le champ le plus utile pour mettre en corrélation les entrées dans les différents journaux.</span><span class="sxs-lookup"><span data-stu-id="d7c68-302">The client request id is the most useful field to use to correlate entries in the different logs.</span></span> <span data-ttu-id="d7c68-303">Mais il peut parfois être utile d'utiliser l'ID de la demande serveur ou les horodatages.</span><span class="sxs-lookup"><span data-stu-id="d7c68-303">However sometimes, it can be useful to use either the server request id or timestamps.</span></span> <span data-ttu-id="d7c68-304">Les sections suivantes expliquent plus en détail ces options.</span><span class="sxs-lookup"><span data-stu-id="d7c68-304">The following sections provide more details about these options.</span></span>

### <span data-ttu-id="d7c68-305"><a name="client-request-id"></a>ID de la demande client</span><span class="sxs-lookup"><span data-stu-id="d7c68-305"><a name="client-request-id"></a>Client request ID</span></span>
<span data-ttu-id="d7c68-306">La bibliothèque cliente de stockage génère automatiquement un ID de demande client unique pour chaque demande.</span><span class="sxs-lookup"><span data-stu-id="d7c68-306">The Storage Client Library automatically generates a unique client request id for every request.</span></span>

* <span data-ttu-id="d7c68-307">Dans le journal côté client créé par la bibliothèque cliente de stockage, l'ID de la demande client s'affiche dans le champ **Client Request ID** de chaque entrée de journal associée à la demande.</span><span class="sxs-lookup"><span data-stu-id="d7c68-307">In the client-side log that the Storage Client Library creates, the client request id appears in the **Client Request ID** field of every log entry relating to the request.</span></span>
* <span data-ttu-id="d7c68-308">Dans un suivi réseau comme celui capturé par Fiddler, l'ID de la demande client s'affiche dans les messages de demande en tant que valeur d'en-tête HTTP **x-ms-client-request-id** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-308">In a network trace such as one captured by Fiddler, the client request id is visible in request messages as the **x-ms-client-request-id** HTTP header value.</span></span>
* <span data-ttu-id="d7c68-309">Dans le journal de journalisation du stockage côté serveur, l’ID de la demande client s’affiche dans la colonne Client request ID.</span><span class="sxs-lookup"><span data-stu-id="d7c68-309">In the server-side Storage Logging log, the client request id appears in the Client request ID column.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-310">Plusieurs demandes peuvent partager le même ID de demande client, car le client peut affecter cette valeur (même si la bibliothèque cliente de stockage affecte une nouvelle valeur automatiquement).</span><span class="sxs-lookup"><span data-stu-id="d7c68-310">It is possible for multiple requests to share the same client request id because the client can assign this value (although the Storage Client Library assigns a new value automatically).</span></span> <span data-ttu-id="d7c68-311">Quand le client effectue de nouvelles tentatives, ces dernières partagent le même ID de demande client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-311">In the case of retries from the client, all attempts share the same client request id.</span></span> <span data-ttu-id="d7c68-312">Quand un lot est envoyé par le client, le lot a un seul ID de demande client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-312">In the case of a batch sent from the client, the batch has a single client request id.</span></span>
> 
> 

### <span data-ttu-id="d7c68-313"><a name="server-request-id"></a>ID de la demande serveur</span><span class="sxs-lookup"><span data-stu-id="d7c68-313"><a name="server-request-id"></a>Server request ID</span></span>
<span data-ttu-id="d7c68-314">Le service de stockage génère automatiquement les ID de demande serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-314">The storage service automatically generates server request ids.</span></span>

* <span data-ttu-id="d7c68-315">Dans le journal de journalisation du stockage côté serveur, l'ID de la demande serveur s'affiche dans la colonne **Request ID header** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-315">In the server-side Storage Logging log, the server request id appears the **Request ID header** column.</span></span>
* <span data-ttu-id="d7c68-316">Dans un suivi réseau comme celui capturé par Fiddler, l'ID de la demande serveur s'affiche dans les messages de réponse en tant que valeur d'en-tête HTTP **x-ms-request-id** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-316">In a network trace such as one captured by Fiddler, the server request id appears in response messages as the **x-ms-request-id** HTTP header value.</span></span>
* <span data-ttu-id="d7c68-317">Dans le journal côté client créé par la bibliothèque cliente de stockage, l'ID de la demande serveur s'affiche dans la colonne **Operation Text** pour l'entrée de journal qui affiche les détails de la réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-317">In the client-side log that the Storage Client Library creates, the server request id appears in the **Operation Text** column for the log entry showing details of the server response.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-318">Le service de stockage affecte toujours un ID de demande serveur unique à chaque demande qu’il reçoit ; par conséquent, chaque nouvelle tentative du client et chaque opération incluse dans un lot a un ID de demande serveur unique.</span><span class="sxs-lookup"><span data-stu-id="d7c68-318">The storage service always assigns a unique server request id to every request it receives, so every retry attempt from the client and every operation included in a batch has a unique server request id.</span></span>
> 
> 

<span data-ttu-id="d7c68-319">Si la bibliothèque cliente de stockage génère une **StorageException** dans le client, la propriété **RequestInformation** contient un objet **RequestResult** qui inclut une propriété **ServiceRequestID**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-319">If the Storage Client Library throws a **StorageException** in the client, the **RequestInformation** property contains a **RequestResult** object that includes a **ServiceRequestID** property.</span></span> <span data-ttu-id="d7c68-320">Vous pouvez également accéder à un objet **RequestResult** à partir d’une instance **OperationContext**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-320">You can also access a **RequestResult** object from an **OperationContext** instance.</span></span>

<span data-ttu-id="d7c68-321">L’exemple de code ci-dessous montre comment définir une valeur **ClientRequestId** personnalisée en associant un objet **OperationContext** à la demande du service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-321">The code sample below demonstrates how to set a custom **ClientRequestId** value by attaching an **OperationContext** object the request to the storage service.</span></span> <span data-ttu-id="d7c68-322">Il montre également comment récupérer la valeur **ServerRequestId** à partir du message de réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-322">It also shows how to retrieve the **ServerRequestId** value from the response message.</span></span>

```csharp
//Parse the connection string for the storage account.
const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Create an Operation Context that includes custom ClientRequestId string based on constants defined within the application along with a Guid.
OperationContext oc = new OperationContext();
oc.ClientRequestID = String.Format("{0} {1} {2} {3}", HOSTNAME, APPNAME, USERID, Guid.NewGuid().ToString());

try
{
    CloudBlobContainer container = blobClient.GetContainerReference("democontainer");
    ICloudBlob blob = container.GetBlobReferenceFromServer("testImage.jpg", null, null, oc);  
    var downloadToPath = string.Format("./{0}", blob.Name);
    using (var fs = File.OpenWrite(downloadToPath))
    {
        blob.DownloadToStream(fs, null, null, oc);
        Console.WriteLine("\t Blob downloaded to file: {0}", downloadToPath);
    }
}
catch (StorageException storageException)
{
    Console.WriteLine("Storage exception {0} occurred", storageException.Message);
    // Multiple results may exist due to client side retry logic - each retried operation will have a unique ServiceRequestId
    foreach (var result in oc.RequestResults)
    {
            Console.WriteLine("HttpStatus: {0}, ServiceRequestId {1}", result.HttpStatusCode, result.ServiceRequestID);
    }
}
```

### <span data-ttu-id="d7c68-323"><a name="timestamps"></a>Horodatages</span><span class="sxs-lookup"><span data-stu-id="d7c68-323"><a name="timestamps"></a>Timestamps</span></span>
<span data-ttu-id="d7c68-324">Vous pouvez également utiliser les horodatages pour trouver des entrées de journal associées, mais sans oublier les éventuelles variations d'horloges entre le client et le serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-324">You can also use timestamps to locate related log entries, but be careful of any clock skew between the client and server that may exist.</span></span> <span data-ttu-id="d7c68-325">Votre recherche des entrées côté serveur correspondantes doit s'appliquer dans une plage de plus ou moins 15minutes par rapport à l'horodatage sur le client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-325">You should search plus or minus 15 minutes for matching server-side entries based on the timestamp on the client.</span></span> <span data-ttu-id="d7c68-326">N’oubliez pas que les métadonnées des objets blob contenant des métriques indiquent la plage de temps pour les métriques stockées dans l’objet blob ; ce qui est utile lorsque vous avez plusieurs objets blob de métriques pour la même minute ou heure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-326">Remember that the blob metadata for the blobs containing metrics indicates the time range for the metrics stored in the blob; this is useful if you have many metrics blobs for the same minute or hour.</span></span>

## <span data-ttu-id="d7c68-327"><a name="troubleshooting-guidance"></a>Instructions pour la résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="d7c68-327"><a name="troubleshooting-guidance"></a>Troubleshooting guidance</span></span>
<span data-ttu-id="d7c68-328">Cette section est destinée à vous aider à diagnostiquer et résoudre certains des problèmes communs que votre application est susceptible de rencontrer lors de l’utilisation des services de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-328">This section will help you with the diagnosis and troubleshooting of some of the common issues your application may encounter when using the Azure storage services.</span></span> <span data-ttu-id="d7c68-329">La liste ci-dessous permet d’identifier les informations pertinentes pour un problème spécifique.</span><span class="sxs-lookup"><span data-stu-id="d7c68-329">Use the list below to locate the information relevant to your specific issue.</span></span>

<span data-ttu-id="d7c68-330">**Arbre de décision pour la résolution des problèmes**</span><span class="sxs-lookup"><span data-stu-id="d7c68-330">**Troubleshooting Decision Tree**</span></span>

- - -
<span data-ttu-id="d7c68-331">Votre problème concerne-t-il les performances d'un des services de stockage ?</span><span class="sxs-lookup"><span data-stu-id="d7c68-331">Does your issue relate to the performance of one of the storage services?</span></span>

* <span data-ttu-id="d7c68-332">[Les métriques indiquent une valeur AverageE2ELatency élevée et une valeur AverageServerLatency faible]</span><span class="sxs-lookup"><span data-stu-id="d7c68-332">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
* <span data-ttu-id="d7c68-333">[Les métriques indiquent une valeur AverageE2ELatency faible et une valeur AverageServerLatency faible, mais le client constate une latence élevée]</span><span class="sxs-lookup"><span data-stu-id="d7c68-333">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]</span></span>
* <span data-ttu-id="d7c68-334">[Les métriques indiquent une valeur AverageServerLatency élevée]</span><span class="sxs-lookup"><span data-stu-id="d7c68-334">[Metrics show high AverageServerLatency]</span></span>
* <span data-ttu-id="d7c68-335">[Vous constatez des retards inattendus dans la livraison des messages d’une file d’attente]</span><span class="sxs-lookup"><span data-stu-id="d7c68-335">[You are experiencing unexpected delays in message delivery on a queue]</span></span>

- - -
<span data-ttu-id="d7c68-336">Votre problème concerne-t-il la disponibilité d’un des services de stockage ?</span><span class="sxs-lookup"><span data-stu-id="d7c68-336">Does your issue relate to the availability of one of the storage services?</span></span>

* <span data-ttu-id="d7c68-337">[Les métriques indiquent une augmentation de la valeur PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-337">[Metrics show an increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="d7c68-338">[Les métriques indiquent une augmentation de la valeur PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-338">[Metrics show an increase in PercentTimeoutError]</span></span>
* <span data-ttu-id="d7c68-339">[Les métriques indiquent une augmentation de la valeur PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-339">[Metrics show an increase in PercentNetworkError]</span></span>

- - -
<span data-ttu-id="d7c68-340">Votre application client reçoit-elle une réponse HTTP 4XX (telle que 404) d’un service de stockage ?</span><span class="sxs-lookup"><span data-stu-id="d7c68-340">Is your client application receiving an HTTP 4XX (such as 404) response from a storage service?</span></span>

* <span data-ttu-id="d7c68-341">[Le client reçoit des messages HTTP 403 (Forbidden)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-341">[The client is receiving HTTP 403 (Forbidden) messages]</span></span>
* <span data-ttu-id="d7c68-342">[Le client reçoit des messages HTTP 404 (Not found)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-342">[The client is receiving HTTP 404 (Not found) messages]</span></span>
* <span data-ttu-id="d7c68-343">[Le client reçoit des messages HTTP 409 (Conflict)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-343">[The client is receiving HTTP 409 (Conflict) messages]</span></span>

- - -
<span data-ttu-id="d7c68-344">[Les métriques indiquent une valeur PercentSuccess faible ou les entrées du journal d'analyse incluent des opérations avec un statut de transaction ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="d7c68-344">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>

- - -
<span data-ttu-id="d7c68-345">[Les métriques de capacité indiquent une augmentation inattendue de l’utilisation de la capacité de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-345">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>

- - -
<span data-ttu-id="d7c68-346">[Vous constatez des redémarrages inattendus des machines virtuelles associées à un grand nombre de disques durs virtuels]</span><span class="sxs-lookup"><span data-stu-id="d7c68-346">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>

- - -
<span data-ttu-id="d7c68-347">[Votre problème provient de l’utilisation de l’émulateur de stockage pour le développement ou les tests]</span><span class="sxs-lookup"><span data-stu-id="d7c68-347">[Your issue arises from using the storage emulator for development or test]</span></span>

- - -
<span data-ttu-id="d7c68-348">[Vous rencontrez des problèmes pendant l’installation du Kit de développement logiciel (SDK) Azure pour .NET]</span><span class="sxs-lookup"><span data-stu-id="d7c68-348">[You are encountering problems installing the Azure SDK for .NET]</span></span>

- - -
<span data-ttu-id="d7c68-349">[Vous rencontrez un autre problème avec un service de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-349">[You have a different issue with a storage service]</span></span>

- - -
### <span data-ttu-id="d7c68-350"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Les métriques indiquent une valeur AverageE2ELatency élevée et une valeur AverageServerLatency faible</span><span class="sxs-lookup"><span data-stu-id="d7c68-350"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show high AverageE2ELatency and low AverageServerLatency</span></span>
<span data-ttu-id="d7c68-351">L’illustration de l’outil d’analyse du portail donne un exemple où la valeur **AverageE2ELatency** est nettement supérieure à la valeur **AverageServerLatency**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-351">The illustration blow from the Azure Classic Portal monitoring tool shows an example where the **AverageE2ELatency** is significantly higher than the **AverageServerLatency**.</span></span>

![][4]

<span data-ttu-id="d7c68-352">Notez que le service de stockage calcule uniquement la métrique **AverageE2ELatency** pour les demandes réussies et, contrairement à la valeur **AverageServerLatency**, inclut le temps nécessaire au client pour envoyer les données et recevoir l’accusé de réception du service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-352">Note that the storage service only calculates the metric **AverageE2ELatency** for successful requests and, unlike **AverageServerLatency**, includes the time the client takes to send the data and receive acknowledgement from the storage service.</span></span> <span data-ttu-id="d7c68-353">Par conséquent, une différence entre les valeurs **AverageE2ELatency** et **AverageServerLatency** peut être due à une réponse lente de l’application client ou aux conditions sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-353">Therefore, a difference between **AverageE2ELatency** and **AverageServerLatency** could be either due to the client application being slow to respond, or due to conditions on the network.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-354">Vous pouvez également afficher les valeurs **E2ELatency** et **ServerLatency** pour des opérations de stockage individuelles dans les données de journalisation du stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-354">You can also view **E2ELatency** and **ServerLatency** for individual storage operations in the Storage Logging log data.</span></span>
> 
> 

#### <a name="investigating-client-performance-issues"></a><span data-ttu-id="d7c68-355">Enquête sur les problèmes de performances client</span><span class="sxs-lookup"><span data-stu-id="d7c68-355">Investigating client performance issues</span></span>
<span data-ttu-id="d7c68-356">Les raisons possibles à une réponse lente du client incluent un nombre limité de connexions ou threads disponibles.</span><span class="sxs-lookup"><span data-stu-id="d7c68-356">Possible reasons for the client responding slowly include having a limited number of available connections or threads.</span></span> <span data-ttu-id="d7c68-357">Il se peut que le problème puisse être résolu en modifiant le code client afin de le rendre plus efficace (par exemple, en utilisant des appels asynchrones vers le service de stockage), ou en utilisant une machine virtuelle plus puissante (avec davantage de cœurs et de mémoire).</span><span class="sxs-lookup"><span data-stu-id="d7c68-357">You may be able to resolve the issue by modifying the client code to be more efficient (for example by using asynchronous calls to the storage service), or by using a larger Virtual Machine (with more cores and more memory).</span></span>

<span data-ttu-id="d7c68-358">Pour les services Table et File d’attente, l’algorithme Nagle peut également provoquer de valeurs élevées de **AverageE2ELatency** par rapport à **AverageServerLatency** : pour plus d’informations, consultez le billet <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx" target="_blank">Nagle’s Algorithm is Not Friendly towards Small Requests</a> sur le blog de l’équipe de Microsoft Stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-358">For the table and queue services, the Nagle algorithm can also cause high **AverageE2ELatency** as compared to **AverageServerLatency**: for more information see the post <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx" target="_blank">Nagle's Algorithm is Not Friendly towards Small Requests</a> on the Microsoft Azure Storage Team Blog.</span></span> <span data-ttu-id="d7c68-359">Vous pouvez désactiver l’algorithme Nagle dans le code en utilisant la classe **ServicePointManager** dans l’espace de noms **System.Net**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-359">You can disable the Nagle algorithm in code by using the **ServicePointManager** class in the **System.Net** namespace.</span></span> <span data-ttu-id="d7c68-360">Cette opération doit être effectuée avant de réaliser des appels vers les services de table et de file d’attente dans votre application, car elle n’affecte pas les connexions déjà ouvertes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-360">You should do this before you make any calls to the table or queue services in your application since this does not affect connections that are already open.</span></span> <span data-ttu-id="d7c68-361">L’exemple suivant provient de la méthode **Application_Start** dans un rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="d7c68-361">The following example comes from the **Application_Start** method in a worker role.</span></span>

```csharp
var storageAccount = CloudStorageAccount.Parse(connStr);
ServicePoint tableServicePoint = ServicePointManager.FindServicePoint(storageAccount.TableEndpoint);
tableServicePoint.UseNagleAlgorithm = false;
ServicePoint queueServicePoint = ServicePointManager.FindServicePoint(storageAccount.QueueEndpoint);
queueServicePoint.UseNagleAlgorithm = false;
```

<span data-ttu-id="d7c68-362">Vous devez consulter les journaux côté client pour savoir combien de demandes votre application cliente soumet, et vérifier la présence dans votre client de goulots d’étranglement au niveau des performances générales de .NET, telles que l’UC, .NET garbage collection, l’utilisation du réseau ou la mémoire (la première étape pour la résolution des problèmes des applications clientes .NET consiste à consulter la section <a href="http://msdn.microsoft.com/library/7fe0dd2y(v=vs.110).aspx" target="_blank">Débogage, suivi et profilage</a> sur MSDN).</span><span class="sxs-lookup"><span data-stu-id="d7c68-362">You should check the client-side logs to see how many requests your client application is submitting, and check for general .NET related performance bottlenecks in your client such as CPU, .NET garbage collection, network utilization, or memory (as a starting point for troubleshooting .NET client applications, see <a href="http://msdn.microsoft.com/library/7fe0dd2y(v=vs.110).aspx" target="_blank">Debugging, Tracing, and Profiling</a> on MSDN).</span></span>

#### <a name="investigating-network-latency-issues"></a><span data-ttu-id="d7c68-363">Enquête sur les problèmes de latence du réseau</span><span class="sxs-lookup"><span data-stu-id="d7c68-363">Investigating network latency issues</span></span>
<span data-ttu-id="d7c68-364">Une latence de bout en bout élevée, causée par le réseau, est généralement associée à des conditions provisoires.</span><span class="sxs-lookup"><span data-stu-id="d7c68-364">Typically, high end-to-end latency caused by the network is due to transient conditions.</span></span> <span data-ttu-id="d7c68-365">Vous pouvez enquêter sur les problèmes de réseau provisoires et permanents (par ex., les paquets perdus) à l'aide d'outils tels que Wireshark ou l'analyseur de message Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d7c68-365">You can investigate both transient and persistent network issues such as dropped packets by using tools such as Wireshark or Microsoft Message Analyzer.</span></span>

<span data-ttu-id="d7c68-366">Pour plus d’informations sur l’utilisation de Wireshark pour résoudre les problèmes de réseau, consultez «[Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-366">For more information about using Wireshark to troubleshoot network issues, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="d7c68-367">Pour plus d’informations sur l’utilisation de l’analyseur de message Microsoft pour résoudre les problèmes de réseau, consultez la section «[Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-367">For more information about using Microsoft Message Analyzer to troubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

### <span data-ttu-id="d7c68-368"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Les métriques indiquent une valeur AverageE2ELatency faible et une valeur AverageServerLatency faible, mais le client constate une latence élevée</span><span class="sxs-lookup"><span data-stu-id="d7c68-368"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency</span></span>
<span data-ttu-id="d7c68-369">Dans ce scénario, la cause la plus probable est un retard des demandes de stockage à atteindre le service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-369">In this scenario, the most likely cause is a delay in the storage requests reaching the storage service.</span></span> <span data-ttu-id="d7c68-370">Vous devez enquêter sur la raison pour laquelle les demandes envoyées par le client ne parviennent pas au service d'objet blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-370">You should investigate why requests from the client are not making it through to the blob service.</span></span>

<span data-ttu-id="d7c68-371">Les raisons possibles à un retard de l'envoi des demandes par le client incluent un nombre limité de connexions ou threads disponibles.</span><span class="sxs-lookup"><span data-stu-id="d7c68-371">Possible reasons for the client delaying sending requests include having a limited number of available connections or threads.</span></span> <span data-ttu-id="d7c68-372">Vous devez également vérifier si le client effectue plusieurs nouvelles tentatives et, si c'est le cas, enquêter sur la raison.</span><span class="sxs-lookup"><span data-stu-id="d7c68-372">You should also check if the client is performing multiple retries, and investigate the reason if this is the case.</span></span> <span data-ttu-id="d7c68-373">Vous pouvez réaliser cette opération par programme en consultant l’objet **OperationContext** associé à la demande et en récupérant la valeur **ServerRequestId**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-373">You can do this programmatically by looking in the **OperationContext** object associated with the request and retrieving the **ServerRequestId** value.</span></span> <span data-ttu-id="d7c68-374">Pour plus d'informations, voir l'exemple de code de la section «[ID de la demande serveur]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-374">For more information, see the code sample in the section "[Server request ID]."</span></span>

<span data-ttu-id="d7c68-375">En l’absence de problèmes au niveau du client, vous pouvez enquêter sur la présence de problèmes potentiels au niveau du réseau, tels que la perte de paquets.</span><span class="sxs-lookup"><span data-stu-id="d7c68-375">If there are no issues in the client, you should investigate potential network issues such as packet loss.</span></span> <span data-ttu-id="d7c68-376">Vous pouvez utiliser des outils tels que Wireshark ou l’analyseur de message Microsoft pour enquêter sur les problèmes de réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-376">You can use tools such as Wireshark or Microsoft Message Analyzer to investigate network issues.</span></span>

<span data-ttu-id="d7c68-377">Pour plus d’informations sur l’utilisation de Wireshark pour résoudre les problèmes de réseau, consultez «[Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-377">For more information about using Wireshark to troubleshoot network issues, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="d7c68-378">Pour plus d’informations sur l’utilisation de l’analyseur de message Microsoft pour résoudre les problèmes de réseau, consultez la section «[Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-378">For more information about using Microsoft Message Analyzer to troubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

### <span data-ttu-id="d7c68-379"><a name="metrics-show-high-AverageServerLatency"></a>Les métriques indiquent une valeur AverageServerLatency élevée</span><span class="sxs-lookup"><span data-stu-id="d7c68-379"><a name="metrics-show-high-AverageServerLatency"></a>Metrics show high AverageServerLatency</span></span>
<span data-ttu-id="d7c68-380">En présence d'une valeur **AverageServerLatency** élevée pour les demandes de téléchargement d'objet blob, vous devez utiliser les journaux de journalisation du stockage pour savoir si des demandes répétées ont été envoyées pour le même objet blob (ou ensemble d'objets blob).</span><span class="sxs-lookup"><span data-stu-id="d7c68-380">In the case of high **AverageServerLatency** for blob download requests, you should use the Storage Logging logs to see if there are repeated requests for the same blob (or set of blobs).</span></span> <span data-ttu-id="d7c68-381">Pour les demandes de chargement d’objet blob, vous devez enquêter sur la taille de blocs utilisés par le client (par exemple, des blocs de taille inférieure à 64 K peuvent entraîner des charges plus lourdes, sauf si les lectures se font également par blocs de taille inférieure à 64 K) et savoir si plusieurs clients chargent des blocs sur le même objet blob en parallèle.</span><span class="sxs-lookup"><span data-stu-id="d7c68-381">For blob upload requests, you should investigate what block size the client is using (for example, blocks less than 64K in size can result in overheads unless the reads are also in less than 64K chunks), and if multiple clients are uploading blocks to the same blob in parallel.</span></span> <span data-ttu-id="d7c68-382">Vous devez également vérifier dans les métriques par minute la présence de pics au niveau du nombre de demandes, provoquant un dépassement des valeurs cibles d’extensibilité par seconde : consultez également la section «[Les métriques indiquent une augmentation de la valeur PercentTimeoutError]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-382">You should also check the per-minute metrics for spikes in the number of requests that result in exceeding the per second scalability targets: also see "[Metrics show an increase in PercentTimeoutError]."</span></span>

<span data-ttu-id="d7c68-383">Si vous constatez une valeur **AverageServerLatency** élevée pour les demandes de téléchargement d'objet blob lorsque des demandes répétées sont envoyées pour le même objet blob ou ensemble d'objets blob, vous devez envisager la mise en cache de ces objets blob à l'aide du cache Azure ou du réseau de distribution de contenu Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-383">If you are seeing high **AverageServerLatency** for blob download requests when there are repeated requests the same blob or set of blobs, then you should consider caching these blobs using Azure Cache or the Azure Content Delivery Network (CDN).</span></span> <span data-ttu-id="d7c68-384">Pour les demandes de chargement, vous devez améliorer le débit en augmentant la taille des blocs.</span><span class="sxs-lookup"><span data-stu-id="d7c68-384">For upload requests, you can improve the throughput by using a larger block size.</span></span> <span data-ttu-id="d7c68-385">Pour les requêtes sur des tables, il est également possible d’implémenter une mise en cache côté client sur les clients qui effectuent les mêmes opérations de requête et où les données ne changent pas fréquemment.</span><span class="sxs-lookup"><span data-stu-id="d7c68-385">For queries to tables, it is also possible to implement client-side caching on clients that perform the same query operations and where the data doesn't change frequently.</span></span>

<span data-ttu-id="d7c68-386">Des valeurs **AverageServerLatency** élevées peuvent également indiquer la présence de tables mal conçues ou de requêtes donnant lieu à des opérations d'analyse ou qui suivent l'anti-modèle d'ajout/ajout de préfixe.</span><span class="sxs-lookup"><span data-stu-id="d7c68-386">High **AverageServerLatency** values can also be a symptom of poorly designed tables or queries that result in scan operations or that follow the append/prepend anti-pattern.</span></span> <span data-ttu-id="d7c68-387">Voir la section «[Les métriques indiquent une augmentation de la valeur PercentThrottlingError]» pour plus d'informations.</span><span class="sxs-lookup"><span data-stu-id="d7c68-387">See "[Metrics show an increase in PercentThrottlingError]" for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-388">Pour obtenir une liste de contrôle exhaustive des performances, consultez [Liste de contrôle des performances et de l’extensibilité de Microsoft Azure Storage](storage-performance-checklist.md).</span><span class="sxs-lookup"><span data-stu-id="d7c68-388">You can find a comprehensive checklist performance checklist here: [Microsoft Azure Storage Performance and Scalability Checklist](storage-performance-checklist.md).</span></span>
> 
> 

### <span data-ttu-id="d7c68-389"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>Vous constatez des retards inattendus dans la livraison des messages d’une file d’attente</span><span class="sxs-lookup"><span data-stu-id="d7c68-389"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>You are experiencing unexpected delays in message delivery on a queue</span></span>
<span data-ttu-id="d7c68-390">Si vous constatez un retard entre le moment où une application ajoute un message à une file d'attente et le moment où ce dernier peut être lu à partir de la file d'attente, procédez comme suit pour diagnostiquer le problème :</span><span class="sxs-lookup"><span data-stu-id="d7c68-390">If you are experiencing a delay between the time an application adds a message to a queue and the time it becomes available to read from the queue, then you should take the following steps to diagnose the issue:</span></span>

* <span data-ttu-id="d7c68-391">Vérifiez que l'application ajoute avec succès les messages à la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="d7c68-391">Verify the application is successfully adding the messages to the queue.</span></span> <span data-ttu-id="d7c68-392">Vérifiez que l'application n'effectue pas plusieurs tentatives de la méthode **AddMessage** avant d'effectuer l'opération avec succès.</span><span class="sxs-lookup"><span data-stu-id="d7c68-392">Check that the application is not retrying the **AddMessage** method several times before succeeding.</span></span> <span data-ttu-id="d7c68-393">Les journaux de la bibliothèque cliente de stockage affichent toutes les tentatives répétées d'opérations de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-393">The Storage Client Library logs will show any repeated retries of storage operations.</span></span>
* <span data-ttu-id="d7c68-394">Vérifiez l'absence de variations d'horloges entre le rôle de travail qui ajoute le message à la file d'attente et le rôle de travail qui lit le message à partir de la file d'attente, donnant l'impression d'un retard de traitement.</span><span class="sxs-lookup"><span data-stu-id="d7c68-394">Verify there is no clock skew between the worker role that adds the message to the queue and the worker role that reads the message from the queue that makes it appear as if there is a delay in processing.</span></span>
* <span data-ttu-id="d7c68-395">Vérifiez si le rôle de travail qui lit les messages à partir de la file d'attente échoue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-395">Check if the worker role that reads the messages from the queue is failing.</span></span> <span data-ttu-id="d7c68-396">Si un client de file d’attente appelle la méthode **GetMessage**, mais ne parvient pas à répondre avec un accusé de réception, le message demeurera invisible dans la file d’attente jusqu’à ce que la période **invisibilityTimeout** ait expiré.</span><span class="sxs-lookup"><span data-stu-id="d7c68-396">If a queue client calls the **GetMessage** method but fails to respond with an acknowledgement, the message will remain invisible on the queue until the **invisibilityTimeout** period expires.</span></span> <span data-ttu-id="d7c68-397">Ce n'est qu'à ce moment que le message pourra à nouveau être traité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-397">At this point, the message becomes available for processing again.</span></span>
* <span data-ttu-id="d7c68-398">Vérifiez si la longueur de la file d'attente augmente avec le temps.</span><span class="sxs-lookup"><span data-stu-id="d7c68-398">Check if the queue length is growing over time.</span></span> <span data-ttu-id="d7c68-399">Cela peut arriver si vous ne disposez pas d'assez de travailleurs pour traiter les messages que les autres travailleurs placent dans la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="d7c68-399">This can occur if you do not have sufficient workers available to process all of the messages that other workers are placing on the queue.</span></span> <span data-ttu-id="d7c68-400">Vous devez également consulter les métriques indiquant si les demandes de suppression échouent et le décompte de résorption de file d’attente des messages, pouvant indiquer l'échec de tentatives répétées de supprimer le message.</span><span class="sxs-lookup"><span data-stu-id="d7c68-400">You should also check the metrics to see if delete requests are failing and the dequeue count on messages, which might indicate repeated failed attempts to delete the message.</span></span>
* <span data-ttu-id="d7c68-401">Vérifiez dans les journaux de journalisation du stockage la présence d’opérations de file d’attente présentant des valeurs **E2ELatency** et **ServerLatency** supérieures à celles prévues, pendant une période plus longue que prévu.</span><span class="sxs-lookup"><span data-stu-id="d7c68-401">Examine the Storage Logging logs for any queue operations that have higher than expected **E2ELatency** and **ServerLatency** values over a longer period of time than usual.</span></span>

### <span data-ttu-id="d7c68-402"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Les métriques indiquent une augmentation de la valeur PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="d7c68-402"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Metrics show an increase in PercentThrottlingError</span></span>
<span data-ttu-id="d7c68-403">Les erreurs de limitation se produisent lorsque vous dépassez les valeurs cibles d’évolutivité d’un service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-403">Throttling errors occur when you exceed the scalability targets of a storage service.</span></span> <span data-ttu-id="d7c68-404">Le service de stockage effectue cette opération afin de s’assurer qu’aucun client ne peut utiliser le service au détriment des autres utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="d7c68-404">The storage service does this to ensure that no single client or tenant can use the service at the expense of others.</span></span> <span data-ttu-id="d7c68-405">Pour plus d’informations sur les cibles d’évolutivité des comptes de stockage et les cibles de performances des partitions dans les comptes de stockage, voir <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Objectifs de performance et évolutivité d'Azure Storage</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-405">For more information, see <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Azure Storage Scalability and Performance Targets</a> for details on scalability targets for storage accounts and performance targets for partitions within storage accounts.</span></span>

<span data-ttu-id="d7c68-406">Si la métrique **PercentThrottlingError** indique une augmentation du pourcentage de demandes qui échouent avec une erreur de limitation, vous devez enquêter sur un des deux scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="d7c68-406">If the **PercentThrottlingError** metric show an increase in the percentage of requests that are failing with a throttling error, you need to investigate one of two scenarios:</span></span>

* <span data-ttu-id="d7c68-407">[Augmentation provisoire de la valeur PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-407">[Transient increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="d7c68-408">[Augmentation permanente de l’erreur PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="d7c68-408">[Permanent increase in PercentThrottlingError error]</span></span>

<span data-ttu-id="d7c68-409">Une augmentation de la valeur **PercentThrottlingError** se produit souvent en même temps qu'une augmentation du nombre de demandes de stockage, ou lors des tests initiaux de la charge de votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-409">An increase in **PercentThrottlingError** often occurs at the same time as an increase in the number of storage requests, or when you are initially load testing your application.</span></span> <span data-ttu-id="d7c68-410">Elle peut également se manifester dans le client sous forme de messages d’état HTTP « 503 Server Busy » ou « 500 Operation Timeout » à partir des opérations de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-410">This may also manifest itself in the client as "503 Server Busy" or "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

#### <span data-ttu-id="d7c68-411"><a name="transient-increase-in-PercentThrottlingError"></a>Augmentation provisoire de la valeur PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="d7c68-411"><a name="transient-increase-in-PercentThrottlingError"></a>Transient increase in PercentThrottlingError</span></span>
<span data-ttu-id="d7c68-412">Si vous constatez des pics de la valeur **PercentThrottlingError** qui coïncident avec des périodes de forte activité de l’application, implémentez une stratégie d’interruption des nouvelles tentatives exponentielle (non linéaire) dans votre client. Cela réduira la charge immédiate sur la partition et aidera votre application à aplanir les pics de trafic.</span><span class="sxs-lookup"><span data-stu-id="d7c68-412">If you are seeing spikes in the value of **PercentThrottlingError** that coincide with periods of high activity for the application, you should implement an exponential (not linear) back off strategy for retries in your client: this will reduce the immediate load on the partition and help your application to smooth out spikes in traffic.</span></span> <span data-ttu-id="d7c68-413">Pour plus d’informations sur la façon d’implémenter des stratégies de nouvelle tentative à l’aide de la bibliothèque cliente de stockage, voir <a href="http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx" target="_blank">Espace de noms Microsoft.WindowsAzure.Storage.RetryPolicies</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-413">For more information about how to implement retry policies using the Storage Client Library, see <a href="http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx" target="_blank">Microsoft.WindowsAzure.Storage.RetryPolicies Namespace</a> on MSDN.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-414">Vous pouvez également constater des pics de la valeur **PercentThrottlingError** qui ne coïncident pas avec des périodes de forte activité de l’application. La cause la plus probable est le déplacement de partitions, par le service de stockage, pour améliorer l’équilibrage de la charge.</span><span class="sxs-lookup"><span data-stu-id="d7c68-414">You may also see spikes in the value of **PercentThrottlingError** that do not coincide with periods of high activity for the application: the most likely cause here is the storage service moving partitions to improve load balancing.</span></span>
> 
> 

#### <span data-ttu-id="d7c68-415"><a name="permanent-increase-in-PercentThrottlingError"></a>Augmentation permanente de l’erreur PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="d7c68-415"><a name="permanent-increase-in-PercentThrottlingError"></a>Permanent increase in PercentThrottlingError error</span></span>
<span data-ttu-id="d7c68-416">Si vous constatez une valeur constamment élevée pour **PercentThrottlingError** à la suite d'une augmentation permanente de vos volumes de transaction, ou lorsque vous effectuez vos tests de charge initiaux sur votre application, vous devez évaluer comment votre application utilise les partitions de stockage et si elle approche des cibles d'évolutivité pour un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-416">If you are seeing a consistently high value for **PercentThrottlingError** following a permanent increase in your transaction volumes, or when you are performing your initial load tests on your application, then you need to evaluate how your application is using storage partitions and whether it is approaching the scalability targets for a storage account.</span></span> <span data-ttu-id="d7c68-417">Par exemple, si vous constatez des erreurs de limitation dans une file d'attente (considérée comme une partition unique), vous devez envisager l'utilisation de files d'attente supplémentaires afin de distribuer les transactions à travers plusieurs partitions.</span><span class="sxs-lookup"><span data-stu-id="d7c68-417">For example, if you are seeing throttling errors on a queue (which counts as a single partition), then you should consider using additional queues to spread the transactions across multiple partitions.</span></span> <span data-ttu-id="d7c68-418">Si vous constatez des erreurs de limitation sur une table, vous devez envisager l’utilisation d’un schéma de partitionnement différent afin de distribuer vos transactions à travers plusieurs partitions en utilisant une plage de valeurs de clé de partition plus large.</span><span class="sxs-lookup"><span data-stu-id="d7c68-418">If you are seeing throttling errors on a table, you need to consider using a different partitioning scheme to spread your transactions across multiple partitions by using a wider range of partition key values.</span></span> <span data-ttu-id="d7c68-419">Une cause fréquente à ce problème est l’anti-modèle d’ajout/ajout de préfixe où vous sélectionnez la date en tant que clé de partition, pour ensuite écrire toutes les données d’un jour spécifique sur une partition : en cas de charge, cela peut entraîner un goulot d’étranglement d’écriture.</span><span class="sxs-lookup"><span data-stu-id="d7c68-419">One common cause of this issue is the prepend/append anti-pattern where you select the date as the partition key and then all data on a particular day is written to one partition: under load, this can result in a write bottleneck.</span></span> <span data-ttu-id="d7c68-420">Vous devez envisager une conception de partitionnement différente ou évaluer s'il ne vaudrait pas mieux utiliser un stockage d'objets blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-420">You should either consider a different partitioning design or evaluate whether using blob storage might be a better solution.</span></span> <span data-ttu-id="d7c68-421">Vous devez également vérifier si la limitation se produit suite à des pics de votre trafic et rechercher des moyens d'assouplir votre modèle de demandes.</span><span class="sxs-lookup"><span data-stu-id="d7c68-421">You should also check if the throttling is occurring as a result of spikes in your traffic and investigate ways of smoothing your pattern of requests.</span></span>

<span data-ttu-id="d7c68-422">Si vous distribuez vos transactions à travers plusieurs partitions, vous devez tenir compte des limites d'évolutivité définies pour le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-422">If you distribute your transactions across multiple partitions, you must still be aware of the scalability limits set for the storage account.</span></span> <span data-ttu-id="d7c68-423">Par exemple, si vous utilisez dix files d'attente, chacune avec une capacité de traitement maximum de 2000 messages de 1Ko par seconde, votre limite globale sera de 20 000 messages par seconde pour le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-423">For example, if you used ten queues each processing the maximum of 2,000 1KB messages per second, you will be at the overall limit of 20,000 messages per second for the storage account.</span></span> <span data-ttu-id="d7c68-424">Si vous devez traiter plus de 20 000 entités par seconde, vous devez envisager l’utilisation de plusieurs comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-424">If you need to process more than 20,000 entities per second, you should consider using multiple storage accounts.</span></span> <span data-ttu-id="d7c68-425">Vous devez également garder à l’esprit que la taille de vos demandes et entités a un impact sur le moment où le service de stockage limite vos clients : si vous recevez des demandes et entités plus larges, vous pourrez être limité plus tôt.</span><span class="sxs-lookup"><span data-stu-id="d7c68-425">You should also bear in mind that the size of your requests and entities has an impact on when the storage service throttles your clients: if you have larger requests and entities, you may be throttled sooner.</span></span>

<span data-ttu-id="d7c68-426">Une requête mal conçue peut également vous amener à atteindre les limites d'évolutivité pour les partitions de table.</span><span class="sxs-lookup"><span data-stu-id="d7c68-426">Inefficient query design can also cause you to hit the scalability limits for table partitions.</span></span> <span data-ttu-id="d7c68-427">Par exemple, une requête avec un filtre qui ne sélectionne qu'un pour cent des entités dans une partition, mais recherche toutes les entités dans une partition devra accéder à chaque entité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-427">For example, a query with a filter that only selects one percent of the entities in a partition but that scans all the entities in a partition will need to access each entity.</span></span> <span data-ttu-id="d7c68-428">Chaque lecture d’entité sera ajoutée au décompte total de transactions dans cette partition, vous amenant à atteindre rapidement les cibles d’évolutivité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-428">Every entity read will count towards the total number of transactions in that partition; therefore, you can easily reach the scalability targets.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-429">Vos tests de performances doivent mettre à jour toutes les requêtes mal conçues dans votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-429">Your performance testing should reveal any inefficient query designs in your application.</span></span>
> 
> 

### <span data-ttu-id="d7c68-430"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Les métriques indiquent une augmentation de la valeur PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="d7c68-430"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Metrics show an increase in PercentTimeoutError</span></span>
<span data-ttu-id="d7c68-431">Vos métriques indiquent une augmentation de la valeur **PercentTimeoutError** pour un de vos services de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-431">Your metrics show an increase in **PercentTimeoutError** for one of your storage services.</span></span> <span data-ttu-id="d7c68-432">En même temps, le client reçoit un grand nombre de messages d'état HTTP « 500 Operation Timeout » à partir des opérations de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-432">At the same time, the client receives a high volume of "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-433">Il se peut qu’apparaissent des erreurs de délai d’expiration provisoires lorsque le service de stockage équilibre les demandes en déplaçant une partition vers un nouveau serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-433">You may see timeout errors temporarily as the storage service load balances requests by moving a partition to a new server.</span></span>
> 
> 

<span data-ttu-id="d7c68-434">La métrique **PercentTimeoutError** est un agrégat des métriques suivantes : **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError** et **SASServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-434">The **PercentTimeoutError** metric is an aggregation of the following metrics: **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError**, and **SASServerTimeoutError**.</span></span>

<span data-ttu-id="d7c68-435">Les délais d'expiration du serveur sont provoqués par une erreur sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-435">The server timeouts are caused by an error on the server.</span></span> <span data-ttu-id="d7c68-436">Les délais d’expiration clients se produisent lorsqu’une opération sur le serveur a dépassé le délai d’expiration spécifié par le client ; par exemple, un client qui utilise la bibliothèque cliente de stockage peut définir un délai d’expiration pour une opération en utilisant la propriété **ServerTimeout** de la classe **QueueRequestOptions**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-436">The client timeouts happen because an operation on the server has exceeded the timeout specified by the client; for example, a client using the Storage Client Library can set a timeout for an operation by using the **ServerTimeout** property of the **QueueRequestOptions** class.</span></span>

<span data-ttu-id="d7c68-437">Les délais d'expiration du serveur indiquent un problème au niveau du service de stockage, qui exige une enquête plus approfondie.</span><span class="sxs-lookup"><span data-stu-id="d7c68-437">Server timeouts indicate a problem with the storage service that requires further investigation.</span></span> <span data-ttu-id="d7c68-438">Vous pouvez utiliser les métriques pour savoir si vous atteignez les limites d'évolutivité pour le service et identifier les pics de trafic susceptibles d'être la cause de ce problème.</span><span class="sxs-lookup"><span data-stu-id="d7c68-438">You can use metrics to see if you are hitting the scalability limits for the service and to identify any spikes in traffic that might be causing this problem.</span></span> <span data-ttu-id="d7c68-439">Si le problème est intermittent, il peut être dû à une activité d'équilibrage de charge dans le service.</span><span class="sxs-lookup"><span data-stu-id="d7c68-439">If the problem is intermittent, it may be due to load-balancing activity in the service.</span></span> <span data-ttu-id="d7c68-440">Si le problème persiste et n'est pas provoqué par le fait que votre application a atteint les limites d'évolutivité du service, vous devez signaler le problème au support.</span><span class="sxs-lookup"><span data-stu-id="d7c68-440">If the problem is persistent and is not caused by your application hitting the scalability limits of the service, you should raise a support issue.</span></span> <span data-ttu-id="d7c68-441">Pour les délais d’expiration clients, vous devez décider si le délai d’expiration est défini sur une valeur appropriée dans le client et soit modifier la valeur de délai d’expiration dans le client, soit rechercher un moyen d’améliorer les performances des opérations dans le service de stockage, par exemple, en optimisant vos requêtes de table ou en réduisant la taille de vos messages.</span><span class="sxs-lookup"><span data-stu-id="d7c68-441">For client timeouts, you must decide if the timeout is set to an appropriate value in the client and either change the timeout value set in the client or investigate how you can improve the performance of the operations in the storage service, for example by optimizing your table queries or reducing the size of your messages.</span></span>

### <span data-ttu-id="d7c68-442"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Les métriques indiquent une augmentation de la valeur PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="d7c68-442"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Metrics show an increase in PercentNetworkError</span></span>
<span data-ttu-id="d7c68-443">Vos métriques indiquent une augmentation de la valeur **PercentNetworkError** pour un de vos services de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-443">Your metrics show an increase in **PercentNetworkError** for one of your storage services.</span></span> <span data-ttu-id="d7c68-444">La métrique **PercentNetworkError** est un agrégat des métriques suivantes : **NetworkError**, **AnonymousNetworkError** et **SASNetworkError**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-444">The **PercentNetworkError** metric is an aggregation of the following metrics: **NetworkError**, **AnonymousNetworkError**, and **SASNetworkError**.</span></span> <span data-ttu-id="d7c68-445">Cela se produit lorsque le service de stockage détecte une erreur de réseau associée à une demande de stockage du client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-445">These occur when the storage service detects a network error when the client makes a storage request.</span></span>

<span data-ttu-id="d7c68-446">La cause la plus fréquente de cette erreur est une déconnexion du client avant l'expiration d'un délai dans le service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-446">The most common cause of this error is a client disconnecting before a timeout expires in the storage service.</span></span> <span data-ttu-id="d7c68-447">Vous devez contrôler le code dans votre client afin de comprendre pourquoi et quand le client s'est déconnecté du service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-447">You should investigate the code in your client to understand why and when the client disconnects from the storage service.</span></span> <span data-ttu-id="d7c68-448">Vous pouvez également utiliser Wireshark, l'analyseur de message Microsoft ou Tcping pour enquêter sur les problèmes de connectivité réseau à partir du client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-448">You can also use Wireshark, Microsoft Message Analyzer, or Tcping to investigate network connectivity issues from the client.</span></span> <span data-ttu-id="d7c68-449">Ces outils sont décrits dans la section [Annexes].</span><span class="sxs-lookup"><span data-stu-id="d7c68-449">These tools are described in the [Appendices].</span></span>

### <span data-ttu-id="d7c68-450"><a name="the-client-is-receiving-403-messages"></a>Le client reçoit des messages HTTP 403 (Forbidden)</span><span class="sxs-lookup"><span data-stu-id="d7c68-450"><a name="the-client-is-receiving-403-messages"></a>The client is receiving HTTP 403 (Forbidden) messages</span></span>
<span data-ttu-id="d7c68-451">Si votre application client génère des erreurs HTTP403 (Forbidden), l'une des causes probables est l'utilisation par le client d'une signature d'accès partagé (SAS) arrivée à expiration lors de l'envoi d'une demande de stockage (d'autres causes possibles incluent les variations d'horloges, les clés non valides et les en-têtes vides).</span><span class="sxs-lookup"><span data-stu-id="d7c68-451">If your client application is throwing HTTP 403 (Forbidden) errors, a likely cause is that the client is using an expired Shared Access Signature (SAS) when it sends a storage request (although other possible causes include clock skew, invalid keys, and empty headers).</span></span> <span data-ttu-id="d7c68-452">Si une clé SAS arrivée à expiration est la cause, aucune entrée ne s'affiche dans les données de journalisation du stockage côté serveur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-452">If an expired SAS key is the cause, you will not see any entries in the server-side Storage Logging log data.</span></span> <span data-ttu-id="d7c68-453">Le tableau suivant inclut un exemple de journal côté client généré par la bibliothèque cliente de stockage, qui illustre ce type de problème :</span><span class="sxs-lookup"><span data-stu-id="d7c68-453">The following table shows a sample from the client-side log generated by the Storage Client Library that illustrates this issue occurring:</span></span>

| <span data-ttu-id="d7c68-454">Source</span><span class="sxs-lookup"><span data-stu-id="d7c68-454">Source</span></span> | <span data-ttu-id="d7c68-455">Commentaires</span><span class="sxs-lookup"><span data-stu-id="d7c68-455">Verbosity</span></span> | <span data-ttu-id="d7c68-456">Commentaires</span><span class="sxs-lookup"><span data-stu-id="d7c68-456">Verbosity</span></span> | <span data-ttu-id="d7c68-457">ID de la demande client</span><span class="sxs-lookup"><span data-stu-id="d7c68-457">Client request id</span></span> | <span data-ttu-id="d7c68-458">Operation Text</span><span class="sxs-lookup"><span data-stu-id="d7c68-458">Operation text</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="d7c68-459">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-459">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-460">Information</span><span class="sxs-lookup"><span data-stu-id="d7c68-460">Information</span></span> |<span data-ttu-id="d7c68-461">3</span><span class="sxs-lookup"><span data-stu-id="d7c68-461">3</span></span> |<span data-ttu-id="d7c68-462">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-462">85d077ab-…</span></span> |<span data-ttu-id="d7c68-463">Démarrage de l'opération avec l'emplacement Primary par mode d'emplacement PrimaryOnly.</span><span class="sxs-lookup"><span data-stu-id="d7c68-463">Starting operation with location Primary per location mode PrimaryOnly.</span></span> |
| <span data-ttu-id="d7c68-464">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-464">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-465">Information</span><span class="sxs-lookup"><span data-stu-id="d7c68-465">Information</span></span> |<span data-ttu-id="d7c68-466">3</span><span class="sxs-lookup"><span data-stu-id="d7c68-466">3</span></span> |<span data-ttu-id="d7c68-467">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-467">85d077ab -…</span></span> |<span data-ttu-id="d7c68-468">Démarrage d’une demande synchrone vers https://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr=c&amp;si=mypolicy&amp;sig=OFnd4Rd7z01fIvh%2BmcR6zbudIH2F5Ikm%2FyhNYZEmJNQ%3D&amp;api-version=2014-02-14.</span><span class="sxs-lookup"><span data-stu-id="d7c68-468">Starting synchronous request to https://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr=c&amp;si=mypolicy&amp;sig=OFnd4Rd7z01fIvh%2BmcR6zbudIH2F5Ikm%2FyhNYZEmJNQ%3D&amp;api-version=2014-02-14.</span></span> |
| <span data-ttu-id="d7c68-469">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-469">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-470">Information</span><span class="sxs-lookup"><span data-stu-id="d7c68-470">Information</span></span> |<span data-ttu-id="d7c68-471">3</span><span class="sxs-lookup"><span data-stu-id="d7c68-471">3</span></span> |<span data-ttu-id="d7c68-472">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-472">85d077ab -…</span></span> |<span data-ttu-id="d7c68-473">Attente de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-473">Waiting for response.</span></span> |
| <span data-ttu-id="d7c68-474">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-474">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-475">Avertissement</span><span class="sxs-lookup"><span data-stu-id="d7c68-475">Warning</span></span> |<span data-ttu-id="d7c68-476">2</span><span class="sxs-lookup"><span data-stu-id="d7c68-476">2</span></span> |<span data-ttu-id="d7c68-477">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-477">85d077ab -…</span></span> |<span data-ttu-id="d7c68-478">Exception levée pendant l’attente de la réponse : Le serveur distant a renvoyé une erreur : (403) Forbidden.</span><span class="sxs-lookup"><span data-stu-id="d7c68-478">Exception thrown while waiting for response: The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="d7c68-479">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-479">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-480">Information</span><span class="sxs-lookup"><span data-stu-id="d7c68-480">Information</span></span> |<span data-ttu-id="d7c68-481">3</span><span class="sxs-lookup"><span data-stu-id="d7c68-481">3</span></span> |<span data-ttu-id="d7c68-482">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-482">85d077ab -…</span></span> |<span data-ttu-id="d7c68-483">Réponse reçue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-483">Response received.</span></span> <span data-ttu-id="d7c68-484">Code d'état = 403, ID de la demande = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="d7c68-484">Status code = 403, Request ID = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="d7c68-485">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-485">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-486">Avertissement</span><span class="sxs-lookup"><span data-stu-id="d7c68-486">Warning</span></span> |<span data-ttu-id="d7c68-487">2</span><span class="sxs-lookup"><span data-stu-id="d7c68-487">2</span></span> |<span data-ttu-id="d7c68-488">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-488">85d077ab -…</span></span> |<span data-ttu-id="d7c68-489">Exception levée pendant l’opération : Le serveur distant a renvoyé une erreur : (403) Forbidden.</span><span class="sxs-lookup"><span data-stu-id="d7c68-489">Exception thrown during the operation: The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="d7c68-490">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-490">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-491">Information</span><span class="sxs-lookup"><span data-stu-id="d7c68-491">Information</span></span> |<span data-ttu-id="d7c68-492">3</span><span class="sxs-lookup"><span data-stu-id="d7c68-492">3</span></span> |<span data-ttu-id="d7c68-493">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-493">85d077ab -…</span></span> |<span data-ttu-id="d7c68-494">Vérification si l’opération doit être tentée à nouveau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-494">Checking if the operation should be retried.</span></span> <span data-ttu-id="d7c68-495">Nombre de nouvelles tentatives = 0, Code d’état HTTP = 403, Exception = Le serveur distant a renvoyé une erreur : (403) Forbidden.</span><span class="sxs-lookup"><span data-stu-id="d7c68-495">Retry count = 0, HTTP status code = 403, Exception = The remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="d7c68-496">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-496">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-497">Information</span><span class="sxs-lookup"><span data-stu-id="d7c68-497">Information</span></span> |<span data-ttu-id="d7c68-498">3</span><span class="sxs-lookup"><span data-stu-id="d7c68-498">3</span></span> |<span data-ttu-id="d7c68-499">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-499">85d077ab -…</span></span> |<span data-ttu-id="d7c68-500">L'emplacement suivant a été défini sur Primary, sur base du mode d'emplacement.</span><span class="sxs-lookup"><span data-stu-id="d7c68-500">The next location has been set to Primary, based on the location mode.</span></span> |
| <span data-ttu-id="d7c68-501">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="d7c68-501">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="d7c68-502">Error</span><span class="sxs-lookup"><span data-stu-id="d7c68-502">Error</span></span> |<span data-ttu-id="d7c68-503">1</span><span class="sxs-lookup"><span data-stu-id="d7c68-503">1</span></span> |<span data-ttu-id="d7c68-504">85d077ab-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-504">85d077ab -…</span></span> |<span data-ttu-id="d7c68-505">La stratégie de nouvelle tentative n’a pas autorisé de nouvelle tentative.</span><span class="sxs-lookup"><span data-stu-id="d7c68-505">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="d7c68-506">Échec avec Le serveur distant a renvoyé une erreur : (403) Forbidden.</span><span class="sxs-lookup"><span data-stu-id="d7c68-506">Failing with The remote server returned an error: (403) Forbidden.</span></span> |

<span data-ttu-id="d7c68-507">Dans ce scénario, vous devez rechercher pourquoi le jeton SAS expire avant que le client n'envoie le jeton au serveur :</span><span class="sxs-lookup"><span data-stu-id="d7c68-507">In this scenario, you should investigate why the SAS token is expiring before the client sends the token to the server:</span></span>

* <span data-ttu-id="d7c68-508">Généralement, vous ne devez pas définir d'heure de début lorsque vous créez une SAS à utiliser immédiatement par un client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-508">Typically, you should not set a start time when you create a SAS for a client to use immediately.</span></span> <span data-ttu-id="d7c68-509">S'il existe de faibles variations d'horloges entre l'hôte qui génère la SAS sur base de l'heure actuelle et le service de stockage, il est possible que le service de stockage reçoive une SAS qui n'est pas encore valide.</span><span class="sxs-lookup"><span data-stu-id="d7c68-509">If there are small clock differences between the host generating the SAS using the current time and the storage service, then it is possible for the storage service to receive a SAS that is not yet valid.</span></span>
* <span data-ttu-id="d7c68-510">Vous ne devez pas définir une durée d'expiration très courte pour une SAS.</span><span class="sxs-lookup"><span data-stu-id="d7c68-510">You should not set a very short expiry time on a SAS.</span></span> <span data-ttu-id="d7c68-511">À nouveau, de petites variations d'horloges entre l'hôte qui génère la SAS et le service de stockage peuvent donner l'impression que la SAS a expiré plus tôt que prévu.</span><span class="sxs-lookup"><span data-stu-id="d7c68-511">Again, small clock differences between the host generating the SAS and the storage service can lead to a SAS apparently expiring earlier than anticipated.</span></span>
* <span data-ttu-id="d7c68-512">Le paramètre de version dans la clé SAS (par exemple **sv=2012-02-12**) correspond-il à la version de la bibliothèque cliente de stockage que vous utilisez ?</span><span class="sxs-lookup"><span data-stu-id="d7c68-512">Does the version parameter in the SAS key (for example **sv=2012-02-12**) match the version of the Storage Client Library you are using.</span></span> <span data-ttu-id="d7c68-513">Vous devez toujours utiliser la dernière version de la bibliothèque cliente de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-513">You should always use the latest version of the Storage Client Library.</span></span> <span data-ttu-id="d7c68-514">Pour plus d’informations sur la gestion des versions du jeton SAS, consultez [Nouveautés de Microsoft Azure Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/14/what-s-new-for-microsoft-azure-storage-at-teched-2014.aspx).</span><span class="sxs-lookup"><span data-stu-id="d7c68-514">For more information about SAS token versioning, see [What's new for Microsoft Azure Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/14/what-s-new-for-microsoft-azure-storage-at-teched-2014.aspx).</span></span>
* * <span data-ttu-id="d7c68-515">Si vous régénérez vos clés d’accès de stockage (cliquez sur **Gérer les clés d’accès** dans n’importe quelle page de votre compte de stockage sur le portail Azure Classic), cela peut invalider tous les jetons SAS existants.</span><span class="sxs-lookup"><span data-stu-id="d7c68-515">If you regenerate your storage access keys (click **Manage Access Keys** on any page in your storage account in the Azure Classic Portal) this can invalidate any existing SAS tokens.</span></span> <span data-ttu-id="d7c68-516">Un problème peut survenir si vous générez des jetons SAS avec une durée d'expiration longue pour les applications clientes dans le cache.</span><span class="sxs-lookup"><span data-stu-id="d7c68-516">This may be an issue if you generate SAS tokens with a long expiry time for client applications to cache.</span></span>

<span data-ttu-id="d7c68-517">Si vous utilisez la bibliothèque cliente de stockage pour générer des jetons SAS, il est facile de créer un jeton valide.</span><span class="sxs-lookup"><span data-stu-id="d7c68-517">If you are using the Storage Client Library to generate SAS tokens, then it is easy to build a valid token.</span></span> <span data-ttu-id="d7c68-518">Toutefois, si vous utilisez l’API REST Stockage et que vous créez des jetons SAS manuellement, vous devez lire attentivement la rubrique <a href="http://msdn.microsoft.com/library/azure/ee395415.aspx" target="_blank">Délégation de l’accès avec une signature d’accès partagé</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-518">However, if you are using the Storage REST API and constructing the SAS tokens by hand you should carefully read the topic <a href="http://msdn.microsoft.com/library/azure/ee395415.aspx" target="_blank">Delegating Access with a Shared Access Signature</a> on MSDN.</span></span>

### <span data-ttu-id="d7c68-519"><a name="the-client-is-receiving-404-messages"></a>Le client reçoit des messages HTTP 404 (Non trouvé)</span><span class="sxs-lookup"><span data-stu-id="d7c68-519"><a name="the-client-is-receiving-404-messages"></a>The client is receiving HTTP 404 (Not found) messages</span></span>
<span data-ttu-id="d7c68-520">Si l’application client reçoit un message HTTP 404 (Non trouvé) du serveur, cela signifie que l’objet que le client tentait d’utiliser (tel qu’une entité, une table, un objet blob, un conteneur ou une file d’attente) n’existe pas dans le service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-520">If the client application receives an HTTP 404 (Not found) message from the server, this implies that the object the client was attempting to use (such as an entity, table, blob, container, or queue) does not exist in the storage service.</span></span> <span data-ttu-id="d7c68-521">Il existe un certain nombre de raisons possibles à ce problème, dont :</span><span class="sxs-lookup"><span data-stu-id="d7c68-521">There are a number of possible reasons for this, such as:</span></span>

* <span data-ttu-id="d7c68-522">[Le client ou un autre processus a supprimé l’objet]</span><span class="sxs-lookup"><span data-stu-id="d7c68-522">[The client or another process previously deleted the object]</span></span>
* <span data-ttu-id="d7c68-523">[Problème d’autorisation de signature d’accès partagé (SAS)]</span><span class="sxs-lookup"><span data-stu-id="d7c68-523">[A Shared Access Signature (SAS) authorization issue]</span></span>
* <span data-ttu-id="d7c68-524">[Le code JavaScript du côté client n’est pas autorisé à accéder à l’objet]</span><span class="sxs-lookup"><span data-stu-id="d7c68-524">[Client-side JavaScript code does not have permission to access the object]</span></span>
* <span data-ttu-id="d7c68-525">[Défaillance réseau]</span><span class="sxs-lookup"><span data-stu-id="d7c68-525">[Network failure]</span></span>

#### <span data-ttu-id="d7c68-526"><a name="client-previously-deleted-the-object"></a>Le client ou un autre processus a supprimé l’objet</span><span class="sxs-lookup"><span data-stu-id="d7c68-526"><a name="client-previously-deleted-the-object"></a>The client or another process previously deleted the object</span></span>
<span data-ttu-id="d7c68-527">Dans les scénarios où le client tente de lire, mettre à jour ou supprimer des données dans un service de stockage, il est habituellement facile d'identifier dans les journaux côté serveur une précédente opération qui a supprimé l'objet en question du service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-527">In scenarios where the client is attempting to read, update, or delete data in a storage service it is usually easy to identify in the server-side logs a previous operation that deleted the object in question from the storage service.</span></span> <span data-ttu-id="d7c68-528">Très souvent, les données de journalisation indiquent qu'un autre utilisateur ou processus a supprimé l'objet.</span><span class="sxs-lookup"><span data-stu-id="d7c68-528">Very often, the log data shows that another user or process deleted the object.</span></span> <span data-ttu-id="d7c68-529">Dans le journal de journalisation du stockage côté serveur, les colonnes operation-type et requested-object-key s'affichent lorsqu'un client a supprimé un objet.</span><span class="sxs-lookup"><span data-stu-id="d7c68-529">In the server-side Storage Logging log, the operation-type and requested-object-key columns show when a client deleted an object.</span></span>

<span data-ttu-id="d7c68-530">Dans le scénario où un client tente d'insérer un objet, la raison pour laquelle cette opération génère une réponse HTTP404 (Not found) peut ne pas être immédiatement identifiable, car le client est en train de créer un objet.</span><span class="sxs-lookup"><span data-stu-id="d7c68-530">In the scenario where a client is attempting to insert an object, it may not be immediately obvious why this results in an HTTP 404 (Not found) response given that the client is creating a new object.</span></span> <span data-ttu-id="d7c68-531">Toutefois, si le client crée un objet blob, il doit être possible de trouver son conteneur ; si le client crée le message, il doit être possible de trouver sa file d'attente, et si le client ajoute une ligne, il doit être possible de trouver sa table.</span><span class="sxs-lookup"><span data-stu-id="d7c68-531">However, if the client is creating a blob it must be able to find the blob container, if the client is creating a message it must be able to find a queue, and if the client is adding a row it must be able to find the table.</span></span>

<span data-ttu-id="d7c68-532">Vous pouvez utiliser le journal côté client de la bibliothèque cliente de stockage pour obtenir des informations plus détaillées concernant l'instant où le client envoie des demandes spécifiques au service de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-532">You can use the client-side log from the Storage Client Library to gain a more detailed understanding of when the client sends specific requests to the storage service.</span></span>

<span data-ttu-id="d7c68-533">Le journal côté client suivant, généré par la bibliothèque cliente de stockage, illustre le problème d'un client incapable de trouver le conteneur de l'objet blob qu'il est en train de créer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-533">The following client-side log generated by the Storage Client library illustrates the problem when the client cannot find the container for the blob it is creating.</span></span> <span data-ttu-id="d7c68-534">Ce journal inclut les détails des opérations de stockage suivantes :</span><span class="sxs-lookup"><span data-stu-id="d7c68-534">This log includes details of the following storage operations:</span></span>

| <span data-ttu-id="d7c68-535">ID de la demande</span><span class="sxs-lookup"><span data-stu-id="d7c68-535">Request ID</span></span> | <span data-ttu-id="d7c68-536">Opération</span><span class="sxs-lookup"><span data-stu-id="d7c68-536">Operation</span></span> |
| --- | --- |
| <span data-ttu-id="d7c68-537">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-537">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-538">**DeleteIfExists** pour supprimer le conteneur de l'objet blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-538">**DeleteIfExists** method to delete the blob container.</span></span> <span data-ttu-id="d7c68-539">Notez que cette opération inclut une demande **HEAD** pour vérifier l’existence du conteneur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-539">Note that this operation includes a **HEAD** request to check for the existence of the container.</span></span> |
| <span data-ttu-id="d7c68-540">e2d06d78…</span><span class="sxs-lookup"><span data-stu-id="d7c68-540">e2d06d78…</span></span> |<span data-ttu-id="d7c68-541">**CreateIfNotExists** pour créer le conteneur de l'objet blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-541">**CreateIfNotExists** method to create the blob container.</span></span> <span data-ttu-id="d7c68-542">Notez que cette opération inclut une demande **HEAD** qui vérifie l’existence du conteneur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-542">Note that this operation includes a **HEAD** request that checks for the existence of the container.</span></span> <span data-ttu-id="d7c68-543">La demande **HEAD** renvoie un message 404, mais continue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-543">The **HEAD** returns a 404 message but continues.</span></span> |
| <span data-ttu-id="d7c68-544">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-544">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-545">**UploadFromStream** pour créer l'objet blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-545">**UploadFromStream** method to create the blob.</span></span> <span data-ttu-id="d7c68-546">La demande **PUT** échoue avec un message 404.</span><span class="sxs-lookup"><span data-stu-id="d7c68-546">The **PUT** request fails with a 404 message</span></span> |

<span data-ttu-id="d7c68-547">Entrées du journal :</span><span class="sxs-lookup"><span data-stu-id="d7c68-547">Log entries:</span></span>

| <span data-ttu-id="d7c68-548">ID de la demande</span><span class="sxs-lookup"><span data-stu-id="d7c68-548">Request ID</span></span> | <span data-ttu-id="d7c68-549">Operation Text</span><span class="sxs-lookup"><span data-stu-id="d7c68-549">Operation Text</span></span> |
| --- | --- |
| <span data-ttu-id="d7c68-550">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-550">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-551">Démarrage d'une demande synchrone vers https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-551">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="d7c68-552">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-552">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-553">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="d7c68-553">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="d7c68-554">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-554">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-555">Attente de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-555">Waiting for response.</span></span> |
| <span data-ttu-id="d7c68-556">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-556">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-557">Réponse reçue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-557">Response received.</span></span> <span data-ttu-id="d7c68-558">Code d’état = 200, ID de la demande = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span><span class="sxs-lookup"><span data-stu-id="d7c68-558">Status code = 200, Request ID = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span></span> |
| <span data-ttu-id="d7c68-559">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-559">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-560">Les en-têtes de réponse ont été traités avec succès ; passage à la suite de l'opération.</span><span class="sxs-lookup"><span data-stu-id="d7c68-560">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="d7c68-561">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-561">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-562">Téléchargement du corps de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-562">Downloading response body.</span></span> |
| <span data-ttu-id="d7c68-563">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-563">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-564">Opération exécutée avec succès.</span><span class="sxs-lookup"><span data-stu-id="d7c68-564">Operation completed successfully.</span></span> |
| <span data-ttu-id="d7c68-565">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-565">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-566">Démarrage d'une demande synchrone vers https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-566">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="d7c68-567">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-567">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-568">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="d7c68-568">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="d7c68-569">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-569">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-570">Attente de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-570">Waiting for response.</span></span> |
| <span data-ttu-id="d7c68-571">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-571">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-572">Réponse reçue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-572">Response received.</span></span> <span data-ttu-id="d7c68-573">Code d'état = 202, ID de la demande = 6ab2a4cf-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="d7c68-573">Status code = 202, Request ID = 6ab2a4cf-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="d7c68-574">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-574">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-575">Les en-têtes de réponse ont été traités avec succès ; passage à la suite de l'opération.</span><span class="sxs-lookup"><span data-stu-id="d7c68-575">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="d7c68-576">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-576">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-577">Téléchargement du corps de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-577">Downloading response body.</span></span> |
| <span data-ttu-id="d7c68-578">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-578">07b26a5d-...</span></span> |<span data-ttu-id="d7c68-579">Opération exécutée avec succès.</span><span class="sxs-lookup"><span data-stu-id="d7c68-579">Operation completed successfully.</span></span> |
| <span data-ttu-id="d7c68-580">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-580">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-581">Démarrage d'une demande synchrone vers https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-581">Starting asynchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span></td> |
| <span data-ttu-id="d7c68-582">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-582">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-583">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="d7c68-583">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="d7c68-584">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-584">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-585">Attente de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-585">Waiting for response.</span></span> |
| <span data-ttu-id="d7c68-586">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-586">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-587">Démarrage d'une demande synchrone vers https://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="d7c68-587">Starting synchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="d7c68-588">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-588">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-589">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="d7c68-589">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="d7c68-590">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-590">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-591">Préparation de l'écriture des données de la demande.</span><span class="sxs-lookup"><span data-stu-id="d7c68-591">Preparing to write request data.</span></span> |
| <span data-ttu-id="d7c68-592">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-592">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-593">Exception levée pendant l’attente de la réponse : Le serveur distant a renvoyé une erreur : (404) Not Found.</span><span class="sxs-lookup"><span data-stu-id="d7c68-593">Exception thrown while waiting for response: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="d7c68-594">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-594">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-595">Réponse reçue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-595">Response received.</span></span> <span data-ttu-id="d7c68-596">Code d'état = 404, ID de la demande = 353ae3bc-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="d7c68-596">Status code = 404, Request ID = 353ae3bc-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="d7c68-597">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-597">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-598">Les en-têtes de réponse ont été traités avec succès ; passage à la suite de l'opération.</span><span class="sxs-lookup"><span data-stu-id="d7c68-598">Response headers were processed successfully, proceeding with the rest of the operation.</span></span> |
| <span data-ttu-id="d7c68-599">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-599">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-600">Téléchargement du corps de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-600">Downloading response body.</span></span> |
| <span data-ttu-id="d7c68-601">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-601">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-602">Opération exécutée avec succès.</span><span class="sxs-lookup"><span data-stu-id="d7c68-602">Operation completed successfully.</span></span> |
| <span data-ttu-id="d7c68-603">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-603">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-604">Démarrage d'une demande synchrone vers https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-604">Starting asynchronous request to https://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="d7c68-605">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-605">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-606">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="d7c68-606">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="d7c68-607">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-607">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-608">Attente de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-608">Waiting for response.</span></span> |
| <span data-ttu-id="d7c68-609">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-609">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-610">Écriture des données de la demande.</span><span class="sxs-lookup"><span data-stu-id="d7c68-610">Writing request data.</span></span> |
| <span data-ttu-id="d7c68-611">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-611">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-612">Attente de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-612">Waiting for response.</span></span> |
| <span data-ttu-id="d7c68-613">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-613">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-614">Exception levée pendant l’attente de la réponse : Le serveur distant a renvoyé une erreur : (409) Conflict.</span><span class="sxs-lookup"><span data-stu-id="d7c68-614">Exception thrown while waiting for response: The remote server returned an error: (409) Conflict..</span></span> |
| <span data-ttu-id="d7c68-615">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-615">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-616">Réponse reçue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-616">Response received.</span></span> <span data-ttu-id="d7c68-617">Code d’état = 409, ID de la demande = c27da20e-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="d7c68-617">Status code = 409, Request ID = c27da20e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="d7c68-618">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-618">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-619">Erreur de téléchargement du corps de la réponse.</span><span class="sxs-lookup"><span data-stu-id="d7c68-619">Downloading error response body.</span></span> |
| <span data-ttu-id="d7c68-620">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-620">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-621">Exception levée pendant l’attente de la réponse : Le serveur distant a renvoyé une erreur : (404) Not Found.</span><span class="sxs-lookup"><span data-stu-id="d7c68-621">Exception thrown while waiting for response: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="d7c68-622">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-622">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-623">Réponse reçue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-623">Response received.</span></span> <span data-ttu-id="d7c68-624">Code d’état = 404, ID de la demande = 0eaeab3e-..., Content-MD5 = , ETag = .</span><span class="sxs-lookup"><span data-stu-id="d7c68-624">Status code = 404, Request ID = 0eaeab3e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="d7c68-625">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-625">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-626">Exception levée pendant l’opération : Le serveur distant a renvoyé une erreur : (404) Not Found.</span><span class="sxs-lookup"><span data-stu-id="d7c68-626">Exception thrown during the operation: The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="d7c68-627">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-627">de8b1c3c-...</span></span> |<span data-ttu-id="d7c68-628">La stratégie de nouvelle tentative n’a pas autorisé de nouvelle tentative.</span><span class="sxs-lookup"><span data-stu-id="d7c68-628">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="d7c68-629">Échec avec Le serveur distant a renvoyé une erreur : (404) Not Found.</span><span class="sxs-lookup"><span data-stu-id="d7c68-629">Failing with The remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="d7c68-630">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="d7c68-630">e2d06d78-...</span></span> |<span data-ttu-id="d7c68-631">La stratégie de nouvelle tentative n’a pas autorisé de nouvelle tentative.</span><span class="sxs-lookup"><span data-stu-id="d7c68-631">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="d7c68-632">Échec avec Le serveur distant a renvoyé une erreur : (409) Conflict.</span><span class="sxs-lookup"><span data-stu-id="d7c68-632">Failing with The remote server returned an error: (409) Conflict..</span></span> |

<span data-ttu-id="d7c68-633">Dans cet exemple, le journal indique que le client entrelace les demandes de la méthode **CreateIfNotExists** (ID de demande e2d06d78…) avec les demandes de la méthode **UploadFromStream** (de8b1c3c-...) ; cela est dû au fait que l’application cliente appelle ces méthodes de façon asynchrone.</span><span class="sxs-lookup"><span data-stu-id="d7c68-633">In this example, the log shows that the client is interleaving requests from the **CreateIfNotExists** method (request id e2d06d78…) with the requests from the **UploadFromStream** method (de8b1c3c-...); this is happening because the client application is invoking these methods asynchronously.</span></span> <span data-ttu-id="d7c68-634">Vous devez modifier le code asynchrone dans le client de façon à ce qu'il crée le conteneur avant de tenter de charger des données dans un objet blob de ce conteneur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-634">You should modify the asynchronous code in the client to ensure that it creates the container before attempting to upload any data to a blob in that container.</span></span> <span data-ttu-id="d7c68-635">Idéalement, vous devriez créer tous vos conteneurs à l’avance.</span><span class="sxs-lookup"><span data-stu-id="d7c68-635">Ideally, you should create all your containers in advance.</span></span>

#### <span data-ttu-id="d7c68-636"><a name="SAS-authorization-issue"></a>Problème d’autorisation de signature d’accès partagé (SAP)</span><span class="sxs-lookup"><span data-stu-id="d7c68-636"><a name="SAS-authorization-issue"></a>A Shared Access Signature (SAS) authorization issue</span></span>
<span data-ttu-id="d7c68-637">Si l’application cliente tente d’utiliser une clé SAS qui n’inclut pas les autorisations requises pour l’opération, le service de stockage renvoie un message HTTP 404 (Non trouvé) au client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-637">If the client application attempts to use a SAS key that does not include the necessary permissions for the operation, the storage service returns an HTTP 404 (Not found) message to the client.</span></span> <span data-ttu-id="d7c68-638">Vous verrez également apparaître une valeur **SASAuthorizationError** non nulle dans les métriques.</span><span class="sxs-lookup"><span data-stu-id="d7c68-638">At the same time, you will also see a non-zero value for **SASAuthorizationError** in the metrics.</span></span>

<span data-ttu-id="d7c68-639">Le tableau suivant donne un exemple de message de journal côté serveur à partir du fichier journal de journalisation du stockage :</span><span class="sxs-lookup"><span data-stu-id="d7c68-639">The following table shows a sample server-side log message from the Storage Logging log file:</span></span>

| <span data-ttu-id="d7c68-640">Nom</span><span class="sxs-lookup"><span data-stu-id="d7c68-640">Name</span></span> | <span data-ttu-id="d7c68-641">Valeur</span><span class="sxs-lookup"><span data-stu-id="d7c68-641">Value</span></span> |
| --- | --- |
| <span data-ttu-id="d7c68-642">Heure de début de la demande</span><span class="sxs-lookup"><span data-stu-id="d7c68-642">Request start time</span></span> | <span data-ttu-id="d7c68-643">2014-05-30T06:17:48.4473697Z</span><span class="sxs-lookup"><span data-stu-id="d7c68-643">2014-05-30T06:17:48.4473697Z</span></span> |
| <span data-ttu-id="d7c68-644">Type d'opération</span><span class="sxs-lookup"><span data-stu-id="d7c68-644">Operation type</span></span>     | <span data-ttu-id="d7c68-645">GetBlobProperties</span><span class="sxs-lookup"><span data-stu-id="d7c68-645">GetBlobProperties</span></span>            |
| <span data-ttu-id="d7c68-646">État de la demande</span><span class="sxs-lookup"><span data-stu-id="d7c68-646">Request status</span></span>     | <span data-ttu-id="d7c68-647">SASAuthorizationError</span><span class="sxs-lookup"><span data-stu-id="d7c68-647">SASAuthorizationError</span></span>        |
| <span data-ttu-id="d7c68-648">Code d'état HTTP</span><span class="sxs-lookup"><span data-stu-id="d7c68-648">HTTP status code</span></span>   | <span data-ttu-id="d7c68-649">404</span><span class="sxs-lookup"><span data-stu-id="d7c68-649">404</span></span>                          |
| <span data-ttu-id="d7c68-650">Type d'authentification</span><span class="sxs-lookup"><span data-stu-id="d7c68-650">Authentication type</span></span>| <span data-ttu-id="d7c68-651">Sas</span><span class="sxs-lookup"><span data-stu-id="d7c68-651">Sas</span></span>                          |
| <span data-ttu-id="d7c68-652">Type de service</span><span class="sxs-lookup"><span data-stu-id="d7c68-652">Service type</span></span>       | <span data-ttu-id="d7c68-653">Blob</span><span class="sxs-lookup"><span data-stu-id="d7c68-653">Blob</span></span>                         |
| <span data-ttu-id="d7c68-654">URL de la demande</span><span class="sxs-lookup"><span data-stu-id="d7c68-654">Request URL</span></span>        | <span data-ttu-id="d7c68-655">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span><span class="sxs-lookup"><span data-stu-id="d7c68-655">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span></span> |
| <span data-ttu-id="d7c68-656">nbsp;</span><span class="sxs-lookup"><span data-stu-id="d7c68-656">nbsp;</span></span>              |   <span data-ttu-id="d7c68-657">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span><span class="sxs-lookup"><span data-stu-id="d7c68-657">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span></span> |
| <span data-ttu-id="d7c68-658">Request ID header</span><span class="sxs-lookup"><span data-stu-id="d7c68-658">Request id header</span></span>  | <span data-ttu-id="d7c68-659">a1f348d5-8032-4912-93ef-b393e5252a3b</span><span class="sxs-lookup"><span data-stu-id="d7c68-659">a1f348d5-8032-4912-93ef-b393e5252a3b</span></span> |
| <span data-ttu-id="d7c68-660">ID de la demande client</span><span class="sxs-lookup"><span data-stu-id="d7c68-660">Client request ID</span></span>  | <span data-ttu-id="d7c68-661">2d064953-8436-4ee0-aa0c-65cb874f7929</span><span class="sxs-lookup"><span data-stu-id="d7c68-661">2d064953-8436-4ee0-aa0c-65cb874f7929</span></span> |

<span data-ttu-id="d7c68-662">Vous devez rechercher pourquoi l’application cliente tente d’effectuer une opération qu’elle n’est pas autorisée à effectuer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-662">You should investigate why your client application is attempting to perform an operation it has not been granted permissions for.</span></span>

#### <span data-ttu-id="d7c68-663"><a name="JavaScript-code-does-not-have-permission"></a>Le code JavaScript du côté client n’est pas autorisé à accéder à l’objet</span><span class="sxs-lookup"><span data-stu-id="d7c68-663"><a name="JavaScript-code-does-not-have-permission"></a>Client-side JavaScript code does not have permission to access the object</span></span>
<span data-ttu-id="d7c68-664">Si vous utilisez un client JavaScript et que le service de stockage renvoie des messages HTTP 404, vous devez vérifier la présence des erreurs JavaScript suivantes dans le navigateur :</span><span class="sxs-lookup"><span data-stu-id="d7c68-664">If you are using a JavaScript client and the storage service is returning HTTP 404 messages, you check for the following JavaScript errors in the browser:</span></span>

```
SEC7120: Origin http://localhost:56309 not found in Access-Control-Allow-Origin header.
SCRIPT7002: XMLHttpRequest: Network Error 0x80070005, Access is denied.
```

> [!NOTE]
> <span data-ttu-id="d7c68-665">Vous pouvez utiliser les Outils de développement F12 dans Internet Explorer pour procéder au suivi des messages échangés entre le navigateur et le service de stockage lors de la résolution des problèmes JavaScript côté client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-665">You can use the F12 Developer Tools in Internet Explorer to trace the messages exchanged between the browser and the storage service when you are troubleshooting client-side JavaScript issues.</span></span>
> 
> 

<span data-ttu-id="d7c68-666">Ces erreurs sont dues au fait que le navigateur implémente la restriction de sécurité <a href="http://www.w3.org/Security/wiki/Same_Origin_Policy" target="_blank">same-origin policy</a>, qui empêche une page web d’appeler une API dans un domaine différent de celui dont la page provient.</span><span class="sxs-lookup"><span data-stu-id="d7c68-666">These errors occur because the web browser implements the <a href="http://www.w3.org/Security/wiki/Same_Origin_Policy" target="_blank">same-origin policy</a> security restriction that prevents a web page from calling an API in a different domain from the domain the page comes from.</span></span>

<span data-ttu-id="d7c68-667">Pour contourner le problème JavaScript, vous devez configurer le service Partage des ressources cross-origin (CORS) pour le service de stockage auquel le client accède.</span><span class="sxs-lookup"><span data-stu-id="d7c68-667">To work around the JavaScript issue, you can configure Cross Origin Resource Sharing (CORS) for the storage service the client is accessing.</span></span> <span data-ttu-id="d7c68-668">Pour plus d’informations, voir <a href="http://msdn.microsoft.com/library/azure/dn535601.aspx" target="_blank">Prise en charge du service Partage des ressources cross-origine (CORS) pour les services Azure Storage</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-668">For more information, see <a href="http://msdn.microsoft.com/library/azure/dn535601.aspx" target="_blank">Cross-Origin Resource Sharing (CORS) Support for Azure Storage Services</a> on MSDN.</span></span>

<span data-ttu-id="d7c68-669">L'exemple de code suivant montre comment configurer votre service d'objet blob afin de permettre l'exécution de JavaScript dans le domaine Contoso pour accéder à un objet blob dans votre service de stockage d'objets blob :</span><span class="sxs-lookup"><span data-stu-id="d7c68-669">The following code sample shows how to configure your blob service to allow JavaScript running in the Contoso domain to access a blob in your blob storage service:</span></span>

```csharp
CloudBlobClient client = new CloudBlobClient(blobEndpoint, new StorageCredentials(accountName, accountKey));
// Set the service properties.
ServiceProperties sp = client.GetServiceProperties();
sp.DefaultServiceVersion = "2013-08-15";
CorsRule cr = new CorsRule();
cr.AllowedHeaders.Add("*");
cr.AllowedMethods = CorsHttpMethods.Get | CorsHttpMethods.Put;
cr.AllowedOrigins.Add("http://www.contoso.com");
cr.ExposedHeaders.Add("x-ms-*");
cr.MaxAgeInSeconds = 5;
sp.Cors.CorsRules.Clear();
sp.Cors.CorsRules.Add(cr);
client.SetServiceProperties(sp);
```

#### <span data-ttu-id="d7c68-670"><a name="network-failure"></a>Défaillance réseau</span><span class="sxs-lookup"><span data-stu-id="d7c68-670"><a name="network-failure"></a>Network Failure</span></span>
<span data-ttu-id="d7c68-671">Dans certaines circonstances, la perte de paquets réseau peut amener le service de stockage à renvoyer des messages HTTP 404 au client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-671">In some circumstances, lost network packets can lead to the storage service returning HTTP 404 messages to the client.</span></span> <span data-ttu-id="d7c68-672">Par exemple, lorsque l'application cliente supprime une entité du service de table, le client génère une exception de stockage avec un message d'état « HTTP 404 (Not Found) » du service de table.</span><span class="sxs-lookup"><span data-stu-id="d7c68-672">For example, when your client application is deleting an entity from the table service you see the client throw a storage exception reporting an "HTTP 404 (Not Found)" status message from the table service.</span></span> <span data-ttu-id="d7c68-673">Lorsque vous recherchez la table dans le service de stockage de table, vous constatez que le service a supprimé l'entité comme prévu.</span><span class="sxs-lookup"><span data-stu-id="d7c68-673">When you investigate the table in the table storage service, you see that the service did delete the entity as requested.</span></span>

<span data-ttu-id="d7c68-674">Les détails de l’exception dans le client incluent l’ID de demande (7e84f12d...) affecté par le service de Table pour la demande : vous pouvez utiliser ces informations pour rechercher les détails de la demande dans les journaux de stockage côté serveur en effectuant une recherche dans la colonne **request-id-header** du fichier journal.</span><span class="sxs-lookup"><span data-stu-id="d7c68-674">The exception details in the client include the request id (7e84f12d…) assigned by the table service for the request: you can use this information to locate the request details in the server-side storage logs by searching in the **request-id-header** column in the log file.</span></span> <span data-ttu-id="d7c68-675">Vous pouvez également utiliser les métriques pour savoir quand ce type d’erreurs se produit, puis effectuer une recherche dans les fichiers journaux sur base de l’heure à laquelle les métriques ont enregistré cette erreur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-675">You could also use the metrics to identify when failures such as this occur and then search the log files based on the time the metrics recorded this error.</span></span> <span data-ttu-id="d7c68-676">L’entrée du journal indique que la suppression a échoué avec un message d’état « HTTP (404) Client Other Error ».</span><span class="sxs-lookup"><span data-stu-id="d7c68-676">This log entry shows that the delete failed with an "HTTP (404) Client Other Error" status message.</span></span> <span data-ttu-id="d7c68-677">La même entrée du journal inclut l’ID de la demande généré par le client dans la colonne **client-request-id** (813ea74f…).</span><span class="sxs-lookup"><span data-stu-id="d7c68-677">The same log entry also includes the request id generated by the client in the **client-request-id** column (813ea74f…).</span></span>

<span data-ttu-id="d7c68-678">Le journal côté serveur inclut également une autre entrée avec la même valeur **client-request-id** (813ea74f…) pour une opération de suppression réussie de la même entité, et provenant du même client.</span><span class="sxs-lookup"><span data-stu-id="d7c68-678">The server-side log also includes another entry with the same **client-request-id** value (813ea74f…) for a successful delete operation for the same entity, and from the same client.</span></span> <span data-ttu-id="d7c68-679">Cette opération de suppression réussie s'est produite peu avant l'échec de la demande de suppression.</span><span class="sxs-lookup"><span data-stu-id="d7c68-679">This successful delete operation took place very shortly before the failed delete request.</span></span>

<span data-ttu-id="d7c68-680">La cause la plus probable de ce scénario est que le client a envoyé une demande de suppression de l'entité au service de table, qui a réussi, mais n'a pas reçu d'accusé de réception du serveur (peut-être à cause d'un problème de réseau provisoire).</span><span class="sxs-lookup"><span data-stu-id="d7c68-680">The most likely cause of this scenario is that the client sent a delete request for the entity to the table service, which succeeded, but did not receive an acknowledgement from the server (perhaps due to a temporary network issue).</span></span> <span data-ttu-id="d7c68-681">Le client a ensuite tenté automatiquement d’effectuer à nouveau l’opération (en utilisant le même **client-request-id**). Cette tentative a échoué, car l’entité avait déjà été supprimée.</span><span class="sxs-lookup"><span data-stu-id="d7c68-681">The client then automatically retried the operation (using the same **client-request-id**), and this retry failed because the entity had already been deleted.</span></span>

<span data-ttu-id="d7c68-682">Si ce problème se produit fréquemment, vous devez rechercher pourquoi le client ne reçoit pas les accusés de réception du service de table.</span><span class="sxs-lookup"><span data-stu-id="d7c68-682">If this problem occurs frequently, you should investigate why the client is failing to receive acknowledgements from the table service.</span></span> <span data-ttu-id="d7c68-683">Si le problème est intermittent, vous devez capturer l’erreur « HTTP (404) Not Found » et la journaliser dans le client, mais permettre au client de continuer.</span><span class="sxs-lookup"><span data-stu-id="d7c68-683">If the problem is intermittent, you should trap the "HTTP (404) Not Found" error and log it in the client, but allow the client to continue.</span></span>

### <span data-ttu-id="d7c68-684"><a name="the-client-is-receiving-409-messages"></a>Le client reçoit des messages HTTP 409 (Conflict)</span><span class="sxs-lookup"><span data-stu-id="d7c68-684"><a name="the-client-is-receiving-409-messages"></a>The client is receiving HTTP 409 (Conflict) messages</span></span>
<span data-ttu-id="d7c68-685">Le tableau suivant inclut un extrait du journal côté serveur pour deux opérations client : **DeleteIfExists** suivie de **CreateIfNotExists** avec le même nom de conteneur d’objet blob.</span><span class="sxs-lookup"><span data-stu-id="d7c68-685">The following table shows an extract from the server-side log for two client operations: **DeleteIfExists** followed immediately by **CreateIfNotExists** using the same blob container name.</span></span> <span data-ttu-id="d7c68-686">Notez que chaque opération cliente génère l’envoi de deux demandes au serveur : d’abord une demande **GetContainerProperties** afin de vérifier l’existence du conteneur, puis la demande **DeleteContainer** ou **CreateContainer**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-686">Note that each client operation results in two requests sent to the server, first a **GetContainerProperties** request to check if the container exists, followed by the **DeleteContainer** or **CreateContainer** request.</span></span>

| <span data-ttu-id="d7c68-687">Timestamp</span><span class="sxs-lookup"><span data-stu-id="d7c68-687">Timestamp</span></span> | <span data-ttu-id="d7c68-688">Opération</span><span class="sxs-lookup"><span data-stu-id="d7c68-688">Operation</span></span> | <span data-ttu-id="d7c68-689">Résultat</span><span class="sxs-lookup"><span data-stu-id="d7c68-689">Result</span></span> | <span data-ttu-id="d7c68-690">Nom du conteneur</span><span class="sxs-lookup"><span data-stu-id="d7c68-690">Container name</span></span> | <span data-ttu-id="d7c68-691">ID de la demande client</span><span class="sxs-lookup"><span data-stu-id="d7c68-691">Client request id</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="d7c68-692">05:10:13.7167225</span><span class="sxs-lookup"><span data-stu-id="d7c68-692">05:10:13.7167225</span></span> |<span data-ttu-id="d7c68-693">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="d7c68-693">GetContainerProperties</span></span> |<span data-ttu-id="d7c68-694">200</span><span class="sxs-lookup"><span data-stu-id="d7c68-694">200</span></span> |<span data-ttu-id="d7c68-695">mmcont</span><span class="sxs-lookup"><span data-stu-id="d7c68-695">mmcont</span></span> |<span data-ttu-id="d7c68-696">c9f52c89-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-696">c9f52c89-…</span></span> |
| <span data-ttu-id="d7c68-697">05:10:13.8167325</span><span class="sxs-lookup"><span data-stu-id="d7c68-697">05:10:13.8167325</span></span> |<span data-ttu-id="d7c68-698">DeleteContainer</span><span class="sxs-lookup"><span data-stu-id="d7c68-698">DeleteContainer</span></span> |<span data-ttu-id="d7c68-699">202</span><span class="sxs-lookup"><span data-stu-id="d7c68-699">202</span></span> |<span data-ttu-id="d7c68-700">mmcont</span><span class="sxs-lookup"><span data-stu-id="d7c68-700">mmcont</span></span> |<span data-ttu-id="d7c68-701">c9f52c89-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-701">c9f52c89-…</span></span> |
| <span data-ttu-id="d7c68-702">05:10:13.8987407</span><span class="sxs-lookup"><span data-stu-id="d7c68-702">05:10:13.8987407</span></span> |<span data-ttu-id="d7c68-703">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="d7c68-703">GetContainerProperties</span></span> |<span data-ttu-id="d7c68-704">404</span><span class="sxs-lookup"><span data-stu-id="d7c68-704">404</span></span> |<span data-ttu-id="d7c68-705">mmcont</span><span class="sxs-lookup"><span data-stu-id="d7c68-705">mmcont</span></span> |<span data-ttu-id="d7c68-706">bc881924-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-706">bc881924-…</span></span> |
| <span data-ttu-id="d7c68-707">05:10:14.2147723</span><span class="sxs-lookup"><span data-stu-id="d7c68-707">05:10:14.2147723</span></span> |<span data-ttu-id="d7c68-708">CreateContainer</span><span class="sxs-lookup"><span data-stu-id="d7c68-708">CreateContainer</span></span> |<span data-ttu-id="d7c68-709">409</span><span class="sxs-lookup"><span data-stu-id="d7c68-709">409</span></span> |<span data-ttu-id="d7c68-710">mmcont</span><span class="sxs-lookup"><span data-stu-id="d7c68-710">mmcont</span></span> |<span data-ttu-id="d7c68-711">bc881924-…</span><span class="sxs-lookup"><span data-stu-id="d7c68-711">bc881924-…</span></span> |

<span data-ttu-id="d7c68-712">Le code de l’application cliente supprime puis recrée immédiatement un conteneur d’objets blob du même nom : la méthode **CreateIfNotExists** (ID de demande client bc881924-...) échoue avec l’erreur HTTP 409 (Conflit).</span><span class="sxs-lookup"><span data-stu-id="d7c68-712">The code in the client application deletes and then immediately recreates a blob container using the same name: the **CreateIfNotExists** method (Client request ID bc881924-…) eventually fails with the HTTP 409 (Conflict) error.</span></span> <span data-ttu-id="d7c68-713">Lorsqu’un client supprime des conteneurs d’objet blob, des tables ou des files d’attente, le nom devient à nouveau disponible après une courte période.</span><span class="sxs-lookup"><span data-stu-id="d7c68-713">When a client deletes blob containers, tables, or queues there is a brief period before the name becomes available again.</span></span>

<span data-ttu-id="d7c68-714">Chaque fois qu'elle crée des conteneurs, l'application cliente utilise des noms de conteneur uniques si le modèle de suppression/recréation est commun.</span><span class="sxs-lookup"><span data-stu-id="d7c68-714">The client application should use unique container names whenever it creates new containers if the delete/recreate pattern is common.</span></span>

### <span data-ttu-id="d7c68-715"><a name="metrics-show-low-percent-success"></a>Les métriques indiquent une valeur PercentSuccess faible ou les entrées du journal d’analyse incluent des opérations avec un statut de transaction ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="d7c68-715"><a name="metrics-show-low-percent-success"></a>Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors</span></span>
<span data-ttu-id="d7c68-716">La métrique **PercentSuccess** capture le pourcentage d'opérations réussies sur base de leur code d'état HTTP.</span><span class="sxs-lookup"><span data-stu-id="d7c68-716">The **PercentSuccess** metric captures the percent of operations that were successful based on their HTTP Status Code.</span></span> <span data-ttu-id="d7c68-717">Les opérations avec des codes d’état 2XX sont considérées comme réussies ; celles avec des codes d’état dans les plages 3XX, 4XX et 5XX sont considérées comme non réussies et réduisent la valeur de la métrique **PercentSucess** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-717">Operations with status codes of 2XX count as successful, whereas operations with status codes in 3XX, 4XX and 5XX ranges are counted as unsuccessful and lower the **PercentSucess** metric value.</span></span> <span data-ttu-id="d7c68-718">Dans les fichiers journaux de stockage côté serveur, ces opérations sont enregistrées avec un statut de transaction **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-718">In the server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span>

<span data-ttu-id="d7c68-719">Il est important de noter que ces opérations ont été réalisées avec succès et n'affectent donc pas d'autres métriques telles que la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-719">It is important to note that these operations have completed successfully and therefore do not affect other metrics such as availability.</span></span> <span data-ttu-id="d7c68-720">Voici quelques exemples d'opérations qui s'exécutent avec succès, mais qui génèrent des codes d'état HTTP d'échec :</span><span class="sxs-lookup"><span data-stu-id="d7c68-720">Some examples of operations that execute successfully but that can result in unsuccessful HTTP status codes include:</span></span>

* <span data-ttu-id="d7c68-721">**ResourceNotFound** (Not Found 404), par exemple, à partir d'une demande GET vers un objet blob qui n'existe pas.</span><span class="sxs-lookup"><span data-stu-id="d7c68-721">**ResourceNotFound** (Not Found 404), for example from a GET request to a blob that does not exist.</span></span>
* <span data-ttu-id="d7c68-722">**ResouceAlreadyExists** (Conflict 409), par exemple, à partir d’une opération **CreateIfNotExist** où la ressource existe déjà.</span><span class="sxs-lookup"><span data-stu-id="d7c68-722">**ResouceAlreadyExists** (Conflict 409), for example from a **CreateIfNotExist** operation where the resource already exists.</span></span>
* <span data-ttu-id="d7c68-723">**ConditionNotMet** (Not Modified 304), par exemple, à partir d’une opération conditionnelle, comme lorsqu’un client envoie une valeur **ETag** et un en-tête HTTP **If-None-Match** pour demander une image uniquement si elle a été mise à jour depuis la dernière opération.</span><span class="sxs-lookup"><span data-stu-id="d7c68-723">**ConditionNotMet** (Not Modified 304), for example from a conditional operation such as when a client sends an **ETag** value and an HTTP **If-None-Match** header to request an image only if it has been updated since the last operation.</span></span>

<span data-ttu-id="d7c68-724">Vous trouverez une liste des codes d’erreur API REST communs renvoyés par les services de stockage à la page <a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Codes d’erreur API REST communs</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-724">You can find a list of common REST API error codes that the storage services return on the page <a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Common REST API Error Codes</a>.</span></span>

### <span data-ttu-id="d7c68-725"><a name="capacity-metrics-show-an-unexpected-increase"></a>Les métriques de capacité indiquent une augmentation inattendue de l’utilisation de la capacité de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-725"><a name="capacity-metrics-show-an-unexpected-increase"></a>Capacity metrics show an unexpected increase in storage capacity usage</span></span>
<span data-ttu-id="d7c68-726">Si vous constatez des changements soudains, inattendus dans l'utilisation de la capacité de votre compte de stockage, vous pouvez enquêter sur les raisons d'abord en consultant vos métriques de disponibilité ; par exemple, une augmentation du nombre de demandes de suppression qui échouent peut provoquer une augmentation du volume de stockage d'objets blob que vous utilisez, car les opérations de nettoyage spécifiques à l'application supposées libérer de l'espace peuvent ne pas fonctionner comme prévu (par exemple, suite à l'expiration des jetons SAS utilisés pour libérer de l'espace).</span><span class="sxs-lookup"><span data-stu-id="d7c68-726">If you see sudden, unexpected changes in capacity usage in your storage account, you can investigate the reasons by first looking at your availability metrics; for example, an increase in the number of failed delete requests might lead to an increase in the amount of blob storage you are using as application specific cleanup operations you might have expected to be freeing up space may not be working as expected (for example, because the SAS tokens used for freeing up space have expired).</span></span>

### <span data-ttu-id="d7c68-727"><a name="you-are-experiencing-unexpected-reboots"></a>Vous constatez des redémarrages inattendus des machines virtuelles Azure associées à un grand nombre de disques durs virtuels</span><span class="sxs-lookup"><span data-stu-id="d7c68-727"><a name="you-are-experiencing-unexpected-reboots"></a>You are experiencing unexpected reboots of Azure Virtual Machines that have a large number of attached VHDs</span></span>
<span data-ttu-id="d7c68-728">Si une machine virtuelle Azure est associée à un grand nombre de disques durs virtuels dans le même compte de stockage, vous risquez de dépasser les cibles d’évolutivité pour un compte de stockage individuel, ce qui provoquera une panne de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="d7c68-728">If an Azure Virtual Machine (VM) has a large number of attached VHDs that are in the same storage account, you could exceed the scalability targets for an individual storage account causing the VM to fail.</span></span> <span data-ttu-id="d7c68-729">Vous devez consulter les métriques par minute pour le compte de stockage (**TotalRequests**/**TotalIngress**/**TotalEgress**) et vérifier la présence de pics dépassant les cibles d’évolutivité pour un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-729">You should check the minute metrics for the storage account (**TotalRequests**/**TotalIngress**/**TotalEgress**) for spikes that exceed the scalability targets for a storage account.</span></span> <span data-ttu-id="d7c68-730">La section «[Les métriques indiquent une augmentation de la valeur PercentThrottlingError]» vous aidera à déterminer si une limitation a été appliquée à votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-730">See the section "[Metrics show an increase in PercentThrottlingError]" for assistance in determining if throttling has occurred on your storage account.</span></span>

<span data-ttu-id="d7c68-731">En général, chaque opération d’entrée ou de sortie individuelle sur un disque dur virtuel à partir d’une machine virtuelle traduit les opérations **Get Page** ou **Put Page** sur l’objet blob de la page sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="d7c68-731">In general, each individual input or output operation on a VHD from a Virtual Machine translates to **Get Page** or **Put Page** operations on the underlying page blob.</span></span> <span data-ttu-id="d7c68-732">Vous pouvez donc utiliser les opérations d’E/S par seconde (IOPS) estimées pour votre environnement pour déterminer le nombre de disques durs virtuels que vous pouvez avoir dans un compte de stockage unique, sur base du comportement spécifique de votre application.</span><span class="sxs-lookup"><span data-stu-id="d7c68-732">Therefore, you can use the estimated IOPS for your environment to tune how many VHDs you can have in a single storage account based on the specific behavior of your application.</span></span> <span data-ttu-id="d7c68-733">Nous déconseillons d’avoir plus de 40 disques dans un compte de stockage unique.</span><span class="sxs-lookup"><span data-stu-id="d7c68-733">We do not recommend having more than 40 disks in a single storage account.</span></span> <span data-ttu-id="d7c68-734">Pour obtenir des détails sur les cibles d’extensibilité actuelles des comptes de stockage, en particulier le taux de demandes total et la bande passante totale pour le type de compte de stockage que vous utilisez, consultez <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Objectifs de performance et évolutivité d’Azure Storage</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-734">See <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Azure Storage Scalability and Performance Targets</a> for details of the current scalability targets for storage accounts, in particular the total request rate and total bandwidth for the type of storage account you are using.</span></span>
<span data-ttu-id="d7c68-735">Si vous dépassez les cibles d’évolutivité pour votre compte de stockage, vous devez placer vos disques durs virtuels dans plusieurs comptes de stockage différents afin de réduire l’activité dans chaque compte individuel.</span><span class="sxs-lookup"><span data-stu-id="d7c68-735">If you are exceeding the scalability targets for your storage account, you should place your VHDs in multiple different storage accounts to reduce the activity in each individual account.</span></span>

### <span data-ttu-id="d7c68-736"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Votre problème provient de l’utilisation de l’émulateur de stockage pour le développement ou les tests</span><span class="sxs-lookup"><span data-stu-id="d7c68-736"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Your issue arises from using the storage emulator for development or test</span></span>
<span data-ttu-id="d7c68-737">On utilise généralement un émulateur de stockage lors du développement et des tests afin d'éviter l'utilisation d'un compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-737">You typically use the storage emulator during development and test to avoid the requirement for an Azure storage account.</span></span> <span data-ttu-id="d7c68-738">Voici les problèmes communs que vous êtes susceptible de rencontrer lors de l’utilisation de l’émulateur de stockage :</span><span class="sxs-lookup"><span data-stu-id="d7c68-738">The common issues that can occur when you are using the storage emulator are:</span></span>

* <span data-ttu-id="d7c68-739">[La fonctionnalité « X » ne fonctionne pas dans l’émulateur de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-739">[Feature "X" is not working in the storage emulator]</span></span>
* <span data-ttu-id="d7c68-740">[Erreur « The value for one of the HTTP headers is not in the correct format » (Le format de la valeur d’un des en-têtes HTTP est incorrect) lors de l’utilisation de l’émulateur de stockage]</span><span class="sxs-lookup"><span data-stu-id="d7c68-740">[Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator]</span></span>
* <span data-ttu-id="d7c68-741">[L’exécution de l’émulateur de stockage exige des privilèges d’administration]</span><span class="sxs-lookup"><span data-stu-id="d7c68-741">[Running the storage emulator requires administrative privileges]</span></span>

#### <span data-ttu-id="d7c68-742"><a name="feature-X-is-not-working"></a>La fonctionnalité « X » ne fonctionne pas dans l’émulateur de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-742"><a name="feature-X-is-not-working"></a>Feature "X" is not working in the storage emulator</span></span>
<span data-ttu-id="d7c68-743">L'émulateur de stockage ne prend pas en charge toutes les fonctionnalités des services de stockage Azure (par ex., le service de fichiers).</span><span class="sxs-lookup"><span data-stu-id="d7c68-743">The storage emulator does not support all of the features of the Azure storage services such as the file service.</span></span> <span data-ttu-id="d7c68-744">Pour plus d’informations, consultez <a href="http://msdn.microsoft.com/library/azure/gg433135.aspx" target="_blank">Différences entre l’émulateur de stockage et les services Azure Storage</a> sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="d7c68-744">For more information, see <a href="http://msdn.microsoft.com/library/azure/gg433135.aspx" target="_blank">Differences Between the Storage Emulator and Azure Storage Services</a> on MSDN.</span></span>

<span data-ttu-id="d7c68-745">Pour accéder à ces fonctions non prises en charge par l’émulateur de stockage, vous devez utiliser le service de stockage Azure dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="d7c68-745">For those features that the storage emulator does not support, use the Azure storage service in the cloud.</span></span>

#### <span data-ttu-id="d7c68-746"><a name="error-HTTP-header-not-correct-format"></a>Erreur « The value for one of the HTTP headers is not in the correct format » (Le format de la valeur d’un des en-têtes HTTP est incorrect) lors de l’utilisation de l’émulateur de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-746"><a name="error-HTTP-header-not-correct-format"></a>Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator</span></span>
<span data-ttu-id="d7c68-747">Vous êtes en train de tester votre application, qui utilise la bibliothèque cliente de stockage, avec l'émulateur de stockage local, et les appels de méthode tels que **CreateIfNotExists** échouent avec un message d'erreur « The value for one of the HTTP headers is not in the correct format » (Le format de la valeur d'un des en-têtes HTTP est incorrect).</span><span class="sxs-lookup"><span data-stu-id="d7c68-747">You are testing your application that use the Storage Client Library against the local storage emulator and method calls such as **CreateIfNotExists** fail with the error message "The value for one of the HTTP headers is not in the correct format."</span></span> <span data-ttu-id="d7c68-748">Cela indique que la version de l'émulateur de stockage que vous utilisez ne prend pas en charge la version de la bibliothèque cliente de stockage que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="d7c68-748">This indicates that the version of the storage emulator you are using does not support the version of the storage client library you are using.</span></span> <span data-ttu-id="d7c68-749">La bibliothèque cliente de stockage ajoute l'en-tête **x-ms-version** à toutes les demandes qu'elle effectue.</span><span class="sxs-lookup"><span data-stu-id="d7c68-749">The Storage Client Library adds the header **x-ms-version** to all the requests it makes.</span></span> <span data-ttu-id="d7c68-750">Si l'émulateur de stockage ne reconnaît pas la valeur dans l'en-tête **x-ms-version** , il refuse la demande.</span><span class="sxs-lookup"><span data-stu-id="d7c68-750">If the storage emulator does not recognize the value in the **x-ms-version** header, it rejects the request.</span></span>

<span data-ttu-id="d7c68-751">Vous pouvez utiliser les journaux de la bibliothèque cliente de stockage pour afficher la valeur de l' **en-tête x-ms-version** envoyée.</span><span class="sxs-lookup"><span data-stu-id="d7c68-751">You can use the Storage Library Client logs to see the value of the **x-ms-version header** it is sending.</span></span> <span data-ttu-id="d7c68-752">Vous pouvez également afficher la valeur de l' **en-tête x-ms-version** si vous utilisez Fiddler pour procéder au suivi des demandes à partir de votre application cliente.</span><span class="sxs-lookup"><span data-stu-id="d7c68-752">You can also see the value of the **x-ms-version header** if you use Fiddler to trace the requests from your client application.</span></span>

<span data-ttu-id="d7c68-753">Ce scénario se produit généralement lorsque vous installez et utilisez la dernière version de la bibliothèque cliente de stockage sans mettre à jour l’émulateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-753">This scenario typically occurs if you install and use the latest version of the Storage Client Library without updating the storage emulator.</span></span> <span data-ttu-id="d7c68-754">Vous devez soit installer la dernière version de l’émulateur de stockage, soit utiliser le stockage cloud au lieu de l’émulateur pour le développement et les tests.</span><span class="sxs-lookup"><span data-stu-id="d7c68-754">You should either install the latest version of the storage emulator, or use cloud storage instead of the emulator for development and test.</span></span>

#### <span data-ttu-id="d7c68-755"><a name="storage-emulator-requires-administrative-privileges"></a>L’exécution de l’émulateur de stockage exige des privilèges d’administration</span><span class="sxs-lookup"><span data-stu-id="d7c68-755"><a name="storage-emulator-requires-administrative-privileges"></a>Running the storage emulator requires administrative privileges</span></span>
<span data-ttu-id="d7c68-756">Vous êtes invité à entrer vos informations d'identification d'administrateur lorsque vous exécutez l'émulateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-756">You are prompted for administrator credentials when you run the storage emulator.</span></span> <span data-ttu-id="d7c68-757">Cela ne se produit que lors de la toute première initialisation de l'émulateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-757">This only occurs when you are initializing the storage emulator for the first time.</span></span> <span data-ttu-id="d7c68-758">Une fois qu'il a été initialisé, vous n'avez plus besoin de privilèges d'administration pour l'exécuter à nouveau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-758">After you have initialized the storage emulator, you do not need administrative privileges to run it again.</span></span>

<span data-ttu-id="d7c68-759">Pour plus d’informations, consultez <a href="http://msdn.microsoft.com/library/azure/gg433132.aspx" target="_blank">Initialisation de l’émulateur de stockage à l’aide de l’outil en ligne de commande</a> sur MSDN (vous pouvez également initialiser l’émulateur de stockage dans Visual Studio, qui nécessite aussi des privilèges d’administration).</span><span class="sxs-lookup"><span data-stu-id="d7c68-759">For more information, see <a href="http://msdn.microsoft.com/library/azure/gg433132.aspx" target="_blank">Initialize the Storage Emulator by Using the Command-Line Tool</a> on MSDN (you can also initialize the storage emulator in Visual Studio, which will also require administrative privileges).</span></span>

### <span data-ttu-id="d7c68-760"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>Vous rencontrez des problèmes pendant l’installation du Kit de développement logiciel (SDK) Azure pour .NET</span><span class="sxs-lookup"><span data-stu-id="d7c68-760"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>You are encountering problems installing the Azure SDK for .NET</span></span>
<span data-ttu-id="d7c68-761">Lorsque vous tentez d'installer le Kit de développement logiciel (SDK), vous ne parvenez pas à installer l'émulateur de stockage sur votre machine locale.</span><span class="sxs-lookup"><span data-stu-id="d7c68-761">When you try to install the SDK, it fails trying to install the storage emulator on your local machine.</span></span> <span data-ttu-id="d7c68-762">Le journal d'installation contient un des messages suivants :</span><span class="sxs-lookup"><span data-stu-id="d7c68-762">The installation log contains one of the following messages:</span></span>

* <span data-ttu-id="d7c68-763">CAQuietExec:  Error: Unable to access SQL instance (CAQuietExec :  Erreur : Impossible d’accéder à l’instance SQL)</span><span class="sxs-lookup"><span data-stu-id="d7c68-763">CAQuietExec:  Error: Unable to access SQL instance</span></span>
* <span data-ttu-id="d7c68-764">CAQuietExec:  Error: Unable to create database (CAQuietExec :  Erreur : Impossible de créer la base de données)</span><span class="sxs-lookup"><span data-stu-id="d7c68-764">CAQuietExec:  Error: Unable to create database</span></span>

<span data-ttu-id="d7c68-765">Cela est dû à un problème au niveau de l'installation LocalDB existante.</span><span class="sxs-lookup"><span data-stu-id="d7c68-765">The cause is an issue with existing LocalDB installation.</span></span> <span data-ttu-id="d7c68-766">Par défaut, l'émulateur de stockage utilise LocalDB pour conserver les données lorsqu'il simule les services de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-766">By default, the storage emulator uses LocalDB to persist data when it simulates the Azure storage services.</span></span> <span data-ttu-id="d7c68-767">Vous pouvez réinitialiser votre instance LocalDB en exécutant les commandes suivantes dans une fenêtre d'invite de commandes avant de tenter d'installer le Kit de développement logiciel (SDK).</span><span class="sxs-lookup"><span data-stu-id="d7c68-767">You can reset your LocalDB instance by running the following commands in a command-prompt window before trying to install the SDK.</span></span>

```
sqllocaldb stop v11.0
sqllocaldb delete v11.0
delete %USERPROFILE%\WAStorageEmulatorDb3*.*
sqllocaldb create v11.0
```

<span data-ttu-id="d7c68-768">La commande **delete** supprime tous les anciens fichiers de base de données des installations précédentes de l'émulateur de stockage.</span><span class="sxs-lookup"><span data-stu-id="d7c68-768">The **delete** command removes any old database files from previous installations of the storage emulator.</span></span>

### <span data-ttu-id="d7c68-769"><a name="you-have-a-different-issue-with-a-storage-service"></a>Vous rencontrez un autre problème avec un service de stockage</span><span class="sxs-lookup"><span data-stu-id="d7c68-769"><a name="you-have-a-different-issue-with-a-storage-service"></a>You have a different issue with a storage service</span></span>
<span data-ttu-id="d7c68-770">Si les sections de résolution des problèmes précédentes n’incluent pas le problème que vous rencontrez avec un service de stockage, vous devez adopter l’approche suivante pour diagnostiquer et résoudre votre problème.</span><span class="sxs-lookup"><span data-stu-id="d7c68-770">If the previous troubleshooting sections do not include the issue you are having with a storage service, you should adopt the following approach to diagnosing and troubleshooting your issue.</span></span>

* <span data-ttu-id="d7c68-771">Consultez vos métriques afin d'identifier tout changement par rapport au comportement de base normal.</span><span class="sxs-lookup"><span data-stu-id="d7c68-771">Check your metrics to see if there is any change from your expected base-line behavior.</span></span> <span data-ttu-id="d7c68-772">Sur base des métriques, vous pouvez déterminer si le problème est provisoire ou permanent, ainsi que les opérations de stockage affectées par le problème.</span><span class="sxs-lookup"><span data-stu-id="d7c68-772">From the metrics, you may be able to determine whether the issue is transient or permanent, and which storage operations the issue is affecting.</span></span>
* <span data-ttu-id="d7c68-773">Vous pouvez utiliser les informations des métriques afin de faciliter vos recherches dans vos données de journalisation côté serveur et obtenir des informations plus détaillées concernant les erreurs rencontrées.</span><span class="sxs-lookup"><span data-stu-id="d7c68-773">You can use the metrics information to help you search your server-side log data for more detailed information about any errors that are occurring.</span></span> <span data-ttu-id="d7c68-774">Ces informations peuvent vous aider à analyser et résoudre le problème.</span><span class="sxs-lookup"><span data-stu-id="d7c68-774">This information may help you troubleshoot and resolve the issue.</span></span>
* <span data-ttu-id="d7c68-775">Si les informations des journaux côté serveur ne suffisent pas pour résoudre le problème, vous pouvez utiliser les journaux côté client de la bibliothèque cliente de stockage pour enquêter sur le comportement de votre application cliente, ainsi que des outils tels que Fiddler, Wireshark et l'analyseur de message Microsoft pour enquêter sur votre réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-775">If the information in the server-side logs is not sufficient to troubleshoot the issue successfully, you can use the Storage Client Library client-side logs to investigate the behavior of your client application, and tools such as Fiddler, Wireshark, and Microsoft Message Analyzer to investigate your network.</span></span>

<span data-ttu-id="d7c68-776">Pour plus d’informations sur l’utilisation de Fiddler, consultez «[Annexe 1 : utilisation de Fiddler pour capturer le trafic HTTP et HTTPS]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-776">For more information about using Fiddler, see "[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]."</span></span>

<span data-ttu-id="d7c68-777">Pour plus d’informations sur l’utilisation de Wireshark, consultez «[Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-777">For more information about using Wireshark, see "[Appendix 2: Using Wireshark to capture network traffic]."</span></span>

<span data-ttu-id="d7c68-778">Pour plus d’informations sur l’utilisation de l’analyseur de message Microsoft, consultez «[Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau]».</span><span class="sxs-lookup"><span data-stu-id="d7c68-778">For more information about using Microsoft Message Analyzer, see "[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]."</span></span>

## <span data-ttu-id="d7c68-779"><a name="appendices"></a>Annexes</span><span class="sxs-lookup"><span data-stu-id="d7c68-779"><a name="appendices"></a>Appendices</span></span>
<span data-ttu-id="d7c68-780">Les annexes décrivent plusieurs outils qui peuvent s’avérer utiles lors du diagnostic et de la résolution des problèmes liés à Azure Storage (et aux autres services).</span><span class="sxs-lookup"><span data-stu-id="d7c68-780">The appendices describe several tools that you may find useful when you are diagnosing and troubleshooting issues with Azure Storage (and other services).</span></span> <span data-ttu-id="d7c68-781">Ces outils ne font pas partie de Azure Storage, et certains d'entre eux sont des produits tiers.</span><span class="sxs-lookup"><span data-stu-id="d7c68-781">These tools are not part of Azure Storage and some are third-party products.</span></span> <span data-ttu-id="d7c68-782">En tant que tels, les outils décrits dans les annexes ne sont couverts par aucun contrat de support technique que vous pourriez avoir établi avec Microsoft Azure ou Azure Storage ; vous devez donc procéder à votre propre évaluation et examiner les options de licence et de support technique disponibles proposées par les fournisseurs de ces outils.</span><span class="sxs-lookup"><span data-stu-id="d7c68-782">As such, the tools discussed in these appendices are not covered by any support agreement you may have with Microsoft Azure or Azure Storage, and therefore as part of your evaluation process you should examine the licensing and support options available from the providers of these tools.</span></span>

### <span data-ttu-id="d7c68-783"><a name="appendix-1"></a>Annexe 1 : utilisation de Fiddler pour capturer le trafic HTTP et HTTPS</span><span class="sxs-lookup"><span data-stu-id="d7c68-783"><a name="appendix-1"></a>Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic</span></span>
<span data-ttu-id="d7c68-784">Fiddler est un outil utile pour l’analyse du trafic HTTP et HTTPS entre votre application cliente et le service de stockage Azure que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="d7c68-784">Fiddler is a useful tool for analyzing the HTTP and HTTPS traffic between your client application and the Azure storage service you are using.</span></span> <span data-ttu-id="d7c68-785">Vous pouvez télécharger Fiddler à l’adresse <a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-785">You can download Fiddler from <a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c68-786">Fiddler est capable de décoder le trafic HTTPS ; vous devez lire avec attention la documentation de Fiddler pour vous familiariser avec ce processus et comprendre les implications en matière de sécurité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-786">Fiddler can decode HTTPS traffic; you should read the Fiddler documentation carefully to understand how it does this, and to understand the security implications.</span></span>
> 
> 

<span data-ttu-id="d7c68-787">Cette annexe explique brièvement comment configurer Fiddler pour capturer le trafic entre la machine locale sur laquelle vous avez installé Fiddler et les services de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-787">This appendix provides a brief walkthrough of how to configure Fiddler to capture traffic between the local machine where you have installed Fiddler and the Azure storage services.</span></span>

<span data-ttu-id="d7c68-788">Après avoir lancé Fiddler, il commence à capturer le trafic HTTP et HTTPS de votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d7c68-788">After you have launched Fiddler, it will begin capturing HTTP and HTTPS traffic on your local machine.</span></span> <span data-ttu-id="d7c68-789">Voici quelques commandes utiles pour contrôler Fiddler :</span><span class="sxs-lookup"><span data-stu-id="d7c68-789">The following are some useful commands for controlling Fiddler:</span></span>

* <span data-ttu-id="d7c68-790">Arrêt et démarrage de la capture du trafic.</span><span class="sxs-lookup"><span data-stu-id="d7c68-790">Stop and start capturing traffic.</span></span> <span data-ttu-id="d7c68-791">Dans le menu principal, accédez à **File**, puis cliquez sur **Capture Traffic** pour activer et désactiver la capture.</span><span class="sxs-lookup"><span data-stu-id="d7c68-791">On the main menu, go to **File** and then click **Capture Traffic** to toggle capturing on and off.</span></span>
* <span data-ttu-id="d7c68-792">Enregistrement des données de trafic capturées.</span><span class="sxs-lookup"><span data-stu-id="d7c68-792">Save captured traffic data.</span></span> <span data-ttu-id="d7c68-793">Dans le menu principal, accédez à **File**, cliquez sur **Save**, puis sur **All Sessions** : cela vous permet d’enregistrer le trafic dans un fichier d’archive de la session.</span><span class="sxs-lookup"><span data-stu-id="d7c68-793">On the main menu, go to **File**, click **Save**, and then click **All Sessions**: this enables you to save the traffic in a Session Archive file.</span></span> <span data-ttu-id="d7c68-794">Vous pouvez charger à nouveau ultérieurement un fichier Session Archive à des fins d'analyse, ou l'envoyer, si nécessaire, au support Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d7c68-794">You can reload a Session Archive later for analysis, or send it if requested to Microsoft support.</span></span>

<span data-ttu-id="d7c68-795">Pour limiter le volume de trafic capturé par Fiddler, vous pouvez utiliser des filtres que vous configurez dans l'onglet **Filters** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-795">To limit the amount of traffic that Fiddler captures, you can use filters that you configure in the **Filters** tab.</span></span> <span data-ttu-id="d7c68-796">La capture d'écran suivante illustre un filtre qui capture uniquement le trafic envoyé au point de terminaison de stockage **contosoemaildist.table.core.windows.net** :</span><span class="sxs-lookup"><span data-stu-id="d7c68-796">The following screenshot shows a filter that captures only traffic sent to the **contosoemaildist.table.core.windows.net** storage endpoint:</span></span>

![][5]

### <span data-ttu-id="d7c68-797"><a name="appendix-2"></a>Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau</span><span class="sxs-lookup"><span data-stu-id="d7c68-797"><a name="appendix-2"></a>Appendix 2: Using Wireshark to capture network traffic</span></span>
<span data-ttu-id="d7c68-798">Wireshark est un analyseur de protocole réseau qui vous permet d’afficher des informations détaillées concernant les paquets pour de nombreux protocoles réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-798">Wireshark is a network protocol analyzer that enables you to view detailed packet information for a wide range of network protocols.</span></span> <span data-ttu-id="d7c68-799">Vous pouvez télécharger Wireshark à l’adresse <a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-799">You can download Wireshark from <a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>.</span></span>

<span data-ttu-id="d7c68-800">La procédure suivante explique comment capturer des informations détaillées concernant les paquets pour le trafic à partir de la machine locale où vous avez installé Wireshark, vers le service de table de votre compte de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="d7c68-800">The following procedure shows you how to capture detailed packet information for traffic from the local machine where you installed Wireshark to the table service in your Azure storage account.</span></span>

1. <span data-ttu-id="d7c68-801">Lancez Wireshark sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d7c68-801">Launch Wireshark on your local machine.</span></span>
2. <span data-ttu-id="d7c68-802">Dans la section **Start** , sélectionnez l'interface réseau locale ou des interfaces connectées à Internet.</span><span class="sxs-lookup"><span data-stu-id="d7c68-802">In the **Start** section, select the local network interface or interfaces that are connected to the internet.</span></span>
3. <span data-ttu-id="d7c68-803">Cliquez sur **Capture Options**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-803">Click **Capture Options**.</span></span>
4. <span data-ttu-id="d7c68-804">Ajoutez un filtre à la zone de texte **Capture Filter** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-804">Add a filter to the **Capture Filter** textbox.</span></span> <span data-ttu-id="d7c68-805">Par exemple, **host contosoemaildist.table.core.windows.net** configurera Wireshark pour capturer uniquement les paquets envoyés au ou par le point de terminaison de stockage du service de table dans le compte de stockage **contosoemaildist**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-805">For example, **host contosoemaildist.table.core.windows.net** will configure Wireshark to capture only packets sent to or from the table service endpoint in the **contosoemaildist** storage account.</span></span> <span data-ttu-id="d7c68-806">Pour obtenir la liste complète des filtres de capture, accédez au site <a href="http://wiki.wireshark.org/CaptureFilters" target="_blank">http://wiki.wireshark.org/CaptureFilters</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-806">For a complete list of Capture Filters see <a href="http://wiki.wireshark.org/CaptureFilters" target="_blank">http://wiki.wireshark.org/CaptureFilters</a>.</span></span>
   
   ![][6]
5. <span data-ttu-id="d7c68-807">Cliquez sur **Start**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-807">Click **Start**.</span></span> <span data-ttu-id="d7c68-808">Wireshark commence à capturer tous les paquets envoyés au ou par le point de terminaison de stockage du service de table lors de l'utilisation de votre application cliente sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d7c68-808">Wireshark will now capture all the packets send to or from the table service endpoint as you use your client application on your local machine.</span></span>
6. <span data-ttu-id="d7c68-809">Lorsque vous avez terminé, dans le menu principal, cliquez sur **Capture**, puis sur **Stop**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-809">When you have finished, on the main menu click **Capture** and then **Stop**.</span></span>
7. <span data-ttu-id="d7c68-810">Pour enregistrer les données capturées dans un fichier de capture Wireshark, dans le menu principal, cliquez sur **File**, puis sur **Save**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-810">To save the captured data in a Wireshark Capture File, on the main menu click **File** and then **Save**.</span></span>

<span data-ttu-id="d7c68-811">WireShark met en évidence toutes les erreurs détectées dans la fenêtre **packetlist** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-811">WireShark will highlight any errors that exist in the **packetlist** window.</span></span> <span data-ttu-id="d7c68-812">Vous pouvez également utiliser la fenêtre **Expert Info** (cliquez sur **Analyze**, puis sur **Expert Info**) pour afficher un récapitulatif des erreurs et avertissements.</span><span class="sxs-lookup"><span data-stu-id="d7c68-812">You can also use the **Expert Info** window (click **Analyze**, then **Expert Info**) to view a summary of errors and warnings.</span></span>

![][7]

<span data-ttu-id="d7c68-813">Vous pouvez également choisir d'afficher les données TCP telles que la couche d'application les voit en cliquant avec le bouton droit de la souris sur les données TCP et en sélectionnant **Follow TCP Stream**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-813">You can also chose to view the TCP data as the application layer sees it by right-clicking on the TCP data and selecting **Follow TCP Stream**.</span></span> <span data-ttu-id="d7c68-814">Cette option est particulièrement utile si vous avez capturé votre image mémoire sans filtre de capture.</span><span class="sxs-lookup"><span data-stu-id="d7c68-814">This is particularly useful if you captured your dump without a capture filter.</span></span> <span data-ttu-id="d7c68-815">Pour plus d’informations, voir <a href="http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html" target="_blank">ici</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-815">See <a href="http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html" target="_blank">here</a> for more information.</span></span>

![][8]

> [!NOTE]
> <span data-ttu-id="d7c68-816">Pour plus d’informations sur l’utilisation de Wireshark, consultez le <a href="http://www.wireshark.org/docs/wsug_html_chunked/" target="_blank">Guide d’utilisation de Wireshark</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-816">For more information about using Wireshark, see the <a href="http://www.wireshark.org/docs/wsug_html_chunked/" target="_blank">Wireshark Users Guide</a>.</span></span>
> 
> 

### <span data-ttu-id="d7c68-817"><a name="appendix-3"></a>Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau</span><span class="sxs-lookup"><span data-stu-id="d7c68-817"><a name="appendix-3"></a>Appendix 3: Using Microsoft Message Analyzer to capture network traffic</span></span>
<span data-ttu-id="d7c68-818">Vous pouvez utiliser l’analyseur de message Microsoft pour capturer le trafic HTTP et HTTPS de la même façon qu’avec Fiddler, et le trafic réseau de la même façon qu’avec Wireshark.</span><span class="sxs-lookup"><span data-stu-id="d7c68-818">You can use Microsoft Message Analyzer to capture HTTP and HTTPS traffic in a similar way to Fiddler, and capture network traffic in a similar way to Wireshark.</span></span>

#### <a name="configure-a-web-tracing-session-using-microsoft-message-analyzer"></a><span data-ttu-id="d7c68-819">Configuration d'une nouvelle session de suivi Web à l'aide de l'analyseur de message Microsoft</span><span class="sxs-lookup"><span data-stu-id="d7c68-819">Configure a web tracing session using Microsoft Message Analyzer</span></span>
<span data-ttu-id="d7c68-820">Pour configurer une nouvelle session de suivi web pour le trafic HTTP et HTTPS à l’aide de l’analyseur de message Microsoft, exécutez l’application Analyseur de message Microsoft et, dans le menu **File**, cliquez sur **Capture/Trace**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-820">To configure a web tracing session for HTTP and HTTPS traffic using Microsoft Message Analyzer, run the Microsoft Message Analyzer application and then on the **File** menu, click **Capture/Trace**.</span></span> <span data-ttu-id="d7c68-821">Dans la liste des scénarios de suivi disponibles, sélectionnez **Web Proxy**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-821">In the list of available trace scenarios, select **Web Proxy**.</span></span> <span data-ttu-id="d7c68-822">Ensuite, dans le panneau **Trace Scenario Configuration**, dans la zone de texte **HostnameFilter**, ajoutez les noms de vos points de terminaison de stockage (ces noms figurent dans le portail Azure Classic).</span><span class="sxs-lookup"><span data-stu-id="d7c68-822">Then in the **Trace Scenario Configuration** panel, in the **HostnameFilter** textbox, add the names of your storage endpoints (you can look up these names in the Azure Classic Portal).</span></span> <span data-ttu-id="d7c68-823">Par exemple, si le nom de votre compte de stockage Azure est **contosodata**, vous devez ajouter ce qui suit dans la zone de texte **HostnameFilter** :</span><span class="sxs-lookup"><span data-stu-id="d7c68-823">For example, if the name of your Azure storage account is **contosodata**, you should add the following to the **HostnameFilter** textbox:</span></span>

```
contosodata.blob.core.windows.net contosodata.table.core.windows.net contosodata.queue.core.windows.net
```

> [!NOTE]
> <span data-ttu-id="d7c68-824">Un caractère espace sépare les noms d’hôte.</span><span class="sxs-lookup"><span data-stu-id="d7c68-824">A space character separates the hostnames.</span></span>
> 
> 

<span data-ttu-id="d7c68-825">Lorsque vous êtes prêt à commencer la collecte des données de suivi, cliquez sur le bouton **Start With** .</span><span class="sxs-lookup"><span data-stu-id="d7c68-825">When you are ready to start collecting trace data, click the **Start With** button.</span></span>

<span data-ttu-id="d7c68-826">Pour plus d’informations concernant le suivi **Web Proxy** de l’analyseur de message Microsoft, consultez la section <a href="http://technet.microsoft.com/library/jj674814.aspx" target="_blank">Fournisseur PEF-WebProxy</a> sur TechNet.</span><span class="sxs-lookup"><span data-stu-id="d7c68-826">For more information about the Microsoft Message Analyzer **Web Proxy** trace, see <a href="http://technet.microsoft.com/library/jj674814.aspx" target="_blank">PEF-WebProxy Provider</a> on TechNet.</span></span>

<span data-ttu-id="d7c68-827">Le suivi **Web Proxy** intégré de l'analyseur de message Microsoft est basé sur Fiddler ; il est capable de capturer le trafic HTTPS côté client et d'afficher les messages HTTPS non chiffrés.</span><span class="sxs-lookup"><span data-stu-id="d7c68-827">The built-in **Web Proxy** trace in Microsoft Message Analyzer is based on Fiddler; it can capture client-side HTTPS traffic and display unencrypted HTTPS messages.</span></span> <span data-ttu-id="d7c68-828">Le suivi **Web Proxy** fonctionne via la configuration d'un proxy local pour tout le trafic HTTP et HTTPS, lui permettant d'accéder aux messages non chiffrés.</span><span class="sxs-lookup"><span data-stu-id="d7c68-828">The **Web Proxy** trace works by configuring a local proxy for all HTTP and HTTPS traffic that gives it access to unencrypted messages.</span></span>

#### <a name="diagnosing-network-issues-using-microsoft-message-analyzer"></a><span data-ttu-id="d7c68-829">Diagnostic des problèmes de réseau à l'aide de l'analyseur de message Microsoft</span><span class="sxs-lookup"><span data-stu-id="d7c68-829">Diagnosing network issues using Microsoft Message Analyzer</span></span>
<span data-ttu-id="d7c68-830">En plus d’utiliser le suivi **Web Proxy** de l’analyseur de message Microsoft pour capturer le détail du trafic HTTP/HTTPS entre l’application cliente et le service de stockage, vous pouvez utiliser le suivi **Local Link Layer** intégré pour capturer les informations relatives aux paquets réseau.</span><span class="sxs-lookup"><span data-stu-id="d7c68-830">In addition to using the Microsoft Message Analyzer **Web Proxy** trace to capture details of the HTTP/HTTPs traffic between the client application and the storage service, you can also use the built-in **Local Link Layer** trace to capture network packet information.</span></span> <span data-ttu-id="d7c68-831">Cela vous permet de capturer des données similaires à celles que vous capturez avec Wireshark et de diagnostiquer les problèmes de réseau tels que les paquets perdus.</span><span class="sxs-lookup"><span data-stu-id="d7c68-831">This enables you to capture data similar to that which you can capture with Wireshark, and diagnose network issues such as dropped packets.</span></span>

<span data-ttu-id="d7c68-832">La capture d’écran suivante illustre un exemple de suivi **Local Link Layer** avec des messages **d’information** dans la colonne **DiagnosisTypes**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-832">The following screenshot shows an example **Local Link Layer** trace with some **informational** messages in the **DiagnosisTypes** column.</span></span> <span data-ttu-id="d7c68-833">Cliquer sur une icône dans la colonne **DiagnosisTypes** affiche les détails du message.</span><span class="sxs-lookup"><span data-stu-id="d7c68-833">Clicking on an icon in the **DiagnosisTypes** column shows the details of the message.</span></span> <span data-ttu-id="d7c68-834">Dans cet exemple, le serveur a retransmis le message #305, car il n'a reçu aucun accusé de réception du client :</span><span class="sxs-lookup"><span data-stu-id="d7c68-834">In this example, the server retransmitted message #305 because it did not receive an acknowledgement from the client:</span></span>

![][9]

<span data-ttu-id="d7c68-835">Lorsque vous créez la session de suivi dans l'analyseur de message Microsoft, vous pouvez spécifier des filtres afin de limiter le nombre de parasites dans le suivi.</span><span class="sxs-lookup"><span data-stu-id="d7c68-835">When you create the trace session in Microsoft Message Analyzer, you can specify filters to reduce the amount of noise in the trace.</span></span> <span data-ttu-id="d7c68-836">Sur la page **Capture / Trace** où vous définissez le suivi, cliquez sur le lien **Configure** à côté de **Microsoft-Windows-NDIS-PacketCapture**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-836">On the **Capture / Trace** page where you define the trace, click on the **Configure** link next to **Microsoft-Windows-NDIS-PacketCapture**.</span></span> <span data-ttu-id="d7c68-837">La capture d'écran suivante illustre une configuration qui filtre le trafic TCP pour les adresses IP de trois services de stockage :</span><span class="sxs-lookup"><span data-stu-id="d7c68-837">The following screenshot shows a configuration that filters TCP traffic for the IP addresses of three storage services:</span></span>

![][10]

<span data-ttu-id="d7c68-838">Pour plus d’informations concernant le suivi Local Link Layer de l’analyseur de message Microsoft, consultez <a href="http://technet.microsoft.com/library/jj659264.aspx" target="_blank">Fournisseur PEF-NDIS-PacketCapture</a> sur TechNet.</span><span class="sxs-lookup"><span data-stu-id="d7c68-838">For more information about the Microsoft Message Analyzer Local Link Layer trace, see <a href="http://technet.microsoft.com/library/jj659264.aspx" target="_blank">PEF-NDIS-PacketCapture Provider</a> on TechNet.</span></span>

### <span data-ttu-id="d7c68-839"><a name="appendix-4"></a>Annexe 4 : utilisation d’Excel pour afficher les métriques et les données de journalisation</span><span class="sxs-lookup"><span data-stu-id="d7c68-839"><a name="appendix-4"></a>Appendix 4: Using Excel to view metrics and log data</span></span>
<span data-ttu-id="d7c68-840">De nombreux outils vous permettent de télécharger les données métriques de stockage à partir du stockage de table Azure dans un format délimité, permettant leur chargement aisé dans Excel afin de les consulter ou les analyser.</span><span class="sxs-lookup"><span data-stu-id="d7c68-840">Many tools enable you to download the Storage Metrics data from Azure table storage in a delimited format that makes it easy to load the data into Excel for viewing and analysis.</span></span> <span data-ttu-id="d7c68-841">Les données de journalisation du stockage d’objets blob Azure sont déjà dans un format délimité qui peut être chargé dans Excel.</span><span class="sxs-lookup"><span data-stu-id="d7c68-841">Storage Logging data from Azure blob storage is already in a delimited format that you can load into Excel.</span></span> <span data-ttu-id="d7c68-842">Toutefois, vous devez ajouter des en-têtes de colonnes appropriés sur la base des informations des sections <a href="http://msdn.microsoft.com/library/azure/hh343259.aspx" target="_blank">Format de journal de Storage Analytics</a> et <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Schéma de table de métriques Storage Analytics</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-842">However, you will need to add appropriate column headings based in the information at <a href="http://msdn.microsoft.com/library/azure/hh343259.aspx" target="_blank">Storage Analytics Log Format</a> and <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Storage Analytics Metrics Table Schema</a>.</span></span>

<span data-ttu-id="d7c68-843">Pour importer vos données de journalisation du stockage dans Excel, après les avoir téléchargées à partir stockage d’objets blob :</span><span class="sxs-lookup"><span data-stu-id="d7c68-843">To import your Storage Logging data into Excel after you download it from blob storage:</span></span>

* <span data-ttu-id="d7c68-844">Dans le menu **Data**, cliquez sur **From Text**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-844">On the **Data** menu, click **From Text**.</span></span>
* <span data-ttu-id="d7c68-845">Accédez au fichier journal que vous souhaitez afficher et cliquez sur **Import**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-845">Browse to the log file you want to view and click **Import**.</span></span>
* <span data-ttu-id="d7c68-846">À l’étape 1 du **Text Import Wizard**, sélectionnez **Delimited**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-846">On step 1 of the **Text Import Wizard**, select **Delimited**.</span></span>

<span data-ttu-id="d7c68-847">À l’étape 1 du **Text Import Wizard**, sélectionnez **Semicolon** comme unique délimiteur et guillemet double comme **Text qualifier**.</span><span class="sxs-lookup"><span data-stu-id="d7c68-847">On step 1 of the **Text Import Wizard**, select **Semicolon** as the only delimiter and choose double-quote as the **Text qualifier**.</span></span> <span data-ttu-id="d7c68-848">Ensuite, cliquez sur **Finish** et sélectionnez l'emplacement des données dans votre classeur.</span><span class="sxs-lookup"><span data-stu-id="d7c68-848">Then click **Finish** and choose where to place the data in your workbook.</span></span>

### <span data-ttu-id="d7c68-849"><a name="appendix-5"></a>Annexe 5 : analyse avec Application Insights pour Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="d7c68-849"><a name="appendix-5"></a>Appendix 5: Monitoring with Application Insights for Visual Studio Team Services</span></span>
<span data-ttu-id="d7c68-850">Vous pouvez également utiliser la fonctionnalité Application Insights pour Visual Studio Team Services dans le cadre de votre analyse de performances et de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="d7c68-850">You can also use the Application Insights feature for Visual Studio Team Services as part of your performance and availability monitoring.</span></span> <span data-ttu-id="d7c68-851">Cet outil permet de :</span><span class="sxs-lookup"><span data-stu-id="d7c68-851">This tool can:</span></span>

* <span data-ttu-id="d7c68-852">Vous assurer que votre service Web est disponible et réactif.</span><span class="sxs-lookup"><span data-stu-id="d7c68-852">Make sure your web service is available and responsive.</span></span> <span data-ttu-id="d7c68-853">Que votre application soit destinée à un site web ou à un appareil qui utilise un service web, il peut tester votre URL toutes les quelques minutes depuis différents emplacements de par le monde et vous signaler tout problème éventuel.</span><span class="sxs-lookup"><span data-stu-id="d7c68-853">Whether your app is a web site or a device app that uses a web service, it can test your URL every few minutes from locations around the world, and let you know if there's a problem.</span></span>
* <span data-ttu-id="d7c68-854">Rapidement diagnostiquer tous les problèmes ou exceptions de performances rencontrés par votre service Web.</span><span class="sxs-lookup"><span data-stu-id="d7c68-854">Quickly diagnose any performance issues or exceptions in your web service.</span></span> <span data-ttu-id="d7c68-855">Découvrez si l'UC ou d'autres ressources sont en difficulté, obtenez les traces de la pile à partir des exceptions et effectuez des recherches aisées dans les suivis de journalisation.</span><span class="sxs-lookup"><span data-stu-id="d7c68-855">Find out if CPU or other resources are being stretched, get stack traces from exceptions, and easily search through log traces.</span></span> <span data-ttu-id="d7c68-856">Si les performances de l’application chutent en deçà des limites acceptables, nous pouvons vous envoyer un e-mail.</span><span class="sxs-lookup"><span data-stu-id="d7c68-856">If the app's performance drops below acceptable limits, we can send you an email.</span></span> <span data-ttu-id="d7c68-857">Vous pouvez analyser les services Web .NET et Java.</span><span class="sxs-lookup"><span data-stu-id="d7c68-857">You can monitor both .NET and Java web services.</span></span>

<span data-ttu-id="d7c68-858">Au moment de la rédaction du présent document, Application Insights était à l’état de version préliminaire.</span><span class="sxs-lookup"><span data-stu-id="d7c68-858">At the time of writing Application Insights is in preview.</span></span> <span data-ttu-id="d7c68-859">Pour plus d’informations, consultez <a href="http://msdn.microsoft.com/library/azure/dn481095.aspx" target="_blank">Application Insights pour Visual Studio Team Services sur MSDN</a>.</span><span class="sxs-lookup"><span data-stu-id="d7c68-859">You can find more information at <a href="http://msdn.microsoft.com/library/azure/dn481095.aspx" target="_blank">Application Insights for Visual Studio Team Services on MSDN</a>.</span></span>

<!--Anchors-->
<span data-ttu-id="d7c68-860">[Introduction]: #introduction</span><span class="sxs-lookup"><span data-stu-id="d7c68-860">[Introduction]: #introduction</span></span>
<span data-ttu-id="d7c68-861">[Organisation de ce guide]: #how-this-guide-is-organized</span><span class="sxs-lookup"><span data-stu-id="d7c68-861">[How this guide is organized]: #how-this-guide-is-organized</span></span>

<span data-ttu-id="d7c68-862">[Analyse de votre service de stockage]: #monitoring-your-storage-service</span><span class="sxs-lookup"><span data-stu-id="d7c68-862">[Monitoring your storage service]: #monitoring-your-storage-service</span></span>
<span data-ttu-id="d7c68-863">[Analyse de l’état d’intégrité du service]: #monitoring-service-health</span><span class="sxs-lookup"><span data-stu-id="d7c68-863">[Monitoring service health]: #monitoring-service-health</span></span>
<span data-ttu-id="d7c68-864">[Analyse de la capacité]: #monitoring-capacity</span><span class="sxs-lookup"><span data-stu-id="d7c68-864">[Monitoring capacity]: #monitoring-capacity</span></span>
<span data-ttu-id="d7c68-865">[Analyse de la disponibilité]: #monitoring-availability</span><span class="sxs-lookup"><span data-stu-id="d7c68-865">[Monitoring availability]: #monitoring-availability</span></span>
<span data-ttu-id="d7c68-866">[Analyse des performances]: #monitoring-performance</span><span class="sxs-lookup"><span data-stu-id="d7c68-866">[Monitoring performance]: #monitoring-performance</span></span>

<span data-ttu-id="d7c68-867">[Diagnostic des problèmes de stockage]: #diagnosing-storage-issues</span><span class="sxs-lookup"><span data-stu-id="d7c68-867">[Diagnosing storage issues]: #diagnosing-storage-issues</span></span>
<span data-ttu-id="d7c68-868">[Problèmes d’état d’intégrité du service]: #service-health-issues</span><span class="sxs-lookup"><span data-stu-id="d7c68-868">[Service health issues]: #service-health-issues</span></span>
<span data-ttu-id="d7c68-869">[Problèmes de performances]: #performance-issues</span><span class="sxs-lookup"><span data-stu-id="d7c68-869">[Performance issues]: #performance-issues</span></span>
<span data-ttu-id="d7c68-870">[Erreurs de diagnostic]: #diagnosing-errors</span><span class="sxs-lookup"><span data-stu-id="d7c68-870">[Diagnosing errors]: #diagnosing-errors</span></span>
<span data-ttu-id="d7c68-871">[Problèmes d’émulateur de stockage]: #storage-emulator-issues</span><span class="sxs-lookup"><span data-stu-id="d7c68-871">[Storage emulator issues]: #storage-emulator-issues</span></span>
<span data-ttu-id="d7c68-872">[Outils de journalisation du stockage]: #storage-logging-tools</span><span class="sxs-lookup"><span data-stu-id="d7c68-872">[Storage logging tools]: #storage-logging-tools</span></span>
<span data-ttu-id="d7c68-873">[Utilisation des outils de journalisation réseau]: #using-network-logging-tools</span><span class="sxs-lookup"><span data-stu-id="d7c68-873">[Using network logging tools]: #using-network-logging-tools</span></span>

<span data-ttu-id="d7c68-874">[Suivi de bout en bout]: #end-to-end-tracing</span><span class="sxs-lookup"><span data-stu-id="d7c68-874">[End-to-end tracing]: #end-to-end-tracing</span></span>
<span data-ttu-id="d7c68-875">[Corrélation des données de journalisation]: #correlating-log-data</span><span class="sxs-lookup"><span data-stu-id="d7c68-875">[Correlating log data]: #correlating-log-data</span></span>
<span data-ttu-id="d7c68-876">[ID de la demande client]: #client-request-id</span><span class="sxs-lookup"><span data-stu-id="d7c68-876">[Client request ID]: #client-request-id</span></span>
<span data-ttu-id="d7c68-877">[ID de la demande serveur]: #server-request-id</span><span class="sxs-lookup"><span data-stu-id="d7c68-877">[Server request ID]: #server-request-id</span></span>
<span data-ttu-id="d7c68-878">[Horodatages]: #timestamps</span><span class="sxs-lookup"><span data-stu-id="d7c68-878">[Timestamps]: #timestamps</span></span>

<span data-ttu-id="d7c68-879">[Instructions pour la résolution des problèmes]: #troubleshooting-guidance</span><span class="sxs-lookup"><span data-stu-id="d7c68-879">[Troubleshooting guidance]: #troubleshooting-guidance</span></span>
<span data-ttu-id="d7c68-880">[Les métriques indiquent une valeur AverageE2ELatency élevée et une valeur AverageServerLatency faible]: #metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="d7c68-880">[Metrics show high AverageE2ELatency and low AverageServerLatency]: #metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency</span></span>
<span data-ttu-id="d7c68-881">[Les métriques indiquent une valeur AverageE2ELatency faible et une valeur AverageServerLatency faible, mais le client constate une latence élevée]: #metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="d7c68-881">[Metrics show low AverageE2ELatency and low AverageServerLatency but the client is experiencing high latency]: #metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency</span></span>
<span data-ttu-id="d7c68-882">[Les métriques indiquent une valeur AverageServerLatency élevée]: #metrics-show-high-AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="d7c68-882">[Metrics show high AverageServerLatency]: #metrics-show-high-AverageServerLatency</span></span>
<span data-ttu-id="d7c68-883">[Vous constatez des retards inattendus dans la livraison des messages d’une file d’attente]: #you-are-experiencing-unexpected-delays-in-message-delivery</span><span class="sxs-lookup"><span data-stu-id="d7c68-883">[You are experiencing unexpected delays in message delivery on a queue]: #you-are-experiencing-unexpected-delays-in-message-delivery</span></span>

<span data-ttu-id="d7c68-884">[Les métriques indiquent une augmentation de la valeur PercentThrottlingError]: #metrics-show-an-increase-in-PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="d7c68-884">[Metrics show an increase in PercentThrottlingError]: #metrics-show-an-increase-in-PercentThrottlingError</span></span>
<span data-ttu-id="d7c68-885">[Augmentation provisoire de la valeur PercentThrottlingError]: #transient-increase-in-PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="d7c68-885">[Transient increase in PercentThrottlingError]: #transient-increase-in-PercentThrottlingError</span></span>
<span data-ttu-id="d7c68-886">[Augmentation permanente de l’erreur PercentThrottlingError]: #permanent-increase-in-PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="d7c68-886">[Permanent increase in PercentThrottlingError error]: #permanent-increase-in-PercentThrottlingError</span></span>
<span data-ttu-id="d7c68-887">[Les métriques indiquent une augmentation de la valeur PercentTimeoutError]: #metrics-show-an-increase-in-PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="d7c68-887">[Metrics show an increase in PercentTimeoutError]: #metrics-show-an-increase-in-PercentTimeoutError</span></span>
<span data-ttu-id="d7c68-888">[Les métriques indiquent une augmentation de la valeur PercentNetworkError]: #metrics-show-an-increase-in-PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="d7c68-888">[Metrics show an increase in PercentNetworkError]: #metrics-show-an-increase-in-PercentNetworkError</span></span>

<span data-ttu-id="d7c68-889">[Le client reçoit des messages HTTP 403 (Forbidden)]: #the-client-is-receiving-403-messages</span><span class="sxs-lookup"><span data-stu-id="d7c68-889">[The client is receiving HTTP 403 (Forbidden) messages]: #the-client-is-receiving-403-messages</span></span>
<span data-ttu-id="d7c68-890">[Le client reçoit des messages HTTP 404 (Not found)]: #the-client-is-receiving-404-messages</span><span class="sxs-lookup"><span data-stu-id="d7c68-890">[The client is receiving HTTP 404 (Not found) messages]: #the-client-is-receiving-404-messages</span></span>
<span data-ttu-id="d7c68-891">[Le client ou un autre processus a supprimé l’objet]: #client-previously-deleted-the-object</span><span class="sxs-lookup"><span data-stu-id="d7c68-891">[The client or another process previously deleted the object]: #client-previously-deleted-the-object</span></span>
<span data-ttu-id="d7c68-892">[Problème d’autorisation de signature d’accès partagé (SAS)]: #SAS-authorization-issue</span><span class="sxs-lookup"><span data-stu-id="d7c68-892">[A Shared Access Signature (SAS) authorization issue]: #SAS-authorization-issue</span></span>
<span data-ttu-id="d7c68-893">[Le code JavaScript du côté client n’est pas autorisé à accéder à l’objet]: #JavaScript-code-does-not-have-permission</span><span class="sxs-lookup"><span data-stu-id="d7c68-893">[Client-side JavaScript code does not have permission to access the object]: #JavaScript-code-does-not-have-permission</span></span>
<span data-ttu-id="d7c68-894">[Défaillance réseau]: #network-failure</span><span class="sxs-lookup"><span data-stu-id="d7c68-894">[Network failure]: #network-failure</span></span>
<span data-ttu-id="d7c68-895">[Le client reçoit des messages HTTP 409 (Conflict)]: #the-client-is-receiving-409-messages</span><span class="sxs-lookup"><span data-stu-id="d7c68-895">[The client is receiving HTTP 409 (Conflict) messages]: #the-client-is-receiving-409-messages</span></span>

<span data-ttu-id="d7c68-896">[Les métriques indiquent une valeur PercentSuccess faible ou les entrées du journal d'analyse incluent des opérations avec un statut de transaction ClientOtherErrors]: #metrics-show-low-percent-success</span><span class="sxs-lookup"><span data-stu-id="d7c68-896">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]: #metrics-show-low-percent-success</span></span>
<span data-ttu-id="d7c68-897">[Les métriques de capacité indiquent une augmentation inattendue de l’utilisation de la capacité de stockage]: #capacity-metrics-show-an-unexpected-increase</span><span class="sxs-lookup"><span data-stu-id="d7c68-897">[Capacity metrics show an unexpected increase in storage capacity usage]: #capacity-metrics-show-an-unexpected-increase</span></span>
<span data-ttu-id="d7c68-898">[Vous constatez des redémarrages inattendus des machines virtuelles associées à un grand nombre de disques durs virtuels]: #you-are-experiencing-unexpected-reboots</span><span class="sxs-lookup"><span data-stu-id="d7c68-898">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]: #you-are-experiencing-unexpected-reboots</span></span>
<span data-ttu-id="d7c68-899">[Votre problème provient de l’utilisation de l’émulateur de stockage pour le développement ou les tests]: #your-issue-arises-from-using-the-storage-emulator</span><span class="sxs-lookup"><span data-stu-id="d7c68-899">[Your issue arises from using the storage emulator for development or test]: #your-issue-arises-from-using-the-storage-emulator</span></span>
<span data-ttu-id="d7c68-900">[La fonctionnalité « X » ne fonctionne pas dans l’émulateur de stockage]: #feature-X-is-not-working</span><span class="sxs-lookup"><span data-stu-id="d7c68-900">[Feature "X" is not working in the storage emulator]: #feature-X-is-not-working</span></span>
<span data-ttu-id="d7c68-901">[Erreur « The value for one of the HTTP headers is not in the correct format » (Le format de la valeur d’un des en-têtes HTTP est incorrect) lors de l’utilisation de l’émulateur de stockage]: #error-HTTP-header-not-correct-format</span><span class="sxs-lookup"><span data-stu-id="d7c68-901">[Error "The value for one of the HTTP headers is not in the correct format" when using the storage emulator]: #error-HTTP-header-not-correct-format</span></span>
<span data-ttu-id="d7c68-902">[L’exécution de l’émulateur de stockage exige des privilèges d’administration]: #storage-emulator-requires-administrative-privileges</span><span class="sxs-lookup"><span data-stu-id="d7c68-902">[Running the storage emulator requires administrative privileges]: #storage-emulator-requires-administrative-privileges</span></span>
<span data-ttu-id="d7c68-903">[Vous rencontrez des problèmes pendant l’installation du Kit de développement logiciel (SDK) Azure pour .NET]: #you-are-encountering-problems-installing-the-Windows-Azure-SDK</span><span class="sxs-lookup"><span data-stu-id="d7c68-903">[You are encountering problems installing the Azure SDK for .NET]: #you-are-encountering-problems-installing-the-Windows-Azure-SDK</span></span>
<span data-ttu-id="d7c68-904">[Vous rencontrez un autre problème avec un service de stockage]: #you-have-a-different-issue-with-a-storage-service</span><span class="sxs-lookup"><span data-stu-id="d7c68-904">[You have a different issue with a storage service]: #you-have-a-different-issue-with-a-storage-service</span></span>

<span data-ttu-id="d7c68-905">[Annexes]: #appendices</span><span class="sxs-lookup"><span data-stu-id="d7c68-905">[Appendices]: #appendices</span></span>
<span data-ttu-id="d7c68-906">[Annexe 1 : utilisation de Fiddler pour capturer le trafic HTTP et HTTPS]: #appendix-1</span><span class="sxs-lookup"><span data-stu-id="d7c68-906">[Appendix 1: Using Fiddler to capture HTTP and HTTPS traffic]: #appendix-1</span></span>
<span data-ttu-id="d7c68-907">[Annexe 2 : utilisation de Wireshark pour capturer le trafic réseau]: #appendix-2</span><span class="sxs-lookup"><span data-stu-id="d7c68-907">[Appendix 2: Using Wireshark to capture network traffic]: #appendix-2</span></span>
<span data-ttu-id="d7c68-908">[Annexe 3 : utilisation de l’analyseur de message Microsoft pour capturer le trafic réseau]: #appendix-3</span><span class="sxs-lookup"><span data-stu-id="d7c68-908">[Appendix 3: Using Microsoft Message Analyzer to capture network traffic]: #appendix-3</span></span>
<span data-ttu-id="d7c68-909">[Annexe 4 : utilisation d’Excel pour afficher les métriques et les données de journalisation]: #appendix-4</span><span class="sxs-lookup"><span data-stu-id="d7c68-909">[Appendix 4: Using Excel to view metrics and log data]: #appendix-4</span></span>
<span data-ttu-id="d7c68-910">[Annexe 5 : analyse avec Application Insights pour Visual Studio Team Services]: #appendix-5</span><span class="sxs-lookup"><span data-stu-id="d7c68-910">[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]: #appendix-5</span></span>

<!--Image references-->
[1]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/overview.png
[2]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/portal-screenshot.png
[3]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/hour-minute-metrics.png
[4]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/high-e2e-latency.png
[5]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/fiddler-screenshot.png
[6]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/wireshark-screenshot-1.png
[7]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/wireshark-screenshot-2.png
[8]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/wireshark-screenshot-3.png
[9]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/mma-screenshot-1.png
[10]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/mma-screenshot-2.png
