---
title: "planification de mise à jour corrective aaaConfigure du système d’exploitation pour les clusters HDInsight de basés sur Linux - Azure | Documents Microsoft"
description: "Découvrez comment les clusters de planification de mise à jour corrective tooconfigure du système d’exploitation pour HDInsight de basés sur Linux."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: 1598d64e594d7e8a68573fc63dd86051a5a9d025
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="dedef-103">Mise à jour corrective du système d’exploitation pour HDInsight</span><span class="sxs-lookup"><span data-stu-id="dedef-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="dedef-104">Un service géré de Hadoop, HDInsight prend en charge de la mise à jour corrective hello du système d’exploitation de hello machines virtuelles sous-jacente utilisées par les clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="dedef-104">As a managed Hadoop service, HDInsight takes care of patching hello OS of hello underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="dedef-105">À compter du 1er août 2016, nous avons remplacé la stratégie mise à jour corrective de système d’exploitation invité hello pour les clusters HDInsight de basés sur Linux (version 3.4 ou supérieure).</span><span class="sxs-lookup"><span data-stu-id="dedef-105">As of August 1, 2016, we have changed hello guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="dedef-106">Hello nouvelle stratégie de hello vise toosignificantly réduire le nombre de hello de redémarrages toopatching échéance.</span><span class="sxs-lookup"><span data-stu-id="dedef-106">hello goal of hello new policy is toosignificantly reduce hello number of reboots due toopatching.</span></span> <span data-ttu-id="dedef-107">nouvelle stratégie de Hello continue toopatch, machines virtuelles (VM) sur Linux clusters chaque lundi ou un jeudi commençant à 0 h 00 UTC, Universal Time de manière progressive s’effectue entre les nœuds dans un cluster donné.</span><span class="sxs-lookup"><span data-stu-id="dedef-107">hello new policy will continue toopatch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="dedef-108">Toutefois, toutes les machines virtuelles donné redémarre uniquement au maximum une fois tous les 30 jours en raison de la mise à jour corrective tooguest du système d’exploitation.</span><span class="sxs-lookup"><span data-stu-id="dedef-108">However, any given VM will only reboot at most once every 30 days due tooguest OS patching.</span></span> <span data-ttu-id="dedef-109">En outre, premier redémarrage de hello pour un cluster nouvellement créé ne se reproduira plus tôt plus de 30 jours à partir de la date de création de cluster hello.</span><span class="sxs-lookup"><span data-stu-id="dedef-109">In addition, hello first reboot for a newly created cluster will not happen sooner than 30 days from hello cluster creation date.</span></span> <span data-ttu-id="dedef-110">Correctifs sera effectives une fois que les machines virtuelles de hello sont redémarrés.</span><span class="sxs-lookup"><span data-stu-id="dedef-110">Patches will be effective once hello VMs are rebooted.</span></span>

## <a name="how-tooconfigure-hello-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="dedef-111">Comment tooconfigure hello planification de mise à jour corrective du système d’exploitation pour des clusters HDInsight de basés sur Linux</span><span class="sxs-lookup"><span data-stu-id="dedef-111">How tooconfigure hello OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="dedef-112">machines virtuelles de Hello dans un cluster HDInsight devez toobe redémarré occasionnellement afin que les correctifs de sécurité importantes peuvent être installés.</span><span class="sxs-lookup"><span data-stu-id="dedef-112">hello virtual machines in an HDInsight cluster need toobe rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="dedef-113">À compter du 1er août 2016, les nouveaux clusters HDInsight de basés sur Linux (version 3.4 ou supérieure,) sont redémarrés à l’aide de hello suivant planification :</span><span class="sxs-lookup"><span data-stu-id="dedef-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using hello following schedule:</span></span>

1. <span data-ttu-id="dedef-114">Une machine virtuelle dans un cluster de hello peuvent uniquement redémarrer les correctifs au maximum, une seule fois dans un délai de 30 jours.</span><span class="sxs-lookup"><span data-stu-id="dedef-114">A virtual machine in hello cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="dedef-115">redémarrage de Hello se produit en commençant à 0 h 00 UTC.</span><span class="sxs-lookup"><span data-stu-id="dedef-115">hello reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="dedef-116">processus de redémarrage Hello est échelonnée entre les machines virtuelles dans un cluster de hello, cluster de hello est toujours disponible pendant le processus de redémarrage hello.</span><span class="sxs-lookup"><span data-stu-id="dedef-116">hello reboot process is staggered across virtual machines in hello cluster, so hello cluster is still available during hello reboot process.</span></span>
4. <span data-ttu-id="dedef-117">redémarrage de première Hello pour un cluster nouvellement créé ne se reproduira plus tôt plus de 30 jours après la date de création de cluster hello.</span><span class="sxs-lookup"><span data-stu-id="dedef-117">hello first reboot for a newly created cluster will not happen sooner than 30 days after hello cluster creation date.</span></span>

<span data-ttu-id="dedef-118">À l’aide d’action de script hello décrite dans cet article, vous pouvez modifier planification de mise à jour corrective hello du système d’exploitation comme suit :</span><span class="sxs-lookup"><span data-stu-id="dedef-118">Using hello script action described in this article, you can modify hello OS patching schedule as follows:</span></span>
1. <span data-ttu-id="dedef-119">Activez ou désactivez les redémarrages automatiques.</span><span class="sxs-lookup"><span data-stu-id="dedef-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="dedef-120">Fréquence de hello du jeu de redémarrage (en jours entre les redémarrages)</span><span class="sxs-lookup"><span data-stu-id="dedef-120">Set hello frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="dedef-121">Définissez le jour de semaine hello lorsqu’un redémarrage se produit hello</span><span class="sxs-lookup"><span data-stu-id="dedef-121">Set hello day of hello week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="dedef-122">Cette action de script fonctionne uniquement avec les clusters HDInsight sous Linux créés après le 1er août 2016.</span><span class="sxs-lookup"><span data-stu-id="dedef-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="dedef-123">Les correctifs seront appliqués une fois les machines virtuelles redémarrées.</span><span class="sxs-lookup"><span data-stu-id="dedef-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-toouse-hello-script"></a><span data-ttu-id="dedef-124">Comment toouse hello script</span><span class="sxs-lookup"><span data-stu-id="dedef-124">How toouse hello script</span></span> 

<span data-ttu-id="dedef-125">Lorsque ce script nécessite hello informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="dedef-125">When using this script requires hello following information:</span></span>
1. <span data-ttu-id="dedef-126">emplacement du script de Hello : https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight utilise cette toofind URI et exécuter le script de hello sur tous les ordinateurs virtuels hello dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="dedef-126">hello script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight uses this URI toofind and run hello script on all hello virtual machines in hello cluster.</span></span>
  
2. <span data-ttu-id="dedef-127">Hello des types de nœuds de cluster appliquée au script de hello : nœud principal, workernode, soigneur.</span><span class="sxs-lookup"><span data-stu-id="dedef-127">hello cluster node types that hello script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="dedef-128">Ce script doit être appliqué tooall des types de nœuds dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="dedef-128">This script must be applied tooall node types in hello cluster.</span></span> <span data-ttu-id="dedef-129">Si elle n’est pas appliqué tooa nœud type, puis hello virtuel machines pour ce type de nœud continuera de planification de mise à jour corrective précédente toouse hello.</span><span class="sxs-lookup"><span data-stu-id="dedef-129">If it is not applied tooa node type, then hello virtual machines for that node type will continue toouse hello previous patching schedule.</span></span>


3.  <span data-ttu-id="dedef-130">Paramètre : ce script accepte trois paramètres numériques :</span><span class="sxs-lookup"><span data-stu-id="dedef-130">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="dedef-131">Paramètre</span><span class="sxs-lookup"><span data-stu-id="dedef-131">Parameter</span></span> | <span data-ttu-id="dedef-132">Définition</span><span class="sxs-lookup"><span data-stu-id="dedef-132">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="dedef-133">Activation ou désactivation des redémarrages automatiques</span><span class="sxs-lookup"><span data-stu-id="dedef-133">Enable/disable automatic reboots</span></span> |<span data-ttu-id="dedef-134">0 ou 1.</span><span class="sxs-lookup"><span data-stu-id="dedef-134">0 or 1.</span></span> <span data-ttu-id="dedef-135">La valeur 0 désactive les redémarrages automatiques et la valeur 1 les active.</span><span class="sxs-lookup"><span data-stu-id="dedef-135">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="dedef-136">Fréquence</span><span class="sxs-lookup"><span data-stu-id="dedef-136">Frequency</span></span> |<span data-ttu-id="dedef-137">too90 7 (inclus).</span><span class="sxs-lookup"><span data-stu-id="dedef-137">7 too90 (inclusive).</span></span> <span data-ttu-id="dedef-138">nombre de Hello de toowait jours avant le redémarrage des machines virtuelles hello correctifs nécessitant un redémarrage.</span><span class="sxs-lookup"><span data-stu-id="dedef-138">hello number of days toowait before rebooting hello virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="dedef-139">Jour de semaine</span><span class="sxs-lookup"><span data-stu-id="dedef-139">Day of week</span></span> |<span data-ttu-id="dedef-140">1 too7 (inclus).</span><span class="sxs-lookup"><span data-stu-id="dedef-140">1 too7 (inclusive).</span></span> <span data-ttu-id="dedef-141">La valeur 1 indique le redémarrage de hello doit se produire sur un lundi et 7 indique un exemple Sunday.For, à l’aide des paramètres de 1 60 2 entraîne automatique redémarre tous les 60 jours (au plus) mardi.</span><span class="sxs-lookup"><span data-stu-id="dedef-141">A value of 1 indicates hello reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="dedef-142">Persistance</span><span class="sxs-lookup"><span data-stu-id="dedef-142">Persistence</span></span> |<span data-ttu-id="dedef-143">Lorsque vous appliquez un cluster existant de script action tooan, vous pouvez marquer les script hello si elle est persistante.</span><span class="sxs-lookup"><span data-stu-id="dedef-143">When applying a script action tooan existing cluster, you can mark hello script as persisted.</span></span> <span data-ttu-id="dedef-144">Scripts persistantes sont appliquées lorsque workernodes nouvelles sont ajoutées cluster toohello via les opérations de mise à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="dedef-144">Persisted scripts are applied when new workernodes are added toohello cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="dedef-145">Vous devez marquer ce script si elle est persistante lors de l’application de cluster de tooan existant.</span><span class="sxs-lookup"><span data-stu-id="dedef-145">You must mark this script as persisted when applying tooan existing cluster.</span></span> <span data-ttu-id="dedef-146">Dans le cas contraire, de nouveaux nœuds créés via la mise à l’échelle des opérations utilise par défaut de hello planification de mise à jour corrective.</span><span class="sxs-lookup"><span data-stu-id="dedef-146">Otherwise, any new nodes created through scaling      operations will use hello default patching schedule.</span></span>
<span data-ttu-id="dedef-147">Si vous appliquez le script de hello dans le cadre du processus de création de cluster hello, il est conservé automatiquement.</span><span class="sxs-lookup"><span data-stu-id="dedef-147">If you apply hello script as part of hello cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="dedef-148">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="dedef-148">Next steps</span></span>

<span data-ttu-id="dedef-149">Pour les étapes spécifiques sur l’utilisation d’action de script hello, consultez hello les sections Bonjour suivantes [HDInsight de basée sur Linuz de personnaliser des clusters à l’aide d’action de script](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="dedef-149">For specific steps on using hello script action, see hello following sections in hello [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="dedef-150">Utiliser une action de script lors de la création du cluster</span><span class="sxs-lookup"><span data-stu-id="dedef-150">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="dedef-151">Appliquer un tooa d’action de script en cours d’exécution cluster</span><span class="sxs-lookup"><span data-stu-id="dedef-151">Apply a script action tooa running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
