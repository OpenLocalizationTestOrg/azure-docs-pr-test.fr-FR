---
title: "données de capteur aaaProcess véhicule avec Apache Storm sur HDInsight | Documents Microsoft"
description: "Découvrez comment les données du capteur de véhicule tooprocess de concentrateurs d’événements à l’aide d’Apache Storm sur HDInsight. Ajouter des données de modèle à partir de la base de données Azure Cosmos et stocker la sortie toostorage."
services: hdinsight,documentdb,notification-hubs
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/03/2017
ms.author: larryfr
ms.openlocfilehash: 8f7b1dbb9072e095ea32160bb731bedd071288af
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="13d3c-104">Traitement des données de capteur de véhicules à partir d’Azure Event Hubs à l’aide d’Apache Storm dans HDInsight</span><span class="sxs-lookup"><span data-stu-id="13d3c-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="13d3c-105">Découvrez comment les données du capteur de véhicule tooprocess de concentrateurs d’événements Azure à l’aide d’Apache Storm sur HDInsight.</span><span class="sxs-lookup"><span data-stu-id="13d3c-105">Learn how tooprocess vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="13d3c-106">Cet exemple lit les données de capteur d’Azure Event Hubs, enrichit les données de hello en faisant référence à des données stockées dans la base de données Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="13d3c-106">This example reads sensor data from Azure Event Hubs, enriches hello data by referencing data stored in Azure Cosmos DB.</span></span> <span data-ttu-id="13d3c-107">les données de salutation sont stockées dans le stockage Azure à l’aide de hello système de fichier Hadoop (HDFS).</span><span class="sxs-lookup"><span data-stu-id="13d3c-107">hello data is stored into Azure Storage using hello Hadoop File System (HDFS).</span></span>

![HDInsight et hello diagramme d’architecture Internet of Things (IoT)](./media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="13d3c-109">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="13d3c-109">Overview</span></span>

<span data-ttu-id="13d3c-110">Ajout des capteurs toovehicles vous permet de problèmes d’équipement toopredict basées sur les tendances des données historiques.</span><span class="sxs-lookup"><span data-stu-id="13d3c-110">Adding sensors toovehicles allows you toopredict equipment problems based on historical data trends.</span></span> <span data-ttu-id="13d3c-111">Il vous permet également de vous toomake améliorations apportées à des versions toofuture basées sur l’analyse du modèle d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="13d3c-111">It also allows you toomake improvements toofuture versions based on usage pattern analysis.</span></span> <span data-ttu-id="13d3c-112">Vous devez être en mesure de tooquickly et charger efficacement des données de hello de tous les véhicules dans Hadoop avant le traitement de MapReduce peut se produire.</span><span class="sxs-lookup"><span data-stu-id="13d3c-112">You must be able tooquickly and efficiently load hello data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="13d3c-113">En outre, vous pouvez d’analyse toodo des chemins d’accès de défaillance critique (température du moteur, freins, etc.) en temps réel.</span><span class="sxs-lookup"><span data-stu-id="13d3c-113">Additionally, you may wish toodo analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="13d3c-114">Les concentrateurs d’événements Azure repose volume massives de hello toohandle des données générées par les capteurs.</span><span class="sxs-lookup"><span data-stu-id="13d3c-114">Azure Event Hubs is built toohandle hello massive volume of data generated by sensors.</span></span> <span data-ttu-id="13d3c-115">Apache Storm peut être utilisé tooload et traiter les données hello avant de les stocker dans HDFS.</span><span class="sxs-lookup"><span data-stu-id="13d3c-115">Apache Storm can be used tooload and process hello data before storing it into HDFS.</span></span>

## <a name="solution"></a><span data-ttu-id="13d3c-116">Solution</span><span class="sxs-lookup"><span data-stu-id="13d3c-116">Solution</span></span>

<span data-ttu-id="13d3c-117">Les données de télémétrie concernant la température du moteur, la température ambiante et la vitesse du véhicule sont enregistrées par des capteurs.</span><span class="sxs-lookup"><span data-stu-id="13d3c-117">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors.</span></span> <span data-ttu-id="13d3c-118">Données sont ensuite envoyées concentrateurs tooEvent ainsi que Identification nombre du véhicule la voiture hello et un horodatage.</span><span class="sxs-lookup"><span data-stu-id="13d3c-118">Data is then sent tooEvent Hubs along with hello car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="13d3c-119">Une topologie Storm en cours d’exécution sur un Apache Storm sur le cluster HDInsight à partir de là, lit les données de hello, traite et stocke dans HDFS.</span><span class="sxs-lookup"><span data-stu-id="13d3c-119">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads hello data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="13d3c-120">Au cours du traitement, hello VIN est tooretrieve utilisé les informations de modèle de base de données Cosmos.</span><span class="sxs-lookup"><span data-stu-id="13d3c-120">During processing, hello VIN is used tooretrieve model information from Cosmos DB.</span></span> <span data-ttu-id="13d3c-121">Ces données sont ajoutées des flux de données toohello avant d’être stockée.</span><span class="sxs-lookup"><span data-stu-id="13d3c-121">This data is added toohello data stream before it is stored.</span></span>

<span data-ttu-id="13d3c-122">composants Hello utilisés Bonjour Storm topologie sont :</span><span class="sxs-lookup"><span data-stu-id="13d3c-122">hello components used in hello Storm Topology are:</span></span>

* <span data-ttu-id="13d3c-123">**EventHubSpout** : lit les données à partir d'Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="13d3c-123">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="13d3c-124">**TypeConversionBolt** -convertit hello chaîne JSON à partir de concentrateurs d’événements dans un tuple contenant hello capteur données suivantes :</span><span class="sxs-lookup"><span data-stu-id="13d3c-124">**TypeConversionBolt** - converts hello JSON string from Event Hubs into a tuple containing hello following sensor data:</span></span>
    * <span data-ttu-id="13d3c-125">Engine temperature</span><span class="sxs-lookup"><span data-stu-id="13d3c-125">Engine temperature</span></span>
    * <span data-ttu-id="13d3c-126">Température ambiante</span><span class="sxs-lookup"><span data-stu-id="13d3c-126">Ambient temperature</span></span>
    * <span data-ttu-id="13d3c-127">Vitesse</span><span class="sxs-lookup"><span data-stu-id="13d3c-127">Speed</span></span>
    * <span data-ttu-id="13d3c-128">VIN</span><span class="sxs-lookup"><span data-stu-id="13d3c-128">VIN</span></span>
    * <span data-ttu-id="13d3c-129">Timestamp</span><span class="sxs-lookup"><span data-stu-id="13d3c-129">Timestamp</span></span>
* <span data-ttu-id="13d3c-130">**DataReferencBolt** -recherche de base de données Cosmos à l’aide de hello VIN modèle du véhicule hello</span><span class="sxs-lookup"><span data-stu-id="13d3c-130">**DataReferencBolt** - looks up hello vehicle model from Cosmos DB using hello VIN</span></span>
* <span data-ttu-id="13d3c-131">**WasbStoreBolt** -magasins hello données tooHDFS (stockage Azure)</span><span class="sxs-lookup"><span data-stu-id="13d3c-131">**WasbStoreBolt** - stores hello data tooHDFS (Azure Storage)</span></span>

<span data-ttu-id="13d3c-132">Hello suivant l’image est un diagramme de cette solution :</span><span class="sxs-lookup"><span data-stu-id="13d3c-132">hello following image is a diagram of this solution:</span></span>

![topologie Storm](./media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

## <a name="implementation"></a><span data-ttu-id="13d3c-134">Implémentation</span><span class="sxs-lookup"><span data-stu-id="13d3c-134">Implementation</span></span>

<span data-ttu-id="13d3c-135">Complète, solution automatisée pour ce scénario est disponible dans le cadre de hello [HDInsight-Storm-exemples](https://github.com/hdinsight/hdinsight-storm-examples) référentiel sur GitHub.</span><span class="sxs-lookup"><span data-stu-id="13d3c-135">A complete, automated solution for this scenario is available as part of hello [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="13d3c-136">toouse cet exemple, suivez les étapes hello Bonjour [IoTExample README. MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="13d3c-136">toouse this example, follow hello steps in hello [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="13d3c-137">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="13d3c-137">Next Steps</span></span>

<span data-ttu-id="13d3c-138">Pour plus d'exemples de topologies Storm, consultez les [exemples de topologies pour Storm dans HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="13d3c-138">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>

