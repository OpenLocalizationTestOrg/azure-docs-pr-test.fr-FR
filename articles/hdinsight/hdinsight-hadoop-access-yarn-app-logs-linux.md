---
title: "Accéder aux journaux des applications Hadoop YARN dans HDInsight sous Linux | Microsoft Docs"
description: "Découvrez comment accéder aux journaux des applications YARN sur un cluster HDInsight sous Linux (Hadoop) à l’aide de la ligne de commande et d’un navigateur web."
services: hdinsight
documentationcenter: 
tags: azure-portal
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 3ec08d20-4f19-4a8e-ac86-639c04d2f12e
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/31/2017
ms.author: larryfr
ms.openlocfilehash: fbbbddc47f24a46eac9bc64d4420ee8429ed4ad1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="access-yarn-application-logs-on-linux-based-hdinsight"></a><span data-ttu-id="09cc8-103">Accéder aux journaux des applications YARN dans HDInsight sous Linux</span><span class="sxs-lookup"><span data-stu-id="09cc8-103">Access YARN application logs on Linux-based HDInsight</span></span>

<span data-ttu-id="09cc8-104">Découvrez comment accéder aux journaux des applications YARN (Yet Another Resource Negotiator) sur un cluster Hadoop dans Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="09cc8-104">Learn how to access the logs for YARN (Yet Another Resource Negotiator) applications on a Hadoop cluster in Azure HDInsight.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="09cc8-105">Les étapes décrites dans ce document nécessitent un cluster HDInsight utilisant Linux.</span><span class="sxs-lookup"><span data-stu-id="09cc8-105">The steps in this document require an HDInsight cluster that uses Linux.</span></span> <span data-ttu-id="09cc8-106">Linux est le seul système d’exploitation utilisé sur HDInsight version 3.4 ou supérieure.</span><span class="sxs-lookup"><span data-stu-id="09cc8-106">Linux is the only operating system used on HDInsight version 3.4 or greater.</span></span> <span data-ttu-id="09cc8-107">Pour plus d’informations, consultez [Contrôle de version des composants HDInsight](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span><span class="sxs-lookup"><span data-stu-id="09cc8-107">For more information, see [HDInsight component versioning](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span></span>

## <span data-ttu-id="09cc8-108"><a name="YARNTimelineServer"></a>YARN Timeline Server</span><span class="sxs-lookup"><span data-stu-id="09cc8-108"><a name="YARNTimelineServer"></a>YARN Timeline Server</span></span>

<span data-ttu-id="09cc8-109">Le serveur [YARN Timeline Server](http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html) fournit des informations génériques sur les applications terminées, ainsi que des informations sur les applications spécifiques à l’infrastructure, via deux interfaces différentes.</span><span class="sxs-lookup"><span data-stu-id="09cc8-109">The [YARN Timeline Server](http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html) provides generic information on completed applications and framework-specific application information through two different interfaces.</span></span> <span data-ttu-id="09cc8-110">Plus précisément :</span><span class="sxs-lookup"><span data-stu-id="09cc8-110">Specifically:</span></span>

* <span data-ttu-id="09cc8-111">Le stockage et la récupération d’informations génériques sur les applications sur les clusters HDInsight sont activés dans les versions 3.1.1.374 ou ultérieures.</span><span class="sxs-lookup"><span data-stu-id="09cc8-111">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span></span>
* <span data-ttu-id="09cc8-112">Le composant fournissant des informations sur les applications spécifiques à l'infrastructure n'est pas actuellement disponible sur les clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="09cc8-112">The framework-specific application information component of the Timeline Server is not currently available on HDInsight clusters.</span></span>

<span data-ttu-id="09cc8-113">Les informations génériques sur les applications comprennent les types de données suivants :</span><span class="sxs-lookup"><span data-stu-id="09cc8-113">Generic information on applications includes the following type of data:</span></span>

* <span data-ttu-id="09cc8-114">ID d’application, identificateur unique d’une application</span><span class="sxs-lookup"><span data-stu-id="09cc8-114">The application ID, a unique identifier of an application</span></span>
* <span data-ttu-id="09cc8-115">Utilisateur ayant démarré l’application</span><span class="sxs-lookup"><span data-stu-id="09cc8-115">The user who started the application</span></span>
* <span data-ttu-id="09cc8-116">Informations sur les tentatives effectuées afin de terminer l’application</span><span class="sxs-lookup"><span data-stu-id="09cc8-116">Information on attempts made to complete the application</span></span>
* <span data-ttu-id="09cc8-117">Conteneurs utilisés par toute tentative d’application donnée</span><span class="sxs-lookup"><span data-stu-id="09cc8-117">The containers used by any given application attempt</span></span>

## <span data-ttu-id="09cc8-118"><a name="YARNAppsAndLogs"></a>Applications et journaux YARN</span><span class="sxs-lookup"><span data-stu-id="09cc8-118"><a name="YARNAppsAndLogs"></a>YARN applications and logs</span></span>

<span data-ttu-id="09cc8-119">YARN (Yet Another Resource Negotiator) prend en charge plusieurs modèles de programmation (dont MapReduce) en séparant la gestion des ressources de la planification et de l’analyse des applications.</span><span class="sxs-lookup"><span data-stu-id="09cc8-119">YARN supports multiple programming models (MapReduce being one of them) by decoupling resource management from application scheduling/monitoring.</span></span> <span data-ttu-id="09cc8-120">YARN utilise les éléments suivant : *ResourceManager* (RM) global, *NodeManagers* (NM) par nœud worker et *ApplicationMasters* (AM) par application.</span><span class="sxs-lookup"><span data-stu-id="09cc8-120">YARN uses a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span></span> <span data-ttu-id="09cc8-121">Le maître d'application, propre à chaque application, négocie les ressources nécessaires (processeur, mémoire, disque, réseau) pour exécuter l'application avec le gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="09cc8-121">The per-application AM negotiates resources (CPU, memory, disk, network) for running your application with the RM.</span></span> <span data-ttu-id="09cc8-122">Le gestionnaire de ressources fonctionne avec les gestionnaires de nœuds pour octroyer ces ressources sous forme de *conteneurs*.</span><span class="sxs-lookup"><span data-stu-id="09cc8-122">The RM works with NMs to grant these resources, which are granted as *containers*.</span></span> <span data-ttu-id="09cc8-123">Le maître d'application est chargé de suivre la progression des conteneurs qui lui sont assignés par le gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="09cc8-123">The AM is responsible for tracking the progress of the containers assigned to it by the RM.</span></span> <span data-ttu-id="09cc8-124">Selon la nature de l'application, celle-ci peut nécessiter de nombreux conteneurs.</span><span class="sxs-lookup"><span data-stu-id="09cc8-124">An application may require many containers depending on the nature of the application.</span></span>

<span data-ttu-id="09cc8-125">Chaque application peut comporter plusieurs *tentatives d’application*.</span><span class="sxs-lookup"><span data-stu-id="09cc8-125">Each application may consist of multiple *application attempts*.</span></span> <span data-ttu-id="09cc8-126">Si une application échoue, vous pouvez la relancer. Il s’agit alors d’une nouvelle tentative.</span><span class="sxs-lookup"><span data-stu-id="09cc8-126">If an application fails, it may be retried as a new attempt.</span></span> <span data-ttu-id="09cc8-127">Chaque tentative est exécutée dans un conteneur.</span><span class="sxs-lookup"><span data-stu-id="09cc8-127">Each attempt runs in a container.</span></span> <span data-ttu-id="09cc8-128">D’une certaine manière, un conteneur fournit le contexte pour l’unité de base du travail effectué par une application YARN.</span><span class="sxs-lookup"><span data-stu-id="09cc8-128">In a sense, a container provides the context for basic unit of work performed by a YARN application.</span></span> <span data-ttu-id="09cc8-129">Tout le travail réalisé dans le contexte d’un conteneur est effectué sur l’unique nœud Worker auquel le conteneur a été alloué.</span><span class="sxs-lookup"><span data-stu-id="09cc8-129">All work that is done within the context of a container is performed on the single worker node on which the container was allocated.</span></span> <span data-ttu-id="09cc8-130">Pour plus d’informations, consultez la rubrique [Concepts relatifs à YARN][YARN-concepts].</span><span class="sxs-lookup"><span data-stu-id="09cc8-130">See [YARN Concepts][YARN-concepts] for further reference.</span></span>

<span data-ttu-id="09cc8-131">Les journaux des applications (et les journaux des conteneurs associés) sont essentiels pour déboguer des applications Hadoop problématiques.</span><span class="sxs-lookup"><span data-stu-id="09cc8-131">Application logs (and the associated container logs) are critical in debugging problematic Hadoop applications.</span></span> <span data-ttu-id="09cc8-132">La fonctionnalité [Agrégation de journaux][log-aggregation] de YARN fournit une infrastructure adaptée à la collecte, à l’agrégation et au stockage des journaux des applications.</span><span class="sxs-lookup"><span data-stu-id="09cc8-132">YARN provides a nice framework for collecting, aggregating, and storing application logs with the [Log Aggregation][log-aggregation] feature.</span></span> <span data-ttu-id="09cc8-133">La fonction d’agrégation de journaux rend l’accès aux journaux des applications plus déterministe.</span><span class="sxs-lookup"><span data-stu-id="09cc8-133">The Log Aggregation feature makes accessing application logs more deterministic.</span></span> <span data-ttu-id="09cc8-134">Il regroupe les journaux de tous les conteneurs sur un nœud Worker et les stocke dans un fichier journal agrégé par nœud Worker.</span><span class="sxs-lookup"><span data-stu-id="09cc8-134">It aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node.</span></span> <span data-ttu-id="09cc8-135">Le journal est stocké sur le système de fichiers par défaut après la fin d’une application.</span><span class="sxs-lookup"><span data-stu-id="09cc8-135">The log is stored on the default file system after an application finishes.</span></span> <span data-ttu-id="09cc8-136">Votre application peut utiliser des centaines voire des milliers de conteneurs, mais les journaux de tous les conteneurs exécutés sur un nœud worker unique sont toujours regroupés dans un fichier unique.</span><span class="sxs-lookup"><span data-stu-id="09cc8-136">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node are always aggregated to a single file.</span></span> <span data-ttu-id="09cc8-137">Cela se traduit par l’existence d’un seul fichier journal par nœud worker utilisé par votre application.</span><span class="sxs-lookup"><span data-stu-id="09cc8-137">So there is only 1 log per worker node used by your application.</span></span> <span data-ttu-id="09cc8-138">L’agrégation de journaux est activée par défaut sur les clusters HDInsight version 3.0 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="09cc8-138">Log Aggregation is enabled by default on HDInsight clusters version 3.0 and above.</span></span> <span data-ttu-id="09cc8-139">Les journaux agrégés sont situés dans le stockage par défaut pour le cluster.</span><span class="sxs-lookup"><span data-stu-id="09cc8-139">Aggregated logs are located in default storage for the cluster.</span></span> <span data-ttu-id="09cc8-140">Le chemin d’accès suivant est le chemin d’accès HDFS pour les journaux :</span><span class="sxs-lookup"><span data-stu-id="09cc8-140">The following path is the HDFS path to the logs:</span></span>

    /app-logs/<user>/logs/<applicationId>

<span data-ttu-id="09cc8-141">Dans le chemin d’accès, `user` est le nom de l’utilisateur qui a démarré l’application.</span><span class="sxs-lookup"><span data-stu-id="09cc8-141">In the path, `user` is the name of the user who started the application.</span></span> <span data-ttu-id="09cc8-142">Le `applicationId` est l’identificateur unique affecté à une application par le Gestionnaire de ressources YARN.</span><span class="sxs-lookup"><span data-stu-id="09cc8-142">The `applicationId` is the unique identifier assigned to an application by the YARN RM.</span></span>

<span data-ttu-id="09cc8-143">Les journaux agrégés ne sont pas lisibles directement, car ils sont écrits dans un [TFile][T-file], un [format binaire][binary-format] indexé par conteneur.</span><span class="sxs-lookup"><span data-stu-id="09cc8-143">The aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span></span> <span data-ttu-id="09cc8-144">Utilisez les journaux ResourceManager YARN ou les outils CLI pour afficher ces journaux au format texte brut pour les applications ou les conteneurs qui présentent un intérêt.</span><span class="sxs-lookup"><span data-stu-id="09cc8-144">Use the YARN ResourceManager logs or CLI tools to view these logs as plain text for applications or containers of interest.</span></span>

## <a name="yarn-cli-tools"></a><span data-ttu-id="09cc8-145">Outils de l’interface de ligne de commande YARN</span><span class="sxs-lookup"><span data-stu-id="09cc8-145">YARN CLI tools</span></span>

<span data-ttu-id="09cc8-146">Pour utiliser les outils de l’interface de ligne de commande YARN, vous devez d’abord vous connecter au cluster HDInsight en utilisant le protocole SSH.</span><span class="sxs-lookup"><span data-stu-id="09cc8-146">To use the YARN CLI tools, you must first connect to the HDInsight cluster using SSH.</span></span> <span data-ttu-id="09cc8-147">Pour en savoir plus, voir [Utilisation de SSH avec HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span><span class="sxs-lookup"><span data-stu-id="09cc8-147">For information, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>

<span data-ttu-id="09cc8-148">Vous pouvez afficher ces journaux en texte brut en exécutant l’une des commandes suivantes :</span><span class="sxs-lookup"><span data-stu-id="09cc8-148">You can view these logs as plain text by running one of the following commands:</span></span>

    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application>
    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application> -containerId <containerId> -nodeAddress <worker-node-address>

<span data-ttu-id="09cc8-149">Définissez les valeurs &lt;applicationId>, &lt;user-who-started-the-application>, &lt;containerId>, et &lt;worker-node-address> lorsque vous exécutez ces commandes.</span><span class="sxs-lookup"><span data-stu-id="09cc8-149">Specify the &lt;applicationId>, &lt;user-who-started-the-application>, &lt;containerId>, and &lt;worker-node-address> information when running these commands.</span></span>

## <a name="yarn-resourcemanager-ui"></a><span data-ttu-id="09cc8-150">Interface utilisateur de ResourceManager YARN</span><span class="sxs-lookup"><span data-stu-id="09cc8-150">YARN ResourceManager UI</span></span>

<span data-ttu-id="09cc8-151">L’interface utilisateur ResourceManager YARN s’exécute sur le nœud principal du cluster.</span><span class="sxs-lookup"><span data-stu-id="09cc8-151">The YARN ResourceManager UI runs on the cluster headnode.</span></span> <span data-ttu-id="09cc8-152">Il est accessible via l’interface utilisateur web d’Ambari.</span><span class="sxs-lookup"><span data-stu-id="09cc8-152">It is accessed through the Ambari web UI.</span></span> <span data-ttu-id="09cc8-153">Procédez comme suit pour afficher les journaux YARN :</span><span class="sxs-lookup"><span data-stu-id="09cc8-153">Use the following steps to view the YARN logs:</span></span>

1. <span data-ttu-id="09cc8-154">Dans votre navigateur web, accédez à https://CLUSTERNAME.azurehdinsight.net.</span><span class="sxs-lookup"><span data-stu-id="09cc8-154">In your web browser, navigate to https://CLUSTERNAME.azurehdinsight.net.</span></span> <span data-ttu-id="09cc8-155">Remplacez CLUSTERNAME par le nom de votre cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="09cc8-155">Replace CLUSTERNAME with the name of your HDInsight cluster.</span></span>
2. <span data-ttu-id="09cc8-156">Dans la liste des services sur la gauche, sélectionnez **YARN**.</span><span class="sxs-lookup"><span data-stu-id="09cc8-156">From the list of services on the left, select **YARN**.</span></span>

    ![Service YARN sélectionné](./media/hdinsight-hadoop-access-yarn-app-logs-linux/yarnservice.png)
3. <span data-ttu-id="09cc8-158">Dans la liste déroulante **Liens rapides**, sélectionnez un des nœuds principaux du cluster, puis **Journal ResourceManager**.</span><span class="sxs-lookup"><span data-stu-id="09cc8-158">From the **Quick Links** dropdown, select one of the cluster head nodes and then select **ResourceManager Log**.</span></span>

    ![Liens rapides YARN](./media/hdinsight-hadoop-access-yarn-app-logs-linux/yarnquicklinks.png)

    <span data-ttu-id="09cc8-160">Une liste de liens menant vers les journaux YARN s’affiche.</span><span class="sxs-lookup"><span data-stu-id="09cc8-160">You are presented with a list of links to YARN logs.</span></span>

[YARN-timeline-server]:http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html
[log-aggregation]:http://hortonworks.com/blog/simplifying-user-logs-management-and-access-in-yarn/
[T-file]:https://issues.apache.org/jira/secure/attachment/12396286/TFile%20Specification%2020081217.pdf
[binary-format]:https://issues.apache.org/jira/browse/HADOOP-3315
[YARN-concepts]:http://hortonworks.com/blog/apache-hadoop-yarn-concepts-and-applications/
