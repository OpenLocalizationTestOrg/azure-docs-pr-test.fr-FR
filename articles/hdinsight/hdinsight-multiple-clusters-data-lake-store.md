---
title: Utiliser plusieurs clusters HDInsight avec un compte Azure Data Lake Store - Azure | Microsoft Docs
description: "Découvrez comment utiliser plusieurs clusters HDInsight avec un seul compte Data Lake Store"
keywords: "stockage hdinsight, hdfs, données structurées, données non structurées, data lake store"
services: hdinsight,storage
documentationcenter: 
tags: azure-portal
author: nitinme
manager: jhubbard
editor: cgronlun
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/02/2017
ms.author: nitinme
ms.openlocfilehash: 043141e8496a947f54564d29a1d7fb724fac5cda
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="use-multiple-hdinsight-clusters-with-an-azure-data-lake-store-account"></a><span data-ttu-id="ba0f4-104">Utiliser plusieurs clusters HDInsight avec un compte Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="ba0f4-104">Use multiple HDInsight clusters with an Azure Data Lake Store account</span></span>

<span data-ttu-id="ba0f4-105">À partir de HDInsight version 3.5, vous pouvez créer des clusters HDInsight avec des comptes Azure Data Lake Store en tant que système de fichiers par défaut.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-105">Starting with HDInsight version 3.5, you can create HDInsight clusters with  Azure Data Lake Store accounts as the default filesystem.</span></span>
<span data-ttu-id="ba0f4-106">Data Lake Store prend en charge le stockage illimité qui le rend idéal non seulement pour héberger de grandes quantités de données, mais également pour héberger plusieurs clusters HDInsight qui partagent un même compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-106">Data Lake Store supports unlimited storage that makes it ideal not only for hosting large amounts of data; but also for hosting multiple HDInsight clusters that share a single Data Lake Store Account.</span></span> <span data-ttu-id="ba0f4-107">Pour obtenir des instructions sur la création d’un cluster HDInsight avec Data Lake Store en tant que stockage, consultez [Créer des clusters HDInsight avec Data Lake Store](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-107">For instructionson how to create an HDInsight cluster with Data Lake Store as the storage, see [Create HDInsight clusters with Data Lake Store](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).</span></span>

<span data-ttu-id="ba0f4-108">Cet article fournit des recommandations à l’administrateur Data Lake Store pour configurer un compte Data Lake Store unique et partagé qui peut être utilisé sur plusieurs clusters HDInsight **actifs**.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-108">This article provides recommendations to the Data Lake store administrator for setting up a single and shared Data Lake Store Account that can be used across multiple **active** HDInsight clusters.</span></span> <span data-ttu-id="ba0f4-109">Ces recommandations s’appliquent à l’hébergement de plusieurs clusters Hadoop sécurisés ou non sécurisés sur un compte Data Lake Store partagé.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-109">These recommendations apply to hosting multiple secure as well as non-secure Hadoop clusters on a shared Data Lake store account.</span></span>


## <a name="data-lake-store-file-and-folder-level-acls"></a><span data-ttu-id="ba0f4-110">ACL de niveau fichier et dossier Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="ba0f4-110">Data Lake Store file and folder level ACLs</span></span>

<span data-ttu-id="ba0f4-111">Le reste de cet article suppose que vous avez une bonne connaissance des ACL de niveau fichier et dossier dans l’application Azure Data Lake Store, qui est décrite en détail dans [Contrôle d’accès dans Azure Data Lake Store](../data-lake-store/data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-111">The rest of this article assumes that you have a good knowledge of file and folder level ACLs in Azure Data Lake Store, which is described in detail at [Access control in Azure Data Lake Store](../data-lake-store/data-lake-store-access-control.md).</span></span>

## <a name="data-lake-store-setup-for-multiple-hdinsight-clusters"></a><span data-ttu-id="ba0f4-112">Configuration de Data Lake Store pour plusieurs clusters HDInsight</span><span class="sxs-lookup"><span data-stu-id="ba0f4-112">Data Lake Store setup for multiple HDInsight clusters</span></span>
<span data-ttu-id="ba0f4-113">Prenons une hiérarchie de dossiers sur deux niveaux pour expliquer les recommandations quant à l’utilisation de plusieurs clusters HDInsight avec un compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-113">Let us take a two-level folder hierarchy to explain the recommendations for using mutilple HDInsight clusters with a Data Lake Store account.</span></span> <span data-ttu-id="ba0f4-114">Supposons que vous possédez un compte Data Lake Store avec la structure de dossiers **/clusters/finance**.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-114">Consider you have a Data Lake Store account with the folder structure **/clusters/finance**.</span></span> <span data-ttu-id="ba0f4-115">Avec cette structure, tous les clusters requis par le service financier peuvent utiliser /clusters/finance comme emplacement de stockage.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-115">With this structure, all the clusters required by the Finance organization can use /clusters/finance as the storage location.</span></span> <span data-ttu-id="ba0f4-116">À l’avenir, si une autre organisation (le service marketing par ex.) souhaite créer des clusters HDInsight avec le même compte Data Lake Store, elle pourrait créer /clusters/marketing.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-116">In the future, if another organization, say Marketing, wants to create HDInsight clusters using the same Data Lake Store account, they could create /clusters/marketing.</span></span> <span data-ttu-id="ba0f4-117">Pour l’instant, nous allons simplement utiliser **/clusters/finance**.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-117">For now, let's just use **/clusters/finance**.</span></span>

<span data-ttu-id="ba0f4-118">Pour que cette structure de dossiers soit bien utilisée par les clusters HDInsight, l’administrateur Data Lake Store doit attribuer les autorisations appropriées, comme décrit dans le tableau.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-118">To enable this folder structure to be effectively used by HDInsight clusters, the Data Lake Store administrator must assign appropriate permissions, as described in the table.</span></span> <span data-ttu-id="ba0f4-119">Les autorisations indiquées dans le tableau correspondent aux ACL d’accès et non aux ACL par défaut.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-119">The permissions shown in the table correspond to Access-ACLs, and not Default-ACLs.</span></span> 


|<span data-ttu-id="ba0f4-120">Dossier</span><span class="sxs-lookup"><span data-stu-id="ba0f4-120">Folder</span></span>  |<span data-ttu-id="ba0f4-121">Autorisations</span><span class="sxs-lookup"><span data-stu-id="ba0f4-121">Permissions</span></span>  |<span data-ttu-id="ba0f4-122">utilisateur propriétaire</span><span class="sxs-lookup"><span data-stu-id="ba0f4-122">Owning user</span></span>  |<span data-ttu-id="ba0f4-123">groupe propriétaire</span><span class="sxs-lookup"><span data-stu-id="ba0f4-123">Owning group</span></span>  | <span data-ttu-id="ba0f4-124">Utilisateur nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-124">Named user</span></span> | <span data-ttu-id="ba0f4-125">Autorisations de l’utilisateur nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-125">Named user permissions</span></span> | <span data-ttu-id="ba0f4-126">Groupe nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-126">Named group</span></span> | <span data-ttu-id="ba0f4-127">Autorisations du groupe nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-127">Named group permissions</span></span> |
|---------|---------|---------|---------|---------|---------|---------|---------|
|/ | <span data-ttu-id="ba0f4-128">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="ba0f4-128">rwxr-x--x</span></span>  |<span data-ttu-id="ba0f4-129">admin</span><span class="sxs-lookup"><span data-stu-id="ba0f4-129">admin</span></span> |<span data-ttu-id="ba0f4-130">admin</span><span class="sxs-lookup"><span data-stu-id="ba0f4-130">admin</span></span>  |<span data-ttu-id="ba0f4-131">Principal du service</span><span class="sxs-lookup"><span data-stu-id="ba0f4-131">Service principal</span></span> |<span data-ttu-id="ba0f4-132">--x</span><span class="sxs-lookup"><span data-stu-id="ba0f4-132">--x</span></span>  |<span data-ttu-id="ba0f4-133">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ba0f4-133">FINGRP</span></span>   |<span data-ttu-id="ba0f4-134">r-x</span><span class="sxs-lookup"><span data-stu-id="ba0f4-134">r-x</span></span>         |
|<span data-ttu-id="ba0f4-135">/clusters</span><span class="sxs-lookup"><span data-stu-id="ba0f4-135">/clusters</span></span> | <span data-ttu-id="ba0f4-136">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="ba0f4-136">rwxr-x--x</span></span> |<span data-ttu-id="ba0f4-137">admin</span><span class="sxs-lookup"><span data-stu-id="ba0f4-137">admin</span></span> |<span data-ttu-id="ba0f4-138">admin</span><span class="sxs-lookup"><span data-stu-id="ba0f4-138">admin</span></span> |<span data-ttu-id="ba0f4-139">Principal du service</span><span class="sxs-lookup"><span data-stu-id="ba0f4-139">Service principal</span></span> |<span data-ttu-id="ba0f4-140">--x</span><span class="sxs-lookup"><span data-stu-id="ba0f4-140">--x</span></span>  |<span data-ttu-id="ba0f4-141">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ba0f4-141">FINGRP</span></span> |<span data-ttu-id="ba0f4-142">r-x</span><span class="sxs-lookup"><span data-stu-id="ba0f4-142">r-x</span></span>         |
|<span data-ttu-id="ba0f4-143">/clusters/finance</span><span class="sxs-lookup"><span data-stu-id="ba0f4-143">/clusters/finance</span></span> | <span data-ttu-id="ba0f4-144">rwxr-x--t</span><span class="sxs-lookup"><span data-stu-id="ba0f4-144">rwxr-x--t</span></span> |<span data-ttu-id="ba0f4-145">admin</span><span class="sxs-lookup"><span data-stu-id="ba0f4-145">admin</span></span> |<span data-ttu-id="ba0f4-146">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ba0f4-146">FINGRP</span></span>  |<span data-ttu-id="ba0f4-147">Principal du service</span><span class="sxs-lookup"><span data-stu-id="ba0f4-147">Service principal</span></span> |<span data-ttu-id="ba0f4-148">rwx</span><span class="sxs-lookup"><span data-stu-id="ba0f4-148">rwx</span></span>  |-  |-     |

<span data-ttu-id="ba0f4-149">Dans le tableau,</span><span class="sxs-lookup"><span data-stu-id="ba0f4-149">In the table,</span></span>

- <span data-ttu-id="ba0f4-150">**admin** est le créateur et l’administrateur du compte Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-150">**admin** is the creator and administrator of the Data Lake Store account.</span></span>
- <span data-ttu-id="ba0f4-151">**Principal de service** est le principal de service Azure Active Directory (AAD) associé au compte.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-151">**Service principal** is the Azure Active Directory (AAD) service principal associated with the account.</span></span>
- <span data-ttu-id="ba0f4-152">**FINGRP** est un groupe d’utilisateurs créé dans AAD qui contient les utilisateurs du service financier.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-152">**FINGRP** is a user group created in AAD that contains users from the Finance organization.</span></span>

<span data-ttu-id="ba0f4-153">Pour obtenir des instructions sur la création d’une application AAD (qui crée également un principal de service), consultez [Créer une application AAD](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-153">For instructions on how to create an AAD application (that also creates a Service Principal), see [Create an AAD application](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application).</span></span> <span data-ttu-id="ba0f4-154">Pour obtenir des instructions sur la création d’un groupe d’utilisateurs dans AAD, consultez [Gestion des groupes dans Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-154">For instructions on how to create a user group in AAD, see [Managing groups in Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).</span></span>

<span data-ttu-id="ba0f4-155">Quelques points importants à prendre en compte.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-155">Some key points to consider.</span></span>

- <span data-ttu-id="ba0f4-156">La structure de dossiers sur deux niveaux (**/clusters/finance/**) doit être créée et configurée avec les autorisations appropriées par l’administrateur Data Lake Store **avant** d’utiliser le compte de stockage pour les clusters.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-156">The two level folder structure (**/clusters/finance/**) must be created and provisioned with appropriate permissions by the Data Lake Store admin **before** using the storage account for clusters.</span></span> <span data-ttu-id="ba0f4-157">Cette structure n’est pas créée automatiquement lors de la création des clusters.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-157">This structure is not created automatically while creating clusters.</span></span>
- <span data-ttu-id="ba0f4-158">L’exemple ci-dessus recommande de définir le groupe propriétaire de **/clusters/finance** en tant que **FINGRP** et d’octroyer à FINGRP l’accès **r-x** à l’intégralité de la hiérarchie des dossiers à partir de la racine.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-158">The example above recommends setting the owning group of **/clusters/finance** as **FINGRP** and permitting **r-x** access to FINGRP to the entire folder hierarchy starting from the root.</span></span> <span data-ttu-id="ba0f4-159">Cela permet de s’assurer que les membres de FINGRP peuvent accéder à la structure de dossiers à partir de la racine.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-159">This ensures that the members of FINGRP can navigate the folder structure starting from root.</span></span>
- <span data-ttu-id="ba0f4-160">Dans le cas où plusieurs principaux de service AAD peuvent créer des clusters sous **/clusters/finance**, le sticky-bit (lorsque défini sur le dossier **finance**) permet de s’assurer que les dossiers créés par un principal de service ne peuvent pas être supprimés par les autres.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-160">In the case when different AAD Service Principals can create clusters under **/clusters/finance**, the sticky-bit (when set on the **finance** folder) ensures that folders created by one Service Principal cannot be deleted by the other.</span></span>
- <span data-ttu-id="ba0f4-161">Une fois que la structure de dossiers et les autorisations sont en place, le processus de création de clusters HDInsight crée un emplacement de stockage spécifique aux clusters sous **/clusters/finance/**.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-161">Once the folder structure and permissions are in place, HDInsight cluster creation process creates a cluster-specific storage loaction under **/clusters/finance/**.</span></span> <span data-ttu-id="ba0f4-162">Par exemple, l’emplacement de stockage d’un cluster nommé fincluster01 pourrait être **/clusters/finance/fincluster01**.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-162">For example, the storage for a cluster with the name fincluster01 could be **/clusters/finance/fincluster01**.</span></span> <span data-ttu-id="ba0f4-163">La propriété et les autorisations pour les dossiers créés par le cluster HDInsight sont indiquées dans le tableau présenté ici.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-163">The ownership and permissions for the folders created by HDInsight cluster is shown in the table here.</span></span>

    |<span data-ttu-id="ba0f4-164">Dossier</span><span class="sxs-lookup"><span data-stu-id="ba0f4-164">Folder</span></span>  |<span data-ttu-id="ba0f4-165">Autorisations</span><span class="sxs-lookup"><span data-stu-id="ba0f4-165">Permissions</span></span>  |<span data-ttu-id="ba0f4-166">utilisateur propriétaire</span><span class="sxs-lookup"><span data-stu-id="ba0f4-166">Owning user</span></span>  |<span data-ttu-id="ba0f4-167">groupe propriétaire</span><span class="sxs-lookup"><span data-stu-id="ba0f4-167">Owning group</span></span>  | <span data-ttu-id="ba0f4-168">Utilisateur nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-168">Named user</span></span> | <span data-ttu-id="ba0f4-169">Autorisations de l’utilisateur nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-169">Named user permissions</span></span> | <span data-ttu-id="ba0f4-170">Groupe nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-170">Named group</span></span> | <span data-ttu-id="ba0f4-171">Autorisations du groupe nommé</span><span class="sxs-lookup"><span data-stu-id="ba0f4-171">Named group permissions</span></span> |
    |---------|---------|---------|---------|---------|---------|---------|---------|
    |<span data-ttu-id="ba0f4-172">/clusters/finance/fincluster01</span><span class="sxs-lookup"><span data-stu-id="ba0f4-172">/clusters/finanace/ fincluster01</span></span> | <span data-ttu-id="ba0f4-173">rwxr-x---</span><span class="sxs-lookup"><span data-stu-id="ba0f4-173">rwxr-x---</span></span>  |<span data-ttu-id="ba0f4-174">Principal de service</span><span class="sxs-lookup"><span data-stu-id="ba0f4-174">Service Principal</span></span> |<span data-ttu-id="ba0f4-175">FINGRP</span><span class="sxs-lookup"><span data-stu-id="ba0f4-175">FINGRP</span></span>  |- |-  |-   |-  | 
   


## <a name="recommendations-for-job-input-and-output-data"></a><span data-ttu-id="ba0f4-176">Recommandations pour les données d’entrée et de sortie de tâche</span><span class="sxs-lookup"><span data-stu-id="ba0f4-176">Recommendations for job input and output data</span></span>

<span data-ttu-id="ba0f4-177">Nous vous recommandons de stocker les données d’entrée et données de sortie d’une tâche en dehors de **/clusters**.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-177">We recommend that input data to a job, and the outputs from a job be stored in a folder outside **/clusters**.</span></span> <span data-ttu-id="ba0f4-178">Ainsi, même si le dossier spécifique aux clusters est supprimé pour récupérer de l’espace de stockage, les données d’entrée et de sortie de la tâche sont toujours disponibles pour une utilisation ultérieure.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-178">This ensures that even if the cluster-specific folder is deleted to reclaim some storage space,the job inputs and outputs are still available for future use.</span></span> <span data-ttu-id="ba0f4-179">Dans ce cas, assurez-vous que la hiérarchie des dossiers servant à stocker les données d’entrée et de sortie de la tâche permet un niveau d’accès approprié pour le principal de service.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-179">In such a case, ensure that the folder hierarchy for storing the job inputs and outputs allows appropriate level of access for the Service Principal.</span></span>

## <a name="limit-on-clusters-sharing-a-single-storage-account"></a><span data-ttu-id="ba0f4-180">Limite sur les clusters partageant un même compte de stockage</span><span class="sxs-lookup"><span data-stu-id="ba0f4-180">Limit on clusters sharing a single storage account</span></span>

<span data-ttu-id="ba0f4-181">La limite du nombre de clusters pouvant partager un même compte Data Lake Store dépend de la charge de travail exécutée sur ces clusters.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-181">The limit on the number of clusters that can share a single Data Lake Store account depends on the workload being run on those clusters.</span></span> <span data-ttu-id="ba0f4-182">En cas de nombre trop important de clusters ou de charges de travail très lourdes sur les clusters partageant un compte de stockage, l’entrée ou la sortie du compte de stockage risque d’être limitée.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-182">Having too many clusters or very heavy workloads on the clusters that share a storage account might cause the storage account ingress/egress to get throttled.</span></span>

## <a name="support-for-default-acls"></a><span data-ttu-id="ba0f4-183">Prise en charge des ACL par défaut</span><span class="sxs-lookup"><span data-stu-id="ba0f4-183">Support for Default-ACLs</span></span>

<span data-ttu-id="ba0f4-184">Lorsque vous créez un principal de service avec un accès utilisateur nommé (comme indiqué dans le tableau ci-dessus), nous vous recommandons de ne **pas** ajouter l’utilisateur nommé avec une ACL par défaut.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-184">When creating a Service Principal with named-user access (as shown in the table above), we recommend **not** adding the named-user with a default-ACL.</span></span> <span data-ttu-id="ba0f4-185">La configuration d’un accès utilisateur nommé utilisant des ACL par défaut se traduit par l’attribution de 770 autorisations pour l’utilisateur propriétaire, le groupe propriétaire et les autres.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-185">Provisioning named-user access using default-ACLs results in the assignment of 770 permissions for owning-user, owning-group, and others.</span></span> <span data-ttu-id="ba0f4-186">Bien que la valeur par défaut de 770 ne retire pas les autorisations de l’utilisateur propriétaire (7) ou du groupe propriétaire (7), elle retire les autorisations des autres (0).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-186">While this default value of 770 does not take away permissions from owning-user (7) or owning-group (7), it takes away all permissions for others (0).</span></span> <span data-ttu-id="ba0f4-187">Cela entraîne un problème connu avec un cas d’usage particulier qui est décrit en détail dans la section [Problèmes connus et solutions de contournement](#known-issues-and-workarounds).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-187">This results in a known issue with one particular use-case that is discussed in detail in the [Known issues and workarounds](#known-issues-and-workarounds) section.</span></span>

## <a name="known-issues-and-workarounds"></a><span data-ttu-id="ba0f4-188">Problèmes connus et solutions de contournement</span><span class="sxs-lookup"><span data-stu-id="ba0f4-188">Known issues and workarounds</span></span>

<span data-ttu-id="ba0f4-189">Cette section répertorie les problèmes connus en ce qui concerne l’utilisation de HDInsight avec Data Lake Store, ainsi que leurs solutions de contournement.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-189">This section lists the known issues for using HDInsight with Data Lake Store, and their workarounds.</span></span>

### <a name="publicly-visible-localized-yarn-resources"></a><span data-ttu-id="ba0f4-190">Ressources YARN localisées visibles publiquement</span><span class="sxs-lookup"><span data-stu-id="ba0f4-190">Publicly visible localized YARN resources</span></span>

<span data-ttu-id="ba0f4-191">Lorsqu’un nouveau compte Azure Data Lake Store est créé, le répertoire racine est automatiquement configuré avec les bits d’autorisation des ACL d’accès définis sur 770.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-191">When a new Azure Data Lake store account is created, the root directory is automatically provisioned with Access-ACL permission bits set to 770.</span></span> <span data-ttu-id="ba0f4-192">L’utilisateur propriétaire du dossier racine est défini sur l’utilisateur qui a créé le compte (l’administrateur Data Lake Store) tandis que le groupe propriétaire est défini sur le groupe principal de l’utilisateur qui a créé le compte.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-192">The root folder’s owning user is set to the user that created the account (the Data Lake Store admin) and the owning group is set to the primary group of the user that created the account.</span></span> <span data-ttu-id="ba0f4-193">Aucun accès n’est fourni pour les « autres ».</span><span class="sxs-lookup"><span data-stu-id="ba0f4-193">No access is provided for "others".</span></span>

<span data-ttu-id="ba0f4-194">Ces paramètres sont connus pour affecter un cas d’usage HDInsight particulier capturé dans [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247).</span><span class="sxs-lookup"><span data-stu-id="ba0f4-194">These settings are known to affect one specific HDInsight use-case captured in [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247).</span></span> <span data-ttu-id="ba0f4-195">L’envoi de tâches peut échouer avec un message d’erreur semblable à celui-ci :</span><span class="sxs-lookup"><span data-stu-id="ba0f4-195">Job submissions could fail with an error message similar to this:</span></span>

    Resource XXXX is not publicly accessible and as such cannot be part of the public cache.

<span data-ttu-id="ba0f4-196">Comme indiqué dans le YARN JIRA associé précédemment, lors de la localisation des ressources publiques, le localisateur valide le fait que toutes les ressources demandées sont bien publiques en vérifiant leurs autorisations sur le système de fichiers distant.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-196">As stated in the YARN JIRA linked earlier, while localizing public resources, the localizer validates that all the requested resources are indeed public by checking their permissions on the remote file-system.</span></span> <span data-ttu-id="ba0f4-197">Les éléments LocalResource qui ne correspondent pas à cette condition sont rejetés pour la localisation.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-197">Any LocalResource that does not fit that condition is rejected for localization.</span></span> <span data-ttu-id="ba0f4-198">La vérification des autorisations inclut l’accès en lecture au fichier pour les « autres ».</span><span class="sxs-lookup"><span data-stu-id="ba0f4-198">The check for permissions, includes read-access to the file for "others".</span></span> <span data-ttu-id="ba0f4-199">Ce scénario ne marche pas instantanément lors de l’hébergement des clusters HDInsight sur Azure Data Lake, car Azure Data Lake refuse tout accès aux « autres » au niveau du dossier racine.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-199">This scenario does not work out-of-the-box when hosting HDInsight clusters on Azure Data Lake, since Azure Data Lake denies all access to "others" at root folder level.</span></span>

#### <a name="workaround"></a><span data-ttu-id="ba0f4-200">Solution de contournement</span><span class="sxs-lookup"><span data-stu-id="ba0f4-200">Workaround</span></span>
<span data-ttu-id="ba0f4-201">Définissez les autorisations d’exécution en lecture pour les **autres** dans la hiérarchie, par exemple, au niveau  **/** , **/clusters** et **/clusters/finance** comme indiqué dans le tableau ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-201">Set read-execute permissions for **others** through the hierarchy, for example,  at **/**, **/clusters** and **/clusters/finance** as shown in the table above.</span></span>

## <a name="see-also"></a><span data-ttu-id="ba0f4-202">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ba0f4-202">See also</span></span>

* [<span data-ttu-id="ba0f4-203">Créer un cluster HDInsight avec Data Lake Store comme stockage.</span><span class="sxs-lookup"><span data-stu-id="ba0f4-203">Create an HDInsight cluster with Data Lake Store as storage</span></span>](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md)


