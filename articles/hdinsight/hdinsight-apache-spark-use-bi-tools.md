---
title: "aaaSpark BI à l’aide des outils de visualisation des données sur Azure HDInsight | Documents Microsoft"
description: "Utiliser des outils de visualisation de données à des fins d’analyse à l’aide d’Apache Spark BI sur des clusters HDInsight"
keywords: "apache spark bi,spark bi,visualisation de données spark,décisionnel spark"
services: hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 1448b536-9bc8-46bc-bbc6-d7001623642a
ms.service: hdinsight
ms.custom: hdinsightactive,hdiseo17may2017
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: nitinme
ms.openlocfilehash: ba4bfff737ce80ffca5c24f1c2c82a1447f467fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="apache-spark-bi-using-data-visualization-tools-with-azure-hdinsight"></a><span data-ttu-id="18904-104">Apache Spark BI utilisant des outils de visualisation de données avec Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="18904-104">Apache Spark BI using data visualization tools with Azure HDInsight</span></span>

<span data-ttu-id="18904-105">Découvrez comment visualisation des données toouse outils tels que Power BI et Tableau tooanalyze un jeu de données exemple brutes à l’aide d’Apache Spark BI sur les clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="18904-105">Learn how toouse data visualization tools such as Power BI and Tableau tooanalyze a raw sample data set using Apache Spark BI on HDInsight clusters.</span></span>

> [!NOTE]
> <span data-ttu-id="18904-106">La connectivité avec les outils décisionnels décrite dans cet article n’est pas prise en charge sur Spark 2.1 avec Azure HDInsight 3.6 version préliminaire.</span><span class="sxs-lookup"><span data-stu-id="18904-106">Connectivity with BI tools described in this article is not supported on Spark 2.1 on Azure HDInsight 3.6 Preview.</span></span> <span data-ttu-id="18904-107">Seules les versions Spark 1.6 et 2.0 (HDInsight 3.4, 3.5 respectivement) sont prises en charge.</span><span class="sxs-lookup"><span data-stu-id="18904-107">Only Spark versions 1.6 and 2.0 (HDInsight 3.4, 3.5 respectively) are supported.</span></span>
>

<span data-ttu-id="18904-108">Ce didacticiel est également disponible en tant que bloc-notes Jupyter sur un cluster Spark HDInsight.</span><span class="sxs-lookup"><span data-stu-id="18904-108">This tutorial is also available as a Jupyter notebook on an HDInsight Spark cluster.</span></span> <span data-ttu-id="18904-109">expérience de bloc-notes Hello vous permet d’exécuter des extraits de code hello Python à partir de l’ordinateur portable hello lui-même.</span><span class="sxs-lookup"><span data-stu-id="18904-109">hello notebook experience lets you run hello Python snippets from hello notebook itself.</span></span> <span data-ttu-id="18904-110">didacticiel de hello tooperform à partir d’un ordinateur portable, créez un cluster Spark, lancer un bloc-notes jupyter (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), puis exécutez bloc-notes de hello **utiliser les Outils BI avec Apache Spark sur HDInsight.ipynb** sous hello **Python**  dossier.</span><span class="sxs-lookup"><span data-stu-id="18904-110">tooperform hello tutorial from within a notebook, create a Spark cluster, launch a Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), and then run hello notebook **Use BI tools with Apache Spark on HDInsight.ipynb** under hello **Python** folder.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="18904-111">Composants requis</span><span class="sxs-lookup"><span data-stu-id="18904-111">Prerequisites</span></span>

* <span data-ttu-id="18904-112">Un cluster Apache Spark sur HDInsight.</span><span class="sxs-lookup"><span data-stu-id="18904-112">An Apache Spark cluster on HDInsight.</span></span> <span data-ttu-id="18904-113">Pour obtenir des instructions, consultez [Création de clusters Apache Spark dans Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span><span class="sxs-lookup"><span data-stu-id="18904-113">For instructions, see [Create Apache Spark clusters in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span></span>


## <span data-ttu-id="18904-114"><a name="hivetable"></a>Préparer les données pour la visualisation de données Spark</span><span class="sxs-lookup"><span data-stu-id="18904-114"><a name="hivetable"></a>Prepare data for Spark data visualization</span></span>

<span data-ttu-id="18904-115">Dans cette section, nous utilisons hello [Notebook](https://jupyter.org) portable à partir d’un HDInsight Spark cluster toorun travaux traiter vos données d’exemple brut et l’enregistrer en tant que table.</span><span class="sxs-lookup"><span data-stu-id="18904-115">In this section, we use hello [Jupyter](https://jupyter.org) notebook from an HDInsight Spark cluster toorun jobs that process your raw sample data and save it as a table.</span></span> <span data-ttu-id="18904-116">données d’exemple Hello sont un fichier .csv (hvac.csv) disponible sur tous les clusters par défaut.</span><span class="sxs-lookup"><span data-stu-id="18904-116">hello sample data is a .csv file (hvac.csv) available on all clusters by default.</span></span> <span data-ttu-id="18904-117">Une fois que vos données sont enregistrées en tant que table, dans la section suivante de hello nous utiliser BI outils tooconnect toohello table et d’effectuer des visualisations de données.</span><span class="sxs-lookup"><span data-stu-id="18904-117">Once your data is saved as a table, in hello next section we use BI tools tooconnect toohello table and perform data visualizations.</span></span>

> [!NOTE]
> <span data-ttu-id="18904-118">Si vous effectuez hello les étapes de cet article à la fin des instructions hello dans [exécuter des requêtes interactives sur un cluster HDInsight Spark](hdinsight-apache-spark-load-data-run-query.md), vous pouvez ignorer tooStep 8 ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="18904-118">If you are performing hello steps in this article after completing hello instructions in [Run interactive queries on an HDInsight Spark cluster](hdinsight-apache-spark-load-data-run-query.md), you can skip tooStep 8 below.</span></span>
>

1. <span data-ttu-id="18904-119">À partir de hello [portail Azure](https://portal.azure.com/), à partir du tableau d’accueil hello, cliquez sur la vignette hello pour votre cluster Spark (si vous avez épinglé il toohello tableau d’accueil).</span><span class="sxs-lookup"><span data-stu-id="18904-119">From hello [Azure portal](https://portal.azure.com/), from hello startboard, click hello tile for your Spark cluster (if you pinned it toohello startboard).</span></span> <span data-ttu-id="18904-120">Vous pouvez également naviguer cluster tooyour sous **parcourir tous les** > **Clusters HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="18904-120">You can also navigate tooyour cluster under **Browse All** > **HDInsight Clusters**.</span></span>   

2. <span data-ttu-id="18904-121">Dans le panneau de cluster Spark hello, cliquez sur **tableau de bord de Cluster**, puis cliquez sur **bloc-notes Jupyter**.</span><span class="sxs-lookup"><span data-stu-id="18904-121">From hello Spark cluster blade, click **Cluster Dashboard**, and then click **Jupyter Notebook**.</span></span> <span data-ttu-id="18904-122">Si vous y êtes invité, entrez les informations d’identification du admin de hello pour le cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="18904-122">If prompted, enter hello admin credentials for hello cluster.</span></span>

   > [!NOTE]
   > <span data-ttu-id="18904-123">Vous pouvez également atteindre hello bloc-notes Jupyter pour votre cluster en hello ouverture suivante d’URL dans votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="18904-123">You may also reach hello Jupyter Notebook for your cluster by opening hello following URL in your browser.</span></span> <span data-ttu-id="18904-124">Remplacez **CLUSTERNAME** avec nom hello de votre cluster :</span><span class="sxs-lookup"><span data-stu-id="18904-124">Replace **CLUSTERNAME** with hello name of your cluster:</span></span>
   >
   > `https://CLUSTERNAME.azurehdinsight.net/jupyter`
   >
   >

3. <span data-ttu-id="18904-125">Créez un bloc-notes.</span><span class="sxs-lookup"><span data-stu-id="18904-125">Create a notebook.</span></span> <span data-ttu-id="18904-126">Cliquez sur **Nouveau**, puis sur **PySpark**.</span><span class="sxs-lookup"><span data-stu-id="18904-126">Click **New**, and then click **PySpark**.</span></span>

    <span data-ttu-id="18904-127">![Créer un bloc-notes Jupyter pour Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Créer un bloc-notes Jupyter pour Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-127">![Create a Jupyter notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Create a Jupyter notebook for Apache Spark BI")</span></span>

4. <span data-ttu-id="18904-128">Un nouvel ordinateur portable est créé et ouvert avec le nom hello Untitled.pynb.</span><span class="sxs-lookup"><span data-stu-id="18904-128">A new notebook is created and opened with hello name Untitled.pynb.</span></span> <span data-ttu-id="18904-129">Cliquez sur le nom du bloc-notes hello haut hello et entrez un nom convivial.</span><span class="sxs-lookup"><span data-stu-id="18904-129">Click hello notebook name at hello top, and enter a friendly name.</span></span>

    <span data-ttu-id="18904-130">![Fournir un nom d’ordinateur portable de hello pour Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "fournir un nom d’ordinateur portable de hello pour Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-130">![Provide a name for hello notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "Provide a name for hello notebook for Apache Spark BI")</span></span>

5. <span data-ttu-id="18904-131">Étant donné que vous avez créé un ordinateur portable à l’aide de noyau de PySpark hello, il est inutile toocreate les contextes explicitement.</span><span class="sxs-lookup"><span data-stu-id="18904-131">Because you created a notebook using hello PySpark kernel, you do not need toocreate any contexts explicitly.</span></span> <span data-ttu-id="18904-132">contextes de Spark et Hive Hello sont créées automatiquement pour vous lors de l’exécution de la première cellule de code hello.</span><span class="sxs-lookup"><span data-stu-id="18904-132">hello Spark and Hive contexts are automatically created for you when you run hello first code cell.</span></span> <span data-ttu-id="18904-133">Vous pouvez commencer par importer les types hello requis pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="18904-133">You can start by importing hello types required for this scenario.</span></span> <span data-ttu-id="18904-134">toodo, placez le curseur de hello dans la cellule de hello et appuyez sur **MAJ + ENTRÉE**.</span><span class="sxs-lookup"><span data-stu-id="18904-134">toodo so, place hello cursor in hello cell and press **SHIFT + ENTER**.</span></span>

        from pyspark.sql import *

6. <span data-ttu-id="18904-135">Chargez un exemple de données dans une table temporaire.</span><span class="sxs-lookup"><span data-stu-id="18904-135">Load sample data into a temporary table.</span></span> <span data-ttu-id="18904-136">Lorsque vous créez un cluster Spark dans HDInsight, le fichier de données d’exemple hello, **hvac.csv**, est le compte de stockage toohello copié associée sous **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span><span class="sxs-lookup"><span data-stu-id="18904-136">When you create a Spark cluster in HDInsight, hello sample data file, **hvac.csv**, is copied toohello associated storage account under **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span></span>

    <span data-ttu-id="18904-137">Dans une cellule vide, collez hello qui suit extrait de code, puis appuyez sur **MAJ + ENTRÉE**.</span><span class="sxs-lookup"><span data-stu-id="18904-137">In an empty cell, paste hello following snippet and press **SHIFT + ENTER**.</span></span> <span data-ttu-id="18904-138">Cet extrait de code enregistre les données de salutation dans une table appelée **hvac**.</span><span class="sxs-lookup"><span data-stu-id="18904-138">This snippet registers hello data into a table called **hvac**.</span></span>

        # Create an RDD from sample data
        hvacText = sc.textFile("wasb:///HdiSamples/HdiSamples/SensorSampleData/hvac/HVAC.csv")

        # Create a schema for our data
        Entry = Row('Date', 'Time', 'TargetTemp', 'ActualTemp', 'BuildingID')

        # Parse hello data and create a schema
        hvacParts = hvacText.map(lambda s: s.split(',')).filter(lambda s: s[0] != 'Date')
        hvac = hvacParts.map(lambda p: Entry(str(p[0]), str(p[1]), int(p[2]), int(p[3]), int(p[6])))

        # Infer hello schema and create a table       
        hvacTable = sqlContext.createDataFrame(hvac)
        hvacTable.registerTempTable('hvactemptable')
        dfw = DataFrameWriter(hvacTable)
        dfw.saveAsTable('hvac')

7. <span data-ttu-id="18904-139">Vérifiez que la table hello a été créée avec succès.</span><span class="sxs-lookup"><span data-stu-id="18904-139">Verify that hello table was successfully created.</span></span> <span data-ttu-id="18904-140">Vous pouvez utiliser hello `%%sql` magique toorun ruche requêtes directement.</span><span class="sxs-lookup"><span data-stu-id="18904-140">You can use hello `%%sql` magic toorun Hive queries directly.</span></span> <span data-ttu-id="18904-141">Pour plus d’informations sur hello `%%sql` magique et autres magics disponibles avec le noyau de PySpark hello, consultez [noyaux disponibles sur les ordinateurs portables de Notebook avec clusters Spark HDInsight](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span><span class="sxs-lookup"><span data-stu-id="18904-141">For more information about hello `%%sql` magic, and other magics available with hello PySpark kernel, see [Kernels available on Jupyter notebooks with Spark HDInsight clusters](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span></span>

        %%sql
        SHOW TABLES

    <span data-ttu-id="18904-142">Vous verrez une sortie identique à celle ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="18904-142">You see an output like shown below:</span></span>

        +---------------+-------------+
        |tableName      |isTemporary  |
        +---------------+-------------+
        |hvactemptable  |true        |
        |hivesampletable|false        |
        |hvac           |false        |
        +---------------+-------------+

    <span data-ttu-id="18904-143">Hello uniquement les tables qui ont la valeur false sous hello **isTemporary** colonne sont des tables de ruche qui sont stockés dans le magasin de métadonnées hello et sont accessibles à partir des outils de BI hello.</span><span class="sxs-lookup"><span data-stu-id="18904-143">Only hello tables that have false under hello **isTemporary** column are hive tables that are stored in hello metastore and can be accessed from hello BI tools.</span></span> <span data-ttu-id="18904-144">Dans ce didacticiel, nous connecter toohello **hvac** table, nous avons créé.</span><span class="sxs-lookup"><span data-stu-id="18904-144">In this tutorial, we connect toohello **hvac** table we created.</span></span>

8. <span data-ttu-id="18904-145">Vérifiez que hello cette table contient les données de salutation destinée.</span><span class="sxs-lookup"><span data-stu-id="18904-145">Verify that hello table contains hello intended data.</span></span> <span data-ttu-id="18904-146">Dans une cellule vide dans le bloc-notes de hello, copiez hello extrait de code, puis appuyez sur **MAJ + ENTRÉE**.</span><span class="sxs-lookup"><span data-stu-id="18904-146">In an empty cell in hello notebook, copy hello following snippet and press **SHIFT + ENTER**.</span></span>

        %%sql
        SELECT * FROM hvac LIMIT 10

9. <span data-ttu-id="18904-147">Arrêt des ressources de hello hello bloc-notes toorelease.</span><span class="sxs-lookup"><span data-stu-id="18904-147">Shut down hello notebook toorelease hello resources.</span></span> <span data-ttu-id="18904-148">toodo donc de hello **fichier** cliquez sur le menu d’un ordinateur portable hello, **fermer et s’arrêter**.</span><span class="sxs-lookup"><span data-stu-id="18904-148">toodo so, from hello **File** menu on hello notebook, click **Close and Halt**.</span></span>

## <span data-ttu-id="18904-149"><a name="powerbi"></a>Utiliser Power BI pour la visualisation de données Spark</span><span class="sxs-lookup"><span data-stu-id="18904-149"><a name="powerbi"></a>Use Power BI for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="18904-150">Cette section s’applique uniquement à Spark 1.6 sur HDInsight 3.4 et Spark 2.0 sur HDInsight 3.5.</span><span class="sxs-lookup"><span data-stu-id="18904-150">This section is applicable only for Spark 1.6 on HDInsight 3.4 and Spark 2.0 on HDInsight 3.5.</span></span>
>
>

<span data-ttu-id="18904-151">Une fois que vous avez enregistré les données de salutation sous forme de table, vous pouvez utiliser les données de Power BI tooconnect toohello et visualiser les rapports de toocreate, tableaux de bord, etc..</span><span class="sxs-lookup"><span data-stu-id="18904-151">Once you have saved hello data as a table, you can use Power BI tooconnect toohello data and visualize it toocreate reports, dashboards, etc.</span></span>

1. <span data-ttu-id="18904-152">Assurez-vous que vous avez accès tooPower BI.</span><span class="sxs-lookup"><span data-stu-id="18904-152">Make sure you have access tooPower BI.</span></span> <span data-ttu-id="18904-153">Vous pouvez obtenir un abonnement gratuit à la version préliminaire de Power BI à l’adresse [http://www.powerbi.com/](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="18904-153">You can get a free preview subscription of Power BI from [http://www.powerbi.com/](http://www.powerbi.com/).</span></span>

2. <span data-ttu-id="18904-154">Connectez-vous trop[Power BI](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="18904-154">Sign in too[Power BI](http://www.powerbi.com/).</span></span>

3. <span data-ttu-id="18904-155">À partir du bas hello du volet gauche de hello, cliquez sur **obtenir des données**.</span><span class="sxs-lookup"><span data-stu-id="18904-155">From hello bottom of hello left pane, click **Get Data**.</span></span>

4. <span data-ttu-id="18904-156">Sur hello **obtenir des données** sous **importer ou se connecter tooData**, pour **bases de données**, cliquez sur **obtenir**.</span><span class="sxs-lookup"><span data-stu-id="18904-156">On hello **Get Data** page, under **Import or Connect tooData**, for **Databases**, click **Get**.</span></span>

    <span data-ttu-id="18904-157">![Obtenir des données dans Power BI pour Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Obtenir des données dans Power BI pour Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-157">![Get data into Power BI for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Get data into Power BI for Apache Spark BI")</span></span>

5. <span data-ttu-id="18904-158">Dans l’écran suivant de hello, cliquez sur **Spark sur Azure HDInsight** puis cliquez sur **connexion**.</span><span class="sxs-lookup"><span data-stu-id="18904-158">On hello next screen, click **Spark on Azure HDInsight** and then click **Connect**.</span></span> <span data-ttu-id="18904-159">Lorsque vous y êtes invité, entrez l’URL du cluster hello (`mysparkcluster.azurehdinsight.net`) et le cluster de toohello tooconnect hello informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="18904-159">When prompted, enter hello cluster URL (`mysparkcluster.azurehdinsight.net`) and hello credentials tooconnect toohello cluster.</span></span>

    <span data-ttu-id="18904-160">![Se connecter tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "connecter tooApache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-160">![Connect tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "Connect tooApache Spark BI")</span></span>

    <span data-ttu-id="18904-161">Une fois hello est établie, Power BI démarre l’importation de données à partir du cluster de Spark hello sur HDInsight.</span><span class="sxs-lookup"><span data-stu-id="18904-161">After hello connection is established, Power BI starts importing data from hello Spark cluster on HDInsight.</span></span>

6. <span data-ttu-id="18904-162">Power BI importe les données de hello et ajoute un **Spark** dataset sous hello **Datasets** titre.</span><span class="sxs-lookup"><span data-stu-id="18904-162">Power BI imports hello data and adds a **Spark** dataset under hello **Datasets** heading.</span></span> <span data-ttu-id="18904-163">Cliquez sur le jeu de données de hello tooopen les données de salutation une nouvelle feuille de calcul toovisualize.</span><span class="sxs-lookup"><span data-stu-id="18904-163">Click hello data set tooopen a new worksheet toovisualize hello data.</span></span> <span data-ttu-id="18904-164">Vous pouvez également enregistrer la feuille de calcul hello sous forme de rapport.</span><span class="sxs-lookup"><span data-stu-id="18904-164">You can also save hello worksheet as a report.</span></span> <span data-ttu-id="18904-165">toosave une feuille de calcul, à partir de hello **fichier** menu, cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="18904-165">toosave a worksheet, from hello **File** menu, click **Save**.</span></span>

    <span data-ttu-id="18904-166">![Vignette Apache Spark BI sur le tableau de bord Power BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Vignette Apache Spark BI sur le tableau de bord Power BI")</span><span class="sxs-lookup"><span data-stu-id="18904-166">![Apache Spark BI tile on Power BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Apache Spark BI tile on Power BI dashboard")</span></span>
7. <span data-ttu-id="18904-167">Notez que hello **champs** liste sur hello droite répertorie hello **hvac** table que vous avez créé précédemment.</span><span class="sxs-lookup"><span data-stu-id="18904-167">Notice that hello **Fields** list on hello right lists hello **hvac** table you created earlier.</span></span> <span data-ttu-id="18904-168">Développez les champs de hello hello table toosee dans la table de hello, définie précédemment dans le bloc-notes.</span><span class="sxs-lookup"><span data-stu-id="18904-168">Expand hello table toosee hello fields in hello table, as you defined in notebook earlier.</span></span>

      <span data-ttu-id="18904-169">![épertorier des tables sur le tableau de bord Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "épertorier des tables sur le tableau de bord Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-169">![List tables on Apache Spark BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "List tables on Apache Spark BI dashboard")</span></span>

8. <span data-ttu-id="18904-170">Générer une variation de hello visualisation tooshow entre la température de cible et de température réelle pour chaque génération.</span><span class="sxs-lookup"><span data-stu-id="18904-170">Build a visualization tooshow hello variance between target temperature and actual temperature for each building.</span></span> <span data-ttu-id="18904-171">toovisualize habituelle de données, sélectionnez **graphique en aires** (illustrée dans la zone rouge).</span><span class="sxs-lookup"><span data-stu-id="18904-171">toovisualize yoru data, select **Area Chart** (shown in red box).</span></span> <span data-ttu-id="18904-172">axe de hello toodefine, glisser-déposer hello **BuildingID** champ sous **axe**, et **ActualTemp**/**TargetTemp** les champs sous **valeur**.</span><span class="sxs-lookup"><span data-stu-id="18904-172">toodefine hello axis, drag-and-drop hello **BuildingID** field under **Axis**, and **ActualTemp**/**TargetTemp** fields under **Value**.</span></span>

    <span data-ttu-id="18904-173">![Créer des visualisations de données Spark à l’aide d’Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Créer des visualisations de données Spark à l’aide d’Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-173">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Create Spark data visualizations using Apache Spark BI")</span></span>

9. <span data-ttu-id="18904-174">Par défaut, visualisation de hello affiche sum hello pour **ActualTemp** et **TargetTemp**.</span><span class="sxs-lookup"><span data-stu-id="18904-174">By default hello visualization shows hello sum for **ActualTemp** and **TargetTemp**.</span></span> <span data-ttu-id="18904-175">Pour les deux hello champs hello liste déroulante, sélectionnez **moyenne** tooget moyenne réelle et températures cible pour les deux bâtiments.</span><span class="sxs-lookup"><span data-stu-id="18904-175">For both hello fields, from hello drop-down, select **Average** tooget an average of actual and target temperatures for both buildings.</span></span>

    <span data-ttu-id="18904-176">![Créer des visualisations de données Spark à l’aide d’Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Créer des visualisations de données Spark à l’aide d’Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-176">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Create Spark data visualizations using Apache Spark BI")</span></span>

10. <span data-ttu-id="18904-177">La visualisation de données doit être similaire toohello une capture d’écran hello.</span><span class="sxs-lookup"><span data-stu-id="18904-177">Your data visualization should be similar toohello one in hello screenshot.</span></span> <span data-ttu-id="18904-178">Déplacez votre curseur sur hello visualisation tooget info-bulles avec les données appropriées.</span><span class="sxs-lookup"><span data-stu-id="18904-178">Move your cursor over hello visualization tooget tool tips with relevant data.</span></span>

    <span data-ttu-id="18904-179">![Créer des visualisations de données Spark à l’aide d’Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Créer des visualisations de données Spark à l’aide d’Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-179">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Create Spark data visualizations using Apache Spark BI")</span></span>

11. <span data-ttu-id="18904-180">Cliquez sur **enregistrer** de hello premiers menu et fournissez un nom de rapport.</span><span class="sxs-lookup"><span data-stu-id="18904-180">Click **Save** from hello top menu and provide a report name.</span></span> <span data-ttu-id="18904-181">Vous pouvez également épingler hello visual.</span><span class="sxs-lookup"><span data-stu-id="18904-181">You can also pin hello visual.</span></span> <span data-ttu-id="18904-182">Quand vous épinglez une visualisation, celle-ci est stockée dans votre tableau de bord afin de pouvoir suivre la valeur la plus récente hello en un coup de œil.</span><span class="sxs-lookup"><span data-stu-id="18904-182">When you pin a visualization, it is stored on your dashboard so you can track hello latest value at a glance.</span></span>

   <span data-ttu-id="18904-183">Vous pouvez ajouter autant de visualisations que vous le souhaitez pour hello même jeu de données et les épingler toohello du tableau de bord pour un instantané de vos données.</span><span class="sxs-lookup"><span data-stu-id="18904-183">You can add as many visualizations as you want for hello same dataset and pin them toohello dashboard for a snapshot of your data.</span></span> <span data-ttu-id="18904-184">En outre, clusters Spark sur HDInsight sont connecté tooPower BI avec direct de se connecter.</span><span class="sxs-lookup"><span data-stu-id="18904-184">Also, Spark clusters on HDInsight are connected tooPower BI with direct connect.</span></span> <span data-ttu-id="18904-185">Cela garantit que Power BI toujours a hello la plupart des données à jour à partir de votre cluster vous n’avez pas besoin des actualisations tooschedule pour hello le jeu de données.</span><span class="sxs-lookup"><span data-stu-id="18904-185">This ensures that Power BI always has hello most up-to-date data from your cluster so you do not need tooschedule refreshes for hello dataset.</span></span>

## <span data-ttu-id="18904-186"><a name="tableau"></a>Utiliser Tableau Desktop pour la visualisation de données Spark</span><span class="sxs-lookup"><span data-stu-id="18904-186"><a name="tableau"></a>Use Tableau Desktop for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="18904-187">Cette section s’applique uniquement aux clusters Spark 1.5.2 créés dans Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="18904-187">This section is applicable only for Spark 1.5.2 clusters created in Azure HDInsight.</span></span>
>
>

1. <span data-ttu-id="18904-188">Installer [Tableau bureau](http://www.tableau.com/products/desktop) sur l’ordinateur qui exécute ce didacticiel d’Apache Spark BI hello.</span><span class="sxs-lookup"><span data-stu-id="18904-188">Install [Tableau Desktop](http://www.tableau.com/products/desktop) on hello computer where you are running this Apache Spark BI tutorial.</span></span>

2. <span data-ttu-id="18904-189">Vérifiez que l’ordinateur est également équipé du pilote ODBC de Microsoft Spark.</span><span class="sxs-lookup"><span data-stu-id="18904-189">Make sure that computer also has Microsoft Spark ODBC driver installed.</span></span> <span data-ttu-id="18904-190">Vous pouvez installer le pilote hello [ici](http://go.microsoft.com/fwlink/?LinkId=616229).</span><span class="sxs-lookup"><span data-stu-id="18904-190">You can install hello driver from [here](http://go.microsoft.com/fwlink/?LinkId=616229).</span></span>

1. <span data-ttu-id="18904-191">Lancez Tableau Desktop.</span><span class="sxs-lookup"><span data-stu-id="18904-191">Launch Tableau Desktop.</span></span> <span data-ttu-id="18904-192">Dans le volet gauche hello, à partir de la liste hello de tooconnect de serveur, cliquez sur **Spark SQL**.</span><span class="sxs-lookup"><span data-stu-id="18904-192">In hello left pane, from hello list of server tooconnect to, click **Spark SQL**.</span></span> <span data-ttu-id="18904-193">Si Spark SQL n’est pas répertoriée par défaut dans le volet gauche de hello, vous le trouverez par clic **plus de serveurs**.</span><span class="sxs-lookup"><span data-stu-id="18904-193">If Spark SQL is not listed by default in hello left pane, you can find it by click **More Servers**.</span></span>
2. <span data-ttu-id="18904-194">Dans la boîte de dialogue Connexion hello Spark SQL, fournir des valeurs de hello comme indiqué dans la capture d’écran de hello, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="18904-194">In hello Spark SQL connection dialog box, provide hello values as shown in hello screenshot, and then click **OK**.</span></span>

    <span data-ttu-id="18904-195">![Cluster tooa de se connecter pour Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "cluster tooa de se connecter pour Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-195">![Connect tooa cluster for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "Connect tooa cluster for Apache Spark BI")</span></span>

    <span data-ttu-id="18904-196">Hello des listes déroulantes de l’authentification **Service Microsoft Azure HDInsight** en option, si vous avez installé hello [Microsoft Spark ODBC Driver](http://go.microsoft.com/fwlink/?LinkId=616229) sur l’ordinateur de hello.</span><span class="sxs-lookup"><span data-stu-id="18904-196">hello authentication drop-down lists **Microsoft Azure HDInsight Service** as an option, only if you installed hello [Microsoft Spark ODBC Driver](http://go.microsoft.com/fwlink/?LinkId=616229) on hello computer.</span></span>
3. <span data-ttu-id="18904-197">Sur l’écran suivant de hello, à partir de hello **schéma** liste déroulante, cliquez sur hello **trouver** icône, puis cliquez sur **par défaut**.</span><span class="sxs-lookup"><span data-stu-id="18904-197">On hello next screen, from hello **Schema** drop-down, click hello **Find** icon, and then click **default**.</span></span>

    <span data-ttu-id="18904-198">![Rechercher un schéma pour Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Rechercher un schéma pour Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-198">![Find schema for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Find schema for Apache Spark BI")</span></span>
4. <span data-ttu-id="18904-199">Pourquoi **Table** , cliquez sur hello **trouver** icône Nouveau toolist tous hello Hive tables disponibles dans le cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="18904-199">For hello **Table** field, click hello **Find** icon again toolist all hello Hive tables available in hello cluster.</span></span> <span data-ttu-id="18904-200">Vous devez voir hello **hvac** table que vous avez créé précédemment à l’aide du bloc-notes de hello.</span><span class="sxs-lookup"><span data-stu-id="18904-200">You should see hello **hvac** table you created earlier using hello notebook.</span></span>

    <span data-ttu-id="18904-201">![Rechercher un tableau pour Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Rechercher un tableau pour Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-201">![Find table for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Find table for Apache Spark BI")</span></span>
5. <span data-ttu-id="18904-202">Glisser-déplacer la zone supérieure toohello table hello sur hello droite.</span><span class="sxs-lookup"><span data-stu-id="18904-202">Drag and drop hello table toohello top box on hello right.</span></span> <span data-ttu-id="18904-203">Tableau importe les données de hello et affiche le schéma de hello mise en évidence par zone de hello rouge.</span><span class="sxs-lookup"><span data-stu-id="18904-203">Tableau imports hello data and displays hello schema as highlighted by hello red box.</span></span>

    <span data-ttu-id="18904-204">![Ajouter des tables tooTableau Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "ajouter des tables tooTableau Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="18904-204">![Add tables tooTableau for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "Add tables tooTableau for Apache Spark BI")</span></span>
6. <span data-ttu-id="18904-205">Cliquez sur hello **Feuil1** onglet en bas à gauche hello.</span><span class="sxs-lookup"><span data-stu-id="18904-205">Click hello **Sheet1** tab at hello bottom left.</span></span> <span data-ttu-id="18904-206">Rendre une visualisation qui montre cible moyenne de hello et températures réelles pour tous les bâtiments pour chaque date.</span><span class="sxs-lookup"><span data-stu-id="18904-206">Make a visualization that shows hello average target and actual temperatures for all buildings for each date.</span></span> <span data-ttu-id="18904-207">Faites glisser **Date** et **ID de génération** trop**colonnes** et **Temp réel**/**cible Temp**trop**lignes**.</span><span class="sxs-lookup"><span data-stu-id="18904-207">Drag **Date** and **Building ID** too**Columns** and **Actual Temp**/**Target Temp** too**Rows**.</span></span> <span data-ttu-id="18904-208">Sous **marques**, sélectionnez **zone** toouse une carte pour la visualisation des données Spark.</span><span class="sxs-lookup"><span data-stu-id="18904-208">Under **Marks**, select **Area** toouse an area map for Spark data visualization.</span></span>

     <span data-ttu-id="18904-209">![Ajouter des champs pour une visualisation de données Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Ajouter des champs pour une visualisation de données Spark")</span><span class="sxs-lookup"><span data-stu-id="18904-209">![Add fields for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Add fields for Spark data visualization")</span></span>
7. <span data-ttu-id="18904-210">Par défaut, les champs de température hello sont affichés en tant qu’agrégat.</span><span class="sxs-lookup"><span data-stu-id="18904-210">By default, hello temperature fields are shown as aggregate.</span></span> <span data-ttu-id="18904-211">Si vous souhaitez températures moyennes de hello tooshow au lieu de cela, vous pouvez le faire à partir de déroulante hello, comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="18904-211">If you want tooshow hello average temperatures instead, you can do so from hello drop-down, as shown below.</span></span>

    <span data-ttu-id="18904-212">![Prendre une moyenne de températures pour une visualisation de données Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Prendre une moyenne de températures pour une visualisation de données Spark")</span><span class="sxs-lookup"><span data-stu-id="18904-212">![Take average of temperature for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Take average of temperature for Spark data visualization")</span></span>

8. <span data-ttu-id="18904-213">Vous pouvez également super-imposer un mappage de température plus hello autres tooget mieux comprendre de différence entre la cible et les températures réels.</span><span class="sxs-lookup"><span data-stu-id="18904-213">You can also super-impose one temperature map over hello other tooget a better feel of difference between target and actual temperatures.</span></span> <span data-ttu-id="18904-214">Déplacer le coin de toohello hello souris de carte hello inférieur jusqu'à ce que vous voyez hello forme du handle mis en surbrillance dans un cercle rouge.</span><span class="sxs-lookup"><span data-stu-id="18904-214">Move hello mouse toohello corner of hello lower area map till you see hello handle shape highlighted in a red circle.</span></span> <span data-ttu-id="18904-215">Faites glisser hello carte toohello autre classe map hello haut et version hello de la souris lorsque vous voyez forme hello mis en surbrillance dans le rectangle rouge.</span><span class="sxs-lookup"><span data-stu-id="18904-215">Drag hello map toohello other map on hello top and release hello mouse when you see hello shape highlighted in red rectangle.</span></span>

    <span data-ttu-id="18904-216">![Fusionner des cartes pour une visualisation de données Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Fusionner des cartes pour une visualisation de données Spark")</span><span class="sxs-lookup"><span data-stu-id="18904-216">![Merge maps for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Merge maps for Spark data visualization")</span></span>

     <span data-ttu-id="18904-217">La visualisation de données doit modifier comme indiqué dans la capture d’écran de hello :</span><span class="sxs-lookup"><span data-stu-id="18904-217">Your data visualization should change as shown in hello screenshot:</span></span>

    <span data-ttu-id="18904-218">![Sortie de tableau pour une visualisation de données Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Sortie de tableau pour une visualisation de données Spark")</span><span class="sxs-lookup"><span data-stu-id="18904-218">![Tableau output for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Tableau output for Spark data visualization")</span></span>
9. <span data-ttu-id="18904-219">Cliquez sur **enregistrer** feuille de calcul toosave hello.</span><span class="sxs-lookup"><span data-stu-id="18904-219">Click **Save** toosave hello worksheet.</span></span> <span data-ttu-id="18904-220">Vous pouvez créer des tableaux de bord et ajouter un ou plusieurs tooit de feuilles.</span><span class="sxs-lookup"><span data-stu-id="18904-220">You can create dashboards and add one or more sheets tooit.</span></span>

## <a name="next-steps"></a><span data-ttu-id="18904-221">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="18904-221">Next steps</span></span>

<span data-ttu-id="18904-222">Jusqu'à présent, vous avez appris comment toocreate un cluster, créer Spark frames tooquery de données et puis accéder à ces données à partir d’outils BI.</span><span class="sxs-lookup"><span data-stu-id="18904-222">So far you learned how toocreate a cluster, create Spark data frames tooquery data, and then access that data from BI tools.</span></span> <span data-ttu-id="18904-223">Vous pouvez maintenant consulter plus d’informations sur comment toomanage hello des ressources de cluster et déboguer des tâches qui s’exécutent dans un cluster HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="18904-223">You can now look at instructions on how toomanage hello cluster resources and debug jobs that are running in an HDInsight Spark cluster.</span></span>

* [<span data-ttu-id="18904-224">Gérer les ressources de cluster d’Apache Spark hello dans Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="18904-224">Manage resources for hello Apache Spark cluster in Azure HDInsight</span></span>](hdinsight-apache-spark-resource-manager.md)
* [<span data-ttu-id="18904-225">Track and debug jobs running on an Apache Spark cluster in HDInsight (Suivi et débogage des tâches en cours d’exécution sur un cluster Apache Spark dans HDInsight)</span><span class="sxs-lookup"><span data-stu-id="18904-225">Track and debug jobs running on an Apache Spark cluster in HDInsight</span></span>](hdinsight-apache-spark-job-debugging.md)

