---
title: aaaAccess application des fils de Hadoop enregistre par programmation - Azure | Documents Microsoft
description: "Accéder aux journaux des applications par programmation sur un cluster Hadoop dans HDInsight."
services: hdinsight
documentationcenter: 
tags: azure-portal
author: mumian
manager: jhubbard
editor: cgronlun
ms.assetid: 0198d6c9-7767-4682-bd34-42838cf48fc5
ms.service: hdinsight
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/25/2017
ms.author: jgao
ROBOTS: NOINDEX
ms.openlocfilehash: 064efee1ea6a864c29ab897692ead0152c926c0b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="access-yarn-application-logs-on-windows-based-hdinsight"></a><span data-ttu-id="356c5-103">Accéder aux journaux des applications YARN dans HDInsight sous Windows</span><span class="sxs-lookup"><span data-stu-id="356c5-103">Access YARN application logs on Windows-based HDInsight</span></span>
<span data-ttu-id="356c5-104">Cette rubrique explique comment tooaccess hello journaux pour les applications de fils (encore une autre ressource négociateur) qui ont terminé sur un cluster Hadoop basé sur Windows dans Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="356c5-104">This topic explains how tooaccess hello logs for YARN (Yet Another Resource Negotiator) applications that have finished on a Windows-based Hadoop cluster in Azure HDInsight</span></span>

> [!IMPORTANT]
> <span data-ttu-id="356c5-105">les informations de Hello dans ce document s’appliquent en fonction de tooWindows uniquement des clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="356c5-105">hello information in this document applies only tooWindows-based HDInsight clusters.</span></span> <span data-ttu-id="356c5-106">Linux est hello seul système d’exploitation utilisé sur HDInsight version 3.4 ou supérieure.</span><span class="sxs-lookup"><span data-stu-id="356c5-106">Linux is hello only operating system used on HDInsight version 3.4 or greater.</span></span> <span data-ttu-id="356c5-107">Pour plus d’informations, consultez [Suppression de HDInsight sous Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span><span class="sxs-lookup"><span data-stu-id="356c5-107">For more information, see [HDInsight retirement on Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span></span> <span data-ttu-id="356c5-108">Pour plus d'informations sur l'accès aux journaux YARN sur les clusters HDInsight sous Linux, consultez [Accès aux journaux d'application YARN basés sur Hadoop Linux sous HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span><span class="sxs-lookup"><span data-stu-id="356c5-108">For information on accessing YARN logs on Linux-based HDInsight clusters, see [Access YARN application logs on Linux-based Hadoop on HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span></span>
>


### <a name="prerequisites"></a><span data-ttu-id="356c5-109">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="356c5-109">Prerequisites</span></span>
* <span data-ttu-id="356c5-110">Un cluster HDInsight Windows</span><span class="sxs-lookup"><span data-stu-id="356c5-110">A Windows-based HDInsight cluster.</span></span>  <span data-ttu-id="356c5-111">Voir [Création de clusters Hadoop basés sur Windows dans HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="356c5-111">See [Create Windows-based Hadoop clusters in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span></span>

## <a name="yarn-timeline-server"></a><span data-ttu-id="356c5-112">YARN Timeline Server</span><span class="sxs-lookup"><span data-stu-id="356c5-112">YARN Timeline Server</span></span>
<span data-ttu-id="356c5-113">Hello <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">fils chronologie Server</a> fournit des informations génériques sur les applications terminées informations ainsi que spécifiques à l’infrastructure de l’application via deux interfaces différentes.</span><span class="sxs-lookup"><span data-stu-id="356c5-113">hello <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> provides generic information on completed applications as well as framework-specific application information through two different interfaces.</span></span> <span data-ttu-id="356c5-114">Plus précisément :</span><span class="sxs-lookup"><span data-stu-id="356c5-114">Specifically:</span></span>

* <span data-ttu-id="356c5-115">Le stockage et la récupération d’informations génériques sur les applications sur les clusters HDInsight sont activés dans les versions 3.1.1.374 ou ultérieures.</span><span class="sxs-lookup"><span data-stu-id="356c5-115">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span></span>
* <span data-ttu-id="356c5-116">élément d’informations spécifiques à l’infrastructure application Hello Hello chronologie serveur n’est pas disponible actuellement sur les clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="356c5-116">hello framework-specific application information component of hello Timeline Server is not currently available on HDInsight clusters.</span></span>

<span data-ttu-id="356c5-117">Informations générales sur les applications incluent hello suivant trie des données :</span><span class="sxs-lookup"><span data-stu-id="356c5-117">Generic information on applications includes hello following sorts of data:</span></span>

* <span data-ttu-id="356c5-118">ID d’application Hello, un identificateur unique d’une application</span><span class="sxs-lookup"><span data-stu-id="356c5-118">hello application ID, a unique identifier of an application</span></span>
* <span data-ttu-id="356c5-119">utilisateur Hello qui a démarré l’application hello</span><span class="sxs-lookup"><span data-stu-id="356c5-119">hello user who started hello application</span></span>
* <span data-ttu-id="356c5-120">Pour plus d’informations sur les tentatives effectuées application hello de toocomplete</span><span class="sxs-lookup"><span data-stu-id="356c5-120">Information on attempts made toocomplete hello application</span></span>
* <span data-ttu-id="356c5-121">conteneurs Hello utilisées par toute tentative d’application donnée</span><span class="sxs-lookup"><span data-stu-id="356c5-121">hello containers used by any given application attempt</span></span>

<span data-ttu-id="356c5-122">Sur vos clusters HDInsight, ces informations sont stockées par le magasin de l’historique tooa Azure Resource Manager dans un conteneur par défaut hello de votre compte de stockage Azure par défaut.</span><span class="sxs-lookup"><span data-stu-id="356c5-122">On your HDInsight clusters, this information will be stored by Azure Resource Manager tooa history store in hello default container of your default Azure Storage account.</span></span> <span data-ttu-id="356c5-123">Vous pouvez récupérer ces données génériques sur les applications terminées via une API REST :</span><span class="sxs-lookup"><span data-stu-id="356c5-123">This generic data on completed applications can be retrieved through a REST API:</span></span>

    GET on https://<cluster-dns-name>.azurehdinsight.net/ws/v1/applicationhistory/apps


## <a name="yarn-applications-and-logs"></a><span data-ttu-id="356c5-124">Applications et journaux YARN</span><span class="sxs-lookup"><span data-stu-id="356c5-124">YARN applications and logs</span></span>
<span data-ttu-id="356c5-125">YARN (Yet Another Resource Negotiator) prend en charge plusieurs modèles de programmation (dont MapReduce) en séparant la gestion des ressources de la planification et de l’analyse des applications.</span><span class="sxs-lookup"><span data-stu-id="356c5-125">YARN supports multiple programming models (MapReduce being one of them) by decoupling resource management from application scheduling/monitoring.</span></span> <span data-ttu-id="356c5-126">YARN se compose d’un gestionnaire de ressources (RM, *Resource Manager*) global, de gestionnaires de nœuds (NM, *Node Manager*) pour chaque nœud de travail, ainsi que de maîtres d’application (AM, *Application Master*) pour chaque application.</span><span class="sxs-lookup"><span data-stu-id="356c5-126">This is done through a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span></span> <span data-ttu-id="356c5-127">Hello par application AM négocie ressources (processeur, mémoire, disque, réseau) pour l’exécution de votre application avec le Gestionnaire de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="356c5-127">hello per-application AM negotiates resources (CPU, memory, disk, network) for running your application with hello RM.</span></span> <span data-ttu-id="356c5-128">Hello RM fonctionne avec NMs toogrant ces ressources, qui sont accordées en tant que *conteneurs*.</span><span class="sxs-lookup"><span data-stu-id="356c5-128">hello RM works with NMs toogrant these resources, which are granted as *containers*.</span></span> <span data-ttu-id="356c5-129">Hello AM est responsable du suivi des progrès hello de hello conteneurs assignés tooit par le Gestionnaire de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="356c5-129">hello AM is responsible for tracking hello progress of hello containers assigned tooit by hello RM.</span></span> <span data-ttu-id="356c5-130">Une application peut nécessiter de nombreux conteneurs selon la nature hello de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="356c5-130">An application may require many containers depending on hello nature of hello application.</span></span>

<span data-ttu-id="356c5-131">En outre, chaque application peut se composer de plusieurs *tentatives application* dans l’ordre des toofinish en présence de hello de pannes ou en raison de la perte de toohello de communication entre un AM et un gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="356c5-131">Furthermore, each application may consist of multiple *application attempts* in order toofinish in hello presence of crashes or due toohello loss of communication between an AM and an RM.</span></span> <span data-ttu-id="356c5-132">Par conséquent, les conteneurs sont accordées tooa de tentative spécifique d’une application.</span><span class="sxs-lookup"><span data-stu-id="356c5-132">Hence, containers are granted tooa specific attempt of an application.</span></span> <span data-ttu-id="356c5-133">Dans un sens, un conteneur fournit le contexte de hello pour l’unité de base du travail effectué par une application fils et tout le travail est effectué dans le contexte de hello d’un conteneur est effectué sur le nœud de travail unique hello sur quel hello conteneur a été alloué.</span><span class="sxs-lookup"><span data-stu-id="356c5-133">In a sense, a container provides hello context for basic unit of work performed by a YARN application, and all work that is done within hello context of a container is performed on hello single worker node on which hello container was allocated.</span></span> <span data-ttu-id="356c5-134">Pour plus d’informations, consultez la rubrique [Concepts relatifs à YARN][YARN-concepts].</span><span class="sxs-lookup"><span data-stu-id="356c5-134">See [YARN Concepts][YARN-concepts] for further reference.</span></span>

<span data-ttu-id="356c5-135">Journaux de l’application (et journaux du conteneur hello associé) sont critiques dans le débogage des applications Hadoop problématiques.</span><span class="sxs-lookup"><span data-stu-id="356c5-135">Application logs (and hello associated container logs) are critical in debugging problematic Hadoop applications.</span></span> <span data-ttu-id="356c5-136">FILS fournit une infrastructure intéressante pour la collecte, l’agrégation et le stockage des journaux d’application hello [journal agrégation] [ log-aggregation] fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="356c5-136">YARN provides a nice framework for collecting, aggregating, and storing application logs with hello [Log Aggregation][log-aggregation] feature.</span></span> <span data-ttu-id="356c5-137">fonction d’agrégation de journal Hello rend l’accès aux journaux d’application plus déterministe, il regroupe les journaux sur tous les conteneurs sur un nœud de travail et les stocke sous la forme d’un fichier journal agrégées par nœud de travail sur le système de fichiers par défaut hello à l’issue de l’exécution d’une application.</span><span class="sxs-lookup"><span data-stu-id="356c5-137">hello Log Aggregation feature makes accessing application logs more deterministic, as it aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node on hello default file system after an application finishes.</span></span> <span data-ttu-id="356c5-138">Votre application peut utiliser des centaines, voire des milliers de conteneurs, mais les journaux pour tous les conteneurs s’exécutent sur un nœud de travail unique sera toujours tooa agrégée fichier unique, qui en résulte dans un fichier journal par nœud de travail utilisé par votre application.</span><span class="sxs-lookup"><span data-stu-id="356c5-138">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node will always be aggregated tooa single file, resulting in one log file per worker node used by your application.</span></span> <span data-ttu-id="356c5-139">Agrégation de journal est activée par défaut sur les clusters HDInsight (version 3.0 et versions ultérieures), et agrégées journaux se trouvent dans un conteneur par défaut hello de votre cluster à hello l’emplacement suivant :</span><span class="sxs-lookup"><span data-stu-id="356c5-139">Log Aggregation is enabled by default on HDInsight clusters (version 3.0 and above), and aggregated logs can be found in hello default container of your cluster at hello following location:</span></span>

    wasb:///app-logs/<user>/logs/<applicationId>

<span data-ttu-id="356c5-140">Dans cet emplacement, *utilisateur* hello nom de hello utilisateur qui a démarré l’application hello, et *applicationId* est l’identificateur unique de hello d’une application assigné par le Gestionnaire de ressources hello fils.</span><span class="sxs-lookup"><span data-stu-id="356c5-140">In that location, *user* is hello name of hello user who started hello application, and *applicationId* is hello unique identifier of an application as assigned by hello YARN RM.</span></span>

<span data-ttu-id="356c5-141">Hello agrégées journaux ne sont pas directement accessible en lecture, qu’ils sont écrits un [TFile][T-file], [format binaire] [ binary-format] indexé par le conteneur.</span><span class="sxs-lookup"><span data-stu-id="356c5-141">hello aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span></span> <span data-ttu-id="356c5-142">FILS fournit CLI outils toodump ces journaux au format texte brut pour des applications ou des conteneurs d’intérêt.</span><span class="sxs-lookup"><span data-stu-id="356c5-142">YARN provides CLI tools toodump these logs as plain text for applications or containers of interest.</span></span> <span data-ttu-id="356c5-143">Vous pouvez afficher ces journaux sous forme de texte brut en exécutant un de hello suivant les commandes de fils directement sur les nœuds de cluster hello (après connexion tooit via RDP) :</span><span class="sxs-lookup"><span data-stu-id="356c5-143">You can view these logs as plain text by running one of hello following YARN commands directly on hello cluster nodes (after connecting tooit through RDP):</span></span>

    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application>
    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application> -containerId <containerId> -nodeAddress <worker-node-address>


## <a name="yarn-resourcemanager-ui"></a><span data-ttu-id="356c5-144">Interface utilisateur de ResourceManager YARN</span><span class="sxs-lookup"><span data-stu-id="356c5-144">YARN ResourceManager UI</span></span>
<span data-ttu-id="356c5-145">Bonjour fils ResourceManager UI s’exécute sur le nœud principal du cluster hello et sont accessibles via hello tableau de bord de portail Azure :</span><span class="sxs-lookup"><span data-stu-id="356c5-145">hello YARN ResourceManager UI runs on hello cluster headnode, and can be accessed through hello Azure portal dashboard:</span></span>

1. <span data-ttu-id="356c5-146">Connectez-vous trop[portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="356c5-146">Sign in too[Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="356c5-147">Dans le menu de gauche hello, cliquez sur **Parcourir**, cliquez sur **Clusters HDInsight**, cliquez sur un cluster Windows que vous souhaitez tooaccess hello fils journaux d’application.</span><span class="sxs-lookup"><span data-stu-id="356c5-147">On hello left menu, click **Browse**, click **HDInsight Clusters**, click a Windows-based cluster that you want tooaccess hello YARN application logs.</span></span>
3. <span data-ttu-id="356c5-148">Dans le menu supérieur de hello, cliquez sur **tableau de bord**.</span><span class="sxs-lookup"><span data-stu-id="356c5-148">On hello top menu, click **Dashboard**.</span></span> <span data-ttu-id="356c5-149">Une page appelée **Console de requête HDInsight**s’ouvre dans un nouvel onglet.</span><span class="sxs-lookup"><span data-stu-id="356c5-149">You will see a page opened on a new browser tab called **HDInsight Query Console**.</span></span>
4. <span data-ttu-id="356c5-150">À partir de la **Console de requête HDInsight**, cliquez sur l’**interface utilisateur YARN**.</span><span class="sxs-lookup"><span data-stu-id="356c5-150">From **HDInsight Query Console**, click **Yarn UI**.</span></span>

[YARN-timeline-server]:http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html
[log-aggregation]:http://hortonworks.com/blog/simplifying-user-logs-management-and-access-in-yarn/
[T-file]:https://issues.apache.org/jira/secure/attachment/12396286/TFile%20Specification%2020081217.pdf
[binary-format]:https://issues.apache.org/jira/browse/HADOOP-3315
[YARN-concepts]:http://hortonworks.com/blog/apache-hadoop-yarn-concepts-and-applications/
