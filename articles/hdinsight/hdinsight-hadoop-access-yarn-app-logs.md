---
title: "Accéder aux journaux des applications Hadoop YARN par programme - Azure | Microsoft Docs"
description: "Accéder aux journaux des applications par programmation sur un cluster Hadoop dans HDInsight."
services: hdinsight
documentationcenter: 
tags: azure-portal
author: mumian
manager: jhubbard
editor: cgronlun
ms.assetid: 0198d6c9-7767-4682-bd34-42838cf48fc5
ms.service: hdinsight
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/25/2017
ms.author: jgao
ROBOTS: NOINDEX
ms.openlocfilehash: 90323af4a1f4526ab9b26811c8679337076112d1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="access-yarn-application-logs-on-windows-based-hdinsight"></a><span data-ttu-id="d0f57-103">Accéder aux journaux des applications YARN dans HDInsight sous Windows</span><span class="sxs-lookup"><span data-stu-id="d0f57-103">Access YARN application logs on Windows-based HDInsight</span></span>
<span data-ttu-id="d0f57-104">Cette rubrique explique comment accéder aux journaux des applications YARN (Yet Another Resource Negotiator) ayant terminé leur exécution sur un cluster Hadoop basé sur Windows dans Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="d0f57-104">This topic explains how to access the logs for YARN (Yet Another Resource Negotiator) applications that have finished on a Windows-based Hadoop cluster in Azure HDInsight</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d0f57-105">Les informations présentes dans ce document sont spécifiques aux clusters HDInsight sous Windows.</span><span class="sxs-lookup"><span data-stu-id="d0f57-105">The information in this document applies only to Windows-based HDInsight clusters.</span></span> <span data-ttu-id="d0f57-106">Linux est le seul système d’exploitation utilisé sur HDInsight version 3.4 ou supérieure.</span><span class="sxs-lookup"><span data-stu-id="d0f57-106">Linux is the only operating system used on HDInsight version 3.4 or greater.</span></span> <span data-ttu-id="d0f57-107">Pour plus d’informations, consultez [Suppression de HDInsight sous Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span><span class="sxs-lookup"><span data-stu-id="d0f57-107">For more information, see [HDInsight retirement on Windows](hdinsight-component-versioning.md#hdinsight-windows-retirement).</span></span> <span data-ttu-id="d0f57-108">Pour plus d'informations sur l'accès aux journaux YARN sur les clusters HDInsight sous Linux, consultez [Accès aux journaux d'application YARN basés sur Hadoop Linux sous HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span><span class="sxs-lookup"><span data-stu-id="d0f57-108">For information on accessing YARN logs on Linux-based HDInsight clusters, see [Access YARN application logs on Linux-based Hadoop on HDInsight](hdinsight-hadoop-access-yarn-app-logs-linux.md)</span></span>
>


### <a name="prerequisites"></a><span data-ttu-id="d0f57-109">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="d0f57-109">Prerequisites</span></span>
* <span data-ttu-id="d0f57-110">Un cluster HDInsight Windows</span><span class="sxs-lookup"><span data-stu-id="d0f57-110">A Windows-based HDInsight cluster.</span></span>  <span data-ttu-id="d0f57-111">Voir [Création de clusters Hadoop basés sur Windows dans HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="d0f57-111">See [Create Windows-based Hadoop clusters in HDInsight](hdinsight-hadoop-provision-linux-clusters.md).</span></span>

## <a name="yarn-timeline-server"></a><span data-ttu-id="d0f57-112">YARN Timeline Server</span><span class="sxs-lookup"><span data-stu-id="d0f57-112">YARN Timeline Server</span></span>
<span data-ttu-id="d0f57-113">Le serveur <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> fournit des informations génériques sur les applications terminées, ainsi que des informations sur les applications spécifiques à l’infrastructure, via deux interfaces différentes.</span><span class="sxs-lookup"><span data-stu-id="d0f57-113">The <a href="http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html" target="_blank">YARN Timeline Server</a> provides generic information on completed applications as well as framework-specific application information through two different interfaces.</span></span> <span data-ttu-id="d0f57-114">Plus précisément :</span><span class="sxs-lookup"><span data-stu-id="d0f57-114">Specifically:</span></span>

* <span data-ttu-id="d0f57-115">Le stockage et la récupération d’informations génériques sur les applications sur les clusters HDInsight sont activés dans les versions 3.1.1.374 ou ultérieures.</span><span class="sxs-lookup"><span data-stu-id="d0f57-115">Storage and retrieval of generic application information on HDInsight clusters has been enabled with version 3.1.1.374 or higher.</span></span>
* <span data-ttu-id="d0f57-116">Le composant fournissant des informations sur les applications spécifiques à l'infrastructure n'est pas actuellement disponible sur les clusters HDInsight.</span><span class="sxs-lookup"><span data-stu-id="d0f57-116">The framework-specific application information component of the Timeline Server is not currently available on HDInsight clusters.</span></span>

<span data-ttu-id="d0f57-117">Les informations génériques sur les applications comprennent les données suivantes :</span><span class="sxs-lookup"><span data-stu-id="d0f57-117">Generic information on applications includes the following sorts of data:</span></span>

* <span data-ttu-id="d0f57-118">ID d’application, identificateur unique d’une application</span><span class="sxs-lookup"><span data-stu-id="d0f57-118">The application ID, a unique identifier of an application</span></span>
* <span data-ttu-id="d0f57-119">Utilisateur ayant démarré l’application</span><span class="sxs-lookup"><span data-stu-id="d0f57-119">The user who started the application</span></span>
* <span data-ttu-id="d0f57-120">Informations sur les tentatives effectuées afin de terminer l’application</span><span class="sxs-lookup"><span data-stu-id="d0f57-120">Information on attempts made to complete the application</span></span>
* <span data-ttu-id="d0f57-121">Conteneurs utilisés par toute tentative d’application donnée</span><span class="sxs-lookup"><span data-stu-id="d0f57-121">The containers used by any given application attempt</span></span>

<span data-ttu-id="d0f57-122">Sur les clusters HDInsight, ces informations sont stockées par Azure Resource Manager dans un magasin d’historique dans le conteneur par défaut de votre compte de stockage Azure par défaut.</span><span class="sxs-lookup"><span data-stu-id="d0f57-122">On your HDInsight clusters, this information will be stored by Azure Resource Manager to a history store in the default container of your default Azure Storage account.</span></span> <span data-ttu-id="d0f57-123">Vous pouvez récupérer ces données génériques sur les applications terminées via une API REST :</span><span class="sxs-lookup"><span data-stu-id="d0f57-123">This generic data on completed applications can be retrieved through a REST API:</span></span>

    GET on https://<cluster-dns-name>.azurehdinsight.net/ws/v1/applicationhistory/apps


## <a name="yarn-applications-and-logs"></a><span data-ttu-id="d0f57-124">Applications et journaux YARN</span><span class="sxs-lookup"><span data-stu-id="d0f57-124">YARN applications and logs</span></span>
<span data-ttu-id="d0f57-125">YARN (Yet Another Resource Negotiator) prend en charge plusieurs modèles de programmation (dont MapReduce) en séparant la gestion des ressources de la planification et de l’analyse des applications.</span><span class="sxs-lookup"><span data-stu-id="d0f57-125">YARN supports multiple programming models (MapReduce being one of them) by decoupling resource management from application scheduling/monitoring.</span></span> <span data-ttu-id="d0f57-126">YARN se compose d’un gestionnaire de ressources (RM, *Resource Manager*) global, de gestionnaires de nœuds (NM, *Node Manager*) pour chaque nœud de travail, ainsi que de maîtres d’application (AM, *Application Master*) pour chaque application.</span><span class="sxs-lookup"><span data-stu-id="d0f57-126">This is done through a global *ResourceManager* (RM), per-worker-node *NodeManagers* (NMs), and per-application *ApplicationMasters* (AMs).</span></span> <span data-ttu-id="d0f57-127">Le maître d'application, propre à chaque application, négocie les ressources nécessaires (processeur, mémoire, disque, réseau) pour exécuter l'application avec le gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="d0f57-127">The per-application AM negotiates resources (CPU, memory, disk, network) for running your application with the RM.</span></span> <span data-ttu-id="d0f57-128">Le gestionnaire de ressources fonctionne avec les gestionnaires de nœuds pour octroyer ces ressources sous forme de *conteneurs*.</span><span class="sxs-lookup"><span data-stu-id="d0f57-128">The RM works with NMs to grant these resources, which are granted as *containers*.</span></span> <span data-ttu-id="d0f57-129">Le maître d'application est chargé de suivre la progression des conteneurs qui lui sont assignés par le gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="d0f57-129">The AM is responsible for tracking the progress of the containers assigned to it by the RM.</span></span> <span data-ttu-id="d0f57-130">Selon la nature de l'application, celle-ci peut nécessiter de nombreux conteneurs.</span><span class="sxs-lookup"><span data-stu-id="d0f57-130">An application may require many containers depending on the nature of the application.</span></span>

<span data-ttu-id="d0f57-131">Par ailleurs, chaque application peut se composer de plusieurs *tentatives d’application* pour se terminer en cas de panne ou de perte de communication entre un maître d’application et un gestionnaire de ressources.</span><span class="sxs-lookup"><span data-stu-id="d0f57-131">Furthermore, each application may consist of multiple *application attempts* in order to finish in the presence of crashes or due to the loss of communication between an AM and an RM.</span></span> <span data-ttu-id="d0f57-132">Par conséquent, les conteneurs sont accordés à une tentative spécifique d'une application.</span><span class="sxs-lookup"><span data-stu-id="d0f57-132">Hence, containers are granted to a specific attempt of an application.</span></span> <span data-ttu-id="d0f57-133">D’une certaine façon, un conteneur fournit le contexte pour l’unité de base du travail effectué par une application YARN, et tout le travail réalisé dans le contexte d’un conteneur est effectué sur le nœud de travail unique sur lequel le conteneur a été alloué.</span><span class="sxs-lookup"><span data-stu-id="d0f57-133">In a sense, a container provides the context for basic unit of work performed by a YARN application, and all work that is done within the context of a container is performed on the single worker node on which the container was allocated.</span></span> <span data-ttu-id="d0f57-134">Pour plus d’informations, consultez la rubrique [Concepts relatifs à YARN][YARN-concepts].</span><span class="sxs-lookup"><span data-stu-id="d0f57-134">See [YARN Concepts][YARN-concepts] for further reference.</span></span>

<span data-ttu-id="d0f57-135">Les journaux des applications (et les journaux des conteneurs associés) sont essentiels pour déboguer des applications Hadoop problématiques.</span><span class="sxs-lookup"><span data-stu-id="d0f57-135">Application logs (and the associated container logs) are critical in debugging problematic Hadoop applications.</span></span> <span data-ttu-id="d0f57-136">La fonctionnalité [Agrégation de journaux][log-aggregation] de YARN fournit une infrastructure adaptée à la collecte, à l’agrégation et au stockage des journaux des applications.</span><span class="sxs-lookup"><span data-stu-id="d0f57-136">YARN provides a nice framework for collecting, aggregating, and storing application logs with the [Log Aggregation][log-aggregation] feature.</span></span> <span data-ttu-id="d0f57-137">La fonctionnalité d’agrégation de journaux rend l’accès aux journaux des applications plus déterministe, car elle regroupe les journaux de tous les conteneurs sur un nœud de travail et les stocke dans un même fichier journal agrégé par nœud de travail sur le système de fichiers lorsqu’une application se termine.</span><span class="sxs-lookup"><span data-stu-id="d0f57-137">The Log Aggregation feature makes accessing application logs more deterministic, as it aggregates logs across all containers on a worker node and stores them as one aggregated log file per worker node on the default file system after an application finishes.</span></span> <span data-ttu-id="d0f57-138">Votre application peut utiliser des centaines voire des milliers de conteneurs, mais les journaux de tous les conteneurs exécutés sur un nœud de travail unique sont toujours regroupés dans un fichier unique, ce qui se traduit par l'existence d'un fichier journal par nœud de travail utilisé par votre application.</span><span class="sxs-lookup"><span data-stu-id="d0f57-138">Your application may use hundreds or thousands of containers, but logs for all containers run on a single worker node will always be aggregated to a single file, resulting in one log file per worker node used by your application.</span></span> <span data-ttu-id="d0f57-139">L’agrégation de journaux est activée par défaut sur les clusters HDInsight (versions 3.0 et ultérieures) et les journaux agrégés figurent dans le conteneur par défaut de votre cluster à l’emplacement suivant :</span><span class="sxs-lookup"><span data-stu-id="d0f57-139">Log Aggregation is enabled by default on HDInsight clusters (version 3.0 and above), and aggregated logs can be found in the default container of your cluster at the following location:</span></span>

    wasb:///app-logs/<user>/logs/<applicationId>

<span data-ttu-id="d0f57-140">où *user* est le nom de l’utilisateur ayant démarré l’application et *applicationId*, l’identificateur unique d’une application telle qu’elle a été assignée par le gestionnaire de ressources YARN.</span><span class="sxs-lookup"><span data-stu-id="d0f57-140">In that location, *user* is the name of the user who started the application, and *applicationId* is the unique identifier of an application as assigned by the YARN RM.</span></span>

<span data-ttu-id="d0f57-141">Les journaux agrégés ne sont pas lisibles directement, car ils sont écrits dans un [TFile][T-file], un [format binaire][binary-format] indexé par conteneur.</span><span class="sxs-lookup"><span data-stu-id="d0f57-141">The aggregated logs are not directly readable, as they are written in a [TFile][T-file], [binary format][binary-format] indexed by container.</span></span> <span data-ttu-id="d0f57-142">YARN fournit des outils CLI pour vider ces journaux au format texte brut pour les applications ou les conteneurs qui présentent un intérêt.</span><span class="sxs-lookup"><span data-stu-id="d0f57-142">YARN provides CLI tools to dump these logs as plain text for applications or containers of interest.</span></span> <span data-ttu-id="d0f57-143">Vous pouvez afficher ces journaux au format texte brut en exécutant l'une des commandes YARN suivantes directement sur les nœuds de cluster (après avoir établi une connexion via RDP) :</span><span class="sxs-lookup"><span data-stu-id="d0f57-143">You can view these logs as plain text by running one of the following YARN commands directly on the cluster nodes (after connecting to it through RDP):</span></span>

    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application>
    yarn logs -applicationId <applicationId> -appOwner <user-who-started-the-application> -containerId <containerId> -nodeAddress <worker-node-address>


## <a name="yarn-resourcemanager-ui"></a><span data-ttu-id="d0f57-144">Interface utilisateur de ResourceManager YARN</span><span class="sxs-lookup"><span data-stu-id="d0f57-144">YARN ResourceManager UI</span></span>
<span data-ttu-id="d0f57-145">L’IU ResourceManager de YARN s’exécute sur le nœud principal du cluster et est accessible via le tableau de bord du portail Azure :</span><span class="sxs-lookup"><span data-stu-id="d0f57-145">The YARN ResourceManager UI runs on the cluster headnode, and can be accessed through the Azure portal dashboard:</span></span>

1. <span data-ttu-id="d0f57-146">Connectez-vous au [portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="d0f57-146">Sign in to [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="d0f57-147">Dans le menu de gauche, cliquez sur **Parcourir**, puis sur **Clusters HDInsight**. Cliquez ensuite sur le cluster Windows sur lequel vous souhaitez accéder aux journaux d’application YARN.</span><span class="sxs-lookup"><span data-stu-id="d0f57-147">On the left menu, click **Browse**, click **HDInsight Clusters**, click a Windows-based cluster that you want to access the YARN application logs.</span></span>
3. <span data-ttu-id="d0f57-148">Cliquez sur **Tableau de bord**dans le menu du haut.</span><span class="sxs-lookup"><span data-stu-id="d0f57-148">On the top menu, click **Dashboard**.</span></span> <span data-ttu-id="d0f57-149">Une page appelée **Console de requête HDInsight**s’ouvre dans un nouvel onglet.</span><span class="sxs-lookup"><span data-stu-id="d0f57-149">You will see a page opened on a new browser tab called **HDInsight Query Console**.</span></span>
4. <span data-ttu-id="d0f57-150">À partir de la **Console de requête HDInsight**, cliquez sur l’**interface utilisateur YARN**.</span><span class="sxs-lookup"><span data-stu-id="d0f57-150">From **HDInsight Query Console**, click **Yarn UI**.</span></span>

[YARN-timeline-server]:http://hadoop.apache.org/docs/r2.4.0/hadoop-yarn/hadoop-yarn-site/TimelineServer.html
[log-aggregation]:http://hortonworks.com/blog/simplifying-user-logs-management-and-access-in-yarn/
[T-file]:https://issues.apache.org/jira/secure/attachment/12396286/TFile%20Specification%2020081217.pdf
[binary-format]:https://issues.apache.org/jira/browse/HADOOP-3315
[YARN-concepts]:http://hortonworks.com/blog/apache-hadoop-yarn-concepts-and-applications/
