---
title: "tooSharePoint d’accès à distance aaaEnable avec Proxy d’Application Azure AD | Documents Microsoft"
description: "Traite des concepts de base hello sur la façon toointegrate un serveur de SharePoint sur site avec le Proxy d’Application Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 6ab413462fcaf387e150449df9c97505c4108bcf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="enable-remote-access-toosharepoint-with-azure-ad-application-proxy"></a><span data-ttu-id="ffc75-103">Activer tooSharePoint l’accès à distance avec le Proxy d’Application Azure AD</span><span class="sxs-lookup"><span data-stu-id="ffc75-103">Enable remote access tooSharePoint with Azure AD Application Proxy</span></span>

<span data-ttu-id="ffc75-104">Cet article explique comment toointegrate un serveur de SharePoint sur site avec le Proxy d’Application Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="ffc75-104">This article discusses how toointegrate an on-premises SharePoint server with Azure Active Directory (Azure AD) Application Proxy.</span></span>

<span data-ttu-id="ffc75-105">tooSharePoint d’accès à distance tooenable avec Proxy d’Application Azure AD, suivez les sections hello dans cet article étape par étape.</span><span class="sxs-lookup"><span data-stu-id="ffc75-105">tooenable remote access tooSharePoint with Azure AD Application Proxy, follow hello sections in this article step by step.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ffc75-106">Composants requis</span><span class="sxs-lookup"><span data-stu-id="ffc75-106">Prerequisites</span></span>

<span data-ttu-id="ffc75-107">Cet article suppose que vous avez déjà SharePoint 2013 ou une version plus récente dans votre environnement.</span><span class="sxs-lookup"><span data-stu-id="ffc75-107">This article assumes that you already have SharePoint 2013 or newer in your environment.</span></span> <span data-ttu-id="ffc75-108">En outre, tenez compte des hello suivant des conditions préalables :</span><span class="sxs-lookup"><span data-stu-id="ffc75-108">In addition, consider hello following prerequisites:</span></span>

* <span data-ttu-id="ffc75-109">SharePoint comprend la prise en charge native de Kerberos.</span><span class="sxs-lookup"><span data-stu-id="ffc75-109">SharePoint includes native Kerberos support.</span></span> <span data-ttu-id="ffc75-110">Par conséquent, les utilisateurs qui accèdent à des sites internes à distance via le Proxy d’Application Azure AD peuvent supposer toohave une-session unique (SSO de) l’expérience.</span><span class="sxs-lookup"><span data-stu-id="ffc75-110">Therefore, users who are accessing internal sites remotely through Azure AD Application Proxy can assume toohave a single sign-on (SSO) experience.</span></span>

* <span data-ttu-id="ffc75-111">Vous avez besoin toomake quelques configuration modifications tooyour SharePoint serveur.</span><span class="sxs-lookup"><span data-stu-id="ffc75-111">You need toomake a few configuration changes tooyour SharePoint server.</span></span> <span data-ttu-id="ffc75-112">Nous vous recommandons d’utiliser un environnement intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="ffc75-112">We recommend using a staging environment.</span></span> <span data-ttu-id="ffc75-113">De cette manière, vous pouvez rendre tooyour mises à jour tout d’abord de serveur de test et puis faciliter un cycle de test avant de passer en production.</span><span class="sxs-lookup"><span data-stu-id="ffc75-113">This way, you can make updates tooyour staging server first, and then facilitate a testing cycle before going into production.</span></span>

* <span data-ttu-id="ffc75-114">Nous supposons que vous avez déjà configuré SSL pour SharePoint, car nous avons besoin de que SSL sur hello publié URL.</span><span class="sxs-lookup"><span data-stu-id="ffc75-114">We assume that you have already set up SSL for SharePoint, because we require SSL on hello published URL.</span></span> <span data-ttu-id="ffc75-115">Vous devez toohave que SSL est activé sur votre site interne, tooensure que des liens sont envoyés/correctement mappés.</span><span class="sxs-lookup"><span data-stu-id="ffc75-115">You need toohave SSL enabled on your internal site, tooensure that links are sent/mapped correctly.</span></span> <span data-ttu-id="ffc75-116">Si vous n’avez pas configuré SSL, consultez le blog [Configure SSL for SharePoint 2013](https://blogs.msdn.microsoft.com/fabdulwahab/2013/01/20/configure-ssl-for-sharepoint-2013) pour obtenir des instructions.</span><span class="sxs-lookup"><span data-stu-id="ffc75-116">If you haven't configured SSL, see [Configure SSL for SharePoint 2013](https://blogs.msdn.microsoft.com/fabdulwahab/2013/01/20/configure-ssl-for-sharepoint-2013) for instructions.</span></span> <span data-ttu-id="ffc75-117">En outre, assurez-vous que hello connecteur approbations hello certificat d’ordinateur que vous émettez.</span><span class="sxs-lookup"><span data-stu-id="ffc75-117">Also, make sure that hello connector machine trusts hello certificate that you issue.</span></span> <span data-ttu-id="ffc75-118">(les certificats hello n’est pas nécessaire à toobe publiquement émis.)</span><span class="sxs-lookup"><span data-stu-id="ffc75-118">(hello certificate does not need toobe publicly issued.)</span></span>

## <a name="step-1-set-up-single-sign-on-toosharepoint"></a><span data-ttu-id="ffc75-119">Étape 1 : Configurer tooSharePoint de l’authentification unique</span><span class="sxs-lookup"><span data-stu-id="ffc75-119">Step 1: Set up single sign-on tooSharePoint</span></span>

<span data-ttu-id="ffc75-120">Nos clients souhaitent hello expérience d’authentification meilleures pour leurs applications principales, SharePoint server dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="ffc75-120">Our customers want hello best SSO experience for their back-end applications, SharePoint server in this case.</span></span> <span data-ttu-id="ffc75-121">Dans ce scénario courant d’Azure AD, utilisateur de hello est authentifié qu’une seule fois, car ils ne seront pas demandées pour l’authentification à nouveau.</span><span class="sxs-lookup"><span data-stu-id="ffc75-121">In this common Azure AD scenario, hello user is authenticated only once, because they will not be prompted for authentication again.</span></span>

<span data-ttu-id="ffc75-122">Pour les applications sur site ou utilisent l’authentification Windows, vous pouvez obtenir l’authentification unique à l’aide de protocole d’authentification Kerberos hello et une fonctionnalité appelée la délégation Kerberos contrainte (KCD).</span><span class="sxs-lookup"><span data-stu-id="ffc75-122">For on-premises applications that require or use Windows authentication, you can achieve SSO by using hello Kerberos authentication protocol and a feature called Kerberos constrained delegation (KCD).</span></span> <span data-ttu-id="ffc75-123">KCD, lors de la configuration, permet à un windows tooobtain de connecteur de Proxy d’Application hello ticket et le jeton pour un utilisateur, même si l’utilisateur de hello n’est pas connecté directement tooWindows.</span><span class="sxs-lookup"><span data-stu-id="ffc75-123">KCD, when configured, allows hello Application Proxy connector tooobtain a windows ticket/token for a user, even if hello user hasn’t signed in tooWindows directly.</span></span> <span data-ttu-id="ffc75-124">toolearn en savoir plus sur KCD, consultez [présentation de délégation contrainte Kerberos](https://technet.microsoft.com/library/jj553400.aspx).</span><span class="sxs-lookup"><span data-stu-id="ffc75-124">toolearn more about KCD, see [Kerberos Constrained Delegation Overview](https://technet.microsoft.com/library/jj553400.aspx).</span></span>

<span data-ttu-id="ffc75-125">tooset de KCD pour un serveur SharePoint, et utiliser des procédures hello Bonjour les sections séquentielles suivantes :</span><span class="sxs-lookup"><span data-stu-id="ffc75-125">tooset up KCD for a SharePoint server, use hello procedures in hello following sequential sections:</span></span>

### <a name="ensure-that-sharepoint-is-running-under-a-service-account"></a><span data-ttu-id="ffc75-126">Vérifier que SharePoint s’exécute sous un compte de service</span><span class="sxs-lookup"><span data-stu-id="ffc75-126">Ensure that SharePoint is running under a service account</span></span>

<span data-ttu-id="ffc75-127">Tout d’abord, vérifiez que SharePoint s’exécute sous un compte de service défini, et non sous le système local, le service local ou le service réseau.</span><span class="sxs-lookup"><span data-stu-id="ffc75-127">First, make sure that SharePoint is running under a defined service account--not local system, local service, or network service.</span></span> <span data-ttu-id="ffc75-128">Cela afin que vous pouvez attacher le compte de service (SPN) de noms principal tooa valide.</span><span class="sxs-lookup"><span data-stu-id="ffc75-128">Do this so that you can attach service principal names (SPNs) tooa valid account.</span></span> <span data-ttu-id="ffc75-129">Noms principaux de service sont comment hello protocole Kerberos identifie les différents services.</span><span class="sxs-lookup"><span data-stu-id="ffc75-129">SPNs are how hello Kerberos protocol identifies different services.</span></span> <span data-ttu-id="ffc75-130">Et vous devez serez hello compte ultérieure tooconfigure hello KCD.</span><span class="sxs-lookup"><span data-stu-id="ffc75-130">And you will need hello account later tooconfigure hello KCD.</span></span>

<span data-ttu-id="ffc75-131">tooensure vos sites sont en cours d’exécution sous un compte de service définis, effectuez hello comme suit :</span><span class="sxs-lookup"><span data-stu-id="ffc75-131">tooensure that your sites are running under a defined service account, perform hello following steps:</span></span>

1. <span data-ttu-id="ffc75-132">Ouvrez hello **Administration centrale de SharePoint 2013** site.</span><span class="sxs-lookup"><span data-stu-id="ffc75-132">Open hello **SharePoint 2013 Central Administration** site.</span></span>
2. <span data-ttu-id="ffc75-133">Accédez trop**sécurité** et sélectionnez **configurer des comptes de service**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-133">Go too**Security** and select **Configure service accounts**.</span></span>
3. <span data-ttu-id="ffc75-134">Sélectionnez **Pool d’applications web - SharePoint - 80**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-134">Select **Web Application Pool - SharePoint - 80**.</span></span> <span data-ttu-id="ffc75-135">options de Hello peuvent être légèrement différentes selon le nom de hello de votre pool de web, ou si hello pool web utilise SSL par défaut.</span><span class="sxs-lookup"><span data-stu-id="ffc75-135">hello options may be slightly different based on hello name of your web pool, or if hello web pool uses SSL by default.</span></span>

  ![Choix disponibles pour configurer un compte de service](./media/application-proxy-remote-sharepoint/remote-sharepoint-service-web-application.png)

4. <span data-ttu-id="ffc75-137">Si **sélectionner un compte pour ce composant** est **Service Local** ou **Service réseau**, vous devez toocreate un compte.</span><span class="sxs-lookup"><span data-stu-id="ffc75-137">If **Select an account for this component** is **Local Service** or **Network Service**, you need toocreate an account.</span></span> <span data-ttu-id="ffc75-138">Si ce n’est pas le cas, vous avez terminé et que vous pouvez déplacer toohello la prochaine section.</span><span class="sxs-lookup"><span data-stu-id="ffc75-138">If not, you're finished and can move toohello next section.</span></span>
5. <span data-ttu-id="ffc75-139">Choisissez **Enregistrer le nouveau compte géré**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-139">Select **Register new managed account**.</span></span> <span data-ttu-id="ffc75-140">Une fois votre compte est créé, vous devez définir **Pool d’applications Web** avant de pouvoir utiliser le compte de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-140">After your account is created, you must set **Web Application Pool** before you can use hello account.</span></span>

> [!NOTE]
<span data-ttu-id="ffc75-141">Vous devez toohave a déjà créé le compte Azure AD pour le service de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-141">You need toohave a previously created Azure AD account for hello service.</span></span> <span data-ttu-id="ffc75-142">Nous vous suggérons d’autoriser une modification de mot de passe automatique.</span><span class="sxs-lookup"><span data-stu-id="ffc75-142">We suggest that you allow for an automatic password change.</span></span> <span data-ttu-id="ffc75-143">Pour plus d’informations sur l’ensemble complet de hello d’étapes et de résolution des problèmes, consultez [configurer des modifications de mot de passe automatique dans SharePoint 2013](https://technet.microsoft.com/library/ff724280.aspx).</span><span class="sxs-lookup"><span data-stu-id="ffc75-143">For more information about hello full set of steps and troubleshooting issues, see [Configure automatic password change in SharePoint 2013](https://technet.microsoft.com/library/ff724280.aspx).</span></span>

### <a name="configure-sharepoint-for-kerberos"></a><span data-ttu-id="ffc75-144">Configurer SharePoint pour Kerberos</span><span class="sxs-lookup"><span data-stu-id="ffc75-144">Configure SharePoint for Kerberos</span></span>

<span data-ttu-id="ffc75-145">Vous utilisez KCD tooperform unique authentification toohello SharePoint server, et cela fonctionne uniquement avec Kerberos.</span><span class="sxs-lookup"><span data-stu-id="ffc75-145">You use KCD tooperform single sign-on toohello SharePoint server, and this works only with Kerberos.</span></span>

<span data-ttu-id="ffc75-146">tooconfigure de site SharePoint pour l’authentification Kerberos :</span><span class="sxs-lookup"><span data-stu-id="ffc75-146">tooconfigure your SharePoint site for Kerberos authentication:</span></span>

1. <span data-ttu-id="ffc75-147">Ouvrez hello **Administration centrale de SharePoint 2013** site.</span><span class="sxs-lookup"><span data-stu-id="ffc75-147">Open hello **SharePoint 2013 Central Administration** site.</span></span>
2. <span data-ttu-id="ffc75-148">Accédez trop**gestion des applications**, sélectionnez **gérer les applications web**et sélectionnez votre site SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ffc75-148">Go too**Application Management**, select **Manage web applications**, and select your SharePoint site.</span></span> <span data-ttu-id="ffc75-149">Dans cet exemple, il s’agit de **SharePoint - 80**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-149">In this example, it is **SharePoint - 80**.</span></span>

  ![Sélection d’un site SharePoint hello](./media/application-proxy-remote-sharepoint/remote-sharepoint-manage-web-applications.png)

3. <span data-ttu-id="ffc75-151">Cliquez sur **fournisseurs d’authentification** sur la barre d’outils hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-151">Click **Authentication Providers** on hello toolbar.</span></span>
4. <span data-ttu-id="ffc75-152">Bonjour **fournisseurs d’authentification** , cliquez sur **Zone par défaut** tooview les paramètres hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-152">In hello **Authentication Providers** box, click **Default Zone** tooview hello settings.</span></span>
5. <span data-ttu-id="ffc75-153">Bonjour **modifier l’authentification** boîte de dialogue zone, faites défiler vers le bas jusqu'à ce que vous voyiez **Types de revendications d’authentification** et vérifiez que les deux **activer l’authentification Windows** et  **L’authentification intégrée Windows** sont sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="ffc75-153">In hello **Edit Authentication** dialog box, scroll down until you see **Claims Authentication Types** and ensure that both **Enable Windows Authentication** and **Integrated Windows Authentication** are selected.</span></span>
6. <span data-ttu-id="ffc75-154">Dans la zone de liste déroulante hello, assurez-vous que **négocier (Kerberos)** est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="ffc75-154">In hello drop-down box, make sure that **Negotiate (Kerberos)** is selected.</span></span>

  ![Boîte de dialogue Modifier l’authentification](./media/application-proxy-remote-sharepoint/remote-sharepoint-service-edit-authentication.png)

7. <span data-ttu-id="ffc75-156">En bas de hello Hello **modifier l’authentification** boîte de dialogue, cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-156">At hello bottom of hello **Edit Authentication** dialog box, click **Save**.</span></span>

### <a name="set-a-service-principal-name-for-hello-sharepoint-service-account"></a><span data-ttu-id="ffc75-157">Définir un nom principal de service pour le compte de service SharePoint de hello</span><span class="sxs-lookup"><span data-stu-id="ffc75-157">Set a service principal name for hello SharePoint service account</span></span>

<span data-ttu-id="ffc75-158">Avant de configurer hello KCD, vous devez le service SharePoint de tooidentify hello en cours d’exécution en tant que compte de service hello que vous avez configurée.</span><span class="sxs-lookup"><span data-stu-id="ffc75-158">Before you configure hello KCD, you need tooidentify hello SharePoint service running as hello service account that you've configured.</span></span> <span data-ttu-id="ffc75-159">Pour cela, définissez un nom de principal de service.</span><span class="sxs-lookup"><span data-stu-id="ffc75-159">You do this by setting an SPN.</span></span> <span data-ttu-id="ffc75-160">Pour plus d'informations, consultez la page [Noms de principal de service](https://technet.microsoft.com/library/cc961723.aspx).</span><span class="sxs-lookup"><span data-stu-id="ffc75-160">For more information, see [Service Principal Names](https://technet.microsoft.com/library/cc961723.aspx).</span></span>

<span data-ttu-id="ffc75-161">format des SPN Hello est la suivante :</span><span class="sxs-lookup"><span data-stu-id="ffc75-161">hello SPN format is:</span></span>

```
<service class>/<host>:<port>
```

<span data-ttu-id="ffc75-162">Dans le format des SPN hello :</span><span class="sxs-lookup"><span data-stu-id="ffc75-162">In hello SPN format:</span></span>

* <span data-ttu-id="ffc75-163">_classe de service_ est un nom unique pour le service de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-163">_service class_ is a unique name for hello service.</span></span> <span data-ttu-id="ffc75-164">Pour SharePoint, vous utilisez **HTTP**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-164">For SharePoint, you use **HTTP**.</span></span>

* <span data-ttu-id="ffc75-165">_hôte_ est hello nom de domaine complet ou le nom NetBIOS de l’ordinateur hôte hello hello service est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="ffc75-165">_host_ is hello fully qualified domain or NetBIOS name of hello host that hello service is running on.</span></span> <span data-ttu-id="ffc75-166">Pour un site SharePoint, ce texte peut-être toobe des URL de hello du site hello, selon la version de hello d’IIS que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="ffc75-166">For a SharePoint site, this text might need toobe hello URL of hello site, depending on hello version of IIS that you're using.</span></span>

* <span data-ttu-id="ffc75-167">_port_ est facultatif.</span><span class="sxs-lookup"><span data-stu-id="ffc75-167">_port_ is optional.</span></span>

<span data-ttu-id="ffc75-168">Si hello FQDN du serveur SharePoint de hello est :</span><span class="sxs-lookup"><span data-stu-id="ffc75-168">If hello FQDN of hello SharePoint server is:</span></span>

```
sharepoint.demo.o365identity.us
```

<span data-ttu-id="ffc75-169">Puis hello SPN est la suivante :</span><span class="sxs-lookup"><span data-stu-id="ffc75-169">Then hello SPN is:</span></span>

```
HTTP/ sharepoint.demo.o365identity.us demo
```

<span data-ttu-id="ffc75-170">Vous devrez peut-être également tooset SPN pour des sites spécifiques sur votre serveur.</span><span class="sxs-lookup"><span data-stu-id="ffc75-170">You might also need tooset SPNs for specific sites on your server.</span></span> <span data-ttu-id="ffc75-171">Pour plus d’informations, consultez [Configurer l’authentification Kerberos](https://technet.microsoft.com/library/cc263449(v=office.12).aspx).</span><span class="sxs-lookup"><span data-stu-id="ffc75-171">For more information, see [Configure Kerberos authentication](https://technet.microsoft.com/library/cc263449(v=office.12).aspx).</span></span> <span data-ttu-id="ffc75-172">Payer attentif toohello section « Créer des noms principaux de Service pour vos applications Web à l’aide de l’authentification Kerberos ».</span><span class="sxs-lookup"><span data-stu-id="ffc75-172">Pay close attention toohello section "Create Service Principal Names for your Web applications using Kerberos authentication."</span></span>

<span data-ttu-id="ffc75-173">Hello plus simple pour tooset SPN est toofollow les formats de SPN hello qui peuvent déjà être présents pour vos sites.</span><span class="sxs-lookup"><span data-stu-id="ffc75-173">hello easiest way for you tooset SPNs is toofollow hello SPN formats that may already be present for your sites.</span></span> <span data-ttu-id="ffc75-174">Copiez ces tooregister SPN sur le compte de service hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-174">Copy those SPNs tooregister against hello service account.</span></span> <span data-ttu-id="ffc75-175">toodo cela :</span><span class="sxs-lookup"><span data-stu-id="ffc75-175">toodo this:</span></span>

1. <span data-ttu-id="ffc75-176">Parcourir le site toohello avec hello SPN à partir d’un autre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="ffc75-176">Browse toohello site with hello SPN from another machine.</span></span>
 <span data-ttu-id="ffc75-177">Lorsque vous, hello ensemble approprié des tickets Kerberos est mis en cache sur l’ordinateur de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-177">When you do, hello relevant set of Kerberos tickets is cached on hello machine.</span></span> <span data-ttu-id="ffc75-178">Ces tickets contiennent hello SPN du site hello cible que vous avez accédé à.</span><span class="sxs-lookup"><span data-stu-id="ffc75-178">These tickets contain hello SPN of hello target site that you browsed to.</span></span>

2. <span data-ttu-id="ffc75-179">Vous pouvez extraire hello SPN pour le site à l’aide d’un outil appelé [Klist](http://web.mit.edu/kerberos/krb5-devel/doc/user/user_commands/klist.html).</span><span class="sxs-lookup"><span data-stu-id="ffc75-179">You can pull hello SPN for that site by using a tool called [Klist](http://web.mit.edu/kerberos/krb5-devel/doc/user/user_commands/klist.html).</span></span> <span data-ttu-id="ffc75-180">Dans une fenêtre de commande qui s’exécute dans hello même contexte en tant qu’utilisateur hello qui exécutera le site d’accès hello dans le navigateur de hello, hello la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="ffc75-180">In a command window that's running in hello same context as hello user who accessed hello site in hello browser, run hello following command:</span></span>
```
Klist
```
<span data-ttu-id="ffc75-181">Klist retourne ensuite un jeu hello de cible de noms principaux de service.</span><span class="sxs-lookup"><span data-stu-id="ffc75-181">Klist then returns hello set of target SPNs.</span></span> <span data-ttu-id="ffc75-182">Dans cet exemple, valeur de hello mis en surbrillance est hello SPN que nécessaire :</span><span class="sxs-lookup"><span data-stu-id="ffc75-182">In this example, hello highlighted value is hello SPN that's needed:</span></span>

  ![Exemples de résultats de l’outil Klist](./media/application-proxy-remote-sharepoint/remote-sharepoint-target-service.png)

4. <span data-ttu-id="ffc75-184">Maintenant que vous avez hello SPN, vous devez toomake Vérifiez qu’il est correctement configuré sur le compte de service hello que vous avez configurée pour l’application web de hello précédemment.</span><span class="sxs-lookup"><span data-stu-id="ffc75-184">Now that you have hello SPN, you need toomake sure that it's configured correctly on hello service account that you set up for hello web application earlier.</span></span> <span data-ttu-id="ffc75-185">Exécutez hello de commande suivante à partir de l’invite de commandes hello en tant qu’administrateur de domaine de hello :</span><span class="sxs-lookup"><span data-stu-id="ffc75-185">Run hello following command from hello command prompt as an administrator of hello domain:</span></span>

 ```
 setspn -S http/sharepoint.demo.o365identity.us demo\sp_svc
 ```

 <span data-ttu-id="ffc75-186">Cette commande définit hello SPN pour le service SharePoint de hello compte en cours d’exécution en tant que _demo\sp_svc_.</span><span class="sxs-lookup"><span data-stu-id="ffc75-186">This command sets hello SPN for hello SharePoint service account running as _demo\sp_svc_.</span></span>

 <span data-ttu-id="ffc75-187">Remplacez _http/sharepoint.demo.o365identity.us_ avec hello nom principal de service pour votre serveur et _demo\sp_svc_ avec le compte de service hello dans votre environnement.</span><span class="sxs-lookup"><span data-stu-id="ffc75-187">Replace _http/sharepoint.demo.o365identity.us_ with hello SPN for your server and _demo\sp_svc_ with hello service account in your environment.</span></span> <span data-ttu-id="ffc75-188">commande de Setspn Hello recherche hello SPN avant qu’il l’ajoute.</span><span class="sxs-lookup"><span data-stu-id="ffc75-188">hello Setspn command searches for hello SPN before it adds it.</span></span> <span data-ttu-id="ffc75-189">Dans le cas présent, l’erreur **Valeur de SPN dupliquée** peut s’afficher.</span><span class="sxs-lookup"><span data-stu-id="ffc75-189">In this case, you might see a **Duplicate SPN Value** error.</span></span> <span data-ttu-id="ffc75-190">Si vous voyez cette erreur, assurez-vous que la valeur de hello est associé au compte de service hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-190">If you see this error, make sure that hello value is associated with hello service account.</span></span>

<span data-ttu-id="ffc75-191">Vous pouvez vérifier que hello que SPN a été ajouté en exécutant la commande de Setspn hello avec hello -l, option.</span><span class="sxs-lookup"><span data-stu-id="ffc75-191">You can verify that hello SPN was added by running hello Setspn command with hello -l option.</span></span> <span data-ttu-id="ffc75-192">toolearn en savoir plus sur cette commande, consultez [Setspn](https://technet.microsoft.com/library/cc731241.aspx).</span><span class="sxs-lookup"><span data-stu-id="ffc75-192">toolearn more about this command, see [Setspn](https://technet.microsoft.com/library/cc731241.aspx).</span></span>

### <a name="ensure-that-hello-connector-is-set-as-a-trusted-delegate-toosharepoint"></a><span data-ttu-id="ffc75-193">Vérifiez que le connecteur hello est défini comme un tooSharePoint délégué approuvé</span><span class="sxs-lookup"><span data-stu-id="ffc75-193">Ensure that hello connector is set as a trusted delegate tooSharePoint</span></span>

<span data-ttu-id="ffc75-194">Configurer hello KCD afin que le service de Proxy d’Application Azure AD hello peut déléguer le service de SharePoint toohello utilisateur identités.</span><span class="sxs-lookup"><span data-stu-id="ffc75-194">Configure hello KCD so that hello Azure AD Application Proxy service can delegate user identities toohello SharePoint service.</span></span> <span data-ttu-id="ffc75-195">Cela en activant le connecteur de Proxy d’Application hello tooretrieve les tickets Kerberos pour les utilisateurs qui ont été authentifiés dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffc75-195">You do this by enabling hello Application Proxy connector tooretrieve Kerberos tickets for your users who have been authenticated in Azure AD.</span></span> <span data-ttu-id="ffc75-196">Ce serveur transmet ensuite hello contexte toohello cible application ou SharePoint dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="ffc75-196">Then that server passes hello context toohello target application, or SharePoint in this case.</span></span>

<span data-ttu-id="ffc75-197">tooconfigure hello KCD, hello Répétez ces étapes pour chaque ordinateur de connecteur comme suit :</span><span class="sxs-lookup"><span data-stu-id="ffc75-197">tooconfigure hello KCD, repeat hello following steps for each connector machine:</span></span>

1. <span data-ttu-id="ffc75-198">Connectez-vous en tant qu’un tooa d’administrateur de domaine contrôleur de domaine, puis ouvrez **Active Directory Users and Computers**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-198">Log in as a domain administrator tooa DC, and then open **Active Directory Users and Computers**.</span></span>
2. <span data-ttu-id="ffc75-199">Trouver l’ordinateur hello hello connecteur est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="ffc75-199">Find hello computer that hello connector is running on.</span></span> <span data-ttu-id="ffc75-200">Dans cet exemple, il a hello même serveur SharePoint.</span><span class="sxs-lookup"><span data-stu-id="ffc75-200">In this example, it's hello same SharePoint server.</span></span>
3. <span data-ttu-id="ffc75-201">Double-cliquez sur hello ordinateur, puis cliquez sur hello **délégation** onglet.</span><span class="sxs-lookup"><span data-stu-id="ffc75-201">Double-click hello computer, and then click hello **Delegation** tab.</span></span>
4. <span data-ttu-id="ffc75-202">Vérifiez que les paramètres de délégation hello sont définies trop**n’approuver cet ordinateur pour toohello délégation spécifié services uniquement**, puis sélectionnez **utiliser tout protocole d’authentification**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-202">Ensure that hello delegation settings are set too**Trust this computer for delegation toohello specified services only**, and then select **Use any authentication protocol**.</span></span>

  ![Paramètres de délégation](./media/application-proxy-remote-sharepoint/remote-sharepoint-delegation-box.png)

5. <span data-ttu-id="ffc75-204">Cliquez sur hello **ajouter** et sur **utilisateurs ou ordinateurs**et recherchez le compte de service hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-204">Click hello **Add** button, click **Users or Computers**, and locate hello service account.</span></span>

  ![Ajout hello SPN pour le compte de service hello](./media/application-proxy-remote-sharepoint/remote-sharepoint-users-computers.png)

6. <span data-ttu-id="ffc75-206">Dans liste hello de SPN, sélectionnez hello une que vous avez créé précédemment pour le compte de service hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-206">In hello list of SPNs, select hello one that you created earlier for hello service account.</span></span>
7. <span data-ttu-id="ffc75-207">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-207">Click **OK**.</span></span> <span data-ttu-id="ffc75-208">Cliquez sur **OK** à nouveau les modifications toosave hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-208">Click **OK** again toosave hello changes.</span></span>

## <a name="step-2-enable-remote-access-toosharepoint"></a><span data-ttu-id="ffc75-209">Étape 2 : Activer l’accès à distance tooSharePoint</span><span class="sxs-lookup"><span data-stu-id="ffc75-209">Step 2: Enable remote access tooSharePoint</span></span>

<span data-ttu-id="ffc75-210">Maintenant que vous avez activée SharePoint pour Kerberos et configuré KCD, vous êtes prêt tooset des tooSharePoint de l’authentification unique.</span><span class="sxs-lookup"><span data-stu-id="ffc75-210">Now that you’ve enabled SharePoint for Kerberos and configured KCD, you're ready tooset up single sign-on tooSharePoint.</span></span> <span data-ttu-id="ffc75-211">Connecteur de hello, vous pouvez ensuite publier batterie de serveurs SharePoint hello pour l’accès à distance via le Proxy d’Application Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffc75-211">Then from hello connector, you can publish hello SharePoint farm for remote access through Azure AD Application Proxy.</span></span>

<span data-ttu-id="ffc75-212">tooperform hello comme suit, vous devez toobe un membre du rôle Administrateur général de hello dans un compte Azure Active Directory de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="ffc75-212">tooperform hello following steps, you need toobe a member of hello Global Administrator Role in your organization's Azure Active Directory account.</span></span>

1. <span data-ttu-id="ffc75-213">Connectez-vous à toohello [portail Azure](https://manage.windowsazure.com) et recherchez votre locataire Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffc75-213">Sign in toohello [Azure portal](https://manage.windowsazure.com) and find your Azure AD tenant.</span></span>
2. <span data-ttu-id="ffc75-214">Cliquez sur **Applications**, puis sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-214">Click **Applications**, and then click **Add**.</span></span>
3. <span data-ttu-id="ffc75-215">Sélectionnez **Publier une application qui sera accessible depuis l’extérieur de votre réseau**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-215">Select **Publish an application that will be accessible from outside your network**.</span></span> <span data-ttu-id="ffc75-216">Si vous ne voyez pas cette option, assurez-vous que vous avez Azure AD Basic ou Premium configuré dans le locataire de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-216">If you don’t see this option, make sure that you have Azure AD Basic or Premium set up in hello tenant.</span></span>
4. <span data-ttu-id="ffc75-217">Chacune des options de hello procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="ffc75-217">Complete each of hello options as follows:</span></span>
 * <span data-ttu-id="ffc75-218">**Nom** : utilisez la valeur de votre choix, par exemple **SharePoint**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-218">**Name**: Use any value that you want--for example, **SharePoint**.</span></span>
 * <span data-ttu-id="ffc75-219">**URL interne**: hello les URL du site SharePoint de hello en interne, telles que **https://SharePoint/**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-219">**Internal URL**: This is hello URL of hello SharePoint site internally, such as **https://SharePoint/**.</span></span> <span data-ttu-id="ffc75-220">Dans cet exemple, assurez-vous que toouse **https**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-220">In this example, make sure toouse **https**.</span></span>
 * <span data-ttu-id="ffc75-221">**Méthode de préauthentification** : sélectionnez **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-221">**Preauthentication Method**: Select **Azure Active Directory**.</span></span>

  ![Options d’ajout d’une application](./media/application-proxy-remote-sharepoint/remote-sharepoint-add-application.png)

5. <span data-ttu-id="ffc75-223">Une fois l’application hello est publiée, cliquez sur hello **configurer** onglet.</span><span class="sxs-lookup"><span data-stu-id="ffc75-223">After hello app is published, click hello **Configure** tab.</span></span>
6. <span data-ttu-id="ffc75-224">Faites défiler vers le bas toohello option **traduire les URL dans les en-têtes**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-224">Scroll down toohello option **Translate URL in Headers**.</span></span> <span data-ttu-id="ffc75-225">la valeur par défaut Hello est **Oui**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-225">hello default value is **YES**.</span></span> <span data-ttu-id="ffc75-226">Modifier trop**non**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-226">Change it too**NO**.</span></span>

 <span data-ttu-id="ffc75-227">SharePoint utilise hello _en-tête d’hôte_ toolook valeur site de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-227">SharePoint uses hello _Host Header_ value toolook up hello site.</span></span> <span data-ttu-id="ffc75-228">Il génère également des liens en fonction de cette valeur.</span><span class="sxs-lookup"><span data-stu-id="ffc75-228">It also generates links based on this value.</span></span> <span data-ttu-id="ffc75-229">effet net de Hello est toomake assurer que les liens qui génère de SharePoint sont une URL publiée est correctement définie l’URL externe de toouse hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-229">hello net effect is toomake sure that any link that SharePoint generates is a published URL that is correctly set toouse hello external URL.</span></span> <span data-ttu-id="ffc75-230">Valeur hello trop**Oui** également Active hello connecteur tooforward hello demande toohello application d’arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="ffc75-230">Setting hello value too**YES** also enables hello connector tooforward hello request toohello back-end application.</span></span> <span data-ttu-id="ffc75-231">Toutefois, valeur hello trop**non** signifie que le connecteur de hello n’envoie pas de nom d’hôte interne hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-231">However, setting hello value too**NO** means that hello connector will not send hello internal host name.</span></span> <span data-ttu-id="ffc75-232">Au lieu de cela, connecteur de hello envoie des en-tête d’hôte hello hello publié l’application principale de toohello URL.</span><span class="sxs-lookup"><span data-stu-id="ffc75-232">Instead, hello connector sends hello host header as hello published URL toohello back-end application.</span></span>

 <span data-ttu-id="ffc75-233">En outre, tooensure que SharePoint accepte cette URL, vous devez toocomplete davantage de configuration sur le serveur SharePoint de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-233">Also, tooensure that SharePoint accepts this URL, you need toocomplete one more configuration on hello SharePoint server.</span></span> <span data-ttu-id="ffc75-234">Vous devez le faire dans la section suivante de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-234">You'll do that in hello next section.</span></span>

7. <span data-ttu-id="ffc75-235">Modification **méthode d’authentification interne** trop**l’authentification Windows intégrée**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-235">Change **Internal Authentication Method** too**Integrated Windows Authentication**.</span></span> <span data-ttu-id="ffc75-236">Si votre client Azure AD utilise un nom UPN dans le cloud de hello est différente de hello UPN local, n’oubliez pas tooupdate **identité déléguée** également.</span><span class="sxs-lookup"><span data-stu-id="ffc75-236">If your Azure AD tenant uses a UPN in hello cloud that's different from hello UPN on-premises, remember tooupdate **Delegated Login Identity** as well.</span></span>
8. <span data-ttu-id="ffc75-237">Définissez **SPN d’Application interne** toohello valeur que vous avez définis précédemment.</span><span class="sxs-lookup"><span data-stu-id="ffc75-237">Set **Internal Application SPN** toohello value that you set earlier.</span></span> <span data-ttu-id="ffc75-238">Par exemple, utilisez **http/sharepoint.demo.o365identity.us**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-238">For example, use **http/sharepoint.demo.o365identity.us**.</span></span>
9. <span data-ttu-id="ffc75-239">Affecter des utilisateurs cibles hello application tooyour.</span><span class="sxs-lookup"><span data-stu-id="ffc75-239">Assign hello application tooyour target users.</span></span>

<span data-ttu-id="ffc75-240">Votre application doit se présenter comme toohello l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="ffc75-240">Your application should look similar toohello following example:</span></span>

  ![Application achevée](./media/application-proxy-remote-sharepoint/remote-sharepoint-internal-application-spn.png)

## <a name="step-3-ensure-that-sharepoint-knows-about-hello-external-url"></a><span data-ttu-id="ffc75-242">Étape 3 : Vérifier que SharePoint connaît hello des URL externe</span><span class="sxs-lookup"><span data-stu-id="ffc75-242">Step 3: Ensure that SharePoint knows about hello external URL</span></span>

<span data-ttu-id="ffc75-243">Votre dernière tooensure étape que SharePoint peut trouver site hello basé sur l’URL externe de hello, afin qu’il doit rendre les liens en fonction de cette URL externe.</span><span class="sxs-lookup"><span data-stu-id="ffc75-243">Your last step tooensure that SharePoint can find hello site based on hello external URL, so that it will render links based on that external URL.</span></span> <span data-ttu-id="ffc75-244">Pour cela, en configurant des mappages des accès de substitution pour un site SharePoint hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-244">You do this by configuring alternate access mappings for hello SharePoint site.</span></span>

1. <span data-ttu-id="ffc75-245">Ouvrez hello **Administration centrale de SharePoint 2013** site.</span><span class="sxs-lookup"><span data-stu-id="ffc75-245">Open hello **SharePoint 2013 Central Administration** site.</span></span>
2. <span data-ttu-id="ffc75-246">Sous **Paramètres système**, sélectionnez **Configurer des mappages d’accès alternatifs**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-246">Under **System Settings**, select **Configure Alternate Access Mappings**.</span></span>

 <span data-ttu-id="ffc75-247">Cette opération ouvre hello **mappages des accès de substitution** boîte.</span><span class="sxs-lookup"><span data-stu-id="ffc75-247">This opens hello **Alternate Access Mappings** box.</span></span>

  ![Zone Mappages des accès de substitution](./media/application-proxy-remote-sharepoint/remote-sharepoint-alternate-access1.png)

3. <span data-ttu-id="ffc75-249">Dans hello liste déroulante, en regard de **autre Collection de mappages des accès**, sélectionnez **modifier la Collection de mappages des accès de substitution**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-249">In hello drop-down list beside **Alternate Access Mapping Collection**, select **Change Alternate Access Mapping Collection**.</span></span>
4. <span data-ttu-id="ffc75-250">Sélectionnez votre site, par exemple **SharePoint - 80**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-250">Select your site--for example, **SharePoint - 80**.</span></span>

  ![Sélection d’un site](./media/application-proxy-remote-sharepoint/remote-sharepoint-alternate-access2.png)

5. <span data-ttu-id="ffc75-252">Vous pouvez choisir de tooadd hello publié URL comme une URL interne ou une URL publique.</span><span class="sxs-lookup"><span data-stu-id="ffc75-252">You can choose tooadd hello published URL as either an internal URL or a public URL.</span></span> <span data-ttu-id="ffc75-253">Cet exemple utilise une URL publique comme hello extranet.</span><span class="sxs-lookup"><span data-stu-id="ffc75-253">This example uses a public URL as hello extranet.</span></span>
6. <span data-ttu-id="ffc75-254">Cliquez sur **modifier les URL publiques** Bonjour **Extranet** chemin d’accès, puis entrez chemin hello pour hello publié l’application, comme à l’étape précédente de hello.</span><span class="sxs-lookup"><span data-stu-id="ffc75-254">Click **Edit Public URLs** in hello **Extranet** path, and then enter hello path for hello published application, as in hello previous step.</span></span> <span data-ttu-id="ffc75-255">Par exemple, entrez **https://sharepoint-iddemo.msappproxy.net**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-255">For example, enter **https://sharepoint-iddemo.msappproxy.net**.</span></span>

  ![Entrez le chemin d’accès de hello](./media/application-proxy-remote-sharepoint/remote-sharepoint-alternate-access3.png)

7. <span data-ttu-id="ffc75-257">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="ffc75-257">Click **Save**.</span></span>

 <span data-ttu-id="ffc75-258">Vous pouvez désormais accéder à un site SharePoint hello en externe via le Proxy d’Application Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ffc75-258">You can now access hello SharePoint site externally via Azure AD Application Proxy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ffc75-259">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="ffc75-259">Next steps</span></span>

- [<span data-ttu-id="ffc75-260">Comment tooprovide sécuriser l’accès à distance des applications tooon-site</span><span class="sxs-lookup"><span data-stu-id="ffc75-260">How tooprovide secure remote access tooon-premises applications</span></span>](active-directory-application-proxy-get-started.md)
- [<span data-ttu-id="ffc75-261">Présentation des connecteurs de proxy d’application Azure AD</span><span class="sxs-lookup"><span data-stu-id="ffc75-261">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
- [<span data-ttu-id="ffc75-262">Publication de SharePoint 2016 et d’Office Online Server avec le proxy d’application Azure AD</span><span class="sxs-lookup"><span data-stu-id="ffc75-262">Publishing SharePoint 2016 and Office Online Server with Azure AD Application Proxy</span></span>](https://blogs.technet.microsoft.com/dawiese/2016/06/09/publishing-sharepoint-2016-and-office-online-server-with-azure-ad-application-proxy/)
