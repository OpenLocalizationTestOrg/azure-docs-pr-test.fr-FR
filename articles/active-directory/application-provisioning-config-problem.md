---
title: "Problèmes lors de la configuration de l’approvisionnement des utilisateurs pour une application relevant de la galerie Azure AD | Microsoft Docs"
description: "Comment résoudre les problèmes courants rencontrés lors de la configuration l’approvisionnement des utilisateurs pour une application déjà répertoriée dans la galerie d’applications Azure AD"
services: active-directory
documentationcenter: 
author: ajamess
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: asteen
ms.openlocfilehash: 44e344095352f2bc6b27e389fc8be2cdf3e368d8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="problem-configuring-user-provisioning-to-an-azure-ad-gallery-application"></a><span data-ttu-id="5eb49-103">Problèmes lors de la configuration de l’approvisionnement des utilisateurs pour une application relevant de la galerie Azure AD</span><span class="sxs-lookup"><span data-stu-id="5eb49-103">Problem configuring user provisioning to an Azure AD Gallery application</span></span>

<span data-ttu-id="5eb49-104">La configuration de [l’approvisionnement automatique des utilisateurs](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) pour une application (lorsqu’il est pris en charge) implique de respecter des instructions spécifiques pour la préparation de l’application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-104">Configuring [automatic user provisioning](https://docs.microsoft.com/azure/active-directory/active-directory-saas-app-provisioning) for an app (where supported), requires that specific instructions be followed to prepare the application for automatic provisioning.</span></span> <span data-ttu-id="5eb49-105">Vous pouvez ensuite utiliser le Portail Azure afin de configurer le service d’approvisionnement pour synchroniser les comptes d’utilisateur avec l’application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-105">Then you can use the Azure portal to configure the provisioning service to synchronize user accounts to the application.</span></span>

<span data-ttu-id="5eb49-106">Vous devez toujours commencer par rechercher le didacticiel spécifique à la configuration de l’approvisionnement pour votre application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-106">You should always start by finding the setup tutorial specific to setting up provisioning for your application.</span></span> <span data-ttu-id="5eb49-107">Suivez ensuite ces étapes afin de configurer l’application et Azure AD pour créer la connexion d’approvisionnement.</span><span class="sxs-lookup"><span data-stu-id="5eb49-107">Then follow those steps to configure both the app and Azure AD to create the provisioning connection.</span></span> <span data-ttu-id="5eb49-108">Vous trouverez une liste de didacticiels pour les applications à la page [Liste de didacticiels sur l’intégration d’applications SaaS avec Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).</span><span class="sxs-lookup"><span data-stu-id="5eb49-108">A list of app tutorials can be found at [List of Tutorials on How to Integrate SaaS Apps with Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-saas-tutorial-list).</span></span>

## <a name="how-to-see-if-provisioning-is-working"></a><span data-ttu-id="5eb49-109">Comment savoir si l’approvisionnement fonctionne</span><span class="sxs-lookup"><span data-stu-id="5eb49-109">How to see if provisioning is working</span></span> 

<span data-ttu-id="5eb49-110">Une fois que le service est configuré, la plupart des informations sur son fonctionnement peuvent être obtenues à deux emplacements :</span><span class="sxs-lookup"><span data-stu-id="5eb49-110">Once the service is configured, most insights into the operation of the service can be drawn from two places:</span></span>

-   <span data-ttu-id="5eb49-111">**Journaux d’audit** : les journaux d’audit d’approvisionnement enregistrent toutes les opérations effectuées par le service d’approvisionnement, y compris l’interrogation d’Azure AD concernant les utilisateurs assignés qui se trouvent dans l’étendue de l’approvisionnement.</span><span class="sxs-lookup"><span data-stu-id="5eb49-111">**Audit logs** – The provisioning audit logs record all the operations performed by the provisioning service, including querying Azure AD for assigned users that are in scope for provisioning.</span></span> <span data-ttu-id="5eb49-112">Interrogez l’application cible concernant l’existence de ces utilisateurs en comparant les objets utilisateur du système.</span><span class="sxs-lookup"><span data-stu-id="5eb49-112">Query the target app for the existence of those users, comparing the user objects between the system.</span></span> <span data-ttu-id="5eb49-113">Puis, ajoutez, mettez à jour ou désactivez le compte d’utilisateur dans le système cible en fonction de cette comparaison.</span><span class="sxs-lookup"><span data-stu-id="5eb49-113">Then add, update, or disable the user account in the target system based on the comparison.</span></span> <span data-ttu-id="5eb49-114">Les journaux d’audit d’approvisionnement sont accessibles dans le Portail Azure, sous l’onglet **Azure Active Directory &gt; Applications d’entreprise &gt; \[Nom de l’application\] &gt; Journaux d’audit**.</span><span class="sxs-lookup"><span data-stu-id="5eb49-114">The provisioning audit logs can be accessed in the Azure portal, in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt; Audit Logs** tab.</span></span> <span data-ttu-id="5eb49-115">Filtrez les journaux sur la catégorie **Approvisionnement de comptes** pour afficher uniquement les événements d’approvisionnement de cette application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-115">Filter the logs on the **Account Provisioning** category to only see the provisioning events for that app.</span></span>

-   <span data-ttu-id="5eb49-116">**État de l’approvisionnement :** un résumé de la dernière exécution de l’approvisionnement pour une application donnée est disponible sous **Azure Active Directory &gt; Applications d’entreprise &gt; \[Nom de l’application\] &gt;Approvisionnement**, en bas de l’écran, sous les paramètres du service.</span><span class="sxs-lookup"><span data-stu-id="5eb49-116">**Provisioning status –** A summary of the last provisioning run for a given app can be seen in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt;Provisioning** section, at the bottom of the screen under the service settings.</span></span> <span data-ttu-id="5eb49-117">Cette section affiche le nombre d’utilisateurs (et/ou groupes) en cours de synchronisation entre les deux systèmes et indique les erreurs éventuelles.</span><span class="sxs-lookup"><span data-stu-id="5eb49-117">This section summarizes how many users (and/or groups) are currently being synchronized between the two systems, and if there are any errors.</span></span> <span data-ttu-id="5eb49-118">Les erreurs sont détaillées dans les journaux d’audit.</span><span class="sxs-lookup"><span data-stu-id="5eb49-118">Error details be in the audit logs.</span></span> <span data-ttu-id="5eb49-119">Notez que l’état de l’approvisionnement n’est renseigné que lorsqu’une synchronisation initiale complète a été effectuée entre Azure AD et l’application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-119">Note that the provisioning status not be populated until one full initial synchronization has been completed between Azure AD and the app.</span></span>

## <a name="general-problem-areas-with-provisioning-to-consider"></a><span data-ttu-id="5eb49-120">Problèmes d’approvisionnement généraux à prendre en compte</span><span class="sxs-lookup"><span data-stu-id="5eb49-120">General problem areas with provisioning to consider</span></span>

<span data-ttu-id="5eb49-121">Voici une liste des problèmes généraux que vous pouvez explorer si vous savez par où commencer.</span><span class="sxs-lookup"><span data-stu-id="5eb49-121">Below is a list of the general problem areas that you can drill into if you have an idea of where to start.</span></span>

* [<span data-ttu-id="5eb49-122">Le service d’approvisionnement ne semble pas démarrer</span><span class="sxs-lookup"><span data-stu-id="5eb49-122">Provisioning service does not appear to start</span></span>](#provisioning-service-does-not-appear-to-start)
* [<span data-ttu-id="5eb49-123">Impossible d’enregistrer la configuration car les informations d’identification de l’application ne fonctionnent pas</span><span class="sxs-lookup"><span data-stu-id="5eb49-123">Can’t save configuration due to app credentials not working</span></span>](#can’t-save-configuration-due-to-app-credentials-not-working)
* [<span data-ttu-id="5eb49-124">Les journaux d’audit indiquent que les utilisateurs sont ignorés et non approvisionnés, alors qu’ils sont affectés</span><span class="sxs-lookup"><span data-stu-id="5eb49-124">Audit logs say users are “skipped” and not provisioned, even though they are assigned</span></span>](#audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned)

## <a name="provisioning-service-does-not-appear-to-start"></a><span data-ttu-id="5eb49-125">Le service d’approvisionnement ne semble pas démarrer</span><span class="sxs-lookup"><span data-stu-id="5eb49-125">Provisioning service does not appear to start</span></span>

<span data-ttu-id="5eb49-126">Si vous définissez le paramètre **État de l’approvisionnement** sur **Activé** dans la section **Azure Active Directory &gt; Applications d’entreprise &gt; \[Nom de l’application\] &gt;Approvisionnement** du Portail Azure.</span><span class="sxs-lookup"><span data-stu-id="5eb49-126">If you set the **Provisioning Status** to be **On** in the **Azure Active Directory &gt; Enterprise Apps &gt; \[Application Name\] &gt;Provisioning** section of the Azure portal.</span></span> <span data-ttu-id="5eb49-127">Cependant aucune autre information d’état n’apparaît sur cette page après de nouveaux chargements.</span><span class="sxs-lookup"><span data-stu-id="5eb49-127">However no other status details are shown on that page after subsequent reloads.</span></span> <span data-ttu-id="5eb49-128">Le service est probablement en cours d’exécution mais n’a pas encore terminé la synchronisation initiale.</span><span class="sxs-lookup"><span data-stu-id="5eb49-128">It is likely that the service is running but has not completed an initial synchronization yet.</span></span> <span data-ttu-id="5eb49-129">Vérifiez les **journaux d’audit** décrits ci-dessus pour déterminer les opérations effectuées par le service et la présence éventuelle d’erreurs.</span><span class="sxs-lookup"><span data-stu-id="5eb49-129">Check the **Audit logs** described above to determine what operations the service is performing, and if there are any errors.</span></span>

>[!NOTE]
><span data-ttu-id="5eb49-130">Une synchronisation initiale peut prendre de 20 minutes à plusieurs heures, en fonction de la taille de l’annuaire Azure AD et du nombre d’utilisateurs présents dans l’étendue de l’approvisionnement.</span><span class="sxs-lookup"><span data-stu-id="5eb49-130">An initial sync can take anywhere from 20 minutes to several hours, depending on the size of the Azure AD directory and the number of users in scope for provisioning.</span></span> <span data-ttu-id="5eb49-131">Les synchronisations qui suivent la synchronisation initiale sont plus rapides, car le service d’approvisionnement stocke les filigranes qui représentent l’état des deux systèmes après la synchronisation initiale, ce qui améliore les performances des synchronisations suivantes.</span><span class="sxs-lookup"><span data-stu-id="5eb49-131">Subsequent syncs after the initial sync be faster, as the provisioning service stores watermarks that represent the state of both systems after the initial sync, improving performance of subsequent syncs.</span></span>
>
>

## <a name="cant-save-configuration-due-to-app-credentials-not-working"></a><span data-ttu-id="5eb49-132">Impossible d’enregistrer la configuration car les informations d’identification de l’application ne fonctionnent pas</span><span class="sxs-lookup"><span data-stu-id="5eb49-132">Can’t save configuration due to app credentials not working</span></span>

<span data-ttu-id="5eb49-133">Pour un fonctionnement correct de l’approvisionnement, Azure AD nécessite des informations d’identification valides qui lui permettent de se connecter à une API de gestion des utilisateurs fournie par cette application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-133">In order for provisioning to work, Azure AD requires valid credentials that allow it to connect to a user management API provided by that app.</span></span> <span data-ttu-id="5eb49-134">Si ces informations d’identification ne fonctionnent pas ou si vous ne les connaissez pas, consultez le didacticiel dédié à la configuration de cette application (décrit précédemment).</span><span class="sxs-lookup"><span data-stu-id="5eb49-134">If these credentials do not work, or you don’t know wat they are, review the tutorial for setting up this app, described previously.</span></span>

## <a name="audit-logs-say-users-are-skipped-and-not-provisioned-even-though-they-are-assigned"></a><span data-ttu-id="5eb49-135">Les journaux d’audit indiquent que les utilisateurs sont ignorés et non approvisionnés, alors qu’ils sont affectés</span><span class="sxs-lookup"><span data-stu-id="5eb49-135">Audit logs say users are skipped and not provisioned even though they are assigned</span></span>

<span data-ttu-id="5eb49-136">Lorsqu’un utilisateur apparaît comme « ignoré » dans les journaux d’audit, il est essentiel de consulter les détails du message du journal pour en déterminer la raison.</span><span class="sxs-lookup"><span data-stu-id="5eb49-136">When a user shows up as “skipped” in the audit logs, it is very important to read the extended details in the log message to determine the reason.</span></span> <span data-ttu-id="5eb49-137">Voici les raisons les plus courantes et les solutions correspondantes :</span><span class="sxs-lookup"><span data-stu-id="5eb49-137">Below are common reasons and resolutions:</span></span>

-   <span data-ttu-id="5eb49-138">**Un filtre d’étendue a été configuré** **et exclut l’utilisateur en fonction d’une valeur d’attribut**.</span><span class="sxs-lookup"><span data-stu-id="5eb49-138">**A scoping filter has been configured** **that is filtering the user out based on an attribute value**.</span></span> <span data-ttu-id="5eb49-139">Pour plus d’informations sur les filtres d’étendue, consultez <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.</span><span class="sxs-lookup"><span data-stu-id="5eb49-139">For more information on scoping filters, see <https://docs.microsoft.com/azure/active-directory/active-directory-saas-scoping-filters>.</span></span>

-   <span data-ttu-id="5eb49-140">**L’utilisateur n’est pas « autorisé de manière effective ».**</span><span class="sxs-lookup"><span data-stu-id="5eb49-140">**The user is “not effectively entitled”.**</span></span> <span data-ttu-id="5eb49-141">Ce message d’erreur indique un problème concernant l’enregistrement d’affectation d’utilisateurs stocké dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5eb49-141">If you see this specific error message, it is because there is a problem with the user assignment record stored in Azure AD.</span></span> <span data-ttu-id="5eb49-142">Pour résoudre ce problème, supprimez l’affectation de l’utilisateur (ou du groupe) à partir de l’application, puis réaffectez-le.</span><span class="sxs-lookup"><span data-stu-id="5eb49-142">To fix this issue, un-assign the user (or group) from the app, and re-assign it again.</span></span> <span data-ttu-id="5eb49-143">Pour plus d’informations sur l’affectation, consultez <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.</span><span class="sxs-lookup"><span data-stu-id="5eb49-143">For more information on assignment, see <https://docs.microsoft.com/azure/active-directory/active-directory-coreapps-assign-user-azure-portal>.</span></span>

-   <span data-ttu-id="5eb49-144">**Un attribut requis est manquant ou n’est pas indiqué pour un utilisateur.**</span><span class="sxs-lookup"><span data-stu-id="5eb49-144">**A required attribute is missing or not populated for a user.**</span></span> <span data-ttu-id="5eb49-145">Lors de la configuration de l’approvisionnement, il est important de vérifier et configurer les mappages d’attributs et les workflows qui définissent les propriétés de l’utilisateur (ou du groupe) passant d’Azure AD à l’application.</span><span class="sxs-lookup"><span data-stu-id="5eb49-145">An important thing to consider when setting up provisioning be to review and configure the attribute mappings and workflows that define which user (or group) properties flow from Azure AD to the application.</span></span> <span data-ttu-id="5eb49-146">Cela inclut la définition d’une « propriété correspondante », qui sera utilisée pour identifier de façon unique et mettre en correspondance des utilisateurs/groupes entre les deux systèmes.</span><span class="sxs-lookup"><span data-stu-id="5eb49-146">This includes setting the “matching property” that be used to uniquely identify and match users/groups between the two systems.</span></span> <span data-ttu-id="5eb49-147">Pour plus d’informations sur ce processus important, consultez la page <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.</span><span class="sxs-lookup"><span data-stu-id="5eb49-147">For more information on this important process, see <https://docs.microsoft.com/azure/active-directory/active-directory-saas-customizing-attribute-mappings>.</span></span>

   * <span data-ttu-id="5eb49-148">**Mappages d’attributs pour les groupes :** approvisionnement du nom du groupe et des détails du groupe, en plus des membres, si la prise en charge est effective pour certaines applications.</span><span class="sxs-lookup"><span data-stu-id="5eb49-148">**Attribute mappings for groups:** Provisioning of the group name and group details, in addition to the members, if supported for some applications.</span></span> <span data-ttu-id="5eb49-149">Vous pouvez activer ou désactiver cette fonctionnalité en activant ou désactivant le **mappage** pour les objets de groupe affichés dans l’onglet **Approvisionnement**.</span><span class="sxs-lookup"><span data-stu-id="5eb49-149">You can enable or disable this functionality by enabling or disabling the **Mapping** for group objects shown in the **Provisioning** tab.</span></span> <span data-ttu-id="5eb49-150">Si les groupes d’approvisionnement sont activés, veillez à passer en revue les mappages d’attributs afin de vous assurer qu’un champ approprié est utilisé pour l’« ID correspondant ».</span><span class="sxs-lookup"><span data-stu-id="5eb49-150">If provisioning groups is enabled, be sure to review the attribute mappings to ensure an appropriate field is being used for the “matching ID”.</span></span> <span data-ttu-id="5eb49-151">Il peut s’agir du nom d’affichage ou de l’alias de courrier électronique dans la mesure où le groupe et ses membres ne sont pas approvisionnés si la propriété correspondante est vide ou n’est pas remplie pour un groupe dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5eb49-151">This can be the display name or email alias), as the group and its members not be provisioned if the matching property is empty or not populated for a group in Azure AD.</span></span>

#<a name="next-steps"></a><span data-ttu-id="5eb49-152">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="5eb49-152">Next steps</span></span>
[<span data-ttu-id="5eb49-153">Automatisation de l’approvisionnement et de la l’annulation de l’approvisionnement des utilisateurs pour les applications SaaS avec Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5eb49-153">Automate User Provisioning and Deprovisioning to SaaS Applications with Azure Active Directory</span></span>](active-directory-saas-app-provisioning.md)
