---
title: "aaaHow toobuild une application qui peut se connecter n’importe quel utilisateur Azure AD | Documents Microsoft"
description: "Procédure étape par étape pour créer une application capable de connecter un utilisateur à partir de n’importe quel client Azure Active Directory, également appelée application mutualisée."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/26/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 123ea8125fa3c308ce0f124cc58e85ec28d476d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="how-toosign-in-any-azure-active-directory-ad-user-using-hello-multi-tenant-application-pattern"></a><span data-ttu-id="7dc40-103">Comment toosign dans n’importe quel utilisateur Azure Active Directory (AD) à l’aide hello modèle d’application de l’architecture mutualisée</span><span class="sxs-lookup"><span data-stu-id="7dc40-103">How toosign in any Azure Active Directory (AD) user using hello multi-tenant application pattern</span></span>
<span data-ttu-id="7dc40-104">Si vous proposez un logiciel comme un réduire d’application de Service organisations, vous pouvez configurer votre application tooaccept connexions à partir de n’importe quel client Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7dc40-104">If you offer a Software as a Service application toomany organizations, you can configure your application tooaccept sign-ins from any Azure AD tenant.</span></span>  <span data-ttu-id="7dc40-105">Dans Azure AD, ce processus s’appelle créer une application mutualisée.</span><span class="sxs-lookup"><span data-stu-id="7dc40-105">In Azure AD this is called making your application multi-tenant.</span></span>  <span data-ttu-id="7dc40-106">Les utilisateurs de n’importe quel client Azure AD seront en mesure de toosign dans l’application tooyour après consentez toouse leur compte avec votre application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-106">Users in any Azure AD tenant will be able toosign in tooyour application after consenting toouse their account with your application.</span></span>  

<span data-ttu-id="7dc40-107">Si vous avez une application existante qui possède son propre système de compte, ou prend en charge d’autres types de connexion auprès d’autres fournisseurs cloud, l’ajout de la connexion Azure AD à partir de n’importe quel client est simple.</span><span class="sxs-lookup"><span data-stu-id="7dc40-107">If you have an existing application that has its own account system, or supports other kinds of sign-in from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="7dc40-108">Inscrivez simplement votre application, ajoutez le code de connexion via OAuth2, OpenID Connect ou SAML, et placez un bouton « Se connecter avec Microsoft » dans votre application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a "Sign In with Microsoft" button on your application.</span></span> <span data-ttu-id="7dc40-109">Cliquez sur hello suivant toolearn bouton plus sur la personnalisation de votre application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-109">Click hello following button toolearn more about branding your application.</span></span>

<span data-ttu-id="7dc40-110">[![Bouton d’inscription][Connexion à AAD]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="7dc40-110">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="7dc40-111">Cet article suppose que vous êtes déjà familiarisé avec la création d’une application à client unique pour Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7dc40-111">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span>  <span data-ttu-id="7dc40-112">Si vous n’êtes pas le cas, head sauvegarde toohello [page d’accueil du guide de développement] [ AAD-Dev-Guide] et essayez l’une de nos Démarrages rapides !</span><span class="sxs-lookup"><span data-stu-id="7dc40-112">If you’re not, head back up toohello [developer guide homepage][AAD-Dev-Guide] and try one of our quick starts!</span></span>

<span data-ttu-id="7dc40-113">Il existe quatre étapes simples tooconvert votre application dans une application de plusieurs locataire Azure AD :</span><span class="sxs-lookup"><span data-stu-id="7dc40-113">There are four simple steps tooconvert your application into an Azure AD multi-tenant app:</span></span>

1. <span data-ttu-id="7dc40-114">Mettre à jour votre application d’enregistrement toobe architecture mutualisée</span><span class="sxs-lookup"><span data-stu-id="7dc40-114">Update your application registration toobe multi-tenant</span></span>
2. <span data-ttu-id="7dc40-115">Mettre à jour votre /common de code toosend demandes toohello point de terminaison</span><span class="sxs-lookup"><span data-stu-id="7dc40-115">Update your code toosend requests toohello /common endpoint</span></span> 
3. <span data-ttu-id="7dc40-116">Mettre à jour votre code toohandle plusieurs valeurs de l’émetteur</span><span class="sxs-lookup"><span data-stu-id="7dc40-116">Update your code toohandle multiple issuer values</span></span>
4. <span data-ttu-id="7dc40-117">Comprendre le consentement de l’utilisateur et de l’administrateur et application des modifications de code appropriées</span><span class="sxs-lookup"><span data-stu-id="7dc40-117">Understand user and admin consent and make appropriate code changes</span></span>

<span data-ttu-id="7dc40-118">Examinons chaque étape en détail.</span><span class="sxs-lookup"><span data-stu-id="7dc40-118">Let’s look at each step in detail.</span></span> <span data-ttu-id="7dc40-119">Vous pouvez également accéder directement trop[cette liste d’exemples d’architecture mutualisées][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="7dc40-119">You can also jump straight too[this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-toobe-multi-tenant"></a><span data-ttu-id="7dc40-120">Architecture mutualisée de mise à jour d’enregistrement toobe</span><span class="sxs-lookup"><span data-stu-id="7dc40-120">Update registration toobe multi-tenant</span></span>
<span data-ttu-id="7dc40-121">Par défaut, les inscriptions web app/API dans Azure AD sont de type client unique.</span><span class="sxs-lookup"><span data-stu-id="7dc40-121">By default, web app/API registrations in Azure AD are single tenant.</span></span>  <span data-ttu-id="7dc40-122">Rendez votre inscription mutualisée en recherche basculer hello » multiples avec clients » sur la page des propriétés de l’enregistrement de l’application Bonjour hello [portail Azure] [ AZURE-portal] et en lui affectant trop « Oui ».</span><span class="sxs-lookup"><span data-stu-id="7dc40-122">You can make your registration multi-tenant by finding hello “Multi-Tenanted” switch on hello properties page of your application registration in hello [Azure portal][AZURE-portal] and setting it too“Yes”.</span></span>

<span data-ttu-id="7dc40-123">Notez également, avant d’effectuer une application mutualisée, Azure AD nécessite hello URI ID d’application de toobe d’application hello globalement unique.</span><span class="sxs-lookup"><span data-stu-id="7dc40-123">Also note, before an application can be made multi-tenant, Azure AD requires hello App ID URI of hello application toobe globally unique.</span></span> <span data-ttu-id="7dc40-124">Hello URI ID d’application est une des manières de hello qu'une application est identifiée dans les messages de protocole.</span><span class="sxs-lookup"><span data-stu-id="7dc40-124">hello App ID URI is one of hello ways an application is identified in protocol messages.</span></span>  <span data-ttu-id="7dc40-125">Pour une application à locataire unique, il est suffisant pour toobe d’URI ID d’application hello unique au sein de ce client.</span><span class="sxs-lookup"><span data-stu-id="7dc40-125">For a single tenant application, it is sufficient for hello App ID URI toobe unique within that tenant.</span></span>  <span data-ttu-id="7dc40-126">Pour une application mutualisée, il doit être globalement unique pour Azure Active Directory puisse trouver l’application hello sur tous les locataires.</span><span class="sxs-lookup"><span data-stu-id="7dc40-126">For a multi-tenant application, it must be globally unique so Azure AD can find hello application across all tenants.</span></span>  <span data-ttu-id="7dc40-127">L’unicité globale est appliquée en demandant hello URI ID d’application toohave un nom d’hôte qui correspond à un domaine vérifié du locataire Azure AD de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-127">Global uniqueness is enforced by requiring hello App ID URI toohave a host name that matches a verified domain of hello Azure AD tenant.</span></span>  <span data-ttu-id="7dc40-128">Par exemple, si le nom hello de votre client a été contoso.onmicrosoft.com puis valide URI ID d’application serait `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="7dc40-128">For example, if hello name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span>  <span data-ttu-id="7dc40-129">Si votre client possède le domaine vérifié `contoso.com`, un URI ID d’application valide serait alors `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="7dc40-129">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span>  <span data-ttu-id="7dc40-130">Définition d’une application en tant qu’architecture mutualisée échouera si hello URI ID d’application ne suit pas ce modèle.</span><span class="sxs-lookup"><span data-stu-id="7dc40-130">Setting an application as multi-tenant will fail if hello App ID URI doesn’t follow this pattern.</span></span>

<span data-ttu-id="7dc40-131">Les inscriptions clientes natives sont mutualisées par défaut.</span><span class="sxs-lookup"><span data-stu-id="7dc40-131">Native client registrations are multi-tenant by default.</span></span>  <span data-ttu-id="7dc40-132">Vous n’avez pas besoin tootake tout toomake action native client application d’enregistrement mutualisée.</span><span class="sxs-lookup"><span data-stu-id="7dc40-132">You don’t need tootake any action toomake a native client application registration multi-tenant.</span></span>

## <a name="update-your-code-toosend-requests-toocommon"></a><span data-ttu-id="7dc40-133">Mettre à jour votre code toosend demandes trop commun</span><span class="sxs-lookup"><span data-stu-id="7dc40-133">Update your code toosend requests too/common</span></span>
<span data-ttu-id="7dc40-134">Dans une application à locataire unique, les demandes de connexion sont envoyés connexion point de terminaison du client toohello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-134">In a single tenant application, sign-in requests are sent toohello tenant’s sign-in endpoint.</span></span> <span data-ttu-id="7dc40-135">Par exemple, pour contoso.onmicrosoft.com point de terminaison hello serait :</span><span class="sxs-lookup"><span data-stu-id="7dc40-135">For example, for contoso.onmicrosoft.com hello endpoint would be:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="7dc40-136">Les demandes envoyées de point de terminaison du locataire tooa peut se connecter les utilisateurs (ou invités) dans ce tooapplications locataire dans ce locataire.</span><span class="sxs-lookup"><span data-stu-id="7dc40-136">Requests sent tooa tenant’s endpoint can sign in users (or guests) in that tenant tooapplications in that tenant.</span></span>  <span data-ttu-id="7dc40-137">Avec une application mutualisée, application hello ne sait pas au préalable quel utilisateur de hello client provient, afin que vous ne pouvez pas envoyer des demandes point de terminaison du client tooa.</span><span class="sxs-lookup"><span data-stu-id="7dc40-137">With a multi-tenant application, hello application doesn’t know up front what tenant hello user is from, so you can’t send requests tooa tenant’s endpoint.</span></span>  <span data-ttu-id="7dc40-138">Au lieu de cela, les demandes sont envoyées tooan de point de terminaison qui sur AD Azure tous les locataires :</span><span class="sxs-lookup"><span data-stu-id="7dc40-138">Instead, requests are sent tooan endpoint that multiplexes across all Azure AD tenants:</span></span>

    https://login.microsoftonline.com/common

<span data-ttu-id="7dc40-139">Lorsque Azure AD reçoit une demande sur hello/point de terminaison commun, il connecte les utilisateur hello et comme une conséquence détecte utilisateur hello client provient.</span><span class="sxs-lookup"><span data-stu-id="7dc40-139">When Azure AD receives a request on hello /common endpoint, it signs hello user in and as a consequence discovers which tenant hello user is from.</span></span>  <span data-ttu-id="7dc40-140">Hello/point de terminaison commun fonctionne avec tous les protocoles d’authentification hello pris en charge par Azure AD : OpenID Connect, OAuth 2.0, SAML 2.0 et WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="7dc40-140">hello /common endpoint works with all of hello authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="7dc40-141">application Hello réponse de connexion toohello puis contient un jeton représentant hello utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-141">hello sign-in response toohello application then contains a token representing hello user.</span></span>  <span data-ttu-id="7dc40-142">valeur d’émetteur Hello dans le jeton de hello indique une application quel utilisateur de hello du client à partir de.</span><span class="sxs-lookup"><span data-stu-id="7dc40-142">hello issuer value in hello token tells an application what tenant hello user is from.</span></span>  <span data-ttu-id="7dc40-143">Lorsqu’une réponse est reçue hello/point de terminaison commun, valeur d’émetteur hello dans le jeton de hello correspondront locataire toohello de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-143">When a response returns from hello /common endpoint, hello issuer value in hello token will correspond toohello user’s tenant.</span></span>  <span data-ttu-id="7dc40-144">Il est important de toonote hello/point de terminaison commun n’est pas un client et n’est pas un émetteur, elle est simplement un multiplexeur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-144">It’s important toonote hello /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span>  <span data-ttu-id="7dc40-145">Lorsque vous utilisez /common, hello logique dans les jetons de toovalidate de votre application doit toobe mis à jour tootake cela en compte.</span><span class="sxs-lookup"><span data-stu-id="7dc40-145">When using /common, hello logic in your application toovalidate tokens needs toobe updated tootake this into account.</span></span> 

<span data-ttu-id="7dc40-146">Comme mentionnées précédemment, mutualisées applications doivent également fournir une expérience utilisateur cohérente pour les utilisateurs, suivant hello application Azure AD instructions de personnalisation.</span><span class="sxs-lookup"><span data-stu-id="7dc40-146">As mentioned earlier, multi-tenant applications should also provide a consistent sign-in experience for users, following hello Azure AD application branding guidelines.</span></span> <span data-ttu-id="7dc40-147">Cliquez sur hello suivant toolearn bouton plus sur la personnalisation de votre application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-147">Click hello following button toolearn more about branding your application.</span></span>

<span data-ttu-id="7dc40-148">[![Bouton d’inscription][Connexion à AAD]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="7dc40-148">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="7dc40-149">Examinons une utilisation hello de hello /common point de terminaison et l’implémentation de votre code plus en détail.</span><span class="sxs-lookup"><span data-stu-id="7dc40-149">Let’s take a look at hello use of hello /common endpoint and your code implementation in more detail.</span></span>

## <a name="update-your-code-toohandle-multiple-issuer-values"></a><span data-ttu-id="7dc40-150">Mettre à jour votre code toohandle plusieurs valeurs de l’émetteur</span><span class="sxs-lookup"><span data-stu-id="7dc40-150">Update your code toohandle multiple issuer values</span></span>
<span data-ttu-id="7dc40-151">Les applications web et les API reçoivent et valident les jetons d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7dc40-151">Web applications and web APIs receive and validate tokens from Azure AD.</span></span>  

> [!NOTE]
> <span data-ttu-id="7dc40-152">Alors que les applications clientes natives demander et recevoir des jetons d’Azure AD, ils le font dans ce toosend les tooAPIs, où ils sont validés.</span><span class="sxs-lookup"><span data-stu-id="7dc40-152">While native client applications request and receive tokens from Azure AD, they do so toosend them tooAPIs, where they are validated.</span></span>  <span data-ttu-id="7dc40-153">Les applications natives ne valident pas les jetons et doivent les traiter comme des valeurs opaques.</span><span class="sxs-lookup"><span data-stu-id="7dc40-153">Native applications do not validate tokens and must treat them as opaque.</span></span>
> 
> 

<span data-ttu-id="7dc40-154">Examinons la manière dont une application valide les jetons qu’elle reçoit d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7dc40-154">Let’s look at how an application validates tokens it receives from Azure AD.</span></span>  <span data-ttu-id="7dc40-155">Une application à client unique sélectionne généralement une valeur de point de terminaison de type :</span><span class="sxs-lookup"><span data-stu-id="7dc40-155">A single tenant application will normally take an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="7dc40-156">et l’utiliser tooconstruct une URL de métadonnées (dans ce cas, OpenID Connect) telles que :</span><span class="sxs-lookup"><span data-stu-id="7dc40-156">and use it tooconstruct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="7dc40-157">toodownload deux informations essentielles qui sont des jetons de toovalidate utilisé : client de hello de la signature du clés et la valeur de l’émetteur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-157">toodownload two critical pieces of information that are used toovalidate tokens:  hello tenant’s signing keys and issuer value.</span></span>  <span data-ttu-id="7dc40-158">Chaque locataire Azure AD a une valeur d’émetteur unique sous forme de hello :</span><span class="sxs-lookup"><span data-stu-id="7dc40-158">Each Azure AD tenant has a unique issuer value of hello form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="7dc40-159">où la valeur GUID de hello est version rename-safe de hello d’ID du hello client de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-159">where hello GUID value is hello rename-safe version of hello tenant ID of hello tenant.</span></span>  <span data-ttu-id="7dc40-160">Si vous cliquez sur hello précédant le lien de métadonnées pour `contoso.onmicrosoft.com`, vous pouvez voir cette valeur de l’émetteur dans le document de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-160">If you click on hello preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in hello document.</span></span>

<span data-ttu-id="7dc40-161">Lorsqu’une application à locataire unique valide un jeton, il vérifie la signature hello du jeton hello contre hello clés à partir du document de métadonnées hello de signature.</span><span class="sxs-lookup"><span data-stu-id="7dc40-161">When a single tenant application validates a token, it checks hello signature of hello token against hello signing keys from hello metadata document.</span></span> <span data-ttu-id="7dc40-162">Ainsi, il toomake valeur d’émetteur hello que hello correspondances jeton Bonjour un qui a été trouvé dans le document de métadonnées hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-162">This allows it toomake sure hello issuer value in hello token matches hello one that was found in hello metadata document.</span></span>

<span data-ttu-id="7dc40-163">Depuis hello/common point de terminaison ne correspond pas tooa client et n’est pas un émetteur, lorsque vous examinez la valeur d’émetteur hello dans les métadonnées de hello pour/communes qu’il a une URL basée sur un modèle au lieu d’une valeur réelle :</span><span class="sxs-lookup"><span data-stu-id="7dc40-163">Since hello /common endpoint doesn’t correspond tooa tenant and isn’t an issuer, when you examine hello issuer value in hello metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="7dc40-164">Par conséquent, une application mutualisée ne peut pas valider les jetons simplement en mettant en correspondance la valeur d’émetteur hello dans les métadonnées de hello avec hello `issuer` valeur de jeton de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-164">Therefore, a multi-tenant application can’t validate tokens just by matching hello issuer value in hello metadata with hello `issuer` value in hello token.</span></span>  <span data-ttu-id="7dc40-165">Une application mutualisée a besoin d’une logique toodecide les valeurs de l’émetteur sont valides et qui sont pas, selon les locataire hello partie ID de valeur d’émetteur hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-165">A multi-tenant application needs logic toodecide which issuer values are valid and which are not, based on hello tenant ID portion of hello issuer value.</span></span>  

<span data-ttu-id="7dc40-166">Par exemple, si une application mutualisée autorise uniquement les connexion des clients spécifiques qui se sont inscrites pour leur service, puis il doit vérifier valeur d’émetteur hello ou hello `tid` toomake de jeton hello que ce client se trouve dans leur liste de valeur de revendication abonnés.</span><span class="sxs-lookup"><span data-stu-id="7dc40-166">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either hello issuer value or hello `tid` claim value in hello token toomake sure that tenant is in their list of subscribers.</span></span>  <span data-ttu-id="7dc40-167">Si une application mutualisée traite avec des personnes uniquement et ne rend pas toutes les décisions d’accès basées sur les clients, il peut ignorer hello émetteur valeur complètement.</span><span class="sxs-lookup"><span data-stu-id="7dc40-167">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore hello issuer value altogether.</span></span>

<span data-ttu-id="7dc40-168">Dans les exemples d’architecture mutualisée hello Bonjour [connexes contenu](#related-content) section à fin hello de cet article, la validation de l’émetteur est désactivé tooenable tout toosign de locataire Azure AD dans.</span><span class="sxs-lookup"><span data-stu-id="7dc40-168">In hello multi-tenant samples in hello [Related Content](#related-content) section at hello end of this article, issuer validation is disabled tooenable any Azure AD tenant toosign in.</span></span>

<span data-ttu-id="7dc40-169">Maintenant examinons confort hello pour les utilisateurs qui se connectent à des applications de toomulti-client.</span><span class="sxs-lookup"><span data-stu-id="7dc40-169">Now let’s look at hello user experience for users that are signing in toomulti-tenant applications.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="7dc40-170">Comprendre le consentement de l’utilisateur et de l’administrateur</span><span class="sxs-lookup"><span data-stu-id="7dc40-170">Understanding user and admin consent</span></span>
<span data-ttu-id="7dc40-171">Pour un utilisateur toosign dans l’application tooan dans Azure AD, application hello doit être représentée dans le locataire de l’utilisateur hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-171">For a user toosign in tooan application in Azure AD, hello application must be represented in hello user’s tenant.</span></span>  <span data-ttu-id="7dc40-172">Ainsi, organisation de hello toodo choses comme appliquer des stratégies lorsque des utilisateurs à partir de leurs clients se connectent toohello application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-172">This allows hello organization toodo things like apply unique policies when users from their tenant sign in toohello application.</span></span>  <span data-ttu-id="7dc40-173">Pour une application à locataire unique, cet enregistrement est simple ; Il a hello qui se produit lorsque vous enregistrez l’application hello Bonjour [portail Azure][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="7dc40-173">For a single tenant application, this registration is simple; it’s hello one that happens when you register hello application in hello [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="7dc40-174">Pour une application mutualisée, l’inscription initiale de hello pour une application hello vit dans le locataire d’Azure AD hello utilisé par le développeur de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-174">For a multi-tenant application, hello initial registration for hello application lives in hello Azure AD tenant used by hello developer.</span></span>  <span data-ttu-id="7dc40-175">Quand un utilisateur à partir d’un autre client s’inscrit dans l’application toohello pour hello première fois, Azure AD vous demande les autorisations de toohello tooconsent demandées par l’application hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-175">When a user from a different tenant signs in toohello application for hello first time, Azure AD asks them tooconsent toohello permissions requested by hello application.</span></span>  <span data-ttu-id="7dc40-176">Si ils donnent leur consentement, une représentation de l’application hello appelé un *principal du service* est créé dans hello du client de l’utilisateur et de connexion peut continuer.</span><span class="sxs-lookup"><span data-stu-id="7dc40-176">If they consent, then a representation of hello application called a *service principal* is created in hello user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="7dc40-177">Une délégation est également créée dans le répertoire hello qui enregistre hello consentement toohello application utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-177">A delegation is also created in hello directory that records hello user’s consent toohello application.</span></span> <span data-ttu-id="7dc40-178">Consultez [les objets de Principal du Service et Application] [ AAD-App-SP-Objects] pour plus d’informations sur l’application hello des objets d’Application et de principal du service, et comment elles rapportent tooeach autres.</span><span class="sxs-lookup"><span data-stu-id="7dc40-178">See [Application Objects and Service Principal Objects][AAD-App-SP-Objects] for details on hello application's Application and ServicePrincipal objects, and how they relate tooeach other.</span></span>

![Consentement toosingle de couche application][Consent-Single-Tier] 

<span data-ttu-id="7dc40-180">Cette expérience de consentement est affectée par les autorisations de hello demandées par l’application hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-180">This consent experience is affected by hello permissions requested by hello application.</span></span>  <span data-ttu-id="7dc40-181">Azure AD prend en charge deux types d’autorisations, application seule et application déléguée :</span><span class="sxs-lookup"><span data-stu-id="7dc40-181">Azure AD supports two kinds of permissions, app-only and delegated:</span></span>

* <span data-ttu-id="7dc40-182">Une autorisation déléguée accorde une tooact de capacité application hello comme un utilisateur connecté pour un sous-ensemble de l’utilisateur de hello hello choses.</span><span class="sxs-lookup"><span data-stu-id="7dc40-182">A delegated permission grants an application hello ability tooact as a signed in user for a subset of hello things hello user can do.</span></span>  <span data-ttu-id="7dc40-183">Par exemple, vous pouvez accorder une application Bonjour autorisation déléguée tooread Bonjour signé dans un calendrier de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-183">For example, you can grant an application hello delegated permission tooread hello signed in user’s calendar.</span></span>
* <span data-ttu-id="7dc40-184">Une application uniquement l’autorisation directement identité toohello de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-184">An app-only permission is granted directly toohello identity of hello application.</span></span>  <span data-ttu-id="7dc40-185">Par exemple, vous pouvez accorder une liste des tooread hello application hello application seule autorisation des utilisateurs dans un client, quelle que soit l’application de toohello qui est connecté.</span><span class="sxs-lookup"><span data-stu-id="7dc40-185">For example, you can grant an application hello app-only permission tooread hello list of users in a tenant, regardless of who is signed in toohello application.</span></span>

<span data-ttu-id="7dc40-186">Certaines autorisations peuvent être consenti tooby un utilisateur standard, tandis que d’autres nécessitent le consentement de l’administrateur d’un client.</span><span class="sxs-lookup"><span data-stu-id="7dc40-186">Some permissions can be consented tooby a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="7dc40-187">Consentement de l’administrateur</span><span class="sxs-lookup"><span data-stu-id="7dc40-187">Admin consent</span></span>
<span data-ttu-id="7dc40-188">Les autorisations application seule nécessitent toujours le consentement de l’administrateur d’un client.</span><span class="sxs-lookup"><span data-stu-id="7dc40-188">App-only permissions always require a tenant administrator’s consent.</span></span>  <span data-ttu-id="7dc40-189">Si votre application demande une autorisation d’application uniquement, et un utilisateur tente de toosign dans toohello application, un message d’erreur s’affichera indiquant que les utilisateurs hello n’est pas en mesure de tooconsent.</span><span class="sxs-lookup"><span data-stu-id="7dc40-189">If your application requests an app-only permission and a user tries toosign in toohello application, an error message will be displayed saying hello user isn’t able tooconsent.</span></span>

<span data-ttu-id="7dc40-190">Certaines autorisations déléguées nécessitent également le consentement de l’administrateur d’un client.</span><span class="sxs-lookup"><span data-stu-id="7dc40-190">Certain delegated permissions also require a tenant administrator’s consent.</span></span>  <span data-ttu-id="7dc40-191">Par exemple, hello capacité toowrite arrière tooAzure AD en tant qu’utilisateur connecté de hello requiert le consentement de l’administrateur d’un client.</span><span class="sxs-lookup"><span data-stu-id="7dc40-191">For example, hello ability toowrite back tooAzure AD as hello signed in user requires a tenant administrator’s consent.</span></span>  <span data-ttu-id="7dc40-192">Comme les autorisations d’application uniquement, si un utilisateur ordinaire tente toosign dans application tooan qui demande une autorisation déléguée qui requiert le consentement de l’administrateur, votre application reçoit une erreur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-192">Like app-only permissions, if an ordinary user tries toosign in tooan application that requests a delegated permission that requires administrator consent, your application will receive an error.</span></span>  <span data-ttu-id="7dc40-193">Si une autorisation nécessite ou non consentement de l’administrateur est déterminé par le développeur hello qui a publié les ressources hello et se trouve dans la documentation de hello pour la ressource de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-193">Whether or not a permission requires admin consent is determined by hello developer that published hello resource, and can be found in hello documentation for hello resource.</span></span>  <span data-ttu-id="7dc40-194">Liens tootopics décrivant les autorisations disponibles hello pour hello API Azure AD Graph et l’API Graph sont Bonjour [connexes contenu](#related-content) section de cet article.</span><span class="sxs-lookup"><span data-stu-id="7dc40-194">Links tootopics describing hello available permissions for hello Azure AD Graph API and Microsoft Graph API are in hello [Related Content](#related-content) section of this article.</span></span>

<span data-ttu-id="7dc40-195">Si votre application utilise des autorisations qui nécessitent le consentement de l’administrateur, vous devez toohave un mouvement tel qu’un bouton ou un lien sur lequel hello admin action peut être lancée hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-195">If your application uses permissions that require admin consent, you need toohave a gesture such as a button or link where hello admin can initiate hello action.</span></span>  <span data-ttu-id="7dc40-196">demande de Hello votre application envoie pour cette action est une demande d’autorisation OAuth2/OpenID Connect habituelle, mais qui inclut également hello `prompt=admin_consent` paramètre de chaîne de requête.</span><span class="sxs-lookup"><span data-stu-id="7dc40-196">hello request your application sends for this action is a usual OAuth2/OpenID Connect authorization request, but that also includes hello `prompt=admin_consent` query string parameter.</span></span>  <span data-ttu-id="7dc40-197">Une fois hello administrateur a donné son consentement et principal du service hello est créé dans le locataire de hello, demandes de connexion ultérieures n’avez pas besoin de hello `prompt=admin_consent` paramètre.</span><span class="sxs-lookup"><span data-stu-id="7dc40-197">Once hello admin has consented and hello service principal is created in hello customer’s tenant, subsequent sign-in requests do not need hello `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="7dc40-198">Étant donné que l’administrateur de hello a décidé hello demandé que les autorisations sont acceptables, aucun autre utilisateur de client de hello ne sera invité à donner son consentement à partir de là.</span><span class="sxs-lookup"><span data-stu-id="7dc40-198">Since hello administrator has decided hello requested permissions are acceptable, no other users in hello tenant will be prompted for consent from that point forward.</span></span>

<span data-ttu-id="7dc40-199">Hello `prompt=admin_consent` paramètre peut également être utilisé par les applications qui demandent des autorisations qui ne nécessitent pas de consentement de l’administrateur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-199">hello `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="7dc40-200">Cette opération est effectuée lorsque hello application requiert une expérience où hello tenant admin « inscrit » une fois et aucun autre sont invités à donner son consentement à partir de ce point sur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-200">This is done when hello applicaton requires an experience where hello tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="7dc40-201">Si une application requiert le consentement de l’administrateur, et un administrateur se connecte en mais hello `prompt=admin_consent` paramètre n’est pas envoyé, hello admin sera consentement correctement toohello application **uniquement pour leur compte d’utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="7dc40-201">If an application requires admin consent, and an admin signs in but hello `prompt=admin_consent` parameter is not sent, hello admin will successfully consent toohello application **only for their user account**.</span></span>  <span data-ttu-id="7dc40-202">Les utilisateurs standard ne seront toujours pas en mesure de toosign dans et application toohello de consentement.</span><span class="sxs-lookup"><span data-stu-id="7dc40-202">Regular users will still not be able toosign in and consent toohello application.</span></span>  <span data-ttu-id="7dc40-203">Cela est utile si vous souhaitez toogive hello client administrateur hello capacité tooexplore votre application avant d’autoriser l’accès aux autres utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="7dc40-203">This is useful if you want toogive hello tenant administrator hello ability tooexplore your application before allowing other users access.</span></span>

<span data-ttu-id="7dc40-204">Un administrateur peut interdire hello pour les utilisateurs normaux tooconsent tooapplications.</span><span class="sxs-lookup"><span data-stu-id="7dc40-204">A tenant administrator can disable hello ability for regular users tooconsent tooapplications.</span></span>  <span data-ttu-id="7dc40-205">Si cette fonctionnalité est désactivée, consentement de l’administrateur est toujours requis pour hello application toobe est défini dans le locataire de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-205">If this capability is disabled, admin consent is always required for hello application toobe set up in hello tenant.</span></span>  <span data-ttu-id="7dc40-206">Si vous souhaitez tootest votre application avec le consentement d’utilisateur normal désactivée, vous trouverez hello commutateur de la configuration de client de hello Azure AD section de configuration de hello [portail Azure][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="7dc40-206">If you want tootest your application with regular user consent disabled, you can find hello configuration switch in hello Azure AD tenant configuration section of hello [Azure portal][AZURE-portal].</span></span>

> [!NOTE]
> <span data-ttu-id="7dc40-207">Certaines applications cherchent à une expérience où utilisateurs normaux sont en mesure de tooconsent initialement et versions ultérieure application hello peut impliquer administrateur de hello et demander des autorisations qui nécessitent le consentement de l’administrateur.</span><span class="sxs-lookup"><span data-stu-id="7dc40-207">Some applications want an experience where regular users are able tooconsent initially, and later hello application can involve hello administrator and request permissions that require admin consent.</span></span>  <span data-ttu-id="7dc40-208">Il est sans toodo de façon ceci avec un enregistrement unique d’application dans Azure AD aujourd'hui.</span><span class="sxs-lookup"><span data-stu-id="7dc40-208">There is no way toodo this with a single application registration in Azure AD today.</span></span>  <span data-ttu-id="7dc40-209">point de terminaison v2 Hello à venir Azure AD permettra applications autorisations toorequest lors de l’exécution, au lieu d’au moment de l’inscription, qui activera ce scénario.</span><span class="sxs-lookup"><span data-stu-id="7dc40-209">hello upcoming Azure AD v2 endpoint will allow applications toorequest permissions at runtime, instead of at registration time, which will enable this scenario.</span></span>  <span data-ttu-id="7dc40-210">Pour plus d’informations, consultez hello [Guide du développeur v2 modèle d’application Azure AD][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="7dc40-210">For more information, see hello [Azure AD App Model v2 Developer Guide][AAD-V2-Dev-Guide].</span></span>
> 
> 

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="7dc40-211">Consentement et applications multiniveau</span><span class="sxs-lookup"><span data-stu-id="7dc40-211">Consent and multi-tier applications</span></span>
<span data-ttu-id="7dc40-212">Votre application peut comporter plusieurs niveaux, chacun représenté par sa propre inscription dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7dc40-212">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span>  <span data-ttu-id="7dc40-213">Par exemple, une application native qui appelle une API web ou une application web qui appelle une autre API web.</span><span class="sxs-lookup"><span data-stu-id="7dc40-213">For example, a native application that calls a web API, or a web application that calls a web API.</span></span>  <span data-ttu-id="7dc40-214">Dans ces deux cas, client hello (application native ou web) demande de ressource de hello autorisations toocall (API web).</span><span class="sxs-lookup"><span data-stu-id="7dc40-214">In both of these cases, hello client (native app or web app) requests permissions toocall hello resource (web API).</span></span>  <span data-ttu-id="7dc40-215">Pour hello client toobe consenti correctement dans un affichage du locataire, toutes les ressources toowhich, il demande des autorisations doit déjà exister dans du hello locataire.</span><span class="sxs-lookup"><span data-stu-id="7dc40-215">For hello client toobe successfully consented into a customer’s tenant, all resources toowhich it requests permissions must already exist in hello customer’s tenant.</span></span>  <span data-ttu-id="7dc40-216">Si cette condition n’est pas remplie, Azure AD renvoie une erreur qui hello ressource doit être ajoutée en premier.</span><span class="sxs-lookup"><span data-stu-id="7dc40-216">If this condition isn’t met, Azure AD will return an error that hello resource must be added first.</span></span>

<span data-ttu-id="7dc40-217">**Plusieurs niveaux dans un seul client**</span><span class="sxs-lookup"><span data-stu-id="7dc40-217">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="7dc40-218">Cela peut poser problème si votre application logique implique deux ou plusieurs inscriptions d’application, par exemple un client et une ressource distincts.</span><span class="sxs-lookup"><span data-stu-id="7dc40-218">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span>  <span data-ttu-id="7dc40-219">Comment obtenir les ressources hello dans locataire hello premier ?</span><span class="sxs-lookup"><span data-stu-id="7dc40-219">How do you get hello resource into hello customer tenant first?</span></span>  <span data-ttu-id="7dc40-220">Azure AD aborde ce cas en activant client et la ressource toobe consenti en une seule étape.</span><span class="sxs-lookup"><span data-stu-id="7dc40-220">Azure AD covers this case by enabling client and resource toobe consented in a single step.</span></span> <span data-ttu-id="7dc40-221">utilisateur de Hello voit hello la somme totale des autorisations hello demandé par le client de hello et ressources sur la page de consentement hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-221">hello user sees hello sum total of hello permissions requested by both hello client and resource on hello consent page.</span></span>  <span data-ttu-id="7dc40-222">tooenable ce comportement, inscription d’application de la ressource hello doit inclure l’ID d’application du client hello comme un `knownClientApplications` dans son manifeste d’application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-222">tooenable this behavior, hello resource’s application registration must include hello client’s App ID as a `knownClientApplications` in its application manifest.</span></span>  <span data-ttu-id="7dc40-223">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="7dc40-223">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="7dc40-224">Cette propriété peut être mis à jour via la ressource de hello [manifeste de l’application][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="7dc40-224">This property can be updated via hello resource [application’s manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="7dc40-225">Cela est illustré dans un client natif à plusieurs niveaux appelant exemple web API Bonjour [connexes contenu](#related-content) section à fin hello de cet article.</span><span class="sxs-lookup"><span data-stu-id="7dc40-225">This is demonstrated in a multi-tier native client calling web API sample in hello [Related Content](#related-content) section at hello end of this article.</span></span> <span data-ttu-id="7dc40-226">Hello diagramme suivant fournit une vue d’ensemble de consentement pour une application à plusieurs niveaux enregistrée dans un client unique :</span><span class="sxs-lookup"><span data-stu-id="7dc40-226">hello following diagram provides an overview of consent for a multi-tier app registered in a single tenant :</span></span>

![Consentement toomulti couche client connus application][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="7dc40-228">**Plusieurs niveaux dans plusieurs clients**</span><span class="sxs-lookup"><span data-stu-id="7dc40-228">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="7dc40-229">Un cas similaire se produit si différents niveaux de hello d’une application sont inscrits dans les différents clients.</span><span class="sxs-lookup"><span data-stu-id="7dc40-229">A similar case happens if hello different tiers of an application are registered in different tenants.</span></span>  <span data-ttu-id="7dc40-230">Par exemple, considérez cas hello de la création d’une application cliente native qui appelle hello Office 365 Exchange Online API.</span><span class="sxs-lookup"><span data-stu-id="7dc40-230">For example, consider hello case of building a native client application that calls hello Office 365 Exchange Online API.</span></span>  <span data-ttu-id="7dc40-231">toodevelop hello natif application et versions ultérieur pour toorun d’application native hello dans un affichage du locataire, le principal du service Exchange Online hello doit être présent.</span><span class="sxs-lookup"><span data-stu-id="7dc40-231">toodevelop hello native application, and later for hello native application toorun in a customer’s tenant, hello Exchange Online service principal must be present.</span></span>  <span data-ttu-id="7dc40-232">Dans ce cas, hello développeur et le client doivent acheter Exchange Online pour toobe principal du service hello créé dans leurs clients.</span><span class="sxs-lookup"><span data-stu-id="7dc40-232">In this case, hello developer and customer must purchase Exchange Online for hello service principal toobe created in their tenants.</span></span>  

<span data-ttu-id="7dc40-233">Dans les cas de hello d’une API générée par une organisation autre que Microsoft, développeur de hello Hello API doit tooprovide un moyen pour leur application de hello tooconsent clients dans les clients de leurs clients.</span><span class="sxs-lookup"><span data-stu-id="7dc40-233">In hello case of an API built by an organization other than Microsoft, hello developer of hello API needs tooprovide a way for their customers tooconsent hello application into their customers' tenants.</span></span> <span data-ttu-id="7dc40-234">Hello recommandé est de conception pour Bonjour 3e partie développeur toobuild Bonjour API tel qu’il peut également fonctionner comme tooimplement d’un client web d’inscription :</span><span class="sxs-lookup"><span data-stu-id="7dc40-234">hello recommended design is for hello 3rd party developer toobuild hello API such that it can also function as a web client tooimplement sign-up :</span></span>

1. <span data-ttu-id="7dc40-235">Suivez hello hello de tooensure antérieur sections API implémente les spécifications de hello application mutualisée/code d’enregistrement</span><span class="sxs-lookup"><span data-stu-id="7dc40-235">Follow hello earlier sections tooensure hello API implements hello multi-tenant application registration/code requirements</span></span>
2. <span data-ttu-id="7dc40-236">En outre tooexposing hello API étendues et des rôles, vérifiez l’inscription de hello comprend hello « se connecter et lire le profil de l’utilisateur « autorisation Azure AD (fournie par défaut)</span><span class="sxs-lookup"><span data-stu-id="7dc40-236">In addition tooexposing hello API's scopes/roles, ensure hello registration includes hello "Sign in and read user profile" Azure AD permission (provided by default)</span></span>
3. <span data-ttu-id="7dc40-237">Implémenter une page de connexion-dans/connexion-haut dans le client web hello suivant hello [consentement de l’administrateur](#admin-consent) guide traite de la version antérieure</span><span class="sxs-lookup"><span data-stu-id="7dc40-237">Implement a sign-in/sign-up page in hello web client, following hello [admin consent](#admin-consent) guidance discussed earlier</span></span> 
4. <span data-ttu-id="7dc40-238">Une fois que l’utilisateur de hello donne son consentement toohello application, hello liens de service principal et l’autorisation de délégation sont créés dans leur locataire, et application native hello peut obtenir des jetons pour hello API</span><span class="sxs-lookup"><span data-stu-id="7dc40-238">Once hello user consents toohello application, hello service principal and consent delegation links are created in their tenant, and hello native application can get tokens for hello API</span></span>

<span data-ttu-id="7dc40-239">Hello suivant schéma fournit une vue d’ensemble de consentement pour une application à plusieurs niveaux inscrite dans différents locataires :</span><span class="sxs-lookup"><span data-stu-id="7dc40-239">hello following diagram provides an overview of consent for a multi-tier app registered in different tenants:</span></span>

![Application multipartie toomulti-niveau de consentement][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="7dc40-241">Révocation d’un consentement</span><span class="sxs-lookup"><span data-stu-id="7dc40-241">Revoking Consent</span></span>
<span data-ttu-id="7dc40-242">Les utilisateurs et les administrateurs peuvent révoquer application tooyour de consentement à tout moment :</span><span class="sxs-lookup"><span data-stu-id="7dc40-242">Users and administrators can revoke consent tooyour application at any time:</span></span>

* <span data-ttu-id="7dc40-243">Les utilisateurs revoke accès tooindividual applications en les supprimant de leur [Applications du volet d’accès] [ AAD-Access-Panel] liste.</span><span class="sxs-lookup"><span data-stu-id="7dc40-243">Users revoke access tooindividual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="7dc40-244">Administrateurs de révoquer l’accès tooapplications en les supprimant de Azure AD à l’aide de la section de gestion hello Azure AD de hello [portail Azure][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="7dc40-244">Administrators revoke access tooapplications by removing them from Azure AD using hello Azure AD management section of hello [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="7dc40-245">Si un administrateur a consenti application tooan pour tous les utilisateurs dans un locataire, les utilisateurs ne peut pas révoquer l’accès individuellement.</span><span class="sxs-lookup"><span data-stu-id="7dc40-245">If an administrator consents tooan application for all users in a tenant, users cannot revoke access individually.</span></span>  <span data-ttu-id="7dc40-246">Seul l’administrateur de hello peut révoquer l’accès et uniquement pour hello toute application.</span><span class="sxs-lookup"><span data-stu-id="7dc40-246">Only hello administrator can revoke access, and only for hello whole application.</span></span>

### <a name="consent-and-protocol-support"></a><span data-ttu-id="7dc40-247">Consentement et prise en charge des protocoles</span><span class="sxs-lookup"><span data-stu-id="7dc40-247">Consent and Protocol Support</span></span>
<span data-ttu-id="7dc40-248">Consentement est pris en charge dans Azure AD via hello OAuth, OpenID Connect, WS-Federation et SAML protocoles.</span><span class="sxs-lookup"><span data-stu-id="7dc40-248">Consent is supported in Azure AD via hello OAuth, OpenID Connect, WS-Federation, and SAML protocols.</span></span>  <span data-ttu-id="7dc40-249">Hello protocoles SAML et WS-Federation ne gèrent pas hello `prompt=admin_consent` paramètre, donc le consentement de l’administrateur est uniquement possible via OAuth et OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="7dc40-249">hello SAML and WS-Federation protocols do not support hello `prompt=admin_consent` parameter, so admin consent is only possible via OAuth and OpenID Connect.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="7dc40-250">Applications mutualisées et mise en cache des jetons d’accès</span><span class="sxs-lookup"><span data-stu-id="7dc40-250">Multi-Tenant Applications and Caching Access Tokens</span></span>
<span data-ttu-id="7dc40-251">Applications mutualisées peuvent également obtenir toocall de jetons d’accès API qui est protégés par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7dc40-251">Multi-tenant applications can also get access tokens toocall APIs that are protected by Azure AD.</span></span>  <span data-ttu-id="7dc40-252">Une erreur courante lors de l’utilisation de hello Active Directory Authentication Library (ADAL) avec une application mutualisée, est tooinitially demande un jeton pour un utilisateur à l’aide de /common, recevoir une réponse, puis demander un jeton suivant pour le même utilisateur également à l’aide de /common.</span><span class="sxs-lookup"><span data-stu-id="7dc40-252">A common error when using hello Active Directory Authentication Library (ADAL) with a multi-tenant application, is tooinitially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span>  <span data-ttu-id="7dc40-253">Étant donné que la réponse hello d’Azure AD provient d’un client, pas/commun, la bibliothèque ADAL met en cache le jeton hello comme étant à partir du client de hello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-253">Since hello response from Azure AD comes from a tenant, not /common, ADAL caches hello token as being from hello tenant.</span></span> <span data-ttu-id="7dc40-254">Hello ultérieur appeler tooget trop commun un jeton d’accès pour entrée de cache hello utilisateur échecs hello et hello utilisateur est invité à toosign dans à nouveau.</span><span class="sxs-lookup"><span data-stu-id="7dc40-254">hello subsequent call too/common tooget an access token for hello user misses hello cache entry, and hello user is prompted toosign in again.</span></span>  <span data-ttu-id="7dc40-255">Assurez-vous que des appels à un utilisateur déjà connecté deviennent tooavoid manquant du cache hello, point de terminaison du client toohello.</span><span class="sxs-lookup"><span data-stu-id="7dc40-255">tooavoid missing hello cache, make sure subsequent calls for an already signed in user are made toohello tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7dc40-256">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="7dc40-256">Next steps</span></span>
<span data-ttu-id="7dc40-257">Dans cet article, vous avez appris comment toobuild une application qui peut se connecter un utilisateur à partir de n’importe quel client Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7dc40-257">In this article, you learned how toobuild an application that can sign in a user from any Azure Active Directory tenant.</span></span> <span data-ttu-id="7dc40-258">Après avoir activé l’authentification unique entre votre application et d’Azure Active Directory, vous pouvez également mettre à jour votre tooaccess application API exposées par les ressources de Microsoft, tels qu’Office 365.</span><span class="sxs-lookup"><span data-stu-id="7dc40-258">After enabling Single Sign-On between your app and Azure Active Directory, you can also update your application tooaccess APIs exposed by Microsoft resources, like Office 365.</span></span> <span data-ttu-id="7dc40-259">Par conséquent, vous pouvez offrir une expérience personnalisée dans votre application, par exemple affichant des informations contextuelles toohello utilisateurs, telles que leur photo de profil ou de leur prochain rendez-vous de calendrier.</span><span class="sxs-lookup"><span data-stu-id="7dc40-259">So you can offer a personalized experience in your application, for example showing contextual information toohello users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="7dc40-260">toolearn en savoir plus sur l’API de fabrication appelle tooAzure Active Directory et services Office 365 comme Exchange, SharePoint, OneDrive, OneNote, Planner, Excel et plus d’informations, visitez : [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="7dc40-260">toolearn more about making API calls tooAzure Active Directory and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel and more, visit: [Microsoft Graph API][MSFT-Graph-overview].</span></span>


## <a name="related-content"></a><span data-ttu-id="7dc40-261">Contenu connexe</span><span class="sxs-lookup"><span data-stu-id="7dc40-261">Related content</span></span>
* <span data-ttu-id="7dc40-262">[Exemples d’applications mutualisées][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="7dc40-262">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="7dc40-263">[Directives de personnalisation des applications][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="7dc40-263">[Branding Guidelines for Applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="7dc40-264">[Guide du développeur Azure AD][AAD-Dev-Guide]</span><span class="sxs-lookup"><span data-stu-id="7dc40-264">[Azure AD Developer's Guide][AAD-Dev-Guide]</span></span>
* <span data-ttu-id="7dc40-265">[Objets principal du service et application][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="7dc40-265">[Application Objects and Service Principal Objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="7dc40-266">[Intégration d’applications dans Azure Active Directory][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="7dc40-266">[Integrating Applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="7dc40-267">[Vue d’ensemble de l’infrastructure de consentement de hello][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="7dc40-267">[Overview of hello Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="7dc40-268">[Étendues des autorisations de l’API Graph Microsoft][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="7dc40-268">[Microsoft Graph API Permission Scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="7dc40-269">[Étendues des autorisations de l’API Graph Azure AD][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="7dc40-269">[Azure AD Graph API Permission Scopes][AAD-Graph-Perm-Scopes]</span></span>

<span data-ttu-id="7dc40-270">Utilisez hello suivant tooprovide des commentaires de la section commentaires et nous aider à affiner et mettre en forme notre contenu.</span><span class="sxs-lookup"><span data-stu-id="7dc40-270">Please use hello following comments section tooprovide feedback and help us refine and shape our content.</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]: ./active-directory-branding-guidelines.md
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Consent-Overview]: ./active-directory-integrating-applications.md#overview-of-the-consent-framework
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/en-us/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://graph.microsoft.io/en-us/docs/authorization/permission_scopes

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]: ./active-directory-token-and-claims.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/en-us/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














