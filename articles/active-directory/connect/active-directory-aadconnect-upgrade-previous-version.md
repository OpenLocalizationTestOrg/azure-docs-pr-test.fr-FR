---
title: "Azure AD Connect : effectuer une mise à niveau depuis une version précédente | Microsoft Docs"
description: "Explique hello différentes méthodes tooupgrade toohello version la plus récente d’Azure Active Directory Connect, y compris une mise à niveau sur place et une migration de basculement."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="588bb-103">Azure AD Connect : Mise à niveau à partir d’une précédente toohello de version plus récente</span><span class="sxs-lookup"><span data-stu-id="588bb-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="588bb-104">Cette rubrique décrit hello différentes méthodes que vous pouvez utiliser tooupgrade votre version la plus récente toohello installation Connect de Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="588bb-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="588bb-105">Nous vous recommandons de conserver vous-même actuel avec les versions hello d’Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="588bb-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="588bb-106">Vous également utilisez les étapes de hello Bonjour [OSCILLANT migration](#swing-migration) section lorsque vous modifiez une configuration substantielle.</span><span class="sxs-lookup"><span data-stu-id="588bb-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="588bb-107">Si vous souhaitez tooupgrade de DirSync, consultez [mise à niveau à partir de l’outil de synchronisation AD Azure (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) à la place.</span><span class="sxs-lookup"><span data-stu-id="588bb-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="588bb-108">Il existe quelques stratégies différentes que vous pouvez utiliser tooupgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="588bb-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="588bb-109">Méthode</span><span class="sxs-lookup"><span data-stu-id="588bb-109">Method</span></span> | <span data-ttu-id="588bb-110">Description</span><span class="sxs-lookup"><span data-stu-id="588bb-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="588bb-111">Mise à niveau automatique</span><span class="sxs-lookup"><span data-stu-id="588bb-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="588bb-112">Il s’agit de méthode la plus simple hello pour les clients avec une installation rapide.</span><span class="sxs-lookup"><span data-stu-id="588bb-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="588bb-113">Mise à niveau sur place</span><span class="sxs-lookup"><span data-stu-id="588bb-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="588bb-114">Si vous avez un seul serveur, vous pouvez mettre à niveau hello installation in situ hello le même serveur.</span><span class="sxs-lookup"><span data-stu-id="588bb-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="588bb-115">Migration « swing »</span><span class="sxs-lookup"><span data-stu-id="588bb-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="588bb-116">Avec deux serveurs, vous pouvez préparer un des serveurs hello avec la nouvelle version de hello ou la configuration et modifier le serveur active hello lorsque vous êtes prêt.</span><span class="sxs-lookup"><span data-stu-id="588bb-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="588bb-117">Pour plus d’informations d’autorisations, consultez hello [autorisations requises pour une mise à niveau](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="588bb-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="588bb-118">Une fois que vous avez activé votre nouvelle Azure AD Connect server toostart synchronisation modifications tooAzure AD, vous devez restaure pas toousing DirSync ou Azure AD Sync. La rétrogradation à partir d’Azure AD Connect toolegacy clients, y compris le nom de DirSync et Azure AD Sync, n’est pas pris en charge et peut entraîner des tooissues telles qu’une perte de données dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="588bb-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="588bb-119">Mise à niveau sur place</span><span class="sxs-lookup"><span data-stu-id="588bb-119">In-place upgrade</span></span>
<span data-ttu-id="588bb-120">Une mise à niveau sur place fonctionne à partir d’Azure AD Sync ou d’Azure AD Connect,</span><span class="sxs-lookup"><span data-stu-id="588bb-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="588bb-121">Elle ne fonctionne pas pour la migration à partir de DirSync ou pour une solution avec Forefront Identity Manager (FIM) + connecteur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="588bb-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="588bb-122">Nous vous recommandons cette méthode si vous avez un seul serveur et moins de 100 000 objets environ.</span><span class="sxs-lookup"><span data-stu-id="588bb-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="588bb-123">S’il existe des modifications de règles de synchronisation d’out-of-box toohello, une importation intégrale et une synchronisation complète se produisent après la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="588bb-124">Cette méthode garantit que la configuration du nouveau hello tooall appliqué des objets existants dans le système de hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="588bb-125">Cette exécution peut prendre quelques heures, en fonction du nombre de hello d’objets qui sont dans la portée du moteur de synchronisation hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="588bb-126">Planificateur de synchronisation delta normal Hello (qui synchronise toutes les 30 minutes par défaut) est suspendu, mais continue de la synchronisation de mot de passe.</span><span class="sxs-lookup"><span data-stu-id="588bb-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="588bb-127">Vous pouvez envisager la mise à niveau in situ de hello pendant le week-end.</span><span class="sxs-lookup"><span data-stu-id="588bb-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="588bb-128">S’il n’y a aucune configuration d’out-of-box toohello modifications avec mise en production de hello nouveau Azure AD Connect, puis un delta normal importation/synchronisation démarre à la place.</span><span class="sxs-lookup"><span data-stu-id="588bb-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Mise à niveau sur place](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="588bb-130">Si vous avez apporté des modifications des règles de synchronisation d’out-of-box toohello, puis ces règles sont définies dans configuration par défaut de toohello sur la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="588bb-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="588bb-131">toomake sûr que votre configuration est conservée entre les mises à niveau, assurez-vous que vous apportez des modifications qu’ils sont décrits dans [meilleures pratiques pour la modification de configuration par défaut de hello](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="588bb-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="588bb-132">Au cours de la mise à niveau, il peut y avoir des modifications introduites nécessitant toobe (y compris les étapes d’importation complète et synchronisation complète) des activités de synchronisation spécifique exécuté après la mise à niveau terminée.</span><span class="sxs-lookup"><span data-stu-id="588bb-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="588bb-133">toodefer ces activités, consultez toosection [comment la synchronisation après mise à niveau de complète toodefer](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="588bb-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="588bb-134">Migration « swing »</span><span class="sxs-lookup"><span data-stu-id="588bb-134">Swing migration</span></span>
<span data-ttu-id="588bb-135">Si vous avez un déploiement complexe ou nombreux objets, il peut être peu pratique toodo une mise à niveau sur place sur le système hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="588bb-136">Pour certains clients, ce processus peut prendre plusieurs jours pendant lesquels aucune modification différentielle n’est traitée.</span><span class="sxs-lookup"><span data-stu-id="588bb-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="588bb-137">Vous pouvez également utiliser cette méthode lorsque vous envisagez de configuration de tooyour toomake des modifications importantes et que vous souhaitez tootry les extraire avant qu’ils sont envoyées toohello cloud.</span><span class="sxs-lookup"><span data-stu-id="588bb-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="588bb-138">méthode recommandée de ces scénarios de Hello est toouse une migration de basculement.</span><span class="sxs-lookup"><span data-stu-id="588bb-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="588bb-139">Vous devez avoir (au moins) deux serveurs : un serveur actif et un serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="588bb-140">ASP Hello (indiquée avec des lignes bleues pleines Bonjour suivant image) est chargé de la charge de production actif hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="588bb-141">Hello (indiquée avec des lignes violets en pointillés) de serveur de test est préparée avec la nouvelle version de hello ou la configuration.</span><span class="sxs-lookup"><span data-stu-id="588bb-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="588bb-142">Lorsqu’il est prêt, ce serveur devient actif.</span><span class="sxs-lookup"><span data-stu-id="588bb-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="588bb-143">Hello précédent serveur actif, qui a une ancienne version de hello ou de configuration installée, est transformé en hello serveur intermédiaire et est mis à niveau maintenant.</span><span class="sxs-lookup"><span data-stu-id="588bb-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="588bb-144">deux serveurs de Hello peuvent utiliser différentes versions.</span><span class="sxs-lookup"><span data-stu-id="588bb-144">hello two servers can use different versions.</span></span> <span data-ttu-id="588bb-145">Par exemple, que vous envisagez de toodecommission ASP hello permettre utiliser Azure AD Sync et nouveau serveur de mise en lots hello permettre utiliser Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="588bb-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="588bb-146">Si vous utilisez basculement migration toodevelop une nouvelle configuration, il une bonne idée toohave hello les mêmes versions sur hello deux serveurs.</span><span class="sxs-lookup"><span data-stu-id="588bb-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![Serveur de test](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="588bb-148">Certains clients préfèrent toohave trois ou quatre des serveurs pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="588bb-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="588bb-149">Lorsque hello serveur intermédiaire est mis à niveau, vous n’avez pas un serveur de sauvegarde [la récupération d’urgence](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="588bb-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="588bb-150">Avec trois ou quatre serveurs, vous pouvez préparer un ensemble de serveurs principal/secondaire avec hello nouvelle version, ce qui garantit qu’il existe toujours un serveur intermédiaire est prêt tootake sur.</span><span class="sxs-lookup"><span data-stu-id="588bb-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="588bb-151">Ces étapes fonctionnent également toomove à partir d’Azure AD Sync ou d’une solution avec FIM + connecteur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="588bb-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="588bb-152">Ces étapes ne fonctionnent pas pour la synchronisation d’annuaire, mais hello même basculement migration (méthode) (également appelé déploiement parallèle) avec les étapes de synchronisation d’annuaire est en [synchronisation de mise à niveau Azure Active Directory (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="588bb-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="588bb-153">Utilisez un tooupgrade de migration de basculement</span><span class="sxs-lookup"><span data-stu-id="588bb-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="588bb-154">Si vous utilisez Azure AD Connect sur les serveurs et assurez-vous de tooonly plan une modification de configuration, assurez-vous que votre serveur actif et le serveur de test sont à l’aide de hello même version.</span><span class="sxs-lookup"><span data-stu-id="588bb-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="588bb-155">Qui rend plus facile toocompare différences ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="588bb-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="588bb-156">Si vous effectuez une mise à niveau à partir d’Azure AD Sync, ces serveurs auront des versions différentes.</span><span class="sxs-lookup"><span data-stu-id="588bb-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="588bb-157">Si vous mettez à niveau à partir d’une version antérieure d’Azure AD Connect, il est un toostart recommandé avec les serveurs de hello deux qui sont à l’aide de hello même version, mais il n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="588bb-158">Si vous avez apportées à une configuration personnalisée et il n’est utilisé pour votre serveur de test, suivez les étapes de hello sous [déplacer une configuration personnalisée à partir de toohello du serveur actif hello serveur intermédiaire](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="588bb-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="588bb-159">Si vous mettez à niveau à partir d’une version antérieure d’Azure AD Connect, mettez à niveau hello server toohello dernière version de la mise en lots.</span><span class="sxs-lookup"><span data-stu-id="588bb-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="588bb-160">Si vous migrez à partir d’Azure AD Sync, installez Azure AD Connect sur votre serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="588bb-161">Permettent d’importation intégrale du moteur d’exécution de synchronisation hello et une synchronisation complète sur votre serveur de test.</span><span class="sxs-lookup"><span data-stu-id="588bb-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="588bb-162">Vérifiez que la configuration du nouveau hello n’a pas été entraîne des modifications inattendues à l’aide des étapes hello sous « Vérifier » dans [configuration hello de vérification d’un serveur](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="588bb-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="588bb-163">Si un élément n’est pas comme prévu, correct, exécuter l’importation de hello et de synchronisation et vérifier les données de hello jusqu'à ce qu’il semble correct, en suivant les étapes de hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="588bb-164">Basculez hello server toobe hello active serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="588bb-165">Il s’agit étape finale de hello « Commutateur active server » dans [configuration hello de vérification d’un serveur](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="588bb-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="588bb-166">Si vous mettez à niveau Azure AD Connect, mettez à niveau le serveur hello est intermédiaire maintenant dans la version la plus récente en mode toohello.</span><span class="sxs-lookup"><span data-stu-id="588bb-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="588bb-167">Suivez hello même procédure qu’avant tooget hello configuration des données et mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="588bb-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="588bb-168">Si vous avez effectué une mise à niveau à partir d’Azure AD Sync, vous pouvez maintenant désactiver et retirer votre ancien serveur.</span><span class="sxs-lookup"><span data-stu-id="588bb-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="588bb-169">Déplacer une configuration personnalisée hello active toohello intermédiaire serveur</span><span class="sxs-lookup"><span data-stu-id="588bb-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="588bb-170">Si vous avez effectué le serveur de configuration modifications toohello active, vous devez toomake sûr qui hello même les modifications sont appliquée toohello serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="588bb-171">toohelp avec ce déplacement, vous pouvez utiliser hello [documentation de configuration Azure AD Connect](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="588bb-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="588bb-172">Vous pouvez déplacer les règles de synchronisation hello que vous avez créé à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="588bb-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="588bb-173">Vous devez appliquer d’autres hello modifications identique sur les deux systèmes et vous ne pouvez pas migrer les modifications hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="588bb-174">Hello [documentation de configuration](https://github.com/Microsoft/AADConnectConfigDocumenter) peut vous aider à comparer toomake de systèmes hello deux assurer qu’ils sont identiques.</span><span class="sxs-lookup"><span data-stu-id="588bb-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="588bb-175">outil de Hello peut également aider à automatiser les étapes hello trouvés dans cette section.</span><span class="sxs-lookup"><span data-stu-id="588bb-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="588bb-176">Vous devez suivant de hello tooconfigure choses hello même manière sur les deux serveurs :</span><span class="sxs-lookup"><span data-stu-id="588bb-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="588bb-177">Connexion toohello mêmes forêts</span><span class="sxs-lookup"><span data-stu-id="588bb-177">Connection toohello same forests</span></span>
* <span data-ttu-id="588bb-178">Tout filtrage de domaine et d’unité organisationnelle</span><span class="sxs-lookup"><span data-stu-id="588bb-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="588bb-179">Hello mêmes fonctionnalités facultatives, telles que la synchronisation de mot de passe et d’écriture différée de mot de passe</span><span class="sxs-lookup"><span data-stu-id="588bb-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="588bb-180">**Migrer les règles de synchronisation personnalisées**</span><span class="sxs-lookup"><span data-stu-id="588bb-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="588bb-181">règles de synchronisation personnalisées toomove, hello suivant :</span><span class="sxs-lookup"><span data-stu-id="588bb-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="588bb-182">Ouvrez l’ **Éditeur de règles de synchronisation** sur votre serveur actif.</span><span class="sxs-lookup"><span data-stu-id="588bb-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="588bb-183">Sélectionnez une règle personnalisée.</span><span class="sxs-lookup"><span data-stu-id="588bb-183">Select a custom rule.</span></span> <span data-ttu-id="588bb-184">Cliquez sur **Exporter**.</span><span class="sxs-lookup"><span data-stu-id="588bb-184">Click **Export**.</span></span> <span data-ttu-id="588bb-185">Une fenêtre Bloc-notes apparaît.</span><span class="sxs-lookup"><span data-stu-id="588bb-185">This brings up a Notepad window.</span></span> <span data-ttu-id="588bb-186">Enregistrer le fichier temporaire de hello avec l’extension PS1.</span><span class="sxs-lookup"><span data-stu-id="588bb-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="588bb-187">Le fichier devient un script PowerShell.</span><span class="sxs-lookup"><span data-stu-id="588bb-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="588bb-188">Copiez toohello de fichier PS1 hello serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="588bb-189">![Exportation des règles de synchronisation](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="588bb-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="588bb-190">Hello GUID de connecteur est différente sur hello serveur intermédiaire, et vous devez le modifier.</span><span class="sxs-lookup"><span data-stu-id="588bb-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="588bb-191">tooget hello GUID, démarrer **Éditeur des règles de synchronisation**, sélectionnez une des règles d’out-of-box hello que hello représentent même connecté système, puis cliquez sur **exporter**.</span><span class="sxs-lookup"><span data-stu-id="588bb-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="588bb-192">Remplacez hello GUID dans votre fichier PS1 hello GUID à partir de hello serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="588bb-193">Ouvrez une invite de PowerShell, exécutez le fichier de la hello PS1.</span><span class="sxs-lookup"><span data-stu-id="588bb-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="588bb-194">Cela crée un règle de synchronisation personnalisée hello sur hello serveur intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="588bb-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="588bb-195">Répétez cette procédure pour toutes vos règles personnalisées.</span><span class="sxs-lookup"><span data-stu-id="588bb-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="588bb-196">Comment toodefer complète synchronisation après mise à niveau</span><span class="sxs-lookup"><span data-stu-id="588bb-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="588bb-197">Au cours de la mise à niveau, il peut y avoir des modifications introduites nécessitant toobe (y compris les étapes d’importation complète et synchronisation complète) des activités de synchronisation spécifique exécutée.</span><span class="sxs-lookup"><span data-stu-id="588bb-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="588bb-198">Par exemple, requièrent des modifications de schéma de connecteur **importation intégrale** nécessitent des modifications de règle de synchronisation étape et out-of-box **synchronisation complète** étape toobe exécutée sur les connecteurs affectés.</span><span class="sxs-lookup"><span data-stu-id="588bb-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="588bb-199">Pendant la mise à niveau, Azure AD Connect détermine les activités de synchronisation requises et les enregistre en tant qu’*actions prioritaires*.</span><span class="sxs-lookup"><span data-stu-id="588bb-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="588bb-200">Bonjour suivant le cycle de synchronisation, le Planificateur de synchronisation hello récupère ces remplacements et les exécute.</span><span class="sxs-lookup"><span data-stu-id="588bb-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="588bb-201">Dès qu’une action prioritaire a été exécutée avec succès, elle est supprimée.</span><span class="sxs-lookup"><span data-stu-id="588bb-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="588bb-202">Il peut arriver dans lequel vous ne souhaitez pas ces tootake de remplacements sur place immédiatement après la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="588bb-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="588bb-203">Par exemple, vous avez de nombreux objets synchronisés et vous souhaitez que ces toooccur d’étapes de synchronisation après les heures de bureau.</span><span class="sxs-lookup"><span data-stu-id="588bb-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="588bb-204">tooremove ces remplacements :</span><span class="sxs-lookup"><span data-stu-id="588bb-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="588bb-205">Au cours de la mise à niveau, **Décochez** hello option **démarrer le processus de synchronisation hello lors de la fin de la configuration**.</span><span class="sxs-lookup"><span data-stu-id="588bb-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="588bb-206">Cela désactive le Planificateur de synchronisation hello et empêche cycle de synchronisation ayant lieu automatiquement avant que les remplacements hello soient supprimés.</span><span class="sxs-lookup"><span data-stu-id="588bb-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="588bb-208">Une fois la mise à niveau terminée, exécutez hello suivant toofind d’applet de commande out les remplacements ont été ajoutés :`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="588bb-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="588bb-209">remplacements de Hello sont spécifiques au connecteur.</span><span class="sxs-lookup"><span data-stu-id="588bb-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="588bb-210">Bonjour exemple suivant, importation complète et synchronisation complètes ont été ajoutés tooboth hello le connecteur Active Directory sur site et le connecteur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="588bb-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="588bb-212">Notez les remplacements hello existants qui ont été ajoutés.</span><span class="sxs-lookup"><span data-stu-id="588bb-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="588bb-213">tooremove hello les remplacements d’importation intégrale et une synchronisation complète sur un connecteur arbitraire, exécutez hello suivant l’applet de commande :`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="588bb-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="588bb-214">remplacements de hello tooremove sur tous les connecteurs, exécutez hello PowerShell script suivant :</span><span class="sxs-lookup"><span data-stu-id="588bb-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="588bb-215">Planificateur de hello tooresume, exécutez hello suivant l’applet de commande :`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="588bb-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="588bb-216">N’oubliez pas d’étapes de synchronisation tooexecute hello requis aussitôt.</span><span class="sxs-lookup"><span data-stu-id="588bb-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="588bb-217">Vous pouvez manuellement exécuter ces étapes à l’aide de hello Synchronization Service Manager ou ajouter des substitutions hello à l’aide d’applet de commande Set-ADSyncSchedulerConnectorOverride hello.</span><span class="sxs-lookup"><span data-stu-id="588bb-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="588bb-218">tooadd hello les remplacements d’importation intégrale et une synchronisation complète sur un connecteur arbitraire, exécutez hello suivant l’applet de commande :`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="588bb-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="588bb-219">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="588bb-219">Next steps</span></span>
<span data-ttu-id="588bb-220">En savoir plus sur [l’intégration de vos identités locales avec Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="588bb-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
