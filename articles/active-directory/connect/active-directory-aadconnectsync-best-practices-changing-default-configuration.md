---
title: "Synchronisation Azure AD Connect : modification de la configuration par défaut | Microsoft Docs"
description: "Décrit les meilleures pratiques pour la modification de la configuration par défaut d’Azure AD Connect Sync."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 7638a031-1635-4942-94c3-fce8f09eed5e
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: b723ad800ccc0f3040eb480bb72960943b1fdb16
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-best-practices-for-changing-the-default-configuration"></a><span data-ttu-id="19eb5-103">Azure AD Connect Sync : meilleures pratiques pour modifier la configuration par défaut</span><span class="sxs-lookup"><span data-stu-id="19eb5-103">Azure AD Connect sync: Best practices for changing the default configuration</span></span>
<span data-ttu-id="19eb5-104">L’objectif de cette rubrique est de décrire les modifications prises en charge et celles qui ne sont pas prises en charge pour Azure AD Connect Sync.</span><span class="sxs-lookup"><span data-stu-id="19eb5-104">The purpose of this topic is to describe supported and unsupported changes to Azure AD Connect sync.</span></span>

<span data-ttu-id="19eb5-105">La configuration créée par Azure AD Connect fonctionne « telle quelle » pour la plupart des environnements qui synchronisent Active Directory local avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="19eb5-105">The configuration created by Azure AD Connect works “as is” for most environments that synchronize on-premises Active Directory with Azure AD.</span></span> <span data-ttu-id="19eb5-106">Toutefois, dans certains cas, il est nécessaire d’appliquer certaines modifications à une configuration pour répondre à une spécification ou un besoin particulier.</span><span class="sxs-lookup"><span data-stu-id="19eb5-106">However, in some cases, it is necessary to apply some changes to a configuration to satisfy a particular need or requirement.</span></span>

## <a name="changes-to-the-service-account"></a><span data-ttu-id="19eb5-107">Modifications apportées au compte de service</span><span class="sxs-lookup"><span data-stu-id="19eb5-107">Changes to the service account</span></span>
<span data-ttu-id="19eb5-108">Azure AD Connect Sync s’exécute sous un compte de service créé par l’Assistant Installation.</span><span class="sxs-lookup"><span data-stu-id="19eb5-108">Azure AD Connect sync is running under a service account created by the installation wizard.</span></span> <span data-ttu-id="19eb5-109">Ce compte de service conserve les clés de chiffrement dans la base de données utilisée par la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="19eb5-109">This service account holds the encryption keys to the database used by sync.</span></span> <span data-ttu-id="19eb5-110">Il est créé avec un mot de passe de 127 caractères de long, défini pour ne pas expirer.</span><span class="sxs-lookup"><span data-stu-id="19eb5-110">It is created with a 127 characters long password and the password is set to not expire.</span></span>

* <span data-ttu-id="19eb5-111">La modification ou la réinitialisation du mot de passe du compte de service **n’est pas prise en charge** .</span><span class="sxs-lookup"><span data-stu-id="19eb5-111">It is **unsupported** to change or reset the password of the service account.</span></span> <span data-ttu-id="19eb5-112">Sa modification ou sa réinitialisation supprime les clés de chiffrement et le service ne peut pas accéder à la base de données ni démarrer.</span><span class="sxs-lookup"><span data-stu-id="19eb5-112">Doing so destroys the encryption keys and the service is not able to access the database and is not able to start.</span></span>

## <a name="changes-to-the-scheduler"></a><span data-ttu-id="19eb5-113">Modifications apportées au planificateur</span><span class="sxs-lookup"><span data-stu-id="19eb5-113">Changes to the scheduler</span></span>
<span data-ttu-id="19eb5-114">À partir de la version 1.1 (février 2016), vous pouvez configurer le [planificateur](active-directory-aadconnectsync-feature-scheduler.md) sur un cycle de synchronisation autre que le cycle par défaut de 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="19eb5-114">Starting with the releases from build 1.1 (February 2016) you can configure the [scheduler](active-directory-aadconnectsync-feature-scheduler.md) to have a different sync cycle than the default 30 minutes.</span></span>

## <a name="changes-to-synchronization-rules"></a><span data-ttu-id="19eb5-115">Modifications apportées aux règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="19eb5-115">Changes to Synchronization Rules</span></span>
<span data-ttu-id="19eb5-116">L'Assistant d’installation fournit une configuration qui est censée fonctionner pour les scénarios les plus courants.</span><span class="sxs-lookup"><span data-stu-id="19eb5-116">The installation wizard provides a configuration that is supposed to work for the most common scenarios.</span></span> <span data-ttu-id="19eb5-117">Au cas où vous devez apporter des modifications à la configuration, vous devez suivre ces règles pour toujours avoir une configuration prise en charge.</span><span class="sxs-lookup"><span data-stu-id="19eb5-117">In case you need to make changes to the configuration, then you must follow these rules to still have a supported configuration.</span></span>

* <span data-ttu-id="19eb5-118">Vous pouvez [modifier le flux d’attributs](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) si le flux des attributs directs par défaut ne convient pas à votre organisation.</span><span class="sxs-lookup"><span data-stu-id="19eb5-118">You can [change attribute flows](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) if the default direct attribute flows are not suitable for your organization.</span></span>
* <span data-ttu-id="19eb5-119">Si vous ne souhaitez [pas transférer un attribut](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) et voulez supprimer des valeurs d’attribut d’Azure AD existantes, vous devez créer une règle pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="19eb5-119">If you want to [not flow an attribute](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) and remove any existing attribute values in Azure AD, then you need to create a rule for this scenario.</span></span>
* <span data-ttu-id="19eb5-120">[Désactiver une règle de synchronisation indésirable](#disable-an-unwanted-sync-rule) plutôt que la supprimer.</span><span class="sxs-lookup"><span data-stu-id="19eb5-120">[Disable an unwanted Sync Rule](#disable-an-unwanted-sync-rule) rather than deleting it.</span></span> <span data-ttu-id="19eb5-121">Une règle supprimée est recréée pendant la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="19eb5-121">A deleted rule is recreated during an upgrade.</span></span>
* <span data-ttu-id="19eb5-122">Pour [effectuer des modifications sur une règle out-of-box](#change-an-out-of-box-rule), vous devez faire une copie de la règle d’origine, puis la désactiver.</span><span class="sxs-lookup"><span data-stu-id="19eb5-122">To [change an out-of-box rule](#change-an-out-of-box-rule), you should make a copy of the original rule and disable the out-of-box rule.</span></span> <span data-ttu-id="19eb5-123">L’éditeur de règles de synchronisation affiche une invite et vous propose de l’aide.</span><span class="sxs-lookup"><span data-stu-id="19eb5-123">The Sync Rule Editor prompts and helps you.</span></span>
* <span data-ttu-id="19eb5-124">Exportez vos règles de synchronisation personnalisées à l’aide de l’éditeur de règles de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="19eb5-124">Export your custom synchronization rules using the Synchronization Rules Editor.</span></span> <span data-ttu-id="19eb5-125">L’éditeur vous donne un script PowerShell que vous pouvez utiliser pour facilement les recréer dans le cadre d’une récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="19eb5-125">The editor provides you with a PowerShell script you can use to easily recreate them in a disaster recovery scenario.</span></span>

> [!WARNING]
> <span data-ttu-id="19eb5-126">Les règles de synchronisation out-of-box ont une empreinte numérique.</span><span class="sxs-lookup"><span data-stu-id="19eb5-126">The out-of-box sync rules have a thumbprint.</span></span> <span data-ttu-id="19eb5-127">Si vous apportez une modification à ces règles, l’empreinte numérique ne correspondra plus.</span><span class="sxs-lookup"><span data-stu-id="19eb5-127">If you make a change to these rules, the thumbprint is no longer matching.</span></span> <span data-ttu-id="19eb5-128">Vous risquez de rencontrer des problèmes lorsque vous tenterez d’appliquer une nouvelle version d’Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="19eb5-128">You might have problems in the future when you try to apply a new release of Azure AD Connect.</span></span> <span data-ttu-id="19eb5-129">Procédez à des modifications uniquement de la façon décrite dans cet article.</span><span class="sxs-lookup"><span data-stu-id="19eb5-129">Only make changes the way it is described in this article.</span></span>

### <a name="disable-an-unwanted-sync-rule"></a><span data-ttu-id="19eb5-130">Désactiver une règle de synchronisation indésirable</span><span class="sxs-lookup"><span data-stu-id="19eb5-130">Disable an unwanted Sync Rule</span></span>
<span data-ttu-id="19eb5-131">Ne supprimez pas une règle de synchronisation out-of-box.</span><span class="sxs-lookup"><span data-stu-id="19eb5-131">Do not delete an out-of-box sync rule.</span></span> <span data-ttu-id="19eb5-132">Elle est recréée au cours de la mise à niveau suivante.</span><span class="sxs-lookup"><span data-stu-id="19eb5-132">It is recreated during next upgrade.</span></span>

<span data-ttu-id="19eb5-133">Dans certains cas, l'Assistant d'installation a produit une configuration qui ne fonctionne pas pour votre topologie.</span><span class="sxs-lookup"><span data-stu-id="19eb5-133">In some cases, the installation wizard has produced a configuration that is not working for your topology.</span></span> <span data-ttu-id="19eb5-134">Par exemple, si vous disposez d'une topologie de forêt compte-ressource, mais que vous avez étendu le schéma dans la forêt de comptes avec le schéma Exchange, alors les règles pour Exchange sont créées pour la forêt de comptes, ainsi que pour la forêt de ressources.</span><span class="sxs-lookup"><span data-stu-id="19eb5-134">For example, if you have an account-resource forest topology but you have extended the schema in the account forest with the Exchange schema, then rules for Exchange are created for the account forest and the resource forest.</span></span> <span data-ttu-id="19eb5-135">Dans ce cas, vous devez désactiver la règle de synchronisation pour Exchange.</span><span class="sxs-lookup"><span data-stu-id="19eb5-135">In this case, you need to disable the Sync Rule for Exchange.</span></span>

![Règle de synchronisation désactivée](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/exchangedisabledrule.png)

<span data-ttu-id="19eb5-137">Dans l'image ci-dessus, l'Assistant d'installation a trouvé un ancien schéma Exchange 2003 dans la forêt de comptes.</span><span class="sxs-lookup"><span data-stu-id="19eb5-137">In the picture above, the installation wizard has found an old Exchange 2003 schema in the account forest.</span></span> <span data-ttu-id="19eb5-138">Cette extension de schéma a été ajoutée avant l’introduction de la forêt de ressources dans l’environnement de Fabrikam.</span><span class="sxs-lookup"><span data-stu-id="19eb5-138">This schema extension was added before the resource forest was introduced in Fabrikam's environment.</span></span> <span data-ttu-id="19eb5-139">Pour garantir qu’aucun attribut de l’ancienne implémentation Exchange n’est synchronisé, la règle de synchronisation devrait être désactivée comme indiqué.</span><span class="sxs-lookup"><span data-stu-id="19eb5-139">To ensure no attributes from the old Exchange implementation are synchronized, the sync rule should be disabled as shown.</span></span>

### <a name="change-an-out-of-box-rule"></a><span data-ttu-id="19eb5-140">effectuer des modifications sur une règle out-of-box</span><span class="sxs-lookup"><span data-stu-id="19eb5-140">Change an out-of-box rule</span></span>
<span data-ttu-id="19eb5-141">La seule fois où vous devez effectuer des modifications sur une règle out-of-box est lorsque vous devez modifier la règle de jointure.</span><span class="sxs-lookup"><span data-stu-id="19eb5-141">The only time you should change an out-of-box rule is when you need to change the join rule.</span></span> <span data-ttu-id="19eb5-142">Si vous devez modifier un flux d’attributs, vous devez créer une règle de synchronisation avec une priorité plus élevée que les règles out-of-box.</span><span class="sxs-lookup"><span data-stu-id="19eb5-142">If you need to change an attribute flow, then you should create a sync rule with higher precedence than the out-of-box rules.</span></span> <span data-ttu-id="19eb5-143">La seule règle que vous aurez vraiment à cloner est la règle **Reçu depuis AD - jointure utilisateur**.</span><span class="sxs-lookup"><span data-stu-id="19eb5-143">The only rule you practically need to clone is the rule **In from AD - User Join**.</span></span> <span data-ttu-id="19eb5-144">Vous pouvez remplacer toutes les autres règles avec une règle de priorité plus élevée.</span><span class="sxs-lookup"><span data-stu-id="19eb5-144">You can override all other rules with a higher precedence rule.</span></span>

<span data-ttu-id="19eb5-145">Si vous devez effectuer des modifications d’une règle out-of-box, vous devriez en faire une copie, puis désactiver la règle d’origine.</span><span class="sxs-lookup"><span data-stu-id="19eb5-145">If you need to make changes to an out-of-box rule, then you should make a copy of the out-of-box rule and disable the original rule.</span></span> <span data-ttu-id="19eb5-146">Modifiez ensuite la règle clonée.</span><span class="sxs-lookup"><span data-stu-id="19eb5-146">Then make the changes to the cloned rule.</span></span> <span data-ttu-id="19eb5-147">L’éditeur de règles de synchronisation vous accompagne dans ces étapes.</span><span class="sxs-lookup"><span data-stu-id="19eb5-147">The Sync Rule Editor is helping you with those steps.</span></span> <span data-ttu-id="19eb5-148">Lorsque vous ouvrez une règle out-of-box, cette boîte de dialogue s'affiche : </span><span class="sxs-lookup"><span data-stu-id="19eb5-148">When you open an out-of-box rule, you are presented with this dialog box:</span></span>  
![Règle d'avertissement out-of-the box](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/warningoutofboxrule.png)

<span data-ttu-id="19eb5-150">Sélectionnez **Oui** pour créer une copie de la règle.</span><span class="sxs-lookup"><span data-stu-id="19eb5-150">Select **Yes** to create a copy of the rule.</span></span> <span data-ttu-id="19eb5-151">La règle clonée est ensuite ouverte.</span><span class="sxs-lookup"><span data-stu-id="19eb5-151">The cloned rule is then opened.</span></span>  
<span data-ttu-id="19eb5-152">![Règle clonée](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span><span class="sxs-lookup"><span data-stu-id="19eb5-152">![Cloned rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span></span>

<span data-ttu-id="19eb5-153">Sur cette règle clonée, effectuez les modifications nécessaires de la portée, de la jointure et des transformations.</span><span class="sxs-lookup"><span data-stu-id="19eb5-153">On this cloned rule, make any necessary changes to scope, join, and transformations.</span></span>

## <a name="next-steps"></a><span data-ttu-id="19eb5-154">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="19eb5-154">Next steps</span></span>
<span data-ttu-id="19eb5-155">**Rubriques de présentation**</span><span class="sxs-lookup"><span data-stu-id="19eb5-155">**Overview topics**</span></span>

* [<span data-ttu-id="19eb5-156">Azure AD Connect Sync - Présentation et personnalisation des options de synchronisation</span><span class="sxs-lookup"><span data-stu-id="19eb5-156">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="19eb5-157">Intégration de vos identités locales avec Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="19eb5-157">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
