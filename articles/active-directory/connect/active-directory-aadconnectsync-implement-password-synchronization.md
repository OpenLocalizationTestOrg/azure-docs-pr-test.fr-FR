---
title: "Implémentation de la synchronisation de mot de passe avec Azure AD Connect Sync | Microsoft Docs"
description: Fournit des informations sur le fonctionnement de la synchronisation de mot de passe et explique comment la configurer.
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: db9b1578a235be9018fc1985cc75a0a05ee47b3a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="88aba-103">Implémenter la synchronisation de mot de passe avec la synchronisation Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="88aba-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="88aba-104">Cet article vous fournit les informations nécessaires pour synchroniser vos mots de passe utilisateur à partir d’une instance Active Directory (AD) locale vers une instance Azure Active Directory (Azure AD) dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="88aba-104">This article provides information that you need to synchronize your user passwords from an on-premises Active Directory instance to a cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="88aba-105">Qu'est-ce que la synchronisation de mot de passe ?</span><span class="sxs-lookup"><span data-stu-id="88aba-105">What is password synchronization</span></span>
<span data-ttu-id="88aba-106">La probabilité que vous soyez bloqué dans votre travail en raison d’un mot de passe oublié est liée au nombre de mots de passe différents que vous devez vous rappeler.</span><span class="sxs-lookup"><span data-stu-id="88aba-106">The probability that you're blocked from getting your work done due to a forgotten password is related to the number of different passwords you need to remember.</span></span> <span data-ttu-id="88aba-107">Plus vous avez de mots de passe à mémoriser, plus vous risquez d’en oublier.</span><span class="sxs-lookup"><span data-stu-id="88aba-107">The more passwords you need to remember, the higher the probability to forget one.</span></span> <span data-ttu-id="88aba-108">Les questions et les appels pour des réinitialisations de mot de passe et d’autres problèmes de mot de passe sont ceux qui demandent le plus de ressources au support technique.</span><span class="sxs-lookup"><span data-stu-id="88aba-108">Questions and calls about password resets and other password-related issues demand the most helpdesk resources.</span></span>

<span data-ttu-id="88aba-109">La synchronisation de mot de passe est une fonctionnalité permettant de synchroniser des mots de passe utilisateur à partir d’une instance Active Directory locale vers une instance Azure AD basée sur le cloud.</span><span class="sxs-lookup"><span data-stu-id="88aba-109">Password synchronization is a feature used to synchronize user passwords from an on-premises Active Directory instance to a cloud-based Azure AD instance.</span></span>
<span data-ttu-id="88aba-110">Utilisez cette fonctionnalité pour vous connecter à des services Azure AD comme Office 365, Microsoft Intune, CRM Online et Azure Active Directory Domain Services (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="88aba-110">Use this feature to sign in to Azure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="88aba-111">Vous vous connectez au service à l’aide du mot de passe que vous utilisez pour vous connecter à votre instance locale d’Active Directory.</span><span class="sxs-lookup"><span data-stu-id="88aba-111">You sign in to the service by using the same password you use to sign in to your on-premises Active Directory instance.</span></span>

![Qu’est-ce qu’Azure AD Connect ?](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="88aba-113">En réduisant à un seul le nombre de mots de passe que vos utilisateurs doivent conserver.</span><span class="sxs-lookup"><span data-stu-id="88aba-113">By reducing the number of passwords, your users need to maintain to just one.</span></span> <span data-ttu-id="88aba-114">La synchronisation de mot de passe vous aide à :</span><span class="sxs-lookup"><span data-stu-id="88aba-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="88aba-115">Améliorer la productivité de vos utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="88aba-115">Improve the productivity of your users.</span></span>
* <span data-ttu-id="88aba-116">Réduire vos coûts de support technique.</span><span class="sxs-lookup"><span data-stu-id="88aba-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="88aba-117">De plus, si vous choisissez d’utiliser la [Fédération avec Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), vous pouvez éventuellement activer la synchronisation de mot de passe comme sauvegarde en cas de défaillance de votre infrastructure AD FS.</span><span class="sxs-lookup"><span data-stu-id="88aba-117">Also, if you decide to use [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="88aba-118">La synchronisation de mot de passe est une extension de la fonctionnalité de synchronisation d’annuaire implémentée par Azure AD Connect Sync.</span><span class="sxs-lookup"><span data-stu-id="88aba-118">Password synchronization is an extension to the directory synchronization feature implemented by Azure AD Connect sync.</span></span> <span data-ttu-id="88aba-119">Pour utiliser la synchronisation de mot de passe dans votre environnement, vous devez :</span><span class="sxs-lookup"><span data-stu-id="88aba-119">To use password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="88aba-120">Installer Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="88aba-120">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="88aba-121">Configurez la synchronisation d’annuaire entre votre instance Active Directory locale et votre instance Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="88aba-121">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="88aba-122">Activer la synchronisation de mot de passe.</span><span class="sxs-lookup"><span data-stu-id="88aba-122">Enable password synchronization.</span></span>

<span data-ttu-id="88aba-123">Pour plus d’informations, consultez [Intégration de vos identités locales avec Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="88aba-123">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="88aba-124">Pour plus d'informations sur les services de domaine Azure Active Directory configurés pour la synchronisation de mot de passe et FIPS, consultez « Synchronisation du mot de passe et FIPS » plus loin dans cet article.</span><span class="sxs-lookup"><span data-stu-id="88aba-124">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="88aba-125">Fonctionnement de la synchronisation de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-125">How password synchronization works</span></span>
<span data-ttu-id="88aba-126">Le service de domaine Active Directory stocke les mots de passe sous forme de valeur de hachage du mot de passe réel de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="88aba-126">The Active Directory domain service stores passwords in the form of a hash value representation of the actual user password.</span></span> <span data-ttu-id="88aba-127">Une valeur de hachage est le résultat d’une fonction mathématique unidirectionnelle (« *algorithme de hachage* »).</span><span class="sxs-lookup"><span data-stu-id="88aba-127">A hash value is a result of a one-way mathematical function (the *hashing algorithm*).</span></span> <span data-ttu-id="88aba-128">Il n’existe aucune méthode pour retrouver la version en texte brut du mot de passe à partir du résultat d’une fonction unidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="88aba-128">There is no method to revert the result of a one-way function to the plain text version of a password.</span></span> <span data-ttu-id="88aba-129">Vous ne pouvez pas utiliser un hachage de mot de passe pour vous connecter à votre réseau local.</span><span class="sxs-lookup"><span data-stu-id="88aba-129">You cannot use a password hash to sign in to your on-premises network.</span></span>

<span data-ttu-id="88aba-130">Pour synchroniser votre mot de passe, Azure AD Connect Sync extrait le hachage de votre mot de passe à partir de l’instance Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="88aba-130">To synchronize your password, Azure AD Connect sync extracts your password hash from the on-premises Active Directory instance.</span></span> <span data-ttu-id="88aba-131">Un traitement de sécurité supplémentaire est appliqué au hachage du mot de passe avant sa synchronisation avec le service d’authentification Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="88aba-131">Extra security processing is applied to the password hash before it is synchronized to the Azure Active Directory authentication service.</span></span> <span data-ttu-id="88aba-132">Les mots de passe sont synchronisés pour chaque utilisateur et par ordre chronologique.</span><span class="sxs-lookup"><span data-stu-id="88aba-132">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="88aba-133">Le flux de données du processus de synchronisation de mot de passe est similaire à la synchronisation des données utilisateur telles que le nom d’affichage ou les adresses de messagerie.</span><span class="sxs-lookup"><span data-stu-id="88aba-133">The actual data flow of the password synchronization process is similar to the synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="88aba-134">Cependant, les mots de passe sont synchronisés plus fréquemment que la fenêtre de synchronisation d’annuaire standard pour d’autres attributs.</span><span class="sxs-lookup"><span data-stu-id="88aba-134">However, passwords are synchronized more frequently than the standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="88aba-135">Le processus de synchronisation de mot de passe s’exécute toutes les deux minutes.</span><span class="sxs-lookup"><span data-stu-id="88aba-135">The password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="88aba-136">Vous ne pouvez pas modifier la fréquence de ce processus.</span><span class="sxs-lookup"><span data-stu-id="88aba-136">You cannot modify the frequency of this process.</span></span> <span data-ttu-id="88aba-137">Quand vous synchronisez un mot de passe, il remplace le mot de passe cloud existant.</span><span class="sxs-lookup"><span data-stu-id="88aba-137">When you synchronize a password, it overwrites the existing cloud password.</span></span>

<span data-ttu-id="88aba-138">La première fois que vous activez la fonctionnalité de synchronisation de mot de passe, elle effectue une synchronisation initiale des mots de passe de tous les utilisateurs concernés.</span><span class="sxs-lookup"><span data-stu-id="88aba-138">The first time you enable the password synchronization feature, it performs an initial synchronization of the passwords of all in-scope users.</span></span> <span data-ttu-id="88aba-139">Vous ne pouvez pas définir explicitement un sous-ensemble de mots de passe utilisateur à synchroniser.</span><span class="sxs-lookup"><span data-stu-id="88aba-139">You cannot explicitly define a subset of user passwords that you want to synchronize.</span></span>

<span data-ttu-id="88aba-140">Lorsque vous modifiez un mot de passe local, le mot de passe mis à jour est synchronisé, plus souvent en quelques minutes.</span><span class="sxs-lookup"><span data-stu-id="88aba-140">When you change an on-premises password, the updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="88aba-141">La fonctionnalité de synchronisation de mot de passe tente automatiquement de réeffectuer les tentatives de synchronisation ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="88aba-141">The password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="88aba-142">Si une erreur se produit lors d’une tentative de synchronisation de mot de passe, une erreur est enregistrée dans l’Observateur d’événements.</span><span class="sxs-lookup"><span data-stu-id="88aba-142">If an error occurs during an attempt to synchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="88aba-143">La synchronisation d’un mot de passe n’a aucun impact sur l’utilisateur actuellement connecté.</span><span class="sxs-lookup"><span data-stu-id="88aba-143">The synchronization of a password has no impact on the user  who is currently signed in.</span></span>
<span data-ttu-id="88aba-144">Votre session de service cloud en cours n’est pas immédiatement affectée par une modification de mot de passe synchronisé effectuée lorsque vous êtes connecté à un service cloud.</span><span class="sxs-lookup"><span data-stu-id="88aba-144">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in to a cloud service.</span></span> <span data-ttu-id="88aba-145">Toutefois, lorsque le service cloud vous oblige à vous authentifier à nouveau, vous devez fournir votre nouveau mot de passe.</span><span class="sxs-lookup"><span data-stu-id="88aba-145">However, when the cloud service requires you to authenticate again, you need to provide your new password.</span></span>

<span data-ttu-id="88aba-146">Un utilisateur doit entrer ses informations d’identification d’entreprise une deuxième fois pour s’authentifier auprès d’Azure AD, qu’il soit connecté à son réseau d’entreprise ou non.</span><span class="sxs-lookup"><span data-stu-id="88aba-146">A user must enter their corporate credentials a second time to authenticate to Azure AD, regardless of whether they're signed in to their corporate network.</span></span> <span data-ttu-id="88aba-147">Ce modèle peut être réduit, cependant, si l’utilisateur coche la case « Maintenir la connexion » lors de la connexion.</span><span class="sxs-lookup"><span data-stu-id="88aba-147">These pattern can be minimized, however, if the user selects the Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="88aba-148">Cette sélection définit un cookie de session qui ignore l’authentification pendant une courte période.</span><span class="sxs-lookup"><span data-stu-id="88aba-148">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="88aba-149">Le comportement KMSI peut être activé ou désactivé par l’administrateur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="88aba-149">KMSI behavior can be enabled or disabled by the Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="88aba-150">La synchronisation de mot de passe est uniquement prise en charge pour l'utilisateur de type d'objet dans Active Directory.</span><span class="sxs-lookup"><span data-stu-id="88aba-150">Password sync is only supported for the object type user in Active Directory.</span></span> <span data-ttu-id="88aba-151">Elle n'est pas prise en charge pour le type d'objet iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="88aba-151">It is not supported for the iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="88aba-152">Description détaillée du fonctionnement de la synchronisation des mots de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-152">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="88aba-153">Ce qui suit décrit en détail comment fonctionne la synchronisation de mots de passe entre Active Directory et Azure AD.</span><span class="sxs-lookup"><span data-stu-id="88aba-153">The following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Flux de travail détaillé des mots de passe](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="88aba-155">Toutes les deux minutes, l’agent de synchronisation sur le serveur AD Connect demande des hachages de mot de passe stockés (l’attribut unicodePwd) à partir d’un contrôleur de domaine via le protocole de réplication standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) pour synchroniser les données entre contrôleurs de domaine.</span><span class="sxs-lookup"><span data-stu-id="88aba-155">Every two minutes, the password synchronization agent on the AD Connect server requests stored password hashes (the unicodePwd attribute) from a DC via the standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used to synchronize data between DCs.</span></span> <span data-ttu-id="88aba-156">Le compte de service doit disposer des autorisations Répliquer les changements d’annuaires et Répliquer les changements d’annuaire Tout d’Active Directory (accordées par défaut lors de l’installation) pour obtenir les hachages de mot de passe.</span><span class="sxs-lookup"><span data-stu-id="88aba-156">The service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) to obtain the password hashes.</span></span>
2. <span data-ttu-id="88aba-157">Avant l’envoi, le contrôleur de domaine chiffre le hachage de mot de passe MD4 à l’aide d’une clé qui est un hachage [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) de la clé de session RPC et un salt.</span><span class="sxs-lookup"><span data-stu-id="88aba-157">Before sending, the DC encrypts the MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of the RPC session key and a salt.</span></span> <span data-ttu-id="88aba-158">Il envoie ensuite le résultat à l’agent de synchronisation de mots de passe via RPC.</span><span class="sxs-lookup"><span data-stu-id="88aba-158">It then sends the result to the password synchronization agent over RPC.</span></span> <span data-ttu-id="88aba-159">Le contrôleur de domaine passe également le salt à l’agent de synchronisation à l’aide du protocole de réplication du contrôleur de domaine, pour que l’agent puisse déchiffrer l’enveloppe.</span><span class="sxs-lookup"><span data-stu-id="88aba-159">The DC also passes the salt to the synchronization agent by using the DC replication protocol, so the agent will be able to decrypt the envelope.</span></span>
3.  <span data-ttu-id="88aba-160">Une fois que l’agent de synchronisation de mots de passe dispose de l’enveloppe chiffrée, il utilise [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) et le salt pour générer une clé afin de déchiffrer les données reçues dans leur format MD4 d’origine.</span><span class="sxs-lookup"><span data-stu-id="88aba-160">After the password synchronization agent has the encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and the salt to generate a key to decrypt the received data back to its original MD4 format.</span></span> <span data-ttu-id="88aba-161">L’agent de synchronisation de mots de passe n’a accès à aucun moment au mot de passe en clair.</span><span class="sxs-lookup"><span data-stu-id="88aba-161">At no point does the password synchronization agent have access to the clear text password.</span></span> <span data-ttu-id="88aba-162">L’utilisation de MD5 par l’agent de synchronisation de mots de passe est strictement destinée à assurer la compatibilité du protocole de réplication avec le contrôleur de domaine, et uniquement en local entre le contrôleur de domaine et l’agent de synchronisation de mots de passe.</span><span class="sxs-lookup"><span data-stu-id="88aba-162">The password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with the DC, and it is only used on premises between the DC and the password synchronization agent.</span></span>
4.  <span data-ttu-id="88aba-163">L’agent de synchronisation de mots de passe étend le hachage de mot de passe binaire de 16 octets à 64 octets en convertissant d’abord le hachage en chaîne hexadécimale de 32 octets, puis en reconvertissant cette chaîne au format binaire avec l’encodage UTF-16.</span><span class="sxs-lookup"><span data-stu-id="88aba-163">The password synchronization agent expands the 16-byte binary password hash to 64 bytes by first converting the hash to a 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="88aba-164">L’agent de synchronisation de mots de passe ajoute un salt, composé d’un salt de 10 octets de long, au fichier binaire de 64 octets pour protéger davantage le hachage d’origine.</span><span class="sxs-lookup"><span data-stu-id="88aba-164">The password synchronization agent adds a salt, consisting of a 10-byte length salt, to the 64-byte binary to further protect the original hash.</span></span>
6.  <span data-ttu-id="88aba-165">L’agent de synchronisation de mots de passe combine alors le hachage MD4 et le salt, puis place le tout dans la fonction [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt).</span><span class="sxs-lookup"><span data-stu-id="88aba-165">The password synchronization agent then combines the MD4 hash plus salt, and inputs it into the [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="88aba-166">1000 répétitions de l’algorithme de hachage à clé [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="88aba-166">1000 iterations of the [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="88aba-167">L’agent de synchronisation de mot de passe prend le hachage de 32 octets résultant, concatène le salt et le nombre d’itérations SHA256 (pour une utilisation par Azure AD), puis transmet la chaîne d’Azure AD Connect à Azure AD par SSL.</span><span class="sxs-lookup"><span data-stu-id="88aba-167">The password synchronization agent takes the resulting 32-byte hash, concatenates both the salt and the number of SHA256 iterations to it (for use by Azure AD), then transmits the string from Azure AD Connect to Azure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="88aba-168">Lorsqu’un utilisateur tente de se connecter à Azure AD et entre son mot de passe, le mot de passe est traité par le même processus MD4+salt+PBKDF2+HMAC-SHA256.</span><span class="sxs-lookup"><span data-stu-id="88aba-168">When a user attempts to sign in to Azure AD and enters their password, the password is run through the same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="88aba-169">Si le hachage résultant correspond au hachage stocké dans Azure AD, l’utilisateur a entré le bon mot de passe et est authentifié.</span><span class="sxs-lookup"><span data-stu-id="88aba-169">If the resulting hash matches the hash stored in Azure AD, the user has entered the correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="88aba-170">Le hachage MD4 d’origine n’est pas transmis à Azure AD.</span><span class="sxs-lookup"><span data-stu-id="88aba-170">The original MD4 hash is not transmitted to Azure AD.</span></span> <span data-ttu-id="88aba-171">Au lieu de cela, le hachage SHA256 du hachage MD4 d’origine est transmis.</span><span class="sxs-lookup"><span data-stu-id="88aba-171">Instead, the SHA256 hash of the original MD4 hash is transmitted.</span></span> <span data-ttu-id="88aba-172">Par conséquent, si le hachage stocké dans Azure AD est obtenu, il ne peut pas être utilisé dans une attaque de type pass-the-hash locale.</span><span class="sxs-lookup"><span data-stu-id="88aba-172">As a result, if the hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="88aba-173">Fonctionnement de la synchronisation de mot de passe avec Azure Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="88aba-173">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="88aba-174">Vous pouvez également utiliser la fonctionnalité de synchronisation de mot de passe pour synchroniser vos mots de passe locaux avec les [Services de domaine Azure Active Directory](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="88aba-174">You can also use the password synchronization feature to synchronize your on-premises passwords to [Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="88aba-175">Ce scénario permet à l’instance Azure Active Directory Domain Services d’authentifier vos utilisateurs dans le cloud avec toutes les méthodes disponibles dans votre instance Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="88aba-175">In this scenario, the Azure Active Directory Domain Services instance authenticates your users in the cloud with all the methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="88aba-176">L’expérience de ce scénario est similaire à l’utilisation de l’outil de migration Active Directory (ADMT) dans un environnement local.</span><span class="sxs-lookup"><span data-stu-id="88aba-176">The experience of this scenario is similar to using the Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="88aba-177">Sécurité</span><span class="sxs-lookup"><span data-stu-id="88aba-177">Security considerations</span></span>
<span data-ttu-id="88aba-178">Lors de la synchronisation des mots de passe, la version en texte brut de votre mot de passe n’est exposée ni à la fonctionnalité de synchronisation de mot de passe, ni à Azure AD, ni à l’un des services associés.</span><span class="sxs-lookup"><span data-stu-id="88aba-178">When synchronizing passwords, the plain-text version of your password is not exposed to the password synchronization feature, to Azure AD, or any of the associated services.</span></span>

<span data-ttu-id="88aba-179">L’authentification de l’utilisateur s’effectue par rapport à Azure AD plutôt que sur l’instance Active Directory de l’organisation.</span><span class="sxs-lookup"><span data-stu-id="88aba-179">User authentication takes place against Azure AD rather than against the organization's own Active Directory instance.</span></span> <span data-ttu-id="88aba-180">Si votre organisation a des inquiétudes à l’idée que des données de mot de passe puissent quitter les locaux sous une forme quelconque, n’oubliez pas que les données de mot de passe SHA256 stockées dans Azure AD (un hachage du hachage MD4 d’origine) sont nettement plus sécurisées que celles stockées dans Active Directory.</span><span class="sxs-lookup"><span data-stu-id="88aba-180">If your organization has concerns about password data in any form leaving the premises, consider the fact that the SHA256 password data stored in Azure AD--a hash of the original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="88aba-181">En outre, étant donné que ce hachage SHA256 ne peut pas être déchiffré, il ne peut pas être réimporté dans l’environnement Active Directory de l’organisation et présenté sous la forme d’un mot de passe utilisateur valide dans une attaque de type pass-the-hash.</span><span class="sxs-lookup"><span data-stu-id="88aba-181">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back to the organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="88aba-182">Remarques sur les stratégies de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-182">Password policy considerations</span></span>
<span data-ttu-id="88aba-183">Deux types de stratégies de mot de passe sont affectés par l’activation de la synchronisation de mot de passe :</span><span class="sxs-lookup"><span data-stu-id="88aba-183">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="88aba-184">Stratégie de complexité de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-184">Password complexity policy</span></span>
* <span data-ttu-id="88aba-185">Stratégie d’expiration de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-185">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="88aba-186">Stratégie de complexité de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-186">Password complexity policy</span></span>  
<span data-ttu-id="88aba-187">Quand vous activez la synchronisation de mot de passe, les stratégies de complexité de mot de passe dans votre instance Active Directory locale remplacent les stratégies de complexité dans le cloud pour les utilisateurs synchronisés.</span><span class="sxs-lookup"><span data-stu-id="88aba-187">When password synchronization is enabled, the password complexity policies in your on-premises Active Directory instance override complexity policies in the cloud for synchronized users.</span></span> <span data-ttu-id="88aba-188">Vous pouvez utiliser tous les mots de passe valides de votre instance Active Directory locale pour accéder aux services Azure AD.</span><span class="sxs-lookup"><span data-stu-id="88aba-188">You can use all of the valid passwords from your on-premises Active Directory instance to access Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="88aba-189">Les mots de passe des utilisateurs créés directement dans le cloud sont toujours soumis aux stratégies de mot de passe définies dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="88aba-189">Passwords for users that are created directly in the cloud are still subject to password policies as defined in the cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="88aba-190">Stratégie d’expiration de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-190">Password expiration policy</span></span>  
<span data-ttu-id="88aba-191">Si un utilisateur figure dans la portée de synchronisation de mot de passe, le mot de passe de compte cloud a pour valeur « *Ne jamais expirer* ».</span><span class="sxs-lookup"><span data-stu-id="88aba-191">If a user is in the scope of password synchronization, the cloud account password is set to *Never Expire*.</span></span>

<span data-ttu-id="88aba-192">Vous pouvez continuer à vous connecter aux services cloud à l’aide d’un mot de passe synchronisé qui a expiré dans votre environnement local.</span><span class="sxs-lookup"><span data-stu-id="88aba-192">You can continue to sign in to your cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="88aba-193">Votre mot de passe cloud est mis à jour la prochaine fois que vous modifiez le mot de passe dans l’environnement local.</span><span class="sxs-lookup"><span data-stu-id="88aba-193">Your cloud password is updated the next time you change the password in the on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="88aba-194">Expiration du compte</span><span class="sxs-lookup"><span data-stu-id="88aba-194">Account expiration</span></span>
<span data-ttu-id="88aba-195">Si votre organisation utilise l’attribut accountExpires dans le cadre de la gestion des comptes utilisateur, n’oubliez pas que cet attribut n’est pas synchronisé avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="88aba-195">If your organization uses the accountExpires attribute as part of user account management, be aware that this attribute is not synchronized to Azure AD.</span></span> <span data-ttu-id="88aba-196">Par conséquent, un compte Active Directory expiré dans un environnement configuré pour la synchronisation de mots de passe sera toujours actif dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="88aba-196">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="88aba-197">Il est recommandé, si le compte a expiré, qu’une action de workflow doive déclencher un script PowerShell qui désactive le compte Azure AD de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="88aba-197">We recommend that if the account is expired, a workflow action should trigger a PowerShell script that disables the user's Azure AD account.</span></span> <span data-ttu-id="88aba-198">Inversement, lorsque le compte est activé, l’instance Azure AD doit être activée.</span><span class="sxs-lookup"><span data-stu-id="88aba-198">Conversely, when the account is turned on, the Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="88aba-199">Remplacement des mots de passe synchronisés</span><span class="sxs-lookup"><span data-stu-id="88aba-199">Overwrite synchronized passwords</span></span>
<span data-ttu-id="88aba-200">Un administrateur peut réinitialiser manuellement votre mot de passe à l’aide de Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="88aba-200">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="88aba-201">Dans ce cas, le nouveau mot de passe remplace votre mot de passe synchronisé et toutes les stratégies de mot de passe définies dans le cloud s’appliquent au nouveau mot de passe.</span><span class="sxs-lookup"><span data-stu-id="88aba-201">In this case, the new password overrides your synchronized password, and all password policies defined in the cloud are applied to the new password.</span></span>

<span data-ttu-id="88aba-202">Si vous modifiez de nouveau votre mot de passe local, le nouveau mot de passe est synchronisé avec le cloud et il remplace le mot de passe mis à jour manuellement.</span><span class="sxs-lookup"><span data-stu-id="88aba-202">If you change your on-premises password again, the new password is synchronized to the cloud, and it overrides the manually updated password.</span></span>

<span data-ttu-id="88aba-203">La synchronisation d’un mot de passe n’a aucun impact sur l’utilisateur Azure connecté.</span><span class="sxs-lookup"><span data-stu-id="88aba-203">The synchronization of a password has no impact on the Azure user who is signed in.</span></span> <span data-ttu-id="88aba-204">Votre session de service cloud en cours n’est pas immédiatement affectée par une modification de mot de passe synchronisé effectuée lorsque vous êtes connecté à un service cloud.</span><span class="sxs-lookup"><span data-stu-id="88aba-204">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in to a cloud service.</span></span> <span data-ttu-id="88aba-205">L’option Maintenir la connexion (KMSI) étend la durée de cette différence.</span><span class="sxs-lookup"><span data-stu-id="88aba-205">KMSI extends the duration of this difference.</span></span> <span data-ttu-id="88aba-206">Lorsque le service cloud vous oblige à vous authentifier à nouveau, vous devez fournir votre nouveau mot de passe.</span><span class="sxs-lookup"><span data-stu-id="88aba-206">When the cloud service requires you to authenticate again, you need to provide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="88aba-207">Autres avantages</span><span class="sxs-lookup"><span data-stu-id="88aba-207">Additional advantages</span></span>

- <span data-ttu-id="88aba-208">En règle générale, la synchronisation de mots de passe est plus simple à implémenter qu’un service de fédération.</span><span class="sxs-lookup"><span data-stu-id="88aba-208">Generally, password synchronization is simpler to implement than a federation service.</span></span> <span data-ttu-id="88aba-209">Elle ne nécessite pas de serveurs supplémentaires et élimine la dépendance vis-à-vis d’un service de fédération hautement disponible pour authentifier les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="88aba-209">It doesn't require any additional servers, and eliminates dependence on a highly available federation service to authenticate users.</span></span> 
- <span data-ttu-id="88aba-210">La synchronisation de mot de passe peut également être activée en plus de la fédération.</span><span class="sxs-lookup"><span data-stu-id="88aba-210">Password synchronization can also be enabled in addition to federation.</span></span> <span data-ttu-id="88aba-211">Vous pouvez l’utiliser comme solution de secours si votre service de fédération connaît une défaillance.</span><span class="sxs-lookup"><span data-stu-id="88aba-211">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="88aba-212">Activer la synchronisation de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-212">Enable password synchronization</span></span>
<span data-ttu-id="88aba-213">La synchronisation de mot de passe est activée automatiquement si vous installez Azure AD Connect avec la **configuration rapide**.</span><span class="sxs-lookup"><span data-stu-id="88aba-213">When you install Azure AD Connect by using the **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="88aba-214">Pour plus d’informations, voir [Prise en main d’Azure AD Connect avec la configuration rapide](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="88aba-214">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="88aba-215">Si vous utilisez des paramètres personnalisés lors de l’installation d’Azure AD Connect, la synchronisation de mot de passe est disponible sur la page de connexion utilisateur.</span><span class="sxs-lookup"><span data-stu-id="88aba-215">If you use custom settings when you install Azure AD Connect, password synchronization is available on the user sign-in page.</span></span> <span data-ttu-id="88aba-216">Pour plus d’informations, voir [Installation personnalisée d’Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="88aba-216">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Activation de la synchronisation de mot de passe](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="88aba-218">Synchronisation du mot de passe et FIPS</span><span class="sxs-lookup"><span data-stu-id="88aba-218">Password synchronization and FIPS</span></span>
<span data-ttu-id="88aba-219">Si votre serveur a été verrouillé selon la norme Federal Information Processing Standard (FIPS), MD5 est désactivé.</span><span class="sxs-lookup"><span data-stu-id="88aba-219">If your server has been locked down according to Federal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="88aba-220">**Pour activer MD5 pour la synchronisation de mot de passe, procédez comme suit :**</span><span class="sxs-lookup"><span data-stu-id="88aba-220">**To enable MD5 for password synchronization, perform the following steps:**</span></span>

1. <span data-ttu-id="88aba-221">Accédez à %programfiles%\Azure AD Sync\Bin.</span><span class="sxs-lookup"><span data-stu-id="88aba-221">Go to %programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="88aba-222">Ouvrez miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="88aba-222">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="88aba-223">Accédez au nœud configuration/runtime (à la fin du fichier).</span><span class="sxs-lookup"><span data-stu-id="88aba-223">Go to the configuration/runtime node at the end of the file.</span></span>
4. <span data-ttu-id="88aba-224">Ajoutez le nœud suivant : `<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="88aba-224">Add the following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="88aba-225">Enregistrez vos modifications.</span><span class="sxs-lookup"><span data-stu-id="88aba-225">Save your changes.</span></span>

<span data-ttu-id="88aba-226">Pour référence, cet extrait de code indique ce que vous devez obtenir :</span><span class="sxs-lookup"><span data-stu-id="88aba-226">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="88aba-227">Pour plus d'informations sur la sécurité et FIPS, consultez [Synchronisation, cryptage et conformité à la norme FIPS du mot de passe AAD](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span><span class="sxs-lookup"><span data-stu-id="88aba-227">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="88aba-228">Résoudre les problèmes de synchronisation de mot de passe</span><span class="sxs-lookup"><span data-stu-id="88aba-228">Troubleshoot password synchronization</span></span>
<span data-ttu-id="88aba-229">Si vous avez des problèmes avec la synchronisation de mot de passe, consultez [Résolution des problèmes de synchronisation du mot de passe](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="88aba-229">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="88aba-230">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="88aba-230">Next steps</span></span>
* [<span data-ttu-id="88aba-231">Azure AD Connect Sync : Personnalisation des options de synchronisation</span><span class="sxs-lookup"><span data-stu-id="88aba-231">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="88aba-232">Intégration de vos identités locales avec Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="88aba-232">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
