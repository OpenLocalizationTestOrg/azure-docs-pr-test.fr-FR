---
title: "Azure AD Connect : Présentation de l’approvisionnement déclaratif | Microsoft Docs"
description: "Explique le modèle de configuration de l’approvisionnement déclaratif dans Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: cfbb870d-be7d-47b3-ba01-9e78121f0067
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 7497ec2ca658c3790227c56ef1755d9a1cb74e0a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-declarative-provisioning"></a><span data-ttu-id="8235c-103">Azure AD Connect Sync : présentation de l’approvisionnement déclaratif</span><span class="sxs-lookup"><span data-stu-id="8235c-103">Azure AD Connect sync: Understanding Declarative Provisioning</span></span>
<span data-ttu-id="8235c-104">Cette rubrique présente le modèle de configuration dans Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8235c-104">This topic explains the configuration model in Azure AD Connect.</span></span> <span data-ttu-id="8235c-105">Ce modèle est appelé « approvisionnement déclaratif » et vous permet de modifier la configuration en toute simplicité.</span><span class="sxs-lookup"><span data-stu-id="8235c-105">The model is called Declarative Provisioning and it allows you to make a configuration change with ease.</span></span> <span data-ttu-id="8235c-106">De nombreux éléments décrits dans cette rubrique sont des éléments avancés, non indispensables pour la plupart des scénarios clients.</span><span class="sxs-lookup"><span data-stu-id="8235c-106">Many things described in this topic are advanced and not required for most customer scenarios.</span></span>

## <a name="overview"></a><span data-ttu-id="8235c-107">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="8235c-107">Overview</span></span>
<span data-ttu-id="8235c-108">L’approvisionnement déclaratif correspond au traitement des objets provenant d’un répertoire source connecté. Il détermine comment l’objet et les attributs doivent être transformés à partir d’une source vers une cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-108">Declarative provisioning is processing objects coming in from a source connected directory and determines how the object and attributes should be transformed from a source to a target.</span></span> <span data-ttu-id="8235c-109">Les objets sont traités dans un pipeline de synchronisation identique pour les règles de trafic entrant et sortant.</span><span class="sxs-lookup"><span data-stu-id="8235c-109">An object is processed in a sync pipeline and the pipeline is the same for inbound and outbound rules.</span></span> <span data-ttu-id="8235c-110">Les règles de trafic entrant vont d’un espace de connecteur au métaverse et les règles de trafic sortant vont du métaverse vers un espace de connecteur.</span><span class="sxs-lookup"><span data-stu-id="8235c-110">An inbound rule is from a connector space to the metaverse and an outbound rule is from the metaverse to a connector space.</span></span>

![Pipeline de synchronisation](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/sync1.png)  

<span data-ttu-id="8235c-112">Le pipeline a plusieurs modules.</span><span class="sxs-lookup"><span data-stu-id="8235c-112">The pipeline has several different modules.</span></span> <span data-ttu-id="8235c-113">Chacun d’eux est responsable d’un concept de synchronisation des objets.</span><span class="sxs-lookup"><span data-stu-id="8235c-113">Each one is responsible for one concept in object synchronization.</span></span>

![Pipeline de synchronisation](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/pipeline.png)  

* <span data-ttu-id="8235c-115">Source, l’objet source</span><span class="sxs-lookup"><span data-stu-id="8235c-115">Source, The source object</span></span>
* <span data-ttu-id="8235c-116">[Scope](#scope), recherche toutes les règles de synchronisation dans la portée</span><span class="sxs-lookup"><span data-stu-id="8235c-116">[Scope](#scope), Finds all sync rules that are in scope</span></span>
* <span data-ttu-id="8235c-117">[Join](#join), détermine la relation entre l’espace de connecteur et le métaverse</span><span class="sxs-lookup"><span data-stu-id="8235c-117">[Join](#join), Determines relationship between connector space and metaverse</span></span>
* <span data-ttu-id="8235c-118">[Transform](#transform), calcule comment les attributs doivent être transformés et flux</span><span class="sxs-lookup"><span data-stu-id="8235c-118">[Transform](#transform), Calculates how attributes should be transformed and flow</span></span>
* <span data-ttu-id="8235c-119">[Precedence](#precedence), résout les contributions d’attribut conflictuelles</span><span class="sxs-lookup"><span data-stu-id="8235c-119">[Precedence](#precedence), Resolves conflicting attribute contributions</span></span>
* <span data-ttu-id="8235c-120">Target, l’objet cible</span><span class="sxs-lookup"><span data-stu-id="8235c-120">Target, The target object</span></span>

## <a name="scope"></a><span data-ttu-id="8235c-121">Scope</span><span class="sxs-lookup"><span data-stu-id="8235c-121">Scope</span></span>
<span data-ttu-id="8235c-122">Le module Scope évalue un objet et détermine les règles qui sont dans la portée et doivent être incluses lors du traitement.</span><span class="sxs-lookup"><span data-stu-id="8235c-122">The scope module is evaluating an object and determines the rules that are in scope and should be included in the processing.</span></span> <span data-ttu-id="8235c-123">En fonction des valeurs d’attributs de l’objet, différentes règles de synchronisation sont évaluées pour être dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-123">Depending on the attributes values on the object, different sync rules are evaluated to be in scope.</span></span> <span data-ttu-id="8235c-124">Par exemple, un utilisateur désactivé sans boîte aux lettres Exchange possède des règles différentes d’un utilisateur activé avec une boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="8235c-124">For example, a disabled user with no Exchange mailbox does have different rules than an enabled user with a mailbox.</span></span>  
![Scope](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope1.png)  

<span data-ttu-id="8235c-126">La portée est définie selon des groupes et des clauses.</span><span class="sxs-lookup"><span data-stu-id="8235c-126">The scope is defined as groups and clauses.</span></span> <span data-ttu-id="8235c-127">Les clauses sont à l’intérieur des groupes.</span><span class="sxs-lookup"><span data-stu-id="8235c-127">The clauses are inside a group.</span></span> <span data-ttu-id="8235c-128">Un opérateur logique AND est utilisé entre toutes les clauses d’un groupe.</span><span class="sxs-lookup"><span data-stu-id="8235c-128">A logical AND is used between all clauses in a group.</span></span> <span data-ttu-id="8235c-129">Par exemple, (department = IT AND country = Denmark).</span><span class="sxs-lookup"><span data-stu-id="8235c-129">For example, (department =IT AND country = Denmark).</span></span> <span data-ttu-id="8235c-130">Un opérateur logique OR est utilisé entre les groupes.</span><span class="sxs-lookup"><span data-stu-id="8235c-130">A logical OR is used between groups.</span></span>

![Scope](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope2.png)  
<span data-ttu-id="8235c-132">La portée de cette image doit être lue comme (department = IT AND country = Denmark) OR (country = Sweden).</span><span class="sxs-lookup"><span data-stu-id="8235c-132">The scope in this picture should be read as (department = IT AND country = Denmark) OR (country=Sweden).</span></span> <span data-ttu-id="8235c-133">Si le groupe 1 ou le groupe 2 est évalué comme true, la règle est dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-133">If either group 1 or group 2 is evaluated to true, then the rule is in scope.</span></span>

<span data-ttu-id="8235c-134">Le module Scope prend en charge les opérations suivantes.</span><span class="sxs-lookup"><span data-stu-id="8235c-134">The scope module supports the following operations.</span></span>

| <span data-ttu-id="8235c-135">Opération</span><span class="sxs-lookup"><span data-stu-id="8235c-135">Operation</span></span> | <span data-ttu-id="8235c-136">Description</span><span class="sxs-lookup"><span data-stu-id="8235c-136">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8235c-137">EQUAL, NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="8235c-137">EQUAL, NOTEQUAL</span></span> |<span data-ttu-id="8235c-138">Comparaison de chaînes qui évalue si la valeur est égale à la valeur de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-138">A string compare that evaluates if value is equal to the value in the attribute.</span></span> <span data-ttu-id="8235c-139">Pour les attributs à valeurs multiples, consultez ISIN et ISNOTIN.</span><span class="sxs-lookup"><span data-stu-id="8235c-139">For multi-valued attributes, see ISIN and ISNOTIN.</span></span> |
| <span data-ttu-id="8235c-140">LESSTHAN, LESSTHAN_OR_EQUAL</span><span class="sxs-lookup"><span data-stu-id="8235c-140">LESSTHAN, LESSTHAN_OR_EQUAL</span></span> |<span data-ttu-id="8235c-141">Comparaison de chaînes qui évalue si la valeur est inférieure à la valeur de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-141">A string compare that evaluates if value is less than of the value in the attribute.</span></span> |
| <span data-ttu-id="8235c-142">CONTAINS, NOTCONTAINS</span><span class="sxs-lookup"><span data-stu-id="8235c-142">CONTAINS, NOTCONTAINS</span></span> |<span data-ttu-id="8235c-143">Comparaison de chaînes qui évalue si la valeur se trouve dans la valeur de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-143">A string compare that evaluates if value can be found somewhere inside value in the attribute.</span></span> |
| <span data-ttu-id="8235c-144">STARTSWITH, NOTSTARTSWITH</span><span class="sxs-lookup"><span data-stu-id="8235c-144">STARTSWITH, NOTSTARTSWITH</span></span> |<span data-ttu-id="8235c-145">Comparaison de chaînes qui évalue si la valeur est au début de la valeur de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-145">A string compare that evaluates if value is in the beginning of the value in the attribute.</span></span> |
| <span data-ttu-id="8235c-146">ENDSWITH, NOTENDSWITH</span><span class="sxs-lookup"><span data-stu-id="8235c-146">ENDSWITH, NOTENDSWITH</span></span> |<span data-ttu-id="8235c-147">Comparaison de chaînes qui évalue si la valeur est à la fin de la valeur de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-147">A string compare that evaluates if value is in the end of the value in the attribute.</span></span> |
| <span data-ttu-id="8235c-148">GREATERTHAN, GREATERTHAN_OR_EQUAL</span><span class="sxs-lookup"><span data-stu-id="8235c-148">GREATERTHAN, GREATERTHAN_OR_EQUAL</span></span> |<span data-ttu-id="8235c-149">Comparaison de chaînes qui évalue si la valeur est supérieure à la valeur de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-149">A string compare that evaluates if value is greater than of the value in the attribute.</span></span> |
| <span data-ttu-id="8235c-150">ISNULL, ISNOTNULL</span><span class="sxs-lookup"><span data-stu-id="8235c-150">ISNULL, ISNOTNULL</span></span> |<span data-ttu-id="8235c-151">Évalue si l’attribut est absent de l’objet.</span><span class="sxs-lookup"><span data-stu-id="8235c-151">Evaluates if the attribute is absent from the object.</span></span> <span data-ttu-id="8235c-152">Si l’attribut n’est pas présent et par conséquent « null », la règle est dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-152">If the attribute is not present and therefore null, then the rule is in scope.</span></span> |
| <span data-ttu-id="8235c-153">ISIN, ISNOTIN</span><span class="sxs-lookup"><span data-stu-id="8235c-153">ISIN, ISNOTIN</span></span> |<span data-ttu-id="8235c-154">Évalue si la valeur est présente dans l’attribut défini.</span><span class="sxs-lookup"><span data-stu-id="8235c-154">Evaluates if the value is present in the defined attribute.</span></span> <span data-ttu-id="8235c-155">Cette opération est la variation à valeurs multiples des opérations EQUAL et NOTEQUAL.</span><span class="sxs-lookup"><span data-stu-id="8235c-155">This operation is the multi-valued variation of EQUAL and NOTEQUAL.</span></span> <span data-ttu-id="8235c-156">L’attribut est censé être un attribut à valeurs multiples et si la valeur se trouve dans une des valeurs d’attribut, alors la règle est dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-156">The attribute is supposed to be a multi-valued attribute and if the value can be found in any of the attribute values, then the rule is in scope.</span></span> |
| <span data-ttu-id="8235c-157">ISBITSET, ISNOTBITSET</span><span class="sxs-lookup"><span data-stu-id="8235c-157">ISBITSET, ISNOTBITSET</span></span> |<span data-ttu-id="8235c-158">Évalue si un bit particulier est défini.</span><span class="sxs-lookup"><span data-stu-id="8235c-158">Evaluates if a particular bit is set.</span></span> <span data-ttu-id="8235c-159">Peut par exemple être utilisé pour évaluer les bits dans userAccountControl pour voir si un utilisateur est activé ou désactivé.</span><span class="sxs-lookup"><span data-stu-id="8235c-159">For example, can be used to evaluate the bits in userAccountControl to see if a user is enabled or disabled.</span></span> |
| <span data-ttu-id="8235c-160">ISMEMBEROF, ISNOTMEMBEROF</span><span class="sxs-lookup"><span data-stu-id="8235c-160">ISMEMBEROF, ISNOTMEMBEROF</span></span> |<span data-ttu-id="8235c-161">La valeur doit contenir un nom unique vers un groupe dans l’espace de connecteur.</span><span class="sxs-lookup"><span data-stu-id="8235c-161">The value should contain a DN to a group in the connector space.</span></span> <span data-ttu-id="8235c-162">Si l’objet est membre du groupe spécifié, la règle est dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-162">If the object is a member of the group specified, the rule is in scope.</span></span> |

## <a name="join"></a><span data-ttu-id="8235c-163">Join</span><span class="sxs-lookup"><span data-stu-id="8235c-163">Join</span></span>
<span data-ttu-id="8235c-164">Le module Join dans le pipeline de synchronisation est chargé de rechercher la relation entre l’objet de la source et un objet dans la cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-164">The join module in the sync pipeline is responsible for finding the relationship between the object in the source and an object in the target.</span></span> <span data-ttu-id="8235c-165">Sur une règle de trafic entrant, cette relation serait un objet dans un espace de connecteur ayant une relation avec un objet dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="8235c-165">On an inbound rule, this relationship would be an object in a connector space finding a relationship to an object in the metaverse.</span></span>  
![Jointure entre cs et mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join1.png)  
<span data-ttu-id="8235c-167">L’objectif est de voir si une relation doit être établie avec un objet créé par un autre connecteur et se trouvant déjà dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="8235c-167">The goal is to see if there is an object already in the metaverse, created by another Connector, it should be associated with.</span></span> <span data-ttu-id="8235c-168">Par exemple, dans une forêt de ressources de comptes, l’utilisateur de la forêt de comptes doit être associé à l’utilisateur de la forêt de ressources.</span><span class="sxs-lookup"><span data-stu-id="8235c-168">For example, in an account-resource forest the user from the account forest should be joined with the user from the resource forest.</span></span>

<span data-ttu-id="8235c-169">Les jointures sont principalement utilisées sur les règles de trafic entrant, pour joindre les objets d’espace de connecteur au même objet dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="8235c-169">Joins are used mostly on inbound rules to join connector space objects together to the same metaverse object.</span></span>

<span data-ttu-id="8235c-170">Les jointures sont définies comme un ou plusieurs groupes.</span><span class="sxs-lookup"><span data-stu-id="8235c-170">The joins are defined as one or more groups.</span></span> <span data-ttu-id="8235c-171">À l’intérieur d’un groupe, il existe des clauses.</span><span class="sxs-lookup"><span data-stu-id="8235c-171">Inside a group, you have clauses.</span></span> <span data-ttu-id="8235c-172">Un opérateur logique AND est utilisé entre toutes les clauses d’un groupe.</span><span class="sxs-lookup"><span data-stu-id="8235c-172">A logical AND is used between all clauses in a group.</span></span> <span data-ttu-id="8235c-173">Un opérateur logique OR est utilisé entre les groupes.</span><span class="sxs-lookup"><span data-stu-id="8235c-173">A logical OR is used between groups.</span></span> <span data-ttu-id="8235c-174">Les groupes sont traités de haut en bas.</span><span class="sxs-lookup"><span data-stu-id="8235c-174">The groups are processed in order from top to bottom.</span></span> <span data-ttu-id="8235c-175">Lorsqu’un groupe a trouvé une correspondance exacte avec un objet dans la cible, aucune autre règle de jointure n’est évaluée.</span><span class="sxs-lookup"><span data-stu-id="8235c-175">When one group has found exactly one match with an object in the target, then no other join rules are evaluated.</span></span> <span data-ttu-id="8235c-176">Si aucun ou plus d’un objet est trouvé, le traitement continue pour le groupe de règles suivant.</span><span class="sxs-lookup"><span data-stu-id="8235c-176">If zero or more than one object is found, processing continues to the next group of rules.</span></span> <span data-ttu-id="8235c-177">Pour cette raison, les règles doivent être créées dans l’ordre, de la plus explicite à la moins explicite.</span><span class="sxs-lookup"><span data-stu-id="8235c-177">For this reason, the rules should be created in the order of most explicit first and more fuzzy at the end.</span></span>  
![Définition de jointure](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join2.png)  
<span data-ttu-id="8235c-179">Les jointures dans cette image sont traitées de haut en bas.</span><span class="sxs-lookup"><span data-stu-id="8235c-179">The joins in this picture are processed from top to bottom.</span></span> <span data-ttu-id="8235c-180">Le pipeline de synchronisation détecte d’abord si une correspondance sur employeeID existe.</span><span class="sxs-lookup"><span data-stu-id="8235c-180">First the sync pipeline sees if there is a match on employeeID.</span></span> <span data-ttu-id="8235c-181">Si ce n’est pas le cas, la deuxième règle détecte si le nom du compte peut être utilisé pour joindre les objets.</span><span class="sxs-lookup"><span data-stu-id="8235c-181">If not, the second rule sees if the account name can be used to join the objects together.</span></span> <span data-ttu-id="8235c-182">Si aucune correspondance n’est trouvée, la troisième et dernière règle utilise le nom d’utilisateur pour trouver une correspondance moins stricte.</span><span class="sxs-lookup"><span data-stu-id="8235c-182">If that is not a match either, the third and final rule is a more fuzzy match by using the name of user.</span></span>

<span data-ttu-id="8235c-183">Si toutes les règles de jointure ont été évaluées et qu’il n’existe aucune correspondance exacte, le **type de lien** indiqué dans la page de **description** est utilisé.</span><span class="sxs-lookup"><span data-stu-id="8235c-183">If all join rules have been evaluated and there is not exactly one match, the **Link Type** on the **Description** page is used.</span></span> <span data-ttu-id="8235c-184">Si cette option a la valeur **Provision**, un nouvel objet est créé dans la cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-184">If this option is set to **Provision**, then a new object in the target is created.</span></span>  
<span data-ttu-id="8235c-185">![Approvisionnement ou jointure](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)</span><span class="sxs-lookup"><span data-stu-id="8235c-185">![Provision or join](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)</span></span>  

<span data-ttu-id="8235c-186">Un objet doit avoir une seule règle de synchronisation avec des règles de jointure dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-186">An object should only have one single sync rule with join rules in scope.</span></span> <span data-ttu-id="8235c-187">S’il existe plusieurs règles de synchronisation dans lesquelles la jointure est définie, une erreur se produit.</span><span class="sxs-lookup"><span data-stu-id="8235c-187">If there are multiple sync rules where join is defined, an error occurs.</span></span> <span data-ttu-id="8235c-188">La précédence n’est pas utilisée pour résoudre les conflits de jointure.</span><span class="sxs-lookup"><span data-stu-id="8235c-188">Precedence is not used to resolve join conflicts.</span></span> <span data-ttu-id="8235c-189">Un objet doit avoir une règle de jointure dans la portée des attributs pour que la circulation se fasse dans le même sens en entrée et en sortie.</span><span class="sxs-lookup"><span data-stu-id="8235c-189">An object must have a join rule in scope for attributes to flow with the same inbound/outbound direction.</span></span> <span data-ttu-id="8235c-190">Si vous avez besoin de faire circuler les attributs en entrée et en sortie sur le même objet, vous devez disposer à la fois d’une règle de synchronisation de trafic entrant et de trafic sortant avec une jointure.</span><span class="sxs-lookup"><span data-stu-id="8235c-190">If you need to flow attributes both inbound and outbound to the same object, you must have both an inbound and an outbound sync rule with join.</span></span>

<span data-ttu-id="8235c-191">La jointure en sortie a un comportement spécial lorsqu’elle tente d’approvisionner un objet sur un espace de connecteur cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-191">Outbound join has a special behavior when it tries to provision an object to a target connector space.</span></span> <span data-ttu-id="8235c-192">L’attribut de nom unique est utilisé pour essayer en premier lieu une jointure inverse.</span><span class="sxs-lookup"><span data-stu-id="8235c-192">The DN attribute is used to first try a reverse-join.</span></span> <span data-ttu-id="8235c-193">Si l’espace de connecteur cible contient déjà un objet portant le même nom unique, les objets sont joints.</span><span class="sxs-lookup"><span data-stu-id="8235c-193">If there is already an object in the target connector space with the same DN, the objects are joined.</span></span>

<span data-ttu-id="8235c-194">Le module Join est évalué une seule fois lorsqu’une nouvelle règle de synchronisation arrive dans l’étendue.</span><span class="sxs-lookup"><span data-stu-id="8235c-194">The join module is only evaluated once when a new sync rule comes into scope.</span></span> <span data-ttu-id="8235c-195">Lorsqu’un objet est joint, il n’est pas séparé, même si le critère de jointure n’est plus rempli.</span><span class="sxs-lookup"><span data-stu-id="8235c-195">When an object has joined, it is not disjoining even if the join criteria is no longer satisfied.</span></span> <span data-ttu-id="8235c-196">Si vous souhaitez séparer un objet, la règle de synchronisation qui joint les objets doit être hors de portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-196">If you want to disjoin an object, the sync rule that joined the objects must go out of scope.</span></span>

### <a name="metaverse-delete"></a><span data-ttu-id="8235c-197">Suppression du métaverse</span><span class="sxs-lookup"><span data-stu-id="8235c-197">Metaverse delete</span></span>
<span data-ttu-id="8235c-198">Un objet de métaverse demeure tant qu’une règle de synchronisation reste dans la portée, avec le**type de lien** défini sur **Provision** ou **StickyJoin**.</span><span class="sxs-lookup"><span data-stu-id="8235c-198">A metaverse object remains as long as there is one sync rule in scope with **Link Type** set to **Provision** or **StickyJoin**.</span></span> <span data-ttu-id="8235c-199">Le type StickyJoin est utilisé lorsqu’un connecteur n’est pas autorisé à approvisionner un nouvel objet dans le métaverse, mais lorsqu’il est joint, il doit être supprimé de la source avant la suppression de l’objet du métaverse.</span><span class="sxs-lookup"><span data-stu-id="8235c-199">A StickyJoin is used when a Connector is not allowed to provision a new object to the metaverse, but when it has joined, it must be deleted in the source before the metaverse object is deleted.</span></span>

<span data-ttu-id="8235c-200">Lorsqu’un objet de métaverse est supprimé, tous les objets associés à une règle de synchronisation de trafic sortant marquée **Provision** sont marqués pour suppression.</span><span class="sxs-lookup"><span data-stu-id="8235c-200">When a metaverse object is deleted, all objects associated with an outbound sync rule marked for **provision** are marked for a delete.</span></span>

## <a name="transformations"></a><span data-ttu-id="8235c-201">Transformations</span><span class="sxs-lookup"><span data-stu-id="8235c-201">Transformations</span></span>
<span data-ttu-id="8235c-202">Les transformations sont utilisées pour définir le flux d’attributs de la source vers la cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-202">The transformations are used to define how attributes should flow from the source to the target.</span></span> <span data-ttu-id="8235c-203">Les flux peuvent être des **types**suivants : Direct, Constant ou Expression.</span><span class="sxs-lookup"><span data-stu-id="8235c-203">The flows can have one of the following **flow types**: Direct, Constant, or Expression.</span></span> <span data-ttu-id="8235c-204">Un flux direct envoie la valeur de l’attribut telle quelle, sans transformation supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="8235c-204">A direct flow, flows an attribute value as-is with no additional transformations.</span></span> <span data-ttu-id="8235c-205">Un flux constant définit la valeur spécifiée.</span><span class="sxs-lookup"><span data-stu-id="8235c-205">A constant value sets the specified value.</span></span> <span data-ttu-id="8235c-206">Une expression utilise le langage d’expression d’approvisionnement déclaratif pour exprimer la manière dont la transformation doit avoir lieu.</span><span class="sxs-lookup"><span data-stu-id="8235c-206">An expression uses the declarative provisioning expression language to express how the transformation should be.</span></span> <span data-ttu-id="8235c-207">Vous trouverez des informations sur le langage d’expression dans la rubrique [Comprendre le langage d’expression d’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) .</span><span class="sxs-lookup"><span data-stu-id="8235c-207">The details for the expression language can be found in the [understanding declarative provisioning expression language](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) topic.</span></span>

![Approvisionnement ou jointure](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/transformations1.png)  

<span data-ttu-id="8235c-209">La case **Appliquer une fois** indique si l’attribut doit être défini uniquement lors de la création initiale de l’objet.</span><span class="sxs-lookup"><span data-stu-id="8235c-209">The **Apply once** checkbox defines that the attribute should only be set when the object is initially created.</span></span> <span data-ttu-id="8235c-210">Par exemple, cette configuration peut être utilisée pour définir un mot de passe initial pour un nouvel objet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8235c-210">For example, this configuration can be used to set an initial password for a new user object.</span></span>

### <a name="merging-attribute-values"></a><span data-ttu-id="8235c-211">Fusion de valeurs d’attribut</span><span class="sxs-lookup"><span data-stu-id="8235c-211">Merging attribute values</span></span>
<span data-ttu-id="8235c-212">Dans les flux d’attributs, il existe un paramètre permettant de déterminer si les attributs à valeurs multiples doivent être fusionnés à partir de plusieurs connecteurs différents.</span><span class="sxs-lookup"><span data-stu-id="8235c-212">In the attribute flows there is a setting to determine if multi-valued attributes should be merged from several different Connectors.</span></span> <span data-ttu-id="8235c-213">La valeur par défaut est **Mettre à jour**, ce qui indique que la règle de synchronisation avec la priorité la plus élevée prévaut.</span><span class="sxs-lookup"><span data-stu-id="8235c-213">The default value is **Update**, which indicates that the sync rule with highest precedence should win.</span></span>

![Types de fusion](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/mergetype.png)  

<span data-ttu-id="8235c-215">Il existe également une option **Fusionner** et **MergeCaseInsensitive** (Fusion non sensible à la casse).</span><span class="sxs-lookup"><span data-stu-id="8235c-215">There is also **Merge** and **MergeCaseInsensitive**.</span></span> <span data-ttu-id="8235c-216">Ces options permettent de fusionner des valeurs issues de différentes sources.</span><span class="sxs-lookup"><span data-stu-id="8235c-216">These options allow you to merge values from different sources.</span></span> <span data-ttu-id="8235c-217">Par exemple, elles peuvent être utilisées pour fusionner le membre ou l’attribut proxyAddresses de plusieurs forêts différentes.</span><span class="sxs-lookup"><span data-stu-id="8235c-217">For example, it can be used to merge the member or proxyAddresses attribute from several different forests.</span></span> <span data-ttu-id="8235c-218">Lorsque vous utilisez cette option, toutes les règles de synchronisation dans l’étendue d’un objet doivent utiliser le même type de fusion.</span><span class="sxs-lookup"><span data-stu-id="8235c-218">When you use this option, all sync rules in scope for an object must use the same merge type.</span></span> <span data-ttu-id="8235c-219">Vous ne pouvez pas définir **Mettre à jour** à partir d’un connecteur et **Fusionner** à partir d’un autre connecteur.</span><span class="sxs-lookup"><span data-stu-id="8235c-219">You cannot define **Update** from one Connector and **Merge** from another.</span></span> <span data-ttu-id="8235c-220">Si vous essayez, vous recevrez une erreur.</span><span class="sxs-lookup"><span data-stu-id="8235c-220">If you try, you receive an error.</span></span>

<span data-ttu-id="8235c-221">La différence entre **Fusionner** et **MergeCaseInsensitive** (Fusion non sensible à la casse) est le traitement des valeurs d’attribut en double.</span><span class="sxs-lookup"><span data-stu-id="8235c-221">The difference between **Merge** and **MergeCaseInsensitive** is how to process duplicate attribute values.</span></span> <span data-ttu-id="8235c-222">Le moteur de synchronisation s’assure qu’aucun doublon n’est inséré dans l’attribut cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-222">The sync engine makes sure duplicate values are not inserted into the target attribute.</span></span> <span data-ttu-id="8235c-223">Avec **MergeCaseInsensitive**(Fusion non sensible à la casse), les doublons présentant uniquement une différence de casse ne sont pas inclus.</span><span class="sxs-lookup"><span data-stu-id="8235c-223">With **MergeCaseInsensitive**, duplicate values with only a difference in case are not going to be present.</span></span> <span data-ttu-id="8235c-224">Par exemple, vous ne verrez pas à la fois « SMTP:bob@contoso.com » et « smtp:bob@contoso.com » dans l’attribut cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-224">For example, you should not see both "SMTP:bob@contoso.com" and "smtp:bob@contoso.com" in the target attribute.</span></span> <span data-ttu-id="8235c-225">**Fusionner** examine uniquement les valeurs exactes et plusieurs valeurs présentant uniquement une différence de casse peuvent être présentes.</span><span class="sxs-lookup"><span data-stu-id="8235c-225">**Merge** is only looking at the exact values and multiple values where there only is a difference in case might be present.</span></span>

<span data-ttu-id="8235c-226">L’option **Remplacer** est identique à **Mettre à jour**, mais elle n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="8235c-226">The option **Replace** is the same as **Update**, but it is not used.</span></span>

### <a name="control-the-attribute-flow-process"></a><span data-ttu-id="8235c-227">Contrôler le processus de flux d’attributs</span><span class="sxs-lookup"><span data-stu-id="8235c-227">Control the attribute flow process</span></span>
<span data-ttu-id="8235c-228">Lorsque plusieurs règles de synchronisation entrantes sont configurées pour contribuer au même attribut du métaverse, un principe de priorité est utilisé pour déterminer celle qui sera appliquée.</span><span class="sxs-lookup"><span data-stu-id="8235c-228">When multiple inbound sync rules are configured to contribute to the same metaverse attribute, then precedence is used to determine the winner.</span></span> <span data-ttu-id="8235c-229">La règle de synchronisation ayant la priorité la plus élevée (la valeur numérique la plus basse) transmettra sa valeur.</span><span class="sxs-lookup"><span data-stu-id="8235c-229">The sync rule with highest precedence (lowest numeric value) is going to contribute the value.</span></span> <span data-ttu-id="8235c-230">Le même principe s’applique pour les règles sortantes.</span><span class="sxs-lookup"><span data-stu-id="8235c-230">The same happens for outbound rules.</span></span> <span data-ttu-id="8235c-231">La règle de synchronisation ayant la priorité la plus élevée l’emporte et transmet sa valeur au répertoire connecté.</span><span class="sxs-lookup"><span data-stu-id="8235c-231">The sync rule with highest precedence wins and contribute the value to the connected directory.</span></span>

<span data-ttu-id="8235c-232">Dans certains cas, plutôt que de transmettre une valeur, la règle de synchronisation doit déterminer le comportement des autres règles.</span><span class="sxs-lookup"><span data-stu-id="8235c-232">In some cases, rather than contribute a value, the sync rule should determine how other rules should behave.</span></span> <span data-ttu-id="8235c-233">Certains littéraux particuliers sont utilisés dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="8235c-233">There are some special literals used for this case.</span></span>

<span data-ttu-id="8235c-234">Pour les règles de synchronisation entrantes, le littéral **NULL** peut être utilisé pour indiquer que le flux n’a aucune valeur à transmettre.</span><span class="sxs-lookup"><span data-stu-id="8235c-234">For inbound Synchronization Rules, the literal **NULL** can be used to indicate that the flow has no value to contribute.</span></span> <span data-ttu-id="8235c-235">Une autre règle avec une priorité inférieure peut transmettre sa valeur.</span><span class="sxs-lookup"><span data-stu-id="8235c-235">Another rule with lower precedence can contribute a value.</span></span> <span data-ttu-id="8235c-236">Si aucune règle n’a contribué de valeur, l’attribut du métaverse est supprimé.</span><span class="sxs-lookup"><span data-stu-id="8235c-236">If no rule contributed a value, then the metaverse attribute is removed.</span></span> <span data-ttu-id="8235c-237">Pour une règle sortante, si **NULL** est la valeur finale obtenue une fois toutes les règles de synchronisation traitées, la valeur est alors supprimée du répertoire connecté.</span><span class="sxs-lookup"><span data-stu-id="8235c-237">For an outbound rule, if **NULL** is the final value after all sync rules have been processed, then the value is removed in the connected directory.</span></span>

<span data-ttu-id="8235c-238">Le littéral **AuthoritativeNull** est similaire à **NULL**, à ceci près qu’aucune des règles de priorité inférieure ne peut transmettre une valeur.</span><span class="sxs-lookup"><span data-stu-id="8235c-238">The literal **AuthoritativeNull** is similar to **NULL** but with the difference that no lower precedence rules can contribute a value.</span></span>

<span data-ttu-id="8235c-239">Un flux d’attributs peut également utiliser le littéral **IgnoreThisFlow**.</span><span class="sxs-lookup"><span data-stu-id="8235c-239">An attribute flow can also use **IgnoreThisFlow**.</span></span> <span data-ttu-id="8235c-240">Celui-ci est similaire à la valeur NULL en ce sens qu’il indique qu’il n’a rien à transmettre.</span><span class="sxs-lookup"><span data-stu-id="8235c-240">It is similar to NULL in the sense that it indicates there is nothing to contribute.</span></span> <span data-ttu-id="8235c-241">En revanche, il ne supprime aucune valeur déjà existante dans la cible.</span><span class="sxs-lookup"><span data-stu-id="8235c-241">The difference is that it does not remove an already existing value in the target.</span></span> <span data-ttu-id="8235c-242">Il agit comme si le flux d’attributs n’avait jamais existé.</span><span class="sxs-lookup"><span data-stu-id="8235c-242">It is like the attribute flow has never been there.</span></span>

<span data-ttu-id="8235c-243">Voici un exemple :</span><span class="sxs-lookup"><span data-stu-id="8235c-243">Here is an example:</span></span>

<span data-ttu-id="8235c-244">Dans *Out to AD - User Exchange hybrid*, vous trouverez le flux suivant :</span><span class="sxs-lookup"><span data-stu-id="8235c-244">In *Out to AD - User Exchange hybrid* the following flow can be found:</span></span>  
`IIF([cloudSOAExchMailbox] = True,[cloudMSExchSafeSendersHash],IgnoreThisFlow)`  
<span data-ttu-id="8235c-245">Cette expression doit être lue de la manière suivante : si la boîte aux lettres de l’utilisateur se trouve dans Azure AD, transmettre l’attribut d’Azure AD à Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8235c-245">This expression should be read as: if the user mailbox is located in Azure AD, then flow the attribute from Azure AD to AD.</span></span> <span data-ttu-id="8235c-246">Si ce n’est pas le cas, ne rien transmettre en retour à Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8235c-246">If not, do not flow anything back to Active Directory.</span></span> <span data-ttu-id="8235c-247">Dans ce cas, la valeur existante dans AD est conservée.</span><span class="sxs-lookup"><span data-stu-id="8235c-247">In this case, it would keep the existing value in AD.</span></span>

### <a name="importedvalue"></a><span data-ttu-id="8235c-248">ImportedValue</span><span class="sxs-lookup"><span data-stu-id="8235c-248">ImportedValue</span></span>
<span data-ttu-id="8235c-249">La fonction ImportedValue est différente de toutes les autres fonctions, car le nom d’attribut doit être placé entre guillemets doubles plutôt qu’entre crochets : </span><span class="sxs-lookup"><span data-stu-id="8235c-249">The function ImportedValue is different than all other functions since the attribute name must be enclosed in quotes rather than square brackets:</span></span>  
<span data-ttu-id="8235c-250">`ImportedValue("proxyAddresses")`.</span><span class="sxs-lookup"><span data-stu-id="8235c-250">`ImportedValue("proxyAddresses")`.</span></span>

<span data-ttu-id="8235c-251">Généralement, lors de la synchronisation, un attribut utilise la valeur attendue, même s’il n’a pas encore été exporté ou si une erreur a été reçue pendant l’exportation (« top of the tower »).</span><span class="sxs-lookup"><span data-stu-id="8235c-251">Usually during synchronization an attribute uses the expected value, even if it hasn’t been exported yet or an error was received during export (“top of the tower”).</span></span> <span data-ttu-id="8235c-252">Une synchronisation entrante part du principe qu’un attribut qui n’a pas encore atteint un annuaire connecté finira par l’atteindre.</span><span class="sxs-lookup"><span data-stu-id="8235c-252">An inbound synchronization assumes that an attribute that hasn’t yet reached a connected directory eventually reaches it.</span></span> <span data-ttu-id="8235c-253">Dans certains cas, il est important de synchroniser uniquement une valeur qui a été confirmée par l’annuaire connecté (« hologram and delta import tower »).</span><span class="sxs-lookup"><span data-stu-id="8235c-253">In some cases, it is important to only synchronize a value that has been confirmed by the connected directory (“hologram and delta import tower”).</span></span>

<span data-ttu-id="8235c-254">Vous trouverez un exemple de cette fonction dans la règle de synchronisation par défaut *In from AD – User Common from Exchange*.</span><span class="sxs-lookup"><span data-stu-id="8235c-254">An example of this function can be found in the out-of-box Synchronization Rule *In from AD – User Common from Exchange*.</span></span> <span data-ttu-id="8235c-255">Dans Exchange hybride, la valeur ajoutée par Exchange Online doit uniquement être synchronisée après avoir confirmé que la valeur a bien été exportée : </span><span class="sxs-lookup"><span data-stu-id="8235c-255">In Hybrid Exchange, the value added by Exchange online should only be synchronized when it has been confirmed that the value was exported successfully:</span></span>  
`proxyAddresses` <- `RemoveDuplicates(Trim(ImportedValue("proxyAddresses")))`

## <a name="precedence"></a><span data-ttu-id="8235c-256">Precedence</span><span class="sxs-lookup"><span data-stu-id="8235c-256">Precedence</span></span>
<span data-ttu-id="8235c-257">Lorsque plusieurs règles de synchronisation essaient de transmettre la même valeur d’attribut à la cible, la valeur de précédence est utilisée pour déterminer la valeur prioritaire.</span><span class="sxs-lookup"><span data-stu-id="8235c-257">When several sync rules try to contribute the same attribute value to the target, the precedence value is used to determine the winner.</span></span> <span data-ttu-id="8235c-258">La règle ayant la priorité la plus élevée (la valeur numérique la plus basse) transmettra l’attribut.</span><span class="sxs-lookup"><span data-stu-id="8235c-258">The rule with highest precedence, lowest numeric value, is going to contribute the attribute in a conflict.</span></span>

![Types de fusion](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/precedence1.png)  

<span data-ttu-id="8235c-260">Cette commande permet de définir plus précisément les flux d’attributs pour un petit sous-ensemble d’objets.</span><span class="sxs-lookup"><span data-stu-id="8235c-260">This ordering can be used to define more precise attribute flows for a small subset of objects.</span></span> <span data-ttu-id="8235c-261">Par exemple, les règles out-of-box permettent de s’assurer que les attributs d’un compte activé (**User AccountEnabled**) ont la priorité sur d’autres comptes.</span><span class="sxs-lookup"><span data-stu-id="8235c-261">For example, the out-of-box-rules make sure that attributes from an enabled account (**User AccountEnabled**) have precedence from other accounts.</span></span>

<span data-ttu-id="8235c-262">La précédence peut être définie entre les connecteurs.</span><span class="sxs-lookup"><span data-stu-id="8235c-262">Precedence can be defined between Connectors.</span></span> <span data-ttu-id="8235c-263">Cela permet aux connecteurs avec de meilleures données de transmettre leurs valeurs en premier.</span><span class="sxs-lookup"><span data-stu-id="8235c-263">That allows Connectors with better data to contribute values first.</span></span>

### <a name="multiple-objects-from-the-same-connector-space"></a><span data-ttu-id="8235c-264">Plusieurs objets du même espace de connecteur</span><span class="sxs-lookup"><span data-stu-id="8235c-264">Multiple objects from the same connector space</span></span>
<span data-ttu-id="8235c-265">Si vous avez plusieurs objets dans le même espace de connecteur joints au même objet de métaverse, vous devez ajuster la précédence.</span><span class="sxs-lookup"><span data-stu-id="8235c-265">If you have several objects in the same connector space joined to the same metaverse object, precedence must be adjusted.</span></span> <span data-ttu-id="8235c-266">Si plusieurs objets sont dans la portée de la même règle de synchronisation, le moteur de synchronisation n’est pas en mesure de déterminer la précédence.</span><span class="sxs-lookup"><span data-stu-id="8235c-266">If several objects are in scope of the same sync rule, then the sync engine is not able to determine precedence.</span></span> <span data-ttu-id="8235c-267">Il demeure une incertitude quant à l’objet source qui doit transmettre la valeur au métaverse.</span><span class="sxs-lookup"><span data-stu-id="8235c-267">It is ambiguous which source object should contribute the value to the metaverse.</span></span> <span data-ttu-id="8235c-268">Cette configuration est signalée comme ambiguë même si les attributs de la source ont la même valeur.</span><span class="sxs-lookup"><span data-stu-id="8235c-268">This configuration is reported as ambiguous even if the attributes in the source have the same value.</span></span>  
![Plusieurs objets joints au même objet mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple1.png)  

<span data-ttu-id="8235c-270">Pour ce scénario, vous devez modifier la portée des règles de synchronisation, de façon à ce que les objets sources aient des règles de synchronisation différentes dans la portée.</span><span class="sxs-lookup"><span data-stu-id="8235c-270">For this scenario, you need to change the scope of the sync rules so the source objects have different sync rules in scope.</span></span> <span data-ttu-id="8235c-271">Cela vous permet de définir une précédence différente.</span><span class="sxs-lookup"><span data-stu-id="8235c-271">That allows you to define different precedence.</span></span>  
![Plusieurs objets joints au même objet mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple2.png)  

## <a name="next-steps"></a><span data-ttu-id="8235c-273">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8235c-273">Next steps</span></span>
* <span data-ttu-id="8235c-274">En savoir plus sur le langage d’expression dans [Comprendre les expressions d’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="8235c-274">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="8235c-275">Apprendre comment l’approvisionnement déclaratif est utilisé out-of-box dans [Présentation de la configuration par défaut](active-directory-aadconnectsync-understanding-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="8235c-275">See how declarative provisioning is used out-of-box in [Understanding the default configuration](active-directory-aadconnectsync-understanding-default-configuration.md).</span></span>
* <span data-ttu-id="8235c-276">Apprendre à effectuer une modification pratique à l’aide de l’approvisionnement déclaratif dans [Comment modifier la configuration par défaut](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="8235c-276">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>
* <span data-ttu-id="8235c-277">Continuer à lire le fonctionnement des utilisateurs et des contacts dans [Présentation des utilisateurs et des Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md).</span><span class="sxs-lookup"><span data-stu-id="8235c-277">Continue to read how users and contacts work together in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md).</span></span>

<span data-ttu-id="8235c-278">**Rubriques de présentation**</span><span class="sxs-lookup"><span data-stu-id="8235c-278">**Overview topics**</span></span>

* [<span data-ttu-id="8235c-279">Azure AD Connect Sync - Présentation et personnalisation des options de synchronisation</span><span class="sxs-lookup"><span data-stu-id="8235c-279">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="8235c-280">Intégration de vos identités locales avec Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8235c-280">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

<span data-ttu-id="8235c-281">**Rubriques de référence**</span><span class="sxs-lookup"><span data-stu-id="8235c-281">**Reference topics**</span></span>

* [<span data-ttu-id="8235c-282">Azure AD Connect Sync : Référence aux fonctions</span><span class="sxs-lookup"><span data-stu-id="8235c-282">Azure AD Connect sync: Functions Reference</span></span>](active-directory-aadconnectsync-functions-reference.md)
