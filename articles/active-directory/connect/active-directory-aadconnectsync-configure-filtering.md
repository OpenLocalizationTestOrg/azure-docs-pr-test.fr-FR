---
title: 'Azure AD Connect Sync : configurer le filtrage | Microsoft Docs'
description: Explique comment configurer le filtrage dans Azure AD Connect Sync.
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 880facf6-1192-40e9-8181-544c0759d506
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 064642ebb9cafb0c6e1b3ff306241182a95215cc
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-configure-filtering"></a><span data-ttu-id="6b27a-103">Azure AD Connect Sync : Configurer le filtrage</span><span class="sxs-lookup"><span data-stu-id="6b27a-103">Azure AD Connect sync: Configure filtering</span></span>
<span data-ttu-id="6b27a-104">L’utilisation du filtrage vous permet de contrôler les objets de votre annuaire local qui doivent apparaître dans Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="6b27a-104">By using filtering, you can control which objects appear in Azure Active Directory (Azure AD) from your on-premises directory.</span></span> <span data-ttu-id="6b27a-105">La configuration par défaut concerne l’ensemble des objets présents dans tous les domaines des forêts configurées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-105">The default configuration takes all objects in all domains in the configured forests.</span></span> <span data-ttu-id="6b27a-106">En général, il s’agit de la configuration recommandée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-106">In general, this is the recommended configuration.</span></span> <span data-ttu-id="6b27a-107">Les utilisateurs qui utilisent les charges de travail Office 365, telles qu’Exchange Online et Skype Entreprise, peuvent tirer parti d’une liste d’adresses globale complète pour envoyer des courriers électroniques et appeler tout le monde.</span><span class="sxs-lookup"><span data-stu-id="6b27a-107">Users using Office 365 workloads, such as Exchange Online and Skype for Business, benefit from a complete Global Address List so they can send email and call everyone.</span></span> <span data-ttu-id="6b27a-108">La configuration par défaut leur offre la même expérience qu’une implémentation locale d’Exchange ou de Lync.</span><span class="sxs-lookup"><span data-stu-id="6b27a-108">With the default configuration, they would have the same experience that they would have with an on-premises implementation of Exchange or Lync.</span></span>

<span data-ttu-id="6b27a-109">Toutefois, dans certains cas, vous devez apporter certaines modifications à la configuration par défaut.</span><span class="sxs-lookup"><span data-stu-id="6b27a-109">In some cases however, you're required make some changes to the default configuration.</span></span> <span data-ttu-id="6b27a-110">Voici quelques exemples :</span><span class="sxs-lookup"><span data-stu-id="6b27a-110">Here are some examples:</span></span>

* <span data-ttu-id="6b27a-111">Vous prévoyez d’utiliser la [topologie multi-annuaire Azure AD](active-directory-aadconnect-topologies.md#each-object-only-once-in-an-azure-ad-tenant).</span><span class="sxs-lookup"><span data-stu-id="6b27a-111">You plan to use the [multi-Azure AD directory topology](active-directory-aadconnect-topologies.md#each-object-only-once-in-an-azure-ad-tenant).</span></span> <span data-ttu-id="6b27a-112">Vous devez alors appliquer un filtre pour déterminer les objets qui sont synchronisés avec un annuaire Azure AD spécifique.</span><span class="sxs-lookup"><span data-stu-id="6b27a-112">Then you need to apply a filter to control which objects are synchronized to a particular Azure AD directory.</span></span>
* <span data-ttu-id="6b27a-113">Vous exécutez un pilote pour Azure ou Office 365 et souhaitez uniquement disposer d’un sous-ensemble d’utilisateurs dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-113">You run a pilot for Azure or Office 365 and you only want a subset of users in Azure AD.</span></span> <span data-ttu-id="6b27a-114">Dans le petit pilote, il n’est pas impératif de disposer d’une liste d’adresses globale complète pour illustrer la fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="6b27a-114">In the small pilot, it's not important to have a complete Global Address List to demonstrate the functionality.</span></span>
* <span data-ttu-id="6b27a-115">Vous disposez d’un grand nombre de comptes de service et d’autres comptes non personnels dont vous ne voulez pas dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-115">You have many service accounts and other nonpersonal accounts that you don't want in Azure AD.</span></span>
* <span data-ttu-id="6b27a-116">Pour des raisons de conformité, vous ne supprimez aucun compte d’utilisateur local.</span><span class="sxs-lookup"><span data-stu-id="6b27a-116">For compliance reasons, you don't delete any user accounts on-premises.</span></span> <span data-ttu-id="6b27a-117">Vous vous contentez de les désactiver.</span><span class="sxs-lookup"><span data-stu-id="6b27a-117">You only disable them.</span></span> <span data-ttu-id="6b27a-118">Toutefois, vous souhaitez qu’Azure AD ne comporte que des comptes actifs.</span><span class="sxs-lookup"><span data-stu-id="6b27a-118">But in Azure AD, you only want active accounts to be present.</span></span>

<span data-ttu-id="6b27a-119">Cet article explique comment configurer les différents modes de filtrage.</span><span class="sxs-lookup"><span data-stu-id="6b27a-119">This article covers how to configure the different filtering methods.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6b27a-120">Microsoft ne prend pas en charge la modification ou l’utilisation de la synchronisation Azure AD Connect en dehors des actions qui sont documentées de façon formelle.</span><span class="sxs-lookup"><span data-stu-id="6b27a-120">Microsoft doesn't support modifying or operating Azure AD Connect sync outside of the actions that are formally documented.</span></span> <span data-ttu-id="6b27a-121">Ces actions peuvent entraîner un état de synchronisation Azure AD Connect incohérent ou non pris en charge.</span><span class="sxs-lookup"><span data-stu-id="6b27a-121">Any of these actions might result in an inconsistent or unsupported state of Azure AD Connect sync.</span></span> <span data-ttu-id="6b27a-122">Par conséquent, Microsoft ne peut pas fournir de support technique pour ces déploiements.</span><span class="sxs-lookup"><span data-stu-id="6b27a-122">As a result, Microsoft can't provide technical support for such deployments.</span></span>

## <a name="basics-and-important-notes"></a><span data-ttu-id="6b27a-123">Principes de base et remarques importantes</span><span class="sxs-lookup"><span data-stu-id="6b27a-123">Basics and important notes</span></span>
<span data-ttu-id="6b27a-124">Dans Azure AD Connect Sync, vous pouvez activer le filtrage à tout moment.</span><span class="sxs-lookup"><span data-stu-id="6b27a-124">In Azure AD Connect sync, you can enable filtering at any time.</span></span> <span data-ttu-id="6b27a-125">Si vous avez commencé par une configuration de synchronisation d’annuaires par défaut et configuré le filtrage, les objets éliminés par le filtrage ne sont plus synchronisés avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-125">If you start with a default configuration of directory synchronization and then configure filtering, the objects that are filtered out are no longer synchronized to Azure AD.</span></span> <span data-ttu-id="6b27a-126">En raison de ce changement, tous les objets présents dans Azure AD précédemment synchronisés puis filtrés sont supprimés d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-126">Because of this change, any objects in Azure AD that were previously synchronized but were then filtered are deleted in Azure AD.</span></span>

<span data-ttu-id="6b27a-127">Avant d’apporter des modifications au filtrage, veillez à [désactiver la tâche planifiée](#disable-scheduled-task) afin de ne pas exporter accidentellement des modifications dont vous n’avez pas encore vérifié l’exactitude.</span><span class="sxs-lookup"><span data-stu-id="6b27a-127">Before you start making changes to filtering, make sure that you [disable the scheduled task](#disable-scheduled-task) so you don't accidentally export changes that you haven't yet verified to be correct.</span></span>

<span data-ttu-id="6b27a-128">Étant donné que le filtrage peut supprimer de nombreux objets simultanément, vous devez vous assurer que les nouveaux filtres sont corrects avant de commencer à exporter des modifications vers Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-128">Because filtering can remove many objects at the same time, you want to make sure that your new filters are correct before you start exporting any changes to Azure AD.</span></span> <span data-ttu-id="6b27a-129">Une fois que vous avez terminé la procédure de configuration, nous vous recommandons vivement d’exécuter les [étapes de vérification](#apply-and-verify-changes) avant d’exporter et d’effectuer des modifications dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-129">After you've completed the configuration steps, we strongly recommend that you follow the [verification steps](#apply-and-verify-changes) before you export and make changes to Azure AD.</span></span>

<span data-ttu-id="6b27a-130">Pour vous protéger contre la suppression par inadvertance de nombreux objets, la fonctionnalité « [Prévention des suppressions accidentelles](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md) » est activée par défaut.</span><span class="sxs-lookup"><span data-stu-id="6b27a-130">To protect you from deleting many objects by accident, the feature "[prevent accidental deletes](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)" is on by default.</span></span> <span data-ttu-id="6b27a-131">Si vous supprimez de nombreux objets suite à un filtrage (500 par défaut), vous devez exécuter les étapes décrites dans cet article pour que les suppressions soient appliquées à Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-131">If you delete many objects due to filtering (500 by default), you need to follow the steps in this article to allow the deletes to go through to Azure AD.</span></span>

<span data-ttu-id="6b27a-132">Si vous utilisez une version antérieure à novembre 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)), que vous modifiez une configuration de filtre et que vous utilisez la synchronisation de mot de passe, vous devez déclencher une synchronisation complète de tous les mots de passe une fois la configuration terminée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-132">If you use a build before November 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)), make a change to a filter configuration, and use password synchronization, then you need to trigger a full sync of all passwords after you've completed the configuration.</span></span> <span data-ttu-id="6b27a-133">Pour plus d’informations sur le déclenchement d’une synchronisation complète des mots de passe, consultez la section [Déclencher une synchronisation complète de tous les mots de passe](active-directory-aadconnectsync-troubleshoot-password-synchronization.md#trigger-a-full-sync-of-all-passwords).</span><span class="sxs-lookup"><span data-stu-id="6b27a-133">For steps on how to trigger a password full sync, see [Trigger a full sync of all passwords](active-directory-aadconnectsync-troubleshoot-password-synchronization.md#trigger-a-full-sync-of-all-passwords).</span></span> <span data-ttu-id="6b27a-134">Si vous utilisez la version 1.0.9125 ou une version ultérieure, l’opération standard de **synchronisation complète** détermine également si les mots de passe doivent être ou non synchronisés et si cette étape supplémentaire n’est plus nécessaire.</span><span class="sxs-lookup"><span data-stu-id="6b27a-134">If you're on build 1.0.9125 or later, then the regular **full synchronization** action also calculates whether passwords should be synchronized and if this extra step is no longer required.</span></span>

<span data-ttu-id="6b27a-135">Si des objets **utilisateur** ont été accidentellement supprimés d’Azure AD à la suite d’une erreur de filtrage, vous pouvez recréer ces objets utilisateur dans Azure AD en supprimant vos configurations de filtrage.</span><span class="sxs-lookup"><span data-stu-id="6b27a-135">If **user** objects were inadvertently deleted in Azure AD because of a filtering error, you can recreate the user objects in Azure AD by removing your filtering configurations.</span></span> <span data-ttu-id="6b27a-136">Vous pouvez ensuite resynchroniser vos annuaires.</span><span class="sxs-lookup"><span data-stu-id="6b27a-136">Then you can synchronize your directories again.</span></span> <span data-ttu-id="6b27a-137">Cette opération restaure les utilisateurs présents dans la corbeille d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-137">This action restores the users from the recycle bin in Azure AD.</span></span> <span data-ttu-id="6b27a-138">Toutefois, vous ne pouvez pas annuler la suppression d’autres types d’objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-138">However, you can't undelete other object types.</span></span> <span data-ttu-id="6b27a-139">Par exemple, si vous supprimez accidentellement un groupe de sécurité et que ce dernier a été utilisé comme liste de contrôle d’accès (ACL, access-control list) d’une ressource, le groupe et ses ACL ne sont pas récupérables.</span><span class="sxs-lookup"><span data-stu-id="6b27a-139">For example, if you accidentally delete a security group and it was used to ACL a resource, the group and its ACLs can't be recovered.</span></span>

<span data-ttu-id="6b27a-140">Azure AD Connect supprime uniquement les objets qu’il a précédemment considérés comme étant compris dans l’étendue.</span><span class="sxs-lookup"><span data-stu-id="6b27a-140">Azure AD Connect only deletes objects that it has once considered to be in scope.</span></span> <span data-ttu-id="6b27a-141">Si certains objets d’Azure AD ont été créés par un autre moteur de synchronisation et ne figurent pas dans l’étendue, l’ajout d’un filtrage ne les supprime pas.</span><span class="sxs-lookup"><span data-stu-id="6b27a-141">If there are objects in Azure AD that were created by another sync engine and these objects aren't in scope, adding filtering doesn't remove them.</span></span> <span data-ttu-id="6b27a-142">Par exemple, si vous démarrez avec un serveur de synchronisation d’annuaires DirSync qui a créé une copie complète de la totalité de votre annuaire dans Azure AD, puis que vous installez un nouveau serveur de synchronisation Azure AD Connect en parallèle avec le filtrage activé dès le départ, Azure AD Connect ne supprime pas les objets supplémentaires créés par DirSync.</span><span class="sxs-lookup"><span data-stu-id="6b27a-142">For example, if you start with a DirSync server that created a complete copy of your entire directory in Azure AD, and you install a new Azure AD Connect sync server in parallel with filtering enabled from the beginning, Azure AD Connect doesn't remove the extra objects that are created by DirSync.</span></span>

<span data-ttu-id="6b27a-143">Les configurations de filtrage sont conservées lorsque vous effectuez une installation ou une mise à niveau vers une version plus récente d’Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6b27a-143">The filtering configuration is retained when you install or upgrade to a newer version of Azure AD Connect.</span></span> <span data-ttu-id="6b27a-144">Avant d’exécuter le premier cycle de synchronisation, il est toujours recommandé de vérifier que la configuration n’a pas été modifiée par inadvertance après une mise à niveau vers une version plus récente.</span><span class="sxs-lookup"><span data-stu-id="6b27a-144">It's always a best practice to verify that the configuration wasn't inadvertently changed after an upgrade to a newer version before running the first synchronization cycle.</span></span>

<span data-ttu-id="6b27a-145">Si vous disposez de plusieurs forêts, vous devez appliquer les configurations de filtrage décrites dans cet article à chaque forêt (à condition que vous souhaitiez attribuer la même configuration à la totalité des forêts).</span><span class="sxs-lookup"><span data-stu-id="6b27a-145">If you have more than one forest, then you must apply the filtering configurations that are described in this topic to every forest (assuming that you want the same configuration for all of them).</span></span>

### <a name="disable-the-scheduled-task"></a><span data-ttu-id="6b27a-146">Désactiver la tâche planifiée</span><span class="sxs-lookup"><span data-stu-id="6b27a-146">Disable the scheduled task</span></span>
<span data-ttu-id="6b27a-147">Pour désactiver le planificateur intégré qui déclenche un cycle de synchronisation toutes les 30 minutes, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6b27a-147">To disable the built-in scheduler that triggers a synchronization cycle every 30 minutes, follow these steps:</span></span>

1. <span data-ttu-id="6b27a-148">Accédez à une invite de commandes PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6b27a-148">Go to a PowerShell prompt.</span></span>
2. <span data-ttu-id="6b27a-149">Exécutez `Set-ADSyncScheduler -SyncCycleEnabled $False` pour désactiver le planificateur.</span><span class="sxs-lookup"><span data-stu-id="6b27a-149">Run `Set-ADSyncScheduler -SyncCycleEnabled $False` to disable the scheduler.</span></span>
3. <span data-ttu-id="6b27a-150">Apportez les modifications qui sont décrites dans cet article.</span><span class="sxs-lookup"><span data-stu-id="6b27a-150">Make the changes that are documented in this article.</span></span>
4. <span data-ttu-id="6b27a-151">Exécutez `Set-ADSyncScheduler -SyncCycleEnabled $True` pour réactiver le planificateur.</span><span class="sxs-lookup"><span data-stu-id="6b27a-151">Run `Set-ADSyncScheduler -SyncCycleEnabled $True` to enable the scheduler again.</span></span>

<span data-ttu-id="6b27a-152">**Si vous utilisez une version d’Azure AD Connect antérieure à 1.1.105.0**</span><span class="sxs-lookup"><span data-stu-id="6b27a-152">**If you use an Azure AD Connect build before 1.1.105.0**</span></span>  
<span data-ttu-id="6b27a-153">Pour désactiver la tâche planifiée qui déclenche un cycle de synchronisation toutes les trois heures, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6b27a-153">To disable the scheduled task that triggers a synchronization cycle every three hours, follow these steps:</span></span>

1. <span data-ttu-id="6b27a-154">Lancez **Planificateur de tâches** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-154">Start **Task Scheduler** from the **Start** menu.</span></span>
2. <span data-ttu-id="6b27a-155">Directement sous **Bibliothèque du Planificateur de tâches**, trouvez la tâche **Azure AD Sync Scheduler**, cliquez dessus avec le bouton droit, puis sélectionnez **Désactiver**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-155">Directly under **Task Scheduler Library**, find the task named **Azure AD Sync Scheduler**, right-click, and select **Disable**.</span></span>  
   <span data-ttu-id="6b27a-156">![Planificateur de tâche](./media/active-directory-aadconnectsync-configure-filtering/taskscheduler.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-156">![Task Scheduler](./media/active-directory-aadconnectsync-configure-filtering/taskscheduler.png)</span></span>  
3. <span data-ttu-id="6b27a-157">Vous pouvez désormais apporter des modifications à la configuration et exécuter le moteur de synchronisation manuellement à partir de la console **Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-157">You can now make configuration changes and run the sync engine manually from the **Synchronization Service Manager** console.</span></span>

<span data-ttu-id="6b27a-158">Une fois toutes vos modifications de filtrage terminées, n’oubliez pas de revenir et de réactiver la tâche en cliquant sur **Activer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-158">After you've completed all your filtering changes, don't forget to come back and **Enable** the task again.</span></span>

## <a name="filtering-options"></a><span data-ttu-id="6b27a-159">Options de filtrage</span><span class="sxs-lookup"><span data-stu-id="6b27a-159">Filtering options</span></span>
<span data-ttu-id="6b27a-160">Les types de configurations de filtrage que vous pouvez appliquer à l’outil de synchronisation d’annuaires sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="6b27a-160">You can apply the following filtering configuration types to the directory synchronization tool:</span></span>

* <span data-ttu-id="6b27a-161">[**Basé sur un groupe**](#group-based-filtering) : un filtrage basé sur un seul groupe ne peut être configuré que lors de l’installation initiale à l’aide de l’Assistant Installation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-161">[**Group-based**](#group-based-filtering): Filtering based on a single group can only be configured on initial installation by using the installation wizard.</span></span>
* <span data-ttu-id="6b27a-162">[**Basé sur un domaine**](#domain-based-filtering) : cette option vous permet de sélectionner les domaines synchronisés avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-162">[**Domain-based**](#domain-based-filtering): By using this option, you can select which domains synchronize to Azure AD.</span></span> <span data-ttu-id="6b27a-163">Vous pouvez également ajouter et supprimer des domaines au niveau de la configuration du moteur de synchronisation lorsque vous apportez des modifications à votre infrastructure locale après avoir installé la synchronisation Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6b27a-163">You can also add and remove domains from the sync engine configuration when you make changes to your on-premises infrastructure after you install Azure AD Connect sync.</span></span>
* <span data-ttu-id="6b27a-164">[**Basé sur une unité d’organisation (UO)**](#organizational-unitbased-filtering) : cette option vous permet de sélectionner les unités d’organisation synchronisées avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-164">[**Organizational unit (OU)–based**](#organizational-unitbased-filtering): By using this option, you can select which OUs synchronize to Azure AD.</span></span> <span data-ttu-id="6b27a-165">Cette option s’applique à tous les types d’objets présents dans les unités d’organisation sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-165">This option is for all object types in selected OUs.</span></span>
* <span data-ttu-id="6b27a-166">[**Basé sur un attribut**](#attribute-based-filtering) : cette option vous permet de filtrer les objets en fonction des valeurs d’attribut sur les objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-166">[**Attribute-based**](#attribute-based-filtering): By using this option, you can filter objects based on attribute values on the objects.</span></span> <span data-ttu-id="6b27a-167">Vous pouvez également avoir des filtres différents pour différents types d’objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-167">You can also have different filters for different object types.</span></span>

<span data-ttu-id="6b27a-168">Vous pouvez utiliser plusieurs options de filtrage en même temps.</span><span class="sxs-lookup"><span data-stu-id="6b27a-168">You can use multiple filtering options at the same time.</span></span> <span data-ttu-id="6b27a-169">Par exemple, vous pouvez utiliser le filtrage basé sur une unité d’organisation afin de n’inclure des objets que dans une seule unité d’organisation et,</span><span class="sxs-lookup"><span data-stu-id="6b27a-169">For example, you can use OU-based filtering to only include objects in one OU.</span></span> <span data-ttu-id="6b27a-170">dans le même temps, utiliser un filtrage basé sur un attribut pour filtrer davantage les objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-170">At the same time, you can use attribute-based filtering to filter the objects further.</span></span> <span data-ttu-id="6b27a-171">Lorsque vous utilisez plusieurs méthodes de filtrage, les filtres utilisent un « AND » logique entre les filtres.</span><span class="sxs-lookup"><span data-stu-id="6b27a-171">When you use multiple filtering methods, the filters use a logical "AND" between the filters.</span></span>

## <a name="domain-based-filtering"></a><span data-ttu-id="6b27a-172">Filtrage basé sur un domaine</span><span class="sxs-lookup"><span data-stu-id="6b27a-172">Domain-based filtering</span></span>
<span data-ttu-id="6b27a-173">Cette section explique comment configurer votre filtre de domaine.</span><span class="sxs-lookup"><span data-stu-id="6b27a-173">This section provides you with the steps to configure your domain filter.</span></span> <span data-ttu-id="6b27a-174">Si vous avez ajouté ou supprimé des domaines dans votre forêt après avoir installé Azure AD Connect, vous devez également mettre à jour la configuration du filtrage.</span><span class="sxs-lookup"><span data-stu-id="6b27a-174">If you added or removed domains in your forest after you installed Azure AD Connect, you also have to update the filtering configuration.</span></span>

<span data-ttu-id="6b27a-175">La meilleure façon de modifier le filtrage basé sur un domaine consiste à exécuter l’Assistant Installation et à modifier le [filtrage domaine et unité organisationnelle](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span><span class="sxs-lookup"><span data-stu-id="6b27a-175">The preferred way to change domain-based filtering is by running the installation wizard and changing [domain and OU filtering](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span></span> <span data-ttu-id="6b27a-176">L’Assistant Installation automatise toutes les tâches qui sont décrites dans cet article.</span><span class="sxs-lookup"><span data-stu-id="6b27a-176">The installation wizard automates all the tasks that are documented in this topic.</span></span>

<span data-ttu-id="6b27a-177">Vous ne devez suivre ces étapes que si vous ne parvenez pas à exécuter l’Assistant Installation pour une raison quelconque.</span><span class="sxs-lookup"><span data-stu-id="6b27a-177">You should only follow these steps if you're unable to run the installation wizard for some reason.</span></span>

<span data-ttu-id="6b27a-178">Configuration de filtrage basé sur un domaine se compose des étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="6b27a-178">Domain-based filtering configuration consists of these steps:</span></span>

1. <span data-ttu-id="6b27a-179">[Sélectionnez les domaines](#select-domains-to-be-synchronized) que vous souhaitez inclure dans la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-179">[Select the domains](#select-domains-to-be-synchronized) that you want to include in the synchronization.</span></span>
2. <span data-ttu-id="6b27a-180">Pour chaque domaine ajouté et supprimé, réglez les [profils d’exécution](#update-run-profiles).</span><span class="sxs-lookup"><span data-stu-id="6b27a-180">For each added and removed domain, adjust the [run profiles](#update-run-profiles).</span></span>
3. <span data-ttu-id="6b27a-181">[Appliquer et vérifier les modifications](#apply-and-verify-changes)</span><span class="sxs-lookup"><span data-stu-id="6b27a-181">[Apply and verify changes](#apply-and-verify-changes).</span></span>

### <a name="select-the-domains-to-be-synchronized"></a><span data-ttu-id="6b27a-182">Sélectionner les domaines à synchroniser</span><span class="sxs-lookup"><span data-stu-id="6b27a-182">Select the domains to be synchronized</span></span>
<span data-ttu-id="6b27a-183">Pour définir le filtre de domaine, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6b27a-183">To set the domain filter, do the following steps:</span></span>

1. <span data-ttu-id="6b27a-184">Connectez-vous au serveur qui exécute Azure AD Connect Sync en utilisant un compte membre du groupe de sécurité **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="6b27a-184">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="6b27a-185">Lancez **Service de synchronisation** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-185">Start **Synchronization Service** from the **Start** menu.</span></span>
3. <span data-ttu-id="6b27a-186">Sélectionnez **Connecteurs**, puis, dans la liste **Connecteurs**, sélectionnez le connecteur présentant le type **Services de domaine Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-186">Select **Connectors**, and in the **Connectors** list, select the Connector with the type **Active Directory Domain Services**.</span></span> <span data-ttu-id="6b27a-187">Dans **Actions**, sélectionnez**Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-187">In **Actions**, select **Properties**.</span></span>  
   <span data-ttu-id="6b27a-188">![Propriétés du connecteur](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-188">![Connector properties](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span></span>  
4. <span data-ttu-id="6b27a-189">Cliquez sur **Configurer des partitions d’annuaire**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-189">Click **Configure Directory Partitions**.</span></span>
5. <span data-ttu-id="6b27a-190">Dans la liste **Sélectionner des partitions d’annuaire** , sélectionnez et désélectionnez des domaines en fonction de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="6b27a-190">In the **Select directory partitions** list, select and unselect domains as needed.</span></span> <span data-ttu-id="6b27a-191">Vérifiez que seules les partitions que vous voulez synchroniser sont sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-191">Verify that only the partitions that you want to synchronize are selected.</span></span>  
   <span data-ttu-id="6b27a-192">![Partitions](./media/active-directory-aadconnectsync-configure-filtering/connectorpartitions.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-192">![Partitions](./media/active-directory-aadconnectsync-configure-filtering/connectorpartitions.png)</span></span>  
   <span data-ttu-id="6b27a-193">Si vous avez modifié votre infrastructure Active Directory locale et ajouté ou supprimé des domaines dans la forêt, cliquez sur le bouton **Actualiser** pour obtenir une liste mise à jour.</span><span class="sxs-lookup"><span data-stu-id="6b27a-193">If you've changed your on-premises Active Directory infrastructure and added or removed domains from the forest, then click the **Refresh** button to get an updated list.</span></span> <span data-ttu-id="6b27a-194">Lorsque vous actualisez les données, des informations d’identification vous sont demandées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-194">When you refresh, you're asked for credentials.</span></span> <span data-ttu-id="6b27a-195">Fournissez des informations d’identification disposant d’un accès en lecture à Windows Server Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6b27a-195">Provide any credentials with read access to Windows Server Active Directory.</span></span> <span data-ttu-id="6b27a-196">Il ne s’agit pas nécessairement de l’utilisateur déjà renseigné dans la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="6b27a-196">It doesn't have to be the user that is prepopulated in the dialog box.</span></span>  
   <span data-ttu-id="6b27a-197">![Actualisation requise](./media/active-directory-aadconnectsync-configure-filtering/refreshneeded.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-197">![Refresh needed](./media/active-directory-aadconnectsync-configure-filtering/refreshneeded.png)</span></span>  
6. <span data-ttu-id="6b27a-198">Quand vous avez terminé, fermez la boîte de dialogue **Propriétés** en cliquant sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-198">When you're done, close the **Properties** dialog by clicking **OK**.</span></span> <span data-ttu-id="6b27a-199">Si vous avez supprimé des domaines de la forêt, un message contextuel vous indique qu’un domaine a été supprimé et que la configuration va être nettoyée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-199">If you removed domains from the forest, a message pop-up says that a domain was removed and that configuration will be cleaned up.</span></span>
7. <span data-ttu-id="6b27a-200">Continuez à ajuster les [profils d’exécution](#update-run-profiles).</span><span class="sxs-lookup"><span data-stu-id="6b27a-200">Continue to adjust the [run profiles](#update-run-profiles).</span></span>

### <a name="update-the-run-profiles"></a><span data-ttu-id="6b27a-201">Mettre à jour les profils d’exécution</span><span class="sxs-lookup"><span data-stu-id="6b27a-201">Update the run profiles</span></span>
<span data-ttu-id="6b27a-202">Si vous avez mis à jour votre filtre de domaine, vous devez également procéder à la mise à jour des profils d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6b27a-202">If you've updated your domain filter, you also need to update the run profiles.</span></span>

1. <span data-ttu-id="6b27a-203">Dans la liste **Connecteurs** , assurez-vous que le connecteur que vous avez modifié à l’étape précédente est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="6b27a-203">In the **Connectors** list, make sure that the Connector that you changed in the previous step is selected.</span></span> <span data-ttu-id="6b27a-204">Dans **Actions**, sélectionnez **Configurer des profils d’exécution**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-204">In **Actions**, select **Configure Run Profiles**.</span></span>  
   <span data-ttu-id="6b27a-205">![Profils d’exécution du connecteur 1](./media/active-directory-aadconnectsync-configure-filtering/connectorrunprofiles1.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-205">![Connector run profiles 1](./media/active-directory-aadconnectsync-configure-filtering/connectorrunprofiles1.png)</span></span>  
2. <span data-ttu-id="6b27a-206">Recherchez et identifiez les profils suivants :</span><span class="sxs-lookup"><span data-stu-id="6b27a-206">Find and identify the following profiles:</span></span>
    * <span data-ttu-id="6b27a-207">Importation complète</span><span class="sxs-lookup"><span data-stu-id="6b27a-207">Full Import</span></span>
    * <span data-ttu-id="6b27a-208">Synchronisation complète</span><span class="sxs-lookup"><span data-stu-id="6b27a-208">Full Synchronization</span></span>
    * <span data-ttu-id="6b27a-209">Importation d’écart</span><span class="sxs-lookup"><span data-stu-id="6b27a-209">Delta Import</span></span>
    * <span data-ttu-id="6b27a-210">Synchronisation d’écart</span><span class="sxs-lookup"><span data-stu-id="6b27a-210">Delta Synchronization</span></span>
    * <span data-ttu-id="6b27a-211">Exportation</span><span class="sxs-lookup"><span data-stu-id="6b27a-211">Export</span></span>
3. <span data-ttu-id="6b27a-212">Pour chaque profil, ajustez les domaines **ajoutés** et **supprimés**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-212">For each profile, adjust the **added** and **removed** domains.</span></span>
    1. <span data-ttu-id="6b27a-213">Pour chacun des cinq profils, procédez comme suit pour chaque domaine **ajouté** :</span><span class="sxs-lookup"><span data-stu-id="6b27a-213">For each of the five profiles, do the following steps for each **added** domain:</span></span>
        1. <span data-ttu-id="6b27a-214">Sélectionnez le profil d’exécution, puis cliquez sur **Nouvelle étape**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-214">Select the run profile and click **New Step**.</span></span>
        2. <span data-ttu-id="6b27a-215">Sur la page **Configurer une étape**, dans le menu déroulant **Type**, sélectionnez le type d’étape portant le même nom que le profil que vous configurez.</span><span class="sxs-lookup"><span data-stu-id="6b27a-215">On the **Configure Step** page, in the **Type** drop-down menu, select the step type with the same name as the profile that you're configuring.</span></span> <span data-ttu-id="6b27a-216">Cliquez ensuite sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-216">Then click **Next**.</span></span>  
        <span data-ttu-id="6b27a-217">![Profils d’exécution du connecteur 2](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep1.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-217">![Connector run profiles 2](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep1.png)</span></span>  
        3. <span data-ttu-id="6b27a-218">Sur la page **Configuration du connecteur**, dans le menu déroulant **Partition**, sélectionnez le nom du domaine que vous avez ajouté à votre filtre de domaine.</span><span class="sxs-lookup"><span data-stu-id="6b27a-218">On the **Connector Configuration** page, in the **Partition** drop-down menu, select the name of the domain that you've added to your domain filter.</span></span>  
        <span data-ttu-id="6b27a-219">![Profils d’exécution du connecteur 3](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep2.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-219">![Connector run profiles 3](./media/active-directory-aadconnectsync-configure-filtering/runprofilesnewstep2.png)</span></span>  
        4. <span data-ttu-id="6b27a-220">Pour fermer la boîte de dialogue **Configurer un profil d’exécution**, cliquez sur **Terminer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-220">To close the **Configure Run Profile** dialog, click **Finish**.</span></span>
    2. <span data-ttu-id="6b27a-221">Pour chacun des cinq profils, procédez comme suit pour chaque domaine **supprimé** :</span><span class="sxs-lookup"><span data-stu-id="6b27a-221">For each of the five profiles, do the following steps for each **removed** domain:</span></span>
        1. <span data-ttu-id="6b27a-222">Sélectionnez le profil d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6b27a-222">Select the run profile.</span></span>
        2. <span data-ttu-id="6b27a-223">Si la **valeur** de l’attribut **Partition** est un identificateur global unique (GUID), sélectionnez l’étape d’exécution, puis cliquez sur **Supprimer l’étape**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-223">If the **Value** of the **Partition** attribute is a GUID, select the run step and click **Delete Step**.</span></span>  
        <span data-ttu-id="6b27a-224">![Profils d’exécution du connecteur 4](./media/active-directory-aadconnectsync-configure-filtering/runprofilesdeletestep.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-224">![Connector run profiles 4](./media/active-directory-aadconnectsync-configure-filtering/runprofilesdeletestep.png)</span></span>  
    3. <span data-ttu-id="6b27a-225">Vérifiez votre modification.</span><span class="sxs-lookup"><span data-stu-id="6b27a-225">Verify your change.</span></span> <span data-ttu-id="6b27a-226">Chaque domaine que vous souhaitez synchroniser doit normalement être répertorié en tant qu’étape dans chacun des profils d’exécution.</span><span class="sxs-lookup"><span data-stu-id="6b27a-226">Each domain that you want to synchronize should be listed as a step in each run profile.</span></span>
4. <span data-ttu-id="6b27a-227">Pour fermer la boîte de dialogue **Configurer des profils d’exécution**, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-227">To close the **Configure Run Profiles** dialog, click **OK**.</span></span>
5.  <span data-ttu-id="6b27a-228">Pour terminer la configuration, vous devez exécuter une **importation intégrale** et une **synchronisation delta**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-228">To complete the configuration, you need to run a **Full import** and a **Delta sync**.</span></span> <span data-ttu-id="6b27a-229">Poursuivez votre lecture de la section [Appliquer et vérifier les modifications](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="6b27a-229">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

## <a name="organizational-unitbased-filtering"></a><span data-ttu-id="6b27a-230">Filtrage basé sur une unité d’organisation</span><span class="sxs-lookup"><span data-stu-id="6b27a-230">Organizational unit–based filtering</span></span>
<span data-ttu-id="6b27a-231">La meilleure façon de modifier le filtrage basé sur une unité d’organisation consiste à exécuter l’Assistant Installation et à modifier le [filtrage domaine et unité organisationnelle](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span><span class="sxs-lookup"><span data-stu-id="6b27a-231">The preferred way to change OU-based filtering is by running the installation wizard and changing [domain and OU filtering](active-directory-aadconnect-get-started-custom.md#domain-and-ou-filtering).</span></span> <span data-ttu-id="6b27a-232">L’Assistant Installation automatise toutes les tâches qui sont décrites dans cet article.</span><span class="sxs-lookup"><span data-stu-id="6b27a-232">The installation wizard automates all the tasks that are documented in this topic.</span></span>

<span data-ttu-id="6b27a-233">Vous ne devez suivre ces étapes que si vous ne parvenez pas à exécuter l’Assistant Installation pour une raison quelconque.</span><span class="sxs-lookup"><span data-stu-id="6b27a-233">You should only follow these steps if you're unable to run the installation wizard for some reason.</span></span>

<span data-ttu-id="6b27a-234">Pour configurer le filtrage basé sur l’unité d’organisation, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="6b27a-234">To configure organizational unit–based filtering, do the following steps:</span></span>

1. <span data-ttu-id="6b27a-235">Connectez-vous au serveur qui exécute Azure AD Connect Sync en utilisant un compte membre du groupe de sécurité **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="6b27a-235">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="6b27a-236">Lancez **Service de synchronisation** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-236">Start **Synchronization Service** from the **Start** menu.</span></span>
3. <span data-ttu-id="6b27a-237">Sélectionnez **Connecteurs**, puis, dans la liste **Connecteurs**, sélectionnez le connecteur présentant le type **Services de domaine Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-237">Select **Connectors**, and in the **Connectors** list, select the Connector with the type **Active Directory Domain Services**.</span></span> <span data-ttu-id="6b27a-238">Dans **Actions**, sélectionnez**Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-238">In **Actions**, select **Properties**.</span></span>  
   <span data-ttu-id="6b27a-239">![Propriétés du connecteur](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-239">![Connector properties](./media/active-directory-aadconnectsync-configure-filtering/connectorproperties.png)</span></span>  
4. <span data-ttu-id="6b27a-240">Cliquez sur **Configurer des partitions d’annuaire**, sélectionnez le domaine que vous voulez configurer, puis cliquez sur **Conteneurs**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-240">Click **Configure Directory Partitions**, select the domain that you want to configure, and then click **Containers**.</span></span>
5. <span data-ttu-id="6b27a-241">Lorsque vous y êtes invité, fournissez des informations d’identification disposant d’un accès en lecture à votre service d’annuaire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="6b27a-241">When you're prompted, provide any credentials with read access to your on-premises Active Directory.</span></span> <span data-ttu-id="6b27a-242">Il ne s’agit pas nécessairement de l’utilisateur déjà renseigné dans la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="6b27a-242">It doesn't have to be the user that is prepopulated in the dialog box.</span></span>
6. <span data-ttu-id="6b27a-243">Dans la boîte de dialogue **Sélectionner des conteneurs**, désactivez les unités d’organisation que vous ne voulez pas synchroniser avec l’annuaire cloud, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-243">In the **Select Containers** dialog box, clear the OUs that you don’t want to synchronize with the cloud directory, and then click **OK**.</span></span>  
   <span data-ttu-id="6b27a-244">![Unités d’organisation dans la boîte de dialogue Sélectionner des conteneurs](./media/active-directory-aadconnectsync-configure-filtering/ou.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-244">![OUs in the Select Containers dialog box](./media/active-directory-aadconnectsync-configure-filtering/ou.png)</span></span>  
   * <span data-ttu-id="6b27a-245">Le conteneur **Ordinateurs** doit être sélectionné pour vos ordinateurs Windows 10 afin de réussir la synchronisation avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-245">The **Computers** container should be selected for your Windows 10 computers to be successfully synchronized to Azure AD.</span></span> <span data-ttu-id="6b27a-246">Si les ordinateurs joints à un domaine sont situés dans d’autres unités d’organisation, assurez-vous que ces dernières sont sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-246">If your domain-joined computers are located in other OUs, make sure those are selected.</span></span>
   * <span data-ttu-id="6b27a-247">Le conteneur **ForeignSecurityPrincipals** doit être sélectionné si vous disposez de plusieurs forêts avec approbations.</span><span class="sxs-lookup"><span data-stu-id="6b27a-247">The **ForeignSecurityPrincipals** container should be selected if you have multiple forests with trusts.</span></span> <span data-ttu-id="6b27a-248">Ce conteneur permet de résoudre l’appartenance au groupe de sécurité inter-forêts.</span><span class="sxs-lookup"><span data-stu-id="6b27a-248">This container allows cross-forest security group membership to be resolved.</span></span>
   * <span data-ttu-id="6b27a-249">Si vous avez activé la fonctionnalité d’écriture différée des appareils, l’unité d’organisation **RegisteredDevices** doit être sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-249">The **RegisteredDevices** OU should be selected if you enabled the device writeback feature.</span></span> <span data-ttu-id="6b27a-250">Si vous utilisez une autre fonction d’écriture différée telle que l’écriture différée de groupe, assurez-vous que ces emplacements sont sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="6b27a-250">If you use another writeback feature, such as group writeback, make sure these locations are selected.</span></span>
   * <span data-ttu-id="6b27a-251">Sélectionnez une autre unité d’organisation dans laquelle les utilisateurs, iNetOrgPersons, groupes, contacts et ordinateurs sont localisés.</span><span class="sxs-lookup"><span data-stu-id="6b27a-251">Select any other OU where Users, iNetOrgPersons, Groups, Contacts, and Computers are located.</span></span> <span data-ttu-id="6b27a-252">Dans l’illustration, toutes ces unités d’organisation se trouvent dans l’unité d’organisation ManagedObjects.</span><span class="sxs-lookup"><span data-stu-id="6b27a-252">In the picture, all these OUs are located in the ManagedObjects OU.</span></span>
   * <span data-ttu-id="6b27a-253">Si vous utilisez le filtrage basé sur le groupe, l’unité d’organisation où se trouve le groupe doit être incluse.</span><span class="sxs-lookup"><span data-stu-id="6b27a-253">If you use group-based filtering, then the OU where the group is located must be included.</span></span>
   * <span data-ttu-id="6b27a-254">Notez que vous pouvez spécifier si les nouvelles unités d’organisation ajoutées après la configuration du filtrage sont ou non synchronisées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-254">Note that you can configure whether new OUs that are added after the filtering configuration finishes are synchronized or not synchronized.</span></span> <span data-ttu-id="6b27a-255">Pour plus d'informations, consultez la section suivante.</span><span class="sxs-lookup"><span data-stu-id="6b27a-255">See the next section for details.</span></span>
7. <span data-ttu-id="6b27a-256">Quand vous avez terminé, fermez la boîte de dialogue **Propriétés** en cliquant sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-256">When you're done, close the **Properties** dialog by clicking **OK**.</span></span>
8. <span data-ttu-id="6b27a-257">Pour terminer la configuration, vous devez exécuter une **importation intégrale** et une **synchronisation delta**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-257">To complete the configuration, you need to run a **Full import** and a **Delta sync**.</span></span> <span data-ttu-id="6b27a-258">Poursuivez votre lecture de la section [Appliquer et vérifier les modifications](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="6b27a-258">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

### <a name="synchronize-new-ous"></a><span data-ttu-id="6b27a-259">Synchroniser les nouvelles unités d’organisation</span><span class="sxs-lookup"><span data-stu-id="6b27a-259">Synchronize new OUs</span></span>
<span data-ttu-id="6b27a-260">Les nouvelles unités d’organisation qui sont créées après la configuration du filtrage sont synchronisées par défaut.</span><span class="sxs-lookup"><span data-stu-id="6b27a-260">New OUs that are created after filtering has been configured are synchronized by default.</span></span> <span data-ttu-id="6b27a-261">Cet état est indiqué par une case cochée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-261">This state is indicated by a selected check box.</span></span> <span data-ttu-id="6b27a-262">Vous pouvez également désélectionner certaines unités d’organisation secondaires.</span><span class="sxs-lookup"><span data-stu-id="6b27a-262">You can also unselect some sub-OUs.</span></span> <span data-ttu-id="6b27a-263">Pour obtenir ce comportement, cliquez sur la case jusqu’à ce qu’elle devienne blanche avec une coche bleue (état par défaut).</span><span class="sxs-lookup"><span data-stu-id="6b27a-263">To get this behavior, click the box until it becomes white with a blue check mark (its default state).</span></span> <span data-ttu-id="6b27a-264">Puis désélectionnez les unités d’organisation secondaires que vous ne souhaitez pas synchroniser.</span><span class="sxs-lookup"><span data-stu-id="6b27a-264">Then unselect any sub-OUs that you don't want to synchronize.</span></span>

<span data-ttu-id="6b27a-265">Si toutes les unités d’organisation secondaires sont synchronisées, la case est blanche avec une coche bleue.</span><span class="sxs-lookup"><span data-stu-id="6b27a-265">If all sub-OUs are synchronized, then the box is white with a blue check mark.</span></span>  
![Unité d’organisation avec toutes les cases activées](./media/active-directory-aadconnectsync-configure-filtering/ousyncnewall.png)

<span data-ttu-id="6b27a-267">Si certaines unités d’organisation secondaires ont été désélectionnées, la case est grise avec une coche blanche.</span><span class="sxs-lookup"><span data-stu-id="6b27a-267">If some sub-OUs have been unselected, then the box is gray with a white check mark.</span></span>  
![Unité d’organisation avec des unités d’organisation secondaires désélectionnées](./media/active-directory-aadconnectsync-configure-filtering/ousyncnew.png)

<span data-ttu-id="6b27a-269">Avec cette configuration, une unité d’organisation qui a été créée sous ManagedObjects est synchronisée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-269">With this configuration, a new OU that was created under ManagedObjects is synchronized.</span></span>

<span data-ttu-id="6b27a-270">L’Assistant d’installation d’Azure AD Connect crée toujours cette configuration.</span><span class="sxs-lookup"><span data-stu-id="6b27a-270">The Azure AD Connect installation wizard always creates this configuration.</span></span>

### <a name="dont-synchronize-new-ous"></a><span data-ttu-id="6b27a-271">Ne pas synchroniser les nouvelles unités d’organisation</span><span class="sxs-lookup"><span data-stu-id="6b27a-271">Don't synchronize new OUs</span></span>
<span data-ttu-id="6b27a-272">Vous pouvez configurer le moteur de synchronisation de façon qu’il ne synchronise pas les nouvelles unités d’organisation après la configuration du filtrage.</span><span class="sxs-lookup"><span data-stu-id="6b27a-272">You can configure the sync engine to not synchronize new OUs after the filtering configuration has finished.</span></span> <span data-ttu-id="6b27a-273">Cet état est indiqué dans l’interface utilisateur par une case grise sans coche.</span><span class="sxs-lookup"><span data-stu-id="6b27a-273">This state is indicated in the UI by the box appearing solid gray with no check mark.</span></span> <span data-ttu-id="6b27a-274">Pour obtenir ce comportement, cliquez sur la case jusqu’à ce qu’elle devienne blanche sans coche.</span><span class="sxs-lookup"><span data-stu-id="6b27a-274">To get this behavior, click the box until it becomes white with no check mark.</span></span> <span data-ttu-id="6b27a-275">Puis sélectionnez les unités d’organisation secondaires que vous souhaitez synchroniser.</span><span class="sxs-lookup"><span data-stu-id="6b27a-275">Then select the sub-OUs that you want to synchronize.</span></span>

![Unité d’organisation avec la racine non sélectionnée](./media/active-directory-aadconnectsync-configure-filtering/oudonotsyncnew.png)

<span data-ttu-id="6b27a-277">Avec cette configuration, une unité d’organisation qui a été créée sous ManagedObjects n’est pas synchronisée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-277">With this configuration, a new OU that was created under ManagedObjects isn't synchronized.</span></span>

## <a name="attribute-based-filtering"></a><span data-ttu-id="6b27a-278">Filtrage par attribut</span><span class="sxs-lookup"><span data-stu-id="6b27a-278">Attribute-based filtering</span></span>
<span data-ttu-id="6b27a-279">Avant d’exécuter ces étapes, vérifiez que vous utilisez la version de novembre 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)) ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="6b27a-279">Make sure that you're using the November 2015 ([1.0.9125](active-directory-aadconnect-version-history.md#1091250)) or later build for these steps to work.</span></span>

<span data-ttu-id="6b27a-280">Le filtrage basé sur un attribut est le moyen le plus simple de filtrer des objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-280">Attribute-based filtering is the most flexible way to filter objects.</span></span> <span data-ttu-id="6b27a-281">Vous pouvez exploiter les possibilités de [l’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning.md) pour contrôler la quasi-totalité des aspects qui déterminent le moment où un objet est synchronisé avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-281">You can use the power of [declarative provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md) to control almost every aspect of when an object is synchronized to Azure AD.</span></span>

<span data-ttu-id="6b27a-282">Vous pouvez appliquer un filtrage [entrant](#inbound-filtering) d’Active Directory vers le métaverse, et un filtrage [sortant](#outbound-filtering) du métaverse vers Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-282">You can apply [inbound](#inbound-filtering) filtering from Active Directory to the metaverse, and [outbound](#outbound-filtering) filtering from the metaverse to Azure AD.</span></span> <span data-ttu-id="6b27a-283">Nous vous recommandons d’appliquer le filtrage entrant, car il est le plus simple à gérer.</span><span class="sxs-lookup"><span data-stu-id="6b27a-283">We recommend that you apply inbound filtering because that is the easiest to maintain.</span></span> <span data-ttu-id="6b27a-284">N’utilisez le filtrage sortant que s’il est nécessaire de joindre des objets issus de forêts différentes pour que l’évaluation puisse avoir lieu.</span><span class="sxs-lookup"><span data-stu-id="6b27a-284">You should only use outbound filtering if it's required to join objects from more than one forest before the evaluation can take place.</span></span>

### <a name="inbound-filtering"></a><span data-ttu-id="6b27a-285">Filtrage entrant</span><span class="sxs-lookup"><span data-stu-id="6b27a-285">Inbound filtering</span></span>
<span data-ttu-id="6b27a-286">Le filtrage entrant utilise la configuration par défaut dans laquelle l’attribut métaverse cloudFiltered des objets transmis à Azure AD ne doit pas être défini sur une valeur à synchroniser.</span><span class="sxs-lookup"><span data-stu-id="6b27a-286">Inbound filtering uses the default configuration, where objects going to Azure AD must have the metaverse attribute cloudFiltered not set to a value to be synchronized.</span></span> <span data-ttu-id="6b27a-287">Si cet attribut présente la valeur **True**, l’objet n’est pas synchronisé.</span><span class="sxs-lookup"><span data-stu-id="6b27a-287">If this attribute's value is set to **True**, then the object isn't synchronized.</span></span> <span data-ttu-id="6b27a-288">De par sa conception, cet attribut ne doit pas être défini sur la valeur **False**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-288">It shouldn't be set to **False**, by design.</span></span> <span data-ttu-id="6b27a-289">Pour vous assurer que les autres règles peuvent apporter une valeur, cet attribut est supposé n’accepter que les valeurs **True** ou **NULL** (absent).</span><span class="sxs-lookup"><span data-stu-id="6b27a-289">To make sure other rules have the ability to contribute a value, this attribute is only supposed to have the values **True** or **NULL** (absent).</span></span>

<span data-ttu-id="6b27a-290">Dans le cadre du filtrage entrant, vous utilisez les possibilités de **l’étendue** pour déterminer les objets à synchroniser ou non.</span><span class="sxs-lookup"><span data-stu-id="6b27a-290">In inbound filtering, you use the power of **scope** to determine which objects to synchronize or not synchronize.</span></span> <span data-ttu-id="6b27a-291">C’est à ce stade que vous réalisez des ajustements en fonction des besoins particuliers de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-291">This is where you make adjustments to fit your own organization's requirements.</span></span> <span data-ttu-id="6b27a-292">Le module d’étendue dispose d’un **groupe** et d’une **clause** pour déterminer les cas dans lesquels une règle de synchronisation figure dans l’étendue.</span><span class="sxs-lookup"><span data-stu-id="6b27a-292">The scope module has a **group** and a **clause** to determine when a sync rule is in scope.</span></span> <span data-ttu-id="6b27a-293">Un groupe contient une ou plusieurs clauses.</span><span class="sxs-lookup"><span data-stu-id="6b27a-293">A group contains one or many clauses.</span></span> <span data-ttu-id="6b27a-294">Il existe un « AND » logique entre plusieurs clauses, et un « OR » logique entre plusieurs groupes.</span><span class="sxs-lookup"><span data-stu-id="6b27a-294">There is a logical "AND" between multiple clauses, and a logical "OR" between multiple groups.</span></span>

<span data-ttu-id="6b27a-295">Intéressons-nous à un exemple : </span><span class="sxs-lookup"><span data-stu-id="6b27a-295">Let us look at an example:</span></span>  
<span data-ttu-id="6b27a-296">![Portée](./media/active-directory-aadconnectsync-configure-filtering/scope.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-296">![Scope](./media/active-directory-aadconnectsync-configure-filtering/scope.png)</span></span>  
<span data-ttu-id="6b27a-297">Voici la lecture qu’il faut en faire **(service = Informatique) OU (service = Ventes et c = US)**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-297">This should be read as **(department = IT) OR (department = Sales AND c = US)**.</span></span>

<span data-ttu-id="6b27a-298">Dans les exemples et étapes ci-après, vous vous servez de l’objet utilisateur en guise d’exemple, mais vous pouvez l’utiliser pour tous les types d’objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-298">In the following samples and steps, you use the user object as an example, but you can use this for all object types.</span></span>

<span data-ttu-id="6b27a-299">Dans les exemples suivants, la valeur de précédence commence à 50.</span><span class="sxs-lookup"><span data-stu-id="6b27a-299">In the following samples, the precedence value starts with 50.</span></span> <span data-ttu-id="6b27a-300">Il peut s’agir de n’importe quel nombre non utilisé, mais la valeur doit être inférieure à 100.</span><span class="sxs-lookup"><span data-stu-id="6b27a-300">This can be any number not used, but should be lower than 100.</span></span>

#### <a name="negative-filtering-do-not-sync-these"></a><span data-ttu-id="6b27a-301">Filtrage négatif : « ne pas synchroniser »</span><span class="sxs-lookup"><span data-stu-id="6b27a-301">Negative filtering: "do not sync these"</span></span>
<span data-ttu-id="6b27a-302">Dans l’exemple qui suit, vous excluez (ne synchronisez pas) tous les utilisateurs dont l’élément **extensionAttribute15** présente la valeur **NoSync**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-302">In the following example, you filter out (not synchronize) all users where **extensionAttribute15** has the value **NoSync**.</span></span>

1. <span data-ttu-id="6b27a-303">Connectez-vous au serveur qui exécute Azure AD Connect Sync en utilisant un compte membre du groupe de sécurité **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="6b27a-303">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="6b27a-304">Lancez **Éditeur de règles de synchronisation** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-304">Start **Synchronization Rules Editor** from the **Start** menu.</span></span>
3. <span data-ttu-id="6b27a-305">Assurez-vous que l’option **Entrante** est sélectionnée, puis cliquez sur **Ajouter une nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-305">Make sure **Inbound** is selected, and click **Add New Rule**.</span></span>
4. <span data-ttu-id="6b27a-306">Attribuez à la règle un nom descriptif, par exemple «*Entrée depuis AD – Utilisateur DoNotSyncFilter*».</span><span class="sxs-lookup"><span data-stu-id="6b27a-306">Give the rule a descriptive name, such as "*In from AD – User DoNotSyncFilter*".</span></span> <span data-ttu-id="6b27a-307">Sélectionnez la forêt appropriée, puis sélectionnez **Utilisateur** en tant que **Type d’objet système connecté**, et **Personne** en tant que **Type d’objet de métaverse**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-307">Select the correct forest, select **User** as the **CS object type**, and select **Person** as the **MV object type**.</span></span> <span data-ttu-id="6b27a-308">Dans **Type de lien**, sélectionnez **Jointure**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-308">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="6b27a-309">Dans la zone **Précédence**, tapez une valeur actuellement non utilisée par une autre règle de synchronisation (par exemple, 50), puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-309">In **Precedence**, type a value that isn't currently used by another synchronization rule (for example 50), and then click **Next**.</span></span>  
   <span data-ttu-id="6b27a-310">![1 description entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound1.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-310">![Inbound 1 description](./media/active-directory-aadconnectsync-configure-filtering/inbound1.png)</span></span>  
5. <span data-ttu-id="6b27a-311">Dans la zone **Filtre d’étendue**, cliquez sur **Ajouter un groupe**, puis sur **Ajouter une clause**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-311">In **Scoping filter**, click **Add Group**, and click **Add Clause**.</span></span> <span data-ttu-id="6b27a-312">Dans la zone **Attribut**, sélectionnez **ExtensionAttribute15**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-312">In **Attribute**, select **ExtensionAttribute15**.</span></span> <span data-ttu-id="6b27a-313">Vérifiez que la zone **Opérateur** est définie sur **EQUAL**, puis tapez la valeur **NoSync** dans la zone **Valeur**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-313">Make sure that **Operator** is set to **EQUAL**, and type the value **NoSync** in the **Value** box.</span></span> <span data-ttu-id="6b27a-314">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-314">Click **Next**.</span></span>  
   <span data-ttu-id="6b27a-315">![2 étendue entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound2.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-315">![Inbound 2 scope](./media/active-directory-aadconnectsync-configure-filtering/inbound2.png)</span></span>  
6. <span data-ttu-id="6b27a-316">Laissez les règles de **Jointure**, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-316">Leave the **Join** rules empty, and then click **Next**.</span></span>
7. <span data-ttu-id="6b27a-317">Cliquez sur **Ajouter une transformation**, définissez la zone **Type de flux** sur **Constante**, puis sélectionnez l’attribut **cloudFiltered** dans la zone **Attribut cible**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-317">Click **Add Transformation**, select the **FlowType** as **Constant**, and select **cloudFiltered** as the **Target Attribute**.</span></span> <span data-ttu-id="6b27a-318">Dans la zone de texte **Source**, tapez **True**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-318">In the **Source** text box, type **True**.</span></span> <span data-ttu-id="6b27a-319">Cliquez sur **Ajouter** pour enregistrer la règle.</span><span class="sxs-lookup"><span data-stu-id="6b27a-319">Click **Add** to save the rule.</span></span>  
   <span data-ttu-id="6b27a-320">![3 transformation entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-320">![Inbound 3 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span></span>
8. <span data-ttu-id="6b27a-321">Pour terminer la configuration, vous devez exécuter une **synchronisation complète**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-321">To complete the configuration, you need to run a **Full sync**.</span></span> <span data-ttu-id="6b27a-322">Poursuivez votre lecture de la section [Appliquer et vérifier les modifications](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="6b27a-322">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

#### <a name="positive-filtering-only-sync-these"></a><span data-ttu-id="6b27a-323">Filtrage positif : « synchroniser uniquement ces éléments »</span><span class="sxs-lookup"><span data-stu-id="6b27a-323">Positive filtering: "only sync these"</span></span>
<span data-ttu-id="6b27a-324">L’expression d’un filtrage positif peut se révéler plus complexe, car vous devez également prendre en compte des objets qui ne sont pas évidents à synchroniser, notamment les salles de conférence.</span><span class="sxs-lookup"><span data-stu-id="6b27a-324">Expressing positive filtering can be more challenging because you also have to consider objects that aren't obvious to be synchronized, such as conference rooms.</span></span> <span data-ttu-id="6b27a-325">Vous allez également remplacer le filtre par défaut dans la règle prête à l’emploi **In from AD - User Join**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-325">You are also going to override the default filter in the out-of-box rule **In from AD - User Join**.</span></span> <span data-ttu-id="6b27a-326">Lorsque vous créez votre filtre personnalisé, veillez à ne pas inclure les objets système critiques, les objets de conflit de réplication, les boîtes aux lettres spéciales et les comptes de service pour Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6b27a-326">When you create your custom filter, make sure to not include critical system objects, replication conflict objects, special mailboxes, and the service accounts for Azure AD Connect.</span></span>

<span data-ttu-id="6b27a-327">L’option de filtrage positif nécessite deux règles de synchronisation :</span><span class="sxs-lookup"><span data-stu-id="6b27a-327">The positive filtering option requires two sync rules.</span></span> <span data-ttu-id="6b27a-328">une (ou plusieurs) règles présentant l’étendue correcte des objets à synchroniser,</span><span class="sxs-lookup"><span data-stu-id="6b27a-328">You need one rule (or several) with the correct scope of objects to synchronize.</span></span> <span data-ttu-id="6b27a-329">ainsi qu’une deuxième règle de synchronisation fourre-tout excluant tous les objets qui n’ont pas encore été identifiés en tant qu’objets à synchroniser.</span><span class="sxs-lookup"><span data-stu-id="6b27a-329">You also need a second catch-all sync rule that filters out all objects that haven't yet been identified as an object that should be synchronized.</span></span>

<span data-ttu-id="6b27a-330">Dans l’exemple suivant, vous synchronisez uniquement les objets utilisateur dont l’attribut « service » a pour valeur **Ventes**:</span><span class="sxs-lookup"><span data-stu-id="6b27a-330">In the following example, you only synchronize user objects where the department attribute has the value **Sales**.</span></span>

1. <span data-ttu-id="6b27a-331">Connectez-vous au serveur qui exécute Azure AD Connect Sync en utilisant un compte membre du groupe de sécurité **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="6b27a-331">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="6b27a-332">Lancez **Éditeur de règles de synchronisation** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-332">Start **Synchronization Rules Editor** from the **Start** menu.</span></span>
3. <span data-ttu-id="6b27a-333">Assurez-vous que l’option **Entrante** est sélectionnée, puis cliquez sur **Ajouter une nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-333">Make sure **Inbound** is selected, and click **Add New Rule**.</span></span>
4. <span data-ttu-id="6b27a-334">Attribuez à la règle un nom descriptif, par exemple «*Entrée depuis AD - Sync Ventes utilisateur*».</span><span class="sxs-lookup"><span data-stu-id="6b27a-334">Give the rule a descriptive name, such as "*In from AD – User Sales sync*".</span></span> <span data-ttu-id="6b27a-335">Sélectionnez la forêt appropriée, puis sélectionnez **Utilisateur** en tant que **Type d’objet système connecté**, et **Personne** en tant que **Type d’objet de métaverse**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-335">Select the correct forest, select **User** as the **CS object type**, and select **Person** as the **MV object type**.</span></span> <span data-ttu-id="6b27a-336">Dans **Type de lien**, sélectionnez **Jointure**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-336">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="6b27a-337">Dans la zone **Précédence**, tapez une valeur actuellement non utilisée par une autre règle de synchronisation (par exemple, 51), puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-337">In **Precedence**, type a value that isn't currently used by another synchronization rule (for example 51), and then click **Next**.</span></span>  
   <span data-ttu-id="6b27a-338">![4 description entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound4.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-338">![Inbound 4 description](./media/active-directory-aadconnectsync-configure-filtering/inbound4.png)</span></span>  
5. <span data-ttu-id="6b27a-339">Dans la zone **Filtre d’étendue**, cliquez sur **Ajouter un groupe**, puis sur **Ajouter une clause**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-339">In **Scoping filter**, click **Add Group**, and click **Add Clause**.</span></span> <span data-ttu-id="6b27a-340">Dans la zone **Attribut**, sélectionnez **department**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-340">In **Attribute**, select **department**.</span></span> <span data-ttu-id="6b27a-341">Vérifiez que l’opérateur est défini sur **EQUAL**, puis tapez la valeur **Sales** dans la zone **Valeur**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-341">Make sure that Operator is set to **EQUAL**, and type the value **Sales** in the **Value** box.</span></span> <span data-ttu-id="6b27a-342">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-342">Click **Next**.</span></span>  
   <span data-ttu-id="6b27a-343">![5 étendue entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound5.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-343">![Inbound 5 scope](./media/active-directory-aadconnectsync-configure-filtering/inbound5.png)</span></span>  
6. <span data-ttu-id="6b27a-344">Laissez les règles de **Jointure**, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-344">Leave the **Join** rules empty, and then click **Next**.</span></span>
7. <span data-ttu-id="6b27a-345">Cliquez sur **Ajouter une transformation**, sélectionnez la valeur **Constante** dans la zone **Type de flux**, puis sélectionnez l’attribut **cloudFiltered** dans la zone **Attribut cible**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-345">Click **Add Transformation**, select **Constant** as the **FlowType**, and select the **cloudFiltered** as the **Target Attribute**.</span></span> <span data-ttu-id="6b27a-346">Dans la zone **Source**, tapez **False**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-346">In the **Source** box, type **False**.</span></span> <span data-ttu-id="6b27a-347">Cliquez sur **Ajouter** pour enregistrer la règle.</span><span class="sxs-lookup"><span data-stu-id="6b27a-347">Click **Add** to save the rule.</span></span>  
   <span data-ttu-id="6b27a-348">![6 transformation entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound6.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-348">![Inbound 6 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound6.png)</span></span>  
   <span data-ttu-id="6b27a-349">Il s’agit d’un cas particulier dans lequel vous définissez explicitement cloudFiltered sur la valeur **False**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-349">This is a special case where you explicitly set cloudFiltered to **False**.</span></span>
8. <span data-ttu-id="6b27a-350">Nous devons maintenant créer la règle de synchronisation fourre-tout.</span><span class="sxs-lookup"><span data-stu-id="6b27a-350">We now have to create the catch-all sync rule.</span></span> <span data-ttu-id="6b27a-351">Donnez à la règle un nom descriptif, par exemple «*Entrée depuis Active Directory - Filtre fourre-tout utilisateur*».</span><span class="sxs-lookup"><span data-stu-id="6b27a-351">Give the rule a descriptive name, such as "*In from AD – User Catch-all filter*".</span></span> <span data-ttu-id="6b27a-352">Sélectionnez la forêt appropriée, puis sélectionnez **Utilisateur** en tant que **Type d’objet système connecté**, et **Personne** en tant que **Type d’objet de métaverse**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-352">Select the correct forest, select **User** as the **CS object type**, and select **Person** as the **MV object type**.</span></span> <span data-ttu-id="6b27a-353">Dans **Type de lien**, sélectionnez **Jointure**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-353">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="6b27a-354">Dans la zone **Précédence**, tapez une valeur actuellement non utilisée par une autre règle de synchronisation (par exemple, 99).</span><span class="sxs-lookup"><span data-stu-id="6b27a-354">In **Precedence**, type a value that isn't currently used by another Synchronization Rule (for example 99).</span></span> <span data-ttu-id="6b27a-355">Vous avez sélectionné une valeur de précédence supérieure (précédence moindre) à la règle de synchronisation précédente.</span><span class="sxs-lookup"><span data-stu-id="6b27a-355">You've selected a precedence value that is higher (lower precedence) than the previous sync rule.</span></span> <span data-ttu-id="6b27a-356">Toutefois, vous avez également laissé de la place de façon à pouvoir ajouter des règles de synchronisation de filtrage par la suite si vous souhaitez procéder à la synchronisation de services supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="6b27a-356">But you've also left some room so that you can add more filtering sync rules later when you want to start synchronizing additional departments.</span></span> <span data-ttu-id="6b27a-357">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-357">Click **Next**.</span></span>  
   <span data-ttu-id="6b27a-358">![7 description entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound7.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-358">![Inbound 7 description](./media/active-directory-aadconnectsync-configure-filtering/inbound7.png)</span></span>  
9. <span data-ttu-id="6b27a-359">Laissez l’option **Filtre d’étendue** vide, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-359">Leave **Scoping filter** empty, and click **Next**.</span></span> <span data-ttu-id="6b27a-360">Un filtre vide indique que la règle doit être appliquée à tous les objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-360">An empty filter indicates that the rule is to be applied to all objects.</span></span>
10. <span data-ttu-id="6b27a-361">Laissez les règles de **Jointure**, puis cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-361">Leave the **Join** rules empty, and then click **Next**.</span></span>
11. <span data-ttu-id="6b27a-362">Cliquez sur **Ajouter une transformation**, sélectionnez la valeur **Constante** dans la zone **Type de flux**, puis sélectionnez l’attribut **cloudFiltered** dans la zone **Attribut cible**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-362">Click **Add Transformation**, select **Constant** as the **FlowType**, and select **cloudFiltered** as the **Target Attribute**.</span></span> <span data-ttu-id="6b27a-363">Dans la zone **Source**, tapez **True**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-363">In the **Source** box, type **True**.</span></span> <span data-ttu-id="6b27a-364">Cliquez sur **Ajouter** pour enregistrer la règle.</span><span class="sxs-lookup"><span data-stu-id="6b27a-364">Click **Add** to save the rule.</span></span>  
    <span data-ttu-id="6b27a-365">![3 transformation entrante](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-365">![Inbound 3 transformation](./media/active-directory-aadconnectsync-configure-filtering/inbound3.png)</span></span>  
12. <span data-ttu-id="6b27a-366">Pour terminer la configuration, vous devez exécuter une **synchronisation complète**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-366">To complete the configuration, you need to run a **Full sync**.</span></span> <span data-ttu-id="6b27a-367">Poursuivez votre lecture de la section [Appliquer et vérifier les modifications](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="6b27a-367">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

<span data-ttu-id="6b27a-368">En cas de besoin, vous pouvez créer d’autres règles du premier type avec lesquelles inclure davantage d’objets dans la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-368">If you need to, you can create more rules of the first type where you include more objects in the synchronization.</span></span>

### <a name="outbound-filtering"></a><span data-ttu-id="6b27a-369">Filtrage sortant</span><span class="sxs-lookup"><span data-stu-id="6b27a-369">Outbound filtering</span></span>
<span data-ttu-id="6b27a-370">Dans certains cas, l’exécution du filtrage n’est requise qu’après la jonction des objets dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="6b27a-370">In some cases, it's necessary to do the filtering only after the objects have joined in the metaverse.</span></span> <span data-ttu-id="6b27a-371">Par exemple, pour déterminer si un objet doit être synchronisé, il peut être nécessaire d’examiner l’attribut mail à partir de la forêt de ressources et l’attribut userPrincipalName à partir de la forêt de comptes.</span><span class="sxs-lookup"><span data-stu-id="6b27a-371">For example, it might be necessary to look at the mail attribute from the resource forest, and the userPrincipalName attribute from the account forest, to determine if an object should be synchronized.</span></span> <span data-ttu-id="6b27a-372">Le cas échéant, vous créez le filtrage sur la règle de trafic sortant.</span><span class="sxs-lookup"><span data-stu-id="6b27a-372">In these cases, you create the filtering on the outbound rule.</span></span>

<span data-ttu-id="6b27a-373">Dans cet exemple, vous modifiez le filtrage afin que seuls les utilisateurs dont les attributs mail et userPrincipalName se terminent par @contoso.com soient synchronisés :</span><span class="sxs-lookup"><span data-stu-id="6b27a-373">In this example, you change the filtering so that only users that have both their mail and userPrincipalName ending in @contoso.com are synchronized:</span></span>

1. <span data-ttu-id="6b27a-374">Connectez-vous au serveur qui exécute Azure AD Connect Sync en utilisant un compte membre du groupe de sécurité **ADSyncAdmins** .</span><span class="sxs-lookup"><span data-stu-id="6b27a-374">Sign in to the server that is running Azure AD Connect sync by using an account that is a member of the **ADSyncAdmins** security group.</span></span>
2. <span data-ttu-id="6b27a-375">Lancez **Éditeur de règles de synchronisation** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-375">Start **Synchronization Rules Editor** from the **Start** menu.</span></span>
3. <span data-ttu-id="6b27a-376">Sous **Type de règles**, cliquez sur **Sortant**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-376">Under **Rules Type**, click **Outbound**.</span></span>
4. <span data-ttu-id="6b27a-377">Recherchez la règle appelée **Out vers AAD - Jointure Utilisateur**, puis cliquez sur **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-377">Find the rule named **Out to AAD – User Join**, and click **Edit**.</span></span>
5. <span data-ttu-id="6b27a-378">Dans la fenêtre contextuelle, sélectionnez **Oui** pour créer une copie de la règle.</span><span class="sxs-lookup"><span data-stu-id="6b27a-378">In the pop-up, answer **Yes** to create a copy of the rule.</span></span>
6. <span data-ttu-id="6b27a-379">Sur la page **Description**, redéfinissez la zone **Précédence** sur une valeur inutilisée, telle que 50.</span><span class="sxs-lookup"><span data-stu-id="6b27a-379">On the **Description** page, change **Precedence** to an unused value, such as 50.</span></span>
7. <span data-ttu-id="6b27a-380">Dans la barre de navigation gauche, cliquez sur **Filtre d’étendue**, puis cliquez sur **Ajouter une clause**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-380">Click **Scoping filter** on the left-hand navigation, and then click **Add clause**.</span></span> <span data-ttu-id="6b27a-381">Dans la zone **Attribut**, sélectionnez **mail**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-381">In **Attribute**, select **mail**.</span></span> <span data-ttu-id="6b27a-382">Dans la zone **Opérateur**, sélectionnez **ENDSWITH**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-382">In **Operator**, select **ENDSWITH**.</span></span> <span data-ttu-id="6b27a-383">Dans la zone **Valeur**, tapez **@contoso.com**, puis cliquez sur **Ajouter une clause**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-383">In **Value**, type **@contoso.com**, and then click **Add clause**.</span></span> <span data-ttu-id="6b27a-384">Dans la zone **Attribut**, sélectionnez **userPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-384">In **Attribute**, select **userPrincipalName**.</span></span> <span data-ttu-id="6b27a-385">Dans la zone **Opérateur**, sélectionnez **ENDSWITH**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-385">In **Operator**, select **ENDSWITH**.</span></span> <span data-ttu-id="6b27a-386">Dans la zone **Valeur**, tapez **@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-386">In **Value**, type **@contoso.com**.</span></span>
8. <span data-ttu-id="6b27a-387">Cliquez sur **Save**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-387">Click **Save**.</span></span>
9. <span data-ttu-id="6b27a-388">Pour terminer la configuration, vous devez exécuter une **synchronisation complète**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-388">To complete the configuration, you need to run a **Full sync**.</span></span> <span data-ttu-id="6b27a-389">Poursuivez votre lecture de la section [Appliquer et vérifier les modifications](#apply-and-verify-changes).</span><span class="sxs-lookup"><span data-stu-id="6b27a-389">Continue reading the section [Apply and verify changes](#apply-and-verify-changes).</span></span>

## <a name="apply-and-verify-changes"></a><span data-ttu-id="6b27a-390">Appliquer et vérifier les modifications</span><span class="sxs-lookup"><span data-stu-id="6b27a-390">Apply and verify changes</span></span>
<span data-ttu-id="6b27a-391">Une fois que vous avez modifié votre configuration, vous devez l’appliquer aux objets déjà présents dans le système.</span><span class="sxs-lookup"><span data-stu-id="6b27a-391">After you've made your configuration changes, you must apply them to the objects that are already present in the system.</span></span> <span data-ttu-id="6b27a-392">Il est également possible que des objets ne figurant pas actuellement dans le moteur de synchronisation doivent être traités (et que le moteur de synchronisation doive consulter de nouveau le système source pour en vérifier le contenu).</span><span class="sxs-lookup"><span data-stu-id="6b27a-392">It might also be that the objects that aren't currently in the sync engine should be processed (and the sync engine needs to read the source system again to verify its content).</span></span>

<span data-ttu-id="6b27a-393">Si vous avez modifié la configuration à l’aide d’un filtrage par **domaine** ou par **unité d’organisation**, vous devez procéder à une **importation intégrale** suivie d’une **synchronisation delta**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-393">If you changed the configuration by using **domain** or **organizational-unit** filtering, then you need to do a **Full import**, followed by **Delta synchronization**.</span></span>

<span data-ttu-id="6b27a-394">Si vous avez modifié la configuration en utilisant un filtrage par **attribut**, vous devez exécuter une **synchronisation complète**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-394">If you changed the configuration by using **attribute** filtering, then you need to do a **Full synchronization**.</span></span>

<span data-ttu-id="6b27a-395">Effectuez également les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="6b27a-395">Do the following steps:</span></span>

1. <span data-ttu-id="6b27a-396">Lancez **Service de synchronisation** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-396">Start **Synchronization Service** from the **Start** menu.</span></span>
2. <span data-ttu-id="6b27a-397">Sélectionnez **Connecteurs**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-397">Select **Connectors**.</span></span> <span data-ttu-id="6b27a-398">Dans la liste **Connecteurs**, sélectionnez le connecteur dont vous avez modifié la configuration précédemment.</span><span class="sxs-lookup"><span data-stu-id="6b27a-398">In the **Connectors** list, select the Connector where you made a configuration change earlier.</span></span> <span data-ttu-id="6b27a-399">Dans **Actions**, sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-399">In **Actions**, select **Run**.</span></span>  
   <span data-ttu-id="6b27a-400">![Exécution de connecteur](./media/active-directory-aadconnectsync-configure-filtering/connectorrun.png)</span><span class="sxs-lookup"><span data-stu-id="6b27a-400">![Connector run](./media/active-directory-aadconnectsync-configure-filtering/connectorrun.png)</span></span>  
3. <span data-ttu-id="6b27a-401">Dans **Profils d’exécution**, sélectionnez l’opération mentionnée à la section précédente.</span><span class="sxs-lookup"><span data-stu-id="6b27a-401">In **Run profiles**, select the operation that was mentioned in the previous section.</span></span> <span data-ttu-id="6b27a-402">Si vous devez exécuter deux actions, n’exécutez la seconde qu’une fois la première terminée.</span><span class="sxs-lookup"><span data-stu-id="6b27a-402">If you need to run two actions, run the second after the first one has finished.</span></span> <span data-ttu-id="6b27a-403">(La colonne **État** correspondant au connecteur sélectionné présente la valeur **Inactif**.)</span><span class="sxs-lookup"><span data-stu-id="6b27a-403">(The **State** column is **Idle** for the selected connector.)</span></span>

<span data-ttu-id="6b27a-404">Après la synchronisation, toutes les modifications sont indexées pour l’exportation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-404">After the synchronization, all changes are staged to be exported.</span></span> <span data-ttu-id="6b27a-405">Avant d’apporter les modifications dans Azure AD, il est préférable de vérifier qu’elles sont toutes correctes.</span><span class="sxs-lookup"><span data-stu-id="6b27a-405">Before you actually make the changes in Azure AD, you want to verify that all these changes are correct.</span></span>

1. <span data-ttu-id="6b27a-406">Démarrez une invite de commandes, puis accédez à `%Program Files%\Microsoft Azure AD Sync\bin`.</span><span class="sxs-lookup"><span data-stu-id="6b27a-406">Start a command prompt, and go to `%Program Files%\Microsoft Azure AD Sync\bin`.</span></span>
2. <span data-ttu-id="6b27a-407">Exécutez `csexport "Name of Connector" %temp%\export.xml /f:x`.</span><span class="sxs-lookup"><span data-stu-id="6b27a-407">Run `csexport "Name of Connector" %temp%\export.xml /f:x`.</span></span>  
   <span data-ttu-id="6b27a-408">Le nom du connecteur figure dans le service de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-408">The name of the Connector is in Synchronization Service.</span></span> <span data-ttu-id="6b27a-409">Le nom est similaire à « contoso.com – AAD » pour Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-409">It has a name similar to "contoso.com – AAD" for Azure AD.</span></span>
3. <span data-ttu-id="6b27a-410">Exécutez `CSExportAnalyzer %temp%\export.xml > %temp%\export.csv`.</span><span class="sxs-lookup"><span data-stu-id="6b27a-410">Run `CSExportAnalyzer %temp%\export.xml > %temp%\export.csv`.</span></span>
4. <span data-ttu-id="6b27a-411">Vous disposez maintenant d’un fichier dans %temp% nommé export.csv qui peuvent être examiné dans Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="6b27a-411">You now have a file in %temp% named export.csv that can be examined in Microsoft Excel.</span></span> <span data-ttu-id="6b27a-412">Ce fichier contient toutes les modifications sur le point d’être exportées.</span><span class="sxs-lookup"><span data-stu-id="6b27a-412">This file contains all the changes that are about to be exported.</span></span>
5. <span data-ttu-id="6b27a-413">Apportez les modifications nécessaires aux données ou à la configuration, puis réexécutez ces opérations (importer, synchroniser et vérifier) jusqu’à ce que les modifications sur le point d’être exportées soient conformes à vos attentes.</span><span class="sxs-lookup"><span data-stu-id="6b27a-413">Make the necessary changes to the data or configuration, and run these steps again (Import, Synchronize, and Verify) until the changes that are about to be exported are what you expect.</span></span>

<span data-ttu-id="6b27a-414">Lorsque vous êtes satisfait, exportez les modifications vers Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-414">When you're satisfied, export the changes to Azure AD.</span></span>

1. <span data-ttu-id="6b27a-415">Sélectionnez **Connecteurs**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-415">Select **Connectors**.</span></span> <span data-ttu-id="6b27a-416">Dans la liste **Connecteurs**, sélectionnez le connecteur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-416">In the **Connectors** list, select the Azure AD Connector.</span></span> <span data-ttu-id="6b27a-417">Dans **Actions**, sélectionnez **Exécuter**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-417">In **Actions**, select **Run**.</span></span>
2. <span data-ttu-id="6b27a-418">Dans **Profils d’exécution**, sélectionnez **Exporter**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-418">In **Run profiles**, select **Export**.</span></span>
3. <span data-ttu-id="6b27a-419">Lorsque vos modifications de configuration suppriment de nombreux objets, une erreur d’exportation s’affiche si leur nombre est supérieur au seuil configuré (par défaut, 500).</span><span class="sxs-lookup"><span data-stu-id="6b27a-419">If your configuration changes delete many objects, then you see an error in the export when the number is more than the configured threshold (by default 500).</span></span> <span data-ttu-id="6b27a-420">Le cas échéant, vous devez désactiver provisoirement la fonctionnalité « [Prévention des suppressions accidentelles](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md) ».</span><span class="sxs-lookup"><span data-stu-id="6b27a-420">If you see this error, then you need to temporarily disable the "[prevent accidental deletes](active-directory-aadconnectsync-feature-prevent-accidental-deletes.md)" feature.</span></span>

<span data-ttu-id="6b27a-421">À présent, il est temps de réactiver le planificateur.</span><span class="sxs-lookup"><span data-stu-id="6b27a-421">Now it's time to enable the scheduler again.</span></span>

1. <span data-ttu-id="6b27a-422">Lancez **Planificateur de tâches** à partir du menu **Démarrer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-422">Start **Task Scheduler** from the **Start** menu.</span></span>
2. <span data-ttu-id="6b27a-423">Directement sous **Bibliothèque du Planificateur de tâches**, trouvez la tâche **Azure AD Sync Scheduler**, cliquez dessus avec le bouton droit et sélectionnez **Activer**.</span><span class="sxs-lookup"><span data-stu-id="6b27a-423">Directly under **Task Scheduler Library**, find the task named **Azure AD Sync Scheduler**, right-click, and select **Enable**.</span></span>

## <a name="group-based-filtering"></a><span data-ttu-id="6b27a-424">Filtrage de groupe</span><span class="sxs-lookup"><span data-stu-id="6b27a-424">Group-based filtering</span></span>
<span data-ttu-id="6b27a-425">Vous pouvez configurer le filtrage basé sur un groupe la première fois que vous installez Azure AD Connect à l’aide de [l’installation personnalisée](active-directory-aadconnect-get-started-custom.md#sync-filtering-based-on-groups).</span><span class="sxs-lookup"><span data-stu-id="6b27a-425">You can configure group-based filtering the first time that you install Azure AD Connect by using [custom installation](active-directory-aadconnect-get-started-custom.md#sync-filtering-based-on-groups).</span></span> <span data-ttu-id="6b27a-426">Ce filtrage est conçu pour un déploiement pilote dans lequel vous ne souhaitez synchroniser qu’un petit ensemble d’objets.</span><span class="sxs-lookup"><span data-stu-id="6b27a-426">It's intended for a pilot deployment where you want only a small set of objects to be synchronized.</span></span> <span data-ttu-id="6b27a-427">Lorsque vous désactivez le filtrage basé sur un groupe, vous ne pouvez plus le réactiver.</span><span class="sxs-lookup"><span data-stu-id="6b27a-427">When you disable group-based filtering, it can't be enabled again.</span></span> <span data-ttu-id="6b27a-428">L’utilisation du filtrage basé sur un groupe dans une configuration personnalisée n’est *pas prise en charge*.</span><span class="sxs-lookup"><span data-stu-id="6b27a-428">It's *not supported* to use group-based filtering in a custom configuration.</span></span> <span data-ttu-id="6b27a-429">La configuration de cette fonctionnalité n’est possible que par le biais de l’Assistant Installation.</span><span class="sxs-lookup"><span data-stu-id="6b27a-429">It's only supported to configure this feature by using the installation wizard.</span></span> <span data-ttu-id="6b27a-430">Lorsque vous avez terminé votre pilote, utilisez l’une des autres options de filtrage indiquées dans cet article.</span><span class="sxs-lookup"><span data-stu-id="6b27a-430">When you've completed your pilot, then use one of the other filtering options in this topic.</span></span> <span data-ttu-id="6b27a-431">Si vous utilisez le filtrage basé sur l’unité d’organisation avec le filtrage basé sur les groupes, l’unité d’organisation dans laquelle se trouvent les objets de groupe et de membre doit être incluse.</span><span class="sxs-lookup"><span data-stu-id="6b27a-431">When using OU-based filtering in conjunction with group-based filtering, the OU(s) where the group and its members are located must be included.</span></span>

<span data-ttu-id="6b27a-432">Lors de la synchronisation de plusieurs forêts Active Directory, vous pouvez configurer le filtrage basé sur les groupes en spécifiant un groupe différent pour chaque connecteur Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6b27a-432">When synchronizing multiple AD forests, you can configure group-based filtering by specifying a different group for each AD connector.</span></span> <span data-ttu-id="6b27a-433">Si vous voulez synchroniser un utilisateur dans une forêt Active Directory, alors que cet utilisateur dispose d’un ou de plusieurs objets FSP correspondants dans d’autres forêts Active Directory, vous devez veiller à ce que l’objet utilisateur et tous ses objets FSP correspondants soient compris dans l’étendue du filtrage basé sur les groupes.</span><span class="sxs-lookup"><span data-stu-id="6b27a-433">If you wish to synchronize a user in one AD forest and the same user has one or more corresponding FSP (Foreign Security Principal) objects in other AD forests, you must ensure that the user object and all its corresponding FSP objects are within group-based filtering scope.</span></span> <span data-ttu-id="6b27a-434">Si un ou plusieurs objets FSP sont exclus par filtrage basé sur les groupes, l’objet utilisateur ne sera pas synchronisé avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6b27a-434">If one or more of the FSP objects are excluded by group-based filtering, the user object will not be synchronized to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6b27a-435">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="6b27a-435">Next steps</span></span>
- <span data-ttu-id="6b27a-436">Apprenez-en davantage sur la configuration de la [synchronisation Azure AD Connect](active-directory-aadconnectsync-whatis.md).</span><span class="sxs-lookup"><span data-stu-id="6b27a-436">Learn more about [Azure AD Connect sync](active-directory-aadconnectsync-whatis.md) configuration.</span></span>
- <span data-ttu-id="6b27a-437">Apprenez-en davantage sur [l’intégration de vos identités locales à Azure AD](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="6b27a-437">Learn more about [integrating your on-premises identities with Azure AD](active-directory-aadconnect.md).</span></span>
