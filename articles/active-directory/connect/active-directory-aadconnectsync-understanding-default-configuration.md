---
title: "Synchronisation Azure AD Connect : présentation de la configuration par défaut | Microsoft Docs"
description: "Cet article décrit la configuration par défaut dans la synchronisation Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 32a693c059a1b4261f33a3d6f50f397365e9dac4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-the-default-configuration"></a><span data-ttu-id="4dad3-103">Azure AD Connect Sync : comprendre la configuration par défaut</span><span class="sxs-lookup"><span data-stu-id="4dad3-103">Azure AD Connect sync: Understanding the default configuration</span></span>
<span data-ttu-id="4dad3-104">Cet article présente les règles de configuration out-of-box.</span><span class="sxs-lookup"><span data-stu-id="4dad3-104">This article explains the out-of-box configuration rules.</span></span> <span data-ttu-id="4dad3-105">Il décrit les règles et l’impact que celles-ci ont sur la configuration.</span><span class="sxs-lookup"><span data-stu-id="4dad3-105">It documents the rules and how these rules impact the configuration.</span></span> <span data-ttu-id="4dad3-106">Il vous guide également tout au long de la configuration par défaut de la synchronisation Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4dad3-106">It also walks you through the default configuration of Azure AD Connect sync.</span></span> <span data-ttu-id="4dad3-107">L’objectif est que le lecteur comprenne comment fonctionne le modèle de configuration, nommé approvisionnement déclaratif, dans un exemple réel.</span><span class="sxs-lookup"><span data-stu-id="4dad3-107">The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="4dad3-108">Cet article suppose que vous avez déjà installé et configuré la synchronisation Azure AD Connect à l’aide de l’Assistant d’installation.</span><span class="sxs-lookup"><span data-stu-id="4dad3-108">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span></span>

<span data-ttu-id="4dad3-109">Pour comprendre les détails du modèle de configuration, lisez [Comprendre l’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="4dad3-109">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-to-azure-ad"></a><span data-ttu-id="4dad3-110">Règles out-of-box du local vers Azure AD</span><span class="sxs-lookup"><span data-stu-id="4dad3-110">Out-of-box rules from on-premises to Azure AD</span></span>
<span data-ttu-id="4dad3-111">Les expressions suivantes se trouvent dans la configuration out-of-box.</span><span class="sxs-lookup"><span data-stu-id="4dad3-111">The following expressions can be found in the out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="4dad3-112">Règles out-of-box d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="4dad3-112">User out-of-box rules</span></span>
<span data-ttu-id="4dad3-113">Ces règles s’appliquent également au type d’objet iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="4dad3-113">These rules also apply to the iNetOrgPerson object type.</span></span>

<span data-ttu-id="4dad3-114">Un objet utilisateur doit remplir les conditions suivantes pour être synchronisé :</span><span class="sxs-lookup"><span data-stu-id="4dad3-114">A user object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="4dad3-115">Il doit disposer d’un sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4dad3-115">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="4dad3-116">Une fois que l’objet a été créé dans Azure AD, le sourceAnchor ne peut pas être modifié.</span><span class="sxs-lookup"><span data-stu-id="4dad3-116">After the object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="4dad3-117">Si la valeur est modifiée en local, l’objet arrête la synchronisation jusqu’à ce que l’attribut sourceAnchor récupère sa valeur précédente.</span><span class="sxs-lookup"><span data-stu-id="4dad3-117">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span></span>
* <span data-ttu-id="4dad3-118">L’attribut accountEnabled (userAccountControl) dont il dispose doit être renseigné.</span><span class="sxs-lookup"><span data-stu-id="4dad3-118">Must have the accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="4dad3-119">Avec un Active Directory local, cet attribut est toujours présent et renseigné.</span><span class="sxs-lookup"><span data-stu-id="4dad3-119">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="4dad3-120">Les objets utilisateur suivants ne sont **pas** synchronisés avec Azure AD :</span><span class="sxs-lookup"><span data-stu-id="4dad3-120">The following user objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="4dad3-121">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-121">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="4dad3-122">Vérifiez que la plupart des objets out-of-box dans Active Directory, tels que le compte administrateur intégré, ne sont pas synchronisés.</span><span class="sxs-lookup"><span data-stu-id="4dad3-122">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="4dad3-123">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-123">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="4dad3-124">Assurez-vous que les objets utilisateur sans l'attribut sAMAccountName ne sont pas synchronisés.</span><span class="sxs-lookup"><span data-stu-id="4dad3-124">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="4dad3-125">Ce cas se produit pratiquement uniquement dans un domaine mis à niveau à partir d’un système NT4.</span><span class="sxs-lookup"><span data-stu-id="4dad3-125">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="4dad3-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="4dad3-127">Ne synchronisez pas le compte de service utilisé par la synchronisation d’Azure AD Connect et de ses versions précédentes.</span><span class="sxs-lookup"><span data-stu-id="4dad3-127">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="4dad3-128">Ne synchronisez pas les comptes Exchange qui pourraient ne pas fonctionner dans Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="4dad3-128">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="4dad3-129">Ne synchronisez pas les objets qui pourraient ne pas fonctionner dans Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="4dad3-129">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="4dad3-130">Ce masque de bits (&amp;H21C07000) pourrait exclure les objets suivants :</span><span class="sxs-lookup"><span data-stu-id="4dad3-130">This bitmask (&H21C07000) would filter out the following objects:</span></span>
  * <span data-ttu-id="4dad3-131">Dossier public à extension messagerie</span><span class="sxs-lookup"><span data-stu-id="4dad3-131">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="4dad3-132">Boîte aux lettres de surveillance du système</span><span class="sxs-lookup"><span data-stu-id="4dad3-132">System Attendant Mailbox</span></span>
  * <span data-ttu-id="4dad3-133">Boîte aux lettres de base de données de boîtes aux lettres (Boîte aux lettres système)</span><span class="sxs-lookup"><span data-stu-id="4dad3-133">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="4dad3-134">Groupe de sécurité universel (ne s'applique pas à un utilisateur, mais est présent pour des raisons d'héritage)</span><span class="sxs-lookup"><span data-stu-id="4dad3-134">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="4dad3-135">Groupe non universel (ne s'applique pas à un utilisateur, mais est présent pour des raisons d'héritage)</span><span class="sxs-lookup"><span data-stu-id="4dad3-135">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="4dad3-136">Plan de boîte aux lettres</span><span class="sxs-lookup"><span data-stu-id="4dad3-136">Mailbox Plan</span></span>
  * <span data-ttu-id="4dad3-137">Boîte aux lettres de découverte</span><span class="sxs-lookup"><span data-stu-id="4dad3-137">Discovery Mailbox</span></span>
* <span data-ttu-id="4dad3-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="4dad3-139">Ne synchronisez aucun objet victime de réplication.</span><span class="sxs-lookup"><span data-stu-id="4dad3-139">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="4dad3-140">Les règles d’attribut suivantes s’appliquent :</span><span class="sxs-lookup"><span data-stu-id="4dad3-140">The following attribute rules apply:</span></span>

* <span data-ttu-id="4dad3-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="4dad3-142">L’attribut sourceAnchor n’est pas partagé à partir d’une boîte aux lettres liée.</span><span class="sxs-lookup"><span data-stu-id="4dad3-142">The sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="4dad3-143">On part du principe que si une boîte aux lettres liée a été trouvée, le compte actuel sera associé ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="4dad3-143">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span></span>
* <span data-ttu-id="4dad3-144">Les attributs liés à Exchange sont uniquement synchronisés si l'attribut **mailNickName** a une valeur.</span><span class="sxs-lookup"><span data-stu-id="4dad3-144">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="4dad3-145">Lorsqu’il existe plusieurs forêts, les attributs sont consommés dans l’ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="4dad3-145">When there are multiple forests, then attributes are consumed in the following order:</span></span>
  1. <span data-ttu-id="4dad3-146">Les attributs liés à l’authentification (par exemple, userPrincipalName) sont obtenus à partir de la forêt avec un compte activé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-146">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span></span>
  2. <span data-ttu-id="4dad3-147">Les attributs qui se trouvent dans la LAG (liste d’adresses globale) Exchange sont synchronisés à partir de la forêt avec la boîte aux lettres Exchange.</span><span class="sxs-lookup"><span data-stu-id="4dad3-147">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="4dad3-148">Si aucune boîte aux lettres ne peut être trouvée, ces attributs peuvent provenir de n'importe quelle forêt.</span><span class="sxs-lookup"><span data-stu-id="4dad3-148">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="4dad3-149">Les attributs liés à Exchange (attributs techniques non visibles dans la liste d’adresses globale) sont fournis à partir de la forêt où `mailNickname ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-149">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="4dad3-150">S’il existe plusieurs forêts qui répondent à une de ces règles, alors l’ordre de création (date/heure) des connecteurs (forêts) est utilisé pour déterminer quelle forêt fournit les attributs.</span><span class="sxs-lookup"><span data-stu-id="4dad3-150">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="4dad3-151">Règles out-of-box de contact</span><span class="sxs-lookup"><span data-stu-id="4dad3-151">Contact out-of-box rules</span></span>
<span data-ttu-id="4dad3-152">Un objet contact doit remplir les conditions suivantes pour être synchronisé :</span><span class="sxs-lookup"><span data-stu-id="4dad3-152">A contact object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="4dad3-153">Le contact doit être à extension messagerie.</span><span class="sxs-lookup"><span data-stu-id="4dad3-153">The contact must be mail-enabled.</span></span> <span data-ttu-id="4dad3-154">Il est vérifié par les règles suivantes :</span><span class="sxs-lookup"><span data-stu-id="4dad3-154">It is verified with the following rules:</span></span>
  * <span data-ttu-id="4dad3-155">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-155">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="4dad3-156">L'attribut proxyAddresses doit être renseigné.</span><span class="sxs-lookup"><span data-stu-id="4dad3-156">The proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="4dad3-157">L'attribut proxyAddresses ou l'attribut de messagerie peuvent comporter une adresse de messagerie principale.</span><span class="sxs-lookup"><span data-stu-id="4dad3-157">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span></span> <span data-ttu-id="4dad3-158">La présence d’un @ est utilisée pour vérifier que le contenu est une adresse de messagerie.</span><span class="sxs-lookup"><span data-stu-id="4dad3-158">The presence of an @ is used to verify that the content is an email address.</span></span> <span data-ttu-id="4dad3-159">L’une de ces deux règles doit prendre la valeur True.</span><span class="sxs-lookup"><span data-stu-id="4dad3-159">One of these two rules must be evaluated to True.</span></span>
    * <span data-ttu-id="4dad3-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="4dad3-161">Une entrée avec « SMTP : » et si elle existe, un @ est introuvable dans la chaîne ?</span><span class="sxs-lookup"><span data-stu-id="4dad3-161">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span></span>
    * <span data-ttu-id="4dad3-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="4dad3-163">Est l’attribut de messagerie rempli et s’il s’agit, pouvez un @ est introuvable dans la chaîne ?</span><span class="sxs-lookup"><span data-stu-id="4dad3-163">Is the mail attribute populated and if it is, can an @ be found in the string?</span></span>

<span data-ttu-id="4dad3-164">Les objets contact suivants ne sont **pas** synchronisés avec Azure AD :</span><span class="sxs-lookup"><span data-stu-id="4dad3-164">The following contact objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="4dad3-165">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-165">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="4dad3-166">Vérifiez qu’aucun objet contact marqué comme critique n’est synchronisé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-166">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="4dad3-167">Cet objet ne devrait pas avoir de configuration par défaut.</span><span class="sxs-lookup"><span data-stu-id="4dad3-167">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="4dad3-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="4dad3-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="4dad3-170">Ces objets ne fonctionneraient pas avec Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="4dad3-170">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="4dad3-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="4dad3-172">Ne synchronisez aucun objet victime de réplication.</span><span class="sxs-lookup"><span data-stu-id="4dad3-172">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="4dad3-173">Règles out-of-box de groupe</span><span class="sxs-lookup"><span data-stu-id="4dad3-173">Group out-of-box rules</span></span>
<span data-ttu-id="4dad3-174">Un objet groupe doit remplir les conditions suivantes pour être synchronisé :</span><span class="sxs-lookup"><span data-stu-id="4dad3-174">A group object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="4dad3-175">Il doit compter moins de 50 000 membres.</span><span class="sxs-lookup"><span data-stu-id="4dad3-175">Must have less than 50,000 members.</span></span> <span data-ttu-id="4dad3-176">Ce chiffre correspond au nombre de membres du groupe local.</span><span class="sxs-lookup"><span data-stu-id="4dad3-176">This count is the number of members in the on-premises group.</span></span>
  * <span data-ttu-id="4dad3-177">S’il compte plus de membres avant sa toute première synchronisation, le groupe n’est pas synchronisé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-177">If it has more members before synchronization starts the first time, the group is not synchronized.</span></span>
  * <span data-ttu-id="4dad3-178">Si le nombre de membres augmente à partir du moment où il a été créé, alors sa synchronisation est interrompue lorsqu’il atteint 50 000 membres, jusqu’à ce que le nombre redevienne inférieur à 50 000 membres.</span><span class="sxs-lookup"><span data-stu-id="4dad3-178">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="4dad3-179">Remarque : la limite de 50 000 membres s’applique également avec Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dad3-179">Note: The 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="4dad3-180">Vous ne pouvez pas synchroniser les groupes d’un nombre de membres supérieur même si vous modifiez ou supprimez cette règle.</span><span class="sxs-lookup"><span data-stu-id="4dad3-180">You are not able to synchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="4dad3-181">Si le groupe est un **groupe de distribution**, il doit alors également être activé pour la messagerie.</span><span class="sxs-lookup"><span data-stu-id="4dad3-181">If the group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="4dad3-182">Consultez la page [Règles out-of-box de contact](#contact-out-of-box-rules) pour l’application de cette règle.</span><span class="sxs-lookup"><span data-stu-id="4dad3-182">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="4dad3-183">Les objets groupe suivants ne sont **pas** synchronisés avec Azure AD :</span><span class="sxs-lookup"><span data-stu-id="4dad3-183">The following group objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="4dad3-184">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-184">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="4dad3-185">Vérifiez que la plupart des objets out-of-box dans Active Directory, tels que le groupe administrateur intégré, ne sont pas synchronisés.</span><span class="sxs-lookup"><span data-stu-id="4dad3-185">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="4dad3-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="4dad3-187">Groupe hérité utilisé par DirSync.</span><span class="sxs-lookup"><span data-stu-id="4dad3-187">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="4dad3-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="4dad3-189">Groupe de rôles.</span><span class="sxs-lookup"><span data-stu-id="4dad3-189">Role Group.</span></span>
* <span data-ttu-id="4dad3-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="4dad3-191">Ne synchronisez aucun objet victime de réplication.</span><span class="sxs-lookup"><span data-stu-id="4dad3-191">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="4dad3-192">Règles out-of-box ForeignSecurityPrincipal</span><span class="sxs-lookup"><span data-stu-id="4dad3-192">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="4dad3-193">Les FSP sont joints à « tout » (\*) objet dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-193">FSPs are joined to "any" (\*) object in the metaverse.</span></span> <span data-ttu-id="4dad3-194">En réalité, cela se produit uniquement pour les utilisateurs et les groupes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="4dad3-194">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="4dad3-195">Cette configuration garantit que les appartenances inter-forêts sont correctement résolues et représentées dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dad3-195">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="4dad3-196">Règles out-of-box d’ordinateur</span><span class="sxs-lookup"><span data-stu-id="4dad3-196">Computer out-of-box rules</span></span>
<span data-ttu-id="4dad3-197">Un objet ordinateur doit remplir les conditions suivantes pour être synchronisé :</span><span class="sxs-lookup"><span data-stu-id="4dad3-197">A computer object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="4dad3-198">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="4dad3-198">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="4dad3-199">Seuls les objets ordinateur Windows 10 renseignent cet attribut.</span><span class="sxs-lookup"><span data-stu-id="4dad3-199">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="4dad3-200">Tous les objets ordinateur avec une valeur de cet attribut sont synchronisés.</span><span class="sxs-lookup"><span data-stu-id="4dad3-200">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-the-out-of-box-rules-scenario"></a><span data-ttu-id="4dad3-201">Présentation du scénario de règles out-of-box</span><span class="sxs-lookup"><span data-stu-id="4dad3-201">Understanding the out-of-box rules scenario</span></span>
<span data-ttu-id="4dad3-202">Dans cet exemple, nous utilisons un déploiement comportant une forêt de comptes (A), une forêt de ressources (R) et un répertoire Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dad3-202">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![Vue d’ensemble avec description du scénario](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="4dad3-204">Dans cette configuration, il est supposé exister un compte activé dans la forêt de comptes et un compte désactivé dans la forêt de ressources avec une boîte aux lettres liée.</span><span class="sxs-lookup"><span data-stu-id="4dad3-204">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span></span>

<span data-ttu-id="4dad3-205">Nos objectifs avec la configuration par défaut sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="4dad3-205">Our goal with the default configuration is:</span></span>

* <span data-ttu-id="4dad3-206">Les attributs liés à la connexion sont synchronisés à partir de la forêt avec le compte activé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-206">Attributes related to sign-in are synchronized from the forest with the enabled account.</span></span>
* <span data-ttu-id="4dad3-207">Les attributs qui se trouvent dans la LAG (liste d’adresses globale) sont synchronisés à partir de la forêt avec la boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="4dad3-207">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span></span> <span data-ttu-id="4dad3-208">Si aucune boîte aux lettres n’est trouvée, toute autre forêt est utilisée.</span><span class="sxs-lookup"><span data-stu-id="4dad3-208">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="4dad3-209">Si une boîte aux lettres liée est trouvée, le compte activé lié doit être trouvé pour l’objet à exporter vers Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dad3-209">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="4dad3-210">Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-210">Synchronization Rule Editor</span></span>
<span data-ttu-id="4dad3-211">La configuration peut être affichée et modifiée avec l’outil Éditeur de règles de synchronisation (SRE), dont le raccourci se trouve dans le menu Démarrer.</span><span class="sxs-lookup"><span data-stu-id="4dad3-211">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span></span>

![Icône de l’Éditeur de règles de synchronisation](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="4dad3-213">Le SRE est un outil du kit de ressources installé avec la synchronisation Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4dad3-213">The SRE is a resource kit tool and it is installed with Azure AD Connect sync.</span></span> <span data-ttu-id="4dad3-214">Pour être en mesure de le démarrer, vous devez être membre du groupe ADSyncAdmins.</span><span class="sxs-lookup"><span data-stu-id="4dad3-214">To be able to start it, you must be a member of the ADSyncAdmins group.</span></span> <span data-ttu-id="4dad3-215">Lorsqu’il démarre, vous voyez quelque chose comme suit :</span><span class="sxs-lookup"><span data-stu-id="4dad3-215">When it starts, you see something like this:</span></span>

![Règles de synchronisation entrante](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="4dad3-217">Dans ce volet, vous voyez toutes les règles de synchronisation créées pour votre configuration.</span><span class="sxs-lookup"><span data-stu-id="4dad3-217">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="4dad3-218">Chaque ligne du tableau correspond à une règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="4dad3-218">Each line in the table is one Synchronization Rule.</span></span> <span data-ttu-id="4dad3-219">À gauche, sous Types de règles, deux types sont présentés : Entrante et Sortante.</span><span class="sxs-lookup"><span data-stu-id="4dad3-219">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="4dad3-220">Les termes entrante et sortante sont à prendre du point de vue du métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-220">Inbound and Outbound is from the view of the metaverse.</span></span> <span data-ttu-id="4dad3-221">Vous allez principalement vous concentrer sur les règles de trafic entrant dans cette vue d’ensemble.</span><span class="sxs-lookup"><span data-stu-id="4dad3-221">You are mainly going to focus on the inbound rules in this overview.</span></span> <span data-ttu-id="4dad3-222">La liste actuelle des règles de synchronisation dépend du schéma détecté dans Active Directory.</span><span class="sxs-lookup"><span data-stu-id="4dad3-222">The actual list of Synchronization Rules depends on the detected schema in AD.</span></span> <span data-ttu-id="4dad3-223">Dans l’image ci-dessus, la forêt de comptes (fabrikamonline.com) ne dispose d’aucun service (par exemple, Exchange ou Lync), et aucune règle de synchronisation n’a été créée pour ces services.</span><span class="sxs-lookup"><span data-stu-id="4dad3-223">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="4dad3-224">Toutefois, dans la forêt de ressources (res.fabrikamonline.com), vous trouvez des règles de synchronisation pour ces services.</span><span class="sxs-lookup"><span data-stu-id="4dad3-224">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="4dad3-225">Le contenu des règles diffère selon la version détectée.</span><span class="sxs-lookup"><span data-stu-id="4dad3-225">The content of the rules is different depending on the version detected.</span></span> <span data-ttu-id="4dad3-226">Par exemple, dans un déploiement avec Exchange 2013, plus de flux d’attributs sont configurés que dans Exchange 2010/2007.</span><span class="sxs-lookup"><span data-stu-id="4dad3-226">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="4dad3-227">Règle de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-227">Synchronization Rule</span></span>
<span data-ttu-id="4dad3-228">Une règle de synchronisation est un objet de configuration avec un jeu d’attributs qui circule quand une condition est remplie.</span><span class="sxs-lookup"><span data-stu-id="4dad3-228">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="4dad3-229">Elle sert aussi à décrire la relation entre un objet dans un espace de connecteur et un objet dans le métaverse, relation appelée **jointure** ou **correspondance**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-229">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="4dad3-230">Les règles de synchronisation ont une valeur de précédence qui indique leurs relations les unes par rapport aux autres.</span><span class="sxs-lookup"><span data-stu-id="4dad3-230">The Synchronization Rules have a precedence value indicating how they relate to each other.</span></span> <span data-ttu-id="4dad3-231">Une règle de synchronisation avec une valeur plus basse possède une précédence plus élevée et, dans un conflit de flux d’attributs, c’est la précédence la plus élevée qui l’emporte.</span><span class="sxs-lookup"><span data-stu-id="4dad3-231">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span></span>

<span data-ttu-id="4dad3-232">En guise d’exemple, examinez la règle de synchronisation **Entrant depuis AD – Utilisateur AccountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-232">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="4dad3-233">Marquez cette ligne dans l’outil SRE et sélectionnez **Modifier**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-233">Mark this line in the SRE and select **Edit**.</span></span>

<span data-ttu-id="4dad3-234">Dans la mesure où il s’agit d’une règle out-of-box, vous recevez un avertissement à l’ouverture de la règle.</span><span class="sxs-lookup"><span data-stu-id="4dad3-234">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span></span> <span data-ttu-id="4dad3-235">Vous ne devez pas apporter de [modifications aux règles out-of-box](active-directory-aadconnectsync-best-practices-changing-default-configuration.md)vous êtes donc invité à indiquer vos intentions.</span><span class="sxs-lookup"><span data-stu-id="4dad3-235">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="4dad3-236">Dans ce cas, vous souhaitez uniquement afficher la règle.</span><span class="sxs-lookup"><span data-stu-id="4dad3-236">In this case, you only want to view the rule.</span></span> <span data-ttu-id="4dad3-237">Sélectionnez **Non**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-237">Select **No**.</span></span>

![Avertissement de règles de synchronisation](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="4dad3-239">Une règle de synchronisation comporte quatre sections de configuration : Description, Filtre d’étendue, Règles de jointure et Transformations.</span><span class="sxs-lookup"><span data-stu-id="4dad3-239">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="4dad3-240">Description</span><span class="sxs-lookup"><span data-stu-id="4dad3-240">Description</span></span>
<span data-ttu-id="4dad3-241">La première section fournit des informations de base telles que le nom et la description.</span><span class="sxs-lookup"><span data-stu-id="4dad3-241">The first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="4dad3-242">Onglet Description dans l’Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-242">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="4dad3-243">Vous y trouverez également des informations concernant le système connecté associé à cette règle, le type d’objet dans le système connecté auquel il s’applique et le type d’objet de métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-243">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span></span> <span data-ttu-id="4dad3-244">Le type d’objet du métaverse est toujours « person », que le type d’objet source soit un utilisateur, iNetOrgPerson ou un contact.</span><span class="sxs-lookup"><span data-stu-id="4dad3-244">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="4dad3-245">Comme il ne doit jamais changer, il est créé en tant que type générique.</span><span class="sxs-lookup"><span data-stu-id="4dad3-245">The metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="4dad3-246">Le type de lien peut être Join, StickyJoin ou Provision.</span><span class="sxs-lookup"><span data-stu-id="4dad3-246">The Link Type can be set to Join, StickyJoin, or Provision.</span></span> <span data-ttu-id="4dad3-247">Ce paramètre fonctionne avec la section Règles de jointure et il est traité plus loin dans ce document.</span><span class="sxs-lookup"><span data-stu-id="4dad3-247">This setting works together with the Join Rules section and is covered later.</span></span>

<span data-ttu-id="4dad3-248">Vous pouvez également voir que cette règle de synchronisation est utilisée pour la synchronisation de mot de passe.</span><span class="sxs-lookup"><span data-stu-id="4dad3-248">You can also see that this sync rule is used for password sync.</span></span> <span data-ttu-id="4dad3-249">Si un utilisateur est dans la portée pour cette règle de synchronisation, le mot de passe est synchronisé du local vers le cloud (en supposant que vous avez activé la fonctionnalité de synchronisation de mot de passe).</span><span class="sxs-lookup"><span data-stu-id="4dad3-249">If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="4dad3-250">Filtre d’étendue</span><span class="sxs-lookup"><span data-stu-id="4dad3-250">Scoping filter</span></span>
<span data-ttu-id="4dad3-251">La section Filtre d’étendue sert à configurer à quel moment une règle de synchronisation doit s’appliquer.</span><span class="sxs-lookup"><span data-stu-id="4dad3-251">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="4dad3-252">Comme le nom de la règle de synchronisation que vous examinez indique qu’elle ne doit être appliquée qu’aux utilisateurs activés, l’étendue est configurée de sorte que l’attribut AD **userAccountControl** ne doive pas avoir le bit 2 défini.</span><span class="sxs-lookup"><span data-stu-id="4dad3-252">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span></span> <span data-ttu-id="4dad3-253">Lorsque le moteur de synchronisation détecte un utilisateur dans Active Directory, il applique la synchronisation lorsque **userAccountControl** est défini sur la valeur décimale 512 (utilisateur normal activé).</span><span class="sxs-lookup"><span data-stu-id="4dad3-253">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="4dad3-254">Il n’applique pas la règle lorsque l’utilisateur a **userAccountControl** défini sur 514 (utilisateur normal désactivé).</span><span class="sxs-lookup"><span data-stu-id="4dad3-254">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span></span>

![<span data-ttu-id="4dad3-255">Onglet Étendue dans l’Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-255">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="4dad3-256">Le filtre d’étendue possède des groupes et des clauses qui peuvent être imbriqués.</span><span class="sxs-lookup"><span data-stu-id="4dad3-256">The scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="4dad3-257">Toutes les clauses à l’intérieur d’un groupe doivent être satisfaites pour qu’une règle de synchronisation s’applique.</span><span class="sxs-lookup"><span data-stu-id="4dad3-257">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span></span> <span data-ttu-id="4dad3-258">Quand plusieurs groupes sont définis, au moins l’un d’entre eux doit être satisfait pour que la règle s’applique.</span><span class="sxs-lookup"><span data-stu-id="4dad3-258">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span></span> <span data-ttu-id="4dad3-259">C’est-à-dire qu’une opération OR logique est évaluée entre les groupes et qu’une opération AND logique est évaluée à l’intérieur d’un groupe.</span><span class="sxs-lookup"><span data-stu-id="4dad3-259">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="4dad3-260">On trouve un exemple de cette configuration dans la règle de synchronisation sortante **Sortant vers AAD – Group Join**, indiquée ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="4dad3-260">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span></span> <span data-ttu-id="4dad3-261">Il existe plusieurs groupes de filtres de synchronisation, par exemple, un pour les groupes de sécurité (`securityEnabled EQUAL True`) et un autre pour les groupes de distribution (`securityEnabled EQUAL False`).</span><span class="sxs-lookup"><span data-stu-id="4dad3-261">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="4dad3-262">Onglet Étendue dans l’Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-262">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="4dad3-263">Cette règle sert à définir les groupes qui doivent être approvisionnés dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dad3-263">This rule is used to define which Groups should be provisioned to Azure AD.</span></span> <span data-ttu-id="4dad3-264">Les groupes de distribution doivent être activés pour la messagerie électronique pour pouvoir être synchronisés avec Azure AD, mais pour les groupes de sécurité aucune adresse de messagerie n’est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="4dad3-264">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="4dad3-265">Règles de jointure</span><span class="sxs-lookup"><span data-stu-id="4dad3-265">Join rules</span></span>
<span data-ttu-id="4dad3-266">La troisième section sert à configurer la relation entre les objets dans l’espace de connecteur et les objets dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-266">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span></span> <span data-ttu-id="4dad3-267">La règle que vous avez examinée plus haut n’ayant aucune configuration pour Join Rules, vous allez plutôt examiner **Entrant depuis AD – User Join**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-267">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span></span>

![<span data-ttu-id="4dad3-268">Onglet Règles de jointure dans l’Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-268">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="4dad3-269">Le contenu de la règle de jointure dépend de l’option de correspondance sélectionnée dans l’Assistant Installation.</span><span class="sxs-lookup"><span data-stu-id="4dad3-269">The content of the join rule depends on the matching option selected in the installation wizard.</span></span> <span data-ttu-id="4dad3-270">Pour une règle entrante, l’évaluation commence avec un objet dans l’espace de connecteur source et chaque groupe dans les règles de jointure est évalué de manière séquentielle.</span><span class="sxs-lookup"><span data-stu-id="4dad3-270">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span></span> <span data-ttu-id="4dad3-271">Si un objet source évalué correspond exactement à un objet dans le métaverse selon l’une des règles de jointure, les deux objets sont joints.</span><span class="sxs-lookup"><span data-stu-id="4dad3-271">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span></span> <span data-ttu-id="4dad3-272">Si toutes les règles ont été évaluées et qu’il n’existe aucune correspondance, le type de lien indiqué dans la page de description est utilisé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-272">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span></span> <span data-ttu-id="4dad3-273">Si cette configuration a la valeur **Provision**, un nouvel objet est créé dans la cible, le métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-273">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span></span> <span data-ttu-id="4dad3-274">L’approvisionnement d’un nouvel objet dans le métaverse porte également le nom de **projection** .</span><span class="sxs-lookup"><span data-stu-id="4dad3-274">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span></span>

<span data-ttu-id="4dad3-275">Les règles de jointure ne sont évaluées qu’une seule fois.</span><span class="sxs-lookup"><span data-stu-id="4dad3-275">The join rules are only evaluated once.</span></span> <span data-ttu-id="4dad3-276">Quand un objet d’espace de connecteur et un objet de métaverse sont joints, ils le restent tant que l’étendue de la règle de synchronisation est encore satisfaite.</span><span class="sxs-lookup"><span data-stu-id="4dad3-276">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="4dad3-277">Lors de l’évaluation de plusieurs règles de synchronisation, une seule d’entre elles avec des règles de jointure définies doit être dans l’étendue.</span><span class="sxs-lookup"><span data-stu-id="4dad3-277">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="4dad3-278">Si plusieurs règles de synchronisation avec des règles de jointure sont détectées pour un objet, une erreur est levée.</span><span class="sxs-lookup"><span data-stu-id="4dad3-278">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="4dad3-279">Pour cette raison, la meilleure pratique consiste à n’avoir qu’une seule règle de synchronisation avec jointure définie quand plusieurs règles de synchronisation sont dans l’étendue pour un objet.</span><span class="sxs-lookup"><span data-stu-id="4dad3-279">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="4dad3-280">Dans la configuration par défaut de la synchronisation d’Azure AD Connect, vous pouvez identifier facilement ces règles, car leur nom se termine par le mot **Join** .</span><span class="sxs-lookup"><span data-stu-id="4dad3-280">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span></span> <span data-ttu-id="4dad3-281">Une règle de synchronisation sans aucune règle de jointure définie applique les flux d’attributs lorsqu’une autre règle de synchronisation a joint les objets ensemble ou a approvisionné un nouvel objet dans la cible.</span><span class="sxs-lookup"><span data-stu-id="4dad3-281">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span></span>

<span data-ttu-id="4dad3-282">Si vous examinez l’illustration ci-dessus, vous pouvez voir que la règle essaie de joindre **objectSID** avec **msExchMasterAccountSid** (Exchange) et **msRTCSIP-OriginatorSid** (Lync), ce qui est le résultat que nous attendons dans une topologie de forêt de comptes/ressources.</span><span class="sxs-lookup"><span data-stu-id="4dad3-282">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="4dad3-283">Vous trouverez la même règle sur toutes les forêts.</span><span class="sxs-lookup"><span data-stu-id="4dad3-283">You find the same rule on all forests.</span></span> <span data-ttu-id="4dad3-284">L’hypothèse est que chaque forêt peut être une forêt de comptes ou de ressources.</span><span class="sxs-lookup"><span data-stu-id="4dad3-284">The assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="4dad3-285">Cette configuration fonctionne également si vous disposez de comptes qui résident dans une forêt unique et n’ont pas à être joints.</span><span class="sxs-lookup"><span data-stu-id="4dad3-285">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="4dad3-286">Transformations</span><span class="sxs-lookup"><span data-stu-id="4dad3-286">Transformations</span></span>
<span data-ttu-id="4dad3-287">La section Transformation définit tous les flux d’attributs qui s’appliquent à l’objet cible quand les objets sont joints et quand le filtre d’étendue est satisfait.</span><span class="sxs-lookup"><span data-stu-id="4dad3-287">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span></span> <span data-ttu-id="4dad3-288">Si vous revenez à la règle de synchronisation **Entrant depuis AD – Utilisateur AccountEnabled** , vous trouvez les transformations suivantes :</span><span class="sxs-lookup"><span data-stu-id="4dad3-288">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span></span>

![<span data-ttu-id="4dad3-289">Onglet Transformations dans l’Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-289">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="4dad3-290">Pour mettre cette configuration en contexte, dans un déploiement de forêt Account-Resource, il devrait y avoir un compte activé dans la forêt de comptes et un compte désactivé dans la forêt de ressources avec des paramètres Exchange et Lync.</span><span class="sxs-lookup"><span data-stu-id="4dad3-290">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="4dad3-291">La règle de synchronisation que vous examinez contient les attributs nécessaires pour la connexion et ceux-ci devraient circuler à partir de la forêt dans laquelle se trouve un compte activé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-291">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span></span> <span data-ttu-id="4dad3-292">Tous ces flux d’attributs sont regroupés dans une règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="4dad3-292">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="4dad3-293">Une transformation peut avoir différents types : Constant, Direct et Expression.</span><span class="sxs-lookup"><span data-stu-id="4dad3-293">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="4dad3-294">Un flux constant transmet toujours une valeur codée en dur.</span><span class="sxs-lookup"><span data-stu-id="4dad3-294">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="4dad3-295">Dans le cas ci-dessus, il définit toujours la valeur **True** dans l’attribut du métaverse nommé **accountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-295">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="4dad3-296">Un flux direct transmet toujours la valeur de l’attribut source telle quelle vers l’attribut cible.</span><span class="sxs-lookup"><span data-stu-id="4dad3-296">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span></span>
* <span data-ttu-id="4dad3-297">Le troisième type de flux, Expression, permet d’effectuer des configurations avancées.</span><span class="sxs-lookup"><span data-stu-id="4dad3-297">The third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="4dad3-298">Le langage d’expression étant VBA (Visual Basic pour Applications), les utilisateurs ayant une expérience de Microsoft Office ou VBScript reconnaîtront le format.</span><span class="sxs-lookup"><span data-stu-id="4dad3-298">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span></span> <span data-ttu-id="4dad3-299">Les attributs sont placés entre crochets : [nom_attribut].</span><span class="sxs-lookup"><span data-stu-id="4dad3-299">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="4dad3-300">Les noms des attributs et des fonctions respectent la casse, mais l’Éditeur de règles de synchronisation évalue les expressions et affiche un avertissement si elles ne sont pas valides.</span><span class="sxs-lookup"><span data-stu-id="4dad3-300">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span></span> <span data-ttu-id="4dad3-301">Toutes les expressions sont placées sur une seule ligne avec les fonctions imbriquées.</span><span class="sxs-lookup"><span data-stu-id="4dad3-301">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="4dad3-302">Pour illustrer toute la puissance du langage de configuration, voici le flux pour pwdLastSet, mais avec des commentaires supplémentaires insérés :</span><span class="sxs-lookup"><span data-stu-id="4dad3-302">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (The evaluation for IIF) Is the attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (The True part of IIF) If it is, then from right to left, convert the AD time format to a .Net datetime, change it to the time format used by Azure AD, and finally convert it to a string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (The False part of IIF) Nothing to contribute
NULL
)
```

<span data-ttu-id="4dad3-303">Pour plus d’informations sur le langage d’expression pour les flux d’attributs, consultez [Présentation des expressions de l’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) .</span><span class="sxs-lookup"><span data-stu-id="4dad3-303">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="4dad3-304">Précédence</span><span class="sxs-lookup"><span data-stu-id="4dad3-304">Precedence</span></span>
<span data-ttu-id="4dad3-305">Vous avez maintenant vu certaines règles de synchronisation individuelles, mais les règles fonctionnent de concert dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="4dad3-305">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span></span> <span data-ttu-id="4dad3-306">Dans certains cas, une valeur d’attribut est partagée à partir de plusieurs règles de synchronisation vers le même attribut cible.</span><span class="sxs-lookup"><span data-stu-id="4dad3-306">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span></span> <span data-ttu-id="4dad3-307">Dans ce cas, la précédence d’attribut est utilisée pour déterminer quel attribut l’emporte.</span><span class="sxs-lookup"><span data-stu-id="4dad3-307">In this case, attribute precedence is used to determine which attribute wins.</span></span> <span data-ttu-id="4dad3-308">Par exemple, examinez l’attribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4dad3-308">As an example, look at the attribute sourceAnchor.</span></span> <span data-ttu-id="4dad3-309">Cet attribut est important pour pouvoir se connecter à Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dad3-309">This attribute is an important attribute to be able to sign in to Azure AD.</span></span> <span data-ttu-id="4dad3-310">Vous pouvez trouver un flux d’attributs pour cet attribut dans deux règles de synchronisation différentes : **Entrant depuis AD – Utilisateur AccountEnabled** et **Entrant depuis AD – Utilisateur Common**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-310">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="4dad3-311">En raison de la précédence de la règle de synchronisation, l’attribut sourceAnchor est partagé à partir de la forêt avec un compte activé en premier lieu lorsqu’il existe plusieurs objets joints à l’objet métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-311">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span></span> <span data-ttu-id="4dad3-312">S’il n’y a aucun compte activé, le moteur de synchronisation utilise la règle de synchronisation fourre-tout **Entrant depuis AD – Utilisateur Common**.</span><span class="sxs-lookup"><span data-stu-id="4dad3-312">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="4dad3-313">Cette configuration garantit que même pour les comptes qui sont désactivés, il existe toujours un sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4dad3-313">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![Règles de synchronisation entrante](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="4dad3-315">La précédence des règles de synchronisation est définie dans les groupes par l’Assistant d’installation.</span><span class="sxs-lookup"><span data-stu-id="4dad3-315">The precedence for Synchronization Rules is set in groups by the installation wizard.</span></span> <span data-ttu-id="4dad3-316">Toutes les règles d’un groupe ont le même nom, mais elles sont connectées à différents répertoires connectés.</span><span class="sxs-lookup"><span data-stu-id="4dad3-316">All rules in a group have the same name, but they are connected to different connected directories.</span></span> <span data-ttu-id="4dad3-317">L’Assistant d’installation donne à la règle **Entrant depuis AD – User Join** la précédence la plus élevée et effectue une itération sur tous les répertoires AD connectés.</span><span class="sxs-lookup"><span data-stu-id="4dad3-317">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="4dad3-318">Il continue ensuite avec les groupes de règles suivants dans un ordre prédéfini.</span><span class="sxs-lookup"><span data-stu-id="4dad3-318">It then continues with the next groups of rules in a predefined order.</span></span> <span data-ttu-id="4dad3-319">À l’intérieur d’un groupe, les règles sont ajoutées dans l’ordre dans lequel les connecteurs ont été ajoutés à l’Assistant.</span><span class="sxs-lookup"><span data-stu-id="4dad3-319">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span></span> <span data-ttu-id="4dad3-320">Si un autre connecteur est ajouté via l’Assistant, les règles de synchronisation sont réordonnées et les règles du nouveau connecteur sont insérées en dernier dans chaque groupe.</span><span class="sxs-lookup"><span data-stu-id="4dad3-320">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="4dad3-321">Exemple complet</span><span class="sxs-lookup"><span data-stu-id="4dad3-321">Putting it all together</span></span>
<span data-ttu-id="4dad3-322">Nous en savons maintenant assez sur les règles de synchronisation pour comprendre le fonctionnement de la configuration avec les différentes règles de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="4dad3-322">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span></span> <span data-ttu-id="4dad3-323">Si vous regardez un utilisateur et les attributs qui sont partagés avec le métaverse, les règles sont appliquées dans l’ordre suivant :</span><span class="sxs-lookup"><span data-stu-id="4dad3-323">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span></span>

| <span data-ttu-id="4dad3-324">Nom</span><span class="sxs-lookup"><span data-stu-id="4dad3-324">Name</span></span> | <span data-ttu-id="4dad3-325">Commentaire</span><span class="sxs-lookup"><span data-stu-id="4dad3-325">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="4dad3-326">Entrant depuis AD – User Join</span><span class="sxs-lookup"><span data-stu-id="4dad3-326">In from AD – User Join</span></span> |<span data-ttu-id="4dad3-327">Règle pour joindre les objets de l’espace de connecteur avec métaverse.</span><span class="sxs-lookup"><span data-stu-id="4dad3-327">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="4dad3-328">Entrant depuis AD – Utilisateur AccountEnabled</span><span class="sxs-lookup"><span data-stu-id="4dad3-328">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="4dad3-329">Attributs requis pour la connexion à Azure AD et Office 365.</span><span class="sxs-lookup"><span data-stu-id="4dad3-329">Attributes required for sign-in to Azure AD and Office 365.</span></span> <span data-ttu-id="4dad3-330">Nous voulons ces attributs à partir du compte activé.</span><span class="sxs-lookup"><span data-stu-id="4dad3-330">We want these attributes from the enabled account.</span></span> |
| <span data-ttu-id="4dad3-331">Entrant depuis AD – Utilisateur Common à partir d’Exchange</span><span class="sxs-lookup"><span data-stu-id="4dad3-331">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="4dad3-332">Attributs trouvés dans la liste d’adresses globale.</span><span class="sxs-lookup"><span data-stu-id="4dad3-332">Attributes found in the Global Address List.</span></span> <span data-ttu-id="4dad3-333">Nous supposons que la qualité des données est meilleure dans la forêt où nous avons trouvé la boîte aux lettres de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="4dad3-333">We assume the data quality is best in the forest where we have found the user’s mailbox.</span></span> |
| <span data-ttu-id="4dad3-334">Entrant depuis AD – Utilisateur Common</span><span class="sxs-lookup"><span data-stu-id="4dad3-334">In from AD – User Common</span></span> |<span data-ttu-id="4dad3-335">Attributs trouvés dans la liste d’adresses globale.</span><span class="sxs-lookup"><span data-stu-id="4dad3-335">Attributes found in the Global Address List.</span></span> <span data-ttu-id="4dad3-336">Dans le cas où nous ne trouvons pas de boîte aux lettres, tout autre objet joint peut contribuer à la valeur d’attribut.</span><span class="sxs-lookup"><span data-stu-id="4dad3-336">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span></span> |
| <span data-ttu-id="4dad3-337">Entrant depuis AD – Utilisateur Exchange</span><span class="sxs-lookup"><span data-stu-id="4dad3-337">In from AD – User Exchange</span></span> |<span data-ttu-id="4dad3-338">Existe seulement si Exchange a été détecté.</span><span class="sxs-lookup"><span data-stu-id="4dad3-338">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="4dad3-339">Transfère tous les attributs Exchange d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="4dad3-339">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="4dad3-340">Entrant depuis AD – Utilisateur Lync</span><span class="sxs-lookup"><span data-stu-id="4dad3-340">In from AD – User Lync</span></span> |<span data-ttu-id="4dad3-341">Existe seulement si Lync a été détecté.</span><span class="sxs-lookup"><span data-stu-id="4dad3-341">Only exists if Lync has been detected.</span></span> <span data-ttu-id="4dad3-342">Transfère tous les attributs Lync d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="4dad3-342">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="4dad3-343">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="4dad3-343">Next steps</span></span>
* <span data-ttu-id="4dad3-344">En savoir plus sur le modèle de configuration dans [Comprendre l’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="4dad3-344">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="4dad3-345">En savoir plus sur le langage d’expression dans [Comprendre les expressions d’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="4dad3-345">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="4dad3-346">Poursuivre la lecture sur le fonctionnement de la configuration out-of-box dans [Présentation des utilisateurs et des contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="4dad3-346">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="4dad3-347">Apprendre à effectuer une modification pratique à l’aide de l’approvisionnement déclaratif dans [Comment modifier la configuration par défaut](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="4dad3-347">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="4dad3-348">**Rubriques de présentation**</span><span class="sxs-lookup"><span data-stu-id="4dad3-348">**Overview topics**</span></span>

* [<span data-ttu-id="4dad3-349">Azure AD Connect Sync - Présentation et personnalisation des options de synchronisation</span><span class="sxs-lookup"><span data-stu-id="4dad3-349">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="4dad3-350">Intégration de vos identités locales avec Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="4dad3-350">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

