---
title: 'Synchronisation Azure AD Connect : Apporter une modification dans la synchronisation Azure AD Connect | Microsoft Docs'
description: "Cet article vous guide dans les changements de configuration d’Azure AD Connect Sync."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 7b9df836-e8a5-4228-97da-2faec9238b31
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 63a7ae9d39e1a74294637172efd607ee41b2d69b
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-how-to-make-a-change-to-the-default-configuration"></a><span data-ttu-id="ad47f-103">Azure AD Connect Sync : comment modifier la configuration par défaut</span><span class="sxs-lookup"><span data-stu-id="ad47f-103">Azure AD Connect sync: How to make a change to the default configuration</span></span>
<span data-ttu-id="ad47f-104">L’objectif de cette rubrique est de vous expliquer comment apporter des modifications à la configuration par défaut dans Azure AD Connect Sync.</span><span class="sxs-lookup"><span data-stu-id="ad47f-104">The purpose of this topic is to walk you through how to make changes to the default configuration in Azure AD Connect sync.</span></span> <span data-ttu-id="ad47f-105">Elle explique pas à pas la procédure pour les scénarios courants.</span><span class="sxs-lookup"><span data-stu-id="ad47f-105">It provides steps for some common scenarios.</span></span> <span data-ttu-id="ad47f-106">Après avoir lu cette page, vous devriez être en mesure d’apporter des modifications simples à votre configuration en fonction de vos propres règles d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="ad47f-106">With this knowledge, you should be able to make some simple changes to your own configuration based on your own business rules.</span></span>

## <a name="synchronization-rules-editor"></a><span data-ttu-id="ad47f-107">Éditeur de règles de synchronisation</span><span class="sxs-lookup"><span data-stu-id="ad47f-107">Synchronization Rules Editor</span></span>
<span data-ttu-id="ad47f-108">L’éditeur de règles de synchronisation sert à afficher et modifier la configuration par défaut.</span><span class="sxs-lookup"><span data-stu-id="ad47f-108">The Synchronization Rules Editor is used to see and change the default configuration.</span></span> <span data-ttu-id="ad47f-109">Il est disponible dans le menu Démarrer, sous le groupe **Azure Connect AD** .</span><span class="sxs-lookup"><span data-stu-id="ad47f-109">You can find it in the Start Menu under the **Azure AD Connect** group.</span></span>  
<span data-ttu-id="ad47f-110">![Menu Démarrer avec l’Éditeur de règles de synchronisation](./media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-110">![Start Menu with Sync Rule Editor](./media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span></span>

<span data-ttu-id="ad47f-111">Lorsque vous l’ouvrez, vous accédez directement aux règles par défaut.</span><span class="sxs-lookup"><span data-stu-id="ad47f-111">When you open it, you see the default out-of-box rules.</span></span>

![Éditeur de règles de synchronisation](./media/active-directory-aadconnectsync-change-the-configuration/sre2.png)

### <a name="navigating-in-the-editor"></a><span data-ttu-id="ad47f-113">Navigation dans l’Éditeur</span><span class="sxs-lookup"><span data-stu-id="ad47f-113">Navigating in the editor</span></span>
<span data-ttu-id="ad47f-114">Les listes déroulantes situées en haut de l’Éditeur vous permettent d’accéder rapidement à une règle particulière.</span><span class="sxs-lookup"><span data-stu-id="ad47f-114">The drop-downs at the top of the editor allow you to quickly find a particular rule.</span></span> <span data-ttu-id="ad47f-115">Par exemple, si vous souhaitez afficher les règles comprenant l’attribut proxyAddresses, vous pouvez modifier les listes déroulantes comme suit : </span><span class="sxs-lookup"><span data-stu-id="ad47f-115">For example, if you want to see the rules where the attribute proxyAddresses is included, you would change the drop-downs to the following:</span></span>  
<span data-ttu-id="ad47f-116">![Filtrage SRE](./media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-116">![SRE filtering](./media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span></span>  
<span data-ttu-id="ad47f-117">pour redéfinir le filtrage et charger une nouvelle configuration, appuyez sur la **F5** du clavier.</span><span class="sxs-lookup"><span data-stu-id="ad47f-117">To reset filtering and load a fresh configuration, press **F5** on the keyboard.</span></span>

<span data-ttu-id="ad47f-118">En haut à droite de l’écran se trouve le bouton **Ajouter une nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-118">To the top right, you have a button **Add new rule**.</span></span> <span data-ttu-id="ad47f-119">Ce bouton vous permet de créer vos propres règles personnalisées.</span><span class="sxs-lookup"><span data-stu-id="ad47f-119">This button is used to create your own custom rule.</span></span>

<span data-ttu-id="ad47f-120">En bas, vous disposez de boutons permettant d’agir sur une règle de synchronisation sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-120">At the bottom, you have buttons for acting on a selected sync rule.</span></span> <span data-ttu-id="ad47f-121">Les boutons **Modifier** et **Supprimer** permettent de modifier et de supprimer des règles.</span><span class="sxs-lookup"><span data-stu-id="ad47f-121">**Edit** and **Delete** do what you expect them to.</span></span> <span data-ttu-id="ad47f-122">**Exporterer** génère un script PowerShell pour recréer la règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-122">**Export** produces a PowerShell script for recreating the sync rule.</span></span> <span data-ttu-id="ad47f-123">Cette procédure vous permet de déplacer une règle de synchronisation d’un serveur vers un autre.</span><span class="sxs-lookup"><span data-stu-id="ad47f-123">This procedure allows you to move a sync rule from one server to another.</span></span>

## <a name="create-your-first-custom-rule"></a><span data-ttu-id="ad47f-124">Création de votre première règle personnalisée</span><span class="sxs-lookup"><span data-stu-id="ad47f-124">Create your first custom rule</span></span>
<span data-ttu-id="ad47f-125">Le changement le plus courant consiste à modifier les flux d’attributs.</span><span class="sxs-lookup"><span data-stu-id="ad47f-125">The most common change is changes to the attribute flows.</span></span> <span data-ttu-id="ad47f-126">Les données contenues dans votre répertoire source ne sont peut-être pas telles que vous souhaiteriez les restituer dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-126">The data in your source directory might not be as in Azure AD.</span></span> <span data-ttu-id="ad47f-127">Dans l’exemple de cette section, vous voulez faire en sorte que le nom d’un utilisateur donné apparaisse toujours au format **Nom propre**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-127">In the example in this section, you want to make sure the given name of a user is always in **Proper case**.</span></span>

### <a name="disable-the-scheduler"></a><span data-ttu-id="ad47f-128">Désactivation du planificateur</span><span class="sxs-lookup"><span data-stu-id="ad47f-128">Disable the scheduler</span></span>
<span data-ttu-id="ad47f-129">Par défaut, le [planificateur](active-directory-aadconnectsync-feature-scheduler.md) s’exécute toutes les 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="ad47f-129">The [scheduler](active-directory-aadconnectsync-feature-scheduler.md) runs every 30 minutes by default.</span></span> <span data-ttu-id="ad47f-130">Vous souhaitez vous assurer qu’il ne démarre pas pendant que vous apportez des modifications et corrigez les problèmes de vos nouvelles règles.</span><span class="sxs-lookup"><span data-stu-id="ad47f-130">You want to make sure it is not starting while you are making changes and troubleshoot your new rules.</span></span> <span data-ttu-id="ad47f-131">Pour désactiver temporairement le planificateur, démarrez PowerShell et exécutez `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="ad47f-131">To temporarily disable the scheduler, start PowerShell, and run `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

![Désactivation du planificateur](./media/active-directory-aadconnectsync-change-the-configuration/schedulerdisable.png)  

### <a name="create-the-rule"></a><span data-ttu-id="ad47f-133">Création de la règle</span><span class="sxs-lookup"><span data-stu-id="ad47f-133">Create the rule</span></span>
1. <span data-ttu-id="ad47f-134">Cliquez sur **Ajouter une nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-134">Click **Add new rule**.</span></span>
2. <span data-ttu-id="ad47f-135">Sur la page **Description**, entrez les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="ad47f-135">On the **Description** page enter the following:</span></span>  
   <span data-ttu-id="ad47f-136">![Filtrage des règles entrantes](./media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-136">![Inbound rule filtering](./media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span></span>  
   * <span data-ttu-id="ad47f-137">Nom : donnez à la règle un nom descriptif.</span><span class="sxs-lookup"><span data-stu-id="ad47f-137">Name: Give the rule a descriptive name.</span></span>
   * <span data-ttu-id="ad47f-138">Description : texte descriptif permettant aux autres utilisateurs de comprendre l’objet de la règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-138">Description: Some clarification so someone else can understand what the rule is for.</span></span>
   * <span data-ttu-id="ad47f-139">Connected system (système connecté) : système dans lequel se trouve l’objet.</span><span class="sxs-lookup"><span data-stu-id="ad47f-139">Connected system: The system the object can be found in.</span></span> <span data-ttu-id="ad47f-140">Dans ce cas, sélectionnez le connecteur Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ad47f-140">In this case, select the Active Directory Connector.</span></span>
   * <span data-ttu-id="ad47f-141">Connected System/Metaverse Object Type (Type de système connecté/d’objet métaverse) : sélectionnez **Utilisateur** et **Personne**, respectivement.</span><span class="sxs-lookup"><span data-stu-id="ad47f-141">Connected System/Metaverse Object Type: Select **User** and **Person** respectively.</span></span>
   * <span data-ttu-id="ad47f-142">Type de lien : remplacez cette valeur par **Jointure**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-142">Link Type: Change this value to **Join**.</span></span>
   * <span data-ttu-id="ad47f-143">Priorité : indiquez une valeur unique dans le système.</span><span class="sxs-lookup"><span data-stu-id="ad47f-143">Precedence: Provide a value that is unique in the system.</span></span> <span data-ttu-id="ad47f-144">Une valeur numérique inférieure indique une priorité plus élevée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-144">A lower numeric value indicates higher precedence.</span></span>
   * <span data-ttu-id="ad47f-145">Balise : laissez ce champ vide.</span><span class="sxs-lookup"><span data-stu-id="ad47f-145">Tag: Leave empty.</span></span> <span data-ttu-id="ad47f-146">Seules les règles par défaut de Microsoft doivent contenir une valeur dans cette zone.</span><span class="sxs-lookup"><span data-stu-id="ad47f-146">Only out-of-box rules from Microsoft should have this box populated with a value.</span></span>
3. <span data-ttu-id="ad47f-147">Sur la page **Scoping Filter** (Filtre d’étendue), entrez **givenName ISNOTNULL**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-147">On the **Scoping filter** page, enter **givenName ISNOTNULL**.</span></span>  
   <span data-ttu-id="ad47f-148">![Filtre d’étendue des règles entrantes](./media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-148">![Inbound rule scoping filter](./media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span></span>  
   <span data-ttu-id="ad47f-149">Cette section permet de définir les objets auxquels la règle s’applique.</span><span class="sxs-lookup"><span data-stu-id="ad47f-149">This section is used to define which objects the rule should apply to.</span></span> <span data-ttu-id="ad47f-150">Si vous la laissez vide, la règle s’appliquera à tous les objets utilisateur,</span><span class="sxs-lookup"><span data-stu-id="ad47f-150">If left empty, the rule would apply to all user objects.</span></span> <span data-ttu-id="ad47f-151">y compris les salles de conférence, les comptes de service et les autres objets d’utilisateurs non humains.</span><span class="sxs-lookup"><span data-stu-id="ad47f-151">But that would include conference rooms, service accounts, and other non-people user objects.</span></span>
4. <span data-ttu-id="ad47f-152">Ne renseignez pas le champ **Join rule**(Règles de jointure).</span><span class="sxs-lookup"><span data-stu-id="ad47f-152">On the **Join rules**, leave it empty.</span></span>
5. <span data-ttu-id="ad47f-153">Sur la page **Transformations**, définissez le type de flux sur **Expression**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-153">On the **Transformations** page, change the FlowType to **Expression**.</span></span> <span data-ttu-id="ad47f-154">Sélectionnez l’attribut cible **givenName** et, dans Source, entrez `PCase([givenName])`.</span><span class="sxs-lookup"><span data-stu-id="ad47f-154">Select the Target Attribute **givenName**, and in Source enter `PCase([givenName])`.</span></span>
   <span data-ttu-id="ad47f-155">![Transformations des règles entrantes](./media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-155">![Inbound rule transformations](./media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span></span>  
   <span data-ttu-id="ad47f-156">Le moteur de synchronisation respecte la casse aussi bien pour le nom de la fonction que pour le nom de l’attribut.</span><span class="sxs-lookup"><span data-stu-id="ad47f-156">The sync engine is case-sensitive both on the function name and the name of the attribute.</span></span> <span data-ttu-id="ad47f-157">Si vous faites une erreur de saisie, un message d’avertissement s’affiche lorsque vous ajoutez la règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-157">If you type something wrong, you see a warning when you add the rule.</span></span> <span data-ttu-id="ad47f-158">L’éditeur vous permet d’enregistrer et de continuer, mais vous devrez donc rouvrir la règle pour la corriger.</span><span class="sxs-lookup"><span data-stu-id="ad47f-158">The editor allows you to save and continue, so you would have to reopen the rule and correct the rule.</span></span>
6. <span data-ttu-id="ad47f-159">Cliquez sur **Ajouter** pour enregistrer la règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-159">Click **Add** to save the rule.</span></span>

<span data-ttu-id="ad47f-160">Votre nouvelle règle personnalisée doit être visible pour les autres règles de synchronisation du système.</span><span class="sxs-lookup"><span data-stu-id="ad47f-160">Your new custom rule should be visible with the other sync rules in the system.</span></span>

### <a name="verify-the-change"></a><span data-ttu-id="ad47f-161">Vérification des modifications</span><span class="sxs-lookup"><span data-stu-id="ad47f-161">Verify the change</span></span>
<span data-ttu-id="ad47f-162">Après avoir apporté une nouvelle modification, il est préférable de s’assurer que tout fonctionne comme prévu et qu’aucune erreur n’est générée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-162">With this new change, you want to make sure it is working as expected and is not throwing any errors.</span></span> <span data-ttu-id="ad47f-163">Selon le nombre d’objets dont vous disposez, il existe deux façons de procéder.</span><span class="sxs-lookup"><span data-stu-id="ad47f-163">Depending on the number of objects you have, there are two different ways to do this step.</span></span>

1. <span data-ttu-id="ad47f-164">Exécuter une synchronisation complète de tous les objets</span><span class="sxs-lookup"><span data-stu-id="ad47f-164">Run a full sync on all objects</span></span>
2. <span data-ttu-id="ad47f-165">Exécuter un aperçu et une synchronisation complète sur un seul objet</span><span class="sxs-lookup"><span data-stu-id="ad47f-165">Run a preview and full sync on a single object</span></span>

<span data-ttu-id="ad47f-166">Démarrez le **Service de synchronisation** depuis le menu Démarrer.</span><span class="sxs-lookup"><span data-stu-id="ad47f-166">Start **Synchronization Service** from the start menu.</span></span> <span data-ttu-id="ad47f-167">Les étapes décrites dans cette section se trouvent toutes dans cet outil.</span><span class="sxs-lookup"><span data-stu-id="ad47f-167">The steps in this section are all in this tool.</span></span>

1. <span data-ttu-id="ad47f-168">**Synchronisation complète de tous les objets**</span><span class="sxs-lookup"><span data-stu-id="ad47f-168">**Full sync on all objects**</span></span>  
   <span data-ttu-id="ad47f-169">Sous Actions, sélectionnez **Connecteurs** en haut de la page.</span><span class="sxs-lookup"><span data-stu-id="ad47f-169">Select **Connectors** at the top.</span></span> <span data-ttu-id="ad47f-170">Identifiez le connecteur que vous avez modifié dans la section précédente (dans ce cas, les services de domaine Active Directory), puis sélectionnez-le.</span><span class="sxs-lookup"><span data-stu-id="ad47f-170">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="ad47f-171">Sous Actions, sélectionnez **Exécuter**, puis **Synchronisation complète** et **OK**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-171">Select **Run** from Actions and select **Full Synchronization** and **OK**.</span></span>
   <span data-ttu-id="ad47f-172">![Synchronisation complète](./media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-172">![Full sync](./media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span></span>  
   <span data-ttu-id="ad47f-173">Les objets ne sont pas mis à jour dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="ad47f-173">The objects are now updated in the metaverse.</span></span> <span data-ttu-id="ad47f-174">Vous voulez à présent examiner l’objet dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="ad47f-174">You now want to look at the object in the metaverse.</span></span>
2. <span data-ttu-id="ad47f-175">**Aperçu et synchronisation complète d’un seul objet**</span><span class="sxs-lookup"><span data-stu-id="ad47f-175">**Preview and full sync on a single object**</span></span>  
   <span data-ttu-id="ad47f-176">Sous Actions, sélectionnez **Connecteurs** en haut de la page.</span><span class="sxs-lookup"><span data-stu-id="ad47f-176">Select **Connectors** at the top.</span></span> <span data-ttu-id="ad47f-177">Identifiez le connecteur que vous avez modifié dans la section précédente (dans ce cas, les services de domaine Active Directory), puis sélectionnez-le.</span><span class="sxs-lookup"><span data-stu-id="ad47f-177">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="ad47f-178">Sélectionnez **Search Connector Space**(Rechercher l’espace de connecteur).</span><span class="sxs-lookup"><span data-stu-id="ad47f-178">Select **Search Connector Space**.</span></span> <span data-ttu-id="ad47f-179">Utilisez l’étendue pour rechercher un objet que vous souhaitez utiliser pour tester les modifications.</span><span class="sxs-lookup"><span data-stu-id="ad47f-179">Use scope to find an object you want to use to test the change.</span></span> <span data-ttu-id="ad47f-180">Sélectionnez l’objet et cliquez sur **Aperçu**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-180">Select the object and click **Preview**.</span></span> <span data-ttu-id="ad47f-181">Dans le nouvel écran, sélectionnez **Commit Preview**(Valider l’aperçu).</span><span class="sxs-lookup"><span data-stu-id="ad47f-181">In the new screen, select **Commit Preview**.</span></span>  
   <span data-ttu-id="ad47f-182">![Commit preview](./media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-182">![Commit preview](./media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span></span>  
   <span data-ttu-id="ad47f-183">La modification est maintenant validée dans le métaverse.</span><span class="sxs-lookup"><span data-stu-id="ad47f-183">The change is now committed to the metaverse.</span></span>

<span data-ttu-id="ad47f-184">**Consulter l’objet dans le métaverse**</span><span class="sxs-lookup"><span data-stu-id="ad47f-184">**Look at the object in the metaverse**</span></span>  
<span data-ttu-id="ad47f-185">Vous souhaitez maintenant choisir quelques exemples d’objets pour vous assurer que la valeur correspond à celle attendue et que la règle est bien appliquée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-185">You now want to pick a few sample objects to make sure the value is expected and that the rule applied.</span></span> <span data-ttu-id="ad47f-186">Sélectionnez **Metaverse Search** (Recherche dans le métaverse) en haut de l’écran.</span><span class="sxs-lookup"><span data-stu-id="ad47f-186">Select **Metaverse Search** from the top.</span></span> <span data-ttu-id="ad47f-187">Ajoutez les filtres dont vous avez besoin pour rechercher les objets appropriés.</span><span class="sxs-lookup"><span data-stu-id="ad47f-187">Add any filter you need to find the relevant objects.</span></span> <span data-ttu-id="ad47f-188">Dans les résultats de la recherche, ouvrez un objet.</span><span class="sxs-lookup"><span data-stu-id="ad47f-188">From the search result, open an object.</span></span> <span data-ttu-id="ad47f-189">Examinez les valeurs d’attribut et vérifiez dans la colonne **Règles de synchronisation** que la règle a bien été appliquée comme prévu.</span><span class="sxs-lookup"><span data-stu-id="ad47f-189">Look at the attribute values and also verify in the **Sync Rules** column that the rule applied as expected.</span></span>  
<span data-ttu-id="ad47f-190">![Metaverse search](./media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-190">![Metaverse search](./media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span></span>  

### <a name="enable-the-scheduler"></a><span data-ttu-id="ad47f-191">Activation du planificateur</span><span class="sxs-lookup"><span data-stu-id="ad47f-191">Enable the scheduler</span></span>
<span data-ttu-id="ad47f-192">Si tout fonctionne comme prévu, vous pouvez réactiver le planificateur.</span><span class="sxs-lookup"><span data-stu-id="ad47f-192">If everything is as expected, you can enable the scheduler again.</span></span> <span data-ttu-id="ad47f-193">À partir de PowerShell, exécutez `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span><span class="sxs-lookup"><span data-stu-id="ad47f-193">From PowerShell, run `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span></span>

## <a name="other-common-attribute-flow-changes"></a><span data-ttu-id="ad47f-194">Autres modifications courantes du flux d’attributs</span><span class="sxs-lookup"><span data-stu-id="ad47f-194">Other common attribute flow changes</span></span>
<span data-ttu-id="ad47f-195">Dans la section précédente, nous avons vu comment apporter des modifications à un flux d’attributs.</span><span class="sxs-lookup"><span data-stu-id="ad47f-195">The previous section described how to make changes to an attribute flow.</span></span> <span data-ttu-id="ad47f-196">Dans cette section, vous trouverez d’autres exemples.</span><span class="sxs-lookup"><span data-stu-id="ad47f-196">In this section, some additional examples are provided.</span></span> <span data-ttu-id="ad47f-197">Les étapes de création de la règle de synchronisation ont été condensées, mais vous trouverez la procédure complète dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="ad47f-197">The steps for how to create the sync rule is abbreviated, but you can find the full steps in the previous section.</span></span>

### <a name="use-another-attribute-than-the-default"></a><span data-ttu-id="ad47f-198">Utiliser un autre attribut que l’attribut par défaut</span><span class="sxs-lookup"><span data-stu-id="ad47f-198">Use another attribute than the default</span></span>
<span data-ttu-id="ad47f-199">Chez Fabrikam, il existe une forêt où l’alphabet local est utilisé pour les prénoms, noms et noms complets.</span><span class="sxs-lookup"><span data-stu-id="ad47f-199">At Fabrikam, there is a forest where the local alphabet is used for given name, surname, and display name.</span></span> <span data-ttu-id="ad47f-200">La représentation sous forme de caractères latins de ces attributs est stockée dans les attributs d’extension.</span><span class="sxs-lookup"><span data-stu-id="ad47f-200">The Latin character representation of these attributes can be found in the extension attributes.</span></span> <span data-ttu-id="ad47f-201">Au moment de la création de la liste d’adresses globale dans Azure AD et Office 365, l’organisation souhaite que ces attributs soient utilisés.</span><span class="sxs-lookup"><span data-stu-id="ad47f-201">When building the global address list in Azure AD and Office 365, the organization wants these attributes to be used instead.</span></span>

<span data-ttu-id="ad47f-202">Avec une configuration par défaut, un objet de la forêt locale ressemble à ceci : </span><span class="sxs-lookup"><span data-stu-id="ad47f-202">With a default configuration, an object from the local forest looks like this:</span></span>  
![Flux d’attributs 1](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp1.png)

<span data-ttu-id="ad47f-204">Pour créer une règle avec d’autres flux d’attributs, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="ad47f-204">To create a rule with other attribute flows, do the following:</span></span>

* <span data-ttu-id="ad47f-205">Ouvrez l’ **Éditeur de règles de synchronisation** depuis le menu Démarrer.</span><span class="sxs-lookup"><span data-stu-id="ad47f-205">Start **Synchronization Rule Editor** from the start menu.</span></span>
* <span data-ttu-id="ad47f-206">En maintenant l’option **Entrant** sélectionnée sur la gauche, cliquez sur le bouton **Ajouter une nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-206">With **Inbound** still selected to the left, click the button **Add new rule**.</span></span>
* <span data-ttu-id="ad47f-207">Attribuez à la règle un nom et une description.</span><span class="sxs-lookup"><span data-stu-id="ad47f-207">Give the rule a name and description.</span></span> <span data-ttu-id="ad47f-208">Sélectionnez Active Directory local et les types d’objets appropriés.</span><span class="sxs-lookup"><span data-stu-id="ad47f-208">Select the on-premises Active Directory and the relevant object types.</span></span> <span data-ttu-id="ad47f-209">Dans **Type de lien**, sélectionnez **Jointure**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-209">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="ad47f-210">Pour le choix de la priorité, sélectionnez un nombre qui n’est pas utilisé par une autre règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-210">For precedence, pick a number that is not used by another rule.</span></span> <span data-ttu-id="ad47f-211">Les règles par défaut commencent à 100, donc, il est possible d’utiliser la valeur 50 dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="ad47f-211">The out-of-box rules start with 100, so the value 50 can be used in this example.</span></span>
  <span data-ttu-id="ad47f-212">![Flux d’attributs 2](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-212">![Attribute flow 2](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span></span>
* <span data-ttu-id="ad47f-213">Laissez l’option d’étendue vide (elle doit s’appliquer à tous les objets utilisateur de la forêt).</span><span class="sxs-lookup"><span data-stu-id="ad47f-213">Leave scope empty (that is, should apply to all user objects in the forest).</span></span>
* <span data-ttu-id="ad47f-214">Laissez les règles de jointure vides (c’est la règle par défaut qui doit gérer toutes les jointures).</span><span class="sxs-lookup"><span data-stu-id="ad47f-214">Leave join rules empty (that is, let the out-of-box rule handle any joins).</span></span>
* <span data-ttu-id="ad47f-215">Dans Transformations, créez les flux suivants : </span><span class="sxs-lookup"><span data-stu-id="ad47f-215">In Transformations, create the following flows:</span></span>  
  ![Flux d’attributs 3](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp3.png)
* <span data-ttu-id="ad47f-217">Cliquez sur **Ajouter** pour enregistrer la règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-217">Click **Add** to save the rule.</span></span>
* <span data-ttu-id="ad47f-218">Accédez à **Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-218">Go to **Synchronization Service Manager**.</span></span> <span data-ttu-id="ad47f-219">Sous **Connecteurs**, sélectionnez le connecteur auquel nous avons ajouté la règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-219">On **Connectors**, select the Connector where we added the rule.</span></span> <span data-ttu-id="ad47f-220">Sélectionnez **Exécuter** et **Synchronisation complète**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-220">Select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="ad47f-221">Une synchronisation complète recalcule tous les objets en utilisant les règles en cours.</span><span class="sxs-lookup"><span data-stu-id="ad47f-221">A Full Synchronization recalculates all objects using the current rules.</span></span>

<span data-ttu-id="ad47f-222">Il s’agit du résultat obtenu pour le même objet avec cette règle personnalisée : </span><span class="sxs-lookup"><span data-stu-id="ad47f-222">This is the result for the same object with this custom rule:</span></span>  
![Flux d’attributs 4](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp4.png)

### <a name="length-of-attributes"></a><span data-ttu-id="ad47f-224">Longueur des attributs</span><span class="sxs-lookup"><span data-stu-id="ad47f-224">Length of attributes</span></span>
<span data-ttu-id="ad47f-225">Les attributs de chaîne sont par défaut définis pour être indexables et la longueur maximale est de 448 caractères.</span><span class="sxs-lookup"><span data-stu-id="ad47f-225">String attributes are by default set to be indexable and the maximum length is 448 characters.</span></span> <span data-ttu-id="ad47f-226">Si vous travaillez avec des attributs de chaîne qui peuvent contenir davantage de caractères, assurez-vous d’inclure ce qui suit dans le flux d’attributs : </span><span class="sxs-lookup"><span data-stu-id="ad47f-226">If you are working with string attributes that might contain more, then make sure to include the following in the attribute flow:</span></span>  
`attributeName` <- `Left([attributeName],448)`

### <a name="changing-the-userprincipalsuffix"></a><span data-ttu-id="ad47f-227">Modification de userPrincipalSuffix</span><span class="sxs-lookup"><span data-stu-id="ad47f-227">Changing the userPrincipalSuffix</span></span>
<span data-ttu-id="ad47f-228">L’attribut userPrincipalName dans Active Directory n’est pas toujours connu des utilisateurs et peut ne pas convenir comme ID de connexion.</span><span class="sxs-lookup"><span data-stu-id="ad47f-228">The userPrincipalName attribute in Active Directory is not always known by the users and might not be suitable as the sign-in ID.</span></span> <span data-ttu-id="ad47f-229">L’Assistant d’installation d’Azure AD Connect Sync permet de choisir un autre attribut, par exemple un e-mail,</span><span class="sxs-lookup"><span data-stu-id="ad47f-229">The Azure AD Connect sync installation wizard allows picking a different attribute, for example mail.</span></span> <span data-ttu-id="ad47f-230">mais dans certains cas l’attribut doit être calculé.</span><span class="sxs-lookup"><span data-stu-id="ad47f-230">But in some cases the attribute must be calculated.</span></span> <span data-ttu-id="ad47f-231">Par exemple, la société Contoso possède deux annuaires AD, un pour la production et un pour les tests.</span><span class="sxs-lookup"><span data-stu-id="ad47f-231">For example, the company Contoso has two Azure AD directories, one for production and one for testing.</span></span> <span data-ttu-id="ad47f-232">Elle souhaite que les utilisateurs de son client test utilisent un autre suffixe dans l’ID de connexion.</span><span class="sxs-lookup"><span data-stu-id="ad47f-232">They want the users in their test tenant to use another suffix in the sign-in ID.</span></span>  
`userPrincipalName` <- `Word([userPrincipalName],1,"@") & "@contosotest.com"`

<span data-ttu-id="ad47f-233">Dans cette expression, prenons tout ce qui figure à gauche du premier signe @-sign (Word) et concaténons avec une chaîne fixe.</span><span class="sxs-lookup"><span data-stu-id="ad47f-233">In this expression, take everything left of the first @-sign (Word) and concatenate with a fixed string.</span></span>

### <a name="convert-a-multi-value-to-a-single-value"></a><span data-ttu-id="ad47f-234">Convertir un attribut à valeurs multiples en attribut à valeur unique</span><span class="sxs-lookup"><span data-stu-id="ad47f-234">Convert a multi-value to a single-value</span></span>
<span data-ttu-id="ad47f-235">Certains attributs dans Active Directory sont à valeurs multiples dans le schéma, même s’ils semblent être à valeur unique dans Utilisateurs et ordinateurs Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ad47f-235">Some attributes in Active Directory are multi-valued in the schema even though they look single valued in Active Directory Users and Computers.</span></span> <span data-ttu-id="ad47f-236">L’attribut description constitue un exemple.</span><span class="sxs-lookup"><span data-stu-id="ad47f-236">An example is the description attribute.</span></span>  
`description` <- `IIF(IsNullOrEmpty([description]),NULL,Left(Trim(Item([description],1)),448))`

<span data-ttu-id="ad47f-237">Dans cette expression, au cas où l’attribut a une valeur, prenez le premier élément (Item) dans l’attribut, supprimez les espaces à gauche et à droite (Trim), puis conservez les 448 premiers caractères (Left) de la chaîne.</span><span class="sxs-lookup"><span data-stu-id="ad47f-237">In this expression in case the attribute has a value, take the first item (Item) in the attribute, remove leading and trailing spaces (Trim), and then keep the first 448 characters (Left) in the string.</span></span>

### <a name="do-not-flow-an-attribute"></a><span data-ttu-id="ad47f-238">Ne transmettez pas d'attribut</span><span class="sxs-lookup"><span data-stu-id="ad47f-238">Do not flow an attribute</span></span>
<span data-ttu-id="ad47f-239">Pour plus d’informations sur le scénario de cette section, consultez la section [Contrôler le processus de flux d’attributs](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span><span class="sxs-lookup"><span data-stu-id="ad47f-239">For background on the scenario for this section, see [Control the attribute flow process](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span></span>

<span data-ttu-id="ad47f-240">Il existe deux manières de ne pas transmettre un attribut.</span><span class="sxs-lookup"><span data-stu-id="ad47f-240">There are two ways to not flow an attribute.</span></span> <span data-ttu-id="ad47f-241">La première est disponible dans l'Assistant d'installation et vous permet de [Supprimer les attributs sélectionnés](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span><span class="sxs-lookup"><span data-stu-id="ad47f-241">The first is available in the installation wizard and allows you to [remove selected attributes](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span></span> <span data-ttu-id="ad47f-242">Cette option fonctionne si vous n'avez jamais synchronisé l'attribut auparavant.</span><span class="sxs-lookup"><span data-stu-id="ad47f-242">This option works if you have never synchronized the attribute before.</span></span> <span data-ttu-id="ad47f-243">Toutefois, si vous avez commencé à synchroniser cet attribut et que vous le supprimez ultérieurement avec cette fonctionnalité, le moteur de synchronisation cesse de gérer l’attribut et les valeurs existantes sont maintenues dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-243">However, if you have started to synchronize this attribute and later remove it with this feature, then the sync engine stops managing the attribute and the existing values are left in Azure AD.</span></span>

<span data-ttu-id="ad47f-244">Si vous souhaitez supprimer la valeur d’un attribut et vous assurer qu’il ne sera pas transmis à l’avenir, vous devez créer une règle personnalisée à la place.</span><span class="sxs-lookup"><span data-stu-id="ad47f-244">If you want to remove the value of an attribute and make sure it does not flow in the future, you need create a custom rule instead.</span></span>

<span data-ttu-id="ad47f-245">Chez Fabrikam, nous nous sommes rendus compte que certains des attributs que nous synchronisons vers le cloud ne devraient pas s’y trouver.</span><span class="sxs-lookup"><span data-stu-id="ad47f-245">At Fabrikam, we have realized that some of the attributes we synchronize to the cloud should not be there.</span></span> <span data-ttu-id="ad47f-246">Nous souhaitons garantir que ces attributs sont supprimés d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-246">We want to make sure these attributes are removed from Azure AD.</span></span>  
![Attributs d’extension erronés](./media/active-directory-aadconnectsync-change-the-configuration/badextensionattribute.png)

* <span data-ttu-id="ad47f-248">Créer une nouvelle règle de synchronisation entrante et remplir la description ![Descriptions](./media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-248">Create a new inbound Synchronization Rule and populate the description ![Descriptions](./media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span></span>
* <span data-ttu-id="ad47f-249">Créer des flux d’attributs de type **Expression** et avec la source **AuthoritativeNull**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-249">Create attribute flows of type **Expression** and with the source **AuthoritativeNull**.</span></span> <span data-ttu-id="ad47f-250">Le littéral **AuthoritativeNull** indique que la valeur devrait être vide dans l'ordinateur virtuel même si une règle de synchronisation de précédence inférieure essaie de remplir la valeur.</span><span class="sxs-lookup"><span data-stu-id="ad47f-250">The literal **AuthoritativeNull** indicates that the value should be empty in the MV even if a lower precedence sync rule tries to populate the value.</span></span>
  <span data-ttu-id="ad47f-251">![Transformation des attributs d’extension](./media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-251">![Transformation for Extension Attributes](./media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span></span>
* <span data-ttu-id="ad47f-252">Enregistrer la règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-252">Save the Sync Rule.</span></span> <span data-ttu-id="ad47f-253">Démarrez **Service de synchronisation**, recherchez le connecteur, sélectionnez **Exécuter**, puis **Synchronisation complète**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-253">Start **Synchronization Service**, find the Connector, select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="ad47f-254">Cette étape permet de recalculer tous les flux d’attributs.</span><span class="sxs-lookup"><span data-stu-id="ad47f-254">This step recalculates all attribute flows.</span></span>
* <span data-ttu-id="ad47f-255">Vérifiez que les modifications prévues vont être exportées en recherchant l'espace de connecteur.</span><span class="sxs-lookup"><span data-stu-id="ad47f-255">Verify that the intended changes are about to be exported by searching the connector space.</span></span>
  <span data-ttu-id="ad47f-256">![Suppression progressive](./media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-256">![Staged delete](./media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span></span>

## <a name="create-rules-with-powershell"></a><span data-ttu-id="ad47f-257">Création de règles avec PowerShell</span><span class="sxs-lookup"><span data-stu-id="ad47f-257">Create rules with PowerShell</span></span>
<span data-ttu-id="ad47f-258">L’éditeur de règles de synchronisation est adapté lorsque vous avez seulement quelques modifications à apporter.</span><span class="sxs-lookup"><span data-stu-id="ad47f-258">Using the sync rule editor works fine when you only have a few changes to make.</span></span> <span data-ttu-id="ad47f-259">Si vous devez apporter de nombreuses modifications, PowerShell peut être une meilleure option.</span><span class="sxs-lookup"><span data-stu-id="ad47f-259">If you need to make many changes, then PowerShell might be a better option.</span></span> <span data-ttu-id="ad47f-260">Certaines fonctionnalités avancées sont uniquement disponibles avec PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ad47f-260">Some advanced features are only available with PowerShell.</span></span>

### <a name="get-the-powershell-script-for-an-out-of-box-rule"></a><span data-ttu-id="ad47f-261">Obtenir le script PowerShell pour une règle out-of-box</span><span class="sxs-lookup"><span data-stu-id="ad47f-261">Get the PowerShell script for an out-of-box rule</span></span>
<span data-ttu-id="ad47f-262">Pour voir le script PowerShell qui a créé une règle out-of-box, sélectionnez la règle dans l’éditeur de règles de synchronisation, puis cliquez sur **Exporter**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-262">To see the PowerShell script that created an out-of-box rule, select the rule in the sync rules editor and click **Export**.</span></span> <span data-ttu-id="ad47f-263">Cette action vous donne le script PowerShell qui a créé la règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-263">This action gives you the PowerShell script that created the rule.</span></span>

### <a name="advanced-precedence"></a><span data-ttu-id="ad47f-264">Priorité avancée</span><span class="sxs-lookup"><span data-stu-id="ad47f-264">Advanced precedence</span></span>
<span data-ttu-id="ad47f-265">Les règles de synchronisation out-of-box commencent avec une valeur de priorité de 100.</span><span class="sxs-lookup"><span data-stu-id="ad47f-265">The out-of-box sync rules start with a precedence value of 100.</span></span> <span data-ttu-id="ad47f-266">Si vous avez de nombreuses forêts et que vous devez apporter de nombreuses modifications personnalisées, 99 règles de synchronisation pourraient ne pas suffire.</span><span class="sxs-lookup"><span data-stu-id="ad47f-266">If you have many forests and you need to make many custom changes, then 99 sync rules might not be enough.</span></span>

<span data-ttu-id="ad47f-267">Vous pouvez indiquer au moteur de synchronisation que vous souhaitez que des règles supplémentaires soient insérées avant les règles out-of-box.</span><span class="sxs-lookup"><span data-stu-id="ad47f-267">You can instruct the Sync Engine that you want additional rules inserted before the out-of-box rules.</span></span> <span data-ttu-id="ad47f-268">Pour obtenir ce comportement, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="ad47f-268">To get this behavior, follow these steps:</span></span>

1. <span data-ttu-id="ad47f-269">Marquez la première règle de synchronisation d’out-of-box (cette règle est **Obtenu par jointure d’utilisateurs AD**) dans l’éditeur de règles de synchronisation, puis sélectionnez **Exporter**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-269">Mark the first out-of-box sync rule (this rule is the **In from AD-User Join**) in the sync rule editor and select **Export**.</span></span> <span data-ttu-id="ad47f-270">Copiez la valeur d’identificateur SR.</span><span class="sxs-lookup"><span data-stu-id="ad47f-270">Copy the SR Identifier value.</span></span>  
<span data-ttu-id="ad47f-271">![PowerShell avant modification](./media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-271">![PowerShell before change](./media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span></span>  
2. <span data-ttu-id="ad47f-272">Créez la nouvelle règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-272">Create the new sync rule.</span></span> <span data-ttu-id="ad47f-273">Vous pouvez utiliser l’éditeur de règles de synchronisation pour la créer.</span><span class="sxs-lookup"><span data-stu-id="ad47f-273">You can use the sync rule editor to create it.</span></span> <span data-ttu-id="ad47f-274">Exportez la règle dans un script PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ad47f-274">Export the rule to a PowerShell script.</span></span>
3. <span data-ttu-id="ad47f-275">Dans la propriété **PrecedenceBefore**, insérez la valeur d’identificateur de la règle out-of-box.</span><span class="sxs-lookup"><span data-stu-id="ad47f-275">In the property **PrecedenceBefore**, insert the identifier value from the out-of-box rule.</span></span> <span data-ttu-id="ad47f-276">Définissez la **priorité** sur **0**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-276">Set the **Precedence** to **0**.</span></span> <span data-ttu-id="ad47f-277">Assurez-vous que l’attribut d’identificateur est unique et que vous ne réutilisez pas un GUID à partir d’une autre règle.</span><span class="sxs-lookup"><span data-stu-id="ad47f-277">Make sure the Identifier attribute is unique and you are not reusing a GUID from another rule.</span></span> <span data-ttu-id="ad47f-278">Assurez-vous également que la propriété **ImmutableTag** n’est pas définie, car cette propriété doit uniquement être définie pour une règle out-of-box.</span><span class="sxs-lookup"><span data-stu-id="ad47f-278">Also make sure that the **ImmutableTag** property is not set; this property should only be set for an out-of-box rule.</span></span> <span data-ttu-id="ad47f-279">Enregistrez le script PowerShell et exécutez-le.</span><span class="sxs-lookup"><span data-stu-id="ad47f-279">Save the PowerShell script and run it.</span></span> <span data-ttu-id="ad47f-280">Le résultat est que votre règle personnalisée se voit affecter la priorité 100 et que toutes les autres règles out-of-box sont incrémentées.</span><span class="sxs-lookup"><span data-stu-id="ad47f-280">The result is that your custom rule is assigned the precedence value of 100 and all other out-of-box rules are incremented.</span></span>  
<span data-ttu-id="ad47f-281">![PowerShell après modification](./media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span><span class="sxs-lookup"><span data-stu-id="ad47f-281">![PowerShell after change](./media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span></span>  

<span data-ttu-id="ad47f-282">Vous pouvez avoir plusieurs règles de synchronisation personnalisées utilisant la même valeur **PrecedenceBefore** si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="ad47f-282">You can have many custom sync rules using the same **PrecedenceBefore** value when needed.</span></span>


## <a name="enable-synchronization-of-preferreddatalocation"></a><span data-ttu-id="ad47f-283">Activer la synchronisation de l’attribut PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="ad47f-283">Enable synchronization of PreferredDataLocation</span></span>
<span data-ttu-id="ad47f-284">Azure AD Connect prend en charge la synchronisation de l’attribut **PreferredDataLocation** pour les objets **Utilisateur** dans la version 1.1.524.0 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="ad47f-284">Azure AD Connect supports synchronization of the **PreferredDataLocation** attribute for **User** objects in version 1.1.524.0 and after.</span></span> <span data-ttu-id="ad47f-285">Plus spécifiquement, les modifications introduites sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="ad47f-285">More specifically, following changes have been introduced:</span></span>

* <span data-ttu-id="ad47f-286">Le schéma du type d’objet **Utilisateur** dans le connecteur Azure AD est étendu pour inclure l’attribut PreferredDataLocation qui est de type chaîne et n’a qu’une seule valeur.</span><span class="sxs-lookup"><span data-stu-id="ad47f-286">The schema of the object type **User** in the Azure AD Connector is extended to include PreferredDataLocation attribute, which is of type string and is single-valued.</span></span>

* <span data-ttu-id="ad47f-287">Le schéma du type d’objet **Personne** dans le Metaverse est étendu pour inclure l’attribut PreferredDataLocation, qui est de type chaîne et n’a qu’une seule valeur.</span><span class="sxs-lookup"><span data-stu-id="ad47f-287">The schema of the object type **Person** in the Metaverse is extended to include PreferredDataLocation attribute, which is of type string and is single-valued.</span></span>

<span data-ttu-id="ad47f-288">Par défaut, l’attribut PreferredDataLocation n’est pas activé pour la synchronisation, car il n’existe aucun attribut PreferredDataLocation correspondant dans l’Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="ad47f-288">By default, the PreferredDataLocation attribute is not enabled for synchronization because there is no corresponding PreferredDataLocation attribute in on-premises Active Directory.</span></span> <span data-ttu-id="ad47f-289">Vous devez activer manuellement la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-289">You must manually enable synchronization.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ad47f-290">Actuellement, Azure AD permet que l’attribut PreferredDataLocation sur des objets utilisateur personnalisés et des objets utilisateur cloud soit directement configuré à l’aide d’Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ad47f-290">Currently, Azure AD allows the PreferredDataLocation attribute on both synchronized User objects and cloud User objects to be directly configured using Azure AD PowerShell.</span></span> <span data-ttu-id="ad47f-291">Une fois que vous avez activé la synchronisation de l’attribut PreferredDataLocation, vous devez cesser d’utiliser Azure AD PowerShell pour configurer l’attribut sur des **objets utilisateur synchronisés**, car Azure AD Connect les remplace sur la base des valeurs d’attribut source dans l’Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="ad47f-291">Once you have enabled synchronization of the PreferredDataLocation attribute, you must stop using Azure AD PowerShell to configure the attribute on **synchronized User objects** as Azure AD Connect will override them based on the source attribute values in on-premises Active Directory.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ad47f-292">Le 1er septembre 2017, Azure AD cessera de permettre la configuration de l’attribut PreferredDataLocation sur des **objets utilisateur synchronisés** directement à l’aide d’Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ad47f-292">On September 1 2017, Azure AD will no longer allow the PreferredDataLocation attribute on **synchronized User objects** to be directly configured using Azure AD PowerShell.</span></span> <span data-ttu-id="ad47f-293">Pour configurer l’attribut PreferredLocation sur des objets utilisateur synchronisés, vous devez utiliser uniquement Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad47f-293">To configure PreferredLocation attribute on synchronized User objects, you must use Azure AD Connect only.</span></span>

<span data-ttu-id="ad47f-294">Avant d’activer la synchronisation de l’attribut PreferredDataLocation, vous devez :</span><span class="sxs-lookup"><span data-stu-id="ad47f-294">Before enabling synchronization of the PreferredDataLocation attribute, you must:</span></span>

 * <span data-ttu-id="ad47f-295">Déterminer l’attribut de l’Active Directory local à utiliser en tant qu’attribut source.</span><span class="sxs-lookup"><span data-stu-id="ad47f-295">First, decide which on-premises Active Directory attribute to be used as the source attribute.</span></span> <span data-ttu-id="ad47f-296">Il doit être de type **chaîne** et **à valeur unique**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-296">It should be of type **string** and is **single-valued**.</span></span>

 * <span data-ttu-id="ad47f-297">Si vous avez déjà configuré l’attribut PreferredDataLocation sur des objets utilisateur synchronisés existants dans Azure AD à l’aide d’Azure AD PowerShell, vous devez **rétroporter** les valeurs d’attribut vers les objets utilisateur correspondants dans l’Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="ad47f-297">If you have previously configured the PreferredDataLocation attribute on existing synchronized User objects in Azure AD using Azure AD PowerShell, you must **backport** the attribute values to the corresponding User objects in on-premises Active Directory.</span></span>
 
    > [!IMPORTANT]
    > <span data-ttu-id="ad47f-298">Si vous ne rétroportez pas les valeurs d’attribut pour les objets utilisateur correspondants dans l’Active Directory local, Azure AD Connect supprime les valeurs d’attribut existantes dans Azure AD lorsque la synchronisation de l’attribut PreferredDataLocation est activée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-298">If you do not backport the attribute values to the corresponding User objects in on-premises Active Directory, Azure AD Connect will remove the existing attribute values in Azure AD when synchronization for the PreferredDataLocation attribute is enabled.</span></span>

 * <span data-ttu-id="ad47f-299">Nous vous recommandons de configurer maintenant l’attribut source sur au moins deux objets utilisateur AD locaux qui pourront être utilisés à des fins de vérification ultérieure.</span><span class="sxs-lookup"><span data-stu-id="ad47f-299">It is recommended you configure the source attribute on at least a couple of on-premises AD User objects now, which can be used for verification later.</span></span>
 
<span data-ttu-id="ad47f-300">Les étapes d’activation de la synchronisation de l’attribut PreferredDataLocation peuvent se résumer comme suit :</span><span class="sxs-lookup"><span data-stu-id="ad47f-300">The steps to enable synchronization of the PreferredDataLocation attribute can be summarized as:</span></span>

1. <span data-ttu-id="ad47f-301">Désactiver le planificateur de synchronisation et vérifier qu'aucune synchronisation n’est en cours</span><span class="sxs-lookup"><span data-stu-id="ad47f-301">Disable sync scheduler and verify there is no synchronization in progress</span></span>

2. <span data-ttu-id="ad47f-302">Ajouter l’attribut source au schéma du connecteur AD local</span><span class="sxs-lookup"><span data-stu-id="ad47f-302">Add the source attribute to the on-premises AD Connector schema</span></span>

3. <span data-ttu-id="ad47f-303">Ajouter PreferredDataLocation au schéma du connecteur Azure AD</span><span class="sxs-lookup"><span data-stu-id="ad47f-303">Add PreferredDataLocation to the Azure AD Connector schema</span></span>

4. <span data-ttu-id="ad47f-304">Créer une règle de synchronisation de trafic entrant pour transmettre la valeur de l’attribut à partir de l’Active Directory local</span><span class="sxs-lookup"><span data-stu-id="ad47f-304">Create an inbound synchronization rule to flow the attribute value from on-premises Active Directory</span></span>

5. <span data-ttu-id="ad47f-305">Créer une règle de synchronisation de trafic sortant pour transmettre la valeur de l’attribut à Azure AD</span><span class="sxs-lookup"><span data-stu-id="ad47f-305">Create an outbound synchronization rule to flow the attribute value to Azure AD</span></span>

6. <span data-ttu-id="ad47f-306">Exécuter un cycle de synchronisation complète</span><span class="sxs-lookup"><span data-stu-id="ad47f-306">Run Full Synchronization cycle</span></span>

7. <span data-ttu-id="ad47f-307">Activer le planificateur de synchronisation</span><span class="sxs-lookup"><span data-stu-id="ad47f-307">Enable sync scheduler</span></span>

> [!NOTE]
> <span data-ttu-id="ad47f-308">Le reste de cette section décrit ces étapes en détail.</span><span class="sxs-lookup"><span data-stu-id="ad47f-308">The rest of this section covers these steps in details.</span></span> <span data-ttu-id="ad47f-309">Ils sont décrits dans le cadre d’un déploiement d’Azure AD avec une topologie de forêt unique et sans règles de synchronisation personnalisées.</span><span class="sxs-lookup"><span data-stu-id="ad47f-309">They are described in the context of an Azure AD deployment with single-forest topology and without custom synchronization rules.</span></span> <span data-ttu-id="ad47f-310">Si vous avez une topologie à forêts multiples, des règles de synchronisation personnalisées configurées ou un serveur intermédiaire, vous devez ajuster les étapes en conséquence.</span><span class="sxs-lookup"><span data-stu-id="ad47f-310">If you have multi-forest topology, custom synchronization rules configured or have a staging server, you need to adjust the steps accordingly.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="ad47f-311">Étape 1 : désactiver le planificateur de synchronisation et vérifier qu’aucune synchronisation n’est en cours</span><span class="sxs-lookup"><span data-stu-id="ad47f-311">Step 1: Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="ad47f-312">Veillez à ce qu’aucune synchronisation ne se produise quand vous êtes en train de mettre à jour des règles de synchronisation afin d’éviter l’exportation de modifications inattendues vers Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-312">Ensure no synchronization takes place while you are in the middle of updating synchronization rules to avoid unintended changes being exported to Azure AD.</span></span> <span data-ttu-id="ad47f-313">Pour désactiver le planificateur de synchronisation intégré :</span><span class="sxs-lookup"><span data-stu-id="ad47f-313">To disable the built-in sync scheduler:</span></span>

 1. <span data-ttu-id="ad47f-314">Lancez une session PowerShell sur le serveur Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad47f-314">Start PowerShell session on the Azure AD Connect server.</span></span>

 2. <span data-ttu-id="ad47f-315">Désactivez la synchronisation planifiée en exécutant l’applet de commande : `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="ad47f-315">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>
 
 3. <span data-ttu-id="ad47f-316">Lancez **Synchronization Service Manager** en accédant au menu DÉMARRER → Service de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-316">Start the **Synchronization Service Manager** by going to START → Synchronization Service.</span></span>
 
 4. <span data-ttu-id="ad47f-317">Accédez à l’onglet **Opérations** et confirmez qu’aucune opération n’est à l’état *« En cours ».*</span><span class="sxs-lookup"><span data-stu-id="ad47f-317">Go to the **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

![Synchronization Service Manager - Vérifier qu’aucune opération n’est en cours](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step1.png)

### <a name="step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema"></a><span data-ttu-id="ad47f-319">Étape 2  : ajouter l’attribut source au schéma du connecteur AD local</span><span class="sxs-lookup"><span data-stu-id="ad47f-319">Step 2: Add the source attribute to the on-premises AD Connector schema</span></span>
<span data-ttu-id="ad47f-320">Certains attributs AD ne sont pas importés dans l’espace du connecteur AD local.</span><span class="sxs-lookup"><span data-stu-id="ad47f-320">Not all AD attributes are imported into the on-premises AD Connector Space.</span></span> <span data-ttu-id="ad47f-321">Pour ajouter l’attribut source à la liste des attributs importés :</span><span class="sxs-lookup"><span data-stu-id="ad47f-321">To add the source attribute to the list of the imported attributes:</span></span>

 1. <span data-ttu-id="ad47f-322">Accédez à l’onglet **Connecteurs** dans Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="ad47f-322">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
 
 2. <span data-ttu-id="ad47f-323">Cliquez avec le bouton droit sur le **Connecteur Active Directory local**, puis sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-323">Right-click on the **on-premises AD Connector** and select **Properties**.</span></span>
 
 3. <span data-ttu-id="ad47f-324">Dans la boîte de dialogue contextuelle, accédez à l’onglet **Sélectionner les attributs**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-324">In the pop-up dialog, go to the **Select Attributes** tab.</span></span>
 
 4. <span data-ttu-id="ad47f-325">Assurez-vous que l’attribut source est activé dans la liste d’attributs.</span><span class="sxs-lookup"><span data-stu-id="ad47f-325">Make sure the source attribute is checked in the attribute list.</span></span>
 
 5. <span data-ttu-id="ad47f-326">Cliquez sur **OK** pour enregistrer.</span><span class="sxs-lookup"><span data-stu-id="ad47f-326">Click **OK** to save.</span></span>

![Ajoutez l’attribut source au schéma du connecteur AD local](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step2.png)

### <a name="step-3-add-preferreddatalocation-to-the-azure-ad-connector-schema"></a><span data-ttu-id="ad47f-328">Étape 3 : ajouter l’attribut PreferredDataLocation au schéma du connecteur Azure AD</span><span class="sxs-lookup"><span data-stu-id="ad47f-328">Step 3: Add PreferredDataLocation to the Azure AD Connector schema</span></span>
<span data-ttu-id="ad47f-329">Par défaut, l’attribut PreferredDataLocation n’est pas importé dans l’espace Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad47f-329">By default, the PreferredDataLocation attribute is not imported into the Azure AD Connect Space.</span></span> <span data-ttu-id="ad47f-330">Pour ajouter l’attribut PreferredDataLocation à la liste des attributs importés :</span><span class="sxs-lookup"><span data-stu-id="ad47f-330">To add the PreferredDataLocation attribute to the list of imported attributes:</span></span>

 1. <span data-ttu-id="ad47f-331">Accédez à l’onglet **Connecteurs** dans Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="ad47f-331">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>

 2. <span data-ttu-id="ad47f-332">Cliquez avec le bouton droit sur le **Connecteur Azure AD**, puis sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-332">Right-click on the **Azure AD Connector** and select **Properties**.</span></span>

 3. <span data-ttu-id="ad47f-333">Dans la boîte de dialogue contextuelle, accédez à l’onglet **Sélectionner les attributs**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-333">In the pop-up dialog, go to the **Select Attributes** tab.</span></span>

 4. <span data-ttu-id="ad47f-334">Assurez-vous que l’attribut PreferredDataLocation est activé dans la liste des attributs.</span><span class="sxs-lookup"><span data-stu-id="ad47f-334">Make sure the PreferredDataLocation attribute is checked in the attribute list.</span></span>

 5. <span data-ttu-id="ad47f-335">Cliquez sur **OK** pour enregistrer.</span><span class="sxs-lookup"><span data-stu-id="ad47f-335">Click **OK** to save.</span></span>

![Ajouter un attribut source au schéma du connecteur Azure AD](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step3.png)

### <a name="step-4-create-an-inbound-synchronization-rule-to-flow-the-attribute-value-from-on-premises-active-directory"></a><span data-ttu-id="ad47f-337">Étape 4 : créer une règle de synchronisation de trafic entrant pour transmettre la valeur de l’attribut à partir de l’Active Directory local</span><span class="sxs-lookup"><span data-stu-id="ad47f-337">Step 4: Create an inbound synchronization rule to flow the attribute value from on-premises Active Directory</span></span>
<span data-ttu-id="ad47f-338">La règle de synchronisation de trafic entrant permet de transmettre la valeur de l’attribut de l’attribut source de l’Active Directory local au Metaverse :</span><span class="sxs-lookup"><span data-stu-id="ad47f-338">The inbound synchronization rule permits the attribute value to flow from the source attribute from on-premises Active Directory to the Metaverse:</span></span>

1. <span data-ttu-id="ad47f-339">Lancez **Synchronization Rules Editor** dans le menu DÉMARRER → Éditeur de règles de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-339">Start the **Synchronization Rules Editor** by going to START → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="ad47f-340">Définissez le filtre de recherche **Direction** sur **Entrant**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-340">Set the search filter **Direction** to be **Inbound**.</span></span>

3. <span data-ttu-id="ad47f-341">Cliquez sur **Ajouter une nouvelle règle** pour créer une règle de trafic entrant.</span><span class="sxs-lookup"><span data-stu-id="ad47f-341">Click **Add new rule** button to create a new inbound rule.</span></span>

4. <span data-ttu-id="ad47f-342">Sous l’onglet **Description**, définissez la configuration suivante :</span><span class="sxs-lookup"><span data-stu-id="ad47f-342">Under the **Description** tab, provide the following configuration:</span></span>
 
    | <span data-ttu-id="ad47f-343">Attribut</span><span class="sxs-lookup"><span data-stu-id="ad47f-343">Attribute</span></span> | <span data-ttu-id="ad47f-344">Valeur</span><span class="sxs-lookup"><span data-stu-id="ad47f-344">Value</span></span> | <span data-ttu-id="ad47f-345">Détails</span><span class="sxs-lookup"><span data-stu-id="ad47f-345">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="ad47f-346">Nom</span><span class="sxs-lookup"><span data-stu-id="ad47f-346">Name</span></span> | <span data-ttu-id="ad47f-347">*Donnez-lui un nom*</span><span class="sxs-lookup"><span data-stu-id="ad47f-347">*Provide a name*</span></span> | <span data-ttu-id="ad47f-348">Par exemple, *« Entrant depuis AD – Utilisateur PreferredDataLocation”*</span><span class="sxs-lookup"><span data-stu-id="ad47f-348">For example, *“In from AD – User PreferredDataLocation”*</span></span> |
    | <span data-ttu-id="ad47f-349">Description</span><span class="sxs-lookup"><span data-stu-id="ad47f-349">Description</span></span> | <span data-ttu-id="ad47f-350">*Fournissez une description*</span><span class="sxs-lookup"><span data-stu-id="ad47f-350">*Provide a description*</span></span> |  |
    | <span data-ttu-id="ad47f-351">Système connecté</span><span class="sxs-lookup"><span data-stu-id="ad47f-351">Connected System</span></span> | <span data-ttu-id="ad47f-352">*Sélectionnez le connecteur AD local*</span><span class="sxs-lookup"><span data-stu-id="ad47f-352">*Pick the on-premises AD connector*</span></span> |  |
    | <span data-ttu-id="ad47f-353">Type d’objet système connecté</span><span class="sxs-lookup"><span data-stu-id="ad47f-353">Connected System Object Type</span></span> | <span data-ttu-id="ad47f-354">**Utilisateur**</span><span class="sxs-lookup"><span data-stu-id="ad47f-354">**User**</span></span> |  |
    | <span data-ttu-id="ad47f-355">Type d’objet Metaverse</span><span class="sxs-lookup"><span data-stu-id="ad47f-355">Metaverse Object Type</span></span> | <span data-ttu-id="ad47f-356">**Person**</span><span class="sxs-lookup"><span data-stu-id="ad47f-356">**Person**</span></span> |  |
    | <span data-ttu-id="ad47f-357">Type de lien</span><span class="sxs-lookup"><span data-stu-id="ad47f-357">Link Type</span></span> | <span data-ttu-id="ad47f-358">**Join**</span><span class="sxs-lookup"><span data-stu-id="ad47f-358">**Join**</span></span> |  |
    | <span data-ttu-id="ad47f-359">Precedence</span><span class="sxs-lookup"><span data-stu-id="ad47f-359">Precedence</span></span> | <span data-ttu-id="ad47f-360">*Choisissez une valeur comprise entre 1 et 99*</span><span class="sxs-lookup"><span data-stu-id="ad47f-360">*Choose a number between 1 – 99*</span></span> | <span data-ttu-id="ad47f-361">Les valeurs de 1 à 99 sont réservées aux règles de synchronisation personnalisées.</span><span class="sxs-lookup"><span data-stu-id="ad47f-361">1 – 99 is reserved for custom sync rules.</span></span> <span data-ttu-id="ad47f-362">Ne sélectionnez pas de valeur utilisée par une autre règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-362">Do not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="ad47f-363">Accédez à l’onglet **Filtre d’étendue**, puis ajoutez un **groupe de filtre d’étendue unique avec la clause suivante** :</span><span class="sxs-lookup"><span data-stu-id="ad47f-363">Go to the **Scoping filter** tab and add a **single scoping filter group with the following clause**:</span></span>
 
    | <span data-ttu-id="ad47f-364">Attribut</span><span class="sxs-lookup"><span data-stu-id="ad47f-364">Attribute</span></span> | <span data-ttu-id="ad47f-365">Opérateur </span><span class="sxs-lookup"><span data-stu-id="ad47f-365">Operator</span></span> | <span data-ttu-id="ad47f-366">Valeur</span><span class="sxs-lookup"><span data-stu-id="ad47f-366">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="ad47f-367">adminDescription</span><span class="sxs-lookup"><span data-stu-id="ad47f-367">adminDescription</span></span> | <span data-ttu-id="ad47f-368">NOTSTARTWITH</span><span class="sxs-lookup"><span data-stu-id="ad47f-368">NOTSTARTWITH</span></span> | <span data-ttu-id="ad47f-369">Utilisateur\_</span><span class="sxs-lookup"><span data-stu-id="ad47f-369">User\_</span></span> | 
 
    <span data-ttu-id="ad47f-370">Le filtre d’étendue détermine les objets de l’Active Directory local auxquels cette règle de synchronisation de trafic entrant s’applique.</span><span class="sxs-lookup"><span data-stu-id="ad47f-370">Scoping filter determines which on-premises AD objects this inbound synchronization rule is applied to.</span></span> <span data-ttu-id="ad47f-371">Dans cet exemple, nous utilisons le même filtre d’étendue que celui utilisé dans la règle de synchronisation OOB *« Entrant depuis AD – Utilisateur Common »*, ce qui permet d’éviter que la règle de synchronisation soit appliquée à des objets utilisateur créés via la fonctionnalité d’écriture différée d’utilisateur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-371">In this example, we use the same scoping filter used as *“In from AD – User Common”* OOB synchronization rule, which prevents the synchronization rule from being applied to User objects created through Azure AD User writeback feature.</span></span> <span data-ttu-id="ad47f-372">Il se peut que vous deviez modifier le filtre d’étendue en fonction de votre déploiement Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad47f-372">You may need to tweak the scoping filter according to your Azure AD Connect deployment.</span></span>

6. <span data-ttu-id="ad47f-373">Accédez à l’onglet **Transformation**, puis implémentez la règle de transformation suivante :</span><span class="sxs-lookup"><span data-stu-id="ad47f-373">Go to the **Transformation tab** and implement the following transformation rule:</span></span>
 
    | <span data-ttu-id="ad47f-374">Type de flux</span><span class="sxs-lookup"><span data-stu-id="ad47f-374">Flow Type</span></span> | <span data-ttu-id="ad47f-375">Attribut cible</span><span class="sxs-lookup"><span data-stu-id="ad47f-375">Target Attribute</span></span> | <span data-ttu-id="ad47f-376">Source</span><span class="sxs-lookup"><span data-stu-id="ad47f-376">Source</span></span> | <span data-ttu-id="ad47f-377">Appliquer une seule fois</span><span class="sxs-lookup"><span data-stu-id="ad47f-377">Apply Once</span></span> | <span data-ttu-id="ad47f-378">Type de fusion</span><span class="sxs-lookup"><span data-stu-id="ad47f-378">Merge Type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="ad47f-379">Directement</span><span class="sxs-lookup"><span data-stu-id="ad47f-379">Direct</span></span> | <span data-ttu-id="ad47f-380">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="ad47f-380">PreferredDataLocation</span></span> | <span data-ttu-id="ad47f-381">Sélectionnez l’attribut source</span><span class="sxs-lookup"><span data-stu-id="ad47f-381">Pick the source attribute</span></span> | <span data-ttu-id="ad47f-382">Désactivé</span><span class="sxs-lookup"><span data-stu-id="ad47f-382">Unchecked</span></span> | <span data-ttu-id="ad47f-383">Mettre à jour</span><span class="sxs-lookup"><span data-stu-id="ad47f-383">Update</span></span> |

7. <span data-ttu-id="ad47f-384">Cliquez sur **Ajouter** pour créer la règle de trafic entrant.</span><span class="sxs-lookup"><span data-stu-id="ad47f-384">Click **Add** to create the inbound rule.</span></span>

![Créer une règle de synchronisation de trafic entrant](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step4.png)

### <a name="step-5-create-an-outbound-synchronization-rule-to-flow-the-attribute-value-to-azure-ad"></a><span data-ttu-id="ad47f-386">Étape 5 : créer une règle de synchronisation de trafic sortant pour transmettre la valeur de l’attribut à Azure AD</span><span class="sxs-lookup"><span data-stu-id="ad47f-386">Step 5: Create an outbound synchronization rule to flow the attribute value to Azure AD</span></span>
<span data-ttu-id="ad47f-387">La règle de synchronisation de trafic sortant permet de transmettre la valeur de l’attribut du Metaverse à l’attribut PreferredDataLocation dans Azure AD :</span><span class="sxs-lookup"><span data-stu-id="ad47f-387">The outbound synchronization rule permits the attribute value to flow from the Metaverse to the PreferredDataLocation attribute in Azure AD:</span></span>

1. <span data-ttu-id="ad47f-388">Accédez à l’**Éditeur de règles de synchronisation**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-388">Go to the **Synchronization Rules** Editor.</span></span>

2. <span data-ttu-id="ad47f-389">Définissez le filtre de recherche **Direction** sur **Sortante**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-389">Set the search filter **Direction** to be **Outbound**.</span></span>

3. <span data-ttu-id="ad47f-390">Cliquez sur le bouton **Ajouter une nouvelle règle**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-390">Click **Add new rule** button.</span></span>

4. <span data-ttu-id="ad47f-391">Sous l’onglet **Description**, définissez la configuration suivante :</span><span class="sxs-lookup"><span data-stu-id="ad47f-391">Under the **Description** tab, provide the following configuration:</span></span>

    | <span data-ttu-id="ad47f-392">Attribut</span><span class="sxs-lookup"><span data-stu-id="ad47f-392">Attribute</span></span> | <span data-ttu-id="ad47f-393">Valeur</span><span class="sxs-lookup"><span data-stu-id="ad47f-393">Value</span></span> | <span data-ttu-id="ad47f-394">Détails</span><span class="sxs-lookup"><span data-stu-id="ad47f-394">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="ad47f-395">Nom</span><span class="sxs-lookup"><span data-stu-id="ad47f-395">Name</span></span> | <span data-ttu-id="ad47f-396">*Donnez-lui un nom*</span><span class="sxs-lookup"><span data-stu-id="ad47f-396">*Provide a name*</span></span> | <span data-ttu-id="ad47f-397">Par exemple, « Sortant vers AAD – Utilisateur PreferredDataLocation »</span><span class="sxs-lookup"><span data-stu-id="ad47f-397">For example, “Out to AAD – User PreferredDataLocation”</span></span> |
    | <span data-ttu-id="ad47f-398">Description</span><span class="sxs-lookup"><span data-stu-id="ad47f-398">Description</span></span> | <span data-ttu-id="ad47f-399">*Fournissez une description*</span><span class="sxs-lookup"><span data-stu-id="ad47f-399">*Provide a description*</span></span> |
    | <span data-ttu-id="ad47f-400">Système connecté</span><span class="sxs-lookup"><span data-stu-id="ad47f-400">Connected System</span></span> | <span data-ttu-id="ad47f-401">*Sélectionnez le connecteur AAD*</span><span class="sxs-lookup"><span data-stu-id="ad47f-401">*Select the AAD connector*</span></span> |
    | <span data-ttu-id="ad47f-402">Type d’objet système connecté</span><span class="sxs-lookup"><span data-stu-id="ad47f-402">Connected System Object Type</span></span> | <span data-ttu-id="ad47f-403">Utilisateur</span><span class="sxs-lookup"><span data-stu-id="ad47f-403">User</span></span> ||
    | <span data-ttu-id="ad47f-404">Type d’objet métaverse</span><span class="sxs-lookup"><span data-stu-id="ad47f-404">Metaverse Object Type</span></span> | <span data-ttu-id="ad47f-405">**Person**</span><span class="sxs-lookup"><span data-stu-id="ad47f-405">**Person**</span></span> ||
    | <span data-ttu-id="ad47f-406">Type de lien</span><span class="sxs-lookup"><span data-stu-id="ad47f-406">Link Type</span></span> | <span data-ttu-id="ad47f-407">**Join**</span><span class="sxs-lookup"><span data-stu-id="ad47f-407">**Join**</span></span> ||
    | <span data-ttu-id="ad47f-408">Precedence</span><span class="sxs-lookup"><span data-stu-id="ad47f-408">Precedence</span></span> | <span data-ttu-id="ad47f-409">*Choisissez une valeur comprise entre 1 et 99*</span><span class="sxs-lookup"><span data-stu-id="ad47f-409">*Choose a number between 1 – 99*</span></span> | <span data-ttu-id="ad47f-410">Les valeurs de 1 à 99 sont réservées aux règles de synchronisation personnalisées.</span><span class="sxs-lookup"><span data-stu-id="ad47f-410">1 – 99 is reserved for custom sync rules.</span></span> <span data-ttu-id="ad47f-411">YDo ne récupère pas de valeur utilisée par une autre règle de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-411">YDo not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="ad47f-412">Accédez à l’onglet **Filtre d’étendue**, puis ajoutez un **groupe de filtre d’étendue unique avec deux clauses** :</span><span class="sxs-lookup"><span data-stu-id="ad47f-412">Go to the **Scoping filter** tab and add a **single scoping filter group with two clauses**:</span></span>
 
    | <span data-ttu-id="ad47f-413">Attribut</span><span class="sxs-lookup"><span data-stu-id="ad47f-413">Attribute</span></span> | <span data-ttu-id="ad47f-414">Opérateur </span><span class="sxs-lookup"><span data-stu-id="ad47f-414">Operator</span></span> | <span data-ttu-id="ad47f-415">Valeur</span><span class="sxs-lookup"><span data-stu-id="ad47f-415">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="ad47f-416">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="ad47f-416">sourceObjectType</span></span> | <span data-ttu-id="ad47f-417">EQUAL</span><span class="sxs-lookup"><span data-stu-id="ad47f-417">EQUAL</span></span> | <span data-ttu-id="ad47f-418">Utilisateur</span><span class="sxs-lookup"><span data-stu-id="ad47f-418">User</span></span> |
    | <span data-ttu-id="ad47f-419">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="ad47f-419">cloudMastered</span></span> | <span data-ttu-id="ad47f-420">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="ad47f-420">NOTEQUAL</span></span> | <span data-ttu-id="ad47f-421">true</span><span class="sxs-lookup"><span data-stu-id="ad47f-421">True</span></span> |

    <span data-ttu-id="ad47f-422">Le filtre d’étendue détermine les objets Active Directory auxquels cette règle de synchronisation de trafic sortant s’applique.</span><span class="sxs-lookup"><span data-stu-id="ad47f-422">Scoping filter determines which Azure AD objects this outbound synchronization rule is applied to.</span></span> <span data-ttu-id="ad47f-423">Dans cet exemple, nous utilisons le filtre d’étendue de la règle de synchronisation OOB « Sortant vers AAD – Utilisateur Identity ».</span><span class="sxs-lookup"><span data-stu-id="ad47f-423">In this example, we use the same scoping filter from “Out to AD – User Identity” OOB synchronization rule.</span></span> <span data-ttu-id="ad47f-424">Il empêche que la règle de synchronisation soit appliquée aux objets utilisateur non synchronisés à partir de l’Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="ad47f-424">It prevents the synchronization rule from being applied to User objects which are not synchronized from on-premises Active Directory.</span></span> <span data-ttu-id="ad47f-425">Il se peut que vous deviez modifier le filtre d’étendue en fonction de votre déploiement Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="ad47f-425">You may need to tweak the scoping filter according to your Azure AD Connect deployment.</span></span>
    
6. <span data-ttu-id="ad47f-426">Accédez à l’onglet **Transformation**, puis implémentez la règle de transformation suivante :</span><span class="sxs-lookup"><span data-stu-id="ad47f-426">Go to the **Transformation** tab and implement the following transformation rule:</span></span>

    | <span data-ttu-id="ad47f-427">Type de flux</span><span class="sxs-lookup"><span data-stu-id="ad47f-427">Flow Type</span></span> | <span data-ttu-id="ad47f-428">Attribut cible</span><span class="sxs-lookup"><span data-stu-id="ad47f-428">Target Attribute</span></span> | <span data-ttu-id="ad47f-429">Source</span><span class="sxs-lookup"><span data-stu-id="ad47f-429">Source</span></span> | <span data-ttu-id="ad47f-430">Appliquer une seule fois</span><span class="sxs-lookup"><span data-stu-id="ad47f-430">Apply Once</span></span> | <span data-ttu-id="ad47f-431">Type de fusion</span><span class="sxs-lookup"><span data-stu-id="ad47f-431">Merge Type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="ad47f-432">Directement</span><span class="sxs-lookup"><span data-stu-id="ad47f-432">Direct</span></span> | <span data-ttu-id="ad47f-433">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="ad47f-433">PreferredDataLocation</span></span> | <span data-ttu-id="ad47f-434">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="ad47f-434">PreferredDataLocation</span></span> | <span data-ttu-id="ad47f-435">Désactivé</span><span class="sxs-lookup"><span data-stu-id="ad47f-435">Unchecked</span></span> | <span data-ttu-id="ad47f-436">Mettre à jour</span><span class="sxs-lookup"><span data-stu-id="ad47f-436">Update</span></span> |

7. <span data-ttu-id="ad47f-437">Fermez **Ajouter** pour créer la règle de trafic sortant.</span><span class="sxs-lookup"><span data-stu-id="ad47f-437">Close **Add** to create the outbound rule.</span></span>

![Créer une règle de synchronisation de trafic sortant](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step5.png)

### <a name="step-6-run-full-synchronization-cycle"></a><span data-ttu-id="ad47f-439">Étape 6 : exécuter un cycle de synchronisation complète</span><span class="sxs-lookup"><span data-stu-id="ad47f-439">Step 6: Run Full Synchronization cycle</span></span>
<span data-ttu-id="ad47f-440">En règle générale, un cycle de synchronisation complète est nécessaire parce que nous avons ajouté de nouveaux attributs à l’AD et au schéma du connecteur Azure AD, et introduit des règles de synchronisation personnalisées.</span><span class="sxs-lookup"><span data-stu-id="ad47f-440">In general, full synchronization cycle is required since we have added new attributes to both the AD and Azure AD Connector schema, and introduced custom synchronization rules.</span></span> <span data-ttu-id="ad47f-441">Il est recommandé de vérifier les modifications avant de les exporter vers Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-441">It is recommended that you verify the changes before exporting them to Azure AD.</span></span> <span data-ttu-id="ad47f-442">Vous pouvez procéder comme suit pour vérifier les modifications tandis que vous exécutez manuellement les étapes d’un cycle de synchronisation complète.</span><span class="sxs-lookup"><span data-stu-id="ad47f-442">You can use the following steps to verify the changes while manually running the steps that make up a full synchronization cycle.</span></span> 

1. <span data-ttu-id="ad47f-443">Exécutez l’étape d’**importation complète** sur le **Connecteur Active Directory local** :</span><span class="sxs-lookup"><span data-stu-id="ad47f-443">Run **Full import** step on the **on-premises AD Connector**:</span></span>

   1. <span data-ttu-id="ad47f-444">Accédez à l’onglet **Opérations** dans Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="ad47f-444">Go to the **Operations** tab in the Synchronization Service Manager.</span></span>

   2. <span data-ttu-id="ad47f-445">Cliquez avec le bouton droit sur le **Connecteur AD local**, puis sélectionnez **Exécuter...**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-445">Right-click on the **on-premises AD Connector** and select **Run...**</span></span>

   3. <span data-ttu-id="ad47f-446">Dans la boîte de dialogue contextuelle, sélectionnez **Importation complète**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-446">In the pop-up dialog, select **Full Import** and click **OK**.</span></span>
    
   4. <span data-ttu-id="ad47f-447">Attendez que l’opération soit terminée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-447">Wait for operation to complete.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ad47f-448">Vous pouvez ignorer l’importation complète sur le connecteur AD local si l’attribut source est déjà inclus dans la liste des attributs importés.</span><span class="sxs-lookup"><span data-stu-id="ad47f-448">You can skip Full Import on the on-premises AD Connector if the source attribute is already included in the list of imported attributes.</span></span> <span data-ttu-id="ad47f-449">En d’autres termes, vous n’avez pas dû apporter de modification au cours de l’[Étape 2  : ajouter l’attribut source au schéma du connecteur AD local](#step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema).</span><span class="sxs-lookup"><span data-stu-id="ad47f-449">In other words, you did not have to make any change during [Step 2: Add the source attribute to the on-premises AD Connector schema](#step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema).</span></span>

2. <span data-ttu-id="ad47f-450">Exécutez l’étape d’**importation complète** sur le **Connecteur Azure AD** :</span><span class="sxs-lookup"><span data-stu-id="ad47f-450">Run **Full import** step on the **Azure AD Connector**:</span></span>

   1. <span data-ttu-id="ad47f-451">Cliquez avec le bouton droit sur le **Connecteur Azure AD**, puis sélectionnez **Exécuter...**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-451">Right-click on the **Azure AD Connector** and select **Run...**</span></span>

   2. <span data-ttu-id="ad47f-452">Dans la boîte de dialogue contextuelle, sélectionnez **Importation complète**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-452">In the pop-up dialog, select **Full Import** and click **OK**.</span></span>
   
   3. <span data-ttu-id="ad47f-453">Attendez que l’opération soit terminée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-453">Wait for operation to complete.</span></span>

3. <span data-ttu-id="ad47f-454">Vérifiez le changement de la règle de synchronisation sur un objet utilisateur existant :</span><span class="sxs-lookup"><span data-stu-id="ad47f-454">Verify the synchronization rule changes on an existing User object:</span></span>

<span data-ttu-id="ad47f-455">L’attribut source de l’Active Directory local et l’attribut PreferredDataLocation d’Azure AD ont été importés dans leur espace de connecteur respectif.</span><span class="sxs-lookup"><span data-stu-id="ad47f-455">The source attribute from on-premises Active Directory and PreferredDataLocation from Azure AD have been imported into the respective Connecter Space.</span></span> <span data-ttu-id="ad47f-456">Avant de passer à l’étape de synchronisation complète, il est recommandé d’afficher un **Aperçu** d’un objet utilisateur existant dans l’espace du connecteur AD local.</span><span class="sxs-lookup"><span data-stu-id="ad47f-456">Before proceeding with Full Synchronization step, it is recommended that you do a **Preview** on an existing User object in the on-premises AD Connector Space.</span></span> <span data-ttu-id="ad47f-457">L’attribut source de l’objet que vous avez choisi doit avoir une valeur définie.</span><span class="sxs-lookup"><span data-stu-id="ad47f-457">The object you picked should have the source attribute populated.</span></span> <span data-ttu-id="ad47f-458">Un bon **Aperçu** avec l’attribut PreferredDataLocation renseigné dans le Metaverse est un bon indicateur que vous avez correctement configuré les règles de synchronisation.</span><span class="sxs-lookup"><span data-stu-id="ad47f-458">A successful **Preview** with the PreferredDataLocation populated in the Metaverse is a good indicator that you have configured the synchronization rules correctly.</span></span> <span data-ttu-id="ad47f-459">Pour plus d’informations sur la façon de générer un **Aperçu**, voir la section [Vérifier la modification](#verify-the-change).</span><span class="sxs-lookup"><span data-stu-id="ad47f-459">For information about how to do a **Preview**, refer to section [Verify the change](#verify-the-change).</span></span>

4. <span data-ttu-id="ad47f-460">Exécutez l’étape **Synchronisation complète** sur le **Connecteur AD local** :</span><span class="sxs-lookup"><span data-stu-id="ad47f-460">Run **Full Synchronization** step on the **on-premises AD Connector**:</span></span>

   1. <span data-ttu-id="ad47f-461">Cliquez avec le bouton droit sur le **Connecteur AD local**, puis sélectionnez **Exécuter...**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-461">Right-click on the **on-premises AD Connector** and select **Run...**</span></span>
  
   2. <span data-ttu-id="ad47f-462">Dans la boîte de dialogue contextuelle, sélectionnez **Synchronisation complète**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-462">In the pop-up dialog, select **Full Synchronization** and click **OK**.</span></span>
   
   3. <span data-ttu-id="ad47f-463">Attendez que l’opération soit terminée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-463">Wait for operation to complete.</span></span>

5. <span data-ttu-id="ad47f-464">Vérifiez les **Exportations en attente** vers Azure AD :</span><span class="sxs-lookup"><span data-stu-id="ad47f-464">Verify **Pending Exports** to Azure AD:</span></span>

   1. <span data-ttu-id="ad47f-465">Cliquez avec le bouton droit sur le **Connecteur Azure AD**, puis sélectionnez **Rechercher dans l’espace connecteur**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-465">Right-click on the **Azure AD Connector** and select **Search Connector Space**.</span></span>

   2. <span data-ttu-id="ad47f-466">Dans la fenêtre contextuelle Rechercher dans l’espace connecteur :</span><span class="sxs-lookup"><span data-stu-id="ad47f-466">In the Search Connector Space pop-up dialog:</span></span>

      1. <span data-ttu-id="ad47f-467">Définissez l’**Étendue** sur **En attente d’exportation**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-467">Set **Scope** to **Pending Export**.</span></span>
      
      2. <span data-ttu-id="ad47f-468">Activez les trois cases à cocher : **Ajouter, Modifier et Supprimer**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-468">Check all three checkboxes, including **Add, Modify, and Delete**.</span></span>
      
      3. <span data-ttu-id="ad47f-469">Cliquez sur le bouton **Rechercher** pour obtenir la liste d’objets contenant des modifications à exporter.</span><span class="sxs-lookup"><span data-stu-id="ad47f-469">Click the **Search** button to get the list of objects with changes to be exported.</span></span> <span data-ttu-id="ad47f-470">Pour examiner les modifications apportées à un objet donné, double-cliquez sur celui-ci.</span><span class="sxs-lookup"><span data-stu-id="ad47f-470">To examine the changes for a given object, double-click the object.</span></span>
      
      4. <span data-ttu-id="ad47f-471">Vérifiez que les modifications sont celles auxquelles vous vous attendiez.</span><span class="sxs-lookup"><span data-stu-id="ad47f-471">Verify the changes are expected.</span></span>

6. <span data-ttu-id="ad47f-472">Exécutez l’étape **Exporter** du **Connecteur Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-472">Run **Export** step on the **Azure AD Connector**</span></span>
      
   1. <span data-ttu-id="ad47f-473">Cliquez avec le bouton droit sur le **Connecteur Azure AD**, puis sélectionnez **Exécuter...**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-473">Right-click the **Azure AD Connector** and select **Run...**</span></span>
   
   2. <span data-ttu-id="ad47f-474">Dans la boîte de dialogue contextuelle Exécuter le connecteur, sélectionnez **Exporter**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="ad47f-474">In the Run Connector pop-up dialog, select **Export** and click **OK**.</span></span>
   
   3. <span data-ttu-id="ad47f-475">Patientez jusqu’à ce l’exportation vers Azure AD soit terminée.</span><span class="sxs-lookup"><span data-stu-id="ad47f-475">Wait for Export to Azure AD to complete.</span></span>

> [!NOTE]
> <span data-ttu-id="ad47f-476">Vous pouvez remarquer que les étapes n’incluent pas la synchronisation complète et l’exportation sur le connecteur Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-476">You may notice that the steps do not include the Full Synchronization step and Export step on the Azure AD Connector.</span></span> <span data-ttu-id="ad47f-477">Ces étapes ne sont pas obligatoires car les valeurs d’attribut sont transmises uniquement de l’Active Directory local à Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ad47f-477">The steps are not required since the attribute values are flowing from on-premises Active Directory to Azure AD only.</span></span>

### <a name="step-7-re-enable-sync-scheduler"></a><span data-ttu-id="ad47f-478">Étape 7 : réactiver le planificateur de synchronisation</span><span class="sxs-lookup"><span data-stu-id="ad47f-478">Step 7: Re-enable sync scheduler</span></span>
<span data-ttu-id="ad47f-479">Réactivez le planificateur de synchronisation intégré :</span><span class="sxs-lookup"><span data-stu-id="ad47f-479">Re-enable the built-in sync scheduler:</span></span>

1. <span data-ttu-id="ad47f-480">Lancez une session PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ad47f-480">Start PowerShell session.</span></span>

2. <span data-ttu-id="ad47f-481">Réactivez la synchronisation planifiée en exécutant l’applet de commande : `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="ad47f-481">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>



## <a name="next-steps"></a><span data-ttu-id="ad47f-482">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="ad47f-482">Next steps</span></span>
* <span data-ttu-id="ad47f-483">En savoir plus sur le modèle de configuration dans [Comprendre l’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="ad47f-483">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="ad47f-484">En savoir plus sur le langage d’expression dans [Comprendre les expressions d’approvisionnement déclaratif](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="ad47f-484">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>

<span data-ttu-id="ad47f-485">**Rubriques de présentation**</span><span class="sxs-lookup"><span data-stu-id="ad47f-485">**Overview topics**</span></span>

* [<span data-ttu-id="ad47f-486">Azure AD Connect Sync - Présentation et personnalisation des options de synchronisation</span><span class="sxs-lookup"><span data-stu-id="ad47f-486">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="ad47f-487">Intégration de vos identités locales avec Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ad47f-487">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
