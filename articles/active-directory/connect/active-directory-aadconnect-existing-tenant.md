---
title: "Azure AD Connect : lorsque vous avez déjà Azure AD | Microsoft Docs"
description: "Cette rubrique décrit comment toouse connecter lorsque vous avez un locataire Azure AD."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f7b166e9e85c1f03330e8e0074d4afa4036738c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a><span data-ttu-id="6f7d8-103">Azure AD Connect : lorsque vous avez un client existant</span><span class="sxs-lookup"><span data-stu-id="6f7d8-103">Azure AD Connect: When you have an existent tenant</span></span>
<span data-ttu-id="6f7d8-104">La plupart des rubriques hello pour comment toouse Azure AD Connect suppose que vous démarrez avec un nouveau Azure client AD et qu’il n’y a aucun utilisateur ou autres objets.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-104">Most of hello topics for how toouse Azure AD Connect assumes you start with a new Azure AD tenant and that there are no users or other objects there.</span></span> <span data-ttu-id="6f7d8-105">Mais si vous avez démarré avec un locataire Azure AD, rempli avec les utilisateurs et d’autres objets, il et voulez présent toouse se connecter, puis cette rubrique est pour vous.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-105">But if you have started with an Azure AD tenant, populated it with users and other objects, and now want toouse Connect, then this topic is for you.</span></span>

## <a name="hello-basics"></a><span data-ttu-id="6f7d8-106">principes de base Hello</span><span class="sxs-lookup"><span data-stu-id="6f7d8-106">hello basics</span></span>
<span data-ttu-id="6f7d8-107">Un objet dans Azure AD est masterisé soit dans le cloud hello (Azure AD) ou localement.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-107">An object in Azure AD is either mastered in hello cloud (Azure AD) or on-premises.</span></span> <span data-ttu-id="6f7d8-108">Pour un objet unique, vous ne pouvez pas gérer certains attributs en local et d’autres attributs dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-108">For one single object, you cannot manage some attributes on-premises and some other attributes in Azure AD.</span></span> <span data-ttu-id="6f7d8-109">Chaque objet a un indicateur qui indique où l’objet de hello est géré.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-109">Each object has a flag indicating where hello object is managed.</span></span>

<span data-ttu-id="6f7d8-110">Vous pouvez gérer des utilisateurs locaux et autres dans le cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-110">You can manage some users on-premises and other in hello cloud.</span></span> <span data-ttu-id="6f7d8-111">Un scénario courant pour cette configuration est une organisation qui regroupe des comptables et des commerciaux.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-111">A common scenario for this configuration is an organization with a mix of accounting workers and sales workers.</span></span> <span data-ttu-id="6f7d8-112">traitements comptables Hello ont un site local compte Active Directory, mais les threads de travail ventes hello ne le faites pas, ils disposent d’un compte dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-112">hello accounting workers have an on-premises AD account, but hello sales workers do not, they have an account in Azure AD.</span></span> <span data-ttu-id="6f7d8-113">Vous devez alors gérer certains utilisateurs en local et d’autres dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-113">You would manage some users on-premises and some in Azure AD.</span></span>

<span data-ttu-id="6f7d8-114">Si vous avez démarré toomanage utilisateurs dans Azure AD qui sont également dans AD local et décidez toouse se connecter, puis il existe des problèmes supplémentaires, que vous devez tooconsider.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-114">If you started toomanage users in Azure AD that are also in on-premises AD and later want toouse Connect, then there are some additional concerns you need tooconsider.</span></span>

## <a name="sync-with-existing-users-in-azure-ad"></a><span data-ttu-id="6f7d8-115">Synchroniser avec les utilisateurs existants dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="6f7d8-115">Sync with existing users in Azure AD</span></span>
<span data-ttu-id="6f7d8-116">Lorsque vous installez Azure AD Connect et démarrer la synchronisation, hello service de synchronisation Azure AD (dans Azure AD) effectue une vérification pour chaque nouvel objet et recommencez toofind un toomatch objet existant.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-116">When you install Azure AD Connect and you start synchronizing, hello Azure AD sync service (in Azure AD) does a check on every new object and try toofind an existing object toomatch.</span></span> <span data-ttu-id="6f7d8-117">Il existe trois attributs utilisés pour ce processus : **userPrincipalName**, **proxyAddresses** et **sourceAnchor**/**immutableID**.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-117">There are three attributes used for this process: **userPrincipalName**, **proxyAddresses**, and **sourceAnchor**/**immutableID**.</span></span> <span data-ttu-id="6f7d8-118">Une correspondance avec **userPrincipalName** et avec **proxyAddresses** est appelée une **correspondance souple**.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-118">A match on **userPrincipalName** and **proxyAddresses** is known as a **soft match**.</span></span> <span data-ttu-id="6f7d8-119">Une correspondance avec **sourceAnchor** est appelée une **correspondance exacte**.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-119">A match on **sourceAnchor** is known as **hard match**.</span></span> <span data-ttu-id="6f7d8-120">Pourquoi **proxyAddresses** uniquement hello valeur avec attribut **SMTP :**, qui est l’adresse de messagerie principale hello, qui est utilisé pour l’évaluation de hello.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-120">For hello **proxyAddresses** attribute only hello value with **SMTP:**, that is hello primary email address, is used for hello evaluation.</span></span>

<span data-ttu-id="6f7d8-121">correspondance de Hello est évaluée uniquement pour les nouveaux objets provenant de se connecter.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-121">hello match is only evaluated for new objects coming from Connect.</span></span> <span data-ttu-id="6f7d8-122">Si vous modifiez un objet existant afin qu’il corresponde à l’un de ces attributs, une erreur s’affiche à la place.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-122">If you change an exiting object so it is matching any of these attributes, then you see an error instead.</span></span>

<span data-ttu-id="6f7d8-123">Si AD Azure détecte un objet dans lequel les valeurs d’attribut hello sont hello même pour un objet provenant de se connecter et qui il est déjà présent dans Azure AD, puis hello objet dans Azure AD est prise en charge de la connexion.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-123">If Azure AD finds an object where hello attribute values are hello same for an object coming from Connect and that it is already present in Azure AD, then hello object in Azure AD is taken over by Connect.</span></span> <span data-ttu-id="6f7d8-124">Hello précédemment objet cloud géré est marqué comme géré sur site.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-124">hello previously cloud-managed object is flagged as on-premises managed.</span></span> <span data-ttu-id="6f7d8-125">Tous les attributs dans Azure AD avec une valeur locale Active Directory sont remplacées par valeur locale de hello.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-125">All attributes in Azure AD with a value in on-premises AD are overwritten with hello on-premises value.</span></span> <span data-ttu-id="6f7d8-126">exception de Hello est lorsqu’un attribut a un **NULL** valeur locale.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-126">hello exception is when an attribute has a **NULL** value on-premises.</span></span> <span data-ttu-id="6f7d8-127">Dans ce cas, valeur hello dans Azure AD reste, mais vous pouvez toujours uniquement la modifier toosomething local autre.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-127">In this case, hello value in Azure AD remains, but you can still only change it on-premises toosomething else.</span></span>

> [!WARNING]
> <span data-ttu-id="6f7d8-128">Étant donné que tous les attributs dans Azure AD apprêtez toobe remplacée par la valeur locale de hello, assurez-vous que vous disposez des données localement.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-128">Since all attributes in Azure AD are going toobe overwritten by hello on-premises value, make sure you have good data on-premises.</span></span> <span data-ttu-id="6f7d8-129">Par exemple, si vous avez uniquement une adresse e-mail gérée dans Office 365 et que vous ne l’avez pas conservée à jour dans AD DS en local, alors vous perdrez toutes les valeurs dans Azure AD/Office 365 qui ne figurent pas dans AD DS.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-129">For example, if you only have managed email address in Office 365 and not kept it updated in on-premises AD DS, then you lose any values in Azure AD/Office 365 not present in AD DS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6f7d8-130">Si vous utilisez la synchronisation de mot de passe, qui est toujours utilisée par les paramètres express, puis un mot de passe hello dans Azure AD est remplacé par un mot de passe hello locaux Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-130">If you use password sync, which is always used by express settings, then hello password in Azure AD is overwritten with hello password in on-premises AD.</span></span> <span data-ttu-id="6f7d8-131">Si vos utilisateurs sont utilisés toomanage différent des mots de passe, vous devez tooinform qu’ils doivent utiliser les hello mot de passe local lorsque vous avez installé la connexion.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-131">If your users are used toomanage different passwords, then you need tooinform them that they should use hello on-premises password when you have installed Connect.</span></span>

<span data-ttu-id="6f7d8-132">avertissement et la section précédente de hello en considération dans votre planification.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-132">hello previous section and warning must be considered in your planning.</span></span> <span data-ttu-id="6f7d8-133">Si vous avez apporté de nombreuses modifications dans Azure AD ne pas reflétée dans des locaux AD DS, vous devez tooplan comment toopopulate les services AD DS avec hello mise à jour de valeurs avant de synchroniser vos objets avec Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-133">If you have made many changes in Azure AD not reflected in on-premises AD DS, then you need tooplan for how toopopulate AD DS with hello updated values before you sync your objects with Azure AD Connect.</span></span>

<span data-ttu-id="6f7d8-134">Si vous vos objets avec une correspondance de soft de correspondance, puis hello **sourceAnchor** est ajouté en toohello objet dans Azure AD pour une correspondance exacte peut être utilisée ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-134">If you matched your objects with a soft-match, then hello **sourceAnchor** is added toohello object in Azure AD so a hard match can be used later.</span></span>

### <a name="hard-match-vs-soft-match"></a><span data-ttu-id="6f7d8-135">Correspondance exacte et correspondance souple</span><span class="sxs-lookup"><span data-stu-id="6f7d8-135">Hard-match vs Soft-match</span></span>
<span data-ttu-id="6f7d8-136">Pour une nouvelle installation de Connect, il n’existe aucune différence pratique entre une correspondance souple et une correspondance exacte.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-136">For a new installation of Connect, there is no practical difference between a soft- and a hard-match.</span></span> <span data-ttu-id="6f7d8-137">différence de Hello est dans une situation de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-137">hello difference is in a disaster recovery situation.</span></span> <span data-ttu-id="6f7d8-138">Si votre serveur avec Azure AD Connect a connu une défaillance, vous pouvez réinstaller une nouvelle instance sans perdre de données.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-138">If you have lost your server with Azure AD Connect, you can reinstall a new instance without losing any data.</span></span> <span data-ttu-id="6f7d8-139">Un objet avec une ancre source est envoyé tooConnect lors de l’installation initiale.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-139">An object with a sourceAnchor is sent tooConnect during initial install.</span></span> <span data-ttu-id="6f7d8-140">Hello correspondance peut être évaluée par client hello (Azure AD Connect), qui est beaucoup plus rapide que cette opération même hello dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-140">hello match can then be evaluated by hello client (Azure AD Connect), which is a lot faster than doing hello same in Azure AD.</span></span> <span data-ttu-id="6f7d8-141">Une correspondance exacte est évaluée à la fois par Connect et par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-141">A hard match is evaluated both by Connect and by Azure AD.</span></span> <span data-ttu-id="6f7d8-142">Une correspondance souple n’est évaluée que par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-142">A soft match is only evaluated by Azure AD.</span></span>

### <a name="other-objects-than-users"></a><span data-ttu-id="6f7d8-143">Objets autres que des utilisateurs</span><span class="sxs-lookup"><span data-stu-id="6f7d8-143">Other objects than users</span></span>
<span data-ttu-id="6f7d8-144">Les utilisateurs ont généralement userPrincipalName et proxyAddresses, ce qui facilite la correspondance de hello.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-144">Users usually have both userPrincipalName and proxyAddresses, making hello match easy.</span></span> <span data-ttu-id="6f7d8-145">Mais les autres objets, tels que les groupes de sécurité, n’ont pas ces attributs.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-145">But other objects, such as security groups, do not have those.</span></span> <span data-ttu-id="6f7d8-146">Dans ce cas, vous pouvez uniquement en correspondance sur une correspondance exacte à l’aide de hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-146">In this case, you can only match on a hard match using hello sourceAnchor.</span></span> <span data-ttu-id="6f7d8-147">Hello sourceAnchor est toujours hello Base64 converti **objectGUID** localement, donc vous devez mettre à jour la valeur de hello dans Azure AD lorsque vous avez besoin de deux objets toomatch.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-147">hello sourceAnchor is always hello Base64 converted **objectGUID** on-premises, so you must update hello value in Azure AD when you need two objects toomatch.</span></span> <span data-ttu-id="6f7d8-148">Hello sourceAnchor/immutableID peuvent uniquement être mis à jour avec PowerShell et non par le biais des portails de hello.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-148">hello sourceAnchor/immutableID can only be updated with PowerShell and not through hello portals.</span></span>

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a><span data-ttu-id="6f7d8-149">Créer un nouveau répertoire Active Directory local à partir des données dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="6f7d8-149">Create a new on-premises Active Directory from data in Azure AD</span></span>
<span data-ttu-id="6f7d8-150">Certains clients démarrent avec une solution cloud uniquement avec Azure AD et ils ne disposent pas d’un répertoire AD local.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-150">Some customers start with a cloud-only solution with Azure AD and they do not have an on-premises AD.</span></span> <span data-ttu-id="6f7d8-151">Plus tard ils tooconsume des ressources locales et toobuild locale Active Directory en fonction des données d’Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-151">Later they want tooconsume on-premises resources and want toobuild an on-premises AD based on Azure AD data.</span></span> <span data-ttu-id="6f7d8-152">Azure AD Connect ne peut pas vous aider dans ce scénario.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-152">Azure AD Connect cannot help you for this scenario.</span></span> <span data-ttu-id="6f7d8-153">Il ne crée pas les utilisateurs locaux et il n’a pas de n’importe quel toohello de capacité tooset hello mot de passe local même comme dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-153">It does not create users on-premises and it does not have any ability tooset hello password on-premises toohello same as in Azure AD.</span></span>

<span data-ttu-id="6f7d8-154">Si la seule raison pour laquelle hello raison pour laquelle vous envisagez de tooadd local AD est toosupport LOB (Line-of-Business Applications), peut-être que vous devez envisager toouse [les services de domaine Active Directory Azure](../../active-directory-domain-services/index.md) à la place.</span><span class="sxs-lookup"><span data-stu-id="6f7d8-154">If hello only reason why you plan tooadd on-premises AD is toosupport LOBs (Line-of-Business apps), then maybe you should consider toouse [Azure AD domain services](../../active-directory-domain-services/index.md) instead.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6f7d8-155">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="6f7d8-155">Next steps</span></span>
<span data-ttu-id="6f7d8-156">En savoir plus sur l’ [intégration de vos identités locales avec Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="6f7d8-156">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
