---
title: "Azure AD Connect : principes de conception | Microsoft Docs"
description: "Cette rubrique détaille certains aspects de la conception de l’implémentation"
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1e5d5c6a716ca653fb14fc059e8155124b433732
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="b155d-103">Principes de conception Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="b155d-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="b155d-104">Hello cette rubrique vise Zones toodescribe qui doivent être envisagés au cours de la conception de l’implémentation hello d’Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b155d-104">hello purpose of this topic is toodescribe areas that must be thought through during hello implementation design of Azure AD Connect.</span></span> <span data-ttu-id="b155d-105">Il s’agit d’une exploration approfondie de certains aspects. Ces concepts sont également décrits brièvement dans d’autres rubriques.</span><span class="sxs-lookup"><span data-stu-id="b155d-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="b155d-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="b155d-106">sourceAnchor</span></span>
<span data-ttu-id="b155d-107">attribut de sourceAnchor Hello est défini en tant que *un attribut immuable pendant la durée de vie hello d’un objet*.</span><span class="sxs-lookup"><span data-stu-id="b155d-107">hello sourceAnchor attribute is defined as *an attribute immutable during hello lifetime of an object*.</span></span> <span data-ttu-id="b155d-108">Il identifie de façon unique un objet comme étant hello même objet localement et dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-108">It uniquely identifies an object as being hello same object on-premises and in Azure AD.</span></span> <span data-ttu-id="b155d-109">attribut de Hello est également appelé **immutableId** et les noms de hello deux sont utilisés interchangeables.</span><span class="sxs-lookup"><span data-stu-id="b155d-109">hello attribute is also called **immutableId** and hello two names are used interchangeable.</span></span>

<span data-ttu-id="b155d-110">word de Hello immuable, qui est « ne peut pas être modifiée », est important toothis rubrique.</span><span class="sxs-lookup"><span data-stu-id="b155d-110">hello word immutable, that is "cannot be changed", is important toothis topic.</span></span> <span data-ttu-id="b155d-111">Étant donné que la valeur de cet attribut ne peut pas être modifiée une fois qu’elle a été définie, il est important toopick une conception qui prend en charge votre scénario.</span><span class="sxs-lookup"><span data-stu-id="b155d-111">Since this attribute’s value cannot be changed after it has been set, it is important toopick a design that supports your scenario.</span></span>

<span data-ttu-id="b155d-112">attribut de Hello est utilisé pour hello les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="b155d-112">hello attribute is used for hello following scenarios:</span></span>

* <span data-ttu-id="b155d-113">Quand un nouveau serveur de moteur de synchronisation est créé ou recréé après un scénario de récupération d’urgence, cet attribut lie les objets existants dans Azure AD à des objets locaux.</span><span class="sxs-lookup"><span data-stu-id="b155d-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="b155d-114">Si vous passez d’un modèle d’identité synchronisé de tooa identité cloud uniquement, cet attribut permet aux objets « correspondance permanente » des objets existants dans Azure AD avec des objets locaux.</span><span class="sxs-lookup"><span data-stu-id="b155d-114">If you move from a cloud-only identity tooa synchronized identity model, then this attribute allows objects too"hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="b155d-115">Si vous utilisez la fédération, cet attribut avec hello **userPrincipalName** est utilisé dans hello revendication toouniquely identifier un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b155d-115">If you use federation, then this attribute together with hello **userPrincipalName** is used in hello claim toouniquely identify a user.</span></span>

<span data-ttu-id="b155d-116">Cette rubrique aborde uniquement sourceAnchor en matière de toousers.</span><span class="sxs-lookup"><span data-stu-id="b155d-116">This topic only talks about sourceAnchor as it relates toousers.</span></span> <span data-ttu-id="b155d-117">Hello mêmes règles s’appliquent tooall les types d’objets, mais il est uniquement pour les utilisateurs que ce problème est généralement un problème.</span><span class="sxs-lookup"><span data-stu-id="b155d-117">hello same rules apply tooall object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="b155d-118">Sélection d’un attribut sourceAnchor approprié</span><span class="sxs-lookup"><span data-stu-id="b155d-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="b155d-119">valeur d’attribut Hello doit suivre hello suivant les règles :</span><span class="sxs-lookup"><span data-stu-id="b155d-119">hello attribute value must follow hello following rules:</span></span>

* <span data-ttu-id="b155d-120">sa longueur doit être inférieure à 60 caractères</span><span class="sxs-lookup"><span data-stu-id="b155d-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="b155d-121">les caractères autres que a-z, A-Z ou 0-9 sont codés et comptabilisés comme 3 caractères</span><span class="sxs-lookup"><span data-stu-id="b155d-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="b155d-122">elle ne doit pas contenir les caractères spéciaux suivants : &#92; !</span><span class="sxs-lookup"><span data-stu-id="b155d-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="b155d-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="b155d-123"># $ % & * + / = ?</span></span> <span data-ttu-id="b155d-124">^ &#96; { } | ~ < > ( ) ’ ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="b155d-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="b155d-125">elle doit être globalement unique</span><span class="sxs-lookup"><span data-stu-id="b155d-125">Must be globally unique</span></span>
* <span data-ttu-id="b155d-126">elle doit être une chaîne, un entier ou une valeur binaire</span><span class="sxs-lookup"><span data-stu-id="b155d-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="b155d-127">elle ne doit pas être basée sur le nom de l’utilisateur, celui-ci est susceptible de changer</span><span class="sxs-lookup"><span data-stu-id="b155d-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="b155d-128">elle ne doit pas respecter la casse et doit éviter les valeurs qui peuvent varier selon la casse</span><span class="sxs-lookup"><span data-stu-id="b155d-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="b155d-129">Doit être attribué lors de la création d’objet de hello</span><span class="sxs-lookup"><span data-stu-id="b155d-129">Should be assigned when hello object is created</span></span>

<span data-ttu-id="b155d-130">Si hello sélectionné sourceAnchor n’est pas de type chaîne, puis apparaissent de Base64Encode de connexion AD Azure hello attribut valeur tooensure sans caractères spéciaux.</span><span class="sxs-lookup"><span data-stu-id="b155d-130">If hello selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode hello attribute value tooensure no special characters appear.</span></span> <span data-ttu-id="b155d-131">Si vous utilisez un autre serveur de fédération à ADFS, assurez-vous que votre serveur peut également attribut de hello Base64Encode.</span><span class="sxs-lookup"><span data-stu-id="b155d-131">If you use another federation server than ADFS, make sure your server can also Base64Encode hello attribute.</span></span>

<span data-ttu-id="b155d-132">attribut de sourceAnchor Hello respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="b155d-132">hello sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="b155d-133">La valeur « Durand » n’est pas hello identique à « Durand ».</span><span class="sxs-lookup"><span data-stu-id="b155d-133">A value of “JohnDoe” is not hello same as “johndoe”.</span></span> <span data-ttu-id="b155d-134">Mais vous ne devez pas avoir deux objets différents avec uniquement une différence de casse.</span><span class="sxs-lookup"><span data-stu-id="b155d-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="b155d-135">Si vous avez une seule forêt locale, puis attribut hello vous devez utiliser est **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="b155d-135">If you have a single forest on-premises, then hello attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="b155d-136">Il s’agit également hello attribut utilisé lorsque vous utilisez les paramètres express dans Azure AD Connect et également hello attribut utilisé par la synchronisation d’annuaire.</span><span class="sxs-lookup"><span data-stu-id="b155d-136">This is also hello attribute used when you use express settings in Azure AD Connect and also hello attribute used by DirSync.</span></span>

<span data-ttu-id="b155d-137">Si vous avez plusieurs forêts et que vous ne déplacez pas les utilisateurs entre les forêts et domaines, puis **objectGUID** est un toouse bon attribut même dans ce cas.</span><span class="sxs-lookup"><span data-stu-id="b155d-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute toouse even in this case.</span></span>

<span data-ttu-id="b155d-138">Si vous déplacez des utilisateurs entre les forêts et domaines, vous devez trouver un attribut qui ne change pas, ou peut être déplacé avec les utilisateurs de hello pendant le déplacement de hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with hello users during hello move.</span></span> <span data-ttu-id="b155d-139">Une approche recommandée est toointroduce un attribut synthétique.</span><span class="sxs-lookup"><span data-stu-id="b155d-139">A recommended approach is toointroduce a synthetic attribute.</span></span> <span data-ttu-id="b155d-140">Un attribut qui peut contenir quelque chose qui ressemble à un GUID serait approprié.</span><span class="sxs-lookup"><span data-stu-id="b155d-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="b155d-141">Lors de la création d’objet, un nouveau GUID est créé et affecté à un utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-141">During object creation, a new GUID is created and stamped on hello user.</span></span> <span data-ttu-id="b155d-142">Une règle de synchronisation personnalisés peut être créée dans toocreate de serveur de moteur de synchronisation hello cette valeur en fonction de hello **objectGUID** et mise à jour hello attribut sélectionné dans AD DS.</span><span class="sxs-lookup"><span data-stu-id="b155d-142">A custom sync rule can be created in hello sync engine server toocreate this value based on hello **objectGUID** and update hello selected attribute in ADDS.</span></span> <span data-ttu-id="b155d-143">Lorsque vous déplacez les objets hello, assurez-vous que tooalso copier le contenu de cette valeur hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-143">When you move hello object, make sure tooalso copy hello content of this value.</span></span>

<span data-ttu-id="b155d-144">Une autre solution consiste à toopick un attribut existant, vous savez ne changent pas.</span><span class="sxs-lookup"><span data-stu-id="b155d-144">Another solution is toopick an existing attribute you know does not change.</span></span> <span data-ttu-id="b155d-145">**employeeID**est un des attributs couramment utilisés.</span><span class="sxs-lookup"><span data-stu-id="b155d-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="b155d-146">Si vous envisagez d’un attribut qui contient des lettres, assurez-vous qu’il y a qu'aucun cas de hello chance (majuscules ou minuscules) ne peut changer pour la valeur de l’attribut hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-146">If you consider an attribute that contains letters, make sure there is no chance hello case (upper case vs. lower case) can change for hello attribute's value.</span></span> <span data-ttu-id="b155d-147">Les attributs incorrects qui ne doivent pas être utilisés sont ces attributs avec nom hello d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-147">Bad attributes that should not be used include those attributes with hello name of hello user.</span></span> <span data-ttu-id="b155d-148">Dans un mariage et divorce hello est toochange attendu, ce qui n’est pas autorisée pour cet attribut.</span><span class="sxs-lookup"><span data-stu-id="b155d-148">In a marriage or divorce, hello name is expected toochange, which is not allowed for this attribute.</span></span> <span data-ttu-id="b155d-149">C’est également une raison pour laquelle des attributs tels que **userPrincipalName**, **mail**, et **targetAddress** ne sont pas tooselect même possible dans l’installation de se connecter hello Azure AD Assistant.</span><span class="sxs-lookup"><span data-stu-id="b155d-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible tooselect in hello Azure AD Connect installation wizard.</span></span> <span data-ttu-id="b155d-150">Ces attributs contiennent également hello « @ » caractères, ce qui n’est pas autorisée dans hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b155d-150">Those attributes also contain hello "@" character, which is not allowed in hello sourceAnchor.</span></span>

### <a name="changing-hello-sourceanchor-attribute"></a><span data-ttu-id="b155d-151">Modification d’attribut sourceAnchor hello</span><span class="sxs-lookup"><span data-stu-id="b155d-151">Changing hello sourceAnchor attribute</span></span>
<span data-ttu-id="b155d-152">valeur de l’attribut sourceAnchor Hello ne peut pas être modifiée après la création de l’objet hello dans Azure AD et l’identité de hello est synchronisée.</span><span class="sxs-lookup"><span data-stu-id="b155d-152">hello sourceAnchor attribute value cannot be changed after hello object has been created in Azure AD and hello identity is synchronized.</span></span>

<span data-ttu-id="b155d-153">Pour cette raison, hello suivant des restrictions s’appliquent tooAzure AD Connect :</span><span class="sxs-lookup"><span data-stu-id="b155d-153">For this reason, hello following restrictions apply tooAzure AD Connect:</span></span>

* <span data-ttu-id="b155d-154">Hello sourceAnchor attribut peut uniquement être défini lors de l’installation initiale.</span><span class="sxs-lookup"><span data-stu-id="b155d-154">hello sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="b155d-155">Si vous réexécutez l’Assistant installation Bonjour, cette option est en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="b155d-155">If you rerun hello installation wizard, this option is read-only.</span></span> <span data-ttu-id="b155d-156">Si vous devez toochange ce paramètre, vous devez désinstaller et réinstaller.</span><span class="sxs-lookup"><span data-stu-id="b155d-156">If you need toochange this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="b155d-157">Si vous installez un autre serveur d’Azure AD Connect, puis vous devez sélectionnez hello même attribut sourceAnchor précédemment utilisé.</span><span class="sxs-lookup"><span data-stu-id="b155d-157">If you install another Azure AD Connect server, then you must select hello same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="b155d-158">Si vous avez précédemment été à l’aide de DirSync et déplacer tooAzure AD vous connecter, vous devez utiliser **objectGUID** car il s’agit d’attribut hello utilisé par la synchronisation d’annuaire.</span><span class="sxs-lookup"><span data-stu-id="b155d-158">If you have earlier been using DirSync and move tooAzure AD Connect, then you must use **objectGUID** since that is hello attribute used by DirSync.</span></span>
* <span data-ttu-id="b155d-159">Si la valeur hello sourceAnchor est modifiée une fois l’objet de hello a été exporté tooAzure AD, puis Azure AD Connect synchronisation génère une erreur et n’autorise pas plus de modifications sur cet objet avant de hello problème a été résolu et hello sourceAnchor est modifié en hello répertoire source.</span><span class="sxs-lookup"><span data-stu-id="b155d-159">If hello value for sourceAnchor is changed after hello object has been exported tooAzure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before hello issue has been fixed and hello sourceAnchor is changed back in hello source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="b155d-160">Utilisation de msDS-ConsistencyGuid en tant que sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="b155d-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="b155d-161">Par défaut, Azure AD Connect (version 1.1.486.0 et antérieures) utilise objectGUID comme attribut de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as hello sourceAnchor attribute.</span></span> <span data-ttu-id="b155d-162">ObjectGUID est généré par le système.</span><span class="sxs-lookup"><span data-stu-id="b155d-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="b155d-163">Vous ne pouvez pas spécifier sa valeur lors de la création d’objets Active Directory locaux.</span><span class="sxs-lookup"><span data-stu-id="b155d-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="b155d-164">Comme expliqué dans la section [sourceAnchor](#sourceanchor), il existe des scénarios où vous avez besoin de la valeur sourceAnchor toospecify hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need toospecify hello sourceAnchor value.</span></span> <span data-ttu-id="b155d-165">Si les scénarios de hello sont tooyou applicable, vous devez utiliser un attribut AD configurable (par exemple, msDS-ConsistencyGuid) en tant qu’attribut de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-165">If hello scenarios are applicable tooyou, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as hello sourceAnchor attribute.</span></span>

<span data-ttu-id="b155d-166">Azure AD Connect (version 1.1.524.0 et après) autorise l’utiliser hello msDS-ConsistencyGuid comme attribut sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="b155d-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates hello use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="b155d-167">Lorsque vous utilisez cette fonctionnalité, Azure AD Connect configure automatiquement les règles de synchronisation hello pour :</span><span class="sxs-lookup"><span data-stu-id="b155d-167">When using this feature, Azure AD Connect automatically configures hello synchronization rules to:</span></span>

1. <span data-ttu-id="b155d-168">Utilisez msDS-ConsistencyGuid en tant qu’attribut de sourceAnchor hello pour les objets utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b155d-168">Use msDS-ConsistencyGuid as hello sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="b155d-169">ObjectGUID est utilisé pour d’autres types d’objets.</span><span class="sxs-lookup"><span data-stu-id="b155d-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="b155d-170">Pour toute donnée local utilisateur AD objet dont l’attribut msDS-ConsistencyGuid n’est pas rempli, Azure AD Connect écrit son attribut msDS-ConsistencyGuid d’objectGUID valeur toohello différé dans Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="b155d-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="b155d-171">Une fois que l’attribut msDS-ConsistencyGuid de hello est rempli, Azure AD Connect exporte ensuite hello objet tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-171">After hello msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports hello object tooAzure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="b155d-172">Une fois un local objet Active Directory est importé dans Azure AD Connect (c'est-à-dire, importé dans hello espace de connecteur Active Directory et projeté dans hello métaverse), vous ne pouvez pas modifier sa valeur sourceAnchor plus.</span><span class="sxs-lookup"><span data-stu-id="b155d-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into hello AD Connector Space and projected into hello Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="b155d-173">la valeur sourceAnchor toospecify hello pour une fonction local AD d’objet, de configurer son attribut msDS-ConsistencyGuid avant leur importation dans Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b155d-173">toospecify hello sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="b155d-174">Autorisation requise</span><span class="sxs-lookup"><span data-stu-id="b155d-174">Permission required</span></span>
<span data-ttu-id="b155d-175">Pour cette fonctionnalité toowork, hello AD DS compte utilisé toosynchronize avec Active Directory local doit être accordé écriture autorisation toohello msDS-ConsistencyGuid attribut dans Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="b155d-175">For this feature toowork, hello AD DS account used toosynchronize with on-premises Active Directory must be granted write permission toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature---new-installation"></a><span data-ttu-id="b155d-176">Comment tooenable hello ConsistencyGuid fonctionnalité - nouvelle installation</span><span class="sxs-lookup"><span data-stu-id="b155d-176">How tooenable hello ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="b155d-177">Vous pouvez activer utiliser hello ConsistencyGuid comme sourceAnchor lors de l’installation de nouveau.</span><span class="sxs-lookup"><span data-stu-id="b155d-177">You can enable hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="b155d-178">Cette section décrit en détail l’installation rapide et l’installation personnalisée.</span><span class="sxs-lookup"><span data-stu-id="b155d-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="b155d-179">Seules les versions plus récentes d’Azure AD Connect (1.1.524.0 et après) prend en charge hello utiliser ConsistencyGuid comme sourceAnchor lors de l’installation de nouveau.</span><span class="sxs-lookup"><span data-stu-id="b155d-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature"></a><span data-ttu-id="b155d-180">Comment tooenable hello ConsistencyGuid fonctionnalité</span><span class="sxs-lookup"><span data-stu-id="b155d-180">How tooenable hello ConsistencyGuid feature</span></span>
<span data-ttu-id="b155d-181">Actuellement, hello fonctionnalité peut uniquement être activée au cours de la nouvelle installation de Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b155d-181">Currently, hello feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="b155d-182">Installation rapide</span><span class="sxs-lookup"><span data-stu-id="b155d-182">Express Installation</span></span>
<span data-ttu-id="b155d-183">Lorsque vous installez Azure AD Connect avec le mode Express, Assistant d’Azure AD Connect hello détermine automatiquement toouse d’attribut hello publicité la plus appropriée en tant qu’attribut de sourceAnchor hello hello suivant logique à l’aide de :</span><span class="sxs-lookup"><span data-stu-id="b155d-183">When installing Azure AD Connect with Express mode, hello Azure AD Connect wizard automatically determines hello most appropriate AD attribute toouse as hello sourceAnchor attribute using hello following logic:</span></span>

* <span data-ttu-id="b155d-184">Tout d’abord, hello Azure AD Connect Assistant requêtes que votre attribut de hello AD Azure AD client tooretrieve utilisé comme hello attribut sourceAnchor dans l’installation de se connecter hello précédente Azure AD (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="b155d-184">First, hello Azure AD Connect wizard queries your Azure AD tenant tooretrieve hello AD attribute used as hello sourceAnchor attribute in hello previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="b155d-185">Si ces informations sont disponibles, Azure AD Connect utilise un attribut hello même AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-185">If this information is available, Azure AD Connect uses hello same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="b155d-186">Seules les versions plus récentes d’Azure AD Connect (1.1.524.0 et après) stocke des informations dans votre locataire Azure AD sur l’attribut sourceAnchor de hello utilisé durant l’installation.</span><span class="sxs-lookup"><span data-stu-id="b155d-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about hello sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="b155d-187">Les versions antérieures d’Azure AD Connect ne le font pas.</span><span class="sxs-lookup"><span data-stu-id="b155d-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="b155d-188">Si plus d’informations sur l’attribut sourceAnchor de hello utilisé n’est pas disponibles, Assistant de hello vérifie état hello de l’attribut msDS-ConsistencyGuid de hello dans votre annuaire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="b155d-188">If information about hello sourceAnchor attribute used isn't available, hello wizard checks hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="b155d-189">Si l’attribut de hello n’est pas configurée sur n’importe quel objet dans le répertoire de hello, Assistant de hello utilise hello msDS-ConsistencyGuid en tant qu’attribut de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-189">If hello attribute isn't configured on any object in hello directory, hello wizard uses hello msDS-ConsistencyGuid as hello sourceAnchor attribute.</span></span> <span data-ttu-id="b155d-190">Si l’attribut de hello est configuré sur un ou plusieurs objets dans le répertoire de hello, hello fermeture de l’Assistant attribut de hello est utilisé par d’autres applications et n’est pas approprié en tant qu’attribut sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="b155d-190">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="b155d-191">Dans ce cas, Assistant de hello revient toousing objectGUID comme attribut de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-191">In which case, hello wizard falls back toousing objectGUID as hello sourceAnchor attribute.</span></span>

* <span data-ttu-id="b155d-192">Une fois que l’attribut sourceAnchor de hello est décidé, Assistant de hello stocke les informations de hello dans votre locataire Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-192">Once hello sourceAnchor attribute is decided, hello wizard stores hello information in your Azure AD tenant.</span></span> <span data-ttu-id="b155d-193">informations de Hello seront utilisées par une installation ultérieure d’Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="b155d-193">hello information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="b155d-194">Une fois l’installation d’Express terminée, Assistant de hello vous informe de l’attribut a été sélectionnée en tant qu’attribut d’ancre Source hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-194">Once Express installation completes, hello wizard informs you which attribute has been picked as hello Source Anchor attribute.</span></span>

![L’Assistant informe concernant attribut AD choisi pour sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="b155d-196">Installation personnalisée</span><span class="sxs-lookup"><span data-stu-id="b155d-196">Custom installation</span></span>
<span data-ttu-id="b155d-197">Lorsque vous installez Azure AD Connect avec le mode personnalisé, Assistant d’Azure AD Connect hello fournit deux options lors de la configuration d’attribut sourceAnchor :</span><span class="sxs-lookup"><span data-stu-id="b155d-197">When installing Azure AD Connect with Custom mode, hello Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Installation personnalisée - Configuration de sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="b155d-199">Paramètre</span><span class="sxs-lookup"><span data-stu-id="b155d-199">Setting</span></span> | <span data-ttu-id="b155d-200">Description</span><span class="sxs-lookup"><span data-stu-id="b155d-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="b155d-201">Laisser Azure gérer ancre source de hello pour moi</span><span class="sxs-lookup"><span data-stu-id="b155d-201">Let Azure manage hello source anchor for me</span></span> | <span data-ttu-id="b155d-202">Sélectionnez cette option si vous souhaitez que les attributs de hello toopick Azure AD pour vous.</span><span class="sxs-lookup"><span data-stu-id="b155d-202">Select this option if you want Azure AD toopick hello attribute for you.</span></span> <span data-ttu-id="b155d-203">Si vous sélectionnez cette option, Azure AD Connect, l’Assistant applique hello même [logique de sélection d’attribut sourceAnchor utilisée lors de l’installation d’Express](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="b155d-203">If you select this option, Azure AD Connect wizard applies hello same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="b155d-204">Installation de tooExpress similaire, hello Assistant vous informe l’attribut a été sélectionnée comme hello attribut d’ancre Source après la fin de l’installation personnalisée.</span><span class="sxs-lookup"><span data-stu-id="b155d-204">Similar tooExpress installation, hello wizard informs you which attribute has been picked as hello Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="b155d-205">Un attribut spécifique</span><span class="sxs-lookup"><span data-stu-id="b155d-205">A specific attribute</span></span> | <span data-ttu-id="b155d-206">Sélectionnez cette option si vous le souhaitez toospecify un attribut Active Directory existant en tant qu’attribut de sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-206">Select this option if you wish toospecify an existing AD attribute as hello sourceAnchor attribute.</span></span> |

### <a name="how-tooenable-hello-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="b155d-207">Comment tooenable hello ConsistencyGuid - fonctionnalité de déploiement existant</span><span class="sxs-lookup"><span data-stu-id="b155d-207">How tooenable hello ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="b155d-208">Si vous avez un déploiement d’Azure AD Connect existant qui utilise en tant qu’attribut d’ancre Source hello objectGUID, vous pouvez activer cette toousing ConsistencyGuid à la place.</span><span class="sxs-lookup"><span data-stu-id="b155d-208">If you have an existing Azure AD Connect deployment which is using objectGUID as hello Source Anchor attribute, you can switch it toousing ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="b155d-209">Seules les versions plus récentes d’Azure AD Connect (1.1.552.0 et après) prend en charge le basculement à partir de tooConsistencyGuid ObjectGuid en tant qu’attribut d’ancre Source hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid tooConsistencyGuid as hello Source Anchor attribute.</span></span>

<span data-ttu-id="b155d-210">tooswitch de tooConsistencyGuid objectGUID en tant qu’attribut d’ancre Source hello :</span><span class="sxs-lookup"><span data-stu-id="b155d-210">tooswitch from objectGUID tooConsistencyGuid as hello Source Anchor attribute:</span></span>

1. <span data-ttu-id="b155d-211">Démarrez l’Assistant de connexion hello Azure AD et cliquez sur **configurer** écran de tâches toogo toohello.</span><span class="sxs-lookup"><span data-stu-id="b155d-211">Start hello Azure AD Connect wizard and click **Configure** toogo toohello Tasks screen.</span></span>

2. <span data-ttu-id="b155d-212">Sélectionnez hello **configurer l’ancre Source** option de tâches et cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="b155d-212">Select hello **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Activer ConsistencyGuid pour un déploiement existant - Étape 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="b155d-214">Entrez vos informations d’identification d’administrateur Azure AD et cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="b155d-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="b155d-215">Assistant Azure AD Connect analyse état hello de l’attribut msDS-ConsistencyGuid de hello dans votre annuaire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="b155d-215">Azure AD Connect wizard analyzes hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="b155d-216">Si l’attribut de hello n’est pas configurée sur n’importe quel objet Bonjour que répertoire, Azure AD Connect conclut qu’aucune autre application utilise actuellement les attributs hello et qu’il est sécurisé toouse elle en tant qu’attribut d’ancre Source hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-216">If hello attribute isn't configured on any object in hello directory, Azure AD Connect concludes that no other application is currently using hello attribute and is safe toouse it as hello Source Anchor attribute.</span></span> <span data-ttu-id="b155d-217">Cliquez sur **suivant** toocontinue.</span><span class="sxs-lookup"><span data-stu-id="b155d-217">Click **Next** toocontinue.</span></span>

   ![Activer ConsistencyGuid pour un déploiement existant - Étape 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="b155d-219">Bonjour **tooConfigure prêt** , cliquez sur **configurer** modification de la configuration toomake hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-219">In hello **Ready tooConfigure** screen, click **Configure** toomake hello configuration change.</span></span>

   ![Activer ConsistencyGuid pour un déploiement existant - Étape 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="b155d-221">Une fois que la fin de la configuration de hello, Assistant de hello indique que msDS-ConsistencyGuid est maintenant utilisé en tant qu’attribut d’ancre Source hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-221">Once hello configuration completes, hello wizard indicates that msDS-ConsistencyGuid is now being used as hello Source Anchor attribute.</span></span>

   ![Activer ConsistencyGuid pour un déploiement existant - Étape 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="b155d-223">Lors de l’analyse de hello (étape 4), si l’attribut de hello est configuré sur un ou plusieurs objets dans le répertoire de hello, hello fermeture de l’Assistant attribut de hello est utilisé par une autre application et renvoie une erreur, comme illustré dans le diagramme hello ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b155d-223">During hello analysis (step 4), if hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by another application and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="b155d-224">Si vous êtes certain que cet attribut hello n’est pas utilisé par les applications existantes, vous devez toocontact prise en charge pour plus d’informations sur la façon dont toosuppress hello erreur.</span><span class="sxs-lookup"><span data-stu-id="b155d-224">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Activer ConsistencyGuid pour un déploiement existant - Erreur](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="b155d-226">Impact sur AD FS d’une configuration de fédération tierce</span><span class="sxs-lookup"><span data-stu-id="b155d-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="b155d-227">Si vous utilisez Azure AD Connect toomanage local déploiement AD FS, hello Azure AD Connect met automatiquement à jour l’attribut hello même AD toouse des règles de revendication de hello comme ancre source.</span><span class="sxs-lookup"><span data-stu-id="b155d-227">If you are using Azure AD Connect toomanage on-premises AD FS deployment, hello Azure AD Connect automatically updates hello claim rules toouse hello same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="b155d-228">Cela garantit que cette revendication d’ImmutableID hello générée par AD FS est cohérente avec hello sourceAnchor valeurs exporté tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-228">This ensures that hello ImmutableID claim generated by ADFS is consistent with hello sourceAnchor values exported tooAzure AD.</span></span>

<span data-ttu-id="b155d-229">Si vous gérez des services AD FS en dehors d’Azure AD Connect ou si vous utilisez des serveurs de fédération de tiers pour l’authentification, vous devez manuellement mettre à jour les règles de revendication hello pour ImmutableID toobe revendication cohérente avec les valeurs de sourceAnchor hello exportée tooAzure AD en tant que décrit dans la section de l’article [modifier AD FS des règles de revendication](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="b155d-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update hello claim rules for ImmutableID claim toobe consistent with hello sourceAnchor values exported tooAzure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="b155d-230">Assistant de Hello renvoie hello suivant avertissement après l’installation :</span><span class="sxs-lookup"><span data-stu-id="b155d-230">hello wizard returns hello following warning after installation completes:</span></span>

![Configuration de fédération tierce](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-tooexisting-deployment"></a><span data-ttu-id="b155d-232">Ajouter le nouveau déploiement répertoires tooexisting</span><span class="sxs-lookup"><span data-stu-id="b155d-232">Adding new directories tooexisting deployment</span></span>
<span data-ttu-id="b155d-233">Supposons que vous avez déployé Azure AD Connect avec hello ConsistencyGuid fonctionnalité est activée, et à présent vous aimeriez tooadd un autre déploiement de toohello active.</span><span class="sxs-lookup"><span data-stu-id="b155d-233">Suppose you have deployed Azure AD Connect with hello ConsistencyGuid feature enabled, and now you would like tooadd another directory toohello deployment.</span></span> <span data-ttu-id="b155d-234">Lorsque vous essayez de répertoire de hello tooadd, Assistant Azure AD Connect vérifie état hello de l’attribut mSDS-ConsistencyGuid de hello dans le répertoire de hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-234">When you try tooadd hello directory, Azure AD Connect wizard checks hello state of hello mSDS-ConsistencyGuid attribute in hello directory.</span></span> <span data-ttu-id="b155d-235">Si l’attribut de hello est configuré sur un ou plusieurs objets dans le répertoire de hello, hello fermeture de l’Assistant attribut de hello est utilisé par d’autres applications et retourne une erreur, comme illustré dans le diagramme hello ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="b155d-235">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="b155d-236">Si vous êtes certain que cet attribut hello n’est pas utilisé par les applications existantes, vous devez toocontact prise en charge pour plus d’informations sur la façon dont toosuppress hello erreur.</span><span class="sxs-lookup"><span data-stu-id="b155d-236">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Ajouter le nouveau déploiement répertoires tooexisting](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="b155d-238">Authentification dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="b155d-238">Azure AD sign-in</span></span>
<span data-ttu-id="b155d-239">Lors de l’intégration de votre annuaire local avec Azure AD, il est important toounderstand comment les paramètres de synchronisation hello peuvent affecter la manière dont les utilisateurs hello s’authentifie.</span><span class="sxs-lookup"><span data-stu-id="b155d-239">While integrating your on-premises directory with Azure AD, it is important toounderstand how hello synchronization settings can affect hello way user authenticates.</span></span> <span data-ttu-id="b155d-240">Azure AD utilise l’utilisateur de hello tooauthenticate userPrincipalName (UPN).</span><span class="sxs-lookup"><span data-stu-id="b155d-240">Azure AD uses userPrincipalName (UPN) tooauthenticate hello user.</span></span> <span data-ttu-id="b155d-241">Toutefois, lorsque vous synchronisez vos utilisateurs, vous devez choisir hello attribut toobe est utilisée pour la valeur userPrincipalName avec précaution.</span><span class="sxs-lookup"><span data-stu-id="b155d-241">However, when you synchronize your users, you must choose hello attribute toobe used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-hello-attribute-for-userprincipalname"></a><span data-ttu-id="b155d-242">Choix d’attribut hello pour userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="b155d-242">Choosing hello attribute for userPrincipalName</span></span>
<span data-ttu-id="b155d-243">Lorsque vous sélectionnez l’attribut hello pour fournir la valeur hello toobe UPN utilisé dans un Azure doit assurer.</span><span class="sxs-lookup"><span data-stu-id="b155d-243">When you are selecting hello attribute for providing hello value of UPN toobe used in Azure one should ensure</span></span>

* <span data-ttu-id="b155d-244">valeurs d’attribut Hello conformes toohello UPN syntaxe (RFC 822), qu'il doit être au format de hellousername@domain</span><span class="sxs-lookup"><span data-stu-id="b155d-244">hello attribute values conform toohello UPN syntax (RFC 822), that is it should be of hello format username@domain</span></span>
* <span data-ttu-id="b155d-245">suffixe Hello dans tooone de correspondances de valeurs hello Hello vérifiées des domaines personnalisés dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="b155d-245">hello suffix in hello values matches tooone of hello verified custom domains in Azure AD</span></span>

<span data-ttu-id="b155d-246">Dans les paramètres express, hello supposé être un choix pour l’attribut de hello userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="b155d-246">In express settings, hello assumed choice for hello attribute is userPrincipalName.</span></span> <span data-ttu-id="b155d-247">Si l’attribut userPrincipalName de hello ne contient pas de valeur de hello vous souhaitez que votre toosign utilisateurs dans tooAzure, puis vous devez choisir **Installation personnalisée**.</span><span class="sxs-lookup"><span data-stu-id="b155d-247">If hello userPrincipalName attribute does not contain hello value you want your users toosign in tooAzure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="b155d-248">État du domaine personnalisé et UPN</span><span class="sxs-lookup"><span data-stu-id="b155d-248">Custom domain state and UPN</span></span>
<span data-ttu-id="b155d-249">Il est important tooensure qu’il existe un domaine vérifié pour le suffixe UPN de hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-249">It is important tooensure that there is a verified domain for hello UPN suffix.</span></span>

<span data-ttu-id="b155d-250">John est un utilisateur de contoso.com. Vous souhaitez que John toouse hello local UPN john@contoso.com toosign dans tooAzure après avoir ont été synchronisées utilisateurs tooyour Azure AD directory contoso.onmicrosoft.com. toodo par conséquent, vous devez tooadd et vérifiez contoso.com en tant qu’un domaine personnalisé dans Azure AD avant de commencer la synchronisation des utilisateurs de hello.</span><span class="sxs-lookup"><span data-stu-id="b155d-250">John is a user in contoso.com. You want John toouse hello on-premises UPN john@contoso.com toosign in tooAzure after you have synced users tooyour Azure AD directory contoso.onmicrosoft.com. toodo so, you need tooadd and verify contoso.com as a custom domain in Azure AD before you can start syncing hello users.</span></span> <span data-ttu-id="b155d-251">Si le suffixe UPN hello John, par exemple contoso.com, ne correspond pas à un domaine vérifié dans Azure AD, Azure AD remplace suffixe hello avec contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="b155d-251">If hello UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces hello UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="b155d-252">Domaines locaux non routables et UPN pour Azure AD</span><span class="sxs-lookup"><span data-stu-id="b155d-252">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="b155d-253">Certaines organisations ont des domaines non routables, comme contoso.local, ou de simples domaines à étiquette unique, comme contoso.</span><span class="sxs-lookup"><span data-stu-id="b155d-253">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="b155d-254">Vous n’êtes pas en mesure de tooverify un domaine non routable dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-254">You are not able tooverify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="b155d-255">Azure AD Connect peut synchroniser tooonly un domaine vérifié dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-255">Azure AD Connect can sync tooonly a verified domain in Azure AD.</span></span> <span data-ttu-id="b155d-256">Lorsque vous créez un répertoire Azure AD, il crée un domaine routable qui devient le domaine par défaut de votre Azure AD, par exemple contoso.onmicrosoft.com. Par conséquent, il devient nécessaire tooverify n’importe quel autre domaine routable dans un tel scénario au cas où vous ne souhaitez pas que le domaine toosync toohello par défaut onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="b155d-256">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com. Therefore, it becomes necessary tooverify any other routable domain in such a scenario in case you don't want toosync toohello default onmicrosoft.com domain.</span></span>

<span data-ttu-id="b155d-257">Lecture [ajouter votre tooAzure de nom de domaine personnalisé Active Directory](../active-directory-add-domain.md) pour plus d’informations sur l’ajout et la vérification de domaines.</span><span class="sxs-lookup"><span data-stu-id="b155d-257">Read [Add your custom domain name tooAzure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="b155d-258">Azure AD Connect détecte si vous exécutez un environnement de domaine non routable et vous avertit en temps utile si vous tentez de poursuivre la configuration rapide.</span><span class="sxs-lookup"><span data-stu-id="b155d-258">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="b155d-259">Si vous opérez dans un domaine non routable, il est probable que l’UPN des utilisateurs de hello hello offrent de suffixes non routable.</span><span class="sxs-lookup"><span data-stu-id="b155d-259">If you are operating in a non-routable domain, then it is likely that hello UPN of hello users have non-routable suffixes too.</span></span> <span data-ttu-id="b155d-260">Par exemple, si vous exécutez sous contoso.local, Azure AD Connect suggère vous toouse des paramètres personnalisés au lieu d’utiliser les paramètres express.</span><span class="sxs-lookup"><span data-stu-id="b155d-260">For example, if you are running under contoso.local, Azure AD Connect suggests you toouse custom settings rather than using express settings.</span></span> <span data-ttu-id="b155d-261">À l’aide de paramètres personnalisés, vous êtes attribut hello en mesure de toospecify qui doit être utilisé comme toosign UPN dans tooAzure une fois que les utilisateurs de hello sont synchronisé tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="b155d-261">Using custom settings, you are able toospecify hello attribute that should be used as UPN toosign in tooAzure after hello users are synced tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b155d-262">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b155d-262">Next steps</span></span>
<span data-ttu-id="b155d-263">En savoir plus sur l’ [intégration de vos identités locales avec Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="b155d-263">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
