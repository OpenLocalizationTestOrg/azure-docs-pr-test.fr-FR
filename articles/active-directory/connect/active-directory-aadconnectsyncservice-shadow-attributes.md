---
title: "attributs de clichés instantanés du service de synchronisation aaaAzure AD Connect | Documents Microsoft"
description: "Décrit le fonctionnement des attributs des clichés instantanés dans le service de synchronisation Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1b8665e7488c6078b655f8a3e35519145bacd898
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-service-shadow-attributes"></a><span data-ttu-id="d7c3a-103">Attributs de clichés instantanés du service de synchronisation Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="d7c3a-103">Azure AD Connect sync service shadow attributes</span></span>
<span data-ttu-id="d7c3a-104">La plupart des attributs sont représentés hello même façon dans Azure AD dans votre annuaire Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-104">Most attributes are represented hello same way in Azure AD as they are in your on-premises Active Directory.</span></span> <span data-ttu-id="d7c3a-105">Mais certains attributs ont une gestion spéciale et valeur d’attribut hello dans Azure AD peut être différente de celle se synchronise Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-105">But some attributes have some special handling and hello attribute value in Azure AD might be different than what Azure AD Connect synchronizes.</span></span>

## <a name="introducing-shadow-attributes"></a><span data-ttu-id="d7c3a-106">Présentation des attributs des clichés instantanés</span><span class="sxs-lookup"><span data-stu-id="d7c3a-106">Introducing shadow attributes</span></span>
<span data-ttu-id="d7c3a-107">Certains attributs ont deux représentations dans Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-107">Some attributes have two representations in Azure AD.</span></span> <span data-ttu-id="d7c3a-108">Valeur de local hello et une valeur calculée sont stockés.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-108">Both hello on-premises value and a calculated value are stored.</span></span> <span data-ttu-id="d7c3a-109">Ces attributs supplémentaires sont appelés attributs de clichés instantanés.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-109">These extra attributes are called shadow attributes.</span></span> <span data-ttu-id="d7c3a-110">sont des attributs les plus courants Hello deux où vous voyez ce comportement **userPrincipalName** et **proxyAddress**.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-110">hello two most common attributes where you see this behavior are **userPrincipalName** and **proxyAddress**.</span></span> <span data-ttu-id="d7c3a-111">modification de Hello dans les valeurs d’attribut se produit lorsque des valeurs de ces attributs représentant des domaines non vérifiés.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-111">hello change in attribute values happens when there are values in these attributes representing non-verified domains.</span></span> <span data-ttu-id="d7c3a-112">Mais le moteur de synchronisation hello dans se connecter lit valeur hello dans l’attribut de clichés instantanés hello ainsi son point de vue, attribut de hello a été confirmée par Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-112">But hello sync engine in Connect reads hello value in hello shadow attribute so from its perspective, hello attribute has been confirmed by Azure AD.</span></span>

<span data-ttu-id="d7c3a-113">Vous ne voyez pas les attributs de clichés instantanés hello à l’aide de hello portail Azure ou avec PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-113">You cannot see hello shadow attributes using hello Azure portal or with PowerShell.</span></span> <span data-ttu-id="d7c3a-114">Mais le concept hello de présentation vous aide à vous tootroubleshoot certains scénarios où l’attribut hello a des valeurs différentes sur site et dans le cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-114">But understanding hello concept helps you tootroubleshoot certain scenarios where hello attribute has different values on-premises and in hello cloud.</span></span>

<span data-ttu-id="d7c3a-115">toobetter comprendre le comportement de hello, examinez cet exemple de Fabrikam :</span><span class="sxs-lookup"><span data-stu-id="d7c3a-115">toobetter understand hello behavior, look at this example from Fabrikam:</span></span>  
![Domaines](./media/active-directory-aadconnectsyncservice-shadow-attributes/domains.png)  
<span data-ttu-id="d7c3a-117">Ils ont plusieurs suffixes UPN dans leur Active Directory local, mais ils n’en ont vérifié qu’un.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-117">They have multiple UPN suffixes in their on-premises Active Directory, but they have only verified one.</span></span>

### <a name="userprincipalname"></a><span data-ttu-id="d7c3a-118">userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="d7c3a-118">userPrincipalName</span></span>
<span data-ttu-id="d7c3a-119">Un utilisateur a hello suivant de valeurs d’attribut dans un domaine non vérifié :</span><span class="sxs-lookup"><span data-stu-id="d7c3a-119">A user has hello following attribute values in a non-verified domain:</span></span>

| <span data-ttu-id="d7c3a-120">Attribut</span><span class="sxs-lookup"><span data-stu-id="d7c3a-120">Attribute</span></span> | <span data-ttu-id="d7c3a-121">Valeur</span><span class="sxs-lookup"><span data-stu-id="d7c3a-121">Value</span></span> |
| --- | --- |
| <span data-ttu-id="d7c3a-122">userPrincipalName local</span><span class="sxs-lookup"><span data-stu-id="d7c3a-122">on-premises userPrincipalName</span></span> | lee.sperry@fabrikam.com |
| <span data-ttu-id="d7c3a-123">shadowUserPrincipalName dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="d7c3a-123">Azure AD shadowUserPrincipalName</span></span> | lee.sperry@fabrikam.com |
| <span data-ttu-id="d7c3a-124">userPrincipalName dans Azure AD</span><span class="sxs-lookup"><span data-stu-id="d7c3a-124">Azure AD userPrincipalName</span></span> | lee.sperry@fabrikam.onmicrosoft.com |

<span data-ttu-id="d7c3a-125">attribut userPrincipalName de Hello est la valeur hello qui se qu'affiche lors de l’utilisation de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-125">hello userPrincipalName attribute is hello value you see when using PowerShell.</span></span>

<span data-ttu-id="d7c3a-126">Comme valeur d’attribut hello réel local est stocké dans Azure AD, lorsque vous vérifiez le domaine fabrikam.com de hello, AD Azure met à jour l’attribut userPrincipalName de hello valeur hello hello shadowUserPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-126">Since hello real on-premises attribute value is stored in Azure AD, when you verify hello fabrikam.com domain, Azure AD updates hello userPrincipalName attribute with hello value from hello shadowUserPrincipalName.</span></span> <span data-ttu-id="d7c3a-127">Vous n’avez pas de le toosynchronize les modifications à partir d’Azure AD Connect pour ces toobe valeurs mises à jour.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-127">You do not have toosynchronize any changes from Azure AD Connect for these values toobe updated.</span></span>

### <a name="proxyaddresses"></a><span data-ttu-id="d7c3a-128">proxyAddresses</span><span class="sxs-lookup"><span data-stu-id="d7c3a-128">proxyAddresses</span></span>
<span data-ttu-id="d7c3a-129">Hello même processus pour inclure uniquement des domaines vérifiés se produit également pour proxyAddresses, mais avec une logique supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-129">hello same process for only including verified domains also occurs for proxyAddresses, but with some additional logic.</span></span> <span data-ttu-id="d7c3a-130">vérification de Hello pour les domaines vérifiés se produit uniquement pour les utilisateurs de boîte aux lettres.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-130">hello check for verified domains only happens for mailbox users.</span></span> <span data-ttu-id="d7c3a-131">Un utilisateur ou un contact représentent un utilisateur dans une autre organisation Exchange et vous pouvez ajouter toutes les valeurs dans les objets toothese proxyAddresses.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-131">A mail-enabled user or contact represent a user in another Exchange organization and you can add any values in proxyAddresses toothese objects.</span></span>

<span data-ttu-id="d7c3a-132">Pour un utilisateur de boîte aux lettres, en local ou dans Exchange Online, seules les valeurs pour les domaines vérifiés s’affichent.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-132">For a mailbox user, either on-premises or in Exchange Online, only values for verified domains appear.</span></span> <span data-ttu-id="d7c3a-133">Vous devriez voir quelque chose de semblable à ceci :</span><span class="sxs-lookup"><span data-stu-id="d7c3a-133">It could look like this:</span></span>

| <span data-ttu-id="d7c3a-134">Attribut</span><span class="sxs-lookup"><span data-stu-id="d7c3a-134">Attribute</span></span> | <span data-ttu-id="d7c3a-135">Valeur</span><span class="sxs-lookup"><span data-stu-id="d7c3a-135">Value</span></span> |
| --- | --- |
| <span data-ttu-id="d7c3a-136">proxyAddresses local</span><span class="sxs-lookup"><span data-stu-id="d7c3a-136">on-premises proxyAddresses</span></span> | SMTP:abbie.spencer@fabrikamonline.com</br>smtp:abbie.spencer@fabrikam.com</br>smtp:abbie@fabrikamonline.com |
| <span data-ttu-id="d7c3a-137">proxyAddresses dans Exchange Online</span><span class="sxs-lookup"><span data-stu-id="d7c3a-137">Exchange Online proxyAddresses</span></span> | SMTP:abbie.spencer@fabrikamonline.com</br>smtp:abbie@fabrikamonline.com</br>SIP:abbie.spencer@fabrikamonline.com |

<span data-ttu-id="d7c3a-138">Dans ce cas **smtp:abbie.spencer@fabrikam.com** a été supprimée, car ce domaine n’a pas été vérifié.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-138">In this case **smtp:abbie.spencer@fabrikam.com** was removed since that domain has not been verified.</span></span> <span data-ttu-id="d7c3a-139">Mais Exchange a également ajouté **SIP:abbie.spencer@fabrikamonline.com**. Fabrikam n’a pas utilisé Lync/Skype en local, mais Azure AD et Exchange Online s’y préparent.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-139">But Exchange also added **SIP:abbie.spencer@fabrikamonline.com**. Fabrikam has not used Lync/Skype on-premises, but Azure AD and Exchange Online prepare for it.</span></span>

<span data-ttu-id="d7c3a-140">Cette logique pour proxyAddresses est référencé tooas **ProxyCalc**.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-140">This logic for proxyAddresses is referred tooas **ProxyCalc**.</span></span> <span data-ttu-id="d7c3a-141">ProxyCalc est appelé à chaque modification d’un utilisateur lorsque :</span><span class="sxs-lookup"><span data-stu-id="d7c3a-141">ProxyCalc is invoked with every change on a user when:</span></span>

- <span data-ttu-id="d7c3a-142">utilisateur de Hello a été affecté à un plan de service qui inclut Exchange Online, même si l’utilisateur de hello n’était pas autorisée pour l’échange.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-142">hello user has been assigned a service plan that includes Exchange Online even if hello user was not licensed for Exchange.</span></span> <span data-ttu-id="d7c3a-143">Par exemple, si hello utilisateur est affecté hello Office E3 SKU, mais ne l’a été attribué SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-143">For example, if hello user is assigned hello Office E3 SKU, but only was assigned SharePoint Online.</span></span> <span data-ttu-id="d7c3a-144">Cela est vrai même si votre boîte aux lettres est toujours locale.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-144">This is true even if your mailbox is still on-premises.</span></span>
- <span data-ttu-id="d7c3a-145">Hello attribut msExchRecipientTypeDetails a une valeur.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-145">hello attribute msExchRecipientTypeDetails has a value.</span></span>
- <span data-ttu-id="d7c3a-146">Vous apportez une modification tooproxyAddresses ou l’userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-146">You make a change tooproxyAddresses or userPrincipalName.</span></span>

<span data-ttu-id="d7c3a-147">ProxyCalc peut prendre quelques tooprocess temps une modification sur un utilisateur et n’est pas synchrone avec le processus d’exportation hello Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-147">ProxyCalc might take some time tooprocess a change on a user and is not synchronous with hello Azure AD Connect export process.</span></span>

> [!NOTE]
> <span data-ttu-id="d7c3a-148">Hello ProxyCalc logique a quelques comportements supplémentaires pour des scénarios avancés ne pas documentés dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-148">hello ProxyCalc logic has some additional behaviors for advanced scenarios not documented in this topic.</span></span> <span data-ttu-id="d7c3a-149">Cette rubrique est fourni pour vous toounderstand hello comportement et ne documente pas toute la logique interne.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-149">This topic is provided for you toounderstand hello behavior and not document all internal logic.</span></span>

### <a name="quarantined-attribute-values"></a><span data-ttu-id="d7c3a-150">Valeurs d’attribut en quarantaine</span><span class="sxs-lookup"><span data-stu-id="d7c3a-150">Quarantined attribute values</span></span>
<span data-ttu-id="d7c3a-151">Les attributs de clichés instantanés sont également utilisés lorsque des valeurs d’attribut sont en double.</span><span class="sxs-lookup"><span data-stu-id="d7c3a-151">Shadow attributes are also used when there are duplicate attribute values.</span></span> <span data-ttu-id="d7c3a-152">Pour plus d’informations, consultez [Résilience d’attribut en double](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="d7c3a-152">For more information, see [duplicate attribute resiliency](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="d7c3a-153">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d7c3a-153">See also</span></span>
* [<span data-ttu-id="d7c3a-154">Synchronisation d’Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="d7c3a-154">Azure AD Connect sync</span></span>](active-directory-aadconnectsync-whatis.md)
* <span data-ttu-id="d7c3a-155">[Intégration de vos identités locales avec Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="d7c3a-155">[Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
