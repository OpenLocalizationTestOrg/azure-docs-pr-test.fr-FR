---
title: "Présentation des connecteurs de proxy d’application Azure AD | Microsoft Docs"
description: "Couvre les bases sur les connecteurs de proxy d’application Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: c18d0a2bff654573e6e28a7cd7fad853b3a11346
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="3ae8d-103">Présentation des connecteurs de proxy d’application Azure AD</span><span class="sxs-lookup"><span data-stu-id="3ae8d-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="3ae8d-104">Les connecteurs rendent possible le proxy d’application Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="3ae8d-105">Ils sont très puissants, simples et faciles à déployer et maintenir.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-105">They are simple, easy to deploy and maintain, and super powerful.</span></span> <span data-ttu-id="3ae8d-106">Cet article présente les connecteurs, leur fonctionnement et des suggestions pour optimiser le déploiement.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="3ae8d-107">Qu’est-ce qu’un connecteur de proxy d’application ?</span><span class="sxs-lookup"><span data-stu-id="3ae8d-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="3ae8d-108">Les connecteurs sont des agents légers présent en local et qui facilitent la connexion sortante vers le service de proxy d’application.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span></span> <span data-ttu-id="3ae8d-109">Les connecteurs doivent être installés sur un serveur Windows Server qui a accès à l’application principale.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-109">Connectors must be installed on a Windows Server that has access to the backend application.</span></span> <span data-ttu-id="3ae8d-110">Vous pouvez organiser des connecteurs dans les groupes de connecteurs, et chaque groupe gère le trafic vers des applications spécifiques.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span></span> <span data-ttu-id="3ae8d-111">Les connecteurs équilibrent la charge automatiquement et peuvent aider à optimiser la structure du réseau.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-111">Connectors load-balance automatically, and can help to optimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="3ae8d-112">Exigences et déploiement</span><span class="sxs-lookup"><span data-stu-id="3ae8d-112">Requirements and deployment</span></span>

<span data-ttu-id="3ae8d-113">Pour déployer le proxy d’application avec succès, vous devez disposer d’au moins un connecteur, mais nous vous recommandons d’en utiliser deux ou plusieurs pour assurer une meilleure résilience.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="3ae8d-114">Installez le connecteur sur un serveur Windows Server 2012 R2 ou une machine 2016.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="3ae8d-115">Le connecteur doit être en mesure de communiquer avec le service Application Proxy, ainsi que les applications locales que vous publiez.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span></span> 

<span data-ttu-id="3ae8d-116">Pour plus d’informations sur la configuration réseau requise pour le serveur du connecteur, consultez [Prise en main du proxy d’application et de l’installation d’un connecteur](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="3ae8d-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="3ae8d-117">Maintenance </span><span class="sxs-lookup"><span data-stu-id="3ae8d-117">Maintenance</span></span>
<span data-ttu-id="3ae8d-118">Les connecteurs et le service se chargent de toutes les tâches de haut niveau de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-118">The connectors and the service take care of all the high availability tasks.</span></span> <span data-ttu-id="3ae8d-119">Vous pouvez les ajouter ou supprimer de manière dynamique.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="3ae8d-120">Chaque fois qu’une nouvelle requête arrive, elle est acheminée vers un des connecteurs actuellement disponibles.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span></span> <span data-ttu-id="3ae8d-121">Si un connecteur est temporairement indisponible, il ne répond pas à ce trafic.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span></span>

<span data-ttu-id="3ae8d-122">Les connecteurs sont sans état et ne disposent d’aucune donnée de configuration sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-122">The connectors are stateless and have no configuration data on the machine.</span></span> <span data-ttu-id="3ae8d-123">Les seules données qu’ils stockent sont les paramètres de connexion au service et le certificat d’authentification.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-123">The only data they store is the settings for connecting the service and its authentication certificate.</span></span> <span data-ttu-id="3ae8d-124">Lorsqu’ils se connectent au service, ils extraient toutes les données de configuration requises et les actualisent toutes les deux minutes.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="3ae8d-125">Les connecteurs interrogent également le serveur pour déterminer s’il existe une version plus récente du connecteur.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span></span> <span data-ttu-id="3ae8d-126">S’il en existe une, les connecteurs se mettent à jour.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-126">If one is found, the connectors update themselves.</span></span>

<span data-ttu-id="3ae8d-127">Vous pouvez surveiller vos connecteurs à partir de l’ordinateur sur lequel ils s’exécutent à l’aide du journal d’événements et des compteurs de performances.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span></span> <span data-ttu-id="3ae8d-128">Ou vous pouvez afficher leur état à partir de la page du proxy d’application du portail Azure :</span><span class="sxs-lookup"><span data-stu-id="3ae8d-128">Or you can view their status from the Application Proxy page of the Azure portal:</span></span>

 ![Connecteurs de proxy d’application Azure AD](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="3ae8d-130">Vous n’êtes pas obligé de supprimer manuellement les connecteurs qui ne sont pas utilisés.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-130">You don't have to manually delete connectors that are unused.</span></span> <span data-ttu-id="3ae8d-131">Lorsqu’un connecteur est en cours d’exécution, il reste actif car il se connecte au service.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-131">When a connector is running, it remains active as it connects to the service.</span></span> <span data-ttu-id="3ae8d-132">Les connecteurs inutilisés sont marqués comme _inactifs_ et sont supprimés après 10 jours d’inactivité.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="3ae8d-133">Toutefois, si vous souhaitez réellement désinstaller un connecteur, désinstallez le service du connecteur et le service de mise à jour du serveur.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span></span> <span data-ttu-id="3ae8d-134">Redémarrez votre ordinateur pour supprimer complètement le service.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-134">Restart your computer to fully remove the service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="3ae8d-135">Mises à jour automatiques</span><span class="sxs-lookup"><span data-stu-id="3ae8d-135">Automatic updates</span></span>

<span data-ttu-id="3ae8d-136">Azure AD fournit les mises à jour automatiques pour tous les connecteurs que vous déployez.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-136">Azure AD provides automatic updates for all the connectors that you deploy.</span></span> <span data-ttu-id="3ae8d-137">Tant que le service de mise à jour du connecteur de proxy d’application est en cours d’exécution, vos connecteurs se mettent automatiquement à jour.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="3ae8d-138">Si vous ne voyez pas le service de mise à jour du connecteur sur votre serveur, vous devez [réinstaller votre connecteur](active-directory-application-proxy-enable.md) afin d’obtenir les mises à jour.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](active-directory-application-proxy-enable.md) to get any updates.</span></span> 

<span data-ttu-id="3ae8d-139">Si vous ne souhaitez pas attendre le chargement d’une mise à jour automatique sur votre connecteur, vous pouvez effectuer une mise à niveau manuelle.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="3ae8d-140">Accédez à la [page de téléchargement du connecteur](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) sur le serveur où votre connecteur se trouve et sélectionnez **Télécharger**.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span></span> <span data-ttu-id="3ae8d-141">Ce processus lance une mise à niveau du connecteur local.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-141">This process kicks off an upgrade for the local connector.</span></span> 

<span data-ttu-id="3ae8d-142">Pour les abonnés avec plusieurs connecteurs, les mises à jour automatiques ciblent un seul connecteur à la fois dans chaque groupe afin d’éviter les temps d’arrêt dans votre environnement.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span></span> 

<span data-ttu-id="3ae8d-143">Vous pouvez rencontrer des temps d’arrêt lors de la mise à jour de votre connecteur si :</span><span class="sxs-lookup"><span data-stu-id="3ae8d-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="3ae8d-144">Vous n’avez qu’un seul connecteur.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-144">You only have one connector.</span></span> <span data-ttu-id="3ae8d-145">Pour éviter ce temps d’arrêt et optimiser la disponibilité, nous vous recommandons d’installer un second connecteur et de [créer un groupe de connecteurs](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3ae8d-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="3ae8d-146">Un connecteur se trouvait au milieu d’une transaction lorsque la mise à jour a commencé.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-146">A connector was in the middle of a transaction when the update began.</span></span> <span data-ttu-id="3ae8d-147">Bien que la transaction d’origine soit perdue, votre navigateur devrait automatiquement relancer l’opération, ou vous pouvez actualiser votre page.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span></span> <span data-ttu-id="3ae8d-148">Lorsque la demande est renvoyée, le trafic est acheminé vers un connecteur de secours.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-148">When the request is resent, the traffic is routed to a backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="3ae8d-149">Créer des groupe de connecteurs</span><span class="sxs-lookup"><span data-stu-id="3ae8d-149">Creating connector groups</span></span>

<span data-ttu-id="3ae8d-150">Les groupes de connecteurs vous permettent d’assigner des connecteurs spécifiques afin de servir des applications spécifiques.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-150">Connector groups enable you to assign specific connectors to serve specific applications.</span></span> <span data-ttu-id="3ae8d-151">Vous pouvez regrouper plusieurs connecteurs, puis assigner chaque application à un groupe.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-151">You can group a number of connectors together, and then assign each application to a group.</span></span> 

<span data-ttu-id="3ae8d-152">Les groupes de connecteurs facilitent la gestion de déploiements à grande échelle.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-152">Connector groups make it easier to manage large deployments.</span></span> <span data-ttu-id="3ae8d-153">Ils améliorent aussi la latence pour les locataires dont les applications sont hébergées dans différentes régions, car vous pouvez créer des groupes de connecteurs basés sur un emplacement pour servir uniquement des applications locales.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span></span> 

<span data-ttu-id="3ae8d-154">Pour en savoir plus sur les groupes de connecteurs, consultez [Publier des applications sur des réseaux et emplacements distincts à l’aide de groupes de connecteurs](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3ae8d-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="3ae8d-155">Sécurité et mise en réseau</span><span class="sxs-lookup"><span data-stu-id="3ae8d-155">Security and networking</span></span>

<span data-ttu-id="3ae8d-156">Les connecteurs peuvent être installés n’importe où sur le réseau pourvu qu’ils puissent envoyer des requêtes vers le service de proxy d’application.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-156">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span></span> <span data-ttu-id="3ae8d-157">L’important est que l’ordinateur qui exécute le connecteur dispose également d’un accès à vos applications.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-157">What's important is that the computer running the connector also has access to your apps.</span></span> <span data-ttu-id="3ae8d-158">Vous pouvez installer les connecteurs à l’intérieur de votre réseau d’entreprise ou sur une machine virtuelle qui s’exécute dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-158">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span></span> <span data-ttu-id="3ae8d-159">Les connecteurs peuvent s’exécuter dans une zone démilitarisée (DMZ), mais ce n’est pas nécessaire car tout le trafic est sortant afin sécuriser votre réseau.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="3ae8d-160">Les connecteurs envoient uniquement des demandes sortantes.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="3ae8d-161">Le trafic sortant est envoyé au service de proxy d’application et aux applications publiées.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-161">The outbound traffic is sent to the Application Proxy service and to the published applications.</span></span> <span data-ttu-id="3ae8d-162">Il n’est pas nécessaire pour ouvrir des ports d’entrée car le trafic passe dans les deux sens une fois qu’une session est établie.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-162">You don't have to open inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="3ae8d-163">Il n’est pas nécessaire de configurer l’équilibrage de charge entre les connecteurs ou de configurer l’accès entrant à travers vos pare-feu.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-163">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="3ae8d-164">Pour plus d’informations sur la configuration des règles sortantes de pare-feu, consultez [Travailler avec des serveurs proxy locaux existants](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="3ae8d-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="3ae8d-165">Utilisez [l’outil de test des ports du connecteur de proxy d’application Azure AD](https://aadap-portcheck.connectorporttest.msappproxy.net/) pour vous assurer que votre connecteur peut joindre le service de proxy d’application.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-165">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="3ae8d-166">Au minimum, assurez-vous d’avoir coché les États-Unis du Centre et les régions les plus proches de vous.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-166">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="3ae8d-167">En outre, un nombre plus élevé de coches vertes signifie une résilience accrue.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="3ae8d-168">Performances et évolutivité</span><span class="sxs-lookup"><span data-stu-id="3ae8d-168">Performance and scalability</span></span>

<span data-ttu-id="3ae8d-169">La mise à l’échelle pour le proxy d’application est transparente, mais l’échelle est un facteur lorsqu’il s’agit de connecteurs.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-169">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="3ae8d-170">Vous devez disposer de suffisamment de connecteurs pour gérer les pics de trafic.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-170">You need to have enough connectors to handle peak traffic.</span></span> <span data-ttu-id="3ae8d-171">Toutefois, il n’est pas nécessaire de configurer l’équilibrage des charges, car tous les connecteurs dans un groupe de connecteurs équilibrent automatiquement la charge.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-171">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="3ae8d-172">Étant donné que les connecteurs sont sans état, ils ne sont pas affectés par le nombre d’utilisateurs ou de sessions.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-172">Since connectors are stateless, they are not affected by the number of users or sessions.</span></span> <span data-ttu-id="3ae8d-173">Ils varient plutôt selon le nombre de requêtes et leur taille de charge utile.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-173">Instead, they respond to the number of requests and their payload size.</span></span> <span data-ttu-id="3ae8d-174">Avec le trafic web standard, une machine moyenne peut gérer quelques milliers de requêtes par seconde.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="3ae8d-175">La capacité spécifique dépend des caractéristiques exactes de la machine.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-175">The specific capacity depends on the exact machine characteristics.</span></span> 

<span data-ttu-id="3ae8d-176">Les performances du connecteur sont liées au processeur et à la mise en réseau.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-176">The connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="3ae8d-177">Les performances processeur sont nécessaires pour le chiffrement et le déchiffrement SSL, tandis que la mise en réseau est vitale pour obtenir une connectivité rapide aux applications et au service en ligne dans Azure.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-177">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span></span>

<span data-ttu-id="3ae8d-178">En revanche, la mémoire est moins problématique pour les connecteurs.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="3ae8d-179">Le service en ligne s’occupe de la majeure partie du traitement et de tout le trafic non authentifié.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-179">The online service takes care of much of the processing and all unauthenticated traffic.</span></span> <span data-ttu-id="3ae8d-180">Tout ce qui peut être effectué dans le cloud est réalisé dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-180">Everything that can be done in the cloud is done in the cloud.</span></span> 

<span data-ttu-id="3ae8d-181">Un autre facteur affectant les performances est la qualité de la connexion réseau entre les connecteurs, y compris :</span><span class="sxs-lookup"><span data-stu-id="3ae8d-181">Another factor that affects performance is the quality of the networking between the connectors, including:</span></span> 

* <span data-ttu-id="3ae8d-182">**Le service en ligne** : les connexions à latence faible ou élevée au service du proxy d’application d’Azure influence les performances du connecteur.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-182">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span></span> <span data-ttu-id="3ae8d-183">Pour des performances optimales, connectez votre organisation à Azure avec Express Route.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-183">For the best performance, connect your organization to Azure with Express Route.</span></span> <span data-ttu-id="3ae8d-184">Sinon, assurez-vous que l’équipe réseau garantit que les connexions à Azure sont gérées de la façon la plus efficace.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-184">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="3ae8d-185">**Applications principales** : dans certains cas, il existe des proxys supplémentaires entre le connecteur et les applications principales capables de ralentir ou d’empêcher des connexions.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-185">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="3ae8d-186">Pour résoudre les problèmes de ce scénario, ouvrez un navigateur à partir du serveur du connecteur et essayez d’accéder à l’application.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-186">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span></span> <span data-ttu-id="3ae8d-187">Si vous exécutez les connecteurs dans Azure alors que les applications sont locales, l’expérience peut ne pas être celle que vos utilisateurs attendent.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-187">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span></span>
* <span data-ttu-id="3ae8d-188">**Contrôleurs de domaine** : si les connecteurs effectuent l’authentification unique à l’aide de la délégation Kerberos contrainte (KCD), ils contactent les contrôleurs de domaine avant d’envoyer la requête au serveur principal.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-188">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span></span> <span data-ttu-id="3ae8d-189">Les connecteurs ont un cache de tickets Kerberos, mais dans un environnement occupé, la réactivité des contrôleurs de domaine peut affecter les performances.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-189">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span></span> <span data-ttu-id="3ae8d-190">Ce problème est plus courant pour les connecteurs qui s’exécutent dans Azure mais qui communiques avec les contrôleurs de domaine locaux.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="3ae8d-191">Pour plus d’informations sur l’optimisation de votre réseau, consultez [Considérations sur la topologie du réseau lors de l’utilisation du proxy d’application Azure Active Directory](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="3ae8d-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="3ae8d-192">Jonction de domaine</span><span class="sxs-lookup"><span data-stu-id="3ae8d-192">Domain joining</span></span>

<span data-ttu-id="3ae8d-193">Les connecteurs peuvent s’exécuter sur une machine qui n’est pas jointe à un domaine.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="3ae8d-194">Toutefois, si vous souhaitez utiliser l’authentification unique (SSO) pour les applications qui utilisent l’authentification Windows intégrée (IWA), vous avez besoin d’un ordinateur joint à un domaine.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-194">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="3ae8d-195">Dans ce cas, les ordinateurs du connecteur doivent être joints à un domaine qui peut effectuer la délégation [Kerberos](https://web.mit.edu/kerberos) contrainte pour le compte des utilisateurs pour les applications publiées.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-195">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span></span>

<span data-ttu-id="3ae8d-196">Les connecteurs peuvent également être joints à des domaines ou forêts qui disposent d’une approbation partielle ou pour les contrôleurs de domaine en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-196">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="3ae8d-197">Déploiements des connecteurs sur les environnements de sécurité renforcés</span><span class="sxs-lookup"><span data-stu-id="3ae8d-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="3ae8d-198">Généralement, le déploiement de connecteurs est simple et ne nécessite aucune configuration spéciale.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="3ae8d-199">Mais certaines conditions uniques doivent être prises en compte :</span><span class="sxs-lookup"><span data-stu-id="3ae8d-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="3ae8d-200">Les organisations qui limitent le trafic sortant doivent [ouvrir les ports requis](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="3ae8d-200">Organizations that limit the outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="3ae8d-201">Des machines conformes aux normes FIPS peuvent être requises pour modifier leur configuration afin d’autoriser les processus du connecteur à générer et stocker un certificat.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-201">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span></span>
* <span data-ttu-id="3ae8d-202">Les organisations qui verrouillent leur environnement sur la base des processus qui émettent des requêtes réseau doivent s’assurer que les deux services de connecteur sont activés pour accéder à tous les ports et adresses IP nécessaires.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-202">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span></span>
* <span data-ttu-id="3ae8d-203">Dans certains cas, les proxys de transfert sortants peuvent arrêter l’authentification de certificat bidirectionnelle et entraîner un échec de la communication.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-203">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="3ae8d-204">Authentification du connecteur</span><span class="sxs-lookup"><span data-stu-id="3ae8d-204">Connector authentication</span></span>

<span data-ttu-id="3ae8d-205">Afin de fournir un service sécurisé, les connecteurs doivent s’authentifier sur le service, et le service doit s’authentifier sur les connecteurs.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-205">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span></span> <span data-ttu-id="3ae8d-206">L’authentification est effectuée à l’aide de certificats client et serveur lorsque les connecteurs établissent la connexion.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-206">This authentication is done using client and server certificates when the connectors initiate the connection.</span></span> <span data-ttu-id="3ae8d-207">De cette façon, le nom d’utilisateur et le mot de passe de l’administrateur ne sont pas stockés sur l’ordinateur du connecteur.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-207">This way the administrator’s username and password are not stored on the connector machine.</span></span>

<span data-ttu-id="3ae8d-208">Les certificats utilisés sont spécifiques au service de proxy d’application.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-208">The certificates used are specific to the Application Proxy service.</span></span> <span data-ttu-id="3ae8d-209">Ils sont créés lors de l’inscription initiale et sont renouvelés automatiquement par les connecteurs tous les quelques mois.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-209">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span></span> 

<span data-ttu-id="3ae8d-210">Si un connecteur n’est pas connecté au service pendant plusieurs mois, ses certificats ont peut-être expiré.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-210">If a connector is not connected to the service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="3ae8d-211">Dans ce cas, désinstallez et réinstallez le connecteur pour déclencher l’inscription.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-211">In this case, uninstall and reinstall the connector to trigger registration.</span></span> <span data-ttu-id="3ae8d-212">Vous pouvez exécuter les commandes PowerShell suivantes :</span><span class="sxs-lookup"><span data-stu-id="3ae8d-212">You can run the following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-the-hood"></a><span data-ttu-id="3ae8d-213">Sous le capot</span><span class="sxs-lookup"><span data-stu-id="3ae8d-213">Under the hood</span></span>

<span data-ttu-id="3ae8d-214">Comme les connecteurs sont basés sur le proxy d’application web Windows Server, la plupart ont les mêmes outils de gestion, y compris les journaux d’événements Windows</span><span class="sxs-lookup"><span data-stu-id="3ae8d-214">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span></span>

 ![Gérez les journaux d’événements avec l’Observateur d’événements](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="3ae8d-216">et les compteurs de performances Windows.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-216">and Windows performance counters.</span></span> 

 ![Ajouter des compteurs au connecteur avec l’Analyseur de performances](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="3ae8d-218">Les connecteurs ont des journaux de session et admin.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-218">The connectors have both admin and session logs.</span></span> <span data-ttu-id="3ae8d-219">Les journaux admin incluent les événements principaux et leurs erreurs.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-219">The admin logs include key events and their errors.</span></span> <span data-ttu-id="3ae8d-220">Les journaux de session incluent toutes les transactions et les détails de traitement.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-220">The session logs include all the transactions and their processing details.</span></span> 

<span data-ttu-id="3ae8d-221">Pour afficher les journaux, accédez l’Observateur d’événements, ouvrez le menu **Affichage**, puis activez **Afficher les journaux d’analyse et de débogage**.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-221">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="3ae8d-222">Ensuite, permettez-leur de lancer la collecte d’événements.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-222">Then, enable them to start collecting events.</span></span> <span data-ttu-id="3ae8d-223">Ces journaux n’apparaissent pas dans le proxy d’application web dans Windows Server 2012 R2, car les connecteurs sont basés sur une version plus récente.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span></span>

<span data-ttu-id="3ae8d-224">Vous pouvez examiner l’état du service dans la fenêtre Services.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-224">You can examine the state of the service in the Services window.</span></span> <span data-ttu-id="3ae8d-225">Le connecteur compose de deux services Windows : le connecteur lui-même et l’outil de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-225">The connector comprises two Windows Services: the actual connector, and the updater.</span></span> <span data-ttu-id="3ae8d-226">Tous deux doivent s’exécuter en permanence.</span><span class="sxs-lookup"><span data-stu-id="3ae8d-226">Both of them must run all the time.</span></span>

 ![AzureAD Services Local](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="3ae8d-228">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3ae8d-228">Next steps</span></span>


* [<span data-ttu-id="3ae8d-229">Publier des applications sur des réseaux et emplacements distincts à l’aide de groupes de connecteurs</span><span class="sxs-lookup"><span data-stu-id="3ae8d-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="3ae8d-230">Travailler avec des serveurs proxy locaux existants</span><span class="sxs-lookup"><span data-stu-id="3ae8d-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="3ae8d-231">Résoudre les erreurs du proxy d’application et du connecteur</span><span class="sxs-lookup"><span data-stu-id="3ae8d-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="3ae8d-232">Comment installer silencieusement le connecteur du Proxy d'application Azure AD</span><span class="sxs-lookup"><span data-stu-id="3ae8d-232">How to silently install the Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)

