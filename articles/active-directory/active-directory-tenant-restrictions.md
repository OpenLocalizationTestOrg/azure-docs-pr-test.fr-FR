---
title: "Gérer l’accès aux applications cloud par la restriction des clients - Azure | Microsoft Docs"
description: "Utilisation des Restrictions du client pour gérer les utilisateurs qui peuvent accéder aux applications en fonction de leur client Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: kgremban
ms.openlocfilehash: 7288f8fa173f8018570cd17aa7274f56a4eead41
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="use-tenant-restrictions-to-manage-access-to-saas-cloud-applications"></a><span data-ttu-id="41b18-103">Utiliser les Restrictions du client pour gérer l’accès aux applications cloud SaaS</span><span class="sxs-lookup"><span data-stu-id="41b18-103">Use Tenant Restrictions to manage access to SaaS cloud applications</span></span>

<span data-ttu-id="41b18-104">Les organisations de grande taille qui se préoccupent de la sécurité veulent adopter les services cloud, comme Office 365, tout en s’assurant que leurs utilisateurs ne pourront accéder qu’à des ressources approuvées.</span><span class="sxs-lookup"><span data-stu-id="41b18-104">Large organizations that emphasize security want to move to cloud services like Office 365, but need to know that their users only can access approved resources.</span></span> <span data-ttu-id="41b18-105">En général, pour gérer l’accès, les entreprises limitent les noms de domaine ou les adresses IP.</span><span class="sxs-lookup"><span data-stu-id="41b18-105">Traditionally, companies restrict domain names or IP addresses when they want to manage access.</span></span> <span data-ttu-id="41b18-106">Cette approche échoue dans un monde où les applications SaaS sont hébergées dans un cloud public et s’exécutent sur des noms de domaine partagés comme outlook.office.com et login.microsoftonline.com.</span><span class="sxs-lookup"><span data-stu-id="41b18-106">This approach fails in a world where SaaS apps are hosted in a public cloud, running on shared domain names like outlook.office.com and login.microsoftonline.com.</span></span> <span data-ttu-id="41b18-107">Le fait de bloquer ces adresses empêche les utilisateurs d’accéder à Outlook sur le web entièrement, au lieu de restreindre simplement leur accès à des identités et des ressources approuvées.</span><span class="sxs-lookup"><span data-stu-id="41b18-107">Blocking these addresses would keep users from accessing Outlook on the web entirely, instead of merely restricting them to approved identities and resources.</span></span>

<span data-ttu-id="41b18-108">La solution d’Azure Active Directory consiste en une fonctionnalité appelée Restrictions du client.</span><span class="sxs-lookup"><span data-stu-id="41b18-108">Azure Active Directory's solution to this challenge is a feature called Tenant Restrictions.</span></span> <span data-ttu-id="41b18-109">Les Restrictions du client permettent aux organisations de contrôler l’accès aux applications cloud SaaS, en fonction du client Azure AD utilisé par les applications pour l’authentification unique.</span><span class="sxs-lookup"><span data-stu-id="41b18-109">Tenant Restrictions enables organizations to control access to SaaS cloud applications, based on the Azure AD tenant the applications use for single sign-on.</span></span> <span data-ttu-id="41b18-110">Par exemple, vous souhaitez peut-être autoriser l’accès aux applications Office 365 de votre organisation, tout en empêchant l’accès aux instances d’autres organisations de ces mêmes applications.</span><span class="sxs-lookup"><span data-stu-id="41b18-110">For example, you may want to allow access to your organization’s Office 365 applications, while preventing access to other organizations’ instances of these same applications.</span></span>  

<span data-ttu-id="41b18-111">Les Restrictions du client permettent aux organisations de spécifier la liste des clients auxquels leurs utilisateurs sont autorisés à accéder.</span><span class="sxs-lookup"><span data-stu-id="41b18-111">Tenant Restrictions gives organizations the ability to specify the list of tenants that their users are permitted to access.</span></span> <span data-ttu-id="41b18-112">Dans ce cas, Azure AD accorde uniquement l’accès à ces clients autorisés.</span><span class="sxs-lookup"><span data-stu-id="41b18-112">Azure AD then only grants access to these permitted tenants.</span></span>

<span data-ttu-id="41b18-113">Cet article se concentre sur les Restrictions du client pour Office 365, mais cette fonctionnalité doit fonctionner avec n’importe quelle application cloud SaaS qui utilise des protocoles d’authentification moderne avec Azure AD pour l’authentification unique.</span><span class="sxs-lookup"><span data-stu-id="41b18-113">This article focuses on Tenant Restrictions for Office 365, but the feature should work with any SaaS cloud app that uses modern authentication protocols with Azure AD for single sign-on.</span></span> <span data-ttu-id="41b18-114">Si vous utilisez des applications SaaS avec un client Azure AD différent du client utilisé par Office 365, assurez-vous que tous les clients nécessaires sont autorisés.</span><span class="sxs-lookup"><span data-stu-id="41b18-114">If you use SaaS apps with a different Azure AD tenant from the tenant used by Office 365, make sure that all required tenants are permitted.</span></span> <span data-ttu-id="41b18-115">Pour plus d’informations sur les applications cloud SaaS, consultez [Active Directory Marketplace](https://azure.microsoft.com/en-us/marketplace/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="41b18-115">For more information about SaaS cloud apps, see the [Active Directory Marketplace](https://azure.microsoft.com/en-us/marketplace/active-directory/).</span></span>

## <a name="how-it-works"></a><span data-ttu-id="41b18-116">Fonctionnement</span><span class="sxs-lookup"><span data-stu-id="41b18-116">How it works</span></span>

<span data-ttu-id="41b18-117">La solution comprend les composants suivants :</span><span class="sxs-lookup"><span data-stu-id="41b18-117">The overall solution comprises the following components:</span></span> 

1. <span data-ttu-id="41b18-118">**Azure AD** : si le paramètre `Restrict-Access-To-Tenants: <permitted tenant list>` est présent, Azure AD émet uniquement des jetons de sécurité pour les clients autorisés.</span><span class="sxs-lookup"><span data-stu-id="41b18-118">**Azure AD** – If the `Restrict-Access-To-Tenants: <permitted tenant list>` is present, Azure AD only issues security tokens for the permitted tenants.</span></span> 

2. <span data-ttu-id="41b18-119">**Infrastructure du serveur proxy local** : un appareil proxy capable d’inspection SSL, configuré pour insérer l’en-tête contenant la liste des clients autorisés dans le trafic destiné à Azure AD.</span><span class="sxs-lookup"><span data-stu-id="41b18-119">**On-premises proxy server infrastructure** – a proxy device capable of SSL inspection, configured to insert the header containing the list of permitted tenants into traffic destined for Azure AD.</span></span> 

3. <span data-ttu-id="41b18-120">**Logiciel client** : pour prendre en charge les Restrictions du client, le logiciel client doit demander des jetons directement à Azure AD, afin que le trafic puisse être intercepté par l’infrastructure du proxy.</span><span class="sxs-lookup"><span data-stu-id="41b18-120">**Client software** – to support Tenant Restrictions, client software must request tokens directly from Azure AD, so that traffic can be intercepted by the proxy infrastructure.</span></span> <span data-ttu-id="41b18-121">Actuellement, les Restrictions du client sont prises en charge par les applications Office 365 basées sur un navigateur et par les clients Office en cas d’utilisation de l’authentification moderne (comme OAuth 2.0).</span><span class="sxs-lookup"><span data-stu-id="41b18-121">Tenant Restrictions is currently supported by browser-based Office 365 applications and by Office clients when modern authentication (like OAuth 2.0) is used.</span></span> 

4. <span data-ttu-id="41b18-122">**Authentification moderne** : les services cloud doivent utiliser l’authentification moderne pour utiliser les Restrictions du client et bloquer l’accès à tous les clients non autorisés.</span><span class="sxs-lookup"><span data-stu-id="41b18-122">**Modern Authentication** – cloud services must use modern authentication to use Tenant Restrictions and block access to all non-permitted tenants.</span></span> <span data-ttu-id="41b18-123">Les services cloud Office 365 doivent être configurés pour utiliser les protocoles d’authentification moderne par défaut.</span><span class="sxs-lookup"><span data-stu-id="41b18-123">Office 365 cloud services must be configured to use modern authentication protocols by default.</span></span> <span data-ttu-id="41b18-124">Pour plus d’informations sur la prise en charge de l’authentification moderne par Office 365, consultez [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) (Authentification moderne Office 365 mise à jour).</span><span class="sxs-lookup"><span data-stu-id="41b18-124">For the latest information on Office 365 support for modern authentication, read [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/).</span></span>

<span data-ttu-id="41b18-125">Le schéma suivant illustre le flux de trafic de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="41b18-125">The following diagram illustrates the high-level traffic flow.</span></span> <span data-ttu-id="41b18-126">L’inspection SSL est requise uniquement pour le trafic vers Azure AD, pas pour le trafic vers les services cloud Office 365.</span><span class="sxs-lookup"><span data-stu-id="41b18-126">SSL inspection is only required on traffic to Azure AD, not to the Office 365 cloud services.</span></span> <span data-ttu-id="41b18-127">Cette distinction est importante car le volume de trafic pour l’authentification auprès d’Azure AD est généralement beaucoup plus faible que le volume de trafic vers les applications SaaS comme Exchange Online et SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="41b18-127">This distinction is important because the traffic volume for authentication to Azure AD is typically much lower than traffic volume to SaaS applications like Exchange Online and SharePoint Online.</span></span>

![Flux de trafic des Restrictions du client - Schéma](./media/active-directory-tenant-restrictions/traffic-flow.png)

## <a name="set-up-tenant-restrictions"></a><span data-ttu-id="41b18-129">Configurer les Restrictions du client</span><span class="sxs-lookup"><span data-stu-id="41b18-129">Set up Tenant Restrictions</span></span>

<span data-ttu-id="41b18-130">Deux étapes sont nécessaires pour bien démarrer avec les Restrictions du client.</span><span class="sxs-lookup"><span data-stu-id="41b18-130">There are two steps to get started with Tenant Restrictions.</span></span> <span data-ttu-id="41b18-131">La première étape consiste à vous assurer que vos clients peuvent se connecter aux adresses correctes.</span><span class="sxs-lookup"><span data-stu-id="41b18-131">The first step is to make sure that your clients can connect to the right addresses.</span></span> <span data-ttu-id="41b18-132">La seconde étape consiste à configurer l’infrastructure de votre proxy.</span><span class="sxs-lookup"><span data-stu-id="41b18-132">The second is to configure your proxy infrastructure.</span></span>

### <a name="urls-and-ip-addresses"></a><span data-ttu-id="41b18-133">URL et adresses IP</span><span class="sxs-lookup"><span data-stu-id="41b18-133">URLs and IP addresses</span></span>

<span data-ttu-id="41b18-134">Pour utiliser les Restrictions du client, vos clients doivent être en mesure de se connecter aux URL AD Azure suivantes pour s’authentifier : login.microsoftonline.com, login.microsoft.com et login.windows.net.</span><span class="sxs-lookup"><span data-stu-id="41b18-134">To use Tenant Restrictions, your clients must be able to connect to the following Azure AD URLs to authenticate: login.microsoftonline.com, login.microsoft.com, and login.windows.net.</span></span> <span data-ttu-id="41b18-135">En outre, pour accéder à Office 365, vos clients doivent également être en mesure de se connecter aux noms de domaine complets/URL et adresses IP définis dans [URL et plages d’adresses IP Office 365](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="41b18-135">Additionally, to access Office 365, your clients must also be able to connect to the FQDNs/URLs and IP addresses defined in [Office 365 URLs and IP address ranges](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span> 

### <a name="proxy-configuration-and-requirements"></a><span data-ttu-id="41b18-136">Configuration du proxy et conditions requises</span><span class="sxs-lookup"><span data-stu-id="41b18-136">Proxy configuration and requirements</span></span>

<span data-ttu-id="41b18-137">La configuration suivante est nécessaire pour activer les Restrictions du client dans l’infrastructure de votre proxy.</span><span class="sxs-lookup"><span data-stu-id="41b18-137">The following configuration is required to enable Tenant Restrictions through your proxy infrastructure.</span></span> <span data-ttu-id="41b18-138">Ce guide est générique, donc consultez la documentation du fabricant de votre proxy pour obtenir les étapes d’implémentation spécifiques.</span><span class="sxs-lookup"><span data-stu-id="41b18-138">This guidance is generic, so you should refer to your proxy vendor’s documentation for specific implementation steps.</span></span>

#### <a name="prerequisites"></a><span data-ttu-id="41b18-139">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="41b18-139">Prerequisites</span></span>

- <span data-ttu-id="41b18-140">Le proxy doit être en mesure d’effectuer l’interception SSL, l’insertion d’en-tête HTTP et de filtrer les destinations à l’aide des noms de domaine complets/URL.</span><span class="sxs-lookup"><span data-stu-id="41b18-140">The proxy must be able to perform SSL interception, HTTP header insertion, and filter destinations using FQDNs/URLs.</span></span> 

- <span data-ttu-id="41b18-141">Les clients doivent approuver la chaîne de certificat présentée par le proxy pour les communications SSL.</span><span class="sxs-lookup"><span data-stu-id="41b18-141">Clients must trust the certificate chain presented by the proxy for SSL communications.</span></span> <span data-ttu-id="41b18-142">Par exemple, si des certificats d’une infrastructure à clé publique interne sont utilisés, le certificat d’autorité de certificat racine émetteur interne doit être approuvé.</span><span class="sxs-lookup"><span data-stu-id="41b18-142">For example, if certificates from an internal PKI are used, the internal issuing root certificate authority certificate must be trusted.</span></span>

- <span data-ttu-id="41b18-143">Cette fonctionnalité est incluse dans les abonnements Office 365, mais si vous souhaitez utiliser les Restrictions du client pour contrôler l’accès à d’autres applications SaaS, alors vous aurez besoin de licences Premium 1 Azure AD.</span><span class="sxs-lookup"><span data-stu-id="41b18-143">This feature is included in Office 365 subscriptions, but if you want to use Tenant Restrictions to control access to other SaaS apps then Azure AD Premium 1 licenses are required.</span></span>

#### <a name="configuration"></a><span data-ttu-id="41b18-144">Configuration</span><span class="sxs-lookup"><span data-stu-id="41b18-144">Configuration</span></span>

<span data-ttu-id="41b18-145">Pour chaque demande entrante sur login.microsoftonline.com, login.microsoft.com et login.windows.net, insérez deux en-têtes HTTP : *Restrict-Access-To-Tenants* et *Restrict-Access-Context*.</span><span class="sxs-lookup"><span data-stu-id="41b18-145">For each incoming request to login.microsoftonline.com, login.microsoft.com, and login.windows.net, insert two HTTP headers: *Restrict-Access-To-Tenants* and *Restrict-Access-Context*.</span></span>

<span data-ttu-id="41b18-146">Les éléments suivants doivent être inclus dans les en-têtes :</span><span class="sxs-lookup"><span data-stu-id="41b18-146">The headers should include the following elements:</span></span> 
- <span data-ttu-id="41b18-147">Pour *Restrict-Access-To-Tenants*, une valeur de \<permitted tenant list\> (liste de clients autorisés), qui est une liste séparée par des virgules des clients auxquels vous souhaitez que les utilisateurs puissent accéder.</span><span class="sxs-lookup"><span data-stu-id="41b18-147">For *Restrict-Access-To-Tenants*, a value of \<permitted tenant list\>, which is a comma-separated list of tenants you want to allow users to access.</span></span> <span data-ttu-id="41b18-148">N’importe quel domaine qui est inscrit auprès d’un client peut être utilisé pour identifier le client dans cette liste.</span><span class="sxs-lookup"><span data-stu-id="41b18-148">Any domain that is registered with a tenant can be used to identify the tenant in this list.</span></span> <span data-ttu-id="41b18-149">Par exemple, pour autoriser l’accès aux clients Contoso et Fabrikam, la paire nom/valeur ressemble à :  `Restrict-Access-To-Tenants: contoso.onmicrosoft.com,fabrikam.onmicrosoft.com`</span><span class="sxs-lookup"><span data-stu-id="41b18-149">For example, to permit access to both Contoso and Fabrikam tenants, the name/value pair looks like:  `Restrict-Access-To-Tenants: contoso.onmicrosoft.com,fabrikam.onmicrosoft.com`</span></span> 
- <span data-ttu-id="41b18-150">Pour *Restrict-Access-Context*, une valeur d’ID de répertoire unique, déclarant quel client définit les Restrictions du client.</span><span class="sxs-lookup"><span data-stu-id="41b18-150">For *Restrict-Access-Context*, a value of a single directory ID, declaring which tenant is setting the Tenant Restrictions.</span></span> <span data-ttu-id="41b18-151">Par exemple, pour déclarer Contoso en tant que client qui définit la stratégie Restrictions du client, la paire nom/valeur ressemble à :  `Restrict-Access-Context: 456ff232-35l2-5h23-b3b3-3236w0826f3d`</span><span class="sxs-lookup"><span data-stu-id="41b18-151">For example, to declare Contoso as the tenant that set the Tenant Restrictions policy, the name/value pair looks like: `Restrict-Access-Context: 456ff232-35l2-5h23-b3b3-3236w0826f3d`</span></span>  

> [!TIP]
> <span data-ttu-id="41b18-152">Vous trouverez votre ID de répertoire dans le [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="41b18-152">You can find your directory ID in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="41b18-153">Connectez-vous en tant qu’administrateur, sélectionnez **Azure Active Directory**, puis sélectionnez **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="41b18-153">Sign in as an administrator, select **Azure Active Directory**, then select **Properties**.</span></span>

<span data-ttu-id="41b18-154">Pour empêcher les utilisateurs d’insérer leur propre en-tête HTTP avec des clients non approuvés, le proxy doit remplacer l’en-tête Restrict-Access-To-Tenants si celui-ci est déjà présent dans la demande entrante.</span><span class="sxs-lookup"><span data-stu-id="41b18-154">To prevent users from inserting their own HTTP header with non-approved tenants, the proxy needs to replace the Restrict-Access-To-Tenants header if it is already present in the incoming request.</span></span> 

<span data-ttu-id="41b18-155">Les clients doivent être forcés à utiliser le proxy pour toutes les demandes à login.microsoftonline.com, login.microsoft.com et login.windows.net.</span><span class="sxs-lookup"><span data-stu-id="41b18-155">Clients must be forced to use the proxy for all requests to login.microsoftonline.com, login.microsoft.com, and login.windows.net.</span></span> <span data-ttu-id="41b18-156">Par exemple, si des fichiers PAC sont utilisés pour indiquer aux clients d’utiliser le proxy, les utilisateurs finaux ne doivent pas être en mesure de modifier ou de désactiver les fichiers PAC.</span><span class="sxs-lookup"><span data-stu-id="41b18-156">For example, if PAC files are used to direct clients to use the proxy, end users should not be able to edit or disable the PAC files.</span></span>

## <a name="the-user-experience"></a><span data-ttu-id="41b18-157">Expérience utilisateur</span><span class="sxs-lookup"><span data-stu-id="41b18-157">The user experience</span></span>

<span data-ttu-id="41b18-158">Cette section présente l’expérience des utilisateurs finaux et des administrateurs.</span><span class="sxs-lookup"><span data-stu-id="41b18-158">This section shows the experience for both end users and admins.</span></span>

### <a name="end-user-experience"></a><span data-ttu-id="41b18-159">Expérience de l’utilisateur final</span><span class="sxs-lookup"><span data-stu-id="41b18-159">End-user experience</span></span>

<span data-ttu-id="41b18-160">Par exemple, un utilisateur sur le réseau Contoso tente d’accéder à l’instance Fabrikam d’une application SaaS partagée comme Outlook Online.</span><span class="sxs-lookup"><span data-stu-id="41b18-160">An example user is on the Contoso network, but is trying to access the Fabrikam instance of a shared SaaS application like Outlook online.</span></span> <span data-ttu-id="41b18-161">Si Contoso est un client non autorisé pour cette instance, la page suivante s’affiche pour l’utilisateur :</span><span class="sxs-lookup"><span data-stu-id="41b18-161">If Contoso is a non-permitted tenant for that instance, the user sees the following page:</span></span>

![Page Accès refusé pour les utilisateurs dans des clients non autorisés](./media/active-directory-tenant-restrictions/end-user-denied.png)

### <a name="admin-experience"></a><span data-ttu-id="41b18-163">Expérience administrateur</span><span class="sxs-lookup"><span data-stu-id="41b18-163">Admin experience</span></span>

<span data-ttu-id="41b18-164">Bien que la configuration des Restrictions du client est effectuée sur l’infrastructure du proxy d’entreprise, les administrateurs peuvent accéder aux rapports sur les Restrictions du client directement dans le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="41b18-164">While configuration of Tenant Restrictions is done on the corporate proxy infrastructure, admins can access the Tenant Restrictions reports in the Azure portal directly.</span></span> <span data-ttu-id="41b18-165">Pour afficher les rapports, accédez à la page de présentation Azure Active Directory, puis à « Autres fonctionnalités ».</span><span class="sxs-lookup"><span data-stu-id="41b18-165">To view the reports, go to the Azure Active Directory Overview page, then look under ‘Other capabilities’.</span></span>

<span data-ttu-id="41b18-166">L’administrateur du client spécifié en tant que client Restricted-Access-Context peut utiliser ce rapport pour afficher toutes les connexions bloquées en raison de la stratégie Restrictions du client, notamment l’identité utilisée et l’ID du répertoire cible.</span><span class="sxs-lookup"><span data-stu-id="41b18-166">The admin for the tenant specified as the Restricted-Access-Context tenant can use this report to see all sign-ins blocked because of the Tenant Restrictions policy, including the identity used and the target directory ID.</span></span>

![Utiliser le portail Azure pour afficher les tentatives de connexion limitées](./media/active-directory-tenant-restrictions/portal-report.png)

<span data-ttu-id="41b18-168">Comme pour les autres rapports dans le portail Azure, vous pouvez utiliser des filtres pour spécifier l’étendue de votre rapport.</span><span class="sxs-lookup"><span data-stu-id="41b18-168">Like other reports in the Azure portal, you can use filters to specify the scope of your report.</span></span> <span data-ttu-id="41b18-169">Vous pouvez filtrer par utilisateur, application, client ou intervalle de temps spécifique.</span><span class="sxs-lookup"><span data-stu-id="41b18-169">You can filter on a specific user, application, client, or time interval.</span></span>

## <a name="office-365-support"></a><span data-ttu-id="41b18-170">Prise en charge d’Office 365</span><span class="sxs-lookup"><span data-stu-id="41b18-170">Office 365 support</span></span>

<span data-ttu-id="41b18-171">Les applications Office 365 doivent répondre à deux critères pour prendre pleinement en charge les Restrictions du client :</span><span class="sxs-lookup"><span data-stu-id="41b18-171">Office 365 applications must meet two criteria to fully support Tenant Restrictions:</span></span>

1. <span data-ttu-id="41b18-172">Le client utilisé prend en charge l’authentification moderne</span><span class="sxs-lookup"><span data-stu-id="41b18-172">The client used supports modern authentication</span></span>
2. <span data-ttu-id="41b18-173">L’authentification moderne est activée comme protocole d’authentification par défaut pour le service cloud.</span><span class="sxs-lookup"><span data-stu-id="41b18-173">Modern authentication is enabled as the default authentication protocol for the cloud service.</span></span>

<span data-ttu-id="41b18-174">Consultez [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) (Authentification moderne Office 365 mise à jour) pour plus d’informations sur les clients Office qui prennent actuellement en charge l’authentification moderne.</span><span class="sxs-lookup"><span data-stu-id="41b18-174">Refer to [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) for the latest information on which Office clients currently support modern authentication.</span></span> <span data-ttu-id="41b18-175">Cette page inclut également des liens vers des instructions relatives à l’activation de l’authentification moderne sur des clients Exchange Online et Skype Entreprise Online spécifiques.</span><span class="sxs-lookup"><span data-stu-id="41b18-175">That page also includes links to instructions for enabling modern authentication on specific Exchange Online and Skype for Business Online tenants.</span></span> <span data-ttu-id="41b18-176">L’authentification moderne est déjà activée par défaut dans SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="41b18-176">Modern authentication is already enabled by default in SharePoint Online.</span></span>

<span data-ttu-id="41b18-177">Les Restrictions du client sont actuellement prises en charge par les applications Office 365 basées sur un navigateur (Portail Office, Yammer, sites SharePoint, Outlook sur le web, etc.).</span><span class="sxs-lookup"><span data-stu-id="41b18-177">Tenant Restrictions is currently supported by Office 365 browser-based applications (the Office Portal, Yammer, SharePoint sites, Outlook on the Web, etc.).</span></span> <span data-ttu-id="41b18-178">Pour les clients lourds (Outlook, Skype Entreprise, Word, Excel, PowerPoint, etc.) Les Restrictions du client peuvent uniquement être appliquées si l’authentification moderne est utilisée.</span><span class="sxs-lookup"><span data-stu-id="41b18-178">For thick clients (Outlook, Skype for Business, Word, Excel, PowerPoint, etc.) Tenant Restrictions can only be enforced when modern authentication is used.</span></span>  

<span data-ttu-id="41b18-179">Les clients Outlook et Skype Entreprise qui prennent en charge l’authentification moderne peuvent continuer à utiliser les protocoles hérités sur les clients où l’authentification moderne n’est pas activée, contournant ainsi les Restrictions du client.</span><span class="sxs-lookup"><span data-stu-id="41b18-179">Outlook and Skype for Business clients that support modern authentication are still able to use legacy protocols against tenants where modern authentication is not enabled, effectively bypassing Tenant Restrictions.</span></span> <span data-ttu-id="41b18-180">Pour Outlook sur Windows, les clients peuvent choisir d’implémenter des restrictions qui empêchent les utilisateurs finaux d’ajouter des comptes de messagerie non approuvés à leurs profils.</span><span class="sxs-lookup"><span data-stu-id="41b18-180">For Outlook on Windows, customers may choose to implement restrictions preventing end users from adding non-approved mail accounts to their profiles.</span></span> <span data-ttu-id="41b18-181">Par exemple, consultez le paramètre de stratégie de groupe [Empêcher l’ajout de comptes Exchange personnalisés](http://gpsearch.azurewebsites.net/default.aspx?ref=1).</span><span class="sxs-lookup"><span data-stu-id="41b18-181">For example, see the [Prevent adding non-default Exchange accounts](http://gpsearch.azurewebsites.net/default.aspx?ref=1) group policy setting.</span></span> <span data-ttu-id="41b18-182">Pour Outlook sur les plateformes non Windows et pour Skype Entreprise sur toutes les plateformes, la prise en charge complète des Restrictions du client n’est actuellement pas disponible.</span><span class="sxs-lookup"><span data-stu-id="41b18-182">For Outlook on non-Windows platforms, and for Skype for Business on all platforms, full support for Tenant Restrictions is not currently available.</span></span>

## <a name="testing"></a><span data-ttu-id="41b18-183">Test</span><span class="sxs-lookup"><span data-stu-id="41b18-183">Testing</span></span>

<span data-ttu-id="41b18-184">Si vous souhaitez tester la fonctionnalité Restrictions du client avant de l’implémenter pour l’ensemble de votre organisation, il existe deux options : une approche basée sur hôte à l’aide d’un outil comme Fiddler ou un déploiement par étapes des paramètres du proxy.</span><span class="sxs-lookup"><span data-stu-id="41b18-184">If you want to try out Tenant Restrictions before implementing it for your whole organization, there are two options: a host-based approach using a tool like Fiddler, or a staged rollout of proxy settings.</span></span>

### <a name="fiddler-for-a-host-based-approach"></a><span data-ttu-id="41b18-185">Fiddler pour une approche basée sur hôte</span><span class="sxs-lookup"><span data-stu-id="41b18-185">Fiddler for a host-based approach</span></span>

<span data-ttu-id="41b18-186">Fiddler est un proxy de débogage web gratuit qui peut être utilisé pour capturer et modifier le trafic HTTP/HTTPS, notamment l’insertion d’en-têtes HTTP.</span><span class="sxs-lookup"><span data-stu-id="41b18-186">Fiddler is a free web debugging proxy that can be used to capture and modify HTTP/HTTPS traffic, including inserting HTTP headers.</span></span> <span data-ttu-id="41b18-187">Pour configurer Fiddler afin de tester les Restrictions du client, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="41b18-187">To configure Fiddler to test Tenant Restrictions, perform the following steps:</span></span>

1.  <span data-ttu-id="41b18-188">[Téléchargez et installez Fiddler](http://www.telerik.com/fiddler).</span><span class="sxs-lookup"><span data-stu-id="41b18-188">[Download and install Fiddler](http://www.telerik.com/fiddler).</span></span>
2.  <span data-ttu-id="41b18-189">Configurez Fiddler pour déchiffrer le trafic HTTPS, conformément à [la documentation d’aide de Fiddler](http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS).</span><span class="sxs-lookup"><span data-stu-id="41b18-189">Configure Fiddler to decrypt HTTPS traffic, per [Fiddler’s help documentation](http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS).</span></span>
3.  <span data-ttu-id="41b18-190">Configurez Fiddler pour insérer les en-têtes *Restrict-Access-To-Tenants* et *Restrict-Access-Context* à l’aide de règles personnalisées :</span><span class="sxs-lookup"><span data-stu-id="41b18-190">Configure Fiddler to insert the *Restrict-Access-To-Tenants* and *Restrict-Access-Context* headers using custom rules:</span></span>
  1. <span data-ttu-id="41b18-191">Dans l’outil débogueur web Fiddler, sélectionnez le menu **Règles** et sélectionnez **Personnaliser les règles...**</span><span class="sxs-lookup"><span data-stu-id="41b18-191">In the Fiddler Web Debugger tool, select the **Rules** menu and select **Customize Rules…**</span></span> <span data-ttu-id="41b18-192">pour ouvrir le fichier CustomRules.</span><span class="sxs-lookup"><span data-stu-id="41b18-192">to open the CustomRules file.</span></span>
  2. <span data-ttu-id="41b18-193">Ajoutez les lignes suivantes au début de la fonction *OnBeforeRequest*.</span><span class="sxs-lookup"><span data-stu-id="41b18-193">Add the following lines at the beginning of the *OnBeforeRequest* function.</span></span> <span data-ttu-id="41b18-194">Remplacez le \<domaine du client\> par un domaine enregistré auprès de votre client, par exemple, contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="41b18-194">Replace \<tenant domain\> with a domain registered with your tenant, for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="41b18-195">Remplacez \<l’ID de répertoire\> par l’identificateur GUID Azure AD de votre client.</span><span class="sxs-lookup"><span data-stu-id="41b18-195">Replace \<directory ID\> with your tenant's Azure AD GUID identifier.</span></span>

  ```
  if (oSession.HostnameIs("login.microsoftonline.com") || oSession.HostnameIs("login.microsoft.com") || oSession.HostnameIs("login.windows.net")){      oSession.oRequest["Restrict-Access-To-Tenants"] = "<tenant domain>";      oSession.oRequest["Restrict-Access-Context"] = "<directory ID>";}
  ```

  <span data-ttu-id="41b18-196">Si vous avez besoin d’autoriser plusieurs clients, utilisez une virgule pour séparer les noms des clients.</span><span class="sxs-lookup"><span data-stu-id="41b18-196">If you need to allow multiple tenants, use a comma to separate the tenant names.</span></span> <span data-ttu-id="41b18-197">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="41b18-197">For example:</span></span>

  ```
  oSession.oRequest["Restrict-Access-To-Tenants"] = "contoso.onmicrosoft.com,fabrikam.onmicrosoft.com";
  ```

4. <span data-ttu-id="41b18-198">Enregistrez et fermez le fichier CustomRules.</span><span class="sxs-lookup"><span data-stu-id="41b18-198">Save and close the CustomRules file.</span></span>

<span data-ttu-id="41b18-199">Après avoir configuré Fiddler, vous pouvez capturer le trafic en accédant au menu **Fichier** et en sélectionnant **Capturer le trafic**.</span><span class="sxs-lookup"><span data-stu-id="41b18-199">After you configure Fiddler, you can capture traffic by going to the **File** menu and selecting **Capture Traffic**.</span></span>

### <a name="staged-rollout-of-proxy-settings"></a><span data-ttu-id="41b18-200">Déploiement par étapes des paramètres du proxy</span><span class="sxs-lookup"><span data-stu-id="41b18-200">Staged rollout of proxy settings</span></span>

<span data-ttu-id="41b18-201">En fonction des capacités de votre infrastructure de proxy, vous pourriez être en mesure d’étalonner le déploiement des paramètres pour vos utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="41b18-201">Depending on the capabilities of your proxy infrastructure, you may be able to stage the rollout of settings to your users.</span></span> <span data-ttu-id="41b18-202">Voici deux options principales à prendre en compte :</span><span class="sxs-lookup"><span data-stu-id="41b18-202">Here are a couple high-level options for consideration:</span></span>

1.  <span data-ttu-id="41b18-203">Utilisez des fichiers PAC pour pointer les utilisateurs test vers une infrastructure de proxy test, tandis que les utilisateurs normaux continuent à utiliser l’infrastructure du proxy de production.</span><span class="sxs-lookup"><span data-stu-id="41b18-203">Use PAC files to point test users to a test proxy infrastructure, while normal users continue to use the production proxy infrastructure.</span></span>
2.  <span data-ttu-id="41b18-204">Certains serveurs proxy peuvent prendre en charge des configurations différentes à l’aide de groupes.</span><span class="sxs-lookup"><span data-stu-id="41b18-204">Some proxy servers may support different configurations using groups.</span></span>

<span data-ttu-id="41b18-205">Consultez la documentation de votre serveur proxy pour obtenir des informations spécifiques.</span><span class="sxs-lookup"><span data-stu-id="41b18-205">Refer to your proxy server documentation for specific details.</span></span>

## <a name="next-steps"></a><span data-ttu-id="41b18-206">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="41b18-206">Next steps</span></span>

- <span data-ttu-id="41b18-207">En savoir plus sur [l’authentification moderne Office 365 mise à jour](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/)</span><span class="sxs-lookup"><span data-stu-id="41b18-207">Read about [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/)</span></span>

- <span data-ttu-id="41b18-208">Consultez les [URL et plages d’adresses IP Office 365](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</span><span class="sxs-lookup"><span data-stu-id="41b18-208">Review the [Office 365 URLs and IP address ranges](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</span></span>
