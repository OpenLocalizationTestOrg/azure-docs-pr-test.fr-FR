---
title: "Considérations relatives à l’aaaSecurity pour le Proxy d’Application Azure AD | Documents Microsoft"
description: "Couvre les considérations de sécurité lors de l’utilisation du proxy d’application Azure AD"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="1f375-103">Considérations de sécurité pour l’accès aux applications à distance avec le proxy d’application Azure AD</span><span class="sxs-lookup"><span data-stu-id="1f375-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="1f375-104">Cet article explique comment le proxy d’application Azure Active Directory fournit un service sécurisé pour la publication et l’accès à distance de vos applications.</span><span class="sxs-lookup"><span data-stu-id="1f375-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="1f375-105">Hello ci-dessous diagramme illustre comment Azure AD permet de sécuriser l’accès à distance tooyour des applications locales.</span><span class="sxs-lookup"><span data-stu-id="1f375-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Diagramme illustrant l’accès sécurisé à distance via le proxy d’application Azure AD](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="1f375-107">Avantages en matière de sécurité</span><span class="sxs-lookup"><span data-stu-id="1f375-107">Security benefits</span></span>

<span data-ttu-id="1f375-108">Proxy d’Application Azure AD offre hello avantages de sécurité suivants :</span><span class="sxs-lookup"><span data-stu-id="1f375-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="1f375-109">Accès authentifié</span><span class="sxs-lookup"><span data-stu-id="1f375-109">Authenticated access</span></span> 

<span data-ttu-id="1f375-110">Si vous choisissez toouse Azure Active Directory la pré-authentification, uniquement les connexions authentifiées peuvent accéder à votre réseau.</span><span class="sxs-lookup"><span data-stu-id="1f375-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="1f375-111">Proxy d’Application Azure AD s’appuie sur hello AD Azure service jeton de sécurité (STS) pour toutes les authentifications.</span><span class="sxs-lookup"><span data-stu-id="1f375-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="1f375-112">La pré-authentification, par sa nature, bloque un nombre important d’attaques anonymes, uniquement les identités authentifiées pouvant accéder à l’application principale de hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="1f375-113">Si vous choisissez Passthrough comme méthode de préauthentification, vous ne bénéficiez pas de cet avantage.</span><span class="sxs-lookup"><span data-stu-id="1f375-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="1f375-114">Accès conditionnel</span><span class="sxs-lookup"><span data-stu-id="1f375-114">Conditional access</span></span>

<span data-ttu-id="1f375-115">Appliquer des contrôles de stratégie plus riches avant tooyour réseau sont établies les connexions.</span><span class="sxs-lookup"><span data-stu-id="1f375-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="1f375-116">Avec [accès conditionnel](active-directory-conditional-access-azuread-connected-apps.md), vous pouvez définir des restrictions sur le trafic est autorisé à tooaccess vos applications principales.</span><span class="sxs-lookup"><span data-stu-id="1f375-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="1f375-117">Vous pouvez créer des stratégies qui limitent les connexions en fonction de l’emplacement, de la force de l’authentification et du profil de risque de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f375-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="1f375-118">Vous pouvez également utiliser les stratégies d’authentification multifacteur tooconfigure accès conditionnel en ajoutant une autre couche d’authentification de sécurité tooyour utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f375-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="1f375-119">Arrêt du trafic</span><span class="sxs-lookup"><span data-stu-id="1f375-119">Traffic termination</span></span>

<span data-ttu-id="1f375-120">Tout le trafic est arrêté dans le cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="1f375-121">Étant donné que le Proxy d’Application Azure AD est un proxy inverse, toutes les applications de tooback-end du trafic se termine au niveau de service de hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="1f375-122">Hello session peut obtenir rétablie uniquement avec le serveur principal de hello, ce qui signifie que vos serveurs principaux ne sont pas exposées toodirect HTTP du trafic.</span><span class="sxs-lookup"><span data-stu-id="1f375-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="1f375-123">Cette configuration signifie que vous êtes mieux protégé contre les attaques ciblées.</span><span class="sxs-lookup"><span data-stu-id="1f375-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="1f375-124">Tous les accès sont sortants</span><span class="sxs-lookup"><span data-stu-id="1f375-124">All access is outbound</span></span> 

<span data-ttu-id="1f375-125">Vous n’avez pas besoin réseau de l’entreprise toohello tooopen les connexions entrantes.</span><span class="sxs-lookup"><span data-stu-id="1f375-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="1f375-126">Connecteur de Proxy d’application utilisent uniquement le service de Proxy d’Application les connexions sortantes toohello Azure AD, ce qui signifie qu’il est inutile tooopen des ports de pare-feu pour les connexions entrantes.</span><span class="sxs-lookup"><span data-stu-id="1f375-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="1f375-127">Proxys traditionnels requis d’un réseau de périmètre (également appelé *DMZ*, *zone démilitarisée*, ou *sous-réseau filtré*) et autorisés l’accès toounauthenticated connexions en périphérie du réseau hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="1f375-128">Ce scénario requis nombreux investissement supplémentaire dans l’application web le trafic tooanalyze de produits de pare-feu et offre addition protections toohello environnement.</span><span class="sxs-lookup"><span data-stu-id="1f375-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="1f375-129">Avec le proxy d’application, vous pouvez même vous passer de réseau de périmètre, car toutes les connexions sont sortantes et sur un canal sécurisé.</span><span class="sxs-lookup"><span data-stu-id="1f375-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="1f375-130">Pour plus d’informations sur les connecteurs, consultez [Présentation des connecteurs de proxy d’application Azure AD](application-proxy-understand-connectors.md).</span><span class="sxs-lookup"><span data-stu-id="1f375-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="1f375-131">Analyse à l’échelle du cloud et apprentissage automatique</span><span class="sxs-lookup"><span data-stu-id="1f375-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="1f375-132">Bénéficiez d’une protection de sécurité de pointe.</span><span class="sxs-lookup"><span data-stu-id="1f375-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="1f375-133">Car il fait partie d’Azure Active Directory, le Proxy d’Application peut tirer parti de [Azure AD Identity Protection](active-directory-identityprotection.md), avec intelligence contrôlée par l’apprentissage automatique d’ordinateur et les données à partir de Microsoft Security Response Center de hello et Digital Crimes Unit.</span><span class="sxs-lookup"><span data-stu-id="1f375-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="1f375-134">Ensemble, nous identifions de façon proactive les comptes compromis et offrons une protection en temps réel contre les connexions à haut risque. Nous prenons en compte divers facteurs, dont l’accès à partir d’appareils infectés et à travers des réseaux anonymes, ainsi qu’à partir d’emplacements atypiques et peu probables.</span><span class="sxs-lookup"><span data-stu-id="1f375-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="1f375-135">Nombre de ces rapports et événements sont déjà disponibles via une API pour l’intégration avec vos systèmes de gestion des événements et des informations de sécurité.</span><span class="sxs-lookup"><span data-stu-id="1f375-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="1f375-136">Accès à distance en tant que service</span><span class="sxs-lookup"><span data-stu-id="1f375-136">Remote access as a service</span></span>

<span data-ttu-id="1f375-137">Vous n’avez pas tooworry sur la gestion et la mise à jour corrective sur des serveurs locaux.</span><span class="sxs-lookup"><span data-stu-id="1f375-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="1f375-138">Les logiciels sans correctifs sont toujours responsables d’un grand nombre d’attaques.</span><span class="sxs-lookup"><span data-stu-id="1f375-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="1f375-139">Proxy d’Application Azure AD est un service de l’échelle de l’Internet détenues par Microsoft, afin de toujours obtenir les derniers correctifs de sécurité hello et les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="1f375-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="1f375-140">sécurité de hello tooimprove des applications publiées par le Proxy d’Application Azure AD, nous bloquons robots de robot web à partir de l’indexation et l’archivage de vos applications.</span><span class="sxs-lookup"><span data-stu-id="1f375-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="1f375-141">Chaque fois qu’un robot web tente de récupérer les paramètres de robots d’une application publiée, le proxy d’application répond avec un fichier robots.txt qui inclut `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="1f375-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="1f375-142">Dans les coulisses de hello</span><span class="sxs-lookup"><span data-stu-id="1f375-142">Under hello hood</span></span>

<span data-ttu-id="1f375-143">Le proxy d’application Azure Active Directory se compose de deux parties :</span><span class="sxs-lookup"><span data-stu-id="1f375-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="1f375-144">services de cloud computing de Hello : ce service s’exécute dans Azure et est l’endroit de connexions de client / l’utilisateur externe hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="1f375-145">[Hello connecteur local](application-proxy-understand-connectors.md): un composant de local, le connecteur de hello écoute les demandes de service de Proxy d’Application hello Azure AD et gère les applications internes toohello de connexions.</span><span class="sxs-lookup"><span data-stu-id="1f375-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="1f375-146">Un flux de connecteur de hello et le service de Proxy d’Application hello est établi lorsque :</span><span class="sxs-lookup"><span data-stu-id="1f375-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="1f375-147">connecteur de Hello est tout d’abord configurer.</span><span class="sxs-lookup"><span data-stu-id="1f375-147">hello connector is first set up.</span></span>
* <span data-ttu-id="1f375-148">connecteur de Hello extrait les informations de configuration de hello service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="1f375-149">Un utilisateur accède à une application publiée.</span><span class="sxs-lookup"><span data-stu-id="1f375-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="1f375-150">Toutes les communications se produisent sur le protocole SSL, et ils proviennent toujours hello connecteur toohello service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="1f375-151">service de Hello est sortant uniquement.</span><span class="sxs-lookup"><span data-stu-id="1f375-151">hello service is outbound only.</span></span>

<span data-ttu-id="1f375-152">connecteur de Hello utilise un toohello tooauthenticate du certificat client service de Proxy d’Application pour presque tous les appels.</span><span class="sxs-lookup"><span data-stu-id="1f375-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="1f375-153">Hello uniquement exception toothis processus est étape de la configuration initiale de hello, où le certificat de client hello est établie.</span><span class="sxs-lookup"><span data-stu-id="1f375-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="1f375-154">L’installation du connecteur de hello</span><span class="sxs-lookup"><span data-stu-id="1f375-154">Installing hello connector</span></span>

<span data-ttu-id="1f375-155">Lorsque le connecteur de hello est définissez tout d’abord, hello après le transfert d’événements ont lieu :</span><span class="sxs-lookup"><span data-stu-id="1f375-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="1f375-156">service de toohello Hello connecteur d’enregistrement se produit dans le cadre de l’installation de hello du connecteur de hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="1f375-157">Les utilisateurs est invités à tooenter leurs informations d’identification administrateur de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1f375-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="1f375-158">Le jeton obtenu à partir de cette authentification est ensuite présenté service de Proxy d’Application Azure AD toohello.</span><span class="sxs-lookup"><span data-stu-id="1f375-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="1f375-159">Hello service Proxy d’Application évalue le jeton de hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="1f375-160">Elle garantit que l’utilisateur hello est un administrateur d’entreprise au sein de client de hello hello jeton a été émis pour.</span><span class="sxs-lookup"><span data-stu-id="1f375-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="1f375-161">Si l’utilisateur de hello n’est pas un administrateur, le processus de hello est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="1f375-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="1f375-162">connecteur de Hello génère une demande de certificat client et le passe, ainsi que de toohello de jeton, hello service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="1f375-163">service de Hello à son tour vérifie le jeton de hello et signe la demande de certificat de client hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="1f375-164">connecteur de Hello utilise un certificat de client hello pour les communications futures avec hello service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="1f375-165">connecteur de Hello effectue une extraction initiale des données de configuration du système hello service hello à l’aide de son certificat de client, et il est maintenant prêt tootake demandes.</span><span class="sxs-lookup"><span data-stu-id="1f375-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="1f375-166">Mise à jour des paramètres de configuration hello</span><span class="sxs-lookup"><span data-stu-id="1f375-166">Updating hello configuration settings</span></span>

<span data-ttu-id="1f375-167">Chaque fois que hello service Proxy d’Application des mises à jour les paramètres de configuration hello, hello après le transfert d’événements ont lieu :</span><span class="sxs-lookup"><span data-stu-id="1f375-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="1f375-168">connecteur de Hello connecte de point de terminaison de configuration toohello dans hello service Proxy d’Application à l’aide de son certificat de client.</span><span class="sxs-lookup"><span data-stu-id="1f375-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="1f375-169">Après la validation de certificat de client hello, hello service Proxy d’Application retourne le connecteur de toohello de données de configuration (par exemple, groupe de connecteur hello hello connecteur doit être partie).</span><span class="sxs-lookup"><span data-stu-id="1f375-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="1f375-170">Si le certificat actuel hello est plus de 180 jours, le connecteur de hello génère une demande de certificat, laquelle efficacement met à jour les certificats de client hello tous les 180 jours.</span><span class="sxs-lookup"><span data-stu-id="1f375-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="1f375-171">Accès aux applications publiées</span><span class="sxs-lookup"><span data-stu-id="1f375-171">Accessing published applications</span></span>

<span data-ttu-id="1f375-172">Lorsque les utilisateurs accèdent à une application publiée, hello événements suivants se produisent entre le service de Proxy d’Application hello et le connecteur de Proxy d’Application hello :</span><span class="sxs-lookup"><span data-stu-id="1f375-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="1f375-173">service de Hello authentifie l’utilisateur hello pour une application hello</span><span class="sxs-lookup"><span data-stu-id="1f375-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="1f375-174">service de Hello place une demande dans la file d’attente du connecteur hello</span><span class="sxs-lookup"><span data-stu-id="1f375-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="1f375-175">Un connecteur traite la demande hello à partir de la file d’attente hello</span><span class="sxs-lookup"><span data-stu-id="1f375-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="1f375-176">connecteur de Hello attend une réponse</span><span class="sxs-lookup"><span data-stu-id="1f375-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="1f375-177">utilisateur Hello flux données toohello</span><span class="sxs-lookup"><span data-stu-id="1f375-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="1f375-178">toolearn en savoir plus sur ce qui se passe dans chacune de ces étapes, conserver la lecture.</span><span class="sxs-lookup"><span data-stu-id="1f375-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="1f375-179">1. service de hello authentifie utilisateur hello pour une application hello</span><span class="sxs-lookup"><span data-stu-id="1f375-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="1f375-180">Si vous avez configuré hello application toouse relais en tant que sa méthode de pré-authentification, étapes hello dans cette section sont ignorés.</span><span class="sxs-lookup"><span data-stu-id="1f375-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="1f375-181">Si vous avez configuré hello application toopreauthenticate avec Azure AD, les utilisateurs sont redirigé toohello tooauthenticate de STS Azure AD et hello étapes suivantes ont lieu :</span><span class="sxs-lookup"><span data-stu-id="1f375-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="1f375-182">Vérification du Proxy d’application pour des exigences de stratégie d’accès conditionnel pour application hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="1f375-183">Cette étape garantit que toohello application a été affecté à cet utilisateur hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="1f375-184">Si la vérification en deux étapes est nécessaire, la séquence d’authentification hello demande utilisateur hello une deuxième méthode d’authentification.</span><span class="sxs-lookup"><span data-stu-id="1f375-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="1f375-185">Une fois que toutes les vérifications ont réussi, hello Azure AD STS émet un jeton signé pour l’application hello et redirections hello toohello arrière d’utilisateur service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="1f375-186">Le Proxy d’application vérifie que ce jeton hello a été émis application hello de toocorrect.</span><span class="sxs-lookup"><span data-stu-id="1f375-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="1f375-187">Il effectue également les autres contrôles, tels que vous être assuré que hello jeton a été signé par Azure AD et qu’il est toujours dans la fenêtre valide hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="1f375-188">Le Proxy d’application définit un tooindicate de cookie d’authentification chiffré qui application toohello de l’authentification s’est produite.</span><span class="sxs-lookup"><span data-stu-id="1f375-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="1f375-189">Hello cookie inclut un horodatage d’expiration qui est basé sur le jeton hello d’Azure AD et d’autres données, comme le nom d’utilisateur hello hello d’authentification est basée sur.</span><span class="sxs-lookup"><span data-stu-id="1f375-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="1f375-190">cookie de Hello est chiffré avec une clé privée est connue uniquement toohello service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="1f375-191">Application Proxy redirections hello utilisateur précédent toohello les URL initialement demandée.</span><span class="sxs-lookup"><span data-stu-id="1f375-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="1f375-192">Si une partie des étapes de la pré-authentification hello échoue, demande de l’utilisateur hello est refusé et utilisateur de hello s’affiche un message indiquant la source hello problème de hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="1f375-193">2. service de hello place une demande dans la file d’attente du connecteur hello</span><span class="sxs-lookup"><span data-stu-id="1f375-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="1f375-194">Connecteurs de conserver un toohello ouvrir de connexion sortante service Proxy d’Application.</span><span class="sxs-lookup"><span data-stu-id="1f375-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="1f375-195">Lorsqu’une demande arrive, service de hello des files d’attente demande hello sur l’une des connexions ouvertes de hello pour toopick de connecteur hello haut.</span><span class="sxs-lookup"><span data-stu-id="1f375-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="1f375-196">demande de Hello inclut des éléments à partir de l’application hello, tels que les en-têtes de demande hello, les données à partir du cookie de hello chiffré, hello utilisateur qui demande de hello et hello ID de la demande</span><span class="sxs-lookup"><span data-stu-id="1f375-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="1f375-197">Bien que les données à partir du cookie chiffré de hello sont envoyées avec la demande de hello, cookie d’authentification hello lui-même n’est pas.</span><span class="sxs-lookup"><span data-stu-id="1f375-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="1f375-198">3. hello connecteur processus hello demande à partir de la file d’attente hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="1f375-199">En fonction de la demande de hello, le Proxy d’Application effectue l’une des hello suivant des actions :</span><span class="sxs-lookup"><span data-stu-id="1f375-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="1f375-200">Si la demande de hello est une opération simple (par exemple, il n’existe aucune donnée dans le corps de hello en l’état avec un RESTful *obtenir* demande), connecteur de hello, une ressource interne de connexion toohello cible et puis attend une réponse.</span><span class="sxs-lookup"><span data-stu-id="1f375-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="1f375-201">Si la demande de hello a des données associées dans le corps de hello (par exemple, un RESTful *POST* opération), connecteur de hello établit une connexion sortante à l’aide d’instance du Proxy d’Application hello client certificat toohello.</span><span class="sxs-lookup"><span data-stu-id="1f375-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="1f375-202">Il met connexion toorequest hello et ouvrir une ressource interne toohello de connexion.</span><span class="sxs-lookup"><span data-stu-id="1f375-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="1f375-203">Après avoir reçu la demande de hello connecteur de hello, service de Proxy d’Application hello commence à accepter le contenu à partir de l’utilisateur de hello et transmet le connecteur toohello de données.</span><span class="sxs-lookup"><span data-stu-id="1f375-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="1f375-204">connecteur de Hello, transfère à son tour, les ressources internes du toohello données hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="1f375-205">4. connecteur de hello attend une réponse.</span><span class="sxs-lookup"><span data-stu-id="1f375-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="1f375-206">Une fois la demande de hello et transmission de contenu toohello dans fin terminée, le connecteur de hello attend une réponse.</span><span class="sxs-lookup"><span data-stu-id="1f375-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="1f375-207">Après avoir reçu une réponse, connecteur de hello rend un service de Proxy d’Application toohello connexion sortante, tooreturn hello les détails de l’en-tête et commencer la diffusion en continu de données de retour hello.</span><span class="sxs-lookup"><span data-stu-id="1f375-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="1f375-208">5. hello flux données toohello utilisateur.</span><span class="sxs-lookup"><span data-stu-id="1f375-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="1f375-209">Une partie du traitement de l’application hello peut se produire ici.</span><span class="sxs-lookup"><span data-stu-id="1f375-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="1f375-210">Si vous avez configuré les URL ou les en-têtes de tootranslate le Proxy d’Application dans votre application, que le traitement se produit en fonction des besoins au cours de cette étape.</span><span class="sxs-lookup"><span data-stu-id="1f375-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="1f375-211">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="1f375-211">Next steps</span></span>

[<span data-ttu-id="1f375-212">Considérations sur la topologie du réseau lors de l’utilisation du proxy d’application Azure AD</span><span class="sxs-lookup"><span data-stu-id="1f375-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="1f375-213">Présentation des connecteurs de proxy d’application Azure AD</span><span class="sxs-lookup"><span data-stu-id="1f375-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
