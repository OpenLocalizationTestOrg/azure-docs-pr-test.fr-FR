---
title: "Fonctionnement des données distribuées dans Azure SQL Data Warehouse | Microsoft Docs"
description: "Découvrez le mode de distribution des données pour le traitement massivement parallèle (MPP) ainsi que les options de distribution des tables dans Azure SQL Data Warehouse et Parallel Data Warehouse."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 3c166acb17193caae32d7bad133ec510ff679353
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="48aff-103">Données et tables distribuées pour le traitement massivement parallèle (MPP)</span><span class="sxs-lookup"><span data-stu-id="48aff-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="48aff-104">Découvrez comment les données utilisateur sont distribuées dans Azure SQL Data Warehouse et Parallel Data Warehouse, qui sont des systèmes de traitement massivement parallèle (MPP) de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="48aff-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="48aff-105">En concevant votre entrepôt de données pour qu’il utilise les données distribuées, vous bénéficiez des avantages de l’architecture MPP en termes de traitement des requêtes.</span><span class="sxs-lookup"><span data-stu-id="48aff-105">Designing your data warehouse to use distributed data effectively helps you to achieve the query processing benefits of the MPP architecture.</span></span> <span data-ttu-id="48aff-106">Certains choix de conception de base de données peuvent avoir un impact significatif sur l’amélioration des performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="48aff-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="48aff-107">Azure SQL Data Warehouse et Parallel Data Warehouse utilisent le même traitement massivement parallèle (MPP), mais ils présentent quelques différences au niveau de la plateforme sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="48aff-107">Azure SQL Data Warehouse and Parallel Data Warehouse use the same Massively Parallel Processing (MPP) design, but they have a few differences because of the underlying platform.</span></span> <span data-ttu-id="48aff-108">SQL Data Warehouse est une plateforme PaaS (Platform as a Service) qui s’exécute sur Azure.</span><span class="sxs-lookup"><span data-stu-id="48aff-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="48aff-109">Parallel Data Warehouse s’exécute sur Analytics Platform System (APS), une application locale qui s’exécute sur Windows Server.</span><span class="sxs-lookup"><span data-stu-id="48aff-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="48aff-110">Présentation des données distribuées</span><span class="sxs-lookup"><span data-stu-id="48aff-110">What is distributed data?</span></span>
<span data-ttu-id="48aff-111">Dans SQL Data Warehouse et Parallel Data Warehouse, les données distribuées désignent les données utilisateur qui sont stockées dans plusieurs emplacements sur le système MPP.</span><span class="sxs-lookup"><span data-stu-id="48aff-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers to user data that is stored in multiple locations across the MPP system.</span></span> <span data-ttu-id="48aff-112">Chacun de ces emplacements fonctionne comme une unité de stockage et de traitement indépendante, qui exécute des requêtes sur sa partie des données.</span><span class="sxs-lookup"><span data-stu-id="48aff-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of the data.</span></span> <span data-ttu-id="48aff-113">Les données distribuées sont essentielles pour exécuter des requêtes en parallèle et obtenir des performances de traitement élevées.</span><span class="sxs-lookup"><span data-stu-id="48aff-113">Distributed data is fundamental to running queries in parallel to achieve high query performance.</span></span>

<span data-ttu-id="48aff-114">Pour distribuer des données, l’entrepôt de données affecte chaque ligne d’une table utilisateur à un emplacement distribué.</span><span class="sxs-lookup"><span data-stu-id="48aff-114">To distribute data, the data warehouse assigns each row of a user table to one distributed location.</span></span>  <span data-ttu-id="48aff-115">Vous pouvez distribuer des tables par hachage ou par tourniquet.</span><span class="sxs-lookup"><span data-stu-id="48aff-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="48aff-116">La méthode de distribution est spécifiée dans l’instruction CREATE TABLE.</span><span class="sxs-lookup"><span data-stu-id="48aff-116">The distribution method is specified in the CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="48aff-117">Tables distribuées par hachage</span><span class="sxs-lookup"><span data-stu-id="48aff-117">Hash-distributed tables</span></span>
<span data-ttu-id="48aff-118">Le schéma suivant illustre comment une table complète (non distribuée) est stockée sous la forme d’une table distribuée par hachage.</span><span class="sxs-lookup"><span data-stu-id="48aff-118">The following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="48aff-119">Une fonction déterministe attribue chaque ligne à une distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-119">A deterministic function assigns each row to belong to one distribution.</span></span> <span data-ttu-id="48aff-120">Dans la définition de la table, une des colonnes est désignée comme colonne de distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-120">In the table definition, one of the columns is designated as the distribution column.</span></span> <span data-ttu-id="48aff-121">La fonction de hachage utilise valeur située dans la colonne de distribution pour allouer chaque ligne à une distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-121">The hash function uses the value in the distribution column to assign each row to a distribution.</span></span>

<span data-ttu-id="48aff-122">Les critères de performances, comme la distinction, l’inclinaison de données et les types de requête exécutés sur le système, conditionne le choix de la colonne de distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-122">There are performance considerations for the selection of a distribution column, such as distinctness, data skew, and the types of queries run on the system.</span></span>

<span data-ttu-id="48aff-123">![Table distribuée](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Table distribuée")</span><span class="sxs-lookup"><span data-stu-id="48aff-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="48aff-124">Chaque ligne appartient à une distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-124">Each row belongs to one distribution.</span></span>  
* <span data-ttu-id="48aff-125">Un algorithme de hachage déterministe attribue chaque ligne à une distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-125">A deterministic hash algorithm assigns each row to one distribution.</span></span>  
* <span data-ttu-id="48aff-126">Le nombre de lignes de table par distribution varie selon la taille des tables.</span><span class="sxs-lookup"><span data-stu-id="48aff-126">The number of table rows per distribution varies as shown by the different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="48aff-127">Tables distribuées par tourniquet</span><span class="sxs-lookup"><span data-stu-id="48aff-127">Round-robin distributed tables</span></span>
<span data-ttu-id="48aff-128">Une table distribuée par tourniquet distribue les lignes en les allouant à une distribution de façon séquentielle.</span><span class="sxs-lookup"><span data-stu-id="48aff-128">A round-robin distributed table distributes the rows by assigning each row to a distribution in a sequential manner.</span></span> <span data-ttu-id="48aff-129">Cette méthode permet de charger rapidement des données dans une table de type tourniquet, mais le traitement des requêtes peut être plus lent.</span><span class="sxs-lookup"><span data-stu-id="48aff-129">It is quick to load data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="48aff-130">En général, la jointure d’une table de type tourniquet implique un remaniement des lignes pour permettre à la requête de produire un résultat exact, ce qui prend du temps.</span><span class="sxs-lookup"><span data-stu-id="48aff-130">Joining a round-robin table usually requires reshuffling the rows to enable the query to produce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="48aff-131">Les emplacements de stockage distribués sont appelés des distributions.</span><span class="sxs-lookup"><span data-stu-id="48aff-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="48aff-132">Chaque emplacement distribué est appelé une distribution.</span><span class="sxs-lookup"><span data-stu-id="48aff-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="48aff-133">Lorsqu’une requête s’exécute en parallèle, chaque distribution exécute une requête SQL sur sa partie des données.</span><span class="sxs-lookup"><span data-stu-id="48aff-133">When a query runs in parallel, each distribution performs a SQL query on its portion of the data.</span></span> <span data-ttu-id="48aff-134">SQL Data Warehouse utilise SQL Database pour exécuter la requête.</span><span class="sxs-lookup"><span data-stu-id="48aff-134">SQL Data Warehouse uses SQL Database to run the query.</span></span> <span data-ttu-id="48aff-135">Parallel Data Warehouse utilise SQL Server pour exécuter la requête.</span><span class="sxs-lookup"><span data-stu-id="48aff-135">Parallel Data Warehouse uses SQL Server to run the query.</span></span> <span data-ttu-id="48aff-136">Cette architecture sans partage est essentielle pour la montée en puissance du calcul parallèle.</span><span class="sxs-lookup"><span data-stu-id="48aff-136">This shared-nothing architecture design is fundamental to achieving scale-out parallel computing.</span></span>

### <a name="can-i-view-the-distributions"></a><span data-ttu-id="48aff-137">Puis-je afficher les distributions ?</span><span class="sxs-lookup"><span data-stu-id="48aff-137">Can I view the distributions?</span></span>
<span data-ttu-id="48aff-138">Chaque distribution possède un ID et s’affiche dans les vues système de SQL Data Warehouse et Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="48aff-138">Each distribution has a distribution ID and is visible in system views that pertain to SQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="48aff-139">Vous pouvez utiliser l’ID de distribution pour résoudre les problèmes de performances des requêtes, entre autres.</span><span class="sxs-lookup"><span data-stu-id="48aff-139">You can use the distribution ID to troubleshoot query performance and other problems.</span></span> <span data-ttu-id="48aff-140">Pour obtenir la liste des vues système, cliquez [ici](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="48aff-140">For a list of the system views, see the [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="48aff-141">Différence entre une distribution et un nœud de calcul</span><span class="sxs-lookup"><span data-stu-id="48aff-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="48aff-142">La distribution est l’unité de base qui stocke les données distribuées et traite les requêtes en parallèle.</span><span class="sxs-lookup"><span data-stu-id="48aff-142">A distribution is the basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="48aff-143">Les distributions sont regroupées en nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="48aff-144">Chaque nœud de calcul gère une ou plusieurs distributions.</span><span class="sxs-lookup"><span data-stu-id="48aff-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="48aff-145">Analytique Platform System utilise les nœuds de calcul comme un composant central de l’architecture matérielle et des fonctionnalités de montée en puissance.</span><span class="sxs-lookup"><span data-stu-id="48aff-145">Analytics Platform System uses Compute nodes as a central component of the hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="48aff-146">Il inclut toujours huit distributions par nœud de calcul, comme indiqué dans le schéma des tables distribuées par hachage.</span><span class="sxs-lookup"><span data-stu-id="48aff-146">It always uses eight distributions per Compute node, as shown in the diagram for hash-distributed tables.</span></span> <span data-ttu-id="48aff-147">Le nombre de nœuds de calcul, et donc de distributions, correspond au nombre de nœuds de calcul que vous achetez pour l’application.</span><span class="sxs-lookup"><span data-stu-id="48aff-147">The number of Compute nodes, and therefore the number of distributions, is determined by the number of Compute nodes you purchase for the appliance.</span></span> <span data-ttu-id="48aff-148">Par exemple, si vous achetez huit nœuds, vous obtenez 64 distributions (8 nœuds x 8 distributions/nœud).</span><span class="sxs-lookup"><span data-stu-id="48aff-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="48aff-149">SQL Data Warehouse a un nombre fixe de 60 distributions et un nombre variable de nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="48aff-150">Les nœuds de calcul sont implémentés avec les ressources de calcul et de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="48aff-150">The Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="48aff-151">Le nombre de nœuds de calcul peut varier en fonction de la charge de travail du service principal et de la capacité de calcul (unités DWU) que vous spécifiez pour l’entrepôt de données.</span><span class="sxs-lookup"><span data-stu-id="48aff-151">The number of Compute nodes can change according to the backend service workload and the computing capacity (DWUs) you specify for the data warehouse.</span></span> <span data-ttu-id="48aff-152">Lorsque le nombre de nœuds de calcul change, le nombre de distributions par nœud change également.</span><span class="sxs-lookup"><span data-stu-id="48aff-152">When the number of Compute nodes changes, the number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-the-compute-nodes"></a><span data-ttu-id="48aff-153">Puis-je afficher les nœuds de calcul ?</span><span class="sxs-lookup"><span data-stu-id="48aff-153">Can I view the Compute nodes?</span></span>
<span data-ttu-id="48aff-154">Chaque nœud de calcul possède un ID et s’affiche dans les vues système de SQL Data Warehouse et Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="48aff-154">Each Compute node has a node ID and is visible in system views that pertain to SQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="48aff-155">Vous pouvez visualiser le nœud de calcul en effectuant une recherche dans la colonne node_id des vues système dont le nom commence par sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="48aff-155">You can see the Compute node by looking for the node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="48aff-156">Pour obtenir la liste des vues système, cliquez [ici](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="48aff-156">For a list of the system views, see the [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="48aff-157"><a name="Replicated"></a>Tables répliquées</span><span class="sxs-lookup"><span data-stu-id="48aff-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="48aff-158">Une table répliquée possède une copie complète de la table stockée sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-158">A table that is replicated has a fully copy of the table stored on each Compute node.</span></span> <span data-ttu-id="48aff-159">La réplication d’une table évite le transfert de données entre des nœuds de calcul avant une jointure ou une agrégation.</span><span class="sxs-lookup"><span data-stu-id="48aff-159">Replicating a table removes the need to transfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="48aff-160">Seules les tables de petite taille sont réplicables, en raison de l’espace de stockage supplémentaire requis pour les stocker intégralement sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-160">Replicated tables are only feasible with small tables because of the extra storage required to store the full table on each compute node.</span></span>  

<span data-ttu-id="48aff-161">Le diagramme suivant illustre une table répliquée stockée sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-161">The following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="48aff-162">Pour SQL Data Warehouse, la table répliquée est entièrement copiée dans une base de données de distribution sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-162">For SQL Data Warehouse, the replicated table is fully copied to a distribution database on each Compute node.</span></span> <span data-ttu-id="48aff-163">Pour Parallel Data Warehouse, la table répliquée est stockée sur tous les disques alloués au nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="48aff-163">For Parallel Data Warehouse, the replicated table is stored across all disks assigned to the Compute node.</span></span>  <span data-ttu-id="48aff-164">Cette stratégie de disque met en œuvre des groupes de fichiers SQL Server.</span><span class="sxs-lookup"><span data-stu-id="48aff-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="48aff-165">![Table répliquée](media/sql-data-warehouse-distributed-data/replicated-table.png "Table répliquée")</span><span class="sxs-lookup"><span data-stu-id="48aff-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="48aff-166">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="48aff-166">Next steps</span></span>
<span data-ttu-id="48aff-167">Pour utiliser efficacement les tables distribuées, consultez [Distributing tables in SQL Data Warehouse (Distribution de tables dans SQL Data Warehouse)](sql-data-warehouse-tables-distribute.md).</span><span class="sxs-lookup"><span data-stu-id="48aff-167">To use distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  

