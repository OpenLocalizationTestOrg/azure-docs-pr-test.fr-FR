---
title: "aaaHow distributed fonctionnement des données dans l’entrepôt de données SQL Azure | Documents Microsoft"
description: "Découvrez comment les données sont distribuées pour des options massivement parallèles de traitement (MPP) et hello pour distribuer des tables dans Azure SQL Data Warehouse et Parallel Data Warehouse."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 9a712d8d5251e4391ede245105918283aaa4b193
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="eb352-103">Données et tables distribuées pour le traitement massivement parallèle (MPP)</span><span class="sxs-lookup"><span data-stu-id="eb352-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="eb352-104">Découvrez comment les données utilisateur sont distribuées dans Azure SQL Data Warehouse et Parallel Data Warehouse, qui sont des systèmes de traitement massivement parallèle (MPP) de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="eb352-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="eb352-105">Conception de votre toouse de l’entrepôt de données données distribuées permettent effectivement vous tooachieve hello du traitement des requêtes avantages de l’architecture MPP de hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-105">Designing your data warehouse toouse distributed data effectively helps you tooachieve hello query processing benefits of hello MPP architecture.</span></span> <span data-ttu-id="eb352-106">Certains choix de conception de base de données peuvent avoir un impact significatif sur l’amélioration des performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="eb352-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="eb352-107">Azure SQL Data Warehouse et hello d’utilisation Parallel Data Warehouse (MPP) le traitement parallèle massif même concevoir, mais ont quelques différences en raison de hello sous-jacent de plateforme.</span><span class="sxs-lookup"><span data-stu-id="eb352-107">Azure SQL Data Warehouse and Parallel Data Warehouse use hello same Massively Parallel Processing (MPP) design, but they have a few differences because of hello underlying platform.</span></span> <span data-ttu-id="eb352-108">SQL Data Warehouse est une plateforme PaaS (Platform as a Service) qui s’exécute sur Azure.</span><span class="sxs-lookup"><span data-stu-id="eb352-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="eb352-109">Parallel Data Warehouse s’exécute sur Analytics Platform System (APS), une application locale qui s’exécute sur Windows Server.</span><span class="sxs-lookup"><span data-stu-id="eb352-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="eb352-110">Présentation des données distribuées</span><span class="sxs-lookup"><span data-stu-id="eb352-110">What is distributed data?</span></span>
<span data-ttu-id="eb352-111">Dans l’entrepôt de données SQL et Parallel Data Warehouse, les données distribuées fait référence toouser les données qui sont stockées dans plusieurs emplacements sur hello système MPP.</span><span class="sxs-lookup"><span data-stu-id="eb352-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers toouser data that is stored in multiple locations across hello MPP system.</span></span> <span data-ttu-id="eb352-112">Chacun de ces emplacements fonctionne comme un stockage indépendant et d’une unité de traitement qui exécute des requêtes sur sa partie des données de hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of hello data.</span></span> <span data-ttu-id="eb352-113">Données distribuées sont toorunning fondamentaux des requêtes parallèles tooachieve haute performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="eb352-113">Distributed data is fundamental toorunning queries in parallel tooachieve high query performance.</span></span>

<span data-ttu-id="eb352-114">toodistribute des données, l’entrepôt de données hello attribue à chaque ligne d’un emplacement de tooone distribuée de table utilisateur.</span><span class="sxs-lookup"><span data-stu-id="eb352-114">toodistribute data, hello data warehouse assigns each row of a user table tooone distributed location.</span></span>  <span data-ttu-id="eb352-115">Vous pouvez distribuer des tables par hachage ou par tourniquet.</span><span class="sxs-lookup"><span data-stu-id="eb352-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="eb352-116">méthode de distribution Hello est spécifié dans hello l’instruction CREATE TABLE.</span><span class="sxs-lookup"><span data-stu-id="eb352-116">hello distribution method is specified in hello CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="eb352-117">Tables distribuées par hachage</span><span class="sxs-lookup"><span data-stu-id="eb352-117">Hash-distributed tables</span></span>
<span data-ttu-id="eb352-118">Hello suivant le diagramme illustre comment un complet (table non distribuées) est stocké comme une table de hachage distribué.</span><span class="sxs-lookup"><span data-stu-id="eb352-118">hello following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="eb352-119">Une fonction déterministe assigne chaque distribution tooone toobelong des lignes.</span><span class="sxs-lookup"><span data-stu-id="eb352-119">A deterministic function assigns each row toobelong tooone distribution.</span></span> <span data-ttu-id="eb352-120">Dans la définition de la table hello, une des colonnes de hello est désignée en tant que colonne de distribution hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-120">In hello table definition, one of hello columns is designated as hello distribution column.</span></span> <span data-ttu-id="eb352-121">fonction de hachage Hello utilise valeur hello hello distribution colonne tooassign chaque distribution tooa de ligne.</span><span class="sxs-lookup"><span data-stu-id="eb352-121">hello hash function uses hello value in hello distribution column tooassign each row tooa distribution.</span></span>

<span data-ttu-id="eb352-122">Il existe des considérations de performances pour la sélection d’une colonne de distribution, telles que la distinction, inclinaison de données et les types de requêtes exécutées sur le système de hello hello hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-122">There are performance considerations for hello selection of a distribution column, such as distinctness, data skew, and hello types of queries run on hello system.</span></span>

<span data-ttu-id="eb352-123">![Table distribuée](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Table distribuée")</span><span class="sxs-lookup"><span data-stu-id="eb352-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="eb352-124">Chaque ligne appartient tooone distribution.</span><span class="sxs-lookup"><span data-stu-id="eb352-124">Each row belongs tooone distribution.</span></span>  
* <span data-ttu-id="eb352-125">Un algorithme de hachage déterministe assigne chaque distribution tooone de ligne.</span><span class="sxs-lookup"><span data-stu-id="eb352-125">A deterministic hash algorithm assigns each row tooone distribution.</span></span>  
* <span data-ttu-id="eb352-126">nombre de Hello de lignes de table par distribution varie comme indiqué par hello différentes tailles de tables.</span><span class="sxs-lookup"><span data-stu-id="eb352-126">hello number of table rows per distribution varies as shown by hello different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="eb352-127">Tables distribuées par tourniquet</span><span class="sxs-lookup"><span data-stu-id="eb352-127">Round-robin distributed tables</span></span>
<span data-ttu-id="eb352-128">Une table distribuée alternée distribue les lignes de hello en affectant chaque distribution tooa des lignes de manière séquentielle.</span><span class="sxs-lookup"><span data-stu-id="eb352-128">A round-robin distributed table distributes hello rows by assigning each row tooa distribution in a sequential manner.</span></span> <span data-ttu-id="eb352-129">Tooload rapide des données dans une table de tourniquet, mais les performances des requêtes peuvent être plus lent.</span><span class="sxs-lookup"><span data-stu-id="eb352-129">It is quick tooload data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="eb352-130">Jointure d’une table de répétition alternée généralement requiert remaniement hello lignes tooenable hello requête tooproduce un résultat exact, qui prend du temps.</span><span class="sxs-lookup"><span data-stu-id="eb352-130">Joining a round-robin table usually requires reshuffling hello rows tooenable hello query tooproduce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="eb352-131">Les emplacements de stockage distribués sont appelés des distributions.</span><span class="sxs-lookup"><span data-stu-id="eb352-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="eb352-132">Chaque emplacement distribué est appelé une distribution.</span><span class="sxs-lookup"><span data-stu-id="eb352-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="eb352-133">Lorsqu’une requête s’exécute en parallèle, chaque point de distribution effectue une requête SQL sur sa partie des données de hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-133">When a query runs in parallel, each distribution performs a SQL query on its portion of hello data.</span></span> <span data-ttu-id="eb352-134">Entrepôt de données SQL utilise la requête de base de données SQL toorun hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-134">SQL Data Warehouse uses SQL Database toorun hello query.</span></span> <span data-ttu-id="eb352-135">Parallel Data Warehouse utilise la requête SQL Server toorun hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-135">Parallel Data Warehouse uses SQL Server toorun hello query.</span></span> <span data-ttu-id="eb352-136">Cette conception d’architecture sans partage est montée en puissance parallèle tooachieving fondamentaux calcul parallèle.</span><span class="sxs-lookup"><span data-stu-id="eb352-136">This shared-nothing architecture design is fundamental tooachieving scale-out parallel computing.</span></span>

### <a name="can-i-view-hello-distributions"></a><span data-ttu-id="eb352-137">Afficher les distributions hello ?</span><span class="sxs-lookup"><span data-stu-id="eb352-137">Can I view hello distributions?</span></span>
<span data-ttu-id="eb352-138">Chaque point de distribution possède un ID de distribution et n’est visible dans les vues système qui se rapportent tooSQL l’entrepôt de données et Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="eb352-138">Each distribution has a distribution ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="eb352-139">Vous pouvez utiliser les performances des requêtes tootroubleshoot hello distribution ID et autres problèmes.</span><span class="sxs-lookup"><span data-stu-id="eb352-139">You can use hello distribution ID tootroubleshoot query performance and other problems.</span></span> <span data-ttu-id="eb352-140">Pour obtenir la liste de vues du système hello, consultez hello [vue de système MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="eb352-140">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="eb352-141">Différence entre une distribution et un nœud de calcul</span><span class="sxs-lookup"><span data-stu-id="eb352-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="eb352-142">Une distribution est une unité de base de hello pour le stockage de données distribuées et le traitement des requêtes en parallèle.</span><span class="sxs-lookup"><span data-stu-id="eb352-142">A distribution is hello basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="eb352-143">Les distributions sont regroupées en nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="eb352-144">Chaque nœud de calcul gère une ou plusieurs distributions.</span><span class="sxs-lookup"><span data-stu-id="eb352-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="eb352-145">Système de plateforme Analytique utilise des nœuds de calcul comme un composant central de hello matériel architecture et avec montée en charge les fonctions.</span><span class="sxs-lookup"><span data-stu-id="eb352-145">Analytics Platform System uses Compute nodes as a central component of hello hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="eb352-146">Elle utilise toujours les huit distributions par nœud de calcul, comme indiqué dans le diagramme hello pour les tables de hachage distribué.</span><span class="sxs-lookup"><span data-stu-id="eb352-146">It always uses eight distributions per Compute node, as shown in hello diagram for hash-distributed tables.</span></span> <span data-ttu-id="eb352-147">Hello du nombre de nœuds de calcul et par conséquent hello nombre de distributions, est déterminée par un nombre de nœuds de calcul que vous achetez pour dispositif de hello hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-147">hello number of Compute nodes, and therefore hello number of distributions, is determined by hello number of Compute nodes you purchase for hello appliance.</span></span> <span data-ttu-id="eb352-148">Par exemple, si vous achetez huit nœuds, vous obtenez 64 distributions (8 nœuds x 8 distributions/nœud).</span><span class="sxs-lookup"><span data-stu-id="eb352-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="eb352-149">SQL Data Warehouse a un nombre fixe de 60 distributions et un nombre variable de nœuds de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="eb352-150">les nœuds de calcul Hello sont implémentés avec des ressources de calcul et de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="eb352-150">hello Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="eb352-151">nombre de Hello de nœuds de calcul peut changer en fonction toohello principal service la charge de travail et hello des capacités informatiques (Dwu) vous spécifiez pour l’entrepôt de données hello.</span><span class="sxs-lookup"><span data-stu-id="eb352-151">hello number of Compute nodes can change according toohello backend service workload and hello computing capacity (DWUs) you specify for hello data warehouse.</span></span> <span data-ttu-id="eb352-152">Lorsque hello des nœuds de calcul changent, nombre de hello de distributions par nœud de calcul change également.</span><span class="sxs-lookup"><span data-stu-id="eb352-152">When hello number of Compute nodes changes, hello number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-hello-compute-nodes"></a><span data-ttu-id="eb352-153">Puis-je afficher les nœuds de calcul hello ?</span><span class="sxs-lookup"><span data-stu-id="eb352-153">Can I view hello Compute nodes?</span></span>
<span data-ttu-id="eb352-154">Chaque nœud de calcul possède un ID de nœud et est visible dans les vues système qui se rapportent tooSQL l’entrepôt de données et Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="eb352-154">Each Compute node has a node ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="eb352-155">Vous pouvez voir le nœud de calcul hello en recherchant la colonne de node_id hello dans les vues système dont les noms commencent par sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="eb352-155">You can see hello Compute node by looking for hello node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="eb352-156">Pour obtenir la liste de vues du système hello, consultez hello [vue de système MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="eb352-156">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="eb352-157"><a name="Replicated"></a>Tables répliquées</span><span class="sxs-lookup"><span data-stu-id="eb352-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="eb352-158">Une table est répliquée possède un entièrement la copie de la table de hello stockées sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-158">A table that is replicated has a fully copy of hello table stored on each Compute node.</span></span> <span data-ttu-id="eb352-159">Réplication d’une table supprime les données de tootransfer besoin de hello entre les nœuds de calcul avant une jointure ou une agrégation.</span><span class="sxs-lookup"><span data-stu-id="eb352-159">Replicating a table removes hello need tootransfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="eb352-160">Les tables répliquées sont uniquement possibles avec les tables de petite taille en raison de hello table complète de stockage supplémentaire requis toostore hello sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-160">Replicated tables are only feasible with small tables because of hello extra storage required toostore hello full table on each compute node.</span></span>  

<span data-ttu-id="eb352-161">Hello diagramme suivant illustre une table répliquée est stockée sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-161">hello following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="eb352-162">Pour SQL Data Warehouse, répliquée hello est la base de données de distribution tooa entièrement copiée sur chaque nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-162">For SQL Data Warehouse, hello replicated table is fully copied tooa distribution database on each Compute node.</span></span> <span data-ttu-id="eb352-163">Pour Parallel Data Warehouse, table répliquée de hello est stocké sur tous les disques affectés toohello de nœud de calcul.</span><span class="sxs-lookup"><span data-stu-id="eb352-163">For Parallel Data Warehouse, hello replicated table is stored across all disks assigned toohello Compute node.</span></span>  <span data-ttu-id="eb352-164">Cette stratégie de disque met en œuvre des groupes de fichiers SQL Server.</span><span class="sxs-lookup"><span data-stu-id="eb352-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="eb352-165">![Table répliquée](media/sql-data-warehouse-distributed-data/replicated-table.png "Table répliquée")</span><span class="sxs-lookup"><span data-stu-id="eb352-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="eb352-166">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="eb352-166">Next steps</span></span>
<span data-ttu-id="eb352-167">les tables toouse distribué efficacement, consultez [distribuer des tables SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span><span class="sxs-lookup"><span data-stu-id="eb352-167">toouse distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  

