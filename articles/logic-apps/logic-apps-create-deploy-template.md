---
title: "aaaCreate des modèles de déploiement pour Azure Logic Apps | Documents Microsoft"
description: "Création de modèles Azure Resource Manager pour le déploiement d’applications logiques et la gestion des versions"
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 85928ec6-d7cb-488e-926e-2e5db89508ee
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.custom: H1Hack27Feb2017
ms.date: 10/18/2016
ms.author: LADocs; jehollan
ms.openlocfilehash: 2f09445f10a376a745d6acbba94ca29d5f79fc09
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="create-templates-for-logic-apps-deployment-and-release-management"></a><span data-ttu-id="48b59-103">Création de modèles pour le déploiement d’applications logiques et la gestion des versions</span><span class="sxs-lookup"><span data-stu-id="48b59-103">Create templates for logic apps deployment and release management</span></span>

<span data-ttu-id="48b59-104">Après avoir créé une application logique, vous souhaiterez peut-être toocreate sous la forme d’un modèle Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="48b59-104">After a logic app has been created, you might want toocreate it as an Azure Resource Manager template.</span></span>
<span data-ttu-id="48b59-105">De cette manière, vous pouvez facilement déployer environnement de tooany application hello logique ou un groupe de ressources où vous en aurez besoin.</span><span class="sxs-lookup"><span data-stu-id="48b59-105">This way, you can easily deploy hello logic app tooany environment or resource group where you might need it.</span></span>
<span data-ttu-id="48b59-106">Pour en savoir plus sur les modèles Resource Manager, consultez les articles sur la [création de modèles Azure Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md) et le [déploiement de ressources à l’aide de modèles Azure Resource Manager](../azure-resource-manager/resource-group-template-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="48b59-106">For more about Resource Manager templates, see [authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md) and [deploying resources by using Azure Resource Manager templates](../azure-resource-manager/resource-group-template-deploy.md).</span></span>

## <a name="logic-app-deployment-template"></a><span data-ttu-id="48b59-107">Modèle de déploiement de l’application logique</span><span class="sxs-lookup"><span data-stu-id="48b59-107">Logic app deployment template</span></span>

<span data-ttu-id="48b59-108">Une application logique possède trois composants de base :</span><span class="sxs-lookup"><span data-stu-id="48b59-108">A logic app has three basic components:</span></span>

* <span data-ttu-id="48b59-109">**Ressources d’application logique**: contient des informations sur les éléments tels que les prix de plan, l’emplacement et définition de workflow hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-109">**Logic app resource**: Contains information about things like pricing plan, location, and hello workflow definition.</span></span>
* <span data-ttu-id="48b59-110">**Définition de workflow**: décrit les étapes du flux de travail de votre application logique et comment moteur de Logic Apps hello doit exécuter les flux de travail hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-110">**Workflow definition**: Describes your logic app's workflow steps and how hello Logic Apps engine should execute hello workflow.</span></span>
<span data-ttu-id="48b59-111">Vous pouvez afficher cette définition dans la fenêtre **Mode Code** de votre application logique.</span><span class="sxs-lookup"><span data-stu-id="48b59-111">You can view this definition in your logic app's **Code View** window.</span></span>
<span data-ttu-id="48b59-112">Dans la ressource application hello logique, vous pouvez trouver cette définition Bonjour `definition` propriété.</span><span class="sxs-lookup"><span data-stu-id="48b59-112">In hello logic app resource, you can find this definition in hello `definition` property.</span></span>
* <span data-ttu-id="48b59-113">**Connexions**: fait référence à des ressources tooseparate qui stockent les métadonnées relatives à toutes les connexions du connecteur, par exemple une chaîne de connexion et un jeton d’accès en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="48b59-113">**Connections**: Refers tooseparate resources that securely store metadata about any connector connections, such as a connection string and an access token.</span></span>
<span data-ttu-id="48b59-114">Dans la ressource application hello logique, votre application logique fait référence à ces ressources Bonjour `parameters` section.</span><span class="sxs-lookup"><span data-stu-id="48b59-114">In hello logic app resource, your logic app references these resources in hello `parameters` section.</span></span>

<span data-ttu-id="48b59-115">Vous pouvez afficher tous ces éléments pour les applications logiques existantes en utilisant un outil tel que [l’Explorateur de ressources Azure](http://resources.azure.com).</span><span class="sxs-lookup"><span data-stu-id="48b59-115">You can view all these pieces of existing logic apps by using a tool like [Azure Resource Explorer](http://resources.azure.com).</span></span>

<span data-ttu-id="48b59-116">toomake un modèle pour un toouse application logique avec les déploiements de groupe de ressources, vous devez définir des ressources de hello et paramétrer en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="48b59-116">toomake a template for a logic app toouse with resource group deployments, you must define hello resources and parameterize as needed.</span></span>
<span data-ttu-id="48b59-117">Par exemple, si vous déployez un environnement de production, test et développement de tooa, vous préférerez certainement toouse connexion différentes chaînes tooa base de données SQL dans chaque environnement.</span><span class="sxs-lookup"><span data-stu-id="48b59-117">For example, if you're deploying tooa development, test, and production environment, you likely want toouse different connection strings tooa SQL database in each environment.</span></span>
<span data-ttu-id="48b59-118">Ou bien, vous souhaiterez toodeploy dans différents abonnements ou les groupes de ressources.</span><span class="sxs-lookup"><span data-stu-id="48b59-118">Or, you might want toodeploy within different subscriptions or resource groups.</span></span>  

## <a name="create-a-logic-app-deployment-template"></a><span data-ttu-id="48b59-119">Création d’un modèle de déploiement d’applications logiques</span><span class="sxs-lookup"><span data-stu-id="48b59-119">Create a logic app deployment template</span></span>

<span data-ttu-id="48b59-120">toohave de façon plus simple Hello un modèle de déploiement d’application logique valide est toouse le [Visual Studio Tools pour Logic Apps](logic-apps-deploy-from-vs.md).</span><span class="sxs-lookup"><span data-stu-id="48b59-120">hello easiest way toohave a valid logic app deployment template is toouse the [Visual Studio Tools for Logic Apps](logic-apps-deploy-from-vs.md).</span></span>
<span data-ttu-id="48b59-121">outils de Visual Studio Hello génèrent un modèle de déploiement valide qui peut être utilisé sur n’importe quel abonnement ou l’emplacement.</span><span class="sxs-lookup"><span data-stu-id="48b59-121">hello Visual Studio tools generate a valid deployment template that can be used across any subscription or location.</span></span>

<span data-ttu-id="48b59-122">Certains autres outils peuvent vous être utiles lorsque vous créez un modèle de déploiement d’application logique.</span><span class="sxs-lookup"><span data-stu-id="48b59-122">A few other tools can assist you as you create a logic app deployment template.</span></span>
<span data-ttu-id="48b59-123">Vous pouvez créer manuellement, autrement dit, à l’aide de hello ressources déjà abordé ici toocreate paramètres en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="48b59-123">You can author by hand, that is, by using hello resources already discussed here toocreate parameters as needed.</span></span>
<span data-ttu-id="48b59-124">Une autre option consiste à toouse un [créateur de modèle d’application logique](https://github.com/jeffhollan/LogicAppTemplateCreator) module PowerShell.</span><span class="sxs-lookup"><span data-stu-id="48b59-124">Another option is toouse a [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell module.</span></span> <span data-ttu-id="48b59-125">Ce module open source évalue d’abord application logique de hello et toutes les connexions qu’il utilise et génère ensuite les ressources de modèle avec les paramètres nécessaires hello pour le déploiement.</span><span class="sxs-lookup"><span data-stu-id="48b59-125">This open-source module first evaluates hello logic app and any connections that it is using, and then generates template resources with hello necessary parameters for deployment.</span></span>
<span data-ttu-id="48b59-126">Par exemple, si vous avez une application de logique qui reçoit un message d’une file d’attente Azure Service Bus et ajoute la base de données SQL Azure données tooan, outil de hello préserve toute la logique d’orchestration hello et adapte hello SQL et les chaînes de connexion de Service Bus afin qu’ils peuvent être définies au moment du déploiement.</span><span class="sxs-lookup"><span data-stu-id="48b59-126">For example, if you have a logic app that receives a message from an Azure Service Bus queue and adds data tooan Azure SQL database, hello tool preserves all hello orchestration logic and parameterizes hello SQL and Service Bus connection strings so that they can be set at deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="48b59-127">Les connexions doivent être dans hello même groupe de ressources en tant qu’application logique de hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-127">Connections must be within hello same resource group as hello logic app.</span></span>
>
>

### <a name="install-hello-logic-app-template-powershell-module"></a><span data-ttu-id="48b59-128">Installez le module PowerShell modèle hello logique application</span><span class="sxs-lookup"><span data-stu-id="48b59-128">Install hello logic app template PowerShell module</span></span>
<span data-ttu-id="48b59-129">le module Hello plus simple façon tooinstall hello est via hello [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), en utilisant la commande hello `Install-Module -Name LogicAppTemplate`.</span><span class="sxs-lookup"><span data-stu-id="48b59-129">hello easiest way tooinstall hello module is via hello [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), by using hello command `Install-Module -Name LogicAppTemplate`.</span></span>  

<span data-ttu-id="48b59-130">Module PowerShell de hello peut s’installer également pas manuellement :</span><span class="sxs-lookup"><span data-stu-id="48b59-130">You also can install hello PowerShell module manually:</span></span>

1. <span data-ttu-id="48b59-131">Télécharger la version la plus récente de hello hello [créateur de modèle d’application logique](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span><span class="sxs-lookup"><span data-stu-id="48b59-131">Download hello latest release of hello [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span></span>  
2. <span data-ttu-id="48b59-132">Extraire le dossier hello dans votre dossier de module PowerShell (généralement `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span><span class="sxs-lookup"><span data-stu-id="48b59-132">Extract hello folder in your PowerShell module folder (usually `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span></span>

<span data-ttu-id="48b59-133">Pour toowork de module hello avec l’accès client et d’abonnement jeton, nous vous recommandons d’utiliser il avec hello [ARMClient](https://github.com/projectkudu/ARMClient) outil de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="48b59-133">For hello module toowork with any tenant and subscription access token, we recommend that you use it with hello [ARMClient](https://github.com/projectkudu/ARMClient) command-line tool.</span></span>  <span data-ttu-id="48b59-134">Ce [billet de blog ](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) présente ARMClient de façon plus détaillée.</span><span class="sxs-lookup"><span data-stu-id="48b59-134">This [blog post](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) discusses ARMClient in more detail.</span></span>

### <a name="generate-a-logic-app-template-by-using-powershell"></a><span data-ttu-id="48b59-135">Générer un modèle d’application logique à l’aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="48b59-135">Generate a logic app template by using PowerShell</span></span>
<span data-ttu-id="48b59-136">Une fois que PowerShell est installé, vous pouvez générer un modèle à l’aide de hello de commande suivante :</span><span class="sxs-lookup"><span data-stu-id="48b59-136">After PowerShell is installed, you can generate a template by using hello following command:</span></span>

`armclient token $SubscriptionId | Get-LogicAppTemplate -LogicApp MyApp -ResourceGroup MyRG -SubscriptionId $SubscriptionId -Verbose | Out-File C:\template.json`

<span data-ttu-id="48b59-137">`$SubscriptionId`est l’ID d’abonnement Azure hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-137">`$SubscriptionId` is hello Azure subscription ID.</span></span> <span data-ttu-id="48b59-138">Cette ligne obtient d’abord un accès jeton via ARMClient, puis il dirige via toohello script PowerShell, puis crée le modèle de hello dans un fichier JSON.</span><span class="sxs-lookup"><span data-stu-id="48b59-138">This line first gets an access token via ARMClient, then pipes it through toohello PowerShell script, and then creates hello template in a JSON file.</span></span>

## <a name="add-parameters-tooa-logic-app-template"></a><span data-ttu-id="48b59-139">Ajouter le modèle d’application de paramètres tooa logique</span><span class="sxs-lookup"><span data-stu-id="48b59-139">Add parameters tooa logic app template</span></span>
<span data-ttu-id="48b59-140">Après avoir créé votre modèle d’application logique, vous pouvez continuer tooadd ou modifier les paramètres que vous devrez peut-être.</span><span class="sxs-lookup"><span data-stu-id="48b59-140">After you create your logic app template, you can continue tooadd or modify parameters that you might need.</span></span> <span data-ttu-id="48b59-141">Par exemple, si votre définition inclut un ID de ressource tooan fonction Azure ou d’un workflow imbriqué que vous envisagez de toodeploy dans un déploiement unique, vous pourrez ajouter un modèle de tooyour plusieurs ressources et paramétrer des ID en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="48b59-141">For example, if your definition includes a resource ID tooan Azure function or nested workflow that you plan toodeploy in a single deployment, you can add more resources tooyour template and parameterize IDs as needed.</span></span> <span data-ttu-id="48b59-142">Hello va de même tooany références toocustom API Swagger points de terminaison ou vous attendez toodeploy avec chaque groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="48b59-142">hello same applies tooany references toocustom APIs or Swagger endpoints you expect toodeploy with each resource group.</span></span>

## <a name="deploy-a-logic-app-template"></a><span data-ttu-id="48b59-143">Déployer un modèle d’application logique</span><span class="sxs-lookup"><span data-stu-id="48b59-143">Deploy a logic app template</span></span>

<span data-ttu-id="48b59-144">Vous pouvez déployer votre modèle à l’aide d’outils, tels que PowerShell, l’API REST, [Visual Studio Team Services Release Management](#team-services)et de déploiement de modèle via hello portail Azure.</span><span class="sxs-lookup"><span data-stu-id="48b59-144">You can deploy your template by using any tools like PowerShell, REST API, [Visual Studio Team Services Release Management](#team-services), and template deployment through hello Azure portal.</span></span>
<span data-ttu-id="48b59-145">En outre, les valeurs hello toostore des paramètres, nous vous recommandons de créer un [fichier de paramètres](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span><span class="sxs-lookup"><span data-stu-id="48b59-145">Also, toostore hello values for parameters, we recommend that you create a [parameter file](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span></span>
<span data-ttu-id="48b59-146">Découvrez comment trop[déployer des ressources avec PowerShell et les modèles Azure Resource Manager](../azure-resource-manager/resource-group-template-deploy.md) ou [déployer des ressources avec des modèles Azure Resource Manager et hello Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span><span class="sxs-lookup"><span data-stu-id="48b59-146">Learn how too[deploy resources with Azure Resource Manager templates and PowerShell](../azure-resource-manager/resource-group-template-deploy.md) or [deploy resources with Azure Resource Manager templates and hello Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span></span>

### <a name="authorize-oauth-connections"></a><span data-ttu-id="48b59-147">Autoriser des connexions OAuth</span><span class="sxs-lookup"><span data-stu-id="48b59-147">Authorize OAuth connections</span></span>

<span data-ttu-id="48b59-148">Après le déploiement, application logique de hello fonctionne de bout en bout avec des paramètres valides.</span><span class="sxs-lookup"><span data-stu-id="48b59-148">After deployment, hello logic app works end-to-end with valid parameters.</span></span>
<span data-ttu-id="48b59-149">Toutefois, vous devez toujours autoriser OAuth connexions toogenerate un jeton d’accès valide.</span><span class="sxs-lookup"><span data-stu-id="48b59-149">However, you must still authorize OAuth connections toogenerate a valid access token.</span></span>
<span data-ttu-id="48b59-150">tooauthorize OAuth connexions, ouvrez l’application logique de hello Bonjour logique de concepteur d’applications et autoriser ces connexions.</span><span class="sxs-lookup"><span data-stu-id="48b59-150">tooauthorize OAuth connections, open hello logic app in hello Logic Apps Designer, and authorize these connections.</span></span> <span data-ttu-id="48b59-151">Ou, pour un déploiement automatisé, vous pouvez utiliser un tooeach de tooconsent script OAuth connexion.</span><span class="sxs-lookup"><span data-stu-id="48b59-151">Or for automated deployment, you can use a script tooconsent tooeach OAuth connection.</span></span>
<span data-ttu-id="48b59-152">Vous trouverez un exemple de script sur GitHub sous le projet [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) .</span><span class="sxs-lookup"><span data-stu-id="48b59-152">There's an example script on GitHub under the [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) project.</span></span>

<a name="team-services"></a>
## <a name="visual-studio-team-services-release-management"></a><span data-ttu-id="48b59-153">Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="48b59-153">Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="48b59-154">Un scénario courant pour déployer et gérer un environnement est toouse un outil tel que de la gestion des versions dans Visual Studio Team Services avec un modèle de déploiement d’application logique.</span><span class="sxs-lookup"><span data-stu-id="48b59-154">A common scenario for deploying and managing an environment is toouse a tool like Release Management in Visual Studio Team Services, with a logic app deployment template.</span></span> <span data-ttu-id="48b59-155">Visual Studio Team Services inclut un [déployer un groupe de ressources Azure](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) tâches que vous pouvez ajouter tooany build ou libérer le pipeline.</span><span class="sxs-lookup"><span data-stu-id="48b59-155">Visual Studio Team Services includes a [Deploy Azure Resource Group](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) task that you can add tooany build or release pipeline.</span></span> <span data-ttu-id="48b59-156">Vous devez toohave une [principal du service](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) pour l’autorisation toodeploy et que vous pouvez générer définition de la version hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-156">You need toohave a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) for authorization toodeploy, and then you can generate hello release definition.</span></span>

1. <span data-ttu-id="48b59-157">Dans Release Management, sélectionnez **Vide** pour créer une définition vide.</span><span class="sxs-lookup"><span data-stu-id="48b59-157">In Release Management, select **Empty** so that you create an empty definition.</span></span>

    ![Créer une définition vide][1]

2. <span data-ttu-id="48b59-159">Choisissez le processus de génération de toutes les ressources que vous avez besoin pour cet, probablement notamment hello logique modèle d’application généré manuellement ou en tant que partie de hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-159">Choose any resources you need for this, most likely including hello logic app template that is generated manually or as part of hello build process.</span></span>
3. <span data-ttu-id="48b59-160">Ajoutez une tâche de **déploiement d’un groupe de ressources Azure** .</span><span class="sxs-lookup"><span data-stu-id="48b59-160">Add an **Azure Resource Group Deployment** task.</span></span>
4. <span data-ttu-id="48b59-161">Configurer avec un [principal du service](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/)et référencer des fichiers de modèle et les paramètres de modèle hello.</span><span class="sxs-lookup"><span data-stu-id="48b59-161">Configure with a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), and reference hello Template and Template Parameters files.</span></span>
5. <span data-ttu-id="48b59-162">Continuer toobuild étapes dans le processus de mise en production hello pour tout autre environnement, de tests automatisés ou les approbateurs en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="48b59-162">Continue toobuild out steps in hello release process for any other environment, automated test, or approvers as needed.</span></span>

<!-- Image References -->
[1]: ./media/logic-apps-create-deploy-template/emptyreleasedefinition.png
