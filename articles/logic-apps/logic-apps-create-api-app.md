---
title: "Créer des API web et des API REST en tant que connecteurs - Azure Logic Apps | Microsoft Docs"
description: "Créer des API web et des API REST pour appeler vos API, vos services ou vos systèmes dans les flux de travail d’intégration système avec Azure Logic Apps"
keywords: "API web, API REST, connecteurs, flux de travail, intégration système"
services: logic-apps
author: jeffhollan
manager: anneta
editor: 
documentationcenter: 
ms.assetid: bd229179-7199-4aab-bae0-1baf072c7659
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 5/26/2017
ms.author: LADocs; jehollan
ms.openlocfilehash: 4ae98804aced23c0261c1d58721cb18d8152c6f1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="create-custom-apis-as-connectors-for-logic-apps"></a><span data-ttu-id="cc9ab-104">Créer des API personnalisées en tant que connecteurs pour les applications logiques</span><span class="sxs-lookup"><span data-stu-id="cc9ab-104">Create custom APIs as connectors for logic apps</span></span>

<span data-ttu-id="cc9ab-105">Bien qu’Azure Logic Apps offre [plus de 100 connecteurs intégrés](../connectors/apis-list.md), que vous pouvez utiliser dans les flux de travail d’application logique, vous voudrez peut-être appeler des API, des systèmes et des services qui ne sont pas disponibles en tant que connecteurs.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-105">Although Azure Logic Apps offers [100+ built-in connectors](../connectors/apis-list.md) that you can use in logic app workflows, you might want to call APIs, systems, and services that aren't available as connectors.</span></span> <span data-ttu-id="cc9ab-106">Vous pouvez créer vos propres API personnalisées qui fournissent des actions et des déclencheurs à utiliser dans les applications logiques.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-106">You can create your own custom APIs that provide actions and triggers to use in logic apps.</span></span> <span data-ttu-id="cc9ab-107">Voici d’autres raisons pour lesquelles vous pouvez vouloir créer vos propres API à utiliser en tant que connecteurs dans les applications logiques :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-107">Here are other reasons why you might want to create your own APIs to use as connectors in logic apps:</span></span>

* <span data-ttu-id="cc9ab-108">Étendre l’intégration de votre système actuel et les flux de travail d’intégration de données.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-108">Extend your current system integration and data integration workflows.</span></span>
* <span data-ttu-id="cc9ab-109">Aider les clients à utiliser votre service pour gérer des tâches personnelles ou professionnelles.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-109">Help customers use your service to manage professional or personal tasks.</span></span>
* <span data-ttu-id="cc9ab-110">Étendre la portée, la détectabilité et l’utilisation de votre service.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-110">Expand the reach, discoverability, and use for your service.</span></span>

<span data-ttu-id="cc9ab-111">En principe, les connecteurs sont des API web qui utilisent REST pour les interfaces enfichables, le [format de métadonnées Swagger](http://swagger.io/specification/) pour la documentation et JSON en tant que format d’échange de données.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-111">Basically, connectors are web APIs that use REST for pluggable interfaces, [Swagger metadata format](http://swagger.io/specification/) for documentation, and JSON as their data exchange format.</span></span> <span data-ttu-id="cc9ab-112">Étant donné que les connecteurs sont des API REST qui communiquent via des points de terminaison HTTP, vous pouvez utiliser n’importe quel langage, comme .NET, Java ou Node.js, pour la création de connecteurs.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-112">Because connectors are REST APIs that communicate through HTTP endpoints, you can use any language, like .NET, Java, or Node.js, for building connectors.</span></span> <span data-ttu-id="cc9ab-113">Vous pouvez également héberger votre API sur [Azure App Service](../app-service/app-service-value-prop-what-is.md), une offre de plateforme en tant que service (PaaS) qui fournit une des manières les plus optimales, les plus simples et les plus évolutives d’héberger des API.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-113">You can also host your APIs on [Azure App Service](../app-service/app-service-value-prop-what-is.md), a platform-as-a-service (PaaS) offering that provides one of the best, easiest, and most scalable ways for API hosting.</span></span> 

<span data-ttu-id="cc9ab-114">Pour que les API personnalisées fonctionnent avec les applications logiques, votre API peut fournir des [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) qui effectuent des tâches spécifiques dans les flux de travail des applications logiques.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-114">For custom APIs to work with logic apps, your API can provide [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that perform specific tasks in logic app workflows.</span></span> <span data-ttu-id="cc9ab-115">Votre API peut également faire office de [*déclencheur*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) qui démarre le flux de travail d’une application logique lorsque de nouvelles données ou un événement répondent à une condition donnée.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-115">Your API can also act as a [*trigger*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that starts a logic app workflow when new data or an event meets a specified condition.</span></span> <span data-ttu-id="cc9ab-116">Cette rubrique décrit les modèles courants que vous pouvez suivre pour la création d’actions et de déclencheurs dans votre API, en fonction du comportement que vous souhaitez que votre API adopte.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-116">This topic describes common patterns that you can follow for building actions and triggers in your API, based on the behavior that you want your API to provide.</span></span>

> [!TIP] 
> <span data-ttu-id="cc9ab-117">Bien que vous puissiez déployer votre API comme les [applications web](../app-service-web/app-service-web-overview.md), envisagez de la déployer comme les [applications API](../app-service-api/app-service-api-apps-why-best-platform.md), ce qui peut simplifier votre travail lorsque vous générez, hébergez et consommez des API dans le cloud et en local.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-117">Although you can deploy your APIs as [web apps](../app-service-web/app-service-web-overview.md), consider deploying your APIs as [API apps](../app-service-api/app-service-api-apps-why-best-platform.md), which can make your job easier when you build, host, and consume APIs in the cloud and on premises.</span></span> <span data-ttu-id="cc9ab-118">Vous n’êtes pas obligé de modifier du code dans votre API. Il vous suffit de déployer votre code dans une application API.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-118">You don't have to change any code in your APIs -- just deploy your code to an API app.</span></span> <span data-ttu-id="cc9ab-119">Découvrez comment [créer des applications API avec ASP.NET](../app-service-api/app-service-api-dotnet-get-started.md), [Java](../app-service-api/app-service-api-java-api-app.md), ou [Node.js](../app-service-api/app-service-api-nodejs-api-app.md).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-119">Learn how to [build API apps created with ASP.NET](../app-service-api/app-service-api-dotnet-get-started.md), [Java](../app-service-api/app-service-api-java-api-app.md), or [Node.js](../app-service-api/app-service-api-nodejs-api-app.md).</span></span> 
>
> <span data-ttu-id="cc9ab-120">Pour obtenir des exemples d’application API générées pour les applications logiques, consultez le [référentiel GitHub Azure Logic Apps](http://github.com/logicappsio) ou le [blog](http://aka.ms/logicappsblog).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-120">For API App samples built for logic apps, visit the [Azure Logic Apps GitHub repository](http://github.com/logicappsio) or [blog](http://aka.ms/logicappsblog).</span></span>

## <a name="helpful-tools"></a><span data-ttu-id="cc9ab-121">Outils utiles</span><span class="sxs-lookup"><span data-stu-id="cc9ab-121">Helpful tools</span></span>

<span data-ttu-id="cc9ab-122">Une API personnalisée fonctionne mieux avec les applications logiques lorsqu’elle dispose également d’un [document Swagger](http://swagger.io/specification/) qui décrit ses opérations et ses paramètres.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-122">A custom API works best with logic apps when the API also has a [Swagger document](http://swagger.io/specification/) that describes the API's operations and parameters.</span></span>
<span data-ttu-id="cc9ab-123">De nombreuses bibliothèques (telles que [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle)) permettent de générer automatiquement le fichier Swagger pour vous.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-123">Many libraries, like [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle), can automatically generate the Swagger file for you.</span></span> <span data-ttu-id="cc9ab-124">Pour annoter le fichier Swagger avec les noms d’affichage, les types de propriété, etc., vous pouvez également utiliser [TRex](https://github.com/nihaue/TRex) afin que votre fichier Swagger fonctionne bien avec les applications logiques.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-124">To annotate the Swagger file for display names, property types, and so on, you can also use [TRex](https://github.com/nihaue/TRex) so that your Swagger file works well with logic apps.</span></span>

<a name="actions"></a>

## <a name="action-patterns"></a><span data-ttu-id="cc9ab-125">Modèles d’action</span><span class="sxs-lookup"><span data-stu-id="cc9ab-125">Action patterns</span></span>

<span data-ttu-id="cc9ab-126">Pour que les applications logiques effectuent des tâches, votre API personnalisée doit fournir des [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-126">For logic apps to perform tasks, your custom API should provide [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts).</span></span> <span data-ttu-id="cc9ab-127">Chaque opération dans votre API renvoie à une action.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-127">Each operation in your API maps to an action.</span></span> <span data-ttu-id="cc9ab-128">Une action de base peut être un contrôleur qui accepte les requêtes HTTP et renvoie des réponses HTTP.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-128">A basic action is a controller that accepts HTTP requests and returns HTTP responses.</span></span> <span data-ttu-id="cc9ab-129">Par exemple, une application logique envoie une requête HTTP à votre application web ou à votre application API.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-129">So for example, a logic app sends an HTTP request to your web app or API app.</span></span> <span data-ttu-id="cc9ab-130">Votre application renvoie alors une réponse HTTP, ainsi que du contenu que l’application logique peut traiter.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-130">Your app then returns an HTTP response, along with content that the logic app can process.</span></span>

<span data-ttu-id="cc9ab-131">Pour une action standard, vous pouvez écrire une méthode de requête HTTP dans votre API et décrire cette méthode dans un fichier Swagger.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-131">For a standard action, you can write an HTTP request method in your API and describe that method in a Swagger file.</span></span> <span data-ttu-id="cc9ab-132">Vous pouvez ensuite appeler votre API directement avec une [action HTTP](../connectors/connectors-native-http.md) ou une action [HTTP + Swagger](../connectors/connectors-native-http-swagger.md).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-132">You can then call your API directly with an [HTTP action](../connectors/connectors-native-http.md) or an [HTTP + Swagger](../connectors/connectors-native-http-swagger.md) action.</span></span> <span data-ttu-id="cc9ab-133">Par défaut, les réponses doivent être renvoyées dans le [délai d’expiration de la requête](./logic-apps-limits-and-config.md).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-133">By default, responses must be returned within the [request timeout limit](./logic-apps-limits-and-config.md).</span></span> 

![Modèle d’action standard](./media/logic-apps-create-api-app/standard-action.png)

<span data-ttu-id="cc9ab-135"><a name="pattern-overview"></a> Pour qu’une application logique attende pendant que votre API termine des tâches plus longues, votre API peut suivre le [modèle d’interrogation asynchrone](#async-pattern) ou le [modèle Webhook asynchrone](#webhook-actions), tous deux décrits dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-135"><a name="pattern-overview"></a> To make a logic app wait while your API finishes longer-running tasks, your API can follow the [asynchronous polling pattern](#async-pattern) or the [asynchronous webhook pattern](#webhook-actions) described in this topic.</span></span> <span data-ttu-id="cc9ab-136">Pour comprendre les différences entre ces modèles, prenons l’exemple de la commande d’un gâteau personnalisé dans une boulangerie.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-136">For an analogy that helps you visualize these patterns' different behaviors, imagine the process for ordering a custom cake from a bakery.</span></span> <span data-ttu-id="cc9ab-137">Le modèle d’interrogation reviendrait à appeler la boulangerie toutes les 20 minutes pour vérifier si le gâteau est prêt.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-137">The polling pattern mirrors the behavior where you call the bakery every 20 minutes to check whether the cake is ready.</span></span> <span data-ttu-id="cc9ab-138">Le modèle Webhook correspond au cas où la boulangerie vous demande votre numéro de téléphone afin de vous appeler quand le gâteau est prêt.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-138">The webhook pattern mirrors the behavior where the bakery asks you for your phone number so they can call you when the cake is ready.</span></span>

<span data-ttu-id="cc9ab-139">Pour obtenir des exemples, visitez le [référentiel GitHub d’applications logiques](https://github.com/logicappsio).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-139">For samples, visit the [Logic Apps GitHub repository](https://github.com/logicappsio).</span></span> <span data-ttu-id="cc9ab-140">Découvrez également les [mesures d’utilisation des actions](logic-apps-pricing.md).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-140">Also, learn more about [usage metering for actions](logic-apps-pricing.md).</span></span>

<a name="async-pattern"></a>

### <a name="perform-long-running-tasks-with-the-polling-action-pattern"></a><span data-ttu-id="cc9ab-141">Effectuer des tâches longues avec le modèle d’action d’interrogation</span><span class="sxs-lookup"><span data-stu-id="cc9ab-141">Perform long-running tasks with the polling action pattern</span></span>

<span data-ttu-id="cc9ab-142">Pour que votre API effectue des tâches qui peuvent durer plus longtemps que le [délai d’expiration des requêtes](./logic-apps-limits-and-config.md), vous pouvez utiliser le modèle d’interrogation asynchrone.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-142">To have your API perform tasks that could run longer than the [request timeout limit](./logic-apps-limits-and-config.md), you can use the asynchronous polling pattern.</span></span> <span data-ttu-id="cc9ab-143">Ce modèle force votre API à travailler dans un thread distinct, mais conserve une connexion active au moteur Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-143">This pattern has your API do work in a separate thread, but keep an active connection to the Logic Apps engine.</span></span> <span data-ttu-id="cc9ab-144">De cette façon, l’application logique n’expire pas ou passe à l’étape suivante dans le flux de travail avant que votre API termine sa tâche.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-144">That way, the logic app does not time out or continue with the next step in the workflow before your API finishes working.</span></span>

<span data-ttu-id="cc9ab-145">Voici le modèle général :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-145">Here's the general pattern:</span></span>

1. <span data-ttu-id="cc9ab-146">Assurez-vous que le moteur sait que votre API a accepté la requête et a commencé à travailler.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-146">Make sure that the engine knows that your API accepted the request and started working.</span></span>
2. <span data-ttu-id="cc9ab-147">Lorsque le moteur demande ensuite plusieurs fois l’état du travail, indiquez au moteur lorsque votre API a terminé sa tâche.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-147">When the engine makes subsequent requests for job status, let the engine know when your API finishes the task.</span></span>
3. <span data-ttu-id="cc9ab-148">Renvoyez les données pertinentes au moteur afin que le flux de travail de l’application logique puisse continuer.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-148">Return relevant data to the engine so that the logic app workflow can continue.</span></span>

<span data-ttu-id="cc9ab-149"><a name="bakery-polling-action"></a> Revenons maintenant à l’analogie de la boulangerie pour le modèle d’interrogation et imaginez que vous appelez une boulangerie pour commander un gâteau personnalisé en livraison.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-149"><a name="bakery-polling-action"></a> Now apply the previous bakery analogy to the polling pattern, and imagine that you call a bakery and order a custom cake for delivery.</span></span> <span data-ttu-id="cc9ab-150">La confection du gâteau prend du temps, et vous n’avez pas envie d’attendre au téléphone pendant que le boulanger travaille.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-150">The process for making the cake takes time, and you don't want to wait on the phone while the bakery works on the cake.</span></span> <span data-ttu-id="cc9ab-151">La boulangerie confirme votre commande et vous dit d’appeler toutes les 20 minutes pour connaître l’avancement de la commande.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-151">The bakery confirms your order and has you call every 20 minutes for the cake's status.</span></span> <span data-ttu-id="cc9ab-152">Après 20 minutes, vous appelez la boulangerie, qui vous indique que votre gâteau n’est pas prêt et que vous devez rappeler dans 20 minutes.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-152">After 20 minutes pass, you call the bakery, but they tell you that your cake isn't done and that you should call in another 20 minutes.</span></span> <span data-ttu-id="cc9ab-153">Ces aller-retours se poursuivent jusqu'à ce que vous appeliez, que la boulangerie vous dise que votre commande est prête et qu’elle vous livre le gâteau.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-153">This back-and-forth process continues until you call, and the bakery tells you that your order is ready and delivers your cake.</span></span> 

<span data-ttu-id="cc9ab-154">Revenons à ce modèle d’interrogation pour votre API.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-154">So let's map this polling pattern back.</span></span> <span data-ttu-id="cc9ab-155">La boulangerie représente votre API personnalisée, tandis que vous, le client achetant le gâteau, représentez le moteur Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-155">The bakery represents your custom API, while you, the cake customer, represent the Logic Apps engine.</span></span> <span data-ttu-id="cc9ab-156">Lorsque le moteur appelle votre API avec une requête, votre API confirme la requête et répond avec l’intervalle de temps pendant lequel le moteur peut vérifier l’état du travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-156">When the engine calls your API with a request, your API confirms the request and responds with the time interval when the engine can check job status.</span></span> <span data-ttu-id="cc9ab-157">Le moteur continue la vérification du statut jusqu'à ce que votre API réponde que le travail est effectué et renvoie des données à votre application logique, qui poursuit ensuite le flux de travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-157">The engine continues checking job status until your API responds that the job is done and returns data to your logic app, which then continues workflow.</span></span> 

![Modèle d’action d’interrogation](./media/logic-apps-create-api-app/custom-api-async-action-pattern.png)

<span data-ttu-id="cc9ab-159">Voici les étapes spécifiques que votre API doit suivre, décrites du point de vue de l’API :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-159">Here are the specific steps for your API to follow, described from the API's perspective:</span></span>

1. <span data-ttu-id="cc9ab-160">Lorsque votre API reçoit une requête HTTP lui demandant de commencer à travailler, renvoyez immédiatement une réponse HTTP `202 ACCEPTED` avec l’en-tête `location` décrit plus loin dans cette étape.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-160">When your API gets an HTTP request to start work, immediately return an HTTP `202 ACCEPTED` response with the `location` header described later in this step.</span></span> <span data-ttu-id="cc9ab-161">Cette réponse informe le moteur Logic Apps que votre API a reçu la requête, a accepté la charge utile de la requête (entrée de données) et est en train de la traiter.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-161">This response lets the Logic Apps engine know that your API got the request, accepted the request payload (data input), and is now processing.</span></span> 
   
   <span data-ttu-id="cc9ab-162">La réponse `202 ACCEPTED` doit inclure ces en-têtes :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-162">The `202 ACCEPTED` response should include these headers:</span></span>
   
   * <span data-ttu-id="cc9ab-163">*Requis* : un en-tête `location` qui spécifie le chemin d’accès absolu à une URL permettant au moteur Logic Apps de vérifier l’état du travail de votre API</span><span class="sxs-lookup"><span data-stu-id="cc9ab-163">*Required*: A `location` header that specifies the absolute path to a URL where the Logic Apps engine can check your API's job status</span></span>

   * <span data-ttu-id="cc9ab-164">*Facultatif* : un en-tête `retry-after` qui spécifie le nombre de secondes pendant lesquelles le moteur doit attendre avant de vérifier l’URL `location` pour connaître l’état du travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-164">*Optional*: A `retry-after` header that specifies the number of seconds that the engine should wait before checking the `location` URL for job status.</span></span> 

     <span data-ttu-id="cc9ab-165">Par défaut, le moteur vérifie toutes les 20 secondes.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-165">By default, the engine checks every 20 seconds.</span></span> <span data-ttu-id="cc9ab-166">Pour spécifier un intervalle différent, incluez l’en-tête `retry-after` et le nombre de secondes jusqu'à l’interrogation suivante.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-166">To specify a different interval, include the `retry-after` header and the number of seconds until the next poll.</span></span>

2. <span data-ttu-id="cc9ab-167">Une fois le temps indiqué écoulé, le moteur Logic Apps interroge l’URL `location` pour vérifier l’état du travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-167">After the specified time passes, the Logic Apps engine polls the `location` URL to check job status.</span></span> <span data-ttu-id="cc9ab-168">Votre API doit effectuer ces vérifications et renvoyer ces réponses :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-168">Your API should perform these checks and return these responses:</span></span>
   
   * <span data-ttu-id="cc9ab-169">Si le travail est effectué, renvoyez la réponse HTTP `200 OK`, ainsi que la charge utile de réponse (entrée pour l’étape suivante).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-169">If the job is done, return an HTTP `200 OK` response, along with the response payload (input for the next step).</span></span>

   * <span data-ttu-id="cc9ab-170">Si le travail est encore en cours de traitement, renvoyez une autre réponse HTTP `202 ACCEPTED`, avec les mêmes en-têtes que la réponse d’origine.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-170">If the job is still processing, return another HTTP `202 ACCEPTED` response, but with the same headers as the original response.</span></span>

<span data-ttu-id="cc9ab-171">Lorsque votre API suit ce modèle, vous n’avez rien à modifier dans la définition du flux de travail d’application logique pour poursuivre la vérification du statut du travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-171">When your API follows this pattern, you don't have to do anything in the logic app workflow definition to continue checking job status.</span></span> <span data-ttu-id="cc9ab-172">Lorsque le moteur reçoit une réponse HTTP `202 ACCEPTED` et un en-tête `location` valide, le moteur respecte le modèle asynchrone et vérifie l’en-tête `location` jusqu'à ce que votre API renvoie une réponse autre que 202.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-172">When the engine gets an HTTP `202 ACCEPTED` response and a valid `location` header, the engine respects the asynchronous pattern and checks the `location` header until your API returns a non-202 response.</span></span>

> [!TIP]
> <span data-ttu-id="cc9ab-173">Pour un exemple de modèle asynchrone, consultez cet [exemple de réponse de contrôleur asynchrone dans GitHub](https://github.com/logicappsio/LogicAppsAsyncResponseSample).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-173">For an example asynchronous pattern, review this [asynchronous controller response sample in GitHub](https://github.com/logicappsio/LogicAppsAsyncResponseSample).</span></span>

<a name="webhook-actions"></a>

### <a name="perform-long-running-tasks-with-the-webhook-action-pattern"></a><span data-ttu-id="cc9ab-174">Effectuer des tâches longues avec le modèle d’action Webhook</span><span class="sxs-lookup"><span data-stu-id="cc9ab-174">Perform long-running tasks with the webhook action pattern</span></span>

<span data-ttu-id="cc9ab-175">Pour les tâches longues et le traitement asynchrone, vous avez également la possibilité d’utiliser le modèle Webhook.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-175">As an alternative, you can use the webhook pattern for long-running tasks and asynchronous processing.</span></span> <span data-ttu-id="cc9ab-176">Ce modèle met en pause l’application logique afin qu’elle attende un « rappel » de votre API pour terminer le traitement avant de poursuivre le flux de travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-176">This pattern has the logic app pause and wait for a "callback" from your API to finish processing before continuing workflow.</span></span> <span data-ttu-id="cc9ab-177">Ce rappel est un élément POST HTTP qui envoie un message vers une URL quand un événement se produit.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-177">This callback is an HTTP POST that sends a message to a URL when an event happens.</span></span> 

<span data-ttu-id="cc9ab-178"><a name="bakery-webhook-action"></a> Revenons maintenant à l’analogie de la boulangerie pour le modèle Webhook et imaginez que vous appelez une boulangerie pour commander un gâteau personnalisé en livraison.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-178"><a name="bakery-webhook-action"></a> Now apply the previous bakery analogy to the webhook pattern, and imagine that you call a bakery and order a custom cake for delivery.</span></span> <span data-ttu-id="cc9ab-179">La confection du gâteau prend du temps, et vous n’avez pas envie d’attendre au téléphone pendant que le boulanger travaille.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-179">The process for making the cake takes time, and you don't want to wait on the phone while the bakery works on the cake.</span></span> <span data-ttu-id="cc9ab-180">La boulangerie confirme votre commande, mais cette fois, vous donnez votre numéro de téléphone afin d’être rappelé quand le gâteau est terminé.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-180">The bakery confirms your order, but this time, you give them your phone number so they can call you when the cake is done.</span></span> <span data-ttu-id="cc9ab-181">Cette fois, la boulangerie vous prévient lorsque votre commande est prête et vous livre le gâteau.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-181">This time, the bakery tells you when your order is ready and delivers your cake.</span></span>

<span data-ttu-id="cc9ab-182">Appliquons cet exemple à votre API : la boulangerie représente votre API personnalisée, tandis que vous, le client achetant le gâteau, représentez le moteur Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-182">When we map this webhook pattern back, the bakery represents your custom API, while you, the cake customer, represent the Logic Apps engine.</span></span> <span data-ttu-id="cc9ab-183">Le moteur appelle votre API avec une requête et inclut une URL de « rappel ».</span><span class="sxs-lookup"><span data-stu-id="cc9ab-183">The engine calls your API with a request and includes a "callback" URL.</span></span>
<span data-ttu-id="cc9ab-184">Lorsque le travail est terminé, votre API utilise l’URL pour en informer le moteur et renvoyer les données à votre application logique, avant de continuer le flux de travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-184">When the job is done, your API uses the URL to notify the engine and return data to your logic app, which then continues workflow.</span></span> 

<span data-ttu-id="cc9ab-185">Pour ce modèle, définissez deux points de terminaison sur votre contrôleur : `subscribe` et `unsubscribe`</span><span class="sxs-lookup"><span data-stu-id="cc9ab-185">For this pattern, set up two endpoints on your controller: `subscribe` and `unsubscribe`</span></span>

*  <span data-ttu-id="cc9ab-186">Point de terminaison `subscribe` : lorsque l’exécution atteint l’action de votre API dans le flux de travail, le moteur Logic Apps appelle le point de terminaison `subscribe`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-186">`subscribe` endpoint: When execution reaches your API's action in the workflow, the Logic Apps engine calls the `subscribe` endpoint.</span></span> <span data-ttu-id="cc9ab-187">Cette étape entraîne la création par l’application logique d’une URL de rappel que votre API enregistre, avant d’attendre le rappel de votre API lorsque le travail est terminé.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-187">This step causes the logic app to create a callback URL that your API stores and then wait for the callback from your API when work is complete.</span></span> <span data-ttu-id="cc9ab-188">Votre API envoie ensuite un rappel avec un élément POST HTTP à l’URL et transmet à l’application logique les en-têtes et le contenu renvoyés en tant qu’entrées.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-188">Your API then calls back with an HTTP POST to the URL and passes any returned content and headers as input to the logic app.</span></span>

* <span data-ttu-id="cc9ab-189">Point de terminaison `unsubscribe` : si l’exécution de l’application logique est annulée, le moteur Logic Apps appelle le point de terminaison `unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-189">`unsubscribe` endpoint: If the logic app run is canceled, the Logic Apps engine calls the `unsubscribe` endpoint.</span></span> <span data-ttu-id="cc9ab-190">Votre API peut alors annuler l’inscription de l’URL de rappel, et arrêter tous les processus selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-190">Your API can then unregister the callback URL and stop any processes as necessary.</span></span>

![Modèle d’action Webhook](./media/logic-apps-create-api-app/custom-api-webhook-action-pattern.png)

> [!NOTE]
> <span data-ttu-id="cc9ab-192">Actuellement, le Concepteur d’application logique ne prend pas en charge la découverte des points de terminaison Webhook via Swagger.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-192">Currently, the Logic App Designer doesn't support discovering webhook endpoints through Swagger.</span></span> <span data-ttu-id="cc9ab-193">Pour ce modèle, vous devez donc ajouter une action [**Webhook**](../connectors/connectors-native-webhook.md) et spécifier l’URL, les en-têtes et le corps de votre requête.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-193">So for this pattern, you have to add a [**Webhook** action](../connectors/connectors-native-webhook.md) and specify the URL, headers, and body for your request.</span></span> <span data-ttu-id="cc9ab-194">Voir également [Actions et déclencheurs de flux de travail](logic-apps-workflow-actions-triggers.md#api-connection-webhook-action).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-194">See also [Workflow actions and triggers](logic-apps-workflow-actions-triggers.md#api-connection-webhook-action).</span></span> <span data-ttu-id="cc9ab-195">Pour transmettre l’URL de rappel, vous pouvez utiliser la fonction de flux de travail `@listCallbackUrl()` dans un de ces champs en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-195">To pass in the callback URL, you can use the `@listCallbackUrl()` workflow function in any of the previous fields as necessary.</span></span>

> [!TIP]
> <span data-ttu-id="cc9ab-196">Pour un exemple de modèle Webhook, consultez cet [exemple de déclencheur Webhook dans GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-196">For an example webhook pattern, review this [webhook trigger sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span></span>

<a name="triggers"></a>

## <a name="trigger-patterns"></a><span data-ttu-id="cc9ab-197">Modèles de déclencheur</span><span class="sxs-lookup"><span data-stu-id="cc9ab-197">Trigger patterns</span></span>

<span data-ttu-id="cc9ab-198">Votre API personnalisée peut faire office de [*déclencheur*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) qui démarre une application logique lorsque de nouvelles données ou un événement répondent à une condition donnée.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-198">Your custom API can act as a [*trigger*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that starts a logic app when new data or an event meets a specified condition.</span></span> <span data-ttu-id="cc9ab-199">Ce déclencheur peut soit vérifier régulièrement, soit attendre et écouter, la présence de nouvelles données ou d’événements au niveau du point de terminaison de votre service.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-199">This trigger can either check regularly, or wait and listen, for new data or events at your service endpoint.</span></span> <span data-ttu-id="cc9ab-200">Si de nouvelles données ou un événement remplissent la condition indiquée, le déclencheur est activé et démarre l’application logique, qui est à l’écoute de ce déclencheur.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-200">If new data or an event meets the specified condition, the trigger fires and starts the logic app, which is listening to that trigger.</span></span> <span data-ttu-id="cc9ab-201">Pour démarrer les applications logiques de cette manière, votre API peut suivre le modèle de [*déclencheur d’interrogation*](#polling-triggers) ou de [*déclencheur Webhook*](#webhook-triggers).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-201">To start logic apps this way, your API can follow the [*polling trigger*](#polling-triggers) or the [*webhook trigger*](#webhook-triggers) pattern.</span></span> <span data-ttu-id="cc9ab-202">Ces modèles sont semblables à leurs équivalents : [actions d’interrogation](#async-pattern) et [actions Webhook](#webhook-actions).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-202">These patterns are similar to their counterparts for [polling actions](#async-pattern) and [webhook actions](#webhook-actions).</span></span> <span data-ttu-id="cc9ab-203">Découvrez également les [mesures d’utilisation des déclencheurs](logic-apps-pricing.md).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-203">Also, learn more about [usage metering for triggers](logic-apps-pricing.md).</span></span>

<a name="polling-triggers"></a>

### <a name="check-for-new-data-or-events-regularly-with-the-polling-trigger-pattern"></a><span data-ttu-id="cc9ab-204">Rechercher régulièrement les nouvelles données ou les événements avec le modèle de déclencheur d’interrogation</span><span class="sxs-lookup"><span data-stu-id="cc9ab-204">Check for new data or events regularly with the polling trigger pattern</span></span>

<span data-ttu-id="cc9ab-205">Un *déclencheur d’interrogation* fonctionne presque comme [l’action d’interrogation](#async-pattern) décrite précédemment dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-205">A *polling trigger* acts much like the [polling action](#async-pattern) previously described in this topic.</span></span> <span data-ttu-id="cc9ab-206">Le moteur Logic Apps appelle régulièrement et recherche de nouvelles données ou des événements au niveau du point de terminaison du déclencheur.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-206">The Logic Apps engine periodically calls and checks the trigger endpoint for new data or events.</span></span> <span data-ttu-id="cc9ab-207">Si le moteur trouve de nouvelles données ou un événement qui répond à la condition spécifiée, le déclencheur est activé.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-207">If the engine finds new data or an event that meets your specified condition, the trigger fires.</span></span> <span data-ttu-id="cc9ab-208">Le moteur crée alors une instance d’application logique qui traite les données en tant qu’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-208">Then, the engine creates a logic app instance that processes the data as input.</span></span> 

![Modèle de déclencheur d’interrogation](./media/logic-apps-create-api-app/custom-api-polling-trigger-pattern.png)

> [!NOTE]
> <span data-ttu-id="cc9ab-210">Chaque requête d’interrogation compte comme une exécution de l’action, même lorsqu’aucune instance d’application logique n’est créée.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-210">Each polling request counts as an action execution, even when no logic app instance is created.</span></span> <span data-ttu-id="cc9ab-211">Pour éviter que les mêmes données soient traitées plusieurs fois, votre déclencheur doit nettoyer les données qu’il a déjà lues et transmises à l’application logique.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-211">To prevent processing the same data multiple times, your trigger should clean up data that was already read and passed to the logic app.</span></span>

<span data-ttu-id="cc9ab-212">Voici les étapes spécifiques d’un déclencheur d’interrogation, décrites du point de vue de l’API :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-212">Here are specific steps for a polling trigger, described from the API's perspective:</span></span>

| <span data-ttu-id="cc9ab-213">Il existe de nouvelles données ou un nouvel événement ?</span><span class="sxs-lookup"><span data-stu-id="cc9ab-213">Found new data or event?</span></span>  | <span data-ttu-id="cc9ab-214">Réponse de l’API</span><span class="sxs-lookup"><span data-stu-id="cc9ab-214">API response</span></span> | 
| ------------------------- | ------------ |
| <span data-ttu-id="cc9ab-215">Trouvé</span><span class="sxs-lookup"><span data-stu-id="cc9ab-215">Found</span></span> | <span data-ttu-id="cc9ab-216">Renvoyez un état HTTP `200 OK` avec la charge utile de réponse (entrée pour l’étape suivante).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-216">Return an HTTP `200 OK` status with the response payload (input for next step).</span></span> <br/><span data-ttu-id="cc9ab-217">Cette réponse crée une instance d’application logique et démarre le flux de travail.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-217">This response creates a logic app instance and starts the workflow.</span></span> |
| <span data-ttu-id="cc9ab-218">Introuvable</span><span class="sxs-lookup"><span data-stu-id="cc9ab-218">Not found</span></span> | <span data-ttu-id="cc9ab-219">Renvoyez un état HTTP `202 ACCEPTED` avec un en-tête `location` et un en-tête `retry-after`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-219">Return an HTTP `202 ACCEPTED` status with a `location` header and a `retry-after` header.</span></span> <br/><span data-ttu-id="cc9ab-220">Pour les déclencheurs, l’en-tête `location` doit également contenir un paramètre de requête `triggerState`, qui est généralement un « timestamp ».</span><span class="sxs-lookup"><span data-stu-id="cc9ab-220">For triggers, the `location` header should also contain a `triggerState` query parameter, which is usually a "timestamp."</span></span> <span data-ttu-id="cc9ab-221">Votre API peut utiliser cet identificateur pour vérifier quand l’application logique a été déclenchée pour la dernière fois.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-221">Your API can use this identifier to track the last time that the logic app was triggered.</span></span> |

<span data-ttu-id="cc9ab-222">Par exemple, pour vérifier périodiquement la présence de nouveaux fichiers dans votre service, vous pouvez générer un déclencheur d’interrogation qui possède ces comportements :</span><span class="sxs-lookup"><span data-stu-id="cc9ab-222">For example, to periodically check your service for new files, you might build a polling trigger that has these behaviors:</span></span>

| <span data-ttu-id="cc9ab-223">La requête inclut `triggerState` ?</span><span class="sxs-lookup"><span data-stu-id="cc9ab-223">Request includes `triggerState`?</span></span> | <span data-ttu-id="cc9ab-224">Réponse de l’API</span><span class="sxs-lookup"><span data-stu-id="cc9ab-224">API response</span></span> |
| -------------------------------- | -------------|
| <span data-ttu-id="cc9ab-225">Non</span><span class="sxs-lookup"><span data-stu-id="cc9ab-225">No</span></span> | <span data-ttu-id="cc9ab-226">Renvoyez un état HTTP `202 ACCEPTED` plus un en-tête `location` avec `triggerState` défini sur l’heure actuelle et l’intervalle `retry-after` sur 15 secondes.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-226">Return an HTTP `202 ACCEPTED` status plus a `location` header with `triggerState` set to the current time and the `retry-after` interval to 15 seconds.</span></span> |
| <span data-ttu-id="cc9ab-227">Oui</span><span class="sxs-lookup"><span data-stu-id="cc9ab-227">Yes</span></span> | <span data-ttu-id="cc9ab-228">Vérifiez la présence de fichiers ajoutés après le `DateTime` pour `triggerState` dans votre service.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-228">Check your service for files added after the `DateTime` for `triggerState`.</span></span> |

| <span data-ttu-id="cc9ab-229">Nombre de fichiers trouvés</span><span class="sxs-lookup"><span data-stu-id="cc9ab-229">Number of files found</span></span> | <span data-ttu-id="cc9ab-230">Réponse de l’API</span><span class="sxs-lookup"><span data-stu-id="cc9ab-230">API response</span></span> |
| --------------------- | -------------|
| <span data-ttu-id="cc9ab-231">Fichier unique</span><span class="sxs-lookup"><span data-stu-id="cc9ab-231">Single file</span></span> | <span data-ttu-id="cc9ab-232">Renvoyez un état HTTP `200 OK` et la charge utile du contenu, mettez à jour `triggerState` vers `DateTime` pour le fichier renvoyé et définissez l’intervalle `retry-after` sur 15 secondes.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-232">Return an HTTP `200 OK` status and the content payload, update `triggerState` to the `DateTime` for the returned file, and set `retry-after` interval to 15 seconds.</span></span> |
| <span data-ttu-id="cc9ab-233">Fichiers multiples</span><span class="sxs-lookup"><span data-stu-id="cc9ab-233">Multiple files</span></span> | <span data-ttu-id="cc9ab-234">Renvoyez un seul fichier à la fois et un état HTTP `200 OK`, mettez à jour `triggerState` et définissez l’intervalle `retry-after` sur 0 seconde.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-234">Return one file at a time and an HTTP `200 OK` status, update `triggerState`, and set the `retry-after` interval to 0 seconds.</span></span> </br><span data-ttu-id="cc9ab-235">Ces étapes informent le moteur que des données supplémentaires sont disponibles, et qu’il doit demander immédiatement des données à partir de l’URL dans l’en-tête `location`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-235">These steps let the engine know that more data is available, and that the engine should immediately request the data from the URL in the `location` header.</span></span> |
| <span data-ttu-id="cc9ab-236">Aucun fichier</span><span class="sxs-lookup"><span data-stu-id="cc9ab-236">No files</span></span> | <span data-ttu-id="cc9ab-237">Renvoyez un état HTTP `202 ACCEPTED`, ne modifiez pas `triggerState` et définissez l’intervalle `retry-after` sur 15 secondes.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-237">Return an HTTP `202 ACCEPTED` status, don't change `triggerState`, and set the `retry-after` interval to 15 seconds.</span></span> |

> [!TIP]
> <span data-ttu-id="cc9ab-238">Pour obtenir un exemple de modèle de déclencheur d’interrogation, consultez cet [exemple de contrôleur de déclencheur d’interrogation dans GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/PollTriggerController.cs).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-238">For an example polling trigger pattern, review this [poll trigger controller sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/PollTriggerController.cs).</span></span>

<a name="webhook-triggers"></a>

### <a name="wait-and-listen-for-new-data-or-events-with-the-webhook-trigger-pattern"></a><span data-ttu-id="cc9ab-239">Attendre et écouter les nouvelles données ou les événements avec le modèle de déclencheur Webhook</span><span class="sxs-lookup"><span data-stu-id="cc9ab-239">Wait and listen for new data or events with the webhook trigger pattern</span></span>

<span data-ttu-id="cc9ab-240">Un déclencheur Webhook est un *déclencheur d’émission* qui attend et écoute les nouvelles données ou les événements au point de terminaison de votre service.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-240">A webhook trigger is a *push trigger* that waits and listens for new data or events at your service endpoint.</span></span> <span data-ttu-id="cc9ab-241">Si de nouvelles données ou un événement remplissent la condition spécifiée, le déclencheur est activé et crée une instance d’application logique, qui traite ensuite les données en tant qu’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-241">If new data or an event meets the specified condition, the trigger fires and creates a logic app instance, which then processes the data as input.</span></span>
<span data-ttu-id="cc9ab-242">Les déclencheurs Webhook agissent de façon très similaire aux [actions Webhook](#webhook-actions) précédemment décrites dans cette rubrique. Ils sont configurés avec les points de terminaison `subscribe` et `unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-242">Webhook triggers act much like the [webhook actions](#webhook-actions) previously described in this topic, and are set up with `subscribe` and `unsubscribe` endpoints.</span></span> 

* <span data-ttu-id="cc9ab-243">Point de terminaison `subscribe` : lorsque vous ajoutez et enregistrez un déclencheur Webhook dans votre application logique, le moteur Logic Apps appelle le point de terminaison `subscribe`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-243">`subscribe` endpoint: When you add and save a webhook trigger in your logic app, the Logic Apps engine calls the `subscribe` endpoint.</span></span> <span data-ttu-id="cc9ab-244">Cette étape entraîne la création par l’application logique d’une URL de rappel que votre API enregistre.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-244">This step causes the logic app to create a callback URL that your API stores.</span></span> <span data-ttu-id="cc9ab-245">Lorsque de nouvelles données ou un événement remplissent la condition spécifiée, votre API envoie un rappel avec un élément POST HTTP à l’URL.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-245">When there's new data or an event that meets the specified condition, your API calls back with an HTTP POST to the URL.</span></span> <span data-ttu-id="cc9ab-246">La charge utile de contenu et les en-têtes sont transmis à l’application logique en tant qu’entrée.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-246">The content payload and headers pass as input to the logic app.</span></span>

* <span data-ttu-id="cc9ab-247">Point de terminaison `unsubscribe` : si le déclencheur Webhook ou l’intégralité de l’application logique est supprimé, le moteur Logic Apps appelle le point de terminaison `unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-247">`unsubscribe` endpoint: If the webhook trigger or entire logic app is deleted, the Logic Apps engine calls the `unsubscribe` endpoint.</span></span> <span data-ttu-id="cc9ab-248">Votre API peut alors annuler l’inscription de l’URL de rappel, et arrêter tous les processus selon les besoins.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-248">Your API can then unregister the callback URL and stop any processes as necessary.</span></span>

![Modèle de déclencheur Webhook](./media/logic-apps-create-api-app/custom-api-webhook-trigger-pattern.png)

> [!NOTE]
> <span data-ttu-id="cc9ab-250">Actuellement, le Concepteur d’application logique ne prend pas en charge la découverte des points de terminaison Webhook via Swagger.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-250">Currently, the Logic App Designer doesn't support discovering webhook endpoints through Swagger.</span></span> <span data-ttu-id="cc9ab-251">Pour ce modèle, vous devez donc ajouter un déclencheur [**Webhook**](../connectors/connectors-native-webhook.md) et spécifier l’URL, les en-têtes et le corps de votre requête.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-251">So for this pattern, you have to add a [**Webhook** trigger](../connectors/connectors-native-webhook.md) and specify the URL, headers, and body for your request.</span></span> <span data-ttu-id="cc9ab-252">Voir également [Déclencheur HTTPWebhook](logic-apps-workflow-actions-triggers.md#httpwebhook-trigger).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-252">See also [HTTPWebhook trigger](logic-apps-workflow-actions-triggers.md#httpwebhook-trigger).</span></span> <span data-ttu-id="cc9ab-253">Pour transmettre l’URL de rappel, vous pouvez utiliser la fonction de flux de travail `@listCallbackUrl()` dans un de ces champs en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-253">To pass in the callback URL, you can use the `@listCallbackUrl()` workflow function in any of the previous fields as necessary.</span></span>
>
> <span data-ttu-id="cc9ab-254">Pour éviter que les mêmes données soient traitées plusieurs fois, votre déclencheur doit nettoyer les données qu’il a déjà lues et transmises à l’application logique.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-254">To prevent processing the same data multiple times, your trigger should clean up data that was already read and passed to the logic app.</span></span>

> [!TIP]
> <span data-ttu-id="cc9ab-255">Pour un exemple de modèle Webhook, consultez cet [exemple de contrôleur de déclencheur Webhook dans GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-255">For an example webhook pattern, review this [webhook trigger controller sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span></span>

## <a name="deploy-call-and-secure-custom-apis"></a><span data-ttu-id="cc9ab-256">Déployer, appeler et sécuriser les API personnalisées</span><span class="sxs-lookup"><span data-stu-id="cc9ab-256">Deploy, call, and secure custom APIs</span></span>

<span data-ttu-id="cc9ab-257">Une fois les API personnalisées créées, configurez-les pour le déploiement, de façon à pouvoir les appeler en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="cc9ab-257">After creating your custom APIs, set up your APIs for deployment so you can call them securely.</span></span> <span data-ttu-id="cc9ab-258">Découvrez comment [déployer, appeler et sécuriser les API personnalisées pour les applications logiques](./logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-258">Learn how to [deploy, call, and secure custom APIs for logic apps](./logic-apps-custom-hosted-api.md).</span></span>

## <a name="publish-custom-apis-to-azure"></a><span data-ttu-id="cc9ab-259">Publier des API personnalisées dans Azure</span><span class="sxs-lookup"><span data-stu-id="cc9ab-259">Publish custom APIs to Azure</span></span>

<span data-ttu-id="cc9ab-260">Pour rendre vos API personnalisées publiques et utilisables dans Azure, soumettez vos nominations au [programme Microsoft Azure Certified](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-260">To make your custom APIs available for public use in Azure, submit your nominations to the [Microsoft Azure Certified program](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span></span>

## <a name="get-help"></a><span data-ttu-id="cc9ab-261">Obtenir de l'aide</span><span class="sxs-lookup"><span data-stu-id="cc9ab-261">Get help</span></span>

<span data-ttu-id="cc9ab-262">Pour obtenir de l’aide concernant les API personnalisées, contactez [customapishelp@microsoft.com](mailto:customapishelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-262">For specific help with custom APIs, contact [customapishelp@microsoft.com](mailto:customapishelp@microsoft.com).</span></span>

<span data-ttu-id="cc9ab-263">Pour poser des questions, répondre aux questions et voir ce que font les autres utilisateurs d’Azure Logic Apps, visitez le [Forum Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-263">To ask questions, answer questions, and see what other Azure Logic Apps users are doing, visit the [Azure Logic Apps forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).</span></span>

<span data-ttu-id="cc9ab-264">Afin d’améliorer Logic Apps ainsi que les connecteurs, votez pour des idées ou soumettez-en sur le [site de commentaires utilisateur Logic Apps](http://aka.ms/logicapps-wish).</span><span class="sxs-lookup"><span data-stu-id="cc9ab-264">To help improve Logic Apps and connectors, vote on or submit ideas at the [Logic Apps user feedback site](http://aka.ms/logicapps-wish).</span></span> 

## <a name="next-steps"></a><span data-ttu-id="cc9ab-265">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cc9ab-265">Next steps</span></span>

* [<span data-ttu-id="cc9ab-266">Mesure de l’utilisation des actions et des déclencheurs</span><span class="sxs-lookup"><span data-stu-id="cc9ab-266">Usage metering for actions and triggers</span></span>](logic-apps-pricing.md)
* [<span data-ttu-id="cc9ab-267">Gérer les types de contenu</span><span class="sxs-lookup"><span data-stu-id="cc9ab-267">Handle content types</span></span>](./logic-apps-content-type.md)
* [<span data-ttu-id="cc9ab-268">Gérer les erreurs et exceptions</span><span class="sxs-lookup"><span data-stu-id="cc9ab-268">Handle errors and exceptions</span></span>](./logic-apps-exception-handling.md)
* [<span data-ttu-id="cc9ab-269">Sécurisation de l’accès à vos applications logiques</span><span class="sxs-lookup"><span data-stu-id="cc9ab-269">Secure access to your logic apps</span></span>](./logic-apps-securing-a-logic-app.md)
* [<span data-ttu-id="cc9ab-270">Appeler, déclencher ou imbriquer des applications logiques via des points de terminaison HTTP</span><span class="sxs-lookup"><span data-stu-id="cc9ab-270">Call, trigger, or nest logic apps with HTTP endpoints</span></span>](./logic-apps-http-endpoint.md)