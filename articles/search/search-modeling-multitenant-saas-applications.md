---
title: "Modélisation d’une architecture mutualisée dans la Recherche Azure | Microsoft Docs"
description: "Découvrez les modèles de conception courants pour les applications SaaS mutualisées lors de l’utilisation de Recherche Azure."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: fd1b0c7cc8210d27fdc500bf4e5641bedfe93cff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="94e16-103">Modèles de conception pour les applications SaaS mutualisées et Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="94e16-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="94e16-104">Une application mutualisée est une application qui fournit les mêmes services et fonctionnalités à plusieurs clients qui ne peuvent pas voir ni partager les données d’un autre client.</span><span class="sxs-lookup"><span data-stu-id="94e16-104">A multitenant application is one that provides the same services and capabilities to any number of tenants who cannot see or share the data of any other tenant.</span></span> <span data-ttu-id="94e16-105">Ce document aborde les stratégies d’isolation de client pour les applications mutualisées conçues avec Recherche Azure.</span><span class="sxs-lookup"><span data-stu-id="94e16-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="94e16-106">Concepts de Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="94e16-106">Azure Search concepts</span></span>
<span data-ttu-id="94e16-107">En tant que solution SaaS (search-as-a-service), Recherche Azure permet aux développeurs d’ajouter des expériences de recherche enrichies dans les applications sans avoir à gérer d’infrastructure, ni devenir un expert en matière de recherche.</span><span class="sxs-lookup"><span data-stu-id="94e16-107">As a search-as-a-service solution, Azure Search allows developers to add rich search experiences to applications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="94e16-108">Les données sont téléchargées vers le service, puis stockées dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="94e16-108">Data is uploaded to the service and then stored in the cloud.</span></span> <span data-ttu-id="94e16-109">À l’aide de requêtes simples dans l’API Recherche Azure, les données peuvent ensuite être modifiées et faire l’objet de recherches.</span><span class="sxs-lookup"><span data-stu-id="94e16-109">Using simple requests to the Azure Search API, the data can then be modified and searched.</span></span> <span data-ttu-id="94e16-110">[Cet article](http://aka.ms/whatisazsearch)présente une vue d’ensemble du service.</span><span class="sxs-lookup"><span data-stu-id="94e16-110">An overview of the service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="94e16-111">Avant d’aborder les modèles de conception, il est important de comprendre certains concepts de Recherche Azure.</span><span class="sxs-lookup"><span data-stu-id="94e16-111">Before discussing design patterns, it is important to understand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="94e16-112">Rechercher des services, des index, des champs et des documents</span><span class="sxs-lookup"><span data-stu-id="94e16-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="94e16-113">Lorsque vous utilisez Recherche Azure, vous vous abonnez à un *service de recherche*.</span><span class="sxs-lookup"><span data-stu-id="94e16-113">When using Azure Search, one subscribes to a *search service*.</span></span> <span data-ttu-id="94e16-114">Lorsque les données sont téléchargées vers Recherche Azure, elles sont stockées dans un *index* au sein du service de recherche.</span><span class="sxs-lookup"><span data-stu-id="94e16-114">As data is uploaded to Azure Search, it is stored in an *index* within the search service.</span></span> <span data-ttu-id="94e16-115">Un seul service peut contenir plusieurs index.</span><span class="sxs-lookup"><span data-stu-id="94e16-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="94e16-116">Pour utiliser les concepts familiers des bases de données, le service de recherche peut être comparé à une base de données, tandis que les index au sein d’un service peuvent être comparés aux tables dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="94e16-116">To use the familiar concepts of databases, the search service can be likened to a database while the indexes within a service can be likened to tables within a database.</span></span>

<span data-ttu-id="94e16-117">Chaque index au sein d’un service de recherche possède son propre schéma, qui est défini par un certain nombre de *champs*personnalisables.</span><span class="sxs-lookup"><span data-stu-id="94e16-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="94e16-118">Les données sont ajoutées à un index Recherche Azure sous la forme de *documents*individuels.</span><span class="sxs-lookup"><span data-stu-id="94e16-118">Data is added to an Azure Search index in the form of individual *documents*.</span></span> <span data-ttu-id="94e16-119">Chaque document doit être téléchargé dans un index spécifique et doit respecter le schéma de cet index.</span><span class="sxs-lookup"><span data-stu-id="94e16-119">Each document must be uploaded to a particular index and must fit that index's schema.</span></span> <span data-ttu-id="94e16-120">Lors de la recherche de données à l’aide de Recherche Azure, les requêtes de recherche en texte intégral sont exécutées sur un index spécifique.</span><span class="sxs-lookup"><span data-stu-id="94e16-120">When searching data using Azure Search, the full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="94e16-121">Pour comparer ces concepts à ceux d’une base de données, les champs peuvent être comparés aux colonnes d’une table et les documents peuvent être comparés aux lignes.</span><span class="sxs-lookup"><span data-stu-id="94e16-121">To compare these concepts to those of a database, fields can be likened to columns in a table and documents can be likened to rows.</span></span>

### <a name="scalability"></a><span data-ttu-id="94e16-122">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="94e16-122">Scalability</span></span>
<span data-ttu-id="94e16-123">Tout service Recherche Azure dans le [niveau tarifaire](https://azure.microsoft.com/pricing/details/search/) Standard peut évoluer en deux dimensions : stockage et disponibilité.</span><span class="sxs-lookup"><span data-stu-id="94e16-123">Any Azure Search service in the Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="94e16-124">*partitions* pour augmenter le stockage d’un service de recherche.</span><span class="sxs-lookup"><span data-stu-id="94e16-124">*Partitions* can be added to increase the storage of a search service.</span></span>
* <span data-ttu-id="94e16-125">*réplicas* à un service pour augmenter le débit des requêtes qu’un service de recherche peut gérer.</span><span class="sxs-lookup"><span data-stu-id="94e16-125">*Replicas* can be added to a service to increase the throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="94e16-126">L’ajout et la suppression de partitions et de réplicas lorsque nécessaire permet à la capacité du service de recherche d’augmenter en fonction de la quantité de données et du trafic demandés par l’application.</span><span class="sxs-lookup"><span data-stu-id="94e16-126">Adding and removing partitions and replicas at will allow the capacity of the search service to grow with the amount of data and traffic the application demands.</span></span> <span data-ttu-id="94e16-127">Pour qu’un service de recherche obtienne un [Contrat de niveau de service](https://azure.microsoft.com/support/legal/sla/search/v1_0/)en lecture, deux réplicas sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="94e16-127">In order for a search service to achieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="94e16-128">Pour qu’un service obtienne un [Contrat de niveau de service](https://azure.microsoft.com/support/legal/sla/search/v1_0/)en lecture et en écriture, trois réplicas sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="94e16-128">In order for a service to achieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="94e16-129">Limites du service et de l’index dans Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="94e16-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="94e16-130">Il existe différents [niveaux tarifaires](https://azure.microsoft.com/pricing/details/search/) dans la Recherche Azure et chaque niveau présente des [limites et quotas](search-limits-quotas-capacity.md) différents.</span><span class="sxs-lookup"><span data-stu-id="94e16-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of the tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="94e16-131">Certaines de ces limites se situent au niveau du service, certaines au niveau de l’index, et d’autres au niveau de la partition.</span><span class="sxs-lookup"><span data-stu-id="94e16-131">Some of these limits are at the service-level, some are at the index-level, and some are at the partition-level.</span></span>

|  | <span data-ttu-id="94e16-132">De base</span><span class="sxs-lookup"><span data-stu-id="94e16-132">Basic</span></span> | <span data-ttu-id="94e16-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="94e16-133">Standard1</span></span> | <span data-ttu-id="94e16-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="94e16-134">Standard2</span></span> | <span data-ttu-id="94e16-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="94e16-135">Standard3</span></span> | <span data-ttu-id="94e16-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="94e16-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="94e16-137">Nombre maximal de réplicas par service</span><span class="sxs-lookup"><span data-stu-id="94e16-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="94e16-138">3</span><span class="sxs-lookup"><span data-stu-id="94e16-138">3</span></span> |<span data-ttu-id="94e16-139">12</span><span class="sxs-lookup"><span data-stu-id="94e16-139">12</span></span> |<span data-ttu-id="94e16-140">12</span><span class="sxs-lookup"><span data-stu-id="94e16-140">12</span></span> |<span data-ttu-id="94e16-141">12</span><span class="sxs-lookup"><span data-stu-id="94e16-141">12</span></span> |<span data-ttu-id="94e16-142">12</span><span class="sxs-lookup"><span data-stu-id="94e16-142">12</span></span> |
| <span data-ttu-id="94e16-143">Nombre maximal de partitions par service</span><span class="sxs-lookup"><span data-stu-id="94e16-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="94e16-144">1</span><span class="sxs-lookup"><span data-stu-id="94e16-144">1</span></span> |<span data-ttu-id="94e16-145">12</span><span class="sxs-lookup"><span data-stu-id="94e16-145">12</span></span> |<span data-ttu-id="94e16-146">12</span><span class="sxs-lookup"><span data-stu-id="94e16-146">12</span></span> |<span data-ttu-id="94e16-147">12</span><span class="sxs-lookup"><span data-stu-id="94e16-147">12</span></span> |<span data-ttu-id="94e16-148">1</span><span class="sxs-lookup"><span data-stu-id="94e16-148">1</span></span> |
| <span data-ttu-id="94e16-149">Nombre maximal d’unités de recherche (réplicas*partitions) par service</span><span class="sxs-lookup"><span data-stu-id="94e16-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="94e16-150">3</span><span class="sxs-lookup"><span data-stu-id="94e16-150">3</span></span> |<span data-ttu-id="94e16-151">36</span><span class="sxs-lookup"><span data-stu-id="94e16-151">36</span></span> |<span data-ttu-id="94e16-152">36</span><span class="sxs-lookup"><span data-stu-id="94e16-152">36</span></span> |<span data-ttu-id="94e16-153">36</span><span class="sxs-lookup"><span data-stu-id="94e16-153">36</span></span> |<span data-ttu-id="94e16-154">36 (3 partitions max.)</span><span class="sxs-lookup"><span data-stu-id="94e16-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="94e16-155">Nombre maximal de documents par service</span><span class="sxs-lookup"><span data-stu-id="94e16-155">Maximum Documents per Service</span></span> |<span data-ttu-id="94e16-156">1 million</span><span class="sxs-lookup"><span data-stu-id="94e16-156">1 million</span></span> |<span data-ttu-id="94e16-157">180 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-157">180 million</span></span> |<span data-ttu-id="94e16-158">720 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-158">720 million</span></span> |<span data-ttu-id="94e16-159">1,4 milliard</span><span class="sxs-lookup"><span data-stu-id="94e16-159">1.4 billion</span></span> |<span data-ttu-id="94e16-160">600 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-160">600 million</span></span> |
| <span data-ttu-id="94e16-161">Stockage maximal par service</span><span class="sxs-lookup"><span data-stu-id="94e16-161">Maximum Storage per Service</span></span> |<span data-ttu-id="94e16-162">2 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-162">2 GB</span></span> |<span data-ttu-id="94e16-163">300 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-163">300 GB</span></span> |<span data-ttu-id="94e16-164">1,2 To</span><span class="sxs-lookup"><span data-stu-id="94e16-164">1.2 TB</span></span> |<span data-ttu-id="94e16-165">2,4 To</span><span class="sxs-lookup"><span data-stu-id="94e16-165">2.4 TB</span></span> |<span data-ttu-id="94e16-166">600 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-166">600 GB</span></span> |
| <span data-ttu-id="94e16-167">Nombre maximal de documents par partition</span><span class="sxs-lookup"><span data-stu-id="94e16-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="94e16-168">1 million</span><span class="sxs-lookup"><span data-stu-id="94e16-168">1 million</span></span> |<span data-ttu-id="94e16-169">15 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-169">15 million</span></span> |<span data-ttu-id="94e16-170">60 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-170">60 million</span></span> |<span data-ttu-id="94e16-171">120 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-171">120 million</span></span> |<span data-ttu-id="94e16-172">200 millions</span><span class="sxs-lookup"><span data-stu-id="94e16-172">200 million</span></span> |
| <span data-ttu-id="94e16-173">Stockage maximal par partition</span><span class="sxs-lookup"><span data-stu-id="94e16-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="94e16-174">2 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-174">2 GB</span></span> |<span data-ttu-id="94e16-175">25 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-175">25 GB</span></span> |<span data-ttu-id="94e16-176">100 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-176">100 GB</span></span> |<span data-ttu-id="94e16-177">200 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-177">200 GB</span></span> |<span data-ttu-id="94e16-178">200 Go</span><span class="sxs-lookup"><span data-stu-id="94e16-178">200 GB</span></span> |
| <span data-ttu-id="94e16-179">Nombre maximal d’index par service</span><span class="sxs-lookup"><span data-stu-id="94e16-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="94e16-180">5</span><span class="sxs-lookup"><span data-stu-id="94e16-180">5</span></span> |<span data-ttu-id="94e16-181">50</span><span class="sxs-lookup"><span data-stu-id="94e16-181">50</span></span> |<span data-ttu-id="94e16-182">200</span><span class="sxs-lookup"><span data-stu-id="94e16-182">200</span></span> |<span data-ttu-id="94e16-183">200</span><span class="sxs-lookup"><span data-stu-id="94e16-183">200</span></span> |<span data-ttu-id="94e16-184">3000 (1 000 index max. par partition)</span><span class="sxs-lookup"><span data-stu-id="94e16-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="94e16-185">Haute densité S3</span><span class="sxs-lookup"><span data-stu-id="94e16-185">S3 High Density'</span></span>
<span data-ttu-id="94e16-186">Dans le niveau tarifaire S3 de Recherche Azure, il existe une option pour le mode haute densité (HD) conçu spécifiquement pour les scénarios mutualisés.</span><span class="sxs-lookup"><span data-stu-id="94e16-186">In Azure Search’s S3 pricing tier, there is an option for the High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="94e16-187">Dans de nombreux cas, il est nécessaire de prendre en charge un grand nombre de clients plus petits sous un seul service pour tirer parti des avantages de simplicité et de rentabilité.</span><span class="sxs-lookup"><span data-stu-id="94e16-187">In many cases, it is necessary to support a large number of smaller tenants under a single service to achieve the benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="94e16-188">S3 HD permet de réunir les nombreux index de petite taille sous la gestion d’un seul service de recherche en troquant la possibilité d’augmenter la taille des instances des index à l’aide de partitions contre la possibilité d’héberger plus d’index dans un seul service.</span><span class="sxs-lookup"><span data-stu-id="94e16-188">S3 HD allows for the many small indexes to be packed under the management of a single search service by trading the ability to scale out indexes using partitions for the ability to host more indexes in a single service.</span></span>

<span data-ttu-id="94e16-189">Concrètement, un service S3 peut avoir entre 1 et 200 index qui, ensemble, peuvent héberger jusqu’à 1,4 milliard de documents.</span><span class="sxs-lookup"><span data-stu-id="94e16-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up to 1.4 billion documents.</span></span> <span data-ttu-id="94e16-190">À l’inverse, un niveau S3 HD ne permettrait aux index individuels que d’atteindre 1 million de documents, mais il peut gérer jusqu’à 1 000 index par partition (jusqu’à 3 000 par service), soit au total 200 millions de documents par partition (jusqu’à 600 millions par service).</span><span class="sxs-lookup"><span data-stu-id="94e16-190">An S3 HD on the other hand would allow individual indexes to only go up to 1 million documents, but it can handle up to 1000 indexes per partition (up to 3000 per service) with a total document count of 200 million per partition (up to 600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="94e16-191">Considérations relatives aux applications mutualisées</span><span class="sxs-lookup"><span data-stu-id="94e16-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="94e16-192">Les applications mutualisées doivent distribuer efficacement les ressources entre les clients tout en conservant un certain niveau de confidentialité entre les différents clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-192">Multitenant applications must effectively distribute resources among the tenants while preserving some level of privacy between the various tenants.</span></span> <span data-ttu-id="94e16-193">Il existe quelques considérations à prendre en compte lors de la conception de l’architecture pour ce type d’application :</span><span class="sxs-lookup"><span data-stu-id="94e16-193">There are a few considerations when designing the architecture for such an application:</span></span>

* <span data-ttu-id="94e16-194">*Isolation des clients :* les développeurs d’applications doivent prendre les mesures appropriées pour s’assurer qu’aucun client ne bénéficie d’un accès non autorisé ou non désiré aux données d’autres clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-194">*Tenant isolation:* Application developers need to take appropriate measures to ensure that no tenants have unauthorized or unwanted access to the data of other tenants.</span></span> <span data-ttu-id="94e16-195">Au-delà de la confidentialité des données, les stratégies d’isolation des clients nécessitent une gestion efficace des ressources partagées et la protection contre les voisins bruyants.</span><span class="sxs-lookup"><span data-stu-id="94e16-195">Beyond the perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="94e16-196">*Coût des ressources cloud :* comme pour toute autre application, les solutions logicielles doivent rester compétitives au niveau du coût en tant que composant d’une application mutualisée.</span><span class="sxs-lookup"><span data-stu-id="94e16-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="94e16-197">*Facilité des opérations :* lors du développement d’une architecture mutualisée, l’impact sur les opérations et la complexité de l’application est un facteur important.</span><span class="sxs-lookup"><span data-stu-id="94e16-197">*Ease of Operations:* When developing a multitenant architecture, the impact on the application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="94e16-198">La Recherche Azure bénéficie d’un [Contrat de niveau de service de 99,9 %](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="94e16-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="94e16-199">*Envergure internationale :* les applications mutualisées devront peut-être servir efficacement des clients qui sont répartis dans le monde entier.</span><span class="sxs-lookup"><span data-stu-id="94e16-199">*Global footprint:* Multitenant applications may need to effectively serve tenants which are distributed across the globe.</span></span>
* <span data-ttu-id="94e16-200">*Évolutivité :* les développeurs d’applications doivent trouver l’équilibre entre le fait de maintenir un niveau de complexité des applications suffisamment faible et la conception de l’application de façon à ce qu’elle évolue avec le nombre de clients, ainsi que la taille des données et la charge de travail des clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-200">*Scalability:* Application developers need to consider how they reconcile between maintaining a sufficiently low level of application complexity and designing the application to scale with number of tenants and the size of tenants' data and workload.</span></span>

<span data-ttu-id="94e16-201">Recherche Azure propose quelques limites qui peuvent être utilisées pour isoler les données et la charge de travail des clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-201">Azure Search offers a few boundaries that can be used to isolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="94e16-202">Modélisation d’une architecture mutualisée avec Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="94e16-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="94e16-203">Dans le cas d’un scénario mutualisé, le développeur de l’application consomme un ou plusieurs services de recherche et répartit les clients entre les services, les index ou les deux.</span><span class="sxs-lookup"><span data-stu-id="94e16-203">In the case of a multitenant scenario, the application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="94e16-204">Recherche Azure offre quelques modèles courants pour la modélisation d’un scénario mutualisé :</span><span class="sxs-lookup"><span data-stu-id="94e16-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="94e16-205">*Index par client :* chaque client a son propre index dans un service de recherche qui est partagé avec d’autres clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="94e16-206">*Service par client :* chaque client possède son propre service Recherche Azure dédié, pour un niveau de séparation maximal entre les données et la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="94e16-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="94e16-207">*Combinaison des deux :* les clients les plus volumineux et actifs se voient attribuer des services dédiés, tandis que les clients plus petits se voient attribuer des index individuels au sein de services partagés.</span><span class="sxs-lookup"><span data-stu-id="94e16-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="94e16-208">1. Index par client</span><span class="sxs-lookup"><span data-stu-id="94e16-208">1. Index per tenant</span></span>
![Une image du modèle d’index par client](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="94e16-210">Dans un modèle d’index par client, plusieurs clients occupent un seul service Recherche Azure où chaque client a son propre index.</span><span class="sxs-lookup"><span data-stu-id="94e16-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="94e16-211">Les clients bénéficient de l’isolation des données, car toutes les requêtes de recherche et les opérations sur les documents sont émises au niveau de l’index dans Recherche Azure.</span><span class="sxs-lookup"><span data-stu-id="94e16-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="94e16-212">Dans la couche d’application, il est entendu qu’il est nécessaire de diriger le trafic des divers clients vers les index appropriés, tout en gérant les ressources au niveau du service pour tous les clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-212">In the application layer, there is the need awareness to direct the various tenants’ traffic to the proper indexes while also managing resources at the service level across all tenants.</span></span>

<span data-ttu-id="94e16-213">Un attribut clé du modèle d’index par client est la possibilité pour le développeur d’applications d’augmenter la capacité d’un service de recherche pour les clients de l’application.</span><span class="sxs-lookup"><span data-stu-id="94e16-213">A key attribute of the index-per-tenant model is the ability for the application developer to oversubscribe the capacity of a search service among the application’s tenants.</span></span> <span data-ttu-id="94e16-214">Si la répartition de la charge de travail est inégale entre les clients, la combinaison optimale des clients peut être distribuée entre les index d’un service de recherche pour prendre en charge un nombre de clients très actifs, gourmands en ressources, tout en gérant simultanément une longue file de clients moins actifs.</span><span class="sxs-lookup"><span data-stu-id="94e16-214">If the tenants have an uneven distribution of workload, the optimal combination of tenants can be distributed across a search service’s indexes to accommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="94e16-215">Le compromis réside dans l’incapacité du modèle à gérer les situations où chaque client est simultanément très actif.</span><span class="sxs-lookup"><span data-stu-id="94e16-215">The trade-off is the inability of the model to handle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="94e16-216">Le modèle d’index par client sert de base à un modèle de coût variable, où un service Recherche Azure entier est acheté d’avance, puis rempli avec des clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-216">The index-per-tenant model provides the basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="94e16-217">Cela permet d’attribuer la capacité inutilisée aux essais et aux comptes gratuits.</span><span class="sxs-lookup"><span data-stu-id="94e16-217">This allows for unused capacity to be designated for trials and free accounts.</span></span>

<span data-ttu-id="94e16-218">Pour les applications avec une envergure internationale, le modèle d’index par client n’est peut-être pas le plus efficace.</span><span class="sxs-lookup"><span data-stu-id="94e16-218">For applications with a global footprint, the index-per-tenant model may not be the most efficient.</span></span> <span data-ttu-id="94e16-219">Si les clients d’une application sont répartis dans le monde entier, un service distinct peut être nécessaire pour chaque région, ce qui peut dupliquer les coûts pour chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="94e16-219">If an application's tenants are distributed across the globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="94e16-220">Recherche Azure permet la croissance des index individuels et du nombre total d’index.</span><span class="sxs-lookup"><span data-stu-id="94e16-220">Azure Search allows for the scale of both the individual indexes and the total number of indexes to grow.</span></span> <span data-ttu-id="94e16-221">Si un niveau tarifaire approprié est choisi, des réplicas et des partitions peuvent être ajoutés au service de recherche entier lorsqu’un index individuel au sein du service devient trop important en termes de stockage ou de trafic.</span><span class="sxs-lookup"><span data-stu-id="94e16-221">If an appropriate pricing tier is chosen, partitions and replicas can be added to the entire search service when an individual index within the service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="94e16-222">Si le nombre total d’index devient trop important pour un seul service, un autre service doit être configuré pour prendre en charge les nouveaux clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-222">If the total number of indexes grows too large for a single service, another service has to be provisioned to accommodate the new tenants.</span></span> <span data-ttu-id="94e16-223">Si les index doivent être déplacés entre les services de recherche lorsque de nouveaux services sont ajoutés, les données de l’index doivent être copiées manuellement d’un index vers l’autre car le déplacement d’un index n’est pas autorisé dans Recherche Azure.</span><span class="sxs-lookup"><span data-stu-id="94e16-223">If indexes have to be moved between search services as new services are added, the data from the index has to be manually copied from one index to the other as Azure Search does not allow for an index to be moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="94e16-224">2. Service par client</span><span class="sxs-lookup"><span data-stu-id="94e16-224">2. Service per tenant</span></span>
![Une image du modèle de service par client](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="94e16-226">Dans une architecture de service par client, chaque client possède son propre service de recherche.</span><span class="sxs-lookup"><span data-stu-id="94e16-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="94e16-227">Dans ce modèle, l’application atteint le niveau maximal d’isolation pour ses clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-227">In this model, the application achieves the maximum level of isolation for its tenants.</span></span> <span data-ttu-id="94e16-228">Chaque service bénéficie d’un débit et d’un stockage dédiés pour gérer les requêtes de recherche, ainsi que des clés d’API distinctes.</span><span class="sxs-lookup"><span data-stu-id="94e16-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="94e16-229">Pour les applications où chaque client a une grande envergure ou si la charge de travail varie peu d’un client à l’autre, le modèle de service par client constitue un choix efficace car les ressources ne sont pas partagées entre les charges de travail de différents clients.</span><span class="sxs-lookup"><span data-stu-id="94e16-229">For applications where each tenant has a large footprint or the workload has little variability from tenant to tenant, the service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="94e16-230">Un modèle de service par client offre également l’avantage d’un modèle à coût prévisible et fixe.</span><span class="sxs-lookup"><span data-stu-id="94e16-230">A service per tenant model also offers the benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="94e16-231">Il n’existe aucun investissement initial pour un service de recherche entier jusqu'à ce qu’il y ait un client pour le remplir. Cependant, le coût par client est supérieur au modèle d’index par client.</span><span class="sxs-lookup"><span data-stu-id="94e16-231">There is no up-front investment in an entire search service until there is a tenant to fill it, however the cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="94e16-232">Le modèle de service par client constitue une solution efficace pour les applications d’envergure internationale.</span><span class="sxs-lookup"><span data-stu-id="94e16-232">The service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="94e16-233">Avec des clients répartis géographiquement, il est facile de placer le service de chaque client dans la région appropriée.</span><span class="sxs-lookup"><span data-stu-id="94e16-233">With geographically-distributed tenants, it is easy to have each tenant's service in the appropriate region.</span></span>

<span data-ttu-id="94e16-234">Les défis liés à la mise à l’échelle de ce modèle se présentent lorsque la croissance des clients individuels surpasse celle de leur service.</span><span class="sxs-lookup"><span data-stu-id="94e16-234">The challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="94e16-235">Actuellement, Recherche Azure ne prend pas en charge la mise à niveau du niveau de tarification d’un service de recherche, donc toutes les données doivent être copiées manuellement vers un nouveau service.</span><span class="sxs-lookup"><span data-stu-id="94e16-235">Azure Search does not currently support upgrading the pricing tier of a search service, so all data would have to be manually copied to a new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="94e16-236">3. Combinaison des deux modèles</span><span class="sxs-lookup"><span data-stu-id="94e16-236">3. Mixing both models</span></span>
<span data-ttu-id="94e16-237">Un autre modèle pour la modélisation mutualisée est de combiner les stratégies d’index par client et de service par client.</span><span class="sxs-lookup"><span data-stu-id="94e16-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="94e16-238">En mélangeant les deux modèles, les clients les plus volumineux d’une application peuvent occuper des services dédiés, tandis que la longue file de clients moins actifs et plus petits peut occuper des index dans un service partagé.</span><span class="sxs-lookup"><span data-stu-id="94e16-238">By mixing the two patterns, an application's largest tenants can occupy dedicated services while the long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="94e16-239">Ce modèle garantit que les clients les plus volumineux bénéficient toujours de performances élevées du service tout en protégeant les clients plus petits des voisins bruyants.</span><span class="sxs-lookup"><span data-stu-id="94e16-239">This model ensures that the largest tenants have consistently high performance from the service while helping to protect the smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="94e16-240">Cependant, l’implémentation de cette stratégie repose sur la capacité à prévoir quels clients nécessiteront un service dédié au lieu d’un index dans un service partagé.</span><span class="sxs-lookup"><span data-stu-id="94e16-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="94e16-241">La complexité de l’application augmente avec la nécessité de gérer les deux modèles d’architecture mutualisée.</span><span class="sxs-lookup"><span data-stu-id="94e16-241">Application complexity increases with the need to manage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="94e16-242">Atteindre une granularité encore plus fine</span><span class="sxs-lookup"><span data-stu-id="94e16-242">Achieving even finer granularity</span></span>
<span data-ttu-id="94e16-243">Les modèles de conception ci-dessus pour les scénarios mutualisés dans Recherche Azure supposent qu’il existe une étendue uniforme, où chaque client constitue une instance entière d’une application.</span><span class="sxs-lookup"><span data-stu-id="94e16-243">The above design patterns to model multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="94e16-244">Toutefois, les applications peuvent parfois gérer plusieurs étendues plus petites.</span><span class="sxs-lookup"><span data-stu-id="94e16-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="94e16-245">Si les modèles service par client et index par client ne sont pas des étendues suffisamment petites, il est possible de modéliser un index pour atteindre un degré de granularité encore plus fin.</span><span class="sxs-lookup"><span data-stu-id="94e16-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible to model an index to achieve an even finer degree of granularity.</span></span>

<span data-ttu-id="94e16-246">Pour qu’un seul index se comporte différemment pour des points de terminaison clients différents, il est possible d’ajouter un champ à un index qui désigne une certaine valeur pour chaque client possible.</span><span class="sxs-lookup"><span data-stu-id="94e16-246">To have a single index behave differently for different client endpoints, a field can be added to an index which designates a certain value for each possible client.</span></span> <span data-ttu-id="94e16-247">À chaque fois qu’un client appelle Recherche Azure pour interroger ou modifier un index, le code de l’application cliente spécifie la valeur appropriée pour ce champ à l’aide de la fonctionnalité [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) de Recherche Azure au moment de la requête.</span><span class="sxs-lookup"><span data-stu-id="94e16-247">Each time a client calls Azure Search to query or modify an index, the code from the client application specifies the appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="94e16-248">Cette méthode peut être utilisée pour obtenir une fonctionnalité de comptes d’utilisateurs distincts, de niveaux d’autorisation distincts et même d’applications distinctes.</span><span class="sxs-lookup"><span data-stu-id="94e16-248">This method can be used to achieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="94e16-249">Utiliser l’approche décrite ci-dessus pour configurer un index unique pour servir plusieurs locataires affecte la pertinence des résultats de recherche.</span><span class="sxs-lookup"><span data-stu-id="94e16-249">Using the approach described above to configure a single index to serve multiple tenants affects the relevance of search results.</span></span> <span data-ttu-id="94e16-250">Les notes de pertinence de la recherche sont calculées au niveau de l’index et non au niveau du locataire. Ainsi, toutes les données des locataires sont incorporées dans les statistiques sous-jacentes des notes de pertinence, comme la fréquence des termes.</span><span class="sxs-lookup"><span data-stu-id="94e16-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in the relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="94e16-251">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="94e16-251">Next steps</span></span>
<span data-ttu-id="94e16-252">Recherche Azure est un outil de premier choix pour de nombreuses applications, [en savoir plus sur les fonctionnalités puissantes du service](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="94e16-252">Azure Search is a compelling choice for many applications, [read more about the service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="94e16-253">Lorsque vous évaluez les différents modèles de conception pour les applications mutualisées, consultez les [différents niveaux tarifaires](https://azure.microsoft.com/pricing/details/search/) et les [limites de service](search-limits-quotas-capacity.md) respectives pour mieux adapter la Recherche Azure aux architectures et aux charges de travail de toutes tailles.</span><span class="sxs-lookup"><span data-stu-id="94e16-253">When evaluating the various design patterns for multitenant applications, consider the [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and the respective [service limits](search-limits-quotas-capacity.md) to best tailor Azure Search to fit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="94e16-254">Toutes questions relatives à Recherche Azure et les scénarios partagés au sein d’une architecture mutualisée peuvent être envoyés vers azuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="94e16-254">Any questions about Azure Search and multitenant scenarios can be directed to azuresearch_contact@microsoft.com.</span></span>

