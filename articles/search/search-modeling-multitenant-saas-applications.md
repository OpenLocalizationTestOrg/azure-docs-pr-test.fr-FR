---
title: "aaaModeling l’architecture mutualisée dans Azure Search | Documents Microsoft"
description: "Découvrez les modèles de conception courants pour les applications SaaS mutualisées lors de l’utilisation de Recherche Azure."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: dd46cda772d32566b9aaa18d407f12fdf178bd43
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="a9d02-103">Modèles de conception pour les applications SaaS mutualisées et Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="a9d02-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="a9d02-104">Une application multi-locataire est celle qui fournit hello services et des fonctionnalités tooany autant de clients qui ne peuvent pas voir ou partager des données hello de n’importe quel autre client.</span><span class="sxs-lookup"><span data-stu-id="a9d02-104">A multitenant application is one that provides hello same services and capabilities tooany number of tenants who cannot see or share hello data of any other tenant.</span></span> <span data-ttu-id="a9d02-105">Ce document aborde les stratégies d’isolation de client pour les applications mutualisées conçues avec Recherche Azure.</span><span class="sxs-lookup"><span data-stu-id="a9d02-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="a9d02-106">Concepts de Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="a9d02-106">Azure Search concepts</span></span>
<span data-ttu-id="a9d02-107">Comme solution de recherche en tant que service, Azure Search permet la recherche riches de développeurs tooadd rencontre tooapplications sans gérer n’importe quelle infrastructure ou de devenir un expert dans la recherche.</span><span class="sxs-lookup"><span data-stu-id="a9d02-107">As a search-as-a-service solution, Azure Search allows developers tooadd rich search experiences tooapplications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="a9d02-108">Les données sont téléchargées toohello service et stockées dans le cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-108">Data is uploaded toohello service and then stored in hello cloud.</span></span> <span data-ttu-id="a9d02-109">À l’aide de simples demandes toohello API Azure Search, hello puis modifiées et des données recherchées.</span><span class="sxs-lookup"><span data-stu-id="a9d02-109">Using simple requests toohello Azure Search API, hello data can then be modified and searched.</span></span> <span data-ttu-id="a9d02-110">Vous trouverez une vue d’ensemble du service de hello dans [cet article](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="a9d02-110">An overview of hello service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="a9d02-111">Avant d’aborder les modèles de conception, il est important toounderstand certains concepts dans Azure Search.</span><span class="sxs-lookup"><span data-stu-id="a9d02-111">Before discussing design patterns, it is important toounderstand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="a9d02-112">Rechercher des services, des index, des champs et des documents</span><span class="sxs-lookup"><span data-stu-id="a9d02-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="a9d02-113">Lorsque vous utilisez Azure Search, un s’abonne tooa *service de recherche*.</span><span class="sxs-lookup"><span data-stu-id="a9d02-113">When using Azure Search, one subscribes tooa *search service*.</span></span> <span data-ttu-id="a9d02-114">Comme les données sont téléchargée tooAzure recherche, il est stocké dans un *index* au sein du service de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-114">As data is uploaded tooAzure Search, it is stored in an *index* within hello search service.</span></span> <span data-ttu-id="a9d02-115">Un seul service peut contenir plusieurs index.</span><span class="sxs-lookup"><span data-stu-id="a9d02-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="a9d02-116">toouse hello concepts familiers de bases de données, service de recherche hello peut être comparés de tooa index hello au sein d’un service peuvent être comparés de tootables au sein d’une base de données.</span><span class="sxs-lookup"><span data-stu-id="a9d02-116">toouse hello familiar concepts of databases, hello search service can be likened tooa database while hello indexes within a service can be likened tootables within a database.</span></span>

<span data-ttu-id="a9d02-117">Chaque index au sein d’un service de recherche possède son propre schéma, qui est défini par un certain nombre de *champs*personnalisables.</span><span class="sxs-lookup"><span data-stu-id="a9d02-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="a9d02-118">Données sont ajoutées index Azure Search de tooan sous forme de hello de personne *documents*.</span><span class="sxs-lookup"><span data-stu-id="a9d02-118">Data is added tooan Azure Search index in hello form of individual *documents*.</span></span> <span data-ttu-id="a9d02-119">Chaque document doit être téléchargé tooa un index particulier et doit tenir schéma de cet index.</span><span class="sxs-lookup"><span data-stu-id="a9d02-119">Each document must be uploaded tooa particular index and must fit that index's schema.</span></span> <span data-ttu-id="a9d02-120">Lors de la recherche des données à l’aide d’Azure Search, les requêtes de recherche en texte intégral hello sont émis par rapport à un index particulier.</span><span class="sxs-lookup"><span data-stu-id="a9d02-120">When searching data using Azure Search, hello full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="a9d02-121">toocompare toothose de ces concepts de base de données, les champs peuvent être comparés de toocolumns dans une table et les documents peuvent être comparés de toorows.</span><span class="sxs-lookup"><span data-stu-id="a9d02-121">toocompare these concepts toothose of a database, fields can be likened toocolumns in a table and documents can be likened toorows.</span></span>

### <a name="scalability"></a><span data-ttu-id="a9d02-122">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="a9d02-122">Scalability</span></span>
<span data-ttu-id="a9d02-123">N’importe quel service Azure Search Bonjour Standard [tarification](https://azure.microsoft.com/pricing/details/search/) peut évoluer en deux dimensions : stockage et disponibilité.</span><span class="sxs-lookup"><span data-stu-id="a9d02-123">Any Azure Search service in hello Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="a9d02-124">*Partitions* peut être ajouté de stockage de hello tooincrease d’un service de recherche.</span><span class="sxs-lookup"><span data-stu-id="a9d02-124">*Partitions* can be added tooincrease hello storage of a search service.</span></span>
* <span data-ttu-id="a9d02-125">*Réplicas* peuvent être ajoutées tooa service tooincrease hello un débit de demandes capable de gérer un service de recherche.</span><span class="sxs-lookup"><span data-stu-id="a9d02-125">*Replicas* can be added tooa service tooincrease hello throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="a9d02-126">Ajout et suppression de partitions et réplicas sur permettra capacité hello de hello recherche service toogrow avec la quantité de hello de données et le trafic de demandes d’application hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-126">Adding and removing partitions and replicas at will allow hello capacity of hello search service toogrow with hello amount of data and traffic hello application demands.</span></span> <span data-ttu-id="a9d02-127">Dans commande pour un tooachieve de service de recherche une lecture [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), elle nécessite deux réplicas.</span><span class="sxs-lookup"><span data-stu-id="a9d02-127">In order for a search service tooachieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="a9d02-128">Dans commande pour un service tooachieve en lecture-écriture [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), il requiert trois réplicas.</span><span class="sxs-lookup"><span data-stu-id="a9d02-128">In order for a service tooachieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="a9d02-129">Limites du service et de l’index dans Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="a9d02-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="a9d02-130">Il existe quelques différents [niveaux tarifaires](https://azure.microsoft.com/pricing/details/search/) dans Azure Search, chacun des niveaux de hello dispose de différents [limites et quotas](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="a9d02-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of hello tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="a9d02-131">Certaines de ces limites sont à hello au niveau du service, certaines sont au niveau d’index hello et certaines sont au niveau de partition hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-131">Some of these limits are at hello service-level, some are at hello index-level, and some are at hello partition-level.</span></span>

|  | <span data-ttu-id="a9d02-132">De base</span><span class="sxs-lookup"><span data-stu-id="a9d02-132">Basic</span></span> | <span data-ttu-id="a9d02-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="a9d02-133">Standard1</span></span> | <span data-ttu-id="a9d02-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="a9d02-134">Standard2</span></span> | <span data-ttu-id="a9d02-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="a9d02-135">Standard3</span></span> | <span data-ttu-id="a9d02-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="a9d02-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a9d02-137">Nombre maximal de réplicas par service</span><span class="sxs-lookup"><span data-stu-id="a9d02-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="a9d02-138">3</span><span class="sxs-lookup"><span data-stu-id="a9d02-138">3</span></span> |<span data-ttu-id="a9d02-139">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-139">12</span></span> |<span data-ttu-id="a9d02-140">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-140">12</span></span> |<span data-ttu-id="a9d02-141">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-141">12</span></span> |<span data-ttu-id="a9d02-142">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-142">12</span></span> |
| <span data-ttu-id="a9d02-143">Nombre maximal de partitions par service</span><span class="sxs-lookup"><span data-stu-id="a9d02-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="a9d02-144">1</span><span class="sxs-lookup"><span data-stu-id="a9d02-144">1</span></span> |<span data-ttu-id="a9d02-145">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-145">12</span></span> |<span data-ttu-id="a9d02-146">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-146">12</span></span> |<span data-ttu-id="a9d02-147">12</span><span class="sxs-lookup"><span data-stu-id="a9d02-147">12</span></span> |<span data-ttu-id="a9d02-148">1</span><span class="sxs-lookup"><span data-stu-id="a9d02-148">1</span></span> |
| <span data-ttu-id="a9d02-149">Nombre maximal d’unités de recherche (réplicas*partitions) par service</span><span class="sxs-lookup"><span data-stu-id="a9d02-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="a9d02-150">3</span><span class="sxs-lookup"><span data-stu-id="a9d02-150">3</span></span> |<span data-ttu-id="a9d02-151">36</span><span class="sxs-lookup"><span data-stu-id="a9d02-151">36</span></span> |<span data-ttu-id="a9d02-152">36</span><span class="sxs-lookup"><span data-stu-id="a9d02-152">36</span></span> |<span data-ttu-id="a9d02-153">36</span><span class="sxs-lookup"><span data-stu-id="a9d02-153">36</span></span> |<span data-ttu-id="a9d02-154">36 (3 partitions max.)</span><span class="sxs-lookup"><span data-stu-id="a9d02-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="a9d02-155">Nombre maximal de documents par service</span><span class="sxs-lookup"><span data-stu-id="a9d02-155">Maximum Documents per Service</span></span> |<span data-ttu-id="a9d02-156">1 million</span><span class="sxs-lookup"><span data-stu-id="a9d02-156">1 million</span></span> |<span data-ttu-id="a9d02-157">180 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-157">180 million</span></span> |<span data-ttu-id="a9d02-158">720 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-158">720 million</span></span> |<span data-ttu-id="a9d02-159">1,4 milliard</span><span class="sxs-lookup"><span data-stu-id="a9d02-159">1.4 billion</span></span> |<span data-ttu-id="a9d02-160">600 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-160">600 million</span></span> |
| <span data-ttu-id="a9d02-161">Stockage maximal par service</span><span class="sxs-lookup"><span data-stu-id="a9d02-161">Maximum Storage per Service</span></span> |<span data-ttu-id="a9d02-162">2 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-162">2 GB</span></span> |<span data-ttu-id="a9d02-163">300 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-163">300 GB</span></span> |<span data-ttu-id="a9d02-164">1,2 To</span><span class="sxs-lookup"><span data-stu-id="a9d02-164">1.2 TB</span></span> |<span data-ttu-id="a9d02-165">2,4 To</span><span class="sxs-lookup"><span data-stu-id="a9d02-165">2.4 TB</span></span> |<span data-ttu-id="a9d02-166">600 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-166">600 GB</span></span> |
| <span data-ttu-id="a9d02-167">Nombre maximal de documents par partition</span><span class="sxs-lookup"><span data-stu-id="a9d02-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="a9d02-168">1 million</span><span class="sxs-lookup"><span data-stu-id="a9d02-168">1 million</span></span> |<span data-ttu-id="a9d02-169">15 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-169">15 million</span></span> |<span data-ttu-id="a9d02-170">60 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-170">60 million</span></span> |<span data-ttu-id="a9d02-171">120 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-171">120 million</span></span> |<span data-ttu-id="a9d02-172">200 millions</span><span class="sxs-lookup"><span data-stu-id="a9d02-172">200 million</span></span> |
| <span data-ttu-id="a9d02-173">Stockage maximal par partition</span><span class="sxs-lookup"><span data-stu-id="a9d02-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="a9d02-174">2 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-174">2 GB</span></span> |<span data-ttu-id="a9d02-175">25 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-175">25 GB</span></span> |<span data-ttu-id="a9d02-176">100 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-176">100 GB</span></span> |<span data-ttu-id="a9d02-177">200 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-177">200 GB</span></span> |<span data-ttu-id="a9d02-178">200 Go</span><span class="sxs-lookup"><span data-stu-id="a9d02-178">200 GB</span></span> |
| <span data-ttu-id="a9d02-179">Nombre maximal d’index par service</span><span class="sxs-lookup"><span data-stu-id="a9d02-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="a9d02-180">5</span><span class="sxs-lookup"><span data-stu-id="a9d02-180">5</span></span> |<span data-ttu-id="a9d02-181">50</span><span class="sxs-lookup"><span data-stu-id="a9d02-181">50</span></span> |<span data-ttu-id="a9d02-182">200</span><span class="sxs-lookup"><span data-stu-id="a9d02-182">200</span></span> |<span data-ttu-id="a9d02-183">200</span><span class="sxs-lookup"><span data-stu-id="a9d02-183">200</span></span> |<span data-ttu-id="a9d02-184">3000 (1 000 index max. par partition)</span><span class="sxs-lookup"><span data-stu-id="a9d02-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="a9d02-185">Haute densité S3</span><span class="sxs-lookup"><span data-stu-id="a9d02-185">S3 High Density'</span></span>
<span data-ttu-id="a9d02-186">Dans le niveau de tarification d’Azure Search S3, il est une option pour le mode haute densité (HD) hello spécifiquement conçu pour les scénarios multi-locataires.</span><span class="sxs-lookup"><span data-stu-id="a9d02-186">In Azure Search’s S3 pricing tier, there is an option for hello High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="a9d02-187">Dans de nombreux cas, il est nécessaire toosupport un grand nombre de clients plus petits sous un avantages de hello tooachieve service unique de simplicité et une meilleure rentabilité.</span><span class="sxs-lookup"><span data-stu-id="a9d02-187">In many cases, it is necessary toosupport a large number of smaller tenants under a single service tooachieve hello benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="a9d02-188">S3 HD permet hello de nombreux petits index toobe empaquetés sous gestion hello d’un service de recherche par commercial tooscale de capacité hello des index sur des partitions hello capacité toohost plusieurs index dans un seul service.</span><span class="sxs-lookup"><span data-stu-id="a9d02-188">S3 HD allows for hello many small indexes toobe packed under hello management of a single search service by trading hello ability tooscale out indexes using partitions for hello ability toohost more indexes in a single service.</span></span>

<span data-ttu-id="a9d02-189">Concrètement, un service de S3 peut avoir entre 1 et 200 index ensemble susceptible d’héberger des milliards documents de too1.4.</span><span class="sxs-lookup"><span data-stu-id="a9d02-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up too1.4 billion documents.</span></span> <span data-ttu-id="a9d02-190">Un disque dur S3 sur hello autre part permettrait aux index individuels tooonly monter too1 millions de documents, mais il peut gérer des index too1000 par partition (haut too3000 par service) avec un nombre de documents total de 200 millions par partition (les too600 millions par service).</span><span class="sxs-lookup"><span data-stu-id="a9d02-190">An S3 HD on hello other hand would allow individual indexes tooonly go up too1 million documents, but it can handle up too1000 indexes per partition (up too3000 per service) with a total document count of 200 million per partition (up too600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="a9d02-191">Considérations relatives aux applications mutualisées</span><span class="sxs-lookup"><span data-stu-id="a9d02-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="a9d02-192">Applications mutualisées doivent distribuer efficacement les ressources entre les locataires hello tout en conservant un niveau de confidentialité entre hello différents clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-192">Multitenant applications must effectively distribute resources among hello tenants while preserving some level of privacy between hello various tenants.</span></span> <span data-ttu-id="a9d02-193">Il existe quelques considérations lors de la conception d’architecture hello pour une telle application :</span><span class="sxs-lookup"><span data-stu-id="a9d02-193">There are a few considerations when designing hello architecture for such an application:</span></span>

* <span data-ttu-id="a9d02-194">*Isolation des locataires :* les développeurs d’applications doivent tootake mesures tooensure qu’aucune clients ont non autorisé ou indésirables d’accéder aux données de toohello d’autres clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-194">*Tenant isolation:* Application developers need tootake appropriate measures tooensure that no tenants have unauthorized or unwanted access toohello data of other tenants.</span></span> <span data-ttu-id="a9d02-195">Au-delà de la perspective hello de confidentialité des données, stratégies d’isolation de client requièrent une gestion efficace des ressources partagées et la protection bruyantes voisins.</span><span class="sxs-lookup"><span data-stu-id="a9d02-195">Beyond hello perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="a9d02-196">*Coût des ressources cloud :* comme pour toute autre application, les solutions logicielles doivent rester compétitives au niveau du coût en tant que composant d’une application mutualisée.</span><span class="sxs-lookup"><span data-stu-id="a9d02-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="a9d02-197">*Facilité d’opérations :* lors du développement d’une architecture mutualisée, hello impact sur les opérations de l’application hello et la complexité est un facteur important.</span><span class="sxs-lookup"><span data-stu-id="a9d02-197">*Ease of Operations:* When developing a multitenant architecture, hello impact on hello application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="a9d02-198">La Recherche Azure bénéficie d’un [Contrat de niveau de service de 99,9 %](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="a9d02-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="a9d02-199">*Encombrement global :* applications mutualisées peuvent nécessiter que les locataires serve tooeffectively qui sont réparties entre les globe hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-199">*Global footprint:* Multitenant applications may need tooeffectively serve tenants which are distributed across hello globe.</span></span>
* <span data-ttu-id="a9d02-200">*Évolutivité :* les développeurs d’applications doivent tooconsider leur rapprochement entre maintenir un niveau suffisamment faible de la complexité des applications et de conception hello application tooscale avec le nombre de clients et hello la taille des données de clients et charge de travail.</span><span class="sxs-lookup"><span data-stu-id="a9d02-200">*Scalability:* Application developers need tooconsider how they reconcile between maintaining a sufficiently low level of application complexity and designing hello application tooscale with number of tenants and hello size of tenants' data and workload.</span></span>

<span data-ttu-id="a9d02-201">Azure Search offre quelques limites qui peuvent être des données et la charge de travail clients tooisolate utilisé.</span><span class="sxs-lookup"><span data-stu-id="a9d02-201">Azure Search offers a few boundaries that can be used tooisolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="a9d02-202">Modélisation d’une architecture mutualisée avec Recherche Azure</span><span class="sxs-lookup"><span data-stu-id="a9d02-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="a9d02-203">Dans les cas de hello d’un scénario multi-locataire, développeur de l’application hello consomme un ou plusieurs services de recherche et diviser les locataires des clients entre les services, les index ou les deux.</span><span class="sxs-lookup"><span data-stu-id="a9d02-203">In hello case of a multitenant scenario, hello application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="a9d02-204">Recherche Azure offre quelques modèles courants pour la modélisation d’un scénario mutualisé :</span><span class="sxs-lookup"><span data-stu-id="a9d02-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="a9d02-205">*Index par client :* chaque client a son propre index dans un service de recherche qui est partagé avec d’autres clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="a9d02-206">*Service par client :* chaque client possède son propre service Recherche Azure dédié, pour un niveau de séparation maximal entre les données et la charge de travail.</span><span class="sxs-lookup"><span data-stu-id="a9d02-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="a9d02-207">*Combinaison des deux :* les clients les plus volumineux et actifs se voient attribuer des services dédiés, tandis que les clients plus petits se voient attribuer des index individuels au sein de services partagés.</span><span class="sxs-lookup"><span data-stu-id="a9d02-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="a9d02-208">1. Index par client</span><span class="sxs-lookup"><span data-stu-id="a9d02-208">1. Index per tenant</span></span>
![Une image de modèle d’index pour chaque locataire hello](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="a9d02-210">Dans un modèle d’index par client, plusieurs clients occupent un seul service Recherche Azure où chaque client a son propre index.</span><span class="sxs-lookup"><span data-stu-id="a9d02-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="a9d02-211">Les clients bénéficient de l’isolation des données, car toutes les requêtes de recherche et les opérations sur les documents sont émises au niveau de l’index dans Recherche Azure.</span><span class="sxs-lookup"><span data-stu-id="a9d02-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="a9d02-212">Dans la couche d’application hello, il est reconnaissance du besoin hello toodirect hello index appropriés de différents clients trafic toohello tout en gérant des ressources au niveau de service hello sur tous les locataires.</span><span class="sxs-lookup"><span data-stu-id="a9d02-212">In hello application layer, there is hello need awareness toodirect hello various tenants’ traffic toohello proper indexes while also managing resources at hello service level across all tenants.</span></span>

<span data-ttu-id="a9d02-213">Un attribut de clé du modèle d’index pour chaque locataire hello consiste hello hello application developer toooversubscribe hello la capacité d’un service de recherche entre les clients de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-213">A key attribute of hello index-per-tenant model is hello ability for hello application developer toooversubscribe hello capacity of a search service among hello application’s tenants.</span></span> <span data-ttu-id="a9d02-214">Si les locataires hello ont une distribution inégale de la charge de travail, combinaison optimale de hello de clients peuvent être distribués sur un service de recherche d’index tooaccommodate un nombre de hautement les locataires actives, beaucoup de ressources lors du traitement d’une longue file de simultanément clients moins actifs.</span><span class="sxs-lookup"><span data-stu-id="a9d02-214">If hello tenants have an uneven distribution of workload, hello optimal combination of tenants can be distributed across a search service’s indexes tooaccommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="a9d02-215">trouver un compromis Hello est impossibilité hello hello modèle toohandle situations où chaque client est simultanément très actif.</span><span class="sxs-lookup"><span data-stu-id="a9d02-215">hello trade-off is hello inability of hello model toohandle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="a9d02-216">modèle d’index pour chaque locataire Hello servant de base de hello un modèle de coût de la variable, où un service Azure Search entier est acheté initial et rempli par la suite avec les clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-216">hello index-per-tenant model provides hello basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="a9d02-217">Cela permet à toobe capacité inutilisée désigné pour les versions d’évaluation et les comptes gratuits.</span><span class="sxs-lookup"><span data-stu-id="a9d02-217">This allows for unused capacity toobe designated for trials and free accounts.</span></span>

<span data-ttu-id="a9d02-218">Pour les applications avec un encombrement global, modèle d’index pour chaque locataire hello ne peut pas être hello plus efficace.</span><span class="sxs-lookup"><span data-stu-id="a9d02-218">For applications with a global footprint, hello index-per-tenant model may not be hello most efficient.</span></span> <span data-ttu-id="a9d02-219">Si les clients d’une application sont répartis entre les globe hello, un service distinct peut être nécessaire pour chaque zone peut dupliquer les coûts sur chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="a9d02-219">If an application's tenants are distributed across hello globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="a9d02-220">Azure Search permet de montée en puissance hello des index individuels de hello et nombre total de hello de toogrow d’index.</span><span class="sxs-lookup"><span data-stu-id="a9d02-220">Azure Search allows for hello scale of both hello individual indexes and hello total number of indexes toogrow.</span></span> <span data-ttu-id="a9d02-221">Si une tarification approprié niveau choisie, les partitions et réplicas peuvent être ajoutés au service de recherche toohello lorsqu’un index individuel au sein du service de hello devient trop importante en termes de stockage ou le trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="a9d02-221">If an appropriate pricing tier is chosen, partitions and replicas can be added toohello entire search service when an individual index within hello service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="a9d02-222">Si le nombre total de hello d’index devient trop volumineux pour un seul service, un autre service a toobe configuré tooaccommodate hello de nouveaux clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-222">If hello total number of indexes grows too large for a single service, another service has toobe provisioned tooaccommodate hello new tenants.</span></span> <span data-ttu-id="a9d02-223">Si les index toobe déplacée entre les services de recherche lors de l’ajout de nouveaux services, les données de salutation à partir de l’index de hello ont toobe copié manuellement à partir d’un seul index toohello autres que Azure Search n’autorise pas un toobe index déplacé.</span><span class="sxs-lookup"><span data-stu-id="a9d02-223">If indexes have toobe moved between search services as new services are added, hello data from hello index has toobe manually copied from one index toohello other as Azure Search does not allow for an index toobe moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="a9d02-224">2. Service par client</span><span class="sxs-lookup"><span data-stu-id="a9d02-224">2. Service per tenant</span></span>
![Une image de modèle de service pour chaque locataire hello](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="a9d02-226">Dans une architecture de service par client, chaque client possède son propre service de recherche.</span><span class="sxs-lookup"><span data-stu-id="a9d02-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="a9d02-227">Dans ce modèle, application hello atteint le niveau maximal de hello d’isolation pour ses clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-227">In this model, hello application achieves hello maximum level of isolation for its tenants.</span></span> <span data-ttu-id="a9d02-228">Chaque service bénéficie d’un débit et d’un stockage dédiés pour gérer les requêtes de recherche, ainsi que des clés d’API distinctes.</span><span class="sxs-lookup"><span data-stu-id="a9d02-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="a9d02-229">Pour les applications, où chaque client a un grand encombrement ou charge de travail hello a peu de variabilité de client tootenant, hello par client de service modèle est un choix efficace ressources ne sont pas partagées entre les charges de travail différents clients.</span><span class="sxs-lookup"><span data-stu-id="a9d02-229">For applications where each tenant has a large footprint or hello workload has little variability from tenant tootenant, hello service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="a9d02-230">Un service par le modèle de client également propose hello d’un modèle de coût fixe et prévisible.</span><span class="sxs-lookup"><span data-stu-id="a9d02-230">A service per tenant model also offers hello benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="a9d02-231">N’existe aucun investissements dans un service de recherche jusqu'à ce qu’il existe un toofill client, toutefois hello coût par client est supérieur à un modèle d’index pour chaque locataire.</span><span class="sxs-lookup"><span data-stu-id="a9d02-231">There is no up-front investment in an entire search service until there is a tenant toofill it, however hello cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="a9d02-232">modèle de service pour chaque locataire Hello est un choix efficace pour les applications avec un encombrement global.</span><span class="sxs-lookup"><span data-stu-id="a9d02-232">hello service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="a9d02-233">Dans les clients distribués géographiquement, il est facile toohave service de chaque client dans la région appropriée hello.</span><span class="sxs-lookup"><span data-stu-id="a9d02-233">With geographically-distributed tenants, it is easy toohave each tenant's service in hello appropriate region.</span></span>

<span data-ttu-id="a9d02-234">difficultés de Hello dans ce modèle de mise à l’échelle se présentent lorsque les locataires individuels prévoit leur service.</span><span class="sxs-lookup"><span data-stu-id="a9d02-234">hello challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="a9d02-235">Azure Search ne prend pas en charge la mise à niveau hello tarification d’un service de recherche, pour toutes les données aurait toobe copié manuellement tooa nouveau service.</span><span class="sxs-lookup"><span data-stu-id="a9d02-235">Azure Search does not currently support upgrading hello pricing tier of a search service, so all data would have toobe manually copied tooa new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="a9d02-236">3. Combinaison des deux modèles</span><span class="sxs-lookup"><span data-stu-id="a9d02-236">3. Mixing both models</span></span>
<span data-ttu-id="a9d02-237">Un autre modèle pour la modélisation mutualisée est de combiner les stratégies d’index par client et de service par client.</span><span class="sxs-lookup"><span data-stu-id="a9d02-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="a9d02-238">En combinant les modèles de hello deux, les clients plus grand d’une application peuvent occupent services dédiés hello long fin de moins de clients actifs, plus petits peut occuper un index dans un service partagé.</span><span class="sxs-lookup"><span data-stu-id="a9d02-238">By mixing hello two patterns, an application's largest tenants can occupy dedicated services while hello long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="a9d02-239">Ce modèle garantit que les clients plus grande hello ont des performances élevées à partir du service de hello tout en aidant tooprotect hello plus petits clients à partir de n’importe quel voisin bruyant.</span><span class="sxs-lookup"><span data-stu-id="a9d02-239">This model ensures that hello largest tenants have consistently high performance from hello service while helping tooprotect hello smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="a9d02-240">Cependant, l’implémentation de cette stratégie repose sur la capacité à prévoir quels clients nécessiteront un service dédié au lieu d’un index dans un service partagé.</span><span class="sxs-lookup"><span data-stu-id="a9d02-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="a9d02-241">La complexité des applications augmente avec hello besoin toomanage les deux de ces modèles de l’architecture mutualisées.</span><span class="sxs-lookup"><span data-stu-id="a9d02-241">Application complexity increases with hello need toomanage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="a9d02-242">Atteindre une granularité encore plus fine</span><span class="sxs-lookup"><span data-stu-id="a9d02-242">Achieving even finer granularity</span></span>
<span data-ttu-id="a9d02-243">Hello ci-dessus scénarios multi-locataires toomodel modèles conception dans Azure Search supposent une étendue uniforme, où chaque client est un ensemble de l’instance d’une application.</span><span class="sxs-lookup"><span data-stu-id="a9d02-243">hello above design patterns toomodel multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="a9d02-244">Toutefois, les applications peuvent parfois gérer plusieurs étendues plus petites.</span><span class="sxs-lookup"><span data-stu-id="a9d02-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="a9d02-245">Si les modèles par client de service et les index de chaque locataire ne sont pas des étendues suffisamment petites, il est possible toomodel un tooachieve index un degré de davantage de granularité.</span><span class="sxs-lookup"><span data-stu-id="a9d02-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible toomodel an index tooachieve an even finer degree of granularity.</span></span>

<span data-ttu-id="a9d02-246">toohave un index unique se comportent différemment pour les points de terminaison clients différents, un champ peut être ajouté tooan des index qui désigne une certaine valeur pour chaque client possible.</span><span class="sxs-lookup"><span data-stu-id="a9d02-246">toohave a single index behave differently for different client endpoints, a field can be added tooan index which designates a certain value for each possible client.</span></span> <span data-ttu-id="a9d02-247">Chaque fois qu’un client appelle Azure Search tooquery ou modifier un index, le code hello à partir de l’application cliente de hello spécifie la valeur appropriée de hello pour ce champ à l’aide de la recherche d’Azure [filtre](https://msdn.microsoft.com/library/azure/dn798921.aspx) fonctionnalité au moment de la requête.</span><span class="sxs-lookup"><span data-stu-id="a9d02-247">Each time a client calls Azure Search tooquery or modify an index, hello code from hello client application specifies hello appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="a9d02-248">Cette méthode peut être utilisé tooachieve les fonctionnalités des comptes d’utilisateurs distincts, les niveaux d’autorisation distinct et les applications même complètement distinctes.</span><span class="sxs-lookup"><span data-stu-id="a9d02-248">This method can be used tooachieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="a9d02-249">Hello approche décrite ci-dessus tooconfigure un index unique de tooserve plusieurs locataires affecte hello pertinence pour les résultats de recherche.</span><span class="sxs-lookup"><span data-stu-id="a9d02-249">Using hello approach described above tooconfigure a single index tooserve multiple tenants affects hello relevance of search results.</span></span> <span data-ttu-id="a9d02-250">Les scores de pertinence de recherche sont calculées dans une étendue au niveau de l’index, pas une portée au niveau du client, pour les données de tous les clients sont intégrées dans les statistiques sous-jacentes de scores de pertinence hello tels que la fréquence du terme.</span><span class="sxs-lookup"><span data-stu-id="a9d02-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in hello relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="a9d02-251">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a9d02-251">Next steps</span></span>
<span data-ttu-id="a9d02-252">Azure Search est un vaste choix pour de nombreuses applications [en savoir plus sur les fonctionnalités du service hello robuste](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="a9d02-252">Azure Search is a compelling choice for many applications, [read more about hello service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="a9d02-253">Lorsque l’évaluation hello différents modèles pour les applications multi-locataires de conception, envisagez de hello [différents niveaux de tarification](https://azure.microsoft.com/pricing/details/search/) et hello respectif [limites de service](search-limits-quotas-capacity.md) toobest adapter toofit d’Azure Search des charges de travail et les architectures de toutes tailles.</span><span class="sxs-lookup"><span data-stu-id="a9d02-253">When evaluating hello various design patterns for multitenant applications, consider hello [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and hello respective [service limits](search-limits-quotas-capacity.md) toobest tailor Azure Search toofit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="a9d02-254">Des questions sur Azure Search et scénarios multi-locataires peuvent être dirigées tooazuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="a9d02-254">Any questions about Azure Search and multitenant scenarios can be directed tooazuresearch_contact@microsoft.com.</span></span>

