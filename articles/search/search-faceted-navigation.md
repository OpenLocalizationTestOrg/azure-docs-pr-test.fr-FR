---
title: aaaHow tooimplement une navigation par facettes dans Azure Search | Documents Microsoft
description: "Ajoutez une navigation par facettes tooapplications qui s’intègrent à Azure Search, un service de recherche de nuage hébergé sur Microsoft Azure."
services: search
documentationcenter: 
author: HeidiSteen
manager: mblythe
editor: 
ms.assetid: cdf98fd4-63fd-4b50-b0b0-835cb08ad4d3
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 3/10/2017
ms.author: heidist
ms.openlocfilehash: c1e6bf9dc55d0044525db79e37d35a50ded5a736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooimplement-faceted-navigation-in-azure-search"></a><span data-ttu-id="5d308-103">Comment tooimplement une navigation par facettes dans Azure Search</span><span class="sxs-lookup"><span data-stu-id="5d308-103">How tooimplement faceted navigation in Azure Search</span></span>
<span data-ttu-id="5d308-104">La navigation à facettes est un mécanisme de filtrage qui fournit une navigation autonome d'extraction dans les applications de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-104">Faceted navigation is a filtering mechanism that provides self-directed drilldown navigation in search applications.</span></span> <span data-ttu-id="5d308-105">le terme Hello 'une navigation par facettes' peut-être être peu, mais vous avez probablement utilisé.</span><span class="sxs-lookup"><span data-stu-id="5d308-105">hello term 'faceted navigation' may be unfamiliar, but you've probably used it before.</span></span> <span data-ttu-id="5d308-106">En tant que hello suivant montre l’exemple, une navigation par facettes est rien de plus de résultats de toofilter hello catégories utilisées.</span><span class="sxs-lookup"><span data-stu-id="5d308-106">As hello following example shows, faceted navigation is nothing more than hello categories used toofilter results.</span></span>

 ![Démonstration du portail de recrutement Recherche Azure][1]

<span data-ttu-id="5d308-108">Navigation par facettes est un toosearch de point d’entrée autre.</span><span class="sxs-lookup"><span data-stu-id="5d308-108">Faceted navigation is an alternative entry point toosearch.</span></span> <span data-ttu-id="5d308-109">Il offre une pratique tootyping autres expressions de recherche complexe manuellement.</span><span class="sxs-lookup"><span data-stu-id="5d308-109">It offers a convenient alternative tootyping complex search expressions by hand.</span></span> <span data-ttu-id="5d308-110">Les facettes peuvent vous aider à trouver ce que vous recherchez, tout en vous assurant d’obtenir au moins un résultat.</span><span class="sxs-lookup"><span data-stu-id="5d308-110">Facets can help you find what you're looking for, while ensuring that you don’t get zero results.</span></span> <span data-ttu-id="5d308-111">En tant que développeur, les facettes vous permettent d’exposer des critères de recherche plus utiles hello pour naviguer dans votre corpus de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-111">As a developer, facets let you expose hello most useful search criteria for navigating your search corpus.</span></span> <span data-ttu-id="5d308-112">Dans les applications de vente au détail en ligne, la navigation à facettes repose souvent sur les marques, les catégories (chaussures pour enfants), la taille, le prix, la popularité et les évaluations.</span><span class="sxs-lookup"><span data-stu-id="5d308-112">In online retail applications, faceted navigation is often built over brands, departments (kid’s shoes), size, price, popularity, and ratings.</span></span> 

<span data-ttu-id="5d308-113">L’implémentation de la navigation par facettes varie en fonction des technologies de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-113">Implementing faceted navigation differs across search technologies.</span></span> <span data-ttu-id="5d308-114">Dans Recherche Azure, la navigation à facettes est créée au moment de la requête, à l’aide de champs précédemment attribués dans votre schéma.</span><span class="sxs-lookup"><span data-stu-id="5d308-114">In Azure Search, faceted navigation is built at query time, using fields that you previously attributed in your schema.</span></span>

-   <span data-ttu-id="5d308-115">Dans les requêtes de hello votre application se génère une requête doit envoyer *les paramètres de requête de facette* jeu de résultats de valeurs de filtre tooget hello facette disponibles pour ce document.</span><span class="sxs-lookup"><span data-stu-id="5d308-115">In hello queries that your application builds, a query must send *facet query parameters* tooget hello available facet filter values for that document result set.</span></span>

-   <span data-ttu-id="5d308-116">tooactually supprimer le jeu de résultats de document hello, application hello doit également appliquer un `$filter` expression.</span><span class="sxs-lookup"><span data-stu-id="5d308-116">tooactually trim hello document result set, hello application must also apply a `$filter` expression.</span></span>

<span data-ttu-id="5d308-117">Dans le développement de votre application, l’écriture de code qui crée des requêtes constitue en bloc de hello du travail de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-117">In your application development, writing code that constructs queries constitutes hello bulk of hello work.</span></span> <span data-ttu-id="5d308-118">Grand nombre des comportements d’application hello que vous pourriez attendre d’une navigation par facettes sont fournies par le service de hello, y compris la prise en charge intégrée pour définir des plages et l’obtention des nombres pour les résultats de facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-118">Many of hello application behaviors that you would expect from faceted navigation are provided by hello service, including built-in support for defining ranges and getting counts for facet results.</span></span> <span data-ttu-id="5d308-119">Hello comprend également des valeurs par défaut qui vous aident à éviter les structures de navigation lourde.</span><span class="sxs-lookup"><span data-stu-id="5d308-119">hello service also includes sensible defaults that help you avoid unwieldy navigation structures.</span></span> 

## <a name="sample-code-and-demo"></a><span data-ttu-id="5d308-120">Exemple de code et démonstration</span><span class="sxs-lookup"><span data-stu-id="5d308-120">Sample code and demo</span></span>
<span data-ttu-id="5d308-121">Cet article prend l’exemple d’un portail de recrutement.</span><span class="sxs-lookup"><span data-stu-id="5d308-121">This article uses a job search portal as an example.</span></span> <span data-ttu-id="5d308-122">exemple de Hello est implémenté comme une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="5d308-122">hello example is implemented as an ASP.NET MVC application.</span></span>

-   <span data-ttu-id="5d308-123">Consultez et tester la démonstration travail hello en ligne à [démonstration d’Azure Search travail Portal](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="5d308-123">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="5d308-124">Télécharger le code de hello de hello [dépôt d’exemples de Azure sur GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="5d308-124">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

## <a name="get-started"></a><span data-ttu-id="5d308-125">Prise en main</span><span class="sxs-lookup"><span data-stu-id="5d308-125">Get started</span></span>
<span data-ttu-id="5d308-126">Si vous êtes de nouveau développement toosearch, hello meilleure manière toothink de navigation par facettes est qu’elle affiche les possibilités de hello pour la recherche autonome.</span><span class="sxs-lookup"><span data-stu-id="5d308-126">If you're new toosearch development, hello best way toothink of faceted navigation is that it shows hello possibilities for self-directed search.</span></span> <span data-ttu-id="5d308-127">Il s'agit d'un type d'expérience de recherche détaillée, en fonction de filtres prédéfinis, utilisés pour limiter rapidement les résultats de la recherche à l'aide d'actions de type pointer et cliquer.</span><span class="sxs-lookup"><span data-stu-id="5d308-127">It’s a type of drill-down search experience, based on predefined filters, used for quickly narrowing down search results through point-and-click actions.</span></span> 

### <a name="interaction-model"></a><span data-ttu-id="5d308-128">Modèle d’interaction</span><span class="sxs-lookup"><span data-stu-id="5d308-128">Interaction model</span></span>

<span data-ttu-id="5d308-129">expérience de recherche Hello pour la navigation par facettes est itératif, par conséquent, nous allons commencer par comprendre il comme une séquence de requêtes qui se déroulent dans les actions de réponse toouser.</span><span class="sxs-lookup"><span data-stu-id="5d308-129">hello search experience for faceted navigation is iterative, so let’s start by understanding it as a sequence of queries that unfold in response toouser actions.</span></span>

<span data-ttu-id="5d308-130">point de départ de Hello est une page d’application qui fournit une navigation par facettes, généralement placée sur la périphérie de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-130">hello starting point is an application page that provides faceted navigation, typically placed on hello periphery.</span></span> <span data-ttu-id="5d308-131">La navigation à facettes est souvent présentée sous forme d'arborescence avec des cases à cocher pour chaque valeur ou du texte interactif.</span><span class="sxs-lookup"><span data-stu-id="5d308-131">Faceted navigation is often a tree structure, with checkboxes for each value, or clickable text.</span></span> 

1. <span data-ttu-id="5d308-132">Une requête envoyée tooAzure recherche spécifie la structure de navigation par facettes hello via un ou plusieurs paramètres de requête de facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-132">A query sent tooAzure Search specifies hello faceted navigation structure via one or more facet query parameters.</span></span> <span data-ttu-id="5d308-133">Par exemple, la requête de hello peut inclure `facet=Rating`, éventuellement avec un `:values` ou `:sort` option toofurther affiner la présentation de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-133">For instance, hello query might include `facet=Rating`, perhaps with a `:values` or `:sort` option toofurther refine hello presentation.</span></span>
2. <span data-ttu-id="5d308-134">couche de présentation Hello restitue une page de recherche qui fournit une navigation par facettes, à l’aide de facettes hello spécifiés dans la demande hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-134">hello presentation layer renders a search page that provides faceted navigation, using hello facets specified on hello request.</span></span>
3. <span data-ttu-id="5d308-135">Étant donné une structure de navigation par facettes qui inclut l’évaluation, cliquez sur « 4 » tooindicate à afficher uniquement les produits dont le niveau est supérieur ou égal à 4.</span><span class="sxs-lookup"><span data-stu-id="5d308-135">Given a faceted navigation structure that includes Rating, you click "4" tooindicate that only products with a rating of 4 or higher should be shown.</span></span> 
4. <span data-ttu-id="5d308-136">En réponse, application hello envoie une requête qui inclut`$filter=Rating ge 4`</span><span class="sxs-lookup"><span data-stu-id="5d308-136">In response, hello application sends a query that includes `$filter=Rating ge 4`</span></span> 
5. <span data-ttu-id="5d308-137">page de hello Hello présentation couche mises à jour un ensemble de résultats réduit, contenant uniquement les éléments qui répondent aux critères de nouveau hello (dans ce cas, les produits évalués 4 et ultérieures).</span><span class="sxs-lookup"><span data-stu-id="5d308-137">hello presentation layer updates hello page, showing a reduced result set, containing just those items that satisfy hello new criteria (in this case, products rated 4 and up).</span></span>

<span data-ttu-id="5d308-138">Une facette est un paramètre de requête, mais ne la confondez pas avec l'entrée de requête.</span><span class="sxs-lookup"><span data-stu-id="5d308-138">A facet is a query parameter, but do not confuse it with query input.</span></span> <span data-ttu-id="5d308-139">Elle n'est jamais utilisée comme critère de sélection dans une requête.</span><span class="sxs-lookup"><span data-stu-id="5d308-139">It is never used as selection criteria in a query.</span></span> <span data-ttu-id="5d308-140">Au lieu de cela, pensez facette paramètres de requête en tant que structure de navigation toohello entrées renvoyées dans la réponse de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-140">Instead, think of facet query parameters as inputs toohello navigation structure that comes back in hello response.</span></span> <span data-ttu-id="5d308-141">Pour chaque paramètre de requête de facette que vous fournissez, Azure Search évalue le nombre de documents est dans des résultats partiels hello pour chaque valeur de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-141">For each facet query parameter you provide, Azure Search evaluates how many documents are in hello partial results for each facet value.</span></span>

<span data-ttu-id="5d308-142">Hello d’avis `$filter` à l’étape 4.</span><span class="sxs-lookup"><span data-stu-id="5d308-142">Notice hello `$filter` in step 4.</span></span> <span data-ttu-id="5d308-143">filtre de Hello est un aspect important de navigation par facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-143">hello filter is an important aspect of faceted navigation.</span></span> <span data-ttu-id="5d308-144">Bien que les facettes et les filtres sont indépendants Bonjour API, vous devez les deux expérience de hello toodeliver que vous avez l’intention.</span><span class="sxs-lookup"><span data-stu-id="5d308-144">Although facets and filters are independent in hello API, you need both toodeliver hello experience you intend.</span></span> 

### <a name="app-design-pattern"></a><span data-ttu-id="5d308-145">Modèle de conception de l’application</span><span class="sxs-lookup"><span data-stu-id="5d308-145">App design pattern</span></span>

<span data-ttu-id="5d308-146">Dans le code d’application, le modèle de hello est toouse facette requête tooreturn hello une navigation par facettes structure des paramètres, ainsi que les résultats de facette, ainsi qu’une expression $filter.</span><span class="sxs-lookup"><span data-stu-id="5d308-146">In application code, hello pattern is toouse facet query parameters tooreturn hello faceted navigation structure along with facet results, plus a $filter expression.</span></span>  <span data-ttu-id="5d308-147">Hello filtre expression handles hello cliquez sur l’événement sur la valeur de la facette hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-147">hello filter expression handles hello click event on hello facet value.</span></span> <span data-ttu-id="5d308-148">Pensez à hello `$filter` d’expression en tant que code hello derrière la suppression réelle de hello des résultats de recherche a retourné la couche de présentation toohello.</span><span class="sxs-lookup"><span data-stu-id="5d308-148">Think of hello `$filter` expression as hello code behind hello actual trimming of search results returned toohello presentation layer.</span></span> <span data-ttu-id="5d308-149">Étant donné une facette de couleurs, en cliquant sur hello couleur rouge est implémentée via un `$filter` expression qui sélectionne uniquement les éléments qui ont une couleur rouge.</span><span class="sxs-lookup"><span data-stu-id="5d308-149">Given a Colors facet, clicking hello color Red is implemented through a `$filter` expression that selects only those items that have a color of red.</span></span> 

### <a name="query-basics"></a><span data-ttu-id="5d308-150">Principes de base des requêtes</span><span class="sxs-lookup"><span data-stu-id="5d308-150">Query basics</span></span>

<span data-ttu-id="5d308-151">Dans Azure Search, une requête est spécifiée par le biais d'un ou de plusieurs paramètres de requête (consultez [Rechercher des documents](http://msdn.microsoft.com/library/azure/dn798927.aspx) pour obtenir une description de chacun d'eux).</span><span class="sxs-lookup"><span data-stu-id="5d308-151">In Azure Search, a request is specified through one or more query parameters (see [Search Documents](http://msdn.microsoft.com/library/azure/dn798927.aspx) for a description of each one).</span></span> <span data-ttu-id="5d308-152">Aucun des paramètres de requête hello sont requis, mais vous devez avoir au moins un ordre pour un toobe de requête valide.</span><span class="sxs-lookup"><span data-stu-id="5d308-152">None of hello query parameters are required, but you must have at least one in order for a query toobe valid.</span></span>

<span data-ttu-id="5d308-153">Précision compris comme hello toofilter de capacité des accès non pertinentes, est possible grâce à un ou deux de ces expressions :</span><span class="sxs-lookup"><span data-stu-id="5d308-153">Precision, understood as hello ability toofilter out irrelevant hits, is achieved through one or both of these expressions:</span></span>

-   <span data-ttu-id="5d308-154">**search=**</span><span class="sxs-lookup"><span data-stu-id="5d308-154">**search=**</span></span>  
    <span data-ttu-id="5d308-155">valeur Hello de ce paramètre constitue une expression de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-155">hello value of this parameter constitutes hello search expression.</span></span> <span data-ttu-id="5d308-156">Il peut s'agir d'une portion de texte unique ou d'une expression de recherche complexe qui comprend plusieurs termes et opérateurs.</span><span class="sxs-lookup"><span data-stu-id="5d308-156">It might be a single piece of text, or a complex search expression that includes multiple terms and operators.</span></span> <span data-ttu-id="5d308-157">Sur le serveur de hello, une expression de recherche est utilisée pour la recherche en texte intégral, interrogation des champs de recherche dans les index hello pour la correspondance des termes du contrat, de retourner des résultats dans l’ordre de classement.</span><span class="sxs-lookup"><span data-stu-id="5d308-157">On hello server, a search expression is used for full-text search, querying searchable fields in hello index for matching terms, returning results in rank order.</span></span> <span data-ttu-id="5d308-158">Si vous définissez `search` toonull, est de l’exécution des requêtes sur la totalité de l’index hello (autrement dit, `search=*`).</span><span class="sxs-lookup"><span data-stu-id="5d308-158">If you set `search` toonull, query execution is over hello entire index (that is, `search=*`).</span></span> <span data-ttu-id="5d308-159">In this case, autres éléments de hello de requête, comme un `$filter` ou profil de calcul de score, est des principaux facteurs qui affectent les documents sont retournés hello `($filter`) et dans quel ordre (`scoringProfile` ou `$orderby`).</span><span class="sxs-lookup"><span data-stu-id="5d308-159">In this case, other elements of hello query, such as a `$filter` or scoring profile, are hello primary factors affecting which documents are returned `($filter`) and in what order (`scoringProfile` or `$orderby`).</span></span>

-   <span data-ttu-id="5d308-160">**$filter =**</span><span class="sxs-lookup"><span data-stu-id="5d308-160">**$filter=**</span></span>  
    <span data-ttu-id="5d308-161">Un filtre est un mécanisme puissant pour limiter la taille de hello des résultats de recherche en fonction des valeurs hello d’attributs de document spécifique.</span><span class="sxs-lookup"><span data-stu-id="5d308-161">A filter is a powerful mechanism for limiting hello size of search results based on hello values of specific document attributes.</span></span> <span data-ttu-id="5d308-162">A `$filter` est évaluée en premier, suivie de la logique des facettes qui génère les valeurs disponibles hello et les nombres correspondants pour chaque valeur</span><span class="sxs-lookup"><span data-stu-id="5d308-162">A `$filter` is evaluated first, followed by faceting logic that generates hello available values and corresponding counts for each value</span></span>

<span data-ttu-id="5d308-163">Expressions de recherche complexe diminuer les performances de hello de requête de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-163">Complex search expressions decrease hello performance of hello query.</span></span> <span data-ttu-id="5d308-164">Lorsque cela est possible, utilisez filtre bien construite expressions tooincrease précision et améliorer les performances des requêtes.</span><span class="sxs-lookup"><span data-stu-id="5d308-164">Where possible, use well-constructed filter expressions tooincrease precision and improve query performance.</span></span>

<span data-ttu-id="5d308-165">toobetter comprendre comment un filtre ajoute plus de précision, comparer un tooone d’expression de recherche complexe qui inclut une expression de filtre :</span><span class="sxs-lookup"><span data-stu-id="5d308-165">toobetter understand how a filter adds more precision, compare a complex search expression tooone that includes a filter expression:</span></span>

-   `GET /indexes/hotel/docs?search=lodging budget +Seattle –motel +parking`
-   `GET /indexes/hotel/docs?search=lodging&$filter=City eq ‘Seattle’ and Parking and Type ne ‘motel’`

<span data-ttu-id="5d308-166">Les deux requêtes sont valides, mais ensuite hello est supérieur si vous recherchez non motels avec stationnement à Seattle.</span><span class="sxs-lookup"><span data-stu-id="5d308-166">Both queries are valid, but hello second is superior if you’re looking for non-motels with parking in Seattle.</span></span>
-   <span data-ttu-id="5d308-167">requête de première Hello s’appuie sur les mots spécifiques qui est mentionné ou non mentionnées dans les champs de type chaîne comme nom, Description et tout autre champ contenant des données de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-167">hello first query relies on those specific words being mentioned or not mentioned in string fields like Name, Description, and any other field containing searchable data.</span></span>
-   <span data-ttu-id="5d308-168">seconde Hello recherche des correspondances précises sur les données structurées et est probablement toobe beaucoup plus précise.</span><span class="sxs-lookup"><span data-stu-id="5d308-168">hello second query looks for precise matches on structured data and is likely toobe much more accurate.</span></span>

<span data-ttu-id="5d308-169">Dans les applications qui incluent la navigation à facettes, veillez à ce que chaque action de l’utilisateur sur une structure de navigation à facettes soit accompagnée d’une réduction du champ des résultats de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-169">In applications that include faceted navigation, make sure that each user action over a faceted navigation structure is accompanied by a narrowing of search results.</span></span> <span data-ttu-id="5d308-170">toonarrow des résultats, utilisez une expression de filtre.</span><span class="sxs-lookup"><span data-stu-id="5d308-170">toonarrow results, use a filter expression.</span></span>

<a name="howtobuildit"></a>

## <a name="build-a-faceted-navigation-app"></a><span data-ttu-id="5d308-171">Créer une application de navigation à facettes</span><span class="sxs-lookup"><span data-stu-id="5d308-171">Build a faceted navigation app</span></span>
<span data-ttu-id="5d308-172">Vous implémentez une navigation par facettes avec Azure Search dans votre code d’application qui génère la demande de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-172">You implement faceted navigation with Azure Search in your application code that builds hello search request.</span></span> <span data-ttu-id="5d308-173">une navigation par facettes Hello s’appuie sur les éléments dans le schéma que vous avez défini précédemment.</span><span class="sxs-lookup"><span data-stu-id="5d308-173">hello faceted navigation relies on elements in your schema that you defined previously.</span></span>

<span data-ttu-id="5d308-174">Prédéfinies dans votre index de recherche est hello `Facetable [true|false]` attribut d’index, de définir sur les champs sélectionnés tooenable ou de désactiver leur utilisation dans une structure de navigation par facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-174">Predefined in your search index is hello `Facetable [true|false]` index attribute, set on selected fields tooenable or disable their use in a faceted navigation structure.</span></span> <span data-ttu-id="5d308-175">Sans `"Facetable" = true`, un champ ne peut pas être utilisé dans la navigation à facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-175">Without `"Facetable" = true`, a field cannot be used in facet navigation.</span></span>

<span data-ttu-id="5d308-176">couche de présentation Hello dans votre code fournit l’expérience utilisateur hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-176">hello presentation layer in your code provides hello user experience.</span></span> <span data-ttu-id="5d308-177">Elle doit répertorier les éléments constitutifs de hello de navigation par facettes hello, telles que l’étiquette de hello, les valeurs, les cases à cocher et les nombre de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-177">It should list hello constituent parts of hello faceted navigation, such as hello label, values, check boxes, and hello count.</span></span> <span data-ttu-id="5d308-178">Hello API REST Azure Search est indépendant de la plateforme, alors utilisez la plateforme que vous souhaitez et toute langue.</span><span class="sxs-lookup"><span data-stu-id="5d308-178">hello Azure Search REST API is platform agnostic, so use whatever language and platform you want.</span></span> <span data-ttu-id="5d308-179">Hello est important tooinclude des éléments d’interface utilisateur qui prennent en charge incrémentielle Actualiser, avec l’état de l’interface utilisateur mis à jour car chaque facette supplémentaire est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="5d308-179">hello important thing is tooinclude UI elements that support incremental refresh, with updated UI state as each additional facet is selected.</span></span> 

<span data-ttu-id="5d308-180">Au moment de la requête, votre code d’application crée une demande qui inclut `facet=[string]`, un paramètre de requête qui fournit des toofacet de champ hello par.</span><span class="sxs-lookup"><span data-stu-id="5d308-180">At query time, your application code creates a request that includes `facet=[string]`, a request parameter that provides hello field toofacet by.</span></span> <span data-ttu-id="5d308-181">Une requête peut avoir plusieurs facettes, comme `&facet=color&facet=category&facet=rating`, chaque facette étant séparée par un caractère d'esperluette (&).</span><span class="sxs-lookup"><span data-stu-id="5d308-181">A query can have multiple facets, such as `&facet=color&facet=category&facet=rating`, each one separated by an ampersand (&) character.</span></span>

<span data-ttu-id="5d308-182">Code de l’application doit également construire un `$filter` hello de toohandle expression événements de clic dans une navigation par facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-182">Application code must also construct a `$filter` expression toohandle hello click events in faceted navigation.</span></span> <span data-ttu-id="5d308-183">A `$filter` réduit les résultats de la recherche hello, à l’aide de la valeur de la facette hello comme critères de filtre.</span><span class="sxs-lookup"><span data-stu-id="5d308-183">A `$filter` reduces hello search results, using hello facet value as filter criteria.</span></span>

<span data-ttu-id="5d308-184">Azure renvoie les résultats de recherche hello, basés sur un ou plusieurs termes que vous entrez, ainsi que de la structure de navigation par facettes toohello mises à jour.</span><span class="sxs-lookup"><span data-stu-id="5d308-184">Azure Search returns hello search results, based on one or more terms that you enter, along with updates toohello faceted navigation structure.</span></span> <span data-ttu-id="5d308-185">Dans Azure Search, la navigation à facettes est une construction à niveau unique, avec des valeurs de facettes et des décomptes des résultats trouvés pour chaque.</span><span class="sxs-lookup"><span data-stu-id="5d308-185">In Azure Search, faceted navigation is a single-level construction, with facet values, and counts of how many results are found for each one.</span></span>

<span data-ttu-id="5d308-186">Dans les sections suivantes de hello, nous examinons proche procédure toobuild chaque partie.</span><span class="sxs-lookup"><span data-stu-id="5d308-186">In hello following sections, we take a closer look at how toobuild each part.</span></span>

<a name="buildindex"></a>

## <a name="build-hello-index"></a><span data-ttu-id="5d308-187">Créer des index de hello</span><span class="sxs-lookup"><span data-stu-id="5d308-187">Build hello index</span></span>
<span data-ttu-id="5d308-188">Des facettes sont activé sur une base de champ par champ dans les index hello, via cet attribut d’index : `"Facetable": true`.</span><span class="sxs-lookup"><span data-stu-id="5d308-188">Faceting is enabled on a field-by-field basis in hello index, via this index attribute: `"Facetable": true`.</span></span>  
<span data-ttu-id="5d308-189">Tous les types de champs pouvant être utilisés dans la navigation à facettes sont `Facetable` par défaut.</span><span class="sxs-lookup"><span data-stu-id="5d308-189">All field types that could possibly be used in faceted navigation are `Facetable` by default.</span></span> <span data-ttu-id="5d308-190">Ces types de champ incluent `Edm.String`, `Edm.DateTimeOffset`, et tous les hello des types de champs numériques (tous les types de champ sont essentiellement des facetable sauf `Edm.GeographyPoint`, qui ne peut pas être utilisé dans une navigation par facettes).</span><span class="sxs-lookup"><span data-stu-id="5d308-190">Such field types include `Edm.String`, `Edm.DateTimeOffset`, and all hello numeric field types (essentially, all field types are facetable except `Edm.GeographyPoint`, which can’t be used in faceted navigation).</span></span> 

<span data-ttu-id="5d308-191">Lorsque vous créez un index, une meilleure pratique pour la navigation par facettes est tooexplicitly, activer des facettes désactivée pour les champs qui ne doivent jamais être utilisés comme une facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-191">When building an index, a best practice for faceted navigation is tooexplicitly turn faceting off for fields that should never be used as a facet.</span></span>  <span data-ttu-id="5d308-192">En particulier, les champs de type chaîne pour les valeurs de singleton, par exemple un nom de produit ou d’ID doivent être définis trop`"Facetable": false` tooprevent leurs accidentelle (et inefficace) utiliser dans une navigation par facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-192">In particular, string fields for singleton values, such as an ID or product name, should be set too`"Facetable": false` tooprevent their accidental (and ineffective) use in faceted navigation.</span></span> <span data-ttu-id="5d308-193">L’activation des facettes off où vous n’avez pas besoin qu’il permet de maintenir une taille d’index de hello hello réduite et améliore généralement les performances.</span><span class="sxs-lookup"><span data-stu-id="5d308-193">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

<span data-ttu-id="5d308-194">Suivant fait partie du schéma de hello pour hello démonstration de portail de projet exemple d’application, de taille hello tooreduce attributs supprimé :</span><span class="sxs-lookup"><span data-stu-id="5d308-194">Following is part of hello schema for hello Job Portal Demo sample app, trimmed of some attributes tooreduce hello size:</span></span>

```json
{
  ...
  "name": "nycjobs",
  "fields": [
    { “name”: "id",                 "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "job_id",             "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "agency",              "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "posting_type",        "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "num_of_positions",    "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "business_title",      "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "civil_service_title", "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "title_code_no",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "level",               "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_from",   "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_to",     "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_frequency",    "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "work_location",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
…
    { “name”: "geo_location",        "type": "Edm.GeographyPoint",     "searchable": false, "filterable": true, ...  "facetable": false, ... },
    { “name”: "tags",                "type": "Collection(Edm.String)", "searchable": true,  "filterable": true, ...  "facetable": true, ...  }
  ],
…
}
```

<span data-ttu-id="5d308-195">Comme vous pouvez le voir dans le schéma de l’exemple hello `Facetable` est désactivée pour les champs ne doivent pas être utilisées en tant que facettes, telles que des valeurs d’ID de chaîne.</span><span class="sxs-lookup"><span data-stu-id="5d308-195">As you can see in hello sample schema, `Facetable` is turned off for string fields that shouldn’t be used as facets, such as ID values.</span></span> <span data-ttu-id="5d308-196">L’activation des facettes off où vous n’avez pas besoin qu’il permet de maintenir une taille d’index de hello hello réduite et améliore généralement les performances.</span><span class="sxs-lookup"><span data-stu-id="5d308-196">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

> [!TIP]
> <span data-ttu-id="5d308-197">En tant que meilleure pratique, comporter hello complète des attributs d’index pour chaque champ.</span><span class="sxs-lookup"><span data-stu-id="5d308-197">As a best practice, include hello full set of index attributes for each field.</span></span> <span data-ttu-id="5d308-198">Bien que `Facetable` est activé par défaut pour presque tous les champs, volontairement définissant chaque attribut, vous pouvez imaginer les implications en matière de hello de chaque décision de schéma.</span><span class="sxs-lookup"><span data-stu-id="5d308-198">Although `Facetable` is on by default for almost all fields, purposely setting each attribute can help you think through hello implications of each schema decision.</span></span> 

<a name="checkdata"></a>

## <a name="check-hello-data"></a><span data-ttu-id="5d308-199">Vérifier les données hello</span><span class="sxs-lookup"><span data-stu-id="5d308-199">Check hello data</span></span>
<span data-ttu-id="5d308-200">la qualité de vos données Hello a un effet direct sur si la structure de navigation par facettes hello matérialise comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="5d308-200">hello quality of your data has a direct effect on whether hello faceted navigation structure materializes as you expect it to.</span></span> <span data-ttu-id="5d308-201">Elle affecte également la convivialité de construction de jeu de résultats de filtres tooreduce hello hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-201">It also affects hello ease of constructing filters tooreduce hello result set.</span></span>

<span data-ttu-id="5d308-202">Si vous souhaitez toofacet par la marque ou le prix, chaque document doit contenir des valeurs pour *nom du produit* et *ProductPrice* qui sont valides, cohérentes et productifs comme option de filtre.</span><span class="sxs-lookup"><span data-stu-id="5d308-202">If you want toofacet by Brand or Price, each document should contain values for *BrandName* and *ProductPrice* that are valid, consistent, and productive as a filter option.</span></span>

<span data-ttu-id="5d308-203">Voici quelques rappels de quel tooscrub pour :</span><span class="sxs-lookup"><span data-stu-id="5d308-203">Here are a few reminders of what tooscrub for:</span></span>

* <span data-ttu-id="5d308-204">Pour chaque champ que vous souhaitez toofacet par, demandez-vous si elle contient des valeurs qui conviennent en tant que filtres dans la recherche autonome.</span><span class="sxs-lookup"><span data-stu-id="5d308-204">For every field that you want toofacet by, ask yourself whether it contains values that are suitable as filters in self-directed search.</span></span> <span data-ttu-id="5d308-205">les valeurs Hello doivent être court et descriptif suffisamment distinctive toooffer un choix clair entre les options concurrents.</span><span class="sxs-lookup"><span data-stu-id="5d308-205">hello values should be short, descriptive, and sufficiently distinctive toooffer a clear choice between competing options.</span></span>
* <span data-ttu-id="5d308-206">Fautes d'orthographe ou valeurs presque correspondantes.</span><span class="sxs-lookup"><span data-stu-id="5d308-206">Misspellings or nearly matching values.</span></span> <span data-ttu-id="5d308-207">Si vous facette de couleur et les valeurs de champ incluent Orange et Ornage (une faute d’orthographe), d’une facette basée sur le champ de couleur hello choisit les deux.</span><span class="sxs-lookup"><span data-stu-id="5d308-207">If you facet on Color, and field values include Orange and Ornage (a misspelling), a facet based on hello Color field would pick up both.</span></span>
* <span data-ttu-id="5d308-208">Le texte à casse mixte peut également causer des dégâts dans la navigation à facettes, où orange et Orange s'afficheraient comme deux valeurs différentes.</span><span class="sxs-lookup"><span data-stu-id="5d308-208">Mixed case text can also wreak havoc in faceted navigation, with orange and Orange appearing as two different values.</span></span> 
* <span data-ttu-id="5d308-209">Versions uniques et au pluriel de hello même valeur peut entraîner une facette distincte pour chaque.</span><span class="sxs-lookup"><span data-stu-id="5d308-209">Single and plural versions of hello same value can result in a separate facet for each.</span></span>

<span data-ttu-id="5d308-210">Comme vous pouvez l’imaginer, diligence lors de la préparation des données de salutation est un aspect essentiel de la navigation par facettes efficace.</span><span class="sxs-lookup"><span data-stu-id="5d308-210">As you can imagine, diligence in preparing hello data is an essential aspect of effective faceted navigation.</span></span>

<a name="presentationlayer"></a>

## <a name="build-hello-ui"></a><span data-ttu-id="5d308-211">Générer l’interface utilisateur de hello</span><span class="sxs-lookup"><span data-stu-id="5d308-211">Build hello UI</span></span>
<span data-ttu-id="5d308-212">Utilisation de la couche de présentation hello peut aide vous découvrez les spécifications peuvent être omies dans le cas contraire et comprennent quelles sont les fonctionnalités essentiel toohello expérience de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-212">Working back from hello presentation layer can help you uncover requirements that might be missed otherwise, and understand which capabilities are essential toohello search experience.</span></span>

<span data-ttu-id="5d308-213">En termes de navigation par facettes, votre page web ou une application affiche la structure de navigation par facettes hello détecte une entrée d’utilisateur sur la page de hello et insère les éléments hello modifié.</span><span class="sxs-lookup"><span data-stu-id="5d308-213">In terms of faceted navigation, your web or application page displays hello faceted navigation structure, detects user input on hello page, and inserts hello changed elements.</span></span> 

<span data-ttu-id="5d308-214">Pour les applications web, AJAX est souvent utilisé dans la couche de présentation hello, car elle vous permet de toorefresh les modifications incrémentielles.</span><span class="sxs-lookup"><span data-stu-id="5d308-214">For web applications, AJAX is commonly used in hello presentation layer because it allows you toorefresh incremental changes.</span></span> <span data-ttu-id="5d308-215">Vous pouvez également utiliser ASP.NET MVC ou n’importe quelle autre plateforme de visualisation qui peut se connecter tooan service Azure Search via HTTP.</span><span class="sxs-lookup"><span data-stu-id="5d308-215">You could also use ASP.NET MVC or any other visualization platform that can connect tooan Azure Search service over HTTP.</span></span> <span data-ttu-id="5d308-216">exemple d’application Hello référencés tout au long de cet article : hello **démonstration d’Azure Search travail portail** – se produit toobe une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="5d308-216">hello sample application referenced throughout this article -- hello **Azure Search Job Portal Demo** – happens toobe an ASP.NET MVC application.</span></span>

<span data-ttu-id="5d308-217">Dans l’exemple hello, navigation par facettes est générée dans la page de résultats hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-217">In hello sample, faceted navigation is built into hello search results page.</span></span> <span data-ttu-id="5d308-218">Hello suivants exemple tiré de hello `index.cshtml` page de résultats du fichier de l’application d’exemple hello, structure statique HTML affiche hello pour l’affichage d’une navigation par facettes sur la recherche de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-218">hello following example, taken from hello `index.cshtml` file of hello sample application, shows hello static HTML structure for displaying faceted navigation on hello search results page.</span></span> <span data-ttu-id="5d308-219">liste Hello de facettes est générée ou reconstruction dynamique lorsque vous envoyez un terme à rechercher, ou activez ou désactivez une facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-219">hello list of facets is built or rebuilt dynamically when you submit a search term, or select or clear a facet.</span></span>

```html
<div class="widget sidebar-widget jobs-filter-widget">
  <h5 class="widget-title">Filter Results</h5>
    <p id="filterReset"></p>
    <div class="widget-content">

      <h6 id="businessTitleFacetTitle">Business Title</h6>
      <ul class="filter-list" id="business_title_facets">
      </ul>

      <h6>Location</h6>
      <ul class="filter-list" id="posting_type_facets">
      </ul>

      <h6>Posting Type</h6>
      <ul class="filter-list" id="posting_type_facets"></ul>

      <h6>Minimum Salary</h6>
      <ul class="filter-list" id="salary_range_facets">
      </ul>

  </div>
</div>
```

<span data-ttu-id="5d308-220">Hello suivant extrait de code à partir de hello `index.cshtml` page crée dynamiquement hello HTML toodisplay hello première facette du, titre de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="5d308-220">hello following code snippet from hello `index.cshtml` page dynamically builds hello HTML toodisplay hello first facet, Business Title.</span></span> <span data-ttu-id="5d308-221">Des fonctions similaires générer de façon dynamique hello HTML pour hello autres facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-221">Similar functions dynamically build hello HTML for hello other facets.</span></span> <span data-ttu-id="5d308-222">Chaque facette a une étiquette et un nombre, qui affiche le nombre de hello d’éléments trouvé pour ce résultat de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-222">Each facet has a label and a count, which displays hello number of items found for that facet result.</span></span>

```js
function UpdateBusinessTitleFacets(data) {
  var facetResultsHTML = '';
  for (var i = 0; i < data.length; i++) {
    facetResultsHTML += '<li><a href="javascript:void(0)" onclick="ChooseBusinessTitleFacet(\'' + data[i].Value + '\');">' + data[i].Value + ' (' + data[i].Count + ')</span></a></li>';
  }

  $("#business_title_facets").html(facetResultsHTML);
}
```

> [!TIP]
> <span data-ttu-id="5d308-223">Lorsque vous concevez la page de résultats hello, n’oubliez pas tooadd un mécanisme de compensation des facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-223">When you design hello search results page, remember tooadd a mechanism for clearing facets.</span></span> <span data-ttu-id="5d308-224">Si vous ajoutez des cases à cocher, vous pouvez facilement voir comment les filtres tooclear hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-224">If you add check boxes, you can easily see how tooclear hello filters.</span></span> <span data-ttu-id="5d308-225">Pour les autres dispositions, vous devrez peut-être utiliser un modèle de navigation ou une autre approche créative.</span><span class="sxs-lookup"><span data-stu-id="5d308-225">For other layouts, you might need a breadcrumb pattern or another creative approach.</span></span> <span data-ttu-id="5d308-226">Par exemple, dans hello application d’exemple de portail de recherche de travail, vous pouvez cliquer sur hello `[X]` après une facette de hello tooclear facette sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="5d308-226">For example, in hello Job Search Portal sample application, you can click hello `[X]` after a selected facet tooclear hello facet.</span></span>

<a name="buildquery"></a>

## <a name="build-hello-query"></a><span data-ttu-id="5d308-227">Générer la requête de hello</span><span class="sxs-lookup"><span data-stu-id="5d308-227">Build hello query</span></span>
<span data-ttu-id="5d308-228">code Hello que vous écrivez pour la création de requêtes doit spécifier toutes les parties d’une requête valide, y compris des expressions de recherche, les facettes, les filtres, de calcul de score profils – tout élément utilisé tooformulate une demande.</span><span class="sxs-lookup"><span data-stu-id="5d308-228">hello code that you write for building queries should specify all parts of a valid query, including search expressions, facets, filters, scoring profiles– anything used tooformulate a request.</span></span> <span data-ttu-id="5d308-229">Dans cette section, nous explorons où facettes tenir dans une requête, et comment les filtres sont utilisés avec les facettes toodeliver réduits jeu de résultats.</span><span class="sxs-lookup"><span data-stu-id="5d308-229">In this section, we explore where facets fit into a query, and how filters are used with facets toodeliver a reduced result set.</span></span>

<span data-ttu-id="5d308-230">Notez que les facettes font partie intégrante de cet exemple d'application.</span><span class="sxs-lookup"><span data-stu-id="5d308-230">Notice that facets are integral in this sample application.</span></span> <span data-ttu-id="5d308-231">expérience de recherche Hello Bonjour démonstration de portail de projet est conçu autour de filtres et de navigation par facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-231">hello search experience in hello Job Portal Demo is designed around faceted navigation and filters.</span></span> <span data-ttu-id="5d308-232">la sélection élective visible de Hello de navigation par facettes sur la page de hello illustre son importance.</span><span class="sxs-lookup"><span data-stu-id="5d308-232">hello prominent placement of faceted navigation on hello page demonstrates its importance.</span></span> 

<span data-ttu-id="5d308-233">Un exemple est souvent un toobegin parfait.</span><span class="sxs-lookup"><span data-stu-id="5d308-233">An example is often a good place toobegin.</span></span> <span data-ttu-id="5d308-234">Hello suivants exemple tiré de hello `JobsSearch.cs` fichier, une demande qui crée la navigation de la facette basée sur le titre de l’entreprise, l’emplacement, Type de validation et Minimum salaire des builds.</span><span class="sxs-lookup"><span data-stu-id="5d308-234">hello following example, taken from hello `JobsSearch.cs` file, builds a request that creates facet navigation based on Business Title, Location, Posting Type, and Minimum Salary.</span></span> 

```cs
SearchParameters sp = new SearchParameters()
{
  ...
  // Add facets
  Facets = new List<String>() { "business_title", "posting_type", "level", "salary_range_from,interval:50000" },
};
```

<span data-ttu-id="5d308-235">Un paramètre de requête de facette a la valeur tooa champ et selon le type de données hello, peut être davantage paramétrable par liste délimitée par des virgules qui inclut `count:<integer>`, `sort:<>`, `interval:<integer>`, et `values:<list>`.</span><span class="sxs-lookup"><span data-stu-id="5d308-235">A facet query parameter is set tooa field and depending on hello data type, can be further parameterized by comma-delimited list that includes `count:<integer>`, `sort:<>`, `interval:<integer>`, and `values:<list>`.</span></span> <span data-ttu-id="5d308-236">Une liste de valeurs est prise en charge pour les données numériques lors de la définition de plages.</span><span class="sxs-lookup"><span data-stu-id="5d308-236">A values list is supported for numeric data when setting up ranges.</span></span> <span data-ttu-id="5d308-237">Consultez [Rechercher des documents (API Azure Search)](http://msdn.microsoft.com/library/azure/dn798927.aspx) pour obtenir des détails sur l'utilisation.</span><span class="sxs-lookup"><span data-stu-id="5d308-237">See [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx) for usage details.</span></span>

<span data-ttu-id="5d308-238">En même temps que les facettes, demande hello formulée par votre application doit également s’appuyer toonarrow filtres vers le bas ensemble hello de documents candidats selon une sélection de valeur de facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-238">Along with facets, hello request formulated by your application should also build filters toonarrow down hello set of candidate documents based on a facet value selection.</span></span> <span data-ttu-id="5d308-239">Pour un magasin de vélos, navigation par facettes fournit comme des indices tooquestions *les couleurs, les constructeurs et les types de vélos sont disponibles ?*.</span><span class="sxs-lookup"><span data-stu-id="5d308-239">For a bike store, faceted navigation provides clues tooquestions like *What colors, manufacturers, and types of bikes are available?*.</span></span> <span data-ttu-id="5d308-240">Le filtrage permet de répondre à des questions du type *Quels sont les vélos de type VTT et de couleur rouge dans cette gamme de prix ?*.</span><span class="sxs-lookup"><span data-stu-id="5d308-240">Filtering answers questions like *Which exact bikes are red, mountain bikes, in this price range?*.</span></span> <span data-ttu-id="5d308-241">Lorsque vous cliquez sur « Rouge » tooindicate à afficher uniquement les produits de couleur rouge, application de hello de requête suivante hello envoie inclut `$filter=Color eq ‘Red’`.</span><span class="sxs-lookup"><span data-stu-id="5d308-241">When you click "Red" tooindicate that only Red products should be shown, hello next query hello application sends includes `$filter=Color eq ‘Red’`.</span></span>

<span data-ttu-id="5d308-242">Hello suivant extrait de code à partir de hello `JobsSearch.cs` page ajoute hello sélectionné profession toohello filtre si vous sélectionnez une valeur de facette de profession hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-242">hello following code snippet from hello `JobsSearch.cs` page adds hello selected Business Title toohello filter if you select a value from hello Business Title facet.</span></span>

```cs
if (businessTitleFacet != "")
  filter = "business_title eq '" + businessTitleFacet + "'";
```

<a name="tips"></a> 

## <a name="tips-and-best-practices"></a><span data-ttu-id="5d308-243">Conseils et meilleures pratiques</span><span class="sxs-lookup"><span data-stu-id="5d308-243">Tips and best practices</span></span>

### <a name="indexing-tips"></a><span data-ttu-id="5d308-244">Conseils d’indexation</span><span class="sxs-lookup"><span data-stu-id="5d308-244">Indexing tips</span></span>
<span data-ttu-id="5d308-245">**Améliorer l’efficacité des index si vous n’utilisez pas de zone de recherche**</span><span class="sxs-lookup"><span data-stu-id="5d308-245">**Improve index efficiency if you don't use a Search box**</span></span>

<span data-ttu-id="5d308-246">Si votre application utilise une navigation par facettes exclusivement (autrement dit, aucune zone de recherche), vous pouvez marquer le champ hello comme `searchable=false`, `facetable=true` tooproduce un index plus compact.</span><span class="sxs-lookup"><span data-stu-id="5d308-246">If your application uses faceted navigation exclusively (that is, no search box), you can mark hello field as `searchable=false`, `facetable=true` tooproduce a more compact index.</span></span> <span data-ttu-id="5d308-247">En outre, l’indexation se produit uniquement sur des valeurs de facettes entier, avec aucune coupure de mots ou de l’indexation des composants hello d’une valeur de plusieurs mot.</span><span class="sxs-lookup"><span data-stu-id="5d308-247">In addition, indexing occurs only on whole facet values, with no word-break or indexing of hello component parts of a multi-word value.</span></span>

<span data-ttu-id="5d308-248">**Spécifier les champs qui peuvent servir de facettes**</span><span class="sxs-lookup"><span data-stu-id="5d308-248">**Specify which fields can be used as facets**</span></span>

<span data-ttu-id="5d308-249">Rappelez-vous que hello schéma d’index de hello détermine les champs disponible toouse comme une facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-249">Recall that hello schema of hello index determines which fields are available toouse as a facet.</span></span> <span data-ttu-id="5d308-250">En supposant qu’un champ est facetable, les requêtes hello spécifie quels toofacet de champs par.</span><span class="sxs-lookup"><span data-stu-id="5d308-250">Assuming a field is facetable, hello query specifies which fields toofacet by.</span></span> <span data-ttu-id="5d308-251">champ Hello qui vous sont des facettes fournit des valeurs hello qui apparaissent sous l’étiquette de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-251">hello field by which you are faceting provides hello values that appear below hello label.</span></span> 

<span data-ttu-id="5d308-252">les valeurs de Hello qui s’affichent sous chaque étiquette sont récupérées à partir de l’index de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-252">hello values that appear under each label are retrieved from hello index.</span></span> <span data-ttu-id="5d308-253">Par exemple, si hello champ de facette est *couleur*, valeurs hello disponibles pour le filtrage supplémentaires sont hello valeurs pour ce champ - rouge, noir et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="5d308-253">For example, if hello facet field is *Color*, hello values available for additional filtering are hello values for that field - Red, Black, and so forth.</span></span>

<span data-ttu-id="5d308-254">Pour les valeurs numériques et de date/heure uniquement, vous pouvez définir explicitement des valeurs de champ de facette hello (par exemple, `facet=Rating,values:1|2|3|4|5`).</span><span class="sxs-lookup"><span data-stu-id="5d308-254">For Numeric and DateTime values only, you can explicitly set values on hello facet field (for example, `facet=Rating,values:1|2|3|4|5`).</span></span> <span data-ttu-id="5d308-255">Une liste de valeurs est autorisée pour ces champs types toosimplify hello séparation des résultats de facette dans des plages contiguës (deux plages en fonction des valeurs numériques ou des périodes de temps).</span><span class="sxs-lookup"><span data-stu-id="5d308-255">A values list is allowed for these field types toosimplify hello separation of facet results into contiguous ranges (either ranges based on numeric values or time periods).</span></span> 

<span data-ttu-id="5d308-256">**Par défaut, vous ne pouvez avoir qu’un seul niveau de navigation par facettes**</span><span class="sxs-lookup"><span data-stu-id="5d308-256">**By default you can only have one level of faceted navigation**</span></span> 

<span data-ttu-id="5d308-257">Comme mentionné, il n'existe aucune prise en charge directe de l'imbrication des facettes dans une hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="5d308-257">As noted, there is no direct support for nesting facets in a hierarchy.</span></span> <span data-ttu-id="5d308-258">Par défaut, la navigation à facettes dans Recherche Azure ne prend en charge qu’un seul niveau de filtres.</span><span class="sxs-lookup"><span data-stu-id="5d308-258">By default, faceted navigation in Azure Search only supports one level of filters.</span></span> <span data-ttu-id="5d308-259">Toutefois, des solutions de contournement existent.</span><span class="sxs-lookup"><span data-stu-id="5d308-259">However, workarounds do exist.</span></span> <span data-ttu-id="5d308-260">Vous pouvez encoder une structure hiérarchique de facette dans une `Collection(Edm.String)` avec un point d'entrée par hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="5d308-260">You can encode a hierarchical facet structure in a `Collection(Edm.String)` with one entry point per hierarchy.</span></span> <span data-ttu-id="5d308-261">L’implémentation de cette solution de contournement est abordée dans cet article hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-261">Implementing this workaround is beyond hello scope of this article.</span></span> 

### <a name="querying-tips"></a><span data-ttu-id="5d308-262">Conseils d’interrogation</span><span class="sxs-lookup"><span data-stu-id="5d308-262">Querying tips</span></span>
<span data-ttu-id="5d308-263">**Validation des champs**</span><span class="sxs-lookup"><span data-stu-id="5d308-263">**Validate fields**</span></span>

<span data-ttu-id="5d308-264">Si vous générez la liste de hello de facettes dynamiquement en fonction de l’entrée d’utilisateur non fiable, valider que hello des noms de champs à facettes de hello sont valides.</span><span class="sxs-lookup"><span data-stu-id="5d308-264">If you build hello list of facets dynamically based on untrusted user input, validate that hello names of hello faceted fields are valid.</span></span> <span data-ttu-id="5d308-265">Ou, échapper les noms hello lors de la génération d’URL à l’aide `Uri.EscapeDataString()` dans .NET ou hello équivalent dans votre plateforme de choix.</span><span class="sxs-lookup"><span data-stu-id="5d308-265">Or, escape hello names when building URLs by using either `Uri.EscapeDataString()` in .NET, or hello equivalent in your platform of choice.</span></span>

### <a name="filtering-tips"></a><span data-ttu-id="5d308-266">Conseils de filtrage</span><span class="sxs-lookup"><span data-stu-id="5d308-266">Filtering tips</span></span>
<span data-ttu-id="5d308-267">**Augmenter la précision de la recherche avec des filtres**</span><span class="sxs-lookup"><span data-stu-id="5d308-267">**Increase search precision with filters**</span></span>

<span data-ttu-id="5d308-268">Utilisation de filtres.</span><span class="sxs-lookup"><span data-stu-id="5d308-268">Use filters.</span></span> <span data-ttu-id="5d308-269">Si vous comptez sur simplement des expressions de recherche uniquement, la recherche de radical peut entraîner un toobe document retourné qui n’a pas valeur de la facette précis hello dans un de ses champs.</span><span class="sxs-lookup"><span data-stu-id="5d308-269">If you rely on just search expressions alone, stemming could cause a document toobe returned that doesn’t have hello precise facet value in any of its fields.</span></span>

<span data-ttu-id="5d308-270">**Augmenter les performances de recherche avec des filtres**</span><span class="sxs-lookup"><span data-stu-id="5d308-270">**Increase search performance with filters**</span></span>

<span data-ttu-id="5d308-271">Les filtres cerner ensemble hello de documents candidats pour la recherche et les exclure de classement.</span><span class="sxs-lookup"><span data-stu-id="5d308-271">Filters narrow down hello set of candidate documents for search and exclude them from ranking.</span></span> <span data-ttu-id="5d308-272">Pour les grands jeux de documents, l’utilisation d’une exploration à facettes sélective offre souvent de meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="5d308-272">If you have a large set of documents, using a selective facet drill-down often gives you better performance.</span></span>
  
<span data-ttu-id="5d308-273">**Filtrer uniquement les champs à facettes hello**</span><span class="sxs-lookup"><span data-stu-id="5d308-273">**Filter only hello faceted fields**</span></span>

<span data-ttu-id="5d308-274">Dans l’exploration à facettes, il est souhaitable de tooonly incluent des documents dont la valeur de la facette hello dans un champ spécifique (facettes), pas n’importe où pour tous les champs de recherche.</span><span class="sxs-lookup"><span data-stu-id="5d308-274">In faceted drill-down, you typically want tooonly include documents that have hello facet value in a specific (faceted) field, not anywhere across all searchable fields.</span></span> <span data-ttu-id="5d308-275">Ajout d’un filtre de renforce la champ cible de hello en dirigeant toosearch de service hello uniquement dans le champ à facettes de hello pour une valeur correspondante.</span><span class="sxs-lookup"><span data-stu-id="5d308-275">Adding a filter reinforces hello target field by directing hello service toosearch only in hello faceted field for a matching value.</span></span>

<span data-ttu-id="5d308-276">**Tronquer les résultats de facettes avec d’autres filtres**</span><span class="sxs-lookup"><span data-stu-id="5d308-276">**Trim facet results with more filters**</span></span>

<span data-ttu-id="5d308-277">Résultats de facette sont des documents trouvés dans les résultats de recherche hello qui correspondent à un terme de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-277">Facet results are documents found in hello search results that match a facet term.</span></span> <span data-ttu-id="5d308-278">Bonjour, exemple, dans les résultats de recherche pour *du cloud computing*, 254 éléments ont également *spécification interne* comme un type de contenu.</span><span class="sxs-lookup"><span data-stu-id="5d308-278">In hello following example, in search results for *cloud computing*, 254 items also have *internal specification* as a content type.</span></span> <span data-ttu-id="5d308-279">Les éléments ne sont pas nécessairement mutuellement exclusifs.</span><span class="sxs-lookup"><span data-stu-id="5d308-279">Items are not necessarily mutually exclusive.</span></span> <span data-ttu-id="5d308-280">Si un élément répond aux critères hello de deux filtres, il est compté dans chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="5d308-280">If an item meets hello criteria of both filters, it is counted in each one.</span></span> <span data-ttu-id="5d308-281">Cette duplication est possible lorsque des facettes sur `Collection(Edm.String)` le balisage de document tooimplement les champs, qui sont souvent utilisés.</span><span class="sxs-lookup"><span data-stu-id="5d308-281">This duplication is possible when faceting on `Collection(Edm.String)` fields, which are often used tooimplement document tagging.</span></span>

        Search term: "cloud computing"
        Content type
           Internal specification (254)
           Video (10) 

<span data-ttu-id="5d308-282">En règle générale, si vous trouvez que les résultats de facette constamment trop volumineux, nous vous recommandons que vous ajoutez plus filtre toogive utilisateurs davantage d’options pour affiner la recherche de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-282">In general, if you find that facet results are consistently too large, we recommend that you add more filters toogive users more options for narrowing hello search.</span></span>

### <a name="tips-about-result-count"></a><span data-ttu-id="5d308-283">Conseils sur le décompte des résultats</span><span class="sxs-lookup"><span data-stu-id="5d308-283">Tips about result count</span></span>

<span data-ttu-id="5d308-284">**Limiter le nombre d’éléments de navigation de facette hello hello**</span><span class="sxs-lookup"><span data-stu-id="5d308-284">**Limit hello number of items in hello facet navigation**</span></span>

<span data-ttu-id="5d308-285">Pour chaque champ à facettes dans l’arborescence de navigation hello, il existe une limite par défaut de 10 valeurs.</span><span class="sxs-lookup"><span data-stu-id="5d308-285">For each faceted field in hello navigation tree, there is a default limit of 10 values.</span></span> <span data-ttu-id="5d308-286">Cette valeur par défaut appropriée pour les structures de navigation, car il conserve les valeurs hello taille gérable de tooa la liste.</span><span class="sxs-lookup"><span data-stu-id="5d308-286">This default makes sense for navigation structures because it keeps hello values list tooa manageable size.</span></span> <span data-ttu-id="5d308-287">Vous pouvez remplacer la valeur par défaut hello en assignant une valeur toocount.</span><span class="sxs-lookup"><span data-stu-id="5d308-287">You can override hello default by assigning a value toocount.</span></span>

* <span data-ttu-id="5d308-288">`&facet=city,count:5`Spécifie que seules hello cinq premières villes trouvés dans le haut hello classé les résultats sont retournés sous la forme d’un résultat de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-288">`&facet=city,count:5` specifies that only hello first five cities found in hello top ranked results are returned as a facet result.</span></span> <span data-ttu-id="5d308-289">Imaginez un exemple de requête affichant le terme de recherche « aéroport » et 32 correspondances.</span><span class="sxs-lookup"><span data-stu-id="5d308-289">Consider a sample query with a search term of “airport” and 32 matches.</span></span> <span data-ttu-id="5d308-290">Si la requête de hello spécifie `&facet=city,count:5`, seuls hello cinq premières unique villes avec hello la plupart des documents dans les résultats de recherche de hello sont inclus dans hello résultats de facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-290">If hello query specifies `&facet=city,count:5`, only hello first five unique cities with hello most documents in hello search results are included in hello facet results.</span></span>

<span data-ttu-id="5d308-291">Avis hello distinguer les résultats de recherche et les résultats de facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-291">Notice hello distinction between facet results and search results.</span></span> <span data-ttu-id="5d308-292">Résultats de la recherche sont tous les documents hello qui correspondent à la requête de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-292">Search results are all hello documents that match hello query.</span></span> <span data-ttu-id="5d308-293">Résultats de facette sont hello de correspondances pour chaque valeur de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-293">Facet results are hello matches for each facet value.</span></span> <span data-ttu-id="5d308-294">Dans l’exemple de hello, les résultats de recherche comprennent les noms de ville qui ne sont pas dans la liste de classification de facette hello (5 dans notre exemple).</span><span class="sxs-lookup"><span data-stu-id="5d308-294">In hello example, search results include City names that are not in hello facet classification list (5 in our example).</span></span> <span data-ttu-id="5d308-295">Les résultats filtrés par le biais de la navigation à facettes deviennent visibles lorsque vous effacez les facettes ou choisissez d’autres facettes en plus de Ville.</span><span class="sxs-lookup"><span data-stu-id="5d308-295">Results that are filtered out through faceted navigation become visible when you clear facets, or choose other facets besides City.</span></span> 

> [!NOTE]
> <span data-ttu-id="5d308-296">Traiter de `count` lorsqu'il existe plus d'un type peut prêter à confusion.</span><span class="sxs-lookup"><span data-stu-id="5d308-296">Discussing `count` when there is more than one type can be confusing.</span></span> <span data-ttu-id="5d308-297">Hello tableau suivant offre un bref résumé de l’utilisation du terme de hello dans l’API Azure Search, exemple de code et la documentation.</span><span class="sxs-lookup"><span data-stu-id="5d308-297">hello following table offers a brief summary of how hello term is used in Azure Search API, sample code, and documentation.</span></span> 

* `@colorFacet.count`<br/>
  <span data-ttu-id="5d308-298">Dans le code de présentation, vous devez voir un paramètre du nombre sur facette hello, nombre de hello toodisplay utilisé des résultats de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-298">In presentation code, you should see a count parameter on hello facet, used toodisplay hello number of facet results.</span></span> <span data-ttu-id="5d308-299">Dans les résultats de facette, nombre indique le nombre de hello de documents qui correspondent au terme de facette hello ou plage.</span><span class="sxs-lookup"><span data-stu-id="5d308-299">In facet results, count indicates hello number of documents that match on hello facet term or range.</span></span>
* `&facet=City,count:12`<br/>
  <span data-ttu-id="5d308-300">Dans une requête de facette, vous pouvez définir la valeur du nombre de tooa.</span><span class="sxs-lookup"><span data-stu-id="5d308-300">In a facet query, you can set count tooa value.</span></span>  <span data-ttu-id="5d308-301">par défaut de Hello est 10, mais vous pouvez la définir supérieure ou inférieure.</span><span class="sxs-lookup"><span data-stu-id="5d308-301">hello default is 10, but you can set it higher or lower.</span></span> <span data-ttu-id="5d308-302">Paramètre `count:12` obtient hello premières 12 correspondances dans les résultats de facette par nombre de documents.</span><span class="sxs-lookup"><span data-stu-id="5d308-302">Setting `count:12` gets hello top 12 matches in facet results by document count.</span></span>
* <span data-ttu-id="5d308-303">"`@odata.count`"</span><span class="sxs-lookup"><span data-stu-id="5d308-303">"`@odata.count`"</span></span><br/>
  <span data-ttu-id="5d308-304">En réponse aux requêtes hello, cette valeur indique le nombre hello des éléments correspondants dans les résultats de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-304">In hello query response, this value indicates hello number of matching items in hello search results.</span></span> <span data-ttu-id="5d308-305">En moyenne, il est plus importante que somme hello de tous les résultats de facette combinées, en raison de la présence de toohello d’éléments qui correspondent au terme de recherche hello, mais aucune correspondance de valeur de facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-305">On average, it’s larger than hello sum of all facet results combined, due toohello presence of items that match hello search term, but have no facet value matches.</span></span>

<span data-ttu-id="5d308-306">**Obtenir les décomptes dans les résultats de facettes**</span><span class="sxs-lookup"><span data-stu-id="5d308-306">**Get counts in facet results**</span></span>

<span data-ttu-id="5d308-307">Lorsque vous ajoutez une requête à facettes tooa de filtre, vous pourriez l’instruction de facette hello tooretain (par exemple, `facet=Rating&$filter=Rating ge 4`).</span><span class="sxs-lookup"><span data-stu-id="5d308-307">When you add a filter tooa faceted query, you might want tooretain hello facet statement (for example, `facet=Rating&$filter=Rating ge 4`).</span></span> <span data-ttu-id="5d308-308">Techniquement, facette = évaluation n’est pas nécessaire, mais conserver retourne des nombres hello de valeurs de facettes pour le contrôle d’accès 4 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="5d308-308">Technically, facet=Rating isn’t needed, but keeping it returns hello counts of facet values for ratings 4 and higher.</span></span> <span data-ttu-id="5d308-309">Par exemple, si vous cliquez sur « 4 » et hello requête inclut un filtre pour supérieure ou égale trop « 4 », les nombres sont retournés pour chaque évaluation est 4 et versions ultérieures.</span><span class="sxs-lookup"><span data-stu-id="5d308-309">For example, if you click "4" and hello query includes a filter for greater or equal too"4", counts are returned for each rating that is 4 and higher.</span></span>  

<span data-ttu-id="5d308-310">**Vérifier que les nombres de facettes sont exacts**</span><span class="sxs-lookup"><span data-stu-id="5d308-310">**Make sure you get accurate facet counts**</span></span>

<span data-ttu-id="5d308-311">Dans certaines circonstances, vous constaterez peut-être que des nombres de facettes ne correspondent pas les jeux de résultats hello (consultez [une navigation par facettes dans Azure Search (billet de forum)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span><span class="sxs-lookup"><span data-stu-id="5d308-311">Under certain circumstances, you might find that facet counts do not match hello result sets (see [Faceted navigation in Azure Search (forum post)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span></span>

<span data-ttu-id="5d308-312">Le nombre de facette peut être incorrect en raison de l’architecture de partitionnement toohello.</span><span class="sxs-lookup"><span data-stu-id="5d308-312">Facet counts can be inaccurate due toohello sharding architecture.</span></span> <span data-ttu-id="5d308-313">Chaque index de recherche a plusieurs partitions, et chaque partition signale les facettes de N premiers hello en nombre de documents, qui est ensuite combiné en un seul résultat.</span><span class="sxs-lookup"><span data-stu-id="5d308-313">Every search index has multiple shards, and each shard reports hello top N facets by document count, which is then combined into a single result.</span></span> <span data-ttu-id="5d308-314">Si certaines partitions ont de nombreuses valeurs correspondantes, tandis que d’autres moins, vous découvrirez peut-être que certaines valeurs de facettes sont manquants ou sous-comptabilisées dans les résultats de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-314">If some shards have many matching values, while others have fewer, you may find that some facet values are missing or under-counted in hello results.</span></span>

<span data-ttu-id="5d308-315">Bien que ce comportement peut changer à tout moment, si vous rencontrez ce problème aujourd'hui, vous pouvez contourner il en artificiellement gonfler nombre de hello :<number> tooa grand nombre tooenforce complète de création de rapports à partir de chaque partition.</span><span class="sxs-lookup"><span data-stu-id="5d308-315">Although this behavior could change at any time, if you encounter this behavior today, you can work around it by artificially inflating hello count:<number> tooa large number tooenforce full reporting from each shard.</span></span> <span data-ttu-id="5d308-316">Si hello la valeur du nombre : est supérieure ou égale toohello nombre de valeurs uniques dans le champ de hello, vous avez la garantie des résultats précis.</span><span class="sxs-lookup"><span data-stu-id="5d308-316">If hello value of count: is greater than or equal toohello number of unique values in hello field, you are guaranteed accurate results.</span></span> <span data-ttu-id="5d308-317">Toutefois, lorsque les décomptes de documents sont élevés, les performances baissent, alors utilisez cette option judicieusement.</span><span class="sxs-lookup"><span data-stu-id="5d308-317">However, when document counts are high, there is a performance penalty, so use this option judiciously.</span></span>

### <a name="user-interface-tips"></a><span data-ttu-id="5d308-318">Conseils sur l’interface utilisateur</span><span class="sxs-lookup"><span data-stu-id="5d308-318">User interface tips</span></span>
<span data-ttu-id="5d308-319">**Ajouter des étiquettes pour chaque champ dans la navigation à facettes**</span><span class="sxs-lookup"><span data-stu-id="5d308-319">**Add labels for each field in facet navigation**</span></span>

<span data-ttu-id="5d308-320">Les étiquettes sont généralement définies dans hello HTML ou un formulaire (`index.cshtml` dans l’exemple d’application hello).</span><span class="sxs-lookup"><span data-stu-id="5d308-320">Labels are typically defined in hello HTML or form (`index.cshtml` in hello sample application).</span></span> <span data-ttu-id="5d308-321">Il n’existe aucune API dans Recherche Azure pour les étiquettes de navigation à facettes ou tout autre type de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="5d308-321">There is no API in Azure Search for facet navigation labels or any other metadata.</span></span>

<a name="rangefacets"></a>

## <a name="filter-based-on-a-range"></a><span data-ttu-id="5d308-322">Filtrer sur une plage de valeurs</span><span class="sxs-lookup"><span data-stu-id="5d308-322">Filter based on a range</span></span>
<span data-ttu-id="5d308-323">L’utilisation de facettes sur des plages de valeurs est une condition d’application de recherche courante.</span><span class="sxs-lookup"><span data-stu-id="5d308-323">Faceting over ranges of values is a common search application requirement.</span></span> <span data-ttu-id="5d308-324">Les plages sont prises en charge pour les données numériques et les valeurs DateHeure.</span><span class="sxs-lookup"><span data-stu-id="5d308-324">Ranges are supported for numeric data and DateTime values.</span></span> <span data-ttu-id="5d308-325">Vous pouvez en savoir plus sur chaque approche dans [Rechercher des documents (API Azure Search)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d308-325">You can read more about each approach in [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span></span>

<span data-ttu-id="5d308-326">Azure Search simplifie la création de plage en fournissant deux approches pour calculer une plage.</span><span class="sxs-lookup"><span data-stu-id="5d308-326">Azure Search simplifies range construction by providing two approaches for computing a range.</span></span> <span data-ttu-id="5d308-327">Pour les deux approches, Azure Search crée hello donnés d’entrées hello que vous avez fourni les plages appropriées.</span><span class="sxs-lookup"><span data-stu-id="5d308-327">For both approaches, Azure Search creates hello appropriate ranges given hello inputs you’ve provided.</span></span> <span data-ttu-id="5d308-328">Par exemple, si vous spécifiez des valeurs de plage de 10|20|30, Recherche Azure crée automatiquement les plages 0-10, 10-20, 20-30.</span><span class="sxs-lookup"><span data-stu-id="5d308-328">For instance, if you specify range values of 10|20|30, it automatically creates ranges of 0-10, 10-20, 20-30.</span></span> <span data-ttu-id="5d308-329">Votre application peut éventuellement supprimer les intervalles vides.</span><span class="sxs-lookup"><span data-stu-id="5d308-329">Your application can optionally remove any intervals that are empty.</span></span> 

<span data-ttu-id="5d308-330">**Méthode 1 : Utiliser le paramètre d’intervalle hello**</span><span class="sxs-lookup"><span data-stu-id="5d308-330">**Approach 1: Use hello interval parameter**</span></span>  
<span data-ttu-id="5d308-331">facettes de prix tooset par incréments de 10 $, vous devez spécifier :`&facet=price,interval:10`</span><span class="sxs-lookup"><span data-stu-id="5d308-331">tooset price facets in $10 increments, you would specify: `&facet=price,interval:10`</span></span>

<span data-ttu-id="5d308-332">**Approche 2 : utiliser une liste de valeurs**</span><span class="sxs-lookup"><span data-stu-id="5d308-332">**Approach 2: Use a values list**</span></span>  
<span data-ttu-id="5d308-333">Pour les données numériques, vous pouvez utiliser une liste de valeurs.</span><span class="sxs-lookup"><span data-stu-id="5d308-333">For numeric data, you can use a values list.</span></span>  <span data-ttu-id="5d308-334">Envisagez de plage de facette hello pour un `listPrice` champ, restituée comme suit :</span><span class="sxs-lookup"><span data-stu-id="5d308-334">Consider hello facet range for a `listPrice` field, rendered as follows:</span></span>

  ![Exemple de liste de valeurs][5]

<span data-ttu-id="5d308-336">toospecify une plage de facette comme hello dans hello précédant la capture d’écran, utilisez une liste de valeurs :</span><span class="sxs-lookup"><span data-stu-id="5d308-336">toospecify a facet range like hello one in hello preceding screen shot, use a values list:</span></span>

    facet=listPrice,values:10|25|100|500|1000|2500

<span data-ttu-id="5d308-337">Chaque plage est construit à l’aide de 0 comme point de départ, une valeur de liste de hello comme un point de terminaison, puis de hello précédente toocreate discrète intervalles de plage.</span><span class="sxs-lookup"><span data-stu-id="5d308-337">Each range is built using 0 as a starting point, a value from hello list as an endpoint, and then trimmed of hello previous range toocreate discrete intervals.</span></span> <span data-ttu-id="5d308-338">Recherche Azure effectue cette opération dans le cadre de la navigation à facettes.</span><span class="sxs-lookup"><span data-stu-id="5d308-338">Azure Search does these things as part of faceted navigation.</span></span> <span data-ttu-id="5d308-339">Vous n’avez pas de code toowrite de structuration de chaque intervalle.</span><span class="sxs-lookup"><span data-stu-id="5d308-339">You do not have toowrite code for structuring each interval.</span></span>

### <a name="build-a-filter-for-a-range"></a><span data-ttu-id="5d308-340">Créer un filtre pour une plage</span><span class="sxs-lookup"><span data-stu-id="5d308-340">Build a filter for a range</span></span>
<span data-ttu-id="5d308-341">documents toofilter basés sur une plage que vous sélectionnez, vous pouvez utiliser hello `"ge"` et `"lt"` opérateurs dans une expression en deux parties qui définit les points de terminaison hello de plage de hello de filtre.</span><span class="sxs-lookup"><span data-stu-id="5d308-341">toofilter documents based on a range you select, you can use hello `"ge"` and `"lt"` filter operators in a two-part expression that defines hello endpoints of hello range.</span></span> <span data-ttu-id="5d308-342">Par exemple, si vous choisissez hello plage 10 à 25 pour un `listPrice` champ, filtre de hello serait `$filter=listPrice ge 10 and listPrice lt 25`.</span><span class="sxs-lookup"><span data-stu-id="5d308-342">For example, if you choose hello range 10-25 for a `listPrice` field, hello filter would be `$filter=listPrice ge 10 and listPrice lt 25`.</span></span> <span data-ttu-id="5d308-343">Dans l’exemple de code hello, expression de filtre hello utilise **prix** et **priceTo** points de terminaison de paramètres tooset hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-343">In hello sample code, hello filter expression uses **priceFrom** and **priceTo** parameters tooset hello endpoints.</span></span> 

  ![Requête pour une plage de valeurs][6]

<a name="geofacets"></a> 

## <a name="filter-based-on-distance"></a><span data-ttu-id="5d308-345">Filtrer en fonction de la distance</span><span class="sxs-lookup"><span data-stu-id="5d308-345">Filter based on distance</span></span>
<span data-ttu-id="5d308-346">Toosee commune ses filtres qui vous aident à choisir une banque, restaurant ou en fonction de son emplacement actuel de proximité tooyour de destination.</span><span class="sxs-lookup"><span data-stu-id="5d308-346">It’s common toosee filters that help you choose a store, restaurant, or destination based on its proximity tooyour current location.</span></span> <span data-ttu-id="5d308-347">Ce type de filtre peut ressembler à la navigation à facettes, mais c’est tout simplement un filtre.</span><span class="sxs-lookup"><span data-stu-id="5d308-347">While this type of filter might look like faceted navigation, it’s just a filter.</span></span> <span data-ttu-id="5d308-348">Nous le mentionnons ici pour ceux d'entre vous qui recherchent spécifiquement des conseils d'implémentation pour ce problème de conception particulier.</span><span class="sxs-lookup"><span data-stu-id="5d308-348">We mention it here for those of you who are specifically looking for implementation advice for that particular design problem.</span></span>

<span data-ttu-id="5d308-349">Il existe deux fonctions géospatiales dans la Recherche Azure, **geo.distance** et **geo.intersects**.</span><span class="sxs-lookup"><span data-stu-id="5d308-349">There are two Geospatial functions in Azure Search, **geo.distance** and **geo.intersects**.</span></span>

* <span data-ttu-id="5d308-350">Hello **geo.distance** fonction retourne la distance hello kilométrique entre deux points.</span><span class="sxs-lookup"><span data-stu-id="5d308-350">hello **geo.distance** function returns hello distance in kilometers between two points.</span></span> <span data-ttu-id="5d308-351">Un point est un champ et autre constante transmise en tant que partie du filtre de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-351">One point is a field and other is a constant passed as part of hello filter.</span></span> 
* <span data-ttu-id="5d308-352">Hello **geo.intersects** fonction retourne true si un point donné figure dans un polygone donné.</span><span class="sxs-lookup"><span data-stu-id="5d308-352">hello **geo.intersects** function returns true if a given point is within a given polygon.</span></span> <span data-ttu-id="5d308-353">Hello point est un champ et les polygones hello sont spécifié comme une liste de constante de coordonnées passées en tant que partie du filtre de hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-353">hello point is a field and hello polygon is specified as a constant list of coordinates passed as part of hello filter.</span></span>

<span data-ttu-id="5d308-354">Vous trouverez des exemples de filtres dans [Syntaxe d'expression OData (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span><span class="sxs-lookup"><span data-stu-id="5d308-354">You can find filter examples in [OData expression syntax (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span></span>

<a name="tryitout"></a>

## <a name="try-hello-demo"></a><span data-ttu-id="5d308-355">Essayez hello démonstration</span><span class="sxs-lookup"><span data-stu-id="5d308-355">Try hello demo</span></span>
<span data-ttu-id="5d308-356">Hello démonstration d’Azure Search travail portail contient des exemples de hello référencées dans cet article.</span><span class="sxs-lookup"><span data-stu-id="5d308-356">hello Azure Search Job Portal Demo contains hello examples referenced in this article.</span></span>

-   <span data-ttu-id="5d308-357">Consultez et tester la démonstration travail hello en ligne à [démonstration d’Azure Search travail Portal](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="5d308-357">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="5d308-358">Télécharger le code de hello de hello [dépôt d’exemples de Azure sur GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="5d308-358">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

<span data-ttu-id="5d308-359">Lorsque vous travaillez avec les résultats de la recherche, regardez les URL hello les modifications apportées à la construction de la requête.</span><span class="sxs-lookup"><span data-stu-id="5d308-359">As you work with search results, watch hello URL for changes in query construction.</span></span> <span data-ttu-id="5d308-360">Cette application produit tooappend facettes toohello URI que vous sélectionnez chacune d’elles.</span><span class="sxs-lookup"><span data-stu-id="5d308-360">This application happens tooappend facets toohello URI as you select each one.</span></span>

1. <span data-ttu-id="5d308-361">fonctionnalité de cartographie hello toouse de l’application de démonstration hello, obtenir une clé Bing Maps hello [centre de développement de Bing Maps](https://www.bingmapsportal.com/).</span><span class="sxs-lookup"><span data-stu-id="5d308-361">toouse hello mapping functionality of hello demo app, get a Bing Maps key from hello [Bing Maps Dev Center](https://www.bingmapsportal.com/).</span></span> <span data-ttu-id="5d308-362">Collez-la sur la clé existante de hello Bonjour `index.cshtml` page.</span><span class="sxs-lookup"><span data-stu-id="5d308-362">Paste it over hello existing key in hello `index.cshtml` page.</span></span> <span data-ttu-id="5d308-363">Hello `BingApiKey` paramètre Bonjour `Web.config` fichier n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="5d308-363">hello `BingApiKey` setting in hello `Web.config` file is not used.</span></span> 

2. <span data-ttu-id="5d308-364">Exécutez l’application hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-364">Run hello application.</span></span> <span data-ttu-id="5d308-365">Visite guidée hello facultatif ou fermer la boîte de dialogue hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-365">Take hello optional tour, or dismiss hello dialog box.</span></span>
   
3. <span data-ttu-id="5d308-366">Entrez un terme de recherche, tels que « analyste », puis cliquez sur recherche hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-366">Enter a search term, such as "analyst", and click hello Search icon.</span></span> <span data-ttu-id="5d308-367">requête de Hello s’exécute rapidement.</span><span class="sxs-lookup"><span data-stu-id="5d308-367">hello query executes quickly.</span></span>
   
   <span data-ttu-id="5d308-368">Une structure de navigation par facettes est également retournée avec les résultats de recherche hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-368">A faceted navigation structure is also returned with hello search results.</span></span> <span data-ttu-id="5d308-369">Dans la page de résultats de recherche de hello, structure de navigation par facettes hello inclut les nombres pour chaque résultat de la facette.</span><span class="sxs-lookup"><span data-stu-id="5d308-369">In hello search result page, hello faceted navigation structure includes counts for each facet result.</span></span> <span data-ttu-id="5d308-370">Aucune facette n’est sélectionnée : tous les résultats correspondants sont donc renvoyés.</span><span class="sxs-lookup"><span data-stu-id="5d308-370">No facets are selected, so all matching results are returned.</span></span>
   
   ![Résultats de recherche avant la sélection des facettes][11]

4. <span data-ttu-id="5d308-372">Cliquez sur une Fonction, un Lieu ou un Salaire minimal.</span><span class="sxs-lookup"><span data-stu-id="5d308-372">Click a Business Title, Location, or Minimum Salary.</span></span> <span data-ttu-id="5d308-373">Facettes étaient null sur la recherche initiale de hello, mais qu’ils prennent des valeurs, les résultats de recherche de hello sont supprimés des éléments qui ne correspondent plus.</span><span class="sxs-lookup"><span data-stu-id="5d308-373">Facets were null on hello initial search, but as they take on values, hello search results are trimmed of items that no longer match.</span></span>
   
   ![Résultats de recherche après la sélection des facettes][12]

5. <span data-ttu-id="5d308-375">requête à facettes de hello tooclear afin que vous pouvez essayer de comportements de requête différents, cliquez sur hello `[X]` après hello sélectionné facettes de facettes tooclear hello.</span><span class="sxs-lookup"><span data-stu-id="5d308-375">tooclear hello faceted query so that you can try different query behaviors, click hello `[X]` after hello selected facets tooclear hello facets.</span></span>
   
<a name="nextstep"></a>

## <a name="learn-more"></a><span data-ttu-id="5d308-376">En savoir plus</span><span class="sxs-lookup"><span data-stu-id="5d308-376">Learn more</span></span>
<span data-ttu-id="5d308-377">Regardez la [Présentation approfondie de la Recherche Azure](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span><span class="sxs-lookup"><span data-stu-id="5d308-377">Watch [Azure Search Deep Dive](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span></span> <span data-ttu-id="5d308-378">En 45:25, vous trouverez une démonstration sur la façon de facettes de tooimplement.</span><span class="sxs-lookup"><span data-stu-id="5d308-378">At 45:25, there is a demo on how tooimplement facets.</span></span>

<span data-ttu-id="5d308-379">Pour plus d’informations sur les principes de conception pour la navigation par facettes, nous vous recommandons de hello suivant liens :</span><span class="sxs-lookup"><span data-stu-id="5d308-379">For more insights on design principles for faceted navigation, we recommend hello following links:</span></span>

* [<span data-ttu-id="5d308-380">Conception pour la recherche à facettes</span><span class="sxs-lookup"><span data-stu-id="5d308-380">Designing for Faceted Search</span></span>](http://www.uie.com/articles/faceted_search/)
* [<span data-ttu-id="5d308-381">Modèles de conception : navigation à facettes</span><span class="sxs-lookup"><span data-stu-id="5d308-381">Design Patterns: Faceted Navigation</span></span>](http://alistapart.com/article/design-patterns-faceted-navigation)


<!--Anchors-->
[How toobuild it]: #howtobuildit
[Build hello presentation layer]: #presentationlayer
[Build hello index]: #buildindex
[Check for data quality]: #checkdata
[Build hello query]: #buildquery
[Tips on how toocontrol faceted navigation]: #tips
[Faceted navigation based on range values]: #rangefacets
[Faceted navigation based on GeoPoints]: #geofacets
[Try it out]: #tryitout

<!--Image references-->
[1]: ./media/search-faceted-navigation/azure-search-faceting-example.PNG
[2]: ./media/search-faceted-navigation/Facet-2-CSHTML.PNG
[3]: ./media/search-faceted-navigation/Facet-3-schema.PNG
[4]: ./media/search-faceted-navigation/Facet-4-SearchMethod.PNG
[5]: ./media/search-faceted-navigation/Facet-5-Prices.PNG
[6]: ./media/search-faceted-navigation/Facet-6-buildfilter.PNG
[7]: ./media/search-faceted-navigation/Facet-7-appstart.png
[8]: ./media/search-faceted-navigation/Facet-8-appbike.png
[9]: ./media/search-faceted-navigation/Facet-9-appbikefaceted.png
[10]: ./media/search-faceted-navigation/Facet-10-appTitle.png
[11]: ./media/search-faceted-navigation/faceted-search-before-facets.png
[12]: ./media/search-faceted-navigation/faceted-search-after-facets.png

<!--Link references-->
[Designing for Faceted Search]: http://www.uie.com/articles/faceted_search/
[Design Patterns: Faceted Navigation]: http://alistapart.com/article/design-patterns-faceted-navigation
[Create your first application]: search-create-first-solution.md
[OData expression syntax (Azure Search)]: http://msdn.microsoft.com/library/azure/dn798921.aspx
[Azure Search Adventure Works Demo]: https://azuresearchadventureworksdemo.codeplex.com/
[http://www.odata.org/documentation/odata-version-2-0/overview/]: http://www.odata.org/documentation/odata-version-2-0/overview/ 
[Faceting on Azure Search forum post]: ../faceting-on-azure-search.md?forum=azuresearch
[Search Documents (Azure Search API)]: http://msdn.microsoft.com/library/azure/dn798927.aspx

