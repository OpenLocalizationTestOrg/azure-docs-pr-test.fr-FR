---
title: "Azure Active Directory Domain Services : Activer la délégation Kerberos contrainte | Microsoft Docs"
description: "Activer la délégation Kerberos contrainte sur les domaines gérés par les services de domaine Azure Active Directory"
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: d32547c8018dd1f99c992e95a01d2711d460a261
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="82f3e-103">Configurer la délégation Kerberos contrainte (KCD) sur un domaine géré</span><span class="sxs-lookup"><span data-stu-id="82f3e-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="82f3e-104">De nombreuses applications doivent tooaccess des ressources dans le contexte de hello d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="82f3e-104">Many applications need tooaccess resources in hello context of hello user.</span></span> <span data-ttu-id="82f3e-105">Active Directory prend en charge un mécanisme, appelé délégation Kerberos, qui rend possible ce cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="82f3e-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="82f3e-106">En outre, vous pouvez limiter la délégation contrainte afin que des ressources spécifiques sont accessibles dans le contexte de hello d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="82f3e-106">Further, you can restrict delegation so that only specific resources can be accessed in hello context of hello user.</span></span> <span data-ttu-id="82f3e-107">Les domaines gérés des services de domaine Azure AD diffèrent des domaines Active Directory traditionnels dans la mesure où ils sont verrouillés de façon mieux sécurisée.</span><span class="sxs-lookup"><span data-stu-id="82f3e-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="82f3e-108">Cet article vous explique comment tooconfigure kerberos délégation contrainte sur un domaine géré des Services de domaine Active Directory de Azure.</span><span class="sxs-lookup"><span data-stu-id="82f3e-108">This article shows you how tooconfigure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="82f3e-109">Délégation Kerberos contrainte (KCD)</span><span class="sxs-lookup"><span data-stu-id="82f3e-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="82f3e-110">Délégation Kerberos permet un tooimpersonate compte un autre ressources tooaccess principal (par exemple, un utilisateur) de sécurité.</span><span class="sxs-lookup"><span data-stu-id="82f3e-110">Kerberos delegation enables an account tooimpersonate another security principal (such as a user) tooaccess resources.</span></span> <span data-ttu-id="82f3e-111">Imaginez une application web qui accède à une API de web principal dans le contexte de hello d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="82f3e-111">Consider a web application that accesses a back-end web API in hello context of a user.</span></span> <span data-ttu-id="82f3e-112">Dans cet exemple, hello application web (en cours d’exécution dans le contexte de hello d’un compte de service ou d’un compte d’ordinateur) emprunte l’identité hello utilisateur lors de l’accès des ressources de hello (API web principale).</span><span class="sxs-lookup"><span data-stu-id="82f3e-112">In this example, hello web application (running in hello context of a service account or a computer/machine account) impersonates hello user when accessing hello resource (back-end web API).</span></span> <span data-ttu-id="82f3e-113">Délégation contrainte Kerberos n’est pas sécurisée, car elle ne restreint pas hello hello ressources empruntant l’identité du compte peut accéder dans le contexte de hello d’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="82f3e-113">Kerberos delegation is insecure since it does not restrict hello resources hello impersonating account can access in hello context of hello user.</span></span>

<span data-ttu-id="82f3e-114">La délégation contrainte Kerberos (KCD) restreint hello serveur de ressources des services toowhich hello spécifié peut agir sur le compte hello d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="82f3e-114">Kerberos constrained delegation (KCD) restricts hello services/resources toowhich hello specified server can act on hello behalf of a user.</span></span> <span data-ttu-id="82f3e-115">KCD traditionnel requiert tooconfigure de privilèges administrateur de domaine un compte de domaine pour un service et elle restreint le seul domaine hello compte tooa.</span><span class="sxs-lookup"><span data-stu-id="82f3e-115">Traditional KCD requires domain administrator privileges tooconfigure a domain account for a service and it restricts hello account tooa single domain.</span></span>

<span data-ttu-id="82f3e-116">La KCD traditionnelle a également quelques problèmes qui lui sont associés.</span><span class="sxs-lookup"><span data-stu-id="82f3e-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="82f3e-117">Dans les systèmes d’exploitation antérieurs où administrateur de domaine hello configuré le service de hello, administrateur de service hello n’avait aucun tooknow permettent les services frontaux déléguée toohello services de ressources qu’ils.</span><span class="sxs-lookup"><span data-stu-id="82f3e-117">In earlier operating systems where hello domain administrator configured hello service, hello service administrator had no useful way tooknow which front-end services delegated toohello resource services they owned.</span></span> <span data-ttu-id="82f3e-118">Et tout service frontal qui pouvait effectuer une délégation tooa service des ressources représentait un point d’attaque potentiel.</span><span class="sxs-lookup"><span data-stu-id="82f3e-118">And any front-end service that could delegate tooa resource service represented a potential attack point.</span></span> <span data-ttu-id="82f3e-119">Si un serveur hébergeant un service frontal était compromis, et il a été configuré toodelegate tooresource services, services de ressources hello peuvent également être compromis.</span><span class="sxs-lookup"><span data-stu-id="82f3e-119">If a server that hosted a front-end service was compromised, and it was configured toodelegate tooresource services, hello resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="82f3e-120">Sur un domaine managé Azure AD Domain Services, vous n’avez pas les privilèges d’administrateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="82f3e-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="82f3e-121">Par conséquent, **la KCD traditionnelle ne peut pas être configurée sur un domaine géré**.</span><span class="sxs-lookup"><span data-stu-id="82f3e-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="82f3e-122">Utilisez plutôt la KCD basée sur la ressource, comme décrit dans cet article.</span><span class="sxs-lookup"><span data-stu-id="82f3e-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="82f3e-123">Ce mécanisme est également plus sécurisé.</span><span class="sxs-lookup"><span data-stu-id="82f3e-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="82f3e-124">Délégation Kerberos contrainte basée sur les ressources</span><span class="sxs-lookup"><span data-stu-id="82f3e-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="82f3e-125">Dans Windows Server 2012 R2 et Windows Server 2012, hello capacité tooconfigure limité la délégation pour service de hello a été transférée à partir de l’administrateur de service toohello hello domaine administrateur.</span><span class="sxs-lookup"><span data-stu-id="82f3e-125">In Windows Server 2012 R2 and Windows Server 2012, hello ability tooconfigure constrained delegation for hello service has been transferred from hello domain administrator toohello service administrator.</span></span> <span data-ttu-id="82f3e-126">De cette façon, administrateur de service principal hello peut autoriser ou refuser les services frontaux.</span><span class="sxs-lookup"><span data-stu-id="82f3e-126">In this way, hello back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="82f3e-127">Ce modèle est appelé **délégation Kerberos contrainte basée sur la ressource**.</span><span class="sxs-lookup"><span data-stu-id="82f3e-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="82f3e-128">La KCD basée sur la ressource est configurée à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="82f3e-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="82f3e-129">Vous utilisez hello Set-ADComputer ou des applets de commande Set-ADUser, selon que hello empruntant l’identité du compte est un compte d’ordinateur ou un compte de service/compte d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="82f3e-129">You use hello Set-ADComputer or Set-ADUser cmdlets, depending on whether hello impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="82f3e-130">Configuration d’une KCD basée sur la ressource pour un compte d’ordinateur sur un domaine géré</span><span class="sxs-lookup"><span data-stu-id="82f3e-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="82f3e-131">Supposons que vous avez une application web en cours d’exécution sur l’ordinateur de hello ' contoso100-webapp.contoso100.com ».</span><span class="sxs-lookup"><span data-stu-id="82f3e-131">Assume you have a web app running on hello computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="82f3e-132">Il a besoin de ressources de hello tooaccess (une API web en cours d’exécution ' contoso100-api.contoso100.com ») dans le contexte de hello d’utilisateurs du domaine.</span><span class="sxs-lookup"><span data-stu-id="82f3e-132">It needs tooaccess hello resource (a web API running on 'contoso100-api.contoso100.com') in hello context of domain users.</span></span> <span data-ttu-id="82f3e-133">Voici comment configurer une KCD basée sur les ressources pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="82f3e-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="82f3e-134">Configuration d’une KCD basée sur la ressource pour un compte utilisateur sur un domaine géré</span><span class="sxs-lookup"><span data-stu-id="82f3e-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="82f3e-135">Supposons que vous avez une application web en cours d’exécution sous un compte de service « appsvc » et il a besoin de ressources de hello tooaccess (une API web en cours d’exécution sous un compte de service - 'backendsvc') de contexte hello d’utilisateurs du domaine.</span><span class="sxs-lookup"><span data-stu-id="82f3e-135">Assume you have a web app running as a service account 'appsvc' and it needs tooaccess hello resource (a web API running as a service account - 'backendsvc') in hello context of domain users.</span></span> <span data-ttu-id="82f3e-136">Voici comment configurer une KCD basée sur les ressources pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="82f3e-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="82f3e-137">Contenu connexe</span><span class="sxs-lookup"><span data-stu-id="82f3e-137">Related Content</span></span>
* [<span data-ttu-id="82f3e-138">Services de domaine Azure AD : guide de prise en main</span><span class="sxs-lookup"><span data-stu-id="82f3e-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="82f3e-139">Présentation de la délégation Kerberos contrainte</span><span class="sxs-lookup"><span data-stu-id="82f3e-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)
