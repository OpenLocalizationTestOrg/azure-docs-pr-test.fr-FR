---
title: "Azure Active Directory Domain Services : Activer la délégation Kerberos contrainte | Microsoft Docs"
description: "Activer la délégation Kerberos contrainte sur les domaines gérés par les services de domaine Azure Active Directory"
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: f36f16a7bb00ace9fd5164eb38ba77f015f22f5c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="ecea6-103">Configurer la délégation Kerberos contrainte (KCD) sur un domaine géré</span><span class="sxs-lookup"><span data-stu-id="ecea6-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="ecea6-104">De nombreuses applications doivent accéder à des ressources dans le contexte de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ecea6-104">Many applications need to access resources in the context of the user.</span></span> <span data-ttu-id="ecea6-105">Active Directory prend en charge un mécanisme, appelé délégation Kerberos, qui rend possible ce cas d’utilisation.</span><span class="sxs-lookup"><span data-stu-id="ecea6-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="ecea6-106">En outre, vous pouvez limiter la délégation afin que seules des ressources spécifiques soient accessibles dans le contexte de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ecea6-106">Further, you can restrict delegation so that only specific resources can be accessed in the context of the user.</span></span> <span data-ttu-id="ecea6-107">Les domaines gérés des services de domaine Azure AD diffèrent des domaines Active Directory traditionnels dans la mesure où ils sont verrouillés de façon mieux sécurisée.</span><span class="sxs-lookup"><span data-stu-id="ecea6-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="ecea6-108">Cet article vous montre comment configurer la délégation Kerberos contrainte sur un domaine géré de services de domaine Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ecea6-108">This article shows you how to configure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="ecea6-109">Délégation Kerberos contrainte (KCD)</span><span class="sxs-lookup"><span data-stu-id="ecea6-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="ecea6-110">La délégation Kerberos contrainte permet à un compte d’emprunter l’identité d’un autre principal de sécurité (par exemple, un utilisateur) pour accéder aux ressources.</span><span class="sxs-lookup"><span data-stu-id="ecea6-110">Kerberos delegation enables an account to impersonate another security principal (such as a user) to access resources.</span></span> <span data-ttu-id="ecea6-111">Imaginez une application web qui accède à une API web principale dans le contexte d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ecea6-111">Consider a web application that accesses a back-end web API in the context of a user.</span></span> <span data-ttu-id="ecea6-112">Dans cet exemple, l’application web (en cours d’exécution dans le contexte d’un compte de service ou d’un compte d’ordinateur) emprunte l’identité de l’utilisateur pour accéder à la ressource (API web principale).</span><span class="sxs-lookup"><span data-stu-id="ecea6-112">In this example, the web application (running in the context of a service account or a computer/machine account) impersonates the user when accessing the resource (back-end web API).</span></span> <span data-ttu-id="ecea6-113">La délégation Kerberos n’est pas sécurisée, car elle ne limite pas les ressources auxquelles le compte d’emprunt peut accéder dans le contexte de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ecea6-113">Kerberos delegation is insecure since it does not restrict the resources the impersonating account can access in the context of the user.</span></span>

<span data-ttu-id="ecea6-114">La délégation Kerberos contrainte (KCD) restreint les services/ressources sur lesquels le serveur spécifié peut agir pour le compte d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ecea6-114">Kerberos constrained delegation (KCD) restricts the services/resources to which the specified server can act on the behalf of a user.</span></span> <span data-ttu-id="ecea6-115">La KCD traditionnelle requiert des privilèges d’administrateur de domaine pour configurer un compte de domaine pour un service, et elle restreint le compte à un seul domaine.</span><span class="sxs-lookup"><span data-stu-id="ecea6-115">Traditional KCD requires domain administrator privileges to configure a domain account for a service and it restricts the account to a single domain.</span></span>

<span data-ttu-id="ecea6-116">La KCD traditionnelle a également quelques problèmes qui lui sont associés.</span><span class="sxs-lookup"><span data-stu-id="ecea6-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="ecea6-117">Dans les systèmes d’exploitation précédents sur lesquels l’administrateur de domaine a configuré le service, l’administrateur de service ne possédait aucun moyen de connaître les services frontaux qui déléguaient vers des services de ressources qu’ils détenaient.</span><span class="sxs-lookup"><span data-stu-id="ecea6-117">In earlier operating systems where the domain administrator configured the service, the service administrator had no useful way to know which front-end services delegated to the resource services they owned.</span></span> <span data-ttu-id="ecea6-118">Et tout service frontal qui pouvait déléguer à un service de ressources représentait un point d’attaque potentiel.</span><span class="sxs-lookup"><span data-stu-id="ecea6-118">And any front-end service that could delegate to a resource service represented a potential attack point.</span></span> <span data-ttu-id="ecea6-119">Si un serveur hébergeant un service frontal était compromis, et qu’il était configuré pour déléguer aux services de ressources, les services de ressources pouvaient également être compromis.</span><span class="sxs-lookup"><span data-stu-id="ecea6-119">If a server that hosted a front-end service was compromised, and it was configured to delegate to resource services, the resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="ecea6-120">Sur un domaine géré des services de domaine Azure AD, vous n’avez pas les privilèges d’administrateur de domaine.</span><span class="sxs-lookup"><span data-stu-id="ecea6-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="ecea6-121">Par conséquent, **la KCD traditionnelle ne peut pas être configurée sur un domaine géré**.</span><span class="sxs-lookup"><span data-stu-id="ecea6-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="ecea6-122">Utilisez plutôt la KCD basée sur la ressource, comme décrit dans cet article.</span><span class="sxs-lookup"><span data-stu-id="ecea6-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="ecea6-123">Ce mécanisme est également plus sécurisé.</span><span class="sxs-lookup"><span data-stu-id="ecea6-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="ecea6-124">Délégation Kerberos contrainte basée sur les ressources</span><span class="sxs-lookup"><span data-stu-id="ecea6-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="ecea6-125">Dans Windows Server 2012 R2 et Windows Server 2012, la possibilité de configurer la délégation contrainte pour le service a été transférée de l’administrateur de domaine à l’administrateur de service.</span><span class="sxs-lookup"><span data-stu-id="ecea6-125">In Windows Server 2012 R2 and Windows Server 2012, the ability to configure constrained delegation for the service has been transferred from the domain administrator to the service administrator.</span></span> <span data-ttu-id="ecea6-126">De cette façon, l’administrateur de service principal peut autoriser ou refuser les services frontaux.</span><span class="sxs-lookup"><span data-stu-id="ecea6-126">In this way, the back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="ecea6-127">Ce modèle est appelé **délégation Kerberos contrainte basée sur la ressource**.</span><span class="sxs-lookup"><span data-stu-id="ecea6-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="ecea6-128">La KCD basée sur la ressource est configurée à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ecea6-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="ecea6-129">Vous utilisez les applets de commande Set-ADComputer ou Set-ADUser, selon que le compte d’emprunt est un compte d’ordinateur ou un compte de service/compte utilisateur.</span><span class="sxs-lookup"><span data-stu-id="ecea6-129">You use the Set-ADComputer or Set-ADUser cmdlets, depending on whether the impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="ecea6-130">Configuration d’une KCD basée sur la ressource pour un compte d’ordinateur sur un domaine géré</span><span class="sxs-lookup"><span data-stu-id="ecea6-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="ecea6-131">Supposons que vous ayez une application web en cours d’exécution sur l’ordinateur « contoso100-webapp.contoso100.com ».</span><span class="sxs-lookup"><span data-stu-id="ecea6-131">Assume you have a web app running on the computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="ecea6-132">Elle doit accéder à la ressource (une API web s’exécutant sur « contoso100-api.contoso100.com ») dans le contexte des utilisateurs du domaine.</span><span class="sxs-lookup"><span data-stu-id="ecea6-132">It needs to access the resource (a web API running on 'contoso100-api.contoso100.com') in the context of domain users.</span></span> <span data-ttu-id="ecea6-133">Voici comment configurer une KCD basée sur les ressources pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="ecea6-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="ecea6-134">Configuration d’une KCD basée sur la ressource pour un compte utilisateur sur un domaine géré</span><span class="sxs-lookup"><span data-stu-id="ecea6-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="ecea6-135">Supposons que vous ayez une application web en cours d’exécution en tant que compte de service « appsvc » et qu’elle doit accéder à la ressource (une API web en cours d’exécution en tant que compte de service - 'backendsvc') dans le contexte des utilisateurs du domaine.</span><span class="sxs-lookup"><span data-stu-id="ecea6-135">Assume you have a web app running as a service account 'appsvc' and it needs to access the resource (a web API running as a service account - 'backendsvc') in the context of domain users.</span></span> <span data-ttu-id="ecea6-136">Voici comment configurer une KCD basée sur les ressources pour ce scénario.</span><span class="sxs-lookup"><span data-stu-id="ecea6-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="ecea6-137">Contenu connexe</span><span class="sxs-lookup"><span data-stu-id="ecea6-137">Related Content</span></span>
* [<span data-ttu-id="ecea6-138">Services de domaine Azure AD : guide de prise en main</span><span class="sxs-lookup"><span data-stu-id="ecea6-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="ecea6-139">Présentation de la délégation Kerberos contrainte</span><span class="sxs-lookup"><span data-stu-id="ecea6-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)
