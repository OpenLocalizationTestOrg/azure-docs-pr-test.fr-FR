---
<span data-ttu-id="49ce3-101">titre : aaa « leçon Azure Analysis Services supplémentaire du didacticiel : sécurité dynamique | Description de Microsoft Docs » : décrit comment toouse la sécurité dynamique à l’aide de ligne de filtre en hello Azure Analysis Services tutorial.</span><span class="sxs-lookup"><span data-stu-id="49ce3-101">title: aaa"Azure Analysis Services tutorial supplemental lesson: Dynamic security | Microsoft Docs" description: Describes how toouse dynamic security by using row filters in hello Azure Analysis Services tutorial.</span></span>
<span data-ttu-id="49ce3-102">Services : analysis services documentationcenter : '' auteur : minewiskan manager : erikre éditeur : '' balises : ».</span><span class="sxs-lookup"><span data-stu-id="49ce3-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="49ce3-103">MS.AssetId : ms.service : ms.devlang d’analysis services : NA ms.topic : get-started-article ms.tgt_pltfrm : NA ms.workload : na ms.date : 26/05/2017 ms.author : owend</span><span class="sxs-lookup"><span data-stu-id="49ce3-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="49ce3-104">Leçon supplémentaire – Sécurité dynamique</span><span class="sxs-lookup"><span data-stu-id="49ce3-104">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="49ce3-105">Dans cette leçon supplémentaire, vous allez créer un rôle supplémentaire qui implémente la sécurité dynamique.</span><span class="sxs-lookup"><span data-stu-id="49ce3-105">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="49ce3-106">Sécurité dynamique offre une sécurité au niveau des lignes en fonction de hello name ou login id de hello utilisateur actuellement connecté.</span><span class="sxs-lookup"><span data-stu-id="49ce3-106">Dynamic security provides row-level security based on hello user name or login id of hello user currently logged on.</span></span> 
  
<span data-ttu-id="49ce3-107">tooimplement la sécurité dynamique, vous ajoutez un modèle de tooyour table contenant les noms d’utilisateur hello des utilisateurs qui peuvent se connecter toohello modèle et parcourir les données et les objets de modèle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-107">tooimplement dynamic security, you add a table tooyour model containing hello user names of those users that can connect toohello model and browse model objects and data.</span></span> <span data-ttu-id="49ce3-108">modèle Hello que vous créez à l’aide de ce didacticiel est dans le contexte de hello Adventure Works ; Toutefois, toocomplete cette leçon, vous devez ajouter une table qui contient les utilisateurs de votre propre domaine.</span><span class="sxs-lookup"><span data-stu-id="49ce3-108">hello model you create using this tutorial is in hello context of Adventure Works; however, toocomplete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="49ce3-109">Vous n’avez pas besoin de mots de passe hello hello les noms d’utilisateurs qui sont ajoutés.</span><span class="sxs-lookup"><span data-stu-id="49ce3-109">You do not need hello passwords for hello user names that are added.</span></span> <span data-ttu-id="49ce3-110">toocreate une table EmployeeSecurity, avec un petit groupe d’utilisateurs de votre propre domaine, vous utilisez la fonctionnalité Coller hello coller des données sur les employés à partir d’une feuille de calcul Excel.</span><span class="sxs-lookup"><span data-stu-id="49ce3-110">toocreate an EmployeeSecurity table, with a small sample of users from your own domain, you use hello Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="49ce3-111">Dans un scénario réel, table hello contenant les noms d’utilisateur est en général pas une table à partir d’une base de données en tant que source de données. par exemple, une table DimEmployee réelle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-111">In a real-world scenario, hello table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="49ce3-112">tooimplement la sécurité dynamique, vous utilisez deux fonctions DAX : [nom d’utilisateur, fonction (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) et [LOOKUPVALUE, fonction (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span><span class="sxs-lookup"><span data-stu-id="49ce3-112">tooimplement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="49ce3-113">Ces fonctions, appliquées dans une formule de filtre de lignes, sont définies dans un nouveau rôle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-113">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="49ce3-114">À l’aide de la fonction LOOKUPVALUE hello, formule de hello spécifie une valeur à partir de la table de EmployeeSecurity hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-114">By using hello LOOKUPVALUE function, hello formula specifies a value from hello EmployeeSecurity table.</span></span> <span data-ttu-id="49ce3-115">formule de Hello transmet ensuite que fonction value toohello nom d’utilisateur, qui spécifie le nom d’utilisateur hello d’utilisateur hello connecté appartienne toothis rôle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-115">hello formula then passes that value toohello USERNAME function, which specifies hello user name of hello user logged on belongs toothis role.</span></span> <span data-ttu-id="49ce3-116">Hello utilisateur peut ensuite parcourir uniquement les données spécifiées par les filtres de lignes du rôle hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-116">hello user can then browse only data specified by hello role’s row filters.</span></span> <span data-ttu-id="49ce3-117">Dans ce scénario, vous spécifiez que les employés peuvent parcourir uniquement les données de ventes Internet pour les secteurs de vente hello dans lequel ils sont membres.</span><span class="sxs-lookup"><span data-stu-id="49ce3-117">In this scenario, you specify that sales employees can only browse Internet sales data for hello sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="49ce3-118">Les tâches qui sont uniques toothis scénario de modèle tabulaire Adventure Works, mais sont appliquent pas nécessairement la réalité tooa sont identifiées comme telles.</span><span class="sxs-lookup"><span data-stu-id="49ce3-118">Those tasks that are unique toothis Adventure Works tabular model scenario, but would not necessarily apply tooa real-world scenario are identified as such.</span></span> <span data-ttu-id="49ce3-119">Chaque tâche inclut des informations supplémentaires décrivant l’objectif de hello de tâche hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-119">Each task includes additional information describing hello purpose of hello task.</span></span>  
  
<span data-ttu-id="49ce3-120">Estimé temps toocomplete cette leçon : **30 minutes**</span><span class="sxs-lookup"><span data-stu-id="49ce3-120">Estimated time toocomplete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="49ce3-121">Composants requis</span><span class="sxs-lookup"><span data-stu-id="49ce3-121">Prerequisites</span></span>  
<span data-ttu-id="49ce3-122">Cette rubrique de leçon supplémentaire fait partie d’un didacticiel de modélisation tabulaire, qui doit être suivi dans l’ordre prévu.</span><span class="sxs-lookup"><span data-stu-id="49ce3-122">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="49ce3-123">Avant d’effectuer les tâches de hello dans cette leçon supplémentaire, vous devez avoir terminé toutes les leçons précédentes.</span><span class="sxs-lookup"><span data-stu-id="49ce3-123">Before performing hello tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-hello-dimsalesterritory-table-toohello-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="49ce3-124">Ajouter hello DimSalesTerritory table toohello le projet de modèle tabulaire AW Internet Sales</span><span class="sxs-lookup"><span data-stu-id="49ce3-124">Add hello DimSalesTerritory table toohello AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="49ce3-125">tooimplement sécurité dynamique pour ce scénario Adventure Works, vous devez ajouter le modèle de tooyour deux tables supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="49ce3-125">tooimplement dynamic security for this Adventure Works scenario, you must add two additional tables tooyour model.</span></span> <span data-ttu-id="49ce3-126">Hello première table que vous ajoutez est DimSalesTerritory (comme le secteur de vente) à partir de hello la même base de données AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="49ce3-126">hello first table you add is DimSalesTerritory (as Sales Territory) from hello same AdventureWorksDW database.</span></span> <span data-ttu-id="49ce3-127">Vous appliquez ultérieurement une table SalesTerritory toohello filtre ligne qui définit les données particulier hello hello l’utilisateur connecté peut parcourir.</span><span class="sxs-lookup"><span data-stu-id="49ce3-127">You later apply a row filter toohello SalesTerritory table that defines hello particular data hello logged on user can browse.</span></span>  
  
#### <a name="tooadd-hello-dimsalesterritory-table"></a><span data-ttu-id="49ce3-128">table de DimSalesTerritory tooadd hello</span><span class="sxs-lookup"><span data-stu-id="49ce3-128">tooadd hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="49ce3-129">Dans l’Explorateur de modèles tabulaires > **Sources de données**, cliquez avec le bouton droit sur votre connexion, puis cliquez sur **Importer de nouvelles tables**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-129">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="49ce3-130">Si la boîte de dialogue informations d’identification d’emprunt d’identité hello s’affiche, tapez les informations d’identification d’emprunt d’identité de hello vous avez utilisé dans la leçon 2 : ajouter des données.</span><span class="sxs-lookup"><span data-stu-id="49ce3-130">If hello Impersonation Credentials dialog box appears, type hello impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="49ce3-131">Dans le navigateur, sélectionnez hello **DimSalesTerritory** de table, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-131">In Navigator, select hello **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="49ce3-132">Dans l’éditeur de requête, cliquez sur hello **DimSalesTerritory** de requête, puis supprimez **SalesTerritoryAlternateKey** colonne.</span><span class="sxs-lookup"><span data-stu-id="49ce3-132">In Query Editor, click hello **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="49ce3-133">Cliquez sur **Importer**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-133">Click **Import**.</span></span>  
  
    <span data-ttu-id="49ce3-134">Hello nouvelle table est ajoutée toohello espace de travail modèle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-134">hello new table is added toohello model workspace.</span></span> <span data-ttu-id="49ce3-135">Objets et données de table de DimSalesTerritory source hello sont ensuite importées dans votre modèle tabulaire AW Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="49ce3-135">Objects and data from hello source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="49ce3-136">Une fois la table de hello a été importé avec succès, cliquez sur **fermer**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-136">After hello table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="49ce3-137">Ajouter une table avec des données de noms d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="49ce3-137">Add a table with user name data</span></span>  
<span data-ttu-id="49ce3-138">table DimEmployee de Hello dans la base de données exemple hello AdventureWorksDW contient les utilisateurs de domaine de AdventureWorks hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-138">hello DimEmployee table in hello AdventureWorksDW sample database contains users from hello AdventureWorks domain.</span></span> <span data-ttu-id="49ce3-139">Ces noms d’utilisateur n’existent pas dans votre propre environnement.</span><span class="sxs-lookup"><span data-stu-id="49ce3-139">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="49ce3-140">Vous devez donc créer dans votre modèle une table qui contient un petit échantillon (au moins trois) d’utilisateurs réels de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="49ce3-140">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="49ce3-141">Puis, vous ajoutez ces utilisateurs en tant que rôle de nouveaux membres toohello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-141">You then add these users as members toohello new role.</span></span> <span data-ttu-id="49ce3-142">Vous n’avez pas besoin des mots de passe hello hello exemple les noms d’utilisateurs, mais vous avez besoin des noms d’utilisateur Windows réels de votre propre domaine.</span><span class="sxs-lookup"><span data-stu-id="49ce3-142">You do not need hello passwords for hello sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="tooadd-an-employeesecurity-table"></a><span data-ttu-id="49ce3-143">tooadd une table EmployeeSecurity</span><span class="sxs-lookup"><span data-stu-id="49ce3-143">tooadd an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="49ce3-144">Ouvrez Microsoft Excel, ce qui crée une feuille de calcul.</span><span class="sxs-lookup"><span data-stu-id="49ce3-144">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="49ce3-145">Hello tableau, y compris la ligne d’en-tête hello, de copier et coller ensuite dans la feuille de calcul hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-145">Copy hello following table, including hello header row, and then paste it into hello worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="49ce3-146">Remplacez domaine\nom d’utilisateur, nom et prénom hello hello de noms et ID de connexion de trois utilisateurs de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="49ce3-146">Replace hello first name, last name, and domain\username with hello names and login ids of three users in your organization.</span></span> <span data-ttu-id="49ce3-147">Placez hello même utilisateur sur hello deux premières lignes, pour 1 EmployeeId, affichant cet utilisateur appartient toomore à un secteur de vente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-147">Put hello same user on hello first two rows, for EmployeeId 1, showing this user belongs toomore than one sales territory.</span></span> <span data-ttu-id="49ce3-148">Renseignez hello EmployeeId et SalesTerritoryId comme ils le sont.</span><span class="sxs-lookup"><span data-stu-id="49ce3-148">Leave hello EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="49ce3-149">Enregistrez la feuille de calcul hello en tant que **SampleEmployee**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-149">Save hello worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="49ce3-150">Dans la feuille de calcul hello, sélectionner toutes les cellules de hello avec les données d’employé, y compris les en-têtes de hello, puis cliquez sur les données de salutation sélectionnée, puis cliquez sur **copie**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-150">In hello worksheet, select all hello cells with employee data, including hello headers, then right-click hello selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="49ce3-151">Dans SSDT, cliquez sur hello **modifier** menu, puis sur **coller**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-151">In SSDT, click hello **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="49ce3-152">Si coller est grisée, cliquez sur n’importe quelle colonne dans une table dans la fenêtre du Concepteur de modèles hello et recommencez l’opération.</span><span class="sxs-lookup"><span data-stu-id="49ce3-152">If Paste is grayed out, click any column in any table in hello model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="49ce3-153">Bonjour **Aperçu avant collage** boîte de dialogue **nom de la Table**, type **EmployeeSecurity**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-153">In hello **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="49ce3-154">Dans **toobe données collée**, vérifiez que les données de salutation incluent toutes les données d’utilisateur hello et en-têtes à partir de la feuille de calcul SampleEmployee hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-154">In **Data toobe pasted**, verify hello data includes all hello user data and headers from hello SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="49ce3-155">Vérifiez que la case **Utiliser la première ligne comme en-têtes de colonne** est cochée, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-155">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="49ce3-156">Une nouvelle table nommée EmployeeSecurity avec les données employé copiées à partir de la feuille de calcul SampleEmployee hello est créée.</span><span class="sxs-lookup"><span data-stu-id="49ce3-156">A new table named EmployeeSecurity with employee data copied from hello SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="49ce3-157">Créer des relations entre les tables FactInternetSales, DimGeography et DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="49ce3-157">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="49ce3-158">toutes les tables Hello FactInternetSales, DimGeography et DimSalesTerritory contiennent une colonne commune, SalesTerritoryId.</span><span class="sxs-lookup"><span data-stu-id="49ce3-158">hello FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="49ce3-159">Hello SalesTerritoryId colonne hello DimSalesTerritory table contient des valeurs avec un Id différent pour chaque secteur de vente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-159">hello SalesTerritoryId column in hello DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="toocreate-relationships-between-hello-factinternetsales-dimgeography-and-hello-dimsalesterritory-table"></a><span data-ttu-id="49ce3-160">relations toocreate entre hello FactInternetSales DimGeography et la table DimSalesTerritory de hello</span><span class="sxs-lookup"><span data-stu-id="49ce3-160">toocreate relationships between hello FactInternetSales, DimGeography, and hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="49ce3-161">Dans la vue de diagramme, Bonjour **DimGeography** table, cliquez et maintenez la sélection hello **SalesTerritoryId** colonne, puis faites glisser hello curseur toohello **SalesTerritoryId** colonne Bonjour **DimSalesTerritory** table et relâchez.</span><span class="sxs-lookup"><span data-stu-id="49ce3-161">In Diagram View, in hello **DimGeography** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="49ce3-162">Bonjour **FactInternetSales** table, cliquez et maintenez la sélection hello **SalesTerritoryId** colonne, puis faites glisser hello curseur toohello **SalesTerritoryId** colonne Bonjour  **DimSalesTerritory** de table et relâchez.</span><span class="sxs-lookup"><span data-stu-id="49ce3-162">In hello **FactInternetSales** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="49ce3-163">Hello d’avis propriété Active pour cette relation est False, ce qui signifie qu’il est inactif.</span><span class="sxs-lookup"><span data-stu-id="49ce3-163">Notice hello Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="49ce3-164">table de FactInternetSales Hello a déjà une autre relation active.</span><span class="sxs-lookup"><span data-stu-id="49ce3-164">hello FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="49ce3-165">Masquer hello EmployeeSecurity Table à partir d’applications clientes</span><span class="sxs-lookup"><span data-stu-id="49ce3-165">Hide hello EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="49ce3-166">Dans cette tâche, vous masquez la table de EmployeeSecurity hello, évitant qu’elles s’affichent dans la liste de champs d’une application cliente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-166">In this task, you hide hello EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="49ce3-167">N’oubliez pas que le fait de masquer une table ne garantit pas sa sécurité.</span><span class="sxs-lookup"><span data-stu-id="49ce3-167">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="49ce3-168">Les utilisateurs peuvent toujours interroger les données de la table EmployeeSecurity s’ils savent comment procéder.</span><span class="sxs-lookup"><span data-stu-id="49ce3-168">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="49ce3-169">toosecure hello des données de la table EmployeeSecurity, empêchant les utilisateurs d’être en mesure de tooquery un de ses données, vous appliquez un filtre dans une tâche ultérieure.</span><span class="sxs-lookup"><span data-stu-id="49ce3-169">toosecure hello EmployeeSecurity table data, preventing users from being able tooquery any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="toohide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="49ce3-170">table de EmployeeSecurity hello toohide des applications clientes</span><span class="sxs-lookup"><span data-stu-id="49ce3-170">toohide hello EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="49ce3-171">Dans le Concepteur de modèle hello, dans la vue de diagramme, cliquez sur hello **employé** en-tête de la table, puis cliquez sur **masquer dans les outils clients**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-171">In hello model designer, in Diagram View, right-click hello **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="49ce3-172">Créer un rôle d’utilisateur Sales Employees by Territory (Représentants commerciaux par secteur)</span><span class="sxs-lookup"><span data-stu-id="49ce3-172">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="49ce3-173">Dans cette tâche, vous allez créer un rôle d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="49ce3-173">In this task, you create a user role.</span></span> <span data-ttu-id="49ce3-174">Ce rôle inclut un filtre de lignes définissant les lignes de la table DimSalesTerritory de hello sont toousers visible.</span><span class="sxs-lookup"><span data-stu-id="49ce3-174">This role includes a row filter defining which rows of hello DimSalesTerritory table are visible toousers.</span></span> <span data-ttu-id="49ce3-175">Hello filtre est ensuite appliqué dans une relation de hello un-à-plusieurs sens tooall autres tables connexe tooDimSalesTerritory.</span><span class="sxs-lookup"><span data-stu-id="49ce3-175">hello filter is then applied in hello one-to-many relationship direction tooall other tables related tooDimSalesTerritory.</span></span> <span data-ttu-id="49ce3-176">Un filtre qui sécurise hello totalité EmployeeSecurity de la table d’être interrogée par tout utilisateur qui est membre du rôle de hello s’appliquent également.</span><span class="sxs-lookup"><span data-stu-id="49ce3-176">You also apply a filter that secures hello entire EmployeeSecurity table from being queryable by any user that is a member of hello role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="49ce3-177">Hello vendeurs par rôle Territory que vous créez dans cette leçon restreint toobrowse (ou requête) uniquement les données des membres pour hello toowhich de secteur de vente qu'auquel ils appartiennent.</span><span class="sxs-lookup"><span data-stu-id="49ce3-177">hello Sales Employees by Territory role you create in this lesson restricts members toobrowse (or query) only sales data for hello sales territory toowhich they belong.</span></span> <span data-ttu-id="49ce3-178">Si vous ajoutez un utilisateur comme un membre de toohello Sales Employees par rôle de territoire existe également comme un membre d’un rôle créé dans [leçon 11 : créer des rôles](../tutorials/aas-lesson-11-create-roles.md), vous obtenez une combinaison d’autorisations.</span><span class="sxs-lookup"><span data-stu-id="49ce3-178">If you add a user as a member toohello Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="49ce3-179">Lorsqu’un utilisateur est membre de plusieurs rôles, les autorisations hello et les filtres de lignes définies pour chaque rôle se cumulent.</span><span class="sxs-lookup"><span data-stu-id="49ce3-179">When a user is a member of multiple roles, hello permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="49ce3-180">Autrement dit, les utilisateurs hello a des autorisations supérieures de hello déterminées par la combinaison de hello de rôles.</span><span class="sxs-lookup"><span data-stu-id="49ce3-180">That is, hello user has hello greater permissions determined by hello combination of roles.</span></span>  
  
#### <a name="toocreate-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="49ce3-181">toocreate un Sales Employees par rôle d’utilisateur de secteur de vente</span><span class="sxs-lookup"><span data-stu-id="49ce3-181">toocreate a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="49ce3-182">Dans SSDT, cliquez sur hello **modèle** menu, puis sur **rôles**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-182">In SSDT, click hello **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="49ce3-183">Dans le **Gestionnaire de rôles**, cliquez sur **Nouveau**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-183">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="49ce3-184">Un nouveau rôle avec hello aucune autorisation est ajoutée toohello liste.</span><span class="sxs-lookup"><span data-stu-id="49ce3-184">A new role with hello None permission is added toohello list.</span></span>  
  
3.  <span data-ttu-id="49ce3-185">Cliquez sur Nouveau rôle de hello, puis dans hello **nom** colonne, renommez le rôle de hello trop**Sales Employees by Territory**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-185">Click hello new role, and then in hello **Name** column, rename hello role too**Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="49ce3-186">Bonjour **autorisations** colonne, cliquez sur la liste déroulante hello et sélectionnez hello **en lecture** autorisation.</span><span class="sxs-lookup"><span data-stu-id="49ce3-186">In hello **Permissions** column, click hello dropdown list, and then select hello **Read** permission.</span></span>  
  
5.  <span data-ttu-id="49ce3-187">Cliquez sur hello **membres** onglet, puis cliquez sur **ajouter**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-187">Click hello **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="49ce3-188">Bonjour **sélectionner utilisateur ou groupe** boîte de dialogue **des objets hello nommé tooselect**, type hello premier exemple nom d’utilisateur utilisé lors de la création de table de EmployeeSecurity hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-188">In hello **Select User or Group** dialog box, in **Enter hello object named tooselect**, type hello first sample user name you used when creating hello EmployeeSecurity table.</span></span> <span data-ttu-id="49ce3-189">Cliquez sur **vérifier les noms** nom d’utilisateur tooverify hello est valide, puis cliquez sur **Ok**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-189">Click **Check Names** tooverify hello user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="49ce3-190">Répétez cette étape, en ajoutant hello autres exemples de noms d’utilisateur que vous avez utilisé lors de la création de table de EmployeeSecurity hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-190">Repeat this step, adding hello other sample user names you used when creating hello EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="49ce3-191">Cliquez sur hello **les filtres de lignes** onglet.</span><span class="sxs-lookup"><span data-stu-id="49ce3-191">Click hello **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="49ce3-192">Pourquoi **EmployeeSecurity** table, Bonjour **filtre DAX** colonne, hello type formule suivante :</span><span class="sxs-lookup"><span data-stu-id="49ce3-192">For hello **EmployeeSecurity** table, in hello **DAX Filter** column, type hello following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="49ce3-193">Cette formule indique que toutes les colonnes résolvent toohello condition booléenne false.</span><span class="sxs-lookup"><span data-stu-id="49ce3-193">This formula specifies that all columns resolve toohello false Boolean condition.</span></span> <span data-ttu-id="49ce3-194">Aucune colonne de table de EmployeeSecurity hello ne peut être interrogées par un membre de hello Sales Employees par rôle d’utilisateur de secteur de vente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-194">No columns for hello EmployeeSecurity table can be queried by a member of hello Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="49ce3-195">Pourquoi **DimSalesTerritory** table, hello type formule suivante :</span><span class="sxs-lookup"><span data-stu-id="49ce3-195">For hello **DimSalesTerritory** table, type hello following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="49ce3-196">Dans cette formule, hello la fonction LOOKUPVALUE retourne toutes les valeurs de colonne de DimEmployeeSecurity [SalesTerritoryId] hello, où hello EmployeeSecurity [LoginId] est hello même comme hello actuel ouvert une session sur le nom d’utilisateur Windows et [[[EmployeeSecurity SalesTerritoryId] est hello identique hello DimSalesTerritory [SalesTerritoryId].</span><span class="sxs-lookup"><span data-stu-id="49ce3-196">In this formula, hello LOOKUPVALUE function returns all values for hello DimEmployeeSecurity[SalesTerritoryId] column, where hello EmployeeSecurity[LoginId] is hello same as hello current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is hello same as hello DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="49ce3-197">Hello jeu d’ID de secteur de vente retournées par LOOKUPVALUE est ensuite utilisé toorestrict hello lignes affichées dans la table DimSalesTerritory de hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-197">hello set of sales territory IDs returned by LOOKUPVALUE is then used toorestrict hello rows shown in hello DimSalesTerritory table.</span></span> <span data-ttu-id="49ce3-198">Seules les lignes où hello SalesTerritoryID pour la ligne de hello est dans le jeu de hello d’ID retournée par la fonction LOOKUPVALUE hello sont affichés.</span><span class="sxs-lookup"><span data-stu-id="49ce3-198">Only rows where hello SalesTerritoryID for hello row is in hello set of IDs returned by hello LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="49ce3-199">Dans le Gestionnaire de rôles, cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-199">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="49ce3-200">Hello Sales Employees by Territory rôle d’utilisateur de test</span><span class="sxs-lookup"><span data-stu-id="49ce3-200">Test hello Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="49ce3-201">Dans cette tâche, vous utilisez hello analyser dans la fonctionnalité Excel dans SSDT tootest hello l’efficacité de hello Sales Employees par rôle d’utilisateur de secteur de vente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-201">In this task, you use hello Analyze in Excel feature in SSDT tootest hello efficacy of hello Sales Employees by Territory user role.</span></span> <span data-ttu-id="49ce3-202">Vous spécifiez l’une des noms d’utilisateur hello, vous avez ajouté toohello EmployeeSecurity table et en tant que membre du rôle de hello.</span><span class="sxs-lookup"><span data-stu-id="49ce3-202">You specify one of hello user names you added toohello EmployeeSecurity table and as a member of hello role.</span></span> <span data-ttu-id="49ce3-203">Ce nom d’utilisateur est ensuite utilisé en tant que nom d’utilisateur effectif hello dans connexion hello créée entre Excel et hello le modèle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-203">This user name is then used as hello effective user name in hello connection created between Excel and hello model.</span></span>  
  
#### <a name="tootest-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="49ce3-204">tootest hello Sales Employees par rôle d’utilisateur de secteur de vente</span><span class="sxs-lookup"><span data-stu-id="49ce3-204">tootest hello Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="49ce3-205">Dans SSDT, cliquez sur hello **modèle** menu, puis sur **analyser dans Excel**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-205">In SSDT, click hello **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="49ce3-206">Bonjour **analyser dans Excel** boîte de dialogue **spécifiez hello modèle utilisateur de nom ou rôle toouse tooconnect toohello**, sélectionnez **autre utilisateur Windows**, puis cliquez sur **Parcourir**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-206">In hello **Analyze in Excel** dialog box, in **Specify hello user name or role toouse tooconnect toohello model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="49ce3-207">Bonjour **sélectionner utilisateur ou groupe** boîte de dialogue **entrez hello objet nom tooselect**, tapez un nom d’utilisateur que vous avez inclus dans la table de EmployeeSecurity hello, puis cliquez sur **vérifier les noms**.</span><span class="sxs-lookup"><span data-stu-id="49ce3-207">In hello **Select User or Group** dialog box, in **Enter hello object name tooselect**, type a user name you included in hello EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="49ce3-208">Cliquez sur **Ok** tooclose hello **sélectionner utilisateur ou groupe** boîte de dialogue, puis cliquez sur **Ok** tooclose hello **analyser dans Excel** boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="49ce3-208">Click **Ok** tooclose hello **Select User or Group** dialog box, and then click **Ok** tooclose hello **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="49ce3-209">Excel s’ouvre avec un nouveau classeur.</span><span class="sxs-lookup"><span data-stu-id="49ce3-209">Excel opens with a new workbook.</span></span> <span data-ttu-id="49ce3-210">Un tableau croisé dynamique est automatiquement créé.</span><span class="sxs-lookup"><span data-stu-id="49ce3-210">A PivotTable is automatically created.</span></span> <span data-ttu-id="49ce3-211">Hello liste PivotTable Fields inclut la plupart des champs de données hello disponibles dans votre nouveau modèle.</span><span class="sxs-lookup"><span data-stu-id="49ce3-211">hello PivotTable Fields list includes most of hello data fields available in your new model.</span></span>  
  
    <span data-ttu-id="49ce3-212">Table de EmployeeSecurity avis hello n’est pas visible dans hello liste PivotTable Fields.</span><span class="sxs-lookup"><span data-stu-id="49ce3-212">Notice hello EmployeeSecurity table is not visible in hello PivotTable Fields list.</span></span> <span data-ttu-id="49ce3-213">En effet, vous avez masqué cette table dans les outils clients lors d’une tâche précédente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-213">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="49ce3-214">Bonjour **champs** liste dans **∑ Internet Sales** (mesures), sélectionnez hello **InternetTotalSales** mesure.</span><span class="sxs-lookup"><span data-stu-id="49ce3-214">In hello **Fields** list, in **∑ Internet Sales** (measures), select hello **InternetTotalSales** measure.</span></span> <span data-ttu-id="49ce3-215">mesure de Hello est entré dans hello **valeurs** champs.</span><span class="sxs-lookup"><span data-stu-id="49ce3-215">hello measure is entered into hello **Values** fields.</span></span>  
  
6.  <span data-ttu-id="49ce3-216">Sélectionnez hello **SalesTerritoryId** colonne hello **DimSalesTerritory** table.</span><span class="sxs-lookup"><span data-stu-id="49ce3-216">Select hello **SalesTerritoryId** column from hello **DimSalesTerritory** table.</span></span> <span data-ttu-id="49ce3-217">colonne de Hello est entré dans hello **étiquettes de ligne** champs.</span><span class="sxs-lookup"><span data-stu-id="49ce3-217">hello column is entered into hello **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="49ce3-218">Internet Notez les chiffres des ventes s’affichent uniquement pour hello une région toowhich hello efficace nom d’utilisateur utilisé appartient.</span><span class="sxs-lookup"><span data-stu-id="49ce3-218">Notice Internet sales figures appear only for hello one region toowhich hello effective user name you used belongs.</span></span> <span data-ttu-id="49ce3-219">Si vous sélectionnez une autre colonne, comme ville à partir de la table de DimGeography hello comme champ d’étiquette de ligne, les villes uniquement dans l’utilisateur en vigueur hello secteur de vente toowhich hello appartient sont affichées.</span><span class="sxs-lookup"><span data-stu-id="49ce3-219">If you select another column, like City from hello DimGeography table as Row Label field, only cities in hello sales territory toowhich hello effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="49ce3-220">Cet utilisateur ne peut pas parcourir ou interroger les données des ventes Internet pour les secteurs autres que hello une qu'auquel ils appartiennent.</span><span class="sxs-lookup"><span data-stu-id="49ce3-220">This user cannot browse or query any Internet sales data for territories other than hello one they belong to.</span></span> <span data-ttu-id="49ce3-221">Cette restriction est parce que le filtre de lignes défini pour la table DimSalesTerritory de hello, Bonjour vendeurs par rôle d’utilisateur territoire, hello sécurise les données pour toutes les données liées tooother des secteurs de vente.</span><span class="sxs-lookup"><span data-stu-id="49ce3-221">This restriction is because hello row filter defined for hello DimSalesTerritory table, in hello Sales Employees by Territory user role, secures data for all data related tooother sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="49ce3-222">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="49ce3-222">See Also</span></span>  
[<span data-ttu-id="49ce3-223">USERNAME, fonction (DAX)</span><span class="sxs-lookup"><span data-stu-id="49ce3-223">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="49ce3-224">LOOKUPVALUE, fonction (DAX)</span><span class="sxs-lookup"><span data-stu-id="49ce3-224">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="49ce3-225">CUSTOMDATA, fonction (DAX)</span><span class="sxs-lookup"><span data-stu-id="49ce3-225">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  