---
title: "Leçon 4 du didacticiel Azure Analysis Services : Créer des relations | Microsoft Docs"
description: "Explique comment créer des relations dans le projet du didacticiel Azure Analysis Services."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: get-started-article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 05/26/2017
ms.author: owend
ms.openlocfilehash: d79af3915c718a79f60e5f589527eb4c2ae8b367
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="09f23-103">Leçon 4 : Créer des relations</span><span class="sxs-lookup"><span data-stu-id="09f23-103">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="09f23-104">Dans cette leçon, vous allez vérifier les relations qui ont été créées automatiquement lorsque vous avez importé les données, et vous allez ajouter des relations entre différentes tables.</span><span class="sxs-lookup"><span data-stu-id="09f23-104">In this lesson, you verify the relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="09f23-105">Une relation est une connexion entre deux tables qui définit la manière dont les données de ces tables doivent être mises en corrélation.</span><span class="sxs-lookup"><span data-stu-id="09f23-105">A relationship is a connection between two tables that establishes how the data in those tables should be correlated.</span></span> <span data-ttu-id="09f23-106">Par exemple, les tables DimProduct et DimProductSubcategory ont une relation basée sur le fait que chaque produit appartient à une sous-catégorie.</span><span class="sxs-lookup"><span data-stu-id="09f23-106">For example, the DimProduct table and the DimProductSubcategory table have a relationship based on the fact that each product belongs to a subcategory.</span></span> <span data-ttu-id="09f23-107">Pour plus d’informations, consultez [Relations](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="09f23-107">To learn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="09f23-108">Durée estimée pour suivre cette leçon : **10 minutes**</span><span class="sxs-lookup"><span data-stu-id="09f23-108">Estimated time to complete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="09f23-109">Prérequis</span><span class="sxs-lookup"><span data-stu-id="09f23-109">Prerequisites</span></span>  
<span data-ttu-id="09f23-110">Cette rubrique fait partie d’un didacticiel de modélisation tabulaire, qui doit être suivi dans l’ordre prévu.</span><span class="sxs-lookup"><span data-stu-id="09f23-110">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="09f23-111">Avant d’effectuer les tâches de cette leçon, vous devez avoir terminé la leçon précédente : [Leçon 3 : Marquer en tant que Table de dates](../tutorials/aas-lesson-3-mark-as-date-table.md).</span><span class="sxs-lookup"><span data-stu-id="09f23-111">Before performing the tasks in this lesson, you should have completed the previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="09f23-112">Vérifier les relations existantes et ajouter de nouvelles relations</span><span class="sxs-lookup"><span data-stu-id="09f23-112">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="09f23-113">Lorsque vous avez importé des données à l’aide de la fonctionnalité Obtenir des données, vous avez obtenu sept tables de la base de données AdventureWorksDW2014.</span><span class="sxs-lookup"><span data-stu-id="09f23-113">When you imported data by using Get Data, you got seven tables from the AdventureWorksDW2014 database.</span></span> <span data-ttu-id="09f23-114">En règle générale, lorsque vous importez des données à partir d’une source relationnelle, les relations existantes sont importées automatiquement avec les données.</span><span class="sxs-lookup"><span data-stu-id="09f23-114">Generally, when you import data from a relational source, existing relationships are automatically imported together with the data.</span></span> <span data-ttu-id="09f23-115">Toutefois, avant de poursuivre avec la création de votre modèle, vous devez vérifier que les relations entre les tables ont été créées correctement.</span><span class="sxs-lookup"><span data-stu-id="09f23-115">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="09f23-116">Pour ce didacticiel, vous ajoutez trois nouvelles relations.</span><span class="sxs-lookup"><span data-stu-id="09f23-116">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="to-review-existing-relationships"></a><span data-ttu-id="09f23-117">Pour vérifier les relations existantes</span><span class="sxs-lookup"><span data-stu-id="09f23-117">To review existing relationships</span></span>  
  
1.  <span data-ttu-id="09f23-118">Cliquez sur le menu **Modèle** > **Vue du modèle** > **Vue de diagramme**.</span><span class="sxs-lookup"><span data-stu-id="09f23-118">Click the **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="09f23-119">Le Concepteur de modèles apparaît à présent dans la vue de diagramme, sous la forme d’un graphique affichant toutes les tables que vous avez importées, reliées entre elles par des lignes.</span><span class="sxs-lookup"><span data-stu-id="09f23-119">The model designer now appears in Diagram View, a graphical format displaying all the tables you imported with lines between them.</span></span> <span data-ttu-id="09f23-120">Ces lignes indiquent les relations qui ont été créées automatiquement lorsque vous avez importé les données.</span><span class="sxs-lookup"><span data-stu-id="09f23-120">The lines between tables indicate the relationships that were automatically created when you imported the data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="09f23-122">Incluez autant de tables que possible en utilisant les contrôles de la minicarte situés dans le coin inférieur droit du Concepteur de modèles.</span><span class="sxs-lookup"><span data-stu-id="09f23-122">Include as many of the tables as possible by using minimap controls in the lower-right corner of the model designer.</span></span> <span data-ttu-id="09f23-123">Vous pouvez également cliquer et faire glisser les tables à différents emplacements, de manière à les rapprocher ou à les placer dans un ordre particulier.</span><span class="sxs-lookup"><span data-stu-id="09f23-123">You can also click and drag tables to different locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="09f23-124">Le déplacement des tables n’affecte pas les relations qui existent déjà entre elles.</span><span class="sxs-lookup"><span data-stu-id="09f23-124">Moving tables does not affect the relationships already between the tables.</span></span> <span data-ttu-id="09f23-125">Pour visualiser toutes les colonnes d’une table spécifique, cliquez sur un bord de la table et faites-le glisser pour développer ou réduire la taille de la table.</span><span class="sxs-lookup"><span data-stu-id="09f23-125">To view all the columns in a particular table, click and drag on a table edge to expand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="09f23-126">Cliquez sur la ligne pleine située entre la table **DimCustomer** et la table **DimGeography**.</span><span class="sxs-lookup"><span data-stu-id="09f23-126">Click the solid line between the **DimCustomer** table and the **DimGeography** table.</span></span> <span data-ttu-id="09f23-127">La ligne pleine entre ces deux tables indique que cette relation est active, autrement dit, qu’elle est utilisée par défaut lors du calcul des formules DAX.</span><span class="sxs-lookup"><span data-stu-id="09f23-127">The solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="09f23-128">Notez que la colonne **GeographyKey** de la table **DimCustomer** et la colonne **GeographyKey** de la table **DimGeography** s’affichent désormais dans un cadre.</span><span class="sxs-lookup"><span data-stu-id="09f23-128">Notice the **GeographyKey** column in the **DimCustomer** table and the **GeographyKey** column in the **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="09f23-129">Ces colonnes sont utilisées dans la relation.</span><span class="sxs-lookup"><span data-stu-id="09f23-129">These columns are used in the relationship.</span></span> <span data-ttu-id="09f23-130">Les propriétés de la relation apparaissent maintenant aussi dans la fenêtre **Propriétés**.</span><span class="sxs-lookup"><span data-stu-id="09f23-130">The relationship’s properties now also appear in the **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="09f23-131">Outre l’utilisation du Générateur de modèles dans la vue de diagramme, vous pouvez également utiliser la boîte de dialogue Gérer les relations pour afficher les relations entre toutes les tables dans un format tabulaire.</span><span class="sxs-lookup"><span data-stu-id="09f23-131">In addition to using the model designer in diagram view, you can also use the Manage Relationships dialog box to show the relationships between all tables in a table format.</span></span> <span data-ttu-id="09f23-132">Dans l’Explorateur de modèles tabulaires, cliquez sur **Relations** > **Gérer les relations**.</span><span class="sxs-lookup"><span data-stu-id="09f23-132">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="09f23-133">Vérifiez que les relations ci-après ont été créées lorsque chacune des tables a été importée à partir de la base de données AdventureWorksDW :</span><span class="sxs-lookup"><span data-stu-id="09f23-133">Verify the following relationships were created when each of the tables were imported from the AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="09f23-134">Actif</span><span class="sxs-lookup"><span data-stu-id="09f23-134">Active</span></span>|<span data-ttu-id="09f23-135">Table</span><span class="sxs-lookup"><span data-stu-id="09f23-135">Table</span></span>|<span data-ttu-id="09f23-136">Table de recherche associée</span><span class="sxs-lookup"><span data-stu-id="09f23-136">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="09f23-137">Oui</span><span class="sxs-lookup"><span data-stu-id="09f23-137">Yes</span></span>|<span data-ttu-id="09f23-138">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-138">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="09f23-139">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-139">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="09f23-140">Oui</span><span class="sxs-lookup"><span data-stu-id="09f23-140">Yes</span></span>|<span data-ttu-id="09f23-141">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-141">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="09f23-142">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-142">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="09f23-143">Oui</span><span class="sxs-lookup"><span data-stu-id="09f23-143">Yes</span></span>|<span data-ttu-id="09f23-144">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-144">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="09f23-145">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-145">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="09f23-146">Oui</span><span class="sxs-lookup"><span data-stu-id="09f23-146">Yes</span></span>|<span data-ttu-id="09f23-147">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-147">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="09f23-148">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-148">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="09f23-149">Oui</span><span class="sxs-lookup"><span data-stu-id="09f23-149">Yes</span></span>|<span data-ttu-id="09f23-150">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-150">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="09f23-151">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="09f23-151">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="09f23-152">Si l’une des relations est manquante, vérifiez que votre modèle comprend les tables suivantes : DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory et FactInternetSales.</span><span class="sxs-lookup"><span data-stu-id="09f23-152">If any of the relationships are missing, verify that your model includes the following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="09f23-153">Si vous importez des tables provenant de la même connexion de source de données à des moments différents, les relations entre ces tables ne sont pas créées et doivent être créées manuellement.</span><span class="sxs-lookup"><span data-stu-id="09f23-153">If tables from the same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="09f23-154">Examen approfondi</span><span class="sxs-lookup"><span data-stu-id="09f23-154">Take a closer look</span></span>
<span data-ttu-id="09f23-155">Dans la vue de diagramme, notez la présence d’une flèche, d’un astérisque et d’un nombre sur les lignes, qui indiquent la relation entre les tables.</span><span class="sxs-lookup"><span data-stu-id="09f23-155">In Diagram View, notice an arrow, an asterisk, and a number on the lines that show the relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="09f23-157">La flèche indique la direction du filtre.</span><span class="sxs-lookup"><span data-stu-id="09f23-157">The arrow shows the filter direction.</span></span> <span data-ttu-id="09f23-158">L’astérisque signifie que cette table est le côté « plusieurs » de la cardinalité de la relation, tandis que le 1 indique que cette table est le côté « un » de la relation.</span><span class="sxs-lookup"><span data-stu-id="09f23-158">The asterisk shows this table is the many side in the relationship's cardinality, and the one shows this table is the one side of the relationship.</span></span> <span data-ttu-id="09f23-159">Si vous devez modifier une relation (par exemple, modifier la direction du filtre de la relation ou sa cardinalité), double-cliquez sur la ligne de relation pour ouvrir la boîte de dialogue Modifier la relation.</span><span class="sxs-lookup"><span data-stu-id="09f23-159">If you need to edit a relationship; for example, change the relationship's filter direction or cardinality, double-click the relationship line to open the Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="09f23-161">Ces fonctionnalités sont destinées à la modélisation de données avancée et sortent du cadre de ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="09f23-161">These features are meant for advanced data modeling and are outside the scope of this tutorial.</span></span> <span data-ttu-id="09f23-162">Pour plus d’informations, consultez [Filtres croisés bidirectionnels pour les modèles tabulaires dans Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span><span class="sxs-lookup"><span data-stu-id="09f23-162">To learn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="09f23-163">Dans certains cas, vous devrez peut-être créer des relations supplémentaires entre les tables de votre modèle pour répondre aux besoins d’une certaine logique métier.</span><span class="sxs-lookup"><span data-stu-id="09f23-163">In some cases, you may need to create additional relationships between tables in your model to support certain business logic.</span></span> <span data-ttu-id="09f23-164">Pour ce didacticiel, vous devez créer trois relations supplémentaires entre la table FactInternetSales et la table DimDate.</span><span class="sxs-lookup"><span data-stu-id="09f23-164">For this tutorial, you need to create three additional relationships between the FactInternetSales table and the DimDate table.</span></span>  
  
#### <a name="to-add-new-relationships-between-tables"></a><span data-ttu-id="09f23-165">Pour ajouter de nouvelles relations entre les tables</span><span class="sxs-lookup"><span data-stu-id="09f23-165">To add new relationships between tables</span></span>  
  
1.  <span data-ttu-id="09f23-166">Dans le Concepteur de modèles, dans la table **FactInternetSales**, cliquez sur la colonne **OrderDate** et maintenez le bouton de la souris enfoncé, faites glisser le curseur vers la colonne **Date** de la table **DimDate**, puis relâchez le bouton de la souris.</span><span class="sxs-lookup"><span data-stu-id="09f23-166">In the model designer, in the **FactInternetSales** table, click, and hold on the **OrderDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="09f23-167">Une ligne pleine s’affiche pour indiquer que vous avez créé une relation active entre la colonne **OrderDate** de la table **Internet Sales** et la colonne **Date** de la table **Date**.</span><span class="sxs-lookup"><span data-stu-id="09f23-167">A solid line appears showing you have created an active relationship between the **OrderDate** column in the **Internet Sales** table, and the **Date** column in the **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="09f23-169">Lors de la création de relations, la cardinalité et la direction du filtre entre la table primaire et la table de recherche associée sont automatiquement sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="09f23-169">When creating relationships, the cardinality and filter direction between the primary table and the related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="09f23-170">Dans la table **FactInternetSales**, cliquez sur la colonne **DueDate** et maintenez le bouton enfoncé, faites glisser le curseur vers la colonne **Date** de la table **DimDate**, puis relâchez le bouton.</span><span class="sxs-lookup"><span data-stu-id="09f23-170">In the **FactInternetSales** table, click and hold on the **DueDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="09f23-171">Une ligne en pointillé s’affiche pour indiquer que vous avez créé une relation inactive entre la colonne **DueDate** de la table **FactInternetSales** et la colonne **Date** de la table **DimDate**.</span><span class="sxs-lookup"><span data-stu-id="09f23-171">A dotted line appears showing you have created an inactive relationship between the **DueDate** column in the **FactInternetSales** table, and the **Date** column in the **DimDate** table.</span></span> <span data-ttu-id="09f23-172">Vous pouvez avoir plusieurs relations entre les tables, mais une seule relation peut être active à la fois.</span><span class="sxs-lookup"><span data-stu-id="09f23-172">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="09f23-173">Les relations inactives peuvent devenir actives si vous devez effectuer des agrégations spéciales dans des expressions DAX personnalisées.</span><span class="sxs-lookup"><span data-stu-id="09f23-173">Inactive relationships can be made active to perform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="09f23-174">Pour finir, créez une dernière relation.</span><span class="sxs-lookup"><span data-stu-id="09f23-174">Finally, create one more relationship.</span></span> <span data-ttu-id="09f23-175">Dans la table **FactInternetSales**, cliquez sur la colonne **ShipDate** et maintenez le bouton de la souris enfoncé, faites glisser le curseur vers la colonne **Date** de la table **DimDate**, puis relâchez le bouton de la souris.</span><span class="sxs-lookup"><span data-stu-id="09f23-175">In the **FactInternetSales** table, click and hold on the **ShipDate** column, then drag the cursor to the **Date** column in the **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="09f23-177">Et ensuite ?</span><span class="sxs-lookup"><span data-stu-id="09f23-177">What's next?</span></span>
<span data-ttu-id="09f23-178">[Leçon 5 : Créer des colonnes calculées](../tutorials/aas-lesson-5-create-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="09f23-178">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  
