---
title: "passerelle de données local aaaOn | Documents Microsoft"
description: "Une passerelle locale est nécessaire si votre serveur Analysis Services dans Azure doivent se connecter à des sources de données tooon local."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: cd596155-b608-4a34-935e-e45c95d884a9
ms.service: analysis-services
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 08/21/2017
ms.author: owend
ms.openlocfilehash: fc7b9c69e6f81b41deb7a5d6d963225593845d84
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="connecting-tooon-premises-data-sources-with-azure-on-premises-data-gateway"></a><span data-ttu-id="1d0b4-103">Connexion des sources de données tooon local avec la passerelle de données Azure localement</span><span class="sxs-lookup"><span data-stu-id="1d0b4-103">Connecting tooon-premises data sources with Azure On-premises Data Gateway</span></span>
<span data-ttu-id="1d0b4-104">passerelle de données locale Hello agit comme un pont, assurant le transfert sécurisé des données entre des sources de données sur site et vos serveurs Azure Analysis Services dans le cloud de hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-104">hello on-premises data gateway acts as a bridge, providing secure data transfer between on-premises data sources and your Azure Analysis Services servers in hello cloud.</span></span> <span data-ttu-id="1d0b4-105">Dans tooworking Ajout avec plusieurs serveurs Azure Analysis Services Bonjour même région, version la plus récente de la passerelle de hello hello fonctionne également avec Azure Logic Apps, Power BI, les applications Power et Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-105">In addition tooworking with multiple Azure Analysis Services servers in hello same region, hello latest version of hello gateway also works with Azure Logic Apps, Power BI, Power Apps, and Microsoft Flow.</span></span> <span data-ttu-id="1d0b4-106">Vous pouvez associer plusieurs services Bonjour même région avec une seule passerelle.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-106">You can associate multiple services in hello same region with a single gateway.</span></span> 

 <span data-ttu-id="1d0b4-107">Azure Analysis Services nécessite une ressource de la passerelle Bonjour même région.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-107">Azure Analysis Services requires a gateway resource in hello same region.</span></span> <span data-ttu-id="1d0b4-108">Par exemple, si vous avez des serveurs Azure Analysis Services dans la région est des États-Unis 2 hello, vous devez une ressource de passerelle dans la région est des États-Unis 2 hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-108">For example, if you have Azure Analysis Services servers in hello East US 2 region, you need a gateway resource in hello East US 2 region.</span></span> <span data-ttu-id="1d0b4-109">Plusieurs serveurs est des États-Unis 2 peuvent utiliser hello même passerelle.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-109">Multiple servers in East US 2 can use hello same gateway.</span></span>

<span data-ttu-id="1d0b4-110">Le programme d’installation avec hello de passerelle hello première est un processus en quatre parties :</span><span class="sxs-lookup"><span data-stu-id="1d0b4-110">Getting setup with hello gateway hello first time is a four-part process:</span></span>

- <span data-ttu-id="1d0b4-111">**Télécharger et exécuter le programme d’installation** - Cette étape installe un service de passerelle sur un ordinateur de votre organisation.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-111">**Download and run setup** - This step installs a gateway service on a computer in your organization.</span></span>

- <span data-ttu-id="1d0b4-112">**Inscrivez votre passerelle** : dans cette étape, vous spécifiez un nom et la récupération de clé pour votre passerelle et sélectionnez une région, l’inscription de votre passerelle avec hello Service Cloud de passerelle.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-112">**Register your gateway** - In this step, you specify a name and recovery key for your gateway, and select a region, registering your gateway with hello Gateway Cloud Service.</span></span>

- <span data-ttu-id="1d0b4-113">**Créer une ressource de passerelle dans Azure** - Lors de cette étape, vous créez une ressource de passerelle dans votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-113">**Create a gateway resource in Azure** - In this step, you create a gateway resource in your Azure subscription.</span></span>

- <span data-ttu-id="1d0b4-114">**Se connecter à vos ressources de passerelle serveurs tooyour** -une fois que vous avez une ressource de la passerelle dans votre abonnement, vous pouvez commencer à se connecter à votre tooit de serveurs.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-114">**Connect your servers tooyour gateway resource** - Once you have a gateway resource in your subscription, you can begin connecting your servers tooit.</span></span>

<span data-ttu-id="1d0b4-115">Une fois que vous avez une ressource de la passerelle configurée pour votre abonnement, vous pouvez connecter plusieurs serveurs et autres tooit de services.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-115">Once you have a gateway resource configured for your subscription, you can connect multiple servers, and other services tooit.</span></span> <span data-ttu-id="1d0b4-116">Uniquement, vous devez tooinstall une autre passerelle et créez des ressources de passerelle supplémentaire si vous avez des serveurs ou autres services dans une autre région.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-116">You only need tooinstall a different gateway and create additional gateway resources if you have servers or other services in a different region.</span></span>

<span data-ttu-id="1d0b4-117">tooget démarré immédiatement, consultez [installer et configurer la passerelle de données locale](analysis-services-gateway-install.md).</span><span class="sxs-lookup"><span data-stu-id="1d0b4-117">tooget started right away, see [Install and configure on-premises data gateway](analysis-services-gateway-install.md).</span></span>

## <span data-ttu-id="1d0b4-118"><a name="how-it-works"></a>Fonctionnement</span><span class="sxs-lookup"><span data-stu-id="1d0b4-118"><a name="how-it-works"> </a>How it works</span></span>
<span data-ttu-id="1d0b4-119">passerelle Hello vous installez sur un ordinateur de votre organisation s’exécute comme un service Windows, **passerelle de données locale**.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-119">hello gateway you install on a computer in your organization runs as a Windows service, **On-premises data gateway**.</span></span> <span data-ttu-id="1d0b4-120">Ce service local est inscrit avec hello Service de Cloud de passerelle via Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-120">This local service is registered with hello Gateway Cloud Service through Azure Service Bus.</span></span> <span data-ttu-id="1d0b4-121">Vous créez ensuite la ressource de passerelle correspondante pour votre abonnement Azure.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-121">You then create a gateway resource Gateway Cloud Service for your Azure subscription.</span></span> <span data-ttu-id="1d0b4-122">Analysis Services Azure sont ensuite des serveurs connectés tooyour ressource de la passerelle.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-122">Your Azure Analysis Services servers are then connected tooyour gateway resource.</span></span> <span data-ttu-id="1d0b4-123">Lorsque les modèles sur votre tooyour tooconnect du besoin de serveur local pour les requêtes ou le traitement des sources de données, une requête et les données de flux qui traverse hello passerelle ressource, Azure Service Bus, hello service de passerelle de données sur site local et vos sources de données.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-123">When models on your server need tooconnect tooyour on-premises data sources for queries or processing, a query and data flow traverses hello gateway resource, Azure Service Bus, hello local on-premises data gateway service, and your data sources.</span></span> 

![Fonctionnement](./media/analysis-services-gateway/aas-gateway-how-it-works.png)

<span data-ttu-id="1d0b4-125">Requêtes et flux de données :</span><span class="sxs-lookup"><span data-stu-id="1d0b4-125">Queries and data flow:</span></span>

1. <span data-ttu-id="1d0b4-126">Une requête est créée par le service de cloud hello avec informations d’identification chiffrée de hello pour la source de données locale hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-126">A query is created by hello cloud service with hello encrypted credentials for hello on-premises data source.</span></span> <span data-ttu-id="1d0b4-127">Il a ensuite envoyées hello passerelle tooprocess tooa file d’attente.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-127">It's then sent tooa queue for hello gateway tooprocess.</span></span>
2. <span data-ttu-id="1d0b4-128">service de cloud de passerelle Hello analyse hello requête et exécute un push de hello demande toohello [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="1d0b4-128">hello gateway cloud service analyzes hello query and pushes hello request toohello [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span></span>
3. <span data-ttu-id="1d0b4-129">passerelle de données locale Hello interroge hello Azure Service Bus pour les demandes en attente.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-129">hello on-premises data gateway polls hello Azure Service Bus for pending requests.</span></span>
4. <span data-ttu-id="1d0b4-130">passerelle de Hello obtient hello requête, déchiffre les informations d’identification hello et connecte des sources de données toohello avec ces informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-130">hello gateway gets hello query, decrypts hello credentials, and connects toohello data sources with those credentials.</span></span>
5. <span data-ttu-id="1d0b4-131">passerelle de Hello envoie hello toohello récupérer les données pour l’exécution.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-131">hello gateway sends hello query toohello data source for execution.</span></span>
6. <span data-ttu-id="1d0b4-132">résultats de Hello sont envoyés de source de données hello toohello arrière passerelle, puis sur le service de cloud computing hello et votre serveur.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-132">hello results are sent from hello data source, back toohello gateway, and then onto hello cloud service and your server.</span></span>

## <span data-ttu-id="1d0b4-133"><a name="windows-service-account"></a>Compte de service Windows</span><span class="sxs-lookup"><span data-stu-id="1d0b4-133"><a name="windows-service-account"> </a>Windows Service account</span></span>
<span data-ttu-id="1d0b4-134">Bonjour passerelle de données locale est configurée toouse *NT SERVICE\PBIEgwService* d’identification de connexion du service Windows hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-134">hello on-premises data gateway is configured toouse *NT SERVICE\PBIEgwService* for hello Windows service logon credential.</span></span> <span data-ttu-id="1d0b4-135">Par défaut, elle a hello droit d’ouverture de session en tant que service ; dans le contexte hello d’ordinateur hello que vous installez la passerelle de hello sur.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-135">By default, it has hello right of Logon as a service; in hello context of hello machine that you are installing hello gateway on.</span></span> <span data-ttu-id="1d0b4-136">Ces informations d’identification n’est pas hello mêmes sources de données de site tooon compte utilisé tooconnect ou votre compte Azure.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-136">This credential is not hello same account used tooconnect tooon-premises data sources or your Azure account.</span></span>  

<span data-ttu-id="1d0b4-137">Si vous rencontrez des problèmes avec votre serveur proxy en raison tooauthentication, vous souhaiterez peut-être toochange hello Windows service utilisateur du compte de domaine tooa ou gérés compte de service.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-137">If you encounter issues with your proxy server due tooauthentication, you may want toochange hello Windows service account tooa domain user or managed service account.</span></span>

## <span data-ttu-id="1d0b4-138"><a name="ports"></a>Ports</span><span class="sxs-lookup"><span data-stu-id="1d0b4-138"><a name="ports"> </a>Ports</span></span>
<span data-ttu-id="1d0b4-139">passerelle de Hello crée une connexion sortante de tooAzure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-139">hello gateway creates an outbound connection tooAzure Service Bus.</span></span> <span data-ttu-id="1d0b4-140">Elle communique sur les ports sortants : TCP 443 (par défaut), 5671, 5672 et 9350 à 9354.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-140">It communicates on outbound ports: TCP 443 (default), 5671, 5672, 9350 through 9354.</span></span>  <span data-ttu-id="1d0b4-141">passerelle de Hello ne nécessite pas de ports entrants.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-141">hello gateway does not require inbound ports.</span></span>

<span data-ttu-id="1d0b4-142">Nous vous recommandons des adresses IP whitelist hello pour votre région de données dans votre pare-feu.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-142">We recommend you whitelist hello IP addresses for your data region in your firewall.</span></span> <span data-ttu-id="1d0b4-143">Vous pouvez télécharger hello [liste IP de centre de données Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="1d0b4-143">You can download hello [Microsoft Azure Datacenter IP list](https://www.microsoft.com/download/details.aspx?id=41653).</span></span> <span data-ttu-id="1d0b4-144">Cette liste est actualisée chaque semaine.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-144">This list is updated weekly.</span></span>

> [!NOTE]
> <span data-ttu-id="1d0b4-145">Hello des adresses IP répertoriées dans la liste d’IP de centre de données Azure hello sont en notation CIDR.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-145">hello IP Addresses listed in hello Azure Datacenter IP list are in CIDR notation.</span></span> <span data-ttu-id="1d0b4-146">Par exemple, 10.0.0.0/24 ne signifie pas 10.0.0.0 à 10.0.0.24.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-146">For example, 10.0.0.0/24 does not mean 10.0.0.0 through 10.0.0.24.</span></span> <span data-ttu-id="1d0b4-147">En savoir plus sur hello [la notation CIDR](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="1d0b4-147">Learn more about hello [CIDR notation](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="1d0b4-148">Hello Voici les noms de domaine hello complet utilisés par la passerelle de hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-148">hello following are hello fully qualified domain names used by hello gateway.</span></span>

| <span data-ttu-id="1d0b4-149">Noms de domaine</span><span class="sxs-lookup"><span data-stu-id="1d0b4-149">Domain names</span></span> | <span data-ttu-id="1d0b4-150">Ports sortants</span><span class="sxs-lookup"><span data-stu-id="1d0b4-150">Outbound ports</span></span> | <span data-ttu-id="1d0b4-151">Description</span><span class="sxs-lookup"><span data-stu-id="1d0b4-151">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1d0b4-152">*. powerbi.com</span><span class="sxs-lookup"><span data-stu-id="1d0b4-152">*.powerbi.com</span></span> |<span data-ttu-id="1d0b4-153">80</span><span class="sxs-lookup"><span data-stu-id="1d0b4-153">80</span></span> |<span data-ttu-id="1d0b4-154">Le protocole HTTP utilisé le programme d’installation de toodownload hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-154">HTTP used toodownload hello installer.</span></span> |
| <span data-ttu-id="1d0b4-155">*. powerbi.com</span><span class="sxs-lookup"><span data-stu-id="1d0b4-155">*.powerbi.com</span></span> |<span data-ttu-id="1d0b4-156">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-156">443</span></span> |<span data-ttu-id="1d0b4-157">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1d0b4-157">HTTPS</span></span> |
| <span data-ttu-id="1d0b4-158">*.analysis.windows.net</span><span class="sxs-lookup"><span data-stu-id="1d0b4-158">*.analysis.windows.net</span></span> |<span data-ttu-id="1d0b4-159">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-159">443</span></span> |<span data-ttu-id="1d0b4-160">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1d0b4-160">HTTPS</span></span> |
| <span data-ttu-id="1d0b4-161">*.login.windows.net</span><span class="sxs-lookup"><span data-stu-id="1d0b4-161">*.login.windows.net</span></span> |<span data-ttu-id="1d0b4-162">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-162">443</span></span> |<span data-ttu-id="1d0b4-163">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1d0b4-163">HTTPS</span></span> |
| <span data-ttu-id="1d0b4-164">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="1d0b4-164">*.servicebus.windows.net</span></span> |<span data-ttu-id="1d0b4-165">5671-5672</span><span class="sxs-lookup"><span data-stu-id="1d0b4-165">5671-5672</span></span> |<span data-ttu-id="1d0b4-166">Advanced Message Queuing Protocol (AMQP)</span><span class="sxs-lookup"><span data-stu-id="1d0b4-166">Advanced Message Queuing Protocol (AMQP)</span></span> |
| <span data-ttu-id="1d0b4-167">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="1d0b4-167">*.servicebus.windows.net</span></span> |<span data-ttu-id="1d0b4-168">443, 9350-9354</span><span class="sxs-lookup"><span data-stu-id="1d0b4-168">443, 9350-9354</span></span> |<span data-ttu-id="1d0b4-169">Récepteurs du Service Bus Relay sur TCP (nécessite le port 443 pour l’acquisition du jeton Access Control)</span><span class="sxs-lookup"><span data-stu-id="1d0b4-169">Listeners on Service Bus Relay over TCP (requires 443 for Access Control token acquisition)</span></span> |
| <span data-ttu-id="1d0b4-170">*.frontend.clouddatahub.net</span><span class="sxs-lookup"><span data-stu-id="1d0b4-170">*.frontend.clouddatahub.net</span></span> |<span data-ttu-id="1d0b4-171">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-171">443</span></span> |<span data-ttu-id="1d0b4-172">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1d0b4-172">HTTPS</span></span> |
| <span data-ttu-id="1d0b4-173">*.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="1d0b4-173">*.core.windows.net</span></span> |<span data-ttu-id="1d0b4-174">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-174">443</span></span> |<span data-ttu-id="1d0b4-175">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1d0b4-175">HTTPS</span></span> |
| <span data-ttu-id="1d0b4-176">login.microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="1d0b4-176">login.microsoftonline.com</span></span> |<span data-ttu-id="1d0b4-177">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-177">443</span></span> |<span data-ttu-id="1d0b4-178">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1d0b4-178">HTTPS</span></span> |
| <span data-ttu-id="1d0b4-179">*.msftncsi.com</span><span class="sxs-lookup"><span data-stu-id="1d0b4-179">*.msftncsi.com</span></span> |<span data-ttu-id="1d0b4-180">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-180">443</span></span> |<span data-ttu-id="1d0b4-181">Utilisé une connectivité internet tootest si la passerelle de hello est inaccessible par hello service Power BI.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-181">Used tootest internet connectivity if hello gateway is unreachable by hello Power BI service.</span></span> |
| <span data-ttu-id="1d0b4-182">*.microsoftonline-p.com</span><span class="sxs-lookup"><span data-stu-id="1d0b4-182">*.microsoftonline-p.com</span></span> |<span data-ttu-id="1d0b4-183">443</span><span class="sxs-lookup"><span data-stu-id="1d0b4-183">443</span></span> |<span data-ttu-id="1d0b4-184">Utilisé pour l’authentification en fonction de la configuration.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-184">Used for authentication depending on configuration.</span></span> |

### <span data-ttu-id="1d0b4-185"><a name="force-https"></a>Forcer les communications HTTPS avec Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="1d0b4-185"><a name="force-https"></a>Forcing HTTPS communication with Azure Service Bus</span></span>
<span data-ttu-id="1d0b4-186">Vous pouvez forcer toocommunicate de passerelle hello avec Azure Service Bus à l’aide de HTTPS au lieu de direct TCP ; Toutefois, cette opération donc peut considérablement réduire les performances.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-186">You can force hello gateway toocommunicate with Azure Service Bus by using HTTPS instead of direct TCP; however, doing so can greatly reduce performance.</span></span> <span data-ttu-id="1d0b4-187">Vous pouvez modifier hello *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* fichier en modifiant la valeur hello `AutoDetect` trop`Https`.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-187">You can modify hello *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* file by changing hello value from `AutoDetect` too`Https`.</span></span> <span data-ttu-id="1d0b4-188">Ce fichier se trouve généralement dans *C:\Program Files\On-premises data gateway*.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-188">This file is typically located at *C:\Program Files\On-premises data gateway*.</span></span>

```
<setting name="ServiceBusSystemConnectivityModeString" serializeAs="String">
    <value>Https</value>
</setting>
```

## <span data-ttu-id="1d0b4-189"><a name="faq"></a>Forum Aux Questions</span><span class="sxs-lookup"><span data-stu-id="1d0b4-189"><a name="faq"></a>Frequently asked questions</span></span>

### <a name="general"></a><span data-ttu-id="1d0b4-190">Généralités</span><span class="sxs-lookup"><span data-stu-id="1d0b4-190">General</span></span>

<span data-ttu-id="1d0b4-191">**Q**: ai-je besoin d’une passerelle pour les sources de données dans le cloud hello, tels que de la base de données SQL Azure ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-191">**Q**: Do I need a gateway for data sources in hello cloud, such as Azure SQL Database?</span></span> <br/><span data-ttu-id="1d0b4-192">
**R** : Non.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-192">
**A**: No.</span></span> <span data-ttu-id="1d0b4-193">Une passerelle connecte à des sources de données tooon local uniquement.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-193">A gateway connects tooon-premises data sources only.</span></span>

<span data-ttu-id="1d0b4-194">**Q**: passerelle de hello a-t-elle toobe installé sur hello même ordinateur en tant que source de données hello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-194">**Q**: Does hello gateway have toobe installed on hello same machine as hello data source?</span></span> <br/><span data-ttu-id="1d0b4-195">
**R** : Non.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-195">
**A**: No.</span></span> <span data-ttu-id="1d0b4-196">passerelle de Hello connecte toohello source de données à l’aide des informations de connexion hello qui a été fournies.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-196">hello gateway connects toohello data source using hello connection information that was provided.</span></span> <span data-ttu-id="1d0b4-197">Envisagez de passerelle de hello comme une application cliente en ce sens.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-197">Consider hello gateway as a client application in this sense.</span></span> <span data-ttu-id="1d0b4-198">Hello passerelle doit juste hello capacité tooconnect toohello nom du serveur qui a été fourni, généralement sur hello même réseau.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-198">hello gateway just needs hello capability tooconnect toohello server name that was provided, typically on hello same network.</span></span>

<a name="why-azure-work-school-account"></a>

<span data-ttu-id="1d0b4-199">**Q**: Pourquoi devez toouse Professionnel ou scolaire toosign compte dans ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-199">**Q**: Why do I need toouse a work or school account toosign in?</span></span> <br/><span data-ttu-id="1d0b4-200">
**Un**: vous pouvez uniquement utiliser un travail Azure ou scolaire compte lorsque vous installez la passerelle de données locale hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-200">
**A**: You can only use an Azure work or school account when you install hello on-premises data gateway.</span></span> <span data-ttu-id="1d0b4-201">Votre compte de connexion est stocké dans un client géré par Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="1d0b4-201">Your sign-in account is stored in a tenant that's managed by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="1d0b4-202">En règle générale, le nom de principal d’utilisateur (UPN) de votre compte Azure AD correspond à adresse de messagerie hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-202">Usually, your Azure AD account's user principal name (UPN) matches hello email address.</span></span>

<span data-ttu-id="1d0b4-203">**Q** : où mes informations d’identification sont-elles stockées ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-203">**Q**: Where are my credentials stored?</span></span> <br/><span data-ttu-id="1d0b4-204">
**A**: informations d’identification hello que vous entrez pour une source de données sont chiffrées et stockées dans hello Service Cloud de passerelle.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-204">
**A**: hello credentials that you enter for a data source are encrypted and stored in hello Gateway Cloud Service.</span></span> <span data-ttu-id="1d0b4-205">informations d’identification Hello sont déchiffrées au niveau de la passerelle de données locale hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-205">hello credentials are decrypted at hello on-premises data gateway.</span></span>

<span data-ttu-id="1d0b4-206">**Q** : Existe-t-il des exigences concernant la bande passante réseau ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-206">**Q**: Are there any requirements for network bandwidth?</span></span> <br/><span data-ttu-id="1d0b4-207">
**R** : Il est recommandé d’utiliser une connexion réseau offrant un bon débit.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-207">
**A**: It's recommend your network connection has good throughput.</span></span> <span data-ttu-id="1d0b4-208">Chaque environnement est différent, et quantité hello des données envoyées affecte les résultats hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-208">Every environment is different, and hello amount of data being sent affects hello results.</span></span> <span data-ttu-id="1d0b4-209">À l’aide d’ExpressRoute peut aider à tooguarantee un niveau de débit entre hello centres de données Azure et locaux.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-209">Using ExpressRoute could help tooguarantee a level of throughput between on-premises and hello Azure datacenters.</span></span>
<span data-ttu-id="1d0b4-210">Vous pouvez utiliser hello un outil tiers Azure Speed Test application toohelp jauge votre débit.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-210">You can use hello third-party tool Azure Speed Test app toohelp gauge your throughput.</span></span>

<span data-ttu-id="1d0b4-211">**Q**: quelle est la latence hello pour la source de données en cours d’exécution des requêtes tooa à partir de la passerelle de hello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-211">**Q**: What is hello latency for running queries tooa data source from hello gateway?</span></span> <span data-ttu-id="1d0b4-212">Quelle est la meilleure architecture de hello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-212">What is hello best architecture?</span></span> <br/><span data-ttu-id="1d0b4-213">
**A**: tooreduce latence du réseau, passerelle de hello installer en tant que source de données toohello fermer que possible.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-213">
**A**: tooreduce network latency, install hello gateway as close toohello data source as possible.</span></span> <span data-ttu-id="1d0b4-214">Si vous pouvez installer la passerelle de hello sur la source de données réelle hello, cette proximité réduit la latence de hello introduite.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-214">If you can install hello gateway on hello actual data source, this proximity minimizes hello latency introduced.</span></span> <span data-ttu-id="1d0b4-215">Envisagez de centres de données hello trop.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-215">Consider hello datacenters too.</span></span> <span data-ttu-id="1d0b4-216">Par exemple, si votre service utilise hello ouest des États-Unis centre de données, et que SQL Server est hébergé dans une machine virtuelle Azure, votre machine virtuelle Azure doit être trop Bonjour ouest des États-Unis.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-216">For example, if your service uses hello West US datacenter, and you have SQL Server hosted in an Azure VM, your Azure VM should be in hello West US too.</span></span> <span data-ttu-id="1d0b4-217">Cette proximité réduit la latence et évite les frais de sortie sur hello machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-217">This proximity minimizes latency and avoids egress charges on hello Azure VM.</span></span>

<span data-ttu-id="1d0b4-218">**Q**: comment sont envoyées toohello arrière cloud ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-218">**Q**: How are results sent back toohello cloud?</span></span> <br/><span data-ttu-id="1d0b4-219">
**A**: les résultats sont envoyés via hello Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-219">
**A**: Results are sent through hello Azure Service Bus.</span></span>

<span data-ttu-id="1d0b4-220">**Q**: existe-t-il toute passerelle toohello de connexions entrantes à partir du cloud de hello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-220">**Q**: Are there any inbound connections toohello gateway from hello cloud?</span></span> <br/><span data-ttu-id="1d0b4-221">
**R** : Non.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-221">
**A**: No.</span></span> <span data-ttu-id="1d0b4-222">passerelle de Hello utilise des connexions sortantes tooAzure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-222">hello gateway uses outbound connections tooAzure Service Bus.</span></span>

<span data-ttu-id="1d0b4-223">**Q** : Que se passe-t-il si je bloque les connexions sortantes ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-223">**Q**: What if I block outbound connections?</span></span> <span data-ttu-id="1d0b4-224">Comment dois-je tooopen ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-224">What do I need tooopen?</span></span> <br/><span data-ttu-id="1d0b4-225">
**A**: consultez les ports hello et les hôtes qui hello passerelle utilise.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-225">
**A**: See hello ports and hosts that hello gateway uses.</span></span>

<span data-ttu-id="1d0b4-226">**Q**: ce que le service de Windows hello réel est appelé ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-226">**Q**: What is hello actual Windows service called?</span></span><br/><span data-ttu-id="1d0b4-227">
**A**: dans les Services, passerelle de hello est appelé service de passerelle de données locale.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-227">
**A**: In Services, hello gateway is called On-premises data gateway service.</span></span>

<span data-ttu-id="1d0b4-228">**Q**: pouvez hello service Windows de passerelle s’exécuter avec un compte Azure Active Directory ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-228">**Q**: Can hello gateway Windows service run with an Azure Active Directory account?</span></span> <br/><span data-ttu-id="1d0b4-229">
**R** : Non.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-229">
**A**: No.</span></span> <span data-ttu-id="1d0b4-230">Hello service Windows doit avoir un compte Windows valide.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-230">hello Windows service must have a valid Windows account.</span></span> <span data-ttu-id="1d0b4-231">Par défaut, le service de hello s’exécute avec hello SID de Service, NT SERVICE\PBIEgwService.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-231">By default, hello service runs with hello Service SID, NT SERVICE\PBIEgwService.</span></span>

### <span data-ttu-id="1d0b4-232"><a name="high-availability"></a>Haute disponibilité et récupération d’urgence</span><span class="sxs-lookup"><span data-stu-id="1d0b4-232"><a name="high-availability"></a>High availability and disaster recovery</span></span>

<span data-ttu-id="1d0b4-233">**Q** : Quelles sont les options de récupération d’urgence disponibles ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-233">**Q**: What options are available for disaster recovery?</span></span> <br/><span data-ttu-id="1d0b4-234">
**Un**: vous pouvez utiliser toorestore de clé de récupération hello ou déplacer une passerelle.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-234">
**A**: You can use hello recovery key toorestore or move a gateway.</span></span> <span data-ttu-id="1d0b4-235">Lorsque vous installez la passerelle de hello, spécifiez la clé de récupération hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-235">When you install hello gateway, specify hello recovery key.</span></span>

<span data-ttu-id="1d0b4-236">**Q**: quels sont les avantages de hello de clé de récupération hello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-236">**Q**: What is hello benefit of hello recovery key?</span></span> <br/><span data-ttu-id="1d0b4-237">
**A**: clé de récupération hello fournit un moyen toomigrate ou récupérer vos paramètres de passerelle après un sinistre.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-237">
**A**: hello recovery key provides a way toomigrate or recover your gateway settings after a disaster.</span></span>

## <span data-ttu-id="1d0b4-238"><a name="troubleshooting"></a>Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="1d0b4-238"><a name="troubleshooting"> </a>Troubleshooting</span></span>

<span data-ttu-id="1d0b4-239">**Q**: Comment puis-je savoir quelles requêtes sont envoyées source de données locale toohello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-239">**Q**: How can I see what queries are being sent toohello on-premises data source?</span></span> <br/><span data-ttu-id="1d0b4-240">
**Un**: vous pouvez activer le traçage de requête, qui inclut les requêtes hello qui sont envoyées.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-240">
**A**: You can enable query tracing, which includes hello queries that are sent.</span></span> <span data-ttu-id="1d0b4-241">N’oubliez pas de requête toochange en remontant la valeur d’origine de toohello faite le problème résolu.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-241">Remember toochange query tracing back toohello original value when done troubleshooting.</span></span> <span data-ttu-id="1d0b4-242">Le fait de laisser activé le traçage des requêtes contribue à augmenter la taille des journaux.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-242">Leaving query tracing turned on creates larger logs.</span></span>

<span data-ttu-id="1d0b4-243">Vous pouvez également utiliser les outils de suivi des requêtes proposés par votre source de données.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-243">You can also look at tools that your data source has for tracing queries.</span></span> <span data-ttu-id="1d0b4-244">Par exemple, vous pouvez utiliser Extended Events ou SQL Profiler for SQL Server et Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-244">For example, you can use Extended Events or SQL Profiler for SQL Server and Analysis Services.</span></span>

<span data-ttu-id="1d0b4-245">**Q**: où se trouvent les journaux de passerelle hello ?</span><span class="sxs-lookup"><span data-stu-id="1d0b4-245">**Q**: Where are hello gateway logs?</span></span> <br/><span data-ttu-id="1d0b4-246">
**R**: Voir la section Journaux plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-246">
**A**: See Logs later in this topic.</span></span>

### <span data-ttu-id="1d0b4-247"><a name="update"></a>Mettre à jour la version la plus récente toohello</span><span class="sxs-lookup"><span data-stu-id="1d0b4-247"><a name="update"></a>Update toohello latest version</span></span>

<span data-ttu-id="1d0b4-248">Nombreux problèmes peuvent apparaître lors de la version de la passerelle hello devient obsolète.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-248">Many issues can surface when hello gateway version becomes outdated.</span></span> <span data-ttu-id="1d0b4-249">Comme recommandé, assurez-vous d’utiliser la version la plus récente hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-249">As good general practice, make sure that you use hello latest version.</span></span> <span data-ttu-id="1d0b4-250">Si vous n’avez pas mis à jour de passerelle de hello pendant un mois ou plus, vous pouvez envisager d’installer la version la plus récente de la passerelle de hello hello et voir si vous pouvez reproduire le problème de hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-250">If you haven't updated hello gateway for a month or longer, you might consider installing hello latest version of hello gateway, and see if you can reproduce hello issue.</span></span>

### <a name="error-failed-tooadd-user-toogroup--2147463168-pbiegwservice-performance-log-users"></a><span data-ttu-id="1d0b4-251">Erreur : Échec de tooadd utilisateur toogroup.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-251">Error: Failed tooadd user toogroup.</span></span> <span data-ttu-id="1d0b4-252">(-2147463168 PBIEgwService Performance Log Users)</span><span class="sxs-lookup"><span data-stu-id="1d0b4-252">(-2147463168 PBIEgwService Performance Log Users)</span></span>

<span data-ttu-id="1d0b4-253">Vous pouvez obtenir cette erreur si vous essayez de passerelle de hello tooinstall sur un contrôleur de domaine, ce qui n’est pas pris en charge.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-253">You might get this error if you try tooinstall hello gateway on a domain controller, which isn't supported.</span></span> <span data-ttu-id="1d0b4-254">Assurez-vous que vous déployez la passerelle de hello sur un ordinateur qui n’est pas un contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-254">Make sure that you deploy hello gateway on a machine that isn't a domain controller.</span></span>

## <span data-ttu-id="1d0b4-255"><a name="logs"></a>Journaux</span><span class="sxs-lookup"><span data-stu-id="1d0b4-255"><a name="logs"></a>Logs</span></span>

<span data-ttu-id="1d0b4-256">Les fichiers journaux constituent une ressource importante lors du dépannage.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-256">Log files are an important resource when troubleshooting.</span></span>

#### <a name="enterprise-gateway-service-logs"></a><span data-ttu-id="1d0b4-257">Journaux du service de passerelle Enterprise</span><span class="sxs-lookup"><span data-stu-id="1d0b4-257">Enterprise gateway service logs</span></span>

`C:\Users\PBIEgwService\AppData\Local\Microsoft\On-premises data gateway\<yyyyymmdd>.<Number>.log`

#### <a name="configuration-logs"></a><span data-ttu-id="1d0b4-258">Journaux de configuration</span><span class="sxs-lookup"><span data-stu-id="1d0b4-258">Configuration logs</span></span>

`C:\Users\<username>\AppData\Local\Microsoft\On-premises data gateway\GatewayConfigurator.log`




#### <a name="event-logs"></a><span data-ttu-id="1d0b4-259">Journaux d’événements</span><span class="sxs-lookup"><span data-stu-id="1d0b4-259">Event logs</span></span>

<span data-ttu-id="1d0b4-260">Vous trouverez hello les journaux de passerelle de gestion des données et PowerBIGateway sous **journaux des applications et Services**.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-260">You can find hello Data Management Gateway and PowerBIGateway logs under **Application and Services Logs**.</span></span>


## <span data-ttu-id="1d0b4-261"><a name="telemetry"></a>Télémétrie</span><span class="sxs-lookup"><span data-stu-id="1d0b4-261"><a name="telemetry"></a>Telemetry</span></span>
<span data-ttu-id="1d0b4-262">La télémétrie peut être utilisée pour la surveillance et la résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-262">Telemetry can be used for monitoring and troubleshooting.</span></span> <span data-ttu-id="1d0b4-263">Par défaut</span><span class="sxs-lookup"><span data-stu-id="1d0b4-263">By default</span></span>

<span data-ttu-id="1d0b4-264">**tooturn télémétrie**</span><span class="sxs-lookup"><span data-stu-id="1d0b4-264">**tooturn on telemetry**</span></span>

1.  <span data-ttu-id="1d0b4-265">Vérifiez hello local données passerelle répertoire client sur les ordinateur hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-265">Check hello On-premises data gateway client directory on hello computer.</span></span> <span data-ttu-id="1d0b4-266">En règle générale, il s’agit de la **passerelle de données %systemdrive%\Program Files\On-premises**.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-266">Typically, it is **%systemdrive%\Program Files\On-premises data gateway**.</span></span> <span data-ttu-id="1d0b4-267">Ou, vous pouvez ouvrir une console de Services et vérifiez tooexecutable de chemin d’accès hello : une propriété de service de passerelle de données locale hello.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-267">Or, you can open a Services console and check hello Path tooexecutable: A property of hello On-premises data gateway service.</span></span>
2.  <span data-ttu-id="1d0b4-268">Dans le fichier de Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config hello à partir du répertoire du client.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-268">In hello Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config file from client directory.</span></span> <span data-ttu-id="1d0b4-269">Modifier hello SendTelemetry paramètre tootrue.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-269">Change hello SendTelemetry setting tootrue.</span></span>
        
    ```
        <setting name="SendTelemetry" serializeAs="String">
                    <value>true</value>
        </setting>
    ```

3.  <span data-ttu-id="1d0b4-270">Enregistrer vos modifications et redémarrer le service Windows hello : service de passerelle de données locale.</span><span class="sxs-lookup"><span data-stu-id="1d0b4-270">Save your changes and restart hello Windows service: On-premises data gateway service.</span></span>




## <a name="next-steps"></a><span data-ttu-id="1d0b4-271">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="1d0b4-271">Next steps</span></span>
* [<span data-ttu-id="1d0b4-272">Gérer Analysis Services</span><span class="sxs-lookup"><span data-stu-id="1d0b4-272">Manage Analysis Services</span></span>](analysis-services-manage.md)
* [<span data-ttu-id="1d0b4-273">Obtenir les données d’Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="1d0b4-273">Get data from Azure Analysis Services</span></span>](analysis-services-connect.md)
