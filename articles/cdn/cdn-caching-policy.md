---
title: "aaaManage stratégie de mise en cache Azure CDN dans Azure Media Services | Documents Microsoft"
description: "Découvrez comment toomanage stratégie de mise en cache Azure CDN dans Azure Media Services."
services: media-services,cdn
documentationcenter: .NET
author: juliako
manager: erikre
editor: 
ms.assetid: be33aecc-6dbe-43d7-a056-10ba911e0e94
ms.service: media-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/04/2017
ms.author: juliako
ms.openlocfilehash: 4c7ee2922fcbb5727e10fbe44fc6e61b79f6917c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="manage-azure-cdn-caching-policy-in-azure-media-services"></a><span data-ttu-id="c1e99-103">Gérer la stratégie de mise en cache CDN dans Azure Media Services</span><span class="sxs-lookup"><span data-stu-id="c1e99-103">Manage Azure CDN caching policy in Azure Media Services</span></span>
<span data-ttu-id="c1e99-104">Azure Media Services fournit la diffusion en continu adaptative HTTP et le téléchargement progressif.</span><span class="sxs-lookup"><span data-stu-id="c1e99-104">Azure Media Services provides HTTP based Adaptive Streaming and progressive download.</span></span> <span data-ttu-id="c1e99-105">La diffusion en continu HTTP est hautement évolutive de par les avantages de mise en cache dans le proxy et les couches CDN, et la mise en cache côté client.</span><span class="sxs-lookup"><span data-stu-id="c1e99-105">HTTP based streaming is highly scalable with benefits of caching in proxy and CDN layers as well as client side caching.</span></span> <span data-ttu-id="c1e99-106">Les points de terminaison de la diffusion en continu fournissent des fonctionnalités générales de diffusion en continu et de configuration pour les en-têtes HTTP du cache.</span><span class="sxs-lookup"><span data-stu-id="c1e99-106">Streaming endpoints provides general streaming capabilities and also configuration for HTTP cache headers.</span></span> <span data-ttu-id="c1e99-107">Les points de terminaison de diffusion en continu définissent le contrôle de cache HTTP : les en-têtes max-age et Expires.</span><span class="sxs-lookup"><span data-stu-id="c1e99-107">Streaming endpoints sets HTTP Cache-Control: max-age and Expires headers.</span></span> <span data-ttu-id="c1e99-108">Pour plus d'informations sur les en-têtes de cache HTTP, rendez-vous sur le site [W3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html).</span><span class="sxs-lookup"><span data-stu-id="c1e99-108">You can get more information for HTTP cache headers from [W3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html).</span></span>

## <a name="default-caching-headers"></a><span data-ttu-id="c1e99-109">En-têtes de mise en cache par défaut</span><span class="sxs-lookup"><span data-stu-id="c1e99-109">Default Caching headers</span></span>
<span data-ttu-id="c1e99-110">Les points de terminaison de diffusion en continu appliquent par défaut des en-têtes de cache de 3 jours pour les données de diffusion en continu à la demande (fragments/segments de médias réels) et les fichiers manifestes (ou sélections).</span><span class="sxs-lookup"><span data-stu-id="c1e99-110">By default streaming-endpoints apply 3 day cache headers for on-demand streaming data (actual media fragments/chunks) and manifest(playlist).</span></span> <span data-ttu-id="c1e99-111">Pour la diffusion en continu en direct, les points de terminaison de diffusion en continu appliquent des en-têtes de cache de 3 jours pour les données (fragments/segments de médias réels) et une en-tête de cache de 2 secondes pour les requêtes de fichier manifeste (ou sélections).</span><span class="sxs-lookup"><span data-stu-id="c1e99-111">For live streaming, streaming endpoints apply 3 day cache headers for data (actual media fragments/chunks) and 2 seconds cache header for manifest(playlist) requests.</span></span> <span data-ttu-id="c1e99-112">En-têtes du cache de la diffusion en continu à la demande s’appliquent lorsque le programme en direct active à la demande tooon (archive en direct).</span><span class="sxs-lookup"><span data-stu-id="c1e99-112">When live program turns tooon-demand (live archive) then on-demand streaming cache headers apply.</span></span>

## <a name="azure-cdn-integration"></a><span data-ttu-id="c1e99-113">Intégration d’Azure CDN</span><span class="sxs-lookup"><span data-stu-id="c1e99-113">Azure CDN integration</span></span>
<span data-ttu-id="c1e99-114">Azure Media Services propose un [CDN intégré](https://azure.microsoft.com/updates/azure-media-services-now-fully-integrated-with-azure-cdn/) pour les points de terminaison de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="c1e99-114">Azure Media Services provides [integrated CDN](https://azure.microsoft.com/updates/azure-media-services-now-fully-integrated-with-azure-cdn/) for streaming-endpoints.</span></span> <span data-ttu-id="c1e99-115">En-têtes du cache-control applique Bonjour même façon que la diffusion en continu tooCDN de points de terminaison activé des points de terminaison de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="c1e99-115">Cache-control headers applies in hello same way as streaming endpoints tooCDN enabled streaming endpoints.</span></span> <span data-ttu-id="c1e99-116">Azure CDN utilise en interne de diffusion en continu configuré un point de terminaison du cache valeurs toodefine hello durée de vie hello objets mis en cache et utilise également ce en-têtes du cache de valeur tooset hello remise.</span><span class="sxs-lookup"><span data-stu-id="c1e99-116">Azure CDN uses streaming endpoint configured cache values toodefine hello life time of hello internally cached objects and also uses this value tooset hello delivery cache headers.</span></span> <span data-ttu-id="c1e99-117">Lors de l’utilisation du CDN activé des points de terminaison de diffusion en continu, il est déconseillé tooset les valeurs de cache de petite taille.</span><span class="sxs-lookup"><span data-stu-id="c1e99-117">When using CDN enabled streaming endpoints it is not recommended tooset small cache values.</span></span> <span data-ttu-id="c1e99-118">Petites valeurs de paramètre pour réduire les performances de hello et réduire l’avantage hello du CDN.</span><span class="sxs-lookup"><span data-stu-id="c1e99-118">Setting small values will decrease hello performance and reduce hello benefit of CDN.</span></span> <span data-ttu-id="c1e99-119">En-têtes de cache tooset inférieures à 600 secondes pour le CDN activé des points de terminaison de diffusion en continu n’est pas autorisée.</span><span class="sxs-lookup"><span data-stu-id="c1e99-119">It is not allowed tooset cache headers smaller than 600 seconds for CDN enabled streaming endpoints.</span></span>

> [!IMPORTANT]
><span data-ttu-id="c1e99-120">Azure Media Services est complètement intégré à Azure CDN.</span><span class="sxs-lookup"><span data-stu-id="c1e99-120">Azure Media Services has complete integration with Azure CDN.</span></span> <span data-ttu-id="c1e99-121">Avec un seul clic, vous pouvez intégrer tous les hello disponible Azure CDN fournisseurs (Akamai et Verizon) tooyour point de terminaison, y compris les produits CDN Standard et Premium de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="c1e99-121">With a single click you can integrate all hello available Azure CDN providers (Akamai and Verizon) tooyour streaming endpoint including CDN Standard and Premium products.</span></span> <span data-ttu-id="c1e99-122">Pour plus d’informations, consultez cette [annonce](https://azure.microsoft.com/blog/standardstreamingendpoint/).</span><span class="sxs-lookup"><span data-stu-id="c1e99-122">For more information, see this [announcement](https://azure.microsoft.com/blog/standardstreamingendpoint/).</span></span>
> 
> <span data-ttu-id="c1e99-123">Frais de données à partir de la diffusion en continu de point de terminaison tooCDN obtient désactivé uniquement si hello CDN est activé sur le point de terminaison API de diffusion en continu ou à l’aide de la section de point de terminaison de diffusion en continu du portail de gestion Azure.</span><span class="sxs-lookup"><span data-stu-id="c1e99-123">Data charges from streaming endpoint tooCDN only gets disabled if hello CDN is enabled over streaming endpoint APIs or using Azure management portal's streaming endpoint section.</span></span> <span data-ttu-id="c1e99-124">Intégration manuelle ou créer directement un point de terminaison CDN à l’aide des API de CDN ou de la section portail ne désactive pas les frais de données hello.</span><span class="sxs-lookup"><span data-stu-id="c1e99-124">Manual integration or directly creating a CDN endpoint using CDN APIs or portal section will not disable hello data charges.</span></span>

## <a name="configuring-cache-headers-with-azure-media-services"></a><span data-ttu-id="c1e99-125">Configuration des en-têtes de cache avec Azure Media Services</span><span class="sxs-lookup"><span data-stu-id="c1e99-125">Configuring cache headers with Azure Media Services</span></span>
<span data-ttu-id="c1e99-126">Vous pouvez utiliser le portail de gestion Azure ou les valeurs d’en-tête cache tooconfigure API Azure Media Services.</span><span class="sxs-lookup"><span data-stu-id="c1e99-126">You can use Azure Management portal or Azure Media Services APIs tooconfigure cache header values.</span></span>

1. <span data-ttu-id="c1e99-127">les en-têtes de cache tooconfigure à l’aide de la gestion de portail, consultez trop[comment les points de terminaison de diffusion en continu de tooManage](../media-services/media-services-portal-manage-streaming-endpoints.md) hello de configuration section point de terminaison de diffusion en continu.</span><span class="sxs-lookup"><span data-stu-id="c1e99-127">tooconfigure cache headers using management portal please refer too[How tooManage Streaming Endpoints](../media-services/media-services-portal-manage-streaming-endpoints.md) section Configuring hello Streaming Endpoint.</span></span>
2. <span data-ttu-id="c1e99-128">API REST d'Azure Media Services, [StreamingEndpoint](https://msdn.microsoft.com/library/azure/dn783468.aspx#StreamingEndpointCacheControl).</span><span class="sxs-lookup"><span data-stu-id="c1e99-128">Azure Media Services REST API, [StreamingEndpoint](https://msdn.microsoft.com/library/azure/dn783468.aspx#StreamingEndpointCacheControl).</span></span>
3. <span data-ttu-id="c1e99-129">Kit de développement logiciel (SDK) .NET Azure Media Services, [Propriétés StreamingEndpointCacheControl](http://go.microsoft.com/fwlink/?LinkId=615302).</span><span class="sxs-lookup"><span data-stu-id="c1e99-129">Azure Media Services .NET SDK, [StreamingEndpointCacheControl Properties](http://go.microsoft.com/fwlink/?LinkId=615302).</span></span>

## <a name="cache-configuration-precedence-order"></a><span data-ttu-id="c1e99-130">Ordre de priorité de la configuration du cache</span><span class="sxs-lookup"><span data-stu-id="c1e99-130">Cache configuration precedence order</span></span>
1. <span data-ttu-id="c1e99-131">La valeur configurée du cache Azure Media Services remplace la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="c1e99-131">Azure Media Services configured cache value overrides default value.</span></span>
2. <span data-ttu-id="c1e99-132">S'il n'existe aucune configuration manuelle, les valeurs par défaut s'appliquent.</span><span class="sxs-lookup"><span data-stu-id="c1e99-132">If there is no manual configuration, default values applies.</span></span>
3. <span data-ttu-id="c1e99-133">Par défaut, 2 secondes en-têtes du cache s’applique toolive manifest(playlist), quelle que soit la configuration d’Azure Media ou le stockage Azure de diffusion en continu et de la substitution de cette valeur n’est pas disponible.</span><span class="sxs-lookup"><span data-stu-id="c1e99-133">By default 2 seconds cache headers applies toolive streaming manifest(playlist) regardless of Azure Media or Azure Storage configuration and overriding of this value is not available.</span></span>

