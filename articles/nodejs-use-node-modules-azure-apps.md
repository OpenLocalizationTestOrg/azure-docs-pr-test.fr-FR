---
title: aaaWorking avec Modules Node.js
description: "Découvrez comment toowork avec modules Node.js lors de l’utilisation du Service d’applications Azure ou les Services de cloud computing."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="b8eec-103">Utilisation de modules Node.js avec des applications Azure</span><span class="sxs-lookup"><span data-stu-id="b8eec-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="b8eec-104">Ce document fournit des instructions sur l'utilisation de modules Node.js avec des applications hébergées sur Azure.</span><span class="sxs-lookup"><span data-stu-id="b8eec-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="b8eec-105">Il vous explique comment vous assurer que votre application utilise une version spécifique d'un module et vous présente l'utilisation de modules natifs avec Azure.</span><span class="sxs-lookup"><span data-stu-id="b8eec-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="b8eec-106">Si vous êtes déjà familiarisé avec l’utilisation de modules Node.js, **package.json** et **shrinkwrap.json de npm** fichiers, hello informations suivantes fournit un résumé de ce qui est décrite dans cet article :</span><span class="sxs-lookup"><span data-stu-id="b8eec-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, hello following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="b8eec-107">Azure App Service comprend les fichiers **package.json** et **npm-shrinkwrap.json** et peut installer des modules basés sur les entrées de ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="b8eec-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="b8eec-108">Les Services de cloud computing Azure attendre tous les modules toobe installé sur l’environnement de développement hello et hello **nœud\_modules** toobe répertoire inclus dans le cadre du package de déploiement hello.</span><span class="sxs-lookup"><span data-stu-id="b8eec-108">Azure Cloud Services expect all modules toobe installed on hello development environment, and hello **node\_modules** directory toobe included as part of hello deployment package.</span></span> <span data-ttu-id="b8eec-109">Elle est prise en charge tooenable possibles pour l’installation des modules à l’aide **package.json** ou **shrinkwrap.json de npm** fichiers sur les Services de Cloud ; Toutefois, cette configuration nécessite une personnalisation de valeur par défaut de hello scripts utilisés par les projets de Service Cloud.</span><span class="sxs-lookup"><span data-stu-id="b8eec-109">It is possible tooenable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of hello default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="b8eec-110">Pour obtenir un exemple de procédure tooconfigure cet environnement, consultez [Azure démarrage tâche toorun npm installer tooavoid déploiement des modules de nœud](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="b8eec-110">For an example of how tooconfigure this environment, see [Azure Startup task toorun npm install tooavoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="b8eec-111">Machines virtuelles ne sont pas abordés dans cet article, comme l’expérience de déploiement hello dans une machine virtuelle dépend du système d’exploitation de hello hébergé par hello Machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="b8eec-111">Azure Virtual Machines are not discussed in this article, as hello deployment experience in a VM is dependent on hello operating system hosted by hello Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="b8eec-112">Modules Node.js</span><span class="sxs-lookup"><span data-stu-id="b8eec-112">Node.js Modules</span></span>
<span data-ttu-id="b8eec-113">Les modules sont des packages JavaScript chargeables qui fournissent une fonctionnalité spécifique à votre application.</span><span class="sxs-lookup"><span data-stu-id="b8eec-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="b8eec-114">Les modules sont généralement installés à l’aide de hello **npm** de ligne de commande d’outils, toutefois, certains modules (par exemple, le module http du hello) sont fournies en tant que partie du package de Node.js hello core.</span><span class="sxs-lookup"><span data-stu-id="b8eec-114">Modules are usually installed using hello **npm** command-line tool, however some modules (such as hello http module) are provided as part of hello core Node.js package.</span></span>

<span data-ttu-id="b8eec-115">Lorsque les modules sont installés, ils sont stockés dans hello **nœud\_modules** répertoire au niveau racine hello de votre structure de répertoire d’application.</span><span class="sxs-lookup"><span data-stu-id="b8eec-115">When modules are installed, they are stored in hello **node\_modules** directory at hello root of your application directory structure.</span></span> <span data-ttu-id="b8eec-116">Chaque module dans hello **nœud\_modules** répertoire maintient son propre **nœud\_modules** répertoire qui contient tous les modules qu’il dépend, et ce comportement se répète. pour chaque module tous les moyen hello la chaîne de dépendance hello.</span><span class="sxs-lookup"><span data-stu-id="b8eec-116">Each module within hello **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all hello way down hello dependency chain.</span></span> <span data-ttu-id="b8eec-117">Cet environnement permet à chaque toohave module installé ses propres exigences de version pour les modules de hello qu'il dépend, toutefois cela peut entraîner une structure de répertoires volumineux.</span><span class="sxs-lookup"><span data-stu-id="b8eec-117">This environment allows each module installed toohave its own version requirements for hello modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="b8eec-118">Déploiement hello **nœud\_modules** répertoire comme partie de votre application augmente la taille de hello du déploiement hello lors de la comparaison de toousing un **package.json** ou  **npm-shrinkwrap.json** fichier ; Toutefois, il ne garantit que les versions hello de modules hello utilisés en production sont même hello sous forme de modules hello utilisés dans le développement.</span><span class="sxs-lookup"><span data-stu-id="b8eec-118">Deploying hello **node\_modules** directory as part of your application increases hello size of hello deployment when compared toousing a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that hello versions of hello modules used in production are hello same as hello modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="b8eec-119">Modules natifs</span><span class="sxs-lookup"><span data-stu-id="b8eec-119">Native Modules</span></span>
<span data-ttu-id="b8eec-120">Alors que la plupart des modules sont simplement des fichiers JavaScript en texte brut, certains modules sont des images binaires propres à des plateformes.</span><span class="sxs-lookup"><span data-stu-id="b8eec-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="b8eec-121">Ces modules sont compilés au moment de l'installation, en général à l'aide de Python et node-gyp.</span><span class="sxs-lookup"><span data-stu-id="b8eec-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="b8eec-122">Étant donné que les Services de cloud computing Azure reposent sur hello **nœud\_modules** dossier dans le cadre de l’application hello, n’importe quel module natif inclus comme partie des modules de hello installé doit fonctionner dans un service cloud tant qu’il était en cours de déploiement installé et compilé sur un système de développement Windows.</span><span class="sxs-lookup"><span data-stu-id="b8eec-122">Since Azure Cloud Services rely on hello **node\_modules** folder being deployed as part of hello application, any native module included as part of hello installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="b8eec-123">Azure App Service ne prend pas en charge tous les modules natifs et risque de ne pas pouvoir les compiler si des prérequis spécifiques sont requis.</span><span class="sxs-lookup"><span data-stu-id="b8eec-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="b8eec-124">Alors que certains modules populaires tels que MongoDB ont des dépendances natives facultatives et fonctionnent correctement sans celles-ci, deux solutions se sont avérées opérationnelles avec presque tous les modules natifs disponibles à ce jour :</span><span class="sxs-lookup"><span data-stu-id="b8eec-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="b8eec-125">Exécutez **npm installer** sur un ordinateur Windows qui a des composants requis de tous les hello native du module.</span><span class="sxs-lookup"><span data-stu-id="b8eec-125">Run **npm install** on a Windows machine that has all hello native module's prerequisites installed.</span></span> <span data-ttu-id="b8eec-126">Ensuite, déployez hello créé **nœud\_modules** dossier dans le cadre de hello application tooAzure du Service d’applications.</span><span class="sxs-lookup"><span data-stu-id="b8eec-126">Then, deploy hello created **node\_modules** folder as part of hello application tooAzure App Service.</span></span>

  * <span data-ttu-id="b8eec-127">Avant de compiler, vérifiez que votre installation de Node.js locale a architecture correspondante et version de hello est aussi proche que possible toohello celui utilisé dans Azure (les valeurs actuelles hello peuvent être vérifiées sur le runtime à partir des propriétés **process.arch**et **process.version**).</span><span class="sxs-lookup"><span data-stu-id="b8eec-127">Before compiling, check that your local Node.js installation has matching architecture and hello version is as close as possible toohello one used in Azure (hello current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="b8eec-128">Azure App Service peut être configuré tooexecute un interpréteur de commandes personnalisé ou des scripts de shell pendant le déploiement, ce qui vous donne hello des commandes personnalisées opportunité tooexecute et de configurer précisément hello moyen **npm installer** est en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="b8eec-128">Azure App Service can be configured tooexecute custom bash or shell scripts during deployment, giving you hello opportunity tooexecute custom commands and precisely configure hello way **npm install** is being run.</span></span> <span data-ttu-id="b8eec-129">Pour une vidéo montrant comment tooconfigure cet environnement, consultez [des Scripts de déploiement de site Web personnalisé avec Kudu].</span><span class="sxs-lookup"><span data-stu-id="b8eec-129">For a video showing how tooconfigure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="b8eec-130">Utilisation du fichier package.json</span><span class="sxs-lookup"><span data-stu-id="b8eec-130">Using a package.json file</span></span>
<span data-ttu-id="b8eec-131">Hello **package.json** fichier est un moyen toospecify hello niveau supérieur dépendances de votre application nécessite hello plateforme d’hébergement permettant d’installer les dépendances hello, au lieu de vous obliger tooinclude hello **nœud \_packages** dossier dans le cadre du déploiement de hello.</span><span class="sxs-lookup"><span data-stu-id="b8eec-131">hello **package.json** file is a way toospecify hello top-level dependencies your application requires so that hello hosting platform can install hello dependencies, rather than requiring you tooinclude hello **node\_packages** folder as part of hello deployment.</span></span> <span data-ttu-id="b8eec-132">Une fois l’application hello a été déployée, hello **npm installer** commande est utilisée tooparse hello **package.json** de fichiers et d’installer toutes les dépendances de hello répertoriés.</span><span class="sxs-lookup"><span data-stu-id="b8eec-132">After hello application has been deployed, hello **npm install** command is used tooparse hello **package.json** file and install all hello dependencies listed.</span></span>

<span data-ttu-id="b8eec-133">Pendant le développement, vous pouvez utiliser hello **--enregistrer**, **--save-dev**, ou **--save-facultatif** paramètres lors de l’installation des modules tooadd une entrée pour hello module tooyour **package.json** fichier automatiquement.</span><span class="sxs-lookup"><span data-stu-id="b8eec-133">During development, you can use hello **--save**, **--save-dev**, or **--save-optional** parameters when installing modules tooadd an entry for hello module tooyour **package.json** file automatically.</span></span> <span data-ttu-id="b8eec-134">Pour plus d'informations, consultez la page [npm-install](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="b8eec-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="b8eec-135">Un problème potentiel avec hello **package.json** fichier est qu’il indique uniquement version hello pour les dépendances de niveau supérieur.</span><span class="sxs-lookup"><span data-stu-id="b8eec-135">One potential problem with hello **package.json** file is that it only specifies hello version for top-level dependencies.</span></span> <span data-ttu-id="b8eec-136">Chaque module installé peut ou ne pouvez pas spécifier de version hello de modules hello qu'il dépend, et il est possible que vous risquez par une chaîne de dépendance différente que hello celui utilisé dans le développement.</span><span class="sxs-lookup"><span data-stu-id="b8eec-136">Each module installed may or may not specify hello version of hello modules it depends on, and so it is possible that you may end up with a different dependency chain than hello one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="b8eec-137">Lors du déploiement tooAzure Service d’application, si votre <b>package.json</b> fichier fait référence à un module natif, vous pouvez voir un toohello similaire erreur lors de la publication d’application hello à l’aide de Git suivantes : exemple :</span><span class="sxs-lookup"><span data-stu-id="b8eec-137">When deploying tooAzure App Service, if your <b>package.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="b8eec-138">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="b8eec-138">npm ERR!</span></span> <span data-ttu-id="b8eec-139">module-name@0.6.0 install: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="b8eec-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="b8eec-140">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="b8eec-140">npm ERR!</span></span> <span data-ttu-id="b8eec-141">'cmd "/c" "node-gyp configure build"' failed with 1</span><span class="sxs-lookup"><span data-stu-id="b8eec-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="b8eec-142">Utilisation d'un fichier npm-shrinkwrap.json</span><span class="sxs-lookup"><span data-stu-id="b8eec-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="b8eec-143">Hello **npm-shrinkwrap.json** fichier est une tentative de tooaddress hello module des limitations de versioning de hello **package.json** fichier.</span><span class="sxs-lookup"><span data-stu-id="b8eec-143">hello **npm-shrinkwrap.json** file is an attempt tooaddress hello module versioning limitations of hello **package.json** file.</span></span> <span data-ttu-id="b8eec-144">Lors de hello **package.json** fichier inclut uniquement les versions pour les modules de niveau supérieur hello, hello **npm-shrinkwrap.json** fichier contient hello la configuration requise pour la chaîne de dépendance hello complet du module.</span><span class="sxs-lookup"><span data-stu-id="b8eec-144">While hello **package.json** file only includes versions for hello top-level modules, hello **npm-shrinkwrap.json** file contains hello version requirements for hello full module dependency chain.</span></span>

<span data-ttu-id="b8eec-145">Lorsque votre application est prête pour la production, vous pouvez verrouiller la configuration requise et créer un **npm-shrinkwrap.json** fichier à l’aide de hello **npm film** commande.</span><span class="sxs-lookup"><span data-stu-id="b8eec-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using hello **npm shrinkwrap** command.</span></span> <span data-ttu-id="b8eec-146">Cette commande utilise les versions hello actuellement installées dans hello **nœud\_modules** dossier et enregistrer ces toohello versions **npm-shrinkwrap.json** fichier.</span><span class="sxs-lookup"><span data-stu-id="b8eec-146">This command will use hello versions currently installed in hello **node\_modules** folder, and record these versions toohello **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="b8eec-147">Une fois l’application hello a été déployé toohello environnement d’hébergement, hello **npm installer** commande est utilisée tooparse hello **npm-shrinkwrap.json** de fichiers et d’installer toutes les dépendances de hello répertoriés.</span><span class="sxs-lookup"><span data-stu-id="b8eec-147">After hello application has been deployed toohello hosting environment, hello **npm install** command is used tooparse hello **npm-shrinkwrap.json** file and install all hello dependencies listed.</span></span> <span data-ttu-id="b8eec-148">Pour plus d’informations, consultez [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="b8eec-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="b8eec-149">Lors du déploiement tooAzure Service d’application, si votre <b>npm-shrinkwrap.json</b> fichier fait référence à un module natif, vous pouvez voir un toohello similaire erreur lors de la publication d’application hello à l’aide de Git suivantes : exemple :</span><span class="sxs-lookup"><span data-stu-id="b8eec-149">When deploying tooAzure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="b8eec-150">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="b8eec-150">npm ERR!</span></span> <span data-ttu-id="b8eec-151">module-name@0.6.0 install: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="b8eec-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="b8eec-152">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="b8eec-152">npm ERR!</span></span> <span data-ttu-id="b8eec-153">'cmd "/c" "node-gyp configure build"' failed with 1</span><span class="sxs-lookup"><span data-stu-id="b8eec-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="b8eec-154">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b8eec-154">Next steps</span></span>
<span data-ttu-id="b8eec-155">Maintenant que vous comprenez comment les modules Node.js toouse avec Azure, découvrez comment trop[spécifier hello Node.js version], [générer et déployer une application web de Node.js](app-service-web/app-service-web-get-started-nodejs.md), et [comment toouse hello Azure de ligne de commande Interface pour Mac et Linux].</span><span class="sxs-lookup"><span data-stu-id="b8eec-155">Now that you understand how toouse Node.js modules with Azure, learn how too[specify hello Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How toouse hello Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="b8eec-156">Pour plus d’informations, consultez hello [centre de développement Node.js](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="b8eec-156">For more information, see hello [Node.js Developer Center](/nodejs/azure/).</span></span>

[spécifier hello Node.js version]: nodejs-specify-node-version-azure-apps.md
[comment toouse hello Azure de ligne de commande Interface pour Mac et Linux]:cli-install-nodejs.md
[des Scripts de déploiement de site Web personnalisé avec Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo
