---
title: Authentification IIS et serveur Azure MFA | Microsoft Docs
description: "Il s'agit de la page d'authentification multifacteur Azure qui facilite le déploiement de l’authentification IIS et du serveur Azure Multi-Factor Authentication."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: d1bf1c8a-2c10-4ae6-9f4b-75f0c3df43eb
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: H1Hack27Feb2017,it-pro
ms.openlocfilehash: ab6f9110dccd3cfc15092f535650e8d8cb1af13c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="configure-azure-multi-factor-authentication-server-for-iis-web-apps"></a><span data-ttu-id="2bace-103">Configuration d’un serveur Azure Multi-Factor Authentication pour les applications web IIS</span><span class="sxs-lookup"><span data-stu-id="2bace-103">Configure Azure Multi-Factor Authentication Server for IIS web apps</span></span>

<span data-ttu-id="2bace-104">Utilisez la section Authentification IIS du serveur Azure Multi-Factor Authentication (MFA) pour activer et configurer l'authentification IIS pour l'intégration avec les applications Web Microsoft IIS.</span><span class="sxs-lookup"><span data-stu-id="2bace-104">Use the IIS Authentication section of the Azure Multi-Factor Authentication (MFA) Server to enable and configure IIS authentication for integration with Microsoft IIS web applications.</span></span> <span data-ttu-id="2bace-105">Le serveur Azure MFA installe un plug-in capable de filtrer les demandes envoyées au serveur Web IIS pour ajouter Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="2bace-105">The Azure MFA Server installs a plug-in that can filter requests being made to the IIS web server to add Azure Multi-Factor Authentication.</span></span> <span data-ttu-id="2bace-106">Le plug-in IIS prend en charge l'authentification par formulaire et l'authentification intégrée Windows HTTP.</span><span class="sxs-lookup"><span data-stu-id="2bace-106">The IIS plug-in provides support for Form-Based Authentication and Integrated Windows HTTP Authentication.</span></span> <span data-ttu-id="2bace-107">Les adresses IP de confiance peuvent également être configurées pour exempter les adresses IP internes de l'authentification à deux facteurs.</span><span class="sxs-lookup"><span data-stu-id="2bace-107">Trusted IPs can also be configured to exempt internal IP addresses from two-factor authentication.</span></span>

![Authentification IIS](./media/multi-factor-authentication-get-started-server-iis/iis.png)

## <a name="using-form-based-iis-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="2bace-109">Utilisation de l'authentification IIS basée sur le formulaire avec le serveur Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="2bace-109">Using Form-Based IIS Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="2bace-110">Pour sécuriser une application Web IIS qui utilise l'authentification par formulaire, installez le serveur Azure Multi-Factor Authentication sur le serveur Web IIS et configurez le serveur conformément à la procédure suivante :</span><span class="sxs-lookup"><span data-stu-id="2bace-110">To secure an IIS web application that uses form-based authentication, install the Azure Multi-Factor Authentication Server on the IIS web server and configure the Server per the following procedure:</span></span>

1. <span data-ttu-id="2bace-111">Dans le serveur Azure Multi-Factor Authentication, cliquez sur l’icône de Authentification IIS dans le menu de gauche.</span><span class="sxs-lookup"><span data-stu-id="2bace-111">In the Azure Multi-Factor Authentication Server, click the IIS Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="2bace-112">Cliquez sur l’onglet **Par formulaire**.</span><span class="sxs-lookup"><span data-stu-id="2bace-112">Click the **Form-Based** tab.</span></span>
3. <span data-ttu-id="2bace-113">Cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="2bace-113">Click **Add**.</span></span>
4. <span data-ttu-id="2bace-114">Pour détecter automatiquement les variables de nom d’utilisateur, de mot de passe et de domaine, entrez l’URL de connexion (par exemple, https://localhost/contoso/auth/login.aspx ) dans la boîte de dialogue Auto-configurer un site Web basé sur formulaire et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bace-114">To detect username, password and domain variables automatically, enter the Login URL (like https://localhost/contoso/auth/login.aspx) within the Auto-Configure Form-Based Website dialog box and click **OK**.</span></span>
5. <span data-ttu-id="2bace-115">Cochez la case de **Correspondance d'utilisateur Authentification multifacteur requise** si tous les utilisateurs ont été ou seront importés sur le serveur et soumis à l'authentification multifacteur.</span><span class="sxs-lookup"><span data-stu-id="2bace-115">Check the **Require Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="2bace-116">Si un grand nombre d'utilisateurs n'ont pas encore été importés sur le serveur et/ou ne seront pas soumis à l'authentification multifacteur, laissez la case désactivée.</span><span class="sxs-lookup"><span data-stu-id="2bace-116">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
6. <span data-ttu-id="2bace-117">Si les variables de page ne peuvent pas être détectées automatiquement, cliquez sur **Spécifier manuellement** dans la boîte de dialogue Auto-configurer un site Web basé sur formulaire.</span><span class="sxs-lookup"><span data-stu-id="2bace-117">If the page variables cannot be detected automatically, click **Specify Manually** in the Auto-Configure Form-Based Website dialog box.</span></span>
7. <span data-ttu-id="2bace-118">Dans la boîte de dialogue Ajouter un site Web basé sur formulaire, entrez l'URL de la page de connexion dans le champ URL de soumission et entrez un nom d'application (facultatif).</span><span class="sxs-lookup"><span data-stu-id="2bace-118">In the Add Form-Based Website dialog box, enter the URL to the login page in the Submit URL field and enter an Application name (optional).</span></span> <span data-ttu-id="2bace-119">Le nom de l'application apparaît dans les rapports du serveur Azure Multi-Factor Authentication et peut être affiché dans les messages d'authentification SMS ou d’application mobile.</span><span class="sxs-lookup"><span data-stu-id="2bace-119">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
8. <span data-ttu-id="2bace-120">Sélectionnez le format de demande approprié.</span><span class="sxs-lookup"><span data-stu-id="2bace-120">Select the correct Request format.</span></span> <span data-ttu-id="2bace-121">Pour la plupart des applications Web, le format est défini sur « **POST or GET** ».</span><span class="sxs-lookup"><span data-stu-id="2bace-121">This is set to **POST or GET** for most web applications.</span></span>
9. <span data-ttu-id="2bace-122">Entrez les variables Nom d'utilisateur, Mot de passe et Domaine (si elles apparaissent sur la page de connexion).</span><span class="sxs-lookup"><span data-stu-id="2bace-122">Enter the Username variable, Password variable, and Domain variable (if it appears on the login page).</span></span> <span data-ttu-id="2bace-123">Pour rechercher les noms des zones de saisis, accédez à la page de connexion dans un navigateur web, cliquez avec le bouton droit sur la page et sélectionnez **Afficher la source**.</span><span class="sxs-lookup"><span data-stu-id="2bace-123">To find the names of the input boxes, navigate to the login page in a web browser, right-click on the page, and select **View Source**.</span></span>
10. <span data-ttu-id="2bace-124">Cochez la case **Correspondance d'utilisateur Authentification multifacteur Azure requise** si tous les utilisateurs ont été ou seront importés sur le serveur et soumis à l'authentification multifacteur.</span><span class="sxs-lookup"><span data-stu-id="2bace-124">Check the **Require Azure Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="2bace-125">Si un grand nombre d'utilisateurs n'ont pas encore été importés sur le serveur et/ou ne seront pas soumis à l'authentification multifacteur, laissez la case désactivée.</span><span class="sxs-lookup"><span data-stu-id="2bace-125">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
11. <span data-ttu-id="2bace-126">Cliquez sur **Avancé** pour passer en revue les paramètres avancés, notamment :</span><span class="sxs-lookup"><span data-stu-id="2bace-126">Click **Advanced** to review advanced settings, including:</span></span>

  - <span data-ttu-id="2bace-127">Sélectionner un fichier de page de refus personnalisé</span><span class="sxs-lookup"><span data-stu-id="2bace-127">Select a custom denial page file</span></span>
  - <span data-ttu-id="2bace-128">Mettre en cache les authentifications réussies sur le site web pendant une période de temps à l’aide de cookies</span><span class="sxs-lookup"><span data-stu-id="2bace-128">Cache successful authentications to the website for a period of time using cookies</span></span>
  - <span data-ttu-id="2bace-129">Indiquez si vous souhaitez authentifier les informations d’identification principales par rapport à un domaine Windows dans un service d’annuaire LDAP</span><span class="sxs-lookup"><span data-stu-id="2bace-129">Select whether to authenticate the primary credentials against a Windows Domain, LDAP directory.</span></span> <span data-ttu-id="2bace-130">ou sur un serveur RADIUS.</span><span class="sxs-lookup"><span data-stu-id="2bace-130">or RADIUS server.</span></span>

12. <span data-ttu-id="2bace-131">Cliquez sur **OK** pour revenir à la boîte de dialogue Ajouter un site Web basé sur des formulaires.</span><span class="sxs-lookup"><span data-stu-id="2bace-131">Click **OK** to return to the Add Form-Based Website dialog box.</span></span>
13. <span data-ttu-id="2bace-132">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bace-132">Click **OK**.</span></span>
14. <span data-ttu-id="2bace-133">Une fois les variables de page et d’URL détectées ou entrées, les données de site Web s’affichent dans le panneau Par formulaire.</span><span class="sxs-lookup"><span data-stu-id="2bace-133">Once the URL and page variables have been detected or entered, the website data displays in the Form-Based panel.</span></span>

## <a name="using-integrated-windows-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="2bace-134">Utilisation de l'authentification Windows intégrée avec le serveur Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="2bace-134">Using Integrated Windows Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="2bace-135">Pour sécuriser une application Web IIS qui utilise l'authentification Windows HTTP intégrée, installez le serveur Azure MFA sur le serveur Web IIS et configurez le serveur conformément à la procédure suivante :</span><span class="sxs-lookup"><span data-stu-id="2bace-135">To secure an IIS web application that uses Integrated Windows HTTP authentication, install the Azure MFA Server on the IIS web server, then configure the Server with the following steps:</span></span>

1. <span data-ttu-id="2bace-136">Dans le serveur Azure Multi-Factor Authentication, cliquez sur l’icône de Authentification IIS dans le menu de gauche.</span><span class="sxs-lookup"><span data-stu-id="2bace-136">In the Azure Multi-Factor Authentication Server, click the IIS Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="2bace-137">Cliquez sur l’onglet **HTTP**.</span><span class="sxs-lookup"><span data-stu-id="2bace-137">Click the **HTTP** tab.</span></span>
3. <span data-ttu-id="2bace-138">Cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="2bace-138">Click **Add**.</span></span>
4. <span data-ttu-id="2bace-139">Dans la boîte de dialogue Ajouter une URL de base, entrez l’URL du site Web où l’authentification HTTP est effectuée (par exemple, http://localhost/owa) et entrez un nom d’application (facultatif).</span><span class="sxs-lookup"><span data-stu-id="2bace-139">In the Add Base URL dialogue box, enter the URL for the website where HTTP authentication is performed (like http://localhost/owa) and provide an Application name (optional).</span></span> <span data-ttu-id="2bace-140">Le nom de l'application apparaît dans les rapports du serveur Azure Multi-Factor Authentication et peut être affiché dans les messages d'authentification SMS ou d’application mobile.</span><span class="sxs-lookup"><span data-stu-id="2bace-140">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
5. <span data-ttu-id="2bace-141">Réglez le délai de déconnexion en cas d'inactivité et la durée maximale des sessions si les valeurs par défaut sont insuffisantes</span><span class="sxs-lookup"><span data-stu-id="2bace-141">Adjust the Idle timeout and Maximum session times if the default is not sufficient.</span></span>
6. <span data-ttu-id="2bace-142">Cochez la case de **Correspondance d'utilisateur Authentification multifacteur requise** si tous les utilisateurs ont été ou seront importés sur le serveur et soumis à l'authentification multifacteur.</span><span class="sxs-lookup"><span data-stu-id="2bace-142">Check the **Require Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="2bace-143">Si un grand nombre d'utilisateurs n'ont pas encore été importés sur le serveur et/ou ne seront pas soumis à l'authentification multifacteur, laissez la case désactivée.</span><span class="sxs-lookup"><span data-stu-id="2bace-143">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
7. <span data-ttu-id="2bace-144">Cochez la case **Cache de cookie** si vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="2bace-144">Check the **Cookie cache** box if desired.</span></span>
8. <span data-ttu-id="2bace-145">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bace-145">Click **OK**.</span></span>

## <a name="enable-iis-plug-ins-for-azure-multi-factor-authentication-server"></a><span data-ttu-id="2bace-146">Activation des plug-ins IIS pour le serveur Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="2bace-146">Enable IIS Plug-ins for Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="2bace-147">Après avoir configuré les URL et les réglages d’authentification basés sur formulaire ou HTTP, sélectionnez les emplacements où les plug-ins IIS d'Azure multi-Factor Authentification IIS doivent être chargés et activés dans IIS.</span><span class="sxs-lookup"><span data-stu-id="2bace-147">After configuring the Form-Based or HTTP authentication URLs and settings, select the locations where the Azure Multi-Factor Authentication IIS plug-ins should be loaded and enabled in IIS.</span></span> <span data-ttu-id="2bace-148">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="2bace-148">Use the following procedure:</span></span>

1. <span data-ttu-id="2bace-149">Si vous exécutez IIS 6, cliquez sur l’onglet **ISAPI**.</span><span class="sxs-lookup"><span data-stu-id="2bace-149">If running on IIS 6, click the **ISAPI** tab.</span></span> <span data-ttu-id="2bace-150">Sélectionnez le site Web où l'application Web est exécutée (par exemple, Site Web par défaut) pour activer le plug-in de filtre ISAPI Azure Multi-Factor Authentication pour ce site.</span><span class="sxs-lookup"><span data-stu-id="2bace-150">Select the website that the web application is running under (e.g. Default Web Site) to enable the Azure Multi-Factor Authentication ISAPI filter plug-in for that site.</span></span>
2. <span data-ttu-id="2bace-151">Si vous exécutez IIS 7 ou version ultérieure, cliquez sur l’onglet **Module natif**.</span><span class="sxs-lookup"><span data-stu-id="2bace-151">If running on IIS 7 or higher, click the **Native Module** tab.</span></span> <span data-ttu-id="2bace-152">Sélectionnez le serveur, les sites web ou les applications pour activer le plug-in IIS au niveau souhaité.</span><span class="sxs-lookup"><span data-stu-id="2bace-152">Select the server, websites, or applications to enable the IIS plug-in at the desired levels.</span></span>
3. <span data-ttu-id="2bace-153">Cochez la case **Activer l’authentification IIS** en haut de l’écran.</span><span class="sxs-lookup"><span data-stu-id="2bace-153">Click the **Enable IIS authentication** box at the top of the screen.</span></span> <span data-ttu-id="2bace-154">L’application IIS sélectionnée est désormais protégée par le serveur Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="2bace-154">Azure Multi-Factor Authentication is now securing the selected IIS application.</span></span> <span data-ttu-id="2bace-155">Assurez-vous que les utilisateurs ont été importés sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="2bace-155">Ensure that users have been imported into the Server.</span></span>

## <a name="trusted-ips"></a><span data-ttu-id="2bace-156">Adresses IP approuvées</span><span class="sxs-lookup"><span data-stu-id="2bace-156">Trusted IPs</span></span>
<span data-ttu-id="2bace-157">Les adresses IP approuvées permettent aux utilisateurs de contourner l'authentification multifacteur Azure pour les requêtes de sites Web provenant d'adresses IP ou de sous-réseaux spécifiques.</span><span class="sxs-lookup"><span data-stu-id="2bace-157">The Trusted IPs allows users to bypass Azure Multi-Factor Authentication for website requests originating from specific IP addresses or subnets.</span></span> <span data-ttu-id="2bace-158">Il se peut par exemple que vous souhaitiez exempter certains utilisateurs de l'authentification multifacteur Azure lorsqu’ils se connectent du bureau.</span><span class="sxs-lookup"><span data-stu-id="2bace-158">For example, you may want to exempt users from Azure Multi-Factor Authentication while logging in from the office.</span></span> <span data-ttu-id="2bace-159">Pour ce faire, vous devez définir le sous-réseau du bureau comme adresse IP approuvée.</span><span class="sxs-lookup"><span data-stu-id="2bace-159">For this, you would specify the office subnet as a Trusted IPs entry.</span></span> <span data-ttu-id="2bace-160">Pour configurer les adresses IP de confiance, utilisez la procédure suivante :</span><span class="sxs-lookup"><span data-stu-id="2bace-160">To configure Trusted IPs, use the following procedure:</span></span>

1. <span data-ttu-id="2bace-161">Dans la section Authentification IIS, cliquez sur l’onglet **Adresses IP approuvées**.</span><span class="sxs-lookup"><span data-stu-id="2bace-161">In the IIS Authentication section, click the **Trusted IPs** tab.</span></span>
2. <span data-ttu-id="2bace-162">Cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="2bace-162">Click **Add**.</span></span>
3. <span data-ttu-id="2bace-163">Lorsque la boîte de dialogue Ajouter des adresses IP de confiance s'affiche, sélectionnez le bouton **Adresse IP unique**, **Plage d'adresses IP** ou **Sous-réseau**.</span><span class="sxs-lookup"><span data-stu-id="2bace-163">When the Add Trusted IPs dialog box appears, select the **Single IP**, **IP range**, or **Subnet** radio button.</span></span>
4. <span data-ttu-id="2bace-164">Entrez l'adresse IP, la plage d'adresses IP ou le sous-réseau à ajouter à la liste blanche.</span><span class="sxs-lookup"><span data-stu-id="2bace-164">Enter the IP address, range of IP addresses or subnet that should be whitelisted.</span></span> <span data-ttu-id="2bace-165">Si vous entrez un sous-réseau, sélectionnez le masque réseau approprié et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2bace-165">If entering a subnet, select the appropriate Netmask and click **OK**.</span></span> <span data-ttu-id="2bace-166">La liste blanche est alors mise à jour.</span><span class="sxs-lookup"><span data-stu-id="2bace-166">The whitelist has now been added.</span></span>
