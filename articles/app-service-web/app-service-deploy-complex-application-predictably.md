---
title: "aaaProvision et déployer des microservices prévisible dans Azure"
description: "Découvrez comment toodeploy une application composée de microservices dans Azure App Service comme une unité unique et de manière prévisible à l’aide de modèles de groupe de ressources JSON et l’écriture de scripts PowerShell."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: d32c2fc82a8b09e89224ec437e5819b65b2e9e78
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="2b067-103">Mise en service et déploiement de microservices de manière prévisible dans Azure</span><span class="sxs-lookup"><span data-stu-id="2b067-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="2b067-104">Ce didacticiel montre comment tooprovision et déployer une application composée de [microservices](https://en.wikipedia.org/wiki/Microservices) dans [Azure App Service](/services/app-service/) comme une unité unique et de manière prévisible à l’aide de modèles de groupe de ressources JSON et Exécution de scripts PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2b067-104">This tutorial shows how tooprovision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="2b067-105">Lors de la configuration et au déploiement d’applications à grande échelle qui sont composées de microservices hautement découplée, répétabilité et la prévisibilité sont cruciales toosuccess.</span><span class="sxs-lookup"><span data-stu-id="2b067-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial toosuccess.</span></span> <span data-ttu-id="2b067-106">[Azure App Service](/services/app-service/) vous permet de microservices toocreate qui incluent des applications web, des applications mobiles, les applications API et applications de la logique.</span><span class="sxs-lookup"><span data-stu-id="2b067-106">[Azure App Service](/services/app-service/) enables you toocreate microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="2b067-107">[Le Gestionnaire de ressources Azure](../azure-resource-manager/resource-group-overview.md) permet vous toomanage tous les hello microservices en tant qu’unité, ainsi que les dépendances des ressources telles que les paramètres de contrôle source et de la base de données.</span><span class="sxs-lookup"><span data-stu-id="2b067-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you toomanage all hello microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="2b067-108">À présent, vous pouvez également déployer une application de ce type à l’aide de modèles JSON et de scripts PowerShell simples.</span><span class="sxs-lookup"><span data-stu-id="2b067-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="2b067-109">Procédure à suivre</span><span class="sxs-lookup"><span data-stu-id="2b067-109">What you will do</span></span>
<span data-ttu-id="2b067-110">Dans le didacticiel de hello, vous allez déployer une application qui comprend :</span><span class="sxs-lookup"><span data-stu-id="2b067-110">In hello tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="2b067-111">Deux applications Web (par exemple, deux microservices)</span><span class="sxs-lookup"><span data-stu-id="2b067-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="2b067-112">Une base de données SQL principale</span><span class="sxs-lookup"><span data-stu-id="2b067-112">A backend SQL Database</span></span>
* <span data-ttu-id="2b067-113">Paramètres d’application, chaînes de connexion et contrôle de code source</span><span class="sxs-lookup"><span data-stu-id="2b067-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="2b067-114">Paramètres de mise à l’échelle automatique, alertes et Application Insights</span><span class="sxs-lookup"><span data-stu-id="2b067-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="2b067-115">Outils à utiliser</span><span class="sxs-lookup"><span data-stu-id="2b067-115">Tools you will use</span></span>
<span data-ttu-id="2b067-116">Dans ce didacticiel, vous allez utiliser hello suite d’outils.</span><span class="sxs-lookup"><span data-stu-id="2b067-116">In this tutorial, you will use hello following tools.</span></span> <span data-ttu-id="2b067-117">Dans la mesure où il n’est pas plus d’informations sur les outils, je vais scénario de bout en bout toostick toohello et simplement vous donne une brève introduction tooeach, et où vous trouverez plus d’informations sur ce dernier.</span><span class="sxs-lookup"><span data-stu-id="2b067-117">Since it’s not comprehensive discussion on tools, I’m going toostick toohello end-to-end scenario and just give you a brief intro tooeach, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="2b067-118">Modèles Microsoft Azure Resource Manager (JSON)</span><span class="sxs-lookup"><span data-stu-id="2b067-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="2b067-119">Chaque fois que vous créez une application web dans Azure App Service, par exemple, Azure Resource Manager utilise un groupe de ressources entière JSON modèle toocreate hello avec les ressources du composant hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template toocreate hello entire resource group with hello component resources.</span></span> <span data-ttu-id="2b067-120">Un modèle complex à partir de hello [Azure Marketplace](/marketplace) comme hello [WordPress évolutive](/marketplace/partners/wordpress/scalablewordpress/) application peut inclure de base de données MySQL hello, comptes de stockage, hello plan App Service, l’application hello web lui-même, les règles d’alerte, application les paramètres, les paramètres de mise à l’échelle et plus et toutes ces modèles sont tooyou disponible via PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2b067-120">A complex template from hello [Azure Marketplace](/marketplace) like hello [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include hello MySQL database, storage accounts, hello App Service plan, hello web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available tooyou through PowerShell.</span></span> <span data-ttu-id="2b067-121">Pour plus d’informations sur la façon dont toodownload et utilisez ces modèles, consultez [à l’aide de Azure PowerShell avec Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="2b067-121">For information on how toodownload and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="2b067-122">Pour plus d’informations sur les modèles de hello Azure Resource Manager, consultez [de création de modèles de gestionnaire de ressources Azure](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="2b067-122">For more information on hello Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="2b067-123">Kit de développement logiciel (SDK) Microsoft Azure version 2.6 pour Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2b067-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="2b067-124">Hello plus récent SDK contient des améliorations toohello prise en charge du modèle de gestionnaire de ressources dans l’éditeur JSON hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-124">hello newest SDK contains improvements toohello Resource Manager template support in hello JSON editor.</span></span> <span data-ttu-id="2b067-125">Vous pouvez utiliser ce tooquickly créer un modèle de groupe de ressources de toutes pièces ou ouvrir un modèle JSON existant (par exemple, un modèle de galerie téléchargé) pour la modification, remplir le fichier de paramètres hello et même déployer le groupe de ressources hello directement à partir de Azure Solution de groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="2b067-125">You can use this tooquickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate hello parameters file, and even deploy hello resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="2b067-126">Pour en savoir plus, voir [Kit de développement logiciel (SDK) Microsoft Azure version 2.6 pour Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="2b067-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="2b067-127">Microsoft Azure PowerShell 0.8.0 ou plus</span><span class="sxs-lookup"><span data-stu-id="2b067-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="2b067-128">Depuis la version 0.8.0,, hello installation d’Azure PowerShell inclut un module du Gestionnaire de ressources Azure hello dans Ajout toohello module Azure.</span><span class="sxs-lookup"><span data-stu-id="2b067-128">Beginning in version 0.8.0, hello Azure PowerShell installation includes hello Azure Resource Manager module in addition toohello Azure module.</span></span> <span data-ttu-id="2b067-129">Ce nouveau module vous permet de déploiement de hello tooscript des groupes de ressources.</span><span class="sxs-lookup"><span data-stu-id="2b067-129">This new module enables you tooscript hello deployment of resource groups.</span></span>

<span data-ttu-id="2b067-130">Pour en savoir plus, voir [Utilisation d’Azure PowerShell avec le Gestionnaire de ressources Azure](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="2b067-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="2b067-131">Azure Resource Explorer</span><span class="sxs-lookup"><span data-stu-id="2b067-131">Azure Resource Explorer</span></span>
<span data-ttu-id="2b067-132">Cela [outil Aperçu](https://resources.azure.com) vous permet de définitions de JSON hello tooexplore de tous les groupes de ressources hello dans votre abonnement et hello des ressources individuelles.</span><span class="sxs-lookup"><span data-stu-id="2b067-132">This [preview tool](https://resources.azure.com) enables you tooexplore hello JSON definitions of all hello resource groups in your subscription and hello individual resources.</span></span> <span data-ttu-id="2b067-133">Dans l’outil de hello, vous pouvez modifier des définitions de JSON hello d’une ressource, supprimer un ensemble de la hiérarchie des ressources et créer des ressources.</span><span class="sxs-lookup"><span data-stu-id="2b067-133">In hello tool, you can edit hello JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="2b067-134">informations Hello disponibles dans cet outil sont très utiles pour la création de modèle, car elle vous indique ce que vous devez tooset pour un type particulier de ressource, hello de propriétés corriger les valeurs, etc.. Vous pouvez même créer votre groupe de ressources Bonjour [Azure Portal](https://portal.azure.com/), puis vérifiez que ses définitions de JSON dans hello explorer outil toohelp vous modéliser le groupe de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-134">hello information readily available in this tool is very helpful for template authoring because it shows you what properties you need tooset for a particular type of resource, hello correct values, etc. You can even create your resource group in hello [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in hello explorer tool toohelp you templatize hello resource group.</span></span>

### <a name="deploy-tooazure-button"></a><span data-ttu-id="2b067-135">TooAzure bouton déployer</span><span class="sxs-lookup"><span data-stu-id="2b067-135">Deploy tooAzure button</span></span>
<span data-ttu-id="2b067-136">Si vous utilisez GitHub pour le contrôle de code source, vous pouvez placer un [déployer tooAzure bouton](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) dans votre fichier Lisez-moi. MD, ce qui permet une tooAzure de l’interface utilisateur du déploiement de clés en main.</span><span class="sxs-lookup"><span data-stu-id="2b067-136">If you use GitHub for source control, you can put a [Deploy tooAzure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI tooAzure.</span></span> <span data-ttu-id="2b067-137">Pendant que vous pouvez le faire pour n’importe quelle application web simple, vous pouvez étendre cette tooenable déploiement d’un groupe de ressources entière en plaçant un fichier azuredeploy.json dans la racine du référentiel hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-137">While you can do this for any simple web app, you can extend this tooenable deploying an entire resource group by putting an azuredeploy.json file in hello repository root.</span></span> <span data-ttu-id="2b067-138">Ce fichier JSON, qui contient le modèle de groupe de ressources hello, sera utilisé par groupe de ressources hello déployer tooAzure bouton toocreate hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-138">This JSON file, which contains hello resource group template, will be used by hello Deploy tooAzure button toocreate hello resource group.</span></span> <span data-ttu-id="2b067-139">Pour obtenir un exemple, consultez hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) exemple, que vous utiliserez dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="2b067-139">For an example, see hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-hello-sample-resource-group-template"></a><span data-ttu-id="2b067-140">Obtenir le modèle de groupe de ressources exemple hello</span><span class="sxs-lookup"><span data-stu-id="2b067-140">Get hello sample resource group template</span></span>
<span data-ttu-id="2b067-141">Passons tooit droite maintenant.</span><span class="sxs-lookup"><span data-stu-id="2b067-141">So now let’s get right tooit.</span></span>

1. <span data-ttu-id="2b067-142">Accédez toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) exemple de Service d’applications.</span><span class="sxs-lookup"><span data-stu-id="2b067-142">Navigate toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="2b067-143">Dans readme.md, cliquez sur **déployer tooAzure**.</span><span class="sxs-lookup"><span data-stu-id="2b067-143">In readme.md, click **Deploy tooAzure**.</span></span>
3. <span data-ttu-id="2b067-144">Vous êtes dirigé toohello [à déployer sur azure](https://deploy.azure.com) site et les paramètres de déploiement tooinput posées.</span><span class="sxs-lookup"><span data-stu-id="2b067-144">You’re taken toohello [deploy-to-azure](https://deploy.azure.com) site and asked tooinput deployment parameters.</span></span> <span data-ttu-id="2b067-145">Notez que la plupart des champs de hello est renseignée avec le nom du référentiel hello et certaines chaînes aléatoires pour vous.</span><span class="sxs-lookup"><span data-stu-id="2b067-145">Notice that most of hello fields are populated with hello repository name and some random strings for you.</span></span> <span data-ttu-id="2b067-146">Vous pouvez modifier tous les champs hello si vous le souhaitez, mais hello uniquement choses tooenter connexion d’administration de SQL Server hello et mot de passe de hello, puis cliquez sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="2b067-146">You can change all hello fields if you want, but hello only things you have tooenter are hello SQL Server administrative login and hello password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="2b067-147">Ensuite, cliquez sur **déployer** processus de déploiement toostart hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-147">Next, click **Deploy** toostart hello deployment process.</span></span> <span data-ttu-id="2b067-148">Une fois le processus de hello exécute toocompletion, cliquez sur hello http://todoapp*XXXX*. hello de toobrowse azurewebsites.net lien déployé l’application.</span><span class="sxs-lookup"><span data-stu-id="2b067-148">Once hello process runs toocompletion, click hello http://todoapp*XXXX*.azurewebsites.net link toobrowse hello deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="2b067-149">Hello UI serait un peu lent lorsque vous parcourez d’abord tooit car hello applications sont en cours de démarrage, mais vous inciter à qu’il s’agit d’une application entièrement fonctionnelle.</span><span class="sxs-lookup"><span data-stu-id="2b067-149">hello UI would be a little slow when you first browse tooit because hello apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="2b067-150">Dans la page de déploiement hello, cliquez sur hello **gérer** lien toosee hello nouvelle application Bonjour portail Azure.</span><span class="sxs-lookup"><span data-stu-id="2b067-150">Back in hello Deploy page, click hello **Manage** link toosee hello new application in hello Azure Portal.</span></span>
6. <span data-ttu-id="2b067-151">Bonjour **Essentials** liste déroulante, cliquez sur le lien de groupe de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-151">In hello **Essentials** dropdown, click hello resource group link.</span></span> <span data-ttu-id="2b067-152">Notez également que l’application hello web est déjà connecté référentiel GitHub de toohello sous **projet externe**.</span><span class="sxs-lookup"><span data-stu-id="2b067-152">Note also that hello web app is already connected toohello GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="2b067-153">Dans le panneau des ressources de groupe hello, notez qu’il existe déjà deux applications web et une base de données SQL dans un groupe de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-153">In hello resource group blade, note that there are already two web apps and one SQL Database in hello resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="2b067-154">Tout ce que vous venez de voir dans quelques minutes est une application entièrement déployé deux-microservice, avec tous les composants de hello, dépendances, paramètres, de base de données et publication continue, définie par une orchestration automatisée dans Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="2b067-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all hello components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="2b067-155">Tout cela a été possible grâce à deux éléments :</span><span class="sxs-lookup"><span data-stu-id="2b067-155">All this was done by two things:</span></span>

* <span data-ttu-id="2b067-156">bouton de tooAzure Hello déployer</span><span class="sxs-lookup"><span data-stu-id="2b067-156">hello Deploy tooAzure button</span></span>
* <span data-ttu-id="2b067-157">azuredeploy.JSON dans la racine du dépôt hello</span><span class="sxs-lookup"><span data-stu-id="2b067-157">azuredeploy.json in hello repo root</span></span>

<span data-ttu-id="2b067-158">Vous pouvez déployer cette application même des dizaines, des centaines voire des milliers de fois et avoir hello exacte même configuration chaque fois.</span><span class="sxs-lookup"><span data-stu-id="2b067-158">You can deploy this same application tens, hundreds, or thousands of times and have hello exact same configuration every time.</span></span> <span data-ttu-id="2b067-159">prévisibilité de répétabilité et hello Hello de cette approche vous permet des applications à grande échelle toodeploy avec facilité et en toute confiance.</span><span class="sxs-lookup"><span data-stu-id="2b067-159">hello repeatability and hello predictability of this approach enables you toodeploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="2b067-160">Examiner ou modifier le fichier AZUREDEPLOY.JSON</span><span class="sxs-lookup"><span data-stu-id="2b067-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="2b067-161">Maintenant nous allons voir comment référentiel GitHub de hello a été configuré.</span><span class="sxs-lookup"><span data-stu-id="2b067-161">Now let’s look at how hello GitHub repository was set up.</span></span> <span data-ttu-id="2b067-162">Vous utiliserez l’éditeur JSON hello Bonjour Azure .NET SDK, donc si vous n’avez pas déjà installé [Azure .NET SDK 2.6](/downloads/), faites-le maintenant.</span><span class="sxs-lookup"><span data-stu-id="2b067-162">You will be using hello JSON editor in hello Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="2b067-163">Hello du clone [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) référentiel à l’aide de votre outil préféré git.</span><span class="sxs-lookup"><span data-stu-id="2b067-163">Clone hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="2b067-164">Dans la capture d’écran de hello ci-dessous, je fais cela Bonjour Team Explorer dans Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="2b067-164">In hello screenshot below, I’m doing this in hello Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="2b067-165">À partir de la racine du référentiel hello, ouvrez azuredeploy.json dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2b067-165">From hello repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="2b067-166">Si vous ne voyez pas volet Structure JSON de hello, vous devez tooinstall Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="2b067-166">If you don’t see hello JSON Outline pane, you need tooinstall Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="2b067-167">Je ne suis pas continu toodescribe tous les détails du format JSON de hello, mais hello [plus de ressources](#resources) section comprend des liens pour apprendre le langage de modèle de groupe de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-167">I’m not going toodescribe every detail of hello JSON format, but hello [More Resources](#resources) section has links for learning hello resource group template language.</span></span> <span data-ttu-id="2b067-168">Ici, je vais juste tooshow vous hello intéressant de fonctionnalités qui peuvent vous aider à démarrer dans la création de votre propre modèle personnalisé pour le déploiement de l’application.</span><span class="sxs-lookup"><span data-stu-id="2b067-168">Here, I’m just going tooshow you hello interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="2b067-169">Paramètres</span><span class="sxs-lookup"><span data-stu-id="2b067-169">Parameters</span></span>
<span data-ttu-id="2b067-170">Examinons hello paramètres section toosee que la plupart de ces paramètres est le hello **déployer tooAzure** bouton vous invite tooinput.</span><span class="sxs-lookup"><span data-stu-id="2b067-170">Take a look at hello parameters section toosee that most of these parameters are what hello **Deploy tooAzure** button prompts you tooinput.</span></span> <span data-ttu-id="2b067-171">site Hello derrière hello **déployer tooAzure** bouton remplit hello entrée l’interface utilisateur à l’aide de paramètres de hello définis dans azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="2b067-171">hello site behind hello **Deploy tooAzure** button populates hello input UI using hello parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="2b067-172">Ces paramètres sont utilisés dans l’ensemble de définitions de ressource hello, telles que les noms de ressources, les valeurs de propriété, etc..</span><span class="sxs-lookup"><span data-stu-id="2b067-172">These parameters are used throughout hello resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="2b067-173">Ressources</span><span class="sxs-lookup"><span data-stu-id="2b067-173">Resources</span></span>
<span data-ttu-id="2b067-174">Dans le nœud de ressources hello, vous pouvez voir que les ressources de niveau supérieur 4 sont définies, notamment une instance de SQL Server, un plan App Service et les deux applications web.</span><span class="sxs-lookup"><span data-stu-id="2b067-174">In hello resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="2b067-175">Plan App Service</span><span class="sxs-lookup"><span data-stu-id="2b067-175">App Service plan</span></span>
<span data-ttu-id="2b067-176">Commençons par une ressource de niveau racine simple Bonjour JSON.</span><span class="sxs-lookup"><span data-stu-id="2b067-176">Let’s start with a simple root-level resource in hello JSON.</span></span> <span data-ttu-id="2b067-177">Bonjour structure JSON, cliquez sur le plan de Service de l’application hello nommé **[hostingPlanName]** toohighlight hello code JSON correspondant.</span><span class="sxs-lookup"><span data-stu-id="2b067-177">In hello JSON Outline, click hello App Service plan named **[hostingPlanName]** toohighlight hello corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="2b067-178">Notez que hello `type` élément spécifie la chaîne hello pour un plan App Service (elle a été appelée une batterie de serveurs fois long, long il y a), et d’autres éléments et propriétés sont renseignées à l’aide de paramètres hello définis dans le fichier JSON de hello cette ressource n’est pas toutes les ressources imbriquées.</span><span class="sxs-lookup"><span data-stu-id="2b067-178">Note that hello `type` element specifies hello string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using hello parameters defined in hello JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="2b067-179">Notez également que hello de `apiVersion` indique à Azure, version de définition ressource hello API REST toouse hello JSON avec et il peut affecter la façon dont les ressources hello doivent être formatés à l’intérieur de hello `{}`.</span><span class="sxs-lookup"><span data-stu-id="2b067-179">Note also that hello value of `apiVersion` tells Azure which version of hello REST API toouse hello JSON resource definition with, and it can affect how hello resource should be formatted inside hello `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="2b067-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="2b067-180">SQL Server</span></span>
<span data-ttu-id="2b067-181">Ensuite, cliquez sur les ressources de SQL Server hello nommé **SQLServer** Bonjour structure JSON.</span><span class="sxs-lookup"><span data-stu-id="2b067-181">Next, click on hello SQL Server resource named **SQLServer** in hello JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="2b067-182">Hello Remarque suivant sur hello mis en surbrillance le code JSON :</span><span class="sxs-lookup"><span data-stu-id="2b067-182">Note hello following about hello highlighted JSON code:</span></span>

* <span data-ttu-id="2b067-183">utilisation Hello de paramètres garantit hello créé sont nommés et des ressources configurées de manière à ce qui les rend cohérent avec l’autre.</span><span class="sxs-lookup"><span data-stu-id="2b067-183">hello use of parameters ensures that hello created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="2b067-184">Hello SQLServer ressources a deux ressources imbriquées, chacune une valeur différente pour `type`.</span><span class="sxs-lookup"><span data-stu-id="2b067-184">hello SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="2b067-185">Hello imbriqués de ressources à l’intérieur de `“resources”: […]`, où la base de données hello et règles de pare-feu hello sont définis, ont un `dependsOn` élément qui spécifie l’ID de ressource de hello de ressources de SQL Server au niveau racine hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-185">hello nested resources inside `“resources”: […]`, where hello database and hello firewall rules are defined, have a `dependsOn` element that specifies hello resource ID of hello root-level SQLServer resource.</span></span> <span data-ttu-id="2b067-186">Cela indique à Azure Resource Manager, « avant de créer cette ressource, qui doit exister d’autres ressources ; Si cet autre ressource est définie dans le modèle de hello, puis créez un tout d’abord ».</span><span class="sxs-lookup"><span data-stu-id="2b067-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in hello template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="2b067-187">Pour plus d’informations sur la façon de toouse hello `resourceId()` , consultez [fonctions de modèle Azure Resource Manager](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="2b067-187">For detailed information on how toouse hello `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="2b067-188">Hello effet Hello `dependsOn` élément est que Azure Resource Manager peut connaître les ressources qui peuvent être créés en parallèle et les ressources qui doivent être créés de façon séquentielle.</span><span class="sxs-lookup"><span data-stu-id="2b067-188">hello effect of hello `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="2b067-189">Application web</span><span class="sxs-lookup"><span data-stu-id="2b067-189">Web app</span></span>
<span data-ttu-id="2b067-190">À présent, intéressons-nous toohello réel applications web eux-mêmes, qui sont plus complexes.</span><span class="sxs-lookup"><span data-stu-id="2b067-190">Now, let’s move on toohello actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="2b067-191">Cliquez sur application web hello [variables('apiSiteName')] hello structure JSON toohighlight son code JSON.</span><span class="sxs-lookup"><span data-stu-id="2b067-191">Click hello [variables(‘apiSiteName’)] web app in hello JSON Outline toohighlight its JSON code.</span></span> <span data-ttu-id="2b067-192">Vous pouvez constater que cela devient nettement plus intéressant.</span><span class="sxs-lookup"><span data-stu-id="2b067-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="2b067-193">Pour cela, je vous parlerai de fonctionnalités de hello un par un :</span><span class="sxs-lookup"><span data-stu-id="2b067-193">For this purpose, I’ll talk about hello features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="2b067-194">Ressource racine</span><span class="sxs-lookup"><span data-stu-id="2b067-194">Root resource</span></span>
<span data-ttu-id="2b067-195">l’application Hello web dépend de deux ressources différentes.</span><span class="sxs-lookup"><span data-stu-id="2b067-195">hello web app depends on two different resources.</span></span> <span data-ttu-id="2b067-196">Cela signifie que Azure Resource Manager créera hello web application uniquement après les deux hello hello instance SQL Server et un plan App Service sont créés.</span><span class="sxs-lookup"><span data-stu-id="2b067-196">This means that Azure Resource Manager will create hello web app only after both hello App Service plan and hello SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="2b067-197">Paramètres de l’application</span><span class="sxs-lookup"><span data-stu-id="2b067-197">App settings</span></span>
<span data-ttu-id="2b067-198">paramètres de l’application Hello sont également définis comme une ressource imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2b067-198">hello app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="2b067-199">Bonjour `properties` élément `config/appsettings`, vous avez deux paramètres de l’application au format de hello `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="2b067-199">In hello `properties` element for `config/appsettings`, you have two app settings in hello format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="2b067-200">`PROJECT`est un [paramètre de KUDU](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) qui indique à déploiement d’Azure qui toouse de projet dans une solution Visual Studio à projets multiples.</span><span class="sxs-lookup"><span data-stu-id="2b067-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project toouse in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="2b067-201">Je vous montrerai ultérieurement la configuration de contrôle de code source, mais puisque hello ToDoApp code est dans une solution Visual Studio à projets multiples, nous avons besoin de ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="2b067-201">I will show you later how source control is configured, but since hello ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="2b067-202">`clientUrl`est simplement une application définissant ce code de l’application hello utilise.</span><span class="sxs-lookup"><span data-stu-id="2b067-202">`clientUrl` is simply an app setting that hello application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="2b067-203">Chaînes de connexion</span><span class="sxs-lookup"><span data-stu-id="2b067-203">Connection strings</span></span>
<span data-ttu-id="2b067-204">chaînes de connexion Hello sont également définis comme une ressource imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2b067-204">hello connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="2b067-205">Bonjour `properties` élément `config/connectionstrings`, chaque chaîne de connexion est également définie comme une paire nom-valeur, avec format spécifique de hello de `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="2b067-205">In hello `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with hello specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="2b067-206">Pourquoi `type` élément, les valeurs possibles sont `MySql`, `SQLServer`, `SQLAzure`, et `Custom`.</span><span class="sxs-lookup"><span data-stu-id="2b067-206">For hello `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="2b067-207">Pour obtenir une liste définitive des types de chaîne de connexion hello, exécutez hello commande dans Azure PowerShell suivante : \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="2b067-207">For a definitive list of hello connection string types, run hello following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="2b067-208">Contrôle de code source</span><span class="sxs-lookup"><span data-stu-id="2b067-208">Source control</span></span>
<span data-ttu-id="2b067-209">paramètres de contrôle de source de Hello sont également définis comme une ressource imbriquée.</span><span class="sxs-lookup"><span data-stu-id="2b067-209">hello source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="2b067-210">Le Gestionnaire de ressources Azure utilise cette ressource tooconfigure continue la publication (consultez garde sur `IsManualIntegration` ultérieurement) et également tookick off déploiement hello du code d’application automatiquement lors du traitement de hello du fichier JSON de hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-210">Azure Resource Manager uses this resource tooconfigure continuous publishing (see caveat on `IsManualIntegration` later) and also tookick off hello deployment of application code automatically during hello processing of hello JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="2b067-211">`RepoUrl`et `branch` doit être très intuitive et doit pointer le nom de référentiel et hello de Git de toopublish de branche hello de toohello.</span><span class="sxs-lookup"><span data-stu-id="2b067-211">`RepoUrl` and `branch` should be pretty intuitive and should point toohello Git repository and hello name of hello branch toopublish from.</span></span> <span data-ttu-id="2b067-212">Là encore, ces éléments sont définis par les paramètres d’entrée.</span><span class="sxs-lookup"><span data-stu-id="2b067-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="2b067-213">Remarque Bonjour `dependsOn` élément qui, dans Ajout toohello web des ressources d’application lui-même, `sourcecontrols/web` dépend également `config/appsettings` et `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="2b067-213">Note in hello `dependsOn` element that, in addition toohello web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="2b067-214">Il s’agit, car une fois que `sourcecontrols/web` est configuré, hello processus de déploiement Azure tentera automatiquement toodeploy, générer et démarrer le code de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-214">This is because once `sourcecontrols/web` is configured, hello Azure deployment process will automatically attempt toodeploy, build, and start hello application code.</span></span> <span data-ttu-id="2b067-215">Par conséquent, insertion de cette aide de dépendance pour vous assurer cette application hello a accès aux paramètres de l’application toohello requises et les chaînes de connexion avant l’exécution de code de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-215">Therefore, inserting this dependency helps you make sure that hello application has access toohello required app settings and connection strings before hello application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="2b067-216">Notez également que `IsManualIntegration` est défini trop`true`.</span><span class="sxs-lookup"><span data-stu-id="2b067-216">Note also that `IsManualIntegration` is set too`true`.</span></span> <span data-ttu-id="2b067-217">Cette propriété est nécessaire dans ce didacticiel, car vous ne possédez pas réellement le référentiel GitHub de hello et par conséquent ne peut pas réellement accorder l’autorisation tooAzure tooconfigure publication en continu à partir de [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (c'est-à-dire push automatique tooAzure de mises à jour du référentiel).</span><span class="sxs-lookup"><span data-stu-id="2b067-217">This property is necessary in this tutorial because you do not actually own hello GitHub repository, and thus cannot actually grant permission tooAzure tooconfigure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e. push automatic repository updates tooAzure).</span></span> <span data-ttu-id="2b067-218">Vous pouvez utiliser la valeur par défaut de hello `false` du référentiel spécifié de hello uniquement si vous avez configuré des informations d’identification de GitHub du propriétaire hello Bonjour [portail Azure](https://portal.azure.com/) avant.</span><span class="sxs-lookup"><span data-stu-id="2b067-218">You can use hello default value `false` for hello specified repository only if you have configured hello owner’s GitHub credentials in hello [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="2b067-219">En d’autres termes, si vous avez configuré tooGitHub de contrôle de code source ou BitBucket pour n’importe quelle application Bonjour [portail Azure](https://portal.azure.com/) précédemment, à l’aide de l’utilisateur des informations d’identification, puis Windows Azure n’oubliez pas d’informations d’identification hello et les utiliser à chaque fois que vous déployez une application GitHub ou BitBucket Bonjour futures.</span><span class="sxs-lookup"><span data-stu-id="2b067-219">In other words, if you have set up source control tooGitHub or BitBucket for any app in hello [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember hello credentials and use them whenever you deploy any app from GitHub or BitBucket in hello future.</span></span> <span data-ttu-id="2b067-220">Toutefois, si vous n’avez pas encore fait, déploiement de modèle de JSON hello échoue quand Azure Resource Manager tente de paramètres de contrôle de source de l’application web tooconfigure hello, car il ne peut pas se connecter à GitHub ou BitBucket avec les informations d’identification du propriétaire du référentiel hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-220">However, if you haven’t done this already, deployment of hello JSON template will fail when Azure Resource Manager tries tooconfigure hello web app’s source control settings because it cannot log into GitHub or BitBucket with hello repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-hello-json-template-with-deployed-resource-group"></a><span data-ttu-id="2b067-221">Comparer le modèle JSON hello avec le groupe de ressources déployées</span><span class="sxs-lookup"><span data-stu-id="2b067-221">Compare hello JSON template with deployed resource group</span></span>
<span data-ttu-id="2b067-222">Ici, vous pouvez faire défiler les panneaux de l’application de tous les hello web Bonjour [Azure Portal](https://portal.azure.com/), mais il existe un autre outil qui est tout aussi utile, si de pas plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="2b067-222">Here, you can go through all hello web app’s blades in hello [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="2b067-223">Accédez toohello [Explorateur de ressources Azure](https://resources.azure.com) outil Aperçu, ce qui permet une représentation JSON de tous les groupes de ressources hello dans vos abonnements, tels qu’ils existent réellement Bonjour Azure principal.</span><span class="sxs-lookup"><span data-stu-id="2b067-223">Go toohello [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all hello resource groups in your subscriptions, as they actually exist in hello Azure backend.</span></span> <span data-ttu-id="2b067-224">Vous pouvez également voir comment hiérarchie JSON du groupe de ressources hello dans Azure correspond à la hiérarchie de hello dans le fichier de modèle de hello qui a utilisé toocreate il.</span><span class="sxs-lookup"><span data-stu-id="2b067-224">You can also see how hello resource group’s JSON hierarchy in Azure corresponds with hello hierarchy in hello template file that’s used toocreate it.</span></span>

<span data-ttu-id="2b067-225">Par exemple, lorsque vous accédez toohello [Explorateur de ressources Azure](https://resources.azure.com) outil et développez les nœuds dans l’Explorateur de hello Bonjour, je peux voir le groupe de ressources hello et ressources de niveau racine hello qui sont collectées sous leurs types de ressources respectives.</span><span class="sxs-lookup"><span data-stu-id="2b067-225">For example, when I go toohello [Azure Resource Explorer](https://resources.azure.com) tool and expand hello nodes in hello explorer, I can see hello resource group and hello root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="2b067-226">Si vous consultez tooa l’application web, vous devez être en mesure de toosee web application configuration détails de toohello de similaire capture d’écran ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="2b067-226">If you drill down tooa web app, you should be able toosee web app configuration details similar toohello below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="2b067-227">Là encore, hello ressources imbriquées doivent avoir un toothose très similaires de hiérarchie dans votre fichier de modèle JSON, et vous devez voir les paramètres de l’application hello, les chaînes de connexion, etc., correctement reflétées dans le volet JSON hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-227">Again, hello nested resources should have a hierarchy very similar toothose in your JSON template file, and you should see hello app settings, connection strings, etc., properly reflected in hello JSON pane.</span></span> <span data-ttu-id="2b067-228">absence de Hello de paramètres ici peut indiquer un problème avec votre fichier JSON et peut vous aider à résoudre les problèmes de votre fichier de modèle JSON.</span><span class="sxs-lookup"><span data-stu-id="2b067-228">hello absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-hello-resource-group-template-yourself"></a><span data-ttu-id="2b067-229">Déploiement de modèle de groupe de ressources hello</span><span class="sxs-lookup"><span data-stu-id="2b067-229">Deploy hello resource group template yourself</span></span>
<span data-ttu-id="2b067-230">Hello **déployer tooAzure** bouton est très utile, mais il vous permet de modèle de groupe de ressources toodeploy hello dans azuredeploy.json uniquement si vous avez déjà poussé azuredeploy.json tooGitHub.</span><span class="sxs-lookup"><span data-stu-id="2b067-230">hello **Deploy tooAzure** button is great, but it allows you toodeploy hello resource group template in azuredeploy.json only if you have already pushed azuredeploy.json tooGitHub.</span></span> <span data-ttu-id="2b067-231">Hello Kit de développement .NET Azure fournit également des outils de hello pour vous toodeploy un fichier de modèle JSON directement à partir de votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="2b067-231">hello Azure .NET SDK also provides hello tools for you toodeploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="2b067-232">toodo, suit hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="2b067-232">toodo this, follow hello steps below:</span></span>

1. <span data-ttu-id="2b067-233">Dans Visual Studio, cliquez sur **Fichier** > **Nouveau** > **Projet**.</span><span class="sxs-lookup"><span data-stu-id="2b067-233">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="2b067-234">Cliquez sur **Visual C#** > **Cloud** > **Groupe de ressources Azure**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2b067-234">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="2b067-235">Dans **Sélectionner un modèle Azure**, choisissez **Modèle vide** et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="2b067-235">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="2b067-236">Faire glisser azuredeploy.json hello **modèle** dossier de votre nouveau projet.</span><span class="sxs-lookup"><span data-stu-id="2b067-236">Drag azuredeploy.json into hello **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="2b067-237">À partir de l’Explorateur de solutions, ouvrez hello copié azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="2b067-237">From Solution Explorer, open hello copied azuredeploy.json.</span></span>
6. <span data-ttu-id="2b067-238">Uniquement par souci de hello de démonstration de hello, nous allons ajouter certains standard Application Insight tooour JSON fichier de ressources en cliquant sur **ajouter une ressource**.</span><span class="sxs-lookup"><span data-stu-id="2b067-238">Just for hello sake of hello demonstration, let’s add some standard Application Insight resources tooour JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="2b067-239">Si vous êtes simplement intéressé de déploiement du fichier JSON de hello, ignorer toohello déployer comme suit.</span><span class="sxs-lookup"><span data-stu-id="2b067-239">If you’re just interested in deploying hello JSON file, skip toohello deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="2b067-240">Sélectionnez **Application Insights pour les applications web**, puis assurez-vous qu’un plan App Service existant et une application web sont sélectionnés, puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="2b067-240">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="2b067-241">Vous devez maintenant être en mesure de toosee de nouvelles ressources que, selon les ressources hello et ce qu’il fait, ont des dépendances sur l’application web de plan ou hello App Service hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-241">You’ll now be able toosee several new resources that, depending on hello resource and what it does, have dependencies on either hello App Service plan or hello web app.</span></span> <span data-ttu-id="2b067-242">Ces ressources ne sont pas activées par leur définition existante et que vous allez toochange qui.</span><span class="sxs-lookup"><span data-stu-id="2b067-242">These resources are not enabled by their existing definition and you’re going toochange that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="2b067-243">Bonjour structure JSON, cliquez sur **appInsights mise à l’échelle** toohighlight son code JSON.</span><span class="sxs-lookup"><span data-stu-id="2b067-243">In hello JSON Outline, click **appInsights AutoScale** toohighlight its JSON code.</span></span> <span data-ttu-id="2b067-244">Il s’agit de hello mise à l’échelle de paramètre pour votre plan App Service.</span><span class="sxs-lookup"><span data-stu-id="2b067-244">This is hello scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="2b067-245">Dans l’hello code JSON en surbrillance, recherchez hello `location` et `enabled` propriétés et de les définir comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2b067-245">In hello highlighted JSON code, locate hello `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="2b067-246">Bonjour structure JSON, cliquez sur **CPUHigh appInsights** toohighlight son code JSON.</span><span class="sxs-lookup"><span data-stu-id="2b067-246">In hello JSON Outline, click **CPUHigh appInsights** toohighlight its JSON code.</span></span> <span data-ttu-id="2b067-247">Il s’agit d’une alerte.</span><span class="sxs-lookup"><span data-stu-id="2b067-247">This is an alert.</span></span>
11. <span data-ttu-id="2b067-248">Recherchez hello `location` et `isEnabled` propriétés et de les définir comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2b067-248">Locate hello `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="2b067-249">Hello même hello pour les autres trois alertes (ampoules violets).</span><span class="sxs-lookup"><span data-stu-id="2b067-249">Do hello same for hello other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="2b067-250">Vous êtes maintenant prêt toodeploy.</span><span class="sxs-lookup"><span data-stu-id="2b067-250">You’re now ready toodeploy.</span></span> <span data-ttu-id="2b067-251">Droit hello projet, puis sélectionnez **déployer** > **nouveau déploiement**.</span><span class="sxs-lookup"><span data-stu-id="2b067-251">Right-click hello project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="2b067-252">Le cas échéant, connectez-vous à votre compte Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="2b067-252">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="2b067-253">Sélectionnez un groupe de ressources dans votre abonnement ou créez-en un nouveau, sélectionnez **azuredeploy.json**, puis cliquez sur **Modifier les paramètres**.</span><span class="sxs-lookup"><span data-stu-id="2b067-253">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="2b067-254">Vous allez maintenant être tooedit en mesure de tous les paramètres de hello définis dans le fichier de modèle hello dans une table complète.</span><span class="sxs-lookup"><span data-stu-id="2b067-254">You’ll now be able tooedit all hello parameters defined in hello template file in a nice table.</span></span> <span data-ttu-id="2b067-255">Les paramètres qui définissent des valeurs par défaut présentent déjà des valeurs par défaut, et ceux qui définissent une liste de valeurs autorisées s’affichent en tant que listes déroulantes.</span><span class="sxs-lookup"><span data-stu-id="2b067-255">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="2b067-256">Renseignez tous les paramètres vide hello et utilisez hello [adresse référentiel GitHub ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) dans **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="2b067-256">Fill in all hello empty parameters, and use hello [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="2b067-257">Ensuite, cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="2b067-257">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="2b067-258">Échelle automatique est une fonctionnalité proposée dans **Standard** niveau ou supérieure et au niveau du plan les alertes sont les fonctionnalités offertes par les **base** niveau ou une version ultérieure, vous devez tooset hello **référence (SKU)** paramètre trop**Standard** ou **Premium** commander toosee toutes les votre nouvelle application Insights ressources allument.</span><span class="sxs-lookup"><span data-stu-id="2b067-258">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need tooset hello **sku** parameter too**Standard** or **Premium** in order toosee all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="2b067-259">Cliquez sur **Déployer**.</span><span class="sxs-lookup"><span data-stu-id="2b067-259">Click **Deploy**.</span></span> <span data-ttu-id="2b067-260">Si vous avez sélectionné **enregistrer les mots de passe**, mot de passe hello est enregistré dans le fichier de paramètres hello **en texte brut**.</span><span class="sxs-lookup"><span data-stu-id="2b067-260">If you selected **Save passwords**, hello password will be saved in hello parameter file **in plain text**.</span></span> <span data-ttu-id="2b067-261">Dans le cas contraire, vous êtes invité mot de passe de base de données tooinput hello pendant le processus de déploiement hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-261">Otherwise, you’ll be asked tooinput hello database password during hello deployment process.</span></span>

<span data-ttu-id="2b067-262">Et voilà !</span><span class="sxs-lookup"><span data-stu-id="2b067-262">That’s it!</span></span> <span data-ttu-id="2b067-263">Maintenant vous devez simplement toogo toohello [Azure Portal](https://portal.azure.com/) et hello [Explorateur de ressources Azure](https://resources.azure.com) outil toosee hello nouvelles alertes et des paramètres de la mise à l’échelle ajoutés tooyour JSON déployé l’application.</span><span class="sxs-lookup"><span data-stu-id="2b067-263">Now you just need toogo toohello [Azure Portal](https://portal.azure.com/) and hello [Azure Resource Explorer](https://resources.azure.com) tool toosee hello new alerts and autoscale settings added tooyour JSON deployed application.</span></span>

<span data-ttu-id="2b067-264">Les étapes de cette section effectue principalement suivant de hello :</span><span class="sxs-lookup"><span data-stu-id="2b067-264">Your steps in this section mainly accomplished hello following:</span></span>

1. <span data-ttu-id="2b067-265">Fichier de modèle hello préparée</span><span class="sxs-lookup"><span data-stu-id="2b067-265">Prepared hello template file</span></span>
2. <span data-ttu-id="2b067-266">Créé un toogo de fichier de paramètres avec le fichier de modèle hello</span><span class="sxs-lookup"><span data-stu-id="2b067-266">Created a parameter file toogo with hello template file</span></span>
3. <span data-ttu-id="2b067-267">Fichier de modèle hello déployé avec le fichier de paramètres hello</span><span class="sxs-lookup"><span data-stu-id="2b067-267">Deployed hello template file with hello parameter file</span></span>

<span data-ttu-id="2b067-268">dernière étape de Hello est facilement effectué par une applet de commande PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2b067-268">hello last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="2b067-269">toosee ce que fait Visual Studio lors du déploiement de votre application, ouvrez Scripts\Deploy-azureresourcegroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="2b067-269">toosee what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="2b067-270">Il y a beaucoup de code, mais je vais juste toohighlight tout code hello pertinentes vous avez besoin de fichier de modèle hello toodeploy avec le fichier de paramètres hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-270">There’s a lot of code there, but I’m just going toohighlight all hello pertinent code you need toodeploy hello template file with hello parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="2b067-271">Hello dernière applet de commande, `New-AzureResourceGroup`, est hello qui effectue les actions hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-271">hello last cmdlet, `New-AzureResourceGroup`, is hello one that actually performs hello action.</span></span> <span data-ttu-id="2b067-272">Tout cela doit montrer tooyou, avec l’aide de hello d’outils, il est relativement simple toodeploy votre application de cloud computing comme prévu.</span><span class="sxs-lookup"><span data-stu-id="2b067-272">All this should demonstrate tooyou that, with hello help of tooling, it is relatively straightforward toodeploy your cloud application predictably.</span></span> <span data-ttu-id="2b067-273">Chaque fois que vous exécutez l’applet de commande hello sur hello même modèle avec hello même fichier de paramètres, vous allez tooget hello même résultat.</span><span class="sxs-lookup"><span data-stu-id="2b067-273">Every time you run hello cmdlet on hello same template with hello same parameter file, you’re going tooget hello same result.</span></span>

## <a name="summary"></a><span data-ttu-id="2b067-274">Résumé</span><span class="sxs-lookup"><span data-stu-id="2b067-274">Summary</span></span>
<span data-ttu-id="2b067-275">Dans DevOps, répétabilité et la prévisibilité sont des clés tooany réussir le déploiement d’une application à grande échelle composé de microservices.</span><span class="sxs-lookup"><span data-stu-id="2b067-275">In DevOps, repeatability and predictability are keys tooany successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="2b067-276">Dans ce didacticiel, vous avez déployé un tooAzure d’application deux-microservice en tant qu’un seul groupe de ressources à l’aide du modèle de gestionnaire de ressources Azure hello.</span><span class="sxs-lookup"><span data-stu-id="2b067-276">In this tutorial, you have deployed a two-microservice application tooAzure as a single resource group using hello Azure Resource Manager template.</span></span> <span data-ttu-id="2b067-277">Heureusement, il vous a donné hello connaissances que vous avez besoin dans toostart commande consiste à convertir votre application dans Azure dans un modèle et pouvez configurer et déployer de manière prévisible.</span><span class="sxs-lookup"><span data-stu-id="2b067-277">Hopefully, it has given you hello knowledge you need in order toostart converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="2b067-278">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="2b067-278">Next Steps</span></span>
<span data-ttu-id="2b067-279">Découvrez comment trop[appliquer les méthodologies agiles et en permanence publier votre application microservices avec facilité](app-service-agile-software-development.md) et gestion avancée des techniques de déploiement comme [version d’évaluation de déploiement](app-service-web-test-in-production-controlled-test-flight.md) facilement.</span><span class="sxs-lookup"><span data-stu-id="2b067-279">Find out how too[apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="2b067-280">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="2b067-280">More resources</span></span>
* [<span data-ttu-id="2b067-281">Langue du modèle Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="2b067-281">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="2b067-282">Création de modèles Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="2b067-282">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="2b067-283">Fonctions des modèles Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="2b067-283">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="2b067-284">Déploiement d’une application avec un modèle Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="2b067-284">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="2b067-285">Utilisation d’Azure PowerShell avec Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="2b067-285">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="2b067-286">Résolution des problèmes liés aux déploiements de groupes de ressources dans Azure</span><span class="sxs-lookup"><span data-stu-id="2b067-286">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

