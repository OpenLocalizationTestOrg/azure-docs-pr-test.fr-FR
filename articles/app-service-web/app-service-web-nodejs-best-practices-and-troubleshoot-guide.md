---
title: "aaaBest pratiques et guide de dépannage pour les applications du nœud sur Azure Web Apps"
description: "Découvrez hello meilleures pratiques et les étapes de dépannage pour les applications du nœud sur Azure Web Apps."
services: app-service\web
documentationcenter: nodejs
author: ranjithr
manager: wadeh
editor: 
ms.assetid: 387ea217-7910-4468-8987-9a1022a99bef
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 06/06/2016
ms.author: ranjithr
ms.openlocfilehash: 975898142a224f14df1091a46d16e9074d9e2831
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-and-troubleshooting-guide-for-node-applications-on-azure-web-apps"></a><span data-ttu-id="de3dc-103">Meilleures pratiques et guide de dépannage pour les applications node sur Azure Web Apps</span><span class="sxs-lookup"><span data-stu-id="de3dc-103">Best practices and troubleshooting guide for node applications on Azure Web Apps</span></span>
[!INCLUDE [tabs](../../includes/app-service-web-get-started-nav-tabs.md)]

<span data-ttu-id="de3dc-104">Dans cet article, vous allez apprendre hello meilleures pratiques et les étapes de résolution [applications node](app-service-web-get-started-nodejs.md) en cours d’exécution sur les applications Web de Azure (avec [iisnode](https://github.com/azure/iisnode)).</span><span class="sxs-lookup"><span data-stu-id="de3dc-104">In this article, you will learn hello best practices and troubleshooting steps for [node applications](app-service-web-get-started-nodejs.md) running on Azure Webapps (with [iisnode](https://github.com/azure/iisnode)).</span></span>

> [!WARNING]
> <span data-ttu-id="de3dc-105">Soyez vigilant lorsque vous appliquez ces étapes de dépannage sur votre site de production.</span><span class="sxs-lookup"><span data-stu-id="de3dc-105">Use caution when using troubleshooting steps on your production site.</span></span> <span data-ttu-id="de3dc-106">Il est recommandé tootroubleshoot votre application sur une production non-programme d’installation par exemple votre emplacement intermédiaire et lorsque hello est résolu, remplacez votre emplacement intermédiaire avec votre emplacement de production.</span><span class="sxs-lookup"><span data-stu-id="de3dc-106">Recommendation is tootroubleshoot your app on a non-production setup for example your staging slot and when hello issue is fixed, swap your staging slot with your production slot.</span></span>
> 
> 

## <a name="iisnode-configuration"></a><span data-ttu-id="de3dc-107">Configuration de IISNODE</span><span class="sxs-lookup"><span data-stu-id="de3dc-107">IISNODE configuration</span></span>
<span data-ttu-id="de3dc-108">Cela [fichier de schéma](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) montre tous les paramètres de hello qui peuvent être configurés pour iisnode.</span><span class="sxs-lookup"><span data-stu-id="de3dc-108">This [schema file](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) shows all hello settings that can be configured for iisnode.</span></span> <span data-ttu-id="de3dc-109">Certains paramètres de hello qui peuvent être utiles pour votre application sont :</span><span class="sxs-lookup"><span data-stu-id="de3dc-109">Some of hello settings that will be useful for your application are:</span></span>

* <span data-ttu-id="de3dc-110">nodeProcessCountPerApplication</span><span class="sxs-lookup"><span data-stu-id="de3dc-110">nodeProcessCountPerApplication</span></span>
  
    <span data-ttu-id="de3dc-111">Ce paramètre contrôle le nombre de hello de processus de nœud qui sont lancées par l’application IIS.</span><span class="sxs-lookup"><span data-stu-id="de3dc-111">This setting controls hello number of node processes that are launched per IIS application.</span></span> <span data-ttu-id="de3dc-112">La valeur par défaut est 1.</span><span class="sxs-lookup"><span data-stu-id="de3dc-112">Default value is 1.</span></span> <span data-ttu-id="de3dc-113">Vous pouvez lancer autant de node.exe en tant que le nombre de cœurs de machine virtuelle en définissant cette too0.</span><span class="sxs-lookup"><span data-stu-id="de3dc-113">You can launch as many node.exe’s as your VM core count by setting this too0.</span></span> <span data-ttu-id="de3dc-114">Valeur recommandée est 0 pour la plupart des applications, vous pouvez utiliser tous les cœurs de hello sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="de3dc-114">Recommended value is 0 for most application so you can utilize all of hello cores on your machine.</span></span> <span data-ttu-id="de3dc-115">Node.exe est le seul thread pour un node.exe consommera un maximum de 1 core et tooget maximale des performances en dehors de votre application de nœud vous souhaiteriez tooutilize tous les cœurs.</span><span class="sxs-lookup"><span data-stu-id="de3dc-115">Node.exe is single threaded so one node.exe will consume a maximum of 1 core and tooget maximum performance out of your node application you would want tooutilize all cores.</span></span>
* <span data-ttu-id="de3dc-116">nodeProcessCommandLine</span><span class="sxs-lookup"><span data-stu-id="de3dc-116">nodeProcessCommandLine</span></span>
  
    <span data-ttu-id="de3dc-117">Ce paramètre contrôle hello chemin toohello node.exe.</span><span class="sxs-lookup"><span data-stu-id="de3dc-117">This setting controls hello path toohello node.exe.</span></span> <span data-ttu-id="de3dc-118">Vous pouvez définir cette version de valeur toopoint tooyour node.exe.</span><span class="sxs-lookup"><span data-stu-id="de3dc-118">You can set this value toopoint tooyour node.exe version.</span></span>
* <span data-ttu-id="de3dc-119">maxConcurrentRequestsPerProcess</span><span class="sxs-lookup"><span data-stu-id="de3dc-119">maxConcurrentRequestsPerProcess</span></span>
  
    <span data-ttu-id="de3dc-120">Ce paramètre contrôle le nombre maximal de hello de demandes simultanées envoyé par iisnode tooeach node.exe.</span><span class="sxs-lookup"><span data-stu-id="de3dc-120">This setting controls hello maximum number of concurrent requests sent by iisnode tooeach node.exe.</span></span> <span data-ttu-id="de3dc-121">Sur les applications Web d’azure, valeur par défaut de hello est infini.</span><span class="sxs-lookup"><span data-stu-id="de3dc-121">On azure webapps, hello default value for this is Infinite.</span></span> <span data-ttu-id="de3dc-122">Vous n’aurez pas tooworry sur ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="de3dc-122">You will not have tooworry about this setting.</span></span> <span data-ttu-id="de3dc-123">En dehors d’azure WebApp, hello par défaut est 1024.</span><span class="sxs-lookup"><span data-stu-id="de3dc-123">Outside azure webapps, hello default value is 1024.</span></span> <span data-ttu-id="de3dc-124">Vous pourriez tooconfigure cela en fonction du nombre de requêtes votre application obtient et la vitesse à laquelle votre application traite chaque demande.</span><span class="sxs-lookup"><span data-stu-id="de3dc-124">You might want tooconfigure this depending on how many requests your application gets and how fast your application processes each request.</span></span>
* <span data-ttu-id="de3dc-125">maxNamedPipeConnectionRetry</span><span class="sxs-lookup"><span data-stu-id="de3dc-125">maxNamedPipeConnectionRetry</span></span>
  
    <span data-ttu-id="de3dc-126">Ce paramètre contrôle le nombre maximal de hello d’iisnode effectuera une nouvelle tentative en connexion sur hello nommée requête de canal toosend hello sur toonode.exe.</span><span class="sxs-lookup"><span data-stu-id="de3dc-126">This setting controls hello maximum number of times iisnode will retry making connection on hello named pipe toosend hello request over toonode.exe.</span></span> <span data-ttu-id="de3dc-127">Ce paramètre conjointement avec namedPipeConnectionRetryDelay détermine hello un délai d’attente total de chaque demande dans iisnode.</span><span class="sxs-lookup"><span data-stu-id="de3dc-127">This setting in combination with namedPipeConnectionRetryDelay determines hello total timeout of each request within iisnode.</span></span> <span data-ttu-id="de3dc-128">La valeur par défaut est 200 sur Azure Webapps.</span><span class="sxs-lookup"><span data-stu-id="de3dc-128">Default value is 200 on Azure Webapps.</span></span> <span data-ttu-id="de3dc-129">Délai total d’expiration en secondes = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1 000</span><span class="sxs-lookup"><span data-stu-id="de3dc-129">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
* <span data-ttu-id="de3dc-130">namedPipeConnectionRetryDelay</span><span class="sxs-lookup"><span data-stu-id="de3dc-130">namedPipeConnectionRetryDelay</span></span>
  
    <span data-ttu-id="de3dc-131">Attend que ce paramètre contrôles hello quantité iisnode de temps (en ms) entre chaque nouvelle tentative toosend demande toonode.exe sur hello canal nommé.</span><span class="sxs-lookup"><span data-stu-id="de3dc-131">This setting controls hello amount of time (in ms) iisnode will wait for between each retry toosend request toonode.exe over hello named pipe.</span></span> <span data-ttu-id="de3dc-132">La valeur par défaut est 250 ms.</span><span class="sxs-lookup"><span data-stu-id="de3dc-132">Default value is 250ms.</span></span>
    <span data-ttu-id="de3dc-133">Délai total d’expiration en secondes = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1 000</span><span class="sxs-lookup"><span data-stu-id="de3dc-133">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
  
    <span data-ttu-id="de3dc-134">Par défaut hello un délai d’attente total en iisnode sur les applications Web azure est 200 \* 250ms = 50 secondes.</span><span class="sxs-lookup"><span data-stu-id="de3dc-134">By default hello total timeout in iisnode on azure webapps is 200 \* 250ms = 50 seconds.</span></span>
* <span data-ttu-id="de3dc-135">logDirectory</span><span class="sxs-lookup"><span data-stu-id="de3dc-135">logDirectory</span></span>
  
    <span data-ttu-id="de3dc-136">Ce paramètre contrôle Active hello où iisnode enregistrera stdout/stderr.</span><span class="sxs-lookup"><span data-stu-id="de3dc-136">This setting controls hello directory where iisnode will log stdout/stderr.</span></span> <span data-ttu-id="de3dc-137">Valeur par défaut est iisnode, qui est relatif toohello script principal répertoire (où server.js principal est présent)</span><span class="sxs-lookup"><span data-stu-id="de3dc-137">Default value is iisnode which is relative toohello main script directory (directory where main server.js is present)</span></span>
* <span data-ttu-id="de3dc-138">debuggerExtensionDll</span><span class="sxs-lookup"><span data-stu-id="de3dc-138">debuggerExtensionDll</span></span>
  
    <span data-ttu-id="de3dc-139">Ce paramètre contrôle la version de node inspector qu’utilisera iisnode lors du débogage de votre application node.</span><span class="sxs-lookup"><span data-stu-id="de3dc-139">This setting controls what version of node-inspector iisnode will use when debugging your node application.</span></span> <span data-ttu-id="de3dc-140">Actuellement iisnode-inspecteur-0.7.3.dll et iisnode-inspector.dll sont hello uniquement 2 valides pour ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="de3dc-140">Currently iisnode-inspector-0.7.3.dll and iisnode-inspector.dll are hello only 2 valid values for this setting.</span></span> <span data-ttu-id="de3dc-141">La valeur par défaut est iisnode-inspector 0.7.3.dll.</span><span class="sxs-lookup"><span data-stu-id="de3dc-141">Default value is iisnode-inspector-0.7.3.dll.</span></span> <span data-ttu-id="de3dc-142">version d’iisnode-inspecteur-0.7.3.dll utilise inspecteur-nœud-0.7.3 et websockets, vous devrez donc tooenable websockets sur votre toouse webapp azure cette version.</span><span class="sxs-lookup"><span data-stu-id="de3dc-142">iisnode-inspector-0.7.3.dll version uses node-inspector-0.7.3 and uses websockets, so you will need tooenable websockets on your azure webapp toouse this version.</span></span> <span data-ttu-id="de3dc-143">Consultez <http://www.ranjithr.com/?p=98> pour plus d’informations sur comment tooconfigure iisnode toouse hello inspecteur de nœud de nouveau.</span><span class="sxs-lookup"><span data-stu-id="de3dc-143">See <http://www.ranjithr.com/?p=98> for more details on how tooconfigure iisnode toouse hello new node-inspector.</span></span>
* <span data-ttu-id="de3dc-144">flushResponse</span><span class="sxs-lookup"><span data-stu-id="de3dc-144">flushResponse</span></span>
  
    <span data-ttu-id="de3dc-145">comportement par défaut de Hello d’IIS est qu’il met en mémoire tampon des données de réponse des too4MB avant de vider les ou fin hello de réponse de hello, selon ce qui se produit en premier.</span><span class="sxs-lookup"><span data-stu-id="de3dc-145">hello default behavior of IIS is that it buffers response data up too4MB before flushing, or until hello end of hello response, whichever comes first.</span></span> <span data-ttu-id="de3dc-146">iisnode offre un paramètre toooverride ce comportement de configuration : tooflush un fragment du corps d’entité de réponse de hello dès qu’iisnode reçoit de node.exe, vous devez tooset hello iisnode/@flushResponse attribut dans web.config too'true':</span><span class="sxs-lookup"><span data-stu-id="de3dc-146">iisnode offers a configuration setting toooverride this behavior: tooflush a fragment of hello response entity body as soon as iisnode receives it from node.exe, you need tooset hello iisnode/@flushResponse attribute in web.config too'true':</span></span>
  
    ```
    <configuration>    
        <system.webServer>    
            <!-- ... -->    
            <iisnode flushResponse="true" />    
        </system.webServer>    
    </configuration>
    ```
  
    <span data-ttu-id="de3dc-147">L’activation de vidage de chaque fragment hello entité du corps de réponse ajoute une surcharge de performances qui réduit le débit du système de hello hello ~ 5 % (as of v0.1.13), donc il est mieux tooscope cette tooendpoints seul paramètre nécessitant une réponse de diffusion en continu (par exemple, à l’aide de hello <location> élément dans le fichier web.config de hello)</span><span class="sxs-lookup"><span data-stu-id="de3dc-147">Enabling flushing of every fragment of hello response entity body adds performance overhead that reduces hello throughput of hello system by ~5% (as of v0.1.13), so it is best tooscope this setting only tooendpoints that require response streaming (e.g. using hello <location> element in hello web.config)</span></span>
  
    <span data-ttu-id="de3dc-148">Dans toothis d’ajout, de diffusion en continu des applications, vous devez responseBufferLimit de jeu tooalso de votre too0 Gestionnaire d’iisnode.</span><span class="sxs-lookup"><span data-stu-id="de3dc-148">In addition toothis, for streaming applications, you will need tooalso set responseBufferLimit of your iisnode handler too0.</span></span>
  
    ```
    <handlers>    
        <add name="iisnode" path="app.js" verb="\*" modules="iisnode" responseBufferLimit="0"/>    
    </handlers>
    ```
* <span data-ttu-id="de3dc-149">watchedFiles</span><span class="sxs-lookup"><span data-stu-id="de3dc-149">watchedFiles</span></span>
  
    <span data-ttu-id="de3dc-150">Liste de fichiers séparés par des points-virgules dont les modifications feront l’objet d’une surveillance.</span><span class="sxs-lookup"><span data-stu-id="de3dc-150">This is a semi-colon separated list of files that will be watched for changes.</span></span> <span data-ttu-id="de3dc-151">Un fichier de tooa modification provoque hello application toorecycle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-151">A change tooa file causes hello application toorecycle.</span></span> <span data-ttu-id="de3dc-152">Chaque entrée se compose d’un nom de répertoire facultatif plus d’un nom de fichier requise relative toohello le répertoire où se trouve le point d’entrée principale de l’application hello sont.</span><span class="sxs-lookup"><span data-stu-id="de3dc-152">Each entry consists of an optional directory name plus required file name which are relative toohello directory where hello main application entry point is located.</span></span> <span data-ttu-id="de3dc-153">Les caractères génériques sont autorisés dans la partie de nom des fichiers de hello uniquement.</span><span class="sxs-lookup"><span data-stu-id="de3dc-153">Wild cards are allowed in hello file name portion only.</span></span> <span data-ttu-id="de3dc-154">La valeur par défaut est « \*. js;web.config ».</span><span class="sxs-lookup"><span data-stu-id="de3dc-154">Default value is “\*.js;web.config”</span></span>
* <span data-ttu-id="de3dc-155">recycleSignalEnabled</span><span class="sxs-lookup"><span data-stu-id="de3dc-155">recycleSignalEnabled</span></span>
  
    <span data-ttu-id="de3dc-156">La valeur par défaut est false.</span><span class="sxs-lookup"><span data-stu-id="de3dc-156">Default value is false.</span></span> <span data-ttu-id="de3dc-157">S’il est activé, votre application de nœud peut se connecter tooa de canal nommé (variable d’environnement IISNODE\_contrôle\_canal) et envoyer un message « recyclage ».</span><span class="sxs-lookup"><span data-stu-id="de3dc-157">If enabled, your node application can connect tooa named pipe (environment variable IISNODE\_CONTROL\_PIPE) and send a “recycle” message.</span></span> <span data-ttu-id="de3dc-158">Cela entraîne en douceur hello w3wp toorecycle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-158">This will cause hello w3wp toorecycle gracefully.</span></span>
* <span data-ttu-id="de3dc-159">idlePageOutTimePeriod</span><span class="sxs-lookup"><span data-stu-id="de3dc-159">idlePageOutTimePeriod</span></span>
  
    <span data-ttu-id="de3dc-160">La valeur par défaut est 0, ce qui signifie que cette fonctionnalité est désactivée.</span><span class="sxs-lookup"><span data-stu-id="de3dc-160">Default value is 0 which means this feature is disabled.</span></span> <span data-ttu-id="de3dc-161">Lorsque toosome valeur supérieure à 0, iisnode sera paginer de tous ses enfants traite toutes les millisecondes 'idlePageOutTimePeriod'.</span><span class="sxs-lookup"><span data-stu-id="de3dc-161">When set toosome value greater than 0, iisnode will page out all its child processes every ‘idlePageOutTimePeriod’ milliseconds.</span></span> <span data-ttu-id="de3dc-162">toounderstand page que des moyens, consultez toothis [documentation](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span><span class="sxs-lookup"><span data-stu-id="de3dc-162">toounderstand what page out means, please refer toothis [documentation](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span></span> <span data-ttu-id="de3dc-163">Ce paramètre est utile pour les applications qui consomment beaucoup de mémoire et souhaitez toopageout mémoire toodisk occasionnellement toofree de mémoire RAM.</span><span class="sxs-lookup"><span data-stu-id="de3dc-163">This setting will be useful for applications that consume a lot of memory and want toopageout memory toodisk occasionally toofree up some RAM.</span></span>

> [!WARNING]
> <span data-ttu-id="de3dc-164">Soyez prudent lors de l’activation hello suivant les paramètres de configuration sur les applications de production.</span><span class="sxs-lookup"><span data-stu-id="de3dc-164">Use caution when enabling hello following configuration settings on production applications.</span></span> <span data-ttu-id="de3dc-165">Toonot est recommandé de les activer sur les applications de production en direct.</span><span class="sxs-lookup"><span data-stu-id="de3dc-165">Recommendation is toonot enable them on live production applications.</span></span>
> 
> 

* <span data-ttu-id="de3dc-166">debugHeaderEnabled</span><span class="sxs-lookup"><span data-stu-id="de3dc-166">debugHeaderEnabled</span></span>
  
    <span data-ttu-id="de3dc-167">valeur par défaut de Hello est false.</span><span class="sxs-lookup"><span data-stu-id="de3dc-167">hello default value is false.</span></span> <span data-ttu-id="de3dc-168">Si défini tootrue, iisnode ajoutera une réponse iisnode-debug tooevery HTTP réponse d’en-tête HTTP qu’il envoie la valeur d’en-tête hello iisnode de débogage est une URL.</span><span class="sxs-lookup"><span data-stu-id="de3dc-168">If set tootrue, iisnode will add an HTTP response header iisnode-debug tooevery HTTP response it sends hello iisnode-debug header value is a URL.</span></span> <span data-ttu-id="de3dc-169">Nombre d’éléments individuels d’informations de diagnostic permettre être collectées en examinant le fragment d’URL hello, mais une quantité une meilleure visualisation est obtenue en ouvrant hello URL dans le navigateur de hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-169">Individual pieces of diagnostic information can be gleaned by looking at hello URL fragment, but a much better visualization is achieved by opening hello URL in hello browser.</span></span>
* <span data-ttu-id="de3dc-170">loggingEnabled</span><span class="sxs-lookup"><span data-stu-id="de3dc-170">loggingEnabled</span></span>
  
    <span data-ttu-id="de3dc-171">Ce paramètre contrôle la journalisation de hello de stdout et stderr par iisnode.</span><span class="sxs-lookup"><span data-stu-id="de3dc-171">This setting controls hello logging of stdout and stderr by iisnode.</span></span> <span data-ttu-id="de3dc-172">Iisnode sera capturer stdout/stderr à partir de processus de nœud qu'il lance et écrire Active toohello spécifiée dans le paramètre de « Répertoire_journal » hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-172">Iisnode will capture stdout/stderr from node processes it launches and write toohello directory specified in hello ‘logDirectory’ setting.</span></span> <span data-ttu-id="de3dc-173">Une fois qu’il est activé, votre application doit écrire système de fichiers journaux toohello et selon la quantité de hello de journalisation effectuée par l’application hello, il peut y avoir en matière de performances.</span><span class="sxs-lookup"><span data-stu-id="de3dc-173">Once this is enable, your application will be writing logs toohello file system and depending on hello amount of logging done by hello application, there could be performance implications.</span></span>
* <span data-ttu-id="de3dc-174">devErrorsEnabled</span><span class="sxs-lookup"><span data-stu-id="de3dc-174">devErrorsEnabled</span></span>
  
    <span data-ttu-id="de3dc-175">La valeur par défaut est false.</span><span class="sxs-lookup"><span data-stu-id="de3dc-175">Default value is false.</span></span> <span data-ttu-id="de3dc-176">Lorsque la valeur tootrue, iisnode affiche le code d’état HTTP de hello et code d’erreur Win32 de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="de3dc-176">When set tootrue, iisnode will display hello HTTP status code and Win32 error code on your browser.</span></span> <span data-ttu-id="de3dc-177">code de win32 Hello s’avérera utile dans certains types de problèmes de débogage.</span><span class="sxs-lookup"><span data-stu-id="de3dc-177">hello win32 code will be helpful in debugging certain types of issues.</span></span>
* <span data-ttu-id="de3dc-178">debuggingEnabled (ne pas activer ce paramètre sur un site de production en direct)</span><span class="sxs-lookup"><span data-stu-id="de3dc-178">debuggingEnabled (do not enable on live production site)</span></span>
  
    <span data-ttu-id="de3dc-179">Ce paramètre contrôle la fonctionnalité de débogage.</span><span class="sxs-lookup"><span data-stu-id="de3dc-179">This setting controls debugging feature.</span></span> <span data-ttu-id="de3dc-180">iisnode est intégré à node-inspector.</span><span class="sxs-lookup"><span data-stu-id="de3dc-180">Iisnode is integrated with node-inspector.</span></span> <span data-ttu-id="de3dc-181">En activant ce paramètre, vous activez le débogage de votre application node.</span><span class="sxs-lookup"><span data-stu-id="de3dc-181">By enabling this setting, you enable debugging of your node application.</span></span> <span data-ttu-id="de3dc-182">Une fois que ce paramètre est activé, iisnode sera mise en page hello nécessaires de nœud-inspecteur fichiers 'debuggerVirtualDir' répertoire hello premier débogage demande tooyour application node.</span><span class="sxs-lookup"><span data-stu-id="de3dc-182">Once this setting is enabled, iisnode will layout hello necessary node-inspector files in ‘debuggerVirtualDir’ directory on hello first debug request tooyour node application.</span></span> <span data-ttu-id="de3dc-183">Vous pouvez charger l’inspecteur de nœud de hello en envoyant une demande toohttp://yoursite/server.js/debug.</span><span class="sxs-lookup"><span data-stu-id="de3dc-183">You can load hello node-inspector by sending a request toohttp://yoursite/server.js/debug.</span></span> <span data-ttu-id="de3dc-184">Vous pouvez contrôler le segment d’URL hello débogage par le paramètre de 'debuggerPathSegment'.</span><span class="sxs-lookup"><span data-stu-id="de3dc-184">You can control hello debug URL segment with ‘debuggerPathSegment’ setting.</span></span> <span data-ttu-id="de3dc-185">Par défaut, debuggerPathSegment=’debug’.</span><span class="sxs-lookup"><span data-stu-id="de3dc-185">By default debuggerPathSegment=’debug’.</span></span> <span data-ttu-id="de3dc-186">Vous pouvez définir cette tooa GUID, par exemple pour qu’il soit plus difficile toobe découvert par d’autres.</span><span class="sxs-lookup"><span data-stu-id="de3dc-186">You can set this tooa GUID for example so that it is more difficult toobe discovered by others.</span></span>
  
    <span data-ttu-id="de3dc-187">Consultez ce [lien](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) pour plus d’informations sur le débogage.</span><span class="sxs-lookup"><span data-stu-id="de3dc-187">Check this [link](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) for more details on debugging.</span></span>

## <a name="scenarios-and-recommendationstroubleshooting"></a><span data-ttu-id="de3dc-188">Scénarios et recommandations/résolution des pannes</span><span class="sxs-lookup"><span data-stu-id="de3dc-188">Scenarios and recommendations/troubleshooting</span></span>
### <a name="my-node-application-is-making-too-many-outbound-calls"></a><span data-ttu-id="de3dc-189">Mon application node émet trop d’appels sortants.</span><span class="sxs-lookup"><span data-stu-id="de3dc-189">My node application is making too many outbound calls.</span></span>
<span data-ttu-id="de3dc-190">De nombreuses applications souhaiteriez toomake les connexions sortantes dans le cadre de leur fonctionnement normal.</span><span class="sxs-lookup"><span data-stu-id="de3dc-190">Many applications would want toomake outbound connections as part of their regular operation.</span></span> <span data-ttu-id="de3dc-191">Par exemple, lorsqu’une demande arrive, votre application de nœud choix toocontact une API REST ailleurs et obtenir une demande d’information tooprocess hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-191">For example, when a request comes in, your node app would want toocontact a REST API elsewhere and get some information tooprocess hello request.</span></span> <span data-ttu-id="de3dc-192">Vous pouvez toouse un agent de keep alive lors d’appels http ou https.</span><span class="sxs-lookup"><span data-stu-id="de3dc-192">You would want toouse a keep alive agent when making http or https calls.</span></span> <span data-ttu-id="de3dc-193">Par exemple, vous pouvez utiliser module d’agentkeepalive hello que votre keep alive de l’agent lors de l’établissement de ces appels sortants.</span><span class="sxs-lookup"><span data-stu-id="de3dc-193">For example, you could use hello agentkeepalive module as your keep alive agent when making these outbound calls.</span></span> <span data-ttu-id="de3dc-194">Cela permet de s’assurer que les sockets de hello sont réutilisés sur vos webapp azure VM et la surcharge de hello réduction de la création de nouveaux sockets pour chaque demande sortante.</span><span class="sxs-lookup"><span data-stu-id="de3dc-194">This makes sure that hello sockets are reused on your azure webapp VM and reducing hello overhead of creating new sockets for every outbound request.</span></span> <span data-ttu-id="de3dc-195">En outre, cela permet de s’assurer que vous utilisez moins de toomake sockets que nombreuses demandes sortantes et par conséquent, vous ne dépassez pas maxSockets hello qui sont alloués par machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-195">Also, this makes sure that you are using less number of sockets toomake many outbound requests and therefore you don’t exceed hello maxSockets that are allocated per VM.</span></span> <span data-ttu-id="de3dc-196">Recommandation sur Azure WebApp serait tooset hello agentKeepAlive maxSockets valeur total tooa de 160 sockets par machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-196">Recommendation on Azure Webapps would be tooset hello agentKeepAlive maxSockets value tooa total of 160 sockets per VM.</span></span> <span data-ttu-id="de3dc-197">Cela signifie que si vous avez 4 node.exe s’exécutant sur hello machine virtuelle, vous souhaiteriez tooset hello agentKeepAlive maxSockets too40 par node.exe qui est de 160 total par machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-197">This means that if you have 4 node.exe running on hello VM, you would want tooset hello agentKeepAlive maxSockets too40 per node.exe which is 160 total per VM.</span></span>

<span data-ttu-id="de3dc-198">Exemple de configuration [d’agentKeepALive](https://www.npmjs.com/package/agentkeepalive) :</span><span class="sxs-lookup"><span data-stu-id="de3dc-198">Example [agentKeepALive](https://www.npmjs.com/package/agentkeepalive) configuration:</span></span>

```
var keepaliveAgent = new Agent({    
    maxSockets: 40,    
    maxFreeSockets: 10,    
    timeout: 60000,    
    keepAliveTimeout: 300000    
});
```

<span data-ttu-id="de3dc-199">Cet exemple suppose que 4 node.exe sont en cours d’exécution sur votre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-199">This example assumes you have 4 node.exe running on your VM.</span></span> <span data-ttu-id="de3dc-200">Si vous avez un nombre différent de node.exe s’exécutant sur hello machine virtuelle, vous aurez maxSockets de hello toomodify définir en conséquence.</span><span class="sxs-lookup"><span data-stu-id="de3dc-200">If you have a different number of node.exe running on hello VM, you will have toomodify hello maxSockets setting accordingly.</span></span>

### <a name="my-node-application-is-consuming-too-much-cpu"></a><span data-ttu-id="de3dc-201">Mon application node consomme trop de ressources processeur.</span><span class="sxs-lookup"><span data-stu-id="de3dc-201">My node application is consuming too much CPU.</span></span>
<span data-ttu-id="de3dc-202">Azure Webapps vous enverra probablement une recommandation sur votre portail concernant le niveau de consommation processeur considéré comme élevé.</span><span class="sxs-lookup"><span data-stu-id="de3dc-202">You will probably get a recommendation from Azure Webapps on your portal about high cpu consumption.</span></span> <span data-ttu-id="de3dc-203">Vous pouvez également le programme d’installation analyse toowatch pour certaines [métriques](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="de3dc-203">You can also setup monitors toowatch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="de3dc-204">Lors de la vérification de l’utilisation de hello du processeur sur hello [tableau de bord de portail Azure](../application-insights/app-insights-web-monitor-performance.md), vérifiez les valeurs MAX de hello UC afin que vous n’attendez plus les valeurs de crête hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-204">When checking hello CPU usage on hello [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check hello MAX values for CPU so you don’t miss out hello peak values.</span></span>
<span data-ttu-id="de3dc-205">Dans les cas où vous pensez que votre application consomme trop de ressources processeur et vous ne pouvez pas expliquer pourquoi, vous devez tooprofile votre application de nœud.</span><span class="sxs-lookup"><span data-stu-id="de3dc-205">In cases where you think your application is consuming too much CPU and you cannot explain why, you will need tooprofile your node application.</span></span>

### 
#### <a name="profiling-your-node-application-on-azure-webapps-with-v8-profiler"></a><span data-ttu-id="de3dc-206">Profilage de votre application node sur Azure Webapps à l’aide de V8-Profiler</span><span class="sxs-lookup"><span data-stu-id="de3dc-206">Profiling your node application on azure webapps with V8-Profiler</span></span>
<span data-ttu-id="de3dc-207">Par exemple, vous permet de dire qu’application hello world que vous souhaitez tooprofile comme indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="de3dc-207">For example, lets say you have a hello world app that you want tooprofile as shown below:</span></span>

```
var http = require('http');    
function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    WriteConsoleLog();    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="de3dc-208">Accédez tooyour scm site https://yoursite.scm.azurewebsites.net/DebugConsole</span><span class="sxs-lookup"><span data-stu-id="de3dc-208">Go tooyour scm site https://yoursite.scm.azurewebsites.net/DebugConsole</span></span>

<span data-ttu-id="de3dc-209">Vous accéder à une invite de commandes, comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="de3dc-209">You will see a command prompt as shown below.</span></span> <span data-ttu-id="de3dc-210">Allez dans votre répertoire site/wwwroot.</span><span class="sxs-lookup"><span data-stu-id="de3dc-210">Go into your site/wwwroot directory</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_install_v8.png)

<span data-ttu-id="de3dc-211">Exécuter les commandes hello « npm installer le Générateur de profils v8 »</span><span class="sxs-lookup"><span data-stu-id="de3dc-211">Run hello command “npm install v8-profiler”</span></span>

<span data-ttu-id="de3dc-212">Le programme v8-profiler et toutes ses dépendances devraient s’installer sous le répertoire node\_modules.</span><span class="sxs-lookup"><span data-stu-id="de3dc-212">This should install v8-profiler under node\_modules directory and all of its dependencies.</span></span>
<span data-ttu-id="de3dc-213">À présent, modifiez votre tooprofile server.js votre application.</span><span class="sxs-lookup"><span data-stu-id="de3dc-213">Now, edit your server.js tooprofile your application.</span></span>

```
var http = require('http');    
var profiler = require('v8-profiler');    
var fs = require('fs');

function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    profiler.startProfiling('HandleRequest');    
    WriteConsoleLog();    
    fs.writeFileSync('profile.cpuprofile', JSON.stringify(profiler.stopProfiling('HandleRequest')));    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="de3dc-214">Hello au-dessus de modifications sera fonction de WriteConsoleLog hello du profil, puis écrivez hello profil sortie too'profile.cpuprofile' fichier sous wwwroot du site.</span><span class="sxs-lookup"><span data-stu-id="de3dc-214">hello above changes will profile hello WriteConsoleLog function and then write hello profile output too‘profile.cpuprofile’ file under your site wwwroot.</span></span> <span data-ttu-id="de3dc-215">Une application tooyour de demande d’envoi.</span><span class="sxs-lookup"><span data-stu-id="de3dc-215">Send a request tooyour application.</span></span> <span data-ttu-id="de3dc-216">Vous verrez qu’un fichier « profile.cpuprofile » a été créé sous le répertoire wwwroot de votre site.</span><span class="sxs-lookup"><span data-stu-id="de3dc-216">You will see a ‘profile.cpuprofile’ file created under your site wwwroot.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_profile.cpuprofile.png)

<span data-ttu-id="de3dc-217">Télécharger ce fichier, et vous devrez tooopen ce fichier avec les outils F12 de Chrome.</span><span class="sxs-lookup"><span data-stu-id="de3dc-217">Download this file and you will need tooopen this file with Chrome F12 Tools.</span></span> <span data-ttu-id="de3dc-218">Appuyez sur F12 sur chrome, puis cliquez sur hello « Onglet Profils ».</span><span class="sxs-lookup"><span data-stu-id="de3dc-218">Hit F12 on chrome, then click on hello “Profiles Tab”.</span></span> <span data-ttu-id="de3dc-219">Cliquez sur le bouton « Load ».</span><span class="sxs-lookup"><span data-stu-id="de3dc-219">Click on “Load” Button.</span></span> <span data-ttu-id="de3dc-220">Sélectionnez le fichier profile.cpuprofile que vous venez de télécharger.</span><span class="sxs-lookup"><span data-stu-id="de3dc-220">Select your profile.cpuprofile file that you just downloaded.</span></span> <span data-ttu-id="de3dc-221">Cliquez sur le profil hello que vous venez de charger.</span><span class="sxs-lookup"><span data-stu-id="de3dc-221">Click on hello profile you just loaded.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/chrome_tools_view.png)

<span data-ttu-id="de3dc-222">Vous verrez que 95 % des temps de hello a été consommée par WriteConsoleLog fonction comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="de3dc-222">You will see that 95% of hello time was consumed by WriteConsoleLog function as shown below.</span></span> <span data-ttu-id="de3dc-223">Cela vous indique également les numéros de ligne exacte de hello et les fichiers sources qui provoquent le problème de hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-223">This also shows you hello exact line numbers and source files that cause hello issue.</span></span>

### <a name="my-node-application-is-consuming-too-much-memory"></a><span data-ttu-id="de3dc-224">Mon application node consomme trop de mémoire.</span><span class="sxs-lookup"><span data-stu-id="de3dc-224">My node application is consuming too much memory.</span></span>
<span data-ttu-id="de3dc-225">Azure Webapps vous enverra probablement une recommandation sur votre portail concernant le niveau de consommation de mémoire considéré comme élevé.</span><span class="sxs-lookup"><span data-stu-id="de3dc-225">You will probably get a recommendation from Azure Webapps on your portal about high memory consumption.</span></span> <span data-ttu-id="de3dc-226">Vous pouvez également le programme d’installation analyse toowatch pour certaines [métriques](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="de3dc-226">You can also setup monitors toowatch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="de3dc-227">Lors de la vérification de l’utilisation de mémoire hello sur hello [tableau de bord de portail Azure](../application-insights/app-insights-web-monitor-performance.md), vérifiez les valeurs MAX hello pour la mémoire afin de ne pas manquer des valeurs de crête hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-227">When checking hello memory usage on hello [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check hello MAX values for memory so you don’t miss out hello peak values.</span></span>

#### <a name="leak-detection-and-heap-diffing-for-nodejs"></a><span data-ttu-id="de3dc-228">Détection des fuites et procédure de heap diffing pour node.js</span><span class="sxs-lookup"><span data-stu-id="de3dc-228">Leak detection and Heap Diffing for node.js</span></span>
<span data-ttu-id="de3dc-229">Vous pouvez utiliser [memwatch de nœud](https://github.com/lloyd/node-memwatch) toohelp identifient la mémoire des fuites.</span><span class="sxs-lookup"><span data-stu-id="de3dc-229">You could use [node-memwatch](https://github.com/lloyd/node-memwatch) toohelp you identify memory leaks.</span></span>
<span data-ttu-id="de3dc-230">Vous pouvez installer memwatch comme v8 Générateur de profils et de modifier que votre code toocapture et diff tas tooidentify hello fuites de mémoire dans votre application.</span><span class="sxs-lookup"><span data-stu-id="de3dc-230">You can install memwatch just like v8-profiler and edit your code toocapture and diff heaps tooidentify hello memory leaks in your application.</span></span>

### <a name="my-nodeexes-are-getting-killed-randomly"></a><span data-ttu-id="de3dc-231">Mes fichiers node.exe sont arrêtés de façon aléatoire</span><span class="sxs-lookup"><span data-stu-id="de3dc-231">My node.exe’s are getting killed randomly</span></span>
<span data-ttu-id="de3dc-232">Cette situation peut avoir diverses raisons :</span><span class="sxs-lookup"><span data-stu-id="de3dc-232">There are a few reasons why this could be happening:</span></span>

1. <span data-ttu-id="de3dc-233">Votre application lève des exceptions non interceptées : Veuillez cocher d:\\domestique\\LogFiles\\Application\\fichier errors.txt de journalisation pour plus d’informations hello sur hello une exception.</span><span class="sxs-lookup"><span data-stu-id="de3dc-233">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for hello details on hello exception thrown.</span></span> <span data-ttu-id="de3dc-234">Ce fichier contient la trace de la pile hello pour vous pouvez de résoudre votre application sur cette base.</span><span class="sxs-lookup"><span data-stu-id="de3dc-234">This file has hello stack trace so you can fix your application based on this.</span></span>
2. <span data-ttu-id="de3dc-235">Votre application consomme trop de mémoire, ce qui affecte le démarrage des autres processus.</span><span class="sxs-lookup"><span data-stu-id="de3dc-235">Your application is consuming too much memory which is affecting other processes from getting started.</span></span> <span data-ttu-id="de3dc-236">Si de mémoire virtuelle totale hello est too100 fermer %, votre node.exe a supprimées par hello processus manager toolet autres processus obtenir une chance toodo du travail.</span><span class="sxs-lookup"><span data-stu-id="de3dc-236">If hello total VM memory is close too100%, your node.exe’s could be killed by hello process manager toolet other processes get a chance toodo some work.</span></span> <span data-ttu-id="de3dc-237">toofix, si votre application doit réellement toouse beaucoup de mémoire, veuillez l’échelle tooa ou assurez-vous que votre application n’est pas présente une fuite de mémoire virtuelle supérieure avec beaucoup plus de mémoire RAM.</span><span class="sxs-lookup"><span data-stu-id="de3dc-237">toofix this, either make sure your application is not leaking memory OR if you application really needs toouse a lot of memory, please scale up tooa larger VM with a lot more RAM.</span></span>

### <a name="my-node-application-does-not-start"></a><span data-ttu-id="de3dc-238">Mon application node ne démarre pas</span><span class="sxs-lookup"><span data-stu-id="de3dc-238">My node application does not start</span></span>
<span data-ttu-id="de3dc-239">Si votre application renvoie des erreurs 500 au démarrage, plusieurs raisons peuvent expliquer ce phénomène :</span><span class="sxs-lookup"><span data-stu-id="de3dc-239">If your application is returning 500 Errors at startup, there could be a few reasons:</span></span>

1. <span data-ttu-id="de3dc-240">Node.exe n’est pas présent à l’emplacement correct de hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-240">Node.exe is not present at hello correct location.</span></span> <span data-ttu-id="de3dc-241">Vérifiez le paramètre nodeProcessCommandLine.</span><span class="sxs-lookup"><span data-stu-id="de3dc-241">Check nodeProcessCommandLine setting.</span></span>
2. <span data-ttu-id="de3dc-242">Fichier de script principal n’est pas présent à l’emplacement correct de hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-242">Main script file is not present at hello correct location.</span></span> <span data-ttu-id="de3dc-243">Web.config et assurez-vous que nom hello du fichier de script principal hello hello gestionnaires section correspondances hello principal fichier de script.</span><span class="sxs-lookup"><span data-stu-id="de3dc-243">Check web.config and make sure hello name of hello main script file in hello handlers section matches hello main script file.</span></span>
3. <span data-ttu-id="de3dc-244">Configuration du fichier Web.config n’est pas correcte : Vérifiez les noms de paramètres hello/valeurs.</span><span class="sxs-lookup"><span data-stu-id="de3dc-244">Web.config configuration is not correct – check hello settings names/values.</span></span>
4. <span data-ttu-id="de3dc-245">Démarrage à froid : votre application prend trop de temps toostartup.</span><span class="sxs-lookup"><span data-stu-id="de3dc-245">Cold Start – Your application is taking too long toostartup.</span></span> <span data-ttu-id="de3dc-246">Si votre application met plus de (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1 000 secondes à démarrer, iisnode renvoie une erreur 500.</span><span class="sxs-lookup"><span data-stu-id="de3dc-246">If your application takes longer than (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 seconds, iisnode will return 500 error.</span></span> <span data-ttu-id="de3dc-247">Augmentez les valeurs de ces toomatch paramètres votre application démarrer iisnode tooprevent de temps à partir de ce délai et retourner hello 500 Erreur hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-247">Increase hello values of these settings toomatch your application start time tooprevent iisnode from timing out and returning hello 500 error.</span></span>

### <a name="my-node-application-crashed"></a><span data-ttu-id="de3dc-248">Mon application node a planté</span><span class="sxs-lookup"><span data-stu-id="de3dc-248">My node application crashed</span></span>
<span data-ttu-id="de3dc-249">Votre application lève des exceptions non interceptées : Veuillez cocher d:\\domestique\\LogFiles\\Application\\fichier errors.txt de journalisation pour plus d’informations hello sur hello une exception.</span><span class="sxs-lookup"><span data-stu-id="de3dc-249">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for hello details on hello exception thrown.</span></span> <span data-ttu-id="de3dc-250">Ce fichier contient la trace de la pile hello pour vous pouvez de résoudre votre application sur cette base.</span><span class="sxs-lookup"><span data-stu-id="de3dc-250">This file has hello stack trace so you can fix your application based on this.</span></span>

### <a name="my-node-application-takes-too-much-time-toostartup-cold-start"></a><span data-ttu-id="de3dc-251">Mon application nœud prend trop de toostartup de temps (démarrage à froid)</span><span class="sxs-lookup"><span data-stu-id="de3dc-251">My node application takes too much time toostartup (Cold Start)</span></span>
<span data-ttu-id="de3dc-252">Raison la plus courante est qu’un grand nombre de fichiers dans le nœud de hello application hello\_modules et hello application tentatives tooload la plupart de ces fichiers lors du démarrage.</span><span class="sxs-lookup"><span data-stu-id="de3dc-252">Most common reason for this is that hello application has a lot of files in hello node\_modules and hello application tries tooload most of these files during startup.</span></span> <span data-ttu-id="de3dc-253">Par défaut, vos fichiers résidant sur le partage de réseau hello sur les applications Web Azure, le chargement des fichiers autant peut prendre un certain temps.</span><span class="sxs-lookup"><span data-stu-id="de3dc-253">By default, since your files reside on hello network share on Azure Webapps, loading so many files can take some time.</span></span>
<span data-ttu-id="de3dc-254">Certains toomake solutions cela plus rapide sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="de3dc-254">Some solutions toomake this faster are:</span></span>

1. <span data-ttu-id="de3dc-255">Assurez-vous de qu'avoir une structure plate dépendance et pas de dépendances en double à l’aide de npm3 tooinstall vos modules.</span><span class="sxs-lookup"><span data-stu-id="de3dc-255">Make sure you have a flat dependency structure and no duplicate dependencies by using npm3 tooinstall your modules.</span></span>
2. <span data-ttu-id="de3dc-256">Essayez toolazy charge votre nœud\_modules et tous les modules hello au démarrage de ne charge pas.</span><span class="sxs-lookup"><span data-stu-id="de3dc-256">Try toolazy load your node\_modules and not load all of hello modules at startup.</span></span> <span data-ttu-id="de3dc-257">Cela signifie que toorequire('module') d’appel hello doit être effectuée lorsque vous en avez réellement besoin au sein de la fonction hello vous essayez de module de hello toouse.</span><span class="sxs-lookup"><span data-stu-id="de3dc-257">This means that hello call toorequire(‘module’) should be done when you actually need it within hello function you try toouse hello module.</span></span>
3. <span data-ttu-id="de3dc-258">Azure Webapps offre une fonctionnalité dite de « cache local ».</span><span class="sxs-lookup"><span data-stu-id="de3dc-258">Azure Webapps offers a feature called local cache.</span></span> <span data-ttu-id="de3dc-259">Cette fonctionnalité copie le contenu de votre hello réseau partage toohello disque hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="de3dc-259">This feature copies your content from hello network share toohello local disk on hello VM.</span></span> <span data-ttu-id="de3dc-260">Étant donné que les fichiers hello sont locaux, hello temps de chargement de nœud\_modules est beaucoup plus rapide.</span><span class="sxs-lookup"><span data-stu-id="de3dc-260">Since hello files are local, hello load time of node\_modules is much faster.</span></span> <span data-ttu-id="de3dc-261">-Ce [documentation](../app-service/app-service-local-cache.md) explique comment toouse le Cache Local dans plus de détail.</span><span class="sxs-lookup"><span data-stu-id="de3dc-261">- This [documentation](../app-service/app-service-local-cache.md) explains how toouse Local Cache in more detail.</span></span>

## <a name="iisnode-http-status-and-substatus"></a><span data-ttu-id="de3dc-262">État et sous-état http IISNODE</span><span class="sxs-lookup"><span data-stu-id="de3dc-262">IISNODE http status and substatus</span></span>
<span data-ttu-id="de3dc-263">Cela [fichier source](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) répertorie tous les hello possibles d’état/sous-état combinaison iisnode peut retourner en cas d’erreur.</span><span class="sxs-lookup"><span data-stu-id="de3dc-263">This [source file](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) lists all hello possible status/substatus combination iisnode can return in case of error.</span></span>

<span data-ttu-id="de3dc-264">Activer FREB pour votre code d’erreur win32 application toosee hello (Vérifiez que vous activez FREB uniquement sur les sites de production non pour des raisons de performances.).</span><span class="sxs-lookup"><span data-stu-id="de3dc-264">Enable FREB for your application toosee hello win32 error code (please make sure you enable FREB only on non-production sites for performance reasons).</span></span>

| <span data-ttu-id="de3dc-265">État HTTP</span><span class="sxs-lookup"><span data-stu-id="de3dc-265">Http Status</span></span> | <span data-ttu-id="de3dc-266">Sous-état HTTP</span><span class="sxs-lookup"><span data-stu-id="de3dc-266">Http SubStatus</span></span> | <span data-ttu-id="de3dc-267">Raison possible ?</span><span class="sxs-lookup"><span data-stu-id="de3dc-267">Possible Reason?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="de3dc-268">500</span><span class="sxs-lookup"><span data-stu-id="de3dc-268">500</span></span> |<span data-ttu-id="de3dc-269">1 000</span><span class="sxs-lookup"><span data-stu-id="de3dc-269">1000</span></span> |<span data-ttu-id="de3dc-270">Il a été un problème de la distribution hello demande tooIISNODE : Vérifiez si node.exe a été démarré.</span><span class="sxs-lookup"><span data-stu-id="de3dc-270">There was some issue dispatching hello request tooIISNODE – check if node.exe was started up.</span></span> <span data-ttu-id="de3dc-271">node.exe peut avoir été bloqué au démarrage.</span><span class="sxs-lookup"><span data-stu-id="de3dc-271">Node.exe could have crashed on startup.</span></span> <span data-ttu-id="de3dc-272">Vérifiez la configuration de votre fichier web.config afin d’identifier d’éventuelles erreurs.</span><span class="sxs-lookup"><span data-stu-id="de3dc-272">Check your web.config configuration for errors.</span></span> |
| <span data-ttu-id="de3dc-273">500</span><span class="sxs-lookup"><span data-stu-id="de3dc-273">500</span></span> |<span data-ttu-id="de3dc-274">1001</span><span class="sxs-lookup"><span data-stu-id="de3dc-274">1001</span></span> |<span data-ttu-id="de3dc-275">-Win32Error 0 x 2 – application ne répond pas toohello URL.</span><span class="sxs-lookup"><span data-stu-id="de3dc-275">- Win32Error 0x2 - App is not responding toohello URL.</span></span> <span data-ttu-id="de3dc-276">Réécriture d’URL de vérification des règles ou si votre application expresse définir des itinéraires correct hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-276">Check URL rewrite rules or if your express app has hello correct routes defined.</span></span> <span data-ttu-id="de3dc-277">-Win32Error 0x6d – canal nommé est occupé : Node.exe n’accepte pas les requêtes, car le canal de hello est occupé.</span><span class="sxs-lookup"><span data-stu-id="de3dc-277">- Win32Error 0x6d – named pipe is busy – Node.exe is not accepting requests because hello pipe is busy.</span></span> <span data-ttu-id="de3dc-278">Vérifiez l’utilisation élevée du processeur.</span><span class="sxs-lookup"><span data-stu-id="de3dc-278">Check high cpu usage.</span></span> <span data-ttu-id="de3dc-279">-Autres erreurs : vérifiez si node.exe a planté.</span><span class="sxs-lookup"><span data-stu-id="de3dc-279">- Other errors – check if node.exe crashed.</span></span> |
| <span data-ttu-id="de3dc-280">500</span><span class="sxs-lookup"><span data-stu-id="de3dc-280">500</span></span> |<span data-ttu-id="de3dc-281">1002</span><span class="sxs-lookup"><span data-stu-id="de3dc-281">1002</span></span> |<span data-ttu-id="de3dc-282">node.exe a planté : consultez l’arborescence des appels de procédure sous d:\\home\\LogFiles\\logging-errors.txt.</span><span class="sxs-lookup"><span data-stu-id="de3dc-282">Node.exe crashed – check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="de3dc-283">500</span><span class="sxs-lookup"><span data-stu-id="de3dc-283">500</span></span> |<span data-ttu-id="de3dc-284">1003</span><span class="sxs-lookup"><span data-stu-id="de3dc-284">1003</span></span> |<span data-ttu-id="de3dc-285">Configuration du canal problème : vous ne devez jamais voir cela, mais si vous le faites, hello nommé configuration du pipeline est incorrect.</span><span class="sxs-lookup"><span data-stu-id="de3dc-285">Pipe configuration Issue – You should never see this but if you do, hello named pipe configuration is incorrect.</span></span> |
| <span data-ttu-id="de3dc-286">500</span><span class="sxs-lookup"><span data-stu-id="de3dc-286">500</span></span> |<span data-ttu-id="de3dc-287">1004-1018</span><span class="sxs-lookup"><span data-stu-id="de3dc-287">1004-1018</span></span> |<span data-ttu-id="de3dc-288">Une erreur s’est produite lors de l’envoi hello demande ou traitement de réponse hello à partir de node.exe.</span><span class="sxs-lookup"><span data-stu-id="de3dc-288">There was some error while sending hello request or processing hello response to/from node.exe.</span></span> <span data-ttu-id="de3dc-289">Vérifiez si node.exe a planté.</span><span class="sxs-lookup"><span data-stu-id="de3dc-289">Check if node.exe crashed.</span></span> <span data-ttu-id="de3dc-290">Consultez l’arborescence des appels de procédure sous d:\\home\\LogFiles\\logging-errors.txt.</span><span class="sxs-lookup"><span data-stu-id="de3dc-290">check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="de3dc-291">503</span><span class="sxs-lookup"><span data-stu-id="de3dc-291">503</span></span> |<span data-ttu-id="de3dc-292">1 000</span><span class="sxs-lookup"><span data-stu-id="de3dc-292">1000</span></span> |<span data-ttu-id="de3dc-293">N’est pas suffisant tooallocate mémoire plus les connexions de canaux nommés.</span><span class="sxs-lookup"><span data-stu-id="de3dc-293">Not enough memory tooallocate more named pipe connections.</span></span> <span data-ttu-id="de3dc-294">Vérifiez pourquoi votre application consomme une grande quantité de mémoire.</span><span class="sxs-lookup"><span data-stu-id="de3dc-294">Check why your app is consuming so much memory.</span></span> <span data-ttu-id="de3dc-295">Vérifiez la valeur du paramètre maxConcurrentRequestsPerProcess.</span><span class="sxs-lookup"><span data-stu-id="de3dc-295">Check maxConcurrentRequestsPerProcess setting value.</span></span> <span data-ttu-id="de3dc-296">Si son n’est pas infinie et que vous avez un grand nombre de requêtes, augmenter cette valeur tooprevent cette erreur.</span><span class="sxs-lookup"><span data-stu-id="de3dc-296">If its not infinite and you have a lot of requests, increase this value tooprevent this error.</span></span> |
| <span data-ttu-id="de3dc-297">503</span><span class="sxs-lookup"><span data-stu-id="de3dc-297">503</span></span> |<span data-ttu-id="de3dc-298">1001</span><span class="sxs-lookup"><span data-stu-id="de3dc-298">1001</span></span> |<span data-ttu-id="de3dc-299">Demande n’a pas pu être distribué toonode.exe parce que le recyclage de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-299">Request could not be dispatched toonode.exe because hello application is recycling.</span></span> <span data-ttu-id="de3dc-300">Après que l’application hello a été recyclé, la demande doit être traitée normalement.</span><span class="sxs-lookup"><span data-stu-id="de3dc-300">After hello application has recycled, requests should be served normally.</span></span> |
| <span data-ttu-id="de3dc-301">503</span><span class="sxs-lookup"><span data-stu-id="de3dc-301">503</span></span> |<span data-ttu-id="de3dc-302">1002</span><span class="sxs-lookup"><span data-stu-id="de3dc-302">1002</span></span> |<span data-ttu-id="de3dc-303">Code d’erreur win32 à cocher pour connaître la raison – demande n’a pas pu être distribué tooa node.exe.</span><span class="sxs-lookup"><span data-stu-id="de3dc-303">Check win32 error code for actual reason – Request could not be dispatched tooa node.exe.</span></span> |
| <span data-ttu-id="de3dc-304">503</span><span class="sxs-lookup"><span data-stu-id="de3dc-304">503</span></span> |<span data-ttu-id="de3dc-305">1003</span><span class="sxs-lookup"><span data-stu-id="de3dc-305">1003</span></span> |<span data-ttu-id="de3dc-306">Le canal nommé est trop occupé : vérifiez si nœud consomme beaucoup de ressources processeur</span><span class="sxs-lookup"><span data-stu-id="de3dc-306">Named pipe is too Busy – Check if node is consuming a lot of CPU</span></span> |

<span data-ttu-id="de3dc-307">NODE.exe contient un paramètre appelé NODE\_PENDING\_PIPE\_INSTANCES.</span><span class="sxs-lookup"><span data-stu-id="de3dc-307">There is a setting within NODE.exe called NODE\_PENDING\_PIPE\_INSTANCES.</span></span> <span data-ttu-id="de3dc-308">Par défaut, cette valeur est définie sur 4 en dehors d’Azure Webapps.</span><span class="sxs-lookup"><span data-stu-id="de3dc-308">By default outside of azure webapps this value is 4.</span></span> <span data-ttu-id="de3dc-309">Cela signifie que node.exe peut uniquement accepter des demandes de 4 à la fois sur le canal nommé de hello.</span><span class="sxs-lookup"><span data-stu-id="de3dc-309">This means that node.exe can only accept 4 requests at a time on hello named pipe.</span></span> <span data-ttu-id="de3dc-310">Sur les applications Web Azure, cette valeur est définie à too5000 et cette valeur doit être suffisante pour la plupart des applications de nœud en cours d’exécution sur les applications Web azure.</span><span class="sxs-lookup"><span data-stu-id="de3dc-310">On Azure Webapps, this value is set too5000 and this value should be good enough for most node applications running on azure webapps.</span></span> <span data-ttu-id="de3dc-311">Vous devez voir pas sur les applications Web azure 503.1003 parce que nous avons une valeur élevée pour hello nœud\_en attente\_canal\_INSTANCES.</span><span class="sxs-lookup"><span data-stu-id="de3dc-311">You should not see 503.1003 on azure webapps because we have a high value for hello NODE\_PENDING\_PIPE\_INSTANCES.</span></span>  |

## <a name="more-resources"></a><span data-ttu-id="de3dc-312">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="de3dc-312">More resources</span></span>
<span data-ttu-id="de3dc-313">Suivez ces liens de toolearn plus d’informations sur les applications node.js dans Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="de3dc-313">Follow these links toolearn more about node.js applications on Azure App Service.</span></span>

* [<span data-ttu-id="de3dc-314">Prise en main des applications web Node.js dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="de3dc-314">Get started with Node.js web apps in Azure App Service</span></span>](app-service-web-get-started-nodejs.md)
* [<span data-ttu-id="de3dc-315">Comment toodebug un Node.js web application dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="de3dc-315">How toodebug a Node.js web app in Azure App Service</span></span>](web-sites-nodejs-debug.md)
* [<span data-ttu-id="de3dc-316">Utilisation de modules Node.js avec des applications Azure</span><span class="sxs-lookup"><span data-stu-id="de3dc-316">Using Node.js Modules with Azure applications</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="de3dc-317">Azure App Service Web Apps : Node.js</span><span class="sxs-lookup"><span data-stu-id="de3dc-317">Azure App Service Web Apps: Node.js</span></span>](https://blogs.msdn.microsoft.com/silverlining/2012/06/14/windows-azure-websites-node-js/)
* [<span data-ttu-id="de3dc-318">Centre pour développeurs Node.js</span><span class="sxs-lookup"><span data-stu-id="de3dc-318">Node.js Developer Center</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="de3dc-319">Exploration hello Console de débogage Super Secret Kudu</span><span class="sxs-lookup"><span data-stu-id="de3dc-319">Exploring hello Super Secret Kudu Debug Console</span></span>](https://azure.microsoft.com/documentation/videos/super-secret-kudu-debug-console-for-azure-web-sites/)

