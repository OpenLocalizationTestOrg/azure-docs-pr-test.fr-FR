---
title: aaaGet en main de test en production pour les applications Web
description: "Découvrez hello Test dans la fonctionnalité de Production (TiP) dans Azure App Service Web Apps."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
ms.assetid: 4623468d-886e-4203-8012-8f86deb2790b
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/13/2016
ms.author: cephalin
ms.openlocfilehash: 2ddbd532ffe2a4f3e07fd386d9741a3fde3639ca
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-test-in-production-for-web-apps"></a><span data-ttu-id="d8f3e-103">Prise en main de la fonction de test en production pour les applications web</span><span class="sxs-lookup"><span data-stu-id="d8f3e-103">Get started with test in production for Web Apps</span></span>
<span data-ttu-id="d8f3e-104">Le test en production, ou test en direct de votre application web à l’aide du trafic client en direct, est une stratégie de test que les développeurs d’applications intègrent de plus en plus à leur méthodologie de [développement agile](https://en.wikipedia.org/wiki/Agile_software_development) .</span><span class="sxs-lookup"><span data-stu-id="d8f3e-104">Testing in production, or live-testing your web app using live customer traffic, is a test strategy that app developers increasingly integrate into their [agile development](https://en.wikipedia.org/wiki/Agile_software_development) methodology.</span></span> <span data-ttu-id="d8f3e-105">Il vous permet de qualité de hello tootest de vos applications avec le trafic des utilisateurs en direct dans votre environnement de production, en tant que données toosynthesized exécutée dans un environnement de test.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-105">It enables you tootest hello quality of your apps with live user traffic in your production environment, as opposed toosynthesized data in a test environment.</span></span> <span data-ttu-id="d8f3e-106">En exposant des nouveaux utilisateurs tooreal application, être informé sur les problèmes réels hello que votre application peut être confronté à une fois qu’il est déployé.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-106">By exposing your new app tooreal users, you can be informed on hello real problems your app may face once it is deployed.</span></span> <span data-ttu-id="d8f3e-107">Vous pouvez vérifier la valeur de vos mises à jour de l’application sur le volume de hello, de rapidité et diverses du trafic utilisateur réel que vous pouvez rapprocher jamais dans un environnement de test, les performances et les fonctionnalités de hello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-107">You can verify hello functionality, performance, and value of your app updates against hello volume, velocity, and variety of real user traffic, which you can never approximate in a test environment.</span></span>

## <a name="traffic-routing-in-app-service-web-apps"></a><span data-ttu-id="d8f3e-108">Routage du trafic dans App Service Web Apps</span><span class="sxs-lookup"><span data-stu-id="d8f3e-108">Traffic Routing in App Service Web Apps</span></span>
<span data-ttu-id="d8f3e-109">Avec le routage du trafic de hello fonctionnalité dans [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714), vous pouvez diriger une partie de tooone du trafic utilisateur dynamique ou de plusieurs [les emplacements de déploiement](web-sites-staged-publishing.md), puis d’analyser votre application avec [Application Azure Insights](/services/application-insights/) ou [Azure HDInsight](/services/hdinsight/), ou un outil tiers comme [New Relic](/marketplace/partners/newrelic/newrelic/) toovalidate votre modification.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-109">With hello Traffic Routing feature in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714), you can direct a portion of live user traffic tooone or more [deployment slots](web-sites-staged-publishing.md), and then analyze your app with [Azure Application Insights](/services/application-insights/) or [Azure HDInsight](/services/hdinsight/), or a third-party tool like [New Relic](/marketplace/partners/newrelic/newrelic/) toovalidate your change.</span></span> <span data-ttu-id="d8f3e-110">Par exemple, vous pouvez implémenter hello du Service d’applications dans les scénarios suivants :</span><span class="sxs-lookup"><span data-stu-id="d8f3e-110">For example, you can implement hello following scenarios with App Service:</span></span>

* <span data-ttu-id="d8f3e-111">Découvrir les bogues fonctionnelles ou d’identifier les goulots d’étranglement de performances de votre déploiement de toosite à l’échelle préalable des mises à jour</span><span class="sxs-lookup"><span data-stu-id="d8f3e-111">Discover functional bugs or pinpoint performance bottlenecks in your updates prior toosite-wide deployment</span></span>
* <span data-ttu-id="d8f3e-112">Effectuer des « test contrôlé vols » de vos modifications en mesurant les métriques d’utilisation sur l’application de bêta hello</span><span class="sxs-lookup"><span data-stu-id="d8f3e-112">Perform "controlled test flights" of your changes by measuring usability metrics on hello beta app</span></span>
* <span data-ttu-id="d8f3e-113">Progressivement rampe tooa nouvelle mise à jour et en douceur sauvegarder la version actuelle de toohello si une erreur se produit.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-113">Gradually ramp up tooa new update, and gracefully back down toohello current version if an error occurs</span></span> 
* <span data-ttu-id="d8f3e-114">Optimiser les résultats commerciaux de votre application en exécutant des [tests A/B](https://en.wikipedia.org/wiki/A/B_testing) ou des [tests multivariables](https://en.wikipedia.org/wiki/Multivariate_testing_in_marketing) dans plusieurs emplacements de déploiement</span><span class="sxs-lookup"><span data-stu-id="d8f3e-114">Optimize your app's business results by running [A/B tests](https://en.wikipedia.org/wiki/A/B_testing) or [multivariate tests](https://en.wikipedia.org/wiki/Multivariate_testing_in_marketing) in multiple deployment slots</span></span>

### <a name="requirements-for-using-traffic-routing-in-web-apps"></a><span data-ttu-id="d8f3e-115">Configuration requise pour utiliser le routage du trafic dans Web Apps</span><span class="sxs-lookup"><span data-stu-id="d8f3e-115">Requirements for using Traffic Routing in Web Apps</span></span>
* <span data-ttu-id="d8f3e-116">Votre application web doit s’exécuter au niveau **Standard** ou **Premium**, requis pour les emplacements de déploiement multiples.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-116">Your web app must run in **Standard** or **Premium** tier, as it is required for multiple deployment slots.</span></span>
* <span data-ttu-id="d8f3e-117">Dans l’ordre toowork correctement, le routage du trafic nécessite toobe cookies activé dans le navigateur des utilisateurs hello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-117">In order toowork properly, Traffic Routing requires cookies toobe enabled in hello users' browser.</span></span> <span data-ttu-id="d8f3e-118">Routage de trafic utilise les cookies toopin un emplacement de déploiement de client navigateur tooa session du client hello vie hello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-118">Traffic Routing uses cookies toopin a client browser tooa deployment slot for hello life hello client session.</span></span>
* <span data-ttu-id="d8f3e-119">Le routage du trafic prend en charge des scénarios avancés de test en production via les applets de commande Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-119">Traffic Routing supports advanced TiP scenarios through Azure PowerShell cmdlets.</span></span>

## <a name="route-traffic-segment-tooa-deployment-slot"></a><span data-ttu-id="d8f3e-120">Emplacement de déploiement de router le trafic segment tooa</span><span class="sxs-lookup"><span data-stu-id="d8f3e-120">Route traffic segment tooa deployment slot</span></span>
<span data-ttu-id="d8f3e-121">Au niveau de base hello dans chaque scénario d’info-bulle, vous acheminer un pourcentage prédéfini de votre emplacement de déploiement de production non tooa le trafic dynamique.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-121">At hello basic level in every TiP scenario, you route a predefined percentage of your live traffic tooa non-production deployment slot.</span></span> <span data-ttu-id="d8f3e-122">toodo, suit hello suivantes :</span><span class="sxs-lookup"><span data-stu-id="d8f3e-122">toodo this, follow hello steps below:</span></span>

> [!NOTE]
> <span data-ttu-id="d8f3e-123">Hello étapes ici suppose que vous avez déjà un [emplacement de déploiement de production non](web-sites-staged-publishing.md) et ce hello souhaité de contenu de l’application web est déjà [déployé](web-sites-deploy.md) tooit.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-123">hello steps here assumes that you already have a [non-production deployment slot](web-sites-staged-publishing.md) and that hello desired web app content is already [deployed](web-sites-deploy.md) tooit.</span></span>
> 
> 

1. <span data-ttu-id="d8f3e-124">Ouvrez une session sur hello [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="d8f3e-124">Log into hello [Azure Portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="d8f3e-125">Dans le panneau de votre application web, cliquez sur **Paramètres** > **Routage du trafic**.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-125">In your web app's blade, click **Settings** > **Traffic Routing**.</span></span>
   ![](./media/app-service-web-test-in-production/01-traffic-routing.png)
3. <span data-ttu-id="d8f3e-126">Emplacement de hello SELECT que vous souhaitez tooroute trafic tooand hello pourcentage du trafic total de hello vous le souhaitez, puis cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-126">Select hello slot that you want tooroute traffic tooand hello percentage of hello total traffic you desire, then click **Save**.</span></span>
   
    ![](./media/app-service-web-test-in-production/02-select-slot.png)
4. <span data-ttu-id="d8f3e-127">Accédez à panneau de l’emplacement de déploiement toohello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-127">Go toohello deployment slot's blade.</span></span> <span data-ttu-id="d8f3e-128">Vous devez maintenant voir le trafic dynamique qui est routé tooit.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-128">You should now see live traffic being routed tooit.</span></span>
   
    ![](./media/app-service-web-test-in-production/03-traffic-routed.png)

<span data-ttu-id="d8f3e-129">Une fois que le routage du trafic est configuré, hello spécifié, pourcentage de clients sera l’emplacement de production non tooyour routés de façon aléatoire.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-129">Once Traffic Routing is configured, hello specified percentage of clients will be randomly routed tooyour non-production slot.</span></span> <span data-ttu-id="d8f3e-130">Toutefois, il est important toonote qu’une fois qu’un client est un emplacement spécifique de tooa routé automatiquement, elle sera emplacement toothat « épinglé » pour la durée de vie hello de cette session client.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-130">However, it is important toonote that once a client is automatically routed tooa specific slot, it will be "pinned" toothat slot for hello life of that client session.</span></span> <span data-ttu-id="d8f3e-131">Cela est fait à l’aide d’une session utilisateur de cookie toopin hello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-131">This done using a cookie toopin hello user session.</span></span> <span data-ttu-id="d8f3e-132">Si vous Inspectez les requêtes hello HTTP, vous trouverez une `TipMix` cookie dans toutes les requêtes suivantes.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-132">If you inspect hello HTTP requests, you will find a `TipMix` cookie in every subsequent request.</span></span>

![](./media/app-service-web-test-in-production/04-tip-cookie.png)

## <a name="force-client-requests-tooa-specific-slot"></a><span data-ttu-id="d8f3e-133">Forcer l’emplacement spécifique du tooa demandes client</span><span class="sxs-lookup"><span data-stu-id="d8f3e-133">Force client requests tooa specific slot</span></span>
<span data-ttu-id="d8f3e-134">Dans le routage du trafic tooautomatic addition, du Service d’applications est emplacement spécifique du tooa tooroute en mesure de demandes.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-134">In addition tooautomatic traffic routing, App Service is able tooroute requests tooa specific slot.</span></span> <span data-ttu-id="d8f3e-135">Cela est utile lorsque vous souhaitez que votre tooopt en mesure des utilisateurs toobe-dans ou annulations de votre application de la version bêta.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-135">This is useful when you want your users toobe able tooopt-into or opt-out of your beta app.</span></span> <span data-ttu-id="d8f3e-136">toodo, vous utilisez hello `x-ms-routing-name` paramètre de requête.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-136">toodo this, you use hello `x-ms-routing-name` query parameter.</span></span>

<span data-ttu-id="d8f3e-137">à l’aide de tooreroute utilisateurs tooa emplacement spécifique `x-ms-routing-name`, vous devez vous assurer que cet emplacement hello est déjà ajouté la liste de routage du trafic toohello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-137">tooreroute users tooa specific slot using `x-ms-routing-name`, you must make sure that hello slot is already added toohello Traffic Routing list.</span></span> <span data-ttu-id="d8f3e-138">Étant donné que vous souhaitez explicitement tooroute tooa emplacement, peu importe pourcentage réel routage hello que vous définissez.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-138">Since you want tooroute tooa slot explicitly, hello actual routing percentage you set doesn't matter.</span></span> <span data-ttu-id="d8f3e-139">Si vous le souhaitez, vous pouvez créer un lien de bêta » « que les utilisateurs peuvent cliquer tooaccess hello bêta application.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-139">If you want, you can craft a "beta link" that users can click tooaccess hello beta app.</span></span>

![](./media/app-service-web-test-in-production/06-enable-x-ms-routing-name.png)

### <a name="opt-users-out-of-beta-app"></a><span data-ttu-id="d8f3e-140">Utilisateurs refusant l’application bêta</span><span class="sxs-lookup"><span data-stu-id="d8f3e-140">Opt users out of beta app</span></span>
<span data-ttu-id="d8f3e-141">les utilisateurs toolet refuser de votre application de la version bêta, par exemple, vous pouvez placer ce lien dans votre page web :</span><span class="sxs-lookup"><span data-stu-id="d8f3e-141">toolet users opt out of your beta app, for example, you can put this link in your web page:</span></span>

    <a href="<webappname>.azurewebsites.net/?x-ms-routing-name=self">Go back tooproduction app</a>

<span data-ttu-id="d8f3e-142">Hello chaîne `x-ms-routing-name=self` Spécifie l’emplacement de production hello.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-142">hello string `x-ms-routing-name=self` specifies hello production slot.</span></span> <span data-ttu-id="d8f3e-143">Une fois hello lien de hello accès client navigateur, non seulement il redirigé toohello l’emplacement de production, mais que chaque demande ultérieure contiendra hello `x-ms-routing-name=self` cookie qui épingle l’emplacement de production toohello hello session.</span><span class="sxs-lookup"><span data-stu-id="d8f3e-143">Once hello client browser access hello link, not only is it redirected toohello production slot, but every subsequent request will contain hello `x-ms-routing-name=self` cookie that pins hello session toohello production slot.</span></span>

![](./media/app-service-web-test-in-production/05-access-production-slot.png)

### <a name="opt-users-in-toobeta-app"></a><span data-ttu-id="d8f3e-144">Choisir les utilisateurs de l’application de toobeta</span><span class="sxs-lookup"><span data-stu-id="d8f3e-144">Opt users in toobeta app</span></span>
<span data-ttu-id="d8f3e-145">s’abonner aux utilisateurs de toolet tooyour bêta app, jeu hello même interroger toohello nom du paramètre d’emplacement de production non hello, par exemple :</span><span class="sxs-lookup"><span data-stu-id="d8f3e-145">toolet users opt in tooyour beta app, set hello same query parameter toohello name of hello non-production slot, for example:</span></span>

        <webappname>.azurewebsites.net/?x-ms-routing-name=staging

## <a name="more-resources"></a><span data-ttu-id="d8f3e-146">Autres ressources</span><span class="sxs-lookup"><span data-stu-id="d8f3e-146">More resources</span></span>
* [<span data-ttu-id="d8f3e-147">Configurer des environnements intermédiaires pour les applications web dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="d8f3e-147">Set up staging environments for web apps in Azure App Service</span></span>](web-sites-staged-publishing.md)
* [<span data-ttu-id="d8f3e-148">Déployer une application complexe de manière prévisible dans Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="d8f3e-148">Deploy a complex application predictably in Azure</span></span>](app-service-deploy-complex-application-predictably.md)
* [<span data-ttu-id="d8f3e-149">Développement logiciel agile avec Azure App Service</span><span class="sxs-lookup"><span data-stu-id="d8f3e-149">Agile software development with Azure App Service</span></span>](app-service-agile-software-development.md)
* [<span data-ttu-id="d8f3e-150">Utiliser efficacement les environnements DevOps pour vos applications web</span><span class="sxs-lookup"><span data-stu-id="d8f3e-150">Use DevOps environments effectively for your web apps</span></span>](app-service-web-staged-publishing-realworld-scenarios.md)

