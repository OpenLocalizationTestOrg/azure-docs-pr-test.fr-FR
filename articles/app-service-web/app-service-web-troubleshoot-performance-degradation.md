---
title: "Baisse de performances d’une application web dans App Service | Microsoft Docs"
description: "Cet article vous aide à résoudre les problèmes de baisse de performances d’une application web dans Azure App Service."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: performances d'application web, application lente
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 1cfe7ec37ad8b24a8bd9ab2bf67e95675a57b675
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a><span data-ttu-id="da39f-104">Résoudre les problèmes de baisse de performances d’une application web dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="da39f-104">Troubleshoot slow web app performance issues in Azure App Service</span></span>
<span data-ttu-id="da39f-105">Cet article vous aide à résoudre les problèmes de baisse de performances d’une application web dans [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="da39f-105">This article helps you troubleshoot slow web app performance issues in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span>

<span data-ttu-id="da39f-106">Si vous avez besoin d'aide supplémentaire concernant n'importe quel point de cet article, contactez les experts Azure sur les [forums MSDN Azure et Stack Overflow](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="da39f-106">If you need more help at any point in this article, you can contact the Azure experts on [the MSDN Azure and the Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="da39f-107">Vous pouvez également signaler un incident au support Azure.</span><span class="sxs-lookup"><span data-stu-id="da39f-107">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="da39f-108">Accédez au [site de support Azure](https://azure.microsoft.com/support/options/) , puis cliquez sur **Obtenir un support**.</span><span class="sxs-lookup"><span data-stu-id="da39f-108">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click on **Get Support**.</span></span>

## <a name="symptom"></a><span data-ttu-id="da39f-109">Symptôme</span><span class="sxs-lookup"><span data-stu-id="da39f-109">Symptom</span></span>
<span data-ttu-id="da39f-110">Lorsque vous parcourez l’application web, le chargement des pages est lent et il est possible que le délai soit dépassé.</span><span class="sxs-lookup"><span data-stu-id="da39f-110">When you browse the web app, the pages load slowly and sometimes timeout.</span></span>

## <a name="cause"></a><span data-ttu-id="da39f-111">Cause :</span><span class="sxs-lookup"><span data-stu-id="da39f-111">Cause</span></span>
<span data-ttu-id="da39f-112">Ce problème est souvent dû à des problèmes au niveau de l’application, tels que :</span><span class="sxs-lookup"><span data-stu-id="da39f-112">This problem is often caused by application level issues, such as:</span></span>

* <span data-ttu-id="da39f-113">requêtes réseau chronophages ;</span><span class="sxs-lookup"><span data-stu-id="da39f-113">network requests taking a long time</span></span>
* <span data-ttu-id="da39f-114">interrogations inefficaces du code ou de la base de données de l’application ;</span><span class="sxs-lookup"><span data-stu-id="da39f-114">application code or database queries being inefficient</span></span>
* <span data-ttu-id="da39f-115">un taux d’utilisation élevé de la mémoire/UC par l’application ;</span><span class="sxs-lookup"><span data-stu-id="da39f-115">application using high memory/CPU</span></span>
* <span data-ttu-id="da39f-116">blocage de l’application en raison d’une exception.</span><span class="sxs-lookup"><span data-stu-id="da39f-116">application crashing due to an exception</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="da39f-117">Étapes de dépannage</span><span class="sxs-lookup"><span data-stu-id="da39f-117">Troubleshooting steps</span></span>
<span data-ttu-id="da39f-118">Le dépannage peut être divisé en trois tâches distinctes, dans un ordre séquentiel :</span><span class="sxs-lookup"><span data-stu-id="da39f-118">Troubleshooting can be divided into three distinct tasks, in sequential order:</span></span>

1. [<span data-ttu-id="da39f-119">Observer et contrôler le comportement de l’application</span><span class="sxs-lookup"><span data-stu-id="da39f-119">Observe and monitor application behavior</span></span>](#observe)
2. [<span data-ttu-id="da39f-120">Collecter les données</span><span class="sxs-lookup"><span data-stu-id="da39f-120">Collect data</span></span>](#collect)
3. [<span data-ttu-id="da39f-121">Résoudre le problème</span><span class="sxs-lookup"><span data-stu-id="da39f-121">Mitigate the issue</span></span>](#mitigate)

<span data-ttu-id="da39f-122">[App Service Web Apps](/services/app-service/web/) vous offre différentes options à chaque étape.</span><span class="sxs-lookup"><span data-stu-id="da39f-122">[App Service Web Apps](/services/app-service/web/) gives you various options at each step.</span></span>

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a><span data-ttu-id="da39f-123">1. Observer et contrôler le comportement de l'application</span><span class="sxs-lookup"><span data-stu-id="da39f-123">1. Observe and monitor application behavior</span></span>
#### <a name="track-service-health"></a><span data-ttu-id="da39f-124">Suivi de l’état du service</span><span class="sxs-lookup"><span data-stu-id="da39f-124">Track Service health</span></span>
<span data-ttu-id="da39f-125">Microsoft Azure publie chaque interruption du service et chaque dégradation des performances.</span><span class="sxs-lookup"><span data-stu-id="da39f-125">Microsoft Azure publicizes each time there is a service interruption or performance degradation.</span></span> <span data-ttu-id="da39f-126">Vous pouvez assurer le suivi de l’état du service sur le [portail Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="da39f-126">You can track the health of the service on the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="da39f-127">Pour plus d’informations, consultez la rubrique [Suivi de l’état du service](../monitoring-and-diagnostics/insights-service-health.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-127">For more information, see [Track service health](../monitoring-and-diagnostics/insights-service-health.md).</span></span>

#### <a name="monitor-your-web-app"></a><span data-ttu-id="da39f-128">Contrôle de votre application web</span><span class="sxs-lookup"><span data-stu-id="da39f-128">Monitor your web app</span></span>
<span data-ttu-id="da39f-129">Cette option vous permet de savoir si votre application rencontre des problèmes.</span><span class="sxs-lookup"><span data-stu-id="da39f-129">This option enables you to find out if your application is having any issues.</span></span> <span data-ttu-id="da39f-130">Dans le panneau de votre application web, cliquez sur la vignette **Demandes et erreurs** .</span><span class="sxs-lookup"><span data-stu-id="da39f-130">In your web app’s blade, click the **Requests and errors** tile.</span></span> <span data-ttu-id="da39f-131">Le panneau **Mesure** affiche toutes les mesures que vous pouvez ajouter.</span><span class="sxs-lookup"><span data-stu-id="da39f-131">The **Metric** blade shows you all the metrics you can add.</span></span>

<span data-ttu-id="da39f-132">Parmi les mesures que vous pouvez surveiller pour votre application web, se trouvent</span><span class="sxs-lookup"><span data-stu-id="da39f-132">Some of the metrics that you might want to monitor for your web app are</span></span>

* <span data-ttu-id="da39f-133">Plage de travail moyenne de la mémoire</span><span class="sxs-lookup"><span data-stu-id="da39f-133">Average memory working set</span></span>
* <span data-ttu-id="da39f-134">Temps de réponse moyen</span><span class="sxs-lookup"><span data-stu-id="da39f-134">Average response time</span></span>
* <span data-ttu-id="da39f-135">Temps processeur</span><span class="sxs-lookup"><span data-stu-id="da39f-135">CPU time</span></span>
* <span data-ttu-id="da39f-136">Plage de travail de la mémoire</span><span class="sxs-lookup"><span data-stu-id="da39f-136">Memory working set</span></span>
* <span data-ttu-id="da39f-137">Requêtes</span><span class="sxs-lookup"><span data-stu-id="da39f-137">Requests</span></span>

![surveiller les performances d’une application web](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

<span data-ttu-id="da39f-139">Pour plus d'informations, consultez les pages suivantes :</span><span class="sxs-lookup"><span data-stu-id="da39f-139">For more information, see:</span></span>

* [<span data-ttu-id="da39f-140">Surveiller les applications web dans Microsoft Azure App Service</span><span class="sxs-lookup"><span data-stu-id="da39f-140">Monitor Web Apps in Azure App Service</span></span>](web-sites-monitor.md)
* [<span data-ttu-id="da39f-141">Réception de notifications d'alerte</span><span class="sxs-lookup"><span data-stu-id="da39f-141">Receive alert notifications</span></span>](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a><span data-ttu-id="da39f-142">Surveillance de l'état d'un point de terminaison Web</span><span class="sxs-lookup"><span data-stu-id="da39f-142">Monitor web endpoint status</span></span>
<span data-ttu-id="da39f-143">Si vous exécutez votre application web sur le niveau de tarification **Standard**, Web Apps vous permet de surveiller les deux points de terminaison à partir de trois régions géographiques.</span><span class="sxs-lookup"><span data-stu-id="da39f-143">If you are running your web app in the **Standard** pricing tier, Web Apps lets you monitor two endpoints from three geographic locations.</span></span>

<span data-ttu-id="da39f-144">Elle paramètre des tests Web à partir de différents emplacements où sont évalués les temps de réponse et de disponibilité des URL.</span><span class="sxs-lookup"><span data-stu-id="da39f-144">Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.</span></span> <span data-ttu-id="da39f-145">Ce type de test lance une requête HTTP get sur l’URL Web pour déterminer les temps de réponse et de disponibilité depuis chaque emplacement.</span><span class="sxs-lookup"><span data-stu-id="da39f-145">The test performs an HTTP GET operation on the web URL to determine the response time and uptime from each location.</span></span> <span data-ttu-id="da39f-146">Chaque emplacement configuré exécute un test toutes les cinq minutes.</span><span class="sxs-lookup"><span data-stu-id="da39f-146">Each configured location runs a test every five minutes.</span></span>

<span data-ttu-id="da39f-147">La disponibilité est contrôlée à l'aide des codes réponse HTTP et le temps de réponse est mesuré en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="da39f-147">Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.</span></span> <span data-ttu-id="da39f-148">Un test de surveillance échoue si le code de réponse HTTP est supérieur ou égal à 400 ou si la réponse prend plus de 30 secondes.</span><span class="sxs-lookup"><span data-stu-id="da39f-148">A monitoring test fails if the HTTP response code is greater than or equal to 400 or if the response takes more than 30 seconds.</span></span> <span data-ttu-id="da39f-149">Un point de terminaison est considéré comme disponible s'il passe avec succès les différents tests de surveillance à partir de tous les emplacements spécifiés.</span><span class="sxs-lookup"><span data-stu-id="da39f-149">An endpoint is considered available if its monitoring tests succeed from all the specified locations.</span></span>

<span data-ttu-id="da39f-150">Pour le configurer, voir [Surveillance des applications dans Azure App Service](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-150">To set it up, see [Monitor apps in Azure App Service](web-sites-monitor.md).</span></span>

<span data-ttu-id="da39f-151">Consultez également [Assurer la gestion des sites Web Azure et la surveillance des points de terminaison, avec Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) pour obtenir une vidéo décrivant la surveillance d’un point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="da39f-151">Also, see [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) for a video on endpoint monitoring.</span></span>

#### <a name="application-performance-monitoring-using-extensions"></a><span data-ttu-id="da39f-152">Analyse des performances des applications à l’aide d’Extensions</span><span class="sxs-lookup"><span data-stu-id="da39f-152">Application performance monitoring using Extensions</span></span>
<span data-ttu-id="da39f-153">Vous pouvez également surveiller les performances de votre application grâce aux *extensions de site*.</span><span class="sxs-lookup"><span data-stu-id="da39f-153">You can also monitor your application performance by using *site extensions*.</span></span>

<span data-ttu-id="da39f-154">Chaque application web d’App Service fournit un point de terminaison de gestion extensible qui vous permet d’utiliser un ensemble performant d’outils déployés en tant qu’extensions de site.</span><span class="sxs-lookup"><span data-stu-id="da39f-154">Each App Service web app provides an extensible management end point that allows you to use a powerful set of tools deployed as site extensions.</span></span> <span data-ttu-id="da39f-155">Les extensions incluent :</span><span class="sxs-lookup"><span data-stu-id="da39f-155">Extensions include:</span></span> 

- <span data-ttu-id="da39f-156">Des éditeurs de code source, tels que [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span><span class="sxs-lookup"><span data-stu-id="da39f-156">Source code editors like [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span></span> 
- <span data-ttu-id="da39f-157">Des outils de gestion pour les ressources connectées, comme une base de données MySQL connectée à une application web.</span><span class="sxs-lookup"><span data-stu-id="da39f-157">Management tools for connected resources such as a MySQL database connected to a web app.</span></span>

<span data-ttu-id="da39f-158">[Azure Application Insights](/services/application-insights/) et [New Relic](/marketplace/partners/newrelic/newrelic/) sont tous les deux des extensions de site de surveillance des performances disponibles.</span><span class="sxs-lookup"><span data-stu-id="da39f-158">[Azure Application Insights](/services/application-insights/) and [New Relic](/marketplace/partners/newrelic/newrelic/) are two of the performance monitoring site extensions that are available.</span></span> <span data-ttu-id="da39f-159">Pour utiliser New Relic, vous installez un agent lors de l'exécution.</span><span class="sxs-lookup"><span data-stu-id="da39f-159">To use New Relic, you install an agent at runtime.</span></span> <span data-ttu-id="da39f-160">Pour utiliser Azure Application Insights, vous devez régénérer votre code avec un kit de développement logiciel (SDK). Vous avez également la possibilité d’installer une extension qui fournit l’accès aux données supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="da39f-160">To use Azure Application Insights, you rebuild your code with an SDK, and you can also install an extension that provides access to additional data.</span></span> <span data-ttu-id="da39f-161">Le Kit de développement logiciel (SDK) vous permet d'écrire un code pour surveiller plus en détail l'utilisation et les performances de votre application.</span><span class="sxs-lookup"><span data-stu-id="da39f-161">The SDK lets you write code to monitor the usage and performance of your app in more detail.</span></span>

<span data-ttu-id="da39f-162">Pour utiliser Application Insights, consultez [Surveiller les performances dans les applications web](../application-insights/app-insights-web-monitor-performance.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-162">To use Application Insights, see [Monitor performance in web applications](../application-insights/app-insights-web-monitor-performance.md).</span></span>

<span data-ttu-id="da39f-163">Pour utiliser New Relic, consultez la page [Gestion des performances des applications New Relic sur Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-163">To use New Relic, see [New Relic Application Performance Management on Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span></span>

<a name="collect" />

### <a name="2-collect-data"></a><span data-ttu-id="da39f-164">2. Collecter les données</span><span class="sxs-lookup"><span data-stu-id="da39f-164">2. Collect data</span></span>
<span data-ttu-id="da39f-165">L’environnement Web Apps fournit des fonctionnalités de diagnostic pour les informations de journalisation provenant du serveur Web et de l’application web.</span><span class="sxs-lookup"><span data-stu-id="da39f-165">The Web Apps environment provides diagnostic functionality for logging information from both the web server and the web application.</span></span> <span data-ttu-id="da39f-166">Ces informations sont réparties en diagnostics de serveur web et diagnostics d’application.</span><span class="sxs-lookup"><span data-stu-id="da39f-166">The information is separated into web server diagnostics and application diagnostics.</span></span>

#### <a name="enable-web-server-diagnostics"></a><span data-ttu-id="da39f-167">Activer les diagnostics de serveur web</span><span class="sxs-lookup"><span data-stu-id="da39f-167">Enable web server diagnostics</span></span>
<span data-ttu-id="da39f-168">Vous pouvez activer ou désactiver les types de journaux suivants :</span><span class="sxs-lookup"><span data-stu-id="da39f-168">You can enable or disable the following kinds of logs:</span></span>

* <span data-ttu-id="da39f-169">**Messages d’erreur détaillés** : informations d’erreur détaillées pour les codes d’état HTTP qui indiquent un échec (code d’état 400 ou supérieur).</span><span class="sxs-lookup"><span data-stu-id="da39f-169">**Detailed Error Logging** - Detailed error information for HTTP status codes that indicate a failure (status code 400 or greater).</span></span> <span data-ttu-id="da39f-170">Il peut s'agir d'informations qui vous aident à déterminer la raison pour laquelle le serveur a renvoyé le code d'erreur.</span><span class="sxs-lookup"><span data-stu-id="da39f-170">This may contain information that can help determine why the server returned the error code.</span></span>
* <span data-ttu-id="da39f-171">**Suivi des demandes ayant échoué** : informations détaillées sur les demandes qui ont échoué, y compris une trace des composants IIS utilisés pour traiter la demande et la durée dans chaque composant.</span><span class="sxs-lookup"><span data-stu-id="da39f-171">**Failed Request Tracing** - Detailed information on failed requests, including a trace of the IIS components used to process the request and the time taken in each component.</span></span> <span data-ttu-id="da39f-172">Cela peut se révéler utile si vous essayez d’améliorer le fonctionnement des performances d’application web ou d’isoler la cause d’une erreur HTTP spécifique.</span><span class="sxs-lookup"><span data-stu-id="da39f-172">This can be useful if you are attempting to improve web app performance or isolate what is causing a specific HTTP error.</span></span>
* <span data-ttu-id="da39f-173">**Journalisation du serveur Web** : informations sur les transactions HTTP à l’aide du format de fichier journal étendu W3C.</span><span class="sxs-lookup"><span data-stu-id="da39f-173">**Web Server Logging** - Information about HTTP transactions using the W3C extended log file format.</span></span> <span data-ttu-id="da39f-174">Ce rapport se révèle utile pour déterminer les mesures globales d’une application web, comme le nombre de demandes traitées ou le nombre de demandes émanant d’une adresse IP spécifique.</span><span class="sxs-lookup"><span data-stu-id="da39f-174">This is useful when determining overall web app metrics, such as the number of requests handled or how many requests are from a specific IP address.</span></span>

#### <a name="enable-application-diagnostics"></a><span data-ttu-id="da39f-175">Activer les diagnostics d’application</span><span class="sxs-lookup"><span data-stu-id="da39f-175">Enable application diagnostics</span></span>
<span data-ttu-id="da39f-176">Il existe plusieurs façons de collecter des données de performances d’application à partir de Web Apps, d’activer votre application à partir de Visual Studio, ou de modifier votre code d’application afin de consigner plus d’informations et de traces.</span><span class="sxs-lookup"><span data-stu-id="da39f-176">There are several options to collect application performance data from Web Apps, profile your application live from Visual Studio, or modify your application code to log more information and traces.</span></span> <span data-ttu-id="da39f-177">Vous pouvez faire votre choix en fonction de l’accès à l’application et de vos observations sur les outils de surveillance.</span><span class="sxs-lookup"><span data-stu-id="da39f-177">You can choose the options based on how much access you have to the application and what you observed from the monitoring tools.</span></span>

##### <a name="use-application-insights-profiler"></a><span data-ttu-id="da39f-178">Utiliser Application Insights Profiler</span><span class="sxs-lookup"><span data-stu-id="da39f-178">Use Application Insights Profiler</span></span>
<span data-ttu-id="da39f-179">Vous pouvez activer Application Insights Profiler pour commencer à capturer des traces de performances détaillées.</span><span class="sxs-lookup"><span data-stu-id="da39f-179">You can enable the Application Insights Profiler to start capturing detailed performance traces.</span></span> <span data-ttu-id="da39f-180">Vous pouvez accéder aux traces capturées jusqu’à cinq jours auparavant lorsque vous devez examiner les problèmes ayant eu lieu.</span><span class="sxs-lookup"><span data-stu-id="da39f-180">You can access traces captured up to five days ago when you need to investigate problems happened in the past.</span></span> <span data-ttu-id="da39f-181">Vous pouvez choisir cette option si vous avez accès à la ressource Application Insights de l’application web sur le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="da39f-181">You can choose this option as long as you have access to the web app's Application Insights resource on Azure portal.</span></span>

<span data-ttu-id="da39f-182">Application Insights Profiler fournit des statistiques sur les temps de réponse de chaque appel web, et des traces qui indiquent la ligne de code responsable des réponses lentes.</span><span class="sxs-lookup"><span data-stu-id="da39f-182">Application Insights Profiler provides statistics on response time for each web call and traces that indicates which line of code caused the slow responses.</span></span> <span data-ttu-id="da39f-183">Parfois, l’application App Service est lente, car un code spécifique n’a pas été écrit de manière performante.</span><span class="sxs-lookup"><span data-stu-id="da39f-183">Sometimes the App Service app is slow because certain code is not written in a performant way.</span></span> <span data-ttu-id="da39f-184">Il peut s’agir par exemple d’un code séquentiel exécuté en parallèle et de conflits indésirables de verrouillage de base de données.</span><span class="sxs-lookup"><span data-stu-id="da39f-184">Examples include sequential code that can be run in parallel and undesired database lock contentions.</span></span> <span data-ttu-id="da39f-185">Pour augmenter les performances de l’application, il faut supprimer ces goulots d’étranglement dans le code. Mais ceux-ci sont difficiles à détecter si vous ne configurez par des journaux et des suivis élaborés.</span><span class="sxs-lookup"><span data-stu-id="da39f-185">Removing these bottlenecks in the code increases the app's performance, but they are hard to detect without setting up elaborate traces and logs.</span></span> <span data-ttu-id="da39f-186">Les traces collectées par Application Insights Profiler permettent d’identifier les lignes de code qui ralentissent l’application, et de résoudre ce problème pour les applications App Service.</span><span class="sxs-lookup"><span data-stu-id="da39f-186">The traces collected by Application Insights Profiler helps identifying the lines of code that slows down the application and overcome this challenge for App Service apps.</span></span>

 <span data-ttu-id="da39f-187">Pour plus d’informations, consultez [Profilage des applications web dynamiques Azure avec Application Insights](../application-insights/app-insights-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-187">For more information, see [Profiling live Azure web apps with Application Insights](../application-insights/app-insights-profiler.md).</span></span>

##### <a name="use-remote-profiling"></a><span data-ttu-id="da39f-188">Utiliser le profilage distant</span><span class="sxs-lookup"><span data-stu-id="da39f-188">Use Remote Profiling</span></span>
<span data-ttu-id="da39f-189">Dans Azure Service App, Web Apps, API Apps et WebJobs peuvent être profilés à distance.</span><span class="sxs-lookup"><span data-stu-id="da39f-189">In Azure App Service, Web Apps, API Apps, and WebJobs can be remotely profiled.</span></span> <span data-ttu-id="da39f-190">Choisissez cette option si vous avez accès à la ressource d’application web et si vous savez comment reproduire le problème, ou si vous connaissez l’intervalle de temps exact auquel le problème de performances se produit.</span><span class="sxs-lookup"><span data-stu-id="da39f-190">Choose this option if you have access to the web app resource and you know how to reproduce the issue, or if you know the exact time interval the performance issue happens.</span></span>

<span data-ttu-id="da39f-191">Le profilage à distance est pertinent si l’utilisation de l’UC du processus est élevée et si votre processus s’exécute plus lentement que prévu, ou si la latence des requêtes HTTP est supérieure à la normale : vous pouvez analyser à distance le profil de vos processus et faire en sorte que les piles d’appel d’exemple analysent l’activité du processus et les chemins actifs de code.</span><span class="sxs-lookup"><span data-stu-id="da39f-191">Remote Profiling is useful if the CPU usage of the process is high and your process is running slower than expected, or the latency of HTTP requests are higher than normal, you can remotely profile your process and get the CPU sampling call stacks to analyze the process activity and code hot paths.</span></span>

<span data-ttu-id="da39f-192">Pour plus d’informations, consultez [Prise en charge d’analyse de profil distant dans Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span><span class="sxs-lookup"><span data-stu-id="da39f-192">For more information, see [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span></span>

##### <a name="set-up-diagnostic-traces-manually"></a><span data-ttu-id="da39f-193">Configurer manuellement des traces de diagnostic</span><span class="sxs-lookup"><span data-stu-id="da39f-193">Set up diagnostic traces manually</span></span>
<span data-ttu-id="da39f-194">Si vous avez accès au code source de l’application web, le diagnostic d’application vous permet de recueillir des informations générées par une application web.</span><span class="sxs-lookup"><span data-stu-id="da39f-194">If you have access to the web application source code, Application diagnostics enables you to capture information produced by a web application.</span></span> <span data-ttu-id="da39f-195">Les applications ASP.NET peuvent utiliser la classe `System.Diagnostics.Trace` pour enregistrer des informations dans le journal de diagnostic d’application.</span><span class="sxs-lookup"><span data-stu-id="da39f-195">ASP.NET applications can use the `System.Diagnostics.Trace` class to log information to the application diagnostics log.</span></span> <span data-ttu-id="da39f-196">Toutefois, vous devez modifier le code ou redéployer votre application.</span><span class="sxs-lookup"><span data-stu-id="da39f-196">However, you need to change the code and redeploy your application.</span></span> <span data-ttu-id="da39f-197">Cette méthode est recommandée si votre application s’exécute sur un environnement de test.</span><span class="sxs-lookup"><span data-stu-id="da39f-197">This method is recommended if your app is running on a testing environment.</span></span>

<span data-ttu-id="da39f-198">Pour obtenir des instructions détaillées sur la façon de configurer votre application de journalisation, consultez [Activer la journalisation des diagnostics pour les applications web dans le Service d’application Azure](web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-198">For detailed instructions on how to configure your application for logging, see [Enable diagnostics logging for web apps in Azure App Service](web-sites-enable-diagnostic-log.md).</span></span>

#### <a name="use-the-azure-app-service-support-portal"></a><span data-ttu-id="da39f-199">Utiliser le portail de support Azure App Service</span><span class="sxs-lookup"><span data-stu-id="da39f-199">Use the Azure App Service support portal</span></span>
<span data-ttu-id="da39f-200">Web Apps vous offre la possibilité de résoudre les problèmes liés à votre application web grâce à des journaux HTTP, les journaux des événements, les vidages de processus et bien plus encore.</span><span class="sxs-lookup"><span data-stu-id="da39f-200">Web Apps provides you with the ability to troubleshoot issues related to your web app by looking at HTTP logs, event logs, process dumps, and more.</span></span> <span data-ttu-id="da39f-201">Vous pouvez accéder à toutes ces informations à l’aide de notre portail de support à l’adresse **http://&lt;your app name>.scm.azurewebsites.net/Support**</span><span class="sxs-lookup"><span data-stu-id="da39f-201">You can access all this information using our Support portal at **http://&lt;your app name>.scm.azurewebsites.net/Support**</span></span>

<span data-ttu-id="da39f-202">Le portail de support Azure App Service vous propose trois onglets distincts pour prendre en charge les trois étapes d’un scénario de dépannage courant :</span><span class="sxs-lookup"><span data-stu-id="da39f-202">The Azure App Service support portal provides you with three separate tabs to support the three steps of a common troubleshooting scenario:</span></span>

1. <span data-ttu-id="da39f-203">Observer le comportement actuel</span><span class="sxs-lookup"><span data-stu-id="da39f-203">Observe current behavior</span></span>
2. <span data-ttu-id="da39f-204">Analyser en collectant des informations de diagnostic et en exécutant les analyseurs intégrés</span><span class="sxs-lookup"><span data-stu-id="da39f-204">Analyze by collecting diagnostics information and running the built-in analyzers</span></span>
3. <span data-ttu-id="da39f-205">Résoudre</span><span class="sxs-lookup"><span data-stu-id="da39f-205">Mitigate</span></span>

<span data-ttu-id="da39f-206">Si le problème est en cours, cliquez sur **Analyser** > **Diagnostics** > **Diagnostiquer maintenant** pour créer une session de diagnostic, afin de recueillir les journaux HTTP, les journaux de l’observateur d’événements, les vidages de mémoire, les journaux d’erreurs PHP et le rapport de traitement PHP.</span><span class="sxs-lookup"><span data-stu-id="da39f-206">If the issue is happening right now, click **Analyze** > **Diagnostics** > **Diagnose Now** to create a diagnostic session for you, which collects HTTP logs, event viewer logs, memory dumps, PHP error logs, and PHP process report.</span></span>

<span data-ttu-id="da39f-207">Une fois les données collectées, le portail de support analyse les données et vous fournit un rapport HTML.</span><span class="sxs-lookup"><span data-stu-id="da39f-207">Once the data is collected, the support portal runs an analysis on the data and provides you with an HTML report.</span></span>

<span data-ttu-id="da39f-208">Si vous souhaitez télécharger les données, par défaut, celles-ci sont stockées dans le dossier D:\home\data\DaaS.</span><span class="sxs-lookup"><span data-stu-id="da39f-208">In case you want to download the data, by default, it would be stored in the D:\home\data\DaaS folder.</span></span>

<span data-ttu-id="da39f-209">Pour plus d’informations sur le portail de support Azure App Service, consultez [Nouvelles mises à jour à l’extension de site de support pour les sites web Azure](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span><span class="sxs-lookup"><span data-stu-id="da39f-209">For more information on the Azure App Service support portal, see [New Updates to Support Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span></span>

#### <a name="use-the-kudu-debug-console"></a><span data-ttu-id="da39f-210">Utilisation de la console de débogage Kudu</span><span class="sxs-lookup"><span data-stu-id="da39f-210">Use the Kudu Debug Console</span></span>
<span data-ttu-id="da39f-211">Web Apps est fourni avec une console de débogage que vous pouvez utiliser pour le débogage, l’exploration, le téléchargement de fichiers, ainsi que les points de terminaison JSON pour obtenir des informations relatives à votre environnement.</span><span class="sxs-lookup"><span data-stu-id="da39f-211">Web Apps comes with a debug console that you can use for debugging, exploring, uploading files, as well as JSON endpoints for getting information about your environment.</span></span> <span data-ttu-id="da39f-212">Il s’agit de la *console Kudu* ou du *tableau de bord SCM* pour votre application web.</span><span class="sxs-lookup"><span data-stu-id="da39f-212">This console is called the *Kudu Console* or the *SCM Dashboard* for your web app.</span></span>

<span data-ttu-id="da39f-213">Vous pouvez accéder à ce tableau de bord avec le lien **https://&lt;Your app name>.scm.azurewebsites.net/**.</span><span class="sxs-lookup"><span data-stu-id="da39f-213">You can access this dashboard by going to the link **https://&lt;Your app name>.scm.azurewebsites.net/**.</span></span>

<span data-ttu-id="da39f-214">Kudu fournit, entre autres, les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="da39f-214">Some of the things that Kudu provides are:</span></span>

* <span data-ttu-id="da39f-215">paramètres d’environnement pour votre application ;</span><span class="sxs-lookup"><span data-stu-id="da39f-215">environment settings for your application</span></span>
* <span data-ttu-id="da39f-216">flux de journal ;</span><span class="sxs-lookup"><span data-stu-id="da39f-216">log stream</span></span>
* <span data-ttu-id="da39f-217">vidage de diagnostic ;</span><span class="sxs-lookup"><span data-stu-id="da39f-217">diagnostic dump</span></span>
* <span data-ttu-id="da39f-218">console de débogage dans laquelle vous pouvez exécuter les applets de commande Powershell et les commandes DOS de base.</span><span class="sxs-lookup"><span data-stu-id="da39f-218">debug console in which you can run Powershell cmdlets and basic DOS commands.</span></span>

<span data-ttu-id="da39f-219">Autre fonctionnalité utile de Kudu, dans le cas où votre application lève des exceptions de première chance, vous pouvez utiliser Kudu et l’outil Procdump de SysInternals pour créer des vidages de mémoire.</span><span class="sxs-lookup"><span data-stu-id="da39f-219">Another useful feature of Kudu is that, in case your application is throwing first-chance exceptions, you can use Kudu and the SysInternals tool Procdump to create memory dumps.</span></span> <span data-ttu-id="da39f-220">Ces vidages de mémoire sont des instantanés du processus et peuvent souvent vous aider à résoudre les problèmes plus complexes avec votre application web.</span><span class="sxs-lookup"><span data-stu-id="da39f-220">These memory dumps are snapshots of the process and can often help you troubleshoot more complicated issues with your web app.</span></span>

<span data-ttu-id="da39f-221">Pour plus d’informations sur les fonctionnalités disponibles dans Kudu, consultez [Outils Team Services de Sites Web Azure que vous devez connaître](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span><span class="sxs-lookup"><span data-stu-id="da39f-221">For more information on features available in Kudu, see [Azure Websites Team Services tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span></span>

<a name="mitigate" />

### <a name="3-mitigate-the-issue"></a><span data-ttu-id="da39f-222">3. Résoudre le problème</span><span class="sxs-lookup"><span data-stu-id="da39f-222">3. Mitigate the issue</span></span>
#### <a name="scale-the-web-app"></a><span data-ttu-id="da39f-223">Mise à l’échelle de l’application web</span><span class="sxs-lookup"><span data-stu-id="da39f-223">Scale the web app</span></span>
<span data-ttu-id="da39f-224">Dans Azure App Service, pour améliorer les performances et le débit, vous pouvez ajuster l’échelle à laquelle vous exécutez votre application.</span><span class="sxs-lookup"><span data-stu-id="da39f-224">In Azure App Service, for increased performance and throughput,  you can adjust the scale at which you are running your application.</span></span> <span data-ttu-id="da39f-225">La mise à l’échelle d’une application web implique deux actions associées : l’évolution de votre plan App Service vers un niveau de tarification supérieur et la configuration de certains paramètres après le passage à ce niveau de tarification supérieur.</span><span class="sxs-lookup"><span data-stu-id="da39f-225">Scaling up a web app involves two related actions: changing your App Service plan to a higher pricing tier, and configuring certain settings after you have switched to the higher pricing tier.</span></span>

<span data-ttu-id="da39f-226">Pour plus d'informations sur la mise à l'échelle, consultez [Mise à l'échelle d'une application web dans Microsoft Azure App Service](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-226">For more information on scaling, see [Scale a web app in Azure App Service](web-sites-scale.md).</span></span>

<span data-ttu-id="da39f-227">En outre, vous pouvez choisir d’exécuter votre application sur plusieurs instances.</span><span class="sxs-lookup"><span data-stu-id="da39f-227">Additionally, you can choose to run your application on more than one instance.</span></span> <span data-ttu-id="da39f-228">La montée en charge vous offre plus de capacité de traitement, mais également un certain niveau de tolérance aux pannes.</span><span class="sxs-lookup"><span data-stu-id="da39f-228">Scaling out not only provides you with more processing capability, but also gives you some amount of fault tolerance.</span></span> <span data-ttu-id="da39f-229">Si le processus s’arrête sur une instance, les autres instances continuent à servir les requêtes.</span><span class="sxs-lookup"><span data-stu-id="da39f-229">If the process goes down on one instance, the other instances continue to serve requests.</span></span>

<span data-ttu-id="da39f-230">Vous pouvez définir la mise à l’échelle pour qu’elle soit manuelle ou automatique.</span><span class="sxs-lookup"><span data-stu-id="da39f-230">You can set the scaling to be Manual or Automatic.</span></span>

#### <a name="use-autoheal"></a><span data-ttu-id="da39f-231">Utilisation de la correction automatique (AutoHeal)</span><span class="sxs-lookup"><span data-stu-id="da39f-231">Use AutoHeal</span></span>
<span data-ttu-id="da39f-232">La correction automatique (AutoHeal) recycle le processus de travail pour votre application en fonction des paramètres que vous choisissez (comme les modifications de configuration, les requêtes, les limites de mémoire ou le temps nécessaire pour exécuter une requête).</span><span class="sxs-lookup"><span data-stu-id="da39f-232">AutoHeal recycles the worker process for your app based on settings you choose (like configuration changes, requests, memory-based limits, or the time needed to execute a request).</span></span> <span data-ttu-id="da39f-233">La plupart du temps, le recyclage du processus est le moyen le plus rapide pour résoudre un problème.</span><span class="sxs-lookup"><span data-stu-id="da39f-233">Most of the time, recycle the process is the fastest way to recover from a problem.</span></span> <span data-ttu-id="da39f-234">Même si vous pouvez toujours redémarrer l’application web directement dans le portail Azure, AutoHeal le fait automatiquement pour vous.</span><span class="sxs-lookup"><span data-stu-id="da39f-234">Though you can always restart the web app from directly within the Azure portal, AutoHeal does it automatically for you.</span></span> <span data-ttu-id="da39f-235">Il vous suffit d’ajouter des déclencheurs dans le fichier web.config racine pour votre application web.</span><span class="sxs-lookup"><span data-stu-id="da39f-235">All you need to do is add some triggers in the root web.config for your web app.</span></span> <span data-ttu-id="da39f-236">Ces paramètres fonctionnent de la même façon, que votre application soit ou non une application .Net.</span><span class="sxs-lookup"><span data-stu-id="da39f-236">These settings would work in the same way even if your application is not a .Net app.</span></span>

<span data-ttu-id="da39f-237">Pour plus d'informations, consultez [Correction automatique de Sites Web Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="da39f-237">For more information, see [Auto-Healing Azure Web Sites](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span></span>

#### <a name="restart-the-web-app"></a><span data-ttu-id="da39f-238">Redémarrage de l’application web</span><span class="sxs-lookup"><span data-stu-id="da39f-238">Restart the web app</span></span>
<span data-ttu-id="da39f-239">Il s’agit souvent du moyen le plus simple de résoudre des problèmes ponctuels.</span><span class="sxs-lookup"><span data-stu-id="da39f-239">Restarting is often the simplest way to recover from one-time issues.</span></span> <span data-ttu-id="da39f-240">Sur le [portail Azure](https://portal.azure.com/), dans le panneau de votre application web, vous avez la possibilité d’arrêter ou de redémarrer votre application.</span><span class="sxs-lookup"><span data-stu-id="da39f-240">On the [Azure portal](https://portal.azure.com/), on your web app’s blade, you have the options to stop or restart your app.</span></span>

 ![redémarrer une application web pour résoudre les problèmes de performances](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

<span data-ttu-id="da39f-242">Vous pouvez également gérer votre application web à l’aide d’Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="da39f-242">You can also manage your web app using Azure Powershell.</span></span> <span data-ttu-id="da39f-243">Pour plus d'informations, consultez [Utilisation d'Azure PowerShell avec le Gestionnaire de ressources Azure](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="da39f-243">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>
