---
title: "Dépanner une application web dans le Service d’application Microsoft Azure à l’aide de Visual Studio"
description: "Découvrez comment dépanner une application web Microsoft Azure via des outils de journalisation, de suivi et de débogage distants intégrés dans Visual Studio 2013."
services: app-service
documentationcenter: .net
author: tdykstra
manager: erikre
editor: 
ms.assetid: def8e481-7803-4371-aa55-64025d116c97
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 08/29/2016
ms.author: rachelap
ms.openlocfilehash: abfd9a4c1b346377d7f1fc30455a1487b113537d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshoot-a-web-app-in-azure-app-service-using-visual-studio"></a><span data-ttu-id="8ee78-103">Dépanner une application web dans le Service d’application Microsoft Azure à l’aide de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8ee78-103">Troubleshoot a web app in Azure App Service using Visual Studio</span></span>
## <a name="overview"></a><span data-ttu-id="8ee78-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="8ee78-104">Overview</span></span>
<span data-ttu-id="8ee78-105">Ce didacticiel explique comment utiliser les outils Visual Studio pour déboguer une application web dans [App Service](http://go.microsoft.com/fwlink/?LinkId=529714) en activant le [Mode débogage](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) à distance ou en consultant les journaux des applications et des serveurs web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-105">This tutorial shows how to use Visual Studio tools that help debug a web app in [App Service](http://go.microsoft.com/fwlink/?LinkId=529714), by running in [debug mode](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) remotely or by viewing application logs and web server logs.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

<span data-ttu-id="8ee78-106">Vous apprendrez ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="8ee78-106">You'll learn:</span></span>

* <span data-ttu-id="8ee78-107">quelles sont les fonctions de gestion d’application web Microsoft Azure proposées par Visual Studio ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-107">Which Azure web app management functions are available in Visual Studio.</span></span>
* <span data-ttu-id="8ee78-108">comment utiliser l’affichage à distance de Visual Studio pour apporter des modifications rapides dans une application web à distance ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-108">How to use Visual Studio remote view to make quick changes in a remote web app.</span></span>
* <span data-ttu-id="8ee78-109">comment exécuter le mode débogage à distance lorsqu’un projet est exécuté dans Microsoft Azure, pour une application web comme pour une tâche web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-109">How to run debug mode remotely while a project is running in Azure, both for a web app and for a WebJob.</span></span>
* <span data-ttu-id="8ee78-110">la création de journaux de suivi d'application et leur affichage pendant leur création par l'application ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-110">How to create application trace logs and view them while the application is creating them.</span></span>
* <span data-ttu-id="8ee78-111">l'affichage des journaux de serveur Web, notamment des messages d'erreur détaillés et le suivi des demandes ayant échoué ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-111">How to view web server logs, including detailed error messages and failed request tracing.</span></span>
* <span data-ttu-id="8ee78-112">l'envoi de journaux de diagnostic à un compte Azure Storage et leur affichage depuis ce compte.</span><span class="sxs-lookup"><span data-stu-id="8ee78-112">How to send diagnostic logs to an Azure Storage account and view them there.</span></span>

<span data-ttu-id="8ee78-113">Si vous disposez de Visual Studio Ultimate, vous pouvez également utiliser [IntelliTrace](http://msdn.microsoft.com/library/vstudio/dd264915.aspx) à des fins de débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-113">If you have Visual Studio Ultimate, you can also use [IntelliTrace](http://msdn.microsoft.com/library/vstudio/dd264915.aspx) for debugging.</span></span> <span data-ttu-id="8ee78-114">IntelliTrace n’est pas couvert dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="8ee78-114">IntelliTrace is not covered in this tutorial.</span></span>

## <span data-ttu-id="8ee78-115"><a name="prerequisites"></a>Configuration requise</span><span class="sxs-lookup"><span data-stu-id="8ee78-115"><a name="prerequisites"></a>Prerequisites</span></span>
<span data-ttu-id="8ee78-116">Ce didacticiel fonctionne avec l’environnement de développement, le projet Web et l’application Web Azure que vous avez configurés dans le didacticiel [Prise en main d’Azure et ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="8ee78-116">This tutorial works with the development environment, web project, and Azure web app that you set up in [Get started with Azure and ASP.NET][GetStarted].</span></span> <span data-ttu-id="8ee78-117">Pour les sections WebJobs, vous aurez besoin de l’application créée dans le cadre de la [Prise en main du Kit de développement logiciel (SDK) WebJobs Azure][GetStartedWJ].</span><span class="sxs-lookup"><span data-stu-id="8ee78-117">For the WebJobs sections, you'll need the application that you create in [Get Started with the Azure WebJobs SDK][GetStartedWJ].</span></span>

<span data-ttu-id="8ee78-118">Les exemples de code inclus dans ce didacticiel sont destinés à une application Web C# MVC, mais les procédures de résolution de problèmes sont identiques pour les applications Visual Basic et Web Forms.</span><span class="sxs-lookup"><span data-stu-id="8ee78-118">The code samples shown in this tutorial are for a C# MVC web application, but the troubleshooting procedures are the same for Visual Basic and Web Forms applications.</span></span>

<span data-ttu-id="8ee78-119">Ce didacticiel suppose que vous utilisez Visual Studio 2015 ou 2013.</span><span class="sxs-lookup"><span data-stu-id="8ee78-119">The tutorial assumes you're using Visual Studio 2015 or 2013.</span></span> <span data-ttu-id="8ee78-120">Si vous utilisez Visual Studio 2013, les fonctionnalités de WebJobs requièrent la [mise à jour 4 (Update 4)](http://go.microsoft.com/fwlink/?LinkID=510314) ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-120">If you're using Visual Studio 2013, the WebJobs features require [Update 4](http://go.microsoft.com/fwlink/?LinkID=510314) or later.</span></span>

<span data-ttu-id="8ee78-121">La fonctionnalité de diffusion de journaux en continu est opérationnelle uniquement pour les applications ciblant .NET Framework 4 ou une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-121">The streaming logs feature only works for applications that target .NET Framework 4 or later.</span></span>

## <span data-ttu-id="8ee78-122"><a name="sitemanagement"></a>Gestion et configuration de l’application Web</span><span class="sxs-lookup"><span data-stu-id="8ee78-122"><a name="sitemanagement"></a>Web app configuration and management</span></span>
<span data-ttu-id="8ee78-123">Visual Studio permet d’accéder à un sous-ensemble des fonctionnalités de gestion des applications Web et des paramètres de configuration disponibles sur le [portail Azure](http://go.microsoft.com/fwlink/?LinkId=529715).</span><span class="sxs-lookup"><span data-stu-id="8ee78-123">Visual Studio provides access to a subset of the web app management functions and configuration settings available in the [Azure Portal](http://go.microsoft.com/fwlink/?LinkId=529715).</span></span> <span data-ttu-id="8ee78-124">Cette section présente les éléments disponibles en cas d’utilisation de l’ **Explorateur de serveurs**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-124">In this section you'll see what's available by using **Server Explorer**.</span></span> <span data-ttu-id="8ee78-125">Pour connaître les dernières fonctionnalités d’intégration d’Azure, essayez également **Cloud Explorer** .</span><span class="sxs-lookup"><span data-stu-id="8ee78-125">To see the latest Azure integration features, try out **Cloud Explorer** also.</span></span> <span data-ttu-id="8ee78-126">Vous pouvez ouvrir les deux fenêtres à partir du menu **Affichage** .</span><span class="sxs-lookup"><span data-stu-id="8ee78-126">You can open both windows from the **View** menu.</span></span>

1. <span data-ttu-id="8ee78-127">Si vous n’êtes pas déjà connecté à Azure dans Visual Studio, cliquez sur le bouton **Se connecter à Azure** dans l’**Explorateur de serveurs**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-127">If you aren't already signed in to Azure in Visual Studio, click the **Connect to Azure** button in **Server Explorer**.</span></span>

    <span data-ttu-id="8ee78-128">Vous pouvez aussi installer un certificat de gestion permettant d'accéder à votre compte.</span><span class="sxs-lookup"><span data-stu-id="8ee78-128">An alternative is to install a management certificate that enables access to your account.</span></span> <span data-ttu-id="8ee78-129">Si vous choisissez d’installer un certificat, cliquez avec le bouton droit sur le nœud **Azure** dans l’**Explorateur de serveurs**, puis cliquez sur **Gérer et filtrer les abonnements** dans le menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="8ee78-129">If you choose to install a certificate, right-click the **Azure** node in **Server Explorer**, and then click **Manage and Filter Subscriptions** in the context menu.</span></span> <span data-ttu-id="8ee78-130">Dans la boîte de dialogue **Gérer les abonnements Azure**, cliquez sur l’onglet **Certificats**, puis sur **Importer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-130">In the **Manage Azure Subscriptions** dialog box, click the **Certificates** tab, and then click **Import**.</span></span> <span data-ttu-id="8ee78-131">Suivez la procédure pour télécharger et importer un fichier d’abonnement (portant l’extension *.publishsettings* ) pour votre compte Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-131">Follow the directions to download and then import a subscription file (also called a *.publishsettings* file) for your Azure account.</span></span>

   > [!NOTE]
   > <span data-ttu-id="8ee78-132">Si vous téléchargez un fichier d’abonnement, enregistrez-le dans un dossier situé hors de vos répertoires de code source (par exemple, dans le dossier Téléchargements), puis supprimez-le une fois l’importation terminée.</span><span class="sxs-lookup"><span data-stu-id="8ee78-132">If you download a subscription file, save it to a folder outside your source code directories (for example, in the Downloads folder), and then delete it once the import has completed.</span></span> <span data-ttu-id="8ee78-133">Si un utilisateur malveillant accède au fichier d’abonnement, il peut modifier, créer et supprimer vos services Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-133">A malicious user who gains access to the subscription file can edit, create, and delete your Azure services.</span></span>
   >
   >

    <span data-ttu-id="8ee78-134">Pour plus d’informations sur la connexion aux ressources Azure à partir de Visual Studio, consultez la page [Gérer des comptes, des abonnements et des rôles d’administrateur](http://go.microsoft.com/fwlink/?LinkId=324796#BKMK_AccountVCert).</span><span class="sxs-lookup"><span data-stu-id="8ee78-134">For more information about connecting to Azure resources from Visual Studio, see [Manage Accounts, Subscriptions, and Administrative Roles](http://go.microsoft.com/fwlink/?LinkId=324796#BKMK_AccountVCert).</span></span>
2. <span data-ttu-id="8ee78-135">Dans l’**Explorateur de serveurs**, développez **Azure**, puis **App Service**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-135">In **Server Explorer**, expand **Azure** and expand **App Service**.</span></span>
3. <span data-ttu-id="8ee78-136">Développez le groupe de ressources incluant l’application web que vous avez créée dans le cadre du didacticiel [Prise en main d’Azure et d’ASP.NET][GetStarted], puis cliquez sur le nœud d’application web et sur **Afficher les paramètres**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-136">Expand the resource group that includes the web app that you created in [Getting started with Azure and ASP.NET][GetStarted], and then right-click the web app node and click **View Settings**.</span></span>

    ![Afficher les paramètres dans l'Explorateur de serveurs](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-viewsettings.png)

    <span data-ttu-id="8ee78-138">L’onglet **Application Web Azure** apparaît, affichant les tâches de gestion et de configuration des applications Web disponibles dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-138">The **Azure Web App** tab appears, and you can see there the web app management and configuration tasks that are available in Visual Studio.</span></span>

    ![Fenêtre Application web Microsoft Azure](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-configtab.png)

    <span data-ttu-id="8ee78-140">Dans ce didacticiel, vous utiliserez les menus déroulants de suivi et de journalisation.</span><span class="sxs-lookup"><span data-stu-id="8ee78-140">In this tutorial you'll be using the logging and tracing drop-downs.</span></span> <span data-ttu-id="8ee78-141">Vous utiliserez également le débogage à distance en l'activant d'une façon différente.</span><span class="sxs-lookup"><span data-stu-id="8ee78-141">You'll also use remote debugging but you'll use a different method to enable it.</span></span>

    <span data-ttu-id="8ee78-142">Pour plus d’informations sur les cases à cocher Paramètres de l’application et Chaînes de connexion de cette fenêtre, consultez l’article [Fonctionnement des chaînes d’application et de connexion dans les applications Web Azure](http://blogs.msdn.com/b/windowsazure/archive/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work.aspx)(en anglais).</span><span class="sxs-lookup"><span data-stu-id="8ee78-142">For information about the App Settings and Connection Strings boxes in this window, see [Azure Web Apps: How Application Strings and Connection Strings Work](http://blogs.msdn.com/b/windowsazure/archive/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work.aspx).</span></span>

    <span data-ttu-id="8ee78-143">Pour effectuer une tâche de gestion d’application Web non exécutable dans cette fenêtre, cliquez sur **Ouvrir dans le portail de gestion** pour ouvrir une fenêtre de navigateur dans le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-143">If you want to perform a web app management task that can't be done in this window, click **Open in Management Portal** to open a browser window to the Azure portal.</span></span>

## <span data-ttu-id="8ee78-144"><a name="remoteview"></a>Accès aux fichiers d’applications Web dans l’Explorateur de serveurs</span><span class="sxs-lookup"><span data-stu-id="8ee78-144"><a name="remoteview"></a>Access web app files in Server Explorer</span></span>
<span data-ttu-id="8ee78-145">En général, vous déployez un projet Web avec l’indicateur `customErrors` défini sur la valeur `On` ou `RemoteOnly` dans le fichier Web.config, ce qui signifie que vous n’obtenez pas de message d’erreur utile en cas de problème.</span><span class="sxs-lookup"><span data-stu-id="8ee78-145">You typically deploy a web project with the `customErrors` flag in the Web.config file set to `On` or `RemoteOnly`, which means you don't get a helpful error message when something goes wrong.</span></span> <span data-ttu-id="8ee78-146">Généralement, ces messages se présentent sous la forme d'une page comme celles qui suivent.</span><span class="sxs-lookup"><span data-stu-id="8ee78-146">For many errors all you get is a page like one of the following ones.</span></span>

<span data-ttu-id="8ee78-147">**Erreur de serveur dans l’application « / » :**</span><span class="sxs-lookup"><span data-stu-id="8ee78-147">**Server Error in '/' Application:**</span></span>

![Page d’erreur inutile](./media/web-sites-dotnet-troubleshoot-visual-studio/genericerror.png)

<span data-ttu-id="8ee78-149">**Nous avons rencontré une erreur :**</span><span class="sxs-lookup"><span data-stu-id="8ee78-149">**An error occurred:**</span></span>

![Page d’erreur inutile](./media/web-sites-dotnet-troubleshoot-visual-studio/genericerror1.png)

<span data-ttu-id="8ee78-151">**Le site Web ne peut pas afficher la page**</span><span class="sxs-lookup"><span data-stu-id="8ee78-151">**The website cannot display the page**</span></span>

![Page d’erreur inutile](./media/web-sites-dotnet-troubleshoot-visual-studio/genericerror2.png)

<span data-ttu-id="8ee78-153">Généralement, la méthode la plus simple pour rechercher la cause d’une erreur consiste à activer les messages d’erreur détaillés : la première capture d’écran de la série précédente montre comment procéder.</span><span class="sxs-lookup"><span data-stu-id="8ee78-153">Frequently the easiest way to find the cause of the error is to enable detailed error messages, which the first of the preceding screenshots explains how to do.</span></span> <span data-ttu-id="8ee78-154">Vous devez modifier le fichier Web.config déployé.</span><span class="sxs-lookup"><span data-stu-id="8ee78-154">That requires a change in the deployed Web.config file.</span></span> <span data-ttu-id="8ee78-155">Vous pouvez modifier le fichier *Web.config* dans le projet et redéployer le projet, ou créer une [transformation Web.config](http://www.asp.net/mvc/tutorials/deployment/visual-studio-web-deployment/web-config-transformations) et déployer une build de débogage, mais il existe un moyen plus rapide : dans l’**Explorateur de solutions**, vous pouvez directement afficher et modifier des fichiers dans l’application web distante en utilisant la fonctionnalité d’*affichage distant*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-155">You could edit the *Web.config* file in the project and redeploy the project, or create a [Web.config transform](http://www.asp.net/mvc/tutorials/deployment/visual-studio-web-deployment/web-config-transformations) and deploy a debug build, but there's a quicker way: in **Solution Explorer** you can directly view and edit files in the remote web app by using the *remote view* feature.</span></span>

1. <span data-ttu-id="8ee78-156">Dans l’**Explorateur de serveurs**, développez l’élément **Azure**, **Service d’applications**, puis le groupe de ressources où se trouve votre application web et développez le nœud de votre application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-156">In **Server Explorer**, expand **Azure**, expand **App Service**, expand the resource group that your web app is located in, and then expand the node for your web app.</span></span>

    <span data-ttu-id="8ee78-157">Pour afficher les nœuds qui vous donnent accès aux fichiers de contenu et les fichiers journaux de l’application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-157">You see nodes that give you access to the web app's content files and log files.</span></span>
2. <span data-ttu-id="8ee78-158">Développez le nœud **Fichiers** , puis double-cliquez sur le fichier *Web.config* .</span><span class="sxs-lookup"><span data-stu-id="8ee78-158">Expand the **Files** node, and double-click the *Web.config* file.</span></span>

    ![Ouvrir Web.config](./media/web-sites-dotnet-troubleshoot-visual-studio/webconfig.png)

    <span data-ttu-id="8ee78-160">Visual Studio ouvre le fichier Web.config à partir de l’application web, puis affiche l’élément [Distant] en regard du nom du fichier dans la barre de titre.</span><span class="sxs-lookup"><span data-stu-id="8ee78-160">Visual Studio opens the Web.config file from the remote web app and shows [Remote] next to the file name in the title bar.</span></span>
3. <span data-ttu-id="8ee78-161">Ajoutez la ligne suivante à l’élément `system.web` :</span><span class="sxs-lookup"><span data-stu-id="8ee78-161">Add the following line to the `system.web` element:</span></span>

    `<customErrors mode="Off"></customErrors>`

    ![Modifier Web.config](./media/web-sites-dotnet-troubleshoot-visual-studio/webconfigedit.png)
4. <span data-ttu-id="8ee78-163">Actualisez le navigateur qui affiche le message d'erreur inutile : à présent, vous obtenez un message d'erreur détaillé, comme dans l'exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="8ee78-163">Refresh the browser that is showing the unhelpful error message, and now you get a detailed error message, such as the following example:</span></span>

    ![Messages d’erreur détaillés](./media/web-sites-dotnet-troubleshoot-visual-studio/detailederror.png)

    <span data-ttu-id="8ee78-165">L’erreur affichée est générée par l’ajout de la ligne affichée en rouge à *Views\Home\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-165">(The error shown was created by adding the line shown in red to *Views\Home\Index.cshtml*.)</span></span>

<span data-ttu-id="8ee78-166">La modification du fichier Web.config n’est qu’un exemple des scénarios dans lesquels la capacité de lecture et de modification des fichiers sur votre application web Microsoft Azure simplifie la résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="8ee78-166">Editing the Web.config file is only one example of scenarios in which the ability to read and edit files on your Azure web app make troubleshooting easier.</span></span>

## <span data-ttu-id="8ee78-167"><a name="remotedebug"></a>Débogage à distance des applications Web</span><span class="sxs-lookup"><span data-stu-id="8ee78-167"><a name="remotedebug"></a>Remote debugging web apps</span></span>
<span data-ttu-id="8ee78-168">Si le message d'erreur détaillé ne fournit pas assez d'informations et que vous ne pouvez pas recréer l'erreur localement, une autre méthode pour résoudre le problème consiste à exécuter le mode de débogage à distance.</span><span class="sxs-lookup"><span data-stu-id="8ee78-168">If the detailed error message doesn't provide enough information, and you can't re-create the error locally, another way to troubleshoot is to run in debug mode remotely.</span></span> <span data-ttu-id="8ee78-169">Vous pouvez définir des points d'arrêt, manipuler directement la mémoire, parcourir le code en détail et même modifier le chemin d'accès du code.</span><span class="sxs-lookup"><span data-stu-id="8ee78-169">You can set breakpoints, manipulate memory directly, step through code, and even change the code path.</span></span>

<span data-ttu-id="8ee78-170">Le débogage à distance ne fonctionne pas avec les éditions Express de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-170">Remote debugging does not work in Express editions of Visual Studio.</span></span>

<span data-ttu-id="8ee78-171">Cette section vous montre comment procéder au débogage à distance en utilisant le projet que vous créez dans le didacticiel [Prise en main d’Azure et d’ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="8ee78-171">This section shows how to debug remotely using the project you create in [Getting started with Azure and ASP.NET][GetStarted].</span></span>

1. <span data-ttu-id="8ee78-172">Ouvrez le projet Web que vous avez créé durant le didacticiel [Prise en main d’Azure et d’ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="8ee78-172">Open the web project that you created in [Getting started with Azure and ASP.NET][GetStarted].</span></span>
2. <span data-ttu-id="8ee78-173">Ouvrez *Controllers\HomeController.cs*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-173">Open *Controllers\HomeController.cs*.</span></span>
3. <span data-ttu-id="8ee78-174">Supprimez la méthode `About()` et insérez le code suivant à la place.</span><span class="sxs-lookup"><span data-stu-id="8ee78-174">Delete the `About()` method and insert the following code in its place.</span></span>

        public ActionResult About()
        {
            string currentTime = DateTime.Now.ToLongTimeString();
            ViewBag.Message = "The current time is " + currentTime;
            return View();
        }
4. <span data-ttu-id="8ee78-175">[Définissez un point d’arrêt](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) sur la ligne `ViewBag.Message`.</span><span class="sxs-lookup"><span data-stu-id="8ee78-175">[Set a breakpoint](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) on the `ViewBag.Message` line.</span></span>
5. <span data-ttu-id="8ee78-176">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le projet, puis cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-176">In **Solution Explorer**, right-click the project, and click **Publish**.</span></span>
6. <span data-ttu-id="8ee78-177">Dans le menu déroulant **Profil**, sélectionnez le même profil que celui utilisé dans [Prise en main d’Azure et d’ASP.NET][GetStarted].</span><span class="sxs-lookup"><span data-stu-id="8ee78-177">In the **Profile** drop-down list, select the same profile that you used in [Getting started with Azure and ASP.NET][GetStarted].</span></span>
7. <span data-ttu-id="8ee78-178">Cliquez sur l’onglet **Paramètres**, remplacez **Configuration** par **Debug**, puis cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-178">Click the **Settings** tab, and change **Configuration** to **Debug**, and then click **Publish**.</span></span>

    ![Publier en mode débogage](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-publishdebug.png)
8. <span data-ttu-id="8ee78-180">Une fois le déploiement terminé, lorsque votre navigateur s’ouvre, affichant l’adresse URL Microsoft Azure de votre application web, fermez le navigateur.</span><span class="sxs-lookup"><span data-stu-id="8ee78-180">After deployment finishes and your browser opens to the Azure URL of your web app, close the browser.</span></span>
9. <span data-ttu-id="8ee78-181">Dans l’**Explorateur de serveurs**, cliquez avec le bouton droit sur votre application web, puis cliquez sur **Attacher le débogueur**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-181">In **Server Explorer**, right-click your web app, and then click **Attach Debugger**.</span></span>

    ![Attacher le débogueur](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-attachdebugger.png)

    <span data-ttu-id="8ee78-183">Le navigateur ouvre automatiquement votre page d'accueil exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-183">The browser automatically opens to your home page running in Azure.</span></span> <span data-ttu-id="8ee78-184">Vous devrez peut-être attendre environ 20 secondes pendant qu'Azure configure le serveur pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-184">You might have to wait 20 seconds or so while Azure sets up the server for debugging.</span></span> <span data-ttu-id="8ee78-185">Ce retard se produit uniquement la première fois que vous exécutez le mode débogage sur une application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-185">This delay only happens the first time you run in debug mode on a web app.</span></span> <span data-ttu-id="8ee78-186">Il ne se reproduira pas lors des redémarrages du mode débogage au cours des 48 prochaines heures.</span><span class="sxs-lookup"><span data-stu-id="8ee78-186">Subsequent times within the next 48 hours when you start debugging again there won't be a delay.</span></span>

    <span data-ttu-id="8ee78-187">**Remarque :** si vous rencontrez des problèmes au démarrage du débogueur, essayez d’utiliser **Cloud Explorer** au lieu de l’**Explorateur de serveurs**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-187">**Note:** If you have any trouble starting the debugger, try to do it by using **Cloud Explorer** instead of **Server Explorer**.</span></span>
10. <span data-ttu-id="8ee78-188">Cliquez sur **À propos de** dans le menu.</span><span class="sxs-lookup"><span data-stu-id="8ee78-188">Click **About** in the menu.</span></span>

     <span data-ttu-id="8ee78-189">Visual Studio s'arrête sur le point d'arrêt et le code s'exécute dans Azure, et non pas sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="8ee78-189">Visual Studio stops on the breakpoint, and the code is running in Azure, not on your local computer.</span></span>
11. <span data-ttu-id="8ee78-190">Passez la souris sur la variable `currentTime` pour afficher la valeur de temps.</span><span class="sxs-lookup"><span data-stu-id="8ee78-190">Hover over the `currentTime` variable to see the time value.</span></span>

     ![Afficher une variable en mode débogage sur Azure](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-debugviewinwa.png)

     <span data-ttu-id="8ee78-192">Le temps affiché correspond au fuseau horaire du serveur Azure, qui peut différer de celui de votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="8ee78-192">The time you see is the Azure server time, which may be in a different time zone than your local computer.</span></span>
12. <span data-ttu-id="8ee78-193">Entrez une nouvelle valeur pour la variable `currentTime` , comme « En cours d’exécution dans Azure ».</span><span class="sxs-lookup"><span data-stu-id="8ee78-193">Enter a new value for the `currentTime` variable, such as "Now running in Azure".</span></span>
13. <span data-ttu-id="8ee78-194">Appuyez sur F5 pour continuer.</span><span class="sxs-lookup"><span data-stu-id="8ee78-194">Press F5 to continue running.</span></span>

     <span data-ttu-id="8ee78-195">La page « À propos de » exécutée dans Azure affiche la nouvelle valeur entrée dans la variable currentTime.</span><span class="sxs-lookup"><span data-stu-id="8ee78-195">The About page running in Azure displays the new value that you entered into the currentTime variable.</span></span>

     ![Page « À propos de » avec une nouvelle valeur](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-debugchangeinwa.png)

## <span data-ttu-id="8ee78-197"><a name="remotedebugwj"></a> Débogage à distance de WebJobs</span><span class="sxs-lookup"><span data-stu-id="8ee78-197"><a name="remotedebugwj"></a> Remote debugging WebJobs</span></span>
<span data-ttu-id="8ee78-198">Cette section explique comment déboguer un élément à distance en utilisant le projet et l’application Web que vous avez créés avec le didacticiel [Prise en main du Kit de développement logiciel (SDK) WebJobs Azure](websites-dotnet-webjobs-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="8ee78-198">This section shows how to debug remotely using the project and web app you create in [Get Started with the Azure WebJobs SDK](websites-dotnet-webjobs-sdk.md).</span></span>

<span data-ttu-id="8ee78-199">Les fonctionnalités présentées dans cette section sont disponibles uniquement dans Visual Studio 2013 avec Update 4 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-199">The features shown in this section are available only in Visual Studio 2013 with Update 4 or later.</span></span>

<span data-ttu-id="8ee78-200">Le débogage à distance fonctionne uniquement avec les tâches Web en continu.</span><span class="sxs-lookup"><span data-stu-id="8ee78-200">Remote debugging only works with continuous WebJobs.</span></span> <span data-ttu-id="8ee78-201">Les tâches Web planifiées et à la demande ne prennent pas en charge le débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-201">Scheduled and on-demand WebJobs don't support debugging.</span></span>

1. <span data-ttu-id="8ee78-202">Ouvrez le projet Web que vous avez créé dans [Prise en main du Kit de développement logiciel (SDK) Azure WebJobs][GetStartedWJ].</span><span class="sxs-lookup"><span data-stu-id="8ee78-202">Open the web project that you created in [Get Started with the Azure WebJobs SDK][GetStartedWJ].</span></span>
2. <span data-ttu-id="8ee78-203">Dans le projet ContosoAdsWebJob, ouvrez *Functions.cs*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-203">In the ContosoAdsWebJob project, open *Functions.cs*.</span></span>
3. <span data-ttu-id="8ee78-204">[Définissez un point d’arrêt](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) sur la première instruction dans la méthode `GnerateThumbnail`.</span><span class="sxs-lookup"><span data-stu-id="8ee78-204">[Set a breakpoint](http://www.visualstudio.com/get-started/debug-your-app-vs.aspx) on the first statement in the `GnerateThumbnail` method.</span></span>

    ![Définir le point d’arrêt](./media/web-sites-dotnet-troubleshoot-visual-studio/wjbreakpoint.png)
4. <span data-ttu-id="8ee78-206">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le projet web (pas le projet WebJobs), puis cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-206">In **Solution Explorer**, right-click the web project (not the WebJob project), and click **Publish**.</span></span>
5. <span data-ttu-id="8ee78-207">Dans le menu déroulant **Profil** , sélectionnez le même profil que celui utilisé dans [Prise en main du Kit de développement logiciel (SDK) WebJobs Azure](websites-dotnet-webjobs-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="8ee78-207">In the **Profile** drop-down list, select the same profile that you used in [Get Started with the Azure WebJobs SDK](websites-dotnet-webjobs-sdk.md).</span></span>
6. <span data-ttu-id="8ee78-208">Cliquez sur l’onglet **Paramètres**, remplacez **Configuration** par **Debug**, puis cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-208">Click the **Settings** tab, and change **Configuration** to **Debug**, and then click **Publish**.</span></span>

    <span data-ttu-id="8ee78-209">Visual Studio déploie les projets de tâche web et web et votre navigateur ouvre l’URL Microsoft Azure de votre application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-209">Visual Studio deploys the web and WebJob projects, and your browser opens to the Azure URL of your web app.</span></span>
7. <span data-ttu-id="8ee78-210">Dans l’**Explorateur de serveurs**, développez **Azure > App Service > votre groupe de ressources > WebJobs > Continu**, puis cliquez avec le bouton droit sur **ContosoAdsWebJob**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-210">In **Server Explorer** expand **Azure > App Service > your resource group > your web app > WebJobs > Continuous**, and then right-click **ContosoAdsWebJob**.</span></span>
8. <span data-ttu-id="8ee78-211">Cliquez sur **Attacher le débogueur**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-211">Click **Attach Debugger**.</span></span>

    ![Attacher le débogueur](./media/web-sites-dotnet-troubleshoot-visual-studio/wjattach.png)

    <span data-ttu-id="8ee78-213">Le navigateur ouvre automatiquement votre page d'accueil exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-213">The browser automatically opens to your home page running in Azure.</span></span> <span data-ttu-id="8ee78-214">Vous devrez peut-être attendre environ 20 secondes pendant qu'Azure configure le serveur pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-214">You might have to wait 20 seconds or so while Azure sets up the server for debugging.</span></span> <span data-ttu-id="8ee78-215">Ce retard se produit uniquement la première fois que vous exécutez le mode débogage sur une application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-215">This delay only happens the first time you run in debug mode on a web app.</span></span> <span data-ttu-id="8ee78-216">La prochaine fois que vous attacherez le débogueur il n’y aura aucun délai, si vous le faites dans les 48 heures.</span><span class="sxs-lookup"><span data-stu-id="8ee78-216">The next time you attach the debugger there won't be a delay, if you do it within 48 hours.</span></span>
9. <span data-ttu-id="8ee78-217">Dans le navigateur web ouvert à la page d’accueil Contoso Ads, créez une publicité.</span><span class="sxs-lookup"><span data-stu-id="8ee78-217">In the web browser that is opened to the Contoso Ads home page, create a new ad.</span></span>

    <span data-ttu-id="8ee78-218">La création d’une publicité provoque la création d’un message de file d’attente, qui sera récupéré par la tâche web et traité.</span><span class="sxs-lookup"><span data-stu-id="8ee78-218">Creating an ad causes a queue message to be created, which will be picked up by the WebJob and processed.</span></span> <span data-ttu-id="8ee78-219">Quand le Kit SDK WebJobs appelle la fonction pour traiter le message de file d’attente, le code atteint votre point d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="8ee78-219">When the WebJobs SDK calls the function to process the queue message, the code will hit your breakpoint.</span></span>
10. <span data-ttu-id="8ee78-220">Quand le débogueur s’arrête au point d’arrêt, vous pouvez examiner et modifier les valeurs des variables pendant l’exécution du programme dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="8ee78-220">When the debugger breaks at your breakpoint, you can examine and change variable values while the program is running the cloud.</span></span> <span data-ttu-id="8ee78-221">Dans l’illustration suivante, le débogueur affiche le contenu de l’objet blobInfo qui a été passé à la méthode GenerateThumbnail.</span><span class="sxs-lookup"><span data-stu-id="8ee78-221">In the following illustration the debugger shows the contents of the blobInfo object that was passed to the GenerateThumbnail method.</span></span>

     ![Objet blobInfo dans le débogueur](./media/web-sites-dotnet-troubleshoot-visual-studio/blobinfo.png)
11. <span data-ttu-id="8ee78-223">Appuyez sur F5 pour continuer.</span><span class="sxs-lookup"><span data-stu-id="8ee78-223">Press F5 to continue running.</span></span>

     <span data-ttu-id="8ee78-224">La méthode GenerateThumbnail achève la création de la miniature.</span><span class="sxs-lookup"><span data-stu-id="8ee78-224">The GenerateThumbnail method finishes creating the thumbnail.</span></span>
12. <span data-ttu-id="8ee78-225">Dans le navigateur, actualisez la page Index ; la miniature apparaît.</span><span class="sxs-lookup"><span data-stu-id="8ee78-225">In the browser, refresh the Index page and you see the thumbnail.</span></span>
13. <span data-ttu-id="8ee78-226">Dans Visual Studio, appuyez sur Maj+F5 pour arrêter le débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-226">In Visual Studio, press SHIFT+F5 to stop debugging.</span></span>
14. <span data-ttu-id="8ee78-227">Dans l’**Explorateur de serveurs**, cliquez avec le bouton droit sur le nœud ContosoAdsWebJob et cliquez sur **Afficher le tableau de bord**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-227">In **Server Explorer**, right-click the ContosoAdsWebJob node and click **View Dashboard**.</span></span>
15. <span data-ttu-id="8ee78-228">Connectez-vous avec vos informations d’identification Azure, puis cliquez sur le nom de la tâche web pour accéder à la page de votre tâche web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-228">Sign in with your Azure credentials, and then click the WebJob name to go to the page for your WebJob.</span></span>

     ![Cliquer sur ContosoAdsWebJob](./media/web-sites-dotnet-troubleshoot-visual-studio/clickcaw.png)

     <span data-ttu-id="8ee78-230">Le tableau de bord indique que la fonction GenerateThumbnail a été exécutée récemment.</span><span class="sxs-lookup"><span data-stu-id="8ee78-230">The Dashboard shows that the GenerateThumbnail function executed recently.</span></span>

     <span data-ttu-id="8ee78-231">(La prochaine fois que vous cliquez sur **Afficher le tableau de bord**, vous ne serez pas obligé de vous connecter et le navigateur accédera directement à la page de votre tâche Web).</span><span class="sxs-lookup"><span data-stu-id="8ee78-231">(The next time you click **View Dashboard**, you don't have to sign in, and the browser goes directly to the page for your WebJob.)</span></span>
16. <span data-ttu-id="8ee78-232">Cliquez sur le nom de la fonction pour afficher les détails relatifs à son exécution.</span><span class="sxs-lookup"><span data-stu-id="8ee78-232">Click the function name to see details about the function execution.</span></span>

     ![Détails de la fonction](./media/web-sites-dotnet-troubleshoot-visual-studio/funcdetails.png)

<span data-ttu-id="8ee78-234">Si votre fonction [a écrit des journaux](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs), vous pouvez cliquer sur **ToggleOutput** pour les afficher.</span><span class="sxs-lookup"><span data-stu-id="8ee78-234">If your function [wrote logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs), you could click **ToggleOutput** to see them.</span></span>

## <a name="notes-about-remote-debugging"></a><span data-ttu-id="8ee78-235">Notes à propos du débogage à distance</span><span class="sxs-lookup"><span data-stu-id="8ee78-235">Notes about remote debugging</span></span>
* <span data-ttu-id="8ee78-236">Nous vous déconseillons d'exécuter le mode débogage en production.</span><span class="sxs-lookup"><span data-stu-id="8ee78-236">Running in debug mode in production is not recommended.</span></span> <span data-ttu-id="8ee78-237">Si votre application web de production n’est pas montée en charge sur plusieurs instances de serveur, la fonction de débogage empêche le serveur web de répondre aux autres demandes.</span><span class="sxs-lookup"><span data-stu-id="8ee78-237">If your production web app is not scaled out to multiple server instances, debugging will prevent the web server from responding to other requests.</span></span> <span data-ttu-id="8ee78-238">Si vous avez plusieurs instances de serveurs web, le fait de joindre le débogueur générera une instance aléatoire et vous empêchera de vérifier que les demandes suivantes de votre navigateur parviendront à cette instance.</span><span class="sxs-lookup"><span data-stu-id="8ee78-238">If you do have multiple web server instances, when you attach to the debugger you'll get a random instance, and you have no way to ensure that subsequent browser requests will go to that instance.</span></span> <span data-ttu-id="8ee78-239">De même, comme vous ne déployez généralement pas une version de débogage dans un environnement de production, les optimisations du compilateur pour les versions Release peuvent empêcher l'affichage des réactions ligne par ligne dans votre code source.</span><span class="sxs-lookup"><span data-stu-id="8ee78-239">Also, you typically don't deploy a debug build to production, and compiler optimizations for release builds might make it impossible to show what is happening line by line in your source code.</span></span> <span data-ttu-id="8ee78-240">Pour résoudre les problèmes de production, la meilleure ressource est constituée des journaux de suivi d'application et de serveur Web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-240">For troubleshooting production problems, your best resource is application tracing and web server logs.</span></span>
* <span data-ttu-id="8ee78-241">Évitez les arrêts longs aux points d'arrêt avec le débogage à distance.</span><span class="sxs-lookup"><span data-stu-id="8ee78-241">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="8ee78-242">Azure considère qu'un processus arrêté pendant plus de quelques minutes ne répond pas, et l'arrête définitivement.</span><span class="sxs-lookup"><span data-stu-id="8ee78-242">Azure treats a process that is stopped for longer than a few minutes as an unresponsive process, and shuts it down.</span></span>
* <span data-ttu-id="8ee78-243">Pendant le débogage, le serveur envoie des données à Visual Studio, ce qui peut affecter les frais de bande passante.</span><span class="sxs-lookup"><span data-stu-id="8ee78-243">While you're debugging, the server is sending data to Visual Studio, which could affect bandwidth charges.</span></span> <span data-ttu-id="8ee78-244">Pour plus d'informations sur les tarifs de bande passante, consultez les [tarifs Azure](https://azure.microsoft.com/pricing/calculator/).</span><span class="sxs-lookup"><span data-stu-id="8ee78-244">For information about bandwidth rates, see [Azure Pricing](https://azure.microsoft.com/pricing/calculator/).</span></span>
* <span data-ttu-id="8ee78-245">Vérifiez que l’attribut `debug` de l’élément `compilation` du fichier *Web.config* est défini sur true.</span><span class="sxs-lookup"><span data-stu-id="8ee78-245">Make sure that the `debug` attribute of the `compilation` element in the *Web.config* file is set to true.</span></span> <span data-ttu-id="8ee78-246">Il est défini sur true par défaut lorsque vous publiez une configuration de version de débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-246">It is set to true by default when you publish a debug build configuration.</span></span>

        <system.web>
          <compilation debug="true" targetFramework="4.5" />
          <httpRuntime targetFramework="4.5" />
        </system.web>
* <span data-ttu-id="8ee78-247">Si le débogueur ne parcourt pas le code que vous voulez déboguer, vous devez modifier le paramètre « Uniquement mon code ».</span><span class="sxs-lookup"><span data-stu-id="8ee78-247">If you find that the debugger won't step into code that you want to debug, you might have to change the Just My Code setting.</span></span>  <span data-ttu-id="8ee78-248">Pour plus d'informations, consultez la page [Limiter le pas à pas à Uniquement mon code](http://msdn.microsoft.com/library/vstudio/y740d9d3.aspx#BKMK_Restrict_stepping_to_Just_My_Code).</span><span class="sxs-lookup"><span data-stu-id="8ee78-248">For more information, see [Restrict stepping to Just My Code](http://msdn.microsoft.com/library/vstudio/y740d9d3.aspx#BKMK_Restrict_stepping_to_Just_My_Code).</span></span>
* <span data-ttu-id="8ee78-249">Lorsque vous activez la fonctionnalité de débogage à distance, un compteur démarre sur le serveur : après 48 heures, la fonctionnalité est automatiquement désactivée.</span><span class="sxs-lookup"><span data-stu-id="8ee78-249">A timer starts on the server when you enable the remote debugging feature, and after 48 hours the feature is automatically turned off.</span></span> <span data-ttu-id="8ee78-250">Cette limite de 48 heures a été définie à des fins de sécurité et de performances.</span><span class="sxs-lookup"><span data-stu-id="8ee78-250">This 48 hour limit is done for security and performance reasons.</span></span> <span data-ttu-id="8ee78-251">Vous pouvez facilement réactiver la fonctionnalité autant de fois que nécessaire.</span><span class="sxs-lookup"><span data-stu-id="8ee78-251">You can easily turn the feature back on as many times as you like.</span></span> <span data-ttu-id="8ee78-252">Nous vous recommandons de la désactiver lorsque vous n'utilisez pas le débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-252">We recommend leaving it disabled when you are not actively debugging.</span></span>
* <span data-ttu-id="8ee78-253">Vous pouvez manuellement connecter le débogueur à n’importe quel processus, et non au seul processus d’application web (w3wp.exe).</span><span class="sxs-lookup"><span data-stu-id="8ee78-253">You can manually attach the debugger to any process, not only the web app process (w3wp.exe).</span></span> <span data-ttu-id="8ee78-254">Pour plus d'informations sur l'utilisation du mode débogage dans Visual Studio, consultez la page [Débogage dans Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ee78-254">For more information about how to use debug mode in Visual Studio, see [Debugging in Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx).</span></span>

## <span data-ttu-id="8ee78-255"><a name="logsoverview"></a>Présentation des journaux de diagnostic</span><span class="sxs-lookup"><span data-stu-id="8ee78-255"><a name="logsoverview"></a>Diagnostic logs overview</span></span>
<span data-ttu-id="8ee78-256">Une application ASP.NET qui s’exécute dans une application web Microsoft Azure peut créer les types de journaux suivants :</span><span class="sxs-lookup"><span data-stu-id="8ee78-256">An ASP.NET application that runs in an Azure web app can create the following kinds of logs:</span></span>

* <span data-ttu-id="8ee78-257">**Journaux de suivi d’application**</span><span class="sxs-lookup"><span data-stu-id="8ee78-257">**Application tracing logs**</span></span><br/>
  <span data-ttu-id="8ee78-258">: l'application crée ces journaux en appelant des méthodes de la classe [System.Diagnostics.Trace](http://msdn.microsoft.com/library/system.diagnostics.trace.aspx) .</span><span class="sxs-lookup"><span data-stu-id="8ee78-258">The application creates these logs by calling methods of the [System.Diagnostics.Trace](http://msdn.microsoft.com/library/system.diagnostics.trace.aspx) class.</span></span>
* <span data-ttu-id="8ee78-259">**Journaux des serveurs web**</span><span class="sxs-lookup"><span data-stu-id="8ee78-259">**Web server logs**</span></span><br/>
  <span data-ttu-id="8ee78-260"> : le serveur Web crée une entrée de journal pour chaque requête HTTP vers l’application Web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-260">The web server creates a log entry for every HTTP request to the web app.</span></span>
* <span data-ttu-id="8ee78-261">**Journaux détaillés des messages d’erreur**</span><span class="sxs-lookup"><span data-stu-id="8ee78-261">**Detailed error message logs**</span></span><br/>
  <span data-ttu-id="8ee78-262"> : le serveur Web crée une page HTML contenant certaines informations supplémentaires pour les requêtes HTTP ayant échoué (celles dont le code d'état est 400 ou plus).</span><span class="sxs-lookup"><span data-stu-id="8ee78-262">The web server creates an HTML page with some additional information for failed HTTP requests (those that result in status code 400 or greater).</span></span>
* <span data-ttu-id="8ee78-263">**Journaux de suivi de demandes ayant échoué**</span><span class="sxs-lookup"><span data-stu-id="8ee78-263">**Failed request tracing logs**</span></span><br/>
  <span data-ttu-id="8ee78-264"> : le serveur Web crée un fichier XML avec des informations de suivi détaillées pour les requêtes HTTP ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="8ee78-264">The web server creates an XML file with detailed tracing information for failed HTTP requests.</span></span> <span data-ttu-id="8ee78-265">Le serveur Web fournit également un fichier XSL pour mettre en forme le XML dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="8ee78-265">The web server also provides an XSL file to format the XML in a browser.</span></span>

<span data-ttu-id="8ee78-266">La fonction de journalisation affecte les performances des applications web. Pour cette raison, Microsoft Azure vous offre la possibilité d’activer ou de désactiver chaque type de journal, selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="8ee78-266">Logging affects web app performance, so Azure gives you the ability to enable or disable each type of log as needed.</span></span> <span data-ttu-id="8ee78-267">Vous pouvez définir un niveau minimal de gravité pour l'écriture des journaux d'application.</span><span class="sxs-lookup"><span data-stu-id="8ee78-267">For application logs, you can specify that only logs above a certain severity level should be written.</span></span> <span data-ttu-id="8ee78-268">Lorsque vous créez une application web, la fonction de journalisation est désactivée par défaut.</span><span class="sxs-lookup"><span data-stu-id="8ee78-268">When you create a new web app, by default all logging is disabled.</span></span>

<span data-ttu-id="8ee78-269">Les journaux sont écrits dans des fichiers issus du dossier *LogFiles*, au sein du système de fichiers de votre application web et ils sont accessibles par FTP.</span><span class="sxs-lookup"><span data-stu-id="8ee78-269">Logs are written to files in a *LogFiles* folder in the file system of your web app and are accessible via FTP.</span></span> <span data-ttu-id="8ee78-270">Il est également possible d'écrire les journaux de serveur Web et d'application dans un compte Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-270">Web server logs and application logs can also be written to an Azure Storage account.</span></span> <span data-ttu-id="8ee78-271">Vous pouvez conserver davantage de journaux sur un compte de stockage que sur le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="8ee78-271">You can retain a greater volume of logs in a storage account than is possible in the file system.</span></span> <span data-ttu-id="8ee78-272">Le système de fichiers peut conserver jusqu'à 100 Mo de journaux</span><span class="sxs-lookup"><span data-stu-id="8ee78-272">You're limited to a maximum of 100 megabytes of logs when you use the file system.</span></span> <span data-ttu-id="8ee78-273">(il ne conserve pas les journaux très longtemps :</span><span class="sxs-lookup"><span data-stu-id="8ee78-273">(File system logs are only for short-term retention.</span></span> <span data-ttu-id="8ee78-274">Azure libère de l'espace pour les nouveaux fichiers journaux en supprimant les anciens une fois la limite atteinte).</span><span class="sxs-lookup"><span data-stu-id="8ee78-274">Azure deletes old log files to make room for new ones after the limit is reached.)</span></span>  

## <span data-ttu-id="8ee78-275"><a name="apptracelogs"></a>Création et affichage des journaux de suivi d’application</span><span class="sxs-lookup"><span data-stu-id="8ee78-275"><a name="apptracelogs"></a>Create and view application trace logs</span></span>
<span data-ttu-id="8ee78-276">Dans cette section, vous effectuerez les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="8ee78-276">In this section you'll do the following tasks:</span></span>

* <span data-ttu-id="8ee78-277">ajout d’instructions de traçage au projet Web que vous avez créé dans [Prise en main d’Azure et ASP.NET][GetStarted] ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-277">Add tracing statements to the web project that you created in [Get started with Azure and ASP.NET][GetStarted].</span></span>
* <span data-ttu-id="8ee78-278">affichage des journaux lorsque vous exécutez le projet localement ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-278">View the logs when you run the project locally.</span></span>
* <span data-ttu-id="8ee78-279">affichage des journaux durant leur génération par l'application exécutée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-279">View the logs as they are generated by the application running in Azure.</span></span>

<span data-ttu-id="8ee78-280">Pour plus d’informations sur la création de journaux d’application dans WebJobs, consultez [Utilisation du stockage de file d’attente Microsoft Azure avec le Kit de développement logiciel (SDK) de WebJobs - Écriture de journaux](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs).</span><span class="sxs-lookup"><span data-stu-id="8ee78-280">For information about how to create application logs in WebJobs, see [How to work with Azure queue storage using the WebJobs SDK - How to write logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs).</span></span> <span data-ttu-id="8ee78-281">Les instructions suivantes permettant d'afficher les journaux et de contrôler la façon dont ils sont stockés dans Azure s'appliquent également aux journaux des applications créés par WebJobs.</span><span class="sxs-lookup"><span data-stu-id="8ee78-281">The following instructions for viewing logs and controlling how they're stored in Azure apply also to application logs created by WebJobs.</span></span>

### <a name="add-tracing-statements-to-the-application"></a><span data-ttu-id="8ee78-282">Ajout d'instructions de suivi à l'application</span><span class="sxs-lookup"><span data-stu-id="8ee78-282">Add tracing statements to the application</span></span>
1. <span data-ttu-id="8ee78-283">Ouvrez *Controllers\HomeController.cs*, puis remplacez les méthodes `Index`, `About` et `Contact` par le code suivant afin d’ajouter les instructions `Trace` et une instruction `using` pour `System.Diagnostics` :</span><span class="sxs-lookup"><span data-stu-id="8ee78-283">Open *Controllers\HomeController.cs*, and replace the `Index`, `About`, and `Contact` methods with the following code in order to add `Trace` statements and a `using` statement for `System.Diagnostics`:</span></span>

        public ActionResult Index()
        {
            Trace.WriteLine("Entering Index method");
            ViewBag.Message = "Modify this template to jump-start your ASP.NET MVC application.";
            Trace.TraceInformation("Displaying the Index page at " + DateTime.Now.ToLongTimeString());
            Trace.WriteLine("Leaving Index method");
            return View();
        }

        public ActionResult About()
        {
            Trace.WriteLine("Entering About method");
            ViewBag.Message = "Your app description page.";
            Trace.TraceWarning("Transient error on the About page at " + DateTime.Now.ToShortTimeString());
            Trace.WriteLine("Leaving About method");
            return View();
        }

        public ActionResult Contact()
        {
            Trace.WriteLine("Entering Contact method");
            ViewBag.Message = "Your contact page.";
            Trace.TraceError("Fatal error on the Contact page at " + DateTime.Now.ToLongTimeString());
            Trace.WriteLine("Leaving Contact method");
            return View();
        }        
2. <span data-ttu-id="8ee78-284">Ajoutez une instruction `using System.Diagnostics;` en haut du fichier.</span><span class="sxs-lookup"><span data-stu-id="8ee78-284">Add a `using System.Diagnostics;` statement to the top of the file.</span></span>

### <a name="view-the-tracing-output-locally"></a><span data-ttu-id="8ee78-285">Affichage de la sortie de suivi en local</span><span class="sxs-lookup"><span data-stu-id="8ee78-285">View the tracing output locally</span></span>
1. <span data-ttu-id="8ee78-286">Appuyez sur F5 pour exécuter l'application en mode débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-286">Press F5 to run the application in debug mode.</span></span>

    <span data-ttu-id="8ee78-287">L'écouteur de suivi par défaut écrit toutes les sorties de suivi dans la fenêtre **Sortie** , avec d'autres sorties de débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-287">The default trace listener writes all trace output to the **Output** window, along with other Debug output.</span></span> <span data-ttu-id="8ee78-288">L’image suivante montre la sortie des instructions de suivi ajoutées à la méthode `Index` .</span><span class="sxs-lookup"><span data-stu-id="8ee78-288">The following illustration shows the output from the trace statements that you added to the `Index` method.</span></span>

    ![Suivi dans la fenêtre Débogage](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-debugtracing.png)

    <span data-ttu-id="8ee78-290">La procédure suivante montre comment afficher la sortie de suivi dans une page Web, sans procéder à la compilation en mode de débogage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-290">The following steps show how to view trace output in a web page, without compiling in debug mode.</span></span>
2. <span data-ttu-id="8ee78-291">Ouvrez le fichier Web.config de l'application (celui situé dans le dossier de projet), puis ajoutez un élément `<system.diagnostics>` à la fin du fichier, juste avant l'élément de fermeture `</configuration>` :</span><span class="sxs-lookup"><span data-stu-id="8ee78-291">Open the application Web.config file (the one located in the project folder) and add a `<system.diagnostics>` element at the end of the file just before the closing `</configuration>` element:</span></span>

          <system.diagnostics>
            <trace>
              <listeners>
                <add name="WebPageTraceListener"
                    type="System.Web.WebPageTraceListener,
                    System.Web,
                    Version=4.0.0.0,
                    Culture=neutral,
                    PublicKeyToken=b03f5f7f11d50a3a" />
              </listeners>
            </trace>
          </system.diagnostics>

    <span data-ttu-id="8ee78-292">L’élément `WebPageTraceListener` vous permet d’afficher la sortie de suivi en accédant à `/trace.axd`.</span><span class="sxs-lookup"><span data-stu-id="8ee78-292">The `WebPageTraceListener` lets you view trace output by browsing to `/trace.axd`.</span></span>
3. <span data-ttu-id="8ee78-293">Ajoutez un <a href="http://msdn.microsoft.com/library/vstudio/6915t83k(v=vs.100).aspx">élément de suivi</a> sous `<system.web>` dans le fichier Web.config, comme dans l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="8ee78-293">Add a <a href="http://msdn.microsoft.com/library/vstudio/6915t83k(v=vs.100).aspx">trace element</a> under `<system.web>` in the Web.config file, such as the following example:</span></span>

        <trace enabled="true" writeToDiagnosticsTrace="true" mostRecent="true" pageOutput="false" />
4. <span data-ttu-id="8ee78-294">Appuyez sur Ctrl+F5 pour exécuter l’application.</span><span class="sxs-lookup"><span data-stu-id="8ee78-294">Press CTRL+F5 to run the application.</span></span>
5. <span data-ttu-id="8ee78-295">Dans la barre d’adresse du navigateur, ajoutez *trace.axd* à l’URL, puis appuyez sur Entrée (l’URL ressemble à http://localhost:53370/trace.axd).</span><span class="sxs-lookup"><span data-stu-id="8ee78-295">In the address bar of the browser window, add *trace.axd* to the URL, and then press Enter (the URL will be similar to http://localhost:53370/trace.axd).</span></span>
6. <span data-ttu-id="8ee78-296">Sur la page **Suivi d’application**, cliquez sur **Afficher les détails** sur la première ligne (pas la ligne BrowserLink).</span><span class="sxs-lookup"><span data-stu-id="8ee78-296">On the **Application Trace** page, click **View Details** on the first line (not the BrowserLink line).</span></span>

    ![trace.axd](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-traceaxd1.png)

    <span data-ttu-id="8ee78-298">La page **Détails de la demande** s’affiche et la section **Informations de suivi** affiche la sortie des instructions de suivi ajoutées à la méthode `Index`.</span><span class="sxs-lookup"><span data-stu-id="8ee78-298">The **Request Details** page appears, and in the **Trace Information** section you see the output from the trace statements that you added to the `Index` method.</span></span>

    ![trace.axd](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-traceaxd2.png)

    <span data-ttu-id="8ee78-300">Par défaut, `trace.axd` est uniquement disponible localement.</span><span class="sxs-lookup"><span data-stu-id="8ee78-300">By default, `trace.axd` is only available locally.</span></span> <span data-ttu-id="8ee78-301">Si vous voulez le rendre disponible à partir d’une application web distante, vous pouvez ajouter `localOnly="false"` à l’élément `trace` dans le fichier *Web.config*, comme le montre l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="8ee78-301">If you wanted to make it available from a remote web app, you could add `localOnly="false"` to the `trace` element in the *Web.config* file, as shown in the following example:</span></span>

        <trace enabled="true" writeToDiagnosticsTrace="true" localOnly="false" mostRecent="true" pageOutput="false" />

    <span data-ttu-id="8ee78-302">Cependant, l’activation du fichier `trace.axd` dans une application Web de production n’est généralement pas recommandée, pour des raisons de sécurité. Dans les sections suivantes, vous découvrirez un moyen plus simple de lire les journaux de suivi dans une application Web Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-302">However, enabling `trace.axd` in a production web app is generally not recommended for security reasons, and in the following sections you'll see an easier way to read tracing logs in an Azure web app.</span></span>

### <a name="view-the-tracing-output-in-azure"></a><span data-ttu-id="8ee78-303">Affichage de la sortie de suivi dans Azure</span><span class="sxs-lookup"><span data-stu-id="8ee78-303">View the tracing output in Azure</span></span>
1. <span data-ttu-id="8ee78-304">Dans l’**Explorateur de solutions**, cliquez avec le bouton droit sur le projet web, puis cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-304">In **Solution Explorer**, right-click the web project and click **Publish**.</span></span>
2. <span data-ttu-id="8ee78-305">Dans la boîte de dialogue **Publier le site Web**, cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-305">In the **Publish Web** dialog box, click **Publish**.</span></span>

    <span data-ttu-id="8ee78-306">Une fois que Visual Studio a publié votre mise à jour, il ouvre une fenêtre de navigateur vers votre page d’accueil (en partant du principe que vous n’avez pas désactivé la case à cocher **URL de destination** sous l’onglet **Connexion**).</span><span class="sxs-lookup"><span data-stu-id="8ee78-306">After Visual Studio publishes your update, it opens a browser window to your home page (assuming you didn't clear **Destination URL** on the **Connection** tab).</span></span>
3. <span data-ttu-id="8ee78-307">Dans l’**Explorateur de serveurs**, cliquez avec le bouton droit sur votre application web et sélectionnez **Afficher les journaux de streaming**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-307">In **Server Explorer**, right-click your web app and select **View Streaming Logs**.</span></span>

    ![Afficher la diffusion de journaux en continu dans le menu contextuel](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-viewlogsmenu.png)

    <span data-ttu-id="8ee78-309">La fenêtre **Sortie** indique que vous êtes connecté au service de diffusion de journaux en continu et ajoute une ligne de notification à chaque minute passée sans affichage de journal.</span><span class="sxs-lookup"><span data-stu-id="8ee78-309">The **Output** window shows that you are connected to the log-streaming service, and adds a notification line each minute that goes by without a log to display.</span></span>

    ![Afficher la diffusion de journaux en continu dans le menu contextuel](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-nologsyet.png)
4. <span data-ttu-id="8ee78-311">Dans la fenêtre du navigateur qui affiche la page d'accueil de votre application, cliquez sur **Contacter**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-311">In the browser window that shows your application home page, click **Contact**.</span></span>

    <span data-ttu-id="8ee78-312">En quelques secondes, la sortie du suivi de l’erreur que vous avez ajouté à la méthode `Contact` apparaît dans la fenêtre **Sortie** .</span><span class="sxs-lookup"><span data-stu-id="8ee78-312">Within a few seconds the output from the error-level trace you added to the `Contact` method appears in the **Output** window.</span></span>

    ![Suivi d'erreur dans la fenêtre Sortie](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-errortrace.png)

    <span data-ttu-id="8ee78-314">Visual Studio affiche uniquement le suivi des erreurs, car il s'agit du paramètre par défaut lorsque vous activez le service de surveillance des journaux.</span><span class="sxs-lookup"><span data-stu-id="8ee78-314">Visual Studio is only showing error-level traces because that is the default setting when you enable the log monitoring service.</span></span> <span data-ttu-id="8ee78-315">Lorsque vous créez une application web Microsoft Azure, la journalisation est désactivée par défaut, comme vous l’avez vu lorsque vous avez ouvert la page Paramètres un peu plus tôt :</span><span class="sxs-lookup"><span data-stu-id="8ee78-315">When you create a new Azure web app, all logging is disabled by default, as you saw when you opened the settings page earlier:</span></span>

    ![Journalisation d'application désactivée](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-apploggingoff.png)

    <span data-ttu-id="8ee78-317">Cependant, lorsque vous avez sélectionné **Afficher les journaux de streaming**, Visual Studio a automatiquement remplacé **Journal des applications (système de fichiers)** par **Erreur**, ce qui signifie que les journaux d’erreur sont signalés.</span><span class="sxs-lookup"><span data-stu-id="8ee78-317">However, when you selected **View Streaming Logs**, Visual Studio automatically changed **Application Logging(File System)** to **Error**, which means error-level logs get reported.</span></span> <span data-ttu-id="8ee78-318">Pour afficher tous vos journaux de suivi, vous pouvez remplacer ce paramètre par **Commentaires**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-318">In order to see all of your tracing logs, you can change this setting to **Verbose**.</span></span> <span data-ttu-id="8ee78-319">Lorsque vous sélectionnez un niveau de gravité inférieur à l'erreur, tous les journaux correspondant aux niveaux de gravité supérieurs sont également signalés.</span><span class="sxs-lookup"><span data-stu-id="8ee78-319">When you select a severity level lower than error, all logs for higher severity levels are also reported.</span></span> <span data-ttu-id="8ee78-320">Donc, lorsque vous sélectionnez Commentaires, vous pouvez également consulter des informations, des avertissements et des journaux d'erreurs.</span><span class="sxs-lookup"><span data-stu-id="8ee78-320">So when you select verbose, you also see information, warning, and error logs.</span></span>  

1. <span data-ttu-id="8ee78-321">Dans l’**Explorateur de serveurs**, cliquez avec le bouton droit sur l’application web, puis cliquez sur **Afficher les paramètres**, comme vous l’avez fait précédemment.</span><span class="sxs-lookup"><span data-stu-id="8ee78-321">In **Server Explorer**, right-click the web app, and then click **View Settings** as you did earlier.</span></span>
2. <span data-ttu-id="8ee78-322">Remplacez **Journal des applications (Filesystem)** par **Commentaires**, puis cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-322">Change **Application Logging (File System)** to **Verbose**, and then click **Save**.</span></span>

    ![Définir le niveau de suivi sur Commentaires](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-applogverbose.png)
3. <span data-ttu-id="8ee78-324">Dans la fenêtre du navigateur affichant votre page **Contact**, cliquez sur **Accueil**, sur **À propos de**, puis sur **Contact**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-324">In the browser window that is now showing your **Contact** page, click **Home**, then click **About**, and then click **Contact**.</span></span>

    <span data-ttu-id="8ee78-325">Quelques secondes après, la fenêtre **Sortie** affiche toutes vos sorties de suivi.</span><span class="sxs-lookup"><span data-stu-id="8ee78-325">Within a few seconds, the **Output** window shows all of your tracing output.</span></span>

    ![Sortie de suivi des commentaires](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-verbosetraces.png)

    <span data-ttu-id="8ee78-327">Dans cette section, vous avez activé et désactivé la journalisation à l’aide des paramètres d’application web Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-327">In this section you enabled and disabled logging by using Azure web app settings.</span></span> <span data-ttu-id="8ee78-328">Vous pouvez également activer et désactiver les écouteurs de suivi en modifiant le fichier Web.config.</span><span class="sxs-lookup"><span data-stu-id="8ee78-328">You can also enable and disable trace listeners by modifying the Web.config file.</span></span> <span data-ttu-id="8ee78-329">Toutefois, le fait de modifier le fichier Web.config entraîne le recyclage du domaine d’application, ce que ne fait pas l’activation de la journalisation via la configuration de l’application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-329">However, modifying the Web.config file causes the app domain to recycle, while enabling logging via the web app configuration doesn't do that.</span></span> <span data-ttu-id="8ee78-330">Si le problème met du temps à se reproduire ou s'il est intermittent, le recyclage du domaine d'application peut le « résoudre » temporairement et vous forcer à attendre qu'il se reproduise.</span><span class="sxs-lookup"><span data-stu-id="8ee78-330">If the problem takes a long time to reproduce, or is intermittent, recycling the app domain might "fix" it and force you to wait until it happens again.</span></span> <span data-ttu-id="8ee78-331">L'activation des diagnostics dans Azure n'entraîne pas cela, vous pouvez donc commencer tout de suite à saisir des informations sur une erreur.</span><span class="sxs-lookup"><span data-stu-id="8ee78-331">Enabling diagnostics in Azure doesn't do this, so you can start capturing error information immediately.</span></span>

### <a name="output-window-features"></a><span data-ttu-id="8ee78-332">Fonctionnalités de la fenêtre Sortie</span><span class="sxs-lookup"><span data-stu-id="8ee78-332">Output window features</span></span>
<span data-ttu-id="8ee78-333">L’onglet **Journaux Azure** de la fenêtre **Sortie** contient plusieurs boutons et une zone de texte :</span><span class="sxs-lookup"><span data-stu-id="8ee78-333">The **Azure Logs** tab of the **Output** Window has several buttons and a text box:</span></span>

![Boutons de l'onglet Journaux](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-icons.png)

<span data-ttu-id="8ee78-335">Ces éléments permettent d'effectuer les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="8ee78-335">These perform the following functions:</span></span>

* <span data-ttu-id="8ee78-336">Suppression du contenu de la fenêtre **Sortie**</span><span class="sxs-lookup"><span data-stu-id="8ee78-336">Clear the **Output** window.</span></span>
* <span data-ttu-id="8ee78-337">Activation ou désactivation du retour automatique à la ligne</span><span class="sxs-lookup"><span data-stu-id="8ee78-337">Enable or disable word wrap.</span></span>
* <span data-ttu-id="8ee78-338">Démarrage ou arrêt de la surveillance des journaux</span><span class="sxs-lookup"><span data-stu-id="8ee78-338">Start or stop monitoring logs.</span></span>
* <span data-ttu-id="8ee78-339">Sélection des journaux à surveiller</span><span class="sxs-lookup"><span data-stu-id="8ee78-339">Specify which logs to monitor.</span></span>
* <span data-ttu-id="8ee78-340">Téléchargement de journaux</span><span class="sxs-lookup"><span data-stu-id="8ee78-340">Download logs.</span></span>
* <span data-ttu-id="8ee78-341">Filtrage des journaux en fonction d'une chaîne de recherche ou d'une expression régulière</span><span class="sxs-lookup"><span data-stu-id="8ee78-341">Filter logs based on a search string or a regular expression.</span></span>
* <span data-ttu-id="8ee78-342">Fermeture de la fenêtre **Sortie**</span><span class="sxs-lookup"><span data-stu-id="8ee78-342">Close the **Output** window.</span></span>

<span data-ttu-id="8ee78-343">Si vous entrez une chaîne de recherche ou une expression régulière, Visual Studio filtre les informations de journalisation au niveau du client.</span><span class="sxs-lookup"><span data-stu-id="8ee78-343">If you enter a search string or regular expression, Visual Studio filters logging information at the client.</span></span> <span data-ttu-id="8ee78-344">Cela signifie que vous pouvez entrer les critères après l'affichage des journaux dans la fenêtre **Sortie** et que vous pouvez modifier les critères de filtrage sans avoir à régénérer les journaux.</span><span class="sxs-lookup"><span data-stu-id="8ee78-344">That means you can enter the criteria after the logs are displayed in the **Output** window and you can change filtering criteria without having to regenerate the logs.</span></span>

## <span data-ttu-id="8ee78-345"><a name="webserverlogs"></a>Affichage des journaux de serveur Web</span><span class="sxs-lookup"><span data-stu-id="8ee78-345"><a name="webserverlogs"></a>View web server logs</span></span>
<span data-ttu-id="8ee78-346">Les journaux de serveur Web enregistrent toutes les activités HTTP de l’application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-346">Web server logs record all HTTP activity for the web app.</span></span> <span data-ttu-id="8ee78-347">Afin de pouvoir afficher ces journaux dans la fenêtre **Sortie** , vous devez les activer pour l’application Web et indiquer à Visual Studio que vous souhaitez les surveiller.</span><span class="sxs-lookup"><span data-stu-id="8ee78-347">In order to see them in the **Output** window you have to enable them for the web app and tell Visual Studio that you want to monitor them.</span></span>

1. <span data-ttu-id="8ee78-348">Dans l’onglet **Configuration de l’application web Azure** que vous avez ouvert à partir de l’**Explorateur de serveurs**, remplacez la valeur du paramètre Journalisation du serveur web par **Activé**, puis cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-348">In the **Azure Web App Configuration** tab that you opened from **Server Explorer**, change Web Server Logging to **On**, and then click **Save**.</span></span>

    ![Activer la journalisation de serveur Web](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-webserverloggingon.png)
2. <span data-ttu-id="8ee78-350">Dans la fenêtre **Sortie**, cliquez sur le bouton **Spécifier les journaux Azure à surveiller**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-350">In the **Output** Window, click the **Specify which Azure logs to monitor** button.</span></span>

    ![Sélection des journaux Azure à surveiller](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-specifylogs.png)
3. <span data-ttu-id="8ee78-352">Dans la boîte de dialogue **Options de journalisation Azure**, sélectionnez **Journaux du serveur web**, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-352">In the **Azure Logging Options** dialog box, select **Web server logs**, and then click **OK**.</span></span>

    ![Surveiller les journaux de serveur Web](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-monitorwslogson.png)
4. <span data-ttu-id="8ee78-354">Dans la fenêtre du navigateur qui affiche l’application web, cliquez sur **Accueil**, **À propos de**, puis **Contact**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-354">In the browser window that shows the web app, click **Home**, then click **About**, and then click **Contact**.</span></span>

    <span data-ttu-id="8ee78-355">Généralement, les journaux d'application s'affichent en premier, suivis par les journaux de serveur Web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-355">The application logs generally appear first, followed by the web server logs.</span></span> <span data-ttu-id="8ee78-356">Le processus d'affichage peut prendre un certain temps.</span><span class="sxs-lookup"><span data-stu-id="8ee78-356">You might have to wait a while for the logs to appear.</span></span>

    ![Journaux de serveur Web dans la fenêtre Sortie](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-wslogs.png)

<span data-ttu-id="8ee78-358">Par défaut, Azure écrit les journaux dans le système de fichiers lorsque vous activez les journaux de serveur Web en utilisant Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-358">By default, when you first enable web server logs by using Visual Studio, Azure writes the logs to the file system.</span></span> <span data-ttu-id="8ee78-359">Une autre méthode consiste à utiliser le portail Azure pour indiquer que les journaux de serveur web doivent être écrits sur un conteneur d’objets blob dans un compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-359">As an alternative, you can use the Azure portal to specify that web server logs should be written to a blob container in a storage account.</span></span>

<span data-ttu-id="8ee78-360">Si vous utilisez le portail pour activer la journalisation de serveur web sur un compte de stockage Azure, puis désactivez la journalisation dans Visual Studio, les paramètres de votre compte de stockage sont restaurés lorsque vous réactivez la journalisation dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-360">If you use the portal to enable web server logging to an Azure storage account, and then disable logging in Visual Studio, when you re-enable logging in Visual Studio your storage account settings are restored.</span></span>

## <span data-ttu-id="8ee78-361"><a name="detailederrorlogs"></a>Affichage des journaux de messages d’erreur détaillés</span><span class="sxs-lookup"><span data-stu-id="8ee78-361"><a name="detailederrorlogs"></a>View detailed error message logs</span></span>
<span data-ttu-id="8ee78-362">Les journaux d'erreur détaillés fournissent des informations supplémentaires sur les requêtes HTTP ayant pour résultat des codes de réponse d'erreur (400 ou au-delà).</span><span class="sxs-lookup"><span data-stu-id="8ee78-362">Detailed error logs provide some additional information about HTTP requests that result in error response codes (400 or above).</span></span> <span data-ttu-id="8ee78-363">Afin de pouvoir afficher ces journaux dans la fenêtre **Sortie** , vous devez les activer pour l’application Web et indiquer à Visual Studio que vous souhaitez les surveiller.</span><span class="sxs-lookup"><span data-stu-id="8ee78-363">In order to see them in the **Output** window, you have to enable them for the web app and tell Visual Studio that you want to monitor them.</span></span>

1. <span data-ttu-id="8ee78-364">Dans l’onglet **Configuration de l’application web Azure** que vous avez ouvert à partir de l’**Explorateur de serveurs**, remplacez la valeur du paramètre **Messages d’erreur détaillés** par **Activé**, puis cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-364">In the **Azure Web App Configuration** tab that you opened from **Server Explorer**, change **Detailed Error Messages** to **On**, and then click **Save**.</span></span>

    ![Activer les messages d'erreur détaillés](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-detailedlogson.png)
2. <span data-ttu-id="8ee78-366">Dans la fenêtre **Sortie**, cliquez sur le bouton **Spécifier les journaux Azure à surveiller**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-366">In the **Output** Window, click the **Specify which Azure logs to monitor** button.</span></span>
3. <span data-ttu-id="8ee78-367">Dans la boîte de dialogue **Options de journalisation Azure**, cliquez sur **Tous les journaux**, puis sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-367">In the **Azure Logging Options** dialog box, click **All logs**, and then click **OK**.</span></span>

    ![Surveiller tous les journaux](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-monitorall.png)
4. <span data-ttu-id="8ee78-369">Dans la barre d’adresse de la fenêtre de navigateur, ajoutez un caractère supplémentaire à l’URL pour provoquer une erreur 404 (par exemple, `http://localhost:53370/Home/Contactx`) et appuyez sur Entrée.</span><span class="sxs-lookup"><span data-stu-id="8ee78-369">In the address bar of the browser window, add an extra character to the URL to cause a 404 error (for example, `http://localhost:53370/Home/Contactx`), and press Enter.</span></span>

    <span data-ttu-id="8ee78-370">Après quelques secondes, le journal d'erreur détaillé s'affiche dans la fenêtre **Sortie** de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-370">After several seconds the detailed error log appears in the Visual Studio **Output** window.</span></span>

    ![Journal d'erreur détaillé dans la fenêtre Sortie](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-detailederrorlog.png)

    <span data-ttu-id="8ee78-372">Maintenez la touche Ctrl appuyée tout en cliquant sur le lien pour afficher le journal de sortie mis en forme dans un navigateur :</span><span class="sxs-lookup"><span data-stu-id="8ee78-372">Control+click the link to see the log output formatted in a browser:</span></span>

    ![Journal d'erreur détaillé dans la fenêtre du navigateur](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-detailederrorloginbrowser.png)

## <span data-ttu-id="8ee78-374"><a name="downloadlogs"></a>Téléchargement de journaux du système de fichiers</span><span class="sxs-lookup"><span data-stu-id="8ee78-374"><a name="downloadlogs"></a>Download file system logs</span></span>
<span data-ttu-id="8ee78-375">Tous les journaux que vous pouvez surveiller dans la fenêtre **Sortie** peuvent aussi être téléchargés en tant que fichiers *.zip* .</span><span class="sxs-lookup"><span data-stu-id="8ee78-375">Any logs that you can monitor in the **Output** window can also be downloaded as a *.zip* file.</span></span>

1. <span data-ttu-id="8ee78-376">Dans la fenêtre **Sortie**, cliquez sur **Télécharger les journaux de diffusion en continu**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-376">In the **Output** window, click **Download Streaming Logs**.</span></span>

    ![Boutons de l'onglet Journaux](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-downloadicon.png)

    <span data-ttu-id="8ee78-378">L'Explorateur de fichiers ouvre votre dossier *Téléchargements* dans lequel le fichier téléchargé est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="8ee78-378">File Explorer opens to your *Downloads* folder with the downloaded file selected.</span></span>

    ![Fichier téléchargé](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-downloadedfile.png)
2. <span data-ttu-id="8ee78-380">Procédez à l'extraction du fichier *.zip* pour afficher la structure de dossiers suivante :</span><span class="sxs-lookup"><span data-stu-id="8ee78-380">Extract the *.zip* file, and you see the following folder structure:</span></span>

    ![Fichier téléchargé](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-logfilefolders.png)

   * <span data-ttu-id="8ee78-382">Les journaux de suivi d’application sont dans des fichiers *.txt* dans le dossier *LogFiles\Application*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-382">Application tracing logs are in *.txt* files in the *LogFiles\Application* folder.</span></span>
   * <span data-ttu-id="8ee78-383">Les journaux de serveur web sont dans des fichiers *.log* dans le dossier *LogFiles\http\RawLogs*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-383">Web server logs are in *.log* files in the *LogFiles\http\RawLogs* folder.</span></span> <span data-ttu-id="8ee78-384">Vous pouvez utiliser un outil tel que [Log Parser](http://www.microsoft.com/download/details.aspx?displaylang=en&id=24659) pour afficher et manipuler ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="8ee78-384">You can use a tool such as [Log Parser](http://www.microsoft.com/download/details.aspx?displaylang=en&id=24659) to view and manipulate these files.</span></span>
   * <span data-ttu-id="8ee78-385">Les journaux de messages d’erreur détaillés sont dans des fichiers *.html* dans le dossier *LogFiles\DetailedErrors*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-385">Detailed error message logs are in *.html* files in the *LogFiles\DetailedErrors* folder.</span></span>

     <span data-ttu-id="8ee78-386">Le dossier *deployments* contient les fichiers créés par la publication à partir du contrôle de code source : il n'a rien à voir avec la publication Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-386">(The *deployments* folder is for files created by source control publishing; it doesn't have anything related to Visual Studio publishing.</span></span> <span data-ttu-id="8ee78-387">Le dossier *Git* contient le suivi lié à la publication à partir du contrôle de code source et au service de diffusion de fichier journal en continu.</span><span class="sxs-lookup"><span data-stu-id="8ee78-387">The *Git* folder is for traces related to source control publishing and the log file streaming service.)</span></span>  

## <span data-ttu-id="8ee78-388"><a name="storagelogs"></a>Affichage des journaux de stockage</span><span class="sxs-lookup"><span data-stu-id="8ee78-388"><a name="storagelogs"></a>View storage logs</span></span>
<span data-ttu-id="8ee78-389">Les journaux de suivi d'application peuvent également être envoyés vers un compte de stockage Azure et vous pouvez les afficher dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-389">Application tracing logs can also be sent to an Azure storage account, and you can view them in Visual Studio.</span></span> <span data-ttu-id="8ee78-390">Pour cela, vous allez créer un compte de stockage, activer les journaux de stockage sur le portail Azure Classic et les afficher dans l’onglet **Journaux** de la fenêtre **Application web Microsoft Azure**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-390">To do that you'll create a storage account, enable storage logs in the classic portal, and view them in the **Logs** tab of the **Azure Web App** window.</span></span>

<span data-ttu-id="8ee78-391">Vous pouvez envoyer des journaux à l'une des trois destinations suivantes, ou aux trois :</span><span class="sxs-lookup"><span data-stu-id="8ee78-391">You can send logs to any or all of three destinations:</span></span>

* <span data-ttu-id="8ee78-392">le système de fichiers ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-392">The file system.</span></span>
* <span data-ttu-id="8ee78-393">les tables de compte de stockage ;</span><span class="sxs-lookup"><span data-stu-id="8ee78-393">Storage account tables.</span></span>
* <span data-ttu-id="8ee78-394">les objets blob de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-394">Storage account blobs.</span></span>

<span data-ttu-id="8ee78-395">Vous pouvez définir un niveau de gravité distinct pour chaque destination.</span><span class="sxs-lookup"><span data-stu-id="8ee78-395">You can specify a different severity level for each destination.</span></span>

<span data-ttu-id="8ee78-396">Les tables facilitent l'affichage des détails des journaux en ligne et elles prennent en charge la diffusion en continu. Vous pouvez demander des journaux dans des tables et afficher les nouveaux journaux durant leur création.</span><span class="sxs-lookup"><span data-stu-id="8ee78-396">Tables make it easy to view details of logs online, and they support streaming; you can query logs in tables and see new logs as they are being created.</span></span> <span data-ttu-id="8ee78-397">Les objets blob facilitent le téléchargement des journaux dans des fichiers et leur analyse en utilisant HDInsight, car HDInsight sait comment utiliser le stockage d'objets blob.</span><span class="sxs-lookup"><span data-stu-id="8ee78-397">Blobs make it easy to download logs in files and to analyze them using HDInsight, because HDInsight knows how to work with blob storage.</span></span> <span data-ttu-id="8ee78-398">Pour plus d’informations, consultez la section **Hadoop et MapReduce** de la page [Options de stockage de données (développement d’applications cloud concrètes avec Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options).</span><span class="sxs-lookup"><span data-stu-id="8ee78-398">For more information, see **Hadoop and MapReduce** in [Data Storage Options (Building Real-World Cloud Apps with Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options).</span></span>

<span data-ttu-id="8ee78-399">Pour le moment, vous avez configuré des journaux de système de fichiers sur un niveau de commentaires : la procédure suivante va vous guider durant la configuration des journaux au niveau de l'information pour accéder aux tables de compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-399">You currently have file system logs set to verbose level; the following steps walk you through setting up information level logs to go to storage account tables.</span></span> <span data-ttu-id="8ee78-400">« Au niveau de l’information » signifie que tous les journaux créés en appelant `Trace.TraceInformation`, `Trace.TraceWarning` et `Trace.TraceError` seront affichés, mais pas les journaux créés en appelant `Trace.WriteLine`.</span><span class="sxs-lookup"><span data-stu-id="8ee78-400">Information level means all logs created by calling `Trace.TraceInformation`, `Trace.TraceWarning`, and `Trace.TraceError` will be displayed, but not logs created by calling `Trace.WriteLine`.</span></span>

<span data-ttu-id="8ee78-401">Les comptes de stockage offrent un espace de stockage plus important et une conservation des journaux plus longue que le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="8ee78-401">Storage accounts offer more storage and longer-lasting retention for logs compared to the file system.</span></span> <span data-ttu-id="8ee78-402">L'envoi des journaux de suivi d'application au compte de stockage permet également d'obtenir des informations supplémentaires sur chaque journal. Cela n'est pas le cas avec le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="8ee78-402">Another advantage of sending application tracing logs to storage is that you get some additional information with each log that you don't get from file system logs.</span></span>

1. <span data-ttu-id="8ee78-403">Cliquez avec le bouton droit sur **Stockage** sous le nœud Azure, puis cliquez sur **Créer un compte de stockage**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-403">Right-click **Storage** under the Azure node, and then click **Create Storage Account**.</span></span>

![Créer un compte de stockage](./media/web-sites-dotnet-troubleshoot-visual-studio/createstor.png)

1. <span data-ttu-id="8ee78-405">Dans la boîte de dialogue **Créer un compte de stockage** , entrez un nom correspondant au compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-405">In the **Create Storage Account** dialog, enter a name for the storage account.</span></span>

    <span data-ttu-id="8ee78-406">Le nom doit être unique (aucun autre compte de stockage Azure ne doit avoir le même nom).</span><span class="sxs-lookup"><span data-stu-id="8ee78-406">The name must be must be unique (no other Azure storage account can have the same name).</span></span> <span data-ttu-id="8ee78-407">Si le nom que vous entrez est déjà utilisé, vous aurez la possibilité de le modifier.</span><span class="sxs-lookup"><span data-stu-id="8ee78-407">If the name you enter is already in use you'll get a chance to change it.</span></span>

    <span data-ttu-id="8ee78-408">L’URL permettant d’accéder à votre compte de stockage est *{nom}*.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="8ee78-408">The URL to access your storage account will be *{name}*.core.windows.net.</span></span>
2. <span data-ttu-id="8ee78-409">Choisissez la région la proche de vous dans la liste déroulante **Région ou groupe d’affinités** .</span><span class="sxs-lookup"><span data-stu-id="8ee78-409">Set the **Region or Affinity Group** drop-down list to the region closest to you.</span></span>

    <span data-ttu-id="8ee78-410">Ce paramètre spécifie le centre de données Azure qui hébergera votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-410">This setting specifies which Azure datacenter will host your storage account.</span></span> <span data-ttu-id="8ee78-411">Pour les besoins de ce didacticiel, votre choix n’aura pas une grande incidence, mais dans le cas d’une application web de production, votre compte de stockage et votre serveur web doivent se trouver dans la même région, afin de réduire les frais d’acheminement des données et de latence.</span><span class="sxs-lookup"><span data-stu-id="8ee78-411">For this tutorial your choice won't make a noticeable difference, but for a production web app you want your web server and your storage account to be in the same region to minimize latency and data egress charges.</span></span> <span data-ttu-id="8ee78-412">L’application web (que vous créerez ultérieurement) doit s’exécuter dans une région aussi proche que possible pour les navigateurs qui y auront accès, afin de minimiser la latence.</span><span class="sxs-lookup"><span data-stu-id="8ee78-412">The web app (which you'll create later) should run in a region as close as possible to the browsers accessing your web app in order to minimize latency.</span></span>
3. <span data-ttu-id="8ee78-413">Dans la liste déroulante **Réplication**, sélectionnez **Redondant en local**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-413">Set the **Replication** drop-down list to **Locally redundant**.</span></span>
   
    <span data-ttu-id="8ee78-414">Lorsque la géo-réplication est activée pour un compte de stockage, le contenu stocké est répliqué dans un centre de données secondaire pour activer le basculement vers cet emplacement en cas de sinistre majeur à l'emplacement principal.</span><span class="sxs-lookup"><span data-stu-id="8ee78-414">When geo-replication is enabled for a storage account, the stored content is replicated to a secondary datacenter to enable failover to that location in case of a major disaster in the primary location.</span></span> <span data-ttu-id="8ee78-415">La géo-réplication peut engendrer des coûts supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8ee78-415">Geo-replication can incur additional costs.</span></span> <span data-ttu-id="8ee78-416">Dans le cas des comptes test et de développement, vous êtes en général peu enclin à payer pour la géo-réplication.</span><span class="sxs-lookup"><span data-stu-id="8ee78-416">For test and development accounts, you generally don't want to pay for geo-replication.</span></span> <span data-ttu-id="8ee78-417">Pour plus d’informations, consultez [Création, gestion ou suppression d’un compte de stockage](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="8ee78-417">For more information, see [Create, manage, or delete a storage account](../storage/common/storage-create-storage-account.md).</span></span>
4. <span data-ttu-id="8ee78-418">Cliquez sur **Create**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-418">Click **Create**.</span></span>

    ![New storage account](./media/web-sites-dotnet-troubleshoot-visual-studio/newstorage.png)    
5. <span data-ttu-id="8ee78-420">Dans la fenêtre **Application web Microsoft Azure** de Visual Studio, cliquez sur l’onglet **Journaux**, puis sur **Configurer la journalisation dans le portail de gestion**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-420">In the Visual Studio **Azure Web App** window, click the **Logs** tab, and then click **Configure Logging in Management Portal**.</span></span>

    <!-- todo:screenshot of new portal if the VS page link goes to new portal -->
    ![Configuration de la journalisation](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-configlogging.png)

    <span data-ttu-id="8ee78-422">Cette opération ouvre l’onglet **Configurer** dans le portail Azure Classic pour votre application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-422">This opens the **Configure** tab in the classic portal for your web app.</span></span>
6. <span data-ttu-id="8ee78-423">Sous l’onglet **Configurer** du portail Azure Classic, faites défiler vers le bas jusqu’à la section Diagnostic d’application, puis définissez **Journal des applications (Stockage Table)** sur **Actif**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-423">In the classic portal's **Configure** tab, scroll down to the application diagnostics section, and then change **Application Logging (Table Storage)** to **On**.</span></span>
7. <span data-ttu-id="8ee78-424">Définissez le **niveau de journalisation** sur **Information**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-424">Change **Logging Level** to **Information**.</span></span>
8. <span data-ttu-id="8ee78-425">Cliquez sur **Manage Table Storage**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-425">Click **Manage Table Storage**.</span></span>

    ![Cliquer sur Manage Table Storage](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-stgsettingsmgmtportal.png)

    <span data-ttu-id="8ee78-427">Dans la zone **Manage table storage for application diagnostics** , vous pouvez sélectionner votre compte de stockage, si vous en avez plusieurs.</span><span class="sxs-lookup"><span data-stu-id="8ee78-427">In the **Manage table storage for application diagnostics** box, you can choose your storage account if you have more than one.</span></span> <span data-ttu-id="8ee78-428">Vous pouvez créer une table ou utiliser une table existante.</span><span class="sxs-lookup"><span data-stu-id="8ee78-428">You can create a new table or use an existing one.</span></span>

    ![Manage Table Storage](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-choosestorageacct.png)
9. <span data-ttu-id="8ee78-430">Dans la zone **Manage table storage for application diagnostics** , cliquez sur la coche pour fermer la zone.</span><span class="sxs-lookup"><span data-stu-id="8ee78-430">In the **Manage table storage for application diagnostics** box click the check mark to close the box.</span></span>
10. <span data-ttu-id="8ee78-431">Sous l’onglet **Configurer** du portail Azure Classic, cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-431">In the classic portal's **Configure** tab, click **Save**.</span></span>
11. <span data-ttu-id="8ee78-432">Dans la fenêtre de navigateur qui affiche l’application web, cliquez sur **Accueil**, puis sur **À propos de** et sur **Contact**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-432">In the browser window that displays the application web app, click **Home**, then click **About**, and then click **Contact**.</span></span>

     <span data-ttu-id="8ee78-433">Les informations de journalisation générées par la navigation sur ces pages Web seront écrites sur le compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="8ee78-433">The logging information produced by browsing these web pages will be written to the storage account.</span></span>
12. <span data-ttu-id="8ee78-434">Dans l’onglet **Journaux** de la fenêtre **Application web Microsoft Azure**, dans Visual Studio, cliquez sur **Actualiser** sous **Synthèse de diagnostic**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-434">In the **Logs** tab of the **Azure Web App** window in Visual Studio, click **Refresh** under **Diagnostic Summary**.</span></span>

     ![Cliquer sur Actualiser.](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-refreshstorage.png)

     <span data-ttu-id="8ee78-436">La section **Diagnostic Summary** affiche par défaut les journaux des 15 dernières minutes.</span><span class="sxs-lookup"><span data-stu-id="8ee78-436">The **Diagnostic Summary** section shows logs for the last 15 minutes by default.</span></span> <span data-ttu-id="8ee78-437">Vous pouvez modifier ce délai pour afficher plus de journaux.</span><span class="sxs-lookup"><span data-stu-id="8ee78-437">You can change the period to see more logs.</span></span>

     <span data-ttu-id="8ee78-438">Si vous obtenez l’erreur « table introuvable », vérifiez que vous avez bien parcouru les pages sur lesquelles le suivi est activé après avoir activé **Journal des applications (Stockage)** et cliqué sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-438">(If you get a "table not found" error, verify that you browsed to the pages that do the tracing after you enabled **Application Logging (Storage)** and after you clicked **Save**.)</span></span>

     ![Journaux de stockage](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-storagelogs.png)

     <span data-ttu-id="8ee78-440">Notez qu’ici, vous pouvez afficher l’**ID de processus** et l’**ID de thread** pour chaque journal, ce qui n’est pas possible dans le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="8ee78-440">Notice that in this view you see **Process ID** and **Thread ID** for each log, which you don't get in the file system logs.</span></span> <span data-ttu-id="8ee78-441">Vous pouvez consulter d'autres champs en affichant directement la table de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-441">You can see additional fields by viewing the Azure storage table directly.</span></span>
13. <span data-ttu-id="8ee78-442">Cliquez sur **View all application logs**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-442">Click **View all application logs**.</span></span>

     <span data-ttu-id="8ee78-443">La table de journal de suivi s'affiche dans la vue de table de stockage Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-443">The trace log table appears in the Azure storage table viewer.</span></span>

     <span data-ttu-id="8ee78-444">Si vous obtenez une erreur du type « la séquence ne contient aucun élément », ouvrez l’**Explorateur de serveurs**, développez le nœud de votre compte de stockage sous le nœud **Azure**, cliquez avec le bouton droit sur **Tables**, puis cliquez sur **Actualiser**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-444">(If you get a "sequence contains no elements" error, open **Server Explorer**, expand the node for your storage account under the **Azure** node, and then right-click **Tables** and click **Refresh**.)</span></span>

     ![Journaux de stockage dans la vue Table](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-tracelogtableview.png)

     <span data-ttu-id="8ee78-446">Cette vue affiche des champs supplémentaires que vous ne pouvez pas consulter ailleurs.</span><span class="sxs-lookup"><span data-stu-id="8ee78-446">This view shows additional fields you don't see in any other views.</span></span> <span data-ttu-id="8ee78-447">Elle vous permet également de filtrer les journaux en utilisant l'interface utilisateur du générateur de requêtes pour construire une requête.</span><span class="sxs-lookup"><span data-stu-id="8ee78-447">This view also enables you to filter logs by using special Query Builder UI for constructing a query.</span></span> <span data-ttu-id="8ee78-448">Pour plus d'informations, consultez les sections « Utilisation des ressources de tables » et « Filtrage d'entités » de la page [Consultation des ressources de stockage avec l'Explorateur de serveurs](http://msdn.microsoft.com/library/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ee78-448">For more information, see Working with Table Resources - Filtering Entities in [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/ff683677.aspx).</span></span>
14. <span data-ttu-id="8ee78-449">Pour consulter les détails d'une ligne unique, double-cliquez sur l'une des lignes.</span><span class="sxs-lookup"><span data-stu-id="8ee78-449">To look at the details for a single row, double-click one of the rows.</span></span>

     ![Table de suivi dans l'Explorateur de serveurs](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-tracetablerow.png)

## <span data-ttu-id="8ee78-451"><a name="failedrequestlogs"></a>Affichage des journaux de suivi de demandes ayant échoué</span><span class="sxs-lookup"><span data-stu-id="8ee78-451"><a name="failedrequestlogs"></a>View failed request tracing logs</span></span>
<span data-ttu-id="8ee78-452">Les journaux de suivi de demandes ayant échoué sont utiles pour comprendre les détails de gestion IIS d'une requête HTTP, dans des scénarios tels que des problèmes de réécriture d'URL ou d'authentification.</span><span class="sxs-lookup"><span data-stu-id="8ee78-452">Failed request tracing logs are useful when you need to understand the details of how IIS is handling an HTTP request, in scenarios such as URL rewriting or authentication problems.</span></span>

<span data-ttu-id="8ee78-453">Les applications web Microsoft Azure utilisent la même fonctionnalité de suivi de demandes ayant échoué que celle que proposait IIS 7.0 et plus.</span><span class="sxs-lookup"><span data-stu-id="8ee78-453">Azure web apps use the same failed request tracing functionality that has been available with IIS 7.0 and later.</span></span> <span data-ttu-id="8ee78-454">Cependant, vous ne pouvez pas accéder aux paramètres IIS permettant de configurer les erreurs à journaliser.</span><span class="sxs-lookup"><span data-stu-id="8ee78-454">You don't have access to the IIS settings that configure which errors get logged, however.</span></span> <span data-ttu-id="8ee78-455">Lorsque vous activez le suivi des demandes ayant échoué, toutes les erreurs sont récupérées.</span><span class="sxs-lookup"><span data-stu-id="8ee78-455">When you enable failed request tracing, all errors are captured.</span></span>

<span data-ttu-id="8ee78-456">Vous pouvez activer le suivi des demandes ayant échoué en utilisant Visual Studio, mais vous ne pouvez pas les afficher dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-456">You can enable failed request tracing by using Visual Studio, but you can't view them in Visual Studio.</span></span> <span data-ttu-id="8ee78-457">Ces journaux sont des fichiers XML.</span><span class="sxs-lookup"><span data-stu-id="8ee78-457">These logs are XML files.</span></span> <span data-ttu-id="8ee78-458">Le service de journaux de streaming surveille uniquement les fichiers jugés lisibles en mode texte brut : fichiers *.txt*, *.html* et *.log*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-458">The streaming log service only monitors files that are deemed readable in plain text mode:  *.txt*, *.html*, and *.log* files.</span></span>

<span data-ttu-id="8ee78-459">Vous pouvez afficher les journaux de suivi des demandes ayant échoué directement dans un navigateur via FTP ou en local, après avoir utilisé un outil FTP pour les télécharger sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="8ee78-459">You can view failed request tracing logs in a browser directly via FTP or locally after using an FTP tool to download them to your local computer.</span></span> <span data-ttu-id="8ee78-460">Dans cette section, nous les afficherons directement dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="8ee78-460">In this section you'll view them in a browser directly.</span></span>

1. <span data-ttu-id="8ee78-461">Dans l’onglet **Configuration** de la fenêtre **Application web Microsoft Azure** que vous avez ouverte à partir de l’**Explorateur de serveurs**, remplacez la valeur du paramètre **Suivi des demandes ayant échoué** par **Activé**, puis cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-461">In the **Configuration** tab of the **Azure Web App** window that you opened from **Server Explorer**, change **Failed Request Tracing** to **On**, and then click **Save**.</span></span>

    ![Activer le suivi des demandes ayant échoué](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-failedrequeston.png)
2. <span data-ttu-id="8ee78-463">Dans la barre d’adresses de la fenêtre de navigateur qui affiche l’application web, ajoutez un caractère supplémentaire à l’URL et appuyez sur Entrée pour provoquer une erreur 404.</span><span class="sxs-lookup"><span data-stu-id="8ee78-463">In the address bar of the browser window that shows the web app, add an extra character to the URL and click Enter to cause a 404 error.</span></span>

    <span data-ttu-id="8ee78-464">Ceci génère un journal de suivi des demandes ayant échoué. La procédure suivante vous montre comment afficher ou télécharger ce journal.</span><span class="sxs-lookup"><span data-stu-id="8ee78-464">This causes a failed request tracing log to be created, and the following steps show how to view or download the log.</span></span>
3. <span data-ttu-id="8ee78-465">Dans l’onglet **Configuration** de la fenêtre **Application web Microsoft Azure** de Visual Studio, cliquez sur **Ouvrir l’élément dans le portail de gestion**.</span><span class="sxs-lookup"><span data-stu-id="8ee78-465">In Visual Studio, in the **Configuration** tab of the **Azure Web App** window, click **Open in Management Portal**.</span></span>
4. <span data-ttu-id="8ee78-466">Dans le [portail Azure](https://portal.azure.com) (panneau **Paramètres**) de votre application web, cliquez sur **Informations d’identification du déploiement**, puis entrez un nouveau nom d’utilisateur et un nouveau mot de passe.</span><span class="sxs-lookup"><span data-stu-id="8ee78-466">In the [Azure Portal](https://portal.azure.com) **Settings** blade for your web app, click **Deployment credentials**, and then enter a new user name and password.</span></span>

    ![Nouveaux nom d'utilisateur et mot de passe FTP](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-enterftpcredentials.png)

    <span data-ttu-id="8ee78-468">**Lorsque vous vous connectez, vous devez utiliser le nom d’utilisateur complet, avec pour préfixe le nom de l’application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-468">**When you log in, you have to use the full user name with the web app name prefixed to it.</span></span> <span data-ttu-id="8ee78-469">Par exemple, si vous entrez « monid » comme nom d’utilisateur et si le site est « monexemple », vous vous connectez en tant que « monexemple\monid ».</span><span class="sxs-lookup"><span data-stu-id="8ee78-469">For example, if you enter "myid" as a user name and the site is "myexample", you log in as "myexample\myid".</span></span>
5. <span data-ttu-id="8ee78-470">Dans une nouvelle fenêtre de navigateur, accédez à l’URL affichée sous **Nom d’hôte FTP** ou **Nom d’hôte FTPS** dans le panneau **Application web** pour votre application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-470">In a new browser window, go to the URL that is shown under **FTP hostname** or **FTPS hostname** in the **Web App** blade for your web app.</span></span>
6. <span data-ttu-id="8ee78-471">Connectez-vous en utilisant les informations d’identification FTP que vous avez créées précédemment (nom d’utilisateur incluant le nom application web en tant que préfixe).</span><span class="sxs-lookup"><span data-stu-id="8ee78-471">Log in using the FTP credentials that you created earlier (including the web app name prefix for the user name).</span></span>

    <span data-ttu-id="8ee78-472">Le navigateur affiche le dossier racine de l’application web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-472">The browser shows the root folder of the web app.</span></span>
7. <span data-ttu-id="8ee78-473">Ouvrez le fichier *LogFiles* .</span><span class="sxs-lookup"><span data-stu-id="8ee78-473">Open the *LogFiles* folder.</span></span>

    ![Ouvrir le dossier LogFiles](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-logfilesfolder.png)
8. <span data-ttu-id="8ee78-475">Ouvrez le dossier nommé W3SVC avec une valeur numérique.</span><span class="sxs-lookup"><span data-stu-id="8ee78-475">Open the folder that is named W3SVC plus a numeric value.</span></span>

    ![Ouvrir le dossier W3SVC](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-w3svcfolder.png)

    <span data-ttu-id="8ee78-477">Ce dossier contient des fichiers XML pour plusieurs erreurs journalisées une fois le suivi des demandes ayant échoué activé, ainsi qu'un fichier XSL utilisable par un navigateur pour mettre en forme les fichiers XML.</span><span class="sxs-lookup"><span data-stu-id="8ee78-477">The folder contains XML files for any errors that have been logged after you enabled failed request tracing, and an XSL file that a browser can use to format the XML.</span></span>

    ![Dossier W3SVC](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-w3svcfoldercontents.png)
9. <span data-ttu-id="8ee78-479">Cliquez sur le fichier XML de la demande ayant échoué dont vous voulez consulter les informations de suivi.</span><span class="sxs-lookup"><span data-stu-id="8ee78-479">Click the XML file for the failed request that you want to see tracing information for.</span></span>

    <span data-ttu-id="8ee78-480">L'image suivante montre une partie des informations de suivi d'un exemple d'erreur.</span><span class="sxs-lookup"><span data-stu-id="8ee78-480">The following illustration shows part of the tracing information for a sample error.</span></span>

    ![Suivi d'une demande ayant échoué dans le navigateur](./media/web-sites-dotnet-troubleshoot-visual-studio/tws-failedrequestinbrowser.png)

## <span data-ttu-id="8ee78-482"><a name="nextsteps"></a>Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8ee78-482"><a name="nextsteps"></a>Next Steps</span></span>
<span data-ttu-id="8ee78-483">Vous avez vu en quoi Visual Studio facilite l’affichage de journaux créés par une application web Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-483">You've seen how Visual Studio makes it easy to view logs created by an Azure web app.</span></span> <span data-ttu-id="8ee78-484">Les sections suivantes fournissent des liens vers des ressources supplémentaires sur des rubriques connexes :</span><span class="sxs-lookup"><span data-stu-id="8ee78-484">The following sections provide links to more resources on related topics:</span></span>

* <span data-ttu-id="8ee78-485">Dépannage des applications web Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8ee78-485">Azure web app troubleshooting</span></span>
* <span data-ttu-id="8ee78-486">Débogage dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8ee78-486">Debugging in Visual Studio</span></span>
* <span data-ttu-id="8ee78-487">Débogage distant dans Azure</span><span class="sxs-lookup"><span data-stu-id="8ee78-487">Remote debugging in Azure</span></span>
* <span data-ttu-id="8ee78-488">Suivi dans les applications ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8ee78-488">Tracing in ASP.NET applications</span></span>
* <span data-ttu-id="8ee78-489">Analyse de journaux de serveur Web</span><span class="sxs-lookup"><span data-stu-id="8ee78-489">Analyzing web server logs</span></span>
* <span data-ttu-id="8ee78-490">Analyse des journaux de suivi des demandes ayant échoué</span><span class="sxs-lookup"><span data-stu-id="8ee78-490">Analyzing failed request tracing logs</span></span>
* <span data-ttu-id="8ee78-491">Débogage de Cloud Services</span><span class="sxs-lookup"><span data-stu-id="8ee78-491">Debugging Cloud Services</span></span>

### <a name="azure-web-app-troubleshooting"></a><span data-ttu-id="8ee78-492">Dépannage des applications web Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8ee78-492">Azure web app troubleshooting</span></span>
<span data-ttu-id="8ee78-493">Pour en savoir plus sur la résolution des applications web dans le Service d’application Microsoft Azure, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="8ee78-493">For more information about troubleshooting web apps in Azure App Service, see the following resources:</span></span>

* [<span data-ttu-id="8ee78-494">Surveillance d’applications Web</span><span class="sxs-lookup"><span data-stu-id="8ee78-494">How to monitor web apps</span></span>](/manage/services/web-sites/how-to-monitor-websites/)
* <span data-ttu-id="8ee78-495">[Étude des fuites de mémoire dans les applications Web Microsoft Azure avec Visual Studio 2013](http://blogs.msdn.com/b/visualstudioalm/archive/2013/12/20/investigating-memory-leaks-in-azure-web-sites-with-visual-studio-2013.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ee78-495">[Investigating Memory Leaks in Azure Web Apps with Visual Studio 2013](http://blogs.msdn.com/b/visualstudioalm/archive/2013/12/20/investigating-memory-leaks-in-azure-web-sites-with-visual-studio-2013.aspx).</span></span> <span data-ttu-id="8ee78-496">Article sur le blog ALM de Microsoft concernant les fonctionnalités de Visual Studio prévues pour l'analyse de problèmes de mémoire gérés.</span><span class="sxs-lookup"><span data-stu-id="8ee78-496">Microsoft ALM blog post about Visual Studio features for analyzing managed memory issues.</span></span>
* <span data-ttu-id="8ee78-497">[Les outils en ligne des applications Web Microsoft Azure que vous devez connaître](https://azure.microsoft.com/blog/2014/03/28/windows-azure-websites-online-tools-you-should-know-about-2/).</span><span class="sxs-lookup"><span data-stu-id="8ee78-497">[Azure web apps online tools you should know about](https://azure.microsoft.com/blog/2014/03/28/windows-azure-websites-online-tools-you-should-know-about-2/).</span></span> <span data-ttu-id="8ee78-498">Article de blog par Amit Apple.</span><span class="sxs-lookup"><span data-stu-id="8ee78-498">Blog post by Amit Apple.</span></span>

<span data-ttu-id="8ee78-499">Pour obtenir des réponses sur une question relative à la résolution des problèmes, ouvrez un fil de discussion dans l'un des forums suivants :</span><span class="sxs-lookup"><span data-stu-id="8ee78-499">For help with a specific troubleshooting question, start a thread in one of the following forums:</span></span>

* <span data-ttu-id="8ee78-500">[Forum Azure sur le site ASP.NET](http://forums.asp.net/1247.aspx/1?Azure+and+ASP+NET).</span><span class="sxs-lookup"><span data-stu-id="8ee78-500">[The Azure forum on the ASP.NET site](http://forums.asp.net/1247.aspx/1?Azure+and+ASP+NET).</span></span>
* <span data-ttu-id="8ee78-501">[Forum Azure sur MSDN](http://social.msdn.microsoft.com/Forums/windowsazure/).</span><span class="sxs-lookup"><span data-stu-id="8ee78-501">[The Azure forum on MSDN](http://social.msdn.microsoft.com/Forums/windowsazure/).</span></span>
* <span data-ttu-id="8ee78-502">[StackOverflow.com](http://www.stackoverflow.com).</span><span class="sxs-lookup"><span data-stu-id="8ee78-502">[StackOverflow.com](http://www.stackoverflow.com).</span></span>

### <a name="debugging-in-visual-studio"></a><span data-ttu-id="8ee78-503">Débogage dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8ee78-503">Debugging in Visual Studio</span></span>
<span data-ttu-id="8ee78-504">Pour plus d’informations sur l’utilisation du mode débogage dans Visual Studio, consultez la rubrique MSDN [Débogage dans Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx), puis [Conseils de débogage avec Visual Studio 2010](http://weblogs.asp.net/scottgu/archive/2010/08/18/debugging-tips-with-visual-studio-2010.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ee78-504">For more information about how to use debug mode in Visual Studio, see the [Debugging in Visual Studio](http://msdn.microsoft.com/library/vstudio/sc65sadd.aspx) MSDN topic and [Debugging Tips with Visual Studio 2010](http://weblogs.asp.net/scottgu/archive/2010/08/18/debugging-tips-with-visual-studio-2010.aspx).</span></span>

### <a name="remote-debugging-in-azure"></a><span data-ttu-id="8ee78-505">Débogage distant dans Azure</span><span class="sxs-lookup"><span data-stu-id="8ee78-505">Remote debugging in Azure</span></span>
<span data-ttu-id="8ee78-506">Pour en savoir plus sur le débogage distant des applications web Microsoft Azure et WebJobs, consultez les articles de blog suivants, en anglais :</span><span class="sxs-lookup"><span data-stu-id="8ee78-506">For more information about remote debugging for Azure web apps and WebJobs, see the following resources:</span></span>

* <span data-ttu-id="8ee78-507">[Présentation du débogage à distance d’Azure App Service Web Apps](https://azure.microsoft.com/blog/2014/05/06/introduction-to-remote-debugging-on-azure-web-sites/)(en anglais).</span><span class="sxs-lookup"><span data-stu-id="8ee78-507">[Introduction to Remote Debugging Azure App Service Web Apps](https://azure.microsoft.com/blog/2014/05/06/introduction-to-remote-debugging-on-azure-web-sites/).</span></span>
* [<span data-ttu-id="8ee78-508">Présentation du débogage à distance d’Azure App Service Web Apps : 2e partie - au cœur du débogage distant (en anglais)</span><span class="sxs-lookup"><span data-stu-id="8ee78-508">Introduction to Remote Debugging Azure App Service Web Apps part 2 - Inside Remote debugging</span></span>](https://azure.microsoft.com/blog/2014/05/07/introduction-to-remote-debugging-azure-web-sites-part-2-inside-remote-debugging/)
* [<span data-ttu-id="8ee78-509">Présentation du débogage à distance d’Azure App Service Web Apps : 3e partie - environnement multi-instance et GIT (en anglais)</span><span class="sxs-lookup"><span data-stu-id="8ee78-509">Introduction to Remote Debugging on Azure App Service Web Apps part 3 - Multi-Instance environment and GIT</span></span>](https://azure.microsoft.com/blog/2014/05/08/introduction-to-remote-debugging-on-azure-web-sites-part-3-multi-instance-environment-and-git/)
* [<span data-ttu-id="8ee78-510">Débogage de WebJobs (vidéo)</span><span class="sxs-lookup"><span data-stu-id="8ee78-510">WebJobs Debugging (video)</span></span>](https://www.youtube.com/watch?v=ncQm9q5ZFZs&list=UU_SjTh-ZltPmTYzAybypB-g&index=1)

<span data-ttu-id="8ee78-511">Si votre application Web utilise une API Web Microsoft Azure ou un système Mobile Services principal qu’il vous faut déboguer, consultez l’article [Débogage du serveur principal .NET dans Visual Studio](http://blogs.msdn.com/b/azuremobile/archive/2014/03/14/debugging-net-backend-in-visual-studio.aspx)(en anglais).</span><span class="sxs-lookup"><span data-stu-id="8ee78-511">If your web app uses an Azure Web API or Mobile Services back-end and you need to debug that, see [Debugging .NET Backend in Visual Studio](http://blogs.msdn.com/b/azuremobile/archive/2014/03/14/debugging-net-backend-in-visual-studio.aspx).</span></span>

### <a name="tracing-in-aspnet-applications"></a><span data-ttu-id="8ee78-512">Suivi dans les applications ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8ee78-512">Tracing in ASP.NET applications</span></span>
<span data-ttu-id="8ee78-513">Il n'y a pas d'autre présentation du suivi ASP.NET plus détaillée et actualisée disponible sur Internet.</span><span class="sxs-lookup"><span data-stu-id="8ee78-513">There are no thorough and up-to-date introductions to ASP.NET tracing available on the Internet.</span></span> <span data-ttu-id="8ee78-514">Nous vous conseillons de commencer par consulter les anciens documents de présentation rédigés pour Web Forms, car MVC n'existait pas encore, et de compléter cela en consultant les billets de blog les plus récents traitant de problèmes plus précis.</span><span class="sxs-lookup"><span data-stu-id="8ee78-514">The best you can do is get started with old introductory materials written for Web Forms because MVC didn't exist yet, and supplement that with newer blog posts that focus on specific issues.</span></span> <span data-ttu-id="8ee78-515">Les ressources suivantes constituent un bon début :</span><span class="sxs-lookup"><span data-stu-id="8ee78-515">Some good places to start are the following resources:</span></span>

* <span data-ttu-id="8ee78-516">[Surveillance et télémétrie (développement d’applications cloud concrètes avec Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry).</span><span class="sxs-lookup"><span data-stu-id="8ee78-516">[Monitoring and Telemetry (Building Real-World Cloud Apps with Azure)](http://www.asp.net/aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/monitoring-and-telemetry).</span></span><br>
  <span data-ttu-id="8ee78-517">Chapitre de livre électronique contenant des recommandations pour le suivi dans les applications de cloud Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-517">E-book chapter with recommendations for tracing in Azure cloud applications.</span></span>
* [<span data-ttu-id="8ee78-518">Suivi ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8ee78-518">ASP.NET Tracing</span></span>](http://msdn.microsoft.com/library/ms972204.aspx)<br/>
  <span data-ttu-id="8ee78-519">Une ressource ancienne mais toujours efficace pour une présentation de base du sujet.</span><span class="sxs-lookup"><span data-stu-id="8ee78-519">Old but still a good resource for a basic introduction to the subject.</span></span>
* [<span data-ttu-id="8ee78-520">Écouteurs de suivi</span><span class="sxs-lookup"><span data-stu-id="8ee78-520">Trace Listeners</span></span>](http://msdn.microsoft.com/library/4y5y10s7.aspx)<br/>
  <span data-ttu-id="8ee78-521">Contient des informations sur les écouteurs de suivi mais ne mentionne pas l’élément [WebPageTraceListener](http://msdn.microsoft.com/library/system.web.webpagetracelistener.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ee78-521">Information about trace listeners but doesn't mention the [WebPageTraceListener](http://msdn.microsoft.com/library/system.web.webpagetracelistener.aspx).</span></span>
* [<span data-ttu-id="8ee78-522">Procédure pas à pas : intégration du suivi ASP.NET avec le suivi System.Diagnostics</span><span class="sxs-lookup"><span data-stu-id="8ee78-522">Walkthrough: Integrating ASP.NET Tracing with System.Diagnostics Tracing</span></span>](http://msdn.microsoft.com/library/b0ectfxd.aspx)<br/>
  <span data-ttu-id="8ee78-523">Cette page est également un peu ancienne, mais vous y trouverez des informations complémentaires que l’article de présentation ne traite pas.</span><span class="sxs-lookup"><span data-stu-id="8ee78-523">This too is old, but includes some additional information that the introductory article doesn't cover.</span></span>
* [<span data-ttu-id="8ee78-524">Suivi dans les vues d’ASP.NET MVC Razor</span><span class="sxs-lookup"><span data-stu-id="8ee78-524">Tracing in ASP.NET MVC Razor Views</span></span>](http://blogs.msdn.com/b/webdev/archive/2013/07/16/tracing-in-asp-net-mvc-razor-views.aspx)<br/>
  <span data-ttu-id="8ee78-525">En plus du suivi dans les vues Razor, ce billet explique également comment créer un filtre d'erreur pour journaliser toutes les exceptions non gérées dans une application MVC.</span><span class="sxs-lookup"><span data-stu-id="8ee78-525">Besides tracing in Razor views, the post also explains how to create an error filter in order to log all unhandled exceptions in an MVC application.</span></span> <span data-ttu-id="8ee78-526">Pour plus d'informations sur la procédure de journalisation des exceptions non gérées dans une application Web Forms, consultez l'exemple de Global.asax dans [Exemple complet pour les gestionnaires d'erreurs](http://msdn.microsoft.com/library/bb397417.aspx) sur MSDN.</span><span class="sxs-lookup"><span data-stu-id="8ee78-526">For information about how to log all unhandled exceptions in a Web Forms application, see the Global.asax example in [Complete Example for Error Handlers](http://msdn.microsoft.com/library/bb397417.aspx) on MSDN.</span></span> <span data-ttu-id="8ee78-527">Dans MVC ou Web Forms, si vous voulez journaliser certaines exceptions tout en laissant le Framework par défaut les gérer, vous pouvez utiliser l'exemple de code suivant :</span><span class="sxs-lookup"><span data-stu-id="8ee78-527">In either MVC or Web Forms, if you want to log certain exceptions but let the default framework handling take effect for them, you can catch and rethrow as in the following example:</span></span>

        try
        {
           // Your code that might cause an exception to be thrown.
        }
        catch (Exception ex)
        {
            Trace.TraceError("Exception: " + ex.ToString());
            throw;
        }
* [<span data-ttu-id="8ee78-528">Journalisation de suivi de diagnostics de diffusion à partir de l’outil en ligne de commande Azure (et Glimpse)</span><span class="sxs-lookup"><span data-stu-id="8ee78-528">Streaming Diagnostics Trace Logging from the Azure Command Line (plus Glimpse!)</span></span>](http://www.hanselman.com/blog/StreamingDiagnosticsTraceLoggingFromTheAzureCommandLinePlusGlimpse.aspx)<br/>
  <span data-ttu-id="8ee78-529">Apprenez à utiliser l’outil en ligne de commande pour effectuer ce que montre ce didacticiel dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ee78-529">How to use the command line to do what this tutorial shows how to do in Visual Studio.</span></span> <span data-ttu-id="8ee78-530">[Glimpse](http://www.hanselman.com/blog/IfYoureNotUsingGlimpseWithASPNETForDebuggingAndProfilingYoureMissingOut.aspx) est un outil pour le débogage d'applications ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8ee78-530">[Glimpse](http://www.hanselman.com/blog/IfYoureNotUsingGlimpseWithASPNETForDebuggingAndProfilingYoureMissingOut.aspx) is a tool for debugging ASP.NET applications.</span></span>
* <span data-ttu-id="8ee78-531">[Utilisation des fonctions de journalisation et de diagnostic des applications web - avec David Ebbo](/documentation/videos/azure-web-site-logging-and-diagnostics/) et [Journaux de streaming dans Web Apps - avec David Ebbo](/documentation/videos/log-streaming-with-azure-web-sites/)</span><span class="sxs-lookup"><span data-stu-id="8ee78-531">[Using Web Apps Logging and Diagnostics - with David Ebbo](/documentation/videos/azure-web-site-logging-and-diagnostics/) and [Streaming Logs from Web Apps - with David Ebbo](/documentation/videos/log-streaming-with-azure-web-sites/)</span></span><br>
  <span data-ttu-id="8ee78-532">par Scott Hanselman et David Ebbo.</span><span class="sxs-lookup"><span data-stu-id="8ee78-532">Videos by Scott Hanselman and David Ebbo.</span></span>

<span data-ttu-id="8ee78-533">Pour la journalisation d'erreurs, vous pouvez éviter d'avoir à écrire votre propre code de suivi en utilisant un Framework de journalisation Open Source comme [ELMAH](http://nuget.org/packages/elmah/).</span><span class="sxs-lookup"><span data-stu-id="8ee78-533">For error logging, an alternative to writing your own tracing code is to use an open-source logging framework such as [ELMAH](http://nuget.org/packages/elmah/).</span></span> <span data-ttu-id="8ee78-534">Pour plus d'informations, consultez les [billets du blog de Scott Hanselman sur ELMAH](http://www.hanselman.com/blog/NuGetPackageOfTheWeek7ELMAHErrorLoggingModulesAndHandlersWithSQLServerCompact.aspx).</span><span class="sxs-lookup"><span data-stu-id="8ee78-534">For more information, see [Scott Hanselman's blog posts about ELMAH](http://www.hanselman.com/blog/NuGetPackageOfTheWeek7ELMAHErrorLoggingModulesAndHandlersWithSQLServerCompact.aspx).</span></span>

<span data-ttu-id="8ee78-535">Notez également que vous n'avez pas besoin d'utiliser le suivi ASP.NET ou System.Diagnostics si vous voulez activer une diffusion de journaux en continu à partir d'Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-535">Also, note that you don't have to use ASP.NET or System.Diagnostics tracing if you want to get streaming logs from Azure.</span></span> <span data-ttu-id="8ee78-536">Le service de journaux de streaming Web Apps diffuse tous les fichiers *.txt*, *.html* ou *.log* qu’il trouve dans le dossier *LogFiles*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-536">The Azure web app streaming log service will stream any *.txt*, *.html*, or *.log* file that it finds in the *LogFiles* folder.</span></span> <span data-ttu-id="8ee78-537">Par conséquent, vous pouvez créer votre propre système de journalisation, qui écrira des données dans le système de fichiers de l’application web ; votre fichier sera automatiquement diffusé en continu et téléchargé.</span><span class="sxs-lookup"><span data-stu-id="8ee78-537">Therefore, you could create your own logging system that writes to the file system of the web app, and your file will be automatically streamed and downloaded.</span></span> <span data-ttu-id="8ee78-538">Tout ce que vous avez à faire est d’écrire un code d’application qui crée les fichiers dans le dossier *d:\home\logfiles*.</span><span class="sxs-lookup"><span data-stu-id="8ee78-538">All you have to do is write application code that creates files in the *d:\home\logfiles* folder.</span></span>

### <a name="analyzing-web-server-logs"></a><span data-ttu-id="8ee78-539">Analyse de journaux de serveur Web</span><span class="sxs-lookup"><span data-stu-id="8ee78-539">Analyzing web server logs</span></span>
<span data-ttu-id="8ee78-540">Pour plus d'informations sur l'analyse des journaux de serveur Web, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="8ee78-540">For more information about analyzing web server logs, see the following resources:</span></span>

* [<span data-ttu-id="8ee78-541">LogParser</span><span class="sxs-lookup"><span data-stu-id="8ee78-541">LogParser</span></span>](http://www.microsoft.com/download/details.aspx?id=24659)<br/>
  <span data-ttu-id="8ee78-542">Un outil pour afficher les données des journaux de serveur Web (fichiers*.log* ).</span><span class="sxs-lookup"><span data-stu-id="8ee78-542">A tool for viewing data in web server logs (*.log* files).</span></span>
* [<span data-ttu-id="8ee78-543">Dépannage des problèmes de performances IIS ou des erreurs d’application à l’aide de LogParser </span><span class="sxs-lookup"><span data-stu-id="8ee78-543">Troubleshooting IIS Performance Issues or Application Errors using LogParser </span></span>](http://www.iis.net/learn/troubleshoot/performance-issues/troubleshooting-iis-performance-issues-or-application-errors-using-logparser)<br/>
  <span data-ttu-id="8ee78-544">Une introduction à l'outil LogParser que vous pouvez utiliser pour analyser les journaux de serveur Web.</span><span class="sxs-lookup"><span data-stu-id="8ee78-544">An introduction to the Log Parser tool that you can use to analyze web server logs.</span></span>
* [<span data-ttu-id="8ee78-545">Billets du blog de Robert McMurray sur l’utilisation de LogParser</span><span class="sxs-lookup"><span data-stu-id="8ee78-545">Blog posts by Robert McMurray on using LogParser</span></span>](http://blogs.msdn.com/b/robert_mcmurray/archive/tags/logparser/)<br/>
* [<span data-ttu-id="8ee78-546">Code d’état HTTP dans IIS 7.0, IIS 7.5 et IIS 8.0</span><span class="sxs-lookup"><span data-stu-id="8ee78-546">The HTTP status code in IIS 7.0, IIS 7.5, and IIS 8.0</span></span>](http://support.microsoft.com/kb/943891)

### <a name="analyzing-failed-request-tracing-logs"></a><span data-ttu-id="8ee78-547">Analyse des journaux de suivi des demandes ayant échoué</span><span class="sxs-lookup"><span data-stu-id="8ee78-547">Analyzing failed request tracing logs</span></span>
<span data-ttu-id="8ee78-548">Le site Web Microsoft TechNet comporte une section [Utilisation du suivi des demandes ayant échoué](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing) qui permet de comprendre l'utilisation de ces journaux.</span><span class="sxs-lookup"><span data-stu-id="8ee78-548">The Microsoft TechNet website includes a [Using Failed Request Tracing](http://www.iis.net/learn/troubleshoot/using-failed-request-tracing) section which may be helpful for understanding how to use these logs.</span></span> <span data-ttu-id="8ee78-549">Toutefois, cette documentation se concentre principalement sur la configuration du suivi des demandes ayant échoué dans IIS, ce que vous ne pouvez pas faire dans les applications web Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8ee78-549">However, this documentation focuses mainly on configuring failed request tracing in IIS, which you can't do in Azure Web Apps.</span></span>

[GetStarted]: app-service-web-get-started-dotnet.md
[GetStartedWJ]: websites-dotnet-webjobs-sdk.md
