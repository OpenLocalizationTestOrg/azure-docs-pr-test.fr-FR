---
title: "Création et utilisation d’un équilibreur de charge interne avec un environnement App Service | Microsoft Docs"
description: "Création et utilisation d’un ASE avec un ILB"
services: app-service
documentationcenter: 
author: ccompy
manager: stefsch
editor: 
ms.assetid: ad9a1e00-d5e5-413e-be47-e21e5b285dbf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: ccompy
ms.openlocfilehash: 9e5a40f18eb9eaf60579af21afc6f05c2d87f4c1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="using-an-internal-load-balancer-with-an-app-service-environment"></a><span data-ttu-id="4f36c-103">Utilisation d’un équilibreur de charge interne avec un environnement App Service</span><span class="sxs-lookup"><span data-stu-id="4f36c-103">Using an Internal Load Balancer with an App Service Environment</span></span>

> [!NOTE] 
> <span data-ttu-id="4f36c-104">Cet article traite de l’environnement App Service Environment v1.</span><span class="sxs-lookup"><span data-stu-id="4f36c-104">This article is about the App Service Environment v1.</span></span> <span data-ttu-id="4f36c-105">Il existe une version plus récente de l’environnement App Service Environment, plus facile à utiliser et qui s’exécute sur des infrastructures plus puissantes.</span><span class="sxs-lookup"><span data-stu-id="4f36c-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span></span> <span data-ttu-id="4f36c-106">Pour en savoir plus sur la nouvelle version, commencez par la [Présentation de l’environnement App Service Environment](../app-service/app-service-environment/intro.md).</span><span class="sxs-lookup"><span data-stu-id="4f36c-106">To learn more about the new version start with the [Introduction to the App Service Environment](../app-service/app-service-environment/intro.md).</span></span>
>

<span data-ttu-id="4f36c-107">La fonctionnalité ASE (App Service Environment) est une option de service Premium d’Azure App Service offrant une fonction de configuration améliorée qui n’est pas disponible dans les clusters mutualisés.</span><span class="sxs-lookup"><span data-stu-id="4f36c-107">The App Service Environment (ASE) feature is a Premium service option of Azure App Service that delivers an enhanced configuration capability that is not available in the multi-tenant stamps.</span></span> <span data-ttu-id="4f36c-108">La fonctionnalité ASE déploie essentiellement Azure App Service sur votre réseau virtuel (VNet) Azure.</span><span class="sxs-lookup"><span data-stu-id="4f36c-108">The ASE feature essentially deploys the Azure App Service in your Azure Virtual Network(VNet).</span></span> <span data-ttu-id="4f36c-109">Pour mieux comprendre les possibilités offertes par les environnements App Service, lisez la documentation [Qu'est-ce qu'un environnement App Service ?][WhatisASE].</span><span class="sxs-lookup"><span data-stu-id="4f36c-109">To gain a greater understanding of the capabilities offered by App Service Environments read the [What is an App Service Environment][WhatisASE] documentation.</span></span> <span data-ttu-id="4f36c-110">Si vous ne connaissez pas les avantages de l’utilisation d’un réseau virtuel, consultez la [FAQ sur le réseau virtuel Azure][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="4f36c-110">If you don't know the benefits of operating in a VNet read the [Azure Virtual Network FAQ][virtualnetwork].</span></span> 

## <a name="overview"></a><span data-ttu-id="4f36c-111">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="4f36c-111">Overview</span></span>
<span data-ttu-id="4f36c-112">Un environnement App Service peut être déployé avec un point de terminaison accessible via Internet ou avec une adresse IP sur votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="4f36c-112">An ASE can be deployed with an internet accessible endpoint or with an IP address in your VNet.</span></span> <span data-ttu-id="4f36c-113">Pour définir l’adresse IP sur une adresse de réseau virtuel, vous devez déployer votre ASE avec un équilibreur de charge interne (ILB).</span><span class="sxs-lookup"><span data-stu-id="4f36c-113">In order to set the IP address to a VNet address you need to deploy your ASE with an Internal Load Balancer(ILB).</span></span> <span data-ttu-id="4f36c-114">Lorsque votre ASE est configuré avec un équilibrage de charge interne, vous fournissez :</span><span class="sxs-lookup"><span data-stu-id="4f36c-114">When your ASE is configured with an ILB you provide:</span></span>

* <span data-ttu-id="4f36c-115">votre propre domaine ou sous-domaine.</span><span class="sxs-lookup"><span data-stu-id="4f36c-115">your own domain or subdomain.</span></span> <span data-ttu-id="4f36c-116">Pour simplifier, ce document suppose que vous utilisez un sous-domaine, mais vous pouvez choisir le scénario qui vous convient.</span><span class="sxs-lookup"><span data-stu-id="4f36c-116">To make it easy, this document assumes subdomain but you can configure it either way.</span></span> 
* <span data-ttu-id="4f36c-117">le certificat utilisé pour le protocole HTTPS</span><span class="sxs-lookup"><span data-stu-id="4f36c-117">the certificate used for HTTPS</span></span>
* <span data-ttu-id="4f36c-118">Gestion du service DNS pour votre sous-domaine.</span><span class="sxs-lookup"><span data-stu-id="4f36c-118">DNS management for your subdomain.</span></span> 

<span data-ttu-id="4f36c-119">En retour, vous pouvez effectuer des tâches telles que :</span><span class="sxs-lookup"><span data-stu-id="4f36c-119">In return, you can do things such as:</span></span>

* <span data-ttu-id="4f36c-120">héberger des applications intranet, comme des applications métier, en toute sécurité dans le cloud auquel vous accédez via un VPN Site à Site ou ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="4f36c-120">host intranet applications, like line of business applications, securely in the cloud which you access through a Site to Site or ExpressRoute VPN</span></span>
* <span data-ttu-id="4f36c-121">héberger des applications dans le cloud qui ne figurent pas dans les serveurs DNS publics</span><span class="sxs-lookup"><span data-stu-id="4f36c-121">host apps in the cloud that are not listed in public DNS servers</span></span>
* <span data-ttu-id="4f36c-122">créer des applications de serveur principal internet isolées auxquelles vos applications frontales peuvent s’intégrer en toute sécurité</span><span class="sxs-lookup"><span data-stu-id="4f36c-122">create internet isolated backend apps which your front end apps can securely integrate with</span></span>

#### <a name="disabled-functionality"></a><span data-ttu-id="4f36c-123">Fonctionnalités désactivées</span><span class="sxs-lookup"><span data-stu-id="4f36c-123">Disabled functionality</span></span>
<span data-ttu-id="4f36c-124">Lorsque vous utilisez un ASE ILB, certaines opérations ne sont pas autorisées.</span><span class="sxs-lookup"><span data-stu-id="4f36c-124">There are some things that you cannot do when using an ILB ASE.</span></span> <span data-ttu-id="4f36c-125">Ces opérations sont :</span><span class="sxs-lookup"><span data-stu-id="4f36c-125">Those things include:</span></span>

* <span data-ttu-id="4f36c-126">utilisation du protocole IPSSL</span><span class="sxs-lookup"><span data-stu-id="4f36c-126">using IPSSL</span></span>
* <span data-ttu-id="4f36c-127">attribution d’adresses IP à des applications spécifiques</span><span class="sxs-lookup"><span data-stu-id="4f36c-127">assigning IP addresses to specific apps</span></span>
* <span data-ttu-id="4f36c-128">achat et utilisation d’un certificat avec une application via le portail.</span><span class="sxs-lookup"><span data-stu-id="4f36c-128">buying and using a certificate with an app through the portal.</span></span> <span data-ttu-id="4f36c-129">Vous pouvez bien entendu toujours obtenir des certificats directement auprès d’une autorité de certification et l’utiliser avec vos applications, mais pas via le portail Azure.</span><span class="sxs-lookup"><span data-stu-id="4f36c-129">You can of course still obtain certificates directly with a Certificate Authority and use it with your apps, just not through the Azure portal.</span></span>

## <a name="creating-an-ilb-ase"></a><span data-ttu-id="4f36c-130">Création d’un environnement App Service d’équilibrage de charge interne (ILB ASE)</span><span class="sxs-lookup"><span data-stu-id="4f36c-130">Creating an ILB ASE</span></span>
<span data-ttu-id="4f36c-131">La création d’un ILB ASE n’est pas très différente de la création d’un ASE normalement.</span><span class="sxs-lookup"><span data-stu-id="4f36c-131">Creating an ILB ASE is not much different from creating an ASE normally.</span></span> <span data-ttu-id="4f36c-132">Pour plus d’informations sur la création d’un ASE, consultez [Comment créer un environnement App Service][HowtoCreateASE].</span><span class="sxs-lookup"><span data-stu-id="4f36c-132">For a deeper discussion on creating an ASE read [How to Create an App Service Environment][HowtoCreateASE].</span></span> <span data-ttu-id="4f36c-133">Le processus de création d’un environnement ASE LIB est le même que la création d’un réseau virtuel lors de la création de l’ASE ou de la sélection d’un réseau virtuel existant.</span><span class="sxs-lookup"><span data-stu-id="4f36c-133">The process to create an ILB ASE is the same between creating a VNet during ASE creation or selecting a pre-existing VNet.</span></span> <span data-ttu-id="4f36c-134">Pour créer un ILB ASE :</span><span class="sxs-lookup"><span data-stu-id="4f36c-134">To create an ILB ASE:</span></span> 

1. <span data-ttu-id="4f36c-135">Dans le portail Azure, sélectionnez **Nouveau -> Web + Mobile -> App Service Environment**</span><span class="sxs-lookup"><span data-stu-id="4f36c-135">In the Azure portal select **New -> Web + Mobile -> App Service Environment**</span></span>
2. <span data-ttu-id="4f36c-136">Sélectionnez votre abonnement</span><span class="sxs-lookup"><span data-stu-id="4f36c-136">Select your subscription</span></span>
3. <span data-ttu-id="4f36c-137">Sélectionnez ou créez un groupe de ressources</span><span class="sxs-lookup"><span data-stu-id="4f36c-137">Select or create a resource group</span></span>
4. <span data-ttu-id="4f36c-138">Sélectionnez ou créez un réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="4f36c-138">Select or create a VNet</span></span>
5. <span data-ttu-id="4f36c-139">Créez un sous-réseau si vous sélectionnez un réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="4f36c-139">Create a subnet if selecting a VNet</span></span>
6. <span data-ttu-id="4f36c-140">Sélectionnez **Réseau virtuel/Emplacement -> Configuration du réseau virtuel** et définissez le type d’adresse VIP sur Interne</span><span class="sxs-lookup"><span data-stu-id="4f36c-140">Select **Virtual Network/Location -> VNet Configuration** and set the VIP Type to Internal</span></span>
7. <span data-ttu-id="4f36c-141">Indiquez le nom du sous-domaine (il s’agit du sous-domaine utilisé pour les applications créées dans cet ASE)</span><span class="sxs-lookup"><span data-stu-id="4f36c-141">Provide subdomain name (this will be the subdomain used for apps created in this ASE)</span></span>
8. <span data-ttu-id="4f36c-142">Sélectionnez Ok puis Créer</span><span class="sxs-lookup"><span data-stu-id="4f36c-142">Select Ok and then Create</span></span>

![][1]

<span data-ttu-id="4f36c-143">Le panneau Réseau virtuel contient une option Configuration du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="4f36c-143">Within the Virtual Network blade there is a VNet Configuration option.</span></span> <span data-ttu-id="4f36c-144">Elle vous permet de sélectionner une adresse VIP externe ou interne.</span><span class="sxs-lookup"><span data-stu-id="4f36c-144">This lets you select between an External VIP or Internal VIP.</span></span> <span data-ttu-id="4f36c-145">La valeur par défaut est Externe.</span><span class="sxs-lookup"><span data-stu-id="4f36c-145">The default is External.</span></span> <span data-ttu-id="4f36c-146">Si vous avez défini la valeur sur Externe, votre ASE utilisera une adresse VIP accessible via Internet.</span><span class="sxs-lookup"><span data-stu-id="4f36c-146">If you have it set to External then your ASE will use an internet accessible VIP.</span></span> <span data-ttu-id="4f36c-147">Si vous sélectionnez Interne, votre ASE sera configuré avec un équilibrage de charge sur une adresse IP au sein de votre réseau virtuel interne.</span><span class="sxs-lookup"><span data-stu-id="4f36c-147">If you select Internal, your ASE will be configured with an ILB on an IP address within your VNet.</span></span> 

<span data-ttu-id="4f36c-148">Après avoir sélectionné la valeur Interne, vous ne pouvez plus ajouter d’adresses IP à votre ASE et vous devez alors spécifier le sous-domaine de l’ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-148">After selecting Internal, the ability to add more IP addresses to your ASE is removed and instead you need to provide the subdomain of the ASE.</span></span> <span data-ttu-id="4f36c-149">Dans un ASE avec une adresse VIP externe, le nom de l’ASE est utilisé dans le sous-domaine pour les applications créées dans cet ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-149">In an ASE with an External VIP the name of the ASE is used in the subdomain for apps created in that ASE.</span></span> <span data-ttu-id="4f36c-150">Si votre ASE s’appelait ***contosotest*** et que votre application dans cet ASE s’appelait ***mytest***, le sous-domaine serait au format ***contosotest.p.azurewebsites.net*** et l’URL de cette application serait ***mytest.contosotest.p.azurewebsites.net***.</span><span class="sxs-lookup"><span data-stu-id="4f36c-150">If your ASE was called ***contosotest*** and your app in that ASE was called ***mytest*** then the subdomain would be of the format ***contosotest.p.azurewebsites.net*** and the URL for that app would be ***mytest.contosotest.p.azurewebsites.net***.</span></span> <span data-ttu-id="4f36c-151">Si vous définissez le type d’adresse VIP sur Interne, le nom de votre ASE n’est pas utilisé dans le sous-domaine pour cet ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-151">If you set the VIP Type to Internal, your ASE name is not used in the subdomain for the ASE.</span></span> <span data-ttu-id="4f36c-152">Vous spécifiez explicitement le sous-domaine.</span><span class="sxs-lookup"><span data-stu-id="4f36c-152">You specify the subdomain explicitly.</span></span> <span data-ttu-id="4f36c-153">Si votre sous-domaine était ***contoso.corp.net*** et que vous avez créé une application dans cet ASE nommé ***timereporting***, l’URL de cette application serait ***timereporting.contoso.corp.net***.</span><span class="sxs-lookup"><span data-stu-id="4f36c-153">If your subdomain was ***contoso.corp.net*** and you made an app in that ASE named ***timereporting*** then the URL for that app would be ***timereporting.contoso.corp.net***.</span></span>

## <a name="apps-in-an-ilb-ase"></a><span data-ttu-id="4f36c-154">Applications d’un ILB ASE</span><span class="sxs-lookup"><span data-stu-id="4f36c-154">Apps in an ILB ASE</span></span>
<span data-ttu-id="4f36c-155">La création d’une application dans un ILB ASE est identique à la création d’une application dans un ASE standard.</span><span class="sxs-lookup"><span data-stu-id="4f36c-155">Creating an app in an ILB ASE is the same as creating an app in an ASE normally.</span></span> 

1. <span data-ttu-id="4f36c-156">Dans le portail Azure, sélectionnez **Nouveau -> Web + Mobile -> Web** ou **Mobile** or **API App**</span><span class="sxs-lookup"><span data-stu-id="4f36c-156">In the Azure portal select **New -> Web + Mobile -> Web** or **Mobile** or **API App**</span></span>
2. <span data-ttu-id="4f36c-157">Entrez le nom de l’application</span><span class="sxs-lookup"><span data-stu-id="4f36c-157">Enter name of app</span></span>
3. <span data-ttu-id="4f36c-158">Sélectionnez un abonnement</span><span class="sxs-lookup"><span data-stu-id="4f36c-158">Select subscription</span></span>
4. <span data-ttu-id="4f36c-159">Sélectionnez ou créez un groupe de ressources</span><span class="sxs-lookup"><span data-stu-id="4f36c-159">Select or create resource group</span></span>
5. <span data-ttu-id="4f36c-160">Sélectionnez ou créez un plan App Service (ASP).</span><span class="sxs-lookup"><span data-stu-id="4f36c-160">Select or create App Service Plan(ASP).</span></span> <span data-ttu-id="4f36c-161">Si vous créez un nouvel ASP, sélectionnez votre ASE comme emplacement puis choisissez le pool de travail dans lequel vous souhaitez créer votre ASP.</span><span class="sxs-lookup"><span data-stu-id="4f36c-161">If creating a new ASP then select your ASE as the location and select the worker pool you want your ASP to be created in.</span></span> <span data-ttu-id="4f36c-162">Lorsque vous créez l’ASP, vous sélectionnez votre ASE comme emplacement et le pool de travail.</span><span class="sxs-lookup"><span data-stu-id="4f36c-162">When you create the ASP you select your ASE as the location and the worker pool.</span></span> <span data-ttu-id="4f36c-163">Lorsque vous spécifiez le nom de l’application, vous verrez que le sous-domaine sous le nom de votre application est remplacé par le sous-domaine de votre ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-163">When you specify the name of the app you will see that the subdomain under your app name is replaced by the subdomain for your ASE.</span></span> 
6. <span data-ttu-id="4f36c-164">Sélectionnez Créer.</span><span class="sxs-lookup"><span data-stu-id="4f36c-164">Select Create.</span></span> <span data-ttu-id="4f36c-165">Vous devriez cocher la case **Épingler au tableau de bord** si vous souhaitez que l’application s’affiche sur votre tableau de bord.</span><span class="sxs-lookup"><span data-stu-id="4f36c-165">You should select the **Pin to dashboard** checkbox if you want the app to show up on your dashboard.</span></span> 

![][2]

<span data-ttu-id="4f36c-166">Sous le nom de l’application, le nom du sous-domaine est mis à jour pour refléter le sous-domaine de votre ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-166">Under the app name the subdomain name gets updated to reflect the subdomain of your ASE.</span></span> 

## <a name="post-ilb-ase-creation-validation"></a><span data-ttu-id="4f36c-167">Validation après la création de l’ILB ASE</span><span class="sxs-lookup"><span data-stu-id="4f36c-167">Post ILB ASE creation validation</span></span>
<span data-ttu-id="4f36c-168">Un ILB ASE est légèrement différent d’un ASE non-ILB.</span><span class="sxs-lookup"><span data-stu-id="4f36c-168">An ILB ASE is slightly different than the non-ILB ASE.</span></span> <span data-ttu-id="4f36c-169">Comme indiqué précédemment, vous devez gérer votre propre DNS et fournir votre propre certificat pour les connexions HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4f36c-169">As already noted you need to manage your own DNS and you also have to provide your own certificate for HTTPS connections.</span></span> 

<span data-ttu-id="4f36c-170">Après avoir créé votre ASE, vous remarquerez que le sous-domaine affiche le sous-domaine que vous avez spécifié, et un nouvel élément apparaît dans le **Paramètre**, appelé **Certificat ILB**.</span><span class="sxs-lookup"><span data-stu-id="4f36c-170">After you create your ASE you will notice that the subdomain shows the subdomain you specified and there is a new item in the **Setting** menu called **ILB Certificate**.</span></span> <span data-ttu-id="4f36c-171">L’ASE est créé avec un certificat auto-signé qui facilite le test de HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4f36c-171">The ASE is created with a self-signed certificate which makes it easier to test HTTPS.</span></span> <span data-ttu-id="4f36c-172">Le portail vous indiquera que vous devez fournir votre propre certificat pour le protocole HTTPS, mais c’est pour vous inciter à avoir un certificat qui accompagne votre sous-domaine.</span><span class="sxs-lookup"><span data-stu-id="4f36c-172">The portal will tell you that you need to provide your own certificate for HTTPS but this is to drive you to have a certificate that goes with your subdomain.</span></span> 

![][3]

<span data-ttu-id="4f36c-173">Si vous effectuez simplement des tests et ignorez comment créer un certificat, vous pouvez utiliser l’application console MMC IIS pour créer un certificat auto-signé.</span><span class="sxs-lookup"><span data-stu-id="4f36c-173">If you are simply trying things out and don't know how to create a certificate, you can use the IIS MMC console application to create a self signed certificate.</span></span> <span data-ttu-id="4f36c-174">Une fois le certificat créé, vous pouvez l’exporter sous forme de fichier .pfx puis le télécharger dans l’interface utilisateur du certificat ILB.</span><span class="sxs-lookup"><span data-stu-id="4f36c-174">Once it is created you can export it as a .pfx file and then upload it in the ILB Certificate UI.</span></span> <span data-ttu-id="4f36c-175">Lorsque vous accédez à un site sécurisé avec un certificat auto-signé, votre navigateur vous avertit que le site auquel vous accédez n’est pas sécurisé en raison de l’impossibilité de valider le certificat.</span><span class="sxs-lookup"><span data-stu-id="4f36c-175">When you access a site secured with a self-signed certificate, your browser will give you a warning that the site you are accessing is not secure due to the inability to validate the certificate.</span></span> <span data-ttu-id="4f36c-176">Pour éviter cet avertissement, vous devez utiliser un certificat dûment signé correspondant à votre sous-domaine et contenant une chaîne de confiance reconnue par votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="4f36c-176">If you want to avoid that warning you need a properly signed certificate that matches your subdomain and has a chain of trust that is recognized by your browser.</span></span>

![][6]

<span data-ttu-id="4f36c-177">Si vous souhaitez essayer le flux avec vos propres certificats et tester l’accès HTTP et HTTPS à votre ASE :</span><span class="sxs-lookup"><span data-stu-id="4f36c-177">If you want to try the flow with your own certificates and test both HTTP and HTTPS access to your ASE:</span></span>

1. <span data-ttu-id="4f36c-178">Accédez à l’interface utilisateur ASE après la création de l’ASE **ASE -> Paramètres -> Certificats ILB**</span><span class="sxs-lookup"><span data-stu-id="4f36c-178">Go to ASE UI after ASE is created **ASE -> Settings -> ILB Certificates**</span></span>
2. <span data-ttu-id="4f36c-179">Définissez le certificat ILB en sélectionnant le fichier .pfx du certificat et fournissez un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="4f36c-179">Set ILB certificate by selecting certificate pfx file and provide password.</span></span> <span data-ttu-id="4f36c-180">Cette étape prend un certain temps et un message indiquant qu’une opération de mise à l’échelle est en cours apparaît.</span><span class="sxs-lookup"><span data-stu-id="4f36c-180">This step takes a little while to process and the message that a scaling operation is in progress will be shown.</span></span>
3. <span data-ttu-id="4f36c-181">Obtenez l’adresse ILB pour votre ASE (**ASE -> Propriétés -> Adresse IP virtuelle**)</span><span class="sxs-lookup"><span data-stu-id="4f36c-181">Get the ILB address for your ASE (**ASE -> Properties -> Virtual IP Address**)</span></span>
4. <span data-ttu-id="4f36c-182">Création d’une application web dans ASE après sa création</span><span class="sxs-lookup"><span data-stu-id="4f36c-182">Create a web app in ASE after creation</span></span> 
5. <span data-ttu-id="4f36c-183">Créez une machine virtuelle si vous n’avez pas de réseau virtuel (pas dans le même sous-réseau que l’ASE pour éviter tout dysfonctionnement)</span><span class="sxs-lookup"><span data-stu-id="4f36c-183">Create a VM if you don't have one in that VNET (Not in the same subnet as the ASE or things break)</span></span>
6. <span data-ttu-id="4f36c-184">Configurez le DNS de votre sous-domaine.</span><span class="sxs-lookup"><span data-stu-id="4f36c-184">Set DNS for your subdomain.</span></span> <span data-ttu-id="4f36c-185">Vous pouvez utiliser un caractère générique avec votre sous-domaine dans votre DNS ou, si vous voulez faire de simples tests, modifier le fichier hosts sur votre machine virtuelle pour définir le nom de l’application web sur l’adresse IP virtuelle.</span><span class="sxs-lookup"><span data-stu-id="4f36c-185">You can use a wildcard with your subdomain in your DNS or if you want to do some simple tests, edit the hosts file on your VM to set web app name to VIP IP address.</span></span> <span data-ttu-id="4f36c-186">Si votre ASE avait le sous-domaine .ilbase.com et que vous avez utilisé mytestapp pour votre application web afin de l’adresser vers mytestapp.ilbase.com, définissez cette valeur dans votre fichier hosts.</span><span class="sxs-lookup"><span data-stu-id="4f36c-186">If your ASE had the subdomain name .ilbase.com and you made the web app mytestapp so that it would be addressed at mytestapp.ilbase.com then set that in your hosts file.</span></span> <span data-ttu-id="4f36c-187">(Dans Windows, le fichier hosts se situe sous C:\Windows\System32\drivers\etc\)</span><span class="sxs-lookup"><span data-stu-id="4f36c-187">(On Windows the hosts file is at C:\Windows\System32\drivers\etc\ )</span></span>
7. <span data-ttu-id="4f36c-188">Utilisez un navigateur sur cette machine virtuelle et accédez à http://mytestapp.ilbase.com (le nom de votre application web avec votre sous-domaine)</span><span class="sxs-lookup"><span data-stu-id="4f36c-188">Use a browser on that VM and go to http://mytestapp.ilbase.com (or whatever your web app name is with your subdomain)</span></span>
8. <span data-ttu-id="4f36c-189">Utilisez un navigateur sur cette machine virtuelle et accédez à https://mytestapp.ilbase.com (vous devez accepter le manque de sécurité si vous utilisez un certificat auto-signé).</span><span class="sxs-lookup"><span data-stu-id="4f36c-189">Use a browser on that VM and go to https://mytestapp.ilbase.com You will have to accept the lack of security if using a self-signed certificate.</span></span> 

<span data-ttu-id="4f36c-190">L’adresse IP de votre ILB est répertoriée dans vos propriétés comme l’adresse IP virtuelle</span><span class="sxs-lookup"><span data-stu-id="4f36c-190">The IP address for your ILB is listed in your Properties as the Virtual IP Address</span></span>

![][4]

## <a name="using-an-ilb-ase"></a><span data-ttu-id="4f36c-191">Utilisation d’un ILB ASE</span><span class="sxs-lookup"><span data-stu-id="4f36c-191">Using an ILB ASE</span></span>
#### <a name="network-security-groups"></a><span data-ttu-id="4f36c-192">Groupes de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="4f36c-192">Network Security Groups</span></span>
<span data-ttu-id="4f36c-193">Un ILB ASE permet l’isolement réseau de vos applications car les applications ne sont pas accessibles ni même reconnues par Internet.</span><span class="sxs-lookup"><span data-stu-id="4f36c-193">An ILB ASE enables network isolation for your apps as the apps are not accessible or even known by the internet.</span></span> <span data-ttu-id="4f36c-194">Cette méthode est excellente pour l’hébergement de sites intranet comme les applications métier.</span><span class="sxs-lookup"><span data-stu-id="4f36c-194">This is excellent for hosting intranet sites such as line of business applications.</span></span> <span data-ttu-id="4f36c-195">Si vous avez besoin de restreindre davantage l’accès, vous pouvez toujours utiliser des groupes de sécurité réseau (NSG) pour contrôler l’accès au niveau du réseau.</span><span class="sxs-lookup"><span data-stu-id="4f36c-195">When you need to restrict access even further you can still use Network Security Groups(NSGs) to control access at the network level.</span></span> 

<span data-ttu-id="4f36c-196">Si vous souhaitez utiliser des NSG pour restreindre davantage l’accès, vous devez vous assurer de ne pas interrompre la communication nécessaire au fonctionnement de l’ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-196">If you wish to use NSGs to further restrict access then you need to make sure you do not break the communication that the ASE needs in order to operate.</span></span> <span data-ttu-id="4f36c-197">Bien que l’accès HTTP/HTTPS s’effectue uniquement par le biais de l’ILB utilisé par l’ASE, cet ASE dépend toujours de ressources situées en dehors du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="4f36c-197">Even though the HTTP/HTTPS access is only through the ILB used by the ASE the ASE still depends on resource outside of the VNet.</span></span> <span data-ttu-id="4f36c-198">Pour savoir quel accès réseau est toujours requis, consultez les informations du document [Contrôle du trafic entrant vers un environnement App Service][ControlInbound] et du document [Détails de la configuration réseau pour les environnements App Service avec ExpressRoute][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="4f36c-198">To see what network access is still required look at the information in the document on [Controlling Inbound Traffic to an App Service Environment][ControlInbound] and the document on [Network Configuration Details for App Service Environments with ExpressRoute][ExpressRoute].</span></span> 

<span data-ttu-id="4f36c-199">Pour configurer vos NSG, vous devez connaître l’adresse IP utilisée par Azure pour gérer votre ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-199">To configure your NSGs you need to know the IP address that is used by Azure to manage your ASE.</span></span> <span data-ttu-id="4f36c-200">Cette adresse IP est également l’adresse IP sortante de votre ASE s’il effectue des demandes Internet.</span><span class="sxs-lookup"><span data-stu-id="4f36c-200">That IP address is also the outbound IP address from your ASE if it makes internet requests.</span></span> <span data-ttu-id="4f36c-201">L’adresse IP sortante pour votre ASE reste statique pendant toute la durée de vie de votre ASE.</span><span class="sxs-lookup"><span data-stu-id="4f36c-201">The outbound IP address for your ASE will remain static for the life of your ASE.</span></span> <span data-ttu-id="4f36c-202">Si vous supprimez et recréez votre ASE, vous obtenez une nouvelle adresse IP.</span><span class="sxs-lookup"><span data-stu-id="4f36c-202">If you delete and recreate your ASE, you will get a new IP address.</span></span> <span data-ttu-id="4f36c-203">Pour trouver cette adresse IP, sélectionnez **Paramètres -> Propriétés** puis **Adresse IP sortante**.</span><span class="sxs-lookup"><span data-stu-id="4f36c-203">To find this IP address go to **Settings -> Properties** and find the **Outbound IP Address**.</span></span> 

![][5]

#### <a name="general-ilb-ase-management"></a><span data-ttu-id="4f36c-204">Gestion générale de l’ILB ASE</span><span class="sxs-lookup"><span data-stu-id="4f36c-204">General ILB ASE management</span></span>
<span data-ttu-id="4f36c-205">La gestion d’un ILB ASE est largement identique à la gestion d’un ASE standard.</span><span class="sxs-lookup"><span data-stu-id="4f36c-205">Managing an ILB ASE is largely the same as managing an ASE normally.</span></span> <span data-ttu-id="4f36c-206">Vous devez faire évoluer vos pools de travail pour héberger plusieurs instances ASP et faire évoluer vos serveurs frontaux pour gérer la hausse du trafic HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4f36c-206">You need to scale up your worker pools to host more ASP instances and scale up your Front End servers to handle increased amounts of HTTP/HTTPS traffic.</span></span> <span data-ttu-id="4f36c-207">Pour obtenir des informations générales sur la gestion de la configuration d’un ASE, consultez le document [Configuration d’un environnement App Service][ASEConfig].</span><span class="sxs-lookup"><span data-stu-id="4f36c-207">For general information on managing the configuration of an ASE, read the document on [Configuring an App Service Environment][ASEConfig].</span></span> 

<span data-ttu-id="4f36c-208">Les éléments d’administration supplémentaires sont la gestion des certificats et la gestion DNS.</span><span class="sxs-lookup"><span data-stu-id="4f36c-208">The additional management items are certificate management and DNS management.</span></span> <span data-ttu-id="4f36c-209">Vous devez obtenir et télécharger le certificat utilisé pour le protocole HTTPS après la création de l’ILB ASE et le remplacer avant son expiration.</span><span class="sxs-lookup"><span data-stu-id="4f36c-209">You need to obtain and upload the certificate used for HTTPS after ILB ASE creation and replace it before it expires.</span></span> <span data-ttu-id="4f36c-210">Comme Azure possède le domaine de base, nous pouvons fournir des certificats pour les ASE avec une adresse IP externe.</span><span class="sxs-lookup"><span data-stu-id="4f36c-210">Because Azure owns the base domain we can provide certificates for ASEs with an External VIP.</span></span> <span data-ttu-id="4f36c-211">Étant donné que le sous-domaine utilisé par un ILB ASE peut être quelconque, vous devez fournir votre propre certificat pour le protocole HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4f36c-211">Since the subdomain used by an ILB ASE can be anything, you need to provide your own certificate for HTTPS.</span></span> 

#### <a name="dns-configuration"></a><span data-ttu-id="4f36c-212">Configuration DNS</span><span class="sxs-lookup"><span data-stu-id="4f36c-212">DNS Configuration</span></span>
<span data-ttu-id="4f36c-213">Lorsque vous utilisez une adresse IP virtuelle externe, le DNS est géré par Azure.</span><span class="sxs-lookup"><span data-stu-id="4f36c-213">When using an External VIP the DNS is managed by Azure.</span></span> <span data-ttu-id="4f36c-214">Toute application créée dans votre ASE est automatiquement ajoutée à Azure DNS, qui est un DNS public.</span><span class="sxs-lookup"><span data-stu-id="4f36c-214">Any app created in your ASE is automatically added to Azure DNS which is a public DNS.</span></span> <span data-ttu-id="4f36c-215">Dans un ILB ASE, vous devrez gérer vos propres DNS.</span><span class="sxs-lookup"><span data-stu-id="4f36c-215">In an ILB ASE you have to manage your own DNS.</span></span> <span data-ttu-id="4f36c-216">Pour un sous-domaine spécifique comme contoso.corp.net, vous devez créer des enregistrements DNS A qui pointent vers votre adresse ILB :</span><span class="sxs-lookup"><span data-stu-id="4f36c-216">For a given subdomain such as contoso.corp.net you need to create DNS A records that point to your ILB address for:</span></span>

    * 
    <span data-ttu-id="4f36c-217">*.scm ftp publish</span><span class="sxs-lookup"><span data-stu-id="4f36c-217">*.scm ftp publish</span></span> 


## <a name="getting-started"></a><span data-ttu-id="4f36c-218">Prise en main</span><span class="sxs-lookup"><span data-stu-id="4f36c-218">Getting started</span></span>
<span data-ttu-id="4f36c-219">Tous les articles et procédures concernant les environnements App Service sont disponibles dans le [fichier Lisez-moi des environnements App Service](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="4f36c-219">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="4f36c-220">Pour prendre en main les environnements App Service, consultez [la présentation des environnements App Service][WhatisASE].</span><span class="sxs-lookup"><span data-stu-id="4f36c-220">To get started with App Service Environments, see [Introduction to App Service Environments][WhatisASE]</span></span>

<span data-ttu-id="4f36c-221">Pour plus d’informations sur la plateforme Azure App Service, consultez la rubrique [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="4f36c-221">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!--Image references-->
[1]: ./media/app-service-environment-with-internal-load-balancer/ilbase-createilbase.png
[2]: ./media/app-service-environment-with-internal-load-balancer/ilbase-createapp.png
[3]: ./media/app-service-environment-with-internal-load-balancer/ilbase-newase.png
[4]: ./media/app-service-environment-with-internal-load-balancer/ilbase-vip.png
[5]: ./media/app-service-environment-with-internal-load-balancer/ilbase-externalvip.png
[6]: ./media/app-service-environment-with-internal-load-balancer/ilbase-ilbcertificate.png

<!--Links-->
[WhatisASE]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[HowtoCreateASE]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[ControlInbound]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[AppServicePricing]: http://azure.microsoft.com/pricing/details/app-service/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[ASEAutoscale]: http://azure.microsoft.com/documentation/articles/app-service-environment-auto-scale/
[ExpressRoute]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/
[vnetnsgs]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[ASEConfig]: http://azure.microsoft.com/documentation/articles/app-service-web-configure-an-app-service-environment/
