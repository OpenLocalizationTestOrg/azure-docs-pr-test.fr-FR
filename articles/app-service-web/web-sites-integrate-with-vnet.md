---
title: "Intégrer une application à un réseau Azure Virtual Network"
description: "Explique comment connecter une application d’Azure App Service à un réseau virtuel Azure nouveau ou existant"
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: cephalin
ms.assetid: 90bc6ec6-133d-4d87-a867-fcf77da75f5a
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/23/2017
ms.author: ccompy
ms.openlocfilehash: 61508f759cad92a8c17d72a5d68fb54994c393bc
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/29/2017
---
# <a name="integrate-your-app-with-an-azure-virtual-network"></a><span data-ttu-id="e53be-103">Intégrer une application à un réseau Azure Virtual Network</span><span class="sxs-lookup"><span data-stu-id="e53be-103">Integrate your app with an Azure Virtual Network</span></span>
<span data-ttu-id="e53be-104">Ce document décrit la fonctionnalité d’intégration au réseau virtuel d’Azure App Service et explique comment la configurer avec des applications dans [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="e53be-104">This document describes the Azure App Service virtual network integration feature and shows how to set it up with apps in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> <span data-ttu-id="e53be-105">Si vous n’êtes pas familiarisé avec les réseaux Azure Virtual Network, cette fonctionnalité vous permet de placer la plupart de vos ressources Azure dans un réseau routable non-Internet dont vous contrôlez l’accès.</span><span class="sxs-lookup"><span data-stu-id="e53be-105">If you are unfamiliar with Azure Virtual Networks (VNets), this is a capability that allows you to place many of your Azure resources in a non-internet routeable network that you control access to.</span></span> <span data-ttu-id="e53be-106">Ces réseaux peuvent ensuite être connectés à vos réseaux locaux à l’aide d’une variété de technologies VPN.</span><span class="sxs-lookup"><span data-stu-id="e53be-106">These networks can then be connected to your on-premises networks using a variety of VPN technologies.</span></span> <span data-ttu-id="e53be-107">Pour en savoir plus sur les réseaux virtuels Azure, commencez par consulter la page [Présentation du réseau virtuel][VNETOverview].</span><span class="sxs-lookup"><span data-stu-id="e53be-107">To learn more about Azure Virtual Networks, start with the information here: [Azure Virtual Network Overview][VNETOverview].</span></span> 

<span data-ttu-id="e53be-108">Azure App Service se présente sous deux formes.</span><span class="sxs-lookup"><span data-stu-id="e53be-108">The Azure App Service has two forms.</span></span> 

1. <span data-ttu-id="e53be-109">Les systèmes mutualisés qui prennent en charge l’ensemble des plans de tarification.</span><span class="sxs-lookup"><span data-stu-id="e53be-109">The multi-tenant systems that support the full range of pricing plans</span></span>
2. <span data-ttu-id="e53be-110">L’environnement App Service (ASE, App Service Environment), une fonctionnalité Premium qui se déploie sur votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-110">The App Service Environment (ASE) premium feature, which deploys into your VNet.</span></span> 

<span data-ttu-id="e53be-111">Ce document présente l’intégration au réseau virtuel et non l’environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="e53be-111">This document goes through VNet Integration and not App Service Environment.</span></span> <span data-ttu-id="e53be-112">Si vous souhaitez en savoir plus sur la fonctionnalité ASE, commencez par consulter les informations suivantes : [Présentation de l’environnement App Service][ASEintro].</span><span class="sxs-lookup"><span data-stu-id="e53be-112">If you want to learn more about the ASE feature, start with the information here: [App Service Environment introduction][ASEintro].</span></span>

<span data-ttu-id="e53be-113">Grâce à cette intégration, votre application web a accès aux ressources se trouvant dans votre réseau virtuel sans que celui-ci puisse accéder à votre application web de façon privée.</span><span class="sxs-lookup"><span data-stu-id="e53be-113">VNet Integration gives your web app access to resources in your virtual network but does not grant private access to your web app from the virtual network.</span></span> <span data-ttu-id="e53be-114">L’accès au site privé fait référence au fait de rendre votre application accessible uniquement à partir d’un réseau privé, par exemple à partir d’un réseau virtuel Azure.</span><span class="sxs-lookup"><span data-stu-id="e53be-114">Private site access refers to making your app only accessible from a private network such as from within an Azure virtual network.</span></span> <span data-ttu-id="e53be-115">L’accès privé aux sites est disponible uniquement via un ASE configuré avec un équilibreur de charge interne (ILB).</span><span class="sxs-lookup"><span data-stu-id="e53be-115">Private site access is only available with an ASE configured with an Internal Load Balancer (ILB).</span></span> <span data-ttu-id="e53be-116">Pour obtenir des détails sur l’utilisation d’un ILB ASE, commencez par lire l’article suivant : [Création et utilisation d’un ASE avec un ILB][ILBASE].</span><span class="sxs-lookup"><span data-stu-id="e53be-116">For details on using an ILB ASE, start with the article here: [Creating and using an ILB ASE][ILBASE].</span></span> 

<span data-ttu-id="e53be-117">L’intégration au réseau virtuel est couramment utilisée dans le scénario suivant : vous autorisez votre application web à accéder à une base de données ou à des services web exécutés dans une machine virtuelle de votre réseau virtuel Azure.</span><span class="sxs-lookup"><span data-stu-id="e53be-117">A common scenario where you would use VNet Integration is enabling access from your web app to a database or a web service running on a virtual machine in your Azure virtual network.</span></span> <span data-ttu-id="e53be-118">Avec l’intégration au réseau virtuel, vous n’avez pas besoin d’exposer un point de terminaison public pour les applications sur votre machine virtuelle, mais vous pouvez utiliser à la place des adresses privées routables non-Internet.</span><span class="sxs-lookup"><span data-stu-id="e53be-118">With VNet Integration, you don't need to expose a public endpoint for applications on your VM but can use the private non-internet routable addresses instead.</span></span> 

<span data-ttu-id="e53be-119">La fonctionnalité d’intégration au réseau virtuel :</span><span class="sxs-lookup"><span data-stu-id="e53be-119">The VNet Integration feature:</span></span>

* <span data-ttu-id="e53be-120">nécessite un plan de tarification Standard, Premium ou Isolé</span><span class="sxs-lookup"><span data-stu-id="e53be-120">requires a Standard, Premium, or Isolated pricing plan</span></span> 
* <span data-ttu-id="e53be-121">fonctionne avec le réseau virtuel classique ou Gestionnaire des ressources</span><span class="sxs-lookup"><span data-stu-id="e53be-121">works with Classic or Resource Manager VNet</span></span> 
* <span data-ttu-id="e53be-122">prend en charge les protocoles TCP et UDP ;</span><span class="sxs-lookup"><span data-stu-id="e53be-122">supports TCP and UDP</span></span>
* <span data-ttu-id="e53be-123">fonctionne avec les applications web, mobiles et API</span><span class="sxs-lookup"><span data-stu-id="e53be-123">works with Web, Mobile, and API apps</span></span>
* <span data-ttu-id="e53be-124">permet à une application de se connecter à un seul réseau virtuel à la fois</span><span class="sxs-lookup"><span data-stu-id="e53be-124">enables an app to connect to only 1 VNet at a time</span></span>
* <span data-ttu-id="e53be-125">permet d’intégrer jusqu’à cinq réseaux virtuels dans un plan App Service</span><span class="sxs-lookup"><span data-stu-id="e53be-125">enables up to five VNets to be integrated with in an App Service Plan</span></span> 
* <span data-ttu-id="e53be-126">permet l’utilisation du même réseau virtuel par plusieurs applications d’un plan App Service</span><span class="sxs-lookup"><span data-stu-id="e53be-126">allows the same VNet to be used by multiple apps in an App Service Plan</span></span>
* <span data-ttu-id="e53be-127">prend en charge un contrat SLA de 99,9 % de par le contrat SLA sur la passerelle de réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-127">supports a 99.9% SLA due to the SLA on the VNet Gateway</span></span>

<span data-ttu-id="e53be-128">Certains éléments ne sont pas pris en charge par l’intégration au réseau virtuel, notamment :</span><span class="sxs-lookup"><span data-stu-id="e53be-128">There are some things that VNet Integration does not support including:</span></span>

* <span data-ttu-id="e53be-129">montage d’un lecteur ;</span><span class="sxs-lookup"><span data-stu-id="e53be-129">mounting a drive</span></span>
* <span data-ttu-id="e53be-130">intégration AD ;</span><span class="sxs-lookup"><span data-stu-id="e53be-130">AD integration</span></span> 
* <span data-ttu-id="e53be-131">NetBios ;</span><span class="sxs-lookup"><span data-stu-id="e53be-131">NetBios</span></span>
* <span data-ttu-id="e53be-132">accès privé aux sites.</span><span class="sxs-lookup"><span data-stu-id="e53be-132">private site access</span></span>

### <a name="getting-started"></a><span data-ttu-id="e53be-133">Prise en main</span><span class="sxs-lookup"><span data-stu-id="e53be-133">Getting started</span></span>
<span data-ttu-id="e53be-134">Voici quelques informations à garder à l’esprit avant de connecter votre application web à un réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-134">Here are some things to keep in mind before connecting your web app to a virtual network:</span></span>

* <span data-ttu-id="e53be-135">L’intégration au réseau virtuel fonctionne uniquement avec des applications faisant partie d’un plan de tarification **Standard**, **Premium** ou **Isolé**.</span><span class="sxs-lookup"><span data-stu-id="e53be-135">VNet Integration only works with apps in a **Standard**, **Premium**, or **Isolated** pricing plan.</span></span> <span data-ttu-id="e53be-136">Si vous activez la fonctionnalité et faites ensuite évoluer votre plan App Service vers un plan de tarification non pris en charge, vos applications perdront la connexion aux réseaux virtuels qu’elles utilisent.</span><span class="sxs-lookup"><span data-stu-id="e53be-136">If you enable the feature, and then scale your App Service Plan to an unsupported pricing plan your apps lose their connections to the VNets they are using.</span></span> 
* <span data-ttu-id="e53be-137">Si votre réseau virtuel cible existe déjà, il doit prendre en charge la connexion VPN de point à site avec une passerelle de routage dynamique avant de pouvoir être connecté à une application.</span><span class="sxs-lookup"><span data-stu-id="e53be-137">If your target virtual network already exists, it must have point-to-site VPN enabled with a Dynamic routing gateway before it can be connected to an app.</span></span> <span data-ttu-id="e53be-138">Vous ne pouvez pas activer le réseau privé virtuel (VPN) de point à site si votre passerelle est configurée avec un routage statique.</span><span class="sxs-lookup"><span data-stu-id="e53be-138">If your gateway is configured with Static routing, you cannot enable point-to-site Virtual Private Network (VPN).</span></span>
* <span data-ttu-id="e53be-139">Le réseau virtuel doit faire partie du même abonnement que votre plan App Service (ASP, App Service Plan).</span><span class="sxs-lookup"><span data-stu-id="e53be-139">The VNet must be in the same subscription as your App Service Plan(ASP).</span></span> 
* <span data-ttu-id="e53be-140">Les applications intégrées à un réseau virtuel utilisent le serveur DNS spécifié pour ce réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-140">The apps that integrate with a VNet use the DNS that is specified for that VNet.</span></span>
* <span data-ttu-id="e53be-141">Par défaut, vos applications intégrées acheminent le trafic sur votre réseau virtuel uniquement selon les itinéraires définis dans votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-141">By default your integrating apps only route traffic into your VNet based on the routes that are defined in your VNet.</span></span> 

## <a name="enabling-vnet-integration"></a><span data-ttu-id="e53be-142">Activation de l’intégration au réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-142">Enabling VNet Integration</span></span>
<span data-ttu-id="e53be-143">Ce document se concentre principalement sur l’utilisation du portail Azure pour l’intégration au réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-143">This document is focused primarily on using the Azure portal for VNet Integration.</span></span> <span data-ttu-id="e53be-144">Pour activer l’intégration au réseau virtuel avec votre application à l’aide de PowerShell, suivez les instructions fournies ici : [Connecter votre application à votre réseau virtuel à l’aide de PowerShell][IntPowershell].</span><span class="sxs-lookup"><span data-stu-id="e53be-144">To enable VNet Integration with your app using PowerShell, follow the directions here: [Connect your app to your virtual network by using PowerShell][IntPowershell].</span></span>

<span data-ttu-id="e53be-145">Vous pouvez connecter votre application à un réseau virtuel nouveau ou existant.</span><span class="sxs-lookup"><span data-stu-id="e53be-145">You have the option to connect your app to a new or existing virtual network.</span></span> <span data-ttu-id="e53be-146">Si vous créez un réseau dans le cadre de votre intégration, outre la création du réseau virtuel, une passerelle de routage dynamique est préconfigurée pour vous et le réseau VPN de point à site est activé.</span><span class="sxs-lookup"><span data-stu-id="e53be-146">If you create a new network as a part of your integration, then in addition to just creating the VNet, a dynamic routing gateway is pre-configured for you and Point to Site VPN is enabled.</span></span> 

> [!NOTE]
> <span data-ttu-id="e53be-147">La configuration d’une nouvelle intégration au réseau virtuel peut prendre plusieurs minutes.</span><span class="sxs-lookup"><span data-stu-id="e53be-147">Configuring a new virtual network integration can take several minutes.</span></span> 
> 
> 

<span data-ttu-id="e53be-148">Pour activer l’intégration au réseau virtuel, accédez aux paramètres de votre application, puis sélectionnez Mise en réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-148">To enable VNet Integration, open your app Settings and then select Networking.</span></span> <span data-ttu-id="e53be-149">L’interface utilisateur qui s’ouvre offre trois options de mise en réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-149">The UI that opens up offers three networking choices.</span></span> <span data-ttu-id="e53be-150">Ce guide porte uniquement sur l’intégration au réseau virtuel. Cependant, les connexions hybrides et environnements App Service sont décrits plus loin dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e53be-150">This guide is only going into VNet Integration though Hybrid Connections and App Service Environments are discussed later in this document.</span></span> 

<span data-ttu-id="e53be-151">Si le plan de tarification n’est pas adapté à votre application, l’interface utilisateur vous permettra de le faire évoluer facilement vers un plan de tarification supérieur de votre choix.</span><span class="sxs-lookup"><span data-stu-id="e53be-151">If your app is not in the correct pricing plan, the UI enables you to scale your plan to a higher pricing plan of your choice.</span></span>

![][1]

### <a name="enabling-vnet-integration-with-a-pre-existing-vnet"></a><span data-ttu-id="e53be-152">Activation de l’intégration au réseau virtuel avec un réseau virtuel existant</span><span class="sxs-lookup"><span data-stu-id="e53be-152">Enabling VNet Integration with a pre-existing VNet</span></span>
<span data-ttu-id="e53be-153">L’interface utilisateur d’intégration au réseau virtuel vous permet d’effectuer vos choix dans la liste de vos réseaux virtuels.</span><span class="sxs-lookup"><span data-stu-id="e53be-153">The VNet Integration UI allows you to select from a list of your VNets.</span></span> <span data-ttu-id="e53be-154">Les réseaux virtuels Classic indiquent leur type avec le terme « Classique » entre parenthèses à côté de leur nom.</span><span class="sxs-lookup"><span data-stu-id="e53be-154">The Classic VNets indicate that they are such with the word "Classic" in parentheses next to the VNet name.</span></span> <span data-ttu-id="e53be-155">La liste est triée de telle façon que les réseaux virtuels Resource Manager sont répertoriés en premier.</span><span class="sxs-lookup"><span data-stu-id="e53be-155">The list is sorted such that the Resource Manager VNets are listed first.</span></span> <span data-ttu-id="e53be-156">Dans l’image ci-dessous, vous pouvez voir qu’un seul réseau virtuel peut être sélectionné.</span><span class="sxs-lookup"><span data-stu-id="e53be-156">In the image shown below you can see that only one VNet can be selected.</span></span> <span data-ttu-id="e53be-157">Un réseau virtuel peut être grisé pour plusieurs raisons, notamment :</span><span class="sxs-lookup"><span data-stu-id="e53be-157">There are multiple reasons that a VNet can be grayed out including:</span></span>

* <span data-ttu-id="e53be-158">Le réseau virtuel est dans un abonnement différent de celui auquel votre compte a accès</span><span class="sxs-lookup"><span data-stu-id="e53be-158">the VNet is in another subscription that your account has access to</span></span>
* <span data-ttu-id="e53be-159">La connexion de point à site n’est pas activée pour le réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-159">the VNet does not have Point to Site enabled</span></span>
* <span data-ttu-id="e53be-160">Le réseau virtuel ne dispose pas d’une passerelle de routage dynamique</span><span class="sxs-lookup"><span data-stu-id="e53be-160">the VNet does not have a dynamic routing gateway</span></span>

![][2]

<span data-ttu-id="e53be-161">Pour activer l’intégration, cliquez simplement sur le réseau virtuel souhaité.</span><span class="sxs-lookup"><span data-stu-id="e53be-161">To enable integration simply click on the VNet you wish to integrate with.</span></span> <span data-ttu-id="e53be-162">Votre application est automatiquement redémarrée, de sorte que les modifications soient appliquées.</span><span class="sxs-lookup"><span data-stu-id="e53be-162">After you select the VNet, your app is automatically restarted for the changes to take effect.</span></span> 

##### <a name="enable-point-to-site-in-a-classic-vnet"></a><span data-ttu-id="e53be-163">Activation de la connexion point à site dans un réseau virtuel Classic</span><span class="sxs-lookup"><span data-stu-id="e53be-163">Enable Point to Site in a Classic VNet</span></span>
<span data-ttu-id="e53be-164">Si votre réseau virtuel ne dispose pas d’une passerelle ni de connexion de point à site, vous devez commencer par en configurer une.</span><span class="sxs-lookup"><span data-stu-id="e53be-164">If your VNet does not have a gateway nor has Point to Site, then you have to set that up first.</span></span> <span data-ttu-id="e53be-165">Pour effectuer cette opération pour un réseau virtuel Classic, accédez au [portail Azure][AzurePortal] et affichez la liste des réseaux virtuels (classiques).</span><span class="sxs-lookup"><span data-stu-id="e53be-165">To do this for a Classic VNet, go to the [Azure portal][AzurePortal] and bring up the list of Virtual Networks(classic).</span></span> <span data-ttu-id="e53be-166">Cliquez sur le réseau avec lequel vous souhaitez effectuer l’intégration, puis cliquez sur la grande zone Connexions VPN, sous Essentials.</span><span class="sxs-lookup"><span data-stu-id="e53be-166">From here, click on the network you want to integrate with and click on the big box under Essentials called VPN Connections.</span></span> <span data-ttu-id="e53be-167">À ce stade, vous pouvez créer votre réseau VPN de point à site et, à partir de ce réseau, créer une passerelle.</span><span class="sxs-lookup"><span data-stu-id="e53be-167">From here, you can create your point to site VPN and even have it create a gateway.</span></span> <span data-ttu-id="e53be-168">Une fois créée la connexion de point à site avec passerelle, le processus peut prendre environ 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="e53be-168">After you go through the point to site with gateway creation experience it is about 30 minutes before it is ready.</span></span> 

![][8]

##### <a name="enabling-point-to-site-in-a-resource-manager-vnet"></a><span data-ttu-id="e53be-169">Activation de la connexion point à site dans un réseau virtuel Resource Manager</span><span class="sxs-lookup"><span data-stu-id="e53be-169">Enabling Point to Site in a Resource Manager VNet</span></span>
<span data-ttu-id="e53be-170">Pour configurer un réseau virtuel Resource Manager avec une passerelle et une connexion de point à site, vous pouvez utiliser PowerShell comme le décrit la page [Configurer une connexion de point à site à un réseau virtuel avec PowerShell][V2VNETP2S] ou le Portail Azure comme le décrit la page [Configurer une connexion de point à site sur un réseau virtuel avec le Portail Azure][V2VNETPortal].</span><span class="sxs-lookup"><span data-stu-id="e53be-170">To configure a Resource Manager VNet with a gateway and Point to Site, you can use either PowerShell as documented here, [Configure a Point-to-Site connection to a virtual network using PowerShell][V2VNETP2S] or use the Azure portal as documented here, [Configure a Point-to-Site connection to a VNet using the Azure portal][V2VNETPortal].</span></span> <span data-ttu-id="e53be-171">L’interface utilisateur permettant d’effectuer cette opération n’est pas encore disponible.</span><span class="sxs-lookup"><span data-stu-id="e53be-171">The UI to perform this capability is not yet available.</span></span> <span data-ttu-id="e53be-172">Notez que vous devez créer des certificats pour la configuration point à site.</span><span class="sxs-lookup"><span data-stu-id="e53be-172">Note that you need to create certificates for the Point to Site configuration.</span></span> <span data-ttu-id="e53be-173">Cela est configuré automatiquement lorsque vous connectez votre application web au réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-173">This is automatically configured when you connect your WebApp to the VNet.</span></span> 

### <a name="creating-a-pre-configured-vnet"></a><span data-ttu-id="e53be-174">Création d’un réseau virtuel préconfiguré</span><span class="sxs-lookup"><span data-stu-id="e53be-174">Creating a pre-configured VNet</span></span>
<span data-ttu-id="e53be-175">Si vous souhaitez créer un réseau virtuel configuré avec une passerelle et connexion point à site, l’interface réseau App Service a la possibilité de le faire, mais uniquement pour un réseau virtuel Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="e53be-175">If you want to create a new VNet that is configured with a gateway and Point-to-Site, then the App Service networking UI has the capability to do that but only for a Resource Manager VNet.</span></span> <span data-ttu-id="e53be-176">Si vous souhaitez créer un réseau virtuel Classic avec une passerelle et une connexion point à site, vous devez le faire manuellement via l’interface utilisateur de réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-176">If you wish to create a Classic VNet with a gateway and Point-to-Site, then you need to do this manually through the Networking user interface.</span></span> 

<span data-ttu-id="e53be-177">Pour créer un réseau virtuel Resource Manager via l’interface utilisateur d’intégration au réseau virtuel, sélectionnez simplement **Créer un réseau virtuel** et indiquez les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="e53be-177">To create a Resource Manager VNet through the VNet Integration UI, simply select **Create New Virtual Network** and provide the:</span></span>

* <span data-ttu-id="e53be-178">Nom du réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-178">Virtual Network Name</span></span>
* <span data-ttu-id="e53be-179">Bloc d’adresses du réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-179">Virtual Network Address Block</span></span>
* <span data-ttu-id="e53be-180">Nom du sous-réseau</span><span class="sxs-lookup"><span data-stu-id="e53be-180">Subnet Name</span></span>
* <span data-ttu-id="e53be-181">Bloc d’adresses du sous-réseau</span><span class="sxs-lookup"><span data-stu-id="e53be-181">Subnet Address Block</span></span>
* <span data-ttu-id="e53be-182">Bloc d’adresses de la passerelle</span><span class="sxs-lookup"><span data-stu-id="e53be-182">Gateway Address Block</span></span>
* <span data-ttu-id="e53be-183">Bloc d’adresses de point à site</span><span class="sxs-lookup"><span data-stu-id="e53be-183">Point-to-Site Address Block</span></span>

<span data-ttu-id="e53be-184">Si vous souhaitez que ce réseau virtuel puisse se connecter à d’autres réseaux, vous devez éviter de choisir un espace d’adressage IP qui chevauche celui de ces réseaux.</span><span class="sxs-lookup"><span data-stu-id="e53be-184">If you want this VNet to connect to any other networks, then you should avoid picking IP address space that overlaps with those networks.</span></span> 

> [!NOTE]
> <span data-ttu-id="e53be-185">La création du réseau virtuel Resource Manager avec passerelle prend environ 30 minutes. Actuellement, le réseau virtuel ne sera pas intégré à votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-185">Resource Manager VNet creation with a gateway takes about 30 minutes and currently does not integrate the VNet with your app.</span></span> <span data-ttu-id="e53be-186">Une fois votre réseau virtuel créé avec la passerelle, vous devez revenir à l’interface d’intégration de réseau virtuel de votre application et sélectionner votre nouveau réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-186">After your VNet is created with the gateway you need to come back to your app VNet Integration UI and select your new VNet.</span></span>
> 
> 

![][3]

<span data-ttu-id="e53be-187">En règle générale, les réseaux virtuels Azure sont créés dans des plages d’adresses de réseau privées.</span><span class="sxs-lookup"><span data-stu-id="e53be-187">Azure VNets normally are created within private network addresses.</span></span> <span data-ttu-id="e53be-188">Par défaut, la fonctionnalité d’intégration au réseau virtuel achemine tout le trafic destiné à ces plages d’adresses IP sur votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-188">By default the VNet Integration feature routes any traffic destined for those IP address ranges into your VNet.</span></span> <span data-ttu-id="e53be-189">Les plages d’adresses IP privées sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="e53be-189">The private IP address ranges are:</span></span>

* <span data-ttu-id="e53be-190">10.0.0.0/8 - identique à 10.0.0.0 - 10.255.255.255</span><span class="sxs-lookup"><span data-stu-id="e53be-190">10.0.0.0/8 - this is the same as 10.0.0.0 - 10.255.255.255</span></span>
* <span data-ttu-id="e53be-191">172.16.0.0/12 - identique à 172.16.0.0 - 172.31.255.255</span><span class="sxs-lookup"><span data-stu-id="e53be-191">172.16.0.0/12 - this is the same as 172.16.0.0 - 172.31.255.255</span></span> 
* <span data-ttu-id="e53be-192">192.168.0.0/16 - identique à 192.168.0.0 - 192.168.255.255</span><span class="sxs-lookup"><span data-stu-id="e53be-192">192.168.0.0/16 - this is the same as 192.168.0.0 - 192.168.255.255</span></span>

<span data-ttu-id="e53be-193">L’espace d’adressage du réseau virtuel doit être spécifié en notation CIDR.</span><span class="sxs-lookup"><span data-stu-id="e53be-193">The VNet address space needs to be specified in CIDR notation.</span></span> <span data-ttu-id="e53be-194">Si vous n’êtes pas familiarisé avec la notation CIDR, il s’agit d’une méthode permettant de spécifier des blocs d’adresses à l’aide d’une adresse IP et d’un entier qui représente le masque de réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-194">If you are unfamiliar with CIDR notation, it is a method for specifying address blocks using an IP address and an integer that represents the network mask.</span></span> <span data-ttu-id="e53be-195">À titre de référence rapide, considérez que 10.1.0.0/24 représenterait 256 adresses et 10.1.0.0/25 représenterait 128 adresses.</span><span class="sxs-lookup"><span data-stu-id="e53be-195">As a quick reference, consider that 10.1.0.0/24 would be 256 addresses and 10.1.0.0/25 would be 128 addresses.</span></span> <span data-ttu-id="e53be-196">Une adresse IPv4 avec /32 représenterait une seule adresse.</span><span class="sxs-lookup"><span data-stu-id="e53be-196">An IPv4 address with a /32 would be just 1 address.</span></span> 

<span data-ttu-id="e53be-197">Si vous définissez les informations de serveur DNS ici, elles seront définies pour votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-197">If you set the DNS server information here, then that is set for your VNet.</span></span> <span data-ttu-id="e53be-198">Après la création du réseau virtuel, vous pouvez modifier ces informations à partir des expériences utilisateur correspondantes.</span><span class="sxs-lookup"><span data-stu-id="e53be-198">After VNet creation you can edit this information from the VNet user experiences.</span></span> <span data-ttu-id="e53be-199">Si vous modifiez le serveur DNS du réseau virtuel, vous devez effectuer une opération de synchronisation réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-199">If you change the DNS of the VNet, then you need to perform a Sync Network operation.</span></span>

<span data-ttu-id="e53be-200">Lorsque vous créez un réseau virtuel Classic à l’aide de l’interface utilisateur d’intégration au réseau virtuel, un réseau virtuel est créé dans le même groupe de ressources que votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-200">When you create a Classic VNet using the VNet Integration UI, it creates a VNet in the same resource group as your app.</span></span> 

## <a name="how-the-system-works"></a><span data-ttu-id="e53be-201">Fonctionnement du système</span><span class="sxs-lookup"><span data-stu-id="e53be-201">How the system works</span></span>
<span data-ttu-id="e53be-202">Pour connecter votre application à votre réseau virtuel, cette fonctionnalité s’appuie sur la technologie de réseau VPN de point à site.</span><span class="sxs-lookup"><span data-stu-id="e53be-202">Under the covers this feature builds on top of Point-to-Site VPN technology to connect your app to your VNet.</span></span> <span data-ttu-id="e53be-203">Les applications dans Azure App Service présentent une architecture système mutualisée empêchant qu’une application soit directement approvisionnée dans un réseau virtuel comme dans le cas des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="e53be-203">Apps in Azure App Service have a multi-tenant system architecture, which precludes provisioning an app directly in a VNet as is done with virtual machines.</span></span> <span data-ttu-id="e53be-204">Grâce à la technologie de point à site, nous limitons l’accès réseau à la seule machine virtuelle hébergeant l’application.</span><span class="sxs-lookup"><span data-stu-id="e53be-204">By building on point-to-site technology we limit network access to just the virtual machine hosting the app.</span></span> <span data-ttu-id="e53be-205">Par ailleurs, l’accès au réseau est restreint à ces hôtes d’application afin que vos applications aient uniquement accès aux réseaux pour lesquels elles ont été configurées.</span><span class="sxs-lookup"><span data-stu-id="e53be-205">Access to the network is further restricted on those app hosts so that your apps can only access the networks that you configure them to access.</span></span> 

![][4]

<span data-ttu-id="e53be-206">Si vous n'avez pas configuré un serveur DNS avec votre réseau virtuel, votre application devra utiliser des adresses IP pour atteindre la ressource sur le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-206">If you haven’t configured a DNS server with your virtual network, your app will need to use IP addresses to reach resource in the VNet.</span></span> <span data-ttu-id="e53be-207">Lorsque vous utilisez des adresses IP, n’oubliez pas que le principal avantage de cette fonctionnalité est qu’elle vous permet d’utiliser les adresses privées au sein de votre réseau privé.</span><span class="sxs-lookup"><span data-stu-id="e53be-207">While using IP addresses, remember that the major benefit of this feature is that it enables you to use the private addresses within your private network.</span></span> <span data-ttu-id="e53be-208">Si vous définissez votre application de sorte qu’elle utilise des adresses IP publiques pour l’une de vos machines virtuelles, vous n’utilisez pas la fonctionnalité d’intégration au réseau virtuel et communiquez sur Internet.</span><span class="sxs-lookup"><span data-stu-id="e53be-208">If you set your app up to use public IP addresses for one of your VMs, then you aren't using the VNet Integration feature and are communicating over the internet.</span></span>

## <a name="managing-the-vnet-integrations"></a><span data-ttu-id="e53be-209">Gestion des intégrations au réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-209">Managing the VNet Integrations</span></span>
<span data-ttu-id="e53be-210">La possibilité de se connecter à un réseau virtuel et de s’en déconnecter se situe au niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="e53be-210">The ability to connect and disconnect to a VNet is at an app level.</span></span> <span data-ttu-id="e53be-211">Les opérations qui peuvent affecter l’intégration au réseau virtuel entre plusieurs applications s’effectuent au niveau de l’ASP.</span><span class="sxs-lookup"><span data-stu-id="e53be-211">Operations that can affect the VNet Integration across multiple apps are at an ASP level.</span></span> <span data-ttu-id="e53be-212">Vous pouvez obtenir des détails sur votre réseau virtuel à partir de l’interface utilisateur qui apparaît au niveau de l’application.</span><span class="sxs-lookup"><span data-stu-id="e53be-212">From the UI that is shown at the app level, you can get details on your VNet.</span></span> <span data-ttu-id="e53be-213">Pour la plupart, ces informations apparaissent également au niveau de l’ASP.</span><span class="sxs-lookup"><span data-stu-id="e53be-213">Most of the same information is also shown at the ASP level.</span></span> 

![][5]

<span data-ttu-id="e53be-214">Sur la page État de la fonctionnalité réseau, vous pouvez voir si votre application est connectée à votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-214">From the Network Feature Status page, you can see if your app is connected to your VNet.</span></span> <span data-ttu-id="e53be-215">Si votre passerelle de réseau virtuel est en panne pour une raison quelconque, votre application apparaît comme non connectée.</span><span class="sxs-lookup"><span data-stu-id="e53be-215">If your VNet gateway is down for whatever reason, then this would show as not-connected.</span></span> 

<span data-ttu-id="e53be-216">Les informations maintenant à votre disposition dans l’interface utilisateur d’intégration au réseau virtuel au niveau de l’application sont identiques aux informations détaillées que vous obtenez à partir de l’ASP.</span><span class="sxs-lookup"><span data-stu-id="e53be-216">The information you now have available to you in the app level VNet Integration UI is the same as the detail information you get from the ASP.</span></span> <span data-ttu-id="e53be-217">Il s’agit des informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="e53be-217">Here are those items:</span></span>

* <span data-ttu-id="e53be-218">Nom du réseau virtuel : ce lien ouvre l’interface utilisateur du réseau virtuel Azure</span><span class="sxs-lookup"><span data-stu-id="e53be-218">VNet Name - This link opens the Azure virtual network UI</span></span>
* <span data-ttu-id="e53be-219">Emplacement : reflète l’emplacement de votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-219">Location - This reflects the location of your VNet.</span></span> <span data-ttu-id="e53be-220">Il est possible d’effectuer une intégration à un réseau virtuel à un autre emplacement.</span><span class="sxs-lookup"><span data-stu-id="e53be-220">It is possible to integrate with a VNet in another location.</span></span>
* <span data-ttu-id="e53be-221">État du certificat : certains certificats sont utilisés pour sécuriser la connexion VPN entre l’application et le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-221">Certificate Status - There are certificates used to secure the VPN connection between the app and the VNet.</span></span> <span data-ttu-id="e53be-222">Cela représente un test pour en vérifier la synchronisation.</span><span class="sxs-lookup"><span data-stu-id="e53be-222">This reflects a test to ensure they are in sync.</span></span>
* <span data-ttu-id="e53be-223">État de la passerelle - si vos passerelles sont en panne pour une raison quelconque, votre application ne peut pas accéder aux ressources du réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-223">Gateway Status - Should your gateways be down for whatever reason then your app cannot access resources in the VNet.</span></span> 
* <span data-ttu-id="e53be-224">Espace d’adressage du réseau virtuel : espace d’adressage IP pour votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-224">VNet address space - This is the IP address space for your VNet.</span></span> 
* <span data-ttu-id="e53be-225">Espace d’adressage de point à site : espace d’adressage IP de point à site pour votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-225">Point to Site address space - This is the point to site IP address space for your VNet.</span></span> <span data-ttu-id="e53be-226">Votre application affichera la communication comme provenant de l’une des adresses IP de cet espace d’adressage.</span><span class="sxs-lookup"><span data-stu-id="e53be-226">Your app shows communication as coming from one of the IPs in this address space.</span></span> 
* <span data-ttu-id="e53be-227">Espace d’adressage de site à site - vous pouvez utiliser des réseaux VPN de site à site pour connecter votre réseau virtuel à vos ressources locales ou à d’autres réseaux virtuels.</span><span class="sxs-lookup"><span data-stu-id="e53be-227">Site to site address space - You can use Site to Site VPNs to connect your VNet to your on-premises resources or to other VNet.</span></span> <span data-ttu-id="e53be-228">Si vous avez effectué cette configuration, les plages IP définies avec cette connexion VPN s’affichent à cet endroit.</span><span class="sxs-lookup"><span data-stu-id="e53be-228">Should you have that configured then the IP ranges defined with that VPN connection shows here.</span></span>
* <span data-ttu-id="e53be-229">Serveurs DNS : si des serveurs DNS sont configurés avec votre réseau virtuel, ils sont répertoriés ici.</span><span class="sxs-lookup"><span data-stu-id="e53be-229">DNS Servers - If you have DNS Servers configured with your VNet, then they are listed here.</span></span>
* <span data-ttu-id="e53be-230">Adresses IP acheminées vers le réseau virtuel : une liste des adresses IP définies pour le routage vers le réseau virtuel est définie, et ces adresses s’affichent ici.</span><span class="sxs-lookup"><span data-stu-id="e53be-230">IPs routed to the VNet - There are a list of IP addresses that your VNet has routing defined for, and those addresses show here.</span></span> 

<span data-ttu-id="e53be-231">La seule opération que vous pouvez effectuer dans la vue d’application de votre interface d’intégration au réseau virtuel consiste à déconnecter votre application du réseau virtuel auquel elle est actuellement connectée.</span><span class="sxs-lookup"><span data-stu-id="e53be-231">The only operation you can take in the app view of your VNet Integration is to disconnect your app from the VNet it is currently connected to.</span></span> <span data-ttu-id="e53be-232">Pour ce faire, cliquez simplement sur Déconnecter dans la partie supérieure.</span><span class="sxs-lookup"><span data-stu-id="e53be-232">To do this simply click Disconnect at the top.</span></span> <span data-ttu-id="e53be-233">Cette action ne modifie pas votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-233">This action does not change your VNet.</span></span> <span data-ttu-id="e53be-234">Le réseau virtuel et sa configuration, notamment les passerelles, demeurent inchangés.</span><span class="sxs-lookup"><span data-stu-id="e53be-234">The VNet and its configuration including the gateways remains unchanged.</span></span> <span data-ttu-id="e53be-235">Si vous souhaitez ensuite supprimer votre réseau virtuel, vous devez d’abord supprimer les ressources qu’il contient, y compris les passerelles.</span><span class="sxs-lookup"><span data-stu-id="e53be-235">If you then want to delete your VNet, you need to first delete the resources in it including the gateways.</span></span> 

<span data-ttu-id="e53be-236">La vue Plan App Service offre des opérations supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="e53be-236">The App Service Plan view has a number of additional operations.</span></span> <span data-ttu-id="e53be-237">Son accès s’effectue également hors de l’application.</span><span class="sxs-lookup"><span data-stu-id="e53be-237">It is also accessed differently than from the app.</span></span> <span data-ttu-id="e53be-238">Pour accéder à l’interface utilisateur de mise en réseau ASP, il vous suffit d’ouvrir l’interface utilisateur ASP et de faire défiler l’affichage vers le bas.</span><span class="sxs-lookup"><span data-stu-id="e53be-238">To reach the ASP Networking UI simply open your ASP UI and scroll down.</span></span> <span data-ttu-id="e53be-239">L’interface utilisateur comporte l’élément État de la fonctionnalité réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-239">There is a UI element called Network Feature Status.</span></span> <span data-ttu-id="e53be-240">Celui-ci offre quelques détails secondaires sur votre intégration au réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-240">It gives some minor details around your VNet Integration.</span></span> <span data-ttu-id="e53be-241">Si vous cliquez sur cet élément, vous ouvrez l’interface utilisateur État de la fonctionnalité réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-241">Clicking on this UI opens the Network Feature Status UI.</span></span> <span data-ttu-id="e53be-242">Si vous cliquez ensuite sur « Cliquez ici pour gérer », l’interface utilisateur qui répertorie les intégrations au réseau virtuel dans cet ASP s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="e53be-242">If you then click on "Click here to manage", the UI that lists the VNet Integrations in this ASP opens.</span></span>

![][6]

<span data-ttu-id="e53be-243">Veillez à mémoriser l’emplacement de l’ASP. Cela vous sera utile lorsque vous déterminerez les emplacements des réseaux virtuels avec lesquels vous effectuez une intégration.</span><span class="sxs-lookup"><span data-stu-id="e53be-243">The location of the ASP is good to remember when looking at the locations of the VNets you are integrating with.</span></span> <span data-ttu-id="e53be-244">Lorsque le réseau virtuel est situé à un autre emplacement, il est très probable que vous rencontriez des problèmes de latence.</span><span class="sxs-lookup"><span data-stu-id="e53be-244">When the VNet is in another location you are far more likely to see latency issues.</span></span> 

<span data-ttu-id="e53be-245">Les réseaux virtuels avec lesquels vous effectuez l’intégration représentent un rappel quant au nombre de réseaux virtuels auxquels vos applications sont intégrées dans cet ASP et au nombre autorisé.</span><span class="sxs-lookup"><span data-stu-id="e53be-245">The VNets integrated with is a reminder on how many VNets your apps are integrated with in this ASP and how many you can have.</span></span> 

<span data-ttu-id="e53be-246">Pour afficher des détails supplémentaires sur chaque réseau virtuel, il vous suffit de cliquer sur le réseau virtuel qui vous intéresse.</span><span class="sxs-lookup"><span data-stu-id="e53be-246">To see added details on each VNet, just click on the VNet you are interested in.</span></span> <span data-ttu-id="e53be-247">Outre les détails mentionnés antérieurement, vous verrez également une liste des applications de cet ASP qui utilisent ce réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-247">In addition to the details that were noted earlier, you can also see a list of the apps in this ASP that are using that VNet.</span></span> 

<span data-ttu-id="e53be-248">Deux actions clés sont possibles.</span><span class="sxs-lookup"><span data-stu-id="e53be-248">With respect to actions there are two primary actions.</span></span> <span data-ttu-id="e53be-249">D’une part, vous avez la possibilité d’ajouter des itinéraires qui dirigent le trafic issu de votre application vers votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-249">The first is the ability to add routes that drive traffic leaving your app into your VNet.</span></span> <span data-ttu-id="e53be-250">D’autre part, vous pouvez synchroniser des certificats et des informations réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-250">The second action is the ability to sync certificates and network information.</span></span>

![][7]

<span data-ttu-id="e53be-251">**Routage** Comme indiqué précédemment, les itinéraires définis dans votre réseau virtuel sont utilisés pour diriger le trafic vers votre réseau virtuel à partir de votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-251">**Routing** As noted earlier the routes that are defined in your VNet are what is used for directing traffic into your VNet from your app.</span></span> <span data-ttu-id="e53be-252">Cependant, dans certains cas, les clients veulent envoyer un trafic sortant supplémentaire à partir d’une application dans le réseau virtuel. Cette fonctionnalité leur est alors fournie.</span><span class="sxs-lookup"><span data-stu-id="e53be-252">There are some uses though where customers want to send additional outbound traffic from an app into the VNet and for them this capability is provided.</span></span> <span data-ttu-id="e53be-253">Ensuite, le traitement du trafic dépend de la façon dont le client configure son réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-253">What happens to the traffic after that is up to how the customer configures their VNet.</span></span> 

<span data-ttu-id="e53be-254">**Certificats** L’état des certificats reflète la vérification effectuée par App Service pour garantir que les certificats que nous utilisons pour la connexion VPN sont toujours valables.</span><span class="sxs-lookup"><span data-stu-id="e53be-254">**Certificates** The Certificate Status reflects a check being performed by the App Service to validate that the certificates that we are using for the VPN connection are still good.</span></span> <span data-ttu-id="e53be-255">Lorsque l’intégration au réseau virtuel est activée, s’il s’agit de la première intégration à ce réseau virtuel à partir d’une application quelconque de cet ASP, un échange de certificats est nécessaire pour garantir la sécurité de la connexion.</span><span class="sxs-lookup"><span data-stu-id="e53be-255">When VNet Integration enabled, then if this is the first integration to that VNet from any apps in this ASP, there is a required exchange of certificates to ensure the security of the connection.</span></span> <span data-ttu-id="e53be-256">Avec les certificats, nous obtenons la configuration DNS, les itinéraires et d’autres éléments similaires qui décrivent le réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-256">Along with the certificates we get the DNS configuration, routes and other similar things that describe the network.</span></span>
<span data-ttu-id="e53be-257">Si ces certificats ou informations réseau sont modifiés, vous devez cliquer sur « Synchronisation réseau ».</span><span class="sxs-lookup"><span data-stu-id="e53be-257">If those certificates or network information is changed, then you need to click "Sync Network".</span></span> <span data-ttu-id="e53be-258">**REMARQUE** : lorsque vous cliquez sur « Synchronisation réseau », la connectivité entre votre application et votre réseau virtuel est brièvement interrompue.</span><span class="sxs-lookup"><span data-stu-id="e53be-258">**NOTE**: When you click "Sync Network" then you cause a brief outage in connectivity between your app and your VNet.</span></span> <span data-ttu-id="e53be-259">Votre application ne sera pas redémarrée, et la perte de connectivité peut altérer le fonctionnement de votre site.</span><span class="sxs-lookup"><span data-stu-id="e53be-259">While your app is not restarted, the loss of connectivity could cause your site to not function properly.</span></span> 

## <a name="accessing-on-premises-resources"></a><span data-ttu-id="e53be-260">Accès aux ressources sur site</span><span class="sxs-lookup"><span data-stu-id="e53be-260">Accessing on-premises resources</span></span>
<span data-ttu-id="e53be-261">La fonctionnalité d’intégration au réseau virtuel offre notamment l’avantage suivant : si votre réseau virtuel est connecté à votre réseau local avec une connexion VPN de site à site, vos applications peuvent accéder à vos ressources locales à partir de votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-261">One of the benefits of the VNet Integration feature is that if your VNet is connected to your on-premises network with a Site to Site VPN then your apps can have access to your on-premises resources from your app.</span></span> <span data-ttu-id="e53be-262">Pour que cela fonctionne, vous devrez peut-être mettre à jour votre passerelle VPN locale avec les itinéraires relatifs à votre plage IP de point à site.</span><span class="sxs-lookup"><span data-stu-id="e53be-262">For this to work though you may need to update your on-premises VPN gateway with the routes for your Point to Site IP range.</span></span> <span data-ttu-id="e53be-263">Lorsque vous configurez le réseau VPN de site à site pour la première fois, les scripts utilisés pour le configurer doivent définir les itinéraires, y compris votre réseau VPN de point à site.</span><span class="sxs-lookup"><span data-stu-id="e53be-263">When the Site to Site VPN is first set up then the scripts used to configure it should set up routes including your Point to Site VPN.</span></span> <span data-ttu-id="e53be-264">Si vous ajoutez le réseau VPN de point à site après avoir créé votre réseau VPN de site à site, vous devrez mettre à jour les itinéraires manuellement.</span><span class="sxs-lookup"><span data-stu-id="e53be-264">If you add the Point to Site VPN after you create your Site to Site VPN, then you need to update the routes manually.</span></span> <span data-ttu-id="e53be-265">La procédure détaillée dépend de la passerelle et n’est pas décrite ici.</span><span class="sxs-lookup"><span data-stu-id="e53be-265">Details on how to do that vary per gateway and are not described here.</span></span> 

> [!NOTE]
> <span data-ttu-id="e53be-266">La fonctionnalité d’intégration au réseau virtuel n’intègre pas d’application à un réseau virtuel doté d’une passerelle ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="e53be-266">The VNet Integration feature does not integrate an app with a VNet that has an ExpressRoute Gateway.</span></span> <span data-ttu-id="e53be-267">Même si la passerelle ExpressRoute est configurée en [mode de coexistence][VPNERCoex], l’intégration du réseau virtuel ne fonctionnera pas.</span><span class="sxs-lookup"><span data-stu-id="e53be-267">Even if the ExpressRoute Gateway is configured in [coexistence mode][VPNERCoex] the VNet Integration does not work.</span></span> <span data-ttu-id="e53be-268">Si vous avez besoin d’accéder aux ressources via une connexion ExpressRoute, vous pouvez utiliser un [App Service Environment][ASE] s’exécutant dans votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-268">If you need to access resources through an ExpressRoute connection, then you can use an [App Service Environment][ASE], which runs in your VNet.</span></span>
> 
> 

## <a name="pricing-details"></a><span data-ttu-id="e53be-269">Détails de la tarification</span><span class="sxs-lookup"><span data-stu-id="e53be-269">Pricing details</span></span>
<span data-ttu-id="e53be-270">Lorsque vous utilisez la fonctionnalité d’intégration au réseau virtuel, vous devez connaître quelques nuances concernant la tarification.</span><span class="sxs-lookup"><span data-stu-id="e53be-270">There are a few pricing nuances that you should be aware of when using the VNet Integration feature.</span></span> <span data-ttu-id="e53be-271">L’utilisation de cette fonctionnalité implique 3 coûts :</span><span class="sxs-lookup"><span data-stu-id="e53be-271">There are 3 related charges to the use of this feature:</span></span>

* <span data-ttu-id="e53be-272">exigences liées au niveau tarifaire de l’ASP ;</span><span class="sxs-lookup"><span data-stu-id="e53be-272">ASP pricing tier requirements</span></span>
* <span data-ttu-id="e53be-273">coût de transfert des données ;</span><span class="sxs-lookup"><span data-stu-id="e53be-273">Data transfer costs</span></span>
* <span data-ttu-id="e53be-274">coûts de la passerelle VPN.</span><span class="sxs-lookup"><span data-stu-id="e53be-274">VPN Gateway costs.</span></span>

<span data-ttu-id="e53be-275">Pour que vos applications puissent utiliser cette fonctionnalité, elles doivent faire partie d’un plan App Service Standard ou Premium.</span><span class="sxs-lookup"><span data-stu-id="e53be-275">For your apps to be able to use this feature, they need to be in a Standard or Premium App Service Plan.</span></span> <span data-ttu-id="e53be-276">Pour plus d’informations sur les coûts, voir : [Tarification App Service][ASPricing].</span><span class="sxs-lookup"><span data-stu-id="e53be-276">You can see more details on those costs here: [App Service Pricing][ASPricing].</span></span> 

<span data-ttu-id="e53be-277">En raison du mode de gestion des réseaux VPN de point à site, vous encourez systématiquement des coûts liés aux données sortantes lors de la connexion pour l’intégration au réseau virtuel, et ce, même si le réseau virtuel est situé dans le même centre de données.</span><span class="sxs-lookup"><span data-stu-id="e53be-277">Due to the way Point to Site VPNs are handled, you always have a charge for outbound data through your VNet Integration connection even if the VNet is in the same data center.</span></span> <span data-ttu-id="e53be-278">Pour connaître ces coûts, voir : [Détails de la tarification de transfert de données][DataPricing].</span><span class="sxs-lookup"><span data-stu-id="e53be-278">To see what those charges are, take a look here: [Data Transfer Pricing Details][DataPricing].</span></span> 

<span data-ttu-id="e53be-279">Les passerelles de réseau virtuel représentent le dernier élément de coût.</span><span class="sxs-lookup"><span data-stu-id="e53be-279">The last item is the cost of the VNet gateways.</span></span> <span data-ttu-id="e53be-280">Si vous n’utilisez pas les passerelles à d’autres fins, par exemple pour des réseaux VPN de site à site, vous payez la prise en charge de la fonctionnalité d’intégration au réseau virtuel par les passerelles.</span><span class="sxs-lookup"><span data-stu-id="e53be-280">If you don't need the gateways for something else such as Site to Site VPNs, then you are paying for gateways to support the VNet Integration feature.</span></span> <span data-ttu-id="e53be-281">Pour plus d’informations sur ces coûts, voir : [tarification de passerelle VPN][VNETPricing].</span><span class="sxs-lookup"><span data-stu-id="e53be-281">There are details on those costs here: [VPN Gateway Pricing][VNETPricing].</span></span> 

## <a name="troubleshooting"></a><span data-ttu-id="e53be-282">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="e53be-282">Troubleshooting</span></span>
<span data-ttu-id="e53be-283">Même si cette fonctionnalité est facile à configurer, il se peut que vous rencontriez certains problèmes.</span><span class="sxs-lookup"><span data-stu-id="e53be-283">While the feature is easy to set up, that doesn't mean that your experience will be problem free.</span></span> <span data-ttu-id="e53be-284">Si vous rencontrez des difficultés pour accéder au point de terminaison souhaité, certains utilitaires vous permettent de tester la connectivité à partir de la console de l’application.</span><span class="sxs-lookup"><span data-stu-id="e53be-284">Should you encounter problems accessing your desired endpoint there are some utilities you can use to test connectivity from the app console.</span></span> <span data-ttu-id="e53be-285">Vous pouvez utiliser deux consoles :</span><span class="sxs-lookup"><span data-stu-id="e53be-285">There are two console experiences you can use.</span></span> <span data-ttu-id="e53be-286">La première est la console Kudu et l’autre est la console accessible à l’aide du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="e53be-286">One is from the Kudu console and the other is the console that you can reach in the Azure portal.</span></span> <span data-ttu-id="e53be-287">Pour ouvrir la console Kudu, à partir de votre application, accédez à Outils -> Kudu.</span><span class="sxs-lookup"><span data-stu-id="e53be-287">To get to the Kudu console from your app go to Tools -> Kudu.</span></span> <span data-ttu-id="e53be-288">Vous pouvez également ouvrir la page [nom_site].scm.azurewebsites.net,</span><span class="sxs-lookup"><span data-stu-id="e53be-288">This is the same as going to [sitename].scm.azurewebsites.net.</span></span> <span data-ttu-id="e53be-289">puis accéder à l’onglet Console de débogage. Pour accéder à la console hébergée par le portail Azure, à partir de votre application, accédez à outils -> Console.</span><span class="sxs-lookup"><span data-stu-id="e53be-289">Once that opens simply go to the Debug console tab. To get to the Azure portal hosted console then from your app go to Tools -> Console.</span></span> 

#### <a name="tools"></a><span data-ttu-id="e53be-290">Outils</span><span class="sxs-lookup"><span data-stu-id="e53be-290">Tools</span></span>
<span data-ttu-id="e53be-291">Des contraintes de sécurité empêchent d’utiliser les outils ping, nslookup et tracert au moyen de la console.</span><span class="sxs-lookup"><span data-stu-id="e53be-291">The tools ping, nslookup and tracert won’t work through the console due to security constraints.</span></span> <span data-ttu-id="e53be-292">Deux outils distincts ont été ajoutés pour les remplacer.</span><span class="sxs-lookup"><span data-stu-id="e53be-292">To fill the void there have been two separate tools added.</span></span> <span data-ttu-id="e53be-293">Pour tester les fonctionnalités DNS, nous avons ajouté un outil nommé nameresolver.exe.</span><span class="sxs-lookup"><span data-stu-id="e53be-293">In order to test DNS functionality we added a tool named nameresolver.exe.</span></span> <span data-ttu-id="e53be-294">La syntaxe est :</span><span class="sxs-lookup"><span data-stu-id="e53be-294">The syntax is:</span></span>

    nameresolver.exe hostname [optional: DNS Server]

<span data-ttu-id="e53be-295">Vous pouvez utiliser nameresolver pour vérifier les noms d’hôte dont dépend votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-295">You can use nameresolver to check the hostnames that your app depends on.</span></span> <span data-ttu-id="e53be-296">De cette façon, vous pouvez tester si des éléments de votre serveur DNS sont mal configurés ou si vous n’avez pas accès à votre serveur DNS.</span><span class="sxs-lookup"><span data-stu-id="e53be-296">This way you can test if you have anything mis-configured with your DNS or perhaps don't have access to your DNS server.</span></span>

<span data-ttu-id="e53be-297">L’outil suivant vous permet de tester la connectivité TCP avec une combinaison hôte/port.</span><span class="sxs-lookup"><span data-stu-id="e53be-297">The next tool allows you to test for TCP connectivity to a host and port combination.</span></span> <span data-ttu-id="e53be-298">Il s’agit de l’outil tcpping.exe, dont la syntaxe est la suivante :</span><span class="sxs-lookup"><span data-stu-id="e53be-298">This tool is called tcpping.exe and the syntax is:</span></span>

    tcpping.exe hostname [optional: port]

<span data-ttu-id="e53be-299">L’utilitaire tcpping vous indique si vous pouvez atteindre un hôte et un port spécifiques.</span><span class="sxs-lookup"><span data-stu-id="e53be-299">The tcpping utility tells you if you can reach a specific host and port.</span></span> <span data-ttu-id="e53be-300">Il peut afficher un succès si une application à écoute sur la combinaison d’hôte et de port, et si l’accès réseau à de votre application à l’hôte et au port est disponible.</span><span class="sxs-lookup"><span data-stu-id="e53be-300">It only can show success if: there is an application listening at the host and port combination, and there is network access from your app to the specified host and port.</span></span>

#### <a name="debugging-access-to-vnet-hosted-resources"></a><span data-ttu-id="e53be-301">Débogage de l’accès aux ressources hébergées sur un réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-301">Debugging access to VNet hosted resources</span></span>
<span data-ttu-id="e53be-302">Plusieurs choses peuvent empêcher votre application d’atteindre un hôte et un port spécifiques.</span><span class="sxs-lookup"><span data-stu-id="e53be-302">There are a number of things that can prevent your app from reaching a specific host and port.</span></span> <span data-ttu-id="e53be-303">La plupart du temps, il s’agit de l’une des trois raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="e53be-303">Most of the time it is one of three things:</span></span>

* <span data-ttu-id="e53be-304">**Présence d’un pare-feu** Si vous utilisez un pare-feu, vous dépassez le délai d’expiration TCP.</span><span class="sxs-lookup"><span data-stu-id="e53be-304">**There is a firewall in the way** If you have a firewall in the way, you will hit the TCP timeout.</span></span> <span data-ttu-id="e53be-305">Dans ce cas, il est de 21 secondes.</span><span class="sxs-lookup"><span data-stu-id="e53be-305">That is 21 seconds in this case.</span></span> <span data-ttu-id="e53be-306">Utilisez l’outil tcpping pour tester la connectivité.</span><span class="sxs-lookup"><span data-stu-id="e53be-306">Use the tcpping tool to test connectivity.</span></span> <span data-ttu-id="e53be-307">Les délais d’expiration TCP peuvent avoir de nombreuses autres origines, mais commencez par vérifier ce point.</span><span class="sxs-lookup"><span data-stu-id="e53be-307">TCP timeouts can be due to many things beyond firewalls but start there.</span></span> 
* <span data-ttu-id="e53be-308">**DNS inaccessible** Le délai d’expiration du DNS est de trois secondes par serveur DNS.</span><span class="sxs-lookup"><span data-stu-id="e53be-308">**DNS is not accessible** The DNS timeout is three seconds per DNS server.</span></span> <span data-ttu-id="e53be-309">Si vous avez deux serveurs DNS, le délai d’expiration est de 6 secondes.</span><span class="sxs-lookup"><span data-stu-id="e53be-309">If you have two DNS servers, the timeout is 6 seconds.</span></span> <span data-ttu-id="e53be-310">Utilisez nameresolver pour vérifier que le DNS fonctionne correctement.</span><span class="sxs-lookup"><span data-stu-id="e53be-310">Use nameresolver to see if DNS is working.</span></span> <span data-ttu-id="e53be-311">Vous ne pouvez pas utiliser nslookup, car il n’utilise pas le DNS avec lequel votre réseau virtuel est configuré.</span><span class="sxs-lookup"><span data-stu-id="e53be-311">Remember you can't use nslookup as that does not use the DNS your VNet is configured with.</span></span>
* <span data-ttu-id="e53be-312">**Plage d’IP P2S non valide** La plage d’adresses IP de point vers site doit se trouver dans les plages d’IP privées RFC 1918 (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255).</span><span class="sxs-lookup"><span data-stu-id="e53be-312">**Invalid P2S IP range** The point to site IP range needs to be in the RFC 1918 private IP ranges (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255).</span></span> <span data-ttu-id="e53be-313">Si la plage utilise des adresses IP en dehors de cette plage, cela ne fonctionnera pas.</span><span class="sxs-lookup"><span data-stu-id="e53be-313">If the range uses IPs outside of that, then things won't work.</span></span> 

<span data-ttu-id="e53be-314">Si ces réponses ne résolvent pas votre problème, commencez par répondre aux questions simples ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="e53be-314">If those items don't answer your problem, look first for the simple things like:</span></span> 

* <span data-ttu-id="e53be-315">Le portail indique-t-il que la passerelle fonctionne ?</span><span class="sxs-lookup"><span data-stu-id="e53be-315">Does the Gateway show as being up in the portal?</span></span>
* <span data-ttu-id="e53be-316">Les certificats s’affichent comme étant synchronisés ?</span><span class="sxs-lookup"><span data-stu-id="e53be-316">Do certificates show as being in sync?</span></span>
* <span data-ttu-id="e53be-317">Un utilisateur a-t-il modifié la configuration du réseau sans effectuer de « Synchronisation réseau » dans les ASP affectés ?</span><span class="sxs-lookup"><span data-stu-id="e53be-317">Did anybody change the network configuration without doing a "Sync Network" in the affected ASPs?</span></span> 

<span data-ttu-id="e53be-318">Si votre passerelle est en panne, rétablissez-la.</span><span class="sxs-lookup"><span data-stu-id="e53be-318">If your gateway is down, then bring it back up.</span></span> <span data-ttu-id="e53be-319">Si vos certificats ne sont pas synchronisés, accédez à la vue ASP de votre interface d’intégration au réseau virtuel et appuyez sur « Synchronisation réseau ».</span><span class="sxs-lookup"><span data-stu-id="e53be-319">If your certificates are out of sync, then go to the ASP view of your VNet Integration and hit "Sync Network".</span></span> <span data-ttu-id="e53be-320">Si vous pensez qu’une modification a été apportée à votre configuration de réseau virtuel et qu’elle n’a pas été synchronisée avec vos ASP, accédez à la vue ASP de votre interface d’intégration au réseau virtuel et appuyez sur « Synchronisation réseau ». Pour rappel, la connexion au réseau virtuel et vos applications seront brièvement interrompues.</span><span class="sxs-lookup"><span data-stu-id="e53be-320">If you suspect that there has been a change made to your VNet configuration and it wasn't sync'd with your ASPs, then go to the ASP view of your VNet Integration and hit "Sync Network" Just as a reminder, this causes a brief outage with your VNet connection and your apps.</span></span> 

<span data-ttu-id="e53be-321">Si tous ces aspects sont corrects, vous devez approfondir vos recherches :</span><span class="sxs-lookup"><span data-stu-id="e53be-321">If all of that is fine, then you need to dig in a bit deeper:</span></span>

* <span data-ttu-id="e53be-322">Existe-t-il d’autres applications utilisant l’intégration de réseau virtuel pour accéder à des ressources dans le même réseau virtuel ?</span><span class="sxs-lookup"><span data-stu-id="e53be-322">Are there any other apps using VNet Integration to reach resources in the same VNet?</span></span> 
* <span data-ttu-id="e53be-323">Pouvez-vous ouvrir la console de l’application et utiliser tcpping pour accéder à d’autres ressources de votre réseau virtuel ?</span><span class="sxs-lookup"><span data-stu-id="e53be-323">Can you go to the app console and use tcpping to reach any other resources in your VNet?</span></span> 

<span data-ttu-id="e53be-324">Si l’un de ces aspects est vérifié, votre intégration au réseau virtuel est correcte, et le problème se situe ailleurs.</span><span class="sxs-lookup"><span data-stu-id="e53be-324">If either of the above are true, then your VNet Integration is fine and the problem is somewhere else.</span></span> <span data-ttu-id="e53be-325">La situation est alors plus complexe car il n’existe aucun moyen simple de comprendre pourquoi vous ne pouvez pas atteindre une combinaison hôte:port.</span><span class="sxs-lookup"><span data-stu-id="e53be-325">This is where it gets to be more of a challenge because there is no simple way to see why you can't reach a host:port.</span></span> <span data-ttu-id="e53be-326">Voici quelques-unes des causes possibles :</span><span class="sxs-lookup"><span data-stu-id="e53be-326">Some of the causes include:</span></span>

* <span data-ttu-id="e53be-327">Un pare-feu activé sur l’hôte empêche l’accès au port de l’application à partir de votre plage d’adresses IP de point à site.</span><span class="sxs-lookup"><span data-stu-id="e53be-327">you have a firewall up on your host preventing access to the application port from your point to site IP range.</span></span> <span data-ttu-id="e53be-328">Des sous-réseaux croisés requièrent souvent un accès public.</span><span class="sxs-lookup"><span data-stu-id="e53be-328">Crossing subnets often requires Public access.</span></span>
* <span data-ttu-id="e53be-329">Votre hôte cible est hors-service.</span><span class="sxs-lookup"><span data-stu-id="e53be-329">your target host is down</span></span>
* <span data-ttu-id="e53be-330">Votre application est arrêtée.</span><span class="sxs-lookup"><span data-stu-id="e53be-330">your application is down</span></span>
* <span data-ttu-id="e53be-331">L’IP ou le nom d’hôte est incorrect.</span><span class="sxs-lookup"><span data-stu-id="e53be-331">you had the wrong IP or hostname</span></span>
* <span data-ttu-id="e53be-332">Votre application est à l’écoute sur un port autre que celui que vous envisagiez.</span><span class="sxs-lookup"><span data-stu-id="e53be-332">your application is listening on a different port than what you expected.</span></span> <span data-ttu-id="e53be-333">Pour vérifier cela, accédez à cet hôte et utilisez la commande « netstat -aon » à partir de l’invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="e53be-333">You can check this by going onto that host and using "netstat -aon" from the cmd prompt.</span></span> <span data-ttu-id="e53be-334">Cette commande affiche l’ID de processus à l’écoute et le port correspondant.</span><span class="sxs-lookup"><span data-stu-id="e53be-334">This shows you what process ID is listening on what port.</span></span> 
* <span data-ttu-id="e53be-335">Les groupes de sécurité de votre réseau sont configurés de telle sorte qu’ils empêchent l’accès à l’hôte et au port de votre application à partir de votre plage d’adresses IP de point à site.</span><span class="sxs-lookup"><span data-stu-id="e53be-335">your network security groups are configured in such a manner that they prevent access to your application host and port from your point to site IP range</span></span>

<span data-ttu-id="e53be-336">N’oubliez pas que vous ne connaissez pas l’adresse IP de la plage d’adresses IP de point à site qui sera utilisée par votre application. Vous devez donc autoriser l’accès à partir de la plage entière.</span><span class="sxs-lookup"><span data-stu-id="e53be-336">Remember that you don't know what IP in your Point to Site IP range that your app will use so you need to allow access from the entire range.</span></span> 

<span data-ttu-id="e53be-337">Étapes de débogage supplémentaires :</span><span class="sxs-lookup"><span data-stu-id="e53be-337">Additional debug steps include:</span></span>

* <span data-ttu-id="e53be-338">Connectez-vous à une autre machine virtuelle de votre réseau virtuel et essayez d’atteindre la combinaison hôte:port de vos ressources.</span><span class="sxs-lookup"><span data-stu-id="e53be-338">log onto another VM in your VNet and attempt to reach your resource host:port from there.</span></span> <span data-ttu-id="e53be-339">Vous pouvez utiliser pour cela certains utilitaires ping TCP ou Telnet.</span><span class="sxs-lookup"><span data-stu-id="e53be-339">There are some TCP ping utilities that you can use for this purpose or can even use telnet if need be.</span></span> <span data-ttu-id="e53be-340">L’objectif ici consiste simplement à déterminer si la connectivité est établie à partir de cette autre machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="e53be-340">The purpose here is just to determine if connectivity is there from this other VM.</span></span> 
* <span data-ttu-id="e53be-341">Démarrez une application sur une autre machine virtuelle et testez l’accès à cet hôte et au port à partir de la console dans votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-341">bring up an application on another VM and test access to that host and port from the console from your app</span></span>

#### <a name="on-premises-resources"></a><span data-ttu-id="e53be-342">Ressources locales</span><span class="sxs-lookup"><span data-stu-id="e53be-342">On-premises resources</span></span> ####
<span data-ttu-id="e53be-343">Si votre application ne peut pas accéder aux ressources locales, commencez par vérifier si vous pouvez accéder à une ressource de votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-343">If your app cannot reach resources on-premises, then the first thing you should check is if you can reach a resource in your VNet.</span></span> <span data-ttu-id="e53be-344">Si cela fonctionne, essayez d’atteindre l’application locale à partir d’une machine virtuelle dans le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-344">If that works, try to reach the on-premises application from a VM in the VNet.</span></span> <span data-ttu-id="e53be-345">Vous pouvez utiliser Telnet ou un utilitaire ping TCP.</span><span class="sxs-lookup"><span data-stu-id="e53be-345">You can use telnet or a TCP ping utility.</span></span> <span data-ttu-id="e53be-346">Si votre machine virtuelle ne peut pas accéder à votre ressource locale, vérifiez que votre connexion VPN de site à site fonctionne.</span><span class="sxs-lookup"><span data-stu-id="e53be-346">If your VM can't reach your on-premises resource, then make sure your Site to Site VPN connection is working.</span></span> <span data-ttu-id="e53be-347">Si c’est le cas, vérifiez les éléments indiqués précédemment, ainsi que la configuration et l’état de la passerelle locale.</span><span class="sxs-lookup"><span data-stu-id="e53be-347">If it is working, then check the same things noted earlier as well as the on-premises gateway configuration and status.</span></span> 

<span data-ttu-id="e53be-348">Maintenant, si votre machine virtuelle hébergée sur réseau virtuel peut atteindre votre système local, mais que votre application ne le peut pas, la raison est probablement l’une des suivantes :</span><span class="sxs-lookup"><span data-stu-id="e53be-348">Now if your VNet hosted VM can reach your on-premises system but your app can't then the reason is likely one of the following:</span></span>

* <span data-ttu-id="e53be-349">vos itinéraires ne sont pas configurés avec vos plages IP de point à site dans votre passerelle locale</span><span class="sxs-lookup"><span data-stu-id="e53be-349">your routes are not configured with your point to site IP ranges in your on-premises gateway</span></span>
* <span data-ttu-id="e53be-350">vos groupes de sécurité réseau bloquent l'accès de votre plage IP de point à site</span><span class="sxs-lookup"><span data-stu-id="e53be-350">your network security groups are blocking access for your Point to Site IP range</span></span>
* <span data-ttu-id="e53be-351">vos pare-feu local locaux bloquent le trafic à partir de votre plage IP de point à site</span><span class="sxs-lookup"><span data-stu-id="e53be-351">your on-premises firewalls are blocking traffic from your Point to Site IP range</span></span>
* <span data-ttu-id="e53be-352">vous avez un itinéraire défini par l’utilisateur (UDR) dans votre réseau virtuel qui empêche votre trafic de point à site d’atteindre votre réseau local</span><span class="sxs-lookup"><span data-stu-id="e53be-352">you have a User Defined Route(UDR) in your VNet that prevents your Point to Site based traffic from reaching your on-premises network</span></span>

## <a name="hybrid-connections-and-app-service-environments"></a><span data-ttu-id="e53be-353">Connexions hybrides et environnements App Service</span><span class="sxs-lookup"><span data-stu-id="e53be-353">Hybrid Connections and App Service Environments</span></span>
<span data-ttu-id="e53be-354">Trois fonctionnalités permettent d’accéder aux ressources hébergées sur le réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-354">There are three features that enable access to VNet hosted resources.</span></span> <span data-ttu-id="e53be-355">Il s'agit de :</span><span class="sxs-lookup"><span data-stu-id="e53be-355">They are:</span></span>

* <span data-ttu-id="e53be-356">Intégration au réseau virtuel</span><span class="sxs-lookup"><span data-stu-id="e53be-356">VNet Integration</span></span>
* <span data-ttu-id="e53be-357">les connexions hybrides</span><span class="sxs-lookup"><span data-stu-id="e53be-357">Hybrid Connections</span></span>
* <span data-ttu-id="e53be-358">Environnements App Service</span><span class="sxs-lookup"><span data-stu-id="e53be-358">App Service Environments</span></span>

<span data-ttu-id="e53be-359">Pour les connexions hybrides, vous devez installer l’agent de relais Gestionnaire de connexion hybride (HCM, Hybrid Connection Manager) sur votre réseau.</span><span class="sxs-lookup"><span data-stu-id="e53be-359">Hybrid Connections requires you to install a relay agent called the Hybrid Connection Manager(HCM) in your network.</span></span> <span data-ttu-id="e53be-360">HCM doit pouvoir se connecter à Azure et à votre application.</span><span class="sxs-lookup"><span data-stu-id="e53be-360">The HCM needs to be able to connect to Azure and also to your application.</span></span> <span data-ttu-id="e53be-361">Cette solution est particulièrement efficace à partir d’un réseau distant, tel que votre réseau local ou un autre réseau hébergé dans le cloud, car elle ne nécessite pas de point de terminaison accessible sur Internet.</span><span class="sxs-lookup"><span data-stu-id="e53be-361">This solution is especially great from a remote network such as your on-premises network or even another cloud hosted network because it does not require an internet accessible endpoint.</span></span> <span data-ttu-id="e53be-362">HCM s’exécute uniquement sous Windows. Vous pouvez exécuter jusqu’à cinq instances pour bénéficier d’une haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="e53be-362">The HCM only runs on Windows and you can have up to five instances running to provide high availability.</span></span> <span data-ttu-id="e53be-363">Cependant, les connexions hybrides prennent en charge uniquement le protocole TCP, et chaque point de terminaison de connexion hybride doit correspondre à une combinaison hôte:port spécifique.</span><span class="sxs-lookup"><span data-stu-id="e53be-363">Hybrid Connections only supports TCP though and each HC endpoint has to match to a specific host:port combination.</span></span> 

<span data-ttu-id="e53be-364">Avec un environnement App Service, vous pouvez exécuter une instance d’Azure App Service dans votre réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-364">The App Service Environment feature allows you to run an instance of the Azure App Service in your VNet.</span></span> <span data-ttu-id="e53be-365">Ainsi, vos applications peuvent accéder aux ressources de votre réseau virtuel sans étapes supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="e53be-365">This lets your apps access resources in your VNet without any extra steps.</span></span> <span data-ttu-id="e53be-366">Un environnement App Service offre d’autres avantages. Par exemple, vous pouvez utiliser des workers basés sur Dv2 avec jusqu’à 14 Go de RAM.</span><span class="sxs-lookup"><span data-stu-id="e53be-366">Some of the other benefits of an App Service Environment are that you can use Dv2 based workers with up to 14 GB of RAM.</span></span> <span data-ttu-id="e53be-367">En outre, vous pouvez étendre le système selon vos besoins.</span><span class="sxs-lookup"><span data-stu-id="e53be-367">Another benefit is that you can scale the system to meet your needs.</span></span> <span data-ttu-id="e53be-368">Contrairement aux environnements mutualisés où ASP est limité à 20 instances, dans un environnement App Service, vous pouvez évoluer jusqu'à 100 instances d’ASP.</span><span class="sxs-lookup"><span data-stu-id="e53be-368">Unlike the multi-tenant environments where your ASP is limited to 20 instances, in an ASE you can scale up to 100 ASP instances.</span></span> <span data-ttu-id="e53be-369">Un des avantages d’un ASE que n’offre pas l’intégration au réseau virtuel, est la possibilité d’utiliser un environnement App Service avec un réseau VPN ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="e53be-369">One of the things you get with an ASE that you don't with VNet Integration is that an App Service Environment can work with an ExpressRoute VPN.</span></span> 

<span data-ttu-id="e53be-370">Même si, dans certains cas, il est possible d’utiliser ces deux fonctionnalités, l’une ne remplace pas l’autre.</span><span class="sxs-lookup"><span data-stu-id="e53be-370">While there is some use case overlap, none of these feature can replace any of the others.</span></span> <span data-ttu-id="e53be-371">Le choix de la fonctionnalité à utiliser dépend de vos besoins.</span><span class="sxs-lookup"><span data-stu-id="e53be-371">Knowing what feature to use is tied to your needs.</span></span> <span data-ttu-id="e53be-372">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="e53be-372">For example:</span></span>

* <span data-ttu-id="e53be-373">Si vous êtes un développeur et que vous souhaitez simplement exécuter un site dans Azure et lui permettre d’accéder à la base de données de votre station de travail locale, la solution la plus simple consiste à utiliser des connexions hybrides.</span><span class="sxs-lookup"><span data-stu-id="e53be-373">If you are a developer and simply want to run a site in Azure and have it access the database on the workstation under your desk, then the easiest thing to use is Hybrid Connections.</span></span> 
* <span data-ttu-id="e53be-374">Si vous êtes une organisation de grande envergure et que vous souhaitez placer un grand nombre de propriétés web dans le cloud public et les gérer dans votre propre réseau, il est préférable de recourir à un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="e53be-374">If you are a large organization that wants to put a large number of web properties in the public cloud and manage them in your own network, then you want to go with the App Service Environment.</span></span> 
* <span data-ttu-id="e53be-375">Si vous possédez de nombreuses applications hébergées par App Service et que vous souhaitez simplement accéder aux ressources de votre réseau virtuel, privilégiez l’intégration au réseau virtuel.</span><span class="sxs-lookup"><span data-stu-id="e53be-375">If you have a number of App Service hosted apps and simply want to access resources in your VNet, then VNet Integration is the way to go.</span></span> 

<span data-ttu-id="e53be-376">Au-delà de ces cas d’utilisation, certains aspects liés à la simplicité doivent être pris en compte.</span><span class="sxs-lookup"><span data-stu-id="e53be-376">Beyond the use cases, there are some simplicity related aspects.</span></span> <span data-ttu-id="e53be-377">Si votre réseau virtuel est déjà connecté à votre réseau local, l’utilisation de l’intégration au réseau virtuel ou d’un environnement App Service est un moyen simple de consommer des ressources locales.</span><span class="sxs-lookup"><span data-stu-id="e53be-377">If your VNet is already connected to your on-premises network, then using VNet Integration or an App Service Environment is an easy way to consume on-premises resources.</span></span> <span data-ttu-id="e53be-378">En revanche, si votre réseau virtuel n’est pas connecté à votre réseau local, la configuration d’un réseau VPN de site à site avec votre réseau virtuel sera beaucoup plus complexe que l’installation du Gestionnaire de connexion hybride.</span><span class="sxs-lookup"><span data-stu-id="e53be-378">On the other hand, if your VNet is not connected to your on-premises network then it's a lot more overhead to set up a site to site VPN with your VNet compared with installing the HCM.</span></span> 

<span data-ttu-id="e53be-379">Outre les différences fonctionnelles, il existe également des différences de tarification.</span><span class="sxs-lookup"><span data-stu-id="e53be-379">Beyond the functional differences, there are also pricing differences.</span></span> <span data-ttu-id="e53be-380">L’environnement App Service est un service Premium offrant des possibilités de configuration de réseau inégalées et des fonctionnalités remarquables.</span><span class="sxs-lookup"><span data-stu-id="e53be-380">The App Service Environment feature is a Premium service offering but offers the most network configuration possibilities in addition to other great features.</span></span> <span data-ttu-id="e53be-381">L’intégration au réseau virtuel peut être utilisée avec des plans App Service Standard ou Premium. Elle est idéale pour la consommation sécurisée des ressources dans votre réseau virtuel à partir du système App Service mutualisé.</span><span class="sxs-lookup"><span data-stu-id="e53be-381">VNet Integration can be used with Standard or Premium ASPs and is perfect for securely consuming resources in your VNet from the multi-tenant App Service.</span></span> <span data-ttu-id="e53be-382">Actuellement, les connexions hybrides dépendent d’un compte BizTalk dont les niveaux de tarification sont variables : une solution gratuite est proposée, puis le tarif augmente progressivement selon le nombre de connexions requises.</span><span class="sxs-lookup"><span data-stu-id="e53be-382">Hybrid Connections currently depends on a BizTalk account, which has pricing levels that start free and then get progressively more expensive based on the amount you need.</span></span> <span data-ttu-id="e53be-383">Cependant, si vous devez utiliser de nombreux réseaux, les connexions hybrides représentent la solution idéale : elles vous permettent d’accéder aux ressources de plus de 100 réseaux distincts.</span><span class="sxs-lookup"><span data-stu-id="e53be-383">When it comes to working across many networks though, there is no other feature like Hybrid Connections, which can enable you to access resources in well over 100 separate networks.</span></span> 

<!--Image references-->
[1]: ./media/web-sites-integrate-with-vnet/vnetint-upgradeplan.png
[2]: ./media/web-sites-integrate-with-vnet/vnetint-existingvnet.png
[3]: ./media/web-sites-integrate-with-vnet/vnetint-createvnet.png
[4]: ./media/web-sites-integrate-with-vnet/vnetint-howitworks.png
[5]: ./media/web-sites-integrate-with-vnet/vnetint-appmanage.png
[6]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanage.png
[7]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanagedetail.png
[8]: ./media/web-sites-integrate-with-vnet/vnetint-vnetp2s.png

<!--Links-->
[VNETOverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-overview/ 
[AzurePortal]: http://portal.azure.com/
[ASPricing]: http://azure.microsoft.com/pricing/details/app-service/
[VNETPricing]: http://azure.microsoft.com/pricing/details/vpn-gateway/
[DataPricing]: http://azure.microsoft.com/pricing/details/data-transfers/
[V2VNETP2S]: http://azure.microsoft.com/documentation/articles/vpn-gateway-howto-point-to-site-rm-ps/
[IntPowershell]: http://azure.microsoft.com/documentation/articles/app-service-vnet-integration-powershell/
[ASEintro]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
[ILBASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/create-ilb-ase
[V2VNETPortal]: https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal
[VPNERCoex]: http://docs.microsoft.com/en-us/azure/expressroute/expressroute-howto-coexist-resource-manager
[ASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
