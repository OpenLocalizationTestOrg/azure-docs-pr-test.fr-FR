---
title: Meilleures pratiques pour Azure App Service
description: "Découvrez les meilleures pratiques et la résolution des problèmes pour Azure App Service."
services: app-service
documentationcenter: 
author: dariagrigoriu
manager: erikre
editor: mollybos
ms.assetid: f3359464-fa44-4f4a-9ea6-7821060e8d0d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/30/2016
ms.author: dariagrigoriu
ms.openlocfilehash: fd94f5b17f69dec91c78c8acfbac2eaf5787c010
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="best-practices-for-azure-app-service"></a><span data-ttu-id="0d782-103">Meilleures pratiques pour Azure App Service</span><span class="sxs-lookup"><span data-stu-id="0d782-103">Best Practices for Azure App Service</span></span>
<span data-ttu-id="0d782-104">Cet article résume les meilleures pratiques dans l’utilisation de [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="0d782-104">This article summarizes best practices for using [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> 

## <span data-ttu-id="0d782-105"><a name="colocation"></a>Colocalisation</span><span class="sxs-lookup"><span data-stu-id="0d782-105"><a name="colocation"></a>Colocation</span></span>
<span data-ttu-id="0d782-106">Lorsqu’une base de données et des ressources Azure composant une solution, telle qu’une application web, se trouvent dans des régions différentes, les effets entraînés peuvent être les suivants :</span><span class="sxs-lookup"><span data-stu-id="0d782-106">When Azure resources composing a solution such as a web app and a database are located in different regions the effects can include the following:</span></span>

* <span data-ttu-id="0d782-107">Une latence plus élevée dans la communication entre les ressources</span><span class="sxs-lookup"><span data-stu-id="0d782-107">Increased latency in communication between resources</span></span>
* <span data-ttu-id="0d782-108">Des frais plus élevés pour le transfert de données sortantes entre les régions comme indiqué dans la [page de tarification Azure](https://azure.microsoft.com/pricing/details/data-transfers)</span><span class="sxs-lookup"><span data-stu-id="0d782-108">Monetary charges for outbound data transfer cross-region as noted on the [Azure pricing page](https://azure.microsoft.com/pricing/details/data-transfers).</span></span>

<span data-ttu-id="0d782-109">La colocalisation dans la même région est idéale pour les ressources Azure composant une solution telle qu’une application web et un compte de stockage ou de base de données utilisé pour conserver du contenu ou des données.</span><span class="sxs-lookup"><span data-stu-id="0d782-109">Colocation in the same region is best for Azure resources composing a solution such as a web app and a database or storage account used to hold content or data.</span></span> <span data-ttu-id="0d782-110">Lors de la création de ressources, assurez-vous que celles-ci se trouvent dans la même région Azure, à moins que des motifs commerciaux ou conceptuels spécifiques entravent cette possibilité.</span><span class="sxs-lookup"><span data-stu-id="0d782-110">When creating resources you should make sure they are in the same Azure region unless you have specific business or design reason for them not to be.</span></span> <span data-ttu-id="0d782-111">Vous pouvez déplacer une application App Service vers la région dans laquelle se trouve votre base de données en tirant parti de la [fonctionnalité de clonage de l’application App Service](app-service-web-app-cloning-portal.md) , actuellement disponible pour les applications du plan App Service Premium.</span><span class="sxs-lookup"><span data-stu-id="0d782-111">You can move an App Service app to the same region as your database by leveraging the [App Service cloning feature](app-service-web-app-cloning-portal.md) currently available for Premium App Service Plan apps.</span></span>   

## <span data-ttu-id="0d782-112"><a name="memoryresources"></a>Quand les applications consomment plus de mémoire que prévu</span><span class="sxs-lookup"><span data-stu-id="0d782-112"><a name="memoryresources"></a>When apps consume more memory than expected</span></span>
<span data-ttu-id="0d782-113">Si vous remarquez qu’une application consomme plus de mémoire que prévu, indiqué par des analyses ou des recommandations de service, envisagez d’exécuter la [fonctionnalité auto-curative d’App Service](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span><span class="sxs-lookup"><span data-stu-id="0d782-113">When you notice an app consumes more memory than expected as indicated via monitoring or service recommendations consider the [App Service Auto-Healing feature](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span></span> <span data-ttu-id="0d782-114">Une des options de la fonctionnalité auto-curative consiste à prendre des actions personnalisées, basées sur un seuil de mémoire.</span><span class="sxs-lookup"><span data-stu-id="0d782-114">One of the options for the Auto-Healing feature is taking custom actions based on a memory threshold.</span></span> <span data-ttu-id="0d782-115">Les actions vont des notifications par courrier électronique à la prévention immédiate des risques par le recyclage du processus de travail, en passant par l’examen via le vidage de la mémoire.</span><span class="sxs-lookup"><span data-stu-id="0d782-115">Actions span the spectrum from email notifications to investigation via memory dump to on-the-spot mitigation by recycling the worker process.</span></span> <span data-ttu-id="0d782-116">La fonctionnalité auto-curative peut être configurée via le fichier web.config et une interface utilisateur conviviale, comme le décrit ce billet de blog pour l’ [extension du site de support App Service](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span><span class="sxs-lookup"><span data-stu-id="0d782-116">Auto-healing can be configured via web.config and via a friendly user interface as described at in this blog post for the [App Service Support Site Extension](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span></span>   

## <span data-ttu-id="0d782-117"><a name="CPUresources"></a>Quand les applications consomment plus d’UC que prévu</span><span class="sxs-lookup"><span data-stu-id="0d782-117"><a name="CPUresources"></a>When apps consume more CPU than expected</span></span>
<span data-ttu-id="0d782-118">Si vous remarquez qu’une application consomme plus d’UC que prévu ou qu’elle provoque des pics de consommation d’UC répétés, indiqué par des analyses ou des recommandations de service, envisagez de faire monter ou descendre en puissance le plan App Service.</span><span class="sxs-lookup"><span data-stu-id="0d782-118">When you notice an app consumes more CPU than expected or experiences repeated CPU spikes as indicated via monitoring or service recommendations consider scaling up or scaling out the App Service plan.</span></span> <span data-ttu-id="0d782-119">Si votre application est « avec état », la seule option possible est la montée en charge. Si l’application est « sans état », l’augmentation de la taille des instances vous confère plus de souplesse et un potentiel de mise à l’échelle plus élevé.</span><span class="sxs-lookup"><span data-stu-id="0d782-119">If your application is statefull, scaling up is the only option, while if your application is stateless, scaling out will give you more flexibility and higher scale potential.</span></span> 

<span data-ttu-id="0d782-120">Pour plus d’informations sur les applications « sans état » et « avec état », visualisez la vidéo [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid)(Planification d’une application multiniveau complète et évolutive sur l’application web Microsoft Azure).</span><span class="sxs-lookup"><span data-stu-id="0d782-120">For more information about “statefull” vs “stateless” applications you can watch this video: [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid).</span></span> <span data-ttu-id="0d782-121">Pour plus d’informations sur les options de montée en charge et de mise à l’échelle automatique, consultez [Mise à l’échelle d’une application web dans Microsoft Azure App Service](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="0d782-121">For more information about App Service scaling and autoscaling options read: [Scale a Web App in Azure App Service](web-sites-scale.md).</span></span>  

## <span data-ttu-id="0d782-122"><a name="socketresources"></a>Quand les ressources de socket sont épuisées</span><span class="sxs-lookup"><span data-stu-id="0d782-122"><a name="socketresources"></a>When socket resources are exhausted</span></span>
<span data-ttu-id="0d782-123">L’utilisation des bibliothèques clientes constitue une raison courante de l’épuisement des connexions TCP sortantes ; ces bibliothèques ne sont pas implémentées pour la réutilisation des connexions TCP ou, dans le cas d’un protocole de niveau supérieur tel que HTTP, la logique de connexion persistante n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="0d782-123">A common reason for exhausting outbound TCP connections is the use of client libraries which are not implemented to reuse TCP connections, or in the case of a higher level protocol such as HTTP - Keep-Alive not being leveraged.</span></span> <span data-ttu-id="0d782-124">Veuillez consulter la documentation pour chacune des bibliothèques référencées par les applications dans votre plan App Service afin de vous assurer que celles-ci sont configurées ou accessibles dans votre code pour une réutilisation efficace des connexions sortantes.</span><span class="sxs-lookup"><span data-stu-id="0d782-124">Please review the documentation for each of the libraries referenced by the apps in your App Service Plan to ensure they are configured or accessed in your code for efficient reuse of outbound connections.</span></span> <span data-ttu-id="0d782-125">Suivez également les instructions de la documentation des bibliothèques pour une création et une mise en production appropriées ainsi que pour un nettoyage servant à éviter la fuite des connexions.</span><span class="sxs-lookup"><span data-stu-id="0d782-125">Also follow the library documentation guidance for proper creation and release or cleanup to avoid leaking connections.</span></span> <span data-ttu-id="0d782-126">Lorsque les examens des bibliothèques clientes sont en cours d’exécution, leur impact peut être atténué en augmentant la taille des instances.</span><span class="sxs-lookup"><span data-stu-id="0d782-126">While such client libraries investigations are in progress impact may be mitigated by scaling out to multiple instances.</span></span>  

## <span data-ttu-id="0d782-127"><a name="appbackup"></a>La sauvegarde de votre application échoue</span><span class="sxs-lookup"><span data-stu-id="0d782-127"><a name="appbackup"></a>When your app backup starts failing</span></span>
<span data-ttu-id="0d782-128">Les deux raisons les plus courantes qui entraînent l'échec de la sauvegarde d'une application sont les suivantes : des paramètres de stockage non valides et une configuration de base de données non valide.</span><span class="sxs-lookup"><span data-stu-id="0d782-128">The two most common reasons why app backup fails are: invalid storage settings and invalid database configuration.</span></span> <span data-ttu-id="0d782-129">Ces échecs se produisent généralement lorsque des modifications ont été appliquées à des ressources de stockage ou de base de données, ou lorsque la méthode d'accès à ces ressources a changé (par exemple en cas de mise à jour des informations d’identification pour accéder à la base de données sélectionnée dans les paramètres de sauvegarde).</span><span class="sxs-lookup"><span data-stu-id="0d782-129">These failures typically happen when there are changes to storage or database resources, or changes for how to access these resources (e.g. credentials updated for the database selected in the backup settings).</span></span> <span data-ttu-id="0d782-130">En général, les sauvegardes s'exécutent de façon planifiée et requièrent l’accès au stockage (pour générer les fichiers sauvegardés) et aux bases de données (pour copier et lire le contenu à inclure dans la sauvegarde).</span><span class="sxs-lookup"><span data-stu-id="0d782-130">Backups typically run on a schedule and require access to storage (for outputting the backed up files) and databases (for copying and reading contents to be included in the backup).</span></span> <span data-ttu-id="0d782-131">L'incapacité à accéder à l'une de ces ressources entraîne une erreur de sauvegarde permanente.</span><span class="sxs-lookup"><span data-stu-id="0d782-131">The result of failing to access either of these resources would be consistent backup failure.</span></span> 

<span data-ttu-id="0d782-132">Lorsque des échecs de sauvegarde se produisent, veuillez consulter les résultats les plus récents pour comprendre quel type d'échec se produit.</span><span class="sxs-lookup"><span data-stu-id="0d782-132">When backup failures happen, please review most recent results to understand which type of failure is happening.</span></span> <span data-ttu-id="0d782-133">Si vous ne parvenez pas à accéder au stockage, examinez et mettez à jour les paramètres de stockage utilisés dans la configuration de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="0d782-133">In the case of storage access failures, please review and update the storage settings used in the backup configuration.</span></span> <span data-ttu-id="0d782-134">Si vous ne parvenez pas à accéder à la base de données, examinez et mettez à jour vos chaînes de connexion dans les paramètres de l’application, puis mettez à jour la configuration de votre sauvegarde afin d’inclure correctement les bases de données requises.</span><span class="sxs-lookup"><span data-stu-id="0d782-134">In the case of database access failures, please review and update your connections strings as part of app settings; then proceed to update your backup configuration to properly include the required databases.</span></span> <span data-ttu-id="0d782-135">Pour plus d’informations sur la sauvegarde d’une application, consultez la documentation [Sauvegarder une application web dans Azure App Service](web-sites-backup.md) .</span><span class="sxs-lookup"><span data-stu-id="0d782-135">For more information on app backup please see the [Back up a web app in Azure App Service](web-sites-backup.md) documentation.</span></span>

## <span data-ttu-id="0d782-136"><a name="nodejs"></a>Lorsque de nouvelles applications Node.js sont déployées sur Azure App Service</span><span class="sxs-lookup"><span data-stu-id="0d782-136"><a name="nodejs"></a>When new Node.js apps are deployed to Azure App Service</span></span>
<span data-ttu-id="0d782-137">La configuration Azure App Service par défaut pour les applications Node.js vise à mieux répondre aux besoins des applications courantes.</span><span class="sxs-lookup"><span data-stu-id="0d782-137">Azure App Service default configuration for Node.js apps is intended to best suit the needs of most common apps.</span></span> <span data-ttu-id="0d782-138">Si la configuration de votre application Node.js peut bénéficier d’un paramétrage personnalisé pour améliorer les performances ou optimiser l’utilisation des ressources au niveau processeur/mémoire/réseau, vous pouvez consulter nos meilleures pratiques et les étapes de dépannage.</span><span class="sxs-lookup"><span data-stu-id="0d782-138">If configuration for your Node.js app would benefit from personalized tuning to improve performance or optimize resource usage for CPU/memory/network resources, you could review our best practices and troubleshooting steps.</span></span> <span data-ttu-id="0d782-139">Cette documentation décrit les paramètres iisnode, que vous devrez peut-être configurer pour votre application Node.js, présente les différents scénarios ou problèmes que votre application peut rencontrer, et indique comment résoudre ces problèmes : [Meilleures pratiques et guide de dépannage pour les applications Node sur Azure App service](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span><span class="sxs-lookup"><span data-stu-id="0d782-139">This documentation article describes the iisnode settings you may need to configure for your Node.js app, describes the various scenarios or issues that your app may be facing, and shows how to address these issues: [Best practices and troubleshooting guide for Node applications on Azure App Service](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span></span>   

