---
title: "Comment créer un ILB ASE à l’aide des modèles Azure Resource Manager | Microsoft Docs"
description: "Découvrez comment créer un ASE d’équilibrage de charge interne à l’aide des modèles Azure Resource Manager."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 091decb6-b0de-42a1-9f2f-c18d9b2e67df
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: stefsch
ms.openlocfilehash: 147ab76d38c8bbbf34d35ed6c2a194d97fe711ab
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="how-to-create-an-ilb-ase-using-azure-resource-manager-templates"></a><span data-ttu-id="56d32-103">Comment créer un ILB ASE à l’aide des modèles Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="56d32-103">How To Create an ILB ASE Using Azure Resource Manager Templates</span></span>

> [!NOTE] 
> <span data-ttu-id="56d32-104">Cet article traite de l’environnement App Service v1.</span><span class="sxs-lookup"><span data-stu-id="56d32-104">This article is about the App Service Environment v1.</span></span> <span data-ttu-id="56d32-105">Il existe une version plus récente de l’environnement App Service, plus facile à utiliser et qui s’exécute sur des infrastructures plus puissantes.</span><span class="sxs-lookup"><span data-stu-id="56d32-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span></span> <span data-ttu-id="56d32-106">Pour en savoir plus sur la nouvelle version, commencez par la section [Présentation de l’environnement App Service Environment](../app-service/app-service-environment/intro.md).</span><span class="sxs-lookup"><span data-stu-id="56d32-106">To learn more about the new version start with the [Introduction to the App  Service Environment](../app-service/app-service-environment/intro.md).</span></span>
>

## <a name="overview"></a><span data-ttu-id="56d32-107">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="56d32-107">Overview</span></span>
<span data-ttu-id="56d32-108">Les environnements App Service peuvent être créés avec une adresse interne de réseau virtuel au lieu d’une adresse IP virtuelle publique.</span><span class="sxs-lookup"><span data-stu-id="56d32-108">App Service Environments can be created with a virtual network internal address instead of a public VIP.</span></span>  <span data-ttu-id="56d32-109">Cette adresse interne est fournie par un composant Azure appelé « équilibreur de charge interne » (ILB).</span><span class="sxs-lookup"><span data-stu-id="56d32-109">This internal address is provided by an Azure component called the internal load balancer (ILB).</span></span>  <span data-ttu-id="56d32-110">Vous pouvez créer un ILB ASE à l’aide du portail Azure.</span><span class="sxs-lookup"><span data-stu-id="56d32-110">An ILB ASE can be created using the Azure portal.</span></span>  <span data-ttu-id="56d32-111">Il peut également être créé de manière automatisée par le biais des modèles Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="56d32-111">It can also be created using automation by way of Azure Resource Manager templates.</span></span>  <span data-ttu-id="56d32-112">Cet article décrit les étapes et la syntaxe nécessaires à la création d’un ILB ASE à l’aide des modèles Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="56d32-112">This article walks through the steps and syntax needed to create an ILB ASE with Azure Resource Manager templates.</span></span>

<span data-ttu-id="56d32-113">La création automatisée d’un ILB ASE comporte trois étapes :</span><span class="sxs-lookup"><span data-stu-id="56d32-113">There are three steps involved in automating creation of an ILB ASE:</span></span>

1. <span data-ttu-id="56d32-114">Tout d’abord, l’ASE de base est créé dans un réseau virtuel à l’aide d’une adresse d’équilibreur de charge interne au lieu d’une adresse IP virtuelle publique.</span><span class="sxs-lookup"><span data-stu-id="56d32-114">First the base ASE is created in a virtual network using an internal load balancer address instead of a public VIP.</span></span>  <span data-ttu-id="56d32-115">Dans le cadre de cette étape, un nom de domaine racine est affecté à l’ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="56d32-115">As part of this step, a root domain name is assigned to the ILB ASE.</span></span>
2. <span data-ttu-id="56d32-116">Une fois l’ILB ASE créé, un certificat SSL est téléchargé.</span><span class="sxs-lookup"><span data-stu-id="56d32-116">Once the ILB ASE is created, an SSL certificate is uploaded.</span></span>  
3. <span data-ttu-id="56d32-117">Le certificat SSL téléchargé est explicitement affecté à l’ILB ASE en tant que certificat SSL « par défaut ».</span><span class="sxs-lookup"><span data-stu-id="56d32-117">The uploaded SSL certificate is explicitly assigned to the ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="56d32-118">Ce certificat SSL servira à des applications de l’ILB ASE pour le trafic SSL lorsque celles-ci sont gérées à l’aide d’un domaine racine commun affecté à l’ASE (par exemple, https://someapp.mycustomrootcomain.com).</span><span class="sxs-lookup"><span data-stu-id="56d32-118">This SSL certificate will be used for SSL traffic to apps on the ILB ASE when the apps are addressed using the common root domain assigned to the ASE (e.g. https://someapp.mycustomrootcomain.com)</span></span>

## <a name="creating-the-base-ilb-ase"></a><span data-ttu-id="56d32-119">Création de l’ILB ASE de base</span><span class="sxs-lookup"><span data-stu-id="56d32-119">Creating the Base ILB ASE</span></span>
<span data-ttu-id="56d32-120">Un exemple de modèle Azure Resource Manager et son fichier de paramètres associés sont disponibles sur GitHub, [ici][quickstartilbasecreate].</span><span class="sxs-lookup"><span data-stu-id="56d32-120">An example Azure Resource Manager template, and its associated parameters file, are available on GitHub [here][quickstartilbasecreate].</span></span>

<span data-ttu-id="56d32-121">La plupart des paramètres du fichier *azuredeploy.parameters.json* sont communs à la création d’ASE ILB, ainsi que d’ASE liés à une adresse IP virtuelle publique.</span><span class="sxs-lookup"><span data-stu-id="56d32-121">Most of the parameters in the *azuredeploy.parameters.json* file are common to creating both ILB ASEs, as well as ASEs bound to a public VIP.</span></span>  <span data-ttu-id="56d32-122">La liste ci-dessous répertorie les paramètres spécifiques, ou qui sont uniques, lors de la création d’un ILB ASE :</span><span class="sxs-lookup"><span data-stu-id="56d32-122">The list below calls out parameters of special note, or that are unique, when creating an ILB ASE:</span></span>

* <span data-ttu-id="56d32-123">*interalLoadBalancingMode* : dans la plupart des cas, définissez ce paramètre sur 3, ce qui signifie que le trafic HTTP/HTTPS sur les ports 80/443 ainsi que les ports de canaux de contrôle/données écoutés par le service FTP sur l’ASE seront liés à une adresse interne du réseau virtuel allouée à l’ILB.</span><span class="sxs-lookup"><span data-stu-id="56d32-123">*interalLoadBalancingMode*:  In most cases set this to 3, which means both HTTP/HTTPS traffic on ports 80/443, and the control/data channel ports listened to by the FTP service on the ASE, will be bound to an ILB allocated virtual network internal address.</span></span>  <span data-ttu-id="56d32-124">Si cette propriété a la valeur 2, seuls les ports relatifs au service FTP (canaux de contrôle et de données) seront liés à une adresse d’ILB, tandis que le trafic HTTP/HTTPS restera sur l’adresse IP virtuelle publique.</span><span class="sxs-lookup"><span data-stu-id="56d32-124">If this property is instead set to 2, then only the FTP service related ports (both control and data channels) will be bound to an ILB address, while the HTTP/HTTPS traffic will remain on the public VIP.</span></span>
* <span data-ttu-id="56d32-125">*dnsSuffix* : ce paramètre définit le domaine racine par défaut qui sera affecté à l’ASE.</span><span class="sxs-lookup"><span data-stu-id="56d32-125">*dnsSuffix*:  This parameter defines the default root domain that will be assigned to the ASE.</span></span>  <span data-ttu-id="56d32-126">Dans la version publique d’Azure App Service, le domaine racine par défaut pour toutes les applications web est *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="56d32-126">In the public variation of Azure App Service, the default root domain for all web apps is *azurewebsites.net*.</span></span>  <span data-ttu-id="56d32-127">Cependant, étant donné qu’un ILB ASE est interne au réseau virtuel d’un client, il n’est pas pertinent d’utiliser le domaine racine par défaut du service public.</span><span class="sxs-lookup"><span data-stu-id="56d32-127">However since an ILB ASE is internal to a customer's virtual network, it doesn't make sense to use the public service's default root domain.</span></span>  <span data-ttu-id="56d32-128">Au lieu de cela, un ILB ASE doit avoir un domaine racine par défaut approprié pour une utilisation au sein du réseau virtuel interne d’une société.</span><span class="sxs-lookup"><span data-stu-id="56d32-128">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span>  <span data-ttu-id="56d32-129">Par exemple, une société fictive Contoso Corporation peut utiliser le domaine racine par défaut *internal-contoso.com* pour les applications qui sont destinées à être résolues et accessibles uniquement au sein du réseau virtuel de Contoso.</span><span class="sxs-lookup"><span data-stu-id="56d32-129">For example, a hypothetical Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended to only be resolvable and accessible within Contoso's virtual network.</span></span> 
* <span data-ttu-id="56d32-130">*ipSslAddressCount* : ce paramètre est automatiquement défini par défaut sur la valeur 0 dans le fichier *azuredeploy.json*, car les ILB ASE disposent d’une seule adresse d’ILB.</span><span class="sxs-lookup"><span data-stu-id="56d32-130">*ipSslAddressCount*:  This parameter is automatically defaulted to a value of 0 in the *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span>  <span data-ttu-id="56d32-131">Il n’existe aucune adresse IP SSL explicite pour un ILB ASE. Par conséquent, le pool d’adresses IP SSL pour un ILB ASE doit être défini sur zéro, sinon une erreur d’approvisionnement se produit.</span><span class="sxs-lookup"><span data-stu-id="56d32-131">There are no explicit IP-SSL addresses for an ILB ASE, and hence the IP-SSL address pool for an ILB ASE must be set to zero, otherwise a provisioning error will occur.</span></span> 

<span data-ttu-id="56d32-132">Une fois le fichier *azuredeploy.parameters.json* renseigné pour un ILB ASE, ce dernier peut ensuite être créé à l’aide de l’extrait de code Powershell suivant.</span><span class="sxs-lookup"><span data-stu-id="56d32-132">Once the *azuredeploy.parameters.json* file has been filled in for an ILB ASE, the ILB ASE can then be created using the following Powershell code snippet.</span></span>  <span data-ttu-id="56d32-133">Modifiez les chemins d’accès de fichiers pour qu’ils correspondent aux emplacements où se trouvent les fichiers de modèle Azure Resource Manager sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="56d32-133">Change the file PATHs to match where the Azure Resource Manager template files are located on your machine.</span></span>  <span data-ttu-id="56d32-134">Pensez également à indiquer vos propres valeurs pour le nom de déploiement d’Azure Resource Manager et le nom de groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="56d32-134">Also remember to supply your own values for the Azure Resource Manager deployment name, and resource group name.</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="56d32-135">Une fois le modèle Azure Resource Manager soumis, la création de l’ILB ASE prendra quelques heures.</span><span class="sxs-lookup"><span data-stu-id="56d32-135">After the Azure Resource Manager template is submitted it will take a few hours for the ILB ASE to be created.</span></span>  <span data-ttu-id="56d32-136">Une fois la création terminée, l’ASE ILB s’affichera dans le portail dans la liste des environnements App Service pour l’abonnement qui a déclenché le déploiement.</span><span class="sxs-lookup"><span data-stu-id="56d32-136">Once the creation completes, the ILB ASE will show up in the portal UX in the list of App Service Environments for the subscription that triggered the deployment.</span></span>

## <a name="uploading-and-configuring-the-default-ssl-certificate"></a><span data-ttu-id="56d32-137">Téléchargement et configuration du certificat SSL « par défaut »</span><span class="sxs-lookup"><span data-stu-id="56d32-137">Uploading and Configuring the "Default" SSL Certificate</span></span>
<span data-ttu-id="56d32-138">Une fois l’ILB ASE créé, un certificat SSL doit être associé à l’ASE en tant que certificat SSL « par défaut » utilisé pour établir des connexions SSL aux applications.</span><span class="sxs-lookup"><span data-stu-id="56d32-138">Once the ILB ASE is created, an SSL certificate should be associated with the ASE as the "default" SSL certificate use for establishing SSL connections to apps.</span></span>  <span data-ttu-id="56d32-139">Poursuivons avec l’exemple de la société fictive Contoso Corporation. Si le suffixe DNS par défaut de l’ASE est *internal-contoso.com*, une connexion à *https://some-random-app.internal-contoso.com* nécessite un certificat SSL valide pour **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="56d32-139">Continuing with the hypothetical Contoso Corporation example, if the ASE's default DNS suffix is *internal-contoso.com*, then a connection to *https://some-random-app.internal-contoso.com* requires an SSL certificate that is valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="56d32-140">Il existe plusieurs façons d’obtenir un certificat SSL valide, parmi lesquelles les autorités de certification internes, l’achat d’un certificat auprès d’un émetteur externe et l’utilisation d’un certificat auto-signé.</span><span class="sxs-lookup"><span data-stu-id="56d32-140">There are a variety of ways to obtain a valid SSL certificate including internal CAs, purchasing a certificate from an external issuer, and using a self-signed certificate.</span></span>  <span data-ttu-id="56d32-141">Quelle que soit la source du certificat SSL, les attributs de certificat suivants doivent être configurés correctement :</span><span class="sxs-lookup"><span data-stu-id="56d32-141">Regardless of the source of the SSL certificate, the following certificate attributes need to be configured properly:</span></span>

* <span data-ttu-id="56d32-142">*Objet* : cet attribut doit être défini sur **.votre-domaine-racine-ici.com*</span><span class="sxs-lookup"><span data-stu-id="56d32-142">*Subject*:  This attribute must be set to **.your-root-domain-here.com*</span></span>
* <span data-ttu-id="56d32-143">*Autre nom de l’objet* : cet attribut doit inclure à la fois **.votre-domaine-racine-ici.com* et **.scm.votre-domaine-racine-ici.com*.</span><span class="sxs-lookup"><span data-stu-id="56d32-143">*Subject Alternative Name*:  This attribute must include both **.your-root-domain-here.com*, and **.scm.your-root-domain-here.com*.</span></span>  <span data-ttu-id="56d32-144">La deuxième entrée est nécessaire, car les connexions SSL sur le site SCM/Kudu associé à chaque application seront établies à l’aide d’une adresse sous la forme *votre-nom-application.scm.votre-domaine-racine-ici.com*.</span><span class="sxs-lookup"><span data-stu-id="56d32-144">The reason for the second entry is that SSL connections to the SCM/Kudu site associated with each app will be made using an address of the form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="56d32-145">Une fois le certificat SSL valide obtenu, deux étapes préparatoires supplémentaires sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="56d32-145">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span>  <span data-ttu-id="56d32-146">Le certificat SSL doit être converti/enregistré au format de fichier .pfx.</span><span class="sxs-lookup"><span data-stu-id="56d32-146">The SSL certificate needs to be converted/saved as a .pfx file.</span></span>  <span data-ttu-id="56d32-147">N’oubliez pas que le fichier .pfx doit inclure tous les certificats intermédiaires et racine et être sécurisé avec un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="56d32-147">Remember that the .pfx file needs to include all intermediate and root certificates, and also needs to be secured with a password.</span></span>

<span data-ttu-id="56d32-148">Le fichier .pfx obtenu doit ensuite être converti en une chaîne au format Base64, car le certificat SSL sera téléchargé à l’aide d’un modèle Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="56d32-148">Then the resultant .pfx file needs to be converted into a base64 string because the SSL certificate will be uploaded using an Azure Resource Manager template.</span></span>  <span data-ttu-id="56d32-149">Étant donné que les modèles Azure Resource Manager sont des fichiers texte, le fichier .pfx doit être converti en une chaîne au format Base64 afin d’être inclus en tant que paramètre du modèle.</span><span class="sxs-lookup"><span data-stu-id="56d32-149">Since Azure Resource Manager templates are text files, the .pfx file needs to be converted into a base64 string so it can be included as a parameter of the template.</span></span>

<span data-ttu-id="56d32-150">L’extrait de code Powershell ci-dessous montre un exemple de génération d’un certificat auto-signé, d’exportation du certificat en tant que fichier .pfx, de conversion du fichier .pfx au format Base64 de la chaîne codée, puis d’enregistrement de la chaîne codée en Base64 dans un fichier distinct.</span><span class="sxs-lookup"><span data-stu-id="56d32-150">The Powershell code snippet below shows an example of generating a self-signed certificate, exporting the certificate as a .pfx file, converting the .pfx file into a base64 encoded string, and then saving the base64 encoded string to a separate file.</span></span>  <span data-ttu-id="56d32-151">Le code PowerShell pour l’encodage en Base64 est une adaptation issue du [Powershell Scripts Blog (Blog relatif aux scripts PowerShell)][examplebase64encoding].</span><span class="sxs-lookup"><span data-stu-id="56d32-151">The Powershell code for base64 encoding was adapted from the [Powershell Scripts Blog][examplebase64encoding].</span></span>

    $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

    $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
    $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

    $fileName = "exportedcert.pfx"
    Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

    $fileContentBytes = get-content -encoding byte $fileName
    $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
    $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="56d32-152">Une fois le certificat SSL généré et converti en chaîne encodée en Base64, vous pouvez utiliser l’exemple de modèle Azure Resource Manager sur GitHub pour [configurer le certificat SSL par défaut][configuringDefaultSSLCertificate].</span><span class="sxs-lookup"><span data-stu-id="56d32-152">Once the SSL certificate has been successfully generated and converted to a base64 encoded string, the example Azure Resource Manager template on GitHub for [configuring the default SSL certificate][configuringDefaultSSLCertificate] can be used.</span></span>

<span data-ttu-id="56d32-153">Les paramètres du fichier *azuredeploy.parameters.json* sont répertoriés ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="56d32-153">The parameters in the *azuredeploy.parameters.json* file are listed below:</span></span>

* <span data-ttu-id="56d32-154">*appServiceEnvironmentName* : nom de l’ILB ASE configuré.</span><span class="sxs-lookup"><span data-stu-id="56d32-154">*appServiceEnvironmentName*:  The name of the ILB ASE being configured.</span></span>
* <span data-ttu-id="56d32-155">*existingAseLocation* : chaîne de texte contenant la région Azure où l’ILB ASE a été déployé.</span><span class="sxs-lookup"><span data-stu-id="56d32-155">*existingAseLocation*:  Text string containing the Azure region where the ILB ASE was deployed.</span></span>  <span data-ttu-id="56d32-156">Par exemple, « South Central US ».</span><span class="sxs-lookup"><span data-stu-id="56d32-156">For example:  "South Central US".</span></span>
* <span data-ttu-id="56d32-157">*pfxBlobString* : représentation sous forme de chaîne codée en Base64 du fichier .pfx.</span><span class="sxs-lookup"><span data-stu-id="56d32-157">*pfxBlobString*:  The based64 encoded string representation of the .pfx file.</span></span>  <span data-ttu-id="56d32-158">À l’aide de l’extrait de code ci-dessus, copiez la chaîne contenue dans « exportedcert.pfx.b64 » et collez-la en tant que valeur de l’attribut *pfxBlobString* .</span><span class="sxs-lookup"><span data-stu-id="56d32-158">Using the code snippet shown earlier, you would copy the string contained in "exportedcert.pfx.b64" and paste it in as the value of the *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="56d32-159">*password* : mot de passe utilisé pour sécuriser le fichier .pfx.</span><span class="sxs-lookup"><span data-stu-id="56d32-159">*password*:  The password used to secure the .pfx file.</span></span>
* <span data-ttu-id="56d32-160">*certificateThumbprint* : empreinte numérique du certificat.</span><span class="sxs-lookup"><span data-stu-id="56d32-160">*certificateThumbprint*:  The certificate's thumbprint.</span></span>  <span data-ttu-id="56d32-161">Si vous récupérez cette valeur à partir de Powershell (par exemple, *$certificate.Thumbprint* dans l’extrait de code précédent), vous pouvez utiliser la valeur telle quelle.</span><span class="sxs-lookup"><span data-stu-id="56d32-161">If you retrieve this value from Powershell (e.g. *$certificate.Thumbprint* from the earlier code snippet), you can use the value as-is.</span></span>  <span data-ttu-id="56d32-162">Toutefois, si vous copiez la valeur à partir de la boîte de dialogue de certificat Windows, n’oubliez pas de retirer les espaces superflus.</span><span class="sxs-lookup"><span data-stu-id="56d32-162">However if you copy the value from the Windows certificate dialog, remember to strip out the extraneous spaces.</span></span>  <span data-ttu-id="56d32-163">La valeur *certificateThumbprint* doit se présenter sous la forme suivante : AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span><span class="sxs-lookup"><span data-stu-id="56d32-163">The *certificateThumbprint* should look something like:  AF3143EB61D43F6727842115BB7F17BBCECAECAE</span></span>
* <span data-ttu-id="56d32-164">*certificateName* : identificateur de chaîne convivial de votre choix permettant d’identifier le certificat.</span><span class="sxs-lookup"><span data-stu-id="56d32-164">*certificateName*:  A friendly string identifier of your own choosing used to identity the certificate.</span></span>  <span data-ttu-id="56d32-165">Ce nom fait partie de l’identificateur Azure Resource Manager unique pour l’entité *Microsoft.Web/certificates* qui représente le certificat SSL.</span><span class="sxs-lookup"><span data-stu-id="56d32-165">The name is used as part of the unique Azure Resource Manager identifier for the *Microsoft.Web/certificates* entity representing the SSL certificate.</span></span>  <span data-ttu-id="56d32-166">Le nom **doit** se terminer par le suffixe suivant : \_nomdevotreASE_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="56d32-166">The name **must** end with the following suffix:  \_yourASENameHere_InternalLoadBalancingASE.</span></span>  <span data-ttu-id="56d32-167">Ce suffixe permet au portail d’indiquer que le certificat est utilisé pour sécuriser un ASE avec équilibrage de charge interne.</span><span class="sxs-lookup"><span data-stu-id="56d32-167">This suffix is used by the portal as an indicator that the certificate is used for securing an ILB-enabled ASE.</span></span>

<span data-ttu-id="56d32-168">Un exemple abrégé de fichier *azuredeploy.parameters.json* est présenté ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="56d32-168">An abbreviated example of *azuredeploy.parameters.json* is shown below:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="56d32-169">Une fois le fichier *azuredeploy.parameters.json* renseigné, le certificat SSL par défaut peut être configuré à l’aide de l’extrait de code Powershell suivant.</span><span class="sxs-lookup"><span data-stu-id="56d32-169">Once the *azuredeploy.parameters.json* file has been filled in, the default SSL certificate can be configured using the following Powershell code snippet.</span></span>  <span data-ttu-id="56d32-170">Modifiez les chemins d’accès de fichiers pour qu’ils correspondent aux emplacements où se trouvent les fichiers de modèle Azure Resource Manager sur votre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="56d32-170">Change the file PATHs to match where the Azure Resource Manager template files are located on your machine.</span></span>  <span data-ttu-id="56d32-171">Pensez également à indiquer vos propres valeurs pour le nom de déploiement d’Azure Resource Manager et le nom de groupe de ressources.</span><span class="sxs-lookup"><span data-stu-id="56d32-171">Also remember to supply your own values for the Azure Resource Manager deployment name, and resource group name.</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="56d32-172">Une fois le modèle Azure Resource Manager soumis, cela prendra environ quarante minutes par serveur frontal de l’ASE pour que la modification soit appliquée.</span><span class="sxs-lookup"><span data-stu-id="56d32-172">After the Azure Resource Manager template is submitted it will take roughly forty minutes minutes per ASE front-end to apply the change.</span></span>  <span data-ttu-id="56d32-173">Par exemple, avec un ASE par défaut utilisant deux serveurs frontaux, l’application du modèle prendra environ une heure et vingt minutes.</span><span class="sxs-lookup"><span data-stu-id="56d32-173">For example, with a default sized ASE using two front-ends, the template will take around one hour and twenty minutes to complete.</span></span>  <span data-ttu-id="56d32-174">Lorsque le modèle est en cours d’exécution, l’ASE ne peut pas être mis à l’échelle.</span><span class="sxs-lookup"><span data-stu-id="56d32-174">While the template is running the ASE will not be able to scaled.</span></span>  

<span data-ttu-id="56d32-175">Une fois le modèle terminé, les applications sur l’ILB ASE sont accessibles via le protocole HTTPS et les connexions sont sécurisées à l’aide du certificat SSL par défaut.</span><span class="sxs-lookup"><span data-stu-id="56d32-175">Once the template completes, apps on the ILB ASE can be accessed over HTTPS and the connections will be secured using the default SSL certificate.</span></span>  <span data-ttu-id="56d32-176">Le certificat SSL par défaut est utilisé lorsque les applications sur l’ILB ASE sont gérées à l’aide d’une combinaison du nom de l’application et du nom d’hôte par défaut.</span><span class="sxs-lookup"><span data-stu-id="56d32-176">The default SSL certificate will be used when apps on the ILB ASE are addressed using a combination of the application name plus the default hostname.</span></span>  <span data-ttu-id="56d32-177">Par exemple, *https://mycustomapp.internal-contoso.com* utiliserait le certificat SSL par défaut pour **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="56d32-177">For example *https://mycustomapp.internal-contoso.com* would use the default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="56d32-178">Toutefois, tout comme les applications qui s’exécutent sur le service public mutualisé, les développeurs peuvent également configurer des noms d’hôte personnalisés pour les applications individuelles, puis configurer des liaisons de certificat SNI SSL uniques pour ces applications individuelles.</span><span class="sxs-lookup"><span data-stu-id="56d32-178">However, just like apps running on the public multi-tenant service, developers can also configure custom host names for individual apps, and then configure unique SNI SSL certificate bindings for individual apps.</span></span>  

## <a name="getting-started"></a><span data-ttu-id="56d32-179">Prise en main</span><span class="sxs-lookup"><span data-stu-id="56d32-179">Getting started</span></span>
<span data-ttu-id="56d32-180">Pour prendre en main les environnements App Service, consultez [Présentation de l'environnement App Service](app-service-app-service-environment-intro.md)</span><span class="sxs-lookup"><span data-stu-id="56d32-180">To get started with App Service Environments, see [Introduction to App Service Environment](app-service-app-service-environment-intro.md)</span></span>

<span data-ttu-id="56d32-181">Tous les articles et procédures concernant les environnements App Service sont disponibles dans le [fichier Lisez-moi des environnements App Service](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="56d32-181">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[quickstartilbasecreate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-create/
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/ 

