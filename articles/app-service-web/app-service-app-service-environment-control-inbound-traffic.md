---
title: aaaHow tooControl trafic entrant tooan environnement App Service
description: "Découvrez comment toocontrol de règles de sécurité de réseau tooconfigure entrants trafic tooan environnement App Service."
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: e7c6e6201db6a1ea77f7a2eee29a3b5445175495
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="how-toocontrol-inbound-traffic-tooan-app-service-environment"></a><span data-ttu-id="84d4a-103">Comment tooan de trafic entrant tooControl environnement App Service</span><span class="sxs-lookup"><span data-stu-id="84d4a-103">How tooControl Inbound Traffic tooan App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="84d4a-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="84d4a-104">Overview</span></span>
<span data-ttu-id="84d4a-105">Un environnement App Service peut être créé **soit** dans un réseau virtuel Azure Resource Manager, **soit** dans un [réseau virtuel][virtualnetwork] de modèle de déploiement classique.</span><span class="sxs-lookup"><span data-stu-id="84d4a-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="84d4a-106">Un nouveau réseau virtuel et un nouveau sous-réseau peuvent être définies au moment de hello qu'un environnement App Service est créé.</span><span class="sxs-lookup"><span data-stu-id="84d4a-106">A new virtual network and new subnet can be defined at hello time an App Service Environment is created.</span></span>  <span data-ttu-id="84d4a-107">Vous pouvez également créer un environnement App Service dans un réseau virtuel préexistant et un sous-réseau préexistant.</span><span class="sxs-lookup"><span data-stu-id="84d4a-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="84d4a-108">Suite à une modification effectuée en juin 2016, les environnements ASE peuvent également être déployés dans les réseaux virtuels qui utilisent soit des plages d’adresses publiques soit des espaces d’adressage RFC1918 (par exemple, des adresses privées).</span><span class="sxs-lookup"><span data-stu-id="84d4a-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span>  <span data-ttu-id="84d4a-109">Pour plus d’informations sur la création d’un environnement App Service, consultez [comment tooCreate un environnement App Service][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="84d4a-109">For more details on creating an App Service Environment see [How tooCreate an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="84d4a-110">Un environnement App Service doit toujours être créé dans un sous-réseau, car un sous-réseau fournit une limite réseau qui peut être utilisé toolock vers le bas le trafic entrant derrière les périphériques en amont et de services tels que le trafic HTTP et HTTPS n’est accepté de spécifique en amont Adresses IP.</span><span class="sxs-lookup"><span data-stu-id="84d4a-110">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used toolock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="84d4a-111">Le trafic réseau entrant et sortant sur un sous-réseau est contrôlé à l'aide d’un [groupe de sécurité réseau][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="84d4a-111">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="84d4a-112">Contrôler le trafic entrant nécessite la création de règles de sécurité réseau dans un groupe de sécurité réseau et en assignant hello réseau sécurité groupe hello sous-réseau contenant hello environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-112">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning hello network security group hello subnet containing hello App Service Environment.</span></span>

<span data-ttu-id="84d4a-113">Une fois un groupe de sécurité réseau affecté tooa sous-réseau, tooapps le trafic entrant Bonjour Qu'environnement App Service est autorisés/bloqués en fonction de hello autoriser et refuser des règles définies dans le groupe de sécurité réseau hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-113">Once a network security group is assigned tooa subnet, inbound traffic tooapps in hello App Service Environment is allowed/blocked based on hello allow and deny rules defined in hello network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="84d4a-114">Ports réseau entrants dans un environnement App Service</span><span class="sxs-lookup"><span data-stu-id="84d4a-114">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="84d4a-115">Avant de verrouiller le trafic réseau entrant avec un groupe de sécurité réseau, il est ensemble de hello tooknow important de ports réseau requis et facultatifs utilisés par un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-115">Before locking down inbound network traffic with a network security group, it is important tooknow hello set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="84d4a-116">Fermer accidentellement désactiver trafic toosome ports peut entraîner une perte de fonctionnalité dans un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-116">Accidentally closing off traffic toosome ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="84d4a-117">Hello Voici une liste des ports utilisés par un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-117">hello following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="84d4a-118">Tous les ports sont **TCP**, sauf indication contraire clairement spécifiée :</span><span class="sxs-lookup"><span data-stu-id="84d4a-118">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="84d4a-119">454 : **Port obligatoire** utilisé par l'infrastructure Azure pour la gestion et la maintenance des environnements App Service par le biais de SSL.</span><span class="sxs-lookup"><span data-stu-id="84d4a-119">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="84d4a-120">Ne bloquent pas le port toothis de trafic.</span><span class="sxs-lookup"><span data-stu-id="84d4a-120">Do not block traffic toothis port.</span></span>  <span data-ttu-id="84d4a-121">Ce port est toujours lié toohello une adresse IP virtuelle publique d’un environnement app service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-121">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="84d4a-122">455 : **Port obligatoire** utilisé par l'infrastructure Azure pour la gestion et la maintenance des environnements App Service par le biais de SSL.</span><span class="sxs-lookup"><span data-stu-id="84d4a-122">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="84d4a-123">Ne bloquent pas le port toothis de trafic.</span><span class="sxs-lookup"><span data-stu-id="84d4a-123">Do not block traffic toothis port.</span></span>  <span data-ttu-id="84d4a-124">Ce port est toujours lié toohello une adresse IP virtuelle publique d’un environnement app service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-124">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="84d4a-125">80 : port pour tooapps de trafic HTTP entrant en cours d’exécution dans l’application des Plans de Service dans un environnement App Service par défaut.</span><span class="sxs-lookup"><span data-stu-id="84d4a-125">80:  Default port for inbound HTTP traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="84d4a-126">Sur un environnement app service activé d’équilibrage de charge interne, ce port est adresse d’équilibrage de charge interne toohello dépendant de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-126">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="84d4a-127">443 : port pour tooapps de trafic entrant SSL en cours d’exécution dans l’application des Plans de Service dans un environnement App Service par défaut.</span><span class="sxs-lookup"><span data-stu-id="84d4a-127">443: Default port for inbound SSL traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="84d4a-128">Sur un environnement app service activé d’équilibrage de charge interne, ce port est adresse d’équilibrage de charge interne toohello dépendant de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-128">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="84d4a-129">21 : Canal de contrôle pour FTP.</span><span class="sxs-lookup"><span data-stu-id="84d4a-129">21:  Control channel for FTP.</span></span>  <span data-ttu-id="84d4a-130">Ce port peut être bloqué en toute sécurité si FTP n'est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="84d4a-130">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="84d4a-131">Un environnement app service activé d’équilibrage de charge interne, ce port peut être adresse d’équilibrage de charge interne toohello lié pour un environnement app service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-131">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="84d4a-132">990 : Canal de contrôle pour FTPS.</span><span class="sxs-lookup"><span data-stu-id="84d4a-132">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="84d4a-133">Ce port peut être bloqué en toute sécurité si FTPS n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="84d4a-133">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="84d4a-134">Un environnement app service activé d’équilibrage de charge interne, ce port peut être adresse d’équilibrage de charge interne toohello lié pour un environnement app service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-134">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="84d4a-135">10001-10020 : Canaux de données pour FTP.</span><span class="sxs-lookup"><span data-stu-id="84d4a-135">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="84d4a-136">Comme avec le canal de contrôle hello, ces ports peuvent être bloquées en toute sécurité si FTP n’est pas utilisé.</span><span class="sxs-lookup"><span data-stu-id="84d4a-136">As with hello control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="84d4a-137">Sur un environnement app service activé d’équilibrage de charge interne, ce port peut être adresse d’équilibrage de charge interne toohello dépendant du ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-137">On an ILB-enabled ASE, this port can be bound toohello ASE's ILB address.</span></span>
* <span data-ttu-id="84d4a-138">4016 : Utilisé pour le débogage à distance avec Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="84d4a-138">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="84d4a-139">Ce port peut être bloqué en toute sécurité si la fonctionnalité de hello n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="84d4a-139">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="84d4a-140">Sur un environnement app service activé d’équilibrage de charge interne, ce port est adresse d’équilibrage de charge interne toohello dépendant de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-140">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="84d4a-141">4018 : Utilisé pour le débogage à distance avec Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="84d4a-141">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="84d4a-142">Ce port peut être bloqué en toute sécurité si la fonctionnalité de hello n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="84d4a-142">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="84d4a-143">Sur un environnement app service activé d’équilibrage de charge interne, ce port est adresse d’équilibrage de charge interne toohello dépendant de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-143">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="84d4a-144">4020 : Utilisé pour le débogage à distance avec Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="84d4a-144">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="84d4a-145">Ce port peut être bloqué en toute sécurité si la fonctionnalité de hello n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="84d4a-145">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="84d4a-146">Sur un environnement app service activé d’équilibrage de charge interne, ce port est adresse d’équilibrage de charge interne toohello dépendant de hello ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-146">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="84d4a-147">Connectivité sortante et configuration DNS requise</span><span class="sxs-lookup"><span data-stu-id="84d4a-147">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="84d4a-148">Pour une environnement App Service de toofunction correctement, il requiert également points de terminaison toovarious un accès sortant.</span><span class="sxs-lookup"><span data-stu-id="84d4a-148">For an App Service Environment toofunction properly, it also requires outbound access toovarious endpoints.</span></span> <span data-ttu-id="84d4a-149">Une liste complète des points de terminaison externes hello utilisé par un environnement app service est Bonjour section « Connectivité de réseau requis » Hello [Configuration du réseau pour ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) l’article.</span><span class="sxs-lookup"><span data-stu-id="84d4a-149">A full list of hello external endpoints used by an ASE is in hello "Required Network Connectivity" section of hello [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="84d4a-150">Les environnements App Service nécessitent une infrastructure DNS valide configurée pour le réseau virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-150">App Service Environments require a valid DNS infrastructure configured for hello virtual network.</span></span>  <span data-ttu-id="84d4a-151">Si pour n’importe quel hello raison configuration DNS est modifiée après la création d’un environnement App Service, les développeurs peuvent forcer un toopick environnement App Service de configuration DNS de la nouvelle hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-151">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="84d4a-152">Déclenchement d’un redémarrage environnement propagée à l’aide de hello « Redémarrer » située en haut de hello du Panneau de gestion d’environnement App Service hello Bonjour [portail Azure] [ NewPortal] entraîne hello environnement toopick la nouvelle configuration du DNS hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-152">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="84d4a-153">Il est également recommandé que tous les serveurs DNS personnalisés sur le réseau virtuel de hello être configuré à l’avance toocreating de temps préalable un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-153">It is also recommended that any custom DNS servers on hello vnet be setup ahead of time prior toocreating an App Service Environment.</span></span>  <span data-ttu-id="84d4a-154">Si la configuration de DNS d’un réseau virtuel est modifiée pendant la création d’un environnement App Service, qui entraîne au basculement de processus de création d’environnement App Service hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-154">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in hello App Service Environment creation process failing.</span></span>  <span data-ttu-id="84d4a-155">De la même manière, si un serveur DNS personnalisé existe sur hello autre extrémité d’une passerelle VPN et le serveur DNS de hello est inaccessible ou indisponible, hello environnement App Service processus de création échoue également.</span><span class="sxs-lookup"><span data-stu-id="84d4a-155">In a similar vein, if a custom DNS server exists on hello other end of a VPN gateway, and hello DNS server is unreachable or unavailable, hello App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="84d4a-156">Création d'un groupe de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="84d4a-156">Creating a Network Security Group</span></span>
<span data-ttu-id="84d4a-157">Pour plus d’informations sur la manière dont des groupes de sécurité réseau Voir hello [informations][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="84d4a-157">For full details on how network security groups work see hello following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="84d4a-158">exemple de gestion des services Azure Hello ci-dessous sur des touches finales met en surbrillance des groupes de sécurité réseau, en mettant l’accent sur la configuration et l’application d’un sous-réseau tooa groupe sécurité réseau qui contient un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-158">hello Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group tooa subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="84d4a-159">**Remarque :** groupes de sécurité réseau peuvent être configurés sous forme graphique à l’aide de hello [portail Azure](https://portal.azure.com) ou Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="84d4a-159">**Note:** Network security groups can be configured graphically using hello [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="84d4a-160">Les groupes de sécurité réseau sont tout d’abord créés en tant qu’entités autonomes associées à un abonnement.</span><span class="sxs-lookup"><span data-stu-id="84d4a-160">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="84d4a-161">Étant donné que les groupes de sécurité réseau sont créées dans une région Azure, assurez-vous que ce groupe de sécurité réseau hello est créé dans hello, même région de hello environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-161">Since network security groups are created in an Azure region, ensure that hello network security group is created in hello same region as hello App Service Environment.</span></span>

<span data-ttu-id="84d4a-162">suivant de Hello illustre la création d’un groupe de sécurité réseau :</span><span class="sxs-lookup"><span data-stu-id="84d4a-162">hello following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="84d4a-163">Une fois un groupe de sécurité réseau est créé, une ou plusieurs règles de sécurité réseau sont ajoutées tooit.</span><span class="sxs-lookup"><span data-stu-id="84d4a-163">Once a network security group is created, one or more network security rules are added tooit.</span></span>  <span data-ttu-id="84d4a-164">Étant donné que l’ensemble de hello de règles peut-être changer au fil du temps, il est recommandé de toospace out hello numérotation utilisé pour toomake des priorités de règle tooinsert simple des règles supplémentaires au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="84d4a-164">Since hello set of rules may change over time, it is recommended toospace out hello numbering scheme used for rule priorities toomake it easy tooinsert additional rules over time.</span></span>

<span data-ttu-id="84d4a-165">exemple Hello ci-dessous montre une règle qui accorde l’accès toohello gestion des ports par toomanage d’infrastructure Azure hello explicitement et de maintenance un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-165">hello example below shows a rule that explicitly grants access toohello management ports needed by hello Azure infrastructure toomanage and maintain an App Service Environment.</span></span>  <span data-ttu-id="84d4a-166">Notez que tout le trafic de gestion transmet via le protocole SSL et est sécurisé par des certificats de client, même si hello ports sont ouverts afin de les rendre inaccessibles à n’importe quel autre entité que l’infrastructure de gestion Azure.</span><span class="sxs-lookup"><span data-stu-id="84d4a-166">Note that all management traffic flows over SSL and is secured by client certificates, so even though hello ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="84d4a-167">Lors du verrouillage tooport accès 80 et 443 trop « masquez » un environnement App Service derrière les périphériques situés en amont ou services, vous devez adresse tooknow hello en amont.</span><span class="sxs-lookup"><span data-stu-id="84d4a-167">When locking down access tooport 80 and 443 too"hide" an App Service Environment behind upstream devices or services, you will need tooknow hello upstream IP address.</span></span>  <span data-ttu-id="84d4a-168">Par exemple, si vous utilisez un pare-feu d’applications web (WAF), hello WAF aura sa propre adresse IP (ou les adresses) qu’il utilise quand tooa le trafic de proxy en aval environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-168">For example, if you are using a web application firewall (WAF), hello WAF will have its own IP address (or addresses) which it uses when proxying traffic tooa downstream App Service Environment.</span></span>  <span data-ttu-id="84d4a-169">Vous devez toouse cette adresse IP Bonjour *SourceAddressPrefix* paramètre d’une règle de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="84d4a-169">You will need toouse this IP address in hello *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="84d4a-170">Dans l’exemple hello ci-dessous, le trafic entrant à partir d’une adresse IP en amont spécifique est explicitement autorisé.</span><span class="sxs-lookup"><span data-stu-id="84d4a-170">In hello example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="84d4a-171">Hello adresse *1.2.3.4* est utilisé comme espace réservé pour l’adresse IP hello un WAF en amont.</span><span class="sxs-lookup"><span data-stu-id="84d4a-171">hello address *1.2.3.4* is used as a placeholder for hello IP address of an upstream WAF.</span></span>  <span data-ttu-id="84d4a-172">Modifier hello valeur toomatch hello adresse utilisée par votre appareil en amont ou d’un service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-172">Change hello value toomatch hello address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="84d4a-173">Si vous le souhaitez est prise en charge FTP, hello suivant les règles utilisable comme une voie de contrôle de modèle toogrant accès toohello FTP et les ports de canal de données.</span><span class="sxs-lookup"><span data-stu-id="84d4a-173">If FTP support is desired, hello following rules can be used as a template toogrant access toohello FTP control port and data channel ports.</span></span>  <span data-ttu-id="84d4a-174">Étant donné que FTP est un protocole avec état, vous ne soyez pas trafic tooroute en mesure de FTP via un périphérique de pare-feu ou un proxy HTTP/HTTPS traditionnel.</span><span class="sxs-lookup"><span data-stu-id="84d4a-174">Since FTP is a stateful protocol, you may not be able tooroute FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="84d4a-175">Dans ce cas, vous devez tooset hello *SourceAddressPrefix* tooa autre valeur - par exemple hello IP adresse gamme d’ordinateurs de développement ou de déploiement sur FTP les clients sont en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="84d4a-175">In this case you will need tooset hello *SourceAddressPrefix* tooa different value - for example hello IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="84d4a-176">(**Remarque :** plage de ports de canal de données hello peut-être changer au cours de la période d’évaluation hello.)</span><span class="sxs-lookup"><span data-stu-id="84d4a-176">(**Note:**  hello data channel port range may change during hello preview period.)</span></span>

<span data-ttu-id="84d4a-177">Si le débogage distant avec Visual Studio est utilisé, suivant les règles de hello montrent comment accéder à toogrant.</span><span class="sxs-lookup"><span data-stu-id="84d4a-177">If remote debugging with Visual Studio is used, hello following rules demonstrate how toogrant access.</span></span>  <span data-ttu-id="84d4a-178">Il existe une règle distincte pour chaque version prise en charge de Visual Studio, car chaque version utilise un port différent pour le débogage à distance.</span><span class="sxs-lookup"><span data-stu-id="84d4a-178">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="84d4a-179">Comme avec l'accès FTP, il est possible que le trafic du débogage à distance ne transite pas correctement via un pare-feu d'applications web (WAF) ou un appareil proxy traditionnel.</span><span class="sxs-lookup"><span data-stu-id="84d4a-179">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="84d4a-180">Hello *SourceAddressPrefix* toohello plage d’adresses IP des ordinateurs de développement Visual Studio en cours d’exécution à la place peut être définie.</span><span class="sxs-lookup"><span data-stu-id="84d4a-180">hello *SourceAddressPrefix* can instead be set toohello IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-tooa-subnet"></a><span data-ttu-id="84d4a-181">Affectation d’un sous-réseau de tooa groupe de sécurité réseau</span><span class="sxs-lookup"><span data-stu-id="84d4a-181">Assigning a Network Security Group tooa Subnet</span></span>
<span data-ttu-id="84d4a-182">Un groupe de sécurité réseau a une règle de sécurité par défaut qui refuse le trafic d’accès tooall externe.</span><span class="sxs-lookup"><span data-stu-id="84d4a-182">A network security group has a default security rule which denies access tooall external traffic.</span></span>  <span data-ttu-id="84d4a-183">Hello résultat à partir de la combinaison de règles de sécurité réseau hello décrites ci-dessus et hello de règle de sécurité par défaut bloque le trafic entrant, que seul le trafic à partir de plages d’adresses source associé à une *autoriser* action pourra toosend trafic tooapps est en cours d’exécution dans un environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-183">hello result from combining hello network security rules described above, and hello default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able toosend traffic tooapps running in an App Service Environment.</span></span>

<span data-ttu-id="84d4a-184">Une fois un groupe de sécurité réseau est rempli avec les règles de sécurité, il doit sous-réseau de toohello toobe attribué contenant hello environnement App Service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-184">After a network security group is populated with security rules, it needs toobe assigned toohello subnet containing hello App Service Environment.</span></span>  <span data-ttu-id="84d4a-185">commande d’attribution de Hello fait référence à deux nom hello du réseau virtuel de hello où hello environnement App Service se trouve, ainsi que les nom hello du sous-réseau hello où hello environnement App Service a été créé.</span><span class="sxs-lookup"><span data-stu-id="84d4a-185">hello assignment command references both hello name of hello virtual network where hello App Service Environment resides, as well as hello name of hello subnet where hello App Service Environment was created.</span></span>  

<span data-ttu-id="84d4a-186">exemple Hello ci-dessous montre un groupe de sécurité réseau assigné tooa sous-réseau et le réseau virtuel :</span><span class="sxs-lookup"><span data-stu-id="84d4a-186">hello example below shows a network security group being assigned tooa subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="84d4a-187">Une fois que l’affectation du groupe de sécurité réseau hello réussit (attribution de hello est une opération longue et peut prendre quelques minutes toocomplete), uniquement entrants le trafic correspondant *autoriser* règles atteindra correctement des applications Bonjour application Environnement de service.</span><span class="sxs-lookup"><span data-stu-id="84d4a-187">Once hello network security group assignment succeeds (hello assignment is a long-running operations and can take a few minutes toocomplete), only inbound traffic matching *Allow* rules will successfully reach apps in hello App Service Environment.</span></span>

<span data-ttu-id="84d4a-188">Pourquoi d’exhaustivité exemple suivant montre comment tooremove et, par conséquent, la sécurité du réseau hello associer au groupe à partir du sous-réseau de hello :</span><span class="sxs-lookup"><span data-stu-id="84d4a-188">For completeness hello following example shows how tooremove and thus dis-associate hello network security group from hello subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="84d4a-189">Considérations spécifiques concernant les adresses IP SSL explicites</span><span class="sxs-lookup"><span data-stu-id="84d4a-189">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="84d4a-190">Si une application est configurée avec une adresse IP SSL explicite (applicable *uniquement* tooASEs qui ont une adresse VIP publique), au lieu d’utiliser l’adresse IP hello environnement App Service hello par défaut, HTTP et HTTPS flux dans le sous-réseau de hello du trafic sur un ensemble différent de ports autres que les ports 80 et 443.</span><span class="sxs-lookup"><span data-stu-id="84d4a-190">If an app is configured with an explicit IP-SSL address (applicable *only* tooASEs that have a public VIP), instead of using hello default IP address of hello App Service Environment, both HTTP and HTTPS traffic flows into hello subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="84d4a-191">Vous trouverez la paire individuelle de Hello des ports utilisés par chaque adresse IP SSL dans l’interface utilisateur du portail à partir du panneau UX de détails de l’environnement Service hello application hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-191">hello individual pair of ports used by each IP-SSL address can be found in hello portal user interface from hello App Service Environment's details UX blade.</span></span>  <span data-ttu-id="84d4a-192">Sélectionnez « Tous les paramètres » --> « Adresses IP ».</span><span class="sxs-lookup"><span data-stu-id="84d4a-192">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="84d4a-193">Panneau de Hello « IP adresses » affiche un tableau de toutes les adresses IP SSL configurées de manière explicite pour hello environnement App Service, ainsi que de la paire de port spécial hello tooroute utilisé le trafic HTTP et HTTPS associé à chaque adresse IP SSL.</span><span class="sxs-lookup"><span data-stu-id="84d4a-193">hello "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for hello App Service Environment, along with hello special port pair that is used tooroute HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="84d4a-194">Il s’agit de cette paire de port doit toobe utilisé pour les paramètres de DestinationPortRange hello lors de la configuration des règles dans un groupe de sécurité réseau.</span><span class="sxs-lookup"><span data-stu-id="84d4a-194">It is this port pair that needs toobe used for hello DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="84d4a-195">Lorsqu’une application sur un environnement app service est configuré toouse IP-SSL, les clients externes n’apparaît pas et n’avez pas besoin de tooworry sur le mappage de paire port spécial hello.</span><span class="sxs-lookup"><span data-stu-id="84d4a-195">When an app on an ASE is configured toouse IP-SSL, external customers will not see and do not need tooworry about hello special port pair mapping.</span></span>  <span data-ttu-id="84d4a-196">Les applications toohello le trafic circule normalement toohello configuré SSL IP adresse.</span><span class="sxs-lookup"><span data-stu-id="84d4a-196">Traffic toohello apps will flow normally toohello configured IP-SSL address.</span></span>  <span data-ttu-id="84d4a-197">paire de port spécial Hello traduction toohello automatiquement s’effectue en interne pendant hello dernière section de routage du trafic dans hello contenant du sous-réseau hello ASE.</span><span class="sxs-lookup"><span data-stu-id="84d4a-197">hello translation toohello special port pair automatically happens internally during hello final leg of routing traffic into hello subnet containing hello ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="84d4a-198">Prise en main</span><span class="sxs-lookup"><span data-stu-id="84d4a-198">Getting started</span></span>
<span data-ttu-id="84d4a-199">tooget démarré avec les environnements de Service d’application, consultez [Introduction tooApp environnement de Service][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="84d4a-199">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="84d4a-200">Tous les articles et comment-de pour les environnements App Service sont disponibles dans hello [fichier Lisezmoi pour les environnements de Service d’Application](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="84d4a-200">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="84d4a-201">Pour plus d’informations sur les applications en toute sécurité se connectant toobackend ressource à partir d’un environnement App Service, consultez [en toute sécurité de connexion tooBackend ressources à partir d’un environnement App Service][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="84d4a-201">For details around apps securely connecting toobackend resource from an App Service Environment, see [Securely connecting tooBackend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="84d4a-202">Pour plus d’informations sur la plateforme Azure App Service de hello, consultez [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="84d4a-202">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

