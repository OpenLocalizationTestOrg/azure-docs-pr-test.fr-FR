---
title: "Architecture du Gestionnaire d’aaaResource | Documents Microsoft"
description: "Vue d’ensemble de l’architecture du Gestionnaire de ressources Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9ea80273d0566a2ac25143ada3662875656b57b8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="26e62-103">Vue d’ensemble de l’architecture Cluster Resource Manager</span><span class="sxs-lookup"><span data-stu-id="26e62-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="26e62-104">Hello, Gestionnaire de ressources du Cluster Service Fabric est un service central qui s’exécute dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="26e62-104">hello Service Fabric Cluster Resource Manager is a central service that runs in hello cluster.</span></span> <span data-ttu-id="26e62-105">Il gère l’état de hello souhaité de services hello cluster hello, en particulier avec respect tooresource consommation et toutes les règles de sélection élective.</span><span class="sxs-lookup"><span data-stu-id="26e62-105">It manages hello desired state of hello services in hello cluster, particularly with respect tooresource consumption and any placement rules.</span></span> 

<span data-ttu-id="26e62-106">ressources de hello toomanage dans votre cluster, hello Gestionnaire de ressources du Cluster Service Fabric doit avoir plusieurs éléments d’information :</span><span class="sxs-lookup"><span data-stu-id="26e62-106">toomanage hello resources in your cluster, hello Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="26e62-107">La liste des services existants</span><span class="sxs-lookup"><span data-stu-id="26e62-107">Which services currently exist</span></span>
- <span data-ttu-id="26e62-108">La consommation de ressources actuelle (ou par défaut) de chaque service</span><span class="sxs-lookup"><span data-stu-id="26e62-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="26e62-109">capacité de cluster restants Hello</span><span class="sxs-lookup"><span data-stu-id="26e62-109">hello remaining cluster capacity</span></span> 
- <span data-ttu-id="26e62-110">capacité de Hello de nœuds hello dans un cluster de hello</span><span class="sxs-lookup"><span data-stu-id="26e62-110">hello capacity of hello nodes in hello cluster</span></span> 
- <span data-ttu-id="26e62-111">quantité de Hello de ressources consommées sur chaque nœud</span><span class="sxs-lookup"><span data-stu-id="26e62-111">hello amount of resources consumed on each node</span></span>

<span data-ttu-id="26e62-112">la consommation des ressources d’un service donné Hello permettre changer au fil du temps, et les services intéressent généralement plus d’un type de ressource.</span><span class="sxs-lookup"><span data-stu-id="26e62-112">hello resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="26e62-113">Dans différents services, il peut s’agir de ressources physiques réelles et de ressources physiques mesurées.</span><span class="sxs-lookup"><span data-stu-id="26e62-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="26e62-114">Les services peuvent assurer le suivi des mesures physiques comme la consommation de mémoire et de disque.</span><span class="sxs-lookup"><span data-stu-id="26e62-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="26e62-115">En général, les services peuvent se soucier des mesures logiques, comme « WorkQueueDepth » ou « TotalRequests ».</span><span class="sxs-lookup"><span data-stu-id="26e62-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="26e62-116">Métriques de logique et physique peut être utilisé dans hello même cluster.</span><span class="sxs-lookup"><span data-stu-id="26e62-116">Both logical and physical metrics can be used in hello same cluster.</span></span> <span data-ttu-id="26e62-117">Métriques peuvent être partagés entre plusieurs services ou service particulier de tooa spécifique.</span><span class="sxs-lookup"><span data-stu-id="26e62-117">Metrics can be shared across many services or be specific tooa particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="26e62-118">Autres points à considérer</span><span class="sxs-lookup"><span data-stu-id="26e62-118">Other considerations</span></span>
<span data-ttu-id="26e62-119">Hello propriétaires et les opérateurs du cluster de hello peuvent être différents de hello auteurs d’applications et des services ou à un minimum sont hello mêmes personnes port chapeaux différents.</span><span class="sxs-lookup"><span data-stu-id="26e62-119">hello owners and operators of hello cluster can be different from hello service and application authors, or at a minimum are hello same people wearing different hats.</span></span> <span data-ttu-id="26e62-120">Lorsque vous développez votre application, vous avez quelques informations sur les éléments qu’elle nécessite.</span><span class="sxs-lookup"><span data-stu-id="26e62-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="26e62-121">Vous avez une estimation de hello il consomme des ressources et comment les différents services doivent être déployés.</span><span class="sxs-lookup"><span data-stu-id="26e62-121">You have an estimate of hello resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="26e62-122">Par exemple, la couche web de hello doit toorun sur les nœuds exposées toohello Internet, alors que les services de base de données hello ne doivent pas.</span><span class="sxs-lookup"><span data-stu-id="26e62-122">For example, hello web tier needs toorun on nodes exposed toohello Internet, while hello database services should not.</span></span> <span data-ttu-id="26e62-123">Autre exemple, les services web hello sont probablement contraint par processeur et le réseau, tandis que les soins de services de niveau de données hello en savoir plus sur la consommation de mémoire et de disque.</span><span class="sxs-lookup"><span data-stu-id="26e62-123">As another example, hello web services are probably constrained by CPU and network, while hello data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="26e62-124">Toutefois, personne hello gérer un incident de site dynamique pour ce service en production ou qui gère un service de mise à niveau toohello a un toodo de travail différent et nécessite des différents outils.</span><span class="sxs-lookup"><span data-stu-id="26e62-124">However, hello person handling a live-site incident for that service in production, or who is managing an upgrade toohello service has a different job toodo, and requires different tools.</span></span> 

<span data-ttu-id="26e62-125">Cluster de hello et services sont dynamiques :</span><span class="sxs-lookup"><span data-stu-id="26e62-125">Both hello cluster and services are dynamic:</span></span>

- <span data-ttu-id="26e62-126">nombre de Hello de nœuds de cluster de hello peut augmenter ou diminuer</span><span class="sxs-lookup"><span data-stu-id="26e62-126">hello number of nodes in hello cluster can grow and shrink</span></span>
- <span data-ttu-id="26e62-127">Des nœuds présentant des tailles et types différents vont et viennent.</span><span class="sxs-lookup"><span data-stu-id="26e62-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="26e62-128">Des services peuvent être créés ou supprimés, et peuvent modifier leur allocation de ressources ainsi que les règles de placement.</span><span class="sxs-lookup"><span data-stu-id="26e62-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="26e62-129">Mises à niveau ou autres opérations de gestion peuvent restaurer par cluster hello au niveau de l’application hello sur les niveaux de l’infrastructure</span><span class="sxs-lookup"><span data-stu-id="26e62-129">Upgrades or other management operations can roll through hello cluster at hello application on infrastructure levels</span></span>
- <span data-ttu-id="26e62-130">Des échecs peuvent se produire à tout moment.</span><span class="sxs-lookup"><span data-stu-id="26e62-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="26e62-131">Composants et flux de données Cluster Resource Manager</span><span class="sxs-lookup"><span data-stu-id="26e62-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="26e62-132">Hello, Gestionnaire de ressources du Cluster exige tootrack hello de chaque service et hello la consommation des ressources par chaque objet de service au sein de ces services.</span><span class="sxs-lookup"><span data-stu-id="26e62-132">hello Cluster Resource Manager has tootrack hello requirements of each service and hello consumption of resources by each service object within those services.</span></span> <span data-ttu-id="26e62-133">Hello, Gestionnaire de ressources du Cluster a deux concepts : les agents qui s’exécutent sur chaque nœud et un service à tolérance de pannes.</span><span class="sxs-lookup"><span data-stu-id="26e62-133">hello Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="26e62-134">agents Hello sur chaque nœud de suivi de charge signale à partir des services, d’agrégation et les signaler périodiquement.</span><span class="sxs-lookup"><span data-stu-id="26e62-134">hello agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="26e62-135">Hello service Gestionnaire de ressources de Cluster agrège toutes les informations hello des agents de local hello et réagit en fonction de sa configuration actuelle.</span><span class="sxs-lookup"><span data-stu-id="26e62-135">hello Cluster Resource Manager service aggregates all hello information from hello local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="26e62-136">Examinons hello suivant schéma :</span><span class="sxs-lookup"><span data-stu-id="26e62-136">Let’s look at hello following diagram:</span></span>

<span data-ttu-id="26e62-137"><center>
![Architecture de l’équilibreur de ressources][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="26e62-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="26e62-138">Pendant l’exécution, de nombreux changements peuvent se produire.</span><span class="sxs-lookup"><span data-stu-id="26e62-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="26e62-139">Supposons par exemple, le montant de hello ressources certains services consomment des modifications, certains services échouent, et certains nœuds joint et quitter hello cluster.</span><span class="sxs-lookup"><span data-stu-id="26e62-139">For example, let’s say hello amount of resources some services consume changes, some services fail, and some nodes join and leave hello cluster.</span></span> <span data-ttu-id="26e62-140">Toutes les modifications de hello sur un nœud sont agrégées et régulièrement envoyées toohello Gestionnaire de ressources du Cluster service (1,2) où elles sont agrégées à nouveau, analysées et stockées.</span><span class="sxs-lookup"><span data-stu-id="26e62-140">All hello changes on a node are aggregated and periodically sent toohello Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="26e62-141">Après quelques secondes que service examine les modifications hello et détermine si toutes les actions sont nécessaires (3).</span><span class="sxs-lookup"><span data-stu-id="26e62-141">Every few seconds that service looks at hello changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="26e62-142">Par exemple, il peut remarquer que certains nœuds vides ont été ajoutées toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="26e62-142">For example, it could notice that some empty nodes have been added toohello cluster.</span></span> <span data-ttu-id="26e62-143">Par conséquent, il décide toomove certains nœuds toothose de services.</span><span class="sxs-lookup"><span data-stu-id="26e62-143">As a result, it decides toomove some services toothose nodes.</span></span> <span data-ttu-id="26e62-144">Hello Gestionnaire de ressources du Cluster peut également remarquer qu’un nœud particulier est surchargé, ou que certains services ont a échoué ou est supprimé, la libération de ressources ailleurs.</span><span class="sxs-lookup"><span data-stu-id="26e62-144">hello Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="26e62-145">Nous allons examiner hello suivant schéma et consultez les étapes suivantes.</span><span class="sxs-lookup"><span data-stu-id="26e62-145">Let’s look at hello following diagram and see what happens next.</span></span> <span data-ttu-id="26e62-146">Supposons que ce gestionnaire de ressources du Cluster hello détermine que des modifications sont nécessaires.</span><span class="sxs-lookup"><span data-stu-id="26e62-146">Let’s say that hello Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="26e62-147">Il coordonne avec d’autres modifications système services (Gestionnaire de basculement de hello particulier) toomake hello nécessaires.</span><span class="sxs-lookup"><span data-stu-id="26e62-147">It coordinates with other system services (in particular hello Failover Manager) toomake hello necessary changes.</span></span> <span data-ttu-id="26e62-148">Ensuite, les commandes nécessaires hello sont envoyés toohello des nœuds (4).</span><span class="sxs-lookup"><span data-stu-id="26e62-148">Then hello necessary commands are sent toohello appropriate nodes (4).</span></span> <span data-ttu-id="26e62-149">Par exemple, supposons hello Gestionnaire de ressources remarqué que Node5 a été surchargé et par conséquent décidé Node5 tooNode4 toomove service B.</span><span class="sxs-lookup"><span data-stu-id="26e62-149">For example, let's say hello Resource Manager noticed that Node5 was overloaded, and so decided toomove service B from Node5 tooNode4.</span></span> <span data-ttu-id="26e62-150">Extrémité hello de reconfiguration de hello (5), le cluster de hello ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="26e62-150">At hello end of hello reconfiguration (5), hello cluster looks like this:</span></span>

<span data-ttu-id="26e62-151"><center>
![Architecture de l’équilibreur de ressources][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="26e62-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="26e62-152">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="26e62-152">Next steps</span></span>
- <span data-ttu-id="26e62-153">Hello, Gestionnaire de ressources du Cluster possède de nombreuses options permettant de décrire le cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="26e62-153">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="26e62-154">toofind plus d’informations à leur sujet, consultez cet article sur [décrivant un cluster Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="26e62-154">toofind out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="26e62-155">droits de principal du Gestionnaire de ressources Cluster Hello sont rééquilibrage de cluster de hello et en appliquant des règles de sélection élective.</span><span class="sxs-lookup"><span data-stu-id="26e62-155">hello Cluster Resource Manager's primary duties are rebalancing hello cluster and enforcing placement rules.</span></span> <span data-ttu-id="26e62-156">Pour plus d’informations sur la configuration de ces comportements, consultez [Équilibrage de votre cluster Service Fabric](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="26e62-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png
