---
title: "Agrégation d’événements Azure Service Fabric avec Linux Azure Diagnostics | Microsoft Docs"
description: "Découvrez l’agrégation et la collecte d’événements à l’aide de Linux Azure Diagnostics (LAD) pour la surveillance et le diagnostic de clusters Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/17/2017
ms.author: dekapur
ms.openlocfilehash: bcc3a229369a065cfcfbd32eadbf3f6ae6fe0036
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="event-aggregation-and-collection-using-linux-azure-diagnostics"></a><span data-ttu-id="d38fe-103">Agrégation et collection d’événements à l’aide de Linux Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="d38fe-103">Event aggregation and collection using Linux Azure Diagnostics</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="d38fe-104">Windows</span><span class="sxs-lookup"><span data-stu-id="d38fe-104">Windows</span></span>](service-fabric-diagnostics-event-aggregation-wad.md)
> * [<span data-ttu-id="d38fe-105">Linux</span><span class="sxs-lookup"><span data-stu-id="d38fe-105">Linux</span></span>](service-fabric-diagnostics-event-aggregation-lad.md)
>
>

<span data-ttu-id="d38fe-106">Lorsque vous exécutez un cluster Service Fabric dans Azure, il peut être intéressant de collecter les journaux de tous les nœuds pour les regrouper dans un emplacement central.</span><span class="sxs-lookup"><span data-stu-id="d38fe-106">When you're running an Azure Service Fabric cluster, it's a good idea to collect the logs from all the nodes in a central location.</span></span> <span data-ttu-id="d38fe-107">La centralisation des journaux vous permet d’analyser et résoudre les problèmes que vous pourriez rencontrer dans votre cluster ou dans les applications et services exécutés dans ce cluster.</span><span class="sxs-lookup"><span data-stu-id="d38fe-107">Having the logs in a central location helps you analyze and troubleshoot issues in your cluster, or issues in the applications and services running in that cluster.</span></span>

<span data-ttu-id="d38fe-108">L’une des façons de charger et de collecter des journaux consiste à utiliser l’extension Linux Azure Diagnostics (LAD), qui assure le chargement des journaux dans le Stockage Azure, et qui a également la possibilité d’envoyer des journaux à Azure Application Insights ou Event Hubs.</span><span class="sxs-lookup"><span data-stu-id="d38fe-108">One way to upload and collect logs is to use the Linux Azure Diagnostics (LAD) extension, which uploads logs to Azure Storage, and also has the option to send logs to Azure Application Insights or Event Hubs.</span></span> <span data-ttu-id="d38fe-109">Vous pouvez également utiliser un processus externe pour lire les événements à partir du stockage et les placer dans un produit de plateforme d’analyse tel que [OMS Log Analytics](../log-analytics/log-analytics-service-fabric.md) ou une autre solution d’analyse de journaux.</span><span class="sxs-lookup"><span data-stu-id="d38fe-109">You can also use an external process to read the events from storage and place them in an analysis platform product, such as [OMS Log Analytics](../log-analytics/log-analytics-service-fabric.md) or another log-parsing solution.</span></span>

## <a name="log-and-event-sources"></a><span data-ttu-id="d38fe-110">Sources de journaux et d’événements</span><span class="sxs-lookup"><span data-stu-id="d38fe-110">Log and event sources</span></span>

### <a name="service-fabric-platform-events"></a><span data-ttu-id="d38fe-111">Événements de la plateforme Service Fabric</span><span class="sxs-lookup"><span data-stu-id="d38fe-111">Service Fabric platform events</span></span>
<span data-ttu-id="d38fe-112">Service Fabric émet quelques journaux prêts à l’emploi via [LTTng](http://lttng.org), notamment les événements opérationnels ou des événements du runtime.</span><span class="sxs-lookup"><span data-stu-id="d38fe-112">Service Fabric emits a few out-of-the-box logs via [LTTng](http://lttng.org), including operational events or runtime events.</span></span> <span data-ttu-id="d38fe-113">Ces journaux sont stockés dans l’emplacement spécifié par le modèle Resource Manager du cluster.</span><span class="sxs-lookup"><span data-stu-id="d38fe-113">These logs are stored in the location that the cluster's Resource Manager template specifies.</span></span> <span data-ttu-id="d38fe-114">Pour obtenir ou définir les informations relatives au compte de stockage, recherchez l’étiquette **AzureTableWinFabETWQueryable**, puis recherchez **StoreConnectionString**.</span><span class="sxs-lookup"><span data-stu-id="d38fe-114">To get or set the storage account details, search for the tag **AzureTableWinFabETWQueryable** and look for **StoreConnectionString**.</span></span>

### <a name="application-events"></a><span data-ttu-id="d38fe-115">Événements liés aux applications</span><span class="sxs-lookup"><span data-stu-id="d38fe-115">Application events</span></span>
 <span data-ttu-id="d38fe-116">Les événements émis à partir du code de vos applications et services tel que spécifié par vous-même lors de l’instrumentation de votre logiciel.</span><span class="sxs-lookup"><span data-stu-id="d38fe-116">Events emitted from your applications' and services' code as specified by you when instrumenting your software.</span></span> <span data-ttu-id="d38fe-117">Vous pouvez utiliser une solution de journalisation qui écrit des fichiers journaux textuels, par exemple LTTng.</span><span class="sxs-lookup"><span data-stu-id="d38fe-117">You can use any logging solution that writes text-based log files--for example, LTTng.</span></span> <span data-ttu-id="d38fe-118">Pour plus d’informations, consultez la documentation de LTTng sur le traçage de votre application.</span><span class="sxs-lookup"><span data-stu-id="d38fe-118">For more information, see the LTTng documentation on tracing your application.</span></span>

<span data-ttu-id="d38fe-119">[Surveillance et diagnostic des services dans une configuration de développement d’ordinateur local](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).</span><span class="sxs-lookup"><span data-stu-id="d38fe-119">[Monitor and diagnose services in a local machine development setup](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).</span></span>

## <a name="deploy-the-diagnostics-extension"></a><span data-ttu-id="d38fe-120">Déployer l’extension Diagnostics</span><span class="sxs-lookup"><span data-stu-id="d38fe-120">Deploy the Diagnostics extension</span></span>
<span data-ttu-id="d38fe-121">La première étape de la collecte de journaux consiste à déployer l’extension Diagnostics sur chaque machine virtuelle du cluster Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="d38fe-121">The first step in collecting logs is to deploy the Diagnostics extension on each of the VMs in the Service Fabric cluster.</span></span> <span data-ttu-id="d38fe-122">Cette extension collecte les journaux sur chaque machine virtuelle et les charge dans le compte de stockage que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="d38fe-122">The Diagnostics extension collects logs on each VM and uploads them to the storage account that you specify.</span></span> <span data-ttu-id="d38fe-123">Les étapes varient selon que vous utilisez le portail Azure ou Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d38fe-123">The steps vary based on whether you use the Azure portal or Azure Resource Manager.</span></span>

<span data-ttu-id="d38fe-124">Pour déployer l’extension Diagnostics sur les machines virtuelles du cluster lors de la création de ce dernier, définissez **Diagnostics** sur **Activé**.</span><span class="sxs-lookup"><span data-stu-id="d38fe-124">To deploy the Diagnostics extension to the VMs in the cluster as part of cluster creation, set **Diagnostics** to **On**.</span></span> <span data-ttu-id="d38fe-125">Une fois le cluster créé, vous ne pouvez plus modifier ce paramètre à l’aide du portail.</span><span class="sxs-lookup"><span data-stu-id="d38fe-125">After you create the cluster, you can't change this setting by using the portal.</span></span>

<span data-ttu-id="d38fe-126">Ensuite, configurez Linux Azure Diagnostics (LAD) pour collecter les fichiers et les placer dans votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="d38fe-126">Then, configure Linux Azure Diagnostics (LAD) to collect the files and place them into your storage account.</span></span> <span data-ttu-id="d38fe-127">Ce processus est détaillé dans le scénario 3 (Charger vos propres fichiers journaux) de l’article [Utilisation de l’extension de diagnostic Linux pour analyser les données de performances et de diagnostic d’une machine virtuelle Linux](../virtual-machines/linux/classic/diagnostic-extension.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d38fe-127">This process is explained as scenario 3 ("Upload your own log files") in the article [Using LAD to monitor and diagnose Linux VMs](../virtual-machines/linux/classic/diagnostic-extension.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span> <span data-ttu-id="d38fe-128">Cette procédure vous fournit un accès aux suivis.</span><span class="sxs-lookup"><span data-stu-id="d38fe-128">Following this process gets you access to the traces.</span></span> <span data-ttu-id="d38fe-129">Vous pouvez charger les suivis dans le visualiseur de votre choix.</span><span class="sxs-lookup"><span data-stu-id="d38fe-129">You can upload the traces to a visualizer of your choice.</span></span>

<span data-ttu-id="d38fe-130">Vous pouvez également déployer l’extension Diagnostics à l’aide d’Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d38fe-130">You can also deploy the Diagnostics extension by using Azure Resource Manager.</span></span> <span data-ttu-id="d38fe-131">Le processus, identique pour Windows et Linux, est documenté pour les clusters Windows, dans la section [Collecte des journaux avec Linux Azure Diagnostics](service-fabric-diagnostics-how-to-setup-wad.md).</span><span class="sxs-lookup"><span data-stu-id="d38fe-131">The process is similar for Windows and Linux and is documented for Windows clusters in [How to collect logs with Azure Diagnostics](service-fabric-diagnostics-how-to-setup-wad.md).</span></span>

<span data-ttu-id="d38fe-132">Vous pouvez également utiliser Operations Management Suite, comme indiqué dans [Operations Management Suite Log Analytics with Linux (Analyse des journaux Operations Management Suite avec Linux)](https://blogs.technet.microsoft.com/hybridcloud/2016/01/28/operations-management-suite-log-analytics-with-linux/).</span><span class="sxs-lookup"><span data-stu-id="d38fe-132">You can also use Operations Management Suite, as described in [Operations Management Suite Log Analytics with Linux](https://blogs.technet.microsoft.com/hybridcloud/2016/01/28/operations-management-suite-log-analytics-with-linux/).</span></span>

<span data-ttu-id="d38fe-133">Une fois cette configuration effectuée, l’agent LAD analyse les fichiers journaux spécifiés.</span><span class="sxs-lookup"><span data-stu-id="d38fe-133">After you finish this configuration, the LAD agent monitors the specified log files.</span></span> <span data-ttu-id="d38fe-134">Dès qu’une nouvelle ligne est ajoutée au fichier, elle crée une entrée dans le journal syslog, qui est envoyée au stockage que vous avez spécifié.</span><span class="sxs-lookup"><span data-stu-id="d38fe-134">Whenever a new line is appended to the file, it creates a syslog entry that is sent to the storage that you specified.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d38fe-135">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="d38fe-135">Next steps</span></span>

<span data-ttu-id="d38fe-136">Pour identifier plus précisément les événements à consulter lors de la résolution des problèmes, consultez la [documentation de LTTng](http://lttng.org/docs) et la section [Utilisation de l’extension de diagnostic Linux pour analyser les données de performances et de diagnostic d’une machine virtuelle Linux](../virtual-machines/linux/classic/diagnostic-extension.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d38fe-136">To understand in more detail what events you should examine while troubleshooting issues, see [LTTng documentation](http://lttng.org/docs) and [Using LAD](../virtual-machines/linux/classic/diagnostic-extension.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>