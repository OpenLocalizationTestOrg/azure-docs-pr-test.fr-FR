---
title: aaaAutomate gestion des applications Azure Service Fabric | Documents Microsoft
description: "Déployer, mettre à niveau, tester et supprimer des applications Service Fabric à l’aide de PowerShell."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: a64a39dbee26be8ac15fee767a90fd06bfe4b896
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="automate-hello-application-lifecycle-using-powershell"></a><span data-ttu-id="e381c-103">Automatiser le cycle de vie application hello à l’aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="e381c-103">Automate hello application lifecycle using PowerShell</span></span>
<span data-ttu-id="e381c-104">Plusieurs aspects de hello [cycle de vie application Service Fabric](service-fabric-application-lifecycle.md) peut être automatisée.</span><span class="sxs-lookup"><span data-stu-id="e381c-104">Many aspects of hello [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="e381c-105">Cet article présente des tâches de toouse PowerShell tooautomate commun pour le déploiement, la mise à niveau, supprimer et tester des applications d’Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e381c-105">This article shows how toouse PowerShell tooautomate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="e381c-106">Des API gérées et HTTP pour la gestion de l’application sont également disponibles.</span><span class="sxs-lookup"><span data-stu-id="e381c-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="e381c-107">Consultez la rubrique [Cycle de vie de l’application](service-fabric-application-lifecycle.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="e381c-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="e381c-108">Composants requis</span><span class="sxs-lookup"><span data-stu-id="e381c-108">Prerequisites</span></span>
<span data-ttu-id="e381c-109">Avant de passer les tâches toohello dans l’article de hello, veillez à :</span><span class="sxs-lookup"><span data-stu-id="e381c-109">Before you move on toohello tasks in hello article, be sure to:</span></span>

* <span data-ttu-id="e381c-110">Se familiariser avec les concepts de Service Fabric hello décrits dans [une vue d’ensemble technique du Service Fabric](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e381c-110">Get familiar with hello Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="e381c-111">[Installer le runtime de hello, Kit de développement logiciel et les outils](service-fabric-get-started.md), qui est également installé hello **ServiceFabric** module PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e381c-111">[Install hello runtime, SDK, and tools](service-fabric-get-started.md), which also installs hello **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="e381c-112">[Activer l'exécution du script PowerShell](service-fabric-get-started.md#enable-powershell-script-execution).</span><span class="sxs-lookup"><span data-stu-id="e381c-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="e381c-113">Démarrer un cluster local.</span><span class="sxs-lookup"><span data-stu-id="e381c-113">Start a local cluster.</span></span>  <span data-ttu-id="e381c-114">Lancer une nouvelle fenêtre PowerShell en tant qu’administrateur, puis exécutez script d’installation de cluster hello à partir du dossier du Kit de développement logiciel hello :`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="e381c-114">Launch a new PowerShell window as an administrator and then run hello cluster setup script from hello SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="e381c-115">Avant d’exécuter les commandes PowerShell dans cet article, connectez-vous d’abord cluster Service Fabric local de toohello à l’aide de [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="e381c-115">Before you run any PowerShell commands in this article, first connect toohello local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="e381c-116">Bonjour tâches suivantes nécessite une toodeploy de package d’application v1 et v2 d’un package d’application pour la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="e381c-116">hello following tasks require a v1 application package toodeploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="e381c-117">Télécharger hello [ **WordCount** exemple d’application](http://aka.ms/servicefabricsamples) (situé dans les exemples de prise en main de hello).</span><span class="sxs-lookup"><span data-stu-id="e381c-117">Download hello [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in hello Getting Started samples).</span></span> <span data-ttu-id="e381c-118">Générer et empaqueter l’application hello dans Visual Studio (avec le bouton droit sur **WordCount** dans l’Explorateur de solutions, puis sélectionnez **Package**).</span><span class="sxs-lookup"><span data-stu-id="e381c-118">Build and package hello application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="e381c-119">Copier le package v1 hello dans `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` trop`C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="e381c-119">Copy hello v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` too`C:\Temp\WordCount`.</span></span> <span data-ttu-id="e381c-120">Copie `C:\Temp\WordCount` trop`C:\Temp\WordCountV2`, création de package d’application hello v2 pour la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="e381c-120">Copy `C:\Temp\WordCount` too`C:\Temp\WordCountV2`, creating hello v2 application package for upgrade.</span></span> <span data-ttu-id="e381c-121">Ouvrez `C:\Temp\WordCountV2\ApplicationManifest.xml` dans un éditeur de texte.</span><span class="sxs-lookup"><span data-stu-id="e381c-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="e381c-122">Bonjour **ApplicationManifest** élément, de modification hello **ApplicationTypeVersion** trop d’attributs à partir de « 1.0.0 » « 2.0.0 » numéro de version d’application tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-122">In hello **ApplicationManifest** element, change hello **ApplicationTypeVersion** attribute from "1.0.0" too"2.0.0" tooupdate hello app version number.</span></span> <span data-ttu-id="e381c-123">Enregistrez le fichier de ApplicationManifest.xml de hello modifié.</span><span class="sxs-lookup"><span data-stu-id="e381c-123">Save hello changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="e381c-124">Tâche : déployer une application Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e381c-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="e381c-125">Après avoir généré et empaqueté application hello (ou téléchargé le package d’application hello), vous pouvez déployer l’application hello dans un cluster Service Fabric local.</span><span class="sxs-lookup"><span data-stu-id="e381c-125">After you've built and packaged hello application (or downloaded hello application package), you can deploy hello application into a local Service Fabric cluster.</span></span> <span data-ttu-id="e381c-126">Le déploiement implique le téléchargement du package d’application hello, l’enregistrement du type d’application hello et création d’instance de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-126">Deployment involves uploading hello application package, registering hello application type, and creating hello application instance.</span></span> <span data-ttu-id="e381c-127">Utilisez les instructions de hello dans cette section de toodeploy un nouveau cluster de tooa d’application.</span><span class="sxs-lookup"><span data-stu-id="e381c-127">Use hello instructions in this section toodeploy a new application tooa cluster.</span></span>

### <a name="step-1-upload-hello-application-package"></a><span data-ttu-id="e381c-128">Étape 1 : Télécharger le package d’application hello</span><span class="sxs-lookup"><span data-stu-id="e381c-128">Step 1: Upload hello application package</span></span>
<span data-ttu-id="e381c-129">Téléchargement toohello de package d’application hello magasin d’images place dans un emplacement accessible toointernal Service Fabric de composants.</span><span class="sxs-lookup"><span data-stu-id="e381c-129">Uploading hello application package toohello image store puts it in a location accessible toointernal Service Fabric components.</span></span>  <span data-ttu-id="e381c-130">package d’application Hello contient hello nécessaire manifeste d’application, les manifestes de service et le code, configuration et application de données ou les modules toocreate hello et instances de service.</span><span class="sxs-lookup"><span data-stu-id="e381c-130">hello application package contains hello necessary application manifest, service manifests, and code, configuration, and data package(s) toocreate hello application and service instances.</span></span> <span data-ttu-id="e381c-131">Si vous souhaitez que le package d’application hello tooverify localement, utilisez hello [ServiceFabricApplicationPackage-Test](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="e381c-131">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="e381c-132">Hello [ServiceFabricApplicationPackage de copie](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) commande téléchargements hello package.</span><span class="sxs-lookup"><span data-stu-id="e381c-132">hello [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads hello package.</span></span> <span data-ttu-id="e381c-133">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="e381c-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-hello-application-type"></a><span data-ttu-id="e381c-134">Étape 2 : Inscrire le type d’application hello</span><span class="sxs-lookup"><span data-stu-id="e381c-134">Step 2: Register hello application type</span></span>
<span data-ttu-id="e381c-135">Le package d’application hello inscription rend type d’application hello et version déclarées dans le manifeste de l’application hello disponible pour la.</span><span class="sxs-lookup"><span data-stu-id="e381c-135">Registering hello application package makes hello application type and version declared in hello application manifest available for use.</span></span> <span data-ttu-id="e381c-136">système de Hello lit package hello téléchargé à l’étape de hello 1, vérifiez le package de hello (équivalent toorunning [ServiceFabricApplicationPackage-Test](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) localement), traiter le contenu du package hello et copiez tooan du package hello traité emplacement du système interne.</span><span class="sxs-lookup"><span data-stu-id="e381c-136">hello system reads hello package uploaded in hello step 1, verify hello package (equivalent toorunning [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process hello package contents, and copy hello processed package tooan internal system location.</span></span>  <span data-ttu-id="e381c-137">Exécutez hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) applet de commande :</span><span class="sxs-lookup"><span data-stu-id="e381c-137">Run hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="e381c-138">toosee tous les types d’application hello inscrit dans le cluster hello, exécutez hello [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) applet de commande :</span><span class="sxs-lookup"><span data-stu-id="e381c-138">toosee all hello application types registered in hello cluster, run hello [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-hello-application-instance"></a><span data-ttu-id="e381c-139">Étape 3 : Créer l’instance de l’application hello</span><span class="sxs-lookup"><span data-stu-id="e381c-139">Step 3: Create hello application instance</span></span>
<span data-ttu-id="e381c-140">Une application peut être instanciée à l’aide de n’importe quelle version de type d’application qui a été inscrit avec succès à l’aide de hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) commande.</span><span class="sxs-lookup"><span data-stu-id="e381c-140">An application can be instantiated by using any application type version that has been registered successfully by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="e381c-141">nom Hello de chaque application est déclarée au niveau du déploiement et doit commencer par hello **fabric :** schéma et être unique pour chaque instance d’application.</span><span class="sxs-lookup"><span data-stu-id="e381c-141">hello name of each application is declared at deploy time and must start with hello **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="e381c-142">Hello type nom et la version de type d’application sont déclarées dans hello **ApplicationManifest.xml** fichier du package d’application hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-142">hello application type name and application type version are declared in hello **ApplicationManifest.xml** file of hello application package.</span></span> <span data-ttu-id="e381c-143">Si tous les services par défaut ont été définies dans le manifeste de l’application hello du type d’application cible hello, celles sont créés pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="e381c-143">If any default services were defined in hello application manifest of hello target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="e381c-144">Hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) commande répertorie toutes les instances d’application qui ont été créés, ainsi que leur état global.</span><span class="sxs-lookup"><span data-stu-id="e381c-144">hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="e381c-145">Hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) commande répertorie toutes les instances de service hello qui ont été créés dans une instance d’une application donnée.</span><span class="sxs-lookup"><span data-stu-id="e381c-145">hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of hello service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="e381c-146">Les services par défaut (le cas échéant) sont répertoriés.</span><span class="sxs-lookup"><span data-stu-id="e381c-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="e381c-147">Tâche : mettre à niveau une application Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e381c-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="e381c-148">Vous pouvez mettre à niveau une application Service Fabric précédemment déployée avec un package d’application mis à jour.</span><span class="sxs-lookup"><span data-stu-id="e381c-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="e381c-149">Cette tâche met à niveau l’application WordCount hello qui a été déployée dans « tâche : déployer une application de Service Fabric. »</span><span class="sxs-lookup"><span data-stu-id="e381c-149">This task upgrades hello WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="e381c-150">Consultez le [didacticiel sur la mise à niveau d'une application Service Fabric](service-fabric-application-upgrade.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="e381c-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="e381c-151">tookeep plus simple pour cet exemple, uniquement hello application numéro de version a été mis à jour dans le package d’application hello WordCountV2 créé dans les conditions préalables de hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-151">tookeep things simple for this example, only hello application version number was updated in hello WordCountV2 application package created in hello prerequisites.</span></span> <span data-ttu-id="e381c-152">Un scénario plus réaliste impliquerait vos fichiers de code, de configuration ou de données du service de mise à jour puis la reconstruction et empaquetage d’application hello avec des numéros de version mise à jour.</span><span class="sxs-lookup"><span data-stu-id="e381c-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging hello application with updated version numbers.</span></span>  

### <a name="step-1-upload-hello-updated-application-package"></a><span data-ttu-id="e381c-153">Étape 1 : Télécharger le package de mise à jour d’application hello</span><span class="sxs-lookup"><span data-stu-id="e381c-153">Step 1: Upload hello updated application package</span></span>
<span data-ttu-id="e381c-154">Hello WordCount v1 application est prête toobe mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="e381c-154">hello WordCount v1 application is ready toobe upgraded.</span></span> <span data-ttu-id="e381c-155">Si vous ouvrez une fenêtre PowerShell en tant qu’administrateur et tapez [ **Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), vous voyez que la version 1.0.0 de hello WordCount type d’application est déployée.</span><span class="sxs-lookup"><span data-stu-id="e381c-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of hello WordCount application type is deployed.</span></span>  

<span data-ttu-id="e381c-156">Maintenant, hello de la copie mise à jour application package toohello Service Fabric magasin d’images (où les packages d’application hello sont enregistrées par l’infrastructure de Service).</span><span class="sxs-lookup"><span data-stu-id="e381c-156">Now copy hello updated application package toohello Service Fabric image store (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="e381c-157">Hello paramètre **ApplicationPackagePathInImageStore** informe l’infrastructure de Service dans lequel il peut trouver le package d’application hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-157">hello parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="e381c-158">Hello commande copies hello package d’application trop suivante**WordCountV2** dans le magasin d’images hello :</span><span class="sxs-lookup"><span data-stu-id="e381c-158">hello following command copies hello application package too**WordCountV2** in hello image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-hello-updated-application-type"></a><span data-ttu-id="e381c-159">Étape 2 : Inscrire hello mise à jour de type d’application</span><span class="sxs-lookup"><span data-stu-id="e381c-159">Step 2: Register hello updated application type</span></span>
<span data-ttu-id="e381c-160">étape suivante Hello est tooregister hello nouvelle version de l’application hello avec Service Fabric, ce qui peut être effectuée à l’aide de hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) applet de commande :</span><span class="sxs-lookup"><span data-stu-id="e381c-160">hello next step is tooregister hello new version of hello application with Service Fabric, which can be performed by using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-hello-upgrade"></a><span data-ttu-id="e381c-161">Étape 3 : Démarrer la mise à niveau hello</span><span class="sxs-lookup"><span data-stu-id="e381c-161">Step 3: Start hello upgrade</span></span>
<span data-ttu-id="e381c-162">Différents paramètres de mise à niveau, les délais d’attente et critères d’intégrité peuvent être mises à niveau tooapplication appliqué.</span><span class="sxs-lookup"><span data-stu-id="e381c-162">Various upgrade parameters, timeouts, and health criteria can be applied tooapplication upgrades.</span></span> <span data-ttu-id="e381c-163">Lisez hello [paramètres de mise à niveau l’application](service-fabric-application-upgrade-parameters.md) et [mise à niveau](service-fabric-application-upgrade.md) toolearn plus de documents.</span><span class="sxs-lookup"><span data-stu-id="e381c-163">Read through hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents toolearn more.</span></span> <span data-ttu-id="e381c-164">Tous les services et les instances doivent être *intègre* après mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-164">All services and instances should be *healthy* after hello upgrade.</span></span>  <span data-ttu-id="e381c-165">Ensemble hello **HealthCheckStableDuration** too60 secondes (de sorte que les services de hello sont sains au moins 20 secondes avant la mise à niveau hello passe toohello ensuite mettre à niveau de domaine).</span><span class="sxs-lookup"><span data-stu-id="e381c-165">Set hello **HealthCheckStableDuration** too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next upgrade domain).</span></span>  <span data-ttu-id="e381c-166">Également ensemble hello **UpgradeDomainTimeout** too1200 secondes et hello **UpgradeTimeout** too3000 secondes.</span><span class="sxs-lookup"><span data-stu-id="e381c-166">Also set hello **UpgradeDomainTimeout** too1200 seconds and hello **UpgradeTimeout** too3000 seconds.</span></span> <span data-ttu-id="e381c-167">Enfin, définissez hello **UpgradeFailureAction** trop**restauration**, les demandes de Service Fabric restaure hello version précédente de l’application toohello si les échecs sont produisent pendant la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="e381c-167">Finally, set hello **UpgradeFailureAction** too**rollback**, which requests that Service Fabric rolls back hello application toohello previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="e381c-168">Vous pouvez maintenant démarrer la mise à niveau de hello application à l’aide de hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) applet de commande :</span><span class="sxs-lookup"><span data-stu-id="e381c-168">You can now start hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="e381c-169">Notez que ce nom de l’application hello hello est identique comme hello déployé précédemment v1.0.0 nom de l’application (fabric : / WordCount).</span><span class="sxs-lookup"><span data-stu-id="e381c-169">Note that hello application name is hello same as hello previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="e381c-170">L’infrastructure de service utilise cette tooidentify nom quelle application est mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="e381c-170">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="e381c-171">Si vous définissez hello toobe de délais d’attente trop court, vous pouvez rencontrer un message d’erreur de délai d’attente que les États hello problème.</span><span class="sxs-lookup"><span data-stu-id="e381c-171">If you set hello time-outs toobe too short, you might encounter a time-out failure message that states hello problem.</span></span> <span data-ttu-id="e381c-172">Consultez trop[résoudre les problèmes de mises à niveau de l’application](service-fabric-application-upgrade-troubleshooting.md), ou augmenter les délais d’expiration hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-172">Refer too[Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase hello time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="e381c-173">Étape 4 : vérification de la progression de la mise à niveau</span><span class="sxs-lookup"><span data-stu-id="e381c-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="e381c-174">Vous pouvez surveiller la progression de mise à niveau l’application à l’aide de [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), ou à l’aide de hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) applet de commande :</span><span class="sxs-lookup"><span data-stu-id="e381c-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="e381c-175">Dans quelques minutes, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) applet de commande indique que tous les domaines de mise à niveau ont été mis à niveau (terminé).</span><span class="sxs-lookup"><span data-stu-id="e381c-175">In a few minutes, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="e381c-176">Tâche : tester une application Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e381c-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="e381c-177">toowrite des services de qualité, les développeurs doivent stabilité hello toobe tooinduce en mesure d’infrastructure non fiable erreurs tootest de leurs services.</span><span class="sxs-lookup"><span data-stu-id="e381c-177">toowrite high-quality services, developers need toobe able tooinduce unreliable infrastructure faults tootest hello stability of their services.</span></span> <span data-ttu-id="e381c-178">Service Fabric offre aux développeurs d’actions d’erreur hello capacité tooinduce et tester des services en présence de hello d’échecs à l’aide de hello chaos et le basculement de scénarios de test.</span><span class="sxs-lookup"><span data-stu-id="e381c-178">Service Fabric gives developers hello ability tooinduce fault actions and test services in hello presence of failures by using hello chaos and failover test scenarios.</span></span>  <span data-ttu-id="e381c-179">Lisez [Introduction toohello erreur Analysis Service](service-fabric-testability-overview.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="e381c-179">Read through [Introduction toohello Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-hello-chaos-test-scenario"></a><span data-ttu-id="e381c-180">Étape 1 : Exécuter le scénario de test de chaos hello</span><span class="sxs-lookup"><span data-stu-id="e381c-180">Step 1: Run hello chaos test scenario</span></span>
<span data-ttu-id="e381c-181">scénario de test de chaos Hello génère des erreurs sur l’intégralité du cluster Service Fabric hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-181">hello chaos test scenario generates faults across hello entire Service Fabric cluster.</span></span> <span data-ttu-id="e381c-182">scénario de Hello compresse les erreurs s’affichés généralement sur un mois ou années tooa quelques heures.</span><span class="sxs-lookup"><span data-stu-id="e381c-182">hello scenario compresses faults generally seen over months or years tooa few hours.</span></span> <span data-ttu-id="e381c-183">combinaison Hello de défauts entrelacées avec un taux élevé de pannes de recherche des cas qui passe inaperçues dans le cas contraire.</span><span class="sxs-lookup"><span data-stu-id="e381c-183">hello combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="e381c-184">Hello exemple ci-après exécute scénario de test de chaos hello pendant 60 minutes.</span><span class="sxs-lookup"><span data-stu-id="e381c-184">hello following example runs hello chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-hello-failover-test-scenario"></a><span data-ttu-id="e381c-185">Étape 2 : Exécuter le scénario de test de basculement hello</span><span class="sxs-lookup"><span data-stu-id="e381c-185">Step 2: Run hello failover test scenario</span></span>
<span data-ttu-id="e381c-186">Hello basculement cibles du scénario de test une partition de service spécifique au lieu de l’ensemble du cluster hello et autres services laisse pas affectés.</span><span class="sxs-lookup"><span data-stu-id="e381c-186">hello failover test scenario targets a specific service partition instead of hello entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="e381c-187">scénario de Hello effectue une itération dans une séquence d’erreurs simulés dans la validation de service pendant l’exécution de votre logique métier.</span><span class="sxs-lookup"><span data-stu-id="e381c-187">hello scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="e381c-188">Un échec de validation de service indique une erreur nécessitant un examen approfondi.</span><span class="sxs-lookup"><span data-stu-id="e381c-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="e381c-189">test de basculement Hello n'induit qu’une seule erreur à la fois, comme le scénario de test toohello opposés chaos, qui est susceptible d’entraîner des erreurs multiples.</span><span class="sxs-lookup"><span data-stu-id="e381c-189">hello failover test induces only one fault at a time, as opposed toohello chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="e381c-190">Hello exemple ci-après exécute le test de basculement hello pendant 60 minutes par rapport à l’ensemble fibre optique hello : WordCount/WordCountService service.</span><span class="sxs-lookup"><span data-stu-id="e381c-190">hello following example runs hello failover test for 60 minutes against hello fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="e381c-191">Tâche : supprimer une application Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e381c-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="e381c-192">Vous pouvez supprimer une instance d’une application déployée, supprimer type hello mis en service de l’application hello cluster et supprimer le package d’application hello de hello images.</span><span class="sxs-lookup"><span data-stu-id="e381c-192">You can delete an instance of a deployed application, remove hello provisioned application type from hello cluster, and remove hello application package from hello ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="e381c-193">Étape 1 : Suppression d’une instance d’application</span><span class="sxs-lookup"><span data-stu-id="e381c-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="e381c-194">Lorsqu’une instance d’application n’est plus nécessaire, vous pouvez le supprimer définitivement à l’aide de hello [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="e381c-194">When an application instance is no longer needed, you can permanently remove it by using hello [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="e381c-195">Cette opération supprime également automatiquement tous les services appartenant application toohello, suppression permanente de tous les États de service.</span><span class="sxs-lookup"><span data-stu-id="e381c-195">This also automatically removes all services belonging toohello application, permanently removing all service state.</span></span> <span data-ttu-id="e381c-196">Cette opération ne peut pas être annulée et l'état de l'application ne peut pas être récupéré.</span><span class="sxs-lookup"><span data-stu-id="e381c-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-hello-application-type"></a><span data-ttu-id="e381c-197">Étape 2 : Annuler l’inscription de type de l’application hello</span><span class="sxs-lookup"><span data-stu-id="e381c-197">Step 2: Unregister hello application type</span></span>
<span data-ttu-id="e381c-198">Lorsque vous n’avez plus besoin une version particulière d’un type d’application, annuler son inscription à l’aide de hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="e381c-198">When you no longer need a particular version of an application type, unregister it by using hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="e381c-199">Lors de la désinscription des types inutilisées versions d’espace de stockage utilisé par le package d’application hello dans le magasin d’images hello.</span><span class="sxs-lookup"><span data-stu-id="e381c-199">Unregistering unused types releases storage space used by hello application package in hello image store.</span></span> <span data-ttu-id="e381c-200">L'enregistrement d'un type d'application peut être annulé s'il ne contient aucune instance d'application ou s'il n'est référencé par aucune mise à niveau d'application.</span><span class="sxs-lookup"><span data-stu-id="e381c-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-hello-application-package"></a><span data-ttu-id="e381c-201">Étape 3 : Supprimer le package d’application hello</span><span class="sxs-lookup"><span data-stu-id="e381c-201">Step 3: Remove hello application package</span></span>
<span data-ttu-id="e381c-202">Une fois que le type d’application hello est annulée, hello application peut être supprimé à partir du magasin d’images hello à l’aide de hello [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="e381c-202">After hello application type is unregistered, hello application package can be removed from hello image store by using hello [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="e381c-203">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="e381c-203">Next steps</span></span>
[<span data-ttu-id="e381c-204">Cycle de vie des applications de la structure du service</span><span class="sxs-lookup"><span data-stu-id="e381c-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="e381c-205">Déployer une application</span><span class="sxs-lookup"><span data-stu-id="e381c-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="e381c-206">Mise à niveau de l’application</span><span class="sxs-lookup"><span data-stu-id="e381c-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="e381c-207">Applets de commande Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e381c-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

