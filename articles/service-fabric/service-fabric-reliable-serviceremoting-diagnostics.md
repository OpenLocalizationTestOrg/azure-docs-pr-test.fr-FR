---
title: Diagnostics et surveillance des performances Azure Service Fabric | Microsoft Docs
description: "Cet article décrit les fonctionnalités de surveillance des performances dans le runtime Reliable Service Remoting de Service Fabric, notamment les compteurs de performances émis par celui-ci."
services: service-fabric
documentationcenter: .net
author: suchiagicha
manager: timlt
editor: suchiagicha
ms.assetid: 1c229923-670a-4634-ad59-468ff781ad18
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: suchiagicha
ms.openlocfilehash: f54e157654fb15d2f7ff48ddc666c6c8803c75a2
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/03/2017
---
# <a name="diagnostics-and-performance-monitoring-for-reliable-service-remoting"></a><span data-ttu-id="2ce10-103">Diagnostics et surveillance des performances pour Reliable Service Remoting</span><span class="sxs-lookup"><span data-stu-id="2ce10-103">Diagnostics and performance monitoring for Reliable Service Remoting</span></span>
<span data-ttu-id="2ce10-104">Le runtime Reliable Service Remoting émet des [compteur de performances](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.aspx).</span><span class="sxs-lookup"><span data-stu-id="2ce10-104">The Reliable ServiceRemoting runtime emits  [performance counters](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.aspx).</span></span> <span data-ttu-id="2ce10-105">Ils fournissent des informations sur le fonctionnement du runtime Service Remoting et permettent de résoudre les problèmes et de surveiller les performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-105">These provide insights into how the ServiceRemoting is operating and help with troubleshooting and performance monitoring.</span></span>


## <a name="performance-counters"></a><span data-ttu-id="2ce10-106">Compteurs de performances</span><span class="sxs-lookup"><span data-stu-id="2ce10-106">Performance counters</span></span>
<span data-ttu-id="2ce10-107">Le runtime Reliable Service Remoting définit les catégories suivantes de compteur de performances :</span><span class="sxs-lookup"><span data-stu-id="2ce10-107">The Reliable ServiceRemoting runtime defines the following performance counter categories:</span></span>

| <span data-ttu-id="2ce10-108">Catégorie</span><span class="sxs-lookup"><span data-stu-id="2ce10-108">Category</span></span> | <span data-ttu-id="2ce10-109">Description</span><span class="sxs-lookup"><span data-stu-id="2ce10-109">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ce10-110">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-110">Service Fabric Service</span></span> |<span data-ttu-id="2ce10-111">Compteurs spécifiques à Azure Service Fabric Service Remoting, par exemple, temps moyen nécessaire pour traiter la demande</span><span class="sxs-lookup"><span data-stu-id="2ce10-111">Counters specific to Azure Service Fabric Service Remoting , for example, average time taken to process request</span></span> |
| <span data-ttu-id="2ce10-112">Méthode de service Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2ce10-112">Service Fabric Service Method</span></span> |<span data-ttu-id="2ce10-113">Compteurs spécifiques des méthodes implémentées par Service Fabric Remoting Service. Par exemple, la fréquence à laquelle une méthode de service est appelée</span><span class="sxs-lookup"><span data-stu-id="2ce10-113">Counters specific to methods implemented by Service Fabric Remoting Service, for example, how often a service method is invoked</span></span> |

<span data-ttu-id="2ce10-114">Chacune des catégories précédentes possède un ou plusieurs compteurs.</span><span class="sxs-lookup"><span data-stu-id="2ce10-114">Each of the preceding categories has one or more counters.</span></span>

<span data-ttu-id="2ce10-115">L'application [Analyseur de performances Windows](https://technet.microsoft.com/library/cc749249.aspx) , disponible par défaut dans le système d'exploitation Windows, peut être utilisée pour collecter et afficher les données de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-115">The [Windows Performance Monitor](https://technet.microsoft.com/library/cc749249.aspx) application that is available by default in the Windows operating system can be used to collect and view performance counter data.</span></span> <span data-ttu-id="2ce10-116">[Diagnostics Azure](../cloud-services/cloud-services-dotnet-diagnostics.md) est une autre option pour collecter les données de compteur de performances et les télécharger dans les tables Azure.</span><span class="sxs-lookup"><span data-stu-id="2ce10-116">[Azure Diagnostics](../cloud-services/cloud-services-dotnet-diagnostics.md) is another option for collecting performance counter data and uploading it to Azure tables.</span></span>

### <a name="performance-counter-instance-names"></a><span data-ttu-id="2ce10-117">Noms d'instance de compteur de performances</span><span class="sxs-lookup"><span data-stu-id="2ce10-117">Performance counter instance names</span></span>
<span data-ttu-id="2ce10-118">Un cluster avec un grand nombre de services ou de partitions Service Remoting dispose d'un grand nombre d'instances de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-118">A cluster that has a large number of  ServiceRemoting services or partitions have a large number of  performance counter instances.</span></span> <span data-ttu-id="2ce10-119">Les noms d'instance de compteur de performances peuvent aider à identifier la partition et la méthode Service (le cas échéant) spécifiques associées à l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-119">The performance counter instance names can help in identifying the specific partition and Service method (if applicable) that the performance counter instance is associated with.</span></span>

#### <a name="service-fabric-service-category"></a><span data-ttu-id="2ce10-120">Catégorie de service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-120">Service Fabric Service category</span></span>
<span data-ttu-id="2ce10-121">Pour la catégorie `Service Fabric Service`, les noms d'instance de compteur ont le format suivant :</span><span class="sxs-lookup"><span data-stu-id="2ce10-121">For the category `Service Fabric Service`, the counter instance names are in the following format:</span></span>

`ServiceFabricPartitionID_ServiceReplicaOrInstanceId_ServiceRuntimeInternalID`

<span data-ttu-id="2ce10-122">*ServiceFabricPartitionID* est la représentation sous forme de chaîne de l'ID de partition Service Fabric associée à l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-122">*ServiceFabricPartitionID* is the string representation of the Service Fabric partition ID that the performance counter instance is associated with.</span></span> <span data-ttu-id="2ce10-123">L'ID de partition est un GUID et sa représentation sous forme de chaîne est générée à l'aide de la méthode [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) avec le spécificateur de format « D ».</span><span class="sxs-lookup"><span data-stu-id="2ce10-123">The partition ID is a GUID, and its string representation is generated through the [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) method with format specifier "D".</span></span>

<span data-ttu-id="2ce10-124">*ServiceReplicaOrInstanceId* est la représentation sous forme de chaîne de l'ID du réplica/de l’instance Service Fabric associé(e) à l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-124">*ServiceReplicaOrInstanceId* is the string representation of the Service Fabric Replica/Instance ID that the performance counter instance is associated with.</span></span>

<span data-ttu-id="2ce10-125">*ServiceRuntimeInternalID* est la représentation sous forme de chaîne d'un entier 64 bits généré par le runtime Fabric Service pour son usage interne.</span><span class="sxs-lookup"><span data-stu-id="2ce10-125">*ServiceRuntimeInternalID* is the string representation of a 64-bit integer that is generated by the Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="2ce10-126">Il est inclus dans le nom de l'instance de compteur de performances pour garantir l'unicité et éviter tout conflit avec d'autres noms d'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-126">This is included in the performance counter instance name to ensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="2ce10-127">Les utilisateurs ne doivent pas tenter d'interpréter cette partie du nom de l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-127">Users should not try to interpret this portion of the performance counter instance name.</span></span>

<span data-ttu-id="2ce10-128">Voici un exemple de nom d'instance de compteur pour un compteur appartenant à la catégorie `Service Fabric Service` :</span><span class="sxs-lookup"><span data-stu-id="2ce10-128">The following is an example of a counter instance name for a counter that belongs to the `Service Fabric Service` category:</span></span>

`2740af29-78aa-44bc-a20b-7e60fb783264_635650083799324046_5008379932`

<span data-ttu-id="2ce10-129">Dans l'exemple précédent, `2740af29-78aa-44bc-a20b-7e60fb783264` est la représentation sous forme de chaîne de l'ID de partition Service Fabric, `635650083799324046` est la représentation sous forme de chaîne de l'ID du réplica/de l’instance, et `5008379932` est l’ID 64 bits généré pour l'usage interne du runtime.</span><span class="sxs-lookup"><span data-stu-id="2ce10-129">In the preceding example, `2740af29-78aa-44bc-a20b-7e60fb783264` is the string representation of the Service Fabric partition ID, `635650083799324046` is string representation of Replica/InstanceId and `5008379932` is the 64-bit ID that is generated for the runtime's internal use.</span></span>

#### <a name="service-fabric-service-method-category"></a><span data-ttu-id="2ce10-130">Catégorie de méthode de service Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2ce10-130">Service Fabric Service Method category</span></span>
<span data-ttu-id="2ce10-131">Pour la catégorie `Service Fabric Service Method`, les noms d'instance de compteur ont le format suivant :</span><span class="sxs-lookup"><span data-stu-id="2ce10-131">For the category `Service Fabric Service Method`, the counter instance names are in the following format:</span></span>

`MethodName_ServiceRuntimeMethodId_ServiceFabricPartitionID_ServiceReplicaOrInstanceId_ServiceRuntimeInternalID`

<span data-ttu-id="2ce10-132">*MethodName* est le nom de la méthode de service associée à l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-132">*MethodName* is the name of the service method that the performance counter instance is associated with.</span></span> <span data-ttu-id="2ce10-133">Le format du nom de méthode est déterminé selon une logique du runtime Fabric Service qui équilibre la lisibilité du nom avec des contraintes sur la longueur maximale des noms d'instance de compteur de performances sous Windows.</span><span class="sxs-lookup"><span data-stu-id="2ce10-133">The format of the method name is determined based on some logic in the Fabric Service runtime that balances the readability of the name with constraints on the maximum length of the performance counter instance names on Windows.</span></span>

<span data-ttu-id="2ce10-134">*ServiceRuntimeMethodId* est la représentation sous forme de chaîne d'un entier 32 bits généré par le runtime Fabric Service pour son usage interne.</span><span class="sxs-lookup"><span data-stu-id="2ce10-134">*ServiceRuntimeMethodId* is the string representation of a 32-bit integer that is generated by the Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="2ce10-135">Il est inclus dans le nom de l'instance de compteur de performances pour garantir l'unicité et éviter tout conflit avec d'autres noms d'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-135">This is included in the performance counter instance name to ensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="2ce10-136">Les utilisateurs ne doivent pas tenter d'interpréter cette partie du nom de l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-136">Users should not try to interpret this portion of the performance counter instance name.</span></span>

<span data-ttu-id="2ce10-137">*ServiceFabricPartitionID* est la représentation sous forme de chaîne de l'ID de partition Service Fabric associée à l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-137">*ServiceFabricPartitionID* is the string representation of the Service Fabric partition ID that the performance counter instance is associated with.</span></span> <span data-ttu-id="2ce10-138">L'ID de partition est un GUID et sa représentation sous forme de chaîne est générée à l'aide de la méthode [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) avec le spécificateur de format « D ».</span><span class="sxs-lookup"><span data-stu-id="2ce10-138">The partition ID is a GUID, and its string representation is generated through the [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) method with format specifier "D".</span></span>

<span data-ttu-id="2ce10-139">*ServiceReplicaOrInstanceId* est la représentation sous forme de chaîne de l'ID du réplica/de l’instance Service Fabric associé(e) à l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-139">*ServiceReplicaOrInstanceId* is the string representation of the Service Fabric Replica/Instance ID that the performance counter instance is associated with.</span></span>

<span data-ttu-id="2ce10-140">*ServiceRuntimeInternalID* est la représentation sous forme de chaîne d'un entier 64 bits généré par le runtime Fabric Service pour son usage interne.</span><span class="sxs-lookup"><span data-stu-id="2ce10-140">*ServiceRuntimeInternalID* is the string representation of a 64-bit integer that is generated by the Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="2ce10-141">Il est inclus dans le nom de l'instance de compteur de performances pour garantir l'unicité et éviter tout conflit avec d'autres noms d'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-141">This is included in the performance counter instance name to ensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="2ce10-142">Les utilisateurs ne doivent pas tenter d'interpréter cette partie du nom de l'instance de compteur de performances.</span><span class="sxs-lookup"><span data-stu-id="2ce10-142">Users should not try to interpret this portion of the performance counter instance name.</span></span>

<span data-ttu-id="2ce10-143">Voici un exemple de nom d'instance de compteur pour un compteur appartenant à la catégorie `Service Fabric Service Method` :</span><span class="sxs-lookup"><span data-stu-id="2ce10-143">The following is an example of a counter instance name for a counter that belongs to the `Service Fabric Service Method` category:</span></span>

`ivoicemailboxservice.leavemessageasync_2_89383d32-e57e-4a9b-a6ad-57c6792aa521_635650083804480486_5008380`

<span data-ttu-id="2ce10-144">Dans l'exemple précédent, `ivoicemailboxservice.leavemessageasync` est le nom de la méthode, `2` est l'ID 32 bits généré pour l'usage interne du runtime, `89383d32-e57e-4a9b-a6ad-57c6792aa521` est la représentation sous forme de chaîne de l'ID de partition Service Fabric, `635650083804480486` est la représentation sous forme de chaîne de l'ID du réplica/de l’instance Service Fabric, et `5008380` est l'ID 64 bits généré pour l'usage interne du runtime.</span><span class="sxs-lookup"><span data-stu-id="2ce10-144">In the preceding example, `ivoicemailboxservice.leavemessageasync` is the method name, `2` is the 32-bit ID generated for the runtime's internal use, `89383d32-e57e-4a9b-a6ad-57c6792aa521` is the string representation of the Service Fabric partition ID,`635650083804480486` is the string representation of the Service Fabric Replica/Instance ID and `5008380` is the 64-bit ID generated for the runtime's internal use.</span></span>

## <a name="list-of-performance-counters"></a><span data-ttu-id="2ce10-145">Liste des compteurs de performances</span><span class="sxs-lookup"><span data-stu-id="2ce10-145">List of Performance counters</span></span>
### <a name="service-method-performance-counters"></a><span data-ttu-id="2ce10-146">Compteurs de performances de la méthode Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-146">Service method performance counters</span></span>

<span data-ttu-id="2ce10-147">Le runtime Reliable Service publie les compteurs de performances suivants liés à l'exécution des méthodes de service.</span><span class="sxs-lookup"><span data-stu-id="2ce10-147">The Reliable Service runtime publishes the following performance counters related to the execution of service methods.</span></span>

| <span data-ttu-id="2ce10-148">Nom de la catégorie</span><span class="sxs-lookup"><span data-stu-id="2ce10-148">Category name</span></span> | <span data-ttu-id="2ce10-149">Nom du compteur</span><span class="sxs-lookup"><span data-stu-id="2ce10-149">Counter name</span></span> | <span data-ttu-id="2ce10-150">Description</span><span class="sxs-lookup"><span data-stu-id="2ce10-150">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2ce10-151">Méthode de service Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2ce10-151">Service Fabric Service Method</span></span> |<span data-ttu-id="2ce10-152">Appels/s</span><span class="sxs-lookup"><span data-stu-id="2ce10-152">Invocations/Sec</span></span> |<span data-ttu-id="2ce10-153">Nombre de fois où la méthode de service est appelée par seconde</span><span class="sxs-lookup"><span data-stu-id="2ce10-153">Number of times that the  service method is invoked per second</span></span> |
| <span data-ttu-id="2ce10-154">Méthode de service Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2ce10-154">Service Fabric Service Method</span></span> |<span data-ttu-id="2ce10-155">Moyenne en millisecondes par appel</span><span class="sxs-lookup"><span data-stu-id="2ce10-155">Average milliseconds per invocation</span></span> |<span data-ttu-id="2ce10-156">Durée d'exécution de la méthode de service en millisecondes</span><span class="sxs-lookup"><span data-stu-id="2ce10-156">Time taken to execute the service method in milliseconds</span></span> |
| <span data-ttu-id="2ce10-157">Méthode de service Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2ce10-157">Service Fabric Service Method</span></span> |<span data-ttu-id="2ce10-158">Exceptions levées/s</span><span class="sxs-lookup"><span data-stu-id="2ce10-158">Exceptions thrown/Sec</span></span> |<span data-ttu-id="2ce10-159">Nombre de fois où la méthode de service lève une exception par seconde</span><span class="sxs-lookup"><span data-stu-id="2ce10-159">Number of times that the service method threw an exception per second</span></span> |

### <a name="service-request-processing-performance-counters"></a><span data-ttu-id="2ce10-160">Compteurs de performances de traitement de la requête de service</span><span class="sxs-lookup"><span data-stu-id="2ce10-160">Service request processing performance counters</span></span>
<span data-ttu-id="2ce10-161">Lorsqu'un client appelle une méthode via un objet proxy de service, un message de requête est envoyé via le réseau au service à distance.</span><span class="sxs-lookup"><span data-stu-id="2ce10-161">When a client invokes a method via a service proxy object, it results in a request message being sent over the network to the remoting service.</span></span> <span data-ttu-id="2ce10-162">Le service traite le message de requête et renvoie une réponse au client.</span><span class="sxs-lookup"><span data-stu-id="2ce10-162">The service processes the request message and sends a response back to the client.</span></span> <span data-ttu-id="2ce10-163">Le runtime Reliable Service Remoting publie les compteurs de performances suivants liés au traitement de la requête de service.</span><span class="sxs-lookup"><span data-stu-id="2ce10-163">The Reliable ServiceRemoting runtime publishes the following performance counters related to service request processing.</span></span>

| <span data-ttu-id="2ce10-164">Nom de la catégorie</span><span class="sxs-lookup"><span data-stu-id="2ce10-164">Category name</span></span> | <span data-ttu-id="2ce10-165">Nom du compteur</span><span class="sxs-lookup"><span data-stu-id="2ce10-165">Counter name</span></span> | <span data-ttu-id="2ce10-166">Description</span><span class="sxs-lookup"><span data-stu-id="2ce10-166">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2ce10-167">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-167">Service Fabric Service</span></span> |<span data-ttu-id="2ce10-168">Nombre de requêtes en attente</span><span class="sxs-lookup"><span data-stu-id="2ce10-168"># of outstanding requests</span></span> |<span data-ttu-id="2ce10-169">Nombre de requêtes en cours de traitement dans le service</span><span class="sxs-lookup"><span data-stu-id="2ce10-169">Number of requests being processed in the service</span></span> |
| <span data-ttu-id="2ce10-170">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-170">Service Fabric Service</span></span> |<span data-ttu-id="2ce10-171">Moyenne en millisecondes par requête</span><span class="sxs-lookup"><span data-stu-id="2ce10-171">Average milliseconds per request</span></span> |<span data-ttu-id="2ce10-172">Durée (en millisecondes) nécessaire au service pour traiter une requête</span><span class="sxs-lookup"><span data-stu-id="2ce10-172">Time taken (in milliseconds) by the service to process a request</span></span> |
| <span data-ttu-id="2ce10-173">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-173">Service Fabric Service</span></span> |<span data-ttu-id="2ce10-174">Moyenne en millisecondes pour la désérialisation de la requête</span><span class="sxs-lookup"><span data-stu-id="2ce10-174">Average milliseconds for request deserialization</span></span> |<span data-ttu-id="2ce10-175">Durée (en millisecondes) nécessaire pour désérialiser le message de requête de service lorsqu'il est reçu au niveau du service</span><span class="sxs-lookup"><span data-stu-id="2ce10-175">Time taken (in milliseconds) to deserialize service request message when it is received at the service</span></span> |
| <span data-ttu-id="2ce10-176">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="2ce10-176">Service Fabric Service</span></span> |<span data-ttu-id="2ce10-177">Moyenne en millisecondes pour la sérialisation de la réponse</span><span class="sxs-lookup"><span data-stu-id="2ce10-177">Average milliseconds for response serialization</span></span> |<span data-ttu-id="2ce10-178">Durée (en millisecondes) nécessaire pour sérialiser le message de réponse de service au niveau du service avant l’envoi de la réponse au client</span><span class="sxs-lookup"><span data-stu-id="2ce10-178">Time taken (in milliseconds) to serialize the service response message at the service before the response is sent to the client</span></span> |

## <a name="next-steps"></a><span data-ttu-id="2ce10-179">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="2ce10-179">Next steps</span></span>
* [<span data-ttu-id="2ce10-180">Exemple de code</span><span class="sxs-lookup"><span data-stu-id="2ce10-180">Sample code</span></span>](https://github.com/Azure/servicefabric-samples)
* [<span data-ttu-id="2ce10-181">Fournisseurs EventSource dans PerfView</span><span class="sxs-lookup"><span data-stu-id="2ce10-181">EventSource providers in PerfView</span></span>](https://blogs.msdn.microsoft.com/vancem/2012/07/09/introduction-tutorial-logging-etw-events-in-c-system-diagnostics-tracing-eventsource/)
