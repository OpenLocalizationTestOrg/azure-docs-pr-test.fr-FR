---
title: aaaAzure analyse de Service Fabric conteneurs et aux Diagnostics | Documents Microsoft
description: "Découvrez comment toomonitor et diagnostiquer les conteneurs orchestrés sur Microsoft Azure Service Fabric avec solution de conteneurs d’OMS."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="fcd03-103">Surveiller les conteneurs Windows Server avec OMS</span><span class="sxs-lookup"><span data-stu-id="fcd03-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="fcd03-104">Solution de conteneurs d’OMS</span><span class="sxs-lookup"><span data-stu-id="fcd03-104">OMS Containers Solution</span></span>

<span data-ttu-id="fcd03-105">équipe de Operations Management Suite (OMS) Hello a publié une solution de conteneurs pour les diagnostics et la surveillance des conteneurs.</span><span class="sxs-lookup"><span data-stu-id="fcd03-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="fcd03-106">En même temps que la solution de Service Fabric, cette solution est un excellent outil toomonitor conteneur les déploiements orchestrés sur l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="fcd03-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="fcd03-107">Voici un exemple simple de quel tableau de bord hello dans les solutions hello ressemble à :</span><span class="sxs-lookup"><span data-stu-id="fcd03-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Tableau de bord OMS de base](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="fcd03-109">Il collecte également les différents types de fichiers journaux qui peuvent être interrogées dans l’outil d’Analytique des journaux OMS hello, et peut être utilisé toovisualize les métriques ou les événements générés.</span><span class="sxs-lookup"><span data-stu-id="fcd03-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="fcd03-110">types de journaux Hello collectés sont :</span><span class="sxs-lookup"><span data-stu-id="fcd03-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="fcd03-111">ContainerInventory : affiche des informations sur les images, le nom et l’emplacement du conteneur</span><span class="sxs-lookup"><span data-stu-id="fcd03-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="fcd03-112">ContainerImageInventory : informations sur les images déployées, ID ou tailles compris</span><span class="sxs-lookup"><span data-stu-id="fcd03-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="fcd03-113">ContainerLog : journaux d’erreurs spécifiques, journaux de docker (stdout, etc.) et autres entrées</span><span class="sxs-lookup"><span data-stu-id="fcd03-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="fcd03-114">ContainerServiceLog : les commandes de démon docker qui ont été exécutées</span><span class="sxs-lookup"><span data-stu-id="fcd03-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="fcd03-115">Performances : les compteurs de performances, y compris le conteneur de processeur, mémoire, le trafic réseau, les e/s disque et des mesures personnalisées à partir de hello hébergent des ordinateurs</span><span class="sxs-lookup"><span data-stu-id="fcd03-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="fcd03-116">Cet article traite des tooset requis de hello étapes d’analyse pour votre cluster de conteneur.</span><span class="sxs-lookup"><span data-stu-id="fcd03-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="fcd03-117">toolearn plus d’informations sur les solutions de conteneurs d’OMS, consultez leurs [documentation](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="fcd03-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="fcd03-118">1. Configuration d’un cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="fcd03-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="fcd03-119">Créer un cluster à l’aide du modèle Azure Resource Manager hello [ici](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="fcd03-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="fcd03-120">Assurez-vous que tooadd un nom d’espace de travail OMS unique.</span><span class="sxs-lookup"><span data-stu-id="fcd03-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="fcd03-121">Ce modèle est également par défaut toodeploying un cluster dans l’aperçu de hello build de l’infrastructure de Service (v255.255), ce qui signifie qu’il ne peut pas être utilisé en production et ne peut pas être mis à niveau tooa une autre version de l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="fcd03-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="fcd03-122">Si vous décidez de ce modèle pour toouse à long terme ou de production à utiliser, de modifier le numéro de version stable hello version tooa.</span><span class="sxs-lookup"><span data-stu-id="fcd03-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="fcd03-123">Une fois que le cluster de hello est configuré, vérifiez que vous avez installé les certificats appropriés hello et vérifiez que vous êtes en mesure de tooconnect toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="fcd03-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="fcd03-124">Vérifiez que votre groupe de ressources est correctement configuré par titre toohello [portail Azure](https://portal.azure.com/) et la recherche de déploiement de hello.</span><span class="sxs-lookup"><span data-stu-id="fcd03-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="fcd03-125">groupe de ressources Hello doit contenir toutes les ressources de Service Fabric hello et ont également une solution Analytique de journal ainsi que d’une solution de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="fcd03-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="fcd03-126">Pour modifier un cluster Service Fabric existant :</span><span class="sxs-lookup"><span data-stu-id="fcd03-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="fcd03-127">Vérifiez que les tests de diagnostic est activée (dans le cas contraire, l’activer via [mise à jour ensemble d’échelle de machine virtuelle hello](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="fcd03-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="fcd03-128">Ajouter un espace de travail OMS en créant une solution « Analytique de l’infrastructure de Service » via hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="fcd03-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="fcd03-129">Modifier les sources de données de hello de hello Service Fabric solution toopick des données à partir de tables Azure Storage appropriées hello (configurés par WAD) Bonjour groupe de ressources qui hello cluster est dans</span><span class="sxs-lookup"><span data-stu-id="fcd03-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="fcd03-130">Ajouter l’agent hello en tant qu’un [extension toohello machines virtuelles identiques](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell ou l’ensemble d’échelle de machine virtuelle hello (même liaison comme indiqué ci-dessus, modèle de gestionnaire de ressources toomodify hello) de mise à jour</span><span class="sxs-lookup"><span data-stu-id="fcd03-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="fcd03-131">2. Déploiement d’un conteneur</span><span class="sxs-lookup"><span data-stu-id="fcd03-131">2. Deploy a container</span></span>

<span data-ttu-id="fcd03-132">Une fois que le cluster de hello est prêt et que vous avez confirmé que vous pouvez y accéder, déployez un tooit du conteneur.</span><span class="sxs-lookup"><span data-stu-id="fcd03-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="fcd03-133">Si vous avez choisi de version d’évaluation toouse hello en tant que jeu par modèle de hello, vous pouvez également Explorer docker de nouveau de Service Fabric composent les fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="fcd03-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="fcd03-134">N’oubliez pas que hello première fois une image de conteneur est déployé tooa cluster, il accepte plusieurs images de hello toodownload minutes en fonction de sa taille.</span><span class="sxs-lookup"><span data-stu-id="fcd03-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="fcd03-135">3. Ajouter la solution de conteneurs hello</span><span class="sxs-lookup"><span data-stu-id="fcd03-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="fcd03-136">Dans l’hello portail Azure, créez une ressource de conteneurs (sous hello analyse + gestion catégorie) via Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fcd03-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Ajout de la solution Conteneurs](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="fcd03-138">À l’étape de la création de hello, il demande un espace de travail OMS.</span><span class="sxs-lookup"><span data-stu-id="fcd03-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="fcd03-139">Sélectionnez hello qui a été créé avec un déploiement hello ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="fcd03-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="fcd03-140">Cette étape ajoute une solution de conteneurs au sein de votre espace de travail OMS et est automatiquement détectée par l’agent OMS de hello déployé par le modèle de hello.</span><span class="sxs-lookup"><span data-stu-id="fcd03-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="fcd03-141">démarre l’agent de Hello collecte des données sur les processus de conteneurs hello dans un cluster de hello et dans environ 10-15 minutes, vous devez voir des solutions hello allument avec des données comme image hello du tableau de bord hello ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="fcd03-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="fcd03-142">4. Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="fcd03-142">4. Next steps</span></span>

<span data-ttu-id="fcd03-143">OMS propose divers outils dans toomake d’espace de travail hello si elle est plus utile pour vous.</span><span class="sxs-lookup"><span data-stu-id="fcd03-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="fcd03-144">Explorer hello suivant options toocustomize hello solution tooyour besoins :</span><span class="sxs-lookup"><span data-stu-id="fcd03-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="fcd03-145">Obtenir être familiarisé avec hello [recherche et interrogation de journal](../log-analytics/log-analytics-log-searches.md) fonctionnalités proposées dans le cadre de l’Analytique des journaux</span><span class="sxs-lookup"><span data-stu-id="fcd03-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="fcd03-146">Configurer hello OMS agent toopick des compteurs de performance spécifiques (accédez toohello espace de travail Accueil > Paramètres > données > compteurs de performances Windows)</span><span class="sxs-lookup"><span data-stu-id="fcd03-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="fcd03-147">Configurer OMS tooset [automatisée d’alerte](../log-analytics/log-analytics-alerts.md) tooaid de règles de détection et de diagnostics</span><span class="sxs-lookup"><span data-stu-id="fcd03-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>
