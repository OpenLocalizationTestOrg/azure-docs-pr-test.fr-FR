---
title: "aaaAzure analyse des événements Service Fabric avec Application Insights | Documents Microsoft"
description: "Découvrez l’analyse et la visualisation d’événements à l’aide d’Application Insights pour la surveillance et le diagnostic de clusters Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 59bb5a409f2951e5b2034049e782dd0da67f933c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="c553d-103">Analyse et visualisation d’événements avec Application Insights</span><span class="sxs-lookup"><span data-stu-id="c553d-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="c553d-104">Azure Application Insights est une plateforme extensible pour la surveillance et le diagnostic d’application.</span><span class="sxs-lookup"><span data-stu-id="c553d-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="c553d-105">Elle inclut un puissant outil d’analyse et de requête, un tableau de bord et des visualisations personnalisables, ainsi que d’autres options incluant l’alerte automatisée.</span><span class="sxs-lookup"><span data-stu-id="c553d-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="c553d-106">Il est hello recommandé de plateforme pour l’analyse et diagnostics pour les services et applications de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c553d-106">It is hello recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="c553d-107">Configuration d'Application Insights</span><span class="sxs-lookup"><span data-stu-id="c553d-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="c553d-108">Création d’une ressource AI (Application Insights)</span><span class="sxs-lookup"><span data-stu-id="c553d-108">Creating an AI Resource</span></span>

<span data-ttu-id="c553d-109">ressources de toocreate une AI principal sur toohello Azure Marketplace et recherchez « Application Insights ».</span><span class="sxs-lookup"><span data-stu-id="c553d-109">toocreate an AI resource, head over toohello Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="c553d-110">Il doit s’afficher en tant que solution de première hello (il se trouve sous la catégorie « Mobile de + Web »).</span><span class="sxs-lookup"><span data-stu-id="c553d-110">It should show up as hello first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="c553d-111">Cliquez sur **créer** lorsque vous examinez les ressources droite hello (Vérifiez que votre chemin d’accès correspond à l’image hello ci-dessous).</span><span class="sxs-lookup"><span data-stu-id="c553d-111">Click **Create** when you are looking at hello right resource (confirm that your path matches hello image below).</span></span>

![Nouvelle ressource Application Insights](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="c553d-113">Vous devez toofill à certaines ressources de hello tooprovision informations correctement.</span><span class="sxs-lookup"><span data-stu-id="c553d-113">You will need toofill out some information tooprovision hello resource correctly.</span></span> <span data-ttu-id="c553d-114">Bonjour *Type d’Application* champ, utilisez « Application de web ASP.NET » si vous utilisez un de l’infrastructure de Service de modèles de programmation ou publication d’un cluster de toohello d’application .NET.</span><span class="sxs-lookup"><span data-stu-id="c553d-114">In hello *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application toohello cluster.</span></span> <span data-ttu-id="c553d-115">Utilisez « Général » si vous souhaitez déployer des conteneurs et ses exécutables invités.</span><span class="sxs-lookup"><span data-stu-id="c553d-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="c553d-116">En règle générale, par défaut toousing « Application de web ASP.NET » tookeep vos options ouvrent Bonjour futures.</span><span class="sxs-lookup"><span data-stu-id="c553d-116">In general, default toousing "ASP.NET web application" tookeep your options open in hello future.</span></span> <span data-ttu-id="c553d-117">nom de Hello est en tooyour préférence, et groupe de ressources hello et abonnement sont modifiable après le déploiement de ressource de hello.</span><span class="sxs-lookup"><span data-stu-id="c553d-117">hello name is up tooyour preference, and both hello resource group and subscription are changeable post-deployment of hello resource.</span></span> <span data-ttu-id="c553d-118">Il est recommandé que votre ressource AI Bonjour même groupe de ressources que votre cluster.</span><span class="sxs-lookup"><span data-stu-id="c553d-118">We recommend that your AI resource is in hello same resource group as your cluster.</span></span> <span data-ttu-id="c553d-119">Si vous voulez obtenir des informations supplémentaires, consultez [Création d’une ressource Application Insights dans Azure](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="c553d-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="c553d-120">Vous devez tooconfigure de clé d’Instrumentation AI hello AI avec votre outil d’agrégation d’événement.</span><span class="sxs-lookup"><span data-stu-id="c553d-120">You need hello AI Instrumentation Key tooconfigure AI with your event aggregation tool.</span></span> <span data-ttu-id="c553d-121">Une fois que votre ressource AI est défini (prend quelques minutes après le déploiement de hello est validé), accédez tooit et recherche hello **propriétés** section sur la barre de navigation gauche hello.</span><span class="sxs-lookup"><span data-stu-id="c553d-121">Once your AI resource is set up (takes a few minutes after hello deployment is validated), navigate tooit and find hello **Properties** section on hello left navigation bar.</span></span> <span data-ttu-id="c553d-122">Un nouveau panneau s’ouvre, affichant une *CLÉ D’INSTRUMENTATION*.</span><span class="sxs-lookup"><span data-stu-id="c553d-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="c553d-123">Si vous avez besoin d’abonnement de hello toochange ou groupe de ressources de la ressource de hello, il est possible ici également.</span><span class="sxs-lookup"><span data-stu-id="c553d-123">If you need toochange hello subscription or resource group of hello resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="c553d-124">Configuration de AI avec WAD</span><span class="sxs-lookup"><span data-stu-id="c553d-124">Configuring AI with WAD</span></span>

<span data-ttu-id="c553d-125">Il existe deux façons principales de données toosend de WAD tooAzure AI, qui sont obtenues en ajoutant une configuration de Diagnostics Windows AZURE AI récepteur toohello, comme détaillé dans [cet article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="c553d-125">There are two primary ways toosend data from WAD tooAzure AI, which is achieved by adding an AI sink toohello WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="c553d-126">Ajouter une clé d’instrumentation AI lors de la création d’un cluster dans le portail Azure</span><span class="sxs-lookup"><span data-stu-id="c553d-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Ajout d’une clé AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="c553d-128">Lorsque vous créez un cluster, si les Diagnostics est activée « On », un champ facultatif de tooenter une clé d’Instrumentation d’Application Insights affichera.</span><span class="sxs-lookup"><span data-stu-id="c553d-128">When creating a cluster, if Diagnostics is turned "On", an optional field tooenter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="c553d-129">Si vous collez votre IKey AI ici, récepteur de hello AI sera automatiquement configuré pour vous dans le modèle de gestionnaire de ressources hello toodeploy utilisé votre cluster.</span><span class="sxs-lookup"><span data-stu-id="c553d-129">If you paste your AI IKey here, hello AI sink will be automatically configured for you in hello Resource Manager template that is used toodeploy your cluster.</span></span>

#### <a name="add-hello-ai-sink-toohello-resource-manager-template"></a><span data-ttu-id="c553d-130">Ajouter hello AI récepteur toohello Gestionnaire de ressources du modèle</span><span class="sxs-lookup"><span data-stu-id="c553d-130">Add hello AI Sink toohello Resource Manager template</span></span>

<span data-ttu-id="c553d-131">Bonjour « WadCfg » du modèle de gestionnaire de ressources hello, ajoutez un « récepteur » en incluant hello deux modifications suivantes :</span><span class="sxs-lookup"><span data-stu-id="c553d-131">In hello "WadCfg" of hello Resource Manager template, add a "Sink" by including hello following two changes:</span></span>

1. <span data-ttu-id="c553d-132">Ajouter la configuration du récepteur hello :</span><span class="sxs-lookup"><span data-stu-id="c553d-132">Add hello sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="c553d-133">Inclure hello récepteur Bonjour DiagnosticMonitorConfiguration en ajoutant des hello ligne dans « DiagnosticMonitorConfiguration » de hello « WadCfg » :</span><span class="sxs-lookup"><span data-stu-id="c553d-133">Include hello Sink in hello DiagnosticMonitorConfiguration by adding hello following line in "DiagnosticMonitorConfiguration" of hello "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="c553d-134">Dans les deux extraits de code hello ci-dessus, hello nom « applicationInsights » était récepteur de hello toodescribe utilisé.</span><span class="sxs-lookup"><span data-stu-id="c553d-134">In both hello code snippets above, hello name "applicationInsights" was used toodescribe hello sink.</span></span> <span data-ttu-id="c553d-135">Cela n’est pas obligatoire, et tant que nom de hello du récepteur de hello est inclus dans les « récepteurs », vous pouvez définir la chaîne de nom de tooany hello.</span><span class="sxs-lookup"><span data-stu-id="c553d-135">This is not a requirement and as long as hello name of hello sink is included in "sinks", you can set hello name tooany string.</span></span>

<span data-ttu-id="c553d-136">Actuellement, les journaux de cluster de hello apparaît comme suivis dans la visionneuse du journal de AI.</span><span class="sxs-lookup"><span data-stu-id="c553d-136">Currently, logs from hello cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="c553d-137">Étant donné que la plupart des traces hello en provenance de plateforme de hello est de niveau « Informations », vous pouvez également envisager la modification hello récepteur configuration tooonly envoi des journaux de type « Critique » ou « Erreur ».</span><span class="sxs-lookup"><span data-stu-id="c553d-137">Since most of hello traces coming from hello platform are of level "Informational", you can also consider changing hello sink configuration tooonly send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="c553d-138">Cela est possible en ajoutant le récepteur de tooyour « Canaux », comme illustré dans [cet article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="c553d-138">This can be done by adding "Channels" tooyour sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="c553d-139">Si vous utilisez un IKey AI incorrect dans le portail ou dans votre modèle de gestionnaire de ressources, vous devez toomanually modifier la clé de hello / redéployer et mettre à jour hello cluster.</span><span class="sxs-lookup"><span data-stu-id="c553d-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have toomanually change hello key and update hello cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="c553d-140">Configuration de AI avec EventFlow</span><span class="sxs-lookup"><span data-stu-id="c553d-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="c553d-141">Si vous utilisez des événements de tooaggregate EventFlow, assurez-vous que tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`package NuGet.</span><span class="sxs-lookup"><span data-stu-id="c553d-141">If you are using EventFlow tooaggregate events, make sure tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="c553d-142">Hello suivant a toobe inclus dans hello *génère* section Hello *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="c553d-142">hello following has toobe included in hello *outputs* section of hello *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace hello following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="c553d-143">Apporter des modifications de hello requis toomake que dans vos filtres, ainsi qu’inclure d’autres entrées (ainsi que leurs packages NuGet respectifs).</span><span class="sxs-lookup"><span data-stu-id="c553d-143">Make sure toomake hello required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="c553d-144">SDK AI (Application Insights)</span><span class="sxs-lookup"><span data-stu-id="c553d-144">AI.SDK</span></span>

<span data-ttu-id="c553d-145">Il est généralement recommandé toouse EventFlow et diagnostics Windows AZURE en tant que solutions d’agrégation, car elles permettent une toodiagnostics approche modulaire plus et d’analyse, par exemple, si vous souhaitez toochange votre sorties à partir de EventFlow, nécessite aucune modification de tooyour réel instrumentation, juste un fichier de configuration tooyour modification simple.</span><span class="sxs-lookup"><span data-stu-id="c553d-145">It is generally recommended toouse EventFlow and WAD as aggregation solutions, because they allow for a more modular approach toodiagnostics and monitoring, i.e. if you want toochange your outputs from EventFlow, it requires no change tooyour actual instrumentation, just a simple modification tooyour config file.</span></span> <span data-ttu-id="c553d-146">Si, toutefois, vous décidez tooinvest à l’aide d’Application Insights ne sont pas susceptibles de toochange tooa autre plateforme, vous devez rechercher dans à l’aide nouveau SDK de AI pour agréger des événements et en les envoyant tooAI.</span><span class="sxs-lookup"><span data-stu-id="c553d-146">If, however, you decide tooinvest in using Application Insights and are not likely toochange tooa different platform, you should look into using AI's new SDK for aggregating events and sending them tooAI.</span></span> <span data-ttu-id="c553d-147">Cela signifie que vous n’aurez plus tooconfigure EventFlow toosend tooAI de vos données, mais au lieu de cela installera le package de NuGet de l’infrastructure de Service de ApplicationInsight hello.</span><span class="sxs-lookup"><span data-stu-id="c553d-147">This means that you will no longer have tooconfigure EventFlow toosend your data tooAI, but instead will install hello ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="c553d-148">Plus de détails sur le package de hello [ici](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="c553d-148">Details on hello package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="c553d-149">[Application Insights prennent en charge pour les conteneurs et Microservices](https://azure.microsoft.com/app-insights-microservices/) vous montre quelques hello nouvelles fonctionnalités qui sont en cours de traitement (toujours actuellement en version bêta), qui vous permettent toohave options de surveillance plus riches out of box avec AI.</span><span class="sxs-lookup"><span data-stu-id="c553d-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of hello new features that are being worked on (currently still in beta), which allow you toohave richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="c553d-150">Celles-ci incluent le suivi des dépendances (utilisé dans la création d’un AppMap de tous vos services et applications dans un cluster et hello de communication entre eux) et une meilleure corrélation des suivis en provenance de vos services (permet de mieux localiser un problème dans hello flux de travail d’une application ou un service).</span><span class="sxs-lookup"><span data-stu-id="c553d-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and hello communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in hello workflow of an app or service).</span></span>

<span data-ttu-id="c553d-151">Si vous développez dans .NET et probablement à l’aide des modèles de programmation de Service Fabric et sont prêt toouse AI comme plate-forme pour visualiser et analyser les données de journaux et d’événements, il est recommandé que vous accédez via hello itinéraire AI SDK comme votre analyse et flux de travail de Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="c553d-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing toouse AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via hello AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="c553d-152">Lecture [cela](../application-insights/app-insights-asp-net-more.md) et [cela](../application-insights/app-insights-asp-net-trace-logs.md) tooget main à l’aide de AI toocollect et afficher vos journaux.</span><span class="sxs-lookup"><span data-stu-id="c553d-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) tooget started with using AI toocollect and display your logs.</span></span>

## <a name="navigating-hello-ai-resource-in-azure-portal"></a><span data-ttu-id="c553d-153">Navigation dans les ressources de AI hello dans le portail Azure</span><span class="sxs-lookup"><span data-stu-id="c553d-153">Navigating hello AI resource in Azure portal</span></span>

<span data-ttu-id="c553d-154">Une fois que vous avez configuré les AI comme sortie pour les événements et les journaux, informations devraient démarrer tooshow dans votre ressource AI dans quelques minutes.</span><span class="sxs-lookup"><span data-stu-id="c553d-154">Once you have configured AI as an output for your events and logs, information should start tooshow up in your AI resource in a few minutes.</span></span> <span data-ttu-id="c553d-155">Accédez à la ressource AI toohello, qui prendra vous toohello AI ressources du tableau de bord.</span><span class="sxs-lookup"><span data-stu-id="c553d-155">Navigate toohello AI resource, which will take you toohello AI resource dashboard.</span></span> <span data-ttu-id="c553d-156">Cliquez sur **recherche** dans hello AI barre des tâches toosee hello dernières traces qu’il a reçus et toofilter en mesure de toobe via les.</span><span class="sxs-lookup"><span data-stu-id="c553d-156">Click **Search** in hello AI taskbar toosee hello latest traces that it has received, and toobe able toofilter through them.</span></span>

<span data-ttu-id="c553d-157">*Metrics Explorer* est un outil utile pour la création de tableaux de bord personnalisés basés sur les indicateurs de performance que vos applications, vos services et votre cluster peuvent signaler.</span><span class="sxs-lookup"><span data-stu-id="c553d-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="c553d-158">Consultez [exploration des mesures d’Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset des graphiques quelques pour vous-même en fonction des données de hello vous collectez.</span><span class="sxs-lookup"><span data-stu-id="c553d-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset up a few charts for yourself based on hello data you are collecting.</span></span>

<span data-ttu-id="c553d-159">En cliquant sur **Analytique** vous conduira portail Application Insights Analytique de toohello, où vous pouvez rechercher des événements et des traces avec une plus grande portée et caractère facultatif.</span><span class="sxs-lookup"><span data-stu-id="c553d-159">Clicking **Analytics** will take you toohello Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="c553d-160">Vous pouvez en apprendre plus à ce sujet dans [Analytics dans Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="c553d-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c553d-161">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="c553d-161">Next steps</span></span>

* <span data-ttu-id="c553d-162">[Configurer des alertes dans AI](../application-insights/app-insights-alerts.md) toobe informé des changements apportés dans les performances ou d’utilisation</span><span class="sxs-lookup"><span data-stu-id="c553d-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) toobe notified about changes in performance or usage</span></span>
* <span data-ttu-id="c553d-163">[Active la détection dans Application Insights](../application-insights/app-insights-proactive-diagnostics.md) effectue une analyse proactive de télémétrie hello envoyé tooAI toowarn d’éventuels problèmes de performances</span><span class="sxs-lookup"><span data-stu-id="c553d-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of hello telemetry being sent tooAI toowarn you of potential performance problems</span></span>
