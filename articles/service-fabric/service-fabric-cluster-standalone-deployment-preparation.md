---
title: "Préparation du déploiement de Cluster Service Fabric autonomes d’aaaAzure | Documents Microsoft"
description: "Documentation liée environnement de hello toopreparing et créez la configuration de cluster hello, toobe considérée comme toodeploying préalable un cluster conçu pour gérer une charge de travail de production."
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: e503c61a64b408af3f22bd75ab02f1c34ac9f380
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="2c601-103">Planifier et préparer votre déploiement de cluster Service Fabric autonome</span><span class="sxs-lookup"><span data-stu-id="2c601-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="2c601-104">Effectuer hello comme suit avant de créer votre cluster.</span><span class="sxs-lookup"><span data-stu-id="2c601-104">Perform hello following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="2c601-105">Étape 1 : planifier votre infrastructure de cluster</span><span class="sxs-lookup"><span data-stu-id="2c601-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="2c601-106">Vous êtes sur le toocreate un cluster Service Fabric sur les ordinateurs que vous possédez, afin de décider quels types d’échecs, vous souhaitez hello toosurvive du cluster.</span><span class="sxs-lookup"><span data-stu-id="2c601-106">You are about toocreate a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want hello cluster toosurvive.</span></span> <span data-ttu-id="2c601-107">Par exemple, avez-vous besoin de lignes distinctes, ou les connexions Internet fourni des machines de toothese ?</span><span class="sxs-lookup"><span data-stu-id="2c601-107">For example, do you need separate power lines or Internet connections supplied toothese machines?</span></span> <span data-ttu-id="2c601-108">En outre, envisagez de sécurité physique de hello de ces ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="2c601-108">In addition, consider hello physical security of these machines.</span></span> <span data-ttu-id="2c601-109">Où sont trouvent les machines hello et qui a besoin d’accès toothem ?</span><span class="sxs-lookup"><span data-stu-id="2c601-109">Where are hello machines located and who needs access toothem?</span></span> <span data-ttu-id="2c601-110">Après avoir apporté ces décisions, vous pouvez logiquement mapper hello machines toohello différents domaines d’erreur (voir l’étape 4).</span><span class="sxs-lookup"><span data-stu-id="2c601-110">After you make these decisions, you can logically map hello machines toohello various fault domains (see Step 4).</span></span> <span data-ttu-id="2c601-111">planification pour les clusters de production de l’infrastructure Hello est plus complexe que pour les clusters de test.</span><span class="sxs-lookup"><span data-stu-id="2c601-111">hello infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-hello-machines-toomeet-hello-prerequisites"></a><span data-ttu-id="2c601-112">Étape 2 : Préparer hello machines toomeet conditions préalables de hello</span><span class="sxs-lookup"><span data-stu-id="2c601-112">Step 2: Prepare hello machines toomeet hello prerequisites</span></span>
<span data-ttu-id="2c601-113">Configuration requise pour chaque ordinateur que vous souhaitez tooadd toohello cluster :</span><span class="sxs-lookup"><span data-stu-id="2c601-113">Prerequisites for each machine that you want tooadd toohello cluster:</span></span>

* <span data-ttu-id="2c601-114">Un minimum de 16 Go de RAM est recommandé.</span><span class="sxs-lookup"><span data-stu-id="2c601-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="2c601-115">Un minimum de 40 Go d’espace disque disponible est recommandé.</span><span class="sxs-lookup"><span data-stu-id="2c601-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="2c601-116">Un processeur 4 cœurs ou plus est recommandé.</span><span class="sxs-lookup"><span data-stu-id="2c601-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="2c601-117">Connectivité tooa sécurisé ou les réseaux pour tous les ordinateurs.</span><span class="sxs-lookup"><span data-stu-id="2c601-117">Connectivity tooa secure network or networks for all machines.</span></span>
* <span data-ttu-id="2c601-118">Windows Server 2012 R2 ou Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="2c601-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="2c601-119">[.NET Framework 4.5.1 ou une version ultérieure](https://www.microsoft.com/download/details.aspx?id=40773), installation complète.</span><span class="sxs-lookup"><span data-stu-id="2c601-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="2c601-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="2c601-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="2c601-121">Hello [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) doit s’exécuter sur tous les ordinateurs hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-121">hello [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all hello machines.</span></span>

<span data-ttu-id="2c601-122">Hello déploiement et la configuration de cluster de hello l’administrateur de cluster doit avoir [des privilèges d’administrateur](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) sur chacun des ordinateurs de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-122">hello cluster administrator deploying and configuring hello cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of hello machines.</span></span> <span data-ttu-id="2c601-123">Vous ne pouvez pas installer Service Fabric sur un contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="2c601-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-hello-initial-cluster-size"></a><span data-ttu-id="2c601-124">Étape 3 : Déterminer la taille initiale du cluster de hello</span><span class="sxs-lookup"><span data-stu-id="2c601-124">Step 3: Determine hello initial cluster size</span></span>
<span data-ttu-id="2c601-125">Chaque nœud dans un cluster de Service Fabric autonomes a hello Service Fabric runtime déployé et qu’il est membre du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-125">Each node in a standalone Service Fabric cluster has hello Service Fabric runtime deployed and is a member of hello cluster.</span></span> <span data-ttu-id="2c601-126">Un déploiement de production type comprend un nœud par instance du système d’exploitation (physique ou virtuel).</span><span class="sxs-lookup"><span data-stu-id="2c601-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="2c601-127">taille de cluster Hello est déterminée par les besoins de votre entreprise.</span><span class="sxs-lookup"><span data-stu-id="2c601-127">hello cluster size is determined by your business needs.</span></span> <span data-ttu-id="2c601-128">Toutefois, vous devez disposer d’une taille minimale de cluster de trois nœuds (ordinateurs ou machines virtuelles).</span><span class="sxs-lookup"><span data-stu-id="2c601-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="2c601-129">À des fins de développement, vous pouvez avoir plusieurs nœuds sur un ordinateur donné.</span><span class="sxs-lookup"><span data-stu-id="2c601-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="2c601-130">Dans un environnement de production, Service Fabric ne prend en charge qu’un seul nœud par ordinateur physique ou virtuel.</span><span class="sxs-lookup"><span data-stu-id="2c601-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-hello-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="2c601-131">Étape 4 : Déterminer le nombre de hello de domaines d’erreur et domaines de mise à niveau</span><span class="sxs-lookup"><span data-stu-id="2c601-131">Step 4: Determine hello number of fault domains and upgrade domains</span></span>
<span data-ttu-id="2c601-132">A *domaine d’erreur* (DP) est une unité physique de l’échec et est directement lié, toohello l’infrastructure physique hello centres de données.</span><span class="sxs-lookup"><span data-stu-id="2c601-132">A *fault domain* (FD) is a physical unit of failure and is directly related toohello physical infrastructure in hello data centers.</span></span> <span data-ttu-id="2c601-133">Un domaine d’erreur est constitué de composants matériels (ordinateurs, commutateurs, réseaux, etc.) qui partagent un point de défaillance unique.</span><span class="sxs-lookup"><span data-stu-id="2c601-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="2c601-134">Bien qu’il n’existe aucun mappage 1:1 entre les domaines d’erreur et les racks, chaque rack peut être considéré au sens large comme un domaine d’erreur.</span><span class="sxs-lookup"><span data-stu-id="2c601-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="2c601-135">Lorsque vous envisagez de nœuds hello dans votre cluster, nous recommandons vivement que les nœuds hello distribuée entre au moins trois domaines d’erreur.</span><span class="sxs-lookup"><span data-stu-id="2c601-135">When considering hello nodes in your cluster, we strongly recommend that hello nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="2c601-136">Lorsque vous spécifiez des groupes dans le fichier ClusterConfig.json, vous pouvez choisir le nom hello pour chaque lecteur de disquette.</span><span class="sxs-lookup"><span data-stu-id="2c601-136">When you specify FDs in ClusterConfig.json, you can choose hello name for each FD.</span></span> <span data-ttu-id="2c601-137">Service Fabric prend en charge les domaines d’erreur hiérarchiques pour vous permettre d’y refléter votre topologie d’infrastructure.</span><span class="sxs-lookup"><span data-stu-id="2c601-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="2c601-138">Par exemple, hello suivant groupes est valide :</span><span class="sxs-lookup"><span data-stu-id="2c601-138">For example, hello following FDs are valid:</span></span>

* <span data-ttu-id="2c601-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span><span class="sxs-lookup"><span data-stu-id="2c601-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="2c601-140">"faultDomain": "fd:/FD1"</span><span class="sxs-lookup"><span data-stu-id="2c601-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="2c601-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span><span class="sxs-lookup"><span data-stu-id="2c601-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="2c601-142">Un *domaine de mise à niveau (UD)* est une unité logique de nœuds.</span><span class="sxs-lookup"><span data-stu-id="2c601-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="2c601-143">Pendant les mises à niveau de Service Fabric orchestrés (une mise à niveau de l’application ou une mise à niveau de cluster), tous les nœuds dans un UD sont mis hors service de la mise à niveau de tooperform hello tandis que les nœuds dans d’autres domaines d’erreur restent disponibles tooserve demandes.</span><span class="sxs-lookup"><span data-stu-id="2c601-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down tooperform hello upgrade while nodes in other UDs remain available tooserve requests.</span></span> <span data-ttu-id="2c601-144">Hello vous effectuez sur vos ordinateurs les mises à niveau du microprogramme n’honorent pas ces domaines d’erreur, vous devez les faire un ordinateur à la fois.</span><span class="sxs-lookup"><span data-stu-id="2c601-144">hello firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="2c601-145">Hello toothink de façon la plus simple à ces concepts est tooconsider mise en tant qu’unité hello d’échec non planifié et de domaines d’erreur en tant qu’unité hello de maintenance planifiée.</span><span class="sxs-lookup"><span data-stu-id="2c601-145">hello simplest way toothink about these concepts is tooconsider FDs as hello unit of unplanned failure and UDs as hello unit of planned maintenance.</span></span>

<span data-ttu-id="2c601-146">Lorsque vous spécifiez des domaines d’erreur dans le fichier ClusterConfig.json, vous pouvez choisir le nom hello pour chaque UD.</span><span class="sxs-lookup"><span data-stu-id="2c601-146">When you specify UDs in ClusterConfig.json, you can choose hello name for each UD.</span></span> <span data-ttu-id="2c601-147">Par exemple, hello suivant de noms est valide :</span><span class="sxs-lookup"><span data-stu-id="2c601-147">For example, hello following names are valid:</span></span>

* <span data-ttu-id="2c601-148">"upgradeDomain": "UD0"</span><span class="sxs-lookup"><span data-stu-id="2c601-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="2c601-149">"upgradeDomain": "UD1A"</span><span class="sxs-lookup"><span data-stu-id="2c601-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="2c601-150">"upgradeDomain": "DomainRed"</span><span class="sxs-lookup"><span data-stu-id="2c601-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="2c601-151">"upgradeDomain": "Blue"</span><span class="sxs-lookup"><span data-stu-id="2c601-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="2c601-152">Pour plus d’informations sur les domaines de mise à niveau et les domaines d’erreur, consultez [Description d’un cluster Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md) .</span><span class="sxs-lookup"><span data-stu-id="2c601-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-hello-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="2c601-153">Étape 5 : Téléchargez le package autonome de Service Fabric hello pour Windows Server</span><span class="sxs-lookup"><span data-stu-id="2c601-153">Step 5: Download hello Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="2c601-154">[Télécharger le lien - Package de Service Fabric autonomes - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) et décompressez le package de hello, soit déploiement tooa ordinateur ne fait pas partie du cluster de hello ou tooone d’ordinateurs hello qui feront partie de votre cluster.</span><span class="sxs-lookup"><span data-stu-id="2c601-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip hello package, either tooa deployment machine that is not part of hello cluster, or tooone of hello machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="2c601-155">Étape 6 : Modifier la configuration du cluster</span><span class="sxs-lookup"><span data-stu-id="2c601-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="2c601-156">toocreate un cluster autonome que vous avez toocreate un fichier autonome cluster configuration ClusterConfig.json qui décrit la spécification de hello du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-156">toocreate a standalone cluster you have toocreate a standalone cluster configuration ClusterConfig.json file, which describes hello specification of hello cluster.</span></span> <span data-ttu-id="2c601-157">Vous pouvez baser le fichier de configuration hello sur des modèles hello à hello lien ci-après.</span><span class="sxs-lookup"><span data-stu-id="2c601-157">You can base hello configuration file on hello templates found at hello below link.</span></span> <br><span data-ttu-id="2c601-158">
[Configurations de cluster autonome](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="2c601-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="2c601-159">Pour plus d’informations sur les sections hello dans ce fichier, consultez [paramètres de Configuration de cluster de Windows autonome](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="2c601-159">For details on hello sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="2c601-160">Un des fichiers de ClusterConfig.json hello ouvrir à partir du package hello que vous avez téléchargé et modifier hello suivant les paramètres :</span><span class="sxs-lookup"><span data-stu-id="2c601-160">Open one of hello ClusterConfig.json files from hello package you downloaded and modify hello following settings:</span></span>
| <span data-ttu-id="2c601-161">**Paramètres de configuration**</span><span class="sxs-lookup"><span data-stu-id="2c601-161">**Configuration Setting**</span></span> | <span data-ttu-id="2c601-162">**Description**</span><span class="sxs-lookup"><span data-stu-id="2c601-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="2c601-163">**NodeTypes**</span><span class="sxs-lookup"><span data-stu-id="2c601-163">**NodeTypes**</span></span> |<span data-ttu-id="2c601-164">Autorisent les types de nœuds vous tooseparate vos nœuds de cluster dans différents groupes.</span><span class="sxs-lookup"><span data-stu-id="2c601-164">Node types allow you tooseparate your cluster nodes into various groups.</span></span> <span data-ttu-id="2c601-165">Un cluster doit comprendre au moins un NodeType.</span><span class="sxs-lookup"><span data-stu-id="2c601-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="2c601-166">Tous les nœuds dans un groupe ont hello suivant des caractéristiques communes :</span><span class="sxs-lookup"><span data-stu-id="2c601-166">All nodes in a group have hello following common characteristics:</span></span> <br> <span data-ttu-id="2c601-167">**Nom** -Ceci est le nom de type de nœud de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-167">**Name** - This is hello node type name.</span></span> <br><span data-ttu-id="2c601-168">**Endpoints Ports** : il s’agit de différents points de terminaison (ports) nommés qui sont associés à ce type de nœud.</span><span class="sxs-lookup"><span data-stu-id="2c601-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="2c601-169">Vous pouvez utiliser n’importe quel numéro de port que vous le souhaitez, tant qu’ils ne sont pas en conflit avec rien d’autre dans ce manifeste et ne sont pas déjà en cours d’utilisation par une autre application en cours d’exécution sur la machine de hello/machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="2c601-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on hello machine/VM.</span></span> <br> <span data-ttu-id="2c601-170">**Propriétés de positionnement** -elles décrivent les propriétés pour ce type de nœud que vous utilisez en tant que contraintes de sélection élective pour les services système hello ou vos services.</span><span class="sxs-lookup"><span data-stu-id="2c601-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for hello system services or your services.</span></span> <span data-ttu-id="2c601-171">Ces propriétés sont des paires clé/valeur définies par l’utilisateur qui fournissent des métadonnées supplémentaires pour un nœud donné.</span><span class="sxs-lookup"><span data-stu-id="2c601-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="2c601-172">Exemples de propriétés de nœud serait indique si le nœud de hello a un disque dur ou la carte graphique, le nombre de hello de piles dans son disque dur, les cœurs et autres propriétés physiques.</span><span class="sxs-lookup"><span data-stu-id="2c601-172">Examples of node properties would be whether hello node has a hard drive or graphics card, hello number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="2c601-173">**Capacités** -définissent les capacités de nœud nom de hello et la quantité d’une ressource spécifique qu’un nœud particulier est disponible pour la consommation.</span><span class="sxs-lookup"><span data-stu-id="2c601-173">**Capacities** - Node capacities define hello name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="2c601-174">Par exemple, un nœud peut définir qu’il possède la capacité pour une mesure appelée « MemoryInMb » et qu’il dispose de 2 048 Mo de mémoire disponible par défaut.</span><span class="sxs-lookup"><span data-stu-id="2c601-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="2c601-175">Ces capacités sont utilisées au tooensure runtime que les services qui nécessitent une quantité spécifique de ressources placés sur les nœuds de hello qu’aient les ressources disponibles dans hello requis quantités.</span><span class="sxs-lookup"><span data-stu-id="2c601-175">These capacities are used at runtime tooensure that services that require particular amounts of resources are placed on hello nodes that have those resources available in hello required amounts.</span></span><br><span data-ttu-id="2c601-176">**IsPrimary** : Si vous avez plusieurs NodeType défini Assurez-vous que seul est tooprimary avec la valeur de hello *true*, emplacements où les services de système de hello exécuter.</span><span class="sxs-lookup"><span data-stu-id="2c601-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set tooprimary with hello value *true*, which is where hello system services run.</span></span> <span data-ttu-id="2c601-177">Valeur de toohello doivent être définis à tous les autres types de nœud *false*</span><span class="sxs-lookup"><span data-stu-id="2c601-177">All other node types should be set toohello value *false*</span></span> |
| <span data-ttu-id="2c601-178">**Nœuds**</span><span class="sxs-lookup"><span data-stu-id="2c601-178">**Nodes**</span></span> |<span data-ttu-id="2c601-179">Voici les détails de hello pour chacun des nœuds hello qui font partie du cluster hello (type de nœud, nom de nœud, IP adresse, domaine d’erreur et domaine de mise à niveau du nœud de hello).</span><span class="sxs-lookup"><span data-stu-id="2c601-179">These are hello details for each of hello nodes that are part of hello cluster (node type, node name, IP address, fault domain, and upgrade domain of hello node).</span></span> <span data-ttu-id="2c601-180">les machines Hello souhaité hello toobe de cluster créé sur toobe besoin répertorié ici avec leurs adresses IP.</span><span class="sxs-lookup"><span data-stu-id="2c601-180">hello machines you want hello cluster toobe created on need toobe listed here with their IP addresses.</span></span> <br> <span data-ttu-id="2c601-181">Si vous utilisez hello même adresse IP pour tous les nœuds de hello, puis d’un cluster d’une zone est créée, vous pouvez utiliser à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="2c601-181">If you use hello same IP address for all hello nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="2c601-182">N’utilisez pas les clusters à boîtier unique pour le déploiement de charges de travail de production.</span><span class="sxs-lookup"><span data-stu-id="2c601-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="2c601-183">Une fois la configuration du cluster hello a un environnement de toohello tous les paramètres configurés, il peut être testé par rapport à l’environnement de cluster hello (étape 7).</span><span class="sxs-lookup"><span data-stu-id="2c601-183">After hello cluster configuration has had all settings configured toohello environment, it can be tested against hello cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="2c601-184">Étape 7.</span><span class="sxs-lookup"><span data-stu-id="2c601-184">Step 7.</span></span> <span data-ttu-id="2c601-185">Configuration de l’environnement</span><span class="sxs-lookup"><span data-stu-id="2c601-185">Environment setup</span></span>

<span data-ttu-id="2c601-186">Lorsqu’un administrateur de cluster configure un cluster autonome de Service Fabric, hello environnement est besoins toobe configuré avec hello suivant des critères :</span><span class="sxs-lookup"><span data-stu-id="2c601-186">When a cluster administrator configures a Service Fabric standalone cluster, hello environment is needs toobe set up with hello following criteria:</span></span> <br>
1. <span data-ttu-id="2c601-187">utilisateur Hello création hello cluster doit avoir la sécurité au niveau de l’administrateur des privilèges tooall machines qui sont répertoriés en tant que nœuds dans le fichier de configuration de cluster hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-187">hello user creating hello cluster should have administrator-level security privileges tooall machines that are listed as nodes in hello cluster configuration file.</span></span>
2. <span data-ttu-id="2c601-188">Ordinateur à partir de quels hello cluster est créé, ainsi que chaque ordinateur nœud de cluster doit :</span><span class="sxs-lookup"><span data-stu-id="2c601-188">Machine from which hello cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="2c601-189">le Kit de développement logiciel (SDK) Service Fabric doit être désinstallé ;</span><span class="sxs-lookup"><span data-stu-id="2c601-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="2c601-190">le runtime Service Fabric doit être désinstallé ;</span><span class="sxs-lookup"><span data-stu-id="2c601-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="2c601-191">Avez hello service de pare-feu Windows (mpssvc) activé</span><span class="sxs-lookup"><span data-stu-id="2c601-191">Have hello Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="2c601-192">Hello Service Registre distant (remoteregistry) avez activé</span><span class="sxs-lookup"><span data-stu-id="2c601-192">Have hello Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="2c601-193">le partage de fichiers (SMB) doit être activé ;</span><span class="sxs-lookup"><span data-stu-id="2c601-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="2c601-194">les ports requis doivent être ouverts, selon les ports de configuration du cluster ;</span><span class="sxs-lookup"><span data-stu-id="2c601-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="2c601-195">les ports requis doivent êtres ouverts pour le service Registre distant et SMB Windows : 135, 137, 138, 139 et 445 ;</span><span class="sxs-lookup"><span data-stu-id="2c601-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="2c601-196">Ont tooone de connectivité réseau une autre</span><span class="sxs-lookup"><span data-stu-id="2c601-196">Have network connectivity tooone another</span></span>
3. <span data-ttu-id="2c601-197">Aucun des ordinateurs hello du nœud de cluster doit être un contrôleur de domaine.</span><span class="sxs-lookup"><span data-stu-id="2c601-197">None of hello cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="2c601-198">Si toobe de cluster hello déployé est un cluster sécurisé, valider sécurité hello conditions préalables sont en place et sont correctement configurés sur la configuration de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-198">If hello cluster toobe deployed is a secure cluster, validate hello necessary security prerequisites are in place, and are configured correctly against hello configuration.</span></span>
5. <span data-ttu-id="2c601-199">Si les ordinateurs du cluster hello ne sont pas accessibles sur internet, qui suit hello ensemble dans hello configuration du cluster :</span><span class="sxs-lookup"><span data-stu-id="2c601-199">If hello cluster machines are not internet-accessible, set hello following in hello cluster configuration:</span></span>
* <span data-ttu-id="2c601-200">Désactiver la télémétrie : sous *Propriétés*, définissez *« enableTelemetry » : false*</span><span class="sxs-lookup"><span data-stu-id="2c601-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="2c601-201">Désactiver automatique de téléchargement de version de l’ensemble fibre optique & de cette version du cluster actuel hello est proche de sa fin de prise en charge des notifications : sous *propriétés* définir *« fabricClusterAutoupgradeEnabled » : false*</span><span class="sxs-lookup"><span data-stu-id="2c601-201">Disable automatic Fabric version downloading & notifications that hello current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="2c601-202">Vous pouvez également si l’accès à internet de réseau est toowhite dans la liste des domaines limités, les domaines hello ci-dessous sont requis pour la mise à niveau automatique : go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="2c601-202">Alternatively if network internet access is limited toowhite-listed domains, hello domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="2c601-203">Définissez les exclusions antivirus Service Fabric appropriées :</span><span class="sxs-lookup"><span data-stu-id="2c601-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="2c601-204">**Répertoires exclus de l’antivirus**</span><span class="sxs-lookup"><span data-stu-id="2c601-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="2c601-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2c601-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="2c601-206">FabricDataRoot (dans la configuration du cluster)</span><span class="sxs-lookup"><span data-stu-id="2c601-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="2c601-207">FabricLogRoot (dans la configuration du cluster)</span><span class="sxs-lookup"><span data-stu-id="2c601-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="2c601-208">**Processus exclus de l’antivirus**</span><span class="sxs-lookup"><span data-stu-id="2c601-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="2c601-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-209">Fabric.exe</span></span> |
| <span data-ttu-id="2c601-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-210">FabricHost.exe</span></span> |
| <span data-ttu-id="2c601-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="2c601-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="2c601-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="2c601-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="2c601-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="2c601-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="2c601-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="2c601-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="2c601-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-219">FabricRM.exe</span></span> |
| <span data-ttu-id="2c601-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="2c601-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="2c601-221">Étape 8 :</span><span class="sxs-lookup"><span data-stu-id="2c601-221">Step 8.</span></span> <span data-ttu-id="2c601-222">Valider l’environnement à l’aide du script TestConfiguration</span><span class="sxs-lookup"><span data-stu-id="2c601-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="2c601-223">Vous trouverez Hello TestConfiguration.ps1 script dans le package autonome de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-223">hello TestConfiguration.ps1 script can be found in hello standalone package.</span></span> <span data-ttu-id="2c601-224">Il est utilisé comme un toovalidate Best Practices Analyzer, certains des critères hello ci-dessus et doit être utilisé comme un toovalidate de vérification de validité si un cluster peut être déployé sur un environnement donné.</span><span class="sxs-lookup"><span data-stu-id="2c601-224">It is used as a Best Practices Analyzer toovalidate some of hello criteria above and should be used as a sanity check toovalidate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="2c601-225">S’il existe une défaillance, consultez la liste toohello sous [configuration de l’environnement](service-fabric-cluster-standalone-deployment-preparation.md) pour le dépannage.</span><span class="sxs-lookup"><span data-stu-id="2c601-225">If there is any failure, refer toohello list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="2c601-226">Ce script peut être exécuté sur n’importe quel ordinateur qui a accès tooall hello machines d’administrateur sont répertoriés en tant que nœuds dans le fichier de configuration de cluster hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-226">This script can be run on any machine that has administrator access tooall hello machines that are listed as nodes in hello cluster configuration file.</span></span> <span data-ttu-id="2c601-227">ordinateur Hello ce script s’exécute n’a pas de partie toobe du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="2c601-227">hello machine that this script is run on does not have toobe part of hello cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written tooexisting trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="2c601-228">Actuellement ce module de test de configuration ne valide pas la configuration de sécurité hello par conséquent, il a toobe fait indépendamment.</span><span class="sxs-lookup"><span data-stu-id="2c601-228">Currently this configuration testing module does not validate hello security configuration so this has toobe done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="2c601-229">Nous en permanence apportons des améliorations toomake ce module plus robuste, par conséquent, s’il existe un défectueux ou manquant casse, ce qui vous pensez n’est pas actuellement interceptée par TestConfiguration, faites-le nous savoir via notre [prennent en charge des canaux](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="2c601-229">We are continually making improvements toomake this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="2c601-230">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="2c601-230">Next steps</span></span>
* [<span data-ttu-id="2c601-231">Créer un cluster autonome s’exécutant sur Windows Server</span><span class="sxs-lookup"><span data-stu-id="2c601-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)
