---
title: aaaConnect et communiquer avec les services dans Azure Service Fabric | Documents Microsoft
description: "Découvrez comment tooresolve, se connecter et communiquer avec les services dans l’infrastructure de Service."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: msfussell
ms.assetid: 7d1052ec-2c9f-443d-8b99-b75c97266e6c
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 5/9/2017
ms.author: vturecek
ms.openlocfilehash: b8b374a71d4c5d21f48a560a3a8c81b357fe418d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="connect-and-communicate-with-services-in-service-fabric"></a><span data-ttu-id="f87bd-103">Se connecter aux services et communiquer avec eux dans Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="f87bd-103">Connect and communicate with services in Service Fabric</span></span>
<span data-ttu-id="f87bd-104">Dans Service Fabric, un service s’exécute quelque part dans un cluster Service Fabric, généralement réparti sur plusieurs machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="f87bd-104">In Service Fabric, a service runs somewhere in a Service Fabric cluster, typically distributed across multiple VMs.</span></span> <span data-ttu-id="f87bd-105">Elle peut être déplacée à partir d’un seul emplacement tooanother, soit par le propriétaire du service hello, ou automatiquement par l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="f87bd-105">It can be moved from one place tooanother, either by hello service owner, or automatically by Service Fabric.</span></span> <span data-ttu-id="f87bd-106">Les services ne sont pas un ordinateur particulier tooa statiquement liée ou l’adresse.</span><span class="sxs-lookup"><span data-stu-id="f87bd-106">Services are not statically tied tooa particular machine or address.</span></span>

<span data-ttu-id="f87bd-107">Une application Service Fabric est généralement composée de nombreux services différents qui effectuent chacun une tâche spécialisée.</span><span class="sxs-lookup"><span data-stu-id="f87bd-107">A Service Fabric application is generally composed of many different services, where each service performs a specialized task.</span></span> <span data-ttu-id="f87bd-108">Ces services peuvent communiquer avec eux tooform une fonction complète, telles que les différentes parties de rendu d’une application web.</span><span class="sxs-lookup"><span data-stu-id="f87bd-108">These services may communicate with each other tooform a complete function, such as rendering different parts of a web application.</span></span> <span data-ttu-id="f87bd-109">Il existe également des applications qui se connectent tooand communiquent avec les services de client.</span><span class="sxs-lookup"><span data-stu-id="f87bd-109">There are also client applications that connect tooand communicate with services.</span></span> <span data-ttu-id="f87bd-110">Ce document explique comment tooset la communication avec et entre vos services dans l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="f87bd-110">This document discusses how tooset up communication with and between your services in Service Fabric.</span></span>

<span data-ttu-id="f87bd-111">Cette vidéo Microsoft Virtual Academy aborde également la communication de service :<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=iYFCk76yC_6706218965"></span><span class="sxs-lookup"><span data-stu-id="f87bd-111">This Microsoft Virtual Academy video also discusses service communication: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=iYFCk76yC_6706218965"></span></span>  
<img src="./media/service-fabric-connect-and-communicate-with-services/CommunicationVid.png" WIDTH="360" HEIGHT="244">  
</a></center>

## <a name="bring-your-own-protocol"></a><span data-ttu-id="f87bd-112">Apportez votre propre protocole</span><span class="sxs-lookup"><span data-stu-id="f87bd-112">Bring your own protocol</span></span>
<span data-ttu-id="f87bd-113">L’infrastructure de service vous permet de gérer des hello du cycle de vie de vos services, mais il n’apporte décisions sur le rôle de vos services.</span><span class="sxs-lookup"><span data-stu-id="f87bd-113">Service Fabric helps manage hello lifecycle of your services but it does not make decisions about what your services do.</span></span> <span data-ttu-id="f87bd-114">Cela inclut la communication.</span><span class="sxs-lookup"><span data-stu-id="f87bd-114">This includes communication.</span></span> <span data-ttu-id="f87bd-115">Lorsque votre service est ouvert par l’infrastructure de Service, qui est tooset d’opportunité de votre service un point de terminaison pour les demandes entrantes, à l’aide de toute pile de communication ou de protocole souhaité.</span><span class="sxs-lookup"><span data-stu-id="f87bd-115">When your service is opened by Service Fabric, that's your service's opportunity tooset up an endpoint for incoming requests, using whatever protocol or communication stack you want.</span></span> <span data-ttu-id="f87bd-116">Votre service écoute sur une adresse **IP:port** normale à l’aide d’un schéma d’adressage quelconque, tel qu’un URI.</span><span class="sxs-lookup"><span data-stu-id="f87bd-116">Your service will listen on a normal **IP:port** address using any addressing scheme, such as a URI.</span></span> <span data-ttu-id="f87bd-117">Plusieurs instances de service ou les réplicas peuvent partager un processus hôte, auquel cas ils seront devez toouse des ports différents ou utilisent un mécanisme de partage de ports, tels que des pilotes de noyau http.sys hello dans Windows.</span><span class="sxs-lookup"><span data-stu-id="f87bd-117">Multiple service instances or replicas may share a host process, in which case they will either need toouse different ports or use a port-sharing mechanism, such as hello http.sys kernel driver in Windows.</span></span> <span data-ttu-id="f87bd-118">Dans les deux cas, chaque instance de service ou réplica dans un processus hôte doit être adressable de manière unique.</span><span class="sxs-lookup"><span data-stu-id="f87bd-118">In either case, each service instance or replica in a host process must be uniquely addressable.</span></span>

![points de terminaison de service][1]

## <a name="service-discovery-and-resolution"></a><span data-ttu-id="f87bd-120">Détection et résolution de service</span><span class="sxs-lookup"><span data-stu-id="f87bd-120">Service discovery and resolution</span></span>
<span data-ttu-id="f87bd-121">Dans un système distribué, les services peuvent déplacer à partir d’un ordinateur tooanother au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="f87bd-121">In a distributed system, services may move from one machine tooanother over time.</span></span> <span data-ttu-id="f87bd-122">Cela peut se produire pour diverses raisons, y compris l’équilibrage des ressources, les mises à niveau, les basculements ou l’augmentation des tailles des instances. Cela signifie que de modifier les adresses de point de terminaison de service comme service de hello déplace toonodes avec des adresses IP différentes et peut s’ouvrir sur des ports différents, si le service de hello utilise un port sélectionné de manière dynamique.</span><span class="sxs-lookup"><span data-stu-id="f87bd-122">This can happen for various reasons, including resource balancing, upgrades, failovers, or scale-out. This means service endpoint addresses change as hello service moves toonodes with different IP addresses, and may open on different ports if hello service uses a dynamically selected port.</span></span>

![Répartition des services][7]

<span data-ttu-id="f87bd-124">L’infrastructure de service fournit une découverte et la résolution de service appelé hello Naming Service.</span><span class="sxs-lookup"><span data-stu-id="f87bd-124">Service Fabric provides a discovery and resolution service called hello Naming Service.</span></span> <span data-ttu-id="f87bd-125">Hello Naming Service conserve une table qui mappe nommés instances de service ils écoutent des adresses de point de terminaison toohello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-125">hello Naming Service maintains a table that maps named service instances toohello endpoint addresses they listen on.</span></span> <span data-ttu-id="f87bd-126">Toutes les instances de service nommées dans Service Fabric ont des noms uniques représentés par les URI. Par exemple : `"fabric:/MyApplication/MyService"`.</span><span class="sxs-lookup"><span data-stu-id="f87bd-126">All named service instances in Service Fabric have unique names represented as URIs, for example, `"fabric:/MyApplication/MyService"`.</span></span> <span data-ttu-id="f87bd-127">nom de Hello du service de hello ne change pas sur la durée de vie hello du service de hello, seules les adresses de point de terminaison hello qui peuvent changer lorsque vous déplacement des services.</span><span class="sxs-lookup"><span data-stu-id="f87bd-127">hello name of hello service does not change over hello lifetime of hello service, it's only hello endpoint addresses that can change when services move.</span></span> <span data-ttu-id="f87bd-128">Il s’agit de toowebsites analogue qui ont des URL constants, mais où l’adresse IP de hello peut changer.</span><span class="sxs-lookup"><span data-stu-id="f87bd-128">This is analogous toowebsites that have constant URLs but where hello IP address may change.</span></span> <span data-ttu-id="f87bd-129">Et tooDNS similaires sur web hello, qui résout les adresses de tooIP URL de site Web, Service Fabric a un bureau d’enregistrement qui mappe l’adresse de point de terminaison de service noms tootheir.</span><span class="sxs-lookup"><span data-stu-id="f87bd-129">And similar tooDNS on hello web, which resolves website URLs tooIP addresses, Service Fabric has a registrar that maps service names tootheir endpoint address.</span></span>

![points de terminaison de service][2]

<span data-ttu-id="f87bd-131">Résolution et la connexion tooservices implique hello s’exécuter dans une boucle comme suit :</span><span class="sxs-lookup"><span data-stu-id="f87bd-131">Resolving and connecting tooservices involves hello following steps run in a loop:</span></span>

* <span data-ttu-id="f87bd-132">**Résoudre**: point de terminaison Get hello un service publié à partir de hello Naming Service.</span><span class="sxs-lookup"><span data-stu-id="f87bd-132">**Resolve**: Get hello endpoint that a service has published from hello Naming Service.</span></span>
* <span data-ttu-id="f87bd-133">**Se connecter**: se connecter toohello service sur tout ce qui les utilise sur ce point de terminaison de protocole.</span><span class="sxs-lookup"><span data-stu-id="f87bd-133">**Connect**: Connect toohello service over whatever protocol it uses on that endpoint.</span></span>
* <span data-ttu-id="f87bd-134">**Recommencez**: une tentative de connexion peut échouer pour plusieurs raisons, par exemple, si le service de hello a été déplacé, car l’adresse du point de terminaison hello hello dernière heure a été résolu.</span><span class="sxs-lookup"><span data-stu-id="f87bd-134">**Retry**: A connection attempt may fail for any number of reasons, for example if hello service has moved since hello last time hello endpoint address was resolved.</span></span> <span data-ttu-id="f87bd-135">Dans ce cas, hello précédant la résolution et connectez-vous étapes doivent toobe retentée, et ce cycle se répète jusqu'à ce que la connexion de hello réussit.</span><span class="sxs-lookup"><span data-stu-id="f87bd-135">In that case, hello preceding resolve and connect steps need toobe retried, and this cycle is repeated until hello connection succeeds.</span></span>

## <a name="connecting-tooother-services"></a><span data-ttu-id="f87bd-136">Connecter les services tooother</span><span class="sxs-lookup"><span data-stu-id="f87bd-136">Connecting tooother services</span></span>
<span data-ttu-id="f87bd-137">Services connexion tooeach autres à l’intérieur d’un cluster généralement pouvez accéder directement aux points de terminaison hello d’autres services hello les nœuds dans un cluster étant sur hello même réseau local.</span><span class="sxs-lookup"><span data-stu-id="f87bd-137">Services connecting tooeach other inside a cluster generally can directly access hello endpoints of other services because hello nodes in a cluster are on hello same local network.</span></span> <span data-ttu-id="f87bd-138">toomake est tooconnect plus facilement entre les services, Service Fabric fournit des services supplémentaires qui utilisent hello Naming Service.</span><span class="sxs-lookup"><span data-stu-id="f87bd-138">toomake is easier tooconnect between services, Service Fabric provides additional services that use hello Naming Service.</span></span> <span data-ttu-id="f87bd-139">un service DNS et un service de proxy inverse.</span><span class="sxs-lookup"><span data-stu-id="f87bd-139">A DNS service and a reverse proxy service.</span></span>


### <a name="dns-service"></a><span data-ttu-id="f87bd-140">Service DNS</span><span class="sxs-lookup"><span data-stu-id="f87bd-140">DNS service</span></span>
<span data-ttu-id="f87bd-141">Étant donné que de nombreux services, en particulier en conteneur services, peuvent avoir un nom d’URL existant, qui est en mesure de tooresolve à l’aide de hello protocole DNS standard (plutôt que hello Naming Service protocol) sont très pratiques, en particulier dans l’application « de courbes d’élévation et MAJ » scénarios.</span><span class="sxs-lookup"><span data-stu-id="f87bd-141">Since many services, especially containerized services, can have an existing URL name, being able tooresolve these using hello standard DNS protocol (rather than hello Naming Service protocol) is very convenient, especially in application "lift and shift" scenarios.</span></span> <span data-ttu-id="f87bd-142">C’est exactement quel service DNS hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-142">This is exactly what hello DNS service does.</span></span> <span data-ttu-id="f87bd-143">Il permet de vous toomap noms tooa service nom DNS et donc résoudre les adresses IP de point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="f87bd-143">It enables you toomap DNS names tooa service name and hence resolve endpoint IP addresses.</span></span> 

<span data-ttu-id="f87bd-144">Comme indiqué dans hello diagramme suivant, hello service DNS, en cours d’exécution dans le cluster Service Fabric de hello, mappe les noms de tooservice de noms DNS qui sont alors résolus en adresses hello Naming Service tooreturn hello point de terminaison tooconnect à.</span><span class="sxs-lookup"><span data-stu-id="f87bd-144">As shown in hello following diagram, hello DNS service, running in hello Service Fabric cluster, maps DNS names tooservice names which are then resolved by hello Naming Service tooreturn hello endpoint addresses tooconnect to.</span></span> <span data-ttu-id="f87bd-145">nom DNS de Hello pour le service de hello est fournie au moment de la création de hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-145">hello DNS name for hello service is provided at hello time of creation.</span></span> 

![points de terminaison de service][9]

<span data-ttu-id="f87bd-147">Pour plus d’informations sur comment toouse hello service DNS voir [service DNS dans Azure Service Fabric](service-fabric-dnsservice.md) l’article.</span><span class="sxs-lookup"><span data-stu-id="f87bd-147">For more details on how toouse hello DNS service see [DNS service in Azure Service Fabric](service-fabric-dnsservice.md) article.</span></span>

### <a name="reverse-proxy-service"></a><span data-ttu-id="f87bd-148">Service de proxy inverse</span><span class="sxs-lookup"><span data-stu-id="f87bd-148">Reverse proxy service</span></span>
<span data-ttu-id="f87bd-149">les adresses de proxy inverse de Hello services cluster hello qui expose les points de terminaison HTTP, y compris le protocole HTTPS.</span><span class="sxs-lookup"><span data-stu-id="f87bd-149">hello reverse proxy addresses services in hello cluster that exposes HTTP endpoints including HTTPS.</span></span> <span data-ttu-id="f87bd-150">proxy inverse de Hello simplifie considérablement l’appeler d’autres services et leurs méthodes en ayant spécifique à un format d’URI et handles hello résoudre, se connecter, les étapes de nouvelles tentatives requises pour toocommunicate un service avec un autre à l’aide de hello transmet au service d’affectation de noms.</span><span class="sxs-lookup"><span data-stu-id="f87bd-150">hello reverse proxy greatly simplifies calling other services and their methods by having a specific URI format and handles hello resolve, connect, retry steps required for one service toocommunicate with another using hello Naming Serivce.</span></span> <span data-ttu-id="f87bd-151">En d’autres termes, elle masque hello Service d’affectation de noms vous lors de l’appel d’autres services en ce qui en fait aussi simple que l’appel d’une URL.</span><span class="sxs-lookup"><span data-stu-id="f87bd-151">In other words, it hides hello Naming Service from you when calling other services by making this as simple as calling a URL.</span></span>

![points de terminaison de service][10]

<span data-ttu-id="f87bd-153">Pour plus d’informations sur comment toouse hello inverser le service de proxy, consultez [proxy dans Azure Service Fabric inverse](service-fabric-reverseproxy.md) l’article.</span><span class="sxs-lookup"><span data-stu-id="f87bd-153">For more details on how toouse hello reverse proxy service see [Reverse proxy in Azure Service Fabric](service-fabric-reverseproxy.md) article.</span></span>

## <a name="connections-from-external-clients"></a><span data-ttu-id="f87bd-154">Connexions des clients externes</span><span class="sxs-lookup"><span data-stu-id="f87bd-154">Connections from external clients</span></span>
<span data-ttu-id="f87bd-155">Services connexion tooeach autres à l’intérieur d’un cluster généralement pouvez accéder directement aux points de terminaison hello d’autres services hello les nœuds dans un cluster étant sur hello même réseau local.</span><span class="sxs-lookup"><span data-stu-id="f87bd-155">Services connecting tooeach other inside a cluster generally can directly access hello endpoints of other services because hello nodes in a cluster are on hello same local network.</span></span> <span data-ttu-id="f87bd-156">Cependant, dans certains environnements, un cluster peut se trouver derrière un équilibrage de charge. Celui-ci achemine le trafic d’entrée externe à travers un ensemble limité de ports.</span><span class="sxs-lookup"><span data-stu-id="f87bd-156">In some environments, however, a cluster may be behind a load balancer that routes external ingress traffic through a limited set of ports.</span></span> <span data-ttu-id="f87bd-157">Dans ces cas, les services peuvent toujours communiquer entre eux et résoudre les adresses à l’aide de hello d’affectation de noms de Service, mais des étapes supplémentaires doivent être prises tooallow les clients externes tooconnect tooservices.</span><span class="sxs-lookup"><span data-stu-id="f87bd-157">In these cases, services can still communicate with each other and resolve addresses using hello Naming Service, but extra steps must be taken tooallow external clients tooconnect tooservices.</span></span>

## <a name="service-fabric-in-azure"></a><span data-ttu-id="f87bd-158">Service Fabric dans Azure</span><span class="sxs-lookup"><span data-stu-id="f87bd-158">Service Fabric in Azure</span></span>
<span data-ttu-id="f87bd-159">Un cluster Service Fabric dans Azure est placé derrière un équilibrage de charge Azure.</span><span class="sxs-lookup"><span data-stu-id="f87bd-159">A Service Fabric cluster in Azure is placed behind an Azure Load Balancer.</span></span> <span data-ttu-id="f87bd-160">Tous les clusters de toohello trafic externe doit traverser d’équilibrage de charge hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-160">All external traffic toohello cluster must pass through hello load balancer.</span></span> <span data-ttu-id="f87bd-161">Hello équilibrage de charge automatiquement transfère le trafic entrant sur un port donné de tooa aléatoire *nœud* qui a hello ouvrir le même port.</span><span class="sxs-lookup"><span data-stu-id="f87bd-161">hello load balancer will automatically forward traffic inbound on a given port tooa random *node* that has hello same port open.</span></span> <span data-ttu-id="f87bd-162">Hello équilibrage de charge Azure ne reconnaît que les ports ouverts sur hello *nœuds*, il ne connaît pas ouvrir les ports par personne *services*.</span><span class="sxs-lookup"><span data-stu-id="f87bd-162">hello Azure Load Balancer only knows about ports open on hello *nodes*, it does not know about ports open by individual *services*.</span></span>

![Topologie d’équilibrage de charge Azure et de Service Fabric][3]

<span data-ttu-id="f87bd-164">Par exemple, dans l’ordre tooaccept externe du trafic sur le port **80**, hello suit les éléments doit être configuré :</span><span class="sxs-lookup"><span data-stu-id="f87bd-164">For example, in order tooaccept external traffic on port **80**, hello following things must be configured:</span></span>

1. <span data-ttu-id="f87bd-165">Écrivez un service qui écoute sur le port 80.</span><span class="sxs-lookup"><span data-stu-id="f87bd-165">Write a service that listens on port 80.</span></span> <span data-ttu-id="f87bd-166">Configurer le port 80 dans ServiceManifest.xml du service hello et ouvrir un écouteur service hello, par exemple, un serveur web auto-hébergé.</span><span class="sxs-lookup"><span data-stu-id="f87bd-166">Configure port 80 in hello service's ServiceManifest.xml and open a listener in hello service, for example, a self-hosted web server.</span></span>

    ```xml
    <Resources>
        <Endpoints>
            <Endpoint Name="WebEndpoint" Protocol="http" Port="80" />
        </Endpoints>
    </Resources>
    ```
    ```csharp
        class HttpCommunicationListener : ICommunicationListener
        {
            ...

            public Task<string> OpenAsync(CancellationToken cancellationToken)
            {
                EndpointResourceDescription endpoint =
                    serviceContext.CodePackageActivationContext.GetEndpoint("WebEndpoint");

                string uriPrefix = $"{endpoint.Protocol}://+:{endpoint.Port}/myapp/";

                this.httpListener = new HttpListener();
                this.httpListener.Prefixes.Add(uriPrefix);
                this.httpListener.Start();

                string publishUri = uriPrefix.Replace("+", FabricRuntime.GetNodeContext().IPAddressOrFQDN);
                return Task.FromResult(publishUri);
            }

            ...
        }

        class WebService : StatelessService
        {
            ...

            protected override IEnumerable<ServiceInstanceListener> CreateServiceInstanceListeners()
            {
                return new[] { new ServiceInstanceListener(context => new HttpCommunicationListener(context))};
            }

            ...
        }
    ```
    ```java
        class HttpCommunicationlistener implements CommunicationListener {
            ...

            @Override
            public CompletableFuture<String> openAsync(CancellationToken arg0) {
                EndpointResourceDescription endpoint =
                    this.serviceContext.getCodePackageActivationContext().getEndpoint("WebEndpoint");
                try {
                    HttpServer server = com.sun.net.httpserver.HttpServer.create(new InetSocketAddress(endpoint.getPort()), 0);
                    server.start();

                    String publishUri = String.format("http://%s:%d/",
                        this.serviceContext.getNodeContext().getIpAddressOrFQDN(), endpoint.getPort());
                    return CompletableFuture.completedFuture(publishUri);
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }

            ...
        }

        class WebService extends StatelessService {
            ...

            @Override
            protected List<ServiceInstanceListener> createServiceInstanceListeners() {
                <ServiceInstanceListener> listeners = new ArrayList<ServiceInstanceListener>();
                listeners.add(new ServiceInstanceListener((context) -> new HttpCommunicationlistener(context)));
                return listeners;       
            }

            ...
        }
    ```
2. <span data-ttu-id="f87bd-167">Créer un Cluster Service Fabric dans Azure et spécifier le port **80** comme un port de point de terminaison personnalisé pour le type de nœud hello qui hébergera le service de hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-167">Create a Service Fabric Cluster in Azure and specify port **80** as a custom endpoint port for hello node type that will host hello service.</span></span> <span data-ttu-id="f87bd-168">Si vous avez plusieurs types de nœud, vous pouvez configurer un *contrainte de placement* sur hello tooensure de service qu’il s’exécute uniquement sur le type de nœud hello qui a le port du point de terminaison personnalisé hello ouvert.</span><span class="sxs-lookup"><span data-stu-id="f87bd-168">If you have more than one node type, you can set up a *placement constraint* on hello service tooensure it only runs on hello node type that has hello custom endpoint port opened.</span></span>

    ![Ouvrir un port sur un type de nœud][4]
3. <span data-ttu-id="f87bd-170">Une fois que le cluster de hello a été créé, configurez hello équilibrage de charge Azure dans le trafic tooforward de groupe de ressources du cluster hello sur le port 80.</span><span class="sxs-lookup"><span data-stu-id="f87bd-170">Once hello cluster has been created, configure hello Azure Load Balancer in hello cluster's Resource Group tooforward traffic on port 80.</span></span> <span data-ttu-id="f87bd-171">Lorsque vous créez un cluster via hello portail Azure, il est configuré automatiquement pour chaque port de point de terminaison personnalisé qui a été configuré.</span><span class="sxs-lookup"><span data-stu-id="f87bd-171">When creating a cluster through hello Azure portal, this is set up automatically for each custom endpoint port that was configured.</span></span>

    ![Transférer le trafic Bonjour équilibrage de charge Azure][5]
4. <span data-ttu-id="f87bd-173">Hello, utilisations d’équilibrage de charge Azure un toodetermine sonde si ou toosend pas le trafic de nœud particulier de tooa.</span><span class="sxs-lookup"><span data-stu-id="f87bd-173">hello Azure Load Balancer uses a probe toodetermine whether or not toosend traffic tooa particular node.</span></span> <span data-ttu-id="f87bd-174">Hello sonde vérifie périodiquement un point de terminaison sur chaque toodetermine nœud répondent ou non les nœud hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-174">hello probe periodically checks an endpoint on each node toodetermine whether or not hello node is responding.</span></span> <span data-ttu-id="f87bd-175">En cas de sonde de hello tooreceive une réponse après un nombre de fois configuré, équilibrage de charge hello cesse d’envoyer de nœud toothat de trafic.</span><span class="sxs-lookup"><span data-stu-id="f87bd-175">If hello probe fails tooreceive a response after a configured number of times, hello load balancer stops sending traffic toothat node.</span></span> <span data-ttu-id="f87bd-176">Lorsque vous créez un cluster via hello portail Azure, une sonde est configurée automatiquement pour chaque port de point de terminaison personnalisé qui a été configuré.</span><span class="sxs-lookup"><span data-stu-id="f87bd-176">When creating a cluster through hello Azure portal, a probe is automatically set up for each custom endpoint port that was configured.</span></span>

    ![Transférer le trafic Bonjour équilibrage de charge Azure][8]

<span data-ttu-id="f87bd-178">Il est important tooremember que hello équilibrage de charge Azure et sonde de hello seulement connaissent pas hello *nœuds*, pas hello *services* en cours d’exécution sur les nœuds hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-178">It's important tooremember that hello Azure Load Balancer and hello probe only know about hello *nodes*, not hello *services* running on hello nodes.</span></span> <span data-ttu-id="f87bd-179">Hello équilibrage de charge Azure envoie toujours toonodes le trafic qui répondent toohello sonde, afin de veiller tooensure services sont disponibles sur les nœuds hello qui sont en mesure de toorespond toohello sonde.</span><span class="sxs-lookup"><span data-stu-id="f87bd-179">hello Azure Load Balancer will always send traffic toonodes that respond toohello probe, so care must be taken tooensure services are available on hello nodes that are able toorespond toohello probe.</span></span>

## <a name="reliable-services-built-in-communication-api-options"></a><span data-ttu-id="f87bd-180">Reliable Services : options d’API de communication intégrées</span><span class="sxs-lookup"><span data-stu-id="f87bd-180">Reliable Services: Built-in communication API options</span></span>
<span data-ttu-id="f87bd-181">infrastructure de Services fiables Hello est fourni avec plusieurs options de communication avant génération.</span><span class="sxs-lookup"><span data-stu-id="f87bd-181">hello Reliable Services framework ships with several pre-built communication options.</span></span> <span data-ttu-id="f87bd-182">décision Hello sur lequel un est la mieux vous dépend des choix hello Hello hello vos services sont écrites en langage de programmation, infrastructure de communication hello et modèle de programmation.</span><span class="sxs-lookup"><span data-stu-id="f87bd-182">hello decision about which one will work best for you depends on hello choice of hello programming model, hello communication framework, and hello programming language that your services are written in.</span></span>

* <span data-ttu-id="f87bd-183">**Aucun protocole spécifique :** si vous n’avez pas un choix particulier de l’infrastructure de communication, mais vous souhaitez tooget quelque chose haut et en cours d’exécution rapidement, option idéale de hello d’est [la communication à distance du service](service-fabric-reliable-services-communication-remoting.md), ce qui permet de fortement typée de procédure distante appelle pour des Services fiables et Reliable Actors.</span><span class="sxs-lookup"><span data-stu-id="f87bd-183">**No specific protocol:**  If you don't have a particular choice of communication framework, but you want tooget something up and running quickly, then hello ideal option for you is [service remoting](service-fabric-reliable-services-communication-remoting.md), which allows strongly-typed remote procedure calls for Reliable Services and Reliable Actors.</span></span> <span data-ttu-id="f87bd-184">Il s’agit de hello plus simple et plus rapide tooget de façon démarré communication avec le service.</span><span class="sxs-lookup"><span data-stu-id="f87bd-184">This is hello easiest and fastest way tooget started with service communication.</span></span> <span data-ttu-id="f87bd-185">Le service à distance gère la résolution des adresses de service ainsi que la connexion, les nouvelles tentatives et la gestion des erreurs.</span><span class="sxs-lookup"><span data-stu-id="f87bd-185">Service remoting handles resolution of service addresses, connection, retry, and error handling.</span></span> <span data-ttu-id="f87bd-186">Il est disponible pour les applications C# et Java.</span><span class="sxs-lookup"><span data-stu-id="f87bd-186">This is available for both C# and Java applications.</span></span>
* <span data-ttu-id="f87bd-187">**HTTP** : pour la communication sans langage spécifié, HTTP fournit un choix normalisé avec des outils et des serveurs HTTP disponibles dans plusieurs langues, le tout pris en charge par Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="f87bd-187">**HTTP**: For language-agnostic communication, HTTP provides an industry-standard choice with tools and HTTP servers available in many different languages, all supported by Service Fabric.</span></span> <span data-ttu-id="f87bd-188">Les services peuvent utiliser n’importe quelle pile HTTP, notamment l[’API web ASP.NET](service-fabric-reliable-services-communication-webapi.md) pour les applications C#.</span><span class="sxs-lookup"><span data-stu-id="f87bd-188">Services can use any HTTP stack available, including [ASP.NET Web API](service-fabric-reliable-services-communication-webapi.md) for C# applications.</span></span> <span data-ttu-id="f87bd-189">Les clients écrits en c# peuvent tirer parti de hello `ICommunicationClient` et `ServicePartitionClient` des classes, alors que pour Java, utilisez hello `CommunicationClient` et `FabricServicePartitionClient` classes, [de résolution de service, les connexions HTTP et les boucles de nouvelle tentative](service-fabric-reliable-services-communication.md).</span><span class="sxs-lookup"><span data-stu-id="f87bd-189">Clients written in C# can leverage hello `ICommunicationClient` and `ServicePartitionClient` classes, whereas for Java, use hello `CommunicationClient` and `FabricServicePartitionClient` classes, [for service resolution, HTTP connections, and retry loops](service-fabric-reliable-services-communication.md).</span></span>
* <span data-ttu-id="f87bd-190">**WCF**: Si vous avez un code existant qui utilise WCF en tant que votre infrastructure de communication, vous pouvez ensuite utiliser hello `WcfCommunicationListener` pour SSI hello et `WcfCommunicationClient` et `ServicePartitionClient` des classes pour les clients hello.</span><span class="sxs-lookup"><span data-stu-id="f87bd-190">**WCF**: If you have existing code that uses WCF as your communication framework, then you can use hello `WcfCommunicationListener` for hello server side and `WcfCommunicationClient` and `ServicePartitionClient` classes for hello client.</span></span> <span data-ttu-id="f87bd-191">Cela n’est possible que pour les applications C# sur des clusters basés sur Windows.</span><span class="sxs-lookup"><span data-stu-id="f87bd-191">This however is only available for C# applications on Windows based clusters.</span></span> <span data-ttu-id="f87bd-192">Pour plus d’informations, consultez cet article sur [basé sur WCF d’implémentation de pile de communication hello](service-fabric-reliable-services-communication-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="f87bd-192">For more details, see this article about [WCF-based implementation of hello communication stack](service-fabric-reliable-services-communication-wcf.md).</span></span>

## <a name="using-custom-protocols-and-other-communication-frameworks"></a><span data-ttu-id="f87bd-193">Utilisation des protocoles personnalisés et d’autres infrastructures de communication</span><span class="sxs-lookup"><span data-stu-id="f87bd-193">Using custom protocols and other communication frameworks</span></span>
<span data-ttu-id="f87bd-194">Les services peuvent utiliser un protocole ou une infrastructure quelconque pour la communication, qu’il s’agisse d’un protocole binaire personnalisé passant par des sockets TCP ou d’événements de diffusion passant par [Azure Event Hubs](https://azure.microsoft.com/services/event-hubs/) ou [Azure IoT Hub](https://azure.microsoft.com/services/iot-hub/).</span><span class="sxs-lookup"><span data-stu-id="f87bd-194">Services can use any protocol or framework for communication, whether its a custom binary protocol over TCP sockets, or streaming events through [Azure Event Hubs](https://azure.microsoft.com/services/event-hubs/) or [Azure IoT Hub](https://azure.microsoft.com/services/iot-hub/).</span></span> <span data-ttu-id="f87bd-195">Service Fabric fournit des API que vous pouvez connecter votre pile de communication, tandis que hello tous les toodiscover de travail et vous connecter de communication vous est abstrait.</span><span class="sxs-lookup"><span data-stu-id="f87bd-195">Service Fabric provides communication APIs that you can plug your communication stack into, while all hello work toodiscover and connect is abstracted from you.</span></span> <span data-ttu-id="f87bd-196">Consultez cet article sur hello [modèle de communication de Service fiable](service-fabric-reliable-services-communication.md) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="f87bd-196">See this article about hello [Reliable Service communication model](service-fabric-reliable-services-communication.md) for more details.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f87bd-197">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="f87bd-197">Next steps</span></span>
<span data-ttu-id="f87bd-198">En savoir plus sur les concepts de hello et les API disponibles dans hello [modèle de communication des Services fiables](service-fabric-reliable-services-communication.md), puis commencer rapidement avec [la communication à distance du service](service-fabric-reliable-services-communication-remoting.md) ou accédez toolearn approfondie comment toowrite un écouteur de communication à l’aide [API Web avec OWIN auto-hébergement](service-fabric-reliable-services-communication-webapi.md).</span><span class="sxs-lookup"><span data-stu-id="f87bd-198">Learn more about hello concepts and APIs available in hello [Reliable Services communication model](service-fabric-reliable-services-communication.md), then get started quickly with [service remoting](service-fabric-reliable-services-communication-remoting.md) or go in-depth toolearn how toowrite a communication listener using [Web API with OWIN self-host](service-fabric-reliable-services-communication-webapi.md).</span></span>

[1]: ./media/service-fabric-connect-and-communicate-with-services/serviceendpoints.png
[2]: ./media/service-fabric-connect-and-communicate-with-services/namingservice.png
[3]: ./media/service-fabric-connect-and-communicate-with-services/loadbalancertopology.png
[4]: ./media/service-fabric-connect-and-communicate-with-services/nodeport.png
[5]: ./media/service-fabric-connect-and-communicate-with-services/loadbalancerport.png
[7]: ./media/service-fabric-connect-and-communicate-with-services/distributedservices.png
[8]: ./media/service-fabric-connect-and-communicate-with-services/loadbalancerprobe.png
[9]: ./media/service-fabric-connect-and-communicate-with-services/dns.png
[10]: ./media/service-fabric-reverseproxy/internal-communication.png
