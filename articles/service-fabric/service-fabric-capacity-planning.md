---
title: aaaCapacity planification pour les applications de Service Fabric | Documents Microsoft
description: "Décrit comment tooidentify hello le nombre de nœuds de calcul requis pour une application de Service Fabric"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a><span data-ttu-id="cc685-103">Planification de la capacité pour les applications Service Fabric</span><span class="sxs-lookup"><span data-stu-id="cc685-103">Capacity planning for Service Fabric applications</span></span>
<span data-ttu-id="cc685-104">Ce document explique comment tooestimate hello la quantité de ressources (UC, RAM, disque) vous devez toorun vos applications Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="cc685-104">This document teaches you how tooestimate hello amount of resources (CPUs, RAM, disk storage) you need toorun your Azure Service Fabric applications.</span></span> <span data-ttu-id="cc685-105">Il est courant pour votre toochange d’exigences de ressources au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="cc685-105">It is common for your resource requirements toochange over time.</span></span> <span data-ttu-id="cc685-106">Vous avez besoin généralement de peu de ressources quand vous développez/testez votre service, puis vous avez besoin de plus de ressources quand vous passez en production et que votre application grandit en popularité.</span><span class="sxs-lookup"><span data-stu-id="cc685-106">You typically require few resources as you develop/test your service, and then require more resources as you go into production and your application grows in popularity.</span></span> <span data-ttu-id="cc685-107">Lorsque vous concevez votre application, penser à la configuration requise à long terme de hello et prendre des décisions qui permettent de votre service tooscale toomeet forte demande des clients.</span><span class="sxs-lookup"><span data-stu-id="cc685-107">When you design your application, think through hello long-term requirements and make choices that allow your service tooscale toomeet high customer demand.</span></span>

 <span data-ttu-id="cc685-108">Lorsque vous créez un cluster Service Fabric, vous décidez que les types de machines virtuelles (VM) qui composent le cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-108">When you create a Service Fabric cluster, you decide what kinds of virtual machines (VMs) make up hello cluster.</span></span> <span data-ttu-id="cc685-109">Chaque machine virtuelle est fourni avec un nombre limité de ressources sous forme de hello d’unités centrales (cœurs et vitesse), la bande passante réseau, mémoire RAM et le stockage sur disque.</span><span class="sxs-lookup"><span data-stu-id="cc685-109">Each VM comes with a limited amount of resources in hello form of CPUs (cores and speed), network bandwidth, RAM, and disk storage.</span></span> <span data-ttu-id="cc685-110">À mesure que votre service augmente au fil du temps, vous pouvez mettre à niveau tooVMs qui offrent davantage de ressources et/ou ajouter plusieurs ordinateurs virtuels du cluster tooyour.</span><span class="sxs-lookup"><span data-stu-id="cc685-110">As your service grows over time, you can upgrade tooVMs that offer greater resources and/or add more VMs tooyour cluster.</span></span> <span data-ttu-id="cc685-111">hello de toodo ce dernier, vous devez créer l’architecture votre service initialement afin qu’il peut tirer parti des nouvelles machines virtuelles ajoutées dynamiquement toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="cc685-111">toodo hello latter, you must architect your service initially so it can take advantage of new VMs that get dynamically added toohello cluster.</span></span>

<span data-ttu-id="cc685-112">Certains services gérer peu de données toono hello machines virtuelles elles-mêmes.</span><span class="sxs-lookup"><span data-stu-id="cc685-112">Some services manage little toono data on hello VMs themselves.</span></span> <span data-ttu-id="cc685-113">Par conséquent, la capacité de la planification de ces services doivent se concentrer principalement sur les performances, ce qui signifie que la sélection hello appropriées UC (cœurs et vitesse) des machines virtuelles de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-113">Therefore, capacity planning for these services should focus primarily on performance, which means selecting hello appropriate CPUs (cores and speed) of hello VMs.</span></span> <span data-ttu-id="cc685-114">En outre, vous devez prendre en compte la bande passante réseau, notamment la fréquence des transferts réseau et la quantité de données transférées.</span><span class="sxs-lookup"><span data-stu-id="cc685-114">In addition, you should consider network bandwidth, including how frequently network transfers are occurring and how much data is being transferred.</span></span> <span data-ttu-id="cc685-115">Si votre service doit tooperform ainsi que l’utilisation de service augmente, vous pouvez ajouter plusieurs machines virtuelles du cluster toohello et la charge d’équilibrer les demandes réseau hello sur tous les ordinateurs virtuels de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-115">If your service needs tooperform well as service usage increases, you can add more VMs toohello cluster and load balance hello network requests across all hello VMs.</span></span>

<span data-ttu-id="cc685-116">Pour les services qui gèrent les grandes quantités de données sur des machines virtuelles de hello, la planification de la capacité doit se concentrer principalement sur la taille.</span><span class="sxs-lookup"><span data-stu-id="cc685-116">For services that manage large amounts of data on hello VMs, capacity planning should focus primarily on size.</span></span> <span data-ttu-id="cc685-117">Par conséquent, vous étudiez attentivement capacité hello de la machine virtuelle hello RAM et espace disque.</span><span class="sxs-lookup"><span data-stu-id="cc685-117">Thus, you should carefully consider hello capacity of hello VM's RAM and disk storage.</span></span> <span data-ttu-id="cc685-118">système de gestion de mémoire virtuelle Hello dans Windows rende espace disque comme mémoire RAM tooapplication code.</span><span class="sxs-lookup"><span data-stu-id="cc685-118">hello virtual memory management system in Windows makes disk space look like RAM tooapplication code.</span></span> <span data-ttu-id="cc685-119">En outre, le runtime du Service Fabric hello fournit la pagination intelligente en conservant les données chaudes uniquement en mémoire et de déplacement toodisk de données à froid hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-119">In addition, hello Service Fabric runtime provides smart paging keeping only hot data in memory and moving hello cold data toodisk.</span></span> <span data-ttu-id="cc685-120">Applications peuvent ainsi utiliser plus de mémoire que physiquement disponible sur la machine virtuelle de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-120">Applications can thus use more memory than is physically available on hello VM.</span></span> <span data-ttu-id="cc685-121">Avoir davantage de RAM simplement augmente les performances, étant donné que hello machine virtuelle peut conserver plus de stockage de disque dans la mémoire RAM.</span><span class="sxs-lookup"><span data-stu-id="cc685-121">Having more RAM simply increases performance, since hello VM can keep more disk storage in RAM.</span></span> <span data-ttu-id="cc685-122">Hello machine virtuelle que vous sélectionnez doit avoir une disque toostore suffisante les données de salutation que vous voulez sur hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cc685-122">hello VM you select should have a disk large enough toostore hello data that you want on hello VM.</span></span> <span data-ttu-id="cc685-123">De même, hello machine virtuelle doit avoir suffisamment tooprovide RAM vous hello performances souhaité.</span><span class="sxs-lookup"><span data-stu-id="cc685-123">Similarly, hello VM should have enough RAM tooprovide you with hello performance you desire.</span></span> <span data-ttu-id="cc685-124">Si les données de votre service augmentent au fil du temps, vous pouvez ajouter plusieurs machines virtuelles toohello cluster partition hello données et sur tous les ordinateurs virtuels de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-124">If your service's data grows over time, you can add more VMs toohello cluster and partition hello data across all hello VMs.</span></span>

## <a name="determine-how-many-nodes-you-need"></a><span data-ttu-id="cc685-125">Déterminer le nombre de nœuds nécessaire</span><span class="sxs-lookup"><span data-stu-id="cc685-125">Determine how many nodes you need</span></span>
<span data-ttu-id="cc685-126">Partitionnement de votre service vous permet de tooscale les données de votre service.</span><span class="sxs-lookup"><span data-stu-id="cc685-126">Partitioning your service allows you tooscale out your service's data.</span></span> <span data-ttu-id="cc685-127">Pour plus d’informations sur le partitionnement, consultez [Partitionnement de Service Fabric](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="cc685-127">For more information on partitioning, see [Partitioning Service Fabric](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="cc685-128">Chaque partition doit tenir sur une seule machine virtuelle, mais plusieurs (petites) partitions peuvent être placées sur une seule machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="cc685-128">Each partition must fit within a single VM, but multiple (small) partitions can be placed on a single VM.</span></span> <span data-ttu-id="cc685-129">Ainsi, avoir plus de petites partitions offre davantage de souplesse que d’avoir un petit nombre de grandes partitions.</span><span class="sxs-lookup"><span data-stu-id="cc685-129">So, having more small partitions gives you greater flexibility than having a few larger partitions.</span></span> <span data-ttu-id="cc685-130">trouver un compromis Hello est que comportant un grand nombre de partitions augmente la charge de l’infrastructure de Service et ne peut pas effectuer des opérations traitées sur plusieurs partitions.</span><span class="sxs-lookup"><span data-stu-id="cc685-130">hello trade-off is that having lots of partitions increases Service Fabric overhead and you cannot perform transacted operations across partitions.</span></span> <span data-ttu-id="cc685-131">Il est également plus de trafic réseau potentiels si votre code de service doit fréquemment tooaccess d’ensembles de données qui se trouvent dans des partitions différentes.</span><span class="sxs-lookup"><span data-stu-id="cc685-131">There is also more potential network traffic if your service code frequently needs tooaccess pieces of data that live in different partitions.</span></span> <span data-ttu-id="cc685-132">Lorsque vous concevez votre service, vous devez envisager soigneusement ces tooarrive leurs avantages et inconvénients à une stratégie de partitionnement efficace.</span><span class="sxs-lookup"><span data-stu-id="cc685-132">When designing your service, you should carefully consider these pros and cons tooarrive at an effective partitioning strategy.</span></span>

<span data-ttu-id="cc685-133">Supposons que votre application possède un seul service avec état qui a une taille de stockage que vous attendez toogrow tooDB_Size Go par an.</span><span class="sxs-lookup"><span data-stu-id="cc685-133">Let's assume your application has a single stateful service that has a store size that you expect toogrow tooDB_Size GB in a year.</span></span> <span data-ttu-id="cc685-134">Vous êtes prêt tooadd plus d’applications (et partitions) en tant que vous rencontrez croissance au-delà de cette année.</span><span class="sxs-lookup"><span data-stu-id="cc685-134">You are willing tooadd more applications (and partitions) as you experience growth beyond that year.</span></span>  <span data-ttu-id="cc685-135">Hello facteur de réplication (RF), qui détermine le nombre hello de réplicas pour les impacts de votre service hello DB_Size total.</span><span class="sxs-lookup"><span data-stu-id="cc685-135">hello replication factor (RF), which determines hello number of replicas for your service impacts hello total DB_Size.</span></span> <span data-ttu-id="cc685-136">Hello DB_Size total sur tous les réplicas est hello multipliée par DB_Size de facteur de réplication.</span><span class="sxs-lookup"><span data-stu-id="cc685-136">hello total DB_Size across all replicas is hello Replication Factor multiplied by DB_Size.</span></span>  <span data-ttu-id="cc685-137">Node_Size représente l’espace de disque hello/RAM par nœud souhaité toouse pour votre service.</span><span class="sxs-lookup"><span data-stu-id="cc685-137">Node_Size represents hello disk space/RAM per node you want toouse for your service.</span></span> <span data-ttu-id="cc685-138">Pour de meilleures performances, hello DB_Size doit tenir dans la mémoire entre hello cluster et un Node_Size autour de hello RAM Hello que machine virtuelle doit être choisi.</span><span class="sxs-lookup"><span data-stu-id="cc685-138">For best performance, hello DB_Size should fit into memory across hello cluster, and a Node_Size that is around hello RAM of hello VM should be chosen.</span></span> <span data-ttu-id="cc685-139">En allouant un Node_Size est supérieure à la capacité de mémoire vive de hello, reposent sur la pagination hello fournie par le runtime du Service Fabric hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-139">By allocating a Node_Size that is larger than hello RAM capacity, you are relying on hello paging provided by hello Service Fabric runtime.</span></span> <span data-ttu-id="cc685-140">Par conséquent, les performances ne peuvent pas être optimales si vos données sont considérée comme toobe à chaud (depuis le hello puis données paginées dans/out).</span><span class="sxs-lookup"><span data-stu-id="cc685-140">Thus, your performance may not be optimal if your entire data is considered toobe hot (since then hello data is paged in/out).</span></span> <span data-ttu-id="cc685-141">Toutefois, pour de nombreux services où seule une fraction des données de hello est active, il est plus rentable.</span><span class="sxs-lookup"><span data-stu-id="cc685-141">However, for many services where only a fraction of hello data is hot, it is more cost-effective.</span></span>

<span data-ttu-id="cc685-142">nombre de Hello de nœuds nécessaires pour optimiser les performances peut être calculée comme suit :</span><span class="sxs-lookup"><span data-stu-id="cc685-142">hello number of nodes required for maximum performance can be computed as follows:</span></span>

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a><span data-ttu-id="cc685-143">Prendre la croissance en compte</span><span class="sxs-lookup"><span data-stu-id="cc685-143">Account for growth</span></span>
<span data-ttu-id="cc685-144">Vous pouvez choisir le nombre de hello toocompute de nœuds selon hello DB_Size désirées toogrow de votre service, en outre toohello DB_Size que vous avez commencé avec.</span><span class="sxs-lookup"><span data-stu-id="cc685-144">You may want toocompute hello number of nodes based on hello DB_Size that you expect your service toogrow to, in addition toohello DB_Size that you began with.</span></span> <span data-ttu-id="cc685-145">Ensuite, la croissance nombre hello de nœuds à mesure que votre service augmente afin que vous n’êtes pas un approvisionnement nombre hello de nœuds.</span><span class="sxs-lookup"><span data-stu-id="cc685-145">Then, grow hello number of nodes as your service grows so that you are not over-provisioning hello number of nodes.</span></span> <span data-ttu-id="cc685-146">Mais nombre hello de partitions doit être basé sur nombre hello de nœuds qui sont nécessaires lorsque vous exécutez votre service à croissance maximale.</span><span class="sxs-lookup"><span data-stu-id="cc685-146">But hello number of partitions should be based on hello number of nodes that are needed when you're running your service at maximum growth.</span></span>

<span data-ttu-id="cc685-147">Il est bon toohave des ordinateurs supplémentaires disponibles à tout moment afin que vous pouvez gérer les pics inattendues ou l’échec (par exemple, si plusieurs machines virtuelles s’arrêtent).</span><span class="sxs-lookup"><span data-stu-id="cc685-147">It is good toohave some extra machines available at any time so that you can handle any unexpected spikes or failure (for example, if a few VMs go down).</span></span>  <span data-ttu-id="cc685-148">Alors que hello capacité supplémentaire doit être déterminée à l’aide de votre pics attendus, un point de départ est tooreserve quelques machines virtuelles supplémentaires (5 à 10 % supplémentaire).</span><span class="sxs-lookup"><span data-stu-id="cc685-148">While hello extra capacity should be determined by using your expected spikes, a starting point is tooreserve a few extra VMs (5-10 percent extra).</span></span>

<span data-ttu-id="cc685-149">Hello précédent suppose qu’un seul service avec état.</span><span class="sxs-lookup"><span data-stu-id="cc685-149">hello preceding assumes a single stateful service.</span></span> <span data-ttu-id="cc685-150">Si vous avez plusieurs services avec état, vous avez tooadd hello DB_Size associé hello d’autres services dans l’équation de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-150">If you have more than one stateful service, you have tooadd hello DB_Size associated with hello other services into hello equation.</span></span> <span data-ttu-id="cc685-151">Ou bien, vous pouvez calculer le nombre de hello de nœuds séparément pour chaque service avec état.</span><span class="sxs-lookup"><span data-stu-id="cc685-151">Alternatively, you can compute hello number of nodes separately for each stateful service.</span></span>  <span data-ttu-id="cc685-152">Votre service peut avoir des réplicas ou des partitions qui ne sont pas équilibrés.</span><span class="sxs-lookup"><span data-stu-id="cc685-152">Your service may have replicas or partitions that aren't balanced.</span></span> <span data-ttu-id="cc685-153">N’oubliez pas que certaines partitions peuvent également contenir plus de données que d’autres.</span><span class="sxs-lookup"><span data-stu-id="cc685-153">Keep in mind that partitions may also have more data than others.</span></span> <span data-ttu-id="cc685-154">Pour plus d’informations sur le partitionnement, consultez [l’article sur les meilleures pratiques de partitionnement](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="cc685-154">For more information on partitioning, see [partitioning article on best practices](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="cc685-155">Toutefois, hello équation précédente est partition et le réplica agnostique, étant donné que le Service Fabric garantit que les réplicas hello sont répartis entre les nœuds de hello de manière optimisée.</span><span class="sxs-lookup"><span data-stu-id="cc685-155">However, hello preceding equation is partition and replica agnostic, because Service Fabric ensures that hello replicas are spread out among hello nodes in an optimized manner.</span></span>

## <a name="use-a-spreadsheet-for-cost-calculation"></a><span data-ttu-id="cc685-156">Utiliser une feuille de calcul pour le calcul des coûts</span><span class="sxs-lookup"><span data-stu-id="cc685-156">Use a spreadsheet for cost calculation</span></span>
<span data-ttu-id="cc685-157">Maintenant nous allons placer des nombres réels dans la formule de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-157">Now let's put some real numbers in hello formula.</span></span> <span data-ttu-id="cc685-158">Un [feuille de calcul exemple](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) montre comment tooplan hello capacité pour une application qui contient trois types d’objets de données.</span><span class="sxs-lookup"><span data-stu-id="cc685-158">An [example spreadsheet](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) shows how tooplan hello capacity for an application that contains three types of data objects.</span></span> <span data-ttu-id="cc685-159">Pour chaque objet, nous être proche de sa taille et le nombre d’objets nous pensons que toohave.</span><span class="sxs-lookup"><span data-stu-id="cc685-159">For each object, we approximate its size and how many objects we expect toohave.</span></span> <span data-ttu-id="cc685-160">Nous sélectionnons également le nombre de réplicas pour chaque type d’objet.</span><span class="sxs-lookup"><span data-stu-id="cc685-160">We also select how many replicas we want of each object type.</span></span> <span data-ttu-id="cc685-161">feuille de calcul Hello calcule la quantité totale de hello de toobe mémoire stockée dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-161">hello spreadsheet calculates hello total amount of memory toobe stored in hello cluster.</span></span>

<span data-ttu-id="cc685-162">Ensuite, nous entrons une taille de machine virtuelle et le coût mensuel.</span><span class="sxs-lookup"><span data-stu-id="cc685-162">Then we enter a VM size and monthly cost.</span></span> <span data-ttu-id="cc685-163">En fonction de hello taille de machine virtuelle, feuille de calcul hello indique hello de nombre minimal de partitions, que vous devez utiliser toosplit votre toophysically données tenir sur les nœuds hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-163">Based on hello VM size, hello spreadsheet tells you hello minimum number of partitions you must use toosplit your data toophysically fit on hello nodes.</span></span> <span data-ttu-id="cc685-164">Vous pouvez lancer un plus grand nombre de tooaccommodate partitions que besoins de trafic de réseau et de calcul spécifique de votre application.</span><span class="sxs-lookup"><span data-stu-id="cc685-164">You may desire a larger number of partitions tooaccommodate your application's specific computation and network traffic needs.</span></span> <span data-ttu-id="cc685-165">feuille de calcul de Hello affiche le nombre de hello de partitions qui gèrent les objets de profil utilisateur hello a augmenté à partir d’un toosix.</span><span class="sxs-lookup"><span data-stu-id="cc685-165">hello spreadsheet shows hello number of partitions that are managing hello user profile objects has increased from one toosix.</span></span>

<span data-ttu-id="cc685-166">En fonction de toutes ces informations, feuille de calcul hello affiche à présent que vous pouvez obtenir physiquement toutes les données de hello avec hello souhaité partitions et réplicas sur un cluster à nœud 26.</span><span class="sxs-lookup"><span data-stu-id="cc685-166">Now, based on all this information, hello spreadsheet shows that you could physically get all hello data with hello desired partitions and replicas on a 26-node cluster.</span></span> <span data-ttu-id="cc685-167">Toutefois, ce cluster serait être très compactes, vous pouvez donc certains échecs de nœud des nœuds supplémentaires tooaccommodate et les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="cc685-167">However, this cluster would be densely packed, so you may want some additional nodes tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="cc685-168">feuille de calcul Hello montre également que comportant plus de 57 nœuds offre aucun avantage supplémentaire, car il vous faudrait des nœuds vides.</span><span class="sxs-lookup"><span data-stu-id="cc685-168">hello spreadsheet also shows that having more than 57 nodes provides no additional value because you would have empty nodes.</span></span> <span data-ttu-id="cc685-169">Là encore, vous voudrez toogo au-dessus des 57 nœuds quand même tooaccommodate les échecs des nœuds et des mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="cc685-169">Again, you may want toogo above 57 nodes anyway tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="cc685-170">Les besoins spécifiques de votre application, vous pouvez régler toomatch de feuille de calcul hello.</span><span class="sxs-lookup"><span data-stu-id="cc685-170">You can tweak hello spreadsheet toomatch your application's specific needs.</span></span>   

![Feuille de calcul pour le calcul des coûts][Image1]

## <a name="next-steps"></a><span data-ttu-id="cc685-172">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="cc685-172">Next steps</span></span>
<span data-ttu-id="cc685-173">Extraire [services partitionnement Service Fabric] [ 10] toolearn plus d’informations sur le partitionnement de votre service.</span><span class="sxs-lookup"><span data-stu-id="cc685-173">Check out [Partitioning Service Fabric services][10] toolearn more about partitioning your service.</span></span>

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md
