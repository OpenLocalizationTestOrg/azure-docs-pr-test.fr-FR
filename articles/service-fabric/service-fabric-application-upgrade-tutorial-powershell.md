---
title: "mise à niveau de l’application de l’ensemble fibre optique aaaService à l’aide de PowerShell | Documents Microsoft"
description: "Cet article explique les hello expérience de déploiement d’une application de Service Fabric, modifier le code de hello et déploiement d’une mise à niveau à l’aide de PowerShell."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: f31212264de45c3b257a0efafb75c10c279b989f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="07878-103">Mise à niveau d’applications Service Fabric à l’aide de PowerShell</span><span class="sxs-lookup"><span data-stu-id="07878-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="07878-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="07878-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="07878-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="07878-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="07878-106">Hello plus fréquemment utilisés et mise à niveau recommandé est mise à niveau propagée de hello analysé.</span><span class="sxs-lookup"><span data-stu-id="07878-106">hello most frequently used and recommended upgrade approach is hello monitored rolling upgrade.</span></span>  <span data-ttu-id="07878-107">Azure Service Fabric analyse hello selon l’intégrité de l’application hello mis à niveau sur un ensemble de stratégies d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="07878-107">Azure Service Fabric monitors hello health of hello application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="07878-108">Une fois qu’un domaine de mise à jour (ID) est mis à niveau, Service Fabric évalue l’intégrité des applications hello et passe de domaine de mise à jour suivant toohello ou Échec de mise à niveau hello en fonction des stratégies de contrôle d’intégrité hello.</span><span class="sxs-lookup"><span data-stu-id="07878-108">Once an update domain (UD) is upgraded, Service Fabric evaluates hello application health and either proceeds toohello next update domain or fails hello upgrade depending on hello health policies.</span></span>

<span data-ttu-id="07878-109">Une mise à niveau de l’application analysée peut être effectuée à l’aide de hello gérés ou des API natives, PowerShell ou REST.</span><span class="sxs-lookup"><span data-stu-id="07878-109">A monitored application upgrade can be performed using hello managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="07878-110">Pour obtenir des instructions sur l’exécution d’une mise à niveau à l’aide de Visual Studio, consultez [Mise à niveau de votre application à l’aide de Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="07878-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="07878-111">Avec les mises à niveau propagées du Service Fabric est analysé, administrateur de l’application hello peut configurer stratégie d’évaluation d’intégrité hello que Service Fabric utilise toodetermine si l’application hello est saine.</span><span class="sxs-lookup"><span data-stu-id="07878-111">With Service Fabric monitored rolling upgrades, hello application administrator can configure hello health evaluation policy that Service Fabric uses toodetermine if hello application is healthy.</span></span> <span data-ttu-id="07878-112">En outre, administrateur de hello peut configurer toobe d’action hello prise lors de l’évaluation d’intégrité de hello échoue (par exemple, effectuer une restauration automatique.) Cette section décrit une mise à niveau analysé pour un des exemples du kit SDK hello qui utilise PowerShell.</span><span class="sxs-lookup"><span data-stu-id="07878-112">In addition, hello administrator can configure hello action toobe taken when hello health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of hello SDK samples that uses PowerShell.</span></span> <span data-ttu-id="07878-113">Hello vidéo Microsoft Virtual Academy suivante vous guide également dans une mise à niveau de l’application :<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="07878-113">hello following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-hello-visual-objects-sample"></a><span data-ttu-id="07878-114">Étape 1 : Créer et déployer l’exemple d’objets visuels hello</span><span class="sxs-lookup"><span data-stu-id="07878-114">Step 1: Build and deploy hello Visual Objects sample</span></span>
<span data-ttu-id="07878-115">Générer et publier l’application hello en cliquant sur le projet d’application hello, **VisualObjectsApplication,** et en sélectionnant hello **publier** commande.</span><span class="sxs-lookup"><span data-stu-id="07878-115">Build and publish hello application by right-clicking on hello application project, **VisualObjectsApplication,** and selecting hello **Publish** command.</span></span>  <span data-ttu-id="07878-116">Pour plus d’informations, consultez le [didacticiel sur la mise à niveau d’une application Service Fabric](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="07878-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="07878-117">Vous pouvez également utiliser PowerShell toodeploy votre application.</span><span class="sxs-lookup"><span data-stu-id="07878-117">Alternatively, you can use PowerShell toodeploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="07878-118">Avant d’une des commandes de Service Fabric hello peut être utilisée dans PowerShell, vous devez tout d’abord tooconnect toohello cluster à l’aide de hello `Connect-ServiceFabricCluster` applet de commande.</span><span class="sxs-lookup"><span data-stu-id="07878-118">Before any of hello Service Fabric commands may be used in PowerShell, you first need tooconnect toohello cluster by using hello `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="07878-119">De même, il est supposé que hello que cluster a déjà été configuré sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="07878-119">Similarly, it is assumed that hello Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="07878-120">Consultez l’article hello sur [configuration de votre environnement de développement Service Fabric](service-fabric-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="07878-120">See hello article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="07878-121">Après la génération de projet hello dans Visual Studio, vous pouvez utiliser la commande PowerShell de hello [ServiceFabricApplicationPackage de copie](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello application package toohello images.</span><span class="sxs-lookup"><span data-stu-id="07878-121">After building hello project in Visual Studio, you can use hello PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello application package toohello ImageStore.</span></span> <span data-ttu-id="07878-122">Si vous souhaitez que le package d’application hello tooverify localement, utilisez hello [ServiceFabricApplicationPackage-Test](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="07878-122">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="07878-123">étape suivante Hello est tooregister hello toohello Service Fabric exécution de l’application à l’aide de hello [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="07878-123">hello next step is tooregister hello application toohello Service Fabric runtime using hello [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="07878-124">Bonjour étape finale est toostart une instance de l’application hello à l’aide de hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="07878-124">hello final step is toostart an instance of hello application by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="07878-125">Ces trois étapes sont analogues toousing hello **déployer** élément de menu dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="07878-125">These three steps are analogous toousing hello **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="07878-126">Vous pouvez maintenant utiliser [Service Fabric Explorer tooview hello cluster et hello l’application](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="07878-126">Now, you can use [Service Fabric Explorer tooview hello cluster and hello application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="07878-127">application Hello possède un service web qui peut être navigué tooin Internet Explorer en tapant [http://localhost : 8081/visualobjects](http://localhost:8081/visualobjects) dans la barre d’adresses hello.</span><span class="sxs-lookup"><span data-stu-id="07878-127">hello application has a web service that can be navigated tooin Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in hello address bar.</span></span>  <span data-ttu-id="07878-128">Vous devez voir certains objets visuels flottantes déplacement dans l’écran hello.</span><span class="sxs-lookup"><span data-stu-id="07878-128">You should see some floating visual objects moving around in hello screen.</span></span>  <span data-ttu-id="07878-129">En outre, vous pouvez utiliser [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck état de l’application hello.</span><span class="sxs-lookup"><span data-stu-id="07878-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck hello application status.</span></span>

## <a name="step-2-update-hello-visual-objects-sample"></a><span data-ttu-id="07878-130">Étape 2 : Mettre à jour des exemples d’objets visuels hello</span><span class="sxs-lookup"><span data-stu-id="07878-130">Step 2: Update hello Visual Objects sample</span></span>
<span data-ttu-id="07878-131">Vous pouvez remarquer qu’avec la version de hello qui a été déployée à l’étape 1, les objets visuels hello ne pas faire pivoter.</span><span class="sxs-lookup"><span data-stu-id="07878-131">You might notice that with hello version that was deployed in Step 1, hello visual objects do not rotate.</span></span> <span data-ttu-id="07878-132">Nous allons mettre à niveau de ce tooone application où les objets visuels hello également faire pivoter.</span><span class="sxs-lookup"><span data-stu-id="07878-132">Let's upgrade this application tooone where hello visual objects also rotate.</span></span>

<span data-ttu-id="07878-133">Sélectionnez le projet VisualObjects.ActorService hello hello VisualObjects solution et ouvrir le fichier de StatefulVisualObjectActor.cs hello.</span><span class="sxs-lookup"><span data-stu-id="07878-133">Select hello VisualObjects.ActorService project within hello VisualObjects solution, and open hello StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="07878-134">Dans ce fichier, accédez à toohello méthode `MoveObject`, commentez `this.State.Move()`et ne commentez pas `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="07878-134">Within that file, navigate toohello method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="07878-135">Cette modification fait pivoter les objets hello après la mise à niveau de service de hello.</span><span class="sxs-lookup"><span data-stu-id="07878-135">This change rotates hello objects after hello service is upgraded.</span></span>

<span data-ttu-id="07878-136">Nous devons également tooupdate hello *ServiceManifest.xml* fichier (sous PackageRoot) du projet de hello **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="07878-136">We also need tooupdate hello *ServiceManifest.xml* file (under PackageRoot) of hello project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="07878-137">Hello de mise à jour *CodePackage* hello service version too2.0 et hello lignes correspondantes de hello *ServiceManifest.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="07878-137">Update hello *CodePackage* and hello service version too2.0, and hello corresponding lines in hello *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="07878-138">Vous pouvez utiliser Visual Studio de hello *modifier les fichiers manifeste* option une fois avec le bouton droit sur les modifications du fichier manifeste hello solution toomake hello.</span><span class="sxs-lookup"><span data-stu-id="07878-138">You can use hello Visual Studio *Edit Manifest Files* option after you right-click on hello solution toomake hello manifest file changes.</span></span>

<span data-ttu-id="07878-139">Après les modifications de hello, manifeste de hello doit ressembler à hello suivantes (en surbrillance des parties permet d’afficher les modifications hello) :</span><span class="sxs-lookup"><span data-stu-id="07878-139">After hello changes are made, hello manifest should look like hello following (highlighted portions show hello changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="07878-140">Maintenant hello *ApplicationManifest.xml* fichier (situés sous hello **VisualObjects** projet sous hello **VisualObjects** solution) est mis à jour tooversion 2.0 Hello  **VisualObjects.ActorService** projet.</span><span class="sxs-lookup"><span data-stu-id="07878-140">Now hello *ApplicationManifest.xml* file (found under hello **VisualObjects** project under hello **VisualObjects** solution) is updated tooversion 2.0 of hello **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="07878-141">En outre, la version de l’Application hello est mis à jour too2.0.0.0 de 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="07878-141">In addition, hello Application version is updated too2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="07878-142">Hello *ApplicationManifest.xml* doit ressemble hello suivant extrait de code :</span><span class="sxs-lookup"><span data-stu-id="07878-142">hello *ApplicationManifest.xml* should look like hello following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="07878-143">À présent, générer le projet de hello en sélectionnant simplement hello **ActorService** projet, puis cliquant et en sélectionnant hello **générer** option dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="07878-143">Now, build hello project by selecting just hello **ActorService** project, and then right-clicking and selecting hello **Build** option in Visual Studio.</span></span> <span data-ttu-id="07878-144">Si vous sélectionnez **tout reconstruire**, vous devez mettre à jour versions hello pour tous les projets, étant donné que le code de hello aurait été modifié.</span><span class="sxs-lookup"><span data-stu-id="07878-144">If you select **Rebuild all**, you should update hello versions for all projects, since hello code would have changed.</span></span> <span data-ttu-id="07878-145">Ensuite, nous allons hello du package mis à jour des applications en cliquant sur ***VisualObjectsApplication***, en sélectionnant hello Menu de l’infrastructure de Service et en choisissant **Package**.</span><span class="sxs-lookup"><span data-stu-id="07878-145">Next, let's package hello updated application by right-clicking on ***VisualObjectsApplication***, selecting hello Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="07878-146">Cette action crée un package d’application qui peut être déployé.</span><span class="sxs-lookup"><span data-stu-id="07878-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="07878-147">Votre application de mises à jour est toobe prêt déployée.</span><span class="sxs-lookup"><span data-stu-id="07878-147">Your updated application is ready toobe deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="07878-148">Étape 3 : Décider des stratégies de contrôle d’intégrité et des paramètres de mise à niveau</span><span class="sxs-lookup"><span data-stu-id="07878-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="07878-149">Familiarisez-vous avec hello [paramètres de mise à niveau l’application](service-fabric-application-upgrade-parameters.md) et hello [mise à niveau](service-fabric-application-upgrade.md) tooget une bonne compréhension de hello différentes mise à niveau des paramètres, les délais d’attente et d’intégrité critère appliqué .</span><span class="sxs-lookup"><span data-stu-id="07878-149">Familiarize yourself with hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and hello [upgrade process](service-fabric-application-upgrade.md) tooget a good understanding of hello various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="07878-150">Pour cette procédure pas à pas, critère d’évaluation de hello service d’intégrité est défini par défaut de toohello (et recommandé) valeurs, ce qui signifie que tous les services et les instances doivent être *intègre* après mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="07878-150">For this walkthrough, hello service health evaluation criterion is set toohello default (and recommended) values, which means that all services and instances should be *healthy* after hello upgrade.</span></span>  

<span data-ttu-id="07878-151">Cependant, nous allons l’augmenter hello *HealthCheckStableDuration* too60 secondes (de sorte que les services de hello sont sains pour le domaine de la prochaine mise à jour au moins 20 secondes avant la mise à niveau hello passe toohello).</span><span class="sxs-lookup"><span data-stu-id="07878-151">However, let's increase hello *HealthCheckStableDuration* too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next update domain).</span></span>  <span data-ttu-id="07878-152">Nous allons également définir hello *UpgradeDomainTimeout* toobe 1200 secondes et hello *UpgradeTimeout* toobe 3 000 secondes.</span><span class="sxs-lookup"><span data-stu-id="07878-152">Let's also set hello *UpgradeDomainTimeout* toobe 1200 seconds and hello *UpgradeTimeout* toobe 3000 seconds.</span></span>

<span data-ttu-id="07878-153">Enfin, nous allons également définir hello *UpgradeFailureAction* toorollback.</span><span class="sxs-lookup"><span data-stu-id="07878-153">Finally, let's also set hello *UpgradeFailureAction* toorollback.</span></span> <span data-ttu-id="07878-154">Cette option nécessite le Service Fabric tooroll hello arrière toohello précédente version de l’application si elle rencontre des problèmes pendant la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="07878-154">This option requires Service Fabric tooroll back hello application toohello previous version if it encounters any issues during hello upgrade.</span></span> <span data-ttu-id="07878-155">Par conséquent, lorsque vous démarrez la mise à niveau hello (à l’étape 4), hello paramètres suivants sont spécifiés :</span><span class="sxs-lookup"><span data-stu-id="07878-155">Thus, when starting hello upgrade (in Step 4), hello following parameters are specified:</span></span>

<span data-ttu-id="07878-156">FailureAction = Rollback</span><span class="sxs-lookup"><span data-stu-id="07878-156">FailureAction = Rollback</span></span>

<span data-ttu-id="07878-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="07878-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="07878-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="07878-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="07878-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="07878-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="07878-160">Étape 4 : Préparer l'application pour la mise à niveau</span><span class="sxs-lookup"><span data-stu-id="07878-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="07878-161">Maintenant l’application hello est générée et prêt toobe mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="07878-161">Now hello application is built and ready toobe upgraded.</span></span> <span data-ttu-id="07878-162">Si vous ouvrez une fenêtre PowerShell en tant qu’administrateur et tapez [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), la commande doit vous informer que le type d’application 1.0.0.0 de **VisualObjects** est en cours de déploiement.</span><span class="sxs-lookup"><span data-stu-id="07878-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="07878-163">package d’application Hello est stocké sous suivant de hello chemin d’accès relatif dans lequel vous avez décompressé hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="07878-163">hello application package is stored under hello following relative path where you uncompressed hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="07878-164">Vous devez trouver un dossier « Package » dans ce répertoire, où le package d’application hello est stocké.</span><span class="sxs-lookup"><span data-stu-id="07878-164">You should find a "Package" folder in that directory, where hello application package is stored.</span></span> <span data-ttu-id="07878-165">Vérifiez tooensure d’horodatages hello qu’il s’agit de build la plus récente hello (vous devrez peut-être toomodify hello chemins en conséquence).</span><span class="sxs-lookup"><span data-stu-id="07878-165">Check hello timestamps tooensure that it is hello latest build (you may need toomodify hello paths appropriately as well).</span></span>

<span data-ttu-id="07878-166">Maintenant nous allons hello de la copie mise à jour toohello de package d’application images de l’infrastructure de Service (où les packages d’application hello sont enregistrées par l’infrastructure de Service).</span><span class="sxs-lookup"><span data-stu-id="07878-166">Now let's copy hello updated application package toohello Service Fabric ImageStore (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="07878-167">Hello paramètre *ApplicationPackagePathInImageStore* informe l’infrastructure de Service dans lequel il peut trouver le package d’application hello.</span><span class="sxs-lookup"><span data-stu-id="07878-167">hello parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="07878-168">Nous avons mis l’application hello mis à jour « VisualObjects\_V2 » avec hello suivant de commandes (vous devrez peut-être des chemins d’accès toomodify à nouveau de façon appropriée).</span><span class="sxs-lookup"><span data-stu-id="07878-168">We have put hello updated application in "VisualObjects\_V2" with hello following command (you may need toomodify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="07878-169">étape suivante de Hello est tooregister cette application avec l’infrastructure de Service, qui peut être effectuée à l’aide de hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) commande :</span><span class="sxs-lookup"><span data-stu-id="07878-169">hello next step is tooregister this application with Service Fabric, which can be performed using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="07878-170">Si hello commande précédente ne réussit pas, il est probable que vous avez besoin d’une reconstruction de tous les services.</span><span class="sxs-lookup"><span data-stu-id="07878-170">If hello preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="07878-171">Comme indiqué dans l’étape 2, vous avez peut-être tooupdate ainsi votre version de service Web.</span><span class="sxs-lookup"><span data-stu-id="07878-171">As mentioned in Step 2, you may have tooupdate your WebService version as well.</span></span>

## <a name="step-5-start-hello-application-upgrade"></a><span data-ttu-id="07878-172">Étape 5 : Démarrer la mise à niveau des applications hello</span><span class="sxs-lookup"><span data-stu-id="07878-172">Step 5: Start hello application upgrade</span></span>
<span data-ttu-id="07878-173">Maintenant, nous sommes tous ensemble toostart hello application mise à niveau à l’aide de hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) commande :</span><span class="sxs-lookup"><span data-stu-id="07878-173">Now, we're all set toostart hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="07878-174">Hello nom de l’application est hello même qu’il a été décrit dans hello *ApplicationManifest.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="07878-174">hello application name is hello same as it was described in hello *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="07878-175">L’infrastructure de service utilise cette tooidentify nom quelle application est mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="07878-175">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="07878-176">Si vous définissez hello toobe de délais d’attente trop court, vous pouvez rencontrer un message d’échec de que les États hello problème.</span><span class="sxs-lookup"><span data-stu-id="07878-176">If you set hello time-outs toobe too short, you may encounter a failure message that states hello problem.</span></span> <span data-ttu-id="07878-177">Consultez toohello section de dépannage ou augmenter les délais d’expiration hello.</span><span class="sxs-lookup"><span data-stu-id="07878-177">Refer toohello troubleshooting section, or increase hello time-outs.</span></span>

<span data-ttu-id="07878-178">À présent, comme hello continue mise à niveau d’application, vous pouvez l’analyser à l’aide du Service Fabric Explorer, ou à l’aide de hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) commande PowerShell :</span><span class="sxs-lookup"><span data-stu-id="07878-178">Now, as hello application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="07878-179">Dans quelques minutes, état hello que vous avez obtenu à l’aide de hello précédant la commande PowerShell, doivent indiquer que tous les domaines de mise à jour ont été mis à niveau (terminé).</span><span class="sxs-lookup"><span data-stu-id="07878-179">In a few minutes, hello status that you got by using hello preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="07878-180">Et vous devez rechercher que les objets visuels de hello dans la fenêtre du navigateur ont démarré rotation !</span><span class="sxs-lookup"><span data-stu-id="07878-180">And you should find that hello visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="07878-181">Vous pouvez essayer de la mise à niveau à partir de la version 2 tooversion 3 ou version 2 tooversion 1 en guise d’exercice.</span><span class="sxs-lookup"><span data-stu-id="07878-181">You can try upgrading from version 2 tooversion 3, or from version 2 tooversion 1 as an exercise.</span></span> <span data-ttu-id="07878-182">Déplacement à partir de la version 2 tooversion 1 est également considérée comme une mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="07878-182">Moving from version 2 tooversion 1 is also considered an upgrade.</span></span> <span data-ttu-id="07878-183">Manipuler les délais d’attente et toomake des stratégies de contrôle d’intégrité vous-même connaissent.</span><span class="sxs-lookup"><span data-stu-id="07878-183">Play with time-outs and health policies toomake yourself familiar with them.</span></span> <span data-ttu-id="07878-184">Lorsque vous déployez tooan cluster Azure, ensemble de paramètres besoin toobe hello en conséquence.</span><span class="sxs-lookup"><span data-stu-id="07878-184">When you are deploying tooan Azure cluster, hello parameters need toobe set appropriately.</span></span> <span data-ttu-id="07878-185">Il s’agit habituellement les délais d’attente de bonne tooset hello.</span><span class="sxs-lookup"><span data-stu-id="07878-185">It is good tooset hello time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="07878-186">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="07878-186">Next steps</span></span>
<span data-ttu-id="07878-187">[Mise à niveau de votre application à l’aide de Visual Studio](service-fabric-application-upgrade-tutorial.md) vous guide à travers une mise à niveau de l’application à l’aide de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="07878-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="07878-188">Contrôlez les mises à niveau de votre application à l’aide des [paramètres de mise à niveau](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="07878-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="07878-189">Rendre les mises à niveau de votre application compatible par learning comment toouse [sérialisation des données](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="07878-189">Make your application upgrades compatible by learning how toouse [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="07878-190">Découvrez comment toouse des fonctionnalités avancées lors de la mise à niveau de votre application en vous reportant trop[rubriques avancées](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="07878-190">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="07878-191">Résoudre les problèmes courants dans les mises à niveau de l’application en faisant référence à des étapes de toohello de [résolution des problèmes de mises à niveau de l’application](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="07878-191">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

