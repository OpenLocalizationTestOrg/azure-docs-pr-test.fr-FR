---
title: "didacticiel mise à niveau d’application Fabric aaaService | Documents Microsoft"
description: "Cet article explique les hello expérience de déploiement d’une application de Service Fabric, modifier le code de hello et déploiement d’une mise à niveau à l’aide de Visual Studio."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: a3181a7a-9ab1-4216-b07a-05b79bd826a4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: d069ff0b291018dbac846e65cddff1e9d73d156c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-tutorial-using-visual-studio"></a><span data-ttu-id="3228a-103">Didacticiel sur la mise à niveau d'une application Service Fabric à l'aide de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3228a-103">Service Fabric application upgrade tutorial using Visual Studio</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="3228a-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3228a-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="3228a-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3228a-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="3228a-106">Azure Service Fabric simplifie hello la mise à niveau des applications cloud en veillant à ce que seuls les services modifiés sont mis à niveau, et que le contrôle d’intégrité de l’application est analysé tout au long du processus de mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-106">Azure Service Fabric simplifies hello process of upgrading cloud applications by ensuring that only changed services are upgraded, and that application health is monitored throughout hello upgrade process.</span></span> <span data-ttu-id="3228a-107">Elle annule également automatiquement version précédente de toohello application hello lorsqu’il rencontre des problèmes.</span><span class="sxs-lookup"><span data-stu-id="3228a-107">It also automatically rolls back hello application toohello previous version upon encountering issues.</span></span> <span data-ttu-id="3228a-108">Mises à niveau de service Fabric application *sans interruption de service*, car l’application hello peut être mis à niveau sans interruption de service.</span><span class="sxs-lookup"><span data-stu-id="3228a-108">Service Fabric application upgrades are *Zero Downtime*, since hello application can be upgraded with no downtime.</span></span> <span data-ttu-id="3228a-109">Ce didacticiel décrit comment toocomplete une mise à niveau propagée à partir de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3228a-109">This tutorial covers how toocomplete a rolling upgrade from Visual Studio.</span></span>

## <a name="step-1-build-and-publish-hello-visual-objects-sample"></a><span data-ttu-id="3228a-110">Étape 1 : Créer et publier des exemples d’objets visuels hello</span><span class="sxs-lookup"><span data-stu-id="3228a-110">Step 1: Build and publish hello Visual Objects sample</span></span>
<span data-ttu-id="3228a-111">Commencez par télécharger hello [objets visuels](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) application à partir de GitHub.</span><span class="sxs-lookup"><span data-stu-id="3228a-111">First, download hello [Visual Objects](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) application from GitHub.</span></span> <span data-ttu-id="3228a-112">Ensuite, générer et publier l’application hello en cliquant sur le projet d’application hello, **VisualObjects**et en sélectionnant hello **publier** dans l’élément de menu hello Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="3228a-112">Then, build and publish hello application by right-clicking on hello application project, **VisualObjects**, and selecting hello **Publish** command in hello Service Fabric menu item.</span></span>

![Menu contextuel pour une application Service Fabric][image1]

<span data-ttu-id="3228a-114">En sélectionnant **publier** affiche une fenêtre contextuelle, et vous pouvez définir hello **cibler profile** trop**PublishProfiles\Local.xml**.</span><span class="sxs-lookup"><span data-stu-id="3228a-114">Selecting **Publish** brings up a popup, and you can set hello **Target profile** too**PublishProfiles\Local.xml**.</span></span> <span data-ttu-id="3228a-115">fenêtre Hello doit ressembler à hello suivant avant de cliquer sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="3228a-115">hello window should look like hello following before you click **Publish**.</span></span>

![Publication d'une application Service Fabric][image2]

<span data-ttu-id="3228a-117">Vous pouvez maintenant cliquer sur **publier** dans la boîte de dialogue hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-117">Now you can click **Publish** in hello dialog box.</span></span> <span data-ttu-id="3228a-118">Vous pouvez utiliser [Service Fabric Explorer tooview hello cluster et hello l’application](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="3228a-118">You can use [Service Fabric Explorer tooview hello cluster and hello application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="3228a-119">Hello application d’objets visuels possède un service web que vous pouvez accéder en tapant les tooby [http://localhost :8081/visualobjects/](http://localhost:8081/visualobjects/) dans la barre d’adresses hello de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="3228a-119">hello Visual Objects application has a web service that you can go tooby typing [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) in hello address bar of your browser.</span></span>  <span data-ttu-id="3228a-120">Vous devez voir les 10 objets visual flottantes déplacer dans l’écran hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-120">You should see 10 floating visual objects moving around on hello screen.</span></span>

<span data-ttu-id="3228a-121">**Remarque :** si trop de déploiement`Cloud.xml` profil (Azure Service Fabric), application hello doit ensuite être disponible à l’adresse **http://{ServiceFabricName}. {} Region}.cloudapp.Azure.com:8081/visualobjects/**.</span><span class="sxs-lookup"><span data-stu-id="3228a-121">**NOTE:** If deploying too`Cloud.xml` profile (Azure Service Fabric), hello application should then be available at **http://{ServiceFabricName}.{Region}.cloudapp.azure.com:8081/visualobjects/**.</span></span> <span data-ttu-id="3228a-122">Assurez-vous que vous n’avez `8081/TCP` configuré Bonjour équilibrage de charge (recherche hello équilibrage de charge Bonjour même groupe de ressources en tant qu’instance de Service Fabric hello).</span><span class="sxs-lookup"><span data-stu-id="3228a-122">Make sure you do have `8081/TCP` configured in hello Load Balancer (find hello Load Balancer in hello same resource group as hello Service Fabric instance).</span></span>

## <a name="step-2-update-hello-visual-objects-sample"></a><span data-ttu-id="3228a-123">Étape 2 : Mettre à jour des exemples d’objets visuels hello</span><span class="sxs-lookup"><span data-stu-id="3228a-123">Step 2: Update hello Visual Objects sample</span></span>
<span data-ttu-id="3228a-124">Vous pouvez remarquer qu’avec la version de hello qui a été déployée à l’étape 1, les objets visuels hello ne pas faire pivoter.</span><span class="sxs-lookup"><span data-stu-id="3228a-124">You might notice that with hello version that was deployed in step 1, hello visual objects do not rotate.</span></span> <span data-ttu-id="3228a-125">Nous allons mettre à niveau de ce tooone application où les objets visuels hello également faire pivoter.</span><span class="sxs-lookup"><span data-stu-id="3228a-125">Let's upgrade this application tooone where hello visual objects also rotate.</span></span>

<span data-ttu-id="3228a-126">Sélectionnez le projet VisualObjects.ActorService hello hello VisualObjects solution et ouvrez hello **VisualObjectActor.cs** fichier.</span><span class="sxs-lookup"><span data-stu-id="3228a-126">Select hello VisualObjects.ActorService project within hello VisualObjects solution, and open hello **VisualObjectActor.cs** file.</span></span> <span data-ttu-id="3228a-127">Dans ce fichier, accédez à toohello méthode `MoveObject`, commentez `visualObject.Move(false)`et ne commentez pas `visualObject.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="3228a-127">Within that file, go toohello method `MoveObject`, comment out `visualObject.Move(false)`, and uncomment `visualObject.Move(true)`.</span></span> <span data-ttu-id="3228a-128">Cette modification de code fait pivoter les objets hello après la mise à niveau de service de hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-128">This code change rotates hello objects after hello service is upgraded.</span></span>  <span data-ttu-id="3228a-129">**Vous pouvez désormais créer (pas la reconstruction) hello solution**, quelles sont les builds hello modifié des projets.</span><span class="sxs-lookup"><span data-stu-id="3228a-129">**Now you can build (not rebuild) hello solution**, which builds hello modified projects.</span></span> <span data-ttu-id="3228a-130">Si vous sélectionnez *tout reconstruire*, vous disposez de versions de hello tooupdate pour tous les hello projets.</span><span class="sxs-lookup"><span data-stu-id="3228a-130">If you select *Rebuild all*, you have tooupdate hello versions for all hello projects.</span></span>

<span data-ttu-id="3228a-131">Nous devons également tooversion notre application.</span><span class="sxs-lookup"><span data-stu-id="3228a-131">We also need tooversion our application.</span></span> <span data-ttu-id="3228a-132">modification de la version de hello toomake une fois avec le bouton droit sur hello **VisualObjects** projet, vous pouvez utiliser Visual Studio de hello **modifier les Versions de manifeste** option.</span><span class="sxs-lookup"><span data-stu-id="3228a-132">toomake hello version changes after you right-click on hello **VisualObjects** project, you can use hello Visual Studio **Edit Manifest Versions** option.</span></span> <span data-ttu-id="3228a-133">Cette option affiche la boîte de dialogue de hello pour les versions de l’édition comme suit :</span><span class="sxs-lookup"><span data-stu-id="3228a-133">Selecting this option brings up hello dialog box for edition versions as follows:</span></span>

![Boîte de dialogue Contrôle de version][image3]

<span data-ttu-id="3228a-135">Mise à jour des versions de hello pour hello modifié des projets et les packages de code, ainsi que de l’application de hello tooversion 2.0.0.</span><span class="sxs-lookup"><span data-stu-id="3228a-135">Update hello versions for hello modified projects and their code packages, along with hello application tooversion 2.0.0.</span></span> <span data-ttu-id="3228a-136">Après les modifications de hello, manifeste de hello doit ressembler à hello suivant (parties en gras permet d’afficher les modifications hello) :</span><span class="sxs-lookup"><span data-stu-id="3228a-136">After hello changes are made, hello manifest should look like hello following (bold portions show hello changes):</span></span>

![Mise à jour des versions][image4]

<span data-ttu-id="3228a-138">outils de Visual Studio Hello faire cumuls automatique des versions lors de la sélection **mettre à jour automatiquement les applications et les versions de service**.</span><span class="sxs-lookup"><span data-stu-id="3228a-138">hello Visual Studio tools can do automatic rollups of versions upon selecting **Automatically update application and service versions**.</span></span> <span data-ttu-id="3228a-139">Si vous utilisez [SemVer](http://www.semver.org), vous avez besoin de code de hello tooupdate et/ou configuration package version uniquement si cette option est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="3228a-139">If you use [SemVer](http://www.semver.org), you need tooupdate hello code and/or configuration package version alone if that option is selected.</span></span>

<span data-ttu-id="3228a-140">Enregistrer les modifications de hello et recherchent hello **mise à niveau hello Application** boîte.</span><span class="sxs-lookup"><span data-stu-id="3228a-140">Save hello changes, and now check hello **Upgrade hello Application** box.</span></span>

## <a name="step-3--upgrade-your-application"></a><span data-ttu-id="3228a-141">Étape 3 : Mettre à niveau votre application</span><span class="sxs-lookup"><span data-stu-id="3228a-141">Step 3:  Upgrade your application</span></span>
<span data-ttu-id="3228a-142">Familiarisez-vous avec hello [paramètres de mise à niveau l’application](service-fabric-application-upgrade-parameters.md) et hello [mise à niveau](service-fabric-application-upgrade.md) tooget une bonne compréhension de hello différentes mise à niveau des paramètres, les délais d’attente et d’intégrité critère qui peuvent être appliquées.</span><span class="sxs-lookup"><span data-stu-id="3228a-142">Familiarize yourself with hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and hello [upgrade process](service-fabric-application-upgrade.md) tooget a good understanding of hello various upgrade parameters, time-outs, and health criterion that can be applied.</span></span> <span data-ttu-id="3228a-143">Pour cette procédure pas à pas, critère d’évaluation de hello service d’intégrité a la valeur par défaut de toohello (mode non contrôlé).</span><span class="sxs-lookup"><span data-stu-id="3228a-143">For this walkthrough, hello service health evaluation criterion is set toohello default (unmonitored mode).</span></span> <span data-ttu-id="3228a-144">Vous pouvez configurer ces paramètres en sélectionnant **configurer les paramètres de mise à niveau** , puis en modifiant les paramètres de hello comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="3228a-144">You can configure these settings by selecting **Configure Upgrade Settings** and then modifying hello parameters as desired.</span></span>

<span data-ttu-id="3228a-145">Est maintenant toutes les applications de hello toostart jeu de mise à niveau en sélectionnant **publier**.</span><span class="sxs-lookup"><span data-stu-id="3228a-145">Now we are all set toostart hello application upgrade by selecting **Publish**.</span></span> <span data-ttu-id="3228a-146">Cette option met à niveau votre tooversion application 2.0.0, dans laquelle faire pivoter les objets hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-146">This option upgrades your application tooversion 2.0.0, in which hello objects rotate.</span></span> <span data-ttu-id="3228a-147">Service Fabric met à niveau un domaine de mise à jour à la fois (certains objets sont mis à jour en premier lieu, suivi par d’autres) et service de hello reste accessible au cours de la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-147">Service Fabric upgrades one update domain at a time (some objects are updated first, followed by others), and hello service remains accessible during hello upgrade.</span></span> <span data-ttu-id="3228a-148">Service d’accès toohello peut être vérifié dans votre client (navigateur).</span><span class="sxs-lookup"><span data-stu-id="3228a-148">Access toohello service can be checked through your client (browser).</span></span>  

<span data-ttu-id="3228a-149">À présent, comme hello continue mise à niveau d’application, vous pouvez le surveiller avec Service Fabric Explorer, à l’aide de hello **mises à niveau en cours d’exécution** onglet sous applications de hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-149">Now, as hello application upgrade proceeds, you can monitor it with Service Fabric Explorer, by using hello **Upgrades in Progress** tab under hello applications.</span></span>

<span data-ttu-id="3228a-150">Dans quelques minutes, tous les domaines de mise à jour doivent être mis à niveau (terminé), et fenêtre de sortie de Visual Studio hello doit également indiquer que la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="3228a-150">In a few minutes, all update domains should be upgraded (completed), and hello Visual Studio output window should also state that hello upgrade is completed.</span></span> <span data-ttu-id="3228a-151">Et vous devez constater que *tous les* rotation d’objets visuels de hello dans la fenêtre du navigateur sont maintenant !</span><span class="sxs-lookup"><span data-stu-id="3228a-151">And you should find that *all* hello visual objects in your browser window are now rotating!</span></span>

<span data-ttu-id="3228a-152">Vous souhaitez tootry modification des versions de hello et le déplacement à partir de la version 2.0.0 tooversion 3.0.0 en guise d’exercice, ou même à partir de la version 2.0.0 sauvegarder tooversion 1.0.0.</span><span class="sxs-lookup"><span data-stu-id="3228a-152">You may want tootry changing hello versions, and moving from version 2.0.0 tooversion 3.0.0 as an exercise, or even from version 2.0.0 back tooversion 1.0.0.</span></span> <span data-ttu-id="3228a-153">Manipuler les délais d’attente et toomake des stratégies de contrôle d’intégrité vous-même connaissent.</span><span class="sxs-lookup"><span data-stu-id="3228a-153">Play with time-outs and health policies toomake yourself familiar with them.</span></span> <span data-ttu-id="3228a-154">Lorsque le déploiement tooan Azure cluster en tant qu’et non cluster local de tooa, paramètres hello utilisés peut-être toodiffer.</span><span class="sxs-lookup"><span data-stu-id="3228a-154">When deploying tooan Azure cluster as opposed tooa local cluster, hello parameters used may have toodiffer.</span></span> <span data-ttu-id="3228a-155">Nous vous recommandons de définir les délais d’attente hello plus restrictives.</span><span class="sxs-lookup"><span data-stu-id="3228a-155">We recommend that you set hello time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3228a-156">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3228a-156">Next steps</span></span>
<span data-ttu-id="3228a-157">[mise à niveau de votre application à l’aide de PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) vous guide à travers une mise à niveau de l’application à l’aide de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3228a-157">[Upgrading your application using PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="3228a-158">Contrôlez les mises à niveau de votre application à l’aide des [paramètres de mise à niveau](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="3228a-158">Control how your application is upgraded by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="3228a-159">Rendre les mises à niveau de votre application compatible par learning comment toouse [sérialisation des données](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="3228a-159">Make your application upgrades compatible by learning how toouse [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="3228a-160">Découvrez comment toouse des fonctionnalités avancées lors de la mise à niveau de votre application en vous reportant trop[rubriques avancées](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="3228a-160">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="3228a-161">Résoudre les problèmes courants dans les mises à niveau de l’application en faisant référence à des étapes de toohello de [résolution des problèmes de mises à niveau de l’application](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="3228a-161">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image1]: media/service-fabric-application-upgrade-tutorial/upgrade7.png
[image2]: media/service-fabric-application-upgrade-tutorial/upgrade1.png
[image3]: media/service-fabric-application-upgrade-tutorial/upgrade5.png
[image4]: media/service-fabric-application-upgrade-tutorial/upgrade6.png
