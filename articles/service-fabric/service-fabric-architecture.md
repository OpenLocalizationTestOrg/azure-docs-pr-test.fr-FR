---
title: "Architecture d’Azure Service Fabric | Microsoft Docs"
description: "Service Fabric est une plateforme de systèmes distribués qui permet de créer des applications évolutives, fiables et faciles à gérer pour le cloud. Cet article illustre l'architecture de Service Fabric."
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 3cf019bf9a08574c984e92985452df438f3eeb77
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 07/11/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="4989a-104">Architecture de Service Fabric</span><span class="sxs-lookup"><span data-stu-id="4989a-104">Service Fabric architecture</span></span>
<span data-ttu-id="4989a-105">Service Fabric est constitué de sous-systèmes en couches.</span><span class="sxs-lookup"><span data-stu-id="4989a-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="4989a-106">Ces sous-systèmes permettent d’écrire des applications qui présentent les caractéristiques suivantes :</span><span class="sxs-lookup"><span data-stu-id="4989a-106">These subsystems enable you to write applications that are:</span></span>

* <span data-ttu-id="4989a-107">Haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="4989a-107">Highly available</span></span>
* <span data-ttu-id="4989a-108">Extensibilité</span><span class="sxs-lookup"><span data-stu-id="4989a-108">Scalable</span></span>
* <span data-ttu-id="4989a-109">Facilité de gestion</span><span class="sxs-lookup"><span data-stu-id="4989a-109">Manageable</span></span>
* <span data-ttu-id="4989a-110">Testable</span><span class="sxs-lookup"><span data-stu-id="4989a-110">Testable</span></span>

<span data-ttu-id="4989a-111">Le diagramme suivant montre les principaux sous-systèmes de Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="4989a-111">The following diagram shows the major subsystems of Service Fabric.</span></span>

![Diagramme de l’architecture de Service Fabric](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="4989a-113">Dans un système distribué, la capacité à communiquer en toute sécurité entre les nœuds d’un cluster est essentielle.</span><span class="sxs-lookup"><span data-stu-id="4989a-113">In a distributed system, the ability to securely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="4989a-114">À la base de la pile se trouve le sous-système de transport, qui fournit une communication sécurisée entre les nœuds.</span><span class="sxs-lookup"><span data-stu-id="4989a-114">At the base of the stack is the transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="4989a-115">Au-dessus du sous-système de transport se trouve le sous-système de fédération, qui associe les différents nœuds en une seule entité (nommée cluster) afin que Service Fabric puisse détecter les défaillances, effectuer le choix de l’instance responsable et fournir un routage cohérent.</span><span class="sxs-lookup"><span data-stu-id="4989a-115">Above the transport subsystem lies the federation subsystem, which clusters the different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="4989a-116">Le sous-système de fiabilité, placé au-dessus du sous-système de fédération, assure la fiabilité des services Service Fabric par le biais de mécanismes tels que la réplication, la gestion des ressources et le basculement.</span><span class="sxs-lookup"><span data-stu-id="4989a-116">The reliability subsystem, layered on top of the federation subsystem, is responsible for the reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="4989a-117">Le sous-système de fédération est situé sous le sous-système d’hébergement et d’activation, qui gère le cycle de vie d’une application sur un nœud unique.</span><span class="sxs-lookup"><span data-stu-id="4989a-117">The federation subsystem also underlies the hosting and activation subsystem, which manages the lifecycle of an application on a single node.</span></span> <span data-ttu-id="4989a-118">Le sous-système de gestion gère le cycle de vie des applications et des services.</span><span class="sxs-lookup"><span data-stu-id="4989a-118">The management subsystem manages the lifecycle of applications and services.</span></span> <span data-ttu-id="4989a-119">Le sous-système de testabilité permet aux développeurs d’applications de tester les services au moyen d’erreurs simulées avant et après le déploiement des applications et des services dans les environnements de production.</span><span class="sxs-lookup"><span data-stu-id="4989a-119">The testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services to production environments.</span></span> <span data-ttu-id="4989a-120">Service Fabric permet de résoudre les emplacements des services par le biais de son sous-système de communication.</span><span class="sxs-lookup"><span data-stu-id="4989a-120">Service Fabric provides the ability to resolve service locations through its communication subsystem.</span></span> <span data-ttu-id="4989a-121">Les modèles de programmation d’application exposés aux développeurs sont placés au-dessus de ces sous-systèmes avec le modèle d’application pour activer les outils.</span><span class="sxs-lookup"><span data-stu-id="4989a-121">The application programming models exposed to developers are layered on top of these subsystems along with the application model to enable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="4989a-122">Sous-système de transport</span><span class="sxs-lookup"><span data-stu-id="4989a-122">Transport subsystem</span></span>
<span data-ttu-id="4989a-123">Le sous-système de transport implémente un canal de communication de datagramme point à point.</span><span class="sxs-lookup"><span data-stu-id="4989a-123">The transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="4989a-124">Ce canal est utilisé pour les communications au sein des clusters Service Fabric et pour les communications entre le cluster Service Fabric et les clients.</span><span class="sxs-lookup"><span data-stu-id="4989a-124">This channel is used for communication within service fabric clusters and communication between the service fabric cluster and clients.</span></span> <span data-ttu-id="4989a-125">Il prend en charge des modèles de communication à sens unique et de type demande-réponse, servant de base pour l’implémentation de la diffusion et de la multidiffusion dans la couche de fédération.</span><span class="sxs-lookup"><span data-stu-id="4989a-125">It supports one-way and request-reply communication patterns, which provides the basis for implementing broadcast and multicast in the Federation layer.</span></span> <span data-ttu-id="4989a-126">Le sous-système de transport sécurise les communications à l'aide de certificats X509 ou de la sécurité Windows.</span><span class="sxs-lookup"><span data-stu-id="4989a-126">The transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="4989a-127">Ce sous-système est utilisé en interne par Service Fabric et n’est pas directement accessible aux développeurs pour la programmation d’applications.</span><span class="sxs-lookup"><span data-stu-id="4989a-127">This subsystem is used internally by Service Fabric and is not directly accessible to developers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="4989a-128">Sous-système de fédération</span><span class="sxs-lookup"><span data-stu-id="4989a-128">Federation subsystem</span></span>
<span data-ttu-id="4989a-129">Pour pouvoir analyser un ensemble de nœuds dans un système distribué, vous devez disposer d’une vue cohérente du système.</span><span class="sxs-lookup"><span data-stu-id="4989a-129">In order to reason about a set of nodes in a distributed system, you need to have a consistent view of the system.</span></span> <span data-ttu-id="4989a-130">Le sous-système de fédération utilise les primitives de communication fournies par le sous-système de transport et assemble les différents nœuds en un seul cluster unifié qu’il peut analyser.</span><span class="sxs-lookup"><span data-stu-id="4989a-130">The federation subsystem uses the communication primitives provided by the transport subsystem and stitches the various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="4989a-131">Il fournit les primitives des systèmes distribués requises par les autres sous-systèmes : détection des défaillances, choix de l'instance responsable et routage cohérent.</span><span class="sxs-lookup"><span data-stu-id="4989a-131">It provides the distributed systems primitives needed by the other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="4989a-132">Le sous-système de fédération repose sur des tables de hachage distribuées avec un espace de jeton de 128 bits.</span><span class="sxs-lookup"><span data-stu-id="4989a-132">The federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="4989a-133">Il crée une topologie en anneau sur ces nœuds, chaque nœud dans l’anneau se voyant allouer un sous-ensemble de l’espace de jeton pour la propriété.</span><span class="sxs-lookup"><span data-stu-id="4989a-133">The subsystem creates a ring topology over the nodes, with each node in the ring being allocated a subset of the token space for ownership.</span></span> <span data-ttu-id="4989a-134">Pour la détection des défaillances, la couche utilise un mécanisme de bail basé sur des pulsations et un arbitrage.</span><span class="sxs-lookup"><span data-stu-id="4989a-134">For failure detection, the layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="4989a-135">Le sous-système de fédération garantit également via des protocoles complexes de jointure et de départ qu'un jeton ne possède qu'un seul propriétaire à tout moment.</span><span class="sxs-lookup"><span data-stu-id="4989a-135">The federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="4989a-136">Cela fournit des garanties de choix d’instance responsable et de routage cohérent.</span><span class="sxs-lookup"><span data-stu-id="4989a-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="4989a-137">Sous-système de fiabilité</span><span class="sxs-lookup"><span data-stu-id="4989a-137">Reliability subsystem</span></span>
<span data-ttu-id="4989a-138">Le sous-système de fiabilité fournit le mécanisme permettant de rendre l’état d’un service de Service Fabric hautement disponible en utilisant le *réplicateur*, *Failover Manager* et l’*équilibreur de ressources*.</span><span class="sxs-lookup"><span data-stu-id="4989a-138">The reliability subsystem provides the mechanism to make the state of a Service Fabric service highly available through the use of the *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="4989a-139">Le réplicateur garantit que les changements de l'état dans le réplica principal de service seront automatiquement répliqués sur les réplicas secondaires, maintenant ainsi la cohérence entre le réplica principal et les réplicas secondaires dans un jeu de réplicas de service.</span><span class="sxs-lookup"><span data-stu-id="4989a-139">The Replicator ensures that state changes in the primary service replica will automatically be replicated to secondary replicas, maintaining consistency between the primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="4989a-140">Le réplicateur est responsable de la gestion du quorum entre les réplicas dans le jeu de réplicas.</span><span class="sxs-lookup"><span data-stu-id="4989a-140">The replicator is responsible for quorum management among the replicas in the replica set.</span></span> <span data-ttu-id="4989a-141">Il interagit avec l’unité de basculement pour obtenir la liste des opérations à répliquer et l’agent de reconfiguration fournit cette liste avec la configuration du jeu de réplicas.</span><span class="sxs-lookup"><span data-stu-id="4989a-141">It interacts with the failover unit to get the list of operations to replicate, and the reconfiguration agent provides it with the configuration of the replica set.</span></span> <span data-ttu-id="4989a-142">Cette configuration indique sur quels réplicas les opérations doivent être répliquées.</span><span class="sxs-lookup"><span data-stu-id="4989a-142">That configuration indicates which replicas the operations need to be replicated.</span></span> <span data-ttu-id="4989a-143">Service Fabric fournit un réplicateur par défaut appelé Fabric Replicator que l’API du modèle de programmation peut utiliser pour rendre l’état d’un service hautement disponible et fiable.</span><span class="sxs-lookup"><span data-stu-id="4989a-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by the programming model API to make the service state highly available and reliable.</span></span>
* <span data-ttu-id="4989a-144">Failover Manager garantit que, quand des nœuds sont ajoutés ou supprimés dans un cluster, la charge est automatiquement redistribuée entre les nœuds disponibles.</span><span class="sxs-lookup"><span data-stu-id="4989a-144">The Failover Manager ensures that when nodes are added to or removed from the cluster, the load is automatically redistributed across the available nodes.</span></span> <span data-ttu-id="4989a-145">Si un nœud du cluster échoue, le cluster reconfigure automatiquement les réplicas de service pour maintenir la disponibilité.</span><span class="sxs-lookup"><span data-stu-id="4989a-145">If a node in the cluster fails, the cluster will automatically reconfigure the service replicas to maintain availability.</span></span>
* <span data-ttu-id="4989a-146">Resource Manager place les réplicas de service dans le domaine de défaillance dans le cluster et garantit que toutes les unités de basculement sont opérationnelles.</span><span class="sxs-lookup"><span data-stu-id="4989a-146">The Resource Manager places service replicas across failure domain in the cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="4989a-147">Resource Manager équilibre également les ressources des services dans le pool partagé sous-jacent de nœuds du cluster pour assurer une répartition uniforme de charge optimale.</span><span class="sxs-lookup"><span data-stu-id="4989a-147">The Resource Manager also balances service resources across the underlying shared pool of cluster nodes to achieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="4989a-148">Sous-système de gestion</span><span class="sxs-lookup"><span data-stu-id="4989a-148">Management subsystem</span></span>
<span data-ttu-id="4989a-149">Le sous-système de gestion fournit une gestion de bout en bout du cycle de vie des applications et des services.</span><span class="sxs-lookup"><span data-stu-id="4989a-149">The management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="4989a-150">Les applets de commande PowerShell et les API d’administration vous permettent d’approvisionner, de déployer, de corriger et de mettre à niveau des applications, ainsi que de supprimer leurs privilèges d’accès, sans aucune perte de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="4989a-150">PowerShell cmdlets and administrative APIs enable you to provision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="4989a-151">Le sous-système de gestion effectue cela via les services répertoriés ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="4989a-151">The management subsystem performs this through the following services.</span></span>

* <span data-ttu-id="4989a-152">**Gestionnaire de cluster**: il s’agit du service principal qui interagit avec le composant de fiabilité Failover Manager pour placer les applications sur les différents nœuds selon les contraintes de placement de service.</span><span class="sxs-lookup"><span data-stu-id="4989a-152">**Cluster Manager**: This is the primary service that interacts with the Failover Manager from reliability to place the applications on the nodes based on the service placement constraints.</span></span> <span data-ttu-id="4989a-153">Resource Manager dans le sous-système de basculement garantit que les contraintes ne sont jamais interrompues.</span><span class="sxs-lookup"><span data-stu-id="4989a-153">The Resource Manager in failover subsystem ensures that the constraints are never broken.</span></span> <span data-ttu-id="4989a-154">Le gestionnaire de cluster gère le cycle de vie des applications de leur approvisionnement à la suppression de leurs privilèges d’accès.</span><span class="sxs-lookup"><span data-stu-id="4989a-154">The cluster manager manages the lifecycle of the applications from provision to de-provision.</span></span> <span data-ttu-id="4989a-155">Il s’intègre au gestionnaire d’intégrité pour garantir que la disponibilité des applications n’est pas perdue du point de vue de l’intégrité sémantique pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="4989a-155">It integrates with the health manager to ensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="4989a-156">**Gestionnaire d’intégrité**: ce service permet la surveillance de l’intégrité des applications, des services et des entités du cluster.</span><span class="sxs-lookup"><span data-stu-id="4989a-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="4989a-157">Les entités du cluster (telles que les nœuds, les partitions de service et les réplicas) peuvent signaler des informations d’intégrité, lesquelles sont alors regroupées dans le magasin d’intégrité centralisé.</span><span class="sxs-lookup"><span data-stu-id="4989a-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into the centralized health store.</span></span> <span data-ttu-id="4989a-158">Ces informations d’intégrité fournissent un instantané de l’intégrité globale à un instant précis des services et des nœuds distribués entre plusieurs nœuds du cluster, ce qui vous permet de prendre les mesures correctives nécessaires.</span><span class="sxs-lookup"><span data-stu-id="4989a-158">This health information provides an overall point-in-time health snapshot of the services and nodes distributed across multiple nodes in the cluster, enabling you to take any needed corrective actions.</span></span> <span data-ttu-id="4989a-159">Les API de requête d’intégrité vous permettent d’exécuter des requêtes sur les événements d’intégrité signalés au sous-système de contrôle d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="4989a-159">Health query APIs enable you to query the health events reported to the health subsystem.</span></span> <span data-ttu-id="4989a-160">Les API de requête d’intégrité retournent les données brutes d’intégrité stockées dans le magasin d’intégrité ou les données d’intégrité interprétées et agrégées pour une entité spécifique du cluster.</span><span class="sxs-lookup"><span data-stu-id="4989a-160">The health query APIs return the raw health data stored in the health store or the aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="4989a-161">**Magasin d’images**: ce service fournit le stockage et la distribution des fichiers binaires d’application.</span><span class="sxs-lookup"><span data-stu-id="4989a-161">**Image Store**: This service provides storage and distribution of the application binaries.</span></span> <span data-ttu-id="4989a-162">Ce service fournit un magasin de fichiers distribués simple dans lequel et à partir duquel les applications sont téléchargées.</span><span class="sxs-lookup"><span data-stu-id="4989a-162">This service provides a simple distributed file store where the applications are uploaded to and downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="4989a-163">Sous-système d'hébergement</span><span class="sxs-lookup"><span data-stu-id="4989a-163">Hosting subsystem</span></span>
<span data-ttu-id="4989a-164">Le gestionnaire de cluster indique au sous-système d'hébergement (en cours d'exécution sur chaque nœud) quels services il doit gérer pour un nœud particulier.</span><span class="sxs-lookup"><span data-stu-id="4989a-164">The cluster manager informs the hosting subsystem (running on each node) which services it needs to manage for a particular node.</span></span> <span data-ttu-id="4989a-165">Le sous-système d’hébergement gère ensuite le cycle de vie de l’application sur ce nœud.</span><span class="sxs-lookup"><span data-stu-id="4989a-165">The hosting subsystem then manages the lifecycle of the application on that node.</span></span> <span data-ttu-id="4989a-166">Il interagit avec les composants de fiabilité et d'intégrité pour garantir que les réplicas sont placés correctement et fonctionnent correctement.</span><span class="sxs-lookup"><span data-stu-id="4989a-166">It interacts with the reliability and health components to ensure that the replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="4989a-167">Sous-système de communication</span><span class="sxs-lookup"><span data-stu-id="4989a-167">Communication subsystem</span></span>
<span data-ttu-id="4989a-168">Ce sous-système fournit une messagerie fiable au sein du cluster et la détection de service via le service d'affectation de noms.</span><span class="sxs-lookup"><span data-stu-id="4989a-168">This subsystem provides reliable messaging within the cluster and service discovery through the Naming service.</span></span> <span data-ttu-id="4989a-169">Le service d’affectation de noms résout les noms des services dans un emplacement du cluster et permet aux utilisateurs de gérer les propriétés et les noms des services.</span><span class="sxs-lookup"><span data-stu-id="4989a-169">The Naming service resolves service names to a location in the cluster and enables users to manage service names and properties.</span></span> <span data-ttu-id="4989a-170">Grâce au service d'affectation de noms, les clients peuvent communiquer en toute sécurité avec n'importe quel nœud du cluster pour résoudre un nom de service et récupérer les métadonnées d'un service.</span><span class="sxs-lookup"><span data-stu-id="4989a-170">Using the Naming service, clients can securely communicate with any node in the cluster to resolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="4989a-171">En utilisant une simple API client d’affectation de noms, les utilisateurs de Service Fabric peuvent développer des services et des clients capables de résoudre l’emplacement réseau actuel malgré le dynamisme des nœuds ou le redimensionnement du cluster.</span><span class="sxs-lookup"><span data-stu-id="4989a-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving the current network location despite node dynamism or the re-sizing of the cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="4989a-172">Sous-système de testabilité</span><span class="sxs-lookup"><span data-stu-id="4989a-172">Testability subsystem</span></span>
<span data-ttu-id="4989a-173">La testabilité est une suite d'outils conçus spécifiquement pour tester les services créés sur la plateforme Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="4989a-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="4989a-174">Les outils permettent à un développeur de provoquer facilement des erreurs significatives et d’exécuter des scénarios de test pour explorer et valider les nombreux états et transitions qu’un service connaît tout au long de sa durée de vie, de manière contrôlée et sécurisée.</span><span class="sxs-lookup"><span data-stu-id="4989a-174">The tools let a developer easily induce meaningful faults and run test scenarios to exercise and validate the numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="4989a-175">La testabilité fournit également un mécanisme permettant d’effectuer des tests de durée plus longue par itération dans le cadre de diverses défaillances possibles, sans aucune perte de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="4989a-175">Testability also provides a mechanism to run longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="4989a-176">Vous bénéficiez ainsi d’un environnement de test en production.</span><span class="sxs-lookup"><span data-stu-id="4989a-176">This provides you with a test-in-production environment.</span></span>

