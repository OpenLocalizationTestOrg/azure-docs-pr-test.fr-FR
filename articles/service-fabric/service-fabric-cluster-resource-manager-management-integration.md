---
title: "aaaService Gestionnaire de ressources de Cluster de l’ensemble fibre optique - intégration de la gestion | Documents Microsoft"
description: "Vue d’ensemble de points d’intégration hello entre hello Gestionnaire de ressources du Cluster et la gestion de l’infrastructure de Service."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 956cd0b8-b6e3-4436-a224-8766320e8cd7
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9a24c9de121fbe2e8e5e8e4d117e64686918936a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="cluster-resource-manager-integration-with-service-fabric-cluster-management"></a><span data-ttu-id="a6b78-103">Intégration de Cluster Resource Manager à la gestion de cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a6b78-103">Cluster resource manager integration with Service Fabric cluster management</span></span>
<span data-ttu-id="a6b78-104">Hello, Gestionnaire de ressources du Cluster Service Fabric ne lecteur mises à niveau dans l’infrastructure de Service, mais il est impliqué.</span><span class="sxs-lookup"><span data-stu-id="a6b78-104">hello Service Fabric Cluster Resource Manager doesn't drive upgrades in Service Fabric, but it is involved.</span></span> <span data-ttu-id="a6b78-105">Hello première manière permet de gestionnaire de ressources du Cluster hello avec la gestion par le suivi hello souhaité état du cluster de hello et services hello qu’il contient.</span><span class="sxs-lookup"><span data-stu-id="a6b78-105">hello first way that hello Cluster Resource Manager helps with management is by tracking hello desired state of hello cluster and hello services inside it.</span></span> <span data-ttu-id="a6b78-106">Hello, Gestionnaire de ressources de Cluster envoie des rapports d’intégrité lorsqu’il ne peut pas mettre le cluster de hello dans la configuration souhaitée de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-106">hello Cluster Resource Manager sends out health reports when it cannot put hello cluster into hello desired configuration.</span></span> <span data-ttu-id="a6b78-107">Par exemple, s’il ne suffit pas hello de capacité Gestionnaire de ressources de Cluster envoie les avertissements et erreurs indiquant hello problème.</span><span class="sxs-lookup"><span data-stu-id="a6b78-107">For example, if there is insufficient capacity hello Cluster Resource Manager sends out health warnings and errors indicating hello problem.</span></span> <span data-ttu-id="a6b78-108">Une autre partie de l’intégration a toodo avec le fonctionnement des mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-108">Another piece of integration has toodo with how upgrades work.</span></span> <span data-ttu-id="a6b78-109">Hello, Gestionnaire de ressources de Cluster modifie son comportement légèrement pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-109">hello Cluster Resource Manager alters its behavior slightly during upgrades.</span></span>  

## <a name="health-integration"></a><span data-ttu-id="a6b78-110">Intégration de l’intégrité</span><span class="sxs-lookup"><span data-stu-id="a6b78-110">Health integration</span></span>
<span data-ttu-id="a6b78-111">Hello Gestionnaire de ressources de Cluster suit en permanence règles hello définies pour placer vos services.</span><span class="sxs-lookup"><span data-stu-id="a6b78-111">hello Cluster Resource Manager constantly tracks hello rules you have defined for placing your services.</span></span> <span data-ttu-id="a6b78-112">Il suit également hello restant de capacité pour chaque mesure sur les nœuds hello dans le cluster de hello et dans le cluster de hello dans sa globalité.</span><span class="sxs-lookup"><span data-stu-id="a6b78-112">It also tracks hello remaining capacity for each metric on hello nodes and in hello cluster and in hello cluster as a whole.</span></span> <span data-ttu-id="a6b78-113">S’il ne peut pas respecter ces règles ou si la capacité est insuffisante, des erreurs et des avertissements d’intégrité sont émis.</span><span class="sxs-lookup"><span data-stu-id="a6b78-113">If it can't satisfy those rules or if there is insufficient capacity, health warnings and errors are emitted.</span></span> <span data-ttu-id="a6b78-114">Par exemple, si un nœud est sur la capacité et hello Gestionnaire de ressources du Cluster essaiera situation de hello toofix en déplaçant des services.</span><span class="sxs-lookup"><span data-stu-id="a6b78-114">For example, if a node is over capacity and hello Cluster Resource Manager will try toofix hello situation by moving services.</span></span> <span data-ttu-id="a6b78-115">Si elle ne peut pas corriger la situation de hello, il émet un avertissement de contrôle d’intégrité indiquant que le nœud est sur la capacité, ainsi que pour les mesures.</span><span class="sxs-lookup"><span data-stu-id="a6b78-115">If it can't correct hello situation it emits a health warning indicating which node is over capacity, and for which metrics.</span></span>

<span data-ttu-id="a6b78-116">Un autre exemple d’avertissements de l’intégrité du Gestionnaire de ressources hello est les violations de contraintes de placement.</span><span class="sxs-lookup"><span data-stu-id="a6b78-116">Another example of hello Resource Manager's health warnings is violations of placement constraints.</span></span> <span data-ttu-id="a6b78-117">Par exemple, si vous avez défini une contrainte de placement (par exemple `“NodeColor == Blue”`) et hello Gestionnaire de ressources détecte une violation de cette contrainte, il émet un avertissement d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="a6b78-117">For example, if you have defined a placement constraint (such as `“NodeColor == Blue”`) and hello Resource Manager detects a violation of that constraint, it emits a health warning.</span></span> <span data-ttu-id="a6b78-118">Cela est vrai pour personnaliser les contraintes et les contraintes par défaut hello (comme les contraintes de domaine d’erreur et de mettre à niveau un domaine hello).</span><span class="sxs-lookup"><span data-stu-id="a6b78-118">This is true for custom constraints and hello default constraints (like hello Fault Domain and Upgrade Domain constraints).</span></span>

<span data-ttu-id="a6b78-119">Voici un exemple de rapport d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="a6b78-119">Here’s an example of one such health report.</span></span> <span data-ttu-id="a6b78-120">Dans ce cas, le rapport d’intégrité de hello est pour l’une des partitions du service hello système.</span><span class="sxs-lookup"><span data-stu-id="a6b78-120">In this case, hello health report is for one of hello system service’s partitions.</span></span> <span data-ttu-id="a6b78-121">message de contrôle d’intégrité Hello indique hello réplicas de cette partition sont empaquetés temporairement dans les domaines de mise à niveau insuffisants.</span><span class="sxs-lookup"><span data-stu-id="a6b78-121">hello health message indicates hello replicas of that partition are temporarily packed into too few Upgrade Domains.</span></span>

```posh
PS C:\Users\User > Get-WindowsFabricPartitionHealth -PartitionId '00000000-0000-0000-0000-000000000001'


PartitionId           : 00000000-0000-0000-0000-000000000001
AggregatedHealthState : Warning
UnhealthyEvaluations  :
                        Unhealthy event: SourceId='System.PLB', Property='ReplicaConstraintViolation_UpgradeDomain', HealthState='Warning', ConsiderWarningAsError=false.

ReplicaHealthStates   :
                        ReplicaId             : 130766528804733380
                        AggregatedHealthState : Ok

                        ReplicaId             : 130766528804577821
                        AggregatedHealthState : Ok

                        ReplicaId             : 130766528854889931
                        AggregatedHealthState : Ok

                        ReplicaId             : 130766528804577822
                        AggregatedHealthState : Ok

                        ReplicaId             : 130837073190680024
                        AggregatedHealthState : Ok

HealthEvents          :
                        SourceId              : System.PLB
                        Property              : ReplicaConstraintViolation_UpgradeDomain
                        HealthState           : Warning
                        SequenceNumber        : 130837100116930204
                        SentAt                : 8/10/2015 7:53:31 PM
                        ReceivedAt            : 8/10/2015 7:53:33 PM
                        TTL                   : 00:01:05
                        Description           : hello Load Balancer has detected a Constraint Violation for this Replica: fabric:/System/FailoverManagerService Secondary Partition 00000000-0000-0000-0000-000000000001 is
                        violating hello Constraint: UpgradeDomain Details: UpgradeDomain ID -- 4, Replica on NodeName -- Node.8 Currently Upgrading -- false Distribution Policy -- Packing
                        RemoveWhenExpired     : True
                        IsExpired             : False
                        Transitions           : Ok->Warning = 8/10/2015 7:13:02 PM, LastError = 1/1/0001 12:00:00 AM
```

<span data-ttu-id="a6b78-122">Voici ce que nous apprend ce message d’intégrité :</span><span class="sxs-lookup"><span data-stu-id="a6b78-122">Here's what this health message is telling us is:</span></span>

1. <span data-ttu-id="a6b78-123">Tous les réplicas hello eux-mêmes sont sains : chacune a AggregatedHealthState : Ok</span><span class="sxs-lookup"><span data-stu-id="a6b78-123">All hello replicas themselves are healthy: Each has AggregatedHealthState : Ok</span></span>
2. <span data-ttu-id="a6b78-124">violation de Hello contrainte de distribution de mise à niveau domaine actuellement en cours.</span><span class="sxs-lookup"><span data-stu-id="a6b78-124">hello Upgrade Domain distribution constraint is currently being violated.</span></span> <span data-ttu-id="a6b78-125">Cela signifie qu’un domaine de mise à niveau particulier compte plus de réplicas que prévu pour cette partition.</span><span class="sxs-lookup"><span data-stu-id="a6b78-125">This means a particular Upgrade Domain has more replicas from this partition than it should.</span></span>
3. <span data-ttu-id="a6b78-126">Le nœud contenant la violation de hello hello réplica à l’origine.</span><span class="sxs-lookup"><span data-stu-id="a6b78-126">Which node contains hello replica causing hello violation.</span></span> <span data-ttu-id="a6b78-127">Dans ce cas, il est nœud hello portant le nom hello « Node.8 »</span><span class="sxs-lookup"><span data-stu-id="a6b78-127">In this case it's hello node with hello name "Node.8"</span></span>
4. <span data-ttu-id="a6b78-128">Si cette partition fait actuellement l’objet d’une mise à niveau (« Currently Upgrading -- false »).</span><span class="sxs-lookup"><span data-stu-id="a6b78-128">Whether an upgrade is currently happening for this partition ("Currently Upgrading -- false")</span></span>
5. <span data-ttu-id="a6b78-129">Hello stratégie de distribution pour ce service : « Distribution stratégie--compression ».</span><span class="sxs-lookup"><span data-stu-id="a6b78-129">hello distribution policy for this service: "Distribution Policy -- Packing".</span></span> <span data-ttu-id="a6b78-130">Cela est régie par hello `RequireDomainDistribution` [stratégie de positionnement](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span><span class="sxs-lookup"><span data-stu-id="a6b78-130">This is governed by hello `RequireDomainDistribution` [placement policy](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span></span> <span data-ttu-id="a6b78-131">« Packing » indique que dans ce cas, la distribution de domaine n’était _pas_ obligatoire. Nous savons donc que la stratégie de positionnement n’a pas été spécifiée pour ce service.</span><span class="sxs-lookup"><span data-stu-id="a6b78-131">"Packing" indicates that in this case DomainDistribution was _not_ required, so we know that placement policy was not specified for this service.</span></span> 
6. <span data-ttu-id="a6b78-132">Lorsque les rapports hello s’est produite - 8/10/2015 7:13:02 PM</span><span class="sxs-lookup"><span data-stu-id="a6b78-132">When hello report happened - 8/10/2015 7:13:02 PM</span></span>

<span data-ttu-id="a6b78-133">Plus d’informations, comme ce que sont activés en toolet production vous connaissez quelque chose s’est produite et il est également utilisé toodetect vous alerte compétences et interrompre les mises à niveau incorrectes.</span><span class="sxs-lookup"><span data-stu-id="a6b78-133">Information like this powers alerts that fire in production toolet you know something has gone wrong and is also used toodetect and halt bad upgrades.</span></span> <span data-ttu-id="a6b78-134">Dans ce cas, nous voulons toosee si nous pouvons déterminer pourquoi hello Gestionnaire de ressources a toopack des réplicas de hello en hello domaine de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-134">In this case, we’d want toosee if we can figure out why hello Resource Manager had toopack hello replicas into hello Upgrade Domain.</span></span> <span data-ttu-id="a6b78-135">En général de livraison sont transitoire étant nœuds hello Bonjour autres domaines de mise à niveau vers le bas, par exemple.</span><span class="sxs-lookup"><span data-stu-id="a6b78-135">Usually packing is transient because hello nodes in hello other Upgrade Domains were down, for example.</span></span>

<span data-ttu-id="a6b78-136">Supposons que hello Gestionnaire de ressources de Cluster tente de tooplace certains services, mais il ne sont pas toutes les solutions qui fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="a6b78-136">Let’s say hello Cluster Resource Manager is trying tooplace some services, but there aren't any solutions that work.</span></span> <span data-ttu-id="a6b78-137">Lorsque les services ne peut pas être placées, il est généralement pour l’une des hello suivant raisons :</span><span class="sxs-lookup"><span data-stu-id="a6b78-137">When services can't be placed, it is usually for one of hello following reasons:</span></span>

1. <span data-ttu-id="a6b78-138">Une condition transitoire rend impossible tooplace cette instance de service ou d’un réplica correctement</span><span class="sxs-lookup"><span data-stu-id="a6b78-138">Some transient condition has made it impossible tooplace this service instance or replica correctly</span></span>
2. <span data-ttu-id="a6b78-139">configuration requise de la sélection élective du service Hello est inacceptable.</span><span class="sxs-lookup"><span data-stu-id="a6b78-139">hello service’s placement requirements are unsatisfiable.</span></span>

<span data-ttu-id="a6b78-140">Dans ces cas, les rapports d’intégrité à partir de hello Gestionnaire de ressources de Cluster vous aider à déterminer pourquoi le service de hello ne peut pas être placé.</span><span class="sxs-lookup"><span data-stu-id="a6b78-140">In these cases, health reports from hello Cluster Resource Manager help you determine why hello service can’t be placed.</span></span> <span data-ttu-id="a6b78-141">Nous appelons cette séquence d’élimination des processus hello contrainte.</span><span class="sxs-lookup"><span data-stu-id="a6b78-141">We call this process hello constraint elimination sequence.</span></span> <span data-ttu-id="a6b78-142">Au cours de le, système de hello Guide contraintes hello configuré qui affectent les enregistrements et les service hello qu’elles éliminent.</span><span class="sxs-lookup"><span data-stu-id="a6b78-142">During it, hello system walks through hello configured constraints affecting hello service and records what they eliminate.</span></span> <span data-ttu-id="a6b78-143">De cette manière lorsque les services ne sont pas en mesure de toobe placée, vous pouvez voir les nœuds qui ont été éliminés et pourquoi.</span><span class="sxs-lookup"><span data-stu-id="a6b78-143">This way when services aren’t able toobe placed, you can see which nodes were eliminated and why.</span></span>

## <a name="constraint-types"></a><span data-ttu-id="a6b78-144">Types de contrainte</span><span class="sxs-lookup"><span data-stu-id="a6b78-144">Constraint types</span></span>
<span data-ttu-id="a6b78-145">Examinons chacune des contraintes différentes de hello dans ces rapports d’intégrité.</span><span class="sxs-lookup"><span data-stu-id="a6b78-145">Let’s talk about each of hello different constraints in these health reports.</span></span> <span data-ttu-id="a6b78-146">Vous verrez les contraintes d’intégrité messages toothese connexes lorsque les réplicas ne peuvent pas être placées.</span><span class="sxs-lookup"><span data-stu-id="a6b78-146">You will see health messages related toothese constraints when replicas can't be placed.</span></span>

* <span data-ttu-id="a6b78-147">**ReplicaExclusionStatic** et **ReplicaExclusionDynamic**: ces contraintes indique qu’une solution a été rejetée, car les deux objets de service à partir de hello même partition auriez toobe placé sur hello même nœud.</span><span class="sxs-lookup"><span data-stu-id="a6b78-147">**ReplicaExclusionStatic** and **ReplicaExclusionDynamic**: These constraints indicates that a solution was rejected because two service objects from hello same partition would have toobe placed on hello same node.</span></span> <span data-ttu-id="a6b78-148">Cette opération n’est pas autorisée, car une défaillance de ce nœud aurait un trop fort impact sur cette partition.</span><span class="sxs-lookup"><span data-stu-id="a6b78-148">This isn’t allowed because then failure of that node would overly impact that partition.</span></span> <span data-ttu-id="a6b78-149">ReplicaExclusionStatic et ReplicaExclusionDynamic sont hello presque les mêmes différences de règle et hello importent peu.</span><span class="sxs-lookup"><span data-stu-id="a6b78-149">ReplicaExclusionStatic and ReplicaExclusionDynamic are almost hello same rule and hello differences don't really matter.</span></span> <span data-ttu-id="a6b78-150">Si vous voyez une séquence d’élimination de contrainte contenant soit hello ReplicaExclusionStatic ou ReplicaExclusionDynamic une contrainte, hello Gestionnaire de ressources du Cluster pense qu’il n’existe pas de suffisamment de nœuds.</span><span class="sxs-lookup"><span data-stu-id="a6b78-150">If you are seeing a constraint elimination sequence containing either hello ReplicaExclusionStatic or ReplicaExclusionDynamic constraint, hello Cluster Resource Manager thinks that there aren’t enough nodes.</span></span> <span data-ttu-id="a6b78-151">Cela nécessite restant toouse des solutions à ces emplacements non valides qui ne sont pas autorisées.</span><span class="sxs-lookup"><span data-stu-id="a6b78-151">This requires remaining solutions toouse these invalid placements which are disallowed.</span></span> <span data-ttu-id="a6b78-152">Hello autres contraintes dans la séquence de hello seront généralement dites-nous pourquoi les nœuds sont éliminés en premier lieu de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-152">hello other constraints in hello sequence will usually tell us why nodes are being eliminated in hello first place.</span></span>
* <span data-ttu-id="a6b78-153">**PlacementConstraint**: Si vous voyez ce message, cela signifie que nous avons éliminé certains nœuds, car ils ne correspondent pas les contraintes de placement du service hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-153">**PlacementConstraint**: If you see this message, it means that we eliminated some nodes because they didn’t match hello service’s placement constraints.</span></span> <span data-ttu-id="a6b78-154">Nous avons suivi des contraintes de placement hello actuellement configuré dans le cadre de ce message.</span><span class="sxs-lookup"><span data-stu-id="a6b78-154">We trace out hello currently configured placement constraints as a part of this message.</span></span> <span data-ttu-id="a6b78-155">Ceci est normal si une contrainte de placement est définie.</span><span class="sxs-lookup"><span data-stu-id="a6b78-155">This is normal if you have a placement constraint defined.</span></span> <span data-ttu-id="a6b78-156">Toutefois, si contrainte de placement provoque incorrectement trop de nœuds toobe éliminé Voici comment vous noterez.</span><span class="sxs-lookup"><span data-stu-id="a6b78-156">However, if placement constraint is incorrectly causing too many nodes toobe eliminated this is how you would notice.</span></span>
* <span data-ttu-id="a6b78-157">**NodeCapacity**: cette contrainte signifie que hello Gestionnaire de ressources de Cluster n’a pas pu placer des réplicas de hello sur hello indiqué nœuds car qui les place sur la capacité.</span><span class="sxs-lookup"><span data-stu-id="a6b78-157">**NodeCapacity**: This constraint means that hello Cluster Resource Manager couldn’t place hello replicas on hello indicated nodes because that would put them over capacity.</span></span>
* <span data-ttu-id="a6b78-158">**Affinité**: cette contrainte indique que nous n’avons pas pu placer les réplicas hello sur les nœuds hello affecté, car cela provoquerait une violation de contrainte d’affinité hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-158">**Affinity**: This constraint indicates that we couldn’t place hello replica on hello affected nodes since it would cause a violation of hello affinity constraint.</span></span> <span data-ttu-id="a6b78-159">Plus d’informations sur la contrainte Affinity, lisez [cet article](service-fabric-cluster-resource-manager-advanced-placement-rules-affinity.md)</span><span class="sxs-lookup"><span data-stu-id="a6b78-159">More information on affinity is in [this article](service-fabric-cluster-resource-manager-advanced-placement-rules-affinity.md)</span></span>
* <span data-ttu-id="a6b78-160">**FaultDomain** et **UpgradeDomain**: cette contrainte élimine les nœuds si placement réplica hello sur hello indiqué nœuds provoquerait de livraison dans un domaine de mise à niveau ou de pannes particulier.</span><span class="sxs-lookup"><span data-stu-id="a6b78-160">**FaultDomain** and **UpgradeDomain**: This constraint eliminates nodes if placing hello replica on hello indicated nodes would cause packing in a particular fault or upgrade domain.</span></span> <span data-ttu-id="a6b78-161">Plusieurs exemples décrivant cette contrainte sont présentées dans la rubrique de hello sur [mise à niveau d’erreur et de contraintes de domaine et le comportement qui en résulte](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="a6b78-161">Several examples discussing this constraint are presented in hello topic on [fault and upgrade domain constraints and resulting behavior](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
* <span data-ttu-id="a6b78-162">**PreferredLocation**: ne devrait plus normalement cette contrainte de suppression de nœuds à partir de la solution de hello, car il s’exécute en guise d’optimisation par défaut.</span><span class="sxs-lookup"><span data-stu-id="a6b78-162">**PreferredLocation**: You shouldn’t normally see this constraint removing nodes from hello solution since it runs as an optimization by default.</span></span> <span data-ttu-id="a6b78-163">Hello préféré contrainte d’emplacement est également présent pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-163">hello preferred location constraint is also present during upgrades.</span></span> <span data-ttu-id="a6b78-164">Au cours de la mise à niveau, il est toowhere de précédent de services toomove utilisé lors de la mise à niveau hello a démarré.</span><span class="sxs-lookup"><span data-stu-id="a6b78-164">During upgrade it is used toomove services back toowhere they were when hello upgrade started.</span></span>

## <a name="blocklisting-nodes"></a><span data-ttu-id="a6b78-165">Mise des nœuds en liste de blocage</span><span class="sxs-lookup"><span data-stu-id="a6b78-165">Blocklisting Nodes</span></span>
<span data-ttu-id="a6b78-166">Un autre contrôle d’intégrité message hello Gestionnaire de ressources du Cluster est lorsque les nœuds sont blocklisted.</span><span class="sxs-lookup"><span data-stu-id="a6b78-166">Another health message hello Cluster Resource Manager reports is when nodes are blocklisted.</span></span> <span data-ttu-id="a6b78-167">La mise des nœuds en liste de blocage peut être considérée comme une contrainte provisoire qui s’applique automatiquement.</span><span class="sxs-lookup"><span data-stu-id="a6b78-167">You can think of blocklisting as a temporary constraint that is automatically applied for you.</span></span> <span data-ttu-id="a6b78-168">Les nœuds sont mis en liste de blocage quand ils subissent des défaillances à répétition pendant le lacement d’instances de ce type de service.</span><span class="sxs-lookup"><span data-stu-id="a6b78-168">Nodes get blocklisted when they experience repeated failures when launching instances of that service type.</span></span> <span data-ttu-id="a6b78-169">Les nœuds sont mis en liste de blocage par type de service,</span><span class="sxs-lookup"><span data-stu-id="a6b78-169">Nodes are blocklisted on a per-service-type basis.</span></span> <span data-ttu-id="a6b78-170">si bien qu’un nœud peut être placé dans une liste de blocage pour un type de service, mais pas pour un autre.</span><span class="sxs-lookup"><span data-stu-id="a6b78-170">A node may be blocklisted for one service type but not another.</span></span> 

<span data-ttu-id="a6b78-171">Vous verrez blocklisting bannir souvent au cours du développement : certains bogue entraîne votre toocrash d’hôte de service au démarrage.</span><span class="sxs-lookup"><span data-stu-id="a6b78-171">You'll see blocklisting kick in often during development: some bug causes your service host toocrash on startup.</span></span> <span data-ttu-id="a6b78-172">Service Fabric tente d’hôte de service hello toocreate plusieurs fois et Échec de hello continue de se produire.</span><span class="sxs-lookup"><span data-stu-id="a6b78-172">Service Fabric tries toocreate hello service host a few times, and hello failure keeps occurring.</span></span> <span data-ttu-id="a6b78-173">Après plusieurs tentatives, nœud de hello obtient blocklisted et hello Gestionnaire de ressources de Cluster va tenter de service de hello toocreate ailleurs.</span><span class="sxs-lookup"><span data-stu-id="a6b78-173">After a few attempts, hello node gets blocklisted, and hello Cluster Resource Manager will try toocreate hello service elsewhere.</span></span> <span data-ttu-id="a6b78-174">Si cette défaillance conserve se produit sur plusieurs nœuds, il est possible que tous les nœuds de valide hello dans hello cluster finissent bloqué.</span><span class="sxs-lookup"><span data-stu-id="a6b78-174">If that failure keeps happening on multiple nodes, it's possible that all of hello valid nodes in hello cluster end up blocked.</span></span> <span data-ttu-id="a6b78-175">Blocklisting peut également supprimer des nœuds autant que pas assez peut démarrer correctement mise à l’échelle de hello service toomeet hello souhaité.</span><span class="sxs-lookup"><span data-stu-id="a6b78-175">Blocklisting cna also remove so many nodes that not enough can successfully launch hello service toomeet hello desired scale.</span></span> <span data-ttu-id="a6b78-176">Vous verrez généralement d’autres erreurs ou avertissements du Gestionnaire de ressources du Cluster de hello indiquant que le service de hello est inférieur à réplica souhaité de hello ou le nombre d’instances, ainsi que les messages de contrôle d’intégrité indiquant le dysfonctionnement hello est qui entraîne un toohello blocklisting en premier lieu de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-176">You'll typically see additional errors or warnings from hello Cluster Resource Manager indicating that hello service is below hello desired replica or instance count, as well as health messages indicating what hello failure is that's leading toohello blocklisting in hello first place.</span></span>

<span data-ttu-id="a6b78-177">La mise en liste de blocage n’est pas une condition permanente.</span><span class="sxs-lookup"><span data-stu-id="a6b78-177">Blocklisting is not a permanent condition.</span></span> <span data-ttu-id="a6b78-178">Après quelques minutes, nœud de hello est supprimée à partir de la liste de blocage hello et Service Fabric peut réactiver les services hello sur ce nœud.</span><span class="sxs-lookup"><span data-stu-id="a6b78-178">After a few minutes, hello node is removed from hello blocklist and Service Fabric may activate hello services on that node again.</span></span> <span data-ttu-id="a6b78-179">Si les services continuent toofail, nœud de hello est blocklisted pour ce type de service.</span><span class="sxs-lookup"><span data-stu-id="a6b78-179">If services continue toofail, hello node is blocklisted for that service type again.</span></span> 

### <a name="constraint-priorities"></a><span data-ttu-id="a6b78-180">Priorités de contrainte</span><span class="sxs-lookup"><span data-stu-id="a6b78-180">Constraint priorities</span></span>

> [!WARNING]
> <span data-ttu-id="a6b78-181">Il n’est pas recommandé de modifier les priorités des contraintes. De plus, cela peut avoir des répercutions défavorables sur votre cluster.</span><span class="sxs-lookup"><span data-stu-id="a6b78-181">Changing constraint priorities is not recommended and may have significant adverse effects on your cluster.</span></span> <span data-ttu-id="a6b78-182">Hello sous informations est fourni à titre de référence de priorités de contrainte par défaut hello et leur comportement.</span><span class="sxs-lookup"><span data-stu-id="a6b78-182">hello below information is provided for reference of hello default constraint priorities and their behavior.</span></span> 
>

<span data-ttu-id="a6b78-183">Toutes ces contraintes, vous avez été pensez « bonjour – je pense que les contraintes de domaine d’erreur sont hello plus important dans mon système.</span><span class="sxs-lookup"><span data-stu-id="a6b78-183">With all of these constraints, you may have been thinking “Hey – I think that fault domain constraints are hello most important thing in my system.</span></span> <span data-ttu-id="a6b78-184">Dans l’ordre tooensure hello contrainte de domaine d’erreur n’est pas n’a pas respecté, j’envisage tooviolate autres contraintes. »</span><span class="sxs-lookup"><span data-stu-id="a6b78-184">In order tooensure hello fault domain constraint isn't violated, I’m willing tooviolate other constraints.”</span></span>

<span data-ttu-id="a6b78-185">Les contraintes peuvent être configurées avec différents niveaux de priorité,</span><span class="sxs-lookup"><span data-stu-id="a6b78-185">Constraints can be configured with different priority levels.</span></span> <span data-ttu-id="a6b78-186">Ces composants sont les suivants :</span><span class="sxs-lookup"><span data-stu-id="a6b78-186">These are:</span></span>

   - <span data-ttu-id="a6b78-187">« stricte » (0)</span><span class="sxs-lookup"><span data-stu-id="a6b78-187">“hard” (0)</span></span>
   - <span data-ttu-id="a6b78-188">« souple » (1)</span><span class="sxs-lookup"><span data-stu-id="a6b78-188">“soft” (1)</span></span>
   - <span data-ttu-id="a6b78-189">« optimisation » (2)</span><span class="sxs-lookup"><span data-stu-id="a6b78-189">“optimization” (2)</span></span>
   - <span data-ttu-id="a6b78-190">« désactivé » (-1).</span><span class="sxs-lookup"><span data-stu-id="a6b78-190">“off” (-1).</span></span> 
   
<span data-ttu-id="a6b78-191">La plupart des contraintes de hello est configurée en tant que disque durs contraintes par défaut.</span><span class="sxs-lookup"><span data-stu-id="a6b78-191">Most of hello constraints are configured as hard constraints by default.</span></span>

<span data-ttu-id="a6b78-192">Il n’est pas rare de modification de la priorité de hello de contraintes.</span><span class="sxs-lookup"><span data-stu-id="a6b78-192">Changing hello priority of constraints is uncommon.</span></span> <span data-ttu-id="a6b78-193">Il y a eu des fois où les priorités de contrainte nécessaire toochange, généralement toowork autour d’un autre bogue ou un autre comportement qui avait un impact sur les environnement de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-193">There have been times where constraint priorities needed toochange, usually toowork around some other bug or behavior that was impacting hello environment.</span></span> <span data-ttu-id="a6b78-194">Généralement une grande souplesse hello de l’infrastructure de priorité de contrainte hello a fonctionné très bien, mais il n’est pas nécessaire de souvent.</span><span class="sxs-lookup"><span data-stu-id="a6b78-194">Generally hello flexibility of hello constraint priority infrastructure has worked very well, but it isn't needed often.</span></span> <span data-ttu-id="a6b78-195">Plupart du temps hello que tout se situe au niveau de leur priorité par défaut.</span><span class="sxs-lookup"><span data-stu-id="a6b78-195">Most of hello time everything sits at their default priorities.</span></span> 

<span data-ttu-id="a6b78-196">niveaux de priorité Hello ne signifient qu’une contrainte donnée _sera_ violées, ni qu’il est toujours rempli.</span><span class="sxs-lookup"><span data-stu-id="a6b78-196">hello priority levels don't mean that a given constraint _will_ be violated, nor that it will always be met.</span></span> <span data-ttu-id="a6b78-197">Les priorités des contraintes définissent l’ordre dans lequel les contraintes sont appliquées.</span><span class="sxs-lookup"><span data-stu-id="a6b78-197">Constraint priorities define an order in which constraints are enforced.</span></span> <span data-ttu-id="a6b78-198">Les priorités définissent les compromis hello lorsqu’il est impossible toosatisfy toutes les contraintes.</span><span class="sxs-lookup"><span data-stu-id="a6b78-198">Priorities define hello tradeoffs when it is impossible toosatisfy all constraints.</span></span> <span data-ttu-id="a6b78-199">Généralement, toutes les contraintes de hello peuvent être satisfaites sauf s’il existe situe ailleurs dans l’environnement de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-199">Usually all hello constraints can be satisfied unless there's something else going on in hello environment.</span></span> <span data-ttu-id="a6b78-200">Quelques exemples de scénarios qui entraîneront des violations de tooconstraint sont des contraintes en conflit, ou un grand nombre de défaillances simultanées.</span><span class="sxs-lookup"><span data-stu-id="a6b78-200">Some examples of scenarios that will lead tooconstraint violations are conflicting constraints, or large numbers of concurrent failures.</span></span>

<span data-ttu-id="a6b78-201">Dans des situations avancées, vous pouvez modifier les priorités de contrainte hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-201">In advanced situations, you can change hello constraint priorities.</span></span> <span data-ttu-id="a6b78-202">Par exemple, imaginons que vous vouliez tooensure qu’affinité serait toujours violée lors de problèmes de capacité des nœuds toosolve nécessaire.</span><span class="sxs-lookup"><span data-stu-id="a6b78-202">For example, say you wanted tooensure that affinity would always be violated when necessary toosolve node capacity issues.</span></span> <span data-ttu-id="a6b78-203">tooachieve, vous pouvez définir la priorité de hello de contrainte d’affinité hello trop « soft » (1) et laisser hello capacité contrainte a la valeur trop « matérielle » (0).</span><span class="sxs-lookup"><span data-stu-id="a6b78-203">tooachieve this, you could set hello priority of hello affinity constraint too“soft” (1) and leave hello capacity constraint set too“hard” (0).</span></span>

<span data-ttu-id="a6b78-204">valeurs de priorité par défaut Hello pour des contraintes différentes hello sont indiquées dans hello suivant la configuration :</span><span class="sxs-lookup"><span data-stu-id="a6b78-204">hello default priority values for hello different constraints are specified in hello following config:</span></span>

<span data-ttu-id="a6b78-205">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="a6b78-205">ClusterManifest.xml</span></span>

```xml
        <Section Name="PlacementAndLoadBalancing">
            <Parameter Name="PlacementConstraintPriority" Value="0" />
            <Parameter Name="CapacityConstraintPriority" Value="0" />
            <Parameter Name="AffinityConstraintPriority" Value="0" />
            <Parameter Name="FaultDomainConstraintPriority" Value="0" />
            <Parameter Name="UpgradeDomainConstraintPriority" Value="1" />
            <Parameter Name="PreferredLocationConstraintPriority" Value="2" />
        </Section>
```

<span data-ttu-id="a6b78-206">via ClusterConfig.json pour les déploiements autonomes ou Template.json pour les clusters hébergés sur Azure :</span><span class="sxs-lookup"><span data-stu-id="a6b78-206">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "PlacementConstraintPriority",
          "value": "0"
      },
      {
          "name": "CapacityConstraintPriority",
          "value": "0"
      },
      {
          "name": "AffinityConstraintPriority",
          "value": "0"
      },
      {
          "name": "FaultDomainConstraintPriority",
          "value": "0"
      },
      {
          "name": "UpgradeDomainConstraintPriority",
          "value": "1"
      },
      {
          "name": "PreferredLocationConstraintPriority",
          "value": "2"
      }
    ]
  }
]
```

## <a name="fault-domain-and-upgrade-domain-constraints"></a><span data-ttu-id="a6b78-207">Contraintes de domaine d’erreur et de domaine de mise à niveau</span><span class="sxs-lookup"><span data-stu-id="a6b78-207">Fault domain and upgrade domain constraints</span></span>
<span data-ttu-id="a6b78-208">Hello, Gestionnaire de ressources du Cluster veut services tookeep réparties sur les domaines d’erreur et la mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-208">hello Cluster Resource Manager wants tookeep services spread out among fault and upgrade domains.</span></span> <span data-ttu-id="a6b78-209">Elle ce modèle en tant que contrainte à l’intérieur du Gestionnaire de ressources Cluster hello moteur.</span><span class="sxs-lookup"><span data-stu-id="a6b78-209">It models this as a constraint inside hello Cluster Resource Manager’s engine.</span></span> <span data-ttu-id="a6b78-210">Pour plus d’informations sur la façon dont elles sont utilisées et leur comportement spécifique, consultez l’article de hello sur [configuration de cluster](service-fabric-cluster-resource-manager-cluster-description.md#fault-and-upgrade-domain-constraints-and-resulting-behavior).</span><span class="sxs-lookup"><span data-stu-id="a6b78-210">For more information on how they are used and their specific behavior, check out hello article on [cluster configuration](service-fabric-cluster-resource-manager-cluster-description.md#fault-and-upgrade-domain-constraints-and-resulting-behavior).</span></span>

<span data-ttu-id="a6b78-211">Hello, Gestionnaire de ressources du Cluster peut-être toopack deux réplicas dans un domaine de mise à niveau dans toodeal d’ordre avec les mises à niveau, les échecs ou les autres violations de contrainte.</span><span class="sxs-lookup"><span data-stu-id="a6b78-211">hello Cluster Resource Manager may need toopack a couple replicas into an upgrade domain in order toodeal with upgrades, failures, or other constraint violations.</span></span> <span data-ttu-id="a6b78-212">Dans des domaines d’erreur ou de mise à niveau de compression normalement se produit uniquement lorsqu’il existe plusieurs échecs ou les autres de l’évolution du système hello empêche la sélection élective appropriés.</span><span class="sxs-lookup"><span data-stu-id="a6b78-212">Packing into fault or upgrade domains normally happens only when there are several failures or other churn in hello system preventing correct placement.</span></span> <span data-ttu-id="a6b78-213">Si vous le souhaitez tooprevent compression même pendant ces situations, vous pouvez utiliser hello `RequireDomainDistribution` [stratégie de positionnement](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span><span class="sxs-lookup"><span data-stu-id="a6b78-213">If you wish tooprevent packing even during these situations, you can utilize hello `RequireDomainDistribution` [placement policy](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md#requiring-replica-distribution-and-disallowing-packing).</span></span> <span data-ttu-id="a6b78-214">Notez que cela peut avoir des effets secondaires et nuire à la disponibilité et à la fiabilité du service. Pensez-y avant toute décision dans ce sens.</span><span class="sxs-lookup"><span data-stu-id="a6b78-214">Note that this may affect service availability and reliability as a side effect, so consider it carefully.</span></span>

<span data-ttu-id="a6b78-215">Si l’environnement de hello est correctement configuré, toutes les contraintes sont respectées pleinement, même pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-215">If hello environment is configured correctly, all constraints are fully respected, even during upgrades.</span></span> <span data-ttu-id="a6b78-216">important Hello est que hello vos contraintes observe Gestionnaire de ressources du Cluster.</span><span class="sxs-lookup"><span data-stu-id="a6b78-216">hello key thing is that hello Cluster Resource Manager is watching out for your constraints.</span></span> <span data-ttu-id="a6b78-217">Lorsqu’il détecte une violation il immédiatement le signale et tente de problème de hello toocorrect.</span><span class="sxs-lookup"><span data-stu-id="a6b78-217">When it detects a violation it immediately reports it and tries toocorrect hello issue.</span></span>

## <a name="hello-preferred-location-constraint"></a><span data-ttu-id="a6b78-218">contrainte d’emplacement Hello préféré</span><span class="sxs-lookup"><span data-stu-id="a6b78-218">hello preferred location constraint</span></span>
<span data-ttu-id="a6b78-219">Hello PreferredLocation contrainte est un peu différent, car elle a deux différentes utilisations.</span><span class="sxs-lookup"><span data-stu-id="a6b78-219">hello PreferredLocation constraint is a little different, as it has two different uses.</span></span> <span data-ttu-id="a6b78-220">D’une part, cette contrainte est utilisée pendant les mises à niveau d’applications.</span><span class="sxs-lookup"><span data-stu-id="a6b78-220">One use of this constraint is during application upgrades.</span></span> <span data-ttu-id="a6b78-221">Hello, Gestionnaire de ressources de Cluster gère automatiquement cette contrainte pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-221">hello Cluster Resource Manager automatically manages this constraint during upgrades.</span></span> <span data-ttu-id="a6b78-222">Il est utilisé tooensure qui une fois la mise à niveau sont terminées réplicas retournent tootheir emplacements initiales.</span><span class="sxs-lookup"><span data-stu-id="a6b78-222">It is used tooensure that when upgrades are complete that replicas return tootheir initial locations.</span></span> <span data-ttu-id="a6b78-223">Hello autres hello PreferredLocation contrainte est utilisé pour hello [ `PreferredPrimaryDomain` stratégie de positionnement](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md).</span><span class="sxs-lookup"><span data-stu-id="a6b78-223">hello other use of hello PreferredLocation constraint is for hello [`PreferredPrimaryDomain` placement policy](service-fabric-cluster-resource-manager-advanced-placement-rules-placement-policies.md).</span></span> <span data-ttu-id="a6b78-224">Ces deux éléments sont des optimisations et hello PreferredLocation contrainte n’est donc hello seule contrainte défini trop « Optimisation » par défaut.</span><span class="sxs-lookup"><span data-stu-id="a6b78-224">Both of these are optimizations, and hence hello PreferredLocation constraint is hello only constraint set too"Optimization" by default.</span></span>

## <a name="upgrades"></a><span data-ttu-id="a6b78-225">Mises à niveau</span><span class="sxs-lookup"><span data-stu-id="a6b78-225">Upgrades</span></span>
<span data-ttu-id="a6b78-226">Hello, Gestionnaire de ressources du Cluster permet également d’applications et mises à niveau de cluster, au cours de laquelle il a deux tâches :</span><span class="sxs-lookup"><span data-stu-id="a6b78-226">hello Cluster Resource Manager also helps during application and cluster upgrades, during which it has two jobs:</span></span>

* <span data-ttu-id="a6b78-227">Assurez-vous que les règles hello du cluster de hello ne sont pas compromis</span><span class="sxs-lookup"><span data-stu-id="a6b78-227">ensure that hello rules of hello cluster are not compromised</span></span>
* <span data-ttu-id="a6b78-228">Essayez d’atteindre de mise à niveau toohelp hello sans heurts</span><span class="sxs-lookup"><span data-stu-id="a6b78-228">try toohelp hello upgrade go smoothly</span></span>

### <a name="keep-enforcing-hello-rules"></a><span data-ttu-id="a6b78-229">Continuer à appliquer les règles de hello</span><span class="sxs-lookup"><span data-stu-id="a6b78-229">Keep enforcing hello rules</span></span>
<span data-ttu-id="a6b78-230">toobe d’essentiel Hello prenant en charge d’est que hello règles – hello stricte les contraintes telles que les contraintes de placement et capacités - sont toujours appliquées pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-230">hello main thing toobe aware of is that hello rules – hello strict constraints like placement constraints and capacities - are still enforced during upgrades.</span></span> <span data-ttu-id="a6b78-231">Les contraintes de placement s’assurent que vos charges de travail s’exécutent uniquement où elles y sont autorisées, notamment pendant les mises à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-231">Placement constraints ensure that your workloads only run where they are allowed to, even during upgrades.</span></span> <span data-ttu-id="a6b78-232">Quand les services sont très ralentis, les mises à niveau peuvent prendre plus de temps.</span><span class="sxs-lookup"><span data-stu-id="a6b78-232">When services are highly constrained, upgrades can take longer.</span></span> <span data-ttu-id="a6b78-233">Lorsque le service de hello ou nœud hello sur qu'elle s’exécute est arrêté pour une mise à jour, il peut y avoir plusieurs options pour où il peut accéder.</span><span class="sxs-lookup"><span data-stu-id="a6b78-233">When hello service or hello node it is running on is brought down for an update there may be few options for where it can go.</span></span>

### <a name="smart-replacements"></a><span data-ttu-id="a6b78-234">Remplacements actifs</span><span class="sxs-lookup"><span data-stu-id="a6b78-234">Smart replacements</span></span>
<span data-ttu-id="a6b78-235">Lorsqu’une mise à niveau démarre, hello Gestionnaire de ressources prend un instantané de la disposition actuelle de hello du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-235">When an upgrade starts, hello Resource Manager takes a snapshot of hello current arrangement of hello cluster.</span></span> <span data-ttu-id="a6b78-236">Comme chaque domaine de mise à niveau terminée, il tente de services hello tooreturn qui étaient dans cette organisation d’origine tootheir de domaine de mise à niveau.</span><span class="sxs-lookup"><span data-stu-id="a6b78-236">As each Upgrade Domain completes, it attempts tooreturn hello services that were in that Upgrade Domain tootheir original arrangement.</span></span> <span data-ttu-id="a6b78-237">De cette manière il existe au maximum deux transitions d’un service au cours de la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-237">This way there are at most two transitions for a service during hello upgrade.</span></span> <span data-ttu-id="a6b78-238">Il existe un déplacement hors du nœud de hello affecté et un replacer.</span><span class="sxs-lookup"><span data-stu-id="a6b78-238">There is one move out of hello affected node and one move back in.</span></span> <span data-ttu-id="a6b78-239">Retour hello toohow cluster ou un service qu'où elle était avant la mise à niveau hello garantit également la mise à niveau hello n’affecte pas la mise en page hello du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-239">Returning hello cluster or service toohow it was before hello upgrade also ensures hello upgrade doesn’t impact hello layout of hello cluster.</span></span> 

### <a name="reduced-churn"></a><span data-ttu-id="a6b78-240">Évolution limitée</span><span class="sxs-lookup"><span data-stu-id="a6b78-240">Reduced churn</span></span>
<span data-ttu-id="a6b78-241">Une autre chose qui se produit pendant les mises à niveau est que hello Gestionnaire de ressources du Cluster désactive l’équilibrage.</span><span class="sxs-lookup"><span data-stu-id="a6b78-241">Another thing that happens during upgrades is that hello Cluster Resource Manager turns off balancing.</span></span> <span data-ttu-id="a6b78-242">Empêche l’équilibrage empêche réactions inutiles toohello mise à niveau lui-même, comme le déplacement des services dans les nœuds qui ont été vidées pour la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-242">Preventing balancing prevents unnecessary reactions toohello upgrade itself, like moving services into nodes that were emptied for hello upgrade.</span></span> <span data-ttu-id="a6b78-243">Si la mise à niveau de hello en question est une mise à niveau de Cluster, cluster entier de hello n’est pas équilibré au cours de la mise à niveau hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-243">If hello upgrade in question is a Cluster upgrade, then hello entire cluster is not balanced during hello upgrade.</span></span> <span data-ttu-id="a6b78-244">Vérifications de contraintes restent actives, mouvement uniquement en fonction de hello proactive équilibrage des métriques est désactivée.</span><span class="sxs-lookup"><span data-stu-id="a6b78-244">Constraint checks stay active, only movement based on hello proactive balancing of metrics is disabled.</span></span>

### <a name="buffered-capacity--upgrade"></a><span data-ttu-id="a6b78-245">Capacité mise en mémoire tampon et mise à niveau</span><span class="sxs-lookup"><span data-stu-id="a6b78-245">Buffered Capacity & Upgrade</span></span>
<span data-ttu-id="a6b78-246">Vous voulez généralement que toocomplete de mise à niveau hello même si le cluster de hello est toofull de contrainte ou de fermeture.</span><span class="sxs-lookup"><span data-stu-id="a6b78-246">Generally you want hello upgrade toocomplete even if hello cluster is constrained or close toofull.</span></span> <span data-ttu-id="a6b78-247">Gestion de la capacité de hello du cluster de hello est encore plus importante pendant les mises à niveau que d’habitude.</span><span class="sxs-lookup"><span data-stu-id="a6b78-247">Managing hello capacity of hello cluster is even more important during upgrades than usual.</span></span> <span data-ttu-id="a6b78-248">En fonction de hello, nombre de domaines de mise à niveau, entre 5 et 20 pour cent de la capacité de doit être migré lors hello mise à niveau via le cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="a6b78-248">Depending on hello number of upgrade domains, between 5 and 20 percent of capacity must be migrated as hello upgrade rolls through hello cluster.</span></span> <span data-ttu-id="a6b78-249">Ce travail a toogo quelque part.</span><span class="sxs-lookup"><span data-stu-id="a6b78-249">That work has toogo somewhere.</span></span> <span data-ttu-id="a6b78-250">Cela est hello où la notion de [mis en mémoire tampon des capacités](service-fabric-cluster-resource-manager-cluster-description.md#buffered-capacity) est utile.</span><span class="sxs-lookup"><span data-stu-id="a6b78-250">This is where hello notion of [buffered capacities](service-fabric-cluster-resource-manager-cluster-description.md#buffered-capacity) is useful.</span></span> <span data-ttu-id="a6b78-251">La capacité mise en mémoire tampon est respectée en phase de fonctionnement normal.</span><span class="sxs-lookup"><span data-stu-id="a6b78-251">Buffered capacity is respected during normal operation.</span></span> <span data-ttu-id="a6b78-252">Hello, Gestionnaire de ressources du Cluster peut se remplir des nœuds de la capacité totale de tootheir (consommation de mémoire tampon de hello) pendant les mises à niveau si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="a6b78-252">hello Cluster Resource Manager may fill nodes up tootheir total capacity (consuming hello buffer) during upgrades if necessary.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a6b78-253">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="a6b78-253">Next steps</span></span>
* <span data-ttu-id="a6b78-254">Démarrer à partir du début de hello et [obtenir une présentation de toohello Gestionnaire de ressources du Cluster Service Fabric](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="a6b78-254">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
