---
title: aaaThrottling dans le Gestionnaire de ressources de cluster Service Fabric hello | Documents Microsoft
description: "Découvrez les accélérateurs de hello tooconfigure fournies par hello Gestionnaire de ressources du Cluster Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f418536911d3e3814e78a4d9f057dfb867ca7c63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="throttling-hello-service-fabric-cluster-resource-manager"></a><span data-ttu-id="d38e1-103">La limitation hello Gestionnaire de ressources du Cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="d38e1-103">Throttling hello Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="d38e1-104">Même si vous avez correctement configuré hello Gestionnaire de ressources du Cluster, le cluster de hello peut obtenir interrompue.</span><span class="sxs-lookup"><span data-stu-id="d38e1-104">Even if you’ve configured hello Cluster Resource Manager correctly, hello cluster can get disrupted.</span></span> <span data-ttu-id="d38e1-105">Par exemple, il peut y avoir nœud et erreur domaine défaillances simultanées - ce qui se passerait si qui s’est produite pendant une mise à niveau ? Hello Gestionnaire de ressources de Cluster tente toujours de toofix tout, consomment des ressources du cluster hello la tentative de cluster de hello tooreorganize et les résoudre.</span><span class="sxs-lookup"><span data-stu-id="d38e1-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade? hello Cluster Resource Manager always tries toofix everything, consuming hello cluster's resources trying tooreorganize and fix hello cluster.</span></span> <span data-ttu-id="d38e1-106">Les limitations permettent une protection afin que le cluster de hello peut utiliser des ressources toostabilize - les nœuds hello reviennent, réparer des partitions de réseau hello, bits corrigés sont déployés.</span><span class="sxs-lookup"><span data-stu-id="d38e1-106">Throttles help provide a backstop so that hello cluster can use resources toostabilize - hello nodes come back, hello network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="d38e1-107">toohelp avec ces types de situations, hello Gestionnaire de ressources du Cluster Service Fabric comprend plusieurs limitations.</span><span class="sxs-lookup"><span data-stu-id="d38e1-107">toohelp with these sorts of situations, hello Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="d38e1-108">Ces limitations sont toutes relativement importantes.</span><span class="sxs-lookup"><span data-stu-id="d38e1-108">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="d38e1-109">En règle générale, elles ne doivent pas être modifiées sans une planification et des tests minutieux.</span><span class="sxs-lookup"><span data-stu-id="d38e1-109">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="d38e1-110">Si vous modifiez les limitations du Gestionnaire de ressources Cluster hello, vous devez la régler les charge réelle de tooyour attendu.</span><span class="sxs-lookup"><span data-stu-id="d38e1-110">If you change hello Cluster Resource Manager's throttles, you should tune them tooyour expected actual load.</span></span> <span data-ttu-id="d38e1-111">Vous pouvez déterminer que vous devez toohave certaines limite en place, même si cela implique de cluster de hello prend plus de temps toostabilize dans certaines situations.</span><span class="sxs-lookup"><span data-stu-id="d38e1-111">You may determine you need toohave some throttles in place, even if it means hello cluster takes longer toostabilize in some situations.</span></span> <span data-ttu-id="d38e1-112">Le test est requis toodetermine hello des valeurs correctes pour les limitations.</span><span class="sxs-lookup"><span data-stu-id="d38e1-112">Testing is required toodetermine hello correct values for throttles.</span></span> <span data-ttu-id="d38e1-113">Les limitations doivent toobe tooallow suffisamment élevée hello cluster toorespond toochanges dans un délai raisonnable et faible suffisamment tooactually empêcher trop de la consommation des ressources.</span><span class="sxs-lookup"><span data-stu-id="d38e1-113">Throttles need toobe high enough tooallow hello cluster toorespond toochanges in a reasonable amount of time, and low enough tooactually prevent too much resource consumption.</span></span> 

<span data-ttu-id="d38e1-114">Limitations, qu'il a été, car ils étaient déjà présents dans un environnement de la ressource d’utiliser plus de hello que nous avons vu des clients.</span><span class="sxs-lookup"><span data-stu-id="d38e1-114">Most of hello time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="d38e1-115">Il peut s’agir la bande passante réseau limitée pour des nœuds individuels ou des disques qui ne sont pas en mesure de toobuild nombre de réplicas avec état dans parallèle en raison des limitations de toothroughput.</span><span class="sxs-lookup"><span data-stu-id="d38e1-115">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able toobuild many stateful replicas in parallel due toothroughput limitations.</span></span> <span data-ttu-id="d38e1-116">Sans les limitations, les opérations pourraient surcharger ces ressources, à l’origine des opérations toofail ou lente.</span><span class="sxs-lookup"><span data-stu-id="d38e1-116">Without throttles, operations could overwhelm these resources, causing operations toofail or be slow.</span></span> <span data-ttu-id="d38e1-117">Dans ces situations clients utilisé des accélérateurs et connaissaient qu’ils ont été extension quantité hello de temps qu’il faudrait hello cluster tooreach un état stable.</span><span class="sxs-lookup"><span data-stu-id="d38e1-117">In these situations customers used throttles and knew they were extending hello amount of time it would take hello cluster tooreach a stable state.</span></span> <span data-ttu-id="d38e1-118">Les clients comprenaient également qu’ils pourraient fonctionner avec une fiabilité globale inférieure pendant l’application des limitations.</span><span class="sxs-lookup"><span data-stu-id="d38e1-118">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-hello-throttles"></a><span data-ttu-id="d38e1-119">Configuration hello accélérateurs</span><span class="sxs-lookup"><span data-stu-id="d38e1-119">Configuring hello throttles</span></span>

<span data-ttu-id="d38e1-120">Service Fabric a deux mécanismes de limitation du nombre de hello des mouvements de réplica.</span><span class="sxs-lookup"><span data-stu-id="d38e1-120">Service Fabric has two mechanisms for throttling hello number of replica movements.</span></span> <span data-ttu-id="d38e1-121">mécanisme par défaut Hello qui existaient avant le Service Fabric 5.7 représente sous forme de nombre absolu de déplacements autorisés de limitation.</span><span class="sxs-lookup"><span data-stu-id="d38e1-121">hello default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="d38e1-122">Il ne fonctionne pas avec des clusters de toutes tailles.</span><span class="sxs-lookup"><span data-stu-id="d38e1-122">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="d38e1-123">En particulier, pour valeur par défaut de clusters volumineux hello valeur peut être insuffisante, ralentir considérablement d’équilibrage de la même lorsqu’il est nécessaire, tout en n’ayant aucun effet dans des clusters plus petits.</span><span class="sxs-lookup"><span data-stu-id="d38e1-123">In particular, for large clusters hello default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="d38e1-124">Ce mécanisme préalable a été remplacé par la limitation basée sur un pourcentage, qui est mieux adapté à avec des clusters dynamiques dans le numéro de hello de services et modification de nœuds régulièrement.</span><span class="sxs-lookup"><span data-stu-id="d38e1-124">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which hello number of services and nodes change regularly.</span></span>

<span data-ttu-id="d38e1-125">les limitations de Hello sont basées sur un pourcentage du nombre de hello de réplicas dans les clusters de hello.</span><span class="sxs-lookup"><span data-stu-id="d38e1-125">hello throttles are based on a percentage of hello number of replicas in hello clusters.</span></span> <span data-ttu-id="d38e1-126">Les accélérateurs Percetage basé activer la règle de hello exprimant : « ne déplacez pas plus de 10 % de réplicas dans un intervalle de 10 minutes », par exemple.</span><span class="sxs-lookup"><span data-stu-id="d38e1-126">Percetage based throttles enable expressing hello rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="d38e1-127">paramètres de configuration de Hello pour la limitation basée sur le pourcentage sont :</span><span class="sxs-lookup"><span data-stu-id="d38e1-127">hello configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="d38e1-128">GlobalMovementThrottleThresholdPercentage - le nombre maximal de mouvements autorisée dans un cluster à tout moment, exprimé en pourcentage du nombre total de réplicas dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="d38e1-128">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="d38e1-129">0 indique aucune limite.</span><span class="sxs-lookup"><span data-stu-id="d38e1-129">0 indicates no limit.</span></span> <span data-ttu-id="d38e1-130">Hello par défaut est 0.</span><span class="sxs-lookup"><span data-stu-id="d38e1-130">hello default value is 0.</span></span> <span data-ttu-id="d38e1-131">Si ce paramètre et le GlobalMovementThrottleThreshold sont spécifiés, puis hello plus conservateur limite est utilisée.</span><span class="sxs-lookup"><span data-stu-id="d38e1-131">If both this setting and GlobalMovementThrottleThreshold are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="d38e1-132">GlobalMovementThrottleThresholdPercentageForPlacement - le nombre maximal de mouvements autorisées pendant la phase de la sélection élective hello, exprimé en pourcentage du nombre total de réplicas dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="d38e1-132">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during hello placement phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="d38e1-133">0 indique aucune limite.</span><span class="sxs-lookup"><span data-stu-id="d38e1-133">0 indicates no limit.</span></span> <span data-ttu-id="d38e1-134">Hello par défaut est 0.</span><span class="sxs-lookup"><span data-stu-id="d38e1-134">hello default value is 0.</span></span> <span data-ttu-id="d38e1-135">Si ce paramètre et le GlobalMovementThrottleThresholdForPlacement sont spécifiés, puis hello plus conservateur limite est utilisée.</span><span class="sxs-lookup"><span data-stu-id="d38e1-135">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="d38e1-136">GlobalMovementThrottleThresholdPercentageForBalancing - le nombre maximal de mouvements autorisé pendant hello l’équilibrage de la phase, exprimé en pourcentage du nombre total de réplicas dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="d38e1-136">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during hello balancing phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="d38e1-137">0 indique aucune limite.</span><span class="sxs-lookup"><span data-stu-id="d38e1-137">0 indicates no limit.</span></span> <span data-ttu-id="d38e1-138">Hello par défaut est 0.</span><span class="sxs-lookup"><span data-stu-id="d38e1-138">hello default value is 0.</span></span> <span data-ttu-id="d38e1-139">Si ce paramètre et le GlobalMovementThrottleThresholdForBalancing sont spécifiés, puis hello plus conservateur limite est utilisée.</span><span class="sxs-lookup"><span data-stu-id="d38e1-139">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then hello more conservative limit is used.</span></span>

<span data-ttu-id="d38e1-140">Lorsque vous spécifiez le pourcentage de l’accélérateur hello, vous spécifiez 5 % comme 0,05.</span><span class="sxs-lookup"><span data-stu-id="d38e1-140">When specifying hello throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="d38e1-141">intervalle de salutation sur lequel ces limitations sont régies est hello GlobalMovementThrottleCountingInterval, qui est exprimée en secondes.</span><span class="sxs-lookup"><span data-stu-id="d38e1-141">hello interval on which these throttles are governed is hello GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="d38e1-142">via ClusterConfig.json pour les déploiements autonomes ou Template.json pour les clusters hébergés sur Azure :</span><span class="sxs-lookup"><span data-stu-id="d38e1-142">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="d38e1-143">Limitations basées sur le nombre par défaut</span><span class="sxs-lookup"><span data-stu-id="d38e1-143">Default count based throttles</span></span>
<span data-ttu-id="d38e1-144">Ces informations sont fournies dans le cas où vous avez d’anciens clusters ou conservez ces configurations en clusters qui ont par la suite été mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="d38e1-144">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="d38e1-145">En règle générale, il est recommandé que ces sont remplacées par hello en pourcentage les limitations ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="d38e1-145">In general, it is recommended that these are replaced with hello percentage-based throttles above.</span></span> <span data-ttu-id="d38e1-146">Étant donné que la limitation basée sur le pourcentage est désactivée par défaut, ces limitations restent hello des accélérateurs de valeur par défaut pour un cluster jusqu'à ce qu’ils sont désactivés et remplacées par les limitations de pourcentage hello.</span><span class="sxs-lookup"><span data-stu-id="d38e1-146">Since percentage-based throttling is disabled by default, these throttles remain hello default throttles for a cluster until they are disabled and replaced with hello percentage-based throttles.</span></span> 

  - <span data-ttu-id="d38e1-147">GlobalMovementThrottleThreshold – ce paramètre contrôle nombre total de hello des mouvements de cluster de hello sur un certain temps.</span><span class="sxs-lookup"><span data-stu-id="d38e1-147">GlobalMovementThrottleThreshold – this setting controls hello total number of movements in hello cluster over some time.</span></span> <span data-ttu-id="d38e1-148">Durée Hello est spécifiée dans les secondes sous la forme hello GlobalMovementThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="d38e1-148">hello amount of time is specified in seconds as hello GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="d38e1-149">valeur par défaut de Hello pour hello GlobalMovementThrottleThreshold est comprise entre 1000 et valeur par défaut de hello pour hello GlobalMovementThrottleCountingInterval est 600.</span><span class="sxs-lookup"><span data-stu-id="d38e1-149">hello default value for hello GlobalMovementThrottleThreshold is 1000 and hello default value for hello GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="d38e1-150">MovementPerPartitionThrottleThreshold – ce paramètre contrôle nombre total de hello des mouvements d’une partition de service sur un certain temps.</span><span class="sxs-lookup"><span data-stu-id="d38e1-150">MovementPerPartitionThrottleThreshold – this setting controls hello total number of movements for any service partition over some time.</span></span> <span data-ttu-id="d38e1-151">Durée Hello est spécifiée dans les secondes sous la forme hello MovementPerPartitionThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="d38e1-151">hello amount of time is specified in seconds as hello MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="d38e1-152">valeur par défaut de Hello pour hello MovementPerPartitionThrottleThreshold est 50 et valeur par défaut de hello pour hello MovementPerPartitionThrottleCountingInterval est 600.</span><span class="sxs-lookup"><span data-stu-id="d38e1-152">hello default value for hello MovementPerPartitionThrottleThreshold is 50 and hello default value for hello MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="d38e1-153">configuration Hello pour ces accélérateurs suit hello même motif comme hello en pourcentage de limitation.</span><span class="sxs-lookup"><span data-stu-id="d38e1-153">hello configuration for these throttles follows hello same pattern as hello percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d38e1-154">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="d38e1-154">Next steps</span></span>
- <span data-ttu-id="d38e1-155">toofind out sur comment hello Gestionnaire de ressources de Cluster gère et équilibre la charge du cluster de hello, consultez l’article de hello sur [équilibrage de charge](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="d38e1-155">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="d38e1-156">Hello, Gestionnaire de ressources du Cluster possède de nombreuses options permettant de décrire le cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="d38e1-156">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="d38e1-157">toofind plus d’informations à leur sujet, consultez cet article sur [décrivant un cluster Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="d38e1-157">toofind out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
