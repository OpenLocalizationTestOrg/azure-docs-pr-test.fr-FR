---
title: aaaDebug microservices Azure dans Windows | Documents Microsoft
description: "Découvrez comment toomonitor et diagnostiquer vos services écrits à l’aide de Microsoft Azure Service Fabric sur un ordinateur de développement local."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 24868aa194b8a28fa3e6de95c1de5506d912a544
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="87f4f-103">Surveillance et diagnostic des services dans une configuration de développement d’ordinateur local</span><span class="sxs-lookup"><span data-stu-id="87f4f-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="87f4f-104">Windows</span><span class="sxs-lookup"><span data-stu-id="87f4f-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="87f4f-105">Linux</span><span class="sxs-lookup"><span data-stu-id="87f4f-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="87f4f-106">Surveillance, détection, diagnostic et résolution des problèmes permettent toocontinue de services avec l’expérience de l’utilisateur toohello perturbations minimales.</span><span class="sxs-lookup"><span data-stu-id="87f4f-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services toocontinue with minimal disruption toohello user experience.</span></span> <span data-ttu-id="87f4f-107">Lors de la surveillance et diagnostic est critiques dans un environnement de production déployée réelle, l’efficacité de hello dépend adopter un modèle semblable au cours du développement de tooensure services qu’ils fonctionnent lorsque vous déplacez le programme d’installation de tooa réel.</span><span class="sxs-lookup"><span data-stu-id="87f4f-107">While monitoring and diagnostics are critical in an actual deployed production environment, hello efficiency will depend on adopting a similar model during development of services tooensure they work when you move tooa real-world setup.</span></span> <span data-ttu-id="87f4f-108">Service Fabric facilite les diagnostics tooimplement service aux développeurs qui peut fonctionner en toute transparence aux configurations de développement local d’ordinateur unique et configurations de cluster de production réel.</span><span class="sxs-lookup"><span data-stu-id="87f4f-108">Service Fabric makes it easy for service developers tooimplement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="87f4f-109">Suivi d’événements pour Windows</span><span class="sxs-lookup"><span data-stu-id="87f4f-109">Event Tracing for Windows</span></span>
<span data-ttu-id="87f4f-110">[Le suivi d’événements pour Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) est hello recommandé de technologie pour le suivi des messages dans l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="87f4f-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is hello recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="87f4f-111">Voici quelques avantages liés à l’utilisation d’ETW :</span><span class="sxs-lookup"><span data-stu-id="87f4f-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="87f4f-112">**ETW est rapide.**</span><span class="sxs-lookup"><span data-stu-id="87f4f-112">**ETW is fast.**</span></span> <span data-ttu-id="87f4f-113">Il a été créé en tant que technologie de suivi avec un impact minimal sur le temps d’exécution du code.</span><span class="sxs-lookup"><span data-stu-id="87f4f-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="87f4f-114">**Le suivi ETW fonctionne parfaitement dans des environnements de développement local ainsi que dans les configurations de cluster réel.**</span><span class="sxs-lookup"><span data-stu-id="87f4f-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="87f4f-115">Cela signifie que vous n’avez pas toorewrite code de traçage lorsque vous êtes prêt toodeploy votre cluster réel tooa de code.</span><span class="sxs-lookup"><span data-stu-id="87f4f-115">This  means you don't have toorewrite your tracing code when you are ready toodeploy your code tooa real cluster.</span></span>
* <span data-ttu-id="87f4f-116">**Le code système de Service Fabric utilise également ETW pour le suivi interne.**</span><span class="sxs-lookup"><span data-stu-id="87f4f-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="87f4f-117">Cela vous permet de tooview vos traces d’application entrelacées avec des traces de l’infrastructure de Service système.</span><span class="sxs-lookup"><span data-stu-id="87f4f-117">This allows you tooview your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="87f4f-118">Cela permet également vous toomore facilement comprendre les séquences hello et les relations entre votre code d’application et les événements dans le système sous-jacent de hello.</span><span class="sxs-lookup"><span data-stu-id="87f4f-118">It also helps you toomore easily understand hello sequences and interrelationships between your application code and events in hello underlying system.</span></span>
* <span data-ttu-id="87f4f-119">**Il existe une prise en charge intégrée de l’infrastructure de Service Visual Studio tools tooview des événements ETW.**</span><span class="sxs-lookup"><span data-stu-id="87f4f-119">**There is built-in support in Service Fabric Visual Studio tools tooview ETW events.**</span></span> <span data-ttu-id="87f4f-120">Événements ETW apparaissent dans hello affichage des événements de Diagnostic de Visual Studio une fois que Visual Studio est correctement configurée avec l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="87f4f-120">ETW events appear in hello Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="87f4f-121">Afficher les événements système de Service Fabric dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="87f4f-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="87f4f-122">Service Fabric émet des événements ETW de développeurs d’applications toohelp comprennent ce qui se passe dans la plateforme de hello.</span><span class="sxs-lookup"><span data-stu-id="87f4f-122">Service Fabric emits ETW events toohelp application developers understand what's happening in hello platform.</span></span> <span data-ttu-id="87f4f-123">Si vous n’avez pas déjà fait, pour commencer, suivez les étapes de hello dans [créer votre première application dans Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="87f4f-123">If you haven't already done so, go ahead and follow hello steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="87f4f-124">Ces informations vous aideront vous obtenez une application en cours d’exécution avec hello Observateur d’événements de Diagnostics affichant des messages de trace hello.</span><span class="sxs-lookup"><span data-stu-id="87f4f-124">This information will help you get an application up and running with hello Diagnostics Events Viewer showing hello trace messages.</span></span>

1. <span data-ttu-id="87f4f-125">Si les diagnostics hello fenêtre événements n’affiche pas automatiquement, accédez à toohello **vue** onglet dans Visual Studio, choisissez **autres fenêtres** , puis **Observateur d’événements de Diagnostic**.</span><span class="sxs-lookup"><span data-stu-id="87f4f-125">If hello diagnostics events window does not automatically show, Go toohello **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="87f4f-126">Chaque événement comporte des informations de métadonnées standard qui vous indique d’événement de hello de nœud, l’application et service hello est issu.</span><span class="sxs-lookup"><span data-stu-id="87f4f-126">Each event has standard metadata information that tells you hello node, application and service hello event is coming from.</span></span> <span data-ttu-id="87f4f-127">Vous pouvez également filtrer la liste des événements hello à l’aide de hello **filtrer les événements** zone en haut de hello hello de fenêtre d’événements.</span><span class="sxs-lookup"><span data-stu-id="87f4f-127">You can also filter hello list of events by using hello **Filter events** box at hello top of hello events window.</span></span> <span data-ttu-id="87f4f-128">Par exemple, vous pouvez filtrer sur **Nom du nœud** ou **Nom du service**.</span><span class="sxs-lookup"><span data-stu-id="87f4f-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="87f4f-129">Et lorsque vous examinez les détails de l’événement, vous pouvez également interrompre à l’aide de hello **suspendre** situé en haut de hello hello de fenêtre d’événements et reprendre ultérieurement sans aucune perte d’événements.</span><span class="sxs-lookup"><span data-stu-id="87f4f-129">And when you're looking at event details, you can also pause by using hello **Pause** button at hello top of hello events window and resume later without any loss of events.</span></span>
   
   ![Observateur d'événements de diagnostic de Visual Studio](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-toohello-application-code"></a><span data-ttu-id="87f4f-131">Ajoutez votre propre code d’application toohello traces personnalisées</span><span class="sxs-lookup"><span data-stu-id="87f4f-131">Add your own custom traces toohello application code</span></span>
<span data-ttu-id="87f4f-132">modèles de projet Visual Studio de Service Fabric Hello contiennent des exemples de code.</span><span class="sxs-lookup"><span data-stu-id="87f4f-132">hello Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="87f4f-133">Hello de code montre comment le code d’application personnalisé tooadd ETW effectue le suivi qui montrent les dans l’Observateur de Visual Studio ETW hello en même temps que les traces du système à partir de l’infrastructure de Service.</span><span class="sxs-lookup"><span data-stu-id="87f4f-133">hello code shows how tooadd custom application code ETW traces that show up in hello Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="87f4f-134">Bonjour avantage de cette méthode est que les métadonnées sont ajoutées automatiquement tootraces et hello Observateur d’événements de Diagnostic Visual Studio est déjà configuré toodisplay les.</span><span class="sxs-lookup"><span data-stu-id="87f4f-134">hello advantage of this method is that metadata is automatically added tootraces, and hello Visual Studio Diagnostic Events Viewer is already configured toodisplay them.</span></span>

<span data-ttu-id="87f4f-135">Pour les projets créés à partir de hello **les modèles de service** (sans état ou avec état) recherche uniquement pour hello `RunAsync` implémentation :</span><span class="sxs-lookup"><span data-stu-id="87f4f-135">For projects created from hello **service templates** (stateless or stateful) just search for hello `RunAsync` implementation:</span></span>

1. <span data-ttu-id="87f4f-136">Hello appel trop`ServiceEventSource.Current.ServiceMessage` Bonjour `RunAsync` méthode montre un exemple d’un suivi ETW personnalisée hello du code d’application.</span><span class="sxs-lookup"><span data-stu-id="87f4f-136">hello call too`ServiceEventSource.Current.ServiceMessage` in hello `RunAsync` method shows an example of a custom ETW trace from hello application code.</span></span>
2. <span data-ttu-id="87f4f-137">Bonjour **ServiceEventSource.cs** fichier, vous trouverez une surcharge pour hello `ServiceEventSource.ServiceMessage` méthode qui doit être utilisé pour les événements à haute fréquence d’échéance tooperformance raisons.</span><span class="sxs-lookup"><span data-stu-id="87f4f-137">In hello **ServiceEventSource.cs** file, you will find an overload for hello `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due tooperformance reasons.</span></span>

<span data-ttu-id="87f4f-138">Pour les projets créés à partir de hello **modèles d’acteur** (sans état ou avec état) :</span><span class="sxs-lookup"><span data-stu-id="87f4f-138">For projects created from hello **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="87f4f-139">Ouvrez hello **« ProjectName » .cs** fichier où *nom_projet* est le nom hello choisi pour votre projet Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="87f4f-139">Open hello **"ProjectName".cs** file where *ProjectName* is hello name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="87f4f-140">Rechercher du code de hello `ActorEventSource.Current.ActorMessage(this, "Doing Work");` Bonjour *DoWorkAsync* (méthode).</span><span class="sxs-lookup"><span data-stu-id="87f4f-140">Find hello code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in hello *DoWorkAsync* method.</span></span>  <span data-ttu-id="87f4f-141">Il s'agit d'un exemple de suivi écrit ETW personnalisé à partir du code d'application.</span><span class="sxs-lookup"><span data-stu-id="87f4f-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="87f4f-142">Dans le fichier **ActorEventSource.cs**, vous trouverez une surcharge pour hello `ActorEventSource.ActorMessage` méthode qui doit être utilisé pour les événements à haute fréquence d’échéance tooperformance raisons.</span><span class="sxs-lookup"><span data-stu-id="87f4f-142">In file **ActorEventSource.cs**, you will find an overload for hello `ActorEventSource.ActorMessage` method that should be used for high-frequency events due tooperformance reasons.</span></span>

<span data-ttu-id="87f4f-143">Après avoir ajouté ETW personnalisé tooyour service code de traçage, vous pouvez générer, déployer et exécuter l’application hello toosee à nouveau votre événement (s) dans l’Observateur d’événements de Diagnostic de hello.</span><span class="sxs-lookup"><span data-stu-id="87f4f-143">After adding custom ETW tracing tooyour service code, you can build, deploy, and run hello application again toosee your event(s) in hello Diagnostic Events Viewer.</span></span> <span data-ttu-id="87f4f-144">Si vous déboguez l’application hello avec **F5**, hello Observateur d’événements de Diagnostic s’ouvre automatiquement.</span><span class="sxs-lookup"><span data-stu-id="87f4f-144">If you debug hello application with **F5**, hello Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87f4f-145">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="87f4f-145">Next steps</span></span>
<span data-ttu-id="87f4f-146">Hello même code de traçage que vous avez ajouté l’application tooyour ci-dessus pour obtenir des diagnostics locales fonctionne avec les outils que vous pouvez utiliser tooview ces événements lors de l’exécution de votre application sur un cluster Azure.</span><span class="sxs-lookup"><span data-stu-id="87f4f-146">hello same tracing code that you added tooyour application above for local diagnostics will work with tools that you can use tooview these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="87f4f-147">Consultez ces articles qui portent sur hello différentes options pour les outils hello et expliquent comment vous pouvez les définir.</span><span class="sxs-lookup"><span data-stu-id="87f4f-147">Check out these articles that discuss hello different options for hello tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="87f4f-148">Mode de journalisation des toocollect avec Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="87f4f-148">How toocollect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="87f4f-149">Agrégation et collection d’événements avec EventFlow</span><span class="sxs-lookup"><span data-stu-id="87f4f-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)

