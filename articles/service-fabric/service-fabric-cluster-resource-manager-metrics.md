---
title: "charge de Azure microservice aaaManage à l’aide de mesures | Documents Microsoft"
description: "Découvrez comment tooconfigure et l’utilisation des mesures dans le Service Fabric toomanage la consommation des ressources de service."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="50f73-103">Gestion de la consommation des ressources et des charges dans Service Fabric à l’aide de mesures</span><span class="sxs-lookup"><span data-stu-id="50f73-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="50f73-104">*Métriques* ressources hello votre attention de services sur et qui sont fourni par les nœuds hello dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="50f73-105">Une métrique est tout ce que vous souhaitez toomanage commande tooimprove ou l’analyse hello des performances de vos services.</span><span class="sxs-lookup"><span data-stu-id="50f73-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="50f73-106">Par exemple, vous pourrez surveiller tooknow de consommation de mémoire si votre service est surchargé.</span><span class="sxs-lookup"><span data-stu-id="50f73-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="50f73-107">Une autre utilisation est toofigure out si le service de hello peut déplacer ailleurs où la mémoire est qu'inférieur contraint ordre tooget améliore les performances.</span><span class="sxs-lookup"><span data-stu-id="50f73-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="50f73-108">Il peut s’agir par exemple de l’utilisation de la mémoire, du disque ou du processeur.</span><span class="sxs-lookup"><span data-stu-id="50f73-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="50f73-109">Ces mesures sont des mesures physiques, les ressources qui correspondent toophysical des ressources sur le nœud hello nécessitant toobe géré.</span><span class="sxs-lookup"><span data-stu-id="50f73-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="50f73-110">Les mesures peuvent également être (et sont généralement) des mesures logiques.</span><span class="sxs-lookup"><span data-stu-id="50f73-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="50f73-111">Les mesures logiques sont des éléments tels que « MyWorkQueueDepth », « MessagesToProcess » ou « TotalRecords ».</span><span class="sxs-lookup"><span data-stu-id="50f73-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="50f73-112">Métriques logiques sont définies par l’application et indirectement correspondent la consommation des ressources physiques toosome.</span><span class="sxs-lookup"><span data-stu-id="50f73-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="50f73-113">Métriques logiques sont courantes, car il peut être toomeasure dur et la consommation des ressources physiques sur une base par service rapports.</span><span class="sxs-lookup"><span data-stu-id="50f73-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="50f73-114">complexité Hello de mesure et de rapports de vos propres mesures physique est également pourquoi le Service Fabric fournit certaines mesures par défaut.</span><span class="sxs-lookup"><span data-stu-id="50f73-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="50f73-115">Mesures par défaut</span><span class="sxs-lookup"><span data-stu-id="50f73-115">Default metrics</span></span>
<span data-ttu-id="50f73-116">Supposons que vous souhaitez tooget démarré l’écriture et le déploiement de votre service.</span><span class="sxs-lookup"><span data-stu-id="50f73-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="50f73-117">À ce stade, vous ne connaissez pas les ressources physiques ou logiques qu’il consomme.</span><span class="sxs-lookup"><span data-stu-id="50f73-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="50f73-118">Pas de problème !</span><span class="sxs-lookup"><span data-stu-id="50f73-118">That’s fine!</span></span> <span data-ttu-id="50f73-119">Hello, Gestionnaire de ressources du Cluster Service Fabric utilise certaines mesures par défaut lorsque aucune autre mesure n’est spécifiés.</span><span class="sxs-lookup"><span data-stu-id="50f73-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="50f73-120">Il s'agit de :</span><span class="sxs-lookup"><span data-stu-id="50f73-120">They are:</span></span>

  - <span data-ttu-id="50f73-121">PrimaryCount - nombre de réplicas principaux sur le nœud de hello</span><span class="sxs-lookup"><span data-stu-id="50f73-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="50f73-122">ReplicaCount - nombre total de réplicas sur le nœud de hello avec état</span><span class="sxs-lookup"><span data-stu-id="50f73-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="50f73-123">Count : nombre de tous les objets de service (avec et sans état) sur le nœud de hello</span><span class="sxs-lookup"><span data-stu-id="50f73-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="50f73-124">Mesure</span><span class="sxs-lookup"><span data-stu-id="50f73-124">Metric</span></span> | <span data-ttu-id="50f73-125">Charge de l’instance sans état</span><span class="sxs-lookup"><span data-stu-id="50f73-125">Stateless Instance Load</span></span> | <span data-ttu-id="50f73-126">Charge secondaire avec état</span><span class="sxs-lookup"><span data-stu-id="50f73-126">Stateful Secondary Load</span></span> | <span data-ttu-id="50f73-127">Charge principale avec état</span><span class="sxs-lookup"><span data-stu-id="50f73-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="50f73-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="50f73-128">PrimaryCount</span></span> |<span data-ttu-id="50f73-129">0</span><span class="sxs-lookup"><span data-stu-id="50f73-129">0</span></span> |<span data-ttu-id="50f73-130">0</span><span class="sxs-lookup"><span data-stu-id="50f73-130">0</span></span> |<span data-ttu-id="50f73-131">1</span><span class="sxs-lookup"><span data-stu-id="50f73-131">1</span></span> |
| <span data-ttu-id="50f73-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="50f73-132">ReplicaCount</span></span> |<span data-ttu-id="50f73-133">0</span><span class="sxs-lookup"><span data-stu-id="50f73-133">0</span></span> |<span data-ttu-id="50f73-134">1</span><span class="sxs-lookup"><span data-stu-id="50f73-134">1</span></span> |<span data-ttu-id="50f73-135">1</span><span class="sxs-lookup"><span data-stu-id="50f73-135">1</span></span> |
| <span data-ttu-id="50f73-136">Nombre</span><span class="sxs-lookup"><span data-stu-id="50f73-136">Count</span></span> |<span data-ttu-id="50f73-137">1</span><span class="sxs-lookup"><span data-stu-id="50f73-137">1</span></span> |<span data-ttu-id="50f73-138">1</span><span class="sxs-lookup"><span data-stu-id="50f73-138">1</span></span> |<span data-ttu-id="50f73-139">1</span><span class="sxs-lookup"><span data-stu-id="50f73-139">1</span></span> |

<span data-ttu-id="50f73-140">Pour les charges de travail de base, de mesures par défaut hello fournissent une distribution acceptable de travail dans un cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="50f73-141">Dans l’exemple suivant de hello, voyons que se passe-t-il quand nous créer deux services et reposent sur les mesures par défaut de hello pour équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="50f73-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="50f73-142">Hello premier service est un service avec état avec trois partitions et un réplica de la cible défini de trois.</span><span class="sxs-lookup"><span data-stu-id="50f73-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="50f73-143">service de deuxième Hello est un service sans état avec une partition et un nombre d’instances de trois.</span><span class="sxs-lookup"><span data-stu-id="50f73-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="50f73-144">Voici ce que vous obtenez :</span><span class="sxs-lookup"><span data-stu-id="50f73-144">Here's what you get:</span></span>

<span data-ttu-id="50f73-145"><center>
![Disposition du cluster avec les mesures par défaut][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="50f73-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="50f73-146">Certains toonote choses :</span><span class="sxs-lookup"><span data-stu-id="50f73-146">Some things toonote:</span></span>
  - <span data-ttu-id="50f73-147">Les réplicas principaux pour un service avec état hello sont réparties entre plusieurs nœuds</span><span class="sxs-lookup"><span data-stu-id="50f73-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="50f73-148">Réplicas pour hello même partition se trouvent sur différents nœuds</span><span class="sxs-lookup"><span data-stu-id="50f73-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="50f73-149">Nombre total de Hello des couleurs primaires et secondaires est distribué dans le cluster de hello</span><span class="sxs-lookup"><span data-stu-id="50f73-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="50f73-150">Nombre total de Hello des objets de service est allouée sur chaque nœud</span><span class="sxs-lookup"><span data-stu-id="50f73-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="50f73-151">Bien !</span><span class="sxs-lookup"><span data-stu-id="50f73-151">Good!</span></span>

<span data-ttu-id="50f73-152">mesures par défaut de Hello fonctionnent très bien en tant qu’un point de départ.</span><span class="sxs-lookup"><span data-stu-id="50f73-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="50f73-153">Toutefois, de mesures par défaut hello uniquement transitent vous jusqu'à présent.</span><span class="sxs-lookup"><span data-stu-id="50f73-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="50f73-154">Par exemple : quelle est probabilité hello que hello partitionnement schéma sélectionnées résultats parfaitement même l’utilisation de par toutes les partitions ?</span><span class="sxs-lookup"><span data-stu-id="50f73-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="50f73-155">Quelle est la probabilité hello hello charge pour un service donné est constante au fil du temps, ou simplement hello identiques sur plusieurs partitions maintenant ?</span><span class="sxs-lookup"><span data-stu-id="50f73-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="50f73-156">Vous pouvez exécuter avec juste les mesures par défaut hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="50f73-157">Toutefois, cette approche signifie que l’utilisation de votre cluster est inférieure et plus irrégulière que ce que vous souhaitez.</span><span class="sxs-lookup"><span data-stu-id="50f73-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="50f73-158">Il s’agit de mesures par défaut hello ne sont pas adaptatives et supposent que tout est équivalent.</span><span class="sxs-lookup"><span data-stu-id="50f73-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="50f73-159">Par exemple, un serveur principal est occupé et un qui n’est pas les deux contribuent métrique de PrimaryCount toohello « 1 ».</span><span class="sxs-lookup"><span data-stu-id="50f73-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="50f73-160">Dans le pire des cas hello, à l’aide uniquement de mesures par défaut hello peut également entraîner nœuds overscheduled, ce qui entraîne des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="50f73-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="50f73-161">Si vous êtes intéressé par mise en route hello pleinement parti de votre cluster et comment éviter les problèmes de performances, vous devez toouse des mesures personnalisées et les rapports de la charge dynamique.</span><span class="sxs-lookup"><span data-stu-id="50f73-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="50f73-162">Mesures personnalisées</span><span class="sxs-lookup"><span data-stu-id="50f73-162">Custom metrics</span></span>
<span data-ttu-id="50f73-163">Métriques sont configurés sur une base par-service-instance nommée lorsque vous créez un service de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="50f73-164">N’importe quelle mesure présente un certain nombre de propriétés qui la décrivent : un nom, un poids et une charge par défaut.</span><span class="sxs-lookup"><span data-stu-id="50f73-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="50f73-165">: Métrique hello nom de métrique de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="50f73-166">nom de la métrique Hello est un identificateur unique pour la métrique hello cluster hello du point de vue du Gestionnaire de ressources hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="50f73-167">Poids : Poids (métrique) définit l’importance de cette mesure en toohello relatif autres métriques pour ce service.</span><span class="sxs-lookup"><span data-stu-id="50f73-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="50f73-168">Chargement de la valeur par défaut : charge de hello par défaut est représentée différemment selon que le service de hello est sans état ou avec état.</span><span class="sxs-lookup"><span data-stu-id="50f73-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="50f73-169">Pour les services sans état, chaque mesure présente une propriété unique nommée DefaultLoad.</span><span class="sxs-lookup"><span data-stu-id="50f73-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="50f73-170">Pour les services avec état, vous devez définir les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="50f73-170">For stateful services you define:</span></span>
    * <span data-ttu-id="50f73-171">PrimaryDefaultLoad : quantité de cette mesure par défaut de hello ce service consomme lorsqu’il est un serveur principal</span><span class="sxs-lookup"><span data-stu-id="50f73-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="50f73-172">SecondaryDefaultLoad : délai par défaut hello cette mesure de que ce service utilise lorsqu’il s’agit d’une base de données secondaire</span><span class="sxs-lookup"><span data-stu-id="50f73-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="50f73-173">Si vous définissez des mesures personnalisées et souhaitez too_also_ utiliser les mesures par défaut hello, vous devez too_explicitly_ ajouter de mesures par défaut hello sauvegarder et définissent le poids et des valeurs pour ces.</span><span class="sxs-lookup"><span data-stu-id="50f73-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="50f73-174">Il s’agit, car vous devez définir la relation hello entre de mesures par défaut hello et des mesures personnalisées.</span><span class="sxs-lookup"><span data-stu-id="50f73-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="50f73-175">Peut-être accordez-vous plus d’importance au paramètre ConnectionCount ou WorkQueueDepth qu’à la distribution principale.</span><span class="sxs-lookup"><span data-stu-id="50f73-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="50f73-176">Par poids par défaut hello hello PrimaryCount métrique est élevée, ce qui fait que vous tooreduce il tooMedium lorsque vous ajoutez vos autres tooensure métriques qu’ils sont prioritaires.</span><span class="sxs-lookup"><span data-stu-id="50f73-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="50f73-177">Exemple de définition de mesures pour votre service</span><span class="sxs-lookup"><span data-stu-id="50f73-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="50f73-178">Supposons que vous souhaitez hello configuration suivante :</span><span class="sxs-lookup"><span data-stu-id="50f73-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="50f73-179">Votre service signale une mesure nommée « ConnectionCount »</span><span class="sxs-lookup"><span data-stu-id="50f73-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="50f73-180">Vous souhaitez également que les mesures de toouse hello par défaut</span><span class="sxs-lookup"><span data-stu-id="50f73-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="50f73-181">Vous avez effectué des mesures et savez que normalement un réplica principal de ce service utilise jusqu’à 20 unités de la mesure « ConnectionCount »</span><span class="sxs-lookup"><span data-stu-id="50f73-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="50f73-182">Les réplicas secondaires utilisent 5 unités de la mesure « ConnectionCount »</span><span class="sxs-lookup"><span data-stu-id="50f73-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="50f73-183">Vous savez que « ConnectionCount » est hello décisif en termes de gestion des performances hello de ce service particulier</span><span class="sxs-lookup"><span data-stu-id="50f73-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="50f73-184">Mais vous souhaitez néanmoins que les réplicas principaux soient équilibrés.</span><span class="sxs-lookup"><span data-stu-id="50f73-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="50f73-185">L’équilibrage des réplicas principaux est généralement une bonne solution.</span><span class="sxs-lookup"><span data-stu-id="50f73-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="50f73-186">Cela permet d’éviter la perte de hello d’un domaine de nœud ou une erreur d’affecter une majorité des réplicas principaux en même temps.</span><span class="sxs-lookup"><span data-stu-id="50f73-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="50f73-187">Dans le cas contraire, conviennent de mesures par défaut hello</span><span class="sxs-lookup"><span data-stu-id="50f73-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="50f73-188">Voici le code hello que vous écririez toocreate un service avec cette configuration de la métrique :</span><span class="sxs-lookup"><span data-stu-id="50f73-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="50f73-189">Code :</span><span class="sxs-lookup"><span data-stu-id="50f73-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="50f73-190">PowerShell :</span><span class="sxs-lookup"><span data-stu-id="50f73-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="50f73-191">Hello exemples ci-dessus et hello reste de ce document décrivent les mesures de gestion sur une base par nommé-service.</span><span class="sxs-lookup"><span data-stu-id="50f73-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="50f73-192">Il est également possible toodefine les métriques pour vos services au niveau de service de hello _type_ niveau.</span><span class="sxs-lookup"><span data-stu-id="50f73-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="50f73-193">Cette opération s’effectue en les spécifiant dans vos manifestes de service.</span><span class="sxs-lookup"><span data-stu-id="50f73-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="50f73-194">La définition des mesures au niveau du type n’est pas recommandée pour plusieurs raisons.</span><span class="sxs-lookup"><span data-stu-id="50f73-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="50f73-195">Hello première parce que les noms de métrique sont souvent spécifiques à l’environnement.</span><span class="sxs-lookup"><span data-stu-id="50f73-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="50f73-196">Sauf s’il existe un contrat entreprise en place, il se peut que vous ne peut pas être sûr de que cette métrique hello « Cœurs » dans un environnement n’est pas « MiliCores » ou « Cœurs » dans d’autres.</span><span class="sxs-lookup"><span data-stu-id="50f73-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="50f73-197">Si vos métriques sont définis dans votre manifeste, vous devez toocreate nouveaux manifestes par l’environnement.</span><span class="sxs-lookup"><span data-stu-id="50f73-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="50f73-198">Cela entraîne généralement prolifération tooa de manifestes différents avec que des différences mineures, ce qui peuvent provoquer des difficultés de toomanagement.</span><span class="sxs-lookup"><span data-stu-id="50f73-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="50f73-199">Les charges de mesure sont couramment attribuées pour chaque service nommé.</span><span class="sxs-lookup"><span data-stu-id="50f73-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="50f73-200">Par exemple, supposons que vous créez une instance de hello entretenir pour ClientA envisage de toouse que peu.</span><span class="sxs-lookup"><span data-stu-id="50f73-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="50f73-201">Supposons également que vous créez une autre instance de service pour un Client B disposant d’une plus grande charge de travail.</span><span class="sxs-lookup"><span data-stu-id="50f73-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="50f73-202">Dans ce cas, il vous faudrait par défaut de hello tootweak charge pour ces services.</span><span class="sxs-lookup"><span data-stu-id="50f73-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="50f73-203">Si vous avez des métriques et charges définies via les manifestes et que vous souhaitez toosupport ce scénario, il requiert l’autre application et les types de service pour chaque client.</span><span class="sxs-lookup"><span data-stu-id="50f73-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="50f73-204">les valeurs Hello définies au moment de la création du service remplacent ceux définis dans le manifeste de hello, vous pouvez donc utilisez tooset hello spécifique utilisé par défaut par.</span><span class="sxs-lookup"><span data-stu-id="50f73-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="50f73-205">Toutefois, ce qui entraîne une valeurs hello déclarés dans la correspondance de toonot hello manifestes avec que ces service hello s’exécute.</span><span class="sxs-lookup"><span data-stu-id="50f73-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="50f73-206">Cela peut entraîner des tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="50f73-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="50f73-207">En guise de rappel : Si vous souhaitez simplement des mesures de toouse hello par défaut, vous ne la collecte de métriques tootouch hello du tout besoin ou effectuer d’action particulière lorsque vous créez votre service.</span><span class="sxs-lookup"><span data-stu-id="50f73-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="50f73-208">mesures par défaut de Hello obtient automatiquement utilisées lorsque aucun autre ne sont définies.</span><span class="sxs-lookup"><span data-stu-id="50f73-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="50f73-209">À présent, passons en revue chacun de ces paramètres plus en détail et discutez de comportement de hello son influence sur.</span><span class="sxs-lookup"><span data-stu-id="50f73-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="50f73-210">charger</span><span class="sxs-lookup"><span data-stu-id="50f73-210">Load</span></span>
<span data-ttu-id="50f73-211">Hello point ensemble de mesures est toorepresent une charge.</span><span class="sxs-lookup"><span data-stu-id="50f73-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="50f73-212">Une *charge* correspond à la quantité d’une mesure spécifique qui est consommée par une instance ou un réplica de service sur un nœud donné.</span><span class="sxs-lookup"><span data-stu-id="50f73-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="50f73-213">La charge peut être configurée en presque n’importe quel point.</span><span class="sxs-lookup"><span data-stu-id="50f73-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="50f73-214">Par exemple :</span><span class="sxs-lookup"><span data-stu-id="50f73-214">For example:</span></span>

  - <span data-ttu-id="50f73-215">La charge peut être définie lors de la création d’un service.</span><span class="sxs-lookup"><span data-stu-id="50f73-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="50f73-216">Il s’agit d’une _charge par défaut_.</span><span class="sxs-lookup"><span data-stu-id="50f73-216">This is called _default load_.</span></span>
  - <span data-ttu-id="50f73-217">Hello métrique, y compris la valeur par défaut chargées, pour un service peut mis à jour une fois que le service de hello est créé.</span><span class="sxs-lookup"><span data-stu-id="50f73-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="50f73-218">Il s’agit de la _mise à jour d’un service_.</span><span class="sxs-lookup"><span data-stu-id="50f73-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="50f73-219">charges Hello pour une partition donnée peuvent être réinitialisation toohello les valeurs par défaut pour ce service.</span><span class="sxs-lookup"><span data-stu-id="50f73-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="50f73-220">Il s’agit de la _réinitialisation d’une charge de partition_.</span><span class="sxs-lookup"><span data-stu-id="50f73-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="50f73-221">La charge peut être dynamiquement signalée pour chaque objet de service lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="50f73-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="50f73-222">Il s’agit du _signalement d’une charge_.</span><span class="sxs-lookup"><span data-stu-id="50f73-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="50f73-223">Ces stratégies peuvent être utilisés au sein de hello même pendant sa durée de vie du service.</span><span class="sxs-lookup"><span data-stu-id="50f73-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="50f73-224">Charge par défaut</span><span class="sxs-lookup"><span data-stu-id="50f73-224">Default load</span></span>
<span data-ttu-id="50f73-225">*Par défaut charge* est la quantité de mesure hello consomme de chaque objet de service (instance sans état ou réplica avec état) de ce service.</span><span class="sxs-lookup"><span data-stu-id="50f73-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="50f73-226">Hello Gestionnaire de ressources de Cluster utilise ce numéro pour la charge de l’objet de service hello hello jusqu'à ce qu’il reçoit d’autres informations, tels qu’un rapport de charge dynamique.</span><span class="sxs-lookup"><span data-stu-id="50f73-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="50f73-227">Pour les services plus simples, charge de hello par défaut est une définition statique.</span><span class="sxs-lookup"><span data-stu-id="50f73-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="50f73-228">charge de Hello par défaut n’est jamais mis à jour et est utilisé pour la durée de vie hello du service de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="50f73-229">Par défaut charge fonctionne très bien pour les scénarios où certaines quantités de ressources sont des charges de travail dédié toodifferent et ne changent pas de planification simple.</span><span class="sxs-lookup"><span data-stu-id="50f73-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="50f73-230">Pour plus d’informations sur la gestion de la capacité et en définissant des capacités pour les nœuds hello dans votre cluster, consultez [cet article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="50f73-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="50f73-231">Hello Gestionnaire de ressources du Cluster permet aux services avec état toospecify une charge par défaut différent de couleurs primaires et secondaires.</span><span class="sxs-lookup"><span data-stu-id="50f73-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="50f73-232">Services sans état peuvent spécifier uniquement une valeur qui applique des instances de tooall.</span><span class="sxs-lookup"><span data-stu-id="50f73-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="50f73-233">Pour les services avec état, chargement par défaut de hello pour les réplicas principal et secondaire sont généralement différentes dans la mesure où les réplicas effectuer différents types de travail dans chaque rôle.</span><span class="sxs-lookup"><span data-stu-id="50f73-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="50f73-234">Par exemple, indistinctement généralement traiter les lectures et écritures et gérer la plupart des charges de calcul hello, tandis que les bases de données secondaires ne sont pas.</span><span class="sxs-lookup"><span data-stu-id="50f73-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="50f73-235">Charge par défaut de hello pour un réplica principal est généralement supérieure à la charge de valeur par défaut hello pour les réplicas secondaires.</span><span class="sxs-lookup"><span data-stu-id="50f73-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="50f73-236">nombres réels de Hello doit dépendre de vos propres mesures.</span><span class="sxs-lookup"><span data-stu-id="50f73-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="50f73-237">Charge dynamique</span><span class="sxs-lookup"><span data-stu-id="50f73-237">Dynamic load</span></span>
<span data-ttu-id="50f73-238">Supposons que vous exécutiez votre service depuis un certain temps.</span><span class="sxs-lookup"><span data-stu-id="50f73-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="50f73-239">En procédant à certaines analyses, vous avez observé que :</span><span class="sxs-lookup"><span data-stu-id="50f73-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="50f73-240">Certaines partitions ou instances d’un service donné consomment plus de ressources que d’autres.</span><span class="sxs-lookup"><span data-stu-id="50f73-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="50f73-241">La charge de certains services varie au fil du temps.</span><span class="sxs-lookup"><span data-stu-id="50f73-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="50f73-242">De nombreux facteurs peuvent causer ces types de fluctuations de charge.</span><span class="sxs-lookup"><span data-stu-id="50f73-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="50f73-243">Par exemple, différents services ou partitions sont associés à différents clients présentant différentes exigences.</span><span class="sxs-lookup"><span data-stu-id="50f73-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="50f73-244">Charge peut également changer, car hello du service hello de travail varie dans le cours hello du jour de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="50f73-245">Quelle que soit la raison de hello, il n’est généralement aucun numéro unique que vous pouvez utiliser pour la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="50f73-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="50f73-246">Cela est particulièrement vrai si vous souhaitez que tooget hello pour la plupart des taux d’utilisation en dehors du cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="50f73-247">N’importe quelle valeur choisie pour la charge de la valeur par défaut est incorrecte des temps de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="50f73-248">Par défaut incorrecte charge résultat Bonjour Gestionnaire de ressources de Cluster sur ou sous l’allocation de ressources.</span><span class="sxs-lookup"><span data-stu-id="50f73-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="50f73-249">Par conséquent, vous disposez de nœuds qui sont au-dessus ou au-dessous d’utilisé même si hello Gestionnaire de ressources de Cluster considère comme cluster de hello est équilibrée.</span><span class="sxs-lookup"><span data-stu-id="50f73-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="50f73-250">Les charges par défaut sont toujours adaptées car elles fournissent certaines informations pour le placement initial, mais elles n’offrent pas un tableau complet des charges de travail réelles.</span><span class="sxs-lookup"><span data-stu-id="50f73-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="50f73-251">capture tooaccurately la modification des besoins en ressources, hello Gestionnaire de ressources du Cluster permet de son propre charge chaque tooupdate d’objet de service pendant l’exécution.</span><span class="sxs-lookup"><span data-stu-id="50f73-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="50f73-252">On parle de « rapports de charge dynamique ».</span><span class="sxs-lookup"><span data-stu-id="50f73-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="50f73-253">Les rapports de charge dynamique permettent tooadjust réplicas ou les instances de leur charge a signalé l’allocation/de métriques pendant leur durée de vie.</span><span class="sxs-lookup"><span data-stu-id="50f73-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="50f73-254">Des réplicas ou des instances de service inactifs signalent généralement qu’ils utilisent une faible quantité d’une mesure spécifique.</span><span class="sxs-lookup"><span data-stu-id="50f73-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="50f73-255">Des réplicas ou des instances de service actifs signalent quant à eux qu’ils en utilisent une quantité plus importante.</span><span class="sxs-lookup"><span data-stu-id="50f73-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="50f73-256">Charge par le réplica ou l’instance de Reporting permet hello tooreorganize du Gestionnaire de ressources de Cluster des objets de service individuels hello hello cluster.</span><span class="sxs-lookup"><span data-stu-id="50f73-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="50f73-257">La réorganisation des services de hello permet de s’assurer qu’ils d’obtenir les ressources hello que dont ils ont besoin.</span><span class="sxs-lookup"><span data-stu-id="50f73-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="50f73-258">Services occupés efficacement obtient trop « libérer » les ressources d’autres réplicas ou les instances qui sont actuellement à froid ou du moins de travail.</span><span class="sxs-lookup"><span data-stu-id="50f73-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="50f73-259">Dans les Services fiables, hello code tooreport charge dynamiquement l’aspect suivant :</span><span class="sxs-lookup"><span data-stu-id="50f73-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="50f73-260">Code :</span><span class="sxs-lookup"><span data-stu-id="50f73-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="50f73-261">Un service peut signaler sur une des métriques hello définie au moment de la création.</span><span class="sxs-lookup"><span data-stu-id="50f73-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="50f73-262">Si une charge de rapports de service pour une mesure qui n’est pas configuré toouse, Service Fabric ignore ce rapport.</span><span class="sxs-lookup"><span data-stu-id="50f73-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="50f73-263">S’il existe d’autres métriques signalées à hello même temps qui sont valides, ces rapports sont acceptées.</span><span class="sxs-lookup"><span data-stu-id="50f73-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="50f73-264">Code de service peut mesurer et signaler toutes hello métriques il sait comment, et les opérateurs peuvent spécifier toouse de configuration de la métrique hello sans avoir de code de service toochange hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="50f73-265">Mise à jour de la configuration des mesures d’un service</span><span class="sxs-lookup"><span data-stu-id="50f73-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="50f73-266">la liste des métriques Hello associée avec le service de hello et propriétés hello de ces mesures peuvent être modifiées dynamiquement tandis que hello service live.</span><span class="sxs-lookup"><span data-stu-id="50f73-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="50f73-267">Cela permet une meilleure expérimentation et plus de flexibilité.</span><span class="sxs-lookup"><span data-stu-id="50f73-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="50f73-268">Voici quelques exemples :</span><span class="sxs-lookup"><span data-stu-id="50f73-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="50f73-269">désactivation d’une mesure avec un état incorrect pour un service particulier</span><span class="sxs-lookup"><span data-stu-id="50f73-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="50f73-270">reconfiguration des poids de hello des métriques en fonction du comportement souhaité</span><span class="sxs-lookup"><span data-stu-id="50f73-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="50f73-271">l’activation d’une mesure une fois hello code a déjà été déployé et validé via d’autres mécanismes</span><span class="sxs-lookup"><span data-stu-id="50f73-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="50f73-272">la modification d’une charge par défaut hello pour un service basé sur la consommation et le comportement observé</span><span class="sxs-lookup"><span data-stu-id="50f73-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="50f73-273">Hello API principale pour la modification de configuration de la métrique sont `FabricClient.ServiceManagementClient.UpdateServiceAsync` en c# et `Update-ServiceFabricService` dans PowerShell.</span><span class="sxs-lookup"><span data-stu-id="50f73-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="50f73-274">Les informations que vous spécifiez avec ces API remplacent les informations existantes métrique hello pour le service de hello immédiatement.</span><span class="sxs-lookup"><span data-stu-id="50f73-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="50f73-275">Mélange des valeurs de charge par défaut et des rapports de charge dynamique</span><span class="sxs-lookup"><span data-stu-id="50f73-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="50f73-276">Chargement de la valeur par défaut et des charges dynamiques peuvent servir pour hello même service.</span><span class="sxs-lookup"><span data-stu-id="50f73-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="50f73-277">Lorsqu’un service utilise à la fois une charge par défaut et des rapports de charge dynamique, la charge par défaut sert d’estimation jusqu’à ce que les rapports dynamiques arrivent.</span><span class="sxs-lookup"><span data-stu-id="50f73-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="50f73-278">Chargement de la valeur par défaut est correct, car il donne hello Gestionnaire de ressources du Cluster quelque chose toowork avec.</span><span class="sxs-lookup"><span data-stu-id="50f73-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="50f73-279">charge de Hello par défaut permet aux hello tooplace du Gestionnaire de ressources du Cluster hello service objets dans des emplacements bon lorsqu’ils sont créés.</span><span class="sxs-lookup"><span data-stu-id="50f73-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="50f73-280">Si aucune information n’est fournie pour la charge par défaut, le positionnement des services est aléatoire.</span><span class="sxs-lookup"><span data-stu-id="50f73-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="50f73-281">Lorsque les rapports de charge arrivent ultérieurement la sélection élective aléatoire hello initiale est souvent le problème et hello Gestionnaire de ressources du Cluster a toomove services.</span><span class="sxs-lookup"><span data-stu-id="50f73-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="50f73-282">Reprenons l’exemple précédent et voyons ce qui se passe lorsque nous ajoutons des mesures personnalisées et les rapports de charge dynamique.</span><span class="sxs-lookup"><span data-stu-id="50f73-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="50f73-283">Dans cet exemple, nous utilisons « MemoryInMb » comme exemple de mesure.</span><span class="sxs-lookup"><span data-stu-id="50f73-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="50f73-284">La mémoire est une des métriques du système hello Service Fabric peut [ressource régissent](service-fabric-resource-governance.md), et il est généralement difficile de reporting vous-même.</span><span class="sxs-lookup"><span data-stu-id="50f73-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="50f73-285">Nous ne prévoyez réellement vous tooreport sur la consommation de mémoire ; La mémoire est utilisée ici comme un toolearning d’aide sur les fonctionnalités de hello Hello Gestionnaire de ressources du Cluster.</span><span class="sxs-lookup"><span data-stu-id="50f73-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="50f73-286">Supposons que nous avons créé un service avec état hello initialement avec hello de commande suivante :</span><span class="sxs-lookup"><span data-stu-id="50f73-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="50f73-287">PowerShell :</span><span class="sxs-lookup"><span data-stu-id="50f73-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="50f73-288">Pour rappel, la syntaxe utilisée est ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="50f73-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="50f73-289">Voyons quelle pourrait être une disposition de cluster possible :</span><span class="sxs-lookup"><span data-stu-id="50f73-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="50f73-290"><center>
![Cluster équilibré avec les mesures par défaut et des mesures personnalisées][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="50f73-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="50f73-291">Informations importantes à noter :</span><span class="sxs-lookup"><span data-stu-id="50f73-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="50f73-292">Les réplicas secondaires dans une partition peuvent avoir chacun leur propre charge</span><span class="sxs-lookup"><span data-stu-id="50f73-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="50f73-293">Ensemble des métriques de hello rechercher à charge équilibrée.</span><span class="sxs-lookup"><span data-stu-id="50f73-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="50f73-294">Pour la mémoire, hello rapport entre hello maximale et minimale de la charge est de 1,75 (nœud de hello avec hello charge la plupart des N3, hello est moins N2 et 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="50f73-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="50f73-295">Il existe certaines choses que nous devons encore tooexplain :</span><span class="sxs-lookup"><span data-stu-id="50f73-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="50f73-296">Quel élément a permis de déterminer qu’un rapport de 1,75 était raisonnable ou non ?</span><span class="sxs-lookup"><span data-stu-id="50f73-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="50f73-297">Comment hello Gestionnaire de ressources du Cluster de savoir si c’est assez perfectionné ou s’il existe plusieurs toodo de travail ?</span><span class="sxs-lookup"><span data-stu-id="50f73-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="50f73-298">À quel moment l’équilibrage se produit-il ?</span><span class="sxs-lookup"><span data-stu-id="50f73-298">When does balancing happen?</span></span>
* <span data-ttu-id="50f73-299">Qu’est-ce que cela signifie que Memory (mémoire) était pondérée comme étant « High » (haute) ?</span><span class="sxs-lookup"><span data-stu-id="50f73-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="50f73-300">Poids des mesures</span><span class="sxs-lookup"><span data-stu-id="50f73-300">Metric weights</span></span>
<span data-ttu-id="50f73-301">Suivi hello même métriques sur différents services est important.</span><span class="sxs-lookup"><span data-stu-id="50f73-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="50f73-302">Que la vue globale est ce que permet de hello consommation tootrack de gestionnaire de ressources de Cluster dans un cluster de hello, équilibrer la consommation des nœuds et assurez-vous que les nœuds ne dépasser la capacité.</span><span class="sxs-lookup"><span data-stu-id="50f73-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="50f73-303">Toutefois, les services peuvent avoir différentes vues comme importance toohello Hello même mesure.</span><span class="sxs-lookup"><span data-stu-id="50f73-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="50f73-304">Par ailleurs, dans un cluster qui présente un grand nombre de mesures et de services, il se peut qu’il n’existe pas de solution parfaitement équilibrée pour toutes les mesures.</span><span class="sxs-lookup"><span data-stu-id="50f73-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="50f73-305">Comment hello Gestionnaire de ressources du Cluster doit gérer ces situations ?</span><span class="sxs-lookup"><span data-stu-id="50f73-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="50f73-306">Poids métriques autoriser hello toodecide du Gestionnaire de ressources de Cluster comment toobalance hello cluster lorsqu’il n’existe aucune solution idéale.</span><span class="sxs-lookup"><span data-stu-id="50f73-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="50f73-307">Poids métriques permettent également de hello toobalance du Gestionnaire de ressources de Cluster des services spécifiques différemment.</span><span class="sxs-lookup"><span data-stu-id="50f73-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="50f73-308">Les mesures peuvent avoir quatre niveaux de poids : Zero, Low, Medium et High (zéro, faible, moyen et haut).</span><span class="sxs-lookup"><span data-stu-id="50f73-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="50f73-309">Une mesure avec un poids de Zero n’entre aucunement en compte dans la décision d’équilibrage des éléments.</span><span class="sxs-lookup"><span data-stu-id="50f73-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="50f73-310">Toutefois, sa charge contribue toujours toocapacity management.</span><span class="sxs-lookup"><span data-stu-id="50f73-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="50f73-311">Les mesures avec un poids nul sont toujours utiles et sont fréquemment utilisées dans le cadre de l’analyse des performances et du comportement d’un service.</span><span class="sxs-lookup"><span data-stu-id="50f73-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="50f73-312">[Cet article](service-fabric-diagnostics-event-generation-infra.md) fournit plus d’informations sur l’utilisation de hello des métriques de surveillance et de diagnostics de vos services.</span><span class="sxs-lookup"><span data-stu-id="50f73-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="50f73-313">impact réel de Hello de poids de métriques différents dans le cluster de hello est que ce gestionnaire de ressources du Cluster hello génère les différentes solutions.</span><span class="sxs-lookup"><span data-stu-id="50f73-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="50f73-314">Poids de métriques indiquent hello Gestionnaire de ressources de Cluster que certaines métriques sont plus importants que d’autres.</span><span class="sxs-lookup"><span data-stu-id="50f73-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="50f73-315">Lorsqu’il n’existe aucun hello solution idéale Gestionnaire de ressources de Cluster peuvent préférer solutions équilibrer hello supérieur pondérée métriques mieux.</span><span class="sxs-lookup"><span data-stu-id="50f73-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="50f73-316">Si un service considère qu’une mesure particulière n’est pas importante, il peut trouver que l’utilisation de cette mesure cause un déséquilibre.</span><span class="sxs-lookup"><span data-stu-id="50f73-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="50f73-317">Cela permet à un autre service tooget une distribution uniforme de certains métrique est tooit important.</span><span class="sxs-lookup"><span data-stu-id="50f73-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="50f73-318">Examinons un exemple de certains rapports charge et une métrique de quelle manière les différentes pondère les résultats dans les différentes affectations de cluster de hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="50f73-319">Dans cet exemple, nous constatons que passage d’une pondération relative de hello des métriques de hello provoque hello toocreate du Gestionnaire de ressources de Cluster des dispositions différentes des services.</span><span class="sxs-lookup"><span data-stu-id="50f73-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="50f73-320"><center>
Exemple de poids de mesures et impact sur les solutions d’équilibrage![][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="50f73-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="50f73-321">Dans cet exemple, nous avons quatre services différents qui signalent tous des valeurs différentes pour deux mesures, MetricA et MetricB.</span><span class="sxs-lookup"><span data-stu-id="50f73-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="50f73-322">Dans certains cas, tous les services hello définissent MetricA hello n’est plus importante (poids = élevé) et MetricB comme sans importance (poids = faible).</span><span class="sxs-lookup"><span data-stu-id="50f73-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="50f73-323">Par conséquent, nous constatons que hello du Gestionnaire de ressources de Cluster place les services hello afin que MetricA est mieux que MetricB équilibrage de charge.</span><span class="sxs-lookup"><span data-stu-id="50f73-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="50f73-324">« Mieux équilibrée » signifie que la mesure MetricA présente un écart type plus faible que celui de la mesure MetricB.</span><span class="sxs-lookup"><span data-stu-id="50f73-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="50f73-325">Dans les cas de deuxième hello, nous inverser les poids métrique hello.</span><span class="sxs-lookup"><span data-stu-id="50f73-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="50f73-326">Par conséquent, hello Gestionnaire du Cluster de ressource échange services A et B toocome avec une allocation MetricB étant mieux à charge équilibrée à MetricA.</span><span class="sxs-lookup"><span data-stu-id="50f73-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="50f73-327">Poids métriques déterminent comment doit équilibrer hello Gestionnaire de ressources du Cluster, mais pas lorsque l’équilibrage doit se produire.</span><span class="sxs-lookup"><span data-stu-id="50f73-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="50f73-328">Pour plus d’informations sur l’équilibrage, consultez [cet article](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="50f73-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="50f73-329">Poids globaux des mesures</span><span class="sxs-lookup"><span data-stu-id="50f73-329">Global metric weights</span></span>
<span data-ttu-id="50f73-330">Supposons que les services définit MetricA comme poids élevé et ServiceB définit le poids hello pour MetricA tooLow ou zéro.</span><span class="sxs-lookup"><span data-stu-id="50f73-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="50f73-331">Quel est le poids réel hello qui finit par en cours d’utilisation ?</span><span class="sxs-lookup"><span data-stu-id="50f73-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="50f73-332">Plusieurs poids sont suivis pour chaque mesure.</span><span class="sxs-lookup"><span data-stu-id="50f73-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="50f73-333">épaisseur du premier Hello est hello celui défini pour la métrique de hello lorsque hello service est créé.</span><span class="sxs-lookup"><span data-stu-id="50f73-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="50f73-334">Bonjour autres poids est un poids global, qui est calculé automatiquement.</span><span class="sxs-lookup"><span data-stu-id="50f73-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="50f73-335">Hello Gestionnaire du Cluster de ressource utilise les deux ces poids lors de l’évaluation des solutions.</span><span class="sxs-lookup"><span data-stu-id="50f73-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="50f73-336">Il est important de tenir compte de ces deux poids.</span><span class="sxs-lookup"><span data-stu-id="50f73-336">Taking both weights into account is important.</span></span> <span data-ttu-id="50f73-337">Cela permet à hello toobalance du Gestionnaire de ressources de Cluster de chaque service tooits conséquente possèdent des priorités et également vous assurer que le cluster hello dans son ensemble est alloué correctement.</span><span class="sxs-lookup"><span data-stu-id="50f73-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="50f73-338">Que se passerait-il si hello Gestionnaire de ressources de Cluster n’a pas d’intérêt solde global et local ?</span><span class="sxs-lookup"><span data-stu-id="50f73-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="50f73-339">C’est facile tooconstruct solutions qui sont équilibrées de manière globale, mais ce qui entraîne l’équilibre des ressources faibles pour des services individuels.</span><span class="sxs-lookup"><span data-stu-id="50f73-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="50f73-340">Bonjour l’exemple suivant, nous allons examiner un service configuré avec uniquement les mesures par défaut hello et consultez que se passe-t-il lorsque seul le solde global est considérée comme :</span><span class="sxs-lookup"><span data-stu-id="50f73-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="50f73-341"><center>
![Hello Impact d’une Solution globale uniquement][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="50f73-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="50f73-342">Dans hello supérieur exemple basé uniquement sur le solde global, cluster hello dans son ensemble est en effet équilibré.</span><span class="sxs-lookup"><span data-stu-id="50f73-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="50f73-343">Tous les nœuds ont hello même nombre de couleurs primaires et hello même nombre total de réplicas.</span><span class="sxs-lookup"><span data-stu-id="50f73-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="50f73-344">Toutefois, si vous examinez l’impact réel de hello de cette allocation il n’est pas tellement bien : perte hello de n’importe quel nœud a un impact sur une charge de travail particulier disproportionnellement, car il accepte toutes ses couleurs primaires.</span><span class="sxs-lookup"><span data-stu-id="50f73-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="50f73-345">Par exemple, si le premier nœud de hello échoue trois couleurs primaires de hello pour hello trois différentes partitions de hello service du cercle tous seraient perdues.</span><span class="sxs-lookup"><span data-stu-id="50f73-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="50f73-346">À l’inverse, hello Triangle et des services de hexagone ont leurs partitions perdre un réplica.</span><span class="sxs-lookup"><span data-stu-id="50f73-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="50f73-347">Ainsi, sans interruption, autre qu’ayant hello toorecover réplica vers le bas.</span><span class="sxs-lookup"><span data-stu-id="50f73-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="50f73-348">Dans l’exemple hello du bas, hello Gestionnaire de ressources du Cluster a distribué réplicas hello basées sur les deux solde de hello global et par service.</span><span class="sxs-lookup"><span data-stu-id="50f73-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="50f73-349">Lors du calcul de score hello de solution de hello elle constitue la majeure partie de la solution globale de hello poids toohello et services tooindividual partie (configurable).</span><span class="sxs-lookup"><span data-stu-id="50f73-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="50f73-350">Solde global pour une mesure est calculée en fonction en moyenne hello de poids de métrique hello à partir de chaque service.</span><span class="sxs-lookup"><span data-stu-id="50f73-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="50f73-351">Chaque service est équilibré tooits de poids métrique conséquente propre défini.</span><span class="sxs-lookup"><span data-stu-id="50f73-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="50f73-352">Cela garantit que les services de hello sont équilibrées entre eux en fonction des besoins propres tootheir.</span><span class="sxs-lookup"><span data-stu-id="50f73-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="50f73-353">Par conséquent, en cas de hello même nœud de premier échec de hello est réparti sur toutes les partitions de tous les services.</span><span class="sxs-lookup"><span data-stu-id="50f73-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="50f73-354">Hello impact tooeach est hello identiques.</span><span class="sxs-lookup"><span data-stu-id="50f73-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="50f73-355">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="50f73-355">Next steps</span></span>
- <span data-ttu-id="50f73-356">Pour plus d’informations sur la configuration des services, consultez la rubrique [En savoir plus sur la configuration des services](service-fabric-cluster-resource-manager-configure-services.md) (service-fabric-cluster-resource-manager-configure-services.md).</span><span class="sxs-lookup"><span data-stu-id="50f73-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="50f73-357">Défragmentation des mesures sont charge tooconsolidate monodirectionnelle sur les nœuds au lieu de la propagation de. toolearn comment tooconfigure défragmentation, reportez-vous à la section trop[cet article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="50f73-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="50f73-358">toofind out sur comment hello Gestionnaire de ressources de Cluster gère et équilibre la charge du cluster de hello, consultez l’article de hello sur [équilibrage de charge](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="50f73-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="50f73-359">Démarrer à partir du début de hello et [obtenir une présentation de toohello Gestionnaire de ressources du Cluster Service Fabric](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="50f73-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="50f73-360">Le coût du mouvement constitue une méthode de signalisation toohello Gestionnaire de ressources de Cluster que certains services sont toomove plus coûteuse que d’autres.</span><span class="sxs-lookup"><span data-stu-id="50f73-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="50f73-361">toolearn en savoir plus sur le coût du mouvement, consultez trop[cet article](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="50f73-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
