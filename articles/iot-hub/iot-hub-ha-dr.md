---
title: "aaaAzure IoT Hub haute disponibilité et récupération d’urgence | Documents Microsoft"
description: "Décrit les fonctionnalités d’Azure et IoT Hub hello qui vous aident à toobuild des solutions Azure IoT hautement disponibles avec les fonctionnalités de récupération d’urgence."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="47b0b-103">Haute disponibilité et récupération d’urgence IoT Hub :</span><span class="sxs-lookup"><span data-stu-id="47b0b-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="47b0b-104">Comme un service Azure, IoT Hub offre une haute disponibilité (HA) à l’aide de redondances au niveau des régions Azure hello, sans aucun travail supplémentaire requis par la solution de hello.</span><span class="sxs-lookup"><span data-stu-id="47b0b-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="47b0b-105">plateforme de Microsoft Azure Hello inclut également toohelp fonctionnalités développer des solutions avec les fonctionnalités de récupération d’urgence ou entre régions disponibilité.</span><span class="sxs-lookup"><span data-stu-id="47b0b-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="47b0b-106">Si vous souhaitez tooprovide global, entre régions haute disponibilité pour les périphériques ou utilisateurs, concevoir et préparer vos solutions parti tootake de ces fonctionnalités de récupération d’urgence Azure.</span><span class="sxs-lookup"><span data-stu-id="47b0b-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="47b0b-107">article de Hello [aide technique la continuité des activités Azure](../resiliency/resiliency-technical-guidance.md) décrit hello des fonctionnalités intégrées dans Azure pour la continuité d’activité et de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="47b0b-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="47b0b-108">Hello [la récupération d’urgence et haute disponibilité pour les applications Azure] [ Disaster recovery and high availability for Azure applications] livre fournit Guide d’architecture sur les stratégies pour les applications Azure tooachieve haute disponibilité et récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="47b0b-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="47b0b-109">Récupération d’urgence Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="47b0b-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="47b0b-110">De plus haute disponibilité toointra-région, IoT Hub implémente des mécanismes de basculement pour la récupération d’urgence qui ne requièrent aucune intervention de l’utilisateur de hello.</span><span class="sxs-lookup"><span data-stu-id="47b0b-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="47b0b-111">Récupération d’urgence de Hub IoT est lancée automatiquement et a un objectif de temps de récupération (RTO) de 2-26 heures et hello suivant des objectifs de point de récupération (RPO).</span><span class="sxs-lookup"><span data-stu-id="47b0b-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="47b0b-112">Fonctionnalités</span><span class="sxs-lookup"><span data-stu-id="47b0b-112">Functionality</span></span> | <span data-ttu-id="47b0b-113">RPO</span><span class="sxs-lookup"><span data-stu-id="47b0b-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="47b0b-114">Disponibilité du service pour les opérations de Registre et de communication</span><span class="sxs-lookup"><span data-stu-id="47b0b-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="47b0b-115">Perte éventuelle du CName</span><span class="sxs-lookup"><span data-stu-id="47b0b-115">Possible CName loss</span></span> |
| <span data-ttu-id="47b0b-116">Données d’identité dans le registre des identités</span><span class="sxs-lookup"><span data-stu-id="47b0b-116">Identity data in identity registry</span></span> |<span data-ttu-id="47b0b-117">Perte de données entre 0 et 5 minutes</span><span class="sxs-lookup"><span data-stu-id="47b0b-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="47b0b-118">Messages appareil-à-cloud</span><span class="sxs-lookup"><span data-stu-id="47b0b-118">Device-to-cloud messages</span></span> |<span data-ttu-id="47b0b-119">Perte de tous les messages non lus</span><span class="sxs-lookup"><span data-stu-id="47b0b-119">All unread messages are lost</span></span> |
| <span data-ttu-id="47b0b-120">Messages de surveillance des opérations</span><span class="sxs-lookup"><span data-stu-id="47b0b-120">Operations monitoring messages</span></span> |<span data-ttu-id="47b0b-121">Perte de tous les messages non lus</span><span class="sxs-lookup"><span data-stu-id="47b0b-121">All unread messages are lost</span></span> |
| <span data-ttu-id="47b0b-122">Messages cloud-à-appareil</span><span class="sxs-lookup"><span data-stu-id="47b0b-122">Cloud-to-device messages</span></span> |<span data-ttu-id="47b0b-123">Perte de données entre 0 et 5 minutes</span><span class="sxs-lookup"><span data-stu-id="47b0b-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="47b0b-124">File d’attente de rétroaction cloud-à-appareil</span><span class="sxs-lookup"><span data-stu-id="47b0b-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="47b0b-125">Perte de tous les messages non lus</span><span class="sxs-lookup"><span data-stu-id="47b0b-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="47b0b-126">Basculement régional avec IoT Hub</span><span class="sxs-lookup"><span data-stu-id="47b0b-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="47b0b-127">Un traitement complet des topologies de déploiement dans les solutions IoT est en dehors de la portée de hello de cet article.</span><span class="sxs-lookup"><span data-stu-id="47b0b-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="47b0b-128">Hello explique hello *basculement régional* modèle de déploiement pour l’objectif de hello de haute disponibilité et récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="47b0b-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="47b0b-129">Dans un modèle de basculement régional, hello solution précédent s’exécute principalement dans l’emplacement d’un centre de données, et un secondaire IoT hub et le serveur principal sont déployés dans un autre emplacement de centre de données.</span><span class="sxs-lookup"><span data-stu-id="47b0b-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="47b0b-130">Si hello IoT hub dans le centre de données principal hello subit une panne ou hello la connectivité réseau à partir de hello appareil toohello centre de données principal est interrompue.</span><span class="sxs-lookup"><span data-stu-id="47b0b-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="47b0b-131">Les appareils utilisent un point de terminaison secondaire, chaque fois que la passerelle principale du hello ne peut pas être atteint.</span><span class="sxs-lookup"><span data-stu-id="47b0b-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="47b0b-132">Avec une capacité de basculement entre régions, disponibilité de la solution hello peut être améliorée au-delà de la haute disponibilité de hello d’une seule région.</span><span class="sxs-lookup"><span data-stu-id="47b0b-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="47b0b-133">À un niveau élevé, tooimplement un modèle de basculement régional avec IoT Hub, vous hello éléments suivants sont nécessaires :</span><span class="sxs-lookup"><span data-stu-id="47b0b-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="47b0b-134">**Un IoT hub et un périphérique logique de routage secondaire**: dans le cas de hello d’une interruption de service dans votre région primaire, appareils doivent démarrer connexion tooyour la région secondaire.</span><span class="sxs-lookup"><span data-stu-id="47b0b-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="47b0b-135">Étant donné hello nature état prenant en charge de la plupart des services impliqués, il est courant pour les processus de basculement de la région de solution administrateurs tootrigger hello.</span><span class="sxs-lookup"><span data-stu-id="47b0b-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="47b0b-136">Bonjour meilleure manière toocommunicate hello nouveau point de terminaison toodevices, tout en conservant le contrôle du processus de hello, est toohave les vérifier régulièrement un *conseiller* service pour le point de terminaison actif actuel hello.</span><span class="sxs-lookup"><span data-stu-id="47b0b-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="47b0b-137">Hello conseiller service peut être une application web qui est répliquée et conservée n’est accessible à l’aide de techniques de la redirection DNS (par exemple, à l’aide de [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="47b0b-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="47b0b-138">**Réplication du Registre identité** -toobe utilisable, hub IoT secondaire de hello doit contenir toutes les identités des appareils qui peuvent se connecter toohello solution.</span><span class="sxs-lookup"><span data-stu-id="47b0b-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="47b0b-139">solution de Hello doit conserver les sauvegardes de géo-répliquées des identités d’appareil et les télécharger toohello secondaire IoT hub avant de basculer le point de terminaison actif hello pour les appareils hello.</span><span class="sxs-lookup"><span data-stu-id="47b0b-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="47b0b-140">fonctionnalité d’exportation Hello appareil identité de IoT Hub est utile dans ce contexte.</span><span class="sxs-lookup"><span data-stu-id="47b0b-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="47b0b-141">Pour plus d’informations, consultez[Guide du développeur IoT Hub - Registre des identités][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="47b0b-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="47b0b-142">**La fusion logique** - lorsque la région primaire hello redevient disponible, toutes hello état et les données qui ont été créées dans le site secondaire de hello doivent être migrés toohello précédent la région primaire.</span><span class="sxs-lookup"><span data-stu-id="47b0b-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="47b0b-143">Cet état et les données concerne principalement les identités toodevice et les métadonnées de l’application, qui doivent être fusionnée avec hello principal IoT hub et de tous les autres magasins spécifiques à l’application dans la région principale de hello.</span><span class="sxs-lookup"><span data-stu-id="47b0b-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="47b0b-144">toosimplify cette étape, vous devez utiliser les opérations idempotent.</span><span class="sxs-lookup"><span data-stu-id="47b0b-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="47b0b-145">Idempotent opérations réduire hello des effets de distribution de cohérence éventuelle hello d’événements et des doublons ou hors de livraison d’événements.</span><span class="sxs-lookup"><span data-stu-id="47b0b-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="47b0b-146">En outre, la logique d’application hello doit être conçue tootolerate les incohérences potentielles ou « légèrement « état de la date.</span><span class="sxs-lookup"><span data-stu-id="47b0b-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="47b0b-147">Cette situation peut se produire en raison de toohello de temps supplémentaire que nécessaire pour le système de hello trop « réparer » basé sur les objectifs de point de récupération (RPO).</span><span class="sxs-lookup"><span data-stu-id="47b0b-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="47b0b-148">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="47b0b-148">Next steps</span></span>
<span data-ttu-id="47b0b-149">Suivez ces liens de toolearn plus d’informations sur Azure IoT Hub :</span><span class="sxs-lookup"><span data-stu-id="47b0b-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="47b0b-150">[Prise en main des IoT Hubs (didacticiel)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="47b0b-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="47b0b-151">[Qu’est-ce qu’Azure IoT Hub ?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="47b0b-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
