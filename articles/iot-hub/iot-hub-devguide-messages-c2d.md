---
title: "aaaUnderstand Azure IoT Hub cloud-à-appareil messagerie | Documents Microsoft"
description: "Guide du développeur - comment toouse cloud-à-appareil messagerie avec IoT Hub. Inclut des informations sur le cycle de vie des messages hello et options de configuration."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 5c747b50163873d823556a8baa769c4b8f7f8c44
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="send-cloud-to-device-messages-from-iot-hub"></a><span data-ttu-id="f76b8-104">Envoyer des messages cloud-à-appareil à partir d’IoT Hub</span><span class="sxs-lookup"><span data-stu-id="f76b8-104">Send cloud-to-device messages from IoT Hub</span></span>

<span data-ttu-id="f76b8-105">application pour appareil toohello toosend des notifications à sens unique à partir de votre solution back-end, envoyer des messages de cloud aux appareils à partir de votre appareil tooyour de hub IoT.</span><span class="sxs-lookup"><span data-stu-id="f76b8-105">toosend one-way notifications toohello device app from your solution back end, send cloud-to-devices messages from your IoT hub tooyour device.</span></span> <span data-ttu-id="f76b8-106">Pour une description des autres options cloud-à-appareil prises en charge par IoT Hub, consultez [Conseils pour les communications cloud-à-appareil][lnk-c2d-guidance].</span><span class="sxs-lookup"><span data-stu-id="f76b8-106">For a discussion of other cloud-to-devices options supported by IoT Hub, see [Cloud-to-device communications guidance][lnk-c2d-guidance].</span></span>

<span data-ttu-id="f76b8-107">Vous envoyez les messages cloud-à-appareil via un point de terminaison côté service (**/messages/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="f76b8-107">You send cloud-to-device messages through a service-facing endpoint (**/messages/devicebound**).</span></span> <span data-ttu-id="f76b8-108">Un appareil reçoit ensuite les messages de type hello via un point de terminaison spécifique à l’appareil (**/devices/ {deviceId} / messages/devicebound**).</span><span class="sxs-lookup"><span data-stu-id="f76b8-108">A device then receives hello messages through a device-specific endpoint (**/devices/{deviceId}/messages/devicebound**).</span></span>

<span data-ttu-id="f76b8-109">Chaque message cloud-à-appareil ciblée vers un seul périphérique en définissant un hello **à** propriété trop**/devices/ {deviceId} / messages/devicebound**.</span><span class="sxs-lookup"><span data-stu-id="f76b8-109">Each cloud-to-device message is targeted at a single device by setting hello **to** property too**/devices/{deviceId}/messages/devicebound**.</span></span>

<span data-ttu-id="f76b8-110">Chaque file d’attente d’appareil peut contenir jusqu’à 50 messages cloud-à-appareil.</span><span class="sxs-lookup"><span data-stu-id="f76b8-110">Each device queue holds at most 50 cloud-to-device messages.</span></span> <span data-ttu-id="f76b8-111">La tentative de toosend plusieurs messages toohello même appareil génère une erreur.</span><span class="sxs-lookup"><span data-stu-id="f76b8-111">Trying toosend more messages toohello same device results in an error.</span></span>

## <a name="hello-cloud-to-device-message-lifecycle"></a><span data-ttu-id="f76b8-112">cycle de vie des cloud-à-appareil message Hello</span><span class="sxs-lookup"><span data-stu-id="f76b8-112">hello cloud-to-device message lifecycle</span></span>

<span data-ttu-id="f76b8-113">tooguarantee au moins une remise de messages IoT Hub persiste messages cloud-à-appareil dans les files d’attente par périphérique.</span><span class="sxs-lookup"><span data-stu-id="f76b8-113">tooguarantee at-least-once message delivery, IoT Hub persists cloud-to-device messages in per-device queues.</span></span> <span data-ttu-id="f76b8-114">Les appareils doivent accepter explicitement *achèvement* pour IoT Hub tooremove de hello file d’attente.</span><span class="sxs-lookup"><span data-stu-id="f76b8-114">Devices must explicitly acknowledge *completion* for IoT Hub tooremove them from hello queue.</span></span> <span data-ttu-id="f76b8-115">Cette approche garantit la résilience contre les échecs de connectivité et d’appareils.</span><span class="sxs-lookup"><span data-stu-id="f76b8-115">This approach guarantees resiliency against connectivity and device failures.</span></span>

<span data-ttu-id="f76b8-116">Hello diagramme suivant montre graphique d’état hello du cycle de vie d’un message cloud-à-appareil dans IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f76b8-116">hello following diagram shows hello lifecycle state graph for a cloud-to-device message in IoT Hub.</span></span>

![Cycle de vie des messages cloud-à-appareil][img-lifecycle]

<span data-ttu-id="f76b8-118">Lorsque hello IoT Hub service envoie un dispositif de tooa de message, le service de hello définit un état de message hello trop**empilés**.</span><span class="sxs-lookup"><span data-stu-id="f76b8-118">When hello IoT Hub service sends a message tooa device, hello service sets hello message state too**Enqueued**.</span></span> <span data-ttu-id="f76b8-119">Lorsqu’un appareil veut trop*réception* un message, IoT Hub *verrous* message de type hello (en plaçant hello trop**Invisible**), ce qui autorise les autres threads sur hello appareil toostart recevoir d’autres messages.</span><span class="sxs-lookup"><span data-stu-id="f76b8-119">When a device wants too*receive* a message, IoT Hub *locks* hello message (by setting hello state too**Invisible**), which allows other threads on hello device toostart receiving other messages.</span></span> <span data-ttu-id="f76b8-120">Un thread de l’appareil après traitement hello d’un message, il avertit IoT Hub par *fin* message de type hello.</span><span class="sxs-lookup"><span data-stu-id="f76b8-120">When a device thread completes hello processing of a message, it notifies IoT Hub by *completing* hello message.</span></span> <span data-ttu-id="f76b8-121">IoT Hub attribue ensuite à hello état trop**terminé**.</span><span class="sxs-lookup"><span data-stu-id="f76b8-121">IoT Hub then sets hello state too**Completed**.</span></span>

<span data-ttu-id="f76b8-122">Un appareil peut également choisir de :</span><span class="sxs-lookup"><span data-stu-id="f76b8-122">A device can also choose to:</span></span>

* <span data-ttu-id="f76b8-123">*Rejeter* message de type hello, ce qui entraîne l’IoT Hub tooset il toohello **inactivé** état.</span><span class="sxs-lookup"><span data-stu-id="f76b8-123">*Reject* hello message, which causes IoT Hub tooset it toohello **Deadlettered** state.</span></span> <span data-ttu-id="f76b8-124">Appareils qui se connectent via le protocole MQTT de hello ne peut pas refuser des messages cloud-à-appareil.</span><span class="sxs-lookup"><span data-stu-id="f76b8-124">Devices that connect over hello MQTT protocol cannot reject cloud-to-device messages.</span></span>
* <span data-ttu-id="f76b8-125">*Abandonner* message de type hello, ce qui entraîne des message de type hello tooput IoT Hub en file d’attente de hello, avec l’état hello défini trop**empilés**.</span><span class="sxs-lookup"><span data-stu-id="f76b8-125">*Abandon* hello message, which causes IoT Hub tooput hello message back in hello queue, with hello state set too**Enqueued**.</span></span>

<span data-ttu-id="f76b8-126">Un thread peut échouer tooprocess un message sans en avertir l’IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f76b8-126">A thread could fail tooprocess a message without notifying IoT Hub.</span></span> <span data-ttu-id="f76b8-127">Dans ce cas, automatiquement des messages transition de hello **Invisible** toohello retour d’état **empilés** état après un *délai d’attente de visibilité (ou un verrou)*.</span><span class="sxs-lookup"><span data-stu-id="f76b8-127">In this case, messages automatically transition from hello **Invisible** state back toohello **Enqueued** state after a *visibility (or lock) timeout*.</span></span> <span data-ttu-id="f76b8-128">Hello par défaut de ce délai d’attente est une minute.</span><span class="sxs-lookup"><span data-stu-id="f76b8-128">hello default value of this timeout is one minute.</span></span>

<span data-ttu-id="f76b8-129">Un message peut effectuer la transition entre hello **empilés** et **Invisible** États, hello au maximum, le nombre de fois spécifié dans hello **max de diffusions** propriété IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f76b8-129">A message can transition between hello **Enqueued** and **Invisible** states for, at most, hello number of times specified in hello **max delivery count** property on IoT Hub.</span></span> <span data-ttu-id="f76b8-130">Une fois ce nombre de transitions, IoT Hub définit état hello de message de type hello trop**inactivé**.</span><span class="sxs-lookup"><span data-stu-id="f76b8-130">After that number of transitions, IoT Hub sets hello state of hello message too**Deadlettered**.</span></span> <span data-ttu-id="f76b8-131">De même, IoT Hub définit état hello d’un message trop**inactivé** après son heure d’expiration (voir [temps toolive][lnk-ttl]).</span><span class="sxs-lookup"><span data-stu-id="f76b8-131">Similarly, IoT Hub sets hello state of a message too**Deadlettered** after its expiration time (see [Time toolive][lnk-ttl]).</span></span>

<span data-ttu-id="f76b8-132">Hello [comment les messages toosend cloud-à-appareil avec IoT Hub] [ lnk-c2d-tutorial] vous montre comment les messages cloud-à-appareil toosend de hello de cloud computing et les recevoir sur un appareil.</span><span class="sxs-lookup"><span data-stu-id="f76b8-132">hello [How toosend cloud-to-device messages with IoT Hub][lnk-c2d-tutorial] shows you how toosend cloud-to-device messages from hello cloud and receive them on a device.</span></span>

<span data-ttu-id="f76b8-133">En règle générale, un périphérique termine un message cloud-à-appareil lors de la perte de hello de message de type hello n’affecte pas la logique d’application hello.</span><span class="sxs-lookup"><span data-stu-id="f76b8-133">Typically, a device completes a cloud-to-device message when hello loss of hello message does not affect hello application logic.</span></span> <span data-ttu-id="f76b8-134">Par exemple, lorsque hello périphérique a rendu persistant contenu du message hello localement ou a exécuté avec succès d’une opération.</span><span class="sxs-lookup"><span data-stu-id="f76b8-134">For example, when hello device has persisted hello message content locally or has successfully executed an operation.</span></span> <span data-ttu-id="f76b8-135">message de type Hello pourrait exécuter également des informations temporaires, dont la perte n’aurait aucun impact sur les fonctionnalités de hello d’application hello.</span><span class="sxs-lookup"><span data-stu-id="f76b8-135">hello message could also carry transient information, whose loss would not impact hello functionality of hello application.</span></span> <span data-ttu-id="f76b8-136">Dans certains cas, pour les tâches longues, vous pouvez terminer message cloud-à-appareil de type hello après la persistance hello description de la tâche dans le stockage local.</span><span class="sxs-lookup"><span data-stu-id="f76b8-136">Sometimes, for long-running tasks, you can complete hello cloud-to-device message after persisting hello task description in local storage.</span></span> <span data-ttu-id="f76b8-137">Ensuite, vous pouvez notifier hello solution principal avec un ou plusieurs messages appareil-à-cloud à différents niveaux de progression de la tâche hello.</span><span class="sxs-lookup"><span data-stu-id="f76b8-137">Then you can notify hello solution back end with one or more device-to-cloud messages at various stages of progress of hello task.</span></span>

## <a name="message-expiration-time-toolive"></a><span data-ttu-id="f76b8-138">Expiration du message (heure toolive)</span><span class="sxs-lookup"><span data-stu-id="f76b8-138">Message expiration (time toolive)</span></span>

<span data-ttu-id="f76b8-139">Chaque message cloud-à-appareil est doté d’un délai d’expiration.</span><span class="sxs-lookup"><span data-stu-id="f76b8-139">Every cloud-to-device message has an expiration time.</span></span> <span data-ttu-id="f76b8-140">Cette heure est définie par le service de hello (Bonjour **ExpiryTimeUtc** propriété), ou par IoT Hub à l’aide de la valeur par défaut hello *temps toolive* spécifié comme propriété IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f76b8-140">This time is set either by hello service (in hello **ExpiryTimeUtc** property), or by IoT Hub using hello default *time toolive* specified as an IoT Hub property.</span></span> <span data-ttu-id="f76b8-141">Consultez [Options de configuration cloud-à-appareil][lnk-c2d-configuration].</span><span class="sxs-lookup"><span data-stu-id="f76b8-141">See [Cloud-to-device configuration options][lnk-c2d-configuration].</span></span>

<span data-ttu-id="f76b8-142">Un avantage tootake moyen commun d’expiration du message et éviter d’envoyer des messages toodisconnected périphériques, est tooset valeurs toolive d’heure courte.</span><span class="sxs-lookup"><span data-stu-id="f76b8-142">A common way tootake advantage of message expiration and avoid sending messages toodisconnected devices, is tooset short time toolive values.</span></span> <span data-ttu-id="f76b8-143">Cette approche permet d’obtenir hello même résultat que la gestion de l’état de connexion de périphérique hello, tout en étant plus efficace.</span><span class="sxs-lookup"><span data-stu-id="f76b8-143">This approach achieves hello same result as maintaining hello device connection state, while being more efficient.</span></span> <span data-ttu-id="f76b8-144">Lorsque vous demandez les accusés de réception de message, IoT Hub vous signale les appareils qui sont en mesure de tooreceive messages, et les appareils qui ne sont pas en ligne ou ont échoué.</span><span class="sxs-lookup"><span data-stu-id="f76b8-144">When you request message acknowledgements, IoT Hub notifies you which devices are able tooreceive messages, and which devices are not online or have failed.</span></span>

## <a name="message-feedback"></a><span data-ttu-id="f76b8-145">Commentaires de messages</span><span class="sxs-lookup"><span data-stu-id="f76b8-145">Message feedback</span></span>

<span data-ttu-id="f76b8-146">Lorsque vous envoyez un message cloud-à-appareil, service de hello peut demander la remise de hello de commentaires par message concernant l’état final de hello de ce message.</span><span class="sxs-lookup"><span data-stu-id="f76b8-146">When you send a cloud-to-device message, hello service can request hello delivery of per-message feedback regarding hello final state of that message.</span></span>

| <span data-ttu-id="f76b8-147">Propriété Ack</span><span class="sxs-lookup"><span data-stu-id="f76b8-147">Ack property</span></span> | <span data-ttu-id="f76b8-148">Comportement</span><span class="sxs-lookup"><span data-stu-id="f76b8-148">Behavior</span></span> |
| ------------ | -------- |
| <span data-ttu-id="f76b8-149">**positive**</span><span class="sxs-lookup"><span data-stu-id="f76b8-149">**positive**</span></span> | <span data-ttu-id="f76b8-150">IoT Hub génère un message de commentaires si et uniquement si message cloud-à-appareil de type hello atteint hello **terminé** état.</span><span class="sxs-lookup"><span data-stu-id="f76b8-150">IoT Hub generates a feedback message if, and only if, hello cloud-to-device message reached hello **Completed** state.</span></span> |
| <span data-ttu-id="f76b8-151">**negative**</span><span class="sxs-lookup"><span data-stu-id="f76b8-151">**negative**</span></span> | <span data-ttu-id="f76b8-152">IoT Hub génère un message de commentaires si et seulement si, message cloud-à-appareil de type hello atteint hello **inactivé** état.</span><span class="sxs-lookup"><span data-stu-id="f76b8-152">IoT Hub generates a feedback message, if and only if, hello cloud-to-device message reaches hello **Deadlettered** state.</span></span> |
| <span data-ttu-id="f76b8-153">**full**</span><span class="sxs-lookup"><span data-stu-id="f76b8-153">**full**</span></span>     | <span data-ttu-id="f76b8-154">IoT Hub génère un message de commentaires dans les deux cas.</span><span class="sxs-lookup"><span data-stu-id="f76b8-154">IoT Hub generates a feedback message in either case.</span></span> |

<span data-ttu-id="f76b8-155">Si **l’accusé de réception** est **complète**et vous ne recevez pas un message d’évaluation, cela signifie que hello commentaires est arrivé à expiration.</span><span class="sxs-lookup"><span data-stu-id="f76b8-155">If **Ack** is **full**, and you don't receive a feedback message, it means that hello feedback message expired.</span></span> <span data-ttu-id="f76b8-156">Bonjour service ne peut pas savoir quel message d’origine toohello s’est produit.</span><span class="sxs-lookup"><span data-stu-id="f76b8-156">hello service can't know what happened toohello original message.</span></span> <span data-ttu-id="f76b8-157">Dans la pratique, un service doit s’assurer qu’il peut traiter les commentaires de hello avant son expiration.</span><span class="sxs-lookup"><span data-stu-id="f76b8-157">In practice, a service should ensure that it can process hello feedback before it expires.</span></span> <span data-ttu-id="f76b8-158">délai d’expiration maximal de Hello est de deux jours, ce qui permet de beaucoup de temps tooget hello service en cours d’exécution à nouveau si une défaillance se produit.</span><span class="sxs-lookup"><span data-stu-id="f76b8-158">hello maximum expiry time is two days, which allows plenty of time tooget hello service running again if a failure occurs.</span></span>

<span data-ttu-id="f76b8-159">Comme l’explique la section [Points de terminaison][lnk-endpoints], IoT Hub fournit des commentaires sous la forme de messages par le biais d’un point de terminaison accessible au service (**/messages/servicebound/feedback**).</span><span class="sxs-lookup"><span data-stu-id="f76b8-159">As explained in [Endpoints][lnk-endpoints], IoT Hub delivers feedback through a service-facing endpoint (**/messages/servicebound/feedback**) as messages.</span></span> <span data-ttu-id="f76b8-160">Hello sémantique pour recevoir des commentaires sont hello même que pour les messages cloud-à-appareil et avoir hello même [cycle de vie du Message][lnk-lifecycle].</span><span class="sxs-lookup"><span data-stu-id="f76b8-160">hello semantics for receiving feedback are hello same as for cloud-to-device messages, and have hello same [Message lifecycle][lnk-lifecycle].</span></span> <span data-ttu-id="f76b8-161">Dès que possible, des commentaires de message sont groupés dans un seul message, avec hello suivant le format :</span><span class="sxs-lookup"><span data-stu-id="f76b8-161">Whenever possible, message feedback is batched in a single message, with hello following format:</span></span>

| <span data-ttu-id="f76b8-162">Propriété</span><span class="sxs-lookup"><span data-stu-id="f76b8-162">Property</span></span>     | <span data-ttu-id="f76b8-163">Description</span><span class="sxs-lookup"><span data-stu-id="f76b8-163">Description</span></span> |
| ------------ | ----------- |
| <span data-ttu-id="f76b8-164">EnqueuedTime</span><span class="sxs-lookup"><span data-stu-id="f76b8-164">EnqueuedTime</span></span> | <span data-ttu-id="f76b8-165">Horodatage indiquant quand le message de type hello a été créé.</span><span class="sxs-lookup"><span data-stu-id="f76b8-165">Timestamp indicating when hello message was created.</span></span> |
| <span data-ttu-id="f76b8-166">UserId</span><span class="sxs-lookup"><span data-stu-id="f76b8-166">UserId</span></span>       | `{iot hub name}` |
| <span data-ttu-id="f76b8-167">ContentType</span><span class="sxs-lookup"><span data-stu-id="f76b8-167">ContentType</span></span>  | `application/vnd.microsoft.iothub.feedback.json` |

<span data-ttu-id="f76b8-168">corps de Hello est un tableau sérialisé en JSON d’enregistrements, chacun avec hello propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="f76b8-168">hello body is a JSON-serialized array of records, each with hello following properties:</span></span>

| <span data-ttu-id="f76b8-169">Propriété</span><span class="sxs-lookup"><span data-stu-id="f76b8-169">Property</span></span>           | <span data-ttu-id="f76b8-170">Description</span><span class="sxs-lookup"><span data-stu-id="f76b8-170">Description</span></span> |
| ------------------ | ----------- |
| <span data-ttu-id="f76b8-171">EnqueuedTimeUtc</span><span class="sxs-lookup"><span data-stu-id="f76b8-171">EnqueuedTimeUtc</span></span>    | <span data-ttu-id="f76b8-172">Horodatage indiquant quand le résultat hello de message de type hello s’est produite.</span><span class="sxs-lookup"><span data-stu-id="f76b8-172">Timestamp indicating when hello outcome of hello message happened.</span></span> <span data-ttu-id="f76b8-173">Par exemple, hello périphérique s’est terminée ou hello est arrivé à expiration.</span><span class="sxs-lookup"><span data-stu-id="f76b8-173">For example, hello device completed or hello message expired.</span></span> |
| <span data-ttu-id="f76b8-174">OriginalMessageId</span><span class="sxs-lookup"><span data-stu-id="f76b8-174">OriginalMessageId</span></span>  | <span data-ttu-id="f76b8-175">**MessageId** de hello cloud-à-appareil message toowhich ces informations de commentaires est lié.</span><span class="sxs-lookup"><span data-stu-id="f76b8-175">**MessageId** of hello cloud-to-device message toowhich this feedback information relates.</span></span> |
| <span data-ttu-id="f76b8-176">StatusCode</span><span class="sxs-lookup"><span data-stu-id="f76b8-176">StatusCode</span></span>         | <span data-ttu-id="f76b8-177">Chaîne obligatoire.</span><span class="sxs-lookup"><span data-stu-id="f76b8-177">Required string.</span></span> <span data-ttu-id="f76b8-178">Utilisé dans les messages de commentaires générés par IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="f76b8-178">Used in feedback messages generated by IoT Hub.</span></span> <br/> <span data-ttu-id="f76b8-179">« Succès »</span><span class="sxs-lookup"><span data-stu-id="f76b8-179">'Success'</span></span> <br/> <span data-ttu-id="f76b8-180">« Expiré »</span><span class="sxs-lookup"><span data-stu-id="f76b8-180">'Expired'</span></span> <br/> <span data-ttu-id="f76b8-181">« DeliveryCountExceeded » </span><span class="sxs-lookup"><span data-stu-id="f76b8-181">'DeliveryCountExceeded'</span></span> <br/> <span data-ttu-id="f76b8-182">« Rejeté »</span><span class="sxs-lookup"><span data-stu-id="f76b8-182">'Rejected'</span></span> <br/> <span data-ttu-id="f76b8-183">« Vidé »</span><span class="sxs-lookup"><span data-stu-id="f76b8-183">'Purged'</span></span> |
| <span data-ttu-id="f76b8-184">Description</span><span class="sxs-lookup"><span data-stu-id="f76b8-184">Description</span></span>        | <span data-ttu-id="f76b8-185">Valeurs de chaîne pour **StatusCode**.</span><span class="sxs-lookup"><span data-stu-id="f76b8-185">String values for **StatusCode**.</span></span> |
| <span data-ttu-id="f76b8-186">deviceId</span><span class="sxs-lookup"><span data-stu-id="f76b8-186">DeviceId</span></span>           | <span data-ttu-id="f76b8-187">**DeviceId** du périphérique cible hello hello cloud-à-appareil message toowhich cet élément de commentaires est lié.</span><span class="sxs-lookup"><span data-stu-id="f76b8-187">**DeviceId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |
| <span data-ttu-id="f76b8-188">DeviceGenerationId</span><span class="sxs-lookup"><span data-stu-id="f76b8-188">DeviceGenerationId</span></span> | <span data-ttu-id="f76b8-189">**DeviceGenerationId** du périphérique cible hello hello cloud-à-appareil message toowhich cet élément de commentaires est lié.</span><span class="sxs-lookup"><span data-stu-id="f76b8-189">**DeviceGenerationId** of hello target device of hello cloud-to-device message toowhich this piece of feedback relates.</span></span> |

<span data-ttu-id="f76b8-190">service de Hello doit spécifier un **MessageId** pour hello cloud-à-appareil message toocorrelate en mesure de toobe ses commentaires avec le message d’appel d’origine.</span><span class="sxs-lookup"><span data-stu-id="f76b8-190">hello service must specify a **MessageId** for hello cloud-to-device message toobe able toocorrelate its feedback with hello original message.</span></span>

<span data-ttu-id="f76b8-191">Hello suivant montre les corps de hello d’un message de commentaires.</span><span class="sxs-lookup"><span data-stu-id="f76b8-191">hello following example shows hello body of a feedback message.</span></span>

```json
[
  {
    "OriginalMessageId": "0987654321",
    "EnqueuedTimeUtc": "2015-07-28T16:24:48.789Z",
    "StatusCode": 0,
    "Description": "Success",
    "DeviceId": "123",
    "DeviceGenerationId": "abcdefghijklmnopqrstuvwxyz"
  },
  {
    ...
  },
  ...
]
```

## <a name="cloud-to-device-configuration-options"></a><span data-ttu-id="f76b8-192">Options de configuration cloud-à-appareil</span><span class="sxs-lookup"><span data-stu-id="f76b8-192">Cloud-to-device configuration options</span></span>

<span data-ttu-id="f76b8-193">Chaque hub IoT expose hello des options de configuration pour la messagerie cloud-à-appareil suivantes :</span><span class="sxs-lookup"><span data-stu-id="f76b8-193">Each IoT hub exposes hello following configuration options for cloud-to-device messaging:</span></span>

| <span data-ttu-id="f76b8-194">Propriété</span><span class="sxs-lookup"><span data-stu-id="f76b8-194">Property</span></span>                  | <span data-ttu-id="f76b8-195">Description</span><span class="sxs-lookup"><span data-stu-id="f76b8-195">Description</span></span> | <span data-ttu-id="f76b8-196">Plage et valeur par défaut</span><span class="sxs-lookup"><span data-stu-id="f76b8-196">Range and default</span></span> |
| ------------------------- | ----------- | ----------------- |
| <span data-ttu-id="f76b8-197">defaultTtlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="f76b8-197">defaultTtlAsIso8601</span></span>       | <span data-ttu-id="f76b8-198">Durée de vie par défaut pour les messages cloud-à-appareil.</span><span class="sxs-lookup"><span data-stu-id="f76b8-198">Default TTL for cloud-to-device messages.</span></span> | <span data-ttu-id="f76b8-199">Intervalle de ISO_8601 des too2D (au minimum 1 minute).</span><span class="sxs-lookup"><span data-stu-id="f76b8-199">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="f76b8-200">Par défaut : 1 heure.</span><span class="sxs-lookup"><span data-stu-id="f76b8-200">Default: 1 hour.</span></span> |
| <span data-ttu-id="f76b8-201">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="f76b8-201">maxDeliveryCount</span></span>          | <span data-ttu-id="f76b8-202">Nombre de remises maximal pour les files d’attente par appareil cloud-à-appareil</span><span class="sxs-lookup"><span data-stu-id="f76b8-202">Maximum delivery count for cloud-to-device per-device queues.</span></span> | <span data-ttu-id="f76b8-203">1 too100.</span><span class="sxs-lookup"><span data-stu-id="f76b8-203">1 too100.</span></span> <span data-ttu-id="f76b8-204">Par défaut : 10.</span><span class="sxs-lookup"><span data-stu-id="f76b8-204">Default: 10.</span></span> |
| <span data-ttu-id="f76b8-205">feedback.ttlAsIso8601</span><span class="sxs-lookup"><span data-stu-id="f76b8-205">feedback.ttlAsIso8601</span></span>     | <span data-ttu-id="f76b8-206">Rétention des messages de commentaires liés au service.</span><span class="sxs-lookup"><span data-stu-id="f76b8-206">Retention for service-bound feedback messages.</span></span> | <span data-ttu-id="f76b8-207">Intervalle de ISO_8601 des too2D (au minimum 1 minute).</span><span class="sxs-lookup"><span data-stu-id="f76b8-207">ISO_8601 interval up too2D (minimum 1 minute).</span></span> <span data-ttu-id="f76b8-208">Par défaut : 1 heure.</span><span class="sxs-lookup"><span data-stu-id="f76b8-208">Default: 1 hour.</span></span> |
| <span data-ttu-id="f76b8-209">feedback.maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="f76b8-209">feedback.maxDeliveryCount</span></span> |<span data-ttu-id="f76b8-210">Nombre de remises maximal pour la file d’attente de commentaires.</span><span class="sxs-lookup"><span data-stu-id="f76b8-210">Maximum delivery count for feedback queue.</span></span> | <span data-ttu-id="f76b8-211">1 too100.</span><span class="sxs-lookup"><span data-stu-id="f76b8-211">1 too100.</span></span> <span data-ttu-id="f76b8-212">Par défaut : 100.</span><span class="sxs-lookup"><span data-stu-id="f76b8-212">Default: 100.</span></span> |

<span data-ttu-id="f76b8-213">Pour plus d’informations sur comment tooset ces options de configuration, consultez [créer des IoT hubs][lnk-portal].</span><span class="sxs-lookup"><span data-stu-id="f76b8-213">For more information about how tooset these configuration options, see [Create IoT hubs][lnk-portal].</span></span>

## <a name="next-steps"></a><span data-ttu-id="f76b8-214">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="f76b8-214">Next steps</span></span>

<span data-ttu-id="f76b8-215">Pour plus d’informations sur les kits de développement logiciel hello, vous pouvez utiliser les messages cloud-à-appareil tooreceive, consultez [kits de développement logiciel Azure IoT][lnk-sdks].</span><span class="sxs-lookup"><span data-stu-id="f76b8-215">For information about hello SDKs you can use tooreceive cloud-to-device messages, see [Azure IoT SDKs][lnk-sdks].</span></span>

<span data-ttu-id="f76b8-216">tootry à recevoir des messages de cloud sur l’appareil, consultez hello [envoyer cloud-à-appareil] [ lnk-c2d-tutorial] didacticiel.</span><span class="sxs-lookup"><span data-stu-id="f76b8-216">tootry out receiving cloud-to-device messages, see hello [Send cloud-to-device][lnk-c2d-tutorial] tutorial.</span></span>

[img-lifecycle]: ./media/iot-hub-devguide-messages-c2d/lifecycle.png

[lnk-portal]: iot-hub-create-through-portal.md
[lnk-c2d-guidance]: iot-hub-devguide-c2d-guidance.md
[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-ttl]: #message-expiration-time-to-live
[lnk-c2d-configuration]: #cloud-to-device-configuration-options
[lnk-lifecycle]: #message-lifecycle
[lnk-c2d-tutorial]: iot-hub-csharp-csharp-c2d.md
