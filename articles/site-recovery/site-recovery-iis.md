---
title: "aaaReplicate un serveur IIS à plusieurs niveaux en fonction d’application web à l’aide d’Azure Site Recovery | Documents Microsoft"
description: "Cet article décrit comment tooreplicate IIS web des machines virtuelles de batterie de serveurs à l’aide d’Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="73462-103">Répliquer une application web multiniveau basée sur IIS à l’aide d’Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="73462-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="73462-104">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="73462-104">Overview</span></span>


<span data-ttu-id="73462-105">Logiciel d’application est un moteur hello de productivité de l’entreprise dans une organisation.</span><span class="sxs-lookup"><span data-stu-id="73462-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="73462-106">Des applications web diverses peuvent répondre aux différents besoins d’une organisation.</span><span class="sxs-lookup"><span data-stu-id="73462-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="73462-107">Certaines, comme les applications de traitement des salaires et les applications financières, ainsi que les sites web destinés aux clients peuvent être de la plus grande importance pour une organisation.</span><span class="sxs-lookup"><span data-stu-id="73462-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="73462-108">Il est important pour hello organisation toohave d’et en cours d’exécution à la perte de tooprevent toutes les heures de productivité et plus important encore empêchent d’une image de marque toohello dommages de l’organisation de hello.</span><span class="sxs-lookup"><span data-stu-id="73462-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="73462-109">Les applications web critiques sont généralement configurées en tant qu’applications multiniveau avec web de hello, d’une base de données et d’applications sur différents niveaux.</span><span class="sxs-lookup"><span data-stu-id="73462-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="73462-110">Outre sont réparties entre plusieurs couches, hello applications peuvent également utiliser plusieurs serveurs dans chaque couche tooload équilibrer hello du trafic.</span><span class="sxs-lookup"><span data-stu-id="73462-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="73462-111">En outre, les mappages entre les différents niveaux et sur le serveur web de hello de hello peuvent reposer sur des adresses IP statiques.</span><span class="sxs-lookup"><span data-stu-id="73462-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="73462-112">Lors du basculement, certaines de ces mappages devez toobe mis à jour, en particulier, si vous avez plusieurs sites Web configurés sur le serveur web de hello.</span><span class="sxs-lookup"><span data-stu-id="73462-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="73462-113">En cas d’applications web à l’aide de SSL, les liaisons de certificat devra toobe mis à jour.</span><span class="sxs-lookup"><span data-stu-id="73462-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="73462-114">Méthodes de récupération de base sans réplication traditionnel impliquent la sauvegarde de différents fichiers de configuration, paramètres du Registre, liaisons, des composants personnalisés (COM ou .NET), contenu et également les certificats et récupération hello fichiers via un ensemble d’étapes manuelles.</span><span class="sxs-lookup"><span data-stu-id="73462-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="73462-115">Ces techniques sont clairement fastidieuses, sujettes aux erreurs et non évolutives.</span><span class="sxs-lookup"><span data-stu-id="73462-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="73462-116">Il est, par exemple, facilement possible pour tooforget sauvegarde des certificats et rester avec aucun choix, mais toobuy nouveaux certificats pour le serveur de hello après le basculement.</span><span class="sxs-lookup"><span data-stu-id="73462-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="73462-117">Une solution de récupération d’urgence, devraient permettre la modélisation des plans de récupération autour hello au-dessus des architectures d’applications complexes et également avoir hello capacité tooadd personnalisé étapes toohandle mappages d’application entre les différents niveaux assurant ainsi une par simple clic que capture la solution dans l’événement hello d’un sinistre début tooa diminuer RTO.</span><span class="sxs-lookup"><span data-stu-id="73462-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="73462-118">Cet article décrit comment tooprotect un IIS en fonction à l’aide de web application un [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="73462-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="73462-119">Cet article couvre les meilleures pratiques pour la réplication d’un à trois niveaux en fonction de IIS tooAzure d’application web, comment vous pouvez effectuer un exercice de récupération d’urgence, et comment vous pouvez basculement hello application tooAzure.</span><span class="sxs-lookup"><span data-stu-id="73462-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="73462-120">Composants requis</span><span class="sxs-lookup"><span data-stu-id="73462-120">Prerequisites</span></span>

<span data-ttu-id="73462-121">Avant de commencer, assurez-vous que vous comprenez les suivant hello :</span><span class="sxs-lookup"><span data-stu-id="73462-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="73462-122">Réplication d’un tooAzure de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="73462-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="73462-123">Comment trop[concevoir un réseau de récupération](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="73462-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="73462-124">Effectuer un tooAzure de basculement de test</span><span class="sxs-lookup"><span data-stu-id="73462-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="73462-125">Effectuer un basculement tooAzure</span><span class="sxs-lookup"><span data-stu-id="73462-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="73462-126">Comment trop[répliquer un contrôleur de domaine](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="73462-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="73462-127">Comment trop[répliquer de SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="73462-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="73462-128">Modèles de déploiement</span><span class="sxs-lookup"><span data-stu-id="73462-128">Deployment patterns</span></span>
<span data-ttu-id="73462-129">Une application web IIS en fonction suit généralement une des hello suivant des modèles de déploiement :</span><span class="sxs-lookup"><span data-stu-id="73462-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="73462-130">**Modèle de déploiement 1** Une batterie de serveurs web IIS avec ARR (Application Request Routing), un serveur IIS et Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="73462-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Modèle de déploiement](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="73462-132">**Modèle de déploiement 2** Une batterie de serveurs web IIS avec ARR (Application Request Routing), un serveur IIS, un serveur d’applications et Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="73462-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Modèle de déploiement](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="73462-134">Prise en charge de Site Recovery</span><span class="sxs-lookup"><span data-stu-id="73462-134">Site Recovery support</span></span>

<span data-ttu-id="73462-135">À des fins de hello de la création de cet article les ordinateurs virtuels VMware avec le serveur IIS version 7.5 sur Windows Server 2012 R2, Enterprise ont été utilisés.</span><span class="sxs-lookup"><span data-stu-id="73462-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="73462-136">Réplication de récupération de site est agnostique en termes d’application, les recommandations hello fournies ici sont toohold attendu sur également les scénarios suivants et pour une autre version d’IIS.</span><span class="sxs-lookup"><span data-stu-id="73462-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="73462-137">Source et cible</span><span class="sxs-lookup"><span data-stu-id="73462-137">Source and target</span></span>

<span data-ttu-id="73462-138">**Scénario**</span><span class="sxs-lookup"><span data-stu-id="73462-138">**Scenario**</span></span> | <span data-ttu-id="73462-139">**site secondaire de tooa**</span><span class="sxs-lookup"><span data-stu-id="73462-139">**tooa secondary site**</span></span> | <span data-ttu-id="73462-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="73462-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="73462-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="73462-141">**Hyper-V**</span></span> | <span data-ttu-id="73462-142">Oui</span><span class="sxs-lookup"><span data-stu-id="73462-142">Yes</span></span> | <span data-ttu-id="73462-143">Oui</span><span class="sxs-lookup"><span data-stu-id="73462-143">Yes</span></span>
<span data-ttu-id="73462-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="73462-144">**VMware**</span></span> | <span data-ttu-id="73462-145">Oui</span><span class="sxs-lookup"><span data-stu-id="73462-145">Yes</span></span> | <span data-ttu-id="73462-146">Oui</span><span class="sxs-lookup"><span data-stu-id="73462-146">Yes</span></span>
<span data-ttu-id="73462-147">**Serveur physique**</span><span class="sxs-lookup"><span data-stu-id="73462-147">**Physical server**</span></span> | <span data-ttu-id="73462-148">Non</span><span class="sxs-lookup"><span data-stu-id="73462-148">No</span></span> | <span data-ttu-id="73462-149">Oui</span><span class="sxs-lookup"><span data-stu-id="73462-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="73462-150">Répliquer des machines virtuelles</span><span class="sxs-lookup"><span data-stu-id="73462-150">Replicate virtual machines</span></span>

<span data-ttu-id="73462-151">Suivez [ce guide](site-recovery-vmware-to-azure.md) toostart répliquer tous les hello IIS web batterie de serveurs virtuels tooAzure.</span><span class="sxs-lookup"><span data-stu-id="73462-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="73462-152">Si vous utilisez une adresse IP statique, puis spécifiez IP hello souhaité hello tootake de machine virtuelle Bonjour [ **adresse IP cible** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) définition de paramètres de calcul et réseau.</span><span class="sxs-lookup"><span data-stu-id="73462-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![IP cible](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="73462-154">Création d’un plan de récupération</span><span class="sxs-lookup"><span data-stu-id="73462-154">Creating a recovery plan</span></span>

<span data-ttu-id="73462-155">Un plan de récupération permet de séquençage hello de basculement de différents niveaux dans une application multicouche, par conséquent, de maintenir la cohérence des applications.</span><span class="sxs-lookup"><span data-stu-id="73462-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="73462-156">Lors de la création d’un plan de récupération pour une application web multicouche, suivez hello étapes ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="73462-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="73462-157">[En savoir plus sur la création d’un plan de récupération](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="73462-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="73462-158">Ajout de groupes de machines virtuelles toofailover</span><span class="sxs-lookup"><span data-stu-id="73462-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="73462-159">Une application web IIS à plusieurs niveaux typique se compose d’un niveau de base de données avec SQL machines virtuelles, niveau de web hello constituée par un serveur IIS et une couche application.</span><span class="sxs-lookup"><span data-stu-id="73462-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="73462-160">Ajoutez toutes ces machines virtuelles toodifferent de groupe en fonction de la couche, comme ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="73462-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="73462-161">[En savoir plus sur la personnalisation du plan de récupération](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="73462-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="73462-162">Créez un plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="73462-162">Create a recovery plan.</span></span> <span data-ttu-id="73462-163">Ajoutez hello ordinateurs virtuels de niveau base de données sous le groupe 1 tooensure qu’ils sont arrêtés dernière et mis en premier.</span><span class="sxs-lookup"><span data-stu-id="73462-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="73462-164">Ajouter application hello hiérarchiser les machines virtuelles du groupe 2 où ils sont appelés après de la couche de base de données hello a été placée en.</span><span class="sxs-lookup"><span data-stu-id="73462-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="73462-165">Ajoutez hello web hiérarchiser les machines virtuelles dans le groupe 3 tels qu’ils sont appelés après de la couche d’application hello a été placée en.</span><span class="sxs-lookup"><span data-stu-id="73462-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="73462-166">Ajoutez équilibrer la charge des machines virtuelles dans le groupe 4 tels qu’ils sont appelés après mise niveau de hello web.</span><span class="sxs-lookup"><span data-stu-id="73462-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="73462-167">Ajout de scripts de plan de récupération toohello</span><span class="sxs-lookup"><span data-stu-id="73462-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="73462-168">Vous devrez peut-être toodo certaines opérations sur hello fonction de batterie de serveurs web basculement toomake IIS machines virtuelles post/Test de basculement correctement.</span><span class="sxs-lookup"><span data-stu-id="73462-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="73462-169">Vous pouvez automatiser l’opération de basculement hello post telles que la mise à jour des entrées DNS, la modification de la liaison de site, des modifications dans la chaîne de connexion en ajoutant des scripts correspondant dans le plan de récupération hello comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="73462-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="73462-170">[En savoir plus sur l’ajout de scripts dans un plan de récupération](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="73462-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="73462-171">Mise à jour DNS</span><span class="sxs-lookup"><span data-stu-id="73462-171">DNS Update</span></span>
<span data-ttu-id="73462-172">Si hello DNS est configuré pour une mise à jour DNS dynamique de machines virtuelles généralement mettre à jour hello DNS avec la nouvelle adresse IP de hello une fois qu’ils démarrent.</span><span class="sxs-lookup"><span data-stu-id="73462-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="73462-173">Tooadd un tooupdate étape explicite DNS avec hello nouvelles adresses IP d’ordinateurs virtuels hello puis ajouter ce [tooupdate adresse IP dans DNS de script](https://aka.ms/asr-dns-update) comme une action sur les groupes de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="73462-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="73462-174">Chaîne de connexion dans le fichier web.config d’une application</span><span class="sxs-lookup"><span data-stu-id="73462-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="73462-175">chaîne de connexion Hello spécifie la base de données hello hello du site web communique avec.</span><span class="sxs-lookup"><span data-stu-id="73462-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="73462-176">Si la chaîne de connexion hello porte le nom hello d’ordinateur virtuel de base de données hello, aucune étape supplémentaire n’est nécessaire après basculement et application hello pourront tooautomatically communiquer toohello DB.</span><span class="sxs-lookup"><span data-stu-id="73462-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="73462-177">En outre, si l’adresse IP de hello pour l’ordinateur virtuel de base de données hello est conservé, il ne sera pas nécessaire de chaîne de connexion tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="73462-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="73462-178">Si la chaîne de connexion hello fait référence toohello de base de données virtual machine à l’aide d’une adresse IP, vous devez toobe mis à jour après basculement.</span><span class="sxs-lookup"><span data-stu-id="73462-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="73462-179">Par exemple,</span><span class="sxs-lookup"><span data-stu-id="73462-179">E.g.</span></span> <span data-ttu-id="73462-180">Hello ci-dessous des chaîne de connexion pointe toohello DB avec IP 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="73462-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="73462-181">Vous pouvez mettre à jour de chaîne de connexion hello dans la couche web en ajoutant [script de mise à jour de connexion IIS](https://aka.ms/asr-update-webtier-script-classic) après le groupe 3 dans le plan de récupération hello.</span><span class="sxs-lookup"><span data-stu-id="73462-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="73462-182">Liaisons de site pour l’application hello</span><span class="sxs-lookup"><span data-stu-id="73462-182">Site bindings for hello application</span></span>
<span data-ttu-id="73462-183">Chaque site se compose d’informations qui incluent le type hello de liaison, adresse IP de hello quels hello serveur IIS écoute les demandes de toohello pour le site de hello, numéro de port hello et noms d’hôte hello pour le site de hello de liaison.</span><span class="sxs-lookup"><span data-stu-id="73462-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="73462-184">Au moment de hello d’un basculement, ces liaisons peut-être toobe mis à jour s’il existe une modification de l’adresse IP de hello qui s’y rapportent.</span><span class="sxs-lookup"><span data-stu-id="73462-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="73462-185">Si vous avez marqué « non assigné' pour la liaison de site hello comme exemple hello ci-dessous, il est inutile tooupdate ce basculement post de liaison.</span><span class="sxs-lookup"><span data-stu-id="73462-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="73462-186">En outre, si l’adresse IP de hello associé à un site n’est pas modifiée après basculement, la liaison de site hello ne doive pas être mis à jour (rétention de l’adresse IP de hello dépend de l’architecture en réseau hello et sous-réseaux affecté toohello les sites principaux et de restauration et donc peuvent ou ne peuvent possible pour votre organisation.)</span><span class="sxs-lookup"><span data-stu-id="73462-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Liaison SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="73462-188">Si vous avez associé l’adresse IP de hello avec un site, vous devez tooupdate toutes les liaisons de site avec l’adresse IP de la nouvelle hello.</span><span class="sxs-lookup"><span data-stu-id="73462-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="73462-189">Vous pouvez ajouter [script de mise à jour de couche Web IIS](https://aka.ms/asr-web-tier-update-runbook-classic) après les liaisons de site de récupération plan toochange hello, groupe 3.</span><span class="sxs-lookup"><span data-stu-id="73462-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="73462-190">Mettre à jour l’adresse IP de l’équilibreur de charge</span><span class="sxs-lookup"><span data-stu-id="73462-190">Update load balancer IP address</span></span>
<span data-ttu-id="73462-191">Si vous avez Application Request Routing un ordinateur virtuel, ajoutez [script de basculement ARR IIS](https://aka.ms/asr-iis-arrtier-failover-script-classic) après l’adresse IP de groupe 4 tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="73462-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="73462-192">liaison de certificat SSL Hello pour une connexion https</span><span class="sxs-lookup"><span data-stu-id="73462-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="73462-193">Sites Web peuvent avoir un certificat SSL associé qui permet de garantir une communication sécurisée entre le serveur Web de hello et navigateur de l’utilisateur hello.</span><span class="sxs-lookup"><span data-stu-id="73462-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="73462-194">Si le site Web de hello dispose d’une connexion https et une adresse IP toohello de liaison de site https associé du serveur IIS de hello avec une liaison de certificat SSL, une nouvelle liaison de site devez toobe ajoutée pour cert hello avec hello IP de l’ordinateur virtuel IIS hello valider le basculement.</span><span class="sxs-lookup"><span data-stu-id="73462-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="73462-195">certificat SSL de Hello peut être émise sur-</span><span class="sxs-lookup"><span data-stu-id="73462-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="73462-196">a) nom de domaine complet de hello du site Web de hello</span><span class="sxs-lookup"><span data-stu-id="73462-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="73462-197">b) nom hello du serveur de hello</span><span class="sxs-lookup"><span data-stu-id="73462-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="73462-198">c) d’un certificat générique pour le nom de domaine hello</span><span class="sxs-lookup"><span data-stu-id="73462-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="73462-199">d) une adresse IP : si le certificat SSL de hello est émise sur IP hello du serveur IIS de hello, un autre toobe de besoins de certificat SSL émis par rapport à l’adresse IP de hello Hello serveur IIS sur hello site Azure et devez toobe créé une liaison SSL supplémentaire pour ce certificat.</span><span class="sxs-lookup"><span data-stu-id="73462-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="73462-200">Par conséquent, il est conseillé de toonot un certificat SSL émis par rapport à IP.</span><span class="sxs-lookup"><span data-stu-id="73462-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="73462-201">C’est une option moins couramment utilisée, qui sera bientôt dépréciée conformément aux nouvelles modifications du forum sur l’autorité de certification/navigateur.</span><span class="sxs-lookup"><span data-stu-id="73462-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="73462-202">Mettre à jour de la dépendance de hello entre web de hello et de la couche d’application hello</span><span class="sxs-lookup"><span data-stu-id="73462-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="73462-203">Si vous avez une dépendance d’application spécifique en fonction de l’adresse IP de hello d’ordinateurs virtuels hello, vous devez tooupdate ce basculement post de dépendance.</span><span class="sxs-lookup"><span data-stu-id="73462-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="73462-204">Exécution d’un test de basculement</span><span class="sxs-lookup"><span data-stu-id="73462-204">Doing a test failover</span></span>
<span data-ttu-id="73462-205">Suivez [ce guide](site-recovery-test-failover-to-azure.md) toodo un test de basculement.</span><span class="sxs-lookup"><span data-stu-id="73462-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="73462-206">TooAzure portail, sélectionnez le coffre de votre Service de récupération.</span><span class="sxs-lookup"><span data-stu-id="73462-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="73462-207">Cliquez sur le plan de récupération hello créé pour la batterie de serveurs web IIS.</span><span class="sxs-lookup"><span data-stu-id="73462-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="73462-208">Cliquez sur Test de basculement.</span><span class="sxs-lookup"><span data-stu-id="73462-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="73462-209">Sélectionnez le point de récupération et le processus de basculement de test de réseau virtuel Azure toostart hello.</span><span class="sxs-lookup"><span data-stu-id="73462-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="73462-210">Une fois les environnement secondaire hello, vous pouvez effectuer vos validations.</span><span class="sxs-lookup"><span data-stu-id="73462-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="73462-211">Une fois les validations hello sont terminées, vous pouvez sélectionner 'Validations Terminer' et environnement de test de basculement hello est supprimé.</span><span class="sxs-lookup"><span data-stu-id="73462-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="73462-212">Exécution d’un basculement</span><span class="sxs-lookup"><span data-stu-id="73462-212">Doing a failover</span></span>
<span data-ttu-id="73462-213">Suivez [ce guide](site-recovery-failover.md) lorsque vous effectuez un basculement.</span><span class="sxs-lookup"><span data-stu-id="73462-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="73462-214">TooAzure portail, sélectionnez le coffre de votre Service de récupération.</span><span class="sxs-lookup"><span data-stu-id="73462-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="73462-215">Cliquez sur le plan de récupération hello créé pour la batterie de serveurs web IIS.</span><span class="sxs-lookup"><span data-stu-id="73462-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="73462-216">Cliquez sur « Basculement ».</span><span class="sxs-lookup"><span data-stu-id="73462-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="73462-217">Sélectionnez le processus de basculement de hello toostart de point de récupération.</span><span class="sxs-lookup"><span data-stu-id="73462-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="73462-218">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="73462-218">Next steps</span></span>
<span data-ttu-id="73462-219">Vous pouvez en savoir plus sur la [réplication d’autres applications](site-recovery-workload.md) à l’aide de Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="73462-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
