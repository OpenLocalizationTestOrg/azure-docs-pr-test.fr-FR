---
title: applications aaaReplicate avec SQL Server et Azure Site Recovery | Documents Microsoft
description: "Cet article décrit comment tooreplicate SQL Server à l’aide d’Azure Site Recovery pour les fonctions de reprise après sinistre de SQL Server."
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 9126f5e8-e9ed-4c31-b6b4-bf969c12c184
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: pratshar
ms.openlocfilehash: 99755f2cd2f7e924071f1e230ac4a0bda88f0a39
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="protect-sql-server-using-sql-server-disaster-recovery-and-azure-site-recovery"></a><span data-ttu-id="3ef5b-103">Protéger SQL Server à l’aide de la récupération d’urgence SQL Server et d’Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3ef5b-103">Protect SQL Server using SQL Server disaster recovery and Azure Site Recovery</span></span>

<span data-ttu-id="3ef5b-104">Cet article décrit comment tooprotect hello SQL Server back-end d’une application à l’aide d’une combinaison de continuité d’activité SQL Server et les technologies de récupération d’urgence, et [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-104">This article describes how tooprotect hello SQL Server back end of an application using a combination of SQL Server business continuity and disaster recovery (BCDR) technologies, and [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="3ef5b-105">Avant de commencer, assurez-vous de bien comprendre les fonctionnalités de récupération d’urgence de SQL Server, notamment le clustering de basculement, les groupes de disponibilité AlwaysOn, la mise en miroir de bases de données et la copie des journaux de transaction.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-105">Before you start, make sure you understand SQL Server disaster recovery capabilities, including failover clustering, Always On availability groups, database mirroring, and log shipping.</span></span>


## <a name="sql-server-deployments"></a><span data-ttu-id="3ef5b-106">Déploiements SQL Server</span><span class="sxs-lookup"><span data-stu-id="3ef5b-106">SQL Server deployments</span></span>

<span data-ttu-id="3ef5b-107">Nombreuses charges de travail utilisent SQL Server comme base, et il peut être intégré aux applications telles que SAP, les services de données tooimplement, Dynamics et SharePoint.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-107">Many workloads use SQL Server as a foundation, and it can be integrated with apps such as SharePoint, Dynamics, and SAP, tooimplement data services.</span></span>  <span data-ttu-id="3ef5b-108">SQL Server peut être déployé de plusieurs façons :</span><span class="sxs-lookup"><span data-stu-id="3ef5b-108">SQL Server can be deployed in a number of ways:</span></span>

* <span data-ttu-id="3ef5b-109">**SQL Server autonome**: le serveur SQL et toutes les bases de données sont hébergés sur un seul ordinateur (physique ou une machine virtuelle).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-109">**Standalone SQL Server**: SQL Server and all databases are hosted on a single machine (physical or a virtual).</span></span> <span data-ttu-id="3ef5b-110">Quand le serveur est virtualisé, le cluster hôte est utilisé pour la haute disponibilité locale.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-110">When virtualized, host clustering is used for local high availability.</span></span> <span data-ttu-id="3ef5b-111">La haute disponibilité pour le niveau invité n’est pas mise en œuvre.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-111">Guest-level high availability isn't implemented.</span></span>
* <span data-ttu-id="3ef5b-112">**Instances de clustering de basculement SQL Server (Always On FCI)** : au moins deux nœuds exécutant des instances SQL Server avec des disques partagés sont configurés dans un cluster de basculement Windows.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-112">**SQL Server Failover Clustering Instances (Always On FCI)**: Two or more nodes running SQL Server instanced with shared disks are configured in a Windows Failover cluster.</span></span> <span data-ttu-id="3ef5b-113">Si un nœud est arrêté, hello cluster permettre basculer SQL Server tooanother instance.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-113">If a node is down, hello cluster can fail SQL Server over tooanother instance.</span></span> <span data-ttu-id="3ef5b-114">Cette configuration est généralement utilisé tooimplement haute disponibilité sur un site principal.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-114">This setup is typically used tooimplement high availability at a primary site.</span></span> <span data-ttu-id="3ef5b-115">Ce déploiement ne protège pas contre les pannes ou de panne dans la couche de stockage partagé hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-115">This deployment doesn't protect against failure or outage in hello shared storage layer.</span></span> <span data-ttu-id="3ef5b-116">Un disque partagé peut être mis en œuvre avec iSCSI, Fibre Channel ou VHDx partagé.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-116">A shared disk can be implemented using iSCSI, fiber channel or shared vhdx.</span></span>
* <span data-ttu-id="3ef5b-117">**Groupes de disponibilité SQL Always On** : au moins deux nœuds sont configurés dans un cluster sans partage avec des bases de données SQL Server configurées dans un groupe de disponibilité avec réplication synchrone et basculement automatique.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-117">**SQL Always On Availability Groups**: Two or more nodes are set up in a shared nothing cluster, with SQL Server databases configured in an availability group, with synchronous replication and automatic failover.</span></span>

 <span data-ttu-id="3ef5b-118">Cet article s’appuie sur hello suivant natifs technologies de récupération d’urgence SQL pour la récupération de site distant tooa de bases de données :</span><span class="sxs-lookup"><span data-stu-id="3ef5b-118">This article leverages hello following native SQL disaster recovery technologies for recovering databases tooa remote site:</span></span>

* <span data-ttu-id="3ef5b-119">SQL groupes de disponibilité AlwaysOn, tooprovide pour la récupération d’urgence pour SQL Server 2012 ou 2014 Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-119">SQL Always On Availability Groups, tooprovide for disaster recovery for SQL Server 2012 or 2014 Enterprise editions.</span></span>
* <span data-ttu-id="3ef5b-120">Mise en miroir de base de données SQL en mode haute sécurité pour SQL Server édition Standard (toute version) ou SQL Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-120">SQL database mirroring in high safety mode, for SQL Server Standard edition (any version), or for SQL Server 2008 R2.</span></span>

## <a name="site-recovery-support"></a><span data-ttu-id="3ef5b-121">Prise en charge de Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3ef5b-121">Site Recovery support</span></span>

### <a name="supported-scenarios"></a><span data-ttu-id="3ef5b-122">Scénarios pris en charge</span><span class="sxs-lookup"><span data-stu-id="3ef5b-122">Supported scenarios</span></span>
<span data-ttu-id="3ef5b-123">Récupération de site peut protéger SQL Server tel qu’indiqué dans la table de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-123">Site Recovery can protect SQL Server as summarized in hello table.</span></span>

<span data-ttu-id="3ef5b-124">**Scénario**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-124">**Scenario**</span></span> | <span data-ttu-id="3ef5b-125">**site secondaire de tooa**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-125">**tooa secondary site**</span></span> | <span data-ttu-id="3ef5b-126">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-126">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="3ef5b-127">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-127">**Hyper-V**</span></span> | <span data-ttu-id="3ef5b-128">Oui</span><span class="sxs-lookup"><span data-stu-id="3ef5b-128">Yes</span></span> | <span data-ttu-id="3ef5b-129">Oui</span><span class="sxs-lookup"><span data-stu-id="3ef5b-129">Yes</span></span>
<span data-ttu-id="3ef5b-130">**VMware**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-130">**VMware**</span></span> | <span data-ttu-id="3ef5b-131">Oui</span><span class="sxs-lookup"><span data-stu-id="3ef5b-131">Yes</span></span> | <span data-ttu-id="3ef5b-132">Oui</span><span class="sxs-lookup"><span data-stu-id="3ef5b-132">Yes</span></span>
<span data-ttu-id="3ef5b-133">**Serveur physique**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-133">**Physical server**</span></span> | <span data-ttu-id="3ef5b-134">Oui</span><span class="sxs-lookup"><span data-stu-id="3ef5b-134">Yes</span></span> | <span data-ttu-id="3ef5b-135">Oui</span><span class="sxs-lookup"><span data-stu-id="3ef5b-135">Yes</span></span>

### <a name="supported-sql-server-versions"></a><span data-ttu-id="3ef5b-136">Versions de SQL Server prises en charge</span><span class="sxs-lookup"><span data-stu-id="3ef5b-136">Supported SQL Server versions</span></span>
<span data-ttu-id="3ef5b-137">Ces versions de SQL Server sont prises en charge pour les scénarios de hello pris en charge :</span><span class="sxs-lookup"><span data-stu-id="3ef5b-137">These SQL Server versions are supported, for hello supported scenarios:</span></span>

* <span data-ttu-id="3ef5b-138">SQL Server 2016 Entreprise et Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-138">SQL Server 2016 Enterprise and Standard</span></span>
* <span data-ttu-id="3ef5b-139">SQL Server 2014 Entreprise et Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-139">SQL Server 2014 Enterprise and Standard</span></span>
* <span data-ttu-id="3ef5b-140">SQL Server 2012 Entreprise et Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-140">SQL Server 2012 Enterprise and Standard</span></span>
* <span data-ttu-id="3ef5b-141">SQL Server 2008 R2 Entreprise et Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-141">SQL Server 2008 R2 Enterprise and Standard</span></span>

### <a name="supported-sql-server-integration"></a><span data-ttu-id="3ef5b-142">Intégration de SQL Server prise en charge</span><span class="sxs-lookup"><span data-stu-id="3ef5b-142">Supported SQL Server integration</span></span>

<span data-ttu-id="3ef5b-143">Récupération de site peut être intégrée à des technologies SQL Server BCDR natives résumées dans la table hello, tooprovide une solution de récupération d’urgence.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-143">Site Recovery can be integrated with native SQL Server BCDR technologies summarized in hello table, tooprovide a disaster recovery solution.</span></span>

<span data-ttu-id="3ef5b-144">**Fonctionnalité**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-144">**Feature**</span></span> | <span data-ttu-id="3ef5b-145">**Détails**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-145">**Details**</span></span> | <span data-ttu-id="3ef5b-146">**SQL Server**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-146">**SQL Server**</span></span> |
--- | --- | ---
<span data-ttu-id="3ef5b-147">**Groupe de disponibilité AlwaysOn**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-147">**Always On availability group**</span></span> | <span data-ttu-id="3ef5b-148">Plusieurs instances autonomes de SQL Server s’exécutent chacune dans un cluster de basculement qui comporte plusieurs nœuds.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-148">Multiple standalone instances of SQL Server each run in a failover cluster that has multiple nodes.</span></span><br/><br/><span data-ttu-id="3ef5b-149">Les bases de données peuvent être regroupées dans des groupes de basculement qui peuvent être copiés (mis en miroir) sur des instances de SQL Server, pour éviter tout stockage partagé.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-149">Databases can be grouped into failover groups that can be copied (mirrored) on SQL Server instances so that no shared storage is needed.</span></span><br/><br/><span data-ttu-id="3ef5b-150">Cette fonction assure une récupération d'urgence entre un site primaire et un ou plusieurs sites secondaires.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-150">Provides disaster recovery between a primary site and one or more secondary sites.</span></span> <span data-ttu-id="3ef5b-151">Il est possible de configurer deux nœuds dans un cluster sans partage avec les bases de données SQL Server configurées dans un groupe de disponibilité avec réplication synchrone et basculement automatique.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-151">Two nodes can be set up in a shared nothing cluster with SQL Server databases configured in an availability group with synchronous replication and automatic failover.</span></span> | <span data-ttu-id="3ef5b-152">SQL Server 2014 et 2012 édition Enterprise</span><span class="sxs-lookup"><span data-stu-id="3ef5b-152">SQL Server 2014 & 2012 Enterprise edition</span></span>
<span data-ttu-id="3ef5b-153">**Clustering de basculement (instance de cluster de basculement AlwaysOn)**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-153">**Failover clustering (Always On FCI)**</span></span> | <span data-ttu-id="3ef5b-154">SQL Server tire parti de la fonction de cluster de basculement Windows pour assurer la haute disponibilité des charges de travail SQL Server locales.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-154">SQL Server leverages Windows failover clustering for high availability of on-premises SQL Server workloads.</span></span><br/><br/><span data-ttu-id="3ef5b-155">Les nœuds qui exécutent des instances de SQL Server avec des disques partagés sont configurés dans un cluster de basculement.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-155">Nodes running instances of SQL Server with shared disks are configured in a failover cluster.</span></span> <span data-ttu-id="3ef5b-156">Si une instance est arrêtée hello basculement cluster toodifferent une.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-156">If an instance is down hello cluster fails over toodifferent one.</span></span><br/><br/><span data-ttu-id="3ef5b-157">cluster de Hello ne protège pas contre les pannes ou interruptions dans le stockage partagé.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-157">hello cluster doesn't protect against failure or outages in shared storage.</span></span> <span data-ttu-id="3ef5b-158">les disques partagés Hello peuvent être implémentée avec iSCSI, Fibre channel, ou partagé Vhdx.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-158">hello shared disk can be implemented with iSCSI, fiber channel, or shared VHDXs.</span></span> | <span data-ttu-id="3ef5b-159">Éditions SQL Server Enterprise</span><span class="sxs-lookup"><span data-stu-id="3ef5b-159">SQL Server Enterprise editions</span></span><br/><br/><span data-ttu-id="3ef5b-160">SQL Server Standard edition (nœuds tootwo limitée uniquement)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-160">SQL Server Standard edition (limited tootwo nodes only)</span></span>
<span data-ttu-id="3ef5b-161">**Mise en miroir de base de données (mode haute sécurité)**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-161">**Database mirroring (high safety mode)**</span></span> | <span data-ttu-id="3ef5b-162">Protège une copie secondaire de la base de données unique tooa unique.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-162">Protects a single database tooa single secondary copy.</span></span> <span data-ttu-id="3ef5b-163">Disponible dans les modes de réplication haute sécurité (synchrone) et hautes performances (asynchrone).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-163">Available in both high safety (synchronous) and high performance (asynchronous) replication modes.</span></span> <span data-ttu-id="3ef5b-164">Cluster de basculement non requis.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-164">Doesn’t require a failover cluster.</span></span> | <span data-ttu-id="3ef5b-165">SQL Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="3ef5b-165">SQL Server 2008 R2</span></span><br/><br/><span data-ttu-id="3ef5b-166">SQL Server Enterprise (toutes les éditions)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-166">SQL Server Enterprise all editions</span></span>
<span data-ttu-id="3ef5b-167">**Serveur SQL autonome**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-167">**Standalone SQL Server**</span></span> | <span data-ttu-id="3ef5b-168">Hello SQL Server et la base de données sont hébergées sur un serveur unique (physique ou virtuel).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-168">hello SQL Server and database are hosted on a single server (physical or virtual).</span></span> <span data-ttu-id="3ef5b-169">Cluster hôte est utilisé pour la haute disponibilité en cas hello serveur virtuel.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-169">Host clustering is used for high availability if hello server is virtual.</span></span> <span data-ttu-id="3ef5b-170">Aucune haute disponibilité pour le niveau invité.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-170">No guest-level high availability.</span></span> | <span data-ttu-id="3ef5b-171">Édition Enterprise ou Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-171">Enterprise or Standard edition</span></span>

## <a name="deployment-recommendations"></a><span data-ttu-id="3ef5b-172">Recommandations concernant le déploiement</span><span class="sxs-lookup"><span data-stu-id="3ef5b-172">Deployment recommendations</span></span>

<span data-ttu-id="3ef5b-173">Ce tableau récapitule nos recommandations pour intégrer les technologies BCDR de SQL Server à Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-173">This table summarizes our recommendations for integrating SQL Server BCDR technologies with Site Recovery.</span></span>

| <span data-ttu-id="3ef5b-174">**Version**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-174">**Version**</span></span> | <span data-ttu-id="3ef5b-175">**Édition**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-175">**Edition**</span></span> | <span data-ttu-id="3ef5b-176">**Déploiement**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-176">**Deployment**</span></span> | <span data-ttu-id="3ef5b-177">**Local tooon localement**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-177">**On-prem tooon-prem**</span></span> | <span data-ttu-id="3ef5b-178">**Local tooAzure**</span><span class="sxs-lookup"><span data-stu-id="3ef5b-178">**On-prem tooAzure**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="3ef5b-179">SQL Server 2014 ou 2012</span><span class="sxs-lookup"><span data-stu-id="3ef5b-179">SQL Server 2014 or 2012</span></span> |<span data-ttu-id="3ef5b-180">Entreprise</span><span class="sxs-lookup"><span data-stu-id="3ef5b-180">Enterprise</span></span> |<span data-ttu-id="3ef5b-181">Instance de cluster de basculement</span><span class="sxs-lookup"><span data-stu-id="3ef5b-181">Failover cluster instance</span></span> |<span data-ttu-id="3ef5b-182">Groupes de disponibilité AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="3ef5b-182">Always On availability groups</span></span> |<span data-ttu-id="3ef5b-183">Groupes de disponibilité AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="3ef5b-183">Always On availability groups</span></span> |
|| <span data-ttu-id="3ef5b-184">Entreprise</span><span class="sxs-lookup"><span data-stu-id="3ef5b-184">Enterprise</span></span> |<span data-ttu-id="3ef5b-185">Groupes de disponibilité AlwaysOn pour la haute disponibilité</span><span class="sxs-lookup"><span data-stu-id="3ef5b-185">Always On availability groups for high availability</span></span> |<span data-ttu-id="3ef5b-186">Groupes de disponibilité AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="3ef5b-186">Always On availability groups</span></span> |<span data-ttu-id="3ef5b-187">Groupes de disponibilité AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="3ef5b-187">Always On availability groups</span></span> | |
|| <span data-ttu-id="3ef5b-188">Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-188">Standard</span></span> |<span data-ttu-id="3ef5b-189">Instance de cluster de basculement (FCI)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-189">Failover cluster instance (FCI)</span></span> |<span data-ttu-id="3ef5b-190">Réplication Site Recovery avec miroir local</span><span class="sxs-lookup"><span data-stu-id="3ef5b-190">Site Recovery replication with local mirror</span></span> |<span data-ttu-id="3ef5b-191">Réplication Site Recovery avec miroir local</span><span class="sxs-lookup"><span data-stu-id="3ef5b-191">Site Recovery replication with local mirror</span></span> | |
|| <span data-ttu-id="3ef5b-192">Enterprise ou Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-192">Enterprise or Standard</span></span> |<span data-ttu-id="3ef5b-193">Standalone</span><span class="sxs-lookup"><span data-stu-id="3ef5b-193">Standalone</span></span> |<span data-ttu-id="3ef5b-194">Réplication de la récupération de sites</span><span class="sxs-lookup"><span data-stu-id="3ef5b-194">Site Recovery replication</span></span> |<span data-ttu-id="3ef5b-195">Réplication de la récupération de sites</span><span class="sxs-lookup"><span data-stu-id="3ef5b-195">Site Recovery replication</span></span> | |
| <span data-ttu-id="3ef5b-196">SQL Server 2008 R2 ou 2008</span><span class="sxs-lookup"><span data-stu-id="3ef5b-196">SQL Server 2008 R2 or 2008</span></span> |<span data-ttu-id="3ef5b-197">Enterprise ou Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-197">Enterprise or Standard</span></span> |<span data-ttu-id="3ef5b-198">Instance de cluster de basculement (FCI)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-198">Failover cluster instance (FCI)</span></span> |<span data-ttu-id="3ef5b-199">Réplication Site Recovery avec miroir local</span><span class="sxs-lookup"><span data-stu-id="3ef5b-199">Site Recovery replication with local mirror</span></span> |<span data-ttu-id="3ef5b-200">Réplication Site Recovery avec miroir local</span><span class="sxs-lookup"><span data-stu-id="3ef5b-200">Site Recovery replication with local mirror</span></span> |
|| <span data-ttu-id="3ef5b-201">Enterprise ou Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-201">Enterprise or Standard</span></span> |<span data-ttu-id="3ef5b-202">Standalone</span><span class="sxs-lookup"><span data-stu-id="3ef5b-202">Standalone</span></span> |<span data-ttu-id="3ef5b-203">Réplication de la récupération de sites</span><span class="sxs-lookup"><span data-stu-id="3ef5b-203">Site Recovery replication</span></span> |<span data-ttu-id="3ef5b-204">Réplication de la récupération de sites</span><span class="sxs-lookup"><span data-stu-id="3ef5b-204">Site Recovery replication</span></span> | |
| <span data-ttu-id="3ef5b-205">SQL Server (toute version)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-205">SQL Server (Any version)</span></span> |<span data-ttu-id="3ef5b-206">Enterprise ou Standard</span><span class="sxs-lookup"><span data-stu-id="3ef5b-206">Enterprise or Standard</span></span> |<span data-ttu-id="3ef5b-207">Instance de cluster de basculement - application DTC</span><span class="sxs-lookup"><span data-stu-id="3ef5b-207">Failover cluster instance - DTC application</span></span> |<span data-ttu-id="3ef5b-208">Réplication de la récupération de sites</span><span class="sxs-lookup"><span data-stu-id="3ef5b-208">Site Recovery replication</span></span> |<span data-ttu-id="3ef5b-209">Non pris en charge</span><span class="sxs-lookup"><span data-stu-id="3ef5b-209">Not Supported</span></span> |

## <a name="deployment-prerequisites"></a><span data-ttu-id="3ef5b-210">Conditions préalables au déploiement</span><span class="sxs-lookup"><span data-stu-id="3ef5b-210">Deployment prerequisites</span></span>

* <span data-ttu-id="3ef5b-211">Un déploiement local de SQL Server exécutant une version prise en charge de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-211">An on-premises SQL Server deployment, running a supported SQL Server version.</span></span> <span data-ttu-id="3ef5b-212">En général, il est également nécessaire de configurer Active Directory pour votre serveur SQL.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-212">Typically, you also need Active Directory for your SQL server.</span></span>
* <span data-ttu-id="3ef5b-213">configuration requise de Hello pour hello scénario que vous souhaitez toodeploy.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-213">hello requirements for hello scenario you want toodeploy.</span></span> <span data-ttu-id="3ef5b-214">En savoir plus sur les exigences de prise en charge pour [tooAzure de réplication](site-recovery-support-matrix-to-azure.md) et [local](site-recovery-support-matrix.md), et [conditions préalables au déploiement](site-recovery-prereq.md).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-214">Learn more about support requirements for [replication tooAzure](site-recovery-support-matrix-to-azure.md) and [on-premises](site-recovery-support-matrix.md), and [deployment prerequisites](site-recovery-prereq.md).</span></span>
* <span data-ttu-id="3ef5b-215">tooset la récupération dans Azure, exécution hello [Azure Virtual Machine Readiness Assessment](http://www.microsoft.com/download/details.aspx?id=40898) outil sur vos ordinateurs virtuels SQL Server, toomake assurer qu’ils sont compatibles avec Azure et de récupération de Site.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-215">tooset up recovery in Azure, run hello [Azure Virtual Machine Readiness Assessment](http://www.microsoft.com/download/details.aspx?id=40898) tool on your SQL Server virtual machines, toomake sure they're compatible with Azure and Site Recovery.</span></span>

## <a name="set-up-active-directory"></a><span data-ttu-id="3ef5b-216">Configurer Active Directory</span><span class="sxs-lookup"><span data-stu-id="3ef5b-216">Set up Active Directory</span></span>

<span data-ttu-id="3ef5b-217">Configurer Active Directory, dans le site de récupération secondaire hello, pour SQL Server toorun correctement.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-217">Set up Active Directory, in hello secondary recovery site, for SQL Server toorun properly.</span></span>

* <span data-ttu-id="3ef5b-218">**Petite entreprise**, avec un petit nombre d’applications et de contrôleur de domaine unique pour le site local de hello, si vous souhaitez que toofail sur l’ensemble du site hello, nous vous recommandons d’utiliser Site Recovery réplication tooreplicate hello contrôleur de domaine Centre de données secondaire toohello ou tooAzure.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-218">**Small enterprise**—With a small number of applications, and single domain controller for hello on-premises site, if you want toofail over hello entire site, we recommend you use Site Recovery replication tooreplicate hello domain controller toohello secondary datacenter, or tooAzure.</span></span>
* <span data-ttu-id="3ef5b-219">**Toolarge moyenne entreprise**: Si vous avez un grand nombre d’applications, une forêt Active Directory, et que vous souhaitez toofail par les applications ou charges de travail, nous vous recommandons de configurer un contrôleur de domaine supplémentaire dans le centre de données secondaire hello ou dans Azure.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-219">**Medium toolarge enterprise**—If you have a large number of applications, an Active Directory forest, and you want toofail over by application or workload, we recommend you set up an additional domain controller in hello secondary datacenter, or in Azure.</span></span> <span data-ttu-id="3ef5b-220">Si vous utilisez Always On disponibilité groupes toorecover tooa site distant, nous vous recommandons de que vous configurez un autre contrôleur de domaine supplémentaire sur le site secondaire de hello ou dans Azure, toouse d’instance de SQL Server hello récupérée.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-220">If you're using Always On availability groups toorecover tooa remote site, we recommend you set up another additional domain controller on hello secondary site or in Azure, toouse for hello recovered SQL Server instance.</span></span>

<span data-ttu-id="3ef5b-221">instructions Hello dans cet article suppose qu’un contrôleur de domaine est disponible dans l’emplacement secondaire de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-221">hello instructions in this article presume that a domain controller is available in hello secondary location.</span></span> <span data-ttu-id="3ef5b-222">[ici](site-recovery-active-directory.md) .</span><span class="sxs-lookup"><span data-stu-id="3ef5b-222">[Read more](site-recovery-active-directory.md) about protecting Active Directory with Site Recovery.</span></span>


## <a name="integrate-with-sql-server-always-on-for-replication-tooazure"></a><span data-ttu-id="3ef5b-223">Intégrer avec SQL Server Always On pour la réplication tooAzure</span><span class="sxs-lookup"><span data-stu-id="3ef5b-223">Integrate with SQL Server Always On for replication tooAzure</span></span>

<span data-ttu-id="3ef5b-224">Voici ce que vous devez toodo :</span><span class="sxs-lookup"><span data-stu-id="3ef5b-224">Here's what you need toodo:</span></span>

1. <span data-ttu-id="3ef5b-225">Importez les scripts sur votre compte Azure Automation.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-225">Import scripts into your Azure Automation account.</span></span> <span data-ttu-id="3ef5b-226">Contient des scripts de hello toofailover groupe de disponibilité SQL dans un [machine virtuelle Resource Manager](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAG.ps1) et un [virtuels standard](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAGClassic.ps1).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-226">This contains hello scripts toofailover SQL Availability Group in a [Resource Manager virtual machine](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAG.ps1) and a [Classic virtual machine](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAGClassic.ps1).</span></span>

    <span data-ttu-id="3ef5b-227">[![Déployer tooAzure](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c4803408-340e-49e3-9a1f-0ed3f689813d.png)](https://aka.ms/asr-automationrunbooks-deploy)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-227">[![Deploy tooAzure](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c4803408-340e-49e3-9a1f-0ed3f689813d.png)](https://aka.ms/asr-automationrunbooks-deploy)</span></span>


1. <span data-ttu-id="3ef5b-228">Ajoutez ASR-SQL-FailoverAG comme une action de versions antérieures du premier groupe de hello hello du plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-228">Add ASR-SQL-FailoverAG as a pre action of hello first group of hello recovery plan.</span></span>

1. <span data-ttu-id="3ef5b-229">Suivez les instructions de hello disponibles dans hello script toocreate un nom de hello tooprovide variable automation hello des groupes de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-229">Follow hello instructions available in hello script toocreate an automation variable tooprovide hello name of hello availability groups.</span></span>

### <a name="steps-toodo-a-test-failover"></a><span data-ttu-id="3ef5b-230">Étapes toodo un test de basculement</span><span class="sxs-lookup"><span data-stu-id="3ef5b-230">Steps toodo a test failover</span></span>

<span data-ttu-id="3ef5b-231">SQL AlwaysOn ne prend pas en charge le test de basculement de manière native.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-231">SQL Always On doesn’t natively support test failover.</span></span> <span data-ttu-id="3ef5b-232">Par conséquent, nous vous recommandons de suivant de hello :</span><span class="sxs-lookup"><span data-stu-id="3ef5b-232">Therefore, we recommend hello following:</span></span>

1. <span data-ttu-id="3ef5b-233">Configurer [Azure Backup](../backup/backup-azure-vms.md) sur l’ordinateur virtuel hello qui héberge le réplica de groupe de disponibilité hello dans Azure.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-233">Set up [Azure Backup](../backup/backup-azure-vms.md) on hello virtual machine that hosts hello availability group replica in Azure.</span></span>

1. <span data-ttu-id="3ef5b-234">Avant de déclencher un test de basculement hello du plan de récupération, récupérez hello virtual machine à partir de la sauvegarde de hello effectuée à l’étape précédente de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-234">Before triggering test failover of hello recovery plan, recover hello virtual machine from hello backup taken in hello previous step.</span></span>

    ![<span data-ttu-id="3ef5b-235">Restauration à partir de Sauvegarde Azure</span><span class="sxs-lookup"><span data-stu-id="3ef5b-235">Restore from Azure Backup</span></span> ](./media/site-recovery-sql/restore-from-backup.png)

1. <span data-ttu-id="3ef5b-236">[Forcer un quorum](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/force-a-wsfc-cluster-to-start-without-a-quorum#PowerShellProcedure) dans la machine virtuelle de hello restauré à partir de la sauvegarde.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-236">[Force a quorum](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/force-a-wsfc-cluster-to-start-without-a-quorum#PowerShellProcedure) in hello virtual machine restored from backup.</span></span>

1. <span data-ttu-id="3ef5b-237">Mettre à jour d’adresse IP de hello écouteur tooan IP disponible dans le réseau de basculement de test hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-237">Update IP of hello listener tooan IP available in hello test failover network.</span></span>

    ![Mettre à jour l’adresse IP de l’écouteur](./media/site-recovery-sql/update-listener-ip.png)

1. <span data-ttu-id="3ef5b-239">Mettez l’écouteur en ligne.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-239">Bring listener online.</span></span>

    ![Mettre l’écouteur en ligne](./media/site-recovery-sql/bring-listener-online.png)

1. <span data-ttu-id="3ef5b-241">Créez un équilibreur de charge avec une adresse IP créée sous le serveur frontal IP pool correspondante tooeach écouteur et ajouté dans le pool principal d’hello un ordinateur virtuel SQL hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-241">Create a load balancer with one IP created under frontend IP pool corresponding tooeach availability group listener and with hello SQL virtual machine added in hello backend pool.</span></span>

     ![<span data-ttu-id="3ef5b-242">Créer un équilibrage de charge – pool d’adresses IP frontal</span><span class="sxs-lookup"><span data-stu-id="3ef5b-242">Create Load Balancer - Frontend IP pool</span></span> ](./media/site-recovery-sql/create-load-balancer1.png)

    ![<span data-ttu-id="3ef5b-243">Créer un équilibrage de charge – pool principal</span><span class="sxs-lookup"><span data-stu-id="3ef5b-243">Create Load Balancer - Backend pool</span></span> ](./media/site-recovery-sql/create-load-balancer2.png)

1. <span data-ttu-id="3ef5b-244">Effectuez un test de basculement hello du plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-244">Do a test failover of hello recovery plan.</span></span>

### <a name="steps-toodo-a-failover"></a><span data-ttu-id="3ef5b-245">Étapes toodo un basculement</span><span class="sxs-lookup"><span data-stu-id="3ef5b-245">Steps toodo a failover</span></span>

<span data-ttu-id="3ef5b-246">Une fois que vous avez ajouté le script de hello dans le plan de récupération hello et plan de récupération hello validé en effectuant un test de basculement, vous pouvez effectuer le basculement hello du plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-246">Once you have added hello script in hello recovery plan and validated hello recovery plan by doing a test failover, you can do failover of hello recovery plan.</span></span>


## <a name="integrate-with-sql-server-always-on-for-replication-tooa-secondary-on-premises-site"></a><span data-ttu-id="3ef5b-247">Intégration avec SQL Server Always On pour le site de réplication tooa sur site secondaire</span><span class="sxs-lookup"><span data-stu-id="3ef5b-247">Integrate with SQL Server Always On for replication tooa secondary on-premises site</span></span>

<span data-ttu-id="3ef5b-248">Hello SQL Server est à l’aide de groupes de disponibilité pour une haute disponibilité (ou une instance FCI), nous vous recommandons à l’aide de groupes de disponibilité sur le site de récupération hello également.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-248">If hello SQL Server is using availability groups for high availability (or an FCI), we recommend using availability groups on hello recovery site as well.</span></span> <span data-ttu-id="3ef5b-249">Notez que cela s’applique tooapps qui n’utilisent pas les transactions distribuées.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-249">Note that this applies tooapps that don't use distributed transactions.</span></span>

1. <span data-ttu-id="3ef5b-250">[Configurez les bases de données](https://msdn.microsoft.com/library/hh213078.aspx) dans des groupes de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-250">[Configure databases](https://msdn.microsoft.com/library/hh213078.aspx) into availability groups.</span></span>
1. <span data-ttu-id="3ef5b-251">Créer un réseau virtuel sur le site secondaire de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-251">Create a virtual network on hello secondary site.</span></span>
1. <span data-ttu-id="3ef5b-252">Configurer une connexion VPN de site à site entre le réseau virtuel de hello et le site principal de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-252">Set up a site-to-site VPN connection between hello virtual network, and hello primary site.</span></span>
1. <span data-ttu-id="3ef5b-253">Créer un ordinateur virtuel sur le site de récupération hello et installer SQL Server sur ce dernier.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-253">Create a virtual machine on hello recovery site, and install SQL Server on it.</span></span>
1. <span data-ttu-id="3ef5b-254">Étendre hello existant Always On disponibilité groupes toohello nouvelle machine virtuelle de serveur SQL.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-254">Extend hello existing Always On availability groups toohello new SQL Server VM.</span></span> <span data-ttu-id="3ef5b-255">Configurez cette instance SQL Server comme une copie de réplica asynchrone.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-255">Configure this SQL Server instance as an asynchronous replica copy.</span></span>
1. <span data-ttu-id="3ef5b-256">Créer un écouteur de groupe de disponibilité, ou mettre à jour de hello écouteur tooinclude hello réplica asynchrone ordinateur virtuel.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-256">Create an availability group listener, or update hello existing listener tooinclude hello asynchronous replica virtual machine.</span></span>
1. <span data-ttu-id="3ef5b-257">Assurez-vous que cette batterie de serveurs application hello est configuré à l’aide du port d’écoute hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-257">Make sure that hello application farm is set up using hello listener.</span></span> <span data-ttu-id="3ef5b-258">S’il est le programme d’installation à l’aide du nom du serveur de base de données hello, mettez-le à jour écouteur de hello toouse, vous n’avez pas besoin tooreconfigure après le basculement de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-258">If it's setup up using hello database server name, update it toouse hello listener, so you don't need tooreconfigure it after hello failover.</span></span>

<span data-ttu-id="3ef5b-259">Pour les applications qui utilisent des transactions distribuées, nous vous recommandons de déployer Site Recovery avec la [réplication de site à site avec serveur physique / VMware](site-recovery-vmware-to-vmware.md).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-259">For applications that use distributed transactions, we recommend you deploy Site Recovery with [VMware/physical server site-to-site replication](site-recovery-vmware-to-vmware.md).</span></span>

### <a name="recovery-plan-considerations"></a><span data-ttu-id="3ef5b-260">Considérations concernant le plan de récupération</span><span class="sxs-lookup"><span data-stu-id="3ef5b-260">Recovery plan considerations</span></span>
1. <span data-ttu-id="3ef5b-261">Ajoutez cette bibliothèque exemple script toohello VMM, sur les sites principaux et secondaires hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-261">Add this sample script toohello VMM library, on hello primary and secondary sites.</span></span>

        Param(
        [string]$SQLAvailabilityGroupPath
        )
        import-module sqlps
        Switch-SqlAvailabilityGroup -Path $SQLAvailabilityGroupPath -AllowDataLoss -force

1. <span data-ttu-id="3ef5b-262">Lorsque vous créez un plan de récupération pour une application hello, ajoutez une pre action tooGroup-1 sous forme de script étape, qui appelle hello script toofail sur les groupes de disponibilité.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-262">When you create a recovery plan for hello application, add a pre action tooGroup-1 scripted step, that invokes hello script toofail over availability groups.</span></span>

## <a name="protect-a-standalone-sql-server"></a><span data-ttu-id="3ef5b-263">Protéger un serveur SQL Server autonome</span><span class="sxs-lookup"><span data-stu-id="3ef5b-263">Protect a standalone SQL Server</span></span>

<span data-ttu-id="3ef5b-264">Dans ce scénario, nous vous recommandons d’utiliser l’ordinateur SQL Server Site Recovery réplication tooprotect hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-264">In this scenario, we recommend that you use Site Recovery replication tooprotect hello SQL Server machine.</span></span> <span data-ttu-id="3ef5b-265">les étapes exactes Hello dépendra si SQL Server est un ordinateur virtuel ou un serveur physique et si vous souhaitez tooreplicate tooAzure ou une base de données secondaire site local.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-265">hello exact steps will depend whether SQL Server is a VM or a physical server, and whether you want tooreplicate tooAzure or a secondary on-premises site.</span></span> <span data-ttu-id="3ef5b-266">En savoir plus sur les [scénarios Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-266">Learn about [Site Recovery scenarios](site-recovery-overview.md).</span></span>

## <a name="protect-a-sql-server-cluster-standard-editionwindows-server-2008-r2"></a><span data-ttu-id="3ef5b-267">Protéger un cluster SQL Server (Standard Edition/Windows Server 2008 R2)</span><span class="sxs-lookup"><span data-stu-id="3ef5b-267">Protect a SQL Server cluster (standard edition/Windows Server 2008 R2)</span></span>

<span data-ttu-id="3ef5b-268">Pour un cluster SQL Server Standard edition ou SQL Server 2008 R2, nous vous recommandons de qu'utiliser la réplication de Site Recovery tooprotect SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-268">For a cluster running SQL Server Standard edition, or SQL Server 2008 R2, we recommend you use Site Recovery replication tooprotect SQL Server.</span></span>

### <a name="on-premises-tooon-premises"></a><span data-ttu-id="3ef5b-269">Tooon-site local</span><span class="sxs-lookup"><span data-stu-id="3ef5b-269">On-premises tooon-premises</span></span>

* <span data-ttu-id="3ef5b-270">Si l’application hello utilise des transactions distribuées nous vous recommandons de déployer [Site Recovery avec la réplication SAN](site-recovery-vmm-san.md) pour un environnement Hyper-V, ou [tooVMware du serveur VMware/physiques](site-recovery-vmware-to-vmware.md) d’un environnement VMware.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-270">If hello app uses distributed transactions we recommend you deploy [Site Recovery with SAN replication](site-recovery-vmm-san.md) for a Hyper-V environment, or [VMware/physical server tooVMware](site-recovery-vmware-to-vmware.md) for a VMware environment.</span></span>
* <span data-ttu-id="3ef5b-271">Pour les applications non-DTC, utilisez hello au-dessus de cluster de hello toorecover approche comme serveur autonome, en tirant parti d’une mise en miroir de base de données locale haute sécurité.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-271">For non-DTC applications, use hello above approach toorecover hello cluster as a standalone server, by leveraging a local high safety DB mirror.</span></span>

### <a name="on-premises-tooazure"></a><span data-ttu-id="3ef5b-272">Local tooAzure</span><span class="sxs-lookup"><span data-stu-id="3ef5b-272">On-premises tooAzure</span></span>

<span data-ttu-id="3ef5b-273">Récupération de site ne fournit pas invité prise en charge de cluster lors de la réplication tooAzure.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-273">Site Recovery doesn't provide guest cluster support when replicating tooAzure.</span></span> <span data-ttu-id="3ef5b-274">De même, SQL Server n’inclut aucune solution de récupération d'urgence à faible coût dans l’édition Standard.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-274">SQL Server also doesn't provide a low-cost disaster recovery solution for Standard edition.</span></span> <span data-ttu-id="3ef5b-275">Dans ce scénario, nous vous recommandons de vous protégez hello local SQL Server cluster tooa autonome SQL Server et les restaurer dans Azure.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-275">In this scenario, we recommend you protect hello on-premises SQL Server cluster tooa standalone SQL Server, and recover it in Azure.</span></span>

1. <span data-ttu-id="3ef5b-276">Configurer une instance de SQL Server autonome supplémentaires sur le site local de hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-276">Configure an additional standalone SQL Server instance on hello on-premises site.</span></span>
1. <span data-ttu-id="3ef5b-277">Configurer hello instance tooserve comme une mise en miroir de bases de données hello vous souhaitez tooprotect.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-277">Configure hello instance tooserve as a mirror for hello databases you want tooprotect.</span></span> <span data-ttu-id="3ef5b-278">Configurez la mise en miroir en mode haute sécurité.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-278">Configure mirroring in high safety mode.</span></span>
1. <span data-ttu-id="3ef5b-279">Configurer la récupération de Site sur le site local de hello, pour ([Hyper-V](site-recovery-hyper-v-site-to-azure.md) ou [des serveurs VMware machines virtuelles/physiques)](site-recovery-vmware-to-azure-classic.md).</span><span class="sxs-lookup"><span data-stu-id="3ef5b-279">Configure Site Recovery on hello on-premises site, for ([Hyper-V](site-recovery-hyper-v-site-to-azure.md) or [VMware VMs/physical servers)](site-recovery-vmware-to-azure-classic.md).</span></span>
1. <span data-ttu-id="3ef5b-280">Utilisez le nouveau SQL Server instance tooAzure de récupération de Site réplication tooreplicate hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-280">Use Site Recovery replication tooreplicate hello new SQL Server instance tooAzure.</span></span> <span data-ttu-id="3ef5b-281">S’agissant d’une copie miroir de haute sécurité, il sera synchronisé avec le cluster principal de hello, mais il sera répliqué tooAzure à l’aide de la réplication de la récupération de Site.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-281">Since it's a high safety mirror copy, it will be synchronized with hello primary cluster, but it will be replicated tooAzure using Site Recovery replication.</span></span>


![Cluster standard](./media/site-recovery-sql/standalone-cluster-local.png)

### <a name="failback-considerations"></a><span data-ttu-id="3ef5b-283">Considérations en matière de restauration automatique</span><span class="sxs-lookup"><span data-stu-id="3ef5b-283">Failback considerations</span></span>

<span data-ttu-id="3ef5b-284">Pour les clusters SQL Server Standard, la restauration automatique après un basculement non planifié nécessite une sauvegarde de SQL server et de restauration, de hello miroir instance toohello cluster d’origine, avec le rétablissement de la mise en miroir hello.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-284">For SQL Server Standard clusters, failback after an unplanned failover requires a SQL server backup and restore, from hello mirror instance toohello original cluster, with reestablishment of hello mirror.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3ef5b-285">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3ef5b-285">Next steps</span></span>
<span data-ttu-id="3ef5b-286">[En savoir plus](site-recovery-components.md) sur l’architecture de Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3ef5b-286">[Learn more](site-recovery-components.md) about Site Recovery architecture.</span></span>
