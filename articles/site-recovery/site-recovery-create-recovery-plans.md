---
title: "Création de plans de récupération pour le basculement et la récupération dans Azure Site Recovery | Microsoft Docs"
description: "Décrit comment créer et personnaliser des plans de récupération dans Azure Site Recovery en vue de basculer et récupérer des machines virtuelles et des serveurs physiques"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 72408c62-fcb6-4ee2-8ff5-cab1218773f2
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 1b0d64cd592c4738311797b826e490639340f92a
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/18/2017
---
# <a name="create-recovery-plans"></a><span data-ttu-id="3555c-103">Créer des plans de récupération</span><span class="sxs-lookup"><span data-stu-id="3555c-103">Create recovery plans</span></span>


<span data-ttu-id="3555c-104">Cet article fournit des informations sur la création et la personnalisation des plans de récupération dans [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3555c-104">This article provides information about creating and customizing recovery plans in [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="3555c-105">Publiez des commentaires ou des questions au bas de cet article, ou sur le [Forum Azure Recovery Services](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="3555c-105">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

 <span data-ttu-id="3555c-106">Créez des plans de récupération. Ceux-ci effectuent les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="3555c-106">Create recovery plans to do the following:</span></span>

* <span data-ttu-id="3555c-107">Ils définissent les groupes de machines qui basculent ensemble, puis démarrent ensemble.</span><span class="sxs-lookup"><span data-stu-id="3555c-107">Define groups of machines that fail over together, and then start up together.</span></span>
* <span data-ttu-id="3555c-108">Ils modélisent les dépendances entre les machines, en les rassemblant au sein d’un groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-108">Model dependencies between machines, by grouping them together into a recovery plan group.</span></span> <span data-ttu-id="3555c-109">Par exemple, pour basculer et afficher une application spécifique, vous devez regrouper toutes les machines virtuelles pour cette application dans un même groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-109">For example, to fail over and bring up a specific application, you group all of the VMs for that application into the same recovery plan group.</span></span>
* <span data-ttu-id="3555c-110">Exécuter un basculement.</span><span class="sxs-lookup"><span data-stu-id="3555c-110">Run a failover.</span></span> <span data-ttu-id="3555c-111">Vous pouvez exécuter un basculement test, planifié ou non planifié sur un plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-111">You can run a test, planned, or unplanned failover on a recovery plan.</span></span>


## <a name="create-a-recovery-plan"></a><span data-ttu-id="3555c-112">Créer un plan de récupération</span><span class="sxs-lookup"><span data-stu-id="3555c-112">Create a recovery plan</span></span>

1. <span data-ttu-id="3555c-113">Cliquez sur l’onglet **Plans de récupération** > **Créer un plan de récupération**.</span><span class="sxs-lookup"><span data-stu-id="3555c-113">Click **Recovery Plans** > **Create Recovery Plan**.</span></span>
   <span data-ttu-id="3555c-114">Spécifiez un nom pour le plan de récupération, puis définissez une source et une cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-114">Specify a name for the recovery plan, and a source and target.</span></span> <span data-ttu-id="3555c-115">Le basculement et la récupération doivent être activés sur les machines virtuelles de l’emplacement source.</span><span class="sxs-lookup"><span data-stu-id="3555c-115">The source location must have virtual machines that are enabled for failover and recovery.</span></span>

    - <span data-ttu-id="3555c-116">Pour la réplication de VMM vers VMM, sélectionnez **Type de source** > **VMM**, puis les serveurs VMM source et cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-116">For VMM to VMM replication, select **Source Type** > **VMM**, and the source and target VMM servers.</span></span> <span data-ttu-id="3555c-117">Cliquez sur **Hyper-V** pour afficher les clouds protégés.</span><span class="sxs-lookup"><span data-stu-id="3555c-117">Click **Hyper-V** to see clouds that are protected.</span></span>
    - <span data-ttu-id="3555c-118">Pour une réplication de VMM vers Azure, sélectionnez **Type de source** > **VMM**.</span><span class="sxs-lookup"><span data-stu-id="3555c-118">For VMM to Azure, select **Source Type** > **VMM**.</span></span>  <span data-ttu-id="3555c-119">Sélectionnez le serveur VMM source et **Azure** en tant que cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-119">Select the source VMM server, and **Azure** as the target.</span></span>
    - <span data-ttu-id="3555c-120">Pour la réplication d’Hyper-V vers Azure (sans VMM), sélectionnez **Type de source** > **Site Hyper-V**.</span><span class="sxs-lookup"><span data-stu-id="3555c-120">For Hyper-V replication to Azure (without VMM), select **Source Type** > **Hyper-V site**.</span></span> <span data-ttu-id="3555c-121">Sélectionnez le site en tant que source et **Azure** en tant que cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-121">Select the site as the source, and **Azure** as the target.</span></span>
    - <span data-ttu-id="3555c-122">Pour une réplication de machine virtuelle VMware ou de serveur physique local vers Microsoft Azure, sélectionnez un serveur de configuration en tant que source et **Azure** en tant que cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-122">For a VMware VM or a physical on-premises server to Azure, select a configuration server as the source, and **Azure** as the target.</span></span>
    - <span data-ttu-id="3555c-123">Pour un plan de récupération Azure vers Azure, sélectionnez une région Azure comme source et une région Azure secondaire comme cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-123">For a Azure to Azure recovery plan, select a Azure region as the source, and a secondary Azure region as the target.</span></span> <span data-ttu-id="3555c-124">Les régions Azure secondaires sont uniquement celles dans lesquelles les machines virtuelles sont protégées.</span><span class="sxs-lookup"><span data-stu-id="3555c-124">The secondary Azure regions are only those to which virtual machines are protected.</span></span>
2. <span data-ttu-id="3555c-125">Dans **Sélectionner les machines virtuelles**, sélectionnez les machines virtuelles (ou le groupe de réplication) que vous voulez ajouter au groupe par défaut (Groupe 1) dans le plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-125">In **Select virtual machines**, select the virtual machines (or replication group) that you want to add to the default group (Group 1) in the recovery plan.</span></span>

## <a name="customize-and-extend-recovery-plans"></a><span data-ttu-id="3555c-126">Personnaliser et étendre les plans de récupération</span><span class="sxs-lookup"><span data-stu-id="3555c-126">Customize and extend recovery plans</span></span>

<span data-ttu-id="3555c-127">Vous pouvez personnaliser et étendre les plans de récupération :</span><span class="sxs-lookup"><span data-stu-id="3555c-127">You can customize and extend recovery plans:</span></span>

- <span data-ttu-id="3555c-128">**Ajouter de nouveaux groupes** : ajouter des groupes de plan de récupération supplémentaires (jusqu’à sept) au groupe par défaut, puis ajouter des ordinateurs ou groupes de réplication supplémentaires à ces groupes de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-128">**Add new groups**—Add additional recovery plan groups (up to seven) to the default group, and then add more machines or replication groups to those recovery plan groups.</span></span> <span data-ttu-id="3555c-129">Les groupes sont numérotés dans l’ordre dans lequel vous les ajoutez.</span><span class="sxs-lookup"><span data-stu-id="3555c-129">Groups are numbered in the order in which you add them.</span></span> <span data-ttu-id="3555c-130">Vous ne pouvez inclure une machine virtuelle ou un groupe de réplication qu’au sein d’un seul plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-130">A virtual machine, or replication group, can only be included in one recovery plan group.</span></span>
- <span data-ttu-id="3555c-131">**Ajouter une action manuelle**: il est possible d’ajouter des actions manuelles qui s’exécutent avant ou après un groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-131">**Add a manual action**—You can add manual actions that run before or after a recovery plan group.</span></span> <span data-ttu-id="3555c-132">Lorsque le plan de récupération s’exécute, il s’arrête au point où vous avez inséré l’action manuelle.</span><span class="sxs-lookup"><span data-stu-id="3555c-132">When the recovery plan runs, it stops at the point at which you inserted the manual action.</span></span> <span data-ttu-id="3555c-133">Une boîte de dialogue vous invite à spécifier que l’action manuelle est terminée.</span><span class="sxs-lookup"><span data-stu-id="3555c-133">A dialog box prompts you to specify that the manual action was completed.</span></span>
- <span data-ttu-id="3555c-134">**Ajouter un script** : vous pouvez ajouter des scripts qui s’exécutent avant ou après un groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-134">**Add a script**—You can add scripts that run before or after a recovery plan group.</span></span> <span data-ttu-id="3555c-135">Lorsque vous ajoutez un script, vous ajoutez un nouvel ensemble d’actions au groupe.</span><span class="sxs-lookup"><span data-stu-id="3555c-135">When you add a script, it adds a new set of actions for the group.</span></span> <span data-ttu-id="3555c-136">Par exemple, un ensemble d’étapes préliminaires au sein du Groupe 1 est créé avec le nom : Groupe 1 : Étapes préliminaires.</span><span class="sxs-lookup"><span data-stu-id="3555c-136">For example, a set of pre-steps for Group 1 will be created with the name: Group 1: pre-steps.</span></span> <span data-ttu-id="3555c-137">L’ensemble des étapes préliminaires seront répertoriées dans cet ensemble.</span><span class="sxs-lookup"><span data-stu-id="3555c-137">All pre-steps will be listed inside this set.</span></span> <span data-ttu-id="3555c-138">Pour ajouter un script sur le site principal, vous devez disposer d’un serveur VMM déployé.</span><span class="sxs-lookup"><span data-stu-id="3555c-138">You can only add a script on the primary site if you have a VMM server deployed.</span></span>
- <span data-ttu-id="3555c-139">**Ajouter des runbooks Azure** : vous pouvez étendre des plans de récupération avec des runbooks Azure.</span><span class="sxs-lookup"><span data-stu-id="3555c-139">**Add Azure runbooks**—You can extend recovery plans with Azure runbooks.</span></span> <span data-ttu-id="3555c-140">Par exemple, pour automatiser des tâches ou pour créer une récupération en une seule étape.</span><span class="sxs-lookup"><span data-stu-id="3555c-140">For example, to automate tasks, or to create single-step recovery.</span></span> <span data-ttu-id="3555c-141">[Plus d’informations](site-recovery-runbook-automation.md)</span><span class="sxs-lookup"><span data-stu-id="3555c-141">[Learn more](site-recovery-runbook-automation.md).</span></span>

## <a name="add-scripts"></a><span data-ttu-id="3555c-142">Ajouter des scripts</span><span class="sxs-lookup"><span data-stu-id="3555c-142">Add scripts</span></span>

<span data-ttu-id="3555c-143">Vous pouvez utiliser des scripts PowerShell dans vos plans de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-143">You can use PowerShell scripts in your recovery plans.</span></span>

 - <span data-ttu-id="3555c-144">Veillez à utiliser des blocs try-catch dans vos scripts, ceci pour garantir le traitement approprié des exceptions.</span><span class="sxs-lookup"><span data-stu-id="3555c-144">Ensure that scripts use try-catch blocks so that the exceptions are handled gracefully.</span></span>
    - <span data-ttu-id="3555c-145">Si le script comporte une exception, son exécution s’interrompt et la tâche est mise en échec.</span><span class="sxs-lookup"><span data-stu-id="3555c-145">If there is an exception in the script, it stops running and the task shows as failed.</span></span>
    - <span data-ttu-id="3555c-146">Si une erreur se produit, aucune des portions restantes du script ne s’exécute.</span><span class="sxs-lookup"><span data-stu-id="3555c-146">If an error occurs, any remaining part of the script doesn't run.</span></span>
    - <span data-ttu-id="3555c-147">Si une erreur se produit lorsque vous exécutez un basculement non planifié, le plan de récupération se poursuit.</span><span class="sxs-lookup"><span data-stu-id="3555c-147">If an error occurs when you run an unplanned failover, the recovery plan continues.</span></span>
    - <span data-ttu-id="3555c-148">Si une erreur se produit lorsque vous exécutez un basculement planifié, le plan de récupération s’arrête.</span><span class="sxs-lookup"><span data-stu-id="3555c-148">If an error occurs when you run a planned failover, the recovery plan stops.</span></span> <span data-ttu-id="3555c-149">Vous devez corriger le script, vérifier sa bonne exécution, puis exécuter de nouveau le plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-149">You need to fix the script, check that it runs as expected, and then run the recovery plan again.</span></span>
- <span data-ttu-id="3555c-150">La commande Write-Host, qui ne fonctionne pas dans un script de plan de récupération, entraîne la mise en échec du script.</span><span class="sxs-lookup"><span data-stu-id="3555c-150">The Write-Host command doesn’t work in a recovery plan script, and the script will fail.</span></span> <span data-ttu-id="3555c-151">Pour créer une sortie, générez un script de proxy exécutant votre script principal.</span><span class="sxs-lookup"><span data-stu-id="3555c-151">To create output, create a proxy script that in turn runs your main script.</span></span> <span data-ttu-id="3555c-152">Assurez-vous que l’ensemble des sorties sont extraites à l’aide de la commande >>.</span><span class="sxs-lookup"><span data-stu-id="3555c-152">Make sure that all output is piped out using the >> command.</span></span>
  * <span data-ttu-id="3555c-153">Le script expire si aucune sortie n’est produite dans les 600 secondes.</span><span class="sxs-lookup"><span data-stu-id="3555c-153">The script times out if it doesn't return within 600 seconds.</span></span>
  * <span data-ttu-id="3555c-154">Si des éléments sont écrits sur STDERR, le script est classé comme mis en échec.</span><span class="sxs-lookup"><span data-stu-id="3555c-154">If anything is written out to STDERR, the script is classified as failed.</span></span> <span data-ttu-id="3555c-155">Ces informations s’affichent dans les détails d’exécution du script.</span><span class="sxs-lookup"><span data-stu-id="3555c-155">This information is displayed in the script execution details.</span></span>

<span data-ttu-id="3555c-156">Si vous utilisez VMM dans votre déploiement :</span><span class="sxs-lookup"><span data-stu-id="3555c-156">If you're using VMM in your deployment:</span></span>

* <span data-ttu-id="3555c-157">Les scripts d’un plan de récupération s’exécutent dans le contexte d’un compte de service VMM.</span><span class="sxs-lookup"><span data-stu-id="3555c-157">Scripts in a recovery plan run in the context of the VMM Service account.</span></span> <span data-ttu-id="3555c-158">Assurez-vous que ce compte dispose des autorisations en lecture pour le partage distant sur lequel se trouve le script.</span><span class="sxs-lookup"><span data-stu-id="3555c-158">Make sure this account has Read permissions for the remote share on which the script is located.</span></span> <span data-ttu-id="3555c-159">Testez l’exécution du script au niveau de privilège du compte de service VMM.</span><span class="sxs-lookup"><span data-stu-id="3555c-159">Test the script to run at the VMM service account privilege level.</span></span>
* <span data-ttu-id="3555c-160">Les applets de commande VMM sont fournies dans un module Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3555c-160">VMM cmdlets are delivered in a Windows PowerShell module.</span></span> <span data-ttu-id="3555c-161">Le module est installé lors du montage de la console VMM.</span><span class="sxs-lookup"><span data-stu-id="3555c-161">The module is installed when you install the VMM console.</span></span> <span data-ttu-id="3555c-162">Il peut être chargé dans votre script à l’aide de la commande de script suivante :</span><span class="sxs-lookup"><span data-stu-id="3555c-162">It can be loaded into your script, using the following command in the script:</span></span>
   - <span data-ttu-id="3555c-163">Import-Module -Name virtualmachinemanager.</span><span class="sxs-lookup"><span data-stu-id="3555c-163">Import-Module -Name virtualmachinemanager.</span></span> <span data-ttu-id="3555c-164">[Plus d’informations](https://technet.microsoft.com/library/hh875013.aspx)</span><span class="sxs-lookup"><span data-stu-id="3555c-164">[Learn more](https://technet.microsoft.com/library/hh875013.aspx).</span></span>
* <span data-ttu-id="3555c-165">Vérifiez que vous disposez d’au moins un serveur de bibliothèque au sein de votre déploiement VMM.</span><span class="sxs-lookup"><span data-stu-id="3555c-165">Ensure you have at least one library server in your VMM deployment.</span></span> <span data-ttu-id="3555c-166">Par défaut, le chemin d’accès de partage de bibliothèque d’un serveur VMM est disponible localement sur le serveur VMM, sous le nom de dossier MSCVMMLibrary.</span><span class="sxs-lookup"><span data-stu-id="3555c-166">By default, the library share path for a VMM server is located locally on the VMM server, with the folder name MSCVMMLibrary.</span></span>
    * <span data-ttu-id="3555c-167">Si votre chemin d’accès de partage de bibliothèque est distant (ou local mais non partagé avec MSCVMMLibrary), configurez le partage comme suit (en utilisant \\libserver2.contoso.com\share\ comme exemple) :</span><span class="sxs-lookup"><span data-stu-id="3555c-167">If your library share path is remote (or local but not shared with MSCVMMLibrary), configure the share as follows (using \\libserver2.contoso.com\share\ as an example):</span></span>
      * <span data-ttu-id="3555c-168">Ouvrez l’Éditeur du Registre, puis accédez à **HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span><span class="sxs-lookup"><span data-stu-id="3555c-168">Open the Registry Editor and navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span></span>
      * <span data-ttu-id="3555c-169">Modifiez la valeur de **ScriptLibraryPath** et placez-la comme \\libserver2.contoso.com\share\.</span><span class="sxs-lookup"><span data-stu-id="3555c-169">Edit the value **ScriptLibraryPath** and place it as \\libserver2.contoso.com\share\.</span></span> <span data-ttu-id="3555c-170">Spécifiez le nom de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="3555c-170">Specify the full FQDN.</span></span> <span data-ttu-id="3555c-171">Fournissez des autorisations d’accès à l’emplacement de partage.</span><span class="sxs-lookup"><span data-stu-id="3555c-171">Provide permissions to the share location.</span></span>
      * <span data-ttu-id="3555c-172">Veillez à tester le script avec un compte d’utilisateur qui dispose des mêmes autorisations que le compte de service VMM.</span><span class="sxs-lookup"><span data-stu-id="3555c-172">Ensure that you test the script with a user account that has the same permissions as the VMM service account.</span></span> <span data-ttu-id="3555c-173">Cela permet de vérifier que les scripts testés autonomes s’exécuteront de la même manière dans les plans de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-173">This checks that standalone tested scripts run in the same way as they will in recovery plans.</span></span> <span data-ttu-id="3555c-174">Sur le serveur VMM, définissez le mode de contournement suivant de la stratégie d’exécution :</span><span class="sxs-lookup"><span data-stu-id="3555c-174">On the VMM server, set the execution policy to bypass as follows:</span></span>
        * <span data-ttu-id="3555c-175">Ouvrez la console Windows PowerShell 64 bits à l’aide des privilèges élevés.</span><span class="sxs-lookup"><span data-stu-id="3555c-175">Open the 64-bit Windows PowerShell console using elevated privileges.</span></span>
        * <span data-ttu-id="3555c-176">Entrez : **Set-executionpolicy bypass**.</span><span class="sxs-lookup"><span data-stu-id="3555c-176">Type: **Set-executionpolicy bypass**.</span></span> <span data-ttu-id="3555c-177">[Plus d’informations](https://technet.microsoft.com/library/ee176961.aspx)</span><span class="sxs-lookup"><span data-stu-id="3555c-177">[Learn more](https://technet.microsoft.com/library/ee176961.aspx).</span></span>

## <a name="add-a-script-or-manual-action-to-a-plan"></a><span data-ttu-id="3555c-178">Ajouter un script ou une action manuelle à un plan</span><span class="sxs-lookup"><span data-stu-id="3555c-178">Add a script or manual action to a plan</span></span>

<span data-ttu-id="3555c-179">Vous pouvez ajouter un script au groupe de plan de récupération par défaut après y avoir ajouté des machines virtuelles ou des groupes de réplication et après avoir créé le plan.</span><span class="sxs-lookup"><span data-stu-id="3555c-179">You can add a script to the default recovery plan group after you've added VMs or replication groups to it, and created the plan.</span></span>

1. <span data-ttu-id="3555c-180">Ouvrez le plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-180">Open the recovery plan.</span></span>
2. <span data-ttu-id="3555c-181">Cliquez sur un élément de la liste **Étape,** puis cliquez sur **Script** ou sur **Action manuelle**.</span><span class="sxs-lookup"><span data-stu-id="3555c-181">Click an item in the **Step** list, and then click **Script** or **Manual Action**.</span></span>
3. <span data-ttu-id="3555c-182">Indiquez si vous souhaitez ajouter le script ou l’action avant ou après l’élément sélectionné.</span><span class="sxs-lookup"><span data-stu-id="3555c-182">Specify whether to want to add the script or action before or after the selected item.</span></span> <span data-ttu-id="3555c-183">Utilisez les boutons de **Déplacement vers le haut** et de **Déplacement vers le bas** pour faire monter ou descendre le script.</span><span class="sxs-lookup"><span data-stu-id="3555c-183">Use the **Move Up** and **Move Down**  buttons, to move the position of the script up or down.</span></span>
4. <span data-ttu-id="3555c-184">Si vous ajoutez un script VMM, sélectionnez **Basculement vers script VMM**.</span><span class="sxs-lookup"><span data-stu-id="3555c-184">If you add a VMM script, select **Failover to VMM script**.</span></span> <span data-ttu-id="3555c-185">Dans **Chemin d’accès du script**, tapez le chemin d’accès relatif au partage.</span><span class="sxs-lookup"><span data-stu-id="3555c-185">In **Script Path**, type the relative path to the share.</span></span> <span data-ttu-id="3555c-186">Dans l’exemple VMM ci-dessous, spécifiez le chemin d’accès : **\RPScripts\RPScript.PS1**.</span><span class="sxs-lookup"><span data-stu-id="3555c-186">In the VMM example below, you specify the path: **\RPScripts\RPScript.PS1**.</span></span>
5. <span data-ttu-id="3555c-187">Si vous ajoutez un Runbook Azure Automation, spécifiez le compte Azure Automation dans lequel se trouve le runbook, puis sélectionnez le script runbook Azure approprié.</span><span class="sxs-lookup"><span data-stu-id="3555c-187">If you add an Azure automation run book, specify the Azure Automation account in which the runbook is located, and select the appropriate Azure runbook script.</span></span>
6. <span data-ttu-id="3555c-188">Exécutez un basculement du plan de récupération, afin de vous assurer du bon fonctionnement du script.</span><span class="sxs-lookup"><span data-stu-id="3555c-188">Do a failover of the recovery plan, to make sure the script works as expected.</span></span>


### <a name="add-a-vmm-script"></a><span data-ttu-id="3555c-189">Ajouter un script VMM</span><span class="sxs-lookup"><span data-stu-id="3555c-189">Add a VMM script</span></span>

<span data-ttu-id="3555c-190">Si vous possédez un site source VMM, libre à vous de créer un script sur le serveur VMM, et de l’inclure dans votre plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="3555c-190">If you have a VMM source site, you can create a script on the VMM server, and include it in your recovery plan.</span></span>

1. <span data-ttu-id="3555c-191">Créez un dossier dans le partage de bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="3555c-191">Create a new folder in the library share.</span></span> <span data-ttu-id="3555c-192">Par exemple, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span><span class="sxs-lookup"><span data-stu-id="3555c-192">For example, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span></span> <span data-ttu-id="3555c-193">Placez-le dans les serveurs VMM source et cibles.</span><span class="sxs-lookup"><span data-stu-id="3555c-193">Place it on the source and target VMM servers.</span></span>
2. <span data-ttu-id="3555c-194">Créez le script (par exemple RPScript), et vérifiez son bon fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="3555c-194">Create the script (for example RPScript), and check it works as expected.</span></span>
3. <span data-ttu-id="3555c-195">Placez le script à l’emplacement \<VMMServerName>\MSSCVMMLibrary sur les serveurs VMM source et cible.</span><span class="sxs-lookup"><span data-stu-id="3555c-195">Place the script in the location \<VMMServerName>\MSSCVMMLibrary, on the source and target VMM servers.</span></span>


## <a name="next-steps"></a><span data-ttu-id="3555c-196">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="3555c-196">Next steps</span></span>

<span data-ttu-id="3555c-197">[En savoir plus](site-recovery-failover.md) sur l’exécution des basculements.</span><span class="sxs-lookup"><span data-stu-id="3555c-197">[Learn more](site-recovery-failover.md) about running failovers.</span></span>
