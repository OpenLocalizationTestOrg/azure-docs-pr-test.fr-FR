---
title: "les plans de récupération aaaCreate pour le basculement et récupération dans Azure Site Recovery | Documents Microsoft"
description: "Décrit comment toocreate et personnaliser des plans de récupération d’Azure Site Recovery, toofail sur et récupérer des machines virtuelles et des serveurs physiques"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 72408c62-fcb6-4ee2-8ff5-cab1218773f2
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/23/2017
ms.author: raynew
ms.openlocfilehash: 09ca7719e92460b283947fdbe752e8654e5b9cab
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/06/2017
---
# <a name="create-recovery-plans"></a><span data-ttu-id="b708b-103">Créer des plans de récupération</span><span class="sxs-lookup"><span data-stu-id="b708b-103">Create recovery plans</span></span>


<span data-ttu-id="b708b-104">Cet article fournit des informations sur la création et la personnalisation des plans de récupération dans [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b708b-104">This article provides information about creating and customizing recovery plans in [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="b708b-105">Valider des commentaires ou des questions au bas de hello de cet article, ou sur hello [Forum sur Azure Recovery Services](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="b708b-105">Post any comments or questions at hello bottom of this article, or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

 <span data-ttu-id="b708b-106">Créez hello de toodo de plans de récupération suivant :</span><span class="sxs-lookup"><span data-stu-id="b708b-106">Create recovery plans toodo hello following:</span></span>

* <span data-ttu-id="b708b-107">Ils définissent les groupes de machines qui basculent ensemble, puis démarrent ensemble.</span><span class="sxs-lookup"><span data-stu-id="b708b-107">Define groups of machines that fail over together, and then start up together.</span></span>
* <span data-ttu-id="b708b-108">Ils modélisent les dépendances entre les machines, en les rassemblant au sein d’un groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-108">Model dependencies between machines, by grouping them together into a recovery plan group.</span></span> <span data-ttu-id="b708b-109">Par exemple, toofail sur et porter une application spécifique, vous regroupez tous les ordinateurs virtuels de hello pour cette application dans hello même groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-109">For example, toofail over and bring up a specific application, you group all of hello VMs for that application into hello same recovery plan group.</span></span>
* <span data-ttu-id="b708b-110">Exécuter un basculement.</span><span class="sxs-lookup"><span data-stu-id="b708b-110">Run a failover.</span></span> <span data-ttu-id="b708b-111">Vous pouvez exécuter un basculement test, planifié ou non planifié sur un plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-111">You can run a test, planned, or unplanned failover on a recovery plan.</span></span>


## <a name="create-a-recovery-plan"></a><span data-ttu-id="b708b-112">Créer un plan de récupération</span><span class="sxs-lookup"><span data-stu-id="b708b-112">Create a recovery plan</span></span>

1. <span data-ttu-id="b708b-113">Cliquez sur l’onglet **Plans de récupération** > **Créer un plan de récupération**.</span><span class="sxs-lookup"><span data-stu-id="b708b-113">Click **Recovery Plans** > **Create Recovery Plan**.</span></span>
   <span data-ttu-id="b708b-114">Spécifiez un nom pour le plan de récupération hello et d’une source et cible.</span><span class="sxs-lookup"><span data-stu-id="b708b-114">Specify a name for hello recovery plan, and a source and target.</span></span> <span data-ttu-id="b708b-115">emplacement de source de Hello doit avoir des machines virtuelles qui sont activés pour le basculement et la récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-115">hello source location must have virtual machines that are enabled for failover and recovery.</span></span>

    - <span data-ttu-id="b708b-116">Pour la réplication tooVMM VMM, sélectionnez **Type de Source de** > **VMM**et hello serveurs VMM cible et source.</span><span class="sxs-lookup"><span data-stu-id="b708b-116">For VMM tooVMM replication, select **Source Type** > **VMM**, and hello source and target VMM servers.</span></span> <span data-ttu-id="b708b-117">Cliquez sur **Hyper-V** toosee clouds protégés.</span><span class="sxs-lookup"><span data-stu-id="b708b-117">Click **Hyper-V** toosee clouds that are protected.</span></span>
    - <span data-ttu-id="b708b-118">Pour VMM tooAzure, sélectionnez **Type de Source de** > **VMM**.</span><span class="sxs-lookup"><span data-stu-id="b708b-118">For VMM tooAzure, select **Source Type** > **VMM**.</span></span>  <span data-ttu-id="b708b-119">Serveur VMM source à hello SELECT, et **Azure** comme cible de hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-119">Select hello source VMM server, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="b708b-120">Pour tooAzure de réplication Hyper-V (sans VMM), sélectionnez **Type de Source de** > **site Hyper-V**.</span><span class="sxs-lookup"><span data-stu-id="b708b-120">For Hyper-V replication tooAzure (without VMM), select **Source Type** > **Hyper-V site**.</span></span> <span data-ttu-id="b708b-121">Site hello sélectionnez en tant que source de hello, et **Azure** comme cible de hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-121">Select hello site as hello source, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="b708b-122">Pour un VM VMware ou physique locale tooAzure de serveur, sélectionnez un serveur de configuration en tant que source de hello, et **Azure** comme cible de hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-122">For a VMware VM or a physical on-premises server tooAzure, select a configuration server as hello source, and **Azure** as hello target.</span></span>
    - <span data-ttu-id="b708b-123">Pour un plan de récupération Azure tooAzure, sélectionnez une région Azure en tant que source de hello et une région Azure secondaire comme cible de hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-123">For a Azure tooAzure recovery plan, select a Azure region as hello source, and a secondary Azure region as hello target.</span></span> <span data-ttu-id="b708b-124">les régions Azure secondaire Hello sont qu'uniquement les machines virtuelles de toowhich sont protégés.</span><span class="sxs-lookup"><span data-stu-id="b708b-124">hello secondary Azure regions are only those toowhich virtual machines are protected.</span></span>
2. <span data-ttu-id="b708b-125">Dans **sélectionner des machines virtuelles**, sélectionnez les ordinateurs virtuels de hello (ou groupe de réplication) que vous souhaitez groupe par défaut de toohello tooadd (groupe 1) dans le plan de récupération hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-125">In **Select virtual machines**, select hello virtual machines (or replication group) that you want tooadd toohello default group (Group 1) in hello recovery plan.</span></span>

## <a name="customize-and-extend-recovery-plans"></a><span data-ttu-id="b708b-126">Personnaliser et étendre les plans de récupération</span><span class="sxs-lookup"><span data-stu-id="b708b-126">Customize and extend recovery plans</span></span>

<span data-ttu-id="b708b-127">Vous pouvez personnaliser et étendre les plans de récupération :</span><span class="sxs-lookup"><span data-stu-id="b708b-127">You can customize and extend recovery plans:</span></span>

- <span data-ttu-id="b708b-128">**Ajouter de nouveaux groupes**, ajoutez le groupe par défaut toohello récupération supplémentaires plan groupes (haut tooseven) et ajoutez plusieurs ordinateurs ou la réplication des groupes de toothose des groupes de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-128">**Add new groups**—Add additional recovery plan groups (up tooseven) toohello default group, and then add more machines or replication groups toothose recovery plan groups.</span></span> <span data-ttu-id="b708b-129">Les groupes sont numérotées dans l’ordre de hello dans lequel vous les ajoutez.</span><span class="sxs-lookup"><span data-stu-id="b708b-129">Groups are numbered in hello order in which you add them.</span></span> <span data-ttu-id="b708b-130">Vous ne pouvez inclure une machine virtuelle ou un groupe de réplication qu’au sein d’un seul plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-130">A virtual machine, or replication group, can only be included in one recovery plan group.</span></span>
- <span data-ttu-id="b708b-131">**Ajouter une action manuelle**: il est possible d’ajouter des actions manuelles qui s’exécutent avant ou après un groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-131">**Add a manual action**—You can add manual actions that run before or after a recovery plan group.</span></span> <span data-ttu-id="b708b-132">Lorsque le plan de récupération hello s’exécute, il s’arrête au point hello à laquelle vous avez inséré une action manuelle hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-132">When hello recovery plan runs, it stops at hello point at which you inserted hello manual action.</span></span> <span data-ttu-id="b708b-133">Une boîte de dialogue vous invite toospecify qu’une action manuelle hello a été exécutée.</span><span class="sxs-lookup"><span data-stu-id="b708b-133">A dialog box prompts you toospecify that hello manual action was completed.</span></span>
- <span data-ttu-id="b708b-134">**Ajouter un script** : vous pouvez ajouter des scripts qui s’exécutent avant ou après un groupe de plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-134">**Add a script**—You can add scripts that run before or after a recovery plan group.</span></span> <span data-ttu-id="b708b-135">Lorsque vous ajoutez un script, il ajoute un nouvel ensemble d’actions pour le groupe de hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-135">When you add a script, it adds a new set of actions for hello group.</span></span> <span data-ttu-id="b708b-136">Par exemple, un ensemble d’étapes préliminaires pour le groupe 1 sera être créé avec le nom de hello : groupe 1 : étapes préliminaires.</span><span class="sxs-lookup"><span data-stu-id="b708b-136">For example, a set of pre-steps for Group 1 will be created with hello name: Group 1: pre-steps.</span></span> <span data-ttu-id="b708b-137">L’ensemble des étapes préliminaires seront répertoriées dans cet ensemble.</span><span class="sxs-lookup"><span data-stu-id="b708b-137">All pre-steps will be listed inside this set.</span></span> <span data-ttu-id="b708b-138">Vous pouvez uniquement ajouter un script sur le site principal de hello si vous avez un serveur VMM déployé.</span><span class="sxs-lookup"><span data-stu-id="b708b-138">You can only add a script on hello primary site if you have a VMM server deployed.</span></span>
- <span data-ttu-id="b708b-139">**Ajouter des runbooks Azure** : vous pouvez étendre des plans de récupération avec des runbooks Azure.</span><span class="sxs-lookup"><span data-stu-id="b708b-139">**Add Azure runbooks**—You can extend recovery plans with Azure runbooks.</span></span> <span data-ttu-id="b708b-140">Par exemple, les tâches de tooautomate ou de toocreate seule étape récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-140">For example, tooautomate tasks, or toocreate single-step recovery.</span></span> <span data-ttu-id="b708b-141">[En savoir plus](site-recovery-runbook-automation.md).</span><span class="sxs-lookup"><span data-stu-id="b708b-141">[Learn more](site-recovery-runbook-automation.md).</span></span>

## <a name="add-scripts"></a><span data-ttu-id="b708b-142">Ajouter des scripts</span><span class="sxs-lookup"><span data-stu-id="b708b-142">Add scripts</span></span>

<span data-ttu-id="b708b-143">Vous pouvez utiliser des scripts PowerShell dans vos plans de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-143">You can use PowerShell scripts in your recovery plans.</span></span>

 - <span data-ttu-id="b708b-144">Assurez-vous que les scripts utilisent des blocs try-catch afin que les exceptions hello soient gérées normalement.</span><span class="sxs-lookup"><span data-stu-id="b708b-144">Ensure that scripts use try-catch blocks so that hello exceptions are handled gracefully.</span></span>
    - <span data-ttu-id="b708b-145">S’il existe une exception dans le script de hello, il arrête l’exécution et tâche hello affiche comme ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="b708b-145">If there is an exception in hello script, it stops running and hello task shows as failed.</span></span>
    - <span data-ttu-id="b708b-146">Si une erreur se produit, toute partie restante du script de hello ne s’exécute pas.</span><span class="sxs-lookup"><span data-stu-id="b708b-146">If an error occurs, any remaining part of hello script doesn't run.</span></span>
    - <span data-ttu-id="b708b-147">Si une erreur se produit lorsque vous exécutez un basculement non planifié, plan de récupération hello continue.</span><span class="sxs-lookup"><span data-stu-id="b708b-147">If an error occurs when you run an unplanned failover, hello recovery plan continues.</span></span>
    - <span data-ttu-id="b708b-148">Si une erreur se produit lorsque vous exécutez un basculement planifié, le plan de récupération hello s’arrête.</span><span class="sxs-lookup"><span data-stu-id="b708b-148">If an error occurs when you run a planned failover, hello recovery plan stops.</span></span> <span data-ttu-id="b708b-149">Vous devez toofix hello script, vérifiez qu’il s’exécute comme prévu et puis exécutez à nouveau plan de récupération d’hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-149">You need toofix hello script, check that it runs as expected, and then run hello recovery plan again.</span></span>
- <span data-ttu-id="b708b-150">Hello les commande Write-Host ne fonctionne pas dans un script de plan de récupération et hello script échoue.</span><span class="sxs-lookup"><span data-stu-id="b708b-150">hello Write-Host command doesn’t work in a recovery plan script, and hello script will fail.</span></span> <span data-ttu-id="b708b-151">toocreate de sortie, créez un script de proxy qui exécute ensuite votre script principal.</span><span class="sxs-lookup"><span data-stu-id="b708b-151">toocreate output, create a proxy script that in turn runs your main script.</span></span> <span data-ttu-id="b708b-152">Assurez-vous que toutes les sorties sont obtenues à l’aide de hello >> commande.</span><span class="sxs-lookup"><span data-stu-id="b708b-152">Make sure that all output is piped out using hello >> command.</span></span>
  * <span data-ttu-id="b708b-153">script de Hello expire si elle ne renvoie pas dans les 600 secondes.</span><span class="sxs-lookup"><span data-stu-id="b708b-153">hello script times out if it doesn't return within 600 seconds.</span></span>
  * <span data-ttu-id="b708b-154">Si rien n’est écrit tooSTDERR, le script de hello est classé comme ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="b708b-154">If anything is written out tooSTDERR, hello script is classified as failed.</span></span> <span data-ttu-id="b708b-155">Ces informations s’affichent dans les détails de l’exécution du script hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-155">This information is displayed in hello script execution details.</span></span>

<span data-ttu-id="b708b-156">Si vous utilisez VMM dans votre déploiement :</span><span class="sxs-lookup"><span data-stu-id="b708b-156">If you're using VMM in your deployment:</span></span>

* <span data-ttu-id="b708b-157">Dans un plan de récupération, les scripts exécutés dans le contexte hello Hello compte de Service VMM.</span><span class="sxs-lookup"><span data-stu-id="b708b-157">Scripts in a recovery plan run in hello context of hello VMM Service account.</span></span> <span data-ttu-id="b708b-158">Assurez-vous que ce compte dispose des autorisations en lecture sur le partage distant de hello sur quel hello script se trouve.</span><span class="sxs-lookup"><span data-stu-id="b708b-158">Make sure this account has Read permissions for hello remote share on which hello script is located.</span></span> <span data-ttu-id="b708b-159">Test toorun de script hello en hello niveau de privilège de compte de service VMM.</span><span class="sxs-lookup"><span data-stu-id="b708b-159">Test hello script toorun at hello VMM service account privilege level.</span></span>
* <span data-ttu-id="b708b-160">Les applets de commande VMM sont fournies dans un module Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b708b-160">VMM cmdlets are delivered in a Windows PowerShell module.</span></span> <span data-ttu-id="b708b-161">module de Hello est installé lorsque vous installez la console VMM hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-161">hello module is installed when you install hello VMM console.</span></span> <span data-ttu-id="b708b-162">Il peut être chargé dans votre script, à l’aide de hello commande dans le script de hello suivante :</span><span class="sxs-lookup"><span data-stu-id="b708b-162">It can be loaded into your script, using hello following command in hello script:</span></span>
   - <span data-ttu-id="b708b-163">Import-Module -Name virtualmachinemanager.</span><span class="sxs-lookup"><span data-stu-id="b708b-163">Import-Module -Name virtualmachinemanager.</span></span> <span data-ttu-id="b708b-164">[Plus d’informations](https://technet.microsoft.com/library/hh875013.aspx)</span><span class="sxs-lookup"><span data-stu-id="b708b-164">[Learn more](https://technet.microsoft.com/library/hh875013.aspx).</span></span>
* <span data-ttu-id="b708b-165">Vérifiez que vous disposez d’au moins un serveur de bibliothèque au sein de votre déploiement VMM.</span><span class="sxs-lookup"><span data-stu-id="b708b-165">Ensure you have at least one library server in your VMM deployment.</span></span> <span data-ttu-id="b708b-166">Par défaut, chemin d’accès du partage de bibliothèque hello pour un serveur VMM se trouve localement sur le serveur VMM, avec le nom du dossier hello MSCVMMLibrary de hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-166">By default, hello library share path for a VMM server is located locally on hello VMM server, with hello folder name MSCVMMLibrary.</span></span>
    * <span data-ttu-id="b708b-167">Si votre chemin d’accès du partage de bibliothèque est distant (ou local, mais pas partagé avec MSCVMMLibrary), configurez le partage de hello comme suit (à l’aide de \\libserver2.contoso.com\share\ par exemple) :</span><span class="sxs-lookup"><span data-stu-id="b708b-167">If your library share path is remote (or local but not shared with MSCVMMLibrary), configure hello share as follows (using \\libserver2.contoso.com\share\ as an example):</span></span>
      * <span data-ttu-id="b708b-168">Ouvrez hello Éditeur du Registre et accédez trop**HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span><span class="sxs-lookup"><span data-stu-id="b708b-168">Open hello Registry Editor and navigate too**HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\Azure Site Recovery\Registration**.</span></span>
      * <span data-ttu-id="b708b-169">Modifier la valeur de hello **ScriptLibraryPath** et le placer en tant que \\libserver2.contoso.com\share\.</span><span class="sxs-lookup"><span data-stu-id="b708b-169">Edit hello value **ScriptLibraryPath** and place it as \\libserver2.contoso.com\share\.</span></span> <span data-ttu-id="b708b-170">Spécifiez hello de domaine complet.</span><span class="sxs-lookup"><span data-stu-id="b708b-170">Specify hello full FQDN.</span></span> <span data-ttu-id="b708b-171">Fournir des autorisations toohello l’emplacement du partage.</span><span class="sxs-lookup"><span data-stu-id="b708b-171">Provide permissions toohello share location.</span></span>
      * <span data-ttu-id="b708b-172">Veillez à tester le script hello avec un compte d’utilisateur qui a hello même compte de service les autorisations hello VMM.</span><span class="sxs-lookup"><span data-stu-id="b708b-172">Ensure that you test hello script with a user account that has hello same permissions as hello VMM service account.</span></span> <span data-ttu-id="b708b-173">Cette procédure vérifie qu’autonome s’exécutent dans les scripts testés hello même façon que qu’ils seront dans les plans de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-173">This checks that standalone tested scripts run in hello same way as they will in recovery plans.</span></span> <span data-ttu-id="b708b-174">Sur le serveur VMM de hello, définissez toobypass de stratégie d’exécution hello comme suit :</span><span class="sxs-lookup"><span data-stu-id="b708b-174">On hello VMM server, set hello execution policy toobypass as follows:</span></span>
        * <span data-ttu-id="b708b-175">Ouvrez la console Windows PowerShell de hello 64 bits avec des privilèges élevés.</span><span class="sxs-lookup"><span data-stu-id="b708b-175">Open hello 64-bit Windows PowerShell console using elevated privileges.</span></span>
        * <span data-ttu-id="b708b-176">Entrez : **Set-executionpolicy bypass**.</span><span class="sxs-lookup"><span data-stu-id="b708b-176">Type: **Set-executionpolicy bypass**.</span></span> <span data-ttu-id="b708b-177">[En savoir plus](https://technet.microsoft.com/library/ee176961.aspx).</span><span class="sxs-lookup"><span data-stu-id="b708b-177">[Learn more](https://technet.microsoft.com/library/ee176961.aspx).</span></span>

## <a name="add-a-script-or-manual-action-tooa-plan"></a><span data-ttu-id="b708b-178">Ajouter un script ou un plan d’action manuelle tooa</span><span class="sxs-lookup"><span data-stu-id="b708b-178">Add a script or manual action tooa plan</span></span>

<span data-ttu-id="b708b-179">Vous pouvez ajouter un groupe de plan de récupération script toohello par défaut une fois que vous avez ajouté des machines virtuelles ou tooit des groupes de réplication et le plan hello créé.</span><span class="sxs-lookup"><span data-stu-id="b708b-179">You can add a script toohello default recovery plan group after you've added VMs or replication groups tooit, and created hello plan.</span></span>

1. <span data-ttu-id="b708b-180">Plan de récupération hello ouvert.</span><span class="sxs-lookup"><span data-stu-id="b708b-180">Open hello recovery plan.</span></span>
2. <span data-ttu-id="b708b-181">Cliquez sur un élément Bonjour **étape** liste, puis cliquez sur **Script** ou **Action manuelle**.</span><span class="sxs-lookup"><span data-stu-id="b708b-181">Click an item in hello **Step** list, and then click **Script** or **Manual Action**.</span></span>
3. <span data-ttu-id="b708b-182">Spécifiez si le script de toowant tooadd hello ou action avant ou après hello sélectionné élément.</span><span class="sxs-lookup"><span data-stu-id="b708b-182">Specify whether toowant tooadd hello script or action before or after hello selected item.</span></span> <span data-ttu-id="b708b-183">Hello d’utilisation **monter** et **Descendre** des boutons, position de hello toomove du script de hello vers le haut ou vers le bas.</span><span class="sxs-lookup"><span data-stu-id="b708b-183">Use hello **Move Up** and **Move Down**  buttons, toomove hello position of hello script up or down.</span></span>
4. <span data-ttu-id="b708b-184">Si vous ajoutez un script VMM, sélectionnez **basculement tooVMM script**.</span><span class="sxs-lookup"><span data-stu-id="b708b-184">If you add a VMM script, select **Failover tooVMM script**.</span></span> <span data-ttu-id="b708b-185">Dans **chemin d’accès du Script**, partage toohello de type hello chemin d’accès relatif.</span><span class="sxs-lookup"><span data-stu-id="b708b-185">In **Script Path**, type hello relative path toohello share.</span></span> <span data-ttu-id="b708b-186">Dans l’exemple VMM hello ci-dessous, vous spécifiez le chemin d’accès hello : **\RPScripts\RPScript.PS1**.</span><span class="sxs-lookup"><span data-stu-id="b708b-186">In hello VMM example below, you specify hello path: **\RPScripts\RPScript.PS1**.</span></span>
5. <span data-ttu-id="b708b-187">Si vous ajoutez une automatisation Azure exécuter livre, spécifiez compte Azure Automation de hello dans le hello runbook est script de runbook Azure approprié hello trouve, puis sélectionnez.</span><span class="sxs-lookup"><span data-stu-id="b708b-187">If you add an Azure automation run book, specify hello Azure Automation account in which hello runbook is located, and select hello appropriate Azure runbook script.</span></span>
6. <span data-ttu-id="b708b-188">Effectuez un basculement d’un plan de récupération hello, toomake que hello script fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="b708b-188">Do a failover of hello recovery plan, toomake sure hello script works as expected.</span></span>


### <a name="add-a-vmm-script"></a><span data-ttu-id="b708b-189">Ajouter un script VMM</span><span class="sxs-lookup"><span data-stu-id="b708b-189">Add a VMM script</span></span>

<span data-ttu-id="b708b-190">Si vous avez un site source VMM, vous pouvez créer un script sur le serveur VMM de hello et inclure dans votre plan de récupération.</span><span class="sxs-lookup"><span data-stu-id="b708b-190">If you have a VMM source site, you can create a script on hello VMM server, and include it in your recovery plan.</span></span>

1. <span data-ttu-id="b708b-191">Créer un nouveau dossier dans le partage de bibliothèque hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-191">Create a new folder in hello library share.</span></span> <span data-ttu-id="b708b-192">Par exemple, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span><span class="sxs-lookup"><span data-stu-id="b708b-192">For example, \<VMMServerName>\MSSCVMMLibrary\RPScripts.</span></span> <span data-ttu-id="b708b-193">Placez-le sur la source de hello et serveurs VMM cible.</span><span class="sxs-lookup"><span data-stu-id="b708b-193">Place it on hello source and target VMM servers.</span></span>
2. <span data-ttu-id="b708b-194">Créez le script hello (par exemple, RPScript) et vérifier qu’il fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="b708b-194">Create hello script (for example RPScript), and check it works as expected.</span></span>
3. <span data-ttu-id="b708b-195">Placez le script de hello dans l’emplacement de hello \<VMMServerName > \MSSCVMMLibrary, sur les serveurs VMM source et cible hello.</span><span class="sxs-lookup"><span data-stu-id="b708b-195">Place hello script in hello location \<VMMServerName>\MSSCVMMLibrary, on hello source and target VMM servers.</span></span>


## <a name="next-steps"></a><span data-ttu-id="b708b-196">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="b708b-196">Next steps</span></span>

<span data-ttu-id="b708b-197">[En savoir plus](site-recovery-failover.md) sur l’exécution des basculements.</span><span class="sxs-lookup"><span data-stu-id="b708b-197">[Learn more](site-recovery-failover.md) about running failovers.</span></span>
