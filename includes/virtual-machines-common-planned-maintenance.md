<span data-ttu-id="3ee0d-101">Azure exécute régulièrement des mises à jour afin d’améliorer la fiabilité, les performances et la sécurité de l’infrastructure hôte des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-101">Azure periodically performs updates to improve the reliability, performance, and security of the host infrastructure for virtual machines.</span></span> <span data-ttu-id="3ee0d-102">Ces mises à jour vont de la mise à jour corrective de composants logiciels dans l’environnement d’hébergement (système d’exploitation, hyperviseur et différents agents déployés sur l’hôte) en passant par la mise à niveau des composants réseau, jusqu’à la désaffectation de matériel.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-102">These updates range from patching software components in the hosting environment (like operating system, hypervisor, and various agents deployed on the host), upgrading networking components, to hardware decommissioning.</span></span> <span data-ttu-id="3ee0d-103">La majorité de ces mises à jour ont lieu sans affecter les machines virtuelles hébergées.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-103">The majority of these updates are performed without any impact to the hosted virtual machines.</span></span> <span data-ttu-id="3ee0d-104">Cependant, il existe des cas où les mises à jour ont un impact :</span><span class="sxs-lookup"><span data-stu-id="3ee0d-104">However, there are cases where updates do have an impact:</span></span>

- <span data-ttu-id="3ee0d-105">Lorsque la maintenance ne nécessite pas de redémarrage, Azure utilise une migration sur place pour mettre en pause la machine virtuelle pendant la mise à jour de l’hôte.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-105">If the maintenance does not require a reboot, Azure uses in-place migration to pause the VM while the host is updated.</span></span>

- <span data-ttu-id="3ee0d-106">Si la maintenance nécessite un redémarrage, une notification vous dira pour quand est prévue la maintenance.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-106">If maintenance requires a reboot, you get a notice of when the maintenance is planned.</span></span> <span data-ttu-id="3ee0d-107">Dans ces cas, vous disposez aussi d’une période pour commencer la maintenance vous-même, au moment qui vous convient.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-107">In these cases, you'll also be given a time window where you can start the maintenance yourself, at a time that works for you.</span></span>

<span data-ttu-id="3ee0d-108">Cette page décrit comment Microsoft Azure exécute les deux types de maintenance.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-108">This page describes how Microsoft Azure performs both types of maintenance.</span></span> <span data-ttu-id="3ee0d-109">Pour en savoir plus sur les événements non planifiés (pannes), consultez Gestion de la disponibilité des machines virtuelles pour [Windows] (../articles/virtual-machines/windows/manage-availability.md) ou [Linux](../articles/virtual-machines/linux/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="3ee0d-109">For more information about unplanned events (outages), see Manage the availability of virtual machines for [Windows] (../articles/virtual-machines/windows/manage-availability.md) or [Linux](../articles/virtual-machines/linux/manage-availability.md).</span></span>

<span data-ttu-id="3ee0d-110">Les applications qui s’exécutent sur une machine virtuelle peuvent recueillir des informations sur les mises à jour à venir à l’aide du Service de métadonnées Azure pour [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) ou [Linux] (../articles/virtual-machines/linux/instance-metadata-service.md).</span><span class="sxs-lookup"><span data-stu-id="3ee0d-110">Applications running in a virtual machine can gather information about upcoming updates by using the Azure Metadata Service for [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) or [Linux] (../articles/virtual-machines/linux/instance-metadata-service.md).</span></span>

## <a name="in-place-vm-migration"></a><span data-ttu-id="3ee0d-111">Migration sur place d’une machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="3ee0d-111">In-place VM migration</span></span>

<span data-ttu-id="3ee0d-112">Lorsque les mises à jour ne nécessitent pas un redémarrage complet, une migration dynamique sur place est utilisée.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-112">When updates don't require a full reboot, an in-place live migration is used.</span></span> <span data-ttu-id="3ee0d-113">Lors de la mise à jour, la machine virtuelle est mise en pause pendant environ trente secondes, conservant la mémoire RAM, tandis que l’environnement d’hébergement applique les correctifs et mises à jour nécessaires.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-113">During the update the virtual machine is paused for about 30 seconds, preserving the memory in RAM, while the hosting environment applies the necessary updates and patches.</span></span> <span data-ttu-id="3ee0d-114">La machine virtuelle est redémarrée et l’horloge de la machine virtuelle est automatiquement synchronisée.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-114">The virtual machine is then resumed and the clock of the virtual machine is automatically synchronized.</span></span>

<span data-ttu-id="3ee0d-115">Pour les machines virtuelles dans des groupes à haute disponibilité, les domaines de mise à jour sont mis à jour un par un.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-115">For VMs in availability sets, update domains are updated one at a time.</span></span> <span data-ttu-id="3ee0d-116">Toutes les machines virtuelles d’un domaine de mise à jour (UD) sont mises en pause, mises à jour et redémarrées avant que la maintenance planifiée ne passe au domaine de mise à jour suivant.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-116">All VMs in one update domain (UD) are paused, updated and then resumed before planned maintenance moves on to the next UD.</span></span>

<span data-ttu-id="3ee0d-117">Certaines applications peuvent être affectées par ces types de mises à jour.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-117">Some applications may be impacted by these types of updates.</span></span> <span data-ttu-id="3ee0d-118">Par exemple, les applications qui effectuent des scénarios de traitement d’événements en temps réel, comme le streaming multimédia, le transcodage multimédia ou la mise en réseau à débit élevé, ne peuvent pas être conçues pour tolérer une pause de trente secondes.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-118">Applications that perform real-time event processing, like media streaming or transcoding, or high throughput networking scenarios, may not be designed to tolerate a 30 second pause.</span></span> <!-- sooooo, what should they do? --> 


## <a name="maintenance-requiring-a-reboot"></a><span data-ttu-id="3ee0d-119">Maintenance nécessitant un redémarrage</span><span class="sxs-lookup"><span data-stu-id="3ee0d-119">Maintenance requiring a reboot</span></span>

<span data-ttu-id="3ee0d-120">Lorsque des machines virtuelles doivent être redémarrées en vue d’une maintenance planifiée, vous en êtes averti.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-120">When VMs need to be rebooted for planned maintenance, you are notified in advance.</span></span> <span data-ttu-id="3ee0d-121">Une maintenance planifiée comprend deux phases : la fenêtre de libre-service et une fenêtre de maintenance planifiée.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-121">Planned maintenance has two phases: the self-service window and a scheduled maintenance window.</span></span>

<span data-ttu-id="3ee0d-122">La **fenêtre de libre-service** vous permet de déclencher la maintenance sur vos machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-122">The **self-service window** lets you initiate the maintenance on your VMs.</span></span> <span data-ttu-id="3ee0d-123">Pendant ce temps, vous pouvez interroger chaque machine virtuelle pour afficher leur état et vérifier le résultat de votre dernière requête de maintenance.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-123">During this time, you can query each VM to see their status and check the result of your last maintenance request.</span></span>

<span data-ttu-id="3ee0d-124">Lorsque vous démarrez une maintenance en libre-service, votre machine virtuelle est déplacée vers un nœud qui a déjà été mis à jour pour le remettre en service.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-124">When you start self-service maintenance, your VM is moved to a node that has already been updated and then powers it back on.</span></span> <span data-ttu-id="3ee0d-125">À cause du redémarrage de la machine virtuelle, le disque temporaire est perdu et les adresses IP dynamiques associées à l’interface réseau virtuelle sont mises à jour.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-125">Because the VM reboots, the temporary disk is lost and dynamic IP addresses associated with virtual network interface are updated.</span></span>

<span data-ttu-id="3ee0d-126">Si vous démarrez une maintenance en libre-service et rencontrez une erreur au cours du processus, l’opération s’interrompt, la machine virtuelle n’est pas mise à jour et est retirée de l’itération de la maintenance planifiée.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-126">If you start self-service maintenance and there is an error during the process, the operation is stopped, the VM is not updated and it is also removed from the planned maintenance iteration.</span></span> <span data-ttu-id="3ee0d-127">Un nouveau planning vous sera fourni ultérieurement et une nouvelle occasion de procéder à une maintenance en libre-service.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-127">You will be contacted in a later time with a new schedule and offered a new opportunity to do self-service maintenance.</span></span> 

<span data-ttu-id="3ee0d-128">C’est après la fenêtre de libre-service qu’apparaît la **fenêtre de maintenance planifiée**.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-128">When the self-service window has passed, the **scheduled maintenance window** begins.</span></span> <span data-ttu-id="3ee0d-129">Pendant cet intervalle de temps, vous pouvez toujours interroger la fenêtre de maintenance, mais vous ne pouvez plus démarrer la maintenance.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-129">During this time window, you can still query for the maintenance window, but no longer be able to start the maintenance yourself.</span></span>

## <a name="availability-considerations-during-planned-maintenance"></a><span data-ttu-id="3ee0d-130">Considérations relatives à la disponibilité lors de la maintenance planifiée</span><span class="sxs-lookup"><span data-stu-id="3ee0d-130">Availability Considerations during Planned Maintenance</span></span> 

<span data-ttu-id="3ee0d-131">Si vous décidez d’attendre jusqu’à la fenêtre de maintenance planifiée, plusieurs éléments sont à prendre en compte si vous voulez maintenir une haute disponibilité de vos machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-131">If you decide to wait until the planned maintenance window, there are a few things to consider for maintaining the highest availabilty of your VMs.</span></span> 

### <a name="paired-regions"></a><span data-ttu-id="3ee0d-132">Régions jumelées</span><span class="sxs-lookup"><span data-stu-id="3ee0d-132">Paired Regions</span></span>

<span data-ttu-id="3ee0d-133">Chaque région Azure est associée à une autre région au sein de la même région géographique; elles constituent ainsi des paires régionales.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-133">Each Azure region is paired with another region within the same geography, together they make a regional pair.</span></span> <span data-ttu-id="3ee0d-134">Pendant les maintenances planifiées, Azure ne met à jour que les machines virtuelles d’une seule région d’une paire régionale.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-134">During planned maintenance, Azure will only update the VMs in a single region of a region pair.</span></span> <span data-ttu-id="3ee0d-135">Par exemple, lors de la mise à jour des ordinateurs virtuels de l’Amérique du Nord central, Azure ne met à jour dans le même temps aucune machine virtuelle de l’Amérique du Nord méridionale.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-135">For example, when updating the Virtual Machines in North Central US, Azure will not update any Virtual Machines in South Central US at the same time.</span></span> <span data-ttu-id="3ee0d-136">En revanche, les autres régions, l’Europe du Nord par exemple, peuvent faire l’objet d’une maintenance en même temps que la région Est des États-Unis.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-136">However, other regions such as North Europe can be under maintenance at the same time as East US.</span></span> <span data-ttu-id="3ee0d-137">Comprendre le fonctionnement des paires régionales peut vous aider à mieux répartir vos machines virtuelles entre les régions.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-137">Understanding how region pairs work can help you better distribute your VMs across regions.</span></span> <span data-ttu-id="3ee0d-138">Pour en savoir plus, consultez [Paires régionales Azure](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="3ee0d-138">For more information, see [Azure region pairs](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span></span>

### <a name="availability-sets-and-scale-sets"></a><span data-ttu-id="3ee0d-139">Groupes à haute disponibilité et groupes identiques</span><span class="sxs-lookup"><span data-stu-id="3ee0d-139">Availability sets and scale sets</span></span>

<span data-ttu-id="3ee0d-140">Lorsque vous déployez une charge de travail sur des machines virtuelles Azure, vous pouvez créer des machines virtuelles dans un groupe à haute disponibilité afin de fournir une haute disponibilité pour votre application.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-140">When deploying a workload on Azure VMs, you can create the VMs within an availability set to provide high availability to your application.</span></span> <span data-ttu-id="3ee0d-141">Ceci vous garantit qu’au moins une des machines virtuelles sera disponible pendant une panne ou un événement de maintenance.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-141">This ensures that during either an outage or maintenance events, at least one virtual machine is available.</span></span>

<span data-ttu-id="3ee0d-142">Au sein d’un groupe à haute disponibilité, les machines virtuelles individuelles sont réparties sur un maximum de 20 domaines de mise à jour (UD).</span><span class="sxs-lookup"><span data-stu-id="3ee0d-142">Within an availability set, individual VMs are spread across up to 20 update domains (UDs).</span></span> <span data-ttu-id="3ee0d-143">Lors de la maintenance planifiée, un seul domaine de mise à jour est affecté à un moment donné.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-143">During planned maintenance, only a single update domain is impacted at any given time.</span></span> <span data-ttu-id="3ee0d-144">Avertissement : L’ordre des domaines de mise à jour impactés n’est pas forcément séquentiel.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-144">Be aware that the order of update domains being impacted does not necessarily happen sequentially.</span></span> 

<span data-ttu-id="3ee0d-145">Les groupes de machines virtuelles identiques sont des ressources Azure Compute que vous pouvez utiliser pour déployer et gérer un ensemble de machines virtuelles identiques en tant que ressource unique.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-145">Virtual machine scale sets are an Azure compute resource that enables you to deploy and manage a set of identical VMs as a single resource.</span></span> <span data-ttu-id="3ee0d-146">Le groupe identique est automatiquement déployé dans les domaines de mise à jour, comme les machines virtuelles dans un groupe à haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-146">The scale set is automatically deployed across update domains, like VMs in an availability set.</span></span> <span data-ttu-id="3ee0d-147">Comme pour les groupes à haute disponibilité, un seul domaine de mise à jour n’est impacté à la fois dans des groupes identiques.</span><span class="sxs-lookup"><span data-stu-id="3ee0d-147">Just like with availability sets, with scale sets only a single update domain is impacted at any given time.</span></span>

<span data-ttu-id="3ee0d-148">Pour en savoir plus sur la configuration des machines virtuelles pour une haute disponibilité, voir Gestion de la disponibilité des machines virtuelles pour Windows (../articles/virtual-machines/windows/manage-availability.md) ou pour [Linux](../articles/virtual-machines/linux/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="3ee0d-148">For more information about configuring your virtual machines for high availability, see Manage the availability of your virtual machines for Windows (../articles/virtual-machines/windows/manage-availability.md) or [Linux](../articles/virtual-machines/linux/manage-availability.md).</span></span>