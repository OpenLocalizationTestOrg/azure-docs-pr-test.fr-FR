La gestion des identités sont tout aussi importante dans un cloud public hello car il est sur site. toohelp avec cette, Azure prend en charge plusieurs technologies d’identité de cloud computing différent. à savoir :

* Vous pouvez exécuter Windows Server Active Directory (généralement appelé simplement AD) dans le cloud hello à l’aide d’ordinateurs virtuels créés avec les machines virtuelles Azure. Cette approche est logique lorsque vous utilisez Azure tooextend votre centre de données local dans le cloud de hello.
* Vous pouvez utiliser toogive Azure Active Directory unique aux utilisateurs de session trop[logiciel en tant que Service (SaaS)](https://azure.microsoft.com/overview/what-is-saas/) applications. Microsoft Office 365 fait appel à cette technologie, par exemple, et les applications s’exécutant sous Azure ou d’autres plateformes sur le cloud peuvent également y recourir.
* Applications s’exécutant dans hello cloud ou locaux peuvent utiliser Azure Active Directory Access Control toolet utilisateurs ouvrir une session en utilisant des identités de Facebook, Google, Microsoft et d’autres fournisseurs d’identité.

Cet article décrit l’ensemble de ces trois options.

## <a name="table-of-contents"></a>Sommaire
* [Exécution de Windows Server Active Directory sur les machines virtuelles](#adinvm)
* [Utilisation d’Azure Active Directory](#ad)
* [Utilisation du contrôle d’accès Azure Active Directory](#ac)

## <a name="adinvm"></a>Exécution de Windows Server Active Directory sur les machines virtuelles
L’exécution de Windows Server AD dans les machines virtuelles Azure est fort similaire à une exécution locale. [figure 1](#fig1) illustre un exemple type.

![Azure Active Directory sur la machine virtuelle](./media/identity/identity_01_ADinVM.png)

<a name="Fig1"></a>Figure 1 : Windows Server Active Directory peuvent s’exécuter dans le centre de données local des machines virtuelles Azure connectées tooan organisation à l’aide du réseau virtuel Azure.

Dans l’exemple hello indiqué ici, Windows Server Active Directory est en cours d’exécution dans des machines virtuelles créées à l’aide de la technologie de plateforme hello IaaS, des Machines virtuelles Azure. Ces machines virtuelles et quelques autres sont regroupées dans un centre de données tooan réseau virtuel connecté localement à l’aide du réseau virtuel Azure. réseau virtuel de Hello carves sortie d’un groupe d’ordinateurs virtuels de cloud qui interagissent avec le réseau local de hello via une connexion de réseau privé virtuel (VPN). Effectuant cette permet de ces machines virtuelles ressembler à centre de données sur site comme un autre sous-réseau toohello. Comme le montre la figure hello, deux de ces ordinateurs virtuels sont en cours d’exécution des contrôleurs de domaine Windows Server Active Directory. Hello autres ordinateurs virtuels dans le réseau virtuel de hello peut exécuter les applications, telles que SharePoint, ou utilisés d’une autre manière, comme pour le développement et de test. Centre de données local Hello exécute également les deux contrôleurs de domaine Windows Server Active Directory.

Il existe plusieurs options pour les contrôleurs de domaine hello connexion dans le cloud hello avec celles qui s’exécutent sur site :

* les intégrer tous à un domaine Active Directory unique ;
* Créer distinct AD domaines locaux et cloud hello qui font partie de hello même forêt.
* Créer des forêts Active Directory distinctes dans le cloud de hello et localement, puis se connecter forêts hello à l’aide des approbations inter-forêts ou Windows Server Active Directory Federation Services (ADFS), qui peut s’exécuter également dans les machines virtuelles sur Azure.

Le choix est effectué, un administrateur doit s’assurer que les demandes d’authentification à partir d’utilisateurs locaux accédez toocloud uniquement lorsque cela est nécessaire, les contrôleurs de domaine cloud de toohello hello lien étant probablement toobe plus lent que sur des réseaux locaux. Un autre facteur tooconsider, dans le cloud de connexion et les contrôleurs de domaine local correspond au trafic hello généré par la réplication. Contrôleurs de domaine dans le cloud de hello sont généralement dans leur propre site Active Directory, ce qui permet une tooschedule administrateur la fréquence à laquelle la réplication est effectuée. Azure facture le trafic envoyé en dehors d’un centre de données Azure, bien que ne pas octets envoyés dans, qui peuvent affecter les choix de réplication de l’administrateur hello. Il convient également de mentionner que bien qu’Azure fournisse sa propre prise en charge du système DNS (Domain Name System), ce service ne dispose pas des fonctionnalités requises par Active Directory (telles que la prise en charge des enregistrements DNS dynamiques et SRV). Pour cette raison, exécutant Windows Server Active Directory sur Azure exige la définition de vos propres serveurs DNS dans le cloud de hello.

L’exécution de Windows Server AD sur les machines virtuelles Azure peut être pertinente dans plusieurs cas. Voici quelques exemples :

* Si vous utilisez des Machines virtuelles Azure en tant qu’extension de votre centre de données, vous pouvez exécuter des applications dans le cloud hello nécessitant des choses de toohandle contrôleurs de domaine local telles que les demandes d’authentification intégrée de Windows ou des requêtes LDAP. SharePoint, par exemple, interagit fréquemment qu’avec Active Directory, et par conséquent, s’il est possible de toorun une batterie de serveurs SharePoint sur Azure à l’aide d’un répertoire local, configuration de contrôleurs de domaine dans le cloud de hello s’améliorer considérablement les performances. (Il est important toorealize que cela n’est pas forcément nécessaire, toutefois, beaucoup d’applications peut s’exécuter correctement dans le cloud hello à l’aide de contrôleurs de domaine local uniquement.)
* Supposons qu’une filiale qui habitent loin ne dispose pas de hello ressources toorun ses propres contrôleurs de domaine. Aujourd'hui, les utilisateurs doivent s’authentifier contrôleurs toodomain hello autre côté de hello world - connexions sont lentes. En cours d’exécution Active Directory sur Azure dans un centre de données Microsoft proche peut accélérer ce processus sans nécessiter davantage de serveurs de filiale salutation.
* Une organisation qui utilise Azure pour la récupération d’urgence peut maintenir un petit ensemble de machines virtuelles actives cloud hello, y compris un contrôleur de domaine. Il peut ensuite être préparé tooexpand de ce site comme tootake nécessaire sur des échecs ailleurs.

D’autres possibilités existent également. Par exemple, vous n’êtes pas requis tooconnect Windows Server Active Directory dans hello cloud tooan centre de données sur site. Si vous souhaitiez toorun une batterie de serveurs SharePoint qui a traité un ensemble particulier d’utilisateurs, par exemple, qui serait connectez-vous uniquement avec les identités basées sur le cloud, vous pouvez créer une forêt autonome sur Azure. La façon dont vous utilisez cette technologie dépend de vos objectifs. (Pour plus d’informations sur l’utilisation de Windows Server AD avec Azure, [cliquez ici](http://msdn.microsoft.com/library/windowsazure/jj156090.aspx).)

## <a name="ad"></a>Utilisation d’Azure Active Directory
Alors que les applications SaaS deviennent de plus en plus courantes, elles soulèvent une question évidente : quel type de service d’annuaire ces applications basées sur le cloud utilisent-elles ? Question de toothat de réponse de Microsoft est d’Azure Active Directory.

Il existe deux options principales pour l’utilisation de ce service d’annuaire dans le cloud de hello :

* Les individus et organisations utilisant uniquement des applications SaaS peuvent avoir recours à Azure Active Directory en tant que service d’annuaire unique.
* Les organisations qui exécutent Windows Server Active Directory peuvent se connecter à leur tooAzure de répertoire Active Directory local, puis utilisez-le toogive leurs utilisateurs single sign-on tooSaaS applications.

[Figure 2](#fig2) illustre hello premier de ces deux options, où Azure Active Directory est tout ce qui est nécessaire.

![Azure Active Directory sur la machine virtuelle](./media/identity/identity_02_AD.png)

<a name="fig2"></a>Figure 2 : Azure Active Directory permet aux utilisateurs d’une organisation applications tooSaaS de l’authentification unique, y compris Office 365.

Comme le montre la figure hello, Azure AD est un service de l’architecture mutualisé. Cela signifie qu’il peut prendre en charge simultanément de nombreuses organisations différentes et stocker des informations d’annuaire sur les utilisateurs de chacune d’elles. Dans cet exemple, un utilisateur au niveau de l’organisation A tente tooaccess une application SaaS. Celle-ci peut faire partie d’Office 365, par exemple SharePoint Online, ou il peut s’agir d’une application d’un autre éditeur (les applications non fournies par Microsoft peuvent également utiliser cette technologie). Étant donné que Azure AD prend en charge le protocole de hello SAML 2.0, tout ce qui a requis à partir d’une application hello capacité toointeract utilise cette norme. (En fait, les applications utilisant Azure AD peuvent s’exécuter à partir de n’importe quel centre de données, pas uniquement un centre de données Azure.)

processus de Hello commence lorsque l’utilisateur de hello accède à une application SaaS (étape 1). toouse cette application, utilisateur de hello doit présenter un jeton émis par Azure AD.

Ce jeton contient des informations identifiant utilisateur de hello, et il est signé numériquement par Azure AD. jeton hello tooget hello utilisateur s’authentifie auprès lui-même tooAzure AD en fournissant un nom d’utilisateur et un mot de passe (étape 2). Azure AD puis retourne le jeton hello dont il a besoin (étape 3).

Ce jeton est ensuite envoyé application SaaS toohello (étape 4), qui valide la signature du jeton hello et utilise son contenu (étape 5). En règle générale, application hello utilisera les informations d’identité hello jeton de hello contient toodecide les informations de l’utilisateur hello sont autorisée tooaccess et éventuellement d’autres moyens.

Si l’application hello a besoin de plus d’informations sur l’utilisateur de hello à ce qui est inclus dans le jeton de hello, il peut demander ce directement à partir d’Azure AD à l’aide des API d’Azure AD Graph hello (étape 6). Dans la version initiale de hello d’Azure AD, le schéma d’annuaire hello est très simple : il contient uniquement des utilisateurs et des groupes et des relations entre eux. Les applications peuvent utiliser cette toolearn plus d’informations sur les connexions entre les utilisateurs. Par exemple, qu'une application doit tooknow qui est responsable de cet utilisateur toodecide si il est autorisé d’accès toosome segment de données. Il peut le savoir en interrogeant Azure AD via hello API Graph.

Hello API Graph utilise un protocole RESTful ordinaire, ce qui le rend simple toouse à partir de la plupart des clients, y compris les appareils mobiles. Hello API prend également en charge les extensions de hello définies par OData, ajouter des éléments comme une requête langage toolet clients accéder aux données de manières plus utile. (Pour plus d’informations sur OData, consultez la page [Présentation d’OData](http://download.microsoft.com/download/E/5/A/E5A59052-EE48-4D64-897B-5F7C608165B8/IntroducingOData.pdf).) Hello API Graph pouvant être toolearn utilisé sur les relations entre les utilisateurs, il permet aux applications de comprendre le graphique de réseaux sociaux hello qui est incorporée dans le schéma hello Azure AD pour une organisation (qui est la raison pour laquelle elle est appelée hello API Graph). Et tooauthenticate lui-même tooAzure AD pour l’API Graph demande, une application utilise OAuth 2.0.

Si une organisation n’utilise pas Windows Server Active Directory, il n’a pas sur des serveurs locaux ou les domaines - et s’appuie uniquement sur les applications cloud qui utilisent Azure AD, à l’aide de cet annuaire du cloud permettrait de fournir à utilisateurs unique authentification tooall l’entreprise hello d'entre eux. Bien que ce scénario soit de plus en plus fréquent, la plupart des organisations utilisent toujours des domaines locaux créés au moyen de Windows Server Active Directory. Azure AD a un rôle utile de tooplay ici également, en tant que [Figure 3](#fig3) montre.

![Azure Active Directory dans la Machine virtuelle](./media/identity/identity_03_AD.png)
<a id="fig3"></a>Figure 3 : une organisation peut fédérer Windows Server Active Directory avec Azure Active Directory toogive ses applications de tooSaaS de l’authentification unique des utilisateurs.

Dans ce scénario, un utilisateur à l’organisation B veut tooaccess une application SaaS. Avant de commencer, les administrateurs d’Active Directory de l’organisation hello doivent établir une relation de fédération avec Azure AD en utilisant AD FS, comme hello montre l’illustration. Les administrateurs doivent également configurer la synchronisation des données entre local Windows Server l’organisation hello Active Directory et Azure AD. Cette copie automatiquement les informations d’utilisateur et groupe de tooAzure de répertoire local hello AD. Notez que cela permet de : en effet, organisation de hello étend son répertoire local dans le cloud de hello. La combinaison de Windows Server Active Directory et Azure AD de cette façon offre à organisation de hello un service d’annuaire qui peut être géré comme une seule entité, tout en conservant un faible encombrement à la fois localement et dans le cloud de hello.

toouse Azure AD, hello utilisateur tout d’abord ouvre une session dans le domaine d’Active Directory tooher local comme d’habitude (étape 1). Lorsqu’elle tente d’application SaaS de hello tooaccess (étape 2), le processus de fédération de hello entraîne dans Azure AD lui émet un jeton pour cette application (étape 3). (Pour plus d’informations sur le fonctionnement de la fédération, consultez le document [Claims-Based Identity for Windows: Technologies and Scenarios (Identité basée sur des demandes pour Windows : technologies et scénarios)](http://www.davidchappell.com/writing/white_papers/Claims-Based_Identity_for_Windows_v3.0--Chappell.docx).) Comme avant, ce jeton contient des informations identifiant utilisateur de hello, et il est signé numériquement par Azure AD. Ce jeton est ensuite envoyé application SaaS toohello (étape 4), qui valide la signature du jeton hello et utilise son contenu (étape 5). Et se trouve dans le scénario précédent hello, hello SaaS permet aux applications hello toolearn API Graph plus d’informations sur cet utilisateur, si nécessaire (étape 6).

Aujourd’hui, Azure AD n’a pas vocation à remplacer entièrement Windows Server AD en local. Comme indiqué précédemment, annuaire de cloud hello a un quantité schéma plus simple, et qu’il manque également des éléments tels que la stratégie de groupe, hello capacité toostore plus d’informations sur les ordinateurs et la prise en charge de LDAP. (En fait, un ordinateur Windows ne peut pas être configuré toolet tooit rien d’autre qu’Azure AD à l’aide de connecteront les utilisateurs, ce n’est pas un scénario pris en charge.) Au lieu de cela, objectifs initiale de hello d’Azure AD incluent permettant à des applications d’entreprise aux utilisateurs l’accès dans le cloud de hello sans conserver une connexion distincte et la libération local Administrateurs d’Active Directory à partir de la synchronisation manuelle de leur annuaire local avec chaque application SaaS utilise de leur organisation. Au fil du temps, cependant, s’attendre à ce tooaddress de service cloud Active un éventail plus large de scénarios.

## <a name="ac"></a>Utilisation du contrôle d’accès Azure Active Directory
Technologies d’identité basé sur le cloud et peuvent être utilisé toosolve de nombreux problèmes. Azure Active Directory peut donner aux utilisateurs d’une organisation les applications SaaS toomultiple de l’authentification unique, par exemple. Mais technologies d’identité dans le cloud de hello peuvent également être utilisés par d’autres moyens.

Supposons, par exemple, qu’une application veut toolet ses utilisateurs se connectent à l’aide des jetons émis par plusieurs *fournisseurs d’identité (IdPs)*. Actuellement, il existe de nombreux fournisseurs d’identité, y compris Facebook, Google et Microsoft, et les applications permettent souvent aux utilisateurs de se connecter au moyen de l’une de ces identités. Pourquoi une application de méthode toomaintain sa propre liste d’utilisateurs et mots de passe lors de se fier à la place à des identités qui existent déjà ? Accepter des identités existantes simplifie la tâche à la fois, les utilisateurs ayant un moins tooremember nom d’utilisateur et mot de passe et pour les personnes hello créer application hello, qui n’est plus nécessaire toomaintain leurs propres listes de noms d’utilisateur et mots de passe.

Cependant, alors que chaque fournisseur d’identité émet un type de jeton, ces jetons ne sont pas normalisés ; chaque IdP dispose de son propre format. En outre, les informations hello dans ces jetons n’est pas standards. Une application qui souhaite tooaccept des jetons émis par, par exemple, Facebook, Google et Microsoft est confrontés à hello défi de l’écriture de code unique toohandle chacun de ces formats différents.

Mais pourquoi procéder ainsi ? Pourquoi ne pas créer plutôt un intermédiaire pouvant générer un format de jeton unique avec une représentation commune des informations d’identité ? Cette approche rendrait vie plus simple pour les développeurs hello qui créent des applications, puisqu’ils doivent maintenant toohandle qu’un seul type de jeton. Azure Active Directory Access Control fait cela, en fournissant un intermédiaire dans le cloud de hello pour travailler avec des jetons différents. [figure 4](#fig4) illustre la façon dont cela fonctionne.

![Azure Active Directory dans la Machine virtuelle](./media/identity/identity_04_IdentityProviders.png)
<a id="fig4"></a>Figure 4 : contrôle d’accès Azure Active Directory rend plus facile pour les applications tooaccept identité jetons émis par différents fournisseurs d’identité.

processus de Hello commence lorsqu’un utilisateur tente d’application de hello tooaccess à partir d’un navigateur. application Hello redirige son tooan IdP de son choix (et que cette application hello également approuvée). Elle authentifie elle-même toothis IdP, comme en entrant un nom d’utilisateur et un mot de passe (étape 1), et hello IdP retourne un jeton contenant des informations sur son (étape 2).

Comme le montre la figure hello, contrôle d’accès prend en charge une plage de différents IdPs basée sur le cloud, y compris les comptes créés par Google, Yahoo, Facebook, Microsoft (anciennement Windows Live ID) et tout fournisseur OpenID. Il prend également en charge les identités créées à l’aide d’Azure Active Directory et, par l’intermédiaire de la fédération avec les services AD FS, Windows Server Active Directory. Hello vise des identités toocover hello couramment utilisé aujourd'hui, ils sont émis par IdPs dans le cloud de hello ou localement.

Une fois que le navigateur de l’utilisateur hello possède un jeton de fournisseurs d’identité à partir de son IdP choisi, il envoie ce jeton tooAccess contrôle (étape 3). Contrôle d’accès valide de jeton de hello, s’assurer qu’il vraiment a été émis par cette IdP, puis crée un nouveau jeton selon les règles de toohello qui ont été définis pour cette application. Comme Azure Active Directory, le contrôle d’accès est un service de l’architecture mutualisé, mais les clients de hello sont des applications plutôt que les organisations de client. Chaque application peut obtenir son propre espace de noms, comme montre l’illustration hello et pouvez définir des règles différentes sur l’autorisation et bien plus encore.

Ces règles permettent aux administrateurs de chaque application de définir la façon dont les jetons provenant de différents IdP doivent être convertis en jetons de contrôle d’accès. Par exemple, si différents IdP utilisent des types distincts pour la représentation des noms d’utilisateur, les règles de contrôle d’accès peuvent convertir tous ceux-ci en type de nom d’utilisateur commun. Contrôle d’accès envoie ensuite ce nouveau jeton toohello précédent navigateur (étape 4), qui a été envoyé par l’application toohello (étape 5). Une fois qu’il a le jeton de contrôle d’accès hello, l’application hello vérifie que ce jeton vraiment a été émis par le contrôle d’accès, puis utilise les informations de hello qu’il contient (étape 6).

Pendant ce processus peut sembler un peu complexe, il utilise effectivement vie beaucoup plus simple pour créateur de hello d’application hello. Plutôt que gérer divers jetons contenant des informations différentes, application hello peut accepter des identités émises par plusieurs fournisseurs d’identité lors de la réception de toujours uniquement un jeton unique avec des informations familiers. En outre, au lieu d’exiger que chaque application toobe configuré tootrust IdPs différentes, ces relations d’approbation sont conservées à la place par le contrôle d’accès - une application devez approuver uniquement.

Il est important de noter que rien sur le contrôle d’accès est liée tooWindows - il pourrait tout aussi bien être utilisé par une application Linux qui acceptées uniquement les identités de Google et Facebook. Et même si le contrôle d’accès fait partie de hello famille d’Azure Active Directory, vous pouvez considérer comme un service entièrement distinct de celui décrit dans la section précédente de hello. Bien que les deux technologies fonctionnent avec l’identité, ils concernent des problèmes très différents (bien que Microsoft a déclaré qu’elle attend toointegrate hello deux à un moment donné).

L’utilisation des identités est importante dans pratiquement chaque application. objectif Hello du contrôle d’accès est toomake plus facilement pour les applications toocreate les développeurs qui acceptent des identités à partir des fournisseurs d’identité divers. En plaçant ce service dans le cloud de hello, Microsoft a rendu application tooany disponibles en cours d’exécution sur n’importe quelle plateforme.

## <a name="about-hello-author"></a>À propos de hello auteur
David Chappell est directeur associé de Chappell & Associates [www.davidchappell.com](http://www.davidchappell.com) à San Francisco, en Californie.

