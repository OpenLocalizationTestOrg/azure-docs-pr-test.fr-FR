# <a name="frequently-asked-questions-about-classic-to-azure-resource-manager-migration"></a><span data-ttu-id="c2f43-101">Questions fréquemment posées sur la migration du modèle classique vers le modèle Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="c2f43-101">Frequently asked questions about classic to Azure Resource Manager migration</span></span>

## <a name="does-this-migration-plan-affect-any-of-my-existing-services-or-applications-that-run-on-azure-virtual-machines"></a><span data-ttu-id="c2f43-102">Ce plan de migration affecte-t-il l’un de mes services ou applications existants qui s’exécutent sur des machines virtuelles Azure ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-102">Does this migration plan affect any of my existing services or applications that run on Azure virtual machines?</span></span> 

<span data-ttu-id="c2f43-103">Non.</span><span class="sxs-lookup"><span data-stu-id="c2f43-103">No.</span></span> <span data-ttu-id="c2f43-104">Les machines virtuelles (Classic) sont des services entièrement pris en charge des services à disponibilité générale.</span><span class="sxs-lookup"><span data-stu-id="c2f43-104">The VMs (classic) are fully supported services in general availability.</span></span> <span data-ttu-id="c2f43-105">Vous pouvez continuer à utiliser ces ressources pour développer votre empreinte sur Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="c2f43-105">You can continue to use these resources to expand your footprint on Microsoft Azure.</span></span>

## <a name="what-happens-to-my-vms-if-i-dont-plan-on-migrating-in-the-near-future"></a><span data-ttu-id="c2f43-106">Que se passera-t-il pour mes machines virtuelles si je n’envisage pas de procéder à cette migration dans un avenir proche ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-106">What happens to my VMs if I don’t plan on migrating in the near future?</span></span> 

<span data-ttu-id="c2f43-107">Nous ne déconseillons pas l’utilisation des API et du modèle de ressource Classic existants.</span><span class="sxs-lookup"><span data-stu-id="c2f43-107">We are not deprecating the existing classic APIs and resource model.</span></span> <span data-ttu-id="c2f43-108">Compte tenu des fonctionnalités avancées offertes par le modèle de déploiement Resource Manager, notre objectif est de faciliter la migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-108">We want to make migration easy, considering the advanced features that are available in the Resource Manager deployment model.</span></span> <span data-ttu-id="c2f43-109">Nous vous recommandons donc vivement de passer en revue [certaines des avancées réalisées](../articles/azure-resource-manager/resource-manager-deployment-model.md) en matière d’IaaS dans Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c2f43-109">We highly recommend that you review [some of the advancements](../articles/azure-resource-manager/resource-manager-deployment-model.md) that are part of IaaS under Resource Manager.</span></span>

## <a name="what-does-this-migration-plan-mean-for-my-existing-tooling"></a><span data-ttu-id="c2f43-110">Quelles sont les implications de ce plan de migration pour mes outils existants ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-110">What does this migration plan mean for my existing tooling?</span></span> 

<span data-ttu-id="c2f43-111">La mise à jour de vos outils vers le modèle de déploiement Resource Manager constitue l’un des plus importants changements à prendre en compte dans vos plans de migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-111">Updating your tooling to the Resource Manager deployment model is one of the most important changes that you have to account for in your migration plans.</span></span>

## <a name="how-long-will-the-management-plane-downtime-be"></a><span data-ttu-id="c2f43-112">Quelle sera la durée de l’arrêt du plan de gestion ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-112">How long will the management-plane downtime be?</span></span> 

<span data-ttu-id="c2f43-113">Cette durée dépend du nombre de ressources dont vous effectuez la migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-113">It depends on the number of resources that are being migrated.</span></span> <span data-ttu-id="c2f43-114">Pour les déploiements de plus petite taille (quelques dizaines de machines virtuelles), le processus de migration complet devrait prendre moins d’une heure.</span><span class="sxs-lookup"><span data-stu-id="c2f43-114">For smaller deployments (a few tens of VMs), the whole migration should take less than an hour.</span></span> <span data-ttu-id="c2f43-115">Pour les déploiements à grande échelle (plusieurs centaines de machines virtuelles), la migration peut prendre quelques heures.</span><span class="sxs-lookup"><span data-stu-id="c2f43-115">For large-scale deployments (hundreds of VMs), the migration can take a few hours.</span></span>

## <a name="can-i-roll-back-after-my-migrating-resources-are-committed-in-resource-manager"></a><span data-ttu-id="c2f43-116">Puis-je procéder à une restauration après avoir validé la migration de mes ressources dans Resource Manager ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-116">Can I roll back after my migrating resources are committed in Resource Manager?</span></span> 

<span data-ttu-id="c2f43-117">Vous pouvez abandonner la migration tant que vos ressources se trouvent à l’état Préparé.</span><span class="sxs-lookup"><span data-stu-id="c2f43-117">You can abort your migration as long as the resources are in the prepared state.</span></span> <span data-ttu-id="c2f43-118">La restauration n’est plus prise en charge une fois que les ressources ont fait l’objet d’une migration par le biais de l’opération de validation.</span><span class="sxs-lookup"><span data-stu-id="c2f43-118">Rollback is not supported after the resources have been successfully migrated through the commit operation.</span></span>

## <a name="can-i-roll-back-my-migration-if-the-commit-operation-fails"></a><span data-ttu-id="c2f43-119">Puis-je restaurer ma migration en cas d’échec de l’opération de validation ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-119">Can I roll back my migration if the commit operation fails?</span></span> 

<span data-ttu-id="c2f43-120">Vous ne pouvez pas abandonner la migration si l’opération de validation échoue.</span><span class="sxs-lookup"><span data-stu-id="c2f43-120">You cannot abort migration if the commit operation fails.</span></span> <span data-ttu-id="c2f43-121">Toutes les opérations de migration, notamment l’opération de validation, sont idempotentes.</span><span class="sxs-lookup"><span data-stu-id="c2f43-121">All migration operations, including the commit operation, are idempotent.</span></span> <span data-ttu-id="c2f43-122">Nous vous recommandons donc de retenter l’opération après une courte période.</span><span class="sxs-lookup"><span data-stu-id="c2f43-122">So we recommend that you retry the operation after a short time.</span></span> <span data-ttu-id="c2f43-123">Si l’erreur persiste, créez un ticket de support ou publiez un billet avec la balise ClassicIaaSMigration sur notre [forum consacré aux machines virtuelles](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span><span class="sxs-lookup"><span data-stu-id="c2f43-123">If you still face an error, create a support ticket or create a forum post with the ClassicIaaSMigration tag on our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span></span>

## <a name="do-i-have-to-buy-another-express-route-circuit-if-i-have-to-use-iaas-under-resource-manager"></a><span data-ttu-id="c2f43-124">Dois-je acheter un autre circuit ExpressRoute si je dois utiliser la ressource IaaS sous Resource Manager ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-124">Do I have to buy another express route circuit if I have to use IaaS under Resource Manager?</span></span> 

<span data-ttu-id="c2f43-125">Non.</span><span class="sxs-lookup"><span data-stu-id="c2f43-125">No.</span></span> <span data-ttu-id="c2f43-126">Nous avons récemment activé la [migration de circuits ExpressRoute du modèle de déploiement classique vers le modèle de déploiement Resource Manager](../articles/expressroute/expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="c2f43-126">We recently enabled [moving ExpressRoute circuits from the classic to the Resource Manager deployment model](../articles/expressroute/expressroute-move.md).</span></span> <span data-ttu-id="c2f43-127">Vous n’avez pas besoin d’acheter de nouveau circuit ExpressRoute si vous en possédez déjà un.</span><span class="sxs-lookup"><span data-stu-id="c2f43-127">You don’t have to buy a new ExpressRoute circuit if you already have one.</span></span>

## <a name="what-if-i-had-configured-role-based-access-control-policies-for-my-classic-iaas-resources"></a><span data-ttu-id="c2f43-128">Que se passera-t-il si j’ai configuré des stratégies de contrôle d’accès en fonction du rôle (RBAC) pour mes ressources IaaS Classic ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-128">What if I had configured Role-Based Access Control policies for my classic IaaS resources?</span></span> 

<span data-ttu-id="c2f43-129">Pendant la migration, les ressources Classic sont converties en ressources Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c2f43-129">During migration, the resources transform from classic to Resource Manager.</span></span> <span data-ttu-id="c2f43-130">Nous vous recommandons donc de planifier les mises à jour de stratégies RBAC qui seront nécessaires après la migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-130">So we recommend that you plan the RBAC policy updates that need to happen after migration.</span></span>

## <a name="i-backed-up-my-classic-vms-in-a-backup-vault-can-i-migrate-my-vms-from-classic-mode-to-resource-manager-mode-and-protect-them-in-a-recovery-services-vault"></a><span data-ttu-id="c2f43-131">J’ai sauvegardé mes machines virtuelles classiques dans un coffre de sauvegarde Azure.</span><span class="sxs-lookup"><span data-stu-id="c2f43-131">I backed up my classic VMs in a Backup vault.</span></span> <span data-ttu-id="c2f43-132">Puis-je migrer mes machines virtuelles du mode Classic vers le mode Ressource Manager et les protéger dans un coffre Recovery Services ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-132">Can I migrate my VMs from classic mode to Resource Manager mode and protect them in a Recovery Services vault?</span></span> 

<span data-ttu-id="c2f43-133">Les points de récupération des machines virtuelles classiques dans un coffre Azure Backup ne sont pas migrés automatiquement vers un coffre Recovery Services lorsque vous déplacez les machines virtuelles du mode Classic vers le mode Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c2f43-133">Classic VM recovery points in a backup vault don't automatically migrate to a Recovery Services vault when you move the VM from classic to Resource Manager mode.</span></span> <span data-ttu-id="c2f43-134">Suivez ces étapes pour transférer vos sauvegardes de machines virtuelles :</span><span class="sxs-lookup"><span data-stu-id="c2f43-134">Follow these steps to transfer your VM backups:</span></span>

1. <span data-ttu-id="c2f43-135">Dans le coffre de sauvegarde Azure, accédez à l’onglet **Éléments protégés** et sélectionnez la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="c2f43-135">In the Backup vault, go to the **Protected Items** tab and select the VM.</span></span> <span data-ttu-id="c2f43-136">Cliquez sur [Arrêter la protection](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="c2f43-136">Click [Stop Protection](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines).</span></span> <span data-ttu-id="c2f43-137">Laissez l’option *Supprimer les données de sauvegarde associées***non cochée**.</span><span class="sxs-lookup"><span data-stu-id="c2f43-137">Leave *Delete associated backup data* option **unchecked**.</span></span>
2. <span data-ttu-id="c2f43-138">Supprimez l’extension de sauvegarde/capture instantanée de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="c2f43-138">Delete the backup/snapshot extension from the VM.</span></span>
3. <span data-ttu-id="c2f43-139">Migrez la machine virtuelle du mode Classic vers le mode Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c2f43-139">Migrate the virtual machine from classic mode to Resource Manager mode.</span></span> <span data-ttu-id="c2f43-140">Vérifiez que les informations relatives au stockage et au réseau correspondant à la machine virtuelle sont également migrées vers le mode Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c2f43-140">Make sure the storage and network information corresponding to the virtual machine is also migrated to Resource Manager mode.</span></span>
4. <span data-ttu-id="c2f43-141">Créez un coffre Recovery Services et configurez la sauvegarde sur la machine virtuelle migrée à l’aide de l’action **Sauvegarder** en haut du tableau de bord du coffre.</span><span class="sxs-lookup"><span data-stu-id="c2f43-141">Create a Recovery Services vault and configure backup on the migrated virtual machine using **Backup** action on top of vault dashboard.</span></span> <span data-ttu-id="c2f43-142">Pour plus d’informations sur la sauvegarde d’une machine virtuelle dans un coffre Recovery Services, consultez l’article [Protégez les machines virtuelles Azure avec un coffre Recovery Services](../articles/backup/backup-azure-vms-first-look-arm.md).</span><span class="sxs-lookup"><span data-stu-id="c2f43-142">For detailed information on backing up a VM to a Recovery Services vault, see the article, [Protect Azure VMs with a Recovery Services vault](../articles/backup/backup-azure-vms-first-look-arm.md).</span></span>

## <a name="can-i-validate-my-subscription-or-resources-to-see-if-theyre-capable-of-migration"></a><span data-ttu-id="c2f43-143">Puis-je vérifier si mon abonnement ou mes ressources peuvent faire l’objet d’une migration ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-143">Can I validate my subscription or resources to see if they're capable of migration?</span></span> 

<span data-ttu-id="c2f43-144">Oui.</span><span class="sxs-lookup"><span data-stu-id="c2f43-144">Yes.</span></span> <span data-ttu-id="c2f43-145">Dans l’option de migration prise en charge par la plateforme, la première étape de préparation de la migration consiste à s’assurer que les ressources peuvent faire l’objet d’une migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-145">In the platform-supported migration option, the first step in preparing for migration is to validate that the resources are capable of migration.</span></span> <span data-ttu-id="c2f43-146">En cas d’échec de l’opération de validation, vous recevez des messages avec toutes les raisons pour lesquelles la migration ne peut pas aboutir.</span><span class="sxs-lookup"><span data-stu-id="c2f43-146">In case the validate operation fails, you receive messages for all the reasons the migration cannot be completed.</span></span>

## <a name="what-happens-if-i-run-into-a-quota-error-while-preparing-the-iaas-resources-for-migration"></a><span data-ttu-id="c2f43-147">Que se passe-t-il si je rencontre une erreur de quota lors de la préparation des ressources IaaS pour la migration ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-147">What happens if I run into a quota error while preparing the IaaS resources for migration?</span></span> 

<span data-ttu-id="c2f43-148">Nous vous recommandons d’abandonner votre migration et de créer ensuite une demande de support en vue d’augmenter les quotas pour la région dans laquelle vous effectuez la migration des machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="c2f43-148">We recommend that you abort your migration and then log a support request to increase the quotas in the region where you are migrating the VMs.</span></span> <span data-ttu-id="c2f43-149">Une fois votre demande de quota approuvée, vous pouvez réexécuter la procédure de migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-149">After the quota request is approved, you can start executing the migration steps again.</span></span>

## <a name="how-do-i-report-an-issue"></a><span data-ttu-id="c2f43-150">Comment signaler un problème ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-150">How do I report an issue?</span></span> 

<span data-ttu-id="c2f43-151">Publiez vos problèmes et questions concernant la migration sur notre [forum consacré aux machines virtuelles](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows)en utilisant le mot clé ClassicIaaSMigration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-151">Post your issues and questions about migration to our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows), with the keyword ClassicIaaSMigration.</span></span> <span data-ttu-id="c2f43-152">Nous vous recommandons de poster toutes vos questions sur ce forum.</span><span class="sxs-lookup"><span data-stu-id="c2f43-152">We recommend posting all your questions on this forum.</span></span> <span data-ttu-id="c2f43-153">Si vous disposez d’un contrat de support, vous pouvez également créer un ticket de support.</span><span class="sxs-lookup"><span data-stu-id="c2f43-153">If you have a support contract, you're welcome to log a support ticket as well.</span></span>

## <a name="what-if-i-dont-like-the-names-of-the-resources-that-the-platform-chose-during-migration"></a><span data-ttu-id="c2f43-154">Comment procéder si je n’apprécie pas les noms que la plateforme a choisis pour mes ressources lors de la migration ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-154">What if I don't like the names of the resources that the platform chose during migration?</span></span> 

<span data-ttu-id="c2f43-155">Les noms de toutes les ressources que vous avez explicitement fournis dans le modèle de déploiement sont conservés pendant la migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-155">All the resources that you explicitly provide names for in the classic deployment model are retained during migration.</span></span> <span data-ttu-id="c2f43-156">Dans certains cas, de nouvelles ressources seront créées.</span><span class="sxs-lookup"><span data-stu-id="c2f43-156">In some cases, new resources are created.</span></span> <span data-ttu-id="c2f43-157">Par exemple, une interface réseau est créée pour chaque machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="c2f43-157">For example: a network interface is created for every VM.</span></span> <span data-ttu-id="c2f43-158">Actuellement, nous ne prenons pas en charge la possibilité de contrôler les noms de ces ressources créées pendant la migration.</span><span class="sxs-lookup"><span data-stu-id="c2f43-158">We currently don't support the ability to control the names of these new resources created during migration.</span></span> <span data-ttu-id="c2f43-159">Vous pouvez voter en facteur de cette fonctionnalité via le [forum des commentaires sur Azure](http://feedback.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c2f43-159">Log your votes for this feature on the [Azure feedback forum](http://feedback.azure.com).</span></span>

## <a name="can-i-migrate-expressroute-circuits-used-across-subscriptions-with-authorization-links"></a><span data-ttu-id="c2f43-160">Puis-je migrer des circuits ExpressRoute utilisés dans les abonnements avec des liens d’autorisation ?</span><span class="sxs-lookup"><span data-stu-id="c2f43-160">Can I migrate ExpressRoute circuits used across subscriptions with authorization links?</span></span> 

<span data-ttu-id="c2f43-161">Les circuits ExpressRoute utilisant des liens d’autorisation entre abonnements ne peuvent pas être migrés automatiquement sans temps d’arrêt.</span><span class="sxs-lookup"><span data-stu-id="c2f43-161">ExpressRoute circuits which use cross-subscription authorization links cannot be migrated automatically without downtime.</span></span> <span data-ttu-id="c2f43-162">Il existe des étapes manuelles permettant de migrer ces circuits.</span><span class="sxs-lookup"><span data-stu-id="c2f43-162">We have guidance on how these can be migrated using manual steps.</span></span> <span data-ttu-id="c2f43-163">Consultez [Migrer des circuits ExpressRoute et les réseaux virtuels associés du modèle de déploiement classique au modèle de déploiement Resource Manager](../articles/expressroute/expressroute-migration-classic-resource-manager.md) pour voir la procédure et obtenir plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="c2f43-163">See [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../articles/expressroute/expressroute-migration-classic-resource-manager.md) for steps and more information.</span></span>

## <a name="i-got-a-message-vm-is-reporting-the-overall-agent-status-as-not-ready-hence-the-vm-cannot-be-migrated-ensure-that-the-vm-agent-is-reporting-overall-agent-status-as-ready-or-vm-contains-extension-whose-status-is-not-being-reported-from-the-vm-hence-this-vm-cannot-be-migrated-"></a><span data-ttu-id="c2f43-164">J’ai reçu un message *« La machine virtuelle signale que l’agent est dans l’état général Pas prêt. Par conséquent, la machine virtuelle ne peut pas être migrée. Assurez-vous que l’état général de l’agent signalé par l’agent de machine virtuelle est « Prêt »* ou *« La machine virtuelle contient une extension dont l’état n’est pas signalé par la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="c2f43-164">I got a message *"VM is reporting the overall agent status as Not Ready. Hence, the VM cannot be migrated. Ensure that the VM Agent is reporting overall agent status as Ready"* or *"VM contains Extension whose Status is not being reported from the VM.</span></span> <span data-ttu-id="c2f43-165">Par conséquent, elle ne peut pas faire l’objet d’une migration. ».</span><span class="sxs-lookup"><span data-stu-id="c2f43-165">Hence, this VM cannot be migrated."</span></span> *

<span data-ttu-id="c2f43-166">Ce message est affiché lorsque la machine virtuelle n’a pas de connectivité sortante à Internet.</span><span class="sxs-lookup"><span data-stu-id="c2f43-166">This message is received when the VM does not have outbound connectivity to the internet.</span></span> <span data-ttu-id="c2f43-167">L’agent de machine virtuelle utilise la connectivité sortante pour atteindre le compte de stockage Azure afin de mettre à jour l’état de l’agent toutes les 5 minutes.</span><span class="sxs-lookup"><span data-stu-id="c2f43-167">The VM agent uses outbound connectivity to reach the Azure storage account for updating the agent status every five minutes.</span></span>
