

<span data-ttu-id="a3249-101">Les extensions de machine virtuelle peuvent vous aider à :</span><span class="sxs-lookup"><span data-stu-id="a3249-101">VM extensions can help you:</span></span>

* <span data-ttu-id="a3249-102">modifier les fonctionnalités de sécurité et d'identité telles que la réinitialisation des valeurs de compte et l'utilisation de logiciels anti-programmes malveillants ;</span><span class="sxs-lookup"><span data-stu-id="a3249-102">Modify security and identity features, such as resetting account values and using antimalware</span></span>
* <span data-ttu-id="a3249-103">démarrer, arrêter ou configurer la surveillance et les diagnostics ;</span><span class="sxs-lookup"><span data-stu-id="a3249-103">Start, stop, or configure monitoring and diagnostics</span></span>
* <span data-ttu-id="a3249-104">réinitialiser ou installer des fonctionnalités de connectivité, telles que RDP et SSH ;</span><span class="sxs-lookup"><span data-stu-id="a3249-104">Reset or install connectivity features, such as RDP and SSH</span></span>
* <span data-ttu-id="a3249-105">diagnostiquer, surveiller et gérer vos machines virtuelles.</span><span class="sxs-lookup"><span data-stu-id="a3249-105">Diagnose, monitor, and manage your VMs</span></span>

<span data-ttu-id="a3249-106">Il existe de nombreuses autres fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="a3249-106">There are many other features as well.</span></span> <span data-ttu-id="a3249-107">De nouvelles fonctionnalités d’extension de machine virtuelle sont publiées régulièrement.</span><span class="sxs-lookup"><span data-stu-id="a3249-107">New VM Extension features are released regularly.</span></span> <span data-ttu-id="a3249-108">Cet article décrit les Agents hello Azure VM pour Windows et Linux, et comment ils prennent en charge la fonctionnalité d’Extension de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a3249-108">This article describes hello Azure VM Agents for Windows and Linux, and how they support VM Extension functionality.</span></span> <span data-ttu-id="a3249-109">Pour obtenir une liste des extensions de machine virtuelle par catégorie de fonctionnalité, consultez l’article [Fonctionnalités et extensions de machine virtuelle Azure](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a3249-109">For a listing of VM Extensions by feature category, see [Azure VM Extensions and Features](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="azure-vm-agents-for-windows-and-linux"></a><span data-ttu-id="a3249-110">Agents de machine virtuelle Azure pour Windows et Linux</span><span class="sxs-lookup"><span data-stu-id="a3249-110">Azure VM Agents for Windows and Linux</span></span>
<span data-ttu-id="a3249-111">Bonjour Azure Virtual Machines Agent (Agent de machine virtuelle) est un processus léger sécurisé qui installe, configure et supprime les extensions de machine virtuelle sur les instances de Machines virtuelles Azure.</span><span class="sxs-lookup"><span data-stu-id="a3249-111">hello Azure Virtual Machines Agent (VM Agent) is a secured, light-weight process that installs, configures, and removes VM extensions on instances of Azure Virtual Machines.</span></span> <span data-ttu-id="a3249-112">Hello Agent de machine virtuelle joue le rôle service de contrôle local sécurisé hello pour votre machine virtuelle Azure.</span><span class="sxs-lookup"><span data-stu-id="a3249-112">hello VM Agent acts as hello secure local control service for your Azure VM.</span></span> <span data-ttu-id="a3249-113">extensions Hello hello agent charge fournissent tooincrease de fonctionnalités spécifiques votre productivité à l’aide d’instance de hello.</span><span class="sxs-lookup"><span data-stu-id="a3249-113">hello extensions that hello agent loads provide specific features tooincrease your productivity using hello instance.</span></span>

<span data-ttu-id="a3249-114">Il existe deux agents de machine virtuelle Azure, un pour les machines virtuelles Windows et l'autre pour les machines virtuelles Linux.</span><span class="sxs-lookup"><span data-stu-id="a3249-114">Two Azure VM Agents exist, one for Windows VMs and one for Linux VMs.</span></span>

<span data-ttu-id="a3249-115">Si vous souhaitez un toouse d’instance de machine virtuelle à un ou plusieurs extensions de machine virtuelle, instance de hello doit avoir un Agent de machine virtuelle installé.</span><span class="sxs-lookup"><span data-stu-id="a3249-115">If you want a virtual machine instance toouse one or more VM extensions, hello instance must have an installed VM Agent.</span></span> <span data-ttu-id="a3249-116">Image de machine virtuelle créée à l’aide de hello portail Azure et une image à partir de hello **Marketplace** installe automatiquement un Agent de machine virtuelle dans le processus de création de hello.</span><span class="sxs-lookup"><span data-stu-id="a3249-116">A virtual machine image created by using hello Azure portal and an image from hello **Marketplace** automatically installs a VM Agent in hello creation process.</span></span> <span data-ttu-id="a3249-117">Si une instance de l’ordinateur virtuel ne dispose pas d’un Agent de machine virtuelle, vous pouvez installer hello Agent de machine virtuelle une fois que l’instance de machine virtuelle hello est créé.</span><span class="sxs-lookup"><span data-stu-id="a3249-117">If a virtual machine instance lacks a VM Agent, you can install hello VM Agent after hello virtual machine instance is created.</span></span> <span data-ttu-id="a3249-118">Ou bien, vous pouvez installer l’agent de hello dans une image de machine virtuelle personnalisée que vous chargez.</span><span class="sxs-lookup"><span data-stu-id="a3249-118">Or, you can install hello agent in a custom VM image that you then upload.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a3249-119">Ces agents de machine virtuelle sont des services légers permettant la gestion sécurisée des instances de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a3249-119">These VM Agents are very light-weight, services that enable secured administration of virtual machine instances.</span></span> <span data-ttu-id="a3249-120">Il peut y avoir des cas dans lesquels vous ne souhaitez pas hello Agent de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a3249-120">There might be cases in which you do not want hello VM Agent.</span></span> <span data-ttu-id="a3249-121">Dans ce cas, être sûr de machines virtuelles toocreate qui n’ont pas hello Agent de machine virtuelle installé à l’aide de PowerShell ou hello CLI d’Azure.</span><span class="sxs-lookup"><span data-stu-id="a3249-121">If so, be sure toocreate VMs that do not have hello VM Agent installed using hello Azure CLI or PowerShell.</span></span> <span data-ttu-id="a3249-122">Bien que hello Agent de machine virtuelle puisse être supprimé, comportement hello d’Extensions de machine virtuelle sur une instance de hello n’est pas défini.</span><span class="sxs-lookup"><span data-stu-id="a3249-122">Although hello VM Agent can be removed physically, hello behavior of VM Extensions on hello instance is undefined.</span></span> <span data-ttu-id="a3249-123">Par conséquent, la suppression d’un agent de machine virtuelle installé n’est pas prise en charge.</span><span class="sxs-lookup"><span data-stu-id="a3249-123">As a result, removing an installed VM Agent is not supported.</span></span>
>

<span data-ttu-id="a3249-124">Hello Agent de machine virtuelle est activée dans hello suivant situations :</span><span class="sxs-lookup"><span data-stu-id="a3249-124">hello VM Agent is enabled in hello following situations:</span></span>

* <span data-ttu-id="a3249-125">Lorsque vous créez une instance d’une machine virtuelle à l’aide de hello portail Azure et en sélectionnant une image à partir de hello **Marketplace**,</span><span class="sxs-lookup"><span data-stu-id="a3249-125">When you create an instance of a VM by using hello Azure portal and selecting an image from hello **Marketplace**,</span></span>
* <span data-ttu-id="a3249-126">Lorsque vous créez une instance d’une machine virtuelle à l’aide de hello [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) ou hello [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) applet de commande.</span><span class="sxs-lookup"><span data-stu-id="a3249-126">When you create an instance of a VM by using hello [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) or hello [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) cmdlet.</span></span> <span data-ttu-id="a3249-127">Vous pouvez créer un ordinateur virtuel sans Agent de machine virtuelle en ajoutant hello **– DisableGuestAgent** paramètre toohello [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) applet de commande</span><span class="sxs-lookup"><span data-stu-id="a3249-127">You can create a VM without a VM Agent by adding hello **–DisableGuestAgent** parameter toohello [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) cmdlet,</span></span>

* <span data-ttu-id="a3249-128">Lorsque vous manuellement télécharger et installer hello Agent de machine virtuelle sur une instance existante de la machine virtuelle et définir hello **ProvisionGuestAgent** valeur trop**true**.</span><span class="sxs-lookup"><span data-stu-id="a3249-128">When you manually download and install hello VM Agent on an existing VM instance, and set hello **ProvisionGuestAgent** value too**true**.</span></span> <span data-ttu-id="a3249-129">Vous pouvez utiliser cette technique pour les agents Windows et Linux, à l’aide d’une commande PowerShell ou d’un appel REST.</span><span class="sxs-lookup"><span data-stu-id="a3249-129">You can use this technique for Windows and Linux agents, by using a PowerShell command or a REST call.</span></span> <span data-ttu-id="a3249-130">(Si vous ne définissez pas hello **ProvisionGuestAgent** valeur après l’installation manuelle hello Agent de machine virtuelle, ajout de hello de hello Agent de machine virtuelle n’est pas correctement détecté.) hello suivant exemple de code montre comment toodo ce à l’aide de PowerShell où hello `$svc` et `$name` arguments ont déjà été déterminées :</span><span class="sxs-lookup"><span data-stu-id="a3249-130">(If you do not set hello **ProvisionGuestAgent** value after manually installing hello VM Agent, hello addition of hello VM Agent is not detected properly.) hello following code example shows how toodo this using PowerShell where hello `$svc` and `$name` arguments have already been determined:</span></span>

      $vm = Get-AzureVM –ServiceName $svc –Name $name
      $vm.VM.ProvisionGuestAgent = $TRUE
      Update-AzureVM –Name $name –VM $vm.VM –ServiceName $svc

* <span data-ttu-id="a3249-131">Lorsque vous créez une image de machine virtuelle qui inclut un agent de machine virtuelle installé.</span><span class="sxs-lookup"><span data-stu-id="a3249-131">When you create a VM image that includes an installed VM Agent.</span></span> <span data-ttu-id="a3249-132">Une fois l’image hello avec hello Agent de machine virtuelle existe, vous pouvez télécharger ce tooAzure d’image.</span><span class="sxs-lookup"><span data-stu-id="a3249-132">Once hello image with hello VM Agent exists, you can upload that image tooAzure.</span></span> <span data-ttu-id="a3249-133">Pour une machine virtuelle Windows, téléchargez hello [fichier .msi de l’Agent de machine virtuelle Windows](http://go.microsoft.com/fwlink/?LinkID=394789) et installer hello Agent de machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="a3249-133">For a Windows VM, download hello [Windows VM Agent .msi file](http://go.microsoft.com/fwlink/?LinkID=394789) and install hello VM Agent.</span></span> <span data-ttu-id="a3249-134">Pour un VM Linux, installez hello Agent de machine virtuelle à partir du référentiel GitHub de hello situé <https://github.com/Azure/WALinuxAgent>.</span><span class="sxs-lookup"><span data-stu-id="a3249-134">For a Linux VM, install hello VM Agent from hello GitHub repository located at <https://github.com/Azure/WALinuxAgent>.</span></span> <span data-ttu-id="a3249-135">Pour plus d’informations sur la façon dont tooinstall hello Agent de machine virtuelle sur Linux, consultez hello [Guide de l’utilisateur Agent de machine virtuelle Linux Azure](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a3249-135">For more information on how tooinstall hello VM Agent on Linux, see hello [Azure Linux VM Agent User Guide](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

> [!NOTE]
> <span data-ttu-id="a3249-136">Dans PaaS, hello Agent de machine virtuelle est appelée **WindowsAzureGuestAgent**et est toujours disponible sur le Web et les machines virtuelles de rôle de travail.</span><span class="sxs-lookup"><span data-stu-id="a3249-136">In PaaS, hello VM Agent is called **WindowsAzureGuestAgent**, and is always available on Web and Worker Role VMs.</span></span> <span data-ttu-id="a3249-137">(Pour plus d’informations, consultez [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) hello Agent de machine virtuelle pour les machines virtuelles de rôle peut désormais ajouter des extensions toohello cloud service machines virtuelles de hello même façon que pour les Machines virtuelles persistantes.</span><span class="sxs-lookup"><span data-stu-id="a3249-137">(For more information, see [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) hello VM Agent for Role VMs can now add extensions toohello cloud service VMs in hello same way that it does for persistent Virtual Machines.</span></span> <span data-ttu-id="a3249-138">Hello plus grande différence entre les Extensions de machine virtuelle sur des machines virtuelles de rôle et les machines virtuelles persistantes est lors de l’ajout d’extensions de machine virtuelle hello.</span><span class="sxs-lookup"><span data-stu-id="a3249-138">hello biggest difference between VM Extensions on role VMs and persistent VMs is when hello VM extensions are added.</span></span> <span data-ttu-id="a3249-139">Avec les machines virtuelles de rôle, les extensions sont ajoutées premier service de cloud toohello, puis toohello déploiements au sein de ce service cloud.</span><span class="sxs-lookup"><span data-stu-id="a3249-139">With role VMs, extensions are added first toohello cloud service, then toohello deployments within that cloud service.</span></span>
>
> <span data-ttu-id="a3249-140">Utilisez le [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) toolist de l’applet de commande toutes les extensions de machine virtuelle de rôle disponibles.</span><span class="sxs-lookup"><span data-stu-id="a3249-140">Use the [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) cmdlet toolist all available role VM extensions.</span></span>
>
>

## <a name="find-add-update-and-remove-vm-extensions"></a><span data-ttu-id="a3249-141">Rechercher, ajouter, mettre à jour et supprimer des extensions de machine virtuelle</span><span class="sxs-lookup"><span data-stu-id="a3249-141">Find, Add, Update, and Remove VM Extensions</span></span>
<span data-ttu-id="a3249-142">Pour plus d’informations sur ces tâches, consultez l’article expliquant comment [ajouter, rechercher, mettre à jour et supprimer des extensions de machines virtuelles Azure](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a3249-142">For details on these tasks, see [Add, Find, Update, and Remove Azure VM Extensions](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>
