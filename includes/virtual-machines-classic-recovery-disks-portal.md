<span data-ttu-id="3ece1-101">Si votre machine virtuelle (VM) dans Azure rencontre une erreur de démarrage ou de disque, vous devrez peut-être tooperform étapes de dépannage sur le disque dur virtuel hello lui-même.</span><span class="sxs-lookup"><span data-stu-id="3ece1-101">If your virtual machine (VM) in Azure encounters a boot or disk error, you may need tooperform troubleshooting steps on hello virtual hard disk itself.</span></span> <span data-ttu-id="3ece1-102">Un exemple courant est une mise à jour d’application qui a échoué qui empêche les hello machine virtuelle de démarrer correctement.</span><span class="sxs-lookup"><span data-stu-id="3ece1-102">A common example would be a failed application update that prevents hello VM from booting successfully.</span></span> <span data-ttu-id="3ece1-103">Cet article décrit comment toouse tooconnect portail Azure votre toofix de machine virtuelle de disque dur virtuel tooanother toutes les erreurs, puis recréer votre machine virtuelle d’origine.</span><span class="sxs-lookup"><span data-stu-id="3ece1-103">This article describes how toouse Azure portal tooconnect your virtual hard disk tooanother VM toofix any errors and then re-create your original VM.</span></span>

## <a name="recovery-process-overview"></a><span data-ttu-id="3ece1-104">Vue d’ensemble du processus de récupération</span><span class="sxs-lookup"><span data-stu-id="3ece1-104">Recovery process overview</span></span>
<span data-ttu-id="3ece1-105">Hello, résolution des problèmes de processus est la suivante :</span><span class="sxs-lookup"><span data-stu-id="3ece1-105">hello troubleshooting process is as follows:</span></span>

1. <span data-ttu-id="3ece1-106">Supprimer hello machine virtuelle qui rencontre des problèmes, mais conserver les disques durs virtuels hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-106">Delete hello VM that's encountering issues, but retain hello virtual hard disks.</span></span>
2. <span data-ttu-id="3ece1-107">Attacher et monter tooanother de disque dur virtuel hello machine virtuelle pour le dépannage.</span><span class="sxs-lookup"><span data-stu-id="3ece1-107">Attach and mount hello virtual hard disk tooanother VM for troubleshooting.</span></span>
3. <span data-ttu-id="3ece1-108">Se connecter toohello résolution des problèmes de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="3ece1-108">Connect toohello troubleshooting VM.</span></span> <span data-ttu-id="3ece1-109">Modifier des fichiers ou d’exécuter les outils toofix erreurs sur les disque dur virtuel d’origine hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-109">Edit files or run tools toofix errors on hello original virtual hard disk.</span></span>
4. <span data-ttu-id="3ece1-110">Démontez et détacher le disque dur virtuel de hello de hello, résolution des problèmes de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="3ece1-110">Unmount and detach hello virtual hard disk from hello troubleshooting VM.</span></span>
5. <span data-ttu-id="3ece1-111">Créer une machine virtuelle à l’aide de hello d’origine disque dur.</span><span class="sxs-lookup"><span data-stu-id="3ece1-111">Create a VM by using hello original virtual hard disk.</span></span>

## <a name="delete-hello-original-vm"></a><span data-ttu-id="3ece1-112">Supprimer hello d’ordinateur virtuel d’origine</span><span class="sxs-lookup"><span data-stu-id="3ece1-112">Delete hello original VM</span></span>
<span data-ttu-id="3ece1-113">Les disques durs virtuels et les machines virtuelles sont deux ressources distinctes dans Azure.</span><span class="sxs-lookup"><span data-stu-id="3ece1-113">Virtual hard disks and VMs are two distinct resources in Azure.</span></span> <span data-ttu-id="3ece1-114">Un disque dur virtuel consiste à stocker des configurations, des applications et système d’exploitation de hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-114">A virtual hard disk is where hello operating system, applications, and configurations are stored.</span></span> <span data-ttu-id="3ece1-115">Hello machine virtuelle est simplement des métadonnées qui définit la taille de hello ou l’emplacement et qui fait référence à des ressources, tel qu’un disque dur virtuel ou d’une carte réseau virtuelle (NIC).</span><span class="sxs-lookup"><span data-stu-id="3ece1-115">hello VM is just metadata that defines hello size or location and that references resources such as a virtual hard disk or virtual network interface card (NIC).</span></span> <span data-ttu-id="3ece1-116">Chaque disque dur virtuel Obtient un bail affecté lors de ce disque est attaché tooa machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="3ece1-116">Each virtual hard disk gets a lease assigned when that disk is attached tooa VM.</span></span> <span data-ttu-id="3ece1-117">Bien que les disques de données peuvent être attachées et détachées même pendant l’exécution de la machine virtuelle de hello, les disques du système d’exploitation hello ne peut pas être détachée tant que hello ressource d’ordinateur virtuel est supprimé.</span><span class="sxs-lookup"><span data-stu-id="3ece1-117">Although data disks can be attached and detached even while hello VM is running, hello OS disk cannot be detached unless hello VM resource is deleted.</span></span> <span data-ttu-id="3ece1-118">bail de Hello continue tooassociate hello du système d’exploitation disque tooa machine virtuelle, même lorsque l’ordinateur virtuel est dans un état arrêté et est libéré.</span><span class="sxs-lookup"><span data-stu-id="3ece1-118">hello lease continues tooassociate hello OS disk tooa VM even when that VM is in a stopped and deallocated state.</span></span>

<span data-ttu-id="3ece1-119">Hello première étape toorecovering votre machine virtuelle est la ressource d’ordinateur virtuel hello toodelete lui-même.</span><span class="sxs-lookup"><span data-stu-id="3ece1-119">hello first step toorecovering your VM is toodelete hello VM resource itself.</span></span> <span data-ttu-id="3ece1-120">Suppression hello VM laisse hello des disques durs virtuels dans votre compte de stockage.</span><span class="sxs-lookup"><span data-stu-id="3ece1-120">Deleting hello VM leaves hello virtual hard disks in your storage account.</span></span> <span data-ttu-id="3ece1-121">Après hello que machine virtuelle est supprimée, vous pouvez attacher hello disque dur virtuel tooanother VM tootroubleshoot et résoudre les erreurs de hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-121">After hello VM is deleted, you can attach hello virtual hard disk tooanother VM tootroubleshoot and resolve hello errors.</span></span> 

1. <span data-ttu-id="3ece1-122">Connectez-vous à toohello [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="3ece1-122">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="3ece1-123">Dans le menu hello hello situé à gauche, cliquez sur **Machines virtuelles (classiques)**.</span><span class="sxs-lookup"><span data-stu-id="3ece1-123">On hello menu on hello left side, click **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="3ece1-124">Cliquez sur la machine virtuelle qui possède le problème de hello, sélectionnez hello **disques**, puis identifiez le nom hello du disque dur virtuel de hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-124">Select hello VM that has hello problem, click **Disks**, and then identify hello name of hello virtual hard disk.</span></span> 
4. <span data-ttu-id="3ece1-125">Sélectionnez un disque dur virtuel hello du système d’exploitation et vérifier hello **emplacement** compte de stockage hello tooidentify qui contient ce disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="3ece1-125">Select hello OS virtual hard disk and check hello **Location** tooidentify hello storage account that contains that virtual hard disk.</span></span> <span data-ttu-id="3ece1-126">Dans l’exemple suivant de hello, hello chaîne immédiatement avant «. blob.core.windows.net » est le nom de compte de stockage hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-126">In hello following example, hello string immediately before ".blob.core.windows.net" is hello storage account name.</span></span>

    ```
    https://portalvhds73fmhrw5xkp43.blob.core.windows.net/vhds/SCCM2012-2015-08-28.vhd
    ```

    ![image Hello sur l’emplacement de la machine virtuelle](./media/virtual-machines-classic-recovery-disks-portal/vm-location.png)

5. <span data-ttu-id="3ece1-128">Avec le bouton droit hello machine virtuelle, puis sélectionnez **supprimer**.</span><span class="sxs-lookup"><span data-stu-id="3ece1-128">Right-click hello VM and then select **Delete**.</span></span> <span data-ttu-id="3ece1-129">Assurez-vous que les disques de hello ne sont pas activées lorsque vous supprimez hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="3ece1-129">Make sure that hello disks are not selected when you delete hello VM.</span></span>
6. <span data-ttu-id="3ece1-130">Créez une nouvelle machine virtuelle de récupération.</span><span class="sxs-lookup"><span data-stu-id="3ece1-130">Create a new recovery VM.</span></span> <span data-ttu-id="3ece1-131">Cet ordinateur virtuel doit être Bonjour même région et ressource groupe (Service Cloud) en tant que le problème hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="3ece1-131">This VM must be in hello same region and resource group (Cloud Service) as hello problem VM.</span></span>
7. <span data-ttu-id="3ece1-132">Sélectionnez l’ordinateur virtuel de récupération hello et sélectionnez **disques** > **attacher existant**.</span><span class="sxs-lookup"><span data-stu-id="3ece1-132">Select hello recovery VM, and then select **Disks** > **Attach Existing**.</span></span>
8. <span data-ttu-id="3ece1-133">tooselect votre disque dur virtuel existant, cliquez sur **fichier de disque dur virtuel**:</span><span class="sxs-lookup"><span data-stu-id="3ece1-133">tooselect your existing virtual hard disk, click **VHD File**:</span></span>

    ![Rechercher le disque dur virtuel existant](./media/virtual-machines-classic-recovery-disks-portal/select-vhd-location.png)

9. <span data-ttu-id="3ece1-135">Sélectionnez le compte de stockage hello > conteneur de disque dur virtuel > hello du disque dur virtuel, cliquez sur hello **sélectionnez** bouton tooconfirm votre choix.</span><span class="sxs-lookup"><span data-stu-id="3ece1-135">Select hello storage account > VHD container > hello virtual hard disk, click hello **Select** button tooconfirm your choice.</span></span>

    ![Sélectionner votre disque dur virtuel existant](./media/virtual-machines-classic-recovery-disks-portal/select-vhd.png)

10. <span data-ttu-id="3ece1-137">Sélectionnez votre disque dur virtuel est maintenant sélectionné, **OK** tooattach hello disque dur virtuel existant.</span><span class="sxs-lookup"><span data-stu-id="3ece1-137">With your VHD now selected, select **OK** tooattach hello existing virtual hard disk.</span></span>
11. <span data-ttu-id="3ece1-138">Après quelques secondes, hello **disques** volet pour votre machine virtuelle affiche votre disque dur virtuel existant connecté en tant qu’un disque de données :</span><span class="sxs-lookup"><span data-stu-id="3ece1-138">After a few seconds, hello **Disks** pane for your VM will display your existing virtual hard disk connected as a data disk:</span></span>

    ![Disque dur virtuel existant attaché en tant que disque de données](./media/virtual-machines-classic-recovery-disks-portal/attached-disk.png)

## <a name="fix-issues-on-hello-original-virtual-hard-disk"></a><span data-ttu-id="3ece1-140">Résoudre les problèmes sur les disque dur virtuel d’origine hello</span><span class="sxs-lookup"><span data-stu-id="3ece1-140">Fix issues on hello original virtual hard disk</span></span>
<span data-ttu-id="3ece1-141">Lorsque le disque dur virtuel existant hello est monté, vous pouvez désormais effectuer une maintenance et dépannage en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="3ece1-141">When hello existing virtual hard disk is mounted, you can now perform any maintenance and troubleshooting steps as needed.</span></span> <span data-ttu-id="3ece1-142">Une fois que vous avez corrige les problèmes de hello, poursuivez hello comme suit.</span><span class="sxs-lookup"><span data-stu-id="3ece1-142">Once you have addressed hello issues, continue with hello following steps.</span></span>

## <a name="unmount-and-detach-hello-original-virtual-hard-disk"></a><span data-ttu-id="3ece1-143">Démontez et détacher les disque dur virtuel d’origine hello</span><span class="sxs-lookup"><span data-stu-id="3ece1-143">Unmount and detach hello original virtual hard disk</span></span>
<span data-ttu-id="3ece1-144">Une fois toutes les erreurs résolues, démontez et détacher hello disque dur virtuel existant à partir de votre machine virtuelle de résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="3ece1-144">Once any errors are resolved, unmount and detach hello existing virtual hard disk from your troubleshooting VM.</span></span> <span data-ttu-id="3ece1-145">Vous ne pouvez pas utiliser votre disque dur virtuel avec tout autre ordinateur virtuel jusqu'à ce que le bail hello qui relie des toohello de disque dur virtuel hello résolution des problèmes de la machine virtuelle est libéré.</span><span class="sxs-lookup"><span data-stu-id="3ece1-145">You cannot use your virtual hard disk together with any other VM until hello lease that attaches hello virtual hard disk toohello troubleshooting VM is released.</span></span>  

1. <span data-ttu-id="3ece1-146">Connectez-vous à toohello [portail Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="3ece1-146">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="3ece1-147">Dans le menu hello hello situé à gauche, sélectionnez **Machines virtuelles (classiques)**.</span><span class="sxs-lookup"><span data-stu-id="3ece1-147">On hello menu on hello left side, select **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="3ece1-148">Localisez l’ordinateur virtuel de récupération hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-148">Locate hello recovery VM.</span></span> <span data-ttu-id="3ece1-149">Sélectionnez les disques, disque de hello avec le bouton droit, puis **détachement**.</span><span class="sxs-lookup"><span data-stu-id="3ece1-149">Select Disks, right-click hello disk, and then select **Detach**.</span></span>

## <a name="create-a-vm-from-hello-original-hard-disk"></a><span data-ttu-id="3ece1-150">Créer une machine virtuelle à partir du disque dur d’origine de hello</span><span class="sxs-lookup"><span data-stu-id="3ece1-150">Create a VM from hello original hard disk</span></span>

<span data-ttu-id="3ece1-151">utilisation d’une machine virtuelle à partir de votre disque dur virtuel d’origine, toocreate [portail Azure classic](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="3ece1-151">toocreate a VM from your original virtual hard disk, use [Azure classic portal](https://manage.windowsazure.com).</span></span>

1. <span data-ttu-id="3ece1-152">Connectez-vous au [portail Azure Classic](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="3ece1-152">Sign into [Azure classic portal](https://manage.windowsazure.com).</span></span>
2. <span data-ttu-id="3ece1-153">Au bas de hello du portail de hello, sélectionnez **nouveau** > **de calcul** > **Machine virtuelle** > **à partir de la galerie** .</span><span class="sxs-lookup"><span data-stu-id="3ece1-153">At hello bottom of hello portal, select **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span>
3. <span data-ttu-id="3ece1-154">Bonjour **choisir une Image** section, sélectionnez **mes disques**, et puis sélectionnez hello d’origine de disque dur virtuel.</span><span class="sxs-lookup"><span data-stu-id="3ece1-154">In hello **Choose an Image** section, select **My disks**, and then select hello original virtual hard disk.</span></span> <span data-ttu-id="3ece1-155">Vérifiez les informations d’emplacement hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-155">Check hello location information.</span></span> <span data-ttu-id="3ece1-156">Il s’agit de région de hello où hello machine virtuelle doit être déployé.</span><span class="sxs-lookup"><span data-stu-id="3ece1-156">This is hello region where hello VM must be deployed.</span></span> <span data-ttu-id="3ece1-157">Sélectionnez le bouton suivant de hello.</span><span class="sxs-lookup"><span data-stu-id="3ece1-157">Select hello next button.</span></span>
4. <span data-ttu-id="3ece1-158">Bonjour **configuration d’ordinateur virtuel** section, tapez le nom d’ordinateur virtuel hello et sélectionnez une taille pour hello machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="3ece1-158">In hello **Virtual machine configuration** section, type hello VM name and select a size for hello VM.</span></span>
