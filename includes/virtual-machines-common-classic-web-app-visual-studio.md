

<span data-ttu-id="370ce-101">Quand vous créez un projet d’application web pour Azure, vous pouvez approvisionner une machine virtuelle dans Azure.</span><span class="sxs-lookup"><span data-stu-id="370ce-101">When you create a web application project for Azure, you can provision a virtual machine in Azure.</span></span> <span data-ttu-id="370ce-102">Vous pouvez ensuite la configurer avec des logiciels supplémentaires ou l'utiliser à des fins de diagnostic ou de débogage.</span><span class="sxs-lookup"><span data-stu-id="370ce-102">You can then configure the virtual machine with additional software, or use the virtual machine for diagnostic or debugging purposes.</span></span>

<span data-ttu-id="370ce-103">Pour créer une machine virtuelle quand vous créez une application web, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="370ce-103">To create a virtual machine when you create a web application, follow these steps:</span></span>

1. <span data-ttu-id="370ce-104">Dans Visual Studio, cliquez sur **Fichier** > **Nouveau** > **Projet** > **Web**, puis choisissez **Application Web ASP.NET** (sous les nœuds **Visual C#** ou **Visual Basic**).</span><span class="sxs-lookup"><span data-stu-id="370ce-104">In Visual Studio, click **File** > **New** > **Project** > **Web**, and then choose **ASP.NET Web Application** (under the **Visual C#** or **Visual Basic** nodes).</span></span>
2. <span data-ttu-id="370ce-105">Dans la boîte de dialogue **Nouveau projet ASP.NET**, sélectionnez le type d’application web souhaité. Dans la section Azure de la boîte de dialogue (en bas à droite), veillez à ce que la case **Héberger dans le cloud** soit cochée (elle est appelée **Créer des ressources distantes** dans certaines installations).</span><span class="sxs-lookup"><span data-stu-id="370ce-105">In the **New ASP.NET Project** dialog box, select the type of web application you want, and in the Azure section of the dialog box (in the lower-right corner), make sure that the **Host in the cloud** check box is selected (this check box is labeled **Create remote resources** in some installations).</span></span>
   
    ![][0]
3. <span data-ttu-id="370ce-106">Pour cet exemple, dans la liste déroulante sous Microsoft Azure, choisissez **Machine virtuelle (v1)**, puis cliquez sur le bouton **OK**.</span><span class="sxs-lookup"><span data-stu-id="370ce-106">For this example, in the drop-down list under Microsoft Azure, choose **Virtual Machine (v1)**, and then click the **OK** button.</span></span>
4. <span data-ttu-id="370ce-107">Connectez-vous à Azure si vous y êtes invité.</span><span class="sxs-lookup"><span data-stu-id="370ce-107">Sign in to Azure if you're prompted.</span></span> <span data-ttu-id="370ce-108">La boîte de dialogue **Créer une machine virtuelle** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="370ce-108">The **Create Virtual Machine** dialog box appears.</span></span>
   
    ![][2]
5. <span data-ttu-id="370ce-109">Dans la zone **Nom DNS** , saisissez le nom de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-109">In the **DNS name** box, enter a name for the virtual machine.</span></span> <span data-ttu-id="370ce-110">Le nom DNS doit être unique dans Azure.</span><span class="sxs-lookup"><span data-stu-id="370ce-110">The DNS name must be unique in Azure.</span></span> <span data-ttu-id="370ce-111">Si le nom saisi n'est pas disponible, un point d'exclamation rouge apparaît.</span><span class="sxs-lookup"><span data-stu-id="370ce-111">If the name you entered isn't available, a red exclamation point appears.</span></span>
6. <span data-ttu-id="370ce-112">Dans la liste **Images** , choisissez l'image de machine virtuelle sur laquelle vous souhaitez baser la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-112">In the **Image** list, choose the image you want to base the virtual machine on.</span></span> <span data-ttu-id="370ce-113">Vous pouvez choisir n'importe quelle image de machine virtuelle Azure standard ou votre propre image téléchargée dans Azure.</span><span class="sxs-lookup"><span data-stu-id="370ce-113">You can choose any of the standard Azure virtual machine images or your image that you've uploaded to Azure.</span></span>
7. <span data-ttu-id="370ce-114">Ne cochez pas la case **Activer IIS et Web Deploy** , sauf si vous prévoyez d'installer un serveur web différent.</span><span class="sxs-lookup"><span data-stu-id="370ce-114">Leave the **Enable IIS and Web Deploy** check box selected unless you plan to install a different web server.</span></span> <span data-ttu-id="370ce-115">Vous ne pourrez pas effectuer de publication à partir de Visual Studio si vous désactivez Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="370ce-115">You won't be able to publish from Visual Studio if you disable Web Deploy.</span></span> <span data-ttu-id="370ce-116">Vous pouvez ajouter IIS et Web Deploy à n'importe quelle image Windows Server, y compris à vos images personnalisées.</span><span class="sxs-lookup"><span data-stu-id="370ce-116">You can add IIS and Web Deploy to any of the packaged Windows Server images, including your own custom images.</span></span>
8. <span data-ttu-id="370ce-117">Dans la liste **Taille** , sélectionnez la taille de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-117">In the **Size** list, choose the size of the virtual machine.</span></span>
9. <span data-ttu-id="370ce-118">Spécifiez les identifiants de connexion de cette machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-118">Specify the sign-in credentials for this virtual machine.</span></span> <span data-ttu-id="370ce-119">Notez-les, car vous en aurez besoin pour accéder à la machine avec le Bureau à distance.</span><span class="sxs-lookup"><span data-stu-id="370ce-119">Make a note of them, because you'll need them to access the machine through Remote Desktop.</span></span>
10. <span data-ttu-id="370ce-120">Dans la liste **Emplacement** , choisissez la région dans laquelle héberger la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-120">In the **Location** list, choose the region to host the virtual machine.</span></span>
11. <span data-ttu-id="370ce-121">Cliquez sur le bouton **OK** pour commencer la création de la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-121">Click  the **OK** button to start creating the virtual machine.</span></span> <span data-ttu-id="370ce-122">Vous pouvez suivre la progression de l'opération dans la fenêtre **Sortie** .</span><span class="sxs-lookup"><span data-stu-id="370ce-122">You can follow the progress of the operation in the **Output** window.</span></span>
    
    ![][3]
12. <span data-ttu-id="370ce-123">Quand la machine virtuelle est approvisionnée, les scripts publiés sont créés dans un nœud **PublishScripts** de votre solution.</span><span class="sxs-lookup"><span data-stu-id="370ce-123">When the virtual machine is provisioned, published scripts are created in a **PublishScripts** node in your solution.</span></span> <span data-ttu-id="370ce-124">Le script publié exécute et provisionne une machine virtuelle dans Azure.</span><span class="sxs-lookup"><span data-stu-id="370ce-124">The published script runs and provisions a virtual machine in Azure.</span></span> <span data-ttu-id="370ce-125">La fenêtre **Sortie** affiche le statut.</span><span class="sxs-lookup"><span data-stu-id="370ce-125">The **Output** window shows the status.</span></span> <span data-ttu-id="370ce-126">Le script effectue les opérations ci-après pour configurer la machine virtuelle :</span><span class="sxs-lookup"><span data-stu-id="370ce-126">The script performs the following actions to set up the virtual machine:</span></span>
    
    * <span data-ttu-id="370ce-127">Création de la machine virtuelle si elle n’existe pas déjà.</span><span class="sxs-lookup"><span data-stu-id="370ce-127">Creates the virtual machine if it doesn't already exist.</span></span>
    * <span data-ttu-id="370ce-128">Crée un compte de stockage avec un nom qui commence par `devtest`, mais uniquement s’il n’existe pas déjà un compte de stockage de ce type dans la région spécifiée.</span><span class="sxs-lookup"><span data-stu-id="370ce-128">Creates a storage account with a name that begins with `devtest`, but only if there isn't already such a storage account in the specified region.</span></span>
    * <span data-ttu-id="370ce-129">Création d’un service cloud comme conteneur pour la machine virtuelle et création d’un rôle web pour l’application web.</span><span class="sxs-lookup"><span data-stu-id="370ce-129">Creates a cloud service as a container for the virtual machine, and creates a web role for the web application.</span></span>
    * <span data-ttu-id="370ce-130">Configuration de Web Deploy sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-130">Configures Web Deploy on the virtual machine.</span></span>
    * <span data-ttu-id="370ce-131">Configuration d’IIS et d’ASP.NET sur la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-131">Configures IIS and ASP.NET on the virtual machine.</span></span>
    
    ![][4]
13. <span data-ttu-id="370ce-132">(Facultatif) Vous pouvez vous connecter à la nouvelle machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-132">(Optional) You can connect to the new virtual machine.</span></span> <span data-ttu-id="370ce-133">Dans **l’Explorateur de serveurs**, développez le nœud **Machines virtuelles**. Choisissez le nœud de la machine virtuelle que vous avez créée, puis dans le menu contextuel, sélectionnez **Se connecter avec le Bureau à distance**.</span><span class="sxs-lookup"><span data-stu-id="370ce-133">In **Server Explorer**, expand the **Virtual Machines** node, choose the node for the virtual machine you created, and on its shortcut menu, choose **Connect with Remote Desktop**.</span></span> <span data-ttu-id="370ce-134">Vous pouvez également choisir dans **Cloud Explorer** l’option **Ouvrir dans le portail** dans le menu contextuel et y établir une connexion à la machine virtuelle.</span><span class="sxs-lookup"><span data-stu-id="370ce-134">Alternatively, in **Cloud Explorer** you can choose **Open in Portal** on the shortcut menu and connect to the virtual machine there.</span></span>
    
    ![][5]

## <a name="next-steps"></a><span data-ttu-id="370ce-135">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="370ce-135">Next steps</span></span>
<span data-ttu-id="370ce-136">Si vous souhaitez personnaliser les scripts publiés que vous avez créés, vous trouverez des informations plus détaillées à la rubrique [Utilisation des scripts Windows PowerShell pour la publication dans des environnements de développement et de test](http://msdn.microsoft.com/library/dn642480.aspx).</span><span class="sxs-lookup"><span data-stu-id="370ce-136">If you want to customize the published scripts you created, read more in-depth information at [Using Windows PowerShell Scripts to Publish to Dev and Test Environments](http://msdn.microsoft.com/library/dn642480.aspx).</span></span>

[0]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_NewProject.PNG
[1]: ./media/dotnet-visual-studio-create-virtual-machine/CreateVM_SignIn.PNG
[2]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_CreateVM.PNG
[3]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_Provisioning.png
[4]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_SolutionExplorer.png
[5]: ./media/virtual-machines-common-classic-web-app-visual-studio/VS_Create_VM_Connect.png
